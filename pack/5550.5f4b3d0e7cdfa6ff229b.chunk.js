"use strict";(self.webpackChunkmingdao_web=self.webpackChunkmingdao_web||[]).push([[5550],{25550:(x,m,t)=>{t.r(m),t.d(m,{default:()=>L});var Z=t(85105),f=t.n(Z),p=t(99663),C=t(22600),S=t(49135),y=t(93196),o=t(67294),I=t(73935),N=t(49611),T=t.n(N),D=t(17563),E=t(96841),B=t(96486),F=t(93967),M=t(1084),H=t(83821),u=t(25265),g=t(30429),O=t(48645),U=t(46142),G=t(54208),R=t(85558),W=t(69277),c=t(54424),v=t(35356),P,Y=(0,M.Z)(P=function(d){(0,y.default)(n,d);function n(e){(0,p.default)(this,n);var a=(0,S.default)(this,(n.__proto__||f()(n)).call(this,e));return a.state={loading:!0},a}return(0,C.default)(n,[{key:"componentDidMount",value:function(){var a=this,i=this.props.session,r=i.id,l=i.type;O.my({type:l,value:r}).then(function(s){var h={};l==v.Z.SESSIONTYPE_USER?h={isGroup:!1,uname:s.fullname,count:0,from:s.accountId,logo:s.avatar,sysType:1,msg:{con:""}}:l==v.Z.SESSIONTYPE_GROUP&&(h={isGroup:!0,groupname:s.name,count:0,to:s.groupId,from:s.from,avatar:s.avatar,sysType:1,msg:{con:""}}),a.props.dispatch(u.Zk(!0)),a.props.dispatch(u.TN(h)),a.props.dispatch(u.ZE({value:r})),a.props.dispatch(u.O$(s)),a.setState({loading:!1})}),(0,R.T)(),l==v.Z.SESSIONTYPE_USER?c.Fb.call(this):c.nG.call(this),c.Mx.call(this),W.r8.setCurrentChat({value:r,type:Number(l)}),g.uS.set(r),$(window).unload(function(){g.uS.remove(r),W.r8.setCurrentChat({})})}},{key:"render",value:function(){var a=this.state.loading,i=this.props,r=i.currentSession,l=i.currentSessionList;return o.createElement("div",{className:"ChatPanel-wrapper ChatPanel-window"},l.map(function(s){return o.createElement(U.Z,{session:s,key:s.accountId||s.groupId})}),a?o.createElement("div",{className:"ChatPanel ChatPanel-loading"},o.createElement(G.Z,{size:"middle"})):void 0)}}]),n}(o.Component))||P,j=(0,E.$j)(function(d){var n=d.chat,e=n.currentSession,a=n.currentSessionList,i=n.sessionList,r=n.isWindow;return{currentSession:e,currentSessionList:a,sessionList:i,isWindow:r}})(Y);const z=j;var A=t(94176),L=function(d){(0,y.default)(n,d);function n(){return(0,p.default)(this,n),(0,S.default)(this,(n.__proto__||f()(n)).apply(this,arguments))}return(0,C.default)(n,[{key:"componentDidMount",value:function(){$("html").addClass("AppChat")}},{key:"componentWillUnmount",value:function(){$("html").removeClass("AppChat")}},{key:"render",value:function(){var a=D.parse(location.search.slice(1));return o.createElement(T(),{title:a.name},o.createElement(E.zt,{store:A.Z},o.createElement(z,{session:a})))}}]),n}(o.Component);I.render(o.createElement(L,null),document.getElementById("app"))}}]);
