"use strict";(self.webpackChunkmingdao_web=self.webpackChunkmingdao_web||[]).push([[5983],{5983:(_,f,t)=>{t.r(f),t.d(f,{default:()=>w});var tt=t(77040),g=t(94301),E=t.n(g),at=t(73818),C=t(96223),N=t.n(C),lt=t(66814),S=t(91880),P=t.n(S),nt=t(48388),B=t(29914),D=t.n(B),T=t(33867),st=t(22382),x=t(28661),d=t.n(x),R=t(85105),F=t.n(R),Z=t(99663),U=t(22600),W=t(49135),j=t(93196),ot=t(20148),M=t(60385),y=t.n(M),a=t(67294),O=t(50533),et=t(39216),Y=t(48272),z=t.n(Y),G=t(12424),V=t(46593),H=t.n(V),m=t(49365),h=function(s){var o=s.appId;return function(l){l({type:"APPLY_LIST_START"}),H().all([m.Z.getAppApplyInfo({appId:o}).then(),m.Z.getRolesWithUsers({appId:o}).then()]).then(function(i){var p=(0,G.Z)(i,2),c=p[0],e=p[1];l({type:"UPDATE_APPLY_LIST",data:{applyList:c,roleList:e}}),l({type:"APPLY_LIST_OVER"})})}},u=function(s){return function(o){m.Z.editAppApplyStatus(s).then(function(l){l?(z().info(_l("\u64CD\u4F5C\u6210\u529F")),o(h({appId:s.appId}))):y().alert(_l("\u5931\u8D25"),"",[{text:_l("\u786E\u5B9A"),onPress:function(){}}])})}},J=t(75915),K=t(25758),pt=t(93967),Q=t(96486),A=t.n(Q),X=y().prompt,k=function(r){(0,j.default)(s,r);function s(o){(0,Z.default)(this,s);var l=(0,W.default)(this,(s.__proto__||F()(s)).call(this,o));return l.showActionSheet=function(i){var p=l.props.applyData,c=p.applyList,e=p.roleList,I=l.props.match.params,v=A().map(e,function(n,L){return a.createElement("span",{className:"Bold",key:n.roleId+"-"+L},_l("\u8BBE\u4E3A%0",n.name))});d().showActionSheetWithOptions({options:v,maskClosable:!0,message:a.createElement("div",{className:"flexRow header"},a.createElement("span",{className:"Font13"},_l("\u7533\u8BF7\u7BA1\u7406")),a.createElement("div",{className:"closeIcon",onClick:function(){d().close()}},a.createElement(T.Z,{icon:"close"}))),"data-seed":"logId"},function(n){n!==-1&&n<e.length&&l.props.dispatch(u({ids:[i],appId:I.appId,status:2,role:e[n],roleId:e[n].roleId}))})},l}return(0,U.default)(s,[{key:"componentDidMount",value:function(){var l=this.props.match.params;this.props.dispatch(h({appId:l.appId})),$("html").addClass("applyCon")}},{key:"componentWillUnmount",value:function(){$("html").removeClass("applyCon"),d().close()}},{key:"render",value:function(){var l=this,i=this.props,p=i.applyData,c=i.isApplyLoading,e=p.applyList,I=p.roleList,v=this.props.match.params;return c?a.createElement(P(),{justify:"center",align:"center",className:"h100"},a.createElement(D(),{size:"large"})):a.createElement(a.Fragment,null,e.length?a.createElement(a.Fragment,null,A().map(e,function(n,L){return a.createElement(a.Fragment,{key:n.id},a.createElement(N(),{size:"xl"}),a.createElement(E().Item,{className:"listApply",key:n.id},a.createElement("div",{className:"flexRow"},a.createElement("span",{className:"Gray Font17 flex"},n.accountInfo.fullName),a.createElement("div",null,a.createElement("span",{className:"InlineBlock toBeBtn rejectBtn",onClick:function(){X(_l("\u62D2\u7EDD"),_l("\u8BF7\u586B\u5199\u62D2\u7EDD\u7684\u539F\u56E0"),[{text:_l("\u53D6\u6D88")},{text:_l("\u786E\u8BA4"),onPress:function(q){l.props.dispatch(u({ids:[n.id],appId:v.appId,status:3,remark:q}))}}])}},_l("\u62D2\u7EDD")),a.createElement("span",{className:"InlineBlock toBeBtn mLeft15",onClick:function(){l.showActionSheet(n.id)}},_l("\u540C\u610F")))),n.remark?a.createElement("div",{className:"Gray_9e Font13 mTop10 applyInfo"},n.remark):null))})):a.createElement("div",{className:"h100"},a.createElement(K.uy,{text:_l("\u6682\u65E0\u7533\u8BF7")})),a.createElement(J.Z,{className:"low",onClick:function(){history.back()}}))}}]),s}(a.Component);const w=(0,O.$j)(function(r){var s=r.mobile,o=s.applyData,l=s.isApplyLoading;return{applyData:o,isApplyLoading:l}})(k)}}]);
