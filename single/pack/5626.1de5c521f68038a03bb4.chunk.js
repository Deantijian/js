"use strict";(self.webpackChunkmingdao_web=self.webpackChunkmingdao_web||[]).push([[5626],{26319:($,y,t)=>{t.d(y,{Z:()=>S});var M=t(20148),A=t(60385),E=t.n(A),x=t(77040),I=t(94301),u=t.n(I),a=t(33867),R=t(39216),H=t(48272),p=t.n(H),T=t(85105),L=t.n(T),Z=t(99663),O=t(22600),j=t(49135),F=t(93196),B=t(88239),P=t(42723),c=t(67294),f=t(21),C=t(5274),U=t(96486),D=t.n(U),h,W=function(d){return function(l){var o=l.getRef,e=(0,P.Z)(l,["getRef"]);return c.createElement(d,(0,B.default)({ref:o},e))}},G=(0,f.Z)(h=W(h=function(b){(0,F.default)(d,b);function d(l){(0,Z.default)(this,d);var o=(0,j.default)(this,(d.__proto__||L()(d)).call(this,l));return o.installApp=function(e,r){if((D().find(md.global.Account.projects,function(s){return s.projectId===e})||{}).cannotCreateApp){p().catch(_l("\u60A8\u6CA1\u6709\u6743\u9650\u5B89\u88C5\u5E94\u7528"),2);return}p().loading(_l("\u6B63\u5728\u6DFB\u52A0"),0),o.props.onCancel();var n=md&&md.global&&md.global.SysSettings&&md.global.SysSettings.templateLibraryTypes==="2"?__api_server__.main:"https://pd.mingdao.com/api/";C.Z.post(n+"AppManagement/GetLibraryToken",{projectId:e,libraryId:r}).then(function(s){var i=s.data.data;if(!i){p().catch(_l("\u5B89\u88C5\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"),2);return}C.Z.post(md.global.Config.AppFileServer+"Library/InstallApp",{fileUrl:i,projectId:e,id:r,accountId:md.global.Account.accountId}).then(function(m){var v=m.data.appId;if(!v){p().catch(_l("\u5B89\u88C5\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"),2);return}p().success(_l("\u6DFB\u52A0\u6210\u529F"),2,function(){o.props.history.push("/mobile/app/"+v+"/true")})},function(m){p().hide(),o.props.onCancel()})})},o}return(0,O.default)(d,[{key:"render",value:function(){var o=this,e=this.props,r=e.onCancel,n=e.visible,s=e.projectId,i=md.global.Account.projects.length;return c.createElement(E(),{popup:!0,visible:n,onClose:r,animationType:"slide-up"},c.createElement(u(),{renderHeader:function(){return c.createElement("div",null,_l("\u5B89\u88C5\u5230"))},style:{maxHeight:390}},md.global.Account.projects.map(function(m,v){return c.createElement(u().Item,{key:m.projectId,thumb:c.createElement(a.Z,{className:"Font20",icon:"chatnetwork-type"+((i-1-v)%6+1)}),onClick:function(){o.installApp(m.projectId,o.props.libraryId)}},m.companyName)})))}}]),d}(c.Component))||h)||h;const S=G},77148:($,y,t)=>{t.r(y),t.d(y,{default:()=>b});var M=t(85105),A=t.n(M),E=t(99663),x=t(22600),I=t(49135),u=t(93196),a=t(67294),R=t(21),H=t(65367),p=t(82627),T=t.n(p),L=t(37888),Z=t(6100),O=t(39216),j=t(48272),F=t.n(j),B=t(88239),P=t(26319),c=t(54208),f=t(96486),C=t(5274),U=t(15577),D,h=md.global.Account.accountId?"/app/lib":"/library",W=(0,R.Z)(D=function(d){(0,u.default)(l,d);function l(o){(0,E.default)(this,l);var e=(0,I.default)(this,(l.__proto__||A()(l)).call(this,o));return e.state={showDialog:!1,data:[]},e.IsPC=function(){for(var r=navigator.userAgent,n=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],s=!0,i=0;i<n.length;i++)if(r.indexOf(n[i])>0){s=!1;break}return s},e.fetch=function(){var r=md&&md.global&&md.global.SysSettings&&md.global.SysSettings.templateLibraryTypes==="2"?__api_server__.main:"https://pd.mingdao.com/api/";C.Z.post(r+"AppManagement/GetAppLibraryDetail",{libraryId:e.props.libraryId}).then(function(n){var s=n.data.data;if(s.length<=0)return window.mobileNavigateTo(md.global.Account.accountId?"/app/lib":"/library");e.setState((0,B.default)({},e.state,{data:s}))})},e.appDone=function(){if(window.isWxWork){var r=md.global.Account.projects;r.length?e.addDialogEl.installApp(r[0].projectId,e.props.libraryId):F().info(_l("\u60A8\u6CA1\u6709\u53EF\u5B89\u88C5\u6A21\u677F\u7684\u7EC4\u7EC7"),3)}else e.setState({showDialog:!0})},e.renderTag=function(r){return a.createElement(a.Fragment,null,(0,f.map)(r,function(n){var s=n.categoryId,i=n.name;return a.createElement("span",{key:"more-"+s,className:"tag Font13 mRight8"},i)}))},e.saveRef=function(r){e.refDom=r},e}return(0,x.default)(l,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.fetch()}},{key:"componentDidUpdate",value:function(e,r){var n=[].concat(["libraryId"]);(0,f.isEqual)((0,f.pick)(this.props,n),(0,f.pick)(e,n))||this.fetch()}},{key:"render",value:function(){var e=this;if(this.state.data.length<=0)return a.createElement("div",{className:"mTop100"},a.createElement(c.Z,null));var r=(0,U.Q9)(),n=this.state.data,s=n.name,i=n.intro,m=n.description,v=n.iconUrl,z=n.iconColor,V=n.cover,J=n.pictures,Q=n.mobilePictures,K=n.categoryInfo;return a.createElement(a.Fragment,null,a.createElement("div",{className:"flex detailsBox pAll20 WhiteBG"},a.createElement("div",{className:"detailsHead"},a.createElement("div",{className:"headLeft"},a.createElement("div",{className:"appIcon Left mRight20",style:{backgroundColor:z}},a.createElement(Z.Z,{url:v,fill:"#fff",size:40,addClassName:"mTop20"})),a.createElement("div",{className:"appTitle Left"},a.createElement("span",{className:"Gray Font34 TxtLeft title Bold WordBreak"},s),a.createElement("br",null),this.renderTag(K)))),a.createElement("div",{className:"details"},a.createElement("div",{className:"Font26 Gray_9e detailsTitle"},i?"\u201C"+i+"\u201D":""),a.createElement("p",{className:"Font16 Gray detailsText"},a.createElement(L.Z,{properties:{target:"_blank"}},m)),a.createElement(T(),{className:"mBottom50",frameOverflow:"visible",cellSpacing:10,slideWidth:.8,afterChange:function(g){return e.setState({slideIndex:g})},dotStyle:{width:24,height:8,borderRadius:24,backgroundColor:"#EAEAEA"},dotActiveStyle:{width:40,borderRadius:24,backgroundColor:"#2196F3"}},(Q.length?Q:J).map(function(N,g){return a.createElement("div",{key:g,style:{display:"block",position:"relative"}},a.createElement("img",{src:N.previewUrl,style:{width:"100%",verticalAlign:"top"},onLoad:function(){window.dispatchEvent(new Event("resize"))}}))}))),a.createElement(P.Z,{getRef:function(g){return e.addDialogEl=g},visible:this.state.showDialog,onCancel:function(){return e.setState({showDialog:!1})},libraryId:this.props.libraryId,projectId:this.props.projectId})),a.createElement("div",{className:"appOperation"},a.createElement("div",{className:"btnForApp Font16 btn",onClick:this.appDone},_l("\u6DFB\u52A0\u6A21\u677F"))))}}]),l}(a.Component))||D;const G=W;var S,b=(0,R.Z)(S=function(d){(0,u.default)(l,d);function l(o){return(0,E.default)(this,l),(0,I.default)(this,(l.__proto__||A()(l)).call(this,o))}return(0,x.default)(l,[{key:"render",value:function(){var e=this.props.match.params;return a.createElement("div",{className:"flexColumn h100"},a.createElement(G,{libraryId:e.libraryId}))}}]),l}(a.Component))||S}}]);
