"use strict";(self.webpackChunkmingdao_web=self.webpackChunkmingdao_web||[]).push([[333],{1808:(G,O,e)=>{var g=e(64836),B=e(18698);Object.defineProperty(O,"__esModule",{value:!0}),O.default=void 0;var L=g(e(10434)),I=g(e(38416)),j=g(e(861)),b=m(e(67294)),$=g(e(93967)),p=g(e(45598)),T=g(e(73757)),D=g(e(32117)),R=g(e(12386)),S=e(31929),r=g(e(72454)),v=e(47419);function y(t){if(typeof WeakMap!="function")return null;var i=new WeakMap,u=new WeakMap;return(y=function(E){return E?u:i})(t)}function m(t,i){if(!i&&t&&t.__esModule)return t;if(t===null||B(t)!=="object"&&typeof t!="function")return{default:t};var u=y(i);if(u&&u.has(t))return u.get(t);var s={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in t)if(C!=="default"&&Object.prototype.hasOwnProperty.call(t,C)){var F=E?Object.getOwnPropertyDescriptor(t,C):null;F&&(F.get||F.set)?Object.defineProperty(s,C,F):s[C]=t[C]}return s.default=t,u&&u.set(t,s),s}var h=function(t,i){var u={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&i.indexOf(s)<0&&(u[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,s=Object.getOwnPropertySymbols(t);E<s.length;E++)i.indexOf(s[E])<0&&Object.prototype.propertyIsEnumerable.call(t,s[E])&&(u[s[E]]=t[s[E]]);return u};function a(t,i){if(!t.breadcrumbName)return null;var u=Object.keys(i).join("|"),s=t.breadcrumbName.replace(new RegExp(":(".concat(u,")"),"g"),function(E,C){return i[C]||E});return s}function c(t,i,u,s){var E=u.indexOf(t)===u.length-1,C=a(t,i);return E?b.createElement("span",null,C):b.createElement("a",{href:"#/".concat(s.join("/"))},C)}var P=function(i,u){return i=(i||"").replace(/^\//,""),Object.keys(u).forEach(function(s){i=i.replace(":".concat(s),u[s])}),i},n=function(i,u,s){var E=(0,j.default)(i),C=P(u||"",s);return C&&E.push(C),E},W=function(i){var u=i.prefixCls,s=i.separator,E=s===void 0?"/":s,C=i.style,F=i.className,Z=i.routes,se=i.children,de=i.itemRender,me=de===void 0?c:de,J=i.params,V=J===void 0?{}:J,Ee=h(i,["prefixCls","separator","style","className","routes","children","itemRender","params"]),ce=b.useContext(S.ConfigContext),te=ce.getPrefixCls,he=ce.direction,ae,ue=te("breadcrumb",u);if(Z&&Z.length>0){var re=[];ae=Z.map(function(w){var f=P(w.path,V);f&&re.push(f);var H;return w.children&&w.children.length&&(H=b.createElement(R.default,null,w.children.map(function(Q){return b.createElement(R.default.Item,{key:Q.path||Q.breadcrumbName},me(Q,V,Z,n(re,Q.path,V)))}))),b.createElement(T.default,{overlay:H,separator:E,key:f||w.breadcrumbName},me(w,V,Z,re))})}else se&&(ae=(0,p.default)(se).map(function(w,f){return w&&((0,r.default)(w.type&&(w.type.__ANT_BREADCRUMB_ITEM===!0||w.type.__ANT_BREADCRUMB_SEPARATOR===!0),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),(0,v.cloneElement)(w,{separator:E,key:f}))}));var pe=(0,$.default)(ue,(0,I.default)({},"".concat(ue,"-rtl"),he==="rtl"),F);return b.createElement("div",(0,L.default)({className:pe,style:C},Ee),ae)};W.Item=T.default,W.Separator=D.default;var K=W;O.default=K},73757:(G,O,e)=>{var g=e(64836),B=e(18698);Object.defineProperty(O,"__esModule",{value:!0}),O.default=void 0;var L=g(e(10434)),I=T(e(67294)),j=g(e(5085)),b=g(e(48301)),$=e(31929);function p(r){if(typeof WeakMap!="function")return null;var v=new WeakMap,y=new WeakMap;return(p=function(h){return h?y:v})(r)}function T(r,v){if(!v&&r&&r.__esModule)return r;if(r===null||B(r)!=="object"&&typeof r!="function")return{default:r};var y=p(v);if(y&&y.has(r))return y.get(r);var m={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in r)if(a!=="default"&&Object.prototype.hasOwnProperty.call(r,a)){var c=h?Object.getOwnPropertyDescriptor(r,a):null;c&&(c.get||c.set)?Object.defineProperty(m,a,c):m[a]=r[a]}return m.default=r,y&&y.set(r,m),m}var D=function(r,v){var y={};for(var m in r)Object.prototype.hasOwnProperty.call(r,m)&&v.indexOf(m)<0&&(y[m]=r[m]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,m=Object.getOwnPropertySymbols(r);h<m.length;h++)v.indexOf(m[h])<0&&Object.prototype.propertyIsEnumerable.call(r,m[h])&&(y[m[h]]=r[m[h]]);return y},R=function(v){var y=v.prefixCls,m=v.separator,h=m===void 0?"/":m,a=v.children,c=v.overlay,P=v.dropdownProps,n=D(v,["prefixCls","separator","children","overlay","dropdownProps"]),W=I.useContext($.ConfigContext),K=W.getPrefixCls,t=K("breadcrumb",y),i=function(E){return c?I.createElement(b.default,(0,L.default)({overlay:c,placement:"bottom"},P),I.createElement("span",{className:"".concat(t,"-overlay-link")},E,I.createElement(j.default,null))):E},u;return"href"in n?u=I.createElement("a",(0,L.default)({className:"".concat(t,"-link")},n),a):u=I.createElement("span",(0,L.default)({className:"".concat(t,"-link")},n),a),u=i(u),a?I.createElement("span",null,u,h&&I.createElement("span",{className:"".concat(t,"-separator")},h)):null};R.__ANT_BREADCRUMB_ITEM=!0;var S=R;O.default=S},32117:(G,O,e)=>{var g=e(18698);Object.defineProperty(O,"__esModule",{value:!0}),O.default=void 0;var B=j(e(67294)),L=e(31929);function I(p){if(typeof WeakMap!="function")return null;var T=new WeakMap,D=new WeakMap;return(I=function(S){return S?D:T})(p)}function j(p,T){if(!T&&p&&p.__esModule)return p;if(p===null||g(p)!=="object"&&typeof p!="function")return{default:p};var D=I(T);if(D&&D.has(p))return D.get(p);var R={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in p)if(r!=="default"&&Object.prototype.hasOwnProperty.call(p,r)){var v=S?Object.getOwnPropertyDescriptor(p,r):null;v&&(v.get||v.set)?Object.defineProperty(R,r,v):R[r]=p[r]}return R.default=p,D&&D.set(p,R),R}var b=function(T){var D=T.children,R=B.useContext(L.ConfigContext),S=R.getPrefixCls,r=S("breadcrumb");return B.createElement("span",{className:"".concat(r,"-separator")},D||"/")};b.__ANT_BREADCRUMB_SEPARATOR=!0;var $=b;O.default=$},68672:(G,O,e)=>{var g,B=e(64836);g={value:!0},O.Z=void 0;var L=B(e(1808)),I=L.default;O.Z=I},20956:(G,O,e)=>{e(17847),e(57853),e(60954),e(59768)},57853:(G,O,e)=>{e.r(O)},40055:()=>{},53566:(G,O,e)=>{e.r(O),e.d(O,{default:()=>je});var g=e(93567),B=e(66814),L=e.n(B),I=e(91880),j=e.n(I),b=e(48388),$=e.n(b),p=e(29914),T=e.n(p),D=e(88239),R=e(51097),S=e.n(R),r=e(64540),v=e(88106),y=e(85105),m=e.n(y),h=e(99663),a=e(22600),c=e(49135),P=e(93196),n=e(67294),W=e(49611),K=e.n(W),t=e(21),i=e(22010),u=e(50533),s=e(83848),E=e(15308),C=e(75915),F=e(28968),Z=e(3538),se=e(25019),de=e(70039),me=e(40055),J=e(31742),V=e(76345),Ee=e(15577),ce=e(93967),te=e.n(ce),he=e(50043),ae=e(68705),ue=e(97243),re=e.n(ue),pe=e(55848),w=e(96486),f=e.n(w),H,Q=(0,t.Z)(H=(0,F.Z)(H=function(q){(0,P.default)(ee,q);function ee(Y){(0,h.default)(this,ee);var l=(0,c.default)(this,(ee.__proto__||m()(ee)).call(this,Y));return l.sheetViewOpenRecord=function(o,A){l.setState({previewRecordId:o,tempViewIdForRecordInfo:A})},l.setCache=function(o){var A=o.worksheetId,M=o.viewId;safeLocalStorageSetItem("mobileViewSheet-"+A,M)},l.handleChangeView=function(o){var A=l.props,M=A.match,U=A.now,z=M.params;l.props.updateBase({viewId:o.viewId}),U?f().includes([0,6],o.viewType)&&l.props.resetSheetView():window.mobileNavigateTo("/mobile/recordList/"+z.appId+"/"+z.groupId+"/"+z.worksheetId+"/"+o.viewId,!0)},l.state={previewRecordId:void 0,tempViewIdForRecordInfo:void 0},l}return(0,a.default)(ee,[{key:"componentDidMount",value:function(){var l=this.props.match||{},o=l.params;this.props.changeMobileGroupFilters([]),this.getApp(this.props),f().get(this.props,["filters","visible"])&&this.props.updateFilters({visible:!1})}},{key:"getApp",value:function(l){var o=l.match.params;l.updateBase({appId:o.appId,groupId:o.groupId,worksheetId:o.worksheetId,viewId:o.viewId}),l.loadWorksheet()}},{key:"componentWillReceiveProps",value:function(l){var o=l.match.params,A=this.props.match.params,M=(f().find(l.worksheetInfo.views,function(U){return U.viewId===o.viewId})||{}).viewType;o.viewId!==A.viewId&&(this.props.updateBase({viewId:o.viewId}),f().includes([0,6],M)&&this.props.resetSheetView()),o.worksheetId!==A.worksheetId&&(this.props.emptySheetRows(),this.props.emptySheetControls(),this.getApp(l))}},{key:"componentWillUnmount",value:function(){this.props.emptySheetControls()}},{key:"renderContent",value:function(){var l=this,o=this.props,A=o.base,M=o.worksheetInfo,U=o.sheetSwitchPermit,z=o.workSheetLoading,Me=o.match,ne=o.currentSheetRows,be=o.filters,Pe=o.worksheetControls,fe=o.calendarview,ve=o.batchOptVisible,$e=o.appColor,Fe=o.history,Ve=o.appDetail,Ge=o.debugRoles,_e=A.viewId,Te=Ve.detail,X=Te.appNaviStyle,Ze=Te.debugRole,He=M.name,we=M.advancedSetting,at=we===void 0?{}:we,oe=M.views.filter(function(N){return f().get(N,"advancedSetting.showhide")!=="hide"&&f().get(N,"advancedSetting.showhide")!=="spc&happ"}),d=f().find(oe,{viewId:_e})||!_e&&oe[0]||{},ie=Me.params,Ae=_e?f().findIndex(oe,{viewId:_e}):0,Be=fe.calendarData,Ye=Be===void 0?{}:Be,Oe=(0,Ee.aq)(d),Le=Oe.begindate,ze=Le===void 0?"":Le,We=Oe.enddate,Xe=We===void 0?"":We,Se=Oe.calendarcids,k=Se===void 0?"[]":Se,Ue=Ye.calendarInfo,ge=Ue===void 0?[]:Ue,Ie=d.viewControl,ke=d.viewControls;try{k=JSON.parse(k)}catch(N){k=[]}k.length<=0&&(k=[{begin:ze,end:Xe}]);var Je=k[0].begin&&ge.length>0&&(!ge[0].startData||!ge[0].startData.controlId),Qe=f().includes([1,2,4,5,7],d.viewType)?Ie==="create"||Ie&&f().find(Pe,function(N){return N.controlId===Ie})||!f().isEmpty(ke)||!(!k[0].begin||Je):!0,qe=Fe.location.hash,De=qe.includes("hideTabBar")||!!sessionStorage.getItem("hideTabBar"),Ne=(0,J.v)(V.RX.delete,U,d.viewId),xe=(0,J.v)(V.RX.execute,U,d.viewId);if(f().isEmpty(oe))return n.createElement("div",{className:"flexColumn h100 justifyContentCenter alignItemsCenter Font16 Gray_9e"},n.createElement("img",{style:{width:70},src:re()}),_l("\u89C6\u56FE\u5DF2\u9690\u85CF"));var le=(Ze||{}).canDebug&&!f().isEmpty(Ge),ye=le?"60px":"20px",Re=le?"110px":"70px",et=le?"118px":"78px",tt=le?"170px":"130px",Ke=d.viewType===6&&d.childType===1?(0,v.default)({paddingBottom:"calc(constant(safe-area-inset-bottom) - 20px)"},"paddingBottom","calc(env(safe-area-inset-bottom) - 20px)"):{};return n.createElement(n.Fragment,null,n.createElement("div",{className:te()("flexColumn h100",{portalWrapHeight:md.global.Account.isPortal&&X===2})},n.createElement(K(),{title:He}),!ve&&n.createElement("div",{className:te()("viewTabs z-depth-1",{isPortal:md.global.Account.isPortal})},n.createElement(r.default,{tabBarInactiveTextColor:"#757575",tabs:oe,page:Ae===-1?999:Ae,onTabClick:function(x){l.setCache({viewId:x.viewId,worksheetId:ie.worksheetId}),l.handleChangeView(x),l.props.changeMobileGroupFilters([]),safeLocalStorageSetItem("mobileViewSheet-"+x.viewId,x.viewType)},renderTab:function(x){return n.createElement("span",{className:"tabName ellipsis bold"},x.name)}})),n.createElement(se.Z,{view:d,key:M.worksheetId,routerParams:ie,appNaviStyle:X,hasDebugRoles:le}),!ve&&!(X===2&&location.href.includes("mobile/app")&&md.global.Account.isPortal)&&n.createElement(C.Z,{icon:X===2&&location.href.includes("mobile/app")?"home":"back",style:!De&&X===2&&location.href.includes("mobile/app")?(0,D.default)({bottom:d.childType===1&&d.viewType===6?140:f().includes([1,3,4,6,21,8],d.viewType)||!f().isEmpty(d.navGroup)&&d.navGroup.length?Re:tt},Ke):(0,D.default)({bottom:d.childType===1&&d.viewType===6?100:[1,3,4,6,21,8].includes(d.viewType)||!f().isEmpty(d.navGroup)&&d.navGroup.length&&f().includes([0],d.viewType)||!(Ne||xe)?ye:et},Ke),onClick:function(){if(!De&&location.href.includes("mobile/app")){var x=localStorage.getItem("currentGroupInfo")&&JSON.parse(localStorage.getItem("currentGroupInfo"));f().isEmpty(x)?window.mobileNavigateTo("/mobile/dashboard"):window.mobileNavigateTo("/mobile/groupAppList/"+x.id+"/"+x.groupType),localStorage.removeItem("currentNavWorksheetId")}else window.mobileNavigateTo("/mobile/app/"+ie.appId)}}),(Ne||xe)&&d.viewType===0&&!ve&&f().isEmpty(d.navGroup)&&n.createElement(pe.R,{style:{bottom:X===2&&location.href.includes("mobile/app")?Re:ye},onClick:function(){return l.props.changeBatchOptVisible(!0)}}),(0,J.v)(V.RX.createButtonSwitch,U)&&M.allowAdd&&Qe&&!ve&&(d.viewType===6&&d.childType!==1||d.viewType!==6)?n.createElement(pe.T,{entityName:M.entityName,backgroundColor:$e,warpStyle:{bottom:!De&&X===2?Re:ye},btnClassName:te()({Right:[2,5,7].includes(d.viewType)&&ne.length||[2].includes(d.viewType),mRight16:[2,5,7].includes(d.viewType)&&ne.length||[2].includes(d.viewType)}),onClick:function(){(0,ae.openAddRecord)({className:"full",worksheetInfo:M,appId:ie.appId,worksheetId:M.worksheetId,viewId:d.viewId,addType:2,entityName:M.entityName,openRecord:l.sheetViewOpenRecord,onAdd:function(Ce){f().isEmpty(Ce)||(d.viewType?l.props.addNewRecord(Ce,d):l.props.unshiftSheetRow(Ce))},showDraftsEntry:!0,sheetSwitchPermit:U})}}):null),n.createElement(de.RecordInfoModal,{className:"full",visible:!!this.state.previewRecordId,appId:ie.appId,worksheetId:M.worksheetId,viewId:this.state.tempViewIdForRecordInfo,rowId:this.state.previewRecordId,onClose:function(){l.setState({previewRecordId:void 0,tempViewIdForRecordInfo:void 0})}}))}},{key:"render",value:function(){var l=this.props,o=l.base,A=l.worksheetInfo,M=l.workSheetLoading,U=l.appDetail,z=U===void 0?{}:U,Me=o.viewId,ne=z.detail,be=ne===void 0?{}:ne,Pe=z.appName,fe=be.webMobileDisplay;return fe?n.createElement("div",{style:{background:"#fff",height:"100%"}},n.createElement("div",{className:"flex WordBreak overflow_ellipsis pLeft20 pRight20 Height80"},n.createElement("span",{className:"Gray Font24 LineHeight80 InlineBlock Bold"},Pe)),n.createElement(he.Z,{isNoPublish:fe})):M?n.createElement(j(),{justify:"center",align:"center",className:"h100"},n.createElement(T(),{size:"large"})):A.resultCode!==1?n.createElement(Z.Z,{type:"sheet"}):n.createElement(g.Z,{projectId:A.projectId},this.renderContent())}}]),ee}(n.Component))||H)||H;const je=(0,u.$j)(function(q){return(0,D.default)({},f().pick(q.mobile,"base","worksheetInfo","sheetSwitchPermit","currentSheetRows","workSheetLoading","filters","worksheetControls","appColor","batchOptVisible","isCharge","appDetail","debugRoles"),{calendarview:q.sheet.calendarview})},function(q){return(0,i.DE)((0,D.default)({},f().pick(s,["updateBase","loadWorksheet","unshiftSheetRow","resetSheetView","emptySheetControls","emptySheetRows","updateFilters","changeMobileGroupFilters","changeBatchOptVisible"]),{addNewRecord:E.addNewRecord}),q)})(Q)},60876:(G,O,e)=>{e.d(O,{$B:()=>y,s3:()=>R,tg:()=>v});var g=e(349),B=e.n(g),L=e(85105),I=e.n(L),j=e(72444),b=e(88239),$=e(88902),p=e.n($),T=e(96486),D=e.n(T),R=function(a){return D().get(a,["match","params"])},S=function(a){return _.flatten(_Object$keys(a).map(function(c){var P=a[c];return _.includes(["validProject"],c)?P.map(function(n){return _extends({type:c},n)}):_.includes(["aloneApps"],c)?{type:c,projectApps:P}:P.length?{type:c,projectApps:P}:null})).filter(function(c){return!!c})},r=function(a){if((typeof a>"u"?"undefined":(0,j.default)(a))!=="object"||a===null)return!1;for(var c=a;I()(c)!==null;)c=I()(c);return I()(a)===c},v=function h(){for(var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p()(a),n=0;n<P.length;n++){var W=P[n],K=a[W],t=c[W];if(r(K)&&r(t))return h(K,t,p()(K));if(!B()(K,t))return!0}return!1},y=function(a){var c=a.isGoodsStatus,P=a.isNew,n=a.fixed,W=a.isUpgrade;return c?W?_l("\u5347\u7EA7\u4E2D"):n?_l("\u7EF4\u62A4\u4E2D%01018"):P?_l("\u65B0 !"):null:_l("\u8FC7\u671F")},m=function(a,c){switch(c){case APP_ROLE_TYPE.POSSESS_ROLE:break;case APP_ROLE_TYPE.ADMIN_ROLE:a=_.filter(a,function(P){return!_.includes(["del"],P.type)});break;case APP_ROLE_TYPE.RUNNER_ROLE:a=_.filter(a,function(P){return _.includes(["modify","editIntro","appAnalytics","appLogs","modifyAppLockPassword"],P.type)});break;case APP_ROLE_TYPE.DEVELOPERS_ROLE:a=_.filter(a,function(P){return!_.includes(["copy","export","appAnalytics","appLogs","del"],P.type)});break;case APP_ROLE_TYPE.RUNNER_DEVELOPERS_ROLE:a=_.filter(a,function(P){return!_.includes(["copy","export","del"],P.type)});break;default:break}return a}}}]);
