"use strict";(self.webpackChunkmingdao_web=self.webpackChunkmingdao_web||[]).push([[9564],{79564:(M,v,e)=>{e.r(v),e.d(v,{default:()=>T});var w=e(85105),f=e.n(w),u=e(99663),g=e(22600),k=e(49135),P=e(93196),r=e(67294),R=e(12855),S=e(54208),y=e(91088),L=e(45231),c=e(36021),W=e(82011),C=e(45454),A=e(96841),D=e(70973),E=function(h){(0,P.default)(s,h);function s(n){(0,u.default)(this,s);var a=(0,k.default)(this,(s.__proto__||f()(s)).call(this,n)),o=a.props.match,t=o.params.appId;return a.state={loading:!t,worksheetId:o.params.worksheetId,rowId:o.params.rowId,appId:md.global.Account.isPortal?md.global.Account.appId:t,viewId:o.params.viewId,sheetSwitchPermit:[],loadingSwitchPermit:!0},a}return(0,g.default)(s,[{key:"componentDidMount",value:function(){var a=this,o=this.state,t=o.loading,p=o.appId,i=o.worksheetId,l=o.rowId;L.Z.getSwitchPermit({appId:p,worksheetId:i}).then(function(I){a.setState({loadingSwitchPermit:!1,sheetSwitchPermit:I},function(){t&&!p&&a.navigate(i,l)})})}},{key:"componentWillReceiveProps",value:function(a){var o=this.props.match.params,t=a.match.params;!t.appId&&t.rowId!==o.rowId?(this.setState({loading:!0}),this.navigate(t.worksheetId,t.rowId)):t.appId&&t.rowId!==o.rowId&&this.setState({appId:t.appId,worksheetId:t.worksheetId,viewId:t.viewId,rowId:t.rowId})}},{key:"navigate",value:function(a,o){y.Z.getAppSimpleInfo({workSheetId:a}).then(function(t){t.appId&&(0,c.T8)("/app/"+t.appId+"/"+a+"/row/"+o,!0)})}},{key:"render",value:function(){var a=this.state,o=a.loading,t=a.worksheetId,p=a.rowId,i=a.appId,l=a.viewId,I=a.loadingSwitchPermit,d=this.props.appPkg,Z=d.fixed,j=d.permissionType,m=d.pcDisplay,N=d.projectId,x=(0,D.le)(j);return r.createElement("div",{className:"worksheetRowLand"},o||I||_.isEmpty(d)?r.createElement("div",{className:"workSheetRecordInfo"},r.createElement(S.Z,{className:"mTop32"})):(Z||m)&&!x?r.createElement(C.Z,{showLeftSkeleton:!1,appPkg:d,isNoPublish:m}):r.createElement(W.Z,{isWorksheetRowLand:!0,sheetSwitchPermit:this.state.sheetSwitchPermit,notDialog:!0,from:2,appId:i,worksheetId:t,projectId:N,viewId:l,recordId:p,hideRecordInfo:function(){return(0,c.T8)(t?"/worksheet/"+t:"/app/"+i)}}))}}]),s}(r.Component);const T=(0,R.Z)((0,A.$j)(function(h){return{appPkg:h.appPkg}})(E))}}]);
