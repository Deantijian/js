"use strict";(self.webpackChunkmingdao_web=self.webpackChunkmingdao_web||[]).push([[4926],{24926:(me,w,d)=>{d.r(w),d.d(w,{default:()=>de});var pe=d(10524),Y=d(31059),j=d(33867),X=d(54208),K=d(66215),H=d(88106),N=d(88239),F=d(12424),V=d(46593),O=d.n(V),$=d(85105),R=d.n($),G=d(99663),A=d(22600),b=d(49135),_=d(93196),e=d(67294),z=d(21),v=d(64712),J=d(93967),y=d.n(J),f=d(48025),x=d(99924),Q=d(14338),q=d(30381),g=d.n(q),ee=function(i){return[{text:e.createElement(e.Fragment,null,e.createElement("span",{className:"Bold Font14 mRight6"},_l("\u7EED\u8D39")),e.createElement("span",{className:"Gray_9e"},_l("\u5F53\u524D\u4F7F\u7528\uFF1A%0\u4EBA",i))),value:"portalupgrade"},{text:e.createElement("span",{className:"Bold Font14"},_l("\u589E\u8865")),value:"portaluser"}]},D=[{value:100,label:e.createElement(e.Fragment,null,e.createElement("div",{className:"Gray Font13"},_l("100\u4EBA")),e.createElement("div",{className:"Gray_75 Font12"},_l("5\u5143/\u4EBA\u5E74")))},{value:1e3,label:e.createElement(e.Fragment,null,e.createElement("div",{className:"Gray Font13 "},_l("1000\u4EBA")),e.createElement("div",{className:"Gray_75 Font12"},_l("1\u5143/\u4EBA\u5E74")))},{value:1e4,label:e.createElement(e.Fragment,null,e.createElement("div",{className:"Gray Font13"},_l("10000\u4EBA")),e.createElement("div",{className:"Gray_75 Font12"},_l("0.5\u5143/\u4EBA\u5E74")))},{value:1e5,label:e.createElement("div",{className:"Gray Font13"},_l("10\u4E07\u4EBA"))}],te=function(i){if(i<=135)return{itemWidth:15,stepCount:100,baseLeft:0};if(i>135&&i<=315)return{itemWidth:20,stepCount:1e3,baseLeft:135};if(i>315)return{itemWidth:40,stepCount:1e4,baseLeft:315}},M=function(i){if(!(i<0||i>675)){var o=te(i),t=o.itemWidth,n=o.stepCount,a=o.baseLeft,r=i<15?1:Math.round((i-a)/t)+1;return{userCount:r*n,left:(r-1)*t+a}}},ae=function(i){var o=0;return i>0&&i<=1e3?o=(i/100-1)*15:i>1e3&&i<=1e4?o=135+(i-1e3)/1e3*20:i>1e4&&(o=315+(i-1e4)/1e4*40),o},ne=function(P){(0,_.default)(i,P);function i(o){(0,G.default)(this,i);var t=(0,b.default)(this,(i.__proto__||R()(i)).call(this,o));return t.onMouseDown=function(n){t.setState({status:!0,initX:n.clientX-n.target.offsetLeft}),document.body.addEventListener("mousemove",t.onMouseMove),document.body.addEventListener("mouseup",t.onMouseUp)},t.onMouseMove=function(n){var a=t.state,r=a.status,c=a.initX,s=a.minX;if(r){var u=n.clientX-c;if(u<0||u>675||t.props.payType==="portalupgrade"&&u<s)return;var m=M(u),E=m.userCount,h=m.left;t.setState({moveX:h,userCount:E})}},t.onMouseUp=function(){t.setState({status:!1},function(){t.state.userCount!==t.props.addUserCount&&t.props.handleChange("addUserCount",t.state.userCount)}),document.body.removeEventListener("mousemove",t.onMouseMove),document.body.removeEventListener("mouseup",t.onMouseUp)},t.handleClick=function(n){n.stopPropagation();var a=document.getElementById("portal-ant-slider-step"),r=n.clientX-a.getBoundingClientRect().left;if(!(t.props.payType==="portalupgrade"&&r<t.state.minX)){var c=M(r)||{},s=c.userCount,u=c.left;t.setState({moveX:u,userCount:s},function(){t.props.handleChange("addUserCount",t.state.userCount)})}},t.state={userCount:100,status:!1,initX:0,moveX:0,minX:0},t}return(0,A.default)(i,[{key:"componentWillUnmount",value:function(){document.body.removeEventListener("mousemove",this.onMouseMove),document.body.removeEventListener("mouseup",this.onMouseUp)}},{key:"componentDidMount",value:function(){var t=this.props.payType==="portalupgrade"?ae(this.props.addUserCount):0;this.setState({userCount:this.props.addUserCount,moveX:t,minX:t})}},{key:"render",value:function(){var t=this.props,n=t.payType,a=t.effectiveExternalUserCount,r=t.licenseInfo,c=r===void 0?{}:r,s=t.handleChange,u=this.state,m=u.userCount,E=u.moveX,h=ee(a),C=v.Z.params[3];return e.createElement(e.Fragment,null,e.createElement("div",{className:"portalProgressContainer"},C==="portalupgrade"&&e.createElement("div",{className:"flexRow payType"},_l("\u8D2D\u4E70\u65B9\u5F0F"),h.map(function(p){return e.createElement(Q.Z,{className:"mLeft32",text:p.text,checked:n===p.value,onClick:function(){return s("payType",p.value)}})})),e.createElement("div",{className:"portal-ant-slider",onMouseUp:this.onMouseUp},e.createElement("div",{className:"portal-ant-slider-bg",style:{width:E+"px"}}),e.createElement("div",{className:"portal-ant-slider-step",id:"portal-ant-slider-step",onClick:this.handleClick},D.map(function(p){return e.createElement("span",{className:y()("portal-ant-slider-dot",{active:m>=p.value})})})),e.createElement("div",{className:"portal-ant-slider-handle tip-top",style:{left:E+"px"},"data-tip":_l("%0\u4EBA",m),onMouseDown:this.onMouseDown}),e.createElement("div",{className:"portal-ant-slider-mark"},D.map(function(p){return e.createElement("span",{className:y()("portal-ant-slider-mark-text",{InlineBlock:p.value<=m})},p.label)})))),e.createElement("div",{className:"mBottom16"},e.createElement("span",{className:"Gray_9e mRight18"},_l("\u8D2D\u4E70\u4EBA\u6570\uFF1A")),e.createElement("span",null,_l("%0\u4EBA",m))),e.createElement("div",{className:"mBottom16"},e.createElement("span",{className:"Gray_9e mRight18"},_l("\u5230\u671F\u65F6\u95F4\uFF1A")),e.createElement("span",null,g()(c.endDate).format("YYYY\u5E74MM\u6708DD\u65E5")),e.createElement("span",{className:"Gray_9e"},_l("\uFF08\u8BA1\u8D39\uFF1A%0\u5929\uFF09",c.expireDays))))}}]),i}(e.Component),k=d(28829),re=d(96486),T=d.n(re),B,l={USER:"user",WORKFLOW:"workflow",STORAGE:"storage",PORTALUSER:"portaluser",PORTALUPGRADE:"portalupgrade",DATASYNC:"dataSync",COMPUTING:"computing",RENEWCOMPUTING:"renewcomputing",AGGREGATIONTABLE:"aggregationtable"},le={user:_l("\u7528\u6237\u81EA\u52A9\u8D2D\u4E70\u7528\u6237\u5305"),workflow:_l("\u7528\u6237\u81EA\u52A9\u8D2D\u4E70\u5DE5\u4F5C\u6D41"),storage:_l("\u7528\u6237\u81EA\u52A9\u8D2D\u4E70\u5E94\u7528\u9644\u4EF6\u4E0A\u4F20\u91CF"),portaluser:_l("\u7528\u6237\u81EA\u52A9\u8D2D\u4E70\u5916\u90E8\u95E8\u6237\u7528\u6237\u5305"),portalupgrade:_l("\u7528\u6237\u81EA\u52A9\u8D2D\u4E70\u5916\u90E8\u95E8\u6237\u7528\u6237\u5305"),dataSync:_l("\u7528\u6237\u81EA\u52A9\u8D2D\u4E70\u6570\u636E\u540C\u6B65\u7B97\u529B\u5347\u7EA7\u5305"),computing:md.global.Config.IsLocal&&!md.global.Config.IsPlatformLocal?_l("\u521B\u5EFA\u4E13\u5C5E\u7B97\u529B"):_l("\u8D2D\u4E70\u4E13\u5C5E\u7B97\u529B"),renewcomputing:_l("\u7EED\u8D39\u4E13\u5C5E\u7B97\u529B"),aggregationtable:_l("\u6269\u5145\u805A\u5408\u8868\u6570\u91CF")},se={user:_l("\u6269\u5145\u6210\u5458\u6570\u91CF"),workflow:_l("\u8D2D\u4E70\u5DE5\u4F5C\u6D41\u6267\u884C\u6570\u5347\u7EA7\u5305"),storage:_l("\u8D2D\u4E70\u5E94\u7528\u9644\u4EF6\u4E0A\u4F20\u91CF\u6269\u5145\u5305"),portaluser:_l("\u8D2D\u4E70\u5916\u90E8\u7528\u6237\u4EBA\u6570"),portalupgrade:_l("\u8D2D\u4E70\u5916\u90E8\u7528\u6237\u4EBA\u6570"),dataSync:_l("\u8D2D\u4E70\u6570\u636E\u540C\u6B65\u7B97\u529B\u5347\u7EA7\u5305"),computing:md.global.Config.IsLocal&&!md.global.Config.IsPlatformLocal?_l("\u521B\u5EFA\u4E13\u5C5E\u7B97\u529B"):_l("\u8D2D\u4E70\u4E13\u5C5E\u7B97\u529B"),renewcomputing:_l("\u7EED\u8D39\u4E13\u5C5E\u7B97\u529B"),aggregationtable:_l("\u6269\u5145\u805A\u5408\u8868\u6570\u91CF")},oe={user:_l("\u6269\u5145\u6210\u5458\u6570\u91CF"),workflow:_l("\u9009\u62E9\u5347\u7EA7\u5305"),storage:_l("\u9009\u62E9\u7C7B\u578B"),portaluser:_l("\u9009\u62E9\u589E\u8865\u4EBA\u6570"),portalupgrade:_l("\u9009\u62E9\u8D2D\u4E70\u4EBA\u6570\u548C\u65B9\u5F0F"),dataSync:_l("\u9009\u62E9\u7C7B\u578B"),computing:_l("\u9009\u62E9\u89C4\u683C"),renewcomputing:_l("\u786E\u8BA4\u7EED\u8D39\u4FE1\u606F"),aggregationtable:_l("\u6269\u5145\u805A\u5408\u8868\u6570\u91CF")},W={user:f.Z.getPersonOrderPrice,workflow:f.Z.getWorkflowOrderPrice,dataSync:f.Z.getDataPipelineOrderPrice,workflowMonthly:f.Z.getMonthlyWorkflowOrderPrice,storage:f.Z.getApkStorageOrderPrice,portaluser:f.Z.getExternalUserOrderPrice,portalupgrade:f.Z.getExternalUserExtensionOrderPrice,dataSyncMonthly:f.Z.getMonthlyDataPipelineOrderPrice,computing:f.Z.getComputingInstanceOrderPrice,computingMonthly:f.Z.getMonthlyComputingInstanceOrderPrice,renewcomputing:f.Z.getComputingInstanceExtensionOrderPrice,aggregationtable:f.Z.getAggregationTableOrderPrice},Z={user:f.Z.addPersonOrder,workflow:f.Z.addWorkflowOrder,dataSync:f.Z.addDataPipelineOrder,workflowMonthly:f.Z.addMonthlyWorkflowOrder,storage:f.Z.addApkStorageOrder,portaluser:f.Z.addExternalUserOrder,portalupgrade:f.Z.addExternalUserExtensionOrder,dataSyncMonthly:f.Z.addMonthlyDataPipelineOrder,computing:f.Z.addComputingInstanceOrder,computingMonthly:f.Z.addMonthlyComputingInstanceOrder,renewcomputing:f.Z.addComputingInstanceExtensionOrder,aggregationtable:f.Z.addAggregationTableOrder},ce=[{title:_l("\u6BCF\u6708\u989D\u5EA6\u5347\u7EA7\u5305"),money:50,count:1,month:_l("\u5269\u4F59\u6708\u4EFD"),key:1},{title:_l("\u5355\u6708\u5305"),money:100,count:1,month:_l("\u672C\u6708"),key:2}],ie=[{title:_l("\u6BCF\u6708\u989D\u5EA6\u5347\u7EA7\u5305"),money:50,count:10,month:_l("\u5269\u4F59\u6708\u4EFD"),key:1},{title:_l("\u5355\u6708\u5305"),money:100,count:10,month:_l("\u672C\u6708"),key:2}],S=md.global.Config.IsLocal&&!md.global.Config.IsPlatformLocal?[{title:_l("\u7EC4\u7EC7\u5230\u671F\u65F6\u95F4"),key:1}]:[{title:_l("\u7EC4\u7EC7\u5230\u671F\u65F6\u95F4"),key:1},{title:_l("\u5355\u6708\u5305\uFF08\u672C\u6708\uFF09"),key:0}],ue=function(i){var o=i%100||100;return o>0&&(i<1e3?o=(parseInt(i/100)+1)*100:i>1e4?o=(parseInt(i/1e4)+1)*1e4:o=(parseInt(i/1e3)+1)*1e3),o},de=(0,z.Z)(B=function(P){(0,_.default)(i,P);function i(){(0,G.default)(this,i);var o=(0,b.default)(this,(i.__proto__||R()(i)).call(this));return o.expandType=v.Z.params[3],o.isPortalUser=T().includes([l.PORTALUSER,l.PORTALUPGRADE],o.expandType),o.state={step:1,addUserCount:5,addUserStep:5,maxUserCount:500,limitNumber:0,totalPrince:0,needSalesAssistance:!0,totalNum:0,isPay:!1,workflowType:1,dataSyncType:1,balance:0,showWorkflowExtPack:!1,autoPurchaseWorkflowExtPack:!1,effectiveExternalUserCount:0,licenseInfo:{},payType:o.expandType,loading:!0,specsList:[],exclusiveInfo:{specs:"1",type:1,currentLicense:{}},renewexclusiveInfo:{name:"",resourceId:"",orderId:"",productId:"",concurrency:"",core:"",memory:"",currentLicense:{}}},o}return(0,A.default)(i,[{key:"componentDidMount",value:function(){var t=this,n=T().get(v.Z.project||{},"licenseType"),a=this.expandType;a===l.WORKFLOW?x.Z.getAutoPurchaseWorkflowExtPack({projectId:v.Z.projectId}).then(function(r){t.setState({addUserCount:1e4,addUserStep:1e4,maxUserCount:5e6,balance:r.balance,showWorkflowExtPack:!T().includes([0,2],n)&&!r.autoPurchaseWorkflowExtPack&&!md.global.Config.IsLocal,autoPurchaseWorkflowExtPack:r.autoPurchaseWorkflowExtPack,loading:!1},function(){return t.computePrince()})}):a===l.DATASYNC?x.Z.getAutoPurchaseDataPipelineExtPack({projectId:v.Z.projectId}).then(function(r){t.setState({addUserCount:1e5,addUserStep:1e5,maxUserCount:1e6,balance:r.balance,showDataSyncExtPack:!T().includes([0,2],n)&&!r.autoPurchaseDataPipelineExtPack&&!md.global.Config.IsLocal,autoPurchaseDataPipelineExtPack:r.autoPurchaseDataPipelineExtPack,loading:!1},function(){return t.computePrince()})}):a===l.USER?v.Z.AdminController.expansionInfos({projectId:v.Z.projectId}).then(function(r){var c=parseInt(a===l.USER?r.userLimitNumber:a===l.APP?r.apkLimitNumber:r.workflowLimitNumber*1e3,10)||0;t.setState({addUserCount:5,addUserStep:5,maxUserCount:500,limitNumber:c,loading:!1},function(){return t.computePrince()})}):a===l.COMPUTING?O().all([k.Z.getProjectLicenseSupportInfo({projectId:v.Z.projectId,onlyNormal:!0}),f.Z.getProjectComputingInstances({projectId:v.Z.projectId})]).then(function(r){var c=(0,F.Z)(r,2),s=c[0],u=c[1];t.setState({addUserCount:1,addUserStep:1,maxUserCount:1,loading:!1,specsList:u,exclusiveInfo:(0,N.default)({},t.state.exclusiveInfo,{specs:(u.find(function(m){return m.isDefault})||u[0]||{}).id,currentLicense:(0,N.default)({},s.currentLicense)})},function(){return t.computePrince()})}):a===l.RENEWCOMPUTING?O().all([k.Z.getProjectLicenseSupportInfo({projectId:v.Z.projectId,onlyNormal:!0}),k.Z.getComputingInstanceDetail({projectId:v.Z.projectId,id:v.Z.params[v.Z.params.length-1]})]).then(function(r){var c=(0,F.Z)(r,2),s=c[0],u=c[1];t.setState({addUserCount:1,addUserStep:1,maxUserCount:1,loading:!1,renewexclusiveInfo:{name:u.name,resourceId:u.resourceId,orderId:u.orderId,productId:u.specification.id,concurrency:u.specification.concurrency,core:u.specification.core,memory:u.specification.memory,currentLicense:(0,N.default)({},s.currentLicense,{expireDays:g()(s.currentLicense.endDate).diff(u.expirationDatetime,"days")})}},function(){return t.computePrince()})}):a===l.AGGREGATIONTABLE?this.setState({addUserCount:5,addUserStep:5,maxUserCount:1e6,loading:!1},this.computePrince):this.isPortalUser?k.Z.getProjectLicenseSupportInfo({projectId:v.Z.projectId}).then(function(r){t.setState({addUserCount:a==="portalupgrade"?ue(r.effectiveExternalUserCount):100,maxUserCount:1e5,effectiveExternalUserCount:r.effectiveExternalUserCount,licenseInfo:r,loading:!1},function(){return t.computePrince()})}):a===l.AGGREGATIONTABLE?this.setState({addUserCount:5,addUserStep:5,loading:!1}):this.setState({addUserCount:10,addUserStep:10,maxUserCount:1e6,loading:!1},function(){return t.computePrince()}),v.Z.setPageTitle(le[a])}},{key:"computePrince",value:function(){var t=this,n=this.getCurrentType(),a=this.expandType;if(!(!W[n]||[l.COMPUTING,l.RENEWCOMPUTING].includes(a)&&md.global.Config.IsLocal&&!md.global.Config.IsPlatformLocal)){this.ajax&&this.ajax.abort();var r={};if(a===l.COMPUTING)r.productId=this.state.exclusiveInfo.specs;else if(a===l.RENEWCOMPUTING){var c=this.state.renewexclusiveInfo,s=c.orderId,u=c.productId;r.productId=u,r.orderId=s}this.ajax=W[n]((0,N.default)({projectId:v.Z.projectId,num:a===l.WORKFLOW?this.state.addUserCount/1e3:this.state.addUserCount},r)),this.ajax.then(function(m){t.setState({totalPrince:m,totalNum:t.state.limitNumber+t.state.addUserCount})})}}},{key:"getCurrentType",value:function(){var t=this.expandType;return t==="workflow"&&(t=this.state.workflowType===1?"workflow":"workflowMonthly"),t==="dataSync"&&(t=this.state.dataSyncType===1?"dataSync":"dataSyncMonthly"),t==="computing"&&(t=this.state.exclusiveInfo.type===1?"computing":"computingMonthly"),this.isPortalUser&&(t=this.state.payType),t}},{key:"handleBack",value:function(){this.props.history.go(-1)}},{key:"setStep",value:function(t){this.setState({step:t})}},{key:"handleCheckBox",value:function(t){this.setState({needSalesAssistance:t.target.checked})}},{key:"handleMinus",value:function(){var t=this,n=this.state,a=n.addUserCount,r=n.addUserStep;a<=r||this.setState({addUserCount:a>r?a-r:a},function(){t.computePrince()})}},{key:"handlePlus",value:function(){var t=this,n=this.state,a=n.addUserCount,r=n.addUserStep,c=n.maxUserCount;a>=c||this.setState({addUserCount:a<c?a+r:a},function(){t.computePrince()})}},{key:"handleInputChange",value:function(t){var n=t.which;if(n==37||n==38||n==39||n==40)return!1;var a=parseInt(t.target.value.replace(/\D/g,""),10)||0;this.setState({addUserCount:a})}},{key:"handleInputBlur",value:function(){var t=this,n=Math.max(Math.min(this.state.maxUserCount,this.state.addUserCount),5);n%this.state.addUserStep!==0&&(n+=this.state.addUserStep-n%this.state.addUserStep),this.setState({addUserCount:n},function(){t.computePrince()})}},{key:"handlePay",value:function(){var t=this,n=this.expandType;this.setState({isPay:!0});var a=this.state,r=a.addUserCount,c=a.needSalesAssistance,s=a.exclusiveInfo,u=this.getCurrentType(),m=[l.COMPUTING,l.RENEWCOMPUTING].includes(n)&&md.global.Config.IsLocal&&!md.global.Config.IsPlatformLocal,E={};n===l.COMPUTING?E.productId=s.specs:n===l.RENEWCOMPUTING&&(E.orderId=this.state.renewexclusiveInfo.orderId,E.id=v.Z.params[v.Z.params.length-1],E.num=void 0,E.productId=this.state.renewexclusiveInfo.productId),m&&(u="computingPermanent"),Z[u]&&Z[u]((0,N.default)({projectId:v.Z.projectId,num:n===l.WORKFLOW?r/1e3:r,needSalesAssistance:c},E)).then(function(h){h?alert(m?_l("\u521B\u5EFA\u6210\u529F"):_l("\u8BA2\u5355\u5DF2\u521B\u5EFA\u6210\u529F\uFF0C\u6B63\u5728\u8F6C\u5230\u4ED8\u6B3E\u9875..."),1,500,function(){window.location.href=m?"/admin/computing/"+v.Z.projectId:"/admin/waitingPay/"+v.Z.projectId+"/"+h.orderId}):(t.setState({isPay:!1}),alert(_l("\u64CD\u4F5C\u5931\u8D25"),2))})}},{key:"renderPlusInput",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=n.hasUnit,r=a===void 0?!1:a,c=n.disabled,s=c===void 0?!1:c,u=n.desc,m=u===void 0?"":u,E=this.state,h=E.addUserCount,C=E.addUserStep,p=E.maxUserCount,I=h.toString().replace(/(\d)(?=(\d{3})+$)/g,"$1,");return e.createElement("div",{className:"mTop40 mBottom40"},e.createElement("div",{className:y()("addUserBox",{disabled:s})},e.createElement("span",{className:y()("minus",{unClick:h<=C}),onClick:function(){s||t.handleMinus()}},"\uFF0D"),e.createElement("input",{type:"text",className:"ThemeColor3 bagNum",value:r?I+"GB":I,disabled:s,onChange:function(L){s||t.handleInputChange(L)},onBlur:function(L){s||t.handleInputBlur(L)},onPaste:function(){return!1}}),e.createElement("span",{className:y()("plus",{unClick:h>=p}),onClick:function(){s||t.handlePlus()}},"\uFF0B")),m&&e.createElement("div",{className:"Gray_75 mTop8"},m))}},{key:"renderWorkFlowContent",value:function(){var t=this,n=this.state.workflowType;return e.createElement(e.Fragment,null,e.createElement("div",{className:"workflowTypeContent"},ce.map(function(a){return e.createElement("div",{className:y()("workflowTypeItem",{active:n===a.key}),key:a.key,onClick:function(){return t.setState({workflowType:a.key,dataSyncType:a.key},function(){return t.computePrince()})}},e.createElement("div",{className:"Font15 Gray Bold"},a.title),e.createElement("div",{className:"Gray_9e mTop6"},_l("%0 \u5143",a.money)," / ",_l("%0 \u4E07\u6B21",a.count),"*",a.month))})),e.createElement("div",{className:"addWorkFlowBox"},e.createElement("div",{className:"addUserLabl"},n===1?_l("\u6BCF\u6708\u5DE5\u4F5C\u6D41\u6267\u884C\u6570\u589E\u52A0\u6570\u91CF"):_l("\u672C\u6708\u5DE5\u4F5C\u6D41\u6267\u884C\u6570\u589E\u52A0\u6570\u91CF")),this.renderPlusInput()))}},{key:"renderDataSyncContent",value:function(){var t=this,n=this.state.dataSyncType;return e.createElement(e.Fragment,null,e.createElement("div",{className:"workflowTypeContent"},ie.map(function(a){return e.createElement("div",{className:y()("workflowTypeItem",{active:n===a.key}),key:a.key,onClick:function(){return t.setState({dataSyncType:a.key},function(){return t.computePrince()})}},e.createElement("div",{className:"Font15 Gray Bold"},a.title),e.createElement("div",{className:"Gray_9e mTop6"},_l("%0 \u5143",a.money)," / ",_l("%0 \u4E07\u884C",a.count),"*",a.month))})),e.createElement("div",{className:"addWorkFlowBox"},e.createElement("div",{className:"addUserLabl"},n===1?_l("\u6BCF\u6708\u540C\u6B65\u4EFB\u52A1\u7B97\u529B\u884C\u6570\u589E\u52A0\u6570\u91CF"):_l("\u672C\u6708\u540C\u6B65\u4EFB\u52A1\u7B97\u529B\u884C\u6570\u589E\u52A0\u6570\u91CF")),this.renderPlusInput()))}},{key:"renderStorageContent",value:function(){return e.createElement(e.Fragment,null,e.createElement("div",{className:"workflowTypeContent"},e.createElement("div",{className:"workflowTypeItem active"},e.createElement("div",{className:"Font15 Gray Bold"},_l("\u672C\u5E74\u7528\u91CF\u6269\u5145\u5305")),e.createElement("div",{className:"Gray_9e mTop6"},_l("200 \u5143")," / 10 GB"))),e.createElement("div",{className:"addWorkFlowBox"},e.createElement("div",{className:"addUserLabl"},_l("\u8D2D\u4E70\u6570\u91CF")),this.renderPlusInput({hasUnit:!0}),e.createElement("div",{className:"mLeft15 Gray_75"},_l("\u4EC5\u672C\u5E74\u5185\u4F7F\u7528\u6709\u6548\uFF0C\u6B21\u5E741\u67081\u65E5\u6E05\u96F6"))))}},{key:"renderSubTitleSummary",value:function(){var t=this.state.maxUserCount,n=this.expandType;switch(n){case l.USER:return e.createElement("span",null,_l("\u5355\u4E2A\u589E\u91CF\u7528\u6237\u5305\u6700\u591A\u53EA\u80FD\u6269\u5145 %0 \u4EBA\uFF0C\u5982\u9700\u7279\u522B\u5B9A\u5236\uFF0C\u8BF7\u8054\u7CFB\u7535\u8BDD 400-665-6655",t));case l.WORKFLOW:return _l("\u6BCF\u6708\u6267\u884C\u6570\u514D\u8D39\u989D\u5EA6\u4E0D\u8DB3\u65F6\u53EF\u8D2D\u4E70\u4F7F\u7528\uFF0C\u5373\u65F6\u751F\u6548\u3002");case l.DATASYNC:return _l("\u6BCF\u6708\u540C\u6B65\u4EFB\u52A1\u6570\u7684\u7B97\u529B\u4E0D\u8DB3\u65F6\uFF0C\u53EF\u8D2D\u4E70\u4F7F\u7528\uFF0C\u7ACB\u5373\u751F\u6548\u3002");case l.STORAGE:case l.PORTALUSER:case l.PORTALUPGRADE:return""}}},{key:"renderExclusiveContent",value:function(){var t=this,n=this.state,a=n.exclusiveInfo,r=n.specsList,c=g()(new Date).endOf("month");return e.createElement(e.Fragment,null,e.createElement("div",{className:"exclusiveSpecsWrap mTop25"},r.map(function(s){return e.createElement("div",{className:y()("exclusiveSpecsCard",{active:a.specs===s.id}),key:"exclusiveSpecsCard-"+s.id,onClick:function(){t.setState({exclusiveInfo:(0,N.default)({},a,{specs:s.id})},function(){return t.computePrince()})}},e.createElement("div",{className:"Font15 Gray Bold"},s.name),e.createElement("div",{className:"Gray_9e mTop6"},s.cpu+"\u6838\uFF08vCPU\uFF09"," | ",s.memory/1024+"GiB"))})),e.createElement("div",{className:"mTop13 Gray_9e Font13"},_l("\u5E76\u53D1\u6570\u662F\u6307\u540C\u4E00\u4E2A\u65F6\u95F4\u70B9\u53EF\u540C\u65F6\u8FD0\u884C\u7684\u5B9E\u4F8B\u6570")),e.createElement("div",{className:"mTop40 Font13"},e.createElement("div",{className:"Gray_75 mRight24 mBottom16"},md.global.Config.IsLocal&&!md.global.Config.IsPlatformLocal?_l("\u6709\u6548\u65F6\u957F"):_l("\u8D2D\u4E70\u65F6\u957F")),e.createElement("div",{className:"flexRow"},S.map(function(s){return e.createElement("div",{className:y()("exclusiveTypeCard flexColumn justifyContentCenter",{active:s.key===a.type}),key:"exclusiveTypeCard-"+s.key,onClick:function(){t.setState({exclusiveInfo:(0,N.default)({},a,{type:s.key})},function(){return t.computePrince()})}},e.createElement("div",{className:"Font15 bold Gray"},s.title))}))),e.createElement("div",{className:"addWorkFlowBox"},e.createElement("div",{className:"addUserLabl"},md.global.Config.IsLocal&&!md.global.Config.IsPlatformLocal?_l("\u521B\u5EFA\u6570\u91CF"):_l("\u8D2D\u4E70\u6570\u91CF")),this.renderPlusInput(!1,!0),e.createElement("div",{className:"mLeft16"},_l("\u4E2A\u5B9E\u4F8B\u6570"))),a.currentLicense.endDate&&!(md.global.Config.IsLocal&&!md.global.Config.IsPlatformLocal)&&e.createElement("div",{className:"Font13 mBottom40"},e.createElement("span",{className:"Gray_75 mRight24"},_l("\u5230\u671F\u65F6\u95F4")),e.createElement("span",{className:"Gray"},a.type===0?c.format("YYYY\u5E74MM\u6708DD\u65E5"):g()(a.currentLicense.endDate).format("YYYY\u5E74MM\u6708DD\u65E5")),e.createElement("span",{className:"",style:{color:"#b4b4b4"}},"\uFF08"+_l("\u8BA1\u8D39")+"\uFF1A"+(a.type===0?g()(c).diff(new Date,"days")+1:a.currentLicense.expireDays)+_l("\u5929")+"\uFF09")))}},{key:"renderRenewExclusiveContent",value:function(){var t=this.state.renewexclusiveInfo,n=t.concurrency,a=t.core,r=t.memory,c=t.name,s=t.resourceId;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font17 bold mTop25"},c),e.createElement("div",{className:"renewExclusiveInfo"},e.createElement("span",{className:"label"},_l("\u89C4\u683C")),e.createElement("span",{className:"value"},""+n+_l("\u5E76\u53D1\u6570")+" | "+_l("%0\u6838",a)+"\uFF08vCPU\uFF09 \uFF5C "+r/1024+"GiB")),e.createElement("div",{className:"renewExclusiveInfo"},e.createElement("span",{className:"label"},_l("\u8D44\u6E90ID")),e.createElement("span",{className:"value"},s)),e.createElement("div",{className:"mTop40 Gray_75 mBottom16"},_l("\u8D2D\u4E70\u65F6\u957F")),e.createElement("div",{className:"renewExclusiveCard"},e.createElement("div",{className:"Font15 bold"},_l("\u7EC4\u7EC7\u5230\u671F\u65F6\u95F4"))),e.createElement("div",{className:"mTop40 mBottom40"},e.createElement("span",{className:"Gray_75 mRight24"},_l("\u5230\u671F\u65F6\u95F4")),g()(t.currentLicense.endDate).format("YYYY\u5E74MM\u6708DD\u65E5"),e.createElement("span",{className:"Gray_b4"},"\uFF08"+_l("\u8BA1\u8D39")+"\uFF1A"+t.currentLicense.expireDays+_l("\u5929")+"\uFF09")))}},{key:"renderOptionStyle",value:function(){var t=this;switch(this.expandType){case l.USER:return this.renderPlusInput({desc:_l("300 \u5143/\u4EBA/\u5E74*\u7248\u672C\u5269\u4F59\u65F6\u95F4\uFF085\u4EBA\u8D77\u8D2D\uFF09")});case l.WORKFLOW:return this.renderWorkFlowContent();case l.DATASYNC:return this.renderDataSyncContent();case l.STORAGE:return this.renderStorageContent();case l.PORTALUSER:case l.PORTALUPGRADE:var n=this.state,a=n.licenseInfo,r=a.nextLicense,c=r===void 0?{}:r,s=a.currentLicense,u=s===void 0?{}:s,m=n.payType;return e.createElement(ne,(0,N.default)({},T().pick(this.state,["payType","addUserCount","effectiveExternalUserCount"]),{licenseInfo:m==="portalupgrade"?c:u,handleChange:function(h,C){t.setState((0,H.default)({},h,C),function(){return t.computePrince()})}}));case l.COMPUTING:return this.renderExclusiveContent();case l.RENEWCOMPUTING:return this.renderRenewExclusiveContent();case l.AGGREGATIONTABLE:return this.renderPlusInput({desc:_l("100\u5143/\u4E2A/\u5E74*\u7248\u672C\u5269\u4F59\u65F6\u95F4\uFF085\u4E2A\u8D77\u8D2D\uFF09")})}}},{key:"renderInfoShow",value:function(){var t=this.state,n=t.addUserCount,a=t.totalNum,r=t.workflowType,c=t.dataSyncType,s=t.exclusiveInfo,u=t.specsList,m=t.renewexclusiveInfo,E=this.expandType;switch(E){case l.USER:return e.createElement(e.Fragment,null,e.createElement("span",{className:"mRight8"},_l("\u8D2D\u4E70\u4EBA\u6570")),e.createElement("span",{className:"mLeft15 mRight15"},_l("%0 \u4EBA",n)),e.createElement("span",null,_l("\uFF08\u8D2D\u4E70\u540E\u4EBA\u6570\u4E0A\u9650\u589E\u52A0\u5230 %0 \u4EBA\uFF09",a)));case l.WORKFLOW:case l.STORAGE:case l.DATASYNC:return e.createElement(e.Fragment,null,e.createElement("span",{className:"mRight8"},_l("\u5DF2\u9009\u62E9")),E===l.STORAGE?e.createElement("span",null,_l("\u6269\u5C55\u5305")):e.createElement("span",null,E==="dataSync"?c===1?_l("\u6BCF\u6708\u989D\u5EA6\u5347\u7EA7\u5305"):_l("\u672C\u6708\u989D\u5EA6\u5347\u7EA7\u5305"):r===1?_l("\u6BCF\u6708\u989D\u5EA6\u5347\u7EA7\u5305"):_l("\u672C\u6708\u989D\u5EA6\u5347\u7EA7\u5305")));case l.PORTALUSER:case l.PORTALUPGRADE:return e.createElement(e.Fragment,null,e.createElement("span",{className:"mRight8"},_l("\u5DF2\u9009\u62E9")),e.createElement("span",null,_l("%0\u4EBA",n)));case l.COMPUTING:var h=u.find(function(p){return p.id===s.specs}),C=g()(new Date).endOf("month");return e.createElement(e.Fragment,null,e.createElement("div",{className:"mBottom16"},e.createElement("span",{className:"mRight40"},_l("\u89C4\u683C")),e.createElement("span",null,name," ",h.cpu+"\u6838\uFF08vCPU\uFF09 | "+h.memory/1024+"GiB")),e.createElement("div",{className:"mBottom16"},e.createElement("span",{className:"mRight40"},_l("\u65F6\u957F")),e.createElement("span",null,S.find(function(p){return p.key===s.type}).title)),e.createElement("div",{className:"mBottom16"},e.createElement("span",{className:"mRight40"},_l("\u6570\u91CF")),e.createElement("span",null,"1")),s.currentLicense.endDate&&e.createElement("div",{className:"Font13 mBottom24 Gray_9e"},e.createElement("span",{className:"mRight12"},_l("\u5230\u671F\u65F6\u95F4")),e.createElement("span",null,s.type===0?C.format("YYYY\u5E74MM\u6708DD\u65E5"):g()(s.currentLicense.endDate).format("YYYY\u5E74MM\u6708DD\u65E5")),e.createElement("span",null,"\uFF08"+_l("\u8BA1\u8D39")+"\uFF1A"+(s.type===0?g()(C).diff(new Date,"days")+1:s.currentLicense.expireDays)+_l("\u5929")+"\uFF09")));case l.RENEWCOMPUTING:return e.createElement(e.Fragment,null,e.createElement("div",{className:"mBottom16"},e.createElement("span",{className:"mRight40"},_l("\u89C4\u683C")),e.createElement("span",null,_l("%0\u5E76\u53D1\u6570",m.concurrency)," ",m.core+"\u6838\uFF08vCPU\uFF09 | "+m.memory/1024+"GiB")),e.createElement("div",{className:"mBottom16"},e.createElement("span",{className:"mRight40"},_l("\u65F6\u957F")),e.createElement("span",null,S.find(function(p){return p.key===1}).title)),e.createElement("div",{className:"mBottom16"},e.createElement("span",{className:"mRight40"},_l("\u6570\u91CF")),e.createElement("span",null,"1")),s.currentLicense.endDate&&e.createElement("div",{className:"Font13 mBottom24 Gray_9e"},e.createElement("span",{className:"mRight12"},_l("\u5230\u671F\u65F6\u95F4")),e.createElement("span",null,g()(m.currentLicense.endDate).format("YYYY\u5E74MM\u6708DD\u65E5")),e.createElement("span",null,"\uFF08"+_l("\u8BA1\u8D39")+"\uFF1A"+m.currentLicense.expireDays+_l("\u5929")+"\uFF09")));case l.AGGREGATIONTABLE:return e.createElement("div",{className:"flexRow"},e.createElement("div",{className:"mRight24"},_l("\u8D2D\u4E70\u6570\u91CF")),e.createElement("div",{className:"flex"},_l("%0\u4E2A",n)))}}},{key:"renderAutoOrder",value:function(){var t=this,n=this.state.showWorkflowExtPack;return e.createElement("div",{className:"flexRow pAll20 autoOrderCon mTop30"},e.createElement("span",{className:"Bold"},_l("\u81EA\u52A8\u8BA2\u8D2D")),e.createElement("div",{className:"flexColumn flex mLeft32"},e.createElement(K.Z,{checked:n?this.state.autoPurchaseWorkflowExtPack:this.state.autoPurchaseDataPipelineExtPack,onClick:function(r){if(n){x.Z.setAutoPurchaseWorkflowExtPack({projectId:v.Z.projectId,autoPurchaseWorkflowExtPack:!r}).then(function(c){c?t.setState({autoPurchaseWorkflowExtPack:!r},function(){t.state.autoPurchaseWorkflowExtPack&&t.state.balance<100&&alert("\u5F53\u524D\u8D26\u6237\u4F59\u989D\u4E0D\u8DB3100\u5143\uFF0C\u8BE5\u529F\u80FD\u53EF\u80FD\u65E0\u6CD5\u6B63\u5E38\u8FD0\u884C",3)}):alert(_l("\u64CD\u4F5C\u5931\u8D25"),2)});return}x.Z.setAutoPurchaseDataPipelineExtPack({projectId:v.Z.projectId,autoPurchaseDataPipelineExtPack:!r}).then(function(c){c?t.setState({autoPurchaseDataPipelineExtPack:!r},function(){t.state.autoPurchaseDataPipelineExtPack&&t.state.balance<100&&alert("\u5F53\u524D\u8D26\u6237\u4F59\u989D\u4E0D\u8DB3100\u5143\uFF0C\u8BE5\u529F\u80FD\u53EF\u80FD\u65E0\u6CD5\u6B63\u5E38\u8FD0\u884C",3)}):alert(_l("\u64CD\u4F5C\u5931\u8D25"),2)})}}),e.createElement("span",{className:"Gray_75 mTop10"},n?_l("\u5F00\u542F\u540E\uFF0C\u5F53\u6708\u5269\u4F59\u6267\u884C\u989D\u5EA6\u4E3A2%\u65F6\uFF0C\u81EA\u52A8\u8D2D\u4E70100\u5143/1\u4E07\u6B21\u7684\u5355\u6708\u5305\uFF0C\u4ECE\u8D26\u6237\u4F59\u989D\u4E2D\u6263\u6B3E\uFF08\u5F00\u542F\u540E\u4ECD\u53EF\u4EE5\u5728\u7EC4\u7EC7\u7BA1\u7406\u540E\u53F0\u7684\u5DE5\u4F5C\u6D41\u5904\u5173\u95ED\uFF09"):_l("\u5F00\u542F\u540E\uFF0C\u5F53\u6708\u5269\u4F59\u6267\u884C\u989D\u5EA6\u4E3A2%\u65F6\uFF0C\u81EA\u52A8\u8D2D\u4E70 100\u5143/10\u4E07\u884C \u7684\u5355\u6708\u5305\uFF0C\u4ECE\u8D26\u6237\u4F59\u989D\u4E2D\u6263\u6B3E\u3002\uFF08\u5F00\u542F\u540E\u53EF\u4EE5\u5728\u6570\u636E\u96C6\u6210\u7684\u540C\u6B65\u4EFB\u52A1\u4E2D\u5173\u95ED\uFF09"))))}},{key:"renderSelectText",value:function(){var t=this.state,n=t.dataSyncType,a=t.workflowType,r=t.exclusiveInfo;switch(this.expandType){case l.DATASYNC:return n===1?_l("\u6BCF\u6708\u989D\u5EA6\u5347\u7EA7\u5305"):_l("\u672C\u6708\u989D\u5EA6\u5347\u7EA7\u5305");case l.WORKFLOW:return a===1?_l("\u6BCF\u6708\u989D\u5EA6\u5347\u7EA7\u5305"):_l("\u672C\u6708\u989D\u5EA6\u5347\u7EA7\u5305");case l.COMPUTING:return S.find(function(c){return c.key===r.type}).title;default:return null}}},{key:"render",value:function(){var t=this,n=this.state,a=n.step,r=n.totalPrince,c=n.needSalesAssistance,s=n.isPay,u=n.workflowType,m=n.showWorkflowExtPack,E=n.showDataSyncExtPack,h=n.loading,C=n.dataSyncType,p=this.expandType;return h?e.createElement("div",{className:"expansionService"},e.createElement(X.Z,null)):e.createElement("div",{className:"expansionService"},e.createElement("div",{className:"valueAddServerHeader"},e.createElement(j.Z,{icon:"backspace",className:"Hand mRight18 TxtMiddle Font24",onClick:function(){return t.handleBack()}}),e.createElement("span",{className:"Font17 Bold"},se[p])),e.createElement("div",{style:{flex:1,overflow:"scroll"}},e.createElement("div",{className:"warpOneStep"},e.createElement("div",{className:y()("stepTitle",{color_bd:a!==1})},!(p==="computing"&&md.global.Config.IsLocal&&!md.global.Config.IsPlatformLocal)&&e.createElement("div",{className:"stepNum"},e.createElement("span",{className:"Bold Font12"},"1")),e.createElement("span",null,oe[p])),e.createElement("div",{className:y()("Gray_9 Font13 Normal mTop10",{Hidden:a!==1})},this.renderSubTitleSummary()),e.createElement("div",{className:"stepContent"},a===1?e.createElement("div",{className:"infoEdit"},this.renderOptionStyle(),!(p==="computing"&&md.global.Config.IsLocal&&!md.global.Config.IsPlatformLocal)&&e.createElement("div",null,e.createElement("div",{className:"oneStepLeft"},_l("\u603B\u8BA1")),e.createElement("span",{className:"Font20 color_b"},"\uFFE5"),e.createElement("span",{className:"Font20 color_b Bold"},r),![l.COMPUTING,l.RENEWCOMPUTING].includes(p)&&(this.isPortalUser?e.createElement("a",{target:"blank",className:"mLeft20",href:"https://help.mingdao.com/purchase/external-user-billing"},_l("\u8BA1\u8D39\u65B9\u5F0F")):e.createElement("a",{target:"blank",className:"mLeft20",href:"/price"},_l("\u4E86\u89E3\u66F4\u591A")))),(m||E)&&this.renderAutoOrder(),e.createElement("div",{className:"pTop30"},e.createElement("button",{type:"button",className:"ming Button Button--primary nextBtn",onClick:function(){if(!(p==="computing"&&md.global.Config.IsLocal&&!md.global.Config.IsPlatformLocal)){t.setStep(2);return}t.handlePay()},disabled:s},p==="computing"&&md.global.Config.IsLocal&&!md.global.Config.IsPlatformLocal?_l("\u786E\u8BA4"):_l("\u4E0B\u4E00\u6B65")))):e.createElement("div",{className:"infoShow"},e.createElement("div",{className:"mTop25 Font13 Gray_9"},this.renderInfoShow()),e.createElement("div",{className:"mTop16 mBottom20 Font13 Gray_9"},e.createElement("span",{className:[l.COMPUTING,l.RENEWCOMPUTING,l.AGGREGATIONTABLE].includes(p)?"mRight40":"mRight8"},_l("\u603B\u8BA1")),e.createElement("span",{className:y()({mLeft7:T().includes([l.AGGREGATIONTABLE],p)})},"\uFFE5",r)),e.createElement("button",{type:"button",className:"ming Button Button--link ThemeColor3 pAll0 Hover_49",onClick:function(){return t.setStep(1)}},_l("\u4FEE\u6539"))))),!(p==="computing"&&md.global.Config.IsLocal&&!md.global.Config.IsPlatformLocal)&&e.createElement(e.Fragment,null,e.createElement("div",{className:"stepDiviceLine"}),e.createElement("div",{className:"warpTowStep"},e.createElement("div",{className:y()("stepTitle",{color_bd:a!==2})},e.createElement("div",{className:"stepNum"},e.createElement("span",{className:"Bold Font12"},"2")),e.createElement("span",null,_l("\u751F\u6210\u8BA2\u5355"))),e.createElement("div",{className:y()("stepContent pTop30",{Hidden:a!==2})},[l.WORKFLOW,l.DATASYNC,l.COMPUTING].includes(p)?e.createElement("div",{className:"mBottom10"},e.createElement("span",{className:"mRight8 Gray_9"},_l("\u5DF2\u9009\u62E9")),e.createElement("span",{className:"color_b"},this.renderSelectText())):null,e.createElement("div",null,e.createElement("span",{className:"Font13 mRight8 Gray_9"},_l("\u603B\u8BA1\uFF1A")),e.createElement("span",{className:"Font24 Bold color_b"},"\uFFE5",r)),e.createElement("div",{className:"pTop40"},e.createElement("button",{type:"button",disabled:s,className:"ming Button Button--primary nextBtn",onClick:function(){return t.handlePay()}},_l("\u786E\u8BA4\u4E0B\u5355"))),!md.global.Config.IsLocal&&e.createElement("div",{className:"warpNeedHelp"},e.createElement(Y.default,{onChange:this.handleCheckBox.bind(this),checked:c},_l("\u6211\u5E0C\u671B\u5F97\u5230\u9500\u552E\u4EE3\u8868\u7684\u534F\u52A9"))))))))}}]),i}(e.Component))||B}}]);
