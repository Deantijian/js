"use strict";(self.webpackChunkmingdao_web=self.webpackChunkmingdao_web||[]).push([[5668],{35919:()=>{},95668:(ye,ne,i)=>{i.r(ne),i.d(ne,{default:()=>Ne});var re=i(54208),se=i(88239),ae=i(88106),j=i(69288),ce=i(70264),Ce=i(10524),ie=i(31059),we=i(34279),W=i(64749),H=i(12424),m=i(46593),de=i.n(m),ue=i(85105),X=i.n(ue),Q=i(99663),z=i(22600),V=i(49135),J=i(93196),t=i(67294),S=i(59911),Z=i(71346);const me={setAccountGuide:function(c){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("AccountGuide","SetAccountGuide",c,r)}};var Ee=i(67272),G=i(51024),T=i(15577),Y=i(66344),fe=i(96486),L=i.n(fe),he=function(x){(0,J.default)(c,x);function c(r){(0,Q.default)(this,c);var e=(0,V.default)(this,(c.__proto__||X()(c)).call(this,r));e.isPasswordRule=function(F){return Y.Z.isPasswordValid(F,e.state.passwordRegex)};var n=window,a=n.md,l=a===void 0?{}:a,s=l.global,d=s===void 0?{}:s,u=d.SysSettings,f=u===void 0?{}:u,C=f.passwordRegexTip,k=f.passwordRegex;return e.state={originPassword:"",newPassword:"",confirmPassword:"",passwordRegexTip:C,passwordRegex:k},e}return(0,z.default)(c,[{key:"handleSubmit",value:function(){var e=this,n=this.props.isNullCredential,a=this.state,l=a.originPassword,s=a.newPassword,d=a.confirmPassword;if(!s){alert(_l("\u8BF7\u8BBE\u7F6E\u65B0\u5BC6\u7801"),3),$("#newInput").focus();return}if(!this.isPasswordRule(s)){var u=this.state.passwordRegexTip||_l("\u5BC6\u7801,8-20\u4F4D\uFF0C\u5FC5\u987B\u5B57\u6BCD+\u6570\u5B57");alert(u,3),$("#newInput").focus().select();return}if(n){if(!d){alert(_l("\u8BF7\u786E\u8BA4\u5BC6\u7801"),3),$("#confirmPassword").focus();return}if(!this.isPasswordRule(d)){var f=this.state.passwordRegexTip||_l("\u5BC6\u7801,8-20\u4F4D\uFF0C\u5FC5\u987B\u5B57\u6BCD+\u6570\u5B57");alert(f,3),$("#confirmPassword").focus().select();return}if(!L().isEqual(s,d)){alert(_l("\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4"),3);return}}S.Z.editPwd({oldPwd:l&&!n?(0,T.HI)(l):void 0,newPwd:(0,T.HI)(s),confirmPwd:n?(0,T.HI)(d):(0,T.HI)(s)}).then(function(C){if(window.localStorage.removeItem("LoginCheckList"),C===1){e.forbidRefresh();var k=_l("\u5BC6\u7801\u4FEE\u6539\u6210\u529F\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55")+'<div style="max-width:350px;" class="LineHeight20 Font12 Gray_a">'+_l("\u4E3A\u4E86\u4FDD\u969C\u8D26\u6237\u5B89\u5168\uFF0C\u5982\u679C\u60A8\u6709\u5B89\u88C5APP\uFF0C%0APP\u5C06\u81EA\u52A8\u767B\u51FA\uFF0C\u5EFA\u8BAE\u60A8\u91CD\u65B0\u767B\u5F55\u786E\u4FDD\u53EF\u4EE5\u6B63\u5E38\u6536\u5230\u63A8\u9001","<br />")+"</div>";alert(k,1,5e3,function(){window.location.href="/logout"})}else C===6?(alert(_l("\u539F\u5BC6\u7801\u8F93\u5165\u4E0D\u6B63\u786E"),2),$("#originInput").focus().select()):C===3?(alert(_l("\u60A8\u8F93\u5165\u7684\u65B0\u5BC6\u7801\u4E0E\u65E7\u5BC6\u7801\u4E00\u6837"),2),$("#newInput").focus().select()):C===4?(alert(_l("\u60A8\u8F93\u5165\u7684\u65B0\u5BC6\u7801\u548C\u786E\u8BA4\u5BC6\u7801\u4E0D\u4E00\u81F4"),2),$("#newInput").focus().select()):alert(_l("\u4FDD\u5B58\u5931\u8D25"),2)}).catch()}},{key:"forbidRefresh",value:function(){$("<div class='passwordModifySuccessMask'></div>").appendTo("html > body"),this.forbidF5(),this.forbidRightClick()}},{key:"forbidF5",value:function(){document.onkeydown=function(e){e=window.event||e;var n=e.keyCode||e.which;if(n=116)if(window.event){try{e.keyCode=0}catch(a){}e.returnValue=!1}else e.preventDefault()}}},{key:"forbidRightClick",value:function(){document.oncontextmenu=function(){return!1}}},{key:"render",value:function(){var e=this,n=this.props.isNullCredential,a=this.state,l=a.originPassword,s=a.newPassword,d=a.confirmPassword;return t.createElement("div",{className:"clearfix"},!n&&t.createElement(t.Fragment,null,t.createElement("div",{className:"Gray"},_l("\u539F\u6709\u5BC6\u7801")),t.createElement(G.default.Password,{id:"originInput",autocomplete:"new-password",value:l,className:"mTop10 mBottom10",placeholder:_l("\u539F\u6709\u5BC6\u7801"),onChange:function(f){return e.setState({originPassword:f.target.value})}}),t.createElement("div",{className:"clearfix Block"},t.createElement("a",{class:"NoUnderline Right ThemeColor3 Hover_49",target:"_blank",href:"/findPassword"},_l("\u5FD8\u8BB0\u5BC6\u7801\uFF1F")))),t.createElement("div",{className:"Gray mTop24"},_l("\u65B0\u5BC6\u7801")),t.createElement(G.default.Password,{id:"newInput",autocomplete:"new-password",value:s,className:"mTop10 mBottom10",placeholder:_l("\u65B0\u5BC6\u7801"),onChange:function(f){return e.setState({newPassword:f.target.value})}}),t.createElement("div",{className:"Gray_9e"},this.state.passwordRegexTip||_l("\u5BC6\u7801,8-20\u4F4D\uFF0C\u5FC5\u987B\u5B57\u6BCD+\u6570\u5B57")),n&&t.createElement(t.Fragment,null,t.createElement("div",{className:"Gray mTop24"},_l("\u518D\u6B21\u8F93\u5165\u65B0\u5BC6\u7801")),t.createElement(G.default.Password,{id:"confirmPassword",autocomplete:"new-password",value:d,className:"mTop10 mBottom10",placeholder:_l("\u518D\u6B21\u8F93\u5165\u65B0\u5BC6\u7801"),onChange:function(f){return e.setState({confirmPassword:f.target.value})}})),t.createElement("div",{className:"mTop40 Right mBottom24"},t.createElement("span",{className:"Font14 Gray_9e mRight32 Hover_49 Hand",onClick:function(){return e.props.closeDialog()}},_l("\u53D6\u6D88")),t.createElement("button",{type:"button",className:"ming Button Button--primary editPasswordDialogBtn",onClick:function(){return e.handleSubmit()}},_l("\u786E\u8BA4"))))}}]),c}(t.Component),pe=i(1952),I=i(93967),p=i.n(I),q=i(14260),o=i.n(q),h=i(60300),w=i.n(h),v=i(86559),D=i(35919),N,P,b,E={account:function(c){var r=(0,H.Z)(c,2),e=r[0],n=r[1];if(n&&!(e&&n.isValidNumber()))return _l("\u624B\u673A\u53F7\u7801\u683C\u5F0F\u9519\u8BEF")},newPwd:function(c){var r=window,e=r.md,n=e===void 0?{}:e,a=n.global,l=a===void 0?{}:a,s=l.SysSettings,d=s===void 0?{}:s,u=d.passwordRegexTip,f=d.passwordRegex;if(!(c&&Y.Z.isPasswordValid(c,f)))return u||_l("\u5BC6\u7801\uFF0C\u81F3\u5C118-20\u4F4D\uFF0C\u4E14\u542B\u5B57\u6BCD+\u6570\u5B57")}},ee=(P=N=function(x){(0,J.default)(c,x);function c(r){(0,Q.default)(this,c);var e=(0,V.default)(this,(c.__proto__||X()(c)).call(this,r));b.call(e);var n=window,a=n.md,l=a===void 0?{}:a,s=l.global,d=s===void 0?{}:s,u=d.SysSettings,f=u===void 0?{}:u,C=f.passwordRegexTip,k=f.passwordRegex;return e.state={passwordRegexTip:C,passwordRegex:k,account:"",verifyCode:"",newPwd:"",errorMsg:{},isSendVerify:!1,seconds:30,loading:!1},e.handleFieldInput=e.handleFieldInput.bind(e),e.handleFieldBlur=e.handleFieldBlur.bind(e),e.clearError=e.clearError.bind(e),e}return(0,z.default)(c,[{key:"componentDidMount",value:function(){this.itiFn()}},{key:"handleFieldInput",value:function(e,n){var a=n==="account"?e.target.value.replace(/ +/g,""):e.target.value;this.setState((0,ae.default)({},n,a))}},{key:"handleFieldBlur",value:function(e){var n=this;return function(a){var l=void 0;typeof a<"u"?l=e==="account"?[n.mobile,n.iti]:a.target.value:l=e==="account"?[n.mobile,n.iti]:n.state[e];var s=n.state.errorMsg||{},d=E[e](l);d&&(s[e]=d),n.setState({errorMsg:s})}}},{key:"clearError",value:function(e){var n=this;return function(){var a=n.state.errorMsg;delete a[e],n.setState({errorMsg:a})}}},{key:"getVerifyCode",value:function(){var e=this,n=L().throttle(function(a){a.ret===0&&S.Z.sendVerifyCode({account:e.iti.getNumber(),ticket:a.ticket,randStr:a.randstr,captchaType:md.global.getCaptchaType(),needCheckCode:!1}).then(function(l){l===1?(alert(_l("\u9A8C\u8BC1\u7801\u53D1\u9001\u6210\u529F")),e.setState({isSendVerify:!0},e.countdown)):(l===2?(alert(_l("\u53D1\u9001\u5931\u8D25\uFF0C\u65B0\u624B\u673A\u53F7\u4E0E\u73B0\u6709\u624B\u673A\u53F7\u4E00\u81F4"),2),e.mobile.focus()):l===8&&alert(_l("\u9A8C\u8BC1\u7801\u9519\u8BEF"),3),l===9?(alert(_l("\u6B64\u624B\u673A\u53F7\u5DF2\u88AB\u5176\u5B83\u5E10\u53F7\u7ED1\u5B9A"),2),e.mobile.focus()):alert(_l("\u9A8C\u8BC1\u7801\u53D1\u9001\u5931\u8D25"),2))}).catch()},1e4,{leading:!0});md.global.getCaptchaType()===1?new v.Z(n):new TencentCaptcha(md.global.Config.CaptchaAppId.toString(),n).show()}},{key:"handleSubmit",value:function(){var e=this;this.setState({loading:!0});var n=this.state,a=n.verifyCode,l=n.newPwd,s={account:this.iti.getNumber(),verifyCode:a,newPwd:(0,T.HI)(l)};S.Z.editIntergrationAccount(s).then(function(d){d===1?(alert(_l("\u7ED1\u5B9A\u6210\u529F")),e.props.onCancel(),e.props.getData()):d===8?alert(_l("\u9A8C\u8BC1\u7801\u9519\u8BEF"),2):d===9?alert(_l("\u65B0\u8D26\u53F7\u5DF2\u7ECF\u88AB\u5360\u7528"),2):d===6?alert(_l("\u5BC6\u7801\u9519\u8BEF\uFF0C\u9700\u8981\u52A0\u5BC6"),2):d===0&&alert(_l("\u64CD\u4F5C\u5931\u8D25"),2),e.setState({loading:!1})})}},{key:"render",value:function(){var e=this,n=this.props,a=n.title,l=n.showFooter,s=n.onCancel,d=s===void 0?function(){}:s,u=this.state,f=u.account,C=u.verifyCode,k=u.newPwd,F=u.errorMsg,B=F===void 0?{}:F,K=u.isSendVerify,ve=u.seconds,g=u.loading,oe=f&&C&&k&&!L().keys(B).length&&!g;return t.createElement(j.Z,{title:a,visible:!0,showFooter:l,onCancel:d,onOk:function(){}},t.createElement("div",{className:"initPassowrdDialog"},t.createElement("div",{className:"mTop12"},_l("\u624B\u673A\u53F7")),t.createElement("div",{className:"inputWrap",id:"txtMobilePhone"},t.createElement("input",{className:p()("inputBox",{errors:B.account}),ref:function(M){return e.mobile=M},placeholder:_l("\u8BF7\u8F93\u5165\u624B\u673A\u53F7"),value:f,maxLength:"11",onInput:function(M){return e.handleFieldInput(M,"account")},onBlur:this.handleFieldBlur("account"),onFocus:this.clearError("account")})),t.createElement("div",{className:"warnBox"},B.account&&t.createElement("span",{className:"warnMsg"},B.account)),t.createElement("div",{className:"mTop10"},_l("\u9A8C\u8BC1\u7801")),t.createElement("div",{className:"inputWrap"},t.createElement("input",{className:p()("inputBox",{errors:B.verifyCode}),placeholder:_l("\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"),maxLength:"6",value:C,onChange:function(M){return e.handleFieldInput(M,"verifyCode")},onFocus:this.clearError("verifyCode")}),t.createElement("button",{type:"button",className:p()("ming Button Button--primary codeBtn",{disable:!this.state.account||this.iti&&!this.iti.isValidNumber()||K}),disabled:!this.state.account||this.iti&&!this.iti.isValidNumber()||K,onClick:function(){return e.getVerifyCode()}},K?_l("%0\u79D2\u540E\u91CD\u65B0\u53D1\u9001",ve):_l("\u83B7\u53D6\u9A8C\u8BC1\u7801"))),t.createElement("div",{className:"warnBox"},B.verifyCode&&t.createElement("span",{className:"warnMsg"},B.verifyCode)),t.createElement("div",{className:"mTop10"},_l("\u8BBE\u7F6E\u767B\u5F55\u5BC6\u7801")),t.createElement("div",{className:"inputWrap"},t.createElement(G.default.Password,{className:p()("inputBox",{errors:B.newPwd}),placeholder:_l("\u8BF7\u8F93\u5165\u5BC6\u7801"),maxLength:"20",value:k,onChange:function(M){return e.handleFieldInput(M,"newPwd")},onBlur:this.handleFieldBlur("newPwd"),onFocus:this.clearError("newPwd"),autocomplete:"new-password"})),t.createElement("div",{className:"warnBox"},B.newPwd?t.createElement("span",{className:"warnMsg"},B.newPwd):t.createElement("span",{className:"Gray_9e"},this.state.passwordRegexTip||_l("8-20\u4F4D\uFF0C\u9700\u5305\u542B\u5B57\u6BCD\u548C\u6570\u5B57"))),t.createElement("div",{className:"clearfix"},t.createElement("button",{type:"button",disabled:!oe,className:p()("submitBtn ming Button Right Button--primary",{disable:!oe}),onClick:function(){return e.handleSubmit()}},_l("\u786E\u8BA4")))))}}]),c}(t.Component),b=function(){var c=this;this.itiFn=function(){c.mobile&&(c.iti=o()(c.mobile,{customPlaceholder:"",autoPlaceholder:"off",loadUtils:"",initialCountry:L().get(md,"global.Config.DefaultConfig.initialCountry")||"cn",preferredCountries:L().get(md,"global.Config.DefaultConfig.preferredCountries")||["cn"],utilsScript:w(),separateDialCode:!0,showSelectedDialCode:!0}))},this.countdown=function(){var r=c;e&&clearInterval(e);var e=setInterval(function(){r.state.seconds<=0?r.setState({isSendVerify:!1}):r.setState({seconds:r.state.seconds-1})},1e3)}},P),O=function(c){return(0,pe.Z)(ee,c)},U=i(8736),le=i(86515),R=[{key:"weiXinBind",icon:"icon-wechat",color:"weiBindColor",label:_l("\u5FAE\u4FE1")},{key:"qqBind",icon:"icon-qq",color:"qqBindColor",label:_l("QQ")},{key:"workBind",color:"workBindColor",needHide:!0}],y={mobilePhone:_l("\u7ED1\u5B9A\u624B\u673A\u53F7\u4F5C\u4E3A\u4F60\u7684\u767B\u5F55\u8D26\u53F7\u3002\u540C\u65F6\u4E5F\u662F\u7BA1\u7406\u4E2A\u4EBA\u8D26\u6237\u548C\u4F7F\u7528\u7CFB\u7EDF\u670D\u52A1\u7684\u91CD\u8981\u4F9D\u636E\u3002\u4E3A\u4FBF\u4E8E\u60A8\u4EE5\u540E\u7684\u64CD\u4F5C\u53CA\u8D26\u6237\u5B89\u5168\uFF0C\u8BF7\u60A8\u5C3D\u5FEB\u7ED1\u5B9A\u3002"),isTwoauthentication:_l("\u4E24\u6B65\u9A8C\u8BC1\u662F\u5728\u8F93\u5165\u8D26\u53F7\u5BC6\u7801\u540E\uFF0C\u989D\u5916\u589E\u52A0\u4E00\u9053\u5B89\u5168\u5C4F\u969C\uFF08\u624B\u673A\u77ED\u4FE1\u6216\u90AE\u7BB1\u9A8C\u8BC1\u7801\uFF09\uFF0C\u4FDD\u969C\u60A8\u7684\u5E10\u53F7\u5B89\u5168")},ge={0:_l("\u89E3\u7ED1\u5931\u8D25"),5:_l("\u89E3\u7ED1\u5931\u8D25\uFF0C\u8D26\u53F7\u4E0D\u5B58\u5728"),6:_l("\u89E3\u7ED1\u5931\u8D25\uFF0C\u5BC6\u7801\u9519\u8BEF"),7:_l("\u89E3\u7ED1\u5931\u8D25\uFF0C\u90AE\u7BB1\u548C\u624B\u673A\uFF0C\u8BF7\u81F3\u5C11\u4FDD\u7559\u5176\u4E00")},Pe={weiXinBind:1,qqBind:2},Be=function(c){switch(c){case 1:return{icon:"icon-invite-ding",label:_l("\u9489\u9489")};case 2:case 3:return{icon:"icon-enterprise_wechat",label:_l("\u4F01\u4E1A\u5FAE\u4FE1")};case 4:return{icon:"icon-welink",label:_l("Welink")};case 5:case 6:return{icon:"icon-feishu",label:_l("\u98DE\u4E66")}}},Ne=function(x){(0,J.default)(c,x);function c(r){(0,Q.default)(this,c);var e=(0,V.default)(this,(c.__proto__||X()(c)).call(this,r));return e.getData=function(){e.setState({loading:!0}),de().all([e.getAccount(),e.getInfo()]).then(function(n){var a=(0,H.Z)(n,2),l=a[0],s=a[1];e.setState({isNullCredential:l.isNullCredential,email:l.email,isVerify:l.isVerify,mobilePhone:l.mobilePhone,isHavePrj:l.isHavePrj,qqBind:l.qqBind,weiXinBind:l.weiXinBind,workBind:l.workBind,needInit:l.isIntergration&&!l.mobilePhone,joinFriendMode:s.joinFriendMode,isPrivateMobile:s.isPrivateMobile,isPrivateEmail:s.isPrivateEmail,isTwoauthentication:s.isTwoauthentication,loading:!1})})},e.joinFriend=function(){return t.createElement(t.Fragment,null,t.createElement("div",{className:"LineHeight36 accountJoinFrirndBox"},t.createElement("span",{className:"InlineBlock accountLabel Gray_75"},_l("\u6DFB\u52A0\u6211\u7684\u65B9\u5F0F")),t.createElement(W.default,{value:e.state.joinFriendMode,onChange:function(a){return e.sureSettings("joinFriendMode",a,function(){e.setState({joinFriendMode:a})})}},t.createElement(W.default.Option,{value:0},_l("\u5141\u8BB8\u4EFB\u4F55\u4EBA")),t.createElement(W.default.Option,{value:1},_l("\u9700\u8981\u8EAB\u4EFD\u9A8C\u8BC1")),t.createElement(W.default.Option,{value:2},_l("\u4E0D\u5141\u8BB8\u4EFB\u4F55\u4EBA")))),t.createElement("div",{className:"mTop32 flexRow"},t.createElement("span",{className:"InlineBlock accountLabel Gray_75"},_l("\u624B\u673A\u548C\u90AE\u7BB1")),t.createElement("span",{className:"flexColumn"},t.createElement(ie.default,{className:"Gray",checked:e.state.isPrivateMobile,onChange:function(a){var l=a.target.checked;e.sureSettings("isPrivateMobile",l,function(){e.setState({isPrivateMobile:l})})}},_l("\u624B\u673A\u53F7\u4EC5\u81EA\u5DF1\u53EF\u89C1")),t.createElement(ie.default,{className:"Gray",checked:e.state.isPrivateEmail,onChange:function(a){var l=a.target.checked;e.sureSettings("isPrivateEmail",l,function(){e.setState({isPrivateEmail:l})})}},_l("\u90AE\u7BB1\u4EC5\u81EA\u5DF1\u53EF\u89C1")))))},e.renderTips=function(n){return t.createElement(ce.Z,{popupPlacement:"top",text:t.createElement("span",null,y[n])},t.createElement("span",{className:"icon-novice-circle Gray_bd Hand mLeft5 Font15"}))},e.renderRedDot=function(n,a){return t.createElement("span",{className:p()("Right Gray_9e Hover_49 Hand redDot",{Hidden:!n}),onClick:function(){return e.handleCancelRed(a)}},_l("\u53D6\u6D88\u7EA2\u70B9\u63D0\u793A"))},e.dealLoagout=function(){S.Z.validateLogoffAccount().then(function(n){n===1?location.href="/cancellation":n===20?alert(_l("\u60A8\u662F\u5E73\u53F0\u552F\u4E00\u7BA1\u7406\u5458\uFF0C\u65E0\u6CD5\u6CE8\u9500"),2):n===30&&alert(_l("\u60A8\u5C1A\u6709\u672A\u9000\u51FA\u7684\u7EC4\u7EC7\uFF0C\u8BF7\u5148\u81F3 \u4E2A\u4EBA\u4E2D\u5FC3-\u6211\u7684\u7EC4\u7EC7 \u9000\u51FA\u6240\u6709\u7EC4\u7EC7\uFF0C\u65B9\u53EF\u6CE8\u9500"),2)})},e.state={email:"",mobilePhone:"",qqBind:{isBind:!1},weiXinBind:{isBind:!1},workBind:{isBind:!1},loading:!1,joinFriendMode:1,isVerify:!1,isPrivateMobile:!1,isPrivateEmail:!1,needInit:!1,showWarn:!0,isTwoauthentication:!1,wxQRCodeLoading:!0,editPasswordVisible:!1},e}return(0,z.default)(c,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getAccount",value:function(){return S.Z.getAccountInfo({})}},{key:"getInfo",value:function(){return Z.Z.getAccountSettings({})}},{key:"handleBind",value:function(e){var n=this,a=this.state[e]||{};if(a.state){var f=e==="weiXinBind"?_l("\u5FAE\u4FE1"):"QQ";j.Z.confirm({title:_l("\u89E3\u7ED1%0",f),description:_l("\u786E\u8BA4\u89E3\u7ED1%0\uFF0C\u89E3\u7ED1\u4E4B\u540E\u4E0D\u80FD\u901A\u8FC7%1\u767B\u5F55\uFF1F",f,f),onOk:function(){return n.cancelBindAccount(a.state,e)}})}else if(e==="weiXinBind"){var l="/qrcode",s=400,d=400,u=this.getWindowPosition(s,d);this.showNewWindow(l,s,d,u.left,u.top)}else{var l="http://tp.mingdao.com/qq/authRequest",s=750,d=500,u=this.getWindowPosition(s,d);this.showNewWindow(l,s,d,u.left,u.top)}}},{key:"cancelBindAccount",value:function(e,n){var a=this;S.Z.unBindAccount({state:e,tpType:Pe[n]}).then(function(l){l?a.setState((0,ae.default)({},n,{isBind:!1})):alert(_l("\u53D6\u6D88\u7ED1\u5B9A\u5931\u8D25"),2)}).catch()}},{key:"showNewWindow",value:function(e,n,a,l,s){window.open(e,"newWindow","width="+n+",height="+a+",left="+l+",top="+s+",toolbar=no,menubar=no,scrollbars=no,resizable=no,location=no, status=no")}},{key:"getWindowPosition",value:function(e,n){return{top:($(window).height()-n)/2,left:($(window).width()-e)/2}}},{key:"handleBindAccount",value:function(e){(0,U.H)({title:e==="email"?_l("\u7ED1\u5B9A\u90AE\u7BB1"):_l("\u7ED1\u5B9A\u624B\u673A\u53F7\u7801"),type:e,des:"",showStep:!0,callback:function(){location.reload()}})}},{key:"handleUnBindAccount",value:function(e){var n=this.state,a=n.email,l=n.mobilePhone,s=n.isVerify;if(!(l&&a&&s)){alert(_l("\u65E0\u6CD5\u89E3\u7ED1\uFF0C\u90AE\u7BB1\u548C\u624B\u673A\uFF0C\u8BF7\u81F3\u5C11\u4FDD\u7559\u5176\u4E00"),2);return}(0,U.H)({title:e==="email"?_l("\u89E3\u7ED1\u90AE\u7BB1"):_l("\u89E3\u7ED1\u624B\u673A\u53F7"),type:e,callback:function(u){var f=u.password;S.Z[e==="email"?"unbindEmail":"unbindMobile"]({password:(0,T.HI)(f)}).then(function(C){C===1?location.reload():alert(ge[C],2)})}})}},{key:"handleChangeAccount",value:function(e){(0,U.H)({title:e==="email"?_l("\u4FEE\u6539\u90AE\u7BB1"):_l("\u4FEE\u6539\u624B\u673A\u53F7\u7801"),type:e,showStep:!0,callback:function(){location.reload()}})}},{key:"sureSettings",value:function(e,n,a){Z.Z.editAccountSetting({settingType:le.Z.settingOptions[e],settingValue:n}).then(function(l){l?(alert(_l("\u8BBE\u7F6E\u6210\u529F")),_.isFunction(a)&&a()):alert(_l("\u64CD\u4F5C\u5931\u8D25"),2)}).catch()}},{key:"handleCancelRed",value:function(e){me.setAccountGuide({userGuideSetting:le.Z.guideType[e]}).then(function(){window.location.reload()})}},{key:"handleReviewEmail",value:function(){var e=_.throttle(function(n){n.ret===0&&S.Z.sendProjectBindEmail({ticket:n.ticket,randStr:n.randstr,captchaType:md.global.getCaptchaType()}).then(function(a){a?alert(_l("\u53D1\u9001\u6210\u529F")):alert(_l("\u53D1\u9001\u5931\u8D25"),2)})},1e4,{leading:!0});md.global.getCaptchaType()===1?new v.Z(e):new TencentCaptcha(md.global.Config.CaptchaAppId.toString(),e).show()}},{key:"renderWarning",value:function(){var e=this,n=this.state,a=n.needInit,l=n.showWarn;return t.createElement("div",{className:p()("initPasswordWarning",{Hidden:!(a&&l)})},t.createElement("span",{className:"warnColor"},t.createElement("span",{className:"icon-error1 Font16 mRight8 TxtMiddle"}),t.createElement("span",null,_l("\u5EFA\u8BAE\u60A8\u7ED1\u5B9A\u624B\u673A\u53F7\uFF0C\u7ED1\u5B9A\u540E\u53EF\u4EE5\u76F4\u63A5\u5728\u5B98\u7F51\u548C App \u767B\u5F55"))),t.createElement("span",{className:"icon-clear Font16 ThemeHoverColor3 Hand",onClick:function(){return e.setState({showWarn:!1})}}))}},{key:"render",value:function(){var e=this,n=this.state,a=n.email,l=n.mobilePhone,s=n.loading,d=n.isVerify,u=n.needInit,f=n.workBind,C=f===void 0?{}:f,k=n.editPasswordVisible,F=n.isNullCredential,B=md.global.Account.guideSettings.accountMobilePhone&&!l,K=md.global.Account.guideSettings.accountEmail&&(!a||!d);if(C.isBind){var ve=Be(Number(C.state))||{};R=R.map(function(g){return g.key==="workBind"?(0,se.default)({},g,ve):g})}return s?t.createElement(re.Z,{className:"mTop40"}):t.createElement("div",{className:"accountChartContainer"},t.createElement("div",{className:"Font17 Bold Gray mBottom40"},_l("\u8D26\u6237")),this.renderWarning(),t.createElement("div",{className:"accountRowItem clearfix"},t.createElement("div",{className:"accountLabel Gray_75"},_l("\u624B\u673A"),!l&&this.renderTips("mobilePhone")),t.createElement("span",null,t.createElement("span",{className:"Gray Relative"},l||_l("\u672A\u7ED1\u5B9A"),B&&t.createElement("span",{className:"warnLight warnLightMEPosition warnLightPhone"})),md.global.SysSettings.enableEditAccountInfo&&t.createElement(t.Fragment,null,l?t.createElement(t.Fragment,null,t.createElement("span",{className:"Hand ThemeColor3 Hover_49 mLeft24 mRight24",onClick:function(){return e.handleChangeAccount("mobile")}},_l("\u4FEE\u6539")),t.createElement("span",{className:"Hand ThemeColor3 Hover_49",onClick:function(){return e.handleUnBindAccount("mobile")}},_l("\u89E3\u7ED1"))):t.createElement("span",{className:"Hand ThemeColor3 Hover_49 mLeft24",onClick:function(){u?O({title:_l("\u7ED1\u5B9A\u624B\u673A\u53F7"),showFooter:!1,getData:e.getData}):e.handleBindAccount("mobile")}},_l("\u7ED1\u5B9A")))),this.renderRedDot(B,"accountMobilePhone")),u?null:t.createElement(t.Fragment,null,t.createElement("div",{className:"accountRowItem clearfix"},t.createElement("div",{className:"accountLabel Gray_75"},_l("\u90AE\u7BB1")),t.createElement("span",null,t.createElement("span",{className:"Gray Relative"},a?t.createElement("span",null,t.createElement("span",{className:p()(d?"":"Gray_9e mRight12")},a),!d&&md.global.SysSettings.enableEditAccountInfo&&t.createElement("span",null,_l("\u672A\u9A8C\u8BC1"))):md.global.SysSettings.enableEditAccountInfo?_l("\u672A\u7ED1\u5B9A"):"",K?t.createElement("span",{className:"warnLight warnLightMEPosition warnLightEmail"}):null),md.global.SysSettings.enableEditAccountInfo&&t.createElement(t.Fragment,null,a?t.createElement(t.Fragment,null,t.createElement("span",{className:"Hand ThemeColor3 Hover_49 mLeft24 mRight24",onClick:function(){return e.handleChangeAccount("email")}},_l("\u4FEE\u6539")),d?t.createElement("span",{className:"Hand ThemeColor3 Hover_49",onClick:function(){return e.handleUnBindAccount("email")}},_l("\u89E3\u7ED1")):t.createElement("span",{className:"Hand ThemeColor3 Hover_49",onClick:function(){return e.handleReviewEmail()}},_l("\u9A8C\u8BC1"))):t.createElement("span",{className:"Hand ThemeColor3 Hover_49 mLeft24",onClick:function(){return e.handleBindAccount("email")}},_l("\u7ED1\u5B9A")))),this.renderRedDot(K,"accountEmail")),t.createElement("div",{className:"accountRowItem"},t.createElement("div",{className:"accountLabel Gray_75"},_l("\u5BC6\u7801")),t.createElement("span",{className:"Hand ThemeColor3 Hover_49",onClick:function(){return e.setState({editPasswordVisible:!0})}},F?_l("\u8BBE\u7F6E"):_l("\u4FEE\u6539")))),!md.global.Config.IsLocal&&t.createElement("div",{className:"accountRowItem"},t.createElement("div",{className:"accountLabel Gray_75"},_l("\u8D26\u53F7\u7ED1\u5B9A")),R.map(function(g,oe){var A=g.key,M=g.label,xe=g.color,Se=g.icon,be=g.needHide,_e=be===void 0?!1:be,te=e.state[A]||{};return t.createElement("span",{className:p()({mLeft80:oe,Hidden:_e&&!te.isBind})},t.createElement("span",{className:p()("Font16",Se,te.isBind?xe:"Gray_9e")}),t.createElement("span",{className:"Gray mLeft12"},M),te.isBind&&t.createElement("span",{className:"mLeft8 Gray_9e"},_l("\u5DF2\u7ED1\u5B9A\uFF1A%0",te.nickName)),!_e&&t.createElement("span",{className:"Hand ThemeColor3 Hover_49 mLeft24",onClick:function(){return e.handleBind(A)}},te.isBind?_l("\u89E3\u7ED1"):_l("\u7ED1\u5B9A")))})),md.global.Config.IsPlatformLocal&&t.createElement("div",{className:"accountRowItem"},t.createElement("div",{className:"accountLabel Gray_75"},_l("\u8D26\u6237\u6CE8\u9500")),t.createElement("div",{className:"logout Hand",onClick:this.dealLoagout},_l("\u6CE8\u9500"))),t.createElement("div",{className:"Font17 Bold Gray mBottom40 mTop20"},_l("\u9690\u79C1")),this.joinFriend(),t.createElement(j.Z,{title:F?_l("\u8BBE\u7F6E\u5BC6\u7801"):_l("\u4FEE\u6539\u5BC6\u7801"),showFooter:!1,visible:k,onCancel:function(){return e.setState({editPasswordVisible:!1})},className:"editPasswordDialogId"},t.createElement(he,{isNullCredential:F,closeDialog:function(){return e.setState({editPasswordVisible:!1})}})))}}]),c}(t.Component)},8736:(ye,ne,i)=>{i.d(ne,{H:()=>pe});var re=i(69288),se=i(72557),ae=i(88106),j=i(85105),ce=i.n(j),Ce=i(99663),ie=i(22600),we=i(49135),W=i(93196),H=i(86735),m=i(67294),de=i(14260),ue=i.n(de),X=i(60300),Q=i.n(X),z=i(1952),V=i(59911),J=i(86559),t=i(66344),S=i(15577),Z=i(71893),me=(0,H.Z)([`
  width: 100%;
  line-height: 38px;
  height: 38px;
  background-color: #f5f5f5;
  border-radius: 3px;
  padding-left: 10px;
  border: 0px;
  padding-right: 40px;
  box-sizing: border-box;
`],[`
  width: 100%;
  line-height: 38px;
  height: 38px;
  background-color: #f5f5f5;
  border-radius: 3px;
  padding-left: 10px;
  border: 0px;
  padding-right: 40px;
  box-sizing: border-box;
`]),Ee=(0,H.Z)([`
  margin-bottom: 20px;
  .iti {
    width: 100%;
  }
`],[`
  margin-bottom: 20px;
  .iti {
    width: 100%;
  }
`]),G=(0,H.Z)([`
  .stepName {
    justify-content: space-between;
  }
  .stepline {
    width: 100%;
    height: 4px;
    border-radius: 2px;
    background-color: `,`;
    position: relative;
    .dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      position: absolute;
      top: -4px;
      border: `,`;
      background-color: `,`;
    }
    &:first-child {
      margin-left: 8px;
      background-color: #1e88e5;
      .dot {
        left: 15px;
        border: 2px solid #1e88e5;
        background-color: #1e88e5;
      }
    }
    &:nth-child(2) {
      margin-right: 8px;
      .dot {
        right: 15px;
      }
    }
  }
`],[`
  .stepName {
    justify-content: space-between;
  }
  .stepline {
    width: 100%;
    height: 4px;
    border-radius: 2px;
    background-color: `,`;
    position: relative;
    .dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      position: absolute;
      top: -4px;
      border: `,`;
      background-color: `,`;
    }
    &:first-child {
      margin-left: 8px;
      background-color: #1e88e5;
      .dot {
        left: 15px;
        border: 2px solid #1e88e5;
        background-color: #1e88e5;
      }
    }
    &:nth-child(2) {
      margin-right: 8px;
      .dot {
        right: 15px;
      }
    }
  }
`]),T=Z.ZP.input(me),Y=Z.ZP.div(Ee),fe=Z.ZP.div(G,function(I){var p=I.step;return p===1?" #ececec":"#1e88e5"},function(I){var p=I.step;return p===1?"2px solid #ececec":"2px solid #1e88e5"},function(I){var p=I.step;return p===1?" #ececec":"#1e88e5"}),L=null,he=function(I){(0,W.default)(p,I);function p(q){(0,Ce.default)(this,p);var o=(0,we.default)(this,(p.__proto__||ce()(p)).call(this,q));return o.changeValue=function(h,w){var v=h.target.value;o.setState((0,ae.default)({},w,v.trim()))},o.clickNext=function(){o.setState({nextBtnDisabled:!0});var h=o.props,w=h.showStep,v=h.callback,D=v===void 0?function(){}:v,N=h.onCancel,P=N===void 0?function(){}:N,b=o.state.password;(0,S.Gv)({checkNeedAuth:!1,ignoreAlert:!1,customActionName:"checkAccount",password:b,success:function(){o.setState({nextBtnDisabled:!1}),w?o.setState({step:2},function(){setTimeout(function(){o.initTel()},200)}):(D({password:b}),P())},fail:function(){o.setState({nextBtnDisabled:!1})}})},o.initTel=function(){o.mobile&&(o.iti&&o.iti.destroy(),o.iti=ue()(o.mobile,{loadUtils:"",initialCountry:_.get(md,"global.Config.DefaultConfig.initialCountry")||"cn",preferredCountries:_.get(md,"global.Config.DefaultConfig.preferredCountries")||["cn"],utilsScript:Q(),separateDialCode:!0,showSelectedDialCode:!0}))},o.validate=function(){var h=o.state.email,w=o.props.type;if(w==="email"){if(!h){alert(_l("\u8BF7\u8F93\u5165\u90AE\u7BB1"),3),o.email.focus();return}if(!t.Z.isEmail(h)){alert(_l("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1"),3),o.email.focus();return}}else{var v=o.iti.isValidNumber();if(!v){alert(_l("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801"),3),o.mobile.focus();return}}return!0},o.sendChangeAccountVerifyCode=function(){if(o.validate()){var h=o.props.type,w=o.state.email,v=o,D=function(P){P.ret===0&&(v.setState({sendCodeLoading:!0,sendCodeTxt:_l("\u53D1\u9001\u4E2D...")}),V.Z.sendVerifyCode({account:h==="email"?w:v.iti.getNumber(),ticket:P.ticket,randStr:P.randstr,captchaType:md.global.getCaptchaType()}).then(function(b){if(b===1)alert(_l("\u9A8C\u8BC1\u7801\u53D1\u9001\u6210\u529F"),1),v.countdown();else{var E=h==="email"?_l("\u90AE\u7BB1"):_l("\u624B\u673A\u53F7");b===2?alert(_l("\u53D1\u9001\u5931\u8D25\uFF0C\u65B0%0\u4E0E\u73B0\u6709%1\u4E00\u81F4",E,E),2):b===8?alert(_l("\u9A8C\u8BC1\u7801\u9519\u8BEF"),3):alert(b===9?_l("\u6B64%0\u5DF2\u88AB\u5176\u5B83\u5E10\u53F7\u7ED1\u5B9A",E):_l("\u9A8C\u8BC1\u7801\u53D1\u9001\u5931\u8D25"),2),v.setState({sendCodeLoading:!1,sendCodeTxt:_l("\u83B7\u53D6\u9A8C\u8BC1\u7801")})}}))};md.global.getCaptchaType()===1?new J.Z(D):new TencentCaptcha(md.global.Config.CaptchaAppId.toString(),D).show()}},o.countdown=function(){var h=30;L=setInterval(function(){h<=0?(o.setState({sendCodeLoading:!1,sendCodeTxt:_l("\u91CD\u65B0\u53D1\u9001\u9A8C\u8BC1\u7801")}),clearInterval(L)):(o.setState({sendCodeTxt:_l("%0\u79D2\u540E\u91CD\u65B0\u53D1\u9001",h)}),h--)},1e3)},o.updateAccount=function(){if(o.validate()){var h=o.props,w=h.type,v=h.callback,D=v===void 0?function(){}:v,N=o.state,P=N.verifyCode,b=N.email;if(!P){alert(_l("\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"),3),o.verifyCode.focus();return}o.setState({submitLoading:!0}),V.Z.editAccount({account:w==="email"?b:o.iti.getNumber(),verifyCode:P}).then(function(E){if(E===1){var ee=w==="email"?_l("\u90AE\u7BB1"):_l("\u624B\u673A\u53F7");alert(_l("%0\u4FEE\u6539\u7ED1\u5B9A\u6210\u529F",ee),1),window.localStorage.removeItem("LoginCheckList");var O=window.localStorage.getItem("LoginName");O&&(t.Z.isEmail(O)&&w==="email"||!t.Z.isEmail(O)&&w!=="email")&&safeLocalStorageSetItem("LoginName",w==="email"?b:o.iti.getNumber()),setTimeout(function(){D()},2e3)}else E===8?alert(_l("\u9A8C\u8BC1\u7801\u9519\u8BEF"),2):E===2?alert(_l("\u4FEE\u6539\u7684\u8D26\u53F7\u4E0E\u539F\u6765\u76F8\u540C"),3):alert(_l("%0\u4FEE\u6539\u5931\u8D25",accountTypeDesc),2)})}},o.state={password:"",email:"",verifyCode:"",nextBtnDisabled:"",sendCodeLoading:"",sendCodeTxt:_l("\u53D1\u9001\u9A8C\u8BC1\u7801"),step:1,submitLoading:!1},o.iti=null,o}return(0,ie.default)(p,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var o=this,h=this.props,w=h.title,v=h.des,D=h.showStep,N=h.type,P=h.onCancel,b=P===void 0?function(){}:P,E=this.state,ee=E.nextBtnDisabled,O=E.sendCodeLoading,U=E.step,le=E.sendCodeTxt;return m.createElement(re.Z,{title:w,visible:!0,onCancel:b,showFooter:!1},v&&m.createElement("div",{className:"Gray_9 Font13 mBottom5"},v),D&&m.createElement(fe,{step:U},m.createElement("div",{className:"stepName flexRow mBottom15"},m.createElement("div",null,_l("\u9A8C\u8BC1\u8EAB\u4EFD")),m.createElement("div",null,N==="email"?_l("\u9A8C\u8BC1\u90AE\u7BB1\u5730\u5740"):_l("\u9A8C\u8BC1\u65B0\u624B\u673A\u53F7\u7801"))),m.createElement("div",{className:"flexRow mBottom20"},m.createElement("div",{className:"flex stepline"},m.createElement("div",{className:"dot"})),m.createElement("div",{className:"flex stepline"},m.createElement("div",{className:"dot"})))),U===2?m.createElement(m.Fragment,null,N=="email"?m.createElement(Y,null,m.createElement(T,{type:"text",ref:function(y){return o.email=y},placeholder:_l("\u8BF7\u8F93\u5165\u90AE\u7BB1\u5730\u5740"),className:"inputBox txtEmail w100",maxlength:64,onChange:function(y){return o.changeValue(y,"email")}})):m.createElement(Y,null,m.createElement(T,{type:"text",ref:function(y){return o.mobile=y},placeholder:_l("\u8BF7\u8F93\u5165\u624B\u673A\u53F7"),className:"inputBox txtMobilePhone w100 box-sizing",maxlength:64})),m.createElement("div",{className:"flexRow mBottom20"},m.createElement(T,{type:"text",ref:function(y){return o.verifyCode=y},placeholder:_l("\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"),className:"mRight15 inputBox txtVerifyCode flex",maxlength:6,onChange:function(y){return o.changeValue(y,"verifyCode")},onKeyUp:function(y){y.keyCode===13&&o.sendChangeAccountVerifyCode()}}),m.createElement("button",{disabled:O,className:"Button ming Button--primary Button--medium pLeft0 pRight0",style:{minWidth:120},onClick:this.sendChangeAccountVerifyCode},le)),m.createElement("button",{className:"Button ming Button--primary Button--medium btnUpdateAccount w100",onClick:this.updateAccount},_l("\u786E\u8BA4"))):m.createElement(m.Fragment,null,m.createElement(se.Z,{showAccountEmail:N==="email",className:"mBottom10",showSubTitle:!1,onChange:function(y){var ge=y.password;return o.setState({password:ge})}}),m.createElement("button",{type:"button",className:"btnUnBind ming Button Button--primary Button--medium w100 Font14 mBottom20",disabled:ee,onClick:this.clickNext},_l("\u4E0B\u4E00\u6B65"))))}}]),p}(m.Component),pe=function(p){return(0,z.Z)(he,p)}}}]);
