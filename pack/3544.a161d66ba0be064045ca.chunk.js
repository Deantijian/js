"use strict";(self.webpackChunkmingdao_web=self.webpackChunkmingdao_web||[]).push([[3544],{53544:(R,f,n)=>{n.r(f),n.d(f,{default:()=>T});var Z=n(10524),C=n(31059),y=n(33867),g=n(85105),S=n.n(g),F=n(99663),B=n(22600),I=n(49135),k=n(93196),e=n(67294),P=n(21),d=n(64712),b=n(93967),o=n.n(b),A=n(48025),N,V=[5e3,3e3,2e3,1e3],T=(0,P.Z)(N=function(x){(0,k.default)(i,x);function i(){(0,F.default)(this,i);var l=(0,I.default)(this,(i.__proto__||S()(i)).call(this));return l.state={step:1,isInput:!1,productPrice:5e3,inputValue:_l("\u5176\u4ED6\u91D1\u989D"),balance:0,needSalesAssistance:!0,isPay:!1},l}return(0,B.default)(i,[{key:"componentDidMount",value:function(){var t=this;d.Z.AdminController.getHidBalance({projectId:d.Z.projectId}).then(function(a){t.setState({balance:parseInt(a,10)||0})})}},{key:"handleChange",value:function(t){this.setState({productPrice:t,isInput:!1,inputValue:_l("\u5176\u4ED6\u91D1\u989D")})}},{key:"handleInputFocus",value:function(){this.setState({isInput:!0,inputValue:Number(this.state.inputValue)?this.state.inputValue:200})}},{key:"handleBack",value:function(){this.props.history.go(-1)}},{key:"handleInputChange",value:function(t){var a=parseInt(t.target.value)||200;a>999999&&(a=999999,alert(_l("\u6700\u591A\u5145\u503C\u91D1\u989D 999999 \u5143"),3)),this.setState({inputValue:a})}},{key:"setStep",value:function(t){this.setState({step:t})}},{key:"handleCheckBox",value:function(t){this.setState({needSalesAssistance:t.target.checked})}},{key:"handlePay",value:function(){var t=this;this.setState({isPay:!0});var a=this.state,c=a.isInput,m=a.inputValue,p=a.productPrice,u=a.needSalesAssistance,E=c?m:p;A.Z.addRechargeOrder({projectId:d.Z.projectId,amount:E,needSalesAssistance:u}).then(function(h){h?alert(_l("\u8BA2\u5355\u5DF2\u521B\u5EFA\u6210\u529F\uFF0C\u6B63\u5728\u8F6C\u5230\u4ED8\u6B3E\u9875..."),1,500,function(){window.location.href="/admin/waitingpay/"+d.Z.projectId+"/"+h.orderId}):(t.setState({isPay:!1}),alert(_l("\u64CD\u4F5C\u5931\u8D25"),2))})}},{key:"render",value:function(){var t=this,a=this.state,c=a.step,m=a.productPrice,p=a.inputValue,u=a.isInput,E=a.balance,h=a.needSalesAssistance,H=a.isPay,v=u?p:m;return e.createElement("div",{className:"warpCenter valueAddServerContent"},e.createElement("div",{className:"valueAddServerHeader"},e.createElement(y.Z,{icon:"backspace",className:"Hand mRight18 TxtMiddle Font24",onClick:function(){return t.handleBack()}}),e.createElement("span",{className:"Font17 Bold"},_l("\u5145\u503C"))),e.createElement("div",{className:"warpOneStep"},e.createElement("div",{className:o()("stepTitle",{color_bd:c!==1})},e.createElement("div",{className:"stepNum"},e.createElement("span",{className:"Bold Font12"},"1")),e.createElement("span",null,_l("\u9009\u62E9\u5145\u503C\u91D1\u989D"))),e.createElement("div",{className:o()("Gray_9 Font13 Normal mTop10",{Hidden:c!==1})},_l("\u5982\u9700\u7279\u522B\u5B9A\u5236\uFF0C\u8BF7\u8054\u7CFB\u7535\u8BDD 400-665-6655")),e.createElement("div",{className:"stepContent"},c===1?e.createElement("div",{className:"infoEdit"},e.createElement("ul",{className:"viewRow productList"},V.map(function(s,r){return e.createElement("li",{key:r,onClick:function(){return t.handleChange(s)},className:o()(m===s&&!u?"selectProduct":"")},"\uFFE5",s)}),e.createElement("li",{className:o()(u?"selectProduct":"")},e.createElement("input",{type:"text",className:"txtCustomPrice",placeholder:_l("\u8BF7\u8F93\u5165\u91D1\u989D"),value:p,onFocus:this.handleInputFocus.bind(this),onChange:function(r){return t.handleInputChange(r)},onBlur:function(r){t.setState({inputValue:Number(r.target.value)&&Number(r.target.value)>=200?r.target.value:200})}}))),e.createElement("div",null,e.createElement("div",{className:"oneStepLeft"},_l("\u603B\u8BA1")),e.createElement("span",{className:"Font20 color_b"},"\uFFE5"),e.createElement("span",{className:"Font20 color_b Bold"},v),e.createElement("span",{className:"Gray_9 mLeft5"},_l("\u8D2D\u4E70\u540E\u589E\u503C\u670D\u52A1\u8D26\u6237\u91D1\u989D\uFF1A%0 \u5143",parseFloat(v)+parseFloat(E)))),e.createElement("div",{className:"pTop30"},e.createElement("button",{type:"button",className:"ming Button Button--primary nextBtn",onClick:function(){return t.setStep(2)}},_l("\u4E0B\u4E00\u6B65")))):e.createElement("div",{className:"infoShow"},e.createElement("div",{className:"mTop16 mBottom24 Font13 Gray_9"},e.createElement("span",{className:"mRight8"},_l("\u603B\u8BA1")),e.createElement("span",null,"\uFFE5",v)),e.createElement("button",{type:"button",className:"ming Button Button--link ThemeColor3 pAll0 Hover_49",onClick:function(){return t.setStep(1)}},_l("\u4FEE\u6539"))))),e.createElement("div",{className:"stepDiviceLine"}),e.createElement("div",{className:"warpTowStep"},e.createElement("div",{className:o()("stepTitle",{color_bd:c!==2})},e.createElement("div",{className:"stepNum"},e.createElement("span",{className:"Bold Font12"},"2")),e.createElement("span",null,_l("\u751F\u6210\u8BA2\u5355"))),e.createElement("div",{className:o()("stepContent",{Hidden:c!==2})},e.createElement("div",{className:"mTop30"},e.createElement("span",{className:"Font13 mRight8 Gray_9"},_l("\u603B\u8BA1\uFF1A")),e.createElement("span",{className:"Font24 Bold color_b"},"\uFFE5",v)),e.createElement("div",{className:"pTop40"},e.createElement("button",{type:"button",disabled:H,className:"ming Button Button--primary nextBtn",onClick:function(){return t.handlePay()}},_l("\u786E\u8BA4\u4E0B\u5355"))),e.createElement("div",{className:"warpNeedHelp"},e.createElement(C.default,{onChange:this.handleCheckBox.bind(this),checked:h}," ",_l("\u6211\u5E0C\u671B\u5F97\u5230\u9500\u552E\u4EE3\u8868\u7684\u534F\u52A9")," ")))))}}]),i}(e.Component))||N}}]);
