"use strict";(self.webpackChunkmingdao_web=self.webpackChunkmingdao_web||[]).push([[7015],{67015:(F,h,t)=>{t.r(h),t.d(h,{default:()=>C});var v=t(88239),E=t(33867),j=t(6100),f=t(63239),T=t.n(f),L=t(85105),P=t.n(L),S=t(99663),O=t(22600),k=t(49135),D=t(93196),l=t(67294),R=t(50533),g=t(63445),n=t(93967),r=t.n(n),o=t(15577),d=t(75915),y=t(96486),i=t.n(y),I={markedGroup:_l("\u661F\u6807"),personalGroups:_l("\u4E2A\u4EBA"),projectGroups:_l("\u7EC4\u7EC7")},G=function(m){(0,D.default)(a,m);function a(c){(0,S.default)(this,a);var e=(0,k.default)(this,(a.__proto__||P()(a)).call(this,c));return e.renderlist=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],u=arguments[1];return l.createElement("div",{key:u,className:"groupItem"},!i().isEmpty(p)&&l.createElement("div",{className:"Gray_75 Font13 groupTitle"},I[u]),p.map(function(s,A){return l.createElement("div",{className:r()("groupItemDetail flexRow",{borderTop:A===0}),key:s.id},l.createElement("div",{className:"flex flexRow",onClick:function(){safeLocalStorageSetItem("currentGroupInfo",T()({id:s.id,groupType:s.groupType})),window.mobileNavigateTo("/mobile/groupAppList/"+s.id+"/"+s.groupType)}},l.createElement("div",{className:"groupItemIcon"},s.iconUrl?l.createElement(j.Z,{url:s.iconUrl,fill:"#9d9d9d",size:20,addClassName:"mTop16"}):l.createElement(E.Z,{className:"Gray_9d Font20",icon:s.icon})),l.createElement("div",{className:r()("groupItemName flex",{currentGroupLast:A===p.length-1})},s.name,s.appIds&&!i().isEmpty(s.appIds)&&l.createElement("span",{className:"Gray_9e Font17 mLeft10"},s.appIds.length))),l.createElement("div",{className:r()("space",{currentGroupLast:A===p.length-1})}),l.createElement("div",{className:r()("markedGroup",{currentGroupLast:A===p.length-1}),onClick:function(){e.props.dispatch(g.markedGroup((0,v.default)({},s,{projectId:e.state.projectId,isMarked:!s.isMarked})))}},l.createElement(E.Z,{icon:"h5_star",className:"Font20",style:{color:s.isMarked?"#ffc400":"#9e9e9e"}})))}))},e.state={},e}return(0,O.default)(a,[{key:"componentDidMount",value:function(){var e=(0,o.vo)(localStorage.getItem("currentProjectId")||(md.global.Account.projects[0]||{}).projectId),p=i().isEmpty(e)?{projectId:"external",companyName:_l("\u5916\u90E8\u534F\u4F5C")}:e;this.setState({projectId:p.projectId}),this.props.dispatch(g.getMyApp(p.projectId))}},{key:"render",value:function(){var e=this.props.myAppData,p=e===void 0?{}:e,u=p.markedGroup,s=u===void 0?[]:u,A=p.personalGroups,M=A===void 0?[]:A,H=p.projectGroups,N=H===void 0?[]:H;return l.createElement("div",{className:"appGroupList"},!i().isEmpty(s)&&this.renderlist(s,"markedGroup"),!i().isEmpty(M)&&this.renderlist(M,"personalGroups"),!i().isEmpty(N)&&this.renderlist(N,"projectGroups"),l.createElement(d.Z,{icon:"home",onClick:function(){window.mobileNavigateTo("/mobile/dashboard")}}))}}]),a}(l.Component);const C=(0,R.$j)(function(m){var a=m.mobile,c=a.isHomeLoading,e=a.myAppData;return{myAppData:e,isHomeLoading:c}})(G)},63445:(F,h,t)=>{t.r(h),t.d(h,{clearAllCollectCharts:()=>R,getAllCollectCharts:()=>l,getAllFavorites:()=>D,getHomePlatformSetting:()=>O,getMyApp:()=>P,markedGroup:()=>S,myPlatform:()=>k});var v=t(88239),E=t(85315),j=t(96486),f=t.n(j),T=t(91088),L=t(10358),P=function(n){return function(r){r({type:"MOBILE_FETCHHOMELIST_START"}),T.Z.getMyApp({projectId:n,containsLinks:!0}).then(function(o){var d=o.markedGroupIds,y=d===void 0?[]:d,i=o.personalGroups,I=i===void 0?[]:i,G=o.projectGroups,C=G===void 0?[]:G,m=o.apps,a=m===void 0?[]:m,c=y.map(function(e){return f().find([].concat((0,E.Z)(I),(0,E.Z)(C)),{id:e})}).filter(f().identity).map(function(e){return(0,v.default)({apps:a.filter(function(p){return f().includes(p.groupIds,e.id)})},e)});r({type:"UPDATE_MYAPPLIST",data:(0,v.default)({},o,{markedGroup:c})}),r({type:"PLATE_FORM_DATA",data:(0,v.default)({},o,{markedGroup:c})}),r({type:"MOBILE_FETCHHOMELIST_SUCCESS"})})}},S=function(n){var r=n.id,o=n.isMarked,d=n.groupType,y=n.projectId;return function(i,I){T.Z.markedGroup({id:r,isMarked:o,groupType:d,projectId:y}).then(function(G){if(G){var C=I().mobile||{},m=C.myAppData,a=m===void 0?{}:m,c=d===0?(a.personalGroups||[]).map(function(u){return u.id===r?(0,v.default)({},u,{isMarked:o}):u}):a.personalGroups,e=d===1?(a.projectGroups||[]).map(function(u){return u.id===r?(0,v.default)({},u,{isMarked:o}):u}):a.projectGroups,p=d===0?c:e;i({type:"UPDATE_MYAPPLIST",data:(0,v.default)({},a,{personalGroups:c,projectGroups:e,markedGroup:f().unionBy(o?a.markedGroup.concat(f().find(p,{id:r})).filter(f().identity):a.markedGroup.filter(function(u){return u.id!==r}),"id")})}),alert(o?_l("\u661F\u6807\u6210\u529F"):_l("\u53D6\u6D88\u661F\u6807\u6210\u529F"))}else alert(o?_l("\u661F\u6807\u5931\u8D25"):_l("\u53D6\u6D88\u661F\u6807\u5931\u8D25"),2)})}},O=function(n){return function(r){T.Z.getHomePlatformSetting({projectId:n}).then(function(o){r({type:"PLATE_FORM_SETTING",data:o})})}},k=function(n){return function(r){r({type:"MOBILE_FETCHHOMELIST_START"}),T.Z.myPlatform({projectId:n,containsLinks:!0}).then(function(o){var d=o.markedGroupIds,y=d===void 0?[]:d,i=o.personalGroups,I=i===void 0?[]:i,G=o.projectGroups,C=G===void 0?[]:G,m=o.apps,a=m===void 0?[]:m,c=y.map(function(e){return f().find([].concat((0,E.Z)(I),(0,E.Z)(C)),{id:e})}).filter(f().identity).map(function(e){return(0,v.default)({apps:a.filter(function(p){return f().includes(p.groupIds,e.id)})},e)});r({type:"MOBILE_FETCHHOMELIST_SUCCESS"}),r({type:"PLATE_FORM_DATA",data:(0,v.default)({},o,{markedGroup:c})})})}},D=function(n){return function(r,o){L.Z.getAllFavorites({projectId:n,isRefresh:1}).then(function(d){r({type:"COLLECT_RECORDS",data:d})})}},l=function(n){return function(r,o){L.Z.getAllFavorites({projectId:n,type:2,isRefresh:1}).then(function(d){r({type:"COLLECT_CHARTS",data:d})})}},R=function(){return function(n){n({type:"COLLECT_CHARTS",data:[]})}}}}]);
