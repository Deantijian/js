(self.webpackChunkmingdao_web=self.webpackChunkmingdao_web||[]).push([[1284,6924,7592],{19807:()=>{"use strict"},56933:()=>{"use strict"},6653:()=>{"use strict"},28164:()=>{"use strict"},92417:()=>{"use strict"},92876:()=>{"use strict"},66629:()=>{"use strict"},67112:()=>{"use strict"},80741:()=>{"use strict"},7823:()=>{"use strict"},62202:()=>{"use strict"},37974:()=>{"use strict"},36674:()=>{"use strict"},51205:()=>{"use strict"},14828:()=>{"use strict"},63419:lt=>{lt.exports=`<div class="boxSizing p82 pRight26 relative Font14 mTop10 topHeight">
    {{?md.global.Account.projects.length}}
    <div class="createTaskLabel">{{=_l('\u5F52\u5C5E')}}</div>
    <div class="createTaskNetwork" id="createTaskNetwork">
        <span class="createTaskNetworkName">{{!it.companyName}}</span><i class="icon-arrow-down-border"></i>
    </div>
    <ul class="createTaskNetworkList boxShadow5 boderRadAll_3 Hidden" id="createTaskNetworkList">
        {{~md.global.Account.projects:project}}
        <li class="ThemeBGColor3" data-id="{{=project.projectId}}">
            <i class="icon-company"></i>{{!project.companyName}}
        </li>
        {{~}}
        <li class="ThemeBGColor3" data-id=""><i class="icon-charger"></i>{{=_l('\u4E2A\u4EBA')}}</li>
    </ul>
    {{?}}
    <div class="createTaskFolder {{=md.global.Account.projects.length ? '' : 'createUpdatePosition'}}">
        <span class="createTaskFolderColor">{{=_l('\u9879\u76EE')}}</span>
        <span class="createTaskFolderName">{{!it.folderName ? it.folderName : '...'}}</span>
        <input
            type="text"
            value="{{=it.folderName ? it.folderName : ''}}"
            class="txtTaskFolder boderRadAll_3 Hidden Font14 ThemeBorderColor3"
            id="txtTaskFolder"
        />
        <div class="linkageFolder boderRadAll_3 boxShadow5 Hidden">
            <ul></ul>
            <div class="nullFolder Hidden ThemeColor3" data-folderid="">
                {{=_l('\u521B\u5EFA\u201C%0\u201D\u9879\u76EE', '<span class="folderListName"></span>')}}
            </div>
        </div>
    </div>
</div>
<div class="boxSizing p82 pRight26 relative Font14 createTaskTitle">
    <div class="createTaskLabel">{{=_l('\u540D\u79F0')}}</div>
    <input
        type="text"
        id="txtTaskName"
        maxlength="100"
        placeholder="{{=_l('\u8BF7\u8F93\u5165\u4EFB\u52A1\u540D\u79F0') }}"
        spellcheck="false"
        class="boxSizing boderRadAll_3 ThemeBorderColor3 Font14"
        value="{{!it.TaskName }}"
    />
</div>
<div class="boxSizing p82 pRight26 relative Font14 taskUpdateChargeMain">
    <div class="createTaskLabel">{{=_l('\u8D1F\u8D23\u4EBA')}}</div>
    {{var charge = it.ChargeArray[0]; }}
    <span id="taskUserBox" class="circle" data-id="{{=charge.accountId }}">
        <img src="{{=charge.avatar }}" class="imgWidth" alt="{{=_l('\u8D1F\u8D23\u4EBA\u5934\u50CF') }}" />
    </span>
    <span class="taskUpdateCharge icon-task-folder-charge pointer ThemeColor3" id="taskUpdateCharge"></span>
</div>
<div class="boxSizing p82 pRight26 relative Font14 Hidden" id="taskMembersBox">
    <div class="createTaskLabel">{{=_l('\u4EFB\u52A1\u53C2\u4E0E\u8005')}}</div>
    <span class="createTaskAddMemberBox">
        <i class="icon-task-add-member-circle createTaskAddMember ThemeColor3"></i>
    </span>
</div>
<div class="boxSizing p82 pRight26 relative Font14 {{=it.Deadlines ? '' : 'Hidden'}}" id="createTaskDate">
    <div class="createTaskLabel">{{=_l('\u8D77\u6B62\u65F6\u95F4')}}</div>
    <!-- <input class="boderRadAll_3 boxSizing ThemeBorderColor3" id="txtLastDate" type="text" placeholder="{{=_l('\u672A\u6307\u5B9A\u65E5\u671F')}}" readonly="readonly" value="{{=it.Deadlines }}" /> -->
    <div class="boderRadAll_3 boxSizing ThemeBorderColor3" id="txtLastDate"></div>
</div>
<div class="boxSizing p82 pRight26 relative Font14 Hidden" style="height: 38px;"  id="createTaskStage">
    <div class="createTaskLabel">{{=_l('\u770B\u677F')}}</div>
    <input type="hidden" id="folderStage" />
    <span class="InlineBlock w100" id="folderStageBox"></span>
</div>
<div class="boxSizing p82 pRight26 relative Font14 {{=it.Description ? '' : 'Hidden'}}" id="createTaskDesc">
    <div class="createTaskLabel">{{=_l('\u63CF\u8FF0\u548C\u9644\u4EF6')}}</div>
    <textarea
        type="text"
        id="txtDescriptionbox"
        spellcheck="false"
        class="txtDescriptionbox boxSizing boderRadAll_3 ThemeBorderColor3"
        value=""
        placeholder="{{=_l('\u586B\u5199\u63CF\u8FF0\u2026')}}"
    >
{{=it.Description }}</textarea
    >
    <div id="Attachment_updater_createTask"></div>
</div>
<div class="boxSizing p82 relative taskTabs Font14" id="taskTabs">
    <span data-type="member" class="ThemeBorderColor3 ThemeColor3">{{=_l('\u4EFB\u52A1\u53C2\u4E0E\u8005')}}</span>
    {{?!it.Deadlines}}<span data-type="date" class="ThemeBorderColor3 ThemeColor3">{{=_l('\u8BBE\u7F6E\u65F6\u95F4')}}</span>{{?}}
    {{?!it.Description}}<span data-type="desc" class="ThemeBorderColor3 ThemeColor3">{{=_l('\u63CF\u8FF0\u548C\u9644\u4EF6')}}</span>{{?}}
</div>
<div class="boxSizing pLeft26 relative createTaskOperator">
    <span class="boderRadAll_3 ThemeBGColor3" id="taskSubmitBtn">{{=_l('\u521B\u5EFA')}}</span>
</div>
`},35572:lt=>{lt.exports=`<div class="editBox editBoxMaxHeight">
    <div class="postMessageList">
        <ul class='clearfix pTop15'>
            {{~ it.data:member:i}}
            {{? member.id !== md.global.Account.accountId}}
            <li mobile="{{! member.mobile }}" email="{{! member.email }}" uid="{{! member.id }}" type="{{! member.type }}">
                <span class="postCheck markUnCompleteSmall"></span>
                <img src="{{! member.head }}" class="calendarPostLabelImg">
                <span class="postMessageName">{{! member.name }} {{!i == 0 ? _l('\uFF08\u7EC4\u7EC7\u8005\uFF09') : '' }}</span>
            </li>
            {{?}}
            {{~}}
        </ul>
    </div>
</div>
<div class="editBox">
    <div class="postOperator">
        <span class="markUnCompleteSmall" id="postAllCheck"></span> {{=_l('\u5168\u9009') }} <span class="postOperatorM">|</span>
        <a href="javascript:void(0);" class="postOperatorM ThemeColor3" id="btnprivate" type="1">{{= _l('\u7FA4\u53D1\u6D88\u606F') }}</a>
        <a href="javascript:void(0);" class="postOperatorM" id="btnEmail" type="2">{{= _l('\u7FA4\u53D1\u90AE\u4EF6') }}</a>
    </div>
    <div class="postContent">
        <div class="postContentPrivate" type="1" id="btnSendType">
            <span class="postContentArrowW"></span>
            <span class="postContentArrowN"></span>
        </div>
        <textarea id="postContent" class="borderRadius" >{{! it.defaultContent }}</textarea>
        <div class="postContentMessage">
            {{= '\u975E\u901A\u8BAF\u5F55\u8054\u7CFB\u4EBA\u7684\uFF0C\u60A8\u53EF\u4EE5\u901A\u8FC7\u90AE\u4EF6\u8054\u7CFB\u4ED6\u4EEC\u3002 '}}
        </div>
    </div>
</div>
`},51598:lt=>{lt.exports=`<div class="pTop20 pBottom20 reInvitedMain1">
    <span>
        {{= _l('\u66F4\u65B0\u65E5\u7A0B\u4FE1\u606F\u540E\uFF0C\u662F\u5426\u9700\u8981\u901A\u77E5\u53C2\u4E0E\u4EBA\u5458\u91CD\u65B0\u786E\u8BA4\uFF1F') }}
    </span>
</div>
<div class="pBottom30 reInvitedMain2">
    <a class="ming Button--tiny Button--primary Button" href="javascript: void(0);" data-type='save'>{{=_l('\u4E0D\u9700\u8981') }}</a>
    <a class="ming Button--tiny Button--primary Button" href="javascript: void(0);" data-type='saveAndInvite'>{{=_l('\u901A\u77E5\u91CD\u65B0\u786E\u8BA4') }}</a>
</div>
`},29985:lt=>{lt.exports=`<div class="repeatCalendarOperatorMain">
    <div class="repeatCalendarOperatorModel">
        <span id="btnOperatorAlone" class="repeatCalendarOperatorBtn pointer {{?it.isRecurChange && it.isEdit}}disabled{{?}}">{{=_l('\u4EC5\u6B64\u65E5\u7A0B')}}</span>{{! it.isRecurChange && it.isEdit ? _l('\u65E5\u7A0B\u91CD\u590D\u6027\u4FEE\u6539\uFF0C\u4E0D\u652F\u6301\u6B64\u64CD\u4F5C') : _l('\u6B64\u64CD\u4F5C\u4EC5\u66F4\u6539\u5355\u4E2A\u65E5\u7A0B\uFF0C\u5176\u4ED6\u65E5\u7A0B\u4E0D\u53D7\u5F71\u54CD') }}
    </div>
    <div class="repeatCalendarOperatorModel">
        <span id="btnOperatorAll" class="repeatCalendarOperatorBtn pointer">{{=_l('\u6240\u6709\u65E5\u7A0B')}}</span>{{=_l('\u6B64\u64CD\u4F5C\u4F1A\u66F4\u6539\u540E\u7EED\u6240\u6709\u7684\u65E5\u7A0B')}}
    </div>
</div>

`},54317:lt=>{lt.exports=`<table id="refuserBox" class="w100">
    <tr>
        <td id="refuserstd">
            <input name="reason" checked="checked" type="radio" id="radtimeClash" value="{{=_l('\u65F6\u95F4\u4E0E\u884C\u7A0B\u51B2\u7A81')}}" /><label class="radtimeClashLbl" class="rdo" for="radtimeClash">{{=_l('\u65F6\u95F4\u4E0E\u884C\u7A0B\u51B2\u7A81')}}</label>
            <input type="radio" name="reason" id="radNotPart" value="{{=_l('\u4E0D\u9700\u8981\u53C2\u52A0')}}" /><label class="radNotPartLbl" class="rdo" for="radNotPart">{{=_l('\u4E0D\u9700\u8981\u53C2\u52A0')}}</label>
            <input type="radio" name="reason" id="radNotReason" value="{{=_l('\u65E0\u7406\u7531')}}" /><label class="radNotReasonLbl" class="rdo" for="radNotReason">{{=_l('\u65E0\u7406\u7531')}}</label>
            <input type="radio" name="reason" id="radOther" value="{{=_l('\u5176\u4ED6')}}" /><label class="radOtherLbl" class="rdo" for="radOther">{{=_l('\u5176\u4ED6')}}</label>
        </td>
    </tr>
    <tr>
        <td class="txtrefuseBox">
            <textarea id="txtrefuseReason" class="ming TextArea Hidden w100" placeholder="\u8F93\u5165\u60A8\u4E0D\u80FD\u53C2\u52A0\u7684\u7406\u7531"></textarea>
        </td>
    </tr>
</table>
`},10358:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>ce});const ce={addFavorite:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Favorite","AddFavorite",p,L)},getAllFavorites:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Favorite","GetAllFavorites",p,L)},removeFavorite:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Favorite","RemoveFavorite",p,L)},removeReportFavoritesExcludeAccountId:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Favorite","RemoveReportFavoritesExcludeAccountId",p,L)},checkFavoriteByRowId:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Favorite","CheckFavoriteByRowId",p,L)},updateReportSort:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Favorite","UpdateReportSort",p,L)}}},91088:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>ce});const ce={createApp:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","CreateApp",p,L)},deleteApp:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","DeleteApp",p,L)},getAppRecoveryRecordList:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","GetAppRecoveryRecordList",p,L)},appRecycleBinDelete:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","AppRecycleBinDelete",p,L)},restoreApp:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","RestoreApp",p,L)},markApp:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","MarkApp",p,L)},editAppInfo:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","EditAppInfo",p,L)},updateAppSort:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","UpdateAppSort",p,L)},copyApp:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","CopyApp",p,L)},publishSettings:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","PublishSettings",p,L)},editWhiteList:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","EditWhiteList",p,L)},editFix:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","EditFix",p,L)},getAllHomeApp:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","GetAllHomeApp",p,L)},getWorksheetsByAppId:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","GetWorksheetsByAppId",p,L)},getAttachementImages:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","GetAttachementImages",p,L)},getPageInfo:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","GetPageInfo",p,L)},getAppItemDetail:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","GetAppItemDetail",p,L)},getApp:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","GetApp",p,L)},checkApp:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","CheckApp",p,L)},getAppFirstInfo:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","GetAppFirstInfo",p,L)},getAppSimpleInfo:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","GetAppSimpleInfo",p,L)},getAppSectionDetail:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","GetAppSectionDetail",p,L)},addAppSection:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","AddAppSection",p,L)},updateAppSectionName:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","UpdateAppSectionName",p,L)},updateAppSection:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","UpdateAppSection",p,L)},deleteAppSection:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","DeleteAppSection",p,L)},updateAppSectionSort:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","UpdateAppSectionSort",p,L)},updateSectionChildSort:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","UpdateSectionChildSort",p,L)},setWorksheetStatus:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","SetWorksheetStatus",p,L)},getApiInfo:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","GetApiInfo",p,L)},getMyApp:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","GetMyApp",p,L)},getGroup:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","GetGroup",p,L)},addToGroup:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","AddToGroup",p,L)},removeToGroup:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","RemoveToGroup",p,L)},markedGroup:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","MarkedGroup",p,L)},addGroup:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","AddGroup",p,L)},editGroup:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","EditGroup",p,L)},deleteGroup:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","DeleteGroup",p,L)},editGroupSort:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","EditGroupSort",p,L)},editHomeSetting:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","EditHomeSetting",p,L)},markApps:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","MarkApps",p,L)},editPlatformSetting:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","EditPlatformSetting",p,L)},myPlatform:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","MyPlatform",p,L)},getAppItems:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","GetAppItems",p,L)},getHomePlatformSetting:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","GetHomePlatformSetting",p,L)},getMyDbInstances:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("HomeApp","GetMyDbInstances",p,L)}}},341:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>ce});const ce={sendMessageToAccountIds:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Message","SendMessageToAccountIds",p,L)},sendEmailMessageToAccountIds:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Message","SendEmailMessageToAccountIds",p,L)},sendNotice:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Message","SendNotice",p,L)}}},19207:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>ce});const ce={getOrgRoleGroupsByProjectId:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Organize","GetOrgRoleGroupsByProjectId",p,L)},upsertOrgRoleGroup:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Organize","UpsertOrgRoleGroup",p,L)},setSortOrgRoleGroup:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Organize","SetSortOrgRoleGroup",p,L)},removeOrgRoleGroup:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Organize","RemoveOrgRoleGroup",p,L)},getOrganizes:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Organize","GetOrganizes",p,L)},addOrganize:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Organize","AddOrganize",p,L)},editOrganizeName:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Organize","EditOrganizeName",p,L)},setSortOrgRole:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Organize","SetSortOrgRole",p,L)},deleteOrganizes:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Organize","DeleteOrganizes",p,L)},getOrganizesByAccountId:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Organize","GetOrganizesByAccountId",p,L)},pagedOrganizeAccounts:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Organize","PagedOrganizeAccounts",p,L)},setOrgRoleChargeDepartment:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Organize","SetOrgRoleChargeDepartment",p,L)},addOrganizeUsers:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Organize","AddOrganizeUsers",p,L)},deleteOrganizeUsers:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Organize","DeleteOrganizeUsers",p,L)}}},10441:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>ce});const ce={removeTasksTag:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Tag","RemoveTasksTag",p,L)},addTaskTag:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Tag","AddTaskTag",p,L)},addTaskTag2:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Tag","AddTaskTag2",p,L)}}},79264:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>ce});const ce={getWeiXinServiceNumberQRCode:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Weixin","GetWeiXinServiceNumberQRCode",p,L)},checkWeiXinServiceNumberBind:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Weixin","CheckWeiXinServiceNumberBind",p,L)},getWeiXinConfig:function(p){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Weixin","GetWeiXinConfig",p,L)}}},61511:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>p});var ce=t(52945),g=t.n(ce);const p={syncWorkWXToMing:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","SyncWorkWXToMing",te,R)},getLogs:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","GetLogs",te,R)},getSignatureInfo:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","GetSignatureInfo",te,R)},getDDProjectSettingInfo:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","GetDDProjectSettingInfo",te,R)},getDDSsoUrlInfo:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","GetDDSsoUrlInfo",te,R)},editDDProjectSetting:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","EditDDProjectSetting",te,R)},editDDProjectSettingStatus:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","EditDDProjectSettingStatus",te,R)},editDDProjectClientWorkingPattern:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","EditDDProjectClientWorkingPattern",te,R)},editDDMessagUrlPcSlide:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","EditDDMessagUrlPcSlide",te,R)},editDDProjectTodoMessageEnabled:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","EditDDProjectTodoMessageEnabled",te,R)},syncWorkDDToMing:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","SyncWorkDDToMing",te,R)},editDDAppNoticeSetting:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","EditDDAppNoticeSetting",te,R)},getDDSignatureInfo:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","GetDDSignatureInfo",te,R)},getWXProjectSettingInfo:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","GetWXProjectSettingInfo",te,R)},editWXProjectSetting:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","EditWXProjectSetting",te,R)},editWXProjectSettingStatus:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","EditWXProjectSettingStatus",te,R)},editWXProjectScanEnabled:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","EditWXProjectScanEnabled",te,R)},editWXProjectMappingFieldEnabled:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","EditWXProjectMappingFieldEnabled",te,R)},editWXProjectJobnumberMappingField:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","EditWXProjectJobnumberMappingField",te,R)},editWXProjectTagMappingField:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","EditWXProjectTagMappingField",te,R)},editWXIsEnableQuickApprove:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","EditWXIsEnableQuickApprove",te,R)},checkWorkWXToMingByApp:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","CheckWorkWXToMingByApp",te,R)},getWorkWXStructureInfo:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","GetWorkWXStructureInfo",te,R)},syncWorkWXToMingByApp:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","SyncWorkWXToMingByApp",te,R)},getWorkWxUserRelations:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","GetWorkWxUserRelations",te,R)},unbindWorkWxUserRelation:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","UnbindWorkWxUserRelation",te,R)},getWorkWXSsoUrlInfo:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","GetWorkWXSsoUrlInfo",te,R)},getWorkWXAlternativeAppScanCodeUrl:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","GetWorkWXAlternativeAppScanCodeUrl",te,R)},editWorkWXAlternativeAppStatus:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","EditWorkWXAlternativeAppStatus",te,R)},applyWorkWXAlternativeApp:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","ApplyWorkWXAlternativeApp",te,R)},getWelinkProjectSettingInfo:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","GetWelinkProjectSettingInfo",te,R)},editWelinkProjectSetting:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","EditWelinkProjectSetting",te,R)},editWelinkProjectSettingStatus:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","EditWelinkProjectSettingStatus",te,R)},syncWelinkToMingByApp:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","SyncWelinkToMingByApp",te,R)},getWelinkSsoUrlInfo:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","GetWelinkSsoUrlInfo",te,R)},getWeLinkSignatureInfo:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","GetWeLinkSignatureInfo",te,R)},getFeishuProjectSettingInfo:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","GetFeishuProjectSettingInfo",te,R)},getFeiShuSignatureInfo:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","GetFeiShuSignatureInfo",te,R)},editFeishuProjectSetting:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","EditFeishuProjectSetting",te,R)},editFeishuProjectSettingStatus:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","EditFeishuProjectSettingStatus",te,R)},syncFeishuToMingByApp:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","SyncFeishuToMingByApp",te,R)},getFeishuSsoUrlInfo:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","GetFeishuSsoUrlInfo",te,R)},removeProjectAllIntergration:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","RemoveProjectAllIntergration",te,R)},checkClearIntergrationData:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","CheckClearIntergrationData",te,R)},getIntergrationAccountInitializeInfo:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","GetIntergrationAccountInitializeInfo",te,R)},editIntergrationAccountInitializeInfo:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","EditIntergrationAccountInitializeInfo",te,R)},getIntergrationInfo:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","GetIntergrationInfo",te,R)},getWorkWxLicenseDetailByApp:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return R.ajaxOptions=g()({},R.ajaxOptions,{type:"GET"}),mdyAPI("WorkWeiXin","GetWorkWxLicenseDetailByApp",te,R)},getWorkWxLicenseCreateOrderDetailByApp:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return R.ajaxOptions=g()({},R.ajaxOptions,{type:"GET"}),mdyAPI("WorkWeiXin","GetWorkWxLicenseCreateOrderDetailByApp",te,R)},createWorkWxLicenseOrder:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","CreateWorkWxLicenseOrder",te,R)},getWorkWxLicenseOrderList:function(te){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("WorkWeiXin","GetWorkWxLicenseOrderList",te,R)}}},83983:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>x});var ce=t(88239),g=t(42723),p=t(85105),L=t.n(p),te=t(99663),R=t(22600),y=t(49135),a=t(93196),r=t(67294),o=t(93967),d=t.n(o),Z=t(29314),H=t(33867),U=t(42185),f=t(59962),V=t(24043),C=t.n(V),O=t(46417),n=t(45697),s=t.n(n),j=t(18142),A=t(95283),S=t(50339),I=t(46826),c=t(44293),q=t(6917),b=t(15577),k=t(42506),ee=t(5631),re=t(48947),ie=t(36021),le=t(78499),E=t(96486),w=t.n(E),K,N,F=(N=K=function(Q){(0,a.default)(i,Q);function i(m){(0,te.default)(this,i);var v=(0,y.default)(this,(i.__proto__||L()(i)).call(this,m));v.removeUploadingFile=function(G){v.currentFile&&(v.currentFile.stop(),v.currentFile.removeFile({id:G}),v.currentFile.start());var D=v.state.temporaryData.filter(function(M){return M.id!==G});v.setState({temporaryData:D},function(){v.props.onTemporaryDataUpdate(D),D.length||v.props.onUploadComplete(!0)})};var W=v.props,P=W.attachmentData,u=W.temporaryData,l=W.kcAttachmentData,T=W.originCount;return v.state={attachmentData:P,temporaryData:(0,c._h)(u),kcAttachmentData:(0,c.w1)(l),maxTotalSize:1024*4,originCount:T||0},v.currentFile=null,v.id="UploadFiles-"+Date.now(),v.errorFiles=[],v.tokens=null,v}return(0,R.default)(i,[{key:"componentDidMount",value:function(){var v=this.state,W=v.temporaryData,P=v.kcAttachmentData,u=this.props,l=u.isInitCall,T=u.isUpload;l&&(this.props.onTemporaryDataUpdate(W),this.props.onKcAttachmentDataUpdate(P))}},{key:"componentWillReceiveProps",value:function(v){"attachmentData"in v&&!this._uploading&&this.setState({attachmentData:v.attachmentData}),"temporaryData"in v&&!this._uploading&&this.setState({temporaryData:(0,c._h)(v.temporaryData)}),"kcAttachmentData"in v&&!this._uploading&&this.setState({kcAttachmentData:(0,c.w1)(v.kcAttachmentData)}),v.originCount!==this.props.originCount&&this.setState({originCount:v.originCount})}},{key:"handleOpenControlAttachmentInNewTab",value:function(v){var W=this.props.controlId,P=w().get(this,"context.recordBaseInfo");P&&(0,ee.Kj)(w().assign(w().pick(P,["appId","recordId","viewId","worksheetId"]),{controlId:W,fileId:v}))}},{key:"onRemoveAll",value:function(v){v.files.forEach(function(W){setTimeout(function(){v.removeFile({id:W.id})},0)}),this._uploading=!1,this.props.onUploadComplete(!0)}},{key:"onOpenFolderSelectDialog",value:function(){var v=this;(0,k.default)({isFolderNode:2}).then(function(W){var P=v.state,u=P.kcAttachmentData,l=P.temporaryData,T=P.originCount,G=v.props.advancedSetting,D=W.node.map(function(se){return u.filter(function(ae){return ae.refId==se.id}).length?(alert(_l("\u5DF2\u5F15\u7528\u8BE5\u6587\u4EF6"),3),!1):{isUpload:!0,fileID:se.id,refId:se.id,originalFileName:se.name,fileExt:se.ext?"."+se.ext:"",fileSize:se.size,allowDown:se.isDownloadable,viewUrl:File.isPicture("."+se.ext)?se.viewUrl:null,node:se}});D=u.concat(D.filter(function(se){return se}));var M=!0;if(G&&(M=(0,c.go)(G,D,l.length+T)),!!M){if(D.length>100)return alert(_l("\u9644\u4EF6\u6570\u91CF\u8D85\u8FC7\u9650\u5236\uFF0C\u4E00\u6B21\u4E0A\u4F20\u4E0D\u5F97\u8D85\u8FC7100\u4E2A\u9644\u4EF6"),3),!1;v.setState({kcAttachmentData:D},function(){v.props.onKcAttachmentDataUpdate(D),!v._uploading&&setTimeout(function(){v.props.onUploadComplete(!0)},0)})}})}},{key:"openLinkDialog",value:function(v){var W=this,P=this;(0,le.Z)({showTitleTip:!1,callback:function(l){var T=l.linkName,G=l.linkContent,D=W.state.temporaryData;if(D.filter(function(se){return se.fileExt===".url"&&se.originLinkUrl}).length>=100){alert(_l("\u9644\u4EF6\u6570\u91CF\u8D85\u8FC7\u9650\u5236\uFF0C\u4E00\u6B21\u4E0A\u4F20\u4E0D\u5F97\u8D85\u8FC7100\u4E2A\u9644\u4EF6"),3);return}var M=D.concat({fileID:Math.random().toString(),fileExt:".url",originalFileName:T,oldOriginalFileName:T,originLinkUrl:G,allowDown:!0});P.setState({temporaryData:M}),P.props.onTemporaryDataUpdate(M),P.props.onUploadComplete(!0)}})}},{key:"onDeleteMDFile",value:function(v,W){W.stopPropagation();var P=this.state.attachmentData.filter(function(M){return M.fileID!==v.fileID}),u=v.docVersionID,l=v.fileID,T=v.sourceID,G=v.commentID,D=v.fromType;this.setState({attachmentData:P}),this.props.removeDeleteFilesFn||I.OW(u,l,T,G,D,void 0,v.originalFilename+v.ext).then(function(M){alert(_l("\u5220\u9664\u6210\u529F"))}).catch(function(){alert(_l("\u5220\u9664\u6587\u4EF6\u5931\u8D25"),3)}),this.props.onDeleteAttachmentData(P)}},{key:"onDeleteFile",value:function(v,W){var P=this;W.stopPropagation();var u=this.state.temporaryData.filter(function(l){return l.fileID!==v});this.setState({temporaryData:u},function(){P.props.onTemporaryDataUpdate(u)})}},{key:"onDeleteKcFile",value:function(v,W){var P=this;W.stopPropagation();var u=this.state.kcAttachmentData.filter(function(l){return l.refId!==v});this.setState({kcAttachmentData:u},function(){P.props.onKcAttachmentDataUpdate(u)})}},{key:"resetFileName",value:function(v,W){var P=this;if(W=W.trim(),w().isEmpty(W)){alert(_l("\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"),2);return}var u=this.state.temporaryData.map(function(l){return l.fileID===v&&(l.originalFileName=W),l});this.setState({temporaryData:u},function(){P.props.onTemporaryDataUpdate(u)})}},{key:"onMDPreview",value:function(v,W){var P=this,u=this.state.attachmentData[W];if(u.attachmentType===5){window.open(u.shareUrl);return}var l=this.state.attachmentData.filter(function(M){return!(M.refId&&!M.shareUrl||M.attachmentType==5)}),T=this.props.hideDownload,G=T===void 0?!1:T,D=(this.props.previewHideFunctions||[]).concat(["editFileName"]);G&&D.push("download","share","saveToKnowlege"),(0,A.Z)({attachments:l,index:(0,c.cx)(l,u.fileID),callFrom:"player",sourceID:u.sourceID,commentID:u.commentID,fromType:u.fromType,docversionid:u.docVersionID,showThumbnail:!0,showAttInfo:this.props.showAttInfo,hideFunctions:D},{deleteCallback:function(se,ae){var ne=P.state.attachmentData.filter(function(de){return de.fileID!==ae});P.setState({attachmentData:ne}),P.props.onDeleteAttachmentData(ne)},mdReplaceAttachment:function(se){var ae=P.state.attachmentData,ne=ae.slice();if(se&&se.docVersionID){var de=w().findIndex(ae,function(Ce){return Ce.docVersionID===se.docVersionID});de>-1&&(ne[de]=se,P.setState({attachmentData:ne}))}},openControlAttachmentInNewTab:this.props.controlId&&this.handleOpenControlAttachmentInNewTab.bind(this)})}},{key:"onPreview",value:function(v,W,P){if(!P.target.classList.contains("UploadFiles-editInput")){var u=this.state.temporaryData,l=u.filter(function(ae){return ae.twice}),T=u.filter(function(ae){return!ae.twice}),G=(0,c.cx)(l,v),D=(0,c.cx)(T,v);if(G>=0){var M=["editFileName"];(0,A.Z)({attachments:l.map(function(ae){return ae.twice}),index:G,callFrom:"player",hideFunctions:M},{openControlAttachmentInNewTab:this.props.controlId&&this.handleOpenControlAttachmentInNewTab.bind(this)})}else if(D>=0){var se=["editFileName","share","saveToKnowlege"];(0,A.Z)({attachments:T.map(function(ae){var ne=ae.twice||{},de={name:""+(ae.originalFileName||"\u672A\u547D\u540D")+ae.fileExt,path:ae.previewUrl?""+ae.previewUrl:ae.url?ae.url+"&imageView2/1/w/200/h/140":""+ae.serverName+ae.key,previewAttachmentType:"QINIU",size:ae.fileSize,fileid:ae.fileID};return ae.fileExt===".url"&&(de.linkUrl=ae.originLinkUrl),de}),index:D,callFrom:"chat",hideFunctions:se},{openControlAttachmentInNewTab:this.props.controlId&&this.handleOpenControlAttachmentInNewTab.bind(this)})}}}},{key:"onKcPreview",value:function(v,W){var P=this.state.kcAttachmentData,u=P.filter(function(l){return l.node});(0,A.Z)({attachments:u.map(function(l){return l.node}),index:(0,c.cx)(u,v),callFrom:"kc",hideFunctions:["editFileName","share","saveToKnowlege"]},{openControlAttachmentInNewTab:this.props.controlId&&this.handleOpenControlAttachmentInNewTab.bind(this)})}},{key:"onKcTwicePreview",value:function(v,W,P){var u=this.state.kcAttachmentData,l=u.filter(function(G){return!!(G.twice&&G.twice.attachmentType!==5)}),T=l.map(function(G){return G.twice});T[0].updater?(0,A.Z)({attachments:T,index:(0,c.cx)(l,v),callFrom:"kc"},{openControlAttachmentInNewTab:this.props.controlId&&this.handleOpenControlAttachmentInNewTab.bind(this)}):(0,A.Z)({attachments:T,index:(0,c.cx)(l,v),callFrom:"player"},{openControlAttachmentInNewTab:this.props.controlId&&this.handleOpenControlAttachmentInNewTab.bind(this)})}},{key:"onReplaceAttachment",value:function(v){var W=this.state.attachmentData,P=W.slice();if(v&&v.fileID){var u=w().findIndex(W,function(l){return l.fileID===v.fileID});u>-1&&(P[u]=v,this.setState({attachmentData:P}))}}},{key:"renderQiniuUpload",value:function(){var v=this,W=this,P=this.state.maxTotalSize,u=this.props,l=u.noTotal,T=u.dropPasteElement,G=u.from,D=u.projectId,M=u.appId,se=u.worksheetId,ae=u.advancedSetting,ne=w().get(window,"shareState.isPublicWorkflowRecord"),de=G===q.BD.PUBLIC_ADD||G===q.BD.WORKFLOW||window.isPublicWorksheet||ne,Ce={projectId:D,appId:M,worksheetId:se};return r.createElement(O.Z,{options:{drop_element:T,paste_element:T,url:md.global.FileStoreConfig.uploadHost,file_data_name:"file",multi_selection:!0,max_file_size:P+"m",autoUpload:!1,getTokenParam:Ce,error_callback:function(){alert(_l("\u542B\u6709\u4E0D\u652F\u6301\u683C\u5F0F\u7684\u6587\u4EF6"),3)},remove_files_callback:function(fe){v.onRemoveAll(fe)}},onAdd:function(fe,Ee){W.props.onDropPasting();var Y=W.state.temporaryData;if(Ee.length)W._uploading=!0,W.props.onUploadComplete(!1);else return;if(ae){var oe=W.state,ve=oe.temporaryData,ue=ve===void 0?[]:ve,pe=oe.originCount,Se=pe===void 0?0:pe,ye=oe.kcAttachmentData,J=ye===void 0?[]:ye,me=Se+ue.length+J.length,be=(0,c.go)(ae,Ee,me);!be&&W.onRemoveAll(fe)}var xe=(0,c.Sz)(Ee),Ae=Y.length?Y.map(function(ge){return ge.fileSize}).reduce(function(ge,Re){return Re+ge}):0,Ne=parseFloat(Ae/1024/1024)+parseFloat(xe/1024/1024);if(Ne>P)return alert("\u9644\u4EF6\u603B\u5927\u5C0F\u8D85\u8FC7 "+(0,b.sS)(P*1024*1024)+"\uFF0C\u8BF7\u60A8\u5206\u6279\u6B21\u4E0A\u4F20",3),W.onRemoveAll(fe),!1;if(D&&!window.isPublicApp&&!window.isPublicWorksheet&&!ne){var Me={projectId:D,fromType:9};(0,c.sW)(xe,Me).then(function(ge){if(!ge)return(0,b.Yg)({projectId:D,isFree:licenseType===0,hint:_l("\u5E94\u7528\u9644\u4EF6\u4E0A\u4F20\u91CF\u5DF2\u5230\u6700\u5927\u503C"),okText:_l("\u8D2D\u4E70\u4E0A\u4F20\u91CF\u6269\u5C55\u5305"),onOk:function(){return(0,ie.T8)("/admin/expansionservice/"+D+"/storage")}}),W.setState({temporaryData:W.state.temporaryData.filter(function(Re){return!(0,c.VU)(Re.fileID||Re.id,Ee)})}),W.onRemoveAll(fe),!1})}else!de&&!l&&!window.isPublicApp&&(0,c.sW)(xe).then(function(ge){if(!ge)return(0,c.Gy)(),W.setState({temporaryData:W.state.temporaryData.filter(function(Re){return!(0,c.VU)(Re.fileID||Re.id,Ee)})}),W.onRemoveAll(fe),!1});if((0,c.JY)(Ee))return alert(_l("\u542B\u6709\u4E0D\u652F\u6301\u683C\u5F0F\u7684\u6587\u4EF6"),3),W.onRemoveAll(fe),!1;var Fe=W.state.temporaryData.filter(function(ge){return ge.fileExt!==".url"}).length,Be=Ee.filter(function(ge){return ge.fileExt!==".url"}).length,we=Fe+Be;if(Fe>100)return alert(_l("\u9644\u4EF6\u6570\u91CF\u8D85\u8FC7\u9650\u5236\uFF0C\u4E00\u6B21\u4E0A\u4F20\u4E0D\u5F97\u8D85\u8FC7100\u4E2A\u9644\u4EF6"),3),!1;if(we>100){alert(_l("\u9644\u4EF6\u6570\u91CF\u8D85\u8FC7\u9650\u5236\uFF0C\u4E00\u6B21\u4E0A\u4F20\u4E0D\u5F97\u8D85\u8FC7100\u4E2A\u9644\u4EF6"),3);var Ie=we-100;Ee.splice(Ee.length-Ie,Ie).map(function(ge){fe.removeFile({id:ge.id})})}Ee.forEach(function(ge){var Re=W.state.temporaryData,Pe="."+File.GetExt(ge.name),ke=File.GetName(ge.name),We=File.isPicture(Pe),Ve=ge.id,it={isPic:We,fileExt:Pe,fileName:ke,id:Ve};W.errorFiles.push({id:ge.id,info:ge.getNative()}),W.setState({temporaryData:Re.concat({id:ge.id,progress:.1,base:it})})})},onBeforeUpload:function(fe){W.currentFile=fe},onUploadProgress:function(fe,Ee){var Y=Ee.loaded||0,oe=Ee.size||0,ve=(Y/oe*100).toFixed(1),ue=W.state.temporaryData.map(function(pe){return Ee.id===pe.id&&"progress"in pe&&(pe.progress=ve),pe});W.setState({temporaryData:ue})},onUploaded:function(fe,Ee,Y){var oe=W.state.temporaryData.map(function(ve){return Ee.id==ve.id&&"progress"in ve&&(ve=(0,c.LE)(Ee,Y),ve.originalFileName=decodeURIComponent(ve.originalFileName),delete ve.progress,delete ve.base),ve});W.setState({temporaryData:oe}),oe.filter(function(ve){return ve.progress}).length||(W.props.onTemporaryDataUpdate(oe),W.props.onUploadComplete(!0))},onUploadComplete:function(fe,Ee){W._uploading=!1},onError:function(fe,Ee){Ee.code===window.plupload.FILE_SIZE_ERROR?alert(_l("\u5355\u4E2A\u6587\u4EF6\u5927\u5C0F\u8D85\u8FC7%0MB\uFF0C\u65E0\u6CD5\u652F\u6301\u4E0A\u4F20",P),2):alert(_l("\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\u3002"),2)}},r.createElement("div",{className:"flexRow valignWrapper",id:this.id,ref:function(fe){v.nativeFile=fe}},r.createElement("i",{className:"icon icon-knowledge-upload Gray_9e Font19"}),r.createElement("span",null,_l("\u672C\u5730"))))}},{key:"render",value:function(){var v=this,W=this.props,P=W.controlId,u=W.isUpload,l=W.arrowLeft,T=W.minWidth,G=W.maxWidth,D=W.height,M=W.canAddLink,se=W.canAddKnowledge,ae=W.from,ne=this.state,de=ne.temporaryData,Ce=ne.kcAttachmentData,he=ne.attachmentData,fe=(0,c.C1)(de),Ee=fe.totalSize,Y=fe.currentPrograss,oe=de.length+Ce.length+he.length,ve=C()({length:15}),ue={minWidth:T,maxWidth:G,height:D},pe=this.props.hideDownload,Se=pe===void 0?!1:pe;return r.createElement("div",{className:d()("UploadFiles-wrapper",this.props.className),ref:function(J){v.uploadFilesWrapper=J},style:{paddingTop:l?10:0}},!!l&&r.createElement("div",{style:{left:l},className:"UploadFiles-arrow"}),u&&r.createElement("div",{className:"UploadFiles-header"},r.createElement("div",{className:"UploadFiles-entrys"},this.renderQiniuUpload(),se&&md.global.Account.accountId&&md.global.Account.accountId.length===36&&ae!==q.BD.DRAFT&&!w().get(window,"shareState.isPublicForm")&&!w().get(window,"shareState.isPublicFormPreview")&&!w().get(window,"shareState.isPublicWorkflowRecord")&&r.createElement("div",{className:"flexRow valignWrapper",onClick:this.onOpenFolderSelectDialog.bind(this)},r.createElement("i",{className:"icon icon-folder Gray_9e Font18"}),r.createElement("span",null,_l("\u77E5\u8BC6"))),M&&r.createElement("div",{className:"flexRow valignWrapper",onClick:this.openLinkDialog.bind(this)},r.createElement("i",{className:"icon icon-link2 Gray_9e Font19"}),r.createElement("span",null,_l("\u94FE\u63A5\u6587\u4EF6")))),r.createElement("div",{className:"UploadFiles-ramSize"},r.createElement("div",{className:"UploadFiles-attachmentProgress"},r.createElement("div",{style:{width:Y+"%"},className:"UploadFiles-currentProgress ThemeBGColor3"})),r.createElement("div",{className:"UploadFiles-info"},Ee,"/1G(",M?_l("\u81F3\u591A\u672C\u5730,\u77E5\u8BC6,\u94FE\u63A5\u5404100\u4E2A"):_l("\u81F3\u591A\u672C\u5730,\u77E5\u8BC6\u6587\u4EF6\u5404100\u4E2A"),")"))),r.createElement("div",{ref:function(J){v.filesWrapper=J},className:d()("UploadFiles-filesWrapper",{rowDisplay:this.props.rowDisplay}),style:{display:oe?"":"none"}},he.map(function(ye,J){return r.createElement(S.Z,(0,ce.default)({isUpload:u,hideDownload:Se,style:ue,key:ye.fileID||Date.now(),index:J,data:ye,onDeleteMDFile:v.onDeleteMDFile.bind(v),onReplaceAttachment:v.onReplaceAttachment.bind(v),onPreview:v.onMDPreview.bind(v),isDeleteFile:v.props.isDeleteFile},P?{handleOpenControlAttachmentInNewTab:function(){return v.handleOpenControlAttachmentInNewTab(ye.fileID)}}:{}))}),de.map(function(ye,J){return r.createElement(S.Z,(0,ce.default)({isUpload:u,hideDownload:Se,style:ue,key:J,index:J,data:ye,resetFileName:v.resetFileName.bind(v),onDeleteFile:v.onDeleteFile.bind(v),removeUploadingFile:v.removeUploadingFile.bind(v),onPreview:v.onPreview.bind(v)},P?{handleOpenControlAttachmentInNewTab:function(){return v.handleOpenControlAttachmentInNewTab(ye.fileID)}}:{}))}),Ce.map(function(ye,J){return r.createElement(S.Z,(0,ce.default)({isUpload:u,hideDownload:Se,style:ue,key:J,index:J,data:ye,isDeleteKcFile:v.props.isDeleteKcFile,onDeleteKcFile:v.onDeleteKcFile.bind(v),onPreview:v.onKcPreview.bind(v),onKcTwicePreview:v.onKcTwicePreview.bind(v)},P?{handleOpenControlAttachmentInNewTab:function(){return v.handleOpenControlAttachmentInNewTab(ye.fileID)}}:{}))}),ve.map(function(ye,J){return r.createElement("div",{style:ue,key:J,className:"UploadFiles-file-wrapper UploadFiles-fileEmpty"})})))}}]),i}(r.Component),K.contextType=re.Z,K.propTypes={noTotal:s().bool,from:s().number,arrowLeft:s().number,canAddLink:s().bool,canAddKnowledge:s().bool,minWidth:s().number,maxWidth:s().number,height:s().number,isUpload:s().bool,showAttInfo:s().bool,isInitCall:s().bool,attachmentData:s().array,onDeleteAttachmentData:s().func,isDeleteFile:s().bool,isDeleteKcFile:s().bool,kcAttachmentData:s().array,onKcAttachmentDataUpdate:s().func,temporaryData:s().array,onTemporaryDataUpdate:s().func,onUploadComplete:s().func,dropPasteElement:s().string,onDropPasting:s().func,rowDisplay:s().bool,previewHideFunctions:s().arrayOf(s().string),removeDeleteFilesFn:s().bool},K.defaultProps={canAddLink:!1,canAddKnowledge:!0,minWidth:140,maxWidth:200,height:118,isUpload:!0,showAttInfo:!0,isInitCall:!1,attachmentData:[],onDeleteAttachmentData:function(){},isDeleteFile:!1,isDeleteKcFile:!0,kcAttachmentData:[],onKcAttachmentDataUpdate:function(){},temporaryData:[],onTemporaryDataUpdate:function(){},onUploadComplete:function(){},dropPasteElement:"",onDropPasting:function(){},rowDisplay:!1,removeDeleteFilesFn:!1},N),h=t(15405),z=t(33126),X=(0,z.Z)(h.Z),B={topLeft:{points:["bl","tl"]},topRight:{points:["br","tr"]},bottomRight:{points:["tr","br"]},bottomLeft:{points:["tl","bl"]}},x=function(Q){(0,a.default)(i,Q);function i(m){(0,te.default)(this,i);var v=(0,y.default)(this,(i.__proto__||L()(i)).call(this,m));return v.show=function(W){W.preventDefault();var P=$("#UploadFilesTriggerPanel"+v.id);P.addClass("drag")},v.hide=function(W){W.preventDefault();var P=$("#UploadFilesTriggerPanel"+v.id);P.removeClass("drag")},v.dragenter=function(W){v.lastenter=W.target,v.show(W)},v.dragleave=function(W){v.lastenter===W.target&&v.hide(W)},v.drop=function(W){v.hide(W)},v.dragover=function(W){return v.show(W),!1},v.state={visible:!1,dragVisible:!1,isComplete:!0},v.id=m.id||(0,b.ne)(16),v}return(0,R.default)(i,[{key:"componentDidMount",value:function(){this.props.popupVisible&&this.setTriggerPanelVisible(!0)}},{key:"componentWillReceiveProps",value:function(v){v.popupVisible&&this.setTriggerPanelVisible(!0)}},{key:"handleDetection",value:function(){$(document).on({dragenter:this.dragenter,dragleave:this.dragleave,drop:this.drop,dragover:this.dragover})}},{key:"handleCancelDetection",value:function(){$(document).off({dragenter:this.dragenter,dragleave:this.dragleave,drop:this.drop,dragover:this.dragover})}},{key:"setTriggerPanelVisible",value:function(v){var W=this;!v&&this.props.onClose&&this.props.onClose(),v?this.handleDetection():this.handleCancelDetection(),this.setState({visible:v},function(){v&&W.handleFocus()})}},{key:"handleCancel",value:function(){this.props.onCancel&&this.props.onCancel(),this.setTriggerPanelVisible(!1)}},{key:"handleOk",value:function(){this.props.onOk&&this.props.onOk(),this.setTriggerPanelVisible(!1)}},{key:"handleFocus",value:function(){this.textarea&&this.textarea.focus()}},{key:"renderHeader",value:function(){return r.createElement("div",{className:"panelHeader flexRow valignWrapper Font15"},r.createElement("div",{className:"flex"},r.createElement("span",null,_l("\u6DFB\u52A0\u9644\u4EF6"))),r.createElement(H.Z,{icon:"close",className:"Gray_75 pointer Font18 ThemeHoverColor3",onClick:this.setTriggerPanelVisible.bind(this,!1)}))}},{key:"renderBtns",value:function(){return r.createElement("div",{className:"panelBtns flexRow valignWrapper"},r.createElement(U.ZP,{type:"link",size:"small",onClick:this.handleCancel.bind(this)},_l("\u53D6\u6D88")),r.createElement(U.ZP,{type:"primary",size:"small",onClick:this.handleOk.bind(this)},_l("\u786E\u5B9A")))}},{key:"renderPanel",value:function(v){var W=this,P="dropTextarea-"+this.id,u=this.state.isComplete,l=v.onUploadComplete,T=v.isQiniuUpload,G=(0,g.Z)(v,["onUploadComplete","isQiniuUpload"]),D=G.temporaryData,M=G.kcAttachmentData,se=!!(D.length+M.length),ae=T?F:f.Z;return r.createElement(X,{component:"div",onClickAwayExceptions:[".folderSelectDialog",".addLinkFileDialog",".attachmentsPreview",".UploadFilesTriggerPanel",".triggerTraget"],onClickAway:this.setTriggerPanelVisible.bind(this,!1),id:"UploadFilesTriggerPanel"+this.id,className:d()("UploadFilesTriggerPanel flexColumn",{compatibilityIe:"ActiveXObject"in window}),style:window.innerWidth<480?{width:window.innerWidth-20}:{},onClick:this.handleFocus.bind(this),onMouseEnter:this.handleFocus.bind(this)},this.renderHeader(),se?this.renderBtns():null,r.createElement(ae,(0,ce.default)({},G,{dropPasteElement:P,onUploadComplete:function(de){l&&l(de),W.setState({isComplete:de})}})),r.createElement("div",{className:d()("panelContent flexRow valignWrapper",{hide:se||!u})},r.createElement("div",{className:"Gray_9e flexRow valignWrapper"},r.createElement(H.Z,{icon:"view-upload",className:"mRight10 Font24"}),r.createElement("span",{className:"Font14"},_l("\u62D6\u62FD\u81F3\u6B64 \u6216 \u7C98\u8D34\u526A\u8D34\u677F\u6587\u4EF6")))),r.createElement("textarea",{readOnly:!0,id:P,className:"dropTextarea",ref:function(de){W.textarea=de}}),r.createElement("div",{className:"dragPanel flexRow valignWrapper Font18 Gray_75"},_l("\u62D6\u62FD\u81F3\u6B64\u5904\u4E0A\u4F20\u6587\u4EF6")))}},{key:"render",value:function(){var v=this.state.visible,W=this.props,P=W.children,u=W.getPopupContainer,l=W.offset,T=W.noWrap,G=W.destroyPopupOnHide,D=(0,g.Z)(W,["children","getPopupContainer","offset","noWrap","destroyPopupOnHide"]);return r.createElement(Z.Z,{popupVisible:v,onPopupVisibleChange:T?function(){}:this.setTriggerPanelVisible.bind(this,!0),destroyPopupOnHide:G,popupClassName:"UploadFilesTriggerWrap",action:["click"],popupPlacement:"bottomLeft",builtinPlacements:B,popup:this.renderPanel(D),popupAlign:{offset:l||[2,2],overflow:{adjustX:2,adjustY:1}},getPopupContainer:u},T?P:r.createElement("div",{className:"triggerTraget"},P))}}]),i}(r.Component)},52404:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>j});var ce=t(63239),g=t.n(ce),p=t(85105),L=t.n(p),te=t(99663),R=t(22600),y=t(49135),a=t(93196),r=t(67294),o=t(45697),d=t.n(o),Z=t(59962),H=t(54208),U=t(42185),f=t(96486),V=t.n(f),C=t(537),O=t(54416),n,s,j=(s=n=function(A){(0,a.default)(S,A);function S(I){(0,te.default)(this,S);var c=(0,y.default)(this,(S.__proto__||L()(S)).call(this,I));return c.state={files:[],isLoading:!1,isUploadComplete:!0,isShowBtns:!1,attachmentData:[],kcAttachmentData:[]},c.submit=V().debounce(c.submit.bind(c),500),c.cancel=c.cancel.bind(c),c}return(0,R.default)(S,[{key:"componentDidMount",value:function(){this.getFiles(),this.props.manualRef(this)}},{key:"cancel",value:function(){this.setState({isShowBtns:!1,attachmentData:[],kcAttachmentData:[]})}},{key:"submit",value:function(){var c=this,q=this.state,b=q.isUploadComplete,k=q.attachmentData,ee=q.kcAttachmentData,re=this.props,ie=re.sourceId,le=re.sourceType,E=re.appId;if(!b){alert(_l("\u6587\u4EF6\u4E0A\u4F20\u4E2D\uFF0C\u8BF7\u7A0D\u7B49"),3);return}C.Z.addDiscussion({sourceId:ie,sourceType:le,message:_l("\u4E0A\u4F20\u4E86\u9644\u4EF6"),attachments:g()(k),knowledgeAtts:g()(ee),appId:E}).then(function(w){w.code===1?(c.cancel(),c.getFiles()):alert(_l("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"),2)})}},{key:"getFiles",value:function(){var c=this,q=this.props,b=q.sourceId,k=q.sourceType,ee=q.updateFiles;this.setState({isLoading:!0}),this.promise=C.Z.getSourceAtts({sourceId:b,sourceType:k}),this.promise.then(function(re){var ie=re.data,le=re.code;le===1?c.setState({files:ie}):alert(_l("\u83B7\u53D6\u9644\u4EF6\u5931\u8D25"),2),c.setState({isLoading:!1})})}},{key:"onTemporaryDataUpdate",value:function(c){this.setState({attachmentData:c,isShowBtns:this.state.kcAttachmentData.length+c.length>0})}},{key:"onKcAttachmentDataUpdate",value:function(c){this.setState({kcAttachmentData:c,isShowBtns:this.state.attachmentData.length+c.length>0})}},{key:"renderList",value:function(){var c=this.state.files;return c.length?r.createElement(Z.Z,{column:3,isUpload:!1,attachmentData:c}):r.createElement("div",{className:"Gray_c pTop10 pBottom10 noneContent"},_l("\u6682\u65E0\u6587\u4EF6"))}},{key:"render",value:function(){var c=this,q=this.state,b=q.isLoading,k=q.isShowBtns;return r.createElement("div",{className:"fileContent mTop10"},r.createElement(Z.Z,{arrowLeft:16,column:3,onUploadComplete:function(re){return c.setState({isUploadComplete:re})},temporaryData:this.state.attachmentData,kcAttachmentData:this.state.kcAttachmentData,onTemporaryDataUpdate:this.onTemporaryDataUpdate.bind(this),onKcAttachmentDataUpdate:this.onKcAttachmentDataUpdate.bind(this)}),k?r.createElement("div",{className:"TxtRight"},r.createElement(U.ZP,{className:"mRight15",size:"small",type:"ghost",onClick:this.cancel},_l("\u53D6\u6D88")),r.createElement(U.ZP,{size:"small",onClick:this.submit},_l("\u786E\u5B9A"))):null,b?r.createElement(H.Z,null):this.renderList())}}]),S}(r.Component),n.TYPES=O.F,n.propTypes={sourceType:d().oneOf(V().values(O.F)),sourceId:d().string.isRequired,appId:d().string.isRequired,manualRef:d().func},n.defaultProps={manualRef:function(){}},s)},62231:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>K});var ce=t(85105),g=t.n(ce),p=t(99663),L=t(22600),te=t(49135),R=t(93196),y=t(67294),a=t(45697),r=t.n(a),o=t(54208),d=t(537),Z=t(54416),H=t(70264),U=t(22507),f=t(15759),V=t(46593),C=t.n(V),O=t(52945),n=t.n(O),s=t(15577),j=t(59962),A=t(67707),S=t(68924),I=t.n(S),c=t(82302),q=t(96486),b=t.n(q),k,ee,re=n()({},c.whiteList,{img:["src","alt","title","width","height","class"]}),ie=(ee=k=function(N){(0,R.default)(F,N);function F(h){(0,p.default)(this,F);var z=(0,te.default)(this,(F.__proto__||g()(F)).call(this,h));return z.state={replayMsg:null},z}return(0,L.default)(F,[{key:"componentWillUnmount",value:function(){this.ajax&&this.ajax.abort&&this.ajax.abort()}},{key:"delComment",value:function(){var z=this.props,X=z.comment.discussionId,B=z.sourceType,x=z.removeComment;(0,A.Z)({title:_l("\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u8BA8\u8BBA\u5417\uFF1F"),onOk:function(){return d.Z.removeDiscussion({discussionId:X,sourceType:B}).then(function(i){if(i&&i.code===1)x(X);else return alert(_l("\u5220\u9664\u8BA8\u8BBA\u5931\u8D25"),2),C().reject()})}})}},{key:"fetchReplyMsg",value:function(){var z=this,X=this.props,B=X.comment.replyId,x=X.sourceType;if(this.state.replayMsg)return!1;this.ajax=d.Z.getDiscussionMsg({discussionId:B,sourceType:x}),this.ajax.then(function(Q){Q.code===1?z.setState({replayMsg:Q.data}):alert(_l("\u83B7\u53D6\u56DE\u590D\u5185\u5BB9\u5931\u8D25"),2)})}},{key:"checkMouseDownIsLeft",value:function(z){return z.button===0}},{key:"render",value:function(){var z=this,X=this.props,B=X.comment,x=X.sourceType,Q=X.children,i=B.createAccount,m=i===void 0?{}:i,v=B.replyAccount,W=v===void 0?{}:v,P=B.replyId,u=B.location,l=B.extendsId,T=(0,s.U4)({sourceType:x,message:B.message,rUserList:B.accountsInMessage}),G=l.split("|")[0];return y.createElement("div",{className:"singleTalk boxSizing",ref:function(M){z.singleTalk=M}},y.createElement(f.Z,{className:"createHeadImg circle userAvarar pointer userMessage",user:{userHead:m.avatar,accountId:m.accountId},size:24,appId:G,projectId:B.projectId}),y.createElement("div",{className:"talkDiscussion"},y.createElement("div",{className:"singleTop"},y.createElement(U.Z,{className:"userName pointer ThemeColor3 userMessage",user:{userName:m.fullname,accountId:m.accountId,isDelete:!0},projectId:B.projectId}),P?y.createElement("span",null,y.createElement("span",{className:"pLeft5"},_l("\u56DE\u590D")),y.createElement(U.Z,{className:"userName pointer ThemeColor3 pLeft5 userMessage",user:{userName:W.fullname,accountId:W.accountId,isDelete:!0},projectId:B.projectId}),y.createElement(H.Z,{text:this.state.replayMsg?y.createElement("span",null,this.state.replayMsg):y.createElement(o.Z,null),themeColor:"white"},y.createElement("span",{className:"msgTip icon-task-reply-msg ThemeColor3 pLeft5",onMouseOver:function(){return!z.ajax&&z.fetchReplyMsg()}}))):void 0,y.createElement("div",{className:"Right"},m.accountId===md.global.Account.accountId?y.createElement("a",{className:"Hidden mRight10 ThemeColor3",onMouseDown:function(M){return z.checkMouseDownIsLeft(M)&&z.delComment()}},_l("\u5220\u9664")):void 0,y.createElement("a",{className:"Hidden ThemeColor3",onMouseDown:function(M){return z.checkMouseDownIsLeft(M)&&z.props.switchReplyComment(B.discussionId)}},_l("\u56DE\u590D")),y.createElement("span",{className:"commentDate"},createTimeSpan((0,s.LX)(B.createTime))))),y.createElement("div",{className:"singeText",dangerouslySetInnerHTML:{__html:I()(T,{whiteList:re})}}),y.createElement(j.Z,{isUpload:!1,attachmentData:B.attachments,onDeleteAttachmentData:function(M){z.props.updateComment(n()(B,{attachments:M}))}}),u&&u.name&&u.address?y.createElement("div",{className:"mTop5 mBottom5"},y.createElement("span",{onClick:function(M){(!u.longitude||!u.latitude)&&(alert(_l("\u5BF9\u4E0D\u8D77\uFF0C\u6CA1\u6709\u83B7\u53D6\u5230\u8BE5\u5730\u70B9\u8BE6\u7EC6\u4FE1\u606F"),3),M.preventDefault())}},y.createElement("a",{href:"http://ditu.amap.com/regeo?lng="+u.longitude+"&lat="+u.latitude+"&name="+(u.name||"")+"&src=uriapi",className:"commentLocation Font12 ThemeColor3 Hand",rel:"noopener noreferrer",target:"_blank"},y.createElement("span",{className:"icon icon-locate"}),u.name))):null,Q?this.props.children:void 0))}}]),F}(y.Component),k.propTypes={children:r().element,comment:r().shape({discussionId:r().string,isDeleted:r().bool,message:r().string,attachments:r().array,newAccounts:r().array,accountsInMessage:r().array,projectId:r().string,replyId:r().string,sourceId:r().string}).isRequired,sourceType:r().oneOf(b().values(Z.F)),switchReplyComment:r().func,removeComment:r().func,updateComment:r().func},k.defaultProps={removeDiscussion:function(){}},ee),le,E,w=(E=le=function(N){(0,R.default)(F,N);function F(h){(0,p.default)(this,F);var z=(0,te.default)(this,(F.__proto__||g()(F)).call(this,h));return z.state={pageIndex:h.pageIndex,pageSize:h.pageSize,isLoading:!1,hasMore:!0,showDiscussionId:""},z.fetch=z.fetch.bind(z),z}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.callRef(),this.props.doNotLoadAtDidMount||this.fetch()}},{key:"componentWillReceiveProps",value:function(z){(this.props.isFocus!==z.isFocus||z.status!==this.props.status||z.entityType!==this.props.entityType||this.props.sourceId!==z.sourceId)&&(this.abortRequest(),this.setState({pageIndex:1,isFocus:z.isFocus},this.fetch))}},{key:"callRef",value:function(){this.props.manualRef&&this.props.manualRef(this)}},{key:"updatePageIndex",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,X=this.state,B=X.pageIndex,x=X.hasMore,Q=X.isLoading;if(z)this.abortRequest(),this.setState({pageIndex:1},this.fetch);else{if(!x||Q)return;this.setState({pageIndex:B+1},this.fetch)}}},{key:"abortRequest",value:function(){this.ajax&&this.ajax.abort&&this.ajax.abort()}},{key:"fetch",value:function(){var z=this,X=this.props,B=X.sourceId,x=X.sourceType,Q=X.isFocus,i=X.commentList,m=X.entityType,v=this.state,W=v.pageIndex,P=v.pageSize;this.setState({isLoading:!0}),this.ajax=d.Z.getDiscussions({sourceId:B,sourceType:x,pageIndex:W,pageSize:P,isFocus:Q,entityType:m}),this.ajax.then(function(u){u&&u.code===1?(b().isFunction(z.props.updateCommentList)&&(W===1?z.props.updateCommentList(u.data):z.props.updateCommentList(i.concat(u.data||[]))),z.setState({hasMore:u.data&&u.data.length!==0&&u.data.length>=P})):alert(_l("\u83B7\u53D6\u8BA8\u8BBA\u5931\u8D25"),2)}).finally(function(){z.setState({isLoading:!1})})}},{key:"switchReplyComment",value:function(z){z===this.state.showReplyCommentId&&(z=""),this.setState({showReplyCommentId:z})}},{key:"updateComment",value:function(z){var X=this.props.commentList.map(function(B){return B.discussionId===z.discussionId?z:B});this.props.updateCommentList(X)}},{key:"render",value:function(){var z=this,X=this.props,B=X.commentList,x=X.sourceId,Q=X.sourceType,i=X.isFocus,m=X.children,v=X.nullCommentList,W=this.state,P=W.isLoading,u=W.showReplyCommentId,l=W.pageIndex;return P&&!B.length?y.createElement(o.Z,{className:"mTop10"}):B.length?y.createElement("div",{className:"commentList",ref:function(G){z.list=G}},B.filter(function(T){return!!T}).map(function(T,G){return y.createElement(ie,{key:T.discussionId,comment:T,storageId:x+"-"+T.discussionId,sourceType:Q,switchReplyComment:z.switchReplyComment.bind(z),removeComment:z.props.removeComment,updateComment:function(M){return z.updateComment(M)}},m&&u===T.discussionId?y.cloneElement(m,{replyId:T.discussionId,autoFocus:!0,autoShrink:!1,shrinkAfterSubmit:!0,onSubmitCallback:function(){return z.setState({showReplyCommentId:""})}}):null)}),P&&l>1?y.createElement(o.Z,{className:"mTop10 mBottom10"}):null):v||y.createElement("div",{className:"mTop15 Gray_bd Font13"},i?_l("\u6CA1\u6709\u4E0E\u6211\u6709\u5173\u7684\u5185\u5BB9"):_l("\u6682\u65E0\u8BA8\u8BBA"))}}]),F}(y.Component),le.propTypes={sourceId:r().string.isRequired,sourceType:r().oneOf(b().values(Z.F)).isRequired,pageIndex:r().number,pageSize:r().number,isMore:r().bool,isFocus:r().bool,commentList:r().array,updateCommentList:r().func,removeComment:r().func,children:r().element,manualRef:r().func,nullCommentList:r().element},le.defaultProps={pageIndex:1,pageSize:20,isFocus:!1,commentList:[],updateCommentList:function(){},removeComment:function(){},manualRef:function(){},nullCommentList:null},E);w.TYPES=Z.F;const K=w},14761:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>h});var ce=t(12424),g=t(46593),p=t.n(g),L=t(52945),te=t.n(L),R=t(63239),y=t.n(R),a=t(85105),r=t.n(a),o=t(99663),d=t(22600),Z=t(49135),H=t(93196),U=t(67294),f=t(45697),V=t.n(f),C=t(93967),O=t.n(C),n=t(54416),s=t(33867),j=t(42185),A=t(15405),S=t(33126),I=t(59962),c=t(537),q=t(17429),b=t(98110),k=t(91744),ee=t(37846),re=t(15577),ie=t(96486),le=t.n(ie),E=t(2489),w,K,N=(0,S.Z)(A.Z),F=(K=w=function(z){(0,H.default)(X,z);function X(B){(0,o.default)(this,X);var x=(0,Z.default)(this,(X.__proto__||r()(X)).call(this,B));return x.clearLocalStorage=function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=x.textarea,m=$(i);if(Q){if(window.localStorage.removeItem("commenter-"+x.props.storageId),x.setState({showAttachment:!1,isReshare:!1,isEditing:!x.props.shrinkAfterSubmit,disabled:!1,attachmentData:[],kcAttachmentData:[]}),m.mentionsInput("reset"),m.val(""),x.props.shrinkAfterSubmit||m.focus(),x.props.onFocusStateChange){var v=!x.props.shrinkAfterSubmit;x.props.onFocusStateChange.call(null,v)}x.props.onSubmitCallback()}else x.setState({disabled:!1}),x.props.shrinkAfterSubmit||m.focus()},x.textareaId="Commenter_"+(0,re.ne)(16),x.state={isEditing:!1,isReshare:!1,showAttachment:!1,disabled:!1,attachmentData:[],kcAttachmentData:[],isUploadComplete:!0},x}return(0,d.default)(X,[{key:"componentDidMount",value:function(){var x=this.textarea,Q=this.faceBtn,i=this.selectGroup,m=this.props,v=m.textareaMaxHeight,W=m.textareaMinHeight,P=this,u=$(x);if(u.autoTextarea({maxHeight:v,minHeight:W}).height(W),this.props.storageId&&u.on("keyup",function(){var T=$.trim($(this).val());T?safeLocalStorageSetItem("commenter-"+P.props.storageId,T):window.localStorage.removeItem("commenter-"+P.props.storageId)}),!this.props.disableMentions){var l=this.props.sourceType;sessionStorage.setItem("atData",y()(this.props.atData||[])),u.mentionsInput(te()({submitBtn:this.textareaId+"-submit",reset:!1,searchType:l===n.F.POST?0:1,showCategory:l===n.F.POST,isAtAll:!0,sourceType:l,forReacordDiscussion:this.props.forReacordDiscussion},this.props.mentionsOptions))}new E.Z(Q,{input:this.textarea,placement:"left bottom",relatedLeftSpace:-38+(this.props.relatedLeftSpace||0),relatedTopSpace:5,offset:this.props.offset,popupContainer:this.props.popupContainer}),this.props.disableShareToPost||$(i).SelectGroup(te()({whetherTruncation:!0,truncationStr:10,autoPosition:!0,isShowSelectProject:!1},this.props.selectGroupOptions)),this.props.autoFocus&&setTimeout(function(){u.focus()},50)}},{key:"componentWillReceiveProps",value:function(x,Q){x.storageId&&x.storageId!==this.props.storageId&&(this.textarea.value=window.localStorage.getItem("commenter-"+x.storageId)||""),!x.disableMentions&&x.forReacordDiscussion&&sessionStorage.setItem("atData",y()(x.atData||[]))}},{key:"componentDidUpdate",value:function(x,Q){var i=$(this.textarea),m=this.state,v=m.isEditing,W=m.attachmentData,P=m.kcAttachmentData,u=this.props,l=u.textareaMaxHeight,T=u.textareaMinHeight,G=u.textareaExpandHeight,D=W.length||P.length;if(v!==Q.isEditing){var M=v||D?G:T;v?i.autoTextarea({maxHeight:l,minHeight:M}).height(M):setTimeout(function(){i.height(M)},0)}}},{key:"onUploadComplete",value:function(x){this.setState({isUploadComplete:x}),x&&!$(this.textarea).val()&&(this.state.attachmentData.length||this.state.kcAttachmentData.length)&&$(this.textarea).val(this.state.attachmentData.length?this.state.attachmentData[0].originalFileName:this.state.kcAttachmentData[0].originalFileName)}},{key:"onClickAway",value:function(){this.state.isUploadComplete&&(this.props.onFocusStateChange&&this.props.onFocusStateChange.call(null,!1),this.props.autoShrink&&(this.setState({isEditing:!1}),this.textarea.blur()))}},{key:"handleSubmit",value:function(){var x=this,Q=void 0;if(!this.state.isUploadComplete)return alert(_l("\u6587\u4EF6\u4E0A\u4F20\u4E2D\uFF0C\u8BF7\u7A0D\u7B49"),3),!1;if(this.state.isReshare&&(Q=$(this.selectGroup).SelectGroup("getScope"),!Q))return alert(_l("\u8BF7\u9009\u62E9\u5206\u4EAB\u8303\u56F4"),3),!1;var i=this.textarea,m=$(i),v=this.props.disableMentions?p().resolve(m.val()):new(p())(function(W,P){m.mentionsInput("val",function(u){return W(u)})});v.then(function(W){var P=$.trim(W);if(!P||P.length>3e3)return P&&alert(_l("\u53D1\u8868\u5185\u5BB9\u8FC7\u957F\uFF0C\u6700\u591A\u5141\u8BB83000\u4E2A"),3),!1;var u=x.state.attachmentData,l=x.state.kcAttachmentData;x.setState({disabled:!0});var T=x.props,G=T.sourceId,D=T.sourceType,M=T.replyId,se=T.appId,ae=T.remark,ne=T.extendsId,de=T.entityType,Ce=T.forReacordDiscussion;if(D===n.F.POST){var he=x.props.accountId;q.Z.addPostComment({uType:"AddComment",postID:G,message:P,isReshared:y()(Q)!==void 0,scope:Q,replyID:M,replyAccountId:M?he:void 0,attachments:y()(u),knowledgeAttach:y()(l)}).then(function(fe){fe.success==="True"?this.props.onSubmit(fe.comment):p().reject(fe.error)}).catch(function(fe){alert(fe||_l("\u64CD\u4F5C\u5931\u8D25"),2)})}else c.Z.addDiscussion({sourceId:G,sourceType:D,message:P,replyId:M,attachments:y()(u),knowledgeAtts:y()(l),appId:se,extendsId:ne,entityType:Ce&&de===2?2:0}).then(function(fe){fe&&fe.code===1?(x.props.onSubmit(fe.data),x.clearLocalStorage()):(fe&&fe.code===3?alert(_l("\u8BE5\u8BA8\u8BBA\u4E0D\u5B58\u5728\u6216\u5DF2\u88AB\u5220\u9664"),3):fe&&fe.code===7?alert(_l("\u6CA1\u6709\u6743\u9650\u64CD\u4F5C"),3):alert(_l("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"),2),x.clearLocalStorage(!1))}).catch(function(){x.clearLocalStorage(!1)}),Q&&x.props.sendPost&&(P=P.replace(/\[all\]atAll\[\/all\]/gi,"@"+n.v[D]),q.Z.addPost({appId:se,scope:Q,remark:typeof ae=="function"?ae():ae,postMsg:P,attachments:y()(u),knowledgeAttach:y()(l)}))})}},{key:"render",value:function(){var x=this,Q=this.props,i=Q.canAddLink,m=Q.appId,v=Q.projectId,W=Q.sourceId,P=Q.placeholder,u=Q.activePlaceholder,l=Q.fromAppId,T=this.state,G=T.isEditing,D=T.attachmentData,M=T.kcAttachmentData,se=W.split("|"),ae=(0,ce.Z)(se,2),ne=ae[0],de=ae[1],Ce=D.length||M.length,he=!G&&!Ce?{display:"none"}:{},fe=function(oe){u&&(oe.target.placeholder=u),x.state.isUploadComplete&&x.setState({isEditing:!0}),x.props.onFocusStateChange&&x.props.onFocusStateChange.call(null,!0)};function Ee(Y){u&&(Y.target.placeholder=P)}return U.createElement(N,{className:O()("commentBox",{"ThemeBorderColor3 ThemeColor4 autoHeight":this.state.isEditing||!this.props.autoShrink}),onClickAway:function(){return x.onClickAway()},onClickAwayExceptions:["#folderSelectDialog_container","#addLinkFileDialog_container"]},U.createElement("textarea",{ref:function(oe){x.textarea=oe},id:this.textareaId+"-textarea",className:"txtComment",spellCheck:"false",placeholder:P,onFocus:fe,onBlur:Ee,defaultValue:window.localStorage.getItem("commenter-"+this.props.storageId)||""}),U.createElement("div",{className:"commentActionsBox Gray",style:he},U.createElement("span",{className:"tip-top commentIconBtn","data-tip":_l("\u4E0A\u4F20\u9644\u4EF6")},U.createElement(s.Z,{id:this.textareaId+"-attachment",className:O()("Hand commentAttachBtn ThemeHoverColor3",{ThemeColor3:this.state.showAttachment}),icon:"attachment",onClick:function(){return x.setState({showAttachment:!x.state.showAttachment})}})),U.createElement("span",{ref:function(oe){x.faceBtn=oe},className:"tip-top commentIconBtn ThemeHoverColor3","data-tip":_l("\u8868\u60C5")},U.createElement(s.Z,{className:"Hand",icon:"smile"})),!this.props.disableShareToPost&&!md.global.Account.isPortal?U.createElement("span",{className:"tip-top commentIconBtn","data-tip":_l("\u540C\u65F6\u8F6C\u53D1\u6B64\u6761")},U.createElement("i",{className:O()("icon-forward2 Font19 ThemeColor3",{hoverRelayBtn:!this.state.isReshare}),onClick:function(){return x.setState({isReshare:!x.state.isReshare})}})):null,U.createElement("div",{className:"flex"}),U.createElement("span",{className:O()("commentSelectGroup",{Hidden:!this.state.isReshare})},U.createElement("input",{type:"hidden",ref:function(oe){x.selectGroup=oe}})),U.createElement(j.ZP,{id:this.textareaId+"-submit",className:"commentSubmit",onClick:function(){return x.handleSubmit()},disabled:this.state.disabled,children:this.props.submitButtonText||_l("\u53D1\u9001")})),U.createElement("div",{className:O()("commentAttachmentsBox",{Hidden:!this.state.showAttachment||!G})},U.createElement(I.Z,{projectId:v,appId:l,worksheetId:ne,rowDisplay:!0,canAddLink:i,arrowLeft:9,maxWidth:220,dropPasteElement:this.textareaId+"-textarea",onDropPasting:function(){return x.setState({showAttachment:!0,isEditing:!0})},onUploadComplete:function(oe){return x.onUploadComplete(oe)},temporaryData:this.state.attachmentData,kcAttachmentData:this.state.kcAttachmentData,onTemporaryDataUpdate:function(oe){return x.setState({attachmentData:oe})},onKcAttachmentDataUpdate:function(oe){return x.setState({kcAttachmentData:oe})}})))}}]),X}(U.Component),w.propTypes={placeholder:V().string,activePlaceholder:V().string,textareaMaxHeight:V().number,textareaMinHeight:V().number,textareaExpandHeight:V().number,storageId:V().string,autoFocus:V().bool,autoShrink:V().bool,shrinkAfterSubmit:V().bool,disableMentions:V().bool,mentionsOptions:V().shape({placement:V().string,relatedLeftSpace:V().number,relatedTopSpace:V().number,isAtAll:V().bool}),canAddLink:V().bool,disableShareToPost:V().bool,sendPost:V().bool,selectGroupOptions:V().shape({position:V().string,projectId:V().string}),sourceId:V().string.isRequired,sourceType:V().oneOf(le().values(n.F)),replyId:V().string,appId:V().string,remark:V().string,accountId:V().string,fromAppId:V().string,submitButtonText:V().string,onSubmit:V().func.isRequired,onSubmitCallback:V().func,onFocusStateChange:V().func},w.defaultProps={placeholder:_l("\u53D1\u8868\u8BC4\u8BBA\uFF08\u6309Ctrl+Enter\u5FEB\u901F\u53D1\u5E03\uFF09"),canAddLink:!0,textareaMaxHeight:180,textareaMinHeight:50,textareaExpandHeight:50,autoShrink:!0,shrinkAfterSubmit:!1,sendPost:!0,autoFocus:!1,onSubmitCallback:function(){}},K);F.TYPES=n.F;const h=F},70070:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>y});var ce=t(12424),g=t(67294),p=t(20640),L=t.n(p),te=t(19807);function R(a){try{return"error occurred:"+a.componentStack+`
`+a.error.message+`
`+a.error.stack}catch(r){return"parse error fail!"}}const y=function(a){var r=a.isSeriousError,o=a.errorData,d=o===void 0?{}:o,Z=(0,g.useState)(),H=(0,ce.Z)(Z,2),U=H[0],f=H[1];return r===!1?g.createElement("div",{className:"programErrorMinBox flexColumn ThemeBGColor9 flex"},g.createElement("i",{className:"icon-task-setting_promet Font56"}),g.createElement("div",{className:"Font14 mTop20"},_l("\u7A0B\u5E8F\u9519\u8BEF\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5")),U&&g.createElement("div",{className:"errorPageErrorLog"},g.createElement("span",{className:"copy",onClick:function(){L()(R(d)),alert(_l("\u7A0B\u5E8F\u9519\u8BEF\u4FE1\u606F\u590D\u5236\u6210\u529F"))}},_l("\u590D\u5236")),g.createElement("br",null),R(d)),g.createElement("div",{className:"errorPageShowError",onClick:function(){return f(!0)}})):g.createElement("div",{className:"programErrorBox  flex"},g.createElement("div",{className:"programError flexColumn"},g.createElement("div",{className:"programErrorImg"}),g.createElement("div",{className:"Font20 mTop20"},_l("\u7A0B\u5E8F\u9519\u8BEF\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5")),g.createElement("div",{className:"Font13 mTop10 Gray_9e"},_l("\u5982\u5237\u65B0\u540E\u4ECD\u65E0\u6CD5\u89E3\u51B3\uFF0C\u8BF7\u8054\u7CFB\u5BA2\u670D\u6C47\u62A5\u9519\u8BEF")),g.createElement("div",{className:"Font14 ThemeBGColor3 ThemeHoverBGColor2 programRefresh mTop25 pointer",onClick:function(){return location.reload()}},_l("\u5237\u65B0")),U&&g.createElement("div",{className:"errorPageErrorLog"},g.createElement("span",{className:"copy",onClick:function(){L()(R(d)),alert(_l("\u7A0B\u5E8F\u9519\u8BEF\u4FE1\u606F\u590D\u5236\u6210\u529F"))}},_l("\u590D\u5236")),g.createElement("br",null),R(d)),g.createElement("div",{className:"errorPageShowError",onClick:function(){return f(!0)}})))}},44036:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>f});var ce=t(85105),g=t.n(ce),p=t(99663),L=t(22600),te=t(49135),R=t(93196),y=t(45697),a=t.n(y),r=t(67294),o=t(93967),d=t.n(o),Z=t(19807),H,U,f=(U=H=function(V){(0,R.default)(C,V);function C(O){return(0,p.default)(this,C),(0,te.default)(this,(C.__proto__||g()(C)).call(this,O))}return(0,L.default)(C,[{key:"render",value:function(){var n=this.props,s=n.text,j=n.btnText,A=n.showBtn,S=n.callback,I=n.className,c=n.iconClassName;return r.createElement("div",{className:d()("flexColumn noAuthContentBox",I)},r.createElement("i",{className:d()("icon-task-folder-message",c)}),r.createElement("div",{className:"Font17 mTop20"},s),A?r.createElement("span",{className:"Font14 ThemeBGColor3 ThemeHoverBGColor2 noAuthJoin mTop25 pointer",onClick:S},j):void 0)}}]),C}(r.Component),H.propTypes={text:a().string,showBtn:a().bool,className:a().string,iconClassName:a().string,btnText:a().string,callback:a().func},H.defaultProps={text:"",btnText:_l("\u7533\u8BF7\u52A0\u5165"),showBtn:!1,callback:function(){}},U)},86995:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>S});var ce=t(12424),g=t(39216),p=t.n(g),L=t(48272),te=t.n(L),R=t(88106),y=t(85105),a=t.n(y),r=t(99663),o=t(22600),d=t(49135),Z=t(93196),H=t(67294),U=t(45697),f=t.n(U),V=t(45231),C=t(5505),O=t(91877),n=t(96486),s=t.n(n),j,A,S=(A=j=function(I){(0,Z.default)(c,I);function c(){var q,b,k,ee;(0,r.default)(this,c);for(var re=arguments.length,ie=Array(re),le=0;le<re;le++)ie[le]=arguments[le];return ee=(b=(k=(0,d.default)(this,(q=c.__proto__||a()(c)).call.apply(q,[this].concat(ie))),k),k.getRowById=function(E){var w,K=E.appId,N=E.worksheetId,F=E.viewId,h=E.rowId,z=k.props,X=z.filterControls,B=z.parentWorksheetId,x=window.isPublicWorksheet?C.Z.getRelationRows:V.Z.getFilterRows;x((w={appId:K,worksheetId:N,rowId:h,filterControls:X},(0,R.default)(w,"rowId",h),(0,R.default)(w,"relationWorksheetId",B),(0,R.default)(w,"getType",7),(0,R.default)(w,"status",1),(0,R.default)(w,"searchType",1),w)).then(function(Q){var i=s().find(Q.data,{rowid:h});i?k.props.onChange(i):te().catch(_l("\u65E0\u6CD5\u5173\u8054\uFF0C\u6B64\u8BB0\u5F55\u4E0D\u5728\u53EF\u5173\u8054\u7684\u8303\u56F4\u5185"))})},k.handleRelateRow=function(E){var w=k.props.worksheetId;if(E.includes("worksheetshare")||E.includes("public/record")){var K=(E.match(/\/worksheetshare\/(.*)/)||E.match(/\/public\/record\/(.*)/))[1];V.Z.getShareInfoByShareId({shareId:K}).then(function(m){m=m.data||{},w===m.worksheetId?k.getRowById(m):te().catch(_l("\u65E0\u6CD5\u5173\u8054\uFF0C\u6B64\u8BB0\u5F55\u4E0D\u5728\u53EF\u5173\u8054\u7684\u8303\u56F4\u5185"))});return}else{var N=E.match(/app\/(.*)\/(.*)\/(.*)\/row\/(.*)/);if(N){var F=(0,ce.Z)(N,5),h=F[0],z=F[1],X=F[2],B=F[3],x=F[4],Q=s().get(k.props,"control.advancedSetting")||{},i=Q.scanlink;if(z&&X&&B&&x){if(i!=="1")return;w===X?k.getRowById({appId:z,worksheetId:X,viewId:B,rowId:x}):te().catch(_l("\u65E0\u6CD5\u5173\u8054\uFF0C\u6B64\u8BB0\u5F55\u4E0D\u5728\u53EF\u5173\u8054\u7684\u8303\u56F4\u5185"))}else k.props.onOpenRecordCardListDialog(E)}else k.props.onOpenRecordCardListDialog(E)}},b),(0,d.default)(k,ee)}return(0,o.default)(c,[{key:"render",value:function(){var b=this.props,k=b.className,ee=b.projectId,re=b.children;return H.createElement(O.Z,{className:k,projectId:ee,onScanQRCodeResult:this.handleRelateRow},re)}}]),c}(H.Component),j.propTypes={projectId:f().string,onChange:f().func,children:f().element},A)},91877:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>x,g:()=>X});var ce=t(33867),g=t(46593),p=t.n(g),L=t(20148),te=t.n(L),R=t(60385),y=t.n(R),a=t(63239),r=t.n(a),o=t(39216),d=t.n(o),Z=t(48272),H=t.n(Z),U=t(85105),f=t.n(U),V=t(99663),C=t(22600),O=t(49135),n=t(93196),s=t(86735),j=t(67294),A=t(45697),S=t.n(A),I=t(93967),c=t.n(I),q=t(15577),b=t(64381),k=t(71893),ee=t(96486),re=t.n(ee),ie,le,E=(0,s.Z)([`
  justify-content: center;
  .iconWrap {
    width: 94px;
    height: 94px;
    border-radius: 50%;
    justify-content: center;
    background-color: #f5f5f5;
  }
`],[`
  justify-content: center;
  .iconWrap {
    width: 94px;
    height: 94px;
    border-radius: 50%;
    justify-content: center;
    background-color: #f5f5f5;
  }
`]),w=(0,s.Z)([`
  color: #fff;
  width: auto;
  height: 36px;
  padding: 0 24px;
  border-radius: 24px;
  margin: 0 auto;
  background-color: #0099f6;
  input {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    z-index: 1;
  }
`],[`
  color: #fff;
  width: auto;
  height: 36px;
  padding: 0 24px;
  border-radius: 24px;
  margin: 0 auto;
  background-color: #0099f6;
  input {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    z-index: 1;
  }
`]),K=k.ZP.div(E),N=k.ZP.div(w),F=md.global.Config.IsLocal,h=window.isWeiXin&&!F&&!window.isWxWork,z=(0,q.Q9)(),X=function(){return z},B=function(i){return i.replace(/^(CODE_39,)|(CODE_93,)|(CODE_128,)|(EAN_8,)|(EAN_13,)|(UPC_A,)|(UPC_E,)|(UPC_EAN_EXTENSION,)|(ITF,)|(RSS_14,)|(RSS_EXPANDED,)/g,"")},x=(le=ie=function(Q){(0,n.default)(i,Q);function i(m){(0,V.default)(this,i);var v=(0,O.default)(this,(i.__proto__||f()(i)).call(this,m));return v.handleWxScanQRCode=function(){window.wx.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:function(P){v.props.onScanQRCodeResult(B(P.resultStr))},error:function(P){P.errMsg.includes("cancel")||H().catch(P.errMsg)}})},v.handleFeishuScanQRCode=function(){window.tt.scanCode({scanType:["barCode","qrCode"],success:function(P){v.props.onScanQRCodeResult(P.result)},fail:function(P){var u=P.errMsg;u.includes("cancel")||u.includes("canceled")||window.nativeAlert(r()(P))}})},v.handleScanCode=function(){var W=v.props.projectId;if(h){(0,b.Eg)(v.handleWxScanQRCode,(0,b.xt)(),function(P){P&&t.e(4580).then(t.bind(t,54580)).then(function(u){v.qrCodeComponent=u,v.handleScanQRCode()})});return}if(window.isWxWork){(0,b.Eg)(v.handleWxScanQRCode,(0,b.MH)(W),function(P){P&&t.e(4580).then(t.bind(t,54580)).then(function(u){v.qrCodeComponent=u,v.handleScanQRCode()})});return}if(window.isFeiShu){(0,b.Eg)(v.handleFeishuScanQRCode,(0,b.M8)(W),function(P){P&&t.e(4580).then(t.bind(t,54580)).then(function(u){v.qrCodeComponent=u,v.handleScanQRCode()})});return}if(window.isWeLink&&window.HWH5){window.HWH5.scanCode({needResult:1}).then(function(P){var u=P.content;v.props.onScanQRCodeResult(u)}).catch(function(P){H().catch(_l("\u626B\u7801\u5F02\u5E38"))});return}if(window.isDingTalk){window.dd.biz.util.scan({type:"all",onSuccess:function(u){v.props.onScanQRCodeResult(u.text)},onFail:function(){H().catch(_l("\u626B\u7801\u5F02\u5E38"))}});return}v.handleScanQRCode()},v.handleScanQRCode=function(){if(location.protocol==="http:"&&location.hostname!=="localhost"){y().alert(_l("\u6D4F\u89C8\u5668\u5E73\u53F0\u4EC5https\u73AF\u5883\u652F\u6301\u8C03\u7528\u6444\u50CF\u5934api"),"",[{text:_l("\u786E\u5B9A")}]);return}v.setState({visible:!0},function(){setTimeout(function(){var W=v.state.devices;W.length?v.initQrcode():v.getCameras().then(function(){v.initQrcode()})},300)})},v.handleClose=function(){v.setState({visible:!1},function(){v.clearQrcode()})},v.handleScanSuccess=function(W,P){W&&(v.handleClose(),v.props.onScanQRCodeResult(W))},v.handleChangeCamera=function(){var W=v.state,P=W.cameraId,u=W.devices,l=W.resetCameraLoading,T=W.uploadFile,G=re().findIndex(u,{id:P}),D=G===-1?re().get(u[0],"id"):(u[G+1]||u[0]).id;if(T){v.startQrcode(),v.setState({uploadFile:!1});return}l||!v.html5QrCode||(v.setState({resetCameraLoading:!0}),v.setState({cameraId:D},function(){v.html5QrCode.stop().then(function(M){v.startQrcode(),v.setState({resetCameraLoading:!1});var se=re().find(u,{id:D});se&&H().info(_l("\u5207\u6362\u81F3 %0",se.label),2)})}))},v.handleChangeSize=function(){var W=v.state,P=W.scanShape,u=W.resetCameraLoading,l=W.uploadFile;u||!v.html5QrCode||l||(v.setState({resetCameraLoading:!0}),v.setState({scanShape:P==="square"?"rectangle":"square"},function(){v.html5QrCode.stop().then(function(T){v.startQrcode(),v.setState({resetCameraLoading:!1})})}))},v.handleOpenUploadFile=function(){v.html5QrCode.stop().then(function(W){v.html5QrCode.clear(),v.setState({uploadFile:!0})}).catch(function(W){})},v.handleScanFile=function(W){if(W.target.files.length!=0){var P=W.target.files[0];v.html5QrCode.scanFile(P,!0).then(v.handleScanSuccess).catch(function(u){alert(_l("\u672A\u89E3\u6790\u5230\u4E8C\u7EF4\u7801"),3)})}},v.state={visible:!1,isError:!1,devices:[],cameraId:null,resetCameraLoading:!1,scanShape:"square",uploadFile:!1},v.id=Date.now(),v.html5QrCode=null,v}return(0,C.default)(i,[{key:"componentDidMount",value:function(){var v=this;window.isDingTalk||window.isWeLink||h||window.isWxWork||window.isFeiShu||t.e(4580).then(t.bind(t,54580)).then(function(W){v.qrCodeComponent=W})}},{key:"componentWillUnmount",value:function(){this.clearQrcode()}},{key:"getCameras",value:function(){var v=this,W=this.qrCodeComponent.Html5Qrcode;return new(p())(function(P,u){W.getCameras().then(function(l){l&&l.length&&v.setState({devices:l},P)})})}},{key:"initQrcode",value:function(){var v=this.qrCodeComponent.Html5Qrcode;this.html5QrCode=new v("qrcodeWrapper-"+this.id,{formatsToSupport:this.formatsToSupport}),this.startQrcode()}},{key:"startQrcode",value:function(){var v=this,W=this.state.scanShape,P={fps:10,aspectRatio:1,rememberLastUsedCamera:!0,qrbox:function(M,se){if(W==="square"){var ae=M>se?se:M,ne=Math.floor(.8*ae);return ne<250?ae<250?{width:ae,height:ae}:{width:250,height:250}:{width:ne,height:ne}}else return{width:M-20,height:220}}},u=this.state.cameraId,l={facingMode:"environment"},T={deviceId:{exact:u}},G=u?T:l;this.html5QrCode.start(G,P,this.handleScanSuccess).catch(function(D){v.setState({isError:!0})})}},{key:"clearQrcode",value:function(){var v=this;if(this.html5QrCode){var W=this.state.isError,P=this.html5QrCode.getState();W||P===1?this.html5QrCode.clear():this.html5QrCode.stop().then(function(u){v.html5QrCode.clear(),v.html5QrCode=null}).catch(function(u){}),this.setState({cameraId:null})}this.setState({isError:!1,uploadFile:!1})}},{key:"render",value:function(){var v=this.state,W=v.visible,P=v.isError,u=v.devices,l=v.scanShape,T=v.uploadFile,G=this.props,D=G.className,M=G.disablePhoto,se=G.children;return j.createElement(j.Fragment,null,j.createElement("div",{className:D,onClick:this.handleScanCode},se),j.createElement(y(),{popup:!0,visible:W,onClose:this.handleClose,animationType:"slide-up",className:"h100"},j.createElement("div",{className:"valignWrapper h100",style:{backgroundColor:P?"#fff":"#000"}},j.createElement("div",{className:"flexColumn w100"},P?j.createElement(K,{className:"flexColumn valignWrapper h100"},j.createElement("div",{className:"iconWrap valignWrapper mBottom24"},j.createElement(ce.Z,{className:"Gray_75 Font38",icon:"camera_alt"})),j.createElement("div",{className:"Font16 bold Gray"},_l("\u65E0\u6CD5\u8BC6\u522B\u60A8\u7684\u6444\u50CF\u5934"))):j.createElement("div",{id:"qrcodeWrapper-"+this.id,className:c()("qrcodeWrapper flex",{hide:T})}),!P&&j.createElement(j.Fragment,null,j.createElement("div",{className:"Absolute",style:{left:"5%",top:"5%"},onClick:this.handleChangeCamera},j.createElement(ce.Z,{className:"Font28 White",icon:"switch_camera"})),j.createElement("div",{className:"Absolute",style:{left:"15%",top:"5%"},onClick:this.handleChangeSize},j.createElement(ce.Z,{className:c()("Font28",T?"Gray_9e":"White"),icon:l==="square"?"get_bigger":"put_away"})),!M&&j.createElement("div",{className:"Absolute",style:{left:"25%",top:"5.5%"},onClick:this.handleOpenUploadFile},j.createElement(ce.Z,{className:"Font26 White",icon:"insert_photo_21"}))),j.createElement("div",{className:"Absolute",style:{right:"5%",top:"5%"},onClick:this.handleClose},j.createElement(ce.Z,{className:c()("Font28",P?"Gray_9e":"White"),icon:"closeelement-bg-circle"})),T&&j.createElement(N,{className:"valignWrapper justifyContentCenter Relative"},_l("\u4E0A\u4F20\u56FE\u7247\u8FDB\u884C\u8BC6\u522B"),j.createElement("input",{type:"file",accept:"image/*",onChange:this.handleScanFile}))))))}},{key:"formatsToSupport",get:function(){var v=this.qrCodeComponent.Html5QrcodeSupportedFormats;return[v.QR_CODE,v.CODE_39,v.CODE_93,v.CODE_128,v.EAN_8,v.EAN_13,v.UPC_A,v.UPC_E,v.UPC_EAN_EXTENSION,v.ITF,v.RSS_14,v.RSS_EXPANDED]}}]),i}(j.Component),ie.propTypes={projectId:S().string,disablePhoto:S().bool,onChange:S().func,onScanQRCodeResult:S().func,children:S().element},le)},48152:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>re});var ce=t(70264),g=t(6100),p=t(33867),L=t(85315),te=t(12424),R=t(86735),y=t(67294),a=t(37727),r=t(45697),o=t.n(r),d=t(71893),Z=t(93967),H=t.n(Z),U=t(96486),f=t.n(U),V=(0,R.Z)([`
  display: flex;
  height: 56px;
`],[`
  display: flex;
  height: 56px;
`]),C=(0,R.Z)([`
  height: 56px;
  display: flex;
  flex: 1;
  overflow: hidden;
`],[`
  height: 56px;
  display: flex;
  flex: 1;
  overflow: hidden;
`]),O=(0,R.Z)([`
  flex: 0 0 auto;
  position: relative;
  line-height: 55px;
  padding: 0 19px;
  font-size: 15px;
  color: #333;
  text-align: center;
  cursor: pointer;
  font-weight: bold;
  max-width: 200px;
  display: flex;
  align-items: center;
  &:hover {
    background-color: rgba(0, 0, 0, 0.04);
    &:after {
      display: none;
    }
  }
  &:after {
    content: ' ';
    position: absolute;
    top: 18px;
    bottom: 18px;
    width: 1px;
    background-color: rgba(0, 0, 0, 0.04);
    right: 0px;
  }
  &:last-child:after {
    display: none;
  }
  &.active:before {
    content: ' ';
    position: absolute;
    left: 0px;
    right: 0px;
    height: 3px;
    background-color: #2196f3;
    bottom: 0px;
  }
`],[`
  flex: 0 0 auto;
  position: relative;
  line-height: 55px;
  padding: 0 19px;
  font-size: 15px;
  color: #333;
  text-align: center;
  cursor: pointer;
  font-weight: bold;
  max-width: 200px;
  display: flex;
  align-items: center;
  &:hover {
    background-color: rgba(0, 0, 0, 0.04);
    &:after {
      display: none;
    }
  }
  &:after {
    content: ' ';
    position: absolute;
    top: 18px;
    bottom: 18px;
    width: 1px;
    background-color: rgba(0, 0, 0, 0.04);
    right: 0px;
  }
  &:last-child:after {
    display: none;
  }
  &.active:before {
    content: ' ';
    position: absolute;
    left: 0px;
    right: 0px;
    height: 3px;
    background-color: #2196f3;
    bottom: 0px;
  }
`]),n=(0,R.Z)([`
  display: inline-block;
  color: #9e9e9e;
  margin-left: 4px;
  white-space: pre;
`],[`
  display: inline-block;
  color: #9e9e9e;
  margin-left: 4px;
  white-space: pre;
`]),s=(0,R.Z)([`
  width: 36px;
  line-height: 56px;
  padding-left: 10px;
`],[`
  width: 36px;
  line-height: 56px;
  padding-left: 10px;
`]),j=(0,R.Z)([`
  padding-left: 10px;
  height: 56px;
  span {
    display: inline-block;
    line-height: 1em;
    margin: 18px 0;
  }
`],[`
  padding-left: 10px;
  height: 56px;
  span {
    display: inline-block;
    line-height: 1em;
    margin: 18px 0;
  }
`]),A=(0,R.Z)([`
  line-height: 18px;
  display: inline-block;
  margin-right: 6px;
`],[`
  line-height: 18px;
  display: inline-block;
  margin-right: 6px;
`]),S=d.ZP.div(V),I=d.ZP.div(C),c=d.ZP.div(O),q=d.ZP.div(n),b=d.ZP.div(s),k=d.ZP.div(j),ee=d.ZP.span(A);function re(ie){var le=ie.style,E=le===void 0?{}:le,w=ie.sideVisible,K=ie.formWidth,N=ie.showSplitIcon,F=ie.controls,h=ie.isSplit,z=ie.setSplit,X=ie.activeControlId,B=ie.onClick,x=ie.widgetStyle,Q=(0,y.useRef)(),i=(0,y.useState)(),m=(0,te.Z)(i,2),v=m[0],W=v===void 0?0:v,P=m[1],u=(0,y.useState)(),l=(0,te.Z)(u,2),T=l[0],G=T===void 0?0:T,D=l[1],M=(0,y.useState)(),se=(0,te.Z)(M,2),ae=se[0],ne=se[1],de=(0,y.useState)(0),Ce=(0,te.Z)(de,2),he=Ce[0],fe=Ce[1];function Ee(oe){var ve=void 0,ue=W/2;oe==="prev"?ve=he-ue<0?0:he-ue:ve=he+ue>G-W?G-W:he+ue,fe(ve)}(0,y.useEffect)(function(){var oe=f().sum([].concat((0,L.Z)(Q.current.children)).map(function(ve){return ve.offsetWidth}));oe&&(D(oe),Q.current.clientWidth<oe?(P(Q.current.clientWidth-36),ne(!0)):(P(Q.current.clientWidth),ne(!1)))}),(0,y.useEffect)(function(){fe(0)},[w,K]);function Y(oe){var ve=oe.iconUrl,ue=f().get(x,"showicon")||"1";if(ue!=="1")return null;if(f().includes([51,52],oe.type)){var pe=f().get(oe,"advancedSetting.icon");if(!pe){var Se=oe.type===51?"Worksheet_query":"tab";return y.createElement(ee,null,y.createElement(p.Z,{icon:Se,className:"Font14",style:{color:"#6e6e6e"}}))}ve=safeParse(pe).iconUrl}return ve&&y.createElement(ee,null,y.createElement(g.Z,{url:ve,fill:"#6e6e6e",size:18}))}return y.createElement(S,{style:E},y.createElement(I,{ref:Q},y.createElement(a.y_,{defaultStyle:{scrollLeft:he},style:{scrollLeft:(0,a.ST)(-1*he)}},function(oe){return y.createElement("span",{style:{marginLeft:oe.scrollLeft}})}),F.map(function(oe,ve){var ue=f().get(oe,"advancedSetting.showcount")!=="1"&&oe.type!==51&&f().isNumber(Number(oe.value))&&!f().isNaN(Number(oe.value))&&Number(oe.value)!==0,pe=oe.value||0;return oe.type===29&&oe.store&&!oe.store.getState().loading&&(pe=oe.store.getState().tableState.count),y.createElement(c,{key:ve,title:oe.controlName,className:H()("ellipsis",X===oe.controlId?"active":""),onClick:function(){X!==oe.controlId&&B(oe.controlId,oe)}},Y(oe),y.createElement("span",{className:"ellipsis"},oe.controlName),ue&&!!pe&&y.createElement(q,null," ( ",pe," ) "))})),ae&&y.createElement(b,null,y.createElement("i",{className:"icon icon-arrow-left-tip "+(he===0?"Gray_bd":"Gray_75 Hand")+" Font13",onClick:function(){return Ee("prev")}}),y.createElement("i",{className:"icon icon-arrow-right-tip "+(he===G-W?"Gray_bd":"Gray_75 Hand")+" Font13",onClick:function(){return Ee("next")}})),N&&y.createElement(k,null,y.createElement(ce.Z,{text:h?_l("\u53D6\u6D88\u5206\u680F"):_l("\u5206\u680F\u663E\u793A")},y.createElement("span",null,y.createElement("i",{className:"icon icon-"+(h?"call_to_action_off":"call_to_action_on")+" Font20 Gray_9e Hand ThemeHoverColor3",onClick:function(){return z(!h)}})))))}re.propTypes={style:o().shape({}),showSplitIcon:o().bool,isSplit:o().bool,setSplit:o().func,controls:o().arrayOf(o().shape({})),activeControlId:o().string,onClick:o().func}},99910:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>O});var ce=t(33867),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(86735),r=t(67294),o=t(45697),d=t.n(o),Z=t(71893),H=t(91877),U,f,V=(0,a.Z)([`
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid #e0e0e0;
  border-radius: 3px;
  position: absolute;
  right: 0;
  top: 0;
`],[`
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid #e0e0e0;
  border-radius: 3px;
  position: absolute;
  right: 0;
  top: 0;
`]),C=(0,Z.ZP)(H.Z)(V),O=(f=U=function(n){(0,y.default)(s,n);function s(){return(0,L.default)(this,s),(0,R.default)(this,(s.__proto__||p()(s)).apply(this,arguments))}return(0,te.default)(s,[{key:"render",value:function(){var A=this.props,S=A.projectId,I=A.disablePhoto,c=A.onChange;return r.createElement(C,{projectId:S,disablePhoto:I,onScanQRCodeResult:c},r.createElement(ce.Z,{icon:"qr_code_19",className:"Font20 Gray_75"}))}}]),s}(r.Component),U.propTypes={projectId:d().string,disablePhoto:d().bool,onChange:d().func},f)},14651:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>V});var ce=t(70264),g=t(37888),p=t(85105),L=t.n(p),te=t(99663),R=t(22600),y=t(49135),a=t(93196),r=t(67294),o=t(73935),d=t(96486),Z=t.n(d),H=t(6917),U=t(15577),f=function(C){(0,a.default)(O,C);function O(n){(0,te.default)(this,O);var s=(0,y.default)(this,(O.__proto__||L()(O)).call(this,n));return s.state={isShow:!1},s}return(0,R.default)(O,[{key:"componentDidMount",value:function(){this.formcon&&this.formcon.clientHeight<=48&&o.findDOMNode(this.formconMoreDesc).setAttribute("style","display:none")}},{key:"render",value:function(){var s=this,j=this.props,A=j.item,S=j.from,I=this.state.isShow,c=(0,U.Q9)(),q=Z().get(A,"advancedSetting.hinttype")||"0",b=q==="0"?Z().includes([H.BD.NEWRECORD,H.BD.PUBLIC_ADD,H.BD.H5_ADD,H.BD.DRAFT],S)&&!A.isSubList:q==="2";return!A.desc||A.type===22||A.type===10010?null:b?r.createElement(g.Z,{properties:{target:"_blank"}},r.createElement("p",{className:"descBox pAll0 mAll0 mBottom0 mTop6 Font12 Gray_9e w100 WordBreak"},r.createElement("span",{className:"descTxt",ref:function(ee){return s.formconBox=ee}},r.createElement("span",{ref:function(ee){return s.formcon=ee},className:"descText"},A.desc),r.createElement("span",{ref:function(ee){return s.formconMoreDesc=ee},className:"moreDesc Hand Font12",onClick:function(){I?o.findDOMNode(s.formconBox).setAttribute("style","max-height:48px"):o.findDOMNode(s.formconBox).setAttribute("style","max-height:100%"),s.setState({isShow:!I})}},I?_l("\u6536\u8D77"):_l("\u66F4\u591A"))))):r.createElement("span",{className:"descBoxInfo"},r.createElement(ce.Z,{text:r.createElement("span",{className:"Block",style:{maxWidth:230,maxHeight:200,overflowY:"auto",color:"#fff",whiteSpace:"pre-wrap"}},A.desc),action:[c?"click":"hover"],popupPlacement:"topLeft",offset:[-12,0]},r.createElement("i",{className:"icon-workflow_error pointer Font16 Gray_9e mLeft3 InlineBlock"})))}}]),O}(r.Component);const V=/^(1887|7596|7798)$/.test(t.j)?null:f},24538:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>mo});var ce=t(85315),g=t(94942),p=t.n(g),L=t(36803),te=t(54208),R=t(12424),y=t(69288),a=t(20148),r=t(60385),o=t.n(r),d=t(88106),Z=t(52945),H=t.n(Z),U=t(47518),f=t.n(U),V=t(88239),C=t(85105),O=t.n(C),n=t(99663),s=t(22600),j=t(49135),A=t(93196),S=t(86735),I=t(45697),c=t.n(I),q=t(73935),b=t(67294),k=t(45231),ee=t(93967),re=t.n(ee),ie=t(95679),le=t(63239),E=t.n(le),w=t(15577),K=t(98084),N=t(24607),F=t(96486),h=t.n(F),z=t(40240),X,B,x=(B=X=function(nn){(0,A.default)(Bt,nn);function Bt(){var ln,Je,je,Tt;(0,n.default)(this,Bt);for(var Gt=arguments.length,rn=Array(Gt),qt=0;qt<Gt;qt++)rn[qt]=arguments[qt];return Tt=(Je=(je=(0,j.default)(this,(ln=Bt.__proto__||O()(Bt)).call.apply(ln,[this].concat(rn))),je),je.getItemWidth=function(Pt){var Yt=je.props.advancedSetting||{},Qt=Yt.width,vn=Qt===void 0?"200":Qt,cn=Yt.direction,mn=cn===void 0?"2":cn,Dn=100,bn=je.props.width;if(bn&&mn==="0"){var Mn=Math.floor(bn/Number(vn))||1;Dn=100/(Mn>Pt.length?Pt.length:Mn)}return Dn+"%"},je.renderList=function(Pt,Yt){var Qt=je.props,vn=Qt.enumDefault2,cn=Qt.value,mn=Qt.disabled,Dn=(0,N.Ec)(cn),bn=Dn.otherValue;return b.createElement("span",{className:re()("ellipsis customRadioItem",{White:vn===1&&!(0,w.eO)(Pt.color)},{"pLeft12 pRight12":vn===1||Yt.length>1}),style:{background:vn===1?Pt.color:Yt.length>1?"#eaeaea":""}},bn&&mn&&(0,w.Q9)()?bn:Pt.value)},je.onChange=function(Pt){var Yt=je.props.value,Qt=(0,N.Ec)(Yt),vn=Qt.checkIds;h().includes(vn,Pt)&&(Pt=""),je.props.onChange(E()(Pt?[Pt]:[]))},Je),(0,j.default)(je,Tt)}return(0,s.default)(Bt,[{key:"render",value:function(){var Je=this,je=this.props,Tt=je.disabled,Gt=je.advancedSetting,rn=je.className,qt=je.vertical,Pt=je.options,Yt=je.value,Qt=Gt||{},vn=Qt.direction,cn=vn===void 0?"2":vn,mn=Qt.width,Dn=mn===void 0?"200":mn,bn=(0,N.Ec)(Yt),Mn=bn.checkIds,Ln=Pt.filter(function(Wn){return!Wn.isDeleted&&(h().includes(Mn,Wn.key)||!Wn.hide&&!Tt)});return b.createElement("div",{className:re()("customFormControlBox formBoxNoBorder",{controlDisabled:Tt},{groupColumn:cn==="1"||(0,w.Q9)()},{groupRow:cn==="2"&&!(0,w.Q9)()}),style:{height:"auto"}},b.createElement("div",{className:"ming RadioGroup2 "+(rn||"")},b.createElement("div",{className:re()("RadioGroupCon",{flexColumn:qt,horizonArrangementRadio:(cn==="0"||cn==="2")&&(0,w.Q9)()})},Ln.map(function(Wn,oa){return b.createElement("div",{className:"flexColumn",style:cn==="0"&&!(0,w.Q9)()?{width:Je.getItemWidth(Ln)}:{}},(0,w.Q9)()&&Tt&&Wn.key==="other"?b.createElement("div",{className:"flexColumn",style:cn==="0"&&!(0,w.Q9)()?{width:Dn+"px"}:{}},b.createElement(ie.Z,{needDefaultUpdate:!0,key:oa,disabled:Tt,text:Je.renderList(Wn,Mn),value:Wn.key,checked:h().includes(Mn,Wn.key),title:Wn.value,onClick:Je.onChange})):b.createElement("div",{className:"flexColumn",style:cn==="0"&&!(0,w.Q9)()?{width:Dn+"px"}:{}},b.createElement(ie.Z,{needDefaultUpdate:!0,key:oa,disabled:Tt,text:Je.renderList(Wn,Mn),value:Wn.key,checked:h().includes(Mn,Wn.key),title:Wn.value,onClick:Je.onChange}),Wn.key==="other"&&b.createElement("div",{className:"otherInputBox"},b.createElement(K.Z,(0,V.default)({},Je.props,{isSelect:!!(0,w.Q9)()})))))}))))}}]),Bt}(b.Component),X.propTypes={from:c().number,disabled:c().bool,options:c().any,value:c().string,enumDefault2:c().number,onChange:c().func},B);const Q=(0,z.Z)(x,{onlyWidth:!0});var i=t(17529),m=t(82570),v=t(43514),W=t(33867),P=t(94796),u=t(6917),l=t(30381),T=t.n(l),G,D,M=(D=G=function(nn){(0,A.default)(Bt,nn);function Bt(){var ln,Je,je,Tt;(0,n.default)(this,Bt);for(var Gt=arguments.length,rn=Array(Gt),qt=0;qt<Gt;qt++)rn[qt]=arguments[qt];return Tt=(Je=(je=(0,j.default)(this,(ln=Bt.__proto__||O()(Bt)).call.apply(ln,[this].concat(rn))),je),je.onChange=function(Pt){var Yt=je.props.type,Qt=Yt===17?"YYYY-MM-DD":"YYYY-MM-DD HH:mm";Pt&&(Pt=E()([Pt[0].format(Qt),Pt[1].format(Qt)])),je.props.onChange(Pt)},Je),(0,j.default)(je,Tt)}return(0,s.default)(Bt,[{key:"duration",value:function(){var Je=this.props.type,je=JSON.parse(this.props.value||E()(["",""])),Tt="";if(je[0]){var Gt=T()(je[0]),rn=T()(je[1]),qt=_l("\u5929"),Pt=rn.diff(Gt,"days")+1;if(Je===17)Tt=" "+_l("\u65F6\u957F")+": "+Pt+" "+qt;else{var Yt=new Date(je[1]).getTime()-new Date(je[0]).getTime(),Qt=Math.floor(Yt/(24*3600*1e3)),vn=Yt%(24*3600*1e3),cn=Math.floor(vn/(3600*1e3)),mn=vn%(3600*1e3),Dn=Math.floor(mn/(60*1e3));Tt=" "+_l("\u65F6\u957F")+": "+(Qt>0?_l("%0\u5929",Qt):"")+" "+(cn>0?_l("%0\u5C0F\u65F6",cn):"")+" "+(Dn>0?_l("%0\u5206\u949F",Dn):"")+" "}}return Tt}},{key:"render",value:function(){var Je=this,je=this.props,Tt=je.disabled,Gt=je.type,rn=je.from,qt=JSON.parse(this.props.value||E()(["",""])),Pt=qt[0]?T()(qt[0]):null,Yt=qt[1]?T()(qt[1]):null,Qt=Gt===17?"YYYY-MM-DD":"YYYY-MM-DD HH:mm",vn=this.duration();return b.createElement(P.Z,{disabled:Tt,selectedValue:Pt?[Pt,Yt]:null,timePicker:Gt===18,timeMode:"minute",placeholder:"",onOk:this.onChange,onClear:function(){return Je.onChange("")}},b.createElement("div",{className:re()("customFormControlBox customFormButton flexRow",{controlDisabled:Tt})},b.createElement("span",{className:re()("flex mRight20 ellipsis",{Gray_bd:!Pt})},Pt&&Yt?Pt.format(Qt)+" ~ "+Yt.format(Qt):_l("\u8BF7\u9009\u62E9\u65E5\u671F"),vn&&b.createElement("span",{className:"mLeft5"},vn)),!Tt&&b.createElement(W.Z,{icon:h().includes([u.BD.H5_ADD,u.BD.H5_EDIT],rn)?"arrow-right-border":"bellSchedule",className:"Font16 Gray_bd"})))}}]),Bt}(b.Component),G.propTypes={from:c().number,type:c().number,disabled:c().bool,value:c().string,onChange:c().func},D),se=t(51156),ae=t(3540),ne,de,Ce={19:_l("\u7701"),23:_l("\u7701-\u5E02"),24:_l("\u7701-\u5E02-\u53BF")},he=(de=ne=function(nn){(0,A.default)(Bt,nn);function Bt(ln){(0,n.default)(this,Bt);var Je=(0,j.default)(this,(Bt.__proto__||O()(Bt)).call(this,ln));return Je.onChange=function(je,Tt){var Gt=h().get(Je.props,"advancedSetting")||{},rn=Gt.anylevel,qt=h().last(je);Je.state.search&&Je.setState({search:void 0,keywords:""});var Pt=Je.props.type===19?1:Je.props.type===23?2:3,Yt=qt.path.split("/").length;rn==="1"&&!qt.last&&Pt>Yt||Je.props.onChange(E()({code:qt.id,name:qt.path}))},Je.onFetchData=h().debounce(function(je){Je.setState({keywords:je})},500),Je.state={search:void 0,keywords:"",visible:!1},Je}return(0,s.default)(Bt,[{key:"render",value:function(){var Je=this,je=this.props,Tt=je.disabled,Gt=je.type,rn=je.from,qt=je.value,Pt=je.onChange,Yt=je.advancedSetting,Qt=Yt||{},vn=Qt.anylevel,cn=this.state,mn=cn.search,Dn=cn.keywords,bn=cn.visible,Mn=void 0;try{Mn=JSON.parse(qt)}catch(Wn){}var Ln=(0,w.Q9)();return b.createElement(se.Z,{search:Dn,defaultValue:Mn?Mn.name:"",level:Gt===19?1:Gt===23?2:3,disabled:Tt,mustLast:vn==="1",callback:this.onChange,destroyPopupOnHide:!0,showConfirmBtn:vn!=="1",onClear:function(){Pt(""),mn&&Je.setState({search:"",keywords:""})},handleVisible:function(oa){Je.setState({visible:oa})}},b.createElement("button",{type:"button",className:re()("customFormControlBox customFormButton flexRow",{controlDisabled:Tt,mobileCustomFormButton:Ln,Border0:!Ln}),disabled:Tt},b.createElement(ae.Z,{className:re()("flex mRight20 ellipsis CityPicker-input-textCon"),placeholder:Mn?Mn.name:Ce[Gt],value:bn?mn||"":(Mn||{name:""}).name,onChange:function(oa){Je.setState({search:oa}),Je.onFetchData(oa)},disabled:Tt,readOnly:Tt||Ln}),!Tt&&b.createElement(b.Fragment,null,!!Mn&&!h().includes([u.BD.H5_ADD,u.BD.H5_EDIT],rn)&&b.createElement(W.Z,{icon:"workflow_cancel",className:"Font12 Gray_9e customFormButtoDel",onClick:function(oa){Pt(""),Je.setState({search:void 0,keywords:""}),oa.stopPropagation()}}),b.createElement(W.Z,{icon:h().includes([u.BD.H5_ADD,u.BD.H5_EDIT],rn)?"arrow-right-border":"text_map",className:"Font16 Gray_bd"}))))}}]),Bt}(b.Component),ne.propTypes={from:c().number,type:c().number,disabled:c().bool,value:c().string,onChange:c().func},de),fe=t(37888),Ee,Y,oe=(Y=Ee=function(nn){(0,A.default)(Bt,nn);function Bt(){return(0,n.default)(this,Bt),(0,j.default)(this,(Bt.__proto__||O()(Bt)).apply(this,arguments))}return(0,s.default)(Bt,[{key:"render",value:function(){var Je=this.props,je=Je.value,Tt=Je.type,Gt=Je.dot,rn=Je.unit,qt=Je.advancedSetting,Pt=Tt===32&&qt.analysislink!=="1",Yt=je;if(!h().isUndefined(je)&&Tt===31){var Qt=qt.prefix,vn=qt.suffix||rn;qt.numshow==="1"&&Yt&&(Yt=parseFloat(Yt)*100),Yt=h().isUndefined(Gt)?Yt:h().round(Yt,Gt).toFixed(Gt),qt.dotformat==="1"&&(Yt=(0,w.FY)(Yt)),qt.thousandth!=="1"&&(Yt=Yt.replace(Yt.indexOf(".")>-1?/(\d{1,3})(?=(?:\d{3})+\.)/g:/(\d{1,3})(?=(?:\d{3})+$)/g,"$1,")),Yt=(Qt?Qt+" ":"")+Yt+(vn?" "+vn:"")}return b.createElement("div",{className:re()("customFormControlBox customFormTextareaBox customFormReadonly",{spacing:Tt===25})},Pt?Yt:b.createElement(fe.Z,{properties:{target:"_blank"}},Yt))}}]),Bt}(b.Component),Ee.propTypes={value:c().any,type:c().number,dot:c().number,unit:c().string,advancedSetting:c().object},Y),ve=t(85879),ue=t(71893),pe,Se,ye=(0,S.Z)([`
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  z-index: `,`;
`],[`
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  z-index: `,`;
`]),J=ue.ZP.div(ye,function(nn){return nn.isEditing?2:-1}),me=(Se=pe=function(nn){(0,A.default)(Bt,nn);function Bt(){var ln,Je,je,Tt;(0,n.default)(this,Bt);for(var Gt=arguments.length,rn=Array(Gt),qt=0;qt<Gt;qt++)rn[qt]=arguments[qt];return Tt=(Je=(je=(0,j.default)(this,(ln=Bt.__proto__||O()(Bt)).call.apply(ln,[this].concat(rn))),je),je.state={originValue:"",isEditing:!1,maskStatus:_.get(je.props,"advancedSetting.datamask")==="1"},je.onChange=function(Pt){var Yt=Pt.target.value;je.props.onChange(Yt)},je.getShowValue=function(){var Pt=je.text?(je.text.value||"").replace(/ /g,""):je.props.value||"";return je.state.maskStatus&&Pt?(0,ve.G)((0,V.default)({},je.props,{value:Pt})):Pt},Je),(0,j.default)(je,Tt)}return(0,s.default)(Bt,[{key:"componentWillReceiveProps",value:function(Je,je){this.text&&Je.value!==this.text.value&&(this.text.value=Je.value||"")}},{key:"render",value:function(){var Je=this,je=this.props,Tt=je.disabled,Gt=je.hint,rn=je.value,qt=je.onBlur,Pt=je.onChange,Yt=je.maskPermissions,Qt=this.state,vn=Qt.originValue,cn=Qt.maskStatus,mn=Qt.isEditing,Dn=Yt&&rn&&cn;return b.createElement(b.Fragment,null,b.createElement("div",{className:re()("customFormControlBox",{Gray_bd:!rn},{controlDisabled:Tt},{Visibility:mn}),onClick:function(){Tt||Je.setState({isEditing:!0},function(){return Je.text&&Je.text.focus()})}},b.createElement("span",{className:re()({maskHoverTheme:Tt&&Dn}),onClick:function(){Tt&&Dn&&Je.setState({maskStatus:!1})}},this.getShowValue(),Dn&&b.createElement(W.Z,{icon:"eye_off",className:re()("Gray_bd",Tt?"mLeft7":"maskIcon")}))),b.createElement(J,{isEditing:mn},b.createElement("input",{type:"text",className:re()("customFormControlBox",{controlDisabled:Tt}),ref:function(Mn){Je.text=Mn},placeholder:Gt,disabled:Tt,defaultValue:rn,onChange:this.onChange,onFocus:function(Mn){return Je.setState({originValue:Mn.target.value.trim()})},onBlur:function(Mn){Mn.target.value.trim()!==rn&&Pt(Mn.target.value.trim()),Je.setState({isEditing:!1}),qt(vn)}})))}}]),Bt}(b.Component),pe.propTypes={hint:c().string,disabled:c().bool,value:c().string,onChange:c().func,onBlur:c().func},Se),be,xe,Ae=(0,S.Z)([`
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  z-index: `,`;
`],[`
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  z-index: `,`;
`]),Ne=ue.ZP.div(Ae,function(nn){return nn.isEditing?2:-1}),Me=(xe=be=function(nn){(0,A.default)(Bt,nn);function Bt(){var ln,Je,je,Tt;(0,n.default)(this,Bt);for(var Gt=arguments.length,rn=Array(Gt),qt=0;qt<Gt;qt++)rn[qt]=arguments[qt];return Tt=(Je=(je=(0,j.default)(this,(ln=Bt.__proto__||O()(Bt)).call.apply(ln,[this].concat(rn))),je),je.state={originValue:"",isEditing:!1,maskStatus:_.get(je.props,"advancedSetting.datamask")==="1"},je.formatValue=function(Pt){return(Pt||"").toUpperCase()},je.onChange=function(Pt){var Yt=je.formatValue(Pt.target.value);je.props.onChange(Yt)},je.getShowValue=function(){var Pt=je.text?(je.text.value||"").replace(/ /g,""):je.props.value||"";return je.state.maskStatus&&Pt?(0,ve.G)((0,V.default)({},je.props,{value:Pt})):Pt},Je),(0,j.default)(je,Tt)}return(0,s.default)(Bt,[{key:"componentWillReceiveProps",value:function(Je,je){this.text&&Je.value!==this.text.value&&(this.text.value=this.formatValue(Je.value||""))}},{key:"render",value:function(){var Je=this,je=this.props,Tt=je.disabled,Gt=je.hint,rn=je.value,qt=je.onBlur,Pt=je.onChange,Yt=je.maskPermissions,Qt=this.state,vn=Qt.originValue,cn=Qt.isEditing,mn=Qt.maskStatus,Dn=Yt&&rn&&mn,bn=this.formatValue(rn);return b.createElement(b.Fragment,null,b.createElement("div",{className:re()("customFormControlBox customFormTextareaBox",{Gray_bd:!rn},{controlDisabled:Tt},{Visibility:cn}),onClick:function(){Tt||Je.setState({isEditing:!0},function(){return Je.text&&Je.text.focus()})}},b.createElement("span",{className:re()({maskHoverTheme:Tt&&Dn}),onClick:function(){Tt&&Dn&&Je.setState({maskStatus:!1})}},this.getShowValue(),Dn&&b.createElement(W.Z,{icon:"eye_off",className:re()("Gray_bd",Tt?"mLeft7":"maskIcon")}))),b.createElement(Ne,{isEditing:cn},b.createElement("input",{type:"text",className:re()("customFormControlBox",{controlDisabled:Tt}),ref:function(Ln){Je.text=Ln},placeholder:Gt,disabled:Tt,defaultValue:bn,maxLength:18,onChange:this.onChange,onFocus:function(Ln){return Je.setState({originValue:Ln.target.value.trim()})},onBlur:function(Ln){var Wn=Je.formatValue(Ln.target.value.trim());Wn!==bn&&Pt(Wn),Je.setState({isEditing:!1}),qt(vn)}})))}}]),Bt}(b.Component),be.propTypes={enumDefault:c().number,hint:c().string,disabled:c().bool,value:c().string,onChange:c().func,onBlur:c().func},xe),Fe,Be,we=(Be=Fe=function(nn){(0,A.default)(Bt,nn);function Bt(){var ln,Je,je,Tt;(0,n.default)(this,Bt);for(var Gt=arguments.length,rn=Array(Gt),qt=0;qt<Gt;qt++)rn[qt]=arguments[qt];return Tt=(Je=(je=(0,j.default)(this,(ln=Bt.__proto__||O()(Bt)).call.apply(ln,[this].concat(rn))),je),je.state={originValue:"",isEditing:!1},je.onFocus=function(Pt){je.setState({originValue:Pt.target.value.trim(),isEditing:!0})},je.onChange=function(Pt){var Yt=Pt.target.value;je.props.onChange(Yt)},Je),(0,j.default)(je,Tt)}return(0,s.default)(Bt,[{key:"componentWillReceiveProps",value:function(Je,je){this.text&&Je.value!==this.text.value&&(this.text.value=Je.value||"")}},{key:"render",value:function(){var Je=this,je=this.props,Tt=je.disabled,Gt=je.hint,rn=je.value,qt=je.onBlur,Pt=je.onChange,Yt=je.from,Qt=this.state,vn=Qt.originValue,cn=Qt.isEditing;return b.createElement(b.Fragment,null,b.createElement("input",{type:"text",className:re()("customFormControlBox",{controlDisabled:Tt,customFormControlTelPhone:!cn&&rn}),ref:function(Dn){Je.text=Dn},placeholder:Gt,disabled:Tt,defaultValue:rn,onChange:this.onChange,onFocus:this.onFocus,onBlur:function(Dn){Dn.target.value.trim()!==rn&&Pt(Dn.target.value.trim()),qt(vn),Je.setState({isEditing:!1})}}),(h().includes([u.BD.H5_ADD,u.BD.H5_EDIT],Yt)||(0,w.Q9)()&&Yt===u.BD.SHARE)&&!!rn&&b.createElement("a",{href:"tel:"+rn.replace(/-/g,""),className:"Absolute customFormControlTelBtn",style:{right:0,top:10}},b.createElement(W.Z,{icon:"phone22",className:"Font16 ThemeColor3"})))}}]),Bt}(b.Component),Fe.propTypes={hint:c().string,disabled:c().bool,value:c().string,onChange:c().func,onBlur:c().func,from:c().number},Be),Ie=t(40433),ge=t(62745),Re=t(99910),Pe=t(91877),ke,We,Ve=(We=ke=function(nn){(0,A.default)(Bt,nn);function Bt(){var ln,Je,je,Tt;(0,n.default)(this,Bt);for(var Gt=arguments.length,rn=Array(Gt),qt=0;qt<Gt;qt++)rn[qt]=arguments[qt];return Tt=(Je=(je=(0,j.default)(this,(ln=Bt.__proto__||O()(Bt)).call.apply(ln,[this].concat(rn))),je),je.state={isEditing:!1,originValue:"",maskStatus:_.get(je.props,"advancedSetting.datamask")==="1"},je.isOnComposition=!1,je.onFocus=function(Pt){(!je.text&&je.props.value||je.text&&je.text.value!==je.props.value)&&(_.includes([0,2],je.props.enumDefault)?Pt.target.value=je.props.value||"":je.joinTextareaEdit(Pt)),je.setState({originValue:Pt.target.value.trim()})},je.onChange=function(Pt){je.props.onChange(Pt)},je.onBlur=function(Pt){var Yt=je.props.onBlur,Qt=je.state.originValue;je.setState({isEditing:!1}),window.isWeiXin&&window.scrollTo(0,0),Yt(Qt,Pt)},je.joinTextareaEdit=function(Pt){var Yt=je.props,Qt=Yt.disabled,vn=Yt.advancedSetting,cn=Yt.value,mn=Pt.target.getAttribute("href");if(!window.getSelection().toString())if(mn){var Dn=document.createElement("a");Dn.href=mn,Dn.target="_blank",Dn.rel="nofollow noopener noreferrer",Dn.click(),Pt.preventDefault()}else!Qt&&vn.dismanual!=="1"&&je.setState({isEditing:!0},function(){je.text&&(je.text.value=cn||"",je.text.focus())})},je.getShowValue=function(Pt){var Yt=je.props,Qt=Yt.value,vn=Qt===void 0?"":Qt,cn=Yt.advancedSetting,mn=cn.analysislink!=="1";return vn?je.state.maskStatus?(0,ve.G)(je.props):mn?vn:b.createElement(fe.Z,{properties:{target:"_blank"}},vn):Pt},Je),(0,j.default)(je,Tt)}return(0,s.default)(Bt,[{key:"componentWillReceiveProps",value:function(Je,je){this.text&&(!_.isEqual(Je.enumDefault,this.props.enumDefault)||!_.isEqual(Je.value,this.props.value))&&(this.text.value=Je.enumDefault===2?(Je.value||"").replace(/\r\n|\n/g," "):Je.value||"")}},{key:"render",value:function(){var Je=this,je=this.props,Tt=je.disabled,Gt=je.value,rn=Gt===void 0?"":Gt,qt=je.enumDefault,Pt=je.strDefault,Yt=Pt===void 0?"10":Pt,Qt=je.advancedSetting,vn=je.projectId,cn=je.maskPermissions,mn=this.props.hint,Dn=this.state,bn=Dn.isEditing,Mn=Dn.maskStatus,Ln=cn&&qt===2&&rn&&Mn,Wn=Qt.dismanual==="1",oa=qt===2,Sa=(0,Pe.g)(),Ra=!Tt&&Sa&&Yt.split("")[1]==="1",qn={onCompositionStart:function(){return Je.isOnComposition=!0},onCompositionEnd:function(pa){pa.type==="compositionend"&&(Je.isOnComposition=!1),window.isChrome&&Je.onChange(pa.target.value)}};return Ra&&Wn?mn=mn||_l("\u8BF7\u626B\u7801\u8F93\u5165"):Wn&&(mn=_l("\u8BF7\u5728\u79FB\u52A8\u7AEF\u626B\u7801\u8F93\u5165")),b.createElement(b.Fragment,null,bn?oa?b.createElement("input",(0,V.default)({type:"text",className:"customFormControlBox escclose",style:{width:Ra?"calc(100% - 42px)":"100%",padding:"7px 12px 6px"},ref:function(pa){Je.text=pa},autoFocus:bn,placeholder:mn,onFocus:this.onFocus,onChange:function(pa){Je.isOnComposition||Je.onChange(pa.target.value)},onBlur:function(pa){var Ta=pa.target.value.trim();Ta!==rn&&Je.onChange(Ta),Je.onBlur(Ta)}},qn)):b.createElement(ge.Z,(0,V.default)({isFocus:!0,className:"customFormTextarea escclose",style:{width:Ra?"calc(100% - 42px)":"100%"},minHeight:qt===1?90:36,maxHeight:400,manualRef:function(pa){Je.text=pa},placeholder:mn,spellCheck:!1,onFocus:this.onFocus,onChange:function(pa){Je.isOnComposition||Je.onChange(pa)},onBlur:function(pa){var Ta=pa.target.value.trim();Ta!==rn&&Je.onChange(Ta),Je.onBlur(Ta)}},qn)):b.createElement("div",{className:re()("customFormControlBox customFormTextareaBox",{Gray_bd:!rn},{controlDisabled:Tt},{textAreaDisabledControl:qt===1&&Tt}),style:(0,V.default)({minHeight:qt===1?90:36,width:Ra?"calc(100% - 42px)":"100%",lineHeight:1.5},Tt?{wordBreak:"break-all"}:{}),onClick:this.joinTextareaEdit},b.createElement("span",{className:re()("WordBreak",{maskHoverTheme:Tt&&Ln}),style:(0,w.Q9)()?{wordWrap:"break-word"}:{},onClick:function(){Tt&&Ln&&Je.setState({maskStatus:!1})}},this.getShowValue(mn),Ln&&b.createElement(W.Z,{icon:"eye_off",className:re()("Gray_bd",Tt?"mLeft7":"maskIcon")})),!Tt&&!Wn&&b.createElement("input",{type:"text",className:"smallInput",onFocus:function(){return Je.setState({isEditing:!0})}})),Ra&&b.createElement(Re.Z,{projectId:vn,disablePhoto:Yt.split("")[0]==="1",onChange:this.onChange}))}}]),Bt}(b.Component),ke.propTypes={hint:c().string,disabled:c().bool,value:c().string,enumDefault:c().number,strDefault:c().string,onChange:c().func,onBlur:c().func},We),it=t(84141),Ge,pt,ot=(0,S.Z)([`
  `,`
  position: relative;
  .maskIcon {
    right: 0px !important;
  }
`],[`
  `,`
  position: relative;
  .maskIcon {
    right: 0px !important;
  }
`]),vt=(0,S.Z)([`
  width: 36px;
  height: 36px;
  text-align: center;
  line-height: 36px;
  cursor: pointer;
  margin-right: `,`px;
  margin-left: `,`px;
  border: 1px solid #e0e0e0;
  .icon {
    color: #2196f3;
  }
`],[`
  width: 36px;
  height: 36px;
  text-align: center;
  line-height: 36px;
  cursor: pointer;
  margin-right: `,`px;
  margin-left: `,`px;
  border: 1px solid #e0e0e0;
  .icon {
    color: #2196f3;
  }
`]),At=ue.ZP.span(ot,function(nn){return nn.isMaskReadonly?"display: inline-block;":"flex: 1;"}),yt=ue.ZP.div(vt,function(nn){return nn.type==="subtract"?6:0},function(nn){return nn.type==="add"?6:0}),st=(pt=Ge=function(nn){(0,A.default)(Bt,nn);function Bt(){var ln,Je,je,Tt;(0,n.default)(this,Bt);for(var Gt=arguments.length,rn=Array(Gt),qt=0;qt<Gt;qt++)rn[qt]=arguments[qt];return Tt=(Je=(je=(0,j.default)(this,(ln=Bt.__proto__||O()(Bt)).call.apply(ln,[this].concat(rn))),je),je.state={isEditing:!1,originValue:"",maskStatus:h().get(je.props,"advancedSetting.datamask")==="1"},je.onFocus=function(Pt){je.setState({originValue:Pt.target.value.trim()})},je.onChange=function(Pt,Yt){var Qt=je.props.advancedSetting,vn=Qt===void 0?{}:Qt,cn=Yt||Pt.target.value.replace(/[^-\d.]/g,"").replace(/^\./g,"").replace(/^-/,"$#$").replace(/-/g,"").replace("$#$","-").replace(/^-\./,"-").replace(".","$#$").replace(/\./g,"").replace("$#$",".");cn==="."&&(cn=""),je.number&&(je.number.value=cn),vn.numshow==="1"&&!isNaN(parseFloat(cn))&&(cn=(0,w.IQ)(parseFloat(cn),100)),je.props.onChange(cn)},je.onBlur=function(){var Pt=je.props,Yt=Pt.value,Qt=Pt.dot,vn=Pt.onChange,cn=Pt.onBlur,mn=Pt.advancedSetting,Dn=mn===void 0?{}:mn,bn=je.state.originValue;je.setState({isEditing:!1}),Yt==="-"?Yt="":Yt&&(Yt=(0,w.FH)(parseFloat(Yt),Dn.numshow==="1"?Qt+2:Qt)),vn(Yt),cn(bn),window.isWeiXin&&window.scrollTo(0,0)},je.getAutoValue=function(Pt){return h().get(je.props,"advancedSetting.dotformat")==="1"?(0,w.FY)(Pt):Pt},je.handleControl=function(Pt){var Yt=je.props,Qt=Yt.advancedSetting,vn=Qt===void 0?{}:Qt,cn=Yt.value,mn=Yt.disabled,Dn=vn.numinterval,bn=Dn===void 0?"1":Dn;if(!bn||mn)return null;vn.numshow==="1"&&!isNaN(parseFloat(cn))&&(cn=(0,w.pc)(cn,100)),Pt==="add"?cn=(0,w.p4)(parseFloat(cn||0),parseFloat(bn)):cn=(0,w.c_)(parseFloat(cn||0),parseFloat(bn)),je.onChange({},""+cn)},je.renderNumberControl=function(){var Pt=je.props,Yt=Pt.advancedSetting,Qt=Yt===void 0?{}:Yt,vn=Pt.disabled;return Qt.showtype!=="3"||vn?null:b.createElement("div",{className:re()("numberControlBox",{disabled:!Qt.numinterval})},["add","subtract"].map(function(cn){return b.createElement("div",{className:"iconWrap",onClick:function(){return je.handleControl(cn)}},b.createElement("i",{className:re()(cn==="add"?"icon-arrow-up":"icon-arrow-down")}))}))},je.renderMobileNumberControl=function(Pt){var Yt=je.props,Qt=Yt.advancedSetting,vn=Qt===void 0?{}:Qt,cn=Yt.disabled;return vn.showtype!=="3"||cn?null:b.createElement(yt,{type:Pt,onClick:function(){return je.handleControl(Pt==="subtract"?"subtract":"add")}},b.createElement("i",{className:"icon icon-"+(Pt==="subtract"?"minus":"add1")}))},Je),(0,j.default)(je,Tt)}return(0,s.default)(Bt,[{key:"render",value:function(){var Je=this,je=this.props.value,Tt=this.props,Gt=Tt.type,rn=Tt.disabled,qt=Tt.hint,Pt=Tt.dot,Yt=Tt.unit,Qt=Tt.enumDefault,vn=Tt.advancedSetting,cn=vn===void 0?{}:vn,mn=Tt.maskPermissions,Dn=this.state,bn=Dn.isEditing,Mn=Dn.maskStatus,Ln=cn.prefix,Wn=cn.suffix,oa=Wn===void 0?Yt:Wn,Sa=cn.thousandth,Ra=cn.numshow,qn=cn.showtype,Ha=qn==="3";Ra==="1"&&je&&(je=(0,w.pc)(je,100)),je=this.getAutoValue(je);var pa=(0,w.Q9)();if(!bn||pa&&rn){if(je=je||je===0?this.getAutoValue((0,w.FH)(parseFloat(je),Pt)):"",Mn&&je)je=(0,ve.G)((0,V.default)({},this.props,{value:je}));else if(Gt!==6||h().isUndefined(Sa)?Qt!==1:Sa!=="1"){var Ta=je.indexOf(".")>-1?/(\d{1,3})(?=(?:\d{3})+\.)/g:/(\d{1,3})(?=(?:\d{3})+$)/g;je=je.replace(Ta,"$1,")}var Fa=mn&&je&&Mn;return b.createElement("div",{className:"flexCenter flexRow"},pa&&this.renderMobileNumberControl("subtract"),b.createElement("div",{className:re()("customFormControlBox LineHeight36 flexRow flex",{controlDisabled:rn}),onClick:function(){return!rn&&Je.setState({isEditing:!0})}},Ln&&b.createElement("div",{className:"ellipsis Font13 mRight15",style:{maxWidth:80}},Ln),b.createElement(At,{isMaskReadonly:rn&&Fa,className:re()("ellipsis",{maskHoverTheme:rn&&Fa,Gray_bd:!je}),onClick:function(){rn&&Fa&&Je.setState({maskStatus:!1})}},je||qt,je?oa:"",Fa&&b.createElement(W.Z,{icon:"eye_off",className:re()("Gray_bd",rn?"mLeft7":"maskIcon")})),!je&&b.createElement("div",{className:"ellipsis Font13",style:{maxWidth:80}},oa)),pa?this.renderMobileNumberControl("add"):this.renderNumberControl())}return b.createElement("div",{className:"flexCenter flexRow"},pa&&this.renderMobileNumberControl("subtract"),b.createElement("input",{type:"text",className:"customFormControlBox Gray flex",style:{paddingRight:oa?32:12,paddingTop:2},ref:function(xa){Je.number=xa},autoFocus:!0,placeholder:qt,disabled:rn,defaultValue:je,maxLength:16,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange,onKeyDown:function(xa){Ha&&h().includes([38,40],xa.keyCode)&&(xa.preventDefault(),Je.handleControl(xa.keyCode===38?"add":"subtract"))}}),oa&&!pa&&b.createElement("div",{className:"ellipsis Gray_9e Font13",style:{maxWidth:80,position:"absolute",top:10,right:Ha?pa?55:49:13}},oa),pa?this.renderMobileNumberControl("add"):this.renderNumberControl())}}]),Bt}(b.Component),Ge.propTypes={type:c().number,hint:c().string,disabled:c().bool,value:c().string,dot:c().number,unit:c().string,enumDefault:c().number,onChange:c().func,advancedSetting:c().object},pt),St=t(1924),Qe=t(94914),Xe=(0,w.Q9)(),$e=function(nn){(0,A.default)(Bt,nn);function Bt(){return(0,n.default)(this,Bt),(0,j.default)(this,(Bt.__proto__||O()(Bt)).apply(this,arguments))}return(0,s.default)(Bt,[{key:"render",value:function(){var Je=this,je=this.props,Tt=je.disabled,Gt=je.advancedSetting,rn=Gt.showtype,qt=Gt.numinterval,Pt=Gt.showinput,Yt=Gt.min,Qt=Gt.max,vn=Gt.numshow,cn=je.value;if(rn==="2"){var mn=(0,Qe.aq)(this.props,"itemnames"),Dn=(0,Qe.aq)(this.props,"itemcolor");return b.createElement(it.Z,{from:"recordInfo",disabled:Tt,itemnames:mn,itemcolor:Dn,showInput:Xe&&Tt?!1:Pt==="1",showAsPercent:vn==="1",barStyle:{margin:"15px 0"},min:St.Z.parseFloat(Yt),max:St.Z.parseFloat(Qt),value:St.Z.parseFloat(cn),step:St.Z.parseFloat(qt),onChange:function(Mn){return Je.props.onChange(Mn)}})}return b.createElement(st,this.props)}}]),Bt}(b.Component),Ke=t(60967),Ue=t(47426),He=t(66215),ze=t(62232),gt,Et,ft=(Et=gt=function(nn){(0,A.default)(Bt,nn);function Bt(){var ln,Je,je,Tt;(0,n.default)(this,Bt);for(var Gt=arguments.length,rn=Array(Gt),qt=0;qt<Gt;qt++)rn[qt]=arguments[qt];return Tt=(Je=(je=(0,j.default)(this,(ln=Bt.__proto__||O()(Bt)).call.apply(ln,[this].concat(rn))),je),je.onChange=function(Pt){var Yt=Pt?"0":"1";je.props.onChange(Yt)},je.renderContent=function(){var Pt=je.props,Yt=Pt.disabled,Qt=Pt.value,vn=Pt.advancedSetting,cn=vn===void 0?{}:vn,mn=Pt.hint,Dn=mn===void 0?"":mn,bn=Pt.switchSize,Mn=(0,ze.jT)(je.props),Ln=Qt===1||Qt==="1",Wn=(0,w.Q9)();if(cn.showtype==="1"){var oa=Ln?h().get(Mn[0],"value"):h().get(Mn[1],"value");return b.createElement("div",{className:re()("flexCenter w100",{flexRow:(0,w.Q9)()})},b.createElement(He.Z,{disabled:Yt,checked:Ln,onClick:je.onChange,size:bn||"default",className:re()({mobileFormSwitchDisabled:Yt})}),oa&&b.createElement("span",{className:re()("mLeft6 flex overflow_ellipsis",{LineHeight24:(0,w.Q9)()})},oa))}if(cn.showtype==="2"){if(Wn&&Yt){var Sa=(Mn||[]).filter(function(Ra){return Ra.key===Qt}).length?Mn.filter(function(Ra){return Ra.key===Qt})[0].value:"";return b.createElement("div",{className:"mobileDisableChaeckRadio ellipsis"},Sa)}return b.createElement(Ue.ZP,{size:"middle",disabled:Yt,className:re()("customFormCheck",{mobileCustomFormRadio:Wn}),checkedValue:""+Qt,data:Mn.map(function(Ra){return{text:Ra.value,value:Ra.key}}),onChange:function(qn){return je.onChange(qn!=="1")}})}return b.createElement(Ke.Z,{className:"customFormCheck",disabled:Yt,checked:Ln,onClick:je.onChange,size:bn||"default"},Dn)},Je),(0,j.default)(je,Tt)}return(0,s.default)(Bt,[{key:"render",value:function(){var Je=this.props,je=Je.disabled,Tt=Je.advancedSetting,Gt=Tt===void 0?{}:Tt;return b.createElement("div",{className:re()("customFormControlBox customFormButton flexRow customFormControlSwitch",{controlDisabled:je,customFormSwitchColumn:Gt.showtype==="2"}),style:{height:"auto"}},this.renderContent())}}]),Bt}(b.Component),gt.propTypes={disabled:c().bool,value:c().string,onChange:c().func},Et),qe=t(75559),nt=t(15759),Ze=t(61987),et=t(18667),ut=t(26358),xt,wt,kt=(wt=xt=function(nn){(0,A.default)(Bt,nn);function Bt(){var ln,Je,je,Tt;(0,n.default)(this,Bt);for(var Gt=arguments.length,rn=Array(Gt),qt=0;qt<Gt;qt++)rn[qt]=arguments[qt];return Tt=(Je=(je=(0,j.default)(this,(ln=Bt.__proto__||O()(Bt)).call.apply(ln,[this].concat(rn))),je),je.state={showSelectUser:!1},je.pickUser=function(Pt){var Yt=je.props,Qt=Yt.projectId,vn=Qt===void 0?"":Qt,cn=Yt.enumDefault,mn=Yt.advancedSetting,Dn=mn===void 0?{}:mn,bn=Yt.worksheetId,Mn=Yt.controlId,Ln=Yt.appId,Wn=Yt.formData,oa=Wn===void 0?[]:Wn,Sa=je.getUserValue(),Ra=Sa.map(function(Fa){return Fa.accountId}),qn=je,Ha=(0,ut.LU)(je.props);if(Ha===1&&md.global.Account.isPortal&&!h().find(md.global.Account.projects,function(Fa){return Fa.projectId===vn})){alert(_l("\u60A8\u4E0D\u662F\u8BE5\u7EC4\u7EC7\u6210\u5458\uFF0C\u65E0\u6CD5\u83B7\u53D6\u5176\u6210\u5458\u5217\u8868\uFF0C\u8BF7\u8054\u7CFB\u7EC4\u7EC7\u7BA1\u7406\u5458"),3);return}if((0,w.Q9)())je.setState({showSelectUser:!0});else{var pa=(0,N.Mn)(je.props,oa),Ta=f()(pa).some(function(Fa){return!h().isEmpty(Fa)});(0,Ze.ZP)($(Pt.target).closest(".addBtn")[0],{showMoreInvite:!1,selectRangeOptions:pa,tabType:Ha,appId:Ln,prefixAccounts:!h().includes(Ra,md.global.Account.accountId)&&!Ta?[{accountId:md.global.Account.accountId,fullname:md.global.Account.fullname,avatar:md.global.Account.avatar}]:[],filterAccountIds:Ra,minHeight:400,offset:{top:16,left:-16},zIndex:10001,isDynamic:cn===1,SelectUserSettings:{unique:cn===0,projectId:vn,filterAccountIds:Ra,callback:qn.onSave},selectCb:qn.onSave})}},je.getUserValue=function(){var Pt=je.props.value;if(!Pt)return[];if(h().isArray(Pt))return Pt;if(Pt&&typeof Pt=="string"){var Yt=JSON.parse(Pt);return h().isArray(Yt)?Yt:[Yt]}else return[]},je.onSave=function(Pt){var Yt=je.props,Qt=Yt.enumDefault,vn=Yt.onChange,cn=je.getUserValue(),mn=Qt===0?Pt:h().uniqBy(cn.concat(Pt),"accountId");vn(E()(mn))},Je),(0,j.default)(je,Tt)}return(0,s.default)(Bt,[{key:"removeUser",value:function(Je){var je=this.props.onChange,Tt=this.getUserValue(),Gt=Tt.filter(function(rn){return rn.accountId!==Je});je(E()(Gt))}},{key:"render",value:function(){var Je=this,je=this.props,Tt=je.projectId,Gt=je.disabled,rn=je.enumDefault,qt=je.from,Pt=je.formData,Yt=Pt===void 0?[]:Pt,Qt=je.worksheetId,vn=je.controlId,cn=je.appId,mn=je.dataSource,Dn=this.state.showSelectUser,bn=this.getUserValue(),Mn=(0,w.Q9)();return b.createElement("div",{className:"customFormControlBox customFormControlUser"},bn.map(function(Ln,Wn){return b.createElement("div",{className:re()("customFormControlTags",{selected:Mn&&!Gt}),key:Wn},qt===u.BD.SHARE||qt===u.BD.WORKFLOW?b.createElement("div",{class:"cursorDefault userHead InlineBlock",style:{width:26,height:26}},b.createElement("img",{class:"circle",width:"26",height:"26",src:Ln.avatar})):b.createElement(nt.Z,{projectId:Tt,className:"userHead InlineBlock",alwaysBindCard:!0,key:Wn,appId:mn?void 0:cn,user:{userHead:Ln.avatar,accountId:Ln.accountId},size:26}),b.createElement("span",{className:"ellipsis mLeft8",style:{maxWidth:200}},Ln.name||Ln.fullname||Ln.fullName),!Gt&&b.createElement("i",{className:"icon-minus-square Font16 tagDel",onClick:function(){return Je.removeUser(Ln.accountId)}}))}),!Gt&&b.createElement("div",{className:"TxtCenter Gray_75 ThemeHoverBorderColor3 ThemeHoverColor3 pointer addBtn",onClick:this.pickUser},b.createElement("i",{className:rn===0&&bn.length?"icon-swap_horiz Font16":"icon-plus Font14"})),Dn&&b.createElement(et.Z,{projectId:Tt,visible:!0,type:"user",userType:(0,ut.LU)(this.props),appId:cn||"",selectRangeOptions:(0,N.Mn)(this.props,Yt),onlyOne:rn===0,onClose:function(){return Je.setState({showSelectUser:!1})},onSave:this.onSave}))}}]),Bt}(b.Component),xt.propTypes={from:c().number,disabled:c().bool,worksheetId:c().string,controlId:c().string,value:c().any,projectId:c().string,enumDefault:c().number,onChange:c().func,advancedSetting:c().object},wt),Rt=t(70264),jt=t(46593),fn=t.n(jt),Mt=t(60510),sn=t(3735),on,en,$t=(en=on=function(nn){(0,A.default)(Bt,nn);function Bt(){var ln,Je,je,Tt;(0,n.default)(this,Bt);for(var Gt=arguments.length,rn=Array(Gt),qt=0;qt<Gt;qt++)rn[qt]=arguments[qt];return Tt=(Je=(je=(0,j.default)(this,(ln=Bt.__proto__||O()(Bt)).call.apply(ln,[this].concat(rn))),je),je.state={showSelectDepartment:!1},je.pickDepartment=function(){var Pt=je.props,Yt=Pt.projectId,Qt=Pt.enumDefault,vn=Pt.advancedSetting,cn=vn===void 0?{}:vn,mn=je;if(!h().find(md.global.Account.projects,function(Dn){return Dn.projectId===Yt})){alert(_l("\u60A8\u4E0D\u662F\u8BE5\u7EC4\u7EC7\u6210\u5458\uFF0C\u65E0\u6CD5\u83B7\u53D6\u5176\u90E8\u95E8\u5217\u8868\uFF0C\u8BF7\u8054\u7CFB\u7EC4\u7EC7\u7BA1\u7406\u5458"),3);return}(0,w.Q9)()?je.setState({showSelectDepartment:!0}):(0,Mt.Z)({projectId:Yt,isIncludeRoot:!1,unique:Qt===0,showCreateBtn:!1,allPath:cn.allpath==="1",selectFn:mn.onSave})},je.onSave=function(Pt){var Yt=je.props,Qt=Yt.enumDefault,vn=Yt.onChange,cn=Yt.value,mn=Qt===0?Pt:h().uniqBy(JSON.parse(cn||"[]").concat(Pt),"departmentId");vn(E()(mn))},Je),(0,j.default)(je,Tt)}return(0,s.default)(Bt,[{key:"removeDepartment",value:function(Je){var je=this.props,Tt=je.onChange,Gt=je.value,rn=Je?JSON.parse(Gt||"[]").filter(function(qt){return qt.departmentId!==Je}):JSON.parse(Gt||"[]").filter(function(qt){return!qt.isDelete});Tt(E()(rn))}},{key:"render",value:function(){var Je=this,je=this.props,Tt=je.projectId,Gt=je.disabled,rn=je.enumDefault,qt=je.appId,Pt=je.advancedSetting,Yt=Pt===void 0?{}:Pt,Qt=Yt.allpath,vn=(0,N.yT)(this.props.value,Yt),cn=this.state.showSelectDepartment;return b.createElement("div",{className:"customFormControlBox customFormControlUser"},vn.map(function(mn,Dn){return b.createElement(Rt.Z,{mouseEnterDelay:.6,disable:!Tt,text:h().get(window,"shareState.shareId")?null:function(){return new(fn())(function(bn,Mn){if(!Tt)return Mn();if(mn.isDelete){bn(_l("%0\u90E8\u95E8\u5DF2\u88AB\u5220\u9664",mn.deleteCount>1?mn.deleteCount+"\u4E2A":""));return}if(Qt==="1")return bn(mn.departmentName);sn.Z.getDepartmentFullNameByIds({projectId:Tt,departmentIds:[mn.departmentId]}).then(function(Ln){bn(h().get(Ln,"0.name"))})})}},b.createElement("div",{className:re()("customFormControlTags",{selected:(0,w.Q9)()&&!Gt,isDelete:mn.isDelete}),key:Dn},b.createElement("div",{className:"departWrap",style:{backgroundColor:"#2196f3"}},b.createElement("i",{className:"Font16 icon-department"})),b.createElement("span",{className:"ellipsis mLeft5",style:(0,V.default)({maxWidth:200},Qt==="1"&&!mn.isDelete?{direction:"rtl",unicodeBidi:"normal"}:{})},mn.departmentName,mn.deleteCount>1&&b.createElement("span",{className:"Gray mLeft5"},mn.deleteCount)),(rn===0&&vn.length===1||rn!==0)&&!Gt&&b.createElement("i",{className:"icon-minus-square Font16 tagDel",onClick:function(){return Je.removeDepartment(mn.departmentId)}})))}),!Gt&&b.createElement("div",{className:"TxtCenter Gray_75 ThemeHoverBorderColor3 ThemeHoverColor3 pointer addBtn",onClick:this.pickDepartment},b.createElement("i",{className:rn===0&&vn.length?"icon-swap_horiz Font16":"icon-plus Font14"})),cn&&b.createElement(et.Z,{projectId:Tt,visible:!0,type:"department",onlyOne:rn===0,onClose:function(){return Je.setState({showSelectDepartment:!1})},onSave:this.onSave,appId:qt,userType:(0,ut.LU)(this.props),selectRangeOptions:!!Yt.userrange,allPath:Yt.allpath==="1"}))}}]),Bt}(b.Component),on.propTypes={disabled:c().bool,value:c().string,projectId:c().string,enumDefault:c().number,onChange:c().func},en),an=t(61844),tn,mt,Lt=(mt=tn=function(nn){(0,A.default)(Bt,nn);function Bt(){var ln,Je,je,Tt;(0,n.default)(this,Bt);for(var Gt=arguments.length,rn=Array(Gt),qt=0;qt<Gt;qt++)rn[qt]=arguments[qt];return Tt=(Je=(je=(0,j.default)(this,(ln=Bt.__proto__||O()(Bt)).call.apply(ln,[this].concat(rn))),je),je.onChange=function(Pt){je.props.onChange(Pt)},Je),(0,j.default)(je,Tt)}return(0,s.default)(Bt,[{key:"renderContent",value:function(){var Je=this.props,je=Je.disabled,Tt=Je.value,Gt=Tt===void 0?0:Tt,rn=Je.type,qt=(0,w.Q9)();return b.createElement("div",{className:re()("customFormControlBox customFormButton flexRow customFormControlScore",{controlDisabled:je})},b.createElement(an.Z,{from:qt?"":"recordInfo",data:this.props,hideText:qt?!je:!1,score:parseInt(Gt),disabled:je,callback:this.onChange}))}},{key:"render",value:function(){return this.renderContent()}}]),Bt}(b.Component),tn.propTypes={disabled:c().bool,value:c().any,enumDefault:c().number,onChange:c().func},mt),zt=t(22108),Zt=t(95283),Nt=t(1952),ct=t(50533),De=t(22013),_e=t(89019);const Le=function(nn){return(0,Nt.Z)(function(Bt){var ln=Bt.closeCallback;return b.createElement(ct.zt,{store:De.Z},b.createElement(_e.Z,{visible:!0,openType:3,taskId:nn,closeCallback:ln}))},{closeFnName:"closeCallback"})};var rt=t(20487),Ct={0:"",1:"icon-task-responsible",2:"icon-knowledge_file",3:"icon-task_custom_today",7:"icon-task_custom_today",4:"icon-file",5:"icon-content_paste2"},dt=["",_l("\u4EFB\u52A1\u5DF2\u88AB\u5220\u9664"),_l("\u9879\u76EE\u5DF2\u88AB\u5220\u9664"),_l("\u65E5\u7A0B\u5DF2\u88AB\u5220\u9664"),_l("\u6587\u4EF6\u5DF2\u88AB\u5220\u9664"),_l("\u7533\u8BF7\u5355\u5DF2\u88AB\u5220\u9664"),"",_l("\u65E5\u7A0B\u5DF2\u88AB\u5220\u9664")],It=function(nn){(0,A.default)(Bt,nn);function Bt(){var ln,Je,je,Tt;(0,n.default)(this,Bt);for(var Gt=arguments.length,rn=Array(Gt),qt=0;qt<Gt;qt++)rn[qt]=arguments[qt];return Tt=(Je=(je=(0,j.default)(this,(ln=Bt.__proto__||O()(Bt)).call.apply(ln,[this].concat(rn))),je),je.handleLinkClick=function(Pt,Yt){var Qt=je.props.from,vn=Pt.type;if(Qt===u.BD.SHARE||Qt===u.BD.WORKFLOW||h().get(window,"shareState.isPublicForm")||h().get(window,"shareState.isPublicWorkflowRecord")||h().get(window,"shareState.isPublicQuery")||h().get(window,"shareState.isPublicRecord")){Yt.preventDefault();return}if([1,3,4,7].includes(vn)&&!Yt.button){Yt.preventDefault();var cn=(h().get(Pt,"link")||"").split("_")[1]||"";if(vn===1&&Le(cn),[3,7].includes(vn)&&(Pt.calendarId=cn,Pt.recurTime=Pt.sidext||"",(0,rt.Z)({calendarId:cn,recurTime:Pt.sidext||""})),vn===4){var mn=h().last((h().get(Pt,"link")||"").split("/"))||"";(0,Zt.Z)({index:0,attachments:[{previewAttachmentType:"KC_ID",refId:mn}],showThumbnail:!0,hideFunctions:["editFileName"]})}}},je.renderItem=function(Pt,Yt){var Qt=je.props,vn=Qt.disabled,cn=Qt.onDelete;Pt.name===""&&(Pt.name=dt[Pt.type]);var mn=Pt.type===4?(0,w.kQ)(Pt.ext1):Ct[Pt.type],Dn=Pt.type===4?""+Pt.name+Pt.ext1:Pt.name,bn=null,Mn=null;if(Pt.type===3||Pt.type===5||Pt.type===7){var Ln=(Pt.type===3||Pt.type===7)&&Pt.ext1?T()(Pt.ext1).format("YYYY-MM-DD HH:mm"):Pt.ext1;bn=b.createElement("span",{className:"text-a",title:Ln},Ln);var Wn=Pt.ext2?T()(Pt.ext2).format("YYYY-MM-DD HH:mm"):"";Mn=b.createElement("span",{className:"text-b",title:Wn},Wn)}return b.createElement("li",{key:Yt},b.createElement("div",{className:"type-icon"},b.createElement("i",{className:mn,style:{color:Pt.type===1&&Pt.ext1==="1"?"#43bd36":"#9e9e9e"}})),b.createElement("a",{className:"ThemeHoverColor3",onClick:function(Sa){window.shareState.shareId||je.handleLinkClick(Pt,Sa)},href:Pt.link,target:"_blank",rel:"noopener noreferrer"},b.createElement("span",{className:"link-name",title:Dn},Dn),bn,Mn),b.createElement("div",{className:"user-img"},b.createElement("img",{"data-id":Pt.accountId,src:Pt.avatar,alt:""})),!vn&&b.createElement(W.Z,{icon:"minus-square",onClick:function(){return cn(Pt,Yt)}}))},Je),(0,j.default)(je,Tt)}return(0,s.default)(Bt,[{key:"render",value:function(){var Je=this,je=this.props.data;return b.createElement(b.Fragment,null,b.createElement("ul",{className:"customFormRelationList"},je.map(function(Tt,Gt){return Je.renderItem(Tt,Gt)})))}}]),Bt}(b.Component),bt,Ut,Xt=(Ut=bt=function(nn){(0,A.default)(Bt,nn);function Bt(){var ln,Je,je,Tt;(0,n.default)(this,Bt);for(var Gt=arguments.length,rn=Array(Gt),qt=0;qt<Gt;qt++)rn[qt]=arguments[qt];return Tt=(Je=(je=(0,j.default)(this,(ln=Bt.__proto__||O()(Bt)).call.apply(ln,[this].concat(rn))),je),je.state={dialogVisible:!1},je.itemOnDelete=function(Pt,Yt){if(Pt){var Qt=je.props.value,vn=h().cloneDeep(JSON.parse(Qt||"[]"));vn.splice(Yt,1),je.props.onChange(E()(vn))}},je.onDialogPick=function(Pt){var Yt=je.props.value,Qt=h().cloneDeep(JSON.parse(Yt||"[]"));Qt.push(Pt),je.props.onChange(E()(Qt)),je.setState({dialogVisible:!1})},Je),(0,j.default)(je,Tt)}return(0,s.default)(Bt,[{key:"render",value:function(){var Je=this,je=this.props,Tt=je.from,Gt=je.disabled,rn=je.value,qt=je.enumDefault,Pt=this.state.dialogVisible,Yt=(0,ze.Tx)(qt);return b.createElement("div",{className:re()({controlDisabled:Gt}),style:{height:"auto"}},!Gt&&b.createElement("button",{className:"customFormRelationBtn pointer",onClick:function(){if(md.global.Account.isPortal){alert("\u60A8\u4E0D\u662F\u8BE5\u7EC4\u7EC7\u6210\u5458\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\uFF01",3);return}Je.setState({dialogVisible:!0})}},b.createElement(W.Z,{icon:"plus",className:"mRight5 Gray_9e Font16"}),b.createElement("span",null,Yt)),b.createElement(It,{data:JSON.parse(rn||"[]"),from:Tt,disabled:Gt,onDelete:this.itemOnDelete}),Pt&&b.createElement(zt.Z,{title:"",types:qt===0?[]:[qt],onCancel:function(){return Je.setState({dialogVisible:!1})},onSubmit:this.onDialogPick}))}}]),Bt}(b.Component),bt.propTypes={from:c().number,disabled:c().bool,value:c().any,enumDefault:c().number,onChange:c().func},Ut),pn=t(28585),tt=t(8177),ht=t.n(tt),Dt=t(59390),Ot=t(48947),Ht=t(79506),Kt,dn,Cn,Rn,gn;function wn(nn,Bt,ln,Je,je){var Tt={};return Object.keys(Je).forEach(function(Gt){Tt[Gt]=Je[Gt]}),Tt.enumerable=!!Tt.enumerable,Tt.configurable=!!Tt.configurable,("value"in Tt||Tt.initializer)&&(Tt.writable=!0),Tt=ln.slice().reverse().reduce(function(Gt,rn){return rn(nn,Bt,Gt)||Gt},Tt),je&&Tt.initializer!==void 0&&(Tt.value=Tt.initializer?Tt.initializer.call(je):void 0,Tt.initializer=void 0),Tt.initializer===void 0&&(Object.defineProperty(nn,Bt,Tt),Tt=null),Tt}var On=(Cn=(gn=Rn=function(nn){(0,A.default)(Bt,nn);function Bt(ln){(0,n.default)(this,Bt);var Je=(0,j.default)(this,(Bt.__proto__||O()(Bt)).call(this,ln));return Je.childTable=b.createRef(),Je.debounceChange=h().debounce(Je.props.onChange,500),Je}return(0,s.default)(Bt,[{key:"handleChange",value:function(Je,je){var Tt=Je.rows,Gt=Je.originRows,rn=Gt===void 0?[]:Gt,qt=Je.lastAction,Pt=qt===void 0?{}:qt;if(je==="childTableDialog"){if(!this.childTable.current)return;this.childTable.current.store.dispatch({type:"FORCE_SET_OUT_ROWS",rows:Tt})}var Yt=this.props,Qt=Yt.value,vn=Yt.recordId,cn=Yt.from,mn=Pt.type==="UPDATE_ROW"&&Pt.asyncUpdate?this.debounceChange:this.props.onChange,Dn=!vn;if(!h().includes(["INIT_ROWS","LOAD_ROWS","UPDATE_BASE_LOADING","UPDATE_BASE","UPDATE_CELL_ERRORS","FORCE_SET_OUT_ROWS","RESET"],Pt.type)&&!/^@/.test(Pt.type))if(Dn)mn({isAdd:!0,rows:Tt.filter(function(Ln){return!Ln.empty})});else if(Pt.type==="CLEAR_AND_SET_ROWS")mn({deleted:rn.map(function(Ln){return Ln.rowid}),updated:Tt.map(function(Ln){return Ln.rowid}),rows:Tt});else{var bn=[],Mn=[];try{bn=Qt.deleted||Pt.deleted||[],Mn=Qt.updated||Pt.updated||[]}catch(Ln){}Pt.type==="DELETE_ROW"?bn=h().uniqBy(bn.concat(Pt.rowid)).filter(function(Ln){return!/^(temp|default)/.test(Ln)}):Pt.type==="DELETE_ROWS"?bn=h().uniqBy(bn.concat(Pt.rowIds)).filter(function(Ln){return!/^(temp|default)/.test(Ln)}):Pt.type==="ADD_ROW"||Pt.type==="UPDATE_ROW"?Mn=h().uniqBy(Mn.concat(Pt.rowid)):Pt.type==="ADD_ROWS"&&(Mn=h().uniqBy(Mn.concat(Pt.rows.map(function(Ln){return Ln.rowid})))),mn({deleted:bn,updated:Mn,rows:Tt})}cn===21&&Pt.type==="INIT_ROWS"&&mn({deleted:[],updated:(Tt||[]).map(function(Ln){return Ln.rowid}),rows:Tt||[],isDefault:!0})}},{key:"render",value:function(){var Je=this.props,je=Je.from,Tt=Je.registerCell,Gt=Je.worksheetId,rn=Je.recordId,qt=Je.formData,Pt=Je.disabled,Yt=Je.appId,Qt=Je.initSource,vn=Je.viewIdForPermit,cn=Je.sheetSwitchPermit,mn=Je.flag,Dn=(0,V.default)({},this.props);return b.createElement("div",{className:"mdsubList",style:{minHeight:74,margin:"2px 0 12px"}},b.createElement(Dt.Z,{showSearch:!0,showExport:!0,ref:this.childTable,initSource:Qt,registerCell:Tt,appId:Yt,viewId:vn,from:je,control:Dn,recordId:rn,sheetSwitchPermit:cn,flag:mn,masterData:{worksheetId:Gt,formData:qt.map(function(bn){return h().pick(bn,["controlId","type","value","options","attribute","enumDefault"])}).filter(function(bn){return!!bn.value})},onChange:this.handleChange,mobileIsEdit:(0,w.Q9)()?!Pt:void 0}))}}]),Bt}(b.Component),Rn.contextType=Ot.Z,Rn.propTypes={from:c().number,value:c().oneOfType([c().string,c().shape({})]),worksheetId:c().string,recordId:c().string,dataSource:c().string,formData:c().arrayOf(c().shape({})),registerCell:c().func,onChange:c().func},gn),wn(Cn.prototype,"handleChange",[Ht.Z],ht()(Cn.prototype,"handleChange"),Cn.prototype),Cn),An=t(89499),Yn,kn,Fn=(kn=Yn=function(nn){(0,A.default)(Bt,nn);function Bt(){return(0,n.default)(this,Bt),(0,j.default)(this,(Bt.__proto__||O()(Bt)).apply(this,arguments))}return(0,s.default)(Bt,[{key:"render",value:function(){var Je=this.props,je=Je.value,Tt=Je.enumDefault,Gt=Je.unit,rn=Je.advancedSetting,qt=Je.dot,Pt=void 0;if(!je||Tt===3&&rn.hideneg==="1"&&parseInt(je,10)<0)Pt="";else if(rn.autocarry==="1")Pt=(0,An.UM)({value:je,unit:Gt,dot:qt});else if(Tt===1||Tt===3){var Yt=rn.prefix||"",Qt=rn.suffix||{1:_l("\u5206\u949F"),2:_l("\u5C0F\u65F6"),3:_l("\u5929"),4:_l("\u6708"),5:_l("\u5E74"),6:_l("\u79D2")}[Gt]||"",vn=!!Yt||!!Qt,cn=(0,w.FH)(je,qt);rn.dotformat==="1"&&(cn=(0,w.FY)(cn)),Pt=vn?Yt+cn+Qt:cn}else{var mn=(0,Qe.VL)({advancedSetting:(0,V.default)({},rn,{showtype:Gt||"1"})});Pt=T()(je).year()?T()((0,w.LX)(T()(T()(je),mn))).format(mn):T()((0,w.LX)(T()(je,mn))).format(mn)}return b.createElement("div",{className:re()("customFormControlBox customFormReadonly customFormTextareaBox")},Pt)}}]),Bt}(b.Component),Yn.propTypes={value:c().string,enumDefault:c().number,unit:c().string,advancedSetting:c().object,dot:c().number},kn),$n=t(63355),ba,ua,La=(ua=ba=function(nn){(0,A.default)(Bt,nn);function Bt(ln){(0,n.default)(this,Bt);var Je=(0,j.default)(this,(Bt.__proto__||O()(Bt)).call(this,ln));return Je.onChange=h().debounce(function(je){Je.props.onChange(je)},500),Je.state={isEditing:!1,width:ln.width},Je}return(0,s.default)(Bt,[{key:"componentWillReceiveProps",value:function(Je){Je.width!==this.props.width&&this.setState({width:Je.width})}},{key:"render",value:function(){var Je=this.props,je=Je.disabled,Tt=Je.value,Gt=Je.type,rn=Je.flag,qt=Je.richTextControlCount,Pt=qt===void 0?0:qt,Yt=Je.widgetStyle,Qt=Yt===void 0?{}:Yt,vn=this.props,cn=vn.projectId,mn=vn.appId,Dn=vn.worksheetId,bn=Qt.titlelayout_pc,Mn=bn===void 0?"1":bn,Ln=Qt.titlelayout_app,Wn=Ln===void 0?"1":Ln,oa=(0,w.Q9)()?Wn==="2":Mn==="2";return b.createElement($n.Z,{projectId:cn,appId:mn,worksheetId:Dn,clickInit:Pt>=3,maxWidth:this.state.width,id:rn,data:Tt||"",isRemark:Gt===10010,className:re()({richTextForM:(0,w.Q9)(),richTextDisabledControl:je}),disabled:je,onActualSave:this.onChange,maxHeight:(0,w.Q9)()?500:void 0,autoSize:{height:oa?"auto":"100%"}})}}]),Bt}(b.Component),ba.propTypes={disabled:c().bool,value:c().string,onChange:c().func},ua),ga=t(7374),Ua=t(39216),yr=t(48272),sr=t.n(yr),Ba=t(62521),cr=t(16469),hr=t(65395),Qa=t(89954),da,Jn,ra=(Jn=da=function(nn){(0,A.default)(Bt,nn);function Bt(ln){(0,n.default)(this,Bt);var Je=(0,j.default)(this,(Bt.__proto__||O()(Bt)).call(this,ln));Je.state={lng:"",lat:"",address:"",searchStr:"",autoCompleteVisible:!1,autoCompleteResult:[]},Je._MapLoader=new hr.Z;var je=ln.mapOptions.center;return Je._MapLoader.loadJs().then(function(){Je.initMapObject(),je&&je.length&&Je._maphHandler&&Je._maphHandler.addSearchMarker(je[0],je[1])}),Je.handleChange=Je.handleChange.bind(Je),Je.handleKeydown=Je.handleKeydown.bind(Je),Je.handleSearch=Je.handleSearch.bind(Je),Je.handleMapClick=Je.handleMapClick.bind(Je),Je.handleSelect=Je.handleSelect.bind(Je),Je.handleCurrPos=Je.handleCurrPos.bind(Je),Je}return(0,s.default)(Bt,[{key:"componentWillReceiveProps",value:function(Je){var je=Je.defaultAddress,Tt=je||{},Gt=Tt.lng,rn=Tt.lat;je&&rn&&this.setPosition(Gt,rn)}},{key:"componentDidUpdate",value:function(){this.props.onUpdate&&this.props.onUpdate()}},{key:"componentWillUnmount",value:function(){this._maphHandler&&(this._maphHandler.destroyMap(),this._maphHandler=null)}},{key:"initMapObject",value:function(){var Je=this.props,je=Je.mapTools,Tt=Je.mapOptions,Gt=Je.autoGeolocation,rn=Je.defaultAddress;if(this._maphHandler=new Qa.Z(this._mapContainer,Tt),je&&this._maphHandler.initTool(),Gt&&this._maphHandler.getCurrentPos(this.handleCurrPos),rn){var qt=rn.lng,Pt=rn.lat;this.setPosition(qt,Pt)}this._maphHandler.onClick(this.handleMapClick)}},{key:"handleChange",value:function(Je){var je=this;this._maphHandler.autoCompleteSearch(this.state.searchStr,function(Tt,Gt){Tt==="complete"&&je.setState({autoCompleteResult:Gt.tips,autoCompleteVisible:!0}),Tt==="no_data"&&je.setState({autoCompleteResult:[],autoCompleteVisible:!1})}),this.setState({searchStr:Je})}},{key:"handleKeydown",value:function(Je){Je.keyCode===13&&this.handleSearch()}},{key:"handleCurrPos",value:function(Je,je){if(Je==="complete"){var Tt=je.position.lat,Gt=je.position.lng;this.geoLocation(Gt,Tt,je.formattedAddress)}}},{key:"geoLocation",value:function(Je,je,Tt,Gt){this._maphHandler&&(this._maphHandler.setPosition(Je,je,18),this._maphHandler.removeMarker("searchMarker"),this._maphHandler.addSearchMarker(Je,je),this.setState({lng:Je,lat:je,address:Tt}),this.props.onAddressChange({lng:Je,lat:je,address:Tt,name:Gt}))}},{key:"setPosition",value:function(Je,je){this._maphHandler&&(this._maphHandler.setPosition(Je,je,18),this._maphHandler.removeMarker("searchMarker"),this._maphHandler.addSearchMarker(Je,je))}},{key:"handleSearch",value:function(){var Je=this,je=this.state.searchStr;this._maphHandler&&this._maphHandler.getLocation(je,function(Tt,Gt,rn){Je.geoLocation(Tt,Gt,rn)})}},{key:"handleSelect",value:function(Je){if(Je.location&&Je.location.lng){var je=Je.location.lng,Tt=Je.location.lat,Gt=Je.address,rn=Je.name;this.geoLocation(je,Tt,Gt,rn)}this.setState({autoCompleteVisible:!1,searchStr:Je.address})}},{key:"handleMapClick",value:function(Je,je,Tt){this.geoLocation(Je,je,Tt),this.props.mapClick&&this.props.mapClick()}},{key:"renderInput",value:function(){var Je=this,je=this.state,Tt=je.autoCompleteResult,Gt=je.autoCompleteVisible,rn=this.props.placeholder;return b.createElement("div",{className:"Amap-input"},b.createElement("span",{className:"Amap-input-search"},b.createElement(W.Z,{onClick:this.handleSearch,icon:"search",className:"Amap-input-search-icon"})),b.createElement(ae.Z,{placeholder:rn,value:this.state.searchStr,onKeyUp:this.handleKeydown,onChange:this.handleChange}),Tt&&Tt.length&&Gt?b.createElement(Ba.Z,{className:"Amap-autocomplete-list"},Tt.map(function(qt,Pt){return qt.address&&typeof qt.address=="string"?b.createElement(cr.Z,{key:Pt,onClick:function(){return Je.handleSelect(qt)},className:"Amap-autocomplete-list-item"},qt.address):null})):null)}},{key:"render",value:function(){var Je=this,je=this.props,Tt=je.mapStyle,Gt=je.inputAlign,rn=je.mapSearch,qt=H()({minWidth:300,minHeight:300},Tt),Pt=re()("ming Amap",{"Amap-align-right":Gt==="right"});return b.createElement("div",{className:Pt},rn?this.renderInput():void 0,this.props.topRightElement&&b.createElement("div",{className:"Amap-topRightElement"},this.props.topRightElement),b.createElement("div",{style:qt,className:"AmapContainer",ref:function(Qt){return Je._mapContainer=Qt}}))}}]),Bt}(b.Component),da.defaultProps={mapTools:!1,mapOptions:{zoom:15},onAddressChange:function(){},placeholder:"\u8BF7\u8F93\u5165\u5730\u5740",inputAlign:"left",autoGeolocation:!1,mapSearch:!0},da.propTypes={mapOptions:c().objectOf(c().oneOfType([c().string,c().number,c().array])),mapStyle:c().objectOf(c().string),mapTools:c().bool,placeholder:c().string,inputAlign:c().oneOf(["left","right"]),onAddressChange:c().func,autoGeolocation:c().bool,topRightElement:c().element,mapClick:c().func,mapSearch:c().bool,onUpdate:c().func},Jn),ha=t(15937),Ia=t(1178),wa=t(42541),Ka=t(64381),tr,Tr,xr=(0,S.Z)([`
  .location {
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.12), 0 0 2px rgba(0, 0, 0, 0.12);
    border-radius: 4px;
    position: relative;
    &:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12), 0 0 2px rgba(0, 0, 0, 0.12);
      .deleteIcon {
        display: block;
      }
    }
    .title {
      padding: 10px 12px 0;
      font-size: 14px;
      color: #333;
      font-weight: 700;
    }
    .address {
      color: #333;
      font-size: 12px;
      padding: 2px 12px 6px;
    }
    .xy {
      color: #9e9e9e;
      font-size: 12px;
      padding: 0 12px 10px;
      margin-top: -5px;
    }
    .deleteIcon {
      display: `,`;
      top: -12px;
      right: -12px;
    }
    .locationIcon {
      margin-left: 10px;
      width: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  }
`],[`
  .location {
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.12), 0 0 2px rgba(0, 0, 0, 0.12);
    border-radius: 4px;
    position: relative;
    &:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12), 0 0 2px rgba(0, 0, 0, 0.12);
      .deleteIcon {
        display: block;
      }
    }
    .title {
      padding: 10px 12px 0;
      font-size: 14px;
      color: #333;
      font-weight: 700;
    }
    .address {
      color: #333;
      font-size: 12px;
      padding: 2px 12px 6px;
    }
    .xy {
      color: #9e9e9e;
      font-size: 12px;
      padding: 0 12px 10px;
      margin-top: -5px;
    }
    .deleteIcon {
      display: `,`;
      top: -12px;
      right: -12px;
    }
    .locationIcon {
      margin-left: 10px;
      width: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  }
`]),_a=ue.ZP.div(xr,function(nn){var Bt=nn.isMobile;return Bt?"block":"none"}),gr=md.global.Config.IsLocal,zr=window.isWeiXin&&!gr&&!window.isWxWork,ea=(0,w.Q9)(),Xn=(window.isWxWork||zr||window.isWeLink||window.isDingTalk||window.isFeiShu)&&ea,Va=(Tr=tr=function(nn){(0,A.default)(Bt,nn);function Bt(){var ln,Je,je,Tt;(0,n.default)(this,Bt);for(var Gt=arguments.length,rn=Array(Gt),qt=0;qt<Gt;qt++)rn[qt]=arguments[qt];return Tt=(Je=(je=(0,j.default)(this,(ln=Bt.__proto__||O()(Bt)).call.apply(ln,[this].concat(rn))),je),je.state={visible:!1},je.handleAuthentication=function(){var Pt=je.props,Yt=Pt.strDefault,Qt=Pt.projectId,vn=(typeof Yt=="string"?Yt:"00")[0]==="1";if(zr){vn?(0,Ka.Eg)(je.handleWxSelectLocation,(0,Ka.xt)()):je.setState({visible:!0});return}if(window.isWxWork){vn?(0,Ka.Eg)(je.handleWxSelectLocation,(0,Ka.MH)(Qt)):je.setState({visible:!0});return}if(window.isFeiShu){(0,Ka.Eg)(je.handleFeishuSelectLocation,(0,Ka.M8)(Qt));return}if(window.isDingTalk){vn?(0,Ka.Eg)(je.handleDingSelectLocation,(0,Ka.Sd)(Qt)):je.setState({visible:!0});return}if(window.isWeLink){vn?(0,Ka.Eg)(je.handleWeLinkSelectLocation,(0,Ka.r0)(Qt)):je.setState({visible:!0});return}},je.handleDingSelectLocation=function(){var Pt=je.props.onChange;sr().loading(_l("\u6B63\u5728\u83B7\u53D6\u53D6\u7ECF\u7EAC\u5EA6\uFF0C\u8BF7\u7A0D\u540E")),window.dd.device.geolocation.get({targetAccuracy:200,coordinate:1,withReGeocode:!1,useCache:!0,onSuccess:function(Qt){var vn=Qt.longitude,cn=Qt.latitude;Pt(E()({x:vn,y:cn})),sr().hide()},onFail:function(Qt){window.nativeAlert(E()(Qt)),sr().hide()}})},je.handleWeLinkSelectLocation=function(){var Pt=je.props.onChange;sr().loading(_l("\u6B63\u5728\u83B7\u53D6\u53D6\u7ECF\u7EAC\u5EA6\uFF0C\u8BF7\u7A0D\u540E")),window.HWH5.getLocation({type:0,mode:"gps"}).then(function(Yt){var Qt=Yt.longitude,vn=Yt.latitude;Pt(E()({x:Qt,y:vn})),sr().hide()}).catch(function(Yt){window.nativeAlert(E()(Yt)),sr().hide()})},je.handleFeishuSelectLocation=function(){var Pt=je.props,Yt=Pt.strDefault,Qt=Pt.onChange;(typeof Yt=="string"?Yt:"00")[0]==="1"?(sr().loading(_l("\u6B63\u5728\u83B7\u53D6\u53D6\u7ECF\u7EAC\u5EA6\uFF0C\u8BF7\u7A0D\u540E")),window.tt.getLocation({type:"gcj02",timeout:5,cacheTimeout:30,accuracy:"best",success:function(cn){var mn=cn.longitude,Dn=cn.latitude;Qt(E()({x:mn,y:Dn})),sr().hide()},fail:function(cn){var mn=cn.errMsg;mn.includes("cancel")||mn.includes("canceled")||window.nativeAlert(E()(cn)),sr().hide()}})):window.tt.chooseLocation({type:"gcj02",success:function(cn){var mn=cn.longitude,Dn=cn.latitude,bn=cn.address,Mn=cn.name;Qt(E()({x:mn,y:Dn,address:bn,title:Mn}))},fail:function(cn){var mn=cn.errMsg;mn.includes("cancel")||mn.includes("canceled")||window.nativeAlert(E()(cn))}})},je.handleWxSelectLocation=function(){var Pt=je.props.onChange;sr().loading(_l("\u6B63\u5728\u83B7\u53D6\u53D6\u7ECF\u7EAC\u5EA6\uFF0C\u8BF7\u7A0D\u540E")),window.wx.getLocation({type:"wgs84",success:function(Qt){var vn=Qt.longitude,cn=Qt.latitude,mn=Qt.address,Dn=Qt.name;Pt(E()({x:vn,y:cn,address:mn,title:Dn,coordinate:"WGS84"})),sr().hide()},error:function(Qt){window.nativeAlert(E()(Qt)),sr().hide()}})},je.handleH5Location=function(){var Pt=je.props.onChange;sr().loading(_l("\u6B63\u5728\u83B7\u53D6\u53D6\u7ECF\u7EAC\u5EA6\uFF0C\u8BF7\u7A0D\u540E")),new hr.Z().loadJs().then(function(){new Qa.Z().getCurrentPos(function(Yt,Qt){Yt==="complete"&&(Pt(E()({x:Qt.position.lng,y:Qt.position.lat,address:Qt.formattedAddress||"",title:(Qt.addressComponent||{}).building||""})),sr().hide())})})},Je),(0,j.default)(je,Tt)}return(0,s.default)(Bt,[{key:"render",value:function(){var Je=this,je=this.props,Tt=je.disabled,Gt=je.value,rn=je.enumDefault,qt=je.enumDefault2,Pt=je.advancedSetting,Yt=je.onChange,Qt=je.from,vn=je.strDefault,cn=this.state.visible,mn=(typeof vn=="string"?vn:"00")[0]==="1"&&!Xn,Dn=null;if(Gt)try{Dn=JSON.parse(Gt)}catch(Ln){console.log(Ln)}var bn=Dn||{};if((bn.coordinate||"").toLowerCase()==="wgs84"&&bn.x&&bn.y){var Mn=(0,Ia.IQ)(Dn.x,Dn.y);bn.x=Mn[0],bn.y=Mn[1]}return mn&&!Gt?ea?b.createElement("div",{className:"customFormControlBox customFormButton TxtCenter",onClick:function(){return Je.handleH5Location()}},b.createElement("span",{className:"Bold Font13 LineHeight34"},_l("\u70B9\u51FB\u83B7\u53D6\u5F53\u524D\u4F4D\u7F6E\u7ECF\u7EAC\u5EA6"))):b.createElement("div",{className:"customLocationDisabled"},b.createElement("span",null,_l("\u8BF7\u5728\u79FB\u52A8\u7AEF\u4E2D\u83B7\u53D6\u5F53\u524D\u4F4D\u7F6E")),b.createElement(W.Z,{icon:h().includes([u.BD.H5_ADD,u.BD.H5_EDIT],Qt)?"arrow-right-border":"location",className:"Font16"})):b.createElement(b.Fragment,null,h().isObject(Dn)?b.createElement(_a,{isMobile:ea,onClick:function(){!ea||Tt?window.open("https://uri.amap.com/marker?position="+Dn.x+","+Dn.y):Xn?Je.handleAuthentication():Je.setState({visible:!0})}},b.createElement("div",{className:"location"},!Tt&&b.createElement("div",{className:"deleteIcon Absolute"},b.createElement(wa.xC,{onClick:function(Wn){Wn.stopPropagation(),Yt("")}},b.createElement("i",{className:"icon icon-close"}))),b.createElement("div",{className:"flexRow"},b.createElement("div",{className:"flex"},b.createElement("div",{className:"title"},Dn.title||_l("\u4F4D\u7F6E")),b.createElement("div",{className:"address"},Dn.address),(Pt.showxy==="1"||!Dn.title&&!Dn.address)&&b.createElement("div",{className:"xy"},b.createElement("span",null,_l("\u7ECF\u5EA6\uFF1A%0",Dn.x)),b.createElement("span",{className:"mLeft10"},_l("\u7EAC\u5EA6\uFF1A%0",Dn.y)))),!Tt&&!ea&&!mn&&b.createElement("div",{className:"locationIcon"},b.createElement("span",{"data-tip":_l("\u91CD\u65B0\u5B9A\u4F4D")},b.createElement(W.Z,{icon:"location",className:"Font20 Gray_9e ThemeHoverColor3 pointer",onClick:function(Wn){Wn.stopPropagation(),Xn?Je.handleAuthentication():Je.setState({visible:!0})}})))),!!rn&&b.createElement("div",{className:"mapWrap relative"},b.createElement("div",{className:"Absolute",style:{top:0,right:0,bottom:0,left:0,background:"transparent",zIndex:1}}),b.createElement(ra,{mapSearch:!1,mapStyle:{minHeight:"110px",minWidth:"auto"},defaultAddress:{lng:bn.x,lat:bn.y}})))):b.createElement("div",{className:"customFormControlBox customFormButton flexRow",onClick:function(){Xn?Je.handleAuthentication():Je.setState({visible:!0})}},b.createElement("span",{className:"flex mRight20 Gray_bd"},_l("\u8BF7\u9009\u62E9")),!Tt&&b.createElement(W.Z,{icon:h().includes([u.BD.H5_ADD,u.BD.H5_EDIT],Qt)?"arrow-right-border":"location",className:"Font16 Gray_bd"})),cn&&b.createElement(ha.Z,{isMobile:ea,distance:qt?parseInt(Pt.distance):0,defaultAddress:Dn||null,onAddressChange:function(Wn){var oa=Wn.lng,Sa=Wn.lat,Ra=Wn.address,qn=Wn.name;Yt(E()({x:oa,y:Sa,address:Ra,title:qn})),Je.setState({visible:!1})},onClose:function(){Je.setState({visible:!1})}}),this.props.default==="1"&&b.createElement("div",{className:"hidden",ref:function(Wn){return Je._mapContainer=Wn}}))}}]),Bt}(b.Component),tr.propTypes={from:c().number,disabled:c().bool,value:c().string,enumDefault:c().number,enumDefault2:c().number,onChange:c().func,default:c().string},Tr),$a=t(68461),vr=t(46417),Er=t(75208),ur=t(44293),Kr,Fr,yo=(Fr=Kr=function(nn){(0,A.default)(Bt,nn);function Bt(){var ln,Je,je,Tt;(0,n.default)(this,Bt);for(var Gt=arguments.length,rn=Array(Gt),qt=0;qt<Gt;qt++)rn[qt]=arguments[qt];return Tt=(Je=(je=(0,j.default)(this,(ln=Bt.__proto__||O()(Bt)).call.apply(ln,[this].concat(rn))),je),je.state={isUploading:!1},je.handleUploaded=function(Pt,Yt,Qt){var vn=je.props,cn=vn.worksheetId,mn=vn.controlId,Dn=vn.advancedSetting,bn=vn.formData,Mn=vn.onChange,Ln=(0,ur.LE)(Yt,E()(Qt));if(je.cacheFile.push(Ln),Dn.ocrapitype==="1"){Dn.ocroriginal&&Mn(E()({attachments:[Ln],knowledgeAtts:[],attachmentData:[]}),Dn.ocroriginal),je.handleSearch(Pt,Ln);return}if(Dn.ocrmaptype==="2"){if(!Dn.ocrcid||h().get(Pt,"files.length")!==je.cacheFile.length)return;var Wn=bn.find(function(qn){return qn.controlId===Dn.ocrcid});if(h().get(Wn,"advancedSetting.enablelimit")==="1"){var oa=h().get(Wn,"advancedSetting.max"),Sa=h().isNumber(Wn.value)?Wn.value:h().get(Wn,"value.rows.length")||h().get(Wn,"value.num");if((Sa||0)+je.cacheFile.length>parseInt(oa||0)){alert(_l("\u5B50\u8868\u6570\u91CF\u8FBE\u5230\u4E0A\u9650"),3),je.handleClear(Pt);return}}}var Ra=je.cacheFile.map(function(qn){return qn.serverName+qn.key});k.Z.ocr({worksheetId:cn,controlId:mn,data:Ra,type:1}).then(function(qn){var Ha=JSON.parse(Dn.ocrmap||"{}");if(Dn.ocrmaptype==="2"){var pa=h().get(qn,"data"),Ta=je.cacheFile.length-pa.length;Ta&&alert(_l(Ta+"\u4E2A\u6587\u4EF6\u8BC6\u522B\u9519\u8BEF"),3);var Fa=[];pa.forEach(function(xa){var er={};(xa.data||[]).map(function(ia){var Ya=Ha.find(function(pr){return pr.cid===ia.controlId});h().includes([1,1001,2001],parseInt(Ya.type))?er[ia.controlId]=E()({attachments:[je.cacheFile[xa.index]],knowledgeAtts:[],attachmentData:[]}):er[ia.controlId]=ia.value}),h().isEmpty(er)||Fa.push(er)});var rr={action:"append",rows:Fa};Mn(rr,Dn.ocrcid),je.handleClear(Pt);return}qn.code===1?qn.data.forEach(function(xa){var er=Ha.find(function(Ya){return Ya.cid===xa.controlId}),ia=void 0;h().includes([1,1001,2001],parseInt(er.type))?ia=E()({attachments:je.cacheFile,knowledgeAtts:[],attachmentData:[]}):er.subCid?ia={action:"clearAndSet",rows:xa.childs}:ia=xa.value,Mn(ia,xa.controlId)}):alert(qn.errorMsg,2),je.handleClear(Pt)})},je.handleSearch=function(Pt,Yt){var Qt=je.props,vn=Qt.advancedSetting;vn=vn===void 0?{}:vn;var cn=vn.requestmap,mn=Qt.dataSource,Dn=Qt.formData,bn=Qt.worksheetId,Mn=Qt.controlId,Ln=Qt.projectId,Wn=Qt.appId;if(!mn)return je.setState({isUploading:!1}),Pt&&Pt.disableBrowse(!1),alert(_l("\u6A21\u7248\u4E3A\u7A7A\u6216\u5DF2\u5220\u9664"),3);var oa=safeParse(cn||"[]");je.postList&&je.postList.abort();var Sa=(0,Er.yh)(oa,Dn,Yt),Ra={data:!oa.length||h().isEmpty(Sa)?"":Sa,projectId:Ln,workSheetId:bn,controlId:Mn,apkId:Wn,apiTemplateId:mn};window.isPublicWorksheet&&(Ra.formId=window.publicWorksheetShareId),je.postList=k.Z.excuteApiQuery(Ra),je.postList.then(function(qn){if(qn.code===20008){je.setState({isUploading:!1}),Pt&&Pt.disableBrowse(!1),(0,w.Yg)({projectId:Ln,okText:_l("\u7ACB\u5373\u5145\u503C"),hint:_l("\u4F59\u989D\u4E0D\u8DB3\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u5145\u503C"),explainText:b.createElement("div",null),onOk:function(){location.href="/admin/valueaddservice/"+Ln}});return}if(qn.message){alert(qn.message,3),je.setState({isUploading:!1}),Pt&&Pt.disableBrowse(!1);return}je.setState({isUploading:!1},function(){Pt&&Pt.disableBrowse(!1),je.handleUpdate(qn.apiQueryData)})})},je.handleUpdate=function(){var Pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,Er.pn)(je.props,Pt,!1,function(){je.setState({data:null,open:!1,keywords:""})})},je.renderContent=function(){var Pt=je.props,Yt=Pt.enumDefault,Qt=Pt.advancedSetting,vn=Qt===void 0?{}:Qt,cn=Pt.hint,mn=cn===void 0?"":cn,Dn=je.state.isUploading,bn=[{},{text:_l("\u6587\u5B57\u8BC6\u522B"),icon:"ocr"},{text:_l("\u8EAB\u4EFD\u8BC1\u8BC6\u522B"),icon:"ocr_id_card"},{text:_l("\u589E\u503C\u7A0E\u53D1\u7968\u8BC6\u522B"),icon:"ocr_invoice"}];return b.createElement(b.Fragment,null,Dn?b.createElement("span",{style:{width:je.width-50,textAlign:"center"}},b.createElement(W.Z,{icon:"loading_button",className:"Font16 customOCRLoading"})):b.createElement(b.Fragment,null,b.createElement(W.Z,{icon:bn[Yt].icon,className:"Font20 mRight5 Gray_9e"}),b.createElement("span",{className:"overflow_ellipsis Bold"},vn.ocrapitype==="1"?mn||_l("\u8BC6\u522B\u6587\u5B57"):mn||bn[Yt].text)))},Je),(0,j.default)(je,Tt)}return(0,s.default)(Bt,[{key:"componentDidMount",value:function(){this.file&&this.file.upload&&(this.width=this.file.upload.offsetWidth,this.cacheFile=[])}},{key:"handleClear",value:function(Je){this.setState({isUploading:!1}),Je.splice(0,Je.files.length),this.cacheFile=[],Je.disableBrowse(!1)}},{key:"render",value:function(){var Je=this,je=this.props,Tt=je.enumDefault,Gt=je.advancedSetting,rn=Gt===void 0?{}:Gt,qt=(0,w.Q9)(),Pt=safeParse(rn.requestmap||"[]");return rn.ocrapitype==="1"&&Pt.length>0&&h().every(Pt,function(Yt){return!h().find(safeParse(Yt.defsource||"[]"),function(Qt){return h().includes(["ocr-file","ocr-file-url"],Qt.cid)})})?b.createElement("div",{className:"customFormControlBox customFormControlOCR",onClick:function(){Je.setState({isUploading:!0},Je.handleSearch)}},this.renderContent()):b.createElement(vr.Z,{className:"customFormControlBox customFormControlOCR",ref:function(Qt){Je.file=Qt},options:(0,V.default)({},rn.ocrmaptype==="2"?{multi_selection:!0,max_file_count:10,error_callback:function(){alert(_l("\u6279\u91CF\u8BC6\u522B\u4EC5\u652F\u630110\u4E2A\u9644\u4EF6"),3)}}:{multi_selection:!1},{chunk_size:0,filters:{mime_types:[{title:"image",extensions:rn.ocrapitype==="1"||Tt===3?"jpg,jpeg,png,pdf":"jpg,jpeg,png"}]}}),onUploaded:this.handleUploaded,onAdd:function(Qt,vn){Je.setState({isUploading:!0}),Qt.disableBrowse()},onInit:function(){if(qt&&h().get(Je.props,"strDefault")==="10"){var Qt=Je.file.upload.nextSibling.querySelector("input");Qt.setAttribute("capture","camera")}}},this.renderContent())}}]),Bt}(b.Component),Kr.propTypes={worksheetId:c().string,controlId:c().string,enumDefault:c().number,onChange:c().func,advancedSetting:c().object},Fr),eo=t(66946),wr,Or,Fo=(0,S.Z)([`
  max-width: 230;
  max-height: 200;
  overflow-y: 'auto';
  color: '#fff';
  white-space: 'pre-wrap';
  .customSubtotalMessage {
    color: #fff !important;
    &:hover {
      color: rgba(255, 255, 255, 0.8) !important;
    }
    .mLeft5 {
      margin-left: 0 !important;
    }
  }
`],[`
  max-width: 230;
  max-height: 200;
  overflow-y: 'auto';
  color: '#fff';
  white-space: 'pre-wrap';
  .customSubtotalMessage {
    color: #fff !important;
    &:hover {
      color: rgba(255, 255, 255, 0.8) !important;
    }
    .mLeft5 {
      margin-left: 0 !important;
    }
  }
`]),Wo=(0,S.Z)([`
  &.customFormSubtotal {
    &:hover {
      span {
        display: inline-block;
      }
    }
    > span {
      display: none;
      white-space: normal;
    }
  }
`],[`
  &.customFormSubtotal {
    &:hover {
      span {
        display: inline-block;
      }
    }
    > span {
      display: none;
      white-space: normal;
    }
  }
`]),Uo=ue.ZP.div(Fo),No=ue.ZP.div(Wo),Ao=(Or=wr=function(nn){(0,A.default)(Bt,nn);function Bt(){return(0,n.default)(this,Bt),(0,j.default)(this,(Bt.__proto__||O()(Bt)).apply(this,arguments))}return(0,s.default)(Bt,[{key:"render",value:function(){var Je=this.props,je=Je.value,Tt=Je.dot,Gt=Je.unit,rn=Je.advancedSetting,qt=rn===void 0?{}:rn,Pt=Je.enumDefault2,Yt=Je.enumDefault,Qt=je;if(Qt==="max"){var vn=(0,w.Q9)(),cn=[vn?"click":"hover"];return b.createElement("div",{className:"customFormControlBox customFormTextareaBox customFormReadonly Gray_9e"},_l("\u8D85\u51FA\u6C47\u603B\u6570\u91CF\u4E0A\u9650"),b.createElement(Rt.Z,{text:b.createElement(Uo,null,_l("\u6700\u5927\u652F\u6301\u6C47\u603B1000\u884C\u6570\u636E\u3002\u5982\u9700\u8981\u6C47\u603B\u66F4\u591A\u6570\u636E\uFF0C\u8BF7\u901A\u8FC7\u914D\u7F6E\u5DE5\u4F5C\u6D41\u8FD0\u7B97\u5199\u5165\u3002"),b.createElement(eo.Z,{className:"customSubtotalMessage",type:3,href:"https://help.mingdao.com/worksheet/control-rollup-application",text:_l("\u3010\u70B9\u51FB\u67E5\u770B\u5E2E\u52A9\u3011")})),action:cn,popupPlacement:"top",offset:[0,0]},b.createElement("i",{className:"icon-info_outline Font16 mLeft5"})))}if(!h().isUndefined(je)&&Pt===6&&(qt.numshow==="1"&&(Qt=parseFloat(je)*100),Qt=h().isUndefined(Tt)?Qt:h().round(Qt,Tt).toFixed(Tt),qt.dotformat==="1"&&(Qt=(0,w.FY)(Qt)),qt.thousandth!=="1"&&(Qt=Qt.replace(Qt.indexOf(".")>-1?/(\d{1,3})(?=(?:\d{3})+\.)/g:/(\d{1,3})(?=(?:\d{3})+$)/g,"$1,")),Qt=Qt+(Gt?" "+Gt:"")),!h().isUndefined(je)&&h().includes([15,16],Pt)&&h().includes([2,3],Yt)){var mn=(0,Qe.eO)({type:Pt,advancedSetting:{showtype:Gt}}),Dn=mn.formatMode;Qt=T()(je).format(Dn)}return!h().isUndefined(je)&&qt.summaryresult==="1"&&(Qt=h().round(parseFloat(je)*100,Tt||0).toFixed(Tt||0)+"%"),(qt.prefix||qt.suffix)&&(Qt=(qt.prefix||"")+Qt+(qt.suffix||"")),b.createElement(No,{className:"customFormControlBox customFormTextareaBox customFormReadonly customFormSubtotal"},Qt)}}]),Bt}(b.Component),wr.propTypes={value:c().any,dot:c().number,unit:c().string,advancedSetting:c().object,onChange:c().func,worksheetId:c().string,recordId:c().string,controlId:c().string,enumDefault2:c().number},Or),Oo,Wr,So=(0,S.Z)([`
  width: 100%;
  .embedContainer {
    width: 100%;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.12), 0 0 2px rgba(0, 0, 0, 0.12);
    border-radius: 4px;
    height: `,`px;
    &.chartPadding {
      padding: 8px 16px 16px;
    }
  }
`],[`
  width: 100%;
  .embedContainer {
    width: 100%;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.12), 0 0 2px rgba(0, 0, 0, 0.12);
    border-radius: 4px;
    height: `,`px;
    &.chartPadding {
      padding: 8px 16px 16px;
    }
  }
`]),to=ue.ZP.div(So,function(nn){return nn.height}),go=(Wr=Oo=function(nn){(0,A.default)(Bt,nn);function Bt(){var ln,Je,je,Tt;(0,n.default)(this,Bt);for(var Gt=arguments.length,rn=Array(Gt),qt=0;qt<Gt;qt++)rn[qt]=arguments[qt];return Tt=(Je=(je=(0,j.default)(this,(ln=Bt.__proto__||O()(Bt)).call.apply(ln,[this].concat(rn))),je),je.iframe=b.createRef(),je.state={value:"",needUpdate:"",ChartComponents:null},je.setValue=function(){je.props.value&&je.props.value!==je.state.value&&je.setState({value:je.props.value})},Je),(0,j.default)(je,Tt)}return(0,s.default)(Bt,[{key:"componentDidMount",value:function(){var Je=this,je=(0,w.Q9)();this.props.enumDefault===1?(this.setValue(),this.embedWatch=setInterval(this.setValue,3e3)):je?Promise.all([t.e(1323),t.e(4738),t.e(2423),t.e(9414),t.e(570),t.e(5087),t.e(1555),t.e(9251)]).then(t.bind(t,11555)).then(function(Tt){Je.setState({ChartComponents:Tt})}):Promise.all([t.e(1323),t.e(4738),t.e(3710),t.e(2979),t.e(2762),t.e(9414),t.e(570),t.e(5087),t.e(3892),t.e(8416),t.e(9664)]).then(t.bind(t,66879)).then(function(Tt){Je.setState({ChartComponents:Tt})}),h().isFunction(this.props.addRefreshEvents)&&this.props.addRefreshEvents(this.props.controlId,this.handleReloadIFrame.bind(this))}},{key:"componentWillReceiveProps",value:function(Je){Je.flag!==this.state.needUpdate&&this.setState({needUpdate:Je.flag})}},{key:"componentWillUnmount",value:function(){clearInterval(this.embedWatch),h().isFunction(this.props.addRefreshEvents)&&this.props.addRefreshEvents(this.props.controlId,void 0)}},{key:"handleReloadIFrame",value:function(){if(h().isFunction(h().get(this,"iframe.current.contentDocument.location.reload")))try{this.iframe.current.contentDocument.location.reload()}catch(Je){console.error(Je)}}},{key:"render",value:function(){var Je=this,je=this.props,Tt=je.advancedSetting,Gt=Tt===void 0?{}:Tt,rn=je.enumDefault,qt=je.dataSource,Pt=je.formData,Yt=je.appId,Qt=je.viewId,vn=je.recordId,cn=je.projectId,mn=je.isCharge,Dn=je.viewIdForPermit,bn=this.state,Mn=bn.value,Ln=bn.needUpdate,Wn=bn.ChartComponents,oa=Gt.height,Sa=Gt.filters,Ra=(0,w.Q9)(),qn=function(){var pa=rn===1?/^https?:\/\/.+$/.test(Mn):qt,Ta=h().get(window,"shareState.isPublicView")||h().get(window,"shareState.isPublicPage");if(!pa)return b.createElement("div",{className:"embedContainer"},b.createElement("div",{className:"w100 h100 Gray_9e BGF7F7F7 Font15 flexRow alignItemsCenter justifyContentCenter"},_l("\u5D4C\u5165\u5185\u5BB9\u65E0\u6CD5\u89E3\u6790")));if(rn===1)return b.createElement("div",{className:"embedContainer"},b.createElement("iframe",{ref:Je.iframe,width:"100%",height:"100%",frameborder:"0",allowtransparency:"true",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowfullscreen:"true",src:Mn}));var Fa=(0,N.AY)(JSON.parse(Sa||"[]"),Pt,vn),rr=qt?JSON.parse(qt):{},xa=rr.reportid;return Wn?b.createElement(b.Fragment,null,Ra?b.createElement("div",{className:"embedContainer chartPadding flexColumn"},b.createElement(Wn.default,{reportId:xa,pageId:Ta?Qt:vn,filters:Fa,needUpdate:Ln,viewId:Dn})):b.createElement(Wn.default,{className:"embedContainer chartPadding",report:{id:xa},pageId:Ta?Qt:vn,projectId:cn,appId:Yt,sourceType:2,filters:Fa,needUpdate:Ln,isCharge:mn,viewId:Dn})):null};return b.createElement(to,{height:oa||400},qn())}}]),Bt}(b.Component),Oo.propTypes={value:c().string,enumDefault:c().number},Wr),Do=t(26313),Ja=t(31129),ar=t(78549),Ur=t(21313),Zr,$r,oo=($r=Zr=function(nn){(0,A.default)(Bt,nn);function Bt(){var ln,Je,je,Tt;(0,n.default)(this,Bt);for(var Gt=arguments.length,rn=Array(Gt),qt=0;qt<Gt;qt++)rn[qt]=arguments[qt];return Tt=(Je=(je=(0,j.default)(this,(ln=Bt.__proto__||O()(Bt)).call.apply(ln,[this].concat(rn))),je),je.state={showMobileOrgRole:!1},je.pickOrgRole=function(Pt){var Yt=je.props,Qt=Yt.projectId,vn=Yt.formData,cn=Yt.enumDefault;if(!h().find(md.global.Account.projects,function(Dn){return Dn.projectId===Qt})){alert(_l("\u60A8\u4E0D\u662F\u8BE5\u7EC4\u7EC7\u6210\u5458\uFF0C\u65E0\u6CD5\u83B7\u53D6\u5176\u7EC4\u7EC7\u89D2\u8272\u5217\u8868\uFF0C\u8BF7\u8054\u7CFB\u7EC4\u7EC7\u7BA1\u7406\u5458"),3);return}if((0,w.Q9)())je.setState({showMobileOrgRole:!0});else{var mn=(0,N.Mn)(je.props,vn);(0,ar.Z)(Pt.target,{projectId:Qt,unique:cn!==1,offset:{top:16,left:-16},onSave:je.onSave,appointedOrganizeIds:h().get(mn,"appointedOrganizeIds")})}},je.onSave=function(Pt){if(!h().isEmpty(Pt)){var Yt=Pt.map(function(bn){return{organizeId:bn.organizeId,organizeName:bn.organizeName}}),Qt=je.props,vn=Qt.enumDefault,cn=Qt.onChange,mn=Qt.value,Dn=vn===0?Yt:h().uniqBy(JSON.parse(mn||"[]").concat(Yt),"organizeId");cn(E()(Dn))}},Je),(0,j.default)(je,Tt)}return(0,s.default)(Bt,[{key:"removeOrgRole",value:function(Je){var je=this.props,Tt=je.onChange,Gt=je.value,rn=JSON.parse(Gt).filter(function(qt){return qt.organizeId!==Je});Tt(E()(rn))}},{key:"render",value:function(){var Je=this,je=this.props,Tt=je.projectId,Gt=je.disabled,rn=je.enumDefault,qt=je.formData,Pt=je.masterData,Yt=Pt===void 0?{}:Pt,Qt=JSON.parse(this.props.value||"[]"),vn=this.state.showMobileOrgRole,cn=(0,N.Mn)(this.props,qt,Yt);return b.createElement("div",{className:"customFormControlBox customFormControlUser"},Qt.map(function(mn,Dn){return b.createElement("div",{className:re()("customFormControlTags",{selected:(0,w.Q9)()&&!Gt}),key:Dn},b.createElement("div",{className:"departWrap",style:{backgroundColor:"#FFAD00"}},b.createElement("i",{className:"Font16 icon-user"})),b.createElement("span",{className:"ellipsis mLeft5",style:{maxWidth:200}},mn.organizeName),(rn===0&&Qt.length===1||rn!==0)&&!Gt&&b.createElement("i",{className:"icon-minus-square Font16 tagDel",onClick:function(){return Je.removeOrgRole(mn.organizeId)}}))}),!Gt&&b.createElement("div",{className:"TxtCenter Gray_75 ThemeHoverBorderColor3 ThemeHoverColor3 pointer addBtn",onClick:this.pickOrgRole},b.createElement("i",{className:rn===0&&Qt.length?"icon-swap_horiz Font16":"icon-plus Font14"})),vn&&b.createElement(Ur.Z,{projectId:Tt,visible:!0,unique:rn===0,onSave:this.onSave,appointedOrganizeIds:h().get(cn,"appointedOrganizeIds"),onClose:function(){return Je.setState({showMobileOrgRole:!1})}}))}}]),Bt}(b.Component),Zr.propTypes={disabled:c().bool,value:c().string,projectId:c().string,enumDefault:c().number,onChange:c().func},$r),Po=t(76242),io=t(44266),Zo=function(nn){(0,A.default)(Bt,nn);function Bt(){return(0,n.default)(this,Bt),(0,j.default)(this,(Bt.__proto__||O()(Bt)).apply(this,arguments))}return(0,s.default)(Bt,[{key:"render",value:function(){var Je=this.props.children;return b.createElement("div",{className:"customFieldsContainer"},Je)}}]),Bt}(b.Component),Xo=t(21300);function ai(nn){var Bt=nn.from,ln=nn.renderData,Je=nn.setNavVisible,je=nn.registerCell,Tt=_.get(nn,"widgetStyle.sectionstyle")||"0";return b.createElement(Xo.default,{data:nn,from:Bt,fromType:"display",sectionstyle:Tt,renderData:ln,setNavVisible:Je,registerCell:je})}const ri={RADIO:Q,CHECKBOX:i.Z,DROP_DOWN:m.Z,DATE:v.Z,DATE_RANGE:M,AREA:he,READONLY:oe,EMAIL:me,ID:Me,TEL_PHONE:we,MOBILE_PHONE:Ie.Z,TEXTAREA:Ve,NUMBER:$e,CHECK:ft,ATTACHMENT:qe.Z,USER_SELECT:kt,DEPARTMENT_SELECT:$t,RANGE:Lt,RELATION:Xt,RELATE_RECORD:pn.Z,SUBLIST:On,DATECALC:Fn,RICH_TEXT:La,SIGNATURE:ga.Z,LOCATION:Va,Cascader:$a.Z,OCR:yo,SUBTOTAL:Ao,Embed:go,Time:Do.Z,BarCode:Ja.Z,OrgRole:oo,Search:Po.Z,RelationSearch:io.ZP,Section:Zo,SplitLine:ai};var bo=t(14651),jo=t(42185),Jo=t(86559),Pr=t(36612),ko=t(5505),Ho=function(nn){(0,A.default)(Bt,nn);function Bt(ln){(0,n.default)(this,Bt);var Je=(0,j.default)(this,(Bt.__proto__||O()(Bt)).call(this,ln));return Je.handleVerify=function(){var je=Je.props,Tt=je.value,Gt=je.worksheetId,rn=Je;if(!Je.state.isSubmit){var qt=!0;if(Tt?(Je.iti.setNumber(Tt),Je.iti.isValidNumber()||(0,N.Ci)(Tt)||(qt=!1)):qt=!1,!qt){alert(_l("\u8BF7\u6B63\u786E\u586B\u5199\u624B\u673A\u53F7"),3);return}Je.setState({isSubmit:!0});var Pt=function(cn){if(cn.ret!==0){rn.setState({isSubmit:!1});return}ko.Z.sendVerifyCode({account:Tt,ticket:cn.ticket,randStr:cn.randstr,worksheetId:Gt,captchaType:md.global.getCaptchaType()}).then(function(mn){mn===1?rn.handleSend():mn===15?Qt():(alert({3:_l("\u56FE\u5F62\u9A8C\u8BC1\u7801\u5931\u8D25"),8:_l("\u8BE5\u624B\u673A\u53F7\u53D1\u9001\u8FC7\u4E8E\u9891\u7E41"),22:_l("\u77ED\u4FE1\u4F59\u989D\u4E0D\u8DB3\uFF0C\u8BF7\u8054\u7CFB\u8868\u5355\u53D1\u5E03\u8005")}[mn]||_l("\u53D1\u9001\u5931\u8D25"),2),rn.setState({isSubmit:!1}))})},Yt=function(cn){cn||Je.setState({isSubmit:!1})},Qt=function(){md.global.getCaptchaType()===1?new Jo.Z(Pt,Yt):new TencentCaptcha(md.global.Config.CaptchaAppId.toString(),Pt).show()};Pt({ret:0})}},Je.state={isSubmit:!1,count:0},Je}return(0,s.default)(Bt,[{key:"componentDidMount",value:function(){this.iti=(0,Pr.hC)()}},{key:"handleSend",value:function(){var Je=this;this.setState({count:30}),this.timer=setInterval(function(){var je=Je.state.count;je===1?(Je.handleClear(),Je.setState({isSubmit:!1,count:0})):Je.setState({count:je-1})},1e3)}},{key:"handleClear",value:function(){clearInterval(this.timer)}},{key:"componentWillUnmount",value:function(){this.handleClear()}},{key:"render",value:function(){var Je=this.props,je=Je.size,Tt=Je.verifyCode,Gt=Je.handleChange,rn=this.state,qt=rn.isSubmit,Pt=rn.count;return b.createElement("div",{className:"customFormControlVerify"},b.createElement("input",{className:re()("customFormControlBox",{verifyCodeStyle:je===4}),value:Tt,maxLength:4,onChange:function(Qt){var vn=Qt.target.value.trim();Gt(vn.replace(/[^\d]/g,""))}}),b.createElement(jo.ZP,{disabled:qt,type:qt?"secondary":"primary",onClick:this.handleVerify},qt?Pt?_l("%0\u79D2\u540E\u91CD\u53D1",Pt):_l("\u6B63\u5728\u53D1\u9001..."):_l("\u83B7\u53D6\u9A8C\u8BC1\u7801")))}}]),Bt}(b.Component),Xr=t(25734),_o=t(15742),oi=t(26637),qo=(0,S.Z)([`
  `,`
  `,`
  `,`
  line-height: `,`
  margin-top: `,`;
  `,`
  .controlLabelName {
    `,`
    `,`
    font-size: `,`;
    color: `,`;
    `,`;
  }
  .requiredBtnBox .customFormItemLoading {
    line-height: `,`;
  }
  &.isRelateRecordTable,
  &.isRelationSearchTable {
    .controlLabelName {
      margin: 14px 0 0;
      font-size: 15px;
      color: #333;
    }
  }
`],[`
  `,`
  `,`
  `,`
  line-height: `,`
  margin-top: `,`;
  `,`
  .controlLabelName {
    `,`
    `,`
    font-size: `,`;
    color: `,`;
    `,`;
  }
  .requiredBtnBox .customFormItemLoading {
    line-height: `,`;
  }
  &.isRelateRecordTable,
  &.isRelationSearchTable {
    .controlLabelName {
      margin: 14px 0 0;
      font-size: 15px;
      color: #333;
    }
  }
`]),Vo=ue.ZP.div(qo,function(nn){var Bt=nn.displayRow,ln=nn.isMobile,Je=nn.titlewidth_app,je=Je===void 0?"100":Je,Tt=nn.titlewidth_pc,Gt=Tt===void 0?"100":Tt;if(Bt)return ln?"width: "+je+"px !important;":ln?"":"width:"+Gt+"px !important;"},function(nn){var Bt=nn.hasContent,ln=nn.displayRow,Je=nn.titlewidth_pc;if(ln&&Bt)return Je==="0"?"width: auto !important;padding-right: 10px;":"padding-right: 10px;"},function(nn){var Bt=nn.displayRow;return Bt?"padding-top: 6px !important;padding-bottom: 6px !important;":""},function(nn){var Bt=nn.valuesize,ln=Bt!=="0"?(parseInt(Bt)-1)*2+40:36;return ln-12+"px !important"},function(nn){var Bt=nn.item;return Bt.type===34?"20px":""},function(nn){var Bt=nn.item,ln=nn.isMobile;return Bt.type===34?ln?"margin-bottom: 6px;":"maxWidth: calc(100% - 140px);":""},function(nn){var Bt=nn.displayRow,ln=nn.isMobile,Je=nn.align_app,je=Je===void 0?"1":Je,Tt=nn.align_pc,Gt=Tt===void 0?"1":Tt;if(Bt)return ln?je==="1"?"text-align: left;":"text-align: right;flex: 1;":!ln&&Gt==="1"?"text-align: left;":"text-align: right;flex: 1;"},function(nn){var Bt=nn.showTitle;return Bt?"":"display: none;"},function(nn){return nn.titleSize},function(nn){return nn.titleColor},function(nn){return nn.titleStyle||""},function(nn){var Bt=nn.valuesize,ln=Bt!=="0"?(parseInt(Bt)-1)*2+40:36;return ln-12+"px !important"});const ci=function(nn){var Bt=nn.from,ln=nn.recordId,Je=nn.item,je=nn.errorItems,Tt=nn.uniqueErrorItems,Gt=nn.loadingItems,rn=nn.widgetStyle,qt=rn===void 0?{}:rn,Pt=nn.disabled,Yt=nn.updateErrorState,Qt=Yt===void 0?function(){}:Yt,vn=Je.advancedSetting||{},cn=vn.hinttype,mn=cn===void 0?"0":cn,Dn=vn.valuesize,bn=Dn===void 0?"0":Dn,Mn=vn.titlesize,Ln=Mn===void 0?Je.type===34?"1":"0":Mn,Wn=vn.titlestyle,oa=Wn===void 0?"0000":Wn,Sa=vn.titlecolor,Ra=Sa===void 0?Je.type===34?"#333":"#757575":Sa,qn=vn.allowlink,Ha=vn.hidetitle,pa=oi.Az[Ln],Ta=(0,Qe.RL)(oa),Fa=h().includes([22,10010],Je.type)?Ha!=="1"&&Je.controlName:Ha!=="1",rr=mn==="0"?ln&&Bt!==u.BD.DRAFT||Je.isSubList||Bt===u.BD.RECORDINFO:mn==="1",xa=mn==="0"?!ln:mn==="2",er=rr&&Je.desc&&!h().includes([22,10010],Je.type),ia=Je.type===45&&qn==="1"&&Je.enumDefault===1,Ya=h().find(je.concat(Tt),function(uo){return uo.controlId===Je.controlId})||{},pr=Ya.errorText||"",mr=(0,N.kM)(Je,Bt).editable,Pa=Je.type===29&&h().get(Je,"advancedSetting.showtype")===String(_o.wn.TABLE),jr=Je.type===51&&h().get(Je,"advancedSetting.showtype")===String(_o.zn.EMBED_LIST),Gr="",co=(0,w.Q9)();return Ya.showError&&mr&&(Ya.errorType===u.GK.UNIQUE?Gr=Ya.errorMessage||u.MP.UNIQUE(Je):Gr=pr||Ya.errorMessage),co&&!Fa?b.createElement("div",{className:re()({"customFormItemLabel mTop20":Je.type===34})},!Je.showTitle&&Je.required&&!Je.disabled&&mr&&b.createElement("span",{style:{margin:Je.desc&&!h().includes([u.BD.H5_ADD],Bt)?"0px 0px 0px -8px":"0px 0px 0px -13px",top:Je.desc&&!h().includes([u.BD.H5_ADD],Bt)?"9px":"15px",color:"#f44336",position:"absolute"}},"*"),Je.desc&&!h().includes([u.BD.H5_ADD],Bt)&&b.createElement(Rt.Z,{text:b.createElement("span",{className:"Block",style:{maxWidth:230,maxHeight:200,overflowY:"auto",color:"#fff",whiteSpace:"pre-wrap"}},Je.desc),action:["click"],popupPlacement:"topLeft",offset:[-12,0]},b.createElement("i",{className:"icon-workflow_error pointer Font16 Gray_9e mBottom10"})),!Je.showTitle&&Gr&&b.createElement("div",{className:"customFormErrorMessage"},b.createElement("span",null,Gr,b.createElement("i",{className:"icon-close mLeft6 Bold delIcon",onClick:function(){return Qt(!1,Je.controlId)}})),b.createElement("i",{className:"customFormErrorArrow"}))):b.createElement(b.Fragment,null,Gr&&b.createElement("div",{className:re()("customFormErrorMessage",{isChildTable:Je.type===34})},b.createElement("span",null,Gr,b.createElement("i",{className:"icon-close mLeft6 Bold delIcon",onClick:function(){return Qt(!1,Je.controlId)}})),b.createElement("i",{className:"customFormErrorArrow"})),b.createElement(Vo,(0,V.default)({className:re()("customFormItemLabel",{isRelateRecordTable:Pa,isRelationSearchTable:jr}),disabled:Pt,item:Je,showTitle:Fa},qt,{isMobile:co,titleSize:pa,titleStyle:Ta,titleColor:Ra,valuesize:bn,hasContent:er||ia||Fa}),Gt[Je.controlId]?b.createElement("div",{className:"requiredBtnBox"},b.createElement("i",{className:"icon-loading_button customFormItemLoading Gray_9e"})):Je.required&&!Je.disabled&&!(0,ze.YU)(Je)&&mr&&b.createElement("div",{className:"requiredBtnBox"},b.createElement("div",{className:"requiredBtn"},"*")),b.createElement("div",{title:Je.controlName,className:"controlLabelName"},Je.controlName,h().get(Je,"advancedSetting.showcount")!=="1"&&(0,N.ZJ)(Je)),rr&&b.createElement(bo.Z,{item:Je,from:Bt}),Je.type===45&&qn==="1"&&Je.enumDefault===1&&b.createElement(Rt.Z,{text:b.createElement("span",null,_l("\u65B0\u9875\u9762\u6253\u5F00"))},b.createElement(W.Z,{className:"Hand Font16 mLeft3 Gray_9e mTop3",icon:"launch",onClick:function(){/^https?:\/\/.+$/.test(Je.value)&&window.open(Je.value)}}))),Je.type===34&&!Je.isSubList&&xa&&b.createElement(bo.Z,{item:Je,from:Bt}))};var ui=t(48152),Jr=t(24666),zo=(0,S.Z)([`
  margin-top: -2px;
  margin: 26px 0 0;
`],[`
  margin-top: -2px;
  margin: 26px 0 0;
`]),ei=(0,S.Z)([`
  position: absolute;
  width: 100%;
  left: 0;
  top: -5px;
  z-index: 2;
  height: 10px;
  cursor: ns-resize;
`],[`
  position: absolute;
  width: 100%;
  left: 0;
  top: -5px;
  z-index: 2;
  height: 10px;
  cursor: ns-resize;
`]),ii=(0,S.Z)([`
  border-bottom: 1px solid #eaeaea;
`],[`
  border-bottom: 1px solid #eaeaea;
`]),Mo=ue.ZP.div(zo),Sn=ue.ZP.div(ei),Hn=ue.ZP.div(ii);function Un(nn){var Bt=nn.from,ln=nn.disabled,Je=nn.appId,je=nn.worksheetId,Tt=nn.recordId,Gt=nn.formWidth,rn=nn.isSplit,qt=nn.sideVisible,Pt=nn.control,Yt=nn.sheetSwitchPermit,Qt=nn.addRefreshEvents,vn=nn.relateRecordData,cn=nn.formdata,mn=nn.recordbase,Dn=mn===void 0?{}:mn,bn=nn.setRelateNumOfControl,Mn=nn.onRelateRecordsChange,Ln=nn.updateWorksheetControls,Wn=nn.onCountChange;return b.createElement(Jr.Z,{appId:Je,isSplit:rn,control:Pt,allowEdit:!ln,recordId:Tt,worksheetId:je,formData:cn,setRelateNumOfControl:bn,updateWorksheetControls:Ln,onCountChange:Wn})}function Nn(nn){var Bt=nn.from,ln=nn.disabled,Je=nn.tabControlProp,je=Je===void 0?{}:Je,Tt=nn.controlProps,Gt=Tt===void 0?{}:Tt,rn=nn.appId,qt=nn.worksheetId,Pt=nn.recordId,Yt=nn.tabControls,Qt=Yt===void 0?[]:Yt,vn=nn.widgetStyle,cn=nn.renderForm,mn=cn===void 0?function(){}:cn,Dn=nn.sheetSwitchPermit,bn=nn.showSplitIcon,Mn=bn===void 0?!1:bn,Ln=nn.activeTabControlId,Wn=nn.setActiveTabControlId,oa=nn.hasCommon,Sa=je.isSplit,Ra=je.setSplit,qn=je.scrollToTable,Ha=je.beginDrag,pa=je.formWidth,Ta=je.updateRelateRecordTableCount,Fa=Ta===void 0?function(){}:Ta,rr=je.formdata,xa=je.recordbase,er=je.updateWorksheetControls,ia=je.relateRecordData,Ya=je.setRelateNumOfControl,pr=je.onRelateRecordsChange,mr=h().find(Qt,function(Bo){return Bo.controlId===Ln})||Qt[0],Pa=(0,b.useState)(Math.random()),jr=(0,R.Z)(Pa,2),Gr=jr[0],co=jr[1];if(!mr)return null;var uo=function(){if(mr.type===52)return b.createElement("div",{className:"customFieldsContainer",style:Sa?{margin:0,padding:"0 12px"}:{}},mr.desc&&b.createElement("div",{className:"Gray_9e WordBreak pLeft12 pRight12 mTop12"},mr.desc),mn(mr.child));if(h().includes([29,51],mr.type))return b.createElement(Un,(0,V.default)({from:Bt,disabled:ln,appId:rn,worksheetId:qt,recordId:Pt,formWidth:pa,isSplit:Sa,control:(0,V.default)({},mr,Gt),sideVisible:Gt.sideVisible,sheetSwitchPermit:Dn,addRefreshEvents:Gt.addRefreshEvents,formdata:rr,recordbase:xa,relateRecordData:ia,setRelateNumOfControl:Ya,onRelateRecordsChange:pr,updateWorksheetControls:er},{onCountChange:function(To,fo){Fa(mr.controlId,To,{changed:fo}),co(Math.random())}}))};return b.createElement(Mo,{className:re()("relateRecordBlock",{flexColumn:Sa,mTop0:Sa||!oa}),style:Sa?{height:"100%"}:{}},b.createElement("div",{style:(0,V.default)({position:"relative",marginBottom:"8px"},Sa&&{borderTop:"3px solid #ddd",padding:"0 24px"})},Sa&&b.createElement(Sn,{onMouseDown:Ha}),b.createElement(ui.Z,{version:Gr,style:Sa?{}:{borderBottom:"3px solid #ddd"},formWidth:pa,sideVisible:Gt.sideVisible,showSplitIcon:Mn,widgetStyle:vn,isSplit:Sa,setSplit:Ra,activeControlId:mr.controlId,controls:Qt,onClick:function(or){Wn(or),h().isFunction(qn)&&qn()}}),Sa&&b.createElement(Hn,null)),uo())}var Tn=t(51097),Pn=t(64540),jn=t(6100),ta=t(22166),Qn=(0,S.Z)([`
  height: 44px;
  &.fixedTabs {
    z-index: 999;
    &.top {
      top: 49px;
    }
    &.top43 {
      top: 43px;
    }
  }
  &.addStyle {
    margin: 0 -20px 8px;
  }
  .am-tabs-tab-bar-wrap {
    display: block !important;
    border-bottom: 1px solid #f5f5f5;
  }
  .am-tabs-default-bar-tab {
    font-size: 14px;
    font-weight: 500;
    width: auto !important;
    border-bottom: none !important;
    padding: 0 12px !important;
    position: relative;
    .tabName {
      max-width: 100px;
      position: relative;
      color: #757575;
    }
    &:after {
      content: none !important;
    }
    &:first-child {
      margin-left: 8px;
    }
  }
  .am-tabs-default-bar-tab-active .tabName {
    color: #108ee9;
    &:before {
      content: '';
      height: 3px;
      background-color: #108ee9;
      width: 80%;
      position: absolute;
      bottom: 0;
      transform: translateX(-50%);
      left: 50%;
    }
  }
  .am-tabs-default-bar-tab::before,
  .am-tabs-default-bar-underline {
    display: none !important;
  }
  .tabLine {
    height: 12px;
    width: 1px;
    left: 2px;
    top: 18px;
    position: absolute;
    background-color: #ddd;
  }
`],[`
  height: 44px;
  &.fixedTabs {
    z-index: 999;
    &.top {
      top: 49px;
    }
    &.top43 {
      top: 43px;
    }
  }
  &.addStyle {
    margin: 0 -20px 8px;
  }
  .am-tabs-tab-bar-wrap {
    display: block !important;
    border-bottom: 1px solid #f5f5f5;
  }
  .am-tabs-default-bar-tab {
    font-size: 14px;
    font-weight: 500;
    width: auto !important;
    border-bottom: none !important;
    padding: 0 12px !important;
    position: relative;
    .tabName {
      max-width: 100px;
      position: relative;
      color: #757575;
    }
    &:after {
      content: none !important;
    }
    &:first-child {
      margin-left: 8px;
    }
  }
  .am-tabs-default-bar-tab-active .tabName {
    color: #108ee9;
    &:before {
      content: '';
      height: 3px;
      background-color: #108ee9;
      width: 80%;
      position: absolute;
      bottom: 0;
      transform: translateX(-50%);
      left: 50%;
    }
  }
  .am-tabs-default-bar-tab::before,
  .am-tabs-default-bar-underline {
    display: none !important;
  }
  .tabLine {
    height: 12px;
    width: 1px;
    left: 2px;
    top: 18px;
    position: absolute;
    background-color: #ddd;
  }
`]),ca=(0,S.Z)([`
  line-height: 18px;
  display: inline-block;
  margin-right: 6px;
`],[`
  line-height: 18px;
  display: inline-block;
  margin-right: 6px;
`]),la=(0,S.Z)([`
  height: calc(100% - 44px);
`],[`
  height: calc(100% - 44px);
`]),sa=ue.ZP.div(Qn),ma=ue.ZP.span(ca),_n=ue.ZP.div(la);function Ea(nn){var Bt=nn.control,ln=Bt===void 0?{}:Bt,Je=nn.widgetStyle,je=Je===void 0?{}:Je,Tt=nn.activeTabControlId,Gt=ln.iconUrl,rn=h().get(je,"showicon")||"1",qt=ln.controlId===Tt,Pt=h().get(ln,"advancedSetting.icon"),Yt=h().get(ln,"advancedSetting.showtype");if(h().includes([29,51],ln.type)&&Yt==="2")return rn==="1"&&Pt?b.createElement(ma,null,b.createElement(W.Z,{icon:Pt,className:"Font14",style:{color:qt?"#108ee9":"#757575"}})):null;if(ln.type===52&&rn==="1"){if(!Pt)return b.createElement(ma,null,b.createElement(W.Z,{icon:"tab",className:"Font14",style:{color:qt?"#108ee9":"#757575"}}));Gt=safeParse(Pt).iconUrl}return Gt?b.createElement(ma,null,b.createElement(jn.Z,{url:Gt,fill:qt?"#108ee9":"#757575",size:16,addClassName:"mTop1"})):null}function qa(nn){var Bt=nn.tabControlProp,ln=Bt===void 0?{}:Bt,Je=nn.recordId,je=nn.widgetStyle,Tt=nn.flag,Gt=nn.from,rn=nn.viewId,qt=nn.worksheetId,Pt=nn.appId,Yt=nn.disabled,Qt=nn.activeTabControlId,vn=nn.setActiveTabControlId,cn=vn===void 0?function(){}:vn,mn=nn.renderForm,Dn=mn===void 0?function(){}:mn,bn=nn.onChange,Mn=bn===void 0?function(){}:bn,Ln=nn.data,Wn=Ln===void 0?[]:Ln,oa=nn.tabControls,Sa=ln.otherTabs,Ra=Sa===void 0?[]:Sa,qn=ln.changeMobileTab,Ha=qn===void 0?function(){}:qn;(0,b.useEffect)(function(){cn(h().get(oa[0],"controlId")),Ha(h().get(oa[0],"controlId"))},[Tt]);var pa=function(){var xa=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},er=xa.value;if(!er||h().isString(er)&&er.startsWith("deleteRowIds"))return"";if(h().isNumber(er))return er;var ia=JSON.parse(er);if(h().isArray(ia)&&ia.length)return ia.length},Ta=function(){var xa=oa.concat(Ra).filter(function(er){return er});return b.createElement(Pn.default,{tabBarPosition:"bottom",tabBarInactiveTextColor:"#7575758d",prerenderingSiblingsNumber:0,destroyInactiveTab:!0,animated:!1,swipeable:!1,page:Qt?h().findIndex(xa,{controlId:Qt}):0,tabs:xa,activeTab:Qt,renderTab:function(ia){var Ya=pa(ia);return b.createElement(b.Fragment,null,ia.showTabLine&&b.createElement("i",{className:"tabLine"}),b.createElement("span",{className:"tabName ellipsis mRight2"},b.createElement(Ea,{control:ia,widgetStyle:je,activeTabControlId:Qt}),ia.controlName),h().get(ia,"advancedSetting.showcount")!=="1"&&ia.type===29&&ia.value&&Ya?b.createElement("span",null,"("+Ya+")"):"")},onChange:function(ia){cn(ia.controlId),Ha(ia)}})},Fa=function(){var xa=h().find(oa.concat(Ra),function(pr){return pr.controlId===Qt})||h().get(oa[0],"controlId")||{};if(Ra.filter(function(pr){return pr.controlId===Qt}).length)return xa.tabContentNode;if(xa.type===52){var er=xa.desc;return b.createElement(b.Fragment,null,er&&b.createElement("div",{className:re()("mTop16 mBottom16 Font13 Gray_9e",{"pLeft20 pRight20":(0,w.Q9)()&&!h().includes([u.BD.H5_ADD],Gt)})},er),b.createElement("div",{className:re()("customFieldsContainer mobileContainer pBottom20",{wxContainer:h().includes([u.BD.H5_ADD,u.BD.H5_EDIT,u.BD.RECORDINFO],Gt)&&!Yt,pTop0:h().includes([u.BD.H5_ADD,u.BD.H5_EDIT,u.BD.RECORDINFO],Gt),mTop8:Yt})},Dn(xa.child)))}if(Je&&Yt)return b.createElement("div",{className:"flexColumn h100"},b.createElement(ta.Z,{rowId:Je,worksheetId:qt,appId:Pt,viewId:rn,controlId:xa.controlId,control:xa,getType:Gt,data:Wn}));if(xa.type===29){var ia=h().find(nn.tabControls,function(pr){return pr.controlId===xa.controlId}),Ya=(0,V.default)({},xa,{disabled:ia.disabled,value:ia.value});return b.createElement(_n,{className:"pTop10"},b.createElement(pn.Z,(0,V.default)({},Ya,{worksheetId:qt,appId:Pt,from:Gt,flag:Tt,recordId:Je,widgetStyle:je,formData:Wn,showRelateRecordEmpty:!0,onChange:function(mr){var Pa=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xa.controlId;return Mn(mr,Pa,xa)}})))}return xa.type===51?b.createElement("div",{className:re()({"pLeft10 pRight10 pTop5":!h().includes([u.BD.H5_ADD],Gt)}),style:{margin:"0 -10px"}},b.createElement(io.ZP,(0,V.default)({},xa,{viewId:rn,worksheetId:qt,appId:Pt,from:Gt,flag:Tt,recordId:Je,widgetStyle:je,formData:Wn}))):null};return b.createElement(b.Fragment,null,b.createElement(sa,{className:re()("tabsWrapper",{addStyle:h().includes([u.BD.H5_ADD],Gt)})},Ta()),b.createElement(sa,{className:re()("fixedTabs Fixed w100 hide top",{addStyle:h().includes([u.BD.H5_ADD],Gt),hide:!Yt})},Ta()),Fa())}const Za=function(nn){var Bt=nn.worksheetId,ln=nn.recordId,Je=nn.item,je=nn.onChange,Tt=je===void 0?function(){}:je,Gt=(0,b.useState)(!1),rn=(0,R.Z)(Gt,2),qt=rn[0],Pt=rn[1];return b.createElement("span",{"data-tip":qt?_l("\u5237\u65B0\u4E2D..."):_l("\u5237\u65B0"),className:"tip-top Font14 mLeft5 Gray_9e ThemeHoverColor3 pointer RefreshBtn",onClick:function(){qt||(Pt(!0),k.Z.refreshSummary({worksheetId:Bt,rowId:ln,controlId:Je.controlId}).then(function(Qt){Tt(Qt,Je.controlId,Je),Pt(!1)}))}},b.createElement("i",{className:re()("icon-workflow_cycle",{isLoading:qt})}))};var ja=t(26378),Aa=t.n(ja),fa=t(44339),Wa=t(11032),za=void 0,ya=function(Bt){var ln=Bt.actionItems,Je=ln===void 0?[]:ln,je=Bt.actionType,Tt=Bt.formData,Gt=Tt===void 0?[]:Tt,rn=Bt.checkRuleValidator;return Gt.forEach(function(qt){je===fa.zj.READONLY&&_.some(Je,function(Pt){return Pt.isAll})?qt.disabled=!0:Je.map(function(Pt){var Yt=Pt||{},Qt=Yt.controlId,vn=Yt.childControlIds,cn=vn===void 0?[]:vn,mn=Number(je);Qt===_.get(qt,"controlId")&&(_.isEmpty(cn)?(0,Xr.rx)({attrs:[mn],it:qt,checkRuleValidator:rn}):cn.map(function(Dn){var bn=_.find(_.get(qt,"relationControls")||[],function(Mn){return Mn.controlId===Dn});bn&&(0,Xr.rx)({attrs:[mn],it:bn,checkRuleValidator:rn,item:qt})}))})}),Gt},na=function(Bt,ln){var Je=Bt.formData,je=Bt.embedData,Tt=Bt.masterData;return(0,Pr.QX)(Je,ln,Tt,je)},Da=function(){var nn=(0,L.Z)(p().mark(function Bt(ln){var Je,je,Tt,Gt,rn,qt,Pt,Yt,Qt,vn,cn,mn,Dn,bn,Mn,Ln,Wn,oa,Sa,Ra,qn;return p().wrap(function(pa){for(;;)switch(pa.prev=pa.next){case 0:if(Je=ln.advancedSetting,je=Je===void 0?{}:Je,Tt=ln.searchConfig,Gt=Tt===void 0?[]:Tt,rn=ln.formData,qt=ln.recordId,Pt=safeParse(je.dynamicsrc||"{}"),Yt=Pt.id,Qt=_.find(Gt,function(Ta){return Ta.id===Yt})||{},vn=Qt.items,cn=vn===void 0?[]:vn,mn=Qt.templates,Dn=mn===void 0?[]:mn,bn=Qt.sourceId,Mn=Qt.moreSort,Ln=Qt.resultType,Wn=_.get(Dn[0]||{},"controls")||[],!(Dn.length>0&&Wn.length>0)){pa.next=19;break}return oa={filterControls:formatFiltersValue(cn,rn,qt),pageIndex:1,searchType:1,status:1,getType:7,worksheetId:bn,pageSize:10,id:Yt,getAllControls:!0,sortControls:Mn},window.isPublicWorksheet&&(oa.formId=window.publicWorksheetShareId),pa.next=10,k.Z.getFilterRowsByQueryDefault(oa);case 10:if(Sa=pa.sent,_.get(Sa,"resultCode")!==1){pa.next=18;break}return Ra=(Sa.data||[]).length,qn=!1,Ln===1?qn=Ra===1:Ln===2?qn=Ra>1:Ln===3?qn=!Ra:qn=!!Ra,pa.abrupt("return",qn);case 18:return pa.abrupt("return",!1);case 19:case"end":return pa.stop()}},Bt,za)}));return function(ln){return nn.apply(this,arguments)}}(),Ga=function(Bt){var ln=Bt.actionItems,Je=ln===void 0?[]:ln,je=Bt.advancedSetting,Tt=je===void 0?{}:je,Gt=Bt.formData,rn=Gt===void 0?[]:Gt,qt=Bt.projectId,Pt=[];Je.map(function(Qt){var vn=_.find(rn,function(mn){return mn.controlId===Qt.controlId});if(vn){var cn=(0,N.jz)((0,V.default)({},Qt,{value:na(Bt,(0,V.default)({},vn,{advancedSetting:{defsource:Qt.value}}))}),{isNewRecord:!0});Pt.push(cn)}});var Yt={projectId:qt,appId:Tt.appId,worksheetId:Tt.sheetId,rowStatus:1,pushUniqueId:md.global.Config.pushUniqueId,receiveControls:Pt};k.Z.AddWorksheetRow(Yt).then(function(Qt){Qt.resultCode===1&&alert(_l("\u521B\u5EFA\u6210\u529F"))})},Oa=function(){var nn=(0,L.Z)(p().mark(function Bt(ln){var Je,je,Tt,Gt,rn,qt,Pt,Yt,Qt,vn,cn,mn;return p().wrap(function(bn){for(;;)switch(bn.prev=bn.next){case 0:return Je=ln.advancedSetting,je=Je===void 0?{}:Je,Tt=ln.dataSource,Gt=ln.formData,rn=ln.projectId,qt=ln.worksheetId,Pt=ln.appId,Yt=ln.controlId,Qt=safeParse(je.requestmap||"[]"),vn=(0,Er.yh)(Qt,Gt),cn={data:!Qt.length||_.isEmpty(vn)?"":vn,projectId:rn,controlId:Yt,workSheetId:qt,apkId:Pt,apiTemplateId:Tt},window.isPublicWorksheet&&(cn.formId=window.publicWorksheetShareId),bn.next=7,k.Z.excuteApiQuery(cn);case 7:if(mn=bn.sent,mn.code!==20008){bn.next=11;break}return(0,w.Yg)({projectId:rn,okText:_l("\u7ACB\u5373\u5145\u503C"),hint:_l("\u4F59\u989D\u4E0D\u8DB3\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u5145\u503C"),explainText:b.createElement("div",null),onOk:function(){location.href="/admin/valueaddservice/"+rn}}),bn.abrupt("return");case 11:if(!mn.message){bn.next=14;break}return alert(mn.message,3),bn.abrupt("return");case 14:return bn.abrupt("return",mn.apiQueryData||{});case 15:case"end":return bn.stop()}},Bt,za)}));return function(ln){return nn.apply(this,arguments)}}(),_r=function(Bt){var ln=Bt.filters,Je=ln===void 0?[]:ln,je=Bt.recordId,Tt=Bt.formData,Gt=!0;return Je.forEach(function(rn,qt){var Pt=rn.valueType,Yt=rn.filterItems,Qt=Yt===void 0?[]:Yt,vn=rn.advancedSetting,cn=vn===void 0?{}:vn,mn=rn.dataSource,Dn=function(Sa){return qt?rn.spliceType===fa.xS.OR?Gt||Sa:Gt&&Sa:(Gt=Sa,Gt)};switch(Pt){case fa.qC.CONTROL_VALUE:var bn=(0,Xr.MU)({filters:Qt},Tt,je),Mn=bn.isAvailable;Gt=Dn(Mn);return;case fa.qC.SEARCH_WORKSHEET:var Ln=Da((0,V.default)({},Bt,{advancedSetting:cn}));Gt=Dn(Ln);return;case fa.qC.API:Oa((0,V.default)({},Bt,{advancedSetting:cn,dataSource:mn})).then(function(oa){var Sa=(0,Xr.MU)({filters:Qt},Tt,je);Gt=Dn(Sa.isAvailable)});return;case fa.qC.CUSTOM_FUN:var Wn=(0,Wa.Z)((0,V.default)({},Bt,{advancedSetting:cn}),Tt);Gt=Dn(Wn);return}}),Gt},Eo=function(Bt){var ln=Bt.actions,Je=ln===void 0?[]:ln,je=Bt.formData,Tt=Bt.recordId,Gt=Bt.worksheetId,rn=Bt.setRenderData,qt=rn===void 0?function(){}:rn,Pt=Bt.handleChange,Yt=Pt===void 0?function(){}:Pt,Qt=Bt.setErrorItems,vn=Qt===void 0?function(){}:Qt;Je.forEach(function(cn){var mn=cn.actionType,Dn=cn.actionItems,bn=Dn===void 0?[]:Dn,Mn=cn.message,Ln=Mn===void 0?"":Mn,Wn=cn.advancedSetting,oa=Wn===void 0?{}:Wn,Sa=cn.dataSource;switch(mn){case fa.zj.SHOW:case fa.zj.HIDE:case fa.zj.EDIT:case fa.zj.READONLY:var Ra=ya((0,V.default)({},Bt,{actionItems:bn,actionType:mn}));qt(Ra);return;case fa.zj.ERROR:var qn=[];bn.map(function(Ta){var Fa=_.find(je,function(xa){return xa.controlId===Ta.controlId});if(Fa){var rr=na(Bt,(0,V.default)({},Fa,{advancedSetting:{defsource:Ta.value}}));qn.push({controlId:Ta.controlId,errorMessage:rr,errorType:u.GK.OTHER_ERROR,showError:!0})}}),vn(qn);return;case fa.zj.SET_VALUE:bn.forEach(function(Ta){var Fa=_.find(je,function(xa){return xa.controlId===Ta.controlId});if(Fa){var rr=na(Bt,(0,V.default)({},Fa,{advancedSetting:{defsource:Ta.value}}));Yt(rr,Ta.controlId,Fa,!1)}});return;case fa.zj.REFRESH_VALUE:if(!Tt)return;bn.forEach(function(Ta){var Fa=_.find(je,function(rr){return rr.controlId===Ta.controlId});Fa&&k.Z.refreshSummary({worksheetId:Gt,rowId:Tt,controlId:Ta.controlId}).then(function(rr){Yt(rr,Ta.controlId,Fa,!1)})});return;case fa.zj.API:Oa((0,V.default)({},Bt,{advancedSetting:oa,dataSource:Sa})).then(function(Ta){(0,Er.pn)((0,V.default)({},Bt,{onChange:Yt}),Ta,!0)});return;case fa.zj.MESSAGE:var Ha=na(Bt,{type:2,advancedSetting:{defsource:Ln}});alert(Ha,Number(oa.alerttype));return;case fa.zj.VOICE:case fa.zj.LINK:var pa=na(Bt,{type:2,advancedSetting:{defsource:Ln}});oa.opentype==="2"?/^https?:\/\/.+$/.test(pa)&&y.Z.confirm({width:640,title:null,noFooter:!0,closable:!0,children:b.createElement("iframe",{width:640,height:600,frameborder:"0",allowtransparency:"true",webkitallowfullscreen:"true",mozallowfullscreen:"true",allowfullscreen:"true",src:pa})}):window.open(pa);return;case fa.zj.CREATE:Ga((0,V.default)({},Bt,{actionItems:bn,advancedSetting:oa}));return}})},Lo=function(Bt){var ln=Bt.triggerType,Je=safeParse(_.get(Bt,"advancedSetting.custom_event"),"array");Je.forEach(function(je){var Tt=je.eventType,Gt=je.eventActions,rn=Gt===void 0?[]:Gt;if(Tt===ln){var qt=!0,Pt=!1,Yt=void 0;try{for(var Qt=Aa()(rn),vn;!(qt=(vn=Qt.next()).done);qt=!0){var cn=vn.value,mn=cn.filters,Dn=mn===void 0?[]:mn,bn=cn.actions,Mn=bn===void 0?[]:bn;if(_r((0,V.default)({},Bt,{filters:Dn}))){Eo((0,V.default)({},Bt,{actions:Mn}));return}}}catch(Ln){Pt=!0,Yt=Ln}finally{try{!qt&&Qt.return&&Qt.return()}finally{if(Pt)throw Yt}}}})},lo=t(92906),Ir,so,kr,fr=(0,S.Z)([`
  &.customFormItemControl .customFormReadonly,
  &.customFormItemControl .controlDisabled {
    padding-right: `,` !important;
  }
  .customFormTextarea {
    `,`
  }
  .customFormControlBox {
    `,`
    `,`
    `,`
    & > span:first-child {
      `,`
    }
    &.customFormControlTelPhone {
      `,`
      -webkit-text-fill-color: `,`
    }
    .ant-picker-input > input {
      `,`
    }
    &:not(.ant-picker-focused) .ant-picker-input > input {
      `,`
    }
  }

  .numberControlBox {
    min-height: `,`;
    .iconWrap {
      height: `,`;
      &:hover {
        height: `,`;
      }
    }
  }

  .CityPicker-input-container {
    .CityPicker-input-textCon {
      `,`
    }
    &:not(.editable) .CityPicker-input-textCon {
      `,`
    }
  }
`],[`
  &.customFormItemControl .customFormReadonly,
  &.customFormItemControl .controlDisabled {
    padding-right: `,` !important;
  }
  .customFormTextarea {
    `,`
  }
  .customFormControlBox {
    `,`
    `,`
    `,`
    & > span:first-child {
      `,`
    }
    &.customFormControlTelPhone {
      `,`
      -webkit-text-fill-color: `,`
    }
    .ant-picker-input > input {
      `,`
    }
    &:not(.ant-picker-focused) .ant-picker-input > input {
      `,`
    }
  }

  .numberControlBox {
    min-height: `,`;
    .iconWrap {
      height: `,`;
      &:hover {
        height: `,`;
      }
    }
  }

  .CityPicker-input-container {
    .CityPicker-input-textCon {
      `,`
    }
    &:not(.editable) .CityPicker-input-textCon {
      `,`
    }
  }
`]),Rr=ue.ZP.div(fr,function(nn){return nn.showRefreshBtn?"20px":"0px"},function(nn){return nn.size?"font-size: "+nn.size+" !important;":""},function(nn){if(!nn.isTextArea&&nn.height){var Bt=h().includes([15,16,19,23,24,42,46],nn.type)?0:6;return"height: min-content !important;min-height:"+nn.height+"px !important;line-height:"+(nn.height-14)+"px !important;padding-top: "+Bt+"px !important;padding-bottom: "+Bt+"px !important;"}},function(nn){return nn.size?"font-size: "+nn.size+" !important;":""},function(nn){return h().includes([25,31,32,33,37,38],nn.type)?nn.valueStyle:""},function(nn){return h().includes([2,3,4,5,6,7,8],nn.type)||nn.isMobile&&h().includes([15,16,46],nn.type)?nn.valueStyle:""},function(nn){return nn.valueStyle},function(nn){return nn.valueStyle?"unset":"#333"},function(nn){return nn.size?"font-size: "+nn.size+" !important;":""},function(nn){return h().includes([15,16,46],nn.type)?nn.valueStyle:""},function(nn){return(nn.height||36)+"px"},function(nn){return(nn.height||36)*.4+"px"},function(nn){return(nn.height||36)*.6+"px"},function(nn){return nn.size?"font-size: "+nn.size+" !important;":""},function(nn){return nn.valueStyle}),mo=(so=Ir=function(nn){(0,A.default)(Bt,nn);function Bt(ln){(0,n.default)(this,Bt);var Je=(0,j.default)(this,(Bt.__proto__||O()(Bt)).call(this,ln));return kr.call(Je),Je.state={renderData:[],errorItems:[],uniqueErrorItems:[],rules:ln.rules||[],rulesLoading:!ln.disableRules&&!ln.rules,searchConfig:ln.searchConfig||[],loadingItems:{},verifyCode:"",childTableControlIds:[],activeTabControlId:""},Je.controlRefs={},Je.storeCenter={},Je}return(0,s.default)(Bt,[{key:"componentWillMount",value:function(){var Je=this.props,je=Je.data,Tt=Je.disabled,Gt=Je.isWorksheetQuery,rn=this.state,qt=rn.rulesLoading,Pt=rn.searchConfig;!qt&&!Gt?this.initSource(je,Tt):(qt||Gt&&!Pt.length)&&this.getConfig(this.props,{getRules:qt,getSearchConfig:Gt&&!Pt.length})}},{key:"componentDidMount",value:function(){window.isWeiXin&&$(document).on("blur",".customFieldsContainer input",function(){window.scrollTo(0,0)}),(0,N.v0)()}},{key:"componentWillReceiveProps",value:function(Je,je){var Tt=this;(this.props.flag!==Je.flag||this.props.data.length!==Je.data.length)&&this.initSource(Je.data,Je.disabled,{setStateCb:function(){Tt.updateErrorState(!1),Tt.changeStatus=!1}}),this.props.worksheetId!==Je.worksheetId&&this.getConfig(Je,{getRules:!0,getSearchConfig:!0}),this.props.recordId!==Je.recordId&&(this.storeCenter={})}},{key:"initSource",value:function(Je,je){var Tt=this,Gt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},rn=Gt.setStateCb,qt=rn===void 0?function(){}:rn,Pt=this.props,Yt=Pt.appId,Qt=Pt.isCharge,vn=Pt.isCreate,cn=Pt.projectId,mn=Pt.worksheetId,Dn=Pt.initSource,bn=Pt.recordId,Mn=Pt.recordCreateTime,Ln=Pt.from,Wn=Pt.onFormDataReady,oa=Pt.masterRecordRowId,Sa=Pt.ignoreLock,Ra=Pt.verifyAllControls,qn=Pt.controlProps,Ha=qn===void 0?{}:qn,pa=Pt.mobileApprovalRecordInfo,Ta=pa===void 0?{}:pa,Fa=this.state.rules,rr=Fa===void 0?[]:Fa,xa=this.workflowParams,er=xa.instanceId,ia=xa.workId;this.dataFormat=new Pr.ZP({setSubListStore:!0,isCharge:Qt,projectId:cn,appId:Yt,worksheetId:mn,recordId:bn,data:Je.map(function(Ya){return(0,V.default)({},Ya,Ha)}),isCreate:h().isUndefined(vn)?Dn||!bn:vn,disabled:je,recordCreateTime:Mn,masterRecordRowId:oa,ignoreLock:Sa,rules:rr,from:Ln,instanceId:er,workId:ia,verifyAllControls:Ra,storeCenter:this.storeCenter,embedData:(0,V.default)({},h().pick(this.props,["projectId","appId","groupId","worksheetId","recordId","viewId"])),searchConfig:this.state.searchConfig,updateLoadingItems:function(pr){Tt.setState({loadingItems:pr})},activeTrigger:function(){!Tt.changeStatus&&Tt.dataFormat&&(Tt.props.onChange(Tt.dataFormat.getDataSource(),Tt.dataFormat.getUpdateControlIds(),{noSaveTemp:!0}),Tt.changeStatus=!0)},onAsyncChange:function(pr){var mr=pr.controlId,Pa=pr.value;Tt.props.onChange(Tt.dataFormat.getDataSource(),[mr],{isAsyncChange:!0}),Tt.changeStatus=!0,Tt.setState({renderData:Tt.getFilterDataByRule(),errorItems:Tt.dataFormat.getErrorControls()},function(){h().every(f()(Tt.state.loadingItems),function(jr){return!jr})&&Tt.submitBegin&&Tt.submitFormData()})}}),this.setState({renderData:this.getFilterDataByRule(!0),errorItems:this.dataFormat.getErrorControls(),uniqueErrorItems:[],rulesLoading:!1},function(){qt(),Wn(Tt.dataFormat)})}},{key:"getFilterDataByRule",value:function(Je){var je=this,Tt=this.props,Gt=Tt.ignoreHideControl,rn=Tt.recordId,qt=Tt.from,Pt=Tt.systemControlData,Yt=this.state.rules,Qt=Yt===void 0?[]:Yt,vn=(0,Xr.Mb)({rules:Qt,recordId:rn,data:this.dataFormat.getDataSource().concat(Pt||[]),from:this.props.from,updateControlIds:this.dataFormat.getUpdateRuleControlIds(),ignoreHideControl:Gt,checkRuleValidator:function(mn,Dn,bn,Mn){je.dataFormat.setErrorControl(mn,Dn,bn,Mn,Je)}});return vn.forEach(function(cn){if(cn.type===52&&(0,N.kM)(cn,qt).visible&&!cn.hidden){var mn=vn.filter(function(Dn){return Dn.sectionId===cn.controlId});h().every(mn,function(Dn){return!((0,N.kM)(Dn,qt).visible&&!Dn.hidden)})&&(cn.fieldPermission=(0,Xr.fv)(cn.fieldPermission||"111",0,"0"))}}),vn}},{key:"renderForm",value:function(){var Je=this,je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Tt=this.props,Gt=Tt.from,rn=Tt.worksheetId,qt=Tt.recordId,Pt=Tt.forceFull,Yt=Tt.controlProps,Qt=Tt.widgetStyle,vn=Qt===void 0?{}:Qt,cn=Tt.disabled,mn=Tt.tabControlProp;mn=mn===void 0?{}:mn;var Dn=mn.setNavVisible,bn=Tt.disabledFunctions,Mn=bn===void 0?[]:bn,Ln=this.workflowParams,Wn=Ln.instanceId,oa=Ln.workId,Sa=vn.titlelayout_pc,Ra=Sa===void 0?"1":Sa,qn=vn.titlelayout_app,Ha=qn===void 0?"1":qn,pa=this.state,Ta=pa.errorItems,Fa=pa.uniqueErrorItems,rr=pa.loadingItems,xa=(0,w.Q9)(),er=[],ia=-1,Ya=void 0,pr=[].concat(je).filter(function(Pa){return!Pa.hidden&&(0,N.kM)(Pa,Gt).visible}),mr=pr.filter(function(Pa){return Pa.type===41}).length;return pr.sort(function(Pa,jr){return Pa.row===jr.row?Pa.col-jr.col:Pa.row-jr.row}),pr.forEach(function(Pa){(Pa.row!==ia||xa||Pt)&&!Ya&&ia>-1&&er.push(b.createElement("div",{className:"customFormLine",key:"clearfix-"+Pa.row+"-"+Pa.col})),Pa.size||(Pa.size=(0,N.gW)(Pa,Gt));var jr=xa||Pt||Pa.size===12,Gr=(0,N.hj)(Pa,pr)||{},co=(xa?Ha==="2":Ra==="2")&&(0,ze.fc)(Pa),uo=!Mn.includes("controlRefresh")&&Gt!==u.BD.DRAFT&&!h().get(window,"shareState.isPublicView")&&!h().get(window,"shareState.isPublicQuery")&&!h().get(window,"shareState.isPublicPage")&&!h().get(window,"shareState.isPublicRecord")&&!h().get(window,"shareState.isPublicForm")&&!h().get(window,"shareState.isPublicWorkflowRecord")&&qt&&md.global.Account.accountId&&(Pa.type===30&&(Pa.strDefault||"").split("")[0]!=="1"||h().includes([31,32,37,38],Pa.type));er.push(b.createElement("div",{className:re()("customFormItem",{customFormItemRow:co||Gr.displayRow}),style:{width:jr?"100%":Pa.size/12*100+"%",display:Pa.type===49&&cn?"none":"flex"},id:"formItem-"+Pa.controlId,key:"item-"+Pa.row+"-"+Pa.col},Pa.type===22&&h().includes([u.BD.H5_ADD,u.BD.H5_EDIT],Gt)&&b.createElement("div",{className:"relative",style:{height:10}},b.createElement("div",{className:"Absolute",style:{background:"#f5f5f5",height:10,left:-1e3,right:-1e3,top:-7}})),!h().includes([22,52],Pa.type)&&b.createElement(ci,{from:Gt,worksheetId:rn,recordId:qt,item:Pa,errorItems:Ta,uniqueErrorItems:Fa,loadingItems:rr,widgetStyle:(0,V.default)({},vn,{displayRow:co},Gr),disabled:cn,updateErrorState:Je.updateErrorState,handleChange:Je.handleChange}),b.createElement(Rr,(0,V.default)({className:"customFormItemControl",showRefreshBtn:uo,isMobile:xa},(0,N.kn)(Pa)),Je.getWidgets(H()({},Pa,Yt,(0,V.default)({instanceId:Wn,workId:oa,richTextControlCount:mr,isDraft:Gt===u.BD.DRAFT},Pa.type===22?{setNavVisible:Dn}:{}))),uo&&b.createElement(Za,{worksheetId:rn,recordId:qt,item:Pa,onChange:Je.handleChange}),Je.renderVerifyCode(Pa)))),ia=Pa.row,Ya=Pa.type===22||Pa.type===10010}),er}},{key:"renderVerifyCode",value:function(Je){var je=this,Tt=Je.controlId,Gt=Je.type,rn=this.props,qt=rn.smsVerificationFiled,Pt=rn.smsVerification;return window.isPublicWorksheet&&Pt&&Gt===3&&qt===Tt&&(0,N.kM)(Je,4).editable?b.createElement(Ho,(0,V.default)({},Je,{verifyCode:this.state.verifyCode,worksheetId:this.props.worksheetId,handleChange:function(Qt){return je.setState({verifyCode:Qt})}})):null}},{key:"triggerCustomEvent",value:function(Je){var je=this,Tt=this.props.systemControlData,Gt=this.state,rn=Gt.searchConfig,qt=rn===void 0?[]:rn,Pt=Gt.errorItems,Yt=Pt===void 0?[]:Pt,Qt=(0,V.default)({},Je,h().pick(this.props,["from","recordId","projectId","worksheetId","appId"]),{formData:this.dataFormat.getDataSource().concat(Tt||[]),searchConfig:qt.filter(function(vn){return vn.resultType!==0}),checkRuleValidator:function(cn,mn,Dn){je.dataFormat.setErrorControl(cn,mn,Dn)},setErrorItems:function(cn){var mn=Yt.concat(cn);je.setState({errorItems:mn})},setRenderData:function(cn){je.setState({renderData:cn,errorItems:je.dataFormat.getErrorControls()})},handleChange:function(cn,mn,Dn,bn){je.handleChange(cn,mn,Dn,bn)}});Lo(Qt)}},{key:"getWidgets",value:function(Je){var je=this,Tt=this.props,Gt=Tt.initSource,rn=Tt.flag,qt=Tt.projectId,Pt=Tt.worksheetId,Yt=Tt.recordId,Qt=Tt.viewId,vn=Tt.appId,cn=Tt.from,mn=Tt.openRelateSheet,Dn=mn===void 0?function(){}:mn,bn=Tt.registerCell,Mn=Tt.sheetSwitchPermit,Ln=Mn===void 0?[]:Mn,Wn=Tt.systemControlData,oa=Tt.popupContainer,Sa=Tt.getMasterFormData,Ra=Tt.isCharge,qn=Tt.widgetStyle,Ha=qn===void 0?{}:qn,pa=Tt.mobileApprovalRecordInfo,Ta=pa===void 0?{}:pa,Fa=Tt.customWidgets,rr=Tt.isDraft,xa=Tt.masterData,er=this.state.renderData,ia=h().get(Je,"advancedSetting.hinttype")||"0",Ya=ia==="0"?cn===u.BD.DRAFT||cn!==u.BD.RECORDINFO&&!Yt&&!Je.isSubList&&Je.type!==34:ia==="2"&&Je.type!==34;(0,N.MJ)(Je.type)==="SHEET_FIELD"&&(Je=h().cloneDeep(Je),Je.value=Je.sourceControlType===3&&Je.sourceControl.enumDefault===1?(Je.value||"").replace(/\+86/,""):Je.value,Je.type=Je.sourceControlType===3?2:Je.sourceControlType,Je.enumDefault=Je.sourceControlType===3?2:Je.enumDefault,Je.disabled=!0,Je.advancedSetting=(Je.sourceControl||{}).advancedSetting||{},Je.type===46&&(Je.unit=h().includes(["6","9"],(Je.sourceControl||{}).unit)?"6":"1"));var pr=Je,mr=pr.type,Pa=pr.controlId,jr=(0,N.MJ)(mr),Gr=jr==="CustomWidgets"?Fa[mr]:ri[jr];if(Gr){var co=(0,N.kM)(Je,cn).editable,uo=(Ra||h().get(Je,"advancedSetting.isdecrypt[0]")==="1")&&!window.shareState.shareId;return!h().includes([22,52,34],Je.type)&&!(Je.type===29&&(0,An.XS)(Je))&&(Je.disabled||h().includes([25,31,32,33,37,38],Je.type)||!co)&&(!Je.value&&Je.value!==0&&!h().includes([28,47,51],Je.type)||Je.type===29&&(safeParse(Je.value).length<=0||(0,w.Q9)()&&!Je.value||typeof Je.value=="string"&&Je.value.startsWith("deleteRowIds")||h().get(window,"shareState.isPublicForm")&&Je.value===0)||h().includes([21,26,27,48,35,14,10,11],Je.type)&&h().isArray(JSON.parse(Je.value))&&!JSON.parse(Je.value).length)?b.createElement(b.Fragment,null,b.createElement("div",{className:"customFormNull"}),!Yt&&Ya&&b.createElement(bo.Z,{item:Je,from:cn})):b.createElement(b.Fragment,null,b.createElement(Gr,(0,V.default)({},Je,{customFields:this,mobileApprovalRecordInfo:Ta,flag:rn,isCharge:Ra,widgetStyle:Ha,maskPermissions:uo,popupContainer:oa,sheetSwitchPermit:Ln,disabled:Je.disabled||!co,projectId:qt,from:cn,worksheetId:Pt,renderData:er,recordId:Yt,appId:vn,isDraft:rr,viewIdForPermit:Qt,initSource:Gt,masterData:xa,onChange:function(or){var To=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pa,fo=arguments[2];je.handleChange(or,To,Je,fo),Je.unique&&or&&h().includes(u.M,mr)&&je.checkControlUnique(Pa,mr,or)},onBlur:function(or,To){var fo=To||(""+Je.value?(""+Je.value).trim():"");Je.unique&&fo&&je.checkControlUnique(Pa,mr,fo),fo&&fo!==or&&je.dataFormat.updateDataBySearchConfigs({control:(0,V.default)({},Je,{value:fo}),searchType:"onBlur"}),je.props.onBlur(Pa)},openRelateSheet:Dn,registerCell:function(or){je.controlRefs[Pa]=or,bn({item:Je,cell:or})},getControlRef:function(or){return je.controlRefs[or]},formData:this.dataFormat.getDataSource().concat(Wn||[]).concat(Sa()||[])})),Ya&&b.createElement(bo.Z,{item:Je,from:cn}))}}},{key:"checkControlUnique",value:function(Je,je,Tt){var Gt=this,rn=this.props,qt=rn.worksheetId,Pt=rn.recordId,Yt=rn.checkCellUnique,Qt=rn.onError,vn=Qt===void 0?function(){}:Qt,cn=this.state,mn=cn.uniqueErrorItems,Dn=cn.loadingItems;if(h().isFunction(Yt)){Yt(Je,Tt)?h().remove(mn,function(bn){return bn.controlId===Je&&bn.errorType===u.GK.UNIQUE}):(mn.push({controlId:Je,errorType:u.GK.UNIQUE,showError:!0}),this.setState({uniqueErrorItems:mn}));return}this.setState({loadingItems:(0,V.default)({},Dn,(0,d.default)({},Je,!0))}),k.Z.checkFieldUnique({worksheetId:qt,controlId:Je,controlType:je,controlValue:(0,N.WB)(Tt,je)}).then(function(bn){!bn.isSuccess&&bn.data&&bn.data.rowId!==Pt?(mn.push({controlId:Je,errorType:u.GK.UNIQUE,showError:!0}),vn()):bn.isSuccess&&h().remove(mn,function(Mn){return Mn.controlId===Je&&Mn.errorType===u.GK.UNIQUE}),Gt.setState({uniqueErrorItems:mn,loadingItems:(0,V.default)({},Dn,(0,d.default)({},Je,!1))},function(){bn.isSuccess&&Gt.submitBegin&&Gt.submitFormData()})})}},{key:"uniqueErrorUpdate",value:function(Je){var je=this,Tt=this.state.uniqueErrorItems;alert(_l("\u8BB0\u5F55\u63D0\u4EA4\u5931\u8D25\uFF1A\u6570\u636E\u91CD\u590D"),2),(Je||[]).forEach(function(Gt){h().find(Tt,function(rn){return rn.controlId===Gt&&rn.errorType===u.GK.UNIQUE})||(Tt.push({controlId:Gt,errorType:u.GK.UNIQUE,showError:!0}),je.setState({uniqueErrorItems:Tt}))})}},{key:"errorDialog",value:function(Je){var je=(0,w.Q9)();je?o().alert(_l("\u9519\u8BEF\u63D0\u793A"),b.createElement("div",null,Je.map(function(Tt){return b.createElement("div",{className:"Gray_75 mBottom6 WordBreak"},Tt)})),[{text:_l("\u53D6\u6D88"),onPress:h().noop}]):y.Z.confirm({className:"ruleErrorMsgDialog",title:b.createElement("span",{className:"Bold Font17 Red"},_l("\u9519\u8BEF\u63D0\u793A")),description:b.createElement("div",null,Je.map(function(Tt){return b.createElement("div",{className:"Gray_75 mBottom6 WordBreak"},Tt)})),removeCancelBtn:!0})}},{key:"updateRenderData",value:function(){var Je=this.dataFormat.getErrorControls(),je=this.state.errorItems,Tt=je===void 0?[]:je;this.setState((0,V.default)({renderData:this.getFilterDataByRule()},Je.length!==Tt.length?{errorItems:Je}:{}))}},{key:"getSubmitData",value:function(){var Je=this,je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Tt=je.silent,Gt=je.ignoreAlert,rn=je.verifyAllControls,qt=this.props,Pt=qt.from,Yt=qt.recordId,Qt=qt.ignoreHideControl,vn=this.state,cn=vn.errorItems,mn=vn.uniqueErrorItems,Dn=vn.rules,bn=Dn===void 0?[]:Dn,Mn=vn.activeRelateRecordControlId,Ln=this.dataFormat.getUpdateControlIds(),Wn=this.dataFormat.getDataSource(),oa=(0,Xr.Mb)({rules:bn,data:Wn,recordId:Yt,checkAllUpdate:!0,ignoreHideControl:Qt}),Sa=Ln.length||!Yt||this.submitBegin||rn?(0,Xr.d0)(bn,oa,Yt,Pt):[],Ra=rn?oa.map(function(ia){return ia.controlId}):oa.filter(function(ia){if(ia.sectionId){var Ya=h().find(oa,function(pr){return pr.controlId===ia.sectionId});if(Ya&&!((0,N.kM)(Ya,Pt).visible&&!Ya.hidden))return!1}return(0,N.kM)(ia,Pt).visible&&(0,N.kM)(ia,Pt).editable&&ia.type!==52}).map(function(ia){return ia.controlId}),qn=Wn.filter(function(ia){return ia.type===34}).map(function(ia){return{controlId:ia.controlId,error:ia.store&&ia.store.getErrors()}}).filter(function(ia){return!(0,F.isEmpty)(ia.error)}),Ha=cn.concat(mn).concat(qn).filter(function(ia){return h().includes(Ra,ia.controlId)}),pa=!!Ha.length,Ta=Sa.length;if(this.updateErrorState(pa),pa){Wn.forEach(function(ia){if(ia.type===22){var Ya=(0,lo._A)(Wn,ia,Pt),pr=Je.controlRefs[ia.controlId]||{},mr=pr.handleExpand,Pa=Ha.filter(function(jr){return h().includes(Ya,jr.controlId)});Pa.length>0&&h().isFunction(mr)&&mr(!0)}});var Fa=h().head(Ha.map(function(ia){return h().find(Wn,function(Ya){return Ya.controlId===ia.controlId})}).sort(function(ia,Ya){return ia.row-Ya.row}));if(Fa){var rr=document.getElementById("formItem-"+Fa.controlId);rr&&rr.scrollIntoView({block:"center"})}var xa=Wn.filter(function(ia){return h().find(Ha,function(Ya){return Ya.controlId===ia.controlId})&&ia.sectionId}).map(function(ia){return h().find(Wn,function(Ya){return Ya.controlId===ia.sectionId})}).sort(function(ia,Ya){return ia.row-Ya.row});xa.length&&!h().find(xa,function(ia){return ia.controlId===Mn})&&this.setActiveTabControlId(h().get(xa,"0.controlId"))}var er=void 0;return pa?(!Gt&&!Tt&&alert(_l("\u8BF7\u6B63\u786E\u586B\u5199\u8BB0\u5F55"),3),er=!0):$(this.con.current,".workSheetRecordInfo").find(".fileUpdateLoading").length?(alert(_l("\u9644\u4EF6\u6B63\u5728\u4E0A\u4F20\uFF0C\u8BF7\u7A0D\u540E"),3),er=!0):Ta&&(er=!0),!pa&&Ta&&!Tt&&this.errorDialog(Sa),{data:oa,fullData:Wn,updateControlIds:Ln,hasError:pa,hasRuleError:Ta,error:er,ids:Ra}}},{key:"submitFormData",value:function(Je){var je=this;this.submitBegin=!0;var Tt=this.state,Gt=Tt.loadingItems,rn=Tt.rules,qt=this.props.onSave,Pt=this.getSubmitData(Je),Yt=Pt.data,Qt=Pt.updateControlIds,vn=Pt.error,cn=Pt.ids;!vn&&h().some(f()(Gt),function(mn){return mn})||(qt(vn,{data:Yt,updateControlIds:Qt,handleRuleError:function(Dn,bn){Dn.forEach(function(Ln){var Wn=(Ln||"").split(":").reverse(),oa=(0,R.Z)(Wn,3),Sa=oa[0],Ra=oa[1],qn=oa[2],Ha=h().find(Yt,function(Fa){return Fa.controlId===qn});if(Ha&&Ha.type===34){var pa=Ha.store&&Ha.store.getState(),Ta=(0,Xr.YW)(h().get(pa,"base.worksheetInfo.rules"),[[Ra,Sa].join(":")]);Ta.forEach(function(Fa){if(h().get(Fa,"errorInfo.0.errorMessage")){var rr=(0,d.default)({},Sa+"-"+h().get(Fa,"errorInfo.0.controlId"),h().get(Fa,"errorInfo.0.errorMessage"));(0,F.isEmpty)(rr)||je.dataFormat.callStore({fnName:"dispatch",controlId:qn},{type:"UPDATE_CELL_ERRORS",value:rr})}})}});var Mn=(0,Xr.YW)(rn,Dn).reduce(function(Ln,Wn){return Ln.concat(Wn.errorInfo)},[]);Mn=Mn.filter(function(Ln){return h().find(Yt,function(Wn){return Wn.controlId===Ln.controlId})}).filter(function(Ln){return h().includes(cn,Ln.controlId)}),je.setState({errorItems:Mn})}}),this.submitBegin=!1)}},{key:"setActiveTabControlId",value:function(Je){this.setState({activeTabControlId:Je})}},{key:"renderTab",value:function(Je,je){var Tt=this,Gt=this.props.tabControlProp;Gt=Gt===void 0?{}:Gt;var rn=Gt.isSplit,qt=Gt.splitTabDom,Pt=this.state,Yt=Pt.activeTabControlId,Qt=Pt.renderData,vn=(0,w.Q9)(),cn=(0,V.default)({},this.props,{tabControls:je,hasCommon:Je.length>0,activeTabControlId:Yt||h().get(je[0],"controlId"),setActiveTabControlId:function(Dn){return Tt.setActiveTabControlId(Dn)},renderForm:function(Dn){return Tt.renderForm(Dn)}});return vn?b.createElement(qa,(0,V.default)({},cn,{onChange:function(Dn,bn,Mn){return Tt.handleChange(Dn,bn,Mn)}})):rn&&qt?(0,q.createPortal)(b.createElement(Nn,cn),qt):b.createElement("div",{className:"relateRecordBlockCon"},b.createElement(Nn,cn))}},{key:"render",value:function(){var Je=(0,w.Q9)(),je=this.props,Tt=je.from,Gt=je.disabled,rn=je.widgetStyle,qt=rn===void 0?{}:rn,Pt=je.ignoreSection,Yt=je.tabControlProp,Qt=Yt===void 0?{}:Yt,vn=Qt.otherTabs,cn=vn===void 0?[]:vn,mn=this.state,Dn=mn.rulesLoading,bn=mn.renderData,Mn=(0,N.X3)(bn,qt,Tt,Pt,cn),Ln=Mn.commonData,Wn=Mn.tabData;return Wn=Wn.filter(function(oa){return(0,N.kM)(oa,Tt).visible}).filter(function(oa){return!oa.hidden}),Dn?b.createElement("div",{className:"customFieldsLoading",style:{paddingTop:50}},b.createElement(te.Z,null)):b.createElement(b.Fragment,null,b.createElement("div",{className:re()("customFieldsContainer",{mobileContainer:Je,wxContainer:Je&&h().includes([u.BD.H5_ADD,u.BD.H5_EDIT,u.BD.RECORDINFO],Tt)&&!Gt,pTop0:Je&&h().includes([u.BD.H5_ADD,u.BD.H5_EDIT,u.BD.RECORDINFO],Tt),pBottom20:Je&&!h().isEmpty(Ln)}),ref:this.con},this.renderForm(Ln)),!!Wn.length&&this.renderTab(Ln,Wn))}},{key:"workflowParams",get:function(){var Je=this.props.mobileApprovalRecordInfo,je=Je===void 0?{}:Je,Tt=(0,w.Q9)()?je:h().get(this,"context.recordBaseInfo")||{},Gt=Tt.instanceId,rn=Tt.workId;return{instanceId:Gt,workId:rn}}}]),Bt}(b.Component),Ir.contextType=Ot.Z,Ir.propTypes={flag:c().any,initSource:c().bool,from:c().number,projectId:c().string,worksheetId:c().string,recordId:c().string,appId:c().string,groupId:c().string,viewId:c().string,data:c().array,recordCreateTime:c().string,disabled:c().bool,forceFull:c().bool,onChange:c().func,onBlur:c().func,disableRules:c().bool,isCreate:c().bool,widgetStyle:c().object,ignoreLock:c().bool,ignoreHideControl:c().bool,verifyAllControls:c().bool,isWorksheetQuery:c().bool,masterRecordRowId:c().string,smsVerificationFiled:c().string,smsVerification:c().bool,sheetSwitchPermit:c().array,rules:c().arrayOf(c().shape({})),searchConfig:c().arrayOf(c().shape({})),getMasterFormData:c().func,openRelateSheet:c().func,registerCell:c().func,checkCellUnique:c().func,onFormDataReady:c().func,onWidgetChange:c().func,onRulesLoad:c().func,onSave:c().func,customWidgets:c().object},Ir.defaultProps={initSource:!1,getMasterFormData:function(){},onChange:function(){},onBlur:function(){},openRelateSheet:function(){},registerCell:function(){},onFormDataReady:function(){},customWidgets:{}},kr=function(){var Bt=this;this.con=b.createRef(),this.getConfig=function(){var ln=(0,L.Z)(p().mark(function Je(je,Tt){var Gt=Tt.getRules,rn=Tt.getSearchConfig,qt,Pt,Yt,Qt,vn,cn,mn;return p().wrap(function(bn){for(;;)switch(bn.prev=bn.next){case 0:if(qt=je.data,Pt=je.disabled,Yt=je.worksheetId,Qt=je.onRulesLoad,vn=Qt===void 0?function(){}:Qt,cn=void 0,mn=void 0,!Gt){bn.next=8;break}return bn.next=6,k.Z.getControlRules({worksheetId:Yt,type:1});case 6:cn=bn.sent,vn(cn);case 8:if(!rn){bn.next=12;break}return bn.next=11,k.Z.getQueryBySheetId({worksheetId:Yt});case 11:mn=bn.sent;case 12:Bt.setState((0,V.default)({},Gt?{rules:cn}:{},rn?{searchConfig:(0,ze.T0)(mn)}:{}),function(){return Bt.initSource(qt,Pt)});case 13:case"end":return bn.stop()}},Je,Bt)}));return function(Je,je){return ln.apply(this,arguments)}}(),this.updateErrorState=function(ln,Je){Je?Bt.setState({errorItems:Bt.state.errorItems.map(function(je){return je.controlId===Je?H()({},je,{showError:!1}):je}),uniqueErrorItems:Bt.state.uniqueErrorItems.map(function(je){return je.controlId===Je?H()({},je,{showError:!1}):je})}):Bt.setState({errorItems:Bt.state.errorItems.map(function(je){return H()({},je,{showError:ln})}),uniqueErrorItems:Bt.state.uniqueErrorItems.map(function(je){return H()({},je,{showError:ln})})})},this.setErrorItemsByRule=function(ln,Je){var je=Bt.dataFormat.getErrorControls();Bt.setState({errorItems:je.map(function(Tt){return Tt.controlId===ln&&Tt.errorType===u.GK.RULE_REQUIRED?H()({},Tt,{showError:!!(0,Pr.Mh)(Je)}):Tt})})},this.handleChange=function(ln,Je,je){var Tt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,Gt=Bt.props,rn=Gt.onWidgetChange,qt=rn===void 0?function(){}:rn,Pt=Gt.disabled,Yt=Gt.from,Qt=Gt.getChildTableControlIds,vn=Qt===void 0?function(){}:Qt,cn=Bt.state.uniqueErrorItems;if(Yt===21&&je.type===34&&Pt&&Bt.setState({childTableControlIds:[].concat((0,ce.Z)(Bt.state.childTableControlIds),[je.controlId])},function(){return vn(h().uniq(Bt.state.childTableControlIds))}),h().get(ln,"rows")||qt(),je.value!==ln||Je!==je.controlId||(0,F.get)(ln,"isFormTable")){(0,F.get)(ln,"isFormTable")&&(ln=ln.value),Bt.dataFormat.updateDataSource({controlId:Je,value:ln,removeUniqueItem:function(bn){h().remove(cn,function(Mn){return Mn.controlId===bn&&Mn.errorType===u.GK.UNIQUE})},searchByChange:Tt}),Bt.setState({renderData:Bt.getFilterDataByRule()},function(){return Bt.setErrorItemsByRule(Je,(0,V.default)({},je,{value:ln}))});var mn=Bt.dataFormat.getUpdateControlIds();mn.length&&(Bt.props.onChange(Bt.dataFormat.getDataSource(),mn,{controlId:Je}),Bt.changeStatus=!0)}}},so)},36612:(lt,Te,t)=>{"use strict";t.d(Te,{Mh:()=>Ee,QX:()=>D,U_:()=>Y,ZP:()=>oe,hC:()=>l});var ce=t(88106),g=t(88902),p=t.n(g),L=t(47518),te=t.n(L),R=t(46593),y=t.n(R),a=t(99663),r=t(22600),o=t(12424),d=t(52945),Z=t.n(d),H=t(63239),U=t.n(H),f=t(88239),V=t(77632),C=t(1178),O=t(89499),n=t(68289),s=t.n(n),j=t(3177),A=t.n(j),S=t(91247),I=t(6917),c=t(11032),q=t(87600),b=t(16947),k=t(94914),ee=t(15742),re=t(24607),ie=t(14260),le=t.n(ie),E=t(60300),w=t.n(E),K=t(30381),N=t.n(K),F=t(65395),h=t(89954),z=t(3735),X=t(19207),B=t(15577),x=t(25734),Q=t(96486),i=t.n(Q),m=t(37139),v=t(83298),W=t(68195),P=t(67062),u=t(61805),l=function(){if(window.initIntlTelInput)return window.initIntlTelInput;var ue=document.createElement("div"),pe=document.createElement("input");return ue.style.display="none",ue.appendChild(pe),document.body.appendChild(ue),window.initIntlTelInput=le()(pe,{initialCountry:i().get(md,"global.Config.DefaultConfig.initialCountry")||"cn",utilsScript:w()}),window.initIntlTelInput},T=function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Se=arguments[2],ye=ue.unit==="6"||ue.unit==="9"?"HH:mm:ss":"HH:mm";return pe?N()(N()().format(ye),ye).format("HH:mm:ss"):Se?N()(Se).year()?N()(N()(Se).format(ye),ye).format("HH:mm:ss"):N()(Se,ye).format("HH:mm:ss"):""},G=function(ue,pe){if(ue.type===3&&i().get(safeParse(pe),"accountId")==="user-self")return i().get(md,"global.Account.mobilePhone");if(ue.type===5&&i().get(safeParse(pe),"accountId")==="user-self")return i().get(md,"global.Account.email");if(ue.type===15||ue.type===16){var Se=I.ju[ue.unit]||"d";if(pe==="2")return ue.type===15?N()().format("YYYY-MM-DD"):(0,B.kc)(N()().format("YYYY-MM-DD HH:mm:ss"));if(pe==="3")return N()().add(1,Se).format(ue.type===15?"YYYY-MM-DD":"YYYY-MM-DD HH:mm:ss")}if(ue.type===46&&pe==="2")return T(ue,!0);if(i().includes([26,27,48],ue.type)){var ye=safeParse(pe);if(ye.accountId==="user-self"){if(window.isPublicWorksheet||(ue.advancedSetting||{}).usertype==="2"&&!md.global.Account.isPortal)return"";var J=i().pick(i().get(md,["global","Account"]),["accountId","fullname","avatarMiddle"]);return i().isEmpty(J)?"":(0,f.default)({},J,{avatar:J.avatarMiddle,name:J.fullname})}return i().isEmpty(ye)?"":ye}if(i().includes([29,35],ue.type)){var me=i().find(i().get(ue,"relationControls"),function(Ae){return Ae.attribute===1});pe=safeParse(pe)[0];var be=safeParse(pe).name||(me?(0,v.Z)((0,f.default)({},me,{value:safeParse(pe)[me.controlId]}))||_l("\u672A\u547D\u540D"):void 0);return U()([{sourcevalue:pe,type:8,sid:safeParse(pe).rowid,name:be}])}if(ue.type===34){var xe=void 0;try{return xe=safeParse(pe),U()(xe.map(function(Ae){return(0,f.default)({},Ae,{initRowIsCreate:!1})}))}catch(Ae){}}return pe},D=function(ue,pe,Se,ye){var J=safeParse(pe.advancedSetting.defsource).map(function(be){if(be.isAsync)return"";if(be.rcid){if(pe.isQueryWorksheetFill&&!(0,O.hB)(pe.value))return pe.value;try{if(Se&&be.rcid===Se.worksheetId){var xe=i().find(Se.formData,function(We){return We.controlId===be.cid});return i().includes([15,16],pe.type)?xe.value?N()(xe.value).format(be.type===15?"YYYY-MM-DD":"YYYY-MM-DD HH:mm:ss"):"":pe.type===46?T(pe,!1,xe.value):i().includes([2],pe.type)?(0,re.N9)(xe,xe.value,pe):fe(Se.formData,pe,be.cid)}var Ae=i().find(ue,function(We){return We.controlId===be.rcid}),Ne=safeParse(Ae.value||"[]")[0],Me=Ne&&safeParse(Ne.sourcevalue)[be.cid];if(i().includes([15,16],pe.type)&&i().includes(["ctime","utime"],be.cid))return(Me?N()(Me):N()()).format(be.type===15?"YYYY-MM-DD":"YYYY-MM-DD HH:mm:ss");if(pe.type===46)return T(pe,i().includes(["ctime","utime"],be.cid),Me);if(i().includes([29,35],pe.type))try{return U()(safeParse(Me).filter(function(We){return We.sid}))}catch(We){return""}if(i().includes([6,8,28,31],pe.type)||pe.type===38&&pe.enumDefault===2)try{var Fe=0,Be=i().find(Ae.relationControls,function(We){return We.controlId===be.cid}),we=Be.options,Ie=Be.enumDefault;return safeParse(Me).forEach(function(We){Fe+=Ie?we.find(function(Ve){return Ve.key===We}).score:0}),Fe}catch(We){return Me}if(i().includes([2,41],pe.type)){var ge=i().find(Ae.relationControls||[],function(We){return We.controlId===be.cid});return ge||(i().includes(["ownerid","caid","uaid","wfcuaids","wfcaid"],be.cid)?ge={type:26}:i().includes(["wfstatus"],be.cid)&&(ge={type:11,controlId:"wfstatus"})),(0,re.N9)(ge,Me,pe)}return i().includes([9,10,11],pe.type)?fe(Ae.relationControls||[],pe,be.cid,Me):Me}catch(We){return""}}if(be.cid){if(i().includes(["userId","phone","email","projectId","appId","groupId","worksheetId","viewId","recordId","ua","timestamp"],be.cid))return(0,re.fS)(ye,be.cid);if(pe.type===26&&i().includes(["caid","user-self"],be.cid)&&!(window.isPublicWorksheet&&window.publicWorksheetShareId)){if(be.cid==="caid"&&(ye||{}).recordId){var Re=i().get(i().find(ue,function(We){return We.controlId===be.cid}),"value");return safeParse(Re||"[]")[0]||""}var Pe=i().pick(i().get(md,["global","Account"]),["accountId","fullname","avatarMiddle"]);return i().isEmpty(Pe)?"":(0,f.default)({},Pe,{avatar:Pe.avatarMiddle,name:Pe.fullname})}if(i().includes([15,16],pe.type)&&be.cid==="ctime")return N()().format(be.type===15?"YYYY-MM-DD":"YYYY-MM-DD HH:mm:ss");if(pe.type===46)return T(pe,be.cid==="ctime",i().get(i().find(ue,function(We){return We.controlId===be.cid}),"value"));if(i().includes([2,41],pe.type)||pe.type===45&&pe.enumDefault===1){var ke=i().find(ue,function(We){return We.controlId===be.cid});return(0,re.N9)(ke,(ke||{}).value,pe)}return fe(ue,pe,be.cid)}return be.staticValue?G(pe,be.staticValue):""});if(i().includes([9,10,11,26,27,29,48],pe.type)){var me=[];i().remove(J,function(be){return!be}),J.forEach(function(be){typeof be=="string"&&/[\{|\[]/.test(be)?i().isArray(safeParse(be))?me=me.concat(safeParse(be)):me.push(safeParse(be)):me.push(be)}),pe.type===26?me=i().uniqBy(me,function(be){return be.accountId}):pe.type===29&&pe.enumDefault===2&&i().get(pe,"advancedSetting.showtype")===String(ee.wn.CARD)?me=me.map(function(be){return(0,f.default)({},be,{isNew:!0,isFromDefault:!0})}):me=i().uniqBy(me),i().includes([9,10,11],pe.type)&&(me=me.filter(function(be){return i().find(pe.options,function(xe){return xe.key===be&&!xe.isDeleted})})),J=U()(me)}else J=J.join("");return J},M=function(ue){var pe=ue.data,Se=ue.dataSource,ye=ue.sourceControlId;try{var J=i().find(pe,function(Ne){return Ne.controlId===Se.slice(1,-1)}),me=safeParse(J.value)[0],be=J&&i().find(J.relationControls,function(Ne){return Ne.controlId===ye});if(be&&i().includes([29,35],be.type)){var xe=safeParse(me.sourcevalue)[ye],Ae=safeParse(xe)[0];if(Ae)return Ae.name}else return safeParse(me.sourcevalue)[ye]}catch(Ne){return""}},se=function(ue){var pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Se=pe.dot,ye=Se===void 0?2:Se,J=i().includes([2,3,6],pe.enumDefault)?"1":i().get(pe,"advancedSetting.nullzero")||"0",me=i().get(pe,"advancedSetting.numshow")==="1",be=void 0,xe=pe.dataSource.replace(/cSUM/gi,"SUM").replace(/cAVG/gi,"AVERAGE").replace(/cMIN/gi,"MIN").replace(/cMAX/gi,"MAX").replace(/cPRODUCT/gi,"PRODUCT").replace(/cCOUNTA/gi,"COUNTA").replace(/cABS/gi,"ABS").replace(/cINT/gi,"INT").replace(/cMOD/gi,"MOD").replace(/cROUND/gi,"ROUND").replace(/cROUNDUP/gi,"ROUNDUP").replace(/cROUNDDOWN/gi,"ROUNDDOWN"),Ae=xe.replace(/\$.+?\$/g,function(Fe){var Be=Fe.match(/\$(.+?)\$/)[1],we=Z()({},i().find(ue,function(ge){return ge.controlId===Be}));if(!we){be=!0;return}if(i().includes([9,10,11],we.type)){var Ie=fe(ue,{type:31},Be);return J==="1"&&Ie===""?0:Ie}return i().isUndefined(we.value)&&we.type===37&&we.enumDefault2===6&&(we.value=0),(i().isUndefined(we.value)||we.value==="")&&J!=="1"&&(be=!0),J==="1"&&!we.value&&(we.value="0"),parseFloat(i().find([6,8,28,31,37],function(ge){return ge===we.type||ge===we.sourceControlType})?we.value:(0,V.dN)(we,!0,!0),10)}),Ne=new n.Parser;Ne.setFunction("MOD",function(Fe){return Fe[0]%Fe[1]});var Me=Ne.parse(Ae);return be?{columnIsUndefined:be}:{result:typeof Me.result=="number"?parseFloat(Ce((0,f.default)({},pe,{dot:me?ye+2:ye}),Me.result,!1)):null}};function ae(ve){var ue=ve.formData,pe=ve.fnControl,Se=i().get(safeParse(pe.advancedSetting.defaultfunc),"expression");if(!Se)return"";var ye=(0,c.Z)(pe,ue);if(ye.error)console.log(ye);else return String(i().isUndefined(ye.value)?"":ye.value)}function ne(ve){var ue=ve.formData,pe=ve.fnControl,Se=ve.update;try{(0,c.Z)(pe,ue,{update:Se})}catch(ye){}}var de=function(ue,pe,Se,ye){return D(ue,(0,f.default)({},pe,{advancedSetting:(0,f.default)({},pe.advancedSetting,{defsource:U()((0,q.Pz)(pe.dataSource))})}),Se,ye)};function Ce(ve,ue){var pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,Se=ue<0;ue=Math.abs(ue);var ye=ve.advancedSetting.roundtype||(i().includes([6,8,31,37],ve.type)?"2":"0"),J=Number(ve.dot);(!J||i().isNaN(J))&&(J=0),ye==="2"?ue=String(Math.round(ue*Math.pow(10,J))/Math.pow(10,J)*(Se?-1:1)):ye==="1"?ue=String(Math.ceil(ue*Math.pow(10,J))/Math.pow(10,J)*(Se?-1:1)):ue=String((0,B.FH)(Math.floor(ue*Math.pow(10,J))/Math.pow(10,J),J)*(Se?-1:1));var me=ve.advancedSetting.dotformat==="1";return!me&&J!==0&&pe&&(ue=(ue+(ue.indexOf(".")>-1?"":".")+"0000000000000").replace(new RegExp("(.\\d{"+J+"})(0+)"),"$1")),ue}var he=function(ue,pe,Se){var ye=pe.advancedSetting.roundtype||"0",J=function(Xe,$e){if(Xe==="$ctime$")return Se||new Date;if(Xe==="$utime$")return new Date;if(/^\$[a-z0-9]{24}\$$/.test(Xe)){var Ke=i().find(ue,function(He){return He.controlId===Xe.slice(1,-1)});if(Ke){var Ue=void 0;return i().includes([15,16,46,30],Ke.type)&&(Ue=Ke.value),Ke.type===29&&(Ue=i().get(safeParse(Ke.value),"0.name")),Ue?(Ke.type===15||Ke.type===30&&Ke.sourceControlType===15?$e==="start"?Ue=N()(Ue).set({hour:0,minute:0,second:0,millisecond:0}):Ue=N()(Ue).set({hour:pe.strDefault==="1"?24:0,minute:0,second:0,millisecond:0}):Ke.type===46&&(Ue=N()("2000/1/1 "+Ue)),Ue):void 0}else return}else return N().isDate(new Date(Xe))?Xe:void 0},me="";if(pe.enumDefault===1){var be=J(pe.sourceControlId,"start"),xe=J(pe.dataSource,"end"),Ae=i().find(ue,function(Qe){return Qe.controlId===pe.sourceControlId.slice(1,-1)})||{},Ne=i().find(ue,function(Qe){return Qe.controlId===pe.dataSource.slice(1,-1)})||{};Ae.type===46&&Ne.type!==46?be=N()(xe).format("YYYY-MM-DD")+N()(be).format(" HH:mm:ss"):Ne.type===46&&Ae.type!==46&&(xe=N()(be).format("YYYY-MM-DD")+N()(xe).format(" HH:mm:ss"));var Me=pe.advancedSetting.weekday||"1234567",Fe=parseInt(pe.unit);if(!be||!xe)return;if(Fe<4&&Me.length<7){var Be=N()(xe)<N()(be)?-1:1;if(Be<0){var we=[be,xe];xe=we[0],be=we[1]}var Ie=N()(N()(xe).format("YYYY-MM-DD")).diff(N()(be).format("YYYY-MM-DD"),"d"),ge=Math.floor(Ie/7);if(ge)switch(Fe){case 1:me=ge*Me.length*24*60;break;case 2:me=ge*Me.length*24;break;case 3:me=ge*Me.length;break}for(var Re=0,Pe=0;Pe<=Ie%7;Pe++){var ke=N()(be).add(Pe,"d"),We=ke.day();i().includes(Me.split(""),(We===0?7:We).toString())&&(N()(be).isSame(xe,"d")?me=N()(xe).diff(be,I.ju[pe.unit]||"m",!0):Pe!==Ie%7?Re+=N()(N()(ke).add(1,"d").format("YYYY-MM-DD")).diff(Pe===0?ke:ke.format("YYYY-MM-DD"),I.ju[pe.unit]||"m",!0):Re+=N()(ke.format("YYYY-MM-DD")+N()(xe).format(" HH:mm")).diff(N()(ke).format("YYYY-MM-DD"),I.ju[pe.unit]||"m",!0))}me=(me+Re)*Be}else me=N()(xe).diff(be,I.ju[pe.unit]||"m",!0);me=Ce(pe,me)}else if(pe.enumDefault===2){var Ve=0,it="YYYY-MM-DD HH:mm:ss",Ge=void 0,pt=void 0,ot=void 0;if(pe.sourceControlId)if(/^\$[a-z0-9]{24}\$$/.test(pe.sourceControlId)){var vt=i().find(ue,function(Qe){return Qe.controlId===pe.sourceControlId.slice(1,-1)});if(vt){Ve=vt.type;try{it=(0,k.VL)(vt)}catch(Qe){}pt=(0,V.dN)(vt,!0,!0,{doNotHandleTimeZone:!0})}else return}else if(pe.sourceControlId==="$ctime$")pt=Se||new Date;else if(pe.sourceControlId==="$utime$")pt=new Date;else if(N().isDate(new Date(pe.sourceControlId)))pt=pe.sourceControlId;else return;else return;var At=pe.dataSource.replace(/\$.+?\$/g,function(Qe){var Xe=Qe.match(/\$(.+?)\$/)[1],$e=i().find(ue,function(Et){return Et.controlId===Xe});if(!$e){ot=!0;return}if(i().includes([9,10,11],$e.type))return fe(ue,pe,Xe);if($e.type===46){var Ke=N()($e.value,"HH:mm:ss").format("HH:mm:ss").split(":").map(Number),Ue=(0,o.Z)(Ke,3),He=Ue[0],ze=Ue[1],gt=Ue[2];return He+"h+"+ze+"m+"+gt+"s"}return(i().isUndefined($e.value)||$e.value==="")&&(ot=!0),parseFloat((0,V.dN)($e,!0,!0),10)});Ge=ot?{}:(0,C.AH)(pt?N()(pt,it):"",At),me=Ge.error||ot?"":Ge.result.format("YYYY-MM-DD HH:mm:ss")}else if(pe.enumDefault===3){var yt=I.ju[pe.unit]||"d",st=N()(),St=N()(J(pe.sourceControlId,"start"));if(!st||!St)return;pe.advancedSetting.dateformulatype==="1"||i().isUndefined(pe.advancedSetting.dateformulatype)?me=String(N()(St).diff(st,yt,!0)):me=String(N()(st).diff(St,yt,!0)),me=Ce(pe,me)}return me},fe=function(ue,pe,Se,ye){var J=i().find(ue,function(Ae){return Ae.controlId===Se})||{},me=ye||J.value;if(i().includes([9,10,11],J.type)&&i().includes([9,10,11],pe.type)&&!(J.dataSource&&J.dataSource===pe.dataSource)&&me){var be=safeParse(me||"[]").map(function(Ae){var Ne=(Ae||"").includes("other")&&i().find(pe.options||[],function(Be){return Be.key==="other"}),Me=i().get(i().find(J.options||[],function(Be){return Be.key===Ae}),"value"),Fe=(pe.options||[]).filter(function(Be){return Be.value===Me});return Ne?Ae:i().get(i().head(Fe),"key")||""}).filter(i().identity);return i().isEmpty(be)?"":U()(be)}if(i().includes([9,10,11],J.type)&&(i().includes([6,8,28,31],pe.type)||pe.type===38&&pe.enumDefault===2)){if(!safeParse(me||"[]").length)return"";var xe=0;return safeParse(me||"[]").forEach(function(Ae){xe+=Ae.indexOf("add_")>-1||!J.enumDefault?0:J.options.find(function(Ne){return Ne.key===Ae}).score}),xe}return i().isUndefined(me)?"":me},Ee=function(ue){var pe="";return ue.required&&((ue.type!==6?!ue.value:isNaN(parseFloat(ue.value)))||i().isString(ue.value)&&!ue.value.trim()||i().includes([9,10,11],ue.type)&&!safeParse(ue.value).length||ue.type===14&&(i().isArray(safeParse(ue.value))&&!safeParse(ue.value).length||!i().isArray(safeParse(ue.value))&&!safeParse(ue.value).attachments.length&&!safeParse(ue.value).knowledgeAtts.length&&!safeParse(ue.value).attachmentData.length)||i().includes([21,26,27,29,35,48],ue.type)&&i().isArray(safeParse(ue.value))&&!safeParse(ue.value).length||ue.type===29&&typeof ue.value=="string"&&(ue.value.startsWith("deleteRowIds")||ue.value==="0")||ue.type===34&&(ue.value.rows&&!(0,O.CD)(ue.value.rows).length||ue.value==="0")||ue.type===36&&ue.value==="0")&&(pe=I.GK.REQUIRED),pe},Y=function(ue){var pe=ue.item,Se=ue.data,ye=ue.masterData,J=ue.ignoreRequired,me=ue.verifyAllControls,be="",xe="";if(!pe.hidden&&(!pe.disabled||me)){if(be=Ee(pe),!be){var Ae=(pe.value||"").toString().trim();if(pe.type===3){var Ne=l();Ne.setNumber(Ae),be=!Ae||(Ne.isValidNumber()&&i().get(Ne.getSelectedCountryData(),"dialCode")==="86"?(0,re.Ci)(i().startsWith(Ae,"+86")?Ae:"+86"+Ae):Ne.isValidNumber()||(0,re.Ci)(Ae))?"":I.GK.MOBILE_PHONE}if(pe.type===4&&(be=!Ae||re.cX.isTelPhoneNumber(Ae)?"":I.GK.TEL_PHONE),pe.type===5&&(be=!Ae||re.cX.isEmailAddress(Ae)?"":I.GK.EMAIL),pe.type===7&&(Ae?pe.enumDefault===1&&!re.cX.isIdCardNumber(Ae)?be=I.GK.ID_CARD:pe.enumDefault===2&&!re.cX.isPassportNumber(Ae)?be=I.GK.PASSPORT:pe.enumDefault===3&&!re.cX.isHkPassportNumber(Ae)?be=I.GK.HK_PASSPORT:pe.enumDefault===4&&!re.cX.isTwPassportNumber(Ae)&&(be=I.GK.TW_PASSPORT):be=""),pe.type===2){if(pe.advancedSetting&&pe.advancedSetting.regex){var Me=void 0;try{Me=new RegExp(safeParse(pe.advancedSetting.regex).regex,"gm")}catch($e){console.log($e)}be=!Ae||!Me||Me.test(Ae)?"":I.GK.CUSTOM}be||(be=(0,re.uH)(pe))}if(i().includes([6,8,10],pe.type)&&(be=(0,re.uH)(pe)),i().includes([15,16],pe.type)){var Fe=pe.advancedSetting.allowweek||"1234567",Be=pe.advancedSetting.allowtime||"00:00-24:00",we=pe.advancedSetting.min,Ie=pe.advancedSetting.max,ge=Be.split("-"),Re=(0,o.Z)(ge,2),Pe=Re[0],ke=Re[1];if(!Ae)be="";else{if(we||Ie){var We=we?D(Se,Z()({},pe,{advancedSetting:{defsource:we}}),ye):"",Ve=Ie?D(Se,Z()({},pe,{advancedSetting:{defsource:Ie}}),ye):"";(We&&N()(Ae)<N()(We)||Ve&&N()(Ae)>N()(Ve))&&(be=I.GK.DATE_TIME_RANGE,xe=I.MP.DATE_TIME_RANGE(Ae,We,Ve))}Fe.indexOf(N()(Ae).day()===0?"7":N()(Ae).day())===-1&&!be&&(be=I.GK.DATE),!be&&((0,re.hU)(Pe,N()(Ae).hour()+":"+N()(Ae).minute(),"isAfter")||(0,re.hU)(ke,N()(Ae).hour()+":"+N()(Ae).minute(),"isBefore"))&&(be=I.GK.DATE_TIME)}}if(pe.type===46){var it=pe.advancedSetting.min,Ge=pe.advancedSetting.max;if(!Ae)be="";else if(it||Ge){var pt=it?D(Se,Z()({},pe,{advancedSetting:{defsource:it}}),ye):"",ot=Ge?D(Se,Z()({},pe,{advancedSetting:{defsource:Ge}}),ye):"";(pt&&(0,re.hU)(Ae,pt,"isBefore")||ot&&(0,re.hU)(Ae,ot,"isAfter"))&&(be=I.GK.DATE_TIME_RANGE,xe=I.MP.DATE_TIME_RANGE(Ae,pt,ot,!0))}}if(i().includes([9,10,11],pe.type)&&!J){var vt=i().find(pe.options,function($e){return $e.key==="other"&&!$e.isDeleted}),At=/^\[.*\]$/.test(pe.value)?i().find(safeParse(pe.value||"[]"),function($e){return($e||"").includes("other")}):!1;vt&&i().get(pe.advancedSetting,"otherrequired")==="1"&&At&&!(pe.isSubList&&pe.type===10)&&(At==="other"||!i().replace(At,"other:",""))&&(be=I.GK.OTHER_REQUIRED,xe=I.MP.OTHER_REQUIRED(pe))}}if((0,O.XS)(pe,{ignoreInFormTable:!0})&&(be=""),pe.type===34){var yt=pe.advancedSetting,st=yt.min,St=yt.max,Qe=yt.enablelimit;if(String(Qe)==="1"){var Xe=Number(i().get(pe,"value.rows")&&(0,O.CD)(pe.value.rows).length||(i().isObject(pe.value)?0:pe.value)||0);i().isNumber(Xe)&&!i().isNaN(Xe)&&(i().isNumber(Number(st))&&!i().isNaN(Number(st))&&Xe<Number(st)||i().isNumber(Number(St))&&!i().isNaN(Number(St))&&Xe>Number(St))&&(be=I.GK.CHILD_TABLE_ROWS_LIMIT)}}}return be&&!xe&&(xe=typeof I.MP[be]!="string"?I.MP[be](pe):I.MP[be]),{errorType:be,errorText:xe}},oe=function(){function ve(ue){var pe=this,Se=ue.projectId,ye=Se===void 0?"":Se,J=ue.isCharge,me=ue.appId,be=ue.worksheetId,xe=ue.recordId,Ae=ue.instanceId,Ne=ue.workId,Me=ue.setSubListStore,Fe=ue.requestPool,Be=ue.abortController,we=ue.data,Ie=we===void 0?[]:we,ge=ue.rules,Re=ge===void 0?[]:ge,Pe=ue.isCreate,ke=Pe===void 0?!1:Pe,We=ue.disabled,Ve=We===void 0?!1:We,it=ue.ignoreLock,Ge=it===void 0?!1:it,pt=ue.ignoreRequired,ot=pt===void 0?!1:pt,vt=ue.verifyAllControls,At=vt===void 0?!1:vt,yt=ue.recordCreateTime,st=yt===void 0?"":yt,St=ue.masterRecordRowId,Qe=St===void 0?"":St,Xe=ue.masterData,$e=ue.from,Ke=$e===void 0?I.BD.DEFAULT:$e,Ue=ue.storeCenter,He=ue.searchConfig,ze=He===void 0?[]:He,gt=ue.embedData,Et=gt===void 0?{}:gt,ft=ue.onAsyncChange,qe=ft===void 0?function(){}:ft,nt=ue.updateLoadingItems,Ze=nt===void 0?function(){}:nt,et=ue.activeTrigger,ut=et===void 0?function(){}:et;(0,a.default)(this,ve),this.getSearchStatus=function(){var Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],sn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],on=(0,re.He)(Mt);return i().some(on,function(){var en=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return i().every(en,function($t){var an=$t.dynamicSource&&$t.dynamicSource.length>0,tn=i().includes(["rowid","currenttime"],i().get($t.dynamicSource[0]||{},"cid"))||(i().find(pe.data,function(Lt){return Lt.controlId===i().get($t.dynamicSource[0]||{},"cid")})||{}).value,mt=i().find(sn.concat(ee.nh),function(Lt){return Lt.controlId===$t.controlId});return an?tn:mt})})},this.getFilterRowsData=function(){var Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],sn=arguments[1],on=arguments[2],en=arguments[3],$t=(0,re.AY)(Mt,pe.data,i().get(pe.embedData,"recordId")),an=$t.map(function(Lt){return i().pick(Lt,["controlId","value","values","maxValue","minValue"])}),tn=pe.loopList.filter(function(Lt){return Lt.loopId===en+"-"+on});if(i().some(tn,function(Lt){return i().isEqual(an,Lt.loopFilter)}))return y().reject();pe.setLoadingInfo(on,!0),pe.loopList.push({loopId:en+"-"+on,loopFilter:an});var mt=(0,f.default)({filterControls:$t,pageIndex:1,searchType:1,status:1,getType:7},sn);return window.isPublicWorksheet&&(mt.formId=window.publicWorksheetShareId),pe.requestPool.getFilterRowsByQueryDefault(mt,pe.abortController)},this.getFilterConfigs=function(){var Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},sn=arguments[1];switch(sn){case"init":return pe.searchConfig.filter(function(on){var en=on.items,$t=en===void 0?[]:en,an=on.controlId,tn=i().get(i().find(pe.data,function(Lt){return Lt.controlId===an}),"value"),mt=(0,O.hB)(tn);return i().every($t,function(Lt){return i().includes(["rowid","currenttime"],i().get(Lt.dynamicSource[0]||{},"cid"))||(Lt.dynamicSource||[]).length===0})&&mt});case"onBlur":return pe.searchConfig.filter(function(on){var en=on.controlId;return en!==Mt.controlId}).filter(function(on){var en=on.items,$t=en===void 0?[]:en;return i().some($t,function(an){return i().get(an.dynamicSource[0]||{},"cid")===Mt.controlId})});default:return[]}},this.updateDataBySearchConfigs=function(Mt){var sn=Mt.control,on=sn===void 0?{}:sn,en=Mt.searchType,$t=pe.getFilterConfigs(on,en);$t.forEach(function(an){var tn=function(Dt){pe.updateDataSource({controlId:an.controlId,value:Dt}),pe.onAsyncChange({controlId:an.controlId,value:Dt}),!i().includes(pe.ruleControlIds,an.controlId)&&en==="init"&&pe.ruleControlIds.push(an.controlId)};if(an){var mt=an.items,Lt=mt===void 0?[]:mt,zt=an.configs,Zt=zt===void 0?[]:zt,Nt=an.templates,ct=Nt===void 0?[]:Nt,De=an.moreType,_e=an.moreSort,Le=an.sourceId,rt=an.controlType,Ct=an.controlId,dt=an.id,It=i().get(ct[0]||{},"controls")||[],bt=i().find(pe.data,function(ht){return ht.controlId===Ct});if(!bt)return;var Ut=(0,b.F)(bt,an.queryCount),Xt=pe.getSearchStatus(Lt,It),pn=!i().includes([29,34],bt.type)||bt.type===29&&bt.enumDefault===1;if(ct.length>0&&It.length>0&&Xt&&bt&&!i().includes(pe.loopList,on.controlId+"-"+Ct))if(i().includes([29],rt)||rt===35&&bt.dataSource===Le)pe.getFilterRowsData(Lt,{worksheetId:Le,pageSize:bt.enumDefault===1?1:Ut,id:dt,getAllControls:!0,sortControls:_e},Ct,on.controlId).then(function(ht){if(pe.setLoadingInfo(Ct,!1),ht.resultCode===1){if(pn&&ht.count>1&&De===1)return;var Dt=i().find(i().get(bt,"relationControls"),function(Ht){return Ht.attribute===1}),Ot=(ht.data||[]).map(function(Ht){var Kt=Dt?Ht[Dt.controlId]:void 0;return{isNew:!0,isWorksheetQueryFill:i().get(bt.advancedSetting||{},"showtype")==="1",sourcevalue:U()(Ht),row:Ht,type:8,sid:Ht.rowid,name:(0,re.N9)(Dt,Kt,{type:2})}});i().isEmpty(Ot)&&i().includes([29],rt)?tn("deleteRowIds: all"):tn(U()(Ot))}});else{var tt=Zt.filter(function(ht){var Dt=ht.cid,Ot=ht.subCid;return(i().find(It,function(Ht){return Ht.controlId===Ot})||Ot==="rowid")&&bt.type===34?i().find(bt.relationControls||[],function(Ht){return Ht.controlId===Dt}):bt.controlId===Dt});tt.length>0&&pe.getFilterRowsData(Lt,{worksheetId:Le,pageSize:rt===34?Ut:1,id:dt,getAllControls:rt===34,sortControls:_e},Ct,on.controlId).then(function(ht){if(pe.setLoadingInfo(Ct,!1),ht.resultCode===1){var Dt=ht.data||[];if(pn&&ht.count>1&&De===1)return;if(rt===34){var Ot=[];Dt.length&&Dt.forEach(function(Rn){var gn={};tt.map(function(wn){var On=wn.cid,An=On===void 0?"":On,Yn=wn.subCid,kn=Yn===void 0?"":Yn,Fn=i().find(bt.relationControls||[],function($n){return $n.controlId===An});if(Fn){if(kn==="rowid"){gn[An]=Fn.type===29?U()([{sourcevalue:U()(Rn),row:Rn,type:8,sid:Rn.rowid}]):Rn.rowid;return}gn[An]=Fn.type===2?(0,re.N9)(i().find(It,function($n){return $n.controlId===kn}),Rn[kn],Fn):i().includes([9,10,11],Fn.type)?fe(It,Fn,kn,Rn[kn]):Rn[kn]||""}}),i().some(te()(gn),function(wn){return!i().isUndefined(wn)})&&Ot.push((0,f.default)({},gn,{rowid:"temprowid-"+(0,S.Z)(),allowedit:!0,addTime:new Date().getTime()}))}),tn({action:"clearAndSet",isDefault:!0,rows:Ot})}else{var Ht=i().get(tt[0]||{},"subCid"),Kt=i().find(It,function(Rn){return Rn.controlId===Ht}),dn=i().includes([9,10,11],i().get(Kt,"type"))?fe(It,bt,Ht,(Dt[0]||{})[Ht]):(Dt[0]||{})[Ht],Cn=(0,re.N9)(Kt,dn,bt);if(en==="init"&&i().isEqual(Cn,bt.value))return;tn(Cn)}}})}}})},this.abortController=Be,this.disabled=Ve,this.isCharge=J,this.appId=me,this.projectId=ye,this.worksheetId=be,this.recordId=xe,this.instanceId=Ae,this.workId=Ne,this.masterRecordRowId=Qe,this.data=i().cloneDeep(Ie),this.masterData=Xe,this.embedData=Et,this.loadingInfo={},this.controlIds=[],this.ruleControlIds=[],this.errorItems=[],this.recordCreateTime=st,this.from=Ke,this.searchConfig=ze,this.onAsyncChange=qe,this.updateLoadingItems=Ze,this.activeTrigger=ut,this.loopList=[],this.isMobile=(0,B.Q9)(),this.requestPool=Fe||(0,m.O)({abortController:Be});var xt=[],wt=[],kt=[],Rt=!0;if(this.storeCenter=Ue||{},this.data.forEach(function(Mt){Mt.hidden||(Mt.type===34&&Me&&!Mt.store||!pe.isMobile&&Mt.type===29&&(0,Q.includes)(["2","5","6"],(0,Q.get)(Mt,"advancedSetting.showtype"))&&!Mt.store)&&(Mt.store=pe.getControlStore(Mt))}),ke){var jt=function(sn){return sn.type===29&&(i().get(sn,"advancedSetting.defsource")||"").startsWith('[{"staticValue":')},fn=this.data.filter(jt).concat(this.data.filter(function(Mt){return!jt(Mt)}));fn.forEach(function(Mt){if(Mt.value)pe.updateDataSource({controlId:Mt.controlId,value:Mt.value,notInsertControlIds:!0,isInit:Rt});else if(Mt.advancedSetting&&Mt.advancedSetting.defaultfunc&&Mt.type!==30)if(i().get(safeParse(Mt.advancedSetting.defaultfunc),"type")==="javascript")ne({formData:pe.data,fnControl:Mt,update:function(mt){pe.updateDataSource({controlId:Mt.controlId,value:mt,isInit:Rt}),pe.onAsyncChange({controlId:Mt.controlId,value:mt})}});else{var sn=ae({formData:pe.data,fnControl:Mt});sn&&pe.updateDataSource({controlId:Mt.controlId,value:sn,isInit:Rt})}else if(Mt.advancedSetting&&Mt.advancedSetting.defsource&&Mt.type!==30){var on=D(pe.data,Mt,pe.masterData);on&&pe.updateDataSource({controlId:Mt.controlId,value:on,isInit:Rt})}else if(Mt.type===38&&Mt.enumDefault===3&&Mt.sourceControlId&&Mt.sourceControlId[0]!=="$"){var en=I.ju[Mt.unit]||"d",$t=N()().startOf(en),an=N()(Mt.sourceControlId);Mt.advancedSetting.dateformulatype==="1"||i().isUndefined(Mt.advancedSetting.dateformulatype)?Mt.value=String(Math.floor(N()(an).diff($t,en))):Mt.value=String(Math.floor(N()($t).diff(an,en)))}Mt.type===27&&Mt.advancedSetting.defsource&&safeParse(Mt.advancedSetting.defsource).filter(function(tn){return tn.isAsync&&tn.staticValue}).forEach(function(tn){i().includes(["current","user-departments"],safeParse(tn.staticValue).departmentId)&&xt.push(Mt.controlId)}),Mt.type===48&&Mt.advancedSetting.defsource&&safeParse(Mt.advancedSetting.defsource).filter(function(tn){return tn.isAsync&&tn.staticValue}).forEach(function(tn){i().includes(["current","user-role"],safeParse(tn.staticValue).organizeId)&&kt.push(Mt.controlId)}),Mt.type===40&&Mt.default==="1"&&wt.push(Mt.controlId),Mt.type===31&&Mt.advancedSetting&&Mt.advancedSetting.nullzero==="1"&&pe.updateDataSource({controlId:Mt.controlId,value:Mt.value,isInit:Rt})})}!(ke||Ge)&&(0,x.tf)(Re,this.data,i().get(this.embedData,"recordId"))&&(Ve=!0),this.data.forEach(function(Mt){Mt.advancedSetting=Mt.advancedSetting||{},Mt.dataSource=Mt.dataSource||"",Mt.disabled=!!Ve||Mt.disabled,Mt.fieldPermission=i().includes(I.C7,Mt.controlId)?"0"+(Mt.fieldPermission||"111").slice(-2):Mt.fieldPermission,Mt.defaultState={required:Mt.required,controlPermissions:Mt.controlPermissions,fieldPermission:Mt.fieldPermission,showControls:Mt.showControls},(Mt.relationControls||[]).forEach(function($t){$t.defaultState={required:$t.required,controlPermissions:$t.controlPermissions,fieldPermission:$t.fieldPermission}}),Mt.type===29&&Mt.advancedSetting.showtype==="2"&&(Mt.required=!1),Mt.type===10010&&(Mt.disabled=!0,Mt.value=Mt.dataSource),Mt.type===45&&Mt.enumDefault===1&&Mt.dataSource&&(Mt.value=de(pe.data,Mt,pe.masterData,pe.embedData));var sn=Y({item:Mt,data:Ie,masterData:Xe,ignoreRequired:ot,verifyAllControls:At}),on=sn.errorType,en=sn.errorText;on&&(i().remove(pe.errorItems,function($t){return $t.controlId===Mt.controlId}),pe.errorItems.push({controlId:Mt.controlId,errorType:on,errorText:en,showError:!1}))}),this.getCurrentDepartment(xt),this.getCurrentLocation(wt),this.getCurrentOrgRole(kt),this.searchConfig.length>0&&ke&&this.updateDataBySearchConfigs({searchType:"init"})}return(0,r.default)(ve,[{key:"getControlStore",value:function(pe){var Se=this.appId,ye=this.recordId,J=this.instanceId,me=this.workId,be=this.worksheetId,xe=this.from,Ae=this.storeCenter[pe.controlId];if(Ae)return Ae;if(pe.type===34?Ae=(0,W.Z)(pe,{from:xe,isCharge:this.isCharge,appId:Se,relationWorksheetId:be,recordId:ye,instanceId:J,workId:me}):pe.type===29&&(Ae=(0,P.Z)(pe,{appId:Se,from:xe,isCharge:this.isCharge,recordId:ye,allowEdit:!this.disabled,worksheetId:be,formData:this.data,instanceId:J,workId:me})),!Ae){console.error("create store fail!");return}return this.storeCenter[pe.controlId]=Ae,Ae}},{key:"setControlItemValue",value:function(pe,Se){var ye=(0,Q.find)(this.data,{controlId:pe});ye&&(ye.value=Se)}},{key:"updateDataSource",value:function(pe){var Se=this,ye=pe.controlId,J=pe.value,me=pe.notInsertControlIds,be=me===void 0?!1:me,xe=pe.removeUniqueItem,Ae=xe===void 0?function(){}:xe,Ne=pe.data,Me=pe.isInit,Fe=Me===void 0?!1:Me,Be=pe.searchByChange,we=Be===void 0?!1:Be,Ie=pe.ignoreSearch,ge=Ie===void 0?!1:Ie;this.asyncControls={};try{var Re=function(Ve,it,Ge,pt){Se.data.forEach(function(ot){if(ot.controlId===Ve){if(ot.type===34&&!ot.isSubList){var vt=!0;try{vt=ot.store.getState().baseLoading}catch(ze){}var At={recordId:Se.recordId,masterData:{worksheetId:Se.worksheetId,formData:Se.data},abortController:Se.abortController};if(i().get(it,"action")==="append")At.staticRows=it.rows,At.type="append";else if(i().get(it,"action")==="clearAndSet")At.staticRows=it.rows;else if(typeof it=="string"&&!i().isEmpty(safeParse(it))){var yt=safeParse(it);At.staticRows=yt}if(At.staticRows){vt?(ot.store.waitList.push(function(){(0,u.yL)((0,f.default)({},At,{triggerSubListControlValueChange:function(gt){Se.updateDataSource({controlId:ot.controlId,value:gt}),Se.onAsyncChange({controlId:ot.controlId,value:gt})}}))(ot.store.getState,ot.store.dispatch)}),ot.store.initialized||ot.store.init()):(0,u.yL)(At)(ot.store.getState,ot.store.dispatch),Se.controlIds.push(Ve);return}}if(!Se.isMobile&&!Se.recordId&&ot.type===29&&!ot.isSubList&&(0,Q.includes)([String(ee.wn.TABLE),String(ee.wn.TAB_TABLE),String(ee.wn.LIST)],ot.advancedSetting.showtype))if(String(it||"").startsWith("["))try{var st=safeParse(it,"array").filter(function(ze){return ze.sid||ze.sourcevalue});ot.store.dispatch({type:"UPDATE_RECORDS",records:st.map(function(ze){return ze.row||safeParse(ze.sourcevalue)})}),it=st.length||""}catch(ze){it=""}else it==="deleteRowIds: all"&&(ot.store.dispatch({type:"UPDATE_RECORDS",records:[]}),it="");if(ot.value=it,ot.type===28){var St=(ot.advancedSetting||{}).max||(ot.enumDefault===1?5:10);ot.value=Math.min(parseInt(Number(it||0)),St)}if(ot.type===29&&Se.getCurrentRelateData(ot),i().includes([15,16],ot.type)&&it){var Qe=(0,k.eO)(ot),Xe=Qe.formatMode;ot.value=N()(it,Xe).format(ot.type===15?"YYYY-MM-DD":"YYYY-MM-DD HH:mm:ss")}var $e=Se.getFilterConfigs(ot,"onBlur");!pt&&(Ge?(0,re.du)(ot):$e.length>0)&&Se.updateDataBySearchConfigs({control:ot,searchType:"onBlur"}),Ae(Ve),i().remove(Se.errorItems,function(ze){return ze.controlId===ot.controlId&&!ze.errorMessage});var Ke=Y({item:ot,data:Se.data,masterData:Se.masterData,verifyAllControls:Se.from===21&&!Se.isMobile?!0:void 0}),Ue=Ke.errorType,He=Ke.errorText;Ue&&Se.errorItems.push({controlId:ot.controlId,errorType:Ue,errorText:He,showError:!0}),!i().includes(Se.ruleControlIds,Ve)&&!Fe&&Se.ruleControlIds.push(Ve),!i().includes([25,30,31,32,33,37],ot.type)&&!i().includes(Se.controlIds,Ve)&&!be&&(Se.controlIds.push(Ve),Se.activeTrigger())}})},Pe=function(Ve,it){Se.data.forEach(function(Ge){Ve===Ge.controlId&&(Ge.data=it)})},ke=function We(Ve,it,Ge){var pt=i().find(Se.data,function(wt){return wt.controlId===Ve}),ot=it===0?we:!1,vt=it===0?ge:!1;if(ot&&(Se.loopList=[]),it>5){Re(Ve,"");return}if(Ge===void 0){if(ot=!1,vt=!1,pt.type===25&&(Ge=A().cn.toMoney(i().find(Se.data,function(wt){return wt.controlId===pt.dataSource.slice(1,-1)}).value||"").substring(3)),pt.type===30&&(Ge=M({data:Se.data,dataSource:pt.dataSource,sourceControlId:pt.sourceControlId})),pt.type===31){var At=se(Se.data,pt);Ge=At.error||At.columnIsUndefined?"":At.result}if(pt.type===32&&(Ge=pt.dataSource.replace(/\$.+?\$/g,function(wt){var kt=wt.match(/\$(.+?)\$/)[1],Rt=i().find(Se.data,function(fn){return fn.controlId===kt});if(!Rt)return"";if(Rt.type===31){var jt=se(Se.data,Rt);return jt.columnIsUndefined?"":(Rt.advancedSetting&&Rt.advancedSetting.numshow==="1"&&jt.result&&(jt.result=parseFloat(jt.result)*100),jt.error||i().isNull(jt.result)?"":""+jt.result.toFixed(Rt.dot)+Rt.unit)}return(0,V.dN)(Rt,!0,!0,{doNotHandleTimeZone:!0})})),pt.type===38&&(Ge=he(Se.data,pt,Se.recordCreateTime)),pt.advancedSetting&&pt.advancedSetting.defaultfunc&&pt.type!==30)if(delete pt.advancedSetting.defsource,i().get(safeParse(pt.advancedSetting.defaultfunc),"type")==="javascript"){ne({formData:Se.data,fnControl:pt,update:function(kt){Se.updateDataSource({controlId:pt.controlId,value:kt}),Se.onAsyncChange({controlId:pt.controlId,value:kt})}});return}else Ge=ae({formData:Se.data,fnControl:pt});if(pt.advancedSetting&&pt.advancedSetting.defsource&&pt.type!==30&&(Ge=D(Se.data,pt,Se.masterData)),pt.type===45&&pt.enumDefault===1&&pt.dataSource&&(Ge=de(Se.data,pt,Se.masterData,Se.embedData)),pt.type===37){if(pt.advancedSetting&&pt.advancedSetting.filters&&pt.advancedSetting.filters!=="[]")return;var yt=i().find(Se.data,function(wt){return wt.controlId===pt.dataSource.slice(1,-1)});if(!yt)return;var st=[];try{if(yt.type===29)try{if(yt.store){var St=yt.store.getState();st=Se.recordId?St.records.concat((0,Q.get)(St,"changes.addedRecords")||[]):St.records}else if(i().isArray(yt.value))st=yt.value;else if(yt.data)st=yt.data;else{var Qe=safeParse(yt.value);i().isArray(Qe)&&(st=Qe)}}catch(wt){}else yt.type===34&&(yt.store?st=yt.store.getState().rows||[]:st=yt.value.rows||[])}catch(wt){console.error(wt)}if(!pt.sourceControlId)Ge=st.length;else{var Xe=i().find(yt.relationControls,function(wt){return wt.controlId===pt.sourceControlId});if(Xe){var $e=st.map(function(wt){return(wt.row||wt)[Xe.controlId]}),Ke=$e.filter(function(wt){return!i().isUndefined(wt)});if($e.length){var Ue=i().includes([15,16,46],pt.type)||pt.type===37&&i().includes([15,16,46],pt.enumDefault2);switch(pt.enumDefault){case 13:Ge=$e.filter(function(wt){return Xe.type===36?wt==="1":!(0,O.hB)(wt)}).length;break;case 14:Ge=$e.filter(function(wt){return Xe.type===36?wt!=="1":(0,O.hB)(wt)}).length;break;case 5:Ge=i().sum($e.map(function(wt){return wt||0}).map(function(wt){return i().isNumber(parseFloat(wt,10))&&!i().isNaN(parseFloat(wt,10))?parseFloat(wt,10):0})),Ge=Ce(pt,Ge,!1);break;case 1:Ge=i().sum(Ke.map(function(wt){return i().isNumber(parseFloat(wt,10))&&!i().isNaN(parseFloat(wt,10))?parseFloat(wt,10):0}))/Ke.length;break;case 2:if(Ue)if(pt.enumDefault2===46){var He=N().max(Ke.filter(i().identity).map(function(wt){return N()(wt,"HH:mm:ss")}));Ge=T(pt,!1,He)}else{var ze=i().max(Ke.filter(i().identity).map(function(wt){return new Date(wt||0).getTime()})),gt=(0,k.eO)({type:pt.enumDefault2,advancedSetting:{showtype:pt.unit}}),Et=gt.formatMode,ft=gt.mode;Ge=N()(ze).format(Et)}else Ge=i().max(Ke.map(function(wt){return i().isNumber(parseFloat(wt,10))&&!i().isNaN(parseFloat(wt,10))?parseFloat(wt,10):0}));break;case 3:if(Ue)if(pt.enumDefault2===46){var qe=N().min(Ke.filter(i().identity).map(function(wt){return N()(wt,"HH:mm:ss")}));Ge=T(pt,!1,qe)}else{var nt=i().min(Ke.filter(i().identity).map(function(wt){return new Date(wt||0).getTime()})),Ze=(0,k.eO)({type:pt.enumDefault2,advancedSetting:{showtype:pt.unit}}),et=Ze.formatMode;Ge=N()(nt).format(et)}else Ge=i().min(Ke.map(function(wt){return i().isNumber(parseFloat(wt,10))&&!i().isNaN(parseFloat(wt,10))?parseFloat(wt,10):0}));break}}}}}}Re(Ve,Ge,ot,vt);var ut=i().filter(Se.data,function(wt){return(wt.dataSource||"").indexOf(Ve)>-1||wt.type===38&&(wt.sourceControlId||"").indexOf(Ve)>-1||wt.advancedSetting&&wt.advancedSetting.defsource&&safeParse(wt.advancedSetting.defsource).filter(function(kt){return(!kt.rcid&&kt.cid===Ve||kt.rcid===Ve&&kt.cid)&&!kt.isAsync}).length||(wt.advancedSetting&&i().get(safeParse(wt.advancedSetting.defaultfunc),"expression")||"").indexOf(Ve)>-1||wt.type===37&&Ve===(wt.dataSource||"").slice(1,-1)});if(!Se.asyncControls[Ve]){var xt=i().filter(Se.data,function(wt){return wt.advancedSetting&&wt.advancedSetting.defsource&&safeParse(wt.advancedSetting.defsource).filter(function(kt){return(!kt.rcid&&kt.cid===Ve||kt.rcid===Ve&&kt.cid)&&kt.isAsync}).length});xt.length&&(Se.asyncControls[Ve]=xt)}ut.forEach(function(wt){var kt=wt.controlId;We(kt,it+1)})};Ne&&Pe(ye,Ne),ke(ye,0,J)}catch(We){console.error("UpdateSource Error:",We),console.log("Error Control data:",ye,J)}this.getAsyncData(Fe)}},{key:"getDataSource",value:function(){return this.data}},{key:"getUpdateControlIds",value:function(){return this.controlIds}},{key:"getUpdateRuleControlIds",value:function(){return this.ruleControlIds}},{key:"isInitSearch",value:function(pe,Se){var ye=this.getFilterConfigs({},"init");return Se?!!i().find(ye,function(J){return J.controlId===pe})&&!this.loadingInfo[pe]:!Se}},{key:"setErrorControl",value:function(pe,Se,ye){var J=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},me=arguments[4],be=i().findIndex(this.errorItems,function(xe){return xe.controlId===pe&&xe.errorType===Se&&(J.ruleId?xe.ruleId===J.ruleId:!0)});be>-1?ye||this.errorItems.splice(be,1):(ye&&i().includes([I.GK.RULE_REQUIRED,I.GK.REQUIRED],Se)&&this.errorItems.push({controlId:pe,errorType:Se,errorText:ye,showError:!1}),this.isInitSearch(pe,me)&&ye&&Se===I.GK.RULE_ERROR&&this.errorItems.push({controlId:pe,errorType:Se,showError:J.hintType!==1,errorMessage:ye,ruleId:J.ruleId}))}},{key:"getErrorControls",value:function(){return this.errorItems}},{key:"setLoadingInfo",value:function(pe,Se){var ye=this;(i().isArray(pe)?pe:[pe]).map(function(J){if(i().find(ye.data,function(be){return be.controlId===J}))ye.loadingInfo[J]=Se;else{var me=i().find(ye.data,function(be){return i().find(be.relationControls||[],function(xe){return xe.controlId===J})});me&&(ye.loadingInfo[me.controlId]=Se)}}),this.updateLoadingItems(this.loadingInfo)}},{key:"getCurrentDepartment",value:function(pe){var Se=this;!pe.length||!md.global.Account.accountId||window.isPublicWorksheet||i().isEmpty((0,B.vo)(this.projectId))||(this.setLoadingInfo(pe,!0),z.Z.getDepartmentsByAccountId({projectId:this.projectId,accountIds:[md.global.Account.accountId]}).then(function(ye){var J=[];Se.setLoadingInfo(pe,!1),ye.maps.forEach(function(me){me.departments.forEach(function(be){J.push({departmentId:be.id,departmentName:be.name})})}),J=i().uniqBy(J,"departmentId"),pe.forEach(function(me){var be=Se.data.find(function(Ne){return Ne.controlId===me})||{},xe=be.enumDefault,Ae=xe===0?U()(J.slice(0,1)):U()(J);Se.updateDataSource({controlId:me,value:Ae,isInit:!0}),Se.onAsyncChange({controlId:me,value:Ae})})}).finally(function(){Se.setLoadingInfo(pe,!1)}))}},{key:"getCurrentOrgRole",value:function(pe){var Se=this;!pe.length||!md.global.Account.accountId||window.isPublicWorksheet||i().isEmpty((0,B.vo)(this.projectId))||(this.setLoadingInfo(pe,!0),X.Z.getOrganizesByAccountId({projectId:this.projectId,accountIds:[md.global.Account.accountId]}).then(function(ye){var J=[];Se.setLoadingInfo(pe,!1),ye.maps.forEach(function(me){me.organizes.forEach(function(be){J.push({organizeId:be.id,organizeName:be.name})})}),J=i().uniqBy(J,"organizeId"),pe.forEach(function(me){var be=Se.data.find(function(Ne){return Ne.controlId===me})||{},xe=be.enumDefault,Ae=xe===0?U()(J.slice(0,1)):U()(J);Se.updateDataSource({controlId:me,value:Ae,isInit:!0}),Se.onAsyncChange({controlId:me,value:Ae})})}).finally(function(){Se.setLoadingInfo(pe,!1)}))}},{key:"getCurrentLocation",value:function(pe){var Se=this;pe.length&&new F.Z().loadJs().then(function(){new h.Z().getCurrentPos(function(ye,J){if(ye==="complete"){if(pe=pe.filter(function(me){return!Se.data.find(function(be){return be.controlId===me}).value}),!pe.length)return;pe.forEach(function(me){Se.updateDataSource({controlId:me,value:U()({x:J.position.lng,y:J.position.lat,address:J.formattedAddress||"",title:(J.addressComponent||{}).building||""}),isInit:!0})}),Se.onAsyncChange({controlIds:pe,value:U()({x:J.position.lng,y:J.position.lat,address:J.formattedAddress||"",title:(J.addressComponent||{}).building||""})})}})})}},{key:"getCurrentRelateData",value:function(pe){var Se=this,ye=pe.controlId,J=pe.dataSource,me=pe.value,be=i().isArray(me)?me[0]:safeParse(me||"[]")[0],xe=be||{},Ae=xe.isGet,Ne=xe.sid,Me=xe.sourcevalue,Fe=safeParse(Me||"{}"),Be=i().find(this.data,function(Ie){var ge=Ie.advancedSetting;ge=ge===void 0?{}:ge;var Re=ge.defsource,Pe=Ie.dataSource,ke=Ie.type;return(safeParse(Re||"[]").some(function(We){return ye===We.rcid&&We.cid&&i().isUndefined(Fe[We.cid])})||ke===30&&Pe.slice(1,-1)===ye)&&Ne!==Se.masterRecordRowId});if(Be&&!Ae&&Ne&&!Ne.includes("temp")){this.setLoadingInfo(ye,!0);var we={getType:1,worksheetId:J,rowId:Ne};window.isPublicWorksheet&&window.publicWorksheetShareId&&(we.shareId=window.publicWorksheetShareId,we.getType=3),i().get(window,"shareState.isPublicWorkflowRecord")&&i().get(window,"shareState.shareId")&&(we.shareId=i().get(window,"shareState.shareId"),we.getType=13),this.requestPool.getRowDetail(we,this.abortController).then(function(Ie){if(Se.setLoadingInfo(ye,!1),Ie.resultCode!==7){var ge=U()(safeParse(me||"[]").map(function(Re,Pe){return Pe===0?Z()(Re,{sourcevalue:Ie.rowData,isGet:!0}):Re}));Se.updateDataSource({controlId:ye,value:ge,ignoreSearch:!0}),Se.onAsyncChange({controlId:ye,value:ge})}}).finally(function(){Se.setLoadingInfo(ye,!1)})}}},{key:"getAsyncData",value:function(pe){var Se=this;i().isEmpty(this.asyncControls)||p()(this.asyncControls).forEach(function(ye){(Se.asyncControls[ye]||[]).forEach(function(J){if(J.type===27||J.type===48){var me=safeParse(D(Se.data,Z()({},J,{advancedSetting:{defsource:J.advancedSetting.defsource.replace(/isAsync/gi,"async")}}),Se.masterData));if(!me.length)Se.updateDataSource({controlId:J.controlId,value:"[]",isInit:pe});else{Se.setLoadingInfo(J.controlId,!0);var be={27:{id:"departmentId",name:"departmentName",ids:"departments",api:z.Z.getDepartmentsByAccountId},48:{id:"organizeId",name:"organizeName",ids:"organizes",api:X.Z.getOrganizesByAccountId}},xe=be[J.type];xe.api({projectId:Se.projectId,accountIds:me.map(function(Ae){return Ae.accountId})}).then(function(Ae){var Ne=[];Se.setLoadingInfo(J.controlId,!1),Ae.maps.forEach(function(Me){Me[xe.ids].forEach(function(Fe){var Be;Ne.push((Be={},(0,ce.default)(Be,xe.id,Fe.id),(0,ce.default)(Be,xe.name,Fe.name),Be))})}),Ne=U()(J.enumDefault===0?i().uniqBy(Ne,xe.id).slice(0,1):i().uniqBy(Ne,xe.id)),Se.updateDataSource({controlId:J.controlId,value:Ne,isInit:pe}),Se.onAsyncChange({controlId:J.controlId,value:Ne})}).finally(function(){Se.setLoadingInfo(J.controlId,!1)})}}})})}},{key:"callStore",value:function(pe){for(var Se=this,ye=arguments.length,J=Array(ye>1?ye-1:0),me=1;me<ye;me++)J[me-1]=arguments[me];var be=i().isObject(pe)?pe.fnName:pe;p()(this.storeCenter).forEach(function(xe){var Ae=Se.storeCenter[xe];i().isObject(pe)&&pe.controlId&&pe.controlId!==(0,Q.get)(Ae.getState(),"base.control.controlId")||Ae&&i().isFunction(Ae[be])&&Ae[be].apply(Ae,J)})}}]),ve}()},64381:(lt,Te,t)=>{"use strict";t.d(Te,{Eg:()=>Z,M8:()=>r,MH:()=>a,Sd:()=>o,r0:()=>d,xt:()=>y});var ce=t(63239),g=t.n(ce),p=t(46593),L=t.n(p);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(79264);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(61511);var y=function(){return new(L())(function(U,f){var V=sessionStorage.getItem("entryUrl"),C=(window.isIphone&&V||location.href).split("#")[0];te.Z.getWeiXinConfig({url:encodeURI(C)}).then(function(O){var n=O.data,s=O.code;s===1?(window.wx.config({debug:!1,appId:n.appId,timestamp:n.timestamp,nonceStr:n.nonceStr,signature:n.signature,jsApiList:["scanQRCode"]}),window.wx.ready(function(){U()}),window.wx.error(function(j){j.mdurl=encodeURI(C),window.nativeAlert(g()(j)),f()})):f(1)})})},a=function(U){return new(L())(function(f,V){var C=location.href.split("#")[0],O=md.global.Config.IsLocal;R.Z.getSignatureInfo({projectId:U,url:encodeURI(C),suiteType:8,tickettype:1}).then(function(n){if(!n){V(1);return}window.wx.config({beta:!0,debug:!1,appId:n.corpId,timestamp:n.timestamp,nonceStr:n.nonceStr,signature:n.signature,jsApiList:["scanQRCode"]}),window.wx.ready(function(){f()}),window.wx.error(function(s){s.mdurl=encodeURI(C),window.nativeAlert(g()(s)),V()})})})},r=function(U){return new(L())(function(f,V){var C=encodeURI(location.href.split("#")[0]);R.Z.getFeiShuSignatureInfo({projectId:U,url:C}).then(function(O){if(!O){V(1);return}window.h5sdk.config({appId:O.appId,timestamp:O.timestamp,nonceStr:O.noncestr,signature:O.signature,jsApiList:["scanCode","getLocation"],onSuccess:function(s){},onFail:function(s){s.mdurl=C,window.nativeAlert(g()(s)),V()}}),window.h5sdk.ready(function(){f()})})})},o=function(U){return new(L())(function(f,V){var C=sessionStorage.getItem("entryUrl")||location.href,O=(window.isIphone?location.href:C).split("#")[0];R.Z.getDDSignatureInfo({projectId:U,url:O}).then(function(n){n||V(),window.dd.config({agentId:n.agentId,corpId:n.corpId,timeStamp:n.timestamp,nonceStr:n.noncestr,signature:n.signature,jsApiList:["device.geolocation.get"]}),window.dd.ready(function(){f()}),window.dd.error(function(s){s.mdurl=O,window.nativeAlert(g()(s))})})})},d=function(U){return new(L())(function(f,V){var C=encodeURI(location.href.split("#")[0]);R.Z.getWeLinkSignatureInfo({projectId:U,url:C}).then(function(O){O||V(),window.HWH5.config({appId:O.appId,timestamp:O.timestamp,noncestr:O.noncestr,signature:O.signature,jsApiList:["getLocation"]}),window.HWH5.ready(function(){f()}),window.HWH5.error(function(n){n.mdurl=C,window.nativeAlert(g()(n))})})})},Z=function(U,f){var V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_.noop;window.currentUrl!==location.href&&(window.currentUrl=location.href,window.configSuccess=!1,window.configLoading=!1),window.configSuccess?U():window.configLoading||f.then(function(){window.configLoading=!1,window.configSuccess=!0,U()}).catch(V)}},6917:(lt,Te,t)=>{"use strict";t.d(Te,{BD:()=>a,C7:()=>d,GK:()=>R,M:()=>o,MP:()=>y,ju:()=>r});var ce=t(30381),g=t.n(ce),p=t(96486),L=t.n(p),te=t(89499),R={REQUIRED:"REQUIRED",MOBILE_PHONE:"MOBILE_PHONE",TEL_PHONE:"TEL_PHONE",EMAIL:"EMAIL",ID_CARD:"ID_CARD",PASSPORT:"PASSPORT",HK_PASSPORT:"HK_PASSPORT",TW_PASSPORT:"TW_PASSPORT",UNIQUE:"UNIQUE",NUMBER_RANGE:"NUMBER_RANGE",MULTI_SELECT_RANGE:"MULTI_SELECT_RANGE",DATE:"DATE",DATE_TIME:"DATE_TIME",TEXT_RANGE:"TEXT_RANGE",CUSTOM:"CUSTOM",DATE_TIME_RANGE:"DATE_TIME_RANGE",RULE_ERROR:"RULE_ERROR",OTHER_ERROR:"OTHER_ERROR",RULE_REQUIRED:"RULE_REQUIRED",OTHER_REQUIRED:"OTHER_REQUIRED",CHILD_TABLE_ROWS_LIMIT:"CHILD_TABLE_ROWS_LIMIT"},y={REQUIRED:function(H){var U=H.controlName,f=H.advancedSetting,V=H.type;if(V===36){if(f.showtype==="1")return _l("\u8BF7\u5F00\u542F\u6B64\u9879");if(f.showtype==="2"){var C=safeParse((f||{}).itemnames||"[]");return _l("\u8BF7\u9009\u62E9%0",L().get(L().find(C,function(O){return O.key==="1"}),"value"))}else return _l("\u8BF7\u52FE\u9009\u6B64\u9879")}return""+_l("\u8BF7\u586B\u5199%0",U)},REQUIRED_SELECT:function(H){var U=H.controlName;return""+_l("\u8BF7\u9009\u62E9%0",U)},MOBILE_PHONE:_l("\u4E0D\u662F\u6709\u6548\u7684\u624B\u673A\u53F7\u7801"),TEL_PHONE:_l("\u4E0D\u662F\u6709\u6548\u7684\u5EA7\u673A\u53F7\u7801"),EMAIL:_l("\u4E0D\u662F\u6709\u6548\u7684\u90AE\u7BB1\u5730\u5740"),ID_CARD:_l("\u4E0D\u662F\u6709\u6548\u7684\u8EAB\u4EFD\u8BC1\u53F7\u7801"),PASSPORT:_l("\u4E0D\u662F\u6709\u6548\u7684\u62A4\u7167\u53F7\u7801"),HK_PASSPORT:_l("\u4E0D\u662F\u6709\u6548\u7684\u6E2F\u6FB3\u901A\u884C\u8BC1\u53F7\u7801"),TW_PASSPORT:_l("\u4E0D\u662F\u6709\u6548\u7684\u53F0\u6E7E\u901A\u884C\u8BC1\u53F7\u7801"),OTHER_REQUIRED:function(H){var U=H.options,f=U===void 0?[]:U,V=L().get(L().find(f,function(C){return C.key==="other"&&!C.isDeleted}),"value");return _l("\u8BF7\u586B\u5199%0",V||"\u5176\u4ED6")},CHILD_TABLE_ROWS_LIMIT:function(H){var U=H.value,f=H.advancedSetting,V=f.min,C=f.max,O=f.enablelimit;if(String(O)==="1"){var n=Number(L().get(U,"rows")&&(0,te.CD)(U.rows).length||(L().isObject(U)?0:U)||0);if(L().isNumber(n)&&!L().isNaN(n)){if(L().isNumber(Number(V))&&!L().isNaN(Number(V))&&n<Number(V))return""+_l("\u8BF7\u81F3\u5C11\u8F93\u5165%0\u6761\u8BB0\u5F55",V);if(L().isNumber(Number(C))&&!L().isNaN(Number(C))&&n>Number(C))return""+_l("\u6700\u591A\u8F93\u5165%0\u6761\u8BB0\u5F55",C)}}},UNIQUE:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},U=H.uniqueInRecord,f=arguments[1];return f?U?_l("\u672C\u8BB0\u5F55\u5185\u4E0D\u5141\u8BB8\u91CD\u590D"):_l("\u5168\u5C40\u4E0D\u5141\u8BB8\u91CD\u590D"):_l("\u4E0D\u5141\u8BB8\u91CD\u590D")},NUMBER_RANGE:function(H){var U=H.value,f=H.advancedSetting,V=f.min,C=f.max,O=f.numshow,n=O==="1"?Number(V||0)*100+"%":V,s=O==="1"?Number(C||0)*100+"%":C;if(C===V)return _l("\u8BF7\u8F93\u5165%0",n);if(C&&V&&(+U>+C||+U<+V))return _l("\u8BF7\u8F93\u5165%0\u5230%1\u4E4B\u95F4\u7684\u6570\u503C",n,s);if(V&&+U<+V)return _l("\u8BF7\u8F93\u5165\u5927\u4E8E\u7B49\u4E8E%0\u7684\u6570",n);if(C&&+U>+C)return _l("\u8BF7\u8F93\u5165\u5C0F\u4E8E\u7B49\u4E8E%0\u7684\u6570",s)},MULTI_SELECT_RANGE:function(H){var U=H.value,f=H.advancedSetting,V=f.min,C=f.max,O=JSON.parse(U||"[]").length;if(C===V)return _l("\u8BF7\u9009\u62E9%0\u9879",V);if(C&&V)return O>+C||O<+V?_l("\u8BF7\u9009\u62E9%0~%1\u9879",V,C):void 0;if(V&&O<+V)return _l("\u6700\u5C11\u9009\u62E9%0\u9879",V);if(C&&O>+C)return _l("\u6700\u591A\u9009\u62E9%0\u9879",C)},DATE:function(H){var U=H.advancedSetting,f=U.allowweek||"1234567",V="1234567",C=["",_l("\u5468\u4E00"),_l("\u5468\u4E8C"),_l("\u5468\u4E09"),_l("\u5468\u56DB"),_l("\u5468\u4E94"),_l("\u5468\u516D"),_l("\u5468\u65E5")];return f&&L().isArray(f)&&f.length<=4?_l("\u8BF7\u9009\u62E9%0\u5BF9\u5E94\u7684\u65E5\u671F",f.split("").map(function(O){return C[O]}).join("\u3001")):_l("\u8BF7\u9009\u62E9\u9664%0\u4EE5\u5916\u7684\u65E5\u671F",V.split("").filter(function(O){return!(f.indexOf(O)>-1)}).map(function(O){return C[O]}).join("\u3001"))},DATE_TIME:function(H){var U=H.advancedSetting;return _l("\u8BF7\u586B\u5199\uFF08%0 ~ %1\uFF09\u8303\u56F4\u5185\u7684\u65F6\u95F4",U.allowtime.split("-")[0],U.allowtime.split("-")[1])},TEXT_RANGE:function(H){var U=H.value,f=H.advancedSetting,V=f.min,C=f.max,O=(U||"").length;if(C===V)return _l("\u8BF7\u8F93\u5165%0\u4E2A\u5B57",V);if(C&&V)return O>+C||O<+V?_l("\u8BF7\u8F93\u5165%0~%1\u4E2A\u5B57",V,C):void 0;if(V&&O<+V)return _l("\u6700\u5C11\u8F93\u5165%0\u4E2A\u5B57",V);if(C&&O>+C)return _l("\u6700\u591A\u8F93\u5165%0\u4E2A\u5B57",C)},CUSTOM:function(H){var U=H.advancedSetting;return JSON.parse(U.regex).err},DATE_TIME_RANGE:function(H,U,f,V){function C(O){var n=V?"HH:mm:ss":"YYYY-MM-DD HH:mm:ss";return g()(O,n)}if(f===U)return _l("\u8BF7\u586B\u5199%0",U);if(f&&U)return C(H)>C(f)||C(H)<C(U)?_l("\u8BF7\u586B\u5199%0 ~ %1\u8303\u56F4\u5185\u7684\u65F6\u95F4",U,f):void 0;if(U&&C(H)<C(U))return _l("\u65F6\u95F4\u4E0D\u80FD\u65E9\u4E8E%0",U);if(f&&C(H)>C(f))return _l("\u65F6\u95F4\u4E0D\u80FD\u665A\u4E8E%0",f)}},a={DEFAULT:0,SHARE:1,NEWRECORD:2,RECORDINFO:3,PUBLIC_ADD:4,H5_ADD:5,H5_EDIT:6,WORKFLOW:7,CUSTOM_BUTTON:8,PUBLIC_EDIT:9,DRAFT:21},r={1:"m",2:"h",3:"d",4:"M",5:"y",6:"s"},o=[9,10,11,15,16,19,23,24,26,27,28,29,34,35,36,45,46,47,48],d=["uaid","wfname","wfcuaids","wfcaid","wfctime","wfrtime","wfftime","wfstatus","rowid","ownerid","caid","ctime","utime","daid"]},25734:(lt,Te,t)=>{"use strict";t.d(Te,{MU:()=>K,Mb:()=>Q,O2:()=>A,YW:()=>F,d0:()=>N,fv:()=>z,rx:()=>X,tf:()=>h});var ce=t(88239),g=t(12424),p=t(47518),L=t.n(p),te=t(85315),R=t(72444),y=t(63239),a=t.n(y);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(44253);var o=t(30381),d=t.n(o);if(!/^(1887|7596|7798)$/.test(t.j))var Z=t(26358);if(!/^(1887|7596|7798)$/.test(t.j))var H=t(5420);if(!/^(1887|7596|7798)$/.test(t.j))var U=t(36612);if(!/^(1887|7596|7798)$/.test(t.j))var f=t(24607);if(!/^(1887|7596|7798)$/.test(t.j))var V=t(6917);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(15577);if(!/^(1887|7596|7798)$/.test(t.j))var O=t(94914);var n=t(96486),s=t.n(n);if(!/^(1887|7596|7798)$/.test(t.j))var j=t(89499);var A=function(m){return s().isUndefined(m)||s().isNull(m)||String(m).trim()===""},S={1:"year ",2:"month",3:"day",4:"hour",5:"minute",6:"second"},I={YYYY:1,"YYYY-MM":2,"YYYY-MM-DD":3,"YYYY-MM-DD HH":4,"YYYY-MM-DD HH:mm":5,"YYYY-MM-DD HH:mm:ss":6,"HH:mm":5,"HH:mm:ss":6},c=function(m,v){return d()(m).year()?d()(d()(m).format(v),v).format("YYYY-MM-DD "+v):d()(m,v).format("YYYY-MM-DD "+v)},q=function(m){var v=void 0;return s().flattenDeep(r.AW).map(function(W){W.value===m&&(v=parseInt(W.text.replace(/\D/g,""))||0)}),v},b=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=arguments[1],W=arguments[2],P="",u="";return W===10?(v&&(u=s().includes([15,16],v.type)?((0,O.eO)(v)||{}).formatMode:m.unit==="1"?"HH:mm":"HH:mm:ss"),P=m.unit==="1"?"HH:mm":"HH:mm:ss"):(P=((0,O.eO)(m)||{}).formatMode,u=((0,O.eO)(v)||{}).formatMode),s().isEmpty(v)&&u||I[P]<=I[u]?P:u},k=function(m,v,W){var P=!0;switch(m){case 4:P=d()(v).isSame(d()().startOf("week").format("YYYY-MM-DD"),"week");break;case 5:P=d()(v).isSame(d()().startOf("week").add(-1,"week").format("YYYY-MM-DD"),"week");break;case 6:P=d()(v).isSame(d()().startOf("week").add(1,"week").format("YYYY-MM-DD"),"week");break;case 7:P=d()(v).isSame(d()().startOf("month").format("YYYY-MM-DD"),"month");break;case 8:P=d()(v).isSame(d()().startOf("month").add(-1,"month").format("YYYY-MM-DD"),"month");break;case 9:P=d()(v).isSame(d()().startOf("month").add(1,"month").format("YYYY-MM-DD"),"month");break;case 12:P=d()(v).isSame(d()().startOf("quarter").format("YYYY-MM-DD"),"quarter");break;case 13:P=d()(v).isSame(d()().startOf("quarter").add(-1,"quarter").format("YYYY-MM-DD"),"quarter");break;case 14:P=d()(v).isSame(d()().startOf("quarter").add(-1,"quarter").format("YYYY-MM-DD"),"quarter");break;case 15:P=d()(v).isSame(d()().startOf("year").format("YYYY-MM-DD"),"year");break;case 16:P=d()(v).isSame(d()().startOf("year").add(-1,"year").format("YYYY-MM-DD"),"year");break;case 17:P=d()(v).isSame(d()().startOf("year").add(1,"year").format("YYYY-MM-DD"),"year");break}return W?P:!P},ee=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=arguments[1],W=arguments[2],P=arguments[3],u=m.dateRange,l=m.dynamicSource,T=l===void 0?[]:l,G=m.dataType;switch(T.length>0&&(u=0),u){case 1:return d()().format("YYYY-MM-DD");case 2:return d()().subtract(1,"days").format("YYYY-MM-DD");case 3:return d()().add(1,"days").format("YYYY-MM-DD");case 4:return W?d()().weekday(0).format("YYYY-MM-DD"):d()().endOf("isoWeek").format("YYYY-MM-DD");case 5:return W?d()().weekday(-7).format("YYYY-MM-DD"):d()().weekday(0).subtract(1,"days").format("YYYY-MM-DD");case 6:return W?d()().weekday(7).format("YYYY-MM-DD"):d()().weekday(7).add(6,"days").format("YYYY-MM-DD");case 7:return W?d()().add("month",0).format("YYYY-MM")+"-01":d()().endOf("month").format("YYYY-MM-DD");case 8:return W?d()().month(d()().month()-1).startOf("month").format("YYYY-MM-DD"):d()().month(d()().month()-1).endOf("month").format("YYYY-MM-DD");case 9:return W?d()().month(d()().month()+1).startOf("month").format("YYYY-MM-DD"):d()().month(d()().month()+1).endOf("month").format("YYYY-MM-DD");case 12:return W?d()().startOf("quarter").format("YYYY-MM-DD"):d()().endOf("quarter").format("YYYY-MM-DD");case 13:return W?d()().startOf("quarter").subtract(3,"month").format("YYYY-MM-DD"):d()().endOf("quarter").subtract(3,"month").format("YYYY-MM-DD");case 14:return W?d()().startOf("quarter").add(3,"month").format("YYYY-MM-DD"):d()().endOf("quarter").add(3,"month").format("YYYY-MM-DD");case 15:return W?d()().format("YYYY")+"-01-01":d()().endOf("year").format("YYYY-MM-DD");case 16:return W?d()().add(-1,"year").format("YYYY")+"-01-01":d()().add(-1,"year").endOf("year").format("YYYY-MM-DD");case 17:return W?d()().add(1,"year").format("YYYY")+"-01-01":d()().add(1,"year").endOf("year").format("YYYY-MM-DD");case 10:case 21:case 22:case 23:return d()().subtract(q(u)||v,"day").format("YYYY-MM-DD");case 11:case 31:case 32:case 33:return d()().add(q(u)||v,"day").format("YYYY-MM-DD");case 18:var D=((0,O.eO)({advancedSetting:{showtype:m.dataShowType},type:G})||{}).formatMode;return d()(v).format(D||"YYYY-MM-DD");default:return P===16?d()(v).format("YYYY-MM-DD HH:mm"):d()(v).format("YYYY-MM-DD")}},re=function(m,v){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],P=arguments[3];try{var u=function(De){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Le=(_e.advancedSetting||{}).numshow==="1";return(_e.originType===37||_e.type===31||_e.originType===30&&_e.sourceControltype===37)&&De&&/^\d+\.\d+$/.test(""+De)?(0,C.IQ)(parseFloat((0,C.FH)((0,C.pc)(parseFloat(De),100),Le?_e.dot+2:_e.dot)),100):De},l=m.filterType,T=l===void 0?"":l,G=m.dataType,D=G===void 0?"":G,M=m.dynamicSource,se=M===void 0?[]:M,ae=m.dateRange,ne=(0,Z.BM)(v);if(!ne)return!0;var de=m.values||[],Ce=m.value||"",he="",fe="",Ee=ne.value,Y=Ee===void 0?"":Ee,oe=ne.advancedSetting,ve=oe===void 0?{}:oe;if(m.dateRange===18&&(m.dataShowType=ve.showtype),ne.type===3&&(Y=(Y||"").replace("+86","")),s().includes([9,10,11],ne.type)&&Y&&Y.indexOf("other")){var ue=safeParse(Y,"array").map(function(ct){return ct.startsWith("other:")?"other":ct});Y=a()(ue)}if(Y=Y===null?"":Y,ne.type===r.v8.MONEY_CN){var pe=ne.dataSource.replace(/\$/g,""),Se=W.find(function(ct){return ct.controlId===pe})||{};Y=Se.value}var ye=(0,Z.Io)(ne.type),J=r.Cz[ye]||{},me=J.value,be=ve.showtype,xe={};if(se.length>0){var Ae=se[0].cid,Ne=Ae===void 0?"":Ae;if(Ne==="rowid"?xe={type:2,value:P}:Ne==="currenttime"?xe={type:16,advancedSetting:{showtype:"6"},value:d()(new Date).format("YYYY-MM-DD HH:mm:ss")}:xe=s().cloneDeep(s().find(W,function(ct){return ct.controlId===Ne}))||{},xe.type===30&&(xe.type=xe.sourceControlType),xe.type===3&&(xe.value=(xe.value||"").replace("+86","")),s().includes([2,6,14,16],T)&&s().includes([2],me)||s().includes([13,15],T)&&s().includes([2],me))Ce=xe.value;else if(s().includes([17,18,33,34,35,36,37,38],T)&&s().includes([4,10],me))Ce=xe.value;else if(s().includes([2,6,26,27,51,52],T)&&(s().includes([5],me)&&s().includes([9,10,11,27,48],D)||s().includes([6],me))){var Me=xe.value?safeParse(xe.value):xe.value;de=(typeof Me>"u"?"undefined":(0,R.default)(Me))==="object"?Me:[xe.value]}else if(s().includes([24,25,26,27,28,51,52],T)&&s().includes([29],D)){var Fe=xe.value?safeParse(xe.value):xe.value;de=(typeof Fe>"u"?"undefined":(0,R.default)(Fe))==="object"?Fe:[xe.value]}else de=[xe.value]}else s().includes([26,27,48],ne.type)&&(de=de.map(function(ct){var De=ct&&JSON.parse(ct);return(s().get(De,"accountId")||s().get(De,"id"))==="user-self"&&(De.accountId=md.global.Account.accountId,delete De.id),De}));s().isArray(de)&&(de=de.filter(function(ct){return!A(ct)})),s().includes([15,16,46],ne.type)&&(he=b(ne,xe,me),fe=S[I[he]],s().includes([1,2,3],ae)&&!se.length&&(fe="day")),Y=u(Y,ne),Ce=u(Ce,xe);var Be=void 0,we=void 0;switch(T){case r.W5.LIKE:switch(me){case r.Cz.TEXT.value:var Ie=!1;return s().map(de,function(ct){Y.indexOf(ct)>=0&&(Ie=!0)}),Ie;default:return!0}case r.W5.EQ:case r.W5.EQ_FOR_SINGLE:switch(me){case r.Cz.USERS.value:if(s().isEmpty(Y)&&s().isEmpty(de))return!0;var ge=!1;return s().map(de,function(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},De=safeParse(Y||"[]");s().map(De,function(_e){_e.accountId===(ct.id||ct.accountId)&&(ge=!0)})}),ge;case r.Cz.OPTIONS.value:if((D===r.v8.AREA_INPUT_19||D===r.v8.AREA_INPUT_23||D===r.v8.AREA_INPUT_24)&&de){if(!Y)return!!Y;var Re=safeParse(Y||"{}"),Pe=Re.code,ke=de.map(function(ct){return safeParse(ct,"{}").id});return s().includes(ke,Pe)}else if(D===r.v8.GROUP_PICKER){if(s().isEmpty(Y)&&s().isEmpty(de))return!0;var We=!1;return s().map(de,function(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},De=safeParse(Y||"[]");s().map(De,function(_e){(ct.departmentId||ct.id)===_e.departmentId&&(We=!0)})}),We}else if(D===r.v8.ORG_ROLE){if(s().isEmpty(Y)&&s().isEmpty(de))return!0;var Ve=!1;return s().map(de,function(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},De=safeParse(Y||"[]");s().map(De,function(_e){(ct.organizeId||ct.id)===_e.organizeId&&(Ve=!0)})}),Ve}else{if(D===r.v8.SCORE)return s().includes(de,Y.toString());if([r.v8.OPTIONS_10,r.v8.OPTIONS_11,r.v8.OPTIONS_9].includes(D)){if(s().isEmpty(Y)&&s().isEmpty(de))return!0;if(D===r.v8.OPTIONS_10){var it=!1;return safeParse(Y||"[]").forEach(function(ct){s().includes(de,ct)&&(it=!0)}),it}else return de.includes(safeParse(Y||"[]")[0])}else return Y?s().includes(de,Y):!!Y}case r.Cz.NUMBER.value:return A(Y)&&A(Ce)?!0:parseFloat(Ce)===parseFloat(Y);case r.Cz.TEXT.value:if(A(Y)&&s().isEmpty(de))return!0;var Ge=!1;return s().map(de,function(ct){ct===Y&&(Ge=!0)}),Ge;case r.Cz.BOOL.value:return Y==="1";case r.Cz.RELATE_RECORD.value:case r.Cz.CASCADER.value:var pt=!1;return s().map(de,function(ct){var De=se.length>0?ct||{}:safeParse(ct||"{}"),_e=s().isArray(Y)?Y:safeParse(Y||"[]","array");s().map(_e,function(Le){var rt=se.length>0?De.sid:De.id;rt===Le.sid&&(pt=!0)})}),pt;default:return!0}case r.W5.START:switch(me){case r.Cz.TEXT.value:var ot=!1;return s().map(de,function(ct){Y.startsWith(ct)&&(ot=!0)}),ot;default:return!0}case r.W5.N_START:switch(me){case r.Cz.TEXT.value:var vt=!0;return s().map(de,function(ct){Y.startsWith(ct)&&(vt=!1)}),vt;default:return!0}case r.W5.END:switch(me){case r.Cz.TEXT.value:var At=!1;return s().map(de,function(ct){Y.endsWith(ct)&&(At=!0)}),At;default:return!0}case r.W5.N_END:switch(me){case r.Cz.TEXT.value:var At=!0;return s().map(de,function(De){Y.endsWith(De)&&(At=!1)}),At;default:return!0}case r.W5.NCONTAIN:switch(me){case r.Cz.TEXT.value:var yt=!0;return s().map(de,function(ct){Y.indexOf(ct)>=0&&(yt=!1)}),yt;default:return!0}case r.W5.NE:case r.W5.NE_FOR_SINGLE:switch(me){case r.Cz.USERS.value:if(s().isEmpty(Y)&&s().isEmpty(de))return!1;var st=!0;return s().map(de,function(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},De=safeParse(Y||"[]");s().map(De,function(_e){_e.accountId===(ct.id||ct.accountId)&&(st=!1)})}),st;case r.Cz.OPTIONS.value:if((D===r.v8.AREA_INPUT_19||D===r.v8.AREA_INPUT_23||D===r.v8.AREA_INPUT_24)&&de){if(!Y)return!!Y;var St=safeParse(Y||"{}"),Qe=St.code,Xe=de.map(function(ct){return safeParse(ct,"{}").id});return!s().includes(Xe,Qe)}else if(D===r.v8.GROUP_PICKER){if(s().isEmpty(Y)&&s().isEmpty(de))return!1;var $e=!0;return s().map(de,function(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},De=safeParse(Y||"[]");s().map(De,function(_e){(ct.departmentId||ct.id)===_e.departmentId&&($e=!1)})}),$e}else if(D===r.v8.ORG_ROLE){if(s().isEmpty(Y)&&s().isEmpty(de))return!1;var Ke=!0;return s().map(de,function(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},De=safeParse(Y||"[]");s().map(De,function(_e){(ct.organizeId||ct.id)===_e.organizeId&&(Ke=!1)})}),Ke}else{if(D===r.v8.SCORE)return!s().includes(de,Y.toString());if([r.v8.OPTIONS_10,r.v8.OPTIONS_11,r.v8.OPTIONS_9].includes(D)){if(s().isEmpty(Y)&&s().isEmpty(de))return!1;if(D===r.v8.OPTIONS_10){var Ue=!0;return safeParse(Y||"[]").forEach(function(ct){s().includes(de,ct)&&(Ue=!1)}),Ue}else return!de.includes(safeParse(Y||"[]")[0])}else return Y?!s().includes(de,Y):!Y}case r.Cz.NUMBER.value:return A(Y)&&A(Ce)?!1:parseFloat(Ce||0)!==parseFloat(Y||0);case r.Cz.TEXT.value:if(A(Y)&&s().isEmpty(de))return!1;var He=!0;return s().map(de,function(ct){ct===Y&&(He=!1)}),He;case r.Cz.BOOL.value:return Y!=="1";case r.Cz.RELATE_RECORD.value:case r.Cz.CASCADER.value:var ze=!0;return s().map(de,function(ct){var De={};De=se.length>0?ct||{}:safeParse(ct||"{}");var _e=s().isArray(Y)?Y:safeParse(Y||"[]","array");s().map(_e,function(Le){var rt=se.length>0?De.sid:De.id;rt===Le.sid&&(ze=!1)})}),ze;default:return!0}case r.W5.ISNULL:switch(me){case r.Cz.DATE.value:case r.Cz.TIME.value:case r.Cz.TEXT.value:case r.Cz.NUMBER.value:return!Y;case r.Cz.OPTIONS.value:return(D===r.v8.AREA_INPUT_19||D===r.v8.AREA_INPUT_23||D===r.v8.AREA_INPUT_24)&&de?!safeParse(Y||"{}").code:D===r.v8.SCORE?!Y:safeParse(Y||"[]").length<=0;case r.Cz.BOOL.value:if(!Y)return!Y;if(D===r.v8.ATTACHMENT){var gt=safeParse(Y);return s().isArray(gt)?gt.length<=0:gt.attachments.length<=0&&gt.knowledgeAtts.length<=0&&gt.attachmentData.length<=0}else if(D===r.v8.RELATION)return safeParse(Y).length<=0;return!Y;case r.Cz.USERS.value:case r.Cz.CASCADER.value:return Y?safeParse(Y).length<=0:!Y;case r.Cz.RELATE_RECORD.value:return s().includes(["2","5","6"],be)?s().isArray(Y)?Y.length===0:Y?Y==="0":!Y:Y?safeParse(Y).length<=0||typeof Y=="string"&&Y.startsWith("deleteRowIds")||Y==="0":!Y;case r.Cz.SUBLIST.value:return Be=ne.store,we=Be&&Be.getState(),we&&we.rows&&!we.baseLoading?(0,j.CD)(we.rows).length<=0:Y==="0"||!Y;default:return!0}case r.W5.HASVALUE:switch(me){case r.Cz.DATE.value:case r.Cz.TIME.value:case r.Cz.TEXT.value:case r.Cz.NUMBER.value:return!!Y;case r.Cz.OPTIONS.value:return(D===r.v8.AREA_INPUT_19||D===r.v8.AREA_INPUT_23||D===r.v8.AREA_INPUT_24)&&de?safeParse(Y||"{}").code:D===r.v8.SCORE?!!Y:safeParse(Y||"[]").length>0;case r.Cz.BOOL.value:if(!Y)return!!Y;if(D===r.v8.ATTACHMENT){var Et=safeParse(Y);return s().isArray(Et)?Et.length>0:!(Et.attachments.length<=0&&Et.knowledgeAtts.length<=0&&Et.attachmentData.length<=0)}else if(D===r.v8.RELATION)return safeParse(Y).length>0;return!!Y;case r.Cz.USERS.value:case r.Cz.CASCADER.value:return Y?safeParse(Y).length>0:!!Y;case r.Cz.RELATE_RECORD.value:return s().includes(["2","5","6"],be)?s().isArray(Y)?Y.length!==0:Y?Y!=="0":!!Y:Y?safeParse(Y).length>0:!!Y;case r.Cz.SUBLIST.value:return Be=ne.store,we=Be&&Be.getState(),we&&we.rows&&!we.baseLoading?(0,j.CD)(we.rows).length>0:Number(Y)>0;default:return!0}case r.W5.BETWEEN:case r.W5.DATE_BETWEEN:switch(me){case r.Cz.NUMBER.value:return A(Y)?!1:parseFloat(Y)<=parseFloat(m.maxValue||0)&&parseFloat(Y)>=parseFloat(m.minValue||0);case r.Cz.DATE.value:return Y?d()(Y).isBetween(d()(m.minValue).format(he),d()(m.maxValue).format(he),fe):!1;case r.Cz.TIME.value:return Y?d()(Y,he).isBetween(d()(m.minValue,he).format("YYYY-MM-DD "+he),d()(m.maxValue,he).format("YYYY-MM-DD "+he),fe):!1;case r.Cz.OPTIONS.value:if((D===r.v8.AREA_INPUT_19||D===r.v8.AREA_INPUT_23||D===r.v8.AREA_INPUT_24)&&de){if(!Y)return!!Y;var ft=safeParse(Y||"{}"),qe=ft.code,nt=de.map(function(ct){return safeParse(ct,"{}").id});return s().includes(nt,qe)}default:return!0}case r.W5.NBETWEEN:case r.W5.DATE_NBETWEEN:switch(me){case r.Cz.NUMBER.value:return A(Y)?!0:parseFloat(Y)>parseFloat(m.maxValue||0)||parseFloat(Y)<parseFloat(m.minValue||0);case r.Cz.DATE.value:return Y?!d()(Y).isBetween(d()(m.minValue).format(he),d()(m.maxValue).format(he),fe):!1;case r.Cz.TIME.value:return Y?!d()(Y,he).isBetween(d()(m.minValue,he).format("YYYY-MM-DD "+he),d()(m.maxValue,he).format("YYYY-MM-DD "+he),fe):!1;case r.Cz.OPTIONS.value:if((D===r.v8.AREA_INPUT_19||D===r.v8.AREA_INPUT_23||D===r.v8.AREA_INPUT_24)&&de){if(!Y)return!!Y;var Ze=safeParse(Y||"{}"),et=Ze.code,ut=de.map(function(ct){return safeParse(ct,"{}").id});return!s().includes(ut,et)}default:return!0}case r.W5.GT:case r.W5.DATE_GT:switch(me){case r.Cz.NUMBER.value:return A(Y)||A(Ce)?!1:parseFloat(Y)>parseFloat(Ce);case r.Cz.DATE.value:var xt=ee(m,Ce,!1,xe.type);return!Y||se.length&&!Ce?!1:d()(Y).isAfter(xt,fe);case r.Cz.TIME.value:return!Y||se.length&&!Ce?!1:d()(Y,he).isAfter(c(Ce,he),fe);default:return!0}case r.W5.GTE:case r.W5.DATE_GTE:switch(me){case r.Cz.NUMBER.value:return A(Y)||A(Ce)?!1:parseFloat(Y)>=parseFloat(Ce);case r.Cz.DATE.value:var wt=ee(m,Ce,!1,xe.type);return!Y||se.length&&!Ce?!1:d()(Y).isSameOrAfter(wt,fe);case r.Cz.TIME.value:return!Y||se.length&&!Ce?!1:d()(Y,he).isSameOrAfter(c(Ce,he),fe);default:return!0}case r.W5.LT:case r.W5.DATE_LT:switch(me){case r.Cz.NUMBER.value:return A(Y)||A(Ce)?!1:parseFloat(Y)<parseFloat(Ce);case r.Cz.DATE.value:var kt=ee(m,Ce,!0,xe.type);return!Y||se.length&&!Ce?!1:d()(Y).isBefore(kt,fe);case r.Cz.TIME.value:return!Y||se.length&&!Ce?!1:d()(Y,he).isBefore(c(Ce,he),fe);default:return!0}case r.W5.LTE:case r.W5.DATE_LTE:switch(me){case r.Cz.NUMBER.value:return A(Y)||A(Ce)?!1:parseFloat(Y)<=parseFloat(Ce);case r.Cz.DATE.value:var Rt=ee(m,Ce,!1,xe.type);return!Y||se.length&&!Ce?!1:d()(Y).isSameOrBefore(Rt,fe);case r.Cz.TIME.value:return!Y||se.length&&!Ce?!1:d()(Y,he).isSameOrBefore(c(Ce,he),fe);default:return!0}case r.W5.DATEENUM:case r.W5.DATE_EQ:switch(me){case r.Cz.DATE.value:if(!Y||se.length&&!Ce)return!1;var jt=ee(m,Ce,!0,xe.type),fn=s().includes(m.values||[],"today");return ae===10?(fn?d()(Y).isSameOrBefore(d()(),"day"):d()(Y).isBefore(d()(),"day"))&&d()(Y).isSameOrAfter(jt,"day"):ae===11?(fn?d()(Y).isSameOrAfter(d()(),"day"):d()(Y).isAfter(d()(),"day"))&&d()(Y).isSameOrBefore(jt,"day"):s().includes([4,5,6,7,8,9,12,13,14,15,16,17],ae)&&!se.length?k(ae,Y,!0):d()(Y).isSame(jt,fe);case r.Cz.TIME.value:return!Y||se.length&&!Ce?!1:d()(Y,he).isSame(c(Ce,he),fe);default:return!0}case r.W5.NDATEENUM:case r.W5.DATE_NE:switch(me){case r.Cz.DATE.value:if(!Y||se.length&&!Ce)return!1;var Mt=ee(m,Ce,!0,xe.type),sn=s().includes(m.values||[],"today");return ae===10?(sn?d()(Y).isAfter(d()(),"day"):d()(Y).isSameOrAfter(d()(),"day"))||d()(Y).isBefore(Mt,"day"):ae===11?(sn?d()(Y).isBefore(d()(),"day"):d()(Y).isSameOrBefore(d()(),"day"))||d()(Y).isAfter(Mt,"day"):s().includes([4,5,6,7,8,9,12,13,14,15,16,17],ae)&&!se.length?k(ae,Y,!1):!d()(Y).isSame(Mt,fe);case r.Cz.TIME.value:return!Y||se.length&&!Ce?!1:!d()(Y,he).isSame(c(Ce,he),fe);default:return!0}case r.W5.RCEQ:switch(me){case r.Cz.RELATE_RECORD.value:case r.Cz.CASCADER.value:var on=!1;return s().map(de,function(ct){var De=se.length>0?ct||{}:safeParse(ct||"{}"),_e=s().isArray(Y)?Y:safeParse(Y||"[]","array");s().map(_e,function(Le){var rt=se.length>0?De.sid:De.id;rt===Le.sid&&(on=!0)})}),on;default:return!0}case r.W5.RCNE:switch(me){case r.Cz.RELATE_RECORD.value:case r.Cz.CASCADER.value:var en=!0;return s().map(de,function(ct){var De={};De=se.length>0?ct||{}:safeParse(ct||"{}");var _e=s().isArray(Y)?Y:safeParse(Y||"[]","array");s().map(_e,function(Le){var rt=se.length>0?De.sid:De.id;rt===Le.sid&&(en=!1)})}),en;default:return!0}case r.W5.ARREQ:switch(me){case r.Cz.USERS.value:return s().isEmpty(Y)&&s().isEmpty(de)?!0:s().isEqual(de.map(function(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ct.id||ct.accountId}).sort(),safeParse(Y||"[]").map(function(ct){return ct.accountId}).sort());case r.Cz.OPTIONS.value:if(D===r.v8.GROUP_PICKER)return s().isEmpty(Y)&&s().isEmpty(de)?!0:s().isEqual(de.map(function(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ct.id||ct.departmentId}).sort(),safeParse(Y||"[]").map(function(ct){return ct.departmentId}).sort());if(D===r.v8.ORG_ROLE)return s().isEmpty(Y)&&s().isEmpty(de)?!0:s().isEqual(de.map(function(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ct.id||ct.organizeId}).sort(),safeParse(Y||"[]").map(function(ct){return ct.organizeId}).sort());if([r.v8.OPTIONS_10,r.v8.OPTIONS_11,r.v8.OPTIONS_9].includes(D))return s().isEmpty(Y)&&s().isEmpty(de)?!0:s().isEqual(safeParse(Y||"[]").sort(),de.sort());case r.Cz.RELATE_RECORD.value:return s().isEmpty(Y)&&s().isEmpty(de)?!0:s().isEqual(de.map(function(ct){return se.length>0?s().get(ct,"sid"):s().get(safeParse(ct||"{}"),"id")}).sort(),safeParse(Y||"[]","array").map(function(ct){return ct.sid}).sort());default:return!0}case r.W5.ARRNE:switch(me){case r.Cz.USERS.value:return s().isEmpty(Y)&&s().isEmpty(de)?!1:!s().isEqual(de.map(function(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ct.id||ct.accountId}).sort(),safeParse(Y||"[]","array").map(function(ct){return ct.accountId}).sort());case r.Cz.OPTIONS.value:if(D===r.v8.GROUP_PICKER)return s().isEmpty(Y)&&s().isEmpty(de)?!1:!s().isEqual(de.map(function(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ct.id||ct.departmentId}).sort(),safeParse(Y||"[]","array").map(function(ct){return ct.departmentId}).sort());if(D===r.v8.ORG_ROLE)return s().isEmpty(Y)&&s().isEmpty(de)?!1:!s().isEqual(de.map(function(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ct.id||ct.organizeId}).sort(),safeParse(Y||"[]","array").map(function(ct){return ct.organizeId}).sort());if([r.v8.OPTIONS_10,r.v8.OPTIONS_11,r.v8.OPTIONS_9].includes(D))return s().isEmpty(Y)&&s().isEmpty(de)?!1:!s().isEqual(safeParse(Y||"[]","array").sort(),de.sort());case r.Cz.RELATE_RECORD.value:return s().isEmpty(Y)&&s().isEmpty(de)?!1:!s().isEqual(de.map(function(ct){return se.length>0?s().get(ct,"sid"):s().get(safeParse(ct||"{}"),"id")}).sort(),safeParse(Y||"[]","array").map(function(ct){return ct.sid}).sort());default:return!0}case r.W5.ALLCONTAIN:switch(me){case r.Cz.USERS.value:if(s().isEmpty(Y)&&s().isEmpty(de))return!1;var $t=de.map(function(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ct.id||ct.accountId}),an=safeParse(Y||"[]","array").map(function(ct){return ct.accountId});return s().every($t,function(ct){return s().includes(an,ct)});case r.Cz.OPTIONS.value:if(D===r.v8.GROUP_PICKER){if(s().isEmpty(Y)&&s().isEmpty(de))return!1;var tn=de.map(function(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ct.id||ct.departmentId}),mt=safeParse(Y||"[]","array").map(function(ct){return ct.departmentId});return s().every(tn,function(ct){return s().includes(mt,ct)})}else if(D===r.v8.ORG_ROLE){if(s().isEmpty(Y)&&s().isEmpty(de))return!1;var Lt=de.map(function(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ct.id||ct.organizeId}),zt=safeParse(Y||"[]","array").map(function(ct){return ct.organizeId});return s().every(Lt,function(ct){return s().includes(zt,ct)})}else if(D===r.v8.OPTIONS_10)return s().isEmpty(Y)&&s().isEmpty(de)?!1:s().every(de,function(ct){return s().includes(safeParse(Y||"[]","array"),ct)});case r.Cz.RELATE_RECORD.value:if(s().isEmpty(Y)&&s().isEmpty(de)||s().isEmpty(Y)||s().isEmpty(de))return!1;var Zt=de.map(function(ct){return se.length>0?s().get(ct,"sid"):s().get(safeParse(ct||"{}"),"id")}),Nt=safeParse(Y||"[]","array").map(function(ct){return ct.sid});return s().every(Zt,function(ct){return s().includes(Nt,ct)});default:return!0}case r.W5.TEXT_ALLCONTAIN:return de.every(function(ct){return Y.includes(ct)});default:return!0}}catch(ct){console.log(ct)}},ie=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=m.dynamicSource&&m.dynamicSource.length>0;return v?[m.controlId].concat((0,te.Z)((m.dynamicSource||[]).map(function(W){return W.cid}))):[m.controlId]},le=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(m.groupFilters||[]).reduce(function(v,W){return v.concat(ie(W))},[])},E=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return L()(m).reduce(function(v){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return v.concat(s().flatten(W))},[])},w=function(m,v,W,P){return v?m[v-1].spliceType===1?P&&W:P||W:W},K=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],W=arguments[2],P=arguments[3],u=!1,l={},T={},G=m.filters||[[]];P&&(G=G.filter(function(M){var se=le(M);return s().some(se,function(ae){var ne=s().find(v,function(de){return de.controlId===ae});return W&&ae==="rowid"||s().includes(["currenttime"],ae)||ne&&(0,f.kM)(ne,P).visible&!ne.hidden})})),G.forEach(function(M,se){if(l[se]||(l[se]=[]),T[se]||(T[se]=[]),M.groupFilters&&M.groupFilters.length){var ae=!0;M.groupFilters.forEach(function(ne,de){var Ce=v.find(function(Ee){return Ee.controlId===ne.controlId});if(Ce&&!(0,H.gj)(Ce,ne)){var he=re(ne,Ce,v,W);ae=w(M.groupFilters,de,he,ae);var fe=ie(ne);he?(l[se][de]=[],T[se][de]=fe):(l[se][de]=fe,T[se][de]=[])}}),u=w(G,se,ae,u)}});var D=G.map(function(M){return le(M)});return u?(T=D,l=[]):(T=[],l=D),{isAvailable:u,filterControlIds:E(l),availableControlIds:E(T)}},N=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],W=arguments[2],P=arguments[3],u=[],l=B(m,v,W);return l&&l.length>0&&l.map(function(T){T.ruleItems.map(function(G){if(G.type===6&&T.checkType!==2){var D=K(T,v,W,P),M=D.isAvailable;M&&u.push(G.message)}})}),u},F=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return v.map(function(W){var P=[],u=(W||"").split(":").reverse(),l=(0,g.Z)(u,3),T=l[0],G=l[1],D=l[2];return m.map(function(M){M.ruleId===G&&s().find(s().get(M,"ruleItems")||[],function(se){return se.type===6})&&s().get(M,"ruleItems").map(function(se){var ae=(s().get(se,"controls")||[]).map(function(de){return de.controlId}),ne=ae.length>0?ae:(M.filters||[]).map(function(de){return le(de)});ne.map(function(de){P.push({controlId:de,errorMessage:se.message,ruleId:G,errorType:V.GK.RULE_ERROR,showError:!0})})})}),{rowId:T,controlId:D,errorInfo:P}}).filter(function(W){return!s().isEmpty(W.errorInfo)})},h=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],W=arguments[2],P=!1,u=B(m,v,W);return u&&u.length>0&&u.forEach(function(l){P||l.ruleItems.map(function(T){if(T.type===7){var G=K(l,v,W),D=G.isAvailable;D&&(P=!0)}})}),P},z=function(m,v,W){return m.substring(0,v)+W+m.substring(v+1)},X=function(m){var v=m.attrs,W=v===void 0?[]:v,P=m.it,u=m.checkRuleValidator,l=m.item,T=l===void 0?{}:l,G=s().includes([29,34],T.type),D=P.fieldPermission||"111",M=P.required||!1,se=P.disabled||!1;if(s().includes(W,2)?(D=z(D,0,"0"),G&&s().includes(T.showControls||[],P.controlId)&&(T.showControls=(T.showControls||[]).filter(function(fe){return fe!==P.controlId}))):s().includes(W,1)&&(D=z(D,0,"1")),s().includes(W,4))D=z(D,1,"0");else if(s().includes(W,5)){M=!0,D=z(D,1,"1");var ae=(0,U.U_)({item:(0,ce.default)({},P,{required:M,fieldPermission:D})}),ne=ae.errorText;T.type!==34&&u(P.controlId,V.GK.RULE_REQUIRED,ne)}else if(s().includes(W,3)){D=z(D,1,"1");var de=(0,U.U_)({item:(0,ce.default)({},P,{fieldPermission:D})}),Ce=de.errorType,he=de.errorText;u(P.controlId,Ce,he)}s().includes(W,8)&&(se=!1),P.fieldPermission=D,P.required=M,P.disabled=se},B=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],W=arguments[2],P=[];return m.map(function(u){if(!u.disabled){var l=[];(u.filters||[]).map(function(T){s().some(T.groupFilters||[],function(G){return s().get(G,"dynamicSource[0].cid")==="rowid"?W:s().findIndex(v,function(D){return D.controlId===G.controlId})>-1})&&(l=l.concat(T))}),l.length>0&&P.push((0,ce.default)({},u,{filters:l}))}}),P},x=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};m.map(function(W){var P=W.controlId,u=P===void 0?"":P,l=W.childControlIds,T=l===void 0?[]:l;T.length?T.map(function(G){return v(G,V.GK.RULE_REQUIRED,"")}):v(u,V.GK.RULE_REQUIRED,"")})},Q=function(m){var v=m.rules,W=v===void 0?[]:v,P=m.data,u=P===void 0?[]:P,l=m.recordId,T=m.checkRuleValidator,G=T===void 0?function(){}:T,D=m.from,M=m.checkAllUpdate,se=M===void 0?!1:M,ae=m.updateControlIds,ne=ae===void 0?[]:ae,de=m.ignoreHideControl,Ce=de===void 0?!1:de;if(!W.length)return u;var he=u.map(function(oe){return(0,ce.default)({},oe,oe.defaultState,{relationControls:(oe.relationControls||[]).map(function(ve){return(0,ce.default)({},ve,ve.defaultState)})})});Ce&&(he=he.filter(function(oe){return(0,f.kM)(oe,D).visible}));var fe={parent:{},child:{},errorMsg:{}};function Ee(oe,ve,ue){fe[oe][ve]?fe[oe][ve].push(ue):fe[oe][ve]=[ue]}if(W.length>0){var Y=B(W,he,l);Y&&Y.length>0&&(Y.map(function(oe){oe.ruleItems.map(function(ve){var ue=ve.type,pe=ve.controls,Se=pe===void 0?[]:pe,ye=K(oe,he,l),J=ye.isAvailable,me=ue;me===1?me=J?1:2:me===2&&(me=J?2:1),me===5&&!J&&x(Se,G),!(!s().includes([1,2],me)&&!J)&&(s().includes([7,8],me)?he.map(function(be){Ee("parent",be.controlId,me)}):s().includes([6],me)||Se.map(function(be){var xe=be.controlId,Ae=xe===void 0?"":xe,Ne=be.childControlIds,Me=Ne===void 0?[]:Ne;Me.length?Me.map(function(Fe){return Ee("child",Ae+"-"+Fe,me)}):Ee("parent",Ae,me)}))})}),he.forEach(function(oe){oe.relationControls.forEach(function(ve){var ue=oe.controlId+"-"+ve.controlId;(fe.child||{})[ue]&&X({attrs:fe.child[ue],it:ve,checkRuleValidator:G,item:oe})}),(fe.parent||{})[oe.controlId]&&X({attrs:fe.parent[oe.controlId],it:oe,checkRuleValidator:G})}),Y.map(function(oe){oe.checkType!==2&&oe.ruleItems.map(function(ve){var ue=ve.type,pe=ve.message,Se=ve.controls,ye=Se===void 0?[]:Se,J=K(oe,he,l,D),me=J.filterControlIds,be=me===void 0?[]:me,xe=J.availableControlIds,Ae=xe===void 0?[]:xe,Ne=J.isAvailable;if(s().includes([6],ue)){var Me=ye.map(function(Be){return Be.controlId}),Fe=oe.type===1&&Me.length>0?Me:be;(oe.type===1?Fe:be).map(function(Be){return G(Be,V.GK.RULE_ERROR,"",oe)}),Ne&&Ae.map(function(Be){if(!fe.errorMsg[Be]){var we=function(ge,Re){if(Ee("errorMsg",ge,Re),s().find(he,function(ke){return ke.controlId===ge})){var Pe=fe.errorMsg[ge]||[];G(ge,V.GK.RULE_ERROR,Pe[0],oe)}};(se||ne.length>0&&(oe.type===1||s().includes(ne,Be)))&&(oe.type===1&&Me.length>0?Me.map(function(Ie){return we(Ie,pe)}):we(Be,pe))}})}})}))}return he}},24607:(lt,Te,t)=>{"use strict";t.d(Te,{AY:()=>B,Ci:()=>Q,Ec:()=>P,He:()=>de,J:()=>W,MJ:()=>ie,Mn:()=>G,N9:()=>x,Nx:()=>F,WB:()=>Ce,X3:()=>M,ZJ:()=>l,cX:()=>E,du:()=>u,fS:()=>m,gW:()=>T,hC:()=>v,hU:()=>i,hj:()=>ne,jz:()=>K,kM:()=>h,kn:()=>se,uH:()=>z,v0:()=>D,xI:()=>N,yT:()=>ae});var ce=t(47518),g=t.n(ce),p=t(72444),L=t(85315),te=t(52945),R=t.n(te),y=t(63239),a=t.n(y),r=t(88239),o=t(88902),d=t.n(o);if(!/^(1887|7596|7798)$/.test(t.j))var Z=t(27738);if(!/^(1887|7596|7798)$/.test(t.j))var H=t(83298);if(!/^(1887|7596|7798)$/.test(t.j))var U=t(26358);if(!/^(1887|7596|7798)$/.test(t.j))var f=t(6917);if(!/^(1887|7596|7798)$/.test(t.j))var V=t(87600);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(15577);if(!/^(1887|7596|7798)$/.test(t.j))var O=t(64250);if(!/^(1887|7596|7798)$/.test(t.j))var n=t(94914);if(!/^(1887|7596|7798)$/.test(t.j))var s=t(89499);if(!/^(1887|7596|7798)$/.test(t.j))var j=t(15742);if(!/^(1887|7596|7798)$/.test(t.j))var A=t(62232);var S=t(96486),I=t.n(S),c=t(30381),q=t.n(c);if(!/^(1887|7596|7798)$/.test(t.j))var b=t(75053);if(!/^(1887|7596|7798)$/.test(t.j))var k=t(26637);if(!/^(1887|7596|7798)$/.test(t.j))var ee=t(1694);if(!/^(1887|7596|7798)$/.test(t.j))var re=t(86674);var ie=function(fe){switch(fe){case 2:return"TEXTAREA";case 3:return"MOBILE_PHONE";case 4:return"TEL_PHONE";case 5:return"EMAIL";case 6:case 8:return"NUMBER";case 7:return"ID";case 9:return"RADIO";case 10:return"CHECKBOX";case 11:case 44:return"DROP_DOWN";case 14:return"ATTACHMENT";case 15:case 16:return"DATE";case 17:case 18:return"DATE_RANGE";case 19:case 23:case 24:return"AREA";case 21:return"RELATION";case 22:return"SplitLine";case 25:case 31:case 32:case 33:return"READONLY";case 26:return"USER_SELECT";case 27:return"DEPARTMENT_SELECT";case 28:return"RANGE";case 29:return"RELATE_RECORD";case 30:return"SHEET_FIELD";case 34:return"SUBLIST";case 35:return"Cascader";case 36:return"CHECK";case 37:return"SUBTOTAL";case 38:return"DATECALC";case 40:return"LOCATION";case 41:case 10010:return"RICH_TEXT";case 42:return"SIGNATURE";case 43:return"OCR";case 45:return"Embed";case 46:return"Time";case 47:return"BarCode";case 48:return"OrgRole";case 49:return"Search";case 50:return"Search";case 51:return"RelationSearch";case 52:return"Section";default:return"CustomWidgets"}},le={telPhoneNumber:/^[+]?((\d){3,4}([ ]|[-]))?((\d){3,9})(([ ]|[-])(\d){1,12})?$/,emailAddress:/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)*\.[\w-]+$/i,idCardNumber:/(^\d{8}(0\d|10|11|12)([0-2]\d|30|31)\d{3}$)|(^\d{6}(18|19|20)\d{2}(0\d|10|11|12)([0-2]\d|30|31)\d{3}(\d|X|x)$)/,passportNumber:/^[a-zA-Z0-9]{5,17}$/,hkPassportNumber:/.*/,twPassportNumber:/.*/},E={isTelPhoneNumber:function(fe){return le.telPhoneNumber.test(fe)},isEmailAddress:function(fe){return le.emailAddress.test(fe)},isIdCardNumber:function(fe){return le.idCardNumber.test(fe)},isPassportNumber:function(fe){return le.passportNumber.test(fe)},isHkPassportNumber:function(fe){return le.hkPassportNumber.test(fe)},isTwPassportNumber:function(fe){return le.twPassportNumber.test(fe)}};function w(he){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Y=Ee.isDraft;return fe=fe.filter(function(oe){return oe.type!==34}),d()(he).map(function(oe){var ve=I().find(fe,function(ue){return ue.controlId===oe});return oe==="rowid"?{controlId:"tempRowId",value:he.rowid}:ve?I().pick(K((0,r.default)({},ve,{value:he[oe]}),{isSubListCopy:he.isCopy,isDraft:Y,isNewRecord:he.rowid&&(he.rowid.startsWith("temp")||he.rowid.startsWith("default"))}),["controlId","value","editType"]):void 0}).filter(function(oe){return oe&&oe.controlId&&!I().isUndefined(oe.value)})}function K(he){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ee=fe.isSubListCopy,Y=fe.isDraft,oe=fe.isNewRecord,ve=fe.needSourceValue,ue=fe.needFullUpdate,pe=fe.hasDefaultRelateRecordTableControls,Se=pe===void 0?[]:pe,ye={controlId:he.controlId,type:he.type,value:he.value,controlName:he.controlName,dot:he.dot};if(I().isUndefined(he.value)&&!he.store)return ye;var J=void 0,me=void 0,be=void 0,xe=void 0,Ae=void 0,Ne=he.type===29&&String(I().get(he,"advancedSetting.showtype"))===String(j.wn.DROPDOWN),Me=he.type===29&&he.enumDefault===1;switch(he.type){case 10:case 11:var Fe=JSON.parse(ye.value||"[]");Fe.forEach(function(Ve,it){(Ve||"").indexOf("add_")>-1&&(Fe[it]=a()({color:"#2196f3",value:Ve.split("add_")[1]}))}),ye.value=a()(Fe);break;case 14:var Be=safeParse(he.value),we=[],Ie=[];if((Ee||Y)&&I().isArray(Be)&&!I().isEmpty(Be)){ye.value=a()(Be.map(function(Ve){return Ve.fileID||Ve.fileId}));break}(Be.attachmentData||[]).forEach(function(Ve){Ve=R()({},Ve,{fileExt:Ve.ext},{isEdit:!0}),Ve.fileId&&!Ve.fileID&&(Ve.fileID=Ve.fileId),Ve.refType||Ve.refId?Ie.push(Ve):we.push(Ve)}),ye.value=a()({attachmentData:[],attachments:(Be.attachments||[]).map(function(Ve){return R()({},Ve,{isEdit:!1})}).concat(we),knowledgeAtts:(Be.knowledgeAtts||[]).map(function(Ve){return R()({},Ve,{isEdit:!1})}).concat(Ie)});break;case 19:case 23:case 24:try{J=JSON.parse(he.value),ye.value=J.code}catch(Ve){}break;case 29:if(I().includes([String(j.wn.LIST),String(j.wn.TAB_TABLE),String(j.wn.TABLE)],he.advancedSetting.showtype)&&he.store)xe=he.store.getState(),oe||I().includes(Se,he.controlId)?ye.value=a()(xe.records.map(function(Ve){return{sid:Ve.rowid}})):!(0,S.isEmpty)(xe.changes)&&he.advancedSetting.showtype===String(j.wn.TABLE)?(ye.editType=9,ye.value=a()(xe.changes.addedRecordIds.map(function(Ve){return{editType:1,rowid:Ve}}).concat(xe.changes.deletedRecordIds.map(function(Ve){return{editType:2,rowid:Ve}})))):ye.value=void 0;else if(J=safeParse(he.value),be=!!I().find(J,{isFromDefault:!0}),I().isArray(J))if(Y||oe||ue||(0,C.Q9)()&&I().includes(Se,he.controlId)||Ne||Me||be)ye.value=I().isArray(J)?a()(J.map(function(Ve){return{name:Ve.name,sid:Ve.sid,sourcevalue:ve&&Ve.sourcevalue}}).filter(function(Ve){return!I().isEmpty(Ve.sid)&&(0,Z.Z)(Ve.sid)})):"";else{ye.editType=9;var ge=J.filter(function(Ve){return Ve.isNew}).map(function(Ve){return Ve.sid}),Re=(I().get(J,"0.deletedIds")||[]).filter(function(Ve){return!I().find(J,function(it){return it.sid===Ve})});ye.value=a()(ge.map(function(Ve){return{editType:1,rowid:Ve}}).concat(Re.map(function(Ve){return{editType:2,rowid:Ve}})))}else if(typeof he.value=="string"&&he.value.startsWith("deleteRowIds")&&he.value!=="deleteRowIds: all"){var Pe=[];try{Pe=he.value.replace("deleteRowIds: ","").split(",").filter(I().identity)}catch(Ve){ye.value=void 0}ye.editType=9,ye.value=a()(Pe.map(function(Ve){return{editType:2,rowid:Ve}}))}else ye.value=void 0;break;case 34:if(xe=he.store.getState(),me=(0,S.get)(xe,"base.controls")||[],I().isEmpty(me)&&console.log("childTableControls is empty"),me=me.filter(function(Ve){return!I().includes(I().get(window,"shareState.isPublicForm")?[48]:[],Ve.type)}).filter(function(Ve){return Y?Ve.controlId!=="ownerid":!0}),(!ye.value||I().isNumber(Number(ye.value))&&!I().isNaN(Number(ye.value)))&&!I().isEmpty((0,s.CD)(he.store.getState().rows)))ye.editType=9,oe?ye.value=a()((0,s.CD)(he.store.getState().rows).map(function(Ve){return w(Ve,me||[],{isDraft:Y})})):(Ae=(0,s.CD)(he.store.getState().rows).map(function(Ve){return{editType:0,newOldControl:w(Ve,me||[],{isDraft:Y})}}),I().isEmpty(Ae)?ye.value="":ye.value=a()([{rowid:"all",editType:2}].concat((0,L.Z)(Ae))));else{if(I().isUndefined(he.value))return ye;if(ye.value.isAdd)ye.value=a()((0,s.CD)(he.value.rows).map(function(Ve){return w(Ve,me||[],{isDraft:Y})})),ye.value==="[]"&&(ye.value="");else{ye.editType=9;var ke=[];if(I().isEmpty(ye.value.deleted)||(ke=ke.concat(ye.value.deleted.map(function(Ve){return{rowid:Ve,editType:2}}))),I().isEmpty(ye.value.updated)||(ke=ke.concat(ye.value.updated.map(function(Ve){var it=/^(temp|default)/.test(Ve),Ge=I().find(he.value.rows,function(pt){return pt.rowid===Ve});if(Ge)return it?{editType:0,newOldControl:w((0,r.default)({},Ge,{rowid:Ve}),me)}:(Ge&&Ge.updatedControlIds&&(Ge=I().pick(Ge,Ge.updatedControlIds),delete Ge.updatedControlIds),{rowid:Ve,editType:0,newOldControl:w((0,r.default)({},Ge,{rowid:Ve}),me)})}).filter(I().identity))),ye.value=a()((0,s.CD)(ke)),I().isEmpty(ke)&&he&&typeof he.value=="string")try{var We=JSON.parse(he.value);ye.value=a()((0,s.CD)(We).map(function(Ve){return d()(Ve).map(function(it){return{controlId:it,value:Ve[it]}})}))}catch(Ve){}}}break}return ye}function N(he,fe,Ee){var Y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},oe=I().find(he,function(ve){return ve.attribute===1})||{};return Ee&&(oe.sourceControlType=Ee),oe&&fe&&(oe=R()({},oe,{value:fe[oe.controlId]||fe.titleValue})),oe&&(0,H.Z)(oe,Y)||_l("\u672A\u547D\u540D")}function F(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=arguments[1],Ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return fe&&fe.name?fe.name:(I().includes([9,10,11],he.sourceControlType)&&(I().isEmpty(he.options)||he.relationControls.forEach(function(Y){Y.attribute===1&&(Y.options=he.options)})),N(he.relationControls,fe,he.sourceControlType,Ee))}var h=function(fe,Ee){if(!fe)return{};var Y=fe.controlPermissions||"111",oe=fe.fieldPermission||"111",ve={visible:!0,editable:!0};return I().includes([f.BD.NEWRECORD,f.BD.PUBLIC_ADD,f.BD.H5_ADD,f.BD.DRAFT],Ee)?(ve.visible=oe[0]==="1"&&oe[2]==="1"&&Y[2]==="1",ve.editable=oe[1]==="1"):(ve.visible=oe[0]==="1"&&Y[0]==="1",ve.editable=oe[1]==="1"&&Y[1]==="1"),ve},z=function(fe){var Ee=fe.type,Y=fe.value,oe=fe.advancedSetting,ve=oe===void 0?{}:oe,ue=function(xe){return parseFloat(xe.replace(/,/g,""))},pe=ve.min,Se=ve.max,ye=ve.checkrange;if(!Y||ye!=="1")return"";if(Ee===2){var J=(Y||"").length;if(pe&&J<+pe||Se&&J>+Se)return f.GK.TEXT_RANGE}if(!isNaN(Y)&&I().includes([6,8],Ee)&&(pe&&+Y<ue(pe)||Se&&+Y>ue(Se)))return f.GK.NUMBER_RANGE;if(Ee===10){var me=JSON.parse(Y||"[]").length;if(pe&&me<+pe||Se&&me>+Se)return f.GK.MULTI_SELECT_RANGE}return""},X={26:"accountId",27:"departmentId",29:"sid",35:"sid",48:"organizeId"},B=function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Y=arguments[2],oe=(0,U.Gt)(fe)||[],ve=!1;return oe.forEach(function(ue){if(ue.dynamicSource&&ue.dynamicSource.length>0){var pe=I().get(ue.dynamicSource[0]||{},"cid");if(pe==="current-rowid"&&ue.dataType===29&&(ue.values=[Y],ve=!Y),pe==="rowid"){ue.values=Y?[Y]:[];return}if(pe==="currenttime"){ue.dateRange=18;var Se=(0,n.eO)({advancedSetting:{showtype:ue.dataType===46?"9":ue.dataType===15?"6":"3"}}).formatMode;ue.value=q()(new Date).format(Se);return}var ye=I().find(Ee,function(be){return be.controlId===pe});if(ye&&ye.value&&!I().includes([7,8,11,12,31,32],ue.filterType)){if(I().includes([6,8,25,31,37],ye.type)){ue.value=ye.value;return}if(I().includes([2,3,5,7,28,32,33],ye.type)){ue.values=[ye.value];return}if(I().includes([15,16],ye.type)||ye.type===38&&ye.enumDefault===2){if(ue.dateRange=18,ye.value){var J=(0,n.eO)(ye).formatMode;ue.value=q()(ye.value).format(J)}return}if(I().includes([46],ye.type)){ue.dateRange=18;var me=ye.unit==="6"?"HH:mm:ss":"HH:mm";ye.value&&(ue.value=q()(ye.value).year()?q()(q()(ye.value).format(me),me).format("HH:mm:ss"):q()(ye.value,me).format("HH:mm:ss"));return}if(I().includes([9,10,11],ye.type)){ue.values=JSON.parse(ye.value)||[];return}if(I().includes([26,27,35,48],ye.type)){ue.values=JSON.parse(ye.value||"[]").map(function(be){return be[X[ye.type]]});return}if(I().includes([29],ye.type)&&I().get(ye,"advancedSetting.showtype")!==String(j.wn.LIST)){try{typeof ye.value=="string"?ue.values=ye.value.startsWith("deleteRowIds")?[]:safeParse(ye.value||"[]").map(function(be){return be[X[ye.type]]}):I().isObject(ye.value)?ue.values=(I().get(ye,"value.records")||[]).map(function(be){return be.rowid}):ue.values=(ye.data||[]).map(function(be){return be.rowid})}catch(be){}return}}}else I().includes([6,8,25,31,37],ue.dataType)&&I().includes([11,12],ue.filterType)&&(delete ue.value,delete ue.values)}),ve?[]:oe},x=function(fe,Ee,Y){if(!fe||!Y)return Ee;switch(Y.type){case 2:case 41:switch(I().includes([6,31,37],fe.type)&&fe.advancedSetting&&fe.advancedSetting.numshow==="1"&&Ee&&(Ee=(0,C.pc)(parseFloat(Ee),100)),fe.type){case 26:return JSON.parse(Ee||"[]").map(function(xe){return xe.accountId===md.global.Account.accountId?md.global.Account.fullname:xe.name||xe.fullname}).join("\u3001");case 27:return JSON.parse(Ee||"[]").map(function(xe){return xe.departmentName}).join("\u3001");case 48:return JSON.parse(Ee||"[]").map(function(xe){return xe.organizeName}).join("\u3001");case 19:case 23:case 24:return JSON.parse(Ee||"{}").name;case 9:case 10:case 11:var oe=JSON.parse(Ee||"[]");return oe.map(function(xe){var Ae="";try{var Ne=JSON.parse(xe);if((typeof Ne>"u"?"undefined":(0,p.default)(Ne))==="object")return Ne.value;Ae=xe}catch(Fe){Ae=xe}if(Ae.toString().indexOf("add_")>-1)return Ae.split("add_")[1];if(fe.controlId==="wfstatus")return I().get(I().find(b.f4,function(Fe){return Fe.key===Ae&&!Fe.isDeleted}),"value")||"";var Me=I().get(I().find(fe.options||[],function(Fe){return Fe.key===Ae&&!Fe.isDeleted}),"value")||"";return Ae.toString().indexOf("other:")>-1&&I().replace(Ae,"other:","")||Me}).join("\u3001");case 15:case 16:var ve=(0,n.VL)(fe);return Ee?q()(Ee).format(ve):"";case 29:var ue=safeParse(Ee||"[]","array")[0]||{},pe=void 0;return I().get(fe,"relationControls.length")?pe=I().find(fe.relationControls,function(xe){return xe.attribute===1})||{}:I().get(window,"worksheetControlsCache."+fe.dataSource)&&(pe=I().find(I().get(window,"worksheetControlsCache."+fe.dataSource)||[],function(xe){return xe.attribute===1})||{}),pe?(0,H.Z)((0,r.default)({},pe,{value:ue.name})):ue.name;case 31:var Se=fe.dot||0,ye=Number(Ee||0).toFixed(Se);return I().get(fe,"advancedSetting.dotformat")==="1"?(0,C.FY)(ye):ye;case 35:return safeParse(Ee||"[]","array").map(function(xe){return xe.name}).join();case 36:if(I().includes(["1","2"],fe.advancedSetting.showtype)){var J=(0,A.jT)(fe,{needDefault:!0});return I().get(I().find(J,function(xe){return xe.key===Ee}),"value")||""}return Ee==="1"?"true":"false";case 40:var me=safeParse(Ee||"{}");return I().isEmpty(me)?"":me.title||me.address?[me.title,me.address].filter(function(xe){return xe}).join(" "):_l("\u7ECF\u5EA6\uFF1A%0",me.x)+" "+_l("\u7EAC\u5EA6\uFF1A%0",me.y);case 46:return Ee?q()(Ee,"HH:mm:ss").format(fe.unit==="6"?"HH:mm:ss":"HH:mm"):"";default:return Ee}case 6:case 8:case 28:if((0,V.p1)(fe)){var be=(fe.options||[]).filter(function(xe){return I().includes(JSON.parse(Ee||"[]"),xe.key)});return be.length?be.reduce(function(xe,Ae){return xe+Number(Ae.score||0)},0):""}else return Ee;default:return Ee}},Q=function(fe){return/\+61\d{9}$|\+861[3-9]\d{9}$/.test(fe||"")},i=function(fe,Ee,Y){var oe=parseInt(fe.split(":")[0])*60+parseInt(fe.split(":")[1]),ve=parseInt(Ee.split(":")[0])*60+parseInt(Ee.split(":")[1]);switch(Y){case"isBefore":return oe<ve;case"isSameAndBefore":return oe<=ve;case"isAfter":return oe>ve;case"isSameAndAfter":return oe>=ve}},m=function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ee=arguments[1];switch(Ee){case"userId":return md.global.Account.accountId;case"phone":return md.global.Account.mobilePhone;case"email":return md.global.Account.email;case"ua":return window.navigator.userAgent;case"timestamp":return new Date().getTime();default:return fe[Ee]||""}},v=function(fe){var Ee=fe.data,Y=fe.control,oe=fe.codeInfo,ve=Y.enumDefault,ue=Y.enumDefault2,pe=Y.dataSource,Se=oe.appId,ye=oe.worksheetId,J=oe.viewId,me=oe.recordId;if((ve===1||ve===2&&ue===3)&&!pe)return"";if(pe==="rowid")return me;if(ve===2&&ue===1)return me?location.origin+"/app/"+Se+"/"+ye+"/"+J+"/row/"+me:md.global.Config.WebUrl+"app/"+Se+"/newrecord/"+ye+"/"+J+"/";var be=I().find(Ee,function(Ae){return Ae.controlId===pe});if(!(be||{}).value)return"";if(ve===1){var xe=String(be.value).replace(/[^a-zA-Z0-9@#$%&-=_;:,<>?!\/\^\*\(\)\+\[\]\{\}\|\.\s]/g,"");return(0,C.wz)(xe)<=128?xe:(0,O.s)(xe,128)}return String(be.value).substr(0,300)},W=function(fe,Ee){if(!Ee)return!1;var Y=I().find(fe,function(oe){return oe.controlId===Ee});return!(!Y||Y.type!==3||!h(Y,f.BD.PUBLIC_ADD).editable||!h(Y,f.BD.PUBLIC_ADD).visible||!Y.value)},P=function(fe){var Ee=[],Y="";return/^\[.*\]$/.test(fe)&&safeParse(fe,"array").forEach(function(oe){(oe||"").toString().indexOf("other:")>-1?(Y=I().replace(oe,"other:",""),Ee.push("other")):Ee.push(oe)}),{checkIds:Ee,otherValue:Y}},u=function(fe){return I().includes(f.M,fe.type)||fe.type===2&&(0,C.Q9)()&&(fe.strDefault||"10").split("")[1]==="1"},l=function(fe){var Ee=fe.type,Y=fe.enumDefault,oe=fe.value,ve=fe.advancedSetting,ue=void 0;if(I().includes([26,27],Ee)&&Y===1||Ee===29&&Y===2&&I().includes(["1","2"],ve.showtype)){var pe=(0,s.WO)(oe,fe.count);ue=I().isUndefined(pe)?fe.count:pe}if(Ee===29&&ve.showtype===String(j.wn.TABLE)){var Se=fe.store.getState();ue=Se.loading?fe.value:typeof Se.tableState.countForShow<"u"?Se.tableState.countForShow:Se.tableState.count}if(Ee===14){var ye=JSON.parse(oe||"[]");I().isArray(ye)?ue=ye.length:ue=ye.attachments.length+ye.knowledgeAtts.length+ye.attachmentData.length}if(Ee===34)try{if((typeof oe>"u"?"undefined":(0,p.default)(oe))==="object")ue=oe.num||(0,s.CD)(oe.rows||[]).length;else if(!I().isNaN(parseInt(fe.value,10)))ue=parseInt(fe.value,10);else if(fe.store)try{ue=(0,s.CD)(fe.store.getState().rows).length}catch(J){}ue>1e3&&(ue=1e3)}catch(J){console.log(J)}return ue&&ue!=="0"?"("+ue+")":null},T=function(fe,Ee){var Y=fe.half||fe.type===28&&fe.enumDefault===1||fe.type===29&&fe.enumDefault===1&&parseInt(fe.advancedSetting.showtype,10)===3&&Ee!==f.BD.H5_ADD&&Ee!==f.BD.PUBLIC_ADD;return Y?6:12},G=function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!JSON.parse(I().get(fe,"advancedSetting.userrange")||"[]").length)return!1;var oe={};function ve(ue){var pe="",Se={appointedAccountIds:[1,26],appointedDepartmentIds:[2,27],appointedOrganizeIds:[3,48]};return d()(Se).forEach(function(ye){I().includes(Se[ye],ue.type)&&(pe=ye)}),pe}return JSON.parse(I().get(fe,"advancedSetting.userrange")||"[]").map(function(ue){if(ue.type===4)if(ue.rcid&&ue.rcid!==Y.worksheetId){var pe=I().find(Ee,function(Me){return Me.controlId===ue.rcid})||{},Se=safeParse(pe.value||"[]","array")[0],ye=Se&&JSON.parse(Se.sourcevalue)[ue.cid],J=I().find(pe.relationControls||[],function(Me){return Me.controlId===ue.cid}),me=ye&&safeParse(ye);if(J&&I().isArray(me)){var be=ve(J);oe[be]=I().uniq((oe[be]||[]).concat(me.map(function(Me){return Me[X[J.type]]})))}}else{var xe=I().find(Ee||[],function(Me){return Me.controlId===ue.cid})||I().find(Y.formData||[],function(Me){return Me.controlId===ue.cid});if(xe){var Ae=ve(xe);oe[Ae]=I().uniq((oe[Ae]||[]).concat(JSON.parse(xe.value||"[]").map(function(Me){return Me[X[xe.type]]})))}}else{var Ne=ve(ue);oe[Ne]=I().uniq((oe[Ne]||[]).concat(ue.value))}}),oe};function D(){var he=md.global.Config.IsLocal,fe=window.isWeiXin&&!he&&!window.isWxWork;window.isDingTalk&&!window.dd&&$.getScript("https://g.alicdn.com/dingding/dingtalk-jsapi/2.6.41/dingtalk.open.js"),window.isWeLink&&!window.HWH5&&$.getScript("https://open-doc.welink.huaweicloud.com/docs/jsapi/2.0.4/hwh5-cloudonline.js"),fe&&!window.wx&&$.getScript("https://res2.wx.qq.com/open/js/jweixin-1.6.0.js"),window.isWxWork&&!window.wx&&$.getScript("https://res.wx.qq.com/open/js/jweixin-1.2.0.js"),window.isFeiShu&&!window.h5sdk&&$.getScript("https://lf1-cdn-tos.bytegoofy.com/goofy/lark/op/h5-js-sdk-1.5.19.js")}var M=function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y=arguments[2],oe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,ve=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],ue=[],pe=[],Se=[],ye=Ee.tabposition||"1",J=(0,C.Q9)();if(oe)return{commonData:fe,tabData:[]};fe.filter(function(Ne){return!I().includes(re.c_,Ne.controlId)}).forEach(function(Ne){Ne.type===52?(Ne.child=fe.filter(function(Me){return Me.sectionId===Ne.controlId}),pe.push(Ne)):(0,A.At)(Ne)?pe.push(Ne):(0,A.lS)(Ne)?Se.push(Ne):Ne.sectionId||ue.push(Ne)});function me(){var Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ne.sort(function(Me,Fe){return Me.row-Fe.row})}if(ue=me(ue),pe=me(pe).concat(me(Se)),J||J&&!I().isEmpty(ve)||ye==="2"&&!oe){var be=[{controlId:"detail",controlName:Ee.deftabname||_l("\u8BE6\u60C5"),type:52,sectionId:"",child:ue,advancedSetting:{icon:Ee.tabicon}}],xe=I().every(ue,function(Ne){return!(h(Ne,Y).visible&&!Ne.hidden)});pe=xe?J&&!I().isEmpty(ve)?be.concat(pe):pe:be.concat(pe),ue=[]}if(pe=pe.filter(function(Ne){return Ne.type==52?Ne.child.length:!0}),J){var Ae=function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(I().includes([29,51],Me.type)){var Fe=I().get(Me,"advancedSetting.showtype");return(0,r.default)({},Me,{advancedSetting:(0,r.default)({},Me.advancedSetting,{showtype:Me.type===51&&Fe==="5"?"1":I().includes(["5","6"],Fe)?"2":Fe,icon:Me.type===29&&I().includes(["2","6"],Fe)?"link_record":"Worksheet_query"})})}return Me};pe=pe.map(function(Ne){return(0,r.default)({},Ae(Ne),{child:(Ne.child||[]).map(function(Me){return Ae(Me)})})}),ue=ue.map(function(Ne){return Ae(Ne)}),I().isEmpty(ue)&&I().isEmpty(ve)&&pe.length===1&&(ue=pe[0].child,pe=[])}return{commonData:ue,tabData:pe}},se=function(fe){var Ee=R()({},fe),Y=Ee.type,oe=Ee.advancedSetting||{},ve=oe.valuecolor,ue=ve===void 0?"#333":ve,pe=oe.valuesize,Se=pe===void 0?"0":pe,ye=oe.valuestyle,J=ye===void 0?"0000":ye;return Ee.type===30&&(ue=I().get(Ee,"sourceControl.advancedSetting.valuecolor")||"#333",Se=I().get(Ee,"sourceControl.advancedSetting.valuesize")||"0",J=I().get(Ee,"sourceControl.advancedSetting.valuestyle")||"0000",Y=I().get(Ee,"sourceControl.type")),I().includes(ee.wP,Y)?{type:Y,isTextArea:Ee.type===2&&Ee.enumDefault===1,height:Se!=="0"?(parseInt(Se)-1)*2+40:36,size:k.Az[Se],valueStyle:Ee.value?"color: "+ue+" !important;"+(0,n.RL)(J):""}:{type:Y}},ae=function(fe){var Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y=Ee.showdelete,oe=Ee.allpath,ve=I().isArray(fe)?fe:safeParse(fe||"[]"),ue=0,pe=[];return ve.map(function(Se){if(Se.isDelete)ue+=1;else{var ye=(oe==="1"?(Se.departmentPath||[]).sort(function(J,me){return me.depth-J.depth}).map(function(J){return J.departmentName}):[]).concat([Se.departmentName]);pe.push((0,r.default)({},Se,{departmentName:ye.join("  /  ")}))}}),Y==="1"&&ue&&pe.push({departmentId:"",departmentName:_l("\u5DF2\u5220\u9664"),isDelete:!0,deleteCount:ue}),pe},ne=function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Y=Ee.filter(function(oe){return oe.row===fe.row});return Y.every(function(oe){return I().get(oe,"advancedSetting.hidetitle")==="1"&&(0,A.fc)(oe)})?{displayRow:!0,titlewidth_pc:"0"}:{}},de=function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Ee=0;return g()(fe.reduce(function(Y,oe){return Y[Ee]?Y[Ee].push(oe):Y[Ee]=[oe],oe.spliceType===2&&Ee++,Y},{}))},Ce=function(fe,Ee){return I().includes([26,29],Ee)?safeParse(fe.startsWith("deleteRowIds")?"[]":fe||"[]").map(function(Y){return Y[X[Ee]]}).join(""):fe}},66600:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>U});var ce=t(52262),g=t.n(ce);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(65400);var L=t(67272),te=t.n(L);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(51024);var y=t(12424),a=t(86735),r=t(67294),o=t(71893),d=t(29314),Z=(0,a.Z)([`
  width: 230px;
  border-radius: 4px;
  .btns {
    justify-content: flex-end;
  }
`],[`
  width: 230px;
  border-radius: 4px;
  .btns {
    justify-content: flex-end;
  }
`]),H=o.ZP.div(Z);const U=function(f){var V=f.originalFileName,C=f.isEdit,O=f.setIsEdit,n=f.onSave,s=(0,r.useState)(V),j=(0,y.Z)(s,2),A=j[0],S=j[1],I=(0,r.useRef)(null),c=function(b){setTimeout(function(){I&&I.current&&I.current.resizableTextArea.textArea.select()},0)};return r.createElement(d.Z,{action:["click"],popup:r.createElement(H,{className:"card pAll10"},r.createElement(R.default.TextArea,{ref:I,autoFocus:!0,onFocus:c,value:A,rows:4,style:{resize:"none"},onChange:function(b){S(b.target.value.trim())}}),r.createElement("div",{className:"flexRow alignItemsCenter mTop10 btns"},r.createElement(p.default,{type:"text",onClick:function(){return O(!1)}},_l("\u53D6\u6D88")),r.createElement(p.default,{type:"primary",onClick:function(){if(_.isEmpty(A)){alert(_l("\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"),2);return}n(A),O(!1)}},_l("\u4FDD\u5B58")))),popupVisible:C,onPopupVisibleChange:function(b){return O(b)},popupAlign:{points:["tc","bc"],offset:[0,10],overflow:{adjustX:!0,adjustY:!0}},destroyPopupOnHide:!0},f.children)}},73600:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>M});var ce=t(31277),g=t(31929),p=t(12424),L=t(24043),te=t.n(L),R=t(42723),y=t(88239),a=t(52945),r=t.n(a),o=t(67294),d=t(45697),Z=t.n(d),H=t(93967),U=t.n(H),f=t(95742),V=t(5631),C=t(95283),O=t(48947),n=t(15577),s=t(54022),j=t(97373),A=t(94055),S=t(62521),I=t(16469),c=t(33867),q=t(38752),b=t(29314),k=function(ae,ne){var de=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"w100";return ne==="0"?o.createElement("div",{className:"fileImage",style:{backgroundImage:"url("+ae+")"}}):o.createElement("div",{className:"flexRow alignItemsCenter justifyContentCenter overflowHidden h100 GrayBGF8"},o.createElement("img",{className:de,src:ae}))},ee=function(ae){var ne=ae.data,de=ae.isMobile,Ce=ae.isDeleteFile,he=ae.coverType,fe=ae.allowEditName,Ee=ae.allowDownload,Y=ae.worksheetId,oe=ae.recordId,ve=ae.onDeleteMDFile,ue=ae.onOpenControlAttachmentInNewTab,pe=ae.onMDPreview,Se=ae.onAttachmentName,ye=ae.isKc,J=ae.browse,me=ae.fileClassName,be=ae.fileSize,xe=ae.isMore,Ae=ae.isDownload,Ne=he==="1",Me=ne.previewUrl.replace(/imageView2\/\d\/w\/\d+\/h\/\d+(\/q\/\d+)?/,"imageView2/"+(Ne?2:1)+"/w/200/h/140"),Fe=(0,o.useState)(!1),Be=(0,p.Z)(Fe,2),we=Be[0],Ie=Be[1],ge=(0,o.useState)(!1),Re=(0,p.Z)(ge,2),Pe=Re[0],ke=Re[1],We=(0,o.useState)(!1),Ve=(0,p.Z)(We,2),it=Ve[0],Ge=Ve[1],pt=(0,o.useState)("w100"),ot=(0,p.Z)(pt,2),vt=ot[0],At=ot[1],yt=(0,o.useRef)(null),st=(0,o.useState)(ae.isPicture),St=(0,p.Z)(st,2),Qe=St[0],Xe=St[1];(0,o.useEffect)(function(){Qe&&(0,q.po)(Me).then(function(Ue){var He=Ue.width,ze=Ue.height;At(He>ze?"w100":"h100")}).catch(function(Ue){Xe(!1)})},[]);var $e=o.createElement(S.Z,{style:{width:140},className:"Relative"},ue&&_.isEmpty(window.shareState)&&o.createElement(I.Z,{key:"newPage",icon:o.createElement(c.Z,{icon:"launch",className:"Font17 pRight5"}),onClick:function(He){He.stopPropagation(),ue(ne.fileID),Ie(!1)}},_l("\u65B0\u9875\u9762\u6253\u5F00")),fe&&!ye&&o.createElement(I.Z,{key:"editName",icon:o.createElement(c.Z,{icon:"new_mail",className:"Font17 pRight5"}),onClick:function(He){He.stopPropagation(),Ge(!0),Ie(!1)}},_l("\u91CD\u547D\u540D")),o.createElement(I.Z,{key:"share",icon:o.createElement(c.Z,{icon:"share",className:"Font17 pRight5"}),onClick:function(He){He.stopPropagation(),(0,q.Bf)(ne,Ae),Ie(!1)}},_l("\u5206\u4EAB")),o.createElement(I.Z,{key:"saveKcCloud",icon:o.createElement(c.Z,{icon:"knowledge-cloud",className:"Font17 pRight5"}),onClick:function(He){He.stopPropagation(),(0,q.F2)(ne,Ae),Ie(!1)}},_l("\u4FDD\u5B58\u5230\u77E5\u8BC6"))),Ke=function(He){setTimeout(function(){yt&&yt.current&&yt.current.select()},0)};return o.createElement("div",{className:U()("attachmentFile",{hover:we||it}),onClick:function(){J?pe(ne):alert(_l("\u60A8\u6743\u9650\u4E0D\u8DB3\uFF0C\u65E0\u6CD5\u9884\u89C8\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u6216\u6587\u4EF6\u4E0A\u4F20\u8005"),3)}},de&&Ce&&o.createElement(c.Z,{icon:"close",className:"closeIcon flexRow alignItemsCenter justifyContentCenter",onClick:function(He){He.stopPropagation(),ve(ne)}}),ye&&o.createElement("div",{className:"kcIcon flexRow alignItemsCenter justifyContentCenter"},o.createElement(c.Z,{className:"Font17",icon:"knowledge1"})),Qe?k(Me,he,vt):o.createElement("div",{className:"fileAccessory flexColumn"},o.createElement("div",{className:"fileIconWrap flexRow alignItemsCenter justifyContentCenter"},o.createElement("div",{className:U()(me,"fileIcon")})),o.createElement("div",{className:"fileName Font13 flexRow alignItemsCenter textEllipsis"},ne.originalFilename,ne.ext)),o.createElement("div",{className:U()("flexColumn filePanel",Qe?"image":"accessory")},it?o.createElement("div",{className:"flex"},o.createElement("input",{ref:yt,type:"text",autoFocus:!0,onFocus:Ke,className:"resetNameInput Font13",defaultValue:ne.originalFilename,onClick:function(He){He.stopPropagation()},onBlur:function(He){Se(ne.fileID,He.target.value),Ge(!1)},onKeyDown:function(He){He.which===13&&(Se(ne.fileID,He.target.value),Ge(!1))}})):o.createElement("div",{className:"flex"},o.createElement("div",{className:U()("Font13 flexRow alignItemsCenter textEllipsis mBottom5 name",Qe?"White":"ThemeColor")},ne.originalFilename,ne.ext),o.createElement("div",{className:"flexRow alignItemsCenter Gray_bd"},ye?o.createElement(o.Fragment,null,o.createElement("span",{className:"mRight10"},_l("\u6765\u81EA\u77E5\u8BC6")),ne.attachmentType!==4&&o.createElement("span",null,be)):o.createElement("span",null,be))),Pe?o.createElement("div",{className:"operateBtns confirm flexRow"},o.createElement("div",{className:"deleteBtn mRight10",onClick:function(He){He.stopPropagation(),ve(ne),ke(!1)}},_l("\u5220\u9664")),o.createElement("div",{className:"cancelBtn",onClick:function(He){He.stopPropagation(),ke(!1)}},_l("\u53D6\u6D88"))):o.createElement("div",{className:"operateBtns flexRow"},Ce&&o.createElement(A.default,{title:_l("\u5220\u9664"),placement:"bottom"},o.createElement("div",{onClick:function(He){He.stopPropagation(),ke(!0)},className:"panelBtn delete"},o.createElement(c.Z,{className:"Gray_9e Font17",icon:"task-new-delete"}))),o.createElement("div",{className:"flexRow alignItemsCenter"},Ee&&o.createElement(A.default,{title:_l("\u4E0B\u8F7D"),placement:"bottom"},o.createElement("div",{onClick:function(He){He.stopPropagation(),(0,q.gp)(ne,Ae)},className:"panelBtn mRight10"},o.createElement(c.Z,{className:"Gray_9e Font17",icon:"download"}))),xe&&o.createElement(b.Z,{action:["click"],popup:$e,popupVisible:we,onPopupVisibleChange:function(He){return Ie(He)},popupAlign:{points:["tr","br"],offset:[5,5],overflow:{adjustX:!0,adjustY:!0}}},o.createElement(A.default,{title:_l("\u66F4\u591A"),placement:"bottom"},o.createElement("div",{onClick:function(He){He.stopPropagation(),Ie(!0)},className:"panelBtn"},o.createElement(c.Z,{className:"Gray_9e Font17",icon:"task-point-more"}))))))))},re=function(ae){var ne=ae.data,de=ae.isMobile,Ce=ae.coverType,he=ae.onDeleteKCFile,fe=ae.onDeleteFile,Ee=ae.onResetNameFile,Y=ae.onKCPreview,oe=ae.onPreview,ve=ae.isKc,ue=ae.fileClassName,pe=ae.fileSize,Se=ae.url,ye="w/200/h/140",J=Ce==="1"?2:1,me=ve?ne.viewUrl:Se.indexOf("imageView2")>-1?Se.replace(/imageView2\/\d\/w\/\d+\/h\/\d+(\/q\/\d+)?/,"imageView2/"+J+"/"+ye):Se+((Se.includes("?")?"&":"?")+"imageView2/"+J+"/"+ye),be=(0,o.useState)(!1),xe=(0,p.Z)(be,2),Ae=xe[0],Ne=xe[1],Me=(0,o.useState)(ae.isPicture),Fe=(0,p.Z)(Me,2),Be=Fe[0],we=Fe[1],Ie=(0,o.useState)("w100"),ge=(0,p.Z)(Ie,2),Re=ge[0],Pe=ge[1],ke=(0,o.useRef)(null);(0,o.useEffect)(function(){Be&&(0,q.po)(me).then(function(Ve){var it=Ve.width,Ge=Ve.height;Pe(it>Ge?"w100":"h100")}).catch(function(Ve){we(!1)})},[]);var We=function(it){setTimeout(function(){ke&&ke.current&&ke.current.select()},0)};return o.createElement("div",{className:"attachmentFile",onClick:function(){Ae||(ve?Y(ne):oe(ne))}},de&&o.createElement(c.Z,{icon:"close",className:"closeIcon flexRow alignItemsCenter justifyContentCenter",onClick:function(it){it.stopPropagation(),ve?he(ne):fe(ne)}}),ve&&o.createElement("div",{className:"kcIcon flexRow alignItemsCenter justifyContentCenter"},o.createElement(c.Z,{className:"Font17",icon:"knowledge1"})),Be?k(me,Ce,Re):o.createElement("div",{className:"fileAccessory flexColumn"},o.createElement("div",{className:"fileIconWrap flexRow alignItemsCenter justifyContentCenter"},o.createElement("div",{className:U()(ue,"fileIcon")})),o.createElement("div",{className:"fileName Font13 flexRow alignItemsCenter textEllipsis"},ne.originalFileName,ne.fileExt)),o.createElement("div",{className:U()("flexColumn filePanel",Be?"image":"accessory")},Ae?o.createElement("div",{className:"flex"},o.createElement("input",{ref:ke,type:"text",autoFocus:!0,onFocus:We,className:"resetNameInput Font13",defaultValue:ne.originalFileName,onBlur:function(it){Ee(ne.fileID,it.target.value),Ne(!1)},onKeyDown:function(it){it.which===13&&(Ee(ne.fileID,it.target.value),Ne(!1))}})):o.createElement("div",{className:"flex"},o.createElement("div",{className:U()("Font13 flexRow alignItemsCenter textEllipsis mBottom5 name",Be?"White":"ThemeColor")},ne.originalFileName,ne.fileExt),o.createElement("div",{className:"flexRow alignItemsCenter Gray_bd"},ve?o.createElement(o.Fragment,null,o.createElement("span",{className:"mRight10"},_l("\u6765\u81EA\u77E5\u8BC6")),ne.attachmentType!==4&&o.createElement("span",null,pe)):o.createElement("span",null,pe))),o.createElement("div",{className:"operateBtns flexRow"},o.createElement(A.default,{title:_l("\u5220\u9664"),placement:"bottom"},o.createElement("div",{onClick:function(it){it.stopPropagation(),ve?he(ne):fe(ne)},className:"panelBtn delete"},o.createElement(c.Z,{className:"Gray_9e Font17",icon:"task-new-delete"}))),!ve&&o.createElement(A.default,{title:_l("\u91CD\u547D\u540D"),placement:"bottom"},o.createElement("div",{onClick:function(it){it.stopPropagation(),Ne(!0)},className:"panelBtn"},o.createElement(c.Z,{className:"Gray_9e Font17",icon:"new_mail"}))))))};const ie=function(se){var ae=se.data,ne=se.removeUploadingFile,de=(0,R.Z)(se,["data","removeUploadingFile"]),Ce=se.isMdFile;if("progress"in ae){var he=ae.progress,fe=ae.base;return o.createElement("div",{className:"attachmentImageCard Relative"},o.createElement(c.Z,{icon:"close",className:"closeIcon flexRow alignItemsCenter justifyContentCenter",onClick:function(){ne(ae)}}),o.createElement("div",{className:"attachmentFile h100 flexColumn"},o.createElement("div",{className:"flexRow alignItemsCenter justifyContentCenter flex"},o.createElement(s.Z.Circle,{key:"text",isAnimation:!1,isRound:!1,strokeWidth:3,diameter:47,foregroundColor:"#BDBDBD",backgroundColor:"#fff",percent:parseInt(he)})),o.createElement("div",{className:"fileName Font13 flexRow alignItemsCenter textEllipsis"},fe.fileName,fe.fileExt)))}return o.createElement("div",{className:"attachmentImageCard"},Ce?o.createElement(ee,(0,y.default)({data:ae},de)):o.createElement(re,(0,y.default)({data:ae},de)))};var le=t(66600),E=function(ae){var ne=ae.data,de=ae.isMobile,Ce=ae.isDeleteFile,he=ae.allowEditName,fe=ae.worksheetId,Ee=ae.recordId,Y=ae.allowDownload,oe=ae.onDeleteMDFile,ve=ae.onOpenControlAttachmentInNewTab,ue=ae.onMDPreview,pe=ae.onAttachmentName,Se=ae.isKc,ye=ae.browse,J=ae.fileClassName,me=ae.fileSize,be=ae.isMore,xe=ae.isDownload,Ae=ne.previewUrl.replace(/imageView2\/\d\/w\/\d+\/h\/\d+(\/q\/\d+)?/,"imageView2/1/w/200/h/140"),Ne=(0,o.useState)(!1),Me=(0,p.Z)(Ne,2),Fe=Me[0],Be=Me[1],we=(0,o.useState)(!1),Ie=(0,p.Z)(we,2),ge=Ie[0],Re=Ie[1],Pe=(0,o.useState)(!1),ke=(0,p.Z)(Pe,2),We=ke[0],Ve=ke[1],it=(0,o.useState)(ae.isPicture),Ge=(0,p.Z)(it,2),pt=Ge[0],ot=Ge[1],vt=(0,o.useState)(!0),At=(0,p.Z)(vt,2),yt=At[0],st=At[1],St=(0,o.useRef)(null);(0,o.useEffect)(function(){pt&&(0,q.po)(Ae).then().catch(function($e){ot(!1)})},[]),(0,o.useEffect)(function(){var $e=_.get(St,"current");$e&&st(_.get($e,"clientHeight")<20)},[ne.originalFilename]);var Qe=o.createElement(S.Z,{style:{width:140},className:"Relative"},ve&&_.isEmpty(window.shareState)&&o.createElement(I.Z,{key:"newPage",icon:o.createElement(c.Z,{icon:"launch",className:"Font17 pRight5"}),onClick:function(Ke){Ke.stopPropagation(),ve(ne.fileID),Be(!1)}},_l("\u65B0\u9875\u9762\u6253\u5F00")),he&&!Se&&o.createElement(I.Z,{key:"new_mail",icon:o.createElement(c.Z,{icon:"new_mail",className:"Font17 pRight5"}),onClick:function(Ke){Ke.stopPropagation(),Ve(!0),Be(!1)}},_l("\u91CD\u547D\u540D")),o.createElement(I.Z,{key:"share",icon:o.createElement(c.Z,{icon:"share",className:"Font17 pRight5"}),onClick:function(Ke){Ke.stopPropagation(),(0,q.Bf)(ne,xe),Be(!1)}},_l("\u5206\u4EAB")),o.createElement(I.Z,{key:"saveKcCloud",icon:o.createElement(c.Z,{icon:"knowledge-cloud",className:"Font17 pRight5"}),onClick:function(Ke){Ke.stopPropagation(),(0,q.F2)(ne,xe),Be(!1)}},_l("\u4FDD\u5B58\u5230\u77E5\u8BC6"))),Xe=function(){ye?ue(ne):alert(_l("\u60A8\u6743\u9650\u4E0D\u8DB3\uFF0C\u65E0\u6CD5\u9884\u89C8\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u6216\u6587\u4EF6\u4E0A\u4F20\u8005"),3)};return o.createElement("div",{className:U()("attachmentSmallCard flexRow alignItemsCenter",{mobile:de,hover:Fe||We,mRight10:Ce&&de})},o.createElement("div",{className:"fileImageWrap fileImageWrap pointer flexRow alignItemsCenter justifyContentCenter",onClick:Xe},pt?o.createElement("div",{className:"fileImage",style:{backgroundImage:"url("+Ae+")"}}):o.createElement("div",{className:U()(J,"fileIcon")}),Se&&o.createElement("div",{className:"kcIcon flexRow alignItemsCenter justifyContentCenter"},o.createElement(c.Z,{className:"Font16",icon:"knowledge1"}))),o.createElement("div",{className:"fileContent flex flexColumn justifyContentCenter pointer",onClick:Xe},o.createElement("div",{className:"fileName textEllipsis",ref:St},ne.originalFilename,ne.ext),o.createElement("div",{className:U()("fileSize Gray_75",{hide:!yt})},me)),de?Ce&&o.createElement(c.Z,{onClick:function(){return oe(ne)},className:"deleteIcon Gray_9e Font19",icon:"closeelement-bg-circle"}):o.createElement("div",{className:"operateBtns flexRow alignItemsCenter"},ge?o.createElement(o.Fragment,null,o.createElement("div",{className:"cancelBtn mRight6",onClick:function(){return Re(!1)}},_l("\u53D6\u6D88")),o.createElement("div",{className:"deleteBtn mRight10",onClick:function(){return oe(ne)}},_l("\u5220\u9664"))):o.createElement(o.Fragment,null,Y&&o.createElement(A.default,{title:_l("\u4E0B\u8F7D"),placement:"bottom"},o.createElement("div",{className:"btnWrap pointer",onClick:function(){(0,q.gp)(ne,xe)}},o.createElement(c.Z,{className:"Gray_9e Font17",icon:"download"}))),Ce&&o.createElement(A.default,{title:_l("\u5220\u9664"),placement:"bottom"},o.createElement("div",{className:"btnWrap pointer delete",onClick:function(){return Re(!0)}},o.createElement(c.Z,{className:"Gray_9e Font17",icon:"task-new-delete"}))),be&&o.createElement(b.Z,{action:["click"],popup:Qe,popupVisible:Fe,onPopupVisibleChange:function(Ke){return Be(Ke)},popupAlign:{points:["tr","br"],offset:[5,5],overflow:{adjustX:!0,adjustY:!0}}},o.createElement(A.default,{title:_l("\u66F4\u591A"),placement:"bottom"},o.createElement("div",{className:"btnWrap pointer"},o.createElement(c.Z,{className:"Gray_9e Font17",icon:"task-point-more"})))),o.createElement(le.Z,{originalFileName:ne.originalFilename,isEdit:We,setIsEdit:Ve,onSave:function(Ke){pe(ne.fileID,Ke)}},o.createElement("div",null)))))},w=function(ae){var ne=ae.data,de=ae.isMobile,Ce=ae.onDeleteKCFile,he=ae.onDeleteFile,fe=ae.onResetNameFile,Ee=ae.onKCPreview,Y=ae.onPreview,oe=ae.isKc,ve=ae.fileClassName,ue=ae.isPicture,pe=ae.fileSize,Se=ae.url,ye=oe?ne.viewUrl:Se.indexOf("imageView2")>-1?Se.replace(/imageView2\/\d\/w\/\d+\/h\/\d+(\/q\/\d+)?/,"imageView2/1/w/200/h/140"):Se+((Se.includes("?")?"&":"?")+"imageView2/1/w/200/h/140"),J=(0,o.useState)(!1),me=(0,p.Z)(J,2),be=me[0],xe=me[1],Ae=function(){be||(oe?Ee(ne):Y(ne))};return o.createElement("div",{className:U()("attachmentSmallCard flexRow alignItemsCenter",{mobile:de,hover:be})},o.createElement("div",{className:"fileImageWrap fileImageWrap pointer flexRow alignItemsCenter justifyContentCenter",onClick:Ae},ue?o.createElement("div",{className:"fileImage",style:{backgroundImage:"url("+ye+")"}}):o.createElement("div",{className:U()(ve,"fileIcon")}),oe&&o.createElement("div",{className:"kcIcon flexRow alignItemsCenter justifyContentCenter"},o.createElement(c.Z,{className:"Font16",icon:"knowledge1"}))),o.createElement("div",{className:"fileContent flex flexColumn justifyContentCenter pointer",onClick:Ae},o.createElement("div",{className:"fileName textEllipsis"},ne.originalFileName,ne.fileExt),o.createElement("div",{className:"fileSize Gray_75"},pe)),!de&&o.createElement("div",{className:"operateBtns flexRow alignItemsCenter"},!oe&&o.createElement(le.Z,{originalFileName:ne.originalFileName,isEdit:be,setIsEdit:xe,onSave:function(Me){fe(ne.fileID,Me)}},o.createElement(A.default,{title:_l("\u91CD\u547D\u540D"),placement:"bottom"},o.createElement("div",{className:"btnWrap pointer",onClick:function(){return xe(!0)}},o.createElement(c.Z,{className:"Gray_9e Font17",icon:"new_mail"})))),o.createElement(A.default,{title:_l("\u5220\u9664"),placement:"bottom"},o.createElement("div",{className:"btnWrap pointer delete",onClick:function(){oe?Ce(ne):he(ne)}},o.createElement(c.Z,{className:"Gray_9e Font17",icon:"task-new-delete"})))),de&&o.createElement(c.Z,{onClick:function(){oe?Ce(ne):he(ne)},className:"deleteIcon Gray_9e Font19",icon:"closeelement-bg-circle"}))};const K=function(se){var ae=se.data,ne=se.removeUploadingFile,de=(0,R.Z)(se,["data","removeUploadingFile"]),Ce=se.isMdFile;if("progress"in ae){var he=ae.progress,fe=ae.base;return o.createElement("div",{className:"attachmentSmallCard flexRow alignItemsCenter mobile"},o.createElement("div",{className:"fileImageWrap fileImageWrap pointer flexRow alignItemsCenter justifyContentCenter"},o.createElement(s.Z.Circle,{key:"text",isAnimation:!1,isRound:!1,strokeWidth:3,diameter:47,foregroundColor:"#BDBDBD",backgroundColor:"#fff",format:function(Y){return""},percent:parseInt(he)})),o.createElement("div",{className:"fileContent flex flexColumn justifyContentCenter pointer"},o.createElement("div",{className:"fileName textEllipsis"},fe.fileName,fe.fileExt)),o.createElement(c.Z,{onClick:function(){return ne(ae)},className:"deleteIcon Gray_9e Font19",icon:"closeelement-bg-circle"}))}return Ce?o.createElement(E,(0,y.default)({data:ae},de)):o.createElement(w,(0,y.default)({data:ae},de))};var N=t(30381),F=t.n(N),h=function(ae){var ne=ae.data,de=ae.isMobile,Ce=ae.isDeleteFile,he=ae.allowDownload,fe=ae.allowSort,Ee=ae.allowEditName,Y=ae.worksheetId,oe=ae.recordId,ve=ae.onDeleteMDFile,ue=ae.onOpenControlAttachmentInNewTab,pe=ae.onMDPreview,Se=ae.onAttachmentName,ye=ae.isKc,J=ae.browse,me=ae.fileClassName,be=ae.fileSize,xe=ae.isMore,Ae=ae.isDownload,Ne=ne.previewUrl.replace(/imageView2\/\d\/w\/\d+\/h\/\d+(\/q\/\d+)?/,"imageView2/2/w/200/h/140"),Me=(0,o.useState)(!1),Fe=(0,p.Z)(Me,2),Be=Fe[0],we=Fe[1],Ie=(0,o.useState)(!1),ge=(0,p.Z)(Ie,2),Re=ge[0],Pe=ge[1],ke=(0,o.useState)(!1),We=(0,p.Z)(ke,2),Ve=We[0],it=We[1],Ge=(0,o.useState)(ae.isPicture),pt=(0,p.Z)(Ge,2),ot=pt[0],vt=pt[1];(0,o.useEffect)(function(){ot&&(0,q.po)(Ne).then().catch(function(st){vt(!1)})},[]);var At=o.createElement(S.Z,{style:{width:140},className:"Relative"},ue&&_.isEmpty(window.shareState)&&o.createElement(I.Z,{key:"newPage",icon:o.createElement(c.Z,{icon:"launch",className:"Font17 pRight5"}),onClick:function(St){St.stopPropagation(),ue(ne.fileID),we(!1)}},_l("\u65B0\u9875\u9762\u6253\u5F00")),o.createElement(I.Z,{key:"share",icon:o.createElement(c.Z,{icon:"share",className:"Font17 pRight5"}),onClick:function(St){St.stopPropagation(),(0,q.Bf)(ne,Ae),we(!1)}},_l("\u5206\u4EAB")),o.createElement(I.Z,{key:"saveKcCloud",icon:o.createElement(c.Z,{icon:"knowledge-cloud",className:"Font17 pRight5"}),onClick:function(St){St.stopPropagation(),(0,q.F2)(ne,Ae),we(!1)}},_l("\u4FDD\u5B58\u5230\u77E5\u8BC6"))),yt=function(){J?pe(ne):alert(_l("\u60A8\u6743\u9650\u4E0D\u8DB3\uFF0C\u65E0\u6CD5\u9884\u89C8\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u6216\u6587\u4EF6\u4E0A\u4F20\u8005"),3)};return o.createElement("div",{className:U()("attachmentListCard flexRow alignItemsCenter",{mobile:de,hover:Be||Ve})},fe&&o.createElement(c.Z,{className:"fileDrag Gray_9e",icon:"drag"}),o.createElement("div",{className:U()("fileImageWrap pointer h100 flexRow alignItemsCenter justifyContentCenter",{mLeft0:!fe}),onClick:yt},ot?o.createElement("div",{className:"fileImage",style:{backgroundImage:"url("+Ne+")"}}):o.createElement("div",{className:U()(me,"fileIcon")})),o.createElement("div",{className:"fileName flex flexRow alignItemsCenter pointer",onClick:yt},o.createElement("span",{className:"textEllipsis"},ne.originalFilename,ne.ext),ye&&o.createElement(c.Z,{className:"Font17 Gray_9e mLeft8",icon:"knowledge1"})),o.createElement("div",{className:"fileSize"},be),o.createElement("div",{className:"fileCreateTime"},createTimeSpan(F()(ne.createTime).format("YYYY-MM-DD HH:mm:ss"))),o.createElement("div",{className:"fileCreateUserName"},ne.createUserName),!de&&o.createElement("div",{className:U()("operateBtns",{deleteConfirmWrap:Re})},o.createElement("div",{className:"flexRow alignItemsCenter"},Re?o.createElement(o.Fragment,null,o.createElement("div",{className:"cancelBtn mRight6",onClick:function(){return Pe(!1)}},_l("\u53D6\u6D88")),o.createElement("div",{className:"deleteBtn mRight10",onClick:function(){return ve(ne)}},_l("\u5220\u9664"))):o.createElement(o.Fragment,null,Ee&&!ye&&o.createElement(le.Z,{originalFileName:ne.originalFilename,isEdit:Ve,setIsEdit:it,onSave:function(St){Se(ne.fileID,St)}},o.createElement(A.default,{title:_l("\u91CD\u547D\u540D"),placement:"bottom"},o.createElement("div",{className:"btnWrap pointer",onClick:function(){return it(!0)}},o.createElement(c.Z,{className:"Gray_9e Font17",icon:"new_mail"})))),he&&o.createElement(A.default,{title:_l("\u4E0B\u8F7D"),placement:"bottom"},o.createElement("div",{className:"btnWrap pointer",onClick:function(){(0,q.gp)(ne,Ae)}},o.createElement(c.Z,{className:"Gray_9e Font17",icon:"download"}))),Ce&&o.createElement(A.default,{title:_l("\u5220\u9664"),placement:"bottom"},o.createElement("div",{className:"btnWrap pointer delete",onClick:function(){return Pe(!0)}},o.createElement(c.Z,{className:"Gray_9e Font17",icon:"task-new-delete"}))),xe&&o.createElement(b.Z,{action:["click"],popup:At,popupVisible:Be,onPopupVisibleChange:function(St){return we(St)},popupAlign:{points:["tr","br"],offset:[5,5],overflow:{adjustX:!0,adjustY:!0}}},o.createElement(A.default,{title:_l("\u66F4\u591A"),placement:"bottom"},o.createElement("div",{className:"btnWrap pointer"},o.createElement(c.Z,{className:"Gray_9e Font17",icon:"task-point-more"}))))))))},z=function(ae){var ne=ae.data,de=ae.isMobile,Ce=ae.allowSort,he=ae.onDeleteKCFile,fe=ae.onDeleteFile,Ee=ae.onResetNameFile,Y=ae.onKCPreview,oe=ae.onPreview,ve=ae.isKc,ue=ae.fileClassName,pe=ae.isPicture,Se=ae.fileSize,ye=ae.url,J=ve?ne.viewUrl:ye.indexOf("imageView2")>-1?ye.replace(/imageView2\/\d\/w\/\d+\/h\/\d+(\/q\/\d+)?/,"imageView2/1/w/200/h/140"):ye+((ye.includes("?")?"&":"?")+"imageView2/1/w/200/h/140"),me=(0,o.useState)(!1),be=(0,p.Z)(me,2),xe=be[0],Ae=be[1],Ne=function(){xe||(ve?Y(ne):oe(ne))};return o.createElement("div",{className:U()("attachmentListCard flexRow alignItemsCenter",{mobile:de,hover:xe})},Ce&&o.createElement(c.Z,{className:"fileDrag Gray_9e",icon:"drag"}),o.createElement("div",{className:U()("fileImageWrap pointer h100 flexRow alignItemsCenter justifyContentCenter",{mLeft0:!Ce}),onClick:Ne},pe?o.createElement("img",{className:"h100",src:J}):o.createElement("div",{className:U()(ue,"fileIcon")})),o.createElement("div",{className:"fileName flex flexRow alignItemsCenter pointer",onClick:Ne},o.createElement("span",{className:"textEllipsis"},ne.originalFileName,ne.fileExt),ve&&o.createElement(c.Z,{className:"Font17 Gray_9e mLeft8",icon:"knowledge1"})),o.createElement("div",{className:"fileSize"},Se),o.createElement("div",{className:"fileCreateTime"},_l("\u521A\u521A")),o.createElement("div",{className:"fileCreateUserName"},md.global.Account.fullname),!de&&o.createElement("div",{className:"operateBtns flexRow alignItemsCenter"},!ve&&o.createElement(le.Z,{originalFileName:ne.originalFileName,isEdit:xe,setIsEdit:Ae,onSave:function(Fe){Ee(ne.fileID,Fe)}},o.createElement(A.default,{title:_l("\u91CD\u547D\u540D"),placement:"bottom"},o.createElement("div",{className:"btnWrap pointer",onClick:function(){return Ae(!0)}},o.createElement(c.Z,{className:"Gray_9e Font17",icon:"new_mail"})))),o.createElement(A.default,{title:_l("\u5220\u9664"),placement:"bottom"},o.createElement("div",{className:"btnWrap pointer delete",onClick:function(){ve?he(ne):fe(ne)}},o.createElement(c.Z,{className:"Gray_9e Font17",icon:"task-new-delete"})))))},X=function(ae){return o.createElement("div",{className:U()("attachmentListCard header flexRow alignItemsCenter")},o.createElement(c.Z,{className:"Visibility mRight2",icon:"drag"}),o.createElement("div",{className:"fileImageWrap h100 flexRow alignItemsCenter"},_l("\u6587\u4EF6")),o.createElement("div",{className:"fileName flex flexRow alignItemsCenter"}),o.createElement("div",{className:"fileSize"},_l("\u5927\u5C0F")),o.createElement("div",{className:"fileCreateTime"},_l("\u4E0A\u4F20\u65F6\u95F4")),o.createElement("div",{className:"fileCreateUserName"},_l("\u4E0A\u4F20\u8005")))};const B=function(se){var ae=se.data,ne=(0,R.Z)(se,["data"]),de=se.isMdFile;if("progress"in ae){var Ce=ae.progress,he=ae.base;return o.createElement("div",{className:"attachmentListCard flexRow alignItemsCenter"},o.createElement("div",{className:"fileImageWrap pointer h100 flexRow alignItemsCenter justifyContentCenter"},o.createElement(s.Z.Circle,{key:"text",isAnimation:!1,isRound:!1,strokeWidth:3,diameter:47,foregroundColor:"#BDBDBD",backgroundColor:"#fff",format:function(Ee){return""},percent:parseInt(Ce)})),o.createElement("div",{className:"fileName flex flexRow alignItemsCenter"},o.createElement("span",{className:"textEllipsis"},he.fileName,he.fileExt||ae.ext)))}return de?o.createElement(h,(0,y.default)({data:ae},ne)):o.createElement(z,(0,y.default)({data:ae},ne))};var x=t(54208),Q=function(ae){var ne=ae.isMobile,de=ae.previewUrl,Ce=ae.onPreview,he=(0,o.useState)(!0),fe=(0,p.Z)(he,2),Ee=fe[0],Y=fe[1];return(0,o.useEffect)(function(){(0,q.po)(de).then(function(oe){Y(!1)})},[]),o.createElement("div",{className:"attachmentLargeImageCard"},Ee?o.createElement(x.Z,null):o.createElement(o.Fragment,null,o.createElement("img",{className:"w100",src:de,onClick:function(){ne&&Ce()}}),!ne&&o.createElement("div",{className:"mask"},o.createElement("div",{className:"preview flexRow alignItemsCenter justifyContentCenter",onClick:Ce},o.createElement(A.default,{title:_l("\u5C55\u5F00"),placement:"bottom"},o.createElement(c.Z,{className:"Font17 pointer",icon:"worksheet_enlarge"}))))))};const i=function(se){var ae=se.data,ne=(0,R.Z)(se,["data"]),de=se.isMdFile,Ce=se.isKc,he=de?File.isPicture(ae.fileExt||ae.ext):File.isPicture(ae.fileExt);if(!he)return o.createElement("div",null);if(de){var fe=se.browse,Ee=se.onMDPreview,Y=ae.previewUrl.replace(/imageView2\/\d\/w\/\d+\/h\/\d+(\/q\/\d+)?/,"imageView2/0");return o.createElement(Q,(0,y.default)({},ne,{previewUrl:Y,onPreview:function(){fe?Ee(ae):alert(_l("\u60A8\u6743\u9650\u4E0D\u8DB3\uFF0C\u65E0\u6CD5\u9884\u89C8\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u6216\u6587\u4EF6\u4E0A\u4F20\u8005"),3)}}))}else{var oe=se.url,ve=se.onKCPreview,ue=se.onPreview,pe=Ce?ae.viewUrl:oe.indexOf("imageView2")>-1?oe.replace(/imageView2\/\d\/w\/\d+\/h\/\d+(\/q\/\d+)?/,"imageView2/0"):oe+((oe.includes("?")?"&":"?")+"imageView2/0");return o.createElement(Q,(0,y.default)({},ne,{previewUrl:pe,onPreview:function(){Ce?ve(ae):ue(ae)}}))}};var m={1:"imageFilesWrap",2:"smallFilesWrap",3:"listFilesWrap",4:"largeImageFilesWrap"},v={1:ie,2:K,3:B,4:i},W={1:136,2:62,3:52},P=(0,n.Q9)(),u=function(ae){return ae.sort(function(ne,de){return ne.index-de.index})},l=function(ae){var ne=ae.accountId||ae.sourceID;return ne?File.isPicture(ae.refId?ae.fileExt:ae.ext):File.isPicture(ae.fileExt)},T=(0,f.W8)(function(se){var ae=se.showType,ne=se.allowDownload,de=se.data,Ce=de.accountId,he=de.sourceID,fe=Ce||he,Ee=!!de.refId,Y=v[ae],oe={isMdFile:fe,isKc:Ee};if(fe){var ve=Ee?!!de.shareUrl:File.isPicture(de.ext);r()(oe,{isPicture:ve,browse:Ee?!!de.shareUrl:!0,fileClassName:(0,n.kQ)(de.attachmentType===5?!1:de.ext),fileSize:(0,n.sS)(de.filesize),isMore:ne&&md.global.Account.accountId&&!md.global.Account.isPortal&&!_.get(window,"shareState.shareId"),isDownload:Ee?de.allowDown==="ok":de.accountId===md.global.Account.accountId||ve||de.allowDown==="ok"})}else r()(oe,{fileClassName:(0,n.kQ)(de.fileExt),isPicture:File.isPicture(de.fileExt),fileSize:(0,n.sS)(de.fileSize),url:de.previewUrl||de.url||""});return o.createElement(Y,(0,y.default)({},se,oe,{isMobile:P}))}),G=(0,f.JN)(function(se){var ae=se.list,ne=se.className,de=se.smallSize,Ce=se.style,he=se.ref,fe=(0,R.Z)(se,["list","className","smallSize","style","ref"]),Ee=se.showType;return o.createElement("div",{style:Ce,ref:he,className:U()("overflowHidden",{mTop8:!["3"].includes(Ee),hide:!ae.length})},o.createElement("div",{className:U()(ne,"attachmentFilesWrap",m[Ee],{mobile:P,smallSize:de})},ae.map(function(Y,oe){return o.createElement(T,(0,y.default)({key:Y.fileID,index:oe,sortIndex:oe,data:Y||{}},fe))}),["1","2"].includes(Ee)&&te()({length:10}).map(function(Y,oe){return o.createElement("i",{key:oe,className:U()("fileEmpty",Ee==="1"?"attachmentImageCard":"attachmentSmallCard",{mobile:P})})})))}),D=function(ae){var ne=ae.className,de=ae.controlId,Ce=ae.onChangedAllFiles,he=ae.onSortAttachment,fe=ae.onAttachmentName,Ee=ae.flag,Y=(0,R.Z)(ae,["className","controlId","onChangedAllFiles","onSortAttachment","onAttachmentName","flag"]),oe=ae.attachmentData,ve=ae.onChangeAttachmentData,ue=ae.knowledgeAtts,pe=ae.onChangeKnowledgeAtts,Se=ae.attachments,ye=ae.onChangeAttachments,J=ae.from,me=Se.concat(ue).concat(oe),be=(0,o.useState)(me),xe=(0,p.Z)(be,2),Ae=xe[0],Ne=xe[1],Me=(0,o.useState)(!1),Fe=(0,p.Z)(Me,2),Be=Fe[0],we=Fe[1],Ie=(0,o.useState)(ae.viewMore),ge=(0,p.Z)(Ie,2),Re=ge[0],Pe=ge[1],ke=(0,o.useState)(!1),We=(0,p.Z)(ke,2),Ve=We[0],it=We[1],Ge=(0,o.useContext)(O.Z)||ae,pt=Ge.recordBaseInfo,ot=pt===void 0?{}:pt,vt=(0,o.useRef)(null),At=ae.showType,yt=ae.allowSort,st=["3"].includes(At),St=["4"].includes(At),Qe=st?10:5;(0,o.useEffect)(function(){var qe=Se.concat(ue).concat(oe);if(Ne(u(qe)),St){var nt=Ae.filter(l);ae.viewMore&&nt.length>Qe&&we(!0)}else{var Ze=_.get(vt,"current")||{};if(_.isFunction(Ze.getContainer)&&Ze.getContainer()){var et=Ze.getContainer(),ut=et.querySelector(".attachmentFilesWrap"),xt=ut.clientHeight,wt=ut.clientWidth;ae.viewMore&&(Pe(!0),we(xt>et.clientHeight)),!P&&wt&&["1"].includes(At)&&it(wt<=160),!P&&wt&&["2","3"].includes(At)&&it(wt<=300)}else ae.viewMore&&Pe(!1)}},[Se,ue,Ee]);var Xe=function(nt){var Ze=oe.filter(function(et){return et.fileID!==nt.fileID});ve(Ze)},$e=function(nt){var Ze=ue.filter(function(et){return et.refId!==nt.refId});pe(Ze)},Ke=function(nt){var Ze=Se.filter(function(et){return et.fileID!==nt.fileID});ye(Ze)},Ue=function(nt,Ze){if(Ze=Ze.trim(),_.isEmpty(Ze)){alert(_l("\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"),2);return}var et=Se.map(function(ut){return ut.fileID===nt&&(ut.originalFileName=Ze),ut});ye(et)},He=function(nt){var Ze=ae.allowDownload,et=Ze===void 0?!1:Ze,ut=["editFileName"].concat(et?[]:["download","share","saveToKnowlege"]);(0,n.Ye)("previewFile",ot.worksheetId,{fileId:nt.fileID,rowId:ot.recordId}),(0,C.Z)({attachments:oe,index:_.findIndex(oe,{fileID:nt.fileID}),callFrom:"player",sourceID:nt.sourceID,commentID:nt.commentID,fromType:nt.fromType,docversionid:nt.docVersionID,showThumbnail:!0,showAttInfo:!1,hideFunctions:ut,worksheetId:ot.worksheetId,fileId:nt.fileID,recordId:ot.recordId},{mdReplaceAttachment:function(wt){var kt=oe.slice();if(wt&&wt.docVersionID){var Rt=_.findIndex(oe,function(jt){return jt.docVersionID===wt.docVersionID});Rt>-1&&(kt[Rt]=wt,ve(kt))}},openControlAttachmentInNewTab:!P&&de&&ft})},ze=function(nt){var Ze=ue.filter(function(et){return et.node}).map(function(et){return et.node});(0,C.Z)({attachments:Ze,index:_.findIndex(Ze,{id:nt.fileID}),callFrom:"kc",hideFunctions:["editFileName","share","saveToKnowlege"]})},gt=function(nt){var Ze=Se.map(function(et){return{name:""+(et.originalFileName||_l("\u672A\u547D\u540D"))+et.fileExt,path:et.previewUrl?""+et.previewUrl:et.url?""+et.url+(et.url.includes("?")?"&":"?")+"imageView2/1/w/200/h/140":""+et.serverName+et.key,previewAttachmentType:"QINIU",size:et.fileSize,fileid:et.fileID}});(0,C.Z)({attachments:Ze,index:_.findIndex(Se,{fileID:nt.fileID}),callFrom:"chat",hideFunctions:["editFileName","share","saveToKnowlege"]})},Et=function(nt){var Ze=nt.oldIndex,et=nt.newIndex;if(Ze!==et){var ut=(0,f.Rp)(Ae,Ze,et),xt=[],wt=[],kt=[];ut.forEach(function(Rt,jt){var fn=Rt.accountId,Mt=Rt.sourceID,sn=Rt.refId,on=fn||Mt,en=!!sn;Rt.index=jt,on?kt.push(Rt):en?wt.push(Rt):xt.push(Rt)}),Ne(ut),xt.length||wt.length?Ce({attachments:xt,knowledgeAtts:wt,attachmentData:kt}):he(kt)}},ft=function(nt){ot&&((0,n.Ye)("previewFile",ot.worksheetId,{fileId:nt,rowId:ot.recordId}),(0,V.Kj)(_.assign(_.pick(ot,["appId","recordId","viewId","worksheetId"]),{controlId:de,fileId:nt,getType:J===21?J:void 0})))};return o.createElement(g.default,{autoInsertSpaceInButton:!1},st&&!!Ae.length&&o.createElement(X,null),o.createElement(G,(0,y.default)({ref:vt,axis:st?"y":"xy",shouldCancelStart:st?function(qe){var nt=qe.target;return!nt.classList.contains("fileDrag")}:void 0,helperClass:"sortableSortFile",style:Re&&!St?{maxHeight:W[At]*Qe}:void 0,distance:5,disabled:!yt,className:ne,smallSize:Ve,list:St&&Be&&Re?Ae.filter(l).filter(function(qe,nt){return nt<Qe}):Ae,worksheetId:ot.worksheetId,recordId:ot.recordId,onDeleteMDFile:Xe,onDeleteKCFile:$e,onDeleteFile:Ke,onResetNameFile:Ue,onAttachmentName:function(nt,Ze){if(Ze=Ze.trim(),_.isEmpty(Ze)){alert(_l("\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"),2);return}fe(nt,Ze,{instanceId:ot.instanceId,workId:ot.workId})},onMDPreview:He,onKCPreview:ze,onPreview:gt,onOpenControlAttachmentInNewTab:de&&ft,onSortEnd:Et},Y)),Be&&o.createElement(o.Fragment,null,o.createElement("div",{className:U()("attachmentFilesViewMoreWrap pBottom10 flexRow alignItemsCenter",At==="3"?"pTop10":"pTop5"),onClick:function(){return Pe(!Re)}},o.createElement("span",{className:"ThemeColor pointer"},Re?_l("\u67E5\u770B\u66F4\u591A"):_l("\u6536\u8D77")))))};const M=D;D.propTypes={from:Z().number,className:Z().string}},38752:(lt,Te,t)=>{"use strict";t.d(Te,{Bf:()=>te,F2:()=>R,gp:()=>y,po:()=>a});var ce=t(46593),g=t.n(ce);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(44293);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(15577);var te=function(o,d){if(!md.global.Account.accountId){window.open(md.global.Config.WebUrl+"login?ReturnUrl="+location.href);return}if(!d){alert(_l("\u60A8\u6743\u9650\u4E0D\u8DB3\uFF0C\u65E0\u6CD5\u5206\u4EAB\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u6216\u6587\u4EF6\u4E0A\u4F20\u8005"),3);return}var Z={},H=1;o.refId?(H=2,Z={id:o.refId,name:o.originalFilename,ext:(0,p.Q0)(o.ext),size:o.filesize,path:""+o.filepath+o.filename,previewUrl:o.previewUrl,viewUrl:o.viewUrl}):Z={id:o.fileID,name:o.originalFilename||File.GetName(o.filename),ext:(0,p.Q0)(o.ext),size:o.filesize,path:""+o.filepath+o.filename,previewUrl:o.previewUrl,viewUrl:o.viewUrl},Promise.all([t.e(4014),t.e(6924)]).then(t.bind(t,94014)).then(function(U){var f={attachmentType:H},V=File.isPicture("."+Z.ext.slice(Z.ext.indexOf(".")+1));f.id=Z.id,f.name=Z.name,f.ext="."+Z.ext,f.size=Z.size||0,f.imgSrc=V?""+Z.previewUrl.replace(/imageView2\/\d\/w\/\d+\/h\/\d+(\/q\/\d+)?/,"imageView2/2/w/490"):void 0,f.qiniuPath=Z.path,f.isKcFolder=o.attachmentType===5,U.default(f,{performUpdateItem:function(O){}})})},R=function(o,d){if(!md.global.Account.accountId){window.open(md.global.Config.WebUrl+"login?ReturnUrl="+location.href);return}if(!d){alert(_l("\u60A8\u6743\u9650\u4E0D\u8DB3\uFF0C\u65E0\u6CD5\u4FDD\u5B58\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u6216\u6587\u4EF6\u4E0A\u4F20\u8005"),3);return}var Z=0,H={};o.refId?(Z=2,H.nodeId=o.refId,H.isShareFolder=o.attachmentType===5):(Z=1,H.fileID=o.fileID),Promise.resolve().then(t.bind(t,42506)).then(function(U){U.default({dialogTitle:_l("\u9009\u62E9\u8DEF\u5F84"),isFolderNode:1,selectedItems:null,zIndex:9999}).then(function(f){Promise.resolve().then(t.bind(t,63743)).then(function(V){V.default(Z,H).save(f).then(function(){alert(_l("\u4FDD\u5B58\u6210\u529F"))}).catch(function(){alert(_l("\u4FDD\u5B58\u5931\u8D25"),2)})})})})},y=function(o,d){var Z=o.downloadUrl?o.downloadUrl:o.attachmentType==5?o.downloadUrl+"&shareFolderId="+o.refId:md.global.Config.AjaxApiUrl+"file/downDocument?fileID="+o.fileID;d?window.open((0,L.Sv)(Z)):alert(_l("\u60A8\u6743\u9650\u4E0D\u8DB3\uFF0C\u65E0\u6CD5\u4E0B\u8F7D\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u6216\u6587\u4EF6\u4E0A\u4F20\u8005"),3)},a=function(o){return new(g())(function(d,Z){var H=new Image;H.onload=function(U){d(H)},H.onerror=function(U){Z(U)},H.src=o})}},75559:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>l});var ce=t(97373),g=t(94055),p=t(33867),L=t(46593),te=t.n(L),R=t(88239),y=t(63239),a=t.n(y),r=t(85105),o=t.n(r),d=t(99663),Z=t(22600),H=t(49135),U=t(93196),f=t(45697),V=t.n(f),C=t(67294),O=t(91247),n=t(83983),s=t(93967),j=t.n(s),A=t(33173),S=t(89499),I=t(73600),c=t(11378),q=t(56697),b=t(31277),k=t(31929),ee=t(52262),re=t(65400),ie=t(12424),le=t(86735),E=t(71893),w=(0,le.Z)([`
  .ant-btn-link {
    color: #9e9e9e;
    &:hover {
      color: #1890ff;
    }
  }
  .ant-btn-primary {
    padding: 0 16px;
    &:hover {
      border-color: #007ff5;
      background-color: #007ff5;
    }
  }
`],[`
  .ant-btn-link {
    color: #9e9e9e;
    &:hover {
      color: #1890ff;
    }
  }
  .ant-btn-primary {
    padding: 0 16px;
    &:hover {
      border-color: #007ff5;
      background-color: #007ff5;
    }
  }
`]),K=E.ZP.div(w);const N=function(T){var G=T.visible,D=T.onCancel,M=T.from,se=T.pcDisabled,ae=T.filesProps,ne=(0,C.useState)(""),de=(0,ie.Z)(ne,2),Ce=de[0],he=de[1],fe=(0,C.useState)(ae.attachmentData),Ee=(0,ie.Z)(fe,2),Y=Ee[0],oe=Ee[1],ve=md.global.Account.isPortal||_.get(window,"shareState.shareId");(0,C.useEffect)(function(){oe(ae.attachmentData)},[ae.attachmentData]);var ue=function(){return C.createElement(k.default,{autoInsertSpaceInButton:!1},C.createElement(K,{className:"mTop5 mBottom5"},C.createElement(re.default,{type:"link",onClick:D},_l("\u53D6\u6D88")),C.createElement(re.default,{type:"primary",onClick:function(){ae.onChangeAttachmentData(Y),D()}},_l("\u786E\u5B9A"))))};return C.createElement(q.Z,{title:_l("\u9644\u4EF6\u7F16\u8F91"),width:1080,visible:G,centered:!0,destroyOnClose:!0,closeIcon:C.createElement(p.Z,{icon:"close",className:"Font20 pointer Gray_9e"}),footer:ve||!ae.attachmentData.length?null:ue(),onCancel:D},C.createElement(I.Z,(0,R.default)({},ae,{showType:"1",isDeleteFile:!se,from:M,flag:Ce,attachmentData:Y,onChangeAttachmentData:function(Se){he(Se),oe(Se)}})))};var F=t(98306),h=t(52945),z=t.n(h);const X={getExAccountImportTemplate:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D.ajaxOptions=z()({},D.ajaxOptions,{type:"GET"}),mdyAPI("Download","GetExAccountImportTemplate",G,D)},verify:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D.ajaxOptions=z()({},D.ajaxOptions,{type:"GET"}),mdyAPI("Download","Verify",G,D)},exportFolderToExcel:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D.ajaxOptions=z()({},D.ajaxOptions,{type:"GET"}),mdyAPI("Download","ExportFolderToExcel",G,D)},exportCalendarByCalendarId:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D.ajaxOptions=z()({},D.ajaxOptions,{type:"GET"}),mdyAPI("Download","ExportCalendarByCalendarId",G,D)},exportCalendarByToken:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D.ajaxOptions=z()({},D.ajaxOptions,{type:"GET"}),mdyAPI("Download","ExportCalendarByToken",G,D)},exportSharedCalendar:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D.ajaxOptions=z()({},D.ajaxOptions,{type:"GET"}),mdyAPI("Download","ExportSharedCalendar",G,D)},exportProjectEntityToExcel:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D.ajaxOptions=z()({},D.ajaxOptions,{type:"GET"}),mdyAPI("Download","ExportProjectEntityToExcel",G,D)},exportProjectUserList:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Download","ExportProjectUserList",G,D)},exportImportUserFailList:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Download","ExportImportUserFailList",G,D)},exportImportEditUserFailList:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Download","ExportImportEditUserFailList",G,D)},exportFailJobOrDepartmentErrorList:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Download","ExportFailJobOrDepartmentErrorList",G,D)},exportProjectJobList:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Download","ExportProjectJobList",G,D)},exportProjectDepartmentList:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Download","ExportProjectDepartmentList",G,D)},downloadBankInfo:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D.ajaxOptions=z()({},D.ajaxOptions,{type:"GET"}),mdyAPI("Download","DownloadBankInfo",G,D)},customIcon:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Download","CustomIcon",G,D)},appFile:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D.ajaxOptions=z()({},D.ajaxOptions,{type:"GET"}),mdyAPI("Download","AppFile",G,D)},worksheetExcel:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D.ajaxOptions=z()({},D.ajaxOptions,{type:"GET"}),mdyAPI("Download","WorksheetExcel",G,D)},exportLoginLog:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Download","ExportLoginLog",G,D)},exportGlobalLogs:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Download","ExportGlobalLogs",G,D)},rowAttachments:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Download","RowAttachments",G,D)},downloadBackupFile:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D.ajaxOptions=z()({},D.ajaxOptions,{type:"GET"}),mdyAPI("Download","DownloadBackupFile",G,D)},appLibrary:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D.ajaxOptions=z()({},D.ajaxOptions,{type:"GET"}),mdyAPI("Download","AppLibrary",G,D)},plugin:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D.ajaxOptions=z()({},D.ajaxOptions,{type:"GET"}),mdyAPI("Download","Plugin",G,D)}};var B=t(45231),x=t(31742),Q=t(76345),i=t(15577),m=t(96486),v=t.n(m),W,P,u=(0,i.Q9)(),l=(P=W=function(T){(0,U.default)(G,T);function G(D){(0,d.default)(this,G);var M=(0,H.default)(this,(G.__proto__||o()(G)).call(this,D));M.detectionShowType=function(){M.setState({filesVisible:!1}),setTimeout(function(){if(M.fileBox){var ae=M.fileBox.clientWidth;M.setState({showType:ae<=560?"2":"3",filesVisible:!0})}else M.setState({filesVisible:!0})},0)},M.id=(0,O.Z)(),M.filesChanged=function(ae,ne){var de=M.props.enumDefault||3,Ce=JSON.parse(M.state.value||"[]"),he=v().isArray(Ce),fe={attachments:he?[]:Ce.attachments,knowledgeAtts:he?[]:Ce.knowledgeAtts,attachmentData:he?Ce:Ce.attachmentData};fe[ne]=ae,[2,3].includes(de)?(fe.attachmentData.forEach(function(Ee,Y){Ee.index=Y}),fe.attachments.forEach(function(Ee,Y){Ee.index=fe.attachmentData.length+Y}),fe.knowledgeAtts.forEach(function(Ee,Y){Ee.index=fe.attachmentData.length+fe.attachments.length+Y})):(fe.attachments.forEach(function(Ee,Y){Ee.index=Y}),fe.knowledgeAtts.forEach(function(Ee,Y){Ee.index=fe.attachments.length+Y}),fe.attachmentData.forEach(function(Ee,Y){Ee.index=fe.attachments.length+fe.knowledgeAtts.length+Y})),M.props.onChange(fe.attachments.length+fe.knowledgeAtts.length+fe.attachmentData.length===0?"":a()(fe))},M.filesChangedAll=function(ae){var ne=JSON.parse(M.state.value||"[]"),de=ae.attachments,Ce=ae.knowledgeAtts,he=ae.attachmentData,fe={};fe.attachments=de,fe.knowledgeAtts=Ce,fe.attachmentData=he,M.props.onChange(fe.attachments.length+fe.knowledgeAtts.length+fe.attachmentData.length===0?"":a()(fe))},M.handleSortAttachment=function(ae){var ne=M.props,de=ne.worksheetId,Ce=ne.viewId,he=ne.recordId,fe=ne.controlId,Ee=JSON.parse(M.state.value||"[]");B.Z.sortAttachment({worksheetId:de,viewId:Ce,rowId:he,controlId:fe,fileIds:ae.map(function(Y){return Y.fileID})}).then(function(Y){if(Y.resultCode===1){var oe={attachmentData:ae,attachments:Ee.attachments||[],knowledgeAtts:Ee.knowledgeAtts||[]};M.setState({value:a()(oe)})}})},M.handleAttachmentName=function(ae,ne,de){var Ce=JSON.parse(M.state.value||"[]"),he=v().isArray(Ce),fe={attachments:he?[]:Ce.attachments,knowledgeAtts:he?[]:Ce.knowledgeAtts,attachmentData:he?Ce:Ce.attachmentData},Ee=fe.attachmentData.map(function(J){return J.fileID===ae&&(J.originalFilename=ne),J});fe.attachmentData=Ee,M.setState({value:a()(fe)});var Y=M.props,oe=Y.appId,ve=Y.worksheetId,ue=Y.viewId,pe=Y.recordId,Se=Y.controlId,ye=Y.from;B.Z.editAttachmentName((0,R.default)({},de,{fileId:ae,fileName:ne,appId:oe,worksheetId:ve,viewId:ue,controlId:Se,rowId:pe,checkView:!0,getType:(0,S.AW)(ye)})).then(function(J){J.resultCode!==1&&alert(_l("\u4FEE\u6539\u5931\u8D25"),2)})},M.onCancelTemporary=function(){M.setState({temporaryAttachments:[],temporaryKnowledgeAtts:[],isComplete:null,uploadStart:!1})},M.onSaveTemporary=function(){var ae=JSON.parse(M.state.value||"[]"),ne=M.state,de=ne.temporaryAttachments,Ce=ne.temporaryKnowledgeAtts,he=ne.isComplete,fe=[],Ee=[];he&&(v().isArray(ae)||(fe=ae.attachments,Ee=ae.knowledgeAtts),new(te())(function(Y){de.length&&M.filesChanged(fe.concat(de),"attachments"),Y()}).then(function(){Ce.length&&M.filesChanged(Ee.concat(Ce),"knowledgeAtts"),M.onCancelTemporary()}))},M.getPopupContainer=function(){return $(M.fileBox).closest(".customFieldsContainer")[0]},M.handleDownloadAll=function(){var ae=M.state.downloadAllLoading,ne=M.props,de=ne.appId,Ce=ne.worksheetId,he=ne.viewId,fe=ne.recordId,Ee=ne.controlId,Y=ne.from;ae||(M.setState({downloadAllLoading:!0}),X.rowAttachments({appId:de,worksheetId:Ce,viewId:he,rowId:fe,controlId:Ee,checkView:!0,getType:Y===21?Y:1}).finally(function(){M.setState({downloadAllLoading:!1})}))},M.renderMobileUploadTrigger=function(ae){var ne=ae.className,de=ae.originCount,Ce=ae.attachments,he=ae.customHint,fe=ae.customUploadType,Ee=ae.icon,Y=ae.iconClass,oe=ae.styles,ve=oe===void 0?{}:oe,ue=M.props,pe=ue.from,Se=ue.appId,ye=ue.worksheetId,J=ue.projectId,me=ue.enumDefault2,be=ue.advancedSetting,xe=ue.strDefault,Ae=xe===void 0?"10":xe,Ne=ue.hint,Me=M.state,Fe=Me.isComplete,Be=Me.uploadStart,we=he||Ne||_l("\u6DFB\u52A0\u9644\u4EF6");return C.createElement("div",{className:j()("triggerTraget mobile",ne),style:(0,R.default)({height:34},ve)},C.createElement(A.w,{controlName:M.props.controlName,customUploadType:fe,from:pe,projectId:J,appId:Se,worksheetId:ye,className:"flexRow alignItemsCenter",inputType:me,advancedSetting:be,originCount:de,disabledGallery:Ae.split("")[0]==="1",files:Ce||[],onChange:function(ge){var Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;M.setState({isComplete:Re,uploadStart:!Re}),M.filesChanged(ge,"attachments")},ref:function(ge){M.mobileFileBox=ge}},C.createElement(p.Z,{className:j()("Gray_9e TxtMiddle",{iconClass:Y}),icon:Ee||"attachment"}),C.createElement("span",{className:"Gray Font13 mLeft5 addFileName overflow_ellipsis flex"},we),Fe===!1&&Be&&C.createElement("span",{className:"mLeft5 ThemeColor3 fileUpdateLoading"})))};var se=v().get(D,"advancedSetting.showtype")||"1";return M.state={value:D.value,loading:M.checkFileNeedLoad(D.value),temporaryAttachments:[],temporaryKnowledgeAtts:[],isComplete:null,uploadStart:!1,downloadAllLoading:!1,fileEditModalVisible:!1,showType:se==="0"?"1":se,filesVisible:!0},M}return(0,Z.default)(G,[{key:"componentDidMount",value:function(){this.state.loading&&this.loadAttachments(),v().get(this.props,"advancedSetting.showtype")==="3"&&this.detectionShowType()}},{key:"componentWillReceiveProps",value:function(M){M.value!==this.props.value&&(this.checkFileNeedLoad(M.value)?this.loadAttachments(M):this.setState({value:M.value})),v().get(M,"advancedSetting.showtype")==="3"&&M.formWidth!==this.props.formWidth&&this.detectionShowType()}},{key:"checkFileNeedLoad",value:function(M){if(!M)return!1;try{var se=JSON.parse(M)[0];return se?se.fileId&&!se.updateTime&&!se.createUserName:!1}catch(ae){}return!1}},{key:"loadAttachments",value:function(M){var se=this,ae=M||this.props,ne=ae.value,de=ae.worksheetId,Ce=ae.recordId,he=ae.controlId,fe=ae.isDraft,Ee=[];try{Ee=JSON.parse(ne).map(function(oe){return oe.fileId})}catch(oe){this.setState({loading:!1,value:""})}var Y={fileIds:Ee,worksheetId:de,rowId:Ce,controlId:he};window.shareState&&window.shareState.shareId&&(Y.shareId=window.shareState.shareId,Y.type=window.shareState.isPublicRecord?3:v().get(window,"shareState.isPublicForm")||v().get(window,"shareState.isPublicForm")?11:14),fe&&(Y.type=21),F.Z.getAttachmentToList(Y).then(function(oe){se.setState({loading:!1,value:a()(oe)})}).catch(function(oe){se.setState({loading:!1,value:""})})}},{key:"render",value:function(){var M=this,se=this.props,ae=se.from,ne=se.appId,de=se.worksheetId,Ce=se.recordId,he=se.sheetSwitchPermit,fe=he===void 0?[]:he,Ee=se.strDefault,Y=Ee===void 0?"10":Ee,oe=se.controlId,ve=se.projectId,ue=se.viewIdForPermit,pe=ue===void 0?"":ue,Se=se.enumDefault2,ye=se.advancedSetting,J=se.isSubList,me=se.disabled,be=se.hint,xe=se.flag,Ae=se.canAddKnowledge,Ne=Y.split("")[1]==="1",Me=this.state,Fe=Me.loading,Be=Me.value,we=Me.showType,Ie=Me.temporaryAttachments,ge=Me.temporaryKnowledgeAtts,Re=Me.isComplete,Pe=Me.uploadStart,ke=Me.filesVisible,We=Me.fileEditModalVisible,Ve=this.props.enumDefault||3,it=me||Ne,Ge=me,pt=be||_l("\u6DFB\u52A0\u9644\u4EF6");if(!Be&&Ne&&!u)return C.createElement("div",{className:j()("customFormControlBox Gray_bd")},C.createElement("div",{className:"Gray_9e",style:{height:34,lineHeight:"34px"}},_l("\u8BF7\u5728\u79FB\u52A8\u7AEF\u62CD\u6444\u540E\u4E0A\u4F20")));if(Fe)return null;var ot=$("#UploadFilesTriggerPanel"+this.id),vt=[],At=[],yt=[];if(Be&&v().isArray(JSON.parse(Be)))yt=JSON.parse(Be);else{var st=JSON.parse(Be||"{}");vt=st.attachments||[],At=st.knowledgeAtts||[],yt=st.attachmentData||[]}var St=vt.length+At.length+yt.length,Qe=(0,x.v)(Q.RX.recordAttachmentSwitch,fe,pe),Xe=ye.covertype||"0",$e=ye.alldownload!=="0"&&Qe&&!v().get(window,"shareState.shareId"),Ke={recordBaseInfo:{worksheetId:de,recordId:Ce},flag:xe,showType:we,coverType:Xe,controlId:oe,viewMore:!!Ce,allowDownload:!!v().get(window,"shareState.shareId")||Qe,allowSort:Ve===3&&(u?!1:!it),allowEditName:u?!1:!it&&!v().get(window,"shareState.shareId"),attachments:vt,knowledgeAtts:At,attachmentData:yt,onSortAttachment:this.handleSortAttachment,onAttachmentName:this.handleAttachmentName,onChangedAllFiles:this.filesChangedAll,onChangeAttachments:function(qe){return M.filesChanged(qe,"attachments")},onChangeKnowledgeAtts:function(qe){return M.filesChanged(qe,"knowledgeAtts")},onChangeAttachmentData:function(qe){return M.filesChanged(qe,"attachmentData")}};if(u){var Ue=Y.split("")[0]==="1",He=!Ue,ze=v().includes([1,3],Se),gt=v().includes([2,3],Se),Et={maxWidth:ze&&gt&&He?"calc(100% - 172px)":(ze||gt)&&He?"calc(100% - 86px)":"100%"};return C.createElement("div",{className:j()("customFormFileBox customFormAttachmentBox",{controlDisabled:Ge}),style:{height:"auto"}},!Ge&&C.createElement("div",{className:"flexRow"},He&&this.renderMobileUploadTrigger({originCount:St,strDefault:Y,attachments:vt,styles:Et}),ze&&this.renderMobileUploadTrigger({originCount:St,strDefault:Y,attachments:vt,customHint:_l("\u62CD\u7167"),customUploadType:"camara",className:j()({mLeft6:He}),icon:"camera_alt",iconClass:"Font16"}),gt&&this.renderMobileUploadTrigger({originCount:St,strDefault:Y,attachments:vt,customHint:_l("\u62CD\u6444"),customUploadType:"camcorder",className:j()({mLeft6:He||ze}),icon:"video2",iconClass:"Font18"})),C.createElement(I.Z,(0,R.default)({},Ke,{showType:["3"].includes(we)?"2":!me&&we==="4"?"1":we,isDeleteFile:!Ge,from:ae,removeUploadingFile:function(qe){M.mobileFileBox&&(M.setState({isComplete:!0}),M.mobileFileBox.currentFile.removeFile({id:qe.id}),M.filesChanged(vt.filter(function(nt){return nt.id!==qe.id}),"attachments"))}})))}return C.createElement("div",{className:j()("customFormControlBox customFormControlScore customFormAttachmentBox",{controlDisabled:it}),style:{height:"auto"},ref:function(qe){M.fileBox=qe}},C.createElement("div",{className:"flexRow valignWrapper spaceBetween"},it?C.createElement("div",{className:"flex"}):C.createElement(n.Z,{isQiniuUpload:!0,noTotal:!!(md.global.Account.projects&&md.global.Account.projects.length),id:this.id,from:ae,projectId:ve,appId:ne,worksheetId:de,offset:[0,2],canAddLink:!1,canAddKnowledge:Ae,minWidth:130,showAttInfo:!1,advancedSetting:ye,originCount:St,attachmentData:[],onUploadComplete:function(qe){M.setState({isComplete:qe},function(){!ot.is(":visible")&&Pe&&M.onSaveTemporary()}),setTimeout(function(){return M.setState({uploadStart:!0})},200)},temporaryData:Ie,onTemporaryDataUpdate:function(qe){return M.setState({temporaryAttachments:qe})},kcAttachmentData:ge,onKcAttachmentDataUpdate:function(qe){return M.setState({temporaryKnowledgeAtts:qe})},getPopupContainer:this.getPopupContainer,onCancel:this.onCancelTemporary,onOk:this.onSaveTemporary},C.createElement("div",{className:"pointer flexRow Font13 Gray_9e alignItemsCenter",style:{height:34}},C.createElement(p.Z,{icon:"attachment",className:"Font16"}),C.createElement("span",{className:"mLeft5 Gray addFileName overflow_ellipsis"},pt),Re===!1&&Pe&&C.createElement("span",{className:"mLeft5 ThemeColor3 fileUpdateLoading"},_l("(%0/%1\u4E2A\u9644\u4EF6\u4E0A\u4F20\u4E2D...)",ot.find(".UploadFiles-file-wrapper:not(.UploadFiles-fileEmpty)").length-ot.find(".Progress--circle").length,ot.find(".UploadFiles-file-wrapper:not(.UploadFiles-fileEmpty)").length)))),C.createElement("div",{className:"valignWrapper"},we==="4"&&C.createElement(C.Fragment,null,C.createElement(g.default,{title:_l("\u7BA1\u7406\u9644\u4EF6"),placement:"bottom"},C.createElement(p.Z,{className:"handleBtn Gray_9e Font18 pointer",icon:"application_custom",onClick:function(){return M.setState({fileEditModalVisible:!0})}})),C.createElement(N,{visible:We,onCancel:function(){return M.setState({fileEditModalVisible:!1})},filesProps:Ke,pcDisabled:it,from:ae})),$e&&!v().isEmpty(yt)&&C.createElement("div",{className:"flexRow valignWrapper"},C.createElement(g.default,{title:_l("\u5168\u90E8\u4E0B\u8F7D"),placement:"bottom"},C.createElement(p.Z,{className:"handleBtn Gray_9e Font18 pointer",icon:"download",onClick:this.handleDownloadAll}))))),ke&&C.createElement(I.Z,(0,R.default)({},Ke,{isDeleteFile:!it,from:ae})))}}]),G}(C.Component),W.propTypes={disabled:V().bool,value:V().any,from:V().number,enumDefault2:V().number,onChange:V().func},P)},31129:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>b});var ce=t(98658),g=t(68625),p=t(85105),L=t.n(p),te=t(99663),R=t(22600),y=t(49135),a=t(93196),r=t(86735),o=t(45697),d=t.n(o),Z=t(67294),H=t(71893),U=t(60726),f=t.n(U),V=t(24607),C=t(70518),O=t(94914),n=t(6917),s,j,A=(0,r.Z)([`
  cursor: pointer;
  display: inline-block;
  `,`
  `,`
  &:hover {
    `,`
  }
  img {
    `,`
    max-width: 100% !important;
    height: auto !important;
  }
`],[`
  cursor: pointer;
  display: inline-block;
  `,`
  `,`
  &:hover {
    `,`
  }
  img {
    `,`
    max-width: 100% !important;
    height: auto !important;
  }
`]),S=(0,r.Z)([`
  border-radius: 6px;
  width: 22px;
  height: 6px;
  background-color: #eaeaea;
  margin: 15px 0;
`],[`
  border-radius: 6px;
  width: 22px;
  height: 6px;
  background-color: #eaeaea;
  margin: 15px 0;
`]),I={"7%":1,"15%":0,"25%":3,"30%":2},c=H.ZP.span(A,function(k){var ee=k.isRecord;return ee&&"border: 1px solid #e6e6e6;"},function(k){var ee=k.isView;return ee?"height: 170px;":""},function(k){var ee=k.isRecord;return ee&&"box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.12);"},function(k){var ee=k.width;return ee&&"width: "+ee+"px;"}),q=H.ZP.div(S),b=(j=s=function(k){(0,a.default)(ee,k);function ee(){var re,ie,le,E;(0,te.default)(this,ee);for(var w=arguments.length,K=Array(w),N=0;N<w;N++)K[N]=arguments[N];return E=(ie=(le=(0,y.default)(this,(re=ee.__proto__||L()(ee)).call.apply(re,[this].concat(K))),le),le.state={value:""},le.updateValue=function(F){var h=le.props,z=h.enumDefault,X=h.enumDefault2,B=h.dataSource,x=h.recordId,Q=h.appId,i=h.worksheetId,m=h.viewIdForPermit,v=h.viewId,W=h.isView,P=(0,V.hC)({data:F,control:{enumDefault:z,enumDefault2:X,dataSource:(0,O.$v)(B)},codeInfo:{recordId:x,appId:Q,worksheetId:i,viewId:v||m}});if(P!==le.state.value){if(W){le.setState({value:P});return}le.barId=setTimeout(function(){le.setState({value:P})},100)}},le.onPreview=function(F){F.stopPropagation();var h=le.ImgCode.childNodes[0]?le.ImgCode.childNodes[0].src:"";h&&(0,C.x)(h,{disableDownload:!0,ext:"png",name:"code.png",theme:"light"})},ie),(0,y.default)(le,E)}return(0,R.default)(ee,[{key:"componentDidMount",value:function(){this.updateValue(this.props.formData)}},{key:"componentWillReceiveProps",value:function(ie){(ie.formData!==this.props.formData||ie.enumDefault2!==this.props.enumDefault2||ie.enumDefault!==this.props.enumDefault)&&this.updateValue(ie.formData)}},{key:"componentWillUnmount",value:function(){this.barId&&clearTimeout(this.barId)}},{key:"render",value:function(){var ie=this,le=this.props,E=le.isCell,w=le.advancedSetting;w=w===void 0?{}:w;var K=w.width,N=w.faultrate,F=le.enumDefault,h=le.isView,z=le.from,X=le.className,B=parseFloat(K),x=this.state.value;return this.state.value?Z.createElement(c,{isRecord:z===n.BD.RECORDINFO,isView:h,width:B,onClick:this.onPreview,ref:function(i){return ie.ImgCode=i},className:X},F===1?Z.createElement(g.Z,{value:x,renderer:"img",renderWidth:B}):Z.createElement(ce.Z,{gap:6,content:x,width:B,height:B,correctLevel:I[N]})):E?Z.createElement("span",null):h?Z.createElement("div",{className:"coverWrap emptyCoverWrap"},Z.createElement("img",{src:f()})):Z.createElement(q,null)}}]),ee}(Z.Component),s.propTypes={isCell:d().bool,enumDefault:d().number,enumDefault2:d().number,dataSource:d().string,formData:d().arrayOf(d().shape({})),advancedSetting:d().object},j)},68461:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>l});var ce=t(5912),g=t.n(ce),p=t(71535),L=t(19711),te=t.n(L),R=t(42378),y=t(46593),a=t.n(y),r=t(20148),o=t.n(r),d=t(60385),Z=t.n(d),H=t(95679),U=t(77040),f=t.n(U),V=t(94301),C=t.n(V),O=t(54208),n=t(33867),s=t(88106),j=t(63239),A=t.n(j),S=t(52945),I=t.n(S),c=t(88239),q=t(85105),b=t.n(q),k=t(99663),ee=t(22600),re=t(49135),ie=t(93196),le=t(45697),E=t.n(le),w=t(67294),K=t(45231),N=t(83298),F=t(93967),h=t.n(F),z=t(6917),X=t(3177),B=t.n(X),x=t(15577),Q=t(96486),i=t.n(Q),m=t(89499),v=t(26358),W,P,u=function(G){return(0,m.hB)(G)?{name:void 0,sid:""}:{name:(safeParse(G)[0]||{}).name||_l("\u672A\u547D\u540D"),sid:(safeParse(G)[0]||{}).sid||""}},l=(P=W=function(T){(0,ie.default)(G,T);function G(D){(0,k.default)(this,G);var M=(0,re.default)(this,(G.__proto__||b()(G)).call(this,D));M.ajax="",M.cacheData=[],M.sourcePath={},M.cacheScrollTop=0,M.treeSelectComp=w.createRef(),M.getLayer=function(ae){var ne=M.state,de=ne.options,Ce=ne.keywords,he=ne.searchOptions;if(Ce){var fe={currentItem:{},currentLayer:0};return(he||[]).forEach(function(Y){Y.value===ae&&(fe={currentLayer:i().findIndex(safeParse(Y.path,"array"),function(oe){return oe===Y.label}),currentItem:(0,c.default)({},Y,{isLeaf:!i().get(i().find(M.cacheData||[],function(oe){return oe.rowid===ae}),"childrenids")})})}),fe}function Ee(Y,oe){for(var ve=0;ve<Y.length;ve++){var ue=Y[ve];if(ue.value===ae)return{currentItem:ue,currentLayer:oe};if(i().isArray(ue.children)){var pe=Ee(ue.children,oe+1);if(pe)return pe}}}return Ee(de||[],0)},M.isEndLeaf=function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",ne=M.props.advancedSetting,de=ne===void 0?{}:ne,Ce=Number(de.limitlayer||"0");if(Ce>0&&ae){var he=M.getLayer(ae)||{},fe=he.currentLayer,Ee=fe===void 0?0:fe;return Ce-Ee===1}return!1},M.loadData=function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",ne=M.props,de=ne.dataSource,Ce=ne.controlId,he=ne.viewId,fe=ne.formData,Ee=ne.advancedSetting,Y=Ee===void 0?{}:Ee,oe=ne.worksheetId,ve=M.state,ue=ve.options,pe=ve.layersName,Se=M.state.keywords.trim(),ye=Y.topshow,J=ye===void 0?"0":ye;M.ajax&&M.ajax.abort();var me=(0,v.zK)({control:M.props,formData:fe})||[],be=[];J==="3"&&!ae&&(be=(0,v.zK)({control:M.props,formData:fe,filterKey:"topfilters"})||[]),M.ajax=K.Z.getFilterRows({worksheetId:de,viewId:he,filterControls:me,navGroupFilters:be,kanbanKey:ae,keywords:Se,pageIndex:1,pageSize:1e4,isGetWorksheet:!0,getType:10,controlId:Ce,relationWorksheetId:oe}),M.ajax.then(function(xe){if(xe.resultCode===1){var Ae=xe.template,Ne=Ae.controls.find(function(Fe){return Fe.attribute===1}),Me=xe.data.map(function(Fe){return{value:Fe.rowid,label:Ne&&(0,N.Z)(I()({},Ne,{value:Fe[Ne.controlId]}),{noMask:!0})||_l("\u672A\u547D\u540D"),path:Se?Fe.path:Fe.childrenids||Fe.path,isLeaf:Se||M.isEndLeaf(ae)?!0:!Fe.childrenids}});M.setState({control:Ne}),(0,x.Q9)()&&!ae&&!i().isArray(pe)&&M.setState({layersName:(i().find(xe.worksheet.views,function(Fe){return Fe.viewId===he})||{}).layersName||[]}),M.ajax="",M.cacheData=Se?xe.data:i().uniqBy(M.cacheData.concat(xe.data),"rowid"),M.deepDataUpdate(Se?"searchOptions":"options",i().cloneDeep(ue),Me,ae)}else M.setState({isError:!0})})},M.cascaderChange=function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],de=M.props,Ce=de.onChange,he=de.advancedSetting,fe=he.allpath,Ee=fe===void 0?"0":fe,Y=M.state.keywords,oe=ae.length-1,ve=ae[oe],ue=void 0,pe=void 0;if(!M.canUpdate(ve)){alert(_l("\u4E0D\u5728\u53EF\u9009\u8303\u56F4\u5185"),3);return}Y?(ue=JSON.parse(M.cacheData.find(function(Se){return Se.rowid===ve}).path),pe=+Ee?ue.join(" / "):ue[ue.length-1]):pe=ve?ne.slice(+Ee?0:oe).map(function(Se){return Se.label}).join(" / "):"",Ce(ve?A()([{sid:ve,name:pe,sourcevalue:A()(M.cacheData.find(function(Se){return Se.rowid===ve}))}]):""),M.setState({keywords:"",value:pe})},M.treeSelectChange=function(ae,ne){var de=M.props,Ce=de.onChange,he=de.advancedSetting,fe=he.allpath,Ee=fe===void 0?"0":fe,Y=M.state.keywords,oe=void 0,ve=void 0;if(!M.canUpdate(ae)){alert(_l("\u4E0D\u5728\u53EF\u9009\u8303\u56F4\u5185"),3);return}Y?(oe=JSON.parse(M.cacheData.find(function(ue){return ue.rowid===ae}).path),ve=+Ee?oe.join(" / "):oe[oe.length-1]):ve=+Ee?M.sourcePath[ae]:ne,Ce(ae?A()([{sid:ae,name:ve,sourcevalue:A()(M.cacheData.find(function(ue){return ue.rowid===ae}))}]):""),M.setState({keywords:"",value:ve})},M.handleSearch=i().throttle(function(){M.loadData()},500);var se=u(D.value);return M.state={sourceData:[],visible:!1,options:null,searchOptions:null,value:se.name,keywords:"",operatePath:[],selectedId:se.sid,selectItem:{},layersName:null,isError:!1,treeExpandedKeys:[]},M}return(0,ee.default)(G,[{key:"componentDidMount",value:function(){var M=this,se=this.props.visible;!i().isUndefined(se)&&se&&this.setState({visible:!0,popupVisible:!0},function(){M.loadData(),setTimeout(function(){M.treeSelectComp.current&&M.treeSelectComp.current.focus(),M.cascader&&M.cascader.focus()},30)})}},{key:"componentWillReceiveProps",value:function(M){var se=this.state.selectedId,ae=u(M.value);ae.sid!==se&&this.setState({value:ae.name,selectedId:ae.sid})}},{key:"componentDidUpdate",value:function(){var M=this.props.advancedSetting,se=M.showtype,ae=se===void 0?"3":se;this.state.visible&&this.text&&this.text.focus(),ae==="4"&&this.getTreeSelectEl()&&(this.getTreeSelectEl().scrollTop=this.cacheScrollTop)}},{key:"cacheTreePath",value:function(M){var se=this,ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";M.forEach(function(ne){se.sourcePath[ne.value]=ae+ne.label})}},{key:"renderLabel",value:function(M,se){var ae=this.state.keywords;if(ae){var ne=JSON.parse(M.path);return ne.map(function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Ce=arguments[1],he=Ce===ne.length-1;return de.search(new RegExp(ae.trim().replace(/([,.+?:()*\[\]^$|{}\\-])/g,"\\$1"),"i"))!==-1?w.createElement(w.Fragment,{key:Ce},w.createElement("span",{className:"ThemeColor3"},de),!he&&w.createElement("span",null," / ")):w.createElement(w.Fragment,{key:Ce},de,!he&&w.createElement("span",null," / "))})}return se&&(0,N.Z)(I()({},se,{value:M[se.controlId]}),{noMask:!0})||_l("\u672A\u547D\u540D")}},{key:"deepDataUpdate",value:function(M,se,ae,ne){var de=this;ne?se.forEach(function(Ce){Ce.value===ne?(Ce.children=ae,de.cacheTreePath(ae,de.sourcePath[ne]+" / ")):i().isArray(Ce.children)&&de.deepDataUpdate(M,Ce.children,ae,ne)}):(se=ae,this.cacheTreePath(ae)),this.setState((0,s.default)({},M,se))}},{key:"canUpdate",value:function(M){var se=this.props.advancedSetting,ae=se.anylevel,ne=ae===void 0?"0":ae,de=se.minlayer,Ce=de===void 0?"0":de,he=Number(Ce);if(!M)return!0;var fe=this.getLayer(M)||{},Ee=fe.currentItem,Y=Ee===void 0?{}:Ee,oe=fe.currentLayer,ve=oe===void 0?0:oe;return ne!=="1"?he?ve<he&&Y.isLeaf||ve>=he:!0:Y.isLeaf}},{key:"renderH5Header",value:function(){var M=this,se=this.props,ae=se.advancedSetting,ne=se.onChange,de=ae.anylevel,Ce=de===void 0?"0":de,he=ae.minlayer,fe=he===void 0?"0":he,Ee=this.state,Y=Ee.operatePath,oe=Ee.selectItem,ve=Ee.layersName,ue=Number(fe);return w.createElement("div",{className:"flexRow Font17 ThemeColor3 pLeft15 pRight15 relative",style:{height:46,alignItems:"center"}},Y.length?w.createElement("div",{onClick:function(){var Se=[].concat(Y);Se.pop(),M.setState({operatePath:Se})}},w.createElement(n.Z,{icon:"arrow-left-border"}),_l("\u8FD4\u56DE")):w.createElement("div",{onClick:function(){M.setState({visible:!1,operatePath:[],selectItem:{},value:"",selectedId:""}),ne("")}},_l("\u6E05\u9664")),w.createElement("div",{className:"flex"}),w.createElement("div",{className:"ellipsis Gray",style:{position:"absolute",left:"50%",marginLeft:-65,width:130}},(ve||[])[Y.length]||_l("%0\u7EA7",B().cn.encodeS(Y.length+1))),(ue&&!+Ce?Y.length>=ue:!+Ce)&&w.createElement("div",{onClick:function(){M.setState({visible:!1,operatePath:[],selectItem:{},selectedId:oe.id}),M.treeSelectChange(oe.id,oe.label)}},_l("\u786E\u5B9A")))}},{key:"getH5Options",value:function(){var M=this.state,se=M.options,ae=M.operatePath,ne=ae[ae.length-1]||"",de=[],Ce=function he(fe,Ee){fe.forEach(function(Y){Y.value===Ee?de=Y.children||[]:i().isArray(Y.children)&&he(Y.children,Ee)})};return ne?(Ce(se,ne),de):se}},{key:"renderH5Content",value:function(){var M=this,se=this.props.advancedSetting,ae=se.anylevel,ne=ae===void 0?"0":ae,de=se.minlayer,Ce=de===void 0?"0":de,he=se.limitlayer,fe=he===void 0?"0":he,Ee=this.state,Y=Ee.options,oe=Ee.operatePath,ve=Ee.selectedId,ue=Ee.selectItem,pe=Ee.isError,Se=Number(Ce),ye=Number(fe);if(pe)return w.createElement("div",{className:"mTop10"},_l("\u6570\u636E\u6E90\u5F02\u5E38"));if(Y===null)return w.createElement(O.Z,null);if(!Y.length)return w.createElement("div",{className:"mTop10"},_l("\u65E0\u6570\u636E"));var J=this.getH5Options().map(function(me){return ye&&ye===oe.length?(0,c.default)({},me,{isLeaf:!0}):me});return J.length?+ne?w.createElement(C(),null,J.map(function(me){return w.createElement(C().Item,{key:me.value,onClick:function(){me.isLeaf?(M.setState({visible:!1,operatePath:[],selectedId:me.value}),M.treeSelectChange(me.value,me.label)):M.setState({operatePath:oe.concat(me.value)},function(){M.loadData(me.value)})}},w.createElement("div",{className:"flexRow"},w.createElement("div",{className:"flex ellipsis"},me.label),!me.isLeaf&&w.createElement("div",{className:"pLeft10 Font16 Gray_9e"},w.createElement("i",{className:"icon-arrow-right-border"}))))})):Se?w.createElement(C(),null,J.map(function(me){return w.createElement(C().Item,{key:me.value,onClick:function(){oe.length>=Se||(me.isLeaf?(M.setState({visible:!1,operatePath:[],selectedId:me.value}),M.treeSelectChange(me.value,me.label)):M.setState({operatePath:oe.concat(me.value)},function(){M.loadData(me.value)}))}},oe.length>=Se?w.createElement("div",{className:"flexRow"},w.createElement(H.Z,{className:"flex cascaderRadio flexRow",text:me.label,checked:ue.id?me.value===ue.id:me.value===ve,onClick:function(){return M.setState({selectItem:{id:me.value,label:me.label}})}}),!me.isLeaf&&w.createElement(w.Fragment,null,w.createElement("div",{style:{borderRight:"1px solid #e0e0e0",height:18,marginTop:4}}),w.createElement("div",{className:"pLeft10 Font16 Gray_9e",onClick:function(xe){xe.stopPropagation(),M.setState({operatePath:oe.concat(me.value)},function(){M.loadData(me.value)})}},w.createElement("i",{className:"icon-arrow-right-border"})))):w.createElement("div",{className:"flexRow"},w.createElement("div",{className:"flex ellipsis"},me.label),!me.isLeaf&&w.createElement("div",{className:"pLeft10 Font16 Gray_9e"},w.createElement("i",{className:"icon-arrow-right-border"}))))})):w.createElement(C(),null,J.map(function(me){return w.createElement(C().Item,{key:me.value},w.createElement("div",{className:"flexRow"},w.createElement(H.Z,{className:"flex cascaderRadio flexRow",text:me.label,checked:ue.id?me.value===ue.id:me.value===ve,onClick:function(){return M.setState({selectItem:{id:me.value,label:me.label}})}}),!me.isLeaf&&w.createElement(w.Fragment,null,w.createElement("div",{style:{borderRight:"1px solid #e0e0e0",height:18,marginTop:4}}),w.createElement("div",{className:"pLeft10 Font16 Gray_9e",onClick:function(xe){xe.stopPropagation(),M.setState({operatePath:oe.concat(me.value)},function(){M.loadData(me.value)})}},w.createElement("i",{className:"icon-arrow-right-border"})))))})):w.createElement(O.Z,null)}},{key:"getTreeSelectEl",value:function(){var M=this.props.controlId;return $(".treeSelect_"+M+" .ant-select-tree-list")[0]}},{key:"render",value:function(){var M=this,se=this.props,ae=se.from,ne=se.disabled,de=se.controlId,Ce=se.advancedSetting,he=se.popupClassName,fe=se.popupPlacement,Ee=se.popupAlign,Y=se.treePopupAlign,oe=se.onPopupVisibleChange,ve=se.control,ue=se.hint,pe=Ce.showtype,Se=pe===void 0?"3":pe,ye=Ce.anylevel,J=ye===void 0?"0":ye,me=this.state,be=me.visible,xe=me.options,Ae=me.searchOptions,Ne=me.value,Me=me.keywords,Fe=me.isError,Be=me.treeExpandedKeys;return(0,x.Q9)()?w.createElement(w.Fragment,null,w.createElement("button",{type:"button",className:h()("customFormControlBox customFormButton flexRow",{controlDisabled:ne}),disabled:ne,onClick:function(){ne||(xe===null&&M.loadData(),M.setState({visible:!0}))}},w.createElement("span",{className:h()("flex mRight20 ellipsis",{Gray_bd:!Ne})},Ne||_l("\u8BF7\u9009\u62E9")),!ne&&w.createElement(n.Z,{icon:i().includes([z.BD.H5_ADD,z.BD.H5_EDIT],ae)?"arrow-right-border":"sp_pin_drop_white",className:"Font16 Gray_bd"})),be&&w.createElement(Z(),{className:"antModalRadius",popup:!0,visible:!0,onClose:function(){return M.setState({visible:!1,operatePath:[],selectItem:{}})},animationType:"slide-up"},this.renderH5Header(),w.createElement("div",{style:{height:280,overflowY:"auto"}},this.renderH5Content()))):Se==="4"?w.createElement(R.ZP,(0,c.default)({className:"w100 customAntSelect customTreeSelect",dropdownClassName:h()(he,"treeSelect_"+de),dropdownPopupAlign:Y,ref:this.treeSelectComp,disabled:ne,virtual:!1,placeholder:ue||_l("\u8BF7\u9009\u62E9"),showSearch:!0,allowClear:!!Ne,value:Ne?[Ne]:[],selectable:!+J,notFoundContent:w.createElement("div",{className:"Gray_9e pLeft12 pBottom5"},Me?Ae===null?_l("\u641C\u7D22\u4E2D..."):_l("\u65E0\u641C\u7D22\u7ED3\u679C"):Fe?_l("\u6570\u636E\u6E90\u5F02\u5E38"):xe===null?_l("\u6570\u636E\u52A0\u8F7D\u4E2D..."):_l("\u65E0\u6570\u636E")),treeData:Me?Ae||[]:xe||[],filterTreeNode:!1,treeExpandedKeys:Be,suffixIcon:w.createElement(n.Z,{icon:"arrow-down-border Font14"}),loadData:function(Ie){var ge=Ie.value;return new(a())(function(Re){M.loadData(ge),Re()})}},i().isUndefined(this.state.popupVisible)?{}:{open:this.state.popupVisible},{onChange:function(Ie,ge){(Ie||!Me.length)&&M.treeSelectChange(Ie,ge[0])},onSearch:function(Ie){return M.setState({keywords:Ie,treeExpandedKeys:[]},M.handleSearch)},onFocus:function(){M.setState({options:null,treeExpandedKeys:[]},function(){return M.loadData()})},onDropdownVisibleChange:oe,onTreeExpand:function(Ie){M.setState({treeExpandedKeys:Ie}),M.cacheScrollTop=M.getTreeSelectEl().scrollTop}})):w.createElement(p.Z,(0,c.default)({ref:function(Ie){M.cascader=Ie},allowClear:!0,showSearch:{filter:function(Ie){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Re=ge;return+J&&(Re=ge.filter(function(Pe){return!i().find(M.cacheData,function(ke){return ke.pid===Pe.value})})),Re.some(function(Pe){return JSON.parse(Pe.path||"[]").join("/").search(new RegExp(Ie.trim().replace(/([,.+?:()*\[\]^$|{}\\-])/g,"\\$1"),"i"))!==-1})},render:function(Ie){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return M.renderLabel({path:ge[0].path},ve)},matchInputWidth:!1},searchValue:Me,className:"w100 customCascader",popupClassName:he,popupAlign:Ee,popupPlacement:fe,disabled:ne,placeholder:Ne?"":ue||_l("\u8BF7\u9009\u62E9"),changeOnSelect:!+J,value:Ne?[Ne]:[],displayRender:function(){return w.createElement("span",{className:"breakAll"},Ne)},options:Me?Ae||[]:xe||[],notFoundContent:Me?Ae===null?_l("\u641C\u7D22\u4E2D..."):_l("\u65E0\u641C\u7D22\u7ED3\u679C"):Fe?_l("\u6570\u636E\u6E90\u5F02\u5E38"):xe===null?_l("\u6570\u636E\u52A0\u8F7D\u4E2D..."):_l("\u65E0\u6570\u636E"),loadData:function(Ie){return M.loadData(Ie[Ie.length-1].value)},onChange:this.cascaderChange,onSearch:function(Ie){return M.setState({keywords:Ie},M.handleSearch)},suffixIcon:w.createElement(n.Z,{icon:"arrow-down-border Font14"})},i().isUndefined(this.state.popupVisible)?{}:{open:this.state.popupVisible},{onDropdownVisibleChange:function(Ie){M.setState({visible:Ie,options:null,keywords:""}),Ie&&M.loadData(),oe(Ie)},clearIcon:w.createElement(n.Z,{icon:"closeelement-bg-circle Font14 customCascaderDel"})}))}}]),G}(w.Component),W.propTypes={from:E().number,visible:E().bool,disabled:E().bool,popupClassName:E().string,popupPlacement:E().string,popupAlign:E().shape({}),treePopupAlign:E().shape({}),controlId:E().string,value:E().string,onChange:E().func,dataSource:E().string,viewId:E().string,advancedSetting:E().object,onPopupVisibleChange:E().func},W.defaultProps={onPopupVisibleChange:function(){}},P)},98084:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>V});var ce=t(62745),g=t(88239),p=t(63239),L=t.n(p),te=t(85105),R=t.n(te),y=t(99663),a=t(22600),r=t(49135),o=t(93196),d=t(67294),Z=t(24607),H=t(15577),U=t(93967),f=t.n(U),V=function(C){(0,o.default)(O,C);function O(){var n,s,j,A;(0,y.default)(this,O);for(var S=arguments.length,I=Array(S),c=0;c<S;c++)I[c]=arguments[c];return A=(s=(j=(0,r.default)(this,(n=O.__proto__||R()(O)).call.apply(n,[this].concat(I))),j),j.isOnComposition=!1,j.handleChange=function(q,b){var k=j.props,ee=k.onChange,re=k.changeValue,ie=re===void 0?function(){}:re,le=q.map(function(E){return E==="other"&&b?"other:"+b:E});ee(L()(le)),ie(b)},s),(0,r.default)(j,A)}return(0,a.default)(O,[{key:"componentWillReceiveProps",value:function(s){if(this.text){var j=(0,Z.Ec)(s.value),A=j.otherValue;this.text.value=(A||"").replace(/\r\n|\n/g," ")}}},{key:"render",value:function(){var s=this,j=this.props,A=j.isSubList,S=j.type,I=j.advancedSetting,c=I===void 0?{}:I,q=j.value,b=j.options,k=j.isSelect,ee=j.className,re=j.disabled,ie=j.fromFilter,le=(0,Z.Ec)(q),E=le.checkIds,w=le.otherValue;if(ie||re&&!w)return null;var K=b.filter(function(F){return!F.isDeleted}),N={onCompositionStart:function(){return s.isOnComposition=!0},onCompositionEnd:function(h){h.type==="compositionend"&&(s.isOnComposition=!1),window.isChrome&&s.handleChange(E,h.target.value.trim())}};return E.includes("other")&&K.find(function(F){return F.key==="other"})&&(!A||S!==10)?d.createElement("div",{className:ee,style:k||re?{}:{paddingLeft:"26px"}},d.createElement(ce.Z,(0,g.default)({maxLength:200,disabled:re,className:f()("customFormControlBox customFormTextareaBox escclose",{mTop10:k,mobileCustomFormTextareaBox:(0,H.Q9)(),controlDisabled:re}),manualRef:function(h){s.text=h},minHeight:36,maxHeight:400,spellCheck:!1,defaultValue:w||"",placeholder:c.otherhint,onChange:function(h){s.isOnComposition||s.handleChange(E,h.trim())},onBlur:function(h){s.handleChange(E,h.target.value.trim())}},N))):null}}]),O}(d.Component)},17529:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>h});var ce=t(77040),g=t(94301),p=t.n(g),L=t(33867),te=t(60967),R=t(85105),y=t.n(R),a=t(99663),r=t(22600),o=t(49135),d=t(93196),Z=t(45697),H=t.n(Z),U=t(67294),f=t(44950),V=t(1694),C=t(56933),O=t(96486),n=t.n(O),s,j,A=(j=s=function(z){(0,d.default)(X,z);function X(){var B,x,Q,i;(0,a.default)(this,X);for(var m=arguments.length,v=Array(m),W=0;W<m;W++)v[W]=arguments[W];return i=(x=(Q=(0,o.default)(this,(B=X.__proto__||y()(X)).call.apply(B,[this].concat(v))),Q),Q.state={visible:!1,selectChecked:[],keywords:""},x),(0,o.default)(Q,i)}return(0,r.default)(X,[{key:"onChange",value:function(x){var Q=this.state.selectChecked;n().includes(Q,x)?n().remove(Q,function(i){return i===x}):Q.push(x),this.setState({selectChecked:Q})}},{key:"render",value:function(){var x=this,Q=this.props,i=Q.disabled,m=Q.allowAdd,v=Q.children,W=Q.data,P=Q.checked,u=Q.callback,l=Q.renderText,T=Q.otherValue,G=Q.controlName,D=Q.delOptions,M=D===void 0?[]:D,se=this.state,ae=se.visible,ne=se.selectChecked,de=se.keywords,Ce=[].concat(W).filter(function(Ee){return!Ee.isDeleted&&!Ee.hide}),he=Ce.length<V.tC;ne.forEach(function(Ee){(Ee||"").indexOf("add_")>-1&&Ce.push({key:Ee,color:"#2196F3",value:Ee.split("add_")[1]})});var fe=ne.map(function(Ee){return n().includes(Ee,"other")?"other:"+T:Ee});return U.createElement(U.Fragment,null,U.createElement("span",{onClick:function(){return!i&&x.setState({visible:!0,selectChecked:[].concat(P)})}},v||Ce.map(function(Ee){return U.createElement(te.Z,{className:"flexRow alignItemsCenter",key:Ee.key,text:Ee.value,value:Ee.key,checked:n().includes(P,Ee.key)})})),U.createElement(f.n,{popup:!0,visible:ae,animationType:"slide-up",maskClosable:!1,className:"mobileCheckboxDialog"},U.createElement("div",{className:"flexColumn h100"},U.createElement("div",{className:"flexRow valignWrapper mobileCheckboxBtnsWrapper pLeft15 pRight15"},U.createElement("div",{className:"Hand ThemeColor bold Font15 mRight10",onClick:function(){return x.setState({selectChecked:[],visible:!1})}},_l("\u5173\u95ED")),U.createElement("div",{className:"Font15 Gray bold flex ellipsis TxtCenter"},G),U.createElement("div",{className:"Hand ThemeColor bold Font15 mLeft10",onClick:function(){x.setState({visible:!1}),u(ne)}},_l("\u786E\u5B9A"))),U.createElement("div",{className:"mobileCheckboxSearchWrapper"},U.createElement(L.Z,{icon:"h5_search"}),U.createElement("input",{className:"flex",type:"search",placeholder:m?_l("\u641C\u7D22\u6216\u6DFB\u52A0\u9009\u9879"):_l("\u641C\u7D22"),value:de,onChange:function(Y){return x.setState({keywords:Y.target.value})}}),de&&U.createElement(L.Z,{icon:"workflow_cancel",onClick:function(){x.setState({keywords:""})}})),U.createElement(p(),{className:"flex",style:{overflow:"auto"}},!de.length&&!!ne.length&&U.createElement(p().Item,{className:"mLeft31",onClick:function(){return x.setState({selectChecked:[]})}},U.createElement("span",{className:"Font15 ThemeColor3"},_l("\u6E05\u9664\u9009\u62E9"))),Ce.filter(function(Ee){return Ee.value.indexOf(de)>-1}).map(function(Ee){return U.createElement(p().Item,{key:Ee.key,onClick:function(){return x.onChange(Ee.key)}},U.createElement(te.Z,{className:"flexRow alignItemsCenter",text:l?l(Ee):Ee.value,value:Ee.key,checked:n().includes(ne,Ee.key)}))}),!!de.length&&m&&!Ce.find(function(Ee){return Ee.value===de})&&he&&U.createElement(p().Item,{onClick:function(){if(n().trim(de)){x.setState({keywords:""});var Y=n().find(M,function(oe){return oe.value===de});if(Y)return alert(_l("\u4E0D\u5F97\u4E0E\u5DF2\u6709\u9009\u9879\uFF08\u5305\u62EC\u56DE\u6536\u7AD9\uFF09\u91CD\u590D"),2);x.onChange("add_"+de)}}},U.createElement("span",{className:"ellipsis ThemeColor3 Font15"},_l("\u6DFB\u52A0\u65B0\u7684\u9009\u9879\uFF1A")+de))))))}}]),X}(U.Component),s.propTypes={disabled:H().bool,allowAdd:H().bool,callback:H().func,data:H().array,checked:H().array,renderText:H().any},s.defaultProps={disabled:!1,allowAdd:!1,callback:function(){},data:[],checked:[]},j),S=t(34279),I=t(64749),c=t(88239),q=t(63239),b=t.n(q),k=t(93967),ee=t.n(k),re=t(15577),ie=t(6917),le=t(98084),E=t(24607),w=t(40240),K,N,F=(N=K=function(z){(0,d.default)(X,z);function X(B){(0,a.default)(this,X);var x=(0,o.default)(this,(X.__proto__||y()(X)).call(this,B));return x.renderList=function(Q,i){var m=x.props,v=m.enumDefault2,W=m.from,P=m.advancedSetting,u=m.value,l=m.disabled,T=(0,E.Ec)(u),G=T.otherValue,D=P||{},M=D.checktype,se=D.direction;return U.createElement("span",{className:ee()("customRadioItem WordBreak",{White:v===1&&!(0,re.eO)(Q.color),ellipsis:!(0,re.Q9)()},{"pLeft12 pRight12":v===1,horizonArrangementItem:M=="2"&&(se==="0"||se==="2")&&(0,re.Q9)(),showRadioTxtAll:(0,re.Q9)()}),style:{background:v===1?Q.color:"",maxWidth:i?"auto":n().includes([ie.BD.H5_ADD,ie.BD.H5_EDIT],W)||(0,re.Q9)()?"unset":140}},Q.key==="other"&&G&&l&&(0,re.Q9)()?G:Q.value)},x.onChange=function(Q,i){var m=x.props.value,v=JSON.parse(m||"[]");Q?n().remove(v,function(W){return i==="other"?W.startsWith(i):W===i}):v.push(i),x.onSave(v)},x.onSave=function(Q){x.props.onChange(b()(Q))},x.tagRender=function(Q){var i=Q.value,m=Q.onClose,v=x.props,W=v.enumDefault2,P=v.options,u=x.state.isFocus,l=(0,E.Ec)(x.props.value),T=l.checkIds,G=P.find(function(M){return M.key===i})||{color:"#2196f3"},D=(i||"").toString().indexOf("add_")>-1?i.split("add_")[1]:G.value;return U.createElement("span",{key:i,className:ee()("mTop5 mBottom5 mRight5",{White:W===1&&!(0,re.eO)(G.color),isEmpty:i==="isEmpty"},W===1||u?"customAntDropdownTitleWithBG":"customAntDropdownTitle"),style:{background:W===1?G.color:u?"#eaeaea":""},title:D},U.createElement("div",{className:"ellipsis Font13"},D,W!==1&&!u&&i!==T[T.length-1]&&","),u&&U.createElement(L.Z,{icon:ee()("close Font14 mLeft5 pointer",{White:W===1&&!(0,re.eO)(G.color)}),onMouseDown:function(se){se.preventDefault(),se.stopPropagation()},onClick:m,hint:_l("\u5220\u9664"),style:{marginRight:-3,lineHeight:"24px"}}))},x.state={isFocus:B.isFocus||!1,keywords:""},x}return(0,r.default)(X,[{key:"getItemWidth",value:function(x){var Q=this.props.advancedSetting,i=Q.width,m=i===void 0?"200":i,v=Q.direction,W=v===void 0?"2":v,P=100,u=this.props.width;if(u&&W==="0"){var l=Math.floor(u/Number(m))||1;P=100/(l>x.length?x.length:l)}return P+"%"}},{key:"pcContent",value:function(x){var Q=this,i=this.props,m=i.disabled,v=i.options,W=i.value,P=i.advancedSetting,u=P||{},l=u.direction,T=l===void 0?"2":l,G=u.width,D=G===void 0?"200":G,M=v.filter(function(ae){return!ae.isDeleted&&(n().includes(x,ae.key)||!ae.hide&&!m)}),se=T==="0"&&!(0,re.Q9)()&&D;return M.map(function(ae){return ae.key==="other"&&m&&(0,re.Q9)()?U.createElement("div",{className:"flexColumn",style:T==="0"&&!(0,re.Q9)()?{width:D+"px"}:{}},U.createElement(te.Z,{key:ae.key,disabled:m,title:ae.value,text:Q.renderList(ae,se),value:ae.key,checked:n().includes(x,ae.key),onClick:Q.onChange})):U.createElement("div",{className:"flexColumn",style:T==="0"&&!(0,re.Q9)()?{width:Q.getItemWidth(M)}:{}},U.createElement("div",{className:"flexColumn",style:T==="0"&&!(0,re.Q9)()?{width:D+"px"}:{}},U.createElement(te.Z,{className:ee()("w100",{flexWidth:se}),key:ae.key,disabled:m,title:ae.value,text:Q.renderList(ae,se),value:ae.key,checked:n().includes(x,ae.key),onClick:Q.onChange}),ae.key==="other"&&U.createElement(le.Z,(0,c.default)({},Q.props,{isSelect:!!(0,re.Q9)()}))))})}},{key:"wxContent",value:function(x){var Q=this,i=this.props,m=i.options,v=i.disabled,W=i.value,P=(0,E.Ec)(W),u=P.otherValue,l=[];return x.forEach(function(T){(T||"").toString().indexOf("add_")>-1?l.push({key:T,color:"#2196F3",value:T.split("add_")[1]}):l.push(m.find(function(G){return G.key===T&&!G.isDeleted}))}),U.createElement(U.Fragment,null,U.createElement("div",{className:"flexRow h100",style:{alignItems:"center",minHeight:34}},U.createElement("div",{className:"flex minWidth0"},l.filter(function(T){return T}).map(function(T){return U.createElement("div",{key:T.key,className:"mTop5 mBottom5"},Q.renderList(T))})),!v&&U.createElement(L.Z,{icon:"arrow-right-border",className:"Font16 Gray_bd",style:{marginRight:-5}})))}},{key:"dropdownContent",value:function(x){var Q=this,i=this.props,m=i.isSheet,v=i.disabled,W=i.hint,P=i.options,u=i.dropdownClassName,l=i.advancedSetting,T=l===void 0?{}:l,G=i.selectProps,D=i.onChange,M=P.filter(function(ne){return!ne.isDeleted&&!ne.hide}),se=M.length<V.tC,ae=this.state.keywords;return x.forEach(function(ne){(ne||"").toString().indexOf("add_")>-1&&M.push({key:ne,color:"#2196F3",value:ne.split("add_")[1]})}),ae.length&&(M=M.filter(function(ne){return(ne.value||"").search(new RegExp(ae.trim().replace(/([,.+?:()*\[\]^$|{}\\-])/g,"\\$1"),"i"))!==-1})),U.createElement(U.Fragment,null,U.createElement(I.default,(0,c.default)({ref:function(de){Q.select=de},mode:"multiple",dropdownClassName:u,className:"w100 customAntSelect",disabled:v,showSearch:!0,allowClear:x.length>0,listHeight:320,placeholder:W,value:x,tagRender:this.tagRender,showArrow:!0,suffixIcon:U.createElement(L.Z,{icon:"arrow-down-border Font14"}),filterOption:function(){return!0},notFoundContent:U.createElement("span",{className:"Gray_9e"},_l("\u65E0\u641C\u7D22\u7ED3\u679C")),onSearch:function(de){return Q.setState({keywords:de.trim()})},onDropdownVisibleChange:function(de){Q.setState({keywords:"",isFocus:de}),!de&&Q.select.blur(),de&&x.indexOf("isEmpty")>-1&&D(b()([]))},onChange:function(de){if(de.indexOf("isEmpty")>-1){D(b()(["isEmpty"])),Q.select.blur();return}D(b()(de)),Q.setState({keywords:""})}},G),!ae.length&&T.allowadd==="1"&&se&&U.createElement(I.default.Option,{disabled:!0,className:"cursorDefault"},U.createElement("span",{className:"ellipsis customRadioItem Gray_9e"},_l("\u6216\u76F4\u63A5\u8F93\u5165\u6DFB\u52A0\u65B0\u9009\u9879"))),M.map(function(ne,de){return U.createElement(I.default.Option,{value:ne.key,key:de,className:ee()({isEmpty:ne.key==="isEmpty"})},Q.renderList(ne,!0))}),!!ae.length&&!M.find(function(ne){return ne.value===ae})&&T.allowadd==="1"&&se&&U.createElement(I.default.Option,{value:"add_"+ae},U.createElement("span",{className:"ellipsis customRadioItem ThemeColor3"},_l("\u6DFB\u52A0\u65B0\u7684\u9009\u9879\uFF1A")+ae))),!m&&U.createElement(le.Z,(0,c.default)({},this.props,{isSelect:!0})))}},{key:"render",value:function(){var x=this.props,Q=x.isSheet,i=x.disabled,m=x.options,v=x.advancedSetting,W=x.value,P=x.controlName,u=(0,E.Ec)(W),l=u.checkIds,T=u.otherValue,G=v||{},D=G.checktype,M=G.direction,se=G.allowadd,ae=D==="1"&&(0,re.Q9)(),ne=ae?A:U.Fragment;return D==="1"&&!(0,re.Q9)()?this.dropdownContent(l):U.createElement(U.Fragment,null,U.createElement(ne,{disabled:i,allowAdd:D==="1"&&se==="1",data:m.filter(function(de){return!de.isDeleted&&!de.hide}),delOptions:m.filter(function(de){return de.isDeleted||de.hide}),checked:l,callback:this.onSave,renderText:this.renderList,otherValue:T,controlName:P},U.createElement("div",{className:ee()("customFormControlBox",{formBoxNoBorder:!ae},{controlDisabled:i}),style:{height:"auto"}},U.createElement("div",{className:ee()("ming CheckboxGroup",{groupColumn:M==="1"||D==="1"&&ae,groupRow:M==="2"&&!ae})},ae?this.wxContent(l):this.pcContent(l)))),ae&&JSON.parse(W||"[]").some(function(de){return n().includes(de,"other")})&&!i&&!Q&&U.createElement(le.Z,(0,c.default)({},this.props,{className:"mTop5",isSelect:!0})))}}]),X}(U.Component),K.propTypes={from:H().number,disabled:H().bool,isFocus:H().bool,options:H().any,value:H().string,enumDefault2:H().number,onChange:H().func},N);const h=(0,w.Z)(F,{onlyWidth:!0})},43514:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>K});var ce=t(6538),g=t.n(ce),p=t(14321),L=t(88239),te=t(17206),R=t(33867),y=t(52945),a=t.n(y),r=t(85105),o=t.n(r),d=t(99663),Z=t(22600),H=t(49135),U=t(93196),f=t(45697),V=t.n(f),C=t(67294),O=t(93967),n=t.n(O),s=t(6917),j=t(43792),A=t(19458),S=t(13681),I=t(2e3),c=t(36612),q=t(24607),b=t(15577),k=t(94914),ee=t(30381),re=t.n(ee),ie=t(96486),le=t.n(ie),E,w,K=(w=E=function(N){(0,U.default)(F,N);function F(){var h,z,X,B;(0,d.default)(this,F);for(var x=arguments.length,Q=Array(x),i=0;i<x;i++)Q[i]=arguments[i];return B=(z=(X=(0,H.default)(this,(h=F.__proto__||o()(F)).call.apply(h,[this].concat(Q))),X),X.state={isFocus:!1,originValue:"",dateProps:(0,k.eO)(X.props),showMobileDatePicker:!1},X.onChange=function(m){var v=X.props.type,W=X.state.dateProps,P=W===void 0?{}:W;if(m){var u=re()(re()(m).format(P.formatMode));m=v===15?u.format("YYYY-MM-DD"):(0,b.kc)(u)}X.props.onChange(m)},z),(0,H.default)(X,B)}return(0,Z.default)(F,[{key:"componentWillReceiveProps",value:function(z){(z.advancedSetting||{}).showtype!==(this.props.advancedSetting||{}).showtype&&this.setState({dateProps:(0,k.eO)(z)})}},{key:"render",value:function(){var z=this,X=this.props,B=X.dropdownClassName,x=X.disabled,Q=X.type,i=X.controlId,m=X.from,v=X.controlName,W=X.advancedSetting,P=W===void 0?{}:W,u=X.compProps,l=u===void 0?{}:u,T=X.formData,G=X.masterData,D=X.onBlur,M=this.state,se=M.originValue,ae=M.dateProps,ne=ae===void 0?{}:ae,de=M.isFocus,Ce=this.props.value;/^\d+$/.test(String(Ce))&&String(Ce).length<5&&(Ce="");var he=(0,k.VL)(this.props),fe=P.allowweek||"1234567",Ee=P.allowtime||"00:00-24:00",Y=parseInt(P.timeinterval||"1"),oe=getCookie("i18n_langtag")||md.global.Config.DefaultLang,ve=le().includes(["zh-Hans","zh-Hant"],oe)&&de,ue=ve?le().get((0,k.eO)(this.props),"formatMode"):he,pe=void 0,Se=void 0,ye=void 0;if(P.min&&(Se=(0,c.QX)(T,a()({},this.props,{advancedSetting:{defsource:P.min}}),G)),P.max&&(ye=(0,c.QX)(T,a()({},this.props,{advancedSetting:{defsource:P.max}}),G)),(0,b.Q9)()){var J=ne.formatMode==="YYYY-MM-DD HH"?"hour":ne.formatMode==="YYYY-MM-DD HH:mm"?"minite":"second",me=ne.mode==="year"||ne.mode==="month"||ne.mode==="date"?ne.mode:J,be=Q===15?Ce:(0,b.LX)(Ce);return C.createElement(C.Fragment,null,C.createElement("div",{className:n()("customFormControlBox customFormButton flexRow",{controlDisabled:x}),onClick:function(){!x&&z.setState({showMobileDatePicker:!0})}},C.createElement("span",{className:n()("flex mRight20 ellipsis",{Gray_bd:!Ce})},Ce?re()(Q===15?Ce:(0,b.LX)(Ce)).format(he):_l("\u8BF7\u9009\u62E9\u65E5\u671F")),!x&&C.createElement(R.Z,{icon:le().includes([s.BD.H5_ADD,s.BD.H5_EDIT],m)?"arrow-right-border":"bellSchedule",className:"Font16 Gray_bd"})),this.state.showMobileDatePicker&&C.createElement(te.Z,{minuteStep:Y,customHeader:v,isOpen:this.state.showMobileDatePicker,precision:me,value:be,min:Se?new Date(re()(Se)):new Date(1900,1,1,0,0,0),max:ye?new Date(re()(ye)):new Date(2100,12,31,23,59,59),disabled:x,onSelect:function(Ne){z.onChange(Ne),z.setState({showMobileDatePicker:!1})},onCancel:function(){z.setState({showMobileDatePicker:!1}),z.onChange(null)}}))}var xe=Ee.split("-");return Q===16&&this.props.showTime!==!1&&(pe={defaultValue:parseInt(xe[0])===0&&parseInt(xe[1])===24?re()():re()(xe[0],"HH:mm")}),C.createElement(p.default,(0,L.default)({className:n()("w100 customAntPicker customFormControlBox",{controlDisabled:x}),locale:oe==="en"?S.Z:oe==="ja"?I.Z:oe==="zh-Hant"?A.Z:j.Z,disabled:x,value:Ce?re()(Q===15?Ce:(0,b.LX)(Ce)):"",picker:ne.mode==="datetime"?"date":ne.mode,showTime:pe||!1,format:ue,placeholder:this.state.isFocus?he:_l("\u8BF7\u9009\u62E9\u65E5\u671F"),suffixIcon:x?null:C.createElement(R.Z,{icon:le().includes([s.BD.H5_ADD,s.BD.H5_EDIT],m)?"arrow-right-border":"bellSchedule",className:"Font14 Gray_bd"}),hideDisabledOptions:!0,minuteStep:Y,disabledDate:function(Ne){if(Ne){var Me=Ne.day(),Fe=!0;return Se&&Fe&&(Fe=Ne.isSameOrAfter(re()(Se),"day")),ye&&Fe&&(Fe=Ne.isSameOrBefore(re()(ye),"day")),fe.indexOf(Me===0?"7":Me)===-1||!Fe}},disabledTime:function(Ne){return{disabledHours:function(){for(var Fe=parseInt(Ee.split("-")[0]),Be=Ee.split("-")[1],we=[],Ie=0;Ie<24;Ie++)(Ie<Fe||(0,q.hU)(Ie+":00",Be,"isAfter"))&&we.push(Ie);if(Ne&&Se&&re()(Ne).isSame(re()(Se),"day"))for(var ge=0;ge<24;ge++)Se.split(" ")[1]&&ge<re()(Se).hour()&&we.push(ge);if(Ne&&ye&&re()(Ne).isSame(re()(ye),"day"))for(var Re=0;Re<24;Re++)ye.split(" ")[1]&&Re>re()(ye).hour()&&we.push(Re);return we},disabledMinutes:function(Fe){for(var Be=Ee.split("-")[0],we=Ee.split("-")[1],Ie=[],ge=0;ge<60;ge++)((0,q.hU)(Fe+":"+ge,Be,"isBefore")||(0,q.hU)(Fe+":"+ge,we,"isAfter"))&&Ie.push(ge);if(Ne&&Se&&re()(Ne).isSame(re()(Se),"day"))for(var Re=0;Re<60;Re++)re()(Ne).hour()===re()(ye).hour()&&Re<re()(Se).minute()&&Ie.push(Re);if(Ne&&ye&&re()(Ne).isSame(re()(ye),"day"))for(var Pe=0;Pe<60;Pe++)re()(Ne).hour()===re()(ye).hour()&&Pe>re()(ye).minute()&&Ie.push(Pe);return Ie}}},dropdownClassName:"customAntPicker_"+i+" "+(B||""),onOpenChange:function(Ne){Ne&&parseInt(xe[0])===0&&parseInt(xe[1])===24&&setTimeout(function(){$(".customAntPicker_"+i).find(".ant-picker-time-panel-column:first").scrollTop(220)},200)},onFocus:function(Ne){return z.setState({isFocus:!0,originValue:Ne.target.value.trim()})},onBlur:function(){z.setState({isFocus:!1}),D(se)},onChange:this.onChange},l))}}]),F}(C.Component),E.propTypes={dropdownClassName:V().string,advancedSetting:V().object,from:V().number,type:V().number,disabled:V().bool,controlId:V().string,value:V().string,onChange:V().func,formData:V().arrayOf(V().shape({})),masterData:V().object,onBlur:V().func},E.defaultProps={onBlur:function(){}},w)},82570:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>h});var ce=t(22552),g=t(63239),p=t.n(g),L=t(85105),te=t.n(L),R=t(99663),y=t(22600),a=t(49135),r=t(93196),o=t(67294),d=t(34279),Z=t(64749),H=t(72444),U=t(95679),f=t(77040),V=t(94301),C=t.n(V),O=t(33867),n=t(45697),s=t.n(n),j=t(44950),A=t(1694),S=t(56933),I=t(96486),c=t.n(I),q,b,k=(b=q=function(z){(0,r.default)(X,z);function X(){var B,x,Q,i;(0,R.default)(this,X);for(var m=arguments.length,v=Array(m),W=0;W<m;W++)v[W]=arguments[W];return i=(x=(Q=(0,a.default)(this,(B=X.__proto__||te()(X)).call.apply(B,[this].concat(v))),Q),Q.state={visible:!1,keywords:""},x),(0,a.default)(Q,i)}return(0,y.default)(X,[{key:"onChange",value:function(x){var Q=this.props.callback;this.setState({visible:!1,keywords:""}),Q(x)}},{key:"render",value:function(){var x=this,Q=this.props,i=Q.disabled,m=Q.allowAdd,v=Q.children,W=Q.value,P=Q.renderText,u=Q.controlName,l=Q.delOptions,T=l===void 0?[]:l,G=this.props.data,D=this.state,M=D.visible,se=D.keywords;G=G.filter(function(ne){return!ne.isDeleted&&!ne.hide});var ae=G.length<A.tC;return o.createElement(o.Fragment,null,o.createElement("span",{onClick:function(){return!i&&x.setState({visible:!0})}},v||G.filter(function(ne){return c().some(W,function(de){return c().isEqual(de,ne)})}).map(function(ne){return o.createElement("span",{className:"ellipsis Font15"},ne.value)})),o.createElement(j.n,{popup:!0,visible:M,animationType:"slide-up",maskClosable:!1,className:"mobileCheckboxDialog"},o.createElement("div",{className:"flexColumn h100"},o.createElement("div",{className:"flexRow valignWrapper mobileCheckboxBtnsWrapper"},o.createElement("div",{className:"Hand ThemeColor bold Font15 mRight10",onClick:function(){return x.setState({visible:!1})}},_l("\u5173\u95ED")),o.createElement("div",{className:"Font15 Gray bold flex ellipsis TxtCenter"},u),o.createElement("div",{className:"Font15 Visibility"},_l("\u786E\u5B9A"))),o.createElement("div",{className:"mobileCheckboxSearchWrapper"},o.createElement(O.Z,{icon:"h5_search"}),o.createElement("input",{className:"flex",type:"search",placeholder:m?_l("\u641C\u7D22\u6216\u6DFB\u52A0\u9009\u9879"):_l("\u641C\u7D22"),value:se,onChange:function(de){return x.setState({keywords:de.target.value})}}),se&&o.createElement(O.Z,{icon:"workflow_cancel",onClick:function(){return x.setState({keywords:""})}})),o.createElement(C(),{className:"flex",style:{overflow:"auto"}},!se.length&&!!W.length&&o.createElement(C().Item,{className:"mLeft31",onClick:function(){return x.onChange("")}},o.createElement("span",{className:"Font15 ThemeColor3"},_l("\u6E05\u9664\u9009\u62E9"))),G.filter(function(ne){return ne.value.indexOf(se)>-1}).map(function(ne){return o.createElement(C().Item,{key:ne.key,onClick:function(){x.onChange(ne.key)}},o.createElement("div",{className:"flexRow",style:{alignItems:"center"}},o.createElement(U.Z,{checked:c().some(W,function(de){return c().isEqual(de,ne)})}),o.createElement("span",{className:"ellipsis Font15 flex mRight15"},P?P(ne):ne.value)))}),!!se.length&&m&&!G.find(function(ne){return ne.value===se})&&ae&&o.createElement(C().Item,{onClick:function(){if(c().trim(se)){var de=c().find(T,function(Ce){return Ce.value===se});if(de)return alert(_l("\u4E0D\u5F97\u4E0E\u5DF2\u6709\u9009\u9879\uFF08\u5305\u62EC\u56DE\u6536\u7AD9\uFF09\u91CD\u590D"),2);x.onChange("add_"+se)}}},o.createElement("span",{className:"ellipsis ThemeColor3 Font15"},_l("\u6DFB\u52A0\u65B0\u7684\u9009\u9879\uFF1A")+se))))))}}]),X}(o.Component),q.propTypes={disabled:s().bool,allowAdd:s().bool,callback:s().func,data:s().array,value:s().any,renderText:s().any},q.defaultProps={disabled:!1,allowAdd:!1,callback:function(){},data:[],value:[]},b),ee=t(88239),re=t(93967),ie=t.n(re),le=t(15577),E=t(24607),w=t(98084),K,N,F=(N=K=function(z){(0,r.default)(X,z);function X(B){(0,R.default)(this,X);var x=(0,a.default)(this,(X.__proto__||te()(X)).call(this,B));return x.renderList=function(Q){var i=x.props,m=i.enumDefault2,v=i.value,W=i.disabled,P=i.advancedSetting,u=(0,E.Ec)(v),l=u.otherValue,T=(0,le.Q9)(),G=P||{},D=G.direction,M=G.checktype;return o.createElement("span",{className:ie()("customRadioItem",{White:m===1&&!(0,le.eO)(Q.color),ellipsis:!(0,le.Q9)(),isEmpty:Q.key==="isEmpty"},{"pLeft12 pRight12":m===1,horizonArrangementItem:M==="2"&&(D==="0"||D==="2")&&(0,le.Q9)(),showRadioTxtAll:(0,le.Q9)()}),style:{background:m===1?Q.color:""}},T&&Q.key==="other"&&l&&W?l:Q.value)},x.onChange=function(Q){x.props.onChange(p()(Q?[Q]:[]))},x.state={keywords:""},x}return(0,y.default)(X,[{key:"renderTitle",value:function(x,Q){var i=this.props.enumDefault2;return o.createElement("span",{key:x.key,className:ie()("ellipsis mTop5 mBottom5 mRight5 Font13",{White:i===1&&!(0,le.eO)(x.color),isEmpty:x.key==="isEmpty"},i===1?"customAntDropdownTitleWithBG":"customAntDropdownTitle"),style:{background:i===1?x.color:""},title:x.value},x.value,i!==1&&Q&&",")}},{key:"render",value:function(){var x=this,Q=this.props,i=Q.disabled,m=Q.value,v=Q.options,W=Q.selectProps,P=W===void 0?{}:W,u=Q.dropdownClassName,l=Q.advancedSetting,T=Q.disableCustom,G=Q.hint,D=v.filter(function(fe){return!fe.isDeleted&&!fe.hide}),M=v.filter(function(fe){return fe.isDeleted||fe.hide}),se=this.state.keywords,ae=(0,E.Ec)(m),ne=ae.checkIds,de=D.length<A.tC;ne.forEach(function(fe){(fe||"").toString().indexOf("add_")>-1&&!P.noPushAdd_&&D.push({key:fe,color:"#2196F3",value:fe.split("add_")[1]})});var Ce=D.concat(M).filter(function(fe){return c().includes(ne,fe.key)});if((0,le.Q9)())return o.createElement(o.Fragment,null,o.createElement(k,(0,ee.default)({disabled:i,allowAdd:l.allowadd==="1",data:D,delOptions:M,callback:this.onChange,renderText:this.renderList},this.props,{value:Ce}),o.createElement("div",{className:ie()("w100 customFormControlBox",{controlDisabled:i}),style:{height:"auto"}},o.createElement("div",{className:"flexRow h100",style:{alignItems:"center",minHeight:34}},o.createElement("div",{className:"flex minWidth0"},ne.length?D.concat(M).filter(function(fe){return c().includes(ne,fe.key)}).map(function(fe){return o.createElement("div",{key:fe.key,className:"mTop5 mBottom5"},x.renderList(fe))}):o.createElement("span",{className:"Gray_bd"},G||_l("\u8BF7\u9009\u62E9"))),!i&&o.createElement(O.Z,{icon:"arrow-right-border",className:"Font16 Gray_bd",style:{marginRight:-5}})))),!i&&o.createElement(w.Z,(0,ee.default)({},this.props,{isSelect:!0,className:"mTop5"})));se.length&&(D=D.filter(function(fe){return(fe.value||"").search(new RegExp(se.trim().replace(/([,.+?:()*\[\]^$|{}\\-])/g,"\\$1"),"i"))!==-1}));var he=D.concat(M).filter(function(fe){return c().includes(ne,fe.key)}).map(function(fe){return{value:fe.key,label:x.renderTitle(fe)}});return o.createElement(o.Fragment,null,o.createElement(Z.default,(0,ee.default)({ref:function(Ee){x.select=Ee},dropdownClassName:u,className:"w100 customAntSelect",disabled:i,showSearch:!0,allowClear:ne.length>0,listHeight:320,value:he,placeholder:G,suffixIcon:o.createElement(O.Z,{icon:"arrow-down-border Font14"}),labelInValue:!0,optionFilterProp:"children",filterOption:function(){return!0},notFoundContent:o.createElement("span",{className:"Gray_9e"},_l("\u65E0\u641C\u7D22\u7ED3\u679C")),onSearch:function(Ee){return x.setState({keywords:Ee.trim()})},onDropdownVisibleChange:function(Ee){x.setState({keywords:""}),!Ee&&x.select.blur()},onChange:function(Ee){var Y=Ee;(typeof Ee>"u"?"undefined":(0,H.default)(Ee))==="object"&&(Y=Ee.value),(Y||!se.length)&&x.onChange(Y)}},P),!se.length&&l.allowadd==="1"&&de&&o.createElement(Z.default.Option,{disabled:!0,className:"cursorDefault"},o.createElement("span",{className:"ellipsis customRadioItem Gray_9e"},_l("\u6216\u76F4\u63A5\u8F93\u5165\u6DFB\u52A0\u65B0\u9009\u9879"))),D.map(function(fe,Ee){return o.createElement(Z.default.Option,{value:fe.key,key:Ee,text:fe.text,className:ie()({"ant-select-item-option-selected":c().includes(ne,fe.key),isEmpty:fe.key==="isEmpty"})},x.renderList(fe))}),!T&&!!se.length&&!v.find(function(fe){return fe.value===se})&&l.allowadd==="1"&&de&&o.createElement(Z.default.Option,{value:"add_"+se},o.createElement("span",{className:"ellipsis customRadioItem ThemeColor3"},_l("\u6DFB\u52A0\u65B0\u7684\u9009\u9879\uFF1A")+se))),o.createElement(w.Z,(0,ee.default)({},this.props,{isSelect:!0})))}}]),X}(o.Component),K.propTypes={dropdownClassName:s().string,disabled:s().bool,disableCustom:s().any,options:s().any,value:s().string,enumDefault2:s().number,selectProps:s().shape({}),onChange:s().func,advancedSetting:s().object},N),h=function(z){(0,r.default)(X,z);function X(){return(0,R.default)(this,X),(0,a.default)(this,(X.__proto__||te()(X)).apply(this,arguments))}return(0,y.default)(X,[{key:"render",value:function(){var x=this,Q=this.props,i=Q.disabled,m=Q.advancedSetting;m=m===void 0?{}:m;var v=m.showtype,W=m.direction,P=Q.value,u=Q.options,l=u===void 0?[]:u,T=Q.enumDefault2;return v==="2"?o.createElement(ce.Z,{from:"recordInfo",direction:W,value:JSON.parse(P||"[]")[0],disabled:i,data:{options:l,enumDefault2:T},onChange:function(D){x.props.onChange(p()(D?[D]:[]))}}):o.createElement(F,this.props)}}]),X}(o.Component)},40433:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>w});var ce=t(33867),g=t(88239),p=t(85105),L=t.n(p),te=t(99663),R=t(22600),y=t(49135),a=t(93196),r=t(86735),o=t(45697),d=t.n(o),Z=t(67294),H=t(14260),U=t.n(H),f=t(60300),V=t.n(f),C=t(93967),O=t.n(C),n=t(6917),s=t(15577),j=t(85879),A=t(96486),S=t.n(A),I=t(71893),c=t(15405),q=t(33126),b,k,ee=(0,r.Z)([`
  z-index: 1;
  visibility: `,`;
  `,`;
  .cellMobileInput {
    line-height: 30px;
  }
  `,`;
  input {
    padding-right: `,`;
  }
  .iti__dropdown-content {
    max-width: 390px !important;
    width: `,`;
  }
`],[`
  z-index: 1;
  visibility: `,`;
  `,`;
  .cellMobileInput {
    line-height: 30px;
  }
  `,`;
  input {
    padding-right: `,`;
  }
  .iti__dropdown-content {
    max-width: 390px !important;
    width: `,`;
  }
`]),re=(0,r.Z)([`
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  right: 0;
`],[`
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  right: 0;
`]),ie=(0,q.Z)(c.Z),le=I.ZP.div(ee,function(K){return K.isEditing||K.showCountry?"visible":"hidden"},function(K){return K.isCell?"margin-top: -6px;":""},function(K){return K.showCountry&&!K.isEditing&&K.itiWidth?"width: "+(K.isMobile&&!K.disabled?"unset":K.itiWidth)+";":""},function(K){return K.showCountry&&!K.isEditing&&K.itiWidth?"0px !important":"12px"},function(K){return(K.mobileWidth||100)+"px !important"}),E=I.ZP.div(re),w=(k=b=function(K){(0,a.default)(N,K);function N(){var F,h,z,X;(0,te.default)(this,N);for(var B=arguments.length,x=Array(B),Q=0;Q<B;Q++)x[Q]=arguments[Q];return X=(h=(z=(0,y.default)(this,(F=N.__proto__||L()(N)).call.apply(F,[this].concat(x))),z),z.state={hideCountry:!1,originValue:"",isEditing:z.props.isCell||!1,maskStatus:S().get(z.props,"advancedSetting.datamask")==="1"},z.onFocus=function(i){var m=z.iti.getSelectedCountryData(),v=void 0;S().keys(m).length?v=z.iti.getNumber():v=$(z.input).val().replace(/ /g,""),z.setState({originValue:v})},z.onChange=function(){var i=z.iti.getSelectedCountryData(),m=void 0;S().keys(i).length?m=z.iti.getNumber():m=$(z.input).val().replace(/ /g,""),z.setState({hideCountry:!S().keys(i).length}),z.props.value!==m&&z.props.onChange(m)},z.getShowValue=function(){var i=z.input?$(z.input).val().replace(/ /g,""):z.props.value||"";return i?z.state.maskStatus?(0,j.G)((0,g.default)({},z.props,{value:i})):i:z.props.hint},h),(0,y.default)(z,X)}return(0,R.default)(N,[{key:"componentDidMount",value:function(){var h=this,z=this.props,X=z.hint,B=z.value,x=z.advancedSetting;this.iti=U()(this.input,{customPlaceholder:function(){return X},autoPlaceholder:"off",initialCountry:this.initialCountry(),preferredCountries:this.getCountries(x.commcountries),onlyCountries:this.getCountries(x.allowcountries),loadUtils:"",utilsScript:V(),separateDialCode:!0,showSelectedDialCode:!0,countrySearch:this.getSearchResult(x.commcountries)}),this.setValue(B),$(this.input).on("close:countrydropdown keyup paste",function(){h.destroy||setTimeout(function(){h.onChange()},10)})}},{key:"componentWillReceiveProps",value:function(h){h.value!==this.props.value&&(h.value||this.props.value!==void 0)&&this.input&&(this.setValue(h.value),!h.value&&this.iti&&this.iti.setCountry(this.initialCountry()))}},{key:"componentWillUnmount",value:function(){this.destroy=!0,this.iti&&this.iti.destroy()}},{key:"initialCountry",value:function(){var h=this.props,z=h.enumDefault,X=z===void 0?0:z,B=h.advancedSetting,x=S().get(md,"global.Config.DefaultConfig.initialCountry")||"cn";return X===1?x:B.defaultarea?JSON.parse(B.defaultarea).iso2:x}},{key:"getCountries",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"[]",z=this.props.enumDefault,X=z===void 0?0:z,B=S().get(md,"global.Config.DefaultConfig.preferredCountries")||["cn"];return X===1?B:JSON.parse(h).map(function(x){return x.iso2})}},{key:"getSearchResult",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"[]",z=safeParse(h,"array");return S().isEmpty(z)}},{key:"setValue",value:function(h){this.iti&&(this.iti.setNumber(h||""),this.setState({hideCountry:!S().keys(this.iti.getSelectedCountryData()).length}))}},{key:"render",value:function(){var h=this,z=this.props,X=z.disabled,B=z.hint,x=z.inputClassName,Q=z.onBlur,i=Q===void 0?function(){}:Q,m=z.onInputKeydown,v=z.enumDefault,W=z.from,P=z.value,u=z.maskPermissions,l=z.isCell,T=this.state,G=T.hideCountry,D=T.originValue,M=T.maskStatus,se=T.isEditing,ae=u&&P&&M,ne=v===1||G,de=$(this.input).css("padding-left");return Z.createElement("div",{className:O()({customFormControlTel:ne,customFormControlMobileHover:!X}),ref:function(he){return h.box=he}},Z.createElement(E,{showCountry:!ne,isEditing:se,className:O()("customFormControlBox customFormTextareaBox",{Gray_bd:!P},{controlDisabled:X},{Hidden:l}),style:{paddingLeft:ne?"12px":""+de||"12px",height:"36px"},onClick:function(){!X&&!se&&h.setState({isEditing:!0},function(){return h.input&&h.input.focus()})}},Z.createElement("span",{className:O()("LineHeight20",{maskHoverTheme:X&&ae}),onClick:function(){X&&ae&&h.setState({maskStatus:!1})}},this.getShowValue(),ae&&Z.createElement(ce.Z,{icon:"eye_off",className:O()("Gray_bd",X?"mLeft7":"maskIcon")}))),Z.createElement(le,{isEditing:se,showCountry:!ne,itiWidth:de,isCell:l,isMobile:(0,s.Q9)(),disabled:X,mobileWidth:S().get(this.box,"offsetWidth")},Z.createElement(ie,{onClickAway:function(){return h.setState({isEditing:!1})}},Z.createElement("input",{type:"tel",className:O()(x||"customFormControlBox",{controlDisabled:X}),ref:function(he){h.input=he},placeholder:B,disabled:X,onFocus:this.onFocus,onBlur:function(){i(D)},onKeyDown:m}))),(S().get(this.props,"advancedSetting.datamask")==="1"?u&&P:!!P)&&(S().includes([n.BD.H5_ADD,n.BD.H5_EDIT],W)||(0,s.Q9)()&&X)&&Z.createElement("a",{href:"tel:"+P,className:"Absolute customFormControlTelBtn",style:{right:0,top:10}},Z.createElement(ce.Z,{icon:"phone22",className:"Font16 ThemeColor3"})))}}]),N}(Z.Component),b.propTypes={hint:d().string,inputClassName:d().string,disabled:d().bool,value:d().string,onChange:d().func,onBlur:d().func,onInputKeydown:d().func,enumDefault:d().number,advancedSetting:d().any,from:d().number},k)},28585:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>le});var ce=t(8177),g=t.n(ce),p=t(88239),L=t(63239),te=t.n(L),R=t(85105),y=t.n(R),a=t(99663),r=t(22600),o=t(49135),d=t(93196),Z=t(67294),H=t(45697),U=t.n(H),f=t(44894),V=t(89499),C=t(24607),O=t(15742),n=t(87889),s=t(24666),j=t(35300);const A=j.ZP;var S=t(15577),I=t(96486),c=t.n(I),q,b,k,ee,re;function ie(E,w,K,N,F){var h={};return Object.keys(N).forEach(function(z){h[z]=N[z]}),h.enumerable=!!h.enumerable,h.configurable=!!h.configurable,("value"in h||h.initializer)&&(h.writable=!0),h=K.slice().reverse().reduce(function(z,X){return X(E,w,z)||z},h),F&&h.initializer!==void 0&&(h.value=h.initializer?h.initializer.call(F):void 0,h.initializer=void 0),h.initializer===void 0&&(Object.defineProperty(E,w,h),h=null),h}var le=(k=(re=ee=function(E){(0,d.default)(w,E);function w(K){(0,a.default)(this,w);var N=(0,o.default)(this,(w.__proto__||y()(w)).call(this,K));return N.cardsComp=Z.createRef(),N.state={},N}return(0,r.default)(w,[{key:"componentWillReceiveProps",value:function(N){if(this.isCard)try{if(N.value==="deleteRowIds: all"){this.cardsComp.current.table.deleteAllRecord();return}var F=this.parseValue(N.value);if(c().get(F,"0.isWorksheetQueryFill")){var h=F.map(function(z){return JSON.parse(z.sourcevalue)});this.cardsComp.current.table.clearAndAdd(h)}}catch(z){}}},{key:"shouldComponentUpdate",value:function(N){var F=this.parseValue(N.value);return N.value!=="deleteRowIds: all"&&!c().get(F,"0.isWorksheetQueryFill")||!this.isCard}},{key:"parseValue",value:function(N){var F=this.props.advancedSetting.showtype,h=F===void 0?O.wn.LIST:F;if(!N)return[];if(!(h==O.wn.DROPDOWN&&N.indexOf("deleteRowIds")>-1)){var z=[];try{z=JSON.parse(N)}catch(X){return[]}return c().isObject(z)?c().isArray(z)?z:[z]:[]}}},{key:"getRecordsData",value:function(){var N=this.parseValue(this.props.value);this.isFromDefault=!!c().find(N,{isFromDefault:!0});var F=[];try{F=N.map(function(h){return h.sourcevalue?JSON.parse(h.sourcevalue):{rowid:h.sid,titleValue:h.name}})}catch(h){}return F}},{key:"handleChange",value:function(N,F){var h=this.props,z=h.relationControls,X=h.onChange;if(F==="array")X(te()((0,V.VM)(z,N)));else{var B=N.count,x=N.records,Q=N.deletedIds,i=N.addedIds,m=N.searchByChange;x.length?X(te()((0,V.VM)(z,x,{addedIds:i,deletedIds:Q,count:B,isFromDefault:this.isFromDefault})),void 0,m):X("deleteRowIds: "+Q.join(","))}}},{key:"render",value:function(){var N=this,F=this.props,h=F.appId,z=F.flag,X=F.customFields,B=F.viewId,x=F.worksheetId,Q=F.from,i=F.disabled,m=F.instanceId,v=F.workId,W=F.recordId,P=F.controlId,u=F.dataSource,l=F.enumDefault,T=F.enumDefault2,G=F.showControls,D=G===void 0?[]:G,M=F.formData,se=F.coverCid,ae=F.relationControls,ne=F.sourceEntityName,de=F.advancedSetting,Ce=F.updateWorksheetControls,he=F.updateRelateRecordTableCount,fe=F.onChange,Ee=de.showtype,Y=Ee===void 0?O.wn.LIST:Ee;Y=parseInt(Y,10);var oe=(0,C.kM)((0,p.default)({},this.props),Q),ve=this.getRecordsData();return Y===O.wn.TABLE?Z.createElement(s.Z,{saveSync:!1,instanceId:m,workId:v,control:(0,p.default)({},this.props),recordId:W,worksheetId:x,formData:M,updateWorksheetControls:Ce,onCountChange:function(pe,Se){if(Se)fe({isFormTable:!0,value:pe});else if(c().isFunction(he))he(P,pe);else if(X)try{X.dataFormat.setControlItemValue(P,String(pe)),X.updateRenderData()}catch(ye){console.error(ye)}}}):Z.createElement(Z.Fragment,null,Y!==O.wn.DROPDOWN||(0,S.Q9)()?Z.createElement(A,{appId:h,ref:this.cardsComp,flag:z,recordId:W,allowOpenRecord:de.allowlink==="1",editable:oe.editable,control:(0,p.default)({},this.props),count:this.count||0,records:l===1&&(0,S.Q9)()&&Y===O.wn.DROPDOWN?ve.filter(function(ue,pe){return!pe}):ve,multiple:l===2,showCoverAndControls:de.ddset==="1",onChange:this.handleChange,from:Q}):Z.createElement(n.Z,{appId:h,control:(0,p.default)({},this.props),formData:M,disabled:i||!oe.editable,selected:ve,from:Q,viewId:B,recordId:W,dataSource:u,entityName:ne,enumDefault2:T,parentWorksheetId:x,controlId:P,controls:ae,multiple:l===2,coverCid:se,showControls:D,allowOpenRecord:de.allowlink==="1",showCoverAndControls:de.ddset==="1",onChange:function(pe){return N.handleChange(pe,"array")}}))}},{key:"count",get:function(){var N=this.props,F=N.value,h=N.count,z=(0,V.WO)(F,h);return c().isUndefined(z)?h:z}},{key:"isCard",get:function(){var N=this.props.advancedSetting.showtype,F=N===void 0?O.wn.LIST:N;return parseInt(F,10)===O.wn.CARD}}]),w}(Z.Component),ee.propTypes={appId:U().string,viewId:U().string,worksheetId:U().string,sourceEntityName:U().string,from:U().number,recordId:U().string,controlId:U().string,coverCid:U().string,value:U().string,dataSource:U().string,showControls:U().arrayOf(U().string),enumDefault:U().number,relationControls:U().arrayOf(U().shape({})),onChange:U().func},re),ie(k.prototype,"handleChange",[f.Nj],g()(k.prototype,"handleChange"),k.prototype),k)},44266:(lt,Te,t)=>{"use strict";if(t.d(Te,{ZP:()=>ae,vG:()=>se}),!/^(1887|7596|7798)$/.test(t.j))var ce=t(42057);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(54208);var p=t(94942),L=t.n(p),te=t(85315),R=t(36803),y=t(12424),a=t(88239),r=t(86735),o=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var d=t(88553);var Z=t(71893),H=t(93967),U=t.n(H);if(!/^(1887|7596|7798)$/.test(t.j))var f=t(1952);var V=t(96486),C=t.n(V);if(!/^(1887|7596|7798)$/.test(t.j))var O=t(24607);if(!/^(1887|7596|7798)$/.test(t.j))var n=t(1502);if(!/^(1887|7596|7798)$/.test(t.j))var s=t(34694);if(!/^(1887|7596|7798)$/.test(t.j))var j=t(15742);var A=t(42541);if(!/^(1887|7596|7798)$/.test(t.j))var S=t(26358);if(!/^(1887|7596|7798)$/.test(t.j))var I=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var c=t(8765);if(!/^(1887|7596|7798)$/.test(t.j))var q=t(35300);if(!/^(1887|7596|7798)$/.test(t.j))var b=t(24666);if(!/^(1887|7596|7798)$/.test(t.j))var k=t(6395);if(!/^(1887|7596|7798)$/.test(t.j))var ee=t(15577);if(!/^(1887|7596|7798)$/.test(t.j))var re=t(68705);if(!/^(1887|7596|7798)$/.test(t.j))var ie=t(70039);if(!/^(1887|7596|7798)$/.test(t.j))var le=t(25758);var E=(0,r.Z)([`
  margin: 5px 0 5px;
`],[`
  margin: 5px 0 5px;
`]),w=(0,r.Z)([`
  display: inline-block;
  color: #333;
  font-size: 13px;
  line-height: 20px;
  white-space: break-spaces;
  word-break: break-all;
  .text {
    display: inline-block;
    max-width: 202px;
  }
  .splitter {
    margin-right: 6px;
  }
`],[`
  display: inline-block;
  color: #333;
  font-size: 13px;
  line-height: 20px;
  white-space: break-spaces;
  word-break: break-all;
  .text {
    display: inline-block;
    max-width: 202px;
  }
  .splitter {
    margin-right: 6px;
  }
`]),K=(0,r.Z)([`
  border-radius: 3px;
  cursor: pointer;
  display: inline-flex;
  width: 20px;
  height: 20px;
  color: #333;
  font-size: 13px;
  background: #f7f6f8;
  color: #9d9d9d;
  &:hover {
    color: #2196f3;
  }
`],[`
  border-radius: 3px;
  cursor: pointer;
  display: inline-flex;
  width: 20px;
  height: 20px;
  color: #333;
  font-size: 13px;
  background: #f7f6f8;
  color: #9d9d9d;
  &:hover {
    color: #2196f3;
  }
`]),N=(0,r.Z)([`
  display: flex;
  .recordText {
    border: 1px solid #e0e0e0;
    padding-bottom: 5px;
    background: #f9f9f9;
    border-radius: 4px;
    box-sizing: border-box;
  }
  .disabledRecordText {
    border: none;
    padding-bottom: 0px;
    background: #fff;
  }
  .recordTextItem {
    display: inline-block;
    height: 28px;
    line-height: 28px;
    padding: 0 16px;
    margin: 5px 0 0 6px;
    background: #f0f0f0;
    border-radius: 5px;
  }
  .mobileRecordTextAdd {
    width: 40px;
    height: 40px;
    background: #ffffff;
    border: 1px solid #e0e0e0;
    border-radius: 3px;
    color: #757575;
    text-align: center;
    line-height: 38px;
    margin-left: 6px;
  }
`],[`
  display: flex;
  .recordText {
    border: 1px solid #e0e0e0;
    padding-bottom: 5px;
    background: #f9f9f9;
    border-radius: 4px;
    box-sizing: border-box;
  }
  .disabledRecordText {
    border: none;
    padding-bottom: 0px;
    background: #fff;
  }
  .recordTextItem {
    display: inline-block;
    height: 28px;
    line-height: 28px;
    padding: 0 16px;
    margin: 5px 0 0 6px;
    background: #f0f0f0;
    border-radius: 5px;
  }
  .mobileRecordTextAdd {
    width: 40px;
    height: 40px;
    background: #ffffff;
    border: 1px solid #e0e0e0;
    border-radius: 3px;
    color: #757575;
    text-align: center;
    line-height: 38px;
    margin-left: 6px;
  }
`]),F=(0,r.Z)([`
  height: calc(100vh - 150px);
  background: #f5f5f5;
  margin: -20px -24px 0;
`],[`
  height: calc(100vh - 150px);
  background: #f5f5f5;
  margin: -20px -24px 0;
`]),h=(0,r.Z)([`
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
`],[`
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
`]),z=(0,r.Z)([`
  height: 57px;
  padding: 0 24px;
  display: flex;
  align-items: center;
  .main {
    font-size: 17px;
    color: #333;
    font-weight: bold;
  }
  .split {
    font-size: 16px;
    margin: 0 8px;
    color: #9e9e9e;
  }
  .sec {
    font-size: 14px;
    color: #9e9e9e;
  }
`],[`
  height: 57px;
  padding: 0 24px;
  display: flex;
  align-items: center;
  .main {
    font-size: 17px;
    color: #333;
    font-weight: bold;
  }
  .split {
    font-size: 16px;
    margin: 0 8px;
    color: #9e9e9e;
  }
  .sec {
    font-size: 14px;
    color: #9e9e9e;
  }
`]),X=(0,r.Z)([`
  padding: 0 24px 36px;
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow-x: hidden;
  overflow-y: auto;
  .relateRecordTable {
    height: 100%;
  }
  .tableCon {
    flex: 1;
  }
`],[`
  padding: 0 24px 36px;
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow-x: hidden;
  overflow-y: auto;
  .relateRecordTable {
    height: 100%;
  }
  .tableCon {
    flex: 1;
  }
`]),B=50,x=Z.ZP.div(E),Q=Z.ZP.div(w),i=(0,Z.ZP)(A.Lb)(K),m=Z.ZP.div(N),v=Z.ZP.div(F);function W(ne,de,Ce){var he=C().find(Ce,function(oe){return oe.controlId&&oe.controlId===ne});if(he)try{var fe=C().find(JSON.parse(de[ne]),function(oe){return File.isPicture(oe.ext)}),Ee=fe.previewUrl,Y=Ee===void 0?"":Ee;return Y.indexOf("imageView2")>-1?Y.replace(/imageView2\/\d\/w\/\d+\/h\/\d+(\/q\/\d+)?/,"imageView2/1/w/200/h/140"):Y+"&imageView2/1/w/200/h/140"}catch(oe){}}function P(ne){var de=ne.loading,Ce=ne.allowOpenRecord,he=ne.allowNewRecord,fe=ne.entityName,Ee=ne.records,Y=ne.showAll,oe=ne.colNum,ve=ne.projectId,ue=ne.viewId,pe=ne.cardWidth,Se=ne.isCharge,ye=ne.controls,J=ne.advancedSetting,me=ne.control,be=ne.showLoadMore,xe=ne.isLoadingMore,Ae=ne.setState,Ne=ne.loadRecords,Me=ne.pageIndex,Fe=ne.onAdd,Be=ne.onOpen,we=ne.disabled,Ie=(0,ee.Q9)()?!we&&he:he;return o.createElement(o.Fragment,null,Ie&&o.createElement("div",{className:"mBottom10"},o.createElement(k.z,{onClick:Fe},o.createElement("div",{className:"content"},o.createElement("i",{className:"icon icon-plus mRight5 Font16"}),fe))),!de&&!!Ee.length&&(Y||Ee.length<=oe*3?Ee:Ee.slice(0,oe*3)).map(function(ge,Re){return o.createElement(c.Z,{projectId:ve,viewId:ue,disabled:!0,width:pe,isCharge:Se,key:Re,cover:W(me.coverCid,ge,ye),controls:me.showControls.map(function(Pe){return C().find(ye,{controlId:Pe})}).filter(function(Pe){return Pe&&Pe.attribute!==1}),data:ge,allowlink:Ce?"1":"0",parentControl:(0,a.default)({},me,{relationControls:ye}),onClick:function(){Ce&&Be(ge.rowid)}})}),(0,ee.Q9)()&&J.showtype==="2"&&!de&&!xe&&!Ee.length&&o.createElement(v,null,o.createElement(le.uy,{text:_l("\u6682\u65E0\u8BB0\u5F55")})),Ee.length>oe*3&&o.createElement("div",null,be&&Y&&o.createElement(q.fl,{onClick:function(){xe||Ne(Me+1)}},xe&&o.createElement("span",{className:"loading"},o.createElement("i",{className:"icon icon-loading_button"})),_l("\u52A0\u8F7D\u66F4\u591A")),o.createElement(q.fl,{className:"ThemeColor3 Hand mBottom10 InlineBlock",onClick:function(){return Ae(function(Re){return(0,a.default)({},Re,{showAll:!Y})})}},Y?_l("\u6536\u8D77"):_l("\u5C55\u5F00\u66F4\u591A"))))}function u(ne){var de=ne.control,Ce=ne.entityName,he=ne.allowOpenRecord,fe=ne.allowNewRecord,Ee=ne.records,Y=Ee===void 0?[]:Ee,oe=ne.onAdd,ve=ne.onOpen,ue=ne.disabled,pe=(0,ee.Q9)();return pe?o.createElement(m,null,!C().isEmpty(Y)&&o.createElement("div",{className:U()("flex recordText",{disabledRecordText:ue})},Y.map(function(Se,ye){return o.createElement("span",{key:ye,className:U()("recordTextItem",{ThemeColor3:he,bold:he}),onClick:function(){he&&ve(Se.rowid)}},(0,O.Nx)(de,Se))})),!ue&&fe&&o.createElement("div",{className:"mobileRecordTextAdd","data-tip":Ce?_l("\u65B0\u5EFA")+Ce:void 0,onClick:oe},o.createElement("i",{className:"icon icon-plus"}))):o.createElement("div",null,Y.map(function(Se,ye){var J=(0,O.Nx)(de,Se);return o.createElement(Q,{key:ye,className:U()({"ThemeColor3 Hand":he}),onClick:function(){he&&ve(Se.rowid)}},o.createElement("div",{className:"text ellipsis",title:J},J),ye<Y.length-1&&o.createElement("span",{className:"splitter"},","))}),fe&&o.createElement(i,{"data-tip":"\u65B0\u5EFA"+(Ce||_l("\u8BB0\u5F55")),style:Y.length?{marginLeft:13}:{},onClick:oe},o.createElement("i",{className:"icon icon-plus"})))}function l(ne){var de=this,Ce=ne.isDialog,he=ne.from,fe=ne.flag,Ee=ne.disabled,Y=ne.projectId,oe=ne.recordId,ve=ne.worksheetId,ue=ne.viewId,pe=ne.isCharge,Se=ne.advancedSetting,ye=ne.enumDefault,J=ne.enumDefault2,me=ne.isDraft,be=(0,a.default)({},ne),xe=(0,O.kM)(be,he),Ae=(0,o.useRef)({}),Ne=(0,d.Z)(),Me=(0,y.Z)(Ne,2),Fe=Me[0],Be=Me[1].width,we=(0,o.useState)({showAll:Ce}),Ie=(0,y.Z)(we,2),ge=Ie[0],Re=Ie[1],Pe=(0,o.useState)(!1),ke=(0,y.Z)(Pe,2),We=ke[0],Ve=ke[1],it=(0,o.useState)(!0),Ge=(0,y.Z)(it,2),pt=Ge[0],ot=Ge[1],vt=(0,o.useState)(""),At=(0,y.Z)(vt,2),yt=At[0],st=At[1],St=ge.loading,Qe=St===void 0?!0:St,Xe=ge.entityName,$e=ge.showAll,Ke=ge.records,Ue=Ke===void 0?[]:Ke,He=ge.controls,ze=He===void 0?[]:He,gt=ge.showLoadMore,Et=ge.pageIndex,ft=ge.isLoadingMore,qe=(0,ee.Q9)(),nt=(0,q.rD)({width:(0,ee.Q9)()?void 0:Be,enumDefault:ye}),Ze=nt.cardWidth,et=nt.colNum,ut=C().get(Se,"allowlink")==="1"&&!C().get(window,"shareState.shareId"),xt=pt&&!Ee&&oe&&xe.editable&&J!==1&&J!==11&&!window.isPublicWorksheet&&!me,wt=function(){var fn=(0,R.Z)(L().mark(function Mt(){var sn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,on,en,$t;return L().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:if(on=[].concat((0,te.Z)(ze)),Re(function(mt){return(0,a.default)({},mt,{isLoadingMore:!0,loading:sn===1})}),!C().isEmpty(on)){tn.next=7;break}return tn.next=5,I.Z.getWorksheetInfo({worksheetId:be.dataSource,getTemplate:!0,relationWorksheetId:ve}).then(function(mt){return ot(mt.allowAdd),C().get(mt,"template.controls")||[]});case 5:on=tn.sent,Re(function(mt){return(0,a.default)({},mt,{controls:on})});case 7:if(en=(0,S.zK)({control:(0,a.default)({},be,{relationControls:on,recordId:oe}),formData:be.formData,filterKey:"resultfilters"}),Ae.current.filter=en,en!==!1){tn.next=12;break}return Re(function(mt){return(0,a.default)({},mt,{isLoadingMore:!1,loading:!1})}),tn.abrupt("return");case 12:$t={worksheetId:ve,viewId:ue,searchType:1,status:1,isGetWorksheet:!0,getType:7,filterControls:en||[],rowId:oe,controlId:be.controlId,pageIndex:sn,pageSize:B,getWorksheet:sn===1,getRules:sn===1},I.Z.getRowRelationRows($t).then(function(mt){ot(C().get(mt,"worksheet.allowAdd")),Re(function(Lt){var zt=C().uniqBy([].concat((0,te.Z)(Lt.records||[]),(0,te.Z)(mt.data||[])),"rowid");return(0,a.default)({},Lt,{loading:!1,records:zt,pageIndex:sn,isLoadingMore:!1,controls:sn===1?C().get(mt,"worksheet.template.controls"):Lt.controls,entityName:C().get(mt,"worksheet.entityName"),showAll:$e,showLoadMore:zt.length<mt.count&&mt.data.length>0})})});case 14:case"end":return tn.stop()}},Mt,de)}));return function(){return fn.apply(this,arguments)}}(),kt=(0,o.useCallback)(C().debounce(function(){Re(function(fn){return(0,a.default)({},fn,{records:[]})}),wt()},400),[be.formData,ge]),Rt=(0,o.useCallback)(function(){if(qe){(0,re.openAddRecord)({className:"full",worksheetId:be.dataSource,showDraftsEntry:!0,entityName:Xe,onAdd:function(Mt){Mt&&Re((0,a.default)({},ge,{records:[Mt].concat((0,te.Z)(Ue))}))}});return}(0,s.Z)({worksheetId:be.dataSource,directAdd:!0,showFillNext:!0,onAdd:function(Mt){Mt&&Re((0,a.default)({},ge,{records:[Mt].concat((0,te.Z)(Ue))}))}})}),jt=(0,o.useCallback)(function(fn){if((0,ee.Ye)("worksheetRecord",be.dataSource,{rowId:fn}),qe){Ve(!0),st(fn);return}(0,n.L)({appId:be.appId,worksheetId:be.dataSource,recordId:fn,viewId:Se.openview||be.viewId})});return(0,o.useEffect)(function(){wt(),C().isFunction(be.addRefreshEvents)&&be.addRefreshEvents("relation_search_"+be.controlId,function(){Re((0,a.default)({},ge,{records:[]})),wt()})},[]),(0,o.useEffect)(function(){var fn=(0,S.zK)({control:(0,a.default)({},be,{relationControls:ze,recordId:oe}),formData:be.formData,filterKey:"resultfilters"});!C().isUndefined(Ae.current.filter)&&fn&&!C().isEqual(Ae.current.filter,fn)?(Ae.current.filter=fn,kt()):!C().isEqual(Ae.current.filter,fn)&&fn===!1&&(Ae.current.filter=fn,Re(function(Mt){return(0,a.default)({},Mt,{loading:!1,records:[]})}))}),o.createElement(x,{ref:Fe},Qe&&o.createElement("div",{style:Ce?{paddingTop:"calc(50% - 50px)"}:{display:"inline-block",marginBottom:6}},o.createElement(g.Z,{size:Ce?"big":"small"})),C().get(Se,"showtype")===String(j.zn.CARD)||qe&&C().get(Se,"showtype")===String(j.zn.LIST)?o.createElement(P,{loading:Qe,entityName:Xe,allowOpenRecord:ut,allowNewRecord:xt,records:Ue,showAll:$e,colNum:et,projectId:Y,viewId:ue,cardWidth:Ze,isCharge:pe,controls:ze,advancedSetting:Se,control:be,showLoadMore:gt,isLoadingMore:ft,setState:Re,loadRecords:wt,pageIndex:Et,onAdd:Rt,onOpen:jt,disabled:Ee}):o.createElement(u,{allowOpenRecord:ut,allowNewRecord:xt,entityName:Xe,records:Ue,control:(0,a.default)({},be,{relationControls:ze}),onAdd:Rt,onOpen:jt,disabled:Ee}),We&&o.createElement(ie.RecordInfoModal,{className:"full",visible:!0,appId:be.appId,worksheetId:be.dataSource,viewId:C().get(be,"advancedSetting.openview")||be.viewId,rowId:yt,onClose:function(){Ve(!1)}}),!Qe&&!xt&&C().isEmpty(Ue)&&o.createElement("div",{className:"customFormNull"}))}var T=Z.ZP.div(h),G=Z.ZP.div(z),D=Z.ZP.div(X);function M(ne){var de=ne.from,Ce=ne.flag,he=ne.projectId,fe=ne.recordId,Ee=ne.worksheetId,Y=ne.viewId,oe=ne.isCharge,ve=ne.control,ue=ne.onClose;return o.createElement(ce.Z,{visible:!0,type:"fixed",verticalAlign:"bottom",width:1300,closeSize:57,onCancel:ue,bodyStyle:{padding:0,position:"relative"}},o.createElement(T,null,o.createElement(G,null,o.createElement("div",{className:"main"},ve.controlName)),o.createElement(D,null,o.createElement(l,(0,a.default)({isDialog:!0},(0,a.default)({from:de,flag:Ce,projectId:he,recordId:fe,worksheetId:Ee,viewId:Y,isCharge:oe},ve))))))}var se=function(de){return(0,f.Z)(M,de)};function ae(ne){var de=ne.worksheetId,Ce=ne.recordId,he=ne.disabled,fe=ne.formData;return ne.advancedSetting.showtype===String(j.zn.EMBED_LIST)?o.createElement(b.Z,{control:(0,a.default)({},ne),allowEdit:!he,recordId:Ce,worksheetId:de,formData:fe}):o.createElement(l,ne)}},76242:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>ee});var ce=t(34279),g=t(64749),p=t(54208),L=t(33867),te=t(88239),R=t(85105),y=t.n(R),a=t(99663),r=t(22600),o=t(49135),d=t(93196),Z=t(86735),H=t(67294),U=t(71893),f=t(15577),V=t(20148),C=t(60385),O=t.n(C),n=t(95679),s=t(96486),j=t.n(s),A=function(re){(0,d.default)(ie,re);function ie(le){(0,a.default)(this,ie);var E=(0,o.default)(this,(ie.__proto__||y()(ie)).call(this,le));return E.searchRealTime=function(w){var K=E.props.advancedSetting,N=K===void 0?{}:K,F=N.itemtitle,h=F===void 0?"":F,z=N.clicksearch,X=(E.props.optionData||[]).map(function(x,Q){return(0,te.default)({},x,{index:Q})});if(z==="1")E.props.realTimeSearch(w);else{var B=X.filter(function(x){return(""+x[h]).indexOf(w)>-1});E.setState({mobileSearchResult:B})}},E.state={currentChecked:le.value},E}return(0,r.default)(ie,[{key:"componentDidMount",value:function(){this.props.enumDefault===2&&this.searchInput&&this.searchInput.focus()}},{key:"render",value:function(){var E=this,w=this.props,K=w.enumDefault,N=w.controlName,F=w.value,h=w.loading,z=w.advancedSetting,X=z===void 0?{}:z,B=w.disabled,x=w.hint,Q=this.state,i=Q.currentChecked,m=i===void 0?"":i,v=Q.visible,W=Q.mobileSearchResult,P=W===void 0?[]:W,u=X.itemtitle,l=u===void 0?"":u,T=X.clicksearch,G=X.searchfirst,D=X.min,M=D===void 0?"0":D,se=(this.props.optionData||[]).map(function(ne,de){return(0,te.default)({},ne,{index:de})}),ae=this.searchInput&&this.searchInput.value&&K===1?P:se;return B?H.createElement("div",{className:"customFormControlBox customFormButton flexRow controlDisabled"},F):H.createElement(H.Fragment,null,H.createElement(g.default,{className:"w100 customAntSelect mobileCustomApiSelect",dropdownRender:null,onClick:function(){E.setState({visible:!0}),(K===2&&G==="1"||K===1)&&E.props.handleSearch("")},value:F,placeholder:x||_l("\u8BF7\u9009\u62E9"),suffixIcon:H.createElement(L.Z,{icon:"arrow-right-border Font14"}),onChange:function(de){(de||E.searchInput&&!E.searchInput.value.length)&&E.props.onChange(de)},notFoundContent:null}),H.createElement(O(),{popup:!0,visible:v,animationType:"slide-up",className:"searchListModals",title:H.createElement("div",{className:"flexRow"},H.createElement("div",{className:"ThemeColor3 TxtLeft pRight16 Font15",onClick:function(){E.setState({visible:!1,mobileOptionData:[]}),E.searchInput&&(E.searchInput.value="")}},_l("\u53D6\u6D88")),H.createElement("div",{className:"flex ellipsis"},N),H.createElement("div",{className:"ThemeColor3 pLeft16 TxtRight Font15",onClick:function(){E.setState({visible:!1,currentChecked:"",mobileOptionData:[]}),E.searchInput&&(E.searchInput.value=""),E.props.onChange()}},_l("\u79FB\u9664")))},H.createElement(H.Fragment,null,K===2&&T==="0"?H.createElement("div",{className:"searchBox GrayBGF8 selectSearchBox"},H.createElement("input",{ref:function(de){return E.searchInput=de},type:"text",className:"cursorText flex Gray",placeholder:x||_l("\u8BF7\u9009\u62E9")}),H.createElement("div",{className:"searchBtn",onClick:function(){E.searchInput.value.length<parseInt(M)||E.props.handleSearch(E.searchInput.value)}},H.createElement(L.Z,{icon:"search",className:"Font18 Gray_75"}))):H.createElement("div",{className:"searchBox GrayBGF8"},H.createElement(L.Z,{icon:"search",className:"searchIcon Font20 Gray_75"}),H.createElement("input",{type:"text",className:"cursorText Gray",placeholder:x||_l("\u8BF7\u9009\u62E9"),ref:function(de){return E.searchInput=de},onChange:function(de){var Ce=E.searchInput.value.trim();if(!Ce){E.props.clearData();return}E.isOnComposition||E.searchRealTime(Ce)},onCompositionStart:function(){return E.isOnComposition=!0},onCompositionEnd:function(de){var Ce=E.searchInput.value.trim();de.type==="compositionend"&&(E.isOnComposition=!1),E.searchRealTime(Ce)}})),h?H.createElement("div",{className:"w100 h100 flexColumn alignItemsCenter justifyContentCenter"},H.createElement(p.Z,null)):j().get(this.searchInput||{},"value")&&K===1&&j().isEmpty(P)?H.createElement("div",{className:"w100 h100 flexColumn alignItemsCenter justifyContentCenter"},H.createElement(L.Z,{icon:"h5_search",className:"Font50"}),H.createElement("div",{className:"Gray_bd Font17 Bold mTop40"},_l("\u6CA1\u6709\u641C\u7D22\u7ED3\u679C"))):H.createElement("div",{className:"flex searchResult"},ae.map(function(ne,de){var Ce=E.props.renderList(ne);return H.createElement("div",{key:de,className:"flexRow searchItem alignItemsCenter",onClick:function(){E.setState({visible:!1,currentChecked:ne[l]}),E.props.onChange(ne[l]),E.props.handleSelect({key:String(ne.index),value:ne[l],label:ne[l]})}},H.createElement(n.Z,{checked:ne[l]===m}),H.createElement("div",{className:"flex TxtLeft overflowHidden itemContent"}," ",Ce))})))))}}]),ie}(H.Component),S=t(75208),I=t(45231),c=t(93967),q=t.n(c),b=(0,Z.Z)([`
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  max-width: `,`;
  width: 100%;
  height: 36px;
  border: 1px solid #ddd;
  border-radius: 3px;
  padding: 0 16px;
  background: #fff;
  color: #333;
  font-size: 13px;
  &:hover {
    background: `,`;
  }
  .successIcon {
    color: #4caf50;
    font-size: 18px;
    vertical-align: text-bottom;
  }
  .mobileLoading {
    .MdLoader-path {
      stroke: #bebebe;
    }
  }
`],[`
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  max-width: `,`;
  width: 100%;
  height: 36px;
  border: 1px solid #ddd;
  border-radius: 3px;
  padding: 0 16px;
  background: #fff;
  color: #333;
  font-size: 13px;
  &:hover {
    background: `,`;
  }
  .successIcon {
    color: #4caf50;
    font-size: 18px;
    vertical-align: text-bottom;
  }
  .mobileLoading {
    .MdLoader-path {
      stroke: #bebebe;
    }
  }
`]),k=U.ZP.div(b,function(re){return re.isMobile?"100%":re.maxWidth||"320px"},function(re){return re.isMobile?"#fff":"#f5f5f5"}),ee=function(re){(0,d.default)(ie,re);function ie(le){(0,a.default)(this,ie);var E=(0,o.default)(this,(ie.__proto__||y()(ie)).call(this,le));return E.realTimeSearch=j().debounce(function(){return E.handleSearch()},500),E.handleSearch=function(){var w=E.props,K=w.advancedSetting;K=K===void 0?{}:K;var N=K.requestmap,F=K.itemsource,h=K.itemtitle,z=w.dataSource,X=w.formData,B=w.worksheetId,x=w.controlId,Q=w.projectId,i=w.appId,m=w.type,v=E.state.keywords;E.setState({data:null});var W=safeParse(N||"[]");if(!z)return alert(_l("\u6A21\u7248\u4E3A\u7A7A\u6216\u5DF2\u5220\u9664"),3);if(m===50&&(!F||!h))return alert(_l("\u4E0B\u62C9\u6846\u7684\u5FC5\u586B\u6620\u5C04\u9879\u672A\u914D\u7F6E(\u9009\u9879\u5217\u8868\uFF0C\u9009\u9879\u540D)"),3);E.postList&&E.postList.abort(),E.setState({loading:!0,open:!0});var P=(0,S.yh)(W,X,v),u={data:!W.length||j().isEmpty(P)?"":P,projectId:Q,workSheetId:B,controlId:x,apkId:i,apiTemplateId:z};window.isPublicWorksheet&&(u.formId=window.publicWorksheetShareId),E.postList=I.Z.excuteApiQuery(u),E.postList.then(function(l){if(l.code===20008){E.setState({isSuccess:!1,loading:!1,data:null}),(0,f.Yg)({projectId:Q,okText:_l("\u7ACB\u5373\u5145\u503C"),hint:_l("\u4F59\u989D\u4E0D\u8DB3\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u5145\u503C"),explainText:H.createElement("div",null),onOk:function(){location.href="/admin/valueaddservice/"+Q}});return}if(l.message){alert(l.message,3),E.setState({isSuccess:!1,loading:!1,data:null});return}E.setState({isSuccess:!0,loading:!1,data:l.apiQueryData||{}},function(){m===49&&E.handleUpdate(l.apiQueryData)})})},E.handleUpdate=function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,S.pn)(E.props,w,!0,function(){E.setState({data:null,open:!1,keywords:""})})},E.handleSelect=function(w){var K=E.props.advancedSetting;K=K===void 0?{}:K;var N=K.responsemap,F=E.state.data||{},h=safeParse(N||"[]"),z={},X=E.getOptions().filter(function(B,x){return""+x===w.key});h.map(function(B){!B.subid&&j().isUndefined(F[B.cid])&&(z[B.cid]=(0,S.EU)((X[0]||{})[B.id]))}),E.handleUpdate((0,te.default)({},F,z))},E.getOptions=function(){var w=E.props.advancedSetting;w=w===void 0?{}:w;var K=w.itemsource,N=E.state.data||{};return safeParse(N[K]||"[]")},E.getMappingItem=function(w){var K=E.props,N=K.advancedSetting;N=N===void 0?{}:N;var F=N.responsemap,h=K.formData,z=h===void 0?[]:h,X=safeParse(F||"[]"),B=j().find(X,function(x){return x.id===w&&!x.pid&&!x.subid});return B?j().find(z,function(x){return x.controlId===B.cid}):""},E.renderList=function(w){var K=E.props.advancedSetting,N=K.itemtitle,F=K.itemdesc,h=safeParse(F||"[]"),z=h.map(function(x){var Q=E.getMappingItem(x);return(0,S.u4)(Q,w[x])}).filter(function(x){return x}),X=(0,S.u4)(E.getMappingItem(N),w[N]),B=(0,f.Q9)();return H.createElement(H.Fragment,null,H.createElement("div",{className:q()("ellipsis",{Gray:B,Bold:h.length>0})},X||_l("\u65E0\u6807\u9898")),z.length?H.createElement("span",{className:q()("Font12 Gray_75 LineHeight16"),style:{whiteSpace:"normal"}},z.join(" | ")):null)},E.getSuffixIcon=function(){var w=E.props,K=w.enumDefault,N=w.disabled,F=w.advancedSetting;F=F===void 0?{}:F;var h=F.clicksearch,z=F.min,X=z===void 0?"0":z,B=j().get(E.state,"keywords.length")>=parseInt(X);return K===2?h==="1"?H.createElement(L.Z,{icon:"search1 Font14"}):H.createElement("div",{className:q()("searchIconBox",{disabled:N||!B}),onClick:function(Q){if(Q.stopPropagation(),!B)return alert(_l("\u6700\u5C11\u8F93\u5165%0\u4E2A\u5173\u952E\u5B57",X),3);E.handleSearch()}},H.createElement("i",{className:"icon-search1 pointer Font18"})):H.createElement(L.Z,{icon:"arrow-down-border Font14"})},E.state={loading:!1,isSuccess:!1,open:!1,keywords:"",data:null},E}return(0,r.default)(ie,[{key:"componentDidMount",value:function(){var E=this;j().get(this.props,"defaultSelectProps.open")&&((this.props.enumDefault!==2||j().get(this.props,"advancedSetting.searchfirst")==="1")&&this.handleSearch(),this.box&&setTimeout(function(){try{E.box.querySelector(".ant-select-selection-search-input").focus()}catch(w){console.log(w)}},100))}},{key:"render",value:function(){var E=this,w=this.props,K=w.isCell,N=w.advancedSetting,F=N===void 0?{}:N,h=w.defaultSelectProps,z=h===void 0?{}:h,X=w.type,B=w.enumDefault,x=w.disabled,Q=w.dropdownClassName,i=w.value,m=w.onVisibleChange,v=m===void 0?function(){}:m,W=w.controlName,P=w.hint,u=P===void 0?"":P,l=F.itemtitle,T=l===void 0?"":l,G=F.clicksearch,D=F.searchfirst,M=F.min,se=M===void 0?"0":M,ae=this.state,ne=ae.loading,de=ae.isSuccess,Ce=ae.keywords,he=ae.data,fe=ae.open,Ee=(0,f.Q9)();if(X===49)return H.createElement(k,{onClick:function(){ne||E.handleSearch()},isMobile:Ee,maxWidth:u.length<=2?"120px":"320px"},ne?H.createElement(p.Z,{size:"small",className:q()({mobileLoading:Ee})}):H.createElement("span",{className:"TxtCenter flex overflow_ellipsis"},de&&H.createElement("i",{className:"icon-done successIcon"}),H.createElement("span",{className:"Bold"}," ",u||_l("\u67E5\u8BE2"))));var Y=this.getOptions(),oe=this.getSuffixIcon(),ve=B===2&&G!=="1",ue={};return B===1&&(ue={onSearch:function(Se){return E.setState({keywords:Se})},filterOption:function(Se,ye){return(""+ye.label).indexOf(Se)>-1},onDropdownVisibleChange:function(Se){E.setState({keywords:""}),Se?E.handleSearch():E.search.blur(),v(Se)}}),B===2&&(ue={onSearch:function(Se){return E.setState({keywords:Se},function(){if(G==="1"){if(E.state.keywords.length<parseInt(se))return;E.realTimeSearch()}})},filterOption:!1,onInputKeyDown:function(Se){Se.keyCode===13&&G!=="1"&&E.handleSearch()},onDropdownVisibleChange:function(Se){D==="1"&&Se&&E.handleSearch()}}),Ee?H.createElement(A,{value:i,hint:u,loading:ne,enumDefault:B,onChange:this.props.onChange,controlName:W,advancedSetting:F,optionData:Y,handleSearch:function(Se){E.setState({keywords:Se},E.handleSearch)},renderList:this.renderList,realTimeSearch:function(Se){E.setState({keywords:Se},function(){E.state.keywords.length<parseInt(se)||E.realTimeSearch()})},disabled:x,handleSelect:this.handleSelect,clearData:function(){E.setState({data:[]})}}):H.createElement("div",{ref:function(Se){return E.box=Se}},H.createElement(g.default,(0,te.default)({ref:function(Se){E.search=Se},open:fe,getPopupContainer:function(){return K?document.body:E.box},dropdownClassName:Q,className:q()("w100 customAntSelect",{customApiSelect:ve,customSelectIcon:B===2}),disabled:x,allowClear:i,listHeight:320,optionLabelProp:"label",searchValue:Ce,value:i,placeholder:u||_l("\u8BF7\u9009\u62E9"),showSearch:!0,suffixIcon:oe},(0,te.default)({},z,ue),{notFoundContent:ne?H.createElement(p.Z,{className:"flexCenter",size:"small"}):he?H.createElement("span",{className:"Gray_9e"},_l("\u6CA1\u6709\u8FD4\u56DE\u7ED3\u679C")):null,onSelect:function(Se,ye){return E.handleSelect(ye)},onChange:function(Se,ye){(j().get(ye,"label")||!Ce.length)&&E.props.onChange(j().get(ye,"label"))},onFocus:function(){return E.setState({open:!0})},onBlur:function(){E.setState({data:null,open:!1,keywords:""}),v(!1)}}),Y.map(function(pe,Se){var ye=(0,S.u4)(E.getMappingItem(T),pe[T]);return H.createElement(g.default.Option,{key:Se,value:Se,label:ye},E.renderList(pe))})))}}]),ie}(H.Component)},75208:(lt,Te,t)=>{"use strict";t.d(Te,{EU:()=>C,pn:()=>O,u4:()=>V,yh:()=>f});var ce=t(88239),g=t(63239),p=t.n(g),L=t(85315),te=t(96486),R=t.n(te);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(94914);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(25734);var r=t(30381),o=t.n(r);if(!/^(1887|7596|7798)$/.test(t.j))var d=t(91247);var Z=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},j=void 0;if(s.value&&R().isArray(JSON.parse(s.value)))j=JSON.parse(s.value);else{var A=JSON.parse(s.value||"{}"),S=A.attachments,I=S===void 0?[]:S,c=A.attachmentData,q=c===void 0?[]:c,b=A.knowledgeAtts,k=b===void 0?[]:b;j=[].concat((0,L.Z)(I),(0,L.Z)(q),(0,L.Z)(k))}return j},H=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},j=arguments[1];if(!s.value)return"";switch(s.type){case 2:return j===10000007?(s.value||"").replace("\uFF0C",",").split(","):s.value;case 9:case 10:case 11:var A=safeParse(s.value||"[]");if(!A.length)return"";var S=(s.options||[]).filter(function(k){return R().includes(A,k.key)&&!k.isDeleted});return j===6?S.map(function(k){return k.score}).reduce(function(k,ee){return k+ee},0):j===10000007?S.map(function(k){return k.value}):S.map(function(k){return k.value}).join("\u3001");case 14:var I=Z(s);return I.map(function(k){var ee=R().get(k,"fileID");return/\w{8}(-\w{4}){3}-\w{12}/.test(ee)?ee:p()(k)});case 15:case 16:var c=(0,y.eO)(s),q=c.formatMode;return s.value?o()(s.value).format(q):"";case 26:return j===2?safeParse(s.value||"[]").map(function(k){return k.accountId===md.global.Account.accountId?md.global.Account.fullname:k.fullname}).join("\u3001"):safeParse(s.value||"[]").map(function(k){return k.accountId});case 27:return j===2?safeParse(s.value||"[]").map(function(k){return k.departmentName}).join("\u3001"):safeParse(s.value||"[]").map(function(k){return k.departmentId});case 19:case 23:case 24:return(safeParse(s.value)||{}).name;case 29:var b=safeParse(s.value||"[]").map(function(k){return k.name});return j===2?b.join(""):b;case 48:return safeParse(s.value||"[]").map(function(k){return k.organizeName}).join("\u3001");default:return s.value}},U=function(s,j,A){var S=safeParse(s.defsource||"[]").map(function(c){if(c.cid){if(c.cid==="search-keyword")return A;var q=R().includes(["ocr-file","ocr-file-url"],c.cid);if(c.cid==="ocr-file-url"&&s.type===2)return A?""+R().get(A,"serverName")+R().get(A,"key")+"?imageView2/2/w/1920/q/90":"";if(c.cid==="ocr-file"&&s.type===14){var b=R().get(A,"fileId");return A?/\w{8}(-\w{4}){3}-\w{12}/.test(b)?[b]:[p()(A)]:""}var k=R().find(j,function(ie){return ie.controlId===c.cid});return H(k,s.type)}if(c.staticValue){if(R().includes([2,6],s.type))return c.staticValue;if(s.type===16){var ee=(0,y.eO)(s),re=ee.formatMode;return c.staticValue?c.staticValue==="2"?o()().format(re):o()(c.staticValue).format(re):""}if(s.type===26)return R().includes(["user-self"],safeParse(c.staticValue).accountId)?md.global.Account.accountId:safeParse(c.staticValue).accountId;if(s.type===27)return safeParse(c.staticValue).departmentId;if(s.type===10000007)return(c.staticValue||"").replace("\uFF0C",",").split(",")}});if(R().includes([2,6,16],s.type))return S.join("");var I=R().flatten(S).filter(function(c){return!(0,a.O2)(c)});return R().isEmpty(I)?"":I},f=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",S={};return s.forEach(function(I){if(!I.pid)if(I.type===10000008){var c=R().find(j,function(k){return k.controlId===R().get(safeParse(I.defsource||"[]")[0],"cid")})||{},q=c.type===29?safeParse(c.value||"[]"):R().get(c.value,["rows"])||[];if(S[I.id]="",q.length){var b=s.filter(function(k){return k.pid===I.id});S[I.id]=q.map(function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ee={};return b.map(function(re){var ie=safeParse(re.defsource||"[]")[0]||{},le=ie.cid,E=ie.rcid,w=R().find(E?c.relationControls||[]:j,function(N){return N.controlId===le}),K=E?(c.relationControls||[]).map(function(N){return N.controlId===le?(0,ce.default)({},N,{value:c.type===29?safeParse(k.sourcevalue||"{}")[le]:k[le]}):N}):j;ee[re.id]=w||!le?U(re,K,A):""}),ee})}}else S[I.id]=U(I,j,A)}),S},V=function(s){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(s){var A=[];if(R().includes([9,10,11],s.type))A=safeParse(j||"[]").map(function(S){return R().get(R().find(s.options||[],function(I){return I.key===S}),"value")||""});else if(s.type===26)A=safeParse(j||"[]").map(function(S){return S.fullname});else if(s.type===27)A=safeParse(j||"[]").map(function(S){return S.departmentName});else if(s.type===48)A=safeParse(j||"[]").map(function(S){return S.organizeName});else return C(j);return A.length>0?A.join(""):""}return C(j)},C=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",j=s;return typeof j!="string"&&(j=""+j),R().includes(["{}","[]","null"],j)&&(j=""),j},O=function(s){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,S=arguments[3],I=s.advancedSetting;I=I===void 0?{}:I;var c=I.responsemap,q=s.formData,b=s.onChange,k=safeParse(c||"[]");k.map(function(ee){var re=R().find(q,function(le){return le.controlId===ee.cid});if(re&&!R().isUndefined(j[ee.cid])){if(re.type===34&&R().includes([10000007,10000008],ee.type))b({action:"clearAndSet",isDefault:A,rows:safeParse(j[ee.cid]||"[]").map(function(le){return(0,ce.default)({},le,{rowid:"temprowid-"+(0,d.Z)(),allowedit:!0,addTime:new Date().getTime()})})},re.controlId);else if(!ee.subid){var ie=j[ee.cid];ee.type===10000007&&j[ee.cid]&&R().isArray(safeParse(j[ee.cid]))&&(R().includes([26],re.type)||(ie=safeParse(j[ee.cid]).join(","))),b(ie,re.controlId,!1)}R().isFunction(S)&&S()}})}},7374:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>Q});var ce=t(42185),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(20148),r=t.n(a),o=t(60385),d=t.n(o),Z=t(86735),H=t(67294),U=t(71893),f=t(29314),V=t(95283),C=t(17672),O=t(5274),n=t(93967),s=t.n(n),j=t(15405),A=t(33126),S=t(15577),I=t(71346),c=t(19575),q=t.n(c),b=t(42541),k=t(96486),ee=t.n(k),re,ie,le=(0,Z.Z)([`
  height: 300px !important;
  overflow: hidden;
  border-top-right-radius: 15px;
  border-top-left-radius: 15px;
`],[`
  height: 300px !important;
  overflow: hidden;
  border-top-right-radius: 15px;
  border-top-left-radius: 15px;
`]),E=(0,Z.Z)([`
  cursor: pointer;
  height: `,`;
  .addSignature {
    color: #757575;
    line-height: 36px;
    &:hover {
      color: #2196f3;
    }
  }
`],[`
  cursor: pointer;
  height: `,`;
  .addSignature {
    color: #757575;
    line-height: 36px;
    &:hover {
      color: #2196f3;
    }
  }
`]),w=(0,Z.Z)([`
  width: 480px;
  min-width: 200px;
  background-color: #fff;
  border-radius: 4px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    span {
      font-size: 15px;
    }
    i {
      cursor: pointer;
      color: #757575;
      &:hover {
        color: #2196f3;
      }
    }
  }
  .signatureCanvas {
    width: 100%;
    height: 200px;
    display: block;
  }
`],[`
  width: 480px;
  min-width: 200px;
  background-color: #fff;
  border-radius: 4px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    span {
      font-size: 15px;
    }
    i {
      cursor: pointer;
      color: #757575;
      &:hover {
        color: #2196f3;
      }
    }
  }
  .signatureCanvas {
    width: 100%;
    height: 200px;
    display: block;
  }
`]),K=(0,Z.Z)([`
  position: relative;
  height: 130px;
  background-color: #fff;
  background-repeat: no-repeat;
  background-size: contain;
  background-position: center;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.12), 0 0 2px rgba(0, 0, 0, 0.12);
  border-radius: 4px;
  &:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12), 0 0 2px rgba(0, 0, 0, 0.12);
    .remove {
      visibility: visible;
    }
  }
  .remove {
    position: absolute;
    right: -12px;
    top: -12px;
    visibility: hidden;
  }
`],[`
  position: relative;
  height: 130px;
  background-color: #fff;
  background-repeat: no-repeat;
  background-size: contain;
  background-position: center;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.12), 0 0 2px rgba(0, 0, 0, 0.12);
  border-radius: 4px;
  &:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12), 0 0 2px rgba(0, 0, 0, 0.12);
    .remove {
      visibility: visible;
    }
  }
  .remove {
    position: absolute;
    right: -12px;
    top: -12px;
    visibility: hidden;
  }
`]),N=(0,Z.Z)([`
  display: flex;
  align-items: center;
  justify-content: flex-end;
  border-top: 1px solid #ddd;
  padding: 11px 20px;
  .clearSignature {
    margin-right: 20px;
    color: #9e9e9e;
    cursor: pointer;
  }
  .lastSignature {
    margin: 0 auto 0 0;
  }
`],[`
  display: flex;
  align-items: center;
  justify-content: flex-end;
  border-top: 1px solid #ddd;
  padding: 11px 20px;
  .clearSignature {
    margin-right: 20px;
    color: #9e9e9e;
    cursor: pointer;
  }
  .lastSignature {
    margin: 0 auto 0 0;
  }
`]),F=(0,A.Z)(j.Z),h=(0,U.ZP)(d())(le),z=U.ZP.div(E,function(i){return i.autoHeight&&"auto !important"}),X=U.ZP.div(w),B=U.ZP.div(K),x=U.ZP.div(N),Q=(ie=re=function(i){(0,y.default)(m,i);function m(v){(0,L.default)(this,m);var W=(0,R.default)(this,(m.__proto__||p()(m)).call(this,v));return W.state={isEdit:!1,popupVisible:!1,lastInfo:""},W.getPopupDirection=function(){var P=W.$ref.current;if(P){var u=document.querySelector(".workSheetNewRecord .mui-dialog-body");if(u){var l=P.getBoundingClientRect(),T=l.bottom,G=l.top,D=u.getBoundingClientRect(),M=D.bottom,se=D.top;M-T<360&&G-se>360?W.popupDirection="top":W.popupDirection="bottom"}}},W.clickEvent=function(P){W.setState({popupVisible:!1}),W.props.onClose&&W.props.onClose()},W.showPopup=function(P){W.getPopupDirection(),P&&setTimeout(W.initCanvas,100)},W.closePopup=function(){W.setState({popupVisible:!1}),W.props.onClose&&W.props.onClose()},W.initCanvas=function(){var P=document.getElementById("signatureCanvas");P&&(P.width=P.offsetWidth,P.height=P.offsetHeight,P.getContext("2d"),W.signaturePad=new C.Z(P,{onBegin:function(){W.setState({isEdit:!0})}}))},W.saveSignature=function(P){if(P&&P.stopPropagation(),W.state.lastInfo){W.setState({popupVisible:!1}),W.props.onChange(W.state.lastInfo.url);return}var u=W.signaturePad.toDataURL("image/png"),l=W.props,T=l.projectId,G=l.appId,D=l.worksheetId;(0,S.LP)([{bucket:4,ext:".png"}],10,{projectId:T,appId:G,worksheetId:D}).then(function(M){if(M.error)alert(M.error);else{var se=md.global.FileStoreConfig.uploadHost+"/putb64/-1/key/"+c.Base64.encode(M[0].key);O.Z.post(se,u.split(",")[1],{headers:{"Content-Type":"application/octet-stream",Authorization:"UpToken "+M[0].uptoken}}).then(function(){W.setState({popupVisible:!1}),md.global.Account.isPortal||window.isPublicWorksheet||ee().get(window,"shareState.isPublicWorkflowRecord")?W.props.onChange(M[0].url):I.Z.editSign({url:M[0].url}).then(function(ae){ae&&W.props.onChange(M[0].url)})}).catch(function(ae){console.log(ae),alert(_l("\u4FDD\u5B58\u5931\u8D25"),2)})}})},W.useLastSignature=function(){I.Z.getSign().then(function(P){if(!P.url)return alert(_l("\u6682\u65E0\u7B7E\u540D\u8BB0\u5F55"),3);W.setState({isEdit:!0,lastInfo:P})})},W.clear=function(){W.signaturePad.clear(),W.setState({isEdit:!1,lastInfo:""},function(){setTimeout(function(){W.initCanvas()},100)})},W.removeSignature=function(P){P.stopPropagation(),W.props.onChange(""),W.setState({isEdit:!1,lastInfo:""})},W.getAlign=function(){return W.popupDirection==="bottom"?{points:["tl","bl"],offset:[-12,3],overflow:{adjustX:!0,adjustY:!0}}:{points:["bl","tl"],offset:[-12,-3],overflow:{adjustX:!0,adjustY:!0}}},W.preview=function(P){P.nativeEvent.stopImmediatePropagation();var u=W.props.value;(0,V.Z)({attachments:[{previewType:1,ext:"png",name:"signature.png",previewAttachmentType:"QINIU",path:u}],index:0,callFrom:"player",hideFunctions:location.href.indexOf("/public/")>-1?["editFileName","download"]:["editFileName"]})},W.renderSignature=function(){var P=W.props,u=P.onlySignature,l=P.children,T=P.visible,G=P.popupContainer,D=P.destroyPopupOnHide,M=P.popupAlign,se=W.state,ae=se.popupVisible,ne=se.lastInfo;return(0,S.Q9)()?H.createElement(H.Fragment,null,H.createElement("div",{className:"addSignature",onClick:function(Ce){W.setState({popupVisible:!0}),setTimeout(W.initCanvas,500),Ce.nativeEvent.stopImmediatePropagation()}},H.createElement("i",{className:"icon-e-signature Font17"}),H.createElement("span",{className:"mLeft5"},_l("\u6DFB\u52A0\u7B7E\u540D"))),H.createElement(h,{popup:!0,visible:ae,animationType:"slide-up"},H.createElement("div",{className:"flexColumn leftAlign h100"},H.createElement("div",{className:"flexRow pTop15 pLeft20 pRight20 pBottom8"},H.createElement("div",{className:"Font18 Gray flex bold ellipsis"},_l("\u8BF7\u5728\u4E0B\u65B9\u7A7A\u767D\u533A\u57DF\u6A2A\u5411\u4E66\u5199\u7B7E\u540D")),H.createElement("i",{className:"icon-close Gray_9e Font20",onClick:W.closePopup})),ne?H.createElement("div",{className:"signatureCanvas flex"},H.createElement("img",{src:ne.url,className:"w100 h100"})):H.createElement("canvas",{id:"signatureCanvas",className:"signatureCanvas flex"}),W.renderFooter()))):H.createElement(f.Z,{popupVisible:u?T:ae,action:["click"],popupAlign:M||W.getAlign(),onPopupVisibleChange:W.showPopup,getPopupContainer:function(){return G||W.$ref.current},destroyPopupOnHide:D,popup:H.createElement(F,{onClickAway:W.clickEvent},H.createElement(X,{onClick:function(Ce){return Ce.nativeEvent.stopImmediatePropagation()}},H.createElement("div",{className:"header"},H.createElement("span",{className:"Gray"},_l("\u8BF7\u5728\u4E0B\u65B9\u7A7A\u767D\u533A\u57DF\u6A2A\u5411\u4E66\u5199\u7B7E\u540D")),H.createElement("i",{onClick:W.closePopup,className:"Font18 icon-close"})),ne?H.createElement("div",{className:"signatureCanvas"},H.createElement("img",{src:ne.url,className:"w100 h100"})):H.createElement("canvas",{id:"signatureCanvas",className:"signatureCanvas"}),W.renderFooter()))},u?l:H.createElement("div",{className:"addSignature",onClick:function(Ce){W.setState({popupVisible:!0}),Ce.nativeEvent.stopImmediatePropagation()}},H.createElement("i",{className:"icon-e-signature Font17"}),H.createElement("span",{className:"mLeft5"},_l("\u6DFB\u52A0\u7B7E\u540D"))))},W.$ref=(0,H.createRef)(),W.popupDirection="bottom",W}return(0,te.default)(m,[{key:"componentWillReceiveProps",value:function(W){W.flag!==this.props.flag&&!W.value&&this.setState({isEdit:!1,lastInfo:""})}},{key:"componentDidUpdate",value:function(W){this.props.onlySignature&&!W.visible&&this.props.visible&&setTimeout(this.initCanvas,100)}},{key:"renderFooter",value:function(){var W=this.props.advancedSetting;W=W===void 0?{}:W;var P=W.uselast,u=this.state.isEdit;return H.createElement(x,null,P==="1"&&!(md.global.Account.isPortal||window.isPublicWorksheet||ee().get(window,"shareState.isPublicWorkflowRecord"))&&H.createElement("div",{className:"ThemeColor3 ThemeHoverColor2 pointer lastSignature",onClick:this.useLastSignature},_l("\u4F7F\u7528\u4E0A\u6B21\u7B7E\u540D")),u&&H.createElement("div",{className:"clearSignature",onClick:this.clear},_l("\u6E05\u9664")),H.createElement(ce.ZP,{disabled:!u,onClick:this.saveSignature,size:"small"},_l("\u786E\u8BA4")))}},{key:"render",value:function(){var W=this,P=this.props,u=P.disabled,l=P.onlySignature,T=P.value;return u?H.createElement(B,{onClick:this.preview,style:{backgroundImage:"url("+T+")"}}):l?this.renderSignature():H.createElement(z,{ref:this.$ref,autoHeight:!!T,className:s()("signature",{"customFormControlBox ThemeHoverColor3":!T})},T?H.createElement(B,{onClick:function(D){T&&W.preview(D),D.nativeEvent.stopImmediatePropagation()},style:{backgroundImage:"url("+T+")"}},H.createElement("div",{className:"remove",onClick:this.removeSignature},H.createElement(b.xC,null,H.createElement("i",{className:"icon icon-close"})))):this.renderSignature())}}]),m}(H.Component),re.propTypes={},re.defaultProps={},ie)},26313:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>E});var ce=t(68841),g=t.n(ce),p=t(12528),L=t(88239),te=t(17206),R=t(33867),y=t(52945),a=t.n(y),r=t(85105),o=t.n(r),d=t(99663),Z=t(22600),H=t(49135),U=t(93196),f=t(45697),V=t.n(f),C=t(67294),O=t(93967),n=t.n(O),s=t(6917),j=t(43792),A=t(19458),S=t(13681),I=t(2e3),c=t(36612),q=t(15577),b=t(30381),k=t.n(b),ee=t(96486),re=t.n(ee),ie,le,E=(le=ie=function(w){(0,U.default)(K,w);function K(){var N,F,h,z;(0,d.default)(this,K);for(var X=arguments.length,B=Array(X),x=0;x<X;x++)B[x]=arguments[x];return z=(F=(h=(0,H.default)(this,(N=K.__proto__||o()(K)).call.apply(N,[this].concat(B))),h),h.state={isFocus:!1,originValue:"",showobileDatePicker:!1},h.onChange=function(Q){var i=h.props.unit==="6"?"HH:mm:ss":"HH:mm";Q&&(Q=k()(k()(Q).format("HH:mm:ss"),i).format("HH:mm:ss")),h.props.onChange(Q)},h.formatValueToMoment=function(Q){var i=h.props.unit,m=i==="6"?"HH:mm:ss":"HH:mm";return Q?k()(Q).year()?k()(Q):k()(Q,m):""},F),(0,H.default)(h,z)}return(0,Z.default)(K,[{key:"render",value:function(){var F=this,h=this.props,z=h.dropdownClassName,X=h.disabled,B=h.unit,x=h.controlId,Q=h.from,i=h.advancedSetting,m=i===void 0?{}:i,v=h.compProps,W=v===void 0?{}:v,P=h.formData,u=h.masterData,l=h.onBlur,T=h.controlName,G=this.state,D=G.originValue,M=G.showobileDatePicker,se=this.props.value;/^\d+$/.test(String(se))&&String(se).length<5&&(se=""),se=this.formatValueToMoment(se);var ae=parseInt(m.timeinterval||"1"),ne=getCookie("i18n_langtag")||md.global.Config.DefaultLang,de=void 0,Ce=void 0;m.min&&(de=(0,c.QX)(P,a()({},this.props,{advancedSetting:{defsource:m.min}}),u)),m.max&&(Ce=(0,c.QX)(P,a()({},this.props,{advancedSetting:{defsource:m.max}}),u));var he="00:00-24:00".split("-");if((0,q.Q9)()){var fe=B==="6"?"HH:mm:ss":"HH:mm";return C.createElement(C.Fragment,null,C.createElement("div",{className:n()("customFormControlBox customFormButton flexRow",{controlDisabled:X}),onClick:function(){!X&&F.setState({showobileDatePicker:!0})}},C.createElement("span",{className:n()("flex mRight20 ellipsis",{Gray_bd:!se})},se?se.format(fe):_l("\u8BF7\u9009\u62E9\u65E5\u671F")),!X&&C.createElement(R.Z,{icon:re().includes([s.BD.H5_ADD,s.BD.H5_EDIT],Q)?"arrow-right-border":"bellSchedule",className:"Font16 Gray_bd"})),M&&C.createElement(te.Z,{minuteStep:ae,customHeader:T,isOpen:M,value:se,min:de?new Date(k()(de)):new Date(1900,1,1,0,0,0),max:Ce?new Date(k()(Ce)):new Date(2100,12,31,23,59,59),disabled:X,onSelect:function(Y){F.onChange(Y),F.setState({showobileDatePicker:!1})},onCancel:function(){F.setState({showobileDatePicker:!1}),F.onChange(null)},dateConfig:B==="6"?{hour:{format:_l("hh\u65F6"),caption:"Hour",step:1},minute:{format:_l("mm\u5206"),caption:"Min",step:ae},second:{format:_l("ss\u79D2"),caption:"Second",step:1}}:{hour:{format:_l("hh\u65F6"),caption:"Hour",step:1},minute:{format:_l("mm\u5206"),caption:"Min",step:ae}}}))}return C.createElement(p.Z,(0,L.default)({className:n()("w100 customAntPicker customFormControlBox",{controlDisabled:X}),locale:ne==="en"?S.Z:ne==="ja"?I.Z:ne==="zh-Hant"?A.Z:j.Z,disabled:X,value:se,format:B==="6"?"HH:mm:ss":"HH:mm",placeholder:this.state.isFocus?B==="6"?"HH:mm:ss":"HH:mm":_l("\u8BF7\u9009\u62E9\u65F6\u95F4"),suffixIcon:X?null:C.createElement(R.Z,{icon:re().includes([s.BD.H5_ADD,s.BD.H5_EDIT],Q)?"arrow-right-border":"access_time",className:"Font14 Gray_bd"}),hideDisabledOptions:!0,minuteStep:ae,disabledTime:function(Y){return{disabledHours:function(){var ve=[];if(Y&&de)for(var ue=0;ue<24;ue++)ue<F.formatValueToMoment(de).hour()&&ve.push(ue);if(Y&&Ce)for(var pe=0;pe<24;pe++)pe>F.formatValueToMoment(Ce).hour()&&ve.push(pe);return ve},disabledMinutes:function(ve){var ue=[];if(Y&&de)for(var pe=0;pe<60;pe++)ve===F.formatValueToMoment(de).hour()&&pe<F.formatValueToMoment(de).minute()&&ue.push(pe);if(Y&&Ce)for(var Se=0;Se<60;Se++)ve===F.formatValueToMoment(Ce).hour()&&Se>F.formatValueToMoment(Ce).minute()&&ue.push(Se);return ue}}},dropdownClassName:"customAntPicker_"+x+" "+(z||""),onOpenChange:function(Y){Y&&parseInt(he[0])===0&&parseInt(he[1])===24&&setTimeout(function(){$(".customAntPicker_"+x).find(".ant-picker-time-panel-column:first").scrollTop(220)},200)},onFocus:function(Y){return F.setState({isFocus:!0,originValue:Y.target.value.trim()})},onBlur:function(){F.setState({isFocus:!1}),l(D)},onChange:this.onChange},W))}}]),K}(C.Component),ie.propTypes={dropdownClassName:V().string,advancedSetting:V().object,from:V().number,type:V().number,disabled:V().bool,controlId:V().string,value:V().string,onChange:V().func,formData:V().arrayOf(V().shape({})),masterData:V().object,onBlur:V().func},ie.defaultProps={onBlur:function(){}},le)},70518:(lt,Te,t)=>{"use strict";t.d(Te,{x:()=>a});var ce=t(72444),g=t(52945),p=t.n(g),L=t(67294),te=t(73935);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(30409);function y(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=document.createElement("div");document.body.appendChild(d);function Z(){te.unmountComponentAtNode(d),document.body.removeChild(d)}te.render(L.createElement(R.Z,{extra:o,options:r,onClose:Z}),d)}function a(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=["editFileName"];o.disableDownload&&(d=d.concat(["download","share","saveToKnowlege"])),o=p()({},{index:0,attachments:[],showThumbnail:!0,hideFunctions:d},o),typeof r=="string"?o.attachments=[{previewAttachmentType:"QINIU",name:o.name||_l("\u56FE\u7247\u9884\u89C8"),path:r,privateDownloadUrl:r,ext:o.ext||(r.match(/\.(\w+)$/)||"")[1]}]:(typeof r>"u"?"undefined":(0,ce.default)(r))==="object"&&r.length&&(o.attachments=r.map(function(Z){return{previewAttachmentType:"QINIU",name:_l("\u56FE\u7247\u9884\u89C8")+((Z.match(/\.(\w+)$/)||"")[1]||""),path:Z,ext:o.ext||(Z.match(/\.(\w+)$/)||"")[1]}})),y(o)}},95283:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>te});var ce=t(67294),g=t(73935),p=t(30409),L=function(y,a){var r=ce.createElement(p.Z,{extra:a||{},options:y,onClose:function(){g.unmountComponentAtNode($("#attachemntsPreviewContainer")[0]),$("#attachemntsPreviewContainer").remove(),typeof y.closeCallback=="function"&&y.closeCallback()}}),o=$("#attachemntsPreviewContainer");o.length?g.render(r,o[0]):g.render(r,$('<div id="attachemntsPreviewContainer"></div>').appendTo("html > body")[0]),$(document).on("click","#attachemntsPreviewContainer",function(d){d.stopPropagation()})};const te=L},94550:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>E});var ce=t(8177),g=t.n(ce),p=t(52945),L=t.n(p),te=t(85105),R=t.n(te),y=t(99663),a=t(22600),r=t(49135),o=t(93196),d=t(88902),Z=t.n(d),H=t(67294),U=t(45697),f=t.n(U),V=t(44894),C=t(93967),O=t.n(C),n=t(98153),s=t(24607),j=t(70518),A=t(96486),S=t.n(A),I,c,q,b,k;function ee(w,K,N,F,h){var z={};return Object.keys(F).forEach(function(X){z[X]=F[X]}),z.enumerable=!!z.enumerable,z.configurable=!!z.configurable,("value"in z||z.initializer)&&(z.writable=!0),z=N.slice().reverse().reduce(function(X,B){return B(w,K,X)||X},z),h&&z.initializer!==void 0&&(z.value=z.initializer?z.initializer.call(h):void 0,z.initializer=void 0),z.initializer===void 0&&(Object.defineProperty(w,K,z),z=null),z}var re={RECORDDETAIL:1,SELECT_RECORD_DIALOG:2,MOBILE:3};function ie(w){return Z()(re)[w-1]||""}function le(w){return S().find(w,function(K){return File.isPicture(K.ext)})}var E=(q=(k=b=function(w){(0,o.default)(K,w);function K(){var N,F,h,z;(0,y.default)(this,K);for(var X=arguments.length,B=Array(X),x=0;x<X;x++)B[x]=arguments[x];return z=(F=(h=(0,r.default)(this,(N=K.__proto__||R()(K)).call.apply(N,[this].concat(B))),h),h.state={forceShowFullValue:null},F),(0,r.default)(h,z)}return(0,a.default)(K,[{key:"handleCoverClick",value:function(F){var h=this.props,z=h.from,X=z===void 0?1:z,B=h.disableDownload,x=this.cover,Q=X===re.MOBILE;Q||((0,j.x)(x.previewUrl.replace(/\|imageView2\/1\/w\/\d+\/h\/\d+/,""),{disableDownload:B,ext:(x.previewUrl.match(/\.(jpg|jpeg|png|gif|bmp)(\?|$)/i)||"")[1]||"png"}),F.stopPropagation())}},{key:"render",value:function(){var F=this,h=this.props,z=h.from,X=z===void 0?1:z,B=h.disabled,x=h.focused,Q=h.selected,i=h.controls,m=h.data,v=h.onDelete,W=h.onClick,P=h.coverCid,u=h.projectId,l=h.sourceEntityName,T=h.viewId,G=h.isCharge,D=h.disabledLink,M=h.worksheetId,se=h.appId,ae=this.cover,ne=this.cardControls,de=this.state.forceShowFullValue,Ce=S().find(i||[],function(Y){return Y.attribute===1})||{},he=S().isNull(de)?S().get(Ce,"advancedSetting.datamask")!=="1":de,fe=m.rowid?(0,s.xI)(i,m,void 0,{noMask:he}):_l("\u5173\u8054\u5F53\u524D%0",l),Ee=(G||S().get(Ce,"advancedSetting.isdecrypt")==="1")&&(m[Ce.controlId]||m.titleValue)&&!he;return H.createElement("div",{className:O()("worksheetRecordCard",ie(X).toLowerCase(),{selected:Q,focused:x,noControls:!ne.length,withoutCover:!P,disabledLink:D}),onClick:W},!B&&H.createElement("span",{className:"deleteRecord",onClick:function(oe){oe.stopPropagation(),v()}},H.createElement("i",{className:"icon icon-minus-square"})),H.createElement("span",{className:O()("selectedIcon",{hide:!Q})},H.createElement("i",{className:"icon icon-ok"})),H.createElement("p",{className:"titleText ellipsis"},H.createElement("span",{className:O()({maskHoverTheme:Ee})},fe,Ee&&H.createElement("i",{className:"icon icon-eye_off Hand Font14 Gray_bd mLeft4",style:{verticalAlign:"text-top"},onClick:function(oe){Ee&&(oe.stopPropagation(),F.setState({forceShowFullValue:!0}))}}))),H.createElement("div",{className:"visibleControls flexRow"},ne.slice(0,X===re.SELECT_RECORD_DIALOG?6:3).map(function(Y,oe){return H.createElement("div",{className:"visibleControl flex",key:oe},H.createElement("div",{className:"controlName ellipsis"},Y.controlName),H.createElement("div",{className:"controlContent"},m[Y.controlId]?H.createElement(n.Z,{cell:L()({},Y,{value:m[Y.controlId]}),from:4,viewId:T,projectId:u,isCharge:G,row:m,worksheetId:M,appId:se}):H.createElement("div",{className:"emptyTag"})))})),ae&&ae.previewUrl&&H.createElement("img",{className:"cover thumbnail",role:"presentation",onClick:this.handleCoverClick,src:ae.previewUrl.indexOf("imageView2")>-1?ae.previewUrl.replace(/imageView2\/\d\/w\/\d+\/h\/\d+(\/q\/\d+)?/,"imageView2/1/w/76/h/76/q/90"):ae.previewUrl+"&imageView2/1/w/76/h/76/q/90"}))}},{key:"cover",get:function(){var F=this.props,h=F.coverCid,z=F.data;if(!h)return null;var X=void 0;try{X=le(JSON.parse(z[h])||[])}catch(B){return null}return X}},{key:"cardControls",get:function(){var F=this.props,h=F.controls,z=F.showControls,X=[{controlId:"ownerid",controlName:_l("\u62E5\u6709\u8005"),type:26},{controlId:"caid",controlName:_l("\u521B\u5EFA\u4EBA"),type:26},{controlId:"ctime",controlName:_l("\u521B\u5EFA\u65F6\u95F4"),type:16},{controlId:"utime",controlName:_l("\u6700\u8FD1\u4FEE\u6539\u65F6\u95F4"),type:16}].concat(h);return z.map(function(B){return S().find(X,function(x){return x.controlId===B})}).filter(function(B){return B&&B.attribute!==1})}}]),K}(H.Component),b.propTypes={from:f().number,disabled:f().bool,selected:f().bool,coverCid:f().string,projectId:f().string,showControls:f().arrayOf(f().string),controls:f().arrayOf(f().shape({})),data:f().shape({}),onClick:f().func,onDelete:f().func},b.defaultProps={from:1,showControls:[]},k),ee(q.prototype,"handleCoverClick",[V.Nj],g()(q.prototype,"handleCoverClick"),q.prototype),q)},56557:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>O});var ce=t(12424),g=t(86735),p=t(67294),L=t(71893),te=t(29314),R=t(33126),y=t(15405);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(86674);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(82690);var o=t(96486),d=t.n(o),Z=(0,g.Z)([`
  background: #fff;
  width: 400px;
  padding: 20px 0;
  border-radius: 4px;
  background-color: #fff;
  box-shadow: 0px 6px 16px rgba(0, 0, 0, 0.16);
  .selectRecordConditions {
    .conditionItem {
      margin-bottom: 16px;
    }
    .label {
      text-align: left;
    }
    .buttons {
      width: 100%;
      display: flex;
      align-items: center;
      flex-direction: row-reverse;
      margin: 4px 10px 0 0 !important;
      .Button {
        height: 36px;
        margin: 0 0 0 15px !important;
      }
    }
  }
`],[`
  background: #fff;
  width: 400px;
  padding: 20px 0;
  border-radius: 4px;
  background-color: #fff;
  box-shadow: 0px 6px 16px rgba(0, 0, 0, 0.16);
  .selectRecordConditions {
    .conditionItem {
      margin-bottom: 16px;
    }
    .label {
      text-align: left;
    }
    .buttons {
      width: 100%;
      display: flex;
      align-items: center;
      flex-direction: row-reverse;
      margin: 4px 10px 0 0 !important;
      .Button {
        height: 36px;
        margin: 0 0 0 15px !important;
      }
    }
  }
`]),H=(0,g.Z)([`
  font-size: 18px;
  color: `,`;
  cursor: pointer;
  &:hover {
    color: #2196f3;
  }
`],[`
  font-size: 18px;
  color: `,`;
  cursor: pointer;
  &:hover {
    color: #2196f3;
  }
`]),U=(0,R.Z)(y.Z),f=L.ZP.div(Z),V=L.ZP.div(H,function(n){var s=n.active;return s?"#2196f3":"#9e9e9e"});function C(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return n.map(function(j){var A=d().find(s,{controlId:j.controlId});return A&&d().includes([6,8,31],A.type)&&(j.filterType=11),A&&d().includes([a.DN.TEXT,a.DN.TELEPHONE,a.DN.MOBILE_PHONE,a.DN.EMAIL,a.DN.CRED,a.DN.CONCATENATE,a.DN.AUTO_ID],A.type)&&(j.filterType=1),A&&d().includes([10],A.type)&&(j.advancedSetting.allowitem="2"),j})}function O(n){var s=n.projectId,j=n.appId,A=n.searchFilters,S=n.controls,I=n.quickFilters,c=n.onFilter,q=n.control,b=q===void 0?{}:q,k=(0,p.useState)(!1),ee=(0,ce.Z)(k,2),re=ee[0],ie=ee[1];return p.createElement(te.Z,{action:["click"],popupVisible:re,popup:p.createElement(U,{specialFilter:function(E){var w=$(E).closest([".dropdownTrigger",".addFilterPopup",".filterControlOptionsList",".mui-datetimepicker",".mui-datetimerangepicker",".selectUserBox",".CityPicker",".worksheetFilterOperateList",".ant-select-dropdown",".ant-picker-dropdown",".rc-trigger-popup","#dialogSelectDept_container"].join(","))[0];return w},onClickAwayExceptions:[".ant-cascader-menus",".ant-tree-select-dropdown"],onClickAway:function(){return ie(!1)}},p.createElement(f,{onClick:function(E){return E.stopPropagation()}},p.createElement(r.Z,{from:"selectRecordDialog",className:"selectRecordConditions",showQueryBtn:!0,colNum:1,controls:S,appId:b.appId||j,projectId:s,filters:C(A,S),queryText:_l("\u7B5B\u9009"),updateQuickFilter:function(E){c(E),ie(!1)},resetQuickFilter:function(){c([])}}))),getPopupContainer:function(){return document.body},popupClassName:"filterTrigger",zIndex:1e3,popupAlign:{points:["tr","br"],overflow:{adjustX:!0,adjustY:!0}}},p.createElement(V,{active:!!I.length,onClick:function(){return ie(!0)}},p.createElement("i",{className:"icon icon-worksheet_filter"})))}},7891:(lt,Te,t)=>{"use strict";t.r(Te),t.d(Te,{default:()=>de,selectRecord:()=>Ce});var ce=t(8177),g=t.n(ce),p=t(69288),L=t(42185),te=t(60967),R=t(85315),y=t(88106),a=t(63239),r=t.n(a),o=t(85105),d=t.n(o),Z=t(99663),H=t(22600),U=t(49135),f=t(93196),V=t(67294),C=t(73935),O=t(45697),n=t.n(O),s=t(44894),j=t(93967),A=t.n(j),S=t(45231),I=t(5505),c=t(25273),q=t(54208),b=t(12246),k=t(94550),ee=t(89499),re=t(1952),ie=t(26358),le=t(3540),E=t(88239),w=t(86735),K=t(71893),N=t(56557),F=t(96486),h=t.n(F),z=(0,w.Z)([`
  display: flex;
  height: 36px;
`],[`
  display: flex;
  height: 36px;
`]),X=(0,w.Z)([`
  font-size: 16px;
  font-weight: bold;
  color: #000;
  margin: 10px 0 11px;
`],[`
  font-size: 16px;
  font-weight: bold;
  color: #000;
  margin: 10px 0 11px;
`]),B=(0,w.Z)([`
  font-size: 20px;
  color: #9e9e9e;
  margin: 2px 0 0 8px;
`],[`
  font-size: 20px;
  color: #9e9e9e;
  margin: 2px 0 0 8px;
`]),x=(0,w.Z)([`
  background: #fff;
  border: 1px solid #e0e0e0;
  border-radius: 4px;
  flex: 1;
  display: flex;
  .Input {
    border: none !important;
    flex: 1;
    height: auto !important;
    padding-left: 5px !important;
  }
`],[`
  background: #fff;
  border: 1px solid #e0e0e0;
  border-radius: 4px;
  flex: 1;
  display: flex;
  .Input {
    border: none !important;
    flex: 1;
    height: auto !important;
    padding-left: 5px !important;
  }
`]),Q=(0,w.Z)([`
  background: #fff;
  border: 1px solid #e0e0e0;
  border-radius: 4px;
  width: 36px;
  height: 36px;
  line-height: 36px;
  margin-left: 10px;
  text-align: center;
`],[`
  background: #fff;
  border: 1px solid #e0e0e0;
  border-radius: 4px;
  width: 36px;
  height: 36px;
  line-height: 36px;
  margin-left: 10px;
  text-align: center;
`]),i=K.ZP.div(z),m=K.ZP.div(X),v=K.ZP.span(B),W=K.ZP.div(x),P=K.ZP.div(Q);function u(he){return he.map(function(fe){return(0,E.default)({},fe,{advancedSetting:{direction:"2",allowitem:"1"}})})}function l(he){var fe=he.entityName,Ee=he.projectId,Y=he.appId,oe=he.control,ve=oe===void 0?{}:oe,ue=he.controls,pe=he.quickFilters,Se=he.searchConfig,ye=he.onFilter,J=he.onSearch,me=he.onKeyDown,be=(0,V.createRef)(),xe=Se.searchFilters,Ae=Se.searchControl||h().find(ue,{attribute:1})||{};return(0,V.useEffect)(function(){be&&be.current&&be.current.focus()},[]),V.createElement(V.Fragment,null,V.createElement(m,null,_l("\u9009\u62E9%0",ve.controlName||fe||"")),V.createElement(i,null,V.createElement(W,null,V.createElement(v,null,V.createElement("i",{className:"icon icon-search"})),V.createElement(le.Z,{className:"recordListKeyword",placeholder:_l("\u641C\u7D22%0",Ae.controlName||""),manualRef:be,onChange:J,onKeyDown:me})),xe&&!!xe.length&&V.createElement(P,null,V.createElement(N.Z,{projectId:Ee,appId:Y,control:ve,controls:ue,quickFilters:pe,searchFilters:u(xe),onFilter:ye}))))}var T,G,D,M,se;function ae(he,fe,Ee,Y,oe){var ve={};return Object.keys(Y).forEach(function(ue){ve[ue]=Y[ue]}),ve.enumerable=!!ve.enumerable,ve.configurable=!!ve.configurable,("value"in ve||ve.initializer)&&(ve.writable=!0),ve=Ee.slice().reverse().reduce(function(ue,pe){return pe(he,fe,ue)||ue},ve),oe&&ve.initializer!==void 0&&(ve.value=ve.initializer?ve.initializer.call(oe):void 0,ve.initializer=void 0),ve.initializer===void 0&&(Object.defineProperty(he,fe,ve),ve=null),ve}function ne(he){try{var fe=he.advancedSetting||{},Ee=fe.searchcontrol,Y=fe.searchtype,oe=fe.clicksearch,ve=fe.searchfilters,ue=ve===void 0?"[]":ve,pe=void 0;return Ee&&(pe=h().find(he.relationControls,{controlId:Ee})),pe||(pe=h().find(he.relationControls,{attribute:1})),{searchControl:pe,searchType:Number(Y),clickSearch:oe==="1",searchFilters:safeParse(ue,"array")}}catch(Se){return console.error(Se),{}}}var de=(D=(se=M=function(he){(0,f.default)(fe,he);function fe(Ee){(0,Z.default)(this,fe);var Y=(0,U.default)(this,(fe.__proto__||d()(fe)).call(this,Ee));return Y.conRef=V.createRef(),Y.listRef=V.createRef(),Y.state={allowAdd:Ee.allowAdd||!1,loading:!0,list:[],controls:[],sortControls:[],selectedRecords:[],worksheet:{},pageIndex:1,loadouted:!1,showNewRecord:!1,selectAll:!1,focusIndex:-1},Y.handleSearch=h().debounce(Y.handleSearch,500),Y}return(0,H.default)(fe,[{key:"componentDidMount",value:function(){var Y=this,oe=this.props,ve=oe.control,ue=oe.parentWorksheetId;ve?(window.isPublicWorksheet&&!h().get(window,"shareState.isPublicWorkflowRecord")?I.Z:S.Z).getWorksheetInfo({worksheetId:ve.dataSource,getTemplate:!0,relationWorksheetId:ue}).then(function(pe){window.worksheetControlsCache={},pe.template.controls.forEach(function(Se){Se.type===29&&(window.worksheetControlsCache[Se.dataSource]=Se.relationControls)}),Y.setState({allowAdd:h().get(window,"shareState.isPublicFormPreview")?!1:pe.allowAdd,worksheetInfo:pe},Y.loadRecord)}):this.loadRecord()}},{key:"handleInputKeyDown",value:function(Y){var oe=this.props,ve=oe.singleConfirm,ue=oe.multiple,pe=oe.onOk,Se=oe.onClose,ye=this.state,J=ye.focusIndex,me=ye.list,be=ye.selectedRecords;if(Y.stopPropagation(),(Y.metaKey||Y.ctrlKey)&&Y.key==="Enter"){pe(be),Se();return}if(Y.key==="ArrowUp")this.updateFocusIndex(!1),Y.preventDefault();else if(Y.key==="ArrowDown")this.updateFocusIndex(!0),Y.preventDefault();else if(Y.key==="Enter"&&me[J])if(ue||ve){var xe=h().find(be,function(Ae){return Ae.rowid===me[J].rowid});this.setState({selectedRecords:xe?be.filter(function(Ae){return Ae.rowid!==xe.rowid}):be.concat(me[J])})}else pe([me[J]]),Se()}},{key:"updateFocusIndex",value:function(Y){var oe=this,ve=this.state,ue=ve.focusIndex,pe=ue===void 0?0:ue,Se=ve.list;if(Se.length){var ye=pe+(Y?1:-1);ye<0&&(ye=0),ye>Se.length-1&&(ye=Se.length-1),this.setState({focusIndex:ye},function(){var J=oe.listRef.current.nanoScroller;if(J){J=J.querySelector(".nano-content");var me=J.querySelector(".worksheetRecordCard:nth-child("+(ye+1)+")");Y&&me.offsetTop+me.offsetHeight>J.scrollTop+J.clientHeight?J.scrollTop=J.scrollTop+me.offsetHeight+12:me.offsetTop<J.scrollTop&&(J.scrollTop=J.scrollTop-me.offsetHeight-12)}})}}},{key:"loadRecord",value:function(){var Y=this,oe=this.props,ve=oe.from,ue=oe.viewId,pe=oe.relateSheetId,Se=oe.filterRowIds,ye=oe.ignoreRowIds,J=oe.parentWorksheetId,me=oe.recordId,be=oe.controlId,xe=oe.control,Ae=oe.formData,Ne=oe.pageSize,Me=this.state,Fe=Me.pageIndex,Be=Me.keyWords,we=Me.list,Ie=Me.sortControls,ge=Me.quickFilters,Re=ge===void 0?[]:ge,Pe=Me.filterForControlSearch,ke=Me.worksheetInfo,We=xe?ne(xe):{},Ve=We.searchControl,it=void 0,Ge=void 0,pt=void 0;if(xe&&xe.advancedSetting.filters&&(ke&&(xe.relationControls=ke.template.controls),pt=(0,ie.zK)({control:xe,formData:Ae})),pt===!1){this.setState({error:"notCorrectCondition",loading:!1});return}this.searchAjax&&h().isFunction(this.searchAjax.abort)&&this.searchAjax.abort(),Ge={worksheetId:pe,viewId:ue,searchType:1,pageSize:Ne,pageIndex:Fe,status:1,keyWords:h().trim(Be),isGetWorksheet:!0,getType:7,sortControls:Ie,filterControls:pt||[],fastFilters:Re.map(function(ot){return h().pick(ot,["controlId","dataType","spliceType","filterType","dateRange","value","values","minValue","maxValue"])})},Pe&&(Ge.filterControls=Ge.filterControls.concat(Pe)),window.isPublicWorksheet?(it=I.Z.getRelationRows,Ge.shareId=window.publicWorksheetShareId):it=S.Z.getFilterRows,J&&be&&h().get(J,"length")===24&&(Ge.relationWorksheetId=J,Ge.rowId=me,Ge.controlId=be,ye&&(Ge.requestParams={_system_excluderowids:r()(ye)})),this.searchAjax=it(Ge),this.searchAjax.then(function(ot){if(ot.resultCode===1){var vt=h().uniqBy(we.concat(ot.data.filter(function(yt){return!h().find(Se,function(st){return yt.rowid===st})})),"rowid"),At=Be&&Fe===1&&h().get(xe,"advancedSetting.searchcontrol")&&Ve;At&&h().get(xe,"advancedSetting.searchtype")!=="1"&&(vt=vt.sort(function(yt,st){return st[Ve.controlId]===Be?1:-1})),Y.setState({focusIndex:At&&vt[0]&&vt[0][Ve.controlId]===Be?0:-1,list:vt,loading:!1,loadouted:ot.data.length<Ne,controls:ot.template?ot.template.controls:[],worksheet:ot.worksheet||{}},function(){!Y.state.loadouted&&vt.length<8&&Y.loadNext()})}else Y.setState({loading:!1,error:!0})})}},{key:"loadNext",value:function(){this.setState({pageIndex:this.state.pageIndex+1,loading:!0,selectAll:!1},this.loadRecord)}},{key:"handleSearch",value:function(Y){this.setState({keyWords:Y,pageIndex:1,loading:!0,list:[]},this.loadRecord)}},{key:"handleFilter",value:function(Y){this.setState({quickFilters:Y,pageIndex:1,loading:!0,list:[]},this.loadRecord)}},{key:"handleSelect",value:function(Y,oe){var ve=this.props,ue=ve.maxCount,pe=ve.selectedCount,Se=ve.multiple,ye=ve.onOk,J=ve.onClose,me=ve.singleConfirm,be=this.state.selectedRecords;if(Se){if(oe&&pe+be.length+1>ue){alert(_l("\u6700\u591A\u5173\u8054%0\u6761",ue),3);return}this.setState({selectedRecords:oe?be.concat(Y):be.filter(function(xe){return xe.rowid!==Y.rowid})})}else me?this.setState({selectedRecords:[Y]}):(ye([Y]),J())}},{key:"handleConfirm",value:function(){var Y=this.props,oe=Y.onOk,ve=Y.onClose,ue=this.state.selectedRecords;oe(ue),ve()}},{key:"handleSort",value:function(Y,oe){var ve=void 0;h().isUndefined(oe)?ve=!0:oe===!1?ve=void 0:ve=!1,this.setState({sortControls:h().isUndefined(ve)?[]:[{controlId:Y.controlId,datatype:Y.sourceControlType||Y.type,isAsc:ve}],pageIndex:1,loading:!0,list:[]},this.loadRecord)}},{key:"canSort",value:function(Y){var oe=Y.sourceControlType||Y.type;return(0,ee.ir)(oe)}},{key:"getControlSortStatus",value:function(Y){var oe=this.state.sortControls,ve=h().find(oe,function(ue){return ue.controlId===Y.controlId});return ve&&ve.isAsc}},{key:"render",value:function(){var Y=this,oe=this.props,ve=oe.canSelectAll,ue=oe.maxCount,pe=oe.selectedCount,Se=oe.viewId,ye=oe.relateSheetId,J=oe.control,me=oe.filterRelatesheetControlIds,be=oe.visible,xe=oe.multiple,Ae=oe.allowNewRecord,Ne=oe.defaultRelatedSheet,Me=oe.onOk,Fe=oe.onClose,Be=oe.singleConfirm,we=oe.onText,Ie=oe.masterRecordRowId,ge=oe.isCharge,Re=this.state,Pe=Re.loading,ke=Re.selectAll,We=Re.loadouted,Ve=Re.error,it=Re.list,Ge=Re.controls,pt=Re.selectedRecords,ot=Re.keyWords,vt=Re.worksheet,At=Re.showNewRecord,yt=Re.allowAdd,st=Re.quickFilters,St=st===void 0?[]:st,Qe=Re.focusIndex,Xe=Re.filterForControlSearch,$e=this.cardControls,Ke=J?ne(J):{},Ue=Ke.clickSearch,He=Ke.searchControl,ze=!J||!(Ue&&!ot),gt=this.props.coverCid||J&&J.coverCid;return V.createElement(p.Z,{className:"recordCardListDialog",overlayClosable:!1,anim:!1,visible:be,width:window.innerWidth-20>960?960:window.innerWidth-20,footer:null,onCancel:Fe},V.createElement("div",{className:"recordCardListCon flexColumn",style:{height:window.innerHeight>1e3?862:window.innerHeight-138},ref:this.conRef,onClick:function(){Y.conRef.current&&Y.conRef.current.querySelector(".recordListKeyword")&&Y.conRef.current.querySelector(".recordListKeyword").focus()}},!Ve&&V.createElement(l,{entityName:vt.entityName,projectId:vt.projectId,appId:vt.appId,control:J,searchConfig:Ke,controls:Ge,quickFilters:St,onSearch:this.handleSearch,onFilter:this.handleFilter,onKeyDown:this.handleInputKeyDown}),ze?V.createElement(V.Fragment,null,V.createElement("div",{className:"recordCardListHeader flexRow",style:{padding:gt?"6px 94px 6px 6px":"6px"}},$e.slice(0,7).map(function(Et,ft){var qe=Y.canSort(Et),nt=Y.getControlSortStatus(Et);return V.createElement("div",{className:A()("controlName flex Hand",{title:Et.attribute}),key:ft,onClick:function(){Y.handleSort(Et,nt)}},Et.attribute===1?V.createElement("i",{className:"icon icon-ic_title"}):V.createElement("span",{className:"ellipsis Bold Font12 Gray_75 controlNameValue"},Et.controlName),qe&&V.createElement("span",{className:"orderStatus"},V.createElement("span",{className:"flexColumn"},V.createElement("i",{className:A()("icon icon-arrow-up",{ThemeColor3:nt===!0})}),V.createElement("i",{className:A()("icon icon-arrow-down",{ThemeColor3:nt===!1})}))))})),V.createElement(c.Z,{className:"recordCardList flex",ref:this.listRef,onScrollEnd:function(){!Pe&&!We&&Y.loadNext()}},it.length?it.map(function(Et,ft){var qe=!!h().find(pt,function(Ze){return Ze.rowid===Et.rowid}),nt=Qe===ft;return V.createElement(k.Z,{key:ft,from:2,coverCid:gt,isCharge:ge,projectId:vt.projectId,worksheetId:ye,showControls:$e.map(function(Ze){return Ze.controlId}),controls:Ge,data:Et,selected:qe,focused:nt,onClick:function(){Y.setState({focusIndex:ft}),Y.handleSelect(Et,!qe)}})}):!Pe&&V.createElement("div",{className:"empty"},V.createElement("div",{className:"emptyIcon"},V.createElement("i",{className:"icon Icon icon-ic-line Font56"}),Ve?V.createElement("p",{className:"emptyTip"},Ve==="notCorrectCondition"?_l("\u4E0D\u5B58\u5728\u7B26\u5408\u6761\u4EF6\u7684%0",vt.entityName||J.sourceEntityName||""):_l("\u6CA1\u6709\u6743\u9650")):V.createElement("p",{className:"emptyTip"},ot?_l("\u65E0\u5339\u914D\u7684\u7ED3\u679C"):vt.entityName?_l("\u6682\u65E0%0",vt.entityName):_l("\u6682\u65E0\u8BB0\u5F55")))),Pe&&V.createElement(q.Z,null))):V.createElement("div",{className:"flex clickSearchTip"},_l("\u8F93\u5165%0\u8FDB\u884C\u67E5\u8BE2",He.controlName)),(!Ve||Ve==="notCorrectCondition")&&(xe||Ae)&&V.createElement("div",{className:"recordCardListFooter"},Ae&&yt&&V.createElement("span",{className:"addRecord Hand InlineBlock ThemeBGColor3 ThemeHoverBGColor2",onClick:function(){if(pe+pt.length>=ue){alert(_l("\u6700\u591A\u5173\u8054%0\u6761",ue),3);return}Y.setState({showNewRecord:!0})}},V.createElement("i",{className:"icon icon-plus mRight3"}),V.createElement("span",{className:"bold"},_l("\u65B0\u5EFA%0",vt.entityName||""))),At&&V.createElement(b.default,{className:"worksheetRelateNewRecord worksheetRelateNewRecordFromSelectRelateRecord",viewId:Se,worksheetId:ye,projectId:vt.projectId,masterRecordRowId:Ie,addType:2,entityName:vt.entityName,filterRelateSheetIds:[ye],filterRelatesheetControlIds:me,defaultFormDataEditable:!0,defaultFormData:He&&(0,ee.s6)(He.type)&&ot?(0,y.default)({},He.controlId,ot):{},defaultRelatedSheet:Ne,visible:At,hideNewRecord:function(){Y.setState({showNewRecord:!1})},onAdd:function(ft){xe||Be?Y.setState({list:[ft].concat((0,R.Z)(it))},function(){Y.handleSelect(ft,!0)}):(Me([ft]),Fe())}}),ze&&ve&&V.createElement(te.Z,{className:"InlineBlock mTop8",text:_l("\u5168\u9009\uFF08\u5DF2\u9009\u62E9%0/%1\u6761\uFF09",pt.length,it.length),checked:ke,onClick:function(){Y.setState({selectAll:!ke,selectedRecords:ke?[]:it.slice(0,1e3)}),!ke&&(it.length>1e3?alert(_l("\u6700\u591A\u9009\u62E91000\u6761\u8BB0\u5F55"),3):alert(We?_l("\u5168\u9009\u6240\u6709%0\u884C\u8BB0\u5F55",it.length):_l("\u5168\u9009\u5DF2\u52A0\u8F7D\u7684%0\u884C\u8BB0\u5F55\uFF0C\u6EDA\u52A8\u52A0\u8F7D\u66F4\u591A\u8BB0\u5F55",it.length)))}}),(xe||Be)&&V.createElement("span",{className:"Right"},V.createElement(L.ZP,{type:"link",onClick:Fe},_l("\u53D6\u6D88")),V.createElement(L.ZP,{type:"primary",className:"mLeft10",disabled:!pt.length,onClick:this.handleConfirm},xe&&!ve&&pt.length?_l("\u786E\u5B9A(%0)",pt.length):we||_l("\u786E\u5B9A"))))))}},{key:"cardControls",get:function(){var Y=this.props.control,oe=Y===void 0?{}:Y,ve=oe.showControls||this.props.showControls,ue=this.state.controls,pe=h().find(ue,function(J){return J.attribute===1}),Se=[{controlId:"ownerid",controlName:_l("\u62E5\u6709\u8005"),type:26},{controlId:"caid",controlName:_l("\u521B\u5EFA\u4EBA"),type:26},{controlId:"ctime",controlName:_l("\u521B\u5EFA\u65F6\u95F4"),type:16},{controlId:"utime",controlName:_l("\u6700\u8FD1\u4FEE\u6539\u65F6\u95F4"),type:16}].concat(ue),ye=new Array(ve.length);return Se.forEach(function(J){var me=ve.indexOf(J.controlId);me>-1&&J.attribute!==1&&(ye[me]=J)}),pe&&(ye=[pe].concat(ye)),ye.filter(function(J){return!!J})}}]),fe}(V.Component),M.propTypes={from:n().number,maxCount:n().number,selectedCount:n().number,viewId:n().string,relateSheetId:n().string,parentWorksheetId:n().string,recordId:n().string,controlId:n().string,allowAdd:n().bool,allowNewRecord:n().bool,coverCid:n().string,showControls:n().arrayOf(n().string),filterRowIds:n().arrayOf(n().string),ignoreRowIds:n().arrayOf(n().string),filterRelatesheetControlIds:n().arrayOf(n().string),defaultRelatedSheet:n().shape({}),singleConfirm:n().bool,multiple:n().bool,visible:n().bool,control:n().shape({}),onClose:n().func,onOk:n().func,onText:n().string,formData:n().arrayOf(n().shape({})),pageSize:n().number},M.defaultProps={allowNewRecord:!0,filterRowIds:[],showControls:[],filterRelatesheetControlIds:[],onClose:function(){},onOk:function(){},formData:[],singleConfirm:!1,pageSize:50},se),ae(D.prototype,"handleInputKeyDown",[s.Nj],g()(D.prototype,"handleInputKeyDown"),D.prototype),ae(D.prototype,"handleSearch",[s.Nj],g()(D.prototype,"handleSearch"),D.prototype),ae(D.prototype,"handleFilter",[s.Nj],g()(D.prototype,"handleFilter"),D.prototype),ae(D.prototype,"handleSelect",[s.Nj],g()(D.prototype,"handleSelect"),D.prototype),ae(D.prototype,"handleConfirm",[s.Nj],g()(D.prototype,"handleConfirm"),D.prototype),ae(D.prototype,"handleSort",[s.Nj],g()(D.prototype,"handleSort"),D.prototype),D);function Ce(he){(0,re.Z)(de,he)}},99732:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>de,K:()=>Ce});var ce=t(8177),g=t.n(ce),p=t(20148),L=t(60385),te=t.n(L),R=t(63627),y=t(81982),a=t.n(y),r=t(25273),o=t(54208),d=t(80426),Z=t(59012),H=t.n(Z),U=t(88106),f=t(85315),V=t(88239),C=t(33867),O=t(63239),n=t.n(O),s=t(85105),j=t.n(s),A=t(99663),S=t(22600),I=t(49135),c=t(93196),q=t(67294),b=t(73935),k=t(45697),ee=t.n(k),re=t(44894),ie=t(93967),le=t.n(ie),E=t(45231),w=t(5505),K=t(69945),N=t(86995),F=t(94550),h=t(89499),z=t(26358),X=t(6917),B=t(91877),x=t(66344),Q=t(48860),i=t(81233),m=t.n(i),v=t(44867),W=t(86674);function P(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return he.map(function(Ee){var Y=_.find(fe,{controlId:Ee.controlId});return Ee.control=Y,Ee.dataType=_.get(Y,"type"),Y&&_.includes([6,8],Y.type)&&(Ee.filterType=11),Y&&_.includes([W.DN.TEXT,W.DN.TELEPHONE,W.DN.MOBILE_PHONE,W.DN.EMAIL,W.DN.CRED,W.DN.CONCATENATE,W.DN.AUTO_ID],Y.type)&&(Ee.filterType=1),Y&&_.includes([10],Y.type)&&(Ee.advancedSetting.allowitem="2"),Ee})}function u(he){var fe=he.controls,Ee=fe===void 0?[]:fe,Y=he.worksheetInfo,oe=Y===void 0?{}:Y,ve=he.searchFilters,ue=he.filtersVisible,pe=he.onChangeFiltersVisible,Se=he.onChangeQuickFilter;return q.createElement(m(),{className:le()("quickFilterStepListWrapper",{open:ue}),position:"right",sidebar:!!Ee.length&&q.createElement(v.O,{filterText:!1,projectId:oe.projectId,appId:oe.appId,worksheetId:oe.worksheetId,view:{advancedSetting:{enablebtn:"1"}},filters:P(ve.map(function(ye){return(0,V.default)({},ye,{advancedSetting:{direction:"2",allowitem:"1"}})}),Ee),controls:Ee,onHideSidebar:function(){return pe(!1)},updateQuickFilter:Se}),open:ue,onOpenChange:function(){return pe(!ue)}},q.createElement(q.Fragment,null))}var l=t(96486),T=t.n(l),G,D,M,se,ae;function ne(he,fe,Ee,Y,oe){var ve={};return Object.keys(Y).forEach(function(ue){ve[ue]=Y[ue]}),ve.enumerable=!!ve.enumerable,ve.configurable=!!ve.configurable,("value"in ve||ve.initializer)&&(ve.writable=!0),ve=Ee.slice().reverse().reduce(function(ue,pe){return pe(he,fe,ue)||ue},ve),oe&&ve.initializer!==void 0&&(ve.value=ve.initializer?ve.initializer.call(oe):void 0,ve.initializer=void 0),ve.initializer===void 0&&(Object.defineProperty(he,fe,ve),ve=null),ve}var de=(M=(ae=se=function(he){(0,c.default)(fe,he);function fe(Ee){(0,A.default)(this,fe);var Y=(0,I.default)(this,(fe.__proto__||j()(fe)).call(this,Ee)),oe=T().get(Ee.control,"advancedSetting.clicksearch")==="1";return Y.state={loading:!oe,list:[],controls:[],sortControls:[],selectedRecords:[],worksheet:{},pageIndex:1,loadouted:!1,showNewRecord:!1,keyWords:Ee.keyWords,filtersVisible:!1,quickFilters:[]},Y.clickSearch=oe,Y.lazyLoadRecorcd=T().debounce(Y.loadRecorcd,500),Y}return(0,S.default)(fe,[{key:"componentDidMount",value:function(){var Y=this,oe=this.props,ve=oe.control,ue=oe.keyWords,pe=oe.parentWorksheetId,Se=oe.staticRecords,ye=Se===void 0?[]:Se;if(!T().isEmpty(ye)){this.setState({list:ye,loading:!1});return}ve?(window.isPublicWorksheet&&!T().get(window,"shareState.isPublicWorkflowRecord")?w.Z:E.Z).getWorksheetInfo({worksheetId:ve.dataSource,getTemplate:!0,relationWorksheetId:pe}).then(function(J){window.worksheetControlsCache={},J.template.controls.forEach(function(me){me.type===29&&(window.worksheetControlsCache[me.dataSource]=me.relationControls)}),Y.setState({allowAdd:J.allowAdd,worksheetInfo:J},function(){(!Y.clickSearch||ue)&&Y.handleSearch(ue,ve.advancedSetting.scancontrolid==="rowid")})}):(!this.clickSearch||ue)&&this.loadRecorcd()}},{key:"componentWillReceiveProps",value:function(Y){this.props.keyWords!==Y.keyWords&&this.setState({keyWords:Y.keyWords})}},{key:"abortSearch",value:function(){this.searchAjax&&T().isFunction(this.searchAjax.abort)&&this.searchAjax.abort()}},{key:"loadRecorcd",value:function(){var Y=this,oe=this.props,ve=oe.from,ue=oe.appId,pe=oe.viewId,Se=oe.relateSheetId,ye=oe.filterRowIds,J=oe.ignoreRowIds,me=oe.parentWorksheetId,be=oe.recordId,xe=oe.controlId,Ae=oe.multiple,Ne=oe.control,Me=oe.formData,Fe=oe.getDataType,Be=oe.relationRowIds,we=Be===void 0?[]:Be,Ie=oe.isScan,ge=this.state,Re=ge.pageIndex,Pe=ge.keyWords,ke=ge.list,We=ge.sortControls,Ve=ge.worksheetInfo,it=ge.isScanSearch,Ge=void 0,pt=void 0,ot=void 0;if(Ne&&Ne.advancedSetting.filters&&(Ve&&(Ne.relationControls=Ve.template.controls),ot=(0,z.zK)({control:Ne,formData:Me})),ot===!1){this.setState({loading:!1});return}var vt=T().get(Ne,"advancedSetting")||{},At=vt.scanlink,yt=vt.scancontrol,st=vt.scancontrolid;if(Ie&&(At!=="1"&&x.Z.isURL(Pe)||yt!=="1"&&!x.Z.isURL(Pe))){this.setState({loading:!1});return}var St=T().find(T().get(Ve,"template.controls")||[],function(Xe){return Xe.controlId===st});if(ve!==X.BD.PUBLIC_ADD&&!window.isPublicWorksheet){Ge=E.Z.getFilterRows;var Qe=this.state.quickFilters.map(function(Xe){return T().pick(Xe,["controlId","dataType","spliceType","filterType","dateRange","value","values","minValue","maxValue"])});pt={worksheetId:Se,appId:ue,viewId:pe,searchType:1,pageSize:20,pageIndex:Re,status:1,keyWords:it&&yt==="1"&&st?"":Pe,isGetWorksheet:!0,getType:7,sortControls:We,filterControls:ot,fastFilters:it&&yt==="1"&&st?[{controlId:st,dataType:St.type,spliceType:1,filterType:1,dateRange:0,minValue:"",maxValue:"",value:"",values:[Pe]}].concat(Qe):Qe}}else Ge=w.Z.getRelationRows,pt={worksheetId:Se,appId:ue,viewId:pe,searchType:1,pageSize:20,pageIndex:Re,status:1,keyWords:Pe,isGetWorksheet:!0,getType:7,sortControls:We,filterControls:ot};me&&xe&&(pt.relationWorksheetId=me,pt.rowId=be,pt.controlId=xe,J&&(pt.requestParams={_system_excluderowids:n()(J)})),this.setState({loading:!0}),this.abortSearch(),this.searchAjax=Ge(pt),this.searchAjax.then(function(Xe){Xe.resultCode===1?Y.setState({list:Fe?ke.concat(Xe.data.filter(function($e){return!T().includes(we,$e.rowid)})):ke.concat(Xe.data.filter(function($e){return!T().find(ye,function(Ke){return $e.rowid===Ke})})),loading:!1,loadouted:Xe.data.length<20,controls:Xe.template?Xe.template.controls:[],worksheet:Xe.worksheet||{}},function(){Y.props.keyWords&&Xe.data.length===1&&Y.setState({selectedRecords:[Xe.data[0]]})}):Y.setState({loading:!1,error:!0})}).catch(function(){alert(_l("\u83B7\u53D6\u5217\u8868\u5931\u8D25"),3)})}},{key:"loadNext",value:function(){this.setState({pageIndex:this.state.pageIndex+1,loading:!0},this.loadRecorcd)}},{key:"handleSearch",value:function(Y,oe){var ve=this;this.setState({keyWords:Y,pageIndex:1,loading:!0,list:[],isScanSearch:oe},function(){if(!Y&&ve.clickSearch){ve.setState({loading:!1});return}ve.lazyLoadRecorcd()})}},{key:"handleFilter",value:function(Y){this.setState({quickFilters:Y,pageIndex:1,loading:!0,list:[]},this.loadRecorcd)}},{key:"handleSelect",value:function(Y,oe){var ve=this.props,ue=ve.multiple,pe=ve.onOk,Se=ve.onClose,ye=ve.maxCount,J=ve.selectedCount,me=this.state.selectedRecords;if(ue){if(J+me.length>=ye)return alert(_l("\u6700\u591A\u5173\u8054%0\u6761",ye),3);this.setState({selectedRecords:oe?T().uniqBy(me.concat(Y)):me.filter(function(be){return be.rowid!==Y.rowid})})}else pe([Y]),Se()}},{key:"handleConfirm",value:function(){var Y=this.props,oe=Y.onOk,ve=Y.onClose,ue=this.state,pe=ue.selectedRecords,Se=ue.list;oe(pe),ve()}},{key:"handleSort",value:function(Y,oe){var ve=void 0;T().isUndefined(oe)?ve=!0:oe===!1?ve=void 0:ve=!1,this.setState({sortControls:T().isUndefined(ve)?[]:[{controlId:Y.controlId,datatype:Y.sourceControlType||Y.type,isAsc:ve}],pageIndex:1,loading:!0,list:[]},this.loadRecorcd)}},{key:"canSort",value:function(Y){var oe=Y.sourceControlType||Y.type;return(0,h.ir)(oe)}},{key:"getControlSortStatus",value:function(Y){var oe=this.state.sortControls,ve=T().find(oe,function(ue){return ue.controlId===Y.controlId});return ve&&ve.isAsc}},{key:"renderSearchWrapper",value:function(){var Y=this,oe=(0,B.g)(),ve=this.props,ue=ve.relateSheetId,pe=ve.onOk,Se=ve.onClose,ye=ve.control,J=ve.formData,me=ve.parentWorksheetId,be=this.state,xe=be.keyWords,Ae=be.worksheet,Ne=be.worksheetInfo,Me=be.filtersVisible,Fe=be.quickFilters,Be=(0,z.zK)({control:ye,formData:J}),we=T().get(ye,"advancedSetting")||{},Ie=we.searchfilters,ge=Ie===void 0?"[]":Ie,Re=safeParse(ge,"array"),Pe=T().get(Ne,"template.controls");return q.createElement("div",{className:"flexRow alignItemsCenter justifyContentCenter mTop10 pLeft10 pRight10"},q.createElement("div",{className:"searchWrapper flex"},q.createElement(C.Z,{icon:"h5_search"}),q.createElement("input",{type:"text",placeholder:_l("\u641C\u7D22%0",this.title),value:xe,onChange:function(We){Y.handleSearch(We.target.value)}}),xe?q.createElement(C.Z,{icon:"workflow_cancel",onClick:function(){Y.handleSearch("")}}):oe&&q.createElement(N.Z,{projectId:Ae.projectId,worksheetId:ue,filterControls:Be,parentWorksheetId:me,control:ye,onChange:function(We){pe([We]),Se()},onOpenRecordCardListDialog:function(We){var Ve=T().get(ye,"advancedSetting")||{},it=Ve.scanlink,Ge=Ve.scancontrol;setTimeout(function(){if(it!=="1"&&x.Z.isURL(We)||Ge!=="1"&&!x.Z.isURL(We)){Y.setState({pageIndex:1,list:[]});return}Y.handleSearch(We,!0)},200)}},q.createElement(C.Z,{className:"Font20",icon:"qr_code_19"}))),Re&&!!Re.length&&q.createElement(q.Fragment,null,q.createElement("div",{className:"filterWrapper flexRow alignItemsCenter justifyContentCenter mLeft10",onClick:function(){return Y.setState({filtersVisible:!0})}},q.createElement(C.Z,{className:le()({ThemeColor:Fe.length}),icon:"worksheet_filter"})),q.createElement(u,{filtersVisible:Me,worksheetInfo:Ne,searchFilters:Re,controls:Pe,quickFilters:Fe,onChangeFiltersVisible:function(We){Y.setState({filtersVisible:We})},onChangeQuickFilter:this.handleFilter})))}},{key:"renderContent",value:function(){var Y,oe=this,ve=this.props,ue=ve.appId,pe=ve.viewId,Se=ve.relateSheetId,ye=ve.filterRelatesheetControlIds,J=ve.recordId,me=ve.parentWorksheetId,be=ve.controlId,xe=ve.visible,Ae=ve.multiple,Ne=ve.allowNewRecord,Me=ve.disabledManualWrite,Fe=ve.showControls,Be=ve.onOk,we=ve.onClose,Ie=ve.control,ge=ve.staticRecords,Re=ge===void 0?[]:ge,Pe=this.state,ke=Pe.loading,We=Pe.loadouted,Ve=Pe.error,it=Pe.list,Ge=Pe.controls,pt=Pe.selectedRecords,ot=Pe.keyWords,vt=Pe.worksheet,At=Pe.worksheetInfo,yt=Pe.showNewRecord,st=At||{},St=st.advancedSetting,Qe=St===void 0?{}:St,Xe=this.cardControls,$e=this.props.formData.filter(T().identity),Ke=$e.filter(function(gt){return gt&&gt.attribute===1}),Ue=Ke&&{name:Ke.value,sid:J,type:8,sourcevalue:n()((0,V.default)({},T().assign.apply(T(),(0,f.Z)($e.map(function(gt){return(0,U.default)({},gt.controlId,gt.value)}))),(Y={},(0,U.default)(Y,Ke.controlId,Ke.value),(0,U.default)(Y,"rowid",J),Y)))},He=this.props.coverCid||Ie&&Ie.coverCid,ze=vt.entityName||T().get(At,"entityName")||_l("\u8BB0\u5F55");return q.createElement(r.Z,{className:"recordCardList mTop10 flex",onScrollEnd:function(){!ke&&!We&&oe.loadNext()}},Ne&&!Me?q.createElement(H(),{size:"md"},q.createElement("div",{className:"worksheetRecordCard allowNewRecordBtn valignWrapper flexRow",onClick:function(){oe.setState({showNewRecord:!0})}},q.createElement(C.Z,{icon:"add",className:"Font24"}),q.createElement("span",{className:"bold"},_l("\u65B0\u5EFA%0",ze)))):null,q.createElement(K.Z,{hideFillNext:!0,appId:ue,viewId:pe,worksheetId:Se,projectId:vt.projectId,addType:2,entityName:vt.entityName,filterRelateSheetIds:[Se],filterRelatesheetControlIds:ye,defaultRelatedSheet:{worksheetId:me,relateSheetControlId:be,value:Ue},visible:yt,showDraftsEntry:!0,sheetSwitchPermit:Ie&&Ie.sheetSwitchPermit,hideNewRecord:function(){oe.setState({showNewRecord:!1})},onAdd:function(Et){Ae?oe.setState({list:[Et].concat((0,f.Z)(it))},function(){oe.handleSelect(Et,!0)}):(Be([Et]),we())}}),it.length?it.map(function(gt,Et){if(!T().isEmpty(Re))return q.createElement("div",{className:"worksheetRecordCard mobile noControls withoutCover",onClick:function(){return oe.handleSelect(gt,!ft)}},q.createElement("p",{className:"titleText ellipsis"},gt.name));var ft=!!T().find(pt,function(qe){return qe.rowid===gt.rowid});return q.createElement(H(),{key:Et,size:"md"},q.createElement(F.Z,{from:3,coverCid:He,showControls:Xe.map(function(qe){return qe.controlId}),controls:Ge,data:gt,selected:ft,onClick:function(){return oe.handleSelect(gt,!ft)}}))}):!ke&&q.createElement("div",{className:"empty valignWrapper flexRow"},q.createElement("div",{className:"emptyIcon flexColumn valignWrapper"},q.createElement("i",{className:"icon Icon icon-ic-line Font56"}),Ve?q.createElement("p",{className:"emptyTip Gray_9e"},_l("\u6CA1\u6709\u6743\u9650")):q.createElement("p",{className:"emptyTip Gray_9e"},ot?_l("\u65E0\u5339\u914D\u7684\u7ED3\u679C"):this.clickSearch?_l("\u8F93\u5165%0\u540E\uFF0C\u663E\u793A\u53EF\u9009\u62E9\u7684\u8BB0\u5F55",this.title):_l("\u6682\u65E0%0",ze)))),ke&&q.createElement(o.Z,null))}},{key:"render",value:function(){var Y=this.props,oe=Y.visible,ve=Y.onClose,ue=Y.multiple,pe=Y.disabledManualWrite,Se=this.state,ye=Se.value,J=Se.worksheet,me=Se.selectedRecords;return q.createElement(te(),{popup:!0,visible:oe,onClose:ve,animationType:"slide-up",className:"h100"},q.createElement("div",{className:"flexColumn leftAlign mobileRecordCardListDialog h100"},!pe&&this.renderSearchWrapper(),this.renderContent(),q.createElement("div",{className:"btnsWrapper valignWrapper flexRow"},q.createElement(H(),{className:"flex",size:"sm"},q.createElement(a(),{className:"Gray_75 bold",onClick:ve},_l("\u53D6\u6D88"))),ue&&q.createElement(H(),{className:"flex",size:"sm"},q.createElement(a(),{className:"bold",type:"primary",disabled:!me.length,onClick:this.handleConfirm},ue&&me.length?_l("\u786E\u5B9A(%0)",me.length):_l("\u786E\u5B9A"))))))}},{key:"cardControls",get:function(){var Y=this.props.control,oe=Y===void 0?{}:Y,ve=oe.showControls||this.props.showControls,ue=this.state.controls,pe=T().find(ue,function(J){return J.attribute===1}),Se=[{controlId:"ownerid",controlName:_l("\u62E5\u6709\u8005"),type:26},{controlId:"caid",controlName:_l("\u521B\u5EFA\u4EBA"),type:26},{controlId:"ctime",controlName:_l("\u521B\u5EFA\u65F6\u95F4"),type:16},{controlId:"utime",controlName:_l("\u6700\u8FD1\u4FEE\u6539\u65F6\u95F4"),type:16}].concat(ue),ye=new Array(ve.length);return Se.forEach(function(J){var me=ve.indexOf(J.controlId);me>-1&&J.attribute!==1&&(ye[me]=J)}),pe&&(ye=[pe].concat(ye)),ye.filter(function(J){return!!J})}},{key:"title",get:function(){var Y=this.props.control,oe=Y===void 0?{}:Y,ve=this.state,ue=ve.worksheet,pe=ve.worksheetInfo,Se=ue.entityName||T().get(pe,"entityName")||_l("\u8BB0\u5F55"),ye=oe.advancedSetting||{},J=ye.searchcontrol;if(J){var me=T().find(oe.relationControls,{controlId:J})||{};return me.controlName||Se}else return Se}}]),fe}(q.Component),se.propTypes={from:ee().number,appId:ee().string,viewId:ee().string,relateSheetId:ee().string,parentWorksheetId:ee().string,recordId:ee().string,controlId:ee().string,allowNewRecord:ee().bool,disabledManualWrite:ee().bool,coverCid:ee().string,showControls:ee().arrayOf(ee().string),filterRowIds:ee().arrayOf(ee().string),filterRelatesheetControlIds:ee().arrayOf(ee().string),multiple:ee().bool,visible:ee().bool,control:ee().bool,onClose:ee().func,onOk:ee().func,formData:ee().arrayOf(ee().shape({}))},se.defaultProps={allowNewRecord:!0,disabledManualWrite:!1,filterRowIds:[],showControls:[],filterRelatesheetControlIds:[],onClose:function(){},onOk:function(){},formData:[]},ae),ne(M.prototype,"handleSearch",[re.Nj],g()(M.prototype,"handleSearch"),M.prototype),ne(M.prototype,"handleFilter",[re.Nj],g()(M.prototype,"handleFilter"),M.prototype),ne(M.prototype,"handleSelect",[re.Nj],g()(M.prototype,"handleSelect"),M.prototype),ne(M.prototype,"handleConfirm",[re.Nj],g()(M.prototype,"handleConfirm"),M.prototype),ne(M.prototype,"handleSort",[re.Nj],g()(M.prototype,"handleSort"),M.prototype),M);function Ce(he){var fe=document.createElement("div");document.body.appendChild(fe);function Ee(){b.unmountComponentAtNode(fe),document.body.removeChild(fe)}b.render(q.createElement(de,(0,V.default)({visible:!0},he,{onClose:Ee})),fe)}},22108:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>q});var ce=t(81274),g=t(54208),p=t(15759),L=t(85105),te=t.n(L),R=t(99663),y=t(22600),a=t(49135),r=t(93196),o=t(45697),d=t.n(o),Z=t(67294),H=t(82832),U=t(93967),f=t.n(U);const V={saveTemplateWithControls:function(k){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Form","SaveTemplateWithControls",k,ee)},addTextControl:function(k){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Form","AddTextControl",k,ee)},addTemplateControls:function(k){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Form","AddTemplateControls",k,ee)},saveTemplateWithControlsGrpc:function(k){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Form","SaveTemplateWithControlsGrpc",k,ee)},getFormulaControlValue:function(k){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Form","GetFormulaControlValue",k,ee)},getTemplateWithControlsOld:function(k){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Form","GetTemplateWithControlsOld",k,ee)},getTemplateWithControls:function(k){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Form","GetTemplateWithControls",k,ee)},getRelationSources:function(k){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Form","GetRelationSources",k,ee)},checkEditAuth:function(k){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Form","CheckEditAuth",k,ee)}};var C=t(70794),O=t(15577),n=t(96486),s=t.n(n),j=t(30381),A=t.n(j),S,I,c=[{name:_l("\u4EFB\u52A1"),icon:"icon-task-responsible",value:1,searchText:_l("\u641C\u7D22\u4EFB\u52A1"),sortText:_l("\u6309\u4EFB\u52A1\u7684\u6700\u8FD1\u66F4\u65B0\u6392\u5E8F"),createText:_l("\u65B0\u5EFA\u4EFB\u52A1")},{name:_l("\u9879\u76EE"),icon:"icon-knowledge_file",value:2,searchText:_l("\u641C\u7D22\u9879\u76EE"),sortText:_l("\u6309\u9879\u76EE\u7684\u521B\u5EFA\u65F6\u95F4\u6392\u5E8F")},{name:_l("\u65E5\u7A0B"),icon:"icon-task_custom_today",value:3,searchText:_l("\u641C\u7D22\u65E5\u7A0B"),sortText:_l("\u6309\u65E5\u7A0B\u7684\u5F00\u59CB\u65F6\u95F4\u6392\u5E8F"),createText:_l("\u65B0\u5EFA\u65E5\u7A0B")},{name:_l("\u7533\u8BF7\u5355"),icon:"icon-content_paste2",value:5,searchText:_l("\u641C\u7D22\u7533\u8BF7\u5355"),sortText:_l("\u6309\u7533\u8BF7\u5355\u7684\u53D1\u8D77\u65F6\u95F4\u6392\u5E8F")}],q=(I=S=function(b){(0,r.default)(k,b);function k(ee){(0,R.default)(this,k);var re=(0,a.default)(this,(k.__proto__||te()(k)).call(this,ee));return re.onCancel=function(){re.props.onCancel&&re.props.onCancel(),re.setState({visible:!1})},re.selectTime=function(ie){var le=re.state.treeLeft.split("|")[0],E=le+"|"+ie[0].format("YYYY-MM-DD")+"|"+ie[1].format("YYYY-MM-DD");re.setState({treeLeft:E,item:null},function(){re.getRelationSources(7)})},re.state={visible:!0,repeatVisible:!1,selectIndex:ee.types.length&&ee.types[0]!==4?ee.types[0]:1,list:[],repeatList:[],singleRepeatList:[],treeLeft:"",listPage:1,repeatPage:1,listMore:!1,repeatMore:!1,item:null,keywords:"",ajaxRequestComplete:!1},re}return(0,y.default)(k,[{key:"componentWillMount",value:function(){this.getSources()}},{key:"getSources",value:function(){var re=this;this.props.ajaxPost?this.props.ajaxPost(this.state.keywords).then(function(ie){ie.status&&re.setState({ajaxRequestComplete:!0,list:re.props.ajaxDataFormat(ie.data)})}):this.getRelationSources(),this.state.selectIndex===3&&this.getRelationSources(6)}},{key:"getRelationSources",value:function(){var re=this,ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.state.selectIndex,le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,E=this.state,w=E.keywords,K=E.selectIndex,N=E.treeLeft,F=E.list,h=this.props,z=h.sourceId,X=h.sourceType,B=K===3||K===6?10:20,x=function(i){return F.length?F[F.length-1][i]:""};V.getRelationSources({type:ie,keywords:w,sourceId:z,sourceType:X,pageIndex:le,pageSize:B,treeLeft:ie===3?x("sid")+"|"+x("ext1")+"|"+x("sidext"):N}).then(function(Q){Q.code===1&&(re.setState({ajaxRequestComplete:!0}),ie===6?re.setState({repeatList:le===1?Q.data:re.state.repeatList.concat(Q.data),repeatPage:le,repeatMore:Q.data.length===B}):ie===7?re.setState({singleRepeatList:Q.data}):re.setState({list:le===1?Q.data:re.state.list.concat(Q.data),listPage:le,listMore:Q.data.length===B}))})}},{key:"returnTypes",value:function(re){var ie=[];re.forEach(function(E){c.forEach(function(w){w.value===E&&ie.push(w)})});var le=ie.length?ie:c;return md.global.Account.hrVisible||s().remove(le,function(E){return E.value===5}),le}},{key:"switchType",value:function(re){var ie=this;this.setState({selectIndex:re,keywords:"",list:[],repeatList:[],singleRepeatList:[],treeLeft:"",ajaxRequestComplete:!1},function(){ie.getSources()})}},{key:"search",value:function(re){var ie=this;re.keyCode===13&&this.setState({keywords:re.currentTarget.value,list:[],repeatList:[],singleRepeatList:[],treeLeft:"",ajaxRequestComplete:!1},function(){ie.getSources()})}},{key:"create",value:function(){var re=this;this.state.selectIndex===1&&$.CreateTask({relationCallback:function(le){var E=re.state.list;E.unshift({accountId:le.charge.accountID,avatar:le.charge.avatar,ext1:"",ext2:"",fullname:"",name:le.taskName,sid:le.taskID,sidext:"",type:1,link:md.global.Config.WebUrl+"apps/task/task_"+le.taskID}),re.setState({list:E})}}),this.state.selectIndex===3&&(0,C.Z)({createShare:!1,callback:function(le){var E=re.state,w=E.list,K=E.repeatList,N={accountId:md.global.Account.accountId,avatar:md.global.Account.avatar,ext1:le.startDate,ext2:le.endDate,fullname:"",name:le.name,sid:le.calendarID,sidext:"",type:3,link:md.global.Config.WebUrl+"apps/calendar/detail_"+le.calendarID};le.isRecur?(K.unshift(N),re.setState({repeatList:K})):(w.unshift(N),re.setState({list:w}))}})}},{key:"cancel",value:function(){this.props.onCancel(),this.setState({visible:!1})}},{key:"save",value:function(){this.state.item!==null&&(this.props.onSubmit(this.state.item),this.setState({visible:!1}))}},{key:"renderItem",value:function(re,ie){var le=this,E=s().find(c,{value:this.state.selectIndex})||{};return Z.createElement("li",{key:ie,className:f()("relative",{ThemeBGColor3:this.state.item&&this.state.item.sid===re.sid&&this.state.item.sidext===re.sidext}),onClick:function(){return le.setState({item:re})}},Z.createElement("div",{className:"flexRow relationControlItem"},Z.createElement("i",{className:re.type===4?(0,O.kQ)(re.ext1)+" relationControlIcon":E.icon}),Z.createElement("span",{className:f()("overflow_ellipsis",{flex:re.type!==4})},re.name),re.type!==1&&re.ext1?Z.createElement("span",{className:re.type===4?"":"mLeft20"},re.type===3||re.type===7?A()(re.ext1).format("YYYY-MM-DD HH:mm"):re.ext1):void 0,re.ext2?Z.createElement("span",{className:"mLeft20"},re.type===3||re.type===7?A()(re.ext2).format("YYYY-MM-DD HH:mm"):re.ext2):void 0,re.type===4?Z.createElement("span",{className:"flex"}):void 0,Z.createElement(p.Z,{className:"circle userAvarar",user:{userHead:re.avatar,accountId:re.accountId},size:24})))}},{key:"repeatDialog",value:function(re){var ie=this,le=re.sid+"|"+A()(re.ext1).format("YYYY-MM-DD HH:mm")+"|"+A()(re.ext1).add(1,"y").format("YYYY-MM-DD HH:mm");this.setState({repeatVisible:!0,treeLeft:le,item:null},function(){ie.getRelationSources(7)})}},{key:"render",value:function(){var re=this,ie=this.props.types;ie.length===1&&ie[0]===4&&(ie=[]);var le={overlayClosable:!1,visible:this.state.visible,width:window.innerWidth-52*2>1600?1600:window.innerWidth-52*2,type:"fixed"},E={overlayClosable:!1,visible:this.state.repeatVisible,width:600,type:"fixed"},w=s().find(c,{value:this.state.selectIndex})||{},K=this.state.treeLeft.split("|");return Z.createElement(H.Z,le,Z.createElement("div",{className:"flexRow relationControlBox"},ie.length===1?void 0:Z.createElement("div",{className:"relationControlBar"},Z.createElement("div",{className:"relationControlTypeName"},this.props.title),Z.createElement("ul",{className:"relationControlType"},this.returnTypes(ie).map(function(N,F){return Z.createElement("li",{key:F,onClick:function(){return re.switchType(N.value)},className:f()({active:re.state.selectIndex===N.value})},Z.createElement("i",{className:N.icon}),N.name)}))),Z.createElement("div",{className:"flex relative flexColumn"},Z.createElement("i",{className:"icon-delete relationControlClose ThemeColor3",onClick:function(){re.onCancel()}}),Z.createElement("div",{className:"relationControlSearch"},Z.createElement("i",{className:"icon-search"}),Z.createElement("input",{type:"text",placeholder:w.searchText,onKeyUp:function(F){return re.search(F)}})),this.state.list.length===0&&this.state.keywords?void 0:Z.createElement("div",{className:"relationControlSort"},w.sortText),Z.createElement("ul",{className:"flex relationControlList"},this.state.ajaxRequestComplete?void 0:Z.createElement(g.Z,null),this.state.ajaxRequestComplete&&!this.state.list.length&&!this.state.repeatList.length&&this.state.keywords?Z.createElement("div",{className:"relationControNull"},Z.createElement("div",{className:"relationControNullIcon"},Z.createElement("i",{className:"icon-search"})),_l("\u641C\u7D22\u65E0\u7ED3\u679C")):void 0,this.state.ajaxRequestComplete&&!this.state.list.length&&!this.state.repeatList.length&&!this.state.keywords?Z.createElement("div",{className:"relationControNull"},Z.createElement("div",{className:"relationControNull"}),_l("\u6682\u65E0\u5217\u8868")):void 0,this.state.repeatList.map(function(N,F){return Z.createElement("li",{key:F,className:"relative",onClick:function(){return re.repeatDialog(N)}},Z.createElement("div",{className:"flexRow relationControlItem"},Z.createElement("i",{className:"icon-restore2"}),Z.createElement("span",{className:"overflow_ellipsis flex"},_l("\u3010\u91CD\u590D\u65E5\u7A0B\u3011")+N.name),Z.createElement(p.Z,{className:"circle userAvarar",user:{userHead:N.avatar,accountId:N.accountId},size:24})))}),this.state.ajaxRequestComplete&&this.state.selectIndex===3&&this.state.repeatMore?Z.createElement("div",null,Z.createElement("span",{className:"listMore ThemeColor3",onClick:function(){return re.getRelationSources(6,re.state.repeatPage+1)}},_l("\u67E5\u770B\u66F4\u591A"))):void 0,this.state.list.map(function(N,F){return re.renderItem(N,F)}),this.state.ajaxRequestComplete&&this.state.selectIndex===3&&this.state.listMore?Z.createElement("div",null,Z.createElement("span",{className:"listMore ThemeColor3",onClick:function(){return re.getRelationSources(3,re.state.listPage+1)}},_l("\u67E5\u770B\u66F4\u591A"))):void 0),Z.createElement("div",{className:"relationControlFooter"},!this.props.createDisable&&w.createText?Z.createElement("span",{className:"relationControlCreate ThemeColor3",onClick:function(){return re.create()}},Z.createElement("i",{className:"icon-plus"}),w.createText):void 0,Z.createElement("span",{className:"relationControlCancel ThemeColor3",onClick:function(){re.onCancel()}},_l("\u53D6\u6D88")),Z.createElement("span",{className:f()("relationControlSave ThemeBGColor3",{relationDisable:this.state.item===null}),onClick:function(){return re.save()}},_l("\u786E\u5B9A"))))),this.state.repeatVisible?Z.createElement(H.Z,E,Z.createElement("div",{className:"flexColumn relationControlBox relative"},Z.createElement("i",{className:"icon-delete relationControlClose ThemeColor3",onClick:function(){return re.setState({repeatVisible:!1,treeLeft:"",item:null})}}),Z.createElement("div",{className:"relationControlTypeName overflow_ellipsis mRight25 mLeft15"},_l("\u3010\u91CD\u590D\u65E5\u7A0B\u3011")+s().find(this.state.repeatList,function(N){return N.sid===K[0]}).name),Z.createElement("div",{className:"listDate"},Z.createElement(ce.Z.RangePicker,{className:"ThemeHoverColor3",onOk:this.selectTime,allowClear:!1,selectedValue:[A()(K[1]),A()(K[2])]},Z.createElement("span",null,A()(K[1]).format("YYYY-MM-DD"),Z.createElement("i",{className:"icon-arrow-down-border mLeft5 Font14 listDateGray"}),Z.createElement("span",{className:"mLeft10 mRight10 listDateGray"},_l("\u81F3")),A()(K[2]).format("YYYY-MM-DD"),Z.createElement("i",{className:"icon-arrow-down-border mLeft5 Font14 listDateGray"})))),Z.createElement("ul",{className:"flex relationControlList"},this.state.ajaxRequestComplete&&!this.state.singleRepeatList.length?Z.createElement("div",{className:"relationControNull"},Z.createElement("div",{className:"relationControNull"}),_l("\u6682\u65E0\u5217\u8868")):void 0,this.state.singleRepeatList.map(function(N,F){return re.renderItem(N,F)})),Z.createElement("div",{className:"relationControlFooter"},Z.createElement("span",{className:"relationControlCancel ThemeColor3",onClick:function(){return re.setState({repeatVisible:!1,treeLeft:"",item:null})}},_l("\u53D6\u6D88")),Z.createElement("span",{className:f()("relationControlSave ThemeBGColor3",{relationDisable:this.state.item===null}),onClick:function(){return re.save()}},_l("\u786E\u5B9A"))))):void 0)}}]),k}(Z.Component),S.propTypes={title:d().string,sourceId:d().string,sourceType:d().string,types:d().array,onSubmit:d().func,onCancel:d().func,ajaxPost:d().func,ajaxDataFormat:d().func},S.defaultProps={title:"",createDisable:!1,types:[],sourceId:"",sourceType:"",onSubmit:function(){},onCancel:function(){}},I)},56924:(lt,Te,t)=>{"use strict";t.d(Te,{Bw:()=>L,G0:()=>ce,Jx:()=>te,hj:()=>p,lo:()=>g});var ce={QINIU:0,COMMON:1,KC:2,WORKSHEET:3,WORKSHEETROW:4},g={CLOSE:1,PROJECT:2,MDUSER:3,PUBLIC:4},p={CLOSE:1,ALL:2},L={CHAT:0,FEED:1,TASK:2,CALENDAR:4,KC:5,QR:7},te={ALL:-1,TASK:1,CALENDAR:2,POST:3,VOTE:4,KCFILE:5,KCFOLDER:6,WORKSHEET:7,WORKSHEETROW:8,LINK:100}},68625:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>Z});var ce=t(85105),g=t.n(ce),p=t(99663),L=t(22600),te=t(49135),R=t(93196),y=t(67294),a=t(55961),r=t.n(a),o,d,Z=(d=o=function(H){(0,R.default)(U,H);function U(f){(0,p.default)(this,U);var V=(0,te.default)(this,(U.__proto__||g()(U)).call(this,f));return V.handleBarcode=function(C){V.barcode=C},V.update=V.update.bind(V),V}return(0,L.default)(U,[{key:"componentDidMount",value:function(){this.props.renderWidth&&this.barcode&&(this.barcode.width=this.props.renderWidth),this.update()}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"update",value:function(){var V=this.props,C=V.value,O=V.format,n=V.width,s=V.height,j=V.displayValue,A=V.textAlign,S=V.textPosition,I=V.textMargin,c=V.fontSize,q=V.background,b=V.margin,k=V.lineColor,ee=V.marginBottom;r()(this.barcode,C,{format:O,width:n,height:s,displayValue:j,textAlign:A,textPosition:S,textMargin:I,fontSize:c,background:q,margin:b,lineColor:k,marginBottom:ee})}},{key:"render",value:function(){var V=this.props.renderer;if(V==="svg")return y.createElement("svg",{ref:this.handleBarcode});if(V==="canvas")return y.createElement("canvas",{ref:this.handleBarcode});if(V==="img")return y.createElement("img",{ref:this.handleBarcode,alt:""})}}]),U}(y.Component),o.defaultProps={format:"CODE128",renderer:"svg",width:2,height:100,displayValue:!0,textAlign:"center",textPosition:"bottom",textMargin:5,fontSize:15,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:0,renderWidth:160},d)},51156:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>B});var ce=t(33867),g=t(54208),p=t(88239),L=t(12424),te=t(86735),R=t(45697),y=t.n(R),a=t(67294),r=t(93967),o=t.n(r),d=t(29314),Z=t(71893),H=t(29208),U=t(20148),f=t(60385),V=t.n(f),C=t(77040),O=t(94301),n=t.n(O),s=t(95679),j=t(85105),A=t.n(j),S=t(99663),I=t(22600),c=t(49135),q=t(93196),b=t(96486),k=t.n(b),ee,re,ie=[_l("\u7701\u4EFD"),_l("\u57CE\u5E02"),_l("\u533A\u53BF")],le=["110000","120000","310000","500000","810000","820000"],E=(re=ee=function(x){(0,q.default)(Q,x);function Q(i){(0,S.default)(this,Q);var m=(0,c.default)(this,(Q.__proto__||A()(Q)).call(this,i));return m.state={visible:!1,loading:!1,indexLevel:1,keywords:""},m}return(0,I.default)(Q,[{key:"onNext",value:function(m){var v=this.props,W=v.handleClick,P=v.level,u=v.callback,l=v.onClose,T=v.data,G=v.onClear,D=this.state.indexLevel;if(!k().isArray(T[0])){u([m],m.path.split("/").length),this.setState({visible:!1,indexLevel:1}),l([m]);return}if(W(m,D),m.last||D===P){this.setState({visible:!1,indexLevel:1}),G(!1);return}this.setState({indexLevel:D+1})}},{key:"handleSearch",value:function(){var m=this.state.keywords;this.props.getCitys({keywords:m})}},{key:"renderSearch",value:function(){var m=this,v=this.state.keywords;return a.createElement("div",{className:"searchWrapper"},a.createElement(ce.Z,{icon:"h5_search"}),a.createElement("form",{action:"#",className:"flex",onSubmit:function(P){P.preventDefault()}},a.createElement("input",{type:"text",placeholder:_l("\u641C\u7D22"),className:"Font14",value:v,onChange:function(P){m.setState({keywords:P.target.value})},onKeyDown:function(P){P.which===13&&m.handleSearch()}})),v?a.createElement(ce.Z,{icon:"workflow_cancel",onClick:function(){m.setState({keywords:""},m.handleSearch)}}):null)}},{key:"render",value:function(){var m=this,v=this.props,W=v.disabled,P=v.children,u=v.placeholder,l=v.onClear,T=v.onClose,G=T===void 0?function(){}:T,D=v.callback,M=D===void 0?function(){}:D,se=v.showConfirmBtn,ae=v.defaultValue,ne=v.data,de=ne===void 0?[]:ne,Ce=v.select,he=Ce===void 0?[]:Ce,fe=v.handleClick,Ee=fe===void 0?function(){}:fe,Y=v.level,oe=this.state,ve=oe.visible,ue=oe.loading,pe=oe.indexLevel,Se=oe.keywords,ye=k().last(he),J=de.length?k().isArray(de[0])?de[de.length-1]:de:[];return a.createElement(a.Fragment,null,a.createElement("span",{className:"Block",onClick:function(){return!W&&m.setState({visible:!0},m.props.getCitys)}},P||a.createElement("input",{readOnly:!0,value:he.length===0?ae:ye.path,placeholder:u})),a.createElement(V(),{className:"mobileCityPicker",popup:!0,visible:ve,title:a.createElement(a.Fragment,null,a.createElement("div",{className:"flexRow"},a.createElement("div",{className:"flex ThemeColor3 pLeft16 TxtLeft",onClick:function(){he.length===0?(l(),m.setState({visible:!1,indexLevel:1})):(m.setState({indexLevel:he.length>2?2:1}),he.length>2?Ee(he[0],1):l(!1))}},he.length?_l("\u8FD4\u56DE"):_l("\u6E05\u9664")),a.createElement("div",null,pe?ie[pe-1]:_l("\u9009\u62E9\u5730\u533A")),se?a.createElement("div",{className:"flex ThemeColor3 pRight16 TxtRight",onClick:function(){he.length&&M(he,pe),m.setState({visible:!1,indexLevel:1}),l(!1),he.length&&m.props.onClose&&m.props.onClose()}},_l("\u786E\u5B9A")):a.createElement("div",{className:"flex pLeft16"})),this.renderSearch()),onClose:function(){G(),m.setState({visible:!1,indexLevel:1})},animationType:"slide-up"},a.createElement("div",{style:{height:250,overflowY:"auto"}},ue?a.createElement(g.Z,null):a.createElement(n(),null,de.length>0&&J.map(function(me){return a.createElement(n().Item,{key:me.id,onClick:function(){return m.onNext((0,p.default)({},me,{last:Y===2&&le.includes(me.id)?!0:me.last}))}},a.createElement("div",{className:"mobileCityPickerListItem valignWrapper",style:{color:he.length&&he[he.length-1].id===me.id?"#2196f3":"#000"}},se?a.createElement(s.Z,{checked:(ye||{}).id===me.id,text:k().isArray(de[0])?me.name:me.path}):a.createElement("span",null,k().isArray(de[0])?me.name:me.path),!me.last&&Y>pe&&k().isArray(de[0])&&(Y===2?!le.includes(me.id):!0)&&a.createElement(ce.Z,{className:"Font20 Gray_9e",icon:"navigate_next"})))})))))}}]),Q}(a.Component),ee.propTypes={disabled:y().bool,placeholder:y().string,defaultValue:y().any,level:y().number,callback:y().func,onClear:y().func},ee.defaultProps={disabled:!1,placeholder:_l("\u7701/\u5E02/\u53BF"),defaultValue:"",level:3,data:[],callback:function(){},onClear:function(){},getCitys:function(){},handleClick:function(){}},re),w=t(15577),K=t(59295),N=(0,te.Z)([`
  background: #fff;
  border-radius: 3px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.13), 0 2px 6px rgba(0, 0, 0, 0.1);
  padding: 6px 0;
  z-index: 11;
  height: 211px;
  width: fit-content;
  .CascaderSelectWrap-List {
    height: 100%;
    overflow-y: scroll;
    width: 140px;
    border-right: 1px solid #f5f5f5;
    &:last-child {
      border-right: none;
    }
    &::-webkit-scrollbar {
      width: 0;
    }
    &-Item {
      cursor: pointer;
      height: 32px;
      padding: 0 6px 0 12px;
      justify-content: space-between;
      &:hover {
        background: rgba(0, 0, 0, 0.06);
      }
      &.active {
        background: #e5f3fe;
      }
    }
  }
`],[`
  background: #fff;
  border-radius: 3px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.13), 0 2px 6px rgba(0, 0, 0, 0.1);
  padding: 6px 0;
  z-index: 11;
  height: 211px;
  width: fit-content;
  .CascaderSelectWrap-List {
    height: 100%;
    overflow-y: scroll;
    width: 140px;
    border-right: 1px solid #f5f5f5;
    &:last-child {
      border-right: none;
    }
    &::-webkit-scrollbar {
      width: 0;
    }
    &-Item {
      cursor: pointer;
      height: 32px;
      padding: 0 6px 0 12px;
      justify-content: space-between;
      &:hover {
        background: rgba(0, 0, 0, 0.06);
      }
      &.active {
        background: #e5f3fe;
      }
    }
  }
`]),F=(0,te.Z)([`
  width: 420px;
  height: 211px;
  overflow-y: scroll;
  padding: 6px 0;
  background: #fff;
  border-radius: 3px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.13), 0 2px 6px rgba(0, 0, 0, 0.1);
  z-index: 11;
  li {
    height: 32px;
    cursor: pointer;
    padding: 0 12px;
    &:hover {
      background: rgba(0, 0, 0, 0.06);
    }
    &.active {
      background: #e5f3fe;
    }
    .CityPicker-Search-Highline {
      background: unset;
      color: #2196f3;
    }
  }
`],[`
  width: 420px;
  height: 211px;
  overflow-y: scroll;
  padding: 6px 0;
  background: #fff;
  border-radius: 3px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.13), 0 2px 6px rgba(0, 0, 0, 0.1);
  z-index: 11;
  li {
    height: 32px;
    cursor: pointer;
    padding: 0 12px;
    &:hover {
      background: rgba(0, 0, 0, 0.06);
    }
    &.active {
      background: #e5f3fe;
    }
    .CityPicker-Search-Highline {
      background: unset;
      color: #2196f3;
    }
  }
`]),h=["110000","120000","310000","500000","810000","820000"],z=Z.ZP.div(N),X=Z.ZP.ul(F);function B(x){var Q=x.level,i=Q===void 0?3:Q,m=x.search,v=x.placeholder,W=v===void 0?_l("\u7701/\u5E02/\u53BF"):v,P=x.defaultValue,u=P===void 0?"":P,l=x.popupParentNode,T=l===void 0?document.body:l,G=x.className,D=G===void 0?"":G,M=x.children,se=x.destroyPopupOnHide,ae=x.disabled,ne=x.popupClassName,de=ne===void 0?"":ne,Ce=x.popupAlign,he=x.popupVisible,fe=he===void 0?!1:he,Ee=x.hasContentContainer,Y=Ee===void 0?!0:Ee,oe=x.manual,ve=oe===void 0?!1:oe,ue=x.mustLast,pe=ue===void 0?!1:ue,Se=x.callback,ye=Se===void 0?function(){}:Se,J=x.handleClose,me=J===void 0?function(){}:J,be=x.onClear,xe=be===void 0?function(){}:be,Ae=x.showConfirmBtn,Ne=x.handleVisible,Me=Ne===void 0?function(){}:Ne,Fe=(0,w.Q9)(),Be=(0,a.useRef)(null),we=(0,a.useRef)(null),Ie=(0,a.useState)(fe),ge=(0,L.Z)(Ie,2),Re=ge[0],Pe=ge[1],ke=(0,a.useState)([]),We=(0,L.Z)(ke,2),Ve=We[0],it=We[1],Ge=(0,a.useState)(Array.isArray(u)?u:[]),pt=(0,L.Z)(Ge,2),ot=pt[0],vt=pt[1],At=(0,a.useState)(!1),yt=(0,L.Z)(At,2),st=yt[0],St=yt[1];(0,a.useEffect)(function(){!u&&!Fe&&Ve.length>0&&(vt([]),it(Ve[0]))},[u]),(0,a.useEffect)(function(){if(Re&&!m&&(!Ve.length||!k().isArray(Ve[0]))){Qe();return}},[Re]),(0,a.useEffect)(function(){Re&&Qe({keywords:m})},[m]),(0,a.useEffect)(function(){Pe(fe),Me(fe)},[fe]),(0,a.useEffect)(function(){Ve.length&&it(Ve.slice(0,i))},[i]);var Qe=function(){var ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},gt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Et=ze.parentId,ft=Et===void 0?"":Et,qe=ze.keywords,nt=qe===void 0?"":qe;St(ft||"all"),H.Z.getCitysByParentID({parentId:ft,keywords:nt,layer:i,textSplit:"/",isLast:pe}).then(function(Ze){St(!1),it(nt?Ze.citys:Ve.slice(0,gt).concat([Ze.citys]))})},Xe=function(ze,gt){var Et=gt>ot.length?ot.concat(ze):ot.slice(0,gt-1).concat(ze);if(vt(Et),ye(Et,ze.last||gt===i?i:Et.length),ze.last||gt===i){gt<=ot.length&&it(Ve.slice(0,gt)),Pe(!1),Me(!1),me(Et);return}Qe({parentId:ze.id},gt)},$e=function(){var ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;it([Ve[0]]),vt([]),ze&&xe()},Ke=function(){return a.createElement("div",{id:"CascaderSelect-Ming",className:"CityPicker"},m?a.createElement(X,null,Ve.map(function(ze){if(ze.path){var gt=(0,K.Kx)(m,ze.path);return a.createElement("li",{className:"valignWrapper",key:"CascaderSearchSelectWrap-List-Item-"+ze.id,onClick:function(ft){ft.stopPropagation(),ye([ze],ze.path.split("/").length),Pe(!1),Me(!1),me([ze])}},gt.map(function(Et){return Et.added&&!Et.removed?Et.value:Et.removed?null:a.createElement("span",{className:"CityPicker-Search-Highline"},Et.value)}))}})):a.createElement(z,{className:"CascaderSelectWrap flexRow"},Ve&&Ve.map(function(ze,gt){if(ze.length===0||!k().isArray(ze))return null;var Et=gt+1;return a.createElement("ul",{className:"CascaderSelectWrap-List"},ze.map(function(ft){return a.createElement("li",{className:o()("CascaderSelectWrap-List-Item Hand valignWrapper",{active:ot.find(function(qe){return qe.id===ft.id})}),key:"CascaderSelectWrap-List-Item-"+ft.id,onClick:function(nt){nt.stopPropagation(),Xe((0,p.default)({},ft,{last:i===2&&h.includes(ft.id)?!0:ft.last}),Et)}},a.createElement("span",{className:"flex ellipsis"},ft.name),!ft.last&&Et!==i&&(i===2?!h.includes(ft.id):!0)&&(st===ft.id?a.createElement(g.Z,{size:"small"}):a.createElement(ce.Z,{icon:"arrow-right-tip",className:"Gray_9e"})))}))})))},Ue=function(){var ze=M||a.createElement("input",{readOnly:!0,autoFocus:!0,value:ot.length===0?u:k().last(ot).path,placeholder:W,className:"CityPicker-input",ref:Be});return Y?a.createElement("span",{className:o()("CityPicker-input-container",{editable:Re}),ref:we},ze):ze};return Fe?a.createElement(E,{data:Ve,select:ot,level:i,disabled:ae,callback:ye,onClear:$e,showConfirmBtn:Ae,onClose:me,getCitys:Qe,handleClick:Xe},Ue()):a.createElement("span",{className:o()("ming CityPicker-wrapper",D),onClick:function(ze){ae||ve&&!Re||(Pe(!0),Me(!0))}},a.createElement(d.Z,{action:["click"],popupVisible:ae?!1:Re,destroyPopupOnHide:se,onPopupVisibleChange:function(ze){ae||ve&&ze||(Pe(ze),Me(ze),ze||me(ot))},popupClassName:o()("CityPickerPanelTrigger",de),popupAlign:Ce||{points:["tl","bl"],overflow:{adjustX:!0,adjustY:!0}},getPopupContainer:function(){return T},popup:Ke()},Ue()))}B.propTypes={children:y().node,className:y().string,search:y().string,showConfirmBtn:y().bool,hasContentContainer:y().bool,defaultValue:y().any,disabled:y().bool,mustLast:y().bool,level:y().number,placeholder:y().string,popupParentNode:y().any,destroyPopupOnHide:y().bool,popupAlign:y().object,popupVisible:y().bool,callback:y().func.isRequired,handleClose:y().func,onClear:y().func}},61283:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>R});var ce=t(42723),g=t(67294),p=t(15405),L=t(33126),te=(0,L.Z)(p.Z);function R(y){var a=y.onClickAway,r=y.onClickAwayExceptions,o=(0,ce.Z)(y,["onClickAway","onClickAwayExceptions"]);return g.createElement(te,{onClickAway:a,onClickAwayExceptions:r},y.children)}},61844:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>re});var ce=t(70264),g=t(88239),p=t(24043),L=t.n(p),te=t(85105),R=t.n(te),y=t(99663),a=t(22600),r=t(49135),o=t(93196),d=t(86735),Z=t(45697),H=t.n(Z),U=t(67294),f=t(33867),V=t(80935),C=t(94914),O=t(15577),n=t(92417),s=t(93967),j=t.n(s),A=t(71893),S=t(96486),I=t.n(S),c,q,b=(0,d.Z)([`
  .scoreIcon {
    transition: 0.3s;
    color: `,`;
    &:hover {
      color: `,`;
    }
  }
`],[`
  .scoreIcon {
    transition: 0.3s;
    color: `,`;
    &:hover {
      color: `,`;
    }
  }
`]),k=A.ZP.div(b,function(ie){return ie.color||"rgba(0,0,0,0.16)"},function(ie){return ie.color||"rgba(0,0,0,0.16)"}),ee=(q=c=function(ie){(0,o.default)(le,ie);function le(E){(0,y.default)(this,le);var w=(0,r.default)(this,(le.__proto__||R()(le)).call(this,E));return w.state={score:w.props.score,lastScore:w.props.score},w.props.disabled?(w.onMouseEnter=function(){},w.onMouseLeave=function(){}):(w.onMouseEnter=w.onMouseEnter.bind(w),w.onMouseLeave=w.onMouseLeave.bind(w)),w.onSelect=w.onSelect.bind(w),w}return(0,a.default)(le,[{key:"componentWillReceiveProps",value:function(w){"score"in w&&this.setState({score:w.score,lastScore:w.score})}},{key:"onSelect",value:function(w,K){this.props.disabled||(K.stopPropagation(),w===this.state.lastScore&&(w=0),this.setState({lastScore:w,score:w}),this.props.callback(w,K))}},{key:"onMouseEnter",value:function(w,K){this.setState({score:w})}},{key:"onMouseLeave",value:function(){var w=this.state.lastScore;this.setState({score:w})}},{key:"render",value:function(){var w=this,K=this.state,N=K.score,F=K.lastScore,h=this.props,z=h.data,X=z===void 0?{}:z,B=h.hideTip,x=h.hideText,Q=x===void 0?!1:x,i=h.from,m=h.backgroundColor,v=!(X.advancedSetting||{}).itemicon,W=v?(0,V.V7)(X):(0,C.aq)(X),P=W.max,u=W.itemicon,l=W.showvalue,T=W.itemcolor,G=JSON.parse(T||"{}"),D=(0,C.aq)(X,"itemnames")||[],M=L()({length:P}),se=(0,O.Q9)(),ae=I().get(D[F-1],"value")||F,ne=(G.type===1?G.color:I().get((G.colors||[])[N-1],"value"))||"#FED156";return U.createElement("div",{className:"Score-wrapper customScoreWrap"},M.map(function(de,Ce){var he=""+(I().get(D[Ce],"value")||Ce+1),fe={popupPlacement:"top",offset:[0,1]};return se&&(Ce===0&&(0,O.wz)(he)>=10&&(fe={popupPlacement:"topLeft",offset:[-12,1]}),Ce===M.length-1&&(0,O.wz)(he)>=10&&(fe={popupPlacement:"topRight",offset:[12,1]})),U.createElement("div",(0,g.default)({key:Ce,className:j()("StarScore-item",{mobileStyle:se&&!w.props.disabled})},se?{onTouchStart:function(Y){return w.onSelect(Ce+1,Y)}}:{onClick:function(Y){return w.onSelect(Ce+1,Y)},onMouseEnter:function(Y){return w.onMouseEnter(Ce+1,Y)},onMouseLeave:w.onMouseLeave}),U.createElement(k,{color:N>0&&Ce<N?ne:m||"#bdbdbd"},U.createElement(ce.Z,(0,g.default)({text:U.createElement("span",null,he)},fe,{disable:w.props.disabled||B}),U.createElement(f.Z,{className:j()("scoreIcon",i==="recordInfo"?"Font24":"Font18"),icon:u}))))}),(l==="1"||v)&&!!ae&&!Q&&U.createElement("div",{className:"mLeft10 LineHeight16 text"},ae))}}]),le}(U.Component),c.propTypes={data:H().object,score:H().number,callback:H().func,disabled:H().bool,hover:H().func,hideTip:H().bool},c.defaultProps={score:0,callback:function(){},disabled:!1,hover:function(){return!1}},q);const re=/^(1887|7596|7798)$/.test(t.j)?null:ee},81274:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>p});var ce=t(662),g=t(94796);ce.Z.RangePicker=g.Z;const p=/^(1887|7596|7798)$/.test(t.j)?null:ce.Z},69203:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>b});var ce=t(88239),g=t(52945),p=t.n(g),L=t(86735),te=t(67294),R=t(45697),y=t.n(R),a=t(93967),r=t.n(a),o=t(37727),d=t(4557),Z=t(71893),H=t(96486),U=t.n(H),f=(0,L.Z)([`
  position: absolute;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  z-index: 11;
`],[`
  position: absolute;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  z-index: 11;
`]),V=(0,L.Z)([`
  height: 48px;
  border-radius: 48px;
  color: #fff;
  line-height: 48px;
  padding: 0 10px 0 24px;
  z-index: 9;
  box-shadow: 0px 6px 24px rgba(0, 0, 0, 0.12), 0 2px 4px rgba(0, 0, 0, 0.08);
  display: flex;
  flex-direction: row;
  align-items: center;
  min-width: 400px;
`],[`
  height: 48px;
  border-radius: 48px;
  color: #fff;
  line-height: 48px;
  padding: 0 10px 0 24px;
  z-index: 9;
  box-shadow: 0px 6px 24px rgba(0, 0, 0, 0.12), 0 2px 4px rgba(0, 0, 0, 0.08);
  display: flex;
  flex-direction: row;
  align-items: center;
  min-width: 400px;
`]),C=(0,L.Z)([`
  height: 1em;
  color: rgba(255, 255, 255, 0.8);
  font-size: 20px;
  margin-right: 10px;
  animation: rotate 2s linear infinite;
`],[`
  height: 1em;
  color: rgba(255, 255, 255, 0.8);
  font-size: 20px;
  margin-right: 10px;
  animation: rotate 2s linear infinite;
`]),O=(0,L.Z)([`
  cursor: pointer;
  display: inline-block;
  height: 28px;
  line-height: 28px;
  padding: 0 18px;
  border-radius: 28px;
`],[`
  cursor: pointer;
  display: inline-block;
  height: 28px;
  line-height: 28px;
  padding: 0 18px;
  border-radius: 28px;
`]),n=(0,L.Z)([`
  background-color: #fff;
  font-weight: 600;
  user-select: none;
  &:not(.disabled):hover {
    background-color: rgba(255, 255, 255, 0.9);
  }
  &.disabled {
    color: #ddd;
    cursor: not-allowed;
  }
`],[`
  background-color: #fff;
  font-weight: 600;
  user-select: none;
  &:not(.disabled):hover {
    background-color: rgba(255, 255, 255, 0.9);
  }
  &.disabled {
    color: #ddd;
    cursor: not-allowed;
  }
`]),s=(0,L.Z)([`
  color: #fff;
  font-weight: bold;
  &:hover {
    background-color: rgba(255, 255, 255, 0.16);
  }
`],[`
  color: #fff;
  font-weight: bold;
  &:hover {
    background-color: rgba(255, 255, 255, 0.16);
  }
`]),j=Z.ZP.div(f),A=Z.ZP.div(V),S=Z.ZP.i(C),I=Z.ZP.div(O),c=(0,Z.ZP)(I)(n),q=(0,Z.ZP)(I)(s);function b(k){var ee=k.style,re=ee===void 0?{}:ee,ie=k.isBlack,le=ie===void 0?!1:ie,E=k.saveShortCut,w=k.loading,K=k.visible,N=k.defaultTop,F=k.visibleTop,h=k.title,z=k.okDisabled,X=k.updateText,B=X===void 0?_l("\u4FDD\u5B58"):X,x=k.cancelText,Q=x===void 0?_l("\u53D6\u6D88"):x,i=k.onUpdate,m=i===void 0?function(){}:i,v=k.onCancel,W=v===void 0?function(){}:v,P=k.onOkMouseDown,u=P===void 0?function(){}:P,l=(0,te.useRef)({saveShortCut:E,okDisabled:z});return(0,d.Z)("s",function(T){if(!(!l.current.saveShortCut||!(window.isMacOs?T.metaKey:T.ctrlKey))&&(T.stopPropagation(),T.preventDefault(),!l.current.okDisabled)){var G=0;(0,H.includes)(["input","textarea"],document.activeElement.tagName.toLowerCase())&&(document.activeElement.blur(),document.querySelector(".recordInfoForm").dispatchEvent(new MouseEvent("mousedown")),G=100),setTimeout(function(){m()},G)}}),(0,te.useEffect)(function(){l.current={saveShortCut:E,okDisabled:z}},[E,z]),te.createElement(o.y_,{defaultStyle:{top:N},style:{top:(0,o.ST)(K?F:N,{stiffness:300,damping:30,precision:.01})}},function(T){return te.createElement(j,{style:p()({overflow:K?void 0:"hidden"},T,re),onClick:function(D){return D.stopPropagation()},className:"editingBar"},te.createElement(A,{style:{background:le?"#333":"#2196f3"}},te.createElement("span",{className:"flex bold"},h),w&&te.createElement(S,{className:"icon icon-loading_button"}),!w&&Q&&te.createElement(q,{className:"mLeft30  mRight10",onClick:W},Q),!w&&te.createElement(c,(0,ce.default)({className:r()({disabled:z},le?"Gray":"ThemeColor3"),onMouseDown:u,onClick:z?function(){}:m},E&&!z?{"data-tip":window.isMacOs?"\u2318 + S":"Ctrl + S"}:{}),B)))})}b.propTypes={saveShortCut:y().bool,style:y().shape({}),visible:y().bool,okDisabled:y().bool,loading:y().bool,title:y().any,defaultTop:y().number,visibleTop:y().number,updateText:y().string,cancelText:y().string,onUpdate:y().func,onCancel:y().func,onOkMouseDown:y().func}},22177:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>L});var ce=t(67294),g=t(46891);function p(te){return ce.createElement(ce.Fragment,null,te.children)}const L=(0,g.Z)(p)},91706:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>le});var ce=t(88239),g=t(52945),p=t.n(g),L=t(85315),te=t(12424),R=t(86735),y=t(67294),a=t(45697),r=t(71893),o=t(96486),d=t.n(o),Z=t(50840),H=t.n(Z),U=t(53670),f=t(79221),V=t(89499),C=t(88902),O=t.n(C),n=t(74061);function s(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return E.reduce(function(w,K){return w+K},0)}function j(E){return O()(E).filter(function(w){return E[w]}).join(" ")}function A(E){var w=E.id,K=E.leftFixed,N=E.topFixed,F=E.rightFixed,h=E.bottomFixed,z=E.width,X=E.height,B=E.columnHeadHeight,x=E.rowCount,Q=E.columnCount,i=E.topFixedCount,m=E.bottomFixedCount,v=E.leftFixedCount,W=E.rightFixedCount,P=E.rowHeight,u=E.cache,l=E.getColumnWidth,T=E.Cell,G=E.tableData,D=E.setRef,M=v?s([].concat((0,L.Z)(new Array(v))).map(function(he,fe){return l(fe)})):0,se=W?s([].concat((0,L.Z)(new Array(W))).map(function(he,fe){return l(fe)})):0,ae=i?i*B:0,ne=m?m*28:0,de=N?ae:h?ne:X-ae-ne;(0,o.includes)(w,"main")&&de<60&&(de=60);var Ce={left:K?0:F?z-se:M,top:N?0:h?X-ne:ae,width:K?M:F?se:z-M-se,height:de,columnCount:K?v:F?W:Q-v-W,rowCount:N||h?1:x};if(!(!Ce.width||!Ce.height))return y.createElement(n.cd,{ref:D,className:w+" "+j({leftFixed:K,rightFixed:F,topFixed:N,bottomFixed:h})+w,key:w,style:{position:"absolute",left:Ce.left,top:Ce.top,overflow:"hidden"},width:Ce.width,height:Ce.height,columnCount:Ce.columnCount,columnWidth:function(fe){return l(w.endsWith("center")?fe+v:fe)},rowHeight:function(){return P},rowCount:Ce.rowCount,itemData:(0,ce.default)({},G,{grid:(0,ce.default)({id:w,columnCount:Q,leftFixed:K,rightFixed:F,topFixed:N,bottomFixed:h,rightFixedCount:W,leftFixedCount:v},Ce)})},T)}var S=(0,R.Z)([`
  // background: #fff;
  &.scroll-x:hover::-webkit-scrollbar-thumb {
    border: 1px solid transparent;
  }
`],[`
  // background: #fff;
  &.scroll-x:hover::-webkit-scrollbar-thumb {
    border: 1px solid transparent;
  }
`]),I=r.ZP.div(S);function c(E){var w=E.type,K=w===void 0?"y":w,N=E.barWidth,F=E.setRef,h=E.setScrollY,z=h===void 0?function(){}:h,X=E.setScrollX,B=X===void 0?function(){}:X,x=(0,ce.default)({},E.style),Q=(0,ce.default)({},E.contentStyle);return x.position="absolute",x.overflow="hidden",K==="y"?(x.overflowY="auto",x.width=N,Q.width=N):K==="x"&&(x.overflowX="auto",x.height=N,Q.height=N),y.createElement(I,{className:"scroll-"+K,style:x,ref:F,onScroll:function(m){K==="x"?B(m.target.scrollLeft):K==="y"&&z(m.target.scrollTop)}},y.createElement("div",{className:"content",style:Q}))}var q=(0,R.Z)([`
  position: relative;
  border: 1px solid #f1f1f1;
  > div {
    box-sizing: border-box;
  }
  overscroll-behavior-x: none;
`],[`
  position: relative;
  border: 1px solid #f1f1f1;
  > div {
    box-sizing: border-box;
  }
  overscroll-behavior-x: none;
`]),b=r.ZP.div(q);function k(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return E.reduce(function(w,K){return w+K},0)}function ee(E,w){["top-center","main-center","bottom-center","scrollX"].forEach(function(K){E[K]&&d().isFunction(E[K].scrollTo)&&E[K].scrollTo({scrollLeft:w})})}function re(E,w){w<0&&(w=0),["main-left","main-center","main-right","scrollY"].forEach(function(K){E[K]&&d().isFunction(E[K].scrollTo)&&E[K].scrollTo({scrollTop:w})})}function ie(E,w){var K=E.noRenderEmpty,N=E.loading,F=E.className,h=E.showHead,z=E.showFoot,X=E.width,B=E.columnHeadHeight,x=B===void 0?34:B,Q=E.setHeightAsRowCount,i=E.rowCount,m=E.disableYScroll,v=E.columnCount,W=E.barWidth,P=W===void 0?(0,V.Iz)():W,u=E.sheetColumnWidths,l=u===void 0?{}:u,T=E.rowHeight,G=T===void 0?34:T,D=E.getColumnWidth,M=E.leftFixedCount,se=M===void 0?0:M,ae=E.rightFixedCount,ne=ae===void 0?0:ae,de=E.hasSubListFooter,Ce=E.defaultScrollLeft,he=E.Cell,fe=E.tableData,Ee=E.renderEmpty,Y=E.disablePanVertical,oe=E.tableFooter,ve=E.height,ue=E.height,pe=oe&&oe.height;pe&&(ue+=oe.height);var Se=z?1:0,ye=h?1:0,J=(0,y.useRef)(),me=(0,y.useRef)(),be=(0,U.o)(),xe=(0,te.Z)(be,2),Ae=xe[0],Ne=xe[1],Me=(0,U.o)({left:0,top:0,needUpdated:{}}),Fe=(0,te.Z)(Me,2),Be=Fe[0],we=Fe[1];window.cache=Be;var Ie=(0,y.useMemo)(function(){return{width:k([].concat((0,L.Z)(new Array(v))).map(function(vt,At){return D(At,!0)||200})),height:G*i-(de?8:0)}},[G,v,i,l]),ge=(0,y.useMemo)(function(){return Ie.width>X},[X,Ie.width,se,ne,v]),Re=(0,y.useMemo)(function(){return!m&&Ie.height>ve-x-(Se?28:0)},[ve,Ie.height,ye,x,Se,i]),Pe=[{id:"top-left",topFixed:!0,leftFixed:!0,visible:se>0&&ye>0},{id:"top-center",topFixed:!0,visible:ye>0},{id:"top-right",topFixed:!0,rightFixed:!0,visible:ne>0&&ye>0},{id:"main-left",leftFixed:!0,visible:se>0&&i>0},{id:"main-center",visible:i>0},{id:"main-right",rightFixed:!0,visible:ne>0&&i>0},{id:"bottom-left",bottomFixed:!0,leftFixed:!0,visible:se>0&&Se>0&&i>0},{id:"bottom-center",bottomFixed:!0,visible:Se>0&&i>0},{id:"bottom-right",bottomFixed:!0,rightFixed:!0,visible:ne>0&&Se>0&&i>0}],ke=(0,y.useCallback)(function(){Pe.filter(function(vt){return vt.visible}).forEach(function(vt){Be[vt.id]&&(Be[vt.id].resetAfterRowIndex(0),Be[vt.id].resetAfterColumnIndex(0))})},[i]),We=Pe.filter(function(vt){return vt.visible&&(!N||(0,o.includes)(vt.id,"top"))}).map(function(vt){return y.createElement(A,p()(vt,{width:Re?X-P:X,height:ge?ve+P*(Q?1:-1):ve,columnHeadHeight:x,rowCount:i,columnCount:v,topFixedCount:ye,bottomFixedCount:Se,leftFixedCount:se,rightFixedCount:ne,rowHeight:G,cache:Be,getColumnWidth:D,Cell:he,tableData:fe,setRef:function(yt){Be[vt.id]=yt}}))}),Ve=(0,y.useMemo)(function(){return y.createElement(c,{type:"y",barWidth:P,style:{right:0,top:ye*x,bottom:Se*28+(pe?oe.height:0)},contentStyle:{height:Ie.height+(ge?10:0)},setRef:function(At){Be.scrollY=At},setScrollY:function(At){we("top",At),re(Be,At)}})},[Ie.height,Se]),it=(0,y.useMemo)(function(){return y.createElement(c,{type:"x",style:{left:0,right:0,bottom:0},contentStyle:{width:Ie.width+(Re?10:0)},barWidth:P,setRef:function(At){Be.scrollX=At},setScrollX:function(At){we("left",At),ee(Be,At)}})},[Ie.width,se]);function Ge(vt){if(!vt.target.closest(".scrollInTable")){var At=Math.abs(vt.deltaX)>Math.abs(vt.deltaY)?"x":"y",yt=J.current.querySelector(".scroll-x"),st=J.current.querySelector(".scroll-y");if(At==="x"){var St=Be.left+vt.deltaX;yt&&(yt.scrollLeft=St),vt.preventDefault(),vt.stopPropagation()}else if(At==="y"){var Qe=Be.top+vt.deltaY;st&&(st.scrollTop=Qe)}st&&(vt.preventDefault(),vt.stopPropagation())}}function pt(vt){if(!window.disableTableScroll){var At=Math.abs(vt.deltaY)>Math.abs(vt.deltaX);Ne("leftForHammer",Ae.leftForHammer+Ae.lastPandeltaX-vt.deltaX),Ne("topForHammer",Ae.topForHammer+Ae.lastPandeltaY-vt.deltaY),Ne("lastPandeltaX",vt.deltaX),Ne("lastPandeltaY",vt.deltaY);var yt=J.current.querySelector(".scroll-x"),st=J.current.querySelector(".scroll-y");At?st&&(st.scrollTop=Ae.topForHammer):yt&&(yt.scrollLeft=Ae.leftForHammer)}}function ot(vt){Ne("lastPandeltaX",0),Ne("lastPandeltaY",0)}return(0,y.useImperativeHandle)(w,function(){return{dom:J,forceUpdate:ke,setScroll:function(At,yt){var st=J.current.querySelector(".scroll-x"),St=J.current.querySelector(".scroll-y");!d().isUndefined(At)&&st&&(st.scrollLeft=At),!d().isUndefined(yt)&&St&&(St.scrollTop=yt)}}}),(0,y.useEffect)(function(){(0,o.get)(Be,"scrollX.scrollLeft")&&ee(Be,(0,o.get)(Be,"scrollX.scrollLeft"))},[N]),(0,y.useEffect)(function(){return Be.didMount=!0,document.body.style.overscrollBehaviorX="none",J.current.addEventListener("wheel",Ge),me.current=new(H())(J.current,{inputClass:H().TouchInput}),Ne("leftForHammer",d().get(J.current.querySelector(".scroll-x"),"scrollLeft")||0),Ne("topForHammer",d().get(J.current.querySelector(".scroll-y"),"scrollTop")||0),Ne("lastPandeltaX",0),Ne("lastPandeltaY",0),me.current.get("pan").set({direction:Y?H().DIRECTION_HORIZONTAL:H().DIRECTION_ALL}),me.current.on("panmove",pt),me.current.on("panend",ot),Ce&&J.current.querySelector(".scroll-x")&&(J.current.querySelector(".scroll-x").scrollLeft=Ce),function(){J.current.removeEventListener("wheel",Ge),me.current&&(me.current.off("panmove",pt),me.current.off("panend",ot),me.current.destroy())}},[]),y.createElement(b,{ref:J,className:F,style:{width:X,height:pe?ue:ve}},We,oe&&oe.comp&&y.createElement("div",{style:{position:"absolute",left:0,width:X,height:oe.height-2,bottom:ge?P:0}},oe.comp),Re&&Ve,ge&&it,N&&y.createElement("div",{style:{position:"absolute",top:x,width:"100%",height:"calc(100% - "+x+"px)",overflow:"hidden",backgroundColor:"#fff"}},y.createElement(f.Z,{style:{flex:1},direction:"column",widths:["30%","40%","90%","60%"],active:!0,itemStyle:{marginBottom:"10px"}})),!N&&i===0&&!K&&Ee({style:(0,ce.default)({top:x},ge?{height:"auto",bottom:P}:{})}))}ie.propTypes={width:a.number.isRequired,height:a.number.isRequired,columnCount:a.number.isRequired,rowCount:a.number.isRequired,rowHeight:a.number.isRequired,getColumnWidth:a.func.isRequired,renderCell:a.func.isRequired,disablePanVertical:a.bool};const le=(0,y.forwardRef)(ie)},37888:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>te});var ce=t(88239),g=t(42723),p=t(67294),L=t(50387);function te(R){var y=R.properties,a=(0,g.Z)(R,["properties"]);return typeof R.children=="string"&&R.children.length>1e3?R.children:p.createElement(L.Z,(0,ce.default)({},a,{componentDecorator:function(o,d){return p.createElement("a",(0,ce.default)({},y,{href:o}),d)}}),R.children)}},40516:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>f});var ce=t(88239),g=t(6538),p=t.n(g),L=t(14321),te=t(86735),R=t(67294),y=t(71893);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(43792);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(19458);if(!/^(1887|7596|7798)$/.test(t.j))var o=t(13681);if(!/^(1887|7596|7798)$/.test(t.j))var d=t(2e3);var Z=(0,te.Z)([`
  border: none !important;
  width: 100%;
  box-shadow: none !important;
  outline: none !important;
  * {
    box-shadow: none !important;
    outline: none !important;
  }
`],[`
  border: none !important;
  width: 100%;
  box-shadow: none !important;
  outline: none !important;
  * {
    box-shadow: none !important;
    outline: none !important;
  }
`]),H=getCookie("i18n_langtag")||md.global.Config.DefaultLang,U=(0,y.ZP)(L.default.RangePicker)(Z);function f(V){return R.createElement(U,(0,ce.default)({locale:H==="en"?o.Z:H==="ja"?d.Z:H==="zh-Hant"?r.Z:a.Z},V))}},17206:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>U});var ce=t(88239),g=t(12424),p=t(42723),L=t(67294),te=t(54527),R=t.n(te),y=t(45697),a=t.n(y),r=t(30381),o=t.n(r),d=function(V,C){return V?V=new Date(o()(V)):C?V=new Date(o()().set({m:0,s:0})):V=new Date,V},Z=function(V){return moment(V).minute()},H=function(V){return moment(V).second()};function U(f){var V=f.isOpen,C=f.customHeader,O=f.value,n=f.onSelect,s=f.onCancel,j=f.precision,A=j===void 0?"second":j,S=f.confirmText,I=f.cancelText,c=f.minuteStep,q=(0,p.Z)(f,["isOpen","customHeader","value","onSelect","onCancel","precision","confirmText","cancelText","minuteStep"]),b=(0,L.useState)(d(O,c)),k=(0,g.Z)(b,2),ee=k[0],re=k[1],ie={format:"YYYY "+_l("\u5E74"),caption:"Year",step:1},le={format:"MM "+_l("\u6708"),caption:"Mon",step:1},E={format:"DD "+_l("\u65E5"),caption:"Day",step:1},w={format:"hh "+_l("\u65F6"),caption:"Hour",step:1},K={format:"mm "+_l("\u5206"),caption:"Min",step:c||1},N={format:"ss"+_l("\u79D2"),caption:"Second",step:1},F={year:{year:ie},month:{year:ie,month:le},date:{year:ie,month:le,date:E},hour:{year:ie,month:le,date:E,hour:w},minite:{year:ie,month:le,date:E,hour:w,minute:K},second:{year:ie,month:le,date:E,hour:w,minute:K,second:N}};return L.createElement(R(),(0,ce.default)({customHeader:C,isOpen:V,dateConfig:F[A],theme:"ios",value:ee,onSelect:n,onCancel:s,confirmText:S||_l("\u786E\u8BA4"),cancelText:I||_l("\u79FB\u9664"),onChange:function(z){if(c!==1){var X=o()(z).minute();o()(z).isBefore(o()(ee))&&X%c?re(new Date(o()(z).set({m:X-X%c}))):o()(ee).isBefore(o()(z))&&X%c?re(new Date(o()(z).set({m:X-X%c+c}))):re(z)}}},q))}U.propTypes={isOpen:a().bool,customHeader:a().element,value:a().any,onSelect:a().func,onCancel:a().func,showType:a().string,precision:a().string,confirmText:a().element,cancelText:a().element}},42057:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>q});var ce=t(11378),g=t.n(ce),p=t(56697),L=t(42185),te=t(52945),R=t.n(te),y=t(88239),a=t(12424),r=t(86735),o=t(67294),d=t(45697),Z=t.n(d),H=t(71893),U=t(22177),f=t(6653),V=t(96486),C=t.n(V),O=(0,r.Z)([`
  z-index: 2;
  position: absolute;
  right: 40px;
  top: 0;
`],[`
  z-index: 2;
  position: absolute;
  right: 40px;
  top: 0;
`]),n=(0,r.Z)([`
  cursor: pointer;
  font-size: 20px;
  line-height: 40px;
  text-align: center;
  color: #9e9e9e;
  &:hover {
    color: #2196f3;
  }
`],[`
  cursor: pointer;
  font-size: 20px;
  line-height: 40px;
  text-align: center;
  color: #9e9e9e;
  &:hover {
    color: #2196f3;
  }
`]),s=(0,r.Z)([`
  height: 30px;
  width: 40px;
  text-align: center;
`],[`
  height: 30px;
  width: 40px;
  text-align: center;
`]),j=(0,r.Z)([`
  margin-top: 20px;
  text-align: right;
`],[`
  margin-top: 20px;
  text-align: right;
`]),A=H.ZP.div(O),S=H.ZP.div(n),I=H.ZP.div(s),c=H.ZP.div(j);function q(b){var k=b.allowScale,ee=b.fullScreen,re=b.visible,ie=b.dislocate,le=b.closeSize,E=le===void 0?40:le,w=b.verticalAlign,K=b.iconButtons,N=K===void 0?[]:K,F=b.closeIcon,h=b.okDisabled,z=b.onCancel,X=(0,o.useRef)(),B=b.width,x=b.onOk||b.okText||b.cancelText,Q=(0,o.useState)(0),i=(0,a.Z)(Q,2),m=i[0],v=i[1],W=(0,o.useState)(localStorage.getItem("NEW_RECORD_IS_LARGE")==="true"),P=(0,a.Z)(W,2),u=P[0],l=P[1];k&&u&&(B=window.innerWidth>1600?1600:window.innerWidth-32*2);var T={footer:null},G=(0,y.default)({},T,(0,y.default)({className:"mdModal",wrapClassName:"mdModalWrap",transitionName:"none",maskTransitionName:"none",centered:!0,keyboard:!1,maskClosable:!1},b,{width:B}));return G.closeIcon=C().isUndefined(F)?o.createElement("i",{style:C().assign({display:"inline-block",width:E,height:E,lineHeight:E+"px"},b.closeStyle),className:"ming Icon icon-default icon icon-close Gray_9e Font22"}):F,G.className="mdModal "+(b.className||""),G.style=R()(b.style||{},{transform:"translate("+m+"px, 0px)",transition:"width 0.4s ease"}),G.maskStyle={backgroundColor:"rgba(0, 0, 0, .7)"},G.bodyStyle=R()(b.bodyStyle||{},{}),(0,o.useEffect)(function(){if(window.dislocateCount=window.dislocateCount||0,window.dislocateCount>0&&!document.querySelectorAll(".mdModal").length&&(window.dislocateCount=0),ie&&re){var D=window.dislocateCount*10,M=B<1600?32:(window.innerWidth-B)/2;D>M&&(D=M),v(D),window.dislocateCount=window.dislocateCount+1}},[re]),(0,o.useEffect)(function(){if(X.current)try{X.current.parentElement.parentElement.style.maxHeight=window.innerHeight-32+"px"}catch(M){}var D=Math.random()*Math.random();return window.closeFns&&(window.closeindex=(window.closeindex||0)+1,window.closeFns[D]={id:D,className:b.className,index:window.closeindex,fn:G.onCancel}),function(){ie&&(window.dislocateCount=window.dislocateCount-1),window.closeFns&&delete window.closeFns[D]}},[]),b.type==="fixed"&&(G.style.height=window.innerHeight-32*2,G.className=G.className+" fixed",w&&(G.style.verticalAlign=w,w!=="middle"&&(G.style.height=window.innerHeight-32)),k&&u&&(G.style.height=window.innerHeight-32)),x&&!G.footer&&(G.footer=o.createElement(c,null,o.createElement(L.ZP,{type:"link",onClick:b.onCancel||C().noop},b.cancelText||_l("\u53D6\u6D88")),o.createElement(L.ZP,{type:"primary",disabled:h,onClick:b.onOk||C().noop},b.okText||_l("\u786E\u5B9A")))),ee&&(G.className=G.className+" fullScreen",G.style.height=window.innerHeight,G.style.width=window.innerWidth,G.style.maxWidth="unset",G.style.verticalAlign="middle",G.width=window.innerWidth),o.createElement(p.Z,(0,y.default)({},G,{onCancel:function(M){z(M,"click")}}),o.createElement("div",{ref:X}),o.createElement(A,{className:"flexRow"},N.map(function(D,M){return o.createElement(S,{key:M,onClick:D.onClick},o.createElement(I,{"data-tip":D.tip},o.createElement("i",{className:"icon "+D.icon})))}),k&&o.createElement(S,{onClick:function(){safeLocalStorageSetItem("NEW_RECORD_IS_LARGE",!u),l(!u)}},o.createElement(I,{"data-tip":u?_l("\u7F29\u5C0F"):_l("\u653E\u5927")},o.createElement("i",{className:"icon icon-"+(u?"worksheet_narrow":"worksheet_enlarge")})))),o.createElement(U.Z,null,b.children))}q.propTypes={allowScale:Z().bool,fullScreen:Z().bool,verticalAlign:Z().string,visible:Z().bool,okDisabled:Z().bool,width:Z().number,dislocate:Z().bool,type:Z().string,className:Z().string,style:Z().shape({}),closeStyle:Z().shape({}),closeSize:Z().number,bodyStyle:Z().shape({}),children:Z().node,cancelText:d.string,okText:d.string,onCancel:Z().func,onOk:Z().func}},12759:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>ie});var ce=t(85105),g=t.n(ce),p=t(99663),L=t(22600),te=t(49135),R=t(93196),y=t(45697),a=t.n(y),r=t(67294),o=t(27324),d=t(33867),Z=function(le){(0,R.default)(E,le);function E(){var w,K,N,F;(0,p.default)(this,E);for(var h=arguments.length,z=Array(h),X=0;X<h;X++)z[X]=arguments[X];return F=(K=(N=(0,te.default)(this,(w=E.__proto__||g()(E)).call.apply(w,[this].concat(z))),N),N.buttonOnClick=function(B,x){N.props.buttonOnClick&&N.props.buttonOnClick(B,x)},K),(0,te.default)(N,F)}return(0,L.default)(E,[{key:"render",value:function(){var K=this,N=this.props.time,F=N.getFullYear(),h=F.toString(),z=parseInt(F/10,10),X=(z*10).toString(),B=((z+1)*10-1).toString(),x=N.getMonth()+1,Q=x.toString(),i=N.getDate(),m=i<10?"0"+i.toString():i.toString(),v=[];return this.props.view==="year"&&v.push(r.createElement("span",{key:"year-range",className:"year"},X," ~ ",B)),this.props.view==="month"&&v.push(r.createElement("button",{key:"year",className:"year ThemeHoverColor3",onClick:function(P){P.nativeEvent.stopImmediatePropagation(),K.buttonOnClick(P,"year")}},h,_l("\u5E74"))),this.props.view==="date"&&(this.props.prefix&&v.push(r.createElement("span",{key:"prefix",className:"year"},this.props.prefix)),v.push([r.createElement("button",{key:"year",className:"year ThemeHoverColor3",onClick:function(P){P.nativeEvent.stopImmediatePropagation(),K.buttonOnClick(P,"year")}},_l("%0\u5E74",h)),r.createElement("button",{key:"month",className:"month ThemeHoverColor3",onClick:function(P){P.nativeEvent.stopImmediatePropagation(),K.buttonOnClick(P,"month")}},_l("%0\u6708",Q))])),r.createElement("div",{className:"mui-datepicker-header"},r.createElement("div",{className:"time"},v),r.createElement("div",{className:"pager"},r.createElement("button",{className:"prev ThemeHoverColor3",onClick:function(P){P.nativeEvent.stopImmediatePropagation(),K.buttonOnClick(P,"prev")}},r.createElement(d.Z,{icon:"arrow-left-border"})),r.createElement("button",{className:"now ThemeHoverColor3",onClick:function(P){P.nativeEvent.stopImmediatePropagation(),K.buttonOnClick(P,"now")}},r.createElement(d.Z,{icon:"circle"})),r.createElement("button",{className:"next ThemeHoverColor3",onClick:function(P){P.nativeEvent.stopImmediatePropagation(),K.buttonOnClick(P,"next")}},r.createElement(d.Z,{icon:"arrow-right-border"}))))}}]),E}(r.Component);Z.propTypes={view:a().oneOf(["date","month","year"]),time:a().any,prefix:a().string,buttonOnClick:a().func};const H=Z;var U=function(le){(0,R.default)(E,le);function E(){var w,K,N,F;(0,p.default)(this,E);for(var h=arguments.length,z=Array(h),X=0;X<h;X++)z[X]=arguments[X];return F=(K=(N=(0,te.default)(this,(w=E.__proto__||g()(E)).call.apply(w,[this].concat(z))),N),N.itemOnClick=function(B,x){x.disabled?(B.preventDefault(),B.stopPropagation()):N.props.onPick&&N.props.onPick(B,x.value,x.time)},N.renderHeadList=function(){var B=N.props.headData.map(function(x,Q,i){return r.createElement("th",{key:Q},x)});return B},N.renderBodyList=function(){var B=N.props.bodyData.map(function(x,Q,i){var m=x.map(function(v,W,P){var u=[],l=[];v.other&&u.push("other"),v.disabled&&u.push("disabled"),v.current&&(u.push("current"),l.push("ThemeBGColor3")),v.inRange&&(u.push("in-range"),u.push("ThemeBeforeBGColor6"),v.start&&u.push("cell-start"),v.end&&u.push("cell-end"),v.left&&u.push("cell-left"),v.right&&u.push("cell-right")),v.now&&(u.push("now"),u.push("ThemeColor3"));var T=u.join(" "),G=l.join(" ");return r.createElement("td",{key:W,className:T,onClick:function(M){M.nativeEvent.stopImmediatePropagation(),N.itemOnClick(M,v)}},r.createElement("div",{className:G},v.label))});return r.createElement("tr",{key:Q},m)});return B},K),(0,te.default)(N,F)}return(0,L.default)(E,[{key:"render",value:function(){var K=this.renderHeadList(),N=this.renderBodyList();return r.createElement("table",{className:"date"},r.createElement("thead",null,r.createElement("tr",null,K)),r.createElement("tbody",null,N))}}]),E}(r.Component);U.propTypes={headData:a().any,bodyData:a().any,onPick:a().func},U.defaultProps={headData:[],bodyData:[],onPick:function(E,w,K){}};const f=U;var V=function(le){(0,R.default)(E,le);function E(){var w,K,N,F;(0,p.default)(this,E);for(var h=arguments.length,z=Array(h),X=0;X<h;X++)z[X]=arguments[X];return F=(K=(N=(0,te.default)(this,(w=E.__proto__||g()(E)).call.apply(w,[this].concat(z))),N),N.itemOnClick=function(B,x){x.disabled?(B.preventDefault(),B.stopPropagation()):N.props.onPick&&N.props.onPick(B,x.value,x.time)},N.renderBodyList=function(){var B=N.props.bodyData.map(function(x,Q,i){var m=x.map(function(v,W,P){var u=[];v.disabled&&u.push("disabled"),v.current&&(u.push("current"),u.push("ThemeBGColor3")),v.inRange&&u.push("in-range"),v.now&&(u.push("now"),u.push("ThemeColor3"));var l=u.join(" ");return r.createElement("td",{key:W,className:l,onClick:function(G){G.nativeEvent.stopImmediatePropagation(),N.itemOnClick(G,v)}},v.label)});return r.createElement("tr",{key:Q},m)});return B},K),(0,te.default)(N,F)}return(0,L.default)(E,[{key:"render",value:function(){var K=this.renderBodyList();return r.createElement("table",{className:"month"},r.createElement("tbody",null,K))}}]),E}(r.Component);V.propTypes={bodyData:a().any,onPick:a().func},V.defaultProps={bodyData:[],onPick:function(E,w,K){}};const C=V;var O=function(le){(0,R.default)(E,le);function E(){var w,K,N,F;(0,p.default)(this,E);for(var h=arguments.length,z=Array(h),X=0;X<h;X++)z[X]=arguments[X];return F=(K=(N=(0,te.default)(this,(w=E.__proto__||g()(E)).call.apply(w,[this].concat(z))),N),N.itemOnClick=function(B,x){x.disabled?(B.preventDefault(),B.stopPropagation()):N.props.onPick&&N.props.onPick(B,x.value,x.time)},N.renderBodyList=function(){var B=N.props.bodyData.map(function(x,Q,i){var m=x.map(function(v,W,P){var u=[];v.disabled&&u.push("disabled"),v.current&&(u.push("current"),u.push("ThemeBGColor3")),v.other&&u.push("other"),v.inRange&&u.push("in-range"),v.now&&(u.push("now"),u.push("ThemeColor3"));var l=u.join(" ");return r.createElement("td",{key:W,className:l,onClick:function(G){G.nativeEvent.stopImmediatePropagation(),N.itemOnClick(G,v)}},v.label)});return r.createElement("tr",{key:Q},m)});return B},K),(0,te.default)(N,F)}return(0,L.default)(E,[{key:"render",value:function(){var K=this.renderBodyList();return r.createElement("table",{className:"year"},r.createElement("tbody",null,K))}}]),E}(r.Component);O.propTypes={bodyData:a().any,onPick:a().func},O.defaultProps={bodyData:[],onPick:function(E,w,K){}};const n=O;var s=t(30381),j=t.n(s),A,S,I,c=(S=A=function(le){(0,R.default)(E,le);function E(w){(0,p.default)(this,E);var K=(0,te.default)(this,(E.__proto__||g()(E)).call(this,w));return I.call(K),K.state={weekList:[],dateList:[],monthList:[],yearList:[]},K}return(0,L.default)(E,[{key:"componentWillMount",value:function(){this.generateList(this.props)}},{key:"componentWillReceiveProps",value:function(K){this.generateList(K)}},{key:"render",value:function(){var K=this.renderContent();return r.createElement("div",{className:"mui-calender"},K)}}]),E}(r.Component),I=function(){var E=this;this.generateWeekList=function(w){console.log(j());for(var K=[0,1,2,3,4,5,6].map(function(X){return j()().day(X).format("dd")}),N=w.firstDayOfWeek,F=[],h=0;h<7;){var z=N+h>=7?N+h-7:N+h;F.push(K[z]),h=h+1}return F},this.generateDates=function(w,K,N,F,h,z){for(var X=[],B=0;B<=z-h;){var x=h+B,Q=new Date(N,F,x),i=!o.Z.dateInRange(Q,w.min,w.max),m=!1;w.range&&(m=o.Z.dateInRange(Q,w.value[0],w.value[1])),!w.range&&w.value.getFullYear()===N&&w.value.getMonth()===F&&w.value.getDate()===x&&(m=!0);var v=!1;w.selectedRange&&(v=o.Z.dateInRange(Q,w.selectedRange[0],w.selectedRange[1]));var W=!1,P=new Date;P.getFullYear()===N&&P.getMonth()===F&&P.getDate()===x&&(W=!0),X.push({time:Q,value:x,label:x.toString(),other:K,disabled:i,current:m,inRange:v,now:W}),B=B+1}return X},this.generateDateList=function(w){for(var K=w.cursor,N=K.getFullYear(),F=K.getMonth(),h=o.Z.daysOfMonth(N,F),z=E.generateDates(w,!1,N,F,1,h),X=F<=0?N-1:N,B=F<=0?11:F-1,x=o.Z.daysOfMonth(X,B),Q=new Date(N,F,1).getDay(),i=w.firstDayOfWeek===0?6:w.firstDayOfWeek-1,m=Q===0?6:Q-1,v=m-i<=0?7+(m-i):m-i,W=E.generateDates(w,-1,X,B,x-v+1,x),P=F>=11?N+1:N,u=F>=11?0:F+1,l=7*6-v-h,T=E.generateDates(w,1,P,u,1,l),G=[],D=W.concat(z,T),M=0,se=null,ae=function(){var de=D.slice(7*M,7*(M+1));de.map(function(Ce,he){if(Ce.current&&Ce.inRange&&(de[he].start=E.props.part==="start",de[he].end=E.props.part==="end",w.selectedRange)){var fe=w.selectedRange[0],Ee=w.selectedRange[1];fe.getFullYear()===Ee.getFullYear()&&fe.getMonth()===Ee.getMonth()&&fe.getDate()===Ee.getDate()&&(de[he].start=!0,de[he].end=!0)}return Ce.inRange&&(he===0||he>0&&!se.inRange)&&(de[he].left=!0),Ce.inRange&&(he===6||he<6&&!de[he+1].inRange)&&(de[he].right=!0),se=Ce,null}),G.push(de),M=M+1};M<6;)ae();return G},this.generateMonthList=function(w){for(var K=[],N=w.cursor.getFullYear(),F=w.cursor.getMonth(),h=0;h<12;){var z=new Date(N,h,1),X=!o.Z.monthInRange(z,w.min,w.max),B=!1;w.range&&(B=o.Z.monthInRange(z,w.value[0],w.value[1])),!w.range&&w.value.getFullYear()===N&&w.value.getMonth()===h&&(B=!0);var x=!1;w.selectedRange&&(x=o.Z.monthInRange(z,w.selectedRange[0],w.selectedRange[1]));var Q=!1,i=new Date;i.getFullYear()===N&&i.getMonth()===F&&F===h&&(Q=!0),K.push({time:z,value:h,label:_l("%0\u6708",h+1),disabled:X,current:B,inRange:x,now:Q}),h=h+1}for(var m=[],v=0;v<3;){var W=K.slice(4*v,4*(v+1));m.push(W),v=v+1}return m},this.generateYearList=function(w){for(var K=[],N=w.cursor.getFullYear(),F=parseInt(N/10,10),h=F*10-1,z=0;z<12;){var X=h+z,B=new Date(X,0,1),x=!1;(w.min&&X<w.min.getFullYear()||w.max&&X>w.max.getFullYear())&&(x=!0);var Q=!1;w.range&&(Q=X>=w.value[0].getFullYear()&&X<=w.value[1].getFullYear()),w.range||(Q=w.value.getFullYear()===X);var i=!1;w.selectedRange&&(i=X>=w.selectedRange[0].getFullYear()&&X<=w.selectedRange[1].getFullYear());var m=new Date().getFullYear()===X,v=z===0||z===11;K.push({time:B,value:X,label:X.toString(),disabled:x,current:Q,inRange:i,other:v,now:m}),z=z+1}for(var W=[],P=0;P<3;){var u=K.slice(4*P,4*(P+1));W.push(u),P=P+1}return W},this.generateList=function(w){var K={weekList:E.generateWeekList(w),dateList:E.generateDateList(w),monthList:E.generateMonthList(w),yearList:E.generateYearList(w)};E.setState(K)},this.onPick=function(w,K,N,F){E.props.onPick&&E.props.onPick(w,K,N,F)},this.renderContent=function(){var w=null;return E.props.mode==="date"?w=r.createElement(f,{headData:E.state.weekList,bodyData:E.state.dateList,onPick:function(N,F,h){E.onPick(N,"date",F,h)}}):E.props.mode==="month"?w=r.createElement(C,{bodyData:E.state.monthList,onPick:function(N,F,h){E.onPick(N,"month",F,h)}}):E.props.mode==="year"&&(w=r.createElement(n,{bodyData:E.state.yearList,onPick:function(N,F,h){E.onPick(N,"year",F,h)}})),w}},S);c.propTypes={mode:a().oneOf(["date","month","year"]),range:a().bool,part:a().oneOf(["","start","end"]),firstDayOfWeek:a().oneOf([0,1,2,3,4,5,6]),min:a().any,max:a().any,value:a().any,selectedRange:a().any,cursor:a().any,onPick:a().func},c.defaultProps={mode:"date",range:!1,part:"",firstDayOfWeek:1,min:null,max:null,value:new Date,cursor:new Date,onPick:function(E,w,K,N){}};const q=c;var b,k,ee,re=(k=b=function(le){(0,R.default)(E,le);function E(w){(0,p.default)(this,E);var K=(0,te.default)(this,(E.__proto__||g()(E)).call(this,w));ee.call(K);var N=K.generateState(w);return N.step=1,K.state=N,K}return(0,L.default)(E,[{key:"componentWillReceiveProps",value:function(K){this.setState(this.generateState(K))}},{key:"render",value:function(){var K=this;return r.createElement("div",{className:"mui-datepickerbase"},r.createElement(H,{view:this.state.mode,time:this.state.cursor,prefix:this.props.prefix,buttonOnClick:function(F,h){K.headerButtonOnClick(F,h)}}),r.createElement(q,{mode:this.state.mode,range:this.props.range,part:this.props.part,firstDayOfWeek:this.props.firstDayOfWeek,min:this.props.min,max:this.props.max,value:this.state.value,selectedRange:this.props.selectedRange,cursor:this.state.cursor,onPick:function(F,h,z,X){K.calenderOnPick(F,h,z,X)}}))}}]),E}(r.Component),ee=function(){var E=this;this.generateState=function(w){var K=w.value||(w.range?[new Date,new Date]:new Date),N={mode:w.type,value:K,cursor:w.range?K[0]:K};return N},this.headerButtonOnClick=function(w,K){var N={};if((K==="year"||K==="month"||K==="date")&&(N.mode=K),K==="now"&&(N.cursor=new Date),E.state.mode==="date"&&(K==="prev"?N.cursor=o.Z.prevMonth(E.state.cursor):K==="next"&&(N.cursor=o.Z.nextMonth(E.state.cursor))),E.state.mode==="month"){var F=E.state.cursor.getFullYear();K==="prev"?(N.cursor=new Date(E.state.cursor),N.cursor.setFullYear(F-1)):K==="next"&&(N.cursor=new Date(E.state.cursor),N.cursor.setFullYear(F+1))}if(E.state.mode==="year"){var h=E.state.cursor.getFullYear();K==="prev"?(N.cursor=new Date(E.state.cursor),N.cursor.setFullYear(h-10)):K==="next"&&(N.cursor=new Date(E.state.cursor),N.cursor.setFullYear(h+10))}E.setState(N)},this.calenderOnPick=function(w,K,N,F){var h=new Date(E.state.cursor),z=E.state.mode;K==="date"?h=F:K==="month"?(h.setFullYear(h.getFullYear(),N,1),E.props.type==="date"&&(z="date")):K==="year"&&(h.setFullYear(N),(E.props.type==="date"||E.props.type==="month")&&(z="month"));var X={mode:z,cursor:h};E.props.type===K&&(X.value=h,E.props.onChange&&E.props.onChange(w,h)),E.setState(X)}},k);re.propTypes={type:a().oneOf(["date","month","year"]),range:a().bool,part:a().oneOf(["","start","end"]),firstDayOfWeek:a().oneOf([0,1,2,3,4,5,6]),min:a().any,max:a().any,value:a().any,selectedRange:a().any,prefix:a().string,onChange:a().func},re.defaultProps={type:"date",range:!1,part:"",firstDayOfWeek:1,min:null,max:null,prefix:"",onChange:function(E,w){}};const ie=re},94796:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>re});var ce=t(85105),g=t.n(ce),p=t(99663),L=t(22600),te=t(49135),R=t(93196),y=t(45697),a=t.n(y),r=t(67294),o=t(30381),d=t.n(o),Z=t(12759),H=t(46665),U=t(27324),f=t(60967),V=t(42185),C=t(31546),O=t(96486),n=t.n(O),s,j,A,S=(j=s=function(ie){(0,R.default)(le,ie);function le(E){(0,p.default)(this,le);var w=(0,te.default)(this,(le.__proto__||g()(le)).call(this,E));return A.call(w),w.state=w.generateState(E),w}return(0,L.default)(le,[{key:"componentWillReceiveProps",value:function(w){this.setState(this.generateState(w))}},{key:"render",value:function(){var w=this,K=["mui-datetimerangepicker"];this.props.show&&K.push("show");var N=K.join(" "),F=this.props.type==="datetime"||this.props.type==="half"?"date":this.props.type,h=null;this.props.partial&&(h=r.createElement("div",{className:"mui-datetimerangepicker-row partial"},r.createElement("div",{className:"mui-datetimerangepicker-col"},r.createElement(f.Z,{type:"checkbox",checked:this.state.partialStart,onClick:function(){w.checkboxOnChange("partialStart")}},_l("\u5F00\u59CB\u65F6\u95F4"))),r.createElement("div",{className:"mui-datetimerangepicker-col"},r.createElement(f.Z,{type:"checkbox",checked:this.state.partialEnd,onClick:function(){w.checkboxOnChange("partialEnd")}},_l("\u7ED3\u675F\u65F6\u95F4")))));var z=null,X=null,B=[{value:"AM",text:"AM"},{value:"PM",text:"PM"}];this.props.type==="datetime"?(z=[r.createElement("span",{className:"label"},_l("\u65F6\u95F4")),r.createElement(H.Z,{type:this.props.timeType,min:this.state.startTime.min,max:this.state.startTime.max,value:this.state.startTime.value,onChange:function(i,m){w.timeOnChange(i,m,0)}})],X=[r.createElement("span",{className:"label"},_l("\u65F6\u95F4")),r.createElement(H.Z,{type:this.props.timeType,min:this.state.endTime.min,max:this.state.endTime.max,value:this.state.endTime.value,onChange:function(i,m){w.timeOnChange(i,m,1)}})]):this.props.type==="half"&&(z=r.createElement(C.Z,{value:this.state.halfData[0],data:B,onChange:function(i){w.halfOnChange(i,"start")}}),X=r.createElement(C.Z,{value:this.state.halfData[1],data:B,onChange:function(i){w.halfOnChange(i,"end")}}));var x=null;return this.props.allowClear&&(x=r.createElement(V.ZP,{type:"link",size:"small",onClick:function(i){w.buttonOnClick(i,"clear")}},_l("\u6E05\u7A7A"))),r.createElement("div",{className:N},h,r.createElement("div",{className:"mui-datetimerangepicker-row"},r.createElement("div",{className:"mui-datetimerangepicker-col"},r.createElement(Z.Z,{type:F,part:"start",firstDayOfWeek:this.props.firstDayOfWeek,min:this.props.min,max:this.props.max,value:this.state.value[0],selectedRange:this.state.value,prefix:_l("\u5F00\u59CB:"),onChange:function(i,m){w.onPick(i,m,0)}})),r.createElement("div",{className:"mui-datetimerangepicker-col"},r.createElement(Z.Z,{type:F,part:"end",firstDayOfWeek:this.props.firstDayOfWeek,min:this.props.min,max:this.props.max,value:this.state.value[1],selectedRange:this.state.value,prefix:_l("\u7ED3\u675F:"),onChange:function(i,m){w.onPick(i,m,1)}}))),r.createElement("div",{className:"mui-datetimerangepicker-row toolbar"},r.createElement("div",{className:"mui-datetimerangepicker-col"},z),r.createElement("div",{className:"mui-datetimerangepicker-col"},X,x,r.createElement(V.ZP,{type:"primary",size:"small",onClick:function(i){w.buttonOnClick(i,"ok")}},_l("\u786E\u5B9A")))))}}]),le}(r.Component),A=function(){var le=this;this.generateState=function(E){var w=new Date,K=new Date(w.getFullYear(),w.getMonth(),w.getDate(),9),N=new Date(w.getFullYear(),w.getMonth(),w.getDate(),18),F=[le.state&&le.state.value?le.state.value[0]:K,le.state&&le.state.value?le.state.value[1]:N];E.value[0]&&(F[0]=E.value[0]),E.value[1]&&(F[1]=E.value[1]);var h=["AM","PM"];E.type==="half"&&(h=[E.halfStart,E.halfEnd]);var z={value:F,startTime:le.getTimeData({hour:F[0].getHours(),minute:F[0].getMinutes(),second:F[0].getSeconds()},E,F[0]),endTime:le.getTimeData({hour:F[1].getHours(),minute:F[1].getMinutes(),second:F[1].getSeconds()},E,F[1]),partialStart:E.config.start||!1,partialEnd:E.config.end||!1,halfData:h};return z},this.getTimeData=function(E,w,K){return{min:w.min&&U.Z.isSameDate(K,w.min)?{hour:w.min.getHours(),minute:w.min.getMinutes(),second:w.min.getSeconds()}:null,max:w.max&&U.Z.isSameDate(K,w.max)?{hour:w.max.getHours(),minute:w.max.getMinutes(),second:w.max.getSeconds()}:null,value:{hour:E.hour,minute:E.minute,second:E.second}}},this.onPick=function(E,w,K){var N=[le.state.value[0],le.state.value[1]];N[K]=w,le.dateOnChange(E,N,K)},this.dateOnChange=function(E,w,K){var N=new Date(le.state.value[0]);N.setFullYear(w[0].getFullYear(),w[0].getMonth(),w[0].getDate());var F={hour:N.getHours(),minute:N.getMinutes(),second:N.getSeconds()},h=new Date(le.state.value[1]);h.setFullYear(w[1].getFullYear(),w[1].getMonth(),w[1].getDate());var z={hour:h.getHours(),minute:h.getMinutes(),second:h.getSeconds()},X=le.getTimeData(F,le.props,N),B=le.getTimeData(z,le.props,h);le.props.type==="datetime"&&(X.min&&U.Z.isSameDate(N,le.props.min)&&U.Z.isTimeEarly(F,X.min)&&(N.setHours(X.min.hour),N.setMinutes(X.min.minute),N.setSeconds(X.min.second),X.value=X.min),X.max&&U.Z.isSameDate(N,le.props.max)&&U.Z.isTimeLater(F,X.max)&&(N.setHours(X.max.hour),N.setMinutes(X.max.minute),N.setSeconds(X.max.second),X.value=X.max),B.min&&U.Z.isSameDate(h,le.props.min)&&U.Z.isTimeEarly(z,B.min)&&(h.setHours(B.min.hour),h.setMinutes(B.min.minute),h.setSeconds(B.min.second),B.value=B.min),B.max&&U.Z.isSameDate(h,le.props.max)&&U.Z.isTimeLater(z,B.max)&&(h.setHours(B.max.hour),h.setMinutes(B.max.minute),h.setSeconds(B.max.second),B.value=B.max)),le.setState({value:[N,h],startTime:X,endTime:B,partialStart:!le.state.partialStart&&K===0?!0:le.state.partialStart,partialEnd:!le.state.partialEnd&&K===1?!0:le.state.partialEnd},function(){le.props.onSelect&&le.props.onSelect([le.state.partialStart?d()(N):"",le.state.partialEnd?d()(h):""])})},this.timeOnChange=function(E,w,K,N){var F=new Date(le.state.value[K]);F.setHours(w.hour),F.setMinutes(w.minute),F.setSeconds(w.second);var h=le.state.value;h[K]=F;var z=le.state.startTime,X=le.state.endTime;if(K===1?X=le.getTimeData(w,le.props,le.state.value[1]):z=le.getTimeData(w,le.props,le.state.value[0]),le.props.autoFillEndTime&&K===0&&d()(h[0]).format("YYYY-MM-DD")===d()(h[1]).format("YYYY-MM-DD")){h[1]=d()(h[0]).add(le.props.autoFillEndTime,"h").toDate(),X=n().cloneDeep(z);var B=X.value.hour+le.props.autoFillEndTime;X.value.hour=B>23?B-23:B}le.setState({value:h,startTime:z,endTime:X,partialStart:!le.state.partialStart&&K===0?!0:le.state.partialStart,partialEnd:!le.state.partialEnd&&K===1?!0:le.state.partialEnd,halfData:N||le.state.halfData},function(){le.props.onSelect&&le.props.onSelect([le.state.partialStart?d()(h[0]):"",le.state.partialEnd?d()(h[1]):""])})},this.buttonOnClick=function(E,w){if(le.props.onChange){var K=le.state.value||null;if(w==="ok"&&K&&K[0]&&K[0].getTime&&K[1]&&K[1].getTime){if(le.props.type==="half"&&U.Z.isSameDate(K[0],K[1])&&le.state.halfData[0]==="PM"&&le.state.halfData[1]==="AM"){alert(_l("\u7ED3\u675F\u65F6\u95F4\u4E0D\u80FD\u65E9\u4E8E\u5F00\u59CB\u65F6\u95F4"),3);return}if(K[0].getTime()>K[1].getTime()&&(le.props.partial&&le.state.partialStart&&le.state.partialEnd||!le.props.partial)){alert(_l("\u7ED3\u675F\u65F6\u95F4\u4E0D\u80FD\u65E9\u4E8E\u5F00\u59CB\u65F6\u95F4"),3);return}}K&&(K[0].setMilliseconds(0),K[1].setMilliseconds(0),le.props.timeType==="minute"&&(K[0].setSeconds(0),K[1].setSeconds(0),le.props.timeType==="hour"&&(K[0].setMinutes(0),K[1].setMinutes(0))));var N={start:!0,end:!0},F=null;K&&K.length===2&&(F=[d()(K[0]),d()(K[1])]),le.props.partial&&(N={start:le.state.partialStart,end:le.state.partialEnd},F=[le.state.partialStart?K&&K[0]&&d()(K[0]):null,le.state.partialEnd?K&&K[1]&&d()(K[1]):null]),le.props.onChange(E,K,N);var h=null;le.props.type==="half"&&(h=le.state.halfData),w==="ok"&&le.props.onOk&&le.props.onOk(F,h),w==="clear"&&le.props.onClear&&le.props.onClear()}},this.checkboxOnChange=function(E){var w={};w[E]=!le.state[E],le.setState(w)},this.halfOnChange=function(E,w){var K=le.state.halfData,N={hour:0,minute:0,second:0},F=0;w==="start"?(K[0]=E,E==="PM"&&(N={hour:12,minute:0,second:0})):(K[1]=E,F=1,E==="AM"?N={hour:12,minute:0,second:0}:N={hour:23,minute:59,second:59}),le.timeOnChange(null,N,F,K)}},j);S.propTypes={show:a().bool,type:a().oneOf(["year","month","date","datetime","half"]),timeType:a().oneOf(["hour","minute","second"]),halfStart:a().oneOf(["AM","PM"]),halfEnd:a().oneOf(["AM","PM"]),partial:a().bool,config:a().any,allowClear:a().bool,firstDayOfWeek:a().oneOf([0,1,2,3,4,5,6]),value:a().any,min:a().any,max:a().any,onChange:a().func,onOk:a().func,onClear:a().func,onSelect:a().func},S.defaultProps={show:!1,type:"date",timeType:"minute",halfStart:"AM",halfEnd:"PM",allowClear:!0,partial:!1,config:{start:!0,end:!0},firstDayOfWeek:1,value:[new Date,new Date],min:null,max:null,onChange:function(le,E){},onOk:function(le){},onClear:function(){},onSelect:function(le){}};const I=S;var c=t(29829),q,b,k,ee=(b=q=function(ie){(0,R.default)(le,ie);function le(E){(0,p.default)(this,le);var w=(0,te.default)(this,(le.__proto__||g()(le)).call(this,E));return k.call(w),w.state=w.generateState(E),w}return(0,L.default)(le,[{key:"componentDidMount",value:function(){this.props.defaultVisible&&this.showMenu()}},{key:"componentWillReceiveProps",value:function(w){n().isEqual(w.selectedValue,this.props.selectedValue)||this.setState(this.generateState(w))}},{key:"render",value:function(){var w=this,K=this.props.min?this.props.min.toDate():null,N=this.props.max?this.props.max.toDate():null,F="date";this.props.timePicker||this.props.mode==="task"?F="datetime":F=this.props.mode;var h=["mui-datetime-picker"];this.props.disabled&&h.push("disabled");var z=h.join(" "),X=r.createElement("span",{ref:function(i){w._picker=i},className:z,disabled:this.props.disabled,onClick:this.toggleMenuOpened},r.createElement("span",null,this.state.label));this.props.children&&(X=r.createElement("span",{ref:function(i){w._picker=i},className:z,disabled:this.props.disabled,onClick:this.toggleMenuOpened},this.props.children));var B=r.createElement(I,{type:F,timeType:this.props.timeMode,partial:this.props.mode==="task",allowClear:this.props.allowClear,config:this.state.config,firstDayOfWeek:this.props.firstDayOfWeek,min:K,max:N,value:this.state.value,halfStart:this.props.halfData[0],halfEnd:this.props.halfData[1],onChange:function(i,m,v){w.onChange(i,m,v)},onOk:this.props.onOk,onClear:this.props.onClear,onSelect:this.props.onSelect,autoFillEndTime:this.props.autoFillEndTime}),x=r.createElement("div",{className:"mui-datetimerange-base"},X,r.createElement(c.Z,{popupParentNode:this.props.popupParentNode,placement:"bottom",offset:this.props.offset,bounding:this.state.bounding,visible:this.state.menuOpened,onHide:this.hideMenu},B));return x}}]),le}(r.Component),k=function(){var le=this;this.generateState=function(E){var w=!E.selectedValue||!E.selectedValue[0]&&!E.selectedValue[1],K=!!(E.selectedValue&&E.selectedValue[0]),N=!!(E.selectedValue&&E.selectedValue[1]),F=E.selectedValue&&E.selectedValue[0]?d()(E.selectedValue[0]).toDate():null,h=E.selectedValue&&E.selectedValue[1]?d()(E.selectedValue[1]).toDate():null,z=[F,h],X={value:z,label:z?le.getRangeLabel(z,{start:K,end:N},E):le.props.placeholder,config:{start:K,end:N},menuOpened:!1,bounding:null};return X},this.getRangeLabel=function(E,w,K){var N=K.timePicker?"datetime":K.mode,F=K.mode==="task",h=E&&E[0]&&(F&&w&&w.start||!F)?U.Z.formatTime(E[0],N,le.props.timeMode):"",z=E&&E[1]&&(F&&w&&w.end||!F)?U.Z.formatTime(E[1],N,le.props.timeMode):"",X=[h,z];return h||z?X.join(" ~ "):K.placeholder},this.showMenu=function(){le.setState({menuOpened:!0,bounding:le._picker.getBoundingClientRect()}),le.props.onVisibleChange(!0)},this.hideMenu=function(){le.setState({menuOpened:!1}),le.props.onVisibleChange(!1)},this.toggleMenuOpened=function(){le.props.disabled||(le.setState({menuOpened:!le.state.menuOpened,bounding:le._picker.getBoundingClientRect()}),le.props.onVisibleChange(!le.state.menuOpened))},this.onChange=function(E,w,K){var N=null,F=le.props.placeholder;w&&(N=w,F=le.getRangeLabel(w,K,le.props)),le.setState({value:N,label:F,config:K,menuOpened:!1}),le.props.onVisibleChange(!1)}},b);ee.propTypes={children:a().any,mode:a().oneOf(["year","month","date","datetime","task","half"]),timePicker:a().bool,timeMode:a().oneOf(["hour","minute","second"]),halfData:a().any,allowClear:a().bool,firstDayOfWeek:a().oneOf([0,1,2,3,4,5,6]),selectedValue:a().any,min:a().any,max:a().any,defaultVisible:a().bool,disabled:a().bool,placeholder:a().string,popupParentNode:a().func,offset:a().shape({top:a().number,left:a().number}),onOk:a().func,onClear:a().func,onSelect:a().func,onVisibleChange:a().func,autoFillEndTime:a().number},ee.defaultProps={mode:"date",timePicker:!1,timeMode:"minute",halfData:["AM","PM"],allowClear:!0,firstDayOfWeek:1,selectedValue:null,min:null,max:null,defaultVisible:!1,disabled:!1,placeholder:_l("\u8BF7\u9009\u62E9"),offset:{top:0,left:0},onOk:function(le){},onClear:function(){},onSelect:function(le){},onVisibleChange:function(le){},autoFillEndTime:0};const re=ee},662:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>q});var ce=t(85105),g=t.n(ce),p=t(99663),L=t(22600),te=t(49135),R=t(93196),y=t(45697),a=t.n(y),r=t(67294),o=t(30381),d=t.n(o),Z=t(12759),H=t(46665),U=t(27324),f=t(42185),V,C,O,n=(C=V=function(b){(0,R.default)(k,b);function k(ee){(0,p.default)(this,k);var re=(0,te.default)(this,(k.__proto__||g()(k)).call(this,ee));O.call(re);var ie=ee.value||new Date;return re.state={value:ie,time:re.getTimeData({hour:ie.getHours(),minute:ie.getMinutes(),second:ie.getSeconds()},ee,ie)},re}return(0,L.default)(k,[{key:"componentWillReceiveProps",value:function(re){if(re.value!==this.state.value){var ie=re.value||new Date;this.setState({value:ie,time:this.getTimeData({hour:ie.getHours(),minute:ie.getMinutes(),second:ie.getSeconds()},re,ie)})}}},{key:"render",value:function(){var re=this,ie=this.props.type==="datetime"?"date":this.props.type,le=null;this.props.type==="datetime"&&(le=r.createElement(H.Z,{type:this.props.timeType,min:this.state.time.min,max:this.state.time.max,value:this.state.time.value,onChange:function(K,N){re.timeOnChange(K,N)}}));var E=null;return this.props.allowClear&&(E=r.createElement(f.ZP,{type:"link",size:"small",onClick:function(K){re.buttonOnClick(K,"clear")}},"\u6E05\u7A7A")),r.createElement("div",{className:"mui-datetimepicker"},r.createElement("div",null,r.createElement(Z.Z,{type:ie,firstDayOfWeek:this.props.firstDayOfWeek,min:this.props.min,max:this.props.max,value:this.state.value,onChange:function(K,N){re.dateOnChange(K,N)}})),r.createElement("div",{className:"mui-datetime-toolbar"},le,E,r.createElement(f.ZP,{type:"primary",size:"small",onClick:function(K){re.buttonOnClick(K,"ok")}},"\u786E\u5B9A")))}}]),k}(r.Component),O=function(){var k=this;this.getTimeData=function(ee,re,ie){return{min:re.min&&U.Z.isSameDate(ie,re.min)?{hour:re.min.getHours(),minute:re.min.getMinutes(),second:re.min.getSeconds()}:null,max:re.max&&U.Z.isSameDate(ie,re.max)?{hour:re.max.getHours(),minute:re.max.getMinutes(),second:re.max.getSeconds()}:null,value:{hour:ee.hour,minute:ee.minute,second:ee.second}}},this.dateOnChange=function(ee,re){var ie=new Date(k.state.value);ie.setFullYear(re.getFullYear(),re.getMonth(),re.getDate());var le={hour:ie.getHours(),minute:ie.getMinutes(),second:ie.getSeconds()},E=k.getTimeData(le,k.props,ie);k.props.type==="datetime"&&(E.min&&U.Z.isSameDate(ie,k.props.min)&&U.Z.isTimeEarly(le,E.min)&&(ie.setHours(E.min.hour),ie.setMinutes(E.min.minute),ie.setSeconds(E.min.second),E.value=E.min),E.max&&U.Z.isSameDate(ie,k.props.max)&&U.Z.isTimeLater(le,E.max)&&(ie.setHours(E.max.hour),ie.setMinutes(E.max.minute),ie.setSeconds(E.max.second),E.value=E.max)),k.setState({value:ie,time:E},function(){k.props.onSelect&&k.props.onSelect(d()(ie))})},this.timeOnChange=function(ee,re){var ie=new Date(k.state.value);ie.setHours(re.hour),ie.setMinutes(re.minute),ie.setSeconds(re.second),k.setState({value:ie,time:k.getTimeData(re,k.props,ie)},function(){k.props.onSelect&&k.props.onSelect(d()(ie))})},this.buttonOnClick=function(ee,re){if(k.props.onChange){var ie=re==="ok"?k.state.value:null;ie&&(ie.setMilliseconds(0),k.props.timeType==="minute"&&(ie.setSeconds(0),k.props.timeType==="hour"&&ie.setMinutes(0))),k.props.onChange(ee,ie),re==="ok"&&k.props.onOk&&k.props.onOk(d()(ie)),re==="clear"&&k.props.onClear&&k.props.onClear()}}},C);n.propTypes={type:a().oneOf(["year","month","date","datetime"]),timeType:a().oneOf(["hour","minute","second"]),allowClear:a().bool,firstDayOfWeek:a().oneOf([0,1,2,3,4,5,6]),value:a().any,min:a().any,max:a().any,onChange:a().func,onOk:a().func,onClear:a().func,onSelect:a().func},n.defaultProps={show:!1,type:"date",timeType:"minute",allowClear:!0,firstDayOfWeek:1,value:new Date,min:null,max:null,onChange:function(k,ee){},onOk:function(k){},onClear:function(){},onSelect:function(k){}};const s=n;var j=t(29829),A,S,I,c=(S=A=function(b){(0,R.default)(k,b);function k(ee){(0,p.default)(this,k);var re=(0,te.default)(this,(k.__proto__||g()(k)).call(this,ee));I.call(re);var ie=ee.timePicker?"datetime":ee.mode,le=ee.selectedValue?d()(ee.selectedValue).toDate():null;return re.state={value:le,label:le?U.Z.formatTime(le,ie,ee.timeMode):"",menuOpened:!1,bounding:null},re}return(0,L.default)(k,[{key:"componentDidMount",value:function(){this.props.defaultVisible&&this.showMenu()}},{key:"componentWillReceiveProps",value:function(re){if(re.selectedValue!==this.props.selectedValue){var ie=re.timePicker?"datetime":re.mode,le=re.selectedValue?d()(re.selectedValue).toDate():null,E=le?U.Z.formatTime(le,ie,re.timeMode):"";this.setState({value:le,label:E})}}},{key:"render",value:function(){var re=this,ie=this.props.min?this.props.min.toDate():null,le=this.props.max?this.props.max.toDate():null,E=this.props.timePicker?"datetime":this.props.mode,w=["mui-datetime-picker"];this.props.disabled&&w.push("disabled");var K=w.join(" "),N=r.createElement("span",{ref:function(h){re._picker=h},className:K,disabled:this.props.disabled,onClick:this.toggleMenuOpened},r.createElement("span",null,this.state.label));return this.props.children&&(N=r.createElement("span",{ref:function(h){re._picker=h},className:K,disabled:this.props.disabled,onClick:this.toggleMenuOpened},this.props.children)),r.createElement("div",{className:"mui-datetime-base"},N,r.createElement(j.Z,{popupParentNode:this.props.popupParentNode,placement:this.props.placement||"bottom",bounding:this.state.bounding,visible:this.state.menuOpened,offset:this.props.offset,onHide:function(){re.hideMenu()}},r.createElement(s,{type:E,timeType:this.props.timeMode,allowClear:this.props.allowClear,firstDayOfWeek:this.props.firstDayOfWeek,min:ie,max:le,value:this.state.value,onChange:function(h,z){re.onChange(h,z)},onOk:this.props.onOk,onClear:this.props.onClear,onSelect:this.props.onSelect})))}}]),k}(r.Component),I=function(){var k=this;this.showMenu=function(){k.setState({menuOpened:!0,bounding:k._picker.getBoundingClientRect()})},this.hideMenu=function(){k.setState({menuOpened:!1})},this.toggleMenuOpened=function(){k.props.disabled||k.setState({menuOpened:!k.state.menuOpened,bounding:k._picker.getBoundingClientRect()})},this.onChange=function(ee,re){var ie=null,le="",E=k.props.timePicker?"datetime":k.props.mode;re&&(ie=re,le=U.Z.formatTime(re,E,k.props.timeMode)),k.setState({value:ie,label:le,menuOpened:!1})}},S);c.propTypes={placement:a().oneOf(["top","bottom"]),children:a().any,mode:a().oneOf(["year","month","date","datetime"]),timePicker:a().bool,timeMode:a().oneOf(["hour","minute","second"]),allowClear:a().bool,firstDayOfWeek:a().oneOf([0,1,2,3,4,5,6]),selectedValue:a().any,defaultVisible:a().bool,disabled:a().bool,offset:a().shape({}),popupParentNode:a().func,onOk:a().func,onClear:a().func,onSelect:a().func},c.defaultProps={mode:"date",timePicker:!1,timeMode:"minute",allowClear:!0,firstDayOfWeek:1,selectedValue:null,min:null,max:null,defaultVisible:!1,disabled:!1,placement:"bottom",onOk:function(k){},onClear:function(){},onSelect:function(k){}};const q=c},27324:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>te});var ce=function(y){return y<10?"0"+y:y.toString()},g=function(y,a){var r=y.hour*1e4+y.minute*100+y.second,o=a.hour*1e4+a.minute*100+a.second;return r<o},p=function(y,a){var r=y.hour*1e4+y.minute*100+y.second,o=a.hour*1e4+a.minute*100+a.second;return r>o},L={isSameDate:function(y,a){return y.getFullYear()===a.getFullYear()&&y.getMonth()===a.getMonth()&&y.getDate()===a.getDate()},daysOfMonth:function(y,a){var r=a>=11?0:a+1,o=a>=11?y+1:y,d=new Date(Date.UTC(y,a,1)),Z=new Date(Date.UTC(o,r,1)),H=(Z.getTime()-d.getTime())/(1e3*60*60*24);return H},dateInRange:function(y,a,r){var o=new Date(y.getFullYear(),y.getMonth(),y.getDate()),d=null;a&&a.getFullYear&&(d=new Date(a.getFullYear(),a.getMonth(),a.getDate()));var Z=null;r&&r.getFullYear&&(Z=new Date(r.getFullYear(),r.getMonth(),r.getDate()));var H=!0;return(d&&o<d||Z&&o>Z)&&(H=!1),H},monthInRange:function(y,a,r){var o=new Date(y.getFullYear(),y.getMonth()),d=null;a&&a.getFullYear&&(d=new Date(a.getFullYear(),a.getMonth()));var Z=null;r&&r.getFullYear&&(Z=new Date(r.getFullYear(),r.getMonth()));var H=!0;return(d&&o<d||Z&&o>Z)&&(H=!1),H},prevMonth:function(y){var a=y.getFullYear(),r=y.getMonth(),o=r<=0?a-1:a,d=r<=0?11:r-1,Z=new Date(y);return Z.setDate(1),Z.setMonth(d),Z.setFullYear(o),Z},nextMonth:function(y){var a=y.getFullYear(),r=y.getMonth(),o=r>=11?a+1:a,d=r>=11?0:r+1,Z=new Date(y);return Z.setDate(1),Z.setMonth(d),Z.setFullYear(o),Z},minuteInRange:function(y,a,r){var o=!0;return a&&(y.hour<a.hour||y.hour===a.hour&&y.minute<a.minute)&&(o=!1),r&&(y.hour>r.hour||y.hour===r.hour&&y.minute>r.minute)&&(o=!1),o},secondInRange:function(y,a,r){var o=!0;return(a&&g(y,a)||r&&p(y,r))&&(o=!1),o},padZero:function(y){return ce(y)},formatTime:function(y,a,r){if(!y)return"";var o=[],d=[y.getFullYear().toString()];if(a==="month"?d=[y.getFullYear().toString(),ce(y.getMonth()+1)]:(a==="date"||a==="datetime"||a==="task")&&(d=[y.getFullYear().toString(),ce(y.getMonth()+1),ce(y.getDate())]),o.push(d.join("-")),a==="datetime"||a==="task"){var Z=[ce(y.getHours())];r==="minute"?Z=[ce(y.getHours()),ce(y.getMinutes())]:r==="second"&&(Z=[ce(y.getHours()),ce(y.getMinutes()),ce(y.getSeconds())]),o.push(Z.join(":"))}return o.join(" ")},isTimeEarly:function(y,a){return g(y,a)},isTimeLater:function(y,a){return p(y,a)}};const te=L},46665:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>S});var ce=t(85105),g=t.n(ce),p=t(99663),L=t(22600),te=t(49135),R=t(93196),y=t(45697),a=t.n(y),r=t(67294),o=t(73935),d=function(I){(0,R.default)(c,I);function c(q){(0,p.default)(this,c);var b=(0,te.default)(this,(c.__proto__||g()(c)).call(this,q));return b.scrollToVisibleRange=function(){var k=b.props.data,ee=k.find(function(K){return!!K.current}),re=ee.value,ie=b.timeRef.current,le=ie.offsetHeight,E=ie.parentElement,w=Math.floor(le*(re/k.length))-Math.floor(E.offsetHeight/2);E.scrollTop=w},b.itemOnClick=function(k,ee){ee.disabled||b.props.onPick&&b.props.onPick(k,ee.value)},b.timeRef=r.createRef(),b}return(0,L.default)(c,[{key:"componentDidMount",value:function(){this.scrollToVisibleRange()}},{key:"render",value:function(){var b=this,k=this.props.data.map(function(ee,re,ie){var le=[];ee.disabled&&le.push("disabled"),ee.current&&(le.push("current"),le.push("ThemeBGColor3"));var E=le.join(" ");return r.createElement("li",{key:ee.value,className:E,onClick:function(K){b.itemOnClick(K,ee)}},ee.label)});return r.createElement("ul",{className:"mui-timemenu-list",ref:this.timeRef},k)}}]),c}(r.Component);d.propTypes={data:a().any,onPick:a().func},d.defaultProps={data:[],onPick:function(c,q){}};const Z=d;var H=t(27324),U,f,V,C=(f=U=function(I){(0,R.default)(c,I);function c(q){(0,p.default)(this,c);var b=(0,te.default)(this,(c.__proto__||g()(c)).call(this,q));return V.call(b),b.state=b.init(q),b}return(0,L.default)(c,[{key:"componentWillReceiveProps",value:function(b){this.setState(this.init(b))}},{key:"render",value:function(){var b=this,k=["mui-timemenu"];this.props.show&&k.push("show"),this.props.mode==="hour"?k.push("col-1"):this.props.mode==="minute"?k.push("col-2"):this.props.mode==="second"&&k.push("col-3");var ee=k.join(" "),re=[r.createElement("div",{key:"hour-menu",className:"mui-timemenu-col"},r.createElement(Z,{data:this.state.hourList,onPick:function(le,E){b.onPick(le,"hour",E)}}))];return(this.props.mode==="minute"||this.props.mode==="second")&&re.push(r.createElement("div",{key:"minute-menu",className:"mui-timemenu-col"},r.createElement(Z,{data:this.state.minuteList,onPick:function(le,E){b.onPick(le,"minute",E)}}))),this.props.mode==="second"&&re.push(r.createElement("div",{key:"second-menu",className:"mui-timemenu-col"},r.createElement(Z,{data:this.state.secondList,onPick:function(le,E){b.onPick(le,"second",E)}}))),r.createElement("div",{className:ee},re)}}]),c}(r.Component),V=function(){var c=this;this.init=function(q){var b={hourList:c.generateHourList(q),minuteList:c.generateMinuteList(q),secondList:c.generateSecondList(q)};return b},this.generateHourList=function(q){for(var b=[],k=0;k<24;){var ee=!1;(q.min&&k<q.min.hour||q.max&&k>q.max.hour)&&(ee=!0);var re=k<10?"0"+k+":00":k.toString()+":00";q.mode!=="hour"&&(re=k<10?"0"+k:""+k.toString()),b.push({value:k,label:re,disabled:ee,current:k===q.value.hour}),k=k+1}return b},this.generateMinuteList=function(q){for(var b=[],k=0;k<60;)b.push({value:k,label:k<10?"0"+k:k.toString(),disabled:!H.Z.minuteInRange({hour:q.value.hour,minute:k},q.min,q.max),current:k===q.value.minute}),k=k+1;return b},this.generateSecondList=function(q){for(var b=[],k=0;k<60;)b.push({value:k,label:k<10?"0"+k:k.toString(),disabled:!H.Z.secondInRange({hour:q.value.hour,minute:q.value.minute,second:k},q.min,q.max),current:k===q.value.second}),k=k+1;return b},this.onPick=function(q,b,k){if(c.props.onPick){var ee={hour:c.props.value.hour,minute:c.props.value.minute,second:c.props.value.second};ee[b]=k;var re=!1;c.props.min&&(ee.hour<c.props.min.hour||ee.hour===c.props.min.hour&&(ee.minute<c.props.min.minute||ee.minute===c.props.min.minute&&ee.second<c.props.min.second))&&(re=!0),re&&(ee=c.props.min);var ie=!1;c.props.max&&(ee.hour>c.props.max.hour||ee.hour===c.props.max.hour&&(ee.minute>c.props.max.minute||ee.minute===c.props.max.minute&&ee.second>c.props.max.second))&&(ie=!0),ie&&(ee=c.props.max),c.props.onPick(q,ee)}}},f);C.propTypes={show:a().bool,mode:a().oneOf(["hour","minute","second"]),min:a().any,max:a().any,value:a().any,onPick:a().func},C.defaultProps={show:!1,mode:"second",min:null,max:null,value:{hour:0,minute:0,second:0},onPick:function(c,q){}};const O=C;var n,s,j,A=(s=n=function(I){(0,R.default)(c,I);function c(q){(0,p.default)(this,c);var b=(0,te.default)(this,(c.__proto__||g()(c)).call(this,q));j.call(b);var k=b.props.value||{hour:0,minute:0,second:0};return b.state={value:k,label:b.getTimeLabel(k),menuOpened:!1},b.button=null,b}return(0,L.default)(c,[{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.clickListener,!1),window.addEventListener("keydown",this.keyDownListener,!1)}},{key:"componentWillReceiveProps",value:function(b){if(b.value!==this.state.value){var k=b.value||{hour:0,minute:0,second:0},ee=this.getTimeLabel(k);this.setState({value:k,label:ee})}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.clickListener,!1),window.removeEventListener("keydown",this.keyDownListener,!1)}},{key:"showMenu",value:function(){this.setState({menuOpened:!0})}},{key:"hideMenu",value:function(){this.setState({menuOpened:!1})}},{key:"render",value:function(){var b=this,k=["mui-time"];if(this.state.menuOpened&&this.button){var ee=this.button.getBoundingClientRect();window.innerHeight-ee.top<ee.height+162&&k.push("bottom-edge"),window.innerWidth-ee.left<122-ee.width&&k.push("right-edge")}var re=k.join(" ");return r.createElement("div",{className:re},r.createElement("button",{ref:function(le){b.button=le},className:"mui-forminput",disabled:this.props.disabled,onClick:this.toggleMenuOpened},r.createElement("span",null,this.state.label)),r.createElement(O,{show:this.state.menuOpened,mode:this.props.type,value:this.state.value,min:this.props.min,max:this.props.max,onPick:function(le,E){b.onPick(le,E)}}))}}]),c}(r.Component),j=function(){var c=this;this.padZero=function(q){return q<10?"0"+q:q.toString()},this.getTimeLabel=function(q){var b=[c.padZero(q.hour),c.padZero(q.minute)];return c.props.type==="second"&&(b=[c.padZero(q.hour),c.padZero(q.minute),c.padZero(q.second)]),b.join(":")},this.clickListener=function(q){var b=o.findDOMNode(c);(b===q.target||!b.contains(q.target))&&c.state.menuOpened&&c.hideMenu()},this.keyDownListener=function(q){q.keyCode===27&&c.state.menuOpened&&c.hideMenu()},this.toggleMenuOpened=function(){c.setState({menuOpened:!c.state.menuOpened})},this.onPick=function(q,b){var k=c.getTimeLabel(b);c.setState({value:b,label:k}),c.props.onChange&&c.props.onChange(q,b,k)}},s);A.propTypes={type:a().oneOf(["hour","minute","second"]),min:a().any,max:a().any,value:a().any,disabled:a().bool,onChange:a().func},A.defaultProps={type:"minute",min:null,max:null,value:{hour:0,minute:0,second:0},disabled:!1,onChange:function(c,q,b){}};const S=A},29829:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>V});var ce=t(85105),g=t.n(ce),p=t(99663),L=t(22600),te=t(49135),R=t(93196),y=t(45697),a=t.n(y),r=t(67294),o=t(73935),d=t(96486),Z=t.n(d),H,U,f=(U=H=function(C){(0,R.default)(O,C);function O(n){return(0,p.default)(this,O),(0,te.default)(this,(O.__proto__||g()(O)).call(this,n))}return(0,L.default)(O,[{key:"componentDidMount",value:function(){this.bounding=this.props.bounding,this.props.isInit&&this.create(this.props),this.props.visible&&this.renderLayer(this.props)}},{key:"create",value:function(s){var j=s.popupParentNode;this.popupParentNode=j(),this.hasTop=this.popupParentNode.tagName==="BODY",this.popup=document.createElement("div"),this.popup.className="ming PositionContainer-wrapper",this.popupParentNode.appendChild(this.popup),this.renderLayer(s),this.newDestroy=this.destroy.bind(this),window.addEventListener("resize",this.onWindowResize.bind(this)),document.body.addEventListener("click",this.newDestroy,!1)}},{key:"componentWillUnmount",value:function(){this.popup&&(this.popupParentNode.removeChild(this.popup),window.removeEventListener("resize",this.onWindowResize.bind(this)),document.body.removeEventListener("click",this.newDestroy))}},{key:"componentWillReceiveProps",value:function(s){var j=s.visible,A=s.bounding;this.bounding=A,j?this.popup?this.renderLayer(s):(this.create(s),this.show()):this.popup&&this.hide()}},{key:"renderLayer",value:function(s){var j=this,A=s.children,S=s.visible;(0,o.render)(A,this.popup,function(){S&&j.show()})}},{key:"getHasParent",value:function(s,j){var A=!1;if(s.classList.contains(j))return!0;if(!s||!s.parentNode)return A;for(;A=!(s&&s.parentNode&&s.parentNode.classList.contains(j));){if(s&&s.parentNode===null){A=!0;break}if(s&&s.tagName&&s.tagName==="BODY")break;s=s&&s.parentNode?s.parentNode:s}return A}},{key:"destroy",value:function(s){var j=s.target,A=this.props,S=Z().compact(Z().map(this.props.onClickAwayExceptions,function(I){if(I instanceof window.jQuery)return Z().map(I,function(c){return c});if(typeof I=="string"&&window.jQuery)return Z().map(window.jQuery(I),function(c){return c});try{return o.findDOMNode(I)}catch(c){return null}}));A.visible&&j&&this.getHasParent(j,"PositionContainer-wrapper")&&Z().every(Z().flatten(S),function(I){return j!==I&&!$(j).closest($(I)).length})&&A.onHide()}},{key:"onWindowResize",value:function(){var s=this.props,j=s.visible,A=s.onHide;j&&A()}},{key:"getCurrentClientRect",value:function(){var s=this.popupParentNode,j=this.bounding,A=this.popup,S=this.props.placement,I=this.popupBounding=A.getBoundingClientRect(),c={},q=s.getBoundingClientRect(),b={top:j.top-q.top,bottom:j.bottom-q.bottom,left:j.left-q.left,right:j.right-q.left};return S==="top"&&(c={top:b.top-I.height+s.scrollTop,left:b.left},b.top<I.height&&(c.top=b.bottom+q.height+s.scrollTop)),S==="bottom"&&(c={top:b.bottom+q.height+s.scrollTop,left:b.left},Math.abs(b.bottom)<I.height&&b.top>I.height&&(c.top=b.top-I.height+s.scrollTop)),S==="left"&&(c={top:b.top+s.scrollTop,left:b.left-I.width}),S==="right"&&(c={top:b.top+s.scrollTop,left:b.right}),c}},{key:"getVerticalSpace",value:function(s,j){var A=document.body,S=A.clientWidth,I=A.clientHeight,c=s.top-j.height>=0,q=I-s.top-s.height-j.height>=0,b={top:s.top-j.height,left:s.left};q&&b.top<0&&(b.top=s.bottom);var k={top:s.bottom,left:s.left};if(c&&I<k.top+j.height&&(k.top=s.top-j.height),!c&&!q){var ee=j.height-s.top,re=j.height-(I-s.top-s.height);b.top=b.top+ee,k.top=k.top-re}return{topSpace:b,bottomSpace:k}}},{key:"getHorizontalSpace",value:function(s,j){var A=document.body,S=A.clientWidth,I=A.clientHeight,c=s.left-j.width,q=S-s.left-s.width-j.width,b=c>=0,k=q>=0,ee={top:s.top,left:s.left-j.width};k&&ee.left<0&&(ee.left=s.right);var re={top:s.top,left:s.right};return b&&re.left+j.width>S&&(re.left=s.left-j.width),!b&&!k&&(ee.left=ee.left-c,re.left=re.left+q),{leftSpace:ee,rightSpace:re}}},{key:"getBoundingClientRect",value:function(){var s=this.bounding,j=this.popup,A=this.props.placement,S=this.popupBounding=j.getBoundingClientRect(),I=document.body,c=I.clientWidth,q=I.clientHeight,b={},k=this.getVerticalSpace(s,S),ee=this.getHorizontalSpace(s,S);return A==="top"&&(b=k.topSpace),A==="bottom"&&(b=k.bottomSpace),A==="left"&&(b=ee.leftSpace),A==="right"&&(b=ee.rightSpace),(A=="top"||A=="bottom")&&b.left+S.width>c&&(b.left=c-S.width),(A=="right"||A=="left")&&q<b.top+S.height&&(b.top=q-S.height),b}},{key:"show",value:function(){var s=this.props.offset,j=this.popup,A=this.hasTop?this.getBoundingClientRect():this.getCurrentClientRect();j.style.left=A.left+s.left+"px",j.style.top=A.top+s.top+"px",j.style.display="block",j.classList.add("PositionContainer-active")}},{key:"hide",value:function(){var s=this.popup;s.style.left="-99999px",s.style.top="-99999px",s.classList.remove("PositionContainer-active")}},{key:"render",value:function(){return r.createElement("noscript",null)}}]),O}(r.Component),H.propTypes={visible:a().bool,bounding:a().object,placement:a().string,onHide:a().func,popupParentNode:a().func,offset:a().object,isInit:a().bool,onClickAwayExceptions:a().array},H.defaultProps={visible:!1,placement:"top",offset:{top:0,left:0},isInit:!1,onClickAwayExceptions:[],popupParentNode:function(){return document.body},onHide:function(){}},U);const V=f},46417:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>f});var ce=t(85105),g=t.n(ce),p=t(99663),L=t(22600),te=t(49135),R=t(93196),y=t(67294),a=t(45697),r=t.n(a),o=t(97238),d=t(96486),Z=t.n(d),H,U,f=(U=H=function(V){(0,R.default)(C,V);function C(){return(0,p.default)(this,C),(0,te.default)(this,(C.__proto__||g()(C)).apply(this,arguments))}return(0,L.default)(C,[{key:"componentDidMount",value:function(){var n=this.props,s=n.options,j=n.onInit,A=j===void 0?function(){}:j,S=n.onAdd,I=S===void 0?function(){}:S,c=n.onUploaded,q=c===void 0?function(){}:c,b=n.onUploadProgress,k=b===void 0?function(){}:b,ee=n.onBeforeUpload,re=ee===void 0?function(){}:ee,ie=n.onError,le=ie===void 0?function(){}:ie,E=n.onUploadComplete,w=E===void 0?function(){}:E,K=n.onRemoveUploadingFile,N=n.bucket,F=n.getTokenParam,h=F===void 0?{}:F;this.upload&&(this.uploader=(0,o.Z)(Z().assign({},{browse_button:this.upload,bucket:N,getTokenParam:h,onRemoveUploadingFile:K,init:{Init:A,FilesAdded:function(X,B){I(X,B)},BeforeUpload:function(X,B){var x="."+File.GetExt(B.name);X.settings.multipart_params={token:B.token},X.settings.multipart_params.key=B.key,X.settings.multipart_params["x:serverName"]=B.serverName,X.settings.multipart_params["x:filePath"]=B.key.replace(B.fileName,""),X.settings.multipart_params["x:fileName"]=B.fileName.replace(/\.[^\.]*$/,""),X.settings.multipart_params["x:originalFileName"]=encodeURIComponent(B.name.indexOf(".")>-1?B.name.split(".").slice(0,-1).join("."):B.name),X.settings.multipart_params["x:fileExt"]=x,re(X,B)},FileUploaded:function(X,B,x){q(X,B,x.response)},UploadProgress:function(X,B){k(X,B)},UploadComplete:function(X,B){w(X,B)},Error:function(){le.apply(void 0,arguments)}}},s)))}},{key:"componentWillUnmount",value:function(){this.uploader&&this.uploader.destroy()}},{key:"render",value:function(){var n=this,s=this.props,j=s.className,A=s.children;return y.createElement("div",{className:"InlineBlock "+(j||""),ref:function(I){return n.upload=I}},A)}}]),C}(y.Component),H.propTypes={className:r().string,bucket:r().number,options:r().shape({}),children:r().element,onInit:r().func,onAdd:r().func,onUploaded:r().func,onUploadProgress:r().func,onBeforeUpload:r().func,onError:r().func,onUploadComplete:r().func,onRemoveUploadingFile:r().func},U)},98658:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>R});var ce=t(12424),g=t(67294),p=t(45697),L=t.n(p),te=t(93224);function R(y){var a=y.content,r=y.width,o=r===void 0?100:r,d=y.height,Z=d===void 0?100:d,H=y.gap,U=H===void 0?0:H,f=y.correctLevel,V=(0,g.useState)(),C=(0,ce.Z)(V,2),O=C[0],n=C[1];return(0,g.useEffect)(function(){var s=(0,te.Z)({value:String(a),width:o*2,height:Z*2,gap:U*2,correctLevel:f||0});n(s)},[a]),O?g.createElement("img",{style:{width:o,height:Z},src:O,alt:a}):g.createElement("span",null)}R.propTypes={content:p.string,width:p.number,height:p.number,gap:p.number}},63355:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>K});var ce=t(12424),g=t(46593),p=t.n(g),L=t(99663),te=t(22600),R=t(9527),y=t.n(R),a=t(85315),r=t(52945),o=t.n(r),d=t(67294),Z=t(94859),H=t.n(Z),U=t(71893),f=t(15577),V=t(28164),C=t(93967),O=t.n(C),n=t(2377),s=t.n(n),j=t(78272),A=t.n(j),S=t(68924),I=t.n(S),c=t(82302),q=t(96486),b=t.n(q),k=t(40240),ee=o()({},c.whiteList,{img:["src"],div:["lang","dir","role","aria-labelledby"],table:[],tbody:[],td:[],tfoot:[],th:[],thead:[],tr:[],figure:[],oembed:["url"],label:[],input:[],button:[],iframe:["src"]}),re={};for(var ie in ee)re[ie]=[].concat((0,a.Z)(new(y())(["id","class","style","contenteditable","alt","title","width","height","border","align","valign","rowspan","colspan","disabled","type","checked","tabindex"].concat((0,a.Z)(ee[ie])))));var le=U.ZP.div(function(N){var F=N.minHeight,h=N.maxWidth,z=N.maxHeight,X=N.dropdownPanelPosition,B=X===void 0?{}:X,x=N.width;return`
  .ck {
    &.ckByHtml {
      .ck-content table td, .ck-content table th {
        min-width: 2em;
        padding: 0.4em;
        border: 1px solid #bfbfbf;
      }
    }
    .ck-sticky-panel {
      display: none;
    }
    &.ck-toolbar,
    &.ck-button {
      min-height: 28px !important;
      .ck-icon{
        font-size: 10px;
        color: #515151;
      }
    }
    &.ck-toolbar-dropdown>.ck-dropdown__panel{
      max-width: `+(h||x)+`px ;
    }
    .ck-toolbar__items {
      height: 100% !important;
    }
    &.ck-editor__top {
      .ck-toolbar_grouping {
        background: #fafafa !important;
        border: 1px solid #dddddd !important;
        height: 36px !important;
      }
      .ck-dropdown__panel {
        .ck-list {
          margin-left: 0;
        }
      }
      .ck-dropdown__panel.ck-dropdown__panel_sw {
        background: #ffffff !important;
        border: 1px solid #e8e8e8 !important;
        box-shadow: 0px 3px 6px 0px rgba(0, 0, 0, 0.16) !important;
      }
      .ck-dropdown__panel.ck-dropdown__panel_ne,
      .ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{
        // left: `+(B.left?B.left:"initial")+` ;
        // right:  `+(B.right?B.right:"0")+`;
        max-height: 300px ;
        overflow-y: auto;
      }
    }
    .ck-content {
      min-height: `+(F||90)+`px !important;
      max-height: `+(z?z+"px":"initial")+` ;
      border: 1px solid #f7f7f7 !important;
      font-size: 13px !important;
      background: #f7f7f7 !important;
      border-radius: 3px !important;
      box-shadow: none !important;
      padding: 0 7.8px;
      > :first-child {
        margin-top: 11.7px;
      }
      > :last-child {
        margin-bottom: 11.7px;
      }
      &.ck-focused {
        background: #fff !important;
        border: 1px solid #2196f3 !important;
      }
    }
  }
  &.clickInit {
    cursor: text;
  }
  &.disabled {
    .ck-content {
      background: #fff !important;
      border: 0px !important;
      &.ck-focused {
        background: #fff !important;
        border: 1px solid #fff !important;
      }
    }
    .ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected, .ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{
      outline: none !important;
    }
  }
  &.mdEditorContent{
    .ck {
      .ck-content {
        border: none !important;
        background: #fff !important;
        border-radius: none !important;
        box-shadow: none !important;
        &.ck-focused {
          background: #fff !important;
          border: none !important;
        }
      }
    }
  }
  &.showTool{
    .ck-sticky-panel {
      display: block;
      .ck-toolbar{
        background: #fafafa;
        border: 1px solid #eaeaea !important;
        border-left:0;
        border-right:0;
      }
    }
  }
  &.editorNull{
    min-height: `+(F||90)+`px ;
    background: #fff ;
    border-radius: 2px;
    padding: 10px;
    color: #bdbdbd;
    border: 1px solid #dddddd;
    overflow: hidden;
  }
  &.remarkControl{
    .ck .ck-content {
      max-height: 600px !important;
      border: 0 !important;
      background: none !important;
      padding: 0 !important;
      min-height: auto !important;
    }
  }
`}),E=function(){function N(F,h){var z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};(0,L.default)(this,N),this.loader=F,this.tokenArgs=h,this.options=z}return(0,te.default)(N,[{key:"upload",value:function(){var h=this;return new(p())(function(z,X){h._initRequest(),h._initListeners(z,X),h._sendRequest(z,X)})}},{key:"abort",value:function(){this.xhr&&this.xhr.abort()}},{key:"_initRequest",value:function(){var h=this.xhr=new XMLHttpRequest;h.open("POST",md.global.FileStoreConfig.uploadHost,!0)}},{key:"_initListeners",value:function(h,z){var X=this.xhr,B=this.loader,x="Couldn't upload file:"+(" "+B.file.name+".");X.addEventListener("error",function(){return z(x)}),X.addEventListener("abort",function(){return z()}),X.upload&&X.upload.addEventListener("progress",function(Q){Q.lengthComputable&&(B.uploadTotal=Q.total,B.uploaded=Q.loaded)})}},{key:"_sendRequest",value:function(h,z){var X=this,B=new FormData;this.loader.file.then(function(x){var Q="."+File.GetExt(x.name),i=File.isPicture(Q);X.url="",(0,f.LP)([{bucket:(0,q.get)(X,"options.bucket")||(i?4:2),ext:Q}],9,X.tokenArgs).then(function(m){B.append("token",m[0].uptoken),B.append("file",x),B.append("key",m[0].key),B.append("x:serverName",m[0].serverName),B.append("x:filePath",m[0].key.replace(m[0].fileName,"")),B.append("x:fileName",m[0].fileName),B.append("x:originalFileName",encodeURIComponent(m[0].fileName.indexOf(".")>-1?m[0].fileName.split(".").slice(0,-1).join("."):m[0].fileName));var v="."+File.GetExt(m[0].fileName);B.append("x:fileExt",v),X.url=m[0].url||m[0].serverName&&m[0].key?m[0].serverName+m[0].key:"",X.xhr.send(B)}),X.xhr.addEventListener("load",function(){var m=X.xhr.response;if(!m||m.error)return z(m&&m.error?m.error.message:genericErrorText);h({default:X.url}),X.url=""})})}}]),N}(),w=function(F){var h=F.bucket,z=F.projectId,X=F.appId,B=F.worksheetId,x=F.data,Q=F.disabled,i=F.onSave,m=F.onActualSave,v=F.className,W=F.placeholder,P=F.minHeight,u=F.showTool,l=F.onClickNull,T=F.changeSetting,G=F.id,D=F.maxWidth,M=F.maxHeight,se=F.dropdownPanelPosition,ae=F.toolbarList,ne=F.isRemark,de=F.clickInit,Ce=de===void 0?!1:de,he=F.autoFocus,fe=he===void 0?!1:he,Ee=F.width,Y=(0,d.useState)(null),oe=(0,ce.Z)(Y,2),ve=oe[0],ue=oe[1],pe=(0,d.useRef)(),Se=(0,d.useRef)(),ye=function(){var Ae=getCookie("i18n_langtag")||md.global.Config.DefaultLang;return Ae==="zh-Hant"?"zh":Ae==="ja"?"ja":Ae!=="en"?"zh-cn":"en"},J={projectId:z,appId:X,worksheetId:B};function me(){t.e(9962).then(t.t.bind(t,49962,23)).then(function(xe){ue(xe),setTimeout(function(){!Q&&Se&&Se.current&&Se.current.editor&&(Se.current.editor.plugins.get("FileRepository").createUploadAdapter=function(Ae){return new E(Ae,J,{bucket:h})},(Ce||fe)&&(Se.current.editor.focus(),Se.current.editor.model.change(function(Ae){Ae.setSelection(Ae.createPositionAt(Se.current.editor.model.document.getRoot(),"end"))})))},20)})}(0,d.useEffect)(function(){Q?$(pe.current).find("a").attr("target","_blank"):!ve&&!Ce&&me()},[Q]);var be=void 0;return Q||!ve?be=d.createElement("div",{className:"ck ck-reset ck-editor ck-rounded-corners ckByHtml",role:"application",dir:"ltr",lang:"zh-cn"},d.createElement("div",{className:"ck ck-editor__main",role:"presentation"},d.createElement("div",{className:"ck-blurred ck ck-content ck-editor__editable ck-rounded-corners ck-editor__editable_inline ck-read-only",lang:"zh-cn",dir:"ltr",role:"textbox",contenteditable:"false",dangerouslySetInnerHTML:{__html:I()(x||W,{whiteList:re,css:!1})}}))):ve&&(be=d.createElement(Z.CKEditor,{editor:ve.default,id:G,config:{language:ye(),toolbar:{items:ae||["undo","redo","findAndReplace","|","paragraph","heading1","heading2","heading3","|","fontFamily","fontSize","fontColor","highlight","|","bold","italic","underline","strikethrough","subscript","superscript","removeFormat","|","bulletedList","numberedList","todoList","|","alignment","indent","outdent","|","horizontalLine","blockQuote","link","code","imageUpload","insertTable","codeBlock","|","sourceEditing"],shouldNotGroupWhenFull:u},heading:{options:[{model:"paragraph",title:_l("\u6B63\u6587"),class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:_l("\u4E00\u7EA7\u6807\u9898"),class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:_l("\u4E8C\u7EA7\u6807\u9898"),class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:_l("\u4E09\u7EA7\u6807\u9898"),class:"ck-heading_heading3"}]},image:{resizeUnit:"px",toolbar:["imageTextAlternative","imageStyle:inline","imageStyle:block","imageStyle:side","|","toggleImageCaption"]},highlight:{options:[{model:"yellowMarker",class:"marker-yellow",title:_l("\u9EC4\u8272\u6807\u8BB0"),color:"var(--ck-highlight-marker-yellow)",type:"marker"},{model:"greenMarker",class:"marker-green",title:_l("\u7EFF\u8272\u6807\u8BB0"),color:"var(--ck-highlight-marker-green)",type:"marker"},{model:"pinkMarker",class:"marker-pink",title:_l("\u7C89\u8272\u6807\u8BB0"),color:"var(--ck-highlight-marker-pink)",type:"marker"},{model:"blueMarker",class:"marker-blue",title:_l("\u84DD\u8272\u6807\u8BB0"),color:"var(--ck-highlight-marker-blue)",type:"marker"}]},fontFamily:{options:["default","\u5B8B\u4F53, STFangsong, SimSun","\u9ED1\u4F53, STHeiti,  SimHei","\u5FAE\u8F6F\u96C5\u9ED1,  Microsoft YaHei","\u6977\u4F53, STKaiti, STKaiti","\u4EFF\u5B8B, STFangsong, FangSong_GB2312","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableProperties","tableCellProperties","toggleTableCaption"]},htmlSupport:{allow:[{name:/^(p|span|div|img|table|tbody|thead|tfoot|tr|td|th|col|colgroup|caption|hr|br|ul|ol|li|blockquote|em|h[2-6])$/,styles:!0},{name:"iframe",attributes:!0,styles:!0}]}},disabled:Q,data:x,ref:Se,onReady:function(Ae){Ae&&Ae.plugins&&(Ae.plugins.get("FileRepository").createUploadAdapter=function(Ne){return new E(Ne,J)})},onChange:function(Ae,Ne){var Me=Ne.getData();T&&T(!0),m&&m(Me)},onBlur:function(Ae,Ne){if(i){var Me=Ne.getData();i(Me)}},onFocus:function(Ae,Ne){setTimeout(function(){!u&&$(pe.current).find(".ck-sticky-panel").show()},300)}})),d.createElement(le,{className:O()(v,{clickInit:Ce,disabled:Q,showTool:u,editorNull:Q&&!x,Hand:!!l,remarkControl:ne}),minHeight:P,maxWidth:D,maxHeight:M,dropdownPanelPosition:se,ref:pe,onClick:function(){Q&&b().isFunction(l)&&l(),!Q&&!ve&&Ce&&!Q&&!ve&&me()},width:Ee},be)};const K=(0,k.Z)(w,{onlyWidth:!0})},88311:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>O});var ce=t(24043),g=t.n(ce),p=t(85105),L=t.n(p),te=t(99663),R=t(22600),y=t(49135),a=t(93196),r=t(45697),o=t.n(r),d=t(67294),Z=t(93967),H=t.n(Z),U=t(92417),f,V,C=(V=f=function(n){(0,a.default)(s,n);function s(j){(0,te.default)(this,s);var A=(0,y.default)(this,(s.__proto__||L()(s)).call(this,j));return A.state={lastColor:A.props.foregroundColor,foregroundColor:A.props.foregroundColor,score:A.props.score,lastScore:A.props.score},A.props.disabled?(A.onSelect=function(){},A.onMouseEnter=function(){},A.onMouseLeave=function(){}):(A.onSelect=A.onSelect.bind(A),A.onMouseEnter=A.onMouseEnter.bind(A),A.onMouseLeave=A.onMouseLeave.bind(A)),A}return(0,R.default)(s,[{key:"componentWillReceiveProps",value:function(A){"score"in A&&this.setState({foregroundColor:A.foregroundColor,lastColor:A.foregroundColor,score:A.score,lastScore:A.score})}},{key:"onSelect",value:function(A,S){S.stopPropagation(),A===this.state.lastScore&&(A=0),this.setState({lastScore:A,score:A}),this.props.callback(A,S)}},{key:"onMouseEnter",value:function(A,S){var I=this.props.hover(A,S)||this.props.foregroundColor;this.setState({foregroundColor:I,score:A})}},{key:"onMouseLeave",value:function(){var A=this.state,S=A.lastScore,I=A.lastColor;this.setState({foregroundColor:I,score:S})}},{key:"renderLine",value:function(A){var S=this,I=this.state,c=I.score,q=I.foregroundColor,b=this.props,k=b.backgroundColor,ee=b.hideTip,re={backgroundColor:k},ie={backgroundColor:q};return d.createElement("div",{key:A,"data-tip":this.props.disabled||ee?"":A+1,onClick:function(E){return S.onSelect(A+1,E)},onMouseEnter:function(E){return S.onMouseEnter(A+1,E)},onMouseLeave:this.onMouseLeave,style:A<c?ie:re,className:"LineScore-item tip-top"})}},{key:"renderStar",value:function(A){var S=this,I=this.state,c=I.score,q=I.foregroundColor,b=this.props,k=b.backgroundColor,ee=b.defaultIcon,re=b.hideTip,ie={color:k},le={color:q};return d.createElement("div",{key:A,className:"StarScore-item tip-top","data-tip":this.props.disabled||re?"":A+1,onClick:function(w){return S.onSelect(A+1,w)},onMouseEnter:function(w){return S.onMouseEnter(A+1,w)},onMouseLeave:this.onMouseLeave},A<c?d.createElement("i",{style:le,className:"icon-task_custom_starred"}):d.createElement("i",{style:ie,className:H()("icon-task_custom_starred",ee)}))}},{key:"render",value:function(){var A=this,S=this.props,I=S.count,c=S.type,q=g()({length:I});return d.createElement("div",{className:"Score-wrapper"},q.map(function(b,k){return c==="line"?A.renderLine(k):A.renderStar(k)}))}}]),s}(d.Component),f.propTypes={type:o().string,foregroundColor:o().string,backgroundColor:o().string,count:o().number,score:o().number,callback:o().func,disabled:o().bool,hover:o().func,hideTip:o().bool},f.defaultProps={type:"line",count:5,score:0,foregroundColor:"#0085e4",backgroundColor:"#e0e0e0",callback:function(){},disabled:!1,hover:function(){return!1}},V);const O=C},26022:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>n});var ce=t(85105),g=t.n(ce),p=t(99663),L=t(22600),te=t(49135),R=t(93196),y=t(86735),a=t(67294),r=t(33867),o=t(71893),d=t(17672),Z=t(5274),H=t(15577),U=t(19575),f=t.n(U),V=t(71346),C=(0,y.Z)([`
  width: 100%;
  .signatureCanvas {
    width: 100%;
    height: 200px;
    border-radius: 4px;
    background: #f5f5f5;
    vertical-align: top;
    display: flex;
    align-items: center;
    justify-content: center;
    img {
      max-width: 100%;
      max-height: 100%;
    }
  }
  .flexRow {
    align-items: center;
  }
`],[`
  width: 100%;
  .signatureCanvas {
    width: 100%;
    height: 200px;
    border-radius: 4px;
    background: #f5f5f5;
    vertical-align: top;
    display: flex;
    align-items: center;
    justify-content: center;
    img {
      max-width: 100%;
      max-height: 100%;
    }
  }
  .flexRow {
    align-items: center;
  }
`]),O=o.ZP.div(C),n=function(s){(0,R.default)(j,s);function j(){var A,S,I,c;(0,p.default)(this,j);for(var q=arguments.length,b=Array(q),k=0;k<q;k++)b[k]=arguments[k];return c=(S=(I=(0,te.default)(this,(A=j.__proto__||g()(j)).call.apply(A,[this].concat(b))),I),I.state={isEdit:!1,signature:"",key:""},I.isComplete=!0,I.initCanvas=function(){var ee=document.getElementById("signatureCanvas");ee&&(ee.width=ee.offsetWidth,ee.height=ee.offsetHeight,ee.getContext("2d"),I.signaturePad=new d.Z(ee,{onBegin:function(){I.setState({isEdit:!0})}}))},I.clear=function(){I.signaturePad.clear(),I.setState({isEdit:!1,signature:"",key:""},function(){setTimeout(function(){I.initCanvas()},100)})},I.saveSignature=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},re=I.state,ie=re.signature,le=re.key;if(ie){ee({bucket:4,key:le});return}I.isComplete&&(I.isComplete=!1,(0,H.LP)([{bucket:4,ext:".png"}]).then(function(E){if(E.error)alert(E.error);else{var w=md.global.FileStoreConfig.uploadHost+"/putb64/-1/key/"+U.Base64.encode(E[0].key);Z.Z.post(w,I.signaturePad.toDataURL("image/png").split(",")[1],{headers:{"Content-Type":"application/octet-stream",Authorization:"UpToken "+E[0].uptoken}}).then(function(K){var N=K.data,F=N||{},h=F.key,z=h===void 0?"":h;V.Z.editSign({url:E[0].url}),ee({bucket:4,key:z}),I.isComplete=!0})}}))},I.getSignature=function(){V.Z.getSign().then(function(ee){if(!ee.url)return alert(_l("\u6682\u65E0\u7B7E\u540D\u8BB0\u5F55"),3);I.setState({isEdit:!1,signature:ee.url,key:ee.key})})},S),(0,te.default)(I,c)}return(0,L.default)(j,[{key:"componentDidMount",value:function(){var S=this;setTimeout(function(){S.initCanvas()},100)}},{key:"checkContentIsEmpty",value:function(){var S=this.state,I=S.isEdit,c=S.signature;return!I&&!c}},{key:"render",value:function(){var S=this.state,I=S.isEdit,c=S.signature;return a.createElement(O,null,c?a.createElement("div",{className:"signatureCanvas"},a.createElement("img",{src:c,className:"w100 h100"})):a.createElement("canvas",{id:"signatureCanvas",className:"signatureCanvas"}),a.createElement("div",{className:"flexRow mTop10",style:{minHeight:20}},!md.global.Account.isPortal&&a.createElement("span",{className:"ThemeColor3 ThemeHoverColor2 pointer flexRow",onClick:this.getSignature},_l("\u4F7F\u7528\u4E0A\u6B21\u7B7E\u540D")),a.createElement("div",{className:"flex"}),(I||!!c)&&a.createElement("span",{className:"ThemeColor3 ThemeHoverColor2 pointer flexRow",onClick:this.clear},a.createElement(r.Z,{icon:"e-signature",className:"Font16 mRight5"}),_l("\u91CD\u65B0\u7B7E\u540D"))))}}]),j}(a.Component)},79221:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>U});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(45697),o=t(93967),d=t.n(o),Z,H,U=(H=Z=function(f){(0,y.default)(V,f);function V(){return(0,L.default)(this,V),(0,R.default)(this,(V.__proto__||p()(V)).apply(this,arguments))}return(0,te.default)(V,[{key:"render",value:function(){var O=this.props,n=O.className,s=O.direction,j=O.height,A=O.widths,S=O.style,I=O.itemStyle,c=O.itemClassName,q=O.active;return a.createElement("div",{className:d()("loadingSkeleton",n,{active:q}),style:S},a.createElement("ul",{style:{flexDirection:s}},A.map(function(b,k){return a.createElement("li",{key:k,style:(0,ce.default)({width:b,height:j},I),className:d()("loadingParagraph",c)})})))}}]),V}(a.Component),Z.propTypes={className:r.string,direction:(0,r.oneOf)(["column","row"]),height:r.string,widths:(0,r.arrayOf)(r.string),style:r.object,itemStyle:r.object,itemClassName:r.string,active:r.bool},Z.defaultProps={direction:"column",height:"18px",widths:["100%","50%","100%","50%"],active:!1},H)},84141:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>X});var ce=t(88106),g=t(88239),p=t(12424),L=t(86735),te=t(67294),R=t(45697),y=t.n(R),a=t(71893),r=t(15577),o=t(96486),d=t.n(o),Z=(0,L.Z)([`
  width: 100%;
  display: flex;
  align-items: center;
  padding-left: 7px;
  padding-right: 7px;
  user-select: none;
  `,`
  `,`
`],[`
  width: 100%;
  display: flex;
  align-items: center;
  padding-left: 7px;
  padding-right: 7px;
  user-select: none;
  `,`
  `,`
`]),H=(0,L.Z)([`
  flex: 1;
  min-width: 20px;
  position: relative;
  height: 6px;
  margin: 7px 0;
  border-radius: 3px;
  background: rgba(0, 0, 0, 0.06);
  cursor: `,`};
  &:hover {
    `,`
  }
`],[`
  flex: 1;
  min-width: 20px;
  position: relative;
  height: 6px;
  margin: 7px 0;
  border-radius: 3px;
  background: rgba(0, 0, 0, 0.06);
  cursor: `,`};
  &:hover {
    `,`
  }
`]),U=(0,L.Z)([`
  height: 6px;
  border-radius: 3px;
`],[`
  height: 6px;
  border-radius: 3px;
`]),f=(0,L.Z)([`
  cursor: pointer;
  position: absolute;
  background: #fff;
  top: -4px;
  display: inline-block;
  width: 14px;
  height: 14px;
  border-radius: 10px;
  border: 2px solid `,`;
  &::before,
  &::after {
    transition: none;
  }
`],[`
  cursor: pointer;
  position: absolute;
  background: #fff;
  top: -4px;
  display: inline-block;
  width: 14px;
  height: 14px;
  border-radius: 10px;
  border: 2px solid `,`;
  &::before,
  &::after {
    transition: none;
  }
`]),V=(0,L.Z)([`
  cursor: pointer;
  position: absolute;
  top: -3px;
  width: 12px;
  height: 12px;
  padding: 2px;
  font-size: 0px;
`],[`
  cursor: pointer;
  position: absolute;
  top: -3px;
  width: 12px;
  height: 12px;
  padding: 2px;
  font-size: 0px;
`]),C=(0,L.Z)([`
  background: #fff;
  display: inline-block;
  width: 8px;
  height: 8px;
  border-radius: 8px;
  border: 2px solid `,`;
  > span {
    font-size: 12px;
    user-select: none;
    white-space: nowrap;
    transform: translateX(calc(-50% + 2px));
    `,`
    margin-top: 10px;
    display: inline-block;
  }
`],[`
  background: #fff;
  display: inline-block;
  width: 8px;
  height: 8px;
  border-radius: 8px;
  border: 2px solid `,`;
  > span {
    font-size: 12px;
    user-select: none;
    white-space: nowrap;
    transform: translateX(calc(-50% + 2px));
    `,`
    margin-top: 10px;
    display: inline-block;
  }
`]),O=(0,L.Z)([`
  position: relative;
  margin-left: 14px;
  .percent {
    position: absolute;
    color: #9e9e9e;
    right: 10px;
    line-height: 36px;
    pointer-events: none;
  }
`],[`
  position: relative;
  margin-left: 14px;
  .percent {
    position: absolute;
    color: #9e9e9e;
    right: 10px;
    line-height: 36px;
    pointer-events: none;
  }
`]),n=(0,L.Z)([`
  border: 1px solid transparent;
  width: 68px;
  height: 36px;
  line-height: 36px;
  padding: 0 12px;
  border-radius: 4px;
  background: #f7f7f7;
  `,`
  &:active {
    border-color: #2196f3;
  }
  `,`
`],[`
  border: 1px solid transparent;
  width: 68px;
  height: 36px;
  line-height: 36px;
  padding: 0 12px;
  border-radius: 4px;
  background: #f7f7f7;
  `,`
  &:active {
    border-color: #2196f3;
  }
  `,`
`]),s=(0,L.Z)([`
  margin-left: `,`;
  `,`
`],[`
  margin-left: `,`;
  `,`
`]),j=(0,r.Q9)(),A=function(x){return j?x.touches[0].clientX:x.clientX},S=j?"touchmove":"mousemove",I=j?"touchend":"mouseup",c=a.ZP.div(Z,function(B){var x=B.hasScale;return x?"padding-bottom: 20px;":""},function(B){var x=B.isMobile;return x?"padding-left: 0px;":""}),q=a.ZP.div(H,function(B){var x=B.disabled;return x?"not-allowed":"pointer"},function(B){var x=B.disabled;return x?"":"background: rgba(0, 0, 0, 0.1);"}),b=a.ZP.div(U),k=a.ZP.span(f,function(B){var x=B.color;return x}),ee=a.ZP.span(V),re=a.ZP.span(C,function(B){var x=B.color;return x},function(B){var x=B.percent;return`
      `+(x<10?"transform: translateX(-3px);":"")+`
      `+(x>90?"transform: translateX(calc(-100% + 3px));":"")+`
    `}),ie=a.ZP.div(O),le=a.ZP.input(n,function(B){var x=B.showAsPercent;return x?"padding-right: 28px;":""},function(B){var x=B.active;return x?`
  border-color: #2196f3;
  background: #fff;
  `:`
      &:hover {
        background: #f2f2f2;
      }`}),E=a.ZP.span(s,function(B){var x=B.isMobile;return x?"4px":"12px"},function(B){var x=B.disabled;return x?"color: rgba(0,0,0,.3);":""});function w(B,x,Q){if(B.type===1)return B.color;if(B.type===2){var i="#2196f3",m=B.colors.map(function(v){return{value:Number(v.key*(Q?100:1)),color:v.value}}).filter(function(v){return d().isNumber(v.value)&&!d().isNaN(x)}).sort(function(v,W){return W.value-v.value});return m.forEach(function(v){x<=v.value&&(i=v.color)}),i}else return"#2196f3"}function K(B){if(!(d().isUndefined(B)||d().isNull(B)||String(B).trim()===""||d().isNaN(Number(B))))return Number(B)}function N(B,x){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(!d().isUndefined(B))return B=B-Q,B%x>x/2&&(B=Math.ceil(B/x)*x),(Math.floor(B/x)*x+Q).toFixed(((String(x).match(/\.(\d+)/)||"")[1]||"").length)}function F(B,x){return B.toFixed(((String(x).match(/\.(\d+)/)||"")[1]||"").length)}function h(B,x,Q,i){return B<x&&(B=x),B>Q&&(B=Q),B}function z(B){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,Q=arguments[2],i=String(B).length;return/\./.test(String(x))&&(i+=((String(x).match(/\.(.*)/)||"")[1]||"").length),Q&&(i+=1),9*i+5}function X(B){var x=B.from,Q=B.className,i=B.style,m=B.readonly,v=B.itemcolor,W=v===void 0?{type:1,color:"#2196f3"}:v,P=B.itemnames,u=P===void 0?[]:P,l=B.valueTextStyle,T=l===void 0?{}:l,G=B.numStyle,D=G===void 0?{}:G,M=B.barStyle,se=M===void 0?{}:M,ae=B.showScale,ne=ae===void 0?!0:ae,de=B.showScaleText,Ce=de===void 0?!0:de,he=B.showTip,fe=he===void 0?!0:he,Ee=B.showInput,Y=Ee===void 0?!0:Ee,oe=B.showNumber,ve=oe===void 0?!0:oe,ue=B.showAsPercent,pe=B.tipDirection,Se=B.triggerWhenMove,ye=Se===void 0?!1:Se,J=B.onChange,me=J===void 0?d().noop:J,be=B.liveUpdate,xe=be===void 0?!0:be,Ae=B.min,Ne=Ae===void 0?0:Ae,Me=B.max,Fe=Me===void 0?100:Me,Be=B.step,we=Be===void 0?5:Be;ue&&(Ne=Ne*100,Fe=Fe*100,we=we*100);var Ie=z(Fe,we,ue),ge=B.disabled||m,Re=(0,te.useRef)({}),Pe=(0,te.useRef)(),ke=(0,te.useRef)(),We=(0,te.useRef)(),Ve=(0,te.useRef)(),it=(0,te.useState)(),Ge=(0,p.Z)(it,2),pt=Ge[0],ot=Ge[1],vt=(0,te.useState)(),At=(0,p.Z)(vt,2),yt=At[0],st=At[1],St=(0,te.useState)(),Qe=(0,p.Z)(St,2),Xe=Qe[0],$e=Qe[1],Ke=(0,te.useState)(K(ue?F(B.value*100,we):B.value)),Ue=(0,p.Z)(Ke,2),He=Ue[0],ze=Ue[1],gt=(0,te.useState)(He),Et=(0,p.Z)(gt,2),ft=Et[0],qe=Et[1],nt=w(W,He,ue),Ze=(0,te.useMemo)(function(){return(u||[]).map(function(Rt){return{percent:Math.ceil(Number(Rt.key*(ue?100:1)-Ne)/(Fe-Ne)*100),value:Number(Rt.key),text:Rt.value}}).filter(function(Rt){return d().isNumber(Rt.value)&&!d().isNaN(Rt.value)&&!d().isUndefined(Rt.text)})},[u]),et=Math.ceil((d().isUndefined(He)?0:He-Ne)/(Fe-Ne)*100);et>100&&(et=100),et<0&&(et=0);function ut(Rt,jt,fn){Rt=h(Rt,Ne,Fe),ze(Rt),jt&&me(ue?Rt/100:Rt),ot(ue?Rt/100:Rt),fn&&qe(Rt)}var xt=(0,te.useCallback)(function(Rt){if(Re.current.active){var jt=Re.current.valuePercent+(A(Rt)-Re.current.clientX)/Re.current.conWidth*100;jt>100&&(jt=100),jt<0&&(jt=0),Re.current.lastClientX=A(Rt),Re.current.newPercent=jt;var fn=Ne+(Fe-Ne)*jt/100;ut(N(fn,we,Ne),!1,!0)}},[]),wt=(0,te.useCallback)(function(Rt){if(Re.current.active){Re.current.active=!1;var jt=Ne+(Fe-Ne)*Re.current.newPercent/100;d().isNumber(jt)&&!d().isNaN(jt)&&ut(N(jt,we,Ne),!0,!0),$e(!1),document.body.style.userSelect="inherit",document.body.style.overflow="auto",window.removeEventListener(S,xt),window.removeEventListener(I,wt)}},[]),kt=function(jt,fn){var Mt=(0,r.pu)(jt.target.value,!1);if(qe(Mt),Mt.trim()==="")ze(void 0),fn&&me(void 0);else{var sn=Number(Mt);d().isNumber(sn)&&!d().isNaN(sn)&&ut(sn,fn)}};return(0,te.useEffect)(function(){Re.current.conWidth=Pe.current.clientWidth,Re.current.barLeft=Pe.current.getBoundingClientRect().left},[ge]),(0,te.useEffect)(function(){var Rt=K(ue?F(B.value*100,we):B.value);ze(Rt),document.activeElement!==Ve.current&&qe(d().isUndefined(Rt)?"":Rt)},[B.value]),(0,te.useEffect)(function(){!d().isUndefined(pt)&&ye&&me(pt)},[pt]),te.createElement(c,{className:Q,style:i,hasScale:u&&u.length&&Ce,isMobile:j,onClick:ge?d().noop:function(Rt){Rt.stopPropagation(),Rt.preventDefault()}},te.createElement(q,{disabled:ge,ref:Pe,style:se,onClick:ge?d().noop:function(Rt){Rt.stopPropagation(),Rt.preventDefault();var jt=(Rt.clientX-Re.current.barLeft)/Re.current.conWidth*100,fn=Ne+(Fe-Ne)*jt/100;ut(N(fn,we,Ne),!0,!0)}},te.createElement(b,{ref:We,style:{width:et+"%",backgroundColor:nt}}),ne&&Ze.filter(function(Rt){return Rt.value>=Ne&&Rt.value<=Fe}).map(function(Rt,jt){return te.createElement(ee,{style:{left:"calc("+Rt.percent+"% - 4px)",cursor:ge?"default":"pointer"},onClick:ge?d().noop:function(fn){ut(Rt.value*(ue?100:1),!0),fn.stopPropagation()}},te.createElement(re,(0,g.default)({key:jt,className:"scale "+(pe?"tip-"+pe:"tip-top")},fe?{"data-tip":Rt.value}:{},{value:Rt.value,color:Rt.percent<et?nt:"rgba(0, 0, 0, 0.06)",percent:Rt.percent}),Ce&&te.createElement("span",{style:{color:et<Rt.percent?"#9e9e9e":"#333"}},Rt.text)))}),!ge&&te.createElement(k,(0,g.default)({className:(pe?"tip-"+pe:"tip-top")+" "+(Xe?"hover":""),ref:ke,color:d().isUndefined(He)?"#f1f1f1":ge?"#bdbdbd":nt,style:{left:"calc("+et+"% - 7px)",cursor:ge?"not-allowed":"pointer"}},fe&&!d().isUndefined(He)?{"data-tip":He+(ue?"%":"")}:{},ge?{}:(0,ce.default)({},j?"onTouchStart":"onMouseDown",function(Rt){document.body.style.userSelect="none",document.body.style.overflow="hidden",Re.current.active=!0,Re.current.clientX=A(Rt),Re.current.valuePercent=et,$e(!0),window.addEventListener(S,xt),window.addEventListener(I,wt)})))),Y&&!ge&&te.createElement(ie,null,te.createElement(le,{showAsPercent:ue&&yt&&!d().isUndefined(ft),active:yt,ref:Ve,type:"text",value:ue&&!yt&&!d().isUndefined(ft)&&ft!==""?ft+"%":ft,onFocus:function(jt){st(!0)},onBlur:function(jt){st(!1),qe(He),xe||kt(jt,!0)},onChange:function(jt){return kt(jt,xe)}}),!!ue&&yt&&!d().isUndefined(ft)&&te.createElement("span",{className:"percent"},"%")),ve&&(!Y||ge)&&te.createElement(E,{style:(0,g.default)({},D,{width:ge?"auto":Ie}),disabled:B.disabled,isMobile:j},!d().isUndefined(He)&&te.createElement(te.Fragment,null,He,!!ue&&!d().isUndefined(He)&&"%")))}X.propTypes={disabled:R.bool,triggerWhenMove:R.bool,from:R.string,tipDirection:R.string,showScaleText:R.bool,showScale:R.bool,showTip:R.bool,showNumber:R.bool,showAsPercent:R.bool,className:R.string,showInput:R.bool,style:(0,R.shape)({}),value:R.number,min:R.number,max:R.number,step:R.number,valueTextStyle:(0,R.shape)({}),barStyle:(0,R.shape)({}),numStyle:(0,R.shape)({}),itemcolor:(0,R.shape)({}),itemnames:(0,R.arrayOf)((0,R.shape)({key:R.string,value:R.string})),onChange:R.func,liveUpdate:R.bool}},22552:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>X});var ce=t(70264),g=t(88239),p=t(12424),L=t(86735),te=t(67294),R=t(45697),y=t.n(R),a=t(71893),r=t(15577),o=t(96486),d=t.n(o),Z=(0,L.Z)([`
  width: 100%;
  display: flex;
  box-sizing: border-box;
  position: relative;
`],[`
  width: 100%;
  display: flex;
  box-sizing: border-box;
  position: relative;
`]),H=(0,L.Z)([`
  flex: 1;
  padding-top: 7px;
  padding-left: 7px;
  padding-right: 7px;
  padding-bottom: 7px;
  display: flex;
  flex-direction: column;
  `,`
`],[`
  flex: 1;
  padding-top: 7px;
  padding-left: 7px;
  padding-right: 7px;
  padding-bottom: 7px;
  display: flex;
  flex-direction: column;
  `,`
`]),U=(0,L.Z)([`
  flex: 1;
  padding-top: 7px;
  padding-left: 7px;
  padding-right: 7px;
  padding-bottom: 7px;
  display: flex;
  flex-direction: row;
  `,`
`],[`
  flex: 1;
  padding-top: 7px;
  padding-left: 7px;
  padding-right: 7px;
  padding-bottom: 7px;
  display: flex;
  flex-direction: row;
  `,`
`]),f=(0,L.Z)([`
  width: 6px;
  cursor: pointer;
  position: absolute;
  background: #fff;
  top: -4px;
  display: inline-block;
  width: 14px;
  height: 14px;
  border-radius: 10px;
  border: 2px solid `,`;
  z-index: 2;
  margin-left: -4px;
  &::before,
  &::after {
    transition: none;
  }
`],[`
  width: 6px;
  cursor: pointer;
  position: absolute;
  background: #fff;
  top: -4px;
  display: inline-block;
  width: 14px;
  height: 14px;
  border-radius: 10px;
  border: 2px solid `,`;
  z-index: 2;
  margin-left: -4px;
  &::before,
  &::after {
    transition: none;
  }
`]),V=(0,L.Z)([`
  flex: 1;
  position: relative;
  height: 6px;
  padding: 0 4px;
  border-radius: 3px;
  background: rgba(0, 0, 0, 0.06);
`],[`
  flex: 1;
  position: relative;
  height: 6px;
  padding: 0 4px;
  border-radius: 3px;
  background: rgba(0, 0, 0, 0.06);
`]),C=(0,L.Z)([`
  position: relative;
  width: 6px;
  height: 100%;
  border-radius: 3px;
  margin-right: 20px;
  background: rgba(0, 0, 0, 0.06);
`],[`
  position: relative;
  width: 6px;
  height: 100%;
  border-radius: 3px;
  margin-right: 20px;
  background: rgba(0, 0, 0, 0.06);
`]),O=(0,L.Z)([`
  height: 6px;
  border-radius: 3px;
`],[`
  height: 6px;
  border-radius: 3px;
`]),n=(0,L.Z)([`
  width: 6px;
  border-radius: 3px;
`],[`
  width: 6px;
  border-radius: 3px;
`]),s=(0,L.Z)([`
  cursor: pointer;
  position: absolute;
  background: #fff;
  top: -4px;
  display: inline-block;
  width: 14px;
  height: 14px;
  border-radius: 10px;
  border: 2px solid `,`;
  z-index: 2;
  &::before,
  &::after {
    transition: none;
  }
`],[`
  cursor: pointer;
  position: absolute;
  background: #fff;
  top: -4px;
  display: inline-block;
  width: 14px;
  height: 14px;
  border-radius: 10px;
  border: 2px solid `,`;
  z-index: 2;
  &::before,
  &::after {
    transition: none;
  }
`]),j=(0,L.Z)([`
  background: #fff;
  display: inline-block;
  width: 8px;
  height: 8px;
  border-radius: 8px;
  border: 2px solid `,`;
`],[`
  background: #fff;
  display: inline-block;
  width: 8px;
  height: 8px;
  border-radius: 8px;
  border: 2px solid `,`;
`]),A=(0,L.Z)([`
  display: flex;
  flex-direction: column;
  overflow: hidden;
  margin-top: -10px;
  padding: 0 4px;
  .pointContent {
    width: `,`;
    display: flex;
    align-items: center;
    cursor: `,`};
    .pointItem {
      flex: 1;
      line-height: `,` !important;
      text-align: center;
      transform: translateX(-50%);
    }
  }
  .scaleContent {
    width: `,`;
    display: flex;
    .contentItem {
      flex: 1;
      text-align: center;
      transform: translateX(-50%);
      &:first-child {
        text-align: right;
        .scaleText {
          text-align: left;
          width: 50%;
        }
      }
      &:last-child {
        text-align: left;
        .scaleText {
          text-align: right;
          width: 50%;
        }
      }
      .scaleText {
        display: inline-block;
        user-select: none;
      }
    }
  }
`],[`
  display: flex;
  flex-direction: column;
  overflow: hidden;
  margin-top: -10px;
  padding: 0 4px;
  .pointContent {
    width: `,`;
    display: flex;
    align-items: center;
    cursor: `,`};
    .pointItem {
      flex: 1;
      line-height: `,` !important;
      text-align: center;
      transform: translateX(-50%);
    }
  }
  .scaleContent {
    width: `,`;
    display: flex;
    .contentItem {
      flex: 1;
      text-align: center;
      transform: translateX(-50%);
      &:first-child {
        text-align: right;
        .scaleText {
          text-align: left;
          width: 50%;
        }
      }
      &:last-child {
        text-align: left;
        .scaleText {
          text-align: right;
          width: 50%;
        }
      }
      .scaleText {
        display: inline-block;
        user-select: none;
      }
    }
  }
`]),S=(0,L.Z)([`
  display: flex;
  flex-direction: row;
  overflow: hidden;
  margin-left: -30px;
  padding: 0 4px;
  .portraitPointContent {
    width: 6px;
    height: `,`;
    margin-left: 0px;
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: `,`};
    .portraitPointItem {
      flex: 1;
      line-height: 14px;
      text-align: center;
      transform: translateY(-50%);
      display:flex;
      align-items:center;
      &:first-child {
        margin-top: 4px
      }
      &:last-child {
        margin-bottom: 4px
      }
    }
  }
  .portraitScaleContent {
    width: 100%;
    display: flex;
    flex-direction: column;
    padding-left: 24px;
    .portraitContentItem {
      flex: 1;
      text-align: left;
      padding: 12px 0;
      .scaleText {
        display: inline-block;
        user-select: none;
        text-align: left;

      }
      &:first-child {
        padding: 0 0 12px;
        .scaleText {
        }
      }
      &:last-child {
        text-align: left;
        padding: 12px 0 0;
        .scaleText {
        }
      }

    }
  }
`],[`
  display: flex;
  flex-direction: row;
  overflow: hidden;
  margin-left: -30px;
  padding: 0 4px;
  .portraitPointContent {
    width: 6px;
    height: `,`;
    margin-left: 0px;
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: `,`};
    .portraitPointItem {
      flex: 1;
      line-height: 14px;
      text-align: center;
      transform: translateY(-50%);
      display:flex;
      align-items:center;
      &:first-child {
        margin-top: 4px
      }
      &:last-child {
        margin-bottom: 4px
      }
    }
  }
  .portraitScaleContent {
    width: 100%;
    display: flex;
    flex-direction: column;
    padding-left: 24px;
    .portraitContentItem {
      flex: 1;
      text-align: left;
      padding: 12px 0;
      .scaleText {
        display: inline-block;
        user-select: none;
        text-align: left;

      }
      &:first-child {
        padding: 0 0 12px;
        .scaleText {
        }
      }
      &:last-child {
        text-align: left;
        padding: 12px 0 0;
        .scaleText {
        }
      }

    }
  }
`]),I=(0,L.Z)([`
  `,`
`],[`
  `,`
`]),c=(0,r.Q9)(),q=a.ZP.div(Z),b=a.ZP.div(H,function(B){var x=B.isMobile;return x?"padding-left: 0px;":""}),k=a.ZP.div(U,function(B){var x=B.isMobile;return x?"padding-left: 0px;":""}),ee=a.ZP.div(f,function(B){var x=B.color;return x}),re=a.ZP.div(V),ie=a.ZP.div(C),le=a.ZP.div(O),E=a.ZP.div(n),w=a.ZP.span(s,function(B){var x=B.color;return x}),K=a.ZP.span(j,function(B){var x=B.color;return x}),N=a.ZP.span(j,function(B){var x=B.color;return x}),F=a.ZP.div(A,function(B){var x=B.total;return x+"%"},function(B){var x=B.disabled;return x?"default":"pointer"},function(B){var x=B.isMobile;return x?"12px":"13px"},function(B){var x=B.total;return x+"%"}),h=a.ZP.div(S,function(B){var x=B.total;return x+"%"},function(B){var x=B.disabled;return x?"default":"pointer"}),z=a.ZP.span(I,function(B){var x=B.disabled;return x?"color: rgba(0,0,0,.3);":""});function X(B){var x=B.className,Q=B.style,i=B.data;i=i===void 0?{}:i;var m=i.options,v=m===void 0?[]:m,W=i.enumDefault2,P=B.value,u=B.disabled,l=B.showTip,T=l===void 0?!0:l,G=B.showScaleText,D=G===void 0?!0:G,M=B.showSelected,se=M===void 0?!1:M,ae=B.tipDirection,ne=B.from,de=B.onChange,Ce=de===void 0?d().noop:de,he=B.direction,fe=he===void 0?"":he,Ee=(0,te.useRef)(),Y=d().find(v,function(Ne){return Ne.key===P}),oe=v.filter(function(Ne){return!Ne.isDeleted&&(Ne.key===P||!Ne.hide)}),ve=function(Me){return d().findIndex(oe,function(Fe){return Fe.key===Me})},ue=(0,te.useState)(),pe=(0,p.Z)(ue,2),Se=pe[0],ye=pe[1],J=(0,te.useState)(0),me=(0,p.Z)(J,2),be=me[0],xe=me[1];(0,te.useEffect)(function(){ye(ve(P))},[P]),(0,te.useEffect)(function(){Se>=0&&xe(Se/(oe.length-1)*100)},[Se]);var Ae=W===1?d().get(oe[Se],"color")||"#f1f1f1":"#2196f3";return c&&fe==="1"?te.createElement(q,{className:x,style:Q,isMobile:c,onClick:u?d().noop:function(Ne){Ne.stopPropagation(),Ne.preventDefault()}},te.createElement(k,null,te.createElement(ie,{ref:Ee},te.createElement(E,{style:{height:be+"%",backgroundColor:Ae}}),(!u||ne==="recordInfo")&&te.createElement(ee,(0,g.default)({className:ae?"tip-"+ae:"tip-top",color:Ae,style:{top:"calc("+be+"% - 7px)"}},T&&!d().isUndefined(Se)?{"data-tip":d().get(oe[Se],"value")}:{}))),te.createElement(h,{total:100/(oe.length-1)*oe.length,disabled:u,onClick:function(Me){if(!u){var Fe=Ee.current.getBoundingClientRect(),Be=Fe.top,we=Fe.height,Ie=Math.ceil((Me.clientY-Be)/(we/(oe.length-1))),ge=(oe[Ie]||{}).key||"";ge&&(ye(Ie),Ce(ge))}}},te.createElement("div",{className:"portraitPointContent",onMouseEnter:function(){u||Ee.current&&(Ee.current.style.background="rgba(0, 0, 0, 0.08)")},onMouseLeave:function(){u||Ee.current&&(Ee.current.style.background="rgba(0, 0, 0, 0.06)")}},oe.map(function(Ne,Me){return te.createElement("div",{className:"portraitPointItem"},te.createElement(ce.Z,{text:te.createElement("span",null,Ne.value),popupPlacement:ae||"top",disable:ne==="recordInfo"&&u?!0:!T},te.createElement(N,{key:Ne.key,color:Me<=Se?Ae:"rgba(0, 0, 0, 0.06)",onClick:u?d().noop:function(Fe){Fe.stopPropagation(),ye(ve(Ne.key)),Ce(Ne.key)}})))})),D&&te.createElement("div",{className:"portraitScaleContent"},oe.map(function(Ne,Me){return te.createElement("span",{className:"portraitContentItem"},te.createElement("span",{style:{color:Me<=Se?"#333":"#9e9e9e"},className:"portraitScaleText"},Ne.value))})))),se&&Y&&te.createElement(z,null,Y.value)):te.createElement(q,{className:x,style:Q,isMobile:c,onClick:u?d().noop:function(Ne){Ne.stopPropagation(),Ne.preventDefault()}},te.createElement(b,null,te.createElement(re,{ref:Ee},te.createElement(le,{style:{width:be+"%",backgroundColor:Ae}}),(!u||ne==="recordInfo")&&!d().isUndefined(Se)&&te.createElement(w,(0,g.default)({className:ae?"tip-"+ae:"tip-top",color:Ae,onClick:function(){if(!P&&!u){var Me=(oe[0]||{}).key||"";Me&&(ye(0),Ce(Me))}},style:{left:"calc("+be+"% - 7px)"}},T&&!d().isUndefined(Se)?{"data-tip":d().get(oe[Se],"value")}:{}))),te.createElement(F,{total:100/(oe.length-1)*oe.length,disabled:u,isMobile:c,onClick:function(Me){if(!u){var Fe=Ee.current.getBoundingClientRect(),Be=Fe.left,we=Fe.width,Ie=Fe.height,ge=Math.ceil((Me.clientX-Be)/(we/(oe.length-1))),Re=(oe[ge]||{}).key||"";Re&&(ye(ge),Ce(Re))}}},te.createElement("div",{className:"pointContent",onMouseEnter:function(){u||Ee.current&&(Ee.current.style.background="rgba(0, 0, 0, 0.08)")},onMouseLeave:function(){u||Ee.current&&(Ee.current.style.background="rgba(0, 0, 0, 0.06)")}},oe.map(function(Ne,Me){return te.createElement("div",{className:"pointItem"},te.createElement(ce.Z,{text:te.createElement("span",null,Ne.value),popupPlacement:ae||"top",disable:ne==="recordInfo"&&u?!0:!T},te.createElement(K,{key:Ne.key,color:Me<=Se?Ae:"rgba(0, 0, 0, 0.06)",onClick:u?d().noop:function(Fe){Fe.stopPropagation(),ye(ve(Ne.key)),Ce(Ne.key)}})))})),D&&te.createElement("div",{className:"scaleContent"},oe.map(function(Ne,Me){return te.createElement("span",{className:"contentItem"},te.createElement("span",{style:{color:Me<=Se?"#333":"#9e9e9e"},className:"scaleText"},Ne.value))})))),se&&Y&&te.createElement(z,null,Y.value))}X.propTypes={disabled:R.bool,className:R.string,from:R.string,tipDirection:R.string,data:(0,R.shape)({}),options:(0,R.shape)([]),value:R.number,onChange:R.func}},66946:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>O});var ce=t(70264),g=t(33867),p=t(52945),L=t.n(p),te=t(85105),R=t.n(te),y=t(99663),a=t(22600),r=t(49135),o=t(93196),d=t(45697),Z=t.n(d),H=t(67294),U=t(93967),f=t.n(U),V,C,O=(C=V=function(n){(0,o.default)(s,n);function s(){return(0,y.default)(this,s),(0,r.default)(this,(s.__proto__||R()(s)).apply(this,arguments))}return(0,a.default)(s,[{key:"render",value:function(){var A=this.props,S=A.href,I=A.text,c=A.type,q=c===void 0?2:c,b=A.className,k=A.style,ee=A.title;return md.global.SysSettings.hideHelpTip?null:H.createElement("span",{className:f()("TxtMiddle pointer stopPropagation",q===3?"ThemeColor3 ThemeHoverColor2":"Gray_75 ThemeHoverColor3",b),style:L()({},{alignItems:"center",display:"inline-flex"},k),onClick:function(ie){ie.preventDefault(),window.open(md.global.Config.HelpUrl?S.replace("https://help.mingdao.com",md.global.Config.HelpUrl):S)}},q<3&&H.createElement(ce.Z,{disable:q>1,popupPlacement:"bottom",text:H.createElement("span",null,ee||_l("\u4F7F\u7528\u5E2E\u52A9"))},H.createElement(g.Z,{icon:"workflow_help",className:"Font16"})),q>1&&H.createElement("span",{className:"mLeft5 Font13"},I))}}]),s}(H.Component),V.propTypes={href:Z().string,text:Z().any,type:Z().number,className:Z().string,style:Z().object,title:Z().string},C)},6100:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>L});var ce=t(85315),g=t(67294),p=t(11595);const L=function(te){var R=te.url,y=R===void 0?"":R,a=te.size,r=a===void 0?24:a,o=te.fill,d=o===void 0?"#2196f3":o,Z=te.className,H=te.addClassName,U=H===void 0?"":H;return g.createElement(p.Q,{className:Z,src:y,beforeInjection:function(V){if(U){var C;(C=V.classList).add.apply(C,(0,ce.Z)(U.split(" ")))}V.setAttribute("style","width: "+r+"px;height: "+r+"px;vertical-align: top;"),V.setAttribute("fill",d)},afterInjection:function(V,C){if(!V){var O=C.getElementsByTagName("title")[0];if(O)try{C.removeChild(O)}catch(n){}if(C&&C.querySelectorAll("*")&&C.querySelectorAll("*").length>0&&y.indexOf("_preserve.svg")===-1)try{C.querySelectorAll("*").forEach(function(n){return n.removeAttribute("fill")})}catch(n){}}}})}},62745:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>O});var ce=t(88239),g=t(42723),p=t(85105),L=t.n(p),te=t(99663),R=t(22600),y=t(49135),a=t(93196),r=t(45697),o=t.n(r),d=t(67294),Z=t(93967),H=t.n(Z),U=t(92876),f,V,C=(V=f=function(n){(0,a.default)(s,n);function s(){return(0,te.default)(this,s),(0,y.default)(this,(s.__proto__||L()(s)).apply(this,arguments))}return(0,R.default)(s,[{key:"componentDidMount",value:function(){var A=this,S=$(this.textarea),I=parseInt(S.css("paddingBottom"),10)+parseInt(S.css("paddingTop"),10)||0,c=this.props.resizeAfterBlur?"input keyup blur":"input keyup",q=this.props.chat;S.height(0).height(this.textarea.scrollHeight-I),S.on(c,function(b){q?$(this).height(0).height(this.scrollHeight-I):$(this).height(this.scrollHeight-I)}),this.props.isSelect&&S.select(),this.props.isFocus&&(S.focus(),this.moveCaretToEnd(S[0])),setTimeout(function(){S.height(A.textarea?A.textarea.scrollHeight-I:0)},0)}},{key:"componentWillReceiveProps",value:function(A){var S=this;this.setState({defaultValue:A.defaultValue},function(){$(S.textarea).trigger("input");var I=$(S.textarea),c=parseInt(I.css("paddingBottom"),10)+parseInt(I.css("paddingTop"),10)||0;I.height(0).height(S.textarea.scrollHeight-c)})}},{key:"moveCaretToEnd",value:function(A){if(typeof A.selectionStart=="number")A.selectionStart=A.selectionEnd=A.value.length;else if(typeof A.createTextRange<"u"){A.focus();var S=A.createTextRange();S.collapse(!1),S.select()}}},{key:"onChange",value:function(A){this.props.onChange&&this.props.onChange(A.target.value,A)}},{key:"render",value:function(){var A=this,S=this.props,I=S.minHeight,c=S.maxHeight,q=S.className,b=S.style,k=S.isSelect,ee=S.isFocus,re=S.resizeAfterBlur,ie=S.name,le=S.value,E=S.defaultValue,w=S.manualRef,K=(0,g.Z)(S,["minHeight","maxHeight","className","style","isSelect","isFocus","resizeAfterBlur","name","value","defaultValue","manualRef"]),N=le!==void 0?{value:le}:{defaultValue:E};return d.createElement("textarea",(0,ce.default)({},K,N,{className:H()("ming Textarea",q),ref:function(h){A.textarea=h,w(h)},onChange:function(h){return A.onChange(h)},style:(0,ce.default)({minHeight:I,maxHeight:c},b)}))}}]),s}(d.Component),f.propTypes={minHeight:o().number,maxHeight:o().number,maxLength:o().number,className:o().string,defaultValue:o().string,placeholder:o().string,isSelect:o().bool,isFocus:o().bool,onChange:o().func,onKeyDown:o().func,onBlur:o().func,resizeAfterBlur:o().bool,name:o().string,manualRef:o().func,chat:o().bool},f.defaultProps={minHeight:100,maxHeight:1e4,defaultValue:"",resizeAfterBlur:!1,chat:!1,manualRef:function(){}},V);const O=C},51197:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>p});var ce=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(70264);function p(L){var te=L.className;return ce.createElement(g.Z,{popupPlacement:"right",text:ce.createElement("span",null,_l("\u5F53\u524D\u7248\u672C\u65E0\u6CD5\u4F7F\u7528\u6B64\u529F\u80FD\uFF0C\u8BF7\u8D2D\u4E70\u6216\u8005\u5347\u7EA7"))},ce.createElement("i",{className:"icon-auto_awesome Font16 mLeft6 Hand "+te,style:{color:"#fdb432"}}))}},22507:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>O});var ce=t(32422),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(45697),r=t.n(a),o=t(67294),d=t(93967),Z=t.n(d),H=t(96486),U=t.n(H),f,V,C=(V=f=function(n){(0,y.default)(s,n);function s(){return(0,L.default)(this,s),(0,R.default)(this,(s.__proto__||p()(s)).apply(this,arguments))}return(0,te.default)(s,[{key:"render",value:function(){var A=this.props,S=A.user,I=A.className,c=A.chatButton,q=A.isSecretary,b=q===void 0?!1:q,k=A.projectId,ee=this.props.disabled||!S.accountId||["user-self","user-sub","user-undefined","user-workflow","user-publicform","user-api","user-integration","2","4","isEmpty"].includes(S.accountId);return o.createElement(ce.Z,{sourceId:S.accountId,disabled:ee,chatButton:c,projectId:k},o.createElement("a",{className:Z()({Gray_6:!S.accountId},I),href:ee||b?"javascript:void(0);":"/user_"+S.accountId,target:"_blank",onClick:function(ie){return(ee||b)&&ie.preventDefault()}},S.userName))}}]),s}(o.Component),f.propTypes={user:r().shape({userName:r().string,accountId:r().string}),className:r().string,chatButton:r().bool,projectId:r().string},f.defaultProps={chatButton:!0},V);const O=C},70450:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>o});var ce=t(88239),g=t(42723),p=t(86735),L=t(67294),te=t(45697),R=t.n(te),y=t(71893),a=(0,p.Z)([`
  display: inline-flex;
  justify-content: center;
  align-items: center;
`],[`
  display: inline-flex;
  justify-content: center;
  align-items: center;
`]),r=y.ZP.div(a);function o(d){var Z=d.icon,H=d.text,U=d.iconSize,f=U===void 0?20:U,V=d.textSize,C=V===void 0?14:V,O=d.textLeft,n=O===void 0?6:O,s=d.iconStyle,j=s===void 0?{}:s,A=d.textStyle,S=A===void 0?{}:A,I=d.afterElement,c=(0,g.Z)(d,["icon","text","iconSize","textSize","textLeft","iconStyle","textStyle","afterElement"]);return L.createElement(r,c,Z&&L.createElement("i",{className:"frontIcon icon icon-"+Z,style:(0,ce.default)({fontSize:f,marginRight:n},j)}),H&&L.createElement("span",{className:"text",style:(0,ce.default)({fontSize:C},S)},H),!!I&&I)}o.propTypes={iconStyle:(0,te.shape)({}),textStyle:(0,te.shape)({}),iconSize:te.number,textSize:te.number,textLeft:te.number,icon:te.string,text:te.string}},9122:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>o});var ce=t(88239),g=t(69288),p=t(72557),L=t(12424),te=t(67294),R=t(15577),y=t(1952),a=t(45697),r=t.n(a);function o(d){var Z=d.confirmType,H=Z===void 0?"primary":Z,U=d.width,f=U===void 0?480:U,V=d.title,C=d.description,O=d.isRequired,n=d.allowNoVerify,s=n===void 0?!1:n,j=d.closeImageValidation,A=d.onOk,S=A===void 0?function(){}:A,I=d.onCancel,c=(0,te.useState)(""),q=(0,L.Z)(c,2),b=q[0],k=q[1],ee=(0,te.useState)(!1),re=(0,L.Z)(ee,2),ie=re[0],le=re[1];function E(){if(O&&(!b||!b.trim())){alert(_l("\u8BF7\u8F93\u5165\u5BC6\u7801"),3);return}(0,R.Gv)({password:b,isNoneVerification:ie,closeImageValidation:j,success:function(){I(),S(b)}})}return te.createElement(g.Z,{visible:!0,className:"verifyPasswordConfirm",width:f,overlayClosable:!1,title:V||_l("\u5B89\u5168\u9A8C\u8BC1"),description:C,onOk:E,onCancel:I,confirm:H},te.createElement(p.Z,{showSubTitle:!1,autoFocus:!0,isRequired:O,allowNoVerify:s,onChange:function(K){var N=K.password,F=K.isNoneVerification;k(N),le(F)}}))}o.propTypes={width:a.number,title:a.string,description:a.string,isRequired:a.bool,closeImageValidation:a.bool,onOk:a.func,onCancel:a.func},o.confirm=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,y.Z)(o,(0,ce.default)({},d,{closeFnName:"onCancel"}))}},72557:(lt,Te,t)=>{"use strict";if(t.d(Te,{Z:()=>O}),!/^(1887|7596|7798)$/.test(t.j))var ce=t(70264);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(60967);var p=t(67272),L=t.n(p),te=t(51024),R=t(86735),y=t(67294),a=t(71893);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(15577);var o=(0,R.Z)([`
  box-shadow: none !important;
  line-height: 28px !important;
  border-radius: 3px !important;
  border: 1px solid #ccc !important;
  margin-bottom: 10px;
  &.ant-input-affix-wrapper-focused {
    border-color: #2196f3;
  }
`],[`
  box-shadow: none !important;
  line-height: 28px !important;
  border-radius: 3px !important;
  border: 1px solid #ccc !important;
  margin-bottom: 10px;
  &.ant-input-affix-wrapper-focused {
    border-color: #2196f3;
  }
`]),d=(0,R.Z)([`
  height: 36px;
  background: #f5f5f5;
  border-radius: 3px;
  border: 1px solid #ddd;
  padding: 0 10px;
`],[`
  height: 36px;
  background: #f5f5f5;
  border-radius: 3px;
  border: 1px solid #ddd;
  padding: 0 10px;
`]),Z=(0,R.Z)([`
  margin: 1px 0 0 -8px;
  color: #f44336;
`],[`
  margin: 1px 0 0 -8px;
  color: #f44336;
`]),H=(0,R.Z)([`
  color: #9e9e9e;
  cursor: pointer;
  &:hover {
    color: #757575;
  }
`],[`
  color: #9e9e9e;
  cursor: pointer;
  &:hover {
    color: #757575;
  }
`]),U=(0,a.ZP)(te.default.Password)(o),f=a.ZP.div(d),V=a.ZP.div(Z),C=a.ZP.div(H);function O(n){var s=n.className,j=n.showSubTitle,A=n.isRequired,S=n.autoFocus,I=n.allowNoVerify,c=n.showAccountEmail,q=n.onChange,b=q===void 0?function(){}:q,k=md.global.Account.mobilePhone.replace(/((\+86)?\d{3})\d*(\d{4})/,"$1****$3"),ee=md.global.Account.email.replace(/(.{3}).*(@.*)/,"$1***$2"),re=function(){return y.createElement("span",{className:"ThemeColor Hand",onClick:function(){window.open("/personal?type=account")}},_l("\u524D\u5F80\u8BBE\u7F6E"))},ie=function(){return y.createElement("span",{className:"mTop5 InlineBlock"},y.createElement(g.Z,{className:"InlineBlock TxtTop Gray",text:_l("\u4E00\u5C0F\u65F6\u5185\u514D\u9A8C\u8BC1"),onClick:function(w){return b({isNoneVerification:w})}}))};return y.createElement("div",{className:s},j&&y.createElement("div",{className:"Font17 bold mBottom10 verifyPasswordTitle"},_l("\u5B89\u5168\u9A8C\u8BC1")),y.createElement("div",{className:"Font13 Gray label"},_l("\u8D26\u53F7")),y.createElement(f,{className:"mTop10 flexRow alignItemsCenter"},c&&ee?ee:k||ee),y.createElement("div",{className:"Font13 mTop20 mBottom10 relative flexRow alignItemsCenter"},A&&y.createElement(V,{className:"Absolute"},"*"),y.createElement("span",{className:"flex Gray label"},_l("\u5BC6\u7801")),y.createElement(ce.Z,{action:"hover",tooltipStyle:{maxWidth:360},text:y.createElement(y.Fragment,null,A?y.createElement("div",null,y.createElement("div",null,_l("\u6B64\u64CD\u4F5C\u5FC5\u987B\u9A8C\u8BC1\u7528\u6237\u5BC6\u7801\u3002")),y.createElement("div",null,_l("\u5982\u679C\u4F60\u662F\u96C6\u6210\u5E10\u53F7\uFF0C\u8FD8\u6CA1\u6709\u8BBE\u7F6E\u8FC7\u5F53\u524D\u5E73\u53F0\u5BC6\u7801\uFF0C\u8BF7\u5148\u5728\u4E2A\u4EBA\u4E2D\u5FC3\u8BBE\u7F6E\u5BC6\u7801")),re()):y.createElement("div",null,y.createElement("div",null,_l("\u5982\u679C\u4F60\u662F\u96C6\u6210\u5E10\u53F7\uFF0C\u8FD8\u6CA1\u6709\u8BBE\u7F6E\u8FC7\u5F53\u524D\u5E73\u53F0\u5BC6\u7801\uFF1A")),y.createElement("div",null,_l("- \u4E0D\u9700\u8981\u8F93\u5165\uFF0C\u4E0D\u8FDB\u884C\u5B89\u5168\u9A8C\u8BC1")),y.createElement("div",null,_l("- \u5982\u679C\u4F60\u5E0C\u671B\u63D0\u9AD8\u5B89\u5168\u6027\uFF0C\u53EF\u5728\u4E2A\u4EBA\u4E2D\u5FC3\u8BBE\u7F6E\u5BC6\u7801\u3002\u8BBE\u7F6E\u540E\u5C06\u5FC5\u987B\u8F93\u5165\u5BC6\u7801\u8FDB\u884C\u5B89\u5168\u9A8C\u8BC1"),re())))},y.createElement(C,{className:"flexRow alignItemsCenter"},y.createElement("i",{className:"icon icon-workflow_help mRight5 Font16"}),y.createElement("span",null,_l("\u6CA1\u6709\u5BC6\u7801"))))),y.createElement("div",{style:{height:0,overflow:"hidden"}},"// \u7528\u6765\u907F\u514D\u6D4F\u89C8\u5668\u5C06\u7528\u6237\u540D\u585E\u5230\u5176\u5B83input\u91CC",y.createElement("input",{type:"text"})),y.createElement(U,{autoFocus:S,autoComplete:"new-password",placeholder:_l("\u8BF7\u8F93\u5165\u5F53\u524D\u7528\u6237\u7684\u5BC6\u7801"),onChange:function(E){return b({password:E.target.value})}}),I?(0,r.Q9)()?ie():y.createElement(ce.Z,{popupPlacement:"bottom",text:_l("\u6B64\u540E1\u5C0F\u65F6\u5185\u5728\u5F53\u524D\u8BBE\u5907\u4E0A\u5E94\u7528\u548C\u5BA1\u6279\u64CD\u4F5C\u65E0\u9700\u518D\u6B21\u9A8C\u8BC1")},ie()):"")}},93567:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>Z});var ce=t(88239),g=t(12424),p=t(31277),L=t.n(p);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(31929);var R=t(67294),y=t(93967),a=t.n(y);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(15577);var o=function(U){if(!U)return 1;var f=U.backingStorePixelRatio||U.webkitBackingStorePixelRatio||U.mozBackingStorePixelRatio||U.msBackingStorePixelRatio||U.oBackingStorePixelRatio||U.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/f},d=function(U){var f=U.children,V=U.style,C=U.className,O=U.markStyle,n=U.markClassName,s=U.zIndex,j=s===void 0?9:s,A=U.gapX,S=A===void 0?212:A,I=U.gapY,c=I===void 0?222:I,q=U.width,b=q===void 0?120:q,k=U.height,ee=k===void 0?64:k,re=U.rotate,ie=re===void 0?-22:re,le=U.image,E=U.content,w=U.offsetLeft,K=U.offsetTop,N=U.fontStyle,F=N===void 0?"normal":N,h=U.fontWeight,z=h===void 0?"normal":h,X=U.fontColor,B=X===void 0?"rgba(0,0,0,.15)":X,x=U.fontSize,Q=x===void 0?16:x,i=U.fontFamily,m=i===void 0?"sans-serif":i,v=U.prefixCls,W=(0,R.useContext)(te.default.ConfigContext),P=W.getPrefixCls,u=P("pro-layout-watermark",v),l=a()(u+"-wrapper",C),T=a()(u,n),G=(0,R.useState)(""),D=(0,g.Z)(G,2),M=D[0],se=D[1];return(0,R.useEffect)(function(){var ae=document.createElement("canvas"),ne=ae.getContext("2d"),de=o(ne),Ce=(S+b)*de+"px",he=(c+ee)*de+"px",fe=w||S/2,Ee=K||c/2;if(ae.setAttribute("width",Ce),ae.setAttribute("height",he),ne){ne.translate(fe*de,Ee*de),ne.rotate(Math.PI/180*Number(ie));var Y=b*de,oe=ee*de;if(le){var ve=new Image;ve.crossOrigin="anonymous",ve.referrerPolicy="no-referrer",ve.src=le,ve.onload=function(){ne.drawImage(ve,0,0,Y,oe),se(ae.toDataURL())}}else if(E){var ue=Number(Q)*de;ne.font=F+" normal "+z+" "+ue+"px/"+oe+"px "+m,ne.fillStyle=B,ne.fillText(E,0,0),se(ae.toDataURL())}}else console.error("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301Canvas")},[S,c,w,K,ie,F,z,b,ee,m,B,le,E,Q]),R.createElement("div",{style:(0,ce.default)({position:"relative"},V),className:l},f,R.createElement("div",{className:T,style:(0,ce.default)({zIndex:j,position:"absolute",left:0,top:0,width:"100%",height:"100%",backgroundSize:S+b+"px",pointerEvents:"none",backgroundRepeat:"repeat",backgroundImage:"url('"+M+"')"},O)}))};const Z=function(H){return(0,R.useEffect)(function(){return window.hadWaterMark=!0,function(){window.hadWaterMark=!1}},[]),md.global.Account.accountId&&H.projectId!=="external"&&((0,r.vo)(H.projectId,!0).enabledWatermark||md.global.Account.watermark==1&&md.global.Account.isPortal)||H.showWaterMark?R.createElement(d,(0,ce.default)({content:md.global.Account.fullname+"/"+((_.get(md,"global.Account.mobilePhone")||"").substr(-4,4)||(_.get(md,"global.Account.email")||"").replace(/@.*/g,"")),className:"w100 h100",rotate:45,fontSize:18,gapX:200,gapY:200,fontColor:"rgba(0, 0, 0, .06)",markStyle:{zIndex:H.zIndex||1e8}},H),H.children):H.children}},15937:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>ee});var ce=t(69288),g=t(20148),p=t(60385),L=t.n(p),te=t(25273),R=t(97373),y=t(94055),a=t(33867),r=t(88239),o=t(85105),d=t.n(o),Z=t(99663),H=t(22600),U=t(49135),f=t(93196),V=t(86735),C=t(67294),O=t(65395),n=t(89954),s=t(96486),j=t.n(s),A=t(72728),S=t.n(A),I=t(71893),c,q,b=(0,V.Z)([`
  width: 30px;
  text-align: center;
  right: 10px;
  top: `,`;
  z-index: 10;
  padding: 6px;
  border-radius: `,`;
  background: #fff;
  box-shadow: 0 3px 6px 0px rgba(0, 0, 0, 0.16);
`],[`
  width: 30px;
  text-align: center;
  right: 10px;
  top: `,`;
  z-index: 10;
  padding: 6px;
  border-radius: `,`;
  background: #fff;
  box-shadow: 0 3px 6px 0px rgba(0, 0, 0, 0.16);
`]),k=I.ZP.div(b,function(re){var ie=re.isMobile,le=re.icon;return le==="gpsFixed"?ie?"140px":"470px":ie?"180px":"520px"},function(re){return re==="gpsFixed"?" 50%":"unset"}),ee=(q=c=function(re){(0,f.default)(ie,re);function ie(le){(0,Z.default)(this,ie);var E=(0,U.default)(this,(ie.__proto__||d()(ie)).call(this,le));return E.conRef=C.createRef(),E.handleCurrPos=function(w,K){var N=E.props.defaultAddress;if(w==="complete")E.setState({currentLocation:K,defaultLocation:K}),N?E.setPosition(N.x,N.y):E.setPosition(K.position.lng,K.position.lat);else if(w==="error"&&N){var F=E.getCurrentLocation((0,r.default)({},N));E.setPosition(N.x,N.y),E.setState({currentLocation:F,defaultLocation:F})}},E.getCurrentLocation=function(w){var K=w.x,N=w.y,F=w.title,h=w.address;return{addressComponent:{building:F},formattedAddress:h,position:{lng:K,lat:N}}},E.geoLocation=function(w,K,N,F){E._maphHandler&&E.setState({currentLocation:E.compareDistance(w,K)?E.getCurrentLocation({x:w,y:K,title:F,address:N}):void 0,zoom:E._maphHandler.map.getZoom()},function(){return E.setPosition(w,K,E.state.zoom)})},E.handleChange=function(w){var K=E.props.distance,N=E._maphHandler.map&&E._maphHandler.map.getCenter(),F=N.lat,h=N.lng;if(!K){new AMap.PlaceSearch().search(w.currentTarget.value.trim(),function(z,X){E.setState({list:z==="complete"?(j().get(X,"poiList.pois")||[]).filter(function(B){return B.location&&B.location.lng}):[]})});return}new AMap.PlaceSearch({citylimit:!0,pageSize:50}).searchNearBy(w.currentTarget.value.trim(),[h,F],K,function(z,X){E.setState({list:z==="complete"?(j().get(X,"poiList.pois")||[]).filter(function(B){return B.location&&B.location.lng}):[]})})},E.handleClearAndSet=function(w){(document.getElementsByClassName("MDMapInput")[0]||{}).value="",E.setPosition(w.lng,w.lat)},E.setZoom=function(w){var K=E.state,N=K.currentLocation,F=N===void 0?{}:N,h=K.defaultLocation,z=h===void 0?{}:h,X=K.zoom;if(X>18||X<3){E.setState({zoom:X>18?18:3});return}E.setState({zoom:w==="plus"?X+1:X-1},function(){var B=j().get(F||z,"position")||{},x=B.lng,Q=B.lat;E._maphHandler.setPosition(x,Q,E.state.zoom)})},E.state={defaultLocation:null,currentLocation:null,defaultList:[],list:[],zoom:15},E}return(0,H.default)(ie,[{key:"componentDidMount",value:function(){var E=this;this._MapLoader=new O.Z,this._MapLoader.loadJs().then(function(){E.initMapObject()}),this.conRef.current&&this.conRef.current.querySelector(".MDMapInput")&&this.conRef.current.querySelector(".MDMapInput").focus()}},{key:"componentWillUnmount",value:function(){this._maphHandler&&(this._maphHandler.destroyMap(),this._maphHandler=null)}},{key:"initMapObject",value:function(){var E=this,w=this.props.defaultAddress;this._maphHandler=new n.Z(this._mapContainer,{zoom:15}),this._maphHandler.getCurrentPos(this.handleCurrPos,!w),this._maphHandler.onClick(function(K,N,F,h){E.compareDistance(K,N)?E.geoLocation(K,N,F,h):alert(_l("\u4E0D\u5728\u5B9A\u4F4D\u8303\u56F4\u5185"),2)}),this._maphHandler.moveEnd(function(K,N,F,h){E.geoLocation(K,N,F,h)})}},{key:"setPosition",value:function(E,w){var K=this,N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,F=this.props.distance,h=this.state.zoom;if(!this.compareDistance(E,w)){this.setState({currentLocation:void 0,defaultList:[]});return}this._maphHandler&&(this._maphHandler.setPosition(E,w,N?h:this._maphHandler.map.getZoom()),new AMap.PlaceSearch().searchNearBy("",[E,w],F||100,function(z,X){z==="complete"?K.setState({defaultList:X.poiList.pois.filter(function(B){return B.location&&B.location.lng&&K.compareDistance(B.location.lng,B.location.lat)})}):K.setState({defaultList:[]})}))}},{key:"compareDistance",value:function(E,w){var K=this.props.distance,N=this.state.defaultLocation,F=(N||{}).position||{};if(!K)return!0;var h=new AMap.LngLat(F.lng||"",F.lat||""),z=h.distance([E,w]);return z<K}},{key:"renderOperatorIcon",value:function(){var E=this,w=this.props,K=w.isMobile,N=w.onClose,F=this.state.defaultLocation;return C.createElement(C.Fragment,null,C.createElement("div",{className:"Absolute",style:{right:12,top:11,borderRadius:"50%",background:"#fff",width:16,height:16,zIndex:9}}),C.createElement(a.Z,{icon:"delete_out",className:"Gray_9e Font20 Absolute ThemeHoverColor3 pointer",style:{right:10,top:10,zIndex:10},onClick:N}),F&&F.position&&C.createElement(k,{isMobile:K,icon:"gpsFixed",className:"Gray_9e Absolute ThemeHoverColor3 pointer flexRow gpsFixedIcon",onClick:function(){return E.setPosition(F.position.lng,F.position.lat)}},C.createElement(a.Z,{icon:"gps_fixed",className:"Font18"})),F&&F.position&&C.createElement(k,{className:"Gray_9e Absolute pointer flexColumn zoomWrap",isMobile:K,icon:"plusMinus"},C.createElement("div",{className:"ThemeHoverColor3",onClick:function(){return E.setZoom("plus")}},C.createElement(a.Z,{icon:"plus",className:"Font14"})),C.createElement("div",{className:"w100 mTop2",style:{height:1,border:"1px solid #ddd"}}),C.createElement("div",{className:"ThemeHoverColor3 pTop3",style:{height:19},onClick:function(){return E.setZoom("minus")}},C.createElement(a.Z,{icon:"minus",className:"Font14"}))))}},{key:"renderSearch",value:function(){var E=this,w=this.props.distance;return C.createElement(C.Fragment,null,C.createElement("div",{className:"mLeft16 mRight16 relative"},C.createElement(a.Z,{icon:"search",className:"Gray_9e Font16 Absolute",style:{left:12,top:10}}),C.createElement("input",{type:"text",placeholder:_l("\u641C\u7D22\u5730\u70B9"),className:"MDMapInput Gray",onKeyUp:function(N){return N.keyCode===13&&E.handleChange(N)},onChange:this.handleChange})),!!w&&C.createElement("div",{className:"distanceInfo"},C.createElement("div",{className:"Font12",style:{color:"#4CAF50"}},C.createElement(a.Z,{icon:"task-setting_promet",className:"Font14 mRight5"}),_l("\u4EC5\u80FD\u5B9A\u4F4D\u5468\u8FB9%0\u7C73\u4EE5\u5185\u7684\u5730\u70B9",w))))}},{key:"renderSearchList",value:function(){var E=this,w=this.state,K=w.currentLocation,N=w.list,F=w.defaultList,h=((document.getElementsByClassName("MDMapInput")[0]||{}).value||"").trim();return C.createElement(te.Z,{className:"flex mTop5"},K&&C.createElement("div",{className:"MDMapList"},C.createElement("div",{className:"flexColumn flex ellipsis",onClick:function(){return E.props.onAddressChange({lng:K.position.lng,lat:K.position.lat,address:K.formattedAddress,name:(K.addressComponent||{}).building})}},C.createElement("div",{className:"ellipsis bold Gray"},_l("(\u5F53\u524D\u4F4D\u7F6E)"),(K.addressComponent||{}).building),C.createElement("div",{className:"ellipsis Gray_9e"},K.formattedAddress||_l("\u7ECF\u5EA6%0,\u7EAC\u5EA6%1",K.position.lng,K.position.lat)))),(h?N:F).map(function(z,X){return z.address&&typeof z.address=="string"?C.createElement("div",{className:"MDMapList"},C.createElement("div",{key:X,className:"flexColumn flex ellipsis",onClick:function(){E._maphHandler.getAddress(z.location.lng,z.location.lat,function(x){E.geoLocation(z.location.lng,z.location.lat,x||z.address,z.name),E.props.onAddressChange({lng:z.location.lng,lat:z.location.lat,address:x||z.address,name:z.name})})}},C.createElement("div",{className:"ellipsis bold Gray"},z.name),C.createElement("div",{className:"ellipsis Gray_9e"},z.address)),C.createElement(y.default,{title:_l("\u5B9A\u4F4D")},C.createElement(a.Z,{icon:"location",className:"Font20 Gray_9e ThemeHoverColor3 pointer",onClick:function(){return E.handleClearAndSet(z.location)}}))):null}))}},{key:"render",value:function(){var E=this,w=this.props.isMobile,K=this.state.defaultLocation;return w?C.createElement(L(),{popup:!0,animationType:"slide-up",className:"MDMap",style:{height:"90%"},visible:!0},C.createElement("div",{className:"flexColumn leftAlign h100 relative"},this.renderOperatorIcon(),C.createElement("div",{className:"Relative"},C.createElement("div",{className:"mBottom5",style:{height:250},ref:function(F){return E._mapContainer=F}}),K&&C.createElement("img",{src:S(),className:"markMapImg"})),this.renderSearch(),this.renderSearchList())):C.createElement(ce.Z.DialogBase,{className:"MDMap",width:"1080",visible:!0,overlayClosable:!1},this.renderOperatorIcon(),C.createElement("div",{ref:this.conRef,className:"flexRow",style:{height:600}},C.createElement("div",{className:"MDMapSidebar flexColumn"},this.renderSearch(),this.renderSearchList()),C.createElement("div",{className:"flex h100 Relative"},C.createElement("div",{className:"h100",ref:function(F){return E._mapContainer=F}}),K&&C.createElement("img",{src:S(),className:"markMapImg"}))))}}]),ie}(C.Component),c.defaultProps={isMobile:!1,distance:0,onAddressChange:function(){},onClose:function(){}},q)},89954:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>L});var ce=t(88239),g=t(99663),p=t(22600),L=function(){function te(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.createElement("div"),y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,g.default)(this,te),this.searchMarker=null,this.rangeCircle=null,this.map=new AMap.Map(R,(0,ce.default)({resizeEnable:!0},y))}return(0,p.default)(te,[{key:"destroyMap",value:function(){this.map=null,this.searchMarker=null,this.rangeCircle=null}},{key:"setPosition",value:function(y,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:15;this.map.setZoomAndCenter(r,[y,a])}},{key:"initTool",value:function(){this.map.addControl(new AMap.ToolBar),this.map.addControl(new AMap.Scale)}},{key:"_bindListener",value:function(y,a,r){y.on(a,r)}},{key:"_unBindListener",value:function(y,a,r){y.off(a,r)}},{key:"onClick",value:function(y){var a=this,r=this.map;this._bindListener(r,"click",function(o){var d=o.lnglat.getLng(),Z=o.lnglat.getLat();a.getAddress(d,Z,function(H,U){y(d,Z,H,U)})})}},{key:"moveEnd",value:function(y){var a=this,r=this.map;this._bindListener(r,"moveend",function(){var o=r.getCenter(),d=o.lng,Z=o.lat;a.getAddress(d,Z,function(H,U){y(d,Z,H,U)})})}},{key:"autoCompleteSearch",value:function(y,a){var r=new AMap.Autocomplete({});r.search(y,a)}},{key:"addSearchMarker",value:function(y,a){var r=this.map;this.searchMarker=new AMap.Marker({icon:"https://webapi.amap.com/theme/v1.3/markers/n/mark_r.png",position:[y,a],map:r})}},{key:"removeMarker",value:function(y){this[y]&&(this[y].setMap(null),this[y]=null)}},{key:"addRangeCircle",value:function(y,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:300;this.rangeCircle=new AMap.Circle({center:[y,a],radius:r})}},{key:"removeRangeCircle",value:function(){this.rangeCircle&&(this.rangeCircle=null)}},{key:"getCurrentPos",value:function(y){var a=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=new AMap.Geolocation({timeout:1e4,zoomToAccuracy:!0});o.getCurrentPosition(function(d,Z){d==="error"&&r?a.getCurrentCityPos(y):y(d,Z)})}},{key:"getCurrentCityPos",value:function(y){var a=new AMap.CitySearch;a.getLocalCity(function(r,o){if(r==="complete"&&o.info==="OK"){var d=o.rectangle.split(/[,;]/);y(r,{addressComponent:{building:o.city},formattedAddress:"",position:{lng:((parseFloat(d[0])+parseFloat(d[2]))/2).toString(),lat:((parseFloat(d[1])+parseFloat(d[3]))/2).toString()}})}else y(r)})}},{key:"getAddress",value:function(y,a,r){var o=new AMap.Geocoder({city:"\u5168\u56FD"});o.getAddress([y,a],function(d,Z){if(d==="complete"&&Z.info==="OK"){var H=Z.regeocode.addressComponent.building,U=Z.regeocode.formattedAddress;r(U,H)}else r("","")})}},{key:"getLocation",value:function(y,a){var r=new AMap.Geocoder({city:"\u5168\u56FD"});r.getLocation(y,function(o,d){if(o==="complete"&&d.info==="OK"){var Z=d.geocodes[0].location.lng,H=d.geocodes[0].location.lat,U=d.geocodes[0].formattedAddress;a(Z,H,U)}})}}]),te}()},65395:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>y});var ce=t(46593),g=t.n(ce),p=t(99663),L=t(22600),te="https://webapi.amap.com/maps?v=1.3&key=9aedaf173cec6f03d4b9ce7c8a9159c5&plugin=AMap.Autocomplete,AMap.PlaceSearch,AMap.Geocoder,AMap.Geolocation,AMap.ToolBar,AMap.Scale,AMap.CitySearch",R=void 0,y=function(){function a(){(0,p.default)(this,a)}return(0,L.default)(a,[{key:"loadJs",value:function(o){return R||new(g())(function(d,Z){$.ajax({url:o||te,dataType:"script"});var H=setInterval(function(){window.AMap&&window.AMap.Map&&(d(window.AMap),clearInterval(H))},500)})}}]),a}()},40240:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>Z});var ce=t(88239),g=t(42723),p=t(85105),L=t.n(p),te=t(99663),R=t(22600),y=t(49135),a=t(93196),r=t(67294),o=t(96486),d=t.n(o);function Z(H){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=U.onlyWidth;return function(V){(0,a.default)(C,V);function C(O){(0,te.default)(this,C);var n=(0,y.default)(this,(C.__proto__||L()(C)).call(this,O));n.handleUpdate=function(){n.con&&n.setState({size:{width:n.con.clientWidth,height:n.con.clientHeight}})};var s=O.width&&O.height?{width:O.width,height:O.height}:void 0;return n.state={id:(Math.random()*Math.random()).toString(32),size:s},n.clientWidth=0,n}return(0,R.default)(C,[{key:"componentDidMount",value:function(){var n=this;if(this.state.size)return;function s(){this.setState({size:this.con?{width:this.con.clientWidth,height:this.con.clientHeight}:{}})}s.apply(this),this.debounceHandleUpdate=d().debounce(this.handleUpdate,100),typeof ResizeObserver<"u"?(this.resizeOb=new ResizeObserver(function(){n.con&&(Math.abs(n.con.clientWidth-n.clientWidth)>10||n.props.watchHeight&&Math.abs(n.con.clientHeight-n.clientHeight)>10)&&n.updateWidth()}),this.resizeOb.observe(this.con)):this.watchWidth()}},{key:"componentDidUpdate",value:function(){this.con&&this.size&&(this.con.clientWidth!==this.state.size.width||this.con.clientHeight!==this.state.size.height)&&this.setState({size:{width:this.con.clientWidth,height:this.con.clientHeight}})}},{key:"componentWillUnmount",value:function(){this.resizeOb&&(this.resizeOb.unobserve(this.con),this.resizeOb.disconnect(),delete this.resizeOb),this.sizeWatcher&&(clearInterval(this.sizeWatcher),delete this.sizeWatcher)}},{key:"updateWidth",value:function(){this.con&&(this.clientWidth=this.con.clientWidth,this.clientHeight=this.con.clientHeight,this.debounceHandleUpdate())}},{key:"watchWidth",value:function(){var n=this;this.updateWidth(),this.sizeWatcher=setInterval(function(){n.con&&(Math.abs(n.con.clientWidth-n.clientWidth)>10||n.props.watchHeight&&Math.abs(n.con.clientHeight-n.clientHeight)>10)&&n.updateWidth()},100)}},{key:"render",value:function(){var n=this,s=this.props,j=s.height,A=(0,g.Z)(s,["height"]),S=this.state,I=S.size,c=S.id;return r.createElement("div",{className:"autosize",id:c,ref:function(b){return n.con=b},style:{width:"100%",height:f?"auto":"100%"}},I&&r.createElement(H,(0,ce.default)({},A,{updateSize:this.handleUpdate,ref:function(b){return n.table=b},width:I.width,height:j||I.height})))}}]),C}(r.PureComponent)}},46891:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>d});var ce=t(85105),g=t.n(ce),p=t(99663),L=t(22600),te=t(49135),R=t(93196),y=t(67294);if(!/^(1887|7596)$/.test(t.j))var a=t(70070);if(!/^(1887|7596)$/.test(t.j))var r=t(24975);var o=function(H,U){var f=function(V){(0,R.default)(C,V);function C(){return(0,p.default)(this,C),(0,te.default)(this,(C.__proto__||g()(C)).apply(this,arguments))}return(0,L.default)(C,[{key:"render",value:function(){return y.createElement(r.SV,{fallback:function(s){return y.createElement(a.Z,{isSeriousError:U,errorData:s})}},y.createElement(H,this.props))}}]),C}(y.Component);return f};const d=function(Z){return typeof Z!="boolean"?o(Z,!1):function(H){return o(H,!0)}}},27749:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>I});var ce=t(1952),g=t(69288),p=t(25273),L=t(54208),te=t(33867),R=t(60967),y=t(95679),a=t(88239),r=t(85105),o=t.n(r),d=t(99663),Z=t(22600),H=t(49135),U=t(93196),f=t(67294),V=t(19207),C=t(93967),O=t.n(C),n=t(96486),s=t.n(n),j,A,S=(A=j=function(c){(0,U.default)(q,c);function q(){var b,k,ee,re;(0,d.default)(this,q);for(var ie=arguments.length,le=Array(ie),E=0;E<ie;E++)le[E]=arguments[E];return re=(k=(ee=(0,H.default)(this,(b=q.__proto__||o()(q)).call.apply(b,[this].concat(le))),ee),ee.state={selectData:[],loading:!0,keywords:"",pageIndex:1,isMore:!1,treeData:[],expendTreeNodeKey:[],searchList:[]},ee.promise=null,ee.onScrollEnd=function(){var w=ee.state,K=w.keywords,N=w.isMore,F=w.loading;!K||F||!N||ee.setState({pageIndex:ee.state.pageIndex+1},function(){ee.fetchData()})},ee.handleExpend=function(w){var K=ee.state.expendTreeNodeKey,N=w.orgRoleGroupId,F=w.fetched;if(K.includes(N)){ee.setState({expendTreeNodeKey:K.filter(function(h){return h!==N})});return}F||ee.fetchData(void 0,N),ee.setState({expendTreeNodeKey:K.concat([N])})},ee.onRemove=function(w){var K=ee.state.selectData;ee.setState({selectData:K.filter(function(N){return N.organizeId!==w.organizeId})})},ee.handleSearch=function(w){if(!w.target.value){ee.setState({keywords:"",searchList:[],pageIndex:1});return}ee.setState({keywords:w.target.value,loading:!0,pageIndex:1,searchList:[]},function(){ee.searchRequest=s().debounce(ee.fetchData,200),ee.searchRequest()})},k),(0,H.default)(ee,re)}return(0,Z.default)(q,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:function(){var k=this,ee=this.props,re=ee.projectId,ie=ee.appointedOrganizeIds;V.Z.getOrgRoleGroupsByProjectId({projectId:re}).then(function(le){var E=[{orgRoleGroupName:_l("\u9ED8\u8BA4"),orgRoleGroupId:""}].concat(le).map(function(w){return(0,a.default)({},w,{children:[],fetched:!1})});!ie&&k.setState({expendTreeNodeKey:[E[0].orgRoleGroupId]}),k.fetchData(E,E[0].orgRoleGroupId)})}},{key:"fetchData",value:function(k,ee){var re=this,ie=this.props,le=ie.projectId,E=ie.appointedOrganizeIds,w=E===void 0?[]:E,K=this.state,N=K.keywords,F=K.pageIndex,h=F===void 0?1:F,z=K.treeData,X=K.searchList,B=k||z,x=!md.global.Account.isPortal&&(md.global.Account.projects||[]).some(function(Q){return Q.projectId===re.props.projectId});if(!x){this.setState({loading:!1});return}this.setState({isMore:!1}),this.promise&&this.promise.abort&&this.promise.abort(),this.promise=V.Z.getOrganizes({keywords:N,projectId:le,pageIndex:h,pageSize:N?50:500,appointedOrganizeIds:w,orgRoleGroupId:ee}),this.promise.then(function(Q){if(N){var i=h===1?Q.list:X.concat(Q.list);re.setState({searchList:i,isMore:Q.allCount>i.length,loading:!1});return}if(w.length)Q.list.forEach(function(v){var W=s().findIndex(B,function(P){return P.orgRoleGroupId===v.orgRoleGroupId});B[W].children.push(v),!B[W].fetched&&(B[W].fetched=!0)}),B=B.filter(function(v){return v.fetched}),B[0]&&re.setState({expendTreeNodeKey:[B[0].orgRoleGroupId]});else{var m=s().findIndex(B,function(v){return v.orgRoleGroupId===ee});B[m].children=Q.list,B[m].fetched=!0}re.setState({treeData:B,loading:!1})}).catch(function(Q){re.setState({loading:!1})})}},{key:"toggle",value:function(k,ee){var re=this.props.unique,ie=s().cloneDeep(this.state.selectData);ee?ie=re?[k]:ie.concat(k):s().remove(ie,function(le){return le.organizeId===k.organizeId}),this.setState({selectData:ie})}},{key:"renderChildren",value:function(k){var ee=this,re=this.state,ie=re.expendTreeNodeKey,le=re.selectData,E=re.keywords,w=re.searchList,K=re.treeData,N=this.props,F=N.unique,h=N.appointedOrganizeIds,z=h===void 0?[]:h;if(!(k&&!ie.includes(k.orgRoleGroupId))){var X=K.filter(function(x){return x.orgRoleGroupId!==""||x.children.length}),B=X.length===1&&(X[0].orgRoleGroupId===""||z.length);return(k?k.children:w).map(function(x){var Q=!!s().find(le,function(i){return i.organizeId===x.organizeId});return f.createElement("div",{key:"roleItem-"+x.organizeId+"-"+x.orgRoleGroupId,className:"roleItem Hand",onClick:function(){return ee.toggle(x,!Q)}},F?f.createElement(y.Z,{className:O()("mRight0",{mLeft14:!E&&!B}),checked:Q,text:null}):f.createElement(R.Z,{className:O()("GSelect-department-row pointer",{mLeft14:!E&&!B}),checked:Q,text:null}),f.createElement(te.Z,{icon:"person_new",className:"Gray_9e Font18"}),f.createElement("span",{className:"mLeft4 flex overflow_ellipsis"},x.organizeName))})}}},{key:"renderContent",value:function(){var k=this,ee=this.state,re=ee.loading,ie=ee.keywords,le=ee.treeData,E=ee.expendTreeNodeKey,w=ee.searchList,K=this.props.appointedOrganizeIds,N=K===void 0?[]:K;if(re)return f.createElement(L.Z,null);if(!le.length||le.length===1&&le[0].orgRoleGroupId===""&&!le[0].children.length)return f.createElement("div",{className:"emptyWrap"},f.createElement("p",{className:"Gray_bd Font14"},_l("\u6CA1\u6709\u53EF\u9009\u7EC4\u7EC7\u89D2\u8272")));if(ie&&!w.length)return f.createElement("div",{className:"GSelect-NoData"},f.createElement("i",{className:"icon-search GSelect-iconNoData"}),f.createElement("p",{className:"GSelect-noDataText Gray_bd"},_l("\u641C\u7D22\u65E0\u7ED3\u679C")));var F=le.filter(function(h){return h.orgRoleGroupId!==""||h.children.length});return f.createElement(p.Z,{onScrollEnd:this.onScrollEnd},!ie&&F.map(function(h){return f.createElement(f.Fragment,{key:"fragment-"+h.orgRoleGroupId},F.length===1&&(h.orgRoleGroupId===""||N.length)?null:f.createElement("div",{className:"groupItem roleItem",key:"groupItem-"+h.orgRoleGroupId,onClick:function(){return k.handleExpend(h)}},f.createElement(te.Z,{icon:"task_custom_btn_unfold",className:O()("Gray_9e expendIcon Hand InlineBlock",{rotate:!E.includes(h.orgRoleGroupId)})}),f.createElement("span",{className:"bold flex overflow_ellipsis mLeft4"},h.orgRoleGroupName)),k.renderChildren(h))}),ie&&this.renderChildren())}},{key:"renderResult",value:function(){var k=this,ee=this.state.selectData;return ee.map(function(re,ie){return f.createElement("div",{className:"GSelect-result-subItem",key:"subItem-"+ie},f.createElement("div",{className:"GSelect-result-subItem__avatar"},f.createElement("i",{className:"icon-person_new Gray_9e"})),f.createElement("div",{className:"GSelect-result-subItem__name overflow_ellipsis"},re.organizeName),f.createElement("div",{class:"GSelect-result-subItem__remove",onClick:function(){return k.onRemove(re)}},f.createElement("span",{class:"icon-close"})))})}},{key:"getCurrentUserOrgRoleChecked",value:function(){return!!this.state.selectData.filter(function(k){return k.organizeId==="user-role"}).length}},{key:"render",value:function(){var k=this,ee=this.props,re=ee.onClose,ie=ee.projectId,le=ee.onSave,E=ee.showCompanyName,w=ee.orgRoleDialogVisible,K=ee.overlayClosable,N=this.state,F=N.keywords,h=N.selectData,z=!md.global.Account.isPortal&&(md.global.Account.projects||[]).some(function(X){return X.projectId===ie});return f.createElement(g.Z,{visible:w,title:_l("\u9009\u62E9\u7EC4\u7EC7\u89D2\u8272"),className:"dialogSelectOrgRole",width:480,type:"scroll",onCancel:re,overlayClosable:K,onOk:function(){le(h),re()}},f.createElement("div",{className:"selectJobContainer"},f.createElement("div",{className:"selectJobContainer_search pLeft5"},f.createElement("span",{className:"searchIcon icon-search"}),f.createElement("input",{type:"text",className:"searchInput",placeholder:_l("\u641C\u7D22\u7EC4\u7EC7\u89D2\u8272"),value:F,onChange:this.handleSearch}),f.createElement("span",{className:O()("searchClose icon-closeelement-bg-circle",{Block:!!F.trim()}),onClick:function(){return k.setState({keywords:"",searchList:[],pageIndex:1})}})),z&&this.props.showCurrentOrgRole&&f.createElement("div",{className:"mTop24 Font13 overflow_ellipsis Hand pBottom10 pLeft5"},this.props.unique?f.createElement(y.Z,{className:"GSelect-department--checkbox mRight0",checked:this.getCurrentUserOrgRoleChecked(),text:_l("\u5F53\u524D\u7528\u6237\u6240\u5728\u7684\u7EC4\u7EC7\u89D2\u8272"),onClick:function(B){return k.toggle({organizeId:"user-role",organizeName:_l("\u5F53\u524D\u7528\u6237\u6240\u5728\u7684\u7EC4\u7EC7\u89D2\u8272")},!B)}}):f.createElement(R.Z,{className:"GSelect-department--checkbox",checked:this.getCurrentUserOrgRoleChecked(),text:_l("\u5F53\u524D\u7528\u6237\u6240\u5728\u7684\u7EC4\u7EC7\u89D2\u8272"),onClick:function(B){return k.toggle({organizeId:"user-role",organizeName:_l("\u5F53\u524D\u7528\u6237\u6240\u5728\u7684\u7EC4\u7EC7\u89D2\u8272")},!B)}})),E&&f.createElement("div",{className:"mTop12 Font13 overflow_ellipsis pLeft5"},(s().find(md.global.Account.projects,function(X){return X.projectId===ie})||{}).companyName),f.createElement("div",{className:"selectJobContent"},this.renderContent()),f.createElement("div",{className:"GSelect-result-box selectResultCon"},this.renderResult())))}}]),q}(f.Component),j.defaultProps={projectId:"",showCompanyName:!1,orgRoleDialogVisible:!1,showCurrentOrgRole:!1,unique:!1,onSave:function(){},onClose:function(){}},A);const I=function(c){return(0,ce.Z)(S,(0,a.default)({},c,{visibleName:"orgRoleDialogVisible"}))}},78549:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>A});var ce=t(25273),g=t(54208),p=t(33867),L=t(88239),te=t(12424),R=t(86735),y=t(67294),a=t(69293),r=t(45697),o=t.n(r),d=t(73935),Z=t(96486),H=t.n(Z),U=t(93967),f=t.n(U),V=t(71893),C=t(27749),O=t(19207),n=(0,R.Z)([`
  overflow: hidden;
  width: 360px;
  background-color: #fff;
  border-radius: 4px;
  box-shadow: rgba(0, 0, 0, 0.16) 0px 3px 6px 1px;
  .searchRoleWrap {
    padding: 0 16px;
    line-height: 40px;
    height: 40px;
    border-bottom: 1px solid #eaeaea;
    overflow: hidden;
    input {
      outline: none;
      border: none;
      margin-right: 12px;
    }
  }
  .groupItem,
  .roleItem {
    height: 36px;
    padding: 0 15px;
    line-height: 36px;
    .expendIcon.rotate {
      transform: rotate(-90deg);
      transform-origin: center center;
    }
    &:hover {
      background: #f5f5f5;
    }
    &.current {
      background: rgba(33, 150, 243, 0.1) !important;
    }
  }
  .emptyWrap {
    margin-top: 170px;
    text-align: center;
  }
`],[`
  overflow: hidden;
  width: 360px;
  background-color: #fff;
  border-radius: 4px;
  box-shadow: rgba(0, 0, 0, 0.16) 0px 3px 6px 1px;
  .searchRoleWrap {
    padding: 0 16px;
    line-height: 40px;
    height: 40px;
    border-bottom: 1px solid #eaeaea;
    overflow: hidden;
    input {
      outline: none;
      border: none;
      margin-right: 12px;
    }
  }
  .groupItem,
  .roleItem {
    height: 36px;
    padding: 0 15px;
    line-height: 36px;
    .expendIcon.rotate {
      transform: rotate(-90deg);
      transform-origin: center center;
    }
    &:hover {
      background: #f5f5f5;
    }
    &.current {
      background: rgba(33, 150, 243, 0.1) !important;
    }
  }
  .emptyWrap {
    margin-top: 170px;
    text-align: center;
  }
`]),s=V.ZP.div(n);function j(S){var I=S.projectId,c=I===void 0?"":I,q=S.unique,b=q===void 0?!1:q,k=S.minHeight,ee=k===void 0?358:k,re=S.appointedOrganizeIds,ie=re===void 0?[]:re,le=S.onSave,E=le===void 0?function(){}:le,w=S.onClose,K=w===void 0?function(){}:w,N=(0,y.useRef)(),F=(0,y.useState)(void 0),h=(0,te.Z)(F,2),z=h[0],X=h[1],B=(0,y.useState)(!0),x=(0,te.Z)(B,2),Q=x[0],i=x[1],m=(0,y.useState)(1),v=(0,te.Z)(m,2),W=v[0],P=v[1],u=(0,y.useState)(!1),l=(0,te.Z)(u,2),T=l[0],G=l[1],D=(0,y.useState)([]),M=(0,te.Z)(D,2),se=M[0],ae=M[1],ne=(0,y.useState)([]),de=(0,te.Z)(ne,2),Ce=de[0],he=de[1],fe=(0,y.useState)([]),Ee=(0,te.Z)(fe,2),Y=Ee[0],oe=Ee[1],ve=(0,y.useState)([]),ue=(0,te.Z)(ve,2),pe=ue[0],Se=ue[1],ye=null;(0,a.Z)(N,function(we){E(pe),K(!0)}),(0,y.useEffect)(function(){O.Z.getOrgRoleGroupsByProjectId({projectId:c}).then(function(we){var Ie=[{orgRoleGroupName:_l("\u9ED8\u8BA4"),orgRoleGroupId:""}].concat(we).map(function(ge){return(0,L.default)({},ge,{children:[],fetched:!1})});!ie.length&&he([Ie[0].orgRoleGroupId]),J(Ie,Ie[0].orgRoleGroupId)})},[]),(0,y.useEffect)(function(){z&&me()},[z]),(0,y.useEffect)(function(){W<2||J()},[W]);var J=function(Ie,ge){var Re=H().cloneDeep(Ie||se),Pe=!md.global.Account.isPortal&&(md.global.Account.projects||[]).some(function(ke){return ke.projectId===c});if(!Pe){i(!1);return}G(!1),ye&&ye.abort(),ye=O.Z.getOrganizes({keywords:z,projectId:c,pageIndex:W,pageSize:z?50:500,appointedOrganizeIds:ie,orgRoleGroupId:ge}),ye.then(function(ke){if(i(!1),z){var We=W===1?ke.list:Y.concat(ke.list);oe(We),G(ke.allCount>We.length);return}if(ie.length)ke.list.forEach(function(it){var Ge=H().findIndex(Re,function(pt){return pt.orgRoleGroupId===it.orgRoleGroupId});Re[Ge].children.push(it),!Re[Ge].fetched&&(Re[Ge].fetched=!0)}),Re=Re.filter(function(it){return it.fetched}),Re[0]&&he([Re[0].orgRoleGroupId]);else{var Ve=H().findIndex(Re,function(it){return it.orgRoleGroupId===ge});Re[Ve].children=ke.list,Re[Ve].fetched=!0}ae(Re)}).catch(function(ke){i(!1)})},me=H().debounce(J,200),be=function(){K(),(0,C.Z)((0,L.default)({},H().pick(S,["projectId","unique","showCompanyName","showCurrentOrgRole","appointedOrganizeIds","overlayClosable","onSave","onClose"])))},xe=function(Ie,ge){var Re=H().cloneDeep(pe);ge?Re=b?[Ie]:Re.concat(Ie):H().remove(Re,function(Pe){return Pe.organizeId===Ie.organizeId}),Se(Re),b&&Re.length===1&&E(Re)},Ae=function(Ie){var ge=Ie.orgRoleGroupId,Re=Ie.fetched;if(Ce.includes(ge)){he(Ce.filter(function(Pe){return Pe!==ge}));return}Re||J(void 0,ge),he(Ce.concat([ge]))},Ne=function(Ie){X(Ie.target.value||""),oe([]),P(1)},Me=function(){!z||Q||!T||P(W+1)},Fe=function(Ie){if(!(Ie&&!Ce.includes(Ie.orgRoleGroupId))){var ge=se.filter(function(Pe){return Pe.orgRoleGroupId!==""||Pe.children.length}),Re=ge.length===1&&(ge[0].orgRoleGroupId===""||ie.length);return(Ie?Ie.children:Y).map(function(Pe){var ke=!!H().find(pe,function(We){return We.organizeId===Pe.organizeId});return y.createElement("div",{key:"roleItem-"+Pe.organizeId+"-"+Pe.orgRoleGroupId,className:f()("roleItem Hand valignWrapper",{current:ke}),onClick:function(){return xe(Pe,!ke)}},y.createElement(p.Z,{icon:"person_new",className:f()("Gray_9e Font18",{mLeft16:!z&&!Re})}),y.createElement("span",{className:"mLeft4 flex overflow_ellipsis"},Pe.organizeName),ke&&y.createElement(p.Z,{icon:"done_2",className:"ThemeColor"}))})}},Be=function(){if(!se.length||se.length===1&&se[0].orgRoleGroupId===""&&!se[0].children.length)return y.createElement("div",{className:"emptyWrap"},y.createElement("div",{className:"Gray_bd Font14"},_l("\u6CA1\u6709\u53EF\u9009\u7EC4\u7EC7\u89D2\u8272")));if(z&&!Y.length)return y.createElement("div",{className:"GSelect-NoData"},y.createElement("i",{className:"icon-search GSelect-iconNoData"}),y.createElement("p",{className:"GSelect-noDataText"},z?_l("\u641C\u7D22\u65E0\u7ED3\u679C"):_l("\u65E0\u7ED3\u679C")));if(z)return Fe();var Ie=se.filter(function(ge){return ge.orgRoleGroupId!==""||ge.children.length});return Ie.map(function(ge){return y.createElement(y.Fragment,{key:"fragment-"+ge.orgRoleGroupId},Ie.length===1&&(ge.orgRoleGroupId===""||ie.length)?null:y.createElement("div",{className:"groupItem Hand valignWrapper",key:"groupItem-"+ge.orgRoleGroupId,onClick:function(){return Ae(ge)}},y.createElement(p.Z,{icon:"task_custom_btn_unfold",className:f()("Gray_9e expendIcon Hand",{rotate:!Ce.includes(ge.orgRoleGroupId)})}),y.createElement("span",{className:"bold mLeft4 flex overflow_ellipsis"},ge.orgRoleGroupName)),Fe(ge))})};return y.createElement(s,{ref:N,className:"selectRoleDialog"},y.createElement("div",{className:"searchRoleWrap valignWrapper"},y.createElement(p.Z,{icon:"search",className:"searchIcon Gray_9e mRight8 Font18"}),y.createElement("input",{type:"text",className:"flex",value:z,placeholder:_l("\u641C\u7D22"),onChange:Ne}),z&&y.createElement(p.Z,{icon:"closeelement-bg-circle",className:"Font16 mLeft4 Gray_9e",onClick:function(){return X("")}}),y.createElement(p.Z,{icon:"user",className:"Gray_75 Hover_21 mLeft4 Font18",onClick:be})),y.createElement(ce.Z,{style:{minHeight:ee},onScrollEnd:Me},Q?y.createElement(g.Z,null):Be()))}j.propTypes={projectId:r.string,appointedOrganizeIds:(0,r.arrayOf)(r.string),showCompanyName:r.bool,showCurrentOrgRole:r.bool,minHeight:r.number,unique:r.bool,onSave:r.func,onClose:r.func};function A(S){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=360,q=41+(I.minHeight||358),b=void 0,k=void 0,ee=0,re=0,ie=0,le=I.offset,E=le===void 0?{top:0,left:0}:le,w=I.zIndex,K=w===void 0?1001:w,N=document.createElement("div");function F(){if(H().isFunction(H().get(S,"getBoundingClientRect"))){var z=S.getBoundingClientRect();ie=z.height,b=z.x,k=z.y,ee=b+(E.left||0),re=k+ie+(E.top||0),ee+c>window.innerWidth&&(ee=b-10-c),re+q>window.innerHeight&&(re=k-q-4,re<0&&(re=0),k<q&&(ee=b-10-c,ee<c&&(ee=b+10+36))),N.style.position="absolute",N.style.left=ee+"px",N.style.top=re+"px",N.style.zIndex=K}}F(),document.body.appendChild(N);function h(){d.unmountComponentAtNode(N),N.parentElement&&document.body.removeChild(N)}d.render(y.createElement(j,(0,L.default)({},I,{onClose:function(X){if(!X&&I.isDynamic){setTimeout(F,100);return}H().isFunction(I.onClose)&&I.onClose(),h()}})),N)}},5420:(lt,Te,t)=>{"use strict";t.d(Te,{Gy:()=>c,a0:()=>U,cm:()=>le,gj:()=>K});var ce=t(88239);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(26358);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(44253);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(62232);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(86674);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(94914);var y=t(96486),a=t.n(y),r=t(30381),o=t.n(r),d=t(91247),Z={ruleId:(0,d.Z)(),name:"",disabled:!1,filters:[],ruleItems:[],type:0},H={type:1,controls:[],message:""},U=[{value:1,label:_l("\u56FA\u5B9A\u503C")},{value:2,label:_l("\u52A8\u6001\u503C")}],f=[{value:1,label:_l("\u663E\u793A")},{value:2,label:_l("\u9690\u85CF"),warnText:_l("\u9690\u85CF\u540E\u4E0D\u9A8C\u8BC1\u5FC5\u586B\uFF08\u5F3A\u5236\u6821\u9A8C\u9664\u5916\uFF09")},{value:3,label:_l("\u53EF\u7F16\u8F91")},{value:4,label:_l("\u53EA\u8BFB"),warnText:_l("\u53EA\u8BFB\u540E\u4E0D\u9A8C\u8BC1\u5FC5\u586B\uFF08\u5F3A\u5236\u6821\u9A8C\u9664\u5916\uFF09")},{value:5,label:_l("\u5FC5\u586B")},{value:6,label:_l("\u63D0\u793A\u9519\u8BEF")},{value:7,label:_l("\u53EA\u8BFB\u6240\u6709\u5B57\u6BB5"),warnText:_l("\u53EA\u8BFB\u6240\u6709\u5B57\u6BB5\u5728\u8BB0\u5F55\u4FDD\u5B58\u540E\u751F\u6548\uFF0C\u751F\u6548\u540E\u4E0D\u5141\u8BB8\u7528\u6237\u76F4\u63A5\u7F16\u8F91\uFF0C\u4F46\u53EF\u4EE5\u901A\u8FC7\u81EA\u5B9A\u4E49\u52A8\u4F5C\u548C\u5DE5\u4F5C\u6D41\u8FDB\u884C\u586B\u5199")}],V=function(B){var x=$("<span>"+B+"</span>").css({display:"none"});$("body").append(x);var Q=x.width()+6;return x.remove(),Q};function C(X){var B={};return X.map(function(x){B[x.controlId]=x.type===34&&x.relationControls?x.relationControls.map(function(Q){return Q.controlId}):[]}),B}function O(){for(var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],B=arguments[1],x=0;x<X.length;x++){var Q=X[x];if(Q.controlId===B)return Q;if(!_.isEmpty(Q.relationControls)){var i=O(Q.relationControls,B);if(i)return i}}return null}function n(X){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],x=arguments[2],Q=A(X,x),i=[];if(!_.find(Q,function(m){return m.sectionId}))return B.map(function(m){var v=m.childControlIds,W=v===void 0?[]:v,P=m.controlId,u=P===void 0?"":P,l=O(Q,u),T=l&&l.sectionId?O(Q,l.sectionId):"";_.isEmpty(W)?i.push({parentId:"",controlId:u,name:T&&l?_l("%0 / %1",T.controlName,l.controlName):_.get(l,"controlName")||_l("\u5B57\u6BB5\u5DF2\u5220\u9664"),isDel:!l}):W.map(function(G){var D=_.find(_.get(l,"relationControls")||[],function(se){return se.controlId===G}),M=!l||!D;i.push({parentId:u,controlId:G,isDel:M,name:M?_l("\u5B57\u6BB5\u5DF2\u5220\u9664"):_l("%0 / %1",l.controlName,D.controlName)})})}),i}function s(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],B=[];return X.forEach(function(x){x.type===52&&(x.relationControls=X.filter(function(Q){return Q.sectionId===x.controlId})),x.sectionId||B.push(x)}),B}function j(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],B=arguments[1],x=[];return _.includes([3,4,5],B)&&(x.push(31,38,37,32,33,30,22,25,45,47,51,10010),B===5&&x.push(43,49)),X.filter(function(Q){return!_.includes(x,Q.type)}).map(function(Q){if(_.includes([29,34],Q.type)){var i=(Q.relationControls||[]).filter(function(v){return _.includes(Q.showControls||[],v.controlId)}).filter(function(v){return!_.includes(SYS_CONTROLS,v.controlId)}).filter(function(v){return v.type!==52}).filter(function(v){return!_.includes(x,v.type)}),m=Q.type===29&&!_.includes(["2","5","6"],_.get(Q,"advancedSetting.showtype"))&&_.includes([3,4,5],B);return _extends({},Q,{relationControls:m?[]:i})}else return Q.type===52?_extends({},Q,{relationControls:j(Q.relationControls,B)}):_extends({},Q,{relationControls:[]})})}function A(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],B=arguments[1],x=s(X),Q=j(x,B);return _.includes([5],B)&&(Q=Q.filter(function(i){return!isSheetDisplay(i)}).map(function(i){return i.relationControls?_extends({},i,{relationControls:(i.relationControls||[]).filter(function(m){return!isSheetDisplay(m)})}):i})),_.includes([3,4,5],B)&&(Q=Q.filter(function(i){return!(i.type===52&&_.isEmpty(i.relationControls))})),Q}var S=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Q=arguments[2],i=B.controls,m=i===void 0?[]:i,v=A(x,B.type),W=[];return m.map(function(P){var u=_extends({},P),l=_.find(v,function(M){return M.controlId===P.controlId});if(l){if(P.childControlIds&&P.childControlIds.length>0){var T=_.find(v,function(M){return M.controlId===P.controlId})||{},G=T.relationControls,D=G===void 0?[]:G;u.childControlIds=P.childControlIds.filter(function(M){return _.find(D,function(se){return se.controlId===M})})}Q===5&&isSheetDisplay(l)&&!_.get(P,"childControlIds.length")||W.push(P)}}),_extends({},B,{controls:W})};function I(X){return _.get(_.find(f,function(B){return B.value===X})||{},"label")||""}function c(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],B=arguments[1];if(a().isEmpty(X))return!1;var x=(0,g.ow)({items:X})||{};return(x.conditionsGroups||[]).every(function(Q){var i=B?Q.conditions:Q.groupFilters;return a().isEmpty(i)?!1:i.every(function(m){var v=(0,g.Io)(m.dataType),W=p.Cz[v]||{},P=W.value;return(0,g.qt)((0,ce.default)({},m,{type:m.filterType||m.type,isDynamicsource:m.isDynamicsource||a().get(m,"dynamicSource.length"),conditionGroupType:m.conditionGroupType||P}))})})}function q(X){var B=X.value,x=X.values,Q=X.dataType,i=X.dynamicSource,m=i===void 0?[]:i,v=X.isDynamicsource,W=v===void 0?!1:v,P=X.minValue,u=X.maxValue,l=X.dateRange,T=(CONTROL_FILTER_WHITELIST[getTypeKey(Q)]||{}).value,G=X.filterType;if(W&&!m.length)return"inputTextErrorBorder";switch(T){case CONTROL_FILTER_WHITELIST.TEXT.value:return x&&x.length?"":"selectizeInputErrorBorder";case CONTROL_FILTER_WHITELIST.NUMBER.value:if(G===FILTER_CONDITION_TYPE.BETWEEN||G===FILTER_CONDITION_TYPE.NBETWEEN){var D=[];return(_.isUndefined(P)||P==="")&&D.push("numberMinErrorBorder"),(_.isUndefined(u)||u==="")&&D.push("numberMaxErrorBorder"),D.join(" ")}else return B?"":"numberConditionErrorBorder";case CONTROL_FILTER_WHITELIST.DATE.value:return G===FILTER_CONDITION_TYPE.DATE_BETWEEN||G===FILTER_CONDITION_TYPE.DATE_NBETWEEN||l||B?"":"dateConditionErrorBorder";case CONTROL_FILTER_WHITELIST.TIME.value:if(G===FILTER_CONDITION_TYPE.DATE_BETWEEN||G===FILTER_CONDITION_TYPE.DATE_NBETWEEN){if(!P||!u)return"timeRangeConditionErrorBorder"}else return B?"":"timeConditionErrorBorder";case CONTROL_FILTER_WHITELIST.OPTIONS.value:case CONTROL_FILTER_WHITELIST.USERS.value:case CONTROL_FILTER_WHITELIST.RELATE_RECORD.value:case CONTROL_FILTER_WHITELIST.CASCADER.value:if(x&&!x.length)return _.includes([27,19,23,24,48],Q)?"optionConditionErrorBorder":_.includes([26],Q)?"userConditionErrorBorder":_.includes([29],Q)?"recordConditionErrorBorder":_.includes([35],Q)?"cascaderConditionErrorBorder":""}}function b(X){return{controlId:X.controlId,dataType:X.dataType,spliceType:X.spliceType,filterType:X.filterType,dateRange:X.dateRange,dateRangeType:X.dateRangeType,maxValue:X.maxValue,minValue:X.minValue,value:X.value,fullValues:X.values,values:X.values,dynamicSource:X.dynamicSource||[],isDynamicsource:X.isDynamicsource}}function k(X){return X.map(function(B){return _extends({},B,{groupFilters:(B.groupFilters||[]).map(function(x){return _.includes([26,27,29,19,23,24,35,48],x.dataType)?_extends({},x,{values:(x.values||[]).map(function(Q){return typeof Q=="string"?safeParse(Q).id:Q})}):x})})})}function ee(X){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return X.map(function(x){if(_.includes([9,10,11],x.dataType)){var Q=(_.find(B,function(i){return i.controlId===x.controlId})||{}).options||[];return _extends({},x,{values:x.values.filter(function(i){return _.find(Q,function(m){return m.key===i&&!m.isDeleted})})})}else return x})}var re=function(B,x,Q){var i=x.filterType,m=i===void 0?"":i;if(m===p.W5.ISNULL||m===p.W5.HASVALUE)return"";switch(B){case p.Cz.NUMBER.value:return m===p.W5.BETWEEN||m===p.W5.NBETWEEN?(x.minValue||"")+" - "+(x.maxValue||""):x.value;case p.Cz.DATE.value:var v=x.dateRange,W=x.value,P=(0,R.eO)(Q),u=P.formatMode;return x.minValue&&x.maxValue?o()(x.minValue).format(u)+" - "+o()(x.maxValue).format(u):v===10?_l("\u8FC7\u53BB%0\u5929",W):v===11?_l("\u5C06\u6765%0\u5929",W):v===18?o()(W).format(u):v?a().filter(a().flatten(p.AW),{value:x.dateRange})[0].text:"";case p.Cz.TIME.value:var l=Q.unit==="1"?"HH:mm":"HH:mm:ss";return x.minValue&&x.maxValue?o()(x.minValue,l).format(l)+" - "+o()(x.maxValue,l).format(l):x.value?o()(x.value,l).format(l):"";case p.Cz.BOOL.value:var T=m===p.W5.EQ?"1":"0",G=(0,L.jT)(Q,{isShow:!0});return a().get(a().find(G,function(de){return de.key===T}),"value")||"";case p.Cz.OPTIONS.value:if(x.dataType===te.DN.DEPARTMENT||x.dataType===te.DN.ORG_ROLE||a().includes([p.v8.AREA_INPUT_24,p.v8.AREA_INPUT_19,p.v8.AREA_INPUT_23],x.dataType))return(x.values||[]).map(function(de){var Ce=safeParse(de||"{}");return Ce.name}).join(",");var D=[],M=Q.data,se=M===void 0?[]:M;return Q.options?D=Q.options:se.options?D=se.options:D=[],a().isEmpty(D)?x.values?x.values.join(","):"":a().isEmpty(x.values)?"":x.values.map(function(de){var Ce=a().find(D,function(he){return de===he.key&&!he.isDeleted})||{};return a().isUndefined(Ce.value)?_l("\u5B57\u6BB5\u5DF2\u5220\u9664"):Ce.value}).join(",");case p.Cz.USERS.value:return a().isEmpty(x.values)?"":x.values.map(function(de){var Ce=safeParse(de||"{}");return Ce.name}).join(",");case p.Cz.RELATE_RECORD.value:case p.Cz.CASCADER.value:var ae=x.values,ne=ae===void 0?[]:ae;return ne.map(function(de){return safeParse(de||"{}").name}).join(",");default:return a().isEmpty(x.values)?"":x.values.join(",")}},ie=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],x=arguments[1],Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",i={type:"dynamicSource",data:[]};return B.length<=0?i="":B.map(function(m){var v=[],W=1,P="",u="";v=x,W=1,P=m.cid,u="";var l=v.find(function(T){return P===T.controlId});i.data.push({name:l?l.controlName:"",id:m.cid,rName:m.rcid==="parent"?_l("\u4E3B\u8BB0\u5F55"):u,type:W})}),i},le=function X(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Q=arguments[2],i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"";B=B.concat(p.vJ);var v=[];return x.forEach(function(W,P){if(W.isGroup&&W.groupFilters){v.push((0,ce.default)({},W,{groupFilters:X(B,W.groupFilters,Q,i,m)}));return}var u=[];if(Q?u=i.filter(function(he){return he.controlId?he.controlId===W.controlId:he.data.controlId===W.controlId}):u=B.filter(function(he){return he.controlId?he.controlId===W.controlId:he.data.controlId===W.controlId}),u&&u.length>0){var l=u[0]||{},T=Q||l.type?l.type:(l.data||{}).type,G=l.sourceControlType,D=G===void 0?-1:G,M=l.data,se=M===void 0?{sourceControlType:-1}:M;D=Q||D!==-1?D:se.sourceControlType;var ae=(0,g.Io)(T===30?D:T),ne=p.Cz[ae]||{},de=ne.value,Ce=Q&&W.dynamicSource&&W.dynamicSource.length>0?ie(W.dynamicSource,B,m):re(de,W,l);v.push({id:W.controlId,name:Q||l.controlName?l.controlName:l.data.controlName,type:a().find((0,g.Ou)((0,ce.default)({},l,{type:l.type===30?l.sourceControlType:l.type})),{value:(0,p.fr)((0,ce.default)({},l,{type:l.type===30?l.sourceControlType:l.type})).isMultiple&&W.filterType===p.W5.EQ_FOR_SINGLE?p.W5.EQ:W.filterType}),spliceType:W.spliceType,value:Ce})}}),v.every(function(W){return W.isGroup&&a().isEmpty(W.groupFilters)})?[]:v},E={1:"ocr",2:"ocr_id_card",3:"ocr_invoice"};function w(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},B=X.type,x=X.enumDefault;return B===43?E[x]:getIconByType(B)}function K(X,B){return X&&X.type===29&&X.enumDefault===2&&X.advancedSetting&&X.advancedSetting.showtype==="2"&&a().includes([24,25],B.filterType||B.type)}function N(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],B=arguments[1],x=X.filter(function(Q){return Q.type===B}).length+1;return getUnUniqName(X,B===0?_l("\u4EA4\u4E92\u89C4\u5219%0",x):_l("\u9A8C\u8BC1\u89C4\u5219%0",x))}function F(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},B=X.controls,x=B===void 0?[]:B,Q=X.type,i=X.message;return _.includes([7],Q)?!1:Q===6?!i:!x.length}function h(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x=_.find(X,function(m){return m.ruleId===B.ruleId}),Q=B.ruleId,i=Q===void 0?"":Q;return i&&(i.indexOf("-")>=0||!_.isEqual(x,B))?(alert(_l("\u8BF7\u5148\u4FDD\u5B58\u7F16\u8F91\u7ED3\u679C"),3),!0):!1}var z=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],x=function(m){return!(_.includes(SYS_CONTROLS.concat(SYS),m.controlId)||_.includes([29,51],m.type)&&_.includes(["2","5","6"],_.get(m,"advancedSetting.showtype"))||_.includes([22,43,45,47,49,10010],m.type))},Q=[];return B.map(function(i){return i.type===52?i:_extends({},i,{relationControls:[]})}).map(function(i){i.type===52?Q.push(_extends({},i,{relationControls:(i.relationControls||[]).filter(function(m){return x(m)})})):x(i)&&Q.push(i)}),Q.filter(function(i){return!(i.type===52&&_.isEmpty(i.relationControls))})}},76345:(lt,Te,t)=>{"use strict";t.d(Te,{RX:()=>r});var ce={10:_l("\u663E\u793A\u521B\u5EFA\u6309\u94AE"),11:_l("\u8BA8\u8BBA"),12:_l("\u65E5\u5FD7"),13:_l("\u4ECEExcel\u5BFC\u5165\u6570\u636E"),14:_l("\u56DE\u6536\u7AD9"),500:_l("\u7EDF\u8BA1"),50:_l("\u516C\u5171"),51:_l("\u4E2A\u4EBA"),20:_l("\u516C\u5F00\u5206\u4EAB"),21:_l("\u5BFC\u51FA"),22:_l("\u5FEB\u6377\u7F16\u8F91"),25:_l("\u6279\u91CF\u64CD\u4F5C"),24:_l("\u7F16\u8F91"),26:_l("\u590D\u5236"),23:_l("\u7CFB\u7EDF\u9ED8\u8BA4\u6253\u5370"),27:_l("\u5BFC\u51FA"),28:_l("\u5220\u9664"),29:_l("\u6267\u884C\u81EA\u5B9A\u4E49\u52A8\u4F5C"),30:_l("\u516C\u5F00\u5206\u4EAB"),32:_l("\u7CFB\u7EDF\u9ED8\u8BA4\u6253\u5370"),33:_l("\u9644\u4EF6\u4E0B\u8F7D"),34:_l("\u65E5\u5FD7"),35:_l("\u8BA8\u8BBA"),36:_l("\u590D\u5236"),37:_l("\u91CD\u65B0\u521B\u5EFA"),40:_l("\u7CFB\u7EDF\u5B57\u6BB5"),41:_l("\u5BA1\u6279\u6D41\u8F6C\u8BE6\u60C5")},g=[24,26,23,27,28,29],p=500,L=[50,51],te=[25,40,p],R=[].concat(g,[10,11,12,13,14],L,[20,21,22,30,31,32,33,34,35,36,41,37]),y=null,a=null,r={createButtonSwitch:10,discussSwitch:11,logSwitch:12,importSwitch:13,sheetTrash:14,statisticsSwitch:50,statisticsSelfSwitch:51,viewShareSwitch:20,viewExportSwitch:21,quickSwitch:22,batchGroup:25,batchEdit:24,copy:26,QrCodeSwitch:23,export:27,delete:28,execute:29,recordShareSwitch:30,recordPrintSwitch:32,recordAttachmentSwitch:33,recordLogSwitch:34,recordDiscussSwitch:35,recordCopySwitch:36,recordRecreateSwitch:37,sysControlSwitch:40,approveDetailsSwitch:41},o={submitForm:_l("\u63D0\u4EA4\u8868\u5355"),alias:_l("\u6570\u636E\u540D\u79F0"),display:_l("\u4E1A\u52A1\u89C4\u5219"),validationBox:_l("\u9A8C\u8BC1\u89C4\u5219"),printTemplate:_l("\u6253\u5370\u6A21\u677F"),functionalSwitch:_l("\u529F\u80FD\u5F00\u5173"),customBtn:_l("\u81EA\u5B9A\u4E49\u52A8\u4F5C"),indexSetting:_l("\u68C0\u7D22\u52A0\u901F")},d=[{value:"1",text:_l("\u5173\u95ED\u5F39\u5C42")},{value:"2",text:_l("\u7EE7\u7EED\u521B\u5EFA\u4E0B\u4E00\u6761")},{value:"3",text:_l("\u6253\u5F00\u521A\u521A\u521B\u5EFA\u7684\u8BB0\u5F55")}]},31742:(lt,Te,t)=>{"use strict";t.d(Te,{u:()=>g,v:()=>ce});var ce=function(L){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],R=arguments[2];if(Array.isArray(te)){var y=te.find(function(a){return a.type===L});return!y||te.length<=0?!1:L<20||[40,50,51].includes(L)?y.state:R?!!y.state&&(y.viewIds.includes(R)||y.viewIds.length<=0):!!y.state}return!1},g=function(L,te,R){var y=L;return R?(y.push(te),y):L.map(function(a){return a.btnId===te.btnId?te:a})}},68898:(lt,Te,t)=>{"use strict";t.r(Te),t.d(Te,{default:()=>K});var ce=t(66814),g=t(91880),p=t.n(g),L=t(63239),te=t.n(L),R=t(33867),y=t(22382),a=t(28661),r=t.n(a),o=t(85105),d=t.n(o),Z=t(99663),H=t(22600),U=t(49135),f=t(93196),V=t(67294),C=t(50533),O=t(99452),n=t(18667),s=t(33173),j=t(537),A=t(35989),S=t(44950),I=t(96486),c=t.n(I),q,b,k=[_l("@\u7528\u6237"),_l("\u8F93\u5165@")],ee=_l("@\u5DE5\u4F5C\u8868\u5168\u4F53\u6210\u5458"),re=_l("@\u8BB0\u5F55\u5168\u4F53\u6210\u5458"),ie=[re].concat(k),le=[ee].concat(k),E=function(F){return F==="undefined"||F==="null"?"":F||""},w=(q=(0,C.$j)(function(N){return{}}),q(b=function(N){(0,f.default)(F,N);function F(h){(0,Z.default)(this,F);var z=(0,U.default)(this,(F.__proto__||d()(F)).call(this,h));return z.getPortalConfigSet=function(){var X=z.props.match.params,B=X.appId;A.Z.getConfig({appId:B}).then(function(x){var Q=x.allowExAccountDiscuss,i=x.exAccountDiscussEnum;z.setState({allowExAccountDiscuss:Q,exAccountDiscussEnum:i})})},z.state={value:"",files:[],members:[],showSelectUser:!1,allowExAccountDiscuss:!1,exAccountDiscussEnum:0},z}return(0,H.default)(F,[{key:"componentDidMount",value:function(){this.getPortalConfigSet()}},{key:"componentWillUnmount",value:function(){r().close()}},{key:"handleAt",value:function(){var z=this,X=this.props.match.params,B=X.rowId,x=E(B),Q=c().isEmpty(x)?le:ie;r().showActionSheetWithOptions({message:V.createElement("div",{className:"flexRow"},V.createElement("span",{className:"flex Font13 leftAlign"},_l("\u8BA8\u8BBA")),V.createElement(R.Z,{onClick:function(){r().close()},icon:"closeelement-bg-circle",className:"Font22 Gray_9e"})),options:Q.map(function(i){return V.createElement("span",{className:"Bold"},i)})},function(i){i===0&&z.handlePushValue(" "+Q[0]+" "),i===1&&z.setState({showSelectUser:!0}),i===2&&z.handlePushValue("@")})}},{key:"handlePushValue",value:function(z){var X=this.state.value;this.setState({value:X+z})}},{key:"handleSendMessage",value:function(){var z=this,X=this.state,B=X.value,x=X.files,Q=X.members,i=X.allowExAccountDiscuss,m=X.exAccountDiscussEnum,v=this.props.match.params,W=v.worksheetId,P=v.rowId,u=v.discussionInfo,l=E(P),T=u.replyId,G=u.replyName;if(B){var D=B.replace(c().isEmpty(l)?ee:re,"[all]atAll[/all]");Q.length&&Q.forEach(function(se){D=D.replace("@"+se.fullname,"[aid]"+se.accountId+"[/aid]")});var M=0;md.global.Account.isPortal&&i&&m===1&&(M=2),j.Z.addDiscussion({sourceId:l?W+"|"+l:W,sourceType:l?8:7,message:D,attachments:te()(x),appId:md.global.APPInfo.worksheetAppID,extendsId:E(v.appId)+"|"+E(v.viewId),replyId:T||void 0,entityType:M===2?2:0}).then(function(se){se.data&&z.props.onAdd(se.data)})}}},{key:"renderFiles",value:function(){var z=this,X=this.state.files;return V.createElement("div",{className:"filesScroll"},V.createElement(s.Z,{width:130,isRemove:!0,attachments:X,onChange:function(x){z.setState({files:x})}}))}},{key:"render",value:function(){var z=this,X=this.state,B=X.value,x=X.files,Q=X.showSelectUser,i=this.props.projectId,m=this.props.match.params,v=m.appId,W=m.discussionInfo,P=W.replyId,u=W.replyName;return V.createElement("div",{className:"addDiscuss flexColumn h100"},V.createElement("div",{className:"flexRow pAll10 pBottom0"},V.createElement("div",{className:"flex"},_l("\u8BA8\u8BBA")),V.createElement(R.Z,{icon:"closeelement-bg-circle",className:"close Font22 Gray_9e",onClick:this.props.onClose})),V.createElement("textarea",{placeholder:u?_l("\u56DE\u590D%0",u):"",className:"contentInput flex",value:B,onChange:function(T){z.setState({value:T.target.value})}}),x.length?V.createElement("div",{className:"filesWrapper"},this.renderFiles()):null,V.createElement(p(),{className:"handleBar"},V.createElement(p().Item,{className:"flexRow"},V.createElement(s.w,{files:x,projectId:i,appId:v,onChange:function(T){z.setState({files:T})}},V.createElement(R.Z,{icon:"attachment"})),!md.global.Account.isPortal&&V.createElement(R.Z,{icon:"chat-at",onClick:this.handleAt.bind(this)})),V.createElement("div",{className:"addRecord",onClick:this.handleSendMessage.bind(this)},_l("\u53D1\u9001"))),Q&&V.createElement(n.Z,{visible:!0,type:"user",appId:v,projectId:this.props.projectId,onSave:function(T){var G=z.state.value;z.setState({value:G+" "+(T.map(function(D){return"@"+D.fullname}).join(" ")+" "),members:T})},onClose:function(){return z.setState({showSelectUser:!1})}}))}}]),F}(V.Component))||b);const K=function(N){var F=N.appId,h=N.worksheetId,z=N.viewId,X=N.rowId,B=N.discussionInfo,x=N.className,Q=N.visible,i=N.onClose,m=N.onAdd,v=N.projectId;return V.createElement(S.n,{popup:!0,animationType:"slide-up",className:x,onClose:i,visible:Q},(X||h)&&V.createElement(w,{match:{params:{appId:F,worksheetId:h,viewId:z,rowId:X,discussionInfo:B}},onAdd:m,onClose:i,projectId:v}))}},50043:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>U});var ce=t(33867),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(86735),r=t(67294),o=t(71893),d=t(75915),Z=(0,a.Z)([`
  width: 100%;
  height: calc(100% - 80px);
  overflow-y: auto;
  display: flex;
  align-items: center;
  flex-direction: column;
  padding: 0 31px;
  .iconInfo {
    width: 110px;
    height: 110px;
    border-radius: 50%;
    text-align: center;
    background-color: #f5f5f5;
    margin-top: 110px;
    .Font48 {
      font-size: 48px;
    }
    i {
      line-height: 110px;
    }
  }
  .fixeding {
    color: #333;
    font-size: 17px;
  }
  .fixedInfo {
    color: #9e9e9e;
    font-size: 14px;
  }
  .fixRemark {
    font-size: 13px;
    color: #333;
  }
`],[`
  width: 100%;
  height: calc(100% - 80px);
  overflow-y: auto;
  display: flex;
  align-items: center;
  flex-direction: column;
  padding: 0 31px;
  .iconInfo {
    width: 110px;
    height: 110px;
    border-radius: 50%;
    text-align: center;
    background-color: #f5f5f5;
    margin-top: 110px;
    .Font48 {
      font-size: 48px;
    }
    i {
      line-height: 110px;
    }
  }
  .fixeding {
    color: #333;
    font-size: 17px;
  }
  .fixedInfo {
    color: #9e9e9e;
    font-size: 14px;
  }
  .fixRemark {
    font-size: 13px;
    color: #333;
  }
`]),H=o.ZP.div(Z),U=function(f){(0,y.default)(V,f);function V(){return(0,L.default)(this,V),(0,R.default)(this,(V.__proto__||p()(V)).apply(this,arguments))}return(0,te.default)(V,[{key:"render",value:function(){var O=this.props,n=O.fixAccount,s=n===void 0?{}:n,j=O.fixRemark,A=O.isNoPublish,S=s.fullName;return A?r.createElement(H,null,r.createElement("div",{className:"iconInfo mBottom18",style:{marginTop:document.body.clientHeight/4}},r.createElement(ce.Z,{className:"Font56 Gray_75",icon:"computer"})),r.createElement("div",{className:"Font18 mBottom20 centerAlign fixeding"},r.createElement("div",null,_l("\u5E94\u7528\u672A\u5728\u6B64\u5E73\u53F0\u53D1\u5E03")),r.createElement("div",null,_l("\u8BF7\u81F3PC\u7AEF\u4F7F\u7528"))),r.createElement(d.Z,{icon:"home",style:{bottom:"20px"},onClick:function(){window.mobileNavigateTo("/mobile/dashboard")}})):r.createElement(H,null,r.createElement("div",{className:"iconInfo mBottom25"},r.createElement(ce.Z,{className:"Font48",icon:"setting",style:{color:"#fd7558"}})),r.createElement("div",{className:"Font18 mBottom20 fixeding"},_l("\u5E94\u7528\u7EF4\u62A4\u4E2D...")),r.createElement("div",{className:"fixedInfo mBottom20"},_l("\u8BE5\u5E94\u7528\u88AB%0\u8BBE\u7F6E\u4E3A\u7EF4\u62A4\u4E2D\u72B6\u6001,\u6682\u505C\u8BBF\u95EE",S)),r.createElement("div",{className:"fixRemark"},j),r.createElement(d.Z,{icon:"home",style:{bottom:"20px"},onClick:function(){window.mobileNavigateTo("/mobile/dashboard")}}))}}]),V}(r.Component)},33173:(lt,Te,t)=>{"use strict";t.d(Te,{w:()=>re,Z:()=>ie});var ce=t(24043),g=t.n(ce),p=t(54022),L=t(66814),te=t(91880),R=t.n(te),y=t(33867),a=t(46417),r=t(88239),o=t(39216),d=t(48272),Z=t.n(d),H=t(85105),U=t.n(H),f=t(99663),V=t(22600),C=t(49135),O=t(93196),n=t(67294),s=t(93967),j=t.n(s),A=t(15577),S=t(44293),I=t(95283),c=t(30381),q=t(96486),b=t.n(q),k,ee,re=function(le){(0,O.default)(E,le);function E(w){(0,f.default)(this,E);var K=(0,C.default)(this,(E.__proto__||U()(E)).call(this,w));return K.state={files:w.files},K.currentFile=null,K.id="uploadFiles-"+(0,A.ne)(10),K}return(0,V.default)(E,[{key:"componentWillReceiveProps",value:function(K){K.files.length!==this.props.files.length&&this.setState({files:K.files})}},{key:"getMethod",value:function(){var K=this,N=K.props,F=N.advancedSetting,h=F===void 0?{}:F,z=N.projectId,X=N.appId,B=N.worksheetId,x={onAdd:function(i,m){if(b().isEmpty(m)){K.props.onChange([]);return}K.uploading=!0;var v=JSON.parse(h.watermark||null)||[],W=function(){if(h){var u=void 0,l=K.props.originCount||0;if(u=(0,S.go)(h,m,l),!u){K.onRemoveAll(i);return}}m.filter(function(T){return T.name||T.type}).forEach(function(T){var G=K.state.files,D="."+File.GetExt(T.name),M=File.GetName(T.name),se=File.isPicture(D),ae=T.id,ne={isPic:se,fileExt:D,fileName:M,id:ae},de=G.concat({id:T.id,progress:0,base:ne});K.setState({files:de}),K.props.onChange(de)})};W()},onBeforeUpload:function(i,m){K.currentFile=i},onUploadProgress:function(i,m){var v=m.loaded||0,W=m.size||0,P=(v/W*100).toFixed(1),u=K.state.files.map(function(l){return m.id===l.id&&"progress"in l&&(l.progress=P),l});K.setState({files:u}),K.props.onChange(u)},onUploaded:function(i,m,v){var W=K.state.files.map(function(P){return m.id===P.id&&"progress"in P&&(P=(0,S.LE)(m,v),P.originalFileName=decodeURIComponent(P.originalFileName),delete P.progress,delete P.base),P});K.setState({files:W}),K.props.onChange(W,!0)},onUploadComplete:function(){K.uploading=!1},onError:function(i,m){m.code===window.plupload.FILE_SIZE_ERROR?Z().info(_l("\u5355\u4E2A\u6587\u4EF6\u5927\u5C0F\u8D85\u8FC7%0MB\uFF0C\u65E0\u6CD5\u652F\u6301\u4E0A\u4F20",1024*4)):Z().info(_l("\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\u3002"))},onInit:function(){var i=K.uploadContainer&&K.uploadContainer.querySelector("input"),m=K.props,v=m.inputType,W=m.advancedSetting,P=W===void 0?{}:W,u=m.customUploadType,l=P.filetype,T=l&&JSON.parse(l).type,G={0:"*",1:"image/*",2:"video/*"},D={1:"image/*",2:"application/*",3:"audio/*",4:"video/*"};i&&(u?(i.setAttribute("accept",u==="camara"?"image/*":"video/*"),i.setAttribute("capture","environment")):i.setAttribute("accept",T?D[T]:v?G[v]:"*"))}};return x}},{key:"onRemoveAll",value:function(K){K.files.forEach(function(N){setTimeout(function(){K.removeFile({id:N.id})},0)})}},{key:"render",value:function(){var K=this,N=this.props,F=N.advancedSetting,h=F===void 0?{}:F,z=N.appId,X=N.worksheetId,B=N.projectId,x=this.props,Q=x.children,i=x.className,m=x.style;return n.createElement("div",{className:"Relative",style:m,ref:function(W){return K.uploadContainer=W}},n.createElement(a.Z,(0,r.default)({options:{url:md.global.FileStoreConfig.uploadHost,file_data_name:"file",multi_selection:!0,max_file_size:1024*4+"m",autoUpload:!1,getTokenParam:{appId:z,worksheetId:X,projectId:B}}},this.getMethod()),n.createElement("span",{ref:function(W){return K.uploadFileEl=W},id:this.id,className:i},Q)))}}]),E}(n.Component),ie=(ee=k=function(le){(0,O.default)(E,le);function E(w){(0,f.default)(this,E);var K=(0,C.default)(this,(E.__proto__||U()(E)).call(this,w));return K.style={width:w.width},K}return(0,V.default)(E,[{key:"handleRemove",value:function(K,N){N.stopPropagation();var F=K.fileID,h=this.props.attachments,z=h.filter(function(X){return X.fileID!==F});this.props.onChange(z,!0)}},{key:"previewAttachment",value:function(K){var N=this.props,F=N.attachments,h=N.hideDownload,z=F[K].updateTime,X=["editFileName"];h&&X.push("download","share","saveToKnowlege"),(0,I.Z)({index:K||0,attachments:z?F:F.map(function(B){return{name:""+(B.originalFileName||_l("\u672A\u547D\u540D"))+B.fileExt,path:""+(B.previewUrl||B.url),previewAttachmentType:"QINIU",size:B.fileSize,fileid:B.fileID}}),callFrom:z?"player":"chat",showThumbnail:!0,hideFunctions:X})}},{key:"renderImage",value:function(K,N){var F=this,h=!!K.refId,z=K.previewUrl||K.viewUrl||K.url||"",X=h?""+(K.middlePath+K.middleName):z.indexOf("imageView2")>-1?z.replace(/imageView2\/\d\/w\/\d+\/h\/\d+(\/q\/\d+)?/,"imageView2/1/w/200/h/140"):z+"&imageView2/1/w/200/h/140";return n.createElement(R(),{key:K.fileID,className:"fileWrapper",style:this.style,onClick:function(x){F.previewAttachment(N),x.stopPropagation()}},n.createElement("div",{className:"image",style:{backgroundImage:"url("+X+")"}}),this.props.isRemove?n.createElement(y.Z,{icon:"close",className:"closeIcon",onClick:this.handleRemove.bind(this,K)}):null)}},{key:"renderFile",value:function(K,N){var F=this,h=(0,A.kQ)((K.fileExt||K.ext).replace(".",""));return n.createElement(R(),{key:K.fileID,direction:"column",className:"fileWrapper",style:this.style,onClick:function(X){F.previewAttachment(N),X.stopPropagation()}},n.createElement(R(),{className:"filePanel",justify:"center",align:"center"},n.createElement("div",{className:j()(h,"fileIcon")})),n.createElement(R(),{className:"fileText"},n.createElement("span",null,""+(K.originalFileName||K.originalFilename)+(K.fileExt||K.ext))),this.props.isRemove?n.createElement(y.Z,{icon:"close",className:"closeIcon",onClick:this.handleRemove.bind(this,K)}):null)}},{key:"renderProgress",value:function(K){var N=K.progress,F=K.base;return n.createElement(R(),{key:K.id,direction:"column",className:"fileWrapper",style:this.style},n.createElement(R(),{className:"filePanel",justify:"center",align:"center"},n.createElement(p.Z.Circle,{key:"text",isAnimation:!1,isRound:!1,strokeWidth:3,diameter:47,foregroundColor:"#BDBDBD",backgroundColor:"#fff",format:function(z){return""},percent:parseInt(N)})),n.createElement(R(),{className:"fileText"},n.createElement("span",null,""+F.fileName+(F.fileExt||K.ext))))}},{key:"render",value:function(){var K=this,N=this.props.attachments,F=g()({length:6});return n.createElement(R(),{className:"attachmentFiles"},N.map(function(h,z){return"progress"in h?K.renderProgress(h):File.isPicture(h.fileExt||h.ext)?K.renderImage(h,z):K.renderFile(h,z)}),F.map(function(h,z){return n.createElement("div",{key:z,className:"fileWrapper fileEmpty"})}))}}]),E}(n.Component),k.defaultProps={width:120},ee)},3951:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>Be});var ce=t(66814),g=t(91880),p=t.n(g),L=t(51097),te=t(64540),R=t(54208),y=t(85105),a=t.n(y),r=t(99663),o=t(22600),d=t(49135),Z=t(93196),H=t(67294),U=t(50533),f=t(537),V=function(Ie,ge){var Re=Ie.worksheetId,Pe=Ie.rowId,ke=Ie.pageIndex,We=Ie.entityType;return function(Ve,it){var Ge=Pe?8:7,pt=Pe?Re+"|"+Pe:Re;f.Z.getDiscussions({sourceId:pt,sourceType:Ge,pageIndex:ke,pageSize:10,isFocus:!1,entityType:We}).then(function(ot){Ve(ke===1?{type:"MOBILE_SET_SHEET_DISCUSSION",data:ot.data}:{type:"MOBILE_ADD_SHEET_DISCUSSION",data:ot.data}),ge&&ot&&ot.data&&ge(ot.data.length===10)})}},C=function(Ie){return function(ge,Re){ge({type:"MOBILE_UNSHIFT_SHEET_DISCUSSION",data:Ie})}},O=function(Ie,ge){return function(Re,Pe){var ke=Pe().mobile.sheetDiscussions;f.Z.removeDiscussion({discussionId:Ie,sourceType:ge?8:7}).then(function(We){var Ve=ke.filter(function(it){return it.discussionId!==Ie});Re({type:"MOBILE_SET_SHEET_DISCUSSION",data:Ve})})}},n=function(Ie,ge){var Re=Ie.worksheetId,Pe=Ie.rowId,ke=Ie.pageIndex;return function(We,Ve){worksheetAjax.getLogs({worksheetId:Re,rowId:Pe,pageIndex:ke,pageSize:10}).then(function(it){We(ke===1?{type:"MOBILE_SET_SHEET_LOG",data:it}:{type:"MOBILE_ADD_SHEET_LOG",data:it}),ge&&it&&ge(it.length===10)})}},s=function(Ie,ge){var Re=Ie.worksheetId,Pe=Ie.rowId;return function(ke,We){var Ve=Pe?Re+"|"+Pe:Re;discussionAjax.getSourceAtts({sourceId:Ve,sourceType:7}).then(function(it){ke({type:"MOBILE_SET_SHEET_ATTACHMENTS",data:it.data}),ge&&ge()})}},j=function(){return{type:"MOBILE_SET_SHEET_DISCUSSION",data:[]}},A=function(){return{type:"MOBILE_SET_SHEET_LOG",data:[]}},S=t(73818),I=t(96223),c=t.n(I),q=t(48388),b=t(29914),k=t.n(b),ee=t(88239),re=t(33867),ie=t(22382),le=t(28661),E=t.n(le),w=t(73221),K=t(25002),N=t.n(K),F=t(77040),h=t(94301),z=t.n(h),X=t(93967),B=t.n(X),x=t(52945),Q=t.n(x),i=t(15577),m=t(68924),v=t.n(m),W=t(82302),P=Q()({},W.whiteList,{img:["src","alt","title","width","height","class"]}),u=function(we){(0,Z.default)(Ie,we);function Ie(ge){return(0,r.default)(this,Ie),(0,d.default)(this,(Ie.__proto__||a()(Ie)).call(this,ge))}return(0,o.default)(Ie,[{key:"replyAccountMsg",value:function(){var Re=this.props,Pe=Re.showReplyMessage,ke=Re.replyAccount;return Pe?H.createElement("span",null,_l("\u56DE\u590D"),H.createElement("span",{style:{color:"#2196f3"}},ke.fullname),": "):null}},{key:"renderMessage",value:function(){var Re=this.props.item,Pe=(0,i.U4)({sourceType:Re.sourceType,message:Re.message,rUserList:Re.accountsInMessage});return H.createElement("span",{className:"singeText",dangerouslySetInnerHTML:{__html:v()(Pe,{whiteList:P})}})}},{key:"render",value:function(){return H.createElement("div",null,this.replyAccountMsg(),this.renderMessage())}}]),Ie}(H.Component),l=t(33173),T=t(19081),G=t.n(T),D=t(96486),M=t.n(D),se=z().Item,ae=se.Brief,ne=function(we){(0,Z.default)(Ie,we);function Ie(ge){(0,r.default)(this,Ie);var Re=(0,d.default)(this,(Ie.__proto__||a()(Ie)).call(this,ge)),Pe=new(N()).DataSource({rowHasChanged:function(We,Ve){return We!==Ve}});return Re.state={dataSource:Pe,loading:!0,isMore:!0,pageIndex:1},Re}return(0,o.default)(Ie,[{key:"componentDidMount",value:function(){this.getSheetDiscussion(this.state.pageIndex)}},{key:"componentWillUnmount",value:function(){E().close(),this.props.dispatch(j())}},{key:"getSheetDiscussion",value:function(Re){var Pe=this,ke=this.props,We=ke.worksheetId,Ve=ke.rowId,it=ke.entityType;this.setState({loading:!0}),this.props.dispatch(V({pageIndex:Re,worksheetId:We,rowId:Ve,entityType:it},function(Ge){Pe.setState({pageIndex:Re,loading:!1,isMore:Ge})}))}},{key:"openActionSheet",value:function(Re){var Pe=this,ke=this.props,We=ke.rowId,Ve=ke.sheetDiscussions,it=[{name:_l("\u5220\u9664\u8BC4\u8BBA"),class:"Red",icon:"delete2",iconClass:"Font18"}];E().showActionSheetWithOptions({message:H.createElement("div",{className:"flexRow"},H.createElement("span",{className:"flex Font13 leftAlign"},_l("\u8BA8\u8BBA")),H.createElement(re.Z,{onClick:function(){E().close()},icon:"closeelement-bg-circle",className:"Font22 Gray_9e"})),options:it.map(function(Ge){return H.createElement("div",{className:Ge.class},H.createElement(re.Z,{className:B()("mRight10",Ge.iconClass),icon:Ge.icon}),H.createElement("span",{className:"Bold"},Ge.name))})},function(Ge){Ge===0&&Pe.props.dispatch(O(Re,We))})}},{key:"componentWillReceiveProps",value:function(Re){Re.sheetDiscussions.length!==this.props.sheetDiscussions.length&&this.setState({dataSource:this.state.dataSource.cloneWithRows((0,ee.default)({},Re.sheetDiscussions))})}},{key:"handleEndReached",value:function(){var Re=this.state,Pe=Re.loading,ke=Re.isMore;!Pe&&ke&&this.getSheetDiscussion(this.state.pageIndex+1)}},{key:"renderItem",value:function(Re){var Pe=this;return H.createElement(se,{key:Re.discussionId,align:"top",thumb:Re.createAccount.avatar,multipleLine:!0},H.createElement(p(),null,H.createElement("div",{className:"name Font15"},Re.createAccount.fullname),H.createElement("div",{className:"flexRow valignWrapper Font14 Gray_9e"},H.createElement("div",null,createTimeSpan((0,i.LX)(Re.createTime))),Re.createAccount.accountId===md.global.Account.accountId&&H.createElement(re.Z,{className:"mLeft5 Font22",icon:"more_horiz",onClick:this.openActionSheet.bind(this,Re.discussionId)}))),H.createElement(ae,null,H.createElement("div",{className:"content Font14 Gray",onClick:function(){Pe.props.onReply(Re.discussionId,Re.createAccount.fullname)}},H.createElement(u,{item:Re,showReplyMessage:!!Re.replyId,replyAccount:Re.replyAccount}))),Re.attachments.length?H.createElement(l.Z,{attachments:Re.attachments,width:"49%"}):null)}},{key:"render",value:function(){var Re=this.state,Pe=Re.dataSource,ke=Re.loading,We=Re.isMore,Ve=this.props,it=Ve.sheetDiscussions,Ge=Ve.height;return H.createElement(H.Fragment,null,M().isEmpty(it)?H.createElement(p(),{justify:"center",align:"center",style:{height:Ge}},ke?H.createElement(k(),{size:"large"}):H.createElement(p(),{direction:"column",className:"withoutData"},H.createElement("img",{src:G()}),H.createElement(c(),{size:"lg"}),H.createElement("span",{className:"text"},_l("\u6682\u65E0\u8BA8\u8BBA")))):H.createElement(z(),{className:"sheetDiscussList"},H.createElement(N(),{dataSource:Pe,renderFooter:We?function(){return H.createElement(p(),{justify:"center"},ke?H.createElement(k(),{animating:!0}):null)}:!1,pageSize:10,scrollRenderAheadDistance:500,onEndReached:this.handleEndReached.bind(this),onEndReachedThreshold:10,style:{height:Ge,overflow:"auto"},renderRow:this.renderItem.bind(this)})))}}]),Ie}(H.Component);const de=(0,U.$j)(function(we){var Ie=we.mobile.sheetDiscussions;return{sheetDiscussions:Ie}})(ne);var Ce=t(86735),he=t(15797),fe=t(71893),Ee=(0,Ce.Z)([`
  width: 100%;
  height: 100%;
  color: rgba(0, 0, 0, 0.85);
  background-color: #fafafa;
`],[`
  width: 100%;
  height: 100%;
  color: rgba(0, 0, 0, 0.85);
  background-color: #fafafa;
`]),Y=fe.ZP.div(Ee),oe=function(we){(0,Z.default)(Ie,we);function Ie(ge){(0,r.default)(this,Ie);var Re=(0,d.default)(this,(Ie.__proto__||a()(Ie)).call(this,ge));return Re.state={},Re}return(0,o.default)(Ie,[{key:"render",value:function(){var Re=this.props,Pe=Re.worksheetId,ke=Re.rowId,We=Re.originalData;return H.createElement(Y,null,H.createElement(he.Z,{worksheetId:Pe,rowId:ke,controls:We||[]}))}}]),Ie}(H.Component);const ve=oe;var ue=t(75915),pe=t(91088),Se=t(45231),ye=t(31742),J=t(76345),me=t(35989),be=t(68898),xe=md.global.Account.isPortal?[{title:_l("\u8BA8\u8BBA"),type:1}]:[{title:_l("\u8BA8\u8BBA"),type:1},{title:_l("\u65E5\u5FD7"),type:3}],Ae=43,Ne=52,Me=function(Ie,ge){for(var Re=null,Pe=0;Pe<Ie.length;Pe++){for(var ke=Ie[Pe],We=0;We<ke.workSheetInfo.length;We++)if(ke.workSheetInfo[We].workSheetId===ge){Re=ke.appSectionId;break}if(Re)break}return Re},Fe=function(we){(0,Z.default)(Ie,we);function Ie(ge){(0,r.default)(this,Ie);var Re=(0,d.default)(this,(Ie.__proto__||a()(Ie)).call(this,ge));return Re.getPortalConfigSet=function(){var Pe=Re.props.match.params,ke=Pe.appId;me.Z.getConfig({appId:ke}).then(function(We){var Ve=We.allowExAccountDiscuss,it=We.exAccountDiscussEnum;Re.setState({allowExAccountDiscuss:Ve,exAccountDiscussEnum:it,loading:!1})})},Re.state={groupId:null,switchPermit:{},allowExAccountDiscuss:!1,exAccountDiscussEnum:0,loading:!0,replyVisible:!1,discussionInfo:{},pageType:void 0},Re}return(0,o.default)(Ie,[{key:"componentDidMount",value:function(){var Re=this,Pe=this.props.match.params;M().isEmpty(Pe.rowId)&&this.getGroupInfo(),this.getPortalConfigSet(),Se.Z.getSwitchPermit({appId:Pe.appId,worksheetId:Pe.worksheetId}).then(function(ke){Re.setState({switchPermit:ke})})}},{key:"getGroupInfo",value:function(){var Re=this,Pe=this.props.match.params,ke=Pe.appId,We=Pe.worksheetId;pe.Z.getApp({appId:ke,getSection:!0}).then(function(Ve){Re.setState({groupId:Me(Ve.sections,We)})})}},{key:"render",value:function(){var Re=this,Pe=this.props,ke=Pe.isModal,We=Pe.onClose,Ve=Pe.originalData,it=this.props.match.params,Ge=it.worksheetId,pt=it.rowId,ot=this.state,vt=ot.replyVisible,At=ot.discussionInfo,yt=this.state,st=yt.switchPermit,St=yt.allowExAccountDiscuss,Qe=yt.exAccountDiscussEnum,Xe=yt.loading,$e=(0,ye.v)(J.RX.recordDiscussSwitch,st),Ke=(0,ye.v)(J.RX.recordLogSwitch,st),Ue=md.global.Account.isPortal&&St&&Qe===1?2:0;if(md.global.Account.isPortal&&Xe||M().isEmpty(st))return H.createElement(R.Z,null);var He=xe.filter(function(Et){if(Et.type===1)return $e;if(Et.type===3)return Ke}),ze=this.state.pageType?this.state.pageType:He[0].type,gt={height:document.documentElement.clientHeight-Ae-($e?Ne:0)};return H.createElement("div",{className:"discussTabs h100 flexColumn"},ke&&H.createElement("div",{className:"closeDiscuss",onClick:We},_l("\u67E5\u770B\u8BB0\u5F55")),H.createElement(te.default,{tabs:He,page:M().findIndex(He,{type:ze}),onTabClick:function(ft){Re.setState({pageType:ft.type})},tabBarInactiveTextColor:"#9e9e9e",renderTabBar:function(ft){return H.createElement(te.default.DefaultTabBar,ft)}}),$e&&ze===1&&H.createElement("div",{style:gt},H.createElement(de,{worksheetId:Ge,rowId:pt,height:gt.height,entityType:Ue,onReply:function(ft,qe){Re.setState({replyVisible:!0,discussionInfo:{replyId:ft,replyName:qe}})}})),Ke&&ze===3&&H.createElement("div",{style:gt},H.createElement(ve,{worksheetId:it.worksheetId,rowId:pt||"",originalData:Ve})),$e&&H.createElement(p(),{className:"participation",onClick:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}Re.setState({replyVisible:!0})}},H.createElement("div",{className:"text"},_l("\u53C2\u4E0E\u8BA8\u8BBA..."))),!ke&&H.createElement(ue.Z,{onClick:function(){var ft=Re.state.groupId;pt?window.mobileNavigateTo("/mobile/record/"+it.appId+"/"+it.worksheetId+"/"+it.viewId+"/"+pt):ft&&window.mobileNavigateTo("/mobile/recordList/"+it.appId+"/"+ft+"/"+it.worksheetId)}}),H.createElement(be.default,{appId:it.appId,worksheetId:it.worksheetId,viewId:it.viewId,rowId:it.rowId,discussionInfo:At,visible:vt,onClose:function(){Re.setState({replyVisible:!1,discussionInfo:{}})},onAdd:function(ft){Re.props.dispatch(C(ft)),Re.props.onAddCount(),Re.setState({replyVisible:!1,discussionInfo:{}})},projectId:this.props.projectId}))}}]),Ie}(H.Component);const Be=(0,U.$j)(function(we){return{}})(Fe)},73553:(lt,Te,t)=>{"use strict";t.r(Te),t.d(Te,{default:()=>R});var ce=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(3951);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(44950);var L=t(96486),te=t.n(L);const R=function(y){var a=y.isModal,r=y.match,o=y.appId,d=y.worksheetId,Z=y.rowId,H=y.viewId,U=y.projectId,f=y.className,V=y.visible,C=y.onClose,O=y.onAddCount,n=O===void 0?te().noop:O,s=y.originalData;return a?ce.createElement(p.n,{popup:!0,animationType:"slide-up",className:f,onClose:C,visible:V},Z&&ce.createElement(g.Z,{isModal:!0,match:{params:{appId:o,worksheetId:d,rowId:Z,viewId:H}},onClose:C,onAddCount:n,originalData:s,projectId:U})):ce.createElement(g.Z,{match:r,isModal:!1,onAddCount:n})}},74666:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>G});var ce=t(88239),g=t(63239),p=t.n(g),L=t(20148),te=t(60385),R=t.n(te),y=t(13439),a=t(40358),r=t.n(a),o=t(72557),d=t(26022),Z=t(77040),H=t(94301),U=t.n(H),f=t(33867),V=t(66814),C=t(91880),O=t.n(C),n=t(22382),s=t(28661),j=t.n(s),A=t(85105),S=t.n(A),I=t(99663),c=t(22600),q=t(49135),b=t(93196),k=t(67294),ee=t(93967),re=t.n(ee),ie=t(65369),le=t(15577),E=t(51843),w=t(63627),K=t(81982),N=t.n(K),F=t(86735),h=t(73935),z=t(71893),X=(0,F.Z)([`
  .searchWrap {
    padding: 7px 15px;
    border-radius: 25px;
    background-color: #f6f6f6;
    position: relative;
    margin: 10px;
    input {
      width: 100%;
      border: none;
      padding-left: 10px;
      background-color: #f6f6f6;
    }
    .icon-close {
      position: absolute;
      right: 10px;
    }
  }
  .opinionsWrap {
    overflow-y: auto;
    padding: 0 10px;
    .opinionItem {
      padding: 10px 0;
      border-bottom: 1px solid #f6f6f6;
    }
  }
`],[`
  .searchWrap {
    padding: 7px 15px;
    border-radius: 25px;
    background-color: #f6f6f6;
    position: relative;
    margin: 10px;
    input {
      width: 100%;
      border: none;
      padding-left: 10px;
      background-color: #f6f6f6;
    }
    .icon-close {
      position: absolute;
      right: 10px;
    }
  }
  .opinionsWrap {
    overflow-y: auto;
    padding: 0 10px;
    .opinionItem {
      padding: 10px 0;
      border-bottom: 1px solid #f6f6f6;
    }
  }
`]),B=z.ZP.div(X),x=function(D){(0,b.default)(M,D);function M(se){(0,I.default)(this,M);var ae=(0,q.default)(this,(M.__proto__||S()(M)).call(this,se));return ae.state={searchValue:""},ae}return(0,c.default)(M,[{key:"renderInput",value:function(){var ae=this,ne=this.state.searchValue;return k.createElement("div",{className:"searchWrap valignWrapper"},k.createElement(f.Z,{icon:"search",className:"Gray_9e Font20 pointer"}),k.createElement("input",{value:ne,type:"text",placeholder:_l("\u641C\u7D22"),onChange:function(Ce){ae.setState({searchValue:Ce.target.value})}}),ne&&k.createElement(f.Z,{icon:"close",className:"Gray_75 Font20 pointer",onClick:function(){ae.setState({searchValue:""})}}))}},{key:"render",value:function(){var ae=this.props,ne=ae.visible,de=ae.onSelect,Ce=ae.onClose,he=ae.onCustom,fe=ae.opinions,Ee=ae.inputType,Y=this.state.searchValue;return k.createElement(R(),{popup:!0,visible:ne,onClose:Ce,animationType:"slide-up",className:"h100"},k.createElement(B,{className:"flexColumn leftAlign h100"},this.renderInput(),k.createElement("div",{className:"flex opinionsWrap"},Ee===2&&k.createElement("div",{className:"opinionItem ThemeColor",onClick:function(){de(""),Ce()}},_l("\u6E05\u9664\u9009\u62E9")),fe.filter(function(oe){return oe.value.toLocaleLowerCase().includes(Y.toLocaleLowerCase())}).map(function(oe,ve){return k.createElement("div",{key:ve,className:"opinionItem Gray",onClick:function(){de(oe.value),Ce()}},oe.value)})),Ee===1&&k.createElement("div",{className:"btnsWrapper valignWrapper flexRow"},k.createElement(N(),{type:"primary",className:"flex Font12 bold",onClick:function(){Ce(),he()}},_l("\u624B\u52A8\u8F93\u5165")))))}}]),M}(k.Component);function Q(D){var M=document.createElement("div");document.body.appendChild(M);function se(){h.unmountComponentAtNode(M),document.body.removeChild(M)}h.render(k.createElement(x,(0,ce.default)({visible:!0},D,{onClose:se})),M)}var i=t(18667),m=t(33173),v=t(66629),W=t(96486),P=t.n(W),u,l,T,G=(l=u=function(D){(0,b.default)(M,D);function M(se){(0,I.default)(this,M);var ae=(0,q.default)(this,(M.__proto__||S()(M)).call(this,se));T.call(ae);var ne=ae.props,de=ne.action,Ce=ne.instance,he=(Ce||{}).backFlowNodes||[],fe=(Ce||{}).flowNode||{},Ee=fe.isCallBack,Y=(Ce||{}).opinionTemplate||{},oe=Y.inputType,ve=Y.opinions,ue="",pe="";return se.action==="return"&&he.length&&(ue=he[0].id),se.action==="pass"&&P().find(ve[4],{selected:!0})&&(pe=P().find(ve[4],{selected:!0}).value),P().includes(["overrule","return"],se.action)&&P().find(ve[5],{selected:!0})&&(pe=P().find(ve[5],{selected:!0}).value),ae.state={backFlowNodesVisible:!1,backFlowNodes:he,backFlowNode:ue,content:pe,edit:!1,showPassword:!1,selectedUser:[],entrustList:{},customApproveContent:!!pe,files:[]},ae}return(0,c.default)(M,[{key:"componentDidMount",value:function(){var ae=this,ne=this.props,de=ne.action,Ce=ne.instance,he=ne.projectId,fe=(Ce||{}).flowNode||{},Ee=fe.encrypt;P().includes(["pass","overrule","return"],de)&&Ee&&(0,le.Gv)({projectId:he,checkNeedAuth:!0,fail:function(oe){ae.setState({showPassword:!0,removeNoneVerification:oe==="showPassword"})}})}},{key:"componentWillUnmount",value:function(){j().close()}},{key:"renderBackFlowNodes",value:function(){var ae=this,ne=this.state,de=ne.backFlowNode,Ce=ne.backFlowNodes;return k.createElement(U(),{renderHeader:function(){return k.createElement(O(),{className:"backFlowNodesHeader"},k.createElement(O().Item,{className:"left",onClick:function(){ae.setState({backFlowNodesVisible:!1})}},k.createElement("span",null,_l("\u53D6\u6D88"))),k.createElement(O().Item,{className:"Font17 Gray"},_l("\u9009\u62E9\u9000\u56DE\u8282\u70B9")),k.createElement(O().Item,{className:re()("right"),onClick:function(){ae.setState({backFlowNodesVisible:!1})}},_l("\u786E\u8BA4")))},className:"popup-list"},k.createElement("div",{className:"backFlowNodesList"},Ce.map(function(he){return k.createElement(U().Item,{key:he.id,onClick:function(){ae.setState({backFlowNode:he.id})}},k.createElement(O(),null,k.createElement("span",{className:"Gray flex"},he.name),de===he.id?k.createElement(f.Z,{icon:"ok"}):null))})))}},{key:"renderInfo",value:function(){var ae=this,ne=this.state,de=ne.backFlowNodes,Ce=ne.backFlowNode,he=ne.selectedUser,fe=ne.entrustList,Ee=this.props,Y=Ee.action,oe=Ee.instance,ve=ie.tx[Y],ue=(oe||{}).flowNode||{},pe=ue.isCallBack;if(pe&&P().includes(["return"],Y)&&de.length){var Se=de.filter(function(me){return me.id===Ce})[0],ye=Se||{},J=ye.name;return k.createElement("div",{className:"itemWrap flexRow valignWrapper Gray Font13"},k.createElement("div",{className:"bold"},_l("\u9000\u56DE\u5230")),k.createElement("div",{className:"flex flexRow valignWrapper flexEnd mLeft30",onClick:function(){ae.setState({backFlowNodesVisible:!0})}},k.createElement("span",null,J),k.createElement(f.Z,{icon:"navigate_next",className:"Gray_9e Font22"})))}if(P().includes(["transfer","transferApprove","after","before"],Y))return k.createElement("div",{className:"itemWrap flexRow valignWrapper"},k.createElement("div",{className:"Gray Font13 bold"},ve.headerText),he.accountId?k.createElement("div",{className:"flex flexRow valignWrapper flexEnd mRight10 mLeft30",onClick:function(be){return ae.handleOpenEntrust(be,fe[he.accountId])}},k.createElement("img",{className:"boderRadAll_50 selectedUser",src:he.avatar}),k.createElement("span",{className:"mLeft10 Gray ellipsis"},he.fullname),!!fe[he.accountId]&&k.createElement(f.Z,{className:"Font20 mLeft10",icon:"lift"})):k.createElement("div",{className:"flex"}),k.createElement(f.Z,{className:"Gray_9e Font22",icon:he.accountId?"task-folder-charge":"task-add-member-circle",onClick:function(){return ae.setState({selectUserVisible:!0})}}));if(Y==="addApprove")return k.createElement(k.Fragment,null,k.createElement("div",{className:"itemWrap flexRow valignWrapper"},k.createElement("div",{className:"Gray Font13 bold flex"},he.length?_l("\u6DFB\u52A0%0\u4F4D\u5BA1\u6279\u4EBA",he.length):ve.headerText),k.createElement(f.Z,{className:"Gray_9e Font22",icon:"task-add-member-circle",onClick:function(){return ae.setState({selectUserVisible:!0})}})),he.map(function(me){return k.createElement("div",{className:"itemWrap flexRow valignWrapper"},k.createElement("div",{className:"flex flexRow valignWrapper mRight10",onClick:function(xe){return ae.handleOpenEntrust(xe,fe[me.accountId])}},k.createElement("img",{className:"boderRadAll_50 selectedUser",src:me.avatar}),k.createElement("span",{className:"mLeft10 Gray ellipsis"},me.fullname),!!fe[me.accountId]&&k.createElement(f.Z,{className:"Font20 mLeft10",icon:"lift"})),k.createElement(f.Z,{className:"Gray_9e Font20",icon:"close",onClick:function(){ae.setState({selectedUser:he.filter(function(xe){return xe.accountId!==me.accountId})})}}))}))}},{key:"renderSelectUser",value:function(){var ae=this,ne=this.props,de=ne.projectId,Ce=ne.action,he=ne.instance,fe=this.state,Ee=fe.selectUserVisible,Y=fe.selectedUser;if(Ee){var oe={transferApprove:6,addApprove:16,after:7,before:7,transfer:10},ve=he.operationUserRange,ue=ve?ve[oe[Ce]]:"";return k.createElement(i.Z,{projectId:de,visible:Ee,selectedUsers:P().isArray(Y)?Y:[Y],selectRangeOptions:ue?{appointedAccountIds:ue}:"",type:"user",onlyOne:Ce!=="addApprove",onClose:function(){ae.setState({selectUserVisible:!1})},onSave:function(Se){var ye=Ce==="addApprove"?Se:Se[0];ae.setState({selectedUser:ye}),ae.checkEntrust(Se)}})}}},{key:"renderSignature",value:function(){var ae=this;return k.createElement(k.Fragment,null,k.createElement("div",{className:"title flexRow valignWrapper relative"},k.createElement("div",{className:"Absolute bold",style:{margin:"1px 0px 0px -8px",color:"#f44336"}},"*"),k.createElement("div",{className:"Font13 bold flex Gray"},_l("\u7B7E\u540D"))),k.createElement(O(),{className:"am-textarea-item"},k.createElement(d.Z,{ref:function(de){ae.signature=de}})))}},{key:"renderAttachment",value:function(){var ae=this,ne=this.state.files;return ne.length?k.createElement("div",{className:"flexRow pLeft15 pRight15"},k.createElement(m.Z,{width:"32%",isRemove:!0,attachments:ne,onChange:function(Ce){ae.setState({files:Ce})}})):null}},{key:"renderVerifyPassword",value:function(){var ae=this,ne=this.props,de=ne.action,Ce=ne.instance,he=(Ce||{}).flowNode||{},fe=he.encrypt,Ee=this.state,Y=Ee.showPassword,oe=Ee.removeNoneVerification;if(P().includes(["pass","overrule","return"],de)&&fe&&Y)return k.createElement(O(),{className:"am-textarea-item pTop20 pBottom0"},k.createElement("div",{className:"flex verifyPasswordInputWrap"},k.createElement(o.Z,{showSubTitle:!1,isRequired:!0,allowNoVerify:!oe,onChange:function(ue){var pe=ue.password,Se=ue.isNoneVerification;pe!==void 0&&(ae.password=pe),Se!==void 0&&(ae.isNoneVerification=Se)}})))}},{key:"renderContent",value:function(){var ae=this,ne=this.props,de=ne.action,Ce=ne.instance,he=ne.projectId,fe=this.state,Ee=fe.content,Y=fe.backFlowNode,oe=fe.customApproveContent,ve=fe.files,ue=ie.tx[de]||{},pe=Ce||{},Se=pe.opinionTemplate,ye=pe.flowNode,J=pe.app,me=J===void 0?{}:J,be=Se.inputType,xe=ye||{},Ae=xe.auth,Ne=xe.isCallBack,Me=de==="pass"&&P().includes(Ae.passTypeList,100),Fe=P().includes(["overrule","return"],de)&&P().includes(Ae.overruleTypeList,100),Be=P().includes(["pass","after"],de)&&P().includes(Ae.passTypeList,1),we=P().includes(["overrule","return"],de)&&P().includes(Ae.overruleTypeList,1),Ie=de==="pass"&&P().includes(Ae.passTypeList,101)||de==="overrule"&&P().includes(Ae.overruleTypeList,101),ge=Be||we,Re=P().includes(["pass","overrule","return","after","before"],de),Pe=[];P().includes(["after","pass"],de)&&(Pe=Se.opinions[4]),P().includes(["overrule","return"],de)&&(Pe=Se.opinions[5]);var ke=P().includes(["pass","after","overrule","return"],de)&&be===2||!oe&&!P().isEmpty(Pe);return k.createElement(k.Fragment,null,k.createElement("div",{className:"flex"},this.renderVerifyPassword(),!Ie&&k.createElement(k.Fragment,null,k.createElement("div",{className:"flex flexColumn"},k.createElement("div",{className:"title flexRow valignWrapper relative"},(Me||Fe)&&k.createElement("div",{className:"Absolute bold",style:{margin:"1px 0px 0px -8px",color:"#f44336"}},"*"),k.createElement("div",{className:"Font13 bold flex Gray"},_l("\u5BA1\u6279\u610F\u89C1")),!P().isEmpty(Pe)&&be===1&&oe&&k.createElement("div",{className:"ThemeColor Font14",onClick:function(){return ae.handleOpenTemplate({inputType:be,opinions:Pe})}},_l("\u4F7F\u7528\u6A21\u677F"))),k.createElement("div",{className:"flexRow",style:{margin:"10px 15px"}},ke?k.createElement("div",{className:"selectTemplate flexRow valignWrapper flex",onClick:function(){return ae.handleOpenTemplate({inputType:be,opinions:Pe})}},Ee?k.createElement("div",{className:"flex Font14 Gray"},Ee):k.createElement("div",{className:"flex Font14",style:{color:"#b3b3b3"}},ue.placeholder),k.createElement(f.Z,{icon:"arrow-right-border"})):k.createElement(r(),{className:"flex pAll0",placeholder:ue.placeholder,autoHeight:!0,value:Ee,onChange:function(Ve){ae.setState({content:Ve})},onFocus:function(){window.isAndroid&&ge&&ae.setState({edit:!0})},onBlur:function(){window.isAndroid&&ge&&ae.setState({edit:!1})},ref:function(Ve){ae.textarea=Ve}}),Re&&k.createElement(m.w,{className:"selectTemplate flexRow valignWrapper justifyContentCenter mLeft6",style:{top:ke?0:2,minHeight:ke?35:40,width:ke?35:40},projectId:he,appId:me.id,files:ve,onChange:function(Ve){ae.setState({files:Ve})}},k.createElement(f.Z,{icon:"attachment"})))),Re&&this.renderAttachment()),ge&&this.renderSignature(),this.renderInfo(),this.renderSelectUser()),k.createElement("div",{className:"flexRow actionBtnWrapper"},k.createElement("div",{className:"flex actionBtn",onClick:this.props.onHide},_l("\u53D6\u6D88")),k.createElement("div",{className:"flex actionBtn ok",onClick:function(){ae.handleAction()}},_l("\u786E\u5B9A"))))}},{key:"render",value:function(){var ae=this.state,ne=ae.backFlowNodesVisible,de=ae.edit,Ce=this.props,he=Ce.visible,fe=Ce.onHide;return k.createElement(R(),{popup:!0,visible:he,className:"otherActionModal",onClose:function(){de||fe()},animationType:"slide-up"},k.createElement("div",{className:"otherActionWrapper flexColumn leftAlign",style:{height:de?300:"auto"}},ne?this.renderBackFlowNodes():this.renderContent()))}}]),M}(k.Component),T=function(){var M=this;this.handleAction=function(){var se=M.props,ae=se.action,ne=se.instance,de=M.state,Ce=de.content,he=de.showPassword,fe=de.selectedUser,Ee=de.entrustList,Y=de.files,oe=de.backFlowNode,ve=oe===void 0?"":oe,ue=(ne||{}).flowNode||{},pe=ue.auth,Se=ue.encrypt,ye=ae==="pass"&&P().includes(pe.passTypeList,100),J=P().includes(["overrule","return"],ae)&&P().includes(pe.overruleTypeList,100),me=P().includes(["pass","after"],ae)&&P().includes(pe.passTypeList,1),be=P().includes(["overrule","return"],ae)&&P().includes(pe.overruleTypeList,1),xe=Y.length?p()(Y):"",Ae=(P().isArray(fe)?fe:[fe]).map(function(Me){return Ee[Me.accountId]?Ee[Me.accountId].trustee.accountId:Me.accountId}).join(",");if(P().includes(["transfer","transferApprove","after","before","addApprove"],ae)&&!Ae){alert(_l("\u5FC5\u987B\u9009\u62E9\u4E00\u4E2A\u4EBA\u5458"),2);return}if((ye||J)&&!Ce.trim()||(me||be)&&M.signature.checkContentIsEmpty()){alert(_l("\u8BF7\u586B\u5199\u5B8C\u6574\u5185\u5BB9"),2);return}var Ne=function(){M.signature?M.signature.saveSignature(function(Fe){M.props.onAction({action:ae,content:Ce,forwardAccountId:Ae,backFlowNode:ve,signature:Fe,files:xe})}):M.props.onAction({action:ae,content:Ce,forwardAccountId:Ae,backFlowNode:ve,signature:void 0,files:xe}),M.isNoneVerification&&M.setState({showPassword:!1})};if(P().includes(["pass","overrule","return"],ae)&&Se){if(!M.password||!M.password.trim()){alert(_l("\u8BF7\u8F93\u5165\u5BC6\u7801"),3);return}(0,le.Gv)({password:M.password,closeImageValidation:!0,isNoneVerification:M.isNoneVerification,checkNeedAuth:!he,success:Ne,fail:function(){M.setState({showPassword:!0})}})}else Ne()},this.checkEntrust=function(se){var ae=M.state.entrustList,ne=M.props.projectId;E.Z.getListByPrincipals({companyId:ne,principals:se.map(function(de){return de.accountId})}).then(function(de){M.setState({entrustList:(0,ce.default)({},ae,de)})})},this.handleOpenTemplate=function(se){var ae=M.props.instance,ne=ae||{},de=ne.opinionTemplate;Q((0,ce.default)({},se,{onSelect:function(he){return M.setState({content:he,customApproveContent:!!he})},onCustom:function(){M.setState({customApproveContent:!0},function(){M.textarea&&M.textarea.focus()})}}))},this.handleOpenEntrust=function(se,ae){se.stopPropagation(),!P().isEmpty(ae)&&j().showActionSheetWithOptions({options:[k.createElement("div",{className:"flexRow alignItemsCenter"},k.createElement("div",{className:"Gray_75 mRight10 Font13"},_l("\u5C06\u59D4\u6258\u7ED9")),k.createElement("img",{className:"mLeft10 boderRadAll_50 selectedUser",style:{width:30},src:ae.trustee.avatar}),k.createElement("div",{className:"mLeft10 Font15 ellipsis"},ae.trustee.fullName)),k.createElement("div",{className:"flexRow alignItemsCenter"},k.createElement("div",{className:"Gray_75 mRight10 Font13"},_l("\u59D4\u6258\u622A\u6B62")),k.createElement("div",{className:"mLeft10 Font15"},ae.endDate))],message:k.createElement("div",{className:"flexRow header"},k.createElement("span",{className:"Font13"},_l("%0\u53D1\u8D77\u4E86\u59D4\u6258",ae.principal.fullName)),k.createElement("div",{className:"closeIcon",onClick:function(){j().close()}},k.createElement(f.Z,{icon:"close"})))},function(ne){})}},l)},7531:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>z});var ce=t(33867),g=t(12424),p=t(46593),L=t.n(p),te=t(85105),R=t.n(te),y=t(99663),a=t(22600),r=t(49135),o=t(93196),d=t(67294),Z=t(93967),H=t.n(Z),U=t(45231),f=t(58064),V=t(96867),C=t(66140),O=t(86735),n=t(71893),s=t(3306),j=t(31620),A=(0,O.Z)([`
  padding: 0 17px 50px;
  background-color: #f8f8f8;
`],[`
  padding: 0 17px 50px;
  background-color: #f8f8f8;
`]),S=n.ZP.ul(A),I=function(X){(0,o.default)(B,X);function B(x){(0,y.default)(this,B);var Q=(0,r.default)(this,(B.__proto__||R()(B)).call(this,x));return Q.state={visible:!1},Q}return(0,a.default)(B,[{key:"render",value:function(){var Q=this,i=this.state.visible,m=this.props,v=m.instance,W=m.worksheetId,P=m.recordId,u=v.works,l=v.currentWork,T=v.currentWorkItem,G=v.processId,D=v.status,M=v.isApproval;return d.createElement(S,{className:"stepList"},d.createElement("div",{className:"pTop20 flexRow valignWrapper"},d.createElement("div",{className:"Font17 bold flex"},_l("\u6D41\u7A0B\u8FDB\u5EA6")),M&&d.createElement("div",{className:"flexRow alignItemsCenter Gray_9e",onClick:function(){return Q.setState({visible:!0})}},d.createElement(ce.Z,{className:"Font16 mRight5",icon:"department1"}),d.createElement("div",{className:"bold"},_l("\u6D41\u8F6C\u56FE")))),d.createElement(s.Z,{worksheetId:W,rowId:P,currentWork:l,currentType:(T||{}).type,works:u,status:D}),i&&d.createElement(j.jO,{processId:G,instanceId:l.instanceId,onClose:function(){return Q.setState({visible:!1})}}))}}]),B}(d.Component);const c=I;var q=t(88239),b=t(63627),k=t(81982),ee=t.n(k),re=t(72557),ie=t(22382),le=t(28661),E=t.n(le),w=t(74666),K=t(65369),N=t(78265),F=t(15577),h=function(X){(0,o.default)(B,X);function B(x){(0,y.default)(this,B);var Q=(0,r.default)(this,(B.__proto__||R()(B)).call(this,x));return Q.writeVerifyPassword=function(i){E().showActionSheetWithOptions({options:[],message:d.createElement("div",{className:"TxtLeft sheetProcessRowRecord"},d.createElement("div",{className:"Font17 Bold Gray mBottom10"},_l("\u63D0\u4EA4\u8BB0\u5F55")),d.createElement(re.Z,{autoFocus:!0,showSubTitle:!1,isRequired:!0,allowNoVerify:!i,onChange:function(v){var W=v.password,P=v.isNoneVerification;W!==void 0&&(Q.password=W),P!==void 0&&(Q.isNoneVerification=P)}}),d.createElement("div",{className:"flexRow btnsWrapper mTop20 pAll0 Border0 "},d.createElement(ee(),{className:"Font13 flex bold Gray_75 mRight10",onClick:function(){E().close()}},d.createElement("span",null,_l("\u53D6\u6D88"))),d.createElement(ee(),{className:"Font13 flex bold",type:"primary",onClick:function(){if(!Q.password||!Q.password.trim()){alert(_l("\u8BF7\u8F93\u5165\u5BC6\u7801"),3);return}(0,F.Gv)({password:Q.password,closeImageValidation:!0,isNoneVerification:Q.isNoneVerification,success:function(){Q.request("submit"),E().close()}})}},_l("\u4FDD\u5B58"))))},function(m){})},Q.safeAuthentication=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},m=Q.props.instance;(0,F.Gv)({projectId:m.companyId,checkNeedAuth:!0,success:i,fail:function(W){Q.writeVerifyPassword(W==="showPassword")}})},Q.handleClick=function(i){var m=Q.props,v=m.onSubmit,W=m.instance,P=(W||{}).flowNode||{},u=P.ignoreRequired,l=P.encrypt,T=P.auth;if(i==="submit"){l?Q.safeAuthentication(function(){return Q.request("submit")}):Q.request("submit");return}if(i==="revoke"){Q.request("revoke");return}if(i==="urge"){Q.request("operation",{operationType:18},!0);return}if(i==="stash"){Q.request("operation",{operationType:13});return}var G=function(){if(_.includes(["pass","overrule","return"],i)){var M=T[i==="pass"?"passTypeList":"overruleTypeList"];M.length===1&&M[0]===101?l?Q.safeAuthentication(function(){return Q.handleAction({action:i})}):Q.handleAction({action:i}):Q.setState({action:i,otherActionVisible:!0})}else Q.setState({action:i,otherActionVisible:!0})};u||_.includes(["transferApprove","transfer"],i)?G():v({noSave:!0,callback:function(M){M||G()}})},Q.request=function(i){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,W=Q.props,P=W.instanceId,u=W.workId,l=W.onSave,T=l===void 0?_.noop:l,G=W.onClose,D=G===void 0?_.noop:G,M=W.onSubmit,se=Q.state.isRequest,ae=m.operationType===13,ne=function(Ce){var he=Ce.error,fe=Ce.logId;he&&he!=="empty"?Q.setState({isRequest:!1}):N.Z[i==="return"?"overrule":i]((0,q.default)({id:P,workId:m.operationType===18?"":u,logId:fe},m)).then(function(){_.includes([13,18],m.operationType)?ae?(alert(_l("\u4FDD\u5B58\u6210\u529F")),Q.setState({isRequest:!1})):Q.setState({isRequest:!1,isUrged:!0}):(T(),D({id:P,workId:u}))})};se||(Q.setState({isRequest:!0,submitAction:i}),v?ne({}):M({callback:ne,ignoreError:ae,ignoreAlert:ae,silent:ae}))},Q.handleAction=function(i){var m=i.action,v=i.content,W=v===void 0?"":v,P=i.forwardAccountId,u=i.backNodeId,l=i.signature,T=i.files,G=Q.props.instance,D=(G||{}).flowNode||{},M=D.ignoreRequired;W=W.trim(),_.includes(["before","after"],m)&&Q.request(K.SJ[m],{before:m==="before",opinion:W,forwardAccountId:P,signature:l,files:T},m==="before"),_.includes(["transferApprove","transfer"],m)&&Q.request(K.SJ[m],{opinion:W,forwardAccountId:P},!0),_.includes(["pass","overrule","return"],m)&&(m==="return"&&!u&&(u=_.get(G,"backFlowNodes[0].id")||""),Q.request(K.SJ[m],{opinion:W,backNodeId:u,signature:l,files:T},_.includes(["overrule","return"],m)&&M)),_.includes(["addApprove"],m)&&Q.request("operation",{opinion:W,forwardAccountId:P,operationType:16},!0),Q.setState({otherActionVisible:!1})},Q.handleOperation=function(i){var m=Q.props.instance,v=function(P){Q.setState({action:P,otherActionVisible:!0})};if(i==="sign"){m.signOperationType===1?v("before"):m.signOperationType===2?v("after"):E().showActionSheetWithOptions({options:[d.createElement("div",{className:"Gray bold"},_l("\u901A\u8FC7\u7533\u8BF7\u540E\u589E\u52A0\u4E00\u4F4D\u5BA1\u6279\u4EBA")),d.createElement("div",{className:"Gray bold"},_l("\u5728\u6211\u5BA1\u6279\u524D\u589E\u52A0\u4E00\u4F4D\u5BA1\u6279\u4EBA"))],message:d.createElement("div",{className:"flexRow header"},d.createElement("span",{className:"Font13"},_l("\u52A0\u7B7E")),d.createElement("div",{className:"closeIcon",onClick:function(){return E().close()}},d.createElement(ce.Z,{icon:"close"})))},function(W){W===0&&v("after"),W===1&&v("before")});return}v(i)},Q.handleSelectOperation=function(i){var m=Q.props.instance,v=m.btnMap,W=v===void 0?{}:v;E().showActionSheetWithOptions({options:i.map(function(P){return d.createElement(d.Fragment,null,d.createElement(ce.Z,{className:"mRight10 Gray_9e Font22",icon:P.icon}),d.createElement("span",{className:"Bold ellipsis"},W[P.type]||P.text))}),message:d.createElement("div",{className:"flexRow header"},d.createElement("span",{className:"Font13"},_l("\u5BA1\u6279")),d.createElement("div",{className:"closeIcon",onClick:function(){E().close()}},d.createElement(ce.Z,{icon:"close"})))},function(P){P!==-1&&Q.handleOperation(i[P].id)})},Q.state={isRequest:!1,isUrged:!1,action:"",otherActionVisible:!1},Q}return(0,a.default)(B,[{key:"renderFlowIcon",value:function(){var Q=this;return d.createElement("div",{className:"flexColumn optionBtn bold",onClick:function(){Q.props.handleClickFlow(),setTimeout(function(){document.querySelector(".mobileSheetRowRecord .recordScroll").scrollTop=document.querySelector(".stepList").offsetTop-50},500)}},d.createElement("div",null,d.createElement(ce.Z,{icon:"flow",className:"Font20"})),d.createElement("div",{className:"Font12"},_l("\u6D41\u7A0B")))}},{key:"render",value:function(){var Q=this,i=this.state,m=i.isRequest,v=i.isUrged,W=i.submitAction,P=i.otherActionVisible,u=this.props.instance,l=u.btnMap,T=l===void 0?{}:l,G=u.works,D=this.getHandleBtnConfig,M=D.actionList,se=D.buttons;return!M.length&&!se.length?null:d.createElement("div",{className:"processRecordFooterHandle flexRow"},this.renderFlowIcon(),d.createElement("div",{className:"flexRow flex"},M.map(function(ae,ne){var de=K.lZ[ae],Ce=de.id,he=de.text,fe=m&&W===Ce||v&&Ce==="urge";return d.createElement("div",{key:Ce,className:H()("headerBtn pointer flex bold",Ce,{disable:fe}),onClick:function(Y){fe||Q.handleClick(Ce)}},m&&W===Ce?_l("\u63D0\u4EA4\u4E2D..."):d.createElement(d.Fragment,null,d.createElement("span",{className:"ellipsis"},Ce==="urge"&&v?_l("\u5DF2\u50AC\u529E"):T[ae]||he)))})),!!se.length&&(se.length>1?d.createElement("div",{className:"flexColumn optionBtn optionArrowBtn bold",onClick:function(){Q.handleSelectOperation(se)}},d.createElement(ce.Z,{icon:"arrow-up-border"})):se.map(function(ae,ne){return d.createElement("div",{key:ne,className:"flexColumn optionBtn bold",style:{maxWidth:100},onClick:function(){Q.handleOperation(ae.id)}},d.createElement("div",null,d.createElement(ce.Z,{icon:ae.icon,className:"Font20"})),d.createElement("div",{className:"Font12 ellipsis"},T[ae.type]||ae.text))})),P&&d.createElement(w.Z,{visible:P,action:this.state.action,projectId:u.companyId,instance:u,onAction:this.handleAction,onHide:function(){return Q.setState({otherActionVisible:!1})}}))}},{key:"getHandleBtnConfig",get:function(){var Q=this.props.instance,i=Q.operationTypeList,m=Q.btnMap,v=m===void 0?{}:m,W=[3,4,5,9,17,18],P=i[0].filter(function(T){return W.includes(T)}),u=i[1].concat(i[0].filter(function(T){return!W.includes(T)})).filter(function(T){return![12,13].includes(T)}),l=u.map(function(T){return(0,q.default)({},K.RC[T],{type:T})});return{actionList:P,buttons:l}}}]),B}(d.Component),z=function(X){(0,o.default)(B,X);function B(x){(0,y.default)(this,B);var Q=(0,r.default)(this,(B.__proto__||R()(B)).call(this,x));return Q.processFooter=d.createRef(),Q.handleStash=function(){Q.processFooter.current.handleClick("stash")},Q.state={loading:!0,error:!1,errorMsg:"",workItem:{},instance:{}},Q}return(0,a.default)(B,[{key:"componentDidMount",value:function(){this.getWorkItem()}},{key:"getWorkItem",value:function(){var Q=this,i=this.props,m=i.instanceId,v=i.workId;L().all([U.Z.getWorkItem({instanceId:m,workId:v}),f.Z.get({id:m,workId:v})]).then(function(W){var P=(0,g.Z)(W,2),u=P[0],l=P[1];Q.setState({loading:!1,workItem:u,instance:l})}).catch(function(W){Q.setState({loading:!1,error:!0,errorMsg:_.get(W,"errorMessage")||_l("\u6D41\u7A0B\u5DF2\u5173\u95ED\u6216\u5220\u9664")})})}},{key:"renderHeader",value:function(){var Q=this.state.instance,i=Q.flowNode,m=i.name,v=i.type,W=i.appType,P=_.includes(Q.operationTypeList[0],13),u=K.aI[v];return d.createElement("div",{className:"flexRow flex alignItemsCenter",style:{justifyContent:"space-between"}},d.createElement("div",{className:H()("sheetName ellipsis Font13",u.id,typeof u.icon=="string"?"":u.icon[W])},d.createElement(ce.Z,{icon:typeof u.icon=="string"?u.icon:u.icon[W],className:"Font18"}),d.createElement("span",null,m)),P&&d.createElement(ce.Z,{className:"Font22 mRight10 Gray_9e",icon:"save1",onClick:this.handleStash}))}},{key:"renderWorkflow",value:function(){var Q=this.state,i=Q.workItem,m=Q.instance;return d.createElement(c,{instance:m,worksheetId:i.worksheetId,recordId:i.rowId})}},{key:"render",value:function(){var Q=this.props,i=Q.workId,m=Q.instanceId,v=Q.onClose,W=this.state,P=W.loading,u=W.workItem,l=W.instance,T=W.error,G=W.errorMsg;return P?d.createElement(C.g,null):T?d.createElement(C.h,{errorMsg:G,onClose:v}):d.createElement(V.Z,{isModal:!0,from:_.get(l,"flowNode.type")===5?6:4,appId:l.app.id,worksheetId:u.worksheetId,viewId:u.viewId,recordId:u.rowId,workId:i,instanceId:m,onClose:v,header:this.renderHeader(),footer:d.createElement(h,{ref:this.processFooter,workId:i,instanceId:m,workItem:u,instance:l,onClose:v}),workflow:this.renderWorkflow()})}}]),B}(d.Component)},46100:(lt,Te,t)=>{"use strict";t.r(Te),t.d(Te,{default:()=>L});var ce=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(7531);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(44950);const L=function(te){var R=te.isModal,y=te.match,a=te.className,r=te.visible,o=te.onClose;if(R){var d=te.instanceId,Z=te.workId;return ce.createElement(p.n,{popup:!0,animationType:"slide-up",className:a,onClose:o,visible:r},d&&ce.createElement(g.Z,{isModal:!0,instanceId:d,workId:Z,onClose:o}))}else{var H=y.params,U=H.instanceId,f=H.workId;return ce.createElement(g.Z,{isModal:!1,instanceId:U,workId:f,onClose:function(){window.mobileNavigateTo("/mobile/processMatters")}})}}},68705:(lt,Te,t)=>{"use strict";t.r(Te),t.d(Te,{default:()=>ee,openAddRecord:()=>re});var ce=t(88239),g=t(42185),p=t(66814),L=t.n(p),te=t(91880),R=t.n(te),y=t(48388),a=t.n(y),r=t(29914),o=t.n(r),d=t(85105),Z=t.n(d),H=t(99663),U=t(22600),f=t(49135),V=t(93196),C=t(86735),O=t(67294),n=t(69945);if(!/^(1887|7596|7798)$/.test(t.j))var s=t(1952);var j=t(91088),A=t(45231),S=t(71893),I=t(89380),c=t.n(I),q=(0,C.Z)([`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  img {
    width: 120px;
  }
  .status {
    font-size: 17px;
    color: #757575;
    margin: 24px 0 32px;
  }
`],[`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  img {
    width: 120px;
  }
  .status {
    font-size: 17px;
    color: #757575;
    margin: 24px 0 32px;
  }
`]),b={NORMAL:1,SUCCESS:2,ERROR:3},k=S.ZP.div(q),ee=function(ie){(0,V.default)(le,ie);function le(E){(0,H.default)(this,le);var w=(0,f.default)(this,(le.__proto__||Z()(le)).call(this,E));return w.state={loading:!0,worksheetInfo:void 0,status:b.NORMAL},w}return(0,U.default)(le,[{key:"componentDidMount",value:function(){var w=this,K=this.props.match||{},N=K.params,F=N===void 0?{}:N,h=this.props,z=h.appId,X=h.worksheetId;A.Z.getWorksheetInfo({appId:F.appId||z,worksheetId:F.worksheetId||X,getTemplate:!0,getViews:!0}).then(function(B){w.setState({loading:!1,worksheetInfo:B})})}},{key:"render",value:function(){var w=this,K=this.props.match||{},N=K.params,F=N===void 0?{}:N,h=this.props,z=h.appId,X=h.worksheetId,B=h.viewId,x=h.defaultFormData,Q=x===void 0?{}:x,i=h.defaultFormDataEditable,m=this.state,v=m.loading,W=m.worksheetInfo,P=m.status;return O.createElement("div",{className:"h100",style:{backgroundColor:"#fff"}},v?O.createElement(R(),{justify:"center",align:"center",className:"h100"},O.createElement(o(),{size:"large"})):O.createElement("div",{className:"h100 pTop20"},P!==b.NORMAL&&O.createElement(O.Fragment,null,P===b.ERROR&&_l("\u60A8\u6CA1\u6709\u65B0\u5EFA\u8BB0\u5F55\u6743\u9650\uFF0C\u8BF7\u8054\u7CFB\u8BE5\u5E94\u7528\u7BA1\u7406\u5458"),P===b.SUCCESS&&O.createElement(k,{className:"h100"},O.createElement("img",{src:c(),alt:""}),O.createElement("span",{className:"status"},_l("\u521B\u5EFA\u6210\u529F")),O.createElement("div",null,O.createElement(g.ZP,{onClick:function(){return w.setState({status:b.NORMAL})}},_l("\u7EE7\u7EED\u521B\u5EFA")),O.createElement(g.ZP,{type:"ghost",className:"mLeft10",onClick:function(){j.Z.getAppSimpleInfo({workSheetId:F.worksheetId}).then(function(l){var T=l.appId,G=l.appSectionId;window.mobileNavigateTo("/mobile/recordList/"+T+"/"+G+"/"+F.worksheetId+"/"+F.viewId)})}},_l("\u67E5\u770B\u6211\u7684\u6570\u636E"))))),P===b.NORMAL&&O.createElement(n.Z,{appId:F.appId||z,worksheetId:F.worksheetId||X,viewId:F.viewId||B,worksheetInfo:W,addType:2,notDialog:!0,changeWorksheetStatusCode:function(){return w.setState({status:b.ERROR})},onAdd:function(l,T){var G=T.continueAdd;G||w.setState({status:b.SUCCESS})},defaultFormData:Q,defaultFormDataEditable:i})))}}]),le}(O.Component),re=function(le){return(0,s.Z)(n.Z,(0,ce.default)({},le,{closeFnName:"hideNewRecord"}))}},70039:(lt,Te,t)=>{"use strict";t.r(Te),t.d(Te,{RecordInfoModal:()=>j,default:()=>s,openMobileRecordInfo:()=>A});var ce=t(88239),g=t(20148),p=t.n(g),L=t(60385),te=t.n(L),R=t(86735),y=t(67294),a=t(28968),r=t(96867),o=t(71893),d=t(93967),Z=t.n(d),H=t(50533),U=t(22013);if(!/^(1887|7596|7798)$/.test(t.j))var f=t(1952);var V=t(15742),C=(0,R.Z)([`
  height: 95%;
  overflow: hidden;
  border-top-right-radius: 15px;
  border-top-left-radius: 15px;
  .am-modal-body {
    text-align: left;
  }
  &.full {
    height: 100%;
    border-top-right-radius: 0;
    border-top-left-radius: 0;
  }
`],[`
  height: 95%;
  overflow: hidden;
  border-top-right-radius: 15px;
  border-top-left-radius: 15px;
  .am-modal-body {
    text-align: left;
  }
  &.full {
    height: 100%;
    border-top-right-radius: 0;
    border-top-left-radius: 0;
  }
`]),O=(0,o.ZP)(te())(C),n=function(I){var c=I.match.params,q=c.appId,b=c.worksheetId,k=c.viewId,ee=c.rowId;return y.createElement(r.Z,{appId:q,worksheetId:b,viewId:k,recordId:ee,from:V.GP.WORKSHEET_ROW_LAND})};const s=(0,a.Z)(n);var j=(0,y.forwardRef)(function(S,I){var c=S.rowId,q=S.appId,b=S.worksheetId,k=S.viewId,ee=S.sheetSwitchPermit,re=S.getDataType,ie=S.from,le=S.getDraftData,E=le===void 0?function(){}:le,w=S.notModal,K=w===void 0?!1:w,N=S.editable,F=S.hideOtherOperate,h=S.allowEmptySubmit,z=S.updateSuccess,X=S.className,B=S.visible,x=S.onClose,Q=(0,y.useMemo)(U.x,[]);if(!B)return null;var i=y.createElement(H.zt,{store:Q},y.createElement(r.Z,(0,ce.default)({},S,{isModal:!0,from:ie,appId:q,worksheetId:b,viewId:k,recordId:c,onClose:x,getDataType:re,getDraftData:E,editable:N,hideOtherOperate:F,allowEmptySubmit:h,updateSuccess:z})));return K?i:y.createElement(O,{popup:!0,transitionName:"noTransition",className:Z()("RecordInfoModal",X),onClose:x,visible:B},c&&i)}),A=function(I){return(0,f.Z)(j,(0,ce.default)({},I))}},34498:(lt,Te,t)=>{"use strict";t.d(Te,{P4:()=>on,We:()=>kt,ZP:()=>_e,pT:()=>jt,hk:()=>Rt,Gu:()=>De});var ce=t(88239),g=t(67294),p=t(86674),L=t(44253),te=t(3540),R=t(86735),y=t(93967),a=t.n(y),r=t(71893),o=t(45697),d=t(15577),Z=(0,R.Z)([`
  width: 100%;
  border: none !important;
  background-color: #F5F5F5;
`],[`
  width: 100%;
  border: none !important;
  background-color: #F5F5F5;
`]),H=(0,r.ZP)(te.Z)(Z);function U(Le){var rt=Le.value,Ct=Le.minValue,dt=Ct===void 0?"":Ct,It=Le.maxValue,bt=It===void 0?"":It,Ut=Le.filterType,Xt=Le.onChange,pn=Xt===void 0?function(){}:Xt,tt=Le.control;return g.createElement("div",{className:"controlWrapper"},g.createElement("div",{className:"Font14 bold mBottom15"},tt.controlName),g.createElement("div",null,Ut===L.W5.BETWEEN?g.createElement("div",{className:"flexRow"},g.createElement("div",{className:"flex"},g.createElement(H,{className:"centerAlign",placeholder:_l("\u6700\u5C0F\u503C"),value:dt,valueFilter:d.pu,onChange:function(Dt){pn({minValue:Dt.trim(),filterType:L.W5.BETWEEN})}})),g.createElement("div",{className:"flexRow valignWrapper mLeft7 mRight7"},"-"),g.createElement("div",{className:"flex"},g.createElement(H,{className:"centerAlign",placeholder:_l("\u6700\u5927\u503C"),value:bt,valueFilter:d.pu,onChange:function(Dt){pn({maxValue:Dt.trim(),filterType:L.W5.BETWEEN})}}))):g.createElement(H,{placeholder:_l("\u8BF7\u8F93\u5165"),value:rt,valueFilter:d.pu,onChange:function(Dt){pn({value:Dt.trim(),filterType:L.W5.EQ})}})))}U.propTypes={filterType:o.number,minValue:o.string,maxValue:o.string,value:o.string,onChange:o.func};var f=t(88106),V=t(85315),C=t(63239),O=t.n(C),n=t(12424),s=t(94942),j=t.n(s),A=t(36803),S=t(45231),I=t(24607),c=t(26358),q=t(33867),b=t(96486),k=t.n(b),ee=(0,R.Z)([`
  padding: 8px 0;
  .icon-done {
    color: #2196f3;
  }
`],[`
  padding: 8px 0;
  .icon-done {
    color: #2196f3;
  }
`]),re=r.ZP.div(ee);function ie(Le){var rt=Le.selected,Ct=Le.control,dt=Le.multiple,It=Le.onChange,bt=Ct.options;return g.createElement("div",{className:"pLeft15 pRight15"},bt.filter(function(Ut){return!Ut.isDeleted}).map(function(Ut,Xt){return g.createElement(re,{className:"flexRow valignWrapper",key:Xt},g.createElement("div",{key:Xt,className:"flex ellipsis Font13",onClick:function(){k().includes(rt,Ut.key)?It(rt.filter(function(tt){return tt!==Ut.key})):It(dt?k().uniqBy(rt.concat(Ut.key)):[Ut.key])}},Ut.value),k().includes(rt,Ut.key)&&g.createElement(q.Z,{className:"Font20",icon:"done"}))}))}ie.propTypes={multiple:o.bool,control:(0,o.shape)({}),selected:(0,o.arrayOf)(o.string),onChange:o.func};var le=(0,R.Z)([`
  width: 100%;
  height: 100%;
  padding: 10px 0;
  overflow: hidden;
  position: absolute;
  top: 0;
  left: 0;
  background: #fff;
  z-index: 1;
  // transform: `,`;
  .rightSidebar-content {
    overflow-y: auto;
    z-index: 1;
    background: #fff;
    padding-bottom: 30px;
  }
`],[`
  width: 100%;
  height: 100%;
  padding: 10px 0;
  overflow: hidden;
  position: absolute;
  top: 0;
  left: 0;
  background: #fff;
  z-index: 1;
  // transform: `,`;
  .rightSidebar-content {
    overflow-y: auto;
    z-index: 1;
    background: #fff;
    padding-bottom: 30px;
  }
`]),E=r.ZP.div(le,function(Le){return"translateX("+-Le.width+"px)"});function w(Le){var rt=Le.onHideSidebar,Ct=Le.children,dt=document.documentElement.clientWidth-60;return g.createElement(E,{className:"flexColumn",width:dt},g.createElement("div",{className:"pLeft15 pRight15 flexRow valignWrapper mBottom10"},g.createElement(q.Z,{className:"Gray_9e Font22",icon:"backspace",onClick:rt}),g.createElement("div",{className:"flex Gray_9e Font13 mLeft20 ellipsis"},Le.name),g.createElement(q.Z,{className:"Gray_9e close",icon:"close",onClick:rt})),g.createElement("div",{className:"rightSidebar-content flex"},Ct))}var K=(0,R.Z)([`
  cursor: pointer;
  font-size: 12px;
  display: inline-block;
  margin: 0 12px 12px 0;
  color: #757575;
  padding: 4px 12px;
  border-radius: 28px;
  max-width: 200px;
  user-select: none;
  background-color: #F5F5F5;
  &.checked {
    color: #fff;
    border-color: #2196f3;
    background-color: #2196f3;
  }
  &.more {
    padding: 3px 12px;
    border: 1px solid #EAEAEA;
    background-color: #fff;
  }
  .ming.Checkbox {
    padding: 1px 0;
  }
`],[`
  cursor: pointer;
  font-size: 12px;
  display: inline-block;
  margin: 0 12px 12px 0;
  color: #757575;
  padding: 4px 12px;
  border-radius: 28px;
  max-width: 200px;
  user-select: none;
  background-color: #F5F5F5;
  &.checked {
    color: #fff;
    border-color: #2196f3;
    background-color: #2196f3;
  }
  &.more {
    padding: 3px 12px;
    border: 1px solid #EAEAEA;
    background-color: #fff;
  }
  .ming.Checkbox {
    padding: 1px 0;
  }
`]),N=r.ZP.div(K);function F(Le,rt){try{var Ct=JSON.parse(rt);return Le.filter(function(dt){return k().includes(Ct,dt.key)})}catch(dt){return Le}}function h(Le){var rt=Le.values,Ct=rt===void 0?[]:rt,dt=Le.control,It=Le.advancedSetting,bt=It===void 0?{}:It,Ut=Le.onChange,Xt=Ut===void 0?function(){}:Ut,pn=bt.allowitem,tt=bt.direction,ht=bt.navshow,Dt=bt.navfilters,Ot=bt.shownullitem,Ht=bt.nullitemname,Kt=dt.options,dn=String(pn)==="2",Cn=(0,g.useState)(!1),Rn=(0,n.Z)(Cn,2),gn=Rn[0],wn=Rn[1];String(ht)==="2"&&(Kt=F(Kt,Dt)),Ot==="1"&&(Kt=[{key:"isEmpty",color:"transparent",value:Ht||_l("\u4E3A\u7A7A")}].concat(Kt));var On=Kt.filter(function(Fn){return!Fn.isDeleted}).slice(0,10),An=Kt.length>On.length,Yn=function(){wn(!gn)};function kn(Fn){Xt((0,ce.default)({},Fn))}return g.createElement("div",{className:"controlWrapper"},g.createElement("div",{className:"flexRow valignWrapper mBottom15"},g.createElement("div",{className:"Font14 bold flex ellipsis"},dt.controlName),!k().isEmpty(Ct)&&g.createElement("div",{className:"selected ellipsis"},dn?_l("\u9009\u62E9%0\u9879",Ct.length):k().find(Kt,{key:Ct[0]}).value)),g.createElement("div",null,On.map(function(Fn,$n){return g.createElement(N,{key:$n,className:a()({checked:k().includes(Ct,Fn.key)}),onClick:function(){Fn.key==="isEmpty"?kn({values:Ct.length===1&&Ct[0]==="isEmpty"?[]:["isEmpty"]}):k().includes(Ct,Fn.key)?kn({values:Ct.filter(function(ua){return ua!==Fn.key})}):kn({values:dn?k().uniqBy(Ct.concat(Fn.key)):[Fn.key]})}},Fn.value)}),An&&g.createElement(N,{className:"more",onClick:Yn},_l("\u66F4\u591A..."))),gn&&g.createElement(w,{name:dt.controlName,onHideSidebar:Yn},g.createElement(ie,{multiple:dn,selected:Ct,control:dt,onChange:function($n){kn({values:$n})}})))}h.propTypes={values:(0,o.arrayOf)(o.string),control:(0,o.shape)({}),advancedSetting:(0,o.shape)({}),onChange:o.func};var z=function(rt){var Ct=(0,g.useRef)(null);return k().isEqual(rt,Ct.current)||(Ct.current=rt),Ct.current},X=20;function B(Le){var rt=function(){var Fn=(0,A.Z)(j().mark(function $n(){var ba,ua,La;return j().wrap(function(Ua){for(;;)switch(Ua.prev=Ua.next){case 0:if(k().isEmpty(Dt)){Ua.next=2;break}return Ua.abrupt("return");case 2:return ba=void 0,dt&&dt.advancedSetting.filters&&(ba=(0,c.zK)({control:dt,formData:Ot})),An(!0),ua={worksheetId:dt.dataSource,viewId:dt.viewId,searchType:1,pageSize:20,pageIndex:1,status:1,isGetWorksheet:!0,getType:7},Ht==="3"&&(ua.filterControls=ba||[]),Ua.next=9,S.Z.getFilterRows(ua);case 9:La=Ua.sent,An(!1),Rn(La.data);case 12:case"end":return Ua.stop()}},$n,this)}));return function(){return Fn.apply(this,arguments)}}(),Ct=Le.selected,dt=Le.control,It=Le.multiple,bt=Le.onChange,Ut=Le.onSetMoreVisible,Xt=Le.advancedSetting,pn=Le.prefixRecords,tt=pn===void 0?[]:pn,ht=Le.staticRecords,Dt=ht===void 0?[]:ht,Ot=Le.formData,Ht=Xt.navshow,Kt=(0,g.useState)(Dt),dn=(0,n.Z)(Kt,2),Cn=dn[0],Rn=dn[1],gn=(0,g.useState)(!0),wn=(0,n.Z)(gn,2),On=wn[0],An=wn[1],Yn=Cn.slice(0,10),kn=Cn.length>Yn.length;return(0,g.useEffect)(function(){rt()},[z(Ot)]),g.createElement("div",null,tt.concat(Yn).slice(0,X).map(function(Fn,$n){var ba=Fn.rowid==="isEmpty"||Ht==="2"?Fn.name:(0,I.xI)(dt.relationControls,Fn);return g.createElement(N,{key:$n,className:a()("ellipsis",{checked:k().find(Ct,{rowid:Fn.rowid})}),onClick:function(){k().find(Ct,{rowid:Fn.rowid})?bt(Ct.filter(function(La){return La.rowid!==Fn.rowid})):bt(It?k().uniqBy(Ct.concat(Fn)):[Fn])}},ba)}),kn&&g.createElement(N,{className:"more",onClick:Ut},_l("\u66F4\u591A...")))}B.propTypes={multiple:o.bool,control:(0,o.shape)({}),selected:(0,o.arrayOf)((0,o.shape)({})),onChange:o.func,onSetMoreVisible:o.func};var x=t(99732);function Q(Le){var rt=this,Ct=Le.values,dt=Ct===void 0?[]:Ct,It=Le.advancedSetting,bt=Le.onChange,Ut=bt===void 0?function(){}:bt,Xt=Le.appId,pn=Le.worksheetId,tt=Le.filtersData,ht=k().get(Le,"control.advancedSetting")||{},Dt=k().assign({},Le.control,{advancedSetting:{searchcontrol:ht.searchcontrol}}),Ot=Dt.enumDefault,Ht=Dt.relationControls,Kt=Ht===void 0?[]:Ht,dn=Dt.controlId,Cn=Dt.coverCid,Rn=Dt.showControls,gn=Dt.dataSource,wn=Dt.formData,On=Dt.viewId,An=It.showtype,Yn=It.allowlink,kn=It.ddset,Fn=It.allowitem,$n=It.direction,ba=It.nullitemname,ua=It.shownullitem,La=It.navshow,ga=It.navfilters,Ua=String(Fn)==="2",yr=(0,g.useState)(!1),sr=(0,n.Z)(yr,2),Ba=sr[0],cr=sr[1],hr=void 0;La==="3"&&(Dt.advancedSetting.filters=ga),La==="2"&&(hr=JSON.parse(ga).map(safeParse).map(function(ha){return(0,ce.default)({rowid:ha.id},ha)}));var Qa=ua==="1"?[{rowid:"isEmpty",name:ba||_l("\u4E3A\u7A7A")}]:[],da=function(){cr(!Ba)};function Jn(ha){Ut((0,ce.default)({},ha))}var ra=function(){try{var Ia,wa=rt.props.control,Ka=wa.formData,tr=wa.controlId,Tr=wa.recordId,xr=wa.worksheetId,_a=k().find(Ka,function(ea){return ea.attribute===1}),gr={name:_a.value,sid:Tr,type:8,sourcevalue:O()((0,ce.default)({},k().assign.apply(k(),(0,V.Z)(Ka.map(function(ea){return(0,f.default)({},ea.controlId,ea.value)}))),(Ia={},(0,f.default)(Ia,_a.controlId,_a.value),(0,f.default)(Ia,"rowid",Tr),Ia)))};if(_a.type===29)try{var zr=JSON.parse(_a.value);gr.name=zr[0].name}catch(ea){gr.name=""}return{worksheetId:xr,relateSheetControlId:tr,value:gr}}catch(ea){return}};return g.createElement("div",{className:"controlWrapper"},g.createElement("div",{className:"flexRow valignWrapper mBottom15"},g.createElement("div",{className:"Font14 bold flex ellipsis"},Dt.controlName),!k().isEmpty(dt)&&g.createElement("div",{className:"selected ellipsis"},Ua?_l("\u9009\u62E9%0\u9879",dt.length):dt[0].rowid==="isEmpty"?dt[0].name:k().get(dt[0],"name")||(0,I.xI)(Dt.relationControls,dt[0]))),g.createElement(B,{multiple:Ua,selected:dt,formData:tt,control:Dt,advancedSetting:It,prefixRecords:Qa,staticRecords:hr,onSetMoreVisible:da,onChange:function(Ia){Jn({values:Ia})}}),Ba&&g.createElement(x.Z,{maxCount:50,selectedCount:dt.length,from:5,control:Dt,allowNewRecord:!1,multiple:Ua,coverCid:Cn,filterRowIds:[],showControls:Rn,appId:Xt,viewId:On,relateSheetId:gn,parentWorksheetId:pn,filterRelatesheetControlIds:[dn],staticRecords:hr,defaultRelatedSheet:ra(),controlId:dn,visible:Ba,onClose:function(){return cr(!1)},onOk:function(Ia){var wa=dt.map(function(tr){return tr.rowid}),Ka=Ia.filter(function(tr){return!k().includes(wa,tr.rowid)}).concat(dt);Jn({values:Ua?Ka:Ia})},formData:wn}))}Q.propTypes={values:(0,o.arrayOf)((0,o.shape)({})),control:(0,o.shape)({}),advancedSetting:(0,o.shape)({}),onChange:o.func};var i=t(17206),m=t(94914),v=(0,R.Z)([`
  padding: 8px 0;
  .icon-done {
    color: #2196f3;
  }
`],[`
  padding: 8px 0;
  .icon-done {
    color: #2196f3;
  }
`]),W=r.ZP.div(v);function P(Le){var rt=Le.date,Ct=Le.dateRange,dt=Le.onSelectOptionDate,It=function(Ut){return Ut.map(function(Xt,pn){return g.createElement(W,{className:"flexRow valignWrapper pLeft15 pRight15",key:pn},g.createElement("div",{key:Xt.value,className:"flex ellipsis Font14",onClick:function(){dt(Xt.value)}},Xt.text),Ct===Xt.value&&g.createElement(q.Z,{className:"Font20",icon:"done"}))})};return g.createElement("div",null,rt.map(function(bt,Ut){return g.createElement(g.Fragment,{key:Ut},It(bt),Ut!==rt.length-1&&g.createElement("div",{className:"mTop10 mBottom10",style:{borderTop:"1px solid #EAEAEA"}}))}))}P.propTypes={date:(0,o.arrayOf)((0,o.arrayOf)((0,o.shape)({}))),dateRange:o.number,onSelectOptionDate:o.func};var u=t(30381),l=t.n(u),T=(0,R.Z)([`
  width: 100%;
  border-radius: 18px !important;
  border: none !important;
  background-color: #f5f5f5;
`],[`
  width: 100%;
  border-radius: 18px !important;
  border: none !important;
  background-color: #f5f5f5;
`]),G=(0,r.ZP)(te.Z)(T),D=function(rt){return rt.replace?rt.replace(/[\u4e00-\u9fa5]+/g,"-"):rt};function M(Le){var rt=Le.dateRange,Ct=Le.dateRangeType,dt=Le.value,It=Le.minValue,bt=Le.maxValue,Ut=Le.advancedSetting,Xt=Ut===void 0?{}:Ut,pn=Le.onChange,tt=pn===void 0?function(){}:pn,ht=Le.onRemove,Dt=ht===void 0?function(){}:ht,Ot=Le.control,Ht=Le.filterType||L.W5.DATE_BETWEEN,Kt=(0,g.useState)(!1),dn=(0,n.Z)(Kt,2),Cn=dn[0],Rn=dn[1],gn=(0,g.useState)(!1),wn=(0,n.Z)(gn,2),On=wn[0],An=wn[1],Yn=(0,g.useState)(!1),kn=(0,n.Z)(Yn,2),Fn=kn[0],$n=kn[1],ba=[];try{ba=JSON.parse(Xt.daterange)}catch(ra){}Ct&&(Ot.advancedSetting.showtype=String(Ct));var ua=rt===18||k().isEmpty(ba),La=rt===18?Ht===L.W5.DATE_BETWEEN?!(It&&bt):!dt:!rt,ga=k().get(Ot,"advancedSetting.showtype"),Ua=(0,m.VL)(Ot),yr=k().includes(["4","5"],ga)?L.AW.map(function(ra){return ra.filter(function(ha){return k().includes(ga==="5"?[15,16,17]:[7,8,9,12,13,14,15,16,17],ha.value)})}).filter(function(ra){return ra.length}).map(function(ra){return ra.filter(function(ha){return k().includes(ba.concat(18),ha.value)})}):L.AW.map(function(ra){return ra.filter(function(ha){return k().includes(ba.concat(18),ha.value)})}),sr=k().flatten(yr),Ba=It?l()(D(It)).toDate():null,cr=bt?l()(D(bt)).toDate():null,hr=function(){Rn(!Cn)},Qa=function(ha){if(rt===ha)tt({dateRange:0,minValue:void 0,maxValue:void 0});else{var Ia=Le.filterType||L.W5.DATEENUM;tt({filterType:Ia,dateRange:ha,minValue:void 0,maxValue:void 0,value:void 0})}},da=cr?{max:l()(D(cr)).toDate()}:{},Jn={5:"year",4:"month",3:"date",2:"hour",1:"minite",6:"second"};return g.createElement("div",{className:"controlWrapper"},g.createElement("div",{className:"flexRow valignWrapper mBottom15"},g.createElement("div",{className:"Font14 bold flex ellipsis"},Ot.controlName),!!rt&&rt!==18&&g.createElement("div",{className:"selected ellipsis"},k().get(k().find(sr,{value:rt}),"text"))),Ht===L.W5.DATE_BETWEEN?g.createElement("div",{className:"flexRow"},g.createElement("div",{className:"flex"},g.createElement(G,{readOnly:!0,className:"centerAlign",placeholder:_l("\u5F00\u59CB"),value:It||"",onClick:function(){An(!0)}}),On&&g.createElement(i.Z,(0,ce.default)({customHeader:_l("\u5F00\u59CB\u65F6\u95F4"),precision:Jn[ga],isOpen:On,value:Ba?l()(D(Ba)).toDate():new Date,onSelect:function(ha){var Ia=Ot.controlId==="ctime"||Ot.controlId==="utime"?l()(ha).format("YYYY-MM-DD HH:mm:ss"):l()(ha).format(ga==="2"?"YYYY-MM-DD HH:00":Ua);tt({dateRange:18,filterType:31,minValue:Ia,maxValue:bt}),An(!1)},onCancel:function(){An(!1),bt?tt({dateRange:18,filterType:31,minValue:null,maxValue:bt}):Dt()}},da))),g.createElement("div",{className:"flexRow valignWrapper mLeft7 mRight7"},"-"),g.createElement("div",{className:"flex"},g.createElement(G,{readOnly:!0,className:"centerAlign",placeholder:_l("\u7ED3\u675F"),value:bt||"",onClick:function(){$n(!0)}}),Fn&&g.createElement(i.Z,{customHeader:_l("\u7ED3\u675F\u65F6\u95F4"),isOpen:Fn,value:cr?l()(D(cr)).toDate():new Date,min:l()(Ba).toDate(),precision:Jn[ga],onSelect:function(ha){var Ia=Ot.controlId==="ctime"||Ot.controlId==="utime"?l()(ha).format("YYYY-MM-DD HH:mm:ss"):l()(ha).format(ga==="2"?"YYYY-MM-DD HH:00":Ua);tt({dateRange:18,filterType:31,minValue:It,maxValue:Ia}),$n(!1)},onCancel:function(){$n(!1),It?tt({dateRange:18,filterType:31,minValue:It,maxValue:null}):Dt()}}))):g.createElement("div",{className:"flexRow"},g.createElement("div",{className:"flex"},g.createElement(G,{readOnly:!0,className:"centerAlign",placeholder:_l("\u8BF7\u9009\u62E9\u65E5\u671F"),value:dt||"",onClick:function(){An(!0)}}),On&&g.createElement(i.Z,(0,ce.default)({customHeader:_l("\u8BF7\u9009\u62E9\u65E5\u671F"),precision:Jn[ga],isOpen:On,value:dt?l()(D(dt)).toDate():new Date,onSelect:function(ha){var Ia=Ot.controlId==="ctime"||Ot.controlId==="utime"?l()(ha).format("YYYY-MM-DD HH:mm:ss"):l()(ha).format(ga==="2"?"YYYY-MM-DD HH:00":Ua);tt({dateRange:18,filterType:Ht||L.W5.DATEENUM,value:Ia}),An(!1)},onCancel:function(ha){An(!1),ha&&(tt({dateRange:18,filterType:Ht||L.W5.DATEENUM,value:""}),Dt())}},da)))),g.createElement("div",{className:"mTop12"},sr.slice(0,10).map(function(ra,ha){return g.createElement(N,{key:ha,className:a()("ellipsis",{checked:rt===ra.value}),onClick:function(){Qa(ra.value)}},ra.text)}),sr.length>10&&g.createElement(N,{className:"more",onClick:hr},_l("\u66F4\u591A..."))),Cn&&g.createElement(w,{name:Ot.controlName,onHideSidebar:hr},g.createElement(P,{date:yr,dateRange:rt,onSelectOptionDate:Qa})))}M.propTypes={dateRange:o.number,advancedSetting:(0,o.shape)({}),minValue:o.string,maxValue:o.string,onChange:o.func};var se=(0,R.Z)([`
  width: 100%;
  border-radius: 18px !important;
  border: none !important;
  background-color: #f5f5f5;
`],[`
  width: 100%;
  border-radius: 18px !important;
  border: none !important;
  background-color: #f5f5f5;
`]),ae=(0,r.ZP)(te.Z)(se),ne=function(rt){var Ct=rt.split(":");return{hour:Ct[0]&&Number(Ct[0]),minite:Ct[1]&&Number(Ct[1]),second:Ct[2]&&Number(Ct[2])}};function de(Le){var rt=Le.dateRange,Ct=Le.minValue,dt=Le.maxValue,It=Le.onChange,bt=It===void 0?function(){}:It,Ut=Le.control,Xt=(0,g.useState)(!1),pn=(0,n.Z)(Xt,2),tt=pn[0],ht=pn[1],Dt=(0,g.useState)(!1),Ot=(0,n.Z)(Dt,2),Ht=Ot[0],Kt=Ot[1],dn=String(Ut.unit),Cn=Ct?ne(Ct):{},Rn=dt?ne(dt):{},gn=k().isEmpty(Cn)?null:Cn.second?l()().hour(Cn.hour).minute(Cn.minite).second(Cn.second):l()().hour(Cn.hour).minute(Cn.minite),wn=k().isEmpty(Rn)?null:Rn.second?l()().hour(Rn.hour).minute(Rn.minite).second(Rn.second):l()().hour(Rn.hour).minute(Rn.minite),On=wn?{max:new Date(wn)}:{},An=dn==="1"?"HH:mm":"HH:mm:ss";return g.createElement("div",{className:"controlWrapper"},g.createElement("div",{className:"flexRow valignWrapper mBottom15"},g.createElement("div",{className:"Font14 bold flex ellipsis"},Ut.controlName),!!rt&&rt!==18&&g.createElement("div",{className:"selected ellipsis"},k().find(optionDate,{value:rt}).text)),g.createElement("div",{className:"flexRow"},g.createElement("div",{className:"flex"},g.createElement(ae,{readOnly:!0,className:"centerAlign",placeholder:_l("\u5F00\u59CB"),value:Ct||"",onClick:function(){ht(!0)}}),tt&&g.createElement(i.Z,(0,ce.default)({customHeader:_l("\u5F00\u59CB\u65F6\u95F4"),dateConfig:dn==="1"?{hour:{format:_l("hh\u65F6"),caption:"Hour",step:1},minute:{format:_l("mm\u5206"),caption:"Min",step:1}}:{hour:{format:_l("hh\u65F6"),caption:"Hour",step:1},minute:{format:_l("mm\u5206"),caption:"Min",step:1},second:{format:_l("ss\u79D2"),caption:"Second",step:1}},isOpen:tt,value:gn?new Date(gn):new Date,onSelect:function(kn){bt({dateRange:18,filterType:31,minValue:l()(kn).format(An),maxValue:dt}),ht(!1)},onCancel:function(){ht(!1),bt({dateRange:18,filterType:31,minValue:null,maxValue:dt})}},On))),g.createElement("div",{className:"flexRow valignWrapper mLeft7 mRight7"},"-"),g.createElement("div",{className:"flex"},g.createElement(ae,{readOnly:!0,className:"centerAlign",placeholder:_l("\u7ED3\u675F"),value:dt||"",onClick:function(){Kt(!0)}}),Ht&&g.createElement(i.Z,{customHeader:_l("\u7ED3\u675F\u65F6\u95F4"),isOpen:Ht,value:wn?new Date(wn):new Date,min:new Date(gn),dateConfig:dn==="1"?{hour:{format:_l("hh\u65F6"),caption:"Hour",step:1},minute:{format:_l("mm\u5206"),caption:"Min",step:1}}:{hour:{format:_l("hh\u65F6"),caption:"Hour",step:1},minute:{format:_l("mm\u5206"),caption:"Min",step:1},second:{format:_l("ss\u79D2"),caption:"Second",step:1}},onSelect:function(kn){bt({dateRange:18,filterType:31,minValue:Ct,maxValue:l()(kn).format(An)}),Kt(!1)},onCancel:function(){Kt(!1),bt({dateRange:18,filterType:31,minValue:Ct,maxValue:null})}}))))}de.propTypes={dateRange:o.number,advancedSetting:(0,o.shape)({}),minValue:o.string,maxValue:o.string,onChange:o.func};var Ce=t(60967);function he(Le){var rt=Le.control,Ct=Le.filterType,dt=Le.onChange,It=dt===void 0?function(){}:dt,bt=Le.onRemove;return g.createElement("div",{className:"controlWrapper"},g.createElement("div",{className:"ellipsis Font14 bold mBottom15"},rt.controlName),g.createElement(N,null,g.createElement(Ce.Z,{text:_l("\u672A\u9009\u4E2D"),checked:Ct===L.W5.NE,onClick:function(){Ct===L.W5.NE?bt():It({filterType:L.W5.NE,value:1})}})),g.createElement(N,null,g.createElement(Ce.Z,{text:_l("\u5DF2\u9009\u4E2D"),checked:Ct===L.W5.EQ,onClick:function(){Ct===L.W5.EQ?bt():It({filterType:L.W5.EQ,value:1})}})))}he.propTypes={control:(0,o.shape)({}),filterType:o.number,onChange:o.func,onRemove:o.func};var fe=t(18667),Ee=(0,R.Z)([`
  position: relative;
  .addBtn {
    display: inline-block;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    background: #f5f5f5;
    text-align: center;
    line-height: 26px;
    font-size: 16px;
    color: #9e9e9e;
  }
  .rightArrow {
    position: absolute;
    right: 0;
    line-height: 26px;
    font-size: 16px;
    color: #c7c7cc;
  }
`],[`
  position: relative;
  .addBtn {
    display: inline-block;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    background: #f5f5f5;
    text-align: center;
    line-height: 26px;
    font-size: 16px;
    color: #9e9e9e;
  }
  .rightArrow {
    position: absolute;
    right: 0;
    line-height: 26px;
    font-size: 16px;
    color: #c7c7cc;
  }
`]),Y=(0,R.Z)([`
  display: inline-block;
  height: 28px;
  background: #f5f5f5;
  border-radius: 14px;
  margin: 0 8px 10px 0;
  padding-right: 12px;
  max-width: 100%;
  line-height: 28px;
  .userAvatar {
    width: 28px;
    height: 28px;
    border-radius: 50%;
  }
  .userName {
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    margin: 0 20px 0 8px;
    vertical-align: middle;
    display: inline-block;
    max-width: calc(100% - 69px);
  }
`],[`
  display: inline-block;
  height: 28px;
  background: #f5f5f5;
  border-radius: 14px;
  margin: 0 8px 10px 0;
  padding-right: 12px;
  max-width: 100%;
  line-height: 28px;
  .userAvatar {
    width: 28px;
    height: 28px;
    border-radius: 50%;
  }
  .userName {
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    margin: 0 20px 0 8px;
    vertical-align: middle;
    display: inline-block;
    max-width: calc(100% - 69px);
  }
`]),oe=r.ZP.div(Ee),ve=r.ZP.span(Y);function ue(Le){var rt=Le.control,Ct=Le.values,dt=Ct===void 0?[]:Ct,It=Le.onChange,bt=It===void 0?function(){}:It,Ut=Le.projectId,Xt=Le.appId,pn=Le.isMultiple,tt=Le.advancedSetting,ht=Le.controlId,Dt=Le.worksheetId,Ot=tt.shownullitem,Ht=tt.nullitemname,Kt=tt.navshow,dn=tt.navfilters,Cn=dn===void 0?"[]":dn,Rn=(0,g.useState)(!1),gn=(0,n.Z)(Rn,2),wn=gn[0],On=gn[1],An=safeParse(Cn).map(safeParse).map(function($n){return{accountId:$n.id,fullname:$n.name,avatar:$n.avatar}}),Yn=function(){On(!0)},kn=function(ba){bt({values:pn?k().uniqBy([].concat((0,V.Z)(dt),(0,V.Z)(ba)),"accountId"):ba})},Fn=function(ba){bt({values:dt.filter(function(ua){return ua.accountId!==ba.accountId})})};return g.createElement("div",{className:"controlWrapper"},g.createElement("div",{className:"Font14 bold mBottom15"},rt.controlName),g.createElement(oe,null,dt.map(function($n){return g.createElement(ve,null,g.createElement("img",{src:$n.avatar,alt:"",className:"userAvatar"}),g.createElement("span",{className:"userName"},$n.fullname),g.createElement(q.Z,{icon:"close",onClick:function(){return Fn($n)}}))}),(!pn&&k().isEmpty(dt)||pn)&&g.createElement("span",{className:"addBtn",onClick:Yn},g.createElement(q.Z,{icon:"add"})),!pn&&!k().isEmpty(dt)&&g.createElement(q.Z,{onClick:Yn,icon:"arrow-right-border",className:"rightArrow"})),wn&&g.createElement(fe.Z,{projectId:Ut,visible:!0,type:"user",userType:(0,c.LU)(rt),appId:Xt||"",selectRangeOptions:k().get(rt,"advancedSetting.userrange")?(0,I.Mn)(rt,Le.controls):!1,onlyOne:!pn,advancedSetting:tt,onClose:function(){return On(!1)},onSave:kn,staticAccounts:Ot==="1"?[{avatar:md.global.FileStoreConfig.pictureHost.replace(/\/$/,"")+"/UserAvatar/undefined.gif?imageView2/1/w/100/h/100/q/90",fullname:Ht||_l("\u4E3A\u7A7A"),accountId:"isEmpty"}].concat(An):Kt==="2"?An:[]}))}var pe=(0,R.Z)([`
  position: relative;
  .addBtn {
    display: inline-block;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    background: #f5f5f5;
    text-align: center;
    line-height: 26px;
    font-size: 16px;
    color: #9e9e9e;
  }
  .rightArrow {
    position: absolute;
    right: 0;
    line-height: 26px;
    font-size: 16px;
    color: #c7c7cc;
  }
`],[`
  position: relative;
  .addBtn {
    display: inline-block;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    background: #f5f5f5;
    text-align: center;
    line-height: 26px;
    font-size: 16px;
    color: #9e9e9e;
  }
  .rightArrow {
    position: absolute;
    right: 0;
    line-height: 26px;
    font-size: 16px;
    color: #c7c7cc;
  }
`]),Se=(0,R.Z)([`
  display: inline-block;
  height: 28px;
  background: #f5f5f5;
  border-radius: 14px;
  margin: 0 8px 10px 0;
  padding-right: 12px;
  line-height: 28px;
  .userAvatar {
    width: 28px;
    height: 28px;
    border-radius: 50%;
  }
  .userName {
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    margin: 0 20px 0 8px;
    vertical-align: middle;
  }
`],[`
  display: inline-block;
  height: 28px;
  background: #f5f5f5;
  border-radius: 14px;
  margin: 0 8px 10px 0;
  padding-right: 12px;
  line-height: 28px;
  .userAvatar {
    width: 28px;
    height: 28px;
    border-radius: 50%;
  }
  .userName {
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    margin: 0 20px 0 8px;
    vertical-align: middle;
  }
`]),ye=r.ZP.div(pe),J=r.ZP.span(Se);function me(Le){var rt=Le.control,Ct=Le.values,dt=Ct===void 0?[]:Ct,It=Le.onChange,bt=It===void 0?function(){}:It,Ut=Le.projectId,Xt=Le.appId,pn=Le.isMultiple,tt=(0,g.useState)(!1),ht=(0,n.Z)(tt,2),Dt=ht[0],Ot=ht[1],Ht=function(Cn){bt({values:pn?k().uniqBy([].concat((0,V.Z)(dt),(0,V.Z)(Cn)),"departmentId"):Cn})},Kt=function(Cn){bt({values:dt.filter(function(Rn){return Rn.departmentId!==Cn.departmentId})})};return g.createElement("div",{className:"controlWrapper"},g.createElement("div",{className:"Font14 bold mBottom15"},rt.controlName),g.createElement(ye,null,dt.map(function(dn){return g.createElement(J,null,g.createElement("span",{className:"userName"},dn.departmentName),g.createElement(q.Z,{icon:"close",onClick:function(){return Kt(dn)}}))}),(!pn&&k().isEmpty(dt)||pn)&&g.createElement("span",{className:"addBtn",onClick:function(){Ot(!0)}},g.createElement(q.Z,{icon:"add"})),!pn&&!k().isEmpty(dt)&&g.createElement(q.Z,{onClick:function(){Ot(!0)},icon:"arrow-right-border",className:"rightArrow"})),Dt&&g.createElement(fe.Z,{projectId:Ut||"f67ec501-a8f8-4c8f-ab49-556d96ce26aa",visible:!0,type:"department",onlyOne:!pn,onClose:function(){return Ot(!1)},onSave:Ht,appId:Xt,userType:(0,c.LU)(rt)}))}var be=t(51156),xe=(0,R.Z)([`
  position: relative;
  display: flex;
  flex-wrap: wrap;
  .addBtn {
    display: inline-block;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    background: #f5f5f5;
    text-align: center;
    line-height: 26px;
    font-size: 16px;
    color: #9e9e9e;
  }
  .rightArrow {
    position: absolute;
    right: 0;
    line-height: 26px;
    font-size: 16px;
    color: #c7c7cc;
  }
`],[`
  position: relative;
  display: flex;
  flex-wrap: wrap;
  .addBtn {
    display: inline-block;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    background: #f5f5f5;
    text-align: center;
    line-height: 26px;
    font-size: 16px;
    color: #9e9e9e;
  }
  .rightArrow {
    position: absolute;
    right: 0;
    line-height: 26px;
    font-size: 16px;
    color: #c7c7cc;
  }
`]),Ae=(0,R.Z)([`
  max-width: `,`;
  display: inline-block;
  height: 28px;
  background: #f5f5f5;
  border-radius: 14px;
  margin: 0 8px 10px 0;
  padding-right: 12px;
  line-height: 28px;
  overflow: hidden;
  .userAvatar {
    width: 28px;
    height: 28px;
    border-radius: 50%;
  }
  .userName {
    display: inline-block;
    width: calc(100% - 42px);
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    margin: 0 18px 0 8px;
    vertical-align: middle;
  }
`],[`
  max-width: `,`;
  display: inline-block;
  height: 28px;
  background: #f5f5f5;
  border-radius: 14px;
  margin: 0 8px 10px 0;
  padding-right: 12px;
  line-height: 28px;
  overflow: hidden;
  .userAvatar {
    width: 28px;
    height: 28px;
    border-radius: 50%;
  }
  .userName {
    display: inline-block;
    width: calc(100% - 42px);
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    margin: 0 18px 0 8px;
    vertical-align: middle;
  }
`]),Ne=r.ZP.div(xe),Me=r.ZP.span(Ae,function(Le){return Le.isMultiple?"100%":"calc(100% - 20px)"});function Fe(Le){var rt=Le.values,Ct=rt===void 0?[]:rt,dt=Le.control,It=Le.isMultiple,bt=Le.onChange,Ut=bt===void 0?function(){}:bt,Xt=(0,g.useRef)(),pn=function(ht){Ut({values:Ct.filter(function(Dt){return Dt.id!==ht.id})})};return g.createElement("div",{className:"controlWrapper"},g.createElement("div",{className:"Font14 bold mBottom15"},dt.controlName),g.createElement(Ne,null,Ct.map(function(tt){return g.createElement(Me,{isMultiple:It},g.createElement("span",{className:"userName 12"},tt.name),g.createElement(q.Z,{icon:"close",onClick:function(){return pn(tt)}}))}),(!It&&k().isEmpty(Ct)||It)&&g.createElement(be.Z,{level:dt.type===19?1:dt.type===23?2:3,showConfirmBtn:!0,callback:function(ht){k().last(ht)&&(Xt.current={name:ht.map(function(Dt){return Dt.name}).join("/"),id:k().last(ht).id})},onClear:function(){Xt.current=null,Ut({values:[]})},handleClose:function(){Xt.current&&Ut({values:It?k().uniqBy([].concat((0,V.Z)(Ct),[Xt.current]),"id"):[Xt.current]})}},g.createElement("span",{className:"addBtn"},g.createElement(q.Z,{icon:"add"}))),!It&&!k().isEmpty(Ct)&&g.createElement(be.Z,{level:dt.type===19?1:dt.type===23?2:3,showConfirmBtn:!0,callback:function(ht){k().last(ht)&&(Xt.current={name:ht.map(function(Dt){return Dt.name}).join("/"),id:k().last(ht).id})},onClear:function(){Xt.current={},Ut({values:[]})},handleClose:function(){Xt.current&&Ut({values:It?k().uniqBy([].concat((0,V.Z)(Ct),[Xt.current]),"id"):[Xt.current]})}},g.createElement(q.Z,{icon:"arrow-right-border",className:"rightArrow"}))))}var Be=t(20148),we=t(60385),Ie=t.n(we),ge=t(95679),Re=t(77040),Pe=t(94301),ke=t.n(Pe),We=t(54208),Ve=t(52945),it=t.n(Ve),Ge=t(85105),pt=t.n(Ge),ot=t(99663),vt=t(22600),At=t(49135),yt=t(93196),st=t(83298),St=t(3177),Qe=t.n(St),Xe=(0,R.Z)([`
  position: relative;
  .addBtn {
    display: inline-block;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    background: #f5f5f5;
    text-align: center;
    line-height: 26px;
    font-size: 16px;
    color: #9e9e9e;
  }
  .rightArrow {
    position: absolute;
    right: 0;
    line-height: 26px;
    font-size: 16px;
    color: #c7c7cc;
  }
`],[`
  position: relative;
  .addBtn {
    display: inline-block;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    background: #f5f5f5;
    text-align: center;
    line-height: 26px;
    font-size: 16px;
    color: #9e9e9e;
  }
  .rightArrow {
    position: absolute;
    right: 0;
    line-height: 26px;
    font-size: 16px;
    color: #c7c7cc;
  }
`]),$e=(0,R.Z)([`
  display: inline-block;
  max-width: 100%;
  height: 28px;
  background: #f5f5f5;
  border-radius: 14px;
  margin: 0 8px 10px 0;
  padding-right: 12px;
  line-height: 28px;
  .userAvatar {
    width: 28px;
    height: 28px;
    border-radius: 50%;
  }
  .userName {
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    margin: 0 20px 0 8px;
    vertical-align: middle;
  }
`],[`
  display: inline-block;
  max-width: 100%;
  height: 28px;
  background: #f5f5f5;
  border-radius: 14px;
  margin: 0 8px 10px 0;
  padding-right: 12px;
  line-height: 28px;
  .userAvatar {
    width: 28px;
    height: 28px;
    border-radius: 50%;
  }
  .userName {
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    margin: 0 20px 0 8px;
    vertical-align: middle;
  }
`]),Ke=r.ZP.div(Xe),Ue=r.ZP.span($e),He=function(Le){(0,yt.default)(rt,Le);function rt(Ct){(0,ot.default)(this,rt);var dt=(0,At.default)(this,(rt.__proto__||pt()(rt)).call(this,Ct));return dt.loadData=function(){var It=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",bt=dt.props.control,Ut=bt===void 0?{}:bt,Xt=Ut.dataSource,pn=Ut.viewId,tt=dt.state,ht=tt.options,Dt=tt.layersName;ht!==null&&!It||(dt.ajax=S.Z.getFilterRows({worksheetId:Xt,viewId:pn,kanbanKey:It,pageIndex:1,pageSize:1e4,isGetWorksheet:!0,getType:10}),dt.ajax.then(function(Ot){if(Ot.resultCode===1){var Ht=Ot.template,Kt=Ht.controls.find(function(Cn){return Cn.attribute===1}),dn=Ot.data.map(function(Cn){return{value:Cn.rowid,label:dt.renderLabel(Cn,Kt),isLeaf:!Cn.childrenids}});!It&&!k().isArray(Dt)&&dt.setState({layersName:(k().find(Ot.worksheet.views,function(Cn){return Cn.viewId===pn})||{}).layersName||[]}),dt.ajax="",dt.cacheData=k().uniqBy(dt.cacheData.concat(Ot.data),"rowid"),dt.deepDataUpdate("options",k().cloneDeep(ht),dn,It)}else dt.setState({isError:!0})}))},dt.treeSelectChange=function(It,bt){var Ut=dt.props,Xt=Ut.onChange,pn=Ut.isMultiple,tt=Ut.values,ht=tt===void 0?[]:tt,Dt=dt.sourcePath[It];It&&Xt({values:pn?k().uniqBy([].concat((0,V.Z)(ht),[{rowid:It,name:Dt,sourcevalue:dt.cacheData.find(function(Ot){return Ot.rowid===It})}]),"rowid"):[{rowid:It,name:Dt,sourcevalue:dt.cacheData.find(function(Ot){return Ot.rowid===It})}]}),dt.setState({value:Dt})},dt.deleteCurrentSelected=function(It){var bt=dt.props,Ut=bt.values,Xt=bt.onChange,pn=Xt===void 0?function(){}:Xt;pn({values:Ut.filter(function(tt){return tt.rowid!==It.rowid})})},dt.state={visible:!1,value:Ct.value&&Ct.value!=="[]"?(safeParse(Ct.value)[0]||{}).name:void 0,operatePath:[],selectedId:Ct.value&&Ct.value!=="[]"?(safeParse(Ct.value)[0]||{}).rowid:"",selectItem:{},layersName:null,options:null,pathData:[]},dt.ajax="",dt.cacheData=[],dt.sourcePath={},dt}return(0,vt.default)(rt,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(dt){k().isEqual(this.props.value,dt.value)||this.setState({value:dt.value})}},{key:"renderLabel",value:function(dt,It){return It?(0,st.Z)(it()({},It,{value:dt[It.controlId]})):_l("\u672A\u547D\u540D")}},{key:"cacheTreePath",value:function(dt){var It=this,bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";dt.forEach(function(Ut){It.sourcePath[Ut.value]=bt+Ut.label})}},{key:"deepDataUpdate",value:function(dt,It,bt,Ut){var Xt=this;Ut?It.forEach(function(pn){pn.value===Ut?(pn.children=bt,Xt.cacheTreePath(bt,Xt.sourcePath[Ut]+" / ")):k().isArray(pn.children)&&Xt.deepDataUpdate(dt,pn.children,bt,Ut)}):(It=bt,this.cacheTreePath(bt)),this.setState((0,f.default)({},dt,It))}},{key:"renderH5Header",value:function(){var dt=this,It=this.props,bt=It.onChange,Ut=It.control,Xt=Ut===void 0?{}:Ut,pn=Xt.advancedSetting,tt=pn===void 0?{}:pn,ht=tt.anylevel,Dt=ht===void 0?"0":ht,Ot=tt.minlayer,Ht=Ot===void 0?"0":Ot,Kt=this.state,dn=Kt.operatePath,Cn=Kt.selectItem,Rn=Kt.layersName,gn=Number(Ht);return g.createElement("div",{className:"flexRow Font17 ThemeColor3 pLeft15 pRight15 relative",style:{height:46,alignItems:"center"}},dn.length?g.createElement("div",{onClick:function(){var On=[].concat(dn);On.pop(),dt.setState({operatePath:On})}},g.createElement(q.Z,{icon:"arrow-left-border"}),_l("\u8FD4\u56DE")):g.createElement("div",{onClick:function(){dt.setState({visible:!1,operatePath:[],selectItem:{},value:"",selectedId:""}),bt("")}},_l("\u6E05\u9664")),g.createElement("div",{className:"flex"}),g.createElement("div",{className:"ellipsis Gray",style:{position:"absolute",left:"50%",marginLeft:-65,width:130}},(Rn||[])[dn.length]||_l("%0\u7EA7",Qe().cn.encodeS(dn.length+1))),(gn&&!+Dt?dn.length>=gn:!+Dt)&&g.createElement("div",{onClick:function(){dt.setState({visible:!1,operatePath:[],selectItem:{},selectedId:""}),dt.treeSelectChange(Cn.id,Cn.label)}},_l("\u786E\u5B9A")))}},{key:"getH5Options",value:function(){var dt=this.state,It=dt.options,bt=It===void 0?[]:It,Ut=dt.operatePath,Xt=Ut===void 0?[]:Ut,pn=Xt[Xt.length-1]||"",tt=[],ht=function Dt(Ot,Ht){Ot.forEach(function(Kt){Kt.value===Ht?tt=Kt.children||[]:k().isArray(Kt.children)&&Dt(Kt.children,Ht)})};return pn?(ht(bt,pn),tt):bt}},{key:"renderH5Content",value:function(){var dt=this,It=this.props.control,bt=It.advancedSetting,Ut=bt===void 0?{}:bt,Xt=Ut.anylevel,pn=Xt===void 0?"0":Xt,tt=Ut.minlayer,ht=tt===void 0?"0":tt,Dt=Ut.limitlayer,Ot=Dt===void 0?"0":Dt,Ht=this.state,Kt=Ht.options,dn=Kt===void 0?[]:Kt,Cn=Ht.operatePath,Rn=Ht.selectedId,gn=Ht.selectItem,wn=Ht.isError,On=Number(ht),An=Number(Ot);if(wn)return g.createElement("div",{className:"mTop10"},_l("\u6570\u636E\u6E90\u5F02\u5E38"));if(dn===null)return g.createElement(We.Z,null);if(!dn.length)return g.createElement("div",{className:"mTop10"},_l("\u65E0\u6570\u636E"));var Yn=this.getH5Options().map(function(kn){return An&&An===Cn.length?(0,ce.default)({},kn,{isLeaf:!0}):kn});return Yn.length?+pn?g.createElement(ke(),null,Yn.map(function(kn){return g.createElement(ke().Item,{key:kn.value,onClick:function(){kn.isLeaf?(dt.setState({visible:!1,operatePath:[],selectedId:kn.value}),dt.treeSelectChange(kn.value,kn.label)):dt.setState({operatePath:Cn.concat(kn.value)},function(){dt.loadData(kn.value)})}},g.createElement("div",{className:"flexRow"},g.createElement("div",{className:"flex ellipsis"},kn.label),!kn.isLeaf&&g.createElement("div",{className:"pLeft10 Font16 Gray_9e"},g.createElement("i",{className:"icon-arrow-right-border"}))))})):On?g.createElement(ke(),null,Yn.map(function(kn){return g.createElement(ke().Item,{key:kn.value,onClick:function(){Cn.length>=On||(kn.isLeaf?(dt.setState({visible:!1,operatePath:[],selectedId:kn.value}),dt.treeSelectChange(kn.value,kn.label)):dt.setState({operatePath:Cn.concat(kn.value)},function(){dt.loadData(kn.value)}))}},Cn.length>=On?g.createElement("div",{className:"flexRow"},g.createElement(ge.Z,{className:"flex cascaderRadio flexRow",text:kn.label,checked:gn.id?kn.value===gn.id:kn.value===Rn,onClick:function(){return dt.setState({selectItem:{id:kn.value,label:kn.label}})}}),!kn.isLeaf&&g.createElement(g.Fragment,null,g.createElement("div",{style:{borderRight:"1px solid #e0e0e0",height:18,marginTop:4}}),g.createElement("div",{className:"pLeft10 Font16 Gray_9e",onClick:function($n){$n.stopPropagation(),dt.setState({operatePath:Cn.concat(kn.value)},function(){dt.loadData(kn.value)})}},g.createElement("i",{className:"icon-arrow-right-border"})))):g.createElement("div",{className:"flexRow"},g.createElement("div",{className:"flex ellipsis"},kn.label),!kn.isLeaf&&g.createElement("div",{className:"pLeft10 Font16 Gray_9e"},g.createElement("i",{className:"icon-arrow-right-border"}))))})):g.createElement(ke(),null,Yn.map(function(kn){return g.createElement(ke().Item,{key:kn.value},g.createElement("div",{className:"flexRow"},g.createElement(ge.Z,{className:"flex cascaderRadio flexRow",text:kn.label,checked:gn.id?kn.value===gn.id:kn.value===Rn,onClick:function(){return dt.setState({selectItem:{id:kn.value,label:kn.label}})}}),!kn.isLeaf&&g.createElement(g.Fragment,null,g.createElement("div",{style:{borderRight:"1px solid #e0e0e0",height:18,marginTop:4}}),g.createElement("div",{className:"pLeft10 Font16 Gray_9e",onClick:function($n){$n.stopPropagation(),dt.setState({operatePath:Cn.concat(kn.value)},function(){dt.loadData(kn.value)})}},g.createElement("i",{className:"icon-arrow-right-border"})))))})):g.createElement(We.Z,null)}},{key:"render",value:function(){var dt=this,It=this.props,bt=It.control,Ut=It.values,Xt=Ut===void 0?[]:Ut,pn=It.isMultiple,tt=this.state.visible;return g.createElement(g.Fragment,null,g.createElement("div",{className:"controlWrapper"},g.createElement("div",{className:"flexRow valignWrapper mBottom15"},g.createElement("div",{className:"Font14 bold flex ellipsis"},bt.controlName)),g.createElement(Ke,null,Xt.map(function(ht){return g.createElement(Ue,null,g.createElement("div",{className:"flexRow alignItemsCenter"},g.createElement("span",{className:"userName flex"},ht.name),g.createElement(q.Z,{icon:"close",onClick:function(){dt.deleteCurrentSelected(ht)}})))}),(!pn&&k().isEmpty(Xt)||pn)&&g.createElement("span",{className:"addBtn",onClick:function(){dt.loadData(),dt.setState({visible:!0})}},g.createElement(q.Z,{icon:"add"})))),tt&&g.createElement(Ie(),{className:"antModalRadius",popup:!0,visible:!0,onClose:function(){dt.setState({visible:!1,operatePath:[],selectItem:{}})},animationType:"slide-up"},this.renderH5Header(),g.createElement("div",{style:{height:280,overflowY:"auto"}},this.renderH5Content())))}}]),rt}(g.Component);He.propTypes={values:(0,o.arrayOf)(o.string),control:(0,o.shape)({}),advancedSetting:(0,o.shape)({}),onChange:o.func,isMultiple:o.bool};var ze=t(21313),gt=(0,R.Z)([`
  position: relative;
  .addBtn {
    display: inline-block;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    background: #f5f5f5;
    text-align: center;
    line-height: 26px;
    font-size: 16px;
    color: #9e9e9e;
  }
  .rightArrow {
    position: absolute;
    right: 0;
    line-height: 26px;
    font-size: 16px;
    color: #c7c7cc;
  }
`],[`
  position: relative;
  .addBtn {
    display: inline-block;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    background: #f5f5f5;
    text-align: center;
    line-height: 26px;
    font-size: 16px;
    color: #9e9e9e;
  }
  .rightArrow {
    position: absolute;
    right: 0;
    line-height: 26px;
    font-size: 16px;
    color: #c7c7cc;
  }
`]),Et=(0,R.Z)([`
  display: inline-block;
  height: 28px;
  background: #f5f5f5;
  border-radius: 14px;
  margin: 0 8px 10px 0;
  padding-right: 12px;
  line-height: 28px;
  .userAvatar {
    width: 28px;
    height: 28px;
    border-radius: 50%;
  }
  .userName {
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    margin: 0 20px 0 8px;
    vertical-align: middle;
  }
`],[`
  display: inline-block;
  height: 28px;
  background: #f5f5f5;
  border-radius: 14px;
  margin: 0 8px 10px 0;
  padding-right: 12px;
  line-height: 28px;
  .userAvatar {
    width: 28px;
    height: 28px;
    border-radius: 50%;
  }
  .userName {
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    margin: 0 20px 0 8px;
    vertical-align: middle;
  }
`]),ft=r.ZP.div(gt),qe=r.ZP.span(Et);function nt(Le){var rt=Le.control,Ct=Le.values,dt=Ct===void 0?[]:Ct,It=Le.onChange,bt=It===void 0?function(){}:It,Ut=Le.projectId,Xt=Le.appId,pn=Le.isMultiple,tt=(0,g.useState)(!1),ht=(0,n.Z)(tt,2),Dt=ht[0],Ot=ht[1],Ht=function(Cn){bt({values:pn?k().uniqBy([].concat((0,V.Z)(dt),(0,V.Z)(Cn)),"organizeId"):Cn})},Kt=function(Cn){bt({values:dt.filter(function(Rn){return Rn.organizeId!==Cn.organizeId})})};return g.createElement("div",{className:"controlWrapper"},g.createElement("div",{className:"Font14 bold mBottom15"},rt.controlName),g.createElement(ft,null,dt.map(function(dn){return g.createElement(qe,null,g.createElement("span",{className:"userName"},dn.organizeName),g.createElement(q.Z,{icon:"close",onClick:function(){return Kt(dn)}}))}),(!pn&&k().isEmpty(dt)||pn)&&g.createElement("span",{className:"addBtn",onClick:function(){Ot(!0)}},g.createElement(q.Z,{icon:"add"})),!pn&&!k().isEmpty(dt)&&g.createElement(q.Z,{onClick:function(){Ot(!0)},icon:"arrow-right-border",className:"rightArrow"})),Dt&&g.createElement(ze.Z,{projectId:Ut,visible:Dt,unique:!pn,onSave:Ht,onClose:function(){return Ot(!1)}}))}var Ze=(0,R.Z)([`
  width: 100%;
  border: none;
  background-color: #f5f5f5;
  height: 36px;
  border-radius: 3px;
  padding: 0 12px;
  font-size: 14px;
`],[`
  width: 100%;
  border: none;
  background-color: #f5f5f5;
  height: 36px;
  border-radius: 3px;
  padding: 0 12px;
  font-size: 14px;
`]),et=r.ZP.input(Ze);function ut(Le){var rt=Le.values,Ct=rt===void 0?[]:rt,dt=Le.control,It=Le.filterType,bt=Le.onChange;return g.createElement("div",{className:"controlWrapper"},g.createElement("div",{className:"Font14 bold mBottom15"},dt.controlName),g.createElement("div",{className:"flex"},g.createElement(et,{placeholder:_l("\u8BF7\u8F93\u5165"),value:Ct.join(" "),onChange:function(Xt){var pn=Xt.target.value;It===L.W5.TEXT_ALLCONTAIN?bt({values:pn.split(" ")}):bt({values:[pn]})}})))}var xt=t(27850);function wt(Le){var rt=Le.type;return rt===p.DN.SHEET_FIELD&&Le&&(rt=Le.sourceControlType||-1e4),rt===p.DN.SUBTOTAL&&Le&&(rt=Le.enumDefault2||6),rt===p.DN.SEARCH&&(rt=p.DN.TEXT),rt}function kt(Le){return delete Le.control,Le.dataType===29&&Le.filterType===2&&(Le.filterType=24),Le}function Rt(Le){return Le.type===p.DN.SHEET_FIELD&&(Le.type=Le.sourceControlType),Le.type===p.DN.SUBTOTAL&&Le&&(Le.type=Le.enumDefault2||6),Le.type===p.DN.FORMULA_DATE&&(Le.type=Le.enumDefault===2?15:6),Le}var jt=function(rt){return rt.map(function(Ct){return(0,ce.default)({},Ct,{values:(0,xt.M)(Ct.dataType,Ct.values)})})},fn={};function Mt(Le,rt){Le.forEach(function(Ct){return fn[Ct]=rt})}var sn=[p.DN.TEXT,p.DN.TELEPHONE,p.DN.MOBILE_PHONE,p.DN.EMAIL,p.DN.CRED,p.DN.CONCATENATE,p.DN.AUTO_ID];Mt(sn,ut);var on=[p.DN.NUMBER,p.DN.MONEY];Mt(on,U);var en=[p.DN.RELATE_SHEET];Mt(en,Q);var $t=[p.DN.FLAT_MENU,p.DN.MULTI_SELECT,p.DN.DROP_DOWN];Mt($t,h);var an=[p.DN.SWITCH];Mt(an,he);var tn=[p.DN.DATE,p.DN.DATE_TIME];Mt(tn,M);var mt=[p.DN.TIME];Mt(mt,de);var Lt=[p.DN.USER_PICKER];Mt(Lt,ue);var zt=[p.DN.DEPARTMENT];Mt(zt,me);var Zt=[p.DN.AREA_PROVINCE,p.DN.AREA_CITY,p.DN.AREA_COUNTY];Mt(Zt,Fe);var Nt=[p.DN.CASCADER];Mt(Nt,He);var ct=[p.DN.ORG_ROLE];Mt(ct,nt);function De(Le){var rt=wt({type:Le.dataType});return k().includes([p.DN.TEXT,p.DN.TELEPHONE,p.DN.MOBILE_PHONE,p.DN.EMAIL,p.DN.CRED,p.DN.CONCATENATE,p.DN.AUTO_ID,p.DN.RELATE_SHEET,p.DN.CASCADER,p.DN.FLAT_MENU,p.DN.MULTI_SELECT,p.DN.DROP_DOWN,p.DN.USER_PICKER,p.DN.DEPARTMENT,p.DN.ORG_ROLE,p.DN.AREA_PROVINCE,p.DN.AREA_CITY,p.DN.AREA_COUNTY],rt)?Le.values&&Le.values.filter(k().identity).length:k().includes([p.DN.NUMBER,p.DN.MONEY],rt)?Le.filterType===L.W5.BETWEEN?!k().isUndefined(Le.minValue)&&!k().isUndefined(Le.maxValue)&&parseFloat(Le.maxValue)>parseFloat(Le.minValue):!k().isUndefined(Le.value):k().includes([p.DN.SWITCH],rt)?k().includes([L.W5.NE,L.W5.EQ],Le.filterType):k().includes([p.DN.DATE,p.DN.DATE_TIME,p.DN.TIME],rt)?Le.dateRange===18&&Le.filterType===L.W5.DATE_BETWEEN?!k().isUndefined(Le.minValue)&&!k().isUndefined(Le.maxValue):Le.dateRange===18?!k().isUndefined(Le.value):!!Le.dateRange:!1}function _e(Le){var rt=Le.advancedSetting,Ct=rt===void 0?{}:rt,dt=Ct.allowitem,It=String(dt)==="2",bt=wt(Le.control);k().isEmpty(Le.control.controlName)&&(Le.control.controlName=_l("\u672A\u547D\u540D"));var Ut=fn[bt];return Ut?g.createElement(Ut,(0,ce.default)({},Le,{isMultiple:It})):g.createElement("span",null)}_e.propTypes={control:(0,o.shape)({})}},44867:(lt,Te,t)=>{"use strict";t.d(Te,{O:()=>A,Z:()=>S});var ce=t(88106),g=t(33867),p=t(88902),L=t.n(p),te=t(63239),R=t.n(te),y=t(88239),a=t(12424),r=t(86735),o=t(67294),d=t(71893),Z=t(50533),H=t(83848),U=t(22010),f=t(34498),V=t(27850),C=t(44253),O=t(96486),n=t.n(O),s=(0,r.Z)([`
  .header {
    padding: 10px 15px;
    justify-content: flex-end;
  }
  .close {
    font-weight: bold;
    padding: 5px;
    border-radius: 50%;
    background-color: #e6e6e6;
  }
  .body {
    padding: 0 15px;
    overflow: auto;
    .controlWrapper {
      margin-bottom: 20px;
    }
    .selected {
      color: #2196f3;
      max-width: 100px;
      padding-left: 10px;
      font-weight: 500;
    }
  }
  .footer {
    border-top: 1px solid #eaeaea;
    z-index: 0;
    background-color: #fff;
    .flex {
      padding: 10px;
    }
    .query {
      color: #fff;
      background-color: #2196f3;
    }
  }
`],[`
  .header {
    padding: 10px 15px;
    justify-content: flex-end;
  }
  .close {
    font-weight: bold;
    padding: 5px;
    border-radius: 50%;
    background-color: #e6e6e6;
  }
  .body {
    padding: 0 15px;
    overflow: auto;
    .controlWrapper {
      margin-bottom: 20px;
    }
    .selected {
      color: #2196f3;
      max-width: 100px;
      padding-left: 10px;
      font-weight: 500;
    }
  }
  .footer {
    border-top: 1px solid #eaeaea;
    z-index: 0;
    background-color: #fff;
    .flex {
      padding: 10px;
    }
    .query {
      color: #fff;
      background-color: #2196f3;
    }
  }
`]),j=d.ZP.div(s);function A(I){var c=I.view,q=I.filters,b=I.controls,k=I.updateQuickFilter,ee=I.onHideSidebar,re=I.mobileNavGroupFilters,ie=re===void 0?[]:re,le=I.quickFilter,E=le===void 0?[]:le,w=document.documentElement.clientWidth-60,K=c.advancedSetting&&c.advancedSetting.enablebtn&&c.advancedSetting.enablebtn==="1",N=(0,o.useRef)({}),F=(0,o.useState)({}),h=(0,a.Z)(F,2),z=h[0],X=h[1],B=(0,o.useRef)(n().debounce(k,500)),x=(0,o.useMemo)(function(){return q.map(function(W){var P=n().find(b,function(l){return l.controlId===W.controlId}),u=P&&n().cloneDeep((0,f.hk)(P));return(0,y.default)({},W,{control:u,dataType:u?u.type:W.dataType,filterType:u&&u.encryId?2:W.filterType})}).filter(function(W){return W.control&&!(window.shareState.shareId&&n().includes([26,27,48],W.control.type))})},[R()(q)]),Q=function(P){var u=P||z,l=x.map(function(G,D){return(0,y.default)({},G,{filterType:G.filterType||(G.dataType===29?24:2),spliceType:G.spliceType||1},u[D])}).filter(f.Gu).map(f.We);if(l.length){var T=l.map(function(G){var D=G.values,M=D===void 0?[]:D;return(n().isArray(M)&&(M[0]==="isEmpty"||n().get(M[0],"accountId")==="isEmpty")||n().get(M[0],"rowid")==="isEmpty")&&(G.filterType=7,M=[]),G.type===2?(0,y.default)({},G,{values:n().isEmpty(M)?M:[M.join("").trim()]}):(G.filterType===C.W5.DATE_BETWEEN&&G.dateRange!==18&&(G.filterType=C.W5.DATEENUM),(0,y.default)({},G,{values:M}))});n().includes(f.P4,N.current.activeType)?B.current((0,f.pT)(T)):k((0,f.pT)(T))}else k([])},i=function(){Q(),ee()},m=function(){X({}),k([]),ee()};(0,o.useEffect)(function(){X({})},[c.viewId]);var v=L()(z).map(function(W){return{controlId:"fastFilter_"+n().get(x[W],"control.controlId"),filterValue:(0,y.default)({},z[W],{values:(0,V.M)(n().get(x[W],"control.type"),n().get(z[W],"values"))})}}).concat(E.filter(function(W){return W.dataType===2}).map(function(W){return{controlId:"fastFilter_"+W.controlId,filterValue:{values:W.values}}})).concat(ie.map(function(W){return{controlId:"navGroup_"+W.controlId,filterValue:{values:W.values}}}));return o.createElement(j,{className:"flexColumn h100 overflowHidden",style:{width:w}},o.createElement("div",{className:"header flexRow valignWrapper"},o.createElement(g.Z,{className:"Gray_9e close",icon:"close",onClick:ee})),o.createElement("div",{className:"flex body"},x.map(function(W,P){return o.createElement(f.ZP,(0,y.default)({controls:b,key:W.controlId},W,z[P],{filtersData:v,projectId:I.projectId,appId:I.appId,worksheetId:I.worksheetId,filterText:I.filterText,onChange:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};N.current.activeType=W.control.type;var T=(0,y.default)({},z,(0,ce.default)({},P,(0,y.default)({},z[P],l)));X(T),!K&&!n().isEmpty(T)&&Q(T)},onRemove:function(){delete z[P];var l=(0,y.default)({},z);X(l),K||Q(l)}}))})),K&&o.createElement("div",{className:"footer flexRow valignWrapper"},o.createElement("div",{className:"flex Font16 centerAlign",onClick:m},_l("\u91CD\u7F6E")),o.createElement("div",{className:"flex Font16 centerAlign query",onClick:i},_l("\u67E5\u8BE2"))))}const S=(0,Z.$j)(function(I){return{mobileNavGroupFilters:I.mobile.mobileNavGroupFilters,quickFilter:I.mobile.quickFilter}},function(I){return(0,U.DE)(n().pick(H,["updateQuickFilter"]),I)})(A)},49227:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>X});var ce=t(85315),g=t(33867),p=t(56118),L=t(80181),te=t.n(L),R=t(70264),y=t(52945),a=t.n(y),r=t(85105),o=t.n(r),d=t(99663),Z=t(22600),H=t(49135),U=t(93196),f=t(86735),V=t(67294),C=t(93967),O=t.n(C),n=t(98153),s=t(24607),j=t(45231),A=t(76345),S=t(31742),I=t(60726),c=t.n(I),q=t(89626),b=t(95283),k=t(89499),ee=t(44293),re=t(96486),ie=t.n(re),le=t(71893),E,w,K,N=(0,f.Z)([`
  `,`
`],[`
  `,`
`]),F=le.ZP.div(N,function(B){var x=B.controlStyles;return x||""});function h(B){return ie().find(B,function(x){return File.isPicture(x.ext)||(0,ee.qk)(x.ext)&&x.previewUrl})}var z={0:"fill",1:"full",2:"circle",3:"rectangle"},X=(w=E=function(B){(0,U.default)(x,B);function x(Q){(0,d.default)(this,x);var i=(0,H.default)(this,(x.__proto__||o()(x)).call(this,Q));K.call(i);var m=Q.data,v=Q.view;return i.state={checked:m[v.advancedSetting.checkradioid]==="1",coverError:!1},i}return(0,Z.default)(x,[{key:"previewAttachment",value:function(i,m){var v=this.props,W=v.data,P=v.view;(0,b.Z)({index:m||0,attachments:i.map(function(u){return u.fileId.slice(0,2)==="o_"?a()({},u,{previewAttachmentType:"QINIU",path:u.previewUrl,name:(u.originalFilename||_l("\u56FE\u7247"))+u.ext}):a()({},u,{previewAttachmentType:u.refId?"KC_ID":"COMMON_ID"})}),showThumbnail:!0,hideFunctions:["editFileName"],disableNoPeimission:!0,recordId:W.rowid,controlId:P.coverCid,worksheetId:P.worksheetId})}},{key:"renderCover",value:function(){var i=this.props.view,m=i.coverType,v=i.advancedSetting,W=this.state.coverError,P=this.url;return V.createElement("div",{className:O()("recordCardCover",z[m],"appshowtype"+(v.appshowtype||"0"))},P&&!W?m?V.createElement("img",{onClick:this.handleCoverClick,className:"img",src:P,role:"presentation"}):V.createElement("div",{onClick:this.handleCoverClick,className:"img cover",style:{backgroundImage:"url("+P+")"}}):V.createElement("div",{className:"withoutImg img flexRow valignWrapper"},V.createElement("img",{src:c()})))}},{key:"renderControl",value:function(i){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,v=this.props,W=v.data,P=v.view,u=this.cardControls,l=ie().find(u,{controlId:i})||{},T=a()({},l,{value:W[l.controlId]});return V.createElement("div",{className:"controlWrapper",key:i},(m||l.desc)&&V.createElement("div",{className:"controlName ellipsis Gray_9e"},l.desc?V.createElement(R.Z,{text:V.createElement("span",{className:"Block",style:{maxWidth:230,maxHeight:200,overflowY:"auto",color:"#fff",whiteSpace:"pre-wrap"}},l.desc),action:["click"],popupPlacement:"topLeft",offset:[-12,0]},V.createElement("i",{className:"icon-workflow_error descBoxInfo pointer Font16 Gray_9e mRight5",onClick:function(D){return D.stopPropagation()}})):"",m?l.controlName:""),V.createElement("div",{className:"controlContent"},W[l.controlId]?V.createElement(n.Z,{className:"control-val-"+l.controlId+" w100",worksheetId:P.worksheetId,row:W,rowHeight:34,cell:T,from:4}):V.createElement("div",{className:"emptyTag"})))}},{key:"renderContent",value:function(){var i=this,m=this.props,v=m.data,W=m.view,P=m.allowAdd,u=m.controls,l=m.sheetSwitchPermit,T=W.viewType,G=W.advancedSetting,D=W.coverCid,M=W.showControlName,se=(0,S.v)(A.RX.sysControlSwitch,l),ae=ie().find(u,function(Y){return Y.attribute===1})||{},ne=(0,s.xI)(u,v),de=this.state.checked,Ce=T===6?"1":G.appshowtype||"0",he=se?W.displayControls.filter(function(Y){return Y!==ae.controlId}):W.displayControls.filter(function(Y){return Y!==ae.controlId}).filter(function(Y){return!ie().includes(q.FO,Y)}),fe=(0,k._l)(W),Ee=fe&&(0,k.j8)({controlId:fe.controlId,colorItems:fe.colorItems,controls:u,row:v});return V.createElement("div",{className:"recordCardContent flex",style:{backgroundColor:Ee&&fe.showBg?Ee.lightColor:void 0,border:"1px solid "+(Ee&&fe.showBg?Ee.lightColor:"#fff")}},Ee&&fe.showLine&&V.createElement("div",{className:O()("colorTag",{colorTagRight:G.coverposition==="1"}),style:{backgroundColor:Ee.color}}),V.createElement("div",{className:O()("flexRow valignWrapper mBottom5","control-val-"+ae.controlId)},G.checkradioid&&V.createElement(te(),{className:"mRight5",disabled:!P,checked:de,onChange:this.handleChangeCheckbox,onClick:function(oe){oe.stopPropagation()}}),V.createElement("div",{className:"titleText Gray bold Font14 ellipsis"},ne)),G.abstract&&V.createElement("div",{className:"Gray_9e Font12 mBottom8 abstract"},this.renderControl(G.abstract)),V.createElement("div",{className:O()("cardContent"+Ce)},(Ce==="0"?he.slice(0,3):he).map(function(Y){return i.renderControl(Y,["0","2"].includes(Ce)?!0:M)})))}},{key:"render",value:function(){var i=this,m=this.props,v=m.view,W=m.data,P=m.onClick,u=m.batchOptVisible,l=m.controls,T=v.advancedSetting,G=v.coverCid,D=u&&W.check,M=ie().get(v,"advancedSetting.controlstyleapp")==="1",se=M&&(0,k.wV)(v.displayControls.map(function(ae){return ie().find(l,{controlId:ae})}).concat(ie().find(l,{attribute:1})).filter(ie().identity));return V.createElement(F,{controlStyles:se,className:O()("mobileWorksheetRecordCard",{coverRight:[void 0,"0"].includes(T.coverposition),converTop:["2"].includes(T.coverposition),batchOptStyle:D}),onClick:u?function(ae){return i.checkedCurrentRow(ae,W)}:P,key:W.rowid},G&&this.renderCover(),this.renderContent(),u&&V.createElement("div",{className:O()("batchOptCheck",{batchOptChecked:D}),onClick:function(ne){return i.checkedCurrentRow(ne,W)}},V.createElement(g.Z,{icon:"done"})))}},{key:"cover",get:function(){var i=this.props,m=i.view,v=i.data,W=m.coverCid;if(!W)return null;var P=void 0;try{P=h(JSON.parse(v[W])||[])}catch(u){return null}return P}},{key:"cardControls",get:function(){var i=this.props,m=i.controls,v=i.view,W=[].concat((0,ce.Z)(v.displayControls),[v.advancedSetting.abstract]),P=[{controlId:"ownerid",controlName:_l("\u62E5\u6709\u8005"),type:26},{controlId:"caid",controlName:_l("\u521B\u5EFA\u4EBA"),type:26},{controlId:"ctime",controlName:_l("\u521B\u5EFA\u65F6\u95F4"),type:16},{controlId:"utime",controlName:_l("\u6700\u8FD1\u4FEE\u6539\u65F6\u95F4"),type:16}].concat(m);return W.map(function(u){return ie().find(P,function(l){return l.controlId===u})})}},{key:"url",get:function(){var i=this,m=this.state.coverError,v=this.props.view.coverType,W=this.cover,P=v?76:120,u=W&&W.previewUrl?W.previewUrl.indexOf("imageView2")>-1?W.previewUrl.replace(/imageView2\/\d\/w\/\d+\/h\/\d+(\/q\/\d+)?/,"imageView2/1/w/"+P+"/h/"+P):W.previewUrl+"&imageView2/1/w/"+P+"/h/"+P:null;if(u&&!m){var l=new Image;l.onload=function(){},l.onerror=function(){i.setState({coverError:!0})},l.src=u}return u}}]),x}(V.Component),K=function(){var x=this;this.handleCoverClick=function(Q){var i=x.props,m=i.view,v=i.data,W=x.cover,P=void 0;try{P=JSON.parse(v[m.coverCid])}catch(u){return}x.previewAttachment(P,ie().findIndex(P,function(u){return u.fileID===W.fileID})||0),Q.stopPropagation()},this.handleChangeCheckbox=function(Q){var i=x.state.checked,m=x.props,v=m.appId,W=m.data,P=m.view,u=m.controls,l=ie().find(u,{controlId:P.advancedSetting.checkradioid}),T=!i;j.Z.updateWorksheetRow({appId:v,rowId:W.rowid,viewId:P.viewId,worksheetId:P.worksheetId,newOldControl:[{controlId:l.controlId,controlName:l.controlName,type:l.type,value:T?"1":"0"}]}).then(function(G){x.setState({checked:T})})},this.checkedCurrentRow=function(Q,i){Q.stopPropagation();var m=x.props,v=m.changeBatchOptData,W=m.batchOptCheckedData,P=W?[].concat((0,ce.Z)(W)):[];W.includes(i.rowid)?v(P.filter(function(u){return u!==i.rowid})):(P.push(i.rowid),v(P))}},w)},25758:(lt,Te,t)=>{"use strict";if(t.d(Te,{uy:()=>X,Kc:()=>B,ZP:()=>x}),t.j==7375)var ce=t(33867);var g=t(73818),p=t(96223),L=t.n(p),te=t(71371),R=t(13944),y=t.n(R),a=t(66814),r=t(91880),o=t.n(r),d=t(48388),Z=t(29914),H=t.n(Z),U=t(88239),f=t(85315),V=t(73221),C=t(25002),O=t.n(C),n=t(80426),s=t(59012),j=t.n(s),A=t(85105),S=t.n(A),I=t(99663),c=t(22600),q=t(49135),b=t(93196),k=t(67294),ee=t(50533),re=t(22010),ie=t(49227),le=t(83848),E=t(70039),w=t(94789),K=t.n(w),N=t(15577),F=t(96486),h=t.n(F),z=function(Q){(0,b.default)(i,Q);function i(m){(0,I.default)(this,i);var v=(0,q.default)(this,(i.__proto__||S()(i)).call(this,m));v.handleEndReached=function(){var l=v.props,T=l.sheetRowLoading,G=l.sheetView;!T&&G.isMore&&v.props.changePageIndex()},v.renderRow=function(l){var T=v.props,G=T.worksheetControls,D=T.base,M=T.view,se=T.worksheetInfo,ae=T.batchOptVisible,ne=T.batchOptCheckedData,de=T.sheetSwitchPermit;return k.createElement(j(),{size:"md"},k.createElement(ie.Z,{key:l.rowid,data:l,view:M,appId:D.appId,controls:G,allowAdd:se.allowAdd,batchOptVisible:ae,batchOptCheckedData:ne,changeBatchOptData:v.props.changeBatchOptData,sheetSwitchPermit:de,onClick:function(){var he=M.advancedSetting||{},fe=he.clicktype,Ee=he.clickcid;if(fe!=="2"){if(fe==="1"){var Y=l[Ee];RegExp.isURL(Y)&&window.open(Y);return}if(window.isMingDaoApp){var oe=v.props,ve=oe.appId,ue=oe.worksheetId,pe=oe.viewId;window.location.href="/mobile/record/"+D.appId+"/"+D.worksheetId+"/"+(D.viewId||M.viewId)+"/"+l.rowid;return}(0,N.Q9)()&&v.setState({previewRecordId:l.rowid}),(0,N.Ye)("worksheetRecord",D.worksheetId,{rowId:l.rowid})}}}))};var W=m.currentSheetRows,P=new(O()).DataSource({rowHasChanged:function(T,G){return T!==G}}),u=h().get(m,"view.viewType")===6&&h().get(m,"view.childType")===1&&!h().isEmpty(W)?[].concat((0,f.Z)(W[0])):W;return v.state={previewRecordId:void 0,dataSource:P.cloneWithRows((0,U.default)({},u))},v}return(0,c.default)(i,[{key:"componentWillReceiveProps",value:function(v){var W=h().get(v,"view"),P=W.childType,u=W.viewType;if(v.currentSheetRows.length!==this.props.currentSheetRows.length){var l=u===6&&P===1&&!h().isEmpty(v.currentSheetRows)?[].concat((0,f.Z)(v.currentSheetRows[0])):v.currentSheetRows;this.setState({dataSource:this.state.dataSource.cloneWithRows(l)})}if(v.batchOptCheckedData.length!==this.props.batchOptCheckedData){var T=v.currentSheetRows.filter(function(G,D){return u===6&&P===1?D===0:!0}).map(function(G){return(0,U.default)({check:v.batchOptCheckedData.includes(G.rowid)},G)});this.setState({dataSource:this.state.dataSource.cloneWithRows(T)})}}},{key:"render",value:function(){var v=this,W=this.state,P=W.dataSource,u=W.previewRecordId,l=this.props,T=l.currentSheetRows,G=l.sheetRowLoading,D=l.sheetView,M=l.base,se=l.view,ae=l.sheetSwitchPermit;return k.createElement(k.Fragment,null,k.createElement(O(),{className:"sheetRowsWrapper flex",dataSource:P,renderHeader:function(){return k.createElement(k.Fragment,null)},renderFooter:function(){return D.isMore?k.createElement(o(),{justify:"center"},G?k.createElement(H(),{animating:!0}):null):k.createElement("div",{className:"Height50 mBottom5"})},initialListSize:20,pageSize:20,scrollRenderAheadDistance:500,onEndReached:this.handleEndReached,onEndReachedThreshold:20,pullToRefresh:k.createElement(y(),{refreshing:G,onRefresh:function(){v.props.changePageIndex(1)}}),style:{height:"100%",overflow:"auto"},renderRow:this.renderRow}),k.createElement(E.RecordInfoModal,{className:"full",visible:!!u,appId:M.appId,worksheetId:M.worksheetId,viewId:M.viewId||se.viewId,rowId:u,sheetSwitchPermit:ae,onClose:function(){v.setState({previewRecordId:void 0})}}))}}]),i}(k.Component),X=function(i){return k.createElement(o(),{className:"withoutRows",direction:"column",justify:"center",align:"center"},k.createElement("img",{className:"img",src:K()}),k.createElement(L(),{size:"md"}),k.createElement("div",{className:"text"},i.text))},B=function(i){return k.createElement(o(),{className:"withoutRows",direction:"column",justify:"center",align:"center"},k.createElement(ce.Z,{icon:"search"}),k.createElement(L(),{size:"md"}),k.createElement("div",{className:"text"},i.text))};const x=(0,ee.$j)(function(Q){return{base:Q.mobile.base,worksheetInfo:Q.mobile.worksheetInfo,currentSheetRows:Q.mobile.currentSheetRows,worksheetControls:Q.mobile.worksheetControls,sheetRowLoading:Q.mobile.sheetRowLoading,sheetView:Q.mobile.sheetView,batchOptVisible:Q.mobile.batchOptVisible,batchOptCheckedData:Q.mobile.batchOptCheckedData,sheetSwitchPermit:Q.mobile.sheetSwitchPermit}},function(Q){return(0,re.DE)(h().pick(le,["changePageIndex","changeBatchOptData"]),Q)})(z)},83848:(lt,Te,t)=>{"use strict";t.r(Te),t.d(Te,{changeBatchOptData:()=>re,changeBatchOptVisible:()=>ee,changeMobielSheetLoading:()=>k,changeMobileGroupFilters:()=>b,changeMobileSheetRows:()=>V,changePageIndex:()=>O,changeSheetControls:()=>c,emptySheetControls:()=>I,emptySheetRows:()=>S,fetchSheetRows:()=>f,loadWorksheet:()=>H,resetSheetView:()=>A,unshiftSheetRow:()=>C,updateBase:()=>Z,updateClickChart:()=>le,updateCurrentView:()=>q,updateFilters:()=>s,updateFiltersGroup:()=>j,updateMobileViewPermission:()=>ie,updateQuickFilter:()=>n});var ce=t(88239),g=t(63239),p=t.n(g);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(91088);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(70973);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(15308);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(15577);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(89499);var o=t(96486),d=t.n(o),Z=function(w){return function(K,N){K({type:"MOBILE_UPDATE_BASE",base:w}),K({type:"WORKSHEET_UPDATE_BASE",base:w})}},H=function(w){return function(K,N){var F=N().mobile,h=F.base,z=F.appDetail,X=z.appSection,B=z.detail||{},x=B.appNaviStyle,Q=localStorage.getItem("currentNavWorksheetId"),i=Q&&localStorage.getItem("currentNavWorksheetInfo-"+Q)&&JSON.parse(localStorage.getItem("currentNavWorksheetInfo-"+Q));x===2&&i?(K({type:"WORKSHEET_INIT",value:i}),K({type:"WORKSHEET_PERMISSION_INIT",value:i.switches}),K({type:"MOBILE_WORK_SHEET_INFO",data:i}),K({type:"MOBILE_WORK_SHEET_UPDATE_LOADING",loading:!1})):K({type:"MOBILE_WORK_SHEET_UPDATE_LOADING",loading:!0}),L.Z.getWorksheetInfo({appId:h.appId,worksheetId:h.worksheetId,getTemplate:!0,getViews:!0,getSwitchPermit:!0}).then(function(m){if((d().get(window,"shareState.isPublicView")||d().get(window,"shareState.isPublicPage"))&&(m.allowAdd=!1),x===2){var v=d().flatten(X.map(function(l){return l.workSheetInfo.forEach(function(T){T.appSectionId=l.appSectionId}),l.workSheetInfo})).filter(function(l){return[1,3].includes(l.status)&&!l.navigateHide}).slice(0,4);v.forEach(function(l){l.workSheetId===m.worksheetId&&safeLocalStorageSetItem("currentNavWorksheetInfo-"+l.workSheetId,p()(m))})}var W=(0,a.T3)(h.appId,h.worksheetId),P=m.advancedSetting,u=P===void 0?{}:P;m.name=W.name||m.name,m.entityName=W.recordName||m.entityName,m.advancedSetting=(0,ce.default)({},u,{title:W.formTitle||u.title,sub:W.formSub||u.sub,continue:W.formContinue||u.continue}),m.views=m.views.map(function(l){return(0,ce.default)({},l,{name:(0,a.T3)(h.appId,l.viewId).name||l.name})}),m.template.controls=(0,r.zj)(h.appId,m.template.controls),K({type:"WORKSHEET_INIT",value:m}),K({type:"WORKSHEET_PERMISSION_INIT",value:m.switches}),K({type:"MOBILE_WORK_SHEET_INFO",data:m}),K({type:"MOBILE_SHEET_PERMISSION_INIT",value:m.switches}),K({type:"MOBILE_WORK_SHEET_UPDATE_LOADING",loading:!1})}),!w&&te.Z.getApp({appId:h.appId}).then(function(m){K({type:"UPDATE_APP_DETAIL",data:(0,ce.default)({},z,{appName:m.name,detail:(0,ce.default)({},z.detail,{webMobileDisplay:m.webMobileDisplay})})});var v=(0,R.le)(m.permissionType,m.isLock);K({type:"MOBILE_UPDATE_IS_CHARGE",value:v}),K({type:"MOBILE_APP_COLOR",value:m.iconColor})})}},U={},f=function(w){return function(K,N){var F=N().mobile,h=F.base,z=F.filters,X=F.sheetView,B=F.worksheetInfo,x=B===void 0?{}:B,Q=F.quickFilter,i=F.sheetFiltersGroup,m=F.mobileNavGroupFilters,v=F.sheetRowLoading,W=h.appId,P=h.worksheetId,u=h.viewId,l=h.groupId,T=h.maxCount,G=x.views,D=G===void 0?[]:G;D=D.filter(function(oe){return d().get(oe,"advancedSetting.showhide")!=="hide"&&d().get(oe,"advancedSetting.showhide")!=="spc&happ"});var M=d().get(D[0],"viewId"),se=d().some(D,function(oe){return oe.viewId===u});if(!se&&location.pathname.indexOf("recordList")>-1){Z({viewId:M}),safeLocalStorageSetItem("mobileViewSheet-"+P,M),window.mobileNavigateTo("/mobile/recordList/"+W+"/"+l+"/"+P+"/"+M,!0);return}var ae=z.keyWords,ne=(0,a.A_)(),de=ne.chartId,Ce=X.pageIndex,he=Y?(0,ce.default)({},Y):{},fe=20;if(P){K({type:"MOBILE_FETCH_SHEETROW_START"}),T&&(Ce=1,fe=T);var Ee=U[u||M];Ee&&Ee.abort&&Ee.abort();var Y=(0,r.zG)((0,ce.default)({worksheetId:P,appId:W,searchType:1,pageSize:fe,pageIndex:Ce,status:1,viewId:u||M,keyWords:ae,filterControls:[],sortControls:[],reportId:de||void 0,filtersGroup:i,fastFilters:Q.map(function(oe){return d().pick(oe,["controlId","dataType","spliceType","filterType","dateRange","value","values","minValue","maxValue"])}),navGroupFilters:m},he));U[P]=L.Z.getFilterRows(Y),U[P].then(function(oe){var ve=oe&&oe.data?oe.data:[],ue=Ce===1?"MOBILE_CHANGE_SHEET_ROWS":"MOBILE_ADD_SHEET_ROWS",pe=T?!1:ve.length===fe;K({type:ue,data:ve}),K({type:"CHANGE_GALLERY_VIEW_DATA",list:ve}),K(c()),K({type:"MOBILE_UPDATE_VIEW_CODE",value:oe.resultCode}),K({type:"MOBILE_UPDATE_SHEET_VIEW",sheetView:{isMore:pe,count:oe.count}}),K({type:"MOBILE_FETCH_SHEETROW_SUCCESS"}),U[P]=void 0})}}},V=function(w){return function(K,N){K({type:"MOBILE_CHANGE_SHEET_ROWS",data:w})}},C=function(w){return function(K,N){K({type:"MOBILE_UNSHIFT_SHEET_ROWS",data:w})}},O=function(w){return function(K,N){var F=N().mobile.sheetView,h=w||F.pageIndex+1;K({type:"MOBILE_UPDATE_SHEET_VIEW",sheetView:{pageIndex:h}}),K(f())}},n=function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return function(K,N){var F=N().mobile,h=F.base,z=h===void 0?{}:h,X=F.worksheetInfo,B=X===void 0?{}:X,x=d().find(B.views||[],function(Q){return z.viewId===Q.viewId})||{};K({type:"MOBILE_UPDATE_QUICK_FILTER",filter:w}),K({type:"MOBILE_UPDATE_SHEET_VIEW",sheetView:{pageIndex:1}}),x.viewType===7?(K({type:"WORKSHEET_UPDATE_QUICK_FILTER",filter:w}),K((0,y.refreshSheet)(x,{resetPageIndex:!0}))):K(f())}},s=function(w){return function(K,N){var F=N().mobile,h=F.base,z=h===void 0?{}:h,X=F.worksheetInfo,B=X===void 0?{}:X,x=d().find(B.views||[],function(Q){return z.viewId===Q.viewId})||{};K({type:"MOBILE_UPDATE_FILTERS",filters:w}),x.viewType===7&&(K({type:"WORKSHEET_UPDATE_FILTERS",filters:w}),K((0,y.refreshSheet)(x,{changeFilters:!0})))}},j=function(w){return function(K,N){K({type:"MOBILE_UPDATE_FILTERS_GROUP",filter:w}),K({type:"MOBILE_UPDATE_SHEET_VIEW",sheetView:{pageIndex:1}}),K(f())}},A=function(){return function(w,K){w({type:"MOBILE_UPDATE_SHEET_VIEW",sheetView:{pageIndex:1}}),w({type:"MOBILE_UPDATE_FILTERS",filters:{keyWords:"",quickFilterKeyWords:""}}),w({type:"MOBILE_UPDATE_QUICK_FILTER",filter:[]}),w(f())}},S=function(){return function(w,K){V([]),w({type:"MOBILE_WORK_SHEET_INFO",data:{}})}},I=function(){return function(w,K){w({type:"MOBILE_CHANGE_SHEET_CONTROLS",value:[]}),w({type:"MOBILE_UPDATE_QUICK_FILTER",filter:[]}),w({type:"MOBILE_WORK_SHEET_UPDATE_LOADING",loading:!0})}},c=function(){return function(w,K){var N=K().mobile,F=N.base,h=N.worksheetInfo,z=h.views,X=h.template,B=F.viewId,x=d().isEmpty(z)?{}:z[0],Q=B?d().find(z,{viewId:B})||{}:x,i=(X&&X.controls||[]).filter(function(m){return m.attribute===1||d().isEmpty(Q)?!0:!Q.controls.includes(m.controlId)});w({type:"MOBILE_WORK_SHEET_CONTROLS",value:i})}},q=function(w){var K=w.currentView,N=w.sortCid,F=w.sortType;return function(h,z){var X=z().mobile.worksheetInfo,B=X.views,x={appId:X.appId,viewId:K.viewId,worksheetId:K.worksheetId};L.Z.saveWorksheetView((0,ce.default)({},x,{name:K.name,filters:K.filters,controls:K.controls,sortCid:N,sortType:F})).then(function(Q){X.views=B.map(function(i){return i.viewId===K.viewId?Q:i}),h(f(x))})}},b=function(w){return function(K,N){K({type:"CHANGE_MOBILE_GROUPFILTERS",data:w})}},k=function(w){return function(K,N){K({type:"MOBILE_WORK_SHEET_UPDATE_LOADING",loading:w})}},ee=function(w){return function(K,N){K({type:"CHABGE_MOBILE_BATCHOPT_VISIBLE",flag:w})}},re=function(w){return function(K,N){K({type:"CAHNGE_BATCHOPT_CHECKED",data:w})}},ie=function(w){return function(K,N){var F=w.viewId,h=w.appId,z=w.worksheetId;L.Z.getViewPermission({viewId:F,appId:h,worksheetId:z}).then(function(X){X.view&&K({type:"UPDATE_MOBILEVIEW_PERMISSION",data:X.view})})}},le=function(w){return function(K,N){K({type:"UPDATE_CLICK_CHART",flag:w})}}},22166:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>E});var ce=t(88239),g=t(73818),p=t(96223),L=t.n(p),te=t(66814),R=t(91880),y=t.n(R),a=t(48388),r=t(29914),o=t.n(r),d=t(85105),Z=t.n(d),H=t(99663),U=t(22600),f=t(49135),V=t(93196),C=t(67294),O=t(50533),n=t(93967),s=t.n(n),j=t(67329),A=t(22010),S=t(94550),I=t(70039),c=t(25758),q=t(15577),b=t(96486),k=t.n(b),ee,re,ie,le=(re=ee=function(w){(0,V.default)(K,w);function K(N){(0,H.default)(this,K);var F=(0,f.default)(this,(K.__proto__||Z()(K)).call(this,N));return ie.call(F),F.state={previewRecordId:void 0},F}return(0,U.default)(K,[{key:"componentDidMount",value:function(){this.loadData(this.props)}},{key:"componentWillReceiveProps",value:function(F){this.props.controlId!==F.controlId&&(F.reset(),this.loadData(F))}},{key:"componentWillUnmount",value:function(){this.props.reset()}},{key:"render",value:function(){var F=this,h=this.props,z=h.rowInfo,X=h.controlId,B=h.relationRow,x=h.relationRows,Q=h.loadParams,i=h.actionParams,m=h.permissionInfo,v=Q.loading,W=Q.pageIndex,P=Q.isMore;if(v&&W===1)return C.createElement(y(),{justify:"center",align:"center",className:"h100"},C.createElement(o(),{size:"large"}));var u=this.state.previewRecordId,l=i.isEdit,T=B.worksheet,G=k().find(z.templateControls,{controlId:X})||{};return C.createElement("div",{className:s()("sheetRelationRow flex",{editRowWrapper:l})},x.length?C.createElement(C.Fragment,null,C.createElement(L(),{className:"mTop1"}),x.map(function(D){return F.renderRow(D)}),P&&C.createElement(y(),{justify:"center"},v?C.createElement(o(),{animating:!0}):null),C.createElement(L(),null),C.createElement(I.RecordInfoModal,{className:"full",visible:!!u,appId:T.appId,worksheetId:T.worksheetId,viewId:k().get(G,"advancedSetting.openview")||G.viewId,rowId:u,isSubList:k().get(m,"isSubList"),editable:k().get(m,"controlPermission.editable"),onClose:function(){F.setState({previewRecordId:void 0})}})):C.createElement("div",{className:"withoutRowsWrapper flexColumn valignWrapper h100"},C.createElement(c.uy,{text:_l("\u6682\u65E0\u8BB0\u5F55")})))}}]),K}(C.Component),ie=function(){var K=this;this.loadData=function(N){var F=N.controlId,h=N.control,z=N.instanceId,X=N.workId,B=N.worksheetId,x=N.rowId,Q=N.getType,i=N.data,m=null;if(z&&X)m={instanceId:z,workId:X,rowId:x,worksheetId:B,controlId:F};else{var v=N.viewId,W=N.appId;m={viewId:v,appId:W,worksheetId:B,rowId:x,controlId:F}}N.updateBase(m),N.loadRow((0,ce.default)({},h,{formData:i}),Q)},this.handleSelect=function(N,F){var h=K.props,z=h.relationRow,X=h.actionParams,B=h.updateActionParams,x=h.permissionInfo,Q=z.worksheet,i=X.isEdit,m=X.selectedRecordIds;i?B({selectedRecordIds:F?k().uniqBy(m.concat(N.rowid)):m.filter(function(v){return v!==N.rowid})}):x.allowLink&&((0,q.Ye)("worksheetRecord",Q.worksheetId,{rowId:N.rowid}),K.setState({previewRecordId:N.rowid}))},this.renderRow=function(N){var F=K.props,h=F.relationRow,z=F.actionParams,X=F.permissionInfo,B=F.worksheetId,x=z.showControls,Q=z.selectedRecordIds,i=z.coverCid,m=h.template.controls,v=!!k().find(Q,function(W){return W===N.rowid});return C.createElement("div",{className:"mLeft10 mRight10",key:N.rowid},C.createElement(S.Z,{from:3,selected:v,controls:m,coverCid:i,showControls:x,worksheetId:N.wsid,data:N,onClick:function(){return K.handleSelect(N,!v)},disabledLink:!X.allowLink}))}},re);const E=(0,O.$j)(function(w){return(0,ce.default)({},k().pick(w.mobile,["rowInfo","relationRow","relationRows","loadParams","actionParams","permissionInfo"]))},function(w){return(0,A.DE)(k().pick(j,["updateBase","loadRow","updateActionParams","reset"]),w)})(le)},67329:(lt,Te,t)=>{"use strict";t.r(Te),t.d(Te,{loadRow:()=>f,loadRowRelationRows:()=>V,reset:()=>s,updateActionParams:()=>n,updateBase:()=>U,updatePageIndex:()=>O,updateRelationRows:()=>C});var ce=t(94942),g=t.n(ce),p=t(88239),L=t(36803),te=t(12424);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(24607);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(91877);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(26358);var o=t(96486),d=t.n(o),Z=/^(1887|7596|7798)$/.test(t.j)?null:void 0,H=function(A,S,I){var c=I.allowAdd,q=S.allowEdit,b=0,k={visible:(0,y.kM)(A,3).visible,editable:(0,y.kM)(A,3).editable&&q},ee=A.enumDefault2,re=A.strDefault,ie=A.controlPermissions,le=ie===void 0?"111":ie,E=A.advancedSetting,w=re.split("").map(function(i){return!!+i}),K=(0,te.Z)(w,3),N=K[2],F=A.type===34,h=typeof E.allowcancel>"u"?!0:E.allowcancel==="1",z=E.allowlink!=="0",X=F?q&&k.editable&&ee!==1&&ee!==11&&!N:q&&k.editable&&c&&ee!==1&&ee!==11,B=!F&&k.editable&&ee!==10&&ee!==11&&q,x=k.editable&&q&&(c||F),Q=(0,a.g)();return{allowRemoveRelation:h,allowLink:z,isCreate:X,isRelevance:B,hasEdit:x,isSubList:F,activeRelateSheetControl:A,controlPermission:k,onlyRelateByScanCode:N&&Q}},U=function(A){return function(S,I){S({type:"MOBILE_UPDATE_BASE",base:A})}},f=function(A,S){return function(I,c){var q=c().mobile,b=q.base,k=q.rowInfo,ee=b.instanceId,re=b.workId,ie=b.worksheetId,le=b.rowId,E={};if(ee&&re)E.instanceId=ee,E.workId=re,E.rowId=le,E.worksheetId=ie,E.getType=S||9;else{var w=b.appId,K=b.viewId,N=b.controlId;E.controlId=N,E.getType=S||1,E.checkView=!0,E.getTemplate=!0,E.appId=w,E.worksheetId=ie,E.viewId=K,E.rowId=le}d().isEmpty(k)?R.Z.getRowDetail(E).then(function(F){I({type:"MOBILE_RELATION_ROW_INFO",data:F}),I(V(A,S))}):I(V(A))}},V=function(A,S){return function(){var I=(0,L.Z)(g().mark(function c(q,b){var k,ee,re,ie,le,E,w,K,N,F,h,z,X,B,x,Q,i,m;return g().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(k=b().mobile,ee=k.base,re=k.loadParams,ie=k.relationRows,le=k.rowInfo,E=re.pageIndex,w=ee.instanceId,K=ee.rowId,N=ee.worksheetId,F=ee.controlId,h=10,z={controlId:F,rowId:K,worksheetId:N,getType:S},X=A||d().find(le.templateControls,{controlId:F}),q({type:"MOBILE_RELATION_LOAD_PARAMS",data:{loading:!0}}),d().isEmpty(w)&&(B=ee.appId,x=ee.viewId,z.appId=B,z.viewId=x),X.type!==51){W.next=17;break}return Q=[],i=void 0,W.next=13,R.Z.getWorksheetInfo({worksheetId:X.dataSource,getTemplate:!0,relationWorksheetId:N});case 13:i=W.sent,Q=d().get(i,"template.controls")||[],m=(0,r.zK)({control:(0,p.default)({},X,{relationControls:Q,recordId:K}),formData:X.formData||le.templateControls,filterKey:"resultfilters"}),z.filterControls=m||[];case 17:R.Z.getRowRelationRows((0,p.default)({},z,{pageIndex:E,pageSize:h,getWorksheet:E===1,getRules:E===1})).then(function(P){if(E===1){var u=P.template.controls,l=d().find(u,{attribute:1}),T=u.filter(function(G){return G.type===14});q({type:"MOBILE_RELATION_ROW",data:d().pick(P,["template","worksheet","count"])}),q({type:"MOBILE_PERMISSION_INFO",data:H(X,le,P.worksheet)}),q({type:"MOBILE_RELATION_ACTION_PARAMS",data:{showControls:X.showControls.filter(function(G){return l.controlId!==G}).slice(0,3),coverCid:X.coverCid||null}})}q({type:"MOBILE_RELATION_ROWS",data:ie.concat(P.data)}),q({type:"MOBILE_RELATION_LOAD_PARAMS",data:{pageIndex:E,loading:!1,isMore:P.data.length===h}})});case 18:case"end":return W.stop()}},c,Z)}));return function(c,q){return I.apply(this,arguments)}}()},C=function(A,S){return function(I,c){var q=c().mobile.relationRow;I({type:"MOBILE_RELATION_ROWS",data:A}),I({type:"MOBILE_RELATION_ROW",data:{count:q.count+S}})}},O=function(A){return function(S,I){S({type:"MOBILE_RELATION_LOAD_PARAMS",data:{pageIndex:A}}),S(V())}},n=function(A){return function(S,I){S({type:"MOBILE_RELATION_ACTION_PARAMS",data:A})}},s=function(){return function(A,S){A({type:"MOBILE_RELATION_LOAD_PARAMS",data:{pageIndex:1,loading:!0,isMore:!0}}),A({type:"MOBILE_RELATION_ACTION_PARAMS",data:{isEdit:!1,selectedRecordIds:[]}}),A({type:"MOBILE_RELATION_ROW_INFO",data:{}}),A({type:"MOBILE_RELATION_ROWS",data:[]}),A({type:"MOBILE_RELATION_ROW",data:{count:0}})}}},44950:(lt,Te,t)=>{"use strict";t.d(Te,{n:()=>a});var ce=t(20148),g=t.n(ce),p=t(60385),L=t.n(p),te=t(86735),R=t(71893),y=(0,te.Z)([`
  height: 95% !important;
  overflow: hidden;
  border-top-right-radius: 15px;
  border-top-left-radius: 15px;

  .am-modal-body {
    text-align: left;
  }
  &.full {
    height: 100% !important;
    border-top-right-radius: 0;
    border-top-left-radius: 0;
  }
`],[`
  height: 95% !important;
  overflow: hidden;
  border-top-right-radius: 15px;
  border-top-left-radius: 15px;

  .am-modal-body {
    text-align: left;
  }
  &.full {
    height: 100% !important;
    border-top-right-radius: 0;
    border-top-left-radius: 0;
  }
`]),a=(0,R.ZP)(L())(y)},28968:(lt,Te,t)=>{"use strict";t.d(Te,{D:()=>z,Z:()=>x});var ce=t(48388),g=t.n(ce),p=t(29914),L=t.n(p),te=t(66814),R=t.n(te),y=t(91880),a=t.n(y),r=t(20148),o=t.n(r),d=t(60385),Z=t.n(d),H=t(85105),U=t.n(H),f=t(99663),V=t(22600),C=t(49135),O=t(93196),n=t(63627),s=t.n(n),j=t(81982),A=t.n(j),S=t(86735),I=t(67294),c=t(71893),q=t(91088),b=t(49365),k=t(27456),ee=t.n(k),re=t(51194),ie=t.n(re),le=t(88338),E=t.n(le),w=t(50043),K=t(15742),N=(0,S.Z)([`
  height: 38px !important;
  line-height: 38px !important;
  border-radius: 25px !important;
  &:hover {
    color: #fff !important;
  }
`],[`
  height: 38px !important;
  line-height: 38px !important;
  border-radius: 25px !important;
  &:hover {
    color: #fff !important;
  }
`]),F={1:{src:ie(),text:_l("\u8BF7\u524D\u5F80Web\u7AEF\u521B\u5EFA\u5DE5\u4F5C\u8868\uFF0C\u5F00\u59CB\u6784\u5EFA\u4F60\u7684\u5E94\u7528")},2:{src:ee(),text:_l("\u5E94\u7528\u4E0D\u5B58\u5728")},4:{src:E(),text:_l("\u4F60\u8FD8\u4E0D\u662F\u5E94\u7528\u6210\u5458\uFF0C\u65E0\u6743\u8BBF\u95EE\u6B64\u5E94\u7528")},5:{src:E(),text:_l("\u672A\u5206\u914D\u4EFB\u4F55\u5DE5\u4F5C\u8868\uFF0C\u8BF7\u8054\u7CFB\u6B64\u5E94\u7528\u7684\u7BA1\u7406\u5458")}},h=(0,c.ZP)(A())(N),z=function(Q){(0,O.default)(i,Q);function i(m){(0,f.default)(this,i);var v=(0,C.default)(this,(i.__proto__||U()(i)).call(this,m));return v.handleAddAppApply=function(){var W=v.props.appId;v.setState({isAppActioning:!0}),b.Z.addAppApply({appId:W,remark:""}).then(function(P){v.setState({isAppActioning:!1}),P&&Z().alert(_l("\u7533\u8BF7\u5DF2\u63D0\u4EA4"),"",[{text:_l("\u786E\u5B9A"),onPress:function(){}}])})},v.state={isAppActioning:!1},v}return(0,V.default)(i,[{key:"render",value:function(){var v=this.props.appStatus,W=this.state.isAppActioning,P=F[v]||F[2];return I.createElement(a(),{align:"center",justify:"between",className:"WhiteBG TxtCenter overflowHidden h100"},I.createElement(a().Item,null,I.createElement("img",{src:P.src,className:"InlineBlock",width:"110"}),I.createElement("br",null),I.createElement("p",{className:"mTop25 mBottom25 TxtCenter Gray Font17 hintInfo"},P.text),v===4&&I.createElement("div",null,I.createElement(h,{inline:!0,loading:W,type:"primary",size:"middle",className:"Font16",onClick:this.handleAddAppApply},_l("\u7533\u8BF7\u52A0\u5165")))))}}]),i}(I.Component),X=function(i){var m=function(v){(0,O.default)(W,v);function W(P){(0,f.default)(this,W);var u=(0,C.default)(this,(W.__proto__||U()(W)).call(this,P));return u.getApp=function(l){q.Z.getApp({appId:l,getLang:!0}).then(function(T){var G=T.langInfo,D=T.fixAccount,M=T.fixRemark,se=T.fixed,ae=T.webMobileDisplay,ne=T.permissionType,de=ne>=K.lt.ADMIN_ROLE;u.setState({fixedData:{fixAccount:D,fixRemark:M,fixed:se&&!de,webMobileDisplay:ae}}),G&&G.appLangId&&G.version!==window["langVersion-"+l]?b.Z.getAppLangDetail({appId:l,appLangId:G.appLangId}).then(function(Ce){window["langData-"+l]=Ce.items,window["langVersion-"+l]=G.version,u.setState({loading:!1})}):u.setState({loading:!1})})},u.state={loading:!0,appStatus:1,fixedData:{}},u}return(0,V.default)(W,[{key:"componentDidMount",value:function(){var u=this,l=this.props.match,T=l.params,G=l.path,D=T.appId;if(["undefined","null"].includes(D)||_.get(window,"shareState.shareId")){this.setState({loading:!1});return}G.includes("recordList")&&q.Z.getPageInfo({appId:D,id:T.worksheetId,sectionId:T.groupId}).then(function(M){var se=M.wsType;se===1&&window.mobileNavigateTo("/mobile/customPage/"+D+"/"+T.groupId+"/"+T.worksheetId,!0)}),q.Z.checkApp({appId:D},{silent:!0}).then(function(M){u.getApp(D),u.setState({appStatus:M})}).catch(function(M){u.setState({appStatus:M.errorCode,loading:!1})})}},{key:"render",value:function(){var u=this.props.match.params,l=this.state,T=l.loading,G=l.appStatus,D=l.fixedData;if(T)return I.createElement(a(),{justify:"center",align:"center",className:"h100"},I.createElement(L(),{size:"large"}));if(D.fixed||D.webMobileDisplay){var M=D.fixAccount,se=D.fixRemark,ae=D.webMobileDisplay;return I.createElement(w.Z,{fixAccount:M,fixRemark:se,isNoPublish:ae})}return G!==1?I.createElement(z,{appId:u.appId,appStatus:G}):I.createElement(i,this.props)}}]),W}(I.Component);return m},B=function(i){return function(m){return X(m)}};const x=B(function(Q){return I.createElement(I.Fragment,null,Q.children)})},75915:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>n});var ce=t(33867),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(66814),r=t.n(a),o=t(91880),d=t.n(o),Z=t(86735),H=t(67294),U=t(93967),f=t.n(U),V=t(71893),C=(0,Z.Z)([`
  display: flex;
  color: #2196f3;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background-color: #fff;
  position: fixed;
  right: 20px;
  bottom: 20px;
  z-index: 99;
  &.low {
    bottom: 20px;
  }
  .icon {
    font-size: 22px;
    margin-top: -2px;
  }
`],[`
  display: flex;
  color: #2196f3;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background-color: #fff;
  position: fixed;
  right: 20px;
  bottom: 20px;
  z-index: 99;
  &.low {
    bottom: 20px;
  }
  .icon {
    font-size: 22px;
    margin-top: -2px;
  }
`]),O=(0,V.ZP)(d())(C),n=function(s){(0,y.default)(j,s);function j(A){return(0,L.default)(this,j),(0,R.default)(this,(j.__proto__||p()(j)).call(this,A))}return(0,te.default)(j,[{key:"renderContent",value:function(){var S=this.props,I=S.onClick,c=S.className,q=S.style,b=S.icon;return H.createElement(O,{justify:"center",align:"center",className:f()("card",c),style:q,onClick:I},H.createElement(ce.Z,{icon:b||"back"}))}},{key:"render",value:function(){return window.isWxWork?null:this.renderContent()}}]),j}(H.Component)},88045:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>V});var ce=t(33867),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(86735),r=t(67294),o=t(15577),d=t(71893),Z=t(93967),H=t.n(Z),U=(0,a.Z)([`
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: left;
  border-radius: 18px;
  padding: 0 10px;
  box-sizing: border-box;
  border: `,`;
  color: `,`;
  background: `,`;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  .opcIcon {
    color: rgba(0, 0, 0, 0.3) !important;
  }
`],[`
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: left;
  border-radius: 18px;
  padding: 0 10px;
  box-sizing: border-box;
  border: `,`;
  color: `,`;
  background: `,`;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  .opcIcon {
    color: rgba(0, 0, 0, 0.3) !important;
  }
`]),f=d.ZP.div(U,function(C){var O=C.btn;return!O.disabled&&(!O.color||O.color==="transparent")?"1px solid #ddd":"none"},function(C){var O=C.btn;return O.color&&O.color!=="transparent"?O.color:"#333"},function(C){var O=C.btn;return O.color&&O.color!=="transparent"?(0,o.a7)(O.color,.05):"#fff"}),V=function(C){(0,y.default)(O,C);function O(n){(0,L.default)(this,O);var s=(0,R.default)(this,(O.__proto__||p()(O)).call(this,n));return s.state={},s}return(0,te.default)(O,[{key:"render",value:function(){var s=this.props,j=s.classNames,A=s.customBtns,S=A===void 0?[]:A,I=s.isSlice,c=s.handleClick,q=c===void 0?function(){}:c,b=s.btnDisable,k=b===void 0?{}:b,ee=s.isBatch,re=I?S.slice(0,2):S;return re.filter(function(ie){return ee?!ie.disabled:!0}).map(function(ie){return r.createElement(f,{className:H()(""+j,{disabled:k[ie.btnId]||ie.disabled}),btn:ie,onClick:function(){k[ie.btnId]||ie.disabled||q(ie)}},r.createElement(ce.Z,{icon:ie.icon||"custom_actions",className:H()("mRight6 Font15",{opcIcon:!ie.icon&&(!ie.color||ie.color==="transparent")||ie.disabled})}),r.createElement("span",{className:H()("breakAll overflow_ellipsis Font13",{Gray_bd:ie.disabled})},ie.name))})}}]),O}(r.Component)},6128:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>Ve});var ce=t(54208),g=t(33867),p=t(85315),L=t(63239),te=t.n(L),R=t(94942),y=t.n(R),a=t(36803),r=t(19373),o=t(11187),d=t(88106),Z=t(20148),H=t(60385),U=t.n(H),f=t(46593),V=t.n(f),C=t(88239),O=t(85105),n=t.n(O),s=t(99663),j=t(22600),A=t(49135),S=t(93196),I=t(67294),c=t(93967),q=t.n(c),b=t(15577),k=t(45231),ee=t(88349),re=t(42185),ie=t(72557),le=t(12424),E=t(86735),w=t(1952),K=t(71893),N=(0,E.Z)([`
  .am-modal-content {
    border-top-right-radius: 15px;
    border-top-left-radius: 15px;
    padding: 0;
    padding-top: 10px;
  }
  .am-modal-body {
    text-align: left;
    overflow: auto;
    max-height: calc(100vh - 30px);
    padding: 10px 20px 10px;
  }
  .ming.Textarea {
    border: 1px solid #e6e6e6;
  }
  .ming.Textarea:hover:not(:disabled),
  .ming.Textarea:focus,
  .ant-input-affix-wrapper:focus,
  .ant-input-affix-wrapper-focused,
  .ant-input-affix-wrapper:not(.ant-input-affix-wrapper-disabled):hover {
    border: 1px solid #e6e6e6;
    box-shadow: none !important;
  }
  .ant-input-password-icon,
  .ant-input-password-icon:hover {
    color: #9e9e9e !important;
  }
  .actionsWrap {
    margin-bottom: 10px;
    .ming.Button {
      height: 36px;
      line-height: 36px;
      flex: 1;
      border-radius: 18px;
    }
    .ming.Button--link {
      border: 1px solid #ddd;
    }
    .ming.Button--primary {
      background: #2196f3;
    }
    .ming.Button--primary:hover {
      background: #2196f3;
    }
  }
`],[`
  .am-modal-content {
    border-top-right-radius: 15px;
    border-top-left-radius: 15px;
    padding: 0;
    padding-top: 10px;
  }
  .am-modal-body {
    text-align: left;
    overflow: auto;
    max-height: calc(100vh - 30px);
    padding: 10px 20px 10px;
  }
  .ming.Textarea {
    border: 1px solid #e6e6e6;
  }
  .ming.Textarea:hover:not(:disabled),
  .ming.Textarea:focus,
  .ant-input-affix-wrapper:focus,
  .ant-input-affix-wrapper-focused,
  .ant-input-affix-wrapper:not(.ant-input-affix-wrapper-disabled):hover {
    border: 1px solid #e6e6e6;
    box-shadow: none !important;
  }
  .ant-input-password-icon,
  .ant-input-password-icon:hover {
    color: #9e9e9e !important;
  }
  .actionsWrap {
    margin-bottom: 10px;
    .ming.Button {
      height: 36px;
      line-height: 36px;
      flex: 1;
      border-radius: 18px;
    }
    .ming.Button--link {
      border: 1px solid #ddd;
    }
    .ming.Button--primary {
      background: #2196f3;
    }
    .ming.Button--primary:hover {
      background: #2196f3;
    }
  }
`]),F=(0,K.ZP)(U())(N);function h(it){var Ge=it.okText,pt=it.cancelText,ot=it.onOk,vt=it.onClose,At=it.className,yt=it.visible,st=it.removeNoneVerification,St=(0,I.useState)(""),Qe=(0,le.Z)(St,2),Xe=Qe[0],$e=Qe[1],Ke=(0,I.useState)(!1),Ue=(0,le.Z)(Ke,2),He=Ue[0],ze=Ue[1];return I.createElement(F,{popup:!0,animationType:"slide-up",className:At,onClose:vt,visible:yt},I.createElement(ie.Z,{className:"mBottom25",showSubTitle:!0,autoFocus:!0,isRequired:!0,allowNoVerify:!st,onChange:function(Et){var ft=Et.password,qe=Et.isNoneVerification;$e(ft),ze(qe)}}),I.createElement("div",{className:"actionsWrap flexRow"},I.createElement(re.ZP,{type:"link",onClick:vt,className:"Gray_75 Font14 mRight10"},pt||_l("\u53D6\u6D88")),I.createElement(re.ZP,{type:"primary",onClick:function(){if(!Xe||!Xe.trim()){alert(_l("\u8BF7\u8F93\u5165\u5BC6\u7801"),3);return}(0,b.Gv)({password:Xe,isNoneVerification:He,success:function(){ot(),vt()}})},className:"Font14"},Ge||_l("\u786E\u8BA4"))))}h.confirm=function(it){return(0,w.Z)(h,it)};var z=t(80426),X=t(59012),B=t.n(X),x=t(63627),Q=t(81982),i=t.n(Q),m=t(7145),v=t.n(m),W=t(24538),P=t(36612),u=t(24607),l=t(15498),T=t(96486),G=t.n(T),D,M=(0,E.Z)([`
  display: flex;
  flex-direction: column;
  text-align: left;
  height: 100%;
  .customFieldsWrapper {
    height: 0;
    overflow-y: auto;
    overflow-x: hidden;
  }
  .customFieldsContainer {
    padding: 0 20px;
  }
  .btnsWrapper {
    padding: 7px 10px;
    border-top: 1px solid #f5f5f5;
    background-color: #fff;
    a {
      text-decoration: none;
    }
    .edit {
      color: #2196f3;
    }
    .am-button {
      height: 36px;
      line-height: 36px;
    }
    .am-button-primary:hover {
      color: #fff;
    }
    .am-button,
    .am-button::before,
    .am-button-active::before {
      border-radius: 50px;
    }
  }
`],[`
  display: flex;
  flex-direction: column;
  text-align: left;
  height: 100%;
  .customFieldsWrapper {
    height: 0;
    overflow-y: auto;
    overflow-x: hidden;
  }
  .customFieldsContainer {
    padding: 0 20px;
  }
  .btnsWrapper {
    padding: 7px 10px;
    border-top: 1px solid #f5f5f5;
    background-color: #fff;
    a {
      text-decoration: none;
    }
    .edit {
      color: #2196f3;
    }
    .am-button {
      height: 36px;
      line-height: 36px;
    }
    .am-button-primary:hover {
      color: #fff;
    }
    .am-button,
    .am-button::before,
    .am-button-active::before {
      border-radius: 50px;
    }
  }
`]),se=(0,E.Z)([`
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  background: rgba(255, 255, 255, 0.8);
  z-index: 2;
`],[`
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  background: rgba(255, 255, 255, 0.8);
  z-index: 2;
`]),ae=K.ZP.div(M),ne=K.ZP.div(se),de=(0,l.Z)(D=function(it){(0,S.default)(Ge,it);function Ge(pt){var ot=this;(0,s.default)(this,Ge);var vt=(0,A.default)(this,(Ge.__proto__||n()(Ge)).call(this,pt));vt.cellObjs={},vt.customwidget=I.createRef(),vt.formcon=I.createRef(),vt.handleSave=function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}vt.setState({submitLoading:!0}),vt.customwidget.current.submitFormData()},vt.onSave=function(){var st=(0,a.Z)(y().mark(function St(Qe,Xe){var $e=Xe.data,Ke=Xe.updateControlIds,Ue,He,ze,gt,Et,ft;return y().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:if(!Qe){nt.next=3;break}return vt.setState({submitLoading:!1}),nt.abrupt("return");case 3:if(Ue=vt.props,He=Ue.onSubmit,ze=Ue.writeControls,gt=Ue.customButtonConfirm,Et=void 0,ft=$e.filter(function(Ze){return G().find(ze,function(et){return et.controlId===Ze.controlId})}),!Et){nt.next=10;break}return alert(_l("\u8BF7\u6B63\u786E\u586B\u5199\u8BB0\u5F55"),3),vt.setState({submitLoading:!1}),nt.abrupt("return");case 10:if(!gt){nt.next=21;break}return nt.prev=11,nt.next=14,gt();case 14:vt.setState({submitLoading:!1}),nt.next=21;break;case 17:return nt.prev=17,nt.t0=nt.catch(11),vt.setState({submitLoading:!1}),nt.abrupt("return");case 21:vt.setState({isSubmitting:!0,submitLoading:!1}),Ke=G().uniq(Ke.concat(ze.filter(function(Ze){return Ze.defsource}).map(function(Ze){return Ze.controlId}))),He(ft.filter(function(Ze){return G().find(Ke,function(et){return et===Ze.controlId})}).map(function(Ze){return(0,u.jz)(Ze,{hasDefaultRelateRecordTableControls:vt.hasDefaultRelateRecordTableControls})}),(0,C.default)({},G().pick(vt.props,["appId","projectId","worksheetId","viewId","recordId"])),vt.customwidget.current,function(Ze){Ze&&vt.setState({isSubmitting:!1,submitLoading:!1})});case 24:case"end":return nt.stop()}},St,ot,[[11,17]])}));return function(St,Qe){return st.apply(this,arguments)}}();var At=pt.projectId;vt.hasDefaultRelateRecordTableControls=[];var yt=v()(pt.formData,{$apply:function(St){var Qe=St.map(function($e){var Ke=(0,C.default)({},$e),Ue=G().find(pt.writeControls,function(He){return Ke.controlId===He.controlId});return Ke.advancedSetting=(0,C.default)({},Ke.advancedSetting||{},{defsource:""}),Ue&&Ue.defsource&&Ue.defsource!=="[]"&&(Ke.value="",G().includes([9,10,11],Ke.type)?Ke.value=Ke.default=safeParse(Ue.defsource)[0].staticValue:Ke.advancedSetting=(0,C.default)({},Ke.advancedSetting||{},{defsource:Ue.defsource})),Ke}),Xe=new P.ZP({data:Qe,isCreate:!0,from:2,projectId:At}).getDataSource().filter(function($e){return G().includes(pt.writeControls.map(function(Ke){return Ke.controlId}),$e.controlId)&&!G().includes([30,31,37,38],$e.type)});return St=St.map(function($e){var Ke=G().find(pt.writeControls,function(ze){return $e.controlId===ze.controlId});if(!G().isUndefined($e.dataSource)){if($e.type===52)return(0,C.default)({},$e,{controlPermissions:"111",fieldPermission:"111"});if(!Ke)return(0,C.default)({},$e,{controlPermissions:"000"});if($e.type===29&&$e.enumDefault===2&&$e.advancedSetting.showtype==="2")return(0,C.default)({},$e,{value:"",controlPermissions:"000"});$e.controlPermissions=$e.controlPermissions[0]+(Ke.type===1?"0":"1")+$e.controlPermissions[2],$e.required=Ke.type===3,$e.fieldPermission="111";var Ue=G().find(Xe,function(ze){return ze.controlId===$e.controlId});if(Ue)if($e.type===29){var He=G().filter(safeParse(Ue.value,"array"),function(ze){return ze.sid||ze.sourcevalue});G().isEmpty(He)||($e.value=te()(He),$e.count=void 0,$e.hasDefaultValue=!0,vt.hasDefaultRelateRecordTableControls.push(Ue.controlId))}else $e.value=Ue.value;return $e}}).filter(function($e){return!!$e&&(!pt.isBatchOperate||!G().includes([34],$e.type))}),St}});return vt.state={formData:yt,showError:!1},vt}return(0,j.default)(Ge,[{key:"render",value:function(){var ot=this,vt=this.props,At=vt.appId,yt=vt.recordId,st=vt.worksheetId,St=vt.projectId,Qe=vt.hideDialog,Xe=vt.title,$e=this.state,Ke=$e.submitLoading,Ue=$e.isSubmitting,He=$e.formData,ze=$e.showError;return I.createElement(ae,null,I.createElement("div",{className:"flex customFieldsWrapper"},Ke&&I.createElement(ne,null,I.createElement(ce.Z,null)),I.createElement("div",{className:"flexRow valignWrapper pTop15 pLeft20 pRight20 pBottom8"},I.createElement("div",{className:"title Font18 Gray flex bold leftAlign ellipsis"},Xe),I.createElement("i",{className:"icon icon-close Gray_9e Font20",onClick:Qe})),I.createElement("div",{ref:this.formcon},I.createElement(W.Z,{isWorksheetQuery:!0,ignoreLock:!0,ref:this.customwidget,data:He.map(function(gt){return(0,C.default)({},gt,{isCustomButtonFillRecord:!0})}),recordId:yt,from:3,projectId:St,appId:At,worksheetId:st,showError:ze,registerCell:function(Et){var ft=Et.item,qe=Et.cell;return ot.cellObjs[ft.controlId]={item:ft,cell:qe}},onChange:function(Et){ot.setState({formData:Et})},onSave:this.onSave}))),I.createElement("div",{className:"btnsWrapper flexRow"},I.createElement(B(),{className:"flex",size:"sm"},I.createElement(i(),{className:"Font15 bold Gray_75",onClick:Qe},I.createElement("span",null,_l("\u53D6\u6D88")))),I.createElement(B(),{className:"flex",size:"sm"},I.createElement(i(),{disabled:Ke||Ue,className:"Font15 bold",type:"primary",onClick:this.handleSave},_l("\u786E\u5B9A")))))}}]),Ge}(I.Component))||D;const Ce=de;var he=t(69945),fe=t(62745),Ee=t(67272),Y=t(51024),oe=(0,E.Z)([`
  .am-modal-content {
    border-top-right-radius: 15px;
    border-top-left-radius: 15px;
    padding: 0;
    padding-top: 10px;
  }
  .am-modal-body {
    text-align: left;
    overflow: auto;
    max-height: calc(100vh - 30px);
    padding: 10px 20px 10px;
  }
  .remarkButton {
    box-sizing: border-box;
    border-radius: 3px;
    padding: 8px;
    font-size: 14px;
    width: 100%;
    border: 1px solid #e6e6e6;
    min-height: 38px;
    max-height: 10000px;
  }
  .ming.Textarea {
    padding: 8px;
    border: 1px solid #e6e6e6;
    min-height: 39px !important;
  }
  .ming.Textarea:hover:not(:disabled),
  .ming.Textarea:focus,
  .ant-input-affix-wrapper:focus,
  .ant-input-affix-wrapper-focused,
  .ant-input-affix-wrapper:not(.ant-input-affix-wrapper-disabled):hover {
    border: 1px solid #e6e6e6;
    box-shadow: none !important;
  }
  .ant-input-password-icon,
  .ant-input-password-icon:hover {
    color: #9e9e9e !important;
  }
  .ming.Textarea::-webkit-input-placeholder {
    color: #bdbdbd;
  }
  .actionsWrap {
    margin-bottom: 10px;
    .ming.Button {
      height: 36px;
      line-height: 36px;
      flex: 1;
      border-radius: 18px;
    }
    .ming.Button--link {
      border: 1px solid #ddd;
    }
    .ming.Button--primary {
      background: #2196f3;
    }
    .ming.Button--primary:hover {
      background: #2196f3;
    }
  }
`],[`
  .am-modal-content {
    border-top-right-radius: 15px;
    border-top-left-radius: 15px;
    padding: 0;
    padding-top: 10px;
  }
  .am-modal-body {
    text-align: left;
    overflow: auto;
    max-height: calc(100vh - 30px);
    padding: 10px 20px 10px;
  }
  .remarkButton {
    box-sizing: border-box;
    border-radius: 3px;
    padding: 8px;
    font-size: 14px;
    width: 100%;
    border: 1px solid #e6e6e6;
    min-height: 38px;
    max-height: 10000px;
  }
  .ming.Textarea {
    padding: 8px;
    border: 1px solid #e6e6e6;
    min-height: 39px !important;
  }
  .ming.Textarea:hover:not(:disabled),
  .ming.Textarea:focus,
  .ant-input-affix-wrapper:focus,
  .ant-input-affix-wrapper-focused,
  .ant-input-affix-wrapper:not(.ant-input-affix-wrapper-disabled):hover {
    border: 1px solid #e6e6e6;
    box-shadow: none !important;
  }
  .ant-input-password-icon,
  .ant-input-password-icon:hover {
    color: #9e9e9e !important;
  }
  .ming.Textarea::-webkit-input-placeholder {
    color: #bdbdbd;
  }
  .actionsWrap {
    margin-bottom: 10px;
    .ming.Button {
      height: 36px;
      line-height: 36px;
      flex: 1;
      border-radius: 18px;
    }
    .ming.Button--link {
      border: 1px solid #ddd;
    }
    .ming.Button--primary {
      background: #2196f3;
    }
    .ming.Button--primary:hover {
      background: #2196f3;
    }
  }
`]),ve=(0,E.Z)([`
  font-size: 13px;
  color: #333;
  font-weight: 500;
  margin: 0px 0 10px;
  position: relative;
  &.required {
    &:before {
      position: absolute;
      left: -10px;
      top: 3px;
      color: red;
      content: '*';
    }
  }
  .userMode {
    position: absolute;
    right: 0;
    top: 0;
    font-weight: 400;
    color: #2196f3;
  }
`],[`
  font-size: 13px;
  color: #333;
  font-weight: 500;
  margin: 0px 0 10px;
  position: relative;
  &.required {
    &:before {
      position: absolute;
      left: -10px;
      top: 3px;
      color: red;
      content: '*';
    }
  }
  .userMode {
    position: absolute;
    right: 0;
    top: 0;
    font-weight: 400;
    color: #2196f3;
  }
`]),ue=(0,E.Z)([`
  height: 100%;
  border-top-right-radius: 0;
  border-top-left-radius: 0;
  .am-modal-body {
    padding: 10px;
  }
  .searchWrap {
    background-color: #fff;
    border-radius: 3px;
    padding: 0 10px;
    height: 36px;
    border-radius: 18px;
    background-color: #f5f5f5;
    input {
      height: 100%;
      background-color: #f5f5f5;
      border: none;
      &:hover {
        border: none;
      }
    }
    .ant-input:focus,
    .ant-input-focused {
      border: none;
      box-shadow: unset !important;
    }
  }
  .modeItem {
    border-bottom: 1px solid #f5f5f5;
    padding: 16px 8px 16px 0;
    margin-left: 6px;
    text-align: left;
  }
  .ming.Button {
    width: 100%;
    height: 36px;
    line-height: 36px;
    border-radius: 18px;
  }
  .ming.Button--link {
    border: 1px solid #ddd;
  }
  .ming.Button--primary {
    background: #2196f3;
  }
  .ming.Button--primary:hover {
    background: #2196f3;
  }
`],[`
  height: 100%;
  border-top-right-radius: 0;
  border-top-left-radius: 0;
  .am-modal-body {
    padding: 10px;
  }
  .searchWrap {
    background-color: #fff;
    border-radius: 3px;
    padding: 0 10px;
    height: 36px;
    border-radius: 18px;
    background-color: #f5f5f5;
    input {
      height: 100%;
      background-color: #f5f5f5;
      border: none;
      &:hover {
        border: none;
      }
    }
    .ant-input:focus,
    .ant-input-focused {
      border: none;
      box-shadow: unset !important;
    }
  }
  .modeItem {
    border-bottom: 1px solid #f5f5f5;
    padding: 16px 8px 16px 0;
    margin-left: 6px;
    text-align: left;
  }
  .ming.Button {
    width: 100%;
    height: 36px;
    line-height: 36px;
    border-radius: 18px;
  }
  .ming.Button--link {
    border: 1px solid #ddd;
  }
  .ming.Button--primary {
    background: #2196f3;
  }
  .ming.Button--primary:hover {
    background: #2196f3;
  }
`]),pe=(0,E.Z)([`
  height: 36px;
  background: #f5f5f5;
  border-radius: 3px;
  border: 1px solid #ddd;
  padding: 0 10px;
`],[`
  height: 36px;
  background: #f5f5f5;
  border-radius: 3px;
  border: 1px solid #ddd;
  padding: 0 10px;
`]),Se=(0,K.ZP)(U())(oe),ye=K.ZP.div(ve),J=(0,K.ZP)(U())(ue),me=K.ZP.div(pe);function be(it){var Ge=it.className,pt=it.isFreeInput,ot=it.remarkoptions,vt=it.onClose,At=it.visible,yt=it.setRemarkValue,st=yt===void 0?function(){}:yt,St=it.setIsInput,Qe=St===void 0?function(){}:St,Xe=_.get(safeParse(ot),"template")||[],$e=(0,I.useState)(Xe),Ke=(0,le.Z)($e,2),Ue=Ke[0],He=Ke[1];return I.createElement(J,{className:"full",popup:!0,animationType:"slide-up",onClose:vt,visible:At},I.createElement("div",{className:"h100 flexColumn"},I.createElement("div",{className:"searchWrap flexRow valignWrapper"},I.createElement(g.Z,{icon:"h5_search",className:"Gray_9e Font17"}),I.createElement(Y.default,{className:"search",placeholder:_l("\u641C\u7D22"),onChange:function(gt){var Et=Xe.filter(function(ft){return _.includes(ft.value,gt.target.value)});He(Et)}})),!pt&&I.createElement("span",{className:"Font13 ThemeColor modeItem",onClick:function(){st(""),vt()}},_l("\u6E05\u9664\u9009\u62E9")),I.createElement("div",{className:"flex"},Ue.map(function(ze,gt){return I.createElement("div",{key:gt,className:"modeItem Gray",onClick:function(){st(ze.value),pt&&Qe(!0),vt()}},ze.value)})),pt&&I.createElement(re.ZP,{onClick:function(){Qe(!0),vt()},type:"primary",className:"w100"},_l("\u81EA\u7531\u8F93\u5165")),!pt&&I.createElement(re.ZP,{onClick:vt,type:"link",className:"w100"},_l("\u53D6\u6D88"))))}var xe=function(Ge){var pt=_.get(safeParse(Ge),"template")||[];return _.get(_.filter(pt,function(ot){return ot.selected})[0],"value")};function Ae(it){var Ge=it.title,pt=it.description,ot=it.okText,vt=it.cancelText,At=it.enableRemark,yt=it.remarkName,st=it.remarkHint,St=it.remarkRequired,Qe=it.verifyPwd,Xe=it.enableConfirm,$e=it.remarktype,Ke=it.remarkoptions,Ue=it.onOk,He=it.onClose,ze=it.className,gt=it.visible,Et=it.projectId,ft=(0,I.useState)(xe(Ke)||""),qe=(0,le.Z)(ft,2),nt=qe[0],Ze=qe[1],et=(0,I.useState)(""),ut=(0,le.Z)(et,2),xt=ut[0],wt=ut[1],kt=(0,I.useState)(!1),Rt=(0,le.Z)(kt,2),jt=Rt[0],fn=Rt[1],Mt=(0,I.useState)(!1),sn=(0,le.Z)(Mt,2),on=sn[0],en=sn[1],$t=(0,I.useState)(!1),an=(0,le.Z)($t,2),tn=an[0],mt=an[1],Lt=(0,I.useState)(!1),zt=(0,le.Z)(Lt,2),Zt=zt[0],Nt=zt[1],ct=(0,I.useState)(!1),De=(0,le.Z)(ct,2),_e=De[0],Le=De[1],rt=(0,I.useState)(!1),Ct=(0,le.Z)(rt,2),dt=Ct[0],It=Ct[1],bt=(0,I.useState)(!1),Ut=(0,le.Z)(bt,2),Xt=Ut[0],pn=Ut[1],tt=_.get(safeParse(Ke),"template")||[];(0,I.useEffect)(function(){It(!0),(0,b.Gv)({projectId:Et,checkNeedAuth:!0,success:function(){It(!1)},fail:function(Ot){It(!1),Le(!0),pn(Ot==="showPassword")}})},[]);var ht=$e!=="1";return I.createElement(Se,{popup:!0,animationType:"slide-up",className:ze,onClose:He,visible:gt},I.createElement("div",{className:q()("Gray Font17 mBottom12 bold",{mBottom24:!pt&&!At&&!Qe})},Xe?Ge:_l("\u5B89\u5168\u9A8C\u8BC1")),Qe&&_e&&I.createElement(ie.Z,{className:"mBottom25",showSubTitle:!1,autoFocus:!1,isRequired:!1,allowNoVerify:!Xt,onChange:function(Ot){var Ht=Ot.password,Kt=Ot.isNoneVerification;wt(Ht),Nt(Kt)}}),pt&&I.createElement("div",{className:"Gray_9e Font14 mBottom12"},pt),At&&I.createElement("div",{className:"remarkWrap"},I.createElement(ye,{className:q()({required:St})},yt||_l("\u5907\u6CE8"),ht&&tn&&!_.isEmpty(tt)&&I.createElement("div",{className:"userMode",onClick:function(){return en(!0)}},_l("\u4F7F\u7528\u6A21\u677F"))),jt||!Ke||ht&&_.isEmpty(tt)?I.createElement(fe.Z,{placeholder:st||"",className:"mBottom24 Gray",onChange:function(Ot){return Ze(Ot)},value:nt}):I.createElement("div",{className:"remarkButton mBottom24 flexRow",onClick:function(){return en(!0)}},I.createElement("div",{className:q()("flex ellipsis",{Gray_bd:!nt,Gray:nt})},nt||st),(!ht||ht&&!nt)&&I.createElement(g.Z,{icon:"arrow-right-border",className:"mTop3"}))),I.createElement("div",{className:"actionsWrap flexRow"},I.createElement(re.ZP,{type:"link",onClick:He,className:"Gray_75 Font14 mRight10"},vt||_l("\u53D6\u6D88")),I.createElement(re.ZP,{type:"primary",disabled:dt,onClick:function(){if(At&&St&&!nt.trim()){alert(_l("%0\u4E0D\u80FD\u4E3A\u7A7A",yt),3);return}Qe&&_e?(0,b.Gv)({password:xt,isNoneVerification:Zt,closeImageValidation:!0,success:function(){Ue(At?{remark:nt}:{}),He()}}):(Ue(At?{remark:nt}:{}),He())},className:"Font14"},ot||_l("\u786E\u8BA4"))),on&&I.createElement(be,{visible:on,onClose:function(){return en(!1)},remarkoptions:Ke,setRemarkValue:function(Ot){Ze(Ot),mt(!0)},setIsInput:function(Ot){fn(Ot),mt(!0)},isFreeInput:ht}))}var Ne=function(Ge){return(0,w.Z)(Ae,Ge)},Me=t(42638),Fe=t(31742),Be=t(76345),we=t(70039),Ie=t(90009),ge=t(3767),Re=t(88045),Pe=t(89499),ke={IMMEDIATELY:1,CONFIRM:2,FILL_RECORD:3},We=function(it){(0,S.default)(Ge,it);function Ge(pt){(0,s.default)(this,Ge);var ot=(0,A.default)(this,(Ge.__proto__||n()(Ge)).call(this,pt));ot.recef=I.createRef(),ot.handleTriggerCustomBtn=function(st){var St=ot.props,Qe=St.worksheetId,Xe=St.rowId,$e=St.handleUpdateWorksheetRow,Ke=St.handleBatchOperateCustomBtn,Ue=St.batchOptCheckedData,He=Ue===void 0?[]:Ue,ze=St.sheetRow,gt=St.worksheetInfo,Et=gt===void 0?{}:gt,ft=St.isBatchOperate;ot.setState({custBtnName:st.name}),ot.remark=void 0;var qe=ot;if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}var nt=function(){var ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},xt=ut.remark,wt=function(){if(G().isFunction(Ke)){Ke(st);return}qe.triggerImmediately(st)};if(G().get(st,"advancedSetting.enableremark")&&xt){if(G().isFunction($e)){$e({worksheetId:Qe,rowId:Xe,newOldControl:[],btnRemark:xt,btnId:st.btnId,btnWorksheetId:Qe,btnRowId:Xe});return}k.Z.updateWorksheetRow({worksheetId:Qe,rowId:Xe,newOldControl:[],btnRemark:xt,btnId:st.btnId,btnWorksheetId:Qe,btnRowId:Xe}).then(function(){wt(st)})}else wt(st)},Ze=function(){var ut=st.enableConfirm||st.clickType===ke.CONFIRM;function xt(){var kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Rt=kt.onOk,jt=kt.onClose,fn=jt===void 0?function(){}:jt,Mt=G().get(st,"advancedSetting")||{},sn=Mt.confirmcontent,on=Mt.enableremark,en=Mt.remarkname,$t=Mt.remarkhint,an=Mt.remarkrequired,tn=Mt.remarktype,mt=Mt.remarkoptions;Ne({projectId:ft?Et.projectId:ze.projectId,title:st.confirmMsg,description:sn,enableRemark:on,remarkName:en,remarkHint:$t,remarkRequired:an,remarktype:tn,remarkoptions:mt,verifyPwd:st.verifyPwd,enableConfirm:st.enableConfirm,okText:st.sureName,cancelText:st.cancelName,btn:st,onOk:Rt||function(Lt){return nt(Lt)},onClose:fn})}if(st.clickType===ke.FILL_RECORD){qe.fillRecord((0,C.default)({},st,{confirm:ut||st.verifyPwd?function(){return new(V())(function(kt,Rt){xt({onOk:function(fn){var Mt=fn.remark;qe.remark=Mt,kt(Mt)},onClose:Rt})})}:void 0}));return}function wt(){st.verifyPwd?(0,b.Gv)({projectId:ft?Et.projectId:ze.projectId,checkNeedAuth:!0,closeImageValidation:!0,success:nt,fail:function(Rt){h.confirm({showSubTitle:!0,autoFocus:!0,isRequired:!0,allowNoVerify:Rt!=="showPassword",onOk:nt})}}):nt()}ut?xt():wt()};He.length>1e3?U().alert(_l("\u6700\u5927\u652F\u6301\u6279\u91CF\u6267\u884C1000\u884C\u8BB0\u5F55\uFF0C\u662F\u5426\u53EA\u9009\u4E2D\u5E76\u6267\u884C\u524D1000\u884C\u6570\u636E\uFF1F"),"",[{text:"\u53D6\u6D88",onPress:function(){}},{text:"\u786E\u8BA4",onPress:function(){return Ze()}}]):Ze(),ot.props.hideRecordActionVisible()},ot.triggerImmediately=function(st){ot.disableCustomButton(st.btnId);var St=ot.props,Qe=St.worksheetId,Xe=St.rowId;Me.Z.startProcess({appId:Qe,sources:[Xe],triggerId:st.btnId,pushUniqueId:G().get(window,"md.global.Config.pushUniqueId")}).then(function($e){$e?(ot.props.loadRow(),ot.props.loadCustomBtns(),setTimeout(function(){ot.setState({btnDisable:{}}),ot.props.updateBtnDisabled({})},500)):alert(_l("\u64CD\u4F5C\u5931\u8D25"),2)})},ot.disableCustomButton=function(st){ot.setState({btnDisable:(0,C.default)({},ot.state.btnDisable,(0,d.default)({},st,!0))}),ot.props.updateBtnDisabled((0,d.default)({},st,!0))},ot.handleOpenDiscuss=function(){var st=ot.props,St=st.appId,Qe=st.worksheetId,Xe=st.viewId,$e=st.rowId;window.mobileNavigateTo("/mobile/discuss/"+St+"/"+Qe+"/"+Xe+"/"+$e)},ot.handleDeleteAlert=function(){var st=ot.props.hideRecordActionVisible;U().alert(ot.isSubList?_l("\u662F\u5426\u5220\u9664\u5B50\u8868\u8BB0\u5F55 ?"):_l("\u662F\u5426\u5220\u9664\u6B64\u6761\u8BB0\u5F55 ?"),"",[{text:_l("\u53D6\u6D88"),style:"default",onPress:function(){}},{text:_l("\u786E\u5B9A"),style:{color:"red"},onPress:ot.handleDelete}]),st()},ot.handleDelete=function(){var st=ot.props,St=st.appId,Qe=st.worksheetId,Xe=st.viewId,$e=st.rowId;k.Z.deleteWorksheetRows({worksheetId:Qe,viewId:Xe,appId:St,rowIds:[$e]}).then(function(Ke){var Ue=Ke.isSuccess;Ue?(alert(_l("\u5220\u9664\u6210\u529F")),history.back()):alert(_l("\u5220\u9664\u5931\u8D25"),2)})},ot.fillRecordControls=function(st,St,Qe){var Xe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},$e=ot.props,Ke=$e.worksheetId,Ue=$e.rowId,He=$e.handleUpdateWorksheetRow,ze=ot.state.custBtnName,gt={appId:St.appId,viewId:St.viewId,worksheetId:St.worksheetId,rowId:St.recordId,projectID:St.projectId,newOldControl:st,btnId:ot.activeBtn.btnId,btnWorksheetId:Ke,btnRowId:Ue,workflowType:ot.activeBtn.workflowType,btnRemark:ot.remark};if(G().isFunction(He)){He(gt),ot.setState({fillRecordVisible:!1});return}k.Z.updateWorksheetRow(gt).then(function(Et){Et&&Et.data?(ot.props.loadRow(),ot.props.loadCustomBtns(),ot.activeBtn.workflowType===2?alert(_l("\u4FEE\u6539\u6210\u529F")):o.default.info({className:"flowToastInfo",content:I.createElement("div",{className:"feedbackInfo"},I.createElement("span",{className:"custBtnName"},"\u201C",ze,"\u201D"),I.createElement("span",{className:"verticalAlignM"},_l("\u6B63\u5728\u6267\u884C..."))),duration:1}),ot.setState({fillRecordVisible:!1})):Et.resultCode===11?ot.customwidget.current&&G().isFunction(ot.customwidget.current.uniqueErrorUpdate)&&ot.customwidget.current.uniqueErrorUpdate(Et.badData):((0,Pe.a)(Et.resultCode),Xe(!0))})},ot.handleAddRecordCallback=function(){var st=ot.props.isBatchOperate;ot.activeBtn.workflowType===2&&alert(_l("\u521B\u5EFA\u6210\u529F")),!st&&ot.props.loadRow(),ot.props.loadCustomBtns()},ot.renderRecordInfo=function(){var st=ot.props,St=st.appId,Qe=st.viewId,Xe=ot.state.previewRecord;return I.createElement(we.RecordInfoModal,{className:"full",visible:!!Xe.rowId,appId:St,worksheetId:ot.btnAddRelateWorksheetId,viewId:Xe.viewId,rowId:Xe.rowId,onClose:function(){ot.setState({previewRecord:{}})}})},ot.state={fillRecordVisible:!1,newRecordVisible:!1,btnDisable:{},rowInfo:{},previewRecord:{},percent:0,num:0};var vt=(0,b.A_)(),At=vt.isSubList,yt=vt.editable;return ot.isSubList=At=="true",ot.editable=yt=="true",ot}return(0,j.default)(Ge,[{key:"componentDidMount",value:function(){this.props.isBatchOperate&&!this.props.recordActionVisible||((0,Ie.Z)({viewId:this.props.viewId}),(0,ge.Z)())}},{key:"componentWillReceiveProps",value:function(ot){ot.recordActionVisible!==this.props.recordActionVisible&&this.props.isBatchOperate&&((0,Ie.Z)({viewId:this.props.viewId}),(0,ge.Z)())}},{key:"componentWillUnmount",value:function(){window.IM&&(IM.socket.off("workflow_push"),IM.socket.off("workflow"))}},{key:"fillRecord",value:function(){var pt=(0,a.Z)(y().mark(function vt(At){var yt,st,St,Qe,Xe,$e,Ke,Ue,He,ze,gt,Et;return y().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(yt=this.props,st=yt.worksheetId,St=yt.rowId,Qe=void 0,!St){qe.next=9;break}return qe.next=5,(0,ee.r)({worksheetId:st,getType:1,rowId:St});case 5:Qe=qe.sent,Qe=(0,C.default)({},Qe,{receiveControls:Qe.formData}),qe.next=13;break;case 9:return qe.next=11,k.Z.getWorksheetInfo({worksheetId:st,getTemplate:!0});case 11:Xe=qe.sent,Qe={receiveControls:Xe.template.controls};case 13:$e=G().find(Qe.receiveControls,function(nt){return nt.attribute===1}),Ke=At.writeObject+""+At.writeType,Ue=G().find(Qe.receiveControls,function(nt){return nt.controlId===At.relationControl}),He=G().find(Qe.receiveControls,function(nt){return nt.controlId===At.addRelationControl}),this.setState({rowInfo:Qe}),this.activeBtn=At,this.masterRecord={},this.fillRecordProps={},this.customButtonConfirm=At.confirm,qe.t0=Ke,qe.next=qe.t0==="11"?25:qe.t0==="12"?30:qe.t0==="21"?46:qe.t0==="22"?61:74;break;case 25:return this.btnRelateWorksheetId=st,this.fillRecordId=St,this.fillRecordProps={formData:Qe.receiveControls,appId:this.props.appId},this.setState({fillRecordVisible:!0}),qe.abrupt("break",74);case 30:if(!(!He||!G().isObject(He))){qe.next=33;break}return U().alert(_l("\u65E0\u6CD5\u6267\u884C\u6309\u94AE\u201C%0\u201D",At.name),_l("\u5173\u8054\u5B57\u6BB5\u88AB\u9690\u85CF\u6216\u5DF2\u5220\u9664"),[{text:_l("\u786E\u5B9A"),onPress:function(){}}]),qe.abrupt("return");case 33:if(qe.prev=33,ze=JSON.parse(He.value),!(He.enumDefault===1&&ze.length)){qe.next=38;break}return U().alert(_l("\u65E0\u6CD5\u6267\u884C\u6309\u94AE\u201C%0\u201D",At.name),_l("%0\u5DF2\u6709\u5173\u8054\u8BB0\u5F55\uFF0C\u65E0\u6CD5\u91CD\u590D\u6DFB\u52A0",He.controlName),[{text:_l("\u786E\u5B9A"),onPress:function(){}}]),qe.abrupt("return");case 38:qe.next=42;break;case 40:qe.prev=40,qe.t1=qe.catch(33);case 42:return this.btnAddRelateWorksheetId=He.dataSource,this.masterRecord={rowId:St,controlId:He.controlId,worksheetId:st},this.setState({newRecordVisible:!0}),qe.abrupt("break",74);case 46:if(!(!Ue||!G().isObject(Ue))){qe.next=48;break}return qe.abrupt("return");case 48:this.btnRelateWorksheetId=Ue.dataSource,qe.prev=49,gt=JSON.parse(Ue.value),this.fillRecordId=gt[0].sid,this.fillRecordProps={appId:Ue.appId,rowId:this.fillRecordId,viewId:Ue.viewId},qe.next=59;break;case 55:return qe.prev=55,qe.t2=qe.catch(49),U().alert(_l("\u65E0\u6CD5\u6267\u884C\u6309\u94AE\u201C%0\u201D",At.name),_l("\u201C%0\u201D\u4E3A\u7A7A\uFF0C\u8BF7\u5173\u8054\u64CD\u4F5C\u540E\u518D\u6267\u884C\u6309\u94AE\u64CD\u4F5C",Ue.controlName),[{text:_l("\u786E\u5B9A"),onPress:function(){}}]),qe.abrupt("return");case 59:return this.setState({fillRecordVisible:!0}),qe.abrupt("break",74);case 61:if(!(!Ue||!G().isObject(Ue))){qe.next=63;break}return qe.abrupt("return");case 63:qe.prev=63,Et=JSON.parse(Ue.value),this.fillRecordId=Et[0].sid,this.addRelateRecordRelateRecord(Ue,At.addRelationControl),qe.next=73;break;case 69:return qe.prev=69,qe.t3=qe.catch(63),U().alert(_l("\u65E0\u6CD5\u6267\u884C\u6309\u94AE\u201C%0\u201D",At.name),_l("\u201C%0\u201D\u4E3A\u7A7A\uFF0C\u8BF7\u5173\u8054\u64CD\u4F5C\u540E\u518D\u6267\u884C\u6309\u94AE\u64CD\u4F5C",Ue.controlName),[{text:_l("\u786E\u5B9A"),onPress:function(){}}]),qe.abrupt("return");case 73:return qe.abrupt("break",74);case 74:case"end":return qe.stop()}},vt,this,[[33,40],[49,55],[63,69]])}));function ot(vt){return pt.apply(this,arguments)}return ot}()},{key:"addRelateRecordRelateRecord",value:function(ot,vt){var At=this,yt=void 0;try{yt=JSON.parse(ot.value)}catch(st){return}k.Z.getRowByID({worksheetId:ot.dataSource,getType:1,appId:ot.appId,rowId:yt[0].sid,viewId:ot.viewId}).then(function(st){var St=G().find(st.receiveControls,function(Xe){return Xe.controlId===vt});if(!St){U().alert(_l("\u65E0\u6CD5\u6267\u884C\u6309\u94AE\u201C%0\u201D",At.activeBtn.name),_l("\u5173\u8054\u5B57\u6BB5\u88AB\u9690\u85CF\u6216\u5DF2\u5220\u9664"),[{text:_l("\u786E\u5B9A"),onPress:function(){}}]);return}try{var Qe=JSON.parse(St.value);if(St.enumDefault===1&&Qe.length){U().alert(_l("\u65E0\u6CD5\u6267\u884C\u6309\u94AE\u201C%0\u201D",At.activeBtn.name),_l("\u201C%0\u201D\u5DF2\u6709\u5173\u8054\u8BB0\u5F55\uFF0C\u65E0\u6CD5\u91CD\u590D\u6DFB\u52A0",St.controlName),[{text:_l("\u786E\u5B9A"),onPress:function(){}}]);return}}catch(Xe){}At.masterRecord={rowId:yt[0].sid,controlId:St.controlId,worksheetId:ot.dataSource},St&&(At.btnAddRelateWorksheetId=St.dataSource,At.setState({newRecordVisible:!0,rowInfo:st}))})}},{key:"renderFillRecord",value:function(){var ot=this,vt=this.activeBtn,At=vt===void 0?{}:vt,yt=this.fillRecordId,st=this.btnRelateWorksheetId,St=this.fillRecordProps,Qe=this.props,Xe=Qe.sheetRow,$e=Qe.viewId,Ke=Qe.worksheetInfo,Ue=Ke===void 0?{}:Ke,He=Qe.isBatchOperate,ze=At.writeObject+""+At.writeType;return I.createElement(U(),{popup:!0,animationType:"slide-up",className:"mobileFillRecordControlsModal",visible:this.state.fillRecordVisible,onClose:function(){ot.setState({fillRecordVisible:!1})}},I.createElement(Ce,(0,C.default)({title:At.name,loadWorksheetRecord:ze==="21",viewId:$e,projectId:He?Ue.projectId:Xe.projectId,recordId:yt,worksheetId:st,writeControls:At.writeControls,onSubmit:this.fillRecordControls,hideDialog:function(){ot.setState({fillRecordVisible:!1})}},St,{customButtonConfirm:this.customButtonConfirm})))}},{key:"renderNewRecord",value:function(){var ot=this,vt=this.activeBtn,At=vt===void 0?{}:vt,yt=this.state,st=yt.newRecordVisible,St=yt.rowInfo,Qe=this.props,Xe=Qe.worksheetId,$e=Qe.rowId,Ke=Qe.appId;return st&&I.createElement(he.Z,{isCustomButton:!0,appId:Ke,title:At.name,className:"worksheetRelateNewRecord",worksheetId:this.btnAddRelateWorksheetId,addType:2,filterRelateSheetrecordbase:Xe,visible:st,masterRecord:this.masterRecord,customBtn:{btnId:At.btnId,btnWorksheetId:Xe,btnRowId:$e,btnRemark:this.remark},defaultRelatedSheet:{worksheetId:Xe,relateSheetControlId:At.addRelationControl,value:{sid:this.masterRecord.rowId,sourcevalue:te()([{rowid:this.masterRecord.rowId}].concat((0,p.Z)(St?St.receiveControls:[])).reduce(function(Ue,He){return(0,C.default)({},Ue,(0,d.default)({},He.controlId,He.value))}))}},hideNewRecord:function(){ot.setState({newRecordVisible:!1})},openRecord:function(He,ze){ot.setState({previewRecord:{rowId:He,viewId:ze}})},onAdd:this.handleAddRecordCallback,customButtonConfirm:this.customButtonConfirm})}},{key:"renderRecordAction",value:function(){var ot=this,vt=this.props,At=vt.recordActionVisible,yt=vt.sheetRow,st=yt===void 0?{}:yt,St=vt.worksheetInfo,Qe=St===void 0?{}:St,Xe=vt.hideRecordActionVisible,$e=vt.customBtns,Ke=vt.viewId,Ue=vt.appId,He=vt.switchPermit,ze=vt.isBatchOperate,gt=vt.loading,Et=vt.isFavorite,ft=vt.handleCollectRecord,qe=ft===void 0?function(){}:ft,nt=this.state.btnDisable,Ze=st.projectId||Qe.projectId,et=G().isEmpty((0,b.vo)(Ze));return I.createElement(U(),{popup:!0,forceRender:!0,animationType:"slide-up",className:"actionSheetModal",visible:At,onClose:Xe},I.createElement(I.Fragment,null,I.createElement("div",{className:"flexRow header"},I.createElement("span",{className:"Font13"},ze?_l("\u5BF9\u9009\u4E2D\u8BB0\u5F55\u6267\u884C\u64CD\u4F5C"):_l("\u66F4\u591A\u64CD\u4F5C")),I.createElement("div",{className:"closeIcon",onClick:Xe},I.createElement(g.Z,{icon:"close"}))),gt?I.createElement("div",{className:"flexRow justifyContentCenter alignItemsCenter mBottom30"},I.createElement(ce.Z,null)):G().isEmpty($e)&&!(Ue&&!ze)?I.createElement("div",{className:"Gray bold mBottom30 TxtLeft pLeft15"},_l("\u6682\u65E0\u6309\u94AE")):I.createElement(I.Fragment,null,I.createElement("div",{className:"flexRow customBtnLists Font13"},I.createElement(Re.Z,{isBatch:ze,classNames:"flex customBtnItem",customBtns:$e,btnDisable:nt,handleClick:function(xt){ot.handleTriggerCustomBtn(xt)}})),Ue&&!ze?I.createElement("div",{className:"extrBtnBox"},(0,Fe.v)(Be.RX.recordShareSwitch,He,Ke)&&I.createElement("div",{className:"flexRow extraBtnItem"},I.createElement(g.Z,{icon:"share",className:"Font18 delIcon",style:{color:"#757575"}}),I.createElement("div",{className:"flex delTxt Font15 Gray",onClick:this.props.onShare},_l("\u5206\u4EAB"))),!window.shareState.shareId&&!md.global.Account.isPortal&&!et&&I.createElement("div",{className:"flexRow extraBtnItem"},I.createElement(g.Z,{icon:"star_3",className:q()("Font18 delIcon",{Gray_9e:!Et,activeStar:Et})}),I.createElement("div",{className:"flex delTxt Font15 Gray",onClick:qe},Et?_l("\u53D6\u6D88\u6536\u85CF"):_l("\u6536\u85CF\u8BB0\u5F55"))),(st.allowDelete||this.isSubList&&this.editable)&&I.createElement("div",{className:"flexRow extraBtnItem"},I.createElement(g.Z,{icon:"delete_12",className:"Font18 delIcon"}),I.createElement("div",{className:"flex delTxt Font15",onClick:this.handleDeleteAlert},_l("\u5220\u9664")))):null)))}},{key:"render",value:function(){return I.createElement("div",{ref:this.recef},this.renderRecordAction(),this.renderFillRecord(),this.renderNewRecord(),this.renderRecordInfo())}}]),Ge}(I.Component);const Ve=We},96867:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>yt});var ce=t(54208),g=t(93567),p=t(20148),L=t(60385),te=t.n(L),R=t(52945),y=t.n(R),a=t(63239),r=t.n(a),o=t(94942),d=t.n(o),Z=t(36803),H=t(85105),U=t.n(H),f=t(99663),V=t(22600),C=t(49135),O=t(93196),n=t(88239),s=t(67294),j=t(50533),A=t(22010),S=t(93967),I=t.n(S),c=t(33867),q=t(24538),b=t(24607),k=t(18097),ee=t(12842),re=t(49611),ie=t.n(re),le=t(58064),E=t(15742),w=t(31742),K=t(76345),N=t(67329),F,h,z=(F=(0,j.$j)(function(st){return(0,n.default)({},_.pick(st.mobile,["relationRow","loadParams"]))},function(st){return(0,A.DE)((0,n.default)({},_.pick(N,["updatePageIndex"])),st)}),F(h=function(st){(0,O.default)(St,st);function St(Qe){(0,f.default)(this,St);var Xe=(0,C.default)(this,(St.__proto__||U()(St)).call(this,Qe));return Xe.handleScroll=function($e){var Ke=Xe.props,Ue=Ke.isEditRecord,He=Ke.recordBase,ze=Ke.currentTab,gt=Ke.relationRow,Et=Ke.loadParams,ft=Ke.updatePageIndex,qe=ft===void 0?function(){}:ft,nt=Ke.view,Ze=nt===void 0?{}:nt;if(!(Ue||!Xe.formWrap)){var et=Xe.formWrap,ut=et.scrollTop,xt=et.scrollHeight,wt=et.clientHeight,kt=xt-wt-30,Rt=Et.loading,jt=Et.isMore,fn=Et.pageIndex,Mt=_.includes([29,51],ze.type)?gt.count:ze.value;kt<=ut&&Mt&&!Rt&&jt&&qe(fn+1);var sn=document.querySelector(".mobileSheetRowRecord-"+He.recordId),on=sn.querySelector(".tabsWrapper"),en=sn.querySelector(".fixedTabs"),$t=sn.querySelector(".fixedSheetNameWrap"),an=sn.querySelector(".mobileFormTop");$t&&(ut>=an.clientHeight?$t&&$t.classList.add("fixedSheetNameWrapBG"):$t&&$t.classList.remove("fixedSheetNameWrapBG")),on&&on.offsetTop-55<=ut?en&&en.classList.remove("hide"):en&&en.classList.add("hide"),Ze.viewType===6&&Ze.childType===1&&en&&en.classList.add("top43")}},Xe.renderApprove=function(){var $e=Xe.props,Ke=$e.isEditRecord,Ue=$e.externalPortalConfig,He=$e.recordInfo,ze=$e.recordBase,gt=$e.workflow,Et=Xe.state.approveCount,ft=Xe.isLoadApprove&&(0,w.v)(K.RX.approveDetailsSwitch,He.switchPermit,ze.viewId)&&(md.global.Account.isPortal?Ue.approved:!0);return gt?[]:ft&&!Ke?[{controlName:_l("\u5BA1\u6279")+(Et?"("+Et+")":""),controlId:"approve",showTabLine:!0,tabContentNode:s.createElement("div",{className:"flexColumn h100",style:{backgroundColor:"#f8f8f8"}},s.createElement(k.Z,{isCharge:He.roleType===2,projectId:He.projectId,worksheetId:ze.worksheetId,recordId:ze.recordId}))}]:[]},Xe.state={approveCount:0},Xe.isLoadApprove=Qe.getDataType!==21&&!Qe.isPublicShare&&!_.get(window,"shareState.isPublicForm")&&!_.get(window,"shareState.isPublicWorkflowRecord"),Xe}return(0,V.default)(St,[{key:"componentDidMount",value:function(){this.isLoadApprove&&this.getApproveTodoList()}},{key:"getApproveTodoList",value:function(){var Xe=this,$e=this.props,Ke=$e.recordInfo,Ue=$e.recordBase;le.Z.getTodoCount2({startAppId:Ue.worksheetId,startSourceId:Ue.recordId}).then(function(He){Xe.setState({approveCount:He})})}},{key:"renderHeader",value:function(){var Xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$e=Xe.formCoverVisible,Ke=this.props,Ue=Ke.getDataType,He=Ke.onClose,ze=Ke.random,gt=Ke.isEditRecord,Et=Ke.recordInfo,ft=Ke.recordBase,qe=Ke.formData,nt=Ke.header,Ze=Ke.controlProps,et=Ke.refreshBtnNeedLoading,ut=Ke.view,xt=ut===void 0?{}:ut,wt=Et.advancedSetting,kt=Et.formStyleImggeData;if(!gt){var Rt=_.get(wt,"coverid")&&!_.isEmpty(kt);if(!(!$e&&Rt||$e&&!Rt)){var jt=s.createElement("div",{className:I()("refreshWrap",{isLoading:et}),onClick:Ze.refreshRecord},s.createElement(c.Z,{className:"Font18",icon:"task-later"})),fn=s.createElement("div",{className:"sheetName flex bold",onClick:function(){location.pathname.indexOf("public")>-1||(window.mobileNavigateTo&&window.mobileNavigateTo("/mobile/recordList/"+ft.appId+"/"+Et.groupId+"/"+ft.worksheetId),He&&He())}},s.createElement("span",{className:"ellipsis"},_l("\u5DE5\u4F5C\u8868\uFF1A%0",Et.worksheetName))),Mt=He&&s.createElement(c.Z,{icon:"closeelement-bg-circle",className:"Gray_9e Font22 mLeft5",onClick:He});return $e&&Rt?s.createElement("div",{className:"mobileFormTop Relative"},s.createElement(ee.Z,{flag:ze.toString(),formData:qe,widgetStyle:wt,worksheetId:ft.worksheetId,recordId:ft.recordId}),s.createElement("div",{className:I()("flexRow sheetNameWrap fixedSheetNameWrap",{Absolute:xt.viewType===6&&xt.childType===1})},s.createElement("div",{className:"flexRow alignItemsCenter"},jt,fn),Mt)):nt?s.createElement("div",{className:"flexRow sheetNameWrap"},nt,Mt):s.createElement("div",{className:"flexRow sheetNameWrap"},s.createElement("div",{className:"flexRow alignItemsCenter"},Ue===21?s.createElement("div",{className:"sheetName ellipsis"},(wt.title||"\u521B\u5EFA\u8BB0\u5F55")+"\uFF08"+_l("\u8349\u7A3F")+"\uFF09"):s.createElement(s.Fragment,null,jt,fn)),Mt)}}}},{key:"renderCustomFields",value:function(){var Xe=this,$e=this.props,Ke=$e.customwidget,Ue=$e.random,He=$e.isModal,ze=$e.isEditRecord,gt=$e.recordInfo,Et=$e.recordBase,ft=$e.formData,qe=$e.getDataType,nt=$e.registerCell,Ze=$e.controlProps,et=$e.changeMobileTab,ut=$e.getChildTableControlIds,xt=$e.workflow,wt=$e.currentTab,kt=Et.from,Rt=this.renderApprove(),jt=[26,27,21,48];return s.createElement("div",{className:I()("flex customFieldsWrapper",{edit:ze,overflowHidden:!ze&&_.includes([29,51],wt.type)&&!window.isDingTalk}),ref:function(Mt){return Xe.con=Mt}},s.createElement(q.Z,{ref:Ke,isCharge:Et.isCharge,ignoreLock:kt===E.GP.WORKFLOW||kt===E.GP.DRAFT,showError:!1,disabled:xt?!gt.allowEdit:!ze,from:kt===21?kt:Et.recordId&&!ze?3:6,flag:Ue.toString(),projectId:gt.projectId,appId:Et.appId,worksheetId:Et.worksheetId,viewId:Et.viewId,recordId:Et.recordId,groupId:Et.groupId,rules:gt.rules,controlProps:Ze,getChildTableControlIds:ut,registerCell:nt,isWorksheetQuery:gt.isWorksheetQuery,recordCreateTime:gt.createTime,data:ft.filter(function(fn){return(ze?!0:fn.type!==43)&&!(_.get(window,"shareState.isPublicForm")&&_.includes(jt,fn.type))}),onChange:this.props.onChange,onSave:this.props.onSave,sheetSwitchPermit:gt.switchPermit,widgetStyle:gt.advancedSetting,verifyAllControls:qe===21,tabControlProp:{otherTabs:Rt,changeMobileTab:et},mobileApprovalRecordInfo:{instanceId:Et.instanceId,workId:Et.workId}}))}},{key:"render",value:function(){var Xe=this,$e=this.props,Ke=$e.isModal,Ue=$e.isEditRecord,He=$e.recordInfo,ze=$e.recordBase,gt=$e.formData,Et=$e.workflow,ft=$e.currentTab,qe=He.entityName,nt=He.rules,Ze=(0,b.xI)(gt);return s.createElement(s.Fragment,null,this.renderHeader(),s.createElement("div",{ref:function(ut){return Xe.formWrap=ut},className:"flexColumn flex recordScroll",style:{overflowX:"hidden",overflowY:"auto"},onScroll:this.handleScroll},s.createElement(ie(),{title:Ue?""+_l("\u7F16\u8F91")+qe:Ze?""+Ze:""+qe+_l("\u8BE6\u60C5")}),this.renderHeader({formCoverVisible:!0}),!Ue&&s.createElement("div",{className:I()("header",{pTop10:!Ke})},s.createElement("div",{className:"title"},Ze)),s.createElement("div",{className:"flexColumn flex"},this.renderCustomFields()),_.includes([29,51],ft.type)?null:Et))}}]),St}(s.Component))||h),X=t(80426),B=t(59012),x=t.n(B),Q=t(63627),i=t(81982),m=t.n(i),v=t(22382),W=t(28661),P=t.n(W),u=t(39216),l=t(48272),T=t.n(l),G=t(6128),D=t(88045),M=t(20640),se=t.n(M),ae=t(45231),ne=t(10358),de=t(89499),Ce=t(15577),he=t(96486),fe=t.n(he),Ee=function(St){var Qe=St.appId,Xe=St.worksheetId,$e=St.recordId,Ke=St.viewId,Ue=location.origin+"/mobile/record/"+Qe+"/"+Xe+"/"+Ke+"/"+$e;navigator.share?navigator.share({title:_l("\u7CFB\u7EDF"),text:document.title,url:Ue}).then(function(){T().info(_l("\u5206\u4EAB\u6210\u529F"))}):(se()(Ue),T().info(_l("\u590D\u5236\u6210\u529F")))},Y=function(St){var Qe=St.appId,Xe=St.worksheetId,$e=St.recordId,Ke=St.viewId;T().loading(),ae.Z.getWorksheetShareUrl({appId:Qe,worksheetId:Xe,rowId:$e,viewId:Ke,objectType:2}).then(function(Ue){T().hide(),navigator.share?navigator.share({title:_l("\u7CFB\u7EDF"),text:document.title,url:Ue.shareLink}).then(function(){T().info(_l("\u5206\u4EAB\u6210\u529F"))}):(se()(Ue.shareLink),T().info(_l("\u590D\u5236\u6210\u529F")))})},oe=function(St){var Qe=St.isSubList,Xe=St.recordBase,$e=function(){var Ue=Xe.appId,He=Xe.worksheetId,ze=Xe.viewId,gt=Xe.recordId;ae.Z.deleteWorksheetRows({worksheetId:He,viewId:ze,appId:Ue,rowIds:[gt]}).then(function(Et){var ft=Et.isSuccess;ft?(alert(_l("\u5220\u9664\u6210\u529F")),history.back()):alert(_l("\u5220\u9664\u5931\u8D25"),2)})};te().alert(Qe?_l("\u662F\u5426\u5220\u9664\u5B50\u8868\u8BB0\u5F55 ?"):_l("\u662F\u5426\u5220\u9664\u6B64\u6761\u8BB0\u5F55 ?"),"",[{text:_l("\u53D6\u6D88"),style:"default",onPress:function(){}},{text:_l("\u786E\u5B9A"),style:{color:"red"},onPress:$e}])},ve=function(st){(0,O.default)(St,st);function St(Qe){(0,f.default)(this,St);var Xe=(0,C.default)(this,(St.__proto__||U()(St)).call(this,Qe));return Xe.recordRef=s.createRef(),Xe.loadCustomBtns=function(){if(!(location.pathname.indexOf("public")>-1)){var $e=Xe.props.recordBase,Ke=$e.appId,Ue=$e.worksheetId,He=$e.viewId,ze=$e.recordId;ae.Z.getWorksheetBtns({appId:Ke,worksheetId:Ue,viewId:He,rowId:ze}).then(function(gt){Xe.setState({customBtns:(0,de.QE)(Ke,gt),loading:!1})})}},Xe.handleMoreOperation=function($e){var Ke=$e.allowDelete,Ue=$e.allowShare,He=Xe.props,ze=He.isSubList,gt=He.recordBase,Et=He.recordInfo,ft=Et===void 0?{}:Et,qe=Xe.state.isFavorite,nt=fe().isEmpty((0,Ce.vo)(ft.projectId)),Ze=[Ue?{name:_l("\u5206\u4EAB"),icon:"share",iconClass:"Font20 Gray_9e",fn:Xe.handleShare}:null,!window.shareState.shareId&&!md.global.Account.isPortal&&!nt?{name:qe?_l("\u53D6\u6D88\u6536\u85CF"):_l("\u6536\u85CF\u8BB0\u5F55"),icon:"star_3",iconClass:"Font20 Gray_9e "+(qe?"activeStar":""),fn:Xe.handleCollectRecord}:null,Ke?{name:_l("\u5220\u9664"),icon:"delete2",iconClass:"Font22 Red",class:"Red",fn:function(){return oe({isSubList:ze,recordBase:gt})}}:null].filter(function(et){return et});P().showActionSheetWithOptions({options:Ze.map(function(et){return s.createElement("div",{className:I()("flexRow valignWrapper w100",et.class),onClick:et.fn},s.createElement(c.Z,{className:I()("mRight10",et.iconClass),icon:et.icon}),s.createElement("span",{className:"Bold"},et.name))}),message:s.createElement("div",{className:"flexRow header"},s.createElement("span",{className:"Font13"},_l("\u66F4\u591A\u64CD\u4F5C")),s.createElement("div",{className:"closeIcon",onClick:function(){return P().close()}},s.createElement(c.Z,{icon:"close"})))})},Xe.handleShare=function(){var $e=Xe.props,Ke=$e.recordInfo,Ue=$e.recordBase,He=[{key:"innerShare",name:_l("\u5185\u90E8\u6210\u5458\u8BBF\u95EE"),info:_l("\u4EC5\u9650\u5185\u90E8\u6210\u5458\u767B\u5F55\u7CFB\u7EDF\u540E\u6839\u636E\u6743\u9650\u8BBF\u95EE"),icon:"share",iconClass:"Font18 Gray_9e",fn:function(){return Ee(Ue)},className:"mBottom10"},{key:"publicShare",name:_l("\u5BF9\u5916\u516C\u5F00\u5206\u4EAB"),info:_l("\u83B7\u5F97\u94FE\u63A5\u7684\u6240\u6709\u4EBA\u90FD\u53EF\u4EE5\u67E5\u770B"),icon:"delete2",iconClass:"Font22 Red",fn:function(){return Y(Ue)}}].filter(function(ze){return(0,w.v)(K.RX.recordShareSwitch,Ke.switchPermit,Ue.viewId)?!0:ze.key!=="publicShare"});P().showActionSheetWithOptions({options:He.map(function(ze){return s.createElement("div",{className:I()("flexRow valignWrapper w100",ze.className),onClick:ze.fn},s.createElement("div",{className:"flex flexColumn",style:{lineHeight:"22px"}},s.createElement("span",{className:"Bold"},ze.name),s.createElement("span",{className:"Font12 Gray_75"},ze.info)),s.createElement(c.Z,{className:"Font18 Gray_9e",icon:"arrow-right-border"}))}),message:s.createElement("div",{className:"flexRow header"},s.createElement("span",{className:"Font13"},_l("\u5206\u4EAB")),s.createElement("div",{className:"closeIcon",onClick:function(){return P().close()}},s.createElement(c.Z,{icon:"close"})))})},Xe.handleCollectRecord=function(){var $e=Xe.props,Ke=$e.recordBase,Ue=$e.recordInfo,He=$e.refreshCollectRecordList,ze=He===void 0?function(){}:He,gt=Ke.worksheetId,Et=Ke.recordId,ft=Ke.viewId,qe=Xe.state.isFavorite;qe?ne.Z.removeFavorite({projectId:Ue.projectId,rowId:Et,worksheetId:gt,viewId:ft}).then(function(nt){nt&&(alert(_l("\u5DF2\u53D6\u6D88\u6536\u85CF")),ze(),Xe.setState({isFavorite:!1}))}):ne.Z.addFavorite({worksheetId:gt,rowId:Et,viewId:ft}).then(function(nt){nt&&(alert(_l("\u6536\u85CF\u6210\u529F")),ze(),Xe.setState({isFavorite:!0}))})},Xe.state={recordActionVisible:!1,loading:!0,customBtns:[],btnDisable:{},isFavorite:!1},Xe}return(0,V.default)(St,[{key:"componentDidMount",value:function(){var Xe=this;this.props.getDataType!==21&&!this.props.isPublicShare&&!fe().get(window,"shareState.isPublicForm")&&!fe().get(window,"shareState.isPublicWorkflowRecord")&&this.loadCustomBtns(),this.props.addRefreshEvents("loadCustomBtns",function(){setTimeout(function(){Xe.setState({btnDisable:{}})},500),Xe.loadCustomBtns()}),this.setState({isFavorite:this.props.recordInfo.isFavorite})}},{key:"renderContent",value:function(){var Xe=this,$e=this.props,Ke=$e.editable,Ue=$e.isSubList,He=$e.getDataType,ze=$e.childTableControlIds,gt=$e.canSubmitDraft,Et=$e.hideOtherOperate,ft=$e.isMobileOperate,qe=$e.recordBase,nt=$e.recordInfo,Ze=this.props,et=Ze.onEditRecord,ut=Ze.onSubmitRecord,xt=Ze.onSaveRecord,wt=this.state,kt=wt.loading,Rt=wt.customBtns,jt=nt.allowEdit||Ke,fn=nt.allowDelete||Ue&&Ke,Mt=!md.global.Account.isPortal;return s.createElement(s.Fragment,null,(jt||He===21)&&!qe.workId&&s.createElement(x(),{className:"flex mLeft6 mRight6",size:"sm"},s.createElement(m(),{disabled:He===21?!1:nt.rulesLocked,className:"Font13 edit letterSpacing",onClick:et},s.createElement(c.Z,{icon:"edit",className:"Font15 mRight6"}),s.createElement("span",null,_l("\u7F16\u8F91")))),qe.workId&&qe.from===6&&s.createElement(x(),{className:"flex",size:"sm"},s.createElement(m(),{className:"Font13 bold",type:"primary",onClick:xt},_l("\u4FDD\u5B58"))),He===21&&(ze&&!fe().isEmpty(ze)&&gt||!ze)&&s.createElement(x(),{className:"flex mLeft6 mRight6",size:"sm"},s.createElement(m(),{className:"Font13",type:"primary",onClick:ut},s.createElement("span",null,nt.advancedSetting.sub||_l("\u63D0\u4EA4")))),!kt&&s.createElement(s.Fragment,null,s.createElement(D.Z,{classNames:"flex flexShink flexRow ellipsis mLeft6 mRight6 justifyContentCenter",customBtns:Rt,isSlice:!0,btnDisable:this.state.btnDisable,handleClick:function(on){Xe.recordRef.current&&Xe.recordRef.current.handleTriggerCustomBtn(on)}}),(!He||He!==21)&&(fn||Mt)&&!Rt.length&&!Et&&s.createElement(x(),{className:"flex mLeft6 mRight6",size:"sm"},s.createElement(m(),{className:"Font13",type:"primary",onClick:function(){return Xe.handleMoreOperation({allowDelete:fn,allowShare:Mt})}},s.createElement("span",null,_l("\u66F4\u591A\u64CD\u4F5C")))),!!Rt.length&&qe.appId&&!ft&&s.createElement("div",{className:"moreOperation",onClick:function(){return Xe.setState({recordActionVisible:!0})}},s.createElement(c.Z,{icon:"expand_less",className:"Font20"}))))}},{key:"renderEditContent",value:function(){var Xe=this.props,$e=Xe.onCancelSave,Ke=Xe.onSaveRecord;return s.createElement(s.Fragment,null,s.createElement(x(),{className:"flex",size:"sm"},s.createElement(m(),{className:"Font13 bold Gray_75",onClick:$e},s.createElement("span",null,_l("\u53D6\u6D88")))),s.createElement(x(),{className:"flex",size:"sm"},s.createElement(m(),{className:"Font13 bold",type:"primary",onClick:Ke},_l("\u4FDD\u5B58"))))}},{key:"renderRecordAction",value:function(){var Xe=this,$e=this.props,Ke=$e.recordInfo,Ue=$e.recordBase,He=$e.loadRecord,ze=this.state,gt=ze.recordActionVisible,Et=ze.customBtns,ft=ze.isFavorite;return s.createElement(G.Z,{appId:Ue.appId,worksheetId:Ue.worksheetId,viewId:Ue.viewId,rowId:Ue.recordId,sheetRow:Ke,customBtns:Et,switchPermit:Ke.switchPermit,loadRow:He,isFavorite:ft,loadCustomBtns:this.loadCustomBtns,recordActionVisible:gt,onShare:this.handleShare,hideRecordActionVisible:function(){Xe.setState({recordActionVisible:!1})},ref:this.recordRef,updateBtnDisabled:function(nt){Xe.setState({btnDisable:nt})},handleCollectRecord:this.handleCollectRecord})}},{key:"render",value:function(){var Xe=this.props.isEditRecord;return s.createElement(s.Fragment,null,s.createElement("div",{className:"btnsWrapper"},s.createElement("div",{className:"flexRow"},Xe?this.renderEditContent():this.renderContent())),this.renderRecordAction())}}]),St}(s.Component),ue=t(66140),pe=t(88106),Se=t(85315),ye=t(66814),J=t(91880),me=t.n(J),be=t(86735),xe=t(86995),Ae=t(69945),Ne=t(99732),Me=t(26358),Fe=t(71893),Be=(0,be.Z)([`
  background-color: #fff;
  a {
    text-decoration: none;
  }
  .am-button {
    height: 36px;
    line-height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 7px 0;
    &,
    &::before,
    &-active::before {
      color: #fff;
      font-size: 14px;
      border-radius: 50px !important;
      padding: 0 5px 0 10px;
    }
  }
`],[`
  background-color: #fff;
  a {
    text-decoration: none;
  }
  .am-button {
    height: 36px;
    line-height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 7px 0;
    &,
    &::before,
    &-active::before {
      color: #fff;
      font-size: 14px;
      border-radius: 50px !important;
      padding: 0 5px 0 10px;
    }
  }
`]),we=(0,Fe.ZP)(me())(Be),Ie=function(st){(0,O.default)(St,st);function St(Qe){(0,f.default)(this,St);var Xe=(0,C.default)(this,(St.__proto__||U()(St)).call(this,Qe));return Xe.handleSetEdit=function($e){Xe.props.updateActionParams({isEdit:$e,selectedRecordIds:[]})},Xe.removeRelationRows=function(){var $e=Xe.props,Ke=$e.base,Ue=$e.relationRow,He=$e.actionParams,ze=$e.updateRelationRows,gt=$e.permissionInfo,Et=$e.getDataType,ft=Ue.worksheet,qe=He.selectedRecordIds,nt=gt.isSubList;nt?ae.Z.deleteWorksheetRows({worksheetId:ft.worksheetId,rowIds:qe}).then(function(Ze){if(Ze.isSuccess){var et=Xe.props.relationRows,ut=et.filter(function(xt){return!qe.includes(xt.rowid)});ze(ut,-qe.length),Xe.handleSetEdit(!1),alert(_l("\u5220\u9664\u6210\u529F\uFF01"))}else alert(_l("\u5220\u9664\u5931\u8D25\uFF01"),2)}):ae.Z.updateRowRelationRows({worksheetId:Ke.worksheetId,appId:Ke.appId,viewId:Ke.viewId,rowId:Ke.rowId,controlId:Ke.controlId,isAdd:!1,rowIds:qe,updateType:Et}).then(function(Ze){if(Ze.isSuccess){var et=Xe.props.relationRows,ut=et.filter(function(xt){return!qe.includes(xt.rowid)});ze(ut,-qe.length),Xe.handleSetEdit(!1),alert(_l("\u53D6\u6D88\u5173\u8054\u6210\u529F\uFF01"))}else alert(_l("\u53D6\u6D88\u5173\u8054\u5931\u8D25\uFF01"),2)}).catch(function(Ze){alert(_l("\u53D6\u6D88\u5173\u8054\u5931\u8D25\uFF01"),2)})},Xe.handleSetShowRelevanceRecord=function($e){var Ke=Xe.props.relationRow,Ue=Ke.worksheet.entityName||_l("\u8BB0\u5F55");Xe.setState({showRelevanceRecord:$e,title:$e?_l("\u9009\u62E9%0",Ue):_l("%0\u8BE6\u60C5",Ue)})},Xe.state={showRelevanceRecord:!1,showCreateRecord:!1,recordkeyWords:"",title:""},Xe}return(0,V.default)(St,[{key:"addRelationRows",value:function(Xe){var $e=this,Ke=this.props,Ue=Ke.base,He=Ke.relationRows,ze=Ke.getDataType,gt=Ke.rowInfo,Et=He.map(function(Ze){return Ze.rowid}),ft=Xe.filter(function(Ze){return!Et.includes(Ze.rowid)});if(fe().isEmpty(ft)){alert(_l("\u65E0\u6CD5\u5173\u8054\u5DF2\u7ECF\u5173\u8054\u8FC7\u7684\u8BB0\u5F55"),2);return}var qe=fe().find(gt.templateControls,{controlId:Ue.controlId})||{},nt=qe.type;if(nt===51){this.pushRelationRows(ft);return}ae.Z.updateRowRelationRows({worksheetId:Ue.worksheetId,appId:Ue.appId,viewId:Ue.viewId,rowId:Ue.rowId,controlId:Ue.controlId,isAdd:!0,rowIds:ft.map(function(Ze){return Ze.rowid}),updateType:ze}).then(function(Ze){Ze.isSuccess?(alert(_l("\u6DFB\u52A0\u8BB0\u5F55\u6210\u529F\uFF01")),$e.pushRelationRows(ft)):alert(_l("\u6DFB\u52A0\u8BB0\u5F55\u5931\u8D25\uFF01"),2)}).catch(function(Ze){alert(_l("\u6DFB\u52A0\u8BB0\u5F55\u5931\u8D25\uFF01"),2)})}},{key:"pushRelationRows",value:function(Xe){var $e=this.props,Ke=$e.relationRows,Ue=$e.updateRelationRows,He=Xe.concat(Ke);Ue(He,Xe.length)}},{key:"renderDialog",value:function(){var Xe=this,$e=this.state,Ke=$e.showCreateRecord,Ue=$e.recordkeyWords,He=$e.showRelevanceRecord,ze=this.props,gt=ze.base,Et=ze.rowInfo,ft=ze.relationRow,qe=ze.actionParams,nt=ze.permissionInfo,Ze=qe.showControls,et=qe.coverCid,ut=ft.worksheet,xt=gt.rowId,wt=gt.controlId,kt=gt.worksheetId,Rt=nt.isCreate,jt=nt.isSubList,fn=nt.activeRelateSheetControl,Mt=nt.onlyRelateByScanCode,sn=Mt&&fe().get(fn,"advancedSetting.dismanual")==="1",on=this.props.formData||Et.templateControls.filter(fe().identity),en=void 0;try{var $t,an=on.filter(function(tn){return tn&&tn.attribute===1});en=an&&{name:an.value,sid:xt,type:8,sourcevalue:r()((0,n.default)({},fe().assign.apply(fe(),(0,Se.Z)(on.map(function(tn){return(0,pe.default)({},tn.controlId,tn.value)}))),($t={},(0,pe.default)($t,an.controlId,an.value),(0,pe.default)($t,"rowid",xt),$t)))}}catch(tn){}return s.createElement(s.Fragment,null,He&&s.createElement(Ne.Z,{multiple:!0,control:fe().find(Et.templateControls,{controlId:wt}),formData:on,visible:He,allowNewRecord:Rt&&!fe().get(window,"shareState.isPublicForm"),disabledManualWrite:sn,coverCid:et,keyWords:Ue,showControls:Ze,appId:ut.appId,parentWorksheetId:kt,filterRelatesheetControlIds:[wt],controlId:wt,recordId:xt,filterRowIds:[xt],allowAdd:!1,entityName:ut.entityName,relateSheetBeLongProject:ut.projectId,relateSheetId:ut.worksheetId,getDataType:this.props.getDataType,relationRowIds:(this.props.relationRows||[]).map(function(tn){return tn.rowid}),onClose:function(){Xe.setState({recordkeyWords:""}),Xe.handleSetShowRelevanceRecord(!1)},onOk:function(mt){Xe.addRelationRows(mt)}}),Ke&&s.createElement(Ae.Z,{hideFillNext:!0,className:"worksheetRelateNewRecord",title:jt&&_l("\u521B\u5EFA%0",fn.controlName),appId:ut.appId,worksheetId:ut.worksheetId,projectId:ut.projectId,addType:2,entityName:ut.entityName,filterRelateSheetIds:[ut.worksheetId],filterRelatesheetControlIds:[wt],defaultRelatedSheet:{worksheetId:kt,relateSheetControlId:fn.controlId,value:en},visible:Ke,hideNewRecord:function(){Xe.setState({showCreateRecord:!1})},onAdd:function(mt){Xe.addRelationRows([mt])}}))}},{key:"renderRelateScanQRCodeBtn",value:function(){var Xe=this,$e=this.props,Ke=$e.base,Ue=$e.rowInfo,He=$e.relationRow,ze=He.worksheet,gt=this.props.formData||Ue.templateControls,Et=fe().find(gt,{controlId:Ke.controlId}),ft=(0,Me.zK)({control:Et,formData:gt});return s.createElement(xe.Z,{projectId:ze.projectId,worksheetId:ze.worksheetId,filterControls:ft,control:Et,onChange:function(nt){Xe.addRelationRows([nt])},onOpenRecordCardListDialog:function(nt){var Ze=fe().get(Et,"advancedSetting")||{},et=Ze.scanlink,ut=Ze.scancontrol;et!=="1"&&RegExp.isURL(nt)||ut!=="1"&&!RegExp.isURL(nt)||Xe.setState({showRelevanceRecord:!0,recordkeyWords:nt})}},s.createElement(m(),{type:"primary"},s.createElement(s.Fragment,null,s.createElement(c.Z,{icon:"qr_code_19",className:"Font20"}),_l("\u626B\u7801\u5173\u8054"))))}},{key:"renderEdit",value:function(){var Xe=this,$e=this.props,Ke=$e.actionParams,Ue=$e.permissionInfo,He=Ke.isEdit,ze=Ke.selectedRecordIds,gt=Ue.isRelevance,Et=Ue.isSubList;return s.createElement(s.Fragment,null,s.createElement(x(),{size:"sm",className:"flex"},s.createElement(m(),{className:"edit Gray_75 bold",onClick:function(){Xe.handleSetEdit(!1)}},_l("\u53D6\u6D88"))),(gt||!!ze.length)&&s.createElement(x(),{size:"sm",className:"flex"},s.createElement(m(),{className:"bold",type:"primary",disabled:!ze.length,onClick:function(){te().alert(Et?_l("\u786E\u8BA4\u5220\u9664\u5417\uFF1F"):_l("\u786E\u8BA4\u53D6\u6D88\u9009\u4E2D\u7684\u5173\u8054\u5173\u7CFB\u5417\uFF1F"),"",[{text:_l("\u53D6\u6D88"),onPress:function(){}},{text:_l("\u786E\u8BA4"),onPress:function(){Xe.removeRelationRows()}}])}},ze.length?Et?_l("\u786E\u8BA4\u5220\u9664(%0)",ze.length):_l("\u53D6\u6D88\u5173\u8054(%0)",ze.length):_l("\u53D6\u6D88\u5173\u8054"))))}},{key:"renderContent",value:function(){var Xe=this,$e=this.props,Ke=$e.relationRows,Ue=$e.permissionInfo,He=$e.relationRow,ze=$e.rowInfo,gt=ze===void 0?{}:ze,Et=$e.controlId,ft=$e.base,qe=$e.rulesLocked,nt=Ue.isCreate,Ze=Ue.isRelevance,et=Ue.allowRemoveRelation,ut=Ue.onlyRelateByScanCode,xt=Ue.activeRelateSheetControl,wt=Ue.hasEdit,kt=ut&&fe().get(xt,"advancedSetting.dismanual")==="1",Rt=He.worksheet.entityName||_l("\u5173\u8054"),jt=fe().find(gt.templateControls||[],{controlId:Et})||{},fn=(0,b.kM)(jt,ft.rowId?3:2),Mt=jt.type===51?ft.rowId&&fn.editable&&jt.enumDefault2!==1&&jt.enumDefault2!==11&&!window.isPublicWorksheet:Ze||nt;return s.createElement(s.Fragment,null,jt.type!==51&&et&&wt&&!qe&&s.createElement(x(),{size:"sm",className:"flex"},s.createElement(m(),{disabled:!Ke.length,className:"edit Gray_75 bold",onClick:function(){Xe.handleSetEdit(!0)}},_l("\u6279\u91CF\u64CD\u4F5C"))),Mt&&!qe&&s.createElement(s.Fragment,null,ut&&s.createElement(x(),{size:"sm",className:"flex"},this.renderRelateScanQRCodeBtn()),!kt&&s.createElement(x(),{size:"sm",className:"flex"},s.createElement(m(),{type:"primary",className:"bold",onClick:function(){if(jt.type===51){Xe.setState({showCreateRecord:!0});return}if(Ze){Xe.handleSetShowRelevanceRecord(!0);return}if(nt){Xe.setState({showCreateRecord:!0});return}}},s.createElement(s.Fragment,null,s.createElement(c.Z,{icon:"add",className:"Font20"}),Ze?_l("\u6DFB\u52A0"):_l("\u65B0\u5EFA"),Rt)))))}},{key:"render",value:function(){var Xe=this.state.title,$e=this.props,Ke=$e.actionParams,Ue=$e.permissionInfo,He=$e.rowInfo,ze=He===void 0?{}:He,gt=$e.controlId,Et=$e.base,ft=Et===void 0?{}:Et,qe=Ke.isEdit,nt=Ue.isRelevance,Ze=Ue.hasEdit,et=Ue.allowRemoveRelation,ut=fe().find(ze.templateControls||[],{controlId:gt})||{},xt=(0,b.kM)(ut,ft.rowId?3:2),wt=ft.rowId&&xt.editable&&ut.enumDefault2!==1&&ut.enumDefault2!==11&&!window.isPublicWorksheet;return!Ze||ut.type===51&&!wt||!nt&&!Ze&&!et?null:s.createElement(we,{justify:"center",align:"center"},Xe&&s.createElement(ie(),{title:Xe}),qe?this.renderEdit():this.renderContent(),this.renderDialog())}}]),St}(s.Component);const ge=(0,j.$j)(function(st){return(0,n.default)({},fe().pick(st.mobile,["base","rowInfo","relationRow","relationRows","actionParams","permissionInfo"]))},function(st){return(0,A.DE)(fe().pick(N,["updateActionParams","updatePageIndex","updateRelationRows"]),st)})(Ie);var Re=t(537),Pe=t(73553),ke=(0,be.Z)([`
  padding: 0 10px;
  width: auto;
  height: 32px;
  color: #757575;
  text-align: center;
  line-height: 32px;
  border-radius: 16px;
  background-color: #fff;
  box-shadow: 0 3px 6px 0px rgba(0, 0, 0, 0.16);
  position: fixed;
  bottom: 60px;
  right: 20px;
  z-index: 99;
  &.low {
    bottom: 20px;
  }
`],[`
  padding: 0 10px;
  width: auto;
  height: 32px;
  color: #757575;
  text-align: center;
  line-height: 32px;
  border-radius: 16px;
  background-color: #fff;
  box-shadow: 0 3px 6px 0px rgba(0, 0, 0, 0.16);
  position: fixed;
  bottom: 60px;
  right: 20px;
  z-index: 99;
  &.low {
    bottom: 20px;
  }
`]),We=Fe.ZP.div(ke),Ve=function(st){(0,O.default)(St,st);function St(Qe){(0,f.default)(this,St);var Xe=(0,C.default)(this,(St.__proto__||U()(St)).call(this,Qe));return Xe.getDiscussionsCount=function(){var $e=Xe.props,Ke=$e.worksheetId,Ue=$e.rowId,He=$e.allowExAccountDiscuss,ze=$e.exAccountDiscussEnum,gt=0;md.global.Account.isPortal&&He&&ze===1&&(gt=2),Re.Z.getDiscussionsCount({sourceId:Ke+"|"+Ue,sourceType:8,entityType:gt}).then(function(Et){Xe.setState({discussionCount:Et.data})})},Xe.state={discussionCount:0,visible:!1},Xe}return(0,V.default)(St,[{key:"componentDidMount",value:function(){var Xe=this.props.autoOpenDiscuss;this.getDiscussionsCount(),Xe&&this.setState({visible:!0})}},{key:"render",value:function(){var Xe=this,$e=this.props,Ke=$e.appId,Ue=$e.worksheetId,He=$e.rowId,ze=$e.viewId,gt=$e.onClick,Et=gt===void 0?fe().noop:gt,ft=$e.autoOpenDiscuss,qe=$e.originalData,nt=$e.className,Ze=$e.recordDiscussSwitch,et=this.state,ut=et.discussionCount,xt=et.visible;return s.createElement(s.Fragment,null,s.createElement(We,{className:nt,onClick:function(){Xe.setState({visible:!0}),Et()}},s.createElement(c.Z,{icon:Ze?"chat":"assignment",className:"TxtMiddle Font20"}),Ze&&s.createElement("span",{className:"mLeft5"},ut)),s.createElement(Pe.default,{isModal:!0,className:"full",visible:xt,appId:Ke,worksheetId:Ue,rowId:He,viewId:ze,originalData:qe,projectId:this.props.projectId,onClose:function(){Xe.setState({visible:!1}),ft&&window.mobileNavigateTo(location.pathname,!0)},onAddCount:function(){Xe.setState({discussionCount:ut+1})}}))}}]),St}(s.Component),it=t(35989),Ge=t(25734),pt=t(12496),ot,vt,At=/(swf|avi|flv|mpg|rm|mov|wav|asf|3gp|mkv|rmvb|mp4|gif|png|jpg|jpeg|webp|svg|psd|bmp|tif|tiff)/i,yt=(ot=(0,j.$j)(function(st){return(0,n.default)({},_.pick(st.mobile,["relationRow"]))},function(st){return(0,A.DE)((0,n.default)({},_.pick(N,["updateRelationRows"])),st)}),ot(vt=function(st){(0,O.default)(St,st);function St(Qe){var Xe=this;(0,f.default)(this,St);var $e=(0,C.default)(this,(St.__proto__||U()(St)).call(this,Qe));return $e.customwidget=s.createRef(),$e.loadRecord=(0,Z.Z)(d().mark(function Ke(){var Ue,He,ze,gt,Et,ft,qe,nt,Ze,et,ut,xt,wt,kt,Rt,jt,fn,Mt,sn,on,en,$t;return d().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:return Ue=$e.props,He=Ue.from,ze=Ue.view,gt=ze===void 0?{}:ze,Et=Ue.controls,ft=Ue.appId,qe=Ue.viewId,nt=Ue.worksheetId,Ze=Ue.instanceId,et=Ue.workId,ut=Ue.isWorksheetQuery,xt=Ue.needUpdateControlIds,wt=$e.state,kt=wt.recordId,Rt=wt.tempFormData,tn.prev=2,tn.next=5,(0,pt.Om)({appId:ft,viewId:qe,worksheetId:nt,instanceId:Ze,workId:et,recordId:kt,getType:(0,de.AW)(He),getRules:!0,controls:Et});case 5:return jt=tn.sent,tn.next=8,ae.Z.getSwitchPermit({appId:ft,worksheetId:nt});case 8:fn=tn.sent,jt.worksheetName=(0,Ce.T3)(ft,nt).name||jt.worksheetName,jt.formData=(0,de.zj)(ft,jt.formData).filter(function(mt){return mt.controlId!=="daid"}).map(function(mt){return(0,n.default)({},mt,{hidden:mt.hidden||(gt.controls||_.get(jt,"view.controls")||[]).includes(mt.controlId)})}),Mt=xt?Rt.filter(function(mt){return!_.find(xt,function(Lt){return mt.controlId===Lt})}).concat(xt.map(function(mt){return _.find(jt.formData,function(Lt){return Lt.controlId===mt})}).filter(_.identity)):jt.formData,sn=(0,Ge.Mb)({rules:jt.rules,data:jt.formData}).filter(function(mt){if(mt.type===34){var Lt=_.find(Mt,function(zt){return mt.sectionId==zt.controlId});return(Lt?!mt.hidden&&(0,b.kM)(mt,He).visible:!_.get(Lt,"hidden")&&(0,b.kM)(Lt,He))&&!_.includes(["110","010","000","011"],mt.fieldPermission)}}).map(function(mt){return mt.controlId}),on=jt.advancedSetting.coverid,en=_.find(jt.formData,function(mt){return mt.controlId===on})||{},$t=(0,n.default)({},jt,{switchPermit:fn,isWorksheetQuery:ut||_.isUndefined(ut),formStyleImggeData:on?JSON.parse(en.value||"[]").filter(function(mt){return At.test(mt.ext)}):[],rulesLocked:(0,Ge.tf)(jt.rules,jt.formData,kt)}),(_.get(window,"shareState.shareId")||window.shareAuthor)&&($t.allowEdit=!1,$t.allowDelete=!1),$e.setState({random:Date.now(),recordInfo:$t,recordBase:{from:He,appId:_.isUndefined(ft)?$t.appId:ft,worksheetId:nt,viewId:qe,instanceId:Ze,workId:et,recordId:kt},tempFormData:jt.formData,childTableControlIds:_.isEmpty(sn)?void 0:sn,loading:!1,refreshBtnNeedLoading:!1}),tn.next=24;break;case 20:tn.prev=20,tn.t0=tn.catch(2),console.error(tn.t0),$e.setState({abnormal:!0,loading:!1,refreshBtnNeedLoading:!1});case 24:case"end":return tn.stop()}},Ke,Xe,[[2,20]])})),$e.refreshRecord=function(){$e.state.isEditRecord||$e.state.refreshBtnNeedLoading||($e.setState({refreshBtnNeedLoading:!0}),$e.loadRecord())},$e.handleFormChange=function(Ke){var Ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],He=$e.state.recordBase;$e.setState({formChanged:!0});var ze=He.viewId,gt=He.recordId;if(ze){var Et=(0,de.Dy)(Ke,void 0,{updateControlIds:Ue});(0,de.l4)("recordInfo",ze+"-"+gt,r()({create_at:Date.now(),value:Et}))}},$e.getDraftParams=function(Ke){var Ue=$e.props.draftFormControls,He=Ue===void 0?[]:Ue,ze=Ke.filter(function(ft){return ft.controlId!=="ownerid"}).filter(function(ft){return ft.type!==30&&ft.type!==31&&ft.type!==32&&ft.type!==33}).filter(function(ft){return!(0,de.hB)(ft.value)}),gt=ze.map(function(ft){return ft.controlId}),Et=He.filter(function(ft){return!_.includes(gt,ft.controlId)}).concat(ze);return Et.map(function(ft){return ft.type===34?(0,b.jz)((0,n.default)({},ft,{value:_.isObject(ft.value)?(0,n.default)({},ft.value,{isAdd:!0,updated:[]}):ft.value}),{isNewRecord:!0,isDraft:!0}):ft.type===14?(0,b.jz)(ft,{isSubListCopy:!0,isNewRecord:!0,isDraft:!0}):(0,b.jz)(ft,{isNewRecord:!0,isDraft:!0})})},$e.saveDraftData=function(Ke){var Ue=Ke.draftType;if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}if(Ue==="submit")return $e.submitType="draft",$e.setState({submitLoading:!0}),$e.customwidget.current.submitFormData();$e.setState({submitLoading:!0});var He=$e.customwidget.current.getSubmitData({silent:!0,ignoreAlert:!0}),ze=He.data,gt=$e.state,Et=gt.recordInfo,ft=gt.recordBase,qe=ft.appId,nt=ft.viewId,Ze=ft.worksheetId,et=ft.recordId;ae.Z.addWorksheetRow({projectId:Et.projectId,appId:qe,worksheetId:Ze,viewId:nt,draftRowId:et,rowStatus:Ue==="submit"?11:21,pushUniqueId:md.global.Config.pushUniqueId,receiveControls:$e.getDraftParams(ze)}).then(function(ut){ut.resultCode===1?(alert(Ue==="submit"?_l("\u8BB0\u5F55\u6DFB\u52A0\u6210\u529F"):_l("\u8BB0\u5F55\u4FDD\u5B58\u6210\u529F")),$e.props.onClose(),$e.props.getDraftData({appId:qe,worksheetId:Ze})):ut.resultCode===2?alert(_l("\u5F53\u524D\u8349\u7A3F\u5DF2\u4FDD\u5B58\uFF0C\u8BF7\u52FF\u91CD\u590D\u63D0\u4EA4"),2):alert(Ue==="submit"?_l("\u8BB0\u5F55\u6DFB\u52A0\u5931\u8D25"):_l("\u8BB0\u5F55\u4FDD\u5B58\u5931\u8D25"),2)}).catch(function(ut){_.isObject(ut)?alert(ut.errorMessage||_l("\u8BB0\u5F55\u6DFB\u52A0\u5931\u8D25"),2):alert(ut||_l("\u8BB0\u5F55\u6DFB\u52A0\u5931\u8D25"),2)})},$e.loadTempValue=function(Ke){var Ue=$e.state,He=Ue.recordBase,ze=Ue.recordInfo,gt=Ue.tempFormData,Et=Ue.formChanged,ft=He.recordId,qe=He.viewId;if(qe){var nt=void 0,Ze=function(){if(nt&&!Et){var ut=safeParse(nt);if(_.isEmpty(ut))return;var xt=ut.create_at,wt=ut.value,kt=new Date(xt),Rt=new Date(Ke);kt>Rt&&($e.setState({restoreVisible:kt,tempFormData:gt.map(function(jt){return wt[jt.controlId]&&!_.includes([29,34],jt.type)?(0,n.default)({},jt,{value:jt.type===34?{rows:wt[jt.controlId]}:wt[jt.controlId]}):jt}),random:Date.now()}),setTimeout(function(){$e.customwidget.current.dataFormat.controlIds=gt.filter(function(jt){return wt[jt.controlId]&&!_.includes([29,34],jt.type)}).map(function(jt){return jt.controlId})},10))}};window.isWxWork?(0,de.ip)(""+md.global.Account.accountId+qe+"-"+ft+"-recordInfo").then(function(et){nt=et,Ze()}):(nt=localStorage.getItem("recordInfo_"+qe+"-"+ft),Ze())}},$e.handleSubmit=function(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ue=Ke.callback,He=Ke.noSave,ze=Ke.ignoreError,gt=Ke.ignoreAlert,Et=gt===void 0?!1:gt,ft=Ke.silent,qe=ft===void 0?!1:ft;if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}$e.submitOptions={callback:Ue,noSave:He,ignoreError:ze},$e.setState({submitLoading:!0}),$e.customwidget.current.submitFormData({ignoreAlert:Et,silent:qe})},$e.handleCancelSave=function(){var Ke=$e.state.recordBase;(0,de.jY)("recordInfo",Ke.viewId+"-"+Ke.recordId),$e.setState({formChanged:!1,isEditRecord:!1,random:Date.now()})},$e.handleTriggerSave=function(){$e.setState({formChanged:!1,submitLoading:!0}),$e.customwidget.current.submitFormData()},$e.handleSave=function(Ke,Ue){var He=Ue.data,ze=Ue.updateControlIds,gt=$e.props.allowEmptySubmit,Et=$e.submitOptions||{},ft=Et.callback,qe=ft===void 0?function(){}:ft,nt=Et.noSave,Ze=Et.ignoreError,et=$e.state,ut=et.recordInfo,xt=et.recordBase,wt=et.tempFormData,kt=_.get(window,"shareState.isPublicForm")&&window.shareState.shareId;if(Ke&&!Ze){qe({error:!0}),$e.setState({submitLoading:!1});return}var Rt=void 0;if(Rt&&!Ze){alert(_l("\u8BF7\u6B63\u786E\u586B\u5199%0",ut.entityName),3),qe({error:!0}),$e.setState({submitLoading:!1});return}if(nt){$e.setState({submitLoading:!1}),qe();return}if($e.submitType==="draft")ae.Z.addWorksheetRow({projectId:ut.projectId,appId:xt.appId,worksheetId:xt.worksheetId,viewId:xt.viewId,draftRowId:xt.recordId,rowStatus:11,pushUniqueId:md.global.Config.pushUniqueId,receiveControls:$e.getDraftParams(He)}).then(function($t){if($t.resultCode===1)alert(_l("\u8BB0\u5F55\u6DFB\u52A0\u6210\u529F")),$e.props.onClose();else if($t.resultCode===11&&$t.badData&&!_.isEmpty($t.badData)){var an=_.find(He,function(tn){return _.includes($t.badData,tn.controlId)})||{};alert(""+_l("%0\u4E0D\u5141\u8BB8\u91CD\u590D",an.controlName),3),$e.setState({submitLoading:!1})}else alert(_l("\u8BB0\u5F55\u6DFB\u52A0\u5931\u8D25"),2),$e.setState({submitLoading:!1})}).catch(function($t){_.isObject($t)?alert($t.errorMessage||_l("\u8BB0\u5F55\u6DFB\u52A0\u5931\u8D25"),2):alert($t||_l("\u8BB0\u5F55\u6DFB\u52A0\u5931\u8D25"),2)});else{var jt=$e.props,fn=jt.from,Mt=jt.instanceId,sn=jt.workId,on=jt.updateSuccess,en=jt.workflow;(0,pt.Vs)({appId:xt.appId,worksheetId:xt.worksheetId,viewId:xt.viewId,recordId:xt.recordId,getType:(0,de.AW)(fn),projectId:ut.projectId,instanceId:Mt,workId:sn,data:He,updateControlIds:ze,updateSuccess:on,isDraft:fn===E.GP.DRAFT,allowEmptySubmit:gt,triggerUniqueError:function(an){$e.customwidget.current&&_.isFunction($e.customwidget.current.uniqueErrorUpdate)&&$e.customwidget.current.uniqueErrorUpdate(an)}},function($t,an,tn){if($e.setState({submitLoading:!1}),$t)qe({error:$t});else{var mt=wt.map(function(Lt){return _.assign({},Lt,{value:an[Lt.controlId]})});$e.setState({isEditRecord:!1,random:Date.now(),recordInfo:y()(ut,{formData:mt}),tempFormData:mt}),_.isFunction(qe)&&qe({logId:tn}),en||$e.loadRecord(),$e.refreshSubList(He,ze),_.isFunction($e.refreshEvents.loadCustomBtns)&&!kt&&$e.refreshEvents.loadCustomBtns()}})}},$e.refreshSubList=function(Ke,Ue){Ke.filter(function(He){return _.find(Ue,function(ze){return He.controlId===ze})}).forEach(function(He){_.isFunction($e.refreshEvents[He.controlId])&&$e.refreshEvents[He.controlId]({noLoading:!0})})},$e.state={loading:!0,submitLoading:!1,refreshBtnNeedLoading:!1,formChanged:!1,random:"",isEditRecord:!1,abnormal:!1,recordInfo:{},recordBase:{},tempFormData:[],externalPortalConfig:{},recordId:Qe.recordId,currentTab:{},childTableControlIds:[],restoreVisible:!1,canSubmitDraft:!1},$e.submitType="",$e.refreshEvents={},$e.cellObjs={},$e}return(0,V.default)(St,[{key:"componentDidMount",value:function(){this.loadRecord(),this.props.getDataType!==21&&!this.isPublicShare&&!_.get(window,"shareState.isPublicForm")&&!_.get(window,"shareState.isPublicWorkflowRecord")&&this.getPortalConfigSet()}},{key:"componentDidUpdate",value:function(Xe){var $e=this.props.relationRow,Ke=this.state.currentTab;this.customwidget&&this.customwidget.current&&Ke.type===29&&!_.isEqual($e,Xe.relationRow)&&this.customwidget.current.dataFormat.updateDataSource({controlId:Ke.controlId,value:_.isNaN($e.count)?Ke.value:$e.count})}},{key:"getPortalConfigSet",value:function(){var Xe=this,$e=this.props.appId;it.Z.getConfig({appId:$e}).then(function(Ke){Xe.setState({externalPortalConfig:Ke})})}},{key:"renderRecordBtns",value:function(){var Xe=this,$e=this.props.getDataType,Ke=this.state,Ue=Ke.isEditRecord,He=Ke.recordInfo,ze=Ke.recordBase;return s.createElement(ve,(0,n.default)({isEditRecord:Ue,isPublicShare:this.isPublicShare,recordBase:ze,recordInfo:He,childTableControlIds:this.state.childTableControlIds,canSubmitDraft:this.state.canSubmitDraft,loadRecord:this.loadRecord,addRefreshEvents:function(Et,ft){Xe.refreshEvents[Et]=ft},onEditRecord:function(){Xe.setState({isEditRecord:!0,random:Date.now()},function(){Xe.loadTempValue(He.updateTime)})},onSubmitRecord:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}Xe.saveDraftData({draftType:"submit"})},onCancelSave:function(){Xe.state.formChanged?te().alert(_l("\u662F\u5426\u4FDD\u5B58\u4FEE\u6539\u7684\u8BB0\u5F55 ?"),"",[{text:_l("\u653E\u5F03"),style:"default",onPress:Xe.handleCancelSave},{text:_l("\u4FDD\u5B58"),style:{},onPress:function(){return $e===21?Xe.saveDraftData({draftType:"draft"}):Xe.handleTriggerSave()}}]):Xe.handleCancelSave()},onSaveRecord:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}if($e===21)return Xe.saveDraftData({draftType:"draft"});Xe.handleTriggerSave()}},this.props))}},{key:"renderFooter",value:function(){var Xe=this,$e=this.props,Ke=$e.hideOtherOperate,Ue=$e.footer,He=this.state,ze=He.recordInfo,gt=ze===void 0?{}:ze,Et=He.recordBase,ft=He.currentTab,qe=He.isEditRecord,nt=He.tempFormData;return Ue&&!Et.viewId?s.cloneElement(Ue,{onSubmit:this.handleSubmit,handleClickFlow:function(){return Xe.setState({random:Date.now()})}}):this.isPublicShare||ft.type===51&&!qe||ft.id==="approve"?null:ft.type===29&&!qe?s.createElement(ge,{controlId:ft.id,getDataType:this.props.getDataType,formData:nt,rulesLocked:gt.rulesLocked}):this.renderRecordBtns()}},{key:"renderChatCount",value:function(){var Xe=this.state,$e=Xe.isEditRecord,Ke=Xe.currentTab,Ue=Xe.externalPortalConfig,He=Xe.recordBase,ze=Xe.recordInfo,gt=this.props,Et=gt.getDataType,ft=gt.isModal,qe=gt.isSubList,nt=gt.chartEntryStyle,Ze=nt===void 0?{}:nt,et=Ue.allowExAccountDiscuss,ut=Ue.exAccountDiscussEnum,xt=He.appId,wt=He.worksheetId,kt=He.viewId,Rt=He.recordId,jt=ze.switchPermit,fn=(0,w.v)(K.RX.recordDiscussSwitch,jt,kt),Mt=(0,w.v)(K.RX.recordLogSwitch,jt,kt),sn=this.isPublicShare||_.get(window,"shareState.isPublicForm")||_.get(window,"shareState.isPublicWorkflowRecord"),on=!sn&&!md.global.Account.isPortal&&(fn||Mt)||md.global.Account.isPortal&&et&&fn;if((!Et||Et!==21)&&on&&!$e&&!qe)return s.createElement("div",{className:"extraAction",style:(0,n.default)({bottom:Ke.id=="approve"?13:void 0},Ze)},s.createElement("div",{className:"chatMessageContainer"},s.createElement(Ve,{allowExAccountDiscuss:et,exAccountDiscussEnum:ut,recordDiscussSwitch:(0,w.v)(K.RX.recordDiscussSwitch,jt,kt),recordLogSwitch:(0,w.v)(K.RX.recordLogSwitch,jt,kt),worksheetId:wt,rowId:Rt,viewId:kt,appId:xt,autoOpenDiscuss:!ft&&location.search.includes("viewDiscuss"),originalData:ze.formData,projectId:ze.projectId})))}},{key:"render",value:function(){var Xe=this,$e=this.props,Ke=$e.recordId,Ue=$e.isModal,He=$e.getDataType,ze=$e.onClose,gt=$e.header,Et=$e.workflow,ft=$e.relationRow,qe=$e.view,nt=this.state,Ze=nt.random,et=nt.isEditRecord,ut=nt.loading,xt=nt.submitLoading,wt=nt.refreshBtnNeedLoading,kt=nt.abnormal,Rt=nt.restoreVisible,jt=nt.recordInfo,fn=nt.recordBase,Mt=nt.tempFormData,sn=nt.currentTab,on=nt.externalPortalConfig;if(ut)return s.createElement(ue.g,null);if(kt){var en=jt.resultCode,$t=jt.entityName,an=$t||_l("\u8BB0\u5F55"),tn=en===7?_l("\u65E0\u6743\u9650\u67E5\u770B%0",an):_l("%0\u5DF2\u88AB\u5220\u9664\u6216\u5206\u4EAB\u5DF2\u5173\u95ED",an);return s.createElement(ue.h,{errorMsg:tn,onClose:ze})}var mt=!Ue&&jt.projectId,Lt=mt?g.Z:s.Fragment;return s.createElement(Lt,mt?{projectId:jt.projectId}:{},s.createElement("div",{className:I()("mobileSheetRowRecord flexColumn h100","mobileSheetRowRecord-"+Ke)},xt&&s.createElement("div",{className:"loadingMask"},s.createElement(ce.Z,null)),s.createElement(z,{view:qe,customwidget:this.customwidget,isPublicShare:this.isPublicShare,random:Ze,isEditRecord:et,isModal:Ue,refreshBtnNeedLoading:wt,recordBase:fn,registerCell:function(Zt){var Nt=Zt.item,ct=Zt.cell;return Xe.cellObjs[Nt.controlId]={item:Nt,cell:ct}},controlProps:{addRefreshEvents:function(Zt,Nt){Xe.refreshEvents[Zt]=Nt},refreshRecord:this.refreshRecord},getChildTableControlIds:function(Zt){var Nt=Xe.state.childTableControlIds;Nt.every(function(ct){return _.includes(Zt,ct)})&&Xe.setState({canSubmitDraft:!0})},changeMobileTab:function(Zt){Xe.props.updateRelationRows([],ft.count||0),Xe.setState({currentTab:(0,n.default)({id:Zt.controlId},Zt)})},externalPortalConfig:on,recordInfo:jt,formData:Mt,getDataType:He,currentTab:sn,header:gt,workflow:Et,onChange:this.handleFormChange,onSave:this.handleSave,onClose:ze}),this.renderFooter(),this.renderChatCount(),et&&s.createElement(Ae.V,{visible:Rt,title:Rt?_l("\u5DF2\u6062\u590D\u5230\u4E0A\u6B21\u4E2D\u65AD\u5185\u5BB9\uFF08%0\uFF09",window.createTimeSpan(new Date(Rt))):_l("\u5DF2\u6062\u590D\u5230\u4E0A\u6B21\u4E2D\u65AD\u5185\u5BB9"),updateText:_l("\u786E\u8BA4"),cancelText:_l("\u53D6\u6D88"),onUpdate:function(){(0,de.jY)("recordInfo",fn.viewId+"-"+fn.recordId),Xe.setState({restoreVisible:!1})},onCancel:function(){(0,de.jY)("recordInfo",fn.viewId+"-"+fn.recordId),Xe.setState({restoreVisible:!1,tempFormData:jt.formData||[],random:Date.now()})}})))}},{key:"isPublicShare",get:function(){return _.get(window,"shareState.isPublicRecord")||_.get(window,"shareState.isPublicView")||_.get(window,"shareState.isPublicPage")||_.get(window,"shareState.isPublicQuery")||_.get(window,"shareState.isPublicPrint")}}]),St}(s.Component))||vt)},66140:(lt,Te,t)=>{"use strict";if(t.d(Te,{g:()=>d,h:()=>Z}),!/^(1887|7596|7798)$/.test(t.j))var ce=t(33867);var g=t(66814),p=t.n(g),L=t(91880),te=t.n(L),R=t(48388),y=t.n(R),a=t(29914),r=t.n(a),o=t(67294),d=function(U){return o.createElement("div",{className:"flexColumn h100"},o.createElement(te(),{justify:"center",align:"center",className:"h100"},o.createElement(r(),{size:"large"})))},Z=function(U){var f=U.errorMsg,V=U.onClose;return o.createElement("div",{className:"flexColumn h100 valignWrapper justifyContentCenter"},V&&o.createElement(ce.Z,{icon:"closeelement-bg-circle",className:"Gray_9e Font22 Absolute",style:{right:20,top:20},onClick:V}),o.createElement(ce.Z,{icon:"task-folder-message",className:"Font56 Gray_df"}),o.createElement("p",{className:"mTop10"},f))}},21313:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>le,u:()=>E});var ce=t(20148),g=t(60385),p=t.n(g),L=t(80426),te=t(59012),R=t.n(te),y=t(63627),a=t(81982),r=t.n(a),o=t(88239),d=t(25273),Z=t(33867),H=t(54208),U=t(85315),f=t(85105),V=t.n(f),C=t(99663),O=t(22600),n=t(49135),s=t(93196),j=t(56118),A=t(80181),S=t.n(A),I=t(67294),c=t(93967),q=t.n(c),b=t(1952),k=t(19207),ee=t(96486),re=t.n(ee),ie=S().CheckboxItem,le=function(w){(0,s.default)(K,w);function K(N){(0,C.default)(this,K);var F=(0,n.default)(this,(K.__proto__||V()(K)).call(this,N));return F.getData=function(h,z){var X=F.props,B=X.projectId,x=X.appointedOrganizeIds,Q=x===void 0?[]:x,i=F.state,m=i.keywords,v=i.pageIndex,W=v===void 0?1:v,P=i.treeData,u=i.searchList,l=h||P;k.Z.getOrganizes({projectId:B,keywords:m,pageIndex:W,pageSize:m?50:500,appointedOrganizeIds:Q,orgRoleGroupId:z}).then(function(T){if(m){var G=W===1?T.list:u.concat(T.list);F.setState({searchList:G,isMore:T.allCount>G.length,loading:!1});return}if(Q.length)T.list.forEach(function(M){var se=re().findIndex(l,function(ae){return ae.orgRoleGroupId===M.orgRoleGroupId});l[se].children.push(M),!l[se].fetched&&(l[se].fetched=!0)}),l=l.filter(function(M){return M.fetched}),l[0]&&F.setState({expendTreeNodeKey:[l[0].orgRoleGroupId]});else{var D=re().findIndex(l,function(M){return M.orgRoleGroupId===z});l[D].children=T.list,l[D].fetched=!0}F.setState({isLoading:!1,treeData:l})})},F.handleSearch=function(){if(!F.state.keywords){F.setState({searchList:[],pageIndex:1});return}F.setState({pageIndex:1},function(){F.getData()})},F.handleSave=function(){var h=F.state.selectedOrgRole;F.props.onSave(h),F.props.onClose()},F.onScrollEnd=function(){var h=F.state,z=h.isMore,X=h.isLoading,B=h.keywords,x=h.pageIndex;!B||X||!z||F.setState({pageIndex:x+1},function(){F.getData()})},F.handleExpend=function(h){var z=F.state.expendTreeNodeKey,X=h.orgRoleGroupId,B=h.fetched;if(z.includes(X)){F.setState({expendTreeNodeKey:z.filter(function(x){return x!==X})});return}B||F.getData(void 0,X),F.setState({expendTreeNodeKey:z.concat([X])})},F.checkOrgRoles=function(h){var z=F.props.unique,X=F.state.selectedOrgRole,B=X===void 0?[]:X,x=B.map(function(m){return m.organizeId}),Q=re().includes(x,h.organizeId),i=[].concat((0,U.Z)(B));Q?F.setState({selectedOrgRole:B.filter(function(m){return m.organizeId!==h.organizeId})}):(!z&&i.push(h),F.setState({selectedOrgRole:z?[h]:i}))},F.renderChildren=function(h){var z=F.state,X=z.expendTreeNodeKey,B=z.selectedOrgRole,x=z.keywords,Q=z.searchList,i=B.map(function(m){return m.organizeId});if(!(h&&!X.includes(h.orgRoleGroupId)))return(h?h.children:Q).map(function(m){return I.createElement("div",{className:"flexRow orgRoleItem",key:m.organizeId,onClick:function(){return F.checkOrgRoles(m)}},I.createElement(ie,{checked:re().includes(i,m.organizeId),onChange:function(){return F.checkOrgRoles(m)}}),I.createElement("div",{className:"flex organizeName ellipsis Gray"},m.organizeName))})},F.renderParent=function(){var h=F.state,z=h.isLoading,X=h.keywords,B=h.treeData,x=h.expendTreeNodeKey,Q=h.searchList;return z?I.createElement(H.Z,null):!B.length||B.length===1&&B[0].orgRoleGroupId===""&&!B[0].children.length?I.createElement("div",{className:"emptyWrap"},I.createElement("div",{className:"Gray_bd Font14"},_l("\u6CA1\u6709\u53EF\u9009\u7EC4\u7EC7\u89D2\u8272"))):X&&!Q.length?I.createElement("div",{className:"GSelect-NoData"},I.createElement("i",{className:"icon-search GSelect-iconNoData"}),I.createElement("p",{className:"GSelect-noDataText"},X?_l("\u641C\u7D22\u65E0\u7ED3\u679C"):_l("\u65E0\u7ED3\u679C"))):I.createElement(d.Z,{className:"flex orgRolelist",onScrollEnd:F.onScrollEnd},!X&&B.map(function(i){return i.orgRoleGroupId===""&&!i.children.length?null:I.createElement(I.Fragment,{key:"mobile-role-fragment-"+i.orgRoleGroupId},I.createElement("div",{className:"groupItem GrayBGF8 Hand ellipsis",key:"mobile-role-groupItem-"+i.orgRoleGroupId,onClick:function(){return F.handleExpend(i)}},I.createElement(Z.Z,{icon:"task_custom_btn_unfold",className:q()("Gray_9e mRight13 expendIcon InlineBlock",{rotate:!x.includes(i.orgRoleGroupId)})}),I.createElement("span",{className:"Font15 Bold ellipsis"},i.orgRoleGroupName)),F.renderChildren(i))}),X&&F.renderChildren())},F.renderContent=function(){return I.createElement("div",{className:"flex flexColumn"},F.renderSearch(),F.renderSelected(),F.renderParent())},F.state={orgRoleList:[],isLoading:!1,isMore:!1,treeData:[],expendTreeNodeKey:[],searchList:[],pageIndex:1,selectedOrgRole:[]},F}return(0,O.default)(K,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:function(){var F=this,h=this.props,z=h.projectId,X=h.appointedOrganizeIds;k.Z.getOrgRoleGroupsByProjectId({projectId:z}).then(function(B){var x=[{orgRoleGroupName:_l("\u9ED8\u8BA4"),orgRoleGroupId:""}].concat(B).map(function(Q){return(0,o.default)({},Q,{children:[],fetched:!1})});!X&&F.setState({expendTreeNodeKey:[x[0].orgRoleGroupId]}),F.getData(x,x[0].orgRoleGroupId)})}},{key:"renderSearch",value:function(){var F=this,h=this.state.keywords;return I.createElement("div",{className:"searchWrapper"},I.createElement(Z.Z,{icon:"h5_search"}),I.createElement("form",{action:"#",className:"flex",onSubmit:function(X){X.preventDefault()}},I.createElement("input",{type:"text",placeholder:_l("\u641C\u7D22\u7EC4\u7EC7\u89D2\u8272"),className:"Font14",value:h,onChange:function(X){F.setState({keywords:X.target.value})},onKeyDown:function(X){X.which===13&&F.handleSearch()}})),h?I.createElement(Z.Z,{icon:"workflow_cancel",onClick:function(){F.setState({keywords:""},F.handleSearch)}}):null)}},{key:"renderSelected",value:function(){var F=this,h=this.state.selectedOrgRole,z=h===void 0?[]:h;return I.createElement("div",{className:q()("selectedWrapper",{hide:re().isEmpty(z)})},I.createElement(d.Z,{style:{maxHeight:92,minHeight:46}},z.map(function(X){return I.createElement("span",{className:"selectedItem",key:X.organizeId},I.createElement("span",null,X.organizeName),I.createElement(Z.Z,{icon:"close",className:"Gray_9e Font15",onClick:function(){var x=F.state.selectedOrgRole;F.setState({selectedOrgRole:x.filter(function(Q){return Q.organizeId!==X.organizeId})})}}))})))}},{key:"render",value:function(){var F=this.props,h=F.visible,z=F.onClose;return I.createElement(p(),{popup:!0,visible:h,onClose:z,animationType:"slide-up",className:"h100"},I.createElement("div",{className:"selectUserModal flexColumn h100"},this.renderContent(),I.createElement("div",{className:"btnsWrapper flexRow"},I.createElement(R(),{className:"flex",size:"sm"},I.createElement(r(),{className:"Gray_75 bold Font14",onClick:z},_l("\u53D6\u6D88"))),I.createElement(R(),{className:"flex",size:"sm"},I.createElement(r(),{className:"bold Font14",onClick:this.handleSave,type:"primary"},_l("\u786E\u5B9A"))))))}}]),K}(I.Component),E=function(K){return(0,b.Z)(le,(0,o.default)({},K))}},18667:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>m,d:()=>v});var ce=t(39216),g=t(48272),p=t.n(g),L=t(88239),te=t(20148),R=t(60385),y=t.n(R),a=t(80426),r=t(59012),o=t.n(r),d=t(63627),Z=t(81982),H=t.n(Z),U=t(66215),f=t(77040),V=t(94301),C=t.n(V),O=t(54208),n=t(85315),s=t(25273),j=t(33867),A=t(85105),S=t.n(A),I=t(99663),c=t(22600),q=t(49135),b=t(93196),k=t(56118),ee=t(80181),re=t.n(ee),ie=t(67294),le=t(93967),E=t.n(le),w=t(1952),K=t(22731),N=t(3735),F=t(35989),h=t(96486),z=t.n(h),X,B,x,Q=re().CheckboxItem,i=function(P,u){for(var l=!1,T=0;T<u.length;T++)if(u[T]===P){l=!0;break}return l},m=(B=X=function(W){(0,b.default)(P,W);function P(u){(0,I.default)(this,P);var l=(0,q.default)(this,(P.__proto__||S()(P)).call(this,u));x.call(l);var T=u.selectedUsers;return l.state={searchValue:"",departmentVisible:!1,department:null,departments:[],departmentUsers:[],departmentUsersLoading:!1,departmentPath:[],loading:!1,isMore:!0,pageIndex:1,pageSize:50,users:[],selectedUsers:T||[],onlyJoinDepartmentChecked:!1,depPageIndex:1,isMoreDep:!0,rootData:[],treeData:[],selectUserDepPath:[]},l}return(0,c.default)(P,[{key:"componentDidMount",value:function(){var l=this.props,T=l.type,G=l.staticAccounts,D=G===void 0?[]:G,M=l.advancedSetting,se=M===void 0?{}:M;T==="user"?z().isEmpty(D)?this.setState({users:se&&se.shownullitem==="1"?[{avatar:md.global.FileStoreConfig.pictureHost.replace(/\/$/,"")+"/UserAvatar/undefined.gif?imageView2/1/w/100/h/100/q/90",fullname:se.nullitemname||_l("\u4E3A\u7A7A"),accountId:"isEmpty"}]:[]},this.requestContactUserList):this.setState({users:D}):this.setState({departmentVisible:!0},this.requestSearchDepartment)}},{key:"shouldComponentUpdate",value:function(l,T){if(this.state.selectedUsers.length!==T.selectedUsers.length){var G=this.selectedScrollViewEl.nanoScroller.nanoscroller.maxScrollTop;$(this.selectedScrollViewEl.nanoScroller).nanoScroller({scrollTop:G})}return!0}},{key:"renderSearch",value:function(){var l=this,T=this.state.searchValue,G=this.props.type;return ie.createElement("div",{className:"searchWrapper"},ie.createElement(j.Z,{icon:"h5_search"}),ie.createElement("form",{action:"#",className:"flex",onSubmit:function(M){M.preventDefault()}},ie.createElement("input",{type:"text",placeholder:G==="user"?_l("\u641C\u7D22\u4EBA\u5458"):_l("\u641C\u7D22\u90E8\u95E8"),className:"Font14",value:T,onChange:function(M){l.setState({searchValue:M.target.value})},onKeyDown:function(M){M.which===13&&l.handleSearch()}})),T?ie.createElement(j.Z,{icon:"workflow_cancel",onClick:function(){l.setState({searchValue:""},l.handleSearch)}}):null)}},{key:"renderSelected",value:function(){var l=this,T=this.state.selectedUsers,G=this.props,D=G.type,M=G.selectDepartmentType,se=D==="user"?"fullname":"departmentName",ae=D==="user"?"accountId":"departmentId";return ie.createElement("div",{className:E()("selectedWrapper",{hide:z().isEmpty(T)})},ie.createElement(s.Z,{style:{maxHeight:92,minHeight:46},ref:function(de){return l.selectedScrollViewEl=de}},T.map(function(ne){return ie.createElement("span",{className:"selectedItem",key:ne[ae]},ie.createElement("span",null,ne[se]),M==="all"&&ie.createElement(j.Z,{icon:"workflow",className:"Gray_9e mLeft5"}),ie.createElement(j.Z,{icon:"close",className:"Gray_9e Font15",onClick:function(){var Ce=l.state.selectedUsers;l.setState({selectedUsers:Ce.filter(function(he){return he[ae]!=ne[ae]})})}}))})))}},{key:"renderDepartment",value:function(){var l=this,T=this.state,G=T.departmentVisible,D=T.departments,M=T.departmentUsers,se=T.department,ae=T.departmentUsersLoading,ne=T.loading,de=T.departmentPath,Ce=T.onlyJoinDepartmentChecked,he=T.selectedAllUsers,fe=he===void 0?[]:he,Ee=T.selectUserDepPath,Y=this.props,oe=Y.type,ve=Y.selectDepartmentType,ue=Y.filterAccountIds,pe=ue===void 0?[]:ue;if(G)return ie.createElement(C(),{className:"departmentWrapper flex flexColumn leftAlign",renderHeader:function(){return oe==="user"?ie.createElement("div",{className:"Font15"},ie.createElement("span",{className:"avtive mRight3",onClick:function(){l.setState({departmentVisible:!1,department:null,departmentUsers:[],selectUserDepPath:[]})}},_l("\u5168\u4F53\u4EBA\u5458")),ie.createElement("span",{className:E()({avtive:se}),onClick:function(){se&&l.setState({department:null,departmentUsers:[],selectUserDepPath:[]},l.requestContactProjectDepartments)}},ie.createElement("i",{className:"mRight3"},">"),_l("\u6309\u90E8\u95E8\u9009\u62E9")),Ee.map(function(J,me){return ie.createElement("span",{className:"avtive mLeft5",key:J.departmentId,onClick:function(){l.setState({department:J,selectUserDepPath:Ee.slice(0,me+1)},l.requestContactProjectDepartments)}},ie.createElement("i",{className:"mRight3"},">"),J.departmentName)})):ie.createElement(ie.Fragment,null,ie.createElement("span",{className:E()({avtive:de.length}),onClick:function(){de.length&&(l.setState({departmentPath:[],selectedAllUsers:[].concat((0,n.Z)(fe),(0,n.Z)(de))}),l.requestSearchDepartment())}},_l("\u5168\u90E8\u90E8\u95E8")),de.map(function(J,me){return ie.createElement("span",{className:"avtive mLeft5",key:J.departmentId,onClick:function(){l.handleSelectSubDepartment(J,me)}},ie.createElement("i",{className:"mRight3"},">"),J.departmentName)}))}},ne?ie.createElement("div",{className:"pTop30 pBottom30"},ie.createElement(O.Z,{size:"middle"})):se?ae?ie.createElement("div",{className:"pTop30 pBottom30"},ie.createElement(O.Z,{size:"middle"})):ie.createElement(s.Z,{className:"flex"},M.map(function(ye,J){return ye.isDep?ie.createElement(C().Item,{multipleLine:!0,arrow:"horizontal",thumb:ie.createElement("div",{className:"groupWrapper"},ie.createElement(j.Z,{icon:"group",className:"Font22 White"})),onClick:function(){l.setState({department:ye,selectUserDepPath:l.state.selectUserDepPath.concat(ye)},l.requestContactProjectDepartments)}},ye.departmentName):ie.createElement(Q,{key:ye.accountId,checked:i(ye.accountId,l.state.selectedUsers.map(function(me){return me.accountId})),onChange:function(){var be=l.state.selectedUsers,xe=l.props.onlyOne,Ae=be.filter(function(Ne){return Ne.accountId===ye.accountId}).length;if(xe){l.setState({selectedUsers:Ae?[]:[ye]});return}Ae?l.setState({selectedUsers:be.filter(function(Ne){return Ne.accountId!=ye.accountId})}):l.setState({selectedUsers:be.concat(ye)})}},ie.createElement(ie.Fragment,null,ie.createElement("img",{src:ye.avatar,className:"avatar"}),ye.fullname))}),z().isEmpty(M)?ie.createElement("div",{className:"pTop30 pBottom30 TxtCenter"},_l("\u6682\u65E0\u4EBA\u5458")):null):ie.createElement(s.Z,{className:"flex"},ie.createElement("div",{className:"flexRow onlyShowJoinDepartment"},ie.createElement("span",null,_l("\u53EA\u770B\u6211\u52A0\u5165\u7684\u90E8\u95E8")),ie.createElement(U.Z,{checked:Ce,onClick:this.onlyShowJoinDepartment})),D.map(function(ye,J){return ie.createElement(ie.Fragment,{key:ye.departmentId},oe==="department"?ie.createElement(C().Item,{multipleLine:!0,className:"departmentItem",arrow:ye.haveSubDepartment?"horizontal":"",thumb:ie.createElement("div",{className:"flexRow valignWrapper",onClick:function(be){var xe=l.state.selectedUsers,Ae=l.props.onlyOne;if(!ye.disabledSubDepartment){var Ne=xe.filter(function(Be){return Be.departmentId===ye.departmentId}).length,Me=l.getChildren(l.state.treeData,ye.departmentId),Fe=xe.filter(function(Be){return ve==="current"?!z().includes(Me,Be.departmentId):!0});if(Ae){l.setState({selectedUsers:Ne?[]:[ye],selectedAllUsers:Ne?[]:[ye]});return}Ne?l.setState({selectedUsers:Fe.filter(function(Be){return Be.departmentId!=ye.departmentId}),selectedAllUsers:Fe.filter(function(Be){return Be.departmentId!=ye.departmentId})}):l.setState({selectedUsers:Fe.concat(ye),selectedAllUsers:Fe.concat(ye)})}}},ie.createElement(re(),{checked:ye.disabledSubDepartment?!0:i(ye.departmentId,l.state.selectedUsers.map(function(me){return me.departmentId})),disabled:ye.disabledSubDepartment}),ie.createElement("div",{className:"groupWrapper"},ie.createElement(j.Z,{icon:"group",className:"Font22 White"}))),onClick:function(be){var xe=l.state.selectedUsers;ye.haveSubDepartment&&(be.target.classList.contains("am-list-content")||be.target.classList.contains("am-list-arrow"))&&l.handleSelectSubDepartment(ye)}},ye.departmentName):ie.createElement(C().Item,{multipleLine:!0,arrow:"horizontal",thumb:ie.createElement("div",{className:"groupWrapper"},ie.createElement(j.Z,{icon:"group",className:"Font22 White"})),onClick:function(){l.setState({department:ye,selectUserDepPath:l.state.selectUserDepPath.concat(ye)},l.requestContactProjectDepartments)}},ye.departmentName))}),z().isEmpty(D)?ie.createElement("div",{className:"pTop30 pBottom30 TxtCenter"},_l("\u6682\u65E0\u90E8\u95E8")):null));var Se=md.global.Account||{};return ie.createElement(ie.Fragment,null,ie.createElement(C(),null,ie.createElement(C().Item,{arrow:"horizontal",onClick:function(){l.requestContactProjectDepartments(),l.setState({departmentVisible:!0})}},ie.createElement("div",{className:"Font15 Gray mTop5 mBottom5"},ie.createElement(j.Z,{icon:"department",className:"TxtMiddle Font18 Gray_9e mRight15"})," ",_l("\u6309\u90E8\u95E8\u9009\u62E9")))),!pe.includes(Se.accountId)&&ie.createElement("div",{className:"currentAccount mTop10",onClick:function(){l.selectedAccount(Se)}},ie.createElement("img",{src:Se.avatar,className:"avatar mRight10"}),ie.createElement("span",null,_l("\u6211\u81EA\u5DF1"))))}},{key:"renderUsers",value:function(){var l=this,T=this.props,G=T.selectRangeOptions,D=T.userType,M=T.staticAccounts,se=M===void 0?[]:M,ae=this.state,ne=ae.users,de=ae.loading,Ce=ae.pageIndex,he=!z().isEmpty(se);return ie.createElement("div",{className:"flex"},ie.createElement(s.Z,{onScrollEnd:this.requestContactUserList},!he&&!G&&(D===1||D===3)&&this.renderDepartment(),ie.createElement(C(),{className:"leftAlign",renderHeader:he?null:function(){return"A-Z"}},de&&Ce===1?ie.createElement("div",{className:"pTop30 pBottom30"},ie.createElement(O.Z,{size:"middle"})):ie.createElement(ie.Fragment,null,ne.map(function(fe){var Ee=z().get(fe,"departmentInfo")||{},Y=Ee.departmentName,oe=fe.job;return ie.createElement(Q,{key:fe.accountId,checked:i(fe.accountId,l.state.selectedUsers.map(function(ve){return ve.accountId})),onChange:function(){return l.selectedAccount(fe)}},ie.createElement("div",{className:"flexRow w100 alignItemsCenter"},ie.createElement("div",{className:"userInfo"},ie.createElement("img",{src:fe.avatar,className:"avatar"}),fe.fullname),ie.createElement("span",{className:"Gray_9e mLeft16 Font12 flex ellipsis"},Y&&oe?Y+" / "+oe:Y||oe)))}),de?ie.createElement("div",{className:"pTop10 pBottom10"},ie.createElement(O.Z,{size:"middle"})):null,z().isEmpty(ne)?ie.createElement("div",{className:"pTop30 pBottom30 TxtCenter"},_l("\u6682\u65E0\u4EBA\u5458")):null))))}},{key:"renderContent",value:function(){var l=this.state.departmentVisible,T=this.props,G=T.userType,D=G===void 0?1:G,M=T.type;return ie.createElement("div",{className:"flex flexColumn"},(M==="user"&&!l||M==="department")&&this.renderSearch(),this.renderSelected(),l&&(D===1||D===3)?this.renderDepartment():null,l?null:this.renderUsers())}},{key:"render",value:function(){var l=this.props,T=l.visible,G=l.onClose;return ie.createElement(y(),{popup:!0,visible:T,onClose:G,animationType:"slide-up",className:"h100"},ie.createElement("div",{className:"selectUserModal flexColumn h100"},this.renderContent(),ie.createElement("div",{className:"btnsWrapper flexRow"},ie.createElement(o(),{className:"flex",size:"sm"},ie.createElement(H(),{className:"Gray_75 bold Font14",onClick:G},_l("\u53D6\u6D88"))),ie.createElement(o(),{className:"flex",size:"sm"},ie.createElement(H(),{className:"bold Font14",onClick:this.handleSave,type:"primary"},_l("\u786E\u5B9A"))))))}}]),P}(ie.Component),x=function(){var P=this;this.requestContactUserList=function(){var u=P.state,l=u.loading,T=u.isMore,G=P.props.staticAccounts,D=G===void 0?[]:G;if(z().isEmpty(D)&&!(l||!T)){P.setState({loading:!0}),P.request&&z().isFunction(P.request.abort)&&P.request.abort();var M=P.state,se=M.pageIndex,ae=M.pageSize,ne=M.users,de=M.searchValue,Ce=P.props,he=Ce.projectId,fe=Ce.selectRangeOptions,Ee=Ce.filterAccountIds,Y=Ee===void 0?[]:Ee,oe=Ce.appointedAccountIds,ve=oe===void 0?[]:oe,ue=Ce.userType,pe=Ce.appId;ue===2?P.request=F.Z.getUsersByApp({projectId:he,appId:pe,pageIndex:se,pageSize:ae,keywords:de||void 0}).then(function(Se){var ye=Se.map(function(J){return(0,L.default)({},J,{fullname:J.name})});P.setState({users:ne.concat(ye),loading:!1,pageIndex:se+1,isMore:ye.length===ae})}):(fe?P.request=K.Z.getProjectContactUserListByApp((0,L.default)({keywords:de,projectId:he,pageIndex:se,pageSize:ae},z().isObject(fe)?fe:{})):P.request=K.Z.getContactUserList({keywords:de,projectId:he,filterFriend:!1,includeUndefinedAndMySelf:!1,pageIndex:se,pageSize:ae,dataRange:2,filterProjectId:"",includeSystemField:!1,filterAccountIds:Y,appointedAccountIds:ve,prefixAccountIds:[]}),P.request.then(function(Se){var ye=Se.users.list;P.setState({users:ne.concat(ye),loading:!1,pageIndex:se+1,isMore:ye.length===ae})}))}},this.requestContactProjectDepartments=function(){var u=P.state,l=u.loading,T=u.depPageIndex,G=u.pageSize,D=u.departments,M=u.isMoreDep,se=u.onlyJoinDepartmentChecked,ae=se===void 0?!1:se,ne=u.department;P.setState({departmentUsersLoading:!0}),P.request&&P.request.abort();var de=P.props.projectId;P.request=N.Z.getMembersAndSubs({projectId:de,pageIndex:T,pageSize:100,onlyMyJoin:ae,filterAccountIds:[],departmentId:ne?ne.departmentId:void 0}),P.request.then(function(Ce){var he=Ce.subDepts,fe=he===void 0?[]:he,Ee=Ce.members,Y=Ee===void 0?[]:Ee,oe=fe.map(function(ve){return{departmentId:ve.id,departmentName:ve.name,isDep:!0}});P.setState({departments:oe,loading:!1,departmentUsers:oe.concat(Y),departmentUsersLoading:!1})})},this.requestSearchDepartment=function(){var u=P.state,l=u.loading,T=u.searchValue;if(!l){P.setState({loading:!0});var G=P.props.projectId;N.Z.searchDepartment({keywords:T,projectId:G}).then(function(D){P.setState({loading:!1,departments:D,rootData:D})})}},this.handleSelectSubDepartment=function(u,l){var T=u.departmentId,G=P.props,D=G.projectId,M=G.selectDepartmentType,se=G.allPath,ae=P.state,ne=ae.departmentPath,de=ae.loading,Ce=ae.selectedUsers,he=ae.rootData,fe=he===void 0?[]:he,Ee=ae.treeData,Y=Ee===void 0?[]:Ee,oe=l||l===0?ne.slice(0,l+1):ne.concat(u);l||l===0?P.setState({departmentPath:oe,loading:!0}):P.setState({departmentPath:oe,loading:!0}),N.Z.getProjectSubDepartmentByDepartmentId({projectId:D,departmentId:T}).then(function(ve){P.setState({departments:ve.map(function(ue){return(0,L.default)({},ue,{disabledSubDepartment:M==="all"&&z().findIndex(Ce,function(pe){return pe.departmentId===T})>-1||u.disabledSubDepartment,departmentPath:se?oe.map(function(pe,Se){return{departmentId:pe.departmentId,departmentName:pe.departmentName,depth:Se+1}}):[]})}),loading:!1,treeData:z().isEmpty(Y)?P.getTreeData(fe,T,ve):P.getTreeData(Y,T,ve)})})},this.getTreeData=function(u,l,T){return u.map(function(G){return G.departmentId===l?(0,L.default)({},G,{subDepartments:T}):G.subDepartments&&G.subDepartments.length?(0,L.default)({},G,{subDepartments:P.getTreeData(G.subDepartments,l,T)}):G})},this.getChildren=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],l=arguments[1],T=[],G=[],D=function se(ae,ne){ae.find(function(de){if(de.subDepartments&&de.subDepartments.length&&se(de.subDepartments,ne),de.departmentId===ne)return T=de.subDepartments})};D(u,l);var M=function se(ae){ae.forEach(function(ne){ne.subDepartments&&ne.subDepartments.length&&se(ne.subDepartments),delete ne.subDepartments,G.push(ne)})};return T&&M(T),z().isArray(G)&&!z().isEmpty(G)?G.map(function(se){return se.departmentId}):[]},this.handleSave=function(){var u=P.props.type,l=P.state.selectedUsers;l.length?(P.props.onClose(),P.props.onSave(l)):p().info(u==="user"?_l("\u8BF7\u9009\u62E9\u4EBA\u5458"):_l("\u8BF7\u9009\u62E9\u90E8\u95E8"))},this.handleSearch=function(){var u=P.props.type;P.setState({users:[],pageIndex:1,isMore:!0},u==="user"?P.requestContactUserList:P.requestSearchDepartment)},this.onlyShowJoinDepartment=function(u){P.setState({onlyJoinDepartmentChecked:!u,depPageIndex:1,departments:[],isMoreDep:!0,loading:!0},function(){P.requestContactProjectDepartments()})},this.selectedAccount=function(u){var l=P.state.selectedUsers,T=P.props.onlyOne,G=l.filter(function(D){return D.accountId===u.accountId}).length;if(T){P.setState({selectedUsers:G?[]:[u]});return}G?P.setState({selectedUsers:l.filter(function(D){return D.accountId!=u.accountId})}):P.setState({selectedUsers:l.concat(u)})}},B),v=function(P){return(0,w.Z)(m,(0,L.default)({},P))}},3767:(lt,Te,t)=>{"use strict";if(t.d(Te,{Z:()=>y}),!/^(1887|7596|7798)$/.test(t.j))var ce=t(42108);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(91458);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(89499);var L={0:{id:"closed",text:_l("\u6D41\u7A0B\u672A\u542F\u7528"),action:"error",promptType:2},1:{id:"pending",text:_l("\u6B63\u5728\u6267\u884C..."),action:"info",promptType:5},2:{id:"success",text:_l("\u64CD\u4F5C\u6210\u529F"),action:"success",promptType:1},3:{id:"stop",text:_l("\u6267\u884C\u5931\u8D25"),action:"error",promptType:3},4:{id:"failure",text:_l("\u64CD\u4F5C\u5931\u8D25"),action:"error",promptType:2}},te={3:_l("\u586B\u5199..."),4:_l("\u5BA1\u6279...")},R=function(r){var o=r.cause,d=r.causeMsg,Z=r.type,H=r.status,U=H===void 0?1:H,f=r.executeType,V=r.finished,C=function(){var s=L[U].text;return[3,4].includes(U)?ce.A5[o]||d||s:f===2&&V===0&&U!==2?_l("\u60A8\u7684\u6D41\u7A0B\u5DF2\u8FDB\u5165\u961F\u5217\uFF0C\u8FD9\u53EF\u80FD\u9700\u8981\u4E00\u6BB5\u65F6\u95F4\u3002\u73B0\u5728\u60A8\u53EF\u4EE5\u8FDB\u884C\u5176\u4ED6\u64CD\u4F5C\uFF0C\u6267\u884C\u5B8C\u6210\u540E\u5C06\u4F1A\u901A\u77E5\u60A8"):s},O=_.includes([3,4],Z);return O?_l("\u6B63\u5728\u7B49\u5F85%0",te[Z]):C()};const y=function(){if(window.IM){var a={};IM.socket.on("workflow",function(r){var o=r.status,d=r.type,Z=r.worksheetId,H=r.rowId,U=r.storeId,f=r.total,V=r.finished,C=r.title,O=r.executeType,n=r.close;if((o===2||d===4&&o===1)&&p.uY.emit("MOBILE_RELOAD_SHEETVIVELIST",{worksheetId:Z,recordId:H.indexOf("_")>0?(H.match(/(.+?)_/)||"")[1]:H}),n){destroyAlert("workflow");return}if(U){f===V&&!a[U]&&(a[U]=r);var s=U?_l("\u6279\u91CF\u64CD\u4F5C \u201D%0\u201C",C):C,j=a[U]||r;(0,g.Z)({title:s,type:V>0&&a[U]?"success":"info",description:"",duration:5,position:"center",batchInfo:j,modalKey:"batchUpdateWorkflowNotice"+U})}else{var A=L[o],S=A.id,I=A.promptType,c=R(r);alert({msg:c,type:_.includes([3,4],r.type)?4:I,timeout:(S==="pending"?10:3)*1e3,key:"workflow"})}})}}},91458:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>O});var ce=t(88239),g=t(20148),p=t.n(g),L=t(60385),te=t.n(L),R=t(86735),y=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(1952);var r=t(71893),o=(0,R.Z)([`
  overflow: hidden;
  border-top-right-radius: 15px;
  border-top-left-radius: 15px;
  height: 95%;
  .am-modal-content {
    padding: 16px;
    text-align: left;
  }
  .am-modal-body {
    color: #333;
    font-size: 13px;
    display: flex;
    flex-direction: column;
  }
  .success {
    color: #4caf50;
    font-size: 20px;
  }
  .error {
    color: #f44336;
  }
  .warning {
    color: #fb0;
  }
  .info {
    color: #1c97f3;
  }
  .overflowAuto {
    overflow: auto;
  }
  .btnsWrap {
    .btnItem {
      background-color: #2196f3;
      height: 36px;
      border-radius: 18px;
      margin-right: 15px;
      text-align: center;
      color: #fff;
      line-height: 36px;
      padding: 0 12px;
      &:last-child {
        margin-right: 0px;
      }
    }
  }
`],[`
  overflow: hidden;
  border-top-right-radius: 15px;
  border-top-left-radius: 15px;
  height: 95%;
  .am-modal-content {
    padding: 16px;
    text-align: left;
  }
  .am-modal-body {
    color: #333;
    font-size: 13px;
    display: flex;
    flex-direction: column;
  }
  .success {
    color: #4caf50;
    font-size: 20px;
  }
  .error {
    color: #f44336;
  }
  .warning {
    color: #fb0;
  }
  .info {
    color: #1c97f3;
  }
  .overflowAuto {
    overflow: auto;
  }
  .btnsWrap {
    .btnItem {
      background-color: #2196f3;
      height: 36px;
      border-radius: 18px;
      margin-right: 15px;
      text-align: center;
      color: #fff;
      line-height: 36px;
      padding: 0 12px;
      &:last-child {
        margin-right: 0px;
      }
    }
  }
`]),d=(0,R.Z)([`
  .success {
    color: #4caf50;
    font-size: 20px;
  }
  .error {
    color: #f44336;
  }
  .warning {
    color: #fb0;
  }
  .info {
    color: #1c97f3;
  }
`],[`
  .success {
    color: #4caf50;
    font-size: 20px;
  }
  .error {
    color: #f44336;
  }
  .warning {
    color: #fb0;
  }
  .info {
    color: #1c97f3;
  }
`]),Z=(0,r.ZP)(te())(o),H=r.ZP.div(d);function U(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"success";return{success:"succeed-circle",error:"closeelement-bg-circle",warning:"task-folder-message",info:"info"}[n]||""}var f=null;function V(n){var s=n.loading,j=n.type,A=n.visible,S=n.title,I=n.btnList,c=I===void 0?[]:I,q=n.description,b=n.duration,k=n.batchInfo,ee=k===void 0?{}:k,re=n.position,ie=re===void 0?"bottom":re,le=n.hideModalMessage,E=le===void 0?function(){}:le;(0,y.useEffect)(function(){if(ie==="center")return F();w()},[]);var w=function(){b&&setTimeout(function(){E()},b*1e3)},K=function(){return s?y.createElement("div",{className:"notificationIconWrap"},y.createElement("i",{className:"icon-loading_button"})):y.createElement("i",{className:j+" icon-"+U(j)})},N=function(z){var X=z.finished,B=z.total,x=z.failed,Q=z.executeType;return X===B?_l("\u6267\u884C\u5B8C\u6210! ")+`
`+(x>0?_l("%0\u6761\u5931\u8D25",x):""):_l("\u6B63\u5728\u6267\u884C... %0/%1",X,B)},F=function(){f&&f.close(),f=te().alert(y.createElement(H,null,y.createElement("div",{className:"flexRow"},y.createElement("div",{className:"flex mBottom16 ellipsis"},K(),y.createElement("span",{className:"bold Font18 TxtBottom mLeft10"},S))),y.createElement("div",{className:"mobileNoticeContent"},N(ee))),"",[{text:_l("\u5173\u95ED")}])};return ie==="center"?null:y.createElement(Z,{popup:!0,animationType:"slide-up",onClose:E,visible:A,className:"mobileNoticeWrap"},y.createElement("div",{className:"flex overflowAuto"},y.createElement("div",{className:"flexRow"},y.createElement("div",{className:"flex mBottom16"},K(),y.createElement("span",{className:"bold Font18 TxtBottom mLeft10"},S))),y.createElement("div",{className:"mobileNoticeContent"},q)),y.createElement("div",{className:"btnsWrap flexRow mBottom20 mTop20"},c.reverse().map(function(h){return y.createElement("div",{className:"flex ellipsis btnItem",onClick:h.onClick},h.text)})))}var C=function(s){return(0,a.Z)(V,(0,ce.default)({},s,{closeFnName:"hideModalMessage"}))};const O=/^(1887|7596|7798)$/.test(t.j)?null:C},90009:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>y});var ce=t(88902),g=t.n(ce);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(5618);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(91088);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(91458);var R=function(r){return L.Z.getAppSimpleInfo({workSheetId:r},{silent:!0})};const y=function(a){window.IM&&(md.global.Config.pushUniqueId=(+new Date).toString(),IM.socket.on("workflow_push",function(r){var o=parseInt(g()(r)[0]),d=r[o],Z=d.pushUniqueId,H=d.content,U=d.promptType,f=d.duration,V=d.title,C=d.buttons,O=C===void 0?[]:C,n=function(A,S){var I=A.appId,c=A.content,q=A.rowId,b=A.viewId,k=A.openMode;S===p.No.ALERT&&alert({msg:c,type:U,timeout:f*1e3}),S===p.No.CREATE&&R(I).then(function(ee){var re=ee.appId;location.href=(window.subPath||"")+"/mobile/addRecord/"+re+"/"+I+"/"+(b||_.get(a,"viewId")||"")}),S===p.No.DETAIL&&R(I).then(function(ee){var re=ee.appId;b&&(location.href=(window.subPath||"")+"/mobile/record/"+re+"/"+I+(b?"/"+b:"")+"/"+q)}),S===p.No.VIEW&&R(I).then(function(ee){var re=ee.appId,ie=ee.appSectionId;location.href=(window.subPath||"")+"/mobile/recordList/"+re+"/"+ie+"/"+I+"/"+b}),S===p.No.PAGE&&R(I).then(function(ee){var re=ee.appId,ie=ee.appSectionId;location.href=(window.subPath||"")+"/mobile/customPage/"+re+"/"+ie+"/"+I}),S===p.No.LINK&&(location.href=c)};if(!(Z&&Z!==md.global.Config.pushUniqueId))if(o===p.No.NOTIFICATION){var s={1:"success",2:"error",3:"warning",4:"info"};(0,te.Z)({title:V,type:s[U],description:H,duration:f||null,btnList:O.map(function(j){return{text:j.name,onClick:function(){n(j,j.pushType)}}})})}else n(r[o],o)}))}},73820:(lt,Te,t)=>{"use strict";t.d(Te,{fy:()=>L,ih:()=>ce,mB:()=>r,r4:()=>te,vB:()=>p,zp:()=>g});var ce="CHANGE_NAV_COLOR",g="CHANGE_APP_COLOR",p="UPDATE_APP_GROUP",L="SET_APP_STATUS",te="SYNC_APP_DETAIL",R=function(Z){return{type:te,detail:Z}},y=function(Z){return{type:g,iconColor:Z}},a=function(Z){return{type:ce,navColor:Z}},r=function(Z){return{type:p,appGroups:Z}},o=function(Z){return{type:L,status:Z}}},31567:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>k});var ce=t(69288),g=t(33867),p=t(88239),L=t(85105),te=t.n(L),R=t(99663),y=t(22600),a=t(49135),r=t(93196),o=t(67294),d=t(45231),Z=t(93967),H=t.n(Z),U=t(71129),f=t(95679),V=t(86735),C=t(15405),O=t(71893),n=t(96486),s=t.n(n),j,A=(0,V.Z)([`
  display: block;
  padding: 16px 24px;
  font-weight: bold;
  border-bottom: 1px solid #eaeaea;
  .ming.icon-close {
    float: right;
  }
  .ming.icon-close:hover {
    color: #2196f3 !important;
  }
`],[`
  display: block;
  padding: 16px 24px;
  font-weight: bold;
  border-bottom: 1px solid #eaeaea;
  .ming.icon-close {
    float: right;
  }
  .ming.icon-close:hover {
    color: #2196f3 !important;
  }
`]),S=(0,V.Z)([`
  position: absolute;
  z-index: 10;
  width: 320px;
  background: #ffffff 0% 0% no-repeat padding-box;
  box-shadow: 0px 12px 24px #0000003d;
  box-sizing: border-box;
  line-height: 1;
  font-size: 14px;
  transition: all 0.3s;
  animation-name: fadeInUp;
  animation-duration: 0.3s;
  animation-timing-function: ease-in-out;
  animation-iteration-count: 1;
  animation-direction: normal;
  animation-fill-mode: forwards;
  @keyframes fadeInUp {
    from {
      opacity: 0;
      box-shadow: 0px 0px 0px #fff;
      -webkit-transform: translate3d(-30px, 0, 0);
      transform: translate3d(-30px, 0, 0);
    }

    to {
      opacity: 1;
      box-shadow: 0px 12px 24px #0000003d;
      -webkit-transform: translate3d(0, 0, 0);
      transform: translate3d(0, 0, 0);
    }
  }
  .con {
    padding: 24px;
    h5 {
      margin: 0;
      line-height: 1;
      margin-bottom: 20px;
      font-size: 14px;
    }
    .Radio-text {
      font-weight: initial;
      color: #333;
    }
  }
  .conLine {
    margin: 0 24px;
    border-bottom: 1px solid #eaeaea;
  }
  .inputTxt {
    font-weight: normal;
  }
  .dropOptionTrigger {
    padding: 24px;
    max-height: 260px;
    overflow: auto;
    .viewName {
      word-break: break-all;
    }
  }
`],[`
  position: absolute;
  z-index: 10;
  width: 320px;
  background: #ffffff 0% 0% no-repeat padding-box;
  box-shadow: 0px 12px 24px #0000003d;
  box-sizing: border-box;
  line-height: 1;
  font-size: 14px;
  transition: all 0.3s;
  animation-name: fadeInUp;
  animation-duration: 0.3s;
  animation-timing-function: ease-in-out;
  animation-iteration-count: 1;
  animation-direction: normal;
  animation-fill-mode: forwards;
  @keyframes fadeInUp {
    from {
      opacity: 0;
      box-shadow: 0px 0px 0px #fff;
      -webkit-transform: translate3d(-30px, 0, 0);
      transform: translate3d(-30px, 0, 0);
    }

    to {
      opacity: 1;
      box-shadow: 0px 12px 24px #0000003d;
      -webkit-transform: translate3d(0, 0, 0);
      transform: translate3d(0, 0, 0);
    }
  }
  .con {
    padding: 24px;
    h5 {
      margin: 0;
      line-height: 1;
      margin-bottom: 20px;
      font-size: 14px;
    }
    .Radio-text {
      font-weight: initial;
      color: #333;
    }
  }
  .conLine {
    margin: 0 24px;
    border-bottom: 1px solid #eaeaea;
  }
  .inputTxt {
    font-weight: normal;
  }
  .dropOptionTrigger {
    padding: 24px;
    max-height: 260px;
    overflow: auto;
    .viewName {
      word-break: break-all;
    }
  }
`]),I=O.ZP.div(A),c=O.ZP.div(S),q=(0,C.Z)(j=function(ee){(0,r.default)(re,ee);function re(ie){(0,R.default)(this,re);var le=(0,a.default)(this,(re.__proto__||te()(re)).call(this,ie));return le.state={allView:!1},le}return(0,y.default)(re,[{key:"componentDidMount",value:function(){var le=this.props,E=le.printData,w=le.views;this.setState({allView:w.length===E.views.length})}},{key:"componentWillReceiveProps",value:function(le){if(!s().isEmpty(this.props.printData,le.printData)){var E=le.printData,w=le.views;this.setState({allView:w.length===E.views.length})}}},{key:"render",value:function(){var le=this,E=this.props,w=E.printData,K=E.views,N=E.setData,F=E.className,h=this.state.allView;return o.createElement(c,{className:F},o.createElement(I,{className:"headerRange Font14 Gray"},_l("\u4F7F\u7528\u8303\u56F4"),o.createElement(g.Z,{icon:"close",className:"Font18 Gray_9e Hand",onClick:function(){le.props.onClose()}})),o.createElement("ul",{className:"dropOptionTrigger"},o.createElement(f.Z,{text:_l("\u6240\u6709\u8BB0\u5F55"),checked:w.range===1,onClick:function(){N({printData:(0,p.default)({},w,{range:1})})}}),o.createElement("p",{className:"mLeft25 mTop10 mBottom16"}),o.createElement(f.Z,{text:_l("\u5E94\u7528\u4E8E\u6307\u5B9A\u89C6\u56FE"),checked:w.range===3,onClick:function(){N({printData:(0,p.default)({},w,{range:3})})}}),w.range===3&&o.createElement("div",{className:"viewList"},o.createElement("div",{className:"viewListLi"},K.map(function(z){return o.createElement("div",{className:"mTop15 mLeft25 Hand",onClick:function(){if(w.views.map(function(x){return x.viewId}).includes(z.viewId))le.setState({allView:!1}),N({printData:(0,p.default)({},w,{views:w.views.filter(function(x){return z.viewId!==x.viewId})}),viewId:z.viewId});else{var B=w.views;B.push(z),N({printData:(0,p.default)({},w,{views:B}),viewId:z.viewId},function(){le.setState({allView:le.state.views.length===le.state.printData.views.length})})}}},o.createElement("input",{type:"checkbox",className:"viewInput TxtMiddle",checked:w.views.map(function(X){return X.viewId}).includes(z.viewId)}),o.createElement("span",{className:"TxtMiddle viewName"},z.name))})))))}}]),re}(o.Component))||j;const b=q;var k=function(ee){(0,r.default)(re,ee);function re(ie){(0,R.default)(this,re);var le=(0,a.default)(this,(re.__proto__||te()(re)).call(this,ie)),E=ie.printData;return le.state={printData:E,showList:!1,views:[]},le}return(0,y.default)(re,[{key:"componentDidMount",value:function(){var le=this,E=this.props,w=E.printData,K=E.type,N=E.viewId;d.Z.getWorksheetInfo({getTemplate:!0,getViews:!0,worksheetId:this.props.worksheetId}).then(function(F){le.setState({views:F.views,printData:(0,p.default)({},le.state.printData,{views:w.views.length<=0&&K===U.G2.NEW?F.views.filter(function(h){return h.viewId===N}):F.views.filter(function(h){return le.state.printData.views.includes(h.viewId)}),range:w.views.length<=0&&K===U.G2.NEW?3:w.range})})}),this.name&&this.name.focus()}},{key:"render",value:function(){var le=this,E=this.state,w=E.printData,K=E.showList,N=E.views;return o.createElement(ce.Z,{title:_l("\u4FDD\u5B58\u6A21\u677F"),okText:_l("\u786E\u5B9A"),cancelText:_l("\u53D6\u6D88"),className:H()("saveDiaCon",this.props.className),width:"480px",onCancel:function(){le.props.onCancel()},onOk:function(){if(!s().trim(w.name)){alert(_l("\u8BF7\u8F93\u5165\u6A21\u677F\u540D\u79F0"),3);return}le.props.setValue(le.state.printData),le.props.onCancel()},visible:this.props.showSaveDia},o.createElement("div",{className:"list"},o.createElement("span",{className:"title"},_l("\u6A21\u677F\u540D\u79F0")),o.createElement("input",{type:"text",ref:function(h){le.name=h},placeholder:_l("\u8BF7\u8F93\u5165\u6A21\u677F\u540D\u79F0"),className:"tepName",value:w.name,onChange:function(h){le.setState({printData:(0,p.default)({},w,{name:h.target.value})})}})),o.createElement("div",{className:"list mTop16"},o.createElement("span",{className:"title"},_l("\u4F7F\u7528\u8303\u56F4")),o.createElement("div",{className:"viewBox"},w.range===1&&o.createElement("span",{onClick:function(){le.setState({showList:!K})}},_l("\u6240\u6709\u8BB0\u5F55")),w.range!==1&&w.views.length<=0&&o.createElement("span",{className:"Gray_bd",onClick:function(){le.setState({showList:!K})}},_l("\u8BF7\u9009\u62E9\u89C6\u56FE")),w.range===3&&o.createElement("div",{onClick:function(){le.setState({showList:!K})},className:"itemList"},w.views.map(function(F){return o.createElement("div",{class:"item"},F.name,o.createElement("a",{href:"javascript:void(0)",class:"remove",tabIndex:"-1",title:"\u5220\u9664",onClick:function(z){le.setState({printData:(0,p.default)({},w,{views:w.views.filter(function(X){return X.viewId!==F.viewId})})}),z.stopPropagation()}},"\xD7"))})),K&&o.createElement(b,{printData:w,views:N,onClickAwayExceptions:[],onClickAway:function(){return le.setState({showList:!1})},onClose:function(){return le.setState({showList:!1})},setData:function(h){le.setState((0,p.default)({},le.state,h))}}),o.createElement(g.Z,{icon:"expand_more",className:"mRight15 Font16 moreList",onClick:function(){le.setState({showList:!K})}}))))}}]),re}(o.Component)},72713:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>te});var ce=t(88239);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(1952);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(31567);var L=function(y){return(0,g.Z)(p.Z,(0,ce.default)({},y,{visibleName:"showSaveDia"}))};const te=/^(1887|7596|7798)$/.test(t.j)?null:L},71129:(lt,Te,t)=>{"use strict";t.d(Te,{G2:()=>te,YC:()=>n,bU:()=>Z,fC:()=>H});var ce=t(88106),g,p={PRINT:"print",FORMSET:"formSet"},L={WORKFLOW:"flow",WORKSHEET:"worksheet"},te={PREVIEW:"preview",NEW:"new",EDIT:"edit"},R={0:_l("\u53D1\u8D77\u4EBA"),3:_l("\u586B\u5199\u4EBA"),4:_l("\u5BA1\u6279\u4EBA"),5:_l("\u901A\u77E5\u4EBA")},y={1:_l("\u65B0\u589E"),2:_l("\u4FEE\u6539")},a={0:_l("\u53D1\u8D77"),1:_l("\u63D0\u4EA4"),2:_l("\u8F6C\u4EA4"),3:_l("\u67E5\u770B"),4:_l("\u901A\u8FC7\u7533\u8BF7"),5:_l("\u5426\u51B3\u7533\u8BF7"),8:_l("\u8F6C\u5BA1"),9:_l("\u6DFB\u52A0\u5BA1\u6279\u4EBA"),10:_l("\u88AB\u79FB\u9664"),16:_l("\u5BA1\u6279\u524D\u52A0\u7B7E"),17:_l("\u901A\u8FC7\u7533\u8BF7\u5E76\u52A0\u7B7E"),18:_l("\u4FEE\u6539\u7533\u8BF7\u5185\u5BB9"),22:_l("\u65E0\u9700\u5BA1\u6279")},r=12,o=16,d=18,Z={SYS_PRINT:0,WORD_PRINT:2,EXCEL_PRINT:5,QR_CODE_PRINT:3,BAR_CODE_PRINT:4},H={SYS_PRINT:0,WORD_PRINT:0,EXCEL_PRINT:0,QR_CODE_PRINT:1,BAR_CODE_PRINT:2},U={ownerid:"ownerAccountChecked",caid:"createAccountChecked",ctime:"createTimeChecked",utime:"updateTimeChecked",uaid:"updateAccountChecked"},f={ownerAccount:_l("\u62E5\u6709\u8005\uFF1A"),createAccount:_l("\u521B\u5EFA\u4EBA\uFF1A"),createTime:_l("\u521B\u5EFA\u65F6\u95F4\uFF1A"),updateTime:_l("\u6700\u8FD1\u4FEE\u6539\u65F6\u95F4\uFF1A"),updateAccount:_l("\u6700\u8FD1\u4FEE\u6539\u4EBA\uFF1A")},V=null,C=null,O=[{name:_l("\u8282\u70B9\u540D\u79F0"),key:"nodeName"},{name:_l("\u8D1F\u8D23\u4EBA"),key:"operationUser"},{name:_l("\u64CD\u4F5C"),key:"operation"},{name:_l("\u64CD\u4F5C\u65F6\u95F4"),key:"operationTime"},{name:_l("\u5BA1\u6279\u610F\u89C1"),key:"opinion"},{name:_l("\u7B7E\u540D"),key:"signature"}],n=(g={},(0,ce.default)(g,Z.WORD_PRINT,{icon:"new_word",background:"#2196f3 0% 0% no-repeat padding-box",text:_l("Word \u6A21\u677F"),fileIcon:"fileIcon-word"}),(0,ce.default)(g,Z.EXCEL_PRINT,{icon:"new_excel",background:"#4CAF50",text:_l("Excel \u6A21\u677F"),fileIcon:"fileIcon-excel"}),g),s=[{value:0,text:_l("\u5728\u660E\u7EC6\u5185\u663E\u793A")},{value:1,text:_l("\u5728\u660E\u7EC6\u8868\u4E0B\u65B9\u663E\u793A")}]},50380:(lt,Te,t)=>{"use strict";t.d(Te,{FB:()=>R,wP:()=>te});var ce=100,g=function(a){return[0].includes(a.memberType)?"business":[1,2].includes(a.memberType)?"department1":[4].includes(a.memberType)?"limit-principal":[3].includes(a.memberType)?"user":""},p=function(a){return[0,1].includes(a.memberType)?"#2196f3":[3].includes(a.memberType)?"#ffad00":"#eaeaea"},L=function(a){return[0,1,3].includes(a.memberType)?"White":"Gray_9e"},te=[{value:0,tag:_l("\u5168\u7EC4\u7EC7"),text:_l("\u90E8\u95E8"),key:50},{value:1,tag:_l("\u90E8\u95E8\u6811"),text:_l("\u90E8\u95E8"),key:21},{value:2,text:_l("\u90E8\u95E8"),key:20},{value:3,text:_l("\u7EC4\u7EC7\u89D2\u8272"),key:40},{value:4,text:_l("\u804C\u4F4D"),key:30},{value:5,text:_l("\u4EBA\u5458"),key:10}],R={pageIndex:1,pageSize:ce,keywords:"",searchMemberType:0,sort:[]}},64250:(lt,Te,t)=>{"use strict";t.d(Te,{s:()=>ce});var ce=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,te="",R=p.length,y=p.replace(/[^\x00-\xff]/g,"**").length;if(y<=L)return p;for(var a=0,r=0;a<R;a++){var o=p.charAt(a);if(/[\x00-\xff]/.test(o)?r++:r+=2,r<=L)te+=o;else return te}}},56375:(lt,Te,t)=>{"use strict";t.d(Te,{Ah:()=>q,BY:()=>ie,FW:()=>f,Hn:()=>E,Id:()=>C,MD:()=>O,Pe:()=>V,QX:()=>le,Tq:()=>n,W4:()=>s,Wh:()=>ee,cg:()=>S,fZ:()=>c,hK:()=>I,lI:()=>A,mf:()=>k,mg:()=>b,q4:()=>re});var ce=t(88902),g=t.n(ce),p=t(46593),L=t.n(p);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(94780);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(24718);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(59061);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(83080);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(68085);if(!/^(1887|7596|7798)$/.test(t.j))var o=t(20487);var d=t(96486),Z=t.n(d),H=t(30381),U=t.n(H);function f(){var w=/detail_([^_?]+)_?([^_?]+)?/.exec(location.href),K=w[1],N="";return w[2]&&(w[2].indexOf("Z")>=0?N=U()(w[2],"YYYYMMDDHHmmss").add(-8,"h").format("YYYY-MM-DD HH:mm:ss")+".000Z":N=U()(w[2],"YYYYMMDDHHmmss").toISOString()),N?{calendarId:K,recurTime:N}:{calendarId:K}}function V(w,K){return new(L())(function(N,F){te.Z.getCalendarDetail2({calendarID:w,recurTime:K||""}).then(function(h){var z=h.code,X=h.data;if(z===1&&X.calendar){X.calendar.recurTime&&(X.calendar.recurTime=U()(X.calendar.recurTime).toISOString());var B=U()(X.calendar.start).utcOffset(8).format("YYYY-MM-DD"),x=U()(X.calendar.start).utcOffset(U()().utcOffset()/60).format("YYYY-MM-DD"),Q=(U()(B)-U()(x))/24/60/60/1e3;Q!==0&&X.calendar.frequency===R.BU.WEEK&&(X.calendar.weekDay=X.calendar.weekDay.split(",").map(function(i){var m=parseInt(i)-Q;return m<0?m+7:m%7}).join(",")),N({type:"SUCCESS",data:X})}else F(z===1?{type:"DENIED",message:"\u65E0\u6743\u9650\u67E5\u770B\u8BE5\u65E5\u7A0B"}:{type:"DELETED",message:"\u8BE5\u65E5\u7A0B\u5DF2\u88AB\u5220\u9664"})})})}function C(){return new(L())(function(w,K){te.Z.getUserAllCalCategories().then(function(N){N.code===1?w((N.data||[]).concat({catID:"1",catName:_l("\u5DE5\u4F5C\u65E5\u7A0B")})):K()})})}var O=function(K){var N=K.isRecur,F=K.recurCount,h=K.recurType,z=parseInt(K.frequency,10),X=parseInt(K.interval,10);if(!N||z===R.BU.NONE)return!1;var B="",x="",Q="",i="",m=R.BY[z-1];if(X===1?x=""+_l("\u6BCF")+m+" ":x=""+_l("\u6BCF")+X+m+" ",z===R.BU.WEEK){var v=K.weekDay?K.weekDay.split(","):[];v.length===5&&parseInt(v[0],10)===1&&parseInt(v[4],10)===5?B=_l("\u5728 \u5DE5\u4F5C\u65E5"):B=Z().map(v,function(P){return R.c8[P]}).join("\u3001"),Q=B+" "}else z===R.BU.MONTH?Q=_l("\u5728\u7B2C %0 \u5929",U()(K.start).format("D")):z===R.BU.YEAR&&(Q=_l("\u5728 %0",U()(K.start).format("MM\u6708DD\u65E5")));if(h===R.vT.COUNT)i=_l("\uFF0C\u5171 %0 \u6B21",F);else if(h===R.vT.DATE){var W=U()(K.untilDate);i=_l("\uFF0C\u622A\u6B62\u5230 %0",W.format("YYYY\u5E74MM\u6708DD\u65E5"))}return x+Q+i},n=function(K){var N=K.start,F=K.end,h=K.allDay,z=U()(N),X=U()(F),B=z.isSame(X,"day"),x=function(i,m){var v=U()(i).isSame(U()(),"year"),W=v?_l("MM\u6708DD\u65E5 (ddd)"):_l("YYYY\u5E74MM\u6708DD\u65E5 (ddd)");return h||(W+=" HH:mm",B&&m&&(W="HH:mm")),i.format(W)};return h?""+x(z)+(B?"":" "+_l("\u81F3")+" "+x(X,!0))+_l("\u5168\u5929"):""+_l("%0 \u81F3 %1",x(z),x(X,!0))},s=function(K){var N=md.global.Account.accountId,F=K.createUser,h=K.members,z=Z().find(h,function(X){return N===X.accountID})||{};return{showExit:z.status===1&&F!==N,showConfirm:z.status===0,showRefuse:z.status===2,showDelete:K.editable&&F===N,showEdit:K.editable,showShare:K.editable}},j=function(K){var N=parseInt(K.remindType,10),F=K.remindTime,h=[0,1,60,1440];return N===REMINDTYPE.NONE?!1:_l("\u63D0\u524D %0",F/h[N])},A=function(K){switch(K){case 0:return"calendarColorRed";case 1:return"calendarColorViolet";case 2:return"calendarColorBrown";case 3:return"calendarColorOrange";case 4:return"calendarColorBlue";case 5:return"calendarColorGreen";case 6:return"calendarColorYellow";case 99:return"calendarColorBlue";case 100:return"calendarColorYellow";case 103:return"calendarColorHide";default:return"calendarColorBlue"}},S=function(K,N){var F=K.id,h=K.catID;te.Z.updateCalendarCatId({calendarID:F,catID:h}).then(function(z){z.code===1?(N(),alert(_l("\u4FEE\u6539\u6210\u529F"))):alert(_l("\u4FEE\u6539\u5931\u8D25"),2)})},I=function(K,N){var F=K.keyStatus,h=K.token,z=K.id,X=K.title,B=K.start,x=K.end,Q=K.recurTime,i=K.address,m=K.createUser;(0,r.Z)({isCreate:!1,calendarOpt:{title:_l("\u5206\u4EAB\u65E5\u7A0B"),openURL:md.global.Config.WebUrl+"m/detail/calendar/",isAdmin:m===md.global.Account.accountId,keyStatus:F,name:X,startTime:B,endTime:x,address:i,shareID:z,recurTime:Q,token:h,ajaxRequest:te.Z,shareCallback:N}})},c=function(K,N){var F=K.members,h=K.users,z=N.id,X=N.recurTime,B=N.originRecur,x=N.isChildCalendar;return new(L())(function(Q,i){var m=[],v=[],W=[],P={};if(Z().forEach(F,function(l){l.accountID?m.push(l.accountID):W.push(l.account)}),Z().forEach(h,function(l){l.accountId&&m.indexOf(l.accountId)<0?v.push(l.accountId):l.account&&W.indexOf(l.account)<0&&(P[l.account]=l.fullname)}),!v.length&&!g()(P).length){alert(_l("\u6210\u5458\u5DF2\u7ECF\u5728\u65E5\u7A0B\u4E2D"),2);return}if(v.length===1&&v[0]===md.global.Account.accountId){alert(_l("\u4E0D\u80FD\u9080\u8BF7\u81EA\u5DF1"),2);return}var u=function(T){te.Z.addMembers({calendarID:z,memberIDs:v.join(","),specialAccounts:P,isAllCalendar:T,recurTime:X||""}).then(function(G){if(G.code===1){var D=G.data;D.limitedCount&&alert(_l("\u9080\u8BF7\u6210\u529F\uFF0C\u4F46\u6709%0\u4F4D\u7528\u6237\u9080\u8BF7\u5931\u8D25\uFF0C\u5916\u90E8\u7528\u6237\u77ED\u4FE1\u9080\u8BF7\u7528\u91CF\u8FBE\u5230\u4E0A\u9650",D.limitedCount),3),Q({source:G,isAllCalendar:T})}else G.code===9&&alert(_l("\u9080\u8BF7\u77ED\u4FE1\u53D1\u9001\u6570\u91CF\u5DF2\u8FBE\u6700\u5927\u9650\u5236\u3002"),3)})};(0,y.Z)({operatorTitle:_l("\u60A8\u786E\u5B9A\u9080\u8BF7\u65E5\u7A0B\u6210\u5458\u5417?"),recurTitle:_l("\u60A8\u786E\u5B9A\u9080\u8BF7\u91CD\u590D\u65E5\u7A0B\u6210\u5458\u5417?"),recurCalendarUpdateFun:u},{isChildCalendar:x,originRecur:B})})},q=function(K,N){var F=N.id,h=N.recurTime,z=N.originRecur,X=N.isChildCalendar,B=K===md.global.Account.accountId,x=B?_l("\u60A8\u786E\u5B9A\u9000\u51FA\u8BE5\u65E5\u7A0B\u5417\uFF1F"):_l("\u60A8\u786E\u5B9A\u79FB\u51FA\u65E5\u7A0B\u6210\u5458\u5417\uFF1F"),Q=B?_l("\u60A8\u786E\u5B9A\u9000\u51FA\u91CD\u590D\u65E5\u7A0B\u5417\uFF1F"):_l("\u60A8\u786E\u5B9A\u79FB\u51FA\u91CD\u590D\u65E5\u7A0B\u6210\u5458\u5417\uFF1F");return new(L())(function(i,m){var v=function(P){te.Z.removeMember({calendarID:F,accountID:K,recurTime:h,isAllCalendar:P}).then(function(u){if(u.code===1){var l=u.data;alert(B?_l("\u64CD\u4F5C\u6210\u529F"):_l("\u5220\u9664\u6210\u529F")),i({accountID:K,isAllCalendar:P}),B&&typeof o.D.exitCallback=="function"&&o.D.exitCallback()}else m(),alert(_l("\u5220\u9664\u5931\u8D25"),3)})};(0,y.Z)({operatorTitle:x,recurTitle:Q,recurCalendarUpdateFun:v},{originRecur:z,isChildCalendar:X})})},b=function(K,N,F){var h=F.originStartTime,z=F.originEndTime,X=K.members;return new(L())(function(B,x){var Q=function(m){return function(v){var W=K.id,P=K.recurTime,u=K.title,l=K.description,T=K.address,G=K.start,D=K.end,M=K.oldStartTime,se=K.oldEndTime,ae=K.allDay,ne=K.isRecur,de=K.frequency,Ce=K.interval,he=K.weekDay,fe=K.recurType,Ee=K.untilDate,Y=K.recurCount;if(v){if(G!==h){var oe=U()(G).diff(U()(h));G=U()(M).add(oe).format(ae?"YYYY-MM-DD 23:59":"YYYY-MM-DD HH:mm")}else G=U()(M).format(ae?"YYYY-MM-DD 23:59":"YYYY-MM-DD HH:mm");if(D!==z){var ve=U()(D).diff(U()(z));D=U()(se).add(ve).format(ae?"YYYY-MM-DD 23:59":"YYYY-MM-DD HH:mm")}else D=U()(se).format(ae?"YYYY-MM-DD 23:59":"YYYY-MM-DD HH:mm")}if(ne&&fe!==R.vT.NONE?fe===R.vT.COUNT?Ee="":fe===R.vT.DATE&&(Y=0):Ee="",de===R.BU.WEEK){var ue=he.split(","),pe=U()(G).utcOffset(8).format("YYYY-MM-DD"),Se=U()(G).utcOffset(U()().utcOffset()/60).format("YYYY-MM-DD"),ye=(U()(pe)-U()(Se))/24/60/60/1e3;he=Z().reduce(ue,function(J,me){var be=parseInt(me,10)+ye;return be>6?be=be-7:be<0&&(be=be+7),be===0?J+Math.pow(2,6):J+Math.pow(2,be-1)},0)}else he=0;te.Z.editCalendar({calendarId:W,name:u.replace(/\n/g,""),address:T,startDate:U()(G).toISOString(),endDate:U()(D).toISOString(),isAll:ae,desc:l,isRecur:!v&&ne?!1:ne,frequency:de,interval:Ce,weekDay:he,recurCount:Y,recurtime:P,untilDate:Ee?U()(Ee).toISOString():"",isAllCalendar:v,reConfirm:m}).then(function(J){var me=J.code;me===1?(B({isAllCalendar:v,oldStartTime:G,oldEndTime:D,reInvite:m}),$("#calendarList").is(":visible")&&o.D.saveCallback?o.D.saveCallback({start:U()().format("YYYY-MM-DD HH:mm"),end:$("#calendarListMoreData").html(),isFirst:!0,scrollTop:$(".calendarList").scrollTop()}):$.isFunction(o.D.saveCallback)&&o.D.saveCallback(),alert(_l("\u4FEE\u6539\u6210\u529F"))):alert(me===3?_l("\u65E0\u6743\u9650\u6216\u65E5\u7A0B\u5DF2\u5220\u9664"):_l("\u64CD\u4F5C\u5931\u8D25"),3)})}};X.length>1?(0,a.Z)(function(i,m){(0,y.Z)({operatorTitle:_l("\u60A8\u786E\u5B9A\u7F16\u8F91\u65E5\u7A0B\u5417"),recurTitle:_l("\u60A8\u786E\u5B9A\u7F16\u8F91\u91CD\u590D\u65E5\u7A0B\u5417?"),recurCalendarUpdateFun:Q(i)},K,{directRun:m,isEdit:N})}):(0,y.Z)({operatorTitle:_l("\u60A8\u786E\u5B9A\u7F16\u8F91\u65E5\u7A0B\u5417"),recurTitle:_l("\u60A8\u786E\u5B9A\u7F16\u8F91\u91CD\u590D\u65E5\u7A0B\u5417?"),recurCalendarUpdateFun:Q()},K,{directRun:!1,isEdit:N})})},k=function(K){var N=K.id,F=K.remindTime,h=K.remindType;return new(L())(function(z,X){te.Z.updateMemberRemind({remindTime:F,remindType:h,calendarID:N}).then(function(B){var x=B.code;x===1?(alert(_l("\u4FEE\u6539\u6210\u529F")),z()):alert(_l("\u4FEE\u6539\u5931\u8D25"),2)})})},ee=function(K){var N=K.id,F=K.voiceRemind;return new(L())(function(h,z){te.Z.updateVoiceRemind({voiceRemind:F,calendarID:N}).then(function(X){var B=X.code;B===1?(alert(_l("\u4FEE\u6539\u6210\u529F")),h()):alert(_l("\u4FEE\u6539\u5931\u8D25"),2)})})},re=function(K){var N=K.id,F=K.recurTime,h=K.originRecur,z=K.isChildCalendar;return new(L())(function(X,B){var x=function(i){te.Z.deleteCalendar({calendarID:N,recurTime:F,isAllCalendar:i}).then(function(m){m.code===1?(alert(_l("\u5220\u9664\u6210\u529F")),typeof o.D.deleteCallback=="function"&&o.D.deleteCallback(),X()):alert(_l("\u5220\u9664\u5931\u8D25"),3)})};(0,y.Z)({operatorTitle:_l("\u60A8\u786E\u5B9A\u5220\u9664\u65E5\u7A0B\u5417\uFF1F"),recurTitle:_l("\u60A8\u786E\u5B9A\u5220\u9664\u91CD\u590D\u65E5\u7A0B\u5417?"),recurCalendarUpdateFun:x},{originRecur:h,isChildCalendar:z})})},ie=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",N=arguments[1],F=N.id,h=N.recurTime,z=N.originRecur,X=N.isChildCalendar,B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},x=B.email,Q=B.mobile;return new(L())(function(i,m){var v=function(P){te.Z.reInvite({accountID:K,calendarID:F,recurTime:P?"":h,isAllCalendar:P,memberFlag:x||Q||""}).then(function(u){u.code==1?(alert(_l("\u91CD\u65B0\u53D1\u9001\u6210\u529F"),1),i({accountId:K,isAllCalendar:P})):alert(_l("\u91CD\u65B0\u53D1\u9001\u5931\u8D25"),3)})};(0,y.Z)({operatorTitle:_l("\u60A8\u786E\u5B9A\u91CD\u65B0\u9080\u8BF7\u65E5\u7A0B\u6210\u5458\u5417\uFF1F"),recurTitle:_l("\u60A8\u786E\u5B9A\u91CD\u65B0\u9080\u8BF7\u91CD\u590D\u65E5\u7A0B\u6210\u5458\u5417?"),recurCalendarUpdateFun:v},{originRecur:z,isChildCalendar:X})})},le=function(K,N){var F=N.id,h=N.recurTime,z=N.originRecur,X=N.isChildCalendar;return new(L())(function(B,x){var Q=function(m){te.Z.removeCalendarWeChatMember({calendarID:F,thirdID:K,recurTime:h,isAllCalendar:m}).then(function(v){v.code==1?(alert(_l("\u5220\u9664\u6210\u529F"),1),B({thirdId:K,isAllCalendar:m})):alert(_l("\u5220\u9664\u5931\u8D25"),3)})};(0,y.Z)({operatorTitle:_l("\u60A8\u786E\u5B9A\u79FB\u51FA\u65E5\u7A0B\u6210\u5458\u5417\uFF1F"),recurTitle:_l("\u60A8\u786E\u5B9A\u79FB\u51FA\u91CD\u590D\u65E5\u7A0B\u6210\u5458\u5417\uFF1F"),recurCalendarUpdateFun:Q},{originRecur:z,isChildCalendar:X})})},E=function(K,N){return new(L())(function(F,h){te.Z.updateCalendarIsPrivate({calendarID:K,isPrivate:N}).then(function(z){z.code===1?(alert(_l("\u4FEE\u6539\u6210\u529F")),F()):alert(_l("\u4FEE\u6539\u5931\u8D25"),2)})})}},24718:(lt,Te,t)=>{"use strict";t.d(Te,{AM:()=>o,BU:()=>y,BY:()=>R,Mz:()=>r,c8:()=>te,vT:()=>a});var ce=t(30381),g=t.n(ce),p=t(96486),L=t.n(p),te=L().map(new Array(7),function(d,Z){return g()().day(Z).format("dd")}),R=[_l("\u5929"),_l("\u5468"),_l("\u6708"),_l("\u5E74")],y={NONE:0,DAY:1,WEEK:2,MONTH:3,YEAR:4},a={NONE:"0",COUNT:"1",DATE:"2"},r={NONE:0,MINUTE:1,HOUR:2,DAY:3},o={UNCONFIRMED:0,CONFIRMED:1,REFUSED:2}},20487:(lt,Te,t)=>{"use strict";t.d(Te,{D:()=>ze,Z:()=>Et});var ce=t(52945),g=t.n(ce),p=t(69288),L=t(54208),te=t(85105),R=t.n(te),y=t(99663),a=t(22600),r=t(49135),o=t(93196),d=t(73935),Z=t(67294),H=t(88239),U=t(45697),f=t.n(U),V=t(93967),C=t.n(V),O=t(18585),n=t(24718),s=t(75809),j=t(56375),A=t(38197),S=t.n(A),I=t(54317),c=t.n(I),q=t(94780),b={};b.settings={date:"",categorys:window.localStorage.getItem("categorys")?window.localStorage.getItem("categorys").split(","):[],isWorkCalendar:window.localStorage.getItem("isWorkCalendar")==null||window.localStorage.getItem("isWorkCalendar")=="true",isTaskCalendar:window.localStorage.getItem("isTaskCalendar")==null||window.localStorage.getItem("isTaskCalendar")=="true",filterTaskType:window.localStorage.getItem("filterTaskType")==null?2:window.localStorage.getItem("filterTaskType"),otherUsers:[]},b.doT=S(),b.getQueryString=function(ft){var qe=new RegExp("(^|&)"+ft+"=([^&]*)(&|$)"),nt=window.location.search.substr(1).match(qe);return nt!=null?unescape(nt[2]):null},b.inviteCalendar={confirm:function(qe,nt,Ze){if(!qe){alert(_l("\u64CD\u4F5C\u5931\u8D25"),3);return}b.confirmOrUnconfirmInviteMe(qe,1,"",nt,Ze)},refuse:function(qe,nt,Ze){p.Z.confirm({dialogClasses:"inviteDirectMessages",width:488,title:Z.createElement("span",{className:"resuserTitle ThemeColor3"},_l("\u8BF7\u56DE\u590D\u60A8\u4E0D\u80FD\u53C2\u52A0\u7684\u539F\u56E0")),children:Z.createElement("div",{dangerouslySetInnerHTML:{__html:b.doT.template(c())({})}}),okText:_l("\u4E0D\u80FD\u53C2\u52A0"),removeCancelBtn:!0,onOk:function(){var ut=$("#refuserstd input:radio:checked"),xt=ut.attr("id")=="radOther"?$("#txtrefuseReason").val().trim():ut.val();if(xt===""||xt==_l("\u8F93\u5165\u60A8\u62D2\u7EDD\u9080\u8BF7\u7684\u7406\u7531"))return alert("\u8BF7\u8F93\u5165\u4E0D\u80FD\u53C2\u52A0\u7684\u7406\u7531",3),$("#txtrefuseReason").focus(),!1;b.confirmOrUnconfirmInviteMe(qe,2,xt,nt,"")}}),$("#refuserstd").on("change","input:radio",function(){$("#radOther")[0].checked?$("#txtrefuseReason").show():$("#txtrefuseReason").hide()})}},b.confirmOrUnconfirmInviteMe=function(ft,qe,nt,Ze,et){q.Z.changeMember({calendarID:ft,recurTime:Ze,catID:et,newStatus:qe,remark:nt}).then(function(ut){if(ut.code==1){alert(qe==2?"\u60A8\u5DF2\u53D1\u9001\u4E0D\u80FD\u53C2\u52A0\u7684\u539F\u56E0":_l("\u60A8\u5DF2\u786E\u8BA4\u53C2\u52A0\u8BE5\u65E5\u7A0B"));var xt=location.href.substr(location.href.lastIndexOf("/"));if(xt.indexOf("detail")>0)setTimeout(function(){location.reload()},1e3);else{var wt=$("#calendarNumber"),kt=parseInt(wt.text(),10)-1;wt.html(kt),kt===0&&wt.hide(),$("#inviteSinlge_"+ft).slideUp(600,function(){$(this).remove(),$("#invitedCalendars .inviteSinlge").length===0&&$("#calInvite").click()})}}else ut.code===3?alert("\u65E5\u7A0B\u5DF2\u88AB\u5220\u9664",3):alert(_l("\u4FEE\u6539\u5931\u8D25"),3)})},b.errorMessage=function(ft){console.log(ft)},b.getUserAllCalCategories=function(ft){q.Z.getUserAllCalCategories().then(function(qe){qe.code==1?$.isFunction(ft)&&ft(qe.data):b.errorMessage(qe.msg)})};const k=b;var ee=t(42185),re=t(341),ie=t(35572),le=t.n(ie),E=t(96486),w=t.n(E);function K(ft){var qe=ft.createUser,nt=ft.members,Ze=ft.address,et=ft.description,ut=ft.allDay,xt=ft.start,wt=ft.end,kt=ft.title,Rt=w().map(nt,function(Mt){return(0,H.default)({},Mt,{name:Mt.memberName,id:Mt.accountID||""})}),jt=_l("%0 \u9080\u8BF7\u60A8\u53C2\u52A0\u65E5\u7A0B\uFF1A%1",md.global.Account.fullname,kt.replace(/\n/g,""))+`
`+_l("\u65F6\u95F4\uFF1A%0",(0,j.Tq)({allDay:ut,start:xt,end:wt}))+`
`+(Ze?_l("\u5730\u70B9\uFF1A%0",Ze):_l("\u5730\u70B9\uFF1A\u65E0"))+`
`+(et?_l("\u63CF\u8FF0\uFF1A%0",et):_l("\u63CF\u8FF0\uFF1A\u65E0"));p.Z.confirm({dialogClasses:"postMessageDialog",width:570,children:Z.createElement("div",{dangerouslySetInnerHTML:{__html:S().template(le())({data:Rt,defaultContent:jt})}}),footer:Z.createElement("div",{className:"Dialog-footer-btns"},Z.createElement(ee.ZP,{type:"link",onClick:function(){$(".postMessageDialog").parent().remove()}},_l("\u53D6\u6D88")),Z.createElement(ee.ZP,{type:"primary",onClick:function(){var sn=[];if($(".postMessageList .markCompletedSmall").each(function(){var an=$(this).parent();an.attr("uid")&&sn.push(an.attr("uid"))}),sn.length<1)return alert(_l("\u8BF7\u9009\u62E9\u53D1\u9001\u4EBA\u5458"),3),!1;var on=$("#postContent").val(),en=$("#btnSendType").attr("type"),$t="";en==="1"?$t="sendMessageToAccountIds":en==="2"&&($t="sendEmailMessageToAccountIds"),re.Z[$t]({accountIds:sn,content:on,attachments:""}).then(function(){$(".postMessageDialog").parent().remove(),alert(_l("\u53D1\u9001\u6210\u529F"),1)}).catch(function(){alert(_l("\u53D1\u9001\u5931\u8D25"),3)})}},_l("\u53D1\u9001")))});var fn=$(".postMessageDialog");$("#postContent",fn).autoTextarea({maxHeight:250,minHeight:100}),$(".postMessageList",fn).on("click","li",function(){var Mt=$(this).find(".postCheck");Mt.hasClass("markCompletedSmall")?Mt.removeClass("markCompletedSmall ").addClass("markUnCompleteSmall"):Mt.removeClass("markUnCompleteSmall").addClass("markCompletedSmall")}),$("#postAllCheck",fn).on("click",function(){$(this).hasClass("markCompletedSmall")?($(this).removeClass("markCompletedSmall ").addClass("markUnCompleteSmall"),$(".postMessageList .postCheck").removeClass("markCompletedSmall ").addClass("markUnCompleteSmall")):($(this).removeClass("markUnCompleteSmall").addClass("markCompletedSmall"),$(".postMessageList .postCheck").removeClass("markUnCompleteSmall").addClass("markCompletedSmall"))}),$("#btnprivate,#btnEmail").on("click",function(){var Mt=["","postContentPrivate","postContentEmail"],sn=$(this).attr("type");$(this).addClass("ThemeColor3").siblings().removeClass("ThemeColor3"),$("#btnSendType").attr("type",sn).removeClass().addClass(Mt[sn])})}var N=t(15577),F,h,z=(h=F=function(ft){(0,o.default)(qe,ft);function qe(){return(0,y.default)(this,qe),(0,r.default)(this,(qe.__proto__||R()(qe)).apply(this,arguments))}return(0,a.default)(qe,[{key:"componentDidAppear",value:function(){this.elem&&$(this.elem).addClass("action-bar-active")}},{key:"componentDidEnter",value:function(){var Ze=this;setTimeout(function(){Ze.elem&&$(Ze.elem).addClass("action-bar-active")},1)}},{key:"componentWillLeave",value:function(Ze){this.elem&&$(this.elem).removeClass("action-bar-active"),setTimeout(Ze,300)}},{key:"render",value:function(){var Ze=this,et=this.props,ut=et.type,xt=et.save,wt=et.cancel,kt=et.confirm,Rt=et.refuse;return Z.createElement("div",{className:C()("calendarAction clearfix",ut+"Calendar"),ref:function(fn){Ze.elem=fn}},Z.createElement("div",{className:"calendarActionWrapper"},ut==="update"?Z.createElement("span",{className:"actionHint"},_l("\u65E5\u7A0B\u5185\u5BB9\u5DF2\u66F4\u6539")):Z.createElement("span",{className:"actionHint"},_l("\u9080\u8BF7\u60A8\u53C2\u52A0\u6B64\u65E5\u7A0B")),function(){switch(ut){case"update":return Z.createElement("div",{className:"Right"},Z.createElement(ee.ZP,{type:"link",size:"small",className:"White mRight15",onClick:wt},_l("\u53D6\u6D88")),Z.createElement(ee.ZP,{type:"ghost",size:"small",className:"mRight20 ghostBtn",onClick:xt},_l("\u66F4\u65B0")));case"confirm":return Z.createElement("div",{className:"Right"},Z.createElement(ee.ZP,{className:"White mRight15",size:"small",type:"link",onClick:Rt},_l("\u4E0D\u80FD\u53C2\u52A0")),Z.createElement(ee.ZP,{type:"ghost",size:"small",className:"mRight20 ghostBtn",onClick:kt},_l("\u53C2\u52A0")))}}()))}}]),qe}(Z.Component),F.propTypes={type:f().string.isRequired,save:f().func.isRequired,cancel:f().func.isRequired,confirm:f().func.isRequired,refuse:f().func.isRequired},h),X=t(61749),B=t.n(X),x=t(62745),Q=t(33867),i=t(62521),m=t(16469),v,W,P=(W=v=function(ft){(0,o.default)(qe,ft);function qe(nt){(0,y.default)(this,qe);var Ze=(0,r.default)(this,(qe.__proto__||R()(qe)).call(this,nt));return Ze.state={isCategoryReady:!1,isShowCategory:!1,isShowOpList:!1,categories:null,title:nt.title},Ze}return(0,a.default)(qe,[{key:"componentDidUpdate",value:function(){var Ze=this,et=this.state,ut=et.isShowCategory,xt=et.isCategoryReady;ut&&!xt&&(0,j.Id)().then(function(wt){Ze.setState({isCategoryReady:!0,categories:wt})})}},{key:"handleChangeCategory",value:function(Ze){var et=this,ut=this.props.changeCategory;return function(){ut(Ze),et.setState({isShowCategory:!1})}}},{key:"handleJoinOutLook",value:function(){var Ze=this.props.joinOutLook;Ze(),this.setState({isShowOpList:!1})}},{key:"handleChangeTitle",value:function(Ze){$.trim(Ze).length<=266?(this.props.changeTitle(Ze),this.setState({title:Ze})):alert(_l("\u65E5\u7A0B\u6807\u9898\u6700\u5927\u957F\u5EA6266\u4E2A\u5B57\u7B26"),2)}},{key:"render",value:function(){var Ze=this,et=this.props,ut=et.title,xt=et.auth.showEdit;return Z.createElement("div",{className:"calendarTopBar"},Z.createElement("div",{className:"calendarHeader"},this.renderCategory(xt),Z.createElement(x.Z,{resizeAfterBlur:!0,value:this.state.title,minHeight:26,maxHeight:100,onChange:this.handleChangeTitle.bind(this),onBlur:function(){Ze.setState({title:ut})},readOnly:!xt,className:"calendarNameInput"}),this.renderOperations()),Z.createElement(B(),{component:"div",transitionAppear:!0},this.props.children&&this.props.children))}},{key:"renderCategoryList",value:function(Ze){var et=this,ut=this.state,xt=ut.isCategoryReady,wt=ut.isShowCategory,kt=ut.categories;return Ze&&wt?Z.createElement(i.Z,{onClickAway:function(){et.setState({isShowCategory:!1})},onClickAwayExceptions:[this.catBtn],ignoreOnHide:!0},function(){if(xt){if(kt)return kt.map(function(Rt){var jt=$("<div>").html(Rt.catName).text(),fn=(0,j.lI)(Rt.color);return Z.createElement(m.Z,{onClick:et.handleChangeCategory(Rt),key:Rt.catID},Z.createElement("span",{className:C()("calendarCatInput","mRight5",fn)}),jt)})}else return Z.createElement(m.Z,null,Z.createElement(L.Z,null))}()):null}},{key:"renderCategory",value:function(Ze){var et=this;if(!this.props.canLook)return null;var ut=(0,j.lI)(this.props.color);return Z.createElement("span",{className:"categoryContainer Font16 Relative mTop10"},Z.createElement("span",{className:C()("calendarCatInput",ut),ref:function(wt){et.catBtn=wt}}),Ze?Z.createElement(Q.Z,{icon:"arrow-down-border",className:"categoryArrow pointer",onClick:function(){et.setState({isShowCategory:!0})}}):null,this.renderCategoryList(Ze))}},{key:"renderOperations",value:function(){var Ze=this,et=this.props,ut=et.auth,xt=et.openDetailPage,wt=et.postMessage,kt=et.shareCalendar,Rt=et.deleteCalendar,jt=et.exitCalendar,fn=et.createTask,Mt=ut.showShare,sn=ut.showExit,on=ut.showDelete,en=ut.showEdit,$t=this.state.isShowOpList;return Z.createElement("div",{className:"calendarOperations pLeft15"},Z.createElement("span",{className:"Relative mLeft20 calMoreOp"},Z.createElement("span",{className:"icon-task-point-more Font19 ThemeHoverColor3 pointer",ref:function(tn){Ze.opBtn=tn},onClick:function(){Ze.setState({isShowOpList:!0})}}),$t?Z.createElement(i.Z,{className:"calendarOpDrowDown",parentMenuItem:this.opBtn,onClickAway:function(){Ze.setState({isShowOpList:!1})},onClickAwayExceptions:[this.opBtn],ignoreOnHide:!0,con:".calendarHeader"},(sn||on)&&!md.global.SysSettings.forbidSuites.includes("2")?Z.createElement(m.Z,{onClick:fn},_l("\u521B\u5EFA\u4E3A\u65B0\u4EFB\u52A1")):null,Z.createElement(m.Z,{onClick:this.handleJoinOutLook.bind(this)},_l("\u52A0\u5165Outlook")),en?Z.createElement(m.Z,{onClick:wt},_l("\u7FA4\u53D1\u6D88\u606F")):null,ze.isDetailPage?null:Z.createElement(m.Z,{onClick:xt},_l("\u65B0\u9875\u9762\u6253\u5F00")),sn?Z.createElement(m.Z,{className:"exitCalendar",onClick:jt},_l("\u9000\u51FA\u65E5\u7A0B")):null,on?Z.createElement(m.Z,{className:"deleteCalendar",onClick:Rt},_l("\u5220\u9664\u65E5\u7A0B")):null):null),ze.isDetailPage?null:Z.createElement("span",{className:"mLeft20 icon-close Font20 ThemeHoverColor3 pointer",onClick:ze.closeDialog}))}}]),qe}(Z.Component),v.propTypes={title:f().string.isRequired,auth:f().object.isRequired,color:f().number.isRequired,changeCategory:f().func.isRequired,changeTitle:f().func.isRequired,joinOutLook:f().func.isRequired,openDetailPage:f().func.isRequired,postMessage:f().func.isRequired,shareCalendar:f().func.isRequired,deleteCalendar:f().func.isRequired,exitCalendar:f().func.isRequired,createTask:f().func.isRequired},W),u=t(12424),l=t(31546),T=t(81274),G=t(30381),D=t.n(G),M,se,ae=(se=M=function(ft){(0,o.default)(qe,ft);function qe(nt){return(0,y.default)(this,qe),(0,r.default)(this,(qe.__proto__||R()(qe)).call(this,nt))}return(0,a.default)(qe,[{key:"changeFrequency",value:function(Ze){this.props.change({isRecur:n.BU.NONE!==+Ze,frequency:+Ze})}},{key:"changeInterval",value:function(Ze){var et=parseInt(Ze.target.value,10);this.props.change({interval:isNaN(et)||et<=0?1:Math.min(et,99)})}},{key:"changeWeekDay",value:function(Ze){var et=this.props.calendar.weekDay,ut=et?et.split(",").sort(function(kt,Rt){return kt-Rt}):[],xt=Ze.target.getAttribute("value"),wt=ut.indexOf(xt)!==-1;wt?ut=w().without(ut,xt):w()(ut).push(xt).sort(function(kt,Rt){return kt-Rt}).commit(),this.props.change({weekDay:ut.join(",")})}},{key:"changeRecur",value:function(Ze){this.props.change({recurType:Ze})}},{key:"changeRecurCount",value:function(Ze){var et=parseInt(Ze.target.value,10);this.props.change({recurCount:isNaN(et)||et<=0?1:Math.min(et,99)})}},{key:"renderFrequency",value:function(){var Ze=this.props.calendar.frequency,et=[{text:_l("\u65E0"),value:n.BU.NONE+""},{text:_l("\u6BCF\u5929"),value:n.BU.DAY+""},{text:_l("\u6BCF\u5468"),value:n.BU.WEEK+""},{text:_l("\u6BCF\u6708"),value:n.BU.MONTH+""},{text:_l("\u6BCF\u5E74"),value:n.BU.YEAR+""}],ut={data:et,value:Ze+"",onChange:this.changeFrequency.bind(this),key:"frequency-input"};return Z.createElement("div",null,Z.createElement("div",{className:"LineHeight30"},Z.createElement("span",{className:"formLabel"},_l("\u91CD\u590D:")),Z.createElement(l.Z,ut)),Ze===n.BU.NONE?null:this.renderInterval(),Ze===n.BU.NONE?null:this.renderRecur())}},{key:"renderInterval",value:function(){var Ze=this.props.calendar,et=Ze.frequency,ut=Ze.interval,xt=n.BY[et-1];return Z.createElement("div",{className:"LineHeight30"},Z.createElement("span",{className:"formLabel"},_l("\u9891\u7387:")),Z.createElement("div",{className:"FormControl"},_l("\u6BCF"),Z.createElement("input",{type:"text",className:"intervalBox ThemeBorderColor3",value:ut,onChange:this.changeInterval.bind(this)}),xt,this.renderWeekDay(et)))}},{key:"renderWeekDay",value:function(){var Ze=this,et=this.props.calendar,ut=et.frequency,xt=et.weekDay,wt=xt?xt.split(",").sort(function(kt,Rt){return kt-Rt}):[];return ut!==n.BU.WEEK?null:Z.createElement("span",{className:"weekDaysContainer"},n.c8.map(function(kt,Rt){var jt=wt.indexOf(""+Rt)!==-1;return Z.createElement("span",{className:C()("weekday",{ThemeBGColor3:jt}),onClick:Ze.changeWeekDay.bind(Ze),value:Rt,key:Rt},kt)}))}},{key:"renderRecur",value:function(){var Ze=this.props.calendar.recurType,et=[{text:_l("\u6C38\u4E0D"),value:n.vT.NONE},{text:_l("\u6B21\u6570"),value:n.vT.COUNT},{text:_l("\u65E5\u671F"),value:n.vT.DATE}],ut={data:et,value:Ze};return Z.createElement("div",{className:"LineHeight30"},Z.createElement("span",{className:"formLabel"},_l("\u7ED3\u675F:")),Z.createElement(l.Z,(0,H.default)({},ut,{onChange:this.changeRecur.bind(this),key:"recur-input"})),Ze===n.vT.NONE?null:this.renderRecurEdit())}},{key:"renderRecurEdit",value:function(){var Ze=this,et=this.props.calendar,ut=et.end,xt=et.recurType,wt=et.recurCount,kt=et.untilDate;return xt===n.vT.COUNT?Z.createElement("span",{className:"mLeft10"},_l("\u53D1\u751F"),Z.createElement("input",{type:"text",className:"recurCountBox ThemeBorderColor3",value:wt,onChange:this.changeRecurCount.bind(this)}),"\u6B21\u540E"):Z.createElement("span",{className:"mLeft10 Relative untilDateBox ThemeBorderColor3",ref:function(jt){Ze.untilDateBox=jt}},Z.createElement(T.Z,{popupParentNode:function(){return Ze.untilDateBox},format:"YYYY-MM-DD",selectedValue:D()(kt),disabledDate:function(jt){if(jt.isSameOrBefore(D()(ut),"day"))return!0},onSelect:function(jt){jt?Ze.props.change({untilDate:jt.format("YYYY-MM-DD")}):Ze.props.change({untilDate:"0"})}}))}},{key:"render",value:function(){var Ze=this.props.calendar,et=Ze.isChildCalendar,ut=Ze.frequency;return et?null:Z.createElement("div",null,this.renderFrequency(),ut!==n.BU.NONE?Z.createElement("div",{className:"LineHeight30"},Z.createElement("span",{className:"formLabel Gray"},_l("\u7ED3\u679C:")),(0,j.MD)(this.props.calendar)):null)}}]),qe}(Z.Component),M.propTypes={change:f().func.isRequired},se),ne=t(60967),de=t(15405),Ce,he=T.Z.RangePicker,fe=(0,de.Z)(Ce=function(ft){(0,o.default)(qe,ft);function qe(){(0,y.default)(this,qe);var nt=(0,r.default)(this,(qe.__proto__||R()(qe)).call(this));return nt.state={unSelected:!1},nt}return(0,a.default)(qe,[{key:"handleDateChange",value:function(Ze){var et=this.props,ut=et.calendar.allDay,xt=et.change,wt=(0,u.Z)(Ze,2),kt=wt[0],Rt=wt[1];ut&&(kt.startOf("day"),Rt.endOf("day")),this.setState({unSelected:!1},function(){xt({start:kt.format("YYYY-MM-DD HH:mm"),end:Rt.format("YYYY-MM-DD HH:mm")})})}},{key:"renderResult",value:function(){var Ze=this.state.unSelected;if(Ze)return Z.createElement("span",{className:"editWrapper"},_l("\u8BF7\u9009\u62E9"));var et=this.props.calendar,ut=et.start,xt=et.end,wt=et.allDay,kt=wt?"YYYY-MM-DD (ddd)":"YYYY-MM-DD (ddd) HH:mm";return Z.createElement("span",{className:"editWrapper"},D()(ut).format(kt),Z.createElement("span",{className:"mLeft5 mRight5"},_l("\u81F3")),D()(xt).format(kt))}},{key:"render",value:function(){var Ze=this,et=this.props,ut=et.calendar,xt=ut.start,wt=ut.allDay,kt=ut.end,Rt=ut.isChildCalendar,jt=et.change,fn=this.state.unSelected,Mt={offset:{left:-48,top:5},popupParentNode:function(){return Ze.box},selectedValue:fn?[]:[D()(xt),D()(kt)],timePicker:!wt,onOk:function(on){Ze.handleDateChange(on)},onClear:function(){Ze.setState({unSelected:!0})},autoFillEndTime:1};return Z.createElement("div",{className:"calLine pTop5 pBottom5"},Z.createElement("div",{className:"Relative",ref:function(on){Ze.box=on}},Z.createElement(he,Mt,this.renderResult())),Z.createElement("div",{className:"LineHeight30"},Z.createElement("span",{className:"formLabel"},_l("\u5168\u5929:")),Z.createElement("div",{className:"FormControl TxtMiddle"},Z.createElement(ne.Z,{checked:wt,onClick:function(on){jt({allDay:!on})},className:"TxtMiddle"}))),Rt?null:Z.createElement(ae,this.props))}}]),qe}(Z.Component))||Ce,Ee=function(ft){(0,o.default)(qe,ft);function qe(nt){(0,y.default)(this,qe);var Ze=(0,r.default)(this,(qe.__proto__||R()(qe)).call(this,nt));return Ze.state={isEditing:!1},Ze}return(0,a.default)(qe,[{key:"componentWillUpdate",value:function(){this.elem&&(this.origHeight=$(this.elem).height())}},{key:"componentDidUpdate",value:function(Ze,et){if(this.elem){var ut=$(this.elem),xt=this.origHeight;this.elem.style.height="auto";var wt=ut.height();wt!==xt&&(ut.height(xt),ut.width(),ut.height(wt).addClass("overflowHidden").one("transitionend",function(){ut.removeClass("overflowHidden")}))}}},{key:"handleClick",value:function(){var Ze=this.props.calendar.editable;if(typeof window.getSelection=="function"){var et=window.getSelection().toString();if(et)return!1}Ze&&!this.state.isEditing&&this.setState({isEditing:!0})}},{key:"renderShowBlock",value:function(){var Ze=this.props.calendar;return Z.createElement("div",{onClick:this.handleClick.bind(this),className:"pTop5 pBottom5 w100"},Z.createElement("div",{className:"calLine"},(0,j.Tq)(Ze)),Ze.isRecur&&!Ze.isChildCalendar?Z.createElement("div",{className:"calLine"},_l("\u91CD\u590D\uFF1A%0 ",(0,j.MD)(Ze))):null)}},{key:"renderEditBlock",value:function(){var Ze=this;return Z.createElement(fe,(0,H.default)({},this.props,{onClickAway:function(){return Ze.setState({isEditing:!1})},ignoreOnHide:!1,specialFilter:function(ut){var xt=$(ut);return xt.closest(".warpDatePicker").length||xt.closest(".ui-timepicker-list").length}}))}},{key:"render",value:function(){var Ze=this,et=this.state.isEditing;return Z.createElement("div",{className:C()("calendarDate calRow",{isEditing:et}),ref:function(xt){Ze.elem=xt}},Z.createElement(Q.Z,{icon:"bellSchedule",className:"Font19 calIcon"}),et?this.renderEditBlock():this.renderShowBlock())}}]),qe}(Z.Component),Y,oe,ve=[n.Mz.NONE,n.Mz.MINUTE,n.Mz.HOUR,n.Mz.DAY],ue=function(qe,nt){var Ze=ve.indexOf(qe);return Ze>-1?nt/(Ze===3?60*24:Math.pow(60,Ze-1)):null},pe=function(qe,nt){var Ze=ve.indexOf(qe);return Ze>=1?nt*(Ze===3?60*24:Math.pow(60,Ze-1)):0},Se=(oe=Y=function(ft){(0,o.default)(qe,ft);function qe(nt){(0,y.default)(this,qe);var Ze=(0,r.default)(this,(qe.__proto__||R()(qe)).call(this,nt));return Ze.onChangeRemind=function(et){var ut=$.trim(et.currentTarget.value);ut<0?ut=1:ut>99&&(ut=99),Ze.setState({value:ut})},Ze.state={value:ue(nt.remindType,nt.remindTime)},Ze}return(0,a.default)(qe,[{key:"componentWillReceiveProps",value:function(Ze){this.setState({value:ue(Ze.remindType,Ze.remindTime)})}},{key:"changeRemindType",value:function(Ze){var et=this,ut=1;+Ze===n.Mz.MINUTE&&(ut=15);var xt=function(){(0,j.mf)({id:et.props.id,remindType:+Ze,remindTime:et.state.value}).then(function(){et.props.change({remindType:+Ze,remindTime:pe(+Ze,et.state.value)})})};this.setState({value:ut},xt)}},{key:"changeRemindTime",value:function(Ze){var et=this,ut=this.props,xt=ut.id,wt=ut.remindType,kt=ut.remindTime,Rt=parseInt(Ze.target.value,10);isNaN(Rt)&&(Rt=wt===n.Mz.MINUTE?15:1);var jt=pe(wt,Rt);jt===kt?this.props.change({remindTime:jt}):(0,j.mf)({id:xt,remindType:wt,remindTime:Rt}).then(function(){et.props.change({remindTime:jt})})}},{key:"changeVoiceRemind",value:function(Ze,et,ut){var xt=this,wt=this.props.id,kt=!Ze;(0,j.Wh)({id:wt,voiceRemind:kt}).then(function(){xt.props.change({voiceRemind:kt})})}},{key:"render",value:function(){var Ze=this.props,et=Ze.remindType,ut=Ze.editable,xt=Ze.voiceRemind,wt={data:[{text:_l("\u5206\u949F"),value:n.Mz.MINUTE+""},{text:_l("\u5C0F\u65F6"),value:n.Mz.HOUR+""},{text:_l("\u5929"),value:n.Mz.DAY+""},{text:_l("\u65E0"),value:n.Mz.NONE+""}],value:et+"",key:"remind-input",onChange:this.changeRemindType.bind(this)};return ut?Z.createElement("div",{className:"calendarRemind calRow"},Z.createElement(Q.Z,{icon:"task-point-more",className:"Font20 calIcon"}),Z.createElement("div",{className:"calLine"},Z.createElement("span",{className:"formLabel"},_l("\u63D0\u9192%19000"),":"),et===n.Mz.NONE?null:Z.createElement("span",null,_l("\u63D0\u524D%19001"),Z.createElement("input",{type:"text",className:"remindBox ThemeBorderColor3",value:this.state.value,onChange:this.onChangeRemind,onBlur:this.changeRemindTime.bind(this)})),Z.createElement(l.Z,(0,H.default)({},wt,{className:"InlineBlock"})),et===n.Mz.NONE?null:Z.createElement("span",{className:"mLeft50 Gray_9e InlineBlock"},Z.createElement(ne.Z,{className:"Font12 InlineBlock TxtMiddle",size:"small",checked:xt,onClick:this.changeVoiceRemind.bind(this)},_l("\u7535\u8BDD\u63D0\u9192")),Z.createElement("span",{className:"mLeft10 TxtMiddle","data-tip":_l("\u52FE\u9009\u7535\u8BDD\u63D0\u9192\uFF0C\u5C06\u4EE5\u7535\u8BDD\u8BED\u97F3\u5F62\u5F0F\u901A\u77E5\u60A8")},Z.createElement("i",{className:"icon-help"}))))):null}}]),qe}(Z.Component),Y.propTypes={id:f().string.isRequired,change:f().func.isRequired,remindTime:f().number,remindType:f().oneOf([n.Mz.NONE,n.Mz.MINUTE,n.Mz.HOUR,n.Mz.DAY])},oe),ye,J,me=(J=ye=function(ft){(0,o.default)(qe,ft);function qe(nt){return(0,y.default)(this,qe),(0,r.default)(this,(qe.__proto__||R()(qe)).call(this,nt))}return(0,a.default)(qe,[{key:"changeAddress",value:function(Ze){var et=Ze.target.value;this.props.change({address:et})}},{key:"render",value:function(){var Ze=this.props,et=Ze.address,ut=Ze.editable,xt=Ze.canLook;return Z.createElement("div",{className:"calendarAddress calRow"},Z.createElement(Q.Z,{icon:"location",className:"Font20 calIcon"}),Z.createElement("div",{className:"calLine"},Z.createElement("div",{className:"addressContainer"},Z.createElement("input",{type:"text",readOnly:!ut,className:"addressBox",value:et,onChange:this.changeAddress.bind(this),placeholder:ut?_l("\u6DFB\u52A0\u4F1A\u8BAE\u5730\u70B9"):_l("\u672A\u586B\u5199\u4F1A\u8BAE\u5730\u70B9")}),et&&xt?Z.createElement("a",{href:"http://api.map.baidu.com/geocoder?address="+et+"&output=html&referer=",target:"_blank",className:"pLeft15 pRight15"},_l("\u5730\u56FE")):null)))}}]),qe}(Z.Component),ye.propTypes={change:f().func.isRequired,address:f().string},J),be=t(32422),xe=function(ft){(0,o.default)(qe,ft);function qe(){return(0,y.default)(this,qe),(0,r.default)(this,(qe.__proto__||R()(qe)).apply(this,arguments))}return(0,a.default)(qe,[{key:"render",value:function(){var Ze=this,et=this.props,ut=et.member,xt=ut.head,wt=ut.memberName,kt=ut.status,Rt=ut.face,jt=ut.nickName,fn=ut.accountID,Mt=ut.thirdID,sn=et.isCreateUser,on=et.isWxMember,en=et.editable,$t=et.callback,an=et.argProps,tn=Z.createElement("div",{className:"messageDivBtn clearfix"},Z.createElement("span",{className:fn===md.global.Account.accountId?"messageDivExit":"messageDivRemove",onClick:function(){fn===md.global.Account.accountId?$t.removeMember(fn,an):on?$t.removeWxMember(Mt,an):$t.removeMember(fn,an)}},fn===md.global.Account.accountId?_l("\u9000\u51FA\u672C\u65E5\u7A0B"):_l("\u79FB\u51FA\u672C\u65E5\u7A0B")),kt!==n.AM.CONFIRMED&&!on&&!sn&&Z.createElement("span",{className:"messageDivPerson",onClick:function(){return $t.reInvite(fn,an)}},_l("\u91CD\u65B0\u53D1\u9001\u9080\u8BF7")));return Z.createElement(be.Z,{className:"calendarBusinessCard",sourceId:fn||Mt,data:{avatar:xt||Rt,fullname:wt||jt,accountId:md.global.Account.accountId,status:3,companyName:_l("\u6765\u81EA\u5FAE\u4FE1\u9080\u8BF7")},operation:!sn&&en?tn:null},Z.createElement("span",{className:"memberItem",ref:function(Lt){Ze.memberItem=Lt}},on?Z.createElement("img",{src:Rt,alt:jt,className:"memberAvatar"}):Z.createElement("img",{src:xt?xt.replace(/\/w\/(\w+)\/h\/(\w+)/,"/w/26/h/26"):"",alt:wt,className:"memberAvatar"}),function(){if(sn)return null;if(on)return Z.createElement("span",{className:"memberStatus confirmed"});switch(kt){case n.AM.UNCONFIRMED:default:return Z.createElement("span",{className:"memberStatus unConfirmed"});case n.AM.CONFIRMED:return Z.createElement("span",{className:"memberStatus confirmed"});case n.AM.REFUSED:return Z.createElement("span",{className:"memberStatus refused"})}}(),on?Z.createElement("span",{className:"memberName"},jt):Z.createElement("span",{className:"memberName"},wt),sn?Z.createElement("span",null,_l("\uFF08\u7EC4\u7EC7\u8005\uFF09")):null))}}]),qe}(Z.Component),Ae=function(ft){(0,o.default)(qe,ft);function qe(){return(0,y.default)(this,qe),(0,r.default)(this,(qe.__proto__||R()(qe)).apply(this,arguments))}return(0,a.default)(qe,[{key:"renderWxMembers",value:function(){var Ze=this.props,et=Ze.thirdUser,ut=Ze.editable,xt=Ze.callback,wt=Ze.argProps,kt={editable:ut,callback:xt,argProps:wt};return Z.createElement("div",{className:"membersContainer"},et.map(function(Rt){return Z.createElement(xe,(0,H.default)({isCreateUser:!1,isWxMember:!0,member:Rt,thirdUser:et,key:Rt.thirdID},kt))}))}},{key:"render",value:function(){var Ze=this.props,et=Ze.members,ut=Ze.thirdUser,xt=Ze.createUser,wt=Ze.editable,kt=Ze.addCalendarMember,Rt=Ze.callback,jt=Ze.argProps,fn=w().find(et,function(on){return on.accountID===xt}),Mt=w().filter(et,function(on){return on.accountID!==xt}),sn={editable:wt,callback:Rt,argProps:jt};return Z.createElement("div",{className:"calendarMember calRow"},Z.createElement(Q.Z,{icon:"group",className:"Font18 calIcon"}),Z.createElement("div",{className:"memberBox"},Z.createElement(xe,(0,H.default)({isCreateUser:!0,member:fn},sn)),Z.createElement("div",{className:"membersContainer"},Mt.map(function(on){return Z.createElement(xe,(0,H.default)({isCreateUser:!1,member:on,key:on.accountID},sn))}),wt?Z.createElement("span",{onClick:kt,className:"addCalendarMember ThemeHoverColor3"},Z.createElement(Q.Z,{icon:"task-add-member-circle",className:"Font26 mRight15 addBtn"}),_l("\u6DFB\u52A0\u51FA\u5E2D\u8005")):null),ut&&ut.length?Z.createElement("div",null,_l("\u901A\u8FC7\u65E5\u7A0B\u5206\u4EAB\u52A0\u5165\u7684\u7528\u6237")):null,ut&&ut.length?this.renderWxMembers():null))}}]),qe}(Z.Component),Ne=function(ft){(0,o.default)(qe,ft);function qe(nt){(0,y.default)(this,qe);var Ze=(0,r.default)(this,(qe.__proto__||R()(qe)).call(this,nt));return Ze.changeText=Ze.changeText.bind(Ze),Ze}return(0,a.default)(qe,[{key:"changeText",value:function(Ze){if(!this.props.editable)return!1;this.props.change({description:Ze})}},{key:"render",value:function(){var Ze=this,et=this.props,ut=et.editable,xt=et.attachments;return Z.createElement("div",{className:"calendarSummary calRow"},Z.createElement(Q.Z,{icon:"task-signal",className:"Font18 calIcon"}),Z.createElement("div",{className:"calLine"},Z.createElement("div",{className:"summaryBox"},Z.createElement(x.Z,{minHeight:18,maxHeight:150,placeholder:ut?_l("\u6DFB\u52A0\u6458\u8981"):_l("\u672A\u586B\u5199\u6458\u8981"),onChange:this.changeText,value:this.props.description}),xt&&xt.length?Z.createElement("div",{className:"attachmentBox",ref:function(kt){Ze.attachmentBox=kt}}):null)))}}]),qe}(Z.Component);function Me(ft){var qe=ft.isPrivate,nt=ft.createUser,Ze=ft.changePrivacy,et=nt===md.global.Account.accountId;return Z.createElement("div",{className:"Gray_9 calendarPrivate"},Z.createElement(ne.Z,{className:"Font12 InlineBlock",disabled:!et,checked:qe,onClick:Ze},et?Z.createElement("span",null,_l("\u79C1\u5BC6\u65E5\u7A0B (\u4EC5\u6210\u5458\u53EF\u89C1)")):Z.createElement("span",{"data-tip":_l("\u4EC5\u65E5\u7A0B\u7EC4\u7EC7\u8005\u53EF\u4FEE\u6539")},_l("\u79C1\u5BC6\u65E5\u7A0B (\u4EC5\u6210\u5458\u53EF\u89C1)"))),Z.createElement("span",{className:"tip-top mLeft10 privateTip","data-tip":_l("\u65E5\u7A0B\u5185\u5BB9\u9ED8\u8BA4\u516C\u5F00\u7ED9\u6240\u6709\u540C\u4E8B\uFF0C\u52FE\u9009\u79C1\u5BC6\u65E5\u7A0B\uFF0C\u5C06\u4EC5\u5BF9\u53C2\u4E0E\u4EBA\u5458\u516C\u5F00\u3002")},Z.createElement("i",{className:"icon-help Font16 tip-top"})))}Me.propTypes={isPrivate:f().bool,createUser:f().shape({accountId:f().string}),changePrivacy:f().func};const Fe=Me;var Be=Ee,we=Se,Ie=me,ge=Ae,Re=Ne,Pe=Fe,ke=function(ft){(0,o.default)(qe,ft);function qe(nt){return(0,y.default)(this,qe),(0,r.default)(this,(qe.__proto__||R()(qe)).call(this,nt))}return(0,a.default)(qe,[{key:"render",value:function(){var Ze=this.props,et=Ze.calendar,ut=Ze.change,xt=Ze.addCalendarMember,wt=Ze.changePrivacy,kt=Ze.callback,Rt=et.id,jt=et.canLook,fn=et.members,Mt=et.thirdUser,sn=et.createUser,on=et.description,en=et.attachments,$t=et.remindTime,an=et.remindType,tn=et.address,mt=et.isPrivate,Lt=et.editable,zt=et.voiceRemind,Zt=et.recurTime,Nt=et.isRecur,ct=et.isChildCalendar,De={members:fn,thirdUser:Mt,createUser:sn,editable:Lt,addCalendarMember:xt,callback:kt,argProps:{calendarId:Rt,recurTime:Zt,isRecur:Nt,isChildCalendar:ct}},_e={description:on,calendarId:Rt,change:ut,editable:Lt,attachments:en},Le={isPrivate:mt,createUser:sn,changePrivacy:wt};return Z.createElement("div",{className:"calendarMainPart"},Z.createElement("div",{className:"calBox mBottom10"},Z.createElement(Be,this.props),Z.createElement(we,{editable:Lt,id:Rt,remindTime:$t,remindType:an,voiceRemind:zt,change:ut}),Z.createElement(Ie,{editable:Lt,address:tn,canLook:jt,change:ut})),Z.createElement("div",{className:"calBox mBottom10"},Z.createElement(ge,De),Z.createElement(Re,_e)),Z.createElement(Pe,Le))}}]),qe}(Z.Component),We=t(42723),Ve=t(14761),it=t(62231),Ge=function(ft){(0,o.default)(qe,ft);function qe(nt){(0,y.default)(this,qe);var Ze=(0,r.default)(this,(qe.__proto__||R()(qe)).call(this,nt));return Ze.state={isOnlyMe:!1},Ze.updatePageIndex=Ze.updatePageIndex.bind(Ze),Ze}return(0,a.default)(qe,[{key:"updatePageIndex",value:function(){if(this.commentList){var Ze;(Ze=this.commentList).updatePageIndex.apply(Ze,arguments)}}},{key:"handleFocusClick",value:function(Ze){this.setState({isOnlyMe:!Ze})}},{key:"render",value:function(){var Ze=this,et=this.props,ut=et.calendar,xt=ut.title,wt=ut.id,kt=ut.recurTime,Rt=ut.discussions,jt=et.change,fn=this.state.isOnlyMe,Mt=kt?D()(kt).format("YYYYMMDDHHmmss"):"",sn={sourceId:wt,sourceType:Ve.Z.TYPES.CALENDAR,appId:md.global.APPInfo.calendarAppID,remark:(kt?wt+"_"+Mt:wt)+"|"+(0,N.Qu)(xt)+"|"+_l("\u65E5\u7A0B"),storageId:wt,autoFocus:!0,onSubmit:function(en){jt({discussions:(en?[en]:[]).concat(Rt)})}};return Z.createElement("div",{className:"pBottom10"},Z.createElement(ne.Z,{className:"mBottom8 pTop5 mTop5",checked:fn,onClick:function(en){Ze.handleFocusClick.bind(Ze)(en)}},Z.createElement("span",{className:"Gray_9"},_l("\u53EA\u663E\u793A\u4E0E\u6211\u76F8\u5173"))),Z.createElement(it.Z,{sourceId:wt,sourceType:it.Z.TYPES.CALENDAR,isFocus:fn,commentList:Rt,updateCommentList:function(en){jt({discussions:en})},removeComment:function(en){jt({discussions:w().filter(Rt,function($t){var an=$t.discussionId;return an!==en})})},manualRef:function(en){Ze.commentList=en}},Z.createElement(Ve.Z,sn)))}}]),qe}(Z.Component),pt=t(52404),ot=function(ft){(0,o.default)(qe,ft);function qe(nt){(0,y.default)(this,qe);var Ze=(0,r.default)(this,(qe.__proto__||R()(qe)).call(this,nt));return Ze.listRef=function(et){Ze.props.listRef(et),Ze.commentList=et},Ze.state={activeTab:"topic"},Ze}return(0,a.default)(qe,[{key:"componentDidMount",value:function(){var Ze=$(this.tab),et=Ze.find(".bottomLine");Ze.find("li").hover(function(){et.css("left",$(this).index()*90+25)},function(){et.css("left",Ze.find("li.active").index()*90+25)})}},{key:"render",value:function(){var Ze=this.props,et=Ze.listRef,ut=(0,We.Z)(Ze,["listRef"]),xt=this.props.calendar,wt=xt.id,kt=xt.recurTime,Rt=kt?wt+"|"+kt:wt,jt=pt.Z.TYPES.CALENDAR,fn={sourceId:Rt,sourceType:jt,appId:md.global.APPInfo.calendarAppID};return Z.createElement("div",{className:"calendarComments"},this.renderTabList(),Z.createElement("div",{className:"commentsContainer"},this.state.activeTab==="topic"?Z.createElement(Ge,(0,H.default)({},ut,{ref:this.listRef})):Z.createElement(pt.Z,fn)))}},{key:"handleTabClick",value:function(Ze){Ze.id==="topic"&&this.state.activeTab==="topic"&&this.commentList.updatePageIndex(!0),this.setState({activeTab:Ze.id})}},{key:"renderTabList",value:function(){var Ze=this,et=this.state.activeTab,ut=[{id:"topic",value:_l("\u8BC4\u8BBA")},{id:"file",value:_l("\u6587\u4EF6")}];return Z.createElement("ul",{className:"calendarTabList clearfix",ref:function(wt){Ze.tab=wt}},ut.map(function(xt){return Z.createElement("li",{key:xt.id,onClick:Ze.handleTabClick.bind(Ze,xt),className:C()("calendarTab",{"ThemeColor3 active":xt.id===et})},xt.value)}),Z.createElement("i",{className:"bottomLine ThemeBGColor3"}))}}]),qe}(Z.Component),vt=function(ft){(0,o.default)(qe,ft);function qe(nt){(0,y.default)(this,qe);var Ze=(0,r.default)(this,(qe.__proto__||R()(qe)).call(this,nt));return Ze.state={showCount:!0},Ze}return(0,a.default)(qe,[{key:"render",value:function(){var Ze=this,et=this.props,ut=et.calendar,xt=ut.id,wt=ut.title,kt=ut.discussions,Rt=ut.recurTime,jt=et.change,fn=et.scrollToListTop,Mt=Rt?D()(Rt).format("YYYYMMDDHHmmss"):"",sn={sourceId:xt,sourceType:Ve.Z.TYPES.CALENDAR,appId:md.global.APPInfo.calendarAppID,remark:(Rt?xt+"_"+Mt:xt)+"|"+(0,N.Qu)(wt)+"|"+_l("\u65E5\u7A0B"),mentionsOptions:{position:"top"},selectGroupOptions:{position:"top"},storageId:xt,onSubmit:function(en){fn(),jt({discussions:[en].concat(kt)})},onFocusStateChange:function(en){Ze.setState({showCount:!en})}};return Z.createElement("div",{className:"calendarCommenter clearfix"},Z.createElement("div",{className:"Left"},Z.createElement("img",{className:"circle userAvatar",src:md.global.Account.avatar})),this.state.showCount?Z.createElement("div",{className:"Right TxtCenter",style:{width:"40px"},onClick:function(){}},Z.createElement("span",{className:"calendarTopicCount ThemeHoverColor3"},Z.createElement(Q.Z,{icon:"ic_textsms_black",className:"Font20 TxtMiddle Hand"}))):null,Z.createElement("div",{className:C()("commenterBox",{mRight0:!this.state.showCount})},Z.createElement(Ve.Z,sn)))}}]),qe}(Z.Component),At=t(25273),yt,st,St=function(qe,nt){return qe.isRecur!==nt.isRecur||qe.frequency!==nt.frequency||nt.frequency!==n.BU.NONE&&qe.interval!==nt.interval||nt.frequency===n.BU.WEEK&&qe.weekDay!==nt.weekDay||qe.recurType!==nt.recurType||qe.recurType===void 0&&nt.recurType===n.vT.NONE||nt.recurType===n.vT.COUNT&&qe.recurCount!==nt.recurCount?!0:nt.recurType===n.vT.DATE&&qe.untilDate!==nt.untilDate},Qe=function(qe,nt){return qe.remindType!==nt.remindType||qe.remindType!==nt.remindType?!0:qe.remindTime!==nt.remindTime},Xe=function(qe,nt){if(!j.W4(nt).showEdit)return!1;var Ze=St(qe,nt);if(Ze)return!0;var et=["title","address","start","end","allDay","description"],ut=w()(qe).pick(et),xt=w()(nt).pick(et);return!w()(ut).isEqual(xt)},$e=(st=yt=function(ft){(0,o.default)(qe,ft);function qe(nt){(0,y.default)(this,qe);var Ze=(0,r.default)(this,(qe.__proto__||R()(qe)).call(this,nt)),et=Ze.props.data,ut=et.calendar,xt=et.keyStatus,wt=et.token,kt=et.thirdUser;return Ze.omitKeys=["keyStatus","token","isShowUpdateBar"],Ze.EVENT_KEY=+new Date,Ze.state=(0,H.default)({},ut,{originStartTime:ut.start,originEndTime:ut.end,originRecur:ut.isRecur,thirdUser:kt,keyStatus:xt,token:wt,discussions:[],topicCount:0,isShowUpdateBar:!1,isRecurChange:!1}),Ze}return(0,a.default)(qe,[{key:"componentWillReceiveProps",value:function(Ze){var et=Ze.data,ut=et.calendar,xt=et.keyStatus,wt=et.token,kt=et.thirdUser;this.setState((0,H.default)({},ut,{keyStatus:xt,token:wt,thirdUser:kt}))}},{key:"changeDialogHeight",value:function(){ze.isDetailPage||$(this.calendarDetail).css({height:$(window).height()-64}),ze.dialogCenter&&ze.dialogCenter()}},{key:"scrollToListTop",value:function(){if(this.scrollView&&this.scrollView.nanoScroller&&this.commentList){var Ze=$(this.scrollView.nanoScroller),et=Ze.find(".nano-content"),ut=Ze.find(".calendarComments");(et.get(0).scrollTop>ut.get(0).offsetTop||et.get(0).scrollTop+et.height()<ut.get(0).offsetTop)&&$(this.scrollView.nanoScroller).nanoScroller({scrollTo:ut})}}},{key:"componentDidMount",value:function(){this.changeDialogHeight(),ze.isDetailPage&&(this.throttled=w().throttle(this.changeDialogHeight.bind(this),100),$(window).on("resize."+this.EVENT_KEY,this.throttled))}},{key:"componentWillUnmount",value:function(){ze.isDetailPage&&($(window).off("resize."+this.EVENT_KEY),this.throttled&&this.throttled.cancel())}},{key:"mapNewState",value:function(Ze){var et=this.state,ut=g()({},et,Ze),xt=this.props.data.calendar;if(et.start!==ut.start||et.end!==ut.end){var wt=ut.start,kt=ut.end,Rt=D()(wt),jt=D()(kt),fn=D()(et.start),Mt=fn.isSame(Rt,"minute")?1:0;Mt===0&&!Rt.isSameOrBefore(jt,"minute")?Ze.end=Rt.add(1,"hour").format("YYYY-MM-DD HH:mm"):Mt===1&&jt.isSame(Rt,"day")&&jt.isSameOrBefore(Rt,"minute")&&(Ze.end=Rt.add(1,"day").format("YYYY-MM-DD HH:mm"))}if(ut.frequency!==n.BU.NONE&&(ut.interval||(Ze.interval=1),typeof ut.recurType>"u"&&(Ze.recurType=n.vT.NONE),ut.frequency===n.BU.WEEK&&!ut.weekDay)){var sn=D()(ut.start).get("day"),on=ut.weekDay?ut.weekDay.split(","):[];on.push(""+sn),Ze.weekDay=w().uniqBy(on).sort(function(en,$t){return en-$t}).join(",")}ut.recurType!==n.vT.NONE?(ut.recurType===n.vT.DATE&&(ut.untilDate==="0"||D()(ut.end).isAfter(D()(ut.untilDate),"day"))&&(Ze.untilDate=D()(ut.end).add(1,"d").format("YYYY-MM-DD")),ut.recurType===n.vT.COUNT&&!ut.recurCount&&(Ze.recurCount=1)):(Ze.untilDate="0",Ze.recurCount=0),this.setState((0,H.default)({},Ze,{isRecurChange:St(xt,ut),isShowUpdateBar:Xe(xt,ut),isRemindChange:Qe(xt,ut)}))}},{key:"renderActionBar",value:function(){var Ze=this,et=j.W4(this.state),ut=et.showConfirm,xt=et.showRefuse,wt=ut||this.state.isShowUpdateBar,kt=ut?"confirm":xt?"refused":"update",Rt=function(){j.mg(w().omit(Ze.state,Ze.omitKeys),!0,{originStartTime:Ze.state.originStartTime,originEndTime:Ze.state.originEndTime}).then(function(en){var $t=en.isAllCalendar,an=en.oldStartTime,tn=en.oldEndTime,mt=en.reInvite;Ze.setState({isShowUpdateBar:!1,isRecurChange:!1,isChildCalendar:!$t,originStartTime:an,originEndTime:tn,oldStartTime:an,oldEndTime:tn,originRecur:Ze.state.isRecur}),mt&&Ze.setState({members:w().each(Ze.state.members,function(Lt){Lt.accountID!==md.global.Account.accountId&&(Lt.remark="",Lt.status=n.AM.UNCONFIRMED)})})})},jt=function(){Ze.setState({isShowUpdateBar:!1,isRecurChange:!1}),Ze.props.reFetchData(!1)},fn=function(){var en=Ze.state,$t=en.id,an=en.recurTime,tn=en.catID;k.inviteCalendar.confirm($t,an,tn)},Mt=function(){var en=Ze.state,$t=en.id,an=en.recurTime,tn=en.catID;k.inviteCalendar.refuse($t,an,tn)},sn={type:kt,save:Rt,cancel:jt,confirm:fn,refuse:Mt};return wt?Z.createElement(z,(0,H.default)({},sn,{key:"action-bar"})):null}},{key:"renderHeader",value:function(){var Ze=this,et=function(mt){var Lt=mt.replace(/\n/g,"");if(Lt==="")return alert(_l("\u6807\u9898\u4E0D\u53EF\u4E3A\u7A7A"),2);Ze.mapNewState({title:Lt})},ut=function(mt){var Lt=Ze.state,zt=Lt.id,Zt=Lt.catID;Zt!==mt.catID&&j.cg({id:zt,catID:mt.catID},function(){Ze.mapNewState({catID:mt.catID,catName:mt.catName,color:mt.color}),$.isFunction(ze.saveCallback)&&ze.saveCallback()})},xt=function(){var mt=Ze.state,Lt=mt.id,zt=mt.recurTime;window.open("/apps/calendar/detail_"+Lt+(zt?"_"+D()(zt).format("YYYYMMDDHHmmss"):"")+"?"+(0,N.tQ)())},wt=function(){var mt=Ze.state,Lt=mt.id,zt=mt.recurTime;window.open((0,N.Z6)(md.global.Config.AjaxApiUrl+"download/exportCalendarByCalendarId?op=OutputFile&calendarID="+Lt+"&RecurTime="+zt))},kt=function(){var mt=Ze.state.members;mt&&mt.length>1?K(Ze.state):alert(_l("\u8BF7\u5148\u6DFB\u52A0\u6210\u5458"),3)},Rt=function(){var mt=Ze.state,Lt=mt.createUser,zt=mt.id,Zt=mt.title,Nt=mt.start,ct=mt.end,De=mt.recurTime,_e=mt.address,Le=mt.keyStatus,rt=mt.token;j.hK({createUser:Lt,keyStatus:Le,token:rt,id:zt,title:Zt,start:Nt,end:ct,recurTime:De,address:_e},function(){for(var Ct=arguments.length,dt=Array(Ct),It=0;It<Ct;It++)dt[It]=arguments[It];var bt=dt[0],Ut=dt[1];Ze.setState({keyStatus:bt,token:Ut})})},jt=function(){var mt=Ze.state,Lt=mt.id,zt=mt.recurTime,Zt=mt.originRecur,Nt=mt.isChildCalendar;j.Ah(md.global.Account.accountId,{id:Lt,recurTime:zt,originRecur:Zt,isChildCalendar:Nt})},fn=function(){var mt=Ze.state,Lt=mt.id,zt=mt.recurTime,Zt=mt.originRecur,Nt=mt.isChildCalendar;j.q4({id:Lt,recurTime:zt,originRecur:Zt,isChildCalendar:Nt})},Mt=function(){var mt=Ze.state,Lt=mt.id,zt=mt.recurTime,Zt=mt.title,Nt=mt.members,ct=mt.description,De=[];Nt.forEach(function(_e){_e.status===1&&De.push({accountId:_e.accountID,fullname:_e.memberName,avatar:_e.head})}),$.CreateTask({CalenderID:Lt,recurTime:zt,TaskName:Zt,MemberArray:De,Description:ct})},sn=this.state,on=sn.title,en=sn.color,$t=sn.canLook,an={auth:j.W4(this.state),title:on,color:en,canLook:$t,changeTitle:et,changeCategory:ut,openDetailPage:xt,joinOutLook:wt,postMessage:kt,shareCalendar:Rt,exitCalendar:jt,deleteCalendar:fn,createTask:Mt};return Z.createElement(P,an,this.renderActionBar())}},{key:"renderMain",value:function(){var Ze=this,et=function(){var Mt=Ze.state,sn=Mt.id,on=Mt.originRecur,en=Mt.isChildCalendar,$t=Mt.recurTime,an=Mt.members,tn=function(Lt){var zt=Lt.source,Zt=Lt.isAllCalendar,Nt=zt.data.successMember;Ze.setState({members:an.concat(Nt||[]),isChildCalendar:!Zt})};(0,s.Z)({sourceId:on&&en?sn+"|"+$t:sn,fromType:5,SelectUserSettings:{filterAccountIds:an.map(function(mt){return mt.accountID}),callback:function(Lt){j.fZ({members:an,users:Lt},{recurTime:$t,originRecur:on,id:sn,isChildCalendar:en}).then(tn)}}})},ut=function(Mt){var sn=Ze.state,on=sn.members,en=sn.id,$t=sn.recurTime,an=sn.isChildCalendar,tn=sn.originRecur,mt={id:en,recurTime:$t,isChildCalendar:an,originRecur:tn};j.Ah(Mt,mt).then(function(Lt){var zt=Lt.isAllCalendar;w().remove(on,function(Zt){return Zt.accountID===Mt}),Ze.setState({members:on,isChildCalendar:!zt}),$.isFunction(ze.saveCallback)&&ze.saveCallback()})},xt=function(Mt){var sn=Ze.state,on=sn.thirdUser,en=sn.id,$t=sn.recurTime,an=sn.isChildCalendar,tn=sn.originRecur,mt={id:en,recurTime:$t,isChildCalendar:an,originRecur:tn};j.QX(Mt,mt).then(function(Lt){var zt=Lt.isAllCalendar;w().remove(on,function(Zt){return Zt.thirdID===Mt}),Ze.setState({thirdUser:on,isChildCalendar:!zt}),$.isFunction(ze.saveCallback)&&ze.saveCallback()})},wt=function(Mt){var sn=Ze.state,on=sn.members,en=sn.id,$t=sn.recurTime,an=sn.isChildCalendar,tn=sn.originRecur,mt={id:en,recurTime:$t,isChildCalendar:an,originRecur:tn};j.BY(Mt,mt).then(function(Lt){var zt=Lt.isAllCalendar;w().some(on,function(Zt){return Zt.accountID===Mt?(Zt.status=n.AM.UNCONFIRMED,Zt.remark="",!0):!1}),Ze.setState({members:on,isChildCalendar:!zt}),$.isFunction(ze.saveCallback)&&ze.saveCallback()})},kt=function(){var Mt=Ze.state,sn=Mt.isPrivate,on=Mt.id;j.Hn(on,!sn).then(function(){Ze.setState({isPrivate:!sn})})},Rt=function(Mt){var sn=Mt.remindType,on=Mt.remindTime,en=Ze.state.id;j.mf({id:en,remindType:sn,remindTime:on})},jt={calendar:this.state,change:this.mapNewState.bind(this),addCalendarMember:et,changePrivacy:kt,changeRemind:Rt,callback:{removeMember:ut,removeWxMember:xt,reInvite:wt}};return Z.createElement(ke,jt)}},{key:"renderComments",value:function(){var Ze=this;if(!this.state.canLook)return null;var et={calendar:this.state,listRef:function(xt){Ze.commentList=xt},change:function(xt){Ze.setState(xt)}};return Z.createElement(ot,et)}},{key:"renderCommenter",value:function(){var Ze=this;if(!this.state.canLook)return null;var et={calendar:this.state,scrollToListTop:this.scrollToListTop.bind(this),change:function(xt){Ze.setState(xt)}};return Z.createElement(vt,et)}},{key:"render",value:function(){var Ze=this;return Z.createElement("div",{className:C()("calendarDetail",{noPadding:!this.state.canLook}),ref:function(ut){Ze.calendarDetail=ut}},this.renderHeader(),Z.createElement("div",{className:"calendarMainContent Relative"},Z.createElement(At.Z,{className:"Absolute",updateEvent:this.handleScroll.bind(this),preserveScrollTop:!0,ref:function(ut){Ze.scrollView=ut}},this.renderMain(),this.renderComments())),this.renderCommenter())}},{key:"handleScroll",value:function(Ze,et){var ut=et.direction,xt=et.maximum,wt=et.position;if(ut==="down"&&xt-wt<20&&this.commentList){var kt=this.commentList.updatePageIndex;kt()}}}]),qe}(Z.Component),yt.propTypes={data:f().object},st),Ke=t(44036),Ue=t(49611),He=t.n(Ue),ze={},gt=function(ft){(0,o.default)(qe,ft);function qe(nt){(0,y.default)(this,qe);var Ze=(0,r.default)(this,(qe.__proto__||R()(qe)).call(this,nt));return Ze.dialogRef=Z.createRef(),Ze.state={isLoading:!0,noAuth:!1,data:null},Ze}return(0,a.default)(qe,[{key:"componentWillMount",value:function(){this.fetchData(!0)}},{key:"componentWillReceiveProps",value:function(Ze){(Ze.calendarId!==this.props.calendarId||Ze.recurTime!==this.props.recurTime)&&this.fetchData(!0,Ze)}},{key:"componentDidMount",value:function(){var Ze=ze,et=Ze.exitCallback,ut=Ze.saveCallback,xt=Ze.deleteCallback,wt=$(".calendarEdit")[0];wt&&(ze.dialogCenter=function(){},ze.exitCallback=function(){$(".calendarEdit").parent().remove(),et()},ze.deleteCallback=function(){$(".calendarEdit").parent().remove(),xt()},ze.saveCallback=function(){$.isFunction(ut)&&ut()},ze.cancelCallback=ze.closeDialog=function(){$(".calendarEdit").parent().remove()})}},{key:"fetchData",value:function(Ze,et){var ut=this,xt=et||this.props,wt=xt.calendarId,kt=xt.recurTime;Ze&&this.setState({isLoading:!0,noAuth:!1}),(0,j.Pe)(wt,kt).then(function(Rt){var jt=Rt.data;jt.calendar.title=(0,N.Qu)(jt.calendar.title),ut.setState({isLoading:!1,data:jt})}).catch(function(){ut.setState({isLoading:!1,noAuth:!0})})}},{key:"renderContent",value:function(){var Ze=this.state,et=Ze.isLoading,ut=Ze.data,xt=Ze.noAuth;return et?Z.createElement(L.Z,{className:"pTop30 pBottom30"}):xt?Z.createElement(Ke.Z,{text:_l("\u60A8\u7684\u6743\u9650\u4E0D\u8DB3\u6216\u6B64\u65E5\u7A0B\u5DF2\u88AB\u5220\u9664\uFF0C\u65E0\u6CD5\u67E5\u770B"),className:"h100 pTop30 pBottom30"}):Z.createElement($e,{data:ut,reFetchData:this.fetchData.bind(this)})}},{key:"render",value:function(){var Ze=this,et=this.state.data,ut=_l("\u65E5\u7A0B\u8BE6\u60C5");return et&&(ut=et.calendar.title),ze.isDetailPage?Z.createElement(He(),{title:ut},this.renderContent()):Z.createElement(p.Z,{visible:!0,dialogClasses:"calendarEdit",width:570,showFooter:!1,closable:!1,overlayClosable:!0,handleClose:function(){Ze.props.handleClose&&Ze.props.handleClose(),$(".calendarEdit").parent().remove()},ref:this.dialogRef,type:"fixed"},this.renderContent())}}]),qe}(Z.Component);function Et(ft){var qe={container:"",isDetailPage:!1,calendarId:"",recurTime:"",exitCallback:null,deleteCallback:null,saveCallback:null};if(ze=g()(ze,qe,ft),ze.isDetailPage&&ze.container)ze=g()({},ze,(0,j.FW)()),ze.exitCallback=ze.deleteCallback=function(){window.location.href="/apps/calendar/home?"+(0,N.tQ)()};else{var nt=ze,Ze=nt.saveCallback;ze.exitCallback=function(){location.href.indexOf("/apps/calendar/home")!==-1?($(".showActiveTitleMessage").remove(),$("#calendar").fullCalendar("refetchEvents"),window.localStorage.getItem==="list"&&$.isFunction(Ze)&&Ze()):$.isFunction(Ze)&&Ze()},ze.deleteCallback=function(){location.href.indexOf("/apps/calendar/home")!==-1?($(".showActiveTitleMessage").remove(),$("#calendar").fullCalendar("refetchEvents"),window.localStorage.getItem==="list"&&$.isFunction(Ze)&&Ze()):$.isFunction(Ze)&&Ze()}}var et=ze,ut=et.isDetailPage,xt=et.container,wt=et.calendarId,kt=et.recurTime,Rt=et.handleClose;d.render(Z.createElement(gt,{calendarId:wt,recurTime:kt,handleClose:Rt}),ut?xt:document.createElement("div"))}},83080:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>y});var ce=t(69288),g=t(51598),p=t.n(g),L=t(38197),te=t.n(L),R=t(67294);function y(a,r){var o="calendarReInviteDialog";ce.Z.confirm({dialogClasses:o,width:458,title:_l("\u63D0\u793A"),noFooter:!0,children:R.createElement("div",{dangerouslySetInnerHTML:{__html:te().template(p())()}}),handleClose:r});var d=$("."+o);d.on("click",".Button",function(Z){var H=$(this).data("type");$(".calendarReInviteDialog").parent().remove(),H==="save"?a(!1,!0):H==="saveAndInvite"&&a(!0,!0),Z.stopPropagation()})}},59061:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>y});var ce=t(29985),g=t.n(ce),p=t(38197),L=t.n(p),te=t(69288),R=t(67294);function y(a,r){var o=a.operatorTitle,d=a.recurTitle,Z=a.recurCalendarUpdateFun,H=r.isChildCalendar,U=r.isRecurChange,f=r.originRecur,V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},C=V.directRun,O=V.isEdit,n=V.callback,s,j=location.href.substr(location.href.lastIndexOf("/")),A=j.substr(j.indexOf("_")+1).split("_");f&&j.indexOf("detail")>0&&A.length<2&&(s=!0),f&&!H&&!s?(te.Z.confirm({dialogClasses:"repeatCalendarOperator",width:410,title:d,children:R.createElement("div",{dangerouslySetInnerHTML:{__html:L().template(g())({isRecurChange:U,isEdit:O})}}),noFooter:!0,handleClose:function(){$.isFunction(n)&&n(),$(".repeatCalendarOperator").parent().remove()}}),$("#btnOperatorAlone:not(.disabled)").click(function(S){$(".repeatCalendarOperator").parent().remove(),Z(!1),S.stopPropagation()}),$("#btnOperatorAll").click(function(S){$(".repeatCalendarOperator").parent().remove(),Z(!0),S.stopPropagation()})):C?Z(!H):te.Z.confirm({dialogClasses:"repeatCalendarOperator",width:420,title:o,children:R.createElement("div",null),onOk:function(){Z(!H)},handleClose:function(){$.isFunction(n)&&n(),$(".repeatCalendarOperator").parent().remove()}})}},25265:(lt,Te,t)=>{"use strict";t.d(Te,{AS:()=>I,DL:()=>se,ED:()=>z,Gv:()=>F,Ij:()=>M,Ip:()=>N,Lg:()=>j,O1:()=>u,Pr:()=>C,QI:()=>Se,UE:()=>U,Wu:()=>O,Xu:()=>T,Yo:()=>S,ZE:()=>ee,_x:()=>pe,aq:()=>h,bi:()=>ue,es:()=>s,f8:()=>D,gz:()=>ae,hA:()=>ne,hS:()=>q,ii:()=>b,jS:()=>G,mv:()=>c,y1:()=>A});var ce=t(88106),g=t(88239),p=t(52945),L=t.n(p),te=t(48645),R=t(30429),y=t(69277),a=t(35356),r=t(15577),o=t(96486),d=t.n(o),Z=function(J){return{type:"SET_SESSION_LIST",result:R.oY(R.C5(J))}},H=function(J){return{type:"ADD_SESSION_LIST",result:utils.sortSession(utils.formatSessionList(J))}},U=function(J){return function(me,be){var xe=be().chat,Ae=xe.sessionList,Ne=xe.currentSessionList,Me=d().cloneDeep(Ae),Fe=J.id,Be=[];if(Me.forEach(function(ge){if(ge.value===Fe){if("sendMsg"in J&&(ge.sendMsg=J.sendMsg?J.sendMsg:null,J.sendMsg&&Be.push(ge)),"count"in J&&(ge.count="weak"in J?ge.count:(ge.count||0)+J.count,ge.time=R.nr((0,r.LX)(J.time||R.Xn())),ge.msg.con=J.msg,ge.id=J.msgId,ge.isPush=J.isPush,Be.push(ge),"weak"in J&&(J.weak?(ge.weak_count=J.count,ge.isPush=!!ge.count):(ge.count=ge.count+J.count,ge.isPush=!0))),"clearCount"in J&&(ge.count=0,ge.messageCount=J.clearCount,"weak_count"in ge&&(ge.weak_count=0)),"messageCount"in J&&(ge.messageCount=0,ge.messageAtlist=[]),"addMsg"in J){ge.time=R.nr((0,r.LX)(J.time||R.Xn())),ge.msg.con=J.addMsg,Be.push(ge),delete ge.isSession;var Re=!1,Pe=Ne.map(function(ke){return ke.id===ge.value&&"isSession"in ke&&(Re=!0,ke.isTop=!1,delete ke.isSession),ke});Re&&me({type:"UPDATE_CURRENT_SESSION",result:Pe})}"atlist"in J&&(ge.atlist=J.atlist,J.atlist.length?ge.messageAtlist=J.atlist:J.isWithdraw&&(ge.messageAtlist=[]),J.at_msg&&(ge.at_msg=J.at_msg)),"refer"in J&&(ge.refer=J.refer),"reflist"in J&&(ge.reflist=J.reflist),"isTop"in J&&(ge.top_info={isTop:J.isTop,time:J.time},Be.push(ge)),"isContact"in J&&(ge.isContact=J.isContact),"showBadge"in J&&(ge.showBadge=J.showBadge)}}),Be.length){var we=Be[0].value,Ie=Me.filter(function(ge){return we!==ge.value});me({type:"SET_SESSION_LIST",result:R.oY(Be.concat(Ie),we)})}else me({type:"SET_SESSION_LIST",result:Me})}},f=function(J){return{type:"REMOVE_SESSION",id:J}},V=function(J,me){return function(be,xe){var Ae=xe().chat.sessionList;if(me){var Ne=Ae.filter(function(we){return we.value===me})[0],Me=md.global.Account.accountId===J.from,Fe=Me?_l("\u6211"):J.uname,Be={count:0,id:me,msg:Fe+": "+J.msg.con,isPush:J.isPush};if(Ne){be(U(Be));return}}J=R.T6(J),J.id||(J.isSession=!1),be({type:"ADD_SESSION",result:[J]})}},C=function(J){var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return function(xe,Ae){var Ne=Ae().chat.sessionList,Me=Ne.filter(function(Be){return Be.value==J})[0];if(Me)be&&xe(re(J));else if(me.avatar){var Fe=L()({count:0,isGroup:!0,sysType:1},me);xe(V(Fe)),be&&(xe(re(J)),y.r8.recordAction({id:J,type:2}))}else te.my({type:a.Z.SESSIONTYPE_GROUP,value:J}).then(function(Be){var we=L()({isGroup:!0,count:0,to:J,avatar:Be.avatar,groupname:Be.name,msg:{con:""},sysType:1},me);xe(V(we,J)),be&&(xe(re(J)),y.r8.recordAction({id:J,type:2}))})}},O=function(J){var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,xe=arguments[3];return function(Ae,Ne){var Me=Ne().chat.sessionList,Fe=Me.filter(function(we){return we.value==J})[0];if(Fe)be&&Ae(re(J)),xe&&xe();else if(me.logo){var Be=L()({count:0,from:J,msg:{con:""},isGroup:!1},me);Ae(V(Be)),be&&(Ae(re(J)),y.r8.recordAction({id:J,type:1})),xe&&xe()}else te.my({type:a.Z.SESSIONTYPE_USER,value:J}).then(function(we){var Ie=L()({count:0,from:J,logo:we.avatar,uname:we.fullname,msg:{con:""},isGroup:!1,sysType:1,isPush:!0},me);Ae(V(Ie,J)),be&&(Ae(re(J)),y.r8.recordAction({id:J,type:1})),xe&&xe()})}},n=function(J){var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function(be,xe){var Ae=xe().chat.sessionList,Ne=Ae.filter(function(Me){return Me.value==J})[0];Ne||be(V(me)),be(re(J))}},s=function(J){return function(me,be){var xe=be().chat.sessionList,Ae=J.contact,Ne=J.isclose,Me=J.isopen,Fe=xe.filter(function(we){return we.value===Ae.id})[0];if("showBadge"in Ae&&(Fe.showBadge=Ae.showBadge),Ne)me(ee({}));else if(Me)if(Fe)me(ee(Fe));else if(Ae.type===1)me(O(Ae.id,{msg:{con:""},sysType:1}));else if(Ae.type===2)me(C(Ae.id));else{var Be=Ae.id;me(n(Be.dtype,Be))}}},j=function(J){return function(me,be){var xe=be().chat.sessionList,Ae=J.isTop,Ne=xe.reduce(function(Me,Fe){var Be=Fe.top_info,we=Be&&Be.isTop?1:0;return Me+we},0);Ne>=10&&Ae?alert(_l("\u7F6E\u9876\u6570\u6700\u591A10\u6761"),3):y.r8.setTop(J)}},A=function(J){return function(me,be){var xe=be().chat,Ae=xe.currentSessionList,Ne=xe.sessionList,Me=xe.currentSession,Fe=Ne.filter(function(Re){return Re.value===J.value})[0],Be=J.top_info?J.top_info.isTop:!1,we=J.top_info?J.top_info.time:"";if(Fe){var Ie=Ae.map(function(Re){return Re.id===J.value&&(Re.isTop=Be,delete Re.isSession),Re});if(me({type:"UPDATE_CURRENT_SESSION",result:Ie}),me(U({id:J.value,isTop:Be,time:we})),J.value===Me.value){var ge=Ne.find(function(Re){return Re.value===J.value});me(ee((0,g.default)({},ge,{top_info:(0,g.default)({},ge.top_info,{isTop:Be})})))}}}},S=function(J){return function(me,be){var xe=J.id,Ae=J.type,Ne=be().chat,Me=Ne.currentSession,Fe=Ne.sessionList,Be=Ae>2?R.Zm(Ae):xe;me(f(Be)),me(le(Be)),me(v(Be)),Be===Me.value&&me(ee({})),R.Fh(Be,Fe)}},I=function(J){return function(me,be){var xe=be().chat.sessionList,Ae=J.id;me(U({id:Ae,clearCount:0})),me(U({id:Ae,atlist:[]})),me(U({id:Ae,reflist:[]})),me(U({id:Ae,refer:null})),R.Fh(Ae,xe)}},c=function(){return function(J,me){var be=me().chat.sessionList,xe=d().cloneDeep(be).map(function(Ae){return Ae.count&&(Ae.count=0),Ae.atlist&&Ae.atlist.length&&(Ae.atlist=[]),Ae.reflist&&Ae.reflist.length&&(Ae.reflist=[]),Ae.refer&&(Ae.refer=null),Ae});R.Fh("",xe),J({type:"UPDATE_SESSION_LIST",result:xe})}},q=function(J){return function(me,be){var xe=be().chat.sessionList,Ae=J.type;me(U({id:Ae,clearCount:0})),R.Fh(Ae,xe)}},b=function(J){return function(me,be){var xe=be().chat.currentSession,Ae=J.id;xe.value===Ae&&me(ee({})),me(le(Ae)),me(f(Ae)),me(v(Ae))}},k=function(J){var me=$(".ChatPanel-wrapper");return J?(me.removeClass("ChatPanel-up"),safeLocalStorageSetItem("chatList_isUp",!0)):(me.addClass("ChatPanel-up"),safeLocalStorageSetItem("chatList_isUp",!1)),{type:"SET_VISIBLE",visible:J}},ee=function(J){return y.r8.setCurrentChat(J),{type:"SET_CURRENT_SESSION",result:J}},re=function(J){var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function(be,xe){var Ae=xe().chat.sessionList,Ne=Ae.filter(function(Me){return Me.value===J})[0];y.r8.setCurrentChat(Ne),be({type:"SET_CURRENT_SESSION",result:L()(Ne,me)})}},ie=function(J){return function(me,be){var xe=be().chat,Ae=xe.currentSessionList,Ne=xe.sessionList;if(J.isGroup="isPost"in J,J.id=J.isGroup?J.groupId:J.accountId,Ae.length>=2){var Me=Ae[0].id;me(le(Me)),me(v(Me))}var Fe=_.filter(Ne,{value:J.id})[0],Be=Fe.top_info?Fe.top_info.isTop:!1;J.isTop=Be,"isSession"in Fe&&(J.isSession=Fe.isSession),me({type:"ADD_CURRENT_SESSION",result:J})}},le=function(J){return{type:"REMOVE_CURRENT_SESSION",id:J}},E=function(J,me){return function(be,xe){var Ae=xe().chat,Ne=Ae.currentSessionList,Me=Ae.sessionList,Fe=Ne.map(function(we){return we.id===J&&(we.name=me),we}),Be=Me.map(function(we){return we.value===J&&(we.name=me),we});be({type:"UPDATE_CURRENT_SESSION",result:Fe}),be({type:"UPDATE_SESSION_LIST",result:Be})}},w=function(J,me){return function(be,xe){var Ae=xe().chat.sessionList,Ne=Ae.map(function(Me){return Me.value===J&&(Me.logo=me),Me});be({type:"UPDATE_SESSION_LIST",result:Ne})}},K=function(J,me){return function(be,xe){var Ae=xe().chat.currentSessionList,Ne=Ae.map(function(Me){return Me.id===J&&(Me.about=me),Me});be({type:"UPDATE_CURRENT_SESSION",result:Ne})}},N=function(J,me){return function(be,xe){var Ae=xe().chat,Ne=Ae.currentSessionList,Me=Ae.sessionList,Fe=Ne.map(function(we){return we.id===J&&(we.isPushNotice=me),we}),Be=Me.map(function(we){return we.value===J&&(we.isPush=me),we});be({type:"UPDATE_CURRENT_SESSION",result:Fe}),be({type:"UPDATE_SESSION_LIST",result:Be})}},F=function(J,me){return function(be,xe){var Ae=xe().chat.currentSessionList,Ne=Ae.map(function(Me){return Me.id===J&&(Me.isForbidInvite=me),Me});be({type:"UPDATE_CURRENT_SESSION",result:Ne})}},h=function(J,me){return function(be,xe){var Ae=xe().chat.currentSessionList,Ne=Ae.map(function(Me){return Me.id===J&&(Me.isAdmin=me),Me});be({type:"UPDATE_CURRENT_SESSION",result:Ne})}},z=function(J,me){return function(be,xe){var Ae=xe().chat,Ne=Ae.currentSessionList,Me=Ae.currentSession,Fe=Me.iconType,Be=Ne.map(function(we){return we.id===J&&(we.groupMemberCount=we.groupMemberCount+me),we});Fe&&(Me.isRender=!1,be({type:"SET_CURRENT_SESSION",result:Me})),be({type:"UPDATE_CURRENT_SESSION",result:Be})}},X=function(J,me){return function(be,xe){var Ae=xe().chat.messages;be({type:Ae[J]?"ADD_PAGE_MESSAGE":"SET_MESSAGE",id:J,result:me})}},B=function(J,me){return{type:"SET_MESSAGE",id:J,result:me}},x=function(J,me){return{type:"ADD_PAGE_MESSAGE",id:J,result:me}},Q=function(J,me){return{type:"PUSH_PAGE_MESSAGE",id:J,result:me}},i=function(J,me){return function(be,xe){var Ae=md.global.Account,Ne={waitingId:J.waitingid,from:Ae.accountId,fromAccount:{email:Ae.email,id:Ae.accountId,logo:Ae.avatar,name:Ae.fullname},msg:{con:J.msg},to:J.togroup||J.touser,type:J.type,time:R.Xn(),iswd:!1,sendMsg:J,isMineMessage:!0};if(J.sysType&&(Ne.sysType=J.sysType),J.refer){var Me=J.referMessage;Ne.refer={msg:Me.msg.con,type:Me.type,user:{full_name:Me.fromAccount.name}}}J.type===a.Z.MSGTYPE_CARD?Ne.card=J.card:J.type===a.Z.MSGTYPE_PIC?(J.file.url=window.config.FilePath+J.file.key,Ne.msg.files=J.file,Ne.isPrepare=J.isPrepare||!1):(J.type===a.Z.MSGTYPE_FILE||J.type===a.Z.MSGTYPE_APP_VIDEO)&&(Ne.msg.files=J.file,Ne.isPrepare=J.isPrepare||!1);var Fe=J.togroup||J.touser;d().isEmpty(Fe)||be(me?{type:"ADD_MESSAGE",id:Fe,result:R.wv(Ne,me)}:{type:"SET_MESSAGE",id:Fe,result:[R.wv(Ne,me)]})}},m=function(J,me){return{type:"REMOVE_MESSAGE",id:J,messageId:me}},v=function(J){return{type:"REMOVE_MESSAGES",id:J}},W=function(J){return function(me,be){var xe=be().chat.messages,Ae=J.to,Ne=J.waitingid,Me=J.socket,Fe=xe[Ae]||[],Be=Fe.filter(function(we){return we}).map(function(we,Ie){if(we.waitingId===Ne){if(we.id=J.id,Me&&Me.time&&(we.timestamp=createTimeSpan(dateConvertToUserZone(Me.time))),we.refer){var ge=J.referMessage;we.refer={msgid:ge.id,msg:ge.msg.con,msgdetail:Me.refer.msgdetail,type:ge.type,time:ge.time,iswd:ge.iswd,user:{account_id:ge.fromAccount.id,full_name:ge.fromAccount.name,avatar:ge.fromAccount.logo}}}"isContact"in J&&(we.sysType=Constant.MSGTYPE_SYSTEM_ERROR,we.msg={con:""},we.isContact=!1),Me&&Me.msg.files&&(we.msg.files.url=Me.msg.files.url)}return we});me({type:"SET_MESSAGE",id:Ae,result:Be})}},P=function(J,me){return function(be,xe){var Ae=xe().chat.messages,Ne=J.id,Me=Ae[me],Fe=Me.map(function(Be,we){return Be.id===Ne?J:Be});be({type:"SET_MESSAGE",id:me,result:Fe})}},u=function(J,me){return function(be,xe){var Ae=xe().chat,Ne=Ae.messages,Me=Ae.referMessage,Fe=Ae.bottomUnreadMessage,Be=me.id,we=me.msg,Ie=Ne[J],ge=Fe[J]||[];Ie&&(Ie.forEach(function(Re,Pe){if(Re.id==Be){var ke=Ie[Pe+1];Re.iswd=!0,Re.msg.con=we.con,ke&&(ke.isDuplicated=!1)}Re.refer&&Re.refer.msgid==Be&&(Re.refer.iswd=!0)}),ge.forEach(function(Re,Pe){if(Re.id==Be){var ke=ge[Pe+1];Re.iswd=!0,Re.msg.con=we.con,ke&&(ke.isDuplicated=!1)}Re.refer&&Re.refer.msgid==Be&&(Re.refer.iswd=!0)}),Me[J]&&Me[J].id==Be&&be(fe(J)),be({type:"UPDATE_BOTTOM_UNREAD_MESSAGE",id:J,message:ge}),be({type:"SET_MESSAGE",id:J,result:Ie}))}},l=function(J,me){return function(be,xe){var Ae=xe().chat.messages,Ne=Ae[J],Me=d().findIndex(Ne,{id:me.id})!==-1;if(Ne&&!Me){me=R.di(me,Ne[Ne.length-1]);var Fe="groupname"in me,Be=Fe||me.isMine?me.to:me.from,we=$("#ChatPanel-"+Be).data("isBottom"),Ie=we==null?!0:we;if(!me.isMine&&!Ie){be(Ce(Be,me));return}else setTimeout(function(){R.aL(me.to,!0)},100);be({type:"ADD_MESSAGE",id:J,result:me})}}},T=function(J){return function(me,be){var xe=be().chat,Ae=xe.currentSession,Ne=xe.sessionList,Me=[0,1].includes(J.type)?J.type+1:0;switch(J.dtype){case 0:J.id="post",J.type=a.Z.SESSIONTYPE_POST;break;case 1:J.id="system",J.type=a.Z.SESSIONTYPE_SYSTEM;break;case 2:J.id="calendar",J.type=a.Z.SESSIONTYPE_CALENDAR;break;case 3:J.id="task",J.type=a.Z.SESSIONTYPE_TASK;break;case 4:J.id="knowledge",J.type=a.Z.SESSIONTYPE_KNOWLEDGE;break;case 5:J.id="hr",J.type=a.Z.SESSIONTYPE_HR;break;case 6:J.id="worksheet",J.type=a.Z.SESSIONTYPE_WORKSHEET;break;case 7:J.id="workflow",J.type=a.Z.SESSIONTYPE_WORKFLOW;break;default:break}J.name&&J.type!==a.Z.SESSIONTYPE_WORKSHEET&&(J.msg=J.name+": "+J.msg);var Fe=Ne.filter(function(Be){return Be.value===J.id});Fe.length?me(U({id:J.id,count:1,time:R.Xn(),msg:J.msg,isPush:!J.weak,weak:J.weak,showBadge:Me})):(J.count=1,me(V(J))),("isSilent"in J?(!J.isSilent||[1,2].includes(Me))&&!J.weak:!J.weak)&&(R.tr(),R.Vl())}},G=function(J){return function(me,be){var xe=be().chat,Ae=xe.currentSession,Ne=xe.sessionList,Me=xe.isWindow,Fe=md.global.Account.accountId===J.from?J.to:J.from,Be=md.global.Account.accountId===J.from,we=Ne.filter(function(Pe){return Pe.value===Fe}),Ie=R.uS.is(Fe);if(!(Me&&!we.length))if(we.length){var ge=Be?_l("\u6211"):J.uname,Re=Ie||Ae.value===Fe||Be?0:1;me(l(Fe,J)),me(U({id:Fe,count:Re,time:J.time,msg:ge+": "+J.msg.con,msgId:J.id,isPush:!0})),Re&&(R.tr(),R.pl(),R.j3())}else Be?me(O(Fe,{sysType:0,msg:J.msg,from:J.from,to:J.to,id:J.id},!1)):(J.count=Ie?0:1,J.isGroup=!1,me(V(J,Fe)),J.count&&(R.tr(),R.pl(),R.j3()))}},D=function(J){return function(me,be){var xe=function(){var Ne=be().chat,Me=Ne.currentSession,Fe=Ne.messages,Be=Ne.sessionList;if(Me.value===J.aid){var we=Fe[J.aid]||[],Ie={waitingid:R.Fs(),msg:_l("\u4F60\u6536\u5230\u4E86\u4E00\u4E2A\u6296\u52A8"),sysType:a.Z.MSGTYPE_SYSTEM_SUCCESS,touser:J.aid};R.lL(J.aid),y.r8.clearUnread({type:1,value:J.aid}).then(function(ge){me(U({id:J.aid,clearCount:0}))}),me(i(Ie,we[we.length-1]));return}};me(O(J.aid,{},!0,function(){var Ae=be().chat.currentSessionList,Ne=Ae.filter(function(Me){return Me.id==J.aid})[0];Ne?xe():setTimeout(xe,1e3)}))}},M=function(J){return function(me,be){var xe=J.admins,Ae=d().findIndex(xe,{aid:md.global.Account.accountId}),Ne=Ae!==-1,Me=!!$("#easyDialogBoxMDUpdater_container").size();me(C(J.id,{to:J.id,avatar:J.logo,groupname:J.name,isPost:J.isPost,isPush:J.isPush,msg:{con:_l("\u6211")+"\uFF1A"+_l("\u7FA4\u7EC4\u521B\u5EFA\u6210\u529F")}},Me?!1:Ne))}},se=function(J){return function(me,be){var xe=be().chat,Ae=xe.currentSession,Ne=xe.sessionList,Me=xe.isWindow,Fe=Ne.filter(function(Re){return Re.value===J.to}),Be=R.uS.is(J.to);if(!(Me&&!Fe.length))if(Fe.length){var we=md.global.Account.accountId===J.from,Ie=we?_l("\u6211"):J.uname,ge=Be||Ae.value===J.to||we?0:1;me(l(J.to,J)),me(U({id:J.to,count:J.sysType?0:ge,time:J.time,msg:J.sysType?J.msg.con:Ie+": "+J.msg.con,msgId:J.id,isPush:J.isPush,refer:Ae.value===J.to?null:J.refer})),J.isPush&&ge&&!("sysType"in J)&&(R.tr(),R.pl(),R.j3())}else J.count=J.sysType||Be?0:1,J.isGroup=!0,J.isPush=J.sysType?!0:J.isPush,me(V(J,J.to)),J.isPush&&J.count&&!("sysType"in J)&&(R.tr(),R.pl(),R.j3())}},ae=function(J){return function(me,be){var xe=be().chat,Ae=xe.currentSession,Ne=xe.sessionList,Me=Ne.filter(function(ge){return ge.value===J.gid})[0],Fe=R.uS.is(J.gid),Be=J.msg;if(Ae.value===J.gid)R.lL(J.gid);else{var we=Me.atlist?Me.atlist.filter(function(ge){return ge!==J.id}):[],Ie={id:J.gid,atlist:Fe?[]:we.concat(Be.msgid),at_msg:{time:Be.time,message_id:Be.msgid,msgid:Be.msgid}};me(U(Ie))}}},ne=function(J){return function(me,be){var xe=be().chat.sessionList,Ae=xe.filter(function(Me){return Me.value===J.gid})[0];if(me(u(J.gid,J)),me(U({id:J.gid,addMsg:J.msg.con})),Ae&&Ae.atlist){var Ne=Ae.atlist.filter(function(Me){return Me!==J.id});me(U({id:J.gid,atlist:Ne,isWithdraw:!0}))}Ae&&Ae.refer&&me(U({id:J.gid,refer:null,isWithdraw:!0})),Ae&&Ae.reflist&&me(U({id:J.gid,reflist:[],isWithdraw:!0}))}},de=function(J,me){return{type:"SET_REFER_MESSAGE",id:J,message:me}},Ce=function(J,me){return function(be,xe){var Ae=xe().chat.bottomUnreadMessage,Ne=Ae[J];be(Ne?{type:"ADD_BOTTOM_UNREAD_MESSAGE",id:J,message:me}:{type:"SET_BOTTOM_UNREAD_MESSAGE",id:J,message:me})}},he=function(J){return{type:"REMOVE_BOTTOM_UNREAD_MESSAGE",id:J}},fe=function(J){return{type:"REMOVE_REFER_MESSAGE",id:J}},Ee=function(J,me){return{type:"SET_GOTO_MESSAGE",id:J,messageId:me}},Y=function(J){return{type:"REMOVE_GOTO_MESSAGE",id:J}},oe=function(J){return{type:"UPDATE_IS_WINDOW",result:J}},ve=function(J){return{type:"UPDATE_SHOW_ADD_RESSBOOK",result:J}},ue=function(){return function(J,me){var be=me().chat,xe=be.messages,Ae=be.currentSession,Ne=be.currentSessionList,Me=Ae.id;te.$n({pageIndex:1,pageSize:30}).then(function(Fe){if(Me){Fe.forEach(function(Ie){Ie&&Ie.value==Me&&(Ie.count=0)}),J(Z(Fe));var Be=Ne.filter(function(Ie){return Ie.id===Me})[0];if(!Be)return;var we=Be.isGroup;te.FC({id:Me,type:we?a.Z.SESSIONTYPE_GROUP:a.Z.SESSIONTYPE_USER}).then(function(Ie){Ie=$.isArray(Ie)?Ie.reverse():[];var ge=(0,ce.default)({},Me,R.k5(Ie));J({type:"UPDATE_CURRENT_SESSION",result:[Be]}),J({type:"UPDATE_MESSAGE",result:ge})})}else J(Z(Fe)),J({type:"UPDATE_CURRENT_SESSION",result:[]}),J({type:"SET_CURRENT_SESSION",result:{}}),J({type:"UPDATE_MESSAGE",result:{}})})}},pe=function(J){return function(me,be){y.r8.setSlience(J)}},Se=function(J){return function(me,be){var xe=be().chat,Ae=xe.currentSessionList,Ne=xe.sessionList,Me=xe.currentSession,Fe=J.isSilent?J.isSilent:!1,Be=J.showBadge?J.showBadge:0,we=Ae.map(function(Re){return Re.value===J.value&&(Re.isSilent=Fe,Re.showBadge=Be),Re}),Ie=Ne.map(function(Re){return Re.value===J.value&&(Re.isSilent=Fe,Re.showBadge=Be),Re});if(me({type:"UPDATE_CURRENT_SESSION",result:we}),me({type:"UPDATE_SESSION_LIST",result:Ie}),J.value===Me.value){var ge=Ie.find(function(Re){return Re.value===J.value});me(ee(ge))}}}},48645:(lt,Te,t)=>{"use strict";t.d(Te,{$n:()=>o,FC:()=>Z,my:()=>d});var ce=t(63239),g=t.n(ce),p=t(46593),L=t.n(p),te=t(22731),R=t(67460),y=t(35356);if(t.j==7375)var a=t(72992);if(t.j==7375)var r=t(70714);var o=function(c){return $.ajax({url:_.get(window,"config.HTTP_SERVER")+"/chat_list",data:$.extend(c,{pss_id:(0,r.qz)()}),dataType:"jsonp",jsonp:"cb"})},d=function(c){var q=3e3,b={timeout:q};if(c.type==y.Z.SESSIONTYPE_GROUP)return R.Z.getGroupInfo({groupId:c.value},{ajaxOptions:b});if(c.type==y.Z.SESSIONTYPE_USER)return te.Z.getAccountBaseInfo({accountId:c.value},{ajaxOptions:b})},Z=function(c){var q={};if(q.sincetime=c.sincetime||"",q.page=c.page||1,q.num=c.num?c.num+a.Z.MSG_LENGTH_MORE:a.Z.MSG_LENGTH_MORE,q.pss_id=(0,r.qz)(),q.keyword=c.keyword||"",q.direction=c.direction||"",c.type===y.Z.SESSIONTYPE_GROUP)return q.groupid=c.id,$.ajax({url:_.get(window,"config.HTTP_SERVER")+"/group_messages",data:q,type:"get",dataType:"jsonp",jsonp:"cb",timeout:5e3});if(c.type===y.Z.SESSIONTYPE_USER)return q.accountid=c.id,$.ajax({url:_.get(window,"config.HTTP_SERVER")+"/messages",data:q,type:"get",dataType:"jsonp",jsonp:"cb",timeout:5e3})},H=function(c){var q={},b="";return c.type===Constant.SESSIONTYPE_GROUP?(q.groupid=c.id||"",b="/group_messages_byid"):c.type===Constant.SESSIONTYPE_USER&&(q.accountId=c.id||"",b="/messages_byid"),q.pss_id=getPssId(),q.msgid=c.msgid||"",q.size=c.size||21,$.ajax({url:_.get(window,"config.HTTP_SERVER")+b,data:q,type:"get",dataType:"jsonp",jsonp:"cb"})},U=function(c){var q={},b="";return c.isGroup?(q.groupid=c.id||0,b="/group_files_byid"):(q.accountid=c.id||0,b="/user_files_byid"),q.pss_id=getPssId(),q.msgid=c.msgid||"",q.size=c.size||20,q.type=c.type||0,$.ajax({url:_.get(window,"config.HTTP_SERVER")+b,data:q,type:"get",dataType:"jsonp",jsonp:"cb"}).then(function(k){return $.isArray(k)||(k=[]),k})},f=function(c){return c.postType=-1,c.fType=c.fType?c.fType:"feed",c.lType=c.lType?c.lType:"group",c._=new Date().getTime(),PostController.getPostListByLegacyPara(c)},V=function(c){return c.fileType=c.fileType||-1,c.groupId?ChatController.getGroupFileList(c):ChatController.getUserFileList(c)},C=function(c){return c.groupId?(c.loadTabType=7,ChatController.getGroupCountByTabName(c)):(c.loadTabType=6,ChatController.getUserCountByTabName(c))},O=function(c){return CommonAjax.getAllChatAddressbookByKeywords({keywords:c})},n=function(c){return new _Promise(function(q,b){GroupController.getGroupInfo({groupId:c}).then(function(k){for(var ee=[],re=0;re<k.groupUsers.length;re++){var ie=k.groupUsers[re];ie!==null&&ee.push(ie)}k.users=ee,q(k)})})},s=function(c){return new _Promise(function(q,b){var k={sourceId:c.groupId,fromType:1};c.accountIds&&(k.accountIds=c.accountIds),c.accounts&&(k.accounts=c.accounts),CommonAjaxInvitation.inviteUser(k).then(function(ee){q(ee)}).catch(function(ee){b(ee)})})},j=function(c){return new _Promise(function(q,b){GroupController.addGroup({groupName:c.groupname,accountIds:_JSON$stringify(c.useridlist)}).then(function(k){k.msg==1?q(k.data):b(k.msg)}).catch(function(k){b(k)})})},A=function(c){return new _Promise(function(q,b){GroupController.addDiscussionGroup({accountIds:c.accountIds}).then(function(k){q(k)}).catch(function(k){b(k)})})},S=function(c){return new _Promise(function(q,b){$.ajax({url:c}).then(function(k){q(k)})})}},72992:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>L});var ce=t(35356),g={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},topRight:{points:["br","tr"]},bottomRight:{points:["tr","br"]},bottomLeft:{points:["tl","bl"]}},p={EmailConnector:"",AVATAR_24:"?imageView2/1/w/100/h/100/q/90",AVATAR_48:"?imageView2/1/w/100/h/100/q/90",AVATAR_100:"?imageView2/1/w/100/h/100/q/90",PREVIEW_IMG:"?imageView2/2/w/310",MESSAGE_THUMBNAIL:"?imageView2/2/w/76/h/76",MSG_LENGTH_DEFAULT:10,MSG_LENGTH_MORE:20,sendInterval:600,shakeInterval:3e3,retryInterval:1e4,inputMode:Number(window.localStorage.getItem("im_input_mode")||0)||ce.Z.INPUT_MODE_ENTER,maxFileSize:"50mb",docExtends:"doc,docx,ppt,pot,pps,pptx,xls,xlsx,pdf,txt,mmap,vsd,md,ai,psd,tif,dwt,dwg,dws,dxf,wps,dps,dpt,pps,et,xmind,cdr,project,key,numbers,pages,rp,pub,cal,3ds,max,indd,mpp,eml",picExtends:"gif,png,jpg,jpeg,bmp",compressedExtends:"zip,rar,7z",emotionHost:"/staticfiles/images/",reconnectAttempt:5,maxSessionUnread:20,msgMaxSize:20480,sessionInfoOpen:!0,smallPicHeight:150,searchInterval:0,builtinPlacements:g};const L=p},30429:(lt,Te,t)=>{"use strict";t.d(Te,{C5:()=>U,Fh:()=>N,Fs:()=>j,T6:()=>s,VU:()=>V,Vl:()=>B,Xn:()=>A,Zm:()=>v,aL:()=>le,di:()=>n,j3:()=>E,k5:()=>C,lL:()=>k,nr:()=>o,oY:()=>H,pl:()=>X,tr:()=>K,uS:()=>Q,wv:()=>O,yx:()=>P});var ce=t(63239),g=t.n(ce),p=t(96486),L=t.n(p),te=t(35356),R=t(15577),y=t(30381),a=t.n(y),r=function(l){if(!l)return l;var T=new Date,G=l.split(" ")[0],D=G.split("-")[0],M=G.split("-")[1]-1,se=G.split("-")[2],ae=l.split(" ")[1],ne=ae.split(":")[0],de=ae.split(":")[1],Ce=ae.split(":")[2];T.setFullYear(D),T.setMonth(M),T.setDate(se),T.setHours(ne),T.setMinutes(de),T.setSeconds(Ce);var he=new Date,fe=new Date;fe.setFullYear(he.getFullYear()),fe.setMonth(he.getMonth()),fe.setDate(he.getDate()),fe.setHours(0),fe.setMinutes(0),fe.setSeconds(0);var Ee=0,Y=void 0;return T-fe>=0?Y=ne+":"+de:(Ee=fe-T,Ee<864e5?Y=_l("\u6628\u5929")+" "+ne+":"+de:Ee>864e5&&D==fe.getFullYear()?Y=_l("%0\u6708%1\u65E5",M+1,se)+" "+ne+":"+de:Y=D+"/"+(M+1)+"/"+se+" "+ne+":"+de),Y},o=function(l){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,G=new Date,D=l.split(" ")[0],M=D.split("-")[0],se=D.split("-")[1]-1,ae=D.split("-")[2],ne=l.split(" ")[1],de=ne.split(":")[0],Ce=ne.split(":")[1],he=ne.split(":")[2];G.setFullYear(M),G.setMonth(se),G.setDate(ae),G.setHours(de),G.setMinutes(Ce),G.setSeconds(he);var fe=new Date,Ee=new Date;Ee.setFullYear(fe.getFullYear()),Ee.setMonth(fe.getMonth()),Ee.setDate(fe.getDate()),Ee.setHours(0),Ee.setMinutes(0),Ee.setSeconds(0);var Y=0,oe=void 0;if(G-Ee>=0)oe=de+":"+Ce;else if(Y=Ee-G,Y<864e5)oe=_l("\u6628\u5929")+" "+de+":"+Ce;else if(Y>864e5&&M==Ee.getFullYear())oe=_l("%0\u6708%1\u65E5",se+1,ae);else{var ve=T?"%0\u5E74%1\u6708%2\u65E5":"%0/%1/%2";oe=_l(ve,M,se+1,ae)}return oe},d=function(l,T,G){var D=l;if(G=G===!0,D&&typeof D!="number"){D=D.replace(/-/g,"/");var M=Number(D.substring(D.lastIndexOf(".")+1));D=new Date(D.substring(0,D.lastIndexOf("."))).getTime()+M}else D=moment(A()).toDate().getTime();var se="",ae=moment(A()).toDate();return T=T||0,(Math.abs(D-T)>1e3*60||G)&&(se=r(moment(D).format("YYYY-MM-DD HH:mm:ss.S")),T=D),se.replace(_l("\u521A\u521A"),ae.getHours()+":"+(ae.getMinutes()<10?"0":"")+ae.getMinutes())},Z=function(l,T){var G=[],D=l.filter(function(ae){return ae.count}),M=l.filter(function(ae){return!ae.count});if(l=D.concat(M),T){var se=[];return l.forEach(function(ae){ae.value==T?se.push(ae):G.push(ae)}),se.concat(G)}else return l},H=function(l,T){l=L().orderBy(l,["sendMsg"]);var G=[],D=[];return l.forEach(function(M){var se=M.top_info?M.top_info.isTop:!1;se?D.push(M):G.push(M)}),Z(D,T).concat(G)},U=function(l){return l=l.filter(function(T){return T}),l.map(function(T){return f(T)})},f=function(l){if(l.from&&!l.sysType){var T=l.iswd,G=l.from.id===md.global.Account.accountId,D=l.wdAdminid===md.global.Account.accountId,M=l.wdAdminid;if(G){var se="";T?se=M?""+_l("\u7BA1\u7406\u5458\u64A4\u56DE\u4E86\u4E00\u6761\u4F60\u7684\u6D88\u606F"):""+_l("\u4F60")+l.msg.con:se=_l("\u6211")+": "+l.msg.con,l.msg.con=se}else{var ae="";T?M?ae=D?""+_l("\u4F60\u64A4\u56DE\u4E86\u6210\u5458\u201C%0\u201D\u7684\u4E00\u6761\u6D88\u606F",l.from.name):""+_l("\u7BA1\u7406\u5458\u64A4\u56DE\u4E86\u4E00\u6761\u6210\u5458\u6D88\u606F"):ae='"'+l.from.name+'"'+l.msg.con:ae=l.from.name+": "+l.msg.con,l.msg.con=ae}}else switch(l.type){case te.Z.SESSIONTYPE_SYSTEM:l.name=_l("\u7CFB\u7EDF"),l.iconType="system";break;case te.Z.SESSIONTYPE_POST:l.name=_l("\u52A8\u6001"),l.iconType="post";break;case te.Z.SESSIONTYPE_CALENDAR:l.name=_l("\u65E5\u7A0B"),l.iconType="calendar";break;case te.Z.SESSIONTYPE_TASK:l.name=_l("\u4EFB\u52A1"),l.iconType="task";break;case te.Z.SESSIONTYPE_KNOWLEDGE:l.name=_l("\u77E5\u8BC6"),l.iconType="knowledge";break;case te.Z.SESSIONTYPE_HR:l.name=_l("\u4EBA\u4E8B"),l.iconType="hr";break;case te.Z.SESSIONTYPE_WORKSHEET:l.name=_l("\u5E94\u7528"),l.iconType="worksheet";break;case te.Z.SESSIONTYPE_WORKFLOW:l.name=_l("\u5DE5\u4F5C\u6D41"),l.iconType="workflow";break;default:break}return l._time=l.time,l.time=o((0,R.LX)(l.time)),l.type=Number(l.type),l.messageAtlist=l.atlist,l.sendMsg=localStorage.getItem("textareaValue"+l.value),l.msg.con=(0,R.Qu)(l.msg.con),l},V=function(l){return l=L()(l).groupBy("value").map(function(T,G){return T[0]}).value(),l},C=function(l){return l.map(function(T,G){return O(T,l[G-1])})},O=function(l,T){if(l.timestamp=r((0,R.LX)(l.time)),l.isMine=l.from===md.global.Account.accountId,l&&T&&l.from===T.from&&a()(l.time).valueOf()-a()(T.time).valueOf()<=60*3e3){if(l.timestamp=null,T.iswd||T.sysType)l.isDuplicated=!1;else{var G=l.type===te.Z.MSGTYPE_TEXT;l.isDuplicated=G,G&&(l.timestamp=null)}l.unreadLine&&(l.isDuplicated=!1)}return l},n=function(l,T){return l.iswd=!1,l.fromAccount={id:l.from,name:l.uname,logo:l.logo},O(l,T)},s=function(l){return"dtype"in l?(l.count=l.count,l.msg={con:l.msg},l.time=A(),l.value=l.id):(l.iswd=!1,l.name=l.isGroup?l.groupname:l.uname,l.msgid=l.id,l.count=l.count,l.value=l.isGroup||md.global.Account.accountId===l.from?l.to:l.from,l.logo=l.isGroup?l.avatar:l.logo,l.type=l.isGroup?te.Z.SESSIONTYPE_GROUP:te.Z.SESSIONTYPE_USER,l.time=l.time?l.time:A(),l.from={id:l.from,name:l.uname,avatar:l.logo}),f(l)},j=function(){function u(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return function(){return u()+u()+"-"+u()+"-"+u()+"-"+u()+"-"+u()+u()+u()}}(),A=function(){return a()().format("YYYY-MM-DD HH:mm:ss.SSS")},S=function(l){var T=l.md,G=l.entityid,D=l.extra;switch(T){case"task":return{name:_l("\u4EFB\u52A1"),param:{task:G}};case"calendar":return{name:_l("\u65E5\u7A0B"),param:{calendar:G}};case"post":return{name:_l("\u52A8\u6001"),noTiele:!0,isPost:!0,param:{post:G}};case"vote":return{name:_l("\u6295\u7968"),noTiele:!0,param:{post:G}};case"kcfile":return{name:_l("\u77E5\u8BC6")};case"kcfolder":return{name:_l("\u77E5\u8BC6\u6587\u4EF6\u5939"),noTiele:!0};case"url":return{name:_l("\u94FE\u63A5")};case"worksheetrow":var M=D||{},se=M.rowId;return{param:{worksheetrow:G+">"+se}};case"worksheet":return{name:_l("\u5E94\u7528")};default:return{name:_l("\u94FE\u63A5")}}},I=function(l){var T=/((http|https|ftp):\/\/|w{1,3}\.)[^\s\|<\|\u4E00-\u9FA5]+/gi;return l.replace(T,function(G){var D=G;return G.match(/^w{1,3}/)&&(D="http://"+G),'<a class="convertLink" target="_blank" href="'+D+'">'+G.replace("&","&amp;")+"</a>"})},c=function(l){return l.replace(/</g,"&lt").replace(/>/g,"&gt;")},q=function(l){return Emotion.parse(I(c(l)).replace(/\n/g,"<br>").replace(/\s{2}/g," &nbsp;"))},b=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,T=Math.round(l/1024*100)/100,G="K";return T>1024?(T=Math.round(T/1024*100)/100,G="M"):T=Number(T).toFixed(0),T+G},k=function(l){var T=$("#ChatPanel-"+l).find(".ChatPanel-sessionList");T.addClass("ChatPanel-shake").on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){$(this).removeClass("ChatPanel-shake")})},ee=function(l){setTimeout(function(){var T=$("#ChatPanel-"+l).find(".ChatPanel-MessageRefer");ie(T)},0)},re=function(l){var T=$("#Message-"+l).find(".Message-container");ie(T)},ie=function(l){var T=(window.isFirefox,"highlight");l.addClass(T).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){$(this).removeClass(T)})},le=function(l){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,G=$("#ChatPanel-"+l).find(".ChatPanel-sessionList .has-scrollbar");if(G.size()){var D=G.get(0),M=D.nanoscroller,se=M||{},ae=se.maxScrollTop,ne=se.contentScrollTop;M&&(T||ae-ne<50)&&G.nanoScroller({flash:!0}).nanoScroller({scroll:"bottom"})}},E=function(){var l=$(".ChatList-sessionList-wrapper .nano");l.nanoScroller({flash:!0}).nanoScroller({scroll:"top"})},w=null,K=function(){window.isOpenMessageTwinkle&&(w||(w=window.setInterval(function(){var l=window.document.title;l.indexOf("\u3010"+_l("\u65B0\u6D88\u606F")+"\u3011")===-1?window.document.title="\u3010"+_l("\u65B0\u6D88\u606F")+"\u3011"+l.replace("\u3010\u3000\u3000\u3000\u3011",""):window.document.title="\u3010\u3000\u3000\u3000\u3011"+l.replace("\u3010"+_l("\u65B0\u6D88\u606F")+"\u3011",""),l=window.document.title},600)))},N=function(l,T){var G=T.filter(function(D){return D.value!==l});W(G)||(window.clearInterval(w),w=null,window.document.title=window.document.title.replace("\u3010"+_l("\u65B0\u6D88\u606F")+"\u3011","").replace("\u3010\u3000\u3000\u3000\u3011",""))},F=Date.now().toString(),h=JSON.parse(localStorage.getItem("tabIds"))||[];localStorage.setItem("tabIds",g()(h.concat(F)));var z=function(){var l=JSON.parse(localStorage.getItem("tabIds"))||[],T=L().max(l);return T===F};window.addEventListener("beforeunload",function(){var u=JSON.parse(localStorage.getItem("tabIds"))||[],l=u.filter(function(T){return T!==F});localStorage.setItem("tabIds",g()(l))});var X=function(){!window.isOpenMessageSound||!z()||document.getElementById("sessionNewMsgAudio").play()},B=function(){!window.isOpenMessageSound||!z()||document.getElementById("systemNewMsgAudio").play()},x=function(l,T,G){var D=G?Constant.SESSIONTYPE_GROUP:Constant.SESSIONTYPE_USER,M=(window.screen.availHeight-660)/2,se=(window.screen.availWidth-930)/2,ae="width=930,height=598,toolbar=no,menubar=no,location=no,status=no,top="+M+",left="+se;window.open("/chat_window?id="+l+"&name="+T+"&type="+D,"_blank",ae)},Q={set:function(l){safeLocalStorageSetItem("chat_window_"+l,!0)},remove:function(l){localStorage.removeItem("chat_window_"+l)},is:function(l){return!!localStorage.getItem("chat_window_"+l)}},i=function(l){var T=0;if(document.selection){l.focus();var G=document.selection.createRange();G.moveStart("character",-l.value.length),T=G.text.length}else(l.selectionStart||l.selectionStart==0)&&(T=l.selectionStart);return T},m=function(l){var T=$("#ChatPanel-"+l+" textarea");window.currentCursortPosition=i(T.get(0))},v=function(l){switch(l*1){case te.Z.SESSIONTYPE_SYSTEM:return"system";case te.Z.SESSIONTYPE_POST:return"post";case te.Z.SESSIONTYPE_CALENDAR:return"calendar";case te.Z.SESSIONTYPE_TASK:return"task";case te.Z.SESSIONTYPE_KNOWLEDGE:return"knowledge";case te.Z.SESSIONTYPE_HR:return"hr";case te.Z.SESSIONTYPE_WORKSHEET:return"worksheet";case te.Z.SESSIONTYPE_WORKFLOW:return"workflow";default:return""}},W=function(l,T){for(var G=!1,D=0;D<l.length;D++){var M=l[D]||{},se="isPush"in M?M.isPush:!0,ae="isSilent"in M?!M.isSilent||[1,2].includes(M.showBadge):!0;if(M&&M.count&&se&&ae){G=!0;continue}}return G},P=function(){var l=localStorage.getItem("chatList_isUp");return l==="true"?!0:(l==="false"||safeLocalStorageSetItem("chatList_isUp",!1),!1)}},41671:(lt,Te,t)=>{"use strict";t.d(Te,{D:()=>ce});var ce={analysis:{icon:"worksheet_column_chart",name:_l("\u7EDF\u8BA1\u56FE")},button:{icon:"custom_actions",name:_l("\u6309\u94AE")},filter:{icon:"filter",name:_l("\u7B5B\u9009\u5668")},carousel:{icon:"slideshow",name:_l("\u8F6E\u64AD\u56FE")},view:{icon:"view_eye",name:_l("\u89C6\u56FE")},richText:{icon:"richtext",name:_l("\u5BCC\u6587\u672C")},embedUrl:{icon:"url",name:_l("\u5D4C\u5165url")},ai:{icon:"ai1",name:_l("AI\u52A9\u624B")}}},18484:(lt,Te,t)=>{"use strict";t.d(Te,{CP:()=>m,Cw:()=>h,GV:()=>N,Lb:()=>w,Rb:()=>G,Te:()=>de,Uf:()=>fe,V3:()=>F,Vz:()=>D,Wh:()=>ne,do:()=>W,eO:()=>Ce,eS:()=>T,gq:()=>ae,hB:()=>x,k0:()=>se,lT:()=>i,nw:()=>B,uy:()=>z,vM:()=>M});var ce=t(12424),g=t(63239),p=t.n(g),L=t(88239),te=t(94942),R=t.n(te),y=t(36803),a=t(85315),r=t(46593),o=t.n(r),d=t(86735),Z=t(71893),H=t(84753),U=t.n(H);if(/^(2634|8695)$/.test(t.j))var f=t(41671);var V=t(96486),C=t.n(V),O=t(29306),n=t.n(O);if(/^(2634|8695)$/.test(t.j))var s=t(90570);if(/^(2634|8695)$/.test(t.j))var j=t(91247);var A=t(92138);if(!/^(1887|7596)$/.test(t.j))var S=t(15577);if(!/^(1887|7596)$/.test(t.j))var I=t(8620);if(/^(2634|7375|8695)$/.test(t.j))var c=t(13714);if(/^(2634|8695)$/.test(t.j))var q=t(77632);if(!/^(1887|7596)$/.test(t.j))var b=t(26358);if(!/^(1887|7596)$/.test(t.j))var k=t(44253);if(!/^(1887|7596)$/.test(t.j))var ee=t(86674);var re=t(30381),ie=t.n(re),le=/^(2634|8695)$/.test(t.j)?void 0:null,E=(0,d.Z)([`
  display: flex;
  align-items: center;
`],[`
  display: flex;
  align-items: center;
`]),w=Z.ZP.div(E),K=function(Y){return _.keys(Y).forEach(function(oe){return Y[Y[oe]]=oe}),Y},N=K({analysis:1,richText:2,embedUrl:3,button:4,view:5,filter:6,carousel:7,ai:8}),F=function(Y){return typeof Y=="number"?N[Y]:Y},h=function(Y){var oe=Y.component,ve=Y.components,ue=oe.id||oe.uuid;return _.findIndex(ve,function(pe){return pe.id===ue||pe.uuid===ue})},z=function(Y){var oe=Y.components,ve=oe===void 0?[]:oe,ue=Y.index,pe=ue===void 0?ve.length:ue,Se=Y.layoutType,ye=Se===void 0?"web":Se,J=Y.titleVisible,me=Y.type,be=Y.config,xe=be===void 0?{}:be;if(me==="ai"&&xe.showType==="suspension")return null;if(ye==="web")return me==="view"?{x:ve.length*6%12,y:1/0,w:12,h:10,minW:2,minH:6}:me==="filter"?{x:ve.length*6%12,y:1/0,w:12,h:2,minW:2,minH:2}:{x:ve.length*6%12,y:1/0,w:6,h:6,minW:2,minH:2};if(ye==="mobile"){var Ae=_.pick(ve[pe],"type"),Ne=Ae.type,Me=U()(ve,function(Pe){return(0,V.get)(Pe,["mobile","layout","y"])})||{},Fe=Me.y,Be=Fe===void 0?0:Fe,we=Me.h,Ie=we===void 0?6:we,ge=F(Ne),Re=_.includes(["button"],ge)?2:1;return ge==="view"?{x:0,y:Be+Ie,w:2,h:J?9:8,minW:Re,minH:4}:ge==="filter"?{x:0,y:Be+Ie,w:2,h:1,minW:Re,minH:1}:{x:0,y:Be+Ie,w:2,h:J?7:6,minW:Re,minH:2}}},X=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y.filter(function(oe){return oe.type===1||oe.type==="analysis"}).length},B=function(Y){return!0},x=function(Y){return _.get(f.D[F(Y)],"icon")},Q=/<.+?>/g,i=function(Y){var oe=Y.value,ve=oe===void 0?"":oe,ue=Y.type,pe=Y.name,Se=Y.button,ye=Y.config,J=ye===void 0?{}:ye,me=F(ue);return me==="analysis"?pe||_l("\u672A\u547D\u540D\u56FE\u8868"):me==="richText"?ve.replace(Q,""):me==="button"?_.get(Se,["buttonList","0","name"]):me==="view"?J.name:me==="filter"?_l("\u7B5B\u9009\u7EC4\u4EF6"):me==="carousel"?_l("\u8F6E\u64AD\u56FE"):(_.includes(["embedUrl","ai"],me),ve)},m=function(Y){if(_.every(Y,function(ve){return _.get(ve,["mobile","layout"])}))return!1;var oe=_.groupBy(Y,function(ve){return _.get(ve,["web","layout","y"])});return _.flattenDeep(_.sortBy(_.keys(oe),function(ve){return+ve}).map(function(ve){var ue=oe[ve];return _.sortBy(ue,function(pe){return _.get(pe,["web","layout","x"])})}))},v=function(Y){var oe=Y.width,ve=Y.count,ue=Y.margin,pe=ue===void 0?20:ue;return{width:"calc("+100/ve+"% - "+pe+"px)"}},W=function(Y,oe,ve){if(oe=oe||[],!Y||oe.length<1)return Y;var ue=function(ye){var J=ye.type,me=ye.data;if(J==="static")return me;var be=_.get(md,["global","Account"]),xe=be.mobilePhone,Ae=be.accountId,Ne=be.email;switch(me){case"userId":return Ae;case"phone":return xe;case"email":return Ne;case"ua":return navigator.userAgent;case"timestamp":return Date.now();default:return ve[me]||""}},pe=oe.reduce(function(Se,ye){var J=ye.key,me=ye.value,be=encodeURIComponent(ue(me));if(!be)return Se;var xe=Se?"&"+encodeURIComponent(J)+"="+be:encodeURIComponent(J)+"="+be;return Y.includes(xe)?Se:Se+=xe},"");return pe?Y.includes("?")?Y+"&"+pe:Y+"?"+pe:Y},P=function(Y){return new(o())(function(oe,ve){var ue=new FileReader;ue.addEventListener("load",function(){var pe=new Image;pe.src=ue.result,pe.addEventListener("load",function(){return oe(pe)})}),ue.readAsDataURL(Y)})},u=function(Y){var oe=document.createElement("canvas");oe.width=Y.width,oe.height=Y.height;var ve=oe.getContext("2d");return ve.drawImage(Y,0,0),oe},l=function(Y,oe){return new(o())(function(ve,ue){var pe=_l("\u4E0D\u652F\u6301\u6253\u5370"),Se=Y.getContext("2d");Se.font="40px",Se.fillStyle="#757575",Se.textAlign="center",oe.forEach(function(ye){var J=ye.left,me=ye.top;Se.fillText(pe,J,me)}),Y.toBlob(function(ye){return ve(ye)})})},T=function(){return new(o())(function(Y,oe){var ve=document.createElement("link");ve.onload=Y,ve.setAttribute("class","fontlinksheet"),ve.setAttribute("rel","stylesheet"),ve.setAttribute("type","text/css"),ve.setAttribute("href","/staticfiles/iconfont/iconfont.css"),document.head.appendChild(ve)})},G=function(Y){return new(o())(function(oe,ve){var ue=document.querySelector(".componentsWrap .react-grid-layout")||document.querySelector(".customPageContent"),pe=ue.getBoundingClientRect(),Se=pe.left,ye=pe.top,J=ue.querySelectorAll(".widgetContent.embedUrl"),me=[].concat((0,a.Z)(ue.querySelectorAll(".statisticsCard-"+s.f0.CountryLayer))).map(function(Ne){return Ne.parentNode.parentNode}),be=ue.offsetWidth,xe=ue.offsetHeight,Ae=document.querySelector(".fontlinksheet");document.querySelectorAll(".mapboxgl-ctrl").forEach(function(Ne){Ne.remove()}),n().toBlob(ue,{bgcolor:Y||"#f5f5f5",width:be,height:xe}).then(function(){var Ne=(0,y.Z)(R().mark(function Me(Fe){var Be,we,Ie,ge;return R().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,P(Fe);case 2:return Be=Pe.sent,we=u(Be),Ie=[].concat((0,a.Z)(J),(0,a.Z)(me)).map(function(ke){var We=ke.getBoundingClientRect(),Ve=We.left,it=We.width,Ge=We.top,pt=We.height;return{left:Ve-Se+it/2,top:Ge-ye+pt/2}}),Pe.next=7,l(we,Ie);case 7:ge=Pe.sent,Ae&&Ae.remove(),oe(ge);case 10:case"end":return Pe.stop()}},Me,le)}));return function(Me){return Ne.apply(this,arguments)}}()).catch(function(Ne,Me){Ae&&Ae.remove(),console.log(Ne,Me)})})},D=function(Y,oe){var ve=W(Y,oe);return/^https?:\/\//.test(ve)?ve:"https://"+ve},M=function(Y){return Y.map(function(oe){if([N.analysis,N.view].includes(oe.type)){var ve=_.get(oe,"config")||{};return ve.objectId?oe:(0,L.default)({},oe,{config:(0,L.default)({},ve,{objectId:(0,j.Z)()})})}return oe})},se=function(Y){return Y.filter(function(oe){if(N.ai===oe.type||oe.type==="ai"){var ve=_.get(oe,"config")||{};return ve.showType==="embed"}return!0})},ae=function(Y){return Y.filter(function(oe){if(N.ai===oe.type||oe.type==="ai"){var ve=_.get(oe,"config")||{};return ve.showType==="suspension"}return!1})[0]},ne=function(Y){var oe=Y.dataType,ve=Y.advancedSetting,ue=ve.navshow,pe=ve.navfilters,Se=ve.showNavfilters;if(ue==="2"&&oe===29&&pe&&!Se){var ye=JSON.parse(pe);return p()(ye.map(function(me){return JSON.parse(me).id}))}if(ue==="3"&&oe===29&&pe&&!Se){var J=JSON.parse(pe);return p()(J.map(q.gC))}return pe},de=function(Y,oe){var ve=oe&&(0,A.generate)(oe)[0],ue=(0,L.default)({},Y);return ue.pageBgColor==="iconColor"&&(ue.pageBgColor=oe,ue.darkenPageBgColor=(0,c.default)(oe).darken(6).toRgbString()),ue.pageBgColor==="lightColor"&&(ue.pageBgColor=ve),ue.pivoTableColor==="iconColor"&&(ue.pivoTableColor=oe),ue.pivoTableColor==="lightColor"&&(ue.pivoTableColor=ve),ue.numberChartColor==="iconColor"&&(ue.numberChartColor=oe),ue.numberChartColor==="lightColor"&&(ue.numberChartColor=ve),ue},Ce=function(Y){return _.find(I.m,{color:Y.toLocaleUpperCase()})?!1:S.eO(Y)};function he(Ee,Y){var oe=void 0,ve=void 0;switch(Y){case 1:oe=1,ve=3;break;case 2:oe=4,ve=6;break;case 3:oe=7,ve=9;break;case 4:oe=10,ve=12;break;default:throw new Error("Invalid quarter")}var ue=ie()().year(Ee).month(oe-1).startOf("month"),pe=ie()().year(Ee).month(ve-1).endOf("month");return[ue,pe]}var fe=function(Y,oe){var ve=Y.sheetId,ue=Y.reportId,pe=Y.objectId,Se=[];for(var ye in oe){var J=oe[ye],me=J.onlyChartIds,be=me===void 0?[]:me;J.sheetId===ve&&ue!==J.reportId&&(!be.length||be.includes(pe))&&Se.push((0,L.default)({},J,{filters:J.filters.map(function(Ne){var Me=Ne.control,Fe=(0,b.sq)((0,b.z$)((0,b.BM)(Ne))),Be=Fe.dataType,we=Fe.filterType,Ie=(0,L.default)({},Ne,{type:void 0,controlName:void 0,controlValue:void 0,control:void 0,spliceType:1,dataType:Be,filterType:we});if(_.isNull(Ie.values[0])||_.isUndefined(Ie.values[0])||Ie.values[0]==="")return Ie.filterType=k.W5.ISNULL,Ie.values=[],Ie;if(Ne.type===ee.DN.NUMBER||Ne.type===ee.DN.MONEY||Ne.type===ee.DN.FORMULA_NUMBER)return Ie.filterType=k.W5.EQ,Ie.value=Ie.values[0],Ie.values=[],Ie;if(Ne.type===ee.DN.SUB_LIST||Ne.type===ee.DN.RELATE_SHEET)return Ie.dataType=ee.DN.RELATE_SHEET,Ie.filterType=k.W5.RCEQ,Ie;if(Ne.type===ee.DN.DATE||Ne.type===ee.DN.DATE_TIME&&Me){var ge=Me.particleSizeType,Re=ge===void 0?1:ge,Pe=Ie.values[0];if([1,7,13].includes(Re)&&(Ie.dateRangeType=1,Ie.filterType=k.W5.DATE_EQ,Ie.value=ie()(Pe).format("YYYY-MM-DD"),Ie.values=[]),Re===2){var ke=Pe.split("W"),We=(0,ce.Z)(ke,2),Ve=We[0],it=We[1],Ge=ie()().year(Ve).week(it).startOf("week"),pt=ie()().year(Ve).week(it).endOf("week");Ie.filterType=k.W5.DATE_BETWEEN,Ie.minValue=Ge.format("YYYY-MM-DD"),Ie.maxValue=pt.format("YYYY-MM-DD"),Ie.values=[]}if(Re===3){var ot=Pe.split("/"),vt=(0,ce.Z)(ot,2),At=vt[0],yt=vt[1],st=ie()().year(At).month(yt-1).startOf("month"),St=ie()().year(At).month(yt-1).endOf("month");Ie.filterType=k.W5.DATE_BETWEEN,Ie.minValue=st.format("YYYY-MM-DD"),Ie.maxValue=St.format("YYYY-MM-DD"),Ie.values=[]}if(Re===4){var Qe=Pe.split("Q"),Xe=(0,ce.Z)(Qe,2),$e=Xe[0],Ke=Xe[1],Ue=he($e,Number(Ke)),He=(0,ce.Z)(Ue,2),ze=He[0],gt=He[1];Ie.filterType=k.W5.DATE_BETWEEN,Ie.minValue=ze.format("YYYY-MM-DD"),Ie.maxValue=gt.format("YYYY-MM-DD"),Ie.values=[]}if(Re===5){var Et=Pe,ft=ie()().year(Et).startOf("year"),qe=ie()().year(Et).endOf("year");Ie.filterType=k.W5.DATE_BETWEEN,Ie.minValue=ft.format("YYYY-MM-DD"),Ie.maxValue=qe.format("YYYY-MM-DD"),Ie.values=[]}return Re===6&&(Ie.dateRangeType=1,Ie.filterType=k.W5.DATE_EQ,Ie.value=ie()(Pe+":00").format("YYYY-MM-DD"),Ie.values=[]),Ie}if(Ne.type===ee.DN.TIME){var nt=Ie.values[0];Ie.filterType=k.W5.DATEENUM,Ie.value=nt,Ie.values=[]}return(Ne.type===ee.DN.AREA_CITY||Ne.type===ee.DN.AREA_COUNTY||Ne.type===ee.DN.AREA_PROVINCE)&&(Ie.filterType=k.W5.BETWEEN),Ne.type===ee.DN.CASCADER&&(Ie.filterType=k.W5.BETWEEN),Ie})}))}var xe=_.flatten(Se.map(function(Ne){return Ne.filters})),Ae=Se.map(function(Ne){return Ne.widgetId});return{linkageFiltersGroup:xe,initiateChartIds:Ae}}},20454:(lt,Te,t)=>{"use strict";t.d(Te,{Rt:()=>o,mP:()=>r,zV:()=>a});var ce=t(69288),g=t(30381),p=t.n(g),L=t(67294),te=function(Z){var H=p()(Z).format("MM"+_l("\u6708")+"DD"+_l("\u65E5")+"HH"+_l("\u70B9"));return[_l("\u9ED8\u8BA4\u503C"),_l("\u6240\u6709\u5B50\u4EFB\u52A1\u4E0D\u65E9\u4E8E%0\u5F00\u59CB\uFF0C\u622A\u6B62\u65F6\u95F4\u4E0D\u53D8",H),_l("\u6BCD\u4EFB\u52A1\u5F00\u59CB\u65F6\u95F4\u8BBE\u4E3A\u5F53\u524D\u6700\u65E9\u5B50\u4EFB\u52A1\u5F00\u59CB\u65F6\u95F4\u76F8\u540C"),_l("\u4FEE\u6539\u540E\u7684\u6BCD\u4EFB\u52A1\u622A\u6B62\u65F6\u95F4\u65E9\u4E8E\u5B50\u4EFB\u52A1\u5217\u8868\u4E2D\u7684\u6700\u665A\u622A\u6B62\u65F6\u95F4\uFF0C\u665A\u4E8E\u6B64\u622A\u6B62\u65F6\u95F4\u7684\u5B50\u4EFB\u52A1\u7684\u622A\u6B62\u65F6\u95F4\u5C06\u8BBE\u4E3A\u548C\u6BCD\u4EFB\u52A1\u76F8\u540C"),_l("\u5B50\u4EFB\u52A1\u7684\u5F00\u59CB\u65F6\u95F4\u4E0D\u80FD\u65E9\u4E8E\u6BCD\u4EFB\u52A1\u7684\u5F00\u59CB\u65F6\u95F4\uFF0C\u662F\u5426\u7EE7\u627F\u6BCD\u4EFB\u52A1\u7684\u5F00\u59CB\u65F6\u95F4?"),_l("\u5B50\u4EFB\u52A1\u7684\u622A\u6B62\u65F6\u95F4\u4E0D\u80FD\u665A\u4E8E\u6BCD\u4EFB\u52A1\u7684\u622A\u6B62\u65F6\u95F4\uFF0C\u662F\u5426\u7EE7\u627F\u6BCD\u4EFB\u52A1\u7684\u622A\u6B62\u65F6\u95F4?")]},R=function(Z,H,U){var f=te(Z);ce.Z.confirm({closable:!1,title:f[H[0]],okText:_l("\u786E\u5B9A"),onOk:function(){U(H[0])}})},y=function(Z,H,U){var f=te(Z),V=H[0];ce.Z.confirm({closable:!1,dialogClasses:"moreErrorDialog",title:_l("\u4FEE\u6539\u540E\u7684\u6BCD\u4EFB\u52A1\u5F00\u59CB\u65F6\u95F4\u665A\u4E8E\u5B50\u4EFB\u52A1\u7684\u5F00\u59CB\u65F6\u95F4\u3002"),children:L.createElement(L.Fragment,null,H.map(function(C,O){return L.createElement("div",{className:"tanttRadio","data-type":C},L.createElement("span",{className:"tanttRadioItem",onClick:function(s){$(".moreErrorDialog .tanttRadioChcked").removeClass("tanttRadioChcked"),$(s.target).find(".tanttRadioIcon").addClass("tanttRadioChcked"),V=$(s.target).closest(".tanttRadio").data("type")}},L.createElement("span",{className:"tanttRadioIcon ThemeBorderColor3 "+(O===0?"tanttRadioChcked":"")},L.createElement("i",{className:"ThemeBGColor3"})),f[C]))})),onOk:function(){U(V)}})},a=function(Z,H,U){Z.data.updateTypes.length===1?R(H,Z.data.updateTypes,U):y(H,Z.data.updateTypes,U)},r=function(Z){Z.error.code===600?alert(_l("\u4E0D\u53EF\u65E9\u4E8E\u4E0A\u7EA7\u4EFB\u52A1\u7684\u5F00\u59CB\u65F6\u95F4"),2):Z.error.code===601?alert(_l("\u4E0D\u53EF\u665A\u4E8E\u4E0A\u7EA7\u4EFB\u52A1\u7684\u622A\u6B62\u65F6\u95F4"),2):Z.error.code===602?alert(_l("\u4E0D\u53EF\u665A\u4E8E\u622A\u6B62\u65F6\u95F4"),2):Z.error.code===603?alert(_l("\u4E0D\u53EF\u65E9\u4E8E\u5F00\u59CB\u65F6\u95F4"),2):Z.error.code===1001?alert(_l("\u6709\u5B9E\u9645\u5F00\u59CB\u65F6\u95F4\u65F6\uFF0C\u8BA1\u5212\u4E0D\u53EF\u4E3A\u7A7A"),2):Z.error.code===30002||Z.error.code===300020202?alert(_l("\u6743\u9650\u4E0D\u8DB3\uFF0C\u64CD\u4F5C\u5931\u8D25"),2):alert(_l("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"),2)},o=function(Z){ce.Z.confirm({closable:!1,title:_l("\u4EFB\u52A1\u8FD8\u672A\u5F00\u59CB\uFF0C\u662F\u5426\u4ECD\u8981\u5B8C\u6210\u6B64\u4EFB\u52A1\uFF1F"),children:L.createElement("span",{style:"font-size: 12px;color: #757575;"},_l("\u5F00\u59CB\u65F6\u95F4\u4E0D\u53EF\u4EE5\u665A\u4E8E\u7ED3\u675F\u65F6\u95F4\uFF0C\u5982\u679C\u60A8\u4ECD\u8981\u5B8C\u6210\u4EFB\u52A1\uFF0C\u5F00\u59CB\u65F6\u95F4\u5C06\u88AB\u7F6E\u7A7A")),okText:_l("\u5B8C\u6210\u4EFB\u52A1"),onOk:function(){Z()}})}},51443:(lt,Te,t)=>{"use strict";t.d(Te,{Fz:()=>L,Oh:()=>p,ZP:()=>g});var ce={defaultState:{viewType:1,projectId:"",lastMyProjectId:"all",attachmentViewType:1,folderId:"",filterUserId:"",taskFilter:6,listStatus:0,listSort:10,completeTime:"",keyWords:"",searchKeyWords:"",isSubUser:!1,filterSettings:{tags:[],customFilter:{},selectChargeIds:[],folderSearchRange:6}},isGetData:!1,clearFilterSettings:{keyWords:"",searchKeyWords:"",filterSettings:{tags:[],customFilter:{},selectChargeIds:[],folderSearchRange:6}},folderViewType:{treeView:1,stageView:2,folderDetail:3,attachment:4,folderChart:5,taskGantt:6},taskFilterDict:{6:"all",2:"responsible",3:"trust",1:"participate",7:"otherAndMe",8:"star",9:"subordinate",10:"visibleOtherResponsible"},MYTASKTYPES:{0:_l("\u5F85\u5B8C\u6210"),1:_l("\u4ECA\u5929\u8981\u505A"),2:_l("\u6700\u8FD1\u8981\u505A"),3:_l("\u4EE5\u540E\u8003\u8651")},TIPS:{0:_l("\u5F85\u5B8C\u6210\u7684\u4EFB\u52A1\uFF0C\u70B9\u51FB\u4EFB\u52A1\u524D\u7684\u6309\u94AE\u5206\u914D\u4F55\u65F6\u5F00\u59CB\u4EFB\u52A1"),1:_l("\u8FD9\u4E2A\u5206\u7C7B\u4E0B\u662F\u4F60\u8BA1\u5212\u4ECA\u5929\u8981\u505A\u7684\u4EFB\u52A1"),2:_l("\u8FD9\u4E2A\u5206\u7C7B\u4E0B\u662F\u4F60\u8BA1\u5212\u8FD1\u671F\u5F00\u59CB\u8981\u505A\u7684\u4EFB\u52A1"),3:_l("\u8FD9\u4E2A\u5206\u7C7B\u4E0B\u662F\u4F60\u8BA1\u5212\u4EE5\u540E\u8981\u505A\u7684\u4EFB\u52A1")},auth:{None:0,Charger:1,Member:2,Look:3,Null:4,FolderCharger:5,FolderMember:6,SubordinateUsers:7,FolderAdmin:8,VisibleGroup:9},structure:{list:0,folderList:1,myClassify:2},isDrop:!1,$prevNode:null,pageSize:Math.ceil(($(window).height()-140)/48)+5>20?Math.ceil(($(window).height()-140)/48)+5:20,selectize:"",isMyTask:!0,FilterMeTaskClassify:[3],FilterTaskID:[],BrowserScrollWidth:0,groundGlassHtml:'<div class="ThemeBG taskGroundGlass"></div>',detailDescMaxLength:2e4,configHtml:{searchNullHtml:'<div id="taskSearchNullTask"><div class="searchNullTip boderRadAll_3"><i class="taskNullSearch"></i><div>'+_l("\u6CA1\u6709\u641C\u7D22\u5230\u76F8\u5173\u4EFB\u52A1")+'</div></div><div class="ThemeBG taskGroundGlass"></div></div>',filterNullHtml:'<div id="taskSearchNullTask"> <div class="filterNullTip boderRadAll_3"><i class="taskNullFilter"></i><div>'+_l("\u6CA1\u6709\u7B5B\u9009\u7ED3\u679C")+'</div></div><div class="ThemeBG taskGroundGlass"></div></div>',noCompleteNullHtml:'<div id="taskSearchNullTask"><div class="noCompleteTip boderRadAll_3"><i class="taskNullFilter"></i><div>'+_l("\u6CA1\u6709\u5DF2\u5B8C\u6210\u4EFB\u52A1")+'</div></div><div class="ThemeBG taskGroundGlass"></div></div>'}};const g=ce;var p={slide:1,detail:2,dialog:3},L={task:1,folder:2}},89019:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>zt});var ce=t(54208),g=t(69288),p=t(85105),L=t.n(p),te=t(99663),R=t(22600),y=t(49135),a=t(93196),r=t(67294),o=t(73935),d=t(50533),Z=t(93967),H=t.n(Z),U=t(96213),f=t(15405),V=t(33126),C=t(57482),O=t(44036),n=t(51443),s=t(52106),j=t(25273),A=t(15577),S=t(14761),I=t(33867),c=function(Zt){(0,a.default)(Nt,Zt);function Nt(ct){(0,te.default)(this,Nt);var De=(0,y.default)(this,(Nt.__proto__||L()(Nt)).call(this,ct));return De.onSubmit=function(_e){var Le=De.props.taskId;De.props.dispatch((0,C.yi)(Le,_e)),_e.newAccounts.length&&De.props.dispatch((0,C.K_)(Le,_e.newAccounts)),De.props.scrollToComment()},De.state={showCount:!0},De}return(0,R.default)(Nt,[{key:"render",value:function(){var De=this,_e=this.props,Le=_e.taskId,rt=_e.taskDetails,Ct=rt[Le]||{},dt=Ct.data;return r.createElement("div",{className:"taskComment clearfix"},r.createElement("div",{className:"avatarBox"},r.createElement("img",{className:"circle userAvatar",src:md.global.Account.avatar})),this.state.showCount?r.createElement("div",{className:"Right TxtCenter",style:{width:"40px"},onClick:function(){De.props.scrollToComment()}},r.createElement("span",{className:"taskTopicCount ThemeHoverColor3"},r.createElement(I.Z,{icon:"ic_textsms_black",className:"Font20 TxtMiddle Hand"}))):null,r.createElement("div",{className:H()("commenterBox",{mRight0:!this.state.showCount})},r.createElement(S.Z,{sourceId:Le,sourceType:S.Z.TYPES.TASK,appId:md.global.APPInfo.taskAppID,remark:Le+"|"+(0,A.Qu)(dt.taskName)+"|"+_l("\u4EFB\u52A1"),storageId:Le,mentionsOptions:{position:"top"},selectGroupOptions:{projectId:dt.projectID,position:"top"},onSubmit:this.onSubmit,onFocusStateChange:function(bt){return De.setState({showCount:!bt})}})))}}]),Nt}(r.Component);const q=(0,d.$j)(function(Zt){return Zt.task})(c);var b=t(62231),k,ee,re=(ee=k=function(Zt){(0,a.default)(Nt,Zt);function Nt(ct){(0,te.default)(this,Nt);var De=(0,y.default)(this,(Nt.__proto__||L()(Nt)).call(this,ct));return De.updateCommentList=function(_e){var Le=De.props,rt=Le.taskId,Ct=Le.addPostSuccessCount;Ct(),De.props.dispatch((0,C.g4)(rt,_e))},De.onSubmit=function(_e){var Le=De.props.taskId;De.props.dispatch((0,C.yi)(Le,_e)),_e.newAccounts.length&&De.props.dispatch((0,C.K_)(Le,_e.newAccounts)),De.props.scrollToComment()},De.removeDiscussionsCallback=function(_e){De.props.dispatch((0,C.YO)(De.props.taskId,_e))},De.state={onlyLookMe:!1},De}return(0,R.default)(Nt,[{key:"render",value:function(){var De=this,_e=this.state.onlyLookMe,Le=this.props,rt=Le.taskId,Ct=Le.taskDetails,dt=Le.manualRef,It=Ct[rt].data,bt=this.props.taskDiscussions[rt]||[],Ut={sourceId:rt,sourceType:S.Z.TYPES.TASK,appId:md.global.APPInfo.taskAppID,remark:rt+"|"+(0,A.Qu)(It.taskName)+"|"+_l("\u4EFB\u52A1"),storageId:rt,selectGroupOptions:{projectId:It.projectID},onSubmit:this.onSubmit};return r.createElement(r.Fragment,null,r.createElement("div",{className:"isOnlyLookBox"},r.createElement("span",{className:H()("isOnlyLook",{checked:_e}),onClick:function(){return De.setState({onlyLookMe:!_e})}},r.createElement("i",{className:"operationCheckbox icon-ok ThemeBGColor3 ThemeBorderColor3"}),_l("\u53EA\u663E\u793A\u4E0E\u6211\u6709\u5173"))),r.createElement(b.Z,{isFocus:_e,sourceId:rt,sourceType:b.Z.TYPES.TASK,commentList:bt,updateCommentList:this.updateCommentList,removeComment:this.removeDiscussionsCallback,manualRef:dt},r.createElement(S.Z,Ut)))}}]),Nt}(r.Component),k.defaultProps={taskId:"",addPostSuccessCount:function(){},scrollToComment:function(){},manualRef:function(){}},ee);const ie=(0,d.$j)(function(Zt){return Zt.task})(re);var le=t(68924),E=t.n(le),w=function(Zt){(0,a.default)(Nt,Zt);function Nt(ct){(0,te.default)(this,Nt);var De=(0,y.default)(this,(Nt.__proto__||L()(Nt)).call(this,ct));return De.state={logs:[],getSuccess:!1},De}return(0,R.default)(Nt,[{key:"componentDidMount",value:function(){this.getTaskLog(),this.props.manualRef&&this.props.manualRef(this)}},{key:"getTaskLog",value:function(){var De=this;U.Z.getTaskLog({taskID:this.props.taskId}).then(function(_e){_e.status?De.setState({logs:_e.data||[],getSuccess:!0}):alert(_l("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"),2)})}},{key:"returnIcons",value:function(De){if(De===0)return"icon-plus";if(De===1)return"icon-task-card";if(De===2||De===3||De===12||De===13)return"icon-group";if(De===4)return"icon-edit";if(De===6)return"icon-circle";if(De===7)return"icon-task-stage";if(De===8)return"icon-ok";if(De===9)return"icon-task-status-no";if(De===10)return"icon-task-new-locked";if(De===11)return"icon-task-new-no-locked";if(De===14||De===99)return"icon-task-new-delete"}},{key:"render",value:function(){var De=this,_e=this.state,Le=_e.logs,rt=_e.getSuccess;return!Le.length&&!rt?r.createElement(ce.Z,null):r.createElement("div",{className:"dailyContent"},Le.map(function(Ct,dt){return r.createElement("div",{key:dt,className:"singleDdaily boxSizing"},r.createElement("i",{className:H()("singleDdailyType",De.returnIcons(Ct.type))}),r.createElement("div",{dangerouslySetInnerHTML:{__html:E()(Ct.msg)}}),r.createElement("span",{className:"singleDdailyTime"},createTimeSpan(Ct.createTime)))}))}}]),Nt}(r.Component),K=t(52404),N=t(88239),F=t(90937),h=t(96486),z=t.n(h),X=t(52815);const B={mouseOffset:{left:0,top:0},offset:{x:0,y:0},height:0,setInterval:"",CHECKLIST:"checklist",CHECKLIST_ITEM:"checklistItem"};var x=t(62745),Q=function(Zt){(0,a.default)(Nt,Zt);function Nt(ct){return(0,te.default)(this,Nt),(0,y.default)(this,(Nt.__proto__||L()(Nt)).call(this,ct))}return(0,R.default)(Nt,[{key:"render",value:function(){return r.createElement("div",{className:"taskDetailDragPreview",dangerouslySetInnerHTML:{__html:this.props.preview},style:{width:this.props.width}})}}]),Nt}(r.Component),i,m,v,W=(0,V.Z)(f.Z),P=function(Zt){(0,a.default)(Nt,Zt);function Nt(){return(0,te.default)(this,Nt),(0,y.default)(this,(Nt.__proto__||L()(Nt)).apply(this,arguments))}return(0,R.default)(Nt,[{key:"render",value:function(){var De=this;return r.createElement(W,{component:"ul",className:"boxShadow5 boderRadAll_3 checklistOperator",onClickAway:function(){return De.props.isShowOperator()}},r.createElement("li",{className:"ThemeBGColor3",onClick:function(){return De.props.createTask()}},r.createElement("i",{className:"icon-task-card"}),_l("\u8F6C\u4E3A\u4EFB\u52A1")),r.createElement("li",{className:"ThemeBGColor3",onClick:function(){return De.props.removeItem()}},r.createElement("i",{className:"icon-task-new-delete"}),_l("\u5220\u9664")))}}]),Nt}(r.Component),u={beginDrag:function(Nt,ct,De){var _e=(0,o.findDOMNode)(De).outerHTML,Le=(0,o.findDOMNode)(De).getBoundingClientRect(),rt=$((0,o.findDOMNode)(De)).outerWidth();return B.height=$((0,o.findDOMNode)(De)).outerHeight(),B.offset={x:B.mouseOffset.left-Le.left,y:B.mouseOffset.top-Le.top},(0,o.render)(r.createElement(Q,{preview:_e,width:rt}),$(".taskDetailDragPreviewBox:last")[0]),Nt.checklistItemBeginDrag(Nt.data,Nt.index,Nt.topIndex),{index:Nt.index}},isDragging:function(Nt,ct){var De=$(".taskDetailDragPreview:last")[0],_e=ct.getClientOffset();De&&_e&&(De.style.left=_e.x-B.offset.x+"px",De.style.top=_e.y-B.offset.y+"px",clearInterval(B.setInterval),B.setInterval=setInterval(function(){var Le=$(".taskDetailScroll .nano-content").scrollTop(),rt=_e.y-B.offset.y;rt<=180?$(".taskDetailScroll").nanoScroller({scrollTop:Le-100}):$(window).height()-rt-B.height<=90&&$(".taskDetailScroll").nanoScroller({scrollTop:Le+100})},200))},endDrag:function(Nt,ct,De){Nt.checklistItemDrop(),clearInterval(B.setInterval),o.unmountComponentAtNode($(".taskDetailDragPreviewBox:last")[0])}},l={hover:function(Nt,ct,De){var _e=ct.getItem().index,Le=(0,o.findDOMNode)(De).getBoundingClientRect(),rt=(Le.bottom-Le.top)/2,Ct=ct.getClientOffset(),dt=Ct.y-Le.top;_e<Nt.index&&dt<rt||_e>Nt.index&&dt>rt||Nt.checklistItemHover(Nt.index,Nt.topIndex)}},T=(i=(0,F.Ej)(B.CHECKLIST_ITEM,u,function(Zt,Nt){return{connectDragSource:Zt.dragSource(),isDragging:Nt.isDragging()}}),m=(0,F.GR)(B.CHECKLIST_ITEM,l,function(Zt,Nt){return{connectDropTarget:Zt.dropTarget(),isOver:Nt.isOver(),canDrop:Nt.canDrop()}}),i(v=m(v=function(Zt){(0,a.default)(Nt,Zt);function Nt(ct){(0,te.default)(this,Nt);var De=(0,y.default)(this,(Nt.__proto__||L()(Nt)).call(this,ct));return De.state={isEditName:!1,isShowOperator:!1},De}return(0,R.default)(Nt,[{key:"updateItemStatus",value:function(){this.props.noAuth||this.props.updateItemStatus(this.props.data.itemId,!this.props.data.status)}},{key:"editName",value:function(De){De.nativeEvent.stopImmediatePropagation(),this.props.noAuth||(this.setState({isEditName:!0}),this.props.noDragIndexUpdate(this.props.topIndex))}},{key:"checklistNameUpdate",value:function(De){if(De.keyCode===13||De.type==="blur"){De.keyCode===13&&De.preventDefault();var _e=$.trim(De.currentTarget.value);this.setState({isEditName:!1}),this.props.noDragIndexUpdate(-1),_e&&this.props.updateItemName(this.props.data.itemId,_e)}}},{key:"checkMouseDownIsLeft",value:function(De){return De.button===0}},{key:"render",value:function(){var De=this,_e=this.props,Le=_e.data,rt=_e.connectDragSource,Ct=_e.connectDropTarget;if(Le.type==="blank")return r.createElement("div",{style:{height:B.height+"px",backgroundColor:"#e0e0e0",marginTop:"6px"}});var dt=function(){return r.createElement("div",{className:H()("taskChecklistItem flexRow pointer",{itemActive:De.state.isShowOperator},{itemActiveBG:De.state.isEditName})},r.createElement("span",{className:H()("checklistItemStatus Font18",Le.status?"icon-ok":"icon-check_box"),onClick:function(){return De.updateItemStatus()}}),De.state.isEditName?r.createElement(x.Z,{className:"flex Font13",minHeight:20,maxLength:512,isSelect:!0,defaultValue:Le.name,spellCheck:!1,onKeyDown:function(Ut){return De.checklistNameUpdate(Ut)},onBlur:function(Ut){return De.checklistNameUpdate(Ut)}}):r.createElement("span",{className:H()("flex Font13 checklistItemName",{checklistItemCompleted:Le.status}),onClick:function(Ut){return De.editName(Ut)}},Le.name.length>100?Le.name.slice(0,99)+"...":Le.name),De.props.noAuth?void 0:r.createElement("i",{className:"icon-moreop ThemeColor3",onMouseDown:function(Ut){return De.checkMouseDownIsLeft(Ut)&&De.setState({isShowOperator:!0})}}),De.state.isShowOperator?r.createElement(P,{isShowOperator:function(){return De.setState({isShowOperator:!1})},createTask:function(){De.setState({isShowOperator:!1}),De.props.createTask(Le.itemId,Le.name)},removeItem:function(){De.setState({isShowOperator:!1}),De.props.removeItem(Le.itemId)}}):void 0)};return r.createElement("div",null,this.props.noDragIndex===this.props.topIndex||this.props.noAuth?dt():rt(Ct(dt())))}}]),Nt}(r.Component))||v)||v),G=t(45697),D=t.n(G),M,se,ae,ne,de={hover:function(Nt,ct,De){ct.isOver({shallow:!0})||Nt.checklistItemHover(Nt.index,Nt.topIndex)}},Ce=(M=(0,F.GR)(B.CHECKLIST_ITEM,de,function(Zt,Nt){return{connectDropTarget:Zt.dropTarget(),isOver:Nt.isOver(),canDrop:Nt.canDrop()}}),M(se=(ne=ae=function(Zt){(0,a.default)(Nt,Zt);function Nt(ct){return(0,te.default)(this,Nt),(0,y.default)(this,(Nt.__proto__||L()(Nt)).call(this,ct))}return(0,R.default)(Nt,[{key:"render",value:function(){return this.props.connectDropTarget(r.createElement("div",{className:"emptyItem"}))}}]),Nt}(r.Component),ae.propTypes={connectDropTarget:D().func.isRequired,index:D().number.isRequired,topIndex:D().number.isRequired,checklistItemHover:D().func.isRequired},ne))||se),he=t(20640),fe=t.n(he),Ee,Y,oe,ve=(0,V.Z)(f.Z),ue=function(Zt){(0,a.default)(Nt,Zt);function Nt(){return(0,te.default)(this,Nt),(0,y.default)(this,(Nt.__proto__||L()(Nt)).apply(this,arguments))}return(0,R.default)(Nt,[{key:"componentDidMount",value:function(){var De=this.props.isShowOperator,_e=this.props.data.name,Le=z().map(this.props.data.items,function(rt){return`
`+rt.name});$(".checklistOperator .clipboard").off().on("click",function(){fe()(_e+Le.join("")),alert(_l("\u5DF2\u590D\u5236\u5230\u526A\u5207\u677F")),De()})}},{key:"render",value:function(){var De=this;return r.createElement(ve,{component:"ul",className:"boxShadow5 boderRadAll_3 checklistOperator",onClickAway:function(){return De.props.isShowOperator()}},r.createElement("li",{className:"ThemeBGColor3",onClick:function(){return De.props.updateChecklistName()}},r.createElement("i",{className:"icon-new_mail"}),_l("\u91CD\u547D\u540D")),r.createElement("li",{className:"ThemeBGColor3 clipboard"},r.createElement("i",{className:"icon-task-new-copy Font14"}),_l("\u590D\u5236\u6E05\u5355"),r.createElement("span",{className:"mLeft25 tip-bottom-left","data-tip":_l("\u590D\u5236\u540E\uFF0C\u5728\u8981\u4F7F\u7528\u7684\u6E05\u5355\u4E2D\u70B9\u51FB\u201C\u6DFB\u52A0\u68C0\u67E5\u9879\u201D\u5E76\u7C98\u8D34\u6587\u672C\uFF0C\u5C06\u4F1A\u81EA\u52A8\u521B\u5EFA\u590D\u5236\u7684\u68C0\u67E5\u9879\u3002")},r.createElement("i",{className:"icon-help"}))),r.createElement("li",{className:"ThemeBGColor3",onClick:function(){return De.props.removeCheckList()}},r.createElement("i",{className:"icon-task-new-delete"}),_l("\u5220\u9664\u6E05\u5355")))}}]),Nt}(r.Component),pe={beginDrag:function(Nt,ct,De){var _e=(0,o.findDOMNode)(De).outerHTML,Le=(0,o.findDOMNode)(De).getBoundingClientRect(),rt=$((0,o.findDOMNode)(De)).outerWidth();return B.height=$((0,o.findDOMNode)(De)).outerHeight(),B.offset={x:B.mouseOffset.left-Le.left,y:B.mouseOffset.top-Le.top},(0,o.render)(r.createElement(Q,{preview:_e,width:rt}),$(".taskDetailDragPreviewBox:last")[0]),Nt.checklistBeginDrag(Nt.data,Nt.index),{index:Nt.index}},isDragging:function(Nt,ct){var De=$(".taskDetailDragPreview:last")[0],_e=ct.getClientOffset();De&&_e&&(De.style.left=_e.x-B.offset.x+"px",De.style.top=_e.y-B.offset.y+"px",clearInterval(B.setInterval),B.setInterval=setInterval(function(){var Le=$(".taskDetailScroll .nano-content").scrollTop(),rt=_e.y-B.offset.y;rt<=180?$(".taskDetailScroll").nanoScroller({scrollTop:Le-100}):$(window).height()-rt-B.height<=90&&$(".taskDetailScroll").nanoScroller({scrollTop:Le+100})},200))},endDrag:function(Nt,ct,De){Nt.checklistDrop(),clearInterval(B.setInterval),o.unmountComponentAtNode($(".taskDetailDragPreviewBox:last")[0])}},Se={hover:function(Nt,ct,De){var _e=ct.getItem().index,Le=(0,o.findDOMNode)(De).getBoundingClientRect(),rt=(Le.bottom-Le.top)/2,Ct=ct.getClientOffset(),dt=Ct.y-Le.top;_e<Nt.index&&dt<rt||_e>Nt.index&&dt>rt||Nt.checklistHover(Nt.index)}},ye=(Ee=(0,F.Ej)(B.CHECKLIST,pe,function(Zt,Nt){return{connectDragSource:Zt.dragSource(),isDragging:Nt.isDragging()}}),Y=(0,F.GR)(B.CHECKLIST,Se,function(Zt,Nt){return{connectDropTarget:Zt.dropTarget(),isOver:Nt.isOver(),canDrop:Nt.canDrop()}}),Ee(oe=Y(oe=function(Zt){(0,a.default)(Nt,Zt);function Nt(ct){(0,te.default)(this,Nt);var De=(0,y.default)(this,(Nt.__proto__||L()(Nt)).call(this,ct));return De.state={isEditName:!1,isShowOperator:!1,checklistAdd:ct.showAddItem},De}return(0,R.default)(Nt,[{key:"editName",value:function(){this.props.noAuth||(this.setState({isEditName:!0}),this.props.noDragIndexUpdate(this.props.index))}},{key:"checklistNameUpdate",value:function(De){if(De.keyCode===13||De.type==="blur"){De.keyCode===13&&De.preventDefault();var _e=$.trim(De.currentTarget.value);this.setState({isEditName:!1}),this.props.noDragIndexUpdate(-1),_e&&this.props.updateCheckListName(this.props.data.checkListId,_e)}}},{key:"checklistAdd",value:function(De){if(De.keyCode===13||De.type==="blur"){De.keyCode===13&&De.preventDefault();var _e=$.trim(De.currentTarget.value);_e?(this.props.noDragIndexUpdate(-1),this.props.addItems(this.props.data.checkListId,_e),De.keyCode===13?$(De.currentTarget).val("").focus():this.setState({checklistAdd:!1})):(this.props.noDragIndexUpdate(-1),this.setState({checklistAdd:!1}))}}},{key:"checkMouseDownIsLeft",value:function(De){return De.button===0}},{key:"render",value:function(){var De=this,_e=this.props,Le=_e.data,rt=_e.connectDragSource,Ct=_e.connectDropTarget,dt=Le.items||[],It=dt.length,bt=z().filter(dt,function(tt){return tt.status}).length,Ut=(Math.floor(bt/It*100)||0)+"%",Xt=z().includes(this.props.taskFoldStatus,Le.checkListId);if(Le==="blank")return r.createElement("div",{style:{height:B.height+"px",backgroundColor:"#e0e0e0",marginTop:"10px",borderRadius:"5px"}});var pn=function(){return r.createElement("div",{className:"taskChecklist"},r.createElement("div",{className:"taskChecklistHead"},r.createElement("i",{className:"icon-task-list"}),r.createElement("div",{className:H()("taskChecklistName Font14",{Hidden:De.state.isEditName})},r.createElement("span",{onClick:function(){return De.editName()}},Le.name),r.createElement("span",{className:"taskChecklistCount Font14"},bt,"/",It)),De.state.isEditName?r.createElement(x.Z,{minHeight:20,maxLength:100,defaultValue:Le.name,isSelect:!0,spellCheck:!1,onKeyDown:function(Dt){return De.checklistNameUpdate(Dt)},onBlur:function(Dt){return De.checklistNameUpdate(Dt)}}):void 0,De.props.noAuth?void 0:r.createElement("i",{className:H()("icon-moreop pointer ThemeColor3",{Hidden:De.state.isEditName}),onMouseDown:function(Dt){return De.checkMouseDownIsLeft(Dt)&&De.setState({isShowOperator:!0})}}),De.state.isShowOperator?r.createElement(ue,{updateChecklistName:function(){De.setState({isEditName:!0,isShowOperator:!1}),De.props.noDragIndexUpdate(De.props.index)},isShowOperator:function(){return De.setState({isShowOperator:!1})},data:Le,removeCheckList:function(){De.setState({isShowOperator:!1}),De.props.removeCheckList(Le.checkListId)}}):void 0,r.createElement("span",{className:"taskDetailFold","data-tip":Xt?_l("\u5C55\u5F00"):_l("\u6536\u8D77")},r.createElement("i",{className:H()("pointer ThemeColor3",Xt?"icon-arrow-down-border":"icon-arrow-up-border"),onClick:function(){return De.props.updateTaskFoldStatus(Le.checkListId)}}))),Xt?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"taskChecklistPercent mTop15"},r.createElement("span",{className:"taskChecklistPercentNum"},Ut),r.createElement("div",{className:"percentBox"},r.createElement("div",{className:"percentSize",style:{width:Ut}}))),r.createElement("div",{className:"taskChecklistItems"},dt.length?dt.map(function(ht,Dt){return r.createElement(T,{key:Dt,index:Dt,data:ht,topIndex:De.props.index,noDragIndex:De.props.noDragIndex,noAuth:De.props.noAuth,updateItemName:De.props.updateItemName,removeItem:De.props.removeItem,updateItemStatus:De.props.updateItemStatus,createTask:De.props.createTask,noDragIndexUpdate:De.props.noDragIndexUpdate,checklistItemBeginDrag:De.props.checklistItemBeginDrag,checklistItemHover:De.props.checklistItemHover,checklistItemDrop:De.props.checklistItemDrop})}):r.createElement(Ce,{index:0,topIndex:De.props.index,checklistItemHover:De.props.checklistItemHover})),De.state.checklistAdd&&r.createElement("div",{className:"taskChecklistAdd flexRow ThemeBGColor6"},r.createElement("span",{className:"icon-task-status-no checklistItemStatus Font15"}),r.createElement(x.Z,{className:"ThemeBGColor6 flex",minHeight:20,isFocus:!0,onKeyDown:function(Dt){return De.checklistAdd(Dt)},onBlur:function(Dt){return De.checklistAdd(Dt)}})),!De.props.noAuth&&dt.length<100&&r.createElement("span",{className:H()("taskChecklistItemAdd ThemeColor3 pointer",{Hidden:De.state.checklistAdd}),onClick:function(){De.setState({checklistAdd:!0}),De.props.noDragIndexUpdate(De.props.index)}},r.createElement("i",{className:"icon-plus"}),_l("\u4E00\u4E2A\u68C0\u67E5\u9879"))))};return r.createElement("div",null,this.props.noDragIndex===this.props.index||this.props.noAuth?pn():rt(Ct(pn())))}}]),Nt}(r.Component))||oe)||oe),J,me,be=(J=(0,F.Z5)(X.Z),J(me=function(Zt){(0,a.default)(Nt,Zt);function Nt(ct){(0,te.default)(this,Nt);var De=(0,y.default)(this,(Nt.__proto__||L()(Nt)).call(this,ct));return De.state={source:z().cloneDeep(ct.taskChecklists[ct.taskId]||[]),noDragIndex:-1,showAddItemChecklistId:""},De}return(0,R.default)(Nt,[{key:"componentWillReceiveProps",value:function(De){var _e=z().cloneDeep(De.taskChecklists[De.taskId]||[]);this.setState({source:_e,showAddItemChecklistId:De.addChecklist&&_e.length>this.state.source.length?_e[_e.length-1].checkListId:""}),De.addChecklist&&_e.length>this.state.source.length&&De.closeAddChecklist()}},{key:"componentDidMount",value:function(){$(document).on("mousedown.checklistDrag",".taskChecklistBox .taskChecklist",function(De){B.mouseOffset={left:De.clientX,top:De.clientY}})}},{key:"componentWillUnmount",value:function(){$(document).off(".checklistDrag")}},{key:"checklistBeginDrag",value:function(De,_e){var Le=this.state.source;this.dragItem=De,Le.splice(_e,1,"blank"),this.setState({source:Le})}},{key:"checklistHover",value:function(De){var _e=this.state.source;z().remove(_e,function(Le){return Le==="blank"}),_e.splice(De,0,"blank"),this.setState({source:_e})}},{key:"checklistDrop",value:function(){var De=this,_e=this.state.source,Le=this.dragItem.checkListId,rt="",Ct=void 0;_e=_e.map(function(dt,It){return dt==="blank"?(Ct=It-1,De.dragItem):dt}),Ct>=0&&(rt=_e[Ct].checkListId),this.props.dispatch((0,C.rt)(this.props.taskId,Le,rt,Ct+1)),this.setState({source:_e})}},{key:"checklistItemBeginDrag",value:function(De,_e,Le){var rt=this.state.source;this.dragItem=De,rt[Le].items.splice(_e,1,{type:"blank",status:this.dragItem.status}),this.setState({source:rt})}},{key:"checklistItemHover",value:function(De,_e){var Le=this.state.source;Le[_e].items.length<100&&(Le.forEach(function(rt){z().remove(rt.items,function(Ct){return Ct.type==="blank"})}),Le[_e].items.splice(De,0,{type:"blank",status:this.dragItem.status}),this.setState({source:Le}))}},{key:"checklistItemDrop",value:function(){var De=this,_e=this.state.source,Le=this.dragItem.itemId,rt="",Ct=0,dt=void 0;_e.forEach(function(It,bt){It.items=It.items.map(function(Ut,Xt){return Ut.type==="blank"?(Ct=bt,dt=Xt-1,De.dragItem):Ut})}),dt>=0&&(rt=_e[Ct].items[dt].itemId),this.props.dispatch((0,C._m)(this.props.taskId,Le,rt,_e[Ct].checkListId,dt+1)),this.setState({source:_e})}},{key:"noDragIndexUpdate",value:function(De){this.setState({noDragIndex:De})}},{key:"updateCheckListName",value:function(De,_e){this.props.dispatch((0,C.Q8)(this.props.taskId,De,_e))}},{key:"removeCheckList",value:function(De){var _e=this;g.Z.confirm({title:_l("\u5220\u9664\u6E05\u5355\uFF1F"),children:r.createElement("div",null,_l("\u6E05\u5355\u88AB\u5220\u9664\u540E\uFF0C\u5C06\u65E0\u6CD5\u6062\u590D\u3002")),closable:!1,onOk:function(){_e.props.dispatch((0,C.F$)(_e.props.taskId,De))}})}},{key:"addItems",value:function(De,_e){this.props.dispatch((0,C.$)(this.props.taskId,De,_e))}},{key:"updateItemName",value:function(De,_e){this.props.dispatch((0,C.g1)(this.props.taskId,De,_e))}},{key:"removeItem",value:function(De){this.props.dispatch((0,C.cl)(this.props.taskId,De))}},{key:"updateItemStatus",value:function(De,_e){this.props.dispatch((0,C.Yf)(this.props.taskId,De,_e))}},{key:"createTask",value:function(De,_e){var Le=this;U.Z.getProjectIdAndFolderIdForItemConvertTask({itemId:De}).then(function(rt){var Ct=Le.props.taskDetails,dt=Ct[Le.props.taskId].data,It=dt.projectID,bt=dt.folderID;(rt.data.projectId!==It||rt.data.folderId!==(bt||""))&&alert(_l("\u65E0\u6CD5\u5728\u5F53\u524D\u9879\u76EE\u4E0B\u521B\u5EFA\u4EFB\u52A1"),3),$.CreateTask({itemId:De,TaskName:(0,A.u1)(_e),ProjectID:rt.data.projectId,FolderID:rt.data.folderId,folderName:rt.data.folderName,callback:function(){Le.props.dispatch((0,C.Vu)(Le.props.taskId,De))}})})}},{key:"updateTaskFoldStatus",value:function(De){this.props.dispatch((0,C.KD)(this.props.taskId,De))}},{key:"render",value:function(){var De=this,_e=this.state,Le=_e.source,rt=_e.showAddItemChecklistId,Ct=this.props.taskFoldStatus[this.props.taskId]||[];return r.createElement("div",{className:"taskChecklistBox"},Le.map(function(dt,It){return r.createElement(ye,(0,N.default)({key:It,index:It,data:dt},De.props,{showAddItem:rt===dt.checkListId,noDragIndex:De.state.noDragIndex,noDragIndexUpdate:De.noDragIndexUpdate.bind(De),checklistBeginDrag:De.checklistBeginDrag.bind(De),checklistHover:De.checklistHover.bind(De),checklistDrop:De.checklistDrop.bind(De),checklistItemBeginDrag:De.checklistItemBeginDrag.bind(De),checklistItemHover:De.checklistItemHover.bind(De),checklistItemDrop:De.checklistItemDrop.bind(De),updateCheckListName:De.updateCheckListName.bind(De),removeCheckList:De.removeCheckList.bind(De),addItems:De.addItems.bind(De),updateItemName:De.updateItemName.bind(De),removeItem:De.removeItem.bind(De),updateItemStatus:De.updateItemStatus.bind(De),createTask:De.createTask.bind(De),taskFoldStatus:Ct,updateTaskFoldStatus:De.updateTaskFoldStatus.bind(De)}))}),r.createElement("div",{className:"taskDetailDragPreviewBox"}))}}]),Nt}(r.Component))||me);const xe=(0,d.$j)(function(Zt){return Zt.task})(be);var Ae=t(15759),Ne=t(61987),Me=t(75809),Fe=t(17306),Be=(0,V.Z)(f.Z),we=[_l("\u4EFB\u52A1\u5DF2\u9501\u5B9A\uFF0C\u65E0\u6CD5\u64CD\u4F5C"),_l("\u6807\u8BB0\u4E3A\u672A\u5B8C\u6210"),_l("\u4EFB\u52A1\u5DF2\u9501\u5B9A\uFF0C\u4F46\u6211\u662F\u521B\u5EFA\u8005\u6216\u8D1F\u8D23\u4EBA\u53EF\u4EE5\u64CD\u4F5C"),_l("\u6807\u8BB0\u5B8C\u6210")],Ie=function(Zt){(0,a.default)(Nt,Zt);function Nt(){var ct,De,_e,Le;(0,te.default)(this,Nt);for(var rt=arguments.length,Ct=Array(rt),dt=0;dt<rt;dt++)Ct[dt]=arguments[dt];return Le=(De=(_e=(0,y.default)(this,(ct=Nt.__proto__||L()(Nt)).call.apply(ct,[this].concat(Ct))),_e),_e.updateTaskNameKeyDown=function(It){It.keyCode===13&&(It.currentTarget.blur(),It.preventDefault())},De),(0,y.default)(_e,Le)}return(0,R.default)(Nt,[{key:"shouldComponentUpdate",value:function(De,_e){return!z().isEqual(De,this.props)}},{key:"renderOpHtml",value:function(){var De=this,_e=this.props.item,Le=_e.charge,rt=_e.taskID,Ct=_e.projectID;return r.createElement("span",{className:"Gray_9e ThemeHoverColor3 pointer w100 oaButton updateSubTaskCharge",onClick:function(){return De.props.clickOp(Ct,rt,Le.accountID)}},_l("\u66F4\u6539\u8D1F\u8D23\u4EBA"))}},{key:"render",value:function(){var De=this,_e=this.props.item,Le=_e.charge,rt=_e.status,Ct=_e.startTime,dt=_e.deadline,It=_e.actualStartTime,bt=_e.completeTime,Ut=_e.taskName,Xt=_e.auth,pn=_e.locked,tt=_e.taskID,ht=Xt===n.ZP.auth.Charger||Xt===n.ZP.auth.Member,Dt="",Ot="";return Xt===n.ZP.auth.None||Xt===n.ZP.auth.Look?rt?Dt="slideCompleteTask":pn?(Dt="slideMarkTaskLockedDisable",Ot=we[0]):Dt="slideMarkDisable":rt?(Dt="slideCompleteTask",Ot=we[1]):pn?(Dt="slideMarkTaskLocked",Ot=we[2]):(Dt="slideMarkTask",Ot=we[3]),r.createElement("li",{className:"flexRow"},r.createElement("div",{className:"subTasksStatusWidth"},r.createElement("span",{className:H()("updateTaskStatus tip-bottom-right",Dt),"data-tip":Ot,onClick:function(){return ht&&De.props.editTaskStatus(tt,rt?0:1)}})),r.createElement(x.Z,{disabled:!ht,className:"flex subTaskName",minHeight:20,maxLength:100,defaultValue:Ut,spellCheck:!1,onKeyDown:this.updateTaskNameKeyDown,onBlur:function(Kt){return De.props.updateTaskName(Kt,tt,Ut)}}),r.createElement("div",{className:"subTaskOperator"},r.createElement("span",{className:"subTaskTimer",dangerouslySetInnerHTML:{__html:(0,s.Mq)(rt,Ct,dt,It,bt)}}),r.createElement("span",{className:"subTaskMembers",onClick:function(Kt){return ht&&De.props.clickChargeAvatar(Kt,Le.accountID,tt)}},r.createElement(Ae.Z,{className:H()({gray:Le.status!==1},{opacity6:rt}),user:{userHead:Le.avatar,accountId:Le.accountID},size:26,operation:ht?this.renderOpHtml():null})),r.createElement("span",{className:"subTaskLink tip-bottom-left","data-tip":_l("\u67E5\u770B\u5B50\u4EFB\u52A1\u8BE6\u60C5\u548C\u8BC4\u8BBA"),onClick:function(){return De.props.switchTaskDetail(tt)}},_e.totalItemCount||_e.topicCount||_e.subCount?r.createElement("i",{className:"icon-task-signal Font13"}):r.createElement("i",{className:"icon-arrow-right-border"}))))}}]),Nt}(r.Component),ge=function(Zt){(0,a.default)(Nt,Zt);function Nt(ct){(0,te.default)(this,Nt);var De=(0,y.default)(this,(Nt.__proto__||L()(Nt)).call(this,ct));De.editTaskStatus=function(Le,rt){var Ct=function(It){De.props.openType===n.Oh.slide?(0,Fe.sC)(It,rt,!1):De.props.updateCallback({type:"UPDATE_TASK_STATUS",tasks:It.tasks})};(0,s.W$)(rt,function(){De.props.dispatch((0,C.hC)(De.props.taskId,rt,!1,Le,Ct))})},De.updateTaskName=function(Le,rt,Ct){var dt=z().trim(Le.currentTarget.value),It=function(){De.props.openType===n.Oh.slide?(0,Fe.U$)(rt,dt):De.props.updateCallback({type:"UPDATE_NAME",taskName:dt})};dt!==Ct&&(dt?De.props.dispatch((0,C.Sc)(De.props.taskId,dt,rt,It)):Le.currentTarget.value=Ct)},De.showAddSubTaskModule=function(){var Le=De.props.taskDetails[De.props.taskId].data;(0,A.pF)(Le.projectID).then(function(){De.setState({addSubTask:!0})})},De.clickChargeAvatar=function(Le,rt){var Ct=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",dt=De.props.taskDetails[De.props.taskId].data,It=function(Xt){De.props.openType===n.Oh.slide?(0,Fe.Fc)(Ct,Xt.avatar,Xt.accountId):De.props.updateCallback({type:"UPDATE_CHARGE",user:Xt})},bt=function(Xt){var pn=Xt[0];Ct?De.props.dispatch((0,C.rv)(De.props.taskId,pn,Ct,function(){return It(pn)})):De.setState({accountId:pn.accountId,avatar:pn.avatar})};(0,Ne.ZP)(Le.target,{sourceId:dt.taskID,projectId:dt.projectID,fromType:2,filterAccountIds:[rt],showMoreInvite:!1,includeUndefinedAndMySelf:!0,SelectUserSettings:{filterAccountIds:[rt],projectId:(0,s.Ie)(dt.projectID)?dt.projectID:"",callback:bt},selectCb:bt})},De.addTask=function(Le){var rt=De.state.accountId,Ct=De.props,dt=Ct.taskId,It=Ct.openType,bt=De.props.taskDetails[dt].data,Ut=z().trim(De.state.value),Xt=function(tt){It===n.Oh.slide&&(tt.stageID=bt.stageID,tt.taskName=tt.name,tt.parentID=dt,(0,Fe.af)(tt))};if(Le&&Le.keyCode===13&&Le.preventDefault(),$(Le||{}).add(Le.target).closest(".addSubTask").length||De.setState({addSubTask:!1}),!Ut&&Le&&Le.keyCode===13){alert(_l("\u4EFB\u52A1\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"),3);return}(!$(Le||{}).add(Le.target).closest(".addSubTask").length||Le.keyCode===13)&&Ut&&(De.props.dispatch((0,C.DE)(bt.taskID,Ut,rt,bt.projectID,Xt)),De.setState({value:""}))},De.callback=function(Le,rt){De.props.openType===n.Oh.slide?(0,Fe.Fc)(rt,Le.avatar,Le.accountId):De.props.updateCallback({type:"UPDATE_CHARGE",user:Le})},De.clickOp=function(Le,rt,Ct){(0,Me.Z)({sourceId:rt,title:_l("\u9009\u62E9\u8D1F\u8D23\u4EBA"),showMoreInvite:!1,fromType:2,SelectUserSettings:{includeUndefinedAndMySelf:!0,filterAccountIds:[Ct],projectId:(0,s.Ie)(Le)?Le:"",unique:!0,callback:function(It){var bt=It[0];De.props.dispatch((0,C.rv)(De.props.taskId,bt,rt,function(){return De.callback(bt,rt)}))}}})},De.updateTaskFoldStatus=function(){De.props.dispatch((0,C.KD)(De.props.taskId,"subTask"))};var _e=ct.taskDetails[ct.taskId].data.charge.accountID===md.global.Account.accountId;return De.state={addSubTask:ct.addSubTask,accountId:_e?"user-undefined":md.global.Account.accountId,avatar:_e?md.global.SystemAccounts.undefined.avatar:md.global.Account.avatar,value:""},De}return(0,R.default)(Nt,[{key:"componentWillReceiveProps",value:function(De){if(De.addSubTask&&(this.setState({addSubTask:De.addSubTask}),this.props.closeAddSubTask()),De.taskId!==this.props.taskId){var _e=De.taskDetails[De.taskId].data.charge.accountID===md.global.Account.accountId;this.setState({accountId:_e?"user-undefined":md.global.Account.accountId,avatar:_e?md.global.SystemAccounts.undefined.avatar:md.global.Account.avatar})}}},{key:"renderAddTask",value:function(){var De=this,_e=this.state,Le=_e.accountId,rt=_e.avatar,Ct=_e.value;return r.createElement(Be,{component:"li",className:"flexRow ThemeBGColor5 addSubTask",onClickAwayExceptions:[".selectUserBox","#dialogBoxSelectUser_container"],onClickAway:this.addTask},r.createElement("div",{className:"subTasksStatusWidth"},r.createElement("span",{className:"slideAddMarkTask cursorDefault"})),r.createElement(x.Z,{className:"flex subTaskName",minHeight:20,maxLength:100,value:Ct,isSelect:!0,spellCheck:!1,onKeyDown:function(It){return De.addTask(It)},onChange:function(It){return De.setState({value:It.replace(/[\r\n]/,"")})}}),r.createElement("div",{className:"subTaskOperator"},r.createElement("span",{className:"subTaskMembers"},r.createElement("img",{className:"subChargeAvatar",src:rt,onClick:function(It){return De.clickChargeAvatar(It,Le)}})),r.createElement("span",{className:"subTaskLink"})))}},{key:"getOperatorAuth",value:function(){var De=this.props.taskDetails[this.props.taskId].data;return De.auth===n.ZP.auth.Charger||De.auth===n.ZP.auth.Member}},{key:"render",value:function(){var De=this,_e=this.state.addSubTask,Le=this.props.taskDetails[this.props.taskId].data,rt=Le.subTask,Ct=z().includes(this.props.taskFoldStatus[this.props.taskId]||[],"subTask");return!rt.length&&!_e?null:r.createElement("div",{className:"taskContentBox"},r.createElement("div",{className:"subTaskBox"},r.createElement("span",{className:"subTaskIcon","data-tip":_l("\u5B50\u4EFB\u52A1")},r.createElement("i",{className:"icon-task-card"})),r.createElement("div",{className:"subTaskHeader Font14"},_l("\u5B50\u4EFB\u52A1"),r.createElement("span",{className:"subTaskComplete mLeft5"},z().filter(Le.subTask,function(dt){return dt.status===1}).length),"/",r.createElement("span",{className:"subTaskSum"},Le.subTask.length),r.createElement("span",{className:"subTaskMessage mLeft5","data-tip":_l("\u5982\u679C\u5206\u89E3\u540E\u7684\u4EFB\u52A1\u6BD4\u8F83\u590D\u6742\u3001\u9700\u8981\u5206\u522B\u6307\u6D3E\u8D1F\u8D23\u4EBA\uFF0C\u6216\u9700\u8981\u5728\u6BCF\u6761\u4EFB\u52A1\u4E2D\u5206\u522B\u8BB0\u5F55\u8DDF\u8FDB\u60C5\u51B5\u7684\uFF0C\u5EFA\u8BAE\u4F7F\u7528\u5B50\u4EFB\u52A1\u3002\u5176\u4ED6\u60C5\u51B5\u4E0B\uFF0C\u5EFA\u8BAE\u4F7F\u7528\u68C0\u67E5\u6E05\u5355\u6765\u505A\u5173\u952E\u7ED3\u679C\u8FFD\u8E2A\uFF0C\u652F\u6301\u5C06\u91CD\u8981\u68C0\u67E5\u9879\u4E00\u952E\u8F6C\u4E3A\u4EFB\u52A1")},r.createElement("i",{className:"icon-info Font16"})),r.createElement("span",{className:"Right","data-tip":Ct?_l("\u5C55\u5F00"):_l("\u6536\u8D77")},r.createElement("i",{className:H()("pointer ThemeColor3",Ct?"icon-arrow-down-border":"icon-arrow-up-border"),onClick:this.updateTaskFoldStatus}))),Ct?null:r.createElement(r.Fragment,null,r.createElement("ul",{className:"subTaskList"},rt.map(function(dt){return r.createElement(Ie,{key:dt.taskID,item:dt,editTaskStatus:De.editTaskStatus,updateTaskName:De.updateTaskName,clickChargeAvatar:De.clickChargeAvatar,switchTaskDetail:De.props.switchTaskDetail,clickOp:De.clickOp})}),_e&&this.renderAddTask()),!_e&&this.getOperatorAuth()&&r.createElement("span",{className:"addSubTaskBtn pointer ThemeColor3",onClick:this.showAddSubTaskModule},r.createElement("i",{className:"icon-plus"}),_l("\u6DFB\u52A0\u5B50\u4EFB\u52A1")))))}}]),Nt}(r.Component);const Re=(0,d.$j)(function(Zt){return Zt.task})(ge);var Pe=t(62521),ke=t(16469),We=t(60967),Ve,it,Ge=(it=Ve=function(Zt){(0,a.default)(Nt,Zt);function Nt(){return(0,te.default)(this,Nt),(0,y.default)(this,(Nt.__proto__||L()(Nt)).apply(this,arguments))}return(0,R.default)(Nt,[{key:"render",value:function(){var De=this,_e=this.props,Le=_e.shareUrl,rt=_e.shareMessage,Ct=_e.linkText;return r.createElement(g.Z,{visible:!0,dialogClasses:"shareFolderOrTask",title:_l("\u83B7\u53D6\u94FE\u63A5\u4E0E\u4E8C\u7EF4\u7801"),showFooter:!1,handleClose:function(){De.props.onClose?De.props.onClose():$(".shareFolderOrTask").parent().remove()}},r.createElement("div",{className:"qrCode"},r.createElement("img",{src:md.global.Config.AjaxApiUrl+"code/CreateQrCodeImage?url="+Le})),r.createElement("div",{className:"createShareDesc Font16"},rt),r.createElement("div",{className:"createShareCopy Font14"},r.createElement("span",{"data-clipboard-text":Le,onClick:function(){fe()($(".createShareCopy span").attr("data-clipboard-text")),alert(_l("\u5DF2\u7ECF\u590D\u5236\u5230\u7C98\u8D34\u677F\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528Ctrl+V \u8D34\u5230\u9700\u8981\u7684\u5730\u65B9\u53BB\u4E86\u54E6"))}},r.createElement("i",null),Ct)))}}]),Nt}(r.Component),Ve.defaultProps={shareUrl:"",shareMessage:"",linkText:""},it),pt=function(Zt){(0,a.default)(Nt,Zt);function Nt(ct){(0,te.default)(this,Nt);var De=(0,y.default)(this,(Nt.__proto__||L()(Nt)).call(this,ct));return De.state={accountId:md.global.Account.accountId,avatar:md.global.Account.avatar,visible:!0},De}return(0,R.default)(Nt,[{key:"componentDidMount",value:function(){var De=this;$(".copyTask").on("click",".checkOperation:not(.noClick)",function(){$(this).toggleClass("checked"),$(this).is($("#copyChargeUser"))&&$("#copyOperation .chargeUserBox").toggleClass("Hidden"),$(this).is($("#copySubTask"))&&$("#hasSubTasksChargeUser").toggleClass("noClick").removeClass("checked")}),$(".copyTask").on("click","#chargeUserBtn",function(){(0,Me.Z)({sourceId:De.props.taskId,title:"\u9009\u62E9\u8D1F\u8D23\u4EBA",showMoreInvite:!1,fromType:2,SelectUserSettings:{includeUndefinedAndMySelf:!0,filterAccountIds:[De.state.accountId],projectId:De.props.projectId,unique:!0,callback:function(Le){De.setState({accountId:Le[0].accountId,avatar:Le[0].avatar})}}})})}},{key:"submit",value:function(){U.Z.duplicateTask({taskID:this.props.taskId,taskName:$("#copyTaskName").val(),chargeUser:$("#copyChargeUser").hasClass("checked")?this.props.chargeUser:this.state.accountId,folderID:$("#copyFolderID").hasClass("checked"),taskDesc:$("#copyTaskDesc").hasClass("checked"),taskAtts:$("#copyTaskAtts").hasClass("checked"),tag:$("#copyCategory").hasClass("checked"),members:$("#copyMembers").hasClass("checked"),time:$("#copyDeadline").hasClass("checked"),subTask:$("#copySubTask").hasClass("checked"),checklist:$("#copyChecklist").hasClass("checked"),hasSubTasksChargeUser:$("#hasSubTasksChargeUser").hasClass("checked")}).then(function(De){De.status?alert(_l("\u590D\u5236\u6210\u529F")):errorMessage(De.error)})}},{key:"render",value:function(){var De=this;return r.createElement(g.Z,{visible:this.state.visible,onCancel:function(){return De.setState({visible:!1})},className:"copyTask",width:560,title:_l("\u590D\u5236\u4EFB\u52A1"),okText:_l("\u4FDD\u5B58\u5E76\u590D\u5236"),onOk:function(){De.submit(),De.setState({visible:!1})}},r.createElement("div",{className:"copyDesc"},_l("\u901A\u8FC7\u590D\u5236\u4EFB\u52A1\uFF0C\u60A8\u53EF\u4EE5\u5C06\u65E5\u5E38\u7684\u4EFB\u52A1\u8BA1\u5212\u5FEB\u901F\u590D\u7528")),r.createElement("div",{className:"copyTitleBox"},r.createElement("div",{className:"copyTitle"},_l("\u4EFB\u52A1\u6807\u9898")),r.createElement("input",{type:"text",id:"copyTaskName",defaultValue:this.props.name,className:"ThemeBorderColor3"})),r.createElement("div",{id:"copyOperation"},r.createElement("div",{className:"copyTitle"},_l("\u540C\u6B65\u590D\u5236")),r.createElement("ul",null,r.createElement("li",null,r.createElement("div",{className:this.props.folderID?"checked checkOperation":"noClick checkOperation",id:"copyFolderID"},r.createElement("i",{className:"operationCheckbox icon-ok ThemeBGColor3 ThemeBorderColor3"}),_l("\u6240\u5C5E\u9879\u76EE"))),r.createElement("li",null,r.createElement("div",{className:"checked checkOperation",id:"copyChecklist"},r.createElement("i",{className:"operationCheckbox icon-ok ThemeBGColor3 ThemeBorderColor3"}),_l("\u6E05\u5355"))),r.createElement("li",null,r.createElement("div",{className:"checked checkOperation",id:"copyTaskDesc"},r.createElement("i",{className:"operationCheckbox icon-ok ThemeBGColor3 ThemeBorderColor3"}),_l("\u63CF\u8FF0"))),r.createElement("li",null,r.createElement("div",{className:"checkOperation",id:"copyChargeUser"},r.createElement("i",{className:"operationCheckbox icon-ok ThemeBGColor3 ThemeBorderColor3"}),_l("\u8D1F\u8D23\u4EBA")),r.createElement("div",{className:"chargeUserBox"},r.createElement("img",{src:this.state.avatar,className:"circle chargeAvatar"}),r.createElement("i",{className:"icon-task-folder-charge pointer",id:"chargeUserBtn"}))),r.createElement("li",null,r.createElement("div",{className:"checked checkOperation",id:"copyTaskAtts"},r.createElement("i",{className:"operationCheckbox icon-ok ThemeBGColor3 ThemeBorderColor3"}),_l("\u9644\u4EF6"))),r.createElement("li",null,r.createElement("div",{className:"checkOperation",id:"copyMembers"},r.createElement("i",{className:"operationCheckbox icon-ok ThemeBGColor3 ThemeBorderColor3"}),_l("\u4EFB\u52A1\u53C2\u4E0E\u8005"))),r.createElement("li",null,r.createElement("div",{className:"checked checkOperation",id:"copyCategory"},r.createElement("i",{className:"operationCheckbox icon-ok ThemeBGColor3 ThemeBorderColor3"}),_l("\u6807\u7B7E"))),r.createElement("li",null,r.createElement("div",{className:"checkOperation",id:"copyDeadline"},r.createElement("i",{className:"operationCheckbox icon-ok ThemeBGColor3 ThemeBorderColor3"}),_l("\u8BA1\u5212\u8D77\u6B62\u65F6\u95F4")))),r.createElement("hr",null),r.createElement("ul",null,r.createElement("li",null,r.createElement("div",{className:"checked checkOperation",id:"copySubTask"},r.createElement("i",{className:"operationCheckbox icon-ok ThemeBGColor3 ThemeBorderColor3"}),_l("\u5B50\u4EFB\u52A1"),r.createElement("span",{className:"mLeft5 copyTip","data-tip":_l("\u5B50\u4EFB\u52A1\u5C06\u5305\u542B\u4EE5\u4E0A\u6240\u9009\u7684\u590D\u5236\u5185\u5BB9")},r.createElement("i",{className:"icon-knowledge-message"})))),r.createElement("li",null,r.createElement("div",{className:"checkOperation",id:"hasSubTasksChargeUser"},r.createElement("i",{className:"operationCheckbox icon-ok ThemeBGColor3 ThemeBorderColor3"}),_l("\u5B50\u4EFB\u52A1\u8D1F\u8D23\u4EBA"))))))}}]),Nt}(r.Component),ot=t(36021),vt=(0,V.Z)(f.Z),At=function(Zt){(0,a.default)(Nt,Zt);function Nt(ct){(0,te.default)(this,Nt);var De=(0,y.default)(this,(Nt.__proto__||L()(Nt)).call(this,ct));return De.checkboxRef=r.createRef(),De.taskStatusCheckboxRef=r.createRef(),De.editTaskStatus=function(){var _e=De.props,Le=_e.taskId,rt=_e.openType,Ct=De.props.taskDetails[Le].data,dt=Ct.status?0:1,It=function(Ut,Xt){if(rt===n.Oh.slide){(0,Fe.sC)(Ut,dt,Xt),Ut.tasks.forEach(function(tt){(0,Fe.dH)(tt.taskId,tt.startTime,tt.deadline,tt.actualStartTime,tt.completedTime)});var pn=Ut.taskIDs.map(function(tt){return{taskId:tt}});(0,Fe.uV)(pn)}else De.props.updateCallback({type:"UPDATE_TASK_STATUS",tasks:Ut.tasks})};(0,s.W$)(dt,function(){Ct.subTask.length?g.Z.confirm({title:dt?_l("\u6807\u8BB0\u8BE5\u4EFB\u52A1\u4E3A\u5DF2\u5B8C\u6210"):_l("\u5F53\u524D\u4EFB\u52A1\u4E0B\u6709\u5B50\u4EFB\u52A1"),okText:_l("\u786E\u5B9A"),closable:!1,children:r.createElement(We.Z,{className:"Gray_9",defaultChecked:!1,ref:De.taskStatusCheckboxRef,text:dt?_l("\u540C\u65F6\u6807\u8BB0\u8BE5\u4EFB\u52A1\u4E0B\u6240\u6709\u4EFB\u52A1\u4E3A\u5DF2\u5B8C\u6210"):_l("\u540C\u65F6\u6807\u8BB0\u8BE5\u4EFB\u52A1\u4E0B\u6240\u6709\u4EFB\u52A1\u4E3A\u672A\u5B8C\u6210")}),onOk:function(){var Ut=De.taskStatusCheckboxRef.current.state.checked;Ut&&Ct.auth!==n.ZP.auth.Charger&&(Ut=!1,alert(dt?_l("\u4EC5\u8D1F\u8D23\u4EBA\u53EF\u4E00\u952E\u6807\u8BB0\u5B8C\u6210\u6240\u6709\u5B50\u4EFB\u52A1"):_l("\u4EC5\u8D1F\u8D23\u4EBA\u53EF\u4E00\u952E\u6807\u8BB0\u672A\u5B8C\u6210\u6240\u6709\u5B50\u4EFB\u52A1"))),De.props.dispatch((0,C.hC)(Le,dt,Ut,"",It))}}):De.props.dispatch((0,C.hC)(Le,dt,!1,"",It))})},De.refresh=z().debounce(De.props.refreshDetail,500),De.addSubtask=function(){var _e=De.props.taskId,Le=De.props.taskDetails[_e].data,rt=z().includes(De.props.taskFoldStatus[_e]||[],"subTask"),Ct=function(){var It=$(".taskDetail .fromWhere").height(),bt=$(".taskDetail .taskContentBasicBox").height(),Ut=$(".taskDetail .taskDetailContent").height(),Xt=Le.subTask.length*46;$(".taskDetailScroll").nanoScroller({scrollTop:It+bt+Xt+200-Ut/2}),De.props.addSubTask()};(0,A.pF)(Le.projectID).then(function(){rt?De.props.dispatch((0,C.KD)(_e,"subTask"),setTimeout(function(){Ct()},100)):Ct()})},De.updateTaskNotice=function(){var _e=De.props.taskId,Le=De.props.taskDetails[_e].data;De.props.dispatch((0,C.tX)(_e,!Le.notice))},De.updateTaskLocked=function(){var _e=De.props,Le=_e.taskId,rt=_e.openType,Ct=De.props.taskDetails[Le].data,dt=!Ct.locked,It=function(){rt===n.Oh.slide&&(0,Fe.nP)(Le,dt)};De.props.dispatch((0,C.nf)(Le,dt,It))},De.addChecklist=function(){var _e=z().trim(De.checklistText.value);_e?(De.props.addChecklist(),De.props.dispatch((0,C.KC)(De.props.taskId,_e)),De.setState({showChecklistDialog:!1})):$(De.checklistText).addClass("createChecklistError")},De.copyTask=function(){var _e=De.props.taskId,Le=De.props.taskDetails[_e].data;De.setState({showOperator:!1}),(0,A.pF)(Le.projectID).then(function(){(0,o.render)(r.createElement(pt,{name:_l("%0-\u526F\u672C",Le.taskName),taskId:_e,folderID:Le.folderID,projectId:(0,s.Ie)(Le.projectID)?Le.projectID:"",chargeUser:Le.charge.accountID}),document.createElement("div"))})},De.printTask=function(){var _e=De.props.taskId;window.open("/print/task/"+_e),De.setState({showOperator:!1})},De.shareTask=function(){De.setState({showOperator:!1}),(0,o.render)(r.createElement(Ge,{shareUrl:md.global.Config.WebUrl+"apps/task/task_"+De.props.taskId,shareMessage:_l("\u6253\u5F00App\u626B\u4E00\u626B\uFF0C\u5728\u624B\u673A\u4E0A\u5FEB\u901F\u663E\u793A\u67E5\u770B\u4EFB\u52A1\u8BE6\u60C5"),linkText:_l("\u590D\u5236\u4EFB\u52A1\u94FE\u63A5")}),document.createElement("div"))},De.openNewPage=function(){De.setState({showOperator:!1}),window.open("/apps/task/task_"+De.props.taskId+"?"+(0,A.tQ)())},De.exitTask=function(){De.setState({showOperator:!1}),De.props.removeTaskMember(md.global.Account.accountId)},De.delTask=function(){De.setState({showOperator:!1});var _e=De.props,Le=_e.taskId,rt=_e.taskConfig,Ct=_e.openType,dt=De.props.taskDetails[Le].data;g.Z.confirm({title:_l("\u5F7B\u5E95\u5220\u9664\u4EFB\u52A1"),okText:_l("\u5220\u9664"),closable:!1,children:r.createElement("div",null,r.createElement("div",{className:"Font14 mBottom20"},_l("\u6CE8\u610F\uFF1A\u6B64\u64CD\u4F5C\u5C06\u5F7B\u5E95\u5220\u9664\u4EFB\u52A1\u6570\u636E\uFF0C\u65E0\u6CD5\u6062\u590D\u3002"),r.createElement("span",{className:"deleteFolderColor"},_l("\u8BF7\u786E\u8BA4\u60A8\u548C\u4EFB\u52A1\u7684\u5176\u4ED6\u53C2\u4E0E\u8005\u90FD\u4E0D\u518D\u9700\u8981\u4EFB\u52A1\u4E2D\u7684\u6570\u636E\u518D\u884C\u5220\u9664"))),!!dt.subTask.length&&r.createElement(We.Z,{className:"Gray_9",defaultChecked:!1,ref:De.checkboxRef,text:_l("\u540C\u65F6\u5220\u9664\u8BE5\u4EFB\u52A1\u4E0B\u7684\u6240\u6709\u5B50\u4EFB\u52A1")})),onOk:function(){var bt=dt.subTask.length?De.checkboxRef.current.state.checked:!1;!bt&&dt.subTask.length&&dt.folderID&&rt.viewType===n.ZP.folderViewType.treeView&&(0,Fe.I1)(Le,rt.listSort),U.Z.deleteTask({taskID:Le,isSubTask:bt}).then(function(Ut){if(Ut.status){alert(_l("\u5220\u9664\u6210\u529F"));var Xt=De.props.taskDetails[Le].data.parentID;De.props.dispatch((0,C.hN)(Le)),Ct===n.Oh.detail?setTimeout(function(){(0,ot.T8)("/apps/task/center?"+(0,A.tQ)())},300):(De.props.closeDetail(),Ct===n.Oh.slide?(z().remove(Ut.data,function(pn){return pn===Le}),Ut.data.unshift(Le),(0,Fe.po)(Ut.data,Xt),De.props.taskConfig.filterUserId||(0,Fe.fx)("","all")):De.props.updateCallback({type:"DELETE_TASK",taskId:Le}))}else errorMessage(Ut.error)})}})},De.state={showOperator:!1,showChecklistDialog:!1},De}return(0,R.default)(Nt,[{key:"componentDidUpdate",value:function(){this.state.showChecklistDialog&&$(this.checklistText).select()}},{key:"render",value:function(){var De=this,_e=this.state,Le=_e.showOperator,rt=_e.showChecklistDialog,Ct=this.props,dt=Ct.taskId,It=Ct.openType,bt=Ct.closeDetail,Ut=this.props.taskDetails[dt].data,Xt=Ut.auth===n.ZP.auth.Charger,pn=Ut.auth===n.ZP.auth.Member;return r.createElement("div",{className:H()("taskDetailHeader boxSizing flexRow")},r.createElement("div",{className:H()("taskDetailStatusBtn ThemeColor3 ThemeBorderColor3",{active:Ut.status},{taskDetailStatusBtnNo:!Xt&&!pn}),onClick:(Xt||pn)&&this.editTaskStatus},r.createElement("i",{className:"Font16 icon-ok mRight5"}),_l("\u6807\u8BB0\u5B8C\u6210")),r.createElement("div",{className:"flex"}),r.createElement("div",{className:"taskDetailHeaderBtn ThemeColor3",onClick:this.refresh},r.createElement("i",{className:"icon-sync Font16"}),_l("\u5237\u65B0")),(Xt||pn)&&r.createElement("div",{className:"taskDetailHeaderBtn ThemeColor3 mLeft15","data-tip":_l("\u70B9\u51FB\u6DFB\u52A0\u5B50\u4EFB\u52A1"),onClick:(Xt||pn)&&this.addSubtask},r.createElement("i",{className:"icon-task-card Font16"}),_l("\u5B50\u4EFB\u52A1")),Ut.isTaskMember&&r.createElement("div",{className:"taskDetailHeaderBtn ThemeColor3 mLeft15 tip-bottom-left","data-tip":_l("\u5173\u95ED\u540E\u5C06\u4E0D\u518D\u63A5\u6536\u6B64\u4EFB\u52A1\u6D88\u606F\u63A8\u9001\uFF08\u4F46\u4ECD\u53EF\u6536\u5230\u8BA8\u8BBA\u4E2D@\u4F60\u7684\u6D88\u606F\uFF09"),onClick:this.updateTaskNotice},r.createElement("i",{className:H()("Font16",Ut.notice?"icon-task-point-more":"icon-chat-bell-nopush")}),Ut.notice?_l("\u5DF2\u5F00\u542F\u63D0\u9192"):_l("\u5DF2\u5173\u95ED\u63D0\u9192")),Xt&&r.createElement("div",{className:"taskDetailHeaderBtn ThemeColor3 mLeft15 tip-bottom-left","data-tip":_l("\u9501\u5B9A\u540E\u4EFB\u52A1\u6210\u5458\u5C06\u65E0\u6CD5\u5B8C\u6210\u548C\u4FEE\u6539\u4EFB\u52A1\u5185\u5BB9\uFF08\u4F46\u4ECD\u53EF\u53C2\u4E0E\u4EFB\u52A1\u8BA8\u8BBA\uFF09"),onClick:this.updateTaskLocked},r.createElement("i",{className:H()("Font16",Ut.locked?"icon-task-new-locked":"icon-task-new-no-locked")}),Ut.locked?_l("\u5DF2\u9501\u5B9A"):_l("\u672A\u9501\u5B9A")),r.createElement("div",{className:"taskDetailHeaderBtn ThemeColor3 mLeft15 tip-bottom-left taskDetailHeaderMoreBtn","data-tip":_l("\u66F4\u591A\u64CD\u4F5C"),onClick:function(){return De.setState({showOperator:!Le})}},r.createElement("i",{className:"Font16 icon-moreop"})),It===n.Oh.dialog&&r.createElement("div",{className:"taskDetailHeaderBtn ThemeColor3 mLeft15 tip-bottom-left","data-tip":_l("\u5173\u95ED"),onClick:bt},r.createElement("i",{className:"Font16 icon-delete"})),r.createElement("div",{className:"taskContentShadow"}),Le&&r.createElement(Pe.Z,{className:"detaiOperator",onClickAway:function(){De.setState({showOperator:!1})},onClickAwayExceptions:[".taskDetailHeaderMoreBtn"]},(Xt||pn)&&r.createElement(ke.Z,{icon:r.createElement("i",{className:"icon-task-list"}),onClick:function(){return De.setState({showOperator:!1,showChecklistDialog:!0})}},_l("\u6DFB\u52A0\u6E05\u5355")),r.createElement(ke.Z,{icon:r.createElement("i",{className:"icon-task-label"}),onClick:function(){De.setState({showOperator:!1}),De.props.addTags()}},_l("\u6DFB\u52A0\u6807\u7B7E")),Xt||pn?r.createElement(r.Fragment,null,r.createElement(ke.Z,{icon:r.createElement("i",{className:"icon-project-new"}),onClick:function(){De.setState({showOperator:!1}),De.props.showRelationControl(n.Fz.folder)}},_l("\u5173\u8054\u9879\u76EE")),r.createElement(ke.Z,{icon:r.createElement("i",{className:"icon-task-new-parent"}),onClick:function(){De.setState({showOperator:!1}),De.props.showRelationControl(n.Fz.task)}},_l("\u5173\u8054\u6BCD\u4EFB\u52A1"))):null,r.createElement("div",{className:"detaiOperatorLine"}),r.createElement(ke.Z,{icon:r.createElement("i",{className:"icon-task-new-copy"}),onClick:this.copyTask},_l("\u590D\u5236\u4EFB\u52A1")),r.createElement(ke.Z,{icon:r.createElement("i",{className:"icon-task-new-print"}),onClick:this.printTask},_l("\u6253\u5370\u4EFB\u52A1")),r.createElement(ke.Z,{icon:r.createElement("i",{className:"icon-link2"}),onClick:this.shareTask},_l("\u83B7\u53D6\u94FE\u63A5\u4E0E\u4E8C\u7EF4\u7801")),r.createElement(ke.Z,{icon:r.createElement("i",{className:"icon-task-new-detail"}),onClick:this.openNewPage},_l("\u65B0\u9875\u9762\u6253\u5F00")),Ut.isTaskMember&&r.createElement("div",{className:"detaiOperatorLine"}),Ut.isTaskMember&&Ut.charge.accountID!==md.global.Account.accountId&&r.createElement(ke.Z,{icon:r.createElement("i",{className:"icon-task-new-exit"}),onClick:this.exitTask},_l("\u9000\u51FA\u4EFB\u52A1")),Xt&&r.createElement(ke.Z,{icon:r.createElement("i",{className:"icon-task-new-delete"}),onClick:this.delTask},_l("\u5220\u9664\u4EFB\u52A1"))),rt&&r.createElement(vt,{className:"createChecklist boderRadAll_3 boxShadow5",onClickAway:function(){return De.setState({showChecklistDialog:!1})}},r.createElement("div",{className:"createChecklistTitle Font15"},_l("\u6DFB\u52A0\u68C0\u67E5\u6E05\u5355")),r.createElement("input",{type:"text",ref:function(ht){De.checklistText=ht},className:"createChecklistText ThemeBorderColor3",maxLength:100,defaultValue:_l("\u6E05\u5355"),onKeyDown:function(ht){return ht.keyCode===13&&De.addChecklist()}}),r.createElement("span",{className:"createChecklistBtn ThemeBGColor3 boderRadAll_3 ThemeHoverBGColor2",onClick:this.addChecklist},_l("\u6DFB\u52A0"))))}}]),Nt}(r.Component);const yt=(0,d.$j)(function(Zt){return Zt.task})(At);var st=t(22108),St=t(88902),Qe=t.n(St),Xe=t(31546),$e=t(97373),Ke=t(94055),Ue=t(63355),He=t(59962),ze=t(83983),gt=void 0,Et={1:{icon:"icon-bellSchedule",text:_l("\u65E5\u7A0B\u8F6C\u4E3A\u7684\u4EFB\u52A1")},2:{icon:"icon-mingdao",text:_l("\u52A8\u6001\u8F6C\u4E3A\u7684\u4EFB\u52A1")},3:{icon:"icon-worksheet",text:_l("\u5DE5\u4F5C\u8868\u8BB0\u5F55\u8F6C\u4E3A\u7684\u4EFB\u52A1")}},ft=function(Zt){(0,a.default)(Nt,Zt);function Nt(ct){(0,te.default)(this,Nt);var De=(0,y.default)(this,(Nt.__proto__||L()(Nt)).call(this,ct));return De.switchTaskStage=function(_e){var Le=De.props,rt=Le.taskId,Ct=Le.openType,dt=De.props.taskDetails[rt].data,It=z().find(dt.stages,function(Ut){return Ut.id===_e}).name,bt=function(Xt){Ct===n.Oh.slide&&(0,Fe.ED)(_e,rt,Xt)};De.props.dispatch((0,C.Zh)(rt,_e,It,bt))},De.updateTaskNameKeyDown=function(_e){_e.keyCode===13&&(_e.currentTarget.blur(),_e.preventDefault())},De.updateTaskName=function(){var _e=De.props.taskId,Le=De.props.taskDetails[_e].data,rt=z().trim(De.state.taskName),Ct=function(){De.props.openType===n.Oh.slide?(0,Fe.U$)(_e,rt):De.props.updateCallback({type:"UPDATE_NAME",taskName:rt})};rt!==Le.taskName&&(rt?De.props.dispatch((0,C.Sc)(_e,rt,"",Ct)):De.setState({taskName:Le.taskName}))},De.updateTaskMemberStar=function(){var _e=De.props.taskId,Le=De.props.taskDetails[_e].data,rt=!Le.star,Ct=function(){(0,Fe.S0)(_e,rt)};De.props.dispatch((0,C.IX)(_e,rt,Ct))},De.clickMemberFn=function(_e,Le){var rt=De.props,Ct=rt.taskId,dt=rt.removeTaskMember,It={accountId:Le.accountID,avatar:Le.avatar,fullName:Le.fullname};switch(_e){case"updateTaskCharge":De.props.dispatch((0,C.rv)(Ct,It,"",function(){return De.afterUpdateTaskCharge(It.avatar,It.accountId)}));return;case"removeTaskMember":dt(It.accountId);return;case"addMemberAgree":De.props.dispatch((0,C.Fc)(Ct,It.accountId));return;case"addMemberRefuse":De.props.dispatch((0,C.KT)(Ct,It.accountId));return;default:return}},De.addMembers=function(_e){var Le=De.props.taskId,rt=De.props.taskDetails[Le].data,Ct=rt.member.filter(function(It){return It.type!==3}).map(function(It){return It.account.accountID}),dt=function(bt,Ut){var Xt=[],pn={};$.isFunction(Ut)?bt.forEach(function(tt){pn[tt.account]=tt.fullname}):bt.forEach(function(tt){Xt.push(tt.accountId)}),De.props.dispatch((0,C.SI)(Le,Xt,pn,Ut))};Ct=Ct.concat([rt.charge.accountID,"user-undefined"]),(0,Ne.ZP)(_e.target,{sourceId:Le,projectId:rt.projectID,fromType:2,filterAccountIds:Ct,includeUndefinedAndMySelf:!0,SelectUserSettings:{filterAccountIds:Ct,projectId:(0,s.Ie)(rt.projectID)?rt.projectID:"",callback:dt},selectCb:dt})},De.cancelAttachment=function(){De.setState({disabled:!1,attachmentData:[],kcAttachmentData:[]})},De.addTaskAttachments=function(){var _e=De.props.taskId,Le=De.state,rt=Le.isComplete,Ct=Le.disabled,dt=Le.attachmentData,It=Le.kcAttachmentData;if(!rt){alert(_l("\u6587\u4EF6\u4E0A\u4F20\u4E2D\uFF0C\u8BF7\u7A0D\u7B49"),3);return}Ct||(De.props.dispatch((0,C._N)(_e,dt,It,De.cancelAttachment)),De.setState({disabled:!0}))},De.deleteAttachmentData=function(_e){var Le=De.props.taskId;De.props.dispatch((0,C.nu)(Le,_e))},De.updateTaskSummary=function(_e){var Le=De.props.taskId,rt=De.props.taskDetails[Le].data;rt.summary!==_e&&De.props.dispatch((0,C.Bk)(Le,_e))},De.state={taskName:ct.taskDetails[ct.taskId].data.taskName,showTags:ct.taskDetails[ct.taskId].data.tags.length>0,showAttachment:!1,isComplete:!1,disabled:!1,isEditing:!1,attachmentData:[],kcAttachmentData:[]},De}return(0,R.default)(Nt,[{key:"componentDidMount",value:function(){var De=this.props.taskId,_e=this.props.taskDetails[De].data;this.bindTags(_e.tags,De)}},{key:"componentWillReceiveProps",value:function(De){var _e=De.taskDetails[De.taskId].data;if(_e.taskName!==this.state.taskName&&this.setState({taskName:_e.taskName}),gt){var Le=_e.tags.map(function(rt){return rt.tagID});z().isEqual(gt[0].selectize.items.sort(),Le.sort())||this.bindTags(_e.tags,De.taskId)}De.taskId!==this.props.taskId&&this.setState({showTags:_e.tags.length>0,showAttachment:!1,isComplete:!1,disabled:!1,isEditing:!1,attachmentData:[],kcAttachmentData:[]}),De.addTags&&(this.setState({showTags:!0},function(){$(".taskTagList .selectize-input input:last").focus()}),De.closeAddTags())}},{key:"openDetail",value:function(De,_e){if(De===1)(0,ot.T8)("/apps/calendar/detail_"+_e);else if(De===2)(0,ot.T8)("/feeddetail?itemID="+_e);else if(De===3){var Le=_e.split("|");Le.length===2?(0,ot.T8)("/worksheet/"+Le[0]+"/row/"+Le[1]):Le.length===4&&(Le[2]?(0,ot.T8)("/app/"+Le[0]+"/"+Le[1]+"/"+Le[2]+"/row/"+Le[3]):(0,ot.T8)("/worksheet/"+Le[1]+"/row/"+Le[3]))}}},{key:"renderFolder",value:function(){var De=this,_e=this.props.taskId,Le=this.props.taskDetails[_e].data,rt=Le.auth===n.ZP.auth.Charger||Le.auth===n.ZP.auth.Member,Ct=Le.stages.map(function(dt){return{text:(0,A.Qu)(dt.name),value:dt.id}});return r.createElement("div",{className:"flexRow mTop15 detailFolder"},Le.folderID?r.createElement(r.Fragment,null,r.createElement(Ke.default,{title:_l("\u6240\u5C5E\u7EC4\u7EC7\uFF1A%0",(this.props.taskDetails[this.props.taskId]||{data:{}}).data.projectName||_l("\u4E2A\u4EBA"))},r.createElement("div",{className:"taskDeatilFolderName pointer ThemeColor3 overflow_ellipsis",onClick:function(){return De.openFolder(Le.folderID,Le.folderCanLook)}},(0,A.Qu)(Le.folderName))),r.createElement("div",{className:"taskDeatilFolderStage"},r.createElement(Xe.Z,{className:H()("mLeft15",{ThemeBGColor3:rt&&!Le.parentID}),data:Ct,value:Le.stageID,onChange:this.switchTaskStage,disabled:!rt||!!Le.parentID})),r.createElement("div",{className:"flex"}),!Le.ancestors.length&&r.createElement("span",{className:"folderBtn ThemeColor3 tip-bottom-left pointer","data-tip":_l("\u91CD\u65B0\u5173\u8054\u9879\u76EE"),onClick:function(){return De.props.showRelationControl(n.Fz.folder)}},r.createElement("i",{className:"icon-edit"}))):r.createElement(r.Fragment,null,r.createElement("div",{className:H()("taskNullFolder",{"pointer ThemeColor3 ThemeBorderColor3":rt}),onClick:function(){return rt&&De.props.showRelationControl(n.Fz.folder)}},_l("\u5173\u8054\u9879\u76EE")),r.createElement("div",{className:"overflow_ellipsis mLeft20 flex detailFolderName"},Le.projectName||_l("\u4E2A\u4EBA"))))}},{key:"openFolder",value:function(De,_e){if(_e){if(De===this.props.taskConfig.folderId)return;this.props.openType!==n.Oh.slide&&this.props.closeCallback(),(0,ot.T8)("/apps/task/folder_"+De)}else(0,Fe.Al)(De)}},{key:"renderParentItem",value:function(De,_e,Le){var rt=this;return r.createElement("li",{key:_e,className:"flexRow"},r.createElement("div",{className:"Font16 overflow_ellipsis ThemeColor3 ThemeBorderColor3 pointer",onClick:function(){return rt.props.switchTaskDetail(De.taskID)}},De.taskName," >"),r.createElement("div",{className:"flex"}),Le&&r.createElement(r.Fragment,null,r.createElement("span",{className:"parentBtn ThemeColor3 tip-bottom-left pointer","data-tip":_l("\u53D6\u6D88\u5173\u8054\u4EFB\u52A1"),onClick:function(){return rt.props.relationOnSubmit("",n.Fz.task)}},r.createElement("i",{className:"icon-delete"})),r.createElement("span",{className:"parentBtn ThemeColor3 tip-bottom-left pointer","data-tip":_l("\u91CD\u65B0\u5173\u8054\u6BCD\u4EFB\u52A1"),onClick:function(){return rt.props.showRelationControl(n.Fz.task)}},r.createElement("i",{className:"icon-edit"}))))}},{key:"afterUpdateTaskCharge",value:function(De,_e){var Le=this.props,rt=Le.taskId,Ct=Le.openType;Ct===n.Oh.slide?(0,Fe.Fc)(rt,De,_e):this.props.updateCallback({type:"UPDATE_CHARGE",user:{accountId:_e,avatar:De}})}},{key:"clickChargeAvatar",value:function(De){var _e=this,Le=this.props.taskId,rt=this.props.taskDetails[Le].data,Ct=function(It){var bt=It[0];_e.props.dispatch((0,C.rv)(Le,bt,"",function(){return _e.afterUpdateTaskCharge(bt.avatar,bt.accountId)}))};(0,Ne.ZP)(De.target,{sourceId:Le,projectId:rt.projectID,fromType:2,filterAccountIds:[rt.charge.accountID],showMoreInvite:!1,includeUndefinedAndMySelf:!0,SelectUserSettings:{filterAccountIds:[rt.charge.accountID],projectId:(0,s.Ie)(rt.projectID)?rt.projectID:"",callback:Ct},selectCb:Ct})}},{key:"renderChargeOpHtml",value:function(){var De=this,_e=this.props.taskId,Le=this.props.taskDetails[_e].data;return r.createElement("span",{className:"Gray_9e ThemeHoverColor3 pointer w100 oaButton updateTaskCharge",onClick:function(){(0,Me.Z)({sourceId:_e,title:_l("\u9009\u62E9\u8D1F\u8D23\u4EBA"),showMoreInvite:!1,fromType:2,SelectUserSettings:{includeUndefinedAndMySelf:!0,filterAccountIds:[Le.charge.accountID],projectId:(0,s.Ie)(Le.projectID)?Le.projectID:"",unique:!0,callback:function(dt){var It=dt[0];De.afterUpdateTaskCharge(It.avatar,It.accountId),De.props.dispatch((0,C.rv)(_e,It,""))}}})}},_l("\u66F4\u6539\u8D1F\u8D23\u4EBA"))}},{key:"renderMemberItem",value:function(De,_e,Le){return De.type!==0||De.status===2?null:r.createElement("span",{key:_e,className:"membersListItem"},De.status===1&&r.createElement("span",{className:"maskApplyMemberBg"}),r.createElement(Ae.Z,{className:H()({gray:De.account.status!==1}),user:{userHead:De.account.avatar,accountId:De.account.accountID},size:26,secretType:1,operation:Le||De.account.accountID===md.global.Account.accountId?this.renderMemberOpHtml(De.account,Le,De.status===1):null}))}},{key:"renderMemberOpHtml",value:function(De,_e,Le){var rt=this;return!_e&&md.global.Account.accountId===De.accountId?r.createElement("span",{className:"Gray_9e ThemeHoverColor3 pointer w100 oaButton removeTaskMember",onClick:function(){return rt.clickMemberFn("removeTaskMember",De)}},_l("\u9000\u51FA\u4EFB\u52A1")):Le?r.createElement(r.Fragment,null,r.createElement("span",{className:"Gray_9e ThemeHoverColor3 pointer oaButton addMemberAgree",onClick:function(){return rt.clickMemberFn("addMemberAgree",De)}},_l("\u540C\u610F")),r.createElement("span",{className:"Gray_9e ThemeHoverColor3 pointer oaButton addMemberRefuse",onClick:function(){return rt.clickMemberFn("addMemberRefuse",De)}},_l("\u62D2\u7EDD"))):r.createElement(r.Fragment,null,r.createElement("span",{className:"Gray_9e ThemeHoverColor3 pointer oaButton updateTaskCharge",onClick:function(){return rt.clickMemberFn("updateTaskCharge",De)}},_l("\u8BBE\u4E3A\u8D1F\u8D23\u4EBA")),r.createElement("span",{className:"Gray_9e ThemeHoverColor3 pointer oaButton removeTaskMember",onClick:function(){return rt.clickMemberFn("removeTaskMember",De)}},md.global.Account.accountId===De.accountId?_l("\u9000\u51FA\u4EFB\u52A1"):_l("\u79FB\u51FA\u4EFB\u52A1")))}},{key:"bindTags",value:function(De,_e){var Le=this,rt=[],Ct=[];De.forEach(function(dt){rt.push({text:dt.tagName,id:dt.tagID,color:dt.color}),Ct.push(dt.tagID)}),$(".taskTagBox:last").html('<input type="text" class="taskTagList" value="" tabIndex="-1" style="display: none;" />'),gt=$(".taskTagList:last").selectize({valueField:"id",plugins:["remove_button"],delimiter:",",persist:!1,placeholder:_l("+ \u6DFB\u52A0\u6807\u7B7E"),create:function(It){return{id:"createNewTagsID",text:It}},options:rt,items:Ct,preload:"focus",render:{option:function(It,bt){return'<div class="option"><span class="tagsIcon" style="background:'+(It.color||"transparent")+'"></span>'+bt(It.text)+"</div>"},item:function(It,bt){return'<div class="item selectizeiItem"><span class="tagsIcon" style="background:'+(It.color||"transparent")+";width:"+(It.color?"10px":"0px")+'"></span><span class="tagName">'+bt(It.text)+"</span></div>"},option_create:function(It,bt){return'<div class="create">'+_l("\u521B\u5EFA\u6807\u7B7E")+"<strong>"+bt(It.input)+"</strong></div>"}},load:function(It,bt){Le.getTags(It,bt)},onItemAdd:function(It,bt){var Ut=bt.find(".tagName").text(),Xt=function(tt){tt?It||gt[0].selectize.updateOption("createNewTagsID",{id:tt.id,text:tt.value,color:tt.extra}):gt[0].selectize.removeOption(It||"createNewTagsID")};Le.props.dispatch((0,C.yB)(_e,It,Ut,Xt))},onDelete:function(It){$(".taskTagList .selectize-input input:last").blur(),Le.props.dispatch((0,C.rU)(_e,It[0],function(){var bt=gt[0].selectize;bt.addOption([bt.options[It[0]]])}))}})}},{key:"getTags",value:function(De,_e){var Le=this.props.taskId,rt=this.props.taskDetails[Le].data,Ct=rt.tags.map(function(dt){return dt.tagID});U.Z.getTagsByTaskID({taskID:Le,keywords:De}).then(function(dt){var It=gt[0].selectize||{};$.map(Qe()(It.options),function(Ut){Ct.indexOf(It.options[Ut].id)<0&&It.removeOption(Ut)});var bt=[];$.map(dt.data,function(Ut){bt.push({text:Ut.tagName,id:Ut.tagID,color:Ut.color})}),_e(bt)})}},{key:"render",value:function(){var De=this,_e=this.state,Le=_e.taskName,rt=_e.showTags,Ct=_e.showAttachment,dt=_e.attachmentData,It=_e.kcAttachmentData,bt=_e.isEditing,Ut=this.props.taskId,Xt=this.props.taskDetails[Ut].data,pn=Xt.auth===n.ZP.auth.Charger||Xt.auth===n.ZP.auth.Member;return r.createElement(r.Fragment,null,Xt.sourceId&&r.createElement("div",{className:"fromWhere flexRow"},r.createElement("i",{className:H()("mRight10 Font16",Et[Xt.sourceType].icon)}),r.createElement("span",{className:"ThemeColor3 pointer",onClick:function(){return De.openDetail(Xt.sourceType,Xt.sourceId)}},Et[Xt.sourceType].text)),r.createElement("div",{className:"taskContentBox taskContentBasicBox"},this.renderFolder(),r.createElement("ul",{className:"parentTaskList"},Xt.ancestors.map(function(tt,ht){return De.renderParentItem(tt,ht,pn&&ht===Xt.ancestors.length-1)})),r.createElement("div",{className:"flexRow mTop15"},r.createElement("span",{className:"chargeAvatar",onClick:function(ht){return pn&&De.clickChargeAvatar(ht)}},r.createElement(Ae.Z,{className:H()({gray:Xt.charge.status!==1},{opacity6:Xt.status}),user:{userHead:Xt.charge.avatar,accountId:Xt.charge.accountID},size:32,operation:pn?this.renderChargeOpHtml():null})),r.createElement(x.Z,{disabled:!pn,className:"flex detailTaskName",minHeight:24,maxLength:100,value:Le,spellCheck:!1,onChange:function(ht){return De.setState({taskName:ht.replace(/[\r\n]/,"")})},onKeyDown:this.updateTaskNameKeyDown,onBlur:this.updateTaskName}),r.createElement("span",{className:"detailStar tip-bottom-left","data-tip":Xt.star?_l("\u79FB\u9664\u661F\u6807"):_l("\u6DFB\u52A0\u661F\u6807"),onClick:this.updateTaskMemberStar},r.createElement("i",{className:Xt.star?"icon-task-star":"icon-star-hollow"}))),r.createElement("div",{className:"taskContentBoxBG mTop10"},r.createElement("div",{className:"detailSummary"},r.createElement("i",{className:"icon-edit taskContentIcon Hand",onClick:function(){pn&&De.setState({isEditing:!0})}}),bt?r.createElement("div",{className:"flexColumn"},r.createElement(Ue.Z,{id:Ut,maxWidth:550,data:Xt.summary||"",onActualSave:function(ht){return De.cacheSummary=ht},className:H()("taskDetailEdit appIntroDescriptionEditor"),maxHeight:500,dropdownPanelPosition:{right:"initial"}}),r.createElement("div",{className:"flexRow taskDetailEditBtn alignItemsCenter"},r.createElement("div",{className:"flex"}),r.createElement("span",{className:"Gray_9e ThemeHoverColor3 mRight24",onClick:function(){return De.setState({isEditing:!1})}},_l("\u53D6\u6D88")),r.createElement("span",{className:"mRight16 taskDetailEditBtnSave ThemeBGColor3 ThemeHoverBGColor2",onClick:function(){De.updateTaskSummary(De.cacheSummary),De.setState({isEditing:!1})}},_l("\u4FDD\u5B58")))):r.createElement(Ue.Z,{id:Ut,className:"taskDetailEdit",dropdownPanelPosition:{right:"initial"},data:Xt.summary,disabled:!0,minHeight:40,maxHeight:500,placeholder:pn?_l("\u6DFB\u52A0\u63CF\u8FF0"):_l("\u672A\u6DFB\u52A0\u63CF\u8FF0"),onClickNull:function(ht){pn&&De.setState({isEditing:!0})}})),r.createElement("div",{className:"detailAtts"},r.createElement("i",{className:"icon-ic_attachment_black taskContentIcon"}),r.createElement("div",null,!pn&&!Xt.attachments.length&&r.createElement("span",{className:"detailAttsNull"},_l("\u65E0\u4E0A\u4F20\u9644\u4EF6")),pn&&r.createElement(ze.Z,{canAddLink:!0,minWidth:130,onUploadComplete:function(ht){return De.setState({isComplete:ht})},temporaryData:dt,kcAttachmentData:It,onTemporaryDataUpdate:function(ht){return De.setState({attachmentData:ht})},onKcAttachmentDataUpdate:function(ht){return De.setState({kcAttachmentData:ht})},getPopupContainer:function(){return document.querySelector(".taskDetailContent .nano-content")},onCancel:this.cancelAttachment,onOk:this.addTaskAttachments},r.createElement("span",{className:"detailAttsBtn ThemeColor3"},_l("\u6DFB\u52A0\u9644\u4EF6"))),r.createElement(He.Z,{isUpload:!1,isDeleteFile:pn,showAttInfo:!1,attachmentData:Xt.attachments,onDeleteAttachmentData:this.deleteAttachmentData}))),r.createElement("div",{className:H()("detailTaskLable",{Hidden:!rt})},r.createElement("i",{className:"icon-task-label taskContentIcon"}),r.createElement("div",{className:"w100 taskTagBox"})),r.createElement("div",{className:"taskMembers"},r.createElement("span",{className:"taskContentIcon tip-bottom-right","data-tip":_l("\u4EFB\u52A1\u53C2\u4E0E\u8005")},r.createElement("i",{className:"icon-group"})),r.createElement("div",{className:"membersList"},Xt.member.map(function(tt,ht){return De.renderMemberItem(tt,ht,pn)}),pn&&r.createElement("span",{className:"ThemeColor3 detailAddMember","data-tip":_l("\u6DFB\u52A0\u4EFB\u52A1\u53C2\u4E0E\u8005"),onClick:this.addMembers},r.createElement("i",{className:"icon-task-add-member-circle"})))))))}}]),Nt}(r.Component);const qe=(0,d.$j)(function(Zt){return Zt.task})(ft);var nt=t(662),Ze=t(30381),et=t.n(Ze),ut={nostart:-1,processing:0,completed:1},xt={"-1":_l("\u672A\u5F00\u59CB"),0:_l("\u8FDB\u884C\u4E2D"),1:_l("\u5DF2\u5B8C\u6210")},wt={gray:"#9e9e9e",blue:"#2196f3",green:"#30af00",red:"#ff0000",yellow:"#ffa414"},kt=function(Zt){(0,a.default)(Nt,Zt);function Nt(ct){return(0,te.default)(this,Nt),(0,y.default)(this,(Nt.__proto__||L()(Nt)).call(this,ct))}return(0,R.default)(Nt,[{key:"getTaskStatus",value:function(De,_e,Le,rt,Ct){var dt=(0,s.Xn)(),It={},bt=void 0;return De===ut.completed?(It.status=ut.completed,Le?(bt=Math.ceil((et()(Ct)-et()(Le))/60/60/1e3),bt===0?(It.text=_l("\u6309\u65F6\u5B8C\u6210"),It.color=wt.green):bt<0?(bt=Math.abs(bt),It.text=bt<24?_l("\u63D0\u524D%0\u5C0F\u65F6",bt):_l("\u63D0\u524D%0\u5929",Math.floor(bt/24)),It.color=wt.green):(It.text=bt<24?_l("\u903E\u671F%0\u5C0F\u65F6",bt):_l("\u903E\u671F%0\u5929",Math.floor(bt/24)),It.color=wt.red)):(It.text="",It.color=""),It):_e&&(!rt||et()(dt)<et()(rt))?(It.status=ut.nostart,bt=Math.ceil((et()(dt)-et()(_e))/60/60/1e3),bt===0?(It.text=_l("\u5373\u5C06\u5F00\u59CB"),It.color=wt.blue):bt<0?(bt=Math.abs(bt),It.text=this.formatStartTimeText(bt),It.color=bt<24?wt.blue:wt.gray):Le&&et()(dt)>et()(Le)?(bt=Math.ceil((et()(dt)-et()(Le))/60/60/1e3),It.text=bt<24?_l("\u903E\u671F%0\u5C0F\u65F6",bt):_l("\u903E\u671F%0\u5929",Math.floor(bt/24)),It.color=wt.red):(It.text=bt<24?_l("\u5EF6\u671F%0\u5C0F\u65F6",bt):_l("\u5EF6\u671F%0\u5929",Math.floor(bt/24)),It.color=wt.yellow),It):(It.status=ut.processing,It.text="",It.color="",Le&&(bt=Math.ceil((et()(dt)-et()(Le))/60/60/1e3),bt===0?(It.text=_l("\u5373\u5C06\u622A\u6B62"),It.color=wt.blue):bt<0?(bt=Math.abs(bt),It.text=this.formatEndTimeText(bt),It.color=bt<24?wt.blue:wt.gray):(It.text=bt<24?_l("\u903E\u671F%0\u5C0F\u65F6",bt):_l("\u903E\u671F%0\u5929",Math.floor(bt/24)),It.color=wt.red)),It)}},{key:"formatStartTimeText",value:function(De){var _e=Math.floor(De/24/365),Le=Math.floor(De/24/30),rt=Math.floor(De/24);return _e>0?_l("%0\u5E74\u540E\u5F00\u59CB",_e):Le>0?_l("%0\u4E2A\u6708\u540E\u5F00\u59CB",Le):rt>0?_l("%0\u5929\u540E\u5F00\u59CB",rt):_l("%0\u5C0F\u65F6\u540E\u5F00\u59CB",De)}},{key:"formatEndTimeText",value:function(De){var _e=Math.floor(De/24/365),Le=Math.floor(De/24/30),rt=Math.floor(De/24);return _e>0?_l("\u8FD8\u5269%0\u5E74",_e):Le>0?_l("\u8FD8\u5269%0\u4E2A\u6708",Le):rt>0?_l("\u8FD8\u5269%0\u5929",rt):_l("\u8FD8\u5269%0\u5C0F\u65F6",De)}},{key:"contrastActualOrPlan",value:function(De,_e){var Le=Math.ceil((et()(_e)-et()(De))/60/60/1e3),rt="";return Le===0?rt=_l("\u6309\u65F6\u5F00\u59CB"):Le<0?(Le=Math.abs(Le),rt=Le<24?_l("\u65E9\u4E8E\u8BA1\u5212%0\u5C0F\u65F6",Le):_l("\u65E9\u4E8E\u8BA1\u5212%0\u5929",Math.floor(Le/24))):rt=Le<24?_l("\u665A\u4E8E\u8BA1\u5212%0\u5C0F\u65F6",Le):_l("\u665A\u4E8E\u8BA1\u5212%0\u5929",Math.floor(Le/24)),rt}},{key:"taskProcessLines",value:function(De,_e,Le,rt,Ct){var dt=(0,s.Xn)(),It=(et()(Le)-et()(_e))/60/1e3,bt={yellow:{left:0,width:0},blue:{left:0,width:0},green:{left:0,width:0},red:{left:0,width:0}};return _e&&Le&&et()(dt)>et()(_e)&&(!rt&&!De||et()(rt)>et()(_e))&&(rt&&et()(dt)>et()(rt)?bt.yellow.width=(et()(rt)-et()(_e))/60/1e3/It:bt.yellow.width=(et()(dt)-et()(_e))/60/1e3/It,bt.yellow.width>1&&(bt.yellow.width=1)),De?bt.yellow.width>0?(bt.green.left=bt.yellow.width,bt.green.width=(et()(Ct)-et()(rt))/60/1e3/It,bt.green.width+bt.yellow.width>1&&(bt.green.width=1-bt.yellow.width)):!_e||!Le?bt.green.width=1:(bt.green.width=(et()(Ct)-et()(_e))/60/1e3/It,bt.green.width>1&&(bt.green.width=1)):Le&&et()(dt)>et()(Le)?bt.yellow.width<1?(bt.red.left=bt.yellow.width,bt.red.width=1-bt.yellow.width):bt.yellow.width===0&&(bt.red.left=0,bt.red.width=1):rt&&et()(dt)>et()(rt)&&(bt.blue.left=bt.yellow.width,et()(rt)<et()(_e)?bt.blue.width=(et()(dt)-et()(_e))/60/1e3/It:bt.blue.width=(et()(dt)-et()(rt))/60/1e3/It,bt.blue.width+bt.yellow.width>1&&(bt.blue.width=1-bt.yellow.width)),bt}},{key:"updatePlanTime",value:function(De,_e){var Le=this,rt=this.props,Ct=rt.taskId,dt=rt.openType,It=this.props.taskDetails[Ct].data,bt=function(Xt){dt===n.Oh.slide?(0,Fe.uV)(Xt):Le.props.updateCallback({type:"UPDATE_TASK_PLAN_TIME",tasks:Xt})};_e?et()(De)>et()(It.deadline)?alert(_l("\u8BA1\u5212\u5F00\u59CB\u65F6\u95F4\u4E0D\u80FD\u665A\u4E8E\u8BA1\u5212\u7ED3\u675F\u65F6\u95F4"),2):et()(De).isSame(et()(It.startTime))||this.props.dispatch((0,C.BC)(Ct,De,It.deadline,bt)):et()(De)<et()(It.startTime)?alert(_l("\u8BA1\u5212\u7ED3\u675F\u65F6\u95F4\u4E0D\u80FD\u65E9\u4E8E\u8BA1\u5212\u5F00\u59CB\u65F6\u95F4"),2):et()(De).isSame(et()(It.deadline))||this.props.dispatch((0,C.BC)(Ct,It.startTime,De,bt))}},{key:"updateTaskActualStartTime",value:function(De){var _e=this,Le=this.props,rt=Le.taskId,Ct=Le.openType,dt=this.props.taskDetails[rt].data,It=function(){Ct===n.Oh.slide?((0,Fe.dH)(rt,dt.startTime,dt.deadline,De,dt.completeTime),(0,Fe.uV)([{taskId:rt}])):_e.props.updateCallback({type:"UPDATE_TASK_ACTUAL_TIME",time:De})};et()(De).isSame(et()(dt.actualStartTime))||this.props.dispatch((0,C.bY)(rt,De,It))}},{key:"updateCompletedTime",value:function(De){var _e=this,Le=this.props.taskId,rt=this.props.taskDetails[Le].data,Ct=function(){openType===n.Oh.slide?((0,Fe.dH)(Le,rt.startTime,rt.deadline,rt.actualStartTime,De),(0,Fe.uV)([{taskId:Le}])):_e.props.updateCallback({type:"UPDATE_TASK_COMPLETED_TIME",time:De})};et()(De).isSame(et()(rt.completeTime))||this.props.dispatch((0,C.IS)(Le,De))}},{key:"getTodayBorderNum",value:function(De){var _e=$(".taskDetail").width()-176;return{left:(De.blue.width+De.yellow.width)*_e,right:(1-De.blue.width-De.yellow.width)*_e}}},{key:"render",value:function(){var De=this,_e=this.props.taskId,Le=this.props.taskDetails[_e].data,rt=Le.auth===n.ZP.auth.Charger||Le.auth===n.ZP.auth.Member,Ct=this.getTaskStatus(Le.status,Le.startTime,Le.deadline,Le.actualStartTime,Le.completeTime),dt=Ct.status,It=Ct.text,bt=Ct.color,Ut=this.taskProcessLines(Le.status,Le.startTime,Le.deadline,Le.actualStartTime,Le.completeTime);return r.createElement("div",{className:"detailTime flexRow"},r.createElement("div",{className:"mRight10 detailTimeIcon"},r.createElement("i",{className:H()({"icon-watch_later":dt===ut.nostart},{"icon-go_out":dt===ut.processing},{"icon-check_circle":dt===ut.completed})})),r.createElement("div",{className:"detailTimeLabel"},r.createElement("div",{className:"Font17"},xt[dt.toString()]),r.createElement("div",{style:{color:bt}},It)),r.createElement("div",{className:"flex"},r.createElement("div",{className:"flexRow"},r.createElement("div",{className:"Font15 detailTimeMs"},_l("\u5F00\u59CB\uFF1A")),r.createElement("div",{className:H()("Font15",{detailTimeNoSet:!Le.startTime},{detailTimeDate:rt})},r.createElement(nt.Z,{selectedValue:Le.startTime||et()((0,s.Xn)()).format("YYYY-MM-DD HH:00"),max:Le.deadline?et()(Le.deadline).add(-1,"h"):null,timePicker:!0,timeMode:"hour",disabled:!rt,onOk:function(pn){return De.updatePlanTime(pn.format("YYYY-MM-DD HH:00"),!0)},onClear:function(){return De.updatePlanTime("",!0)}},Le.startTime?(0,s.WQ)(et()(Le.startTime),!0).text:_l("\u8BBE\u7F6E\u5F00\u59CB\u65F6\u95F4"))),r.createElement("div",{className:"flex"}),r.createElement("div",{className:"Font15 detailTimeMs"},_l("\u7ED3\u675F\uFF1A")),r.createElement("div",{className:H()("Font15",{detailTimeNoSet:!Le.deadline},{detailTimeDate:rt})},r.createElement(nt.Z,{selectedValue:Le.deadline||et()((0,s.Xn)()).add(1,"h").format("YYYY-MM-DD HH:00"),min:Le.startTime?et()(Le.startTime).add(1,"h"):null,timePicker:!0,timeMode:"hour",disabled:!rt,onOk:function(pn){return De.updatePlanTime(pn.format("YYYY-MM-DD HH:00"))},onClear:function(){return De.updatePlanTime("")}},Le.deadline?(0,s.WQ)(et()(Le.deadline),!0).text:_l("\u8BBE\u7F6E\u7ED3\u675F\u65F6\u95F4")))),r.createElement("div",{className:"detailTimeLines"},Qe()(Ut).map(function(Xt,pn){return Ut[Xt].width===0?null:r.createElement("div",{key:pn,className:H()("detailTimeLine","detailTimeLine-"+Xt),style:{left:Ut[Xt].left*100+"%",width:Ut[Xt].width*100+"%"}})}),Ut.blue.width>0?r.createElement("div",{className:H()("detailTimeLineToday",{"tip-bottom-left":this.getTodayBorderNum(Ut).right<100}),"data-tip":_l("\u4ECA\u5929 %0",et()((0,s.Xn)()).format("MMMDo")),style:{borderLeftWidth:this.getTodayBorderNum(Ut).left,borderRightWidth:this.getTodayBorderNum(Ut).right}},r.createElement("span",null)):null),r.createElement("div",{className:"flexRow"},Le.actualStartTime||Le.completeTime?r.createElement(r.Fragment,null,r.createElement("div",{className:"detailTimeRealMs"},_l("\u5B9E\u9645\u5F00\u59CB\u4E8E")),r.createElement(nt.Z,{selectedValue:Le.actualStartTime,max:Le.completeTime?et()(Le.completeTime).add(-1,"h"):null,timePicker:!0,timeMode:"hour",disabled:!rt,onOk:function(pn){return De.updateTaskActualStartTime(pn.format("YYYY-MM-DD HH:00"))},onClear:function(){return De.updateTaskActualStartTime("")}},r.createElement("span",{className:H()("mLeft5 mRight5 detailTimeRealBold detailTimeRealColor",{detailTimeRealStartColor:Ut.yellow.width>0},{detailTimeRealLine:rt})},Le.actualStartTime?(0,s.WQ)(et()(Le.actualStartTime),!0).text:"...")),r.createElement("div",{className:"detailTimeRealMs"},Le.actualStartTime&&this.contrastActualOrPlan(Le.startTime,Le.actualStartTime))):Le.startTime?r.createElement("div",{className:H()("detailTimeNowStart ThemeColor3 ThemeBorderColor3",{"pointer ThemeHoverColor2 ThemeHoverBorderColor2":rt}),onClick:function(){return rt&&De.updateTaskActualStartTime(et()((0,s.Xn)()).format("YYYY-MM-DD HH:00"))}},_l("\u73B0\u5728\u5F00\u59CB")):null,r.createElement("div",{className:"flex",style:{minHeight:22}}),Le.completeTime?r.createElement(r.Fragment,null,r.createElement("div",{className:"detailTimeRealMs"},_l("\u5B9E\u9645\u7ED3\u675F\u4E8E")),r.createElement(nt.Z,{selectedValue:Le.completeTime,min:Le.actualStartTime?et()(Le.actualStartTime).add(1,"h"):null,timePicker:!0,timeMode:"hour",disabled:!rt,allowClear:!1,onOk:function(pn){return De.updateCompletedTime(pn.format("YYYY-MM-DD HH:00"))}},r.createElement("span",{className:H()("mLeft5 detailTimeRealBold detailTimeRealColor",{detailTimeRealEndColor:Le.deadline&&et()(Le.completeTime)>et()(Le.deadline)},{detailTimeRealLine:rt})},(0,s.WQ)(et()(Le.completeTime),!0).text))):null)))}}]),Nt}(r.Component);const Rt=(0,d.$j)(function(Zt){return Zt.task})(kt);var jt=t(63239),fn=t.n(jt),Mt=t(24538),sn=t(46826),on=function(Zt){(0,a.default)(Nt,Zt);function Nt(ct){(0,te.default)(this,Nt);var De=(0,y.default)(this,(Nt.__proto__||L()(Nt)).call(this,ct));return De.updateFieldsData=function(_e){var Le=_e.value,rt=_e.controlId,Ct=_e.isBlur,dt=De.fields.state.errorItems,It=De.fields.getSubmitData({silent:!0}),bt=It.data,Ut=bt.find(function(An){return An.controlId===rt}),Xt=De.props.taskControls[De.props.taskId],pn=z().find(Xt,function(An){return An.controlId===rt});if(rt)if(Ct)!dt.find(function(An){return An.controlId===rt})&&Ut.value!==pn.value&&De.updateControlValue(rt,Ut.value);else{if(z().includes([9,11],Ut.type)){var tt=JSON.parse(Ut.value)[0]||"";De.updateControlValue(rt,Ut.type===9&&tt===pn.value?"":tt)}if(Ut.type===10){var ht="",Dt=[];JSON.parse(Ut.value).forEach(function(An){ht?ht.length>An.length?(Dt=ht.split(""),Dt.splice(ht.length-An.length,1,"1"),ht=Dt.join("")):ht=An.substr(0,An.length-ht.length)+ht:ht=An}),De.updateControlValue(rt,ht)}if(Ut.type===14){var Ot=JSON.parse(Ut.value),Ht=Ot.attachments,Kt=Ot.knowledgeAtts,dn=Ot.attachmentData,Cn=JSON.parse(pn.value);if(dn.length!==Cn.length){var Rn=void 0;Cn.forEach(function(An){dn.find(function(Yn){return Yn.fileID!==An.fileID})&&(Rn=An)}),De.deleteFile(rt,Rn,dn)}else Ht.length+Kt.length&&De.updateControlValue(rt,fn()(Ht),fn()(Kt),!0)}if(z().includes([15,16,28],Ut.type)&&De.updateControlValue(rt,Ut.value),z().includes([19,23,24],Ut.type)){var gn=JSON.parse(Ut.value),wn=gn.code,On=gn.name;On!==pn.value&&De.updateControlValue(rt,wn,On)}Ut.type===21&&De.updateRelationValue(rt,JSON.parse(Ut.value))}},De.updateTaskFoldStatus=function(){De.props.dispatch((0,C.KD)(De.props.taskId,"control"))},De.state={flag:+new Date,controlData:[]},De}return(0,R.default)(Nt,[{key:"componentDidMount",value:function(){this.formatData(this.props.taskControls[this.props.taskId]||[])}},{key:"componentWillReceiveProps",value:function(De){z().isEqual(De.taskControls[De.taskId],this.props.taskControls[this.props.taskId])||this.formatData(De.taskControls[De.taskId]||[])}},{key:"formatData",value:function(De){var _e=this.props.taskId,Le=this.props.taskDetails[_e].data.auth===n.ZP.auth.Charger||this.props.taskDetails[_e].data.auth===n.ZP.auth.Member;De=z().cloneDeep(De),De.forEach(function(rt){if(z().includes([9,11],rt.type)&&(rt.value=fn()([rt.value])),rt.type===10){for(var Ct=[],dt=0;dt<rt.value.length;dt++)rt.value.substr(dt,1)!=="0"&&Ct.push("1"+rt.value.slice(dt+1).replace(/1/g,0));rt.value=fn()(Ct)}rt.type===14&&(rt.value={attachmentData:JSON.parse(rt.value),attachments:[],knowledgeAtts:[]},rt.value=fn()(rt.value)),z().includes([19,23,24],rt.type)&&(rt.value=fn()({code:"",name:rt.value})),rt.type===21&&(rt.value=JSON.parse(rt.value),rt.value.forEach(function(It,bt){It.suffix=bt}),rt.value=fn()(rt.value)),rt.advancedSetting={},rt.disabled=!Le}),this.setState({flag:+new Date,controlData:De})}},{key:"deleteFile",value:function(De,_e,Le){var rt=this,Ct=this.props.taskId;(0,sn.OW)(_e.docVersionID,_e.fileID,_e.sourceID,"",3,void 0,_e.originalFilename+_e.ext).then(function(dt){alert(_l("\u5220\u9664\u6210\u529F")),rt.props.dispatch((0,C.ur)(Ct,De,Le))}).catch(function(){alert(_l("\u5220\u9664\u6587\u4EF6\u5931\u8D25"),3)})}},{key:"updateRelationValue",value:function(De,_e){var Le=this.props.taskControls[this.props.taskId],rt=JSON.parse(z().find(Le,function(bt){return bt.controlId===De}).value),Ct={},dt=void 0,It=void 0;_e.length>rt.length?(dt=_e[_e.length-1],Ct.isd=!1):(rt.forEach(function(bt,Ut){z().find(_e,function(Xt){return Xt.suffix===Ut})||(dt=bt,It=Ut)}),Ct.isd=!0),Ct.type=dt.type,Ct.sid=dt.sid,Ct.sidext=dt.sidext,this.updateControlValue(De,fn()(Ct),It)}},{key:"updateControlValue",value:function(De,_e){var Le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",rt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;this.props.dispatch((0,C.t5)(this.props.taskId,De,_e,Le,rt))}},{key:"render",value:function(){var De=this,_e=this.state,Le=_e.flag,rt=_e.controlData,Ct=z().includes(this.props.taskFoldStatus[this.props.taskId]||[],"control");return rt.length?r.createElement("div",{className:"taskContentBox mTop10"},r.createElement("div",{className:H()("flexRow taskControlHeader",{taskControlHeaderShow:!Ct})},r.createElement("i",{className:"icon-task-extension"}),_l("\u81EA\u5B9A\u4E49\u5185\u5BB9"),r.createElement("div",{className:"flex"}),r.createElement("span",{className:"taskDetailFold","data-tip":Ct?_l("\u5C55\u5F00"):_l("\u6536\u8D77")},r.createElement("i",{className:H()("pointer ThemeColor3",Ct?"icon-arrow-down-border":"icon-arrow-up-border"),onClick:this.updateTaskFoldStatus}))),!Ct&&r.createElement("div",{className:"pLeft12 pRight12 taskCustomFields"},r.createElement(Mt.Z,{flag:Le,ref:function(It){return De.fields=It},data:rt,widgetStyle:{align_pc:"1",titlelayout_pc:"2",titlewidth_pc:"84"},onChange:function(It,bt,Ut){var Xt=Ut.controlId;return De.updateFieldsData({controlId:Xt})},onBlur:function(It){return De.updateFieldsData({isBlur:!0,controlId:It})}}))):null}}]),Nt}(r.Component);const en=(0,d.$j)(function(Zt){return Zt.task})(on);var $t,an,tn=(0,V.Z)(f.Z),mt={comment:1,attachment:2,log:3},Lt=(an=$t=function(Zt){(0,a.default)(Nt,Zt);function Nt(ct){(0,te.default)(this,Nt);var De=(0,y.default)(this,(Nt.__proto__||L()(Nt)).call(this,ct));return De.addPostSuccessCount=function(){De.mounted&&De.state.hasNotice&&De.setState({postSuccessCount:De.state.postSuccessCount+1})},De.closeDetail=function(){De.props.openType===n.Oh.slide&&($("#tasks").removeClass("slideDetail"),$("#tasks .selectTask").removeClass("selectTask ThemeBGColor6"),setTimeout(function(){De.props.animationEndRemoveDetail()},250)),De.props.closeCallback()},De.applyJoinTask=function(){U.Z.applyJoinTask({taskID:De.state.taskId}).then(function(_e){_e.status?alert(_l("\u7533\u8BF7\u6210\u529F\uFF0C\u8BF7\u7B49\u5F85\u4EFB\u52A1\u8D1F\u8D23\u4EBA\u7684\u6388\u6743")):(0,s.N3)(_e.error)})},De.switchTaskDetail=function(_e){var Le=De.props.openType;Le===n.Oh.detail?(0,ot.T8)("/apps/task/task_"+_e):(De.scrollToFixedPosition({scrollTop:0}),De.setState({taskId:_e,tabIndex:mt.comment,beforeTaskId:De.state.taskId},function(){De.init()}))},De.showRelationControl=function(_e){var Le=De.state.taskId,rt=De.props.taskDetails[Le].data,Ct=function(bt){return _e===n.Fz.task?U.Z.getTaskList_RelationParent({taskID:Le,keyword:bt}):U.Z.getFolderListForUpdateFolderID({projectId:rt.projectID,keyWords:bt,excludeTaskIDs:Le})},dt=function(bt){var Ut=[];return _e===n.Fz.task?Ut=(bt||[]).map(function(Xt){return{sid:Xt.taskID,type:n.Fz.task,avatar:Xt.charge.avatar,fullname:Xt.charge.fullName,name:Xt.taskName,accountId:Xt.charge.accountID}}):Ut=(bt||[]).map(function(Xt){return{sid:Xt.folderID,type:n.Fz.folder,avatar:Xt.charge.avatar,fullname:Xt.charge.fullName,name:Xt.folderName,accountId:Xt.charge.accountID}}),Ut};(0,o.render)(r.createElement(st.Z,{ajaxPost:Ct,ajaxDataFormat:dt,createDisable:!0,types:[_e],onSubmit:function(bt){return De.relationOnSubmit(bt.sid,bt.type)}}),document.createElement("div"))},De.relationOnSubmit=function(_e,Le){var rt=De.state.taskId,Ct=De.props.openType,dt=De.props.taskDetails[rt].data,It=De.props.taskControls[rt]||[],bt=function(){Ct===n.Oh.slide&&(0,Fe.op)(rt,"")},Ut=function(tt){Ct===n.Oh.slide&&(0,Fe._k)(rt,_e,dt.parentID,tt)},Xt=function(){Le===n.Fz.task?De.props.dispatch((0,C.go)(rt,_e,Ut)):De.props.dispatch((0,C.rJ)(rt,_e,bt))};It.length&&_e?g.Z.confirm({title:Le===n.Fz.task?_l("\u60A8\u786E\u5B9A\u91CD\u65B0\u5173\u8054\u6BCD\u4EFB\u52A1\u5417\uFF1F"):_l("\u60A8\u786E\u5B9A\u91CD\u65B0\u5173\u8054\u9879\u76EE\u5417\uFF1F"),children:r.createElement("div",{class:"Font14 mBottom20"},Le===n.Fz.task?_l("\u91CD\u65B0\u5173\u8054\u6BCD\u4EFB\u52A1\u540E\uFF0C\u5F53\u524D\u4EFB\u52A1\u539F\u6709\u7684\u81EA\u5B9A\u4E49\u5B57\u6BB5\u6570\u636E\u5C06\u88AB\u5220\u9664\uFF0C\u65B0\u5173\u8054\u6BCD\u4EFB\u52A1\u7684\u81EA\u5B9A\u4E49\u5B57\u6BB5\u4F1A\u663E\u793A\u5728\u5F53\u524D\u4EFB\u52A1\u8BE6\u60C5\u5185"):_l("\u91CD\u65B0\u5173\u8054\u9879\u76EE\u540E\uFF0C\u5F53\u524D\u4EFB\u52A1\u539F\u6709\u7684\u81EA\u5B9A\u4E49\u5B57\u6BB5\u6570\u636E\u5C06\u88AB\u5220\u9664\uFF0C\u65B0\u5173\u8054\u9879\u76EE\u7684\u81EA\u5B9A\u4E49\u5B57\u6BB5\u4F1A\u663E\u793A\u5728\u5F53\u524D\u4EFB\u52A1\u8BE6\u60C5\u5185")),onOk:function(){return Xt()}}):Xt()},De.removeTaskMember=function(_e){var Le=De.state.taskId,rt=De.props.openType,Ct=_e===md.global.Account.accountId;g.Z.confirm({className:"deleteTaskMemberDialog",children:r.createElement("div",{class:"Font16 mBottom20"},Ct?_l("\u662F\u5426\u786E\u8BA4\u9000\u51FA\u8BE5\u4EFB\u52A1\uFF1F"):_l("\u662F\u5426\u79FB\u9664\u8BE5\u4EFB\u52A1\u53C2\u4E0E\u8005\uFF1F")),onOk:function(){U.Z.deleteTaskMember({taskID:Le,accountID:_e}).then(function(){alert(Ct?_l("\u9000\u51FA\u6210\u529F"):_l("\u79FB\u9664\u6210\u529F")),Ct?(De.closeDetail(),De.props.dispatch((0,C.hN)(Le)),rt===n.Oh.slide?((0,Fe.po)([Le]),De.props.taskConfig.filterUserId||(0,Fe.fx)("","all")):rt===n.Oh.detail&&(0,ot.T8)("/apps/task/center?"+(0,A.tQ)())):De.props.dispatch((0,C.yf)(Le,_e))})}})},De.scroll=function(_e,Le){De.mounted&&($(".taskDetailHeader").toggleClass("borderClear",Le.position>0),Le.maximum-Le.position<=30&&De.state.tabIndex===mt.comment&&De.commentList.updatePageIndex())},De.state={animationEnd:ct.openType!==n.Oh.slide,taskId:ct.taskId,hasNotice:ct.hasNotice,postSuccessCount:0,beforeTaskId:"",tabIndex:mt.comment,addSubTask:!1,addChecklist:!1,addTags:!1,forceUpdateSource:!1},De}return(0,R.default)(Nt,[{key:"componentDidMount",value:function(){this.mounted=!0,this.props.visible&&this.state.taskId&&(this.init(),this.animationEnd())}},{key:"componentWillReceiveProps",value:function(De){var _e=this;De.visible&&De.taskId&&(De.taskId!==this.props.taskId||De.isForceUpdate)&&(this.scrollToFixedPosition({scrollTop:0}),this.setState({animationEnd:De.openType!==n.Oh.slide||this.props.visible,taskId:De.taskId,beforeTaskId:"",tabIndex:mt.comment,hasNotice:De.hasNotice,postSuccessCount:0,forceUpdateSource:!1},function(){_e.init(),_e.animationEnd()}),$.isFunction(De.closeForceUpdate)&&De.closeForceUpdate())}},{key:"componentWillUpdate",value:function(De,_e){_e.forceUpdateSource&&!this.state.forceUpdateSource&&this.mounted&&(_e.tabIndex===mt.comment?this.commentList.updatePageIndex(!0):_e.tabIndex===mt.attachment?this.fileList.getFiles():_e.tabIndex===mt.log&&this.taskLog.getTaskLog())}},{key:"componentDidUpdate",value:function(){var De=this,_e=this.state,Le=_e.hasNotice,rt=_e.postSuccessCount;Le&&rt===4&&(setTimeout(function(){De.scrollToFixedPosition({scrollTo:$(".taskDetail .talkNav")})},100),this.setState({hasNotice:!1})),this.state.forceUpdateSource&&this.setState({forceUpdateSource:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.props.openType===n.Oh.slide&&$("#tasks").removeClass("slideDetail")}},{key:"init",value:function(){this.props.openType===n.Oh.slide&&($("#tasks").addClass("slideDetail"),$("#batchTask").removeClass("slideLeft").html("")),this.props.dispatch((0,C.T8)(this.state.taskId,this.props.openCallback,this.addPostSuccessCount))}},{key:"animationEnd",value:function(){var De=this;this.props.openType===n.Oh.slide&&setTimeout(function(){De.setState({animationEnd:!0})},200)}},{key:"switchTabs",value:function(De){this.setState({tabIndex:De})}},{key:"scrollToFixedPosition",value:function(De){$(".taskDetailScroll").nanoScroller(De)}},{key:"renderContentBox",value:function(){var De=this.props.openType;return De===n.Oh.slide?r.createElement(tn,{component:"div",className:"taskDetail slide",onClickAwayExceptions:[".persist-area",".listStageTaskContent",".listStageContent",".dialogScroll",".attachmentsPreview",".selectUserBox","#dialogBoxSelectUser_container",".mui-dialog-container",".mdAlertDialog",".PositionContainer-wrapper",".rc-trigger-popup","#chat","#chatPanel",".warpDatePicker",".ck",".ant-select-dropdown",".ant-picker-dropdown"],onClickAway:this.closeDetail},this.renderTaskContent()):r.createElement("div",{className:H()("taskDetail",{detail:De===n.Oh.detail},{fullscreen:De===n.Oh.dialog})},this.renderTaskContent())}},{key:"renderTaskContent",value:function(){var De=this,_e=this.state,Le=_e.animationEnd,rt=_e.taskId,Ct=_e.beforeTaskId,dt=_e.tabIndex,It=_e.showHeadShadow,bt=_e.addSubTask,Ut=_e.addChecklist,Xt=_e.addTags,pn=_e.forceUpdateSource,tt=this.props,ht=tt.openType,Dt=tt.taskDetails,Ot=Dt[rt];return!Ot||!Le?r.createElement(ce.Z,null):!Ot.status||Ot.data.auth===n.ZP.auth.None?r.createElement("div",{className:"relative h100"},Ct?r.createElement("div",{className:"applyReturn"},r.createElement("span",{onClick:function(){return De.switchTaskDetail(Ct)}},r.createElement("i",{className:"icon-arrow-left-border"}),_l("\u8FD4\u56DE"))):null,ht===n.Oh.dialog?r.createElement("span",{className:"taskCloseBtn ThemeColor3","data-tip":_l("\u5173\u95ED"),onClick:this.closeDetail},r.createElement("i",{className:"icon-delete"})):null,r.createElement(O.Z,{text:Ot.status?_l("\u60A8\u7684\u6743\u9650\u4E0D\u8DB3\uFF0C\u65E0\u6CD5\u67E5\u770B\u6B64\u4EFB\u52A1"):_l("\u4EFB\u52A1\u5DF2\u5220\u9664\uFF0C\u65E0\u6CD5\u67E5\u770B"),showBtn:!!Ot.status,callback:this.applyJoinTask})):r.createElement(r.Fragment,null,r.createElement(yt,{taskId:rt,refreshDetail:function(){De.init(),De.setState({forceUpdateSource:!0})},addSubTask:function(){return De.setState({addSubTask:!0})},addChecklist:function(){return De.setState({addChecklist:!0})},addTags:function(){return De.setState({addTags:!0})},removeTaskMember:this.removeTaskMember,openType:ht,showRelationControl:this.showRelationControl,closeDetail:this.closeDetail,updateCallback:this.props.updateCallback}),r.createElement("div",{className:"flex taskDetailContent"},r.createElement(j.Z,{className:"Absolute taskDetailScroll",updateEvent:this.scroll},r.createElement(Rt,{taskId:rt,openType:ht,updateCallback:this.props.updateCallback}),r.createElement(qe,{taskId:rt,openType:ht,removeTaskMember:this.removeTaskMember,addTags:Xt,closeCallback:this.props.closeCallback,showRelationControl:this.showRelationControl,relationOnSubmit:this.relationOnSubmit,switchTaskDetail:this.switchTaskDetail,closeAddTags:function(){return De.setState({addTags:!1})},updateCallback:this.props.updateCallback}),r.createElement(Re,{taskId:rt,openType:ht,switchTaskDetail:this.switchTaskDetail,addSubTask:bt,closeAddSubTask:function(){return De.setState({addSubTask:!1})},updateCallback:this.props.updateCallback}),r.createElement("div",{className:"taskContentBox"},r.createElement(xe,{taskId:rt,noAuth:Ot.data.auth===n.ZP.auth.Look,addChecklist:Ut,closeAddChecklist:function(){return De.setState({addChecklist:!1})}})),r.createElement(en,{taskId:rt}),r.createElement("ul",{className:"talkNav boxSizing"},r.createElement("li",{className:H()("ThemeBorderColor3 ThemeColor3",{active:dt===mt.comment}),onClick:function(){return De.switchTabs(mt.comment)}},_l("\u8BC4\u8BBA")),r.createElement("li",{className:H()("ThemeBorderColor3 ThemeColor3 mLeft20",{active:dt===mt.attachment}),onClick:function(){return De.switchTabs(mt.attachment)}},_l("\u6587\u4EF6")),r.createElement("li",{className:H()("ThemeBorderColor3 ThemeColor3",{active:dt===mt.log}),onClick:function(){return De.switchTabs(mt.log)}},_l("\u4EFB\u52A1\u65E5\u5FD7"))),r.createElement("div",{className:"talkBox"},dt===mt.comment&&r.createElement(ie,{taskId:rt,addPostSuccessCount:this.addPostSuccessCount,scrollToComment:function(){return De.scrollToFixedPosition({scrollTo:$(".taskDetail .talkNav")})},manualRef:function(Kt){De.commentList=Kt}}),dt===mt.log&&r.createElement(w,{taskId:rt,manualRef:function(Kt){De.taskLog=Kt}}),dt===mt.attachment&&r.createElement(K.Z,{sourceType:K.Z.TYPES.TASK,sourceId:rt,appId:md.global.APPInfo.taskAppID,manualRef:function(Kt){De.fileList=Kt}})))),r.createElement(q,{taskId:rt,scrollToComment:function(){return De.scrollToFixedPosition({scrollTo:$(".taskDetail .talkNav")})}}))}},{key:"render",value:function(){var De=this.props,_e=De.visible,Le=De.openType;return _e?Le===n.Oh.slide||Le===n.Oh.detail?r.createElement(r.Fragment,null,this.renderContentBox()):r.createElement(g.Z.DialogBase,{visible:!0,width:800,type:"fixed",anim:!1},this.renderContentBox()):null}}]),Nt}(r.Component),$t.defaultProps={visible:!1,taskId:"",openType:1,hasNotice:!1,openCallback:function(){},closeCallback:function(){},animationEndRemoveDetail:function(){},updateCallback:function(){}},an);const zt=(0,d.$j)(function(Zt){return Zt.task})(Lt)},57482:(lt,Te,t)=>{"use strict";t.d(Te,{$:()=>ne,BC:()=>Ae,Bk:()=>v,DE:()=>l,F$:()=>se,Fc:()=>P,IS:()=>Me,IX:()=>i,KC:()=>G,KD:()=>ve,KT:()=>u,K_:()=>ye,Q8:()=>M,SI:()=>W,Sc:()=>Q,T8:()=>w,Vu:()=>he,YO:()=>pe,Yf:()=>fe,Zh:()=>B,_N:()=>be,_m:()=>ae,bY:()=>Ne,cl:()=>Ce,g1:()=>de,g4:()=>ue,gI:()=>d,go:()=>X,hC:()=>h,hN:()=>F,nf:()=>N,nu:()=>xe,rJ:()=>z,rU:()=>me,rt:()=>D,rv:()=>m,t5:()=>Y,tX:()=>K,ur:()=>oe,yB:()=>J,yf:()=>x,yi:()=>Se});var ce=t(63239),g=t.n(ce);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(51443);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(96213);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(10441);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(52106);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(20454);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(17306);var r=t(96486),o=t.n(r),d=function(we){return function(Ie,ge){var Re=ge().task.taskConfig;Re.folderId||Ie({type:"CREATE_TASK_TO_LIST",data:we}),Re.folderId&&Re.viewType===1&&Ie({type:"CREATE_TASK_TO_TREE",data:we}),Re.folderId&&Re.viewType===2&&Ie({type:"CREATE_TASK_TO_STAGE",data:we})}},Z=function(we){return{type:"UPDATE_STATE_CONFIG",taskConfig:we}},H=function(we){return{type:"UPDATE_NETWORK",lastMyProjectId:we}},U=function(we,Ie){return function(ge,Re){ge({type:"UPDATE_LIST_SORT",listSort:Ie}),ge({type:"UPDATE_TASK_STATUS",listStatus:we})}},f=function(we){return{type:"UPDATE_FOLDER_RANGE",folderSearchRange:we}},V=function(we){return{type:"UPDATE_FOLDER_KEYWORDS",searchKeyWords:we}},C=function(we){return{type:"UPDATE_COMPLETE_TIME",completeTime:we}},O=function(we){return{type:"UPDATE_LIST_SORT",listSort:we}},n=function(we){return{type:"UPDATE_TASK_ASCRIPTION",taskFilter:we}},s=function(we){return{type:"UPDATE_TASK_TAGS",tags:we}},j=function(we){return{type:"UPDATE_CUSTOM_FILTER",customFilter:we}},A=function(we){return{type:"UPDATE_CHARGE_IDS",selectChargeIds:we}},S=function(){return{type:"SET_STORAGE_SUCCESS"}},I=function(we){return{type:"ATTACHMENT_SWITCH",attachmentViewType:we}},c=function(we){return function(Ie,ge){ajaxRequest.getFolderSettingsForCurrentUser({folderID:we}).then(function(Re){Re.status&&Ie({type:"UPDATE_PROJECT_ID",projectId:Re.data.projectID}),Ie({type:"UPDATE_FOLDER_SETTINGS",data:Re.status?Re.data:Re.error})})}},q=function(){return{type:"CLEAR_FOLDER_SETTINGS"}},b=function(we,Ie){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};return function(Re,Pe){ajaxRequest.updateFolderName({folderID:we,folderName:Ie}).then(function(ke){ke.status?(Re({type:"UPDATE_FOLDER_NAME",folderName:Ie}),ge()):errorMessage(ke.error)})}},k=function(){return{type:"CLEAR_FOLDER_TIP"}},ee=function(we){return{type:"UPDATE_FOLDER_TOP",isTop:we}},re=function(we,Ie){return function(ge,Re){ajaxRequest.updateFolderMemberNotice({folderId:we,unNotice:Ie}).then(function(Pe){Pe.status?ge({type:"UPDATE_FOLDER_MEMBER",folderNotice:Ie}):errorMessage(result.error)})}},ie=function(we){return{type:"UPDATE_FOLDER_ARCHIVED",isArchived:we}},le=function(we){return{type:"UPDATE_MY_TASK_DATA_SOURCE",data:we}},E=function(we){return{type:"UPDATE_TOP_FOLDER_LIST",data:we}},w=function(we){var Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};return function(Re,Pe){var ke=Pe().task.taskConfig,We=ke.listSort||10;L.Z.getTaskDetail({taskID:we,sort:We,isDecode:!0}).then(function(Ve){Re({type:"GET_TASK_DETAIL",taskId:we,data:o().cloneDeep(Ve)}),ge(),Ve.status&&Ve.data.taskID&&Ve.data.auth!==p.ZP.auth.None&&(T(we,ge)(Re),Ve.data.hasControls?Ee(we,ge)(Re):ge()),Ie()})}},K=function(we,Ie){return function(ge,Re){L.Z.updateTaskMemberNotice({notice:Ie,taskID:we}).then(function(Pe){if(Pe.status){var ke=o().cloneDeep(Re().task.taskDetails[we]);ke.data.notice=Ie,ge({type:"UPDATE_TASK_NOTICE",taskId:we,data:ke})}else(0,R.N3)(Pe.error)})}},N=function(we,Ie){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};return function(Re,Pe){L.Z.updateTaskLocked({locked:Ie,taskID:we}).then(function(ke){if(ke.status){var We=o().cloneDeep(Pe().task.taskDetails[we]);We.data.locked=Ie,Re({type:"UPDATE_TASK_LOCKED",taskId:we,data:We}),ge()}else(0,R.N3)(ke.error)})}},F=function(we){return{type:"DESTROY_TASK",taskId:we}},h=function(we,Ie,ge,Re){var Pe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){};return function(ke,We){var Ve=function it(){var Ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;L.Z.updateTaskStatus({taskID:Re||we,status:Ie,isSubTask:ge,code:Ge}).then(function(pt){if(pt.status){Pe(pt.data,ge);var ot=o().cloneDeep(We().task.taskDetails[we]);if(!ot)return;if(ot.data.subTask.forEach(function(At){pt.data.tasks.forEach(function(yt){At.taskID===yt.taskId&&(At.startTime=yt.startTime,At.deadline=yt.deadline,At.actualStartTime=yt.actualStartTime,At.completeTime=yt.completedTime,At.status=yt.status)})}),!Re){var vt=o().find(pt.data.tasks,function(At){return At.taskId===we});ot.data.startTime=vt.startTime,ot.data.deadline=vt.deadline,ot.data.actualStartTime=vt.actualStartTime,ot.data.completeTime=vt.completedTime,ot.data.status=vt.status}ke({type:"EDIT_TASK_STATUS",taskId:we,data:ot})}else pt.error.code===1e3?(0,y.Rt)(function(){return it(pt.error.code)}):(0,R.N3)(pt.error)})};Ve()}},z=function(we,Ie){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};return function(Re,Pe){L.Z.updateTaskFolderID({taskID:we,folderID:Ie}).then(function(ke){if(ke.status){alert(_l("\u4FEE\u6539\u6210\u529F"));var We=o().cloneDeep(Pe().task.taskDetails[we]);We.data.auth=ke.data.auth,We.data.folderCanLook=ke.data.folderCanLook,We.data.isFolderMember=ke.data.isFolderMember,We.data.ancestors=[],We.data.folderID=ke.data.folderID,We.data.folderName=ke.data.folderName,We.data.stageID=ke.data.stageID,We.data.stageName=ke.data.stageName,We.data.stages=ke.data.stages,Re({type:"UPDATE_TASK_FOLDER_ID",taskId:we,data:We}),Re({type:"UPDATE_TASK_CONTROLS",taskId:we,data:ke.data.controls}),ge()}else(0,R.N3)(ke.error)})}},X=function(we,Ie){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};return function(Re,Pe){L.Z.updateTaskParentID({taskID:we,parentID:Ie}).then(function(ke){if(ke.status){alert(_l("\u4FEE\u6539\u6210\u529F"));var We=o().cloneDeep(Pe().task.taskDetails[we]);We.data.auth=ke.data.auth,We.data.folderCanLook=ke.data.folderCanLook,We.data.isFolderMember=ke.data.isFolderMember,We.data.ancestors=ke.data.ancestors,We.data.parentID=ke.data.parentID||"",We.data.folderID=ke.data.folderID||"",We.data.folderName=ke.data.folderName||"",We.data.stageID=ke.data.stageID||"",We.data.stageName=ke.data.stageName||"",We.data.stages=ke.data.stages||[],Re({type:"UPDATE_TASK_FOLDER_ID",taskId:we,data:We}),Re({type:"UPDATE_TASK_CONTROLS",taskId:we,data:ke.data.controls}),ge(We.data)}else(0,R.N3)(ke.error)})}},B=function(we,Ie,ge){var Re=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){};return function(Pe,ke){L.Z.updateTaskStageID({taskID:we,stageID:Ie}).then(function(We){if(We.status){alert(_l("\u4FEE\u6539\u6210\u529F"));var Ve=o().cloneDeep(ke().task.taskDetails[we]),it=o().cloneDeep(Ve.data.charge);Ve.data.stageID=Ie,Ve.data.stageName=ge,We.data.accountID&&(Ve.data.charge.accountID=We.data.accountID,Ve.data.charge.avatar=We.data.avatar,Ve.data.charge.fullName=We.data.fullName,it.accountID&&it.accountID!=="user-undefined"&&(Ve.data.member=Ve.data.member.concat([{type:0,status:0,account:it}])),o().remove(Ve.data.member,function(Ge){return Ge.account.accountID===We.data.accountID})),Pe({type:"UPDATE_TASK_STAGE_ID",taskId:we,data:Ve}),Re(We.data)}else(0,R.N3)(We.error)})}},x=function(we,Ie){return function(ge,Re){var Pe=o().cloneDeep(Re().task.taskDetails[we]);o().remove(Pe.data.member,function(ke){return ke.account.accountID===Ie}),ge({type:"REMOVE_TASK_MEMBER",taskId:we,data:Pe})}},Q=function(we,Ie,ge){var Re=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){};return function(Pe,ke){o().debounce(function(){L.Z.updateTaskName({taskID:ge||we,name:Ie}).then(function(We){if(We.status){var Ve=o().cloneDeep(ke().task.taskDetails[we]);ge?Ve.data.subTask.forEach(function(it){it.taskID===ge&&(it.taskName=Ie)}):Ve.data.taskName=Ie,Pe({type:"UPDATE_TASK_NAME",taskId:we,data:Ve}),alert(_l("\u4FEE\u6539\u6210\u529F")),Re()}else(0,R.N3)(We.error)})},50)()}},i=function(we,Ie){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};return function(Re,Pe){L.Z.updateTaskMemberStar({taskID:we,star:Ie}).then(function(ke){if(ke.status){ge();var We=o().cloneDeep(Pe().task.taskDetails[we]);if(!We)return;We.data.star=Ie,Re({type:"UPDATE_TASK_MEMBER_STAR",taskId:we,data:We})}else(0,R.N3)(ke.error)})}},m=function(we,Ie,ge){var Re=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){};return function(Pe,ke){L.Z.updateTaskCharge({taskID:ge||we,charge:Ie.accountId}).then(function(We){if(We.status){alert(_l("\u4FEE\u6539\u6210\u529F")),Re();var Ve=o().cloneDeep(ke().task.taskDetails[we]);if(!Ve)return;if(ge)Ve.data.subTask.forEach(function(Ge){Ge.taskID===ge&&(Ge.charge.accountID=Ie.accountId,Ge.charge.avatar=Ie.avatar,Ge.charge.fullName=Ie.fullname)});else{var it=o().cloneDeep(Ve.data.charge);Ve.data.charge.accountID=Ie.accountId,Ve.data.charge.avatar=Ie.avatar,Ve.data.charge.fullName=Ie.fullname,it.accountID&&it.accountID!=="user-undefined"&&(Ve.data.member=Ve.data.member.concat([{type:0,status:0,account:it}])),o().remove(Ve.data.member,function(Ge){return Ge.account.accountID===Ie.accountId})}Pe({type:"UPDATE_TASK_CHARGE",taskId:we,data:Ve})}else(0,R.N3)(We.error)})}},v=function(we,Ie){return function(ge,Re){L.Z.updateTaskSummary({taskID:we,summary:Ie}).then(function(Pe){if(Pe.status){var ke=o().cloneDeep(Re().task.taskDetails[we]);ke.data.summary=Pe.data,ge({type:"UPDATE_TASK_SUMMARY",taskId:we,data:ke})}else(0,R.N3)(Pe.error)})}},W=function(we,Ie,ge){var Re=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){};return function(Pe,ke){L.Z.batchAddTaskMember({taskIDstr:we,memberstr:Ie.join(","),specialAccounts:ge}).then(function(We){if(We.status){var Ve=o().cloneDeep(ke().task.taskDetails[we]);if(We.data.limitedCount)alert(_l("\u6709%0\u4F4D\u5916\u90E8\u7528\u6237\u9080\u8BF7\u5931\u8D25\u3002\u5916\u90E8\u7528\u6237\u77ED\u4FE1\u9080\u8BF7\u7528\u91CF\u8FBE\u5230\u4E0A\u9650\u3002",We.data.limitedCount));else if(We.data.successMember){alert(_l("\u6DFB\u52A0\u6210\u529F"));var it=We.data.successMember.map(function(Ge){return{type:0,status:0,account:Ge}});Ve.data.member=Ve.data.member.concat(it),Pe({type:"ADD_TASK_MEMBER",taskId:we,data:Ve})}else alert(_l("\u7528\u6237\u5DF2\u5B58\u5728\uFF0C\u8BF7\u52FF\u91CD\u590D\u6DFB\u52A0"),3);Re({status:!0})}else(0,R.N3)(We.error)})}},P=function(we,Ie){return function(ge,Re){L.Z.agreeApplyJoinTask({taskID:we,accountID:Ie}).then(function(Pe){if(Pe.status){var ke=o().cloneDeep(Re().task.taskDetails[we]);ke.data.member.forEach(function(We){We.account.accountID===Ie&&(We.status=0)}),ge({type:"AGREE_APPLY_JOIN_TASK",taskId:we,data:ke})}else(0,R.N3)(Pe.error)})}},u=function(we,Ie){return function(ge,Re){L.Z.refuseJoinTask({taskID:we,accountID:Ie}).then(function(Pe){if(Pe.status){var ke=o().cloneDeep(Re().task.taskDetails[we]);o().remove(ke.data.member,function(We){return We.account.accountID===Ie}),ge({type:"REFUSE_JOIN_TASK",taskId:we,data:ke})}else(0,R.N3)(Pe.error)})}},l=function(we,Ie,ge,Re){var Pe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){};return function(ke,We){L.Z.addTask({taskName:Ie,chargeAccountID:ge,parentID:we,projectId:Re}).then(function(Ve){Ve.status?(L.Z.getTaskDetail({taskID:Ve.data.taskID}).then(function(it){if(it.status&&it.data.taskID){var Ge=o().cloneDeep(We().task.taskDetails[we]);Ge.data.subTask=Ge.data.subTask.concat([it.data]),ke({type:"ADD_SUB_TASK",taskId:we,data:Ge})}}),Pe(Ve.data)):(0,R.N3)(Ve.error)})}},T=function(we){var Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};return function(ge,Re){L.Z.getCheckListsWithItemsInTask({taskId:we}).then(function(Pe){Pe.status?ge({type:"GET_CHECK_LIST",taskId:we,data:Pe.data}):(0,R.N3)(Pe.error),Ie()})}},G=function(we,Ie){return function(ge,Re){L.Z.addCheckList({taskId:we,name:Ie}).then(function(Pe){Pe.status?Pe.data.overflow?alert(_l("\u65E0\u6CD5\u6DFB\u52A0\uFF0C\u5355\u4E2A\u4EFB\u52A1\u4E0B\u81F3\u591A\u6DFB\u52A0100\u4E2A\u68C0\u67E5\u6E05\u5355"),3):ge({type:"ADD_CHECKLIST",taskId:we,data:Pe.data.checkList}):(0,R.N3)(Pe.error)})}},D=function(we,Ie,ge,Re){return function(Pe,ke){L.Z.updateCheckListIndex({currentCheckListId:Ie,previousCheckListId:ge}).then(function(We){if(We.status){var Ve=o().cloneDeep(ke().task.taskChecklists[we]),it=o().find(Ve,function(Ge){return Ge.checkListId===Ie});o().remove(Ve,function(Ge){return Ge.checkListId===Ie}),Ve.splice(Re,0,it),Pe({type:"UPDATE_CHECKLIST_INDEX",taskId:we,data:Ve})}else(0,R.N3)(We.error)})}},M=function(we,Ie,ge){return function(Re,Pe){L.Z.updateCheckListName({checkListId:Ie,name:ge}).then(function(ke){if(ke.status){var We=o().cloneDeep(Pe().task.taskChecklists[we]);We.map(function(Ve){return Ve.checkListId===Ie&&(Ve.name=ge),Ve}),Re({type:"UPDATE_CHECKLIST_NAME",taskId:we,data:We})}else(0,R.N3)(ke.error)})}},se=function(we,Ie){return function(ge,Re){L.Z.removeCheckList({checkListId:Ie}).then(function(Pe){if(Pe.status){var ke=o().cloneDeep(Re().task.taskChecklists[we]);o().remove(ke,function(We){return We.checkListId===Ie}),ge({type:"REMOVE_CHECKLIST",taskId:we,data:ke})}else(0,R.N3)(Pe.error)})}},ae=function(we,Ie,ge,Re,Pe){return function(ke,We){L.Z.updateItemIndex({currentItemId:Ie,previousItemId:ge,targetCheckListId:Re}).then(function(Ve){if(Ve.status){var it=o().cloneDeep(We().task.taskChecklists[we]),Ge=void 0;it.map(function(pt){return pt.items.forEach(function(ot){ot.itemId===Ie&&(Ge=ot)}),o().remove(pt.items,function(ot){return ot.itemId===Ie}),pt}),it.map(function(pt){return pt.checkListId===Re&&pt.items.splice(Pe,0,Ge),pt}),ke({type:"UPDATE_CHECKLIST_ITEM_INDEX",taskId:we,data:it})}else(0,R.N3)(Ve.error)})}},ne=function(we,Ie,ge){return function(Re,Pe){L.Z.addItems({checkListId:Ie,names:ge}).then(function(ke){if(ke.status){ke.data.overflow&&alert(_l("\u68C0\u67E5\u9879\u81F3\u591A\u53EF\u6DFB\u52A0100\u4E2A"),3);var We=o().cloneDeep(Pe().task.taskChecklists[we]);We.map(function(Ve){return Ve.checkListId===Ie&&(Ve.items=Ve.items.concat(ke.data.items)),Ve}),Re({type:"ADD_CHECKLIST_ITEM",taskId:we,data:We})}else(0,R.N3)(ke.error)})}},de=function(we,Ie,ge){return function(Re,Pe){L.Z.updateItemName({itemId:Ie,name:ge}).then(function(ke){if(ke.status){var We=o().cloneDeep(Pe().task.taskChecklists[we]);We.forEach(function(Ve){Ve.items.forEach(function(it){it.itemId===Ie&&(it.name=ge)})}),Re({type:"UPDATE_ITEM_NAME",taskId:we,data:We})}else(0,R.N3)(ke.error)})}},Ce=function(we,Ie){return function(ge,Re){L.Z.removeItem({itemId:Ie}).then(function(Pe){if(Pe.status){var ke=o().cloneDeep(Re().task.taskChecklists[we]);ke.map(function(We){return o().remove(We.items,function(Ve){return Ve.itemId===Ie}),We}),ge({type:"REMOVE_ITEM",taskId:we,data:ke})}else(0,R.N3)(Pe.error)})}},he=function(we,Ie){return function(ge,Re){var Pe=o().cloneDeep(Re().task.taskChecklists[we]);Pe.map(function(ke){return o().remove(ke.items,function(We){return We.itemId===Ie}),ke}),ge({type:"REMOVE_ITEM",taskId:we,data:Pe})}},fe=function(we,Ie,ge){return function(Re,Pe){L.Z.updateItemStatus({itemId:Ie,status:ge}).then(function(ke){if(ke.status){var We=o().cloneDeep(Pe().task.taskChecklists[we]);We.forEach(function(Ve){return Ve.items.forEach(function(it){it.itemId===Ie&&(it.status=ge)})}),Re({type:"UPDATE_ITEM_STATUS",taskId:we,data:We})}else(0,R.N3)(ke.error)})}},Ee=function(we){var Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};return function(ge,Re){L.Z.getTaskControls({taskID:we}).then(function(Pe){Pe.status?ge({type:"GET_TASK_CONTROLS",taskId:we,data:Pe.data}):(0,R.N3)(Pe.error),Ie()})}},Y=function(we,Ie,ge,Re,Pe){return function(ke,We){L.Z.updateControlValue({taskId:we,controlId:Ie,value:ge,knowledgeAtt:Pe?Re:""}).then(function(Ve){if(Ve.status){var it=o().cloneDeep(We().task.taskControls[we]);it.forEach(function(Ge){Ge.controlId===Ie&&(Ge.type===14?Ge.value=g()(Ve.data.attachments):Ge.type===21?(Ge.value=JSON.parse(Ge.value),JSON.parse(ge).isd?Ge.value.splice(Re,1):Ge.value=Ge.value.concat(JSON.parse(Ve.data.relation)),Ge.value=g()(Ge.value)):Ge.type===19||Ge.type===23||Ge.type===24?Ge.value=Re:Ge.value=ge)}),ke({type:"UPDATE_TASK_CONTROLS_VALUE",taskId:we,data:it}),(0,a.$U)(we,Ve.data.controls)}else(0,R.N3)(Ve.error)})}},oe=function(we,Ie,ge){return function(Re,Pe){var ke=o().cloneDeep(Pe().task.taskControls[we]);ke.forEach(function(We){We.controlId===Ie&&(We.value=g()(ge))}),Re({type:"UPDATE_TASK_CONTROLS_VALUE",taskId:we,data:ke})}},ve=function(we,Ie){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};return function(Re,Pe){var ke=o().cloneDeep(Pe().task.taskFoldStatus[we])||[];o().includes(ke,Ie)?o().remove(ke,function(We){return We===Ie}):ke.push(Ie),Re({type:"UPDATE_TASK_FOLD_STATUS",taskId:we,data:ke}),ge()}},ue=function(we,Ie){return{type:"TASK_DISCUSSIONS",taskId:we,data:Ie}},pe=function(we,Ie){return function(ge,Re){var Pe=Re().task.taskDiscussions,ke=Pe[we];o().remove(ke,function(We){return We.discussionId===Ie}),ge({type:"UPDATE_TASK_DISCUSSIONS",taskId:we,data:ke})}},Se=function(we,Ie){return{type:"ADD_TASK_DISCUSSIONS",taskId:we,data:Ie}},ye=function(we,Ie){return function(ge,Re){var Pe=o().cloneDeep(Re().task.taskDetails[we]);Ie.forEach(function(ke){ke.accountID=ke.accountId,Pe.data.member=Pe.data.member.concat([{type:0,status:0,account:ke}])}),ge({type:"DISCUSSIONS_ADD_MEMBERS",taskId:we,data:Pe})}},J=function(we,Ie,ge){var Re=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){};return function(Pe,ke){te.Z.addTaskTag2({taskIds:[we],tagName:ge,tagID:Ie==="createNewTagsID"?"":Ie}).then(function(We){if(We.id){var Ve=o().cloneDeep(ke().task.taskDetails[we]);Ve.data.tags.push({tagID:We.id,color:We.extra,tagName:We.value}),Pe({type:"ADD_TASK_TAG",taskId:we,data:Ve})}Re(We)})}},me=function(we,Ie){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};return function(Re,Pe){te.Z.removeTasksTag({sourceIds:[we],tagId:Ie}).then(function(ke){if(ke.state===0)ge();else{var We=o().cloneDeep(Pe().task.taskDetails[we]);o().remove(We.data.tags,function(Ve){return Ve.tagID===Ie}),Re({type:"REMOVE_TASK_TAG",taskId:we,data:We})}})}},be=function(we,Ie,ge){var Re=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){};return function(Pe,ke){L.Z.addTaskAttachments({taskId:we,atts:g()(Ie),knowledgeAtts:g()(ge)}).then(function(We){if(We.status){Re();var Ve=o().cloneDeep(ke().task.taskDetails[we]);Ve.data.attachments=We.data.concat(Ve.data.attachments),Pe({type:"ADD_TASK_ATTACHMENTS",taskId:we,data:Ve})}else(0,R.N3)(We.error)})}},xe=function(we,Ie){return function(ge,Re){var Pe=o().cloneDeep(Re().task.taskDetails[we]);Pe.data.attachments=Ie,ge({type:"DELETE_ATTACHMENT_DATA",taskId:we,data:Pe})}},Ae=function(we,Ie,ge){var Re=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){};return function(Pe,ke){var We=function Ve(it,Ge){var pt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,ot=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"";L.Z.updateTaskStartTimeAndDeadline({taskId:we,startTime:it,deadline:Ge,updateType:pt,timeLock:ot}).then(function(vt){if(vt.status){var At=o().cloneDeep(ke().task.taskDetails[we]);if(vt.data.changedTasks.length){Re(vt.data.changedTasks);var yt=o().find(vt.data.changedTasks,function(st){return st.taskId===we});At.data.startTime=yt.startTime,At.data.deadline=yt.deadline,At.data.subTask.forEach(function(st){vt.data.changedTasks.forEach(function(St){st.taskID===St.taskId&&(st.startTime=St.startTime,st.deadline=St.deadline)})}),Pe({type:"UPDATE_TASK_TIMES",taskId:we,data:At})}vt.data.updateTypes&&(0,y.zV)(vt,it,function(st){Ve(it,Ge,st,vt.data.timeLock)})}else(0,y.mP)(vt)})};We(Ie,ge)}},Ne=function(we,Ie){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};return function(Re,Pe){L.Z.updateTaskActualStartTime({taskId:we,actualStartTime:Ie}).then(function(ke){if(ke.code===1){var We=o().cloneDeep(Pe().task.taskDetails[we]);We.data.actualStartTime=Ie,We.data.startTime||(We.data.startTime=Ie),Re({type:"UPDATE_TASK_ACTUAL_START_TIME",taskId:we,data:We}),ge()}else(0,R.N3)(ke)})}},Me=function(we,Ie){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};return function(Re,Pe){L.Z.updateCompletedTime({taskId:we,time:Ie}).then(function(ke){if(ke.code===1){var We=o().cloneDeep(Pe().task.taskDetails[we]);We.data.completeTime=Ie,Re({type:"UPDATE_TASK_COMPLETED_TIME",taskId:we,data:We}),ge()}else(0,R.N3)(ke)})}},Fe=function(we){return{type:"UPDATE_SEARCH_TASK_COUNT",searchTaskCount:we}}},17306:(lt,Te,t)=>{"use strict";if(t.d(Te,{$U:()=>x,Al:()=>X,ED:()=>q,Fc:()=>O,I1:()=>A,S0:()=>le,U$:()=>ie,_k:()=>b,af:()=>E,dH:()=>s,fx:()=>B,nP:()=>j,op:()=>c,po:()=>S,sC:()=>V,uV:()=>n}),!/^(1887|7596|7798)$/.test(t.j))var ce=t(88311);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(69288);var p=t(67294),L=t(73935);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(96213);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(52106);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(22013);var a=t(38197),r=t.n(a);if(!/^(1887|7596|7798)$/.test(t.j))var o=t(57482);if(!/^(1887|7596|7798)$/.test(t.j))var d=t(15577);var Z=t(30381),H=t.n(Z),U=function(i){i==1?$("#taskList").find("#taskFilterLoading").length===0&&$("#taskList").append('<div id="taskFilterLoading"><div class="loadingCenter"> '+LoadDiv()+" </div></div>"):$("#taskList").find("#taskFilterLoadingBottom").length===0&&$("#taskList").append('<div id="taskFilterLoadingBottom">'+LoadDiv()+"</div>")},f=function(i){var m=$("#taskList tr[data-taskid='"+i+"']");return m.length||(m=$("#taskList li[data-taskid='"+i+"']")),m},V=function(i,m,v,W){var P=i.folderID,u=i.taskIDs,l=void 0,T=void 0;u||(u=i);var G=W||$("#taskList .selectTask");if(v)$.map(u,function(fe){l=$("tr[data-taskid="+fe+"] .completedNum").length?$("tr[data-taskid="+fe+"] .completedNum"):$("li[data-taskid="+fe+"] .completedNum"),l.length&&(T=l.siblings(".subCount"),l.html(m?T.text():0))});else{var D=u.length;if(G&&D&&u.indexOf(G.attr("data-taskid"))!==-1&&(D=D-1),G&&D>0){l=G.find(".completedNum"),T=l.siblings(".subCount");var M=parseInt(l.html(),10);m?l.html(M+D>parseInt(T.html(),10)?T.html():M+D):l.html(M-D>-1?M-D:0)}}for(var se=u.length,ae=$("#taskList .listStage").length===0,ne=void 0,de=0;de<se;de++){var Ce=u[de].toLowerCase();if(ne=f(Ce),ae){var he=ne.find(".markTask");ne.children(".singleTreeTask").length>0&&(he=ne.children(".singleTreeTask").find(".markTask")),m==0?he.removeClass("completeHook").end().find(".taskListName .spanName").removeClass("completeTask").end().find(".chargeImg").removeClass("opacity6"):he.addClass("completeHook").end().find(".taskListName .spanName").addClass("completeTask").end().find(".deteLine").data("comdate",H()().format("YYYY-MM-DD HH:mm")).end().find(".chargeImg").addClass("opacity6")}else m==0?ne.find(".markTask").removeClass("completeHook").end().find(".listStageTaskName").removeClass("completeTask").end().find(".chargeImg").removeClass("opacity6"):ne.find(".markTask").addClass("completeHook").end().find(".listStageTaskName").addClass("completeTask").end().find(".chargeImg").addClass("opacity6")}},C=function(i,m){var v=f(i),W=v.find(".markTask");v.children(".singleTreeTask").length>0&&(W=v.children(".singleTreeTask").find(".markTask"));var P=W.hasClass("completeHook")?0:1;taskStatusDialog(P,function(){v.find(".icon-task-card").length>0?_Dialog.confirm({title:P?_l("\u6807\u8BB0\u8BE5\u4EFB\u52A1\u4E3A\u5DF2\u5B8C\u6210"):_l("\u6807\u8BB0\u8BE5\u4EFB\u52A1\u4E3A\u672A\u5B8C\u6210"),closable:!1,dialogClasses:"enterStatus",children:React.createElement(_Checkbox,{className:"Gray_9",defaultChecked:!1,text:P?_l("\u540C\u65F6\u6807\u8BB0\u8BE5\u4EFB\u52A1\u4E0B\u6240\u6709\u4EFB\u52A1\u4E3A\u5DF2\u5B8C\u6210"):_l("\u540C\u65F6\u6807\u8BB0\u8BE5\u4EFB\u52A1\u4E0B\u6240\u6709\u4EFB\u52A1\u4E3A\u672A\u5B8C\u6210")}),onOk:function(){var l=$(".enterStatus .Checkbox").is(".checked");m(v,P,l)}}):m(v,P,!1)})},O=function(i,m,v){var W=f(i);W.find(".updateUserHead:first").data("id",v).data("src",m).data("hasbusinesscard",!1).off()},n=function(i){for(var m=0;m<i.length;m++){var v=i[m].taskId,W=f(v);W.children(".singleTreeTask").length&&(W=W.children(".singleTreeTask"));var P=W.find(".markTask").hasClass("completeHook"),u=W.find(".deteLine"),l=i[m].startTime!==void 0?i[m].startTime:u.data("start")||"",T=i[m].startTime!==void 0?i[m].deadline:u.data("end")||"",G=u.data("actdate")||"",D=u.data("comdate")||"",M=(0,R.Mq)(P,l,T,G,D);W.find(".taskListDate, .deteLine").toggleClass("mp0",!M),u.html(M)}},s=function(i,m,v,W,P){var u=f(i);u.children(".singleTreeTask").length&&(u=u.children(".singleTreeTask"));var l=u.find(".deteLine");l.data("start",m||""),l.data("end",v||""),l.data("actdate",W||""),l.data("comdate",P||"")},j=function(i,m){var v=f(i),W=v.find(".markTask:first");if(!W.hasClass("completeHook")){var P=v.data("auth");m&&P===1?W.removeClass().addClass("markTask lockToOtherTask").attr("tip",_l("\u4EFB\u52A1\u5DF2\u9501\u5B9A\uFF0C\u4F46\u6211\u662F\u521B\u5EFA\u8005\u6216\u8D1F\u8D23\u4EBA\u53EF\u4EE5\u64CD\u4F5C")).data("bindtip",!1):m&&P!==1?W.removeClass().addClass("markTask lockTask").attr("tip",_l("\u4EFB\u52A1\u5DF2\u9501\u5B9A\uFF0C\u65E0\u6CD5\u64CD\u4F5C")).data("bindtip",!1):m||W.removeClass().addClass("markTask").attr("tip",_l("\u6807\u8BB0\u5B8C\u6210")).data("bindtip",!1)}},A=function(i,m){te.Z.getSubTask({taskID:i,sort:m}).then(function(v){if(v.status){var W={formatStatus:R.LR,formatTaskTime:R.Mq,data:[{stageID:"ZP",tasks:v.data}],deep:0,pageIndex:2};t.e(1931).then(t.t.bind(t,81931,23)).then(function(P){var u=r().template(P)(W),l=$("#taskList .listStageTaskContent li[data-taskid='"+i+"']");l.closest(".singleFolderTask").prepend(u),l.remove()})}else(0,R.N3)(v.error)})},S=function(i,m){var v=y.Z.getState().task.taskConfig,W=v.viewType,P=v.folderId,u=v.listSort,l=i.length,T=void 0,G=void 0,D=void 0,M=void 0,se=!P,ae=void 0,ne=void 0;if(m){G=f(m);var de=G.find(".subCount");de.text(parseInt(de.text(),10)-1),de.text()<=0&&G.find(".subCounts").closest(".taskTagsBG").remove()}if(W===1&&P){T=i[0];var Ce=$("#taskList .listStageTaskContent li[data-taskid='"+T+"']"),he=Ce.children(".singleTreeTask").find(".nodeSwitch.on,.nodeSwitch.off").length>0,fe=Ce.children("ul"),Ee=Ce.closest(".singleFolderTask");D=Ce.parent();var Y=D.hasClass("singleFolderTask");if(he&&fe.length<=0&&i.length==1)A(T,u);else if(i.length===1&&fe.length>0){var oe=void 0;fe.children("li").each(function(me,be){oe=$(be),oe.find(".nodeSwitch").length>0?oe.removeClass("tLine").children(".singleTreeTask").find(".subJoinLine,.joinPrevLine").remove():(ne=oe.removeClass("tLine").children(".singleTreeTask"),ne.find(".subJoinLine,.subNoneNode,.joinPrevLine").remove(),ne.find(".nodeCircleSmall").replaceWith('<span class="nodeSwitch "></span>')),Ee.prepend(oe),oe.data("deep",1).children(".singleTreeTask").removeAttr("style"),oe.find("ul").length>0&&I(oe,2)}),fe.remove(),ae=D.parent(),ne=ae.children(".singleTreeTask"),ae.parent().is(".singleFolderTask")?ne.find(".joinLine").remove().end().find(".nodeSwitch").removeClass("on off"):ne.find(".joinLine").remove().end().find(".nodeSwitch").replaceWith('<span class="InlineBlockTop subNoneNode"></span><span class="InlineBlockTop nodeCircleSmall circle "></span>'),Ce.remove()}else if(Y)Ce.remove();else if(Ce.next().length>0)Ce.remove();else{var ve=Ce.prev();if(ve.length>0){if(ve.removeClass("tLine").children(".singleTreeTask").prepend('<div class=" joinPrevLine"></div>'),Ce.next().length<=0){ve.children(".tliLine").remove();var ue=ve.data("deep");if(ue!=2){var pe=ue<3?16*(ue-1):18*(ue-1)+1;ve.children(".singleTreeTask").find(".joinPrevLine").css("left",pe)}}Ce.remove()}else ae=D.parent(),D.remove(),ne=ae.children(".singleTreeTask"),ae.parent().is(".singleFolderTask")?ne.find(".joinLine").remove().end().find(".nodeSwitch").removeClass("on off"):ne.find(".joinLine").remove().end().find(".nodeSwitch").replaceWith('<span class="InlineBlockTop subNoneNode"></span><span class="InlineBlockTop nodeCircleSmall circle "></span>'),Ce.remove()}}else for(var Se={},ye=0;ye<l;ye++)if(T=i[ye],G=f(T),se){if(D=G.closest(".listStageTaskContent"),G.remove(),u==4&&D.find("table tr").length<=0&&D.prev().remove().end().remove(),$("#taskList table tr").length<=0){$("#taskList .persist-area").addClass("Hidden").find(".stageTaskCount").text("0");var J=`
				<div class="listCreateNew boderRadAll_3">
					<div class="creatNewContent">
					<i class="taskQuickCreate"></i>
					<span>
						`+_l("\u70B9\u51FB\u521B\u5EFA\u4EFB\u52A1")+`<br>
						<span class="Font14">`+_l("\u6216\u4F7F\u7528\u53F3\u4E0A\u89D2 + \u53F7\u521B\u5EFA\u4EFB\u52A1")+`</span>
					</span>
					</div>
					<div class="ThemeBG taskGroundGlass"></div>
				</div>`;u===0?$("#taskList").append(J):$("#taskList").html(J)}}else G.remove();$.each(i,function(me,be){var xe="task_"+be;window.localStorage.removeItem(xe)})},I=function Q(i,m){var v=m<3?20*(m-1):20*(m-1)+1;if(m!=2){var W=m<3?20*(m-2):20*(m-2)+1;i.data("deep",m-1).children(".singleTreeTask").removeAttr("padding-left",W)}i.children(".singleTreeTask").find(".joinLine").css("left",v),i.children("ul").children("li").data("deep",m).children(".singleTreeTask").css("padding-left",v).find(".joinPrevLine").css("left",v);for(var P=i.children("ul").children("li"),u=P.length,l=void 0,T=0;T<u;T++)if(l=P.eq(T),l.children("ul").length>0){var G=m+1;Q(l,G)}},c=function(i,m){var v=y.Z.getState().task.taskConfig,W=v.viewType,P=v.folderId;P&&W===1&&S([i,i],m)},q=function(i,m,v){var W=y.Z.getState().task.taskConfig,P=W.viewType,u=W.folderId;if(u){var l=f(m).data("stageid",i),T=void 0;if(P===1){if(l.find(".markTask").hasClass("completeHook"))return;T=$(".taskListStageName span[data-stageid='"+i+"']").parent(),T.next().find(".singleFolderTask").prepend(l)}else T=$("li.singleStage[data-stageid='"+i+"']"),T.find(".listStageContent > ul").prepend(l);v.accountID&&f(m).find(".chargeHeaderAvatar").attr("src",v.avatar).attr("data-id",v.accountID).data("id",v.accountID)}},b=function(i,m,v,W){var P=y.Z.getState().task.taskConfig,u=P.viewType,l=P.folderId;if(!l){k(i,m,v);return}if(v){var T=f(v).children(".singleTreeTask"),G=T.find(".subCount"),D=parseInt(G.text(),10)-1;D<=0?T.find(".subCounts").closest(".taskTagsBG").remove().end().remove():G.text(D)}var M=f(i);if(M.length)ee(i,m,v);else{var se={data:{stages:[{tasks:[W.ancestors],id:1,name:1}]},formatStatus:R.LR,formatTaskTime:R.Mq,isNew:!0,pageIndex:2,deep:0};t.e(1931).then(t.t.bind(t,81931,23)).then(function(ae){var ne=r().template(ae)(se);ee(i,m,v,$(ulHtml))})}},k=function(i,m,v){var W=f(v);if(W.length>0){var P=W.find(".subCount");P.text(parseInt(P.text(),10)-1),P.text()<=0&&W.find(".deteLine").prevAll().remove()}if(m){var u=$("#taskList tr[data-taskid='"+m+"']");if(u.length>0)if(u.find(".icon-task-card").length>0){var l=u.find(".subCount");l.text(parseInt(l.text(),10)+1)}else u.find(".taskListDate").prepend(`
              <span class="taskTagsBG">
                <i class="icon-task-card" tip="`+_l("\u5B50\u4EFB\u52A1")+`"></i>
                <span class="subCounts">
                  <span class="completedNum">0</span>/<span class="subCount">1</span>
                </span>
              </span>
            `)}},ee=function(i,m,v,W){var P=f(i),u=P.closest(".singleFolderTask"),l=P.parent(),T=void 0,G=void 0,D=void 0,M=void 0,se=void 0;if(P.length||(P=W,u=$("#taskList .selectTask").closest(".singleFolderTask")),!l.hasClass("singleFolderTask")&&!P.next().length){var ae=P.prev();if(ae.length)T=ae.data("deep"),G=(T-1)*20,ae.removeClass("tLine").children(".singleTreeTask").prepend('<div class="joinPrevLine" style="left:'+G+'px;"></div>'),ae.children(".tliLine").remove();else{var ne=l.parent();l.remove(),D=ne.children(".singleTreeTask"),ne.parent().is(".singleFolderTask")?D.find(".joinLine").remove().end().find(".nodeSwitch").removeClass("on off"):D.find(".joinLine").remove().end().find(".nodeSwitch").replaceWith('<span class="InlineBlockTop subNoneNode"></span><span class="InlineBlockTop nodeCircleSmall circle "></span>')}}if(!m)P.data("deep",1).attr("data-deep",1),P.children(".tliLine").remove(),D=P.children(".singleTreeTask"),D.find(".nodeCircleSmall").length?(D.find(".treeMark").prevAll().remove(),D.prepend('<span class="nodeSwitch "></span>')):D.find(".nodeSwitch").length&&(D.find(".subJoinLine").remove(),D.find(".joinPrevLine").remove(),D.find(".joinLine").removeClass("joinLineSub"),P.children(".singleSubFolderTask").removeClass("sub")),u.prepend(P),$.map(P.find(".singleTreeTask"),function(Y,oe){$(Y).css("paddingLeft",oe*20),$(Y).find(".joinLine").css("left",(oe+1)*20),$(Y).find(".joinPrevLine").css("left",oe*20)});else{var de=$("#taskList .listStageTaskContent li[data-taskid='"+m+"']");if(!de.find("ul").length&&de.find(".nodeSwitch.on").length)se=de.children(".singleTreeTask").find(".subCount"),se.text(parseInt(se.text(),10)+1),P.remove();else{var Ce=de.parent(),he=Ce.hasClass("singleFolderTask"),fe=de.children("ul").length;if(D=de.children(".singleTreeTask"),he)if(!fe)D.find(".nodeSwitch").addClass("on"),D.find(".taskListDate").before(`
                <span class="taskTagsBG">
                  <i class="icon-task-card" tip="`+_l("\u5B50\u4EFB\u52A1")+`"></i>
                  <span class="subCounts">
                    <span class="completedNum">0</span>/<span class="subCount">1</span>
                  </span>
                </span>
              `),P.remove();else{M=P.children(".singleTreeTask"),P.hasClass("tLine")||P.addClass("tLine"),M.find(".nodeSwitch.on,.nodeSwitch.off").length?(M.find(".subJoinLine").length<=0&&M.prepend('<span class="subJoinLine"></span>'),M.find(".joinPrevLine").remove()):(M.find(".joinPrevLine").remove(),M.find(".treeMark").prevAll().remove(),M.prepend('<span class="subJoinLine"></span>  <span class="InlineBlockTop subNoneNode"></span>  <span class="nodeCircleSmall circle "> </span> ')),de.children("ul").prepend(P),T=P.parent().parent().data("deep")+1,G=(T-1)*20,P.data("deep",T).children(".singleTreeTask").css("padding-left",G),P.children(".tliLine").length<=0&&P.prepend('<div class="tliLine" style="left:'+G+'px;"></div>');var Ee=de.children(".singleTreeTask").find(".subCount");Ee.text(parseInt(Ee.text(),10)+1)}else fe?(M=P.children(".singleTreeTask"),P.hasClass("tLine")||P.addClass("tLine"),M.find(".nodeSwitch.on,.nodeSwitch.off").length?(M.find(".joinPrevLine").remove(),M.find(".subJoinLine").length||M.prepend('<span class="subJoinLine"></span>')):(M.find(".joinPrevLine").remove(),M.find(".treeMark").prevAll().remove(),M.prepend('<span class="subJoinLine"></span>  <span class="InlineBlockTop subNoneNode"></span>  <span class="nodeCircleSmall circle "> </span> ')),de.children("ul").prepend(P),re(P),de.is(".listStageTaskContent")||(se=D.find(".subCount"),se.text(parseInt(se.text(),10)+1))):(D.find(".subNoneNode").remove(),D.find(".nodeCircleSmall").replaceWith('<span class="nodeSwitch on "></span>'),D.find(".taskListDate").before(`
                <span class="taskTagsBG">
                  <i class="icon-task-card" tip="`+_l("\u5B50\u4EFB\u52A1")+`"></i>
                  <span class="subCounts">
                    <span class="completedNum">0</span>/<span class="subCount">1</span>
                  </span>
                </span>
              `),P.remove())}}},re=function Q(i){var m=i.parent().parent().data("deep")+1,v=(m-1)*20;i.data("deep",m).children(".singleTreeTask").css("padding-left",v),!i.children(".tliLine").length&&i.parent().children("li").length>1&&i.prepend('<div class="tliLine" style="left:'+v+'px;"></div>');var W=i.children(".singleTreeTask").find(".joinPrevLine");W.length&&W.css("left",v);var P=i.children("ul");if(P.length){i.children(".singleTreeTask").find(".joinLine").css("left",m*20);for(var u=P.children("li"),l=u.length,T=0;T<l;T++)Q(u.eq(T))}},ie=function(i,m){var v=y.Z.getState().task.taskConfig,W=v.viewType,P=v.folderId;P?W===1?$("#taskList  li[data-taskid='"+i+"']").children(".singleTreeTask ").find(".taskListName .spanName ").text(m).attr("title",m):$(".listStageContent ul li[data-taskid='"+i+"']").find(".listStageTaskName").text(m).attr("title",m):$("#taskList tr[data-taskid='"+i+"']").find(".taskListName .spanName").text(m).attr("title",m)},le=function(i,m){var v=f(i).find(".taskStar");if(m?v.removeClass("icon-star-hollow").addClass("icon-task-star"):v.removeClass("icon-task-star").addClass("icon-star-hollow"),!f(i).find(".markTask.completeHook").length){var W=$(".aboutMeStar .allCountTask"),P=parseInt(W.text()||0,10);m?P=P+1:P=P-1,W.text(P<=0?"":P)}},E=function(i){var m=y.Z.getState().task.taskConfig,v=m.viewType,W=m.folderId;if(!W||v===1)y.Z.dispatch((0,o.gI)(i));else{var P=i.parentID;if(P){var u=f(P);if(u.find(".icon-task-card").length>0){var l=u.find(".subCount");l.text(parseInt(l.text(),10)+1)}else u.find(".deteLine").before(`
              <span class="taskTagsBG">
                <i class="icon-task-card" tip="`+_l("\u5B50\u4EFB\u52A1")+`"></i>
                <span class="subCounts">
                  <span class="completedNum">0</span>/<span class="subCount">1</span>
                </span>
              </span>
            `)}}},w=function(i){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,v=singleFolder.replace("#include.singleFolderComm",singleFolderComm),W=$(doT.template(v)([i])),P=$(".networkFolderList[data-projectid="+i.projectID+"] .folderList");P.find(".projectFolder").length>0?P.find(".projectFolder").last().after(W):P.prepend(W),m&&W.trigger("click"),$(".networkOnly .noFolderList").remove()},K=function(i,m,v){ajaxRequest.updateFolderTop({folderID:i,isTop:m}).then(function(W){if(W.status){var P=$(".folderList li[data-id='"+i+"']"),u=Store.getState().task.taskConfig.folderId;P.length||(w(W.data,!1),P=$(".folderList li[data-id='"+i+"']"));var l=$(".topFolderList .folderList li").length;if(!m)P.data("istop",!1).first().remove(),l===1&&$(".topFolderList").remove(),P.toggleClass("ThemeBGColor8",u===i);else{var T=P.removeClass("ThemeBGColor8").clone().toggleClass("ThemeBGColor8",u===i);if(P.add(T).data("istop",!0),l)$(".topFolderList .folderList").prepend(T).show();else{var G='<div class="topFolderList ThemeBorderColor7"><div class="popTops ThemeColor9">'+_l("\u7F6E\u9876\u9879\u76EE")+'</div><ul class="folderList"></ul></div>';$(".navContent").prepend(G),$(".topFolderList .folderList").html(T)}}$.isFunction(v)&&v()}else errorMessage(W.error)})},N=function(i,m,v){if(alert(m?_l("\u5220\u9664\u6210\u529F"):_l("\u9000\u51FA\u6210\u529F")),v){navigateTo(location.pathname.replace("/"+i,""));return}$(".folderList li[data-id='"+i+"']").slideUp(function(){$(".topFolderList .folderList li").length||$(".topFolderList").remove()}),Store.getState().task.taskConfig.folderId===i&&$("#taskNavigator .taskType li:visible:first").click()},F=function(i,m){_DeleteReconfirm({title:_l("\u5F7B\u5E95\u5220\u9664\u9879\u76EE\u201C%0\u201D",$(".folderList li[data-id="+i+"] .folderName").text()||$(".taskToolbar .folderName").text()),description:_l("\u9879\u76EE\u5C06\u5F7B\u5E95\u5220\u9664\u4E14\u65E0\u6CD5\u6062\u590D\u3002\u8BF7\u786E\u8BA4\u60A8\u548C\u5176\u4ED6\u9879\u76EE\u7684\u53C2\u4E0E\u8005\u90FD\u4E0D\u518D\u9700\u8981\u9879\u76EE\u4E2D\u7684\u6570\u636E\u518D\u6267\u884C\u6B64\u64CD\u4F5C"),data:[{text:_l("\u53EA\u5220\u9664\u6B64\u9879\u76EE"),value:!1},{text:_l("\u5220\u9664\u9879\u76EE\u548C\u9879\u76EE\u4E0B\u7684\u6240\u6709\u4EFB\u52A1"),value:!0}],onOk:function(W){ajaxRequest.removeFolder({folderID:i,isDeleteTask:W}).then(function(P){P.status?(N(i,!0,m),$(".folderList li[data-id="+i+"]").remove()):errorMessage(P.error)})}})},h=function(i,m){_Dialog.confirm({title:_l("\u786E\u5B9A\u9000\u51FA\u8BE5\u9879\u76EE\uFF1F"),closable:!1,onOk:function(){ajaxRequest.removeFolderMember({folderID:i,accountID:md.global.Account.accountId,isRemoveTaskMember:!1}).then(function(W){W.status?N(i,!1,m):errorMessage(W.error)})}})},z=function(i,m,v,W){ajaxRequest.updateFolderArchived({folderID:m,archived:v}).then(function(P){if(P.status){checkIsProject(i)||(i="");var u=$(".folderList li[data-id='"+m+"']"),l=$(".networkFolderList[data-projectid="+i+"]");if(!u.length)return;if(u.toggleClass("archivedFolder",v),u.data("ispigeonhole",v),u=u.filter(":last"),v)l.find(".pigeonholeFolderList").prepend(u).closest(".pigeonholeFolder").removeClass("Hidden");else if(P.data==="1")l.find(".slideFolderList").prepend(u.data("ishidden",!0).attr("data-ishidden","true")).closest(".slideFolders").removeClass("Hidden");else{var T=P.data?P.data.toLowerCase():"",G=l.find(".projectFolder"),D=l.find("li[data-fileid='"+T+"']");D.length>0?D.find(".projectFolderUl").prepend(u):G.length?l.find(".projectFolder").last().after(u):l.find(".folderList").prepend(u)}var M=l.find(".pigeonholeFolder");M.find(".commFolder").length||M.removeClass("selectPigeonhole").find(".initFilp").removeClass("filp").end().find(".pigeonholeFolderList").hide(),$.isFunction(W)&&W()}else errorMessage(P.error)})},X=function(i){g.Z.confirm({title:_l("\u7533\u8BF7\u52A0\u5165\u9879\u76EE1"),dialogClasses:"joinFolder",children:p.createElement("div",{className:"folderInfo"},p.createElement("textarea",{className:"ThemeBorderColor3 w100",autofocus:!0,placeholder:_l("\u5411\u8D1F\u8D23\u4EBA\u8BF4\u660E\u4F60\u60F3\u8981\u52A0\u5165\u9879\u76EE\u7684\u539F\u56E0"),style:{borderRadius:"4px",borderColor:"#ccc !important",fontSize:"13px",height:"8em",marginTop:"15px",padding:"3px 5px",resize:"none"}})),onOk:function(){te.Z.applyFolderMember({folderID:i,applyInfo:$(".joinFolder textarea").val()}).then(function(v){v.status?alert(_l("\u64CD\u4F5C\u6210\u529F")):(0,R.N3)(v.error)})}})},B=function(i,m){te.Z.getLeftMenu({other:i,projectId:m}).then(function(v){if(v.status){var W=v.data;if(i)$("#taskNavigator .responsible .allCountTask:last").text(W.otherCharge||""),$("#taskNavigator .trust .allCountTask:last").text(W.otherRelease||""),$("#taskNavigator .participate .allCountTask:last").text(W.otherParticipate||""),$("#taskNavigator .otherAndMe .allCountTask:last").text(W.withMe||""),$("#taskNavigator .otherResponsible .allCountTask:last").text(W.otherCharge||"");else if($("#taskNavigator .myTask .allCountTask:first").text(W.me||""),$("#taskNavigator .aboutMeStar .allCountTask:first").text(W.start||""),W.unreadTask){if($("#taskNavigator .myTask").find(".newTip").length){$("#taskNavigator .myTask .newTip").attr("data-count",W.unreadTask);return}$("#taskNavigator .myTask").find(".allCountTask:first").before('<span class="newTip"><span class="tipCircle circle"></span></span>').siblings(".newTip").attr("data-count",W.unreadTask)}else $("#taskNavigator .myTask .newTip").remove()}else(0,R.N3)(source.error)})},x=function(i,m){var v=y.Z.getState().task.taskConfig,W=v.viewType,P=v.folderId;if(W===2&&P){var u=$(".singleTaskStage[data-taskid="+i+"]"),l="";if(m.forEach(function(M){M.value=(0,R.B_)(M),M.type===28&&M.value==="0"&&(M.value=""),M.value&&(l+='<div class="listStageCustomItem">',M.type!==28?l+=`
          <div class="listStageCustomItemDesc Font12">
            <span class="listStageCustomItemColor">`+M.controlName+`\uFF1A</span>
            `+(0,d.u1)(M.value)+(M.type===6||M.type===8?M.unit:"")+`
          </div>
        `:l+=`
          <div class="flexRow Font12">
            <span class="mRight10">
              <span class="listStageCustomItemColor">
                <span class="overflow_ellipsis">`+M.controlName+`</span>\uFF1A
              </span>
              `+(M.enumDefault!==1?M.value+"/10":"")+`
            </span>
            <span class="listStageCustomItemStar flex" data-type="score" data-enum="`+M.enumDefault+'" data-score="'+M.value+`"></span>
          </div>
        `,l+="</div>")}),u.find(".listStageCustomBox").length?u.find(".listStageCustomBox").html(l):u.find(".listStageDate").after('<div class="listStageCustomBox">'+l+"</div>"),!u.find(".Score-wrapper").length){var T=u.find(".listStageCustomItemStar").data("enum"),G=u.find(".listStageCustomItemStar").data("score"),D="#f44336";G===6||T===1?D="#fed156":G>6&&(D="#4caf50"),L.render(p.createElement(ce.Z,{type:T===1?"star":"line",score:G,foregroundColor:D,backgroundColor:T===1?"#9e9e9e":"#e0e0e0",disabled:!0,count:T===1?5:10}),u.find(".listStageCustomItemStar")[0])}}}},52106:(lt,Te,t)=>{"use strict";t.d(Te,{B_:()=>S,Ie:()=>f,LR:()=>s,Mq:()=>n,N3:()=>r,W$:()=>A,WQ:()=>C,Xn:()=>V});var ce=t(63239),g=t.n(ce),p=t(96486),L=t.n(p),te=t(30381),R=t.n(te);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(69288);var a=t(67294),r=function(c){c?alert(c.msg||c.ex,2):(alert(_l("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"),2),console.log(c.code))},o=function(c){var q=window.localStorage.getItem(md.global.Account.accountId+c);if(q){try{JSON.parse(q)}catch(b){return q}return JSON.parse(q)}},d=function(c,q){safeLocalStorageSetItem(md.global.Account.accountId+c,_JSON$stringify(q))},Z=function(c){var q=o("TaskCenterState"),b="MyTask";return c===8?b="Star":c===9&&(b="Subordinate"),!q||!q[b]?config.defaultState:q[b]},H=function(){var c=o("TaskCenterState");return!c||!c.Folder?config.defaultState:c.Folder},U=function(c,q){var b=o("TaskCenterState")||{},k="MyTask";c?c===8?k="Star":c===9&&(k="Subordinate"):k="Folder",b[k]={listStatus:q.listStatus,listSort:q.listSort,completeTime:q.completeTime,lastMyProjectId:q.lastMyProjectId,projectId:q.projectId,attachmentViewType:q.attachmentViewType,viewType:q.viewType,folderId:q.folderId,taskFilter:c},b.Active=k!=="Folder"?q.taskFilter:"",d("TaskCenterState",b)},f=function(c){var q=!1;return $.map(md.global.Account.projects,function(b){c===b.projectId&&(q=!0)}),q},V=function(){return R()().format("YYYY-MM-DD HH:mm")},C=function(c,q){var b=R()(V()),k=b.year(),ee=c.year(),re=(R()(b.format("YYYY-MM-DD"))-R()(c.format("YYYY-MM-DD")))/24/60/60/1e3,ie="",le="";return re==0?(ie=_l("\u4ECA\u5929"),le="#4caf50",ie=ie+" "+c.format("HH:mm")):re==-1?(ie=_l("\u660E\u5929"),le="#2196F3",ie=ie+" "+c.format("HH:mm")):re==1?(ie=_l("\u6628\u5929"),le="#2196F3",ie=ie+" "+c.format("HH:mm")):R()(b).isSame(c,"week")?(ie=c.format("ddd"),le="#2196F3",ie=ie+" "+c.format("HH:mm")):k===ee?(ie=q?c.format("MMMDo HH:mm"):c.format("MMMDo"),le="#757575"):(ie=q?c.format("YYYY/MM/DD HH:mm"):c.format("YYYY/MM/DD"),le="#757575"),{color:le,text:""+ie}},O=function(c,q,b){var k=R()(c),ee=R()(q),re="";if(c&&!q){var ie=C(k,b);return re='<span style="color:'+ie.color+';">'+ie.text+" "+_l("\u5F00\u59CB")+"</span>",re}if(!c&&q){var le=C(ee,b);return re='<span style="color:'+le.color+';">'+le.text+" "+_l("\u622A\u6B62")+"</span>",re}if(k.format("YYYY-MM-DD")===ee.format("YYYY-MM-DD")){var E=C(k,!0);re='<span style="color:'+E.color+';">'+E.text+" ~ "+ee.format("HH:mm")+"</span>"}else{var w=C(k,b),K=C(ee,b),N="#757575";w.color=="#4caf50"||K.color=="#4caf50"?N="#4caf50":(w.color=="#2196F3"||K.color=="#2196F3")&&(N="#2196F3"),re='<span style="color:'+N+';">'+w.text+" ~ "+K.text+"</span>"}return re},n=function(c,q,b,k,ee){var re=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,ie=V(),le=function(h,z){var X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return'<span style="color:'+z+';" class="'+X+'">'+h+"</span>"},E={gray:"#757575",blue:"#2196f3",green:"#4caf50",red:"#ff0000",yellow:"#ffa414"},w=void 0,K=void 0,N=void 0;if(!q&&!b)return"";if(re)return O(q,b,!1);if(c){if(!b||(w=Math.ceil((R()(ee)-R()(b))/60/60/1e3),K=Math.floor(Math.abs(w)/24),N=Math.abs(w)%24,w===0))return le(_l("\u6309\u65F6\u5B8C\u6210"),E.green);if(w<0){if(K)return le(_l("\u63D0\u524D%0\u5929\u5B8C\u6210",K),E.green);if(N)return le(_l("\u63D0\u524D%0\u5C0F\u65F6\u5B8C\u6210",N),E.green)}else{if(K)return le(_l("\u903E\u671F%0\u5929\u5B8C\u6210",K),E.red);if(N)return le(_l("\u903E\u671F%0\u5C0F\u65F6\u5B8C\u6210",N),E.red)}}if(q&&(!k&&R()(ie)>R()(q)||k&&R()(k)>R()(ie)))if(b&&R()(ie)>R()(b)){if(w=Math.ceil((R()(ie)-R()(b))/60/60/1e3),K=Math.floor(w/24),N=w%24,K)return le(_l("\u903E\u671F%0\u5929",K),E.red,"taskDelayNoComplete");if(N)return le(_l("\u903E\u671F%0\u5C0F\u65F6",N),E.red,"taskDelayNoComplete")}else{if(w=Math.abs(Math.ceil((R()(ie)-R()(q))/60/60/1e3)),K=Math.floor(w/24),N=w%24,K)return le(_l("\u5EF6\u671F%0\u5929\u672A\u5F00\u59CB",K),E.yellow,"taskDelayNoStart");if(N)return le(_l("\u5EF6\u671F%0\u5C0F\u65F6\u672A\u5F00\u59CB",N),E.yellow,"taskDelayNoStart")}if(b&&R()(ie)>R()(b)){if(w=Math.ceil((R()(ie)-R()(b))/60/60/1e3),K=Math.floor(w/24),N=w%24,K)return le(_l("\u903E\u671F%0\u5929",K),E.red,"taskDelayNoComplete");if(N)return le(_l("\u903E\u671F%0\u5C0F\u65F6",N),E.red,"taskDelayNoComplete")}return O(q,b,!1)},s=function(c,q,b){var k="",ee="",re=1;return c==0?(ee=_l("\u6807\u8BB0\u5B8C\u6210"),q?b!=1?(k="lockTask",ee=_l("\u4EFB\u52A1\u5DF2\u9501\u5B9A\uFF0C\u65E0\u6CD5\u64CD\u4F5C"),re="0"):(k="lockToOtherTask",ee=_l("\u4EFB\u52A1\u5DF2\u9501\u5B9A\uFF0C\u4F46\u6211\u662F\u521B\u5EFA\u8005\u6216\u8D1F\u8D23\u4EBA\u53EF\u4EE5\u64CD\u4F5C")):b!=1&&b!=2&&(k="disable",ee=_l("\u53EA\u6709\u6B64\u4EFB\u52A1\u7684\u6210\u5458\u624D\u80FD\u64CD\u4F5C"))):(ee=_l("\u5DF2\u5B8C\u6210\u4EFB\u52A1\uFF0C\u70B9\u51FB\u6807\u8BB0\u4E3A\u672A\u5B8C\u6210"),k="completeHook",q&&b!=1&&(re="0")),{style:k,tip:ee,auth:b}},j=function(c,q){var b=void 0,k=q?"":"Hidden",ee=" icon-task-soon";switch(c){case 0:b=_l("\u9009\u62E9\u4F55\u65F6\u5904\u7406\u8FD9\u6761\u4EFB\u52A1");break;case 1:b=_l("\u5DF2\u5206\u914D\u4E3A\u4ECA\u5929\u8981\u505A\uFF0C\u70B9\u51FB\u53EF\u91CD\u65B0\u5206\u914D"),ee=" icon-task-today";break;case 2:b=_l("\u5DF2\u5206\u914D\u4E3A\u6700\u8FD1\u8981\u505A\uFF0C\u70B9\u51FB\u53EF\u91CD\u65B0\u5206\u914D");break;case 3:b=_l("\u5DF2\u5206\u914D\u4E3A\u4EE5\u540E\u8003\u8651\uFF0C\u70B9\u51FB\u53EF\u91CD\u65B0\u5206\u914D"),ee=" icon-task-later";break;default:break}return q?'<span class="myTaskIcon myTaskTip" data-tip="'+b+'"><i class="icon-task-soon"></i></span>':'<span class="myTaskIcon '+k+ee+' myTaskTip" data-tip="'+b+'"></span>'},A=function(c,q){c?q():y.Z.confirm({title:_l("\u5C06\u4EFB\u52A1\u8BBE\u4E3A\u672A\u5B8C\u6210"),children:a.createElement("div",{style:{color:"#999"}},_l("\u60A8\u5728\u4FEE\u6539\u4E00\u4E2A\u5DF2\u88AB\u6807\u8BB0\u4E3A\u5B8C\u6210\u7684\u4EFB\u52A1\uFF0C\u82E5\u5C06\u5176\u8BBE\u4E3A\u672A\u5B8C\u6210\uFF0C\u5219\u5F53\u524D\u7684\u201C\u4EFB\u52A1\u5B8C\u6210\u65F6\u95F4\u201D\u6570\u636E\u5C06\u88AB\u5220\u9664\u3002\u662F\u5426\u786E\u8BA4\u4FEE\u6539\uFF1F")),okText:_l("\u8BBE\u4E3A\u672A\u5B8C\u6210"),onOk:function(){q()}})},S=function(c){if(c.type===9)return c.value&&c.value!=="0"?L().find(c.options,function(k){var ee=k.key;return ee===c.value}).value:"";if(c.type===10){for(var q=[],b=0;b<c.value.length;b++)c.value.substr(b,1)!=="0"&&q.push("1"+c.value.slice(b+1).replace(/1/g,0));return c.value=L().map(c.options,function(k){return q.indexOf(k.key)>=0?k.value:""}),L().remove(c.value,function(k){return k===""}),c.value.join(",")}return c.type===11?c.value!=="0"?L().find(c.options,function(k){var ee=k.key;return ee===c.value}).value:"":c.type===14?L().map(JSON.parse(c.value),function(k){return k.originalFilename}).join(", "):c.type===15?c.value.split(" ")[0]:c.value}},65710:(lt,Te,t)=>{"use strict";t.d(Te,{Bi:()=>g});var ce={LIST_ITEM:"LIST_ITEM",LIST_TAB:"LIST_TAB",DISPLAY_ITEM:"DISPLAY_ITEM",DISPLAY_TAB:"DISPLAY_TAB",DISPLAY_LIST_TAB:"DISPLAY_LIST_TAB"},g=12,p="TEMP_WIDGET",L={INSERT_NEW_LINE:"INSERT_NEW_LINE",INSERT_TO_COL:"INSERT_TO_COL",INSERT_TO_ROW_END:"INSERT_TO_ROW_END",INSERT_ROW:"INSERT_ROW"},te={VERTICAL:16},R={common:[ce.LIST_ITEM,ce.DISPLAY_ITEM,ce.DISPLAY_LIST_TAB],tab:[ce.LIST_TAB,ce.DISPLAY_TAB,ce.DISPLAY_LIST_TAB],tabItem:[ce.LIST_ITEM,ce.DISPLAY_ITEM]}},1694:(lt,Te,t)=>{"use strict";t.d(Te,{$D:()=>n,Bs:()=>I,DZ:()=>r,E2:()=>S,Ew:()=>c,ML:()=>C,NE:()=>Z,Qg:()=>o,Rh:()=>U,Ug:()=>te,aJ:()=>p,d$:()=>y,kr:()=>b,mQ:()=>L,pB:()=>q,pf:()=>a,qp:()=>H,sI:()=>g,tC:()=>j,wD:()=>ce,wP:()=>k,y:()=>d});var ce="https://help.mingdao.com/worksheet/controls",g=["#2196F3","#08C9C9","#00C345","#FAD714","#FF9300","#F52222","#EB2F96","#7500EA","#2D46C4","#484848","#C9E6FC","#C3F2F2","#C2F1D2","#FEF6C6","#FFE5C2","#FDCACA","#FACDE6","#DEC2FA","#CCD2F1","#D3D3D3"],p=["#1E85D9","#07B0B0","#00A83B","#E0C112","#E68600","#DB1F1F","#D12A86","#6900D1","#273DAB","#2E2E2E","#A3D6FF","#A9E9E9","#A3E9BC","#FDF1AA","#FFD8A3","#FCAFAF","#F8B4D9","#CDA3F8","#B3BCEA","#BDBDBD"],L=[14,10010,21,22,29,34,35,36,37,41,42,43,45,47,49,51,52],te=[22,25,30,31,32,33,37,38,43,45,47,51,52,10010],R=null,y=[2,3,4,5,6,7,8,14,35,43,49,50],a=[5,41,42],r=[2,3,4,5,7,8,9,10,11,15,16,19,23,24,26,27,28,35,36,41,46,48],o=[22,10010],d=[6,14,21,22,25,29,30,31,32,33,34,37,38,43,45,47,49,51,52,10010],Z=[30,31,32,37,38],H=[14,21,22,34,36,41,42,43,45,47,49,51,52,10010],U=[20,22,25,29,34,35,43,45,47,49,50,51,52,10010],f=null,V=null,C=[21,22,34,41,52,10010],O=null,n=[43,49,52],s=2e3,j=1e3,A=null,S=[3,5,7,8],I=[29,34,51],c=[34],q=[2,3,6,14,15,16,23,24,26,27,28,29,31,32,33,35,38,40,42,46,48,51],b=[2,29,43],k=[2,3,4,5,6,7,8,15,16,19,23,24,25,31,32,33,37,38,46]},80935:(lt,Te,t)=>{"use strict";t.d(Te,{F8:()=>U,J:()=>f,Lq:()=>O,V7:()=>n,e7:()=>C,mf:()=>s});var ce=t(24043),g=t.n(ce),p=t(63239),L=t.n(p),te=t(96486),R=t.n(te),y=5,a="#FED156",r="#FF9300",o="#F52222",d="#EB2F96",Z="#2196F3",H="#00C345",U=/^(1887|7596|7798)$/.test(t.j)?null:["#2196F3","#08C9C9","#00C345","#FAD714","#FF9300","#F52222","#EB2F96","#7500EA","#2D46C4","#484848"],f={max:5,itemicon:"star",itemcolor:L()({type:1,color:"#FED156",colors:[]})},V={max:10,itemicon:"rectangle",itemcolor:L()({type:2,color:"",colors:[{key:"1",value:o},{key:"2",value:o},{key:"3",value:o},{key:"4",value:o},{key:"5",value:a},{key:"6",value:a},{key:"7",value:a},{key:"8",value:H},{key:"9",value:H},{key:"10",value:H}]})},C=function(A,S){return A&&A.length===S&&A.length>0?A:g()({length:S}).map(function(I,c){return{key:""+(c+1),value:a}})},O=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=A.advancedSetting||{},I=S.itemicon,c=S.itemcolor,q=JSON.parse(c||"{}");return q.type===1?q.color:R().get(R().find(s,function(b){return b.name===I}),"defaultColor")},n=function(A){return A.enumDefault===2?V:f},s=[{name:"star",defaultColor:a,defaultNum:y},{name:"sentiment_very_satisfied",defaultColor:a,defaultNum:y},{name:"lightbulb1",defaultColor:a,defaultNum:y},{name:"wb_sunny",defaultColor:a,defaultNum:y},{name:"thumb_up_14",defaultColor:r,defaultNum:y},{name:"rocket_launch",defaultColor:r,defaultNum:y},{name:"fire",defaultColor:o,defaultNum:y},{name:"favorite",defaultColor:o,defaultNum:y},{name:"bug",defaultColor:o,defaultNum:y},{name:"warning",defaultColor:o,defaultNum:y},{name:"emergency",defaultColor:o,defaultNum:y},{name:"folder-top",defaultColor:o,defaultNum:y},{name:"flag",defaultColor:o,defaultNum:y},{name:"bookmark",defaultColor:o,defaultNum:y},{name:"clear_bold",defaultColor:o,defaultNum:y},{name:"flower",defaultColor:d,defaultNum:y},{name:"inbox",defaultColor:Z,defaultNum:y},{name:"snow",defaultColor:Z,defaultNum:y},{name:"shield",defaultColor:Z,defaultNum:y},{name:"rectangle",defaultColor:Z,defaultNum:y},{name:"rounded_square",defaultColor:H,defaultNum:y}]},26637:(lt,Te,t)=>{"use strict";t.d(Te,{$Y:()=>L,Az:()=>U,PE:()=>H,Qs:()=>ce,W9:()=>d,bV:()=>a,fl:()=>r,g1:()=>R,hn:()=>o,jW:()=>p,no:()=>Z,xg:()=>y});var ce=[{key:"card",text:_l("\u5361\u7247"),value:"1"},{key:"dropdown",text:_l("\u4E0B\u62C9\u6846"),value:"3"}],g=[{text:_l("\u5355\u6761"),value:1},{text:_l("\u591A\u6761"),value:2}],p={0:_l("\u5B50\u8868"),1:_l("\u5355\u6761"),2:_l("\u591A\u6761")},L={1:_l("\u5361\u7247"),2:_l("\u5217\u8868"),3:_l("\u4E0B\u62C9\u6846"),5:_l("\u8868\u683C"),6:_l("\u6807\u7B7E\u9875\u8868\u683C")},te=[{value:"3",text:_l("\u5929")},{value:"4",text:_l("\u6708")},{value:"5",text:_l("\u5E74")}],R=[{text:_l("\u5E74%04019"),value:"5"},{text:_l("\u6708%04020"),value:"4"},{text:_l("\u5929%04021"),value:"3"},{text:_l("\u65F6%04022"),value:"2"},{text:_l("\u5206%04023"),value:"1"},{text:_l("\u79D2%04024"),value:"6"}],y=[{value:0,text:_l("\u5168\u90E8")},{value:1,text:_l("\u4EFB\u52A1")},{value:2,text:_l("\u9879\u76EE")},{value:3,text:_l("\u65E5\u7A0B")},{value:5,text:_l("\u7533\u8BF7\u5355")}],a={1:[{key:"1",value:_l("\u5F00\u542F")},{key:"0",value:_l("\u5173\u95ED")}],2:[{key:"1",value:_l("\u662F%04015")},{key:"0",value:_l("\u5426")}]},r=[{value:"0",text:_l("\u52FE\u9009\u6846")},{value:"1",text:_l("\u5F00\u5173%02066")},{value:"2",text:_l("\u662F/\u5426%02067")}],o=[{value:"0",format:_l("YYYY-MM-DD")},{value:"4",format:_l("YYYY/MM/DD")},{value:"1",text:_l("\u4E2D\u56FD"),format:_l("YYYY\u5E74M\u6708D\u65E5")},{value:"2",text:"US",format:_l("M/D/YYYY")},{value:"3",text:"EU",format:_l("D/M/YYYY")}],d=[{text:_l("\u5168\u63A9\u76D6"),value:"all"},{text:_l("\u59D3\u540D"),subText:_l("-\u663E\u793A\u524D1\u4E2A\u5B57\uFF0C\u540E1\u4E2A\u5B57"),value:"1"},{text:_l("\u624B\u673A\u53F7"),subText:_l("-\u663E\u793A\u524D3\u4F4D\uFF0C\u540E4\u4F4D"),value:"2"},{text:_l("\u90AE\u7BB1"),subText:_l("-\u663E\u793A\u524D3\u4F4D\uFF0C@\u548C\u4E4B\u540E\u7684\u5B57"),value:"3"},{text:_l("\u91D1\u989D"),subText:_l("-\u5168\u63A9\u76D6\uFF0C\u865A\u62DF\u4E3A5\u4F4D"),value:"4"},{text:_l("\u8EAB\u4EFD\u8BC1\u4EF6"),subText:_l("-\u663E\u793A\u540E4\u4F4D"),value:"5"},{text:_l("\u4F4F\u5740"),subText:_l("-\u663E\u793A\u524D4\u4E2A\u5B57\uFF0C\u540E4\u4E2A\u5B57"),value:"6"},{text:_l("IP\u5730\u5740"),subText:_l("-\u663E\u793A\u7B2C1\u6BB5IP"),value:"7"},{text:_l("\u8F66\u724C\u53F7"),subText:_l("-\u663E\u793A\u524D1\u4E2A\u5B57\uFF0C\u540E2\u4F4D"),value:"8"}],Z=[{text:_l("\u81EA\u5B9A\u4E49\u89C4\u5219"),value:"custom"}],H=[{key:"card",text:_l("\u5361\u7247"),value:"1"},{key:"list",text:_l("\u8868\u683C\uFF08\u65E7\uFF09"),value:"2",disabled:!0},{key:"text",text:_l("\u6587\u672C"),value:"3"},{key:"embed_list",text:_l("\u8868\u683C"),value:"5"},{key:"tab_list",text:_l("\u6807\u7B7E\u9875\u8868\u683C"),value:"6"}],U={0:"13px",1:"16px",2:"18px",3:"20px",4:"24px"}},86674:(lt,Te,t)=>{"use strict";t.d(Te,{Bk:()=>U,DN:()=>r,Hp:()=>q,R4:()=>ee,Vh:()=>b,XT:()=>I,_Q:()=>Z,a1:()=>H,cU:()=>f,c_:()=>n,g5:()=>o,gE:()=>d,gs:()=>C,j$:()=>k,x0:()=>O,xj:()=>V});var ce=t(88239),g=t(96486),p=t.n(g),L=t(91247),te=t(65710),R=t(80935),y=function(){return[{key:(0,L.Z)(),value:_l("\u9009\u98791"),isDeleted:!1,index:1,checked:!0,color:"#2196F3"},{key:(0,L.Z)(),value:_l("\u9009\u98792"),isDeleted:!1,index:2,checked:!1,color:"#08C9C9"},{key:(0,L.Z)(),value:_l("\u9009\u98793"),isDeleted:!1,index:3,checked:!1,color:"#00C345"}]},a=function(){var ie=y();return{options:ie}},r={TEXT:2,MOBILE_PHONE:3,TELEPHONE:4,EMAIL:5,NUMBER:6,CRED:7,MONEY:8,FLAT_MENU:9,MULTI_SELECT:10,DROP_DOWN:11,ATTACHMENT:14,DATE:15,DATE_TIME:16,AREA_PROVINCE:19,RELATION:21,SPLIT_LINE:22,AREA_CITY:23,AREA_COUNTY:24,MONEY_CN:25,USER_PICKER:26,DEPARTMENT:27,SCORE:28,RELATE_SHEET:29,SHEET_FIELD:30,FORMULA_NUMBER:31,CONCATENATE:32,AUTO_ID:33,SUB_LIST:34,CASCADER:35,SWITCH:36,SUBTOTAL:37,FORMULA_DATE:38,LOCATION:40,RICH_TEXT:41,SIGNATURE:42,OCR:43,EMBED:45,TIME:46,BAR_CODE:47,ORG_ROLE:48,SEARCH_BTN:49,SEARCH:50,RELATION_SEARCH:51,SECTION:52,REMARK:10010},o={TEXT:{widgetName:_l("\u6587\u672C"),icon:"letter_a",defaultHint:_l("\u586B\u5199\u6587\u672C\u5185\u5BB9"),intro:_l("\u53EF\u8BBE\u4E3A\u5355\u884C\u6216\u591A\u884C\uFF0C\u53EF\u8F93\u5165http\u94FE\u63A5")},MOBILE_PHONE:{icon:"call",widgetName:_l("\u7535\u8BDD"),intro:_l("\u53EF\u8BBE\u4E3A\u624B\u673A \u6216 \u5EA7\u673A\uFF0C\u5E76\u9A8C\u8BC1\u683C\u5F0F"),defaultHint:_l("\u586B\u5199\u624B\u673A\u53F7\u7801")},TELEPHONE:{icon:"call",widgetName:_l("\u7535\u8BDD"),intro:_l("\u53EF\u8BBE\u4E3A\u624B\u673A \u6216 \u5EA7\u673A\uFF0C\u5E76\u9A8C\u8BC1\u683C\u5F0F"),defaultHint:_l("\u586B\u5199\u5EA7\u673A\u53F7\u7801")},EMAIL:{icon:"email",widgetName:_l("\u90AE\u7BB1"),defaultHint:_l("\u586B\u5199\u90AE\u7BB1"),intro:_l("\u8F93\u5165\u90AE\u7BB1\uFF0C\u5E76\u9A8C\u8BC1\u683C\u5F0F")},NUMBER:{icon:"number_6",widgetName:_l("\u6570\u503C"),defaultHint:_l("\u586B\u5199\u6570\u503C"),intro:_l("\u6700\u5927\u652F\u6301\u8F93\u516516\u4F4D\u6570\u5B57")},CRED:{icon:"id_number",widgetName:_l("\u8BC1\u4EF6"),intro:_l("\u53EF\u4EE5\u9A8C\u8BC1\u8EAB\u4EFD\u8BC1\u3001\u62A4\u7167\u3001\u6E2F\u6FB3\u53F0\u901A\u884C\u8BC1")},MONEY:{icon:"amount_rmb",widgetName:_l("\u91D1\u989D"),defaultHint:_l("\u586B\u5199\u91D1\u989D"),intro:_l("\u8F93\u5165\u8D27\u5E01\u91D1\u989D\uFF0C\u53EF\u8BBE\u7F6E\u8D27\u5E01\u683C\u5F0F")},FLAT_MENU:{icon:"arrow_drop_down_circle",widgetName:_l("\u5355\u9009"),intro:_l("\u4ECE\u9884\u8BBE\u7684\u4E0B\u62C9\u83DC\u5355\u4E2D\u9009\u62E9\u4E00\u9879\uFF0C\u53EF\u8BBE\u4E3A\u5C06\u9009\u9879\u5E73\u94FA"),moreIntroLink:"https://help.mingdao.com/worksheet/control-select"},MULTI_SELECT:{icon:"multi_select",widgetName:_l("\u591A\u9009"),intro:_l("\u4ECE\u9884\u8BBE\u7684\u9009\u9879\u4E2D\u9009\u62E9\u4E00\u9879\u6216\u8005\u591A\u9879"),moreIntroLink:"https://help.mingdao.com/worksheet/control-select"},DROP_DOWN:{icon:"arrow_drop_down_circle",widgetName:_l("\u5355\u9009"),intro:_l("\u4ECE\u9884\u8BBE\u7684\u4E0B\u62C9\u83DC\u5355\u4E2D\u9009\u62E9\u4E00\u9879\uFF0C\u53EF\u8BBE\u4E3A\u5C06\u9009\u9879\u5E73\u94FA"),moreIntroLink:"https://help.mingdao.com/worksheet/control-select"},ATTACHMENT:{icon:"attachment",widgetName:_l("\u9644\u4EF6"),intro:_l("\u53EF\u4EE5\u6DFB\u52A0\u56FE\u7247\u3001\u6587\u6863"),minSize:te.Bi},DATE:{icon:"event",widgetName:_l("\u65E5\u671F"),intro:_l("\u53EF\u8BBE\u4E3A\u65E5\u671F \u6216 \u65E5\u671F+\u65F6\u95F4")},DATE_TIME:{icon:"event",widgetName:_l("\u65E5\u671F"),intro:_l("\u53EF\u8BBE\u4E3A\u65E5\u671F \u6216 \u65E5\u671F+\u65F6\u95F4")},AREA_PROVINCE:{icon:"map",widgetName:_l("\u5730\u533A"),intro:_l("\u4ECE\u9884\u8BBE\u7684\u5730\u5740\u4E2D\u8FDB\u884C\u9009\u62E9"),moreIntroLink:"https://help.mingdao.com/worksheet/control-region-city"},RELATION:{icon:"device_hub",widgetName:_l("\u81EA\u7531\u8FDE\u63A5%04008"),intro:_l("\u5F15\u7528\u9879\u76EE\u3001\u4EFB\u52A1\u3001\u65E5\u7A0B\u3001\u5BA1\u6279\u5355\u7B49\u3002\u4F8B\uFF1A\u4E00\u4E2A\u201C\u4EA7\u54C1\u66F4\u65B0\u201D\u8BB0\u5F55\u53EF\u4EE5\u6DFB\u52A0\u591A\u4E2A\u201C\u9700\u6C42\u201D\u4EFB\u52A1\uFF0C\u7531\u4E8E\u53EA\u662F\u5F15\u7528\uFF0C\u4E0D\u4F1A\u5F71\u54CD\u88AB\u5F15\u7528\u7684\u5BF9\u8C61\u672C\u8EAB"),moreIntroLink:"https://help.mingdao.com/worksheet/controls",tip:_l("\u53EF\u6DFB\u52A0\u5176\u4ED6\u9879\u76EE\u3001\u4EFB\u52A1\u3001\u6587\u4EF6\u3001\u5BA1\u6279\u5355\u7B49\uFF0C\u4EE5\u5361\u7247(\u5F15\u7528\u94FE\u63A5)\u5F62\u5F0F\u5C55\u793A\u51FA\u6765\u3002\u4F8B\uFF1A\u4E00\u4E2A\u201C\u4EA7\u54C1\u66F4\u65B0\u201D\u4EFB\u52A1\u53EF\u6DFB\u52A0\u591A\u4E2A\u201C\u9700\u6C42\u201D\u4EFB\u52A1\u5361\u7247\uFF0C\u7531\u4E8E\u53EA\u662F\u5F15\u7528\uFF0C\u4E0D\u4F1A\u5F71\u54CD\u88AB\u5F15\u7528\u7684\u4EFB\u52A1\u672C\u8EAB\u7684\u5B50\u6BCD\u4EFB\u52A1\u7ED3\u6784"),minSize:te.Bi},SPLIT_LINE:{icon:"menu",widgetName:_l("\u5206\u6BB5%04006"),intro:_l("\u5BF9\u8868\u5355\u8FDB\u884C\u5206\u6BB5"),minSize:te.Bi},AREA_CITY:{icon:"map",widgetName:_l("\u5730\u533A"),intro:_l("\u4ECE\u9884\u8BBE\u7684\u5730\u5740\u4E2D\u8FDB\u884C\u9009\u62E9"),moreIntroLink:"https://help.mingdao.com/worksheet/control-region-city"},AREA_COUNTY:{icon:"map",widgetName:_l("\u5730\u533A"),intro:_l("\u4ECE\u9884\u8BBE\u7684\u5730\u5740\u4E2D\u8FDB\u884C\u9009\u62E9"),moreIntroLink:"https://help.mingdao.com/worksheet/control-region-city"},MONEY_CN:{icon:"amount_capital",widgetName:_l("\u5927\u5199\u91D1\u989D%04009"),intro:_l("\u5173\u8054\u91D1\u989D\u63A7\u4EF6\u540E\u53EF\u4EE5\u81EA\u52A8\u5C06\u586B\u5199\u7684\u91D1\u989D\u663E\u793A\u6210\u5927\u5199\u91D1\u989D"),moreIntroLink:"https://help.mingdao.com/worksheet/controls"},USER_PICKER:{icon:"account_circle",widgetName:_l("\u6210\u5458"),intro:_l("\u52A0\u5165\u7684\u6210\u5458\u5C06\u6536\u5230\u901A\u77E5\u5E76\u5141\u8BB8\u67E5\u770B\u8BB0\u5F55\u3002\u8FD8\u53EF\u4EE5\u901A\u8FC7\u89D2\u8272\u6765\u63A7\u5236\u6743\u9650"),moreIntroLink:"https://help.mingdao.com/worksheet/control-members"},DEPARTMENT:{icon:"department",widgetName:_l("\u90E8\u95E8"),intro:_l("\u9009\u62E9\u7EC4\u7EC7\u4E2D\u7684\u90E8\u95E8")},SCORE:{icon:"star",widgetName:_l("\u7B49\u7EA7"),intro:_l("\u53EF\u8F93\u51651\uFF5E10\u7684\u6570\u503C")},RELATE_SHEET:{icon:"link_record",widgetName:_l("\u5173\u8054\u8BB0\u5F55%04001"),intro:_l("\u5173\u8054\u76F8\u5173\u5DE5\u4F5C\u8868\uFF0C\u53EF\u4EE5\u4ECE\u4E2D\u5F15\u7528\u6216\u521B\u5EFA\u8BB0\u5F55\uFF0C\u5982\uFF1A\u8BA2\u5355\u5173\u8054\u5546\u54C1"),moreIntroLink:"https://help.mingdao.com/worksheet/control-relationship",tip:_l("\u5173\u8054\u591A\u4E2A\u5DE5\u4F5C\u8868\uFF0C\u8054\u52A8\u6570\u636E\uFF0C\u4EE5\u53CD\u6620\u5B9E\u9645\u4E1A\u52A1\u5173\u7CFB\u3002\u4F8B\u5982:\u300A\u8BA2\u5355\u300B\u8868\u4E2D\uFF0C\u6BCF\u4E2A\u8BA2\u5355\u7684\u201C\u5BA2\u6237\u201D\u5B57\u6BB5\u4ECE\u5173\u8054\u7684\u300A\u5BA2\u6237\u300B\u8868\u91CC\u9009\u62E91\u6761\u201C\u5BA2\u6237\u201D\u8BB0\u5F55\u6765\u586B\u5165\u3002")},SHEET_FIELD:{icon:"lookup",widgetName:_l("\u4ED6\u8868\u5B57\u6BB5%04004"),intro:_l("\u4ECE\u5173\u8054\u7684\u8BB0\u5F55\u4E2D\u9009\u62E9\u5B57\u6BB5\u663E\u793A\u5728\u5F53\u524D\u8868\u4E2D"),moreIntroLink:"https://help.mingdao.com/worksheet/control-foreign"},CONCATENATE:{icon:"category",widgetName:_l("\u6587\u672C\u7EC4\u5408%04000"),intro:_l("\u5C06\u5F53\u524D\u8BB0\u5F55\u4E2D\u7684\u5B57\u6BB5\u8FDB\u884C\u7EC4\u5408"),moreIntroLink:"https://help.mingdao.com/worksheet/control-concat"},AUTO_ID:{icon:"auto_number",widgetName:_l("\u81EA\u52A8\u7F16\u53F7"),intro:_l("\u4E3A\u6BCF\u6761\u8BB0\u5F55\u751F\u6210\u81EA\u5B9A\u4E49\u89C4\u5219\u7684\u7F16\u53F7"),moreIntroLink:"https://help.mingdao.com/worksheet/control-autonumber"},SUB_LIST:{icon:"table",widgetName:_l("\u5B50\u8868%04002"),intro:_l("\u652F\u6301\u5728\u8868\u5355\u4E2D\u4E00\u6B21\u586B\u5165\u591A\u6761\u4FE1\u606F\u3001\u6BD4\u5982\u4E00\u6B21\u586B\u5199\u591A\u6761\u8D39\u7528\u660E\u7EC6"),minSize:te.Bi,moreIntroLink:"https://help.mingdao.com/worksheet/control-subform"},SWITCH:{icon:"checkbox_01",widgetName:_l("\u68C0\u67E5\u9879"),intro:_l("\u53EF\u4EE5\u9009\u4E2D\u6216\u53D6\u6D88\u9009\u4E2D")},SUBTOTAL:{icon:"sigma",widgetName:_l("\u6C47\u603B%04005"),intro:_l("\u6C47\u603B\u5173\u8054\u8BB0\u5F55\u6216\u5B50\u8868\u4E2D\u7684\u6570\u636E\uFF0C\u5982\uFF1A\u6C47\u603B\u8BA2\u5355\u660E\u7EC6\u4E2D\u7684\u5546\u54C1\u603B\u4EF7\uFF0C\u6700\u5927\u652F\u6301\u6C47\u603B1000\u884C\u6570\u636E\u3002"),moreIntroLink:"https://help.mingdao.com/worksheet/control-rollup"},FORMULA_NUMBER:{icon:"formula",widgetName:_l("\u516C\u5F0F"),intro:_l("\u5C06\u5F53\u524D\u8BB0\u5F55\u4E2D\u7684\u5B57\u6BB5\u8FDB\u884C\u6570\u503C\u6216\u65E5\u671F\u8BA1\u7B97"),moreIntroLink:"https://help.mingdao.com/worksheet/control-formula"},FORMULA_DATE:{icon:"formula",widgetName:_l("\u516C\u5F0F"),intro:_l("\u5C06\u5F53\u524D\u8BB0\u5F55\u4E2D\u7684\u5B57\u6BB5\u8FDB\u884C\u6570\u503C\u6216\u65E5\u671F\u8BA1\u7B97"),moreIntroLink:"https://help.mingdao.com/worksheet/control-formula"},LOCATION:{icon:"location_on",widgetName:_l("\u5B9A\u4F4D"),defaultHint:_l("\u5728\u6B64\u6DFB\u52A0 \u6CE8\u610F\u4E8B\u9879 \u6216 \u586B\u5199\u8981\u6C42 \u7B49\uFF0C\u6765\u6307\u5BFC\u4F7F\u7528\u8005(\u6216\u586B\u5199\u8005)\u6B63\u786E\u5730\u64CD\u4F5C"),tip:_l("\u628A\u6CE8\u610F\u4E8B\u9879\u6216\u586B\u5199\u8981\u6C42\u4F5C\u4E3A\u201C\u5907\u6CE8\u201D\u52A0\u5165\uFF0C\u6765\u6307\u5BFC\u4F7F\u7528\u8005(\u6216\u586B\u5199\u8005)\u6B63\u786E\u4F7F\u7528"),intro:_l("\u53EF\u901A\u8FC7\u5B9A\u4F4D\u8F93\u5165\u5730\u7406\u4F4D\u7F6E")},RICH_TEXT:{icon:"rich_text",widgetName:_l("\u5BCC\u6587\u672C"),defaultHint:_l("\u5728\u6B64\u6DFB\u52A0 \u6CE8\u610F\u4E8B\u9879 \u6216 \u586B\u5199\u8981\u6C42 \u7B49\uFF0C\u6765\u6307\u5BFC\u4F7F\u7528\u8005(\u6216\u586B\u5199\u8005)\u6B63\u786E\u5730\u64CD\u4F5C"),tip:_l("\u628A\u6CE8\u610F\u4E8B\u9879\u6216\u586B\u5199\u8981\u6C42\u4F5C\u4E3A\u201C\u5907\u6CE8\u201D\u52A0\u5165\uFF0C\u6765\u6307\u5BFC\u4F7F\u7528\u8005(\u6216\u586B\u5199\u8005)\u6B63\u786E\u4F7F\u7528"),intro:_l("\u53EF\u63A7\u5236\u6587\u672C\u6837\u5F0F\uFF0C\u6DFB\u52A0\u56FE\u7247"),minSize:te.Bi},SIGNATURE:{icon:"gesture",widgetName:_l("\u7B7E\u540D"),defaultHint:_l("\u5728\u6B64\u6DFB\u52A0 \u6CE8\u610F\u4E8B\u9879 \u6216 \u586B\u5199\u8981\u6C42 \u7B49\uFF0C\u6765\u6307\u5BFC\u4F7F\u7528\u8005(\u6216\u586B\u5199\u8005)\u6B63\u786E\u5730\u64CD\u4F5C"),tip:_l("\u628A\u6CE8\u610F\u4E8B\u9879\u6216\u586B\u5199\u8981\u6C42\u4F5C\u4E3A\u201C\u5907\u6CE8\u201D\u52A0\u5165\uFF0C\u6765\u6307\u5BFC\u4F7F\u7528\u8005(\u6216\u586B\u5199\u8005)\u6B63\u786E\u4F7F\u7528"),intro:_l("\u901A\u8FC7\u7B7E\u540D\u786E\u5B9A\u7B7E\u540D\u4EBA\u8EAB\u4EFD")},CASCADER:{icon:"cascade_selection",widgetName:_l("\u7EA7\u8054\u9009\u62E9%04003"),intro:_l("\u4EE5\u5C42\u7EA7\u89C6\u56FE\u4F5C\u4E3A\u6570\u636E\u6E90\u6765\u9009\u62E9\u76EE\u6807\u8868\u7684\u8BB0\u5F55,\u4EC5\u652F\u6301\u672C\u8868\u5173\u8054"),moreIntroLink:"https://help.mingdao.com/worksheet/control-cascading"},OCR:{icon:"ocr",widgetName:_l("\u6587\u672C\u8BC6\u522B"),intro:_l("\u8BC6\u522B\u8F93\u5165\u56FE\u7247\uFF0C\u5C06\u8BC6\u522B\u7ED3\u679C\u586B\u5145\u5230\u5BF9\u5E94\u5B57\u6BB5\u3002"),moreIntroLink:"https://help.mingdao.com/worksheet/control-ocr"},REMARK:{widgetName:_l("\u5907\u6CE8%04007"),icon:"info",defaultHint:_l("\u5728\u6B64\u6DFB\u52A0 \u6CE8\u610F\u4E8B\u9879 \u6216 \u586B\u5199\u8981\u6C42 \u7B49\uFF0C\u6765\u6307\u5BFC\u4F7F\u7528\u8005(\u6216\u586B\u5199\u8005)\u6B63\u786E\u5730\u64CD\u4F5C"),tip:_l("\u628A\u6CE8\u610F\u4E8B\u9879\u6216\u586B\u5199\u8981\u6C42\u4F5C\u4E3A\u201C\u5907\u6CE8\u201D\u52A0\u5165\uFF0C\u6765\u6307\u5BFC\u4F7F\u7528\u8005(\u6216\u586B\u5199\u8005)\u6B63\u786E\u4F7F\u7528"),intro:_l("\u5728\u8868\u5355\u4E2D\u6DFB\u52A0\u8BF4\u660E\u4FE1\u606F"),minSize:te.Bi},EMBED:{widgetName:_l("\u5D4C\u5165%04010"),icon:"code",intro:_l("\u5728\u8868\u5355\u4E2D\u5D4C\u5165URL\uFF0C\u652F\u6301\u4F7F\u7528\u5176\u4ED6\u5B57\u6BB5\u503C\u4F20\u53C2")},BAR_CODE:{widgetName:_l("\u6761\u7801"),icon:"a-barcode",intro:_l("\u53EF\u5C06\u5173\u8054\u7684\u6570\u636E\u6E90\u8F6C\u6210\u6761\u5F62\u7801\u6216\u4E8C\u7EF4\u7801\u663E\u793A")},TIME:{icon:"access_time",widgetName:_l("\u65F6\u95F4"),intro:_l("\u53EF\u8BBE\u4E3A\u5C0F\u65F6\u5206\u949F\u79D2"),moreIntroLink:"https://help.mingdao.com/worksheet/controls#time"},ORG_ROLE:{icon:"user",widgetName:_l("\u7EC4\u7EC7\u89D2\u8272"),intro:_l("\u9009\u62E9\u7EC4\u7EC7\u4E2D\u7684\u89D2\u8272\uFF0C\u652F\u6301\u914D\u7F6E\u9009\u62E9\u7684\u7EC4\u7EC7\u89D2\u8272\u7684\u6743\u9650\u3002"),moreIntroLink:"https://help.mingdao.com/worksheet/control-o-roles"},SEARCH_BTN:{icon:"api",widgetName:_l("API\u67E5\u8BE2"),featureId:5,intro:_l("\u53EF\u8C03\u7528API\u63A5\u53E3\u83B7\u53D6\u6570\u636E\uFF0C\u5E76\u5C06\u6570\u636E\u586B\u5145\u5230\u5B57\u6BB5\u3002")},SEARCH:{icon:"api",widgetName:_l("API\u67E5\u8BE2"),featureId:5,intro:_l("\u53EF\u8C03\u7528API\u63A5\u53E3\u83B7\u53D6\u6570\u636E\uFF0C\u5E76\u5C06\u6570\u636E\u586B\u5145\u5230\u5B57\u6BB5\u3002")},RELATION_SEARCH:{icon:"Worksheet_query",widgetName:_l("\u67E5\u8BE2\u8BB0\u5F55"),intro:_l("\u53EF\u7528\u4E8E\u5FEB\u901F\u67E5\u770B\u5176\u4ED6\u8868\u7684\u6570\u636E\u3002")},SECTION:{icon:"tab",widgetName:_l("\u6807\u7B7E\u9875"),intro:_l("\u53EF\u7528\u4E8E\u5206\u7EC4\u5B57\u6BB5\uFF0C\u7EC4\u7EC7\u76F8\u5173\u7684\u4FE1\u606F\u6216\u529F\u80FD\u3002")}},d={TEXT:{controlName:_l("\u6587\u672C"),size:12,enumDefault:2,hint:_l("\u8BF7\u586B\u5199\u6587\u672C\u5185\u5BB9"),advancedSetting:{analysislink:"1",sorttype:"en"}},MOBILE_PHONE:{controlName:_l("\u624B\u673A"),size:6,enumDefault:1,hint:_l("\u8BF7\u586B\u5199\u624B\u673A\u53F7\u7801"),advancedSetting:{defaultarea:'{"name":"China (\u4E2D\u56FD)","iso2":"cn","dialCode":"86"}',commcountries:'[{"name":"China (\u4E2D\u56FD)","iso2":"cn","dialCode":"86"},{"name":"Hong Kong (\u9999\u6E2F)","iso2":"hk","dialCode":"852"},{"name":"Taiwan (\u53F0\u7063)","iso2":"tw","dialCode":"886"},{"name":"Macau (\u6FB3\u9580)","iso2":"mo","dialCode":"853"},{"name":"Singapore","iso2":"sg","dialCode":"65"},{"name":"Malaysia","iso2":"my","dialCode":"60"},{"name":"Japan (\u65E5\u672C)","iso2":"jp","dialCode":"81"},{"name":"South Korea (\uB300\uD55C\uBBFC\uAD6D)","iso2":"kr","dialCode":"82"},{"name":"United States","iso2":"us","dialCode":"1"},{"name":"United Kingdom","iso2":"gb","dialCode":"44"},{"name":"France","iso2":"fr","dialCode":"33"},{"name":"Germany (Deutschland)","iso2":"de","dialCode":"49"},{"name":"Russia (\u0420\u043E\u0441\u0441\u0438\u044F)","iso2":"ru","dialCode":"7"}]'}},TELEPHONE:{controlName:_l("\u5EA7\u673A"),size:6,hint:_l("\u8BF7\u586B\u5199\u5EA7\u673A\u53F7\u7801")},EMAIL:{controlName:_l("\u90AE\u7BB1"),size:6,hint:_l("\u8BF7\u586B\u5199\u90AE\u7BB1\u5730\u5740")},NUMBER:{controlName:_l("\u6570\u503C"),size:6,dot:0,hint:_l("\u8BF7\u586B\u5199\u6570\u503C"),advancedSetting:{showtype:"0",roundtype:"2"}},CRED:{controlName:_l("\u8BC1\u4EF6"),size:6,enumDefault:1,hint:_l("\u8BF7\u586B\u5199\u8EAB\u4EFD\u8BC1")},MONEY:{controlName:_l("\u91D1\u989D"),size:6,enumDefault:0,enumDefault2:2,dot:2,hint:_l("\u8BF7\u586B\u5199\u91D1\u989D"),advancedSetting:{suffix:_l("\u5143"),roundtype:"2"}},FLAT_MENU:(0,ce.default)({},a(),{controlName:_l("\u5355\u9009"),size:12,enumDefault2:0}),MULTI_SELECT:(0,ce.default)({},a(),{controlName:_l("\u591A\u9009"),size:12,enumDefault2:0,advancedSetting:{direction:"2",checktype:"0"}}),DROP_DOWN:(0,ce.default)({},a(),{controlName:_l("\u5355\u9009"),size:6,enumDefault2:0,hint:_l("\u8BF7\u9009\u62E9"),advancedSetting:{showtype:"0"}}),ATTACHMENT:{controlName:_l("\u9644\u4EF6"),hint:_l("\u6DFB\u52A0\u9644\u4EF6"),size:12,enumDefault:3,advancedSetting:{showtype:"1",covertype:"0",alldownload:"1",webcompress:"1"}},DATE:{controlName:_l("\u65E5\u671F"),size:6,hint:_l("\u8BF7\u9009\u62E9\u65E5\u671F"),advancedSetting:{showtype:"3"}},DATE_TIME:{controlName:_l("\u65E5\u671F\u65F6\u95F4"),size:6,hint:_l("\u8BF7\u9009\u62E9\u65E5\u671F"),advancedSetting:{showtype:"1"}},AREA_PROVINCE:{controlName:_l("\u5730\u533A"),size:6},RELATION:{controlName:_l("\u81EA\u7531\u8FDE\u63A5%04008"),size:12,enumDefault:0},SPLIT_LINE:{controlName:_l("\u5206\u6BB5%04006"),size:12,enumDefault2:1,enumDefault:0,advancedSetting:{theme:"#2196F3",color:"#333333"}},AREA_CITY:{controlName:_l("\u5730\u533A"),size:6},AREA_COUNTY:{controlName:_l("\u5730\u533A"),size:6},MONEY_CN:{controlName:_l("\u5927\u5199\u91D1\u989D%04009"),size:6},USER_PICKER:{controlName:_l("\u6210\u5458"),size:6,hint:_l("\u8BF7\u9009\u62E9\u6210\u5458"),enumDefault:0,userPermission:1,noticeItem:0},DEPARTMENT:{controlName:_l("\u90E8\u95E8"),size:6,enumDefault:0,userPermission:1,enumDefault2:0,advancedSetting:{showdelete:"1"}},SCORE:{controlName:_l("\u7B49\u7EA7"),size:6,enumDefault:1,advancedSetting:R.J},RELATE_SHEET:{controlName:_l("\u5173\u8054\u8BB0\u5F55%04001"),advancedSetting:{allowlink:"1",searchrange:"1",scanlink:"1",scancontrol:"1"},size:12,strDefault:"000",enumDefault:1,enumDefault2:0},SHEET_FIELD:{controlName:_l("\u4ED6\u8868\u5B57\u6BB5%04004"),size:6,enumDefault:1,strDefault:"10",dataSource:"",sourceControlId:"",advancedSetting:{sorttype:"en"}},CONCATENATE:{controlName:_l("\u6587\u672C\u7EC4\u5408%04000"),size:12,advancedSetting:{analysislink:"1",sorttype:"en"}},AUTO_ID:{advancedSetting:{increase:'[{"type":1,"repeatType":0,"start":null,"length":0,"format":""}]',sorttype:"en"},controlName:_l("\u81EA\u52A8\u7F16\u53F7"),size:6,enumDefault:0},SUB_LIST:{controlName:_l("\u5B50\u8868%04002"),size:12,enumDefault:2,advancedSetting:{allowadd:"1",allowcancel:"1",allowedit:"1",allowsingle:"1",allowexport:"1",rowheight:"0",enablelimit:"0",min:"0",max:"200",showtype:"1",blankrow:"1",rownum:"15"}},SWITCH:{controlName:_l("\u68C0\u67E5\u9879"),size:6,advancedSetting:{defsource:'[{"cid":"","rcid":"","staticValue":"0"}]',showtype:"0"}},SUBTOTAL:{controlName:_l("\u6C47\u603B%04005"),size:6,enumDefault:6,enumDefault2:6,advancedSetting:{roundtype:"2"}},FORMULA_NUMBER:{controlName:_l("\u516C\u5F0F"),size:6,dot:2,advancedSetting:{roundtype:"2"}},FORMULA_DATE:{controlName:_l("\u65E5\u671F\u516C\u5F0F"),size:6,advancedSetting:{dateformulatype:"1"}},LOCATION:{controlName:_l("\u5B9A\u4F4D"),size:6,enumDefault2:0,strDefault:"00"},RICH_TEXT:{controlName:_l("\u5BCC\u6587\u672C"),size:12},SIGNATURE:{controlName:_l("\u7B7E\u540D"),size:6,advancedSetting:{uselast:"1"}},CASCADER:{controlName:_l("\u7EA7\u8054\u9009\u62E9%04003"),size:6},REMARK:{size:12,controlName:_l("\u5907\u6CE8%04007"),advancedSetting:{hidetitle:"1"}},OCR:{size:6,controlName:_l("\u6587\u672C\u8BC6\u522B")},EMBED:{size:12,controlName:_l("\u5D4C\u5165"),hint:_l("\u7F16\u8F91\u72B6\u6001\u4E0B\u4E0D\u652F\u6301\u67E5\u770B"),enumDefault:1,advancedSetting:{height:400}},BAR_CODE:{size:12,controlName:_l("\u6761\u7801"),enumDefault:1,advancedSetting:{width:160}},TIME:{size:6,controlName:_l("\u65F6\u95F4"),unit:"1"},ORG_ROLE:{controlName:_l("\u7EC4\u7EC7\u89D2\u8272"),size:6,enumDefault:0,userPermission:1},SEARCH_BTN:{controlName:_l("API\u67E5\u8BE2"),size:6,enumDefault:0,hint:_l("\u67E5\u8BE2")},SEARCH:{controlName:_l("API\u67E5\u8BE2"),size:6},RELATION_SEARCH:{controlName:_l("\u67E5\u8BE2\u8BB0\u5F55"),size:12,advancedSetting:{allowlink:"1",searchrange:"1",showtype:"5",sorts:'[{"controlId":"ctime","isAsc":true}]'},strDefault:"000",enumDefault:2,enumDefault2:1},SECTION:{controlName:_l("\u6807\u7B7E\u9875"),size:12}},Z=[{controlId:"wfname",controlName:_l("\u6D41\u7A0B\u540D\u79F0"),type:2,display:!0},{controlId:"wfstatus",controlName:_l("\u72B6\u6001"),type:2,display:!0},{controlId:"wfcuaids",controlName:_l("\u8282\u70B9\u8D1F\u8D23\u4EBA"),type:26,display:!0},{controlId:"wfrtime",controlName:_l("\u8282\u70B9\u5F00\u59CB\u65F6\u95F4"),type:16,display:!0},{controlId:"wfftime",controlName:_l("\u5269\u4F59\u65F6\u95F4"),type:38,display:!0},{controlId:"wfcaid",controlName:_l("\u53D1\u8D77\u4EBA"),type:26,display:!0},{controlId:"wfctime",controlName:_l("\u53D1\u8D77\u65F6\u95F4"),type:16,display:!0},{controlId:"rowid",controlName:_l("\u8BB0\u5F55ID"),type:2,display:!0}],H=[{controlId:"uaid",controlName:_l("\u6700\u8FD1\u4FEE\u6539\u4EBA"),type:26,display:!0}],U=[{controlId:"ctime",controlName:_l("\u521B\u5EFA\u65F6\u95F4"),controlPermissions:"100",type:16,display:!0},{controlId:"utime",controlName:_l("\u6700\u8FD1\u4FEE\u6539\u65F6\u95F4"),controlPermissions:"100",type:16,display:!0}],f=[{controlId:"ownerid",controlName:_l("\u62E5\u6709\u8005"),controlPermissions:"111",type:26,enumDefault:0,display:!0},{controlId:"caid",controlName:_l("\u521B\u5EFA\u4EBA"),type:26,display:!0}].concat(U),V=[{controlId:"ownerid",controlName:_l("\u62E5\u6709\u8005"),controlPermissions:"111",type:26,enumDefault:0,display:!0},{controlId:"caid",controlName:_l("\u521B\u5EFA\u4EBA"),type:26,display:!0},{controlId:"ctime",controlName:_l("\u521B\u5EFA\u65F6\u95F4"),controlPermissions:"100",type:16,display:!0},{controlId:"uaid",controlName:_l("\u6700\u8FD1\u4FEE\u6539\u4EBA"),controlPermissions:"111",type:26,enumDefault:0,display:!0},{controlId:"utime",controlName:_l("\u6700\u8FD1\u4FEE\u6539\u65F6\u95F4"),controlPermissions:"100",type:16,display:!0}],C=["ownerid","caid","ctime","utime","daid","uaid"],O=f.map(function(re){return re.controlId}),n=O.concat(Z.map(function(re){return re.controlId})).concat("uaid"),s=(0,g.pick)(o,["TEXT","NUMBER","MONEY","EMAIL","DATE","TIME","MOBILE_PHONE","AREA_COUNTY","DROP_DOWN","MULTI_SELECT","USER_PICKER","DEPARTMENT","ORG_ROLE","ATTACHMENT"]),j=(0,g.pick)(o,["FORMULA_NUMBER","SWITCH","SCORE","CONCATENATE","AUTO_ID","RICH_TEXT","CRED","LOCATION","SIGNATURE","OCR","SEARCH_BTN","BAR_CODE","MONEY_CN","EMBED"]),A=(0,g.pick)(o,["RELATE_SHEET","RELATION_SEARCH","SUB_LIST","CASCADER","SHEET_FIELD","SUBTOTAL","RELATION"]),S=(0,g.pick)(o,["SPLIT_LINE","SECTION","REMARK"]),I={COMMON_USE:{widgets:s,title:_l("\u5E38\u7528")},ADVANCE:{widgets:j,title:_l("\u9AD8\u7EA7")},RELATE:{widgets:A,title:_l("\u5173\u8054")},SPECIAL:{widgets:S,title:_l("\u5E03\u5C40\u5B57\u6BB5")}},c=["uaid","rowid"],q=[].concat(c,["wfname","wfcuaids","wfcaid","wfctime","wfrtime","wfftime","wfstatus"]),b=["wfname","wfcuaids","wfcaid","wfctime","wfrtime","wfftime","wfstatus"],k=(0,ce.default)({},s,j,A,S),ee=[{key:"base",label:_l("\u57FA\u7840\u8BBE\u7F6E"),name:"WidgetBase"},{key:"option",label:_l("\u64CD\u4F5C\u8BBE\u7F6E"),name:"WidgetOperate"},{key:"style",label:_l("\u8868\u683C\u8BBE\u7F6E"),name:"WidgetStyle"},{key:"highsetting",label:_l("\u9AD8\u7EA7\u8BBE\u7F6E"),name:"WidgetHighSetting"},{key:"security",label:_l("\u5B89\u5168"),name:"WidgetSecurity"},{key:"relate",label:_l("\u53CC\u5411\u5173\u8054"),name:"BothWayRelate"},{key:"permission",label:_l("\u5B57\u6BB5\u5C5E\u6027"),name:"WidgetPermission"},{key:"mobile",label:_l("\u79FB\u52A8\u7AEF\u8BBE\u7F6E"),name:"WidgetMobile"}]},57467:(lt,Te,t)=>{"use strict";t.d(Te,{JC:()=>le,NR:()=>ie,Nv:()=>Q,R2:()=>u,U4:()=>z,VJ:()=>v,Vp:()=>B,Y$:()=>re,bO:()=>W,d4:()=>b,nb:()=>X,pW:()=>l,vi:()=>P,xD:()=>ee});var ce=t(86735),g=t(71893),p=(0,ce.Z)([`
  margin-top: 20px;
  position: relative;
  .ant-input {
    font-size: 13px;
    color: #333;
    line-height: 26px;
    border-radius: 3px;
    &.inputError {
      border-color: #ff0000;
      box-shadow: none;
    }
  }
  .checkboxWrap {
    display: flex;
    align-items: center;
  }
  &.withSplitLine {
    border-top: 1px solid #eee;
    padding-top: 24px;
  }
  .ming.Dropdown {
    background-color: #fff;
    &.disabled {
      background-color: #f5f5f5;
    }
  }
  .ming.Radio {
    flex: 1;
    line-height: 24px;
  }
  .ming.Checkbox {
    display: flex;
    align-items: center;
  }
  .settingItemTitle {
    display: flex;
    align-items: center;
    margin-bottom: 8px;
    font-weight: bold;
    color: #515151;
    .icon-help {
      margin-left: 5px;
    }
  }
  .Dropdown {
    /* margin: 16px 0; */
    width: 100%;
  }
  .ming.Menu {
    width: 100%;
  }
  .dropdownWrapper {
    display: block;
  }
  .singleLineRadio {
    label {
      width: 50%;
      margin: 0;
    }
  }
  textarea {
    resize: none;
  }
  .credTypesWrap {
    .ming.Radio {
      margin: 12px 0 0 0;
      flex-basis: 50%;
    }
  }
  .customTip {
    margin-top: 6px;
    position: relative;
  }
  .emptyText {
    margin: 0 auto;
    line-height: 38px;
    color: #9e9e9e;
    font-size: 13px;
    text-align: center;
  }
  .subTitle {
    margin-bottom: 6px;
  }
  .Calendar-column-header {
    flex: 1;
  }
  .attachmentDisplayType {
    width: 310px !important;
    .ming.Item {
      height: auto !important;
      line-height: normal !important;
    }
    .ming.Item .Item-content .Icon {
      line-height: normal !important;
      position: relative;
      left: 0px !important;
    }
  }
`],[`
  margin-top: 20px;
  position: relative;
  .ant-input {
    font-size: 13px;
    color: #333;
    line-height: 26px;
    border-radius: 3px;
    &.inputError {
      border-color: #ff0000;
      box-shadow: none;
    }
  }
  .checkboxWrap {
    display: flex;
    align-items: center;
  }
  &.withSplitLine {
    border-top: 1px solid #eee;
    padding-top: 24px;
  }
  .ming.Dropdown {
    background-color: #fff;
    &.disabled {
      background-color: #f5f5f5;
    }
  }
  .ming.Radio {
    flex: 1;
    line-height: 24px;
  }
  .ming.Checkbox {
    display: flex;
    align-items: center;
  }
  .settingItemTitle {
    display: flex;
    align-items: center;
    margin-bottom: 8px;
    font-weight: bold;
    color: #515151;
    .icon-help {
      margin-left: 5px;
    }
  }
  .Dropdown {
    /* margin: 16px 0; */
    width: 100%;
  }
  .ming.Menu {
    width: 100%;
  }
  .dropdownWrapper {
    display: block;
  }
  .singleLineRadio {
    label {
      width: 50%;
      margin: 0;
    }
  }
  textarea {
    resize: none;
  }
  .credTypesWrap {
    .ming.Radio {
      margin: 12px 0 0 0;
      flex-basis: 50%;
    }
  }
  .customTip {
    margin-top: 6px;
    position: relative;
  }
  .emptyText {
    margin: 0 auto;
    line-height: 38px;
    color: #9e9e9e;
    font-size: 13px;
    text-align: center;
  }
  .subTitle {
    margin-bottom: 6px;
  }
  .Calendar-column-header {
    flex: 1;
  }
  .attachmentDisplayType {
    width: 310px !important;
    .ming.Item {
      height: auto !important;
      line-height: normal !important;
    }
    .ming.Item .Item-content .Icon {
      line-height: normal !important;
      position: relative;
      left: 0px !important;
    }
  }
`]),L=(0,ce.Z)([`
  margin-top: 12px;
  i {
    font-size: 18px;
    color: #757575;
  }
  .text {
    margin: 0 4px;
  }
  .name {
    color: #2196f3;
  }
`],[`
  margin-top: 12px;
  i {
    font-size: 18px;
    color: #757575;
  }
  .text {
    margin: 0 4px;
  }
  .name {
    color: #2196f3;
  }
`]),te=(0,ce.Z)([`
  border: 1px solid #ddd;
  border-radius: 3px;
  color: #757575;
  line-height: 34px;
  padding: 0 12px;
  background: `,`;
`],[`
  border: 1px solid #ddd;
  border-radius: 3px;
  color: #757575;
  line-height: 34px;
  padding: 0 12px;
  background: `,`;
`]),R=(0,ce.Z)([`
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;
  .edit,
  .clearBtn {
    font-size: 15px;
    color: #9e9e9e;
  }
  .clearBtn {
    visibility: hidden;
  }
  &:hover {
    background-color: #fafafa;
    border: 1px solid #d8d8d8;
    .clearBtn {
      visibility: visible;
      &:hover {
        color: #2196f3;
      }
    }
    .edit {
      color: #2196f3;
    }
  }
  &.borderError {
    border-color: #f44336;
    background: #fef2f4;
    color: #f44336;
  }
  &.disabled {
    cursor: not-allowed;
    background: #f7f7f7 !important;
    height: 36px;
  }
`],[`
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;
  .edit,
  .clearBtn {
    font-size: 15px;
    color: #9e9e9e;
  }
  .clearBtn {
    visibility: hidden;
  }
  &:hover {
    background-color: #fafafa;
    border: 1px solid #d8d8d8;
    .clearBtn {
      visibility: visible;
      &:hover {
        color: #2196f3;
      }
    }
    .edit {
      color: #2196f3;
    }
  }
  &.borderError {
    border-color: #f44336;
    background: #fef2f4;
    color: #f44336;
  }
  &.disabled {
    cursor: not-allowed;
    background: #f7f7f7 !important;
    height: 36px;
  }
`]),y=(0,ce.Z)([`
  display: flex;
  justify-content: space-between;
  align-items: center;
  min-height: 36px;
  border: 1px solid #ddd;
  margin-top: 12px;
  border-radius: 3px;
  padding: 0 5px 0 12px;
  cursor: pointer;
  &.active,
  &:hover {
    border-color: #2196f3;
    &.disabled {
      border-color: #ddd;
    }
    &.deleted {
      border-color: #ff0000;
    }
  }
  &.disabled {
    background-color: #f5f5f5;
    cursor: not-allowed;
  }
  &.deleted {
    background-color: rgba(251, 238, 241);
    color: #ff0000;
    border: 1px solid #ff0000;
    cursor: pointer;
  }
  &.invalid {
    border-color: currentColor !important;
    color: #f44336;
    background-color: #fff2f4;
    i {
      color: #f44336;
    }
  }
  &.placeholder {
    color: #bdbdbd;
  }
`],[`
  display: flex;
  justify-content: space-between;
  align-items: center;
  min-height: 36px;
  border: 1px solid #ddd;
  margin-top: 12px;
  border-radius: 3px;
  padding: 0 5px 0 12px;
  cursor: pointer;
  &.active,
  &:hover {
    border-color: #2196f3;
    &.disabled {
      border-color: #ddd;
    }
    &.deleted {
      border-color: #ff0000;
    }
  }
  &.disabled {
    background-color: #f5f5f5;
    cursor: not-allowed;
  }
  &.deleted {
    background-color: rgba(251, 238, 241);
    color: #ff0000;
    border: 1px solid #ff0000;
    cursor: pointer;
  }
  &.invalid {
    border-color: currentColor !important;
    color: #f44336;
    background-color: #fff2f4;
    i {
      color: #f44336;
    }
  }
  &.placeholder {
    color: #bdbdbd;
  }
`]),a=(0,ce.Z)([`
  &.isolate {
    position: absolute;
    width: 100%;
    z-index: 3;
  }
  padding: 6px 0;
  border-radius: 3px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.13), 0 2px 6px rgba(0, 0, 0, 0.1);
  width: 100%;
  border: 1px solid #eee;
  background-color: #fff;
  .emptyText {
    margin: 0 auto;
    line-height: 38px;
    color: #9e9e9e;
    font-size: 13px;
    text-align: center;
  }
  .clearValue {
    line-height: 36px;
    color: #2196f3;
    padding-left: 12px;
    cursor: pointer;
    &:hover {
      background-color: #2196f3;
      color: #fff;
    }
  }
  .search {
    position: relative;
    margin-bottom: 8px;
    i {
      position: absolute;
      top: 11px;
      left: 16px;
      font-size: 16px;
    }
    input {
      box-sizing: border-box;
      width: 100%;
      height: 36px;
      border: none;
      outline: none;
      padding-left: 40px;
      border-bottom: 1px solid #eee;
      &::placeholder {
        color: #ccc;
      }
    }
  }
  .fieldsWrap {
    max-height: 400px;
    overflow-y: auto;
  }
  .relateSheetList {
    border-top: 1px solid #ddd;
    background-color: #fff;
    margin-top: 8px;
    &:first-child {
      border-top: none;
      margin-top: 0px;
    }
    .title {
      padding: 12px 0 0 16px;
      font-weight: bold;
      max-width: 220px;
      margin-bottom: 8px;
    }
  }
  .fieldList {
    background-color: #fff;
    overflow: auto;
    li {
      display: flex;
      align-items: center;
      box-sizing: border-box;
      height: 36px;
      max-width: 320px;
      line-height: 36px;
      padding: 0 16px;
      cursor: pointer;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      &:hover {
        background-color: #2196f3;
        color: #fff;
        i {
          color: #fff;
        }
      }
      i {
        font-size: 16px;
        color: #9e9e9e;
        margin-right: 8px;
      }
    }
  }
`],[`
  &.isolate {
    position: absolute;
    width: 100%;
    z-index: 3;
  }
  padding: 6px 0;
  border-radius: 3px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.13), 0 2px 6px rgba(0, 0, 0, 0.1);
  width: 100%;
  border: 1px solid #eee;
  background-color: #fff;
  .emptyText {
    margin: 0 auto;
    line-height: 38px;
    color: #9e9e9e;
    font-size: 13px;
    text-align: center;
  }
  .clearValue {
    line-height: 36px;
    color: #2196f3;
    padding-left: 12px;
    cursor: pointer;
    &:hover {
      background-color: #2196f3;
      color: #fff;
    }
  }
  .search {
    position: relative;
    margin-bottom: 8px;
    i {
      position: absolute;
      top: 11px;
      left: 16px;
      font-size: 16px;
    }
    input {
      box-sizing: border-box;
      width: 100%;
      height: 36px;
      border: none;
      outline: none;
      padding-left: 40px;
      border-bottom: 1px solid #eee;
      &::placeholder {
        color: #ccc;
      }
    }
  }
  .fieldsWrap {
    max-height: 400px;
    overflow-y: auto;
  }
  .relateSheetList {
    border-top: 1px solid #ddd;
    background-color: #fff;
    margin-top: 8px;
    &:first-child {
      border-top: none;
      margin-top: 0px;
    }
    .title {
      padding: 12px 0 0 16px;
      font-weight: bold;
      max-width: 220px;
      margin-bottom: 8px;
    }
  }
  .fieldList {
    background-color: #fff;
    overflow: auto;
    li {
      display: flex;
      align-items: center;
      box-sizing: border-box;
      height: 36px;
      max-width: 320px;
      line-height: 36px;
      padding: 0 16px;
      cursor: pointer;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      &:hover {
        background-color: #2196f3;
        color: #fff;
        i {
          color: #fff;
        }
      }
      i {
        font-size: 16px;
        color: #9e9e9e;
        margin-right: 8px;
      }
    }
  }
`]),r=(0,ce.Z)([`
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: relative;
  padding: 0 12px;
  border: 1px solid #ddd;
  height: `,`px;
  line-height: 34px;
  color: #9e9e9e;
  border-radius: 3px;
  background-color: #fff;
  overflow: hidden;
  .intro {
    display: flex;
    align-items: center;
  }
  .hint {
    flex: 1;
    overflow: hidden;
    padding-right: 12%;
  }
  .unit {
    max-width: 20%;
    flex-shrink: 0;
    padding-left: 12px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    &.prefix {
      padding: 0 12px 0 0;
    }
  }
  &.select {
    i {
      margin: 0;
    }
  }
  i {
    font-size: 13px;
    color: #9e9e9e;
    margin-right: 4px;
  }
`],[`
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: relative;
  padding: 0 12px;
  border: 1px solid #ddd;
  height: `,`px;
  line-height: 34px;
  color: #9e9e9e;
  border-radius: 3px;
  background-color: #fff;
  overflow: hidden;
  .intro {
    display: flex;
    align-items: center;
  }
  .hint {
    flex: 1;
    overflow: hidden;
    padding-right: 12%;
  }
  .unit {
    max-width: 20%;
    flex-shrink: 0;
    padding-left: 12px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    &.prefix {
      padding: 0 12px 0 0;
    }
  }
  &.select {
    i {
      margin: 0;
    }
  }
  i {
    font-size: 13px;
    color: #9e9e9e;
    margin-right: 4px;
  }
`]),o=(0,ce.Z)([`
  display: flex;
  align-items: center;
  justify-content: center;
  width: `,`px;
  height: `,`px;
  border-radius: 50%;
  border: 1px solid #ddd;
  margin-top: `,`;
  i {
    font-size: 14px;
  }
`],[`
  display: flex;
  align-items: center;
  justify-content: center;
  width: `,`px;
  height: `,`px;
  border-radius: 50%;
  border: 1px solid #ddd;
  margin-top: `,`;
  i {
    font-size: 14px;
  }
`]),d=(0,ce.Z)([`
  display: flex;
  flex-direction: column;
  &.horizontal {
    flex-direction: row;
  }
  flex-wrap: wrap;
  .option {
    display: flex;
    .optionItem {
      display: flex;
      max-width: 100%;
      margin-right: 16px;
      margin-top: 8px;
      `,`
    }
    .ming.Radio {
      margin: 0;
      line-height: 22px;
    }
    .ming.Checkbox {
      flex-shrink: 0;
      line-height: 22px;
    }
  }
`],[`
  display: flex;
  flex-direction: column;
  &.horizontal {
    flex-direction: row;
  }
  flex-wrap: wrap;
  .option {
    display: flex;
    .optionItem {
      display: flex;
      max-width: 100%;
      margin-right: 16px;
      margin-top: 8px;
      `,`
    }
    .ming.Radio {
      margin: 0;
      line-height: 22px;
    }
    .ming.Checkbox {
      flex-shrink: 0;
      line-height: 22px;
    }
  }
`]),Z=(0,ce.Z)([`
  padding: 0 12px;
  line-height: 24px;
  border-radius: 18px;
  color: #fff;
  `,`;

  &.horizontal {
    `,`
  }
  &.light {
    color: #333;
  }
  &.withoutColor {
    background: transparent;
    color: #333;
    padding: 0 4px;
  }
  background-color: `,`;
`],[`
  padding: 0 12px;
  line-height: 24px;
  border-radius: 18px;
  color: #fff;
  `,`;

  &.horizontal {
    `,`
  }
  &.light {
    color: #333;
  }
  &.withoutColor {
    background: transparent;
    color: #333;
    padding: 0 4px;
  }
  background-color: `,`;
`]),H=(0,ce.Z)([`
  `,`
  .desc {
    line-height: 13px;
    &.subList {
      margin-bottom: 8px;
    }
  }
  .operationWrap.isActive {
    visibility: true;
  }
  .operationIconWrap {
    padding: 0 4px;
    i {
      font-size: 18px;
    }
  }
  .resizeWidth {
    border-right: 1px solid #e0e0e0;
  }
  .tableWrap {
    position: relative;
    z-index: 2;
    overflow: auto;
  }

  th,
  td {
    box-sizing: border-box;
    padding-left: 6px;
    width: 160px;
    max-width: 160px;
    height: 42px;
    font-weight: normal;
    background-color: #fff;
    border: 1px solid #ddd;
  }

  th span {
    color: #f44336;
    vertical-align: middle;
    margin-right: 2px;
  }
  .unSupport {
    font-size: 12px;
    vertical-align: initial;
  }
  .addControl {
    height: 84px;
    line-height: 84px;
    text-align: center;
    font-size: 12px;
    border: 1px solid #ddd;
    background-color: #fff;
  }
`],[`
  `,`
  .desc {
    line-height: 13px;
    &.subList {
      margin-bottom: 8px;
    }
  }
  .operationWrap.isActive {
    visibility: true;
  }
  .operationIconWrap {
    padding: 0 4px;
    i {
      font-size: 18px;
    }
  }
  .resizeWidth {
    border-right: 1px solid #e0e0e0;
  }
  .tableWrap {
    position: relative;
    z-index: 2;
    overflow: auto;
  }

  th,
  td {
    box-sizing: border-box;
    padding-left: 6px;
    width: 160px;
    max-width: 160px;
    height: 42px;
    font-weight: normal;
    background-color: #fff;
    border: 1px solid #ddd;
  }

  th span {
    color: #f44336;
    vertical-align: middle;
    margin-right: 2px;
  }
  .unSupport {
    font-size: 12px;
    vertical-align: initial;
  }
  .addControl {
    height: 84px;
    line-height: 84px;
    text-align: center;
    font-size: 12px;
    border: 1px solid #ddd;
    background-color: #fff;
  }
`]),U=(0,ce.Z)([`
  height: 84px;
  line-height: 84px;
  text-align: center;
  font-size: 12px;
  border: 1px solid #ddd;
  background-color: #fff;
  color: #9e9e9e;
`],[`
  height: 84px;
  line-height: 84px;
  text-align: center;
  font-size: 12px;
  border: 1px solid #ddd;
  background-color: #fff;
  color: #9e9e9e;
`]),f=(0,ce.Z)([`
  line-height: 24px;
  padding: 0 12px;
  border-radius: 16px;
  background: #d8eeff;
  color: #174c76;
  border: 1px solid #bbd6ea;
  &.invalid {
    color: #f44336;
    background: rgba(244, 67, 54, 0.06);
    border-color: #f44336;
  }
`],[`
  line-height: 24px;
  padding: 0 12px;
  border-radius: 16px;
  background: #d8eeff;
  color: #174c76;
  border: 1px solid #bbd6ea;
  &.invalid {
    color: #f44336;
    background: rgba(244, 67, 54, 0.06);
    border-color: #f44336;
  }
`]),V=(0,ce.Z)([`
  width: 160px;
  padding: 5px 0;
  background: #fff;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.13), 0 2px 6px rgba(0, 0, 0, 0.1);
  .menuItem {
    display: flex;
    align-items: center;
    line-height: 36px;
    padding: 0 16px;
    cursor: pointer;
    &:hover {
      background: #2196f3;
      color: #fff;
      i {
        color: #fff;
      }
    }
    i {
      margin-right: 10px;
      color: #757575;
      font-size: 16px;
    }
  }
`],[`
  width: 160px;
  padding: 5px 0;
  background: #fff;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.13), 0 2px 6px rgba(0, 0, 0, 0.1);
  .menuItem {
    display: flex;
    align-items: center;
    line-height: 36px;
    padding: 0 16px;
    cursor: pointer;
    &:hover {
      background: #2196f3;
      color: #fff;
      i {
        color: #fff;
      }
    }
    i {
      margin-right: 10px;
      color: #757575;
      font-size: 16px;
    }
  }
`]),C=(0,ce.Z)([`
  margin: 11px 20px 0 20px;
  padding-bottom: 9px;
  border-bottom: 1px solid #eaeaea;
  display: flex;
  align-items: center;
  justify-content: space-between;
  .title {
    display: flex;
    align-items: center;
    .switchType {
      padding: 6px;
      background: #fff;
      border-radius: 3px;
      cursor: pointer;
      display: flex;
      align-items: center;
      &.disabled {
        cursor: default;
      }
      &:hover:not(.disabled) {
        background: #f5f5f5;
      }
      span {
        margin-left: 8px;
        font-size: 15px;
        font-weight: 600;
      }
    }
  }
  .iconWrap {
    &:hover {
      color: #2196f3;
    }
  }

  .introOptions {
    display: flex;
    align-items: center;
    .optionIcon {
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #fff;
      border-radius: 3px;
      margin-right: 10px;
      cursor: pointer;
      &:last-child {
        margin-right: 0;
      }
      i {
        color: #9e9e9e;
      }
      &:hover {
        background: #f5f5f5;
      }
      &.active {
        background: #f5f5f5;
        i {
          color: #2196f3;
        }
      }
    }
  }
`],[`
  margin: 11px 20px 0 20px;
  padding-bottom: 9px;
  border-bottom: 1px solid #eaeaea;
  display: flex;
  align-items: center;
  justify-content: space-between;
  .title {
    display: flex;
    align-items: center;
    .switchType {
      padding: 6px;
      background: #fff;
      border-radius: 3px;
      cursor: pointer;
      display: flex;
      align-items: center;
      &.disabled {
        cursor: default;
      }
      &:hover:not(.disabled) {
        background: #f5f5f5;
      }
      span {
        margin-left: 8px;
        font-size: 15px;
        font-weight: 600;
      }
    }
  }
  .iconWrap {
    &:hover {
      color: #2196f3;
    }
  }

  .introOptions {
    display: flex;
    align-items: center;
    .optionIcon {
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #fff;
      border-radius: 3px;
      margin-right: 10px;
      cursor: pointer;
      &:last-child {
        margin-right: 0;
      }
      i {
        color: #9e9e9e;
      }
      &:hover {
        background: #f5f5f5;
      }
      &.active {
        background: #f5f5f5;
        i {
          color: #2196f3;
        }
      }
    }
  }
`]),O=(0,ce.Z)([""],[""]),n=(0,ce.Z)([`
  min-height: 36px;
  overflow: auto;
  background: #ffffff;
  border-radius: 3px;
  box-shadow: 0px 4px 16px 0px rgba(0, 0, 0, 0.24);
  padding: 6px 0;
  .empty {
    padding: 0 16px;
    color: #9e9e9e;
    cursor: pointer;
  }
  .title {
    font-weight: bold;
    padding: 6px 16px 6px;
  }
  .item {
    display: flex;
    align-items: center;
    line-height: 36px;
    padding: 0 16px;
    cursor: pointer;
    transition: background-color color 0.25s;
    i {
      margin-right: 6px;
      color: #9e9e9e;
    }
    .text {
      margin-right: 6px;
    }
    &.disabled {
      cursor: not-allowed;
      color: #bdbdbd;
    }
    &:not(disabled):hover {
      background-color: #2196f3;
      color: #ffffff;
      i {
        color: #ffffff;
      }
    }
  }
`],[`
  min-height: 36px;
  overflow: auto;
  background: #ffffff;
  border-radius: 3px;
  box-shadow: 0px 4px 16px 0px rgba(0, 0, 0, 0.24);
  padding: 6px 0;
  .empty {
    padding: 0 16px;
    color: #9e9e9e;
    cursor: pointer;
  }
  .title {
    font-weight: bold;
    padding: 6px 16px 6px;
  }
  .item {
    display: flex;
    align-items: center;
    line-height: 36px;
    padding: 0 16px;
    cursor: pointer;
    transition: background-color color 0.25s;
    i {
      margin-right: 6px;
      color: #9e9e9e;
    }
    .text {
      margin-right: 6px;
    }
    &.disabled {
      cursor: not-allowed;
      color: #bdbdbd;
    }
    &:not(disabled):hover {
      background-color: #2196f3;
      color: #ffffff;
      i {
        color: #ffffff;
      }
    }
  }
`]),s=(0,ce.Z)([`
  display: flex;
  align-items: center;
  justify-content: space-between;
`],[`
  display: flex;
  align-items: center;
  justify-content: space-between;
`]),j=(0,ce.Z)([`
  position: relative;
  border-radius: 3px;
  display: flex;
  flex-direction: `,`;
  `,`
  .nameAndStatus {
    display: flex;
    `,`
    margin-right: `,`;
    margin-bottom: `,`;
    padding-top: `,`;
    .required {
      position: absolute;
      top: `,`;
      left: -8px;
      color: #f44336;
      transition: all 0.25s;
    }
    .titleContent {
      display: flex;
      position: relative;
      margin-right: 10px;
      `,`
    }
    .iconWrap {
    }
    .typeIcon {
      color: #9e9e9e;
      font-size: 16px;
    }
    .controlName {
      margin-left: 6px;
      font-weight: 700;
      text-align: `,`;
      font-size: `,`;
      line-height: `,`;
      color: `,`;
      `,`;
      &.hideTitle {
        color: #9e9e9e !important;
      }
    }
    .isSplitLine {
      font-size: 15px;
      font-weight: bold;
    }
    &.minHeight18 {
      min-height: 18px;
    }
  }

  .tabHeaderTileWrap {
    width: 100%;
    box-size: border-box;
    background: #f8f8f8;
    border-radius: 8px 8px 0 0;
    & > div {
      &:first-child {
        border-radius: 5px 0 0 0;
      }
    }
  }

  .desc {
    color: #9e9e9e;
    margin-top: 8px;
    line-height: 13px;
  }
`],[`
  position: relative;
  border-radius: 3px;
  display: flex;
  flex-direction: `,`;
  `,`
  .nameAndStatus {
    display: flex;
    `,`
    margin-right: `,`;
    margin-bottom: `,`;
    padding-top: `,`;
    .required {
      position: absolute;
      top: `,`;
      left: -8px;
      color: #f44336;
      transition: all 0.25s;
    }
    .titleContent {
      display: flex;
      position: relative;
      margin-right: 10px;
      `,`
    }
    .iconWrap {
    }
    .typeIcon {
      color: #9e9e9e;
      font-size: 16px;
    }
    .controlName {
      margin-left: 6px;
      font-weight: 700;
      text-align: `,`;
      font-size: `,`;
      line-height: `,`;
      color: `,`;
      `,`;
      &.hideTitle {
        color: #9e9e9e !important;
      }
    }
    .isSplitLine {
      font-size: 15px;
      font-weight: bold;
    }
    &.minHeight18 {
      min-height: 18px;
    }
  }

  .tabHeaderTileWrap {
    width: 100%;
    box-size: border-box;
    background: #f8f8f8;
    border-radius: 8px 8px 0 0;
    & > div {
      &:first-child {
        border-radius: 5px 0 0 0;
      }
    }
  }

  .desc {
    color: #9e9e9e;
    margin-top: 8px;
    line-height: 13px;
  }
`]),A=(0,ce.Z)([`
  display: flex;
  align-items: center;
  margin-top: 12px;
  .text {
    margin: 0 6px;
  }
  .name {
    flex: 1;
    &.needLink {
      cursor: pointer;
      color: #2196f3;
    }
  }
`],[`
  display: flex;
  align-items: center;
  margin-top: 12px;
  .text {
    margin: 0 6px;
  }
  .name {
    flex: 1;
    &.needLink {
      cursor: pointer;
      color: #2196f3;
    }
  }
`]),S=(0,ce.Z)([`
  display: flex;
  padding: 2px;
  background: #f8f8f8;
  border-radius: 3px;
  .animaItem {
    height: 32px;
    border-radius: 3px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-weight: bold;
    color: #757575;
    flex: 1;
    margin-left: 2px;
    &:first-child {
      margin-left: 0;
    }
    &:hover {
      color: #2196f3;
      i {
        color: #2196f3;
      }
    }
    i {
      color: #757575;
    }
    &.active {
      background: #ffffff;
      color: #2196f3;
      i {
        color: #2196f3;
      }
    }
    &.disabled {
      color: #bdbdbd !important;
      cursor: not-allowed;
    }
  }
`],[`
  display: flex;
  padding: 2px;
  background: #f8f8f8;
  border-radius: 3px;
  .animaItem {
    height: 32px;
    border-radius: 3px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-weight: bold;
    color: #757575;
    flex: 1;
    margin-left: 2px;
    &:first-child {
      margin-left: 0;
    }
    &:hover {
      color: #2196f3;
      i {
        color: #2196f3;
      }
    }
    i {
      color: #757575;
    }
    &.active {
      background: #ffffff;
      color: #2196f3;
      i {
        color: #2196f3;
      }
    }
    &.disabled {
      color: #bdbdbd !important;
      cursor: not-allowed;
    }
  }
`]),I=(0,ce.Z)([`
  display: flex;
  border-radius: 3px;
  border: 1px solid #dddddd;
  margin-top: 8px;
  .Dropdown--input {
    border: none !important;
  }
  .ming.Dropdown.disabled {
    background-color: #fff !important;
  }
  .ming.Dropdown {
    .ming.Menu {
      width: 100%;
    }
  }
  .viewCon {
    padding: 0 16px;
    background: #fafafa;
    line-height: 34px;
    text-align: center;
    color: #757575;
  }
  .filterEditIcon {
    width: 36px;
    text-align: center;
    cursor: pointer;
    border-left: 1px solid #dddddd;
    color: #989898;
    &:hover {
      background: #f5f5f5;
      color: #2196f3;
    }
  }
`],[`
  display: flex;
  border-radius: 3px;
  border: 1px solid #dddddd;
  margin-top: 8px;
  .Dropdown--input {
    border: none !important;
  }
  .ming.Dropdown.disabled {
    background-color: #fff !important;
  }
  .ming.Dropdown {
    .ming.Menu {
      width: 100%;
    }
  }
  .viewCon {
    padding: 0 16px;
    background: #fafafa;
    line-height: 34px;
    text-align: center;
    color: #757575;
  }
  .filterEditIcon {
    width: 36px;
    text-align: center;
    cursor: pointer;
    border-left: 1px solid #dddddd;
    color: #989898;
    &:hover {
      background: #f5f5f5;
      color: #2196f3;
    }
  }
`]),c=(0,ce.Z)([`
  margin-top: 8px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  span {
    margin: 0 8px;
    color: #9e9e9e;
  }
  input {
    width: 100%;
  }
`],[`
  margin-top: 8px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  span {
    margin: 0 8px;
    color: #9e9e9e;
  }
  input {
    width: 100%;
  }
`]),q=(0,ce.Z)([`
  border: 1px solid #e0e0e0;
  border-radius: 3px;
  padding: 10px 12px;
  background-color: #fff;
  .displayType {
    margin-top: 8px;
  }
  span {
    margin: 0 4px;
  }
  .sourceName {
    color: #2196f3;
  }
`],[`
  border: 1px solid #e0e0e0;
  border-radius: 3px;
  padding: 10px 12px;
  background-color: #fff;
  .displayType {
    margin-top: 8px;
  }
  span {
    margin: 0 4px;
  }
  .sourceName {
    color: #2196f3;
  }
`]),b=g.ZP.div(p),k=g.ZP.div(L),ee=g.ZP.div(te,function(T){return T.bgColor||"#fff"}),re=(0,g.ZP)(ee)(R),ie=g.ZP.div(y),le=g.ZP.div(a),E=g.ZP.div(r,function(T){return T.height||34}),w=g.ZP.div(o,function(T){return T.size||24},function(T){return T.size||24},function(T){return T.displayRow?"5px":"12px"}),K=g.ZP.div(d,function(T){return T.direction==="0"?"width: "+T.width+"px;":"width: fit-content;"}),N=g.ZP.div(Z,function(T){return T.direction!=="0"?"white-space: normal":"white-space: nowrap;overflow: hidden;text-overflow: ellipsis;"},function(T){return T.direction==="0"?"max-width: "+T.width+"px;":""},function(T){return T.color||"#2196f3"}),F=g.ZP.div(H,function(T){return T.isTab?"padding: 8px 20px;":""}),h=g.ZP.div(U),z=g.ZP.div(f),X=g.ZP.div(V),B=g.ZP.div(C),x=g.ZP.div(O),Q=g.ZP.div(n),i=g.ZP.div(s),m=g.ZP.div(j,function(T){return T.displayRow?"row":"column"},function(T){return T.readOnly?"opacity: 0.6;":""},function(T){return T.displayRow?"line-height: 18px;":"align-items: center;"},function(T){return T.displayRow?"1px":"0px"},function(T){return T.displayRow?"0px":"6px"},function(T){return T.displayRow?"7px":"0px"},function(T){return T.displayRow?"8px":"4px"},function(T){var G=T.displayRow,D=T.titleWidth;return G&&D?"width:"+D+"px":""},function(T){return T.textAlign==="1"?"left":"right"},function(T){return T.titleSize},function(T){return parseInt(T.titleSize)>18?T.titleSize:"18px"},function(T){return T.titleColor||"#757575"},function(T){return T.titleStyle||""}),v=g.ZP.div(A),W=g.ZP.div(S),P=g.ZP.div(I),u=g.ZP.div(c),l=g.ZP.div(q)},77632:(lt,Te,t)=>{"use strict";t.d(Te,{AP:()=>F,CX:()=>z,DS:()=>K,Hi:()=>v,IQ:()=>P,Uz:()=>w,bZ:()=>h,dN:()=>N,gC:()=>ee,ir:()=>W,pQ:()=>X,q7:()=>E});var ce=t(12424),g=t(85315),p=t(88902),L=t.n(p);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(70264);var R=t(88106),y=t(72444),a=t(63239),r=t.n(a),o=t(88239),d=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var Z=t(1694);var H=t(93967),U=t.n(H);if(!/^(1887|7596|7798)$/.test(t.j))var f=t(83298);var V=t(7145),C=t.n(V),O=t(96486),n=t.n(O);if(!/^(1887|7596|7798)$/.test(t.j))var s=t(94914);if(!/^(1887|7596|7798)$/.test(t.j))var j=t(62232);if(!/^(1887|7596|7798)$/.test(t.j))var A=t(57467);var S=function(Ce){var he=n().get(Ce,["advancedSetting","defsource"]);try{var fe=he&&JSON.parse(he);return fe}catch(Ee){console.log(Ee)}},I=function(Ce){var he=Ce.code,fe=Ce.data,Ee=Ce.controls;if(he===1)return alert(_l("\u4FDD\u5B58\u6210\u529F")),"";var Y=_l("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5");switch(he){case 2:Y=fe===20?_l("\u516C\u5F0F\u9A8C\u8BC1\u5931\u8D25"):_l("\u8F93\u5165\u9A8C\u8BC1\u4FE1\u606F\u5931\u8D25");break;case 3:Y=_l("\u6307\u5B9A\u53C2\u6570\u7684\u6570\u636E\u4E0D\u5B58\u5728");break;case 7:Y=_l("\u6743\u9650\u4E0D\u591F");break;case 8:Y=_l("\u8BF7\u6C42\u8D85\u65F6");break;case 10:Y=_l("\u6570\u636E\u5F02\u5E38\uFF0C\u8BF7\u52FF\u591A\u7A97\u53E3\u7F16\u8F91\u6216\u8005\u591A\u4EBA\u540C\u65F6\u7F16\u8F91\uFF0C\u8BF7\u5237\u65B0\u6D4F\u89C8\u5668\u91CD\u8BD5\uFF01");break;case 16:var oe=_.find(Ee,function(ve){return ve.alias===fe});Y=_l("%0\u522B\u540D\u91CD\u590D",_.get(oe,"controlName"));break;default:break}return alert(Y,2),Y};function c(de){var Ce=de.advancedSetting,he=Ce===void 0?{}:Ce,fe=de.type,Ee=he.checkrange,Y=Ee===void 0?"0":Ee,oe=he.min,ve=oe===void 0?"":oe,ue=he.max,pe=ue===void 0?"":ue,Se=function(be){return(be?be.toString():"").replace(/,/g,"")},ye=parseFloat(Se(ve)),J=parseFloat(Se(pe));return ve===""&&pe===""&&Y==="1"?C()(de,{advancedSetting:{$set:(0,o.default)({},he,{checkrange:"0",min:"",max:""})}}):isNaN(ye)&&isNaN(J)?C()(de,{advancedSetting:{$set:(0,o.default)({},he,{min:"",max:""})}}):J<ye?C()(de,{advancedSetting:{$set:(0,o.default)({},he,{min:"",max:""})}}):de}function q(de){var Ce=S(de);if(!Ce)return de;var he=Ce.map(function(fe){return C()(fe,{$apply:function(Y){var oe=Y.staticValue;if(!oe)return Y;try{var ve=JSON.parse(oe);return(0,o.default)({},n().omit(Y,"relateSheetName"),{staticValue:r()(ve.map(function(ue){return n().get(safeParse(ue),"rowid")||ue}))})}catch(ue){return de}}})});return C()(de,{advancedSetting:{$apply:function(Ee){return(0,o.default)({},Ee,{defsource:r()(he)})}}})}function b(de,Ce){var he=n().get(de,["advancedSetting","defsource"])||"[]";try{var fe=he&&JSON.parse(he);if(n().isEmpty(fe))return de;var Ee=fe.map(function(Y){return C()(Y,{$apply:function(ve){var ue=ve.staticValue;if(ue&&typeof ue=="string"){var pe=safeParse(ue||"{}")[Ce];return(0,o.default)({},ve,{staticValue:pe||ue})}return ue[Ce]?(0,o.default)({},ve,{staticValue:ue[Ce]}):ve}})});return C()(de,{advancedSetting:{$apply:function(oe){return(0,o.default)({},oe,{defsource:r()(Ee)})}}})}catch(Y){console.log(Y)}return de}function k(de){var Ce=n().get(de,["advancedSetting","topfilters"])||"[]";try{var he=Ce&&JSON.parse(Ce);if(n().isEmpty(he))return de;var fe=he.map(function(Ee){return C()(Ee,{$apply:function(oe){return safeParse(oe||"{}").id||oe}})});return C()(de,{advancedSetting:{$apply:function(Y){return(0,o.default)({},Y,{topfilters:r()(fe)})}}})}catch(Ee){console.log(Ee)}return de}function ee(de,Ce){return n().isBoolean(Ce)&&Ce&&!(0,O.isEmpty)(de.dynamicSource)&&de.dynamicSource.forEach(function(he){return he.rcid=""}),n().includes([19,23,24,26,27,29,35,48],de.dataType)&&de.values?(0,o.default)({},de,{values:de.values.map(function(he){try{var fe=JSON.parse(he);return(typeof fe>"u"?"undefined":(0,y.default)(fe))==="object"?fe.id:he}catch(Ee){return he}})}):de}function re(de){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,he=arguments[2],fe=he||"filters",Ee=(0,s.aq)(de,[fe]);try{var Y=[];return Ee.some(function(oe){return oe.groupFilters})?Y=Ee.map(function(oe){return(0,o.default)({},oe,{groupFilters:(oe.groupFilters||[]).map(function(ve){return ee(ve,Ce)})})}):Y=Ee.map(function(oe){return ee(oe,Ce)}),(0,s.Wz)(de,(0,R.default)({},fe,r()(Y)))}catch(oe){return de}}var ie=function(Ce,he){return Ce.filter(function(fe){return fe.controlId!==he.controlId&&!(0,O.includes)(Z.qp,fe.type)})},le=function(Ce){return Ce.type===29&&Ce.enumDefault===1},E=function(Ce,he){return Ce=ie(Ce,he),Ce.filter(function(fe){if(le(fe))return!0;var Ee=fe.type;if(Ee===38&&[3].includes(fe.enumDefault))return!1;if(Ee===30||le(fe)){var Y=(0,O.get)(fe,["sourceControl","type"]);Y&&(Ee=Y)}return!(0,O.includes)([29,30].concat(Z.qp),Ee)})},w=function(Ce,he){return Ce=ie(Ce,he),Ce.filter(function(fe){var Ee=fe.type,Y=fe.enumDefault2,oe=fe.enumDefault;if(Ee===30||le(fe)){var ve=(0,O.get)(fe,"sourceControl")||{};if((0,O.includes)([9,10,11],ve.type))return!1;ve.type&&(Ee=ve.type,oe=ve.enumDefault,Y=ve.enumDefault2)}return(0,O.includes)([6,8,28,31,46],Ee)||(0,O.includes)([9,10,11],Ee)&&oe===1||Ee===38&&(0,O.includes)([1],oe)||Ee===37&&!(0,O.includes)([15,16],Y)})},K=function(Ce,he){return Ce=ie(Ce,he),Ce.filter(function(fe){var Ee=fe.type,Y=fe.enumDefault2;if(Ee===30||le(fe)){var oe=(0,O.get)(fe,"sourceControl")||{};oe.type&&(Ee=oe.type,Y=oe.enumDefault2)}return(0,O.includes)([8,31],Ee)||Ee===37&&!(0,O.includes)([15,16],Y)})};function N(de,Ce,he){var fe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(0,f.Z)(de,{noUnit:Ce,noSplit:Ce,noMask:he,doNotHandleTimeZone:fe.doNotHandleTimeZone})}function F(de,Ce,he){return h(de,Ce,he,!0)}function h(de,Ce,he,fe){var Ee=(0,j.S1)(Ce,de);if(!Ee||n().isEmpty(he))return"";var Y=Ee.type,oe=Ee.controlId;return n().includes([6,8],Y)?he[oe]:oe&&N(n().assign({},Ee,{value:he[oe]}),fe)||""}function z(de,Ce){var he=Ce.allControls,fe=Ce.worksheetData,Ee=Ce.errorCallback,Y=Ce.mode,oe=Ce.isLast,ve=(0,j.S1)(he,de),ue=document.createElement("div");return ue.classList.add("columnTag"),ve||(ue.classList.add("deleted"),n().isFunction(Ee)&&Ee(1)),Y===3&&!oe&&ue.classList.add("onlytag"),ue.innerHTML=(0,O.isEmpty)(ve)?`
    <div class="columnName">`+_l("\u8BE5\u5B57\u6BB5\u5DF2\u5220\u9664")+`</div>
  `:`
    <div class="columnName">`+ve.controlName+`</div>
  `,ue}function X(de,Ce){var he=(0,j.S1)(de,Ce),fe=(0,O.isEmpty)(he),Ee=he&&he.type===30&&(he.strDefault||"")[0]==="1";return d.createElement(te.Z,{text:d.createElement("span",null,_l("ID: %0",Ce)),popupPlacement:"bottom",disable:!fe},d.createElement(A.U4,{className:U()({invalid:fe||Ee,Hand:fe})},fe?_l("\u5B57\u6BB5\u5DF2\u5220\u9664"):Ee?_l("%0(\u65E0\u6548\u7C7B\u578B)",he.controlName):he.controlName))}function B(de){sheetAjax.getWorksheetInfo({worksheetId:de}).then(function(Ce){var he=JSON.parse(localStorage.getItem("mdAppCache_"+md.global.Account.accountId+"_"+Ce.appId)),fe=(_.find(_.get(he,"worksheets")||[],function(Ee){return Ee.groupId===Ce.groupId&&Ee.worksheetId===Ce.worksheetId})||{}).viewId||"";navigateTo("/app/"+Ce.appId+"/"+Ce.groupId+"/"+Ce.worksheetId+"/"+fe)})}var x=function(Ce,he){homeAppApi.getAppSimpleInfo({worksheetId:Ce}).then(function(fe){var Ee=fe.appId,Y=fe.appSectionId;window.open("/app/"+Ee+"/"+Y+"/"+Ce+"/"+he)})},Q=function(Ce){homeAppApi.getAppSimpleInfo({worksheetId:Ce}).then(function(he){var fe=he.appId,Ee=he.appSectionId,Y=JSON.parse(localStorage.getItem("mdAppCache_"+md.global.Account.accountId+"_"+fe))||{},oe=((Y.worksheets||[]).filter(function(ve){return ve.groupId===Ee&&ve.worksheetId===Ce})[0]||{}).viewId;oe?navigateTo("/app/"+fe+"/"+Ee+"/"+Ce+"/"+oe):navigateTo("/app/"+fe+"/"+Ee+"/"+Ce)})},i=function(Ce){var he=Ce.reduce(function(fe,Ee){return update(fe,{$push:[[Ee]]})},[]);return _.flatten(he.map(function(fe,Ee){return fe.map(function(Y,oe){return _extends({},Y,{row:Ee,col:oe})})}))},m=function(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Ce.map(function(fe){var Ee=n().find(he,function(ue){return ue.controlId===fe.controlId});if(Ee&&fe.value){if(n().includes([26,27,48],Ee.type)){var Y={26:"accountId",27:"departmentId",48:"organizeId"},oe=b((0,o.default)({},Ee,{advancedSetting:{defsource:fe.value}}),Y[Ee.type]);return(0,o.default)({},fe,{value:n().get(oe,"advancedSetting.defsource")})}if(n().includes([29,35,51],Ee.type)){var ve=q((0,o.default)({},Ee,{advancedSetting:{defsource:fe.value}}));return(0,o.default)({},fe,{value:n().get(ve,"advancedSetting.defsource")})}return fe}else return fe})},v=function de(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Ce.map(function(fe){var Ee=fe.type,Y=(0,o.default)({},fe),oe=!he;n().get(Y,"default")==="[]"&&(Y.default="");var ve=(0,s.aq)(Y,"custom_event")||[];if(!(0,O.isEmpty)(ve)){var ue=ve.map(function(Ae){return(0,o.default)({},Ae,{eventActions:(Ae.eventActions||[]).map(function(Ne){return(0,o.default)({},Ne,{filters:(Ne.filters||[]).map(function(Me){var Fe=re({advancedSetting:{filterItems:r()(Me.filterItems)}},oe,"filterItems");return(0,o.default)({},Me,{filterItems:(0,s.aq)(Fe,"filterItems")})}),actions:(Ne.actions||[]).map(function(Me){var Fe=m(Me.actionItems,Ce);return n().includes(["5","12"],Me.actionType)?(0,o.default)({},Me,{actionItems:Fe}):Me})})})})});Y=(0,s.Wz)(Y,{custom_event:r()(ue)})}if(Ee===34){var pe=(0,s.aq)(Y,"uniquecontrols")||[];if(!he&&pe.length>0){var Se=(Y.relationControls||[]).filter(function(Ae){return Ae.unique}).map(function(Ae){return Ae.controlId});pe=pe.filter(function(Ae){var Ne=n().find(Y.relationControls||[],function(Me){return Me.controlId===Ae});return!!Ne&&(0,s.fu)(Ne)&&!n().includes(Se,Ae)&&n().includes(Y.showControls||[],Ae)})}return(0,o.default)({},Y,{advancedSetting:(0,o.default)({},Y.advancedSetting,{uniquecontrols:r()(pe)}),relationControls:de(Y.relationControls,!0)})}if(he&&!(0,s.fu)(Y)&&n().get(Y,"unique")&&(Y.unique=!1),n().includes([2,6,8,10],Ee))return c(Y);if(Ee===26)return b(Y,"accountId");if(Ee===27)return b(Y,"departmentId");if(Ee===48)return b(Y,"organizeId");if(n().includes([29,35,51],Ee))return(0,O.isEmpty)((0,s.aq)(Y,"filters"))||(Y=re(Y,oe)),(0,O.isEmpty)((0,s.aq)(Y,"resultfilters"))||(Y=re(Y,!0,"resultfilters")),(0,s.aq)(Y,"topshow")===3&&!(0,O.isEmpty)((0,s.aq)(Y,"topfilters"))&&(Y=re(Y,oe,"topfilters")),(0,s.aq)(Y,"topshow")===2&&!(0,O.isEmpty)((0,s.aq)(Y,"topfilters"))&&(Y=k(Y)),he?(0,O.omit)(q(Y),"relationControls","controls","sourceControl"):(0,O.omit)(q(Y),"relationControls","controls");if(Ee===37)return(0,O.isEmpty)((0,s.aq)(Y,"filters"))||(Y=re(Y)),Y;if(n().includes([20,31,32],Ee)){var ye=Y.dataSource||"";return(Ee===20||Ee===31)&&(ye=ye.replace(/c*SUM/gi,"cSUM").replace(/c*MIN/gi,"cMIN").replace(/c*MAX/gi,"cMAX").replace(/c*PRODUCT/gi,"cPRODUCT").replace(/c*COUNTA/gi,"cCOUNTA").replace(/c*ABS/gi,"cABS").replace(/c*INT/gi,"cINT").replace(/c*MOD/gi,"cMOD").replace(/c*ROUNDUP/gi,"cROUNDUP").replace(/c*ROUNDDOWN/gi,"cROUNDDOWN").replace(/c*ROUND\(/gi,"cROUND(")),Ee===20&&(ye=ye.replace(/c*AVG/gi,"cAVG")),Ee===31&&(ye=ye.replace(/c*AVERAGE/gi,"cAVG")),C()(Y,{dataSource:{$set:ye}})}if(Ee===33){var J=(0,s.aq)(Y,"increase")||[];J=(0,O.filter)(J,function(Ae){return[2,3].includes(Ae.type)?Ae.controlId:!0});var me=(0,O.findIndex)(J,function(Ae){return Ae.type===1});if(me<0)return Y;var be=J[me];if(be.start)return Y;var xe=C()(J,(0,R.default)({},me,{$apply:function(Ne){return(0,o.default)({},Ne,{start:1})}}));return(0,s.Wz)(Y,{increase:r()(xe)})}return Y})},W=function(Ce,he){if(!(Ce&&Ce.length))return[];var fe=[],Ee=Ce.filter(function(Y){return!n().includes([10000003,10000006],Y.type)}).filter(function(Y){var oe=n().find(Ce,function(ve){return Y.dataSource===ve.controlId});return Y.dataSource?oe&&oe.type!==10000007:!0}).map(function(Y){var oe=n().find(Ce,function(ve){return ve.dataSource===Y.controlId});return Y.type===10000007&&oe?(0,o.default)({},Y,{originType:oe.type}):Y});return he&&Ee.forEach(function(Y){if(Y.dataSource){var oe=(0,O.findIndex)(fe,function(ue){return ue.controlId===Y.dataSource});if(oe>-1){var ve=fe[oe];fe[oe]=(0,o.default)({},ve,{child:(ve.child||[]).concat(Y)})}else fe.push((0,o.default)({},(0,O.find)(Ce,function(ue){return ue.controlId===Y.dataSource}),{child:[Y]}))}else fe.push(Y)}),he?fe:Ee},P=function(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],he=[];return n().isEmpty(Ce)||Ce.forEach(function(fe){if(!fe.dataSource)if(fe.type===10000007){var Ee=n().get(n().find(Ce,function(Y){return Y.dataSource===fe.controlId}),"type");he.push((0,o.default)({},fe,{type:Ee,enumDefault:n().includes([6,16],Ee)?0:1}))}else fe.type===10000008?he.push((0,o.default)({},fe,{type:34})):he.push(fe)}),he},u=function(Ce,he){var fe=he.activeWidget,Ee=document.getElementById("widgetDisplayWrap"),Y=document.getElementById("widget-"+(fe||{}).controlId);if(!(!Ee||!Y)){var oe=Y.getBoundingClientRect();if(oe.top<0||oe.top>Ee.offsetHeight){var ve=Ee.querySelector(".nano-content");ve&&setTimeout(function(){var ue=document.getElementById("widget-"+Ce.controlId);if(ue){var pe=ue.getBoundingClientRect(),Se=pe.top,ye=pe.height;ve.scrollTop=ve.scrollTop+Se-ye}},0)}}},l=function(Ce){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},fe=arguments[2],Ee=arguments[3],Y=fe.widgets,oe=fe.activeWidget,ve=fe.allControls,ue=fe.setWidgets,pe=fe.setActiveWidget,Se=fe.globalSheetInfo,ye=Se===void 0?{}:Se,J=he.mode,me=he.path,be=he.location,xe=he.displayItemType,Ae=he.rowIndex,Ne=head(Ce),Me=getFeatureStatus(ye.projectId,Ne.featureId);if(_.includes([49,50],Ne.type)&&Me==="2"){buriedUpgradeVersionDialog(ye.projectId,Ne.featureId);return}if(isExceedMaxControlLimit(ve,Ce.length)){alert(_l("\u5F53\u524D\u8868\u5B58\u5728\u7684\u63A7\u4EF6\u5DF2\u8FBE\u5230\u6700\u5927\u503C\uFF0C\u65E0\u6CD5\u6DFB\u52A0\u7EE7\u7EED\u6DFB\u52A0\u65B0\u63A7\u4EF6!"),3);return}if(J){if(isTabSheetList(Ce)&&xe==="common"&&(Ce=handleAdvancedSettingChange(Ce,{showtype:"5"})),J===DRAG_MODE.INSERT_NEW_LINE){ue(update(Y,{$splice:[[Ae,0,Ce]]})),pe(Ce[0]),_.isFunction(Ee)&&Ee();return}if(J===DRAG_MODE.INSERT_TO_ROW_END){ue(update(Y,_defineProperty({},Ae,{$apply:function(we){var Ie=we.concat(Ce);return Ie.map(function(ge){return _extends({},ge,{size:WHOLE_SIZE/Ie.length})})}}))),pe(adjustControlSize(Y[Ae],Ce[0]));return}if(J===DRAG_MODE.INSERT_TO_COL){ue(insertControlInSameLine({widgets:Y,location:be,dropPath:me,srcItem:Ce[0]})),pe(adjustControlSize(Y[me[0]],Ce[0]));return}}var Fe=Y;Ce.map(function(Be,we){var Ie=0;if(isEmpty(oe)||ve.findIndex(function(Pe){return Pe.controlId===oe.controlId})<0)Ie=fixedBottomWidgets(Be)?Fe.length-1:getBoundRowByTab(Y)-1;else{var ge=we?Ce[we-1]:oe;if(Ie=head(getPathById(Fe,get(ge,"controlId"))),ge.type===52)if(notInsetSectionTab(Be))Ie=fixedBottomWidgets(Be)?Ie:getBoundRowByTab(Y)-1;else{var Re=D(ve,ge.controlId);Ie=Ie+Re.length}else!fixedBottomWidgets(oe)&&fixedBottomWidgets(Be)&&(Ie=Fe.length-1),fixedBottomWidgets(oe)&&!fixedBottomWidgets(Be)&&(Ie=getBoundRowByTab(Y)-1)}Ie<0&&(Ie=Fe.length>0?Fe.length-1:0),isHaveGap(Fe[Ie],Be)?Fe=_.isEmpty(Fe)?update(Fe,{$push:[Ce]}):update(Fe,_defineProperty({},Ie,{$push:[Be]})):Fe=update(Fe,{$splice:[[Ie+1,0,[Be]]]}),we===Ce.length-1&&(ue(Fe),pe(Be),setTimeout(function(){u(Be,_extends({},fe,{activeWidget:Be}))},50))}),_.isFunction(Ee)&&Ee()},T=function(Ce,he){var fe=he.widgets,Ee=he.activeWidget,Y=he.allControls,oe=he.setWidgets,ve=he.setActiveWidget;if(isExceedMaxControlLimit(Y,Ce.length)){alert(_l("\u5F53\u524D\u8868\u5B58\u5728\u7684\u63A7\u4EF6\u5DF2\u8FBE\u5230\u6700\u5927\u503C\uFF0C\u65E0\u6CD5\u6DFB\u52A0\u7EE7\u7EED\u6DFB\u52A0\u65B0\u63A7\u4EF6!"),3);return}var ue=fe,pe=head(getPathById(ue,Ee.controlId)),Se=D(Y,Ee.controlId);pe=pe+Se.length,Ce.map(function(ye,J){isHaveGap(ue[pe],ye)?ue=update(ue,_defineProperty({},pe,{$push:[ye]})):(pe=pe+1,ue=update(ue,{$splice:[[pe,0,[ye]]]})),J===Ce.length-1&&(oe(ue),ve(ye),setTimeout(function(){u(ye,_extends({},he,{activeWidget:ye}))},50))})},G=function(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},he=_extends({},Ce,{attribute:0,controlId:uuidv4(),alias:"",controlName:_l("%0-\u590D\u5236",Ce.controlName)}),fe={};if(Ce.type===34&&(_.get(Ce,"advancedSetting.detailworksheettype")==="2"||_.get(window.subListSheetConfig[Ce.controlId],"mode")==="new")){var Ee=(he.relationControls||[]).map(function(oe){if(_.includes(ALL_SYS,oe.controlId))return oe;var ve=_extends({},oe,{controlId:uuidv4(),advancedSetting:_extends({},oe.advancedSetting,{dynamicsrc:"",defaulttype:""})});return fe[oe.controlId]=ve.controlId,ve}),Y=_JSON$stringify(_extends({},he,{dataSource:uuidv4(),relationControls:Ee}));return _Object$keys(fe).forEach(function(oe){Y=Y.replaceAll(oe,fe[oe])}),Y=safeParse(Y),window.subListSheetConfig[he.controlId]=_extends({},window.subListSheetConfig[Ce.controlId],{sheetInfo:Y}),Y}return he},D=function(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],he=arguments[1],fe=Ce.filter(function(Ee){return Ee.sectionId===he});return putControlByOrder(fe)},M=function(Ce){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],fe=Ce.widgets,Ee=Ce.allControls,Y=Ce.queryConfigs,oe=Ce.setActiveWidget,ve=Ce.setWidgets,ue=[],pe=0,Se=fe,ye={},J=[],me={};he.map(function(xe){ue.push(xe),xe.type===52&&get(xe,"relationControls.length")&&ue.push.apply(ue,_toConsumableArray(xe.relationControls))});var be=putControlByOrder(ue);be.forEach(function(xe){var Ae=head(getPathById(Se,get(last(xe),"controlId"))),Ne=xe.map(function(Me){var Fe=G(Me);ye[Fe.sectionId]?Fe.sectionId=ye[Fe.sectionId]:pe=0;var Be=find(Y,function(we){return we.controlId===Me.controlId});return Be&&(Fe=handleAdvancedSettingChange(Fe,{dynamicsrc:"",defaulttype:""})),Me.type===52&&(ye[Me.controlId]=Fe.controlId,pe=get(Me,"relationControls.length")),Fe});me=last(Ne),Se=update(Se,{$splice:[[Ae+pe+1,0,Ne]]})}),!isExceedMaxControlLimit(flatten(Se))&&(oe(me),ve(Se))},se=function(Ce){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],fe=arguments[2],Ee=Ce.widgets,Y=Ce.setWidgets;he.forEach(function(oe){var ve=getPathById(Ee,oe.controlId),ue=_slicedToArray(ve,2),pe=ue[0],Se=ue[1];Ee=update(Ee,_defineProperty({},pe,_defineProperty({},Se,{$set:oe})))}),Y(Ee)},ae=function(Ce,he){var fe=Ce.widgets,Ee=fe===void 0?[]:fe,Y=Ce.data,oe=he.setActiveWidget,ve=he.setWidgets;_Dialog.confirm({title:_l("\u5220\u9664\u6807\u7B7E\uFF1F"),description:_l("\u6807\u7B7E\u9875\u5185\u5B57\u6BB5\u5C06\u79FB\u52A8\u5230\u5916\u90E8\uFF0C\u4E0D\u4F1A\u88AB\u5220\u9664"),okText:_l("\u5220\u9664"),buttonType:"danger",onOk:function(){var pe=[Y].concat(_toConsumableArray(Y.relationControls)),Se=batchRemoveItems(Ee,pe),ye=(Y.relationControls||[]).map(function(be){return _extends({},be,{sectionId:""})}),J=last(ye);if(ye.length){var me=getBoundRowByTab(Se);Se.splice.apply(Se,[me>-1?me:M.length,0].concat(_toConsumableArray(putControlByOrder(ye))))}ve(Se),J?(oe(J),setTimeout(function(){u(J,_extends({},he,{activeWidget:J}))},50)):oe({})}})},ne=function(Ce){var he=Ce.batchActive,fe=he===void 0?[]:he,Ee=Ce.data,Y=Ce.widgets,oe=Y===void 0?[]:Y,ve=Ce.setBatchActive,ue=last(fe);if(ue&&Ee){for(var pe=getPathById(oe,ue.controlId),Se=_slicedToArray(pe,2),ye=Se[0],J=Se[1],me=getPathById(oe,Ee.controlId),be=_slicedToArray(me,2),xe=be[0],Ae=be[1],Ne=[],Me=0;Me<oe.length;Me++)for(var Fe=oe[Me],Be=0;Be<Fe.length;Be++)Me===Math.min(ye,xe)&&Be>=(ye>xe?Ae:J)||Me===Math.max(ye,xe)&&Be<=(ye>xe?J:Ae)?Ne.push(oe[Me][Be]):Me>Math.min(ye,xe)&&Me<Math.max(ye,xe)&&Ne.push.apply(Ne,_toConsumableArray(Fe));var we=_.uniq(Ne.filter(function(Ie){return Ie.type!==52}).filter(_.identity));we.length>0&&ve(we)}}},62232:(lt,Te,t)=>{"use strict";t.d(Te,{At:()=>Se,BE:()=>ue,E0:()=>G,Ed:()=>z,FV:()=>W,GV:()=>q,Kk:()=>Me,Mh:()=>be,OW:()=>re,S1:()=>l,T0:()=>fe,Tx:()=>ae,UX:()=>ne,Uf:()=>Fe,Ve:()=>oe,XD:()=>X,Xd:()=>ie,YT:()=>Ee,YU:()=>Ae,aq:()=>se,fc:()=>Y,fi:()=>he,gz:()=>k,hB:()=>D,jT:()=>de,kz:()=>m,lS:()=>ye,rd:()=>Ne,sD:()=>u,sY:()=>b,v$:()=>K,yx:()=>xe,zJ:()=>v});var ce=t(63239),g=t.n(ce),p=t(88106),L=t(85315),te=t(88902),R=t.n(te),y=t(26378),a=t.n(y),r=t(12424),o=t(88239),d=t(96486),Z=t.n(d),H=t(7145),U=t.n(H);if(!/^(1887|7596|7798)$/.test(t.j))var f=t(36021);if(!/^(1887|7596|7798)$/.test(t.j))var V=t(65710);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(1694);if(!/^(1887|7596|7798)$/.test(t.j))var O=t(26637);var n=t(22010),s=t(86674);if(!/^(1887|7596|7798)$/.test(t.j))var j=t(28101);if(!/^(1887|7596|7798)$/.test(t.j))var A=t(15577);if(!/^(1887|7596|7798)$/.test(t.j))var S=t(94914);var I=/^(1887|7596|7798)$/.test(t.j)?null:["SUM","AVG","MIN","MAX","PRODUCT","COUNTA","ABS","INT","MOD","ROUND","ROUNDUP","ROUNDDOWN"],c=function(Ie){return(0,d.keys)(Ie).forEach(function(ge){Ie[Ie[ge]]=ge}),Ie},q=c((0,o.default)({},s.DN)),b=function(Ie){var ge={};return Ie.keys().forEach(function(Re){var Pe=Re.match(/\/(\w*)\./)[1],ke=Ie(Re),We=(0,d.upperFirst)(Pe);ge[We]=ke.default||ke[Pe]}),ge},k=function(Ie){var ge={};return Ie.keys().forEach(function(Re){var Pe=Re.match(/\/(\w*)\./)[1],ke=Pe.toUpperCase(),We=Ie(Re);ge[ke]=We.default||We[Pe]}),ge},ee=function(){var Ie=new URLSearchParams(location.search),ge={},Re=!0,Pe=!1,ke=void 0;try{for(var We=_getIterator(Ie),Ve;!(Re=(Ve=We.next()).done);Re=!0){var it=Ve.value,Ge=_slicedToArray(it,2),pt=Ge[0],ot=Ge[1];ge[pt]=ot}}catch(vt){Pe=!0,ke=vt}finally{try{!Re&&We.return&&We.return()}finally{if(Pe)throw ke}}return ge},re=function(Ie){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Re="/worksheet/field/edit",Pe=R()(Ie).reduce(function(ke,We){return ke+=(ke?"&":"")+We+"="+encodeURIComponent(Ie[We])},"");Re=Pe?Re+"?"+Pe:Re,ge?window.open(Re):(0,f.T8)(Re)},ie=function(Ie){return typeof Ie=="number"&&(Ie=q[Ie]),(0,d.get)(s.gE[Ie],"size")},le=function(Ie){var ge=Ie.type,Re=Ie.sourceControl;return ge===30?Re?ie(Re.type):V.Bi/2:ie(ge)},E=function(Ie){var ge=[];return Ie.forEach(function(Re){Re.type===52&&(Re.relationControls=Ie.filter(function(Pe){return Pe.sectionId===Re.controlId})),(!Re.sectionId||Re.sectionId&&!_.find(Ie,function(Pe){return Pe.controlId===Re.sectionId}))&&ge.push(_extends({},Re,{sectionId:""}))}),ge},w=function(Ie){var ge={},Re=0,Pe=[];return Ie.forEach(function(ke){ke.size||(ke=(0,o.default)({},ke,{size:le(ke)}));var We=ke,Ve=We.row,it=We.col;(0,d.isEmpty)(ge[Ve])?ge[Ve]=[ke]:(0,j.eq)(ge[Ve])+ke.size>V.Bi?Pe.push(ke):ge[Ve]=U()(ge[Ve],{$splice:[[it,0,ke]]}),Ve>Re&&(Re=Ve)}),Pe.forEach(function(ke,We){ge[Re+We+1]=[ke]}),(0,d.keys)(ge).sort(function(ke,We){return+ke-+We}).map(function(ke){var We=ge[ke];return(0,d.sortBy)(We,"col")})},K=function we(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ie.map(function(ge){var Re=ge.type;if(Re===34)return(0,o.default)({},ge,{relationControls:we(ge.relationControls)});if(Re===31){var Pe=new RegExp("c(?=["+I.join("|")+"])","g");return U()(ge,{dataSource:{$apply:function(We){return We.replace(/AVG/g,"AVERAGE").replace(Pe,"")}}})}return ge})},N=function(Ie){return Ie.map(function(ge){if(typeof ge.half=="boolean"){var Re=ge.size||(ge.half?WHOLE_SIZE/2:WHOLE_SIZE);return _extends({},omit(ge,"half"),{size:Re})}return omit(ge,"half")})},F=function(Ie){var ge=me(Ie),Re=ge.commonWidgets,Pe=Re===void 0?[]:Re,ke=ge.tabWidgets,We=ke===void 0?[]:ke,Ve=[];We.map(function(Ge){Ve.push([Ge]);var pt=_.get(Ge,"type")===52?w(Ge.relationControls||[]):[];pt.length>0&&Ve.push.apply(Ve,_toConsumableArray(pt))});var it=Pe.concat(Ve.filter(_.identity));return B(it)},h=function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ge=compose(w,K,N)(Ie);return F(ge)},z=function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Z().flatten(w(Ie))},X=function(Ie){var ge=Ie.type;if(ge===30)if(Ie.sourceControl&&Ie.sourceControl.type)ge=Ie.sourceControl.type;else return!1;return!(0,d.includes)(C.mQ,ge)};function B(we){return we.map(function(Ie,ge){return Ie.map(function(Re,Pe){return _extends({},Re,{row:ge,col:Pe})})})}var x=function(Ie){if(Ie.some(function(Re){return Re.attribute===1}))return Ie;var ge=findIndex(Ie,function(Re){return X(Re)});return ge>-1?update(Ie,_defineProperty({},ge,{$apply:function(Pe){return _extends({},Pe,{attribute:1})}})):Ie},Q=function(Ie){return x(flatten(B(Ie)))},i=function(Ie,ge){return Ie.map(function(Re){return Re.map(function(Pe){return _extends({},Pe,ge)})})},m=function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(Re){return Re};return Ie.filter(ge).map(function(Re){var Pe=Re.controlId,ke=Re.controlName;return{value:Pe,text:ke}})},v=function(Ie){return Ie.map(function(ge){var Re=ge.viewId,Pe=ge.name;return{text:Pe,value:Re}})},W=function(Ie,ge){return Ie.map(function(Re){var Pe=Re.appId,ke=Re.appName;return{text:Pe===ge?ke+"\uFF08 \u672C\u5E94\u7528 \uFF09":""+ke,value:Pe}})},P=function(Ie){return Ie.map(function(ge){var Re=ge.worksheetId,Pe=ge.name;return{text:Pe,value:Re}})},u=function(Ie){return Ie.map(function(ge){var Re=ge.controlId,Pe=ge.controlName;return{text:Pe,value:Re}})},l=function(Ie,ge,Re){var Pe=Z().find(Ie,function(ke){return ke.controlId===ge})||{};return Re?(0,d.get)(Pe,Re):Pe},T=function(Ie){setTimeout(function(){var ge=ee(),Re=ge.fromURL;if(Re==="newPage"){window.close();return}if(Re){navigateTo(decodeURIComponent(Re));return}if(Ie){var Pe=Ie.appId,ke=Ie.groupId,We=Ie.worksheetId;Pe?navigateTo("/app/"+Pe+"/"+ke+"/"+We):navigateTo("/app")}},300)},G=function(Ie){return typeof Ie=="number"&&(Ie=q[Ie]),s.g5[Ie]||{}},D=function(Ie){var ge=G(Ie),Re=ge.icon;return Re},M=function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ge=arguments[1],Re=Ie.concat(ge);return _extends({},ge,{size:WHOLE_SIZE/Re.length})},se=function(Ie,ge){var Re=(0,d.get)(Ie,["advancedSetting"])||{};if(!ge)return Re;var Pe=(0,d.get)(Re,ge);if((0,d.isArray)(Pe)||(0,d.isObject)(Pe))return Pe;try{return JSON.parse(Pe)}catch(ke){return""}},ae=function(Ie){return Z().get(Z().find(O.xg,function(ge){return ge.value===Ie&&Ie}),"text")||_l("\u81EA\u7531\u8FDE\u63A5")},ne=function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ie.filter(function(ge){return!((ge.type===30||ge.originType===30)&&(ge.strDefault||"")[0]==="1")})},de=function(Ie){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Re=ge.needDefault,Pe=ge.isShow,ke=se(Ie,"itemnames")||[],We=se(Ie,"showtype"),Ve=O.bV[We];return Pe?O.bV[We]||[{key:"1",value:_l("\u9009\u4E2D")},{key:"0",value:_l("\u672A\u9009\u4E2D")}]:Re?Ve.map(function(it){var Ge=Z().find(ke,function(pt){return pt.key===it.key});return Z().get(Ge,"value")?Ge:it}):We===2?ke.every(function(it){return!!it.value})?ke:Ve:ke},Ce=function(Ie){var ge=parseFloat(Ie,10);return(!_.isNumber(ge)||_.isNaN(ge))&&(ge=void 0),ge},he=function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(Ie.type===30||Ie.originType===30)&&(Ie.strDefault||"")[0]==="1"},fe=function(Ie){return(Ie.queries||[]).length?Ie.queries.map(function(ge){return(0,o.default)({},ge,{templates:[{controls:(Ie.templates||{})[ge.sourceId]||[]}]})}):[]},Ee=function(Ie,ge){for(var Re=[],Pe=1;Pe<7;Pe+=2)Re.push(parseInt("0x"+Ie.slice(Pe,Pe+2)));return"rgba("+Re.join(",")+","+ge+")"},Y=function(Ie){return(0,A.Q9)()?!(0,d.includes)([14,29,34,22,51,52],Ie.type)||(Ie.type===29||Ie.type===51)&&Z().get(Ie,"advancedSetting.showtype")==="3":!(Ae(Ie)||(0,d.includes)([34,22,51,52],Ie.type))},oe=function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Re=[s.DN.SPLIT_LINE,s.DN.OCR,s.DN.EMBED,s.DN.BAR_CODE,s.DN.SEARCH_BTN,s.DN.RELATION_SEARCH,s.DN.SECTION,s.DN.REMARK].concat((0,L.Z)(s.Hp));return Z().filter(Ie,function(Pe){return!Z().includes(Re,Pe.type)||Z().includes(ge,Pe.controlId)})},ve=function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return includes([29,51],Ie.type)&&_.includes(["2","6"],get(Ie,"advancedSetting.showtype"))||Ie.type===52},ue=function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,d.includes)([29,51],Ie.type)&&Z().includes(["2","5","6"],(0,d.get)(Ie,"advancedSetting.showtype"))||Z().includes([22,52],Ie.type)},pe=function(Ie){return Ie.type===52||_.includes([29,51],Ie.type)&&get(Ie,"advancedSetting.showtype")==="6"},Se=function(Ie){return Z().includes([29,51],Ie.type)&&(0,d.get)(Ie,"advancedSetting.showtype")==="6"},ye=function(Ie){return Z().includes([29,51],Ie.type)&&(0,d.get)(Ie,"advancedSetting.showtype")==="2"},J=function(Ie){for(var ge=0;ge<Ie.length;ge++)for(var Re=Ie[ge],Pe=0;Pe<Re.length;Pe++){var ke=Ie[ge][Pe];if(pe(ke))return ge}return-1},me=function(Ie){var ge=B(Ie),Re=E(flatten(ge)),Pe=[],ke=[];return Re.map(function(We){pe(We)?ke.push(We):Pe.push(We)}),ke=ke.sort(function(We,Ve){return We.row-Ve.row}),{commonWidgets:w(Pe),tabWidgets:ke}};function be(){var we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return Ie.search(new RegExp(we.trim().replace(/([,.+?:()*\[\]^$|{}\\-])/g,"\\$1"),"i"))!==-1}var xe=function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Re=Ie.enumDefault,Pe=Ie.enumDefault2;return!([2,3].includes(Re)&&[15,16,46].includes(Pe)||ge.type===37&&[2,3].includes(Re)&&[15,16,46].includes(ge.enumDefault2))},Ae=function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,d.includes)([29,51],Ie.type)&&Z().includes(["2","5","6"],(0,d.get)(Ie,"advancedSetting.showtype"))},Ne=function(Ie,ge){var Re=Ie.data,Pe=Re===void 0?{}:Re,ke=Ie.allControls,We=ke===void 0?[]:ke,Ve=Ie.isRecycle,it=Ie.from,Ge=Pe.dataSource,pt=Pe.sourceControlId,ot=Pe.type,vt=Pe.advancedSetting,At=vt===void 0?{}:vt,yt=Pe.strDefault,st=yt===void 0?"":yt,St=Pe.enumDefault,Qe=Pe.globalSheetInfo,Xe=Qe===void 0?{}:Qe;if(Ve)return Z().includes(["base"],ge);switch(ge){case"base":return!0;case"option":return Z().includes(C.Bs,ot);case"style":return Z().includes(C.Ew,ot)||(0,d.includes)([29],ot)&&Z().includes(["2","5","6"],(0,d.get)(Pe,"advancedSetting.showtype"));case"highsetting":switch(ot){case 10:return!(Ge&&At.checktype!=="1");case 9:case 11:return!(Ge&&Z().includes(["1","2"],At.showtype));case 30:return st.split("")[0]==="0";case 37:var $e=(0,S.$v)(Ge),Ke=l(We,$e),Ue=Ke.relationControls,He=Ue===void 0?[]:Ue,ze=l(He,pt);return xe(Pe,ze);default:return Z().includes(C.pB,ot)}case"security":return C.E2.includes(ot)||ot===2&&St===2||ot===6&&At.showtype!=="2";case"relate":return it!=="subList"&&Xe.worksheetId!==Ge&&(ot===29||ot===34&&!Ge.includes("-")&&At.detailworksheettype!=="2");case"permission":return!0;case"mobile":return(Z().includes(C.kr,ot)||ot===14&&Z().get(safeParse(At.filetype||"{}"),"type")!=="0")&&it!=="subList"}},Me=function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ge=arguments[1],Re=arguments[2],Pe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return!((Z().includes([22,30,52],Ie.type)||Ae(Ie))&&ge===2||Re==="subList"&&ge===3||Pe&&Z().includes([2,3],ge))},Fe=function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ie.filter(function(ge){return!Z().includes(s.c_,ge.controlId)})},Be=function(){return _JSON$stringify(COMMON_DEFAULT_COUNTRY.find(function(Ie){return Ie.iso2===_.get(md,"global.Config.DefaultConfig.initialCountry")}))}},94914:(lt,Te,t)=>{"use strict";t.d(Te,{$0:()=>q,$v:()=>s,FE:()=>N,FW:()=>ie,Oh:()=>c,RL:()=>B,VL:()=>z,Wm:()=>ee,Wz:()=>C,YC:()=>w,aq:()=>V,eO:()=>h,fu:()=>x,jw:()=>E,kV:()=>I,m:()=>j,rF:()=>S,uk:()=>A,v6:()=>n,yS:()=>O});var ce=t(12424),g=t(63239),p=t.n(g),L=t(85315),te=t(88239),R=t(7145),y=t.n(R),a=t(96486),r=t.n(a),o=t(68289),d=t.n(o);if(!/^(1887|7596|7798)$/.test(t.j))var Z=t(26637);if(!/^(1887|7596|7798)$/.test(t.j))var H=t(91247);if(!/^(1887|7596|7798)$/.test(t.j))var U=t(28101);if(!/^(1887|7596|7798)$/.test(t.j))var f=t(1694);var V=function(i,m){var v=(0,a.get)(i,["advancedSetting"])||{};if(!m)return v;var W=(0,a.get)(v,m);try{return JSON.parse(W)}catch(P){return""}},C=function(i,m){return(0,te.default)({},i,{advancedSetting:y()(i.advancedSetting||{},{$apply:function(W){return(0,te.default)({},W,m)}})})},O=function(i,m){var v=V(i),W=v.controlssorts,P=W===void 0?"[]":W,u=m.map(function(T){return T.controlId});try{var l=JSON.parse(P);return r().isEmpty(l)?u:l}catch(T){return u}},n=function(i){if(i.length<=3)return i.map(function(v){var W=v.controlId;return W});var m=r().findIndex(i,function(v){return v.attribute===1});return m<=3?i.slice(0,4).map(function(v){var W=v.controlId;return W}):i.slice(0,3).concat(i[m]).map(function(v){var W=v.controlId;return W})},s=function(i){return!(0,a.isString)(i)||!i?"":(0,a.includes)(i,"$")?i.slice(1,-1):i},j=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],m=arguments[1];return i.filter(function(v){return v.type===30?m(v.sourceControlType):m(v.type)}).map(function(v){return(0,te.default)({},v,{type:v.type===30?v.sourceControlType:v.type})})},A=function(i){var m=i.from,v=i.type;return v===2&&m!=="subList"?[{key:"list",text:_l("\u8868\u683C\uFF08\u65E7\uFF09"),value:"2",disabled:!0}].concat((0,L.Z)(Z.Qs),[{key:"embed_list",text:_l("\u8868\u683C"),value:"5"},{key:"tab_list",text:_l("\u6807\u7B7E\u9875\u8868\u683C"),value:"6"}]):Z.Qs},S=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=i.config,v=m===void 0?"":m,W=i.value,P=i.index,u=v.split("");return y()(u,{$splice:[[P,1,W]]}).join("")},I=function(i){return i.type===29&&i.enumDefault===1},c=function(i,m){var v=(0,U.mP)(i,m.controlId),W=v.row;if(!W)return[];switch(W.length){case 1:return[3,4,6,8,9,12];case 2:return[3,4,6,8,9];case 3:return[4,6];default:return[]}},q=function(i){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=m.type,W=m.controlId,P=m.sourceControl;if(f.$D.includes(v))return!1;var u=(0,U.mP)(i,W),l=u.row;return l?v===30?!(0,U.vq)(P):!((0,U.vq)(m)||l.length===4):!1},b=function(i){var m=i.type,v=i.dataSource,W=i.sourceControlId;return m===30?!!W:m===31||includes([32,37],m)?!!v:!0},k=function(i,m){var v=m.controls,W=i.type,P=i.dataSource,u=i.enumDefault,l=i.sourceControlId,T=i.advancedSetting,G=T===void 0?{}:T,D=!0;if(W===30&&!l)return{text:_l("\u6CA1\u6709\u914D\u7F6E\u663E\u793A\u5B57\u6BB5"),isValid:!1};if(W===31){if(!P)return{text:_l("\u6CA1\u6709\u914D\u7F6E\u8BA1\u7B97\u63A7\u4EF6"),isValid:!1};var M=(P.match(/\$(\w+)\$/g)||[]).map(function(Ee){return Ee.replace(/\$/g,"")});if(!isEmpty(M)&&M.some(function(Ee){return isEmpty(getControlByControlId(v,Ee))}))return{text:_l("\u5B58\u5728\u5DF2\u5220\u9664\u7684\u5B57\u6BB5"),isValid:!1};if(u===1){var se=new Parser,ae=function(Y){return Y.replace(/\$(.+?)\$/g,function(){return" "+_.uniqueId()+" "}).replace(/,(?=\))/g,"")},ne=se.parse(ae(P));if(ne.error)return{text:_l("\u81EA\u5B9A\u4E49\u516C\u5F0F\u6709\u8BED\u6CD5\u9519\u8BEF"),isValid:!1}}}if(includes([32,37],W)&&!P)return{text:_l("\u6CA1\u6709\u914D\u7F6E\u5B57\u6BB5"),isValid:!1};if(W===43){var de=V(i,"ocrmap")||[];if(de.length<1&&G.ocrapitype!=="1")return{isValid:!1,text:_l("\u6CA1\u6709\u914D\u7F6E\u6620\u5C04\u5B57\u6BB5")}}if(W===47){var Ce=i.enumDefault,he=i.enumDefault2,fe=i.dataSource;if((Ce===1||he===3)&&!fe||Ce===2&&he===0)return{isValid:!1,text:_l("\u6CA1\u6709\u914D\u7F6E\u6570\u636E\u6E90")}}if(includes([49,50],W)){if(!P)return{isValid:!1,text:_l("\u6CA1\u6709\u9009\u62E9\u67E5\u8BE2\u6A21\u7248")};if(W===50&&(!G.itemsource||!G.itemtitle))return{isValid:!1,text:_l("\u6709\u5FC5\u586B\u9879\u672A\u914D\u7F6E")}}return W===6&&G.showtype==="3"&&!G.numinterval?{isValid:!1,text:_l("\u672A\u914D\u7F6E\u6B65\u957F")}:{isValid:D}},ee=function(i){var m=[2,9,10,11,15,16,19,23,24,46];return m.includes(i.type)},re=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,v=i.filter(function(W){return!NO_CONTENT_CONTROL.includes(W.type)})||[];return v.length+m>MAX_CONTROLS_COUNT?(alert(_l("\u8868\u5355\u4E2D\u6DFB\u52A0\u5B57\u6BB5\u6570\u91CF\u5DF2\u8FBE\u4E0A\u9650\uFF08%0\u4E2A)",MAX_CONTROLS_COUNT),3),!0):!1},ie=function(i){return(i.options||[]).filter(function(m){return!m.isDeleted})},le=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],v=i.filter(function(W){return!_.includes([51],W.type)}).concat(SYSTEM_CONTROLS).map(function(W){return W.controlId});return m.map(function(W){return v.includes(W)?W:""}).filter(function(W){return!isEmpty(W)})},E=function(){return[{key:(0,H.Z)(),value:_l("\u9009\u98791"),isDeleted:!1,index:1,checked:!0,color:"#C9E6FC"},{key:(0,H.Z)(),value:_l("\u9009\u98792"),isDeleted:!1,index:2,checked:!1,color:"#C3F2F2"},{key:(0,H.Z)(),value:_l("\u9009\u98793"),isDeleted:!1,index:3,checked:!1,color:"#00C345"}]},w=function(i){return(0,a.isEmpty)(i)?"":p()([(0,a.head)(i).key])},K=function(){var i=E();return{options:i,default:w(i)}},N=function(i){if((0,a.isArray)(i))return i;try{return i&&typeof i=="string"?JSON.parse(i):[]}catch(m){return[]}},F=function(i,m){var v=O(i,m);return v.map(function(W){return find(m,function(P){return P.controlId===W})})},h=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=V(i,"showtype");switch(m){case 1:return{mode:"datetime",formatMode:"YYYY-MM-DD HH:mm"};case 2:return{mode:"datetime",formatMode:"YYYY-MM-DD HH",showMinute:!1};case 3:return{mode:"date",formatMode:"YYYY-MM-DD"};case 4:return{mode:"month",formatMode:"YYYY-MM"};case 5:return{mode:"year",formatMode:"YYYY"};case 6:return{mode:"datetime",formatMode:"YYYY-MM-DD HH:mm:ss",showSecond:!0};case 8:return{mode:"time",formatMode:"HH:mm",showSecond:!0};case 9:return{mode:"time",formatMode:"HH:mm:ss",showSecond:!0};default:return i.type===16?{mode:"datetime",formatMode:"YYYY-MM-DD HH:mm"}:{mode:"date",formatMode:"YYYY-MM-DD"}}},z=function(i){var m=h(i),v=m.formatMode,W=m.mode,P=i.advancedSetting;P=P===void 0?{}:P;var u=P.showformat,l=u===void 0?"0":u,T=r().isNaN(Number(l))?l:r().get(r().find(Z.hn,function(G){return G.value===l}),"format");return W==="year"?l==="1"?_l("YYYY\u5E74"):v:W==="month"?l==="1"?_l("YYYY\u5E74M\u6708"):r().includes(["2","3"],l)?"M/YYYY":l==="4"?"YYYY/M":v:v.replace("YYYY-MM-DD",T)},X=function(i,m){var v=100,W=ie(i),P=m==="public"?(document.querySelector(".publicWorksheetForm .rowsWrap")||{}).clientWidth:(document.querySelector("#widgetDisplayWrap .rowsWrap")||{}).clientWidth,u=i.size/12,l=V(i),T=l.direction,G=T===void 0?"2":T,D=l.width,M=D===void 0?"200":D;if(P&&G==="0"){var se=(P-16)*u,ae=se-14*2,ne=Math.floor(ae/Number(M))||1;v=100/(ne>W.length?W.length:ne)}return v},B=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"0000",m=i.split(""),v=(0,ce.Z)(m,4),W=v[0],P=v[1],u=v[2],l=v[3],T="";return Number(W)&&(T=T+"font-weight: bold !important;"),Number(P)&&(T=T+"font-style: italic;padding-right:3px;"),Number(u)&&(T=T+"text-decoration: underline;"),Number(l)&&(T=T+"text-decoration: line-through;"),Number(u)&&Number(l)&&(T=T+"text-decoration: underline line-through;"),T},x=function(i){return r().includes([2,3,4,5,7],i.type)||i.type===29&&i.enumDefault===1||i.type===26&&i.enumDefault===0}},28101:(lt,Te,t)=>{"use strict";t.d(Te,{_T:()=>C,eq:()=>d,mP:()=>V,vq:()=>f});var ce=t(88106),g=t(12424),p=t(88239),L=t(96486),te=t.n(L),R=t(7145),y=t.n(R);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(65710);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(1694);if(!/^(1887|7596|7798)$/.test(t.j))var o=t(62232);var d=function(n){return n.reduce(function(s,j){return s+j.size},0)},Z=function(n,s){if(!n&&isEmpty(n))return!0;var j=d(n);return j+s.size<=WHOLE_SIZE},H=function(n,s,j){return n.map(function(A){return A.map(function(S){return S.controlId===s?_extends({},S,j):S})})},U=function(n,s){for(var j=0;j<n.length;j++)for(var A=n[j],S=0;S<A.length;S++){var I=n[j][S];if(I.controlId===s)return[j,S]}return[]},f=function O(n){if(!n)return!1;var s=n.type,j=n.sourceControl;return r.ML.includes(s)||(0,o.YU)(n)?!0:s===30?O(j):!1},V=function(n,s){var j=U(n,s),A=(0,g.Z)(j,1),S=A[0];return{row:n[S],rowIndex:S}},C=function(n,s){var j=s.controlId,A=s.size,S=V(n,j),I=S.rowIndex,c=S.row;switch(c.length){case 1:return y()(n,(0,ce.default)({},I,{$apply:function(b){return b.map(function(k){return(0,p.default)({},k,{size:A})})}}));case 2:case 3:return y()(n,(0,ce.default)({},I,{$apply:function(b){return b.map(function(k){return k.controlId===j?(0,p.default)({},k,{size:A}):(0,p.default)({},k,{size:(a.Bi-A)/(b.length-1)})})}}));default:return n}}},35369:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>y});var ce=t(12424),g=t(86735),p=t(67294),L=t(71893),te=(0,g.Z)([`
  max-height: 18px;
  i {
    font-size: 18px;
    margin-left: 3px;
    // &:first-child {
    //   margin-left: `,`;
    // }
    &.title {
      color: #2196f3;
    }
  }
`],[`
  max-height: 18px;
  i {
    font-size: 18px;
    margin-left: 3px;
    // &:first-child {
    //   margin-left: `,`;
    // }
    &.title {
      color: #2196f3;
    }
  }
`]),R=L.ZP.div(te,function(a){return a.showTitle?"3px":"0px"});function y(a){var r=a.data,o=a.showTitle,d=a.style,Z=r.fieldPermission;Z=Z||"111";var H=Z.split(""),U=(0,ce.Z)(H,3),f=U[0],V=U[1],C=U[2];return p.createElement(R,{showTitle:o,style:d},r.attribute===1&&p.createElement("i",{className:"title icon-ic_title"}),[f,C].some(function(O){return O==="0"})&&p.createElement("i",{className:"icon-visibility_off",style:{color:f==="0"?"#9e9e9e":"#ffa340"}}))}},57015:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>q});var ce=t(52945),g=t(63239),p=t(67272),L=t(88239),te=t(88106),R=t(12424),y=t(86735),a=t(24043),r=t.n(a),o=t(5095),d=t(68469),Z=t(67294),H=t(73935),U=t(93967),f=t(71893),V=t(53364),C=t.n(V),O=t(96486),n=(0,y.Z)([`
  .title {
    display: flex;
    align-items: center;
    .icon {
      font-size: 18px;
      color: #757575;
    }
    > span {
      margin-left: 8px;
      font-size: 15px;
      font-weight: 700;
    }
  }
`],[`
  .title {
    display: flex;
    align-items: center;
    .icon {
      font-size: 18px;
      color: #757575;
    }
    > span {
      margin-left: 8px;
      font-size: 15px;
      font-weight: 700;
    }
  }
`]),s=(0,y.Z)([`
  position: absolute;
  background: #fff;
  top: 0;
  left: 0;
  width: 100%;
  padding: 17px 20px;
  bottom: 0;
  z-index: 9;
  overflow: auto;
  overflow-x: hidden;
`],[`
  position: absolute;
  background: #fff;
  top: 0;
  left: 0;
  width: 100%;
  padding: 17px 20px;
  bottom: 0;
  z-index: 9;
  overflow: auto;
  overflow-x: hidden;
`]),j=(0,y.Z)([`
  .itemBox {
    width: 18px;
    height: 18px;
    box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.16);
    `,`
    opacity: 1;
    border-radius: 2px;
    margin-right: 10px;
  }
`],[`
  .itemBox {
    width: 18px;
    height: 18px;
    box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.16);
    `,`
    opacity: 1;
    border-radius: 2px;
    margin-right: 10px;
  }
`]),A=d.Z.Panel,S=[{value:"0",text:_l("\u586B\u6EE1")},{value:"1",text:_l("\u5B8C\u6574\u663E\u793A")}],I=[{value:"1",text:_l("\u6EDA\u52A8\u64AD\u653E")},{value:"2",text:_l("\u6DE1\u5165\u6DE1\u51FA")}],c=[{value:"1",text:_l("\u5E95\u90E8")},{value:"2",text:_l("\u9876\u90E8")}],q=[{value:"3",text:_l("\u9ED1\u8272"),color:"#333333"},{value:"1",text:_l("\u767D\u8272"),color:"#ffffff"},{value:"2",text:_l("\u7070\u8272"),color:"#F5F5F5"},{value:"4",text:_l("\u6A21\u7CCA\u56FE\u7247"),img:C()}],b=r()({length:11}).map(function(N,F){return{value:""+F,text:F?_l("%0\u79D2",F):_l("\u5173\u95ED")}}),k=[{title:_l("PC\u7AEF"),displayKey:"titlelayout_pc",widthKey:"titlewidth_pc",alignKey:"align_pc",maxWidth:300},{title:_l("\u79FB\u52A8Web\u7AEF"),displayKey:"titlelayout_app",widthKey:"titlewidth_app",alignKey:"align_app",maxWidth:200}],ee=[{value:"1",text:_l("\u9876\u90E8\u5BF9\u9F50")}],re=[{value:"1",text:_l("\u5DE6\u5BF9\u9F50")},{value:"2",text:_l("\u53F3\u5BF9\u9F50")}],ie=f.ZP.div(n),le=f.ZP.div(s),E=f.ZP.div(j,function(N){return N.backgroundColor?"background: "+N.backgroundColor:""});function w(N){var F=N.allControls,h=F===void 0?[]:F,z=N.styleInfo;z=z===void 0?{}:z;var X=z.info,B=X===void 0?{}:X,x=N.handleChange,Q=N.globalSheetInfo,i=Q===void 0?{}:Q,m=B.coverid,v=B.covertype,W=v===void 0?"0":v,P=B.covercolor,u=P===void 0?"3":P,l=B.coverheight,T=l===void 0?"600":l,G=B.animation,D=G===void 0?"1":G,M=B.autosecond,se=M===void 0?"3":M,ae=B.showicon,ne=ae===void 0?"1":ae,de=B.sectionstyle,Ce=de===void 0?"0":de,he=B.showthumbnail,fe=he===void 0?"1":he,Ee=B.tabposition,Y=Ee===void 0?"1":Ee,oe=B.deftabname,ve=oe===void 0?_l("\u8BE6\u60C5"):oe,ue=B.tabicon,pe=ue===void 0?"":ue,Se=useState(["columnCount","widgetTitle","splitStyle","tabStyle","formCover"]),ye=_slicedToArray(Se,2),J=ye[0],me=ye[1],be=useState({coverHeight:T,titlewidth_pc:B.titlewidth_pc||"80",titlewidth_app:B.titlewidth_app||"80"}),xe=_slicedToArray(be,2),Ae=xe[0],Ne=xe[1];useEffect(function(){Ne({coverHeight:T,titlewidth_pc:B.titlewidth_pc||"80",titlewidth_app:B.titlewidth_app||"80"})},[B]);var Me=h.filter(function(we){return we.type===14}).map(function(we){return{value:we.controlId,text:we.controlName}}),Fe=function(Ie){return React.createElement(E,{className:"flexCenter",backgroundColor:Ie.color},Ie.color?React.createElement("div",{className:"itemBox"}):React.createElement("img",{src:Ie.img,className:"itemBox"}),Ie.text)},Be=function(){var Ie=quickArrange(N),ge=Ie.ColumnHeader,Re=Ie.ColumnContent;return React.createElement(A,{header:React.createElement(ge,null),key:"columnCount"},React.createElement(Re,null))};return React.createElement(le,null,React.createElement(ie,null,React.createElement("div",{className:"title relative"},React.createElement("i",{className:"icon Font20 icon-style"}),React.createElement("span",null,_l("\u8868\u5355\u6837\u5F0F")))),React.createElement(SettingCollapseWrap,{bordered:!1,activeKey:J,expandIcon:function(Ie){var ge=Ie.isActive;return React.createElement(CaretRightOutlined,{rotate:ge?90:0})},onChange:function(Ie){me(Ie)}},Be(),React.createElement(A,{header:_l("\u5B57\u6BB5\u6807\u9898"),key:"widgetTitle"},k.map(function(we){return React.createElement(SettingItem,{className:"mTop0"},React.createElement("div",{className:"settingItemTitle"},we.title),React.createElement(AnimationWrap,{className:"mBottom16"},ee.map(function(Ie){return React.createElement("div",{className:cx("animaItem",{active:(B[we.displayKey]||"1")===Ie.value}),onClick:function(){var Re;x((Re={},_defineProperty(Re,we.displayKey,Ie.value),_defineProperty(Re,we.alignKey,""),Re))}},Ie.text)}),re.map(function(Ie){return React.createElement("div",{className:cx("animaItem",{active:B[we.alignKey]===Ie.value}),onClick:function(){var Re;x((Re={},_defineProperty(Re,we.alignKey,Ie.value),_defineProperty(Re,we.displayKey,"2"),Re))}},Ie.text)})),B[we.displayKey]==="2"&&React.createElement("div",{className:"flexCenter mBottom16"},React.createElement("div",{className:"flex mRight10"},React.createElement("div",{className:"settingItemTitle"},_l("\u6807\u9898\u5BBD\u5EA6")),React.createElement("div",{className:"labelWrap flexCenter"},React.createElement(InputValue,{className:"mRight12 Width110",type:2,value:(Ae[we.widthKey]||"").toString(),onChange:function(ge){Ne(_extends({},Ae,_defineProperty({},we.widthKey,ge)))},onBlur:function(ge){ge>we.maxWidth&&(ge=we.maxWidth),ge<40&&(ge=40),Ne(_extends({},Ae,_defineProperty({},we.widthKey,ge))),x(_defineProperty({},we.widthKey,ge))}}),React.createElement("span",null,"px")))))})),React.createElement(A,{header:_l("\u5206\u6BB5\u6837\u5F0F"),key:"splitStyle"},React.createElement(StyleSetting,{sectionstyle:Ce,onChange:function(Ie){return x({sectionstyle:Ie})}})),React.createElement(A,{header:_l("\u6807\u7B7E\u9875\u6837\u5F0F"),key:"tabStyle"},React.createElement(SettingItem,{className:"mTop0"},React.createElement("div",{className:"settingItemTitle"},_l("\u4F4D\u7F6E")),React.createElement(AnimationWrap,null,c.map(function(we){return React.createElement("div",{className:cx("animaItem",{active:Y===we.value}),onClick:function(){x({tabposition:we.value})}},we.text)}))),React.createElement(SettingItem,null,React.createElement("div",{className:"settingItemTitle"},_l("\u9ED8\u8BA4\u5206\u7EC4\u540D\u79F0")),React.createElement("div",{className:"Gray_9e mBottom8"},_l("\u6807\u7B7E\u9875\u4F4D\u7F6E\u5728\u9876\u90E8\u65F6\uFF0C\u9ED8\u8BA4\u5206\u7EC4\u663E\u793A\u4E3A\u7B2C\u4E00\u4E2A\u6807\u7B7E\u9875\uFF08\u79FB\u52A8\u7AEF\u59CB\u7EC8\u5728\u9876\u90E8\uFF09")),React.createElement(_Input,{value:ve,onChange:function(Ie){return x({deftabname:Ie.target.value.trim()})}}),React.createElement(SettingItem,null,React.createElement(SectionItem,null,React.createElement("div",{className:"label"},_l("\u56FE\u6807")),React.createElement(IconSetting,{type:52,icon:pe,iconColor:"#9e9e9e",projectId:i.projectId,handleClick:function(Ie){return x({tabicon:Ie?_JSON$stringify(Ie):""})}})))),React.createElement(SettingItem,null,React.createElement("div",{className:"settingItemTitle"},_l("\u5176\u4ED6")),React.createElement("div",{className:"labelWrap"},React.createElement(_Checkbox,{size:"small",checked:ne!=="1",onClick:function(Ie){return x({showicon:Ie?"1":"0"})}},React.createElement("span",null,_l("\u9690\u85CF\u6240\u6709\u6807\u7B7E\u9875\u56FE\u6807")))))),React.createElement(A,{header:_l("\u5C01\u9762"),key:"formCover"},React.createElement(Fragment,null,React.createElement("div",{className:"Gray_9e"},_l("\u5C06\u6240\u9009\u9644\u4EF6\u5B57\u6BB5\u4E2D\u7684\u56FE\u7247\u3001\u89C6\u9891\u4F5C\u4E3A\u8BB0\u5F55\u8BE6\u60C5\u5C01\u9762")),React.createElement(SettingItem,null,React.createElement("div",{className:"settingItemTitle"},_l("\u9644\u4EF6\u5B57\u6BB5")),React.createElement(_Dropdown,{border:!0,cancelAble:!0,data:Me,value:m,onChange:function(Ie){return x({coverid:Ie})}})),React.createElement(SettingItem,null,React.createElement("div",{className:"flexCenter"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"settingItemTitle"},_l("\u586B\u5145\u65B9\u5F0F")),React.createElement(_Dropdown,{border:!0,data:S,value:W,onChange:function(Ie){return x({covertype:Ie,covercolor:Ie==="0"?"":u||"3"})}})),W==="1"&&React.createElement("div",{className:"flex mLeft10"},React.createElement("div",{className:"settingItemTitle"},_l("\u80CC\u666F\u8272")),React.createElement(_Dropdown,{border:!0,renderTitle:function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ie.text},data:[q.map(function(we){return{text:Fe(we),value:we.value}})],value:u,onChange:function(Ie){return x({covercolor:Ie})}})))),React.createElement(SettingItem,null,React.createElement("div",{className:"settingItemTitle"},_l("\u9AD8\u5EA6")),React.createElement("div",{className:"labelWrap flexCenter"},React.createElement(InputValue,{className:"mRight12 Width110",type:2,value:(Ae.coverHeight||"").toString(),onChange:function(Ie){Ne(_extends({},Ae,{coverHeight:Ie}))},onBlur:function(Ie){Ie>1e3&&(Ie=1e3),Ie<100&&(Ie=100),Ne(_extends({},Ae,{coverHeight:Ie})),x({coverheight:Ie})}}),React.createElement("span",null,"px"))),React.createElement(SettingItem,null,React.createElement("div",{className:"flexCenter"},React.createElement("div",{className:"Width200 mRight10"},React.createElement("div",{className:"settingItemTitle"},_l("\u52A8\u753B\u6548\u679C")),React.createElement(AnimationWrap,null,I.map(function(we){return React.createElement("div",{className:cx("animaItem",{active:D===we.value}),onClick:function(){x({animation:we.value})}},we.text)}))),React.createElement("div",{className:"flex"},React.createElement("div",{className:"settingItemTitle"},_l("\u81EA\u52A8\u64AD\u653E")),React.createElement(_Dropdown,{border:!0,data:b,value:se,onChange:function(Ie){return x({autosecond:Ie})}})))),React.createElement(SettingItem,null,React.createElement(_Checkbox,{size:"small",checked:fe==="1",text:_l("\u663E\u793A\u7F29\u7565\u56FE"),onClick:function(Ie){return x({showthumbnail:Ie?"0":"1"})}}))))))}function K(N){var F=N.styleInfo;F=F===void 0?{}:F;var h=F.activeStatus,z=h===void 0?!1:h,X=F.info,B=X===void 0?{}:X,x=N.setStyleInfo,Q=x===void 0?function(){}:x,i=N.setActiveWidget,m=i===void 0?function(){}:i,v=N.setBatchActive,W=v===void 0?function(){}:v,P=function(l){Q({info:_Object$assign({},B,l)})};return React.createElement(Fragment,null,React.createElement("div",{className:cx("fieldRecycleBinText",{active:z}),onClick:function(){Q({activeStatus:!z}),m({}),W([])}},React.createElement(_Icon,{icon:"style"}),React.createElement("div",{className:"recycle"},_l("\u8868\u5355\u6837\u5F0F"))),z&&createPortal(React.createElement(w,_extends({},N,{handleChange:P})),document.getElementById("widgetConfigSettingWrap")))}},44339:(lt,Te,t)=>{"use strict";t.d(Te,{qC:()=>a,qD:()=>s,xS:()=>j,zj:()=>o});var ce=t(67294),g=t(50675),p=t(8913),L=t(82114),te=t(95590),R={CHANGE:"1",SHOW:"2",HIDE:"3",FOCUS:"4",BLUR:"5",CLICK:"6"},y=[{text:_l("\u503C\u6539\u53D8\u65F6"),value:R.CHANGE},{text:_l("\u663E\u793A\u65F6"),value:R.SHOW},{text:_l("\u9690\u85CF\u65F6"),value:R.HIDE},{text:_l("\u83B7\u53D6\u7126\u70B9\u65F6"),value:R.FOCUS},{text:_l("\u5931\u53BB\u7126\u70B9\u65F6"),value:R.BLUR}],a={CONTROL_VALUE:"1",SEARCH_WORKSHEET:"2",API:"3",CUSTOM_FUN:"4"},r=[{text:_l("\u6309\u5B57\u6BB5\u503C"),value:a.CONTROL_VALUE},{text:_l("\u6309\u67E5\u8BE2\u5DE5\u4F5C\u8868"),value:a.SEARCH_WORKSHEET},{text:_l("\u6309\u8C03\u7528\u5DF2\u96C6\u6210 API"),value:a.API},{text:_l("\u6309\u81EA\u5B9A\u4E49\u51FD\u6570"),value:a.CUSTOM_FUN}],o={SHOW:"1",HIDE:"2",EDIT:"3",READONLY:"4",SET_VALUE:"5",ERROR:"6",REFRESH_VALUE:"7",API:"8",MESSAGE:"9",VOICE:"10",LINK:"11",CREATE:"12"},d=[{text:_l("\u663E\u793A/\u9690\u85CF"),value:o.SHOW},{text:_l("\u8BBE\u7F6E\u53EA\u8BFB/\u53EF\u7F16\u8F91"),value:o.READONLY},{text:_l("\u8BBE\u7F6E\u5B57\u6BB5\u503C"),value:o.SET_VALUE},{text:_l("\u5237\u65B0\u5B57\u6BB5\u503C"),value:o.REFRESH_VALUE},{text:_l("\u63D0\u793A\u9519\u8BEF"),value:o.ERROR},{text:_l("\u8C03\u7528\u5DF2\u96C6\u6210 API"),value:o.API},{text:_l("\u63D0\u793A\u6D88\u606F"),value:o.MESSAGE},{text:_l("\u64AD\u653E\u58F0\u97F3"),value:o.VOICE},{text:_l("\u6253\u5F00\u94FE\u63A5"),value:o.LINK},{text:_l("\u521B\u5EFA\u65B0\u7EAA\u5F55"),value:o.CREATE}],Z=[{color:"#00c345",text:_l("\u5982\u679C"),bgColor:"#DBF0DC"},{color:"#ff9300",text:_l("\u5426\u5219\u5982\u679C"),bgColor:"#FFEBCD"},{color:"#f52222",text:_l("\u5426\u5219\u5982\u679C"),bgColor:"rgba(245, 34, 34, 0.6)"},{color:"#2196F3",text:_l("\u5426\u5219\u5982\u679C"),bgColor:"rgba(33, 150, 243, 0.6)"}],H=[{text:_l("\u4FEE\u6539\u6761\u4EF6\u63CF\u8FF0"),value:"edit",icon:"edit"},{text:_l("\u590D\u5236"),value:"copy",icon:"copy"},{text:_l("\u5220\u9664"),value:"delete",icon:"delete1"}],U=[{text:_l("\u6210\u529F"),value:"1",icon:ce.createElement(g.Z,{style:{color:"#00C345"}})},{text:_l("\u5931\u8D25"),value:"2",icon:ce.createElement(p.Z,{style:{color:"#F52222"}})},{text:_l("\u8B66\u544A"),value:"3",icon:ce.createElement(L.Z,{style:{color:"#FF9A00"}})},{text:_l("\u901A\u77E5"),value:"4",icon:ce.createElement(te.Z,{style:{color:"#2196F3"}})}],f=null,V=null,C=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=[R.SHOW,R.HIDE];return _.includes(f,I.type)&&c.push(R.CHANGE),(_.includes(V,I.type)||I.type===10&&_.get(I,"advancedSetting.checktype")==="1"||I.type===29&&_.get(I,"advancedSetting.showtype")==="3")&&c.push(R.FOCUS,R.BLUR),y.filter(function(q){return _.includes(c,q.value)})},O=function(I){if(!_.includes([R.CLICK],I)){var c=[o.LINK,o.CREATE];return d.filter(function(q){return!_.includes(c,q.value)})}return d},n=function(I){switch(I){case o.SHOW:return _l("\u663E\u793A");case o.HIDE:return _l("\u9690\u85CF");case o.EDIT:return _l("\u8BBE\u4E3A\u53EF\u7F16\u8F91");case o.READONLY:return _l("\u8BBE\u4E3A\u53EA\u8BFB");default:return _.get(_.find(d,function(c){return c.value===I}),"text")}},s=[{text:_l("\u67E5\u8BE2\u5230\u8BB0\u5F55"),value:0},{text:_l("\u4EC5\u67E5\u8BE2\u5230\u4E00\u6761\u8BB0\u5F55"),value:1},{text:_l("\u67E5\u8BE2\u5230\u591A\u6761\u8BB0\u5F55"),value:2},{text:_l("\u672A\u67E5\u8BE2\u5230\u8BB0\u5F55"),value:3}],j={AND:"1",OR:"2"},A=[{text:_l("\u4E14"),value:"1"},{text:_l("\u6216"),value:"2"}]},30604:(lt,Te,t)=>{"use strict";t.d(Te,{Bd:()=>r,ET:()=>d,Gz:()=>L,HI:()=>O,IQ:()=>i,KE:()=>p,L7:()=>ie,P5:()=>V,Rw:()=>c,TX:()=>I,TZ:()=>re,V1:()=>X,VB:()=>te,VR:()=>z,XI:()=>H,XO:()=>q,YW:()=>j,Z9:()=>B,ZW:()=>Z,cb:()=>f,dT:()=>y,ei:()=>Q,ek:()=>o,f1:()=>h,hm:()=>s,k:()=>E,lb:()=>b,nT:()=>w,rC:()=>a,sm:()=>x,tf:()=>n,tq:()=>k,vu:()=>K,xh:()=>U,yQ:()=>m,yX:()=>C,yk:()=>le,yo:()=>R});var ce=t(96486),g=t.n(ce),p=[2,3,4,5,6,7,8,9,10,11,15,16,19,23,24,25,26,27,28,31,32,33,35,36,40,46,48,50],L=[2,3,4,5,6,7,8,15,16,28],te=[5],R=[26,27],y=[6,8,28],a=[15,16],r=[15,16,46],o=[2,3,4,5,6,7,8,9,10,11,15,16,19,23,24,25,26,27,28,31,32,33,35,36,40,41,46,47,48,50],d=[19,23,24],Z=[26,27,48],H=[6,8,28],U=[36],f=[48,26],V=[3,5,15,16,26,27,46,48],C=[2,3,4,5,6,7,8,9,10,11,15,16,28,36,41,46],O=[34],n=[15,16,46],s=[2,3,4,5,6,7,8,9,10,11,15,16,19,23,24,28,46],j=[29,34],A=[{controlId:"ctime",controlName:_l("\u521B\u5EFA\u65F6\u95F4"),controlPermissions:"100",type:16,display:!0}],S=[{controlId:"caid",controlName:_l("\u521B\u5EFA\u4EBA"),type:26}],I={ctime:_l("\u521B\u5EFA\u65F6\u95F4"),caid:_l("\u521B\u5EFA\u4EBA"),utime:_l("\u6700\u8FD1\u4FEE\u6539\u65F6\u95F4"),ownerid:_l("\u62E5\u6709\u8005"),rowid:_l("\u8BB0\u5F55ID"),uaid:_l("\u6700\u8FD1\u4FEE\u6539\u4EBA"),wfname:_l("\u6D41\u7A0B\u540D\u79F0"),wfcuaids:_l("\u8282\u70B9\u8D1F\u8D23\u4EBA"),wfcaid:_l("\u53D1\u8D77\u4EBA"),wfctime:_l("\u53D1\u8D77\u65F6\u95F4"),wfrtime:_l("\u8282\u70B9\u5F00\u59CB\u65F6\u95F4"),wfftime:_l("\u5269\u4F59\u65F6\u95F4"),wfstatus:_l("\u72B6\u6001")},c=/\$((\w{8}(-\w{4}){3}-\w{12})|(\w{24}|caid|ownerid|utime|ctime|userId|phone|email|projectId|appId|groupId|worksheetId|viewId|recordId|ua|timestamp|search-keyword|ocr-file|ocr-file-url|user-self|current-time|wfname|wfcuaids|wfcaid|wfctime|wfrtime|wfftime|wfstatus|rowid|uaid)?)(~((\w{8}(-\w{4}){3}-\w{12})|(\w{24}|caid|ownerid|utime|ctime|userId|phone|email|projectId|appId|groupId|worksheetId|viewId|recordId|ua|timestamp|search-keyword|ocr-file|ocr-file-url|user-self|current-time|wfname|wfcuaids|wfcaid|wfctime|wfrtime|wfftime|wfstatus|rowid|uaid)?))?\$/g,q=[{value:"2",id:"current",text:_l("\u6B64\u523B"),key:"date",icon:"icon-event"}],b=[{value:"2",id:"current",text:_l("\u6B64\u523B"),key:"date",icon:"icon-event"}],k=[{value:"2",id:"current",text:_l("\u6B64\u523B"),key:"time",icon:"icon-access_time"}],ee=[{icon:"icon-account_circle",key:"user",id:"user-self",text:_l("\u5F53\u524D\u7528\u6237")}],re=[{id:"user-self",text:_l("\u5F53\u524D\u7528\u6237\u59D3\u540D"),key:"waterMask",icon:"icon-account_circle"},{id:"current-time",text:_l("\u5F53\u524D\u65E5\u671F"),key:"waterMask",icon:"icon-access_time"}],ie=[{icon:"icon-search",key:"keyword",id:"search-keyword",text:_l("\u641C\u7D22\u5185\u5BB9")}],le=[{key:"ocr",id:"ocr-file",text:_l("\u8BC6\u522B\u6587\u4EF6")}],E=[{key:"ocr",id:"ocr-file-url",text:_l("\u8BC6\u522B\u6587\u4EF6(url)")}],w=[{id:"0",text:_l("\u4E0D\u9009\u4E2D")},{id:"1",text:_l("\u9009\u4E2D")}],K={1:"text",2:"text",3:"phone",4:"phone",5:"email",6:"number",7:"cred",8:"number",9:"option",10:"option",11:"option",14:"attachment",15:"date",16:"date",19:"area",23:"area",24:"area",26:"user",27:"department",28:"score",29:"relateSheet",34:"subList",35:"cascader",36:"switch",41:"richtext",46:"time",48:"role",10000007:"array",10000008:"array_object"},N={number:/^-?\d*(\.\d*)?/},F={number:function(W){return g().head(N.number.exec(W))}},h=[{icon:"icon-workflow_other",text:_l("\u5176\u4ED6\u5B57\u6BB5\u503C"),key:1},{icon:"icon-lookup",text:_l("\u67E5\u8BE2\u5DE5\u4F5C\u8868"),key:2},{icon:"icon-formula",text:_l("\u51FD\u6570\u8BA1\u7B97"),key:3}],z={FIELD:1,SEARCH:2,FX:3,DEPT:"dept",USER:"user",DATE:"date",TIME:"time",ROLE:"role",KEYWORD:"keyword",OCR:"ocr",WATER_MASK:"waterMask"},X={3:ee,5:ee,15:b,16:q,26:ee,27:[{icon:"icon-department",key:"dept",id:"user-departments",text:_l("\u5F53\u524D\u7528\u6237\u6240\u5728\u90E8\u95E8")}],46:k,48:[{icon:"icon-group",key:"role",id:"user-role",text:_l("\u5F53\u524D\u7528\u6237\u7684\u7EC4\u7EC7\u89D2\u8272")}],2:ie,6:ie},B={0:"dynamiccustom",1:"defaultfunc",2:"dynamicsrc"},x=[{text:_l("\u7528\u6237ID"),id:"userId"},{text:_l("\u624B\u673A\u53F7"),id:"phone"},{text:_l("\u90AE\u7BB1"),id:"email"}],Q=[{text:_l("\u7EC4\u7EC7\u95E8\u724C\u53F7"),id:"projectId"},{text:_l("\u5E94\u7528ID"),id:"appId"},{text:_l("\u5206\u7EC4ID"),id:"groupId"},{text:_l("\u5DE5\u4F5C\u8868ID"),id:"worksheetId"},{text:_l("\u89C6\u56FEID"),id:"viewId"},{text:_l("\u8BB0\u5F55ID"),id:"recordId"},{text:_l("UserAgent"),id:"ua"},{text:_l("\u65F6\u95F4\u6233"),id:"timestamp"}],i=[{name:_l("\u5F53\u524D\u7528\u6237\u4FE1\u606F"),list:x},{name:_l("\u7CFB\u7EDF\u4FE1\u606F"),list:Q}],m={CREATE_CUSTOM:1,SEARCH_PARAMS:2,OCR_PARAMS:3,WATER_MASK:4}},10897:(lt,Te,t)=>{"use strict";t.d(Te,{AA:()=>A,FC:()=>j,GC:()=>s,Q$:()=>V,WA:()=>U,bK:()=>n,ti:()=>f,yI:()=>O,yx:()=>C});var ce=t(86735),g=t(71893),p=(0,ce.Z)([`
  display: flex;
  align-items: center;
`],[`
  display: flex;
  align-items: center;
`]),L=(0,ce.Z)([`
  position: relative;
  .tagTextAreaWrap {
    width: calc(100% - 36px);
  }
  .customTreeSelect,
  .customCascader {
    z-index: -1;
    width: 100% !important;
    position: absolute;
    left: 0;
  }
  .CodeMirror-code {
    line-height: 28px;
  }
  .CodeMirror-placeholder {
    color: #ccc !important;
    font-size: 14px !important;
    line-height: 27px !important;
    margin-left: 3px !important;
  }
  .richInputText {
    width: calc(100% - 36px);
    border-radius: 3px 0 0 3px !important;
    border: 1px solid #dddddd;
    &.editorNull {
      padding: 0px !important;
    }
    .ck-content {
      padding: 0 12px !important;
    }
  }
  .tagInputarea {
    .tagInputareaIuput {
      border-radius: 3px 0 0 3px;
      min-height: 36px;
      .CodeMirror {
        .CodeMirror-lines {
          padding: 3px 0;
        }
        .CodeMirror-sizer {
          min-height: auto !important;
        }
      }
    }
  }
  .otherFieldWrap {
    box-sizing: border-box;
    width: calc(100% - 36px);
    padding: 5px 8px;
    min-height: 36px;
    line-height: 32px;
    font-size: 14px;
    word-break: break-all;
    border: 1px solid #ccc;
    border-radius: 3px 0 0 3px;
  }
  .dynamicCityContainer {
    width: calc(100% - 36px);
    position: relative;
    &:hover {
      .clearOp {
        display: block;
      }
      input {
        background: `,`;
      }
    }
    .clearOp {
      position: absolute;
      right: 12px;
      display: none;
      height: 26px;
      margin-top: 8px;
      color: #9d9d9d;
    }
    .CityPicker-wrapper {
      display: flex;
    }
    .CityPicker-input-container {
      width: 100%;
    }
    input {
      width: 100%;
      height: 36px;
      line-height: 34px;
      padding: 0 12px;
      border: 1px solid #ccc !important;
      border-radius: 3px 0 0 3px;
      box-sizing: border-box;
      cursor: pointer;
    }
  }
  & > div:nth-child(3) {
    `,`
    .rc-trigger-popup {
      `,`
    }
  }
`],[`
  position: relative;
  .tagTextAreaWrap {
    width: calc(100% - 36px);
  }
  .customTreeSelect,
  .customCascader {
    z-index: -1;
    width: 100% !important;
    position: absolute;
    left: 0;
  }
  .CodeMirror-code {
    line-height: 28px;
  }
  .CodeMirror-placeholder {
    color: #ccc !important;
    font-size: 14px !important;
    line-height: 27px !important;
    margin-left: 3px !important;
  }
  .richInputText {
    width: calc(100% - 36px);
    border-radius: 3px 0 0 3px !important;
    border: 1px solid #dddddd;
    &.editorNull {
      padding: 0px !important;
    }
    .ck-content {
      padding: 0 12px !important;
    }
  }
  .tagInputarea {
    .tagInputareaIuput {
      border-radius: 3px 0 0 3px;
      min-height: 36px;
      .CodeMirror {
        .CodeMirror-lines {
          padding: 3px 0;
        }
        .CodeMirror-sizer {
          min-height: auto !important;
        }
      }
    }
  }
  .otherFieldWrap {
    box-sizing: border-box;
    width: calc(100% - 36px);
    padding: 5px 8px;
    min-height: 36px;
    line-height: 32px;
    font-size: 14px;
    word-break: break-all;
    border: 1px solid #ccc;
    border-radius: 3px 0 0 3px;
  }
  .dynamicCityContainer {
    width: calc(100% - 36px);
    position: relative;
    &:hover {
      .clearOp {
        display: block;
      }
      input {
        background: `,`;
      }
    }
    .clearOp {
      position: absolute;
      right: 12px;
      display: none;
      height: 26px;
      margin-top: 8px;
      color: #9d9d9d;
    }
    .CityPicker-wrapper {
      display: flex;
    }
    .CityPicker-input-container {
      width: 100%;
    }
    input {
      width: 100%;
      height: 36px;
      line-height: 34px;
      padding: 0 12px;
      border: 1px solid #ccc !important;
      border-radius: 3px 0 0 3px;
      box-sizing: border-box;
      cursor: pointer;
    }
  }
  & > div:nth-child(3) {
    `,`
    .rc-trigger-popup {
      `,`
    }
  }
`]),te=(0,ce.Z)([`
  margin-right: 6px;
  border-radius: 16px;
  background: #d8eeff;
  color: #174c76;
  border: 1px solid #bbd6ea;
  padding: 0 12px;
  font-size: 12px;
  box-sizing: border-box;
  height: 24px;
  margin-top: 5px;
  max-width: 100%;
  &.timeField {
    margin: 0 6px 0 12px;
  }
  &.haveCloseIcon {
    padding: 0 6px 0 12px;
  }
  &.deleted {
    background-color: #eaeaea;
    color: #9e9e9e;
    border: #ddd;
  }
  /* \u6587\u672C\u9ED8\u8BA4\u503C\u6807\u7B7E\u6837\u5F0F */
  &.tagTextField {
    margin: 0;
  }
  .recordName {
    margin: 0 6px;
    color: #789dba;
  }
  &:hover {
    i {
      color: rgba(51, 51, 51, 0.4);
    }
  }
  i {
    margin-left: 6px;
    color: rgba(51, 51, 51, 0.2);
  }
  &.isGreenTag {
    background: #d8f2d9;
    border-color: #9dd59f;
    color: #307433;
    .searchIcon {
      margin-left: 0px;
      margin-right: 6px;
      color: #307433;
    }
  }
`],[`
  margin-right: 6px;
  border-radius: 16px;
  background: #d8eeff;
  color: #174c76;
  border: 1px solid #bbd6ea;
  padding: 0 12px;
  font-size: 12px;
  box-sizing: border-box;
  height: 24px;
  margin-top: 5px;
  max-width: 100%;
  &.timeField {
    margin: 0 6px 0 12px;
  }
  &.haveCloseIcon {
    padding: 0 6px 0 12px;
  }
  &.deleted {
    background-color: #eaeaea;
    color: #9e9e9e;
    border: #ddd;
  }
  /* \u6587\u672C\u9ED8\u8BA4\u503C\u6807\u7B7E\u6837\u5F0F */
  &.tagTextField {
    margin: 0;
  }
  .recordName {
    margin: 0 6px;
    color: #789dba;
  }
  &:hover {
    i {
      color: rgba(51, 51, 51, 0.4);
    }
  }
  i {
    margin-left: 6px;
    color: rgba(51, 51, 51, 0.2);
  }
  &.isGreenTag {
    background: #d8f2d9;
    border-color: #9dd59f;
    color: #307433;
    .searchIcon {
      margin-left: 0px;
      margin-right: 6px;
      color: #307433;
    }
  }
`]),R=(0,ce.Z)([`
  position: absolute;
  box-sizing: border-box;
  right: 0;
  top: 0;
  width: 36px;
  height: 36px;
  border: 1px solid #ccc;
  border-left: none;
  border-radius: 0 3px 3px 0;
  cursor: pointer;
  justify-content: center;
  transition: all 0.25s;
  color: #bdbdbd;
  &:hover {
    color: #2196f3;
  }
  i {
    font-size: 22px;
    color: #9e9e9e;
  }
`],[`
  position: absolute;
  box-sizing: border-box;
  right: 0;
  top: 0;
  width: 36px;
  height: 36px;
  border: 1px solid #ccc;
  border-left: none;
  border-radius: 0 3px 3px 0;
  cursor: pointer;
  justify-content: center;
  transition: all 0.25s;
  color: #bdbdbd;
  &:hover {
    color: #2196f3;
  }
  i {
    font-size: 22px;
    color: #9e9e9e;
  }
`]),y=(0,ce.Z)([`
  border-radius: 24px;
  background-color: #e5e5e5;
  padding-right: 8px;
  font-size: 13px;
  line-height: 24px;
  margin: 5px 6px 0 0;
  .departWrap {
    width: 24px;
    height: 24px;
    text-align: center;
    color: #fff;
    border-radius: 12px;
    background-color: #aaa;
  }
  .name {
    margin: 0 5px;
  }
  .avatar {
    width: 24px;
    border-radius: 50%;
  }
  .remove {
    cursor: pointer;
    .icon-close {
      color: #bdbdbd;
      &:hover {
        color: #9e9e9e;
      }
    }
  }
`],[`
  border-radius: 24px;
  background-color: #e5e5e5;
  padding-right: 8px;
  font-size: 13px;
  line-height: 24px;
  margin: 5px 6px 0 0;
  .departWrap {
    width: 24px;
    height: 24px;
    text-align: center;
    color: #fff;
    border-radius: 12px;
    background-color: #aaa;
  }
  .name {
    margin: 0 5px;
  }
  .avatar {
    width: 24px;
    border-radius: 50%;
  }
  .remove {
    cursor: pointer;
    .icon-close {
      color: #bdbdbd;
      &:hover {
        color: #9e9e9e;
      }
    }
  }
`]),a=(0,ce.Z)([`
  flex-wrap: wrap;
  width: `,`;
  box-sizing: border-box;
  padding: 0 6px 5px 12px;
  min-height: 36px;
  line-height: 32px;
  font-size: 14px;
  word-break: break-all;
  border: 1px solid #ccc;
  border-radius: 3px 0 0 3px;
  cursor: pointer;
  background: `,`;
  position: relative;
  .clearOp {
    position: absolute;
    right: 12px;
    display: none;
    height: 26px;
    margin-top: 3px;
    color: #9d9d9d;
  }
  &:hover {
    .clearOp {
      display: block;
    }
    background: `,`;
  }
`],[`
  flex-wrap: wrap;
  width: `,`;
  box-sizing: border-box;
  padding: 0 6px 5px 12px;
  min-height: 36px;
  line-height: 32px;
  font-size: 14px;
  word-break: break-all;
  border: 1px solid #ccc;
  border-radius: 3px 0 0 3px;
  cursor: pointer;
  background: `,`;
  position: relative;
  .clearOp {
    position: absolute;
    right: 12px;
    display: none;
    height: 26px;
    margin-top: 3px;
    color: #9d9d9d;
  }
  &:hover {
    .clearOp {
      display: block;
    }
    background: `,`;
  }
`]),r=(0,ce.Z)([`
  background: #f0f0f0;
  padding: 0 12px;
  height: 24px;
  border-radius: 12px;
  cursor: pointer;
  margin-top: 5px;
  margin-right: 8px;
  max-width: 100%;
  span {
    margin: 0 4px;
  }
`],[`
  background: #f0f0f0;
  padding: 0 12px;
  height: 24px;
  border-radius: 12px;
  cursor: pointer;
  margin-top: 5px;
  margin-right: 8px;
  max-width: 100%;
  span {
    margin: 0 4px;
  }
`]),o=(0,ce.Z)([`
  justify-content: space-between;
  cursor: pointer;
  border: 1px solid #ccc;
  border-radius: 3px 0 0 3px;
  width: calc(100% - 36px);
  padding: 0 12px;
  height: 36px;
  box-sizing: border-box;
  .error,
  .error .icon-formula {
    color: #f44336 !important;
  }
  .text {
    flex: 1;
    min-width: 0;
  }
  .text,
  .options {
    display: flex;
    align-items: center;
  }
  .edit {
    font-size: 15px;
    color: #9e9e9e;
  }
  .delete {
    font-size: 15px;
    color: #bdbdbd;
    display: none;
    margin-right: 10px;
  }
  &:hover {
    background-color: #fafafa;
    border: 1px solid #d8d8d8;
    .edit {
      color: #2196f3;
    }
    .delete {
      display: block;
    }
  }
`],[`
  justify-content: space-between;
  cursor: pointer;
  border: 1px solid #ccc;
  border-radius: 3px 0 0 3px;
  width: calc(100% - 36px);
  padding: 0 12px;
  height: 36px;
  box-sizing: border-box;
  .error,
  .error .icon-formula {
    color: #f44336 !important;
  }
  .text {
    flex: 1;
    min-width: 0;
  }
  .text,
  .options {
    display: flex;
    align-items: center;
  }
  .edit {
    font-size: 15px;
    color: #9e9e9e;
  }
  .delete {
    font-size: 15px;
    color: #bdbdbd;
    display: none;
    margin-right: 10px;
  }
  &:hover {
    background-color: #fafafa;
    border: 1px solid #d8d8d8;
    .edit {
      color: #2196f3;
    }
    .delete {
      display: block;
    }
  }
`]),d=(0,ce.Z)([`
  .addFilterCondition span {
    font-weight: 700 !important;
    .icon {
      font-size: 13px !important;
      margin-right: 0 !important;
      font-weight: 700 !important;
    }
  }
  .mappingItem {
    display: flex;
    align-items: center;
    height: 36px;
    margin-bottom: 12px;
    .mappingControlName {
      flex: 1;
      min-width: 0;
      line-height: 36px;
      background: #f4f4f4;
      border-radius: 3px;
      padding: 0 14px;
    }
    .mappingTitle {
      flex: 1;
      color: #757575;
      &:last-child {
        padding-left: 40px;
      }
    }
    .mapppingDropdown {
      flex: 1;
      min-width: 0;
    }
    & > span {
      flex-shrink: 0;
    }
  }
  .searchRecord {
    display: flex;
    align-items: center;
  }
  .settingWorksheetInput {
    border: 1px solid #ddd;
    border-radius: 3px;
    color: #bdbdbd;
    line-height: 34px;
    padding: 0 12px;
    background: #fff;
    display: flex;
    align-items: center;
    justify-content: space-between;
    cursor: pointer;
    .edit {
      font-size: 15px;
      color: #9e9e9e;
    }
    &.disabled {
      cursor: not-allowed;
      background: #f7f7f7;
      .edit {
        display: none;
      }
    }
  }
  .addFilterIcon span {
    color: #2196f3;
    display: inline-block;
    padding: 8px;
    font-weight: bold;
    &:hover {
      color: #1780d3;
      background: #f5f5f5;
      border-radius: 3px;
    }
  }
  .searchWorksheetFilter {
    & > div > div > div:last-child {
      margin: 0 !important;
      .addFilterCondition {
        i,
        span {
          color: #2196f3;
        }
        display: inline-block;
        padding: 8px;
        & > div > div {
          margin-right: 0 !important;
        }
        &:hover {
          i,
          span {
            color: #1780d3;
          }
          background: #f5f5f5;
          border-radius: 3px;
        }
      }
    }
  }
  .conditionRelationBox {
    display: none !important;
  }
  .conditionItem {
    margin-bottom: 12px !important;
  }
  .conditionItemForDynamicStyle {
    .conditionItemHeader {
      display: flex;
      align-items: center;
      padding-right: 0 !important;
      .deleteBtn {
        right: 0 !important;
      }
      .relation {
        .ming.Dropdown {
          background: transparent;
        }
        .ming.Dropdown .Dropdown--input {
          padding: 0 5px 0 12px;
        }
      }
    }
    .conditionItemContent {
      padding-right: 0 !important;
      display: flex;
      .deletedColumn {
        position: absolute;
      }
      .dynamicSource {
        width: 130px;
        border-color: #e0e0e0;
        height: 36px;
        border-radius: 4px;
        box-shadow: none !important;
        font-size: 13px;
        margin-right: 12px;
        .ant-select-arrow {
          margin-top: -8px !important;
        }
        .ant-select-selector {
          border-color: #e0e0e0;
          height: 36px;
          border-radius: 4px;
          box-shadow: none !important;
          .ant-select-selection-search-input {
            height: 34px;
          }
          .ant-select-selection-item {
            line-height: 34px;
          }
        }
      }
      .conditionValue {
        flex: 1;
        min-width: 0;
        .optionCheckbox {
          word-break: break-all;
          display: inline-block;
          line-height: 26px;
        }
      }
    }
    .worksheetFilterDateCondition {
      & > div {
        width: 100%;
        display: flex;
        align-items: center;
        .dateValue,
        .dateType,
        .customDate {
          flex: 1;
        }
        .dateValue,
        .customDate {
          margin-left: 10px;
          margin-top: 0 !important;
        }
        .dateValue {
          display: flex;
          align-items: center;
        }
        .dateInputCon .ming.Dropdown {
          height: 34px;
          background: none;
        }
      }
    }
    .worksheetFilterNumberCondition {
      .numberRange {
        & > div {
          flex: 1;
          min-width: 0;
          input {
            width: 100%;
          }
        }
      }
    }
  }
`],[`
  .addFilterCondition span {
    font-weight: 700 !important;
    .icon {
      font-size: 13px !important;
      margin-right: 0 !important;
      font-weight: 700 !important;
    }
  }
  .mappingItem {
    display: flex;
    align-items: center;
    height: 36px;
    margin-bottom: 12px;
    .mappingControlName {
      flex: 1;
      min-width: 0;
      line-height: 36px;
      background: #f4f4f4;
      border-radius: 3px;
      padding: 0 14px;
    }
    .mappingTitle {
      flex: 1;
      color: #757575;
      &:last-child {
        padding-left: 40px;
      }
    }
    .mapppingDropdown {
      flex: 1;
      min-width: 0;
    }
    & > span {
      flex-shrink: 0;
    }
  }
  .searchRecord {
    display: flex;
    align-items: center;
  }
  .settingWorksheetInput {
    border: 1px solid #ddd;
    border-radius: 3px;
    color: #bdbdbd;
    line-height: 34px;
    padding: 0 12px;
    background: #fff;
    display: flex;
    align-items: center;
    justify-content: space-between;
    cursor: pointer;
    .edit {
      font-size: 15px;
      color: #9e9e9e;
    }
    &.disabled {
      cursor: not-allowed;
      background: #f7f7f7;
      .edit {
        display: none;
      }
    }
  }
  .addFilterIcon span {
    color: #2196f3;
    display: inline-block;
    padding: 8px;
    font-weight: bold;
    &:hover {
      color: #1780d3;
      background: #f5f5f5;
      border-radius: 3px;
    }
  }
  .searchWorksheetFilter {
    & > div > div > div:last-child {
      margin: 0 !important;
      .addFilterCondition {
        i,
        span {
          color: #2196f3;
        }
        display: inline-block;
        padding: 8px;
        & > div > div {
          margin-right: 0 !important;
        }
        &:hover {
          i,
          span {
            color: #1780d3;
          }
          background: #f5f5f5;
          border-radius: 3px;
        }
      }
    }
  }
  .conditionRelationBox {
    display: none !important;
  }
  .conditionItem {
    margin-bottom: 12px !important;
  }
  .conditionItemForDynamicStyle {
    .conditionItemHeader {
      display: flex;
      align-items: center;
      padding-right: 0 !important;
      .deleteBtn {
        right: 0 !important;
      }
      .relation {
        .ming.Dropdown {
          background: transparent;
        }
        .ming.Dropdown .Dropdown--input {
          padding: 0 5px 0 12px;
        }
      }
    }
    .conditionItemContent {
      padding-right: 0 !important;
      display: flex;
      .deletedColumn {
        position: absolute;
      }
      .dynamicSource {
        width: 130px;
        border-color: #e0e0e0;
        height: 36px;
        border-radius: 4px;
        box-shadow: none !important;
        font-size: 13px;
        margin-right: 12px;
        .ant-select-arrow {
          margin-top: -8px !important;
        }
        .ant-select-selector {
          border-color: #e0e0e0;
          height: 36px;
          border-radius: 4px;
          box-shadow: none !important;
          .ant-select-selection-search-input {
            height: 34px;
          }
          .ant-select-selection-item {
            line-height: 34px;
          }
        }
      }
      .conditionValue {
        flex: 1;
        min-width: 0;
        .optionCheckbox {
          word-break: break-all;
          display: inline-block;
          line-height: 26px;
        }
      }
    }
    .worksheetFilterDateCondition {
      & > div {
        width: 100%;
        display: flex;
        align-items: center;
        .dateValue,
        .dateType,
        .customDate {
          flex: 1;
        }
        .dateValue,
        .customDate {
          margin-left: 10px;
          margin-top: 0 !important;
        }
        .dateValue {
          display: flex;
          align-items: center;
        }
        .dateInputCon .ming.Dropdown {
          height: 34px;
          background: none;
        }
      }
    }
    .worksheetFilterNumberCondition {
      .numberRange {
        & > div {
          flex: 1;
          min-width: 0;
          input {
            width: 100%;
          }
        }
      }
    }
  }
`]),Z=(0,ce.Z)([`
  border-radius: 3px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.13), 0 2px 6px rgba(0, 0, 0, 0.1);
  width: 100%;
  border: 1px solid #eee;
  background-color: #fff;
  .MenuBox {
    position: relative !important;
  }
  .ming.Menu {
    width: 100%;
    max-height: 300px;
    overflow-x: hidden;
    box-shadow: none !important;
    position: relative;
  }
  .otherWorksheet {
    width: 100%;
    line-height: 44px;
    padding: 6px 16px 0 16px;
    box-sizing: border-box;
    vertical-align: middle;
    height: 45px;
    border-top: 1px solid #eaeaea;
    background: #ffffff;
    cursor: pointer;
    position: relative;
    z-index: 11;
    &:hover {
      color: #fff !important;
      background-color: #1e88e5 !important;
    }
  }
`],[`
  border-radius: 3px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.13), 0 2px 6px rgba(0, 0, 0, 0.1);
  width: 100%;
  border: 1px solid #eee;
  background-color: #fff;
  .MenuBox {
    position: relative !important;
  }
  .ming.Menu {
    width: 100%;
    max-height: 300px;
    overflow-x: hidden;
    box-shadow: none !important;
    position: relative;
  }
  .otherWorksheet {
    width: 100%;
    line-height: 44px;
    padding: 6px 16px 0 16px;
    box-sizing: border-box;
    vertical-align: middle;
    height: 45px;
    border-top: 1px solid #eaeaea;
    background: #ffffff;
    cursor: pointer;
    position: relative;
    z-index: 11;
    &:hover {
      color: #fff !important;
      background-color: #1e88e5 !important;
    }
  }
`]),H=g.ZP.div(p),U=(0,g.ZP)(H)(L,function(S){return S.hasHoverBg?"#f5f5f5":"#fff"},function(S){return S.triggerStyle?"top: 100% !important":""},function(S){return S.triggerStyle?"top: 0px !important":""}),f=(0,g.ZP)(H)(te),V=(0,g.ZP)(H)(R),C=(0,g.ZP)(H)(y),O=(0,g.ZP)(H)(a,function(S){return S.totalWidth?"100%":"calc(100% - 36px)"},function(S){return S.isHaveUniqueField?"#f8f8f8":"#fff"},function(S){return S.isHaveClear?"#f5f5f5":"#fff"}),n=(0,g.ZP)(H)(r),s=(0,g.ZP)(H)(o),j=g.ZP.div(d),A=g.ZP.div(Z)},87600:(lt,Te,t)=>{"use strict";t.d(Te,{CZ:()=>q,Ih:()=>f,Ly:()=>N,MX:()=>re,Pz:()=>ie,Q9:()=>w,Tz:()=>E,YF:()=>H,dJ:()=>le,gU:()=>k,p1:()=>c,u9:()=>U,wA:()=>ee,wS:()=>d});var ce=t(12424),g=t(88106),p=t(63239),L=t.n(p),te=t(88239),R=t(30604);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(86674);var a=t(96486),r=t.n(a),o=t(62232),d=function(h,z){return r().isEmpty(z)?z:z.map(function(X){if(r().includes([26,27,48],h)&&r().includes(["user-self","user-departments","user-role"],X.staticValue)){var B,x=r().get(r().find(R.V1,function(i){return i.id===X.staticValue}),"text"),Q=X.staticValue==="user-self"?"accountId":X.staticValue==="user-departments"?"departmentId":"organizeId";return(0,te.default)({},X,{staticValue:L()((B={},(0,g.default)(B,Q,X.staticValue),(0,g.default)(B,"name",x),B))})}else return X})},Z=function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return h.filter(function(z){return!r().includes(y.x0,z.controlId)})},H=function(h){return R.vu[h.type]},U=function(h){return h.type===46?R.tq:h.type===16?R.XO:R.lb},f=function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},z=arguments[1],X=z[0]||{},B=X.staticValue;if(r().includes(R.tf,h.type)&&B)return!0;if(r().includes([3,4,5,26],h.type)){var x=typeof B=="string"?safeParse(B||"{}"):B;return r().includes(["user-self"],(x||{}).accountId)}return!1},V=function(h){return h.type===29&&h.enumDefault===1},C=function(h){return h.type===29&&h.enumDefault===2},O=function(h){return!(0,o.YU)(h)},n=function(h){return h.type===37&&r().includes([0,6,8],h.enumDefault2)},s=function(h){return h.type===31||h.type===38&&h.enumDefault===1},j=function(h){return h.type===30&&r().includes(R.dT,r().get(h,["sourceControl","type"]))},A=function(h){return h.type===38&&h.enumDefault===2&&h.unit==="1"},S=function(h){return h.type===38&&h.enumDefault===2&&h.unit==="3"},I=function(h){return h.type===38&&h.enumDefault===2&&r().includes(["8","9"],h.unit)},c=function(h){return r().includes([9,10,11],h.type)&&h.enumDefault===1},q=function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return r().includes([9,10,11],h.type)&&!h.dataSource},b=function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},z=arguments[1];return z==="2"?(h.advancedSetting||{}).usertype==="2":(h.advancedSetting||{}).usertype!=="2"},k={2:function(h){return r().includes(R.KE,h.type)||V(h)},3:function(h){return r().includes([3],h.type)},4:function(h){return r().includes([4],h.type)},5:function(h){return r().includes(R.VB,h.type)},6:function(h){return r().includes(R.dT,h.type)||c(h)||s(h)||j(h)||n(h)},8:function(h){return r().includes(R.dT,h.type)||c(h)||s(h)||j(h)||n(h)},14:function(h){return r().includes([14],h.type)},15:function(h){return r().includes(R.rC,h.type)||S(h)},16:function(h){return r().includes(R.rC,h.type)||A(h)},19:function(h){return r().includes(R.ET,h.type)},23:function(h){return r().includes(R.ET,h.type)},24:function(h){return r().includes(R.ET,h.type)},26:function(h,z){return z===0?r().includes(R.ZW,h.type)&&h.enumDefault===z:r().includes(R.ZW,h.type)},27:function(h){return r().includes(R.yo,h.type)},28:function(h){return r().includes(R.XI,h.type)||c(h)||n(h)},36:function(h){return r().includes(R.xh,h.type)},41:function(h){return r().includes(R.ek,h.type)||V(h)},45:function(h){return r().includes(R.Gz,h.type)||V(h)},46:function(h){return r().includes(R.Bd,h.type)||I(h)},48:function(h){return r().includes(R.cb,h.type)},10000007:function(h){return r().includes(R.hm,h.type)||O(h)},10000008:function(h){return r().includes(R.YW,h.type)}},ee=function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return z.filter(function(X){return C(h)?O(X):V(X)||X.type===35})},re=function(h){var z=h.data,X=z===void 0?{}:z,B=h.controls,x=h.isCurrent,Q=h.needFilter,i=Q===void 0?!1:Q,m=X.type,v=X.enumDefault,W=X.dataSource,P=X.advancedSetting;P=P===void 0?{}:P;var u=P.usertype,l=k[m];if(r().includes([2],m)&&x&&(B=B.filter(function(D){return D.type!==33})),r().includes([2,3,4,5,6,8,14,15,16,19,23,24,28,36,41,45,46,10000007,10000008],m))return r().filter(B,l);if(r().includes([7],m))return r().filter(B,function(D){return D.enumDefault===v&&D.type===7});if(r().includes([9,10,11],m)){var T=r().filter(B,function(D){return r().includes([9,10,11],D.type)});return T.map(function(D){return W&&D.dataSource===W?(0,te.default)({},D,{isEqualSource:!0}):D})}if(r().includes([26],m))return B=i?B:r().filter(B,function(D){return!r().includes([27,48],D.type)}),r().filter(B,function(D){return l(D,v)&&b(D,u)});if(r().includes([27],m))return i?r().filter(B,function(D){return r().includes([27],D.type)}):r().filter(B,l);if(r().includes([48],m))return i?r().filter(B,function(D){return r().includes([48],D.type)}):r().filter(B,l);if(r().includes([29],m)){var G=ee(X,B);return r().filter(G,function(D){return D.dataSource===W})}return r().includes([35],m)?r().filter(B,function(D){return D.dataSource===W&&D.type===35}):B},ie=function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",z=h.match(R.Rw)||[],X=r().filter(h.split("$"),function(x){return!r().isEmpty(x)}),B=X.map(function(x){var Q={cid:"",rcid:"",staticValue:""};if(r().includes(z,"$"+x+"$")){var i=x.split("~"),m=(0,ce.Z)(i,2),v=m[0],W=v===void 0?"":v,P=m[1],u=P===void 0?"":P;return(0,te.default)({},Q,{cid:W,rcid:u})}else return(0,te.default)({},Q,{staticValue:x})});return B},le=function(h){return h&&h.type===45&&h.enumDefault===1},E=function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},z=h.advancedSetting;z=z===void 0?{}:z;var X=z.showtype;return X==="1"?[{id:"1",text:_l("\u5F00\u542F")},{id:"0",text:_l("\u5173\u95ED")}]:X==="2"?[{id:"1",text:_l("\u662F%04015")},{id:"0",text:_l("\u5426")}]:R.nT},w=function(h,z){var X=[];return h.type===45&&h.enumDefault===1&&(X=R.IQ),z?X.map(function(B){return(0,te.default)({},B,{list:(B.list||[]).filter(function(x){return r().includes(x.text,z)})})}):X},K={2:function(h){return r().includes([2,3,4,5,6,7,8,9,10,11,15,16,28,36,46],h.type)},6:function(h){return r().includes([6,8,9,10,11,28,36],h.type)||j(h)},16:function(h){return r().includes(R.rC,h.type)||A(h)},26:function(h){return r().includes([26],h.type)},27:function(h){return r().includes([27],h.type)},10000007:function(h){return r().includes(R.hm,h.type)||O(h)},10000008:function(h){return r().includes([34],h.type)}},N=function(h){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(h.type===10000007){var X=z.filter(function(Q){return Q.type===34}).reduce(function(Q,i){var m=Z(i.relationControls).map(function(v){return(0,te.default)({},v,{parentId:i.controlId,parentName:i.controlName})});return Q.concat(m)},[]),B=z.concat(X);return r().filter(B,K[h.originType])}var x=K[h.type];return r().filter(z,x)}},44265:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{H9:()=>checkTypeSupportForFunction,c:()=>functionTypes,m3:()=>functionDetails,wk:()=>functions});var babel_runtime_core_js_object_keys__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(88902),babel_runtime_core_js_object_keys__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(babel_runtime_core_js_object_keys__WEBPACK_IMPORTED_MODULE_0__),babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(72444),babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(12424),babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(85315),dayjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(27484),dayjs__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_4__),dayjs_plugin_isBetween__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(66607),dayjs_plugin_isBetween__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(dayjs_plugin_isBetween__WEBPACK_IMPORTED_MODULE_5__),dayjs_plugin_customParseFormat__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(10285),dayjs_plugin_customParseFormat__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(dayjs_plugin_customParseFormat__WEBPACK_IMPORTED_MODULE_6__),lodash__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(96486),lodash__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_7__),worksheet_util_purejs__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1178),pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(86674),src_pages_widgetConfig_util__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(62232);dayjs__WEBPACK_IMPORTED_MODULE_4___default().extend(dayjs_plugin_customParseFormat__WEBPACK_IMPORTED_MODULE_6___default()),dayjs__WEBPACK_IMPORTED_MODULE_4___default().extend(dayjs_plugin_isBetween__WEBPACK_IMPORTED_MODULE_5___default());function newDate(lt){return new Date(dayjs__WEBPACK_IMPORTED_MODULE_4___default()(lt).valueOf())}function isDateStr(lt){return newDate(lt).toString()!=="Invalid Date"}function checkIsTime(lt){return/^\w\w:\w\w(:\w\w)?$/.test(lt)}function completeTime(lt){return checkIsTime(lt)?dayjs__WEBPACK_IMPORTED_MODULE_4___default()(lt,(0,worksheet_util_purejs__WEBPACK_IMPORTED_MODULE_8__.Yp)(lt,":")===2?"HH:mm:ss":"HH:mm").format():lt}function endTimeIsBeforeStartTime(lt,Te){return lt=dayjs__WEBPACK_IMPORTED_MODULE_4___default()(lt).set("y",2e3).set("M",1).set("D",1),Te=dayjs__WEBPACK_IMPORTED_MODULE_4___default()(Te).set("y",2e3).set("M",1).set("D",1),Te.isBefore(lt)}var functions={NETWORKDAY:function(Te,t){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,2,3,4,5];if(ce=ce.filter(lodash__WEBPACK_IMPORTED_MODULE_7___default().identity),!isDateStr(Te))throw new Error(_l("\u5F00\u59CB\u65E5\u671F\u4E0D\u662F\u65E5\u671F\u7C7B\u578B"));if(!isDateStr(t))throw new Error(_l("\u7ED3\u675F\u65E5\u671F\u4E0D\u662F\u65E5\u671F\u7C7B\u578B"));var p=dayjs__WEBPACK_IMPORTED_MODULE_4___default()(t).isBefore(dayjs__WEBPACK_IMPORTED_MODULE_4___default()(Te));if(p){var L=[t,Te];Te=L[0],t=L[1]}var te=dayjs__WEBPACK_IMPORTED_MODULE_4___default()(t).diff(dayjs__WEBPACK_IMPORTED_MODULE_4___default()(Te),"day")+1,R=dayjs__WEBPACK_IMPORTED_MODULE_4___default()(Te).day(),y=dayjs__WEBPACK_IMPORTED_MODULE_4___default()(t).day();if(endTimeIsBeforeStartTime(Te,t)&&(y=dayjs__WEBPACK_IMPORTED_MODULE_4___default()(t).subtract(1,"d").day()),te>7){var a=[].concat((0,babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__.Z)(new Array(7-R))).map(function(d,Z){return R+Z}).filter(function(d){return lodash__WEBPACK_IMPORTED_MODULE_7___default().includes(g,d)}).length,r=[].concat((0,babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__.Z)(new Array(y))).map(function(d,Z){return Z+1}).filter(function(d){return lodash__WEBPACK_IMPORTED_MODULE_7___default().includes(g,d)}).length;te=lodash__WEBPACK_IMPORTED_MODULE_7___default().intersection([1,2,3,4,5,6,7].map(function(d,Z){return Z}),g).length*Math.floor((te-(7-R)-y)/7)+a+r}else{var o=[].concat((0,babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__.Z)(new Array(te))).map(function(d,Z){return Number((R+Z).toString(7).slice(-1))});te=o.filter(function(d){return lodash__WEBPACK_IMPORTED_MODULE_7___default().includes(g,d)}).length}return ce.length&&(te=te-ce.filter(function(d){return lodash__WEBPACK_IMPORTED_MODULE_7___default().includes(g,dayjs__WEBPACK_IMPORTED_MODULE_4___default()(d).day())&&(dayjs__WEBPACK_IMPORTED_MODULE_4___default()(d).isBetween(Te,t,"day")||dayjs__WEBPACK_IMPORTED_MODULE_4___default()(d).isSame(Te,"day")||dayjs__WEBPACK_IMPORTED_MODULE_4___default()(d).isSame(t,"day"))}).length),p?-1*te:te},MINUTE:function(Te){var t=newDate(completeTime(Te)).getMinutes();return lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(t)&&!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(t)?t:void 0},HOUR:function(Te){var t=newDate(completeTime(Te)).getHours();return lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(t)&&!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(t)?t:void 0},WEEKDAY:function(Te){if(lodash__WEBPACK_IMPORTED_MODULE_7___default().isEmpty(Te))return"";var t=newDate(Te).getDay();return t=t===0?7:t,lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(t)&&!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(t)?t:""},DAY:function(Te){if(lodash__WEBPACK_IMPORTED_MODULE_7___default().isEmpty(Te))return"";var t=newDate(Te).getDate();return lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(t)&&!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(t)?t:void 0},MONTH:function(Te){if(lodash__WEBPACK_IMPORTED_MODULE_7___default().isEmpty(Te))return"";var t=newDate(Te).getMonth()+1;return lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(t)&&!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(t)?t:void 0},YEAR:function(Te){if(lodash__WEBPACK_IMPORTED_MODULE_7___default().isEmpty(Te))return"";var t=newDate(Te).getFullYear();return lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(t)&&!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(t)?t:void 0},DATEADD:function(Te,t){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;t=t.replace(/\+\(undefined\)/g,"").replace(/\((\d+)\)/,function(te,R){return R}),t=t.replace(/\w\w:\w\w:\w\w/g,function(te){var R=dayjs__WEBPACK_IMPORTED_MODULE_4___default()(te,"HH:mm:ss").format("HH:mm:ss").split(":").map(Number),y=(0,babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__.Z)(R,3),a=y[0],r=y[1],o=y[2];return a+"h+"+r+"m+"+o+"s"});var g=checkIsTime(Te);Te=completeTime(Te);var p=(0,worksheet_util_purejs__WEBPACK_IMPORTED_MODULE_8__.AH)(Te,t),L=p.result;return L&&L.format(g?"HH:mm:ss":ce===1?"YYYY-MM-DD":"YYYY-MM-DD HH:mm:ss")},DATEIF:function(Te,t){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"d";if(Te=completeTime(Te),t=completeTime(t),!isDateStr(Te))throw new Error(_l("\u5F00\u59CB\u65E5\u671F\u4E0D\u662F\u65E5\u671F\u7C7B\u578B"));if(!isDateStr(t))throw new Error(_l("\u7ED3\u675F\u65E5\u671F\u4E0D\u662F\u65E5\u671F\u7C7B\u578B"));if(!/^[YyMdhm]$/.test(g))throw new Error(_l("\u5355\u4F4D\u4E0D\u5408\u6CD5"));g==="Y"&&(g="y"),ce===1?(/^\d{4}(-\d{2}){2}$/.test(Te)&&(Te=dayjs__WEBPACK_IMPORTED_MODULE_4___default()(Te).startOf("day")),/^\d{4}(-\d{2}){2}$/.test(t)&&(t=dayjs__WEBPACK_IMPORTED_MODULE_4___default()(t).startOf("day"))):(/^\d{4}(-\d{2}){2}$/.test(Te)&&(Te=dayjs__WEBPACK_IMPORTED_MODULE_4___default()(Te).startOf("day")),/^\d{4}(-\d{2}){2}$/.test(t)&&(t=dayjs__WEBPACK_IMPORTED_MODULE_4___default()(t).add(1,"day").startOf("day")));var p=dayjs__WEBPACK_IMPORTED_MODULE_4___default()(t).diff(Te,g);return p+({y:_l("\u5E74"),M:_l("\u6708"),d:_l("\u5929"),h:_l("\u5C0F\u65F6"),m:_l("\u5206\u949F")}[g]||"")},DATENOW:function(){return dayjs__WEBPACK_IMPORTED_MODULE_4___default()().format("YYYY-MM-DD HH:mm:ss")},COUNTARRAY:function(Te){return typeof Te=="string"&&lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(+Te)&&!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(+Te)?Te:Te?Te.length:0},RANDBETWEEN:function(Te,t){if(Te=Math.round(Number(Te)),t=Math.round(Number(t)),!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(Te)||lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(t))throw new Error(_l("\u5F00\u59CB\u4F4D\u7F6E\u4E0D\u662F\u6570\u5B57"));if(!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(t)||lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(t))throw new Error(_l("\u7ED3\u675F\u4F4D\u7F6E\u4E0D\u662F\u6570\u5B57"));return Te+Math.floor(Math.random()*(t-Te+1))},ROUNDDOWN:function(Te){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(Te=Number(Te),t=Number(t),!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(Te)||lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(Te))throw new Error(_l("\u53C2\u6570\u4E0D\u662F\u6570\u5B57"));if(!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(t)||lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(t))throw new Error(_l("\u53C2\u6570\u4E0D\u662F\u6570\u5B57"));return lodash__WEBPACK_IMPORTED_MODULE_7___default().floor(Te,t)},ROUNDUP:function(Te){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(Te=Number(Te),t=Number(t),!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(Te)||lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(Te))throw new Error(_l("\u53C2\u6570\u4E0D\u662F\u6570\u5B57"));if(!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(t)||lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(t))throw new Error(_l("\u53C2\u6570\u4E0D\u662F\u6570\u5B57"));return lodash__WEBPACK_IMPORTED_MODULE_7___default().ceil(lodash__WEBPACK_IMPORTED_MODULE_7___default().round(Te,t+10),t)},ROUND:function(Te){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(Te=Number(Te),t=Number(t),!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(Te)||lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(Te))throw new Error(_l("\u53C2\u6570\u4E0D\u662F\u6570\u5B57"));if(!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(t)||lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(t))throw new Error(_l("\u53C2\u6570\u4E0D\u662F\u6570\u5B57"));return lodash__WEBPACK_IMPORTED_MODULE_7___default().round(Te,t)},CEILING:function(Te,t){if(Te=Number(Te),t=Number(t),!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(Te)||lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(Te))throw new Error(_l("\u53C2\u6570\u4E0D\u662F\u6570\u5B57"));if(!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(t)||lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(t))throw new Error(_l("\u53C2\u6570\u4E0D\u662F\u6570\u5B57"));if(Te>0&&t<0)throw new Error("#NUM!");return Math.ceil(Te/t)*t},FLOOR:function(Te,t){if(Te=Number(Te),t=Number(t),!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(Te)||lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(Te))throw new Error(_l("\u53C2\u6570\u4E0D\u662F\u6570\u5B57"));if(!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(t)||lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(t))throw new Error(_l("\u53C2\u6570\u4E0D\u662F\u6570\u5B57"));if(Te>0&&t<0)throw new Error("#NUM!");return Math.floor(Te/t)*t},MOD:function(Te,t){if(!(typeof Te>"u")){if(Te=Number(Te),t=Number(t),!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(Te)||lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(Te))throw new Error(_l("\u88AB\u9664\u6570\u4E0D\u662F\u6570\u5B57"));if(!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(t)||lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(t))throw new Error(_l("\u9664\u6570\u4E0D\u662F\u6570\u5B57"));if(t===0)throw new Error(_l("\u9664\u6570\u4E0D\u80FD\u4E3A0"));return Te%t}},INT:function(Te){if(Te=Number(Te),!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(Te)||lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(Te))throw new Error(_l("\u53C2\u6570\u4E0D\u662F\u6570\u5B57"));return Math.floor(Te)},ABS:function(Te){if(Te=Number(Te),!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(Te)||lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(Te))throw new Error(_l("\u53C2\u6570\u4E0D\u662F\u6570\u5B57"));return Math.abs(Te)},COUNTA:function(){for(var Te=arguments.length,t=Array(Te),ce=0;ce<Te;ce++)t[ce]=arguments[ce];return t.filter(function(g){return typeof g<"u"&&String(g).trim()!==""&&g!==null&&!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(g)&&g!==!1}).length},COUNTBLANK:function(){for(var Te=arguments.length,t=Array(Te),ce=0;ce<Te;ce++)t[ce]=arguments[ce];return t.filter(function(g){return!(typeof g<"u"&&String(g).trim()!==""&&g!==null&&!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(g)&&g!==!1)}).length},PRODUCT:function(){for(var Te=arguments.length,t=Array(Te),ce=0;ce<Te;ce++)t[ce]=arguments[ce];if(t=t.map(function(g){return Number(g)}),!lodash__WEBPACK_IMPORTED_MODULE_7___default().some(t,function(g){return!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNumber(g)||lodash__WEBPACK_IMPORTED_MODULE_7___default().isNaN(g)}))return t.reduce(function(g,p){return g*p})},MAX:function(){for(var Te=arguments.length,t=Array(Te),ce=0;ce<Te;ce++)t[ce]=arguments[ce];return t=t.filter(function(g){return!(lodash__WEBPACK_IMPORTED_MODULE_7___default().isUndefined(g)||String(g).trim()==="")}),t.length?Math.max.apply(Math,(0,babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__.Z)(t)):0},MIN:function(){for(var Te=arguments.length,t=Array(Te),ce=0;ce<Te;ce++)t[ce]=arguments[ce];return t=t.filter(function(g){return!(lodash__WEBPACK_IMPORTED_MODULE_7___default().isUndefined(g)||String(g).trim()==="")}),t.length?Math.min.apply(Math,(0,babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_3__.Z)(t)):0},AVERAGE:function(){for(var Te=arguments.length,t=Array(Te),ce=0;ce<Te;ce++)t[ce]=arguments[ce];return t=t.filter(function(g){return!(lodash__WEBPACK_IMPORTED_MODULE_7___default().isUndefined(g)||String(g).trim()==="")}),t.length?lodash__WEBPACK_IMPORTED_MODULE_7___default().sum(t)/t.length:0},SUM:function(){for(var Te=arguments.length,t=Array(Te),ce=0;ce<Te;ce++)t[ce]=arguments[ce];if(t=t.map(function(g){return lodash__WEBPACK_IMPORTED_MODULE_7___default().isUndefined(g)?0:g}),!t.length)throw new Error(_l("\u6CA1\u6709\u53C2\u6570"));return lodash__WEBPACK_IMPORTED_MODULE_7___default().sum(t)},NUMBER:function(Te){return Number(Number(Te).toFixed(14))},POWER:function(Te,t){return Math.pow(Te,t)},LOG:function(Te,t){return Math.log(Te)/Math.log(t)},REPLACE:function(Te){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"";if(typeof Te>"u")throw new Error("REPLACE: text is undefined");return t=Number(t),ce=Number(ce),Te.slice(0,t-1>0?t-1:0)+g+Te.slice((t-1>0?t-1:0)+ce)},REPT:function(){var Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"*",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(t>1e4)throw new Error(_l("\u957F\u5EA6\u592A\u5927"));if(Te==="")throw new Error(_l("\u91CD\u590D\u5B57\u7B26\u4E0D\u80FD\u4E3A\u7A7A"));for(var ce="",g=0;g<t;)ce+=Te,g++;return ce},MID:function(){var Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return t=Number(t),ce=Number(ce),Te.substr(t-1>0?t-1:0,ce)},RIGHT:function(){var Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return t=Number(t),String(Te).slice(-1*Math.abs(t))},LEFT:function(){var Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return t=Number(t),String(Te).slice(0,t)},UPPER:function(){var Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return String(Te).toUpperCase()},LOWER:function(){var Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return String(Te).toLowerCase()},CONCAT:function(){for(var Te=arguments.length,t=Array(Te),ce=0;ce<Te;ce++)t[ce]=arguments[ce];var g="";for(t=t.filter(function(p){return!lodash__WEBPACK_IMPORTED_MODULE_7___default().isUndefined(p)&&!lodash__WEBPACK_IMPORTED_MODULE_7___default().isNull(p)}).map(String);t.length;)g+=t.shift()||"";return g},STRING:function(Te){return lodash__WEBPACK_IMPORTED_MODULE_7___default().isArray(Te)?Te.map(function(t){var ce="";try{typeof t=="string"?ce=t:(typeof t>"u"?"undefined":(0,babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1__.default)(t))==="object"&&(ce=t.text||"")}catch(g){}return ce}).join(","):String(typeof Te>"u"?"":Te)},TRIM:function(Te){return String(Te||"").trim()},CLEAN:function(Te){return String(Te||"").replace(/ /g,"")},IF:function(Te,t,ce){return Te?t:ce},OR:function OR(){for(var _len9=arguments.length,args=Array(_len9),_key9=0;_key9<_len9;_key9++)args[_key9]=arguments[_key9];return lodash__WEBPACK_IMPORTED_MODULE_7___default().some(args.map(function(e){return eval(e)}))},AND:function AND(){for(var _len10=arguments.length,args=Array(_len10),_key10=0;_key10<_len10;_key10++)args[_key10]=arguments[_key10];return lodash__WEBPACK_IMPORTED_MODULE_7___default().every(args.map(function(e){return eval(e)}))},NOT:function NOT(expression){return!eval(expression)},FALSE:function lt(){return!1},TRUE:function lt(){return!0},ISBLANK:function lt(Te){return typeof Te>"u"||Te===null||Te===""||Te==="[]"||lodash__WEBPACK_IMPORTED_MODULE_7___default().isEqual(Te,[])},ENCODEURI:function lt(Te){return encodeURI(String(Te||""))},DECODEURI:function lt(Te){return decodeURI(String(Te||""))},ENCODEURICOMPONENT:function lt(Te){return encodeURIComponent(String(Te||""))},DECODEURICOMPONENT:function lt(Te){return decodeURIComponent(String(Te||""))},DISTANCE:function lt(Te,t){var ce=void 0,g=void 0,p=void 0,L=void 0;if(lodash__WEBPACK_IMPORTED_MODULE_7___default().isObject(Te)?(ce=Te.x,g=Te.y):typeof Te=="string"&&/^\d+(\.\d+)?,\d+(\.\d+)?$/.test(Te)&&(ce=parseFloat(Te.split(",")[0]),g=parseFloat(Te.split(",")[1])),lodash__WEBPACK_IMPORTED_MODULE_7___default().isObject(t)?(p=t.x,L=t.y):typeof t=="string"&&/^\d+(\.\d+)?,\d+(\.\d+)?$/.test(t)&&(p=parseFloat(t.split(",")[0]),L=parseFloat(t.split(",")[1])),!!(ce&&g&&p&&L)){if(g===L&&ce===p)return 0;var te=Math.PI*g/180,R=Math.PI*L/180,y=ce-p,a=Math.PI*y/180,r=Math.sin(te)*Math.sin(R)+Math.cos(te)*Math.cos(R)*Math.cos(a);return r>1&&(r=1),r=Math.acos(r),r=r*180/Math.PI,r=r*60*1.1515*1.609344,r}},FIND:function lt(){var Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments[1],ce=arguments[2];return t&&(t=t.replace(/([(?[*)|])/g,"\\$1")),ce&&(ce=ce.replace(/([(?[*)|])/g,"\\$1")),!Te||!t&&!ce?Te:t?ce?(Te.match(new RegExp(t+"(.+?)"+ce))||"")[1]:(Te.match(new RegExp(t+"(.+?)$"))||"")[1]:(Te.match(new RegExp("^(.+?)"+ce))||"")[1]},FINDA:function lt(){var Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments[1],ce=arguments[2];if(!t||!ce)return[];t&&(t=t.replace(/([(?[*)])/g,"\\$1")),ce&&(ce=ce.replace(/([(?[*)])/g,"\\$1"));for(var g=new RegExp(t+"(.+?)"+ce,"g"),p=[],L=g.exec(Te);L!=null;)p.push(L[1]),L=g.exec(Te);return p},SPLIT:function lt(){var Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return Te.split(t)},JOIN:function lt(){var Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return Te.join(t)},INCLUDE:function lt(Te,t){if(!(!Te||!t))return String(Te).indexOf(t)>-1},GETPOSITION:function lt(){var Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments[1];return t==="x,y"?Te.x&&Te.y?Te.x+","+Te.y:"":Te[t]||""},COUNTCHAR:function lt(Te){return Te.replace(/(\r\n|\n)/g,"").length}},functionTypes={math:_l("\u6570\u5B66\u51FD\u6570"),date:_l("\u65E5\u671F\u51FD\u6570"),string:_l("\u6587\u672C\u51FD\u6570"),flow:_l("\u903B\u8F91\u51FD\u6570"),advanced:_l("\u9AD8\u7EA7\u51FD\u6570")},functionDetailsMap={NETWORKDAY:{name:_l("\u4E24\u4E2A\u65E5\u671F\u95F4\u7684\u5DE5\u4F5C\u65E5"),type:"date",title:_l("\u8BA1\u7B97\u4E24\u4E2A\u65E5\u671F\u95F4\u5305\u542B\u7684\u5DE5\u4F5C\u65E5\u6570\uFF1B\u8F93\u51FA\u5355\u4F4D\u6052\u5B9A\u4E3A'\u5929'"),des:"<bb>"+_l("NETWORKDAY(\u5F00\u59CB\u65E5\u671F,\u7ED3\u675F\u65E5\u671F,[\u8282\u5047\u65E5\u671F1,\u8282\u5047\u65E5\u671F2,...])")+`</bb></br>
        <li>`+_l("[\u8282\u5047\u65E5\u671F\u7EC4]\uFF1A\u4F7F\u7528\u5B57\u6BB5\u503C\u6216\u56FA\u5B9A\u503C\u6307\u660E\u54EA\u4E9B\u5929\u662F\u8282\u5047\u65E5\uFF1B\u5982\u679C\u4E0D\u6307\u5B9A\u8FD9\u4E2A\u53C2\u6570\uFF0C\u7CFB\u7EDF\u53EA\u4F1A\u81EA\u52A8\u6392\u9664\u6389\u5468\u516D\u53CA\u5468\u65E5")+`</li>
        <b>`+_l("\u793A\u4F8B\uFF1A=NETWORKDAY('2021-3-8','2021-3-14',['2021-3-8']) \uFF0C\u7ED3\u679C\uFF1A4\u5929")+`</b></br>
        `+_l("\u8BA1\u7B97 2021-3-8 \u81F3 2021-3-14 \u671F\u95F4\u7684\u5DE5\u4F5C\u65E5\uFF0C\u6392\u9664\u4E09\u516B\u5987\u5973\u8282")},MINUTE:{name:_l("\u8FD4\u56DE\u5206\u949F\u6570"),type:"date",title:_l("\u8FD4\u56DE\u65F6\u95F4\u4E2D\u7684\u5206\u949F\u6570\uFF0C\u8FD4\u56DE\u503C\u8303\u56F4\u5728 0 - 59 \u4E4B\u95F4"),des:"<bb>"+_l("MINUTE(\u65E5\u671F\u65F6\u95F4/\u65F6\u95F4)")+`</bb><br/>
        <b>`+_l("\u793A\u4F8B\uFF1A=MINUTE('2021-5-1 11:59') \uFF0C\u7ED3\u679C\uFF1A59")+`</b><br/>
        `+_l("\u8FD4\u56DE 2021-5-1 11:59 \u7684\u5206\u949F\u6570")},HOUR:{name:_l("\u8FD4\u56DE\u5C0F\u65F6\u6570"),type:"date",title:_l("\u8FD4\u56DE\u65F6\u95F4\u4E2D\u7684\u5C0F\u65F6\u6570\uFF0C\u8FD4\u56DE\u503C\u8303\u56F4\u5728 0 - 23 \u4E4B\u95F4"),des:"<bb>"+_l("HOUR(\u65E5\u671F\u65F6\u95F4/\u65F6\u95F4)")+`</bb><br/>
        <b>`+_l("\u793A\u4F8B\uFF1A=HOUR('2021-5-1 11:59') \uFF0C\u7ED3\u679C\uFF1A11")+`</b><br/>
        `+_l("\u8FD4\u56DE 2021-5-1 11:59 \u7684\u5C0F\u65F6\u6570")},WEEKDAY:{name:_l("\u8FD4\u56DE\u661F\u671F\u6570"),type:"date",title:_l("\u8FD4\u56DE\u65E5\u671F\u7684\u661F\u671F\u6570\uFF0C\u8FD4\u56DE\u503C\u8303\u56F4\u5728 1 - 7 \u4E4B\u95F4"),des:"<bb>"+_l("WEEKDAY(\u65E5\u671F\u65F6\u95F4)")+`</bb><br/>
        <b>`+_l("\u793A\u4F8B\uFF1A=WEEKDAY('2021-5-1') \uFF0C\u7ED3\u679C\uFF1A6")+`</b><br/>
        `+_l("\u8FD4\u56DE 2021-5-1 \u7684\u661F\u671F\u6570")},DAY:{name:_l("\u8FD4\u56DE\u5929\u6570"),type:"date",title:_l("\u8FD4\u56DE\u65E5\u671F\u7684\u5929\u6570\uFF0C\u8FD4\u56DE\u503C\u8303\u56F4\u5728 1 - 31 \u4E4B\u95F4"),des:"<bb>"+_l("DAY(\u65E5\u671F\u65F6\u95F4)")+`</bb><br/>
        <b>`+_l("\u793A\u4F8B\uFF1A=DAY('2021-5-1') \uFF0C\u7ED3\u679C\uFF1A1")+`</b><br/>
        `+_l("\u8FD4\u56DE 2021-5-1 \u7684\u5929\u6570")},MONTH:{name:_l("\u8FD4\u56DE\u6708\u4EFD"),type:"date",title:_l("\u8FD4\u56DE\u65E5\u671F\u7684\u6708\u4EFD\uFF0C\u8FD4\u56DE\u503C\u8303\u56F4\u5728 1 - 12 \u4E4B\u95F4"),des:"<bb>"+_l("MONTH(\u65E5\u671F\u65F6\u95F4)")+`</bb><br/>
        <b>`+_l("\u793A\u4F8B\uFF1A=MONTH('2021-5-1') \uFF0C\u7ED3\u679C\uFF1A5")+`</b><br/>
        `+_l("\u8FD4\u56DE 2021-5-1 \u7684\u6708\u4EFD")},YEAR:{name:_l("\u8FD4\u56DE\u5E74\u4EFD"),type:"date",title:_l("\u8FD4\u56DE\u65E5\u671F\u7684\u56DB\u4F4D\u5E74\u4EFD"),des:"<bb>"+_l("YEAR(\u65E5\u671F\u65F6\u95F4)")+`</bb></br>
        <b>`+_l("\u793A\u4F8B\uFF1A=YEAR('2021-5-1') \uFF0C\u7ED3\u679C\uFF1A2021")+`</b><br/>
      `+_l("\u8FD4\u56DE 2021-5-1 \u7684\u5E74\u4EFD")},DATEADD:{name:_l("\u4E3A\u65E5\u671F\u52A0\u51CF\u65F6\u95F4"),type:"date",title:_l("\u5BF9\u67D0\u4E2A\u65E5\u671F\u6DFB\u52A0/\u51CF\u53BB\u4E00\u5B9A\u65F6\u95F4\u6BB5\uFF0C\u518D\u5BF9\u8BA1\u7B97\u7ED3\u679C\u8BBE\u7F6E\u683C\u5F0F\uFF0C1\u4EE3\u8868\u65E5\u671F\uFF0C2\u4EE3\u8868\u65E5\u671F\u65F6\u95F4"),des:"<bb>"+_l("DATEADD(\u521D\u59CB\u65E5\u671F,\u8BA1\u7B97\u5F0F,[\u8F93\u51FA\u683C\u5F0F])")+`</bb></br>
        <li>`+_l("\u8BA1\u7B97\u5F0F\uFF1A'+'\u6216'-'\u4EE3\u8868\u6DFB\u52A0\u6216\u51CF\u53BB\uFF1B\u65F6\u95F4\u6BB5\u7684\u5355\u4F4D\uFF0C'Y'\u4EE3\u8868\u5E74\u3001'M'\u4EE3\u8868\u6708\u3001'd'\u4EE3\u8868\u5929\u3001'h'\u4EE3\u8868\u5C0F\u65F6\u3001'm'\u4EE3\u8868\u5206\u949F\uFF1B\u4E5F\u53EF\u4EE5\u6DFB\u52A0\u6216\u51CF\u53BB\u4E00\u4E2A\u65F6\u95F4\u5B57\u6BB5")+`</li>
        <li>`+_l("[\u8F93\u51FA\u683C\u5F0F]\uFF1A1\u4EE3\u8868\u65E5\u671F\u683C\u5F0F\uFF0C2\u4EE3\u8868\u65E5\u671F\u65F6\u95F4\u683C\u5F0F\uFF1B\u5982\u679C\u4E0D\u6307\u5B9A\u8FD9\u4E2A\u53C2\u6570\uFF0C\u5219\u9ED8\u8BA4\u662F\u7C7B\u578B1")+`</li>
        <b>`+_l("\u793A\u4F8B\uFF1A=DATEADD('2008-11-11 12:23','+8h',2) \uFF0C\u7ED3\u679C\uFF1A2008-11-11 20:23")+`</b></br>
        `+_l("\u6C42 2008-11-11 12:23 8\u5C0F\u65F6\u540E\u7684\u65F6\u95F4\u70B9\uFF0C\u7ED3\u679C\u4FDD\u6301\u65E5\u671F\u65F6\u95F4\u683C\u5F0F")},DATEIF:{name:_l("\u65F6\u957F"),type:"date",title:_l("\u8BA1\u7B97\u4E24\u4E2A\u65E5\u671F/\u65F6\u95F4\u4E4B\u95F4\u7684\u65F6\u957F\uFF0C\u5E76\u7CBE\u786E\u5230\u5E74\u3001\u6708\u3001\u5929\u3001\u5C0F\u65F6\u6216\u5206"),des:"<bb>"+_l("DATEIF(\u5F00\u59CB,\u7ED3\u675F,\u683C\u5F0F\u5316\u65B9\u5F0F,[\u8F93\u51FA\u5355\u4F4D])")+`</bb></br>
        <li>`+_l("\u683C\u5F0F\u5316\u65B9\u5F0F\uFF1A1-\u5F00\u59CB\u65E5\u671F00:00\u7ED3\u675F\u65E5\u671F00:00\uFF0C2-\u5F00\u59CB\u65E5\u671F00:00\u7ED3\u675F\u65E5\u671F24:00")+`</li>
        <li>`+_l("\u8F93\u51FA\u5355\u4F4D\uFF1A'Y'-\u5E74\uFF1B'M'-\u6708\uFF1B'd'-\u5929\uFF1B'h'-\u5C0F\u65F6\uFF1B'm'-\u5206\u949F\uFF1B\u5982\u679C\u4E0D\u6307\u5B9A\u8FD9\u4E2A\u53C2\u6570\uFF0C\u5219\u9ED8\u8BA4\u4E3A'd'")+`</li>
        <b>`+_l("\u793A\u4F8B\uFF1A=DATEIF('2021-3-8','2021-3-14',2,'d') \uFF0C\u7ED3\u679C\uFF1A7\u5929")+`</b></br>
        `+_l("\u8BA1\u7B97 2021-3-8 \u81F3 2021-3-14 \u671F\u95F4\u7684\u65F6\u957F\uFF0C\u7CBE\u786E\u5230\u5929")},DATENOW:{name:_l("\u8FD4\u56DE\u5F53\u524D\u65F6\u95F4"),type:"date",title:_l("\u8FD4\u56DE\u5F53\u524D\u65F6\u95F4"),des:"<bb>"+_l("DATENOW()")+`</bb></br>
        <b>`+_l("\u793A\u4F8B\uFF1A=DATENOW() \uFF0C\u7ED3\u679C\uFF1A2008-11-11 12:23")+"</b>"},COUNTARRAY:{name:_l("\u8BA1\u5BF9\u8C61\u6570\u91CF"),type:"math",title:_l("\u8BA1\u7B97\u4EBA\u5458\u3001\u90E8\u95E8\u3001\u591A\u9009\u3001\u5B50\u8868\u6216\u5173\u8054\u8868\u7684\u6570\u91CF"),des:"<bb>"+_l("COUNTARRAY(\u6570\u7EC4\u7C7B\u5B57\u6BB5)")+`</bb></br>
          <b>`+_l("\u793A\u4F8B\uFF1A=COUNTARRAY(\u5DE5\u5E8F) \uFF0C\u7ED3\u679C\uFF1A7")+`</b></br>
        `+_l("\u8BA1\u7B97\u540D\u79F0\u4E3A\u201C\u5DE5\u5E8F\u201D\u7684\u5B50\u8868\u6570\u91CF\uFF08\u5B9E\u9645\u67097\u9053\u5DE5\u5E8F\uFF09")},RANDBETWEEN:{name:_l("\u8FD4\u56DE\u968F\u673A\u6570"),type:"math",title:_l("\u968F\u673A\u8F93\u51FA\u6307\u5B9A\u4E24\u4E2A\u6570\u5B57\u4E4B\u95F4\u7684\u4E00\u4E2A\u6574\u6570\uFF1B\u5728\u65B0\u5EFA\u8BB0\u5F55\u65F6\u751F\u6210\u540E\uFF0C\u503C\u5C06\u4E0D\u518D\u6539\u53D8"),des:"<bb>"+_l("RANDBETWEEN(\u6700\u5C0F\u503C,\u6700\u5927\u503C)")+`</bb></br>
        <b>`+_l("\u793A\u4F8B\uFF1A=RANDBETWEEN(1,10) \uFF0C\u7ED3\u679C\uFF1A7")+`</b></br>
        `+_l("\u968F\u673A\u8F93\u51FA1-10\u4E4B\u95F4\u7684\u4E00\u4E2A\u6570\u5B57")},ROUNDDOWN:{name:_l("\u5411\u4E0B\u820D\u5165"),type:"math",title:_l("\u4EE5\u7EDD\u5BF9\u503C\u51CF\u5C0F\u7684\u65B9\u5411\u6309\u6307\u5B9A\u4F4D\u6570\u820D\u5165\u6570\u5B57"),des:"<bb>"+_l("ROUNDDOWN(\u6570\u503C,\u4F4D\u6570)")+`</bb></br>
      <b>`+_l("\u793A\u4F8B\uFF1A=ROUNDDOWN(3.14159265,4) \uFF0C\u7ED3\u679C\uFF1A3.1415")+`</b></br>
      `+_l("\u4FDD\u7559 3.14159265 \u7684\u56DB\u4F4D\u5C0F\u6570")},CEILING:{name:_l("\u6309\u6307\u5B9A\u500D\u6570\u5411\u4E0A\u820D\u5165"),type:"math",title:_l("\u4EE5\u7EDD\u5BF9\u503C\u589E\u5927\u7684\u65B9\u5411\u6309\u6307\u5B9A\u500D\u6570\u820D\u5165\u6570\u5B57"),des:`
    <bb>`+_l("CEILING(\u6570\u503C,\u57FA\u6570)")+`</bb></br>
    <b>`+_l("\u793A\u4F8B\uFF1A=CEILING(7,3)\uFF0C\u7ED3\u679C\uFF1A9")+`</b></br>
    `+_l("\u53D6\u6700\u63A5\u8FD17\u4E14\u5927\u4E8E7\u76843\u7684\u500D\u6570")},FLOOR:{name:_l("\u6309\u6307\u5B9A\u500D\u6570\u5411\u4E0B\u820D\u5165"),type:"math",title:_l("\u4EE5\u7EDD\u5BF9\u503C\u51CF\u5C0F\u7684\u65B9\u5411\u6309\u6307\u5B9A\u500D\u6570\u820D\u5165\u6570\u5B57"),des:`
    <bb>`+_l("FLOOR(\u6570\u503C,\u57FA\u6570)")+`</bb></br>
    <b>`+_l("\u793A\u4F8B\uFF1A=FLOOR(7,3)\uFF0C\u7ED3\u679C\uFF1A6")+`</b></br>
    `+_l("\u53D6\u6700\u63A5\u8FD17\u4E14\u5C0F\u4E8E7\u76843\u7684\u500D\u6570")},ROUNDUP:{name:_l("\u5411\u4E0A\u820D\u5165"),type:"math",title:_l("\u4EE5\u7EDD\u5BF9\u503C\u589E\u5927\u7684\u65B9\u5411\u6309\u6307\u5B9A\u4F4D\u6570\u820D\u5165\u6570\u5B57"),des:"<bb>"+_l("ROUNDUP(\u6570\u503C,\u4F4D\u6570)")+`</bb></br>
        <b>`+_l("\u793A\u4F8B\uFF1A=ROUNDUP(3.14159265,4) \uFF0C\u7ED3\u679C\uFF1A3.1416")+`</b></br>
      `+_l("\u4FDD\u7559 3.14159265 \u7684\u56DB\u4F4D\u5C0F\u6570")},ROUND:{name:_l("\u56DB\u820D\u4E94\u5165"),type:"math",title:_l("\u6309\u6307\u5B9A\u4F4D\u6570\u5BF9\u6570\u5B57\u8FDB\u884C\u56DB\u820D\u4E94\u5165"),des:"<bb>"+_l("ROUND(\u6570\u503C,\u4F4D\u6570)")+`</bb></br>
        <b>`+_l("\u793A\u4F8B\uFF1A=ROUND(3.14159265,4) \uFF0C\u7ED3\u679C\uFF1A3.1416")+`</b></br>
      `+_l("\u4FDD\u7559 3.14159265 \u7684\u56DB\u4F4D\u5C0F\u6570")},MOD:{name:_l("\u6C42\u4F59"),type:"math",title:_l("\u8FD4\u56DE\u4E24\u6570\u76F8\u9664\u7684\u4F59\u6570"),des:"<bb>"+_l("MOD(\u88AB\u9664\u6570,\u9664\u6570)")+`</bb></br>
      <b>`+_l("\u793A\u4F8B\uFF1A=MOD(15,4) \uFF0C\u7ED3\u679C\uFF1A3")+`</b></br>
      `+_l("\u8BA1\u7B97 15 \u9664\u4EE5 4 \u7684\u4F59\u6570")},INT:{name:_l("\u6C42\u6574"),type:"math",title:_l("\u8FD4\u56DE\u6C38\u8FDC\u5C0F\u4E8E\u7B49\u4E8E\u539F\u6570\u5B57\u7684\u6700\u63A5\u8FD1\u7684\u6574\u6570"),des:"<bb>"+_l("INT(\u6570\u503C)")+`</bb></br>
        <b>`+_l("\u793A\u4F8B\uFF1A=INT(-3.14159265) \uFF0C\u7ED3\u679C\uFF1A-4")+`</b></br>
      `+_l("\u5BF9 -3.14159265 \u8FDB\u884C\u6C42\u6574")},ABS:{name:_l("\u7EDD\u5BF9\u503C"),type:"math",title:_l("\u8BA1\u7B97\u6570\u5B57\u7684\u7EDD\u5BF9\u503C"),des:`
        <bb>`+_l("ABS(\u6570\u503C)")+`</bb></br>
        <b>`+_l("\u793A\u4F8B\uFF1A=ABS(-7) \uFF0C\u7ED3\u679C\uFF1A7")+`</b></br>
        `+_l("\u6C42 -7 \u7684\u7EDD\u5BF9\u503C")},COUNTA:{name:_l("\u8BA1\u6570"),type:"math",title:_l("\u8BA1\u7B97\u53C2\u6570\u4E2D\u5305\u542B\u975E\u7A7A\u503C\u7684\u4E2A\u6570"),des:`
      <bb>`+_l("COUNTA(\u6570\u503C1,\u6570\u503C2...)")+`</bb></br>
      <b>`+_l("\u793A\u4F8B\uFF1A=COUNTA(1\u6708,2\u6708,3\u6708) \uFF0C\u7ED3\u679C\uFF1A2")+`</b></br>
        `+_l("\u8BA1\u7B97\u7B2C\u4E00\u5B63\u5EA6\u6307\u6807\u7684\u5B8C\u6210\u6570\u91CF\uFF0C\u8BE5\u8868\u6709\u4E09\u4E2A\u68C0\u67E5\u6846\u5BF9\u5E941\u30012\u30013\u6708\u6307\u6807\u662F\u5426\u5B8C\u6210\uFF0C\u540D\u79F0\u5206\u522B\u4E3A1\u6708\u30012\u6708\u30013\u6708\uFF0C2\u6708\u4EFD\u672A\u5B8C\u6210")},COUNTBLANK:{name:_l("\u8BA1\u7A7A\u503C\u6570"),type:"math",title:_l("\u8BA1\u7B97\u53C2\u6570\u4E2D\u5305\u542B\u7684\u7A7A\u503C\u4E2A\u6570"),des:`
      <bb>`+_l("COUNTBLANK(\u6570\u503C1,\u6570\u503C2...)")+`</bb></br>
      <b>`+_l("\u793A\u4F8B\uFF1A=COUNTBLANK(1\u6708,2\u6708,3\u6708) \uFF0C\u7ED3\u679C\uFF1A1")+`</b></br>
        `+_l("\u8BA1\u7B97\u7B2C\u4E00\u5B63\u5EA6\u6307\u6807\u7684\u672A\u5B8C\u6210\u6570\u91CF\uFF0C\u8BE5\u8868\u6709\u4E09\u4E2A\u68C0\u67E5\u6846\u5BF9\u5E941\u30012\u30013\u6708\u6307\u6807\u662F\u5426\u5B8C\u6210\uFF0C\u540D\u79F0\u5206\u522B\u4E3A1\u6708\u30012\u6708\u30013\u6708\uFF0C2\u6708\u4EFD\u672A\u5B8C\u6210")},PRODUCT:{name:_l("\u4E58\u79EF"),type:"math",title:_l("\u8FD4\u56DE\u4E24\u6570\u76F8\u4E58\u7684\u79EF"),des:`
      <bb>`+_l("PRODUCT(\u6570\u503C1,\u6570\u503C2...)")+`</bb></br>
      <b>`+_l("\u793A\u4F8B\uFF1A=PRODUCT(15,4) \uFF0C\u7ED3\u679C\uFF1A60")+`</b></br>
        `+_l("\u8BA1\u7B97 15 \u4E58\u4EE5 4 \u7684\u79EF")},MAX:{name:_l("\u6700\u5927\u503C"),type:"math",title:_l("\u8FD4\u56DE\u4E00\u7EC4\u6570\u5B57\u4E2D\u7684\u6700\u5927\u503C"),des:`
        <bb>`+_l("MAX(\u6570\u503C1,\u6570\u503C2...)")+`</bb></br>
        <b>`+_l("\u793A\u4F8B\uFF1A=MAX(10,20,30) \uFF0C\u7ED3\u679C\uFF1A30")+`</b></br>
        `+_l("\u8FD4\u56DE10,20,30\u4E2D\u6700\u5927\u7684\u6570\u5B57")},MIN:{name:_l("\u6700\u5C0F\u503C"),type:"math",title:_l("\u8FD4\u56DE\u4E00\u7EC4\u6570\u5B57\u4E2D\u7684\u6700\u5C0F\u503C"),des:`
      <bb>`+_l("MIN(\u6570\u503C1,\u6570\u503C2...)")+`</bb></br>
      <b>`+_l("\u793A\u4F8B\uFF1A=MIN(10,20,30) \uFF0C\u7ED3\u679C\uFF1A10")+`</b></br>
    `+_l("\u8FD4\u56DE10,20,30\u4E2D\u6700\u5C0F\u7684\u6570\u5B57")},AVERAGE:{name:_l("\u5E73\u5747\u503C"),type:"math",title:_l("\u8BA1\u7B97\u53C2\u6570\u7684\u5E73\u5747\u503C"),des:`
    <bb>`+_l("AVERAGE(\u6570\u503C1,\u6570\u503C2...)")+`</bb></br>
    <b>`+_l("\u793A\u4F8B\uFF1A=AVERAGE(10,20,30) \uFF0C\u7ED3\u679C\uFF1A20")+`</b></br>
    `+_l("\u8BA1\u7B9710,20,30\u7684\u5E73\u5747\u503C")},SUM:{name:_l("\u6C42\u548C"),type:"math",title:_l("\u8BA1\u7B97\u6570\u5B57\u4E4B\u548C"),des:`
    <bb>`+_l("SUM(\u6570\u503C1,\u6570\u503C2...)")+`</bb></br>
    <b>`+_l("\u793A\u4F8B\uFF1A=SUM(10,20,30) \uFF0C\u7ED3\u679C\uFF1A60")+`</b></br>
    `+_l("\u8BA1\u7B9710,20,30\u7684\u548C")},NUMBER:{name:_l("\u5F3A\u5236\u8F6C\u4E3A\u6570\u503C"),type:"math",title:_l("\u5C06\u6587\u672C\u7B49\u7C7B\u578B\u7684\u503C\u8F6C\u4E3A\u6570\u503C"),des:`
    <bb>`+_l("NUMBER(\u6587\u672C)")+`</bb></br>
    <b>`+_l("\u793A\u4F8B\uFF1A=NUMBER(IF(TRUE(),'-1','0'))+5\uFF0C\u7ED3\u679C\uFF1A4")+`</b></br>
    `+_l("\u5C06 '-1' \u548C 5 \u76F8\u52A0\uFF08if\u8F93\u51FA\u7684\u7ED3\u679C\u7C7B\u578B\u56FA\u5B9A\u4E3A\u6587\u672C\uFF09")},POWER:{name:_l("\u8BA1\u7B97\u6570\u5B57\u7684\u4E58\u5E42"),type:"math",des:`
    <bb>`+_l("POWER(\u5E95\u6570\uFF0C\u6307\u6570)")+`</bb></br>
    <b>`+_l("\u793A\u4F8B\uFF1A=POWER(2,3)\uFF0C\u7ED3\u679C\uFF1A8")+`</b></br>
    `+_l("\u8BA1\u7B972\u76843\u6B21\u65B9")},LOG:{name:_l("\u8BA1\u7B97\u4EE5\u6307\u5B9A\u6570\u5B57\u4E3A\u5E95\u7684\u5BF9\u6570"),type:"math",des:`
    <bb>`+_l("LOG(\u771F\u6570,\u5E95\u6570)")+`</bb></br>
    <b>`+_l("\u793A\u4F8B\uFF1A=LOG(8,2)\uFF0C\u7ED3\u679C\uFF1A3")+`</b></br>
    `+_l("\u8BA1\u7B97\u4EE52\u4E3A\u5E958\u7684\u5BF9\u6570")},REPLACE:{name:_l("\u66FF\u6362\u6587\u672C"),type:"string",title:_l("\u4F7F\u7528\u6307\u5B9A\u5B57\u7B26\u66FF\u6362\u6307\u5B9A\u4F4D\u7F6E\u4E0A\u7684\u5185\u5BB9"),des:"<bb>"+_l("REPLACE(\u539F\u6587\u672C,\u5F00\u59CB\u4F4D\u7F6E,\u5B57\u7B26\u6570,\u66FF\u6362\u6587\u672C)")+`</bb></br>
        <li>`+_l("\u5F00\u59CB\u4F4D\u7F6E\uFF1A1\u4EE3\u8868\u4ECE\u7B2C\u4E00\u4E2A\u5B57\u7B26\u5F00\u59CB\uFF0C\u4E14\u7B2C\u4E00\u4E2A\u5B57\u7B26\u4E5F\u8981\u88AB\u66FF\u6362")+`</li>
        <li>`+_l("\u5B57\u7B26\u6570\uFF1A\u9700\u8981\u66FF\u6362\u7684\u5B57\u7B26\u6570\uFF0C\u5B57\u6BCD\u3001\u6C49\u5B57\u3001\u6570\u5B57\u3001\u7A7A\u683C\u90FD\u8BB0\u4E3A1\u4E2A\u5B57\u7B26")+`</li>
        <b>`+_l("\u793A\u4F8B\uFF1A=REPLACE(+8613534257715,1,3,'') \uFF0C\u7ED3\u679C\uFF1A13534257715")+`</b><br />
        `+_l("\u5C06\u5E26 +86 \u5934\u7684\u624B\u673A\u53F7\u7801\u7F29\u77ED\u4E3A\u7EAF11\u4F4D\u7684\u6570\u5B57\uFF08\u5373\u5C06'+86'\u4E09\u4E2A\u5B57\u7B26\u66FF\u6362\u4E3A\u7A7A\u5373\u53EF\uFF09")},REPT:{name:_l("\u751F\u6210\u91CD\u590D\u5B57\u7B26"),type:"string",title:_l("\u6309\u7167\u6307\u5B9A\u7684\u6B21\u6570\u91CD\u590D\u663E\u793A\u6587\u672C"),des:"<b>"+_l("\u793A\u4F8B\uFF1A=REPT('*',5) \uFF0C\u7ED3\u679C\uFF1A*****")+`</b><br />
        `+_l("\u91CD\u590D\u751F\u62105\u4E2A\u661F\u53F7")},MID:{name:_l("\u4ECE\u4E2D\u95F4\u63D0\u53D6"),type:"string",title:_l("\u8FD4\u56DE\u6587\u672C\u4E2D\u4ECE\u6307\u5B9A\u4F4D\u7F6E\u5F00\u59CB\u6307\u5B9A\u4E2A\u6570\u7684\u5B57\u7B26"),des:`
      <bb>`+_l("MID(\u539F\u6587\u672C,\u5F00\u59CB\u4F4D\u7F6E,\u5B57\u7B26\u6570)")+`</bb><br />
      <li>`+_l("\u5F00\u59CB\u4F4D\u7F6E\uFF1A1\u4EE3\u8868\u4ECE\u7B2C\u4E00\u4E2A\u5B57\u7B26\u5F00\u59CB\uFF0C\u4E14\u7B2C\u4E00\u4E2A\u5B57\u7B26\u4E5F\u8981\u88AB\u63D0\u53D6")+`</li>
      <li>`+_l("\u5B57\u7B26\u6570\uFF1A\u9700\u8981\u63D0\u53D6\u7684\u5B57\u7B26\u6570\uFF0C\u5B57\u6BCD\u3001\u6C49\u5B57\u3001\u6570\u5B57\u3001\u7A7A\u683C\u90FD\u8BB0\u4E3A1\u4E2A\u5B57\u7B26")+`</li>
      <b>`+_l("\u793A\u4F8B\uFF1A=MID($\u7F16\u53F7\u5B57\u6BB5$,5,4) \uFF0C\u7ED3\u679C\uFF1A2021")+`</b><br />
      `+_l("\u4ECE\u89C4\u5F8B\u4E3Aaaaa2021MMDDbbbb\u7684\u7F16\u53F7\u4E2D\u63D0\u53D6\u51FA\u5E74\u4EFD")},RIGHT:{name:_l("\u4ECE\u53F3\u63D0\u53D6"),type:"string",title:_l("\u4ECE\u6587\u672C\u6700\u53F3\u4FA7\u8D77\u63D0\u53D6\u6307\u5B9A\u4E2A\u6570\u7684\u5B57\u7B26"),des:`
        <bb>`+_l("RIGHT(\u539F\u6587\u672C,[\u5B57\u7B26\u6570])")+`</bb></br>
        <li>`+_l("\u5B57\u7B26\u6570\uFF1A\u9700\u8981\u63D0\u53D6\u7684\u5B57\u7B26\u6570\uFF0C\u5B57\u6BCD\u3001\u6C49\u5B57\u3001\u6570\u5B57\u3001\u7A7A\u683C\u90FD\u8BB0\u4E3A1\u4E2A\u5B57\u7B26")+`</li>
        <b>`+_l("\u793A\u4F8B\uFF1A=RIGHT($\u7F16\u53F7\u5B57\u6BB5$,4) \uFF0C\u7ED3\u679C\uFF1A'bbbb'")+`</b><br />
        `+_l("\u4ECE\u89C4\u5F8B\u4E3Aaaaa2021MMDDbbbb\u7684\u7F16\u53F7\u4E2D\u63D0\u53D6\u51FAbbbb")},LEFT:{name:_l("\u4ECE\u5DE6\u63D0\u53D6"),type:"string",title:_l("\u4ECE\u6587\u672C\u6700\u5DE6\u4FA7\u8D77\u63D0\u53D6\u6307\u5B9A\u4E2A\u6570\u7684\u5B57\u7B26"),des:`
        <bb>`+_l("LEFT(\u539F\u6587\u672C,[\u5B57\u7B26\u6570])")+`</bb><br />
        <li>`+_l("\u5B57\u7B26\u6570\uFF1A\u9700\u8981\u63D0\u53D6\u7684\u5B57\u7B26\u6570\uFF0C\u5B57\u6BCD\u3001\u6C49\u5B57\u3001\u6570\u5B57\u3001\u7A7A\u683C\u90FD\u8BB0\u4E3A1\u4E2A\u5B57\u7B26")+`</li>
        <b>`+_l("\u793A\u4F8B\uFF1A=LEFT($\u7F16\u53F7\u5B57\u6BB5$,4) \uFF0C\u7ED3\u679C\uFF1A'aaaa'")+`</b><br />
        `+_l("\u4ECE\u89C4\u5F8B\u4E3Aaaaa2021MMDDbbbb\u7684\u7F16\u53F7\u4E2D\u63D0\u53D6\u51FAaaaa")},UPPER:{name:_l("\u8F6C\u5927\u5199"),type:"string",title:_l("\u5C06\u6587\u672C\u4E2D\u7684\u5C0F\u5199\u5B57\u6BCD\u8F6C\u6362\u4E3A\u5927\u5199\u5B57\u6BCD"),des:`
        <bb>`+_l("UPPER(\u6587\u672C)")+`</bb><br />
        <b>`+_l("\u793A\u4F8B\uFF1A=UPPER(' hello world! ') \uFF0C\u7ED3\u679C\uFF1A' HELLO WORLD! '")+`</b><br />
        `+_l("\u5C06' hello world! '\u8F6C\u6362\u6210\u5927\u5199")},LOWER:{name:_l("\u8F6C\u5C0F\u5199"),type:"string",title:_l("\u5C06\u6587\u672C\u4E2D\u7684\u5927\u5199\u5B57\u6BCD\u8F6C\u6362\u4E3A\u5C0F\u5199\u5B57\u6BCD"),des:`
      <bb>`+_l("LOWER(\u6587\u672C)")+`</bb></br>
      <b>`+_l("\u793A\u4F8B\uFF1A=LOWER(' HELLO WORLD! ') \uFF0C\u7ED3\u679C\uFF1A' hello world! '")+`</b><br />
      `+_l("\u5C06' HELLO WORLD! '\u8F6C\u6362\u6210\u5C0F\u5199")},CONCAT:{name:_l("\u5408\u5E76\u6587\u672C"),type:"string",title:_l("\u5C06\u4E24\u4E2A\u6216\u591A\u4E2A\u6587\u672C\u5408\u5E76\u4E3A\u4E00\u4E2A\u6574\u4F53"),des:`
        <bb>`+_l("CONCAT(\u6587\u672C1,\u6587\u672C2...)")+`</bb><br />
        <b>`+_l("\u793A\u4F8B\uFF1A=CONCAT('aaaa','2021MMDD','bbbb') \uFF0C\u7ED3\u679C\uFF1Aaaaa2021MMDDbbbb")+`</b><br />
        `+_l("\u5408\u5E76aaaa\u30012021MMDD\u3001bbbb\u4E09\u6BB5\u6587\u672C")},STRING:{name:_l("\u5F3A\u5236\u8F6C\u4E3A\u6587\u672C"),type:"string",title:_l("\u5C06\u6570\u503C\u7B49\u7C7B\u578B\u7684\u503C\u8F6C\u4E3A\u6587\u672C"),des:`
        <bb>`+_l("STRING(\u6570\u503C)")+`</bb><br />
        <b>`+_l("\u793A\u4F8B\uFF1A=STRING(-1)+STRING(5)\uFF0C\u7ED3\u679C\uFF1A'-15'")+`</b><br />
        `+_l("\u5C06-1\u30015\u4E24\u4E2A\u6570\u503C\u62FC\u63A5\u5728\u4E00\u8D77")},TRIM:{name:_l("\u5220\u9664\u7A7A\u683C"),type:"string",title:_l("\u5220\u9664\u6587\u672C\u9996\u5C3E\u7684\u7A7A\u683C"),des:`
        <bb>`+_l("TRIM(\u6587\u672C)")+`</bb><br />
        <b>`+_l("\u793A\u4F8B\uFF1A=TRIM(' \u5357\u4EAC ')\uFF0C\u7ED3\u679C\uFF1A'\u5357\u4EAC'")+`</b><br />
        `+_l("\u5220\u9664\u9996\u5C3E\u7A7A\u683C")},CLEAN:{name:_l("\u5220\u9664\u6587\u672C\u4E2D\u6240\u6709\u7A7A\u683C"),type:"string",title:_l("\u5220\u9664\u6587\u672C\u4E2D\u6240\u6709\u7A7A\u683C"),des:`
        <bb>`+_l("CLEAN(\u6587\u672C)")+`</bb><br />
        <b>`+_l(`\u793A\u4F8B\uFF1A=CLEAN('135 3425 7715')\uFF0C\u7ED3\u679C\uFF1A"13534257715"`)+`</b><br />
        `+_l("\u5220\u9664\u624B\u673A\u53F7\u7801\u5B57\u6BB5\u4E2D\u95F4\u7684\u7A7A\u683C")},IF:{name:_l("\u6761\u4EF6\u8BED\u53E5"),type:"flow",title:_l("\u8BBE\u7F6E\u5224\u65AD\u6761\u4EF6\uFF0C\u7136\u540E\u6839\u636E\u5224\u65AD\u7ED3\u679CTRUE\u6216FALSE\u6765\u8FD4\u56DE\u4E0D\u540C\u7684\u6587\u672C"),des:`
        <bb>`+_l("IF(\u8868\u8FBE\u5F0F,\u6210\u7ACB\u65F6\u8F93\u51FA,\u4E0D\u6210\u7ACB\u65F6\u8F93\u51FA)")+`</bb><br />
        <li>`+_l("\u65E0\u8BBA\u8868\u8FBE\u5F0F\u6210\u7ACB\u6216\u4E0D\u6210\u7ACB\u65F6\uFF0C\u8F93\u51FA\u7ED3\u679C\u56FA\u5B9A\u4E3A\u6587\u672C\u7C7B\u578B")+`</li>
        <b>`+_l("\u793A\u4F8B\uFF1A=IF($\u5206\u6570$>=60,'\u53CA\u683C','\u4E0D\u53CA\u683C')\uFF0C\u7ED3\u679C\uFF1A'\u53CA\u683C'")+`</b><br />
        `+_l("\u5982\u679C\u5206\u6570\u5927\u4E8E\u7B49\u4E8E60\u5206\uFF0C\u5219\u8BB0\u4E3A\u53CA\u683C\uFF0C\u5426\u5219\u8BB0\u4E3A\u4E0D\u53CA\u683C")},OR:{name:_l("\u6C42\u6216"),type:"flow",title:_l("\u5224\u65AD\u591A\u4E2A\u6761\u4EF6\u4E2D\u662F\u5426\u6709\u4EFB\u610F\u4E00\u4E2A\u6761\u4EF6\u6210\u7ACB\uFF0C\u53EA\u8981\u6709\u4E00\u4E2A\u53C2\u6570\u4E3A\u903B\u8F91\u503CTRUE\uFF0COR\u51FD\u6570\u5C31\u8FD4\u56DETRUE\u3002\u5982\u679C\u6240\u6709\u53C2\u6570\u90FD\u4E3A\u903B\u8F91\u503CFALSE\uFF0COR\u51FD\u6570\u624D\u8FD4\u56DEFALSE"),des:`
        <bb>`+_l("OR(\u8868\u8FBE\u5F0F1,\u8868\u8FBE\u5F0F2,...)")+`</bb><br />
        <b>`+_l("\u793A\u4F8B\uFF1A=OR($\u8BED\u6587\u5206\u6570$<=60,$\u82F1\u8BED\u5206\u6570$<=60,$\u6570\u5B66\u5206\u6570$<=60) \uFF0C\u7ED3\u679C\uFF1ATRUE")+`</b><br />
        `+_l("\u9A8C\u8BC1\u8BED\u6570\u82F1\u4E09\u95E8\u8BFE\u7A0B\u662F\u5426\u6709\u4EFB\u4F55\u4E00\u95E8\u6CA1\u6709\u53CA\u683C\uFF08\u5B9E\u9645\u53EA\u6709\u4E24\u95E8\u53CA\u683C\uFF09")},AND:{name:_l("\u6C42\u540C"),type:"flow",title:_l("\u5224\u65AD\u591A\u4E2A\u6761\u4EF6\u662F\u5426\u540C\u65F6\u6210\u7ACB\uFF0C\u5982\u679C\u6240\u6709\u53C2\u6570\u90FD\u4E3A\u903B\u8F91\u503CTRUE\uFF0CAND\u51FD\u6570\u5C06\u8FD4\u56DETRUE\uFF0C\u53EA\u8981\u5176\u4E2D\u4E00\u4E2A\u53C2\u6570\u4E3A\u903B\u8F91\u503CFALSE\uFF0CAND\u51FD\u6570\u5C31\u8FD4\u56DEFALSE"),des:`
        <bb>`+_l("AND(\u8868\u8FBE\u5F0F1,\u8868\u8FBE\u5F0F2,...)")+`</bb><br />
        <b>`+_l("\u793A\u4F8B\uFF1A=AND($\u8BED\u6587\u5206\u6570$>=60,$\u82F1\u8BED\u5206\u6570$>=60,$\u6570\u5B66\u5206\u6570$>=60) \uFF0C\u7ED3\u679C\uFF1AFALSE")+`</b><br />
        `+_l("\u9A8C\u8BC1\u8BED\u6570\u82F1\u4E09\u95E8\u8BFE\u7A0B\u662F\u5426\u90FD\u53CA\u683C\uFF08\u5B9E\u9645\u53EA\u6709\u4E24\u95E8\u53CA\u683C\uFF09")},NOT:{name:_l("\u6C42\u53CD"),type:"flow",title:_l("\u5BF9\u903B\u8F91\u503C\u6C42\u53CD\u3002\u5982\u679C\u903B\u8F91\u503C\u4E3AFALSE\uFF0CNOT\u51FD\u6570\u5C06\u8FD4\u56DETRUE\uFF1B\u5982\u679C\u903B\u8F91\u503C\u4E3ATRUE\uFF0CNOT\u51FD\u6570\u5C06\u8FD4\u56DEFALSE"),des:`
        <bb>`+_l("NOT(\u8868\u8FBE\u5F0F)")+`</bb><br />
        <b>`+_l("\u793A\u4F8B\uFF1A=NOT($\u5206\u6570$==60) \uFF0C\u7ED3\u679C\uFF1ATRUE")+`</b><br />
        `+_l("\u5BF9\u6210\u7EE9\u662F\u5426\u521A\u597D\u7B49\u4E8E60\u5206\u6C42\u53CD\uFF08\u5B9E\u5219\u521A\u597D60\u5206\uFF09")},FALSE:{name:_l("\u8FD4\u56DE false"),type:"flow",title:_l("\u76F4\u63A5\u8FD4\u56DE\u903B\u8F91\u503CFALSE"),des:"<bb>FALSE()</bb></br><b>"+_l("\u793A\u4F8B\uFF1A=FALSE() \uFF0C\u7ED3\u679C\uFF1AFALSE")+"</b>"},TRUE:{name:_l("\u8FD4\u56DEtrue"),type:"flow",title:_l("\u76F4\u63A5\u8FD4\u56DE\u903B\u8F91\u503CTRUE"),des:"<bb>TRUE()</bb></br><b>"+_l("\u793A\u4F8B\uFF1A=TRUE() \uFF0C\u7ED3\u679C\uFF1ATRUE")+"</b>"},ISBLANK:{name:_l("\u5224\u65AD\u4E3A\u7A7A"),type:"flow",title:_l("\u5224\u65AD\u5355\u5143\u683C\u662F\u5426\u4E3A\u7A7A\uFF0C\u5982\u679C\u4E3A\u7A7A\uFF0C\u8FD4\u56DETRUE\uFF0C\u5426\u5219\u8FD4\u56DEFALSE"),des:`
        <bb>`+_l("ISBLANK(\u6587\u672C)")+`</bb><br />
        <b>`+_l("\u793A\u4F8B\uFF1A=ISBLANK($\u5E74\u9F84$)\uFF0C\u7ED3\u679C\uFF1ATRUE")+`</b><br />
        `+_l("\u5224\u65AD\u5E74\u9F84\u5B57\u6BB5\u662F\u5426\u4E3A\u7A7A")},ENCODEURI:{name:_l("URI \u7F16\u7801"),type:"advanced",title:_l("\u5C06\u6587\u672C\u8F6C\u6362\u4E3AURI\u7F16\u7801\uFF0C\u53EF\u4EE5\u5BF9\u5305\u542B\u4E2D\u6587\u5B57\u7B26\u7684\u7F51\u5740\u8FDB\u884C\u7F16\u7801"),des:`
        `+_l("\u4E0D\u8F6C\u4E49")+` , / ? : @ & = + $ # <br />
        <bb>`+_l("ENCODEURL(\u6587\u672C)")+`</bb><br />
        <b>`+_l("\u793A\u4F8B\uFF1A=ENCODEURI('name=\u7CFB\u7EDF')\uFF0C\u7ED3\u679C\uFF1A'name=%E7%B3%BB%E7%BB%9F'")+`</b><br />
        `+_l("\u5BF9\u6587\u672C\u201Cname=\u7CFB\u7EDF\u201D\u8FDB\u884C\u7F16\u7801")},DECODEURI:{name:_l("URI \u89E3\u7801"),type:"advanced",title:_l("\u5C06URI\u7F16\u7801\u8F6C\u6362\u4E3A\u6587\u672C\uFF0C\u53EF\u4EE5\u5BF9\u5305\u542B\u4E2D\u6587\u5B57\u7B26\u7684\u7F51\u5740\u8FDB\u884C\u89E3\u7801"),des:`
        <bb>`+_l("DECODEURI(\u6587\u672C)")+`</bb><br />
        <b>`+_l(`\u793A\u4F8B\uFF1A=DECODEURI('name=%E7%B3%BB%E7%BB%9F')\uFF0C\u7ED3\u679C\uFF1A"name=\u7CFB\u7EDF"`)+`</b><br />
        `+_l("\u5BF9\u6587\u672C\u201Cname=%E7%B3%BB%E7%BB%9F\u201D\u8FDB\u884C\u89E3\u7801")},ENCODEURICOMPONENT:{name:_l("URI \u7EC4\u4EF6\u7F16\u7801"),type:"advanced",title:_l("\u5C06\u6587\u672C\u8F6C\u6362\u4E3AURI\u7F16\u7801\uFF0C\u53EF\u4EE5\u5BF9\u5305\u542B\u4E2D\u6587\u5B57\u7B26\u7684\u7F51\u5740\u8FDB\u884C\u7F16\u7801"),des:`
        \u8F6C\u4E49 , / ? : @ & = + $ # <br />
        <bb>`+_l("ENCODEURL(\u6587\u672C)")+`</bb><br />
        <b>`+_l("\u793A\u4F8B\uFF1A=ENCODEURI('name=\u7CFB\u7EDF')\uFF0C\u7ED3\u679C\uFF1A'name%3D%E7%B3%BB%E7%BB%9F'")+`</b><br />
        `+_l("\u5BF9\u6587\u672C\u201Cname=\u7CFB\u7EDF\u201D\u8FDB\u884C\u7F16\u7801")},DECODEURICOMPONENT:{name:_l("URI \u7EC4\u4EF6\u89E3\u7801"),type:"advanced",title:_l("\u5C06URI\u7F16\u7801\u8F6C\u6362\u4E3A\u6587\u672C\uFF0C\u53EF\u4EE5\u5BF9\u5305\u542B\u4E2D\u6587\u5B57\u7B26\u7684\u7F51\u5740\u8FDB\u884C\u89E3\u7801"),des:`
        <bb>`+_l("DECODEURI(\u6587\u672C)")+`</bb><br />
        <b>`+_l(`\u793A\u4F8B\uFF1A=DECODEURI('name%3D%E7%B3%BB%E7%BB%9F')\uFF0C\u7ED3\u679C\uFF1A"name=\u7CFB\u7EDF"`)+`</b><br />
        `+_l("\u5BF9\u6587\u672C\u201Cname%3D%E7%B3%BB%E7%BB%9F\u8FDB\u884C\u89E3\u7801")},DISTANCE:{name:_l("\u8BA1\u7B97\u4E24\u5730\u95F4\u7684\u8DDD\u79BB"),type:"advanced",title:_l("\u8BA1\u7B97\u4E24\u5730\u95F4\u7684\u8DDD\u79BB\uFF0C\u7ED3\u679C\u5355\u4F4D\u4E3A\u5343\u7C73"),des:`
        <bb>`+_l("DISTANCE(\u5B9A\u4F4D\u5B57\u6BB51,\u5B9A\u4F4D\u5B57\u6BB52)")+`</bb><br />
        <li>`+_l("\u5B9A\u4F4D\u5B57\u6BB5\uFF1A\u5982\u679C\u9700\u8981\u8BBE\u4E3A\u9759\u6001\u503C\uFF0C\u683C\u5F0F\u4E3A\u201C\u7ECF\u5EA6,\u7EF4\u5EA6\u201D")+`</li>
        <b>`+_l('\u793A\u4F8B\uFF1A=DISTANCE("121.4224,31.1785",\u76EE\u7684\u5730\u5B9A\u4F4D)\uFF0C\u7ED3\u679C\uFF1A2.1358(km)')+`</b><br />
        `+_l("\u8BA1\u7B97\u4E0A\u6D77\u5E02\u7B2C\u516D\u4EBA\u6C11\u533B\u9662\u5230\u6F15\u6CB3\u6CFE\u667A\u6C47\u56ED\u7684\u8DDD\u79BB")},FIND:{name:_l("\u67E5\u627E\u5355\u4E2A\u6587\u672C"),type:"string",title:_l("\u8FD4\u56DE\u6307\u5B9A\u95F4\u9694\u7B26\u4E4B\u95F4\u7684\u6587\u672C\u5185\u5BB9\uFF08\u53EA\u8FD4\u56DE\u4ECE\u5DE6\u5230\u53F3\u67E5\u627E\u5230\u7684\u7B2C\u4E00\u4E2A\uFF09"),des:`
        <bb>`+_l("FIND(\u539F\u6587\u672C, \u5F00\u59CB\u5B57\u7B26, \u7ED3\u675F\u5B57\u7B26)")+`</bb><br />
        <li>`+_l("\u5F00\u59CB\u5B57\u7B26\uFF1A\u5982\u679C\u662F\u7A7A\uFF0C\u8868\u793A\u4ECE\u7B2C\u4E00\u4E2A\u5B57\u7B26\u5F00\u59CB\u8FD4\u56DE")+`</li>
        <li>`+_l("\u7ED3\u675F\u5B57\u7B26\uFF1A\u5982\u679C\u662F\u7A7A\uFF0C\u8868\u793A\u8FD4\u56DE\u76F4\u81F3\u6700\u540E\u4E00\u4E2A\u5B57\u7B26")+`</li>
        <b>`+_l('\u793A\u4F8B\uFF1A=FIND(\u201C1\u592923\u5C0F\u65F615\u5206\u949F\u201D,"","\u5929")\uFF0C\u7ED3\u679C\uFF1A1')+`</b><br />
        `+_l("\u83B7\u53D6\u65E5\u671F\u65F6\u95F4\u8BA1\u7B97\u7ED3\u679C\u7684\u201C\u5929\u201D")},FINDA:{name:_l("\u67E5\u627E\u591A\u4E2A\u6587\u672C"),type:"string",title:_l("\u8FD4\u56DE\u6307\u5B9A\u95F4\u9694\u7B26\u4E4B\u95F4\u7684\u6587\u672C\u5185\u5BB9\uFF0C\u4ECE\u5DE6\u5230\u53F3\u67E5\u627E\u6240\u6709\u5185\u5BB9\uFF0C\u5E76\u5C06\u7ED3\u679C\u6253\u5305\u6210\u6570\u7EC4\u8FD4\u56DE"),des:`
        <bb>`+_l("FIND(\u539F\u6587\u672C, \u5F00\u59CB\u5B57\u7B26, \u7ED3\u675F\u5B57\u7B26)")+`</bb><br />
        <li>`+_l("\u5F00\u59CB\u5B57\u7B26\uFF1A\u5982\u679C\u662F\u7A7A\uFF0C\u5C06\u65E0\u6CD5\u5F97\u5230\u7ED3\u679C")+`</li>
        <li>`+_l("\u7ED3\u675F\u5B57\u7B26\uFF1A\u5982\u679C\u662F\u7A7A\uFF0C\u5C06\u65E0\u6CD5\u5F97\u5230\u7ED3\u679C")+`</li>
        <b>`+_l('\u793A\u4F8B\uFF1A=FINDA(\u201C(X2022)2f8f0af(NZP001)\u201D,"(",")")\uFF0C\u7ED3\u679C\uFF1AX2022,NZP001')+`</b><br />
        `+_l("\u83B7\u53D6\u6761\u7801\u4E2D\u4E24\u7EC4\u62EC\u53F7\u95F4\u7684\u5185\u5BB9\uFF0C\u5E76\u5199\u5165\u53E6\u4E00\u4E2A\u6587\u672C\u5B57\u6BB5\u4E2D")},SPLIT:{name:_l("\u5206\u5272\u6587\u672C"),type:"string",title:_l("\u6309\u7167\u6307\u5B9A\u7684\u95F4\u9694\u7B26\u5206\u5272\u6587\u672C\uFF0C\u5C06\u5206\u5272\u7ED3\u679C\u6253\u5305\u6210\u6570\u7EC4\u8FD4\u56DE"),des:`
        <bb>`+_l("SPLIT(\u539F\u6587\u672C,\u95F4\u9694\u7B26)")+`</bb><br />
        <li>`+_l("\u95F4\u9694\u7B26\uFF1A\u5982\u679C\u4E3A\u7A7A\uFF0C\u5C06\u5206\u5272\u6BCF\u4E00\u4E2A\u5B57\u7B26")+`</li>
        <b>`+_l(`\u793A\u4F8B\uFF1A=SPLIT("HX045-SZ190-NZ021-LS097","-")\uFF0C\u7ED3\u679C\uFF1A'HX045,SZ190,NZ021,LS097'`)+`</b><br />
        `+_l("\u4EE5\u201C-\u201D\u5206\u52721\u7EC4\u5E264\u4E2A\u7269\u6599ID\u7684\u6587\u672C\uFF0C\u5E76\u5199\u5165\u53E6\u4E00\u4E2A\u6587\u672C\u5B57\u6BB5\u4E2D")},JOIN:{name:_l("\u5408\u5E76\u6587\u672C"),type:"string",title:_l("\u6309\u7167\u6307\u5B9A\u7684\u95F4\u9694\u7B26\u628A\u6570\u7EC4\u5143\u7D20\u62FC\u63A5\u6210\u6587\u672C"),des:`
        <bb>`+_l("JOIN(\u6570\u7EC4,\u95F4\u9694\u7B26)")+`</bb><br />
        <b>`+_l('\u793A\u4F8B\uFF1A=JOIN(\u90E8\u95E8\u5B57\u6BB5,"-")\uFF0C\u7ED3\u679C\uFF1A"\u4EA7\u54C1\u90E8-\u9500\u552E\u90E8-\u7814\u53D1\u90E8"')+`</b><br />
        `+_l("\u628A\u90E8\u95E8\u5B57\u6BB5\u91CC\u7684\u591A\u4E2A\u90E8\u95E8\u62FC\u63A5\u6210\u4E00\u4E2A\u5B57\u7B26\u4E32\u6574\u4F53")},INCLUDE:{name:_l("\u662F\u5426\u5305\u542B"),type:"flow",title:_l("\u5224\u65AD\u4E00\u4E2A\u6587\u672C\u4E2D\u662F\u5426\u5305\u542B\u6307\u5B9A\u7684\u5B57\u7B26\u5185\u5BB9"),des:`
        <bb>`+_l("INCLUDE(\u539F\u6587\u672C,\u68C0\u7D22\u7684\u5B57\u7B26)")+`</bb><br />
        <b>`+_l(`\u793A\u4F8B\uFF1A=INCLUDE("\u4E0A\u6D77\u5E02\u95F5\u884C\u533A\u94A6\u5DDE\u5317\u8DEF",'\u95F5\u884C')\uFF0C\u7ED3\u679C\uFF1ATRUE`)+`</b><br />
        `+_l('\u5224\u65AD\u6587\u672C\u91CC\u662F\u5426\u5305\u542B"\u95F5\u884C"')},GETPOSITION:{name:_l("\u8FD4\u56DE\u5B9A\u4F4D\u76F8\u5173\u4FE1\u606F"),type:"advanced",title:_l("\u4ECE\u67D0\u4E2A\u5B9A\u4F4D\u5B57\u6BB5\u8FD4\u56DE\u4F4D\u7F6E\u6807\u9898\u3001\u8BE6\u7EC6\u5730\u5740\u6216\u7ECF\u7EAC\u5EA6"),des:`
        <bb>`+_l("GETPOSITION(\u5B9A\u4F4D\u5B57\u6BB5,\u9700\u8981\u7684\u4FE1\u606F)")+`</bb><br />
        <li>`+_l("\u9700\u8981\u7684\u4FE1\u606F\uFF1A'title'-\u4F4D\u7F6E\u6807\u9898\uFF1B'address'-\u8BE6\u7EC6\u5730\u5740\uFF1B'x'-\u7ECF\u5EA6\uFF1B'y'-\u7EAC\u5EA6\uFF1B'x,y'-\u7ECF\u7EAC\u5EA6")+`</li>
        <b>`+_l("\u793A\u4F8B\uFF1A=GETPOSITION(\u6253\u5361\u5730\u70B9,'address')\uFF0C\u7ED3\u679C\uFF1A'\u4E0A\u6D77\u5E02\u5F90\u6C47\u533A\u6F15\u6CB3\u6CFE\u65B0\u5174\u6280\u672F\u5F00\u53D1\u533A\u4E0A\u6D77\u6F15\u6CB3\u6CFE\u5F00\u53D1\u533A\u667A\u6C47\u56ED'")+`</b><br />
        `+_l("\u8FD4\u56DE\u6253\u5361\u5730\u70B9\u7684\u8BE6\u7EC6\u5730\u5740")},COUNTCHAR:{name:_l("\u8BA1\u5B57\u7B26\u6570"),type:"math",title:_l("\u8BA1\u7B97\u6587\u672C\u5B57\u6BB5\u7684\u5B57\u7B26\u6570\u91CF"),des:`
        <bb>`+_l("COUNTCHAR(\u6587\u672C)")+`</bb><br />
        <b>`+_l("\u793A\u4F8B\uFF1A=COUNTCHAR(\u6807\u9898)\uFF0C\u7ED3\u679C\uFF1A12")+`</b><br />
        `+_l("\u8BA1\u7B97\u6807\u9898\u201C\u901A\u8FC7\u51FD\u6570\u8BA1\u7B97\u8D4B\u5B57\u6BB5\u9ED8\u8BA4\u503C\u201D\u7684\u5B57\u6570")}},functionDetails=lodash__WEBPACK_IMPORTED_MODULE_7___default().pick(functionDetailsMap,lodash__WEBPACK_IMPORTED_MODULE_7___default().uniqBy(["SUM","AVERAGE","MIN","MAX","PRODUCT","COUNTA","ABS","INT","MOD","ROUND","ROUNDUP","ROUNDDOWN","CEILING","FLOOR","POWER","LOG","COUNTIF","SUMIF","COUNTBLANK","COUNTARRAY","SCORE","COUNTCHAR","RANDBETWEEN","NUMBER","CONCAT","REPLACE","MID","LEFT","RIGHT","TRIM","CLEAN","CLEAN","REPT","LOWER","UPPER","FIND","FINDA","SPLIT","JOIN","STRING","IF","OR","AND","NOT","ISBLANK","INCLUDE","FALSE","TRUE","ENCODEURI","ENCODEURICOMPONENT","DECODEURI","DECODEURICOMPONENT","DISTANCE","GETPOSITION"].concat(babel_runtime_core_js_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(functionDetailsMap))));function checkTypeSupportForFunction(lt){if([pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.TEXT,pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.NUMBER,pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.MONEY,pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.EMAIL,pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.MOBILE_PHONE,pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.DATE,pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.DATE_TIME,pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.TIME,pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.FLAT_MENU,pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.MULTI_SELECT,pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.DROP_DOWN,pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.USER_PICKER,pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.DEPARTMENT,pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.ORG_ROLE,pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.AREA_PROVINCE,pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.AREA_CITY,pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.AREA_COUNTY,pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.SWITCH,pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.SUB_LIST,pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.LOCATION,pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.CRED].indexOf(lt.type)>-1)return!0;if(lt.type===pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_9__.DN.RELATE_SHEET)return!(0,src_pages_widgetConfig_util__WEBPACK_IMPORTED_MODULE_10__.YU)(lt)}},11032:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(63239),babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_0__),babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(72444),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(96486),lodash__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__),dayjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(27484),dayjs__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_3__),query_string__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(17563);if(!/^(1887|7596|7798)$/.test(__webpack_require__.j))var src_pages_worksheet_util_purejs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1178);if(!/^(1887|7596|7798)$/.test(__webpack_require__.j))var src_pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(86674);if(!/^(1887|7596|7798)$/.test(__webpack_require__.j))var _enum__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(44265);if(!/^(1887|7596|7798)$/.test(__webpack_require__.j))var worksheet_util__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(89499);if(!/^(1887|7596|7798)$/.test(__webpack_require__.j))var src_util__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(15577);function replaceControlIdToValue(lt,Te,t){if(lt=lt.replace(/\$(.+?)\$/g,function(ce){var g=ce.match(/\$(.+?)\$/)[1],p=lodash__WEBPACK_IMPORTED_MODULE_2___default().find(Te,function(te){return te.controlId===g});if(p){var L=(0,src_pages_worksheet_util_purejs__WEBPACK_IMPORTED_MODULE_5__.WB)(p);return typeof L=="string"&&!t?L="'"+L.replace(/'/g,"\\'").replace(/\n/g,"\\n")+"'":(typeof L>"u"?"undefined":(0,babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_1__.default)(L))==="object"&&(L=babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_0___default()(L)),typeof L=="string"?L:"("+L+")"}}),lt.indexOf("SYSTEM_URL_PARAMS")>-1)try{lt="var SYSTEM_URL_PARAMS="+babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_0___default()(query_string__WEBPACK_IMPORTED_MODULE_4__.parse(location.search))+";"+lt}catch(ce){}return lt}function formatFunctionResult(lt,Te){var t=lt.type,ce=Te;switch(t){case src_pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_6__.DN.TEXT:ce=lodash__WEBPACK_IMPORTED_MODULE_2___default().isUndefined(ce)?"":ce;break;case src_pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_6__.DN.SWITCH:ce=String(ce).toLowerCase()==="true"?1:0;break;case src_pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_6__.DN.NUMBER:case src_pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_6__.DN.MONEY:try{ce=(ce||"").toString().match(/^-?[\d\.]+/)[0],lodash__WEBPACK_IMPORTED_MODULE_2___default().isNumber(Number(ce))&&!lodash__WEBPACK_IMPORTED_MODULE_2___default().isNaN(Number(ce))&&(ce=String(Number((0,src_util__WEBPACK_IMPORTED_MODULE_7__.FH)(ce,10))))}catch(te){}break;case src_pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_6__.DN.DATE:ce=ce&&dayjs__WEBPACK_IMPORTED_MODULE_3___default()(ce).isValid()?dayjs__WEBPACK_IMPORTED_MODULE_3___default()(ce).format("YYYY-MM-DD"):void 0;break;case src_pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_6__.DN.DATE_TIME:ce=ce&&dayjs__WEBPACK_IMPORTED_MODULE_3___default()(ce).isValid()?dayjs__WEBPACK_IMPORTED_MODULE_3___default()(ce).format("YYYY-MM-DD HH:mm:ss"):void 0;break;case src_pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_6__.DN.FLAT_MENU:case src_pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_6__.DN.MULTI_SELECT:case src_pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_6__.DN.DROP_DOWN:var g=(lt.options||[]).filter(function(te){return!te.isDeleted}),p=(lodash__WEBPACK_IMPORTED_MODULE_2___default().isString(ce)?ce.split(","):[].concat(ce)).map(function(te){return lodash__WEBPACK_IMPORTED_MODULE_2___default().get(lodash__WEBPACK_IMPORTED_MODULE_2___default().find(g,function(R){return R.value===te}),"key")}).filter(lodash__WEBPACK_IMPORTED_MODULE_2___default().identity);ce=lodash__WEBPACK_IMPORTED_MODULE_2___default().isEmpty(p)?"":babel_runtime_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_0___default()(p);break;case src_pages_widgetConfig_config_widget__WEBPACK_IMPORTED_MODULE_6__.DN.TIME:var L=lodash__WEBPACK_IMPORTED_MODULE_2___default().includes(["6","9"],lt.unit)?"HH:mm:ss":"HH:mm";ce=ce&&dayjs__WEBPACK_IMPORTED_MODULE_3___default()(ce).isValid()?dayjs__WEBPACK_IMPORTED_MODULE_3___default()(ce).format(L):void 0;break}return ce}function __WEBPACK_DEFAULT_EXPORT__(control,formData){var _ref=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},update=_ref.update,type=_ref.type,run=_enum__WEBPACK_IMPORTED_MODULE_8__.wk,expressionData={};try{expressionData=JSON.parse(control.advancedSetting.defaultfunc)}catch(lt){}var expression=lodash__WEBPACK_IMPORTED_MODULE_2___default().get(expressionData,"expression"),fnType=lodash__WEBPACK_IMPORTED_MODULE_2___default().get(expressionData,"type");if(!expression)throw new Error("expression is undefined");var existDeletedControl=void 0,existUndefinedFunction=void 0;return expression=expression.replace(/([A-Z]+)(?=\()/g,function(lt){return run[lt]?"run."+lt:(existUndefinedFunction=!0,"E_R_R_O_R")}),existUndefinedFunction?{error:"EXIST_UNDEFINED_FUNCTION",expression}:(expression=replaceControlIdToValue(expression,formData),!expression||existDeletedControl?{error:"EXIST_UNDEFINED_CONTROL_OR_VALUE",expression}:function(){try{var result=void 0;if(window.isIphone&&fnType==="javascript"){result=eval("function run() { "+expression+" } run()"),update(lodash__WEBPACK_IMPORTED_MODULE_2___default().isUndefined(result)||lodash__WEBPACK_IMPORTED_MODULE_2___default().isNaN(result)||lodash__WEBPACK_IMPORTED_MODULE_2___default().isNull(result)?"":String(formatFunctionResult(control,result)));return}return type==="lib"?result=eval(fnType==="javascript"?"function run() { "+expression+" } run()":expression):fnType==="javascript"?result=(0,worksheet_util__WEBPACK_IMPORTED_MODULE_9__.HP)(expression,function(lt,Te){lt?console.log(lt):update(lodash__WEBPACK_IMPORTED_MODULE_2___default().isUndefined(Te)||lodash__WEBPACK_IMPORTED_MODULE_2___default().isNaN(Te)||lodash__WEBPACK_IMPORTED_MODULE_2___default().isNull(Te)?"":String(formatFunctionResult(control,Te)))},{timeout:1e3}):result=eval(expression),result=formatFunctionResult(control,result),lodash__WEBPACK_IMPORTED_MODULE_2___default().isNaN(result)&&(result=void 0),type==="lib"&&typeof result>"u"&&(result=""),{value:result,expression}}catch(lt){return{error:lt,expression}}}())}},16947:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>Ee,F:()=>he});var ce=t(52945),g=t.n(ce),p=t(85315),L=t(69288),te=t(31546),R=t(70264),y=t(47426),a=t(62521),r=t(16469),o=t(54208),d=t(63239),Z=t.n(d),H=t(85105),U=t.n(H),f=t(99663),V=t(22600),C=t(49135),O=t(93196),n=t(88239),s=t(67294),j=t(29314),A=t(10897),S=t(57467),I=t(94914),c=t(39612),q=t(5420),b=t(42185),k=t(88106),ee=t(12424),re=t(86735),ie=t(93002),le=t(71893),E=t(91088),w=t(49365),K=t(7145),N=t.n(K),F=t(96486),h=t.n(F),z=(0,re.Z)([`
  .footerBtn {
    text-align: right;
    margin-top: 32px;
  }
  .title {
    margin: 24px 0 6px 0;
  }
  .ming.Dropdown,
  .ming.Menu {
    width: 100%;
    &.disabled {
      background-color: #f5f5f5;
      .Dropdown--input {
        &:hover {
          border-color: #ccc;
        }
      }
    }
  }
  .ming.Menu {
    max-height: 160px;
  }
`],[`
  .footerBtn {
    text-align: right;
    margin-top: 32px;
  }
  .title {
    margin: 24px 0 6px 0;
  }
  .ming.Dropdown,
  .ming.Menu {
    width: 100%;
    &.disabled {
      background-color: #f5f5f5;
      .Dropdown--input {
        &:hover {
          border-color: #ccc;
        }
      }
    }
  }
  .ming.Menu {
    max-height: 160px;
  }
`]),X=[{text:_l("\u5E94\u7528"),key:"app"},{text:_l("\u5DE5\u4F5C\u8868"),key:"sheet"}],B={app:"appId",sheet:"sheetId"},x=le.ZP.div(z);function Q(Y){var oe=Y.onClose,ve=Y.onOk,ue=Y.globalSheetInfo,pe=ue===void 0?{}:ue,Se=pe.appId,ye=pe.projectId,J=pe.worksheetId,me=(0,ie.Z)({app:[],sheet:[]}),be=(0,ee.Z)(me,2),xe=be[0],Ae=be[1],Ne=(0,ie.Z)(!0),Me=(0,ee.Z)(Ne,2),Fe=Me[0],Be=Me[1],we=(0,ie.Z)((0,n.default)({appId:Se,sheetId:"",appName:""},h().pick(Y,["appId","sheetId","appName"]))),Ie=(0,ee.Z)(we,2),ge=Ie[0],Re=Ie[1],Pe=ge.appId,ke=ge.sheetId,We=ge.appName,Ve=We===void 0?"":We,it=function(pt){var ot=xe[pt]||[];return ge[B[pt]]&&!h().find(ot,function(vt){return vt.value===ge[B[pt]]})};return(0,s.useEffect)(function(){w.Z.getAppForManager({projectId:ye,type:0}).then(function(Ge){var pt=function(){var vt=h().findIndex(Ge,function(st){return st.appId===pe.appId}),At=vt>-1?Ge[vt]:[],yt=[At].concat(N()(Ge,{$splice:[[vt,1]]}));return yt.length<1?[]:yt.map(function(st){var St=st.appName,Qe=st.appId;return Qe===Se?{text:_l("%0  (\u672C\u5E94\u7528)",St),value:Qe}:{text:St,value:Qe}})};Ae({app:pt()})})},[]),(0,s.useEffect)(function(){Pe&&E.Z.getWorksheetsByAppId({appId:Pe,type:0}).then(function(Ge){Ae({sheet:Ge.map(function(pt){var ot=pt.workSheetId,vt=pt.workSheetName;return ot===J?{text:_l("%0  (\u672C\u8868)",vt),value:ot}:{text:vt,value:ot}})}),Be(!1)})},[Pe]),s.createElement(L.Z,{width:560,visible:!0,title:s.createElement("span",{className:"Bold"},_l("\u9009\u62E9\u5DE5\u4F5C\u8868")),footer:null,onCancel:oe},s.createElement(x,null,X.map(function(Ge){var pt=Ge.text,ot=Ge.key,vt=Ge.disabled,At=Ge.filter,yt=At===void 0?function(st){return st}:At;return s.createElement("div",{key:ot},s.createElement("div",{className:"title Bold"},pt),s.createElement(te.Z,{value:ge[B[ot]]||void 0,border:!0,openSearch:!0,isAppendToBody:!0,placeholder:it(ot)&&!Fe?s.createElement("span",{className:"Red"},_l("%0\u5DF2\u5220\u9664",ot==="app"?"\u5E94\u7528":"\u5DE5\u4F5C\u8868")):_l("\u8BF7\u9009\u62E9"),disabled:vt,data:h().filter(xe[ot],yt),onChange:function(St){Re(ot==="app"?{appId:St,sheetId:"",appName:h().get(h().find(xe.app||[],function(Qe){return Qe.value===St}),"text")}:(0,k.default)({},B[ot],St))}}))}),s.createElement("div",{className:"footerBtn"},s.createElement(b.ZP,{type:"link",onClick:oe},_l("\u53D6\u6D88")),s.createElement(b.ZP,{type:"primary",disabled:!ke,onClick:function(){ve({sheetId:ke,appId:Pe,appName:Ve}),oe()}},_l("\u786E\u5B9A")))))}var i=t(45231),m=t(63768),v=t(87600),W=t(24336),P=t(37050),u=t(86674),l=t(67112),T=t(93967),G=t.n(T),D=t(62232),M=t(44339),se,ae,ne,de=[{controlId:"rowid",type:2,controlName:_l("\u8BB0\u5F55ID")}],Ce=[{text:_l("\u83B7\u53D6\u7B2C\u4E00\u6761"),value:0},{text:_l("\u4E0D\u83B7\u53D6"),value:1}],he=function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ve=parseInt(ve),ve?oe.type===29&&h().get(oe,"advancedSetting.showtype")==="3"?ve=ve>50?50:ve:oe.type===29&&h().get(oe,"advancedSetting.showtype")==="1"?ve=ve>200?200:ve:ve>500&&(ve=500):oe.type===29&&h().get(oe,"advancedSetting.showtype")==="3"?ve=50:oe.type===29&&h().get(oe,"advancedSetting.showtype")==="1"?ve=200:ve=500,ve},fe=function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return oe.map(function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ve.type===30){var ue=h().find(oe,function(Se){return(ve.dataSource||"").includes(Se.controlId)})||{},pe=h().find(ue.relationControls||[],function(Se){return Se.controlId===ve.sourceControlId});return pe&&h().includes([9,10,11],pe.type)?(0,n.default)({},ve,{dataSource:pe.dataSource}):ve}else return ve})},Ee=(ae=se=function(Y){(0,O.default)(oe,Y);function oe(ve){(0,f.default)(this,oe);var ue=(0,C.default)(this,(oe.__proto__||U()(oe)).call(this,ve));ne.call(ue);var pe=ve.data.relationControls,Se=pe===void 0?[]:pe;return ue.state={id:"",sheetList:[],originSheetList:[],appId:"",appName:"",sheetId:"",sheetName:"",isSheetDelete:!1,controls:[],configs:[],items:[],moreType:0,resultType:0,moreSort:[],queryCount:"",visible:!1,showMenu:!1,controlVisible:!1,relationControls:Se,sheetSwitchPermit:[],views:[],loading:!0},ue}return(0,V.default)(oe,[{key:"componentDidMount",value:function(){this.getWorksheetList()}},{key:"render",value:function(){var ue=this,pe=this.state,Se=pe.sheetId,ye=pe.appName,J=pe.sheetName,me=pe.controls,be=me===void 0?[]:me,xe=pe.configs,Ae=xe===void 0?[]:xe,Ne=pe.sheetList,Me=Ne===void 0?[]:Ne,Fe=pe.items,Be=Fe===void 0?[]:Fe,we=pe.relationControls,Ie=we===void 0?[]:we,ge=pe.visible,Re=pe.showMenu,Pe=pe.controlVisible,ke=pe.loading,We=ke===void 0?!1:ke,Ve=pe.isSheetDelete,it=pe.moreType,Ge=pe.resultType,pt=pe.moreSort,ot=pe.queryCount,vt=pe.sheetSwitchPermit,At=pe.customTitle,yt=pe.views,st=yt===void 0?[]:yt,St=this.props,Qe=St.from,Xe=St.onClose,$e=St.data,Ke=$e===void 0?{}:$e,Ue=St.globalSheetInfo,He=Ue===void 0?{}:Ue,ze=St.allControls,gt=ze===void 0?[]:ze,Et=St.queryControls,ft=Et===void 0?[]:Et,qe=St.fromCustom,nt=Qe==="subList"?ft:gt,Ze=Ke.type===35&&Ke.dataSource===Se,et=this.relateField(),ut=h().includes([34],Ke.type),xt=!(Ze||et||ut),wt=Ze||et,kt=h().get(st,"0.viewId"),Rt=h().isEmpty(Be)||!(0,q.Gy)(Be,!0),jt=h().isEmpty(Ae)||!h().every(Ae,function(on){return!!on.cid}),fn=qe?!Se||Rt:xt?!Se||Rt||h().isEmpty(Ae):wt?Rt:!Se||Rt||jt,Mt=h().get(Ae[0]||{},"subCid")&&!h().find(be,function(on){return on.controlId===h().get(Ae[0]||{},"subCid")}),sn=JSON.parse(Z()(Be).replace(/"rcid":"parent"/g,'"rcid":""'));return s.createElement(L.Z,{visible:!0,title:s.createElement("span",{className:"Bold"},At||_l("\u67E5\u8BE2\u5DE5\u4F5C\u8868")),width:640,onCancel:Xe,okDisabled:fn,className:"SearchWorksheetDialog",onOk:function(){ue.handleSubmit()}},We?s.createElement(o.Z,{className:"mTop10 TxtCenter"}):s.createElement(s.Fragment,null,s.createElement(A.FC,null,s.createElement(S.d4,{className:"mTop8"},s.createElement("div",{className:"settingItemTitle"},_l("\u5DE5\u4F5C\u8868")),s.createElement(j.Z,{action:["click"],popupVisible:Re,onPopupVisibleChange:function(en){et||ue.setState({showMenu:en})},popupStyle:{width:592},popup:function(){return s.createElement(A.AA,null,s.createElement(a.Z,{fixedHeader:s.createElement("div",{className:"flexRow",style:{padding:"0 16px 0 14px",height:36,alignItems:"center",borderBottom:"1px solid #e0e0e0",marginBottom:5}},s.createElement("i",{className:"icon-search Gray_75 Font14"}),s.createElement("input",{type:"text",autoFocus:!0,className:"mLeft5 flex Border0 placeholderColor w100",placeholder:_l("\u641C\u7D22"),onChange:function($t){return ue.handleSearch($t.target.value.trim())}}))},Me.length>0?Me.map(function(en){return s.createElement(r.Z,{onClick:function(){en.sheetId!==Se&&ue.setState({sheetId:en.sheetId,items:[],configs:[],moreSort:[],moreType:0,resultType:0,showMenu:!1},ue.setControls)}},en.sheetName)}):s.createElement(r.Z,{className:"Gray_9"},_l("\u6682\u65E0\u641C\u7D22\u7ED3\u679C"))),s.createElement("div",{className:"otherWorksheet",onClick:function(){return ue.setState({visible:!0,showMenu:!1})}},_l("\u5176\u4ED6\u5E94\u7528\u4E0B\u7684\u5DE5\u4F5C\u8868")))},popupAlign:{points:["tl","bl"],offset:[0,3],overflow:{adjustX:!0,adjustY:!0}}},s.createElement("div",{className:G()("settingWorksheetInput",{disabled:et}),ref:function(en){return ue.box=en}},s.createElement("div",{className:"overflow_ellipsis"},J?s.createElement("span",{className:G()(Ve?"Red":"Gray")},Ve?_l("\u5DE5\u4F5C\u8868\u5DF2\u5220\u9664"):J,ye&&s.createElement("span",null,"\uFF08",ye,"\uFF09")):s.createElement("span",{className:"Gray_bd"},_l("\u9009\u62E9\u5DE5\u4F5C\u8868"))),s.createElement("div",{className:"edit"},s.createElement("i",{className:"icon-arrow-down-border"}))))),s.createElement(S.d4,null,s.createElement("div",{className:"settingItemTitle"},_l("\u67E5\u8BE2\u6761\u4EF6")),Se?s.createElement("div",{className:"searchWorksheetFilter"},s.createElement(c.Z,{canEdit:!0,feOnly:!0,version:Se,projectId:He.projectId,appId:He.appId,columns:fe(be),conditions:sn,sheetSwitchPermit:vt,viewId:kt,from:"relateSheet",filterResigned:!1,showCustom:!0,currentColumns:nt,onConditionsChange:function(en){ue.setState({items:en})}})):s.createElement("div",{className:"addFilterIcon pointer"},this.renderSearchCom())),qe?s.createElement(S.d4,{className:"mTop12"},s.createElement("div",{className:"settingItemTitle"},_l("\u67E5\u8BE2\u5230\u4EE5\u4E0B\u7ED3\u679C\u65F6\u6761\u4EF6\u6210\u7ACB")),s.createElement(y.ZP,{size:"middle",vertical:!0,checkedValue:Ge,data:M.qD,onChange:function(en){return ue.setState({resultType:en})}})):s.createElement(s.Fragment,null,(xt||Ke.type===29&&Ke.enumDefault===1||Ze)&&s.createElement(S.d4,{className:"mTop12"},s.createElement("div",{className:"settingItemTitle"},_l("\u67E5\u8BE2\u5230\u591A\u6761\u65F6")),s.createElement(y.ZP,{size:"middle",checkedValue:it,data:Ce,onChange:function(en){return ue.setState({moreType:en})}})),s.createElement(S.d4,{className:"mTop12"},s.createElement("div",{className:"settingItemTitle"},_l("\u6392\u5E8F\u89C4\u5219")),s.createElement(P.Z,{className:"searchWorksheetSort",helperClass:"zIndex99999",columns:be.filter(function(on){return![22,43,45,49,51,52,10010].includes(on.type)}),sortConditions:pt,showSystemControls:!0,onChange:function(en){return ue.setState({moreSort:en.map(function($t){return(0,n.default)({},$t,{dataType:h().get(h().find(be,function(an){return an.controlId===$t.controlId}),"type")})})})}})),(Ke.type===34||Ke.type===29&&Ke.enumDefault===2)&&s.createElement(S.d4,{className:"mTop12"},s.createElement("div",{className:"settingItemTitle"},_l("\u67E5\u8BE2\u6570\u91CF")),s.createElement(W.Z,{className:"w100",type:2,placeholder:he(Ke),value:ot?ot.toString():void 0,onChange:function(en){return ue.setState({queryCount:en})},onBlur:function(en){ue.setState({queryCount:he(Ke,en)})}})),s.createElement(S.d4,{className:"mTop12"},s.createElement("div",{className:"settingItemTitle"},_l("\u8D4B\u503C")),xt&&s.createElement(s.Fragment,null,s.createElement("div",null,_l("\u5C06"),s.createElement(te.Z,{className:"mLeft12 mRight12 Width250",border:!0,isAppendToBody:!0,placeholder:Mt?s.createElement(R.Z,{text:s.createElement("span",null,_l("ID: %0",h().get(Ae[0]||{},"subCid"))),popupPlacement:"bottom"},s.createElement("span",{className:"Red"},_l("\u5B57\u6BB5\u5DF2\u5220\u9664"))):_l("\u9009\u62E9\u67E5\u8BE2\u8868\u5B57\u6BB5"),disabled:!Se,value:Mt?void 0:h().get(Ae[0]||{},"subCid"),data:this.getDropData(be,Ke),renderItem:function(){var en=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return s.createElement("span",null,en.text,en.isEqualSource&&s.createElement("span",{className:"Gray_9e subText"},"\uFF08",_l("\u76F8\u540C\u9009\u9879\u96C6"),"\uFF09"))},onChange:function(en){return ue.setState({configs:[{cid:Ke.controlId,subCid:en}]})}}),_l("\u7684\u503C\u5199\u5165\u5F53\u524D\u5B57\u6BB5"))),wt&&s.createElement("div",null,_l("\u5C06\u83B7\u53D6\u5230\u7684\u8BB0\u5F55\u5199\u5165\u5230\u5F53\u524D\u5B57\u6BB5")),ut&&s.createElement("div",null,s.createElement("div",{className:"Gray_75 mBottom12"},_l("\u67E5\u8BE2\u5230\u7684\u6BCF\u884C\u8BB0\u5F55\u6DFB\u52A0\u4E3A\u4E00\u884C\u5B50\u8868\u660E\u7EC6\u3002\u8BF7\u9009\u62E9\u9700\u8981\u5199\u5165\u7684\u5B57\u6BB5\u3002")),this.renderMapping(),s.createElement(j.Z,{action:["click"],popupVisible:Pe,onPopupVisibleChange:function(en){Se&&ue.setState({controlVisible:en})},popupStyle:{width:280},popup:s.createElement(m.default,{list:this.filterSelectControls(Ie),onClick:function(en){ue.setState({configs:ue.state.configs.concat([{cid:en.controlId,subCid:""}])})}}),popupAlign:{points:["tl","bl"],offset:[0,3],overflow:{adjustX:!0,adjustY:!0}}},s.createElement("div",{className:"addFilterIcon pointer"},s.createElement("span",{onClick:function(){if(!Se){alert(_l("\u8BF7\u9009\u62E9\u5DE5\u4F5C\u8868"),3);return}}},s.createElement("i",{className:"icon icon-add"}),_l("\u9009\u62E9\u5B50\u8868\u5B57\u6BB5"))))))),ge&&s.createElement(Q,(0,n.default)({},this.props,this.state,{onClose:function(){return ue.setState({visible:!1})},onOk:function(en){ue.setState({appId:en.appId,appName:en.appName,sheetId:en.sheetId,items:en.sheetId===Se?Be:[],configs:[]},ue.setControls)}})))))}}]),oe}(s.Component),ne=function(){var oe=this;this.getWorksheetList=function(){var ve=oe.props,ue=ve.globalSheetInfo,pe=ue===void 0?{}:ue,Se=ve.dynamicData,ye=Se===void 0?{}:Se,J=ve.data,me=J===void 0?{}:J,be=ve.queryConfig,xe=be===void 0?{}:be,Ae=ye.id,Ne=Ae===void 0?"":Ae,Me=ye.sourceId,Fe=Me===void 0?"":Me,Be=ye.sourceName,we=Be===void 0?"":Be;if(!pe.appId)return null;E.Z.getWorksheetsByAppId({appId:pe.appId,type:0}).then(function(Ie){var ge=(Ie||[]).map(function(Re){var Pe=Re.workSheetId,ke=Re.workSheetName;return{sheetId:Pe,sheetName:ke}});oe.setState({id:Ne,sheetList:ge,originSheetList:ge,appId:pe.appId,appName:oe.relateField()?h().get(window.subListSheetConfig,me.controlId+".sheetInfo.appName"):pe.appName,sheetId:Fe||(oe.relateField()?me.dataSource:""),sheetName:oe.relateField()?me.sourceEntityName:"",controls:oe.relateField()?oe.state.relationControls:[],sheetSwitchPermit:oe.relateField()?h().get(window.subListSheetConfig,me.controlId+".sheetInfo.switches"):[],views:oe.relateField()?h().get(window.subListSheetConfig,me.controlId+".sheetInfo.switches.views"):[],loading:!!Ne},function(){oe.state.id&&oe.setState({items:xe.items,configs:xe.configs,moreType:xe.moreType||0,resultType:xe.resultType||0,moreSort:xe.moreSort,queryCount:xe.queryCount,controls:xe.templates?h().get(xe.templates[0]||{},"controls"):[],sheetName:we,isSheetDelete:!(h().get(xe,"templates[0].controls")||[]).length,appName:xe.appName,loading:!1})})})},this.relateField=function(){var ve=oe.props.data,ue=ve===void 0?{}:ve;return h().includes([29],ue.type)},this.setControls=function(){var ve=oe.state,ue=ve.sheetId,pe=ve.appId;ue&&i.Z.getWorksheetInfo({worksheetId:ue,getTemplate:!0,getSwitchPermit:!0,appId:pe,getViews:!0}).then(function(Se){var ye=Se.template||{},J=ye.controls,me=J===void 0?[]:J;oe.setState({controls:me,sheetName:Se.name,isSheetDelete:!me.length,sheetSwitchPermit:Se.switches,views:Se.views,appName:Se.appName})})},this.renderSearchCom=function(){return s.createElement("span",{onClick:function(ue){if(!oe.state.sheetId){alert(_l("\u8BF7\u9009\u62E9\u5DE5\u4F5C\u8868"),3);return}}},s.createElement("i",{className:"icon icon-add"}),_l("\u67E5\u8BE2\u6761\u4EF6"))},this.handleSubmit=function(){var ve=oe.props,ue=ve.globalSheetInfo,pe=ue===void 0?{}:ue,Se=ve.from,ye=ve.subListSheetId,J=ve.data,me=J===void 0?{}:J,be=ve.onChange,xe=ve.onClose,Ae=ve.updateQueryConfigs,Ne=oe.state,Me=Ne.id,Fe=Me===void 0?"":Me,Be=Ne.sheetId,we=Ne.appId,Ie=Ne.sheetName,ge=Ne.items,Re=ge===void 0?[]:ge,Pe=Ne.configs,ke=Pe===void 0?[]:Pe,We=Ne.controls,Ve=We===void 0?[]:We,it=Ne.appName,Ge=Ne.moreSort,pt=Ne.moreType,ot=Ne.resultType,vt=Ne.queryCount,At=Se==="subList"?ye:pe.worksheetId,yt=Se==="subList"||At===Be?1:2,st={id:Fe&&Fe.includes("-")?"":Fe,appId:we,worksheetId:At,controlId:me.controlId,sourceId:Be,sourceName:Ie,sourceType:yt,items:Re,configs:ke,moreType:pt,resultType:ot,moreSort:Ge,queryCount:vt};i.Z.saveQuery(st).then(function(St){var Qe={id:St,sourceId:Be,sourceName:Ie};be((0,I.Wz)(me,{dynamicsrc:Z()(Qe),defaultfunc:"",defsource:Z()([]),defaulttype:"2"})),Ae((0,n.default)({},st,{id:St,templates:[{controls:Ve}],appName:it})),xe()})},this.handleSearch=h().throttle(function(ve){var ue=oe.state.originSheetList,pe=ue===void 0?[]:ue;oe.setState({sheetList:ve?pe.filter(function(Se){return(Se.sheetName||"").indexOf(ve)>-1}):pe})},300),this.getDropData=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe=arguments[2],Se=(0,v.MX)({data:ue,controls:ve,isCurrent:!0,needFilter:!0});return Se=Se.filter(function(ye){return!h().includes(["wfftime","rowid"],ye.controlId)}),pe&&(ue.type===29&&ue.dataSource===oe.state.sheetId||h().includes([2,32],ue.type))&&(Se=de.concat(Se)),Se.map(function(ye){var J=ye.controlId,me=ye.controlName,be=ye.dataSource;return h().includes([9,10,11],ue.type)&&be&&ue.dataSource===be?{text:me,value:J,isEqualSource:!0}:{text:me,value:J}})},this.filterSelectControls=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ue=oe.state.configs,pe=ue===void 0?[]:ue;return ve=ve.filter(function(Se){return!h().includes([].concat((0,p.Z)(u.Hp),(0,p.Z)(u.gs)),Se.controlId)}),ve=ve.filter(function(Se){return h().includes([2,3,4,5,6,8,9,10,11,15,16,19,23,24,26,27,28,36,46,48],Se.type)||!(0,D.YU)(Se)}),ve.filter(function(Se){return!h().includes(pe.map(function(ye){return ye.cid})||[],Se.controlId)})},this.renderMapping=function(){var ve=oe.state,ue=ve.configs,pe=ue===void 0?[]:ue,Se=ve.controls,ye=Se===void 0?[]:Se,J=ve.relationControls,me=J===void 0?[]:J;return s.createElement(s.Fragment,null,s.createElement("div",{className:"mappingItem mBottom0"},s.createElement("div",{className:"mappingTitle"},_l("\u5B50\u8868")),s.createElement("div",{className:"mappingTitle"},_l("\u67E5\u8BE2\u8868\u5B57\u6BB5"))),pe.map(function(be,xe){var Ae=h().find(me,function(Fe){return Fe.controlId===be.cid}),Ne=oe.getDropData(ye,Ae,!0),Me=be.subCid&&!h().find(Ne,function(Fe){return Fe.value===be.subCid});return s.createElement("div",{className:"mappingItem"},s.createElement("div",{className:"mappingControlName overflow_ellipsis"},h().get(Ae,"controlName")||s.createElement(R.Z,{text:s.createElement("span",null,_l("ID: %0",be.cid)),popupPlacement:"bottom"},s.createElement("span",{className:"Red"},_l("\u5B57\u6BB5\u5DF2\u5220\u9664")))),s.createElement("span",{className:"mLeft20 mRight20"},"="),s.createElement(te.Z,{className:"mapppingDropdown",border:!0,isAppendToBody:!0,placeholder:Me?s.createElement(R.Z,{text:s.createElement("span",null,_l("ID: %0",be.subCid)),popupPlacement:"bottom"},s.createElement("span",{className:"Red"},_l("\u5B57\u6BB5\u5DF2\u5220\u9664"))):_l("\u9009\u62E9\u67E5\u8BE2\u8868\u5B57\u6BB5"),value:Me?void 0:be.subCid||void 0,data:Ne,onChange:function(Be){var we=h().find(Ne,function(Ie){return Ie.value===Be})||{};oe.setState({configs:pe.map(function(Ie,ge){return ge===xe?g()({},Ie,{subCid:we.value}):Ie})})}}),s.createElement("span",{className:"mLeft15",onClick:function(){return oe.setState({configs:pe.filter(function(Be,we){return we!==xe})})}},s.createElement("i",{className:"icon-delete1 Font17 Gray_9d ThemeHoverColor3"})))}))}},ae)},63768:(lt,Te,t)=>{"use strict";t.r(Te),t.d(Te,{default:()=>a});var ce=t(12424),g=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(69293);var L=t(96486),te=t.n(L);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(57467);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(62232);function a(r){var o=r.className,d=r.list,Z=r.searchable,H=Z===void 0?!0:Z,U=r.onClick,f=r.onClickAway,V=f===void 0?_.noop:f,C=(0,g.useRef)(null),O=(0,g.useRef)(null),n=(0,g.useState)(""),s=(0,ce.Z)(n,2),j=s[0],A=s[1],S=(j?d.filter(function(I){return I.controlName.toLowerCase().indexOf(j.toLowerCase())>-1}):d).sort(function(I,c){return I.row*10+I.col>c.row*10+c.col?1:-1});return(0,p.Z)(C,V),(0,g.useEffect)(function(){O&&O.current&&O.current.focus()},[]),g.createElement(R.JC,{ref:C,className:o},H&&g.createElement("div",{className:"search",onClick:function(c){return c.stopPropagation()}},g.createElement("i",{className:"icon-search Gray_9e"}),g.createElement("input",{autoFocus:!0,ref:O,value:j,onChange:function(c){return A(c.target.value)},placeholder:_l("\u641C\u7D22\u5B57\u6BB5")})),(0,L.isEmpty)(S)?g.createElement("div",{className:"emptyText"},j?_l("\u6CA1\u6709\u641C\u7D22\u7ED3\u679C"):_l("\u6CA1\u6709\u53EF\u9009\u63A7\u4EF6")):g.createElement("div",{className:"fieldsWrap"},g.createElement("ul",{className:"fieldList"},S.map(function(I){return g.createElement("li",{onClick:function(){U(I)}},g.createElement("i",{className:"icon-"+(0,y.hB)(I.type)}),I.controlName)}))))}},21300:(lt,Te,t)=>{"use strict";if(t.r(Te),t.d(Te,{default:()=>U}),!/^(1887|7596|7798)$/.test(t.j))var ce=t(6100);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(33867);var p=t(12424),L=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(94914);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(69529);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(35369);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(15577);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(92906);var o=t(93967),d=t.n(o),Z=t(96486),H=t.n(Z);function U(f){var V=f.data,C=f.sectionstyle,O=f.widgets,n=O===void 0?[]:O,s=f.activeWidget,j=s===void 0?{}:s,A=f.from,S=f.fromType,I=f.renderData,c=I===void 0?[]:I,q=f.setNavVisible,b=V.enumDefault2,k=b===void 0?0:b,ee=V.controlName,re=V.controlId,ie=(0,te.aq)(V),le=ie.theme,E=le===void 0?"#2196f3":le,w=ie.color,K=w===void 0?"#333":w,N=ie.icon,F=N===void 0?"":N,h=ie.hidetitle,z=(0,a.Q9)(),X=(0,L.useState)(k!==2),B=(0,p.Z)(X,2),x=B[0],Q=B[1],i=S==="display"?c:H().flatten(n),m=(0,r._A)(i,V,A),v=(0,L.useRef)(),W=(0,L.useRef)([]);(0,L.useEffect)(function(){P(k!==2),W.current=m,H().isFunction(f.registerCell)&&f.registerCell({handleExpand:function(T){return P(T)}})},[re]),(0,L.useEffect)(function(){H().isEqual(W.current,m)||(W.current=m,P(x))},[m]);var P=function(T){if(!(h==="1"&&k==0)&&k!==0){var G=H().isUndefined(T)?!x:T;if(m.length>0){var D;(function(){Q(G);var M=G?m:m.reverse();for(D=0;D<m.length;D++)(function(se){var ae=setTimeout(function(){var ne=S==="display"?($(v.current).parents().find(".customFormItem#formItem-"+M[se])||[])[0]:document.getElementById("widget-"+M[se]);ne&&(G?$(ne).slideDown(80,"swing",function(){return ne.style.overflow="unset"}):$(ne).slideUp(80,"swing",function(){return ne.style.overflow="unset"}),clearTimeout(ae),ne.nextElementSibling&&ne.nextElementSibling.className==="customFormLine"&&(ne.nextElementSibling.style.display=G?"flex":"none"))},100)})(D);H().isFunction(q)&&q()})()}}},u=function(){if(h==="1"&&k==0)return null;if(C==="1")return L.createElement("div",{className:"rangeIcon"});if(C==="2"&&k!==0)return L.createElement("span",{className:"headerArrowIcon"},L.createElement(g.Z,{icon:"sidebar_video_tutorial"}));if(F){var T=safeParse(F||"{}"),G=T.iconUrl;return L.createElement(ce.Z,{url:G,fill:E,size:z?18:20,className:d()("Width20",{mRight5:!z,mRight3:z}),style:{flexShrink:0}})}return null};return L.createElement(R.NC,{theme:E,color:K,visible:x,ref:v,sectionstyle:C,enumDefault2:k,hidetitle:h==="1",className:z?"mobileSectionItemWrap":"",onClick:function(){S!=="display"&&H().get(j,"controlId")!==re||P()}},L.createElement("div",{className:d()("titleBox",{alignItemsCenter:z})},u(),L.createElement("div",{className:"titleText"},h!=="1"&&ee,S!=="display"&&L.createElement(y.Z,{data:V,showTitle:h!=="1",style:{display:"inline-block",verticalAlign:"middle",marginTop:"-2px"}}))),k!==0&&C!=="2"&&m.length>0&&L.createElement("div",{className:"headerArrow"},L.createElement("div",{className:"iconBox"},L.createElement(g.Z,{icon:"arrow-down-border"}))))}},92906:(lt,Te,t)=>{"use strict";t.d(Te,{_A:()=>a});var ce=t(26378),g=t.n(ce),p=t(85315);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(24607);var te=["#9A060C","#CF1521","#E91F63","#F9551C","#D48724","#874812","#FF9800","#3A13AF","#9D27B0","#732ED1","#4051B5","#3054EB","#2196F3","#00BCD4","#217107","#4CAF50","#7CB402","#455964"],R=[].concat(te,["#333333","#757575"]),y=function(o){var d=[.24,.16,.08].map(function(Z){return"rgb("+parseInt("0x"+o.slice(1,3))+","+parseInt("0x"+o.slice(3,5))+","+parseInt("0x"+o.slice(5,7))+","+Z+")"});return[].concat(_toConsumableArray(d),["#fff"])},a=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=arguments[2],H=d.controlId,U=d.sectionId,f=[],V=o.sort(function(I,c){return I.row===c.row?I.col-c.col:I.row-c.row}),C=!1,O=!0,n=!1,s=void 0;try{for(var j=g()(V),A;!(O=(A=j.next()).done);O=!0){var S=A.value;C&&(_.get(S,"type")===52||_.get(S,"type")===22&&(!Z||(0,L.kM)(S,Z).visible&&!S.hidden)&&U===(S.sectionId||"")?C=!1:f.push(S.controlId)),S.controlId===H&&(C=!0)}}catch(I){n=!0,s=I}finally{try{!O&&j.return&&j.return()}finally{if(n)throw s}}return f}},69529:(lt,Te,t)=>{"use strict";t.d(Te,{$:()=>y,NC:()=>d,mR:()=>a,y5:()=>r});var ce=t(86735),g=t(71893),p=(0,ce.Z)([`
  display: flex;
  align-items: center;
  margin-top: 10px;
  .label {
    display: inline-block;
    width: 60px;
    text-align: left;
    &.Width100 {
      width: 100px;
    }
  }
  .selectWrap {
    flex: 1;
    display: flex;
    padding: 2px;
    background: #f5f6f7;
    border-radius: 3px;
    .animaItem {
      height: 32px;
      border-radius: 3px;
      line-height: 32px;
      text-align: center;
      cursor: pointer;
      font-weight: bold;
      color: #757575;
      flex: 1;
      &:hover {
        color: #2196f3;
      }
      &.active {
        background: #ffffff;
        color: #2196f3;
      }
    }
  }
`],[`
  display: flex;
  align-items: center;
  margin-top: 10px;
  .label {
    display: inline-block;
    width: 60px;
    text-align: left;
    &.Width100 {
      width: 100px;
    }
  }
  .selectWrap {
    flex: 1;
    display: flex;
    padding: 2px;
    background: #f5f6f7;
    border-radius: 3px;
    .animaItem {
      height: 32px;
      border-radius: 3px;
      line-height: 32px;
      text-align: center;
      cursor: pointer;
      font-weight: bold;
      color: #757575;
      flex: 1;
      &:hover {
        color: #2196f3;
      }
      &.active {
        background: #ffffff;
        color: #2196f3;
      }
    }
  }
`]),L=(0,ce.Z)([`
  width: 129px;
  height: 8px;
  margin: 10px 0;
  background: #f5f5f5;
  border-radius: 2px;
`],[`
  width: 129px;
  height: 8px;
  margin: 10px 0;
  background: #f5f5f5;
  border-radius: 2px;
`]),te=(0,ce.Z)([`
  display: flex;
  flex-direction: column;
  position: relative;
  height: 100px;
  border: 1px dashed #e6e6e6;
  border-radius: 4px;
  padding-top: 8px;
  .emptyText {
    line-height: 86px;
    width: 100%;
    text-align: center;
    color: #9e9e9e;
  }
`],[`
  display: flex;
  flex-direction: column;
  position: relative;
  height: 100px;
  border: 1px dashed #e6e6e6;
  border-radius: 4px;
  padding-top: 8px;
  .emptyText {
    line-height: 86px;
    width: 100%;
    text-align: center;
    color: #9e9e9e;
  }
`]),R=(0,ce.Z)([`
  width: 100%;
  background: #fff;
  padding: 4px 0;
  display: flex;
  border-bottom: 1px solid #cccccc;
  .titleBox {
    flex: 1;
    display: flex;
    justify-content: flex-start;
    cursor: `,`;
    `,`;
    .Width20 {
      width: 20px;
    }
    .rangeIcon {
      width: 3px;
      height: 17px;
      background: `,`;
      line-height: 40px;
      flex-shrink: 0;
      margin-right: 7px;
      margin-top: 2px;
    }

    .titleText {
      font-size: 15px;
      font-weight: 600;
      line-height: 20px;
      flex: 1;
      white-space: break-spaces;
      color: `,`;
      overflow: hidden;
      text-overflow: ellipsis;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
    }
  }

  .starIcon {
    color: `,` !important;
    margin-right: 2px !important;
  }

  .headerArrow {
    flex-shrink: 0;
    font-size: 18px;
    width: 40px;
    height: 40px;
    line-height: 40px;
    text-align: center;
    margin-left: 8px;
    border-radius: 5px;
    cursor: `,`;
    .iconBox {
      `,`;
    }
    i {
      color: #000000;
    }
    &:hover {
      background: rgba(0, 0, 0, 0.06);
    }
  }

  .headerArrowIcon {
    flex-shrink: 0;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 5px !important;
    color: `,` !important;
    i {
      font-size: 20px;
      display: inline-block;
      transform-origin: center;
      `,`;
    }
  }
  &.mobileSectionItemWrap {
    border-bottom: none;
    align-items: center;
    .titleBox {
      padding: 0;
      .titleText {
        -webkit-line-clamp: initial;
        text-align: justify;
      }
    }
    .headerArrow {
      width: unset;
      height: unset;
      line-height: unset;
      margin-left: 12px;
      i {
        color: #9e9e9e;
      }
      &:hover {
        background: unset;
      }
    }
  }
`],[`
  width: 100%;
  background: #fff;
  padding: 4px 0;
  display: flex;
  border-bottom: 1px solid #cccccc;
  .titleBox {
    flex: 1;
    display: flex;
    justify-content: flex-start;
    cursor: `,`;
    `,`;
    .Width20 {
      width: 20px;
    }
    .rangeIcon {
      width: 3px;
      height: 17px;
      background: `,`;
      line-height: 40px;
      flex-shrink: 0;
      margin-right: 7px;
      margin-top: 2px;
    }

    .titleText {
      font-size: 15px;
      font-weight: 600;
      line-height: 20px;
      flex: 1;
      white-space: break-spaces;
      color: `,`;
      overflow: hidden;
      text-overflow: ellipsis;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
    }
  }

  .starIcon {
    color: `,` !important;
    margin-right: 2px !important;
  }

  .headerArrow {
    flex-shrink: 0;
    font-size: 18px;
    width: 40px;
    height: 40px;
    line-height: 40px;
    text-align: center;
    margin-left: 8px;
    border-radius: 5px;
    cursor: `,`;
    .iconBox {
      `,`;
    }
    i {
      color: #000000;
    }
    &:hover {
      background: rgba(0, 0, 0, 0.06);
    }
  }

  .headerArrowIcon {
    flex-shrink: 0;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 5px !important;
    color: `,` !important;
    i {
      font-size: 20px;
      display: inline-block;
      transform-origin: center;
      `,`;
    }
  }
  &.mobileSectionItemWrap {
    border-bottom: none;
    align-items: center;
    .titleBox {
      padding: 0;
      .titleText {
        -webkit-line-clamp: initial;
        text-align: justify;
      }
    }
    .headerArrow {
      width: unset;
      height: unset;
      line-height: unset;
      margin-left: 12px;
      i {
        color: #9e9e9e;
      }
      &:hover {
        background: unset;
      }
    }
  }
`]),y=g.ZP.div(function(Z){var H=Z.inputCoverStyle,U=H===void 0?!0:H;return`
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.16);
    border-radius: 3px;
    position: relative;
    box-sizing: border-box;
    width: 350px;
    padding: 10px;
    border: 1px solid #ddd;
    background-color: #fff;
    ul {
      display: flex;
      flex-wrap: wrap;
    }
    li {
      box-sizing: border-box;
      width: 10%;
      padding: 5px 0;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      cursor: pointer;
      .colorItemCheck {
        display: none;
      }
      &.active {
        .colorItemCheck {
          display: block;
          color: #fff;
          position: absolute;
          border-radius: 50%;
          z-index: 1;
        }
      }
      &.addActive {
        .colorItem {
          border: 1px solid #bdbdbd;
          padding: 2px;
          box-sizing: border-box;
        }
        .colorItemAdd {
          height: 100%;
          border-radius: 50%;
          margin-left: -0.5px;
        }
      }
    }
    .colorItem {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      position: relative;
    }
    input `+(U?`{
      width: 24px;
      height: 24px;
      padding: 0;
      border: none;
      border-radius: 50%;
      z-index: 1;
      position: absolute;
      opacity: 0;
      cursor: pointer;
      top: 0;
      left: 0;
    }`:"{}")+`
`}),a=g.ZP.div(p),r=g.ZP.div(L),o=g.ZP.div(te),d=g.ZP.div(R,function(Z){return Z.hidetitle&&Z.enumDefault2===0?"default":"pointer"},function(Z){return Z.hidetitle?" align-items: center":" padding: 10px 0"},function(Z){return Z.theme},function(Z){return Z.color},function(Z){return Z.theme},function(Z){return Z.hidetitle?"default":"pointer"},function(Z){return Z.visible?"transform: rotate(180deg); transition: transform 0.2s ease-in-out;":""},function(Z){return Z.theme},function(Z){return Z.visible?"transform: rotate(90deg)":""})},85879:(lt,Te,t)=>{"use strict";if(t.d(Te,{G:()=>r}),!/^(1887|7596)$/.test(t.j))var ce=t(94914);var g={NO_DISPLAY:"0",APPOINT_NUM:"1",BEFORE_APPOINT_CHAR:"2",BEFORE_AND_INCLUDE_APPOINT_CHAR:"3"},p={NO_DISPLAY:"0",APPOINT_NUM:"1",AFTER_APPOINT_CHAR:"2",AFTER_AND_INCLUDE_APPOINT_CHAR:"3"},L=function(d,Z){var H=parseInt(d);return Z.replace(/\*+/g,"*".repeat(H))},te=function(d){var Z=d.maskmid,H=Z===void 0?"":Z,U=d.masklen,f=U===void 0?"":U,V=d.value,C=V===void 0?"":V,O=d.maskValue,n=O===void 0?"":O,s=H?H.replace(//g,",").split(",").filter(function(j){return j!==""}):[];return s.length&&s.forEach(function(j){var A=!1,S=j.replace(/(\(|\[|\{|\\|\^|\$|\||\)|\?|\*|\+|\.|\]|\}|\))+/,function(c){return c?"\\"+c[0]+"{"+c.length+"}":""}),I=new RegExp(S,"g");C.replace(I,function(c,q){n[q]==="*"&&!A&&(A=!0,n=n.slice(0,q)+c+n.slice(c.length+q))})}),f&&parseInt(f)&&(n=L(f,n)),n},R=function(d){var Z=d.charNum,H=d.value,U=d.maskValue,f=d.isBegin;if(Z&&parseInt(Z)){if(f)return H.slice(0,parseInt(Z))+U.slice(parseInt(Z));var V="-"+parseInt(Z);return U.slice(0,parseInt(V))+H.slice(parseInt(V))}return U},y=function(d,Z,H){return H?Z.indexOf(d):Z.lastIndexOf(d)},a=function(d){var Z=d.char,H=d.value,U=d.maskValue,f=d.isBegin,V=d.isIncluded;if(Z){var C=y(Z,H,f);if(C>-1){var O=V&&f||!f&&!V?C+1:C;return f?H.slice(0,O)+U.slice(O):U.slice(0,O)+H.slice(O)}}return U},r=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Z=(0,ce.aq)(d),H=Z.datamask,U=Z.masktype,f=U===void 0?"":U,V=Z.maskbegin,C=V===void 0?"":V,O=Z.mdchar,n=O===void 0?"":O,s=Z.maskend,j=s===void 0?"":s,A=Z.mechar,S=A===void 0?"":A,I=Z.maskmid,c=I===void 0?"":I,q=Z.masklen,b=q===void 0?"":q,k=d.value||"";if(H!=="1")return k;var ee="*".repeat(k.length);switch(f){case"all":C="0",j="0";break;case"1":C="1",n="1",j="1",S="1";break;case"2":C="1",n="3",j="1",S="4";break;case"3":C="1",n="3",j="3",S="@";break;case"4":C="0",j="0",b="5";break;case"5":C="0",j="1",S="4";break;case"6":C="1",n="4",j="1",S="4";break;case"7":C="2",n=".",c=".,.,.,",b="3";break;case"8":C="1",n="1",j="1",S="2";break}switch(C=C||"0",j=j||"0",C){case g.NO_DISPLAY:switch(j){case p.APPOINT_NUM:ee=R({charNum:S,value:k,maskValue:ee,isBegin:!1});break;case p.AFTER_APPOINT_CHAR:ee=a({char:S,value:k,maskValue:ee,isBegin:!1,isIncluded:!1});break;case p.AFTER_AND_INCLUDE_APPOINT_CHAR:ee=a({char:S,value:k,maskValue:ee,isBegin:!1,isIncluded:!0});break}break;case g.APPOINT_NUM:ee=R({charNum:n,value:k,maskValue:ee,isBegin:!0});var re=n&&parseInt(n);switch(j){case p.APPOINT_NUM:if(S&&re+parseInt(S)>=k.length)break;ee=R({charNum:S,value:k,maskValue:ee,isBegin:!1});break;case p.AFTER_APPOINT_CHAR:if(y(S,k,!1)<re)break;ee=a({char:S,value:k,maskValue:ee,isBegin:!1,isIncluded:!1});break;case p.AFTER_AND_INCLUDE_APPOINT_CHAR:if(y(S,k,!1)<=re)break;ee=a({char:S,value:k,maskValue:ee,isBegin:!1,isIncluded:!0});break}break;case g.BEFORE_APPOINT_CHAR:ee=a({char:n,value:k,maskValue:ee,isBegin:!0});var ie=y(n,k,!0);switch(j){case p.APPOINT_NUM:if(S&&parseInt(S)+ie>=k.length)break;ee=R({charNum:S,value:k,maskValue:ee,isBegin:!1});break;case p.AFTER_APPOINT_CHAR:if(y(S,k,!1)<ie)break;ee=a({char:S,value:k,maskValue:ee,isBegin:!1,isIncluded:!1});break;case p.AFTER_AND_INCLUDE_APPOINT_CHAR:if(y(S,k,!1)<=ie)break;ee=a({char:S,value:k,maskValue:ee,isBegin:!1,isIncluded:!0});break}break;case g.BEFORE_AND_INCLUDE_APPOINT_CHAR:ee=a({char:n,value:k,maskValue:ee,isBegin:!0,isIncluded:!0});var le=y(n,k,!0)+1;switch(j){case p.APPOINT_NUM:if(S&&le+parseInt(S)>=k.length)break;ee=R({charNum:S,value:k,maskValue:ee,isBegin:!1});break;case p.AFTER_APPOINT_CHAR:if(y(S,k,!1)<le)break;ee=a({char:S,value:k,maskValue:ee,isBegin:!1,isIncluded:!1});break;case p.AFTER_AND_INCLUDE_APPOINT_CHAR:if(y(S,k,!1)<=le)break;ee=a({char:S,value:k,maskValue:ee,isBegin:!1,isIncluded:!0});break}break}return te({maskmid:c,masklen:b,value:k,maskValue:ee})}},24336:(lt,Te,t)=>{"use strict";if(t.d(Te,{Z:()=>R}),!/^(1887|7596|7798)$/.test(t.j))var ce=t(3540);var g=t(12424),p=t(67294),L=t(96486),te=t.n(L);function R(y){var a=y.type,r=y.value,o=y.className,d=y.onChange,Z=y.onBlur,H=y.placeholder,U=(0,p.useState)(!1),f=(0,g.Z)(U,2),V=f[0],C=f[1],O=function(j){var A=[2,10].includes(a)?j.replace(/[^\d]/g,""):j.replace(/[^-\d.]/g,"").replace(/^\./g,"").replace(/^-/,"$#$").replace(/-/g,"").replace("$#$","-").replace(/^-\./,"-").replace(".","$#$").replace(/\./g,"").replace("$#$",".");return A==="."?"":A},n=function(j){if(!j)return"";if(j==="-")return"-";j=j.replace(/,/g,"");var A="";te().includes(j,".")?A=te().endsWith(j,".")?String(parseFloat(j))+".":String(parseFloat(j).toFixed(j.split(".")[1].length)):A=String(parseFloat(j));var S=A.indexOf(".")>-1?/(\d{1,3})(?=(?:\d{3})+\.)/g:/(\d{1,3})(?=(?:\d{3})+$)/g,I=A.replace(S,"$1,");return I};return V?p.createElement(ce.Z,{className:o,placeholder:H,value:r,onChange:function(j){return d(O(j))},onBlur:function(j){if(C(!1),Z){Z(O(j.target.value));return}d(O(j.target.value))}}):p.createElement(ce.Z,{className:o,value:n(r),onFocus:function(){return C(!0)},placeholder:H})}},90459:(lt,Te,t)=>{"use strict";t.d(Te,{Gf:()=>R,VW:()=>te,yP:()=>r});var ce=t(30381),g=t.n(ce),p={0:{id:"default",text:_l("\u53D1\u8D77\u5DE5\u4F5C\u6D41"),icon:"worksheet"},3:{id:"edit",text:_l("\u586B\u5199"),icon:"edit"},4:{id:"approve",text:_l("\u5BA1\u6279"),icon:"workflow_ea"},5:{id:"notice",text:_l("\u901A\u77E5"),icon:"workflow_notice"},12:{id:"delayed",text:_l("\u5EF6\u65F6"),icon:"workflow_delayed"},16:{id:"subprocess",text:_l("\u5B50\u6D41\u7A0B"),icon:"subprocess"},18:{id:"print",text:_l("\u83B7\u53D6\u8BB0\u5F55\u6253\u5370\u6587\u4EF6"),icon:"print"},20:{id:"pbc",text:_l("\u5C01\u88C5\u4E1A\u52A1\u6D41\u7A0B"),icon:"pbc"},26:{id:"delayed",text:_l("\u5BA1\u6279\u6D41"),icon:"workflow_delayed"}},L={approve:{icon:"workflow_ea",bg:"#7E57C2",shallowBg:"#7E57C233"},notice:{icon:"workflow_notice",bg:"#FFA340",shallowBg:"#ffa34033"},edit:{icon:"edit",bg:"#2196f3",shallowBg:"#2196f333"},workflow:{icon:"workflow",bg:"#2196f3",shallowBg:"#2196f333"},default:{icon:"workflow",bg:"#9E9E9E",shallowBg:"#9E9E9E33"},delayed:{icon:"workflow_delayed",bg:"#4c7d9e",shallowBg:"#4c7d9e33"},subprocess:{icon:"subprocess",bg:"#4c7d9e",shallowBg:"#4c7d9e33"},print:{icon:"print",bg:"#4c7d9e",shallowBg:"#4c7d9e33"},pbc:{icon:"pbc",bg:"#4c7d9e",shallowBg:"#4c7d9e33"}},te={3:{0:{text:_l("\u5F85\u586B\u5199"),color:"#757575"},1:{text:_l("\u5B8C\u6210\u586B\u5199"),color:"#757575"},2:{text:_l("\u5DF2\u8F6C\u4EA4"),color:"#757575"},3:{text:_l("\u5DF2\u8F6C\u4EA4"),color:"#757575"},5:{text:_l("\u65E0\u9700\u586B\u5199"),color:"#757575"},22:{text:_l("\u5B8C\u6210\u586B\u5199"),color:"#757575"}},4:{0:{text:_l("\u5F85\u5BA1\u6279"),color:"#757575"},1:{text:_l("\u901A\u8FC7\u7533\u8BF7"),color:"#4CAF50",shallowBg:"#4CAF5026"},2:{text:_l("\u5DF2\u52A0\u7B7E"),color:"#757575"},3:{text:_l("\u5DF2\u8F6C\u5BA1"),color:"#757575"},4:{text:_l("\u5426\u51B3\u7533\u8BF7"),color:"#F44336",shallowBg:"#F4433626"},5:{text:_l("\u65E0\u9700\u5BA1\u6279"),color:"#757575"},8:{text:_l("\u5DF2\u8F6C\u5BA1"),color:"#757575"},16:{text:_l("\u5DF2\u52A0\u7B7E"),color:"#757575"},17:{text:_l("\u5DF2\u52A0\u7B7E"),color:"#757575"},22:{text:_l("\u5426\u51B3\u7533\u8BF7"),color:"#F44336",shallowBg:"#F4433626"}},5:{0:{text:_l("\u5F85\u67E5\u770B"),color:"#2196F3",shallowBg:"#2196F326"},1:{text:_l("\u5DF2\u67E5\u770B"),color:"#757575"}}},R={1:{text:_l("\u7B49\u5F85")},2:{text:_l("\u5DF2\u901A\u8FC7"),bg:"#4CAF50",shallowBg:"#4CAF5026",icon:"done"},3:{text:_l("\u6D41\u7A0B\u4E2D\u6B62"),bg:"#AAAAAA",shallowBg:"#AAAAAA26"},4:{text:_l("\u6D41\u7A0B\u4E2D\u6B62"),bg:"#AAAAAA",shallowBg:"#AAAAAA26"},5:{text:_l("\u5DF2\u5426\u51B3"),bg:"#F44336",shallowBg:"#F4433626",icon:"clear"},6:{text:_l("\u6D41\u7A0B\u4E2D\u6B62"),bg:"#AAAAAA"}},y=function(){for(var d=2018,Z=moment().get("year"),H=[],U=d;U<=Z;U++)H.push({text:U===Z?_l("\u4ECA\u5E74"):_l("%0\u5E74",U),value:{startDate:moment(U.toString()).startOf("year").format("YYYY-MM-DD"),endDate:moment(U.toString()).endOf("year").format("YYYY-MM-DD")}});return H.reverse()},a=function(){var d=moment().format("YYYY-MM-DD"),Z=[{text:_l("1\u4E2A\u6708\u5185"),value:{startDate:moment().day(-30).format("YYYY-MM-DD"),endDate:d}},{text:_l("3\u4E2A\u6708\u5185"),value:{startDate:moment().day(-90).format("YYYY-MM-DD"),endDate:d}},{text:_l("6\u4E2A\u6708\u5185"),value:{startDate:moment().day(-180).format("YYYY-MM-DD"),endDate:d}}];return Z.concat(y())},r=function(d){d<0&&(d=d*-1);var Z=Math.floor(d/24/60/60/1e3),H=Math.floor((d-Z*24*60*60*1e3)/60/60/1e3),U=(d-Z*24*60*60*1e3-H*60*60*1e3)/60/1e3;return""+(Z?_l("%0\u5929",Z):"")+(H?_l("%0\u5C0F\u65F6",H):"")+(U?_l("%0\u5206\u949F",Math.floor(U)||1):"")}},96067:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>C});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(60341),Z=t(47170),H=t(5618),U=t(72078),f=t(96486),V=t.n(f),C=function(O){(0,y.default)(n,O);function n(s){return(0,L.default)(this,n),(0,R.default)(this,(n.__proto__||p()(n)).call(this,s))}return(0,te.default)(n,[{key:"renderContent",value:function(){var j=this.props.item;if(!j.appId&&!j.selectNodeId&&!V().includes([H.IF.PROCESS,H.IF.CALENDAR],j.appType)||V().includes([H.IF.PROCESS,H.IF.EXTERNAL_USER,H.IF.GLOBAL_VARIABLE,H.IF.CALENDAR],j.appType)&&!j.fields.length)return a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9"));if(V().includes([H.IF.SHEET,H.IF.EXTERNAL_USER],j.appType)&&j.actionId===H.gp.EDIT)return j.selectNodeName?a.createElement(a.Fragment,null,j.appType!==H.IF.EXTERNAL_USER&&a.createElement("div",{className:"workflowContentInfo ellipsis workflowContentBG"},a.createElement("span",{className:"Gray_9e mRight5"},j.appTypeName),"\u201C",j.appName,"\u201D"),j.fields.length===0?a.createElement("div",{className:"pLeft8 pRight8 mTop8 yellow pBottom5"},_l("\u672A\u8BBE\u7F6E\u53EF\u6267\u884C\u7684\u52A8\u4F5C")):a.createElement("div",{className:"pLeft8 pRight8 mTop8 Gray_75 pBottom5"},_l("\u4FEE\u6539\u4E86%0\u4E2A\u5B57\u6BB5",j.fields.length),j.errorFields.length>0?"\uFF0C":"",a.createElement("span",{className:"yellow"},j.errorFields.length||""),j.errorFields.length>0?_l("\u4E2A\u5B57\u6BB5\u5B58\u5728\u5F02\u5E38"):"")):a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u6307\u5B9A\u7684\u8282\u70B9\u5BF9\u8C61\u5DF2\u5220\u9664"));if(j.appType===H.IF.SHEET&&j.actionId===H.gp.ADD)return j.appName?a.createElement(a.Fragment,null,a.createElement("div",{className:"workflowContentInfo ellipsis workflowContentBG"},a.createElement("span",{className:"Gray_9e mRight5"},j.appTypeName),"\u201C",j.appName,"\u201D"),j.selectNodeId&&a.createElement("div",{className:"pLeft8 pRight8 mTop8 Gray_75"},_l("\u6279\u91CF\u65B0\u589E")),j.fields.length===0?a.createElement("div",{className:o()("pLeft8 pRight8 yellow pBottom5",j.selectNodeId?"mTop4":"mTop8")},_l("\u672A\u8BBE\u7F6E\u53EF\u6267\u884C\u7684\u52A8\u4F5C")):a.createElement("div",{className:o()("pLeft8 pRight8 Gray_75 pBottom5",j.selectNodeId?"mTop4":"mTop8")},_l("\u586B\u5199\u4E86%0\u4E2A\u5B57\u6BB5",j.fields.length),j.errorFields.length>0?"\uFF0C":"",a.createElement("span",{className:"yellow"},j.errorFields.length||""),j.errorFields.length>0?_l("\u4E2A\u5B57\u6BB5\u5B58\u5728\u5F02\u5E38"):"")):a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u5DE5\u4F5C\u8868\u5DF2\u5220\u9664"));if(j.appType===H.IF.SHEET&&j.actionId===H.gp.DELETE)return j.appName?a.createElement(a.Fragment,null,a.createElement("div",{className:"workflowContentInfo ellipsis workflowContentBG"},a.createElement("span",{className:"Gray_9e mRight5"},j.appTypeName),"\u201C",j.appName,"\u201D"),a.createElement("div",{className:"workflowContentInfo ellipsis Gray_75 mTop4"},_l("\u5220\u9664\u8BB0\u5F55"))):a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u6307\u5B9A\u7684\u8282\u70B9\u5BF9\u8C61\u5DF2\u5220\u9664"));if(j.appType===H.IF.SHEET&&j.actionId===H.gp.RELATION)return j.selectNodeName?!j.controlName||!j.sourceEntityName?a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u672A\u8BBE\u7F6E\u5173\u8054\u4ED6\u8868\u5B57\u6BB5")):a.createElement(a.Fragment,null,a.createElement("div",{className:"workflowContentInfo ellipsis workflowContentBG"},a.createElement("span",{className:"Gray_75 mRight5"},_l("\u5173\u8054\u8868")),"\u201C",j.sourceEntityName,"\u201D"),a.createElement("div",{className:"workflowContentInfo ellipsis mTop4 Gray_75"},_l("\u4ECE\u5173\u8054\u5B57\u6BB5\u83B7\u53D6"),a.createElement("span",null,j.executeType===0?_l("\uFF0C\u65E0\u7ED3\u679C\u65F6\u4E2D\u6B62\u6216\u6267\u884C\u67E5\u627E\u7ED3\u679C\u5206\u652F"):_l("\uFF0C\u65E0\u7ED3\u679C\u65F6\u7EE7\u7EED\u6267\u884C")))):a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u6307\u5B9A\u7684\u8282\u70B9\u5BF9\u8C61\u5DF2\u5220\u9664"));if(j.appType===H.IF.TASK)return j.appName?a.createElement(a.Fragment,null,a.createElement("div",{className:"workflowContentInfo ellipsis workflowContentBG"},a.createElement("span",{className:"Gray_9e mRight5"},j.appTypeName),"\u201C",j.appName,"\u201D"),a.createElement("div",{className:"pLeft8 pRight8 mTop4 Gray_75 pBottom5"},_l("\u586B\u5199\u4E86%0\u4E2A\u5B57\u6BB5",j.fields.length),j.errorFields.length>0?"\uFF0C":"",a.createElement("span",{className:"yellow"},j.errorFields.length||""),j.errorFields.length>0?_l("\u4E2A\u5B57\u6BB5\u5B58\u5728\u5F02\u5E38"):"")):a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u9879\u76EE\u5DF2\u5220\u9664"));if(j.appType===H.IF.PROCESS)return a.createElement("div",{className:"pLeft8 pRight8 Gray_75"},_l("\u66F4\u65B0\u4E86%0\u4E2A\u53C2\u6570",j.fields.length),j.errorFields.length>0?"\uFF0C":"",a.createElement("span",{className:"yellow"},j.errorFields.length||""),j.errorFields.length>0?_l("\u4E2A\u53C2\u6570\u5B58\u5728\u5F02\u5E38"):"");if(j.appType===H.IF.EXTERNAL_USER&&j.actionId===H.gp.ADD)return j.appName?a.createElement(a.Fragment,null,a.createElement("div",{className:"pLeft8 pRight8 ellipsis Gray_75"},j.selectNodeId?_l("\u9080\u8BF7\u591A\u540D\u7528\u6237"):_l("\u9080\u8BF71\u540D\u7528\u6237")),j.fields.length===0?a.createElement("div",{className:"pLeft8 pRight8 mTop4 yellow"},_l("\u672A\u8BBE\u7F6E\u53EF\u6267\u884C\u7684\u52A8\u4F5C")):a.createElement("div",{className:"pLeft8 pRight8 mTop4 Gray_75"},_l("\u586B\u5145%0\u4E2A\u7528\u6237\u4FE1\u606F\u5B57\u6BB5",j.fields.length),j.errorFields.length>0?"\uFF0C":"",a.createElement("span",{className:"yellow"},j.errorFields.length||""),j.errorFields.length>0?_l("\u4E2A\u5B57\u6BB5\u5B58\u5728\u5F02\u5E38"):"")):a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u5DE5\u4F5C\u8868\u5DF2\u5220\u9664"));if(j.appType===H.IF.GLOBAL_VARIABLE)return a.createElement("div",{className:"pLeft8 pRight8 Gray_75"},_l("\u66F4\u65B0\u4E86%0\u4E2A\u53D8\u91CF",j.fields.length),j.errorFields.length>0?"\uFF0C":"",a.createElement("span",{className:"yellow"},j.errorFields.length||""),j.errorFields.length>0?_l("\u4E2A\u53D8\u91CF\u5B58\u5728\u5F02\u5E38"):"");if(j.appType===H.IF.CALENDAR){if(j.actionId===H.gp.ADD){var A=j.fields.find(function(c){return c.fieldId==="create_file"}).fieldValue==="1",S=j.fields.find(function(c){return c.fieldId==="create_account_id"}),I=j.fields.find(function(c){return c.fieldId==="members"});return a.createElement(a.Fragment,null,a.createElement("div",{className:o()("pLeft8 pRight8",{pTop5:A})},a.createElement("span",{className:"Gray_75"},_l("\u6210\u5458"),"\uFF1A"),this.getMemberName(S),_l("\uFF08\u53D1\u8D77\u4EBA\uFF09"),I.fieldValue||I.fieldValueId?"\u3001":"",this.getMemberName(I)),A&&a.createElement("div",{className:"pLeft8 pRight8 Gray_75 mTop4 pBottom5"},_l("\u540C\u65F6\u751F\u6210ICS\u6587\u4EF6")))}return a.createElement("div",{className:"pLeft8 pRight8 Gray_75"},_l("\u4EC5\u751F\u6210ICS\u6587\u4EF6"))}}},{key:"getMemberName",value:function(j){return j.fieldValue?JSON.parse(j.fieldValue).map(function(A){return A.fullName}).join("\u3001"):j.fieldValueId?j.nodeName+"-"+j.fieldValueName:""}},{key:"render",value:function(){var j=this.props,A=j.processId,S=j.item,I=j.disabled,c=j.selectNodeId,q=j.openDetail,b=j.isSimple,k=V().includes([H.IF.PROCESS,H.IF.GLOBAL_VARIABLE],S.appType)?"BGBlueAsh":S.appType===H.IF.TASK?"BGGreen":S.appType===H.IF.CALENDAR?"BGRed":"BGYellow";return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":S.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:I},{errorShadow:((S.appId||S.selectNodeId)&&!V().includes([H.IF.PROCESS,H.IF.CALENDAR],S.appType)||V().includes([H.IF.PROCESS,H.IF.EXTERNAL_USER,H.IF.GLOBAL_VARIABLE,H.IF.CALENDAR],S.appType)&&(S.fields||[]).length)&&S.isException},{active:c===S.id}),onMouseDown:function(){return!I&&q(A,S.id,S.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar",!S.appId&&!S.selectNodeId&&!V().includes([H.IF.PROCESS,H.IF.CALENDAR],S.appType)||V().includes([H.IF.PROCESS,H.IF.EXTERNAL_USER,H.IF.GLOBAL_VARIABLE,H.IF.CALENDAR],S.appType)&&!(S.fields||[]).length?"BGGray":k,(0,U.wu)(S.typeId,S.appType,S.actionId))})),a.createElement(d.Z,(0,ce.default)({nodeClassName:k},this.props)),a.createElement("div",{className:"workflowContent"},b?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),a.createElement(Z.Z,this.props)))}}]),n}(a.Component)},40415:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>H});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(60341),Z=t(47170),H=function(U){(0,y.default)(f,U);function f(V){(0,L.default)(this,f);var C=(0,R.default)(this,(f.__proto__||p()(f)).call(this,V));return C.openApi=function(O){var n=C.props.item;O.stopPropagation(),window.open("/integrationApi/"+n.appId)},C}return(0,te.default)(f,[{key:"renderContent",value:function(){var C=this.props.item;return C.appId?C.appId&&!C.appName?a.createElement("div",{className:"pLeft8 pRight8 yellow"},a.createElement("i",{className:"icon-workflow_error Font18 mRight5"}),_l("API\u5DF2\u5220\u9664")):a.createElement("div",{className:"pLeft8 pRight8 flexRow",style:{alignItems:"center"}},a.createElement("div",{className:"ellipsis"},a.createElement("span",{className:"Gray_9e"},_l("\u8C03\u7528API"),"\uFF1A"),C.appName),a.createElement("i",{className:"mLeft5 icon-task-new-detail Font12 ThemeColor3 ThemeHoverColor2",onMouseDown:this.openApi}),a.createElement("div",{className:"flex"})):a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9"))}},{key:"render",value:function(){var C=this.props,O=C.processId,n=C.item,s=C.disabled,j=C.selectNodeId,A=C.openDetail,S=C.isSimple;return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":n.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:s},{errorShadow:n.appId&&!n.appName},{active:j===n.id}),onMouseDown:function(){return!s&&A(O,n.id,n.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar icon-api",n.appId?"BGBlueAsh":"BGGray")})),a.createElement(d.Z,(0,ce.default)({nodeClassName:"BGBlueAsh"},this.props)),a.createElement("div",{className:"workflowContent Font13"},S?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),a.createElement(Z.Z,this.props)))}}]),f}(a.Component)},26192:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>H});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(60341),Z=t(47170),H=function(U){(0,y.default)(f,U);function f(V){(0,L.default)(this,f);var C=(0,R.default)(this,(f.__proto__||p()(f)).call(this,V));return C.openApiPackage=function(O){var n=C.props.item;O.stopPropagation(),window.open("/integrationConnect/"+n.appId)},C}return(0,te.default)(f,[{key:"renderContent",value:function(){var C=this.props.item;return C.appId?C.appId&&!C.appName?a.createElement("div",{className:"pLeft8 pRight8 yellow"},a.createElement("i",{className:"icon-workflow_error Font18 mRight5"}),_l("API \u8FDE\u63A5\u4E0E\u8BA4\u8BC1\u5DF2\u5220\u9664")):a.createElement("div",{className:"pLeft8 pRight8 flexRow",style:{alignItems:"center"}},a.createElement("div",{className:"ellipsis"},C.appName),a.createElement("i",{className:"mLeft5 icon-task-new-detail Font12 ThemeColor3 ThemeHoverColor2",onMouseDown:this.openApiPackage}),a.createElement("div",{className:"flex"})):a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9"))}},{key:"render",value:function(){var C=this.props,O=C.processId,n=C.item,s=C.disabled,j=C.selectNodeId,A=C.openDetail,S=C.isSimple;return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":n.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:s},{errorShadow:n.appId&&!n.appName},{active:j===n.id}),onMouseDown:function(){return!s&&A(O,n.id,n.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar icon-connect",n.appId?"BGBlueAsh":"BGGray")})),a.createElement(d.Z,(0,ce.default)({nodeClassName:"BGBlueAsh"},this.props)),a.createElement("div",{className:"workflowContent Font13"},S?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),a.createElement(Z.Z,this.props)))}}]),f}(a.Component)},86467:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>V});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(37417),Z=t(60341),H=t(47170),U=t(96486),f=t.n(U),V=function(C){(0,y.default)(O,C);function O(n){return(0,L.default)(this,O),(0,R.default)(this,(O.__proto__||p()(O)).call(this,n))}return(0,te.default)(O,[{key:"renderContent",value:function(){var s=this.props.item;if(!s.selectNodeId)return a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9"));if(!s.selectNodeName)return a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u6307\u5B9A\u7684\u8282\u70B9\u5BF9\u8C61\u5DF2\u5220\u9664"));if(f().includes([1,2],s.multipleLevelType))return a.createElement(a.Fragment,null,a.createElement("div",{className:"pLeft8 pRight8"},_l("\u6309\u90E8\u95E8\u5C42\u7EA7\u9010\u7EA7\u5BA1\u6279")),s.multipleLevelAccounts&&!!s.multipleLevelAccounts.length&&a.createElement("div",{className:"pLeft8 pRight8 mTop4"},a.createElement(d.Z,(0,ce.default)({},this.props,{accounts:s.accounts,multipleLevelAccounts:s.multipleLevelAccounts}))));var j=!!s.accounts.length&&(s.accounts.length>1||s.accounts[0].type!==1)&&f().includes([1,2,4],s.countersignType);return a.createElement(a.Fragment,null,j&&a.createElement("div",{className:"workflowContentInfo ellipsis pTop5 mBottom4"},s.countersignType===1?_l("\u9700\u5168\u5458\u901A\u8FC7"):s.countersignType===2?_l("\u53EA\u9700\u4E00\u4EBA\u901A\u8FC7\uFF0C\u9700\u5168\u5458\u5426\u51B3"):_l("\u6309\u6BD4\u4F8B\u6295\u7968\u901A\u8FC7")),a.createElement("div",{className:o()("pLeft8 pRight8 pBottom5",{pTop5:!j})},a.createElement("span",{className:"Gray_75"},_l("\u5BA1\u6279\u4EBA\uFF1A")),s.accounts.length?a.createElement(d.Z,(0,ce.default)({},this.props,{accounts:s.accounts})):"[]"))}},{key:"render",value:function(){var s=this.props,j=s.processId,A=s.item,S=s.disabled,I=s.selectNodeId,c=s.openDetail,q=s.isSimple;return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":A.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:S},{errorShadow:A.selectNodeId&&A.isException},{active:I===A.id}),onMouseDown:function(){return!S&&c(j,A.id,A.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar icon-workflow_ea",A.selectNodeId?"BGViolet":"BGGray")})),a.createElement(Z.Z,(0,ce.default)({nodeClassName:"BGViolet"},this.props)),a.createElement("div",{className:"workflowContent"},q?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),A.resultTypeId?a.createElement("div",{className:"workflowLineBtn"}):a.createElement(H.Z,this.props)))}}]),O}(a.Component)},39636:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>A});var ce=t(97373),g=t.n(ce);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(94055);var L=t(63239),te=t.n(L);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(33867);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(69288);var a=t(12424),r=t(86735),o=t(67294),d=t(93967),Z=t.n(d);if(!/^(1887|7596|7798)$/.test(t.j))var H=t(47170);var U=t(71893),f=t(96486),V=t.n(f),C=t(29314),O=(0,r.Z)([`
  min-width: 309px;
  border-radius: 24px 24px 24px 24px;
  padding: 0 12px;
  &:not(.foldCurrentNode) {
    background: #ededf4;
  }
  &.foldCurrentNode {
    margin-bottom: -20px;
  }
  .addProcessNode {
    margin: 14px 0 48px;
    padding: 0 !important;
    width: auto !important;
    cursor: pointer;
    justify-content: center;
    &:hover {
      .icon-custom_add_circle {
        color: #2196f3 !important;
      }
    }
    &:not(:hover) {
      span {
        color: #757575;
      }
    }
    .icon-custom_add_circle {
      width: auto !important;
      display: flex !important;
      align-items: center;
    }
  }
  .processNodeStartLine {
    position: relative;
    width: 100%;
    height: 32px;
    margin-top: -20px;
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      margin: auto;
      width: 1px;
      height: 100%;
      background-color: #ccc;
    }
  }
  .workflowBranch {
    background: #ededf4 !important;
    > .flexColumn {
      .clearLeftBorder::before,
      .clearLeftBorder::after,
      .clearRightBorder::before,
      .clearRightBorder::after {
        background: #ededf4 !important;
      }
    }
  }
  .workflowBranchBtn,
  .icon-custom_add_circle {
    background: #ededf4 !important;
  }
  .Menu.List {
    margin-top: -6px !important;
  }
`],[`
  min-width: 309px;
  border-radius: 24px 24px 24px 24px;
  padding: 0 12px;
  &:not(.foldCurrentNode) {
    background: #ededf4;
  }
  &.foldCurrentNode {
    margin-bottom: -20px;
  }
  .addProcessNode {
    margin: 14px 0 48px;
    padding: 0 !important;
    width: auto !important;
    cursor: pointer;
    justify-content: center;
    &:hover {
      .icon-custom_add_circle {
        color: #2196f3 !important;
      }
    }
    &:not(:hover) {
      span {
        color: #757575;
      }
    }
    .icon-custom_add_circle {
      width: auto !important;
      display: flex !important;
      align-items: center;
    }
  }
  .processNodeStartLine {
    position: relative;
    width: 100%;
    height: 32px;
    margin-top: -20px;
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      margin: auto;
      width: 1px;
      height: 100%;
      background-color: #ccc;
    }
  }
  .workflowBranch {
    background: #ededf4 !important;
    > .flexColumn {
      .clearLeftBorder::before,
      .clearLeftBorder::after,
      .clearRightBorder::before,
      .clearRightBorder::after {
        background: #ededf4 !important;
      }
    }
  }
  .workflowBranchBtn,
  .icon-custom_add_circle {
    background: #ededf4 !important;
  }
  .Menu.List {
    margin-top: -6px !important;
  }
`]),n=(0,r.Z)([`
  min-width: 160px;
  max-width: 261px;
  height: 40px;
  background: #fff;
  box-shadow: 0 1px 4px rgb(0 0 0 / 16%);
  border-radius: 20px;
  padding: 0 12px 0 5px;
  position: relative;
  border: 1px solid #fff;
  transform: translateY(-20px);
  &.workflowItemDisabled {
    opacity: 0.5 !important;
  }
  &.active {
    border-color: #2196f3;
    box-shadow: 0 2px 6px rgba(33, 150, 243, 0.4), 0 6px 24px rgba(33, 150, 243, 0.4);
  }
  &.errorShadow {
    box-shadow: 0 0 1px 1px rgba(244, 67, 54, 1), 0 1px 4px rgba(0, 0, 0, 0.16);
  }
  &.errorShadow.active {
    border-color: transparent;
    box-shadow: 0 0 1px 1px rgba(244, 67, 54, 1), 0 2px 6px rgba(244, 67, 54, 0.4), 0 6px 24px rgba(33, 150, 243, 0.4);
  }
  &.foldNode {
    color: #fff;
    background: #2747f9;
    .approvalIcon {
      background: #fff;
      color: #2747f9;
    }
    .workflowOperate {
      color: rgba(255, 255, 255, 0.8);
      &:hover {
        color: #fff;
      }
    }
  }
  &:hover {
    .icon-approval {
      display: none;
    }
    .icon-external_collaboration {
      display: block;
    }
  }
  .approvalIcon {
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #2747f9;
    margin-right: 10px;
    border-radius: 50%;
    color: #fff;
    font-size: 20px;
    cursor: pointer;
    &:hover {
      background-color: #122ec9;
    }
  }
  .workflowOperate {
    color: #9e9e9e;
    &:hover {
      color: #2196f3;
    }
  }
  .workflowNodeName {
    height: 28px;
    padding: 4px;
    font-size: 15px;
    text-align: left;
    background: #efefef;
    color: #333;
    border: none;
  }
  .icon-external_collaboration {
    display: none;
  }
`],[`
  min-width: 160px;
  max-width: 261px;
  height: 40px;
  background: #fff;
  box-shadow: 0 1px 4px rgb(0 0 0 / 16%);
  border-radius: 20px;
  padding: 0 12px 0 5px;
  position: relative;
  border: 1px solid #fff;
  transform: translateY(-20px);
  &.workflowItemDisabled {
    opacity: 0.5 !important;
  }
  &.active {
    border-color: #2196f3;
    box-shadow: 0 2px 6px rgba(33, 150, 243, 0.4), 0 6px 24px rgba(33, 150, 243, 0.4);
  }
  &.errorShadow {
    box-shadow: 0 0 1px 1px rgba(244, 67, 54, 1), 0 1px 4px rgba(0, 0, 0, 0.16);
  }
  &.errorShadow.active {
    border-color: transparent;
    box-shadow: 0 0 1px 1px rgba(244, 67, 54, 1), 0 2px 6px rgba(244, 67, 54, 0.4), 0 6px 24px rgba(33, 150, 243, 0.4);
  }
  &.foldNode {
    color: #fff;
    background: #2747f9;
    .approvalIcon {
      background: #fff;
      color: #2747f9;
    }
    .workflowOperate {
      color: rgba(255, 255, 255, 0.8);
      &:hover {
        color: #fff;
      }
    }
  }
  &:hover {
    .icon-approval {
      display: none;
    }
    .icon-external_collaboration {
      display: block;
    }
  }
  .approvalIcon {
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #2747f9;
    margin-right: 10px;
    border-radius: 50%;
    color: #fff;
    font-size: 20px;
    cursor: pointer;
    &:hover {
      background-color: #122ec9;
    }
  }
  .workflowOperate {
    color: #9e9e9e;
    &:hover {
      color: #2196f3;
    }
  }
  .workflowNodeName {
    height: 28px;
    padding: 4px;
    font-size: 15px;
    text-align: left;
    background: #efefef;
    color: #333;
    border: none;
  }
  .icon-external_collaboration {
    display: none;
  }
`]),s=U.ZP.div(O),j=U.ZP.div(n);const A=function(S){var I=S.item,c=S.disabled,q=S.renderNode,b=S.hideNodes,k=S.updateHideNodes,ee=S.isCopy,re=S.processId,ie=S.updateRefreshThumbnail,le=S.deleteNode,E=S.updateNodeName,w=(0,o.useRef)(null),K=(0,o.useState)(!0),N=(0,a.Z)(K,2),F=N[0],h=N[1],z=(0,o.useState)(!1),X=(0,a.Z)(z,2),B=X[0],x=X[1],Q=(0,o.useState)(!1),i=(0,a.Z)(Q,2),m=i[0],v=i[1],W=I.processNode||{},P=W.flowNodeMap,u=P===void 0?{}:P,l=W.startEventId,T=W.id,G=V().includes(b,I.id),D=[{text:_l("\u4FEE\u6539\u540D\u79F0"),icon:"edit",events:function(){return ne()}},{text:_l("\u5220\u9664"),icon:"delete1",events:function(){y.Z.confirm({className:"deleteApprovalProcessDialog",title:o.createElement("span",{style:{color:"#f44336"}},_l("\u5220\u9664\u201C%0\u201D",I.name)),description:_l("\u8FD9\u4E9B\u5DF2\u89E6\u53D1\u7684\u6D41\u7A0B\u5B9E\u4F8B\u5C06\u4E0D\u4F1A\u88AB\u6267\u884C"),onOk:function(){le(re,I.id)}})},className:"flowNodeDel"}],M=function(){return o.createElement(j,{className:Z()("flexRow alignItemsCenter",{workflowItemDisabled:c||ee},{errorShadow:I.selectNodeId&&I.isException&&(V().isEmpty(u)||I.sourceAppId!==u[l].appId)},{foldNode:G}),onMouseDown:function(){G&&se()}},o.createElement("span",{className:"approvalIcon",onMouseDown:function(fe){fe.stopPropagation(),window.open("/workflowedit/"+T)}},o.createElement(R.Z,{type:"approval"}),o.createElement(R.Z,{type:"external_collaboration"})),o.createElement("div",{className:"flex Font14 bold ellipsis TxtCenter"},m?o.createElement("input",{type:"text",ref:w,className:"workflowNodeName",defaultValue:I.name,onMouseDown:function(fe){return fe.stopPropagation()},onKeyDown:function(fe){return fe.keyCode===13&&de(fe)},onBlur:de}):o.createElement("span",{onClick:ne},I.name)),o.createElement("span",{className:"workflowOperate mLeft10"},o.createElement(C.Z,{popupVisible:B,action:["click"],popup:B?o.createElement("div",{className:"flowNodeOperateList",style:{minWidth:180}},o.createElement("ul",null,D.map(function(he,fe){return o.createElement("li",{key:fe,className:Z()(he.className),onMouseDown:function(Y){Y.stopPropagation(),he.events(),x(!1),ae()}},o.createElement(R.Z,{icon:he.icon}),he.text)}))):o.createElement("div",null),popupAlign:{points:["tr","br"]},onPopupVisibleChange:function(fe){return x(fe)}},o.createElement("i",{className:"Font18 pointer icon-more_horiz",onMouseDown:function(fe){return fe.stopPropagation()}}))))},se=function(){var he=b.slice();V().includes(b,I.id)?V().remove(he,function(fe){return fe===I.id}):he.push(I.id),k(he),safeLocalStorageSetItem("workflowHideNodes",te()(he)),ie()},ae=function(){h(!1),setTimeout(function(){h(!0)},50)},ne=function(){v(!0),setTimeout(function(){w&&w.current.focus()},100)},de=function(he){var fe=he.currentTarget.value.trim();fe&&fe!==I.name&&E(re,I.id,fe),v(!1)};return o.createElement("div",{className:"flexColumn"},o.createElement("section",{className:"workflowBox pTop20 approvalProcessBoxBox","data-id":I.id},o.createElement(s,{className:Z()("flexColumn",{foldCurrentNode:G})},F&&!G?o.createElement(p.default,{title:function(){return o.createElement("span",{className:"workflowBranchBtnSmall Gray_9e ThemeHoverColor3 mTop7","data-tip":G?_l("\u5C55\u5F00"):_l("\u6536\u8D77"),onMouseDown:function(){w&&w.current&&w.current.blur(),x(!1),se(),ae()}},o.createElement(R.Z,{type:G?"arrow-down-border":"arrow-up-border"}))},overlayClassName:"workflowBranchTips",overlayStyle:{width:34},placement:"rightTop"},M()):M(),!G&&l&&o.createElement(o.Fragment,null,o.createElement("div",{className:"processNodeStartLine"}),!V().isEmpty(u)&&q({processId:T,data:u,firstId:l,isApproval:!0})),!l&&o.createElement("div",{className:"Font14 Bold",style:{color:"#f44336",marginTop:14,marginBottom:48}},_l("\u5BA1\u6279\u6D41\u7A0B\u5F02\u5E38\uFF0C\u8BF7\u5220\u9664\u540E\u91CD\u65B0\u914D\u7F6E")))),o.createElement(H.Z,S))}},29633:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>U});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(60341),Z=t(47170),H=t(5618),U=function(f){(0,y.default)(V,f);function V(C){return(0,L.default)(this,V),(0,R.default)(this,(V.__proto__||p()(V)).call(this,C))}return(0,te.default)(V,[{key:"renderContent",value:function(){var O=this.props.item;return O.appId?O.appId&&O.isException?a.createElement("div",{className:"pLeft8 pRight8 yellow"},a.createElement("i",{className:"icon-workflow_error Font18 mRight5"}),_l("\u672A\u83B7\u53D6\u8FD4\u56DE\u53C2\u6570")):a.createElement("div",{className:"workflowContentInfo ellipsis"},O.appType===H.IF.BASIC_AUTH&&_l("Basic Auth \u8BA4\u8BC1"),O.appType===H.IF.OAUTH2&&_l("OAuth 2.0 \u8BA4\u8BC1")):a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9"))}},{key:"render",value:function(){var O=this.props,n=O.processId,s=O.item,j=O.disabled,A=O.selectNodeId,S=O.openDetail,I=O.isSimple;return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":s.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:j},{errorShadow:s.appId&&s.isException},{active:A===s.id}),onMouseDown:function(){return!j&&S(n,s.id,s.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar icon-key1",s.appId?"BGBlueAsh":"BGGray")})),a.createElement(d.Z,(0,ce.default)({nodeClassName:"BGBlueAsh"},this.props)),a.createElement("div",{className:"workflowContent Font13"},I?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),a.createElement(Z.Z,this.props)))}}]),V}(a.Component)},86478:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>I});var ce=t(72444),g=t(52945),p=t.n(g),L=t(88239),te=t(85105),R=t.n(te),y=t(99663),a=t(22600),r=t(49135),o=t(93196),d=t(67294),Z=t(93967),H=t.n(Z),U=t(67707),f=t(60341),V=t(47170),C=t(74996),O=t(72078),n=t(96486),s=t.n(n),j=t(5618),A,S,I=(S=A=function(c){(0,o.default)(q,c);function q(b){(0,y.default)(this,q);var k=(0,r.default)(this,(q.__proto__||R()(q)).call(this,b));return k.state={isMove:!1},k}return(0,a.default)(q,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillReceiveProps",value:function(k,ee){var re=this;k.index!==this.props.index&&this.state.isMove&&setTimeout(function(){re.mounted&&re.setState({isMove:!1})},200)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"renderContent",value:function(){var k=this,ee=this.props,re=ee.item,ie=ee.prveId,le=ee.processId,E=ee.disabled,w=ee.updateBranchSort;return d.createElement("div",{className:H()("workflowName workflowBranchItem",{pBottom10:!s().includes([1,2,3,4],re.resultTypeId)&&E})},d.createElement("div",{className:"flexRow mBottom4",style:{alignItems:"center"}},d.createElement(f.Z,(0,L.default)({},this.props,{updateBranchSort:function(N,F,h){k.setState({isMove:!0}),w(N,F,h)},copyBranchNode:function(N){return k.props.dispatch((0,C.qs)(le,{prveId:ie,nodeIds:[re.id],all:N}))}}))),re.operateCondition.length?re.operateCondition.map(function(K,N){return d.createElement(d.Fragment,{key:N},K.map(function(F,h){var z=(s().includes([15,16],F.filedTypeId)||F.filedTypeId===38&&F.enumDefault===2)&&s().includes(["15","16","17","18"],F.conditionId);return d.createElement("div",{key:h,className:"workflowBranchItemTag"},d.createElement("span",{className:"ellipsis maxWidth mRight5",style:{color:F.nodeName&&F.filedValue?"#333":"#f44336"}},F.nodeName&&F.filedValue?F.nodeType===j.QZ.FORMULA?F.nodeName:F.filedValue:_l("\u5B57\u6BB5\u5DF2\u5220\u9664")),d.createElement("span",{className:"ellipsis maxWidth"},d.createElement("span",{className:"mRight5 Gray_75"},(0,O.nf)(p()({},F,{type:F.filedTypeId}),F.conditionId),z&&"*"),k.renderSingleValue(F)))}),N!==re.operateCondition.length-1&&d.createElement("div",{className:"conditionSplit"},d.createElement("span",null,_l("\u6216"))))}):d.createElement("div",{className:"workflowBranchItemTag Gray_75"},_l("\u6240\u6709\u6570\u636E\u53EF\u8FDB\u5165\u8BE5\u5206\u652F")))}},{key:"renderSingleValue",value:function(k){return k.conditionId==="1"||k.conditionId==="3"||k.conditionId==="5"||k.conditionId==="6"?this.renderOrAnd(k,_l("\u6216")):k.conditionId==="2"||k.conditionId==="4"?this.renderOrAnd(k,_l("\u548C")):k.conditionId==="15"||k.conditionId==="16"?this.renderRange(k.conditionValues):this.renderOrAnd(k)}},{key:"renderOrAnd",value:function(k,ee){return d.createElement("span",null,k.conditionValues.map(function(re,ie){return d.createElement(d.Fragment,{key:ie},re.controlId?d.createElement(d.Fragment,null,d.createElement("span",{style:{color:re.nodeName?"#333":"#f44336"}},re.nodeName||_l("\u8282\u70B9\u5DF2\u5220\u9664")),"-",d.createElement("span",{style:{color:re.controlName?"#333":"#f44336"}},re.controlName||_l("\u5B57\u6BB5\u5DF2\u5220\u9664"))):re.value&&(0,ce.default)(re.value)==="object"?re.value.value:re.value,ie!==k.conditionValues.length-1&&d.createElement("span",{className:"mLeft5 mRight5 Gray_9e"},ee))}))}},{key:"renderRange",value:function(k){return d.createElement("span",null,k[0].controlId?k[0].nodeName+"-"+k[0].controlName:k[0].value,d.createElement("span",{className:"mLeft5 mRight5"},"~"),k[1].controlId?k[1].nodeName+"-"+k[1].controlName:k[1].value)}},{key:"renderDeleteResultNode",value:function(){var k=this.props,ee=k.processId,re=k.isCopy,ie=k.item,le=k.deleteNode;return re?null:d.createElement("i",{className:"icon-workflow_cancel workflowNodeDel",onMouseDown:function(w){w.stopPropagation(),(0,U.Z)({className:"deleteNodeConfirm",title:s().includes([1,2],ie.resultTypeId)?_l("\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5BA1\u6279\u7ED3\u679C\u5206\u652F\u5417\uFF1F"):_l("\u4F60\u786E\u5B9A\u8981\u5220\u9664\u6B64\u67E5\u627E\u7ED3\u679C\u5206\u652F\u5417\uFF1F"),description:_l("\u5206\u652F\u5220\u9664\u540E\uFF0C\u8BE5\u5206\u652F\u4E0B\u7684\u6240\u6709\u8282\u70B9\u90FD\u5C06\u88AB\u5220\u9664"),okText:_l("\u5220\u9664"),onOk:function(){le(ee,ie.id)}})}})}},{key:"render",value:function(){var k=this.props,ee=k.processId,re=k.data,ie=k.item,le=k.disabled,E=k.renderNode,w=k.clearBorderType,K=k.openDetail,N=k.isCopy,F=k.isApproval,h=k.isSimple,z=this.state.isMove,X={1:_l("\u901A\u8FC7"),2:_l("\u5426\u51B3"),3:_l("\u6709\u6570\u636E"),4:_l("\u65E0\u6570\u636E")};return d.createElement("div",{className:H()("flexColumn",{Alpha2:z})},w===-1&&d.createElement("div",{className:"clearLeftBorder"}),w===1&&d.createElement("div",{className:"clearRightBorder"}),d.createElement("section",{className:"workflowBox","data-id":ie.id},d.createElement("div",{className:H()("workflowItem",{workflowItemDisabled:le||N},{workflowBranchSpecial:s().includes([1,2,3,4],ie.resultTypeId)},{errorShadow:ie.isException}),onMouseDown:function(){return!le&&!ie.resultTypeId&&K(ee,ie.id,ie.typeId)}},s().includes([1,2,3,4],ie.resultTypeId)?d.createElement(d.Fragment,null,this.renderDeleteResultNode(),d.createElement("div",{className:"workflowName flexRow"},s().includes([1,3],ie.resultTypeId)?d.createElement("div",{className:"Font15 workflowYes"},d.createElement("i",{className:"icon-check_circle mRight5 Font18"}),X[ie.resultTypeId]):d.createElement("div",{className:"Font15 workflowNo"},d.createElement("i",{className:"icon-cancel mRight5 Font18"}),X[ie.resultTypeId]))):d.createElement(d.Fragment,null,h?d.createElement("div",{className:"workflowName workflowBranchItem"},d.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D..."))):this.renderContent())),d.createElement(V.Z,this.props)),ie.nextId&&E({processId:ee,data:re,firstId:ie.nextId,isApproval:F}))}}]),q}(d.Component),A.defaultProps={clearBorderType:0},S)},54990:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>S});var ce=t(69288),g=t(95679),p=t(88239),L=t(97373),te=t.n(L),R=t(94055),y=t(63239),a=t.n(y),r=t(85105),o=t.n(r),d=t(99663),Z=t(22600),H=t(49135),U=t(93196),f=t(67294),V=t(80741),C=t(93967),O=t.n(C),n=t(86478),s=t(47170),j=t(96486),A=t.n(j),S=function(I){(0,U.default)(c,I);function c(q){(0,d.default)(this,c);var b=(0,H.default)(this,(c.__proto__||o()(c)).call(this,q));return b.state={showTips:!0,showBranchTypeDialog:!1,gatewayType:1},b.renderTips=function(){var k=b.props,ee=k.processId,re=k.item,ie=k.isCopy;return ie?null:f.createElement("div",{className:"flexRow alignItemsCenter"},f.createElement("span",{className:"workflowBranchBtnSmall Gray_9e ThemeHoverColor3","data-tip":_l("\u6DFB\u52A0\u5206\u652F"),onClick:function(){b.props.addFlowNode(ee,{prveId:re.id,name:"",typeId:2}),b.handleTipsPosition()}},f.createElement("i",{className:"icon-add"})),f.createElement("span",{className:"workflowBranchBtnBig mLeft8 mRight8","data-tip":re.gatewayType===1?_l("\u5E76\u884C\u5206\u652F"):_l("\u552F\u4E00\u5206\u652F"),onClick:function(){b.handleTipsPosition(),b.setState({showBranchTypeDialog:!0,gatewayType:re.gatewayType})}}),f.createElement("span",{className:"workflowBranchBtnSmall Gray_9e ThemeHoverColor3",onClick:b.changeShrink,"data-tip":_l("\u6536\u8D77")},f.createElement("i",{className:"icon-arrow-up-border"})))},b.changeShrink=function(){var k=b.props,ee=k.item,re=k.hideNodes,ie=k.updateHideNodes,le=k.updateRefreshThumbnail,E=re.slice();A().includes(re,ee.id)?A().remove(E,function(w){return w===ee.id}):E.push(ee.id),ie(E),safeLocalStorageSetItem("workflowHideNodes",a()(E)),le(),b.handleTipsPosition()},b.switchBranchType=function(k){var ee=b.props,re=ee.processId,ie=ee.item,le=ee.updateBranchGatewayType;le(re,ie.id,k)},b}return(0,Z.default)(c,[{key:"handleTipsPosition",value:function(){var b=this;this.setState({showTips:!1}),setTimeout(function(){b.setState({showTips:!0})},50)}},{key:"render",value:function(){var b=this,k=this.props,ee=k.data,re=k.item,ie=k.hideNodes,le=k.disabled,E=this.state,w=E.showTips,K=E.showBranchTypeDialog,N=E.gatewayType,F=!re.resultTypeId&&!le,h=A().includes(ie,re.id),z=[{text:_l("\u552F\u4E00\u5206\u652F"),value:2,desc:_l("\u6309\u7167\u4ECE\u5DE6\u5230\u53F3\u7684\u987A\u5E8F\uFF0C\u53EA\u6267\u884C\u7B2C\u4E00\u4E2A\u7B26\u5408\u6761\u4EF6\u7684\u5206\u652F\u3002\u5176\u4ED6\u5206\u652F\u5373\u4F7F\u7B26\u5408\u6761\u4EF6\u4E5F\u4E0D\u518D\u6267\u884C")},{text:_l("\u5E76\u884C\u5206\u652F"),value:1,desc:_l("\u6267\u884C\u6240\u6709\u7B26\u5408\u6761\u4EF6\u7684\u5206\u652F\u3002\u7B49\u5F85\u7F51\u5173\u5185\u6240\u6709\u5206\u652F\u5168\u90E8\u6267\u884C\u5B8C\u6210\u540E\uFF0C\u518D\u7EE7\u7EED\u6267\u884C\u7F51\u5173\u5916\u7684\u8282\u70B9")}];return f.createElement("div",{className:O()("flexColumn",{workflowBranchHide:h})},f.createElement("div",{className:O()("workflowBranch",{pTop0:!F}),"data-id":re.id},F&&w&&f.createElement(f.Fragment,null,h?f.createElement("i",{className:O()("workflowBranchBtn icon-milestone1",{ThemeColor3:h})},f.createElement("span",{className:"Font16 workflowBranchNumber bold pointer","data-tip":_l("\u5C55\u5F00"),onClick:this.changeShrink},re.flowIds.length)):f.createElement(R.default,{title:this.renderTips,overlayClassName:"workflowBranchTips",align:{offset:[0,34]}},f.createElement("i",{className:"workflowBranchBtn icon-milestone1"},f.createElement("span",{className:O()("Font16",re.gatewayType===1?"icon-all_run2":"icon-clear_bold")})))),!h&&re.flowIds.map(function(X,B){return f.createElement(n.Z,(0,p.default)({key:X},b.props,{index:B,prveId:re.id,item:ee[X],clearBorderType:B===0?-1:B===re.flowIds.length-1?1:0,flowIds:re.flowIds}))})),f.createElement(s.Z,this.props),K&&f.createElement(ce.Z,{visible:!0,width:560,title:_l("\u5206\u652F\u7C7B\u578B"),onOk:function(){b.switchBranchType(N),b.setState({showBranchTypeDialog:!1})},onCancel:function(){return b.setState({showBranchTypeDialog:!1})}},z.map(function(X,B){return f.createElement("div",{className:O()("flexColumn",{mTop15:B>0}),key:B},f.createElement(g.Z,{className:"Font15 bold",text:X.text,checked:X.value===N,onClick:function(){return b.setState({gatewayType:X.value})}}),f.createElement("div",{className:"mTop5 mLeft30 Gray_75"},X.desc))})))}}]),c}(f.Component)},48663:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>f});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(37417),Z=t(60341),H=t(47170),U=t(5618),f=function(V){(0,y.default)(C,V);function C(O){return(0,L.default)(this,C),(0,R.default)(this,(C.__proto__||p()(C)).call(this,O))}return(0,te.default)(C,[{key:"renderContent",value:function(){var n=this.props.item;return!n.accounts.length&&!n.selectNodeId?a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9")):n.selectNodeId&&!n.selectNodeName?a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u6307\u5B9A\u7684\u53D1\u9001\u8BB0\u5F55\u5DF2\u5220\u9664")):a.createElement(a.Fragment,null,a.createElement("div",{className:"pLeft8 pRight8 pTop5 pBottom5"},a.createElement("span",{className:"Gray_75"},_l("\u901A\u77E5\u4EBA\uFF1A")),a.createElement(d.Z,(0,ce.default)({},this.props,{accounts:n.accounts}))),n.isException&&a.createElement("div",{className:"pLeft8 pRight8 pBottom5 yellow"},a.createElement("i",{className:"icon-workflow_error Font18 mRight5"}),_l("\u901A\u77E5\u5185\u5BB9\u5B58\u5728\u5F02\u5E38")))}},{key:"render",value:function(){var n=this.props,s=n.processId,j=n.item,A=n.disabled,S=n.selectNodeId,I=n.openDetail,c=n.isSimple;return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":j.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:A},{errorShadow:(!!j.accounts.length||j.selectNodeId)&&j.isException},{active:S===j.id}),onMouseDown:function(){return!A&&I(s,j.id,j.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar",j.accounts.length||j.selectNodeId?"BGBlue":"BGGray",j.typeId===U.QZ.CC?"icon-workflow_notice":"icon-hr_message_reminder")})),a.createElement(Z.Z,(0,ce.default)({nodeClassName:"BGBlue"},this.props)),a.createElement("div",{className:"workflowContent"},c?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),a.createElement(H.Z,this.props)))}}]),C}(a.Component)},26888:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>U});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(60341),Z=t(47170),H=t(5618),U=function(f){(0,y.default)(V,f);function V(C){return(0,L.default)(this,V),(0,R.default)(this,(V.__proto__||p()(V)).call(this,C))}return(0,te.default)(V,[{key:"renderContent",value:function(){var O=this.props.item;return O.code?O.isException?a.createElement("div",{className:"pLeft8 pRight8 yellow"},a.createElement("i",{className:"icon-workflow_error Font18 mRight5"}),_l("\u6570\u636E\u5F02\u5E38")):a.createElement("div",{className:"pLeft8 pRight8"},O.actionId===H.gp.JAVASCRIPT?_l("\u4F7F\u7528JavaScript\u8BED\u8A00"):_l("\u4F7F\u7528Python\u8BED\u8A00")):a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9"))}},{key:"render",value:function(){var O=this.props,n=O.processId,s=O.item,j=O.disabled,A=O.selectNodeId,S=O.openDetail,I=O.isSimple;return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":s.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:j},{errorShadow:!!s.code&&s.isException},{active:A===s.id}),onMouseDown:function(){return!j&&S(n,s.id,s.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar icon-url",s.code?"BGBlueAsh":"BGGray")})),a.createElement(d.Z,(0,ce.default)({nodeClassName:"BGBlueAsh"},this.props)),a.createElement("div",{className:"workflowContent Font13"},I?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),a.createElement(Z.Z,this.props)))}}]),V}(a.Component)},94886:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>C});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(60341),Z=t(47170),H=t(5618),U=t(30381),f=t.n(U),V={0:_l("\u5F53\u5929"),1:_l("\u4E4B\u524D"),2:_l("\u4E4B\u540E")},C=function(O){(0,y.default)(n,O);function n(){return(0,L.default)(this,n),(0,R.default)(this,(n.__proto__||p()(n)).apply(this,arguments))}return(0,te.default)(n,[{key:"checkHasContent",value:function(){var j=this.props.item,A=j.timerNode;return A?A.actionId==="300"?!!A.fieldValue||!!A.fieldControlId||!!A.fieldNodeId:!!A.numberFieldValue.fieldValue||!!A.numberFieldValue.fieldControlId||!!A.hourFieldValue.fieldValue||!!A.hourFieldValue.fieldControlId||!!A.minuteFieldValue.fieldValue||!!A.minuteFieldValue.fieldControlId||!!A.secondFieldValue.fieldValue||!!A.secondFieldValue.fieldControlId:!1}},{key:"renderDelayDateText",value:function(j){var A=j.executeTimeType,S=j.fieldValue,I=j.fieldControlName,c=j.number,q=j.time,b=j.unit;c||(A=0);var k=A?V[A]+" "+c+" "+H.rO[b]+" "+(q||""):""+(q||"");return S?a.createElement("span",null,f()(S).format("YYYY-MM-DD")+" "+k+" "):a.createElement("span",null,a.createElement("span",{className:o()({red:!I})},I||_l("\u5B57\u6BB5\u4E0D\u5B58\u5728"))," ",k)}},{key:"renderDelayTimeText",value:function(j){var A=j.numberFieldValue,S=j.hourFieldValue,I=j.minuteFieldValue,c=j.secondFieldValue,q=function(k,ee){var re=k.fieldValue,ie=k.fieldControlId,le=k.fieldControlName;return!re&&!ie?"":a.createElement("span",{className:"mRight5"},a.createElement("span",{className:o()("mRight5",{red:ie&&!le})},re||(le?"{"+le+"}":_l("\u5B57\u6BB5\u4E0D\u5B58\u5728"))),ee)};return a.createElement(a.Fragment,null,q(A,_l("\u5929")),q(S,_l("\u5C0F\u65F6")),q(I,_l("\u5206\u949F")),q(c,_l("\u79D2\u949F")))}},{key:"renderContent",value:function(){var j=this.props.item,A=j.timerNode;return this.checkHasContent()?a.createElement("div",{className:"pLeft8 pRight8"},A.actionId==="300"?this.renderDelayDateText(A):this.renderDelayTimeText(A)):a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9"))}},{key:"render",value:function(){var j=this.props,A=j.processId,S=j.item,I=j.disabled,c=j.selectNodeId,q=j.openDetail,b=j.isSimple;return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":S.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:I},{errorShadow:this.checkHasContent()&&S.isException},{active:c===S.id}),onMouseDown:function(){return!I&&q(A,S.id,S.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar icon-workflow_delayed",this.checkHasContent()?"BGBlueAsh":"BGGray")})),a.createElement(d.Z,(0,ce.default)({nodeClassName:"BGBlueAsh"},this.props)),a.createElement("div",{className:"workflowContent Font13"},b?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),a.createElement(Z.Z,this.props)))}}]),n}(a.Component)},24636:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>f});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(37417),Z=t(60341),H=t(47170),U=t(72078),f=function(V){(0,y.default)(C,V);function C(){return(0,L.default)(this,C),(0,R.default)(this,(C.__proto__||p()(C)).apply(this,arguments))}return(0,te.default)(C,[{key:"renderContent",value:function(){var n=this.props.item;return n.accounts.length?n.isException?a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u672A\u5B8C\u6210\u90AE\u4EF6\u8BBE\u7F6E")):a.createElement("div",{className:"pLeft8 pRight8"},a.createElement("div",{className:"pTop5"},a.createElement("span",{className:"Gray_75"},_l("\u6536\u4EF6\u4EBA\uFF1A")),a.createElement(d.Z,(0,ce.default)({},this.props,{accounts:n.accounts}))),a.createElement("div",{className:"pBottom5 mTop4"},a.createElement("span",{className:"Gray_75"},_l("\u4E3B\u9898\uFF1A")),a.createElement("span",null,(0,U.DN)(n.emailSubject,n.formulaMap)||_l("\u65E0\u4E3B\u9898")))):a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9"))}},{key:"render",value:function(){var n=this.props,s=n.processId,j=n.item,A=n.disabled,S=n.selectNodeId,I=n.openDetail,c=n.isSimple;return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":j.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:A},{errorShadow:!!j.accounts.length&&j.isException},{active:S===j.id}),onMouseDown:function(){return!A&&I(s,j.id,j.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar icon-workflow_email",j.accounts.length?"BGBlue":"BGGray")})),a.createElement(Z.Z,(0,ce.default)({nodeClassName:"BGBlue"},this.props)),a.createElement("div",{className:"workflowContent Font13"},c?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),a.createElement(H.Z,this.props)))}}]),C}(a.Component)},63186:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>H});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(60341),Z=t(47170),H=function(U){(0,y.default)(f,U);function f(V){return(0,L.default)(this,f),(0,R.default)(this,(f.__proto__||p()(f)).call(this,V))}return(0,te.default)(f,[{key:"renderContent",value:function(){var C=this.props.item;return!C.appId&&!C.selectNodeId?a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9")):C.appId&&!C.appName?a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u5DE5\u4F5C\u8868\u5DF2\u5220\u9664")):C.selectNodeId&&!C.selectNodeName?a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u6307\u5B9A\u7684\u8282\u70B9\u5BF9\u8C61\u5DF2\u5220\u9664")):a.createElement("div",{className:"workflowContentInfo ellipsis workflowContentBG"},a.createElement("span",{className:"Gray_75"},_l("\u5DE5\u4F5C\u8868")),"\u201C",C.appName,"\u201D")}},{key:"render",value:function(){var C=this.props,O=C.processId,n=C.item,s=C.disabled,j=C.selectNodeId,A=C.openDetail,S=C.isSimple;return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":n.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:s},{errorShadow:(n.appId||n.selectNodeId)&&n.isException},{active:j===n.id}),onMouseDown:function(){return!s&&A(O,n.id,n.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar icon-print",n.selectNodeId?"BGBlueAsh":"BGGray")})),a.createElement(d.Z,(0,ce.default)({nodeClassName:"BGBlueAsh"},this.props)),a.createElement("div",{className:"workflowContent Font13"},S?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),a.createElement(Z.Z,this.props)))}}]),f}(a.Component)},72646:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>V});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(60341),Z=t(47170),H=t(5618),U=t(96486),f=t.n(U),V=function(C){(0,y.default)(O,C);function O(n){return(0,L.default)(this,O),(0,R.default)(this,(O.__proto__||p()(O)).call(this,n))}return(0,te.default)(O,[{key:"renderContent",value:function(){var s=this.props.item;return f().includes([H.gp.FROM_WORKSHEET,H.gp.WORKSHEET_FIND],s.actionId)?a.createElement("div",{className:"pLeft8 pRight8"},s.appType===H.IF.EXTERNAL_USER?H.QZ.FIND_SINGLE_MESSAGE===s.typeId?_l("\u4ECE\u5F53\u524D\u5E94\u7528\u83B7\u53D6"):_l("\u4ECE\u5F53\u524D\u5E94\u7528\u83B7\u53D6\u591A\u6761\u4FE1\u606F"):H.QZ.FIND_SINGLE_MESSAGE===s.typeId?_l("\u4ECE\u5F53\u524D\u7EC4\u7EC7\u83B7\u53D6"):_l("\u4ECE\u5F53\u524D\u7EC4\u7EC7\u83B7\u53D6\u591A\u6761\u4FE1\u606F")):s.selectNodeId?s.isException?a.createElement("div",{className:"pLeft8 pRight8 yellow"},a.createElement("i",{className:"icon-workflow_error Font18 mRight5"}),_l("\u8282\u70B9\u5B58\u5728\u5F02\u5E38")):a.createElement(a.Fragment,null,a.createElement("div",{className:"pLeft8 pRight8 ellipsis"},s.appType===H.IF.EXTERNAL_USER?H.QZ.FIND_SINGLE_MESSAGE===s.typeId?_l("\u4ECE\u5916\u90E8\u7528\u6237\u5B57\u6BB5\u83B7\u53D6"):_l("\u4ECE\u5916\u90E8\u7528\u6237\u5B57\u6BB5\u83B7\u53D6\u591A\u6761\u4FE1\u606F"):H.QZ.FIND_SINGLE_MESSAGE===s.typeId?_l("\u4ECE\u5B57\u6BB5\u83B7\u53D6"):_l("\u4ECE\u5B57\u6BB5\u83B7\u53D6\u591A\u6761\u4FE1\u606F"),H.QZ.FIND_SINGLE_MESSAGE===s.typeId&&a.createElement("span",null,s.executeType===0?_l("\uFF0C\u65E0\u7ED3\u679C\u65F6\u4E2D\u6B62\u6216\u6267\u884C\u67E5\u627E\u7ED3\u679C\u5206\u652F"):_l("\uFF0C\u65E0\u7ED3\u679C\u65F6\u7EE7\u7EED\u6267\u884C")))):a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9"))}},{key:"render",value:function(){var s=this.props,j=s.processId,A=s.item,S=s.disabled,I=s.selectNodeId,c=s.openDetail,q=s.isSimple,b=f().includes([H.gp.FROM_WORKSHEET,H.gp.WORKSHEET_FIND],A.actionId);return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":A.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:S},{errorShadow:(!!A.selectNodeId||b)&&A.isException},{active:I===A.id}),onMouseDown:function(){return!S&&c(j,A.id,A.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar",A.appType===H.IF.EXTERNAL_USER?A.typeId===H.QZ.FIND_SINGLE_MESSAGE?"icon-external_users":"icon-folder-public":A.typeId===H.QZ.FIND_SINGLE_MESSAGE?"icon-person_search":"icon-group-members",A.selectNodeId||b?"BGBlue":"BGGray")})),a.createElement(d.Z,(0,ce.default)({nodeClassName:"BGBlue"},this.props)),a.createElement("div",{className:"workflowContent Font13"},q?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),a.createElement(Z.Z,this.props)))}}]),O}(a.Component)},19836:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>f});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(60341),Z=t(47170),H=t(5618),U=t(89499),f=function(V){(0,y.default)(C,V);function C(O){return(0,L.default)(this,C),(0,R.default)(this,(C.__proto__||p()(C)).call(this,O))}return(0,te.default)(C,[{key:"renderContent",value:function(){var n=this.props.item,s=n.fieldValue,j=s===void 0?"":s,A=n.fieldControlName,S=A===void 0?"":A,I=n.formulaValue,c=n.formulaMap,q=n.actionId,b=n.isException,k=n.selectNodeId,ee=n.selectNodeName,re=n.appId,ie=n.fields;if(!_.includes([H.gp.OBJECT_TOTAL,H.gp.WORKSHEET_TOTAL,H.gp.CUSTOM_ACTION_TOTAL],q)&&!I||_.includes([H.gp.OBJECT_TOTAL,H.gp.CUSTOM_ACTION_TOTAL],q)&&!k||q===H.gp.WORKSHEET_TOTAL&&!re)return a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9"));if(q===H.gp.OBJECT_TOTAL)return ee?a.createElement("div",{className:"pLeft8 pRight8 ellipsis Gray_75"},_l("\u83B7\u53D6\u6570\u636E\u6761\u6570")):a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u6307\u5B9A\u7684\u8282\u70B9\u5BF9\u8C61\u5DF2\u5220\u9664"));if(b)return a.createElement("div",{className:"pLeft8 pRight8 yellow"},a.createElement("i",{className:"icon-workflow_error Font18 mRight5"}),_l("\u8282\u70B9\u5B58\u5728\u5F02\u5E38"));if(q===H.gp.WORKSHEET_TOTAL)return n.appId&&!n.appName?a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u5DE5\u4F5C\u8868\u5DF2\u5220\u9664")):a.createElement(a.Fragment,null,a.createElement("div",{className:"workflowContentInfo ellipsis workflowContentBG"},a.createElement("span",{className:"Gray_75"},_l("\u5DE5\u4F5C\u8868")),"\u201C",n.appName,"\u201D"),a.createElement("div",{className:"workflowContentInfo ellipsis mTop4 pBottom5"},_l("\u6C47\u603B\u65B9\u5F0F\uFF1A"),ie&&ie[0].fieldId?ie[0].fieldName+"\uFF08"+U.Zu.find(function(E){return E.value===ie[0].enumDefault}).label+"\uFF09":_l("\u8BB0\u5F55\u6570\u91CF")));if(q===H.gp.CUSTOM_ACTION_TOTAL)return a.createElement(a.Fragment,null,a.createElement("div",{className:"workflowContentInfo ellipsis"},_l("\u6C47\u603B\u65B9\u5F0F\uFF1A"),ie&&ie[0].fieldId?ie[0].fieldName+"\uFF08"+U.Zu.find(function(E){return E.value===ie[0].enumDefault}).label+"\uFF09":_l("\u8BB0\u5F55\u6570\u91CF")));if(q!==H.gp.DATE_DIFF_FORMULA){var le=I.match(/\$[^ \r\n]+?\$/g);le&&le.forEach(function(E){I=I.replace(E,(c[E.replace(/\$/g,"").split(/([a-zA-Z0-9#]{24,32})-/).filter(function(w){return w}).join("-")]||{}).name||"")}),I=I.replace(/\+/g," + ").replace(/\-/g," - ").replace(/\*/g," * ").replace(/\//g," / ")}return a.createElement(a.Fragment,null,a.createElement("div",{className:"pLeft8 pRight8 breakAll"},a.createElement("span",{className:"Gray_75"},q===H.gp.FUNCTION_CALCULATION?_l("\u8BA1\u7B97\uFF1A"):_l("\u8FD0\u7B97\uFF1A")),j+S+I))}},{key:"render",value:function(){var n=this.props,s=n.processId,j=n.item,A=n.disabled,S=n.selectNodeId,I=n.openDetail,c=n.isSimple;return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":j.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:A},{errorShadow:!!j.formulaValue&&j.isException||j.selectNodeId&&!j.selectNodeName},{active:S===j.id}),onMouseDown:function(){return!A&&I(s,j.id,j.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar",_.includes([H.gp.OBJECT_TOTAL,H.gp.WORKSHEET_TOTAL,H.gp.CUSTOM_ACTION_TOTAL],j.actionId)?"icon-sigma":"icon-workflow_function",j.formulaValue||j.selectNodeId||j.appId?"BGGreen":"BGGray")})),a.createElement(d.Z,(0,ce.default)({nodeClassName:"BGGreen"},this.props)),a.createElement("div",{className:"workflowContent Font13"},c?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),a.createElement(Z.Z,this.props)))}}]),C}(a.Component)},62483:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>C});var ce=t(88239),g=t(88106),p=t(85105),L=t.n(p),te=t(99663),R=t(22600),y=t(49135),a=t(93196),r=t(67294),o=t(93967),d=t.n(o),Z=t(60341),H=t(47170),U=t(5618),f=t(96486),V=t.n(f),C=function(O){(0,a.default)(n,O);function n(s){return(0,te.default)(this,n),(0,y.default)(this,(n.__proto__||L()(n)).call(this,s))}return(0,R.default)(n,[{key:"renderContent",value:function(){var j,A=this.props.item,S=(j={},(0,g.default)(j,U.gp.FROM_WORKSHEET,_l("\u4ECE\u5DE5\u4F5C\u8868\u83B7\u53D6\u591A\u6761\u8BB0\u5F55")),(0,g.default)(j,U.gp.FROM_RECORD,_l("\u4ECE\u4E00\u6761\u8BB0\u5F55\u83B7\u53D6\u591A\u6761\u5173\u8054\u8BB0\u5F55")),(0,g.default)(j,U.gp.FROM_ADD,_l("\u4ECE\u65B0\u589E\u8BB0\u5F55\u8282\u70B9\u83B7\u53D6\u591A\u6761\u8BB0\u5F55")),(0,g.default)(j,U.gp.FROM_ARRAY,_l("\u4ECE\u53D1\u9001API\u8BF7\u6C42\u6570\u7EC4\u83B7\u53D6\u6570\u636E")),(0,g.default)(j,U.gp.FROM_CODE_ARRAY,_l("\u4ECE\u4EE3\u7801\u5757\u6570\u7EC4\u83B7\u53D6\u6570\u636E")),(0,g.default)(j,U.gp.FROM_ARTIFICIAL,_l("\u4ECE\u4EBA\u5DE5\u8282\u70B9\u83B7\u53D6\u64CD\u4F5C\u660E\u7EC6\u6570\u636E")),(0,g.default)(j,U.gp.FROM_PBC_INPUT_ARRAY,_l("\u4ECE\u4E1A\u52A1\u6D41\u7A0B\u8F93\u5165\u6570\u7EC4\u83B7\u53D6\u6570\u636E")),(0,g.default)(j,U.gp.FROM_PBC_OUTPUT_ARRAY,_l("\u4ECE\u4E1A\u52A1\u6D41\u7A0B\u8F93\u51FA\u6570\u7EC4\u83B7\u53D6\u6570\u636E")),(0,g.default)(j,U.gp.FROM_API_ARRAY,_l("\u4ECEAPI\u6570\u7EC4\u83B7\u53D6\u6570\u636E")),(0,g.default)(j,U.gp.FROM_JSON_PARSE_ARRAY,_l("\u4ECEJSON\u89E3\u6790\u6570\u7EC4\u83B7\u53D6\u6570\u636E")),(0,g.default)(j,U.gp.BATCH_UPDATE,_l("\u6279\u91CF\u66F4\u65B0\u8BB0\u5F55")),(0,g.default)(j,U.gp.BATCH_DELETE,_l("\u6279\u91CF\u5220\u9664\u8BB0\u5F55")),j);return!A.appId&&!A.selectNodeId?r.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9")):A.isException?r.createElement("div",{className:"pLeft8 pRight8 yellow"},r.createElement("i",{className:"icon-workflow_error Font18 mRight5"}),_l("\u672A\u914D\u7F6E\u6709\u6548\u53C2\u6570")):V().includes([U.gp.FROM_ARRAY,U.gp.FROM_CODE_ARRAY,U.gp.FROM_PBC_INPUT_ARRAY,U.gp.FROM_PBC_OUTPUT_ARRAY,U.gp.FROM_API_ARRAY,U.gp.FROM_JSON_PARSE_ARRAY],A.actionId)?r.createElement("div",{className:"pLeft8 pRight8 ellipsis Gray_75"},S[A.actionId]):r.createElement(r.Fragment,null,r.createElement("div",{className:"workflowContentInfo ellipsis workflowContentBG"},r.createElement("span",{className:"Gray_75"},_l("\u5DE5\u4F5C\u8868")),"\u201C",A.appName,"\u201D"),A.actionId===U.gp.BATCH_UPDATE?r.createElement("div",{className:"workflowContentInfo Gray_75 mTop4 pBottom5"},_l("\u4FEE\u6539\u4E86%0\u4E2A\u5B57\u6BB5",A.fields.length),A.errorFields.length>0?"\uFF0C":"",r.createElement("span",{className:"yellow"},A.errorFields.length||""),A.errorFields.length>0?_l("\u4E2A\u5B57\u6BB5\u5B58\u5728\u5F02\u5E38"):""):r.createElement("div",{className:"workflowContentInfo ellipsis Gray_75 mTop4 pBottom5"},S[A.actionId]))}},{key:"render",value:function(){var j=this.props,A=j.processId,S=j.item,I=j.disabled,c=j.selectNodeId,q=j.openDetail,b=j.isSimple;return r.createElement("div",{className:"flexColumn"},r.createElement("section",{className:"workflowBox","data-id":S.id},r.createElement("div",{className:d()("workflowItem",{workflowItemDisabled:I},{errorShadow:(S.appId||S.selectNodeId)&&S.isException},{active:c===S.id}),onMouseDown:function(){return!I&&q(A,S.id,S.typeId)}},r.createElement("div",{className:"workflowAvatars flexRow"},r.createElement("i",{className:d()("workflowAvatar icon-transport",S.appId||S.selectNodeId?"BGYellow":"BGGray")})),r.createElement(Z.Z,(0,ce.default)({nodeClassName:"BGYellow"},this.props)),r.createElement("div",{className:"workflowContent Font13"},b?r.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),r.createElement(H.Z,this.props)))}}]),n}(r.Component)},57750:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>H});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(60341),Z=t(47170),H=function(U){(0,y.default)(f,U);function f(V){return(0,L.default)(this,f),(0,R.default)(this,(f.__proto__||p()(f)).call(this,V))}return(0,te.default)(f,[{key:"renderContent",value:function(){var C=this.props.item;return C.selectNodeId?C.selectNodeName?a.createElement("div",{className:"workflowContentInfo ellipsis"},_l("%0\u4E2A\u8F93\u51FA\u53C2\u6570",C.count||0)):a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u6307\u5B9A\u7684\u8282\u70B9\u5BF9\u8C61\u5DF2\u5220\u9664")):a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9"))}},{key:"render",value:function(){var C=this.props,O=C.processId,n=C.item,s=C.disabled,j=C.selectNodeId,A=C.openDetail,S=C.isSimple;return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":n.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:s},{errorShadow:!!n.selectNodeId&&n.isException},{active:j===n.id}),onMouseDown:function(){return!s&&A(O,n.id,n.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar icon-task_custom_polymer",n.selectNodeId?"BGBlueAsh":"BGGray")})),a.createElement(d.Z,(0,ce.default)({nodeClassName:"BGBlueAsh"},this.props)),a.createElement("div",{className:"workflowContent Font13"},S?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),a.createElement(Z.Z,this.props)))}}]),f}(a.Component)},6861:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>H});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(60341),Z=t(47170),H=function(U){(0,y.default)(f,U);function f(V){return(0,L.default)(this,f),(0,R.default)(this,(f.__proto__||p()(f)).call(this,V))}return(0,te.default)(f,[{key:"renderContent",value:function(){var C=this.props.item;return!C.appId&&!C.selectNodeId?a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9")):C.appId&&!C.appName?a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u5DE5\u4F5C\u8868\u5DF2\u5220\u9664")):C.selectNodeId&&!C.selectNodeName?a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u6307\u5B9A\u7684\u8282\u70B9\u5BF9\u8C61\u5DF2\u5220\u9664")):a.createElement(a.Fragment,null,a.createElement("div",{className:"workflowContentInfo ellipsis workflowContentBG"},a.createElement("span",{className:"Gray_75"},_l("\u5DE5\u4F5C\u8868")),"\u201C",C.appName,"\u201D"),a.createElement("div",{className:o()("workflowContentInfo ellipsis Gray_75 mTop4 pBottom5",{yellow:C.isException})},C.isException?a.createElement(a.Fragment,null,a.createElement("i",{className:"icon-workflow_error Font18 mRight5"}),_l("\u94FE\u63A5\u540D\u79F0\u5B58\u5728\u5F02\u5E38")):C.linkType===1?_l("\u83B7\u53D6\u8BB0\u5F55\u5206\u4EAB\u94FE\u63A5"):_l("\u83B7\u53D6\u8BB0\u5F55\u586B\u5199\u94FE\u63A5")))}},{key:"render",value:function(){var C=this.props,O=C.processId,n=C.item,s=C.disabled,j=C.selectNodeId,A=C.openDetail,S=C.isSimple;return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":n.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:s},{errorShadow:(n.appId||n.selectNodeId)&&n.isException},{active:j===n.id}),onMouseDown:function(){return!s&&A(O,n.id,n.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar icon-link2",n.appId?"BGBlueAsh":"BGGray")})),a.createElement(d.Z,(0,ce.default)({nodeClassName:"BGBlueAsh"},this.props)),a.createElement("div",{className:"workflowContent Font13"},S?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),a.createElement(Z.Z,this.props)))}}]),f}(a.Component)},69154:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>f});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(37417),Z=t(60341),H=t(47170),U=t(72078),f=function(V){(0,y.default)(C,V);function C(O){return(0,L.default)(this,C),(0,R.default)(this,(C.__proto__||p()(C)).call(this,O))}return(0,te.default)(C,[{key:"renderContent",value:function(){var n=this.props.item;return n.smsContent?n.isException?a.createElement("div",{className:"pLeft8 pRight8 yellow"},a.createElement("i",{className:"icon-workflow_error Font18 mRight5"}),_l("\u5185\u5BB9\u5B58\u5728\u5F02\u5E38")):a.createElement("div",{className:"pLeft8 pRight8"},a.createElement("div",{className:"pTop5"},a.createElement("span",{className:"Gray_75"},_l("\u53D1\u9001\u7ED9: ")),a.createElement(d.Z,(0,ce.default)({},this.props,{accounts:n.accounts}))),a.createElement("div",{className:"pBottom5 mTop4"},n.templateStatus===0&&a.createElement("span",{className:"yellow"},_l("\u6A21\u677F\u5BA1\u6838\u4E2D...")),n.templateStatus===2&&a.createElement("span",{className:"red"},_l("\u6A21\u677F\u5BA1\u6838\u5931\u8D25\uFF01")),a.createElement("span",{className:o()({Gray_75:n.templateStatus!==1})},"\u3010",n.companySignature,"\u3011",(0,U.DN)(n.smsContent,n.formulaMap)))):a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9"))}},{key:"render",value:function(){var n=this.props,s=n.processId,j=n.item,A=n.disabled,S=n.selectNodeId,I=n.openDetail,c=n.isSimple;return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":j.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:A},{errorShadow:!!j.smsContent&&j.isException},{active:S===j.id}),onMouseDown:function(){return!A&&I(s,j.id,j.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar icon-workflow_sms",j.smsContent?"BGBlue":"BGGray")})),a.createElement(Z.Z,(0,ce.default)({nodeClassName:"BGBlue"},this.props)),a.createElement("div",{className:"workflowContent Font13"},c?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),a.createElement(H.Z,this.props)))}}]),C}(a.Component)},9:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>U});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(60341),Z=t(47170),H=t(5618),U=function(f){(0,y.default)(V,f);function V(C){(0,L.default)(this,V);var O=(0,R.default)(this,(V.__proto__||p()(V)).call(this,C));return O.openProcess=function(n){var s=O.props.item;n.stopPropagation(),window.open("/workflowedit/"+s.appId)},O}return(0,te.default)(V,[{key:"renderContent",value:function(){var O=this.props.item,n=O.actionId===H.gp.PBC_OUT;return O.appId?O.appId&&!O.appName&&!n?a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u6307\u5B9A\u7684\u4E1A\u52A1\u6D41\u7A0B\u5DF2\u5220\u9664")):n?a.createElement("div",{className:"workflowContentInfo ellipsis"},_l("%0\u4E2A\u8F93\u51FA\u53C2\u6570",O.count)):a.createElement("div",{className:"pLeft8 pRight8 flexRow",style:{alignItems:"center"}},a.createElement("div",{className:"ellipsis"},a.createElement("span",{className:"Gray_75"},_l("\u8C03\u7528\u5C01\u88C5\u4E1A\u52A1\u6D41\u7A0B\uFF1A")),O.appName),a.createElement("i",{className:"mLeft5 icon-task-new-detail Font12 ThemeColor3 ThemeHoverColor2",onMouseDown:this.openProcess}),a.createElement("div",{className:"flex"})):a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9"))}},{key:"render",value:function(){var O=this.props,n=O.processId,s=O.item,j=O.disabled,A=O.selectNodeId,S=O.openDetail,I=O.isSimple,c=s.actionId===H.gp.PBC_OUT;return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":s.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:j},{errorShadow:s.appId&&s.isException},{active:A===s.id}),onMouseDown:function(){return!j&&S(n,s.id,s.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar",c?"icon-output":"icon-pbc",s.appId?"BGBlueAsh":"BGGray")})),a.createElement(d.Z,(0,ce.default)({nodeClassName:"BGBlueAsh"},this.props,{noDelete:c,noCopy:c})),a.createElement("div",{className:"workflowContent Font13"},I?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),a.createElement(Z.Z,(0,ce.default)({},this.props,{disabled:c}))))}}]),V}(a.Component)},80451:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>U});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(60341),Z=t(47170),H=t(5618),U=function(f){(0,y.default)(V,f);function V(C){return(0,L.default)(this,V),(0,R.default)(this,(V.__proto__||p()(V)).call(this,C))}return(0,te.default)(V,[{key:"renderContent",value:function(){var O=this.props.item;return O.pushType?O.pushType&&O.isException?a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u8282\u70B9\u914D\u7F6E\u6709\u8BEF")):a.createElement(a.Fragment,null,a.createElement("div",{className:"pLeft8 pRight8 ellipsis"},H.XO.find(function(n){return n.value===O.pushType}).text)):a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9"))}},{key:"render",value:function(){var O=this.props,n=O.processId,s=O.item,j=O.disabled,A=O.selectNodeId,S=O.openDetail,I=O.isSimple;return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":s.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:j},{active:A===s.id},{errorShadow:s.pushType&&s.isException}),onMouseDown:function(){return!j&&S(n,s.id,s.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar icon-interface_push",s.pushType?"BGBlue":"BGGray")})),a.createElement(d.Z,(0,ce.default)({nodeClassName:"BGBlue"},this.props)),a.createElement("div",{className:"workflowContent Font13"},I?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),a.createElement(Z.Z,this.props)))}}]),V}(a.Component)},75500:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>U});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(60341),Z=t(47170),H=t(5618),U=function(f){(0,y.default)(V,f);function V(C){return(0,L.default)(this,V),(0,R.default)(this,(V.__proto__||p()(V)).call(this,C))}return(0,te.default)(V,[{key:"renderContent",value:function(){var O=this.props.item;return!O.appId&&!O.selectNodeId?a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9")):O.appId&&!O.appName?a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u5DE5\u4F5C\u8868\u5DF2\u5220\u9664")):O.selectNodeId&&!O.selectNodeName?a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u6307\u5B9A\u7684\u8282\u70B9\u5BF9\u8C61\u5DF2\u5220\u9664")):O.selectNodeId?a.createElement("div",{className:"pLeft8 pRight8 ellipsis"},_l("\u4ECE\u591A\u6761\u6570\u636E\u8282\u70B9\u83B7\u53D6"),a.createElement("span",null,O.executeType===0?_l("\uFF0C\u65E0\u7ED3\u679C\u65F6\u4E2D\u6B62\u6216\u6267\u884C\u67E5\u627E\u7ED3\u679C\u5206\u652F"):_l("\uFF0C\u65E0\u7ED3\u679C\u65F6\u7EE7\u7EED\u6267\u884C"))):O.actionId===H.gp.RECORD_UPDATE&&O.isException?a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u5FC5\u987B\u914D\u7F6E\u7B5B\u9009\u6761\u4EF6\u548C\u66F4\u65B0\u5B57\u6BB5")):O.actionId===H.gp.RECORD_DELETE&&O.isException?a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u5FC5\u987B\u914D\u7F6E\u7B5B\u9009\u6761\u4EF6")):a.createElement(a.Fragment,null,a.createElement("div",{className:"workflowContentInfo ellipsis workflowContentBG"},a.createElement("span",{className:"Gray_75"},_l("\u5DE5\u4F5C\u8868")),"\u201C",O.appName,"\u201D"),a.createElement("div",{className:"workflowContentInfo ellipsis Gray_75 mTop4 pBottom5"},_.includes([H.gp.WORKSHEET_FIND,H.gp.RECORD_UPDATE,H.gp.RECORD_DELETE],O.actionId)?_l("\u4ECE\u5DE5\u4F5C\u8868\u83B7\u5F97"):_l("\u4ECE\u8BB0\u5F55\u94FE\u63A5\u83B7\u5F97"),O.executeType===0&&a.createElement("span",null,_l("\uFF0C\u65E0\u7ED3\u679C\u65F6\u4E2D\u6B62\u6216\u6267\u884C\u67E5\u627E\u7ED3\u679C\u5206\u652F")),O.executeType===1&&a.createElement("span",null,_l("\uFF0C\u65E0\u7ED3\u679C\u65F6\u65B0\u589E\u8BB0\u5F55")),O.executeType===2&&a.createElement("span",null,_l("\uFF0C\u65E0\u7ED3\u679C\u65F6\u7EE7\u7EED\u6267\u884C"))))}},{key:"render",value:function(){var O=this.props,n=O.processId,s=O.item,j=O.disabled,A=O.selectNodeId,S=O.openDetail,I=O.isSimple;return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":s.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:j},{errorShadow:(s.appId||s.selectNodeId)&&s.isException},{active:A===s.id}),onMouseDown:function(){return!j&&S(n,s.id,s.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar icon-search",s.appId?"BGYellow":"BGGray")})),a.createElement(d.Z,(0,ce.default)({nodeClassName:"BGYellow"},this.props)),a.createElement("div",{className:"workflowContent Font13"},I?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),s.resultTypeId?a.createElement("div",{className:"workflowLineBtn"}):a.createElement(Z.Z,this.props)))}}]),V}(a.Component)},191:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>H});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(60341),Z=t(47170),H=function(U){(0,y.default)(f,U);function f(V){return(0,L.default)(this,f),(0,R.default)(this,(f.__proto__||p()(f)).call(this,V))}return(0,te.default)(f,[{key:"renderContent",value:function(){var C=this.props.item;return C.appId?a.createElement(a.Fragment,null,a.createElement("div",{className:"pLeft8 pRight8"},a.createElement("span",{className:"Gray_75"},_l("\u83B7\u53D6\uFF1A")),C.actionId==="1"?_l("\u81EA\u5B9A\u4E49\u9875\u9762"):C.actionId==="2"?_l("\u7EDF\u8BA1\u56FE\u8868"):_l("\u94FE\u63A5\u5730\u5740"))):a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9"))}},{key:"render",value:function(){var C=this.props,O=C.processId,n=C.item,s=C.disabled,j=C.selectNodeId,A=C.openDetail,S=C.isSimple;return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":n.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:s},{errorShadow:!!n.appId&&n.isException},{active:j===n.id}),onMouseDown:function(){return!s&&A(O,n.id,n.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar icon-camera_alt",n.appId?"BGBlueAsh":"BGGray")})),a.createElement(d.Z,(0,ce.default)({nodeClassName:"BGBlueAsh"},this.props)),a.createElement("div",{className:"workflowContent Font13"},S?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),a.createElement(Z.Z,this.props)))}}]),f}(a.Component)},89272:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>j});var ce=t(88239),g=t(88106),p=t(85105),L=t.n(p),te=t(99663),R=t(22600),y=t(49135),a=t(93196),r=t(67294),o=t(93967),d=t.n(o),Z=t(37417),H=t(60341),U=t(47170),f=t(5618),V=t(72078),C=t(96486),O=t.n(C),n=t(30381),s=t.n(n),j=function(A){(0,a.default)(S,A);function S(I){(0,te.default)(this,S);var c=(0,y.default)(this,(S.__proto__||L()(S)).call(this,I));return c.openDocument=function(q){var b=c.props.relationId;q.stopPropagation(),window.open("/worksheetapi/"+b)},c}return(0,R.default)(S,[{key:"renderContent",value:function(){var c=this.props,q=c.item,b=c.child,k=c.isNestedProcess;if(b&&!k){var ee={7:_l("\u53D1\u9001 API \u8BF7\u6C42"),12:_l("\u4EE3\u7801\u5757"),17:_l("\u4E1A\u52A1\u6D41\u7A0B\u6570\u7EC4"),18:_l("JSON \u89E3\u6790"),20:_l("\u4EBA\u5458\u4FE1\u606F"),21:_l("\u90E8\u95E8\u4FE1\u606F"),42:_l("API\u6570\u7EC4"),405:_l("\u4EBA\u5DE5\u8282\u70B9")};return r.createElement(r.Fragment,null,r.createElement("div",{className:"workflowContentInfo ellipsis workflowContentBG"},r.createElement("span",{className:"Gray_9e"},_l("\u6570\u636E\u6E90\uFF1A")),q.appType===f.IF.SHEET?_l("\u5DE5\u4F5C\u8868\u201C%0\u201D",q.appName):ee[q.appType]),r.createElement("div",{className:"pLeft8 pRight8 mTop9 Gray_75 pBottom5"},(q.assignFieldNames||[]).length?r.createElement(r.Fragment,null,q.assignFieldNames.map(function(F){return"\u201C"+F+"\u201D"}).join("\u3001"),r.createElement("span",{className:"mLeft5"},_l("\u89E6\u53D1"))):r.createElement("span",{className:"Gray_75"},_l("\u672A\u88AB\u4EFB\u4F55\u6D41\u7A0B\u89E6\u53D1"))))}if(q.appType===f.IF.PBC&&!q.appId)return r.createElement("div",{className:"workflowStartNull"},_l("\u8BBE\u7F6E\u8F93\u5165\u53C2\u6570"));if(O().includes([f.IF.SHEET,f.IF.DATE,f.IF.EVENT_PUSH],q.appType)&&!q.appName||q.appType===f.IF.LOOP&&!q.executeTime||q.appType===f.IF.WEBHOOK&&!q.count||O().includes([f.IF.USER,f.IF.DEPARTMENT,f.IF.EXTERNAL_USER],q.appType)&&!q.triggerId)return r.createElement("div",{className:"workflowStartNull"},_l("\u8BBE\u7F6E\u89E6\u53D1\u65B9\u5F0F"));if(O().includes([f.IF.SHEET,f.IF.EVENT_PUSH],q.appType))return r.createElement(r.Fragment,null,r.createElement("div",{className:"workflowContentInfo ellipsis workflowContentBG"},r.createElement("span",{className:"Gray_75"},q.appTypeName),"\u201C",q.appName,"\u201D"),r.createElement("div",{className:"workflowContentInfo ellipsis mTop4"},(q.triggerId===f.FH.EDIT||q.triggerId===f.FH.ONLY_EDIT)&&r.createElement("span",null,q.triggerId===f.FH.EDIT?_l("\u5F53\u65B0\u589E\u548C\u66F4\u65B0\u8BB0\u5F55\u65F6\u89E6\u53D1"):_l("\u5F53\u66F4\u65B0\u8BB0\u5F55\u65F6\u89E6\u53D1"),q.assignFieldName&&_l("\uFF1A\u6307\u5B9A\u5B57\u6BB5"),q.assignFieldName&&r.createElement("span",{className:"blue"},q.assignFieldName)),q.triggerId===f.FH.ADD&&_l("\u5F53\u65B0\u589E\u8BB0\u5F55\u65F6\u89E6\u53D1"),q.triggerId===f.FH.DELETE&&_l("\u5F53\u5220\u9664\u8BB0\u5F55\u65F6\u89E6\u53D1")));if(q.appType===f.IF.LOOP){var re=[_l("\u661F\u671F\u65E5"),_l("\u661F\u671F\u4E00"),_l("\u661F\u671F\u4E8C"),_l("\u661F\u671F\u4E09"),_l("\u661F\u671F\u56DB"),_l("\u661F\u671F\u4E94"),_l("\u661F\u671F\u516D")],ie=q.interval===-1;return r.createElement("div",{className:"pLeft8 pRight8 pTop5 pBottom5"},r.createElement("div",{className:d()({Gray_75:!ie})},_l("\u4ECE %0 \u5F00\u59CB",s()(q.executeTime).format("YYYY-MM-DD HH:mm"))),!ie&&r.createElement(r.Fragment,null,q.frequency===f.DC.MINUTE&&r.createElement("div",{className:"mTop5"},_l("\u6BCF%0\u5206\u949F\u89E6\u53D1",q.interval>1?" "+q.interval+" ":"")),q.frequency===f.DC.HOUR&&r.createElement("div",{className:"mTop5"},_l("\u6BCF%0\u5C0F\u65F6\u89E6\u53D1",q.interval>1?" "+q.interval+" ":"")),q.frequency===f.DC.DAY&&r.createElement("div",{className:"mTop5"},_l("\u6BCF%0\u5929 %1 \u89E6\u53D1",q.interval>1?" "+q.interval+" ":"",s()(q.executeTime).format("HH:mm"))),q.frequency===f.DC.WEEK&&r.createElement("div",{className:"mTop5"},_l("\u6BCF%0\u5468(%1) %2 \u89E6\u53D1",q.interval>1?" "+q.interval+" ":"",q.weekDays.sort(function(F,h){return F-h}).map(function(F){return re[F]}).join("\u3001"),s()(q.executeTime).format("HH:mm"))),q.frequency===f.DC.MONTH&&r.createElement("div",{className:"mTop5"},_l("\u6BCF%0\u4E2A\u6708\u5728\u7B2C %1 \u5929 %2 \u89E6\u53D1",q.interval>1?" "+q.interval+" ":"",s()(q.executeTime).format("DD"),s()(q.executeTime).format("HH:mm"))),q.frequency===f.DC.YEAR&&r.createElement("div",{className:"mTop5"},_l("\u6BCF%0\u5E74\u5728 %1 \u89E6\u53D1",q.interval>1?" "+q.interval+" ":"",s()(q.executeTime).format("MMMDo HH:mm")))))}if(q.appType===f.IF.DATE)return r.createElement(r.Fragment,null,r.createElement("div",{className:"workflowContentInfo ellipsis workflowContentBG"},r.createElement("span",{className:"Gray_75"},q.appTypeName),"\u201C",q.appName,"\u201D"),r.createElement("div",{className:"workflowContentInfo ellipsis mTop4"},r.createElement("span",{className:d()({red:!q.assignFieldName})},q.assignFieldName||_l("\u5B57\u6BB5\u4E0D\u5B58\u5728")),!!q.number&&r.createElement("span",{className:"mLeft5"},q.executeTimeType===f.rW.BEFORE?_l("\u4E4B\u524D"):q.executeTimeType===f.rW.AFTER?_l("\u4E4B\u540E"):"",q.executeTimeType!==f.rW.CURRENT&&r.createElement("span",null,q.number+f.rO[q.unit])),q.assignFieldType===15&&r.createElement("span",{className:"mLeft5"},q.time),r.createElement("span",{className:"mLeft5"},_l("\u6267\u884C"))));if(q.appType===f.IF.WEBHOOK)return r.createElement(r.Fragment,null,r.createElement("div",{className:"workflowContentInfo ellipsis Gray_75"},_l("\u4ECE\u8BF7\u6C42\u8303\u4F8B\u751F\u6210\u53C2\u6570\u5217\u8868")),r.createElement("div",{className:"workflowContentInfo ellipsis"},r.createElement("span",{className:"Gray_75"},_l("\u5DF2\u914D\u7F6E\uFF1A")),_l("%0 \u4E2A\u53C2\u6570",q.count)));if(q.appType===f.IF.CUSTOM_ACTION)return r.createElement(r.Fragment,null,r.createElement("div",{className:"workflowContentInfo ellipsis"},r.createElement("span",{className:"Gray_75"},_l("\u6309\u94AE\uFF1A")),q.triggerName),r.createElement("div",{className:"workflowContentInfo ellipsis Gray_75"},f.Cr[q.clickType||1]));if(q.triggerId===f.FH.DISCUSS)return r.createElement("div",{className:"pLeft8 pRight8 Gray_75"},_l("\u5F53\u5916\u90E8\u7528\u6237\u6536\u5230\u8BA8\u8BBA\u901A\u77E5\u65F6\uFF08\u88AB\u56DE\u590D\u3001\u88AB\u63D0\u5230\uFF09\u89E6\u53D1"));if(O().includes([f.IF.USER,f.IF.DEPARTMENT,f.IF.EXTERNAL_USER],q.appType)){var le,E,w,K,N=(K={},(0,g.default)(K,f.IF.USER,(le={},(0,g.default)(le,f.FH.ADD,_l("\u5F53\u65B0\u4EBA\u5165\u804C\u65F6")),(0,g.default)(le,f.FH.DELETE,_l("\u5F53\u4EBA\u5458\u79BB\u804C\u65F6")),le)),(0,g.default)(K,f.IF.DEPARTMENT,(E={},(0,g.default)(E,f.FH.ADD,_l("\u5F53\u521B\u5EFA\u90E8\u95E8\u65F6")),(0,g.default)(E,f.FH.DELETE,_l("\u5F53\u89E3\u6563\u90E8\u95E8\u65F6")),E)),(0,g.default)(K,f.IF.EXTERNAL_USER,(w={},(0,g.default)(w,f.FH.ADD,_l("\u5F53\u65B0\u7528\u6237\u6CE8\u518C\u65F6")),(0,g.default)(w,f.FH.ONLY_EDIT,_l("\u5F53\u7528\u6237\u767B\u5F55\u65F6")),(0,g.default)(w,f.FH.DELETE,_l("\u5F53\u7528\u6237\u6CE8\u9500\u65F6")),(0,g.default)(w,f.FH.STOP,_l("\u5F53\u7528\u6237\u88AB\u505C\u7528\u65F6")),w)),K);return r.createElement(r.Fragment,null,r.createElement("div",{className:"workflowContentInfo ellipsis"},N[q.appType][q.triggerId]))}if(q.appType===f.IF.PBC)return r.createElement(r.Fragment,null,r.createElement("div",{className:"workflowContentInfo ellipsis"},_l("%0\u4E2A\u8F93\u5165\u53C2\u6570",q.count)),q.isCallBack&&r.createElement("div",{className:"workflowContentInfo ellipsis"},_l("\u5DF2\u542F\u7528\u5E73\u53F0API\u80FD\u529B"),r.createElement("span",{className:"ThemeColor3 ThemeHoverColor2 mLeft5",onMouseDown:this.openDocument},_l("\u67E5\u770B\u6587\u6863"),r.createElement("i",{className:"mLeft5 icon-task-new-detail Font12"}))));if(q.appType===f.IF.APPROVAL_START)return k?r.createElement("div",{className:"pLeft8 pRight8 pBottom5 pTop5"},r.createElement("span",{className:"Gray_75"},_l("\u53D1\u8D77\u4EBA\uFF1A")),(q.accounts||[]).length?r.createElement(Z.Z,(0,ce.default)({},this.props,{accounts:q.accounts})):"[]"):r.createElement(r.Fragment,null,r.createElement("div",{className:"workflowContentInfo ellipsis workflowContentBG"},r.createElement("span",{className:"Gray_9e"},_l("\u6570\u636E\u5BF9\u8C61\uFF1A")),_l("\u5DE5\u4F5C\u8868\u201C%0\u201D",q.appName)),r.createElement("div",{className:"pLeft8 pRight8 mTop9 Gray_75 pBottom5"},"\u201C",q.triggerName||r.createElement("span",{style:{color:"#f44336"}},_l("\u6D41\u7A0B\u5DF2\u5220\u9664")),"\u201D",r.createElement("span",{className:"mLeft5"},_l("\u89E6\u53D1"))))}},{key:"render",value:function(){var c=this.props,q=c.processId,b=c.item,k=c.selectNodeId,ee=c.openDetail,re=c.isCopy,ie=c.child,le=c.isSimple,E=c.isNestedProcess;return r.createElement("div",{className:"flexColumn"},r.createElement("section",{className:"workflowBox","data-id":b.id},r.createElement("div",{className:d()("workflowItem",{workflowItemDisabled:re},{errorShadow:b.appId&&!b.appName&&b.appType!==f.IF.PBC||O().includes([f.IF.DATE,f.IF.PBC],b.appType)&&b.isException},{active:O().includes([b.id,b.triggerNodeId],k)}),onMouseDown:function(){E?ee(b.triggerId,b.triggerNodeId,f.QZ.APPROVAL_PROCESS):ee(q,b.id,b.typeId)}},r.createElement("div",{className:"workflowAvatars flexRow"},r.createElement("i",{className:d()("workflowAvatar",ie&&!E?"BGBlueAsh":(0,V.bC)(b.appType,b.triggerId),ie&&!E?"icon-subprocess":(0,V.wu)(b.typeId,b.appType,b.triggerId))})),r.createElement(H.Z,(0,ce.default)({nodeClassName:ie&&!E?"BGBlueAsh":(0,V.bC)(b.appType,b.triggerId)},this.props)),r.createElement("div",{className:"workflowContent"},le?r.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),r.createElement(U.Z,this.props)))}}]),S}(r.Component)},35531:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>H});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(60341),Z=t(47170),H=function(U){(0,y.default)(f,U);function f(V){(0,L.default)(this,f);var C=(0,R.default)(this,(f.__proto__||p()(f)).call(this,V));return C.openSubProcess=function(O){var n=C.props.item;O.stopPropagation(),window.open("/workflowedit/"+n.subProcessId)},C}return(0,te.default)(f,[{key:"renderContent",value:function(){var C=this.props.item;return C.selectNodeId?C.selectNodeId&&!C.selectNodeName?a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u6307\u5B9A\u7684\u8282\u70B9\u5BF9\u8C61\u5DF2\u5220\u9664")):a.createElement("div",{className:"pLeft8 pRight8 flexRow",style:{alignItems:"center"}},a.createElement("div",{className:"ellipsis"},C.subProcessName?a.createElement(a.Fragment,null,a.createElement("span",{className:"Gray_75"},_l("\u6267\u884C\u6D41\u7A0B\uFF1A")),C.subProcessName):_l("\u8BBE\u7F6E\u6B64\u8282\u70B9")),C.subProcessId&&a.createElement("i",{className:"mLeft5 icon-task-new-detail Font12 ThemeColor3 ThemeHoverColor2",onMouseDown:this.openSubProcess}),a.createElement("div",{className:"flex"})):a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9"))}},{key:"render",value:function(){var C=this.props,O=C.processId,n=C.item,s=C.disabled,j=C.selectNodeId,A=C.openDetail,S=C.isSimple;return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":n.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:s},{errorShadow:n.selectNodeId&&n.isException},{active:j===n.id}),onMouseDown:function(){return!s&&A(O,n.id,n.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar icon-subprocess",n.selectNodeId?"BGBlueAsh":"BGGray")})),a.createElement(d.Z,(0,ce.default)({nodeClassName:"BGBlueAsh"},this.props)),a.createElement("div",{className:"workflowContent Font13"},S?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),a.createElement(Z.Z,this.props)))}}]),f}(a.Component)},18567:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>U});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(37417),Z=t(60341),H=t(47170),U=function(f){(0,y.default)(V,f);function V(C){return(0,L.default)(this,V),(0,R.default)(this,(V.__proto__||p()(V)).call(this,C))}return(0,te.default)(V,[{key:"renderContent",value:function(){var O=this.props.item;return O.accounts.length?O.isException?a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u672A\u5B8C\u6210\u670D\u52A1\u53F7\u6D88\u606F\u8BBE\u7F6E")):a.createElement("div",{className:"pLeft8 pRight8 pTop5 pBottom5"},a.createElement("span",{className:"Gray_75"},_l("\u53D1\u9001\u7ED9\uFF1A")),a.createElement(d.Z,(0,ce.default)({},this.props,{accounts:O.accounts}))):a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9"))}},{key:"render",value:function(){var O=this.props,n=O.processId,s=O.item,j=O.disabled,A=O.selectNodeId,S=O.openDetail,I=O.isSimple;return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":s.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:j},{errorShadow:!!s.accounts.length&&s.isException},{active:A===s.id}),onMouseDown:function(){return!j&&S(n,s.id,s.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar icon-wechat",s.accounts.length?"BGBlue":"BGGray")})),a.createElement(Z.Z,(0,ce.default)({nodeClassName:"BGBlue"},this.props)),a.createElement("div",{className:"workflowContent Font13"},I?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),a.createElement(H.Z,this.props)))}}]),V}(a.Component)},11635:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>U});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(60341),Z=t(47170),H=t(5618),U=function(f){(0,y.default)(V,f);function V(C){return(0,L.default)(this,V),(0,R.default)(this,(V.__proto__||p()(V)).call(this,C))}return(0,te.default)(V,[{key:"renderContent",value:function(){var O=this.props.item,n=O.actionId===H.gp.PBC_OUT;return _.includes([H.IF.SHEET,H.IF.EVENT_PUSH],O.appType)&&!O.selectNodeId||n&&!O.webhookUrl?a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9")):n?a.createElement("div",{className:"pLeft8 pRight8 ellipsis"},a.createElement("span",{className:"Gray_75"},_l("\u63A8\u9001\u5730\u5740\uFF1A")),O.webhookUrl):_.includes([H.IF.SHEET,H.IF.EVENT_PUSH],O.appType)&&!O.selectNodeName?a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u6307\u5B9A\u7684\u8282\u70B9\u5BF9\u8C61\u5DF2\u5220\u9664")):_.includes([H.IF.SHEET,H.IF.EVENT_PUSH],O.appType)?a.createElement("div",{className:"pLeft8 pRight8 ellipsis Gray_75"},_l("\u53D1\u9001\u6307\u5B9A\u6570\u636E\u5BF9\u8C61")):O.count?a.createElement("div",{className:"pLeft8 pRight8 ellipsis Gray_75"},a.createElement("span",{className:"Gray_75"},_l("\u5DF2\u914D\u7F6E\uFF1A")),_l("%0\u4E2A\u8FD4\u56DE\u503C",O.count)):a.createElement("div",{className:"pLeft8 pRight8 ellipsis Gray_75"},_l("\u53D1\u9001\u81EA\u5B9A\u4E49\u8BF7\u6C42"))}},{key:"render",value:function(){var O=this.props,n=O.processId,s=O.item,j=O.disabled,A=O.selectNodeId,S=O.openDetail,I=O.isSimple,c=s.actionId===H.gp.PBC_OUT;return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":s.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:j},{errorShadow:(s.selectNodeId||s.webhookUrl)&&s.isException},{active:A===s.id}),onMouseDown:function(){return!j&&S(n,s.id,s.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar",c?"icon-sending":"icon-workflow_webhook",s.webhookUrl?"BGBlueAsh":"BGGray")})),a.createElement(d.Z,(0,ce.default)({nodeClassName:"BGBlueAsh"},this.props,{noDelete:c,noCopy:c})),a.createElement("div",{className:"workflowContent Font13"},I?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),a.createElement(Z.Z,(0,ce.default)({},this.props,{disabled:c}))))}}]),V}(a.Component)},96149:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>U});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(93967),o=t.n(r),d=t(37417),Z=t(60341),H=t(47170),U=function(f){(0,y.default)(V,f);function V(C){return(0,L.default)(this,V),(0,R.default)(this,(V.__proto__||p()(V)).call(this,C))}return(0,te.default)(V,[{key:"renderContent",value:function(){var O=this.props.item;return O.selectNodeId?O.selectNodeName?O.accounts.length?a.createElement(a.Fragment,null,a.createElement("div",{className:"pLeft8 pRight8 pTop5"},a.createElement("span",{className:"Gray_75"},_l("\u586B\u5199\u4EBA\uFF1A")),a.createElement(d.Z,(0,ce.default)({},this.props,{accounts:O.accounts}))),a.createElement("div",{className:"workflowContentInfo ellipsis mTop4 pBottom5"},O.formProperties.length?a.createElement("span",{className:"Gray_75"},_l("\u586B\u5199%0\u4E2A\u5B57\u6BB5",O.formProperties.length)):a.createElement("span",{className:"yellow"},_l("\u672A\u8BBE\u7F6E\u53EF\u586B\u5199\u5B57\u6BB5")))):a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u672A\u8BBE\u7F6E\u586B\u5199\u4EBA")):a.createElement("div",{className:"pLeft8 pRight8 red"},a.createElement("i",{className:"icon-workflow_info Font18 mRight5"}),_l("\u6307\u5B9A\u7684\u8282\u70B9\u5BF9\u8C61\u5DF2\u5220\u9664")):a.createElement("div",{className:"pLeft8 pRight8 blue"},_l("\u8BBE\u7F6E\u6B64\u8282\u70B9"))}},{key:"render",value:function(){var O=this.props,n=O.processId,s=O.item,j=O.disabled,A=O.selectNodeId,S=O.openDetail,I=O.isSimple;return a.createElement("div",{className:"flexColumn"},a.createElement("section",{className:"workflowBox","data-id":s.id},a.createElement("div",{className:o()("workflowItem",{workflowItemDisabled:j},{errorShadow:s.selectNodeId&&s.isException},{active:A===s.id}),onMouseDown:function(){return!j&&S(n,s.id,s.typeId)}},a.createElement("div",{className:"workflowAvatars flexRow"},a.createElement("i",{className:o()("workflowAvatar icon-workflow_write",s.selectNodeId?"BGSkyBlue":"BGGray")})),a.createElement(Z.Z,(0,ce.default)({nodeClassName:"BGSkyBlue"},this.props)),a.createElement("div",{className:"workflowContent Font13"},I?a.createElement("span",{className:"pLeft8 pRight8 Gray_9e"},_l("\u52A0\u8F7D\u4E2D...")):this.renderContent())),a.createElement(H.Z,this.props)))}}]),V}(a.Component)},40340:(lt,Te,t)=>{"use strict";if(t.d(Te,{Z:()=>a}),!/^(1887|7596|7798)$/.test(t.j))var ce=t(69288);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(95679);var p=t(12424),L=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(5618);var R=t(96486),y=t.n(R);const a=function(r){var o=r.nodeId,d=r.flowNodeMap,Z=r.isLast,H=r.isConditionalBranch,U=H===void 0?!1:H,f=r.onSave,V=f===void 0?function(){}:f,C=r.onClose,O=C===void 0?function(){}:C,n=(0,L.useState)(U),s=(0,p.Z)(n,2),j=s[0],A=s[1],S=(0,L.useState)(!0),I=(0,p.Z)(S,2),c=I[0],q=I[1],b=(0,L.useState)(1),k=(0,p.Z)(b,2),ee=k[0],re=k[1],ie=d[o]||{},le=ie.typeId,E=ie.actionId,w=function(){if(c)return[{text:_l("\u5DE6\u4FA7"),value:1},{text:_l("\u4E0D\u79FB\u52A8"),value:0}];if(le===te.QZ.APPROVAL)return[{text:_l("\u5DE6\u4FA7\uFF08\u901A\u8FC7\u5206\u652F\uFF09"),value:1},{text:_l("\u53F3\u4FA7\uFF08\u5426\u51B3\u5206\u652F\uFF09"),value:2},{text:_l("\u4E0D\u79FB\u52A8"),value:0}];if(y().includes([te.QZ.SEARCH,te.QZ.FIND_SINGLE_MESSAGE],le)||le===te.QZ.ACTION&&E===te.gp.RELATION)return[{text:_l("\u5DE6\u4FA7\uFF08\u6709\u6570\u636E\u5206\u652F\uFF09"),value:1},{text:_l("\u53F3\u4FA7\uFF08\u65E0\u6570\u636E\u5206\u652F\uFF09"),value:2},{text:_l("\u4E0D\u79FB\u52A8"),value:0}]};return j?L.createElement(ce.Z,{visible:!0,width:560,title:le===te.QZ.APPROVAL?_l("\u5728\u5BA1\u6279\u8282\u70B9\u4E0B\u6DFB\u52A0\u5206\u652F\u6709\u4E24\u79CD\u9009\u62E9\uFF1A"):_l("\u5728\u67E5\u627E\u6307\u5B9A\u6570\u636E\u8282\u70B9\u4E0B\u6DFB\u52A0\u5206\u652F\u6709\u4E24\u79CD\u9009\u62E9\uFF1A"),onCancel:O,onOk:Z||(d[(d[o]||{}).nextId]||{}).actionId===te.gp.PBC_OUT?function(){V({isOrdinary:c,moveType:0}),O()}:function(){return A(!1)}},L.createElement(g.Z,{className:"Font15",text:_l("\u6DFB\u52A0\u666E\u901A\u5206\u652F"),checked:c,onClick:function(){return q(!0)}}),L.createElement("div",{className:"Gray_75 Font13 pLeft30 mTop5 mBottom15"},le===te.QZ.APPROVAL?_l("\u53EA\u5BF9\u201C\u901A\u8FC7\u201D\u5BA1\u6279\u7684\u6570\u636E\u8FDB\u884C\u5206\u652F\u5904\u7406"):_l("\u5BF9\u67E5\u627E\u5230\u7684\u6570\u636E\u8FDB\u884C\u5206\u652F\u5904\u7406\u3002\u672A\u67E5\u627E\u5230\u6570\u636E\u65F6\uFF0C\u6D41\u7A0B\u4E2D\u6B62")),L.createElement(g.Z,{className:"Font15",text:le===te.QZ.APPROVAL?_l("\u6DFB\u52A0\u5BA1\u6279\u7ED3\u679C\u5206\u652F"):_l("\u6DFB\u52A0\u67E5\u627E\u7ED3\u679C\u5206\u652F"),checked:!c,onClick:function(){return q(!1)}}),L.createElement("div",{className:"Gray_75 Font13 pLeft30 mTop5"},le===te.QZ.APPROVAL?_l("\u5206\u652F\u56FA\u5B9A\u4E3A\u201C\u901A\u8FC7\u201D\u548C\u201C\u5426\u51B3\u201D\u3002\u5982\u679C\u4F60\u540C\u65F6\u9700\u8981\u5BF9\u201C\u5426\u51B3\u201D\u5BA1\u6279\u7684\u6570\u636E\u8FDB\u884C\u5904\u7406\u65F6\u9009\u62E9\u6B64\u5206\u652F"):_l("\u5206\u652F\u56FA\u5B9A\u4E3A\u201C\u67E5\u627E\u5230\u6570\u636E\u201D\u548C\u201C\u672A\u67E5\u627E\u5230\u6570\u636E\u201D\u3002\u5982\u679C\u4F60\u9700\u8981\u5728\u201C\u672A\u67E5\u627E\u5230\u201D\u6570\u636E\u7684\u60C5\u51B5\u4E0B\u7EE7\u7EED\u6267\u884C\u6D41\u7A0B\uFF0C\u8BF7\u9009\u62E9\u6B64\u5206\u652F"))):L.createElement(ce.Z,{visible:!0,width:560,title:_l("\u5206\u652F\u4E0B\u65B9\u7684\u8282\u70B9\u6574\u4F53\u653E\u7F6E\u5728"),onCancel:O,onOk:function(){V({isOrdinary:c,moveType:ee}),O()}},w().map(function(K){return L.createElement("div",{key:K.value,className:"mBottom15"},L.createElement(g.Z,{className:"Font15",text:K.text,checked:ee===K.value,onClick:function(){return re(K.value)}}))}),L.createElement("div",{className:"Gray_75 Font13 pLeft30",style:{marginTop:-10}},_l("\u7B49\u5F85\u5206\u652F\u6C47\u96C6\u540E\u518D\u6267\u884C\u4E0B\u65B9\u8282\u70B9")))}},52345:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>L});var ce=t(67294),g=t(93967),p=t.n(g);const L=function(te){var R=te.processId,y=te.isCopy,a=te.selectCopyIds,r=te.item,o=te.selectCopyNode,d=te.selectProcessId;if(!y||R!==d)return null;var Z=a.indexOf(r.id);return ce.createElement("span",{className:p()("workflowNodeCopy",Z===-1?"icon-ok Font16":"ThemeBGColor3 White active"),onMouseDown:function(U){U.stopPropagation(),o(r.id)}},Z!==-1&&ce.createElement("span",{className:"Font13 bold"},Z+1))}},47170:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>f});var ce=t(88239),g=t(62521),p=t(16469),L=t(85105),te=t.n(L),R=t(99663),y=t(22600),a=t(49135),r=t(93196),o=t(67294),d=t(96486),Z=t.n(d),H=t(5618),U=t(40340),f=function(V){(0,r.default)(C,V);function C(O){(0,R.default)(this,C);var n=(0,a.default)(this,(C.__proto__||te()(C)).call(this,O));return n.createBranchNode=function(s){var j=s.moveType,A=s.isOrdinary,S=n.props,I=S.processId,c=S.addFlowNode,q=S.item;c(I,{name:_l("\u5206\u652F"),prveId:q.id,typeId:H.QZ.BRANCH,moveType:j,gatewayType:2,resultFlow:!A}),n.setState({showBranchDialog:!1})},n.state={showOptions:!1,branchDialogModel:0},n}return(0,y.default)(C,[{key:"renderContent",value:function(){var n=this,s=this.props,j=s.processId,A=s.item,S=s.disabled,I=s.nodeId,c=s.selectAddNodeId,q=s.isCopy,b=s.selectCopy,k=s.text,ee=s.isApproval,re=s.data,ie=s.startEventId,le=I===A.id;return S?null:le&&q?o.createElement("div",{className:"workflowAddActionBox Gray_75 Font14"},_l("\u590D\u5236\u5230\u6B64\u5904")):le?ee||re[ie].nextId==="99"?o.createElement("div",{className:"workflowAddActionBox Gray_75 Font14",style:{width:261}},_l("\u9009\u62E9\u8981\u6267\u884C\u7684\u52A8\u4F5C")):o.createElement("div",{className:"workflowAddActionBox Gray_75 Font14"},_l("\u9009\u62E9\u8981\u6267\u884C\u7684\u52A8\u4F5C\uFF0C\u6216"),o.createElement("span",{className:"ThemeColor3 pointer workflowCopyBtn",onClick:function(){return b(j)}},_l("\u590D\u5236\u5DF2\u6709\u8282\u70B9"))):o.createElement(o.Fragment,null,o.createElement("i",{className:"icon-custom_add_circle",onClick:function(){ee?n.setState({showOptions:!0}):!q&&c(A.id)}},k&&o.createElement("span",{className:"Font14 mLeft10"},k)))}},{key:"renderMoreOptions",value:function(){var n=this,s=this.props.removeCopyBtn,j=this.state.showOptions,A=[{type:4,name:_l("\u5BA1\u6279"),iconColor:"#7E57C2",iconName:"icon-workflow_ea"},{type:3,name:_l("\u586B\u5199%03025"),iconColor:"#00BCD4",iconName:"icon-workflow_write"},{type:5,name:_l("\u6284\u9001%03026"),iconColor:"#2196f3",iconName:"icon-workflow_notice"},{type:1,name:_l("\u5206\u652F"),iconColor:"#4C7D9E",iconName:"icon-workflow_branch"},{type:26,name:_l("\u6570\u636E\u5904\u7406"),iconColor:"#ffa340",iconName:"icon-workflow"},{type:-1,name:_l("\u590D\u5236"),iconColor:"#BDBDBD",iconName:"icon-copy"}];return j?(s&&Z().remove(A,function(S){return S.type===-1}),o.createElement(g.Z,{className:"mTop10",onClickAway:function(){return n.setState({showOptions:!1})}},A.map(function(S,I){return o.createElement(o.Fragment,{key:I},S.type===-1&&o.createElement("div",{className:"mTop5 mBottom5",style:{background:"#eaeaea",height:1}}),o.createElement(p.Z,{className:"flexRow",key:I,onClick:function(){return n.moreOptionsAction(S)}},o.createElement("i",{className:"Font16 "+S.iconName,style:{color:S.iconColor}}),o.createElement("span",{className:"Font14 mLeft10 Gray"},S.name)))}))):null}},{key:"moreOptionsAction",value:function(n){var s=this.props,j=s.processId,A=s.addFlowNode,S=s.item,I=s.selectAddNodeId,c=s.selectCopy,q=s.removeCopyBtn;Z().includes([H.QZ.WRITE,H.QZ.APPROVAL,H.QZ.CC],n.type)?A(j,{name:n.name,prveId:S.id,typeId:n.type}):n.type===H.QZ.BRANCH?this.isConditionalBranch()?this.setState({branchDialogModel:2}):!S.nextId||S.nextId==="99"||q?this.createBranchNode({moveType:0,isOrdinary:!1}):this.setState({branchDialogModel:1}):n.type===H.QZ.APPROVAL_PROCESS?I(S.id,j):(I(S.id),c(j)),this.setState({showOptions:!1})}},{key:"isConditionalBranch",value:function(){var n=this.props.item,s=n.typeId,j=n.actionId;return Z().includes([H.QZ.APPROVAL,H.QZ.SEARCH,H.QZ.FIND_SINGLE_MESSAGE],s)||s===H.QZ.ACTION&&j==="20"}},{key:"render",value:function(){var n=this,s=this.props,j=s.data,A=s.item,S=s.className,I=S===void 0?"":S,c=this.state.branchDialogModel;return o.createElement("div",{className:"workflowLineBtn "+I},this.renderContent(),this.renderMoreOptions(),!!c&&o.createElement(U.Z,(0,ce.default)({},this.props,{nodeId:A.id,flowNodeMap:j,isLast:A.nextId==="99",isConditionalBranch:c===2,onSave:function(b){var k=b.isOrdinary,ee=b.moveType;return n.createBranchNode({isOrdinary:k,moveType:ee})},onClose:function(){return n.setState({branchDialogModel:0})}})))}}]),C}(o.Component)},37417:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>y});var ce=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(5618);var p=t(96486),L=t.n(p),te=t(3177),R=t.n(te);const y=function(a){var r=a.accounts,o=a.multipleLevelAccounts,d=a.relationType,Z=a.relationId,H=d===2?Z:"",U=function(V){return V.map(function(C,O){var n=O!==V.length-1?"\u3001":"";if(C.type===g.$A.TEXT)return C.entityId+n;if(C.type===g.$A.USER)return C.roleName+n;if(C.type===g.$A.ORGANIZE_ROLE)return C.count===0?ce.createElement("span",{className:"yellow"},C.entityName+n):C.entityName+n;if(!C.roleName&&!C.entityName)return ce.createElement(ce.Fragment,{key:O},ce.createElement("span",{className:"red"},_l("\u5DF2\u5220\u9664")),n);if(L().includes([g.$A.ROLE,g.$A.DEPARTMENT,g.$A.JOB],C.type)){var s=C.type===g.$A.DEPARTMENT&&C.roleTypeId?" - "+g.qe[C.roleTypeId]:"",j=C.roleName?C.roleName+(H!==C.entityId?"\uFF08"+C.entityName+"\uFF09":""):C.entityName;return C.count===0?ce.createElement(ce.Fragment,{key:O},ce.createElement("span",{className:"yellow"},j,s),n):j+s+n}return C.roleName+(C.roleTypeId?" - "+(C.controlType!==27?g.gq[C.roleTypeId]:g.qe[C.roleTypeId]):"")+n})};return(o||[]).length?ce.createElement(ce.Fragment,null,ce.createElement("div",null,ce.createElement("span",{className:"Gray_9e"},_l("\u4E00\u7EA7\uFF1A")),U(r)),o.map(function(f,V){return ce.createElement("div",{key:V},ce.createElement("span",{className:"Gray_9e"},_l("%0\u7EA7\uFF1A",R().cn.encodeS(V+2))),U(f))})):U(r)}},60341:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>re});var ce=t(97373),g=t.n(ce),p=t(94055),L=t(33867),te=t(46593),R=t.n(te),y=t(69288),a=t(85105),r=t.n(a),o=t(99663),d=t(22600),Z=t(49135),H=t(93196),U=t(86735),f=t(67294),V=t(62023),C=t(71893),O=t(93967),n=t.n(O),s=t(52345),j=t(5618),A=t(15405),S=t(33126),I=t(29314),c=t(96486),q=t.n(c),b=(0,U.Z)([`
  color: `,`;
  &:hover {
    color: `,`;
  }
`],[`
  color: `,`;
  &:hover {
    color: `,`;
  }
`]),k=(0,S.Z)(A.Z),ee=C.ZP.span(b,function(ie){return ie.isBranch?"#9e9e9e":"rgba(255, 255, 255, 0.8)"},function(ie){return ie.isBranch?"#2196f3":"#fff"}),re=function(ie){(0,H.default)(le,ie);function le(E){(0,o.default)(this,le);var w=(0,Z.default)(this,(le.__proto__||r()(le)).call(this,E));return w.disabled=!1,w.joinEdit=function(K){K.stopPropagation(),K.preventDefault(),w.setState({isEdit:!0})},w.updateNodeName=function(K){var N=w.props,F=N.processId,h=N.item,z=N.updateNodeName,X=K.currentTarget.value.trim();X&&X!==h.name?z(F,h.id,X):w.workflowNodeName.value=h.name,w.setState({isEdit:!1})},w.addNodeDescribe=function(){var K=w.props,N=K.processId,F=K.item,h=K.updateNodeDesc;y.Z.confirm({className:"processNodeBox",title:_l("\u8282\u70B9\u522B\u540D\u548C\u8BF4\u660E"),width:540,description:f.createElement(f.Fragment,null,f.createElement("div",{className:"Gray"},_l("\u522B\u540D")),f.createElement("div",{className:"mTop5 Gray_75 Font12"},_l("\u7528\u4E8E\u5728\u90AE\u4EF6\u8282\u70B9\u4E2D\u63D2\u5165\u52A8\u6001\u503C\u65F6\u6307\u4EE3\u5F53\u524D\u8282\u70B9\uFF0C\u6BD4\u4F7F\u7528\u8282\u70B9ID\u66F4\u6709\u8FA8\u8BC6\u5EA6\u3002\u8282\u70B9\u522B\u540D\u4EC5\u5141\u8BB8\u4F7F\u7528\u5B57\u6BCD\uFF08\u4E0D\u533A\u5206\u5927\u5C0F\u5199\uFF09\u3001\u6570\u5B57\u548C\u4E0B\u5212\u7EBF\u7EC4\u5408\uFF0C\u4E14\u5FC5\u987B\u4EE5\u5B57\u6BCD\u5F00\u5934\uFF0C\u4E0D\u53EF\u91CD\u590D\u3002")),f.createElement("div",{className:"relative"},f.createElement("div",{className:"processNodeErrorMessage Hidden"},_l("\u975E\u6CD5\u5B57\u7B26"),f.createElement("i",{className:"processNodeErrorArrow"})),f.createElement("input",{type:"text",id:"processNodeAlias",className:"processNodeAlias mTop10",placeholder:_l("\u8BF7\u8F93\u5165\u522B\u540D"),defaultValue:F.alias,maxLength:64,onChange:function(X){var B=X.target.value.trim();$(".processNodeBox .processNodeErrorMessage").toggleClass("Hidden",!(B&&!/^[a-zA-Z]{1}\w*$/.test(B)))}})),f.createElement("div",{className:"Gray mTop15"},_l("\u8BF4\u660E")),f.createElement("textarea",{id:"workflowNodeNotes",className:"boderRadAll_4 pAll10 Gray mTop10",placeholder:_l("\u8BF7\u8F93\u5165\u8282\u70B9\u8BF4\u660E"),defaultValue:F.desc})),okText:_l("\u4FDD\u5B58"),onOk:function(){return new(R())(function(X,B){var x=document.getElementById("processNodeAlias").value.trim(),Q=document.getElementById("workflowNodeNotes").value.trim();x&&!/^[a-zA-Z]{1}\w*$/.test(x)?(alert(_l("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u522B\u540D"),2),B(!0)):V.Z.nodeDesc({processId:N,nodeId:F.id,alias:x,desc:Q}).then(function(i){i?(h(N,F.id,x,Q),X()):(document.getElementById("processNodeAlias").value="",alert(_l("\u8BE5\u522B\u540D\u5DF2\u5B58\u5728"),2),B(!0))})})}})},w.renderOperateList=function(){var K=w.props,N=K.item,F=K.copyBranchNode,h=K.noDelete,z=K.flowIds,X=0,B=[{text:_l("\u4FEE\u6539\u540D\u79F0"),icon:"edit",events:function(){return w.setState({isEdit:!0})}},{text:_l("\u7F16\u8F91\u8282\u70B9\u522B\u540D\u548C\u8BF4\u660E"),icon:"knowledge-message",events:function(){return w.addNodeDescribe()}},{text:_l("\u590D\u5236"),icon:"copy",events:function(){return F(!1)}},{text:_l("\u590D\u5236\u6574\u4E2A\u5206\u652F"),icon:"flow",events:function(){return F(!0)}},{text:_l("\u5220\u9664"),icon:"delete1",events:function(){return w.setState({showDelete:!0})},className:"flowNodeDel"}];return(N.typeId===j.QZ.FIRST||h)&&q().remove(B,function(x,Q){return Q===4}),N.typeId!==j.QZ.BRANCH_ITEM&&q().remove(B,function(x,Q){return q().includes([2,3],Q)}),N.typeId===j.QZ.BRANCH_ITEM&&(X=q().findIndex(z,function(x){return x===N.id})),f.createElement("div",{className:"flowNodeOperateList"},f.createElement("ul",null,B.map(function(x,Q){return f.createElement("li",{key:Q,className:n()(x.className),onClick:function(){x.events(),w.setState({showOperate:!1})}},f.createElement(L.Z,{icon:x.icon}),x.text)})),N.typeId===j.QZ.BRANCH_ITEM&&f.createElement(f.Fragment,null,f.createElement("div",{className:"Gray_9e flowNodeOperateMove"},_l("\u79FB\u52A8")),f.createElement("div",{className:"flowNodeOperateMoveBtn flexRow"},f.createElement("div",{className:n()("pAll3 flexRow",{disabled:X===0})},f.createElement(p.default,{placement:"bottom",title:X===0?"":_l("\u79FB\u81F3\u6700\u5DE6")},f.createElement(L.Z,{icon:"leftmost",onClick:function(){return w.updateBranchSort(1)}})),f.createElement(p.default,{placement:"bottom",title:X===0?"":_l("\u5DE6\u79FB\u4E00\u4F4D")},f.createElement(L.Z,{icon:"left",onClick:function(){return w.updateBranchSort(2)}}))),f.createElement("div",{className:"flowNodeOperateMoveLine"}),f.createElement("div",{className:n()("pAll3 flexRow",{disabled:X===z.length-1})},f.createElement(p.default,{placement:"bottom",title:X===z.length-1?"":_l("\u53F3\u79FB\u4E00\u4F4D")},f.createElement(L.Z,{icon:"right",onClick:function(){return w.updateBranchSort(3)}})),f.createElement(p.default,{placement:"bottom",title:X===z.length-1?"":_l("\u79FB\u81F3\u6700\u53F3")},f.createElement(L.Z,{icon:"rightmost",onClick:function(){return w.updateBranchSort(4)}}))))))},w.updateBranchSort=function(K){var N=w.props,F=N.processId,h=N.item,z=N.flowIds,X=N.updateBranchSort,B=q().findIndex(z,function(Q){return Q===h.id}),x=function(i){switch(i.splice(B,1),K){case 1:i.unshift(h.id);break;case 2:i.splice(B-1,0,h.id);break;case 3:i.splice(B+1,0,h.id);break;case 4:i.push(h.id);break}return i};q().includes([1,2],K)&&B===0||q().includes([3,4],K)&&B===z.length-1||(X(F,h.prveId,x(z)),w.setState({showOperate:!1}))},w.state={isEdit:!1,showDelete:!1,showOperate:!1},w}return(0,d.default)(le,[{key:"renderNodeName",value:function(){var w=this,K=this.props.item,N=this.state.isEdit;return N?f.createElement("input",{type:"text",ref:function(h){w.workflowNodeName=h},autoFocus:!0,className:"workflowNodeName",defaultValue:K.name||_l("\u5206\u652F"),onMouseDown:function(h){return h.stopPropagation()},onKeyDown:function(h){return h.keyCode===13&&w.updateNodeName(h)},onBlur:this.updateNodeName}):f.createElement("div",{className:"workflowNodeNameText ellipsis bold",onMouseDown:this.joinEdit},K.name||_l("\u5206\u652F"))}},{key:"renderNodeDescribe",value:function(){var w=this,K=this.props,N=K.item,F=K.isRelease;return f.createElement(p.default,{className:"workflowNotes",placement:"bottom",arrowPointAtCenter:!0,title:f.createElement(f.Fragment,null,N.alias&&f.createElement("div",null,_l("\u522B\u540D\uFF1A%0",N.alias)),N.desc&&f.createElement("div",{style:{whiteSpace:"pre-wrap"}},N.desc))},f.createElement(ee,{className:"Font15 pointer icon-knowledge-message",isBranch:N.typeId===j.QZ.BRANCH_ITEM,onMouseDown:function(z){z.stopPropagation(),!F&&w.addNodeDescribe()}}))}},{key:"renderDeleteNode",value:function(){var w=this,K=this.props,N=K.processId,F=K.item,h=K.deleteNode,z=this.state.showDelete;return z?f.createElement(k,{className:"delNodeBox",onClickAway:function(){return w.setState({showDelete:!1})},onClick:function(B){return B.stopPropagation()}},f.createElement("div",{className:n()("TxtCenter Font15",{mTop10:F.typeId!==j.QZ.BRANCH_ITEM})},F.typeId===j.QZ.BRANCH_ITEM?_l("\u540C\u65F6\u5220\u9664\u5206\u652F\u4E0B\u6240\u6709\u8282\u70B9"):_l("\u786E\u5B9A\u5220\u9664\u6B64\u8282\u70B9\uFF1F")),f.createElement("div",{className:"flexRow Font13 mTop10"},f.createElement("div",{className:"delNodeCancelBtn",onMouseDown:function(B){B.stopPropagation(),w.setState({showDelete:!1})}},_l("\u53D6\u6D88")),f.createElement("div",{className:"delNodeSureBtn",onMouseDown:function(B){B.stopPropagation(),w.disabled||(h(N,F.id),w.disabled=!0)}},_l("\u786E\u5B9A\u5220\u9664")))):null}},{key:"renderMoreOperate",value:function(){var w=this,K=this.props.item,N=this.state.showOperate;return f.createElement("span",{className:"workflowOperate",onMouseDown:function(h){return h.stopPropagation()}},f.createElement(I.Z,{popupVisible:N,action:["click"],popup:N?this.renderOperateList():f.createElement("div",null),popupAlign:{points:["tr","br"]},onPopupVisibleChange:function(h){return w.setState({showOperate:h})}},f.createElement(ee,{className:"Font18 pointer icon-more_horiz",isBranch:K.typeId===j.QZ.BRANCH_ITEM})))}},{key:"render",value:function(){var w=this.props,K=w.item,N=w.nodeClassName,F=w.noCopy;return f.createElement(f.Fragment,null,K.typeId===j.QZ.BRANCH_ITEM?f.createElement(f.Fragment,null,this.renderNodeName(),f.createElement("span",{className:"flex"})):f.createElement("div",{className:n()("workflowName TxtCenter",N)},this.renderNodeName()),!q().includes([j.QZ.FIRST,j.QZ.BRANCH_ITEM],K.typeId)&&!F&&f.createElement(s.Z,this.props),(K.alias||K.desc)&&this.renderNodeDescribe(),this.renderMoreOperate(),K.typeId!==j.QZ.FIRST&&this.renderDeleteNode())}}]),le}(f.Component)},61109:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>ee});var ce=t(67294),g=t(89272),p=t(54990),L=t(96149),te=t(86467),R=t(48663),y=t(96067),a=t(75500),r=t(11635),o=t(19836),d=t(69154),Z=t(24636),H=t(94886),U=t(62483),f=t(26888),V=t(6861),C=t(35531),O=t(80451),n=t(63186),s=t(18567),j=t(9),A=t(57750),S=t(29633),I=t(72646),c=t(26192),q=t(40415),b=t(39636),k=t(191);const ee={0:g.Z,1:p.Z,3:L.Z,4:te.Z,5:R.Z,6:y.Z,7:a.Z,8:r.Z,9:o.Z,10:d.Z,11:Z.Z,12:H.Z,13:U.Z,14:f.Z,15:V.Z,16:C.Z,17:O.Z,18:n.Z,19:s.Z,20:j.Z,21:A.Z,22:S.Z,23:g.Z,24:c.Z,25:q.Z,26:b.Z,27:R.Z,28:k.Z,1e3:I.Z,1001:I.Z}},42108:(lt,Te,t)=>{"use strict";t.d(Te,{A5:()=>p,KW:()=>R,P7:()=>g,QZ:()=>te,R_:()=>L,c2:()=>a,en:()=>y,jJ:()=>ce});var ce={1:{status:"pending",text:_l("\u8FDB\u884C\u4E2D")},2:{status:"completed",text:_l("\u5B8C\u6210")},3:{status:"suspend",text:_l("\u4E2D\u6B62")},4:{status:"fail",text:_l("\u5931\u8D25")}},g={1:{status:"pending",text:_l("\u7B49\u5F85")},2:{status:"completed",text:_l("\u901A\u8FC7")},3:{status:"suspend",text:_l("\u4E2D\u6B62")},4:{status:"fail",text:_l("\u5931\u8D25")},5:{status:"overrule",text:_l("\u5426\u51B3")},6:{status:"filter",text:_l("\u8FC7\u6EE4")}},p={1111:_l("\u5DE5\u4F5C\u8868\u627E\u4E0D\u5230\u5E94\u7528"),1112:_l("\u5DE5\u4F5C\u8868\u5B57\u6BB5\u6743\u9650\u9519\u8BEF"),1113:_l("\u53C2\u6570\u9519\u8BEF"),1114:_l("\u63A5\u53E3\u5DF2\u8FC7\u671F"),1115:_l("\u83B7\u53D6\u5B57\u6BB5\u6743\u9650\u9519\u8BEF"),2e3:_l("\u672C\u884C\u5DF2\u6709\u6D41\u7A0B\u5728\u6267\u884C"),2001:_l("\u6267\u884C\u6B21\u6570\u8D85\u8FC7"),7777:_l("\u7BA1\u7406\u5458\u4E2D\u6B62"),8888:_l("\u670D\u52A1\u8FDE\u63A5\u8D85\u65F6"),9999:_l("\u7A0B\u5E8F\u5F02\u5E38"),1e4:_l("\u672A\u8BBE\u7F6E\u6709\u6548\u8282\u70B9"),10001:_l("\u53D1\u8D77\u8282\u70B9\u672A\u914D\u7F6E"),10002:_l("\u53D1\u8D77\u8282\u70B9\u672A\u914D\u7F6E"),10003:_l("\u53D1\u8D77\u8282\u70B9\u4E2D\u4F7F\u7528\u7684\u5DE5\u4F5C\u8868\u88AB\u5220\u9664"),10004:_l("\u5F53\u524D\u8282\u70B9\u6307\u5411\u7684\u8282\u70B9\u5BF9\u8C61\u88AB\u5220\u9664"),10005:_l("\u52A8\u4F5C\u8282\u70B9\uFF08\u65B0\u589E\u884C\u8BB0\u5F55\uFF09\u4E2D\u7684\u5DE5\u4F5C\u8868\u88AB\u5220\u9664"),10006:_l("\u586B\u5199/\u5BA1\u6279/\u901A\u77E5\u8282\u70B9\u4E2D\u4EBA\u5458\u672A\u586B\u5199\u6216\u4EBA\u5458\u4E0D\u5B58\uFF0C\u6216\u5DF2\u79BB\u804C\uFF08\u4E0D\u5728\u6D41\u7A0B\u6240\u5728\u7684\u7EC4\u7EC7\u4E0B\uFF09"),10007:_l("\u586B\u5199/\u5BA1\u6279/\u901A\u77E5\u8282\u70B9\u4E2D\u4EBA\u5458\u672A\u586B\u5199\uFF0C\u6216\u5DF2\u79BB\u804C\uFF08\u4E0D\u5728\u6D41\u7A0B\u6240\u5728\u7684\u7EC4\u7EC7\u4E0B\uFF09"),10008:_l("\u586B\u5199/\u5BA1\u6279/\u901A\u77E5\u8282\u70B9\u4E2D\u89D2\u8272\u4E2D\u6CA1\u6709\u4EBA\u5458\uFF08\u4E0D\u5728\u6D41\u7A0B\u6240\u5728\u7684\u7EC4\u7EC7\u4E0B\uFF09"),10009:_l("\u8282\u70B9\u6240\u5728\u5206\u652F\u4E3A\u7A7A"),20001:_l("\u52A8\u4F5C\u8282\u70B9\u6267\u884C\u5931\u8D25"),20002:_l("\u67E5\u627E\u8282\u70B9\u65E0\u6570\u636E"),20003:_l("\u77ED\u4FE1\u53D1\u9001\u9700\u8981\u7EC4\u7EC7\u95E8\u724C\u53F7"),20004:_l("\u77ED\u4FE1\u6A21\u677F\u6CA1\u6709\u901A\u8FC7\u5BA1\u6838"),20005:_l("\u77ED\u4FE1\u6216\u90AE\u4EF6\u6CA1\u6709\u8D26\u53F7"),20006:_l("\u6279\u6570\u636E\u6E90\u6570\u91CF\u8D85\u8FC7\u8282\u70B9\u5904\u7406\u4E0A\u9650"),20007:_l("\u77ED\u4FE1\u90AE\u4EF6\u5185\u5BB9\u6709\u654F\u611F\u8BCD"),20008:_l("\u8D26\u6237\u4F59\u989D\u4E0D\u8DB3"),20009:_l("\u67E5\u627E\u8282\u70B9\u5173\u952E\u8BCD\u4E3A\u7A7A"),20010:_l("\u5220\u9664\u6570\u636E\u9519\u8BEF"),20011:_l("url\u6821\u9A8C\u5931\u8D25"),20012:_l("\u914D\u7F6E\u9519\u8BEF"),20013:_l("\u8BF7\u6C42\u5F02\u5E38"),20014:_l("\u65B0\u589E\u8BB0\u5F55\u65F6\u884C\u6570\u636E\u91CD\u590D"),20015:_l("\u7B5B\u9009\u6761\u4EF6\u5F02\u5E38"),20016:_l("code\u914D\u7F6E\u9519\u8BEF"),20017:_l("code\u6267\u884C\u9519\u8BEF"),20018:_l("\u8282\u70B9\u5BF9\u8C61\u4E3A\u7A7A"),20019:_l("\u5EF6\u65F6\u8282\u70B9\u6267\u884C\u9519\u8BEF"),20020:_l("catch\u65E0\u6570\u636E"),20021:_l("\u5B50\u6D41\u7A0B\u672A\u5F00\u542F\u6216\u5DF2\u5220\u9664"),20022:_l("\u5B50\u6D41\u7A0B\u5B58\u5728\u6267\u884C\u5931\u8D25\u7684\u6D41\u7A0B\u5B9E\u4F8B"),20023:_l("\u5B50\u6D41\u7A0B\u6765\u6E90\u6570\u636E\u4E3A\u7A7A"),20024:_l("json\u683C\u5F0F\u4E0D\u6B63\u786E"),20025:_l("url\u6821\u9A8C\u5931\u8D25"),20026:_l("\u662F\u4E00\u4E2A\u5EF6\u65F6\u53CD\u9988"),20027:_l("\u52A8\u4F5C\u8282\u70B9\u5B57\u6BB5\u914D\u7F6E\u4E3A\u7A7A"),20028:_l("\u6253\u5370\u9644\u4EF6\u751F\u6210\u5931\u8D25"),20029:_l("\u6253\u5370\u9644\u4EF6\u62C9\u53D6\u5931\u8D25"),20030:_l("\u6253\u5370\u9644\u4EF6\u65B0\u589E\u5931\u8D25"),20031:_l("\u6253\u5370\u9644\u4EF6\u8F6C\u6362\u683C\u5F0F\u5931\u8D25"),20032:_l("\u6700\u591A\u83B7\u53D6\u6761\u6570\u914D\u7F6E\u5F02\u5E38"),20033:_l("\u672A\u6FC0\u6D3B\u4E0D\u5141\u8BB8\u7F16\u8F91"),20034:_l("\u91CD\u590D\u9080\u8BF7"),21e3:_l("\u7B5B\u9009\u6761\u4EF6\u63A7\u4EF6\u627E\u4E0D\u5230"),21001:_l("\u7B5B\u9009\u6761\u4EF6\u503C\u4E3A\u7A7A"),21002:_l("\u7B5B\u9009\u6761\u4EF6\u4F7F\u7528\u8001\u7684\u63A7\u4EF6\u7C7B\u578B"),21003:_l("\u4E0D\u652F\u6301\u7684\u52A8\u4F5C\u8282\u70B9"),21004:_l("\u4ED6\u8868\u5B57\u6BB5\u914D\u7F6E\u5F02\u5E38"),21005:_l("\u7B5B\u9009\u6761\u4EF6\u4E0D\u652F\u6301"),22e3:_l("\u65B0\u589E\u8BB0\u5F55\u5931\u8D25"),22001:_l("\u66F4\u65B0\u8BB0\u5F55\u5931\u8D25"),22002:_l("\u83B7\u53D6\u6307\u5B9A\u5173\u8054\u8BB0\u5F55\u5931\u8D25"),22003:_l("\u5220\u9664\u8BB0\u5F55\u5931\u8D25"),22004:_l("\u4ECE\u5DE5\u4F5C\u8868\u83B7\u53D6\u591A\u6761\u8BB0\u5F55\u5931\u8D25"),22005:_l("\u4ECE\u4E00\u6761\u8BB0\u5F55\u83B7\u5F97\u591A\u6761\u5173\u8054\u8BB0\u5F55\u5931\u8D25"),22006:_l("\u4ECE\u65B0\u589E\u8282\u70B9\u83B7\u53D6\u591A\u6761\u8BB0\u5F55\u5931\u8D25"),22100:_l("\u90AE\u4EF6\u53D1\u9001\u5931\u8D25"),22101:_l("\u77ED\u4FE1\u53D1\u9001\u5931\u8D25\u53D1\u9001\u5931\u8D25"),22102:_l("\u90AE\u4EF6\u9644\u4EF6\u8FC7\u5927"),22103:_l("\u65E5\u7A0B\u6807\u9898\u6216\u7EC4\u7EC7\u8005\u4E3A\u7A7A"),22104:_l("\u65E0\u6709\u6548\u65F6\u95F4"),30001:_l("\u6D41\u7A0B\u5DF2\u5220\u9664"),30002:_l("\u6D41\u7A0B\u5DF2\u5173\u95ED"),30003:_l("\u5185\u5BB9\u5DF2\u5220\u9664"),30004:_l("\u8282\u70B9\u5DF2\u5220\u9664"),30005:_l("\u6D41\u7A0B\u5B9E\u4F8B\u5DF2\u5220\u9664"),30006:_l("\u5F53\u524D\u7528\u6237\u65E0\u6743\u9650\u67E5\u770B"),40001:_l("\u5BA1\u6279\u88AB\u5426\u51B3"),40002:_l("\u672A\u901A\u8FC7\u5206\u652F"),40003:_l("\u5BA1\u6279\u4EBA\u65E0\u6548"),40004:_l("\u586B\u5199\u4EBA\u65E0\u6548"),40005:_l("\u6570\u636E\u4E22\u5931"),40006:_l("\u65F6\u95F4\u65E0\u6548"),40007:_l("\u88AB\u53D1\u8D77\u4EBA\u64A4\u56DE"),40008:_l("\u5BA1\u6279\u6D41\u7A0B\u5F02\u5E38"),40009:_l("\u5BA1\u6279\u6D41\u7A0B\u89E6\u53D1\u8005\u65E0\u6548")},L={pending:{color:"#2195f3",bgColor:"#e7f3fd"},fail:{color:"#f44336",bgColor:"#fdebe9"},suspend:{color:"#ffa340",bgColor:"#fff5eb"},completed:{color:"#01ca83",bgColor:"#e5f9f1"}},te={0:{type:"start",text:_l("\u53D1\u8D77\u8282\u70B9")},1:{type:"gateway",text:_l("\u7F51\u5173")},2:{type:"branch",text:_l("\u5206\u652F")},3:{type:"write",text:_l("\u586B\u5199")},4:{type:"approve",text:_l("\u5BA1\u6279")},5:{type:"cc",text:_l("\u6284\u9001")},6:{type:"action",text:_l("\u52A8\u4F5C")},7:{type:"find",text:_l("\u83B7\u53D6\u5355\u6761\u6570\u636E")},8:{type:"webhook",text:_l("\u53D1\u9001 API \u8BF7\u6C42")},9:{type:"formula",text:_l("\u516C\u5F0F")},10:{type:"msg",text:_l("\u77ED\u4FE1")},11:{type:"email",text:_l("\u90AE\u4EF6")},12:{type:"delay",text:_l("\u5EF6\u65F6")},13:{type:"records",text:_l("\u83B7\u53D6\u591A\u6761\u8BB0\u5F55")},14:{type:"code",text:_l("\u4EE3\u7801\u5757")},15:{type:"link",text:_l("\u83B7\u53D6\u94FE\u63A5")},16:{type:"subprocess",text:_l("\u5B50\u6D41\u7A0B")},17:{type:"push",text:_l("\u754C\u9762\u63A8\u9001")},18:{type:"file",text:_l("\u83B7\u53D6\u8BB0\u5F55\u6253\u5370\u6587\u4EF6")},19:{type:"template",text:_l("\u670D\u52A1\u53F7\u6D88\u606F")},20:{type:"pbc",text:_l("\u5C01\u88C5\u4E1A\u52A1\u6D41\u7A0B(PBP)")},21:{type:"jsonParse",text:_l("JSON \u89E3\u6790")},22:{type:"auth",text:_l("API \u8FDE\u63A5\u4E0E\u8BA4\u8BC1")},23:{type:"parameter",text:_l("\u8FDE\u63A5\u53C2\u6570")},24:{type:"apiPackage",text:_l("API \u8FDE\u63A5\u4E0E\u8BA4\u8BC1")},25:{type:"api",text:_l("\u8C03\u7528\u5DF2\u96C6\u6210 API")},26:{type:"approveProcess",text:_l("\u5BA1\u6279\u6D41\u7A0B")},27:{type:"notice",text:_l("\u7AD9\u5185\u901A\u77E5")},28:{type:"snapshot",text:_l("\u83B7\u53D6\u9875\u9762\u5FEB\u7167")},1e3:{type:"singleInfo",text:_l("\u83B7\u53D6\u5355\u6761\u4EBA\u5458/\u90E8\u95E8\u4FE1\u606F")},1001:{type:"moreInfo",text:_l("\u83B7\u53D6\u591A\u6761\u4EBA\u5458/\u90E8\u95E8\u4FE1\u606F")}},R={1:{type:"submit",text:_l("\u63D0\u4EA4")},2:{type:"transfer",text:_l("\u8F6C\u4EA4")},3:{type:"check",text:_l("\u67E5\u770B")},4:{type:"pass",text:_l("\u901A\u8FC7")},5:{type:"overrule",text:_l("\u5426\u51B3")},8:{type:"transferApprove",text:_l("\u8F6C\u5BA1")},16:{type:"signBeforeApprove",text:_l("\u5BA1\u6279\u524D\u52A0\u7B7E")},18:{type:"modify",text:_l("\u4FEE\u6539\u7533\u8BF7\u5185\u5BB9")},22:{type:"noNeed",text:_l("\u65E0\u9700\u5BA1\u6279")}},y={1:_l("\u9700\u6240\u6709\u5BA1\u6279\u4EBA\u901A\u8FC7"),2:_l("\u53EA\u9700\u4E00\u540D\u5BA1\u6279\u4EBA\u901A\u8FC7"),4:_l("\u6309\u6BD4\u4F8B\u6295\u7968\u901A\u8FC7")},a={start:{icon:{1:"table",5:"hr_surplus",6:"hr_time",7:"workflow_webhook",8:"custom_actions",9:"approval",17:"pbc",20:"hr_structure",21:"workflow",23:"language",25:"sending",106:"replyto"},text:{1:_l("\u5DE5\u4F5C\u8868\u4E8B\u4EF6\u89E6\u53D1"),5:_l("\u5B9A\u65F6\u89E6\u53D1"),6:_l("\u6309\u65E5\u671F\u5B57\u6BB5\u89E6\u53D1"),7:_l("Webhook\u89E6\u53D1"),8:_l("\u6309\u94AE\u89E6\u53D1"),9:_l("\u5BA1\u6279\u6D41\u7A0B\u89E6\u53D1"),17:_l("\u5C01\u88C5\u4E1A\u52A1\u6D41\u7A0B"),20:_l("\u4EBA\u5458\u4E8B\u4EF6\u89E6\u53D1"),21:_l("\u90E8\u95E8\u4E8B\u4EF6\u89E6\u53D1"),23:_l("\u5916\u90E8\u7528\u6237\u4E8B\u4EF6\u89E6\u53D1"),25:_l("\u4E8B\u4EF6\u63A8\u9001"),106:_l("\u8BA8\u8BBA\u901A\u77E5\u89E6\u53D1")},bgColor:{1:"#ffa340",5:"#2196f3",6:"#2196f3",7:"#4C7D9E",8:"#4C7D9E",9:"#4158DB",17:"#4C7D9E",20:"#01ca83",21:"#01ca83",23:"#01ca83",25:"#4C7D9E",106:"#2196f3"}},gateway:{icon:"workflow_branch",text:_l("\u5206\u652F"),bgColor:"#2196f3"},write:{icon:"workflow_write",text:_l("\u586B\u5199"),bgColor:"#00bcd4"},approve:{icon:"workflow_ea",text:_l("\u5BA1\u6279"),bgColor:"#7e57c2"},cc:{icon:"workflow_notice",text:_l("\u6284\u9001"),bgColor:"#2196f3"},action:{icon:{1:"workflow_new",2:"workflow_update",3:"hr_delete",20:"workflow_search"},text:{1:_l("\u65B0\u589E\u8BB0\u5F55"),2:_l("\u66F4\u65B0\u8BB0\u5F55"),3:_l("\u5220\u9664\u8BB0\u5F55"),20:_l("\u83B7\u5F97\u6307\u5B9A\u5173\u8054\u8BB0\u5F55")},bgColor:"#FFA340"},find:{icon:"search",text:_l("\u83B7\u53D6\u5355\u6761\u6570\u636E"),bgColor:"#FFA340"},webhook:{icon:"workflow_webhook",text:_l("\u53D1\u9001 API \u8BF7\u6C42"),bgColor:"#4c7d9e"},formula:{icon:"workflow_function",text:_l("\u8FD0\u7B97"),bgColor:"#01CA83"},msg:{icon:"workflow_sms",text:_l("\u77ED\u4FE1"),bgColor:"#2196f3"},email:{icon:"email",text:_l("\u90AE\u4EF6"),bgColor:"#2196f3"},delay:{icon:"workflow_delayed",text:_l("\u5EF6\u65F6"),bgColor:"#4c7d9e"},records:{icon:"transport",text:_l("\u83B7\u53D6\u591A\u6761\u6570\u636E"),bgColor:"#FFA340"},code:{icon:"url",text:_l("\u4EE3\u7801\u5757"),bgColor:"#4c7d9e"},link:{icon:"link2",text:_l("\u83B7\u5F97\u94FE\u63A5"),bgColor:"#4c7d9e"},subprocess:{icon:"subprocess",text:_l("\u5B50\u6D41\u7A0B"),bgColor:"#4c7d9e"},push:{icon:"interface_push",text:_l("\u754C\u9762\u63A8\u9001"),bgColor:"#2196f3"},file:{icon:"print",text:_l("\u83B7\u53D6\u8BB0\u5F55\u6253\u5370\u6587\u4EF6"),bgColor:"#4c7d9e"},template:{icon:"wechat",text:_l("\u53D1\u9001\u670D\u52A1\u53F7\u6D88\u606F"),bgColor:"#2196f3"},pbc:{icon:"pbc",text:_l("\u5C01\u88C5\u4E1A\u52A1\u6D41\u7A0B(PBP)"),bgColor:"#4c7d9e"},jsonParse:{icon:"task_custom_polymer",text:_l("JSON \u89E3\u6790"),bgColor:"#4c7d9e"},auth:{icon:"key1",text:_l("API \u8FDE\u63A5\u4E0E\u8BA4\u8BC1"),bgColor:"#4c7d9e"},parameter:{icon:"input",text:_l("\u8FDE\u63A5\u53C2\u6570"),bgColor:"#4c7d9e"},apiPackage:{icon:"connect",text:_l("API \u8FDE\u63A5\u4E0E\u8BA4\u8BC1"),bgColor:"#4c7d9e"},api:{icon:"api",text:_l("\u8C03\u7528\u5DF2\u96C6\u6210 API"),bgColor:"#4c7d9e"},approveProcess:{icon:"approval",text:_l("\u5BA1\u6279\u6D41\u7A0B"),bgColor:"#4158DB"},notice:{icon:"hr_message_reminder",text:_l("\u7AD9\u5185\u901A\u77E5"),bgColor:"#2196f3"},snapshot:{icon:"camera_alt",text:_l("\u83B7\u53D6\u9875\u9762\u5FEB\u7167"),bgColor:"#4c7d9e"},singleInfo:{icon:"person_search",text:_l("\u83B7\u53D6\u5355\u6761\u4EBA\u5458/\u90E8\u95E8\u4FE1\u606F"),bgColor:"#2196f3"},moreInfo:{icon:"group-members",text:_l("\u83B7\u53D6\u591A\u6761\u4EBA\u5458/\u90E8\u95E8\u4FE1\u606F"),bgColor:"#2196f3"}}},5618:(lt,Te,t)=>{"use strict";t.d(Te,{$A:()=>a,AM:()=>f,Cr:()=>C,DC:()=>Z,Do:()=>R,FH:()=>g,IF:()=>L,Jy:()=>j,No:()=>n,QZ:()=>ce,RA:()=>V,XO:()=>s,ZX:()=>A,bq:()=>S,fh:()=>te,gp:()=>p,gq:()=>r,hn:()=>I,kE:()=>y,qe:()=>o,rO:()=>U,rW:()=>d,uK:()=>H,uT:()=>c,vB:()=>O});var ce={FIRST:0,BRANCH:1,BRANCH_ITEM:2,WRITE:3,APPROVAL:4,CC:5,ACTION:6,SEARCH:7,WEBHOOK:8,FORMULA:9,MESSAGE:10,EMAIL:11,DELAY:12,GET_MORE_RECORD:13,CODE:14,LINK:15,SUB_PROCESS:16,PUSH:17,FILE:18,TEMPLATE:19,PBC:20,JSON_PARSE:21,AUTHENTICATION:22,PARAMETER:23,API_PACKAGE:24,API:25,APPROVAL_PROCESS:26,NOTICE:27,SNAPSHOT:28,SYSTEM:100,FIND_SINGLE_MESSAGE:1e3,FIND_MORE_MESSAGE:1001},g={ADD:"1",EDIT:"2",DELETE:"3",ONLY_EDIT:"4",STOP:"105",DISCUSS:"106"},p={ADD:"1",EDIT:"2",DELETE:"3",CREATE_FILE:"4",RELATION:"20",NUMBER_FORMULA:"100",DATE_FORMULA:"101",JAVASCRIPT:"102",PYTHON:"103",DATE_DIFF_FORMULA:"104",OBJECT_TOTAL:"105",FUNCTION_CALCULATION:"106",WORKSHEET_TOTAL:"107",CUSTOM_ACTION_TOTAL:"108",SEND_EMAIL_SINGLE_DISPLAY:"201",SEND_EMAIL:"202",SEND_TEMPLATE_MESSAGE:"203",FROM_WORKSHEET:"400",FROM_RECORD:"401",FROM_ADD:"402",FROM_ARRAY:"403",FROM_CODE_ARRAY:"404",FROM_ARTIFICIAL:"405",WORKSHEET_FIND:"406",BATCH_FIND:"407",FROM_PBC_INPUT_ARRAY:"408",FROM_API_ARRAY:"409",FROM_PBC_OUTPUT_ARRAY:"410",BATCH_ACTION:"411",BATCH_UPDATE:"412",BATCH_DELETE:"413",RECORD_LINK_FIND:"420",RECORD_UPDATE:"421",RECORD_DELETE:"422",PBC:"500",PBC_INPUT:"501",PBC_OUT:"502",JSON_PARSE:"510",FROM_JSON_PARSE_ARRAY:"511",NO_AUTH:"520",BASIC_AUTH:"521",AUTH_CODE:"522",CREDENTIALS:"523"},L={SHEET:1,TASK:2,LOOP:5,DATE:6,WEBHOOK:7,CUSTOM_ACTION:8,APPROVAL_START:9,APPROVAL:10,FORMULA:11,CODE:12,lINK:13,FILE:14,SUB_PROCESS:16,PBC:17,JSON_PARSE:18,USER:20,DEPARTMENT:21,TEMPLATE:22,EXTERNAL_USER:23,ORGANIZATION_ROLE:24,EVENT_PUSH:25,NO_AUTH:30,BASIC_AUTH:31,OAUTH2:32,PARAMETER:40,API_PACKAGE:41,API:42,CALENDAR:43,SNAPSHOT:44,SYSTEM:100,VARIABLE:101,PROCESS:102,WORKSHEET_LOG:103,GLOBAL_VARIABLE:104},te={REVOKE:3,PASS:4,OVERRULE:5,FORWARD:6,SIGN:7,WORK:8,SUBMIT:9,TRANSFER:10,PRINT:12,UPDATE:13,REPLACE:14,CONTINUE:15,ADD:16,RETURN:17,URGE:18,BEFORE:101,EMAIL:102,GET_OPERATION:103,ADD_OPERATION:104,RELATION_OPERATION:105},R={1:_l("\u6587\u672C"),2:_l("\u6587\u672C"),3:_l("\u624B\u673A"),4:_l("\u5EA7\u673A"),5:_l("\u90AE\u7BB1"),6:_l("\u6570\u503C"),7:_l("\u8BC1\u4EF6"),8:_l("\u91D1\u989D"),9:_l("\u5355\u9009"),10:_l("\u591A\u9009"),11:_l("\u5355\u9009"),14:_l("\u9644\u4EF6"),15:_l("\u65E5\u671F"),16:_l("\u65E5\u671F\u65F6\u95F4"),17:_l("\u65E5\u671F\u6BB5"),18:_l("\u65E5\u671F\u65F6\u95F4\u6BB5"),19:_l("\u5730\u533A"),20:_l("\u516C\u5F0F"),21:_l("\u81EA\u7531\u8FDE\u63A5"),22:_l("\u5206\u6BB5"),23:_l("\u5730\u533A"),24:_l("\u5730\u533A"),25:_l("\u5927\u5199\u91D1\u989D"),26:_l("\u4EBA\u5458"),27:_l("\u90E8\u95E8"),28:_l("\u7B49\u7EA7"),29:_l("\u5173\u8054\u8868"),30:_l("\u4ED6\u8868\u5B57\u6BB5"),31:_l("\u516C\u5F0F"),32:_l("\u6587\u672C\u7EC4\u5408"),33:_l("\u81EA\u52A8\u7F16\u53F7"),34:_l("\u5B50\u8868"),35:_l("\u7EA7\u8054\u9009\u62E9"),36:_l("\u68C0\u67E5\u9879"),37:_l("\u6C47\u603B"),38:_l("\u516C\u5F0F"),40:_l("\u5B9A\u4F4D"),41:_l("\u5BCC\u6587\u672C"),42:_l("\u7B7E\u540D"),43:_l("\u6587\u672C\u8BC6\u522B"),44:_l("\u89D2\u8272"),45:_l("\u5D4C\u5165"),46:_l("\u65F6\u95F4"),47:_l("\u6761\u7801"),48:_l("\u7EC4\u7EC7\u89D2\u8272"),49:_l("API\u67E5\u8BE2"),50:_l("API\u67E5\u8BE2"),51:_l("\u67E5\u8BE2\u8BB0\u5F55"),52:_l("\u6807\u7B7E\u9875"),10000001:_l("\u4EBA\u5458"),10000002:_l("\u4EBA\u5458"),10000003:_l("\u6570\u7EC4"),10000004:_l("Row ID"),10000007:_l("\u666E\u901A\u6570\u7EC4"),10000008:_l("\u5BF9\u8C61\u6570\u7EC4")},y={1:{custom:_l("\u7B49\u4E8E%03056"),default:_l("\u662F\u5176\u4E2D\u4E00\u4E2A%03079")},2:{custom:_l("\u4E0D\u7B49\u4E8E%03057"),default:_l("\u4E0D\u662F\u4EFB\u4F55\u4E00\u4E2A%03077")},3:{area:_l("\u4E0B\u7EA7\u5305\u542B%03076"),relation:_l("\u6807\u9898\u5305\u542B%03085"),custom:_l("\u5305\u542B\u5176\u4E2D\u4E00\u4E2A%03082"),default:_l("\u5305\u542B%03058")},4:{area:_l("\u4E0B\u7EA7\u4E0D\u5305\u542B%03081"),relation:_l("\u6807\u9898\u4E0D\u5305\u542B%03086"),custom:_l("\u4E0D\u5305\u542B\u4EFB\u4F55\u4E00\u4E2A%03083"),default:_l("\u4E0D\u5305\u542B%03059")},5:_l("\u5F00\u5934\u662F%03060"),6:_l("\u7ED3\u5C3E\u662F%03062"),7:_l("\u4E0D\u4E3A\u7A7A%03065"),8:_l("\u4E3A\u7A7A%03065"),9:_l("\u7B49\u4E8E%03056"),10:_l("\u4E0D\u7B49\u4E8E%03057"),11:_l("\u5C0F\u4E8E%03067"),12:_l("\u5927\u4E8E%03066"),13:_l("\u5C0F\u4E8E\u7B49\u4E8E%03069"),14:_l("\u5927\u4E8E\u7B49\u4E8E%03068"),15:_l("\u5728\u8303\u56F4\u5185%03070"),16:_l("\u4E0D\u5728\u8303\u56F4\u5185%03071"),17:_l("\u65E9\u4E8E%03072"),18:_l("\u665A\u4E8E%03073"),19:_l("\u5F00\u59CB\u7B49\u4E8E"),20:_l("\u5F00\u59CB\u65E9\u4E8E"),21:_l("\u5F00\u59CB\u665A\u4E8E"),22:_l("\u5F00\u59CB\u5DF2\u586B\u5199"),23:_l("\u5F00\u59CB\u672A\u586B\u5199"),24:_l("\u7ED3\u675F\u7B49\u4E8E"),25:_l("\u7ED3\u675F\u65E9\u4E8E"),26:_l("\u7ED3\u675F\u665A\u4E8E"),27:_l("\u7ED3\u675F\u5DF2\u586B\u5199"),28:_l("\u7ED3\u675F\u672A\u586B\u5199"),29:{0:_l("\u9009\u4E2D"),1:_l("\u5F00\u542F"),2:_l("\u662F")},30:{0:_l("\u672A\u9009\u4E2D"),1:_l("\u5173\u95ED"),2:_l("\u5426")},31:_l("\u4E0D\u4E3A\u7A7A%03065"),32:_l("\u4E3A\u7A7A%03065"),33:{single:_l("\u662F\u5176\u4E2D\u4E00\u4E2A%03079"),multi:_l("\u5305\u542B\u5176\u4E2D\u4E00\u4E2A%03082")},34:{single:_l("\u4E0D\u662F\u4EFB\u4F55\u4E00\u4E2A%03077"),multi:_l("\u4E0D\u5305\u542B\u4EFB\u4F55\u4E00\u4E2A%03083")},35:_l("\u5C5E\u4E8E%03080"),36:_l("\u4E0D\u5C5E\u4E8E%03078"),37:_l("\u5728\u8303\u56F4\u5185%03070"),38:_l("\u4E0D\u5728\u8303\u56F4\u5185%03071"),39:_l("\u665A\u4E8E%03073"),40:_l("\u665A\u4E8E\u7B49\u4E8E%03075"),41:_l("\u65E9\u4E8E%03072"),42:_l("\u65E9\u4E8E\u7B49\u4E8E%03074"),43:_l("\u540C\u65F6\u5305\u542B%03084"),44:_l("\u5F00\u5934\u4E0D\u662F%03061"),45:_l("\u7ED3\u5C3E\u4E0D\u662F%03063"),48:_l("\u4E0B\u7EA7\u5305\u542B%03076"),49:_l("\u4E0B\u7EA7\u4E0D\u5305\u542B%03081"),100:_l("\u5305\u542B\u5176\u4E2D\u4E00\u4E2A%03082"),101:_l("\u4E0D\u5305\u542B\u4EFB\u4F55\u4E00\u4E2A%03083")},a={USER:1,ROLE:2,CONTROL:6,TEXT:7,DEPARTMENT:8,JOB:9,ORGANIZE_ROLE:10},r={11:_l("\u76F4\u5C5E\u4E0A\u53F8"),12:_l("\u4E3B\u90E8\u95E8\u8D1F\u8D23\u4EBA"),13:_l("\u4E3B\u90E8\u95E8\u4E0A\u7EA7\u8D1F\u8D23\u4EBA"),14:_l("\u4E3B\u90E8\u95E8\u4E2D\u7684\u804C\u4F4D"),15:_l("\u7EC4\u7EC7\u89D2\u8272\u5206\u7BA1\u8D1F\u8D23\u4EBA")},o={12:_l("\u90E8\u95E8\u8D1F\u8D23\u4EBA"),13:_l("\u4E0A\u7EA7\u90E8\u95E8\u8D1F\u8D23\u4EBA"),14:_l("\u90E8\u95E8\u4E2D\u7684\u804C\u4F4D"),15:_l("\u7EC4\u7EC7\u89D2\u8272\u5206\u7BA1\u8D1F\u8D23\u4EBA")},d={CURRENT:0,BEFORE:1,AFTER:2},Z={DAY:1,WEEK:2,MONTH:3,YEAR:4,WORK:5,CUSTOM:6,HOUR:7,MINUTE:8},H={MINUTE:1,HOUR:2,DAY:3},U={1:_l("\u5206\u949F"),2:_l("\u5C0F\u65F6"),3:_l("\u5929")},f={"0-1":"https://help.mingdao.com/workflow/trigger-by-worksheet","0-5":"https://help.mingdao.com/workflow/trigger-by-scheduled","0-6":"https://help.mingdao.com/workflow/trigger-by-date-field","0-7":"https://help.mingdao.com/workflow/trigger-by-webhook",1:"https://help.mingdao.com/workflow/node-branch",3:"https://help.mingdao.com/workflow/node-fill-in",4:"https://help.mingdao.com/workflow/node-approve",5:"https://help.mingdao.com/workflow/node-cc-send-internal-notification","6-1-1":"https://help.mingdao.com/workflow/node-add-record","6-1-2":"https://help.mingdao.com/workflow/node-new-task","6-2":"https://help.mingdao.com/workflow/node-update-record","6-2-102":"https://help.mingdao.com/workflow/node-update-parameters","6-3":"https://help.mingdao.com/workflow/node-delete-record","6-20":"https://help.mingdao.com/workflow/node-get-single-data","6-21":"https://help.mingdao.com/workflow/node-add-record","7-406":"https://help.mingdao.com/workflow/node-get-single-data","7-407":"https://help.mingdao.com/workflow/node-get-single-data",8:"https://help.mingdao.com/workflow/node-send-api-request",9:"https://help.mingdao.com/workflow/node-calculation",10:"https://help.mingdao.com/workflow/node-send-sms",11:"https://help.mingdao.com/workflow/node-send-email",12:"https://help.mingdao.com/workflow/node-delay",13:"https://help.mingdao.com/workflow/node-get-multiple-data",14:"https://help.mingdao.com/workflow/node-code-block",15:"https://help.mingdao.com/workflow/node-get-link",16:"https://help.mingdao.com/workflow/node-subflow",17:"https://help.mingdao.com/workflow/node-interface-push",18:"https://help.mingdao.com/workflow/node-print-record",19:"https://help.mingdao.com/node-send-wechat-official-account-template-message",20:"https://help.mingdao.com/workflow/node-call-pbp",21:"https://help.mingdao.com/workflow/node-json-parsing",25:"https://help.mingdao.com/workflow/node-call-integrated-api",26:"https://help.mingdao.com/workflow/node-initiate-approval-flow",1e3:"https://help.mingdao.com/workflow/node-get-single-data-from-user",1001:"https://help.mingdao.com/workflow/node-get-multiple-data-from-user",queue:"https://help.mingdao.com/workflow/in-queue"},V={NETWORK:0,APP:2},C={1:_l("\u70B9\u51FB\u6309\u94AE\u540E\u7ACB\u5373\u6267\u884C"),2:_l("\u70B9\u51FB\u6309\u94AE\u540E\u9700\u8981\u4E8C\u6B21\u786E\u8BA4"),3:_l("\u70B9\u51FB\u6309\u94AE\u586B\u5199\u6307\u5B9A\u5185\u5BB9\u540E\u7ACB\u5373\u6267\u884C")},O=[{text:_l("\u4ECA\u5929"),value:1},{text:_l("\u6628\u5929"),value:2},{text:_l("\u660E\u5929"),value:3},{text:_l("\u672C\u5468"),value:4},{text:_l("\u4E0A\u5468"),value:5},{text:_l("\u4E0B\u5468"),value:6},{text:_l("\u672C\u6708"),value:8},{text:_l("\u4E0A\u6708"),value:9},{text:_l("\u4E0B\u6708"),value:10},{text:_l("\u672C\u5B63\u5EA6"),value:11},{text:_l("\u4E0A\u5B63\u5EA6"),value:12},{text:_l("\u4E0B\u5B63\u5EA6"),value:13},{text:_l("\u4ECA\u5E74"),value:15},{text:_l("\u53BB\u5E74"),value:16},{text:_l("\u660E\u5E74"),value:17},{text:_l("\u6307\u5B9A\u65F6\u95F4"),value:20}],n={ALERT:1,CREATE:2,DETAIL:3,VIEW:4,PAGE:5,LINK:6,NOTIFICATION:7},s=[{text:_l("\u5F39\u51FA\u63D0\u793A"),value:n.ALERT},{text:_l("\u5361\u7247\u901A\u77E5"),value:n.NOTIFICATION},{text:_l("\u6253\u5F00\u8BB0\u5F55\u521B\u5EFA\u5C42"),value:n.CREATE},{text:_l("\u6253\u5F00\u8BB0\u5F55\u8BE6\u60C5\u9875"),value:n.DETAIL},{text:_l("\u6253\u5F00\u5DE5\u4F5C\u8868\u89C6\u56FE"),value:n.VIEW},{text:_l("\u6253\u5F00\u81EA\u5B9A\u4E49\u9875\u9762"),value:n.PAGE},{text:_l("\u6253\u5F00\u94FE\u63A5"),value:n.LINK}],j=[{text:_l("\u6587\u672C"),value:2,en:"string"},{text:_l("\u6570\u503C"),value:6,en:"number"},{text:_l("\u65E5\u671F\u65F6\u95F4"),value:16,en:"date"},{text:_l("\u4EBA\u5458"),value:26,en:"member"},{text:_l("\u90E8\u95E8"),value:27,en:"department"},{text:_l("\u7EC4\u7EC7\u89D2\u8272"),value:48,en:"orgRole"},{text:_l("\u9644\u4EF6"),value:14,en:"attachment"},{text:_l("\u6570\u7EC4"),value:10000003,en:"array"},{text:_l("\u666E\u901A\u6570\u7EC4"),value:10000007,en:"array"},{text:_l("\u5BF9\u8C61\u6570\u7EC4"),value:10000008,en:"array[object]"}],A=[{text:"GET",value:1},{text:"POST",value:2},{text:"PUT",value:3},{text:"DELETE",value:4},{text:"HEAD",value:5},{text:"PATCH",value:6}],S={1:"YYYY-MM-DD HH:mm",2:"YYYY-MM-DD HH",3:"YYYY-MM-DD",4:"YYYY-MM",5:"YYYY",6:"YYYY-MM-DD HH:mm"},I=[{value:0,text:_l("ISO"),format:_l("YYYY-MM-DD")},{value:1,text:_l("\u4E2D\u56FD"),format:_l("YYYY\u5E74M\u6708D\u65E5")},{value:2,text:"US",format:_l("M/D/YYYY")},{value:3,text:"EU",format:_l("D/M/YYYY")}],c="6038a1cbf18158039fb40e69"},72078:(lt,Te,t)=>{"use strict";t.d(Te,{BH:()=>d,DN:()=>o,ED:()=>H,OV:()=>s,RV:()=>O,bC:()=>a,cA:()=>V,dv:()=>R,iQ:()=>C,lX:()=>r,nf:()=>f,v7:()=>Z,wu:()=>y,zA:()=>n});var ce=t(88902),g=t.n(ce),p=t(96486),L=t.n(p);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(5618);var R=function(A,S){for(var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,c=I?[]:[S],q=(A[S]||{}).nextId;q&&q!=="99";)c.push(q),q=(A[q]||{}).nextId;return c},y=function(A,S,I){var c=void 0;switch(A){case te.QZ.FIRST:S===te.IF.LOOP?c="icon-hr_surplus":S===te.IF.DATE?c="icon-hr_time":S===te.IF.WEBHOOK?c="icon-workflow_webhook":S===te.IF.CUSTOM_ACTION?c="icon-custom_actions":S===te.IF.USER?c="icon-hr_structure":S===te.IF.DEPARTMENT?c="icon-workflow":I===te.FH.DISCUSS?c="icon-replyto":S===te.IF.EXTERNAL_USER?c="icon-language":S===te.IF.PBC?c="icon-pbc":S===te.IF.PARAMETER?c="icon-parameter":S===te.IF.APPROVAL_START?c="icon-approval":S===te.IF.EVENT_PUSH?c="icon-sending":c="icon-table";break;case te.QZ.WRITE:c="icon-workflow_write";break;case te.QZ.APPROVAL:c="icon-workflow_ea";break;case te.QZ.CC:c="icon-workflow_notice";break;case te.QZ.ACTION:S===te.IF.TASK?c="icon-custom_assignment":S===te.IF.PROCESS?c="icon-parameter":S===te.IF.GLOBAL_VARIABLE?c="icon-global_variable":S===te.IF.SHEET&&I===te.gp.EDIT?c="icon-workflow_update":S===te.IF.SHEET&&I===te.gp.ADD?c="icon-workflow_new":S===te.IF.SHEET&&I===te.gp.DELETE?c="icon-hr_delete":S===te.IF.SHEET&&I===te.gp.RELATION?c="icon-workflow_search":S===te.IF.EXTERNAL_USER&&I===te.gp.EDIT?c="icon-update_information":S===te.IF.EXTERNAL_USER&&I===te.gp.ADD?c="icon-invited_users":S===te.IF.CALENDAR&&(c="icon-sidebar_calendar");break;case te.QZ.SEARCH:c="icon-search";break;case te.QZ.WEBHOOK:c="icon-workflow_webhook";break;case te.QZ.FORMULA:L().includes([te.gp.OBJECT_TOTAL,te.gp.WORKSHEET_TOTAL,te.gp.CUSTOM_ACTION_TOTAL],I)?c="icon-sigma":c="icon-workflow_function";break;case te.QZ.MESSAGE:c="icon-workflow_sms";break;case te.QZ.EMAIL:c="icon-workflow_email";break;case te.QZ.DELAY:c="icon-workflow_delayed";break;case te.QZ.GET_MORE_RECORD:c="icon-transport";break;case te.QZ.CODE:c="icon-url";break;case te.QZ.LINK:c="icon-link2";break;case te.QZ.SUB_PROCESS:c="icon-subprocess";break;case te.QZ.PUSH:c="icon-interface_push";break;case te.QZ.FILE:c="icon-print";break;case te.QZ.TEMPLATE:c="icon-wechat";break;case te.QZ.PBC:c="icon-pbc";break;case te.QZ.JSON_PARSE:c="icon-task_custom_polymer";break;case te.QZ.AUTHENTICATION:c="icon-key1";break;case te.QZ.PARAMETER:c="icon-input";break;case te.QZ.API_PACKAGE:c="icon-connect";break;case te.QZ.API:c="icon-api";break;case te.QZ.APPROVAL_PROCESS:c="icon-approval";break;case te.QZ.NOTICE:c="icon-hr_message_reminder";break;case te.QZ.SNAPSHOT:c="icon-camera_alt";break;case te.QZ.SYSTEM:S===te.IF.PROCESS?c="icon-parameter":S===te.IF.WORKSHEET_LOG?c="icon-custom_actions":S===te.IF.GLOBAL_VARIABLE?c="icon-global_variable":c="icon-application_custom";break;case te.QZ.FIND_SINGLE_MESSAGE:S===te.IF.EXTERNAL_USER?c="icon-external_users":c="icon-person_search";break;case te.QZ.FIND_MORE_MESSAGE:S===te.IF.EXTERNAL_USER?c="icon-folder-public":c="icon-group-members";break;default:c="icon-workflow_info";break}return c},a=function(A,S){switch(A){case te.IF.SHEET:return"BGYellow";case te.IF.WEBHOOK:case te.IF.CUSTOM_ACTION:case te.IF.PBC:case te.IF.EVENT_PUSH:return"BGBlueAsh";case te.IF.USER:case te.IF.DEPARTMENT:return"BGGreen";case te.IF.EXTERNAL_USER:return S===te.FH.DISCUSS?"BGBlue":"BGGreen";case te.IF.APPROVAL_START:return"BGDarkBlue";default:return"BGBlue"}},r=function(A){var S=0;return(A||[]).forEach(function(I){return I.forEach(function(c){L().includes(["7","8","15","16","29","30","31","32","37","38"],c.conditionId)?L().includes(["15","16","37","38"],c.conditionId)&&(!c.conditionValues.length||!(c.conditionValues[0]||{}).value&&!(c.conditionValues[0]||{}).controlId&&!(c.conditionValues[1]||{}).value&&!(c.conditionValues[1]||{}).controlId)&&S++:(L().isEmpty(c)||!c.conditionValues.length||!c.conditionValues[0].value&&!c.conditionValues[0].controlId)&&S++})}),!!S},o=function j(A,S){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:">";if(!S||!g()(S).length)return A;var c=/\$(\w+-\w+)\$/;if(!c.test(A))return A;var q=A.replace(c,function(b,k){var ee=k.split(/([a-zA-Z0-9#]{24,32})-/).filter(function(ie){return ie}),re=ee.map(function(ie,le){return S[le===0?ie:ee.join("-")].name});return" ("+re.join(I)+") "});return j(q,S)},d=function(A){try{return A=JSON.parse((A||"").replace(/\$[^ \r\n]+?\$/g,1)),L().isObject(A)}catch(S){return!1}},Z=function(A,S){var I=void 0;switch(A){case 1:case 2:case 3:case 4:case 5:case 7:case 32:case 33:case 41:case 50:I={ids:["1","2","3","4","5","44","6","45","8","7"],defaultConditionId:"1"};break;case 6:case 8:case 31:I={ids:["9","10","12","11","14","13","15","16","8","7"],defaultConditionId:"9"};break;case 9:case 11:I={ids:["9","10","1","2","8","7"],defaultConditionId:"9"};break;case 10:I={ids:["9","10","3","4","43","8","7"],defaultConditionId:"9"};break;case 14:case 21:case 40:case 42:I={ids:["32","31"],defaultConditionId:"31"};break;case 15:case 16:case 46:I={ids:["9","10","41","39","42","40","37","38","8","7"],defaultConditionId:"9"};break;case 19:case 23:case 24:I={ids:["1","2","35","36","3","4","8","7"],defaultConditionId:"1"};break;case 28:I={ids:["1","2","8","7"],defaultConditionId:"1"};break;case 26:case 48:case 10000001:S===0?I={ids:["9","10","1","2","8","7"],defaultConditionId:"9"}:I={ids:["9","10","3","4","43","8","7"],defaultConditionId:"9"};break;case 27:S===0?I={ids:["9","10","1","2","35","36","48","49","8","7"],defaultConditionId:"9"}:I={ids:["9","10","100","101","35","36","48","49","43","8","7"],defaultConditionId:"9"};break;case 29:S===1?I={ids:["9","10","33","34","3","4","32","31"],defaultConditionId:"33"}:I={ids:["9","10","33","34","43","32","31"],defaultConditionId:"33"};break;case 36:I={ids:["29","30"],defaultConditionId:"29"};break;case 38:S===1?I={ids:["9","10","12","11","14","13","15","16","8","7"],defaultConditionId:"9"}:I={ids:["9","10","41","39","42","40","37","38","8","7"],defaultConditionId:"9"};break;case 10000007:case 10000008:I={ids:["8","7"],defaultConditionId:"7"};break}return I},H=function(A){var S=void 0;switch(A){case"1":case"2":case"3":case"4":case"5":case"6":case"9":case"10":case"11":case"12":case"13":case"14":case"17":case"18":case"33":case"34":case"35":case"36":case"39":case"40":case"41":case"42":case"43":case"44":case"45":case"48":case"49":case"100":case"101":S=1;break;case"7":case"8":case"29":case"30":case"31":case"32":S=0;break;case"15":case"16":case"37":case"38":S=2;break}return S},U=function(A){var S=A.list,I=A.key,c=A.value,q=A.uniqueKey,b=A.uniqueValue,k=A.errors,ee=A.verifyFormat,re=ee===void 0?!1:ee;return c?re&&!/^[a-zA-Z]{1}\w*$/.test(c.trim())?k[b]=1:S.filter(function(ie,le){return ie[I]===c.trim()&&ie[q]!==b}).length>0?k[b]=2:k[b]="":k[b]="",S.forEach(function(ie){ie[q]!==b&&!_.find(S,function(le){return le[I]===ie[I]&&le[q]!==ie[q]})&&(k[ie.controlId]="")}),k},f=function(A,S){return L().includes(["29","30"],S)?te.kE[S][L().get(A||{},"advancedSetting.showtype")]:L().includes(["3","4"],S)&&L().includes([19,23,24],A.type)?te.kE[S].area:L().includes(["3","4"],S)&&A.type===29?te.kE[S].relation:L().includes(["3","4"],S)?L().includes([10,19,23,24,26,27,29,48,10000001],A.type)?te.kE[S].custom:te.kE[S].default:L().includes(["1","2"],S)?L().includes([1,2,3,4,5,7,28,32,33,41,50],A.type)?te.kE[S].custom:te.kE[S].default:L().includes(["33","34"],S)&&A.type===29?A.enumDefault===1?te.kE[S].single:te.kE[S].multi:te.kE[S]},V=function(A){return A.length>1?A.map(function(S){return{conditions:[S],spliceType:2}}):[{conditions:A,spliceType:2}]},C=function(A,S,I){return A===te.uT?S===1?_l("\u5168\u5C40\u53D8\u91CF(\u5E94\u7528)"):_l("\u5168\u5C40\u53D8\u91CF(\u7EC4\u7EC7)"):I||""},O=function(A,S){var I=void 0;switch(A){case 1:case 2:case 3:case 4:case 5:case 7:case 32:case 33:case 41:case 50:I=["1","2","3","4","5","44","6","45"];break;case 6:case 8:case 15:case 16:case 31:case 46:I=["9","10"];break;case 9:case 11:I=["9","10","1","2"];break;case 10:I=["9","10","3","4","43"];break}return L().includes(I,S)},n=function(A){return L().isObject(A)&&(A=L().cloneDeep(A),g()(A).forEach(function(S){delete A[S].controls,delete A[S].flowNodeList,delete A[S].formulaMap,delete A[S].selectNodeObj})),A},s=function(A){var S={14:["originalFilename","ext"],26:["fullName"],27:["departmentName"],48:["organizeName"]},I=S[A.type];return I?safeParse(A.fieldValueDefault).map(function(c){return I.map(function(q){return c[q]}).join("")}).join(","):A.fieldValueDefault}},33179:(lt,Te,t)=>{"use strict";t.d(Te,{V:()=>p,Z:()=>L});var ce=t(96486),g=t.n(ce),p="Workflow";const L={server:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return R.isIntegration?__api_server__.integration||md.global.Config.IntegrationAPIUrl:__api_server__.workflow||md.global.Config.WorkFlowUrl},ajaxOptions:{url:"",type:"Get",cache:!1,dataType:"json",contentType:"application/json"}}},51843:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>te});var ce=t(63239),g=t.n(ce),p=t(33179),L={add:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/delegation/add",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"delegationadd",g()(y),$.extend(p.Z,a))},getList:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/delegation/getList",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"delegationgetList",g()(y),$.extend(p.Z,a))},getListByPrincipals:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/delegation/getListByPrincipals",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"delegationgetListByPrincipals",g()(y),$.extend(p.Z,a))},update:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/delegation/update",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"delegationupdate",g()(y),$.extend(p.Z,a))}};const te=L},62023:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>te});var ce=t(63239),g=t.n(ce),p=t(33179),L={add:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/add",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"flowNodeadd",g()(y),$.extend(p.Z,a))},delete:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/delete",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"flowNodedelete",g()(y),$.extend(p.Z,a))},get:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/get",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"flowNodeget",y,$.extend(p.Z,a))},getAppTemplateControls:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/getAppTemplateControls",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"flowNodegetAppTemplateControls",y,$.extend(p.Z,a))},getCallBackNodeNames:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/getCallBackNodeNames",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"flowNodegetCallBackNodeNames",y,$.extend(p.Z,a))},getFlowAppDtos:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/getFlowAppDtos",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"flowNodegetFlowAppDtos",y,$.extend(p.Z,a))},getFlowNodeAppDtos:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/getFlowNodeAppDtos",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"flowNodegetFlowNodeAppDtos",y,$.extend(p.Z,a))},getNodeDetail:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/getNodeDetail",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"flowNodegetNodeDetail",y,$.extend(p.Z,a))},getNodeDetailHistory:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/getNodeDetailHistory",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"flowNodegetNodeDetailHistory",y,$.extend(p.Z,a))},getNodeFormProperty:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/getNodeFormProperty",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"flowNodegetNodeFormProperty",y,$.extend(p.Z,a))},getStartEventDeploy:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/getStartEventDeploy",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"flowNodegetStartEventDeploy",y,$.extend(p.Z,a))},getSubProcessList:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/getSubProcessList",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"flowNodegetSubProcessList",y,$.extend(p.Z,a))},getUserAppDtos:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/getUserAppDtos",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"flowNodegetUserAppDtos",y,$.extend(p.Z,a))},nodeDesc:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/nodeDesc",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"flowNodenodeDesc",g()(y),$.extend(p.Z,a))},saveNode:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/saveNode",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"flowNodesaveNode",g()(y),$.extend(p.Z,a))},updateFlowNodeName:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/updateFlowNodeName",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"flowNodeupdateFlowNodeName",g()(y),$.extend(p.Z,a))},codeTest:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/codeTest",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"flowNodecodeTest",g()(y),$.extend(p.Z,a))},getWebHookData:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/getWebHookData",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"flowNodegetWebHookData",y,$.extend(p.Z,a))},jsonToControls:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/jsonToControls",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"flowNodejsonToControls",g()(y),$.extend(p.Z,a))},webHookTestRequest:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/webHookTestRequest",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"flowNodewebHookTestRequest",g()(y),$.extend(p.Z,a))},createCodeTemplate:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/createCodeTemplate",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"flowNodecreateCodeTemplate",g()(y),$.extend(p.Z,a))},createSMSTemplate:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/createSMSTemplate",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"flowNodecreateSMSTemplate",g()(y),$.extend(p.Z,a))},deleteSMSTemplate:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/deleteSMSTemplate",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"flowNodedeleteSMSTemplate",g()(y),$.extend(p.Z,a))},getAllSMSTemplateList:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/getAllSMSTemplateList",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"flowNodegetAllSMSTemplateList",y,$.extend(p.Z,a))},getCodeTemplateList:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/getCodeTemplateList",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"flowNodegetCodeTemplateList",y,$.extend(p.Z,a))},updateCodeTemplate:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/flowNode/updateCodeTemplate",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"flowNodeupdateCodeTemplate",g()(y),$.extend(p.Z,a))}};const te=L},78265:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>te});var ce=t(63239),g=t.n(ce),p=t(33179),L={count:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/instance/count",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"instancecount",y,$.extend(p.Z,a))},forward:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/instance/forward",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"instanceforward",g()(y),$.extend(p.Z,a))},getArchivedList:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/instance/getArchivedList",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"instancegetArchivedList",y,$.extend(p.Z,a))},getHistoryDetail:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/instance/getHistoryDetail",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"instancegetHistoryDetail",y,$.extend(p.Z,a))},getHistoryList:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/instance/getHistoryList",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"instancegetHistoryList",y,$.extend(p.Z,a))},getInstance:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/instance/getInstance",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"instancegetInstance",y,$.extend(p.Z,a))},operation:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/instance/operation",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"instanceoperation",g()(y),$.extend(p.Z,a))},overrule:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/instance/overrule",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"instanceoverrule",g()(y),$.extend(p.Z,a))},pass:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/instance/pass",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"instancepass",g()(y),$.extend(p.Z,a))},revoke:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/instance/revoke",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"instancerevoke",g()(y),$.extend(p.Z,a))},signTask:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/instance/sign",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"instancesign",g()(y),$.extend(p.Z,a))},submit:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/instance/submit",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"instancesubmit",g()(y),$.extend(p.Z,a))},transfer:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/instance/transfer",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"instancetransfer",g()(y),$.extend(p.Z,a))}};const te=L},58064:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>te});var ce=t(63239),g=t.n(ce),p=t(33179),L={get2:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/v2/instance/get",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"v2instanceget",y,$.extend(p.Z,a))},getTodoCount2:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/v2/instance/getTodoCount",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"v2instancegetTodoCount",y,$.extend(p.Z,a))},getTodoList2:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/v2/instance/getTodoList",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"v2instancegetTodoList",g()(y),$.extend(p.Z,a))},batch:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/v1/instance/batch",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"v1instancebatch",g()(y),$.extend(p.Z,a))},endInstance:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/v1/instance/endInstance",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"v1instanceendInstance",y,$.extend(p.Z,a))},endInstanceList:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/v1/instance/endInstanceList",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"v1instanceendInstanceList",g()(y),$.extend(p.Z,a))},get:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/v1/instance/get",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"v1instanceget",y,$.extend(p.Z,a))},getTodoCount:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/v1/instance/getTodoCount",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"v1instancegetTodoCount",y,$.extend(p.Z,a))},getTodoList:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/v1/instance/getTodoList",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"v1instancegetTodoList",g()(y),$.extend(p.Z,a))},getTodoListFilter:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/v1/instance/getTodoListFilter",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"v1instancegetTodoListFilter",g()(y),$.extend(p.Z,a))},getWorkItem:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/v1/instance/getWorkItem",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"v1instancegetWorkItem",y,$.extend(p.Z,a))},resetInstance:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/v1/instance/resetInstance",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"v1instanceresetInstance",y,$.extend(p.Z,a))},resetInstanceList:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/v1/instance/resetInstanceList",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"v1instanceresetInstanceList",g()(y),$.extend(p.Z,a))}};const te=L},42638:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>te});var ce=t(63239),g=t.n(ce),p=t(33179),L={addProcess:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/add",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"processadd",g()(y),$.extend(p.Z,a))},closeStorePush:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/closeStorePush",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"processcloseStorePush",y,$.extend(p.Z,a))},copyProcess:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/copyProcess",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"processcopyProcess",g()(y),$.extend(p.Z,a))},deleteProcess:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/deleteProcess",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"processdeleteProcess",g()(y),$.extend(p.Z,a))},getHistory:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/getHistory",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"processgetHistory",y,$.extend(p.Z,a))},getProcessApiInfo:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/getProcessApiInfo",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"processgetProcessApiInfo",y,$.extend(p.Z,a))},getProcessByControlId:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/getProcessByControlId",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"processgetProcessByControlId",y,$.extend(p.Z,a))},getProcessById:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/getProcessById",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"processgetProcessById",y,$.extend(p.Z,a))},getProcessByTriggerId:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/getProcessByTriggerId",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"processgetProcessByTriggerId",y,$.extend(p.Z,a))},getProcessConfig:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/getProcessConfig",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"processgetProcessConfig",y,$.extend(p.Z,a))},getProcessListApi:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/getProcessListApi",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"processgetProcessListApi",y,$.extend(p.Z,a))},getProcessPublish:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/getProcessPublish",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"processgetProcessPublish",y,$.extend(p.Z,a))},getStore:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/getStore",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"processgetStore",y,$.extend(p.Z,a))},getTriggerProcessList:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/getTriggerProcessList",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"processgetTriggerProcessList",y,$.extend(p.Z,a))},goBack:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/goBack",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"processgoBack",y,$.extend(p.Z,a))},move:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/move",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"processmove",g()(y),$.extend(p.Z,a))},publish:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/publish",p.Z.ajaxOptions.type="GET",mdyAPI(p.V,"processpublish",y,$.extend(p.Z,a))},saveProcessConfig:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/saveProcessConfig",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"processsaveProcessConfig",g()(y),$.extend(p.Z,a))},startProcess:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/startProcess",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"processstartProcess",g()(y),$.extend(p.Z,a))},startProcessById:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/startProcessById",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"processstartProcessById",g()(y),$.extend(p.Z,a))},startProcessByPBC:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/startProcessByPBC",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"processstartProcessByPBC",g()(y),$.extend(p.Z,a))},updateProcess:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/update",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"processupdate",g()(y),$.extend(p.Z,a))},updateOwner:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/updateOwner",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"processupdateOwner",g()(y),$.extend(p.Z,a))},updateUseStatus:function(y,a){return p.Z.ajaxOptions.url=p.Z.server(a)+"/process/updateUseStatus",p.Z.ajaxOptions.type="POST",mdyAPI(p.V,"processupdateUseStatus",g()(y),$.extend(p.Z,a))}};const te=L},20954:(lt,Te,t)=>{"use strict";if(t.d(Te,{Z:()=>Z}),!/^(1887|7596|7798)$/.test(t.j))var ce=t(33867);var g=t(12424),p=t(86735),L=t(67294),te=t(93967),R=t.n(te);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(15577);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(31620);var r=t(71893),o=(0,p.Z)([`
  &:hover {
    .Gray_bd {
      color: #2196f3 !important;
    }
  }
`],[`
  &:hover {
    .Gray_bd {
      color: #2196f3 !important;
    }
  }
`]),d=r.ZP.div(o);const Z=function(H){var U=H.processId,f=H.instanceId,V=H.processName,C=V===void 0?"":V,O=H.currentWork,n=H.hasBack,s=n===void 0?!1:n,j=H.onClose,A=j===void 0?function(){}:j,S=H.isApproval,I=(0,L.useState)(!1),c=(0,g.Z)(I,2),q=c[0],b=c[1],k=(0,y.Q9)(),ee=k?a.jO:a.ZP;return L.createElement("div",{className:R()("flexRow mTop20 mRight20 mBottom5",k?"pLeft10":"pLeft25")},L.createElement(d,{className:R()("flexRow alignItemsCenter mRight15 ellipsis",{pointer:s}),onClick:A},s&&L.createElement(ce.Z,{className:R()("Font20 Gray_bd",k?"mRight5":"mRight10"),icon:"arrow-left-border"}),L.createElement("div",{className:"Font17 bold"},C)),L.createElement("div",{className:"flex"}),S&&L.createElement("div",{className:"flexRow pointer alignItemsCenter Gray_9e ThemeHoverColor3",onClick:function(){return b(!0)}},L.createElement(ce.Z,{className:"Font16 mRight5",icon:"department1"}),L.createElement("div",{className:"bold"},_l("\u6D41\u8F6C\u56FE"))),q&&L.createElement(ee,{processId:U,instanceId:f,selectNodeId:_.get(O,"flowNode.id"),onClose:function(){return b(!1)}}))}},3306:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>p});var ce=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(59687);const p=function(L){var te=L.worksheetId,R=L.rowId,y=L.currentWork,a=L.currentType,r=L.works,o=L.status,d=L.currents,Z=d===void 0?[]:d,H=L.onChangeCurrentWork,U=H===void 0?function(){}:H,f=L.appId,V=L.projectId;return(0,ce.useLayoutEffect)(function(){if(y){var C=$("#workflowStep_"+y.workId);C.closest(".nano").nanoScroller({scrollTo:C})}},[]),ce.createElement(ce.Fragment,null,r.map(function(C,O){return ce.createElement(g.Z,{key:O,appId:f,projectId:V,isLast:O===r.length-1,data:C,currentWork:y,currentType:a,worksheetId:te,rowId:R,status:o,currents:Z,onChangeCurrentWork:U})}),_.includes([2,3,4],o)&&ce.createElement("div",{className:"TxtCenter Gray_75 mTop5",style:{marginLeft:34}},_l("\u6D41\u7A0B\u7ED3\u675F")))}},1097:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>z});var ce=t(63239),g=t.n(ce),p=t(26022),L=t(31546),te=t(62745),R=t(72557),y=t(69288),a=t(97373),r=t(94055),o=t(85105),d=t.n(o),Z=t(99663),H=t(22600),U=t(49135),f=t(93196),V=t(86735),C=t(67294),O=t(45697),n=t(65369),s=t(93967),j=t.n(s),A=t(96486),S=t.n(A),I=t(15577),c=t(61987),q=t(71893);const b={getQrCode:function(B){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("CodeAuth","GetQrCode",B,x)},getQrCodeResult:function(B){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("CodeAuth","GetQrCodeResult",B,x)},getDefaultPicUrl:function(B){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("CodeAuth","GetDefaultPicUrl",B,x)}};var k=t(51843),ee=t(75559),re,ie,le,E=(0,V.Z)([`
  align-items: center;
  display: inline-flex;
  height: 26px;
  vertical-align: top;
  margin-top: 10px;
  margin-right: 10px;
  background: #f7f7f7;
  border-radius: 26px;
  padding-right: 10px;
  position: relative;
  img {
    width: 26px;
    height: 26px;
    border-radius: 50%;
  }
  .icon-close {
    &:hover {
      color: #f44336 !important;
    }
  }
  .icon-info {
    color: #ffa340;
    position: absolute;
    left: -5px;
    top: -5px;
    &:before {
      z-index: 1;
      position: relative;
    }
    &:after {
      position: absolute;
      top: 3px;
      left: 3px;
      right: 3px;
      bottom: 3px;
      content: '';
      background: #fff;
    }
  }
`],[`
  align-items: center;
  display: inline-flex;
  height: 26px;
  vertical-align: top;
  margin-top: 10px;
  margin-right: 10px;
  background: #f7f7f7;
  border-radius: 26px;
  padding-right: 10px;
  position: relative;
  img {
    width: 26px;
    height: 26px;
    border-radius: 50%;
  }
  .icon-close {
    &:hover {
      color: #f44336 !important;
    }
  }
  .icon-info {
    color: #ffa340;
    position: absolute;
    left: -5px;
    top: -5px;
    &:before {
      z-index: 1;
      position: relative;
    }
    &:after {
      position: absolute;
      top: 3px;
      left: 3px;
      right: 3px;
      bottom: 3px;
      content: '';
      background: #fff;
    }
  }
`]),w=(0,V.Z)([`
  overflow-x: hidden;
  overflow-y: auto;
  max-height: 180px;
  span {
    max-width: 100%;
    height: 28px;
    display: inline-block;
    line-height: 28px;
    padding: 0 12px;
    margin-right: 8px;
    margin-top: 4px;
    margin-bottom: 4px;
    cursor: pointer;
    background: #f5f5f5;
    border-radius: 3px;
    color: #757575;
    &:hover,
    &.active {
      color: #2196f3;
      background-color: #e8f5ff;
    }
  }
`],[`
  overflow-x: hidden;
  overflow-y: auto;
  max-height: 180px;
  span {
    max-width: 100%;
    height: 28px;
    display: inline-block;
    line-height: 28px;
    padding: 0 12px;
    margin-right: 8px;
    margin-top: 4px;
    margin-bottom: 4px;
    cursor: pointer;
    background: #f5f5f5;
    border-radius: 3px;
    color: #757575;
    &:hover,
    &.active {
      color: #2196f3;
      background-color: #e8f5ff;
    }
  }
`]),K=(0,V.Z)([`
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid #ccc;
  border-radius: 3px;
  margin-left: 10px;
  cursor: pointer;
  width: 36px;
  height: 36px;
  &:hover {
    background-color: #f5f5f5;
  }
`],[`
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid #ccc;
  border-radius: 3px;
  margin-left: 10px;
  cursor: pointer;
  width: 36px;
  height: 36px;
  &:hover {
    background-color: #f5f5f5;
  }
`]),N=q.ZP.span(E),F=q.ZP.div(w),h=q.ZP.span(K),z=(ie=re=function(X){(0,f.default)(B,X);function B(x){(0,Z.default)(this,B);var Q=(0,U.default)(this,(B.__proto__||d()(B)).call(this,x));le.call(Q);var i="",m="";if(x.action==="return"&&(i=S().get(x.data,"backFlowNodes[0].id")||""),S().includes(["pass","overrule","return","after"],x.action)){var v=((S().includes(["pass","after"],x.action)?S().get(x,"data.opinionTemplate.opinions[4]"):S().get(x,"data.opinionTemplate.opinions[5]"))||[]).filter(function(W){return W.selected});v.length&&(m=v[0].value)}return Q.state={content:m,backNodeId:i,selectedUsers:[],showCode:!1,link:"",code:"",resultCode:"",entrustList:{},showPassword:!1,removeNoneVerification:!1,files:""},Q}return(0,H.default)(B,[{key:"componentDidMount",value:function(){var Q=this,i=this.props,m=i.projectId,v=i.action,W=(this.props.data||{}).flowNode||{},P=W.encrypt;S().includes(["pass","overrule","return"],v)&&P&&(0,I.Gv)({projectId:m,checkNeedAuth:!0,fail:function(l){Q.setState({showPassword:!0,removeNoneVerification:l==="showPassword"})}})}},{key:"renderMember",value:function(){var Q=this,i=this.props.action,m=this.state,v=m.selectedUsers,W=m.entrustList;return C.createElement("div",{className:"mBottom20"},C.createElement("div",{className:"bold"},S().includes(["after","before"],i)?_l("\u52A0\u7B7E\u7ED9"):i==="addApprove"?_l("\u6DFB\u52A0\u6210\u5458"):_l("\u8F6C\u4EA4\u7ED9"),i==="addApprove"&&!!v.length&&"("+v.length+")"),C.createElement("div",null,v.map(function(P,u){return C.createElement(N,{key:u},C.createElement("img",{src:P.avatar}),C.createElement("span",{className:"ellipsis mLeft8",style:{maxWidth:300}},P.fullname),i==="addApprove"&&C.createElement("i",{className:"icon-close Font14 mLeft5 Gray_9e pointer",onClick:function(){return Q.setState({selectedUsers:v.filter(function(T){return T.accountId!==P.accountId})})}}),!!W[P.accountId]&&C.createElement(r.default,{placement:"bottomLeft",color:"#fff",overlayInnerStyle:{padding:"12px 16px",width:240},align:{offset:[5,15]},title:function(){return C.createElement(C.Fragment,null,C.createElement("div",{className:"Font15 bold Gray"},_l("%0\u53D1\u8D77\u4E86\u59D4\u6258",W[P.accountId].principal.fullName)),C.createElement("div",{className:"mTop10 flexRow alignItemsCenter"},C.createElement("div",{className:"Gray_9e Font13"},_l("\u5C06\u59D4\u6258\u7ED9")),C.createElement("div",{className:"mLeft15"},C.createElement(N,{style:{marginTop:0}},C.createElement("img",{src:W[P.accountId].trustee.avatar}),C.createElement("span",{className:"ellipsis mLeft8 Gray",style:{maxWidth:300}},W[P.accountId].trustee.fullName)))),C.createElement("div",{className:"mTop10 flexRow Font13 alignItemsCenter"},C.createElement("div",{className:"Gray_9e"},_l("\u59D4\u6258\u622A\u6B62")),C.createElement("div",{className:"mLeft15 Gray"},W[P.accountId].endDate)))}},C.createElement("i",{className:"icon-info Font16"})))}),(i==="addApprove"||!v.length||i!=="addApprove"&&!!v.length)&&C.createElement("i",{className:j()("Font26 Gray_9e ThemeHoverColor3 pointer mTop10 InlineBlock relative",i!=="addApprove"&&v.length?"icon-task-folder-charge":"icon-task-add-member-circle"),onClick:this.selectUser})))}},{key:"getCode",value:function(Q){var i=this,m=this.props,v=m.action,W=m.workId,P=(this.props.data||{}).flowNode||{},u=P.auth,l=void 0;v==="pass"&&(l=S().includes(u.passTypeList,2)?1:2),v==="overrule"&&(l=S().includes(u.overruleTypeList,2)?1:2),b.getQrCode({signMode:Q||l,workId:W}).then(function(T){i.setState({link:T.qrCode,code:T.state},function(){i.getCodeResult()})})}},{key:"getCodeResult",value:function(){var Q=this,i=this.props,m=i.action,v=i.onOk,W=i.selectedUser,P=i.selectedUsers,u=this.state,l=u.content,T=u.backNodeId,G=u.code,D=P.length?P.map(function(M){return M.accountId}).join(","):W.accountId;b.getQrCodeResult({state:G}).then(function(M){M.code==="0"?Q.getCodeResult():M.code==="1"?v({action:m,content:l,userId:D,backNodeId:T,signature:{key:M.picUrl}}):Q.setState({resultCode:M.code})})}},{key:"checkEntrust",value:function(Q){var i=this,m=this.props.projectId;k.Z.getListByPrincipals({companyId:m,principals:Q.map(function(v){return v.accountId})}).then(function(v){i.setState({entrustList:v})})}},{key:"renderTemplateList",value:function(){var Q=this,i=this.props,m=i.action,v=i.data,W=this.state.content,P=v.opinionTemplate,u=(S().includes(["pass","after"],m)?P.opinions[4]:P.opinions[5])||[];return u.length?C.createElement(C.Fragment,null,C.createElement("div",{className:"Gray_75 mTop15 mBottom6"},_l("\u9009\u62E9\u9884\u8BBE")),C.createElement(F,null,u.map(function(l,T){return C.createElement("span",{className:j()("ellipsis",{active:W.trim()===l.value.trim()}),key:T,onClick:function(){return Q.setState({content:l.value})}},l.value)}))):null}},{key:"render",value:function(){var Q=this,i=this.props,m=i.action,v=i.onCancel,W=i.projectId,P=this.props.data,u=P.callBackNodeType,l=P.opinionTemplate,T=P.app,G=(this.props.data||{}).flowNode||{},D=G.isCallBack,M=G.auth,se=G.encrypt,ae=this.state,ne=ae.content,de=ae.backNodeId,Ce=ae.showCode,he=ae.link,fe=ae.resultCode,Ee=ae.showPassword,Y=ae.removeNoneVerification,oe=ae.files,ve=((this.props.data||{}).backFlowNodes||[]).map(function(be){return{text:be.name,value:be.id}}),ue=m==="pass"&&S().includes(M.passTypeList,100),pe=S().includes(["pass","after"],m)&&S().includes(M.passTypeList,1),Se=S().includes(["overrule","return"],m)&&S().includes(M.overruleTypeList,100),ye=S().includes(["overrule","return"],m)&&S().includes(M.overruleTypeList,1),J=m==="pass"&&S().includes(M.passTypeList,101)||m==="overrule"&&S().includes(M.overruleTypeList,101),me=l.inputType===2&&S().includes(["pass","overrule","return","after"],m);return Ce?C.createElement(y.Z,{visible:!0,width:560,title:_l("\u626B\u7801\u5237\u8138"),footer:null,handleClose:function(){return Q.setState({showCode:!1})}},C.createElement("div",{className:"Gray_9e"},_l("\u8BF7\u7528\u5FAE\u4FE1\u3001\u5FAE\u8B66\u6216\u8B66\u878DApp\u626B\u4E0B\u65B9\u4E8C\u7EF4\u7801\u8FDB\u884C\u5237\u8138\u9A8C\u8BC1\uFF0C\u9A8C\u8BC1\u901A\u8FC7\u540E\u624D\u80FD\u63D0\u4EA4\u6D41\u7A0B")),C.createElement("div",{className:"mTop20 TxtCenter ",style:{minHeight:200}},he&&C.createElement("div",{className:"relative InlineBlock"},C.createElement("img",{src:he}),fe&&C.createElement("div",{className:"flexColumn White",onClick:function(){Q.setState({resultCode:""}),Q.getCode(fe==="-3"?2:"")},style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(51, 51, 51, 0.80)",alignItems:"center",justifyContent:"center"}},C.createElement("div",{className:"flexRow mBottom15 pointer",style:{width:30,height:30,borderRadius:30,background:"#d85959",alignItems:"center",justifyContent:"center"}},C.createElement("i",{className:"icon-priority_high Font16"})),fe==="-3"&&C.createElement(C.Fragment,null,C.createElement("div",null,_l("\u8BA4\u8BC1\u5931\u8D25")),C.createElement("div",null,_l("\u4EBA\u8138\u4FE1\u606F\u4E0D\u5339\u914D"))),fe==="-2"&&C.createElement(C.Fragment,null,C.createElement("div",null,_l("\u8BA4\u8BC1\u5931\u8D25")),C.createElement("div",null,_l("\u70B9\u51FB\u5237\u65B0\u91CD\u8BD5"))),fe==="-1"&&C.createElement(C.Fragment,null,C.createElement("div",null,_l("\u4E8C\u7EF4\u7801\u5DF2\u8FC7\u671F")),C.createElement("div",null,_l("\u70B9\u51FB\u5237\u65B0\u91CD\u8BD5"))))))):C.createElement(y.Z,{className:j()("approveDialog",{approveDialogBtn:m==="overrule"}),visible:!0,overlayClosable:!1,width:640,title:this.renderHeader(),handleClose:v,onOk:this.onOk,onCancel:v},S().includes(["pass","overrule","return"],m)&&se&&Ee&&C.createElement("div",{className:"mBottom15"},C.createElement(R.Z,{showSubTitle:!1,isRequired:!0,allowNoVerify:!Y,onChange:function(xe){var Ae=xe.password,Ne=xe.isNoneVerification;Ae!==void 0&&(Q.password=Ae),Ne!==void 0&&(Q.isNoneVerification=Ne)}})),S().includes(["after","before","transfer","transferApprove","addApprove"],m)&&this.renderMember(),!J&&C.createElement(C.Fragment,null,C.createElement("div",{className:"relative bold"},(ue||Se)&&C.createElement("div",{className:"Absolute",style:{margin:"1px 0px 0px -8px",color:"#f44336"}},"*"),_l("\u5BA1\u6279\u610F\u89C1")),C.createElement("div",{className:"mTop10 relative"},C.createElement("div",{className:"flexRow"},C.createElement(te.Z,{className:"Font13 TxtTop flex",disabled:me,minHeight:0,style:{paddingTop:7,paddingBottom:7},maxHeight:240,value:ne,onChange:function(xe){return Q.setState({content:xe})},placeholder:me?_l("\u9009\u62E9\u9884\u8BBE\u7684\u5BA1\u6279\u610F\u89C1"):(n.tx[m]||{}).placeholder}),S().includes(["pass","overrule","return","after","before"],m)&&C.createElement(h,{className:"tip-top","data-tip":_l("\u6DFB\u52A0\u9644\u4EF6"),onClick:function(){$(".approveDialog .customFieldsContainer .triggerTraget").click()}},C.createElement("i",{className:"Font16 Gray_75 icon-attachment"}))),S().includes(["pass","overrule","return","after"],m)&&this.renderTemplateList()),S().includes(["pass","overrule","return","after","before"],m)&&C.createElement("div",{className:"mTop10"},C.createElement("div",{className:"customFieldsContainer InlineBlock mLeft0 pointer"},C.createElement(ee.Z,{projectId:W,appId:T.id,value:oe,hint:_l("\u9644\u4EF6"),canAddKnowledge:!1,advancedSetting:{},onChange:function(xe){return Q.setState({files:xe})}})))),D&&m==="return"&&!!ve.length&&C.createElement(C.Fragment,null,S().includes([0,3],u)?C.createElement(C.Fragment,null,C.createElement("div",{className:"mTop20 bold"},_l("\u9000\u56DE\u5230")),C.createElement(L.Z,{className:"mTop10 approveDialogCallBack",data:ve,value:de,border:!0,onChange:function(xe){return Q.setState({backNodeId:xe})}})):C.createElement("div",{className:"mTop20"},u===1?_l("\u9000\u56DE\u5230\uFF1A%0",ve[0].text):_l("\u9000\u56DE\u4E0A\u4E00\u8282\u70B9\uFF1A%0",ve[0].text))),(pe||ye)&&C.createElement(C.Fragment,null,C.createElement("div",{className:"mTop20 mBottom10 relative bold"},C.createElement("div",{className:"Absolute",style:{margin:"1px 0px 0px -8px",color:"#f44336"}},"*"),_l("\u7B7E\u540D")),C.createElement(p.Z,{ref:function(xe){Q.signature=xe}})))}}]),B}(C.Component),re.propTypes={projectId:O.string,data:O.object,action:(0,O.oneOf)(["after","before","pass","overrule","transfer","transferApprove","addApprove","return"]),onOk:O.func.isRequired,onCancel:O.func.isRequired},re.defaultProps={projectId:"",data:{},action:"before",onOk:function(){},onCancel:function(){}},le=function(){var B=this;this.isComplete=!0,this.password="",this.isNoneVerification=!1,this.renderHeader=function(){var x=B.props.action;return C.createElement("header",{className:"flexRow"},C.createElement("div",{className:"headerText Font17"},(n.tx[x]||{}).headerText))},this.onOk=function(){var x=B.props,Q=x.projectId,i=x.action,m=x.onOk,v=x.onCancel,W=B.state,P=W.content,u=W.backNodeId,l=W.selectedUsers,T=W.entrustList,G=W.showPassword,D=W.files,M=(B.props.data||{}).flowNode||{},se=M.auth,ae=M.encrypt,ne=i==="pass"&&S().includes(se.passTypeList,100),de=S().includes(["pass","after"],i)&&S().includes(se.passTypeList,1),Ce=S().includes(["overrule","return"],i)&&S().includes(se.overruleTypeList,100),he=S().includes(["overrule","return"],i)&&S().includes(se.overruleTypeList,1),fe=D?g()(JSON.parse(D).attachments):"",Ee=function(){var oe=l.map(function(ve){return T[ve.accountId]?T[ve.accountId].trustee.accountId:ve.accountId}).join(",");B.isComplete&&(B.isComplete=!1,B.signature?B.signature.saveSignature(function(ve){m({action:i,content:P,userId:oe,backNodeId:u,signature:ve,files:fe}),v()}):(m({action:i,content:P,userId:oe,backNodeId:u,signature:void 0,files:fe}),v()))};if(S().includes(["after","before","transfer","transferApprove","addApprove"],i)&&!l.length){alert(_l("\u5FC5\u987B\u9009\u62E9\u4E00\u4E2A\u4EBA\u5458"),2);return}if((ne||Ce)&&!P.trim()||(de||he)&&B.signature.checkContentIsEmpty()){alert(_l("\u8BF7\u586B\u5199\u5B8C\u6574\u5185\u5BB9"),2);return}if($(".approveDialog .fileUpdateLoading").length){alert(_l("\u9644\u4EF6\u6B63\u5728\u4E0A\u4F20\uFF0C\u8BF7\u7A0D\u540E"),3);return}if(S().includes(["pass","overrule","return"],i)&&ae){if(G&&(!B.password||!B.password.trim())){alert(_l("\u8BF7\u8F93\u5165\u5BC6\u7801"),3);return}(0,I.Gv)({projectId:Q,password:B.password,closeImageValidation:!0,isNoneVerification:B.isNoneVerification,checkNeedAuth:!G,success:Ee,fail:function(){B.setState({showPassword:!0})}})}else i==="pass"&&S().includes(se.passTypeList,3)||i==="overrule"&&S().includes(se.overruleTypeList,3)?(B.getCode(),B.setState({showCode:!0})):S().includes(["pass","overrule","return"],i)&&ae?(0,I.Gv)({password:B.password,closeImageValidation:!0,isNoneVerification:B.isNoneVerification,checkNeedAuth:!G,success:Ee,fail:function(){B.setState({showPassword:!0})}}):Ee()},this.selectUser=function(x){var Q=B.props,i=Q.projectId,m=Q.action,v=Q.data,W=v.operationUserRange,P={transferApprove:6,addApprove:16,after:7,before:7,transfer:10},u=S().isArray((W||{})[P[m]]),l=((W||{})[P[m]]||[]).filter(function(G){return G!==md.global.Account.accountId}),T=m!=="addApprove";(0,c.ZP)(x.target,{offset:{top:10,left:0},selectRangeOptions:u?{appointedAccountIds:l}:"",projectId:i,unique:T,filterAll:!0,filterFriend:!0,filterOthers:!0,filterOtherProject:!0,filterAccountIds:[md.global.Account.accountId],isDynamic:!T,onSelect:function(D){var M=T?D:S().uniqBy(B.state.selectedUsers.concat(D),function(se){return se.accountId});B.setState({selectedUsers:M}),B.checkEntrust(M)}})}},ie)},59687:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>P});var ce=t(88902),g=t.n(ce),p=t(15759),L=t(37888),te=t(52945),R=t.n(te),y=t(70264),a=t(33867),r=t(85105),o=t.n(r),d=t(99663),Z=t(22600),H=t(49135),U=t(93196),f=t(67294),V=t(45697),C=t.n(V),O=t(93967),n=t.n(O),s=t(30381),j=t.n(s),A=t(97762),S=t(96486),I=t.n(S),c=t(15577),q=t(69288),b=t(48659),k=t(1825),ee=t(46891),re=t(45231),ie=t(15797),le,E,w,K=(0,ee.Z)(le=(w=E=function(u){(0,U.default)(l,u);function l(T){(0,d.default)(this,l);var G=(0,H.default)(this,(l.__proto__||o()(l)).call(this,T));return G.logRef=f.createRef(),G.getControls=function(){var D=G.props.worksheetId;D&&re.Z.getWorksheetInfo({getRules:!0,getTemplate:!0,worksheetId:D}).then(function(M){G.setState({controls:M.template.controls,appId:M.appId})})},G.handleScroll=I().throttle(function(D){D.target.scrollTop+D.target.clientHeight>=D.target.scrollHeight&&G.logRef.current.handleScroll()}),G.state={controls:[],appId:void 0,loading:!0},G}return(0,Z.default)(l,[{key:"componentDidMount",value:function(){this.getControls()}},{key:"render",value:function(){var G=this.props,D=G.visible,M=G.onClose,se=G.worksheetId,ae=G.filterUniqueIds,ne=G.rowId,de=this.state,Ce=de.controls,he=de.appId;if(!se||!ae||!he)return null;var fe=f.createElement(ie.Z,{ref:this.logRef,appId:he,rowId:ne,filterUniqueIds:ae,worksheetId:se,showFilter:!1,controls:Ce});return(0,c.Q9)()?f.createElement(k.Z,{placement:"right",width:"85%",className:"sheetWorkflowDrawer",closable:!1,mask:!0,style:{position:"absolute"},onClose:M,visible:D},f.createElement("div",{className:"h100 flexColumn"},f.createElement("div",{className:"flexRow alignItemsCenter mTop20 mRight20 mBottom5 pLeft10"},f.createElement(a.Z,{icon:"arrow-left-border",className:"Font20 Gray_bd mRight5",onClick:M}),f.createElement("div",{class:"Font17 bold"},_l("\u66F4\u65B0\u8BB0\u5F55"))),fe)):f.createElement(q.Z,{className:"worksheetRecordDialog",bodyClass:"worksheetRecordDialogBody",title:_l("\u66F4\u65B0\u8BB0\u5F55"),width:560,showFooter:!1,onCancel:M,visible:D,overlayClosable:!1,onScroll:this.handleScroll},fe)}}]),l}(f.Component),E.propTypes={visible:C().bool,onClose:C().func,worksheetId:C().string,rowId:C().string,filterUniqueIds:C().arrayOf(C().string)},w))||le,N=t(95283),F,h,z=22,X=5,B={3:_l("\u7B49\u6211\u586B\u5199..."),4:_l("\u7B49\u6211\u5BA1\u6279..."),5:_l("\u7B49\u6211\u67E5\u770B...")},x={1:_l("\u9700\u5168\u5458\u901A\u8FC7"),2:_l("\u53EA\u9700\u4E00\u4EBA\u901A\u8FC7\uFF0C\u9700\u5168\u5458\u5426\u51B3"),4:_l("\u53CA\u4EE5\u4E0A\u7684\u6210\u5458\u901A\u8FC7\u540E\u5373\u89C6\u4E3A\u8282\u70B9\u901A\u8FC7")},Q={3:_l("\u8BBE\u7F6E\u591A\u4E2A\u586B\u5199\u4EBA,\u7531\u4EFB\u610F\u4E00\u4EBA\u8FDB\u884C\u586B\u5199"),4:_l("\u8BBE\u7F6E\u591A\u4E2A\u5BA1\u6279\u4EBA,\u7531\u4EFB\u610F\u4E00\u4EBA\u8FDB\u884C\u5BA1\u6279")},i={0:_l("\u53D1\u8D77"),1:_l("\u586B\u5199"),2:_l("\u8F6C\u4EA4"),3:_l("\u67E5\u770B"),4:_l("\u901A\u8FC7"),5:_l("\u5426\u51B3"),8:_l("\u8F6C\u5BA1"),9:_l("\u6DFB\u52A0\u5BA1\u6279\u4EBA"),10:_l("\u88AB\u79FB\u9664"),16:_l("\u5BA1\u6279\u524D\u52A0\u7B7E"),17:_l("\u540C\u610F\u5E76\u52A0\u7B7E"),18:_l("\u4FEE\u6539\u7533\u8BF7\u5185\u5BB9"),22:_l("\u65E0\u9700\u5BA1\u6279")},m={3:_l("\u65E0\u9700\u586B\u5199"),4:_l("\u65E0\u9700\u5BA1\u6279")},v={1:_l("\u65B0\u589E\u8BB0\u5F55"),2:_l("\u65B0\u589E\u6216\u66F4\u65B0\u8BB0\u5F55")},W=function(l){return j()((0,c.LX)(l)).format("YYYY.MM.DD HH:mm")},P=(h=F=function(u){(0,U.default)(l,u);function l(){var T,G,D,M;(0,d.default)(this,l);for(var se=arguments.length,ae=Array(se),ne=0;ne<se;ne++)ae[ne]=arguments[ne];return M=(G=(D=(0,H.default)(this,(T=l.__proto__||o()(l)).call.apply(T,[this].concat(ae))),D),D.state={moreOperationVisible:!1,showLogDialog:!1,showMore:!1},D.renderDetail=function(de){var Ce=D.props,he=Ce.data,fe=Ce.currentWork,Ee=he||{},Y=Ee.workId,oe=Ee.flowNode,ve=oe===void 0?{}:oe,ue=de.type,pe=de.workItemAccount,Se=de.operationTime,ye=de.workItemLog,J=de.viewTime,me=de.logIds,be=de.principal,xe=md.global.Account.accountId===pe.accountId,Ae=Y===(fe||{}).workId;if(!Se&&!me)return Ae&&xe?f.createElement("div",{className:"waitInfo current Font14 bold"},B[ue]):ye&&ye.action===z?f.createElement(f.Fragment,null,f.createElement("div",{className:"userName"},pe.fullName+(be?_l("(%0\u59D4\u6258)",be.fullName):"")),f.createElement("div",{className:"info"},m[ue])):f.createElement(f.Fragment,null,f.createElement("div",{className:"userName"},pe.fullName+(be?_l("(%0\u59D4\u6258)",be.fullName):"")),f.createElement("div",{className:"info"},J?_l("\u5DF2\u67E5\u770B"):_l("\u672A\u67E5\u770B")));if(ue===0){var Ne=ve.triggerId,Me=ve.triggerField;return f.createElement(f.Fragment,null,f.createElement("div",{className:"userName"},pe.accountId==="user-undefined"?_l("\u53D1\u8D77\u4EBA\u4E3A\u7A7A"):pe.fullName),v[Ne]&&f.createElement("div",{className:"info"},v[Ne],Me&&f.createElement("span",{className:"mLeft4"}," (",Me,")")))}if(ye){var Fe=ye.action,Be=ye.actionTargetName;if(ue===3)return f.createElement(f.Fragment,null,f.createElement("div",{className:"flexRow alignItemsCenter"},f.createElement("div",{className:"userName"},pe.fullName+(be?_l("(%0\u59D4\u6258)",be.fullName):"")),f.createElement("div",{className:n()("action ellipsis","action-"+Fe)},Fe===z?m[ue]:!Se&&me?_l("\u6682\u5B58"):i[Fe]+(I().includes([2],Fe)?Be:"")),D.renderLogsContent(de),f.createElement("div",{className:"flex"})),D.renderAdditionalContent(de));if(ue===4)return f.createElement(f.Fragment,null,f.createElement("div",{className:"flexRow alignItemsCenter"},f.createElement("div",{className:"userName"},pe.fullName+(be?_l("(%0\u59D4\u6258)",be.fullName):"")),f.createElement("div",{className:n()("action ellipsis","action-"+Fe)},Fe===z?m[ue]:Fe===X&&Be?f.createElement("span",{style:{color:"#ff982d"}},_l("\u9000\u56DE\u5230%0",Be)):!Se&&me?_l("\u6682\u5B58"):i[Fe]+(I().includes([8,9,16,17],Fe)?Be:"")),D.renderLogsContent(de),f.createElement("div",{className:"flex"})),D.renderAdditionalContent(de));if(ue===5)return f.createElement(f.Fragment,null,f.createElement("div",{className:"userName"},pe.fullName),f.createElement("div",{className:"timeAction flexRow Gray_9e"},W(Se),f.createElement("span",{className:"mLeft4"},_l("\u67E5\u770B"))))}},G),(0,H.default)(D,M)}return(0,Z.default)(l,[{key:"shouldComponentUpdate",value:function(G,D){return D.moreOperationVisible!==this.state.moreOperationVisible||D.showLogDialog!==this.state.showLogDialog||D.showMore!==this.state.showMore||(G.currentWork||{}).workId!==(this.props.currentWork||{}).workId}},{key:"renderLogsContent",value:function(G){var D=this,M=this.props,se=M.worksheetId,ae=M.rowId,ne=this.state.showLogDialog,de=G.logIds;return!de||!de.length?null:f.createElement(f.Fragment,null,f.createElement("span",{"data-tip":_l("\u67E5\u770B\u66F4\u65B0\u8BB0\u5F55"),className:"pointer mLeft5 Gray_9e ThemeHoverColor3 flexRow",onClick:function(){return D.setState({showLogDialog:!0})}},f.createElement(a.Z,{type:"visibility",className:"Font16"})),ne&&f.createElement(K,{worksheetId:se,rowId:ae,filterUniqueIds:de,visible:!0,onClose:function(){return D.setState({showLogDialog:!1})}}))}},{key:"renderAdditionalContent",value:function(G){var D=G.operationTime,M=G.opinion,se=G.workItemLog,ae=G.signature,ne=G.logIds,de=G.updateTime,Ce=G.files,he=se.action,fe=se.fields;return f.createElement(f.Fragment,null,fe&&fe.length?f.createElement("div",{className:"mTop4"},f.createElement("span",{className:"Font14 ThemeColor3"},_l("\u586B\u5199%0\u4E2A\u5B57\u6BB5",fe.length)),!!fe.length&&!(0,c.Q9)()&&f.createElement(y.Z,{tooltipClass:"workflowStepFieldsWrap ",popupPlacement:"bottom",text:f.createElement("ul",null,fe.map(function(Ee,Y){var oe=Ee.name,ve=Ee.toValue;return f.createElement("li",{key:Y,className:"writeFields"},f.createElement("span",{className:"field"},oe+": "),f.createElement("span",{className:"val"},ve))}))},f.createElement(a.Z,{icon:"workflow_info",className:"Font16 Gray_9e mLeft4"}))):"",M&&f.createElement("div",{className:"info Gray_9e"},M),ae&&f.createElement("div",{className:"infoSignature",style:{backgroundImage:"url("+ae.server+")"}}),Ce&&this.renderFiles(Ce),he!==z&&f.createElement("div",{className:"timeAction flexRow Gray_9e"},D&&W(D),!D&&!!ne&&de&&W(de)))}},{key:"renderFiles",value:function(G){var D=this;return f.createElement(f.Fragment,null,f.createElement("div",{className:"mTop4"},G.filter(function(M){return File.isPicture(M.ext)}).map(function(M,se){return f.createElement("div",{className:"fileItemImg InlineBlock pointer",key:se,onClick:function(){return D.previewAttachments(M)}},f.createElement("img",{src:M.previewUrl}))})),f.createElement("div",{className:"mTop4"},G.filter(function(M){return!File.isPicture(M.ext)}).map(function(M,se){return f.createElement("div",{className:"fileItemDoc ThemeHoverColor3 pointer",key:se,onClick:function(){return D.previewAttachments(M)}},f.createElement("span",{className:"fileIcon fileIcon-"+(0,c.Jw)(M.ext.replace(".","")),style:{width:20,height:22}}),f.createElement("div",{className:"flex ellipsis mLeft5"},M.originalFilename),f.createElement("div",null,M.ext))})))}},{key:"previewAttachments",value:function(G){(0,N.Z)({attachments:[R()({},G,{path:G.privateDownloadUrl})],callFrom:"player",hideFunctions:["share","saveToKnowlege"]})}},{key:"generateLink",value:function(G){G=G||"";var D=G.match(/<a.*?<\/a>/g)||[];return D.forEach(function(M,se){G=G.replace(M,"$"+se+"$")}),G=(0,A.renderToString)(f.createElement(L.Z,{properties:{target:"_blank"}},G)),(G.match(/\$[^ \r\n]+?\$/g)||[]).forEach(function(M,se){G=G.replace(M,D[se])}),G}},{key:"renderTimeConsuming",value:function(){var G=this.props.data,D=((G||{}).workItems||[]).filter(function(he){return I().includes([3,4],he.type)&&!I().includes([2,8,9,10,16,17,22],I().get(he,"workItemLog.action"))}),M=[],se=[];if(!D.length)return null;D.forEach(function(he){he.dueTime&&se.push(j()(he.operationTime)-j()(he.dueTime)),M.push((he.operationTime||he.dueTime?j()(he.operationTime):j()())-j()(he.receiveTime))});var ae=I().max(M)||0,ne=I().max(se)||0,de=!1;if(((D[0].opinion||"").indexOf("\u9650\u65F6\u81EA\u52A8\u901A\u8FC7")>-1||(D[0].opinion||"").indexOf("\u9650\u65F6\u81EA\u52A8\u586B\u5199")>-1)&&(ne=1,de=!0),!ne){var Ce=this.covertTime(ae,!0);return Ce?f.createElement("span",{className:"Gray_9e"},_l("\u8017\u65F6\uFF1A%0",Ce)):null}return f.createElement("span",{className:"tip-top-left","data-tip":de?"":ne>0?_l("\u8D85\u65F6 %0 \u5B8C\u6210",this.covertTime(ne)):_l("\u63D0\u524D %0 \u5B8C\u6210",this.covertTime(ne))},f.createElement("span",{className:"stepTimeConsuming flexRow",style:{color:ne>0?"#F44336":"#4CAF50",backgroundColor:ne>0?"#FCE4E3":"#eef7ee"}},f.createElement(a.Z,{icon:ne>0?"overdue_network":"task",className:"Font14 mRight2"}),_l("\u8017\u65F6\uFF1A%0",this.covertTime(ae)||_l("1\u79D2"))))}},{key:"covertTime",value:function(G){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;G<0&&(G=G*-1);var M=Math.floor(G/24/60/60/1e3),se=Math.floor((G-M*24*60*60*1e3)/60/60/1e3),ae=(G-M*24*60*60*1e3-se*60*60*1e3)/60/1e3;return""+(M?_l("%0\u5929",M):"")+(se?_l("%0\u5C0F\u65F6",se):"")+(ae?_l("%0\u5206\u949F",D?Math.ceil(ae):Math.floor(ae)||1):"")}},{key:"renderSurplusTime",value:function(){var G=this.props.data,D=!1,M=(G||{}).workItems||[],se=I().get(M,"[0].dueTime");if(!se||(M=M.filter(function(ne){return ne.executeTime&&ne.workItemAccount.accountId===md.global.Account.accountId&&(D=!0),I().includes([3,4],ne.type)&&!ne.operationTime}),!M.length))return null;var ae=j()()-j()(se)||0;return f.createElement("span",{className:"stepTimeConsuming flexRow",style:{color:ae>0?"#F44336":D?"#FF9800":"#2196f3"}},f.createElement(a.Z,{icon:ae>0?"error1":"hourglass",className:"Font14 mRight2"}),ae>0?_l("\u5DF2\u8D85\u65F6%0",this.covertTime(ae)):_l("\u5269\u4F59%0",this.covertTime(ae)))}},{key:"renderOperatorSubtitle",value:function(G,D,M){var se=I().includes(["1","2","3"],D)&&M&&M[D]&&!!M[D].length;return I().includes(["1","2","3","102","105"],D)?G===0?I().includes(["1","2","3"],D)?_l("\uFF08\u6D4B\u8BD5\uFF09"):_l("\uFF08\u539F\u53D1\u8D77\u4EBA\u4E3A\u7A7A\uFF09"):G===3?se?_l("\uFF08\u539F\u586B\u5199\u4EBA\uFF09"):_l("\uFF08\u6CA1\u6709\u586B\u5199\u4EBA\uFF09"):G===4?se?_l("\uFF08\u539F\u5BA1\u6279\u4EBA\uFF09"):_l("\uFF08\u6CA1\u6709\u5BA1\u6279\u4EBA\uFF09"):se?_l("\uFF08\u539F\u6284\u9001\u4EBA\uFF09"):_l("\uFF08\u6CA1\u6709\u6284\u9001\u4EBA\uFF09"):null}},{key:"render",value:function(){var G=this,D=this.props,M=D.data,se=D.currentWork,ae=D.currentType,ne=D.isLast,de=D.status,Ce=D.currents,he=D.onChangeCurrentWork,fe=D.appId,Ee=D.projectId,Y=this.state.showMore,oe=M||{},ve=oe.workId,ue=oe.flowNode,pe=oe.workItems,Se=oe.countersign,ye=oe.countersignType,J=oe.condition,me=oe.multipleLevelType,be=oe.sort,xe=oe.debugEventDump,Ae=ve===(se||{}).workId&&I().includes([3,4,5],ae)&&!I().includes([2,3,4],de),Ne=ue.type===5;return f.createElement("li",{className:n()("workflowStep flexRow",{allowSelect:I().includes(Ce,ve)&&!Ae}),id:"workflowStep_"+ve},f.createElement("div",{className:"flowPointer flexColumn"},f.createElement("div",{className:n()("pointerItem",{active:Ae})}),!ne&&f.createElement("div",{className:"pointerLine"})),f.createElement("div",{className:"stepItem flex flexColumn"},f.createElement("div",{className:"flexRow alignItemsCenter"},f.createElement("div",{className:"stepItemTime Font15 flex ellipsis Gray_75 bold"},pe[0]&&j()((0,c.LX)(pe[0].receiveTime)).format("MM-DD HH:mm")),this.renderTimeConsuming(),this.renderSurplusTime()),f.createElement("div",{className:n()("stepContentWrap mTop10",{active:Ae}),onClick:function(){I().includes(Ce,ve)&&!Ae&&he(ve)}},f.createElement("div",{className:"stepName bold Font15 flex ellipsis"},ue.name,me!==0&&be&&_l("\uFF08\u7B2C%0\u7EA7\uFF09",be),Ne&&"("+pe.length+")"),Se&&f.createElement("div",{className:"mTop10 mLeft16 Gray_9e mRight16"},ye===3?Q[ue.type||"4"]:(J?J+"%":"")+x[ye]),pe[0].type===5&&f.createElement(f.Fragment,null,f.createElement("div",{className:"pLeft16 pRight16 pTop6 breakAll Gray_75",style:{whiteSpace:"normal"},dangerouslySetInnerHTML:{__html:filterXSS(this.generateLink(pe[0].opinion))}})),(Ne&&pe.length>5&&!Y?pe.slice(0,5):pe).map(function(Me,Fe){var Be=Me.workItemAccount,we=Be.avatar,Ie=Be.accountId;return f.createElement("div",{key:Fe,className:n()("stepContent flexRow",{Border0:Y&&Fe===pe.length-1})},f.createElement("div",{className:"avatarBoxCon"},f.createElement(p.Z,{size:36,user:{userHead:we,accountId:Ie},appId:fe,projectId:Ee})),f.createElement("div",{className:"stepDetail flex flexColumn"},G.renderDetail(Me)))}),xe&&g()(xe).map(function(Me,Fe){return f.createElement("div",{className:"stepContent pBottom16",key:Fe},f.createElement("div",{className:"mTop10 Gray_9e Font12"},I().includes(["1","2","3"],Me)&&_l("\u6D4B\u8BD5"),Me==="101"&&_l("\u81EA\u52A8\u901A\u8FC7"),I().includes(["102","105"],Me)&&_l("\u4EE3\u7406"),Me==="103"&&_l("\u6D41\u7A0B\u4E2D\u6B62"),Me==="104"&&_l("\u81EA\u52A8\u8FDB\u5165\u4E0B\u4E00\u4E2A\u8282\u70B9"),G.renderOperatorSubtitle(ue.type,Me,xe)),xe[Me].map(function(Be){var we=Be.avatar,Ie=Be.accountId,ge=Be.fullName;return f.createElement("div",{className:"flexRow alignItemsCenter mTop8",key:Ie},f.createElement(p.Z,{size:24,user:{userHead:we,accountId:Ie},projectId:Ee}),f.createElement("span",{className:"flex ellipsis mLeft12"},ge))}))}),Ne&&pe.length>5&&f.createElement("div",{className:"TxtCenter pointer ThemeColor3 ThemeHoverColor2 mTop10 mBottom10",onClick:function(){return G.setState({showMore:!Y})}},Y?_l("\u6536\u8D77"):_l("\u5C55\u5F00"),f.createElement(a.Z,{type:Y?"arrow-up-border":"arrow-down-border",className:"mLeft2 Font14"})))))}}]),l}(f.Component),F.propTypes={data:V.object,currentType:V.number,currentWork:V.object,worksheetId:V.string,rowId:V.string,isLast:V.bool,status:V.number,appId:V.string,projectId:V.string,currents:V.array,onChangeCurrentWork:V.func},F.defaultProps={data:{},currentType:0,currentWork:{},worksheetId:"",rowId:"",isLast:!1,status:0,currents:[],appId:"",projectId:"",onChangeCurrentWork:function(){}},h)},65369:(lt,Te,t)=>{"use strict";t.d(Te,{RC:()=>L,SJ:()=>y,aI:()=>ce,g5:()=>R,iR:()=>p,lZ:()=>g,tx:()=>te});var ce={0:{id:"default",icon:{1:"table",5:"hr_surplus",6:"hr_time",7:"workflow_webhook"}},3:{id:"edit",icon:"edit"},4:{id:"approve",icon:"workflow_ea"},5:{id:"notice",icon:"workflow_notice"}},g={3:{id:"revoke",text:_l("\u64A4\u56DE"),icon:"repeal-o",sort:3},4:{id:"pass",text:_l("\u901A\u8FC7"),icon:"done_2",sort:1},5:{id:"overrule",text:_l("\u5426\u51B3"),icon:"clear",sort:2},6:{id:"transferApprove",text:_l("\u8F6C\u5BA1"),icon:"sp_post_exchange_white",sort:5},7:{id:"sign",text:_l("\u52A0\u7B7E"),icon:"person_add",sort:6},9:{id:"submit",text:_l("\u63D0\u4EA4"),icon:"done",sort:7},10:{id:"transfer",text:_l("\u8F6C\u4EA4"),icon:"sp_post_exchange_white",sort:8},13:{id:"stash",text:_l("\u6682\u5B58"),icon:"save1",sort:0},17:{id:"return",text:_l("\u9000\u56DE"),icon:"repeal-o",sort:4},18:{id:"urge",text:_l("\u50AC\u529E"),icon:"start_time",sort:9}},p={12:{id:"print",text:_l("\u6253\u5370"),icon:"print"},16:{id:"addApprove",text:_l("\u6DFB\u52A0\u5BA1\u6279\u4EBA"),icon:"group_add1"}},L={6:{id:"transferApprove",text:_l("\u8F6C\u5BA1"),icon:"swap_horiz"},7:{id:"sign",text:_l("\u52A0\u7B7E"),icon:"countersign"},10:{id:"transfer",text:_l("\u8F6C\u4EA4"),icon:"sp_post_exchange_white"},16:{id:"addApprove",text:_l("\u6DFB\u52A0\u5BA1\u6279\u4EBA"),icon:"group_add1"},17:{id:"return",text:_l("\u9000\u56DE"),icon:"repeal-o"}},te={after:{headerText:_l("\u901A\u8FC7\u5E76\u52A0\u7B7E"),placeholder:_l("\u586B\u5199\u52A0\u7B7E\u5907\u6CE8")},before:{headerText:_l("\u5BA1\u6279\u524D\u52A0\u7B7E"),placeholder:_l("\u586B\u5199\u52A0\u7B7E\u5907\u6CE8")},transfer:{headerText:_l("\u8F6C\u4EA4"),placeholder:_l("\u586B\u5199\u8F6C\u4EA4\u5907\u6CE8")},transferApprove:{headerText:_l("\u8F6C\u5BA1"),placeholder:_l("\u586B\u5199\u8F6C\u5BA1\u5907\u6CE8")},addApprove:{headerText:_l("\u6DFB\u52A0\u5BA1\u6279\u4EBA"),placeholder:_l("\u586B\u5199\u52A0\u4EBA\u5907\u6CE8")},pass:{headerText:_l("\u901A\u8FC7\u5BA1\u6279"),placeholder:_l("\u8BF7\u8F93\u5165")},overrule:{headerText:_l("\u5426\u51B3\u5BA1\u6279"),placeholder:_l("\u8BF7\u8F93\u5165")},return:{headerText:_l("\u9000\u56DE\u5BA1\u6279"),placeholder:_l("\u8BF7\u8F93\u5165")}},R={20001:_l("\u52A8\u4F5C\u8282\u70B9\u6267\u884C\u5931\u8D25"),30001:_l("\u5F53\u524D\u6D41\u7A0B\u5DF2\u5220\u9664"),30002:_l("\u5F53\u524D\u6D41\u7A0B\u5DF2\u5173\u95ED"),30003:_l("\u5F53\u524D\u5185\u5BB9\u5DF2\u5931\u6548"),30004:_l("\u5F53\u524D\u8282\u70B9\u5DF2\u5220\u9664"),30006:_l("\u5F53\u524D\u7528\u6237\u65E0\u6743\u9650\u67E5\u770B"),40007:_l("\u88AB\u53D1\u8D77\u4EBA\u64A4\u56DE")},y={before:"signTask",after:"signTask",transferApprove:"forward",transfer:"transfer",revoke:"revoke",pass:"pass",overrule:"overrule",return:"return"}},55857:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>G});var ce=t(88239),g=t(52945),p=t.n(g),L=t(42723),te=t(85105),R=t.n(te),y=t(99663),a=t(22600),r=t(49135),o=t(93196),d=t(67294),Z=t(45697),H=t(40240),U=t(25273),f=t(82011),V=t(58064),C=t(65369),O=t(62521),n=t(16469),s=t(42185),j=t(6100),A=t(33867),S=t(46593),I=t.n(S),c=t(72557),q=t(69288),b=t(63239),k=t.n(b),ee=t(93967),re=t.n(ee),ie=t(90459),le=t(1097);const E=function(D){var M=D.onOk,se=D.onCancel,ae=D.onSubmit;return d.createElement(q.Z,{className:"addApproveWayDialog",visible:!0,title:_l("\u52A0\u7B7E\u65B9\u5F0F"),footer:null,onCancel:se},d.createElement("div",{className:"actionWrap"},d.createElement("div",{className:"action flexRow",onClick:function(){ae({noSave:!0,callback:function(Ce){Ce?se():M("after")}})}},d.createElement("div",{className:"text flex"},_l("\u901A\u8FC7\u7533\u8BF7\u540E\u589E\u52A0\u4E00\u4F4D\u5BA1\u6279\u4EBA")),d.createElement(A.Z,{icon:"arrow-right-border"})),d.createElement("div",{className:"action flexRow",onClick:function(){return M("before")}},d.createElement("div",{className:"text flex"},_l("\u5728\u6211\u5BA1\u6279\u524D\u589E\u52A0\u4E00\u4F4D\u5BA1\u6279\u4EBA")),d.createElement(A.Z,{icon:"arrow-right-border"}))))};var w=t(78265),K=t(75599),N=t(31742),F=t(76345),h=t(96486),z=t.n(h),X=t(30381),B=t.n(X),x=t(15577),Q=t(77863),i,m,v=(m=i=function(D){(0,o.default)(M,D);function M(){var se,ae,ne,de;(0,y.default)(this,M);for(var Ce=arguments.length,he=Array(Ce),fe=0;fe<Ce;fe++)he[fe]=arguments[fe];return de=(ae=(ne=(0,r.default)(this,(se=M.__proto__||R()(M)).call.apply(se,[this].concat(he))),ne),ne.state={action:"",moreOperationVisible:!1,addApproveWayVisible:!1,otherActionVisible:!1,isRequest:!1,isUrged:!1},ne.password="",ne.handleMoreOperation=function(Ee){var Y=ne.props,oe=Y.projectId,ve=Y.id,ue=Y.workId,pe=Y.data,Se=Y.worksheetId,ye=pe.app;if(Ee==="print"){safeLocalStorageSetItem("plus_projectId",oe);var J="",me=!0,be={printId:J,isDefault:me,worksheetId:Se,projectId:oe,id:ve,rowId:"",getType:1,viewId:"",appId:ye.id,workId:ue},xe=Math.random().toString(36).substring(2);K.Z.add({key:""+xe,value:k()(be)}),window.open((window.subPath||"")+"/printForm/"+ye.id+"/flow/new/print/"+xe)}Ee==="addApprove"&&ne.setState({action:Ee,otherActionVisible:!0})},ne.handleClick=function(Ee){var Y=ne.props,oe=Y.onSubmit,ve=Y.data,ue=(ve||{}).flowNode||{},pe=ue.ignoreRequired,Se=ue.encrypt,ye=ue.auth;if(Ee==="sign"&&(ve.signOperationType===1?Ee="before":ve.signOperationType===2&&(Ee="after")),Ee==="submit"){Se?ne.safeAuthentication(function(){return ne.request("submit")}):ne.request("submit");return}if(Ee==="revoke"){ne.request("revoke",{},!0);return}if(Ee==="urge"){ne.request("operation",{operationType:18},!0);return}if(Ee==="sign"){ne.setState({action:Ee,addApproveWayVisible:!0});return}if(Ee==="stash"){ne.request("operation",{operationType:13});return}var J=function(){if(z().includes(["pass","overrule","return"],Ee)){var be=ye[Ee==="pass"?"passTypeList":"overruleTypeList"];be.length===1&&be[0]===101?Se?ne.safeAuthentication(function(){return ne.handleAction({action:Ee})}):ne.handleAction({action:Ee}):ne.setState({action:Ee,otherActionVisible:!0})}else ne.setState({action:Ee,otherActionVisible:!0})};pe||z().includes(["transferApprove","transfer"],Ee)?J():oe({noSave:!0,callback:function(be){be||J()}})},ne.handleAction=function(Ee){var Y=Ee.action,oe=Ee.content,ve=oe===void 0?"":oe,ue=Ee.userId,pe=Ee.backNodeId,Se=Ee.signature,ye=Ee.files,J=(ne.props.data||{}).flowNode||{},me=J.ignoreRequired;ve=ve.trim(),z().includes(["before","after"],Y)&&ne.request(C.SJ[Y],{before:Y==="before",opinion:ve,forwardAccountId:ue,signature:Se,files:ye},Y==="before"),z().includes(["transferApprove","transfer"],Y)&&ne.request(C.SJ[Y],{opinion:ve,forwardAccountId:ue},!0),z().includes(["pass","overrule","return"],Y)&&(Y==="return"&&!pe&&(pe=z().get(ne.props.data,"backFlowNodes[0].id")||""),ne.request(C.SJ[Y],{opinion:ve,backNodeId:pe,signature:Se,files:ye},z().includes(["overrule","return"],Y)&&me)),z().includes(["addApprove"],Y)&&ne.request("operation",{opinion:ve,forwardAccountId:ue,operationType:16},!0)},ne.request=function(Ee){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,ve=ne.props,ue=ve.id,pe=ve.workId,Se=ve.onSave,ye=ve.onClose,J=ve.onSubmit,me=ne.state.isRequest,be=Y.operationType===13,xe=function(Ne){var Me=Ne.error,Fe=Ne.logId;Me&&Me!=="empty"?ne.setState({isRequest:!1}):w.Z[Ee==="return"?"overrule":Ee]((0,ce.default)({id:ue,workId:Y.operationType===18?"":pe,logId:Fe},Y)).then(function(){z().includes([13,18],Y.operationType)?be?(alert(_l("\u4FDD\u5B58\u6210\u529F")),ne.setState({isRequest:!1})):ne.setState({isRequest:!1,isUrged:!0}):(Se(),ye())})};me||(ne.setState({isRequest:!0,action:Ee}),oe?xe({}):J({callback:xe,ignoreError:be,ignoreAlert:be,silent:be}))},ae),(0,r.default)(ne,de)}return(0,a.default)(M,[{key:"safeAuthentication",value:function(){var ae=this,ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},de=this.props.projectId;(0,x.Gv)({projectId:de,checkNeedAuth:!0,success:ne,fail:function(he){ae.verifyPasswordDialog(he==="showPassword",ne)}})}},{key:"verifyPasswordDialog",value:function(ae){var ne=this,de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},Ce=this.props.projectId;q.Z.confirm({title:_l("\u5B89\u5168\u8BA4\u8BC1"),description:d.createElement(c.Z,{showSubTitle:!1,isRequired:!0,autoFocus:!0,allowNoVerify:!ae,onChange:function(fe){var Ee=fe.password,Y=fe.isNoneVerification;Ee!==void 0&&(ne.password=Ee),Y!==void 0&&(ne.isNoneVerification=Y)}}),onOk:function(){return new(I())(function(fe,Ee){if(!ne.password||!ne.password.trim()){alert(_l("\u8BF7\u8F93\u5165\u5BC6\u7801"),3);return}(0,x.Gv)({projectId:Ce,password:ne.password,closeImageValidation:!0,isNoneVerification:ne.isNoneVerification,success:function(){de(),fe()},fail:function(){Ee(!0)}})})}})}},{key:"render",value:function(){var ae=this,ne=this.props,de=ne.projectId,Ce=ne.currentWorkItem,he=ne.data,fe=ne.errorMsg,Ee=ne.id,Y=ne.workId,oe=ne.onSubmit,ve=ne.sheetSwitchPermit,ue=ve===void 0?[]:ve,pe=ne.viewId,Se=ne.works,ye=he.flowNode,J=he.operationTypeList,me=he.btnMap,be=me===void 0?{}:me,xe=he.app,Ae=he.processName,Ne=this.state,Me=Ne.moreOperationVisible,Fe=Ne.addApproveWayVisible,Be=Ne.otherActionVisible,we=Ne.action,Ie=Ne.isRequest,ge=Ne.isUrged;if(fe)return d.createElement("header",{className:"flexRow workflowStepHeader"},d.createElement("div",{className:"stepTitle flexRow errorHeader Gray_9e"},d.createElement(A.Z,{icon:"Import-failure",className:"Font18"}),d.createElement("span",{className:"Font14 ellipsis mLeft6"},fe||"text")));if(ye){var Re=Ce&&Ce.type&&Ce.type!==0?ie.VW[Ce.type][Ce.operationType]||{}:{},Pe=Re.text,ke=Re.color,We=((Se||[]).filter(function(Ve){return Ve.allowUrge&&Ve.urgeTime}).sort(function(Ve,it){return B()(Ve.urgeTime)<B()(it.urgeTime)?1:-1})[0]||{}).urgeTime;return d.createElement(d.Fragment,null,d.createElement("header",{className:"flexRow workflowStepHeader"},d.createElement("div",{className:"workflowStepIcon",style:{background:xe.iconColor}},d.createElement(j.Z,{url:xe.iconUrl,fill:"#fff",size:20,addClassName:"mTop1"})),d.createElement("div",{className:"flex mLeft10 mRight30 Font17 bold overflow_ellipsis",title:xe.name+" \xB7 "+Ae},xe.name+" \xB7 "+Ae),Ce&&Ce.operationTime&&!!J[0].length&&We&&d.createElement("div",{className:"operationTime flexRow Gray_9e Font14"},createTimeSpan(We),d.createElement("span",{className:"mLeft5 Gray_9e"},_l("\u5DF2\u50AC\u529E"))),Ce&&Ce.operationTime&&!J[0].length?d.createElement("div",{className:"operationTime flexRow Gray_9e Font14"},createTimeSpan(We||Ce.operationTime),!!We&&d.createElement("span",{className:"mLeft5 Gray_9e"},_l("\u5DF2\u50AC\u529E")),Pe&&!We&&d.createElement("span",{className:"mLeft5",style:{color:ke}},Pe)):d.createElement("div",{className:"operation flexRow"},J[0].map(function(Ve){return p()({},C.lZ[Ve],{key:Ve})}).sort(function(Ve,it){return Ve.sort-it.sort}).map(function(Ve){var it=Ve.id,Ge=Ve.text,pt=Ve.icon,ot=Ve.key;return d.createElement(s.ZP,{disabled:Ie&&it===we||ge&&it==="urge",key:it,size:"tiny",onClick:function(){return ae.handleClick(it)},className:re()("headerBtn mLeft10",it)},d.createElement(A.Z,{type:pt,className:"Font16 mRight3"}),Ie&&it===we?_l("\u5904\u7406\u4E2D..."):ge&&it==="urge"?_l("\u5DF2\u50AC\u529E"):Q.b3[be[ot]]||be[ot]||Ge)})),d.createElement("div",{className:"more flexRow tip-bottom mLeft15",onClick:function(){return ae.setState({moreOperationVisible:!Me})}},d.createElement("div",{className:"iconWrap flexRow","data-tip":_l("\u66F4\u591A\u64CD\u4F5C")},d.createElement(A.Z,{icon:"more_horiz Gray_9e ThemeHoverColor3"})),Me&&d.createElement(O.Z,{className:"moreOperation",onClickAway:function(){return ae.setState({moreOperationVisible:!1})}},J[1].map(function(Ve,it){return!(C.iR[Ve].id==="print"&&!(0,N.v)(F.RX.recordPrintSwitch,ue,pe))&&d.createElement(n.Z,{key:it,onClick:function(){return ae.handleMoreOperation(C.iR[Ve].id)}},d.createElement(A.Z,{icon:C.iR[Ve].icon}),d.createElement("span",{className:"actionText"},C.iR[Ve].text))}),d.createElement(n.Z,{onClick:function(){return window.open("/app/"+xe.id+"/workflowdetail/record/"+Ee+"/"+Y)}},d.createElement(A.Z,{icon:"launch"}),d.createElement("span",{className:"actionText"},_l("\u65B0\u9875\u9762\u6253\u5F00")))))),Fe&&d.createElement(E,{onOk:function(it){return ae.setState({action:it,addApproveWayVisible:!1,otherActionVisible:!0})},onCancel:function(){return ae.setState({addApproveWayVisible:!1})},onSubmit:oe}),Be&&d.createElement(le.Z,{projectId:de,data:he,action:we,onOk:this.handleAction,onCancel:function(){return ae.setState({otherActionVisible:!1})}}))}return null}}]),M}(d.Component),i.propTypes={projectId:Z.string,data:(0,Z.shape)({flowNode:(0,Z.shape)({name:Z.string,type:Z.number}),operationTypeList:(0,Z.arrayOf)((0,Z.arrayOf)(Z.number))}),currentWorkItem:(0,Z.shape)({operationTime:Z.string}),errorMsg:Z.string},i.defaultProps={projectId:"",data:{},currentWorkItem:{},errorMsg:""},m),W=t(3306),P=t(45231),u=t(20954),l,T,G=(T=l=function(D){(0,o.default)(M,D);function M(){var se,ae,ne,de;(0,y.default)(this,M);for(var Ce=arguments.length,he=Array(Ce),fe=0;fe<Ce;fe++)he[fe]=arguments[fe];return de=(ae=(ne=(0,r.default)(this,(se=M.__proto__||R()(M)).call.apply(se,[this].concat(he))),ne),ne.state={data:{},works:[],currentWork:{},currentWorkItem:{},projectId:"",errorMsg:"",sheetSwitchPermit:[],worksheetId:"",rowId:"",viewId:"",loading:!0},ne.getData=function(){var Ee=ne.props,Y=Ee.id,oe=Ee.workId,ve=Ee.onRead,ue=Ee.onSave,pe=Ee.onClose;V.Z.get({id:Y,workId:oe}).then(function(Se){var ye=Se.status,J=Se.currentWork,me=Se.currentWorkItem,be=Se.works,xe=Se.companyId,Ae=(0,L.Z)(Se,["status","currentWork","currentWorkItem","works","companyId"]);if(ve(),z().includes([20001,30001,30002,30003,30004,30006,40007],ye)){if(ye===30006){alert(C.g5[ye],2),pe();return}ne.setState({errorMsg:C.g5[ye]})}else ne.setState({data:p()({},Ae,{status:ye}),currentWork:J,currentWorkItem:me,works:be,projectId:xe}),(me||{}).operationTime&&ue()})},ne.getPermit=function(){var Ee=ne.props,Y=Ee.id,oe=Ee.workId,ve=Ee.onError;P.Z.getWorkItem({instanceId:Y,workId:oe}).then(function(ue){P.Z.getSwitchPermit({worksheetId:ue.worksheetId}).then(function(pe){ne.setState({sheetSwitchPermit:pe,viewId:ue.viewId,worksheetId:ue.worksheetId,rowId:ue.rowId,loading:!1})})}).catch(function(ue){ve()})},ne.onError=function(){var Ee=ne.props,Y=Ee.id,oe=Ee.workId,ve=Ee.onError;V.Z.get({id:Y,workId:oe}).then(function(){ve()})},ae),(0,r.default)(ne,de)}return(0,a.default)(M,[{key:"componentDidMount",value:function(){this.getData(),this.getPermit()}},{key:"render",value:function(){var ae=this.props,ne=ae.id,de=ae.workId,Ce=ae.isLand,he=ae.onClose,fe=this.state,Ee=fe.data,Y=fe.works,oe=fe.currentWork,ve=fe.currentWorkItem,ue=fe.projectId,pe=fe.errorMsg,Se=fe.sheetSwitchPermit,ye=Se===void 0?[]:Se,J=fe.worksheetId,me=fe.viewId,be=fe.rowId,xe=fe.loading;if(xe)return null;var Ae=Ce?(0,H.Z)(f.Z):f.Z;return d.createElement(Ae,{notDialog:Ce,from:z().get(Ee,"flowNode.type")===5?3:4,sheetSwitchPermit:ye,viewId:me,recordId:be,worksheetId:J,header:d.createElement(v,(0,ce.default)({projectId:ue,data:Ee,works:Y,currentWorkItem:ve,errorMsg:pe,sheetSwitchPermit:ye,viewId:me,rowId:be,worksheetId:J},this.props)),workflow:d.createElement("div",{className:"flexColumn h100"},d.createElement(u.Z,{processId:Ee.processId,instanceId:ne,processName:Ee.processName,isApproval:Ee.isApproval}),d.createElement(U.Z,{className:"flex"},d.createElement("ul",{className:"pAll20 pTop0"},d.createElement(W.Z,{projectId:ue,currentWork:oe,rowId:be,currentType:(ve||{}).type,worksheetId:J,works:Y,status:Ee.status,currents:Ee.currentWorkIds})))),instanceId:ne,workId:de,hideRecordInfo:he,visible:!0,onError:this.onError})}}]),M}(d.Component),l.propTypes={id:Z.string,isLand:Z.bool,workId:Z.string,onRead:Z.func,onSave:Z.func,onError:Z.func,onClose:Z.func},l.defaultProps={id:"",workId:"",onRead:function(){},onSave:function(){},onError:function(){},onClose:function(){}},T)},31620:(lt,Te,t)=>{"use strict";t.d(Te,{ZP:()=>z,jO:()=>X});var ce=t(20148),g=t.n(ce),p=t(60385),L=t.n(p),te=t(42057),R=t(33867),y=t(54208),a=t(85105),r=t.n(a),o=t(99663),d=t(22600),Z=t(49135),H=t(93196),U=t(86735),f=t(67294),V=t(45697),C=t.n(V),O=t(71893),n=t(62023),s=t(72078),j=t(61109),A=t(5618),S=t(93967),I=t.n(S),c=t(96486),q=t.n(c),b=t(62202),k=t(7823),ee=t(15577),re,ie,le=(0,U.Z)([`
  padding: 0 0 32px 0 !important;
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    margin: auto;
    width: 1px;
    height: 100%;
    background-color: #ccc;
  }
  .flexRow {
    height: 40px;
    background: #fff;
    box-shadow: 0 1px 4px 1px rgba(0, 0, 0, 0.12);
    border-radius: 20px;
    padding: 0 30px 0 5px;
    position: relative;
    span {
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #2747f9;
      margin-right: 10px;
      border-radius: 50%;
      color: #fff;
      font-size: 20px;
    }
  }
`],[`
  padding: 0 0 32px 0 !important;
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    margin: auto;
    width: 1px;
    height: 100%;
    background-color: #ccc;
  }
  .flexRow {
    height: 40px;
    background: #fff;
    box-shadow: 0 1px 4px 1px rgba(0, 0, 0, 0.12);
    border-radius: 20px;
    padding: 0 30px 0 5px;
    position: relative;
    span {
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #2747f9;
      margin-right: 10px;
      border-radius: 50%;
      color: #fff;
      font-size: 20px;
    }
  }
`]),E=(0,U.Z)([`
  height: 40px;
  line-height: 40px;
  background: #fff;
  box-shadow: 0 1px 4px 1px rgba(0, 0, 0, 0.12);
  border-radius: 20px;
  position: relative;
  padding: 0 30px;
`],[`
  height: 40px;
  line-height: 40px;
  background: #fff;
  box-shadow: 0 1px 4px 1px rgba(0, 0, 0, 0.12);
  border-radius: 20px;
  position: relative;
  padding: 0 30px;
`]),w=(0,U.Z)([`
  margin-left: 12px;
  font-size: 12px;
  .legendLine {
    width: 12px;
    height: 3px;
    margin-right: 8px;
  }
`],[`
  margin-left: 12px;
  font-size: 12px;
  .legendLine {
    width: 12px;
    height: 3px;
    margin-right: 8px;
  }
`]),K=O.ZP.div(le),N=O.ZP.div(E),F=O.ZP.div(w),h=(ie=re=function(B){(0,H.default)(x,B);function x(){var Q,i,m,v;(0,o.default)(this,x);for(var W=arguments.length,P=Array(W),u=0;u<W;u++)P[u]=arguments[u];return v=(i=(m=(0,Z.default)(this,(Q=x.__proto__||r()(x)).call.apply(Q,[this].concat(P))),m),m.state={scale:100,startEventId:"",flowNodeMap:{},execIds:[],execPendingIds:[],execLineComplete:!1},m.renderNode=function(l){var T=l.processId,G=l.data,D=l.firstId,M=l.excludeFirstId,se=M===void 0?!1:M;return(0,s.dv)(G,D,se).map(function(ae){var ne={key:ae,processId:T,data:G,item:G[ae],disabled:!0,renderNode:m.renderNode};if(!G[ae]||!q().includes([A.QZ.BRANCH,A.QZ.APPROVAL],G[ae].typeId))return null;var de=j.Z[G[ae].typeId];return f.createElement(de,ne)})},m.fullDisplay=function(){var l=$(".flowChartModal .workflowEdit")[0];if(l.clientHeight<l.scrollHeight){var T=Math.floor(l.clientHeight/l.scrollHeight*m.state.scale/10)*10;T<=50&&(T=50),T>=100&&(T=100),m.setState({scale:T})}},i),(0,Z.default)(m,v)}return(0,d.default)(x,[{key:"componentWillMount",value:function(){var i=this,m=this.props,v=m.processId,W=m.instanceId;n.Z.get({processId:v,instanceId:W}).then(function(P){i.setState({startEventId:P.startEventId,flowNodeMap:P.flowNodeMap,execIds:P.execIds,execPendingIds:P.execPendingIds})})}},{key:"componentDidUpdate",value:function(){var i=this.state,m=i.execIds,v=i.execPendingIds;this.state.execLineComplete||(this.changeScreenWidth(),this.setViewCenter(),this.renderLine(m),this.renderLine(v,!0),this.fullDisplay(),this.setState({execLineComplete:!0}))}},{key:"changeScreenWidth",value:function(){var i=$(".flowChartModal .workflowEdit"),m=i.find(".workflowEditContent"),v=i.width();m.find("> .flexColumn > .workflowBranch").map(function(W,P){v<$(P).innerWidth()&&(v=$(P).innerWidth())}),m.width(v)}},{key:"setViewCenter",value:function(){var i=$(".flowChartModal .workflowEdit")[0]||{},m=i.scrollWidth,v=i.clientWidth;m>v&&$(".flowChartModal .workflowEdit").scrollLeft((m-v)/2)}},{key:"renderLine",value:function(i){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,v=this.props.selectNodeId,W=this.state,P=W.flowNodeMap,u=W.execIds,l=W.execPendingIds;i.forEach(function(T,G){var D=$(".flowChartModal .workflowBox[data-id="+T+"]");if(m?$(".flowChartModal .workflowBox[data-id="+T+"],.workflowBranch[data-id="+T+"]").addClass("workflowBoxPending"):D.parent().addClass("executed"),(!m||T===v)&&D.find("> .workflowItem").removeClass("workflowItemDisabled"),P[T].typeId===A.QZ.BRANCH){var M=P[T],se=M.flowIds,ae=M.gatewayType,ne=$(".flowChartModal .workflowBranch[data-id="+T+"]").toggleClass("workflowInclusionBranch",ae===1),de=ne.offset().left,Ce=ne.innerWidth();if(G===i.length-1){ne.siblings(".workflowLineBtn").toggleClass("workflowBoxPending",m).append('<div class="workflowExecLine" />');return}var he=void 0;ae===1&&se.forEach(function(me,be){q().includes(i,me)&&(he=me)});var fe=$(".flowChartModal .workflowBox[data-id="+i[G+1]+"]"),Ee=fe.offset().left,Y=fe.innerWidth(),oe=Ce/2+de-(Y/2+Ee),ve=0;if(he&&he!==i[G+1]){var ue=$(".flowChartModal .workflowBox[data-id="+he+"]"),pe=ue.offset().left,Se=ue.innerWidth(),ye=Ce/2+de-(Se/2+pe);oe>0&&ye<0?ve=Math.abs(ye):oe<0&&ye<0&&(ve=Math.abs(ye)-Math.abs(oe))}var J="width: "+(Math.abs(oe)+2+ve)+"px;margin-left:"+(oe>0?Math.ceil(Ce/2-oe)-1+"px;":Math.floor(Ce/2)-1+"px;");ne.prepend('<div class="workflowExecTopLine" style="'+J+'" />')}else D.prepend('<div class="workflowExecLine" />');P[T].typeId!==A.QZ.BRANCH&&!P[T].nextId&&i.slice(0,G).concat(m?u:[]).reverse().forEach(function(me){if(P[me].typeId===A.QZ.BRANCH&&(q().includes(["","99"],P[me].nextId)||!m&&(!l.length||q().includes(l,P[me].nextId))||m)){var be=$(".flowChartModal .workflowBranch[data-id="+me+"]"),xe=be.siblings(".workflowLineBtn"),Ae=!1;(P[me].nextId==="99"&&l.length||q().includes(l,P[me].nextId))&&(Ae=!0),be.find("> .workflowExecBottomLine").length||(be.toggleClass("workflowBoxBranchPending",q().includes(u,P[me].nextId)?!1:m||Ae),be.append('<div class="workflowExecBottomLine" style="'+be.find("> .workflowExecTopLine").attr("style")+'"/>')),xe.find("> .workflowExecLine").length||xe.toggleClass("workflowBoxPending",q().includes(u,P[me].nextId)?!1:m||Ae).append('<div class="workflowExecLine" />'),be.find(".workflowExecLine").eq(0).closest(".flexColumn").addClass("workflowExecBeforeLine")}})}),$(".workflowExecLine").each(function(T,G){var D=$(G);D.height(D.closest(".executed,.workflowBoxPending").innerHeight())})}},{key:"render",value:function(){var i=this,m=this.props.processId,v=this.state,W=v.scale,P=v.startEventId,u=v.flowNodeMap,l=(0,ee.Q9)();return f.createElement("div",{className:"workflowEdit flexRow workflowEditRelease flex"},P?f.createElement("div",{className:"workflowEditContent",style:{transform:"scale("+W/100+")",transformOrigin:"center top"}},f.createElement("div",{className:"flexColumn"},f.createElement(K,{className:"workflowBox","data-id":P},f.createElement("div",{className:"flexRow alignItemsCenter Font14 bold Gray_75"},f.createElement("span",null,f.createElement(R.Z,{type:"approval"})),_l("\u6D41\u7A0B\u5F00\u59CB")))),this.renderNode({processId:m,data:u,firstId:P,excludeFirstId:!0}),f.createElement("div",{className:"flexColumn"},f.createElement("div",{className:"workflowBox pTop0 mBottom20","data-id":"99"},f.createElement(N,{className:"Font14 bold Gray_75"},f.createElement("div",null,_l("\u7ED3\u675F")))))):f.createElement(y.Z,null),f.createElement("div",{className:I()("workflowEditBtn",{mobile:l})},f.createElement("span",{"data-tip":l?"":_l("\u7F29\u5C0F")},f.createElement("i",{className:I()("icon-minus",{ThemeHoverColor3:!l},{disabled:W===50}),onClick:function(){return W>50&&i.setState({scale:W-10})}})),f.createElement("span",{className:"Font14 mRight8 TxtCenter",style:{width:40}},W,"%"),f.createElement("span",{"data-tip":l?"":_l("\u653E\u5927")},f.createElement("i",{className:I()("icon-add",{ThemeHoverColor3:!l},{disabled:W===100}),onClick:function(){return W<100&&i.setState({scale:W+10})}})),f.createElement("span",{"data-tip":l?"":_l("\u9002\u5E94\u9AD8\u5EA6")},f.createElement("i",{className:I()("icon-settings_overscan",{ThemeHoverColor3:!l}),onClick:this.fullDisplay})),!l&&f.createElement(f.Fragment,null,f.createElement("span",{className:"workflowEditBtnLine"}),f.createElement(F,{className:"flexRow alignItemsCenter"},f.createElement("div",{className:"legendLine",style:{background:"#2196f3"}}),f.createElement("div",null,_l("\u5DF2\u6267\u884C"))),f.createElement(F,{className:"flexRow alignItemsCenter mLeft20"},f.createElement("div",{className:"legendLine",style:{background:"#ccc"}}),f.createElement("div",null,_l("\u5F85\u6267\u884C"))))))}}]),x}(f.Component),re.propTypes={processId:V.string.isRequired,instanceId:V.string.isRequired,selectNodeId:V.string},ie);const z=(0,f.memo)(function(B){var x=B.processId,Q=B.instanceId,i=B.selectNodeId,m=B.onClose,v=m===void 0?function(){}:m;return f.createElement(te.Z,{visible:!0,className:"flowChartModal",closable:!1,title:f.createElement("div",{className:"flexRow valignWrapper"},f.createElement("div",{className:"flex Font17 bold"},_l("\u6D41\u8F6C\u56FE")),f.createElement(R.Z,{className:"Gray_9e Font20 pointer",icon:"close",onClick:v})),type:"fixed",width:window.outerWidth-60,onCancel:v},f.createElement(h,{processId:x,instanceId:Q,selectNodeId:i}))});var X=(0,f.memo)(function(B){var x=B.processId,Q=B.instanceId,i=B.selectNodeId,m=B.onClose,v=m===void 0?function(){}:m;return f.createElement(L(),{popup:!0,animationType:"slide-up",className:"flowChartModal h100",onClose:v,visible:!0},f.createElement(R.Z,{className:"Gray_9e Font22 pointer mobileClose",icon:"closeelement-bg-circle",onClick:v}),f.createElement(h,{processId:x,instanceId:Q,selectNodeId:i}))})},17705:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>l});var ce=t(59768),g=t.n(ce);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(82891);var L=t(88239),te=t(22382),R=t.n(te),y=t(28661),a=t.n(y),r=t(88106),o=t(20148),d=t.n(o),Z=t(60385),H=t.n(Z),U=t(80426),f=t.n(U),V=t(59012),C=t.n(V),O=t(63627),n=t.n(O),s=t(81982),j=t.n(s);if(!/^(1887|7596|7798)$/.test(t.j))var A=t(69288);if(!/^(1887|7596|7798)$/.test(t.j))var S=t(33867);if(!/^(1887|7596|7798)$/.test(t.j))var I=t(15759);var c=t(10524),q=t.n(c);if(!/^(1887|7596|7798)$/.test(t.j))var b=t(31059);var k=t(12424),ee=t(86735),re=t(60954),ie=t.n(re),le=t(12386),E=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var w=t(18667);var K=t(93967),N=t.n(K),F=t(71893),h=t(15577);if(!/^(1887|7596|7798)$/.test(t.j))var z=t(75809);var X=(0,ee.Z)([`
  &.hoverBtnWrap .btn {
    &.pass:hover {
      background-color: rgba(76, 175, 80, 0.23);
    }
    &.handle:hover,
    &.revoke:hover,
    &.urge:hover {
      background-color: #ececec;
    }
    &.overrule:hover {
      background-color: rgba(244, 67, 54, 0.23);
    }
    &.return:hover {
      background-color: rgba(255, 152, 45, 0.23);
    }
  }
  .btn {
    color: #333;
    font-weight: bold;
    flex: 1;
    height: 32px;
    min-width: 0;
    padding: 0 10px;
    background: #f7f7f7;
    border-radius: 3px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 10px;
    transition: 0.2s;
    &.pass {
      .icon {
        color: rgba(76, 175, 80, 1);
      }
      background-color: rgba(76, 175, 80, 0.13);
    }
    &.revoke {
      color: rgba(244, 67, 54, 1);
    }
    &.overrule {
      .icon {
        color: rgba(244, 67, 54, 1);
      }
      background-color: rgba(244, 67, 54, 0.13);
    }
    &.return {
      .icon {
        color: rgba(255, 152, 45, 1);
      }
      background-color: rgba(255, 152, 45, 0.13);
    }
    &.urgeDisable {
      opacity: 0.6;
    }
    &:last-child {
      margin-right: 0;
    }
  }
  .mobileMore {
    padding: 0;
    width: 30px;
    flex: inherit;
  }
`],[`
  &.hoverBtnWrap .btn {
    &.pass:hover {
      background-color: rgba(76, 175, 80, 0.23);
    }
    &.handle:hover,
    &.revoke:hover,
    &.urge:hover {
      background-color: #ececec;
    }
    &.overrule:hover {
      background-color: rgba(244, 67, 54, 0.23);
    }
    &.return:hover {
      background-color: rgba(255, 152, 45, 0.23);
    }
  }
  .btn {
    color: #333;
    font-weight: bold;
    flex: 1;
    height: 32px;
    min-width: 0;
    padding: 0 10px;
    background: #f7f7f7;
    border-radius: 3px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 10px;
    transition: 0.2s;
    &.pass {
      .icon {
        color: rgba(76, 175, 80, 1);
      }
      background-color: rgba(76, 175, 80, 0.13);
    }
    &.revoke {
      color: rgba(244, 67, 54, 1);
    }
    &.overrule {
      .icon {
        color: rgba(244, 67, 54, 1);
      }
      background-color: rgba(244, 67, 54, 0.13);
    }
    &.return {
      .icon {
        color: rgba(255, 152, 45, 1);
      }
      background-color: rgba(255, 152, 45, 0.13);
    }
    &.urgeDisable {
      opacity: 0.6;
    }
    &:last-child {
      margin-right: 0;
    }
  }
  .mobileMore {
    padding: 0;
    width: 30px;
    flex: inherit;
  }
`]),B=(0,ee.Z)([`
  .original {
    padding-right: 10px;
    border-right: 1px solid #dddddd;
  }
  .accountWrap {
    padding: 5px;
    margin-bottom: 5px;
    border-radius: 3px;
    &:hover {
      background-color: #f5f5f5;
    }
  }
`],[`
  .original {
    padding-right: 10px;
    border-right: 1px solid #dddddd;
  }
  .accountWrap {
    padding: 5px;
    margin-bottom: 5px;
    border-radius: 3px;
    &:hover {
      background-color: #f5f5f5;
    }
  }
`]),x=(0,ee.Z)([`
  .header {
    padding: 24px 16px 16px;
    background-color: #f8f8f8;
  }
  .content {
    padding: 24px 16px 16px;
    background-color: #fff;
    .original {
      border-bottom: 1px solid #f5f5f5;
    }
    .flexWrap {
      flex-wrap: wrap;
    }
    .accountItem {
      width: 50%;
      margin-bottom: 10px;
    }
    .accountWrap {
      border-radius: 16px;
      padding-right: 10px;
      background-color: #f5f5f5;
      position: relative;
      img {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        margin-right: 6px;
      }
      .delete {
        position: absolute;
        right: -3px;
        top: -5px;
        font-size: 18px;
      }
    }
  }
  .btnsWrapper {
    padding: 7px 10px;
    background-color: #fff;
    a {
      text-decoration: none;
    }
    .am-button {
      height: 36px;
      line-height: 36px;
    }
    .am-button,
    .am-button::before,
    .am-button-active::before {
      border-radius: 50px;
    }
  }
`],[`
  .header {
    padding: 24px 16px 16px;
    background-color: #f8f8f8;
  }
  .content {
    padding: 24px 16px 16px;
    background-color: #fff;
    .original {
      border-bottom: 1px solid #f5f5f5;
    }
    .flexWrap {
      flex-wrap: wrap;
    }
    .accountItem {
      width: 50%;
      margin-bottom: 10px;
    }
    .accountWrap {
      border-radius: 16px;
      padding-right: 10px;
      background-color: #f5f5f5;
      position: relative;
      img {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        margin-right: 6px;
      }
      .delete {
        position: absolute;
        right: -3px;
        top: -5px;
        font-size: 18px;
      }
    }
  }
  .btnsWrapper {
    padding: 7px 10px;
    background-color: #fff;
    a {
      text-decoration: none;
    }
    .am-button {
      height: 36px;
      line-height: 36px;
    }
    .am-button,
    .am-button::before,
    .am-button-active::before {
      border-radius: 50px;
    }
  }
`]),Q=(0,h.Q9)(),i=le.default.Item,m=F.ZP.div(X),v=F.ZP.div(B);function W(T){var G=T.visible,D=T.projectId,M=T.data,se=T.onCancel,ae=T.onOK,ne=M.currentWorkItems||[],de=(0,E.useState)(ne.map(function(pe){return pe.workItemAccount.accountId})),Ce=(0,k.Z)(de,2),he=Ce[0],fe=Ce[1],Ee=(0,E.useState)([]),Y=(0,k.Z)(Ee,2),oe=Y[0],ve=Y[1],ue=function(){(0,z.Z)({showMoreInvite:!1,overlayClosable:!1,SelectUserSettings:{projectId:D,filterAccountIds:ne.map(function(Se){return Se.workItemAccount.accountId}),callback:function(ye){ve(ye)}}})};return E.createElement(A.Z,{visible:G,width:640,title:_l("\u8C03\u6574\u8D1F\u8D23\u4EBA"),description:_l("\u79FB\u9664\u5C1A\u672A\u8FDB\u884C\u64CD\u4F5C\u7684\u8D1F\u8D23\u4EBA\uFF0C\u6DFB\u52A0\u65B0\u7684\u6210\u5458\uFF1B\u60A8\u7684\u64CD\u4F5C\u4EC5\u5BF9\u5F53\u524D\u6D41\u7A0B\u7684\u672C\u6B21\u8FD0\u884C\u751F\u6548"),onCancel:se,onOk:function(){var Se=he.concat(oe.map(function(ye){return ye.accountId}));ae(Se)}},E.createElement(v,{className:"flexRow"},E.createElement("div",{className:"flex original"},!!ne.length&&E.createElement("div",{className:"flexRow valignWrapper pointer pLeft5 pRight5 mBottom5",onClick:function(){he.length===ne.length?fe([]):fe(ne.map(function(Se){return Se.workItemAccount.accountId}))}},E.createElement(b.default,{className:"flexRow bold",checked:he.length===ne.length}),E.createElement("div",{className:"bold mLeft15"},""+_l("\u539F\u8D1F\u8D23\u4EBA")+(he.length?"("+he.length+")":""))),ne.map(function(pe){return E.createElement("div",{key:pe.workItemAccount.accountId,className:"accountWrap flexRow valignWrapper pointer",onClick:function(){he.includes(pe.workItemAccount.accountId)?fe(he.filter(function(ye){return ye!==pe.workItemAccount.accountId})):fe(he.concat(pe.workItemAccount.accountId))}},E.createElement(b.default,{className:"flexRow",checked:he.includes(pe.workItemAccount.accountId)}),E.createElement("div",{className:"flexRow valignWrapper mLeft15"},E.createElement(I.Z,{size:28,user:{userHead:pe.workItemAccount.avatar,accountId:pe.workItemAccount.accountId}}),E.createElement("div",{className:"mLeft12"},pe.workItemAccount.fullName)))})),E.createElement("div",{className:"flex mLeft15"},E.createElement("div",{className:"bold mBottom5"},""+_l("\u65B0\u589E\u8D1F\u8D23\u4EBA")+(oe.length?"("+oe.length+")":"")),oe.map(function(pe){return E.createElement("div",{className:"accountWrap flexRow valignWrapper",key:pe.accountId},E.createElement(I.Z,{size:28,user:{userHead:pe.avatar,accountId:pe.accountId}}),E.createElement("div",{className:"mLeft10 flex"},pe.fullname),E.createElement(S.Z,{icon:"close",className:"Gray_9e Font16 pointer",onClick:function(){ve(oe.filter(function(ye){return ye.accountId!==pe.accountId}))}}))}),E.createElement("div",{className:"valignWrapper Gray_bd mTop10 pointer pAll5",onClick:ue},E.createElement("div",{className:"addWrap valignWrapper"},E.createElement(S.Z,{className:"Font28",icon:"task-add-member-circle"})),E.createElement("div",{className:"mLeft10"},_l("\u6DFB\u52A0\u8D1F\u8D23\u4EBA"))))))}var P=F.ZP.div(x);function u(T){var G=T.visible,D=T.projectId,M=T.data,se=T.onCancel,ae=T.onOK,ne=M.currentWorkItems||[],de=(0,E.useState)(ne.map(function(J){return J.workItemAccount.accountId})),Ce=(0,k.Z)(de,2),he=Ce[0],fe=Ce[1],Ee=(0,E.useState)([]),Y=(0,k.Z)(Ee,2),oe=Y[0],ve=Y[1],ue=(0,E.useState)(!1),pe=(0,k.Z)(ue,2),Se=pe[0],ye=pe[1];return E.createElement(E.Fragment,null,E.createElement(H(),{popup:!0,transitionName:"noTransition",className:"h100",onClose:se,visible:G},E.createElement(P,{className:"flexColumn h100 leftAlign"},E.createElement("div",{className:"header"},E.createElement("div",{className:"Font17 Gray bold mBottom6"},_l("\u8C03\u6574\u8D1F\u8D23\u4EBA")),E.createElement("div",{className:"Font12 Gray_9e"},_l("\u79FB\u9664\u5C1A\u672A\u8FDB\u884C\u64CD\u4F5C\u7684\u8D1F\u8D23\u4EBA\uFF0C\u5C06\u5176\u66FF\u6362\u4E3A\u65B0\u7684\u6210\u5458\uFF1B\u60A8\u7684\u64CD\u4F5C\u4EC5\u5BF9\u5F53\u524D\u6D41\u7A0B\u7684\u672C\u6B21\u8FD0\u884C\u751F\u6548"))),E.createElement("div",{className:"flex content"},E.createElement("div",{className:"original pBottom10"},E.createElement("div",{className:"valignWrapper mBottom15"},E.createElement("div",{className:"flex Font15 Gray bold"},_l("\u539F\u8D1F\u8D23\u4EBA")),E.createElement("div",{style:{fontWeight:500},className:"ThemeColor Font13",onClick:function(){he.length===ne.length?fe([]):fe(ne.map(function(me){return me.workItemAccount.accountId}))}},he.length===ne.length?_l("\u53D6\u6D88\u5168\u9009"):_l("\u5168\u9009"))),E.createElement("div",{className:"flexRow flexWrap"},ne.map(function(J){return E.createElement("div",{key:J.workItemAccount.accountId,className:"accountItem valignWrapper",onClick:function(){he.includes(J.workItemAccount.accountId)?fe(he.filter(function(be){return be!==J.workItemAccount.accountId})):fe(he.concat(J.workItemAccount.accountId))}},he.includes(J.workItemAccount.accountId)?E.createElement(S.Z,{className:"Font24 ThemeColor",icon:"check_circle"}):E.createElement(S.Z,{className:"Font24 Gray_9e",icon:"not_checked"}),E.createElement("div",{className:"mLeft5 valignWrapper accountWrap"},E.createElement("img",{src:J.workItemAccount.avatar}),E.createElement("span",{className:"Font13 breakAll flex ellipsis"},J.workItemAccount.fullName)))}))),E.createElement("div",{className:"mTop10"},E.createElement("div",{className:"flex Font15 Gray bold mBottom15"},_l("\u65B0\u589E\u8D1F\u8D23\u4EBA")),E.createElement("div",{className:"flexRow flexWrap"},oe.map(function(J){return E.createElement("div",{className:"valignWrapper accountWrap mRight10 mBottom10",key:J.accountId},E.createElement("img",{src:J.avatar}),E.createElement("span",{className:"Font13"},J.fullname),E.createElement(S.Z,{icon:"remove_circle",className:"delete Gray_bd",onClick:function(){ve(oe.filter(function(be){return be.accountId!==J.accountId}))}}))}),E.createElement("div",{className:"justifyContentCenter valignWrapper Gray_bd",onClick:function(){return ye(!0)}},E.createElement(S.Z,{className:"Font26",icon:"task-add-member-circle"}))))),E.createElement("div",{className:"btnsWrapper flexRow"},E.createElement(C(),{className:"flex",size:"sm"},E.createElement(j(),{className:"Font13 bold Gray_75",onClick:se},_l("\u53D6\u6D88"))),E.createElement(C(),{className:"flex",size:"sm"},E.createElement(j(),{className:"Font13 bold",type:"primary",onClick:function(){var me=he.concat(oe.map(function(be){return be.accountId}));ae(me)}},_l("\u786E\u5B9A")))))),Se&&E.createElement(w.Z,{projectId:D,visible:Se,filterAccountIds:ne.map(function(J){return J.workItemAccount.accountId}),type:"user",userType:1,onClose:function(){return ye(!1)},onSave:function(me){ve(me)}}))}function l(T){var G=T.className,D=T.isBranch,M=T.hasMore,se=T.isCharge,ae=T.projectId,ne=T.data,de=T.onAction,Ce=T.onRevoke,he=T.onUrge,fe=T.onSkip,Ee=T.onUpdateWorkAccounts,Y=T.onEndInstance,oe=T.onViewExecDialog,ve=ne.workId,ue=ne.allowRevoke,pe=ne.allowUrge,Se=ne.flowNode,ye=ne.workItem,J=Se||{},me=J.type,be=J.batch,xe=J.btnMap,Ae=J.callBackType,Ne=me===4&&be,Me=Ne&&ye,Fe=xe[5]&&be&&ye,Be=Ae!==-1&&!Fe&&be&&ye,we=(0,E.useState)(!1),Ie=(0,k.Z)(we,2),ge=Ie[0],Re=Ie[1],Pe=window["urgeDisable-workId-"+ve]||ne.urgeDisable||!1,ke=function(){var yt=me===4?_l("\u5F53\u524D\u8282\u70B9\u672A\u8FDB\u884C\u64CD\u4F5C\u7684\u6210\u5458\u5C06\u8BBE\u4E3A\u901A\u8FC7"):_l("\u5F53\u524D\u8282\u70B9\u672A\u8FDB\u884C\u64CD\u4F5C\u7684\u6210\u5458\u5C06\u8BBE\u4E3A\u63D0\u4EA4");Q?H().alert(_l("\u786E\u8BA4\u8DF3\u8FC7\u5F53\u524D\u8282\u70B9 ?"),yt,[{text:_l("\u53D6\u6D88")},{text:_l("\u786E\u8BA4"),onPress:function(){return fe(ne)}}]):A.Z.confirm({title:_l("\u786E\u8BA4\u8DF3\u8FC7\u5F53\u524D\u8282\u70B9 ?"),description:yt,onOk:function(){return fe(ne)}})},We=function(){Q?H().alert(_l("\u786E\u8BA4\u4E2D\u6B62\u6B64\u6761\u6D41\u7A0B ?"),"",[{text:_l("\u53D6\u6D88"),style:{color:"#2196F3"}},{text:_l("\u786E\u8BA4"),style:{color:"red"},onPress:function(){return Y(ne)}}]):A.Z.confirm({title:_l("\u786E\u8BA4\u4E2D\u6B62\u6B64\u6761\u6D41\u7A0B ?"),onOk:function(){return Y(ne)}})},Ve=function(){Q?H().alert(_l("\u786E\u8BA4\u64A4\u56DE\u6B64\u6761\u6D41\u7A0B ?"),"",[{text:_l("\u53D6\u6D88")},{text:_l("\u786E\u8BA4"),onPress:function(){return Ce(ne)}}]):A.Z.confirm({title:_l("\u786E\u8BA4\u64A4\u56DE\u6B64\u6761\u6D41\u7A0B ?"),onOk:function(){return Ce(ne)}})},it=function(){Pe||he(ne)},Ge=function(yt){var st,St=yt.width;return E.createElement(le.default,{style:{width:St,borderRadius:4}},E.createElement(i,{key:"urge",icon:E.createElement(S.Z,{icon:"access_alarm",className:"Font17 Gray_9e pRight5"}),className:"pLeft15 pRight15",style:{height:36,opacity:Pe?.6:1},onClick:it},Pe?_l("\u5DF2\u50AC"):_l("\u50AC\u529E")),E.createElement(i,{key:"skip",icon:E.createElement(S.Z,{icon:"calendar-task",className:"Font17 Gray_9e pRight5"}),className:"pLeft15 pRight15",style:{height:36},onClick:ke},_l("\u8DF3\u8FC7\u5F53\u524D\u8282\u70B9")),E.createElement(i,{key:"user",icon:E.createElement(S.Z,{icon:"ic-adjust-department",className:"Font17 Gray_9e pRight5"}),className:"pLeft15 pRight15",style:{height:36},onClick:function(){return Re(!0)}},_l("\u8C03\u6574\u5F53\u524D\u8282\u70B9\u8D1F\u8D23\u4EBA")),E.createElement(i,(st={key:"end",className:"deleteItem",style:{height:36,color:"#F44336"},icon:E.createElement(S.Z,{icon:"close",className:"Font17 pRight5"})},(0,r.default)(st,"className","pLeft15 pRight15"),(0,r.default)(st,"onClick",We),st),_l("\u4E2D\u6B62")))},pt=function(){var yt=[{name:Pe?_l("\u5DF2\u50AC"):_l("\u50AC\u529E"),icon:"access_alarm",fn:it},{name:_l("\u8DF3\u8FC7\u5F53\u524D\u8282\u70B9"),icon:"calendar-task",fn:ke},{name:_l("\u8C03\u6574\u5F53\u524D\u8282\u70B9\u8D1F\u8D23\u4EBA"),icon:"ic-adjust-department",fn:function(){return Re(!0)}},{name:_l("\u4E2D\u6B62"),icon:"close",className:"Red",fn:We}];a().showActionSheetWithOptions({options:yt.map(function(st){return E.createElement("div",{className:N()("flexRow valignWrapper w100",st.className),onClick:st.fn},E.createElement(S.Z,{className:N()("mRight10 Font18",st.className||"Gray_9e"),icon:st.icon}),E.createElement("span",{className:"Bold"},st.name))}),message:E.createElement("div",{className:"flexRow header"},E.createElement("span",{className:"Font13"},_l("\u64CD\u4F5C")),E.createElement("div",{className:"closeIcon",onClick:function(){return a().close()}},E.createElement(S.Z,{icon:"close"})))})},ot=function(){var yt=Q?u:W;return E.createElement(yt,{data:(0,L.default)({},ne,{currentWorkItems:(ne.currentWorkItems||[]).filter(function(st){return st.operationType===0})}),projectId:ae,visible:ge,onCancel:function(){return Re(!1)},onOK:function(St){Ee(ne,St)}})};if(!(Me||ye||ue||pe))if(se){var vt=E.createElement(m,{onClick:Q?pt:function(){},className:N()("flexRow valignWrapper approveBtnWrapper",G,{hoverBtnWrap:!Q})},E.createElement("div",{className:"btn handle"},E.createElement("span",{className:"ellipsis"},_l("\u7BA1\u7406\u5458\u64CD\u4F5C"))));return E.createElement(E.Fragment,null,Q?vt:E.createElement(p.default,{trigger:["click"],placement:"top",overlay:Ge({width:"100%"})},vt),ot())}else return null;return E.createElement(m,{className:N()("flexRow valignWrapper approveBtnWrapper",G,{hoverBtnWrap:!Q})},E.createElement(E.Fragment,null,Me&&E.createElement("div",{className:"btn pass",onClick:function(){return de(ne,"pass")}},E.createElement(S.Z,{icon:"done",className:"Font17 mRight3"}),E.createElement("span",{className:"ellipsis"},xe[4]||_l("\u901A\u8FC7"))),Fe&&E.createElement("div",{className:"btn overrule",onClick:function(){return de(ne,"overrule")}},E.createElement(S.Z,{icon:"clear",className:"Font17 mRight3"}),E.createElement("span",{className:"ellipsis"},xe[5]||_l("\u5426\u51B3")))),Be&&E.createElement("div",{className:"btn return",onClick:function(){return de(ne,"return")}},E.createElement(S.Z,{icon:"repeal-o",className:"Font17 mRight3"}),E.createElement("span",{className:"ellipsis"},xe[17]||_l("\u9000\u56DE"))),ye&&(me===3||me===0)&&E.createElement("div",{className:"btn handle",onClick:function(){return oe(ne)}},E.createElement("span",{className:"ellipsis"},_l("\u524D\u5F80\u586B\u5199"))),ye&&me===4&&E.createElement("div",{className:"btn handle",onClick:function(){return oe(ne)}},E.createElement("span",{className:"ellipsis"},_l("\u524D\u5F80\u529E\u7406"))),(ue&&Me||ye?!1:ue)&&!D&&E.createElement("div",{className:"btn revoke",onClick:Ve},_l("\u64A4\u56DE")),(pe&&Me||ye?!1:pe)&&E.createElement("div",{className:N()("btn urge",{urgeDisable:Pe}),onClick:it},Pe?_l("\u5DF2\u50AC"):_l("\u50AC\u529E")),M&&se&&(Q?E.createElement("div",{className:"btn mobileMore",onClick:pt},E.createElement(S.Z,{className:"Font20 Gray_9e",icon:"arrow-up-border"})):E.createElement(p.default,{trigger:["click"],placement:"topRight",overlay:Ge({width:200})},E.createElement(S.Z,{className:"Font20 pointer Gray_9e",icon:"task-point-more"}))),ot())}},18097:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>X});var ce=t(48659),g=t(1825),p=t(54208),L=t(25273),te=t(46593),R=t.n(te),y=t(88239),a=t(69288),r=t(20148),o=t(60385),d=t.n(o),Z=t(15759),H=t(12424),U=t(33867),f=t(67294),V=t(93967),C=t.n(V),O=t(78265),n=t(58064),s=t(20954),j=t(3306),A=t(55857),S=t(46100),I=t(1097),c=t(74666),q=t(65369),b=t(90459),k=t(17705),ee=t(15577),re=t(96486),ie=t.n(re),le=t(30381),E=t.n(le),w=(0,ee.Q9)(),K=function(x){var Q=x.createDate,i=x.completeDate,m=E()(Q)-E()(i);if(m)return f.createElement("div",{className:"flexRow valignWrapper mBottom12"},f.createElement("div",{className:"Font13 Gray_9e label"},_l("\u6574\u4F53\u8017\u65F6")),f.createElement("div",null,(0,b.yP)(m)))},N=function(x){var Q=x.status,i=x.completed,m=x.flowNode,v=x.instanceLog,W=x.workItem,P=m||{},u=P.type;if(W){if(u===3||u===0)return f.createElement("span",{className:"bold",style:{color:"#2196F3"}},_l("\u7B49\u6211\u586B\u5199..."));if(u===4)return f.createElement("span",{className:"bold",style:{color:"#2196F3"}},_l("\u7B49\u6211\u5BA1\u6279..."))}else{if(u===3||u===0)return f.createElement("span",{className:"bold Gray_9e"},_l("\u586B\u5199\u4E2D..."));if(u===4)return f.createElement("span",{className:"bold Gray_9e"},_l("\u5BA1\u6279\u4E2D..."))}if(i){var l=Q===3||Q===4?v.status:Q,T=b.Gf[l],G=T.text,D=T.bg,M=T.icon;return f.createElement("div",{className:"state bold valignWrapper",style:{backgroundColor:D}},M?f.createElement(U.Z,{icon:M,className:"mRight5"}):null,f.createElement("div",{className:"Font13"},G))}},F=function(x){var Q=x.workItem,i=!1,m=(ie().get(Q,"workId")?[Q]:[]).filter(function(W){return W.executeTime&&(i=!0),ie().includes([3,4],W.type)&&!W.operationTime&&W.dueTime});if(!m.length)return null;var v=E()()-E()(m[0].dueTime)||0;return f.createElement("div",{className:"flexRow valignWrapper mBottom12"},f.createElement("div",{className:"Font13 Gray_9e label"},_l("\u5269\u4F59\u65F6\u95F4")),f.createElement("div",null,f.createElement("span",{className:"stepTimeConsuming flexRow",style:{color:v>0?"#F44336":i?"#FF9800":void 0}},v>0?_l("\u5DF2\u8D85\u65F6%0",(0,b.yP)(v)):(0,b.yP)(v))))};function h(B){var x=B.formWidth,Q=B.data,i=B.appId,m=B.projectId,v=Q.flowNode||{},W=v.type,P=(Q.currentWorkItems||[]).filter(function(M){return M.operationType!==5}),u=(0,f.useState)(P),l=(0,H.Z)(u,2),T=l[0],G=l[1],D=(0,f.useRef)();return(0,f.useEffect)(function(){if(T.length&&D.current){var M=D.current.clientWidth,se=24,ae=8,ne=Math.floor(M/(se+ae));G(P.slice(0,ne-1))}},[x]),!!(T||[]).length&&f.createElement("div",{className:"flexRow valignWrapper mBottom12"},f.createElement("div",{className:"Font13 Gray_9e label"},W===4?_l("\u5BA1\u6279\u4EBA"):_l("\u586B\u5199\u4EBA")),f.createElement("div",{className:"flex flexRow valignWrapper flexWrap",ref:D},T.map(function(M){return f.createElement("span",{className:"InlineBlock Relative mRight8"},M.workItemAccount.accountId===md.global.Account.accountId?f.createElement("div",{className:"flexRow valignWrapper myAvatar"},_l("\u6211")):f.createElement(Z.Z,{size:24,user:{userHead:M.workItemAccount.avatar,accountId:M.workItemAccount.accountId},appId:i,projectId:m}),f.createElement(f.Fragment,null,(M.operationType===1||ie().get(M,"workItemLog.action")===17)&&f.createElement("div",{className:"flexRow valignWrapper approveState pass"},f.createElement(U.Z,{className:"Font12",icon:"ok"})),M.operationType===4&&f.createElement("div",{className:"flexRow valignWrapper approveState overrule"},f.createElement(U.Z,{className:"Font12",icon:"clear"}))))}),P.length!==T.length&&f.createElement("span",{className:"InlineBlock Relative mRight8"},f.createElement("div",{className:"flexRow valignWrapper hideAvatar"},"+",P.length-T.length))))}function z(B){var x=B.data,Q=B.formWidth,i=B.appId,m=B.projectId,v=B.onAction,W=B.onRevoke,P=B.onUrge,u=B.onViewFlowStep,l=B.onViewExecDialog,T=x.currents,G=x.createDate,D=x.completeDate,M=x.completed,se=x.createAccount,ae=x.flowNode,ne=x.workItem,de=x.process,Ce=x.currentWorkItems||[],he=ie().get(ne,"receiveTime")||ie().get(Ce[0],"receiveTime"),fe=!!(T||[]).length,Ee=function(){var ue=T[0],pe=ue.allowRevoke,Se=ue.allowApproval,ye=ue.workItem;return fe&&(pe&&Se||ye?!1:pe)},Y=function(){w?d().alert(_l("\u786E\u8BA4\u64A4\u56DE\u6B64\u6761\u6D41\u7A0B ?"),"",[{text:_l("\u53D6\u6D88")},{text:_l("\u786E\u8BA4"),onPress:function(){return W(T[0])}}]):a.Z.confirm({title:_l("\u786E\u8BA4\u64A4\u56DE\u6B64\u6761\u6D41\u7A0B ?"),onOk:function(){return W(T[0])}})},oe=function(ue){var pe=ue.flowNode,Se=pe||{},ye=Se.name;return f.createElement("div",{className:C()("flexColumn itemWrapper",{mTop18:!fe}),onClick:fe?function(){return u(ue)}:void 0},ye&&f.createElement("div",{className:"flexRow valignWrapper mBottom12"},f.createElement("div",{className:"flexRow valignWrapper flex"},f.createElement("div",{className:"Font13 Gray_9e label"},_l("\u5F53\u524D\u8282\u70B9")),f.createElement("div",{className:"flowNodeName"},ye)),fe&&N(ue)),f.createElement(h,{data:ue,formWidth:Q,appId:i,projectId:m}),he&&f.createElement("div",{className:"flexRow valignWrapper mBottom12"},f.createElement("div",{className:"Font13 Gray_9e label"},_l("\u5904\u7406\u5F00\u59CB")),f.createElement("div",null,(0,ee.LX)(he))),D&&f.createElement("div",{className:"flexRow valignWrapper mBottom12"},f.createElement("div",{className:"Font13 Gray_9e label"},_l("\u5B8C\u6210\u65F6\u95F4")),f.createElement("div",null,(0,ee.LX)(D))),M&&K(ue),F(ue))};return f.createElement("div",{className:C()("workflowCard",w?"mBottom10":"mBottom18")},f.createElement("div",{className:C()({pointer:!fe}),onClick:fe?void 0:function(){return u(x)}},f.createElement("div",{className:"flexRow valignWrapper"},f.createElement(Z.Z,{size:32,user:{userHead:se.avatar,accountId:se.accountId},appId:i,projectId:m}),f.createElement("div",{className:"flexColumn flex mLeft10"},f.createElement("div",{className:"Font15 bold Gray"},de.name),f.createElement("div",{className:"Font13 Gray_9e"},_l("%0 \u4E8E %1 \u53D1\u8D77",se.accountId===md.global.Account.accountId?_l("\u6211"):se.fullName,createTimeSpan((0,ee.LX)(G))))),fe&&Ee()&&f.createElement("div",{className:"ThemeColor bold Font14 pointer",onClick:Y},_l("\u64A4\u56DE")),!fe&&N(x)),fe&&f.createElement(f.Fragment,null,f.createElement("div",{className:"branchNode",style:{margin:"5px 0 5px 43px"}},_l("%0\u4E2A\u8282\u70B9\u529E\u7406\u4E2D...",(T||[]).length)),f.createElement("div",{className:"branchNodeLine"})),fe?T.map(function(ve){return ve.parentCurrents=T,ve}).map(function(ve,ue){return f.createElement(f.Fragment,{key:ve.workId},f.createElement("div",{className:C()("branchWrap pointer",{hover:!w})},oe(ve),f.createElement(k.Z,(0,y.default)({className:C()("mTop20",{mBottom5:ue!==T.length-1}),projectId:m,isBranch:fe,data:ve},{onAction:v,onRevoke:W,onUrge:P,onViewExecDialog:l}))),ue!==T.length-1&&f.createElement("div",{className:"branchWrapLine"}))}):oe(x)),!fe&&!M&&f.createElement(k.Z,(0,y.default)({className:"mTop20",projectId:m,isBranch:fe,data:x},{onAction:v,onRevoke:W,onUrge:P,onViewExecDialog:l})))}function X(B){var x=B.isCharge,Q=B.projectId,i=B.worksheetId,m=B.recordId,v=B.formWidth,W=B.refreshBtnNeedLoading,P=B.appId,u=(0,f.useState)(!0),l=(0,H.Z)(u,2),T=l[0],G=l[1],D=(0,f.useState)([]),M=(0,H.Z)(D,2),se=M[0],ae=M[1],ne=(0,f.useState)({}),de=(0,H.Z)(ne,2),Ce=de[0],he=de[1],fe=(0,f.useState)(!1),Ee=(0,H.Z)(fe,2),Y=Ee[0],oe=Ee[1],ve=(0,f.useState)(null),ue=(0,H.Z)(ve,2),pe=ue[0],Se=ue[1],ye=(0,f.useState)(!1),J=(0,H.Z)(ye,2),me=J[0],be=J[1],xe=function(){return new(R())(function(pt,ot){G(!0);var vt={startAppId:i,startSourceId:m};R().all([n.Z.getTodoList2(vt),n.Z.getTodoList2((0,y.default)({},vt,{complete:!0}))]).then(function(At){var yt=(0,H.Z)(At,2),st=yt[0],St=yt[1],Qe=st.concat(St.map(function(Ke){return(0,y.default)({},Ke,{completed:!0})}));if(ae(Qe),G(!1),Qe.length===1&&st.length===1){var Xe=Qe[0];if(ie().get(Xe,"currents.length")){var $e=Xe.currents.filter(function(Ke){var Ue=Ke.currentWorkItems.map(function(He){return He.workItemAccount.accountId});return Ue.includes(md.global.Account.accountId)});ke($e[0]||Xe.currents[0])}else ke(Xe)}else pt(Qe)})})},Ae=function(pt,ot){var vt=pt.workItem?n.Z.get:n.Z.get2;return vt({id:pt.id,workId:pt.workId}).then(function(At){he((0,y.default)({},At,ot,{cardData:pt}))})},Ne=function(pt){var ot=pt.action,vt=pt.content,At=pt.userId,yt=pt.backNodeId,st=pt.signature,St=pt.files;ie().includes(["pass","overrule","return"],ot)&&Me(q.SJ[ot==="return"?"overrule":ot],{opinion:vt,backNodeId:yt,signature:st,files:St}).then(function(){be(!1),Fe(),xe().then(function(Qe){var Xe=Ce.cardData;if(Y){var $e=ie().find(Qe,{id:Xe.id});$e&&ke($e)}})})},Me=function(pt){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},vt=Ce.cardData||{},At=vt.id,yt=vt.workId;return O.Z[pt]((0,y.default)({id:At,workId:yt},ot))},Fe=function(){oe(!1),he({})},Be=function(pt,ot){Ae(pt,{value:ot}).then(function(){be(!0)})},we=function(pt){Me("revoke",{id:pt.id,workId:pt.revokeWorkId}).then(function(ot){ot&&(alert(_l("\u64A4\u56DE\u6210\u529F")),ae(se.filter(function(vt){return vt.id!==pt.id})),Fe())})},Ie=function(pt){Me("operation",{id:pt.id,operationType:18}).then(function(ot){if(ot){window["urgeDisable-workId-"+pt.workId]=!0;var vt=Ce.cardData,At=vt===void 0?{}:vt;At.workId===pt.workId&&he((0,y.default)({},Ce,{cardData:(0,y.default)({},At,{urgeDisable:!0})})),ae(se.map(function(yt){if(yt.id===pt.id){if(ie().get(yt,"currents.length")){var st=yt.currents.map(function(St){return St.workId===pt.workId?(0,y.default)({},St,{urgeDisable:!0}):St});return(0,y.default)({},yt,{currents:st})}return(0,y.default)({},yt,{urgeDisable:!0})}else return yt})),alert(_l("\u50AC\u529E\u6210\u529F"))}})},ge=function(pt){Me("operation",{id:pt.id,operationType:15}).then(function(ot){ot&&(alert(_l("\u5DF2\u8DF3\u8FC7\u5F53\u524D\u8282\u70B9")),Fe(),xe().then(function(vt){var At=Ce.cardData,yt=ie().find(vt,{id:At.id});yt&&ke(yt)}))})},Re=function(pt,ot){Me("operation",{id:pt.id,operationType:14,forwardAccountId:ot.join(",")}).then(function(vt){vt&&(alert(_l("\u64CD\u4F5C\u6210\u529F")),Fe(),xe().then(function(At){var yt=Ce.cardData,st=ie().find(At,{id:yt.id});st&&ke(st)}))})},Pe=function(pt){n.Z.endInstance({instanceId:pt.id}).then(function(ot){ot&&(alert(_l("\u64CD\u4F5C\u6210\u529F")),Fe(),xe())})},ke=function(pt){Ae(pt,{processId:pt.process.id,workItem:pt.workItem,completed:pt.completed}).then(function(){oe(!0)})},We=function(pt){Se({id:pt.id,workId:pt.workId})};(0,f.useEffect)(function(){Fe(),xe()},[m]),(0,f.useEffect)(function(){W&&(Fe(),xe())},[W]);var Ve=function(){var pt=Ce.processId,ot=Ce.cardData,vt=ot===void 0?{}:ot,At=Ce.processName,yt=Ce.works,st=yt===void 0?[]:yt,St=Ce.workItem,Qe=Ce.currentWorkItem,Xe=Ce.status,$e=vt.id,Ke=vt.workId,Ue=vt.flowNode,He=vt.completed,ze=vt.parentCurrents,gt=ze===void 0?[]:ze,Et=gt.length?ie().find(gt,{workId:Ke}):Ce.currentWork;return f.createElement("div",{className:"h100 flexColumn"},f.createElement(s.Z,{processId:pt,instanceId:$e,processName:At,hasBack:!0,currentWork:Et,onClose:Fe,isApproval:!0}),!!gt.length&&f.createElement("div",{className:"branchNode",style:{margin:w?"3px 0px 6px 35px":"3px 0px 6px 55px"}},_l("%0\u4E2A\u8282\u70B9\u529E\u7406\u4E2D...",gt.length)),f.createElement(L.Z,{className:"flex"},f.createElement(j.Z,{worksheetId:i,rowId:m,currentWork:Et,currentType:ie().get(Et,"flowNode.type"),currents:gt.map(function(ft){return ft.workId}),onChangeCurrentWork:function(qe){var nt=ie().find(gt,{workId:qe});he((0,y.default)({},Ce,{cardData:(0,y.default)({},nt,{workId:qe})}))},works:st,status:Xe,appId:P,projectId:Q})),$e&&!He&&f.createElement("div",{className:C()("workflowStepFooter flexColumn justifyContentCenter",w?"pLeft10 pRight10":"")},f.createElement("div",{className:"mLeft1 Font13 Gray_75"},ie().get(Et,"flowNode.name")),f.createElement(k.Z,{className:"mBottom2 mTop5",hasMore:!0,isCharge:x,isBranch:!!gt.length,projectId:Q,data:vt,onAction:Be,onRevoke:we,onUrge:Ie,onSkip:ge,onEndInstance:Pe,onUpdateWorkAccounts:Re,onViewFlowStep:ke,onViewExecDialog:We})))},it=w?f.Fragment:L.Z;return f.createElement("div",{className:"h100 w100 sheetWorkflowWrapper Relative"},T?f.createElement(p.Z,{className:"pTop20"}):f.createElement(it,null,f.createElement("div",{className:C()(w?"pAll10 h100":"pAll20")},se.length?se.map(function(Ge){return f.createElement(z,{key:Ge.id,projectId:Q,appId:P,formWidth:v,data:Ge,onAction:Be,onRevoke:we,onUrge:Ie,onViewFlowStep:ke,onViewExecDialog:We})}):w?f.createElement("div",{className:"flexColumn valignWrapper h100 withoutData"},f.createElement(U.Z,{className:"Font70",icon:"examination_approval_color"}),f.createElement("div",{className:"Font18 Gray_bd mTop20"},_l("\u6682\u65E0\u5BA1\u6279\u6D41\u7A0B"))):f.createElement("div",{className:"mTop5 mLeft4 Gray_bd Font13"},_l("\u6682\u65E0\u5BA1\u6279\u6D41\u7A0B")))),f.createElement(g.Z,{placement:"right",width:w?"85%":"100%",zIndex:w?999:10,className:"sheetWorkflowDrawer",closable:!1,getContainer:w?function(){return document.body}:!1,mask:w,push:!1,style:{position:"absolute"},onClose:Fe,visible:Y},Ve()),pe&&(w?f.createElement(S.default,{isModal:!0,visible:!0,instanceId:pe.id,workId:pe.workId,onClose:function(){Se(null)}}):f.createElement(A.Z,{id:pe.id,workId:pe.workId,onClose:function(){Se(null)},onSave:function(){Fe(),xe()}})),me&&(w?f.createElement(c.Z,{projectId:Q,visible:me,action:Ce.value,selectedUser:{},instance:Ce,onAction:Ne,onHide:function(){be(!1)}}):f.createElement(I.Z,{projectId:Q,data:Ce,action:Ce.value,onOk:Ne,onCancel:function(){be(!1)}})))}},74996:(lt,Te,t)=>{"use strict";t.d(Te,{At:()=>j,BX:()=>o,MT:()=>C,Q3:()=>d,Z8:()=>A,_V:()=>s,du:()=>O,iR:()=>Z,pf:()=>U,qY:()=>n,qs:()=>V,zJ:()=>H});var ce=t(88239),g=t(52945),p=t.n(g),L=t(88902),te=t.n(L);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(62023);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(42638);var a=t(96486),r=t.n(a),o=function(I){return function(c,q){y.Z.getProcessPublish({processId:I},{isIntegration:location.href.indexOf("integration")>-1}).then(function(b){c({type:"GET_FLOW_INFO",data:b})})}},d=function(I,c,q,b){return function(k,ee){y.Z.updateProcess({companyId:I,processId:c,name:q,explain:b}).then(function(re){k({type:"UPDATE_PROCESS",data:re})})}},Z=function(I){return function(c,q){var b=q().workflow.workflowDetail;c({type:"UPDATE_PUBLIC_STATE",obj:I}),!I.pending&&I.state!==13&&H(b.id,null)(c)}},H=function S(I){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return function(q,b){R.Z.get({processId:I,count:c},{isIntegration:location.href.indexOf("integration")>-1}).then(function(k){var ee=c&&te()(k.flowNodeMap).length>c;q({type:"GET_PROCESS_INFO",data:p()({},k,{isSimple:ee})}),ee&&S(I,null)(q)})}},U=function(){return function(I,c){I({type:"CLEAR_FLOW_SOURCE"}),I({type:"CLEAR_SOURCE"})}},f=function(I,c){var q=void 0;return te()(I).forEach(function(b){I[b].processNode&&I[b].processNode.id===c&&(q=b)}),q},V=function(I,c){var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};return function(b,k){R.Z.add((0,ce.default)({processId:I},c)).then(function(ee){var re=r().cloneDeep(k().workflow),ie=re.workflowDetail;if(ie.id!==I){var le=f(ie.flowNodeMap,I);le&&ee.addFlowNodes.concat(ee.updateFlowNodes).forEach(function(E){(ie.flowNodeMap[le].processNode.flowNodeMap[E.id]||{}).appType===9?ie.flowNodeMap[le].processNode.flowNodeMap[E.id].nextId=E.nextId:ie.flowNodeMap[le].processNode.flowNodeMap[E.id]=E})}else ee.addFlowNodes.concat(ee.updateFlowNodes).forEach(function(E){ie.flowNodeMap[E.id]=E});b({type:"ADD_FLOW_NODE",data:ie}),b({type:"UPDATE_PUBLISH_STATUS",publishStatus:1}),q(ee.addFlowNodes[0].id)})}},C=function(I,c){return function(q,b){R.Z.delete({nodeId:c,processId:I}).then(function(k){var ee=r().cloneDeep(b().workflow),re=ee.workflowDetail;if(re.id!==I){var ie=f(re.flowNodeMap,I);ie&&(k.deleteFlowNodes.forEach(function(le){delete re.flowNodeMap[ie].processNode.flowNodeMap[le.id]}),k.updateFlowNodes.forEach(function(le){(re.flowNodeMap[ie].processNode.flowNodeMap[le.id]||{}).appType===9?re.flowNodeMap[ie].processNode.flowNodeMap[le.id].nextId=le.nextId:re.flowNodeMap[ie].processNode.flowNodeMap[le.id]=le}))}else k.deleteFlowNodes.forEach(function(le){delete re.flowNodeMap[le.id]}),k.updateFlowNodes.forEach(function(le){re.flowNodeMap[le.id]=le});q({type:"DELETE_FLOW_NODE",data:re}),q({type:"UPDATE_PUBLISH_STATUS",publishStatus:1})})}},O=function(I,c,q){return function(b,k){R.Z.updateFlowNodeName({nodeId:c,processId:I,name:q}).then(function(ee){var re=r().cloneDeep(k().workflow),ie=re.workflowDetail;if(ie.id!==I){var le=f(ie.flowNodeMap,I);ie.flowNodeMap[le].processNode.flowNodeMap[c].name=q}else ie.flowNodeMap[c].name=q;b({type:"UPDATE_FLOW_NODE_NAME",data:ie}),b({type:"UPDATE_PUBLISH_STATUS",publishStatus:1})})}},n=function(I,c){return function(q,b){var k=r().cloneDeep(b().workflow),ee=k.workflowDetail;if(ee.id!==I){var re=f(ee.flowNodeMap,I);ee.flowNodeMap[re].processNode.flowNodeMap[c.id]=c}else ee.flowNodeMap[c.id]=c;q({type:"UPDATE_NODE_DATA",data:ee}),q({type:"UPDATE_PUBLISH_STATUS",publishStatus:1})}},s=function(I,c,q,b){return function(k,ee){var re=r().cloneDeep(ee().workflow),ie=re.workflowDetail;if(ie.id!==I){var le=f(ie.flowNodeMap,I);ie.flowNodeMap[le].processNode.flowNodeMap[c].alias=q,ie.flowNodeMap[le].processNode.flowNodeMap[c].desc=b}else ie.flowNodeMap[c].alias=q,ie.flowNodeMap[c].desc=b;k({type:"UPDATE_NODE_DATA",data:ie}),k({type:"UPDATE_PUBLISH_STATUS",publishStatus:1})}},j=function(I,c,q){return function(b,k){R.Z.saveNode({nodeId:c,processId:I,gatewayType:q}).then(function(ee){var re=r().cloneDeep(k().workflow),ie=re.workflowDetail;if(ie.id!==I){var le=f(ie.flowNodeMap,I);ie.flowNodeMap[le].processNode.flowNodeMap[c].gatewayType=q}else ie.flowNodeMap[c].gatewayType=q;b({type:"UPDATE_NODE_GATEWAY",data:ie}),b({type:"UPDATE_PUBLISH_STATUS",publishStatus:1})})}},A=function(I,c,q){return function(b,k){R.Z.saveNode({nodeId:c,processId:I,flowIds:q}).then(function(ee){var re=r().cloneDeep(k().workflow),ie=re.workflowDetail;if(ie.id!==I){var le=f(ie.flowNodeMap,I);ie.flowNodeMap[le].processNode.flowNodeMap[c].flowIds=q}else ie.flowNodeMap[c].flowIds=q;b({type:"UPDATE_BRANCH_SORT",data:ie}),b({type:"UPDATE_PUBLISH_STATUS",publishStatus:1})})}}},88349:(lt,Te,t)=>{"use strict";t.d(Te,{W:()=>V,r:()=>f});var ce=t(63239),g=t.n(ce),p=t(46593),L=t.n(p),te=t(88239);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(5505);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(86674);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(89499);var o=t(96486),d=t.n(o);if(!/^(1887|7596|7798)$/.test(t.j))var Z=t(62232);if(!/^(1887|7596|7798)$/.test(t.j))var H=t(15577);function U(C){var O=C.advancedSetting,n=O===void 0?{}:O,s=d().get(window,"shareState.isPublicForm")&&window.shareState.shareId;return s&&C.type===29&&(n.allowlink="0",n.allowedit="0",d().includes(["2","5","6"],C.advancedSetting.showtype)&&(0,H.Q9)()?n=(0,te.default)({},n,{showtype:"1",originShowType:C.advancedSetting.showtype}):d().includes(["2","6"],d().get(C,"advancedSetting.showtype"))&&(n=(0,te.default)({},n,{showtype:"5"}))),n}function f(C,O){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new(L())(function(s,j){O||(C.getTemplate=!0);var A=d().get(window,"shareState.isPublicForm")&&window.shareState.shareId;(A?y.Z.getRowDetail({rowId:C.rowId,worksheetId:C.worksheetId,getType:1,checkView:!0,getTemplate:!0}):R.Z.getRowDetail(C,n)).then(function(S){var I=safeParse(S.rowData),c=safeParse(I.controlpermissions);S.formData=(O||(0,r.zj)(S.appId,S.templateControls||[]).concat(a.cU)||[]).map(function(q){return(0,te.default)({},q,{controlPermissions:c[q.controlId]||q.controlPermissions,dataSource:q.dataSource||"",value:I[q.controlId],hidden:d().includes(a.gs,q.controlId),count:I["rq"+q.controlId],required:(0,Z.YU)(q)?!1:q.required,advancedSetting:U(q)})}),s(S)}).catch(j)})}function V(C){var O=C.appId,n=C.viewId,s=C.worksheetId,j=C.recordId,A=C.controlId,S=C.attachment,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},c=[{fileId:S.fileId||S.fileID,originalFilename:S.originalFilename}];R.Z.updateWorksheetRow({appId:O,viewId:n,worksheetId:s,rowId:j,newOldControl:[{controlId:A,editType:2,value:g()(S.refId?{knowledgeAtts:c}:{attachments:c})}]}).then(function(q){return q.resultCode===1?I(null,q.data):I(q.resultCode)}).catch(I)}},37139:(lt,Te,t)=>{"use strict";t.d(Te,{O:()=>H});var ce=t(46593),g=t.n(ce),p=t(63239),L=t.n(p),te=t(99663),R=t(22600),y=t(5274),a=t(96486),r=t.n(a),o=t(70714);function d(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=U.action,V=U.controller,C=U.data,O=U.abortController,n=(0,o.qz)(),s={authorization:n?"md_pss_id "+n:""},j=window.clientId||sessionStorage.getItem("clientId");return window.needSetClientId({clientId:j,controllerName:V})&&(s.clientId=j),window.access_token&&(s.access_token=window.access_token,s.Authorization="access_token "+window.access_token),y.Z.post(window.__api_server__.main.replace(/\/$/,"")+"/"+V+"/"+f,C,{headers:s,signal:O&&O.signal}).then(function(A){if(A.data.state)return A.data.data;throw new Error(A.data.exception)})}var Z=function(){function U(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},V=f.abortController,C=f.maxConcurrentRequests,O=C===void 0?3:C;(0,te.default)(this,U),this.queues={},this.abortController=V,this.maxConcurrentRequests=O,this.init()}return(0,R.default)(U,[{key:"init",value:function(){var V=this.abortController;V&&V.signal.addEventListener("abort",function(){})}},{key:"enqueue",value:function(V,C){this.queues[V]||(this.queues[V]={queue:[],concurrentRequests:0});var O=this.queues[V];O.queue.push(C),this.processQueue(V)}},{key:"dequeue",value:function(V){var C=this.queues[V];return C.queue.shift()}},{key:"processQueue",value:function(V){var C=this.queues[V];if(C.concurrentRequests===0&&(C.cache=void 0),!(C.concurrentRequests>=this.maxConcurrentRequests||C.queue.length===0)){var O=this.dequeue(V);this.sendRequest(V,O)}}},{key:"sendRequest",value:function(V,C){var O=this,n=this.queues[V];n.concurrentRequests++;var s=L()(C.options);if(n&&n.cache&&n.cache[s]){C.resolve(n.cache[s]),n.concurrentRequests--,this.processQueue(V);return}d(C.options).then(function(j){n.cache||(n.cache={}),n.cache[s]=j,C.resolve(j)}).catch(function(j){C.reject(j)}).finally(function(){n.concurrentRequests--,O.processQueue(V)})}},{key:"fetch",value:function(){var V=this,C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},O=C.action,n=C.controller,s=C.data,j=C.abortController;return new(g())(function(A,S){V.enqueue(n+O,{resolve:A,reject:S,options:{action:O,controller:n,data:s,abortController:j}})})}}]),U}();function H(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=U.abortController,V=new Z({abortController:f});return{getRowDetail:function(O){var n="Worksheet",s="GetRowDetail";return V.fetch({action:s,controller:n,data:O,abortController:f})},getFilterRowsByQueryDefault:function(O){var n="Worksheet",s="GetFilterRowsByQueryDefault";return V.fetch({action:s,controller:n,data:O,abortController:f})}}}},53280:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>b});var ce=t(8177),g=t.n(ce),p=t(85105),L=t.n(p),te=t(99663),R=t(22600),y=t(49135),a=t(93196),r=t(86735),o=t(67294),d=t(45697),Z=t.n(d),H=t(44894),U=t(71893),f,V,C,O,n,s=(0,r.Z)([`
  position: absolute;
  width: 100%;
  height: 100%;
  background-color: rgba(255, 255, 255, 0.4);
  z-index: 20;
`],[`
  position: absolute;
  width: 100%;
  height: 100%;
  background-color: rgba(255, 255, 255, 0.4);
  z-index: 20;
`]),j=(0,r.Z)([`
  position: absolute;
  cursor: ew-resize;
  width: 2px;
  height: 100%;
  background-color: #2196f3;
`],[`
  position: absolute;
  cursor: ew-resize;
  width: 2px;
  height: 100%;
  background-color: #2196f3;
`]),A=(0,r.Z)([`
  position: absolute;
  cursor: ns-resize;
  width: 100%;
  height: 2px;
  background-color: #2196f3;
`],[`
  position: absolute;
  cursor: ns-resize;
  width: 100%;
  height: 2px;
  background-color: #2196f3;
`]);function S(k,ee,re,ie,le){var E={};return Object.keys(ie).forEach(function(w){E[w]=ie[w]}),E.enumerable=!!E.enumerable,E.configurable=!!E.configurable,("value"in E||E.initializer)&&(E.writable=!0),E=re.slice().reverse().reduce(function(w,K){return K(k,ee,w)||w},E),le&&E.initializer!==void 0&&(E.value=E.initializer?E.initializer.call(le):void 0,E.initializer=void 0),E.initializer===void 0&&(Object.defineProperty(k,ee,E),E=null),E}var I=U.ZP.div(s),c=U.ZP.div(j),q=U.ZP.div(A),b=(C=(n=O=function(k){(0,a.default)(ee,k);function ee(re){(0,te.default)(this,ee);var ie=(0,y.default)(this,(ee.__proto__||L()(ee)).call(this,re));return ie.value=re.value,ie.random=Math.random(),ie}return(0,R.default)(ee,[{key:"componentDidMount",value:function(){var ie=this,le=this.props,E=le.min,w=E===void 0?280:E,K=le.max,N=K===void 0?800:K,F=le.direction;this.mask&&setTimeout(function(){ie.mask.addEventListener("mousemove",function(h){F==="horizontal"?h.target===ie.mask&&h.offsetX>w&&h.offsetX<N&&(ie.value=h.offsetX,ie.drag.style.left=h.offsetX+"px"):h.target===ie.mask&&h.offsetY>w&&h.offsetY<N&&(ie.value=h.offsetY,ie.drag.style.top=h.offsetY+"px")}),document.body.addEventListener("mouseup",ie.handleChange)},1)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("mouseup",this.handleChange)}},{key:"handleChange",value:function(){var ie=this.props.onChange;ie(this.value)}},{key:"render",value:function(){var ie=this,le=this.props.direction;return o.createElement(I,{style:{cursor:le==="horizontal"?"ew-resize":"ns-resize"},ref:function(w){return ie.mask=w}},le==="horizontal"&&o.createElement(c,{ref:function(w){return ie.drag=w},style:{left:this.value}}),le==="vertical"&&o.createElement(q,{ref:function(w){return ie.drag=w},style:{top:this.value}}))}}]),ee}(o.Component),O.propTypes={direction:Z().string,value:Z().number,min:Z().number,max:Z().number,onChange:Z().func},O.defaultProps={direction:"horizontal"},n),S(C.prototype,"handleChange",[H.Nj],g()(C.prototype,"handleChange"),C.prototype),C)},75314:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>f});var ce=t(94942),g=t.n(ce),p=t(36803),L=t(88239),te=t(12424),R=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(85611);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(23557);if(!/^(1887|7596|7798)$/.test(t.j))var o=t(13476);if(!/^(1887|7596|7798)$/.test(t.j))var d=t(16542);var Z=t(96486),H=t.n(Z),U=200;function f(V){var C=this,O=function(){var ae=(0,p.Z)(g().mark(function ne(de){var Ce=function(){var he=(0,p.Z)(g().mark(function fe(Ee){var Y,oe;return g().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return Y=x.current.map(function(pe,Se){return{value:(0,r.U0)({printType:de.printType,sourceType:de.sourceType,sourceControlId:de.sourceControlId,row:pe,urls:Ee,index:Se,controls:c}),texts:(0,r.jn)({showTexts:de.showTexts,showControlName:de.showControlName,controls:c,firstIsBold:de.firstIsBold},pe)}}),oe=new d.Q({printType:de.printType,layout:de.layout,printData:Y,correctLevel:de.codeFaultTolerance||1,config:de}),ue.next=4,oe.render();case 4:l(oe.doc.output("bloburl")),B(!1);case 6:case"end":return ue.stop()}},fe,this)}));return function(Ee){return he.apply(this,arguments)}}();return g().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:de.sourceType===o.FW.URL&&de.sourceUrlType===o.Uk.PUBLIC?y.Z.getRowsShortUrl({appId:s,viewId:A,worksheetId:j,rowIds:x.current.map(function(Ee){return Ee.rowid})}).then(function(Ee){Ee&&H().isObject(Ee)&&Ce(Ee)}):de.sourceType===o.FW.URL&&de.sourceUrlType===o.Uk.MEMBER?Ce(x.current.map(function(Ee){return location.origin+"/app/"+s+"/"+j+"/"+A+"/row/"+Ee.rowid})):de.sourceType===o.FW.CONTROL&&(de.sourceControlId?Ce():alert(_l("\u8BF7\u9009\u62E9\u6570\u636E\u6765\u6E90\u5B57\u6BB5"),3));case 1:case"end":return fe.stop()}},ne,this)}));return function(de){return ae.apply(this,arguments)}}(),n=V.config,s=V.appId,j=V.worksheetId,A=V.viewId,S=V.templateId,I=V.projectId,c=V.controls,q=V.zIndex,b=V.selectedRows,k=V.count,ee=V.allowLoadMore,re=V.filterControls,ie=V.fastFilters,le=V.navGroupFilters,E=V.onClose,w=(0,R.useState)(n&&(0,L.default)({},n)),K=(0,te.Z)(w,2),N=K[0],F=K[1],h=(0,R.useState)(!0),z=(0,te.Z)(h,2),X=z[0],B=z[1],x=(0,R.useRef)(b),Q=(0,R.useState)(1),i=(0,te.Z)(Q,2),m=i[0],v=i[1],W=(0,R.useState)(),P=(0,te.Z)(W,2),u=P[0],l=P[1],T=(0,R.useState)(V.name),G=(0,te.Z)(T,2),D=G[0],M=G[1];function se(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};B(!0),y.Z.getFilterRows({worksheetId:j,viewId:A,pageSize:U,pageIndex:ae,status:1,appId:s,filterControls:re,fastFilters:ie,navGroupFilters:le}).then(function(de){x.current=de.data,ne()})}return(0,R.useEffect)(function(){function ae(ne){ee?se(1,function(){return O(ne)}):O(ne)}N?ae(N):y.Z.getCodePrint({id:S,projectId:I}).then(function(){var ne=(0,p.Z)(g().mark(function de(Ce){return g().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:F(Ce.config),M(Ce.name),ae(Ce.config);case 3:case"end":return fe.stop()}},de,C)}));return function(de){return ne.apply(this,arguments)}}())},[]),R.createElement(a.Z,{allowLoadMore:ee,pageIndex:m,pageSize:U,count:k,zIndex:q,loading:X,name:D,embedUrl:u,onPrev:function(){v(m-1),se(m-1,function(){return O(N)})},onNext:function(){v(m+1),se(m+1,function(){return O(N)})},onClose:E})}},85611:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>n});var ce=t(86735),g=t(67294),p=t(20559),L=t.n(p),te=t(71893),R=t(42541),y=(0,ce.Z)([`
  position: fixed;
  top: 0px;
  left: 0px;
  height: 100vh;
  width: 100%;
  display: flex;
  flex-direction: column;
  z-index: 999;
`],[`
  position: fixed;
  top: 0px;
  left: 0px;
  height: 100vh;
  width: 100%;
  display: flex;
  flex-direction: column;
  z-index: 999;
`]),a=(0,ce.Z)([`
  display: flex;
  height: 50px;
  padding: 0 10px 0 20px;
  background-color: #fff;
  justify-content: space-between;
  box-shadow: 0px 1px 3px #00000029;
  z-index: 2;
  align-items: center;
  .name {
    font-size: 17px;
    line-height: 50px;
    font-weight: bold;
    color: #333333;
    max-width: 100%;
  }
  .close {
    cursor: pointer;
    font-size: 24px;
    line-height: 50px;
    padding: 0 10px;
    color: #444;
    &:hover {
      color: #222;
    }
  }
`],[`
  display: flex;
  height: 50px;
  padding: 0 10px 0 20px;
  background-color: #fff;
  justify-content: space-between;
  box-shadow: 0px 1px 3px #00000029;
  z-index: 2;
  align-items: center;
  .name {
    font-size: 17px;
    line-height: 50px;
    font-weight: bold;
    color: #333333;
    max-width: 100%;
  }
  .close {
    cursor: pointer;
    font-size: 24px;
    line-height: 50px;
    padding: 0 10px;
    color: #444;
    &:hover {
      color: #222;
    }
  }
`]),r=(0,ce.Z)([`
  display: flex;
  font-size: 13px;
  color #333;
  align-items: center;
  .info {
    margin-right: 8px;
  }
  .switchBtn {
    width: 24px;
    height: 24px;
    font-size: 16px;
    border-radius: 3px;
    cursor: pointer;
    margin-right: 8px;
    &:not(.disabled):hover {
      color: #2196F3;
      background: #F5F5F5;
    }
    &.disabled {
      cursor: not-allowed;
      color: #BDBDBD;
    }
  }
`],[`
  display: flex;
  font-size: 13px;
  color #333;
  align-items: center;
  .info {
    margin-right: 8px;
  }
  .switchBtn {
    width: 24px;
    height: 24px;
    font-size: 16px;
    border-radius: 3px;
    cursor: pointer;
    margin-right: 8px;
    &:not(.disabled):hover {
      color: #2196F3;
      background: #F5F5F5;
    }
    &.disabled {
      cursor: not-allowed;
      color: #BDBDBD;
    }
  }
`]),o=(0,ce.Z)([`
  flex: 1;
  background: #eaeaea;
`],[`
  flex: 1;
  background: #eaeaea;
`]),d=(0,ce.Z)([`
  text-align: center;
  color: #9e9e9e;
  .icon {
    display: inline-block;
    font-size: 24px;
    animation: `,` 0.6s infinite linear;
  }
  p {
    font-size: 14px;
    margin-top: 5px;
  }
`],[`
  text-align: center;
  color: #9e9e9e;
  .icon {
    display: inline-block;
    font-size: 24px;
    animation: `,` 0.6s infinite linear;
  }
  p {
    font-size: 14px;
    margin-top: 5px;
  }
`]),Z=(0,ce.Z)([`
  width: 100%;
  height: 100%;
  `,`
`],[`
  width: 100%;
  height: 100%;
  `,`
`]),H=te.ZP.div(y),U=te.ZP.div(a),f=te.ZP.div(r),V=(0,te.ZP)(R.Lb)(o),C=te.ZP.div(d,R.U1),O=te.ZP.div(Z,function(s){var j=s.loading;return j?"display: none;":""});function n(s){var j=s.name,A=j===void 0?_l("\u6253\u5370"):j,S=s.loading,I=s.embedUrl,c=s.allowLoadMore,q=s.pageIndex,b=q===void 0?1:q,k=s.pageSize,ee=k===void 0?200:k,re=s.count,ie=re===void 0?0:re,le=s.onPrev,E=le===void 0?function(){}:le,w=s.onNext,K=w===void 0?function(){}:w,N=s.onClose,F=N===void 0?function(){}:N,h=S||b<=1,z=S||b>=Math.ceil(ie/ee),X=(0,g.useRef)();(0,g.useEffect)(function(){I&&L().embed(I,X.current)},[S]);function B(x){x.stopPropagation(),x.keyCode===27&&F()}return(0,g.useEffect)(function(){return window.addEventListener("keydown",B),function(){window.removeEventListener("keydown",B)}},[]),g.createElement(H,{className:"doNotTriggerClickAway",style:s.zIndex?{zIndex:s.zIndex}:{}},g.createElement(U,null,g.createElement("span",{className:"name ellipsis"},A),c&&g.createElement(f,null,g.createElement("span",{className:"info"},_l("\u7B2C %0-%1 \u4E2A\uFF0C\u5171 %2 \u4E2A",(b-1)*ee+1,b*ee>ie?ie:b*ee,ie)),g.createElement(R.Lb,{className:"switchBtn prev "+(h?"disabled":""),onClick:function(){return!h&&E()}},g.createElement("i",{className:"icon icon-arrow-left-border"})),g.createElement(R.Lb,{className:"switchBtn next "+(z?"disabled":""),onClick:function(){return!z&&K()}},g.createElement("i",{className:"icon icon-arrow-right-border"}))),g.createElement("i",{className:"icon icon-close close",onClick:F})),g.createElement(V,null,S&&g.createElement(C,null,g.createElement("i",{className:"icon icon-loading_button"}),g.createElement("p",null,_l("\u6B63\u5728\u751F\u6210\u6253\u5370\u6587\u4EF6\xB7\xB7\xB7"))),g.createElement(O,{loading:S,ref:X})))}},58887:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>S});var ce=t(86735),g=t(67294),p=t(71893);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(13476);var te=t(40945),R=t.n(te),y=t(31611),a=t.n(y),r=t(41736),o=t.n(r),d=t(57753),Z=t.n(d),H=t(75362),U=t.n(H),f=(0,ce.Z)([`
  flex: 1;
  height: 100%;
  background: #eaeaea;
  display: flex;
  justify-content: center;
  align-items: center;
`],[`
  flex: 1;
  height: 100%;
  background: #eaeaea;
  display: flex;
  justify-content: center;
  align-items: center;
`]),V=(0,ce.Z)([`
  box-shadow: 0px 3px 6px 1px rgba(0, 0, 0, 0.16);
  border-radius: 12px;
  overflow: hidden;
  font-size: 0px;
  canvas {
    width: 100% !important;
    height: 100% !important;
  }
`],[`
  box-shadow: 0px 3px 6px 1px rgba(0, 0, 0, 0.16);
  border-radius: 12px;
  overflow: hidden;
  font-size: 0px;
  canvas {
    width: 100% !important;
    height: 100% !important;
  }
`]),C=(0,ce.Z)([`
  margin: 0 auto;
  width: 300px;
  height: 420px;
  &.img1 {
    background-size: cover;
    background-image: url(`,`);
  }
  &.img2 {
    background-size: cover;
    background-image: url(`,`);
  }
  &.img3 {
    background-size: cover;
    background-image: url(`,`);
  }
  &.img4 {
    background-size: cover;
    background-image: url(`,`);
  }
  &.img5 {
    background-size: cover;
    background-image: url(`,`);
  }
`],[`
  margin: 0 auto;
  width: 300px;
  height: 420px;
  &.img1 {
    background-size: cover;
    background-image: url(`,`);
  }
  &.img2 {
    background-size: cover;
    background-image: url(`,`);
  }
  &.img3 {
    background-size: cover;
    background-image: url(`,`);
  }
  &.img4 {
    background-size: cover;
    background-image: url(`,`);
  }
  &.img5 {
    background-size: cover;
    background-image: url(`,`);
  }
`]),O=p.ZP.div(f),n=p.ZP.div(V),s=p.ZP.div(C,R(),a(),o(),Z(),U());function j(I){var c=I.layout;return g.createElement(s,{className:"img"+c})}function A(I,c){var q=void 0,b=void 0,k=(window.innerHeight-50)*.9,ee=(window.innerWidth-320)*.9;return I>c?(b=300,q=I/c*b,q>ee&&(q=ee,b=q/I*c)):(q=300,b=c/I*q,b>k&&(b=k,q=b/c*I)),{width:q,height:b}}function S(I){var c=I.config,q=c===void 0?{}:c,b=I.labelObject,k=b===void 0?{}:b,ee=I.style,re=ee===void 0?{}:ee,ie=q.printType,le=k.options||{},E=le.width,w=le.height,K=void 0,N=(0,g.useRef)();(0,g.useEffect)(function(){k&&N.current&&(N.current.innerHTML="",k.render(),N.current.appendChild(k.canvas))},[q,k]);var F=A(E,w);return g.createElement(O,{style:re},K&&g.createElement("span",null,K),!K&&g.createElement(g.Fragment,null,ie===L.bU.QR&&g.createElement(n,{style:F,ref:N}),ie===L.bU.BAR&&g.createElement(n,{style:F,ref:N}),ie===L.bU.A4&&g.createElement(j,{layout:q.layout})))}},55249:(lt,Te,t)=>{"use strict";if(t.d(Te,{Z:()=>K}),!/^(1887|7596|7798)$/.test(t.j))var ce=t(79221);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(42185);var p=t(52945),L=t.n(p),te=t(94942),R=t.n(te),y=t(36803),a=t(88239),r=t(12424),o=t(88106),d=t(86735),Z=t(67294),H=t(71893);if(!/^(1887|7596|7798)$/.test(t.j))var U=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var f=t(72713);if(!/^(1887|7596|7798)$/.test(t.j))var V=t(31038);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(59628);if(!/^(1887|7596|7798)$/.test(t.j))var O=t(58887);if(!/^(1887|7596|7798)$/.test(t.j))var n=t(13476);if(!/^(1887|7596|7798)$/.test(t.j))var s=t(87600);if(!/^(1887|7596|7798)$/.test(t.j))var j=t(23557);if(!/^(1887|7596|7798)$/.test(t.j))var A=t(35408);var S=t(96486),I=t.n(S);if(!/^(1887|7596|7798)$/.test(t.j))var c=t(15577);var q=(0,d.Z)([`
  height: 100vh
  display: flex;
  flex-direction: column;
  background: #f1f1f1;
`],[`
  height: 100vh
  display: flex;
  flex-direction: column;
  background: #f1f1f1;
`]),b=(0,d.Z)([`
  padding: 0 24px 0 3px;
  height: 50px;
  background: #fff;
  box-shadow: 0px 1px 4px 1px rgba(0, 0, 0, 0.1608);
  z-index: 2;
  display: flex;
  align-items: center;
  .spacer {
    flex: 1;
  }
  .backIcon {
    display: inline-block;
    cursor: pointer;
    font-size: 16px;
    color: #757575;
    width: 50px;
    text-align: center;
    &:hover {
      color: #333;
    }
  }
`],[`
  padding: 0 24px 0 3px;
  height: 50px;
  background: #fff;
  box-shadow: 0px 1px 4px 1px rgba(0, 0, 0, 0.1608);
  z-index: 2;
  display: flex;
  align-items: center;
  .spacer {
    flex: 1;
  }
  .backIcon {
    display: inline-block;
    cursor: pointer;
    font-size: 16px;
    color: #757575;
    width: 50px;
    text-align: center;
    &:hover {
      color: #333;
    }
  }
`]),k=(0,d.Z)([`
  display: inline;
  input {
    padding-left: 0px;
    text-align: left;
  }
`],[`
  display: inline;
  input {
    padding-left: 0px;
    text-align: left;
  }
`]),ee=(0,d.Z)([`
  flex: 1;
  display: flex;
  overflow: hidden;
`],[`
  flex: 1;
  display: flex;
  overflow: hidden;
`]),re=H.ZP.div(q),ie=H.ZP.div(b),le=H.ZP.div(k),E=H.ZP.div(ee);function w(N){var F;return{sourceType:1,sourceUrlType:md.global.Account.isPortal?n.Uk.PUBLIC:n.Uk.MEMBER,printType:1,codeFaultTolerance:n.ih.L,showControlName:!0,showBarValue:!0,firstIsBold:!0,layout:(F={},(0,o.default)(F,n.bU.A4,n.HU.A1x1),(0,o.default)(F,n.bU.QR,n.Uf.PORTRAIT),(0,o.default)(F,n.bU.BAR,n.k1.LANDSCAPE),F)[N]||1,labelSize:2,codeSize:1,position:1}}function K(N){var F=this,h=N.isCharge,z=N.mode,X=N.printType,B=X===void 0?1:X,x=N.appId,Q=N.projectId,i=N.worksheetId,m=N.viewId,v=N.worksheetName,W=N.selectedRows,P=W===void 0?[]:W,u=N.controls,l=N.count,T=N.allowLoadMore,G=N.filterControls,D=N.fastFilters,M=N.navGroupFilters,se=N.onClose,ae=se===void 0?function(){}:se,ne=(0,Z.useState)({id:N.id,name:N.id?"":B===n.bU.BAR?_l("\u6253\u5370\u6761\u5F62\u7801"):_l("\u6253\u5370\u4E8C\u7EF4\u7801"),range:1,views:[]}),de=(0,r.Z)(ne,2),Ce=de[0],he=de[1],fe=Ce.id,Ee=Ce.name,Y=B===n.bU.BAR?2:1,oe=(0,Z.useState)(!!fe),ve=(0,r.Z)(oe,2),ue=ve[0],pe=ve[1],Se=(0,Z.useState)(P[0]||{}),ye=(0,r.Z)(Se,2),J=ye[0],me=ye[1],be=(0,Z.useState)({}),xe=(0,r.Z)(be,2),Ae=xe[0],Ne=xe[1],Me=(0,Z.useState)(),Fe=(0,r.Z)(Me,2),Be=Fe[0],we=Fe[1],Ie=(0,Z.useState)((0,a.default)({},w(B),{sourceType:Y,sourceControlId:B===n.bU.BAR&&Y===n.FW.CONTROL?u[0].controlId:void 0,printType:B,showTexts:[(0,j.T9)({printType:B,sourceType:Y,sourceControlId:B===n.bU.BAR&&Y===n.FW.CONTROL?u[0].controlId:void 0,controls:u})].filter(I().identity)})),ge=(0,r.Z)(Ie,2),Re=ge[0],Pe=ge[1],ke=void 0;Re.printType===n.bU.QR||Re.printType===n.bU.A4?ke=(0,j.ot)(Re,(0,j.U0)({printType:Re.printType,sourceType:Re.sourceType,sourceControlId:Re.sourceControlId,fontSize:Re.fontSize,row:J,controls:u,urls:[Re.sourceUrlType===n.Uk.MEMBER?location.origin+"/app/"+x+"/"+i+"/"+m+"/row/"+J.rowid:Ae||"https://mingdao.com"],index:0}),(0,j.jn)({showTexts:Re.showTexts,showControlName:Re.showControlName,firstIsBold:Re.firstIsBold,controls:u,emptySetAsSample:I().isEmpty(P)},J),{isPreview:!0}):Re.printType===n.bU.BAR&&(ke=(0,j.C5)(Re,(0,j.U0)({printType:Re.printType,sourceType:Re.sourceType,sourceControlId:Re.sourceControlId,row:J,controls:u}),(0,j.jn)({showTexts:Re.showTexts,showControlName:Re.showControlName,firstIsBold:Re.firstIsBold,controls:u,emptySetAsSample:I().isEmpty(P)},J),{isPreview:!0}));var We=(ke||{}).maxLineNumber||0;function Ve(){var pt={1:"printQRCode",3:"printBarCode"};(0,c.Ye)(pt[Re.printType],i,{msg:[T?l:P.length]}),(0,A.$w)({config:Re,name:Ce.name,appId:x,worksheetId:i,viewId:m,projectId:Q,selectedRows:P,controls:u,count:l,allowLoadMore:T,filterControls:G,fastFilters:D,navGroupFilters:M})}function it(pt){pt.keyCode===27&&ae()}function Ge(pt){m?U.Z.getRowsShortUrl({appId:x,viewId:m,worksheetId:i,rowIds:[pt]}).then(function(ot){Ne(ot[pt])}):Ne("https://mingdao.com")}return(0,Z.useEffect)(function(){return window.addEventListener("keydown",it),(0,y.Z)(R().mark(function pt(){var ot,vt;return R().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:if(!fe){yt.next=7;break}return yt.next=3,U.Z.getCodePrint({id:fe,projectId:Q});case 3:ot=yt.sent,Pe((0,a.default)({},Re,ot.config)),he(I().omit(ot,"config")),pe(!1);case 7:if(!I().isEmpty(J)){yt.next=12;break}return yt.next=10,U.Z.getFilterRows({worksheetId:i,pageSize:1,pageIndex:1,status:1,notGetTotal:!0,searchType:1});case 10:vt=yt.sent,I().isEmpty(vt.data)||(me(vt.data[0]),Ge(vt.data[0].rowid));case 12:case"end":return yt.stop()}},pt,F)}))(),I().isEmpty(J)||Ge(J.rowid),function(){window.removeEventListener("keydown",it)}},[]),Z.createElement(re,{className:"doNotTriggerClickAway"},Z.createElement(ie,null,Z.createElement("span",{className:"backIcon",onClick:ae},Z.createElement("i",{className:"icon icon-knowledge-return"})),z==="newTemplate"&&Z.createElement("span",{className:"Font16 Bold mRight6"},_l("\u65B0\u5EFA\u6A21\u677F")),z==="editTemplate"&&Z.createElement("span",{className:"Font16 Bold mRight6"},_l("\u7F16\u8F91\u6A21\u677F")),Z.createElement(le,{className:"title Font16 Bold"},(fe||z==="newTemplate")&&z!=="preview"?Z.createElement(V.Z,{editable:!0,name:Ee,onChange:function(ot){if(ot.trim()===""){alert(_l("\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"),3);return}we(!0),he((0,a.default)({},Ce,{name:ot}))}}):Z.createElement("span",null,z==="preview"?_l("\u9884\u89C8: %0",Ee):Ee)),Z.createElement("div",{className:"spacer"}),h&&Z.createElement(g.ZP,{size:"mdnormal",type:z==="editTemplate"||z==="newTemplate"?"primary":"ghostgray",onClick:function(){var ot={id:fe||"",projectId:Q,worksheetId:i,type:B===n.bU.BAR?4:3,config:(0,a.default)({},Re,{sourceControlId:Re.sourceControlId||""})};function vt(){var At=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};U.Z.saveRecordCodePrintConfig(ot).then(function(yt){alert(_l("\u4FDD\u5B58\u6210\u529F")),we(!1),fe||he((0,a.default)({},Ce,{id:yt})),At()})}fe?(ot=L()(ot,Ce),vt()):(0,f.Z)({className:"doNotTriggerClickAway",worksheetId:i,viewId:m,printData:{name:Ce.name,range:1,views:[]},setValue:function(yt){ot=L()(ot,{name:yt.name,range:yt.range,views:yt.views.map(function(st){return st.viewId})}),vt(ae)}})}},z==="editTemplate"||z==="newTemplate"?_l("\u4FDD\u5B58"):_l("\u4FDD\u5B58\u4E3A\u6253\u5370\u6A21\u677F")),!I().includes(["newTemplate","editTemplate","preview"],z)&&Z.createElement(g.ZP,{size:"mdnormal",type:"primary",className:"mLeft10",onClick:Ve},_l("\u6253\u5370"))),Z.createElement(E,null,z!=="preview"&&(ue?Z.createElement(ce.Z,{style:{width:320},direction:"column",widths:["30%","40%","90%","60%"],active:!0,itemStyle:{marginBottom:"10px"}}):Z.createElement(C.Z,{config:Re,maxLineNumber:We,controls:u.filter(function(pt){return s.gU[2]((0,a.default)({},pt,{type:pt.type===30?pt.sourceControlType:pt.type}))||I().includes([37],pt.type)}),onUpdate:function(ot){we(!0),Pe(function(vt){return(0,a.default)({},vt,ot)})}})),Z.createElement(O.Z,{style:ue?{visibility:"hidden"}:{},config:Re,labelObject:ke})))}},72578:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>w});var ce=t(70264),g=t(52945),p=t.n(g),L=t(69288),te=t(3540),R=t(12424),y=t(86735),a=t(67294),r=t(45697),o=t.n(r),d=t(71893),Z=t(93967),H=t.n(Z),U=t(42541),f=t(59217),V=t(96486),C=t.n(V),O=(0,y.Z)([`
  font-size: 13px;
  color: #222;
  margin: 14px 0 10px;
  .compressWidth {
    float: right;
    font-size: 18px;
    color: #9e9e9e;
    cursor: pointer;
    &.on {
      color: #2196f3;
    }
  }
`],[`
  font-size: 13px;
  color: #222;
  margin: 14px 0 10px;
  .compressWidth {
    float: right;
    font-size: 18px;
    color: #9e9e9e;
    cursor: pointer;
    &.on {
      color: #2196f3;
    }
  }
`]),n=(0,y.Z)([`
  height: 36px;
  display: flex;
  &.notAllow {
    cursor: not-allowed;
    .dropdownBtn {
      cursor: not-allowed;
    }
  }
`],[`
  height: 36px;
  display: flex;
  &.notAllow {
    cursor: not-allowed;
    .dropdownBtn {
      cursor: not-allowed;
    }
  }
`]),s=(0,y.Z)([`
  overflow: hidden;
  display: flex;
  flex: 1;
  padding: 0 8px;
  border: 1px solid #d9d9d9;
  border-radius: 3px 0 0 3px;
  input {
    width: 100%;
    border: none;
    padding: 0px;
  }
  i.setName {
    cursor: pointer;
    font-size: 20px;
    margin-right: 10px;
    color: #9d9d9d;
  }
  .hoverShow {
    display: none;
  }
  &.text {
    cursor: text;
  }
  &:hover {
    .hoverShow {
      display: inline-block;
    }
  }
`],[`
  overflow: hidden;
  display: flex;
  flex: 1;
  padding: 0 8px;
  border: 1px solid #d9d9d9;
  border-radius: 3px 0 0 3px;
  input {
    width: 100%;
    border: none;
    padding: 0px;
  }
  i.setName {
    cursor: pointer;
    font-size: 20px;
    margin-right: 10px;
    color: #9d9d9d;
  }
  .hoverShow {
    display: none;
  }
  &.text {
    cursor: text;
  }
  &:hover {
    .hoverShow {
      display: inline-block;
    }
  }
`]),j=(0,y.Z)([`
  display: inline-block;
  max-width: 100%;
  margin-right: 6px;
  border-radius: 12px;
  background: #d8eeff;
  color: #174c76;
  border: 1px solid #bbd6ea;
  padding: 0 8px 0 12px;
  font-size: 12px;
  box-sizing: border-box;
  height: 24px;
  line-height: 22px;
  max-width: 100%;
  .close {
    color: #9e9e9e;
    margin-left: 4px;
    cursor: pointer;
  }
`],[`
  display: inline-block;
  max-width: 100%;
  margin-right: 6px;
  border-radius: 12px;
  background: #d8eeff;
  color: #174c76;
  border: 1px solid #bbd6ea;
  padding: 0 8px 0 12px;
  font-size: 12px;
  box-sizing: border-box;
  height: 24px;
  line-height: 22px;
  max-width: 100%;
  .close {
    color: #9e9e9e;
    margin-left: 4px;
    cursor: pointer;
  }
`]),A=(0,y.Z)([`
  width: 100%;
  flex: 1;
  .staticValue {
    width: 100%;
  }
`],[`
  width: 100%;
  flex: 1;
  .staticValue {
    width: 100%;
  }
`]),S=(0,y.Z)([`
  cursor: pointer;
  font-size: 22px;
  color: #bdbdbd;
  width: 36px;
  height: 100%;
  border: 1px solid #d9d9d9;
  border-left: none;
  border-radius: 0 3px 3px 0;
`],[`
  cursor: pointer;
  font-size: 22px;
  color: #bdbdbd;
  width: 36px;
  height: 100%;
  border: 1px solid #d9d9d9;
  border-left: none;
  border-radius: 0 3px 3px 0;
`]),I=(0,y.Z)([`
  .title {
    font-size: 20px;
    font-weight: bold;
    margin-bottom: 10px;
  }
`],[`
  .title {
    font-size: 20px;
    font-weight: bold;
    margin-bottom: 10px;
  }
`]),c=d.ZP.div(O),q=d.ZP.div(n),b=(0,d.ZP)(U.EK)(s),k=d.ZP.div(j),ee=d.ZP.div(A),re=(0,d.ZP)(U.Lb)(S);function ie(K){var N=K.value,F=K.isEditing,h=K.onChange,z=K.onBlur,X=(0,a.useRef)();return(0,a.useEffect)(function(){F&&X.current&&X.current.focus()},[F]),F?a.createElement("input",{ref:X,value:N,type:"text",onChange:function(x){return h(x.target.value)},onBlur:z}):a.createElement("div",{className:"staticValue ellipsis"},N)}var le=d.ZP.div(I);function E(K){var N=K.name,F=K.onCancel,h=K.onChange,z=(0,a.useState)(N),X=(0,R.Z)(z,2),B=X[0],x=X[1];return a.createElement(L.Z,{visible:!0,title:_l("\u91CD\u547D\u540D"),onCancel:F,onOk:function(){h(B),F()}},a.createElement(le,null,a.createElement(te.Z,{className:"w100",value:B,onChange:x})))}function w(K){var N=K.index,F=K.type,h=F===void 0?2:F,z=K.forceInLine,X=z===void 0?!1:z,B=K.name,x=K.value,Q=K.disabled,i=K.className,m=K.style,v=K.controls,W=K.onChange,P=W===void 0?function(){}:W,u=(0,a.useState)(),l=(0,R.Z)(u,2),T=l[0],G=l[1],D=(0,a.useState)(!1),M=(0,R.Z)(D,2),se=M[0],ae=M[1],ne=h===1&&C().find(v,{controlId:x});function de(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};P(p()({type:h,name:B,value:x,forceInLine:X},Ce))}return a.createElement(a.Fragment,null,a.createElement(c,null,_l("\u5B57\u6BB5%0",N+1),a.createElement(ce.Z,{text:a.createElement("span",null,_l("\u5F3A\u5236\u5355\u884C"))},a.createElement("i",{className:H()("icon-compress_width compressWidth",{on:X}),onClick:function(){de({forceInLine:!X})}}))),a.createElement(f.Z,{disabled:Q,controls:v,isAppendToBody:!0,offset:[0,2],popupStyle:{width:272},onChange:function(he){de({type:1,value:he.controlId})}},a.createElement(q,{className:i+(Q?" notAllow":""),style:m},a.createElement(b,{className:h===2?"text":"",onClick:function(he){h===2&&(G(!0),he.stopPropagation())}},a.createElement(ee,null,h===1&&ne&&a.createElement(k,null,B||ne.controlName,a.createElement("i",{className:"icon-close close",onClick:function(he){G(!0),de({type:2,value:""}),he.stopPropagation()}})),h===2&&a.createElement(ie,{value:x,isEditing:T,onChange:function(he){de({type:2,value:he})},onBlur:function(){return G(!1)}})),!Q&&h===1&&a.createElement(ce.Z,{text:a.createElement("span",null,_l("\u91CD\u547D\u540D"))},a.createElement("i",{className:"icon-rename_input setName",onClick:function(he){he.stopPropagation(),ae(!0)}}))),a.createElement(re,{className:"dropdownBtn","data-tip":_l("\u4F7F\u7528\u52A8\u6001\u503C")},a.createElement("i",{className:"icon-workflow_other"})))),se&&a.createElement(E,{name:B||C().get(ne,"controlName")||"",onCancel:function(){return ae(!1)},onChange:function(he){de({name:he})}}))}w.propTypes={className:r.string,style:(0,r.shape)({}),type:r.number,value:r.string,controls:(0,r.arrayOf)((0,r.shape)({})),onChange:r.func}},59628:(lt,Te,t)=>{"use strict";if(t.d(Te,{Z:()=>W}),!/^(1887|7596|7798)$/.test(t.j))var ce=t(70264);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(66215);var p=t(25130),L=t.n(p);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(64713);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(47426);var y=t(85315);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(3540);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(31546);var o=t(88239),d=t(12424),Z=t(84141),H=t(86735),U=t(67294),f=t(71893),V=t(93967),C=t.n(V);if(!/^(1887|7596|7798)$/.test(t.j))var O=t(59217);if(!/^(1887|7596|7798)$/.test(t.j))var n=t(87600);if(!/^(1887|7596|7798)$/.test(t.j))var s=t(13476);if(!/^(1887|7596|7798)$/.test(t.j))var j=t(72578);if(!/^(1887|7596|7798)$/.test(t.j))var A=t(23557);var S=t(96486),I=t.n(S),c=t(45697),q=t.n(c),b=(0,H.Z)([`
  font-size: 13px;
  height: 100%;
  width: 320px;
  background: #fff;
  padding: 10px 20px 30px;
  overflow: auto;
  .RadioGroupCon {
    .ming.Radio {
      width: 50%;
      display: inline-block;
      margin: 0;
    }
  }
  .switchWH {
    color: #9d9d9d;
    margin: 0 8px;
    line-height: 36px;
  }
  .customSizeUnit {
    font-size: 13px;
    margin-left: 8px;
    line-height: 36px;
  }
`],[`
  font-size: 13px;
  height: 100%;
  width: 320px;
  background: #fff;
  padding: 10px 20px 30px;
  overflow: auto;
  .RadioGroupCon {
    .ming.Radio {
      width: 50%;
      display: inline-block;
      margin: 0;
    }
  }
  .switchWH {
    color: #9d9d9d;
    margin: 0 8px;
    line-height: 36px;
  }
  .customSizeUnit {
    font-size: 13px;
    margin-left: 8px;
    line-height: 36px;
  }
`]),k=(0,H.Z)([`
  margin-top: 10px;
  color: #757575;
`],[`
  margin-top: 10px;
  color: #757575;
`]),ee=(0,H.Z)([`
  margin-top: 26px;
  color: #333;
  font-weight: 600;
`],[`
  margin-top: 26px;
  color: #333;
  font-weight: 600;
`]),re=(0,H.Z)([`
  display: flex;
  > input {
    flex: 1;
    overflow: hidden;
    width: auto;
  }
`],[`
  display: flex;
  > input {
    flex: 1;
    overflow: hidden;
    width: auto;
  }
`]),ie=(0,H.Z)([`
  position: absolute;
  right: 24px;
  top: 15px;
  font-size: 18px;
  color: #9e9e9e;
  cursor: pointer;
  &.on {
    color: #2196f3;
  }
`],[`
  position: absolute;
  right: 24px;
  top: 15px;
  font-size: 18px;
  color: #9e9e9e;
  cursor: pointer;
  &.on {
    color: #2196f3;
  }
`]),le=20,E=20,w=200,K=200,N=f.ZP.div(b),F=f.ZP.div(k),h=f.ZP.div(ee),z=f.ZP.div(function(P){var u=P.top;return`
  margin-top: `+u+`px;
`}),X=f.ZP.div(function(P){var u=P.label;return`
  &&:before {
    content: '`+u+`';
    width: 80px;
  }
  margin-top: 14px;
  display: flex;
  align-items: center;
  > div {
    max-width: calc(100% - 80px) !important;
  }
  .ant-radio-group {
    width: 100%;
    display: flex;
  }
  .ant-radio-button-wrapper-checked:not(.ant-radio-button-wrapper-disabled) {
    border-color: #2196f3 !important;
    color: #2196f3 !important;
  }
  .ant-radio-button-wrapper {
    font-size: 13px;
    box-shadow: none !important;
    flex: 1;
    text-align: center;
    height: 36px;
    line-height: 34px;
  }
`}),B=f.ZP.div(re),x=f.ZP.i(ie);function Q(P){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return I().isArray(u)||(u=[u]),u.forEach(function(l){l<0&&(l=P.length-1+l),P[l]&&!I().isArray(P[l])&&(P[l]=[P[l]])}),P}function i(P){var u=/[^-?\d*(\.\d*)?]/g;return String(P).replace(u,"")}function m(P){var u=P.options,l=u===void 0?[]:u,T=P.value,G=P.onChange;if(!l.length)return null;var D=I().findIndex(l,{value:T})||0;return U.createElement(U.Fragment,null,U.createElement(Z.Z,{triggerWhenMove:!0,className:"flex",showTip:!1,showNumber:!1,showInput:!1,min:0,max:l.length-1,step:1,value:l.length-1-D,onChange:function(se){l[l.length-1-se]&&G(l[l.length-1-se].value)}}),l[D]&&U.createElement("span",{className:"mLeft10 Gray_75"},l[D].text))}m.propTypes={options:(0,c.arrayOf)((0,c.shape)({})),value:c.number,onChange:c.func};function v(P){var u=P.type,l=P.width,T=P.height,G=P.onChange,D=G===void 0?function(){}:G,M=(0,U.useState)({width:l,height:T}),se=(0,d.Z)(M,2),ae=se[0],ne=se[1];(0,U.useEffect)(function(){ne({width:l,height:T})},[l,T]);function de(he){var fe=Number(i(he.target.value)||0);if(fe<le){alert(_l("\u5BBD\u5EA6\u4E0D\u80FD\u5C0F\u4E8E%0",le),3),ne((0,o.default)({},ae,{width:l}));return}if(fe>w){alert(_l("\u5BBD\u5EA6\u4E0D\u80FD\u5927\u4E8E%0",w),3),ne((0,o.default)({},ae,{width:l}));return}D({type:u,width:fe})}function Ce(he){var fe=Number(i(he.target.value)||0);if(fe<le){alert(_l("\u9AD8\u5EA6\u4E0D\u80FD\u5C0F\u4E8E%0",E),3),ne((0,o.default)({},ae,{height:T}));return}if(fe>K){alert(_l("\u9AD8\u5EA6\u4E0D\u80FD\u5927\u4E8E%0",K),3),ne((0,o.default)({},ae,{height:T}));return}D({type:u,height:fe})}return U.createElement(U.Fragment,null,U.createElement(X,{label:_l("\u5C3A\u5BF8")},U.createElement(r.Z,{menuClass:"w100",className:"w100",maxHeight:320,border:!0,value:u,data:Q(s.z9,-1),onChange:function(fe){var Ee={type:fe};fe===s.pI.CUSTOM&&(Ee.labelCustomWidth=30,Ee.labelCustomHeight=70),D(Ee)}})),u===100&&U.createElement(X,{label:_l("\u5BBD/\u9AD8")},U.createElement("div",null,U.createElement(B,null,U.createElement(a.Z,{value:ae.width,onChange:function(fe){ne((0,o.default)({},ae,{width:i(fe)}))},onBlur:de,onKeyUp:function(fe){fe.keyCode===13&&de(fe)}}),U.createElement("span",{"data-tip":_l("\u4EA4\u6362")},U.createElement("i",{className:"switchWH icon-sync1 ThemeHoverColor3 Hand",onClick:function(){var fe={height:ae.width,width:ae.height};ne(fe),D((0,o.default)({type:u},fe))}})),U.createElement(a.Z,{value:ae.height,onChange:function(fe){ne((0,o.default)({},ae,{height:i(fe)}))},onBlur:Ce,onKeyUp:function(fe){fe.keyCode===13&&Ce(fe)}}),U.createElement("span",{className:"customSizeUnit"},"mm")))))}function W(P){var u=P.config,l=u===void 0?{}:u,T=P.maxLineNumber,G=P.controls,D=P.onUpdate,M=D===void 0?function(){}:D,se=l.sourceType,ae=se===void 0?0:se,ne=l.sourceUrlType,de=ne===void 0?0:ne,Ce=l.printType,he=Ce===void 0?0:Ce,fe=l.codeFaultTolerance,Ee=fe===void 0?7:fe,Y=l.showTexts,oe=Y===void 0?[]:Y,ve=l.labelCustomWidth,ue=l.labelCustomHeight,pe=l.showBarValue,Se=pe===void 0?!1:pe,ye=l.showControlName,J=ye===void 0?!0:ye,me=l.firstIsBold,be=me===void 0?!0:me,xe=l.labelSize,Ae=xe===void 0?0:xe,Ne=l.layout,Me=Ne===void 0?0:Ne,Fe=l.codeSize,Be=Fe===void 0?0:Fe,we=l.fontSize,Ie=we===void 0?1:we,ge=l.position,Re=ge===void 0?0:ge,Pe=l.sourceControlId;return U.createElement(N,null,U.createElement(F,null,he===s.bU.BAR?_l("\u7F16\u7801\u65B9\u5F0F\uFF1Acode128\uFF0C\u4EC5\u652F\u6301\u6570\u5B57\u3001\u5B57\u6BCD\u3001\u7B26\u53F7\uFF0C\u6700\u5927\u5305\u542B30\u4E2A\u5B57\u7B26"):_l("\u7F16\u7801\u65B9\u5F0F\uFF1AQR-code\uFF0C\u53EF\u652F\u6301\u6C49\u5B57\uFF0C\u6700\u5927\u5305\u542B150\u4E2A\u5B57")),U.createElement(h,{className:"mTop20"},he===s.bU.BAR?_l("\u6761\u5F62\u7801\u6570\u636E\u6E90"):_l("\u6570\u636E\u6E90")),U.createElement(z,{top:"15"}),he!==s.bU.BAR&&U.createElement(R.ZP,{checkedValue:ae,data:s.y8,onChange:function(We){if(ae!==We){var Ve=void 0;We===s.FW.CONTROL&&(Ve=G.filter(n.gU[2])[0].controlId);var it=(0,A.T9)({printType:he,sourceType:We,sourceControlId:Ve,controls:G}),Ge=[].concat((0,y.Z)(oe));it&&(Ge[0]=it),M((0,o.default)({sourceType:We},We===s.FW.CONTROL?{sourceControlId:Ve}:{},{showTexts:Ge}))}}}),U.createElement(z,{top:"16"}),ae===s.FW.URL?U.createElement(r.Z,{menuClass:"w100",className:"w100",border:!0,value:de,data:md.global.Account.isPortal?s.cG.filter(function(ke){return ke.value!==1}):s.cG,onChange:function(We){return M({sourceUrlType:We})}}):U.createElement(O.Z,{selected:Pe,controls:G.filter(n.gU[2]),isAppendToBody:!0,offset:[0,2],popupStyle:{width:272},onChange:function(We){var Ve={sourceControlId:We.controlId},it=(0,A.T9)({printType:he,sourceType:ae,sourceControlId:We.controlId,controls:G}),Ge=[].concat((0,y.Z)(oe));it&&(Ge[0]=it),Ve.showTexts=Ge,M(Ve)}}),U.createElement(z,{top:"12"}),he!==s.bU.BAR&&U.createElement(U.Fragment,null,U.createElement(h,null,_l("\u6253\u5370\u65B9\u5F0F")),U.createElement(z,{top:"12"}),U.createElement(R.ZP,{checkedValue:he,data:s.m5.filter(function(ke){return ke.value!==s.bU.BAR}),onChange:function(We){he!==We&&M({printType:We})}})),he===s.bU.A4&&U.createElement(X,{label:_l("\u5E03\u5C40")},U.createElement(r.Z,{menuClass:"w100",className:"w100",border:!0,value:Me,data:s.gv,onChange:function(We){return M({layout:We})}})),he===s.bU.QR&&U.createElement(U.Fragment,null,U.createElement(v,{type:Ae,width:ve,height:ue,onChange:function(We){var Ve={labelSize:We.type};Ve.labelCustomWidth=We.width||ve||30,Ve.labelCustomHeight=We.height||ue||50,Ve.labelSize===s.pI.CUSTOM&&(Ve.layout=Ve.labelCustomHeight>Ve.labelCustomWidth?s.Uf.PORTRAIT:s.Uf.LANDSCAPE,Ve.layout===s.Uf.PORTRAIT&&I().includes([s.h3.LEFT,s.h3.RIGHT],Re)&&(Ve.position=s.h3.TOP),Ve.layout===s.Uf.LANDSCAPE&&!I().includes([s.h3.LEFT,s.h3.RIGHT],Re)&&(Ve.position=s.h3.LEFT)),M(Ve)}}),Ae!==s.pI.CUSTOM&&U.createElement(X,{label:_l("\u5E03\u5C40")},U.createElement(te.default.Group,{options:s.ZO,onChange:function(We){return M({layout:We.target.value,position:We.target.value===s.Uf.PORTRAIT?s.h3.TOP:s.h3.LEFT,codeSize:We.target.value===s.Uf.PORTRAIT?s.oK.HUGE:s.yS.SMALL})},value:Me,optionType:"button"})),U.createElement(h,null,_l("\u4E8C\u7EF4\u7801\u8BBE\u7F6E")),U.createElement(U.Fragment,null,U.createElement(X,{label:_l("\u5927\u5C0F")},U.createElement(m,{options:Me===s.Uf.PORTRAIT?s.y3:s.qJ,value:Be,onChange:function(We){M({codeSize:We})}})),U.createElement(X,{label:_l("\u4F4D\u7F6E")},U.createElement(te.default.Group,{options:Me===s.Uf.PORTRAIT?s.yD.slice(0,2):s.yD.slice(2),onChange:function(We){return M({position:We.target.value})},value:Re,optionType:"button"})))),he!==s.bU.BAR&&U.createElement(X,{label:_l("\u5BB9\u9519\u7387"),tips:"\u5BB9\u9519\u7387\u662F\u6307\u4E8C\u7EF4\u7801\u88AB\u906E\u6321\u591A\u5C11\u540E\uFF0C\u4ECD\u53EF\u4EE5\u626B\u63CF\u51FA\u6765\u7684\u80FD\u529B\u3002\u5BB9\u9519\u7387\u8D8A\u9AD8\uFF0C\u4E8C\u7EF4\u7801\u8D8A\u5BB9\u6613\u88AB\u626B\u63CF\uFF0C\u4E8C\u7EF4\u7801\u56FE\u7247\u4E5F\u8D8A\u590D\u6742\u3002"},U.createElement(r.Z,{menuClass:"w100",className:"w100",border:!0,value:Ee,data:s.IQ,onChange:function(We){return M({codeFaultTolerance:We})}})),he===s.bU.BAR&&U.createElement(U.Fragment,null,U.createElement(h,null,_l("\u6807\u7B7E\u6253\u5370\u673A")),U.createElement(v,{type:Ae,width:ve,height:ue,onChange:function(We){var Ve={labelSize:We.type};Ve.labelCustomWidth=We.width||ve||30,Ve.labelCustomHeight=We.height||ue||50,Ve.labelSize===s.E5.CUSTOM&&(Ve.layout=Ve.labelCustomHeight>Ve.labelCustomWidth?s.k1.PORTRAIT:s.k1.LANDSCAPE),M(Ve)}}),Ae!==s.E5.CUSTOM&&U.createElement(X,{label:_l("\u5E03\u5C40")},U.createElement(te.default.Group,{options:s.gW,onChange:function(We){return M({layout:We.target.value,position:s.rl.TOP})},value:Me,optionType:"button"})),U.createElement(h,null,_l("\u6761\u5F62\u7801\u8BBE\u7F6E")),U.createElement(X,{label:_l("\u9AD8\u5EA6")},U.createElement(m,{options:s.ON,value:Be,onChange:function(We){M({codeSize:We})}})),U.createElement(X,{label:_l("\u4F4D\u7F6E")},U.createElement(te.default.Group,{options:s.t1,onChange:function(We){return M({position:We.target.value})},value:Re,optionType:"button"}))),he===s.bU.BAR&&U.createElement("div",{className:"mTop15 flexRow justifyContentCenter"},U.createElement("div",null,_l("\u663E\u793A\u6587\u672C")),U.createElement("div",{className:"flex"}),U.createElement(g.Z,{size:"small",primaryColor:"#2196f3",checked:Se,onClick:function(){return M({showBarValue:!Se})}})),U.createElement(h,null,_l("\u663E\u793A\u5B57\u6BB5")),U.createElement(X,{label:_l("\u5B57\u53F7")},U.createElement(Z.Z,{triggerWhenMove:!0,className:"flex",showNumber:!1,showTip:!1,showInput:!1,min:.5,max:1.5,step:.1,value:Ie,onChange:function(We){M({fontSize:Number(We)})}}),U.createElement("span",{className:"mLeft10 Gray_75"},Ie)),U.createElement("div",{className:"mTop15 flexRow justifyContentCenter"},U.createElement("div",null,_l("\u663E\u793A\u5B57\u6BB5\u540D\u79F0")),U.createElement("div",{className:"flex"}),U.createElement(g.Z,{size:"small",primaryColor:"#2196f3",checked:J,onClick:function(){return M({showControlName:!J})}})),U.createElement(F,null,_l("\u5F53\u524D\u5C3A\u5BF8\u4E0B\u6700\u5927\u5BB9\u7EB3%0\u884C\u6587\u5B57\uFF0C\u5B57\u6BB5\u5185\u5BB9\u8D85\u8FC71\u884C\u540E\uFF0C\u9ED8\u8BA4\u5411\u4E0B\u6362\u884C\u76F4\u5230\u5B8C\u6574\u663E\u793A\u3002",T)),U.createElement("div",{className:"Relative"},U.createElement(ce.Z,{text:U.createElement("span",null,_l("\u663E\u793A\u4E3A\u6807\u9898"))},U.createElement(x,{className:C()("icon-title",{on:be}),onClick:function(){return M({firstIsBold:!be})}}))),[].concat((0,y.Z)(new Array(T))).map(function(ke,We){return U.createElement(j.Z,{type:(oe[We]||{}).type,value:(oe[We]||{}).value,forceInLine:(oe[We]||{}).forceInLine,name:(oe[We]||{}).name,key:We,index:We,className:"mTop10",controls:G,onChange:function(){var it=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ge=it.type,pt=it.value,ot=it.forceInLine,vt=ot===void 0?!1:ot,At=it.name,yt=At===void 0?"":At,st=[].concat((0,y.Z)(oe));st[We]={type:Ge,value:pt,forceInLine:vt,name:yt},M({showTexts:[].concat((0,y.Z)(st)).map(function(St){return St||{forceInLine:!1,name:"",type:2,value:""}})})}})}))}},56826:(lt,Te,t)=>{"use strict";t.d(Te,{B:()=>C});var ce=t(46593),g=t.n(ce),p=t(94942),L=t.n(p),te=t(36803),R=t(52945),y=t.n(R),a=t(99663),r=t(22600),o=t(96486),d=t.n(o),Z=t(55961),H=t.n(Z),U=15;function f(O){var n=H()({},O,{format:"CODE128"});return d().get(n,"_encodings.0.0")}function V(O){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.width,j=s===void 0?100:s,A=n.height,S=A===void 0?100:A,I=document.createElement("canvas"),c=Math.max(S/100*7,U),q=f(O);return H()(I,O,{format:"CODE128",width:j/(q.data.length<90?90:q.data.length),height:S-c-4,displayValue:!1,margin:0,lineColor:"#000000"}),{dataUrl:I.toDataURL(),width:I.width}}var C=function(){function O(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=n.isDebug,j=s===void 0?!1:s,A=n.isPreview,S=A===void 0?!1:A,I=n.pixelRadio,c=I===void 0?2:I,q=n.width,b=q===void 0?100:q,k=n.height,ee=k===void 0?100:k,re=n.fontSize,ie=re===void 0?1:re,le=n.firstIsTitle,E=le===void 0?!1:le,w=n.showBarValue,K=w===void 0?!0:w,N=n.codePosition,F=N===void 0?"top":N,h=n.size,z=h===void 0?"m":h,X=n.value,B=n.texts,x=B===void 0?[]:B;(0,a.default)(this,O),this.setOptions({isDebug:j,isPreview:S,pixelRadio:c,width:b,height:ee,fontSize:ie||1,size:z,firstIsTitle:E,codePosition:F,value:X,texts:x,showBarValue:K}),this.setLayoutParams(),this.init()}return(0,r.default)(O,[{key:"setOptions",value:function(s){this.options=y()({},this.options,s)}},{key:"setLayoutParams",value:function(){var s=this.options,j=s.size,A=s.width,S=s.height,I=A>S?{l:18,m:14,s:9}:{l:19,m:14,s:9};this.layout={paddingX:3,paddingY:2,height:I[j],fontSize:5}}},{key:"init",value:function(){var s=this.options,j=s.width,A=s.height,S=s.pixelRadio,I=j*S;this._width=I;var c=A*S;this._height=c,this.canvas=document.createElement("canvas"),this.canvas.width=I,this.canvas.height=c,this.canvas.style.width=j+"px",this.canvas.style.height=A+"px",this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="#fff",this.ctx.fillRect(0,0,I,c),this.unitSize=I>c?c/30:I/30,this.maxLineNumber=Math.floor((c-(this.layout.paddingY+this.layout.height+2)*this.unitSize)/(this.layout.fontSize*this.unitSize))}},{key:"render",value:function(){var n=(0,te.Z)(L().mark(function j(){var A,S,I;return L().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return A=this.options,S=A.isDebug,I=A.showBarValue,S&&(this.drawPadding(),this.drawGrid()),q.next=4,this.drawBar();case 4:I&&this.drawBarText(),this.drawTexts();case 6:case"end":return q.stop()}},j,this)}));function s(){return n.apply(this,arguments)}return s}()},{key:"cutTextByWidth",value:function(s,j,A){var S=[];if(this.ctx.font=s+"px sans-serif",this.ctx.measureText(j).width<A)return[j];for(var I="",c=0;c<j.length;c++){I+=j[c];var q=this.ctx.measureText(I).width;q>A&&(S.push(I.slice(0,-1)),I=I.slice(-1))}return I&&S.push(I),S}},{key:"drawGrid",value:function(){var s=Math.floor(this._width/this.unitSize),j=Math.floor(this._height/this.unitSize);this.ctx.setLineDash([]),this.ctx.strokeStyle="#ccc";for(var A=1;A<s+1;A++)this.ctx.beginPath(),this.ctx.moveTo(A*this.unitSize,0),this.ctx.lineTo(A*this.unitSize,this._height),this.ctx.stroke();for(var S=1;S<j+1;S++)this.ctx.beginPath(),this.ctx.moveTo(0,S*this.unitSize),this.ctx.lineTo(this._width,S*this.unitSize),this.ctx.stroke()}},{key:"drawPadding",value:function(){var s=this.layout,j=s.paddingX,A=s.paddingY;this.ctx.fillStyle="#caccfe",this.ctx.fillRect(0,0,this._width,this._height),this.ctx.fillStyle="#fff",this.ctx.fillRect(3*this.unitSize,2*this.unitSize,this._width-2*j*this.unitSize,this._height-2*A*this.unitSize)}},{key:"drawImageUrl",value:function(s){var j=this,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},S=A.x,I=A.y,c=A.width,q=A.height;return new(g())(function(b){var k=new Image;k.onload=function(){j.ctx.drawImage(k,S,I,c,q),b()},k.src=s})}},{key:"drawBar",value:function(){var n=(0,te.Z)(L().mark(function j(){var A,S,I,c,q,b,k,ee,re,ie,le,E,w;return L().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(A=this.options,S=A.value,I=A.codePosition,c=this.layout,q=c.paddingX,b=c.paddingY,k=c.height,ee=void 0,re=this._width-2*q*this.unitSize,ie=k*this.unitSize*.9,!(d().isUndefined(S)||S==="")){N.next=7;break}return N.abrupt("return");case 7:if(le=f(S),E=V(S,{height:k*this.unitSize,width:re}),ee=S&&E.dataUrl,w=I==="top"?b*this.unitSize:this._height-b*this.unitSize-ie,!(S&&ee)){N.next=14;break}return N.next=14,this.drawImageUrl(ee,{x:le.data.length<90?q*this.unitSize+(re-E.width)/2:q*this.unitSize,y:w,width:le.data.length<90?E.width:re,height:ie});case 14:this.options.isDebug&&(this.ctx.fillStyle="#ddd",this.ctx.fillRect(q*this.unitSize,w,this._width-2*q*this.unitSize,k*this.unitSize));case 15:case"end":return N.stop()}},j,this)}));function s(){return n.apply(this,arguments)}return s}()},{key:"drawBarText",value:function(){var s=this.options,j=s.value,A=s.codePosition,S=this.layout,I=S.paddingX,c=S.paddingY,q=S.height;this.ctx.textBaseline="top",this.ctx.textAlign="center",this.ctx.fillStyle="#333";var b=this.cutTextByWidth(2*this.unitSize,j,this._width-I*2*this.unitSize).slice(0,1)[0]||"";this.ctx.font=2*this.unitSize+'px "Times New Roman"',this.ctx.fillText(b,this._width/2,A==="top"?(c+q*.95)*this.unitSize:this._height-(c+q*1.08)*this.unitSize)}},{key:"measureTextWidth",value:function(s,j){var A=document.createElement("canvas"),S=A.getContext("2d");return S.font=j+"px sans-serif",S.measureText(s).width}},{key:"getCompressedFontSize",value:function(s,j){var A=0;return s.split("").forEach(function(S){A+=/[\x00-\x7F]/.test(S)?1.1:2}),j/A*2}},{key:"drawTexts",value:function(){var s=this,j=this.options,A=j.isPreview,S=j.firstIsTitle,I=j.codePosition,c=j.texts,q=j.showBarValue,b=this.layout,k=b.paddingX,ee=b.paddingY,re=b.height,ie=b.fontSize,le=k*this.unitSize,E=I==="top"?(ee+re+(q?2:0))*this.unitSize:ee*this.unitSize,w=this._width-2*k*this.unitSize,K=ie*this.unitSize;c=d().flatten(c.map(function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=F.text,z=F.forceInLine,X=arguments[1];return z?{text:h,forceInLine:z,isBold:S&&X===0}:s.cutTextByWidth(K*.6*(S&&X===0?1:s.options.fontSize),h,s._width-k*2*s.unitSize).map(function(B){return{text:B,isBold:S&&X===0}})})).slice(0,this.maxLineNumber),this.ctx.textBaseline="top",this.ctx.strokeStyle="#ccc",this.ctx.fillStyle="#000",this.ctx.setLineDash([4,8]);var N=c.filter(function(F){return F.isBold}).length>1;c.forEach(function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=F.text,z=F.isBold,X=F.forceInLine,B=arguments[1];if(h){var x=K*.6*s.options.fontSize,Q=!N&&z&&B===0;if(X){var i=s.measureTextWidth(h,x);i>w?x=s.getCompressedFontSize(h,w):X=!1}z?s.ctx.font="bold "+x+"px sans-serif":s.ctx.font=x+"px sans-serif",s.ctx.textAlign=Q&&!X?"center":"left",A&&s.ctx.strokeRect(-1,E+B*K,s._width+2,K),s.ctx.fillText(h,Q&&!X?le+w/2:le,E+B*K+(K-x)/2)}})}}]),O}()},13476:(lt,Te,t)=>{"use strict";t.d(Te,{E5:()=>re,FW:()=>r,HU:()=>f,IQ:()=>ee,ON:()=>h,Of:()=>n,UD:()=>le,Uc:()=>X,Uf:()=>s,Uk:()=>d,ZO:()=>j,bU:()=>H,cG:()=>Z,gW:()=>w,gv:()=>V,h3:()=>q,ih:()=>k,k1:()=>E,m5:()=>U,oK:()=>A,pI:()=>C,qJ:()=>c,rl:()=>K,t1:()=>N,y3:()=>I,y8:()=>o,yD:()=>b,yS:()=>S,z9:()=>O});var ce=t(88106),g=t(88902),p=t.n(g),L=t(96486),te=t.n(L),R,y;function a(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return p()(B).filter(function(x){return!te().includes(["texts","shorts"],x)}).map(function(x){return{value:B[x],text:(B.texts||{})[x],label:(B.texts||{})[x]}})}var r={URL:1,CONTROL:2,texts:{URL:_l("\u8BB0\u5F55\u94FE\u63A5"),CONTROL:_l("\u5B57\u6BB5")}},o=a(r),d={MEMBER:1,PUBLIC:2,texts:{MEMBER:_l("\u5185\u90E8\u6210\u5458\u8BBF\u95EE\u94FE\u63A5"),PUBLIC:_l("\u516C\u5F00\u94FE\u63A5")}},Z=a(d),H={QR:1,A4:2,BAR:3,texts:{QR:_l("\u6807\u7B7E\u6253\u5370\u673A"),A4:_l("A4\u6253\u5370\u673A"),BAR:_l("\u6761\u7801")}},U=a(H),f={A1x1:1,A1x2:2,A2x2:3,A2x5:4,A3x6:5,texts:{A1x1:"1*1",A1x2:"1*2",A2x2:"2*2",A2x5:"2*5",A3x6:"3*6"}},V=a(f),C={L30x20:1,L40x30:2,L50x30:3,L60x40:4,L70x50:5,L80x60:6,L100x80:7,CUSTOM:100,texts:{L30x20:"30 x 20 mm",L40x30:"40 x 30 mm",L50x30:"50 x 30 mm",L60x40:"60 x 40 mm",L70x50:"70 x 50 mm",L80x60:"80 x 60 mm",L100x80:"100 x 80 mm",CUSTOM:_l("\u81EA\u5B9A\u4E49")}},O=a(C),n=(R={},(0,ce.default)(R,C.L30x20,{width:30,height:20}),(0,ce.default)(R,C.L40x30,{width:40,height:30}),(0,ce.default)(R,C.L50x30,{width:50,height:30}),(0,ce.default)(R,C.L60x40,{width:60,height:40}),(0,ce.default)(R,C.L70x50,{width:70,height:50}),(0,ce.default)(R,C.L80x60,{width:80,height:60}),(0,ce.default)(R,C.L100x80,{width:100,height:80}),R),s={PORTRAIT:1,LANDSCAPE:2,texts:{PORTRAIT:_l("\u7EB5\u5411"),LANDSCAPE:_l("\u6A2A\u5411")}},j=a(s),A={HUGE:1,LARGE:2,MIDDLE:3,SMALL:4,texts:{HUGE:_l("\u8D85\u5927"),LARGE:_l("\u5927"),MIDDLE:_l("\u4E2D"),SMALL:_l("\u5C0F")},shorts:{1:"h",2:"l",3:"m",4:"s"}},S={HUGE:1,LARGE:4,MIDDLE:2,SMALL:3,texts:{HUGE:_l("\u8D85\u5927"),LARGE:_l("\u5927"),MIDDLE:_l("\u4E2D"),SMALL:_l("\u5C0F")},shorts:{1:"h",4:"l",2:"m",3:"s"}},I=a(A),c=a(S),q={TOP:1,BOTTOM:2,LEFT:3,RIGHT:4,texts:{TOP:_l("\u9876\u90E8"),BOTTOM:_l("\u5E95\u90E8"),LEFT:_l("\u5DE6\u8FB9"),RIGHT:_l("\u53F3\u8FB9")}},b=a(q),k={L:1,M:0,Q:3,H:2,texts:{L:"7%",M:"15%",Q:"25%",H:"35%"}},ee=a(k),re={B30x20:1,B40x30:2,B50x30:3,B60x40:4,B70x50:5,B80x60:6,B100x80:7,CUSTOM:100,texts:{B30x20:"30 x 20 mm",B40x30:"40 x 30 mm",B50x30:"50 x 30 mm",B60x40:"60 x 40 mm",B70x50:"70 x 50 mm",B80x60:"80 x 60 mm",B100x80:"100 x 80 mm",CUSTOM:_l("\u81EA\u5B9A\u4E49")}},ie=a(re),le=(y={},(0,ce.default)(y,re.B30x20,{width:30,height:20}),(0,ce.default)(y,re.B40x30,{width:40,height:30}),(0,ce.default)(y,re.B50x30,{width:50,height:30}),(0,ce.default)(y,re.B60x40,{width:60,height:40}),(0,ce.default)(y,re.B70x50,{width:70,height:50}),(0,ce.default)(y,re.B80x60,{width:80,height:60}),(0,ce.default)(y,re.B100x80,{width:100,height:80}),y),E={PORTRAIT:1,LANDSCAPE:2,texts:{PORTRAIT:_l("\u7EB5\u5411"),LANDSCAPE:_l("\u6A2A\u5411")}},w=a(E),K={TOP:1,BOTTOM:2,texts:{TOP:_l("\u9876\u90E8"),BOTTOM:_l("\u5E95\u90E8")}},N=a(K),F={LARGE:1,MIDDLE:2,SMALL:3,texts:{LARGE:_l("\u5927"),MIDDLE:_l("\u4E2D"),SMALL:_l("\u5C0F")}},h=a(F);function z(B,x){var Q=p()(B).filter(function(m){return m!=="texts"}),i=te().find(Q,function(m){return B[m]===x});return te().get(B,"texts."+i)}function X(){var B,x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Q=x.printType,i=x.labelSize,m=x.layout,v=(B={},(0,ce.default)(B,H.QR,"qr_code"),(0,ce.default)(B,H.A4,"qr_code"),(0,ce.default)(B,H.BAR,"a-barcode"),B)[Q]||"doc",W="";return i===100?W=_l("%0 x %1 mm",x.labelCustomWidth,x.labelCustomHeight):Q===H.QR?W=z(C,i):Q===H.A4?(W=z(f,m),W&&(W="A4("+W+")")):Q===H.BAR&&(W=z(re,i)),{icon:v,text:W}}},93224:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>a,q:()=>te});var ce=t(52945),g=t.n(ce),p=t(48296),L=t.n(p),te={L:1,M:0,Q:3,H:2},R={gap:0,render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:te.M,background:"#ffffff",foreground:"#000000"},y=function(o){o=g()({},R,o);var d=new(L())(o.typeNumber,o.correctLevel);d.addData(o.value),d.make();var Z=document.createElement("canvas");Z.width=o.width,Z.height=o.height;var H=Z.getContext("2d");H.fillStyle=o.background,H.fillRect(0,0,Z.width,Z.height);for(var U=(o.width-o.gap*2)/d.getModuleCount(),f=(o.height-o.gap*2)/d.getModuleCount(),V=0;V<d.getModuleCount();V++)for(var C=0;C<d.getModuleCount();C++){H.fillStyle=d.isDark(V,C)?o.foreground:o.background;var O=Math.ceil((C+1)*U)-Math.floor(C*U),n=Math.ceil((V+1)*f)-Math.floor(V*f);H.fillRect(Math.round(C*U)+o.gap,Math.round(V*f)+o.gap,O,n)}return Z.toDataURL()};const a=/^(1887|7596|7798)$/.test(t.j)?null:y},35408:(lt,Te,t)=>{"use strict";t.d(Te,{$w:()=>Z,VN:()=>d});var ce=t(86735),g=t(67294),p=t(71893);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(1952);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(55249);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(75314);var y=(0,ce.Z)([`
  position: fixed;
  width: 100%;
  height: 100vh;
  top: 0;
  left: 0;
  z-index: 999;
  background: #fff;
`],[`
  position: fixed;
  width: 100%;
  height: 100vh;
  top: 0;
  left: 0;
  z-index: 999;
  background: #fff;
`]),a=p.ZP.div(y);function r(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return g.createElement(a,{style:H.zIndex?{zIndex:H.zIndex}:{}},g.createElement(te.Z,H))}var o=null,d=function(U){return(0,L.Z)(r,U)},Z=function(U){return(0,L.Z)(R.Z,U)}},16542:(lt,Te,t)=>{"use strict";t.d(Te,{Q:()=>ie});var ce=t(8177),g=t.n(ce),p=t(94942),L=t.n(p),te=t(36803),R=t(99663),y=t(22600),a=t(88239),r=t(20559),o=t.n(r),d=t(44894),Z=t(93224),H=[{empty:!0},{col:1,row:1,width:340,fontSize:22,secFontSize:21},{col:1,row:2,width:220,textWidth:270,textLeft:24,fontSize:20,secFontSize:18},{col:2,row:2,width:150,textWidth:200,textLeft:12,fontSize:15,secFontSize:15},{col:2,row:5,width:100,textWidth:145,textLeft:6,fontSize:10,secFontSize:10},{col:3,row:6,topLines:2,width:68,textWidth:86,textLeft:6,fontSize:10,secFontSize:10}],U=[{padding:10,width:92,fontSize:12},{padding:10,width:106,fontSize:12},{padding:15,width:105,topLines:2,textWidth:125,textLeft:12,fontSize:16,secFontSize:16},{padding:18,width:122,topLines:3,textWidth:140,textLeft:14,fontSize:16,secFontSize:16},{padding:28,width:180,topLines:3,textWidth:180,textLeft:18,fontSize:20,secFontSize:20}],f={mm:{width:210,height:297},px:{width:630,height:891}},V=[{mm:{width:20,height:30},px:{width:112,height:168}},{mm:{width:30,height:40},px:{width:126,height:168}},{mm:{width:60,height:40},px:{width:270,height:180}},{mm:{width:80,height:60},px:{width:296,height:220}},{mm:{width:100,height:80},px:{width:420,height:336}}],C=t(23557),O=t(13476),n=t(27326),s=t.n(n),j=t(96486),A=t.n(j),S,I,c;function q(E,w,K,N,F){var h={};return Object.keys(N).forEach(function(z){h[z]=N[z]}),h.enumerable=!!h.enumerable,h.configurable=!!h.configurable,("value"in h||h.initializer)&&(h.writable=!0),h=K.slice().reverse().reduce(function(z,X){return X(E,w,z)||z},h),F&&h.initializer!==void 0&&(h.value=h.initializer?h.initializer.call(F):void 0,h.initializer=void 0),h.initializer===void 0&&(Object.defineProperty(E,w,h),h=null),h}function b(E,w,K){w=w||12,K=K||100;var N=document.createElement("span");N.style.fontSize=w+"px",N.innerText=E,document.body.appendChild(N);var F=N.offsetWidth;return N.remove(),F<=K?E:E.slice(0,Math.floor(K/w))}function k(E,w,K){var N=arguments.length>3&&arguments[3]!==void 0?arguments[3]:3;E=E.slice(0,300);var F=void 0,h=0,z=[],X=void 0,B=void 0,x=document.createElement("canvas"),Q=x.getContext("2d");for(Q.textBaseline="hanging",Q.font=K+"px PingFang SC";E.length;){for(X=E.length;Q.measureText(E.substr(0,X)).width>w;X--);if(F=E.substr(0,X),X!==E.length)for(B=0;F.indexOf(" ",B)!==-1;B=F.indexOf(" ",B)+1);if(z.push(F.substr(0,B||F.length)),h=Math.max(h,Q.measureText(z[z.length-1]).width),E=E.substr(z[z.length-1].length,E.length),E.length&&z.length+1>N){z[z.length-1]=z[z.length-1].slice(0,-1)+"...";break}}return z}function ee(E){var w=E.text,K=E.fontSize,N=K===void 0?12:K,F=E.color,h=F===void 0?"#333":F,z=E.width,X=z===void 0?100:z,B=E.isCenter,x=B===void 0?!1:B,Q=E.lineHeight,i=Q===void 0?1.2:Q,m=E.pixelScale,v=m===void 0?1:m,W=E.firstIsBigger,P=W===void 0?!1:W,u=E.bolder,l=u===void 0?!1:u,T=E.lineOverEllipsis,G=T===void 0?!1:T,D=void 0;A().isArray(w)?D=w:D=[w],D[0]||(P=!1),v&&v>1&&(X=X*v,N=N*v),D=D.filter(function(ae){return ae});var M=document.createElement("canvas");M.width=X,M.height=N*i*D.length;var se=M.getContext("2d");return se.textBaseline="hanging",x&&(se.textAlign="center"),se.fillStyle=h,se.font=(l?"bold ":"")+N+"px PingFang SC",D.forEach(function(ae,ne){G&&se.measureText(ae).width>X&&(ae=k(ae,X,N,1)[0]),P&&ne===0?(se.fillStyle="#333",se.font="bold "+(N+1)+"px PingFang SC",se.fillText(ae,x?X/2:0,N*i*ne+2),se.fillStyle=h,se.font=N+"px PingFang SC"):se.fillText(ae,x?X/2:0,N*i*ne+2)}),A().isEmpty(D)&&(M.height=1),M}function re(E){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{correctLevel:Z.q.H};return(0,Z.Z)((0,a.default)({width:100,height:100,value:E},w))}var ie=(c=function(){function E(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=w.worksheetName,N=w.printType,F=w.layout,h=w.printData,z=w.correctLevel,X=w.config;(0,R.default)(this,E),this.worksheetName=K,this.worksheetName=K,this.correctLevel=z,this.printType=N,this.printData=h,this.layout=F,this.config=X}return(0,y.default)(E,[{key:"render",value:function(){if(this.printType===O.bU.A4)return this.renderA4();if(this.printType===O.bU.QR)return this.renderQr();if(this.printType===O.bU.BAR)return this.renderBar()}},{key:"renderQr",value:function(){var w=(0,te.Z)(L().mark(function N(){var F,h,z,X,B,x;return L().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:F=this.config,h=void 0,z=void 0,F.labelSize===O.pI.CUSTOM?(h=F.labelCustomWidth,z=F.labelCustomHeight):(h=O.Of[F.labelSize].width,z=O.Of[F.labelSize].height),this.doc=new(s())(this.config.layout===O.Uf.PORTRAIT?"p":"l","mm",[h,z],!0),this.doc.setProperties({title:"\u6253\u5370\u4E8C\u7EF4\u7801"}),X=!0;case 6:if(!this.printData.length){i.next=16;break}return B=this.printData.shift(),X||this.doc.addPage(),x=(0,C.ot)(this.config,B.value,B.texts,{pixelRadio:1.5}),i.next=12,x.render();case 12:this.doc.addImage(x.canvas.toDataURL(),"PNG",0,0,this.doc.internal.pageSize.getWidth(),this.doc.internal.pageSize.getHeight(),"","FAST"),X=!1,i.next=6;break;case 16:case"end":return i.stop()}},N,this)}));function K(){return w.apply(this,arguments)}return K}()},{key:"renderBar",value:function(){var w=(0,te.Z)(L().mark(function N(){var F,h,z,X,B,x;return L().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:F=this.config,h=void 0,z=void 0,F.labelSize===O.E5.CUSTOM?(h=F.labelCustomWidth,z=F.labelCustomHeight):(h=O.UD[F.labelSize].width,z=O.UD[F.labelSize].height),this.doc=new(s())(this.config.layout===O.k1.PORTRAIT?"p":"l","mm",[h,z],!0),this.doc.setProperties({title:"\u6253\u5370\u6761\u5F62\u7801"}),X=!0;case 6:if(!this.printData.length){i.next=16;break}return B=this.printData.shift(),X||this.doc.addPage(),x=(0,C.C5)(this.config,B.value,B.texts,{pixelRadio:1.5}),i.next=12,x.render();case 12:this.doc.addImage(x.canvas.toDataURL(),"PNG",0,0,this.doc.internal.pageSize.getWidth(),this.doc.internal.pageSize.getHeight(),"","FAST"),X=!1,i.next=6;break;case 16:case"end":return i.stop()}},N,this)}));function K(){return w.apply(this,arguments)}return K}()},{key:"renderA4",value:function(){var K=H;this.size=f,this.option=K[this.layout],this.doc=new(s())("p","mm","a4",!0),this.doc.setProperties({title:"\u6253\u5370\u4E8C\u7EF4\u7801"});for(var N=this.option,F=N.col,h=N.row,z=A().chunk(this.printData,F&&h?F*h:1),X=0;X<z.length;X++)X&&this.doc.addPage(),this.layout===1?this.render1x1(z[X]):this.renderPage(z[X])}},{key:"renderPage",value:function(K){var N=void 0,F=this.option,h=F.col,z=F.row,X=F.secFontSize,B=F.textLeft,x=F.width,Q=F.topLines,i=this.option.textWidth,m=2,v=this.layout===3;i=i||x;for(var W=0;W<z;W++)for(var P=0;P<h;P++){var u=W*h+P;if(!K[u])return;var l=K[u].texts.map(function(ne){return ne.text}),T=re(K[u].value,{correctLevel:this.correctLevel||Z.q.H}),G=ee({text:l[0]?k(l[0],(i||x)-5,X,Q):_l("\u672A\u547D\u540D"),fontSize:X,color:"#333",width:i,lineHeight:1.5,pixelScale:m,bolder:!0});l.length>1&&(N=ee({text:l.slice(1),fontSize:X,color:"#333",width:i,lineHeight:1.5,pixelScale:m,lineOverEllipsis:!0}));var D=v?(f.px.width-h*x)/(h+1):(f.px.width-h*(x+B+i))/(h+1),M=v?(f.px.height-z*(x+B+i))/(z+1):(f.px.height-z*x)/(z+1),se=v?D+(D+x)*P:D+(D+x+B+i)*P,ae=v?M+(M+x+B+i)*W:M+(M+x)*W;this.doc.addImage(T,"JPEG",se/f.px.width*f.mm.width,ae/f.px.width*f.mm.width,x/f.px.width*f.mm.width,x/f.px.width*f.mm.width,"","FAST"),this.doc.addImage(G.toDataURL(),"JPEG",(v?se+x/2-(G.height-(N?N.height:0))/m/2:se+x+B)/f.px.width*f.mm.width,(v?ae+x+B-G.height/m:ae+x/2-(G.height+(N?N.height:0))/m/2)/f.px.width*f.mm.width,G.width/m/f.px.width*f.mm.width,G.height/m/f.px.width*f.mm.width,"","FAST",v?270:0),N&&this.doc.addImage(N.toDataURL(),"JPEG",(v?se+x/2-(G.height-(N?N.height:0))/m/2-N.height/m:se+x+B)/f.px.width*f.mm.width,(v?ae+x+B-N.height/m:ae+x/2-(G.height+(N?N.height:0))/m/2+G.height/m)/f.px.width*f.mm.width,N.width/m/f.px.width*f.mm.width,N.height/m/f.px.width*f.mm.width,"","FAST",v?270:0)}}},{key:"render1x1",value:function(K){var N=void 0,F=void 0,h=void 0,z=this.option,X=z.secFontSize,B=z.textWidth,x=z.width,Q=2,i=re(K[0].value,{correctLevel:this.correctLevel||Z.q.H}),m=K[0].texts.map(function(u){return u.text}),v=ee({text:m[0]?k(m[0],B||x,X):_l("\u672A\u547D\u540D"),fontSize:X,color:"#333",width:B||x,isCenter:!0,lineHeight:1.5,pixelScale:Q,bolder:!0}),W=v.width/Q,P=v.height/Q;m.length>1&&(N=ee({text:m.slice(1),fontSize:X,color:"#333",width:B||x,isCenter:!0,lineHeight:1.5,pixelScale:Q,lineOverEllipsis:!0}),F=N.width/Q,h=N.height/Q),this.doc.addImage(i,"JPEG",(f.px.width-x)/2/f.px.width*f.mm.width,(f.px.height-x-220)/2/f.px.height*f.mm.height,x/f.px.width*f.mm.width,x/f.px.width*f.mm.width,"","FAST"),this.doc.addImage(v.toDataURL(),"JPEG",(f.px.width-x)/2/f.px.width*f.mm.width,((f.px.height-x-220)/2+43+x)/f.px.height*f.mm.height,W/f.px.width*f.mm.width,P/f.px.width*f.mm.width,"","FAST"),N&&this.doc.addImage(N.toDataURL(),"JPEG",(f.px.width-x)/2/f.px.width*f.mm.width,((f.px.height-x-220)/2+43+x+P)/f.px.height*f.mm.height,F/f.px.width*f.mm.width,h/f.px.width*f.mm.width,"","FAST")}},{key:"openDialog",value:function(){var K=this;this.$dialog=document.createElement("div"),this.$dialog.innerHTML=`
      <div class="previewHeader">
          `+(this.worksheetName?'<div class="worksheetName">'+this.worksheetName+"</div>":"")+`
        <i class="icon icon-delete closeDialog"></i>
      </div>
      <div class="previewBody flex">
      </div>
    `,this.$dialog.classList.add("worksheetRowsQrPreview"),this.$dialog.querySelector(".closeDialog").addEventListener("click",this.closeDialog),document.body.appendChild(this.$dialog),setTimeout(function(){K.$dialog.classList.add("visible")},100),o().embed(this.doc.output("bloburl"),this.$dialog.querySelector(".previewBody"))}},{key:"closeDialog",value:function(){var K=this;this.$dialog.classList.remove("visible"),setTimeout(function(){K.$dialog.remove()},400)}}]),E}(),q(c.prototype,"closeDialog",[d.Nj],g()(c.prototype,"closeDialog"),c.prototype),c);const le=function(){var E=(0,te.Z)(L().mark(function w(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},N=K.worksheetName,F=K.printType,h=K.layout,z=K.printData,X=K.correctLevel,B=K.config,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},Q;return L().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return console.time("render qr"),Q=new ie({worksheetName:N,printType:F,layout:h,printData:z,correctLevel:X,config:B}),m.next=4,Q.render();case 4:console.timeEnd("render qr"),Q.openDialog(),x();case 7:case"end":return m.stop()}},w,this)}));return function(){return E.apply(this,arguments)}}()},19969:(lt,Te,t)=>{"use strict";t.d(Te,{C:()=>d});var ce=t(46593),g=t.n(ce),p=t(94942),L=t.n(p),te=t(36803),R=t(99663),y=t(22600),a=t(96486),r=t.n(a),o=t(93224),d=function(){function Z(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,R.default)(this,Z),this.options=H,this.setOptions(),this.setLayout(),this.init()}return(0,y.default)(Z,[{key:"render",value:function(){var H=(0,te.Z)(L().mark(function f(){return L().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(this.options.type!=="p"){C.next=5;break}return C.next=3,this.renderPortrait();case 3:C.next=7;break;case 5:return C.next=7,this.renderLandscape();case 7:case"end":return C.stop()}},f,this)}));function U(){return H.apply(this,arguments)}return U}()},{key:"setOptions",value:function(){var U=this.options,f=U.pixelRadio,V=f===void 0?2:f,C=U.width,O=C===void 0?100:C,n=U.height,s=n===void 0?100:n,j=U.fontSize,A=j===void 0?1:j,S=U.firstIsTitle;this.pixelRadio=V,this.width=O*V,this.height=s*V,this.firstIsTitle=S,this.fontSize=A||1}},{key:"setLayout",value:function(){var U=this.options.size;this.layout={paddingX:3,paddingY:2,fontSize:5},this.options.type==="p"?this.layout.codeSize={s:11,m:16,l:20,h:24}[U]:this.layout.codeSize={s:13,m:16,l:20,h:24}[U]}},{key:"init",value:function(){var U=this.options.type,f=this.layout,V=f.paddingY,C=f.codeSize,O=f.fontSize,n=this.canvas||document.createElement("canvas");n.width=this.width,n.height=this.height;var s=n.getContext("2d");this.canvas=n,this.ctx=s,s.fillStyle="#fff",s.fillRect(0,0,this.width,this.height),this.unitSize=Math.min(this.width,this.height)/30,this.maxLineNumber=U==="p"?Math.floor((this.height-(V+C+2)*this.unitSize)/(O*this.unitSize)):5}},{key:"cutTextByWidth",value:function(U,f,V,C){var O=[];if(this.ctx.font=(C?"bold ":"")+U*this.fontSize+"px sans-serif",this.ctx.measureText(f).width<V)return[f];for(var n="",s=0;s<f.length;s++){n+=f[s];var j=this.ctx.measureText(n).width;j>V&&(O.push(n.slice(0,-1)),n=n.slice(-1))}return n&&O.push(n),O}},{key:"measureTextWidth",value:function(U,f){var V=document.createElement("canvas"),C=V.getContext("2d");return C.font=f+"px sans-serif",C.measureText(U).width}},{key:"getCompressedFontSize",value:function(U,f){var V=0;return U.split("").forEach(function(C){V+=/[\x00-\x7F]/.test(C)?1.1:2}),f/V*2}},{key:"renderText",value:function(U){var f=U.x,V=f===void 0?0:f,C=U.y,O=C===void 0?0:C,n=U.fontSize,s=U.content,j=U.width,A=U.isCenter,S=U.forceInLine,I=U.isBold,c=U.color,q=c===void 0?"#222":c;this.ctx.textBaseline="top";var b=n*.55*this.fontSize;if(S){var k=this.measureTextWidth(s,b);k>j?b=this.getCompressedFontSize(s,j):S=!1}I?this.ctx.font="bold "+b+"px sans-serif":this.ctx.font=b+"px sans-serif",this.ctx.textAlign=A&&!S?"center":"left",this.ctx.fillStyle=q,this.ctx.fillText(s,A&&!S?V+j/2:V,O+(n-b)/2)}},{key:"renderVerticalTexts",value:function(U){var f=this,V=U.x,C=V===void 0?0:V,O=U.y,n=O===void 0?0:O,s=U.fontSize,j=U.textList,A=U.color,S=A===void 0?"#222":A,I=U.width,c=U.firstIsBold,q=this.options.isPreview,b=n,k=r().flatten(j.map(function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ie=re.text,le=re.forceInLine,E=arguments[1];return le?{text:ie,forceInLine:le,isBold:f.firstIsTitle&&E===0}:f.cutTextByWidth(s*.55,ie,I,c&&f.firstIsTitle&&E===0).map(function(w){return{text:w,isBold:f.firstIsTitle&&E===0}})})).slice(0,this.maxLineNumber),ee=k.filter(function(re){return re.isBold}).length>1;k.forEach(function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ie=re.text,le=re.forceInLine,E=re.isBold,w=arguments[1],K=c&&E;if(ie===""||r().isUndefined(ie)){b+=s;return}if(f.renderText({x:C,y:b,fontSize:s,content:ie,width:I,forceInLine:le,isBold:K,isCenter:f.options.type==="p"&&K&&w===0&&!ee,color:S}),q){var N=s/40;f.ctx.strokeStyle="#ccc",f.ctx.lineWidth=N,f.ctx.setLineDash([N*2,N*4]),f.ctx.strokeRect(-1*N,b,f.width+2*N,s)}b+=s})}},{key:"drawImageUrl",value:function(U){var f=this,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},C=V.x,O=V.y,n=V.width,s=V.height;return new(g())(function(j){var A=new Image;A.onload=function(){var S=A.width*s/A.height;S<n&&(C+=(n-S)/2),f.ctx.drawImage(A,C,O,S,s),j()},A.src=U})}},{key:"renderPortrait",value:function(){var H=(0,te.Z)(L().mark(function f(){var V,C,O,n,s,j,A,S,I,c,q,b,k;return L().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(V=this.options,C=V.qrPos,O=C===void 0?"top":C,n=V.texts,s=n===void 0?[]:n,j=V.url,A=V.correctLevel,S=this.layout,I=S.paddingX,c=S.paddingY,q=S.codeSize,b=S.fontSize,this.renderVerticalTexts({textList:s,x:I*this.unitSize,y:O==="top"?(c+q+2)*this.unitSize:c*this.unitSize,width:this.width-I*2*this.unitSize,fontSize:b*this.unitSize,firstIsBold:!0}),k=j&&(0,o.Z)({value:j,correctLevel:A}),!k){re.next=7;break}return re.next=7,this.drawImageUrl(k,{x:(this.width-q*this.unitSize)/2,y:O==="top"?c*this.unitSize:this.height-(c+q)*this.unitSize,width:q*this.unitSize,height:q*this.unitSize});case 7:case"end":return re.stop()}},f,this)}));function U(){return H.apply(this,arguments)}return U}()},{key:"renderLandscape",value:function(){var H=(0,te.Z)(L().mark(function f(){var V,C,O,n,s,j,A,S,I,c,q,b,k;return L().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(V=this.options,C=V.size,O=V.texts,n=V.qrPos,s=V.url,j=V.correctLevel,A=this.layout,S=A.paddingX,I=A.paddingY,c=A.fontSize,q=A.codeSize,b={s:2,m:1,l:0,h:0}[C],this.renderVerticalTexts({textList:O.slice(0,b).slice(0,this.maxLineNumber),x:S*this.unitSize,y:I*this.unitSize,width:this.width-S*2*this.unitSize,fontSize:c*this.unitSize,firstIsBold:!0}),this.renderVerticalTexts({textList:O.slice(b).slice(0,this.maxLineNumber),x:n==="left"?(S+q+2)*this.unitSize:S*this.unitSize,y:(I+c*b)*this.unitSize,width:this.width-S*2*this.unitSize-(q+2)*this.unitSize,fontSize:c*this.unitSize}),k=(0,o.Z)({value:s,correctLevel:j}),!k){re.next=9;break}return re.next=9,this.drawImageUrl(k,{x:n==="left"?S*this.unitSize:this.width-(S+q)*this.unitSize,y:C==="l"?(this.height-q*this.unitSize)/2:(I+c*b+2)*this.unitSize,width:q*this.unitSize,height:q*this.unitSize});case 9:case"end":return re.stop()}},f,this)}));function U(){return H.apply(this,arguments)}return U}()}]),Z}();window.QrLabel=d},23557:(lt,Te,t)=>{"use strict";t.d(Te,{C5:()=>f,T9:()=>r,U0:()=>U,jn:()=>H,ot:()=>d});var ce=t(88106),g=t(88239);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(13476);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(83298);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(19969);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(56826);var y=t(96486),a=t.n(y);function r(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},C=V.printType,O=V.sourceType,n=V.sourceControlId,s=V.controls,j=s===void 0?[]:s;if(O===p.FW.URL)return{type:1,value:(a().find(j,{attribute:1})||{}).controlId,forceInLine:!1,name:""};if(O===p.FW.CONTROL&&n&&C===p.bU.BAR)return{type:2,value:(a().find(j,{controlId:n})||{}).controlName,forceInLine:!1,name:""};if(O===p.FW.CONTROL&&n)return{type:1,value:n,forceInLine:!1,name:""}}var o=8;function d(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},C=arguments[1],O,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},j=void 0,A=void 0;if(V.labelSize===p.pI.CUSTOM)j=V.labelCustomWidth*o,A=V.labelCustomHeight*o;else{var S=p.Of[V.labelSize].width*o,I=p.Of[V.labelSize].height*o;j=V.layout===p.Uf.LANDSCAPE?S:I,A=V.layout===p.Uf.LANDSCAPE?I:S}var c=void 0;V.labelSize===p.pI.CUSTOM?c=j>A?"l":"p":c=V.layout===p.Uf.PORTRAIT?"p":"l";var q=new te.C((0,g.default)({type:c,size:(V.layout===p.Uf.PORTRAIT?p.oK:p.yS).shorts[Number(V.codeSize)],fontSize:V.fontSize,width:j,height:A,firstIsTitle:V.firstIsBold,correctLevel:V.codeFaultTolerance||1,qrPos:(O={},(0,ce.default)(O,p.h3.TOP,"top"),(0,ce.default)(O,p.h3.BOTTOM,"bottom"),(0,ce.default)(O,p.h3.LEFT,"left"),(0,ce.default)(O,p.h3.RIGHT,"right"),O)[V.position],url:C,texts:n},s));return q}function Z(){for(var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,O="",n=0,s=0;s<V.length;s++){var j=new Blob([V[s]]).size;if(n+j<=C)O+=V[s],n+=j;else break}return O}function H(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},C=V.showTexts,O=V.firstIsBold,n=V.showControlName,s=V.controls,j=V.emptySetAsSample,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return C.map(function(S,I){if(S){var c={forceInLine:S.forceInLine};if(S.type===2)return(0,g.default)({},c,{text:S.value});var q=a().find(s,{controlId:S.value});if(!q)return(0,g.default)({},c,{text:""});var b=(0,L.Z)((0,g.default)({},q,{value:A[S.value]}));return(0,g.default)({},c,{text:n&&!(O&&I===0)?(S.name||q.controlName)+": "+b:b})}}).slice(0,100)}function U(V){var C=V.printType,O=V.sourceType,n=V.sourceControlId,s=V.row,j=s===void 0?{}:s,A=V.urls,S=A===void 0?{}:A,I=V.index,c=V.controls,q="";if(O===p.FW.URL)q=S[j.rowid]||S[I];else if(O===p.FW.CONTROL){var b=a().find(c,{controlId:n});b&&j[n]&&(q=(0,L.Z)((0,g.default)({},b,{value:j[n]})))}return C===p.bU.BAR?q=Z(q.replace(/[^\x00-\x7F]/g,""),30):q=Z(q,150*3),q}function f(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},C=arguments[1],O,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},j=s.isPreview,A=j===void 0?!1:j,S=void 0,I=void 0;if(V.labelSize===p.E5.CUSTOM)S=V.labelCustomWidth*o,I=V.labelCustomHeight*o;else{var c=p.UD[V.labelSize].width*o,q=p.UD[V.labelSize].height*o;S=V.layout===p.k1.LANDSCAPE?c:q,I=V.layout===p.k1.LANDSCAPE?q:c}var b=new R.B({isPreview:A,value:C,width:S,height:I,firstIsTitle:V.firstIsBold,fontSize:V.fontSize,showBarValue:V.showBarValue,codePosition:(O={},(0,ce.default)(O,p.rl.TOP,"top"),(0,ce.default)(O,p.rl.BOTTOM,"bottom"),O)[V.position],size:["l","m","s"][Number(V.codeSize)-1],texts:n});return b}},99479:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>C});var ce=t(69288),g=t(47426),p=t(3540),L=t(85105),te=t.n(L),R=t(99663),y=t(22600),a=t(49135),r=t(93196),o=t(67294),d=t(45697),Z=t.n(d),H=t(96486),U=t.n(H),f,V,C=(V=f=function(O){(0,r.default)(n,O);function n(s){(0,R.default)(this,n);var j=(0,a.default)(this,(n.__proto__||te()(n)).call(this,s));return j.state={filterName:s.filterName||_l("\u81EA\u5B9A\u4E49\u7B5B\u9009"),filterType:s.filterType||1},j}return(0,y.default)(n,[{key:"componentDidMount",value:function(){this.form&&this.form.querySelector(".sheetName").focus()}},{key:"render",value:function(){var j=this,A=this.props,S=A.title,I=A.visible,c=A.isCharge,q=A.onClose,b=A.onSave,k=this.state,ee=k.filterName,re=k.filterType;return o.createElement(ce.Z,{className:"saveWorksheetFilter workSheetForm",visible:I,anim:!1,title:S||_l("\u4FDD\u5B58\u7B5B\u9009\u5668"),width:480,onCancel:q,onText:_l("\u4FDD\u5B58"),onOk:function(){if(!U().trim(ee)){alert(_l("\u8BF7\u8F93\u5165\u7B5B\u9009\u5668\u540D\u79F0"),3);return}b({filterName:ee,filterType:re}),q()}},o.createElement("div",{className:"formItem flexRow",ref:function(le){return j.form=le}},o.createElement("div",{className:"label"},_l("\u540D\u79F0")),o.createElement("div",{className:"content"},o.createElement("div",{className:"flex content"},o.createElement(p.Z,{className:"sheetName w100",value:ee,onChange:function(le){j.setState({filterName:le})}})))),!md.global.Account.isPortal&&o.createElement("div",{className:"formItem flexRow"},o.createElement("div",{className:"label"},_l("\u4F7F\u7528\u8303\u56F4")),o.createElement("div",{className:"content"},o.createElement(g.ZP,{data:[{text:_l("\u4E2A\u4EBA"),value:1},{text:_l("\u516C\u5171"),value:2,disabled:!c}],checkedValue:re,onChange:function(le){j.setState({filterType:le})},size:"small"}))))}}]),n}(o.Component),f.propTypes={title:Z().string,visible:Z().bool,isCharge:Z().bool,onClose:Z().func,onSave:Z().func,filterName:Z().string,filterType:Z().number},V)},82690:(lt,Te,t)=>{"use strict";t.d(Te,{W:()=>N,Z:()=>h});var ce=t(42185),g=t(88106),p=t(88902),L=t.n(p),te=t(63239),R=t.n(te),y=t(88239),a=t(12424),r=t(86735),o=t(67294),d=t(45697),Z=t.n(d),H=t(93967),U=t.n(H),f=t(37727),V=t(71893),C=t(44253),O=t(86674),n=t(77637),s=t(27850),j=t(96486),A=t.n(j),S=t(26358),I=(0,r.Z)([`
  display: flex;
  flex-wrap: wrap;
  flex: 1;
  padding: `,`;
`],[`
  display: flex;
  flex-wrap: wrap;
  flex: 1;
  padding: `,`;
`]),c=(0,r.Z)([`
  font-size: 13px;
  color: #757575;
  max-width: 140px;
  min-width: 60px;
  text-align: right;
  line-height: 1.2em;
  padding-top: 8.2px;
  font-weight: bold;
`],[`
  font-size: 13px;
  color: #757575;
  max-width: 140px;
  min-width: 60px;
  text-align: right;
  line-height: 1.2em;
  padding-top: 8.2px;
  font-weight: bold;
`]),q=(0,r.Z)([`
  flex: 1;
  width: 0;
  margin: 0 10px;
  min-height: 34px;
`],[`
  flex: 1;
  width: 0;
  margin: 0 10px;
  min-height: 34px;
`]),b=(0,r.Z)([`
  position: relative;
  height: 32px;
  text-align: left;
  margin-bottom: 12px;
  margin-left: 16px;
  `,`
  `,`
  .Button {
    font-weight: 500;
  }
  &.operateIsNewLine {
    padding-left: 54px;
  }
`],[`
  position: relative;
  height: 32px;
  text-align: left;
  margin-bottom: 12px;
  margin-left: 16px;
  `,`
  `,`
  .Button {
    font-weight: 500;
  }
  &.operateIsNewLine {
    padding-left: 54px;
  }
`]),k=V.ZP.div(I,function(z){var X=z.isConfigMode;return X?"0 10px":"0 10px 0 20px"}),ee=V.ZP.div(function(z){var X=z.maxWidth,B=z.isConfigMode,x=z.isLastLine,Q=z.highlight;return`
  display: flex;
  margin-bottom: `+(x?0:8)+`px;
  width: `+X+`;
  `+(B?`
    cursor: pointer;
    padding: 10px 0;
    margin-bottom: 0px;
    box-sizing: border-box;
    border: 1px solid `+(Q?"#2196f3":"transparent")+`;
    > * {
      pointer-events: none;
      user-select: none;
    }
  `:"")+`
  &.isFirstFullLine {
    width: auto;
    max-width: `+X+`;
    .content {
      width: auto;
    }
  }
`}),re=V.ZP.div(c),ie=V.ZP.div(q),le=V.ZP.div(b,function(z){var X=z.isConfigMode;return X?`
      padding: 10px 0;
      `:""},function(z){var X=z.isFilterComp;return X?`
          margin-bottom: 0px;
          `:""}),E=V.ZP.div(function(z){var X=z.showQueryBtn;return`
  // position: absolute;
  // top: 6px;
  // right: -`+(X?64:43)+`px;
  display: inline-block;
  margin-left: 20px;
  cursor: pointer;
  color: #2196f3;
  font-size: 13px;
  .icon {
    margin-right: 2px;
    font-size: 15px;
  }
  &:hover {
    color: #1565c0;
  }
`});function w(z){return String((z.advancedSetting||{}).direction)==="1"}function K(z){return z.type===O.DN.SHEET_FIELD&&(z.type=z.sourceControlType),z.type===O.DN.SUBTOTAL&&z&&(z.type=z.enumDefault2||6),z.type===O.DN.FORMULA_DATE&&(z.type=z.enumDefault===2?15:6),z}function N(z){return delete z.control,z.dataType===29&&z.filterType===2&&(z.filterType=24),z}function F(z){var X={};return z.forEach(function(B,x){var Q=(A().get(B,"control.controlId")||A().get(B,"controlId"))+"-"+x;(!A().isEmpty(B.value)||!A().isEmpty(B.values))&&(X[Q]={values:B.values,value:B.value})}),X}function h(z){var X=z.from,B=z.worksheetId,x=z.isConfigMode,Q=z.isFilterComp,i=z.activeFilterId,m=z.projectId,v=z.appId,W=z.queryText,P=z.className,u=z.view,l=u===void 0?{}:u,T=z.colNum,G=z.operateIsNewLine,D=z.firstIsFullLine,M=z.fullShow,se=z.showExpand,ae=z.setFullShow,ne=z.controls,de=ne===void 0?[]:ne,Ce=z.filters,he=Ce===void 0?[]:Ce,fe=z.navGroupFilters,Ee=fe===void 0?[]:fe,Y=z.hideStartIndex,oe=z.updateQuickFilter,ve=z.resetQuickFilter,ue=z.onFilterClick,pe=(0,o.useState)({}),Se=(0,a.Z)(pe,2),ye=Se[0],J=Se[1],me=(0,o.useRef)(),be=A().isUndefined(z.showQueryBtn)?A().get(l,"advancedSetting.enablebtn")==="1":z.showQueryBtn,xe=(0,o.useRef)({}),Ae=(0,o.useRef)(A().debounce(oe,500)),Ne=(0,o.useMemo)(function(){return J({}),he.map(function(we){var Ie=we.control||A().find(de,function(Re){return Re.controlId===we.controlId}),ge=Ie&&A().cloneDeep(K(Ie));return(0,y.default)({},we,{dataType:ge?ge.type:we.dataType,control:ge,filterType:ge&&ge.encryId?2:we.filterType})}).filter(function(we){return we.control&&!(window.shareState.shareId&&A().includes([26,27,48],we.control.type))})},[R()(he),R()(de.map(function(we){return A().pick(we,["controlName","options"])})),R()(de.filter(function(we){return we.relationControls}).map(function(we){return A().map(we.relationControls,function(Ie){return Ie.controlId})}))]);function Me(we){me.current=!0;var Ie=we||ye,ge=Ne.map(function(Pe,ke){return(0,y.default)({},Pe,{filterType:Pe.filterType||(Pe.dataType===29?24:2),spliceType:Pe.spliceType||1},Ie[A().get(Pe,"control.controlId")+"-"+ke])}).filter(n.Gu).map(N);if(ge.length){var Re=ge.map(function(Pe){var ke=(0,s.M)(Pe.dataType,Pe.values);return ke[0]==="isEmpty"&&(Pe.filterType=7,ke=[]),Pe.filterType===C.W5.DATE_BETWEEN&&Pe.dateRange!==18&&(Pe.filterType=C.W5.DATEENUM),(0,y.default)({},Pe,{values:ke})});A().includes(n.aM.concat(n.P4),xe.current.activeType)?Ae.current(Re,l):oe(Re,l)}else Ae.current([],l)}(0,o.useEffect)(function(){me.current=!1,J(F(he))},[l.viewId]),(0,o.useEffect)(function(){var we=void 0;x&&(we=(0,y.default)({},ye),he.forEach(function(Ie,ge){var Re=Ie.control.controlId+"-"+ge;we[Re]=A().pick(Ie,"dateRange","filterType","value","values","minValue","maxValue")}),J(we)),me.current&&!be&&!A().isEmpty(ye)&&Me(we)},[R()(he)]),(0,o.useEffect)(function(){me.current=!0,X==="filterComp"&&Me()},[]);var Fe=Ne.slice(0,A().isNumber(Y)?Y:void 0),Be=L()(ye).map(function(we){var Ie=we.split("-")[1];return(0,y.default)({},A().get(Ne[Ie],"control")||{},{controlId:"fastFilter_"+A().get(Ne[Ie],"control.controlId"),value:(0,S.pW)(A().get(Ne[Ie],"control.type"),ye[we]),filterValue:A().includes([O.DN.DATE,O.DN.DATE_TIME,O.DN.TIME],A().get(Ne[Ie],"control.type"))&&(0,y.default)({},A().pick(ye[we],["value","values","dateRange"]),{values:(0,s.M)(A().get(Ne[Ie],"control.type"),A().get(ye[we],"values"))})})}).concat(Ee.map(function(we){return{controlId:"navGroup_"+we.controlId,filterValue:(0,y.default)({values:we.values},we.filterType===7?{filterType:we.filterType}:{})}}));return o.createElement(k,{className:P,isConfigMode:x,style:Ne.length?{marginTop:8}:{}},Fe.map(function(we,Ie){return o.createElement(ee,{isConfigMode:x,highlight:i===we.fid,key:Ie,className:U()("conditionItem "+(Ie===0&&D&&!M?"isFirstFullLine":""),we.className),maxWidth:w(we)?Ie===0&&D&&!M?be?"calc(100% - 180px)":"calc(100% - 20px)":"100%":100/T+"%",onClick:x?function(){return ue(we.fid,we)}:A().noop},o.createElement(re,{className:"label ellipsis",title:we.control.controlName},we.control.controlName||_l("\u672A\u547D\u540D")),o.createElement(ie,{className:"content"},o.createElement(n.ZP,(0,y.default)({from:X,appendToBody:Q,projectId:m,worksheetId:B,appId:v},we,ye[we.control.controlId+"-"+Ie],{filtersData:Be,onChange:function(){var Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ke=Pe.forceUpdate;xe.current.activeType=we.control.type;var We=we.control.controlId+"-"+Ie,Ve=(0,y.default)({},ye,(0,g.default)({},We,(0,y.default)({},ye[We],Re)));J(Ve),(!be||ke)&&!A().isEmpty(Ve)&&Me(Ve)},onEnterDown:function(){be&&Me()}}))))}),(be||se)&&!!Fe.length&&o.createElement(le,{className:U()("buttons",G?"operateIsNewLine":""),isConfigMode:x,isFilterComp:Q},be&&o.createElement(ce.ZP,{type:"primary",className:"mRight10",size:"mdnormal",onClick:function(){return Me()}},W||_l("\u67E5\u8BE2")),be&&o.createElement(ce.ZP,{type:"ghostgray",size:"mdnormal",onClick:function(){J({}),ve(l)}},_l("\u91CD\u7F6E")),se&&o.createElement(E,{showQueryBtn:be,onClick:function(){ae(!M),safeLocalStorageSetItem("QUICK_FILTER_FULL_SHOW",!M)}},o.createElement(f.y_,{defaultStyle:{rotate:M?0:180},style:{rotate:(0,f.ST)(M?0:180)}},function(we){var Ie=we.rotate;return o.createElement("i",{className:"InlineBlock icon icon-arrow-up-border",style:{transform:"rotate("+Ie+"deg)"}})}),M?_l("\u6536\u8D77"):_l("\u5C55\u5F00"))))}h.propTypes={isConfigMode:d.bool,isFilterComp:d.bool,projectId:d.string,className:d.string,queryText:d.string,colNum:d.number,showQueryBtn:d.bool,operateIsNewLine:d.bool,firstIsFullLine:d.bool,fullShow:d.bool,view:(0,d.shape)({}),controls:(0,d.arrayOf)((0,d.shape)({})),filters:(0,d.arrayOf)((0,d.shape)({})),showExpand:d.func,setFullShow:d.func,updateQuickFilter:d.func,resetQuickFilter:d.func}},77637:(lt,Te,t)=>{"use strict";t.d(Te,{P4:()=>Ho,aM:()=>ko,ZP:()=>Mo,Gu:()=>ii});var ce=t(88239),g=t(67294),p=t(86674),L=t(44253),te=t(1924),R=t(97373),y=t(94055),a=t(3540),r=t(12424),o=t(86735),d=t(48286),Z=t(45697),H=t.n(Z),U=t(71893),f=t(69288),V=(0,o.Z)([`
  width: 100%;
  padding: 10px 12px;
  height: 158px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 3px;
  resize: none;
  &:focus {
    border-color: #2196f3;
  }
  &::placeholder {
    color: #bdbdbd;
  }
`],[`
  width: 100%;
  padding: 10px 12px;
  height: 158px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 3px;
  resize: none;
  &:focus {
    border-color: #2196f3;
  }
  &::placeholder {
    color: #bdbdbd;
  }
`]),C=(0,o.Z)([`
  margin-bottom: -10px;
  text-align: right;
  color: #333;
`],[`
  margin-bottom: -10px;
  text-align: right;
  color: #333;
`]),O=U.ZP.textarea(V),n=U.ZP.div(C);function s(Sn){var Hn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:500,Un=Sn.split(`
`).map(function(Tn,Pn){return{index:Pn,text:Tn}}),Nn=Un.filter(function(Tn){return!!Tn.text.trim()}).slice(0,Hn)[Hn-1];return Nn?Un.slice(0,Nn.index+1).map(function(Tn){return Tn.text}).join(`
`):Sn}function j(Sn){var Hn=Sn.keywords,Un=Hn===void 0?"":Hn,Nn=Sn.onClose,Tn=Sn.onChange,Pn=(0,g.useState)(s(Un)),jn=(0,r.Z)(Pn,2),ta=jn[0],Qn=jn[1];return g.createElement(f.Z,{visible:!0,width:480,title:_l("\u6DFB\u52A0\u591A\u4E2A\u641C\u7D22\u5173\u952E\u8BCD"),handleClose:Nn,cancelText:ta?_l("\u6E05\u9664"):_l("\u53D6\u6D88"),onCancel:function(){return ta?Qn(""):Nn()},onOk:function(){Tn(ta),Nn()}},g.createElement(O,{autoFocus:!0,placeholder:_l("\u591A\u4E2A\u5173\u952E\u8BCD\u8BF7\u7528\u6362\u884C\u7B26\u5206\u9694"),value:ta,onChange:function(la){return Qn(s(la.target.value))}}),g.createElement(n,null,_l("%0/500 \u4E2A",ta.split(`
`).filter(function(ca){return ca.trim()}).length)))}j.propTypes={keywords:Z.string,onChange:Z.func,onClose:Z.func};var A=t(96486),S=t.n(A),I=(0,o.Z)([`
  display: flex;
  flex-direction: row;
`],[`
  display: flex;
  flex-direction: row;
`]),c=(0,o.Z)([`
  flex: 1;
  position: relative;
  display: flex;
  align-items: center;
  height: 32px;
  line-height: 30px;
  border: 1px solid `,` !important;
  border-radius: 4px 0 0 4px;
  &:hover {
    border-color: #2196f3 !important;
    .icon-cancel {
      display: inline-block;
    }
  }
`],[`
  flex: 1;
  position: relative;
  display: flex;
  align-items: center;
  height: 32px;
  line-height: 30px;
  border: 1px solid `,` !important;
  border-radius: 4px 0 0 4px;
  &:hover {
    border-color: #2196f3 !important;
    .icon-cancel {
      display: inline-block;
    }
  }
`]),q=(0,o.Z)([`
  flex: 1;
  .Input {
    width: 100%;
    font-size: 13px !important;
    height: 30px !important;
    border: none !important;
    box-sizing: border-box !important;
    line-height: inherit;
    &::placeholder {
      color: #bdbdbd;
    }
  }
`],[`
  flex: 1;
  .Input {
    width: 100%;
    font-size: 13px !important;
    height: 30px !important;
    border: none !important;
    box-sizing: border-box !important;
    line-height: inherit;
    &::placeholder {
      color: #bdbdbd;
    }
  }
`]),b=(0,o.Z)([`
  font-size: 13px;
  padding: 0 12px;
`],[`
  font-size: 13px;
  padding: 0 12px;
`]),k=(0,o.Z)([`
  display: none;
  position: absolute;
  right: 0;
  font-size: 16px;
  color: #9e9e9e;
  margin-right: 8px;
  cursor: pointer;
  &:hover {
    color: #777;
  }
`],[`
  display: none;
  position: absolute;
  right: 0;
  font-size: 16px;
  color: #9e9e9e;
  margin-right: 8px;
  cursor: pointer;
  &:hover {
    color: #777;
  }
`]),ee=(0,o.Z)([`
  cursor: pointer;
  border: 1px solid #ddd;
  border-left: none;
  border-radius: 0 4px 4px 0;
  font-size: 20px;
  color: #9e9e9e;
  line-height: 30px;
  padding: 0 6px;
  > span {
    line-height: 1em;
  }
`],[`
  cursor: pointer;
  border: 1px solid #ddd;
  border-left: none;
  border-radius: 0 4px 4px 0;
  font-size: 20px;
  color: #9e9e9e;
  line-height: 30px;
  padding: 0 6px;
  > span {
    line-height: 1em;
  }
`]),re=U.ZP.div(I),ie=U.ZP.div(c,function(Sn){var Hn=Sn.active;return Hn?"#2196f3":"#ddd"}),le=U.ZP.div(q),E=U.ZP.div(b),w=U.ZP.i(k),K=U.ZP.span(ee);function N(Sn,Hn){return Sn===L.W5.START?Hn?_l("\u8F93\u5165\u5F00\u5934%0\u4F4D\u540E\u641C\u7D22",Hn):_l("\u641C\u7D22\u5F00\u5934"):Sn===L.W5.END?Hn?_l("\u8F93\u5165\u7ED3\u5C3E%0\u4F4D\u540E\u641C\u7D22",Hn):_l("\u641C\u7D22\u7ED3\u5C3E"):_l("\u641C\u7D22")}function F(Sn){var Hn=Sn.control,Un=Hn===void 0?{}:Hn,Nn=Sn.values,Tn=Nn===void 0?[]:Nn,Pn=Sn.filterType,jn=Sn.advancedSetting,ta=Sn.onChange,Qn=ta===void 0?function(){}:ta,ca=Sn.onEnterDown,la=ca===void 0?function(){}:ca,sa=(0,g.useState)(),ma=(0,r.Z)(sa,2),_n=ma[0],Ea=ma[1],qa=(0,g.useState)(!1),Za=(0,r.Z)(qa,2),ja=Za[0],Aa=Za[1],fa=(0,g.useState)(!1),Wa=(0,r.Z)(fa,2),za=Wa[0],ya=Wa[1],na=(0,g.useState)(),Da=(0,r.Z)(na,2),Ga=Da[0],Oa=Da[1],_r=(0,g.useState)(),Eo=(0,r.Z)(_r,2),Lo=Eo[0],lo=Eo[1],Ir=jn.limit&&Number(jn.limit),so=S().includes([L.W5.START,L.W5.END],Pn)&&S().isNumber(Ir)&&!S().isNaN(Ir);return(0,d.Z)(function(){Tn.length||(ya(!1),Oa(""),Ea(""))},[Tn]),g.createElement(re,null,g.createElement(ie,{active:ja},g.createElement(le,null,za?g.createElement(E,{onClick:function(){return lo(!0)}},_l("%0 \u4E2A\u5173\u952E\u8BCD",Tn.length)):g.createElement(a.Z,{placeholder:N(Pn,jn.limit),value:so&&_n?_n:Tn.join(" "),onKeyDown:function(fr){return fr.keyCode===13&&la()},onFocus:function(){return Aa(!0)},onBlur:function(){return Aa(!1)},onChange:function(fr){if(ya(!1),so&&(Ea(fr),fr.length<Ir&&fr.length>0))if(Tn.join("")!=="")fr="";else return;S().includes([p.DN.TELEPHONE,p.DN.MOBILE_PHONE],Un.type)?Qn({values:[fr.replace(/ /g,"")]}):Pn===L.W5.TEXT_ALLCONTAIN?Qn({values:fr.split(" ")}):Qn({values:[fr]})},onPaste:function(fr){var Rr=(fr.clipboardData||window.clipboardData).getData("text");Rr&&/\n/.test(Rr)&&(Oa(Rr),lo(!0),fr.preventDefault())}})),Tn&&!!Tn.length&&g.createElement(w,{className:"icon-cancel",onClick:function(){ya(!1),Oa(""),Qn({values:[]})}})),g.createElement(K,{onClick:function(){return lo(!0)}},g.createElement(y.default,{title:_l("\u6DFB\u52A0\u591A\u4E2A\u641C\u7D22\u5173\u952E\u8BCD")},g.createElement("i",{className:"icon icon-lookup ThemeHoverColor3",onClick:function(){return lo(!0)}}))),Lo&&g.createElement(j,{keywords:Ga,onClose:function(){return lo(!1)},onChange:function(fr){var Rr=fr.split(`
`).map(function(mo){return mo.trim()}).filter(S().identity);Oa(fr),ya(!!Rr.length),Qn({values:Rr},{forceUpdate:!0})}}))}F.propTypes={control:(0,Z.shape)({}),filterType:Z.number,values:(0,Z.arrayOf)(Z.string),onChange:Z.func};var h=t(93967),z=t.n(h),X=t(15577),B=(0,o.Z)([`
  display: flex;
  align-items: center;
  height: 32px;
  line-height: 32px;
  border-radius: 4px;
`],[`
  display: flex;
  align-items: center;
  height: 32px;
  line-height: 32px;
  border-radius: 4px;
`]),x=(0,o.Z)([`
  width: 100%;
  font-size: 13px !important;
  height: 32px !important;
  border: 1px solid #dddddd !important;
  box-sizing: border-box !important;
  &:hover:not(:focus) {
    border-color: #ccc !important;
  }
  &:focus {
    border-color: #2196f3 !important;
  }
  &::placeholder {
    color: #bdbdbd;
  }
`],[`
  width: 100%;
  font-size: 13px !important;
  height: 32px !important;
  border: 1px solid #dddddd !important;
  box-sizing: border-box !important;
  &:hover:not(:focus) {
    border-color: #ccc !important;
  }
  &:focus {
    border-color: #2196f3 !important;
  }
  &::placeholder {
    color: #bdbdbd;
  }
`]),Q=(0,o.Z)([`
  display: flex;
  width: 100%;
  border: 1px solid #ddd;
  border-radius: 4px;
  &:hover:not(:focus) {
    border-color: #ccc !important;
  }
  &:focus {
    border-color: #2196f3 !important;
  }
  &::placeholder {
    color: #bdbdbd;
  }
`],[`
  display: flex;
  width: 100%;
  border: 1px solid #ddd;
  border-radius: 4px;
  &:hover:not(:focus) {
    border-color: #ccc !important;
  }
  &:focus {
    border-color: #2196f3 !important;
  }
  &::placeholder {
    color: #bdbdbd;
  }
`]),i=(0,o.Z)([`
  flex: 1;
  input {
    border: none !important;
  }
`],[`
  flex: 1;
  input {
    border: none !important;
  }
`]),m=(0,o.Z)([`
  margin: 0 2px;
`],[`
  margin: 0 2px;
`]),v=U.ZP.div(B),W=(0,U.ZP)(a.Z)(x),P=U.ZP.div(Q),u=U.ZP.div(i),l=U.ZP.div(m);function T(Sn){var Hn=Sn.value,Un=Sn.minValue,Nn=Un===void 0?"":Un,Tn=Sn.maxValue,Pn=Tn===void 0?"":Tn,jn=Sn.filterType,ta=Sn.onChange,Qn=ta===void 0?function(){}:ta,ca=Sn.onEnterDown,la=ca===void 0?function(){}:ca;function sa(ma,_n){S().isUndefined(jn)&&(ma.filterType=_n),Qn(ma)}return g.createElement(v,null,jn===L.W5.BETWEEN?g.createElement(P,null,g.createElement(u,null,g.createElement(W,{placeholder:_l("\u6700\u5C0F\u503C"),value:Nn,valueFilter:X.pu,onChange:function(_n){sa({minValue:_n.trim()},L.W5.BETWEEN)},onKeyDown:function(_n){return _n.keyCode===13&&la()}})),g.createElement(l,null,"-"),g.createElement(u,null,g.createElement(W,{placeholder:_l("\u6700\u5927\u503C"),value:Pn,valueFilter:X.pu,onChange:function(_n){sa({maxValue:_n.trim()},L.W5.BETWEEN)},onKeyDown:function(_n){return _n.keyCode===13&&la()}}))):g.createElement(W,{placeholder:_l("\u8BF7\u8F93\u5165"),value:Hn,valueFilter:X.pu,onChange:function(_n){sa({value:_n.trim()},L.W5.EQ)},onKeyDown:function(_n){return _n.keyCode===13&&la()}}))}T.propTypes={filterType:Z.number,minValue:Z.string,maxValue:Z.string,value:Z.string,onChange:Z.func};var G=t(8177),D=t.n(G),M=t(61283),se=t(88106),ae=t(85315),ne=t(63239),de=t.n(ne),Ce=t(85105),he=t.n(Ce),fe=t(99663),Ee=t(22600),Y=t(49135),oe=t(93196),ve=t(29314),ue=t(44894),pe=t(6917),Se=t(82011),ye=t(24607),J=t(58126),me=t(12246),be=t(33008),xe=t(51205),Ae=t(89499),Ne,Me,Fe,Be,we,Ie=(0,o.Z)([`
  width: 310px;
  padding: 10px 16px;
  color: #9e9e9e;
  border-radius: 3px;
  background-color: #fff;
  box-shadow: 0px 4px 16px rgba(0, 0, 0, 0.24);
  .clearBtn {
    padding: 6px 16px;
    margin: 0 -16px 6px;
    cursor: pointer;
    color: #9e9e9e;
    &:hover {
      background: #e4f4ff;
    }
  }
`],[`
  width: 310px;
  padding: 10px 16px;
  color: #9e9e9e;
  border-radius: 3px;
  background-color: #fff;
  box-shadow: 0px 4px 16px rgba(0, 0, 0, 0.24);
  .clearBtn {
    padding: 6px 16px;
    margin: 0 -16px 6px;
    cursor: pointer;
    color: #9e9e9e;
    &:hover {
      background: #e4f4ff;
    }
  }
`]),ge=(0,o.Z)([`
  position: absolute;
  left: 10px;
  top: 50%;
  margin-top: -6px;
  color: #bdbdbd;
  line-height: 1em;
  width: calc(100% - 10px);
`],[`
  position: absolute;
  left: 10px;
  top: 50%;
  margin-top: -6px;
  color: #bdbdbd;
  line-height: 1em;
  width: calc(100% - 10px);
`]);function Re(Sn,Hn,Un,Nn,Tn){var Pn={};return Object.keys(Nn).forEach(function(jn){Pn[jn]=Nn[jn]}),Pn.enumerable=!!Pn.enumerable,Pn.configurable=!!Pn.configurable,("value"in Pn||Pn.initializer)&&(Pn.writable=!0),Pn=Un.slice().reverse().reduce(function(jn,ta){return ta(Sn,Hn,jn)||jn},Pn),Tn&&Pn.initializer!==void 0&&(Pn.value=Pn.initializer?Pn.initializer.call(Tn):void 0,Pn.initializer=void 0),Pn.initializer===void 0&&(Object.defineProperty(Sn,Hn,Pn),Pn=null),Pn}var Pe=U.ZP.div(Ie),ke=U.ZP.div(ge),We=50,Ve=(Fe=(we=Be=function(Sn){(0,oe.default)(Hn,Sn);function Hn(Un){(0,fe.default)(this,Hn);var Nn=(0,Y.default)(this,(Hn.__proto__||he()(Hn)).call(this,Un));return Nn.inputForIOSKeyboardRef=g.createRef(),Nn.cell=g.createRef(),Nn.list=g.createRef(),Nn.state={active:!1,listvisible:!1,newrecordVisible:!1,selected:Un.selected||[],keywords:"",activeIndex:void 0,deletedIds:[],addedIds:[]},Nn.initSearchControl(Un),Nn}return(0,Ee.default)(Hn,[{key:"componentDidMount",value:function(){if(this.props.isediting)if(this.canSelect)this.openPopup();else{if(this.props.selected.length>0&&this.props.multiple)return;if(this.props.multiple&&this.props.selected.length>=We){alert(_l("\u6700\u591A\u5173\u8054%0\u6761",We),3);return}this.setState({newrecordVisible:!0})}}},{key:"componentWillReceiveProps",value:function(Nn){S().isEqual(this.props.selected,Nn.selected)||this.setState({selected:Nn.selected}),Nn.flag!==this.props.flag&&this.setState({addedIds:[],deletedIds:[]}),(S().get(Nn,"control.advancedSetting.searchcontrol")!==S().get(this.props,"control.advancedSetting.searchcontrol")||!S().isEqual(S().get(this.props,"control.relationControls"),S().get(Nn,"control.relationControls")))&&this.initSearchControl(Nn)}},{key:"initSearchControl",value:function(Nn){var Tn=Nn.control,Pn=Tn===void 0?{}:Tn,jn=Pn.advancedSetting||{},ta=jn.searchcontrol,Qn=void 0;ta&&(Qn=S().find(Pn.relationControls,{controlId:ta})),Qn||(Qn=S().find(Pn.relationControls,{attribute:1})),this.searchControl=Qn}},{key:"getDefaultRelateSheetValue",value:function(){try{var Nn,Tn=this.props.control,Pn=Tn.formData,jn=Tn.controlId,ta=Tn.recordId,Qn=Tn.worksheetId,ca=typeof Pn=="function"?Pn():Pn,la=S().find(ca,function(_n){return _n.attribute===1}),sa={name:la.value,sid:ta,type:8,sourcevalue:de()((0,ce.default)({},S().assign.apply(S(),(0,ae.Z)(ca.map(function(_n){return(0,se.default)({},_n.controlId,_n.value)}))),(Nn={},(0,se.default)(Nn,la.controlId,la.value),(0,se.default)(Nn,"rowid",ta),Nn)))};if(la.type===29)try{var ma=JSON.parse(la.value);sa.name=ma[0].name}catch(_n){sa.name=""}return{worksheetId:Qn,relateSheetControlId:jn,value:sa}}catch(_n){return}}},{key:"getXOffset",value:function(){var Nn=this.popupWidth;return this.cell&&this.cell.current&&window.innerWidth-this.cell.current.getBoundingClientRect().left<Nn?window.innerWidth-Nn-10-this.cell.current.getBoundingClientRect().left:0}},{key:"openPopup",value:function(){if(!this.cell.current){this.setState({listvisible:!0});return}var Nn=this.cell.current.getBoundingClientRect().top,Tn=window.innerHeight-this.cell.current.clientHeight-Nn<360;this.setState({renderToTop:Tn,listvisible:!0,cellToTop:Nn})}},{key:"handleAdd",value:function(Nn){var Tn=this,Pn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},jn=this.props.multiple,ta=this.state,Qn=ta.selected,ca=ta.addedIds,la=ca===void 0?[]:ca;if(jn&&Qn.length>=We){alert(_l("\u6700\u591A\u5173\u8054%0\u6761",We),3);return}S().find(Qn,function(sa){return sa.rowid===Nn.rowid})||this.setState({selected:jn?Qn.concat(Nn):[Nn],addedIds:la.concat(Nn.rowid)},function(){Tn.handleChange(),Pn()})}},{key:"handleClear",value:function(){var Nn=this,Tn=this.props.onVisibleChange;this.setState({selected:[],listvisible:!1},function(){Nn.handleChange(),Tn(!1)})}},{key:"handleDelete",value:function(Nn){var Tn=this.state,Pn=Tn.selected,jn=Tn.deletedIds,ta=jn===void 0?[]:jn;this.setState({selected:Pn.filter(function(Qn){return Qn.rowid!==Nn.rowid}),deletedIds:S().uniq(ta.concat(Nn.rowid))},this.handleChange)}},{key:"handleItemClick",value:function(Nn){var Tn=this,Pn=this.props,jn=Pn.multiple,ta=Pn.onVisibleChange,Qn=this.state.selected;if(jn&&Nn.rowid!=="isEmpty"){var ca=S().find(Qn,function(la){return Nn.rowid===la.rowid});ca?(this.allowRemove||ca.isNewAdd)&&this.handleDelete(Nn):this.handleAdd(S().assign({},Nn,{isNewAdd:!0}));return}else this.setState({selected:[Nn],listvisible:!1},function(){Tn.handleChange(),ta(!1),Tn.setState({newrecordVisible:!1})})}},{key:"handleInputKeyDown",value:function(Nn){var Tn=this.props.control,Pn=this.state.selected;if((0,A.get)(this,"list.current")){if(Nn.key==="ArrowUp")this.list.current.updateActiveId(-1);else if(Nn.key==="ArrowDown")this.list.current.updateActiveId(1);else if(Nn.key==="Enter")this.list.current.handleEnter();else if(Nn.key==="Backspace"){if(S().get(this,"inputRef.current.value"))return;var jn=Pn.slice(-1)[0];jn&&Tn.enumDefault!==1&&this.handleDelete(jn)}}}},{key:"handleChange",value:function(){var Nn=this.props,Tn=Nn.multiple,Pn=Nn.doNotClearKeywordsWhenChange,jn=Nn.onChange,ta=this.state,Qn=ta.selected,ca=ta.addedIds,la=ta.deletedIds;Qn.length>1&&S().find(Qn,{rowid:"isEmpty"})&&(Qn=Qn.filter(function(sa){return sa.rowid!=="isEmpty"})),Tn&&this.inputRef&&this.inputRef.current&&this.inputRef.current.focus(),Pn||this.setState({keywords:""}),jn(Qn,{addedIds:ca,deletedIds:la})}},{key:"handleClick",value:function(){var Nn=this.props,Tn=Nn.insheet,Pn=Nn.disabled,jn=Nn.onClick;Tn?this.active?this.inputRef&&this.inputRef.current&&this.inputRef.current.focus():jn():this.setState({listvisible:!Pn})}},{key:"renderSingle",value:function(){var Nn=this,Tn=this.props,Pn=Tn.insheet,jn=Tn.isediting,ta=Tn.isQuickFilter,Qn=Tn.control,ca=Tn.allowOpenRecord,la=Tn.entityName,sa=Tn.staticRecords,ma=this.state,_n=ma.selected,Ea=ma.keywords,qa=this.canSelect,Za=this.active;return g.createElement(g.Fragment,null,!!_n.length&&!Ea&&g.createElement("span",{className:"normalSelectedItem placeholder ellipsis",onClick:function(Aa){ca&&(Nn.setState({previewRecord:{recordId:_n[0].rowid}}),Aa.stopPropagation())}},_n[0].rowid?(0,ye.Nx)(Qn,_n[0]):_l("\u5173\u8054\u5F53\u524D%0",la)),(S().isEmpty(sa)&&qa||ta)&&Za&&g.createElement(be.Z,{mountRef:function(Aa){return Nn.inputRef=Aa},value:Ea,onChange:function(Aa){return Nn.setState({keywords:Aa})},onKeyDown:this.handleInputKeyDown}),!Za&&S().isEmpty(_n)&&!Pn&&Qn.hint&&g.createElement(ke,{className:"ellipsis"},Qn.hint),S().isEmpty(sa)&&qa&&!_n.length&&Za&&!Ea&&this.searchControl&&g.createElement(ke,{className:"ellipsis"},_l("\u641C\u7D22%0",this.searchControl.controlName)),Pn&&jn&&!qa&&_n.length===0&&g.createElement("span",{className:"activeSelectedItem addBtn Hand",onClick:function(Aa){if(Aa.stopPropagation(),Nn.props.multiple&&Nn.props.selected.length>=We){alert(_l("\u6700\u591A\u5173\u8054%0\u6761",We),3);return}Nn.setState({newrecordVisible:!0})}},g.createElement("i",{className:"icon icon-plus"})))}},{key:"renderMultipe",value:function(){var Nn=this,Tn=this.props,Pn=Tn.insheet,jn=Tn.isQuickFilter,ta=Tn.selectedStyle,Qn=Tn.isediting,ca=Tn.control,la=Tn.worksheetId,sa=Tn.allowOpenRecord,ma=Tn.entityName,_n=Tn.cellFrom,Ea=Tn.recordId,qa=Tn.viewId,Za=Tn.isCharge,ja=this.state,Aa=ja.selected,fa=ja.keywords,Wa=ja.activeIndex,za=this.active,ya=Aa.length;return g.createElement(g.Fragment,null,!za&&S().isEmpty(Aa)&&!Pn&&ca.hint&&g.createElement(ke,{className:"ellipsis"},ca.hint),Aa.map(function(na,Da){return za||Pn?g.createElement("div",{key:Da,className:z()("activeSelectedItem",{active:za,allowRemove:Nn.allowRemove||na.isNewAdd}),style:S().assign({},Da===0?_n===4?{margin:0}:{marginTop:6}:{}),onClick:function(Oa){!sa||za||(Nn.setState({previewRecord:{recordId:na.rowid}}),Oa.stopPropagation())}},g.createElement("span",{className:"name InlineBlock ellipsis"},na.rowid?(0,ye.Nx)(ca,na):_l("\u5173\u8054\u5F53\u524D%0",ma)),za&&(Nn.allowRemove||na.isNewAdd)&&g.createElement("i",{className:"icon icon-close",onClick:function(Oa){Oa.stopPropagation(),Nn.handleDelete(na)}})):[g.createElement("div",{key:Da,className:"normalSelectedItem ellipsis",onClick:function(Oa){sa&&(Nn.setState({previewRecord:{recordId:na.rowid}}),Oa.stopPropagation())}},(0,ye.Nx)(ca,na)),Da!==ya-1&&g.createElement("span",{style:{lineHeight:"34px",marginRight:2}},", ")]}),(this.canSelect||jn)&&za&&g.createElement(be.Z,{mountRef:function(Da){return Nn.inputRef=Da},value:fa,onChange:function(Da){return Nn.setState({keywords:Da})},onKeyDown:this.handleInputKeyDown}),Pn&&Qn&&!this.canSelect&&g.createElement("span",{className:"activeSelectedItem addBtn Hand",onClick:function(Da){if(Da.stopPropagation(),Nn.props.multiple&&Nn.props.selected.length>=We){alert(_l("\u6700\u591A\u5173\u8054%0\u6761",We),3);return}Nn.setState({newrecordVisible:!0})}},g.createElement("i",{className:"icon icon-plus"})))}},{key:"renderPopup",value:function(Nn){var Tn=this,Pn=Nn.disabledManualWrite,jn=this.props,ta=jn.isQuickFilter,Qn=jn.multiple,ca=jn.control,la=jn.formData,sa=jn.insheet,ma=jn.disableNewRecord,_n=jn.prefixRecords,Ea=jn.staticRecords,qa=jn.onVisibleChange,Za=typeof la=="function"?la():la,ja=this.state,Aa=ja.keywords,fa=ja.selected,Wa=ja.listvisible,za=ja.newrecordVisible,ya=ja.renderToTop,na=ja.cellToTop,Da=ja.activeIndex,Ga=this.isMobile?0:this.getXOffset();return g.createElement(M.Z,{onClickAway:function(){za||qa(!1)},className:"scrollInTable",style:this.isMobile?{position:"relative",marginLeft:-20}:{}},(sa||ta)&&this.renderSelected(!0),Pn&&g.createElement(Pe,null,!sa&&!!fa.length&&g.createElement("div",{className:"clearBtn",onClick:this.handleClear},_l("\u6E05\u9664")),_l("\u8BF7\u5728\u79FB\u52A8\u7AEF\u626B\u7801\u6DFB\u52A0\u5173\u8054")),Wa&&!Pn&&g.createElement(J.Z,(0,ce.default)({ref:this.list,isQuickFilter:ta,activeIndex:Da,keyWords:Aa,searchControl:this.searchControl,control:ca,formData:Za,prefixRecords:_n,staticRecords:Ea,maxHeight:ya&&na,style:(0,ce.default)({},ya?{bottom:(S().get(this,"cell.current.clientHeight")||0)+(sa?0:3)}:{top:"100%"},{left:Ga,position:"absolute",width:this.popupWidth})},S().pick(this.props,["from","viewId","dataSource","parentWorksheetId","recordId","controlId","multiple","coverCid","showControls","showCoverAndControls","fastSearchControlArgs"]),{isMobile:this.isMobile,selectedIds:fa.map(function(Oa){return Oa.rowid}),onItemClick:this.handleItemClick,onClear:this.handleClear,allowNewRecord:this.props.enumDefault2!==1&&this.props.enumDefault2!==11&&!ma,onNewRecord:function(){if(Qn&&fa.length>=We){alert(_l("\u6700\u591A\u5173\u8054%0\u6761",We),3);return}Tn.setState({newrecordVisible:!0,listvisible:!1})}})))}},{key:"renderSelected",value:function(Nn){var Tn=this,Pn=this.props,jn=Pn.control,ta=jn===void 0?{}:jn,Qn=Pn.isQuickFilter,ca=Pn.isediting,la=Pn.insheet,sa=Pn.multiple,ma=Pn.selectedClassName,_n=Pn.selectedStyle,Ea=Pn.disabled,qa=Pn.allowOpenRecord,Za=Pn.renderSelected,ja=this.state,Aa=ja.selected,fa=ja.keywords,Wa=ja.listvisible,za=void 0;return S().isFunction(Za)&&!(Qn&&Wa)?za=Za(Aa):sa&&!Qn?za=this.renderMultipe():za=S().isArray(Aa)&&Aa.length>1?this.renderMultipe():this.renderSingle(),g.createElement("div",{className:z()("RelateRecordDropdown-selected",ma,{free:Nn,active:Wa||ca,emptyRecord:!Aa.length,readonly:Ea,allowOpenRecord:qa,"customFormControlBox mobile":this.isMobile}),ref:this.cell,style:_n,onClick:this.handleClick},za,!Ea&&!(this.active&&fa)&&g.createElement("i",{className:"icon "+(this.isMobile?"icon-arrow-right-border":"icon-arrow-down-border")+" dropIcon"}),!Ea&&this.allowRemove&&(!!Aa.length||fa)&&(!la||this.active)&&g.createElement("i",{className:"icon icon-closeelement-bg-circle Hand clearIcon",onClick:function(na){na.stopPropagation(),fa?Tn.setState({keywords:""},function(){Tn.inputRef&&Tn.inputRef.current&&Tn.inputRef.current.focus()}):Tn.handleClear()}}))}},{key:"render",value:function(){var Nn=this,Tn=this.props,Pn=Tn.from,jn=Tn.insheet,ta=Tn.popupOffset,Qn=Tn.zIndex,ca=Tn.isediting,la=Tn.control,sa=la===void 0?{}:la,ma=Tn.selectedStyle,_n=Tn.className,Ea=Tn.popupClassName,qa=Tn.disabled,Za=Tn.dataSource,ja=Tn.enumDefault2,Aa=Tn.isQuickFilter,fa=Tn.popupContainer,Wa=Tn.onVisibleChange,za=this.state,ya=za.keywords,na=za.selected,Da=za.isTop,Ga=za.listvisible,Oa=za.previewRecord,_r=za.newrecordVisible,Eo=(sa.strDefault||"").split("").map(function(fr){return!!+fr}),Lo=(0,r.Z)(Eo,3),lo=Lo[2],Ir=lo&&sa.advancedSetting.dismanual==="1",so=this.renderPopup({disabledManualWrite:Ir}),kr=jn?ca:Ga;return g.createElement("div",{className:z()("RelateRecordDropdown",_n),onClick:function(Rr){ca&&Rr.stopPropagation()}},g.createElement(ve.Z,{action:jn?[]:["click"],popupVisible:kr,onPopupVisibleChange:function(Rr){!qa&&Rr?(Nn.openPopup(),Nn.inputForIOSKeyboardRef.current&&Nn.inputForIOSKeyboardRef.current.focus()):Nn.setState({listvisible:!1}),Wa(Rr)},popupClassName:z()("relateRecordDropdownPopup filterTrigger",Ea,{isQuickFilter:Aa}),getPopupContainer:fa||function(){return document.body},popupAlign:{points:jn||Da?["tl","tl"]:["tl","bl"],offset:ta||[0,0],overflow:{adjustX:!this.isMobile}},zIndex:Qn||(this.isMobile?999:1e3),destroyPopupOnHide:!0,popup:so},(!jn||!ca)&&(!Aa||!Ga)?this.renderSelected():g.createElement("div",{style:ma,ref:this.cell})),g.createElement("input",{type:"text",style:{width:0,opacity:0,height:0,position:"absolute",padding:0,margin:0},ref:this.inputForIOSKeyboardRef}),_r&&!Ir&&g.createElement(me.default,{showFillNext:!0,directAdd:!0,className:"worksheetRelateNewRecord",worksheetId:Za,addType:2,defaultFormDataEditable:!0,defaultFormData:this.searchControl&&(0,Ae.s6)(this.searchControl.type)&&ya?(0,se.default)({},this.searchControl.controlId,ya):{},defaultRelatedSheet:this.getDefaultRelateSheetValue(),visible:_r,hideNewRecord:function(){Nn.setState({newrecordVisible:!1})},onAdd:function(Rr){return Nn.handleItemClick(Rr)}}),Pn!==pe.BD.PUBLIC_ADD&&Oa&&g.createElement(Se.Z,{visible:!0,viewId:S().get(sa,"advancedSetting.openview")||sa.viewId,from:1,hideRecordInfo:function(){Nn.setState({previewRecord:void 0})},recordId:Oa.recordId,worksheetId:Za,relationWorksheetId:this.props.parentWorksheetId,currentSheetRows:na,showPrevNext:!0,updateRows:function(){var Rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],mo=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Rr[0]&&Nn.setState({selected:na.map(function(nn){return nn.rowid===Rr[0]?(0,ce.default)({},nn,S().omit(mo,["allowdelete","allowedit"])):nn})})}}))}},{key:"active",get:function(){var Nn=this.props.isediting,Tn=this.state.listvisible;return Nn||Tn}},{key:"isMobile",get:function(){return this.props.from===pe.BD.H5_ADD||this.props.from===pe.BD.H5_EDIT}},{key:"canSelect",get:function(){return this.props.enumDefault2!==10&&this.props.enumDefault2!==11}},{key:"popupWidth",get:function(){var Nn=this.props,Tn=Nn.insheet,Pn=Nn.showCoverAndControls,jn=Nn.showControls,ta=Pn&&jn.length?480:313;return!Tn&&this.cell.current?Math.max(this.cell.current.clientWidth,ta):ta}},{key:"allowRemove",get:function(){var Nn=this.props.multiple;return!Nn||S().get(this.props,"control.advancedSetting.allowcancel")!=="0"}}]),Hn}(g.Component),Be.propTypes={disableNewRecord:H().bool,isQuickFilter:H().bool,insheet:H().bool,isediting:H().bool,disabled:H().bool,multiple:H().bool,allowOpenRecord:H().bool,className:H().string,controls:H().arrayOf(H().shape({})),selected:H().arrayOf(H().shape({})),selectedClassName:H().string,selectedStyle:H().shape({}),popupContainer:H().func,prefixRecords:H().arrayOf(H().shape({})),staticRecords:H().arrayOf(H().shape({})),onChange:H().func,onClick:H().func,onVisibleChange:H().func,renderSelected:H().func},Be.defaultProps={onVisibleChange:function(){},onChange:function(){},onClick:function(){}},we),Re(Fe.prototype,"openPopup",[ue.Nj],D()(Fe.prototype,"openPopup"),Fe.prototype),Re(Fe.prototype,"handleAdd",[ue.Nj],D()(Fe.prototype,"handleAdd"),Fe.prototype),Re(Fe.prototype,"handleClear",[ue.Nj],D()(Fe.prototype,"handleClear"),Fe.prototype),Re(Fe.prototype,"handleDelete",[ue.Nj],D()(Fe.prototype,"handleDelete"),Fe.prototype),Re(Fe.prototype,"handleItemClick",[ue.Nj],D()(Fe.prototype,"handleItemClick"),Fe.prototype),Re(Fe.prototype,"handleInputKeyDown",[ue.Nj],D()(Fe.prototype,"handleInputKeyDown"),Fe.prototype),Re(Fe.prototype,"handleClick",[ue.Nj],D()(Fe.prototype,"handleClick"),Fe.prototype),Fe),it=t(94942),Ge=t.n(it),pt=t(36803),ot=t(45231),vt=t(26358),At=(0,o.Z)([`
  cursor: pointer;
  font-size: 12px;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  margin: 2px 6px 2px 0;
  color: #515151;
  padding: 0 12px;
  height: 28px;
  border: 1px solid #ddd;
  border-radius: 26px;
  max-width: 200px;
  user-select: none;
  &.checked {
    color: #fff;
    border-color: #2196f3 !important;
    background-color: #2196f3;
    &.multiple {
      .selectedIcon {
        font-size: 16px;
        margin: 0 5px 0 -6px;
      }
      color: #1565c0;
      background-color: #e3f2fd;
      border: 1px solid rgba(21, 101, 192, 0.17) !important;
    }
  }
  &:hover {
    border-color: #ccc;
  }
`],[`
  cursor: pointer;
  font-size: 12px;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  margin: 2px 6px 2px 0;
  color: #515151;
  padding: 0 12px;
  height: 28px;
  border: 1px solid #ddd;
  border-radius: 26px;
  max-width: 200px;
  user-select: none;
  &.checked {
    color: #fff;
    border-color: #2196f3 !important;
    background-color: #2196f3;
    &.multiple {
      .selectedIcon {
        font-size: 16px;
        margin: 0 5px 0 -6px;
      }
      color: #1565c0;
      background-color: #e3f2fd;
      border: 1px solid rgba(21, 101, 192, 0.17) !important;
    }
  }
  &:hover {
    border-color: #ccc;
  }
`]),yt=U.ZP.div(At);const st=yt;var St=(0,o.Z)([`
  position: relative;
  min-height: 32px;
`],[`
  position: relative;
  min-height: 32px;
`]),Qe=U.ZP.div(St),Xe=20;function $e(Sn){var Hn=function(){var Wa=(0,pt.Z)(Ge().mark(function za(){var ya,na,Da;return Ge().wrap(function(Oa){for(;;)switch(Oa.prev=Oa.next){case 0:if(S().isEmpty(Qn)){Oa.next=2;break}return Oa.abrupt("return");case 2:return fa(!0),ya=void 0,ca&&ca.advancedSetting.filters&&(ya=(0,vt.zK)({control:ca,formData:Pn})),na={worksheetId:ca.dataSource,viewId:ca.viewId,filterControls:ya||[],searchType:1,pageSize:20,pageIndex:1,status:1,isGetWorksheet:!0,getType:7},Nn&&ca&&S().get(Nn,"length")===24&&(na.relationWorksheetId=Nn,na.controlId=ca.controlId),Oa.next=9,ot.Z.getFilterRows(na);case 9:Da=Oa.sent,fa(!1),qa(Da.data);case 12:case"end":return Oa.stop()}},za,this)}));return function(){return Wa.apply(this,arguments)}}(),Un=Sn.selected,Nn=Sn.parentWorksheetId,Tn=Sn.formData,Pn=Tn===void 0?[]:Tn,jn=Sn.prefixRecords,ta=jn===void 0?[]:jn,Qn=Sn.staticRecords,ca=Sn.control,la=Sn.multiple,sa=Sn.onChange,ma=(0,g.useState)(Qn||[]),_n=(0,r.Z)(ma,2),Ea=_n[0],qa=_n[1],Za=(0,g.useState)(!0),ja=(0,r.Z)(Za,2),Aa=ja[0],fa=ja[1];return(0,g.useEffect)(function(){Hn()},[de()(Pn.map(function(Wa){return Wa.value}))]),(0,g.useEffect)(function(){S().isUndefined(Qn)?Hn():qa(Qn||[])},[de()(Qn)]),g.createElement(Qe,null,ta.concat(Ea).slice(0,Xe).map(function(Wa,za){var ya=Wa.rowid==="isEmpty"?Wa.name:(0,ye.Nx)(ca,Wa),na=S().find(Un,{rowid:Wa.rowid});return g.createElement(st,{className:z()("ellipsis",{multiple:la,checked:na}),title:ya,key:za,onClick:function(){Wa.rowid==="isEmpty"?sa(Un.length===1&&Un[0].rowid==="isEmpty"?[]:[Wa]):S().find(Un,{rowid:Wa.rowid})?sa(Un.filter(function(Ga){return Ga.rowid!==Wa.rowid&&Ga.rowid!=="isEmpty"})):sa(la?S().uniqBy(Un.concat(Wa).filter(function(Ga){return Ga.rowid!=="isEmpty"})):[Wa])}},la&&na&&g.createElement("span",{className:"icon-hr_ok selectedIcon"}),g.createElement("div",{className:"ellipsis"},ya))}))}$e.propTypes={multiple:Z.bool,control:(0,Z.shape)({}),selected:(0,Z.arrayOf)((0,Z.shape)({})),onChange:Z.func};var Ke=(0,o.Z)([`
  display: flex;
  align-items: center;
  height: 32px;
  line-height: 32px;
  .RelateRecordDropdown-selected {
    border-color: #ddd;
    &.active {
      border-color: #2196f3;
    }
  }
  &:hover {
    .RelateRecordDropdown-selected:not(.active) {
      border-color: #ccc;
    }
  }
`],[`
  display: flex;
  align-items: center;
  height: 32px;
  line-height: 32px;
  .RelateRecordDropdown-selected {
    border-color: #ddd;
    &.active {
      border-color: #2196f3;
    }
  }
  &:hover {
    .RelateRecordDropdown-selected:not(.active) {
      border-color: #ccc;
    }
  }
`]),Ue=(0,o.Z)([`
  width: 100%;
  .RelateRecordDropdown-selected {
    background-color: transparent;
    height: 32px;
    min-height: 32px;
    .normalSelectedItem {
      line-height: 30px;
      display: block;
    }
    > input {
      line-height: 32px !important;
      display: block;
    }
    .clearIcon,
    .dropIcon {
      margin: 8px;
    }
    .activeSelectedItem {
      margin-top: 0px !important;
    }
  }
`],[`
  width: 100%;
  .RelateRecordDropdown-selected {
    background-color: transparent;
    height: 32px;
    min-height: 32px;
    .normalSelectedItem {
      line-height: 30px;
      display: block;
    }
    > input {
      line-height: 32px !important;
      display: block;
    }
    .clearIcon,
    .dropIcon {
      margin: 8px;
    }
    .activeSelectedItem {
      margin-top: 0px !important;
    }
  }
`]),He=U.ZP.div(Ke),ze=(0,U.ZP)(Ve)(Ue);function gt(Sn){var Hn=Sn.from,Un=Sn.worksheetId,Nn=Sn.values,Tn=Nn===void 0?[]:Nn,Pn=Sn.filtersData,jn=Sn.advancedSetting,ta=Sn.onChange,Qn=ta===void 0?function(){}:ta,ca=S().get(Sn,"control.advancedSetting")||{},la=S().assign({},Sn.control,{advancedSetting:{searchcontrol:ca.searchcontrol}}),sa=la.relationControls,ma=sa===void 0?[]:sa,_n=jn||{},Ea=_n.showtype,qa=_n.navshow,Za=_n.allowlink,ja=_n.ddset,Aa=_n.allowitem,fa=_n.navfilters,Wa=_n.direction,za=_n.shownullitem,ya=_n.nullitemname,na=void 0;qa==="3"?la.advancedSetting.filters=fa:qa==="2"&&(na=JSON.parse(fa).map(safeParse).map(function(Bt){return(0,ce.default)({rowid:Bt.id},Bt)}));var Da=void 0;jn.searchcontrol&&(la.advancedSetting.searchcontrol=jn.searchcontrol,Da={controlId:jn.searchcontrol,filterType:jn.searchtype==="1"?2:1}),jn.clicksearch&&qa!=="2"&&(la.advancedSetting.clicksearch=jn.clicksearch);var Ga=(0,g.useRef)(),Oa=(0,g.useState)(),_r=(0,r.Z)(Oa,2),Eo=_r[0],Lo=_r[1],lo=(0,g.useState)(),Ir=(0,r.Z)(lo,2),so=Ir[0],kr=Ir[1],fr=String(Aa)==="2",Rr=za==="1"?[{rowid:"isEmpty",name:ya||_l("\u4E3A\u7A7A")}]:[],mo=void 0;function nn(Bt){Qn((0,ce.default)({},Bt))}return Tn.length?fr&&(mo=function(){var ln=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Je=void 0;return(ln[0]||{}).rowid==="isEmpty"?Je=ya||_l("\u4E3A\u7A7A"):Je=!ln.length||_l("\u9009\u4E2D %0 \u4E2A",ln.length),g.createElement("span",{className:"normalSelectedItem",style:{fontSize:13}},Je)}):mo=function(){return g.createElement("span",{className:"normalSelectedItem",style:{fontSize:13,color:"#bdbdbd"}},_l("\u8BF7\u9009\u62E9"))},(0,g.useLayoutEffect)(function(){Ga.current&&kr(Ga.current.clientWidth)},[]),String(Wa)==="1"?g.createElement($e,{multiple:fr,selected:Tn,formData:Pn,control:la,parentWorksheetId:Un,prefixRecords:Rr,staticRecords:na,onChange:function(ln){nn({values:ln})}}):g.createElement(He,{ref:Ga},g.createElement(ze,(0,ce.default)({popupClassName:Tn.length<2?"small":"",zIndex:"xxx",disableNewRecord:!0,doNotClearKeywordsWhenChange:fr,parentWorksheetId:Un,isQuickFilter:!0,control:la},la,{selectedStyle:{width:so},popupOffset:[0,-16],formData:Pn,advancedSetting:{},controls:ma,selected:Tn,showCoverAndControls:!0,popupContainer:function(){return document.body},multiple:fr,renderSelected:Eo?void 0:mo,prefixRecords:Rr,staticRecords:na,fastSearchControlArgs:Da,onChange:function(ln){nn({values:ln})},onVisibleChange:Lo})))}gt.propTypes={values:(0,Z.arrayOf)((0,Z.shape)({})),control:(0,Z.shape)({}),advancedSetting:(0,Z.shape)({}),onChange:Z.func};var Et=t(68461),ft=(0,o.Z)([`
  display: inline-block;
  margin-right: 10px;
  padding: 0 10px;
  height: 24px;
  line-height: 24px;
  border-radius: 24px;
  background: #e5e5e5;
  max-width: 100%;
  font-size: 13px;
  .name {
    display: inline-block;
    width: calc(100% - 17px);
  }
  .icon {
    margin-left: 4px;
  }
`],[`
  display: inline-block;
  margin-right: 10px;
  padding: 0 10px;
  height: 24px;
  line-height: 24px;
  border-radius: 24px;
  background: #e5e5e5;
  max-width: 100%;
  font-size: 13px;
  .name {
    display: inline-block;
    width: calc(100% - 17px);
  }
  .icon {
    margin-left: 4px;
  }
`]),qe=U.ZP.div(ft),nt=(0,o.Z)([`
  position: relative;
  cursor: pointer;
  display: flex;
  align-items: center;
  min-height: 32px;
  line-height: 32px;
  border-radius: 4px;
  overflow: hidden;
  border: 1px solid `,` !important;
  .clearIcon {
    display: none;
  }
  .customCascader .ant-select-selector {
    border: none !important;
    border-color: transparent !important;
    min-height: 32px;
    height: 32px !important;
  }
  &:hover {
    .clearIcon {
      display: inline-block;
    }
  }
  `,`
  .customCascaderDel {
    display: none;
  }
  .customCascaderInput,
  .customAntSelect {
    width: 100% !important;
    height: 1px;
    overflow: hidden;
    opacity: 0;
    float: left;
    padding: 0;
    margin: 0 -8px !important;
    * {
      height: 1px !important;
      min-height: 1px !important;
      overflow: hidden !important;
    }
  }
`],[`
  position: relative;
  cursor: pointer;
  display: flex;
  align-items: center;
  min-height: 32px;
  line-height: 32px;
  border-radius: 4px;
  overflow: hidden;
  border: 1px solid `,` !important;
  .clearIcon {
    display: none;
  }
  .customCascader .ant-select-selector {
    border: none !important;
    border-color: transparent !important;
    min-height: 32px;
    height: 32px !important;
  }
  &:hover {
    .clearIcon {
      display: inline-block;
    }
  }
  `,`
  .customCascaderDel {
    display: none;
  }
  .customCascaderInput,
  .customAntSelect {
    width: 100% !important;
    height: 1px;
    overflow: hidden;
    opacity: 0;
    float: left;
    padding: 0;
    margin: 0 -8px !important;
    * {
      height: 1px !important;
      min-height: 1px !important;
      overflow: hidden !important;
    }
  }
`]),Ze=(0,o.Z)([`
  position: absolute;
  bottom: 0px;
  left: 0;
  width: 100%;
`],[`
  position: absolute;
  bottom: 0px;
  left: 0;
  width: 100%;
`]),et=(0,o.Z)([`
  width: 100%;
  padding: 0 10px;
`],[`
  width: 100%;
  padding: 0 10px;
`]),ut=(0,o.Z)([`
  cursor: pointer;
  font-size: 13px;
  color: #9e9e9e;
  margin-right: 8px;
`],[`
  cursor: pointer;
  font-size: 13px;
  color: #9e9e9e;
  margin-right: 8px;
`]),xt=U.ZP.div(nt,function(Sn){var Hn=Sn.active;return Hn?"#2196f3":"#ddd"},function(Sn){var Hn=Sn.isEmpty;return Hn?"":"&:hover { .downIcon { display: none;} }"}),wt=U.ZP.div(Ze),kt=U.ZP.div(et),Rt=U.ZP.i(ut);function jt(Sn){var Hn=Sn.view,Un=Hn===void 0?{}:Hn,Nn=Sn.control,Tn=Sn.values,Pn=Tn===void 0?[]:Tn,jn=Sn.advancedSetting,ta=Sn.onChange,Qn=ta===void 0?function(){}:ta,ca=jn||{},la=ca.allowitem,sa=String(la)==="2",ma=(0,g.useRef)({}),_n=(0,g.useState)(),Ea=(0,r.Z)(_n,2),qa=Ea[0],Za=Ea[1],ja=(0,g.useState)(),Aa=(0,r.Z)(ja,2),fa=Aa[0],Wa=Aa[1],za=ma.current.tempValue?Pn.concat(ma.current.tempValue):Pn;function ya(na){Qn((0,ce.default)({filterType:Sn.filterType||24},na))}return g.createElement(xt,{active:qa,isEmpty:!Pn.length},g.createElement(kt,{onClick:function(){return Za(!0)}},!za.length&&g.createElement("span",{className:"Font13 Gray_bd"},_l("\u8BF7\u9009\u62E9")),za.map(function(na,Da){return g.createElement(qe,{key:Da},g.createElement("span",{className:"name ellipsis",title:na.name},na.name),g.createElement("i",{className:"icon icon-delete Gray_9e Font10 Hand",onClick:function(Oa){Oa.stopPropagation(),ya({values:Pn.filter(function(_r){return _r.rowid!==na.rowid})})}}))})),qa&&g.createElement(wt,null,g.createElement(Et.Z,{visible:!0,popupAlign:{offset:[6,2],overflow:{adjustX:!0,adjustY:!0}},treePopupAlign:{offset:[7,-28],overflow:{adjustX:!0,adjustY:!0}},onChange:function(Da){Da=JSON.parse(Da),ma.current.tempValue=Da.map(function(Ga){return{rowid:Ga.sid,name:Ga.name}})[0],Wa(Math.random())},dataSource:Nn.dataSource,viewId:Nn.viewId,advancedSetting:Nn.advancedSetting,onPopupVisibleChange:function(Da){!Da&&ma.current.tempValue&&(sa?(ya({values:S().unionBy(Pn.concat(ma.current.tempValue),"rowid")}),ma.current.tempValue=void 0):(ya({values:[ma.current.tempValue]}),ma.current.tempValue=void 0)),Za(Da)}})),g.createElement(Rt,{className:"icon icon-arrow-down-border downIcon"}),!!Pn.length&&g.createElement(Rt,{className:"icon icon-cancel clearIcon",onClick:function(Da){ya({values:[]}),Da.stopPropagation()}}))}jt.propTypes={values:(0,Z.arrayOf)((0,Z.shape)({})),control:(0,Z.shape)({}),advancedSetting:(0,Z.shape)({}),onChange:Z.func};var fn=t(82570),Mt=t(17529),sn=(0,o.Z)([`
  position: relative;
  display: flex;
  align-items: center;
  .ant-select {
    border-radius: 4px;
    border: 1px solid #dddddd;
    `,`
    line-height: 32px;
    overflow: hidden;
    &:hover {
      border-color: #ccc !important;
    }
    &.ant-select-open {
      border-color: #2196f3 !important;
    }
    &.customAntSelect:not(.ant-select-open):not(.ant-select-disabled) .ant-select-selector {
      background-color: transparent !important;
      &:hover {
        background-color: transparent !important;
      }
    }
    .ant-select-selector {
      cursor: pointer !important;
      border: none !important;
      min-height: 30px;
      .customAntSelectPlaceHolder,
      .ant-select-selection-placeholder {
        color: #bdbdbd !important;
        font-size: 13px !important;
      }
      .ant-select-selection-search-input {
        height: 30px !important;
      }
      .ant-select-selection-placeholder {
        line-height: 30px !important;
      }
      .ant-select-selection-item {
        line-height: 28px !important;
      }
      .ant-select-selection-item > span {
        margin: 3px 0 !important;
      }
      .customAntSelectPlaceHolder {
        padding: 0px !important;
      }
    }
    .isEmpty {
      color: inherit !important;
      margin-left: 0px !important;
      padding-left: 0px !important;
      .icon-close {
        display: none;
      }
    }
    &.ant-select-multiple {
      .ant-select-selector .ant-select-selection-overflow {
        `,`
      }
      .customAntDropdownTitleWithBG {
        margin-top: 4px !important;
        margin-bottom: 4px !important;
      }
    }
  }
`],[`
  position: relative;
  display: flex;
  align-items: center;
  .ant-select {
    border-radius: 4px;
    border: 1px solid #dddddd;
    `,`
    line-height: 32px;
    overflow: hidden;
    &:hover {
      border-color: #ccc !important;
    }
    &.ant-select-open {
      border-color: #2196f3 !important;
    }
    &.customAntSelect:not(.ant-select-open):not(.ant-select-disabled) .ant-select-selector {
      background-color: transparent !important;
      &:hover {
        background-color: transparent !important;
      }
    }
    .ant-select-selector {
      cursor: pointer !important;
      border: none !important;
      min-height: 30px;
      .customAntSelectPlaceHolder,
      .ant-select-selection-placeholder {
        color: #bdbdbd !important;
        font-size: 13px !important;
      }
      .ant-select-selection-search-input {
        height: 30px !important;
      }
      .ant-select-selection-placeholder {
        line-height: 30px !important;
      }
      .ant-select-selection-item {
        line-height: 28px !important;
      }
      .ant-select-selection-item > span {
        margin: 3px 0 !important;
      }
      .customAntSelectPlaceHolder {
        padding: 0px !important;
      }
    }
    .isEmpty {
      color: inherit !important;
      margin-left: 0px !important;
      padding-left: 0px !important;
      .icon-close {
        display: none;
      }
    }
    &.ant-select-multiple {
      .ant-select-selector .ant-select-selection-overflow {
        `,`
      }
      .customAntDropdownTitleWithBG {
        margin-top: 4px !important;
        margin-bottom: 4px !important;
      }
    }
  }
`]),on=(0,o.Z)([`
  position: relative;
`],[`
  position: relative;
`]),en=(0,o.Z)([`
  position: absolute;
  background: #fff;
  left: 10px;
  top: 1px;
  font-size: 13px;
  z-index: 2;
  min-height: 30px;
  width: calc(100% - 40px);
  pointer-events: none;
`],[`
  position: absolute;
  background: #fff;
  left: 10px;
  top: 1px;
  font-size: 13px;
  z-index: 2;
  min-height: 30px;
  width: calc(100% - 40px);
  pointer-events: none;
`]),$t=U.ZP.div(sn,function(Sn){var Hn=Sn.isMultiple;return Hn?"":"height: 32px;"},function(Sn){var Hn=Sn.isMultiple;return Hn?".ant-select-selection-search { margin: 0px; }":"display: none;"}),an=U.ZP.div(on),tn=U.ZP.div(en);function mt(Sn,Hn){try{var Un=JSON.parse(Hn);return Sn.filter(function(Nn){return S().includes(Un,Nn.key)})}catch(Nn){return Sn}}function Lt(Sn){var Hn=Sn.filterType,Un=Sn.isMultiple,Nn=Sn.values,Tn=Nn===void 0?[]:Nn,Pn=Sn.control,jn=Sn.advancedSetting,ta=jn===void 0?{}:jn,Qn=Sn.onChange,ca=Qn===void 0?function(){}:Qn,la=ta.allowitem,sa=ta.direction,ma=ta.navshow,_n=ta.navfilters,Ea=ta.shownullitem,qa=ta.nullitemname,Za=Pn.options;String(ma)==="2"&&(Za=mt(Za,_n)),Ea==="1"&&(Za=[{key:"isEmpty",color:"transparent",value:qa||_l("\u4E3A\u7A7A")}].concat(Za));var ja=String(la)==="2";function Aa(fa){ca((0,ce.default)({},fa))}return String(sa)==="1"?g.createElement(an,null,Za.filter(function(fa){return!fa.isDeleted}).slice(0,20).map(function(fa,Wa){return g.createElement(st,{className:z()({multiple:ja,checked:S().includes(Tn,fa.key)}),title:fa.value,key:Wa,onClick:function(){fa.key==="isEmpty"?Aa({values:Tn.length===1&&Tn[0]==="isEmpty"?[]:["isEmpty"]}):S().includes(Tn,fa.key)?Aa({values:Tn.filter(function(ya){return ya!==fa.key&&ya!=="isEmpty"})}):Aa({values:ja?S().uniqBy(Tn.concat(fa.key)).filter(function(ya){return ya!=="isEmpty"}):[fa.key]})}},ja&&S().includes(Tn,fa.key)&&g.createElement("span",{className:"icon-hr_ok selectedIcon"}),g.createElement("div",{className:"ellipsis"},fa.value))})):String(sa)==="2"&&String(la)==="1"?g.createElement($t,null,g.createElement(fn.Z,(0,ce.default)({fromFilter:!0},(0,ce.default)({},Pn,{advancedSetting:(0,ce.default)({},Pn.advancedSetting,{allowadd:"0",showtype:"1"}),options:Za.map(function(fa){return(0,ce.default)({},fa,{hide:!1})})}),{default:void 0,dropdownClassName:"scrollInTable withIsEmpty",value:de()(Tn),selectProps:{onChange:function(Wa){S().isObject(Wa)&&(Wa=Wa.value),Aa({values:Wa?[Wa]:[]})}}}))):String(sa)==="2"&&String(la)==="2"?g.createElement($t,{isMultiple:!0},g.createElement(Mt.Z,(0,ce.default)({},(0,ce.default)({},Pn,(0,se.default)({options:Za,advancedSetting:(0,ce.default)({},Pn.advancedSetting,{checktype:"1"})},"options",Pn.options.map(function(fa){return(0,ce.default)({},fa,{hide:!1})}))),{default:void 0,fromFilter:!0,isFocus:!0,dropdownClassName:"scrollInTable withIsEmpty",value:de()(Tn),onChange:function(Wa){Aa({values:JSON.parse(Wa)})}}))):g.createElement("span",null)}Lt.propTypes={values:(0,Z.arrayOf)(Z.string),control:(0,Z.shape)({}),advancedSetting:(0,Z.shape)({}),onChange:Z.func};var zt=t(31546),Zt=t(40516),Nt=t(43514),ct=t(94914),De=t(30381),_e=t.n(De),Le=(0,o.Z)([`
  position: relative;
  display: flex;
  align-items: center;
  height: 32px;
  line-height: 32px;
  border: 1px solid #dddddd;
  border-radius: 4px;
  .backIcon {
    display: none;
    position: absolute;
    right: 0px;
    padding-right: 2px;
  }
  .customAntPicker {
    box-shadow: none;
    border: none;

    border-radius: 4px;
    .ant-picker-clear {
      display: none;
    }
    .ant-picker-input input {
      font-size: 13px;
    }
  }
  &:hover:not(.active) {
    border-color: #ccc;
  }
  &.active {
    border-color: #2196f3;
  }
  &:hover {
    .clearIcon {
      display: inline-block;
    }
    .backIcon {
      cursor: pointer;
      display: inline-block;
      background: #fff;
      &:hover {
        color: #777;
      }
    }
  }
`],[`
  position: relative;
  display: flex;
  align-items: center;
  height: 32px;
  line-height: 32px;
  border: 1px solid #dddddd;
  border-radius: 4px;
  .backIcon {
    display: none;
    position: absolute;
    right: 0px;
    padding-right: 2px;
  }
  .customAntPicker {
    box-shadow: none;
    border: none;

    border-radius: 4px;
    .ant-picker-clear {
      display: none;
    }
    .ant-picker-input input {
      font-size: 13px;
    }
  }
  &:hover:not(.active) {
    border-color: #ccc;
  }
  &.active {
    border-color: #2196f3;
  }
  &:hover {
    .clearIcon {
      display: inline-block;
    }
    .backIcon {
      cursor: pointer;
      display: inline-block;
      background: #fff;
      &:hover {
        color: #777;
      }
    }
  }
`]),rt=(0,o.Z)([`
  flex: 1;
  width: 0;
  .Dropdown {
    width: 100%;
    .Dropdown--input {
      padding: 0 10px !important;
    }
    .Icon.ming {
      position: absolute;
      right: 10px;
      line-height: 32px;
    }
  }
  &.isEmpty {
    .Dropdown--input .value,
    .mui-datetime-picker {
      color: #bdbdbd;
    }
  }
`],[`
  flex: 1;
  width: 0;
  .Dropdown {
    width: 100%;
    .Dropdown--input {
      padding: 0 10px !important;
    }
    .Icon.ming {
      position: absolute;
      right: 10px;
      line-height: 32px;
    }
  }
  &.isEmpty {
    .Dropdown--input .value,
    .mui-datetime-picker {
      color: #bdbdbd;
    }
  }
`]),Ct=(0,o.Z)([`
  .ant-picker-input > input {
    font-size: 13px !important;
  }
  .ant-picker-suffix {
    display: none;
  }
`],[`
  .ant-picker-input > input {
    font-size: 13px !important;
  }
  .ant-picker-suffix {
    display: none;
  }
`]),dt=(0,o.Z)([`
  font-size: 13px;
  color: #9e9e9e;
  margin-right: 8px;
  &.icon-cancel {
    cursor: pointer;
    &:hover {
      color: #777;
    }
  }
  &.clearIcon {
    display: none;
    position: absolute;
    right: 0;
    background: #fff;
  }
`],[`
  font-size: 13px;
  color: #9e9e9e;
  margin-right: 8px;
  &.icon-cancel {
    cursor: pointer;
    &:hover {
      color: #777;
    }
  }
  &.clearIcon {
    display: none;
    position: absolute;
    right: 0;
    background: #fff;
  }
`]);function It(Sn){return{4:"month",5:"year"}[Sn]}var bt=U.ZP.div(Le),Ut=U.ZP.div(rt),Xt=U.ZP.div(Ct),pn=U.ZP.i(dt);function tt(Sn){Sn.advancedSetting.min=void 0,Sn.advancedSetting.max=void 0,Sn.advancedSetting.allowweek=void 0,Sn.advancedSetting.allowtime=void 0,Sn.advancedSetting.timeinterval=void 0}function ht(Sn){var Hn=Sn.control,Un=Sn.dateRange,Nn=Sn.dateRangeType,Tn=Sn.value,Pn=Sn.minValue,jn=Sn.maxValue,ta=Sn.advancedSetting,Qn=ta===void 0?{}:ta,ca=Sn.onChange,la=ca===void 0?function(){}:ca,sa=Sn.filterType||L.W5.DATE_BETWEEN,ma=L.AW,_n=(0,g.useState)(),Ea=(0,r.Z)(_n,2),qa=Ea[0],Za=Ea[1];Nn&&(Hn.advancedSetting.showtype=String(Nn),(0,A.includes)(["3","4","5"],String(Nn))&&(Hn.type=15)),tt(Hn);var ja=S().get(Hn,"advancedSetting.showtype"),Aa=[];try{Aa=JSON.parse(Qn.daterange)}catch(Ga){}var fa=Un===18||S().isEmpty(Aa),Wa=Un===18?sa===L.W5.DATE_BETWEEN?!(Pn&&jn):!Tn:!Un,za=(0,ct.VL)(Hn),ya=(0,ct.eO)(Hn).formatMode,na=za.split(" ")[1];S().includes(["4","5"],ja)&&(ma=ma.map(function(Ga){return Ga.filter(function(Oa){return S().includes(ja==="5"?[15,16,17,18]:[7,8,9,12,13,14,15,16,17,18],Oa.value)})}).filter(function(Ga){return Ga.length}));var Da=null;return fa&&(sa===L.W5.DATE_BETWEEN?Da=g.createElement(Xt,null,g.createElement(Zt.Z,{className:"customAntPicker",value:Pn&&jn?[_e()(Pn),_e()(jn)]:[],showTime:na?{format:na}:!1,picker:It(ja),format:za,onChange:function(Oa){(!Oa||!S().isArray(Oa))&&(Oa=[]),la({dateRange:18,filterType:31,minValue:Oa[0]&&Oa[0].format(ya==="YYYY-MM-DD HH"?void 0:ya),maxValue:Oa[1]&&Oa[1].format(ya==="YYYY-MM-DD HH"?void 0:ya)})}})):Da=g.createElement(Xt,null,g.createElement(Nt.Z,(0,ce.default)({},Hn,{showTime:!!na,value:Tn&&_e()(Tn),dropdownClassName:"scrollInTable",onChange:function(Oa){la({dateRange:18,filterType:sa||L.W5.DATEENUM,value:_e()(Oa).format(ya==="YYYY-MM-DD HH"?void 0:ya)})}})))),g.createElement(bt,{className:z()({active:qa})},g.createElement(Ut,{className:z()({isEmpty:Wa})},Da||g.createElement(zt.Z,{isAppendToBody:!0,value:Un,data:ma.map(function(Ga){return Ga.filter(function(Oa){return S().includes(Aa.concat(18),Oa.value)})}),onChange:function(Oa){var _r={filterType:sa||L.W5.DATEENUM,dateRange:Oa,minValue:void 0,maxValue:void 0};la(_r)},onVisibleChange:Za})),Da&&g.createElement(pn,{className:z()("icon",Pn||jn?"icon-cancel":"icon-event"),onClick:function(){la({dateRange:0,minValue:void 0,maxValue:void 0})}}),Wa&&Un===18&&g.createElement(pn,{className:"icon icon-arrow-down-border backIcon",onClick:function(){la({dateRange:0,minValue:void 0,maxValue:void 0,value:void 0})}}),!Wa&&g.createElement(pn,{className:"icon icon-cancel clearIcon",onClick:function(){la({dateRange:0,minValue:void 0,maxValue:void 0,value:void 0})}}))}ht.propTypes={dateRange:Z.string,advancedSetting:(0,Z.shape)({}),minValue:Z.string,maxValue:Z.string,onChange:Z.func};var Dt=t(68841),Ot=t(12528),Ht=t(43792),Kt=t(19458),dn=t(13681),Cn=t(2e3),Rn=(0,o.Z)([`
  position: relative;
  display: flex;
  align-items: center;
  height: 32px;
  line-height: 32px;
  border: 1px solid #dddddd;
  border-radius: 4px;
  .ant-picker {
    width: 100%;
    box-shadow: none;
    border: none;
    border-radius: 4px;
    .ant-picker-clear {
      display: none;
    }
    .ant-picker-input input {
      font-size: 13px;
    }
  }
  &:hover:not(.active) {
    border-color: #ccc;
  }
  &.active {
    border-color: #2196f3;
  }
  &:hover {
    .clearIcon {
      display: inline-block;
    }
  }
`],[`
  position: relative;
  display: flex;
  align-items: center;
  height: 32px;
  line-height: 32px;
  border: 1px solid #dddddd;
  border-radius: 4px;
  .ant-picker {
    width: 100%;
    box-shadow: none;
    border: none;
    border-radius: 4px;
    .ant-picker-clear {
      display: none;
    }
    .ant-picker-input input {
      font-size: 13px;
    }
  }
  &:hover:not(.active) {
    border-color: #ccc;
  }
  &.active {
    border-color: #2196f3;
  }
  &:hover {
    .clearIcon {
      display: inline-block;
    }
  }
`]),gn=(0,o.Z)([`
  flex: 1;
  width: 0;
  .Dropdown {
    width: 100%;
    .Dropdown--input {
      padding: 0 10px !important;
    }
    .Icon.ming {
      position: absolute;
      right: 10px;
      line-height: 32px;
    }
  }
  &.isEmpty {
    .Dropdown--input .value,
    .mui-datetime-picker {
      color: #bdbdbd;
    }
  }
`],[`
  flex: 1;
  width: 0;
  .Dropdown {
    width: 100%;
    .Dropdown--input {
      padding: 0 10px !important;
    }
    .Icon.ming {
      position: absolute;
      right: 10px;
      line-height: 32px;
    }
  }
  &.isEmpty {
    .Dropdown--input .value,
    .mui-datetime-picker {
      color: #bdbdbd;
    }
  }
`]),wn=(0,o.Z)([`
  .ant-picker-input > input {
    font-size: 13px !important;
  }
  .ant-picker-suffix {
    display: none;
  }
`],[`
  .ant-picker-input > input {
    font-size: 13px !important;
  }
  .ant-picker-suffix {
    display: none;
  }
`]),On=(0,o.Z)([`
  font-size: 13px;
  color: #9e9e9e;
  margin-right: 8px;
  &.icon-cancel {
    cursor: pointer;
    &:hover {
      color: #777;
    }
  }
  &.clearIcon {
    display: none;
    position: absolute;
    right: 0;
    background: #fff;
  }
`],[`
  font-size: 13px;
  color: #9e9e9e;
  margin-right: 8px;
  &.icon-cancel {
    cursor: pointer;
    &:hover {
      color: #777;
    }
  }
  &.clearIcon {
    display: none;
    position: absolute;
    right: 0;
    background: #fff;
  }
`]);function An(Sn){return{4:"month",5:"year"}[Sn]}var Yn=U.ZP.div(Rn),kn=U.ZP.div(gn),Fn=U.ZP.div(wn),$n=U.ZP.i(On);function ba(Sn){var Hn=Sn.control,Un=Sn.dateRange,Nn=Sn.minValue,Tn=Sn.maxValue,Pn=Sn.onChange,jn=Pn===void 0?function(){}:Pn,ta=(0,g.useState)(),Qn=(0,r.Z)(ta,2),ca=Qn[0],la=Qn[1],sa=getCookie("i18n_langtag")||md.global.Config.DefaultLang,ma=String(Hn.unit),_n=ma==="1"?"HH:mm":"HH:mm:ss",Ea=Un===18?!(Nn&&Tn):!Un;return g.createElement(Yn,{className:z()({active:ca})},g.createElement(kn,{className:z()({isEmpty:Ea})},g.createElement(Fn,null,g.createElement(Ot.Z.RangePicker,{format:_n,locale:sa==="en"?dn.Z:sa==="ja"?Cn.Z:sa==="zh-Hant"?Kt.Z:Ht.Z,value:Nn&&Tn?[_e()(Nn,_n),_e()(Tn,_n)]:[],onChange:function(Za){(!Za||!S().isArray(Za))&&(Za=[]),jn({dateRange:18,filterType:31,minValue:Za[0]&&Za[0].format(_n),maxValue:Za[1]&&Za[1].format(_n)})}}))),g.createElement($n,{className:z()("icon",Nn||Tn?"icon-cancel":"icon-event"),onClick:function(){jn({dateRange:0,minValue:void 0,maxValue:void 0})}}))}ba.propTypes={dateRange:Z.string,advancedSetting:(0,Z.shape)({}),minValue:Z.string,maxValue:Z.string,onChange:Z.func};var ua=t(60967),La=t(47426),ga=t(66215),Ua=t(62232),yr=(0,o.Z)([`
  display: flex;
  height: 32px;
  align-items: center;
  .RadioGroup {
    width: 100%;
    flex-wrap: nowrap;
    label {
      display: inline-block;
      max-width: 50%;
      margin-right: 0;
      padding-right: 20px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }
`],[`
  display: flex;
  height: 32px;
  align-items: center;
  .RadioGroup {
    width: 100%;
    flex-wrap: nowrap;
    label {
      display: inline-block;
      max-width: 50%;
      margin-right: 0;
      padding-right: 20px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }
`]),sr=U.ZP.div(yr);function Ba(Sn){var Hn=Sn.filterType,Un=Sn.onChange,Nn=Un===void 0?function(){}:Un,Tn=Sn.control;Tn=Tn===void 0?{}:Tn;var Pn=Tn.advancedSetting,jn=Pn===void 0?{}:Pn,ta=(0,Ua.jT)(Sn.control),Qn=Hn===L.W5.EQ,ca=function(ma){Nn({filterType:ma?L.W5.NE:L.W5.EQ,value:1})};if(jn.showtype==="1"){var la=Qn?S().get(ta[0],"value"):S().get(ta[1],"value");return g.createElement(sr,null,g.createElement(ga.Z,{checked:Qn,onClick:ca}),la&&g.createElement("span",{className:"mLeft6 flex overflow_ellipsis"},la))}return jn.showtype==="2"?g.createElement(sr,null,g.createElement(La.ZP,{size:"middle",checkedValue:Hn===0||S().isUndefined(Hn)?void 0:Qn?"1":"0",data:ta.map(function(sa){return{text:sa.value,value:sa.key}}),onChange:function(ma){return ca(ma!=="1")}})):g.createElement(sr,{style:{fontSize:0}},g.createElement(ua.Z,{checked:Qn,onClick:ca}))}Ba.propTypes={filterType:Z.string,onChange:Z.func};var cr=t(15759),hr=t(75809),Qa=t(61987),da=(0,o.Z)([`
  display: flex;
  align-items: center;
  min-height: 32px;
  line-height: 32px;
  border: 1px solid #dddddd;
  border-radius: 4px;
  border: 1px solid `,` !important;
  .clearIcon {
    display: none;
  }
  &:hover {
    .clearIcon {
      display: inline-block;
    }
  }
  `,`
`],[`
  display: flex;
  align-items: center;
  min-height: 32px;
  line-height: 32px;
  border: 1px solid #dddddd;
  border-radius: 4px;
  border: 1px solid `,` !important;
  .clearIcon {
    display: none;
  }
  &:hover {
    .clearIcon {
      display: inline-block;
    }
  }
  `,`
`]),Jn=(0,o.Z)([`
  cursor: pointer;
  flex: 1;
  overflow: hidden;
  font-size: 13px;
  min-height: 32px;
  padding: 0 0 0 10px;
`],[`
  cursor: pointer;
  flex: 1;
  overflow: hidden;
  font-size: 13px;
  min-height: 32px;
  padding: 0 0 0 10px;
`]),ra=(0,o.Z)([`
  font-size: 13px;
  display: inline-block;
  color: #333;
  background: #e5e5e5;
  height: 24px;
  line-height: 24px;
  border-radius: 24px;
  padding-right: 8px;
  margin: 4px 6px 0 0;
  .userHead {
    display: inline-block !important;
    margin-right: 6px;
    vertical-align: top;
    img {
      vertical-align: unset;
    }
  }
`],[`
  font-size: 13px;
  display: inline-block;
  color: #333;
  background: #e5e5e5;
  height: 24px;
  line-height: 24px;
  border-radius: 24px;
  padding-right: 8px;
  margin: 4px 6px 0 0;
  .userHead {
    display: inline-block !important;
    margin-right: 6px;
    vertical-align: top;
    img {
      vertical-align: unset;
    }
  }
`]),ha=(0,o.Z)([`
  font-size: 13px;
  color: #333;
  .userHead {
    display: inline-block !important;
    margin-right: 8px;
  }
`],[`
  font-size: 13px;
  color: #333;
  .userHead {
    display: inline-block !important;
    margin-right: 8px;
  }
`]),Ia=(0,o.Z)([`
  cursor: pointer;
  font-size: 13px;
  color: #9e9e9e;
  margin-right: 8px;
`],[`
  cursor: pointer;
  font-size: 13px;
  color: #9e9e9e;
  margin-right: 8px;
`]),wa=(0,o.Z)([`
  color: #bdbdbd;
`],[`
  color: #bdbdbd;
`]),Ka=U.ZP.div(da,function(Sn){var Hn=Sn.active;return Hn?"#2196f3":"#ddd"},function(Sn){var Hn=Sn.isEmpty;return Hn?"":"&:hover { .downIcon { display: none;} }"}),tr=U.ZP.div(Jn),Tr=U.ZP.div(ra),xr=U.ZP.div(ha),_a=U.ZP.i(Ia),gr=U.ZP.span(wa);function zr(Sn){var Hn=Sn.values,Un=Hn===void 0?[]:Hn,Nn=Sn.projectId,Tn=Sn.isMultiple,Pn=Sn.advancedSetting,jn=Pn===void 0?{}:Pn,ta=Sn.onChange,Qn=ta===void 0?function(){}:ta,ca=Sn.appId,la=Sn.from,sa=jn.shownullitem,ma=jn.nullitemname,_n=jn.navshow,Ea=jn.navfilters,qa=(0,g.useState)(),Za=(0,r.Z)(qa,2),ja=Za[0],Aa=Za[1],fa=(0,g.useRef)(),Wa=(0,vt.LU)(Sn.control),za=[];return _n==="2"&&(za=safeParse(Ea).map(safeParse).map(function(ya){return{accountId:ya.id,fullname:ya.name,avatar:ya.avatar}})),g.createElement(Ka,{className:Sn.className,isEmpty:!Un.length,active:ja,onClick:function(){Aa(!0),la==="NavShow"?(0,hr.Z)({title:"\u6DFB\u52A0\u6210\u5458",sourceId:0,fromType:0,showMoreInvite:!1,SelectUserSettings:{includeUndefinedAndMySelf:!0,filterResigned:!1,showMoreInvite:!1,projectId:Nn,unique:!Tn,callback:function(Da){Qn({values:Tn?S().uniqBy([].concat((0,ae.Z)(Un),(0,ae.Z)(Da)),"accountId"):Da}),Aa(!1)}}}):(0,Qa.ZP)(fa.current,{showMoreInvite:!1,isTask:!1,tabType:Wa,appId:ca,includeUndefinedAndMySelf:!0,includeSystemField:!0,offset:{top:4,left:-1},zIndex:10001,filterAccountIds:[md.global.Account.accountId],staticAccounts:(sa==="1"?[{avatar:md.global.FileStoreConfig.pictureHost.replace(/\/$/,"")+"/UserAvatar/undefined.gif?imageView2/1/w/100/h/100/q/90",fullname:ma||_l("\u4E3A\u7A7A"),accountId:"isEmpty"}]:[]).concat(za),SelectUserSettings:{projectId:Nn,unique:!Tn,filterResigned:!1,callback:function(Da){Qn({values:Tn?S().uniqBy([].concat((0,ae.Z)(Un),(0,ae.Z)(Da)),"accountId"):Da}),Aa(!1)}},selectCb:function(Da){Qn({values:Tn?S().uniqBy([].concat((0,ae.Z)(Un),(0,ae.Z)(Da)),"accountId"):Da}),Aa(!1)},onClose:function(){Aa(!1)}})}},g.createElement(tr,{ref:fa},!Un.length&&g.createElement(gr,null,_l("\u8BF7\u9009\u62E9")),!Tn&&Un.length?g.createElement(xr,null,g.createElement(cr.Z,{className:"userHead",user:{userHead:Un[0].avatar,accountId:Un[0].accountId},size:24,appId:ca,projectId:Nn}),Un[0].fullname):Un.map(function(ya){return g.createElement(Tr,{className:"ellipsis"},g.createElement(cr.Z,{className:"userHead",user:{userHead:ya.avatar,accountId:ya.accountId},size:24,appId:ca,projectId:Nn}),ya.fullname,g.createElement("i",{className:"icon icon-delete Gray_9e Font10 mLeft6 Hand",onClick:function(Da){Da.stopPropagation(),Qn({values:Un.filter(function(Ga){return Ga.accountId!==ya.accountId})})}}))})),g.createElement(_a,{className:"icon icon-arrow-down-border downIcon"}),!!Un.length&&g.createElement(_a,{className:"icon icon-cancel clearIcon",onClick:function(na){na.stopPropagation(),Qn({values:[]})}}))}zr.propTypes={projectId:Z.string,values:(0,Z.arrayOf)(Z.string),onChange:Z.func};var ea=t(60510),Xn=(0,o.Z)([`
  display: flex;
  align-items: center;
  min-height: 32px;
  line-height: 32px;
  border: 1px solid #dddddd;
  border-radius: 4px;
  border: 1px solid `,` !important;
  .clearIcon {
    display: none;
  }
  &:hover {
    .clearIcon {
      display: inline-block;
    }
  }
  `,`
`],[`
  display: flex;
  align-items: center;
  min-height: 32px;
  line-height: 32px;
  border: 1px solid #dddddd;
  border-radius: 4px;
  border: 1px solid `,` !important;
  .clearIcon {
    display: none;
  }
  &:hover {
    .clearIcon {
      display: inline-block;
    }
  }
  `,`
`]),Va=(0,o.Z)([`
  cursor: pointer;
  flex: 1;
  overflow: hidden;
  font-size: 13px;
  min-height: 32px;
  padding: 0 0 0 10px;
`],[`
  cursor: pointer;
  flex: 1;
  overflow: hidden;
  font-size: 13px;
  min-height: 32px;
  padding: 0 0 0 10px;
`]),$a=(0,o.Z)([`
  font-size: 13px;
  color: #333;
`],[`
  font-size: 13px;
  color: #333;
`]),vr=(0,o.Z)([`
  cursor: pointer;
  font-size: 13px;
  color: #9e9e9e;
  margin-right: 8px;
`],[`
  cursor: pointer;
  font-size: 13px;
  color: #9e9e9e;
  margin-right: 8px;
`]),Er=(0,o.Z)([`
  color: #bdbdbd;
`],[`
  color: #bdbdbd;
`]),ur=U.ZP.div(Xn,function(Sn){var Hn=Sn.active;return Hn?"#2196f3":"#ddd"},function(Sn){var Hn=Sn.isEmpty;return Hn?"":"&:hover { .downIcon { display: none;} }"}),Kr=U.ZP.div(Va),Fr=U.ZP.div($a),yo=U.ZP.i(vr),eo=U.ZP.span(Er);function wr(Sn){var Hn=Sn.values,Un=Hn===void 0?[]:Hn,Nn=Sn.projectId,Tn=Sn.isMultiple,Pn=Sn.onChange,jn=Pn===void 0?function(){}:Pn,ta=(0,g.useState)(),Qn=(0,r.Z)(ta,2),ca=Qn[0],la=Qn[1];return g.createElement(ur,{isEmpty:!Un.length,active:ca,onClick:function(){la(!0),(0,ea.Z)({unique:!Tn,projectId:Nn,isIncludeRoot:!1,showCurrentUserDept:!0,onClose:function(){return la(!1)},selectFn:function(_n){_n.length&&(la(!1),jn({values:Tn?S().uniqBy([].concat((0,ae.Z)(Un),(0,ae.Z)(_n)),"departmentId"):_n}))}})}},g.createElement(Kr,null,!Un.length&&g.createElement(eo,null,_l("\u8BF7\u9009\u62E9")),!Tn&&!!Un.length&&g.createElement(Fr,{className:"ellipsis",title:Un[0].departmentName},Un[0].departmentName),Tn&&Un.map(function(sa,ma){return g.createElement(qe,{key:ma},g.createElement("span",{className:"name ellipsis"},sa.departmentName),g.createElement("i",{className:"icon icon-delete Gray_9e Font10 Hand",onClick:function(Ea){Ea.stopPropagation(),jn({values:Un.filter(function(qa){return qa.departmentId!==sa.departmentId})})}}))})),g.createElement(yo,{className:"icon icon-department downIcon"}),!!Un.length&&g.createElement(yo,{className:"icon icon-cancel clearIcon",onClick:function(ma){jn({values:[]}),ma.stopPropagation()}}))}wr.propTypes={projectId:Z.string,values:(0,Z.arrayOf)(Z.string),onChange:Z.func};var Or=t(78549),Fo=(0,o.Z)([`
  display: flex;
  align-items: center;
  min-height: 32px;
  line-height: 32px;
  border: 1px solid #dddddd;
  border-radius: 4px;
  border: 1px solid `,` !important;
  .clearIcon {
    display: none;
  }
  &:hover {
    .clearIcon {
      display: inline-block;
    }
  }
  `,`
`],[`
  display: flex;
  align-items: center;
  min-height: 32px;
  line-height: 32px;
  border: 1px solid #dddddd;
  border-radius: 4px;
  border: 1px solid `,` !important;
  .clearIcon {
    display: none;
  }
  &:hover {
    .clearIcon {
      display: inline-block;
    }
  }
  `,`
`]),Wo=(0,o.Z)([`
  cursor: pointer;
  flex: 1;
  overflow: hidden;
  font-size: 13px;
  min-height: 32px;
  padding: 0 0 0 10px;
`],[`
  cursor: pointer;
  flex: 1;
  overflow: hidden;
  font-size: 13px;
  min-height: 32px;
  padding: 0 0 0 10px;
`]),Uo=(0,o.Z)([`
  font-size: 13px;
  color: #333;
`],[`
  font-size: 13px;
  color: #333;
`]),No=(0,o.Z)([`
  cursor: pointer;
  font-size: 13px;
  color: #9e9e9e;
  margin-right: 8px;
`],[`
  cursor: pointer;
  font-size: 13px;
  color: #9e9e9e;
  margin-right: 8px;
`]),Ao=(0,o.Z)([`
  color: #bdbdbd;
`],[`
  color: #bdbdbd;
`]),Oo=U.ZP.div(Fo,function(Sn){var Hn=Sn.active;return Hn?"#2196f3":"#ddd"},function(Sn){var Hn=Sn.isEmpty;return Hn?"":"&:hover { .downIcon { display: none;} }"}),Wr=U.ZP.div(Wo),So=U.ZP.div(Uo),to=U.ZP.i(No),go=U.ZP.span(Ao);function Do(Sn){var Hn=Sn.values,Un=Hn===void 0?[]:Hn,Nn=Sn.projectId,Tn=Sn.isMultiple,Pn=Sn.onChange,jn=Pn===void 0?function(){}:Pn,ta=(0,g.useState)(),Qn=(0,r.Z)(ta,2),ca=Qn[0],la=Qn[1];return g.createElement(Oo,{isEmpty:!Un.length,active:ca,onClick:function(ma){la(!0),(0,Or.Z)(ma.target,{projectId:Nn,showCurrentOrgRole:!0,showCompanyName:!0,unique:!Tn,onSave:function(Ea){Ea.length&&(la(!1),jn({values:Tn?S().uniqBy([].concat((0,ae.Z)(Un),(0,ae.Z)(Ea)),"organizeId"):Ea}))}})}},g.createElement(Wr,null,!Un.length&&g.createElement(go,null,_l("\u8BF7\u9009\u62E9")),!Tn&&!!Un.length&&g.createElement(So,{className:"ellipsis",title:Un[0].organizeName},Un[0].organizeName),Tn&&Un.map(function(sa,ma){return g.createElement(qe,{key:ma},g.createElement("span",{className:"name ellipsis"},sa.organizeName),g.createElement("i",{className:"icon icon-delete Gray_9e Font10 Hand",onClick:function(Ea){Ea.stopPropagation(),jn({values:Un.filter(function(qa){return qa.organizeId!==sa.organizeId})})}}))})),g.createElement(to,{className:"icon icon-group downIcon"}),!!Un.length&&g.createElement(to,{className:"icon icon-cancel clearIcon",onClick:function(ma){jn({values:[]}),ma.stopPropagation()}}))}Do.propTypes={projectId:Z.string,values:(0,Z.arrayOf)(Z.string),onChange:Z.func};var Ja=t(51156),ar=(0,o.Z)([`
  display: flex;
  align-items: center;
  min-height: 32px;
  line-height: 32px;
  border: 1px solid #dddddd;
  border-radius: 4px;
  border: 1px solid `,` !important;
  .clearIcon {
    display: none;
  }
  &:hover {
    .clearIcon {
      display: inline-block;
    }
  }
  `,`
`],[`
  display: flex;
  align-items: center;
  min-height: 32px;
  line-height: 32px;
  border: 1px solid #dddddd;
  border-radius: 4px;
  border: 1px solid `,` !important;
  .clearIcon {
    display: none;
  }
  &:hover {
    .clearIcon {
      display: inline-block;
    }
  }
  `,`
`]),Ur=(0,o.Z)([`
  cursor: pointer;
  flex: 1;
  overflow: hidden;
  font-size: 13px;
  min-height: 32px;
  padding: 0 0 0 10px;
`],[`
  cursor: pointer;
  flex: 1;
  overflow: hidden;
  font-size: 13px;
  min-height: 32px;
  padding: 0 0 0 10px;
`]),Zr=(0,o.Z)([`
  cursor: pointer;
  font-size: 13px;
  color: #9e9e9e;
  margin-right: 8px;
`],[`
  cursor: pointer;
  font-size: 13px;
  color: #9e9e9e;
  margin-right: 8px;
`]),$r=(0,o.Z)([`
  font-size: 13px;
  color: #333 !important;
  height: 32px !important;
  &::-webkit-input-placeholder {
    color: #bdbdbd;
  }
`],[`
  font-size: 13px;
  color: #333 !important;
  height: 32px !important;
  &::-webkit-input-placeholder {
    color: #bdbdbd;
  }
`]),oo=U.ZP.div(ar,function(Sn){var Hn=Sn.active;return Hn?"#2196f3":"#ddd"},function(Sn){var Hn=Sn.isEmpty;return Hn?"":"&:hover { .downIcon { display: none;} }"}),Po=U.ZP.div(Ur),io=U.ZP.i(Zr),Zo=(0,U.ZP)(a.Z)($r);function Xo(Sn){var Hn=Sn.values,Un=Hn===void 0?[]:Hn,Nn=Sn.control,Tn=Sn.isMultiple,Pn=Sn.onChange,jn=Pn===void 0?function(){}:Pn,ta=(0,g.useState)(),Qn=(0,r.Z)(ta,2),ca=Qn[0],la=Qn[1],sa=(0,g.useState)(void 0),ma=(0,r.Z)(sa,2),_n=ma[0],Ea=ma[1],qa=(0,g.useState)(""),Za=(0,r.Z)(qa,2),ja=Za[0],Aa=Za[1],fa=(0,g.useRef)(),Wa=S().debounce(function(ya){Aa(ya)},500),za=function(){_n&&(Ea(Tn?"":void 0),Aa(""))};return g.createElement(Ja.Z,{popupClassName:"as",search:ja,destroyPopupOnHide:!0,defaultValue:void 0,level:Nn.type===19?1:Nn.type===23?2:3,callback:function(na){var Da=S().last(na);Da&&(fa.current={name:Da.path,id:Da.id}),za()},handleClose:function(){la(!1),fa.current&&jn({values:Tn?S().uniqBy([].concat((0,ae.Z)(Un),[fa.current]),"id"):[fa.current]}),za()}},g.createElement(oo,{isEmpty:!Un.length,active:ca},g.createElement(Po,{onClick:function(){la(!0)}},Tn&&Un.map(function(ya,na){return g.createElement(qe,{key:na},g.createElement("span",{className:"name ellipsis"},ya.name),g.createElement("i",{className:"icon icon-delete Gray_9e Font10 Hand",onClick:function(Ga){Ga.stopPropagation(),jn({values:Un.filter(function(Oa){return Oa.id!==ya.id})})}}))}),g.createElement(Zo,{className:"CityPicker-input-textCon",placeholder:Tn&&Un.length?"":_l("\u8BF7\u9009\u62E9"),value:Tn?_n||"":_n!==void 0?_n:(Un[0]||{name:""}).name,onChange:function(na){Ea(na),Wa(na)}})),g.createElement(io,{className:"icon icon-arrow-down-border downIcon"}),!!Un.length&&g.createElement(io,{className:"icon icon-cancel clearIcon",onClick:function(na){na.stopPropagation(),jn({values:[]}),fa.current=void 0,_n&&(Ea(""),Aa(""))}})))}Xo.propTypes={control:(0,Z.shape)({}),values:(0,Z.arrayOf)(Z.string),onChange:Z.func};var ai=(0,o.Z)([`
  display: flex;
  align-items: center;
  height: 32px;
  line-height: 32px;
  border: 1px solid #ddd !important;
  border-radius: 4px;
  background-color: #f5f5f5;
  padding: 0 12px;
  color: #bdbdbd;
  cursor: not-allowed;
`],[`
  display: flex;
  align-items: center;
  height: 32px;
  line-height: 32px;
  border: 1px solid #ddd !important;
  border-radius: 4px;
  background-color: #f5f5f5;
  padding: 0 12px;
  color: #bdbdbd;
  cursor: not-allowed;
`]),ri=U.ZP.div(ai);function bo(){return g.createElement(ri,null," ",_l("\u5B57\u6BB5\u914D\u7F6E\u51FA\u9519"))}bo.propTypes={control:(0,Z.shape)({}),values:(0,Z.arrayOf)(Z.string),onChange:Z.func};function jo(Sn){var Hn=Sn.type;return Hn===p.DN.SHEET_FIELD&&Sn&&(Hn=Sn.sourceControlType||-1e4),Hn===p.DN.SUBTOTAL&&Sn&&(Hn=Sn.enumDefault2||6),Hn===p.DN.SEARCH&&(Hn=p.DN.TEXT),Hn}var Jo={};function Pr(Sn,Hn){Sn.forEach(function(Un){return Jo[Un]=Hn})}var ko=[p.DN.TEXT,p.DN.TELEPHONE,p.DN.MOBILE_PHONE,p.DN.EMAIL,p.DN.CRED,p.DN.CONCATENATE,p.DN.AUTO_ID];Pr(ko,F);var Ho=[p.DN.NUMBER,p.DN.MONEY,p.DN.FORMULA_NUMBER];Pr(Ho,T);var Xr=[p.DN.RELATE_SHEET];Pr(Xr,gt);var _o=[p.DN.CASCADER];Pr(_o,jt);var oi=[p.DN.FLAT_MENU,p.DN.MULTI_SELECT,p.DN.DROP_DOWN];Pr(oi,Lt);var qo=[p.DN.SWITCH];Pr(qo,Ba);var Vo=[p.DN.DATE,p.DN.DATE_TIME];Pr(Vo,ht);var ci=[p.DN.TIME];Pr(ci,ba);var ui=[p.DN.USER_PICKER];Pr(ui,zr);var Jr=[p.DN.DEPARTMENT];Pr(Jr,wr);var zo=[p.DN.ORG_ROLE];Pr(zo,Do);var ei=[p.DN.AREA_PROVINCE,p.DN.AREA_CITY,p.DN.AREA_COUNTY];Pr(ei,Xo),Pr([-1e4],bo);function ii(Sn){var Hn=jo({type:Sn.dataType});return S().includes([p.DN.TEXT,p.DN.TELEPHONE,p.DN.MOBILE_PHONE,p.DN.EMAIL,p.DN.CRED,p.DN.CONCATENATE,p.DN.AUTO_ID,p.DN.RELATE_SHEET,p.DN.CASCADER,p.DN.FLAT_MENU,p.DN.MULTI_SELECT,p.DN.DROP_DOWN,p.DN.USER_PICKER,p.DN.DEPARTMENT,p.DN.ORG_ROLE,p.DN.AREA_PROVINCE,p.DN.AREA_CITY,p.DN.AREA_COUNTY],Hn)?Sn.values&&Sn.values.filter(S().identity).length:S().includes([p.DN.NUMBER,p.DN.MONEY,p.DN.FORMULA_NUMBER],Hn)?Sn.filterType===L.W5.BETWEEN?te.Z.isNumberStr(Sn.minValue)||te.Z.isNumberStr(Sn.maxValue):te.Z.isNumberStr(Sn.value):S().includes([p.DN.SWITCH],Hn)?S().includes([L.W5.NE,L.W5.EQ],Sn.filterType):S().includes([p.DN.DATE,p.DN.DATE_TIME,p.DN.TIME],Hn)?Sn.dateRange===18&&Sn.filterType===L.W5.DATE_BETWEEN?!S().isUndefined(Sn.minValue)&&!S().isUndefined(Sn.maxValue):Sn.dateRange===18?!S().isUndefined(Sn.value):!!Sn.dateRange:!1}function Mo(Sn){var Hn=Sn.advancedSetting,Un=Hn===void 0?{}:Hn,Nn=Un.allowitem,Tn=String(Nn)==="2",Pn=jo(Sn.control),jn=Jo[Pn];return jn?g.createElement(jn,(0,ce.default)({},Sn,{isMultiple:Tn,value:S().isUndefined(Sn.value)?"":Sn.value})):g.createElement("span",null)}Mo.propTypes={control:(0,Z.shape)({})}},27850:(lt,Te,t)=>{"use strict";t.d(Te,{M:()=>te,W:()=>L});var ce=t(96486),g=t.n(ce);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(86674);function L(R){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];switch(R){case p.DN.USER_PICKER:return y.map(function(a){return safeParse(a)}).map(function(a){return{accountId:a.id,fullname:a.name,avatar:a.avatar}});case p.DN.ORG_ROLE:return y.map(function(a){return safeParse(a)}).map(function(a){return{organizeId:a.id,organizeName:a.name}});case p.DN.DEPARTMENT:return y.map(function(a){return safeParse(a)}).map(function(a){return{departmentId:a.id,departmentName:a.name}});case p.DN.AREA_PROVINCE:case p.DN.AREA_CITY:case p.DN.AREA_COUNTY:return y.map(function(a){return safeParse(a)}).map(function(a){return{id:a.id,name:a.name}});case p.DN.RELATE_SHEET:case p.DN.CASCADER:return y.map(function(a){return safeParse(a)}).map(function(a){return{rowid:a.id,name:a.name}});default:return y}}function te(R){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];switch(y=y.filter(g().identity),R){case p.DN.USER_PICKER:return y.map(function(a){return a.accountId});case p.DN.ORG_ROLE:return y.map(function(a){return a.organizeId});case p.DN.DEPARTMENT:return y.map(function(a){return a.departmentId});case p.DN.AREA_PROVINCE:case p.DN.AREA_CITY:case p.DN.AREA_COUNTY:return y.map(function(a){return a.id});case p.DN.RELATE_SHEET:case p.DN.CASCADER:return y.map(function(a){return a.rowid});default:return y.filter(g().isString)}}},20782:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>p});var ce=t(67294),g=ce.createContext();const p=g},37050:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>i});var ce=t(8177),g=t.n(ce),p=t(88106),L=t(85105),te=t.n(L),R=t(99663),y=t(22600),a=t(49135),r=t(93196),o=t(42723),d=t(31546),Z=t(88239),H=t(70264),U=t(66946),f=t(33867),V=t(86735),C=t(67294),O=t(45697),n=t.n(O),s=t(44894),j=t(7145),A=t.n(j),S=t(71893),I=t(93967),c=t.n(I),q=t(15742),b=t(89499),k=t(62232),ee=t(96486),re=t.n(ee),ie=t(95742),le,E,w,K,N,F,h=(0,V.Z)([`
  .operateBtn {
    cursor: pointer;
    font-size: 20px;
    color: #9e9e9e;
    margin: 0 4px;
    line-height: 36px;

    &:hover {
      color: #2196f3;
    }

    &.disabled {
      color: #ddd !important;
    }
  }
  .tipsIcon {
    left: -38px;
    line-height: 36px;
  }
  .ming.Dropdown,
  .dropdownTrigger {
    overflow: hidden;
  }
`],[`
  .operateBtn {
    cursor: pointer;
    font-size: 20px;
    color: #9e9e9e;
    margin: 0 4px;
    line-height: 36px;

    &:hover {
      color: #2196f3;
    }

    &.disabled {
      color: #ddd !important;
    }
  }
  .tipsIcon {
    left: -38px;
    line-height: 36px;
  }
  .ming.Dropdown,
  .dropdownTrigger {
    overflow: hidden;
  }
`]);function z(m,v,W,P,u){var l={};return Object.keys(P).forEach(function(T){l[T]=P[T]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=W.slice().reverse().reduce(function(T,G){return G(m,v,T)||T},l),u&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(u):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(m,v,l),l=null),l}var X=S.ZP.div(h),B=(0,ie.W6)(function(){return C.createElement(f.Z,{className:"mRight5 Font14 Hand",icon:"drag"})}),x=(0,ie.W8)(function(m){var v=m.sortConditions,W=v===void 0?[]:v,P=m.columns,u=m.condition,l=u===void 0?{}:u,T=m.info,G=T===void 0?{}:T,D=G.index,M=!(D===0&&W.length===1),se=W.length<(P.length<5?P.length:5),ae=re().find(P,function(de){return de.controlId===l.controlId}),ne=ae?ae.type===30?ae.sourceControlType:ae.type:"";return C.createElement("div",{className:"flexRow alignItemsCenter mBottom10"},C.createElement(B,null),C.createElement("div",{className:"flexRow flex",style:{position:"relative"},key:l.controlId},[9,10,11].includes(ne)&&C.createElement(H.Z,{popupPlacement:"bottom",text:C.createElement("span",null,_l("\u6309\u7167\u8BB0\u5F55\u5F53\u65F6\u5B58\u50A8\u7684\u9009\u9879\u5E8F\u53F7\u8FDB\u884C\u6392\u5E8F\u3002\u5F53\u6BCF\u6B21\u4FEE\u6539\u4E86\u9009\u9879\u987A\u5E8F\u540E\uFF0C\u9700\u8981\u91CD\u65B0\u5237\u65B0\u5386\u53F2\u6570\u636E\u7684\u9009\u9879\u5E8F\u53F7\u4EE5\u6821\u51C6\u6392\u5E8F\u3002"),C.createElement(U.Z,{className:"InlineBlock",type:3,href:"https://help.mingdao.com/worksheet/batch-refresh",text:_l("\u70B9\u51FB\u4E86\u89E3\u66F4\u591A")}))},C.createElement("i",{className:"icon-info1 tipsIcon Font16 Absolute Gray_9e"})),C.createElement(d.Z,(0,Z.default)({border:!0,openSearch:!0,isAppendToBody:!0,menuStyle:{width:200},className:"flex mRight10 filterColumns",value:l.controlId,data:m.getCanSelectColumns(l.controlId),searchNull:function(){return C.createElement("div",{className:"TxtCenter"},_l("\u6682\u65E0\u641C\u7D22\u7ED3\u679C"))},onChange:function(Ce){Ce!==l.controlId&&m.handleChangeSortControl(D,Ce)}},(0,k.fi)(ae)?{renderError:function(){return C.createElement("span",{className:"Red"},_l("%0(\u65E0\u6548\u7C7B\u578B)",ae.controlName))}}:ae?{}:{renderError:function(){return C.createElement("span",{className:"Red"},_l("\u5B57\u6BB5\u5DF2\u5220\u9664"))}})),C.createElement(d.Z,{border:!0,isAppendToBody:!0,className:"flex mRight6",value:l.isAsc?2:1,data:m.getSortTypes(l.controlId),onChange:function(Ce){Ce!==(l.isAsc?2:1)&&m.handleChangeSortType(D,Ce)}}),C.createElement(f.Z,{className:c()("operateBtn",{disabled:!M}),icon:"remove_circle_outline",disabled:!M,onClick:function(){M&&m.handleDeleteCondition(l.controlId)}}),C.createElement(f.Z,{className:c()("operateBtn",{disabled:!se}),icon:"control_point",onClick:function(){se&&m.handleAddCondition(D)}})))}),Q=(0,ie.JN)(function(m){var v=m.sortConditions,W=(0,o.Z)(m,["sortConditions"]);return C.createElement("div",{className:"mTop24"},re().map(v,function(P,u){return C.createElement(x,(0,Z.default)({index:u,sortConditions:v,condition:P},W,{key:"item_"+u,info:{index:u}}))}))}),i=(w=(N=K=function(m){(0,r.default)(v,m);function v(W){(0,R.default)(this,v);var P=(0,a.default)(this,(v.__proto__||te()(v)).call(this,W));return F.call(P),P.state=P.getNewState(W),P}return(0,y.default)(v,[{key:"componentWillReceiveProps",value:function(P){(!re().isEqual(this.props.sortConditions,P.sortConditions)||!re().isEqual(this.props.columns,P.columns))&&this.setState(this.getNewState(P))}},{key:"handleChangeSortControl",value:function(P,u){var l=this.state.sortConditions,T=A()(l,(0,p.default)({},P,{$set:{controlId:u,isAsc:this.getSortTypes(u)[0].value===2}}));this.handleChange(T)}},{key:"handleChangeSortType",value:function(P,u){var l=this.state.sortConditions,T=A()(l,(0,p.default)({},P,{$merge:{isAsc:u===2}}));this.handleChange(T)}},{key:"handleAddCondition",value:function(P){var u=this.getCanSelectColumns()[0];if(u){var l=this.state.sortConditions,T=A()(l,{$splice:[[P+1,0,{controlId:u.value,isAsc:this.getSortTypes(u.value)[0].value===2}]]});this.handleChange(T)}}},{key:"handleDeleteCondition",value:function(P){var u=this.state.sortConditions,l=u.filter(function(T){return T.controlId!==P});this.handleChange(l)}},{key:"render",value:function(){var P=this.props.className;return C.createElement(X,{className:c()(P,"sortConditions")},this.renderCondtions())}}]),v}(C.Component),K.propTypes={showSystemControls:n().bool,sortConditions:n().arrayOf(n().shape({})),columns:n().arrayOf(n().shape({})),onChange:n().func},K.defaultProps={columns:[],onChange:function(){}},F=function(){var v=this;this.getNewState=function(W){W=W||v.props;var P=W,u=P.showSystemControls,l=P.sortConditions,T=P.isSubList,G=W,D=G.columns;return u&&(D=D.filter(function(M){return!re().find(q.nh,function(se){return se.controlId===M.controlId})}).concat(q.nh)),{columns:D,sortConditions:l&&l.length?l:[{controlId:"ctime",isAsc:!!T}]}},this.handleChange=function(W){var P=v.props.onChange;P(W)},this.getCanSelectColumns=function(W){var P=v.state,u=P.columns,l=P.sortConditions,T=re().find(u,function(se){return se.controlId===W}),G=l.map(function(se){return re().find(u,function(ae){return ae.controlId===se.controlId})}).filter(re().identity),D=[26,27,29,48,35,14,9,10,11],M=!!G.find(function(se){return D.includes(se.type)||D.includes(se.sourceControlType)});return(0,k.UX)(u).filter(function(se){return![42,47,49,51,52].includes(se.type)}).filter(function(se){return(!re().find(l,function(ae){return ae.controlId===se.controlId})||se.controlId===W)&&(!(M&&re().find(D,function(ae){return[se.type,se.sourceControlType].includes(ae)}))||T&&re().find(D,function(ae){return[T.type,T.sourceControlType].includes(ae)}))}).map(function(se){return{text:se.controlName,value:se.controlId,itemContentStyle:{padding:"0 30px"},iconName:(0,k.hB)(se.type)}})},this.getSortTypes=function(W){var P=v.state.columns,u=re().find(P,function(l){return l.controlId===W})||{};return(0,b.Zv)(u.type,u)},this.handleSortEnd=function(W){var P=W.oldIndex,u=W.newIndex;if(P!==u){var l=(0,ie.Rp)(v.state.sortConditions,P,u);v.handleChange(l)}},this.renderCondtions=function(){var W=v.state,P=W.columns,u=W.sortConditions;return C.createElement(Q,{sortConditions:u,columns:P,useDragHandle:!0,onSortEnd:v.handleSortEnd,helperClass:c()("sortConditionsViewControl",v.props.helperClass),handleChangeSortControl:v.handleChangeSortControl,handleChangeSortType:v.handleChangeSortType,handleDeleteCondition:v.handleDeleteCondition,handleAddCondition:v.handleAddCondition,getSortTypes:v.getSortTypes,getCanSelectColumns:v.getCanSelectColumns})}},N),z(w.prototype,"handleChangeSortControl",[s.Nj],g()(w.prototype,"handleChangeSortControl"),w.prototype),z(w.prototype,"handleChangeSortType",[s.Nj],g()(w.prototype,"handleChangeSortType"),w.prototype),z(w.prototype,"handleAddCondition",[s.Nj],g()(w.prototype,"handleAddCondition"),w.prototype),z(w.prototype,"handleDeleteCondition",[s.Nj],g()(w.prototype,"handleDeleteCondition"),w.prototype),w)},89626:(lt,Te,t)=>{"use strict";t.d(Te,{D0:()=>U,D9:()=>o,FO:()=>n,P5:()=>d,PE:()=>s,S5:()=>C,Y4:()=>j,YX:()=>O,ob:()=>Z,uS:()=>V,zy:()=>f});var ce=t(86735),g=t(63239),p=t.n(g),L=t(88239),te=t(71893),R=t(7145),y=t.n(R);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(77632);var r=(0,ce.Z)([`
  .withSwitchConfig {
    display: flex;
    justify-content: space-between;
    .configSwitch {
      display: flex;
      align-items: center;
      .icon {
        vertical-align: middle;
        &-ic_toggle_on {
          color: #00c345;
        }
        &-ic_toggle_off {
          color: #bdbdbd;
        }
      }
      .switchText {
        margin-right: 6px;
        line-height: 24px;
      }
    }
  }
  .title {
    font-weight: bold;
    // margin-top: 12px;
    &:first-child {
      margin: 0;
    }
  }
  .subTitle {
    color: #515151;
    &.withDisplayControl {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
  }
  .settingContent {
    margin-top: 10px;
  }
  .Dropdown {
    background-color: #fff;
    &.disabled {
      background-color: #f5f5f5;
    }
  }
`],[`
  .withSwitchConfig {
    display: flex;
    justify-content: space-between;
    .configSwitch {
      display: flex;
      align-items: center;
      .icon {
        vertical-align: middle;
        &-ic_toggle_on {
          color: #00c345;
        }
        &-ic_toggle_off {
          color: #bdbdbd;
        }
      }
      .switchText {
        margin-right: 6px;
        line-height: 24px;
      }
    }
  }
  .title {
    font-weight: bold;
    // margin-top: 12px;
    &:first-child {
      margin: 0;
    }
  }
  .subTitle {
    color: #515151;
    &.withDisplayControl {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
  }
  .settingContent {
    margin-top: 10px;
  }
  .Dropdown {
    background-color: #fff;
    &.disabled {
      background-color: #f5f5f5;
    }
  }
`]),o=[{value:0,text:_l("\u586B\u6EE1")},{value:1,text:_l("\u5B8C\u6574\u663E\u793A")},{value:2,text:_l("\u5706\u5F62")},{value:3,text:_l("\u77E9\u5F62")}],d=[{value:"2",text:_l("\u4E0A")},{value:"1",text:_l("\u5DE6")},{value:"0",text:_l("\u53F3")}],Z=function(S,I){var c=I.navfilters,q=S.advancedSetting,b=q===void 0?{}:q,k=b.navshow;return c||!["2","3"].includes(k)?H(S,I):U(S,I)},H=function(S,I){var c=S.advancedSetting,q=c===void 0?{}:c;return y()(q,{$apply:function(k){return(0,L.default)({},k,I)}})},U=function(S){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=I.navfilters,q=S.advancedSetting,b=q===void 0?{}:q,k=b.navshow;return c||!["2","3"].includes(k)?H(S,I):H(S,(0,L.default)({},I,{navfilters:k==="3"?p()(safeParse(_.get(b,"navfilters")).map(a.gC)):p()(safeParse(_.get(b,"navfilters")).map(function(ee){var re=ee,ie=null;try{ie=JSON.parse(ee),re=ie.id||ie}catch(le){re=ee}return re+""}))}))},f=function(S){return _.get(S,"advancedSetting.navfilters")?(0,L.default)({},S,{advancedSetting:U(S)}):S},V=/^(1887|7596|7798)$/.test(t.j)?null:[14,19,21,22,23,24,25,34,35,40,41,43,45,10010],C=te.ZP.div(r),O=/^(1887|7596|7798)$/.test(t.j)?null:["rowid","caid","ownerid","uaid","ctime","utime"],n=/^(1887|7596|7798)$/.test(t.j)?null:["wfname","wfstatus","wfcuaids","wfrtime","wfftime","wfdtime","wfcaid","wfctime","wfcotime"],s=function(S){return S.filter(function(I){return I.attribute!==1&&!!I.controlName&&!_.includes([22,10010,43,45,47,49,51,52],I.type)})},j=function(S,I){return S.includes(I.type)||S.includes(I.sourceControlType)&&I.type===30}},39612:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>S});var ce=t(88239),g=t(12424),p=t(88902),L=t.n(p),te=t(86735),R=t(67294),y=t(45697),a=t.n(y),r=t(71893),o=t(15742),d=t(62232),Z=t(86674),H=t(31742),U=t(76345),f=t(67776),V=t(26358),C=t(74780),O=t(44253),n=t(96486),s=t.n(n),j=(0,te.Z)([""],[""]),A=r.ZP.div(j);function S(I){var c=I.from,q=I.version,b=I.supportGroup,k=I.offset,ee=I.appId,re=I.viewId,ie=I.projectId,le=I.isRules,E=I.feOnly,w=I.sheetSwitchPermit,K=I.showSystemControls,N=I.filterColumnClassName,F=I.canEdit,h=I.conditions,z=I.onConditionsChange,X=I.currentColumns,B=I.relateSheetList,x=I.sourceControlId,Q=I.globalSheetControls,i=I.filterDept,m=I.filterResigned,v=m===void 0?!0:m,W=I.filterError,P=I.urlParams,u=I.showCustom,l=I.columns,T=s().flatten(L()(O.Cz).map(function(Ee){return O.Cz[Ee].keys}));l=l.filter(function(Ee){return(Ee.controlPermissions||"111")[0]==="1"}).map(V.BM).filter(function(Ee){return s().includes(T,Ee.type)}).filter(function(Ee){return!(Ee.type===38&&Ee.enumDefault===3)}),K&&(l=l.filter(function(Ee){return!s().find(o.nh,function(Y){return Y.controlId===Ee.controlId})}).concat(o.nh)),l=l.sort(function(Ee,Y){return Ee.row*10+Ee.col>Y.row*10+Y.col?1:-1});var G=(0,R.useReducer)(f.Lq,(0,ce.default)({},f.E3,{editingFilter:(0,V.ow)({items:h})})),D=(0,g.Z)(G,2),M=D[0],se=M===void 0?{}:M,ae=D[1],ne=se.editingFilter,de=(0,f.dA)(ae,se),Ce={appId:ee,projectId:ie},he=(0,H.v)(U.RX.sysControlSwitch,w,re);function fe(Ee){return(0,d.UX)(he?Ee:Ee.filter(function(Y){return!s().find(Z._Q,{controlId:Y.controlId})}))}return(0,R.useEffect)(function(){if(/^(ADD_|UPDATE_|DELETE_)/.test(se.lastAction)){var Ee=(0,f.xx)(se.editingFilter,{returnFullValues:E,noCheck:!0});Ee&&z(Ee.filter(s().identity))}},[se.lastAction]),(0,R.useEffect)(function(){q&&de.editFilter((0,V.ow)({items:h}))},[q]),R.createElement(A,null,R.createElement(C.Z,{supportGroup:b,canEdit:F,isSingleFilter:!0,from:c,base:Ce,isRules:le,filter:ne,actions:de,controls:l,filterResigned:v,filterError:W,filterAddConditionControls:fe,showCustom:u,conditionProps:{filterDept:i,sourceControlId:x,currentColumns:X,relateSheetList:B,globalSheetControls:Q,urlParams:P}}))}S.propTypes={appId:y.string,canEdit:y.string,columns:(0,y.arrayOf)((0,y.shape)({})),conditions:(0,y.arrayOf)((0,y.shape)({})),feOnly:y.bool,filterColumnClassName:y.string,from:y.number,isRules:y.bool,offset:y.number,onConditionsChange:y.func,projectId:y.string,showSystemControls:y.bool,supportGroup:y.bool,currentColumns:(0,y.arrayOf)((0,y.shape)({})),relateSheetList:(0,y.arrayOf)((0,y.shape)({})),sourceControlId:y.string,globalSheetControls:(0,y.arrayOf)((0,y.shape)({})),filterDept:y.bool}},52877:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>n});var ce=t(85105),g=t.n(ce),p=t(99663),L=t(22600),te=t(49135),R=t(93196),y=t(67294),a=t(29314),r=t(45697),o=t.n(r),d=t(93967),Z=t.n(d),H=t(96486),U=t.n(H),f=t(86674),V=t(55266),C,O,n=(O=C=function(s){(0,R.default)(j,s);function j(A){(0,p.default)(this,j);var S=(0,te.default)(this,(j.__proto__||g()(j)).call(this,A));return S.inputRef=y.createRef(),S.state={columnListVisible:U().isUndefined(A.defaultVisible)?!1:A.defaultVisible},S}return(0,L.default)(j,[{key:"componentDidMount",value:function(){var S=this;setTimeout(function(){S.inputRef.current&&S.inputRef.current.focus()},300)}},{key:"componentWillReceiveProps",value:function(S){S.from==="fastFilter"&&S.defaultVisible!==this.state.columnListVisible&&!U().isUndefined(S.defaultVisible)&&this.setState({columnListVisible:S.defaultVisible})}},{key:"render",value:function(){var S=this,I=this.props,c=I.disabled,q=I.from,b=I.columns,k=b===void 0?[]:b,ee=I.isAppendToBody,re=I.onAdd,ie=I.children,le=I.renderInParent,E=I.conditionCount,w=I.filterColumnClassName,K=I.popupContainer,N=this.state.columnListVisible;return q==="rule"&&(k=k.filter(function(F){return!U().includes(f.x0,F.controlId)})),md.global.Account.isPortal&&(k=k.filter(function(F){return!U().includes(["ownerid","caid","uaid"],F.controlId)})),y.createElement("div",{className:Z()("Hand addFilterCondition",{nodata:!E,active:N})},y.createElement(a.Z,{action:["click"],popupVisible:N,popup:y.createElement(V.Z,{style:this.props.style,controls:k,className:this.props.classNamePopup,filterColumnClassName:w,onAdd:function(h){re(h),q!=="fastFilter"&&S.setState({columnListVisible:!1})},onClose:function(){S.setState({columnListVisible:!1})}}),getPopupContainer:function(){return le&&!ee?S.box:document.body},popupAlign:this.props.popupAlign||{points:["tl","bl"],offset:this.props.offset?this.props.offset:[0,12],overflow:{adjustX:!0,adjustY:!0}}},y.createElement("div",{ref:function(h){return S.box=h},onClick:function(){c||S.setState({columnListVisible:!0},function(){S.inputRef.current&&S.inputRef.current.focus()})}},ie||(this.props.comp?this.props.comp():y.createElement(y.Fragment,null,y.createElement("i",{className:"icon icon-add"}),_l("\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6"))))))}}]),j}(y.Component),C.propTypes={defaultVisible:o().bool,columns:o().arrayOf(o().shape({})),onAdd:o().func,from:o().string},O)},74780:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>St});var ce=t(70264),g=t(51197),p=t(88106),L=t(69288),te=t(88239),R=t(12424),y=t(70450),a=t(86735),r=t(67294),o=t(45697),d=t.n(o),Z=t(71893),H=t(42541),U=t(93967),f=t.n(U),V=t(15577),C=t(77863),O=t(62521),n=t(16469),s=t(29314),j=t(96486),A=t.n(j),S=(0,a.Z)([`
  display: flex;
  flex-direction: row;
  height: 32px;
  background: #ffffff;
  border-radius: 16px;
  border: 1px solid #e6e6e6;
  color: #757575;
  font-weight: bold;
  font-size: 13px;
  user-select: none;
  .content {
    flex: 1;
    line-height: 30px;
    padding: 0 16px;
  }
  &:not(.disabled) {
    .content {
      cursor: pointer;
    }
    &:hover {
      color: #2196f3;
      border-color: #2196f3;
    }
  }
  &.disabled {
    .content {
      cursor: not-allowed;
      color: #ccc;
    }
  }
  &.hasDownList {
    .content {
      padding-right: 8px;
    }
  }
`],[`
  display: flex;
  flex-direction: row;
  height: 32px;
  background: #ffffff;
  border-radius: 16px;
  border: 1px solid #e6e6e6;
  color: #757575;
  font-weight: bold;
  font-size: 13px;
  user-select: none;
  .content {
    flex: 1;
    line-height: 30px;
    padding: 0 16px;
  }
  &:not(.disabled) {
    .content {
      cursor: pointer;
    }
    &:hover {
      color: #2196f3;
      border-color: #2196f3;
    }
  }
  &.disabled {
    .content {
      cursor: not-allowed;
      color: #ccc;
    }
  }
  &.hasDownList {
    .content {
      padding-right: 8px;
    }
  }
`]),I=(0,a.Z)([`
  position: relative;
  display: inline-block;
  padding: 0 12px 0 8px;
  cursor: pointer;
  text-align: center;
  line-height: 30px;
  .icon {
    font-size: 12px;
    color: #757575;
  }
  &::before {
    content: '';
    height: 13px;
    position: absolute;
    left: 0px;
    top: 8.5px;
    border-left: 1px solid #ededed;
  }
  &:hover {
    .icon {
      color: #2196f3;
    }
  }
`],[`
  position: relative;
  display: inline-block;
  padding: 0 12px 0 8px;
  cursor: pointer;
  text-align: center;
  line-height: 30px;
  .icon {
    font-size: 12px;
    color: #757575;
  }
  &::before {
    content: '';
    height: 13px;
    position: absolute;
    left: 0px;
    top: 8.5px;
    border-left: 1px solid #ededed;
  }
  &:hover {
    .icon {
      color: #2196f3;
    }
  }
`]),c=Z.ZP.div(S),q=Z.ZP.div(I);function b(Qe){var Xe=Qe.disabled,$e=Qe.downList,Ke=Qe.onClick,Ue=(0,r.useState)(),He=(0,R.Z)(Ue,2),ze=He[0],gt=He[1],Et=A().isArray($e)&&!A().isEmpty($e),ft=r.createElement(c,{className:f()({hasDownList:Et,disabled:Xe})},r.createElement("div",{className:"content",onClick:!Xe&&Ke},_l("\u4FDD\u5B58")),Et&&r.createElement(q,{onClick:function(){return gt(!0)}},r.createElement("i",{className:"icon icon-arrow-down"})));return Et?r.createElement(s.Z,{action:["click"],popupVisible:ze,popupAlign:{points:["tr","br"],offset:[0,4],overflow:{adjustX:!0,adjustY:!0}},popup:r.createElement(O.Z,{className:"Relative",style:{width:"auto"}},$e.map(function(qe,nt){return r.createElement(n.Z,{key:nt,disabled:qe.disabled,onClick:function(){qe.disabled||(qe.onClick(),gt(!1))}},qe.name)})),onPopupVisibleChange:function(nt){nt||gt(!1)}},ft):ft}var k=t(31038),ee=t(31546),re=t(44253),ie=(0,a.Z)([`
  position: relative;
  padding: 12px 0;
  margin: 12px 0;
  hr {
    margin: 0 28px;
    border: none;
    border-top: 2px solid #eaeaea;
  }
  .text {
    position: absolute;
    top: 3px;
    left: calc(50% - 27px);
    padding: 0 12px;
    background: #fff;
  }
  .removeGroup {
    display: none;
    width: 24px;
    height: 24px;
    position: absolute;
    right: 0;
    top: 0px;
    right: 24px;
    background: #fff;
    font-size: 16px;
    color: #9e9e9e;
    cursor: pointer;
  }
  &:hover {
    .removeGroup {
      display: flex;
    }
  }
`],[`
  position: relative;
  padding: 12px 0;
  margin: 12px 0;
  hr {
    margin: 0 28px;
    border: none;
    border-top: 2px solid #eaeaea;
  }
  .text {
    position: absolute;
    top: 3px;
    left: calc(50% - 27px);
    padding: 0 12px;
    background: #fff;
  }
  .removeGroup {
    display: none;
    width: 24px;
    height: 24px;
    position: absolute;
    right: 0;
    top: 0px;
    right: 24px;
    background: #fff;
    font-size: 16px;
    color: #9e9e9e;
    cursor: pointer;
  }
  &:hover {
    .removeGroup {
      display: flex;
    }
  }
`]),le=(0,a.Z)([`
  display: inline-block;
  padding: 0 6px;
  position: absolute;
  left: calc(50% - 27px);
  top: 0;
  background: #fff;
  .Dropdown--input {
    padding: 2px 6px !important;
    border-radius: 4px;
    .icon {
      margin-left: 4px !important;
      vertical-align: middle;
    }
    &:hover {
      background: #f2f2f2;
    }
  }
`],[`
  display: inline-block;
  padding: 0 6px;
  position: absolute;
  left: calc(50% - 27px);
  top: 0;
  background: #fff;
  .Dropdown--input {
    padding: 2px 6px !important;
    border-radius: 4px;
    .icon {
      margin-left: 4px !important;
      vertical-align: middle;
    }
    &:hover {
      background: #f2f2f2;
    }
  }
`]),E=Z.ZP.div(ie),w=Z.ZP.div(le);function K(Qe){var Xe=Qe.canEdit,$e=Qe.type,Ke=$e===void 0?re.Op.AND:$e,Ue=Qe.onChange,He=Qe.onDelete;return r.createElement(E,null,r.createElement("hr",null),r.createElement(r.Fragment,null,Xe?r.createElement(w,null,r.createElement(ee.Z,{dropIcon:"task_custom_btn_unfold",defaultValue:Ke,isAppendToBody:!0,menuStyle:{width:"auto"},data:[{text:_l("\u4E14%25000"),value:re.Op.AND},{text:_l("\u6216"),value:re.Op.OR}],onChange:function(gt){Ue(gt)}})):r.createElement("span",{className:"text"},["",_l("\u4E14%25000"),_l("\u6216")][Ke]),r.createElement(H.Lb,{className:"removeGroup ThemeHoverColor3",onClick:He},r.createElement("i",{className:"icon icon-close"}))))}var N=t(52877),F=t(26358),h=t(62232),z=t(8177),X=t.n(z),B=t(3540),x=t(34279),Q=t(64749),i=t(33867),m=t(97373),v=t(94055),W=t(85315),P=t(85105),u=t.n(P),l=t(99663),T=t(22600),G=t(49135),D=t(93196),M=t(44894),se=t(59957),ae=t(5420),ne=t(87600),de,Ce,he,fe,Ee,Y=(0,a.Z)([`
  flex: 1;
  max-width: calc(100% - 132px) !important;
  margin-bottom: 5px;

  .Dropdown--input {
    min-height: 36px;
    height: auto !important;
  }

  .titleDisplay {
    line-height: 22px;
    padding: 0 12px;
    border-radius: 16px;
    color: #174c76;
    background: #d8eeff;
    border: 1px solid #bbd6ea;
    font-size: 12px;
    white-space: normal;
  }
  &.isDelete {
    color: #f44336;
    background: rgba(244, 67, 54, 0.06);
    .Dropdown--input {
      border-color: #f44336 !important;
    }
  }
`],[`
  flex: 1;
  max-width: calc(100% - 132px) !important;
  margin-bottom: 5px;

  .Dropdown--input {
    min-height: 36px;
    height: auto !important;
  }

  .titleDisplay {
    line-height: 22px;
    padding: 0 12px;
    border-radius: 16px;
    color: #174c76;
    background: #d8eeff;
    border: 1px solid #bbd6ea;
    font-size: 12px;
    white-space: normal;
  }
  &.isDelete {
    color: #f44336;
    background: rgba(244, 67, 54, 0.06);
    .Dropdown--input {
      border-color: #f44336 !important;
    }
  }
`]);function oe(Qe,Xe,$e,Ke,Ue){var He={};return Object.keys(Ke).forEach(function(ze){He[ze]=Ke[ze]}),He.enumerable=!!He.enumerable,He.configurable=!!He.configurable,("value"in He||He.initializer)&&(He.writable=!0),He=$e.slice().reverse().reduce(function(ze,gt){return gt(Qe,Xe,ze)||ze},He),Ue&&He.initializer!==void 0&&(He.value=He.initializer?He.initializer.call(Ue):void 0,He.initializer=void 0),He.initializer===void 0&&(Object.defineProperty(Qe,Xe,He),He=null),He}var ve=[re.W5.ISNULL,re.W5.HASVALUE,re.W5.BETWEEN,re.W5.NBETWEEN,re.W5.NORMALUSER,re.W5.PORTALUSER,re.W5.DATE_BETWEEN,re.W5.DATE_NBETWEEN],ue=[re.v8.ATTACHMENT,re.v8.SWITCH,re.v8.AREA_INPUT_24,re.v8.AREA_INPUT_19,re.v8.AREA_INPUT_23,re.v8.LOCATION],pe=(0,Z.ZP)(ee.Z)(Y),Se=(he=(Ee=fe=function(Qe){(0,D.default)(Xe,Qe);function Xe($e){(0,l.default)(this,Xe);var Ke=(0,G.default)(this,(Xe.__proto__||u()(Xe)).call(this,$e));return Ke.setIsDynamicsourceFn=function(){var Ue=Ke.props,He=Ue.condition,ze=He===void 0?[]:He,gt=Ue.from,Et=ze.dynamicSource,ft=ze.isDynamicsource;return Et&&Et.length>0?ft===void 0&&(ft=!0):ft===void 0&&(ft=!!(A().includes(["relateSheet","fastFilter"],gt)&&A().isUndefined(Et)&&Ke.getIsDynamicValue())),ft},Ke.isCanDynamicsource=function(Ue){var He=Ue.condition,ze=He===void 0?[]:He,gt=Ue.from,Et=gt===void 0?"":gt,ft=ze.type,qe=ft===void 0?"":ft,nt=ze.controlType,Ze=nt===void 0?"":nt;return A().includes(["rule","relateSheet","fastFilter"],Et)&&!(!A().includes([27],ze.controlType)&&A().includes(ve,qe))&&!A().includes(ue,Ze)},Ke.getIsDynamicValue=function(){var Ue=Ke.props,He=Ue.condition,ze=Ue.control;return!(!A().includes([27],He.controlType)&&A().includes(ve,He.type))&&!A().includes(ue,He.controlType)&&!(0,ne.CZ)(ze)},Ke.state={isDynamicsource:Ke.isCanDynamicsource($e)&&Ke.setIsDynamicsourceFn(),valueType:Ke.isCanDynamicsource($e)&&Ke.setIsDynamicsourceFn()?0:(($e.condition||{}).dynamicSource||[]).length?2:1},Ke}return(0,T.default)(Xe,[{key:"componentDidMount",value:function(){this.state={isDynamicsource:this.isCanDynamicsource(this.props)&&this.setIsDynamicsourceFn(),valueType:this.isCanDynamicsource(this.props)&&this.setIsDynamicsourceFn()?0:((this.props.condition||{}).dynamicSource||[]).length?2:1}}},{key:"changeConditionType",value:function(Ke){var Ue=this.props,He=Ue.condition,ze=Ue.onChange,gt=(0,F.Nt)(Ke,He,this.state.valueType);ze(gt),A().includes(ve,Ke)&&!A().includes([27],He.controlType)&&this.setState({isDynamicsource:!1})}},{key:"renderControl",value:function(){var Ke=this,Ue=this.props,He=Ue.conditionError,ze=Ue.conditionGroupType,gt=Ue.condition,Et=Ue.canEdit,ft=Ue.onChange,qe=Ue.control,nt=Ue.currentColumns,Ze=Ue.columns,et=Ue.relateSheetList,ut=Ue.projectId,xt=Ue.appId,wt=Ue.sourceControlId,kt=wt===void 0?"":wt,Rt=Ue.from,jt=Ue.filterResigned,fn=jt===void 0?!0:jt,Mt=Ue.globalSheetControls,sn=Ue.urlParams,on=sn===void 0?[]:sn,en=Ue.showCustom,$t=gt.dynamicSource,an=$t===void 0?[]:$t,tn=[].concat((0,W.Z)(re.Cz.TEXT.keys),(0,W.Z)(re.Cz.NUMBER.keys),(0,W.Z)(re.Cz.DATE.keys),(0,W.Z)(re.Cz.TIME.keys)).concat([28,36]),mt=(!!on.length||!!an.filter(function(Lt){return Lt.rcid==="url"}).length)&&A().includes(tn,gt.controlType);return r.createElement("div",{className:"flexRow flex"},mt&&r.createElement(ee.Z,{border:!0,isAppendToBody:!0,className:"Width120 mRight12",data:re.hh,value:this.state.valueType,onChange:function(zt){if(Ke.setState({valueType:zt}),zt===1)ft({dynamicSource:[]});else{var Zt=ze===re.Cz.DATE.value?{dateRange:0,dateRangeType:0}:{};ft((0,te.default)({values:[],dynamicSource:[{cid:"",rcid:"url",staticValue:""}]},Zt))}}}),this.state.valueType===1||!mt?r.createElement("div",{className:f()("conditionValue",He)},(0,se.Z)(ze,(0,te.default)({},gt,{dateRange:Rt==="subTotal"?18:gt.dateRange,disabled:!Et,onChange:ft,control:qe,relationColumns:Ze,currentColumns:nt,relateSheetList:et,projectId:ut,appId:xt,sourceControlId:kt,from:Rt,showCustom:en,filterResigned:fn,conditionType:gt.controlType,isDynamicsource:this.state.isDynamicsource,globalSheetControls:Mt}))):r.createElement(pe,{border:!0,isAppendToBody:!0,className:f()({isDelete:!!(an[0]||{}).cid&&!A().includes(on,(an[0]||{}).cid)}),data:on.map(function(Lt){return{text:Lt,value:Lt}}),renderTitle:function(){var zt=(an[0]||{}).cid,Zt=!!zt&&!A().includes(on,zt);return Zt?r.createElement("span",null,_l("\u8BE5\u53C2\u6570\u5DF2\u5220\u9664")):zt?r.createElement("div",{className:"titleDisplay"},zt):r.createElement("span",{className:"Gray_bd"},_l("\u8BF7\u9009\u62E9"))},value:(an[0]||{}).cid||"",onChange:function(zt){var Zt=ze===re.Cz.DATE.value?{dateRange:0}:{};ft((0,te.default)({dynamicSource:[{cid:zt,rcid:"url",staticValue:""}]},Zt))}}))}},{key:"render",value:function(){var Ke=this,Ue=this.props,He=Ue.isRules,ze=Ue.canEdit,gt=Ue.control,Et=Ue.conditionGroupType,ft=Ue.condition,qe=Ue.onChange,nt=Ue.onDelete,Ze=Ue.from,et=Ue.filterDept,ut=Ue.isSheetFieldError,xt=(0,F.Ou)(gt,ft.type,Ze);He&&gt&&(gt.type===29&&gt.enumDefault===2&&(xt=xt.filter(function(Rt){return!A().includes([re.W5.RCEQ,re.W5.RCNE],Rt.value)}),A().find(xt,function(Rt){return Rt.value===ft.type})||this.changeConditionType(xt[0].value)),(gt.type===35||gt.type===27)&&(xt=xt.filter(function(Rt){return!A().includes([re.W5.BETWEEN,re.W5.NBETWEEN],Rt.value)}))),et&&gt&&gt.type===27&&(xt=xt.filter(function(Rt){return!A().includes([re.W5.BETWEEN,re.W5.NBETWEEN],Rt.value)})),Ze==="subTotal"&&gt&&A().includes([19,23,24,27,35],gt.type)&&(xt=xt.filter(function(Rt){return!A().includes([re.W5.BETWEEN,re.W5.NBETWEEN,re.W5.LIKE,re.W5.NCONTAIN],Rt.value)}));var wt=A().includes(["relateSheet","rule","fastFilter"],Ze),kt=this.getIsDynamicValue();return r.createElement("div",{className:f()("conditionItem",{readonly:!ze,conditionItemForDynamicStyle:wt})},r.createElement(H.EK,{className:f()("conditionItemHeader",{isbool:Et===re.Cz.BOOL.value})},gt?r.createElement(r.Fragment,null,r.createElement("i",{className:"controlIcon icon icon-"+(0,h.hB)(gt.originType===37?37:gt.type)}),r.createElement("span",{className:f()("columnName ellipsis",{errorName:ut}),title:gt.controlName},ut?_l("%0(\u65E0\u6548\u6570\u636E)",gt.controlName):gt.controlName),Et!==re.Cz.BOOL.value&&r.createElement("span",{className:"relation"},r.createElement(ee.Z,{dropIcon:"task_custom_btn_unfold",defaultValue:(0,re.fr)(gt).isMultiple&&ft.type===re.W5.EQ_FOR_SINGLE?gt.type===29?re.W5.RCEQ:re.W5.EQ:ft.type||xt[0].value,disabled:!ze,data:xt,isAppendToBody:!0,menuStyle:{width:"auto",minWidth:"100px"},onChange:this.changeConditionType})),r.createElement("span",{className:"deleteBtn ThemeHoverColor3",onClick:function(){nt()}},r.createElement("i",{className:"icon icon-close"}))):r.createElement("div",{className:"deletedColumn mTop6"},r.createElement(v.default,{overlayClassName:"deleteHoverTips",overlayInnerStyle:{padding:"8px 10px"},title:r.createElement("span",null,_l("ID: %0",ft.controlId)),placement:"bottom"},r.createElement("span",{className:"Hand"},_l("\u8BE5\u5B57\u6BB5\u5DF2\u5220\u9664"))),r.createElement("span",{className:"deleteBtn ThemeHoverColor3",onClick:function(){nt()}},r.createElement("i",{className:"icon icon-close"})))),r.createElement("div",{className:"conditionItemContent"},wt&&r.createElement(Q.default,{className:"dynamicSource",disabled:!kt,dropdownClassName:"dynamicSelectDropdown",value:this.state.isDynamicsource?2:1,options:kt?ae.a0:ae.a0.filter(function(Rt){return Rt.value===1}),suffixIcon:r.createElement(i.Z,{icon:"arrow-down-border Font14"}),onChange:function(jt){Ke.setState({isDynamicsource:jt!==1},function(){qe((0,te.default)({isDynamicsource:jt!==1},jt===1?{dynamicSource:[]}:{values:void 0,value:void 0,fullValues:void 0}))})}}),gt?this.renderControl():r.createElement(B.Z,{className:"deletedColumn",disabled:!0})))}}]),Xe}(r.Component),fe.propTypes={isRules:d().bool,projectId:d().string,canEdit:d().bool,index:d().number,conditionGroupType:d().number,relationType:d().number,control:d().shape({}),condition:d().shape({}),onChange:d().func,onDelete:d().func,onUpdateFilter:d().func},Ee),oe(he.prototype,"changeConditionType",[M.Nj],X()(he.prototype,"changeConditionType"),he.prototype),oe(he.prototype,"renderControl",[M.Nj],X()(he.prototype,"renderControl"),he.prototype),he),ye=(0,a.Z)([`
  .conditionItem {
    width: calc(100% - 44px);
    font-size: 13px;
    .errorName {
      color: #f44336;
    }
    .conditionItemHeader {
      position: relative;
      margin-bottom: 2px;
      .deletedColumn {
        color: #f44336;
        margin-bottom: 6px;
        .icon {
          transform: rotate(90deg);
          font-size: 16px;
          margin-right: 3px;
        }
      }
      .controlIcon {
        font-size: 15px;
        color: #9e9e9e;
        margin-right: 6px;
      }
      .columnName {
        display: inline-block;
        font-weight: bold;
        max-width: calc(100% - 200px);
      }
      .relation {
        margin-left: 14px;
        .Dropdown--input {
          padding: 2px 6px !important;
          border-radius: 4px;
          .icon {
            margin-left: 4px !important;
            vertical-align: middle;
          }
          &:hover {
            background: #f2f2f2;
          }
        }
      }
      .deleteBtn {
        cursor: pointer;
        position: absolute;
        right: 0px;
        color: #9e9e9e;
        margin-top: 5px;
        visibility: hidden;
        i {
          font-size: 16px;
        }
      }
      &.isbool {
        line-height: 24px;
      }
    }
    .conditionItemContent {
      position: relative;
      .conditionValue {
        flex: 1;
        input {
          font-size: 13px;
        }
        .numberRange {
          input {
            width: 100%;
          }
        }
      }
      .deletedColumn {
        width: 100%;
        background: #ffebeb !important;
        border-color: #f44336 !important;
      }
    }
    &.readonly {
      .relation {
        &:hover {
          background-color: transparent;
        }
      }
      .conditionRelation {
        .Dropdown--input .icon {
          visibility: hidden;
        }
      }
    }

    &:not(.readonly):hover {
      .conditionItemHeader .deleteBtn {
        visibility: visible;
      }

      .relation .Dropdown--input .icon {
        visibility: visible;
      }
    }
    &:first-child {
      margin-top: 0px;
    }
  }
  &.isSingleFilter {
    .conditionItemHeader,
    .conditionItemContent {
      padding-right: 0px;
    }
  }
`],[`
  .conditionItem {
    width: calc(100% - 44px);
    font-size: 13px;
    .errorName {
      color: #f44336;
    }
    .conditionItemHeader {
      position: relative;
      margin-bottom: 2px;
      .deletedColumn {
        color: #f44336;
        margin-bottom: 6px;
        .icon {
          transform: rotate(90deg);
          font-size: 16px;
          margin-right: 3px;
        }
      }
      .controlIcon {
        font-size: 15px;
        color: #9e9e9e;
        margin-right: 6px;
      }
      .columnName {
        display: inline-block;
        font-weight: bold;
        max-width: calc(100% - 200px);
      }
      .relation {
        margin-left: 14px;
        .Dropdown--input {
          padding: 2px 6px !important;
          border-radius: 4px;
          .icon {
            margin-left: 4px !important;
            vertical-align: middle;
          }
          &:hover {
            background: #f2f2f2;
          }
        }
      }
      .deleteBtn {
        cursor: pointer;
        position: absolute;
        right: 0px;
        color: #9e9e9e;
        margin-top: 5px;
        visibility: hidden;
        i {
          font-size: 16px;
        }
      }
      &.isbool {
        line-height: 24px;
      }
    }
    .conditionItemContent {
      position: relative;
      .conditionValue {
        flex: 1;
        input {
          font-size: 13px;
        }
        .numberRange {
          input {
            width: 100%;
          }
        }
      }
      .deletedColumn {
        width: 100%;
        background: #ffebeb !important;
        border-color: #f44336 !important;
      }
    }
    &.readonly {
      .relation {
        &:hover {
          background-color: transparent;
        }
      }
      .conditionRelation {
        .Dropdown--input .icon {
          visibility: hidden;
        }
      }
    }

    &:not(.readonly):hover {
      .conditionItemHeader .deleteBtn {
        visibility: visible;
      }

      .relation .Dropdown--input .icon {
        visibility: visible;
      }
    }
    &:first-child {
      margin-top: 0px;
    }
  }
  &.isSingleFilter {
    .conditionItemHeader,
    .conditionItemContent {
      padding-right: 0px;
    }
  }
`]),J=(0,a.Z)([`
  display: flex;
  flex-direction: row;
  margin-top: 12px;
  padding: `,`;
`],[`
  display: flex;
  flex-direction: row;
  margin-top: 12px;
  padding: `,`;
`]),me=(0,a.Z)([`
  color: #757575;
  width: 44px;
  .text {
    display: inline-block;
    margin: 2px 0 0 6px;
  }
  .Dropdown .Dropdown--input {
    padding: 2px 6px !important;
    border-radius: 4px;
    .icon {
      margin-left: 4px !important;
      vertical-align: middle;
    }
    &:hover {
      background: #f2f2f2;
    }
  }
`],[`
  color: #757575;
  width: 44px;
  .text {
    display: inline-block;
    margin: 2px 0 0 6px;
  }
  .Dropdown .Dropdown--input {
    padding: 2px 6px !important;
    border-radius: 4px;
    .icon {
      margin-left: 4px !important;
      vertical-align: middle;
    }
    &:hover {
      background: #f2f2f2;
    }
  }
`]),be=(0,a.Z)([`
  cursor: pointer;
  color: #757575;
  font-weight: bold;
`],[`
  cursor: pointer;
  color: #757575;
  font-weight: bold;
`]),xe=Z.ZP.div(ye),Ae=Z.ZP.div(J,function(Qe){var Xe=Qe.isSingleFilter;return Xe?"0px":"0 24px 0 18px"}),Ne=Z.ZP.div(me),Me=(0,Z.ZP)(y.Z)(be);function Fe(Qe){var Xe=Qe.from,$e=Qe.isSingleFilter,Ke=Qe.appId,Ue=Qe.projectId,He=Qe.isGroup,ze=Qe.conditionsGroupsLength,gt=Qe.conditionSpliceType,Et=Qe.conditions,ft=Qe.controls,qe=Qe.canEdit,nt=Qe.conditionProps,Ze=nt===void 0?{}:nt,et=Qe.onAdd,ut=Qe.onChange,xt=Qe.onDelete,wt=Qe.onUpdateGroup,kt=Qe.filterResigned,Rt=kt===void 0?!0:kt,jt=Qe.filterAddConditionControls,fn=jt===void 0?function(){}:jt,Mt=Qe.filterError,sn=Mt===void 0?[]:Mt,on=Qe.isRules,en=Qe.showCustom;return r.createElement(xe,{className:f()({isSingleFilter:$e})},Et.map(function($t,an){var tn,mt=A().find(ft,function(Nt){return $t.controlId===Nt.controlId}),Lt=(0,F.Io)((mt||{}).type),zt=mt?re.Cz[Lt].value:"",Zt=(0,h.fi)(mt);return r.createElement(Ae,{key:$t.id,isSingleFilter:$e},r.createElement(Ne,null,an===0&&r.createElement("span",{className:"text"},_l("\u5F53")),an===1&&r.createElement(ee.Z,{dropIcon:"task_custom_btn_unfold",disabled:!qe,defaultValue:gt,isAppendToBody:!0,menuStyle:{width:"auto"},data:[{text:_l("\u4E14%25000"),value:re.Op.AND},{text:_l("\u6216"),value:re.Op.OR}],onChange:function(ct){wt({conditionSpliceType:ct})}}),an>1&&r.createElement("span",{className:"text"},(tn={},(0,p.default)(tn,re.Op.AND,_l("\u4E14%25000")),(0,p.default)(tn,re.Op.OR,_l("\u6216")),tn)[gt])),r.createElement(Se,(0,te.default)({from:Xe,canEdit:!0,projectId:Ue,appId:Ke,key:$t.keyStr,showCustom:en,index:an,condition:$t,conditionGroupType:zt,isSheetFieldError:Zt,control:mt,onDelete:function(){return xt(an)},onChange:function(ct){return ut(ct,an)},conditionError:sn[an]||"",filterResigned:Rt,isRules:on},Ze)))}),He&&ze!==1&&r.createElement(Ae,{isSingleFilter:$e},r.createElement(Ne,null),r.createElement("div",{className:"flex"},r.createElement(N.Z,{columns:fn(ft),onAdd:et},r.createElement(Me,{className:"mRight30 ThemeHoverColor3",icon:"add",textLeft:4,iconSize:18,text:_l("\u6761\u4EF6"),textSize:13})))))}Fe.propTypes={from:o.string,appId:o.string,isSingleFilter:o.bool,projectId:o.string,isGroup:o.bool,conditionSpliceType:o.number,conditions:(0,o.arrayOf)((0,o.shape)({})),controls:(0,o.arrayOf)((0,o.shape)({})),canEdit:o.bool,conditionProps:(0,o.shape)({}),onAdd:o.func,onChange:o.func,onDelete:o.func,onUpdateGroup:o.func};var Be=t(67776),we=t(99479),Ie=t(1952);const ge=null;var Re=function(Xe){return(0,Ie.Z)(we.Z,Xe)},Pe=(0,a.Z)([`
  display: flex;
  flex-direction: column;
  overflow: hidden;
  &.isSingleFilter {
    overflow: visible;
  }
  .addGroupTip {
    color: #9e9e9e;
    &:hover {
      color: #757575;
    }
  }
`],[`
  display: flex;
  flex-direction: column;
  overflow: hidden;
  &.isSingleFilter {
    overflow: visible;
  }
  .addGroupTip {
    color: #9e9e9e;
    &:hover {
      color: #757575;
    }
  }
`]),ke=(0,a.Z)([`
  position: relative;
  height: 32px;
`],[`
  position: relative;
  height: 32px;
`]),We=(0,a.Z)([`
  cursor: pointer;
  position: absolute;
  left: 10px;
  top: 0;
  width: 32px;
  height: 32px;
  font-size: 16px;
  color: #757575;
`],[`
  cursor: pointer;
  position: absolute;
  left: 10px;
  top: 0;
  width: 32px;
  height: 32px;
  font-size: 16px;
  color: #757575;
`]),Ve=(0,a.Z)([`
  &:not(.isSingleFilter) {
    max-height: 420px;
    overflow-y: auto;
    overflow-x: hidden;
  }
`],[`
  &:not(.isSingleFilter) {
    max-height: 420px;
    overflow-y: auto;
    overflow-x: hidden;
  }
`]),it=(0,a.Z)([`
  margin-bottom: 24px;
  font-size: 0px;
  margin-top: 19px;
  padding: `,`;
`],[`
  margin-bottom: 24px;
  font-size: 0px;
  margin-top: 19px;
  padding: `,`;
`]),Ge=(0,a.Z)([`
  cursor: pointer;
  color: #757575;
  font-weight: bold;
  &:hover {
    color: #2196f3;
  }
`],[`
  cursor: pointer;
  color: #757575;
  font-weight: bold;
  &:hover {
    color: #2196f3;
  }
`]),pt=Z.ZP.div(Pe),ot=(0,Z.ZP)(H.Lb)(ke),vt=(0,Z.ZP)(H.Lb)(We),At=Z.ZP.div(Ve),yt=(0,Z.ZP)(H.EK)(it,function(Qe){var Xe=Qe.isSingleFilter;return Xe?"0px 4px":"0 24px"}),st=(0,Z.ZP)(y.Z)(Ge);function St(Qe){var Xe=Qe.maxHeight,$e=Qe.supportGroup,Ke=Qe.isSingleFilter,Ue=Qe.from,He=Qe.actions,ze=Qe.base,gt=ze===void 0?{}:ze,Et=Qe.filter,ft=Et===void 0?{}:Et,qe=Qe.controls,nt=Qe.nameIsUpdated,Ze=Qe.conditionProps,et=Qe.onBack,ut=Qe.hideSave,xt=ut===void 0?!1:ut,wt=Qe.filterAddConditionControls,kt=wt===void 0?function(){}:wt,Rt=Qe.setActiveTab,jt=Rt===void 0?function(){}:Rt,fn=Qe.onAddCondition,Mt=fn===void 0?function(){}:fn,sn=Qe.handleTriggerFilter,on=sn===void 0?function(){}:sn,en=Qe.filterResigned,$t=en===void 0?!0:en,an=Qe.filterError,tn=an===void 0?[]:an,mt=Qe.isRules,Lt=Qe.showCustom,zt=(0,Be.xx)(ft),Zt=!!A().sum(zt.map(function(dn){return dn.isGroup?A().get(dn,"groupFilters.length"):1})),Nt=Qe.needSave||nt,ct=ft.id.startsWith("new"),De=!(ct||Nt)||!Zt,_e=ft.conditionsGroups,Le=_e===void 0?[]:_e,rt=(0,r.useRef)(),Ct=(0,r.useState)({}),dt=(0,R.Z)(Ct,2),It=dt[0],bt=dt[1],Ut=gt.projectId,Xt=gt.appId,pn=gt.worksheetId,tt=gt.isCharge,ht=(0,V.XH)(Ut,C.UU.filterGroup),Dt=Qe.canEdit;A().isUndefined(Dt)&&(Dt=ft.type===re.kQ.PUBLIC?tt:ft.createAccountId===md.global.Account.accountId);function Ot(){var dn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Cn=dn.saveAsNew,Rn=Cn===void 0?!1:Cn;if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}ct||Rn?Re({title:Rn?_l("\u53E6\u5B58\u4E3A\u7B5B\u9009\u5668"):_l("\u4FDD\u5B58\u7B5B\u9009\u5668"),filterName:ft.name,filterType:ft.type,isCharge:tt,onSave:function(wn){var On=wn.filterName,An=wn.filterType;He.saveFilter({appId:Xt,worksheetId:pn,filter:(0,te.default)({},ft,{name:On,type:An,id:Rn?void 0:ft.id})},function(Yn){jt(2),on(Yn)})}}):He.saveFilter({appId:Xt,worksheetId:pn,filter:(0,te.default)({},ft)},function(gn){on(gn)})}function Ht(){rt.current&&setTimeout(function(){rt.current.scrollTop=9999},10)}function Kt(){Nt?L.Z.confirm({title:_l("\u5B58\u5728\u672A\u4FDD\u5B58\u7684\u53D8\u66F4\uFF0C\u662F\u5426\u9700\u8981\u4FDD\u5B58\uFF1F"),okDisabled:De,onOk:Ot,onCancel:function(){return et(!0)},okText:_l("\u4FDD\u5B58"),cancelText:_l("\u4E0D\u4FDD\u5B58")}):et()}return r.createElement(pt,{className:f()({isSingleFilter:Ke})},!Ke&&!ct&&r.createElement(ot,null,r.createElement(vt,{onClick:Kt},r.createElement("i",{className:"icon icon-knowledge-return"})),r.createElement(k.Z,{editable:Dt,name:ft.name,withStar:Nt&&!nt,onChange:function(Cn){if(Cn.trim()===""){alert(_l("\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"),3);return}if(ft.name!==Cn.trim())return He.changeEditingFilter({name:Cn.trim()}),!0}})),r.createElement(At,{className:f()({isSingleFilter:Ke}),ref:rt,style:Xe?{maxHeight:Xe-120}:{}},Le.map(function(dn,Cn){return r.createElement(r.Fragment,null,r.createElement(Fe,{from:Ue,isRules:mt,isSingleFilter:Ke,canEdit:ct?!0:Dt,appId:Xt,showCustom:Lt,projectId:Ut,isGroup:ft.isGroup,filterError:tn[Cn]||[],filterResigned:$t,filterAddConditionControls:kt,conditionSpliceType:dn.conditionSpliceType,conditions:dn.conditions.map(function(Rn,gn){return(0,te.default)({},Rn,{folded:It[Rn.controlId+"-"+(Cn+""+gn)]})}),controls:qe,conditionProps:Ze,conditionsGroupsLength:Le.length,onAdd:function(gn){He.addCondition(gn,Cn,Ue)},onChange:function(){var gn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},wn=arguments[1];He.updateCondition(gn,Cn,wn);var On=dn.conditions[wn];On&&!A().isUndefined(gn.folded)&&bt((0,te.default)({},It,(0,p.default)({},On.controlId+"-"+(Cn+""+wn),gn.folded)))},onDelete:function(gn){dn.conditions.length===1&&Le.length!==1?He.deleteConditionsGroup(Cn):He.deleteCondition(gn,Cn)},onUpdateGroup:function(gn){return He.updateConditionsGroup(gn,Cn)}}),Cn!==Le.length-1&&r.createElement(K,{canEdit:Dt&&Cn===0,type:dn.spliceType,onChange:function(gn){return He.updateConditionsGroup({spliceType:gn},"*")},onDelete:function(gn){return He.deleteGroup(Cn+1)}}))})),r.createElement(yt,{className:"flexRow",isSingleFilter:Ke},(!ft.isGroup||ft.isGroup&&Le.length===1)&&r.createElement(N.Z,{columns:kt(qe),onAdd:function(Cn){ft.isGroup?He.addCondition(Cn,void 0,Ue):He.addCondition(Cn,0,Ue),Mt(),Ht()}},r.createElement(st,{className:"mRight30",icon:"add",textLeft:4,iconSize:18,text:_l("\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6"),textSize:13})),$e&&ht&&r.createElement(ce.Z,{popupPlacement:"bottom",text:ht==="2"?_l("\u6761\u4EF6\u7EC4\u4E3A\u4E13\u4E1A\u7248\u529F\u80FD"):""},r.createElement(st,{icon:"add",textLeft:4,iconSize:18,text:_l("\u6761\u4EF6\u7EC4"),afterElement:ht==="2"&&r.createElement(g.Z,null),textSize:13,onClick:function(){if(ht==="2")(0,V.j0)(Ut,C.UU.filterGroup);else{var Cn=A().get(Le,"0.spliceType");He.addGroup(Cn),Mt(),Ht()}}})),$e&&r.createElement(ce.Z,{text:_l("\u6DFB\u52A0\u6761\u4EF6\u7EC4\uFF0C\u7ED3\u5408 \u4E14/\u6216 \u6761\u4EF6\u8FDB\u884C\u7B5B\u9009")},r.createElement("i",{className:"addGroupTip icon icon-help Font16 mLeft6"})),r.createElement("div",{className:"flex"}),!Ke&&!xt&&r.createElement(b,{disabled:De,onClick:Ot,downList:ct||De?[]:[{name:_l("\u4FDD\u5B58"),disabled:!Nt,onClick:Ot},{name:_l("\u4FDD\u5B58\u4E3A"),disabled:!Nt,onClick:function(){return Ot({saveAsNew:!0})}}]})))}St.propTypes={supportGroup:o.bool,from:o.string,isSingleFilter:o.bool,canEdit:o.bool,needSave:o.bool,base:(0,o.shape)({}),filter:(0,o.shape)({}),actions:(0,o.arrayOf)((0,o.shape)({})),controls:(0,o.arrayOf)((0,o.shape)({})),conditionProps:(0,o.shape)({}),onBack:o.func,setActiveTab:o.func}},31038:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>d});var ce=t(12424),g=t(86735),p=t(67294),L=t(45697),te=t.n(L),R=t(93967),y=t.n(R),a=t(71893),r=(0,g.Z)([`
  input {
    border: none;
    font-size: 16px;
    font-weight: bold;
    text-align: center;
  }
  .name {
    font-size: 16px;
    font-weight: bold;
  }
  &.editable {
    .name {
      cursor: pointer;
      border-bottom: 1px dashed #333;
      max-width: 250px;
    }
    input {
      margin-bottom: 1px;
    }
  }
  &.withStar {
    position: relative;
    &:after {
      content: '*';
      position: absolute;
      right: -15px;
      top: 0px;
      font-size: 22px;
    }
  }
`],[`
  input {
    border: none;
    font-size: 16px;
    font-weight: bold;
    text-align: center;
  }
  .name {
    font-size: 16px;
    font-weight: bold;
  }
  &.editable {
    .name {
      cursor: pointer;
      border-bottom: 1px dashed #333;
      max-width: 250px;
    }
    input {
      margin-bottom: 1px;
    }
  }
  &.withStar {
    position: relative;
    &:after {
      content: '*';
      position: absolute;
      right: -15px;
      top: 0px;
      font-size: 22px;
    }
  }
`]),o=a.ZP.div(r);function d(Z){var H=Z.withStar,U=Z.editable,f=Z.name,V=Z.onChange,C=V===void 0?function(){}:V,O=(0,p.useRef)(),n=(0,p.useState)(f),s=(0,ce.Z)(n,2),j=s[0],A=s[1],S=(0,p.useState)(),I=(0,ce.Z)(S,2),c=I[0],q=I[1];function b(){var k=C(j);k||A(f),q(!1)}return(0,p.useEffect)(function(){A(f)},[f]),p.createElement(o,{className:y()("filterDetailName",{withStar:H&&!c,editable:U})},c&&p.createElement("input",{ref:O,value:j,onChange:function(ee){return A(ee.target.value)},onKeyDown:function(ee){ee.keyCode===13&&b()},onBlur:b}),!c&&p.createElement("div",{className:"name ellipsis",title:f,onClick:function(){U&&(q(!0),setTimeout(function(){O.current&&(O.current.focus(),O.current.select())},20))}},f))}d.propTypes={withStar:L.bool,editable:L.bool,name:L.string,onChange:L.func}},55266:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>V});var ce=t(62521),g=t(16469),p=t(88239),L=t(3540),te=t(12424),R=t(67294),y=t(45697),a=t.n(y),r=t(93967),o=t.n(r),d=t(96486),Z=t.n(d),H=t(42541),U=t(62232),f=t(37974);function V(C){var O=C.style,n=C.maxHeight,s=C.footer,j=C.className,A=C.filterColumnClassName,S=C.selected,I=S===void 0?[]:S,c=C.onAdd,q=c===void 0?function(){}:c,b=C.onClose,k=b===void 0?function(){}:b,ee=(0,R.useRef)(),re=(0,R.useState)(""),ie=(0,te.Z)(re,2),le=ie[0],E=ie[1],w=le?C.controls.filter(function(K){return K.controlName.toLowerCase().indexOf(le.toLowerCase())>-1}):C.controls;return R.createElement("div",{className:o()("addFilterPopup",j),style:O},R.createElement("div",{className:"columnsFilter"},R.createElement("i",{className:"icon-search"}),R.createElement(L.Z,{autoFocus:!0,placeholder:_l("\u641C\u7D22\u5B57\u6BB5"),manualRef:ee,value:le,onChange:function(N){E(ee.current.value)}})),R.createElement(ce.Z,{className:o()("worksheetFilterColumnOptionList",A),onClickAwayExceptions:[".columnsFilter"],onClickAway:function(){E(""),k()},style:(0,p.default)({},O,{maxHeight:n?n-90:void 0})},w.length?w.map(function(K,N){return R.createElement(g.Z,{className:o()({segmentationLine:"segmentation"in K,selected:Z().includes(I,K.controlId)}),onClick:function(){q(K),E("")},key:N},R.createElement(H.EK,null,R.createElement("i",{className:o()("Font16 icon","icon-"+(0,U.hB)(K.originType===37?37:K.type))}),R.createElement("span",{className:"ellipsis"},K.controlName)))}):R.createElement("div",{className:"tip TxtCenter"},le?_l("\u6CA1\u6709\u641C\u7D22\u7ED3\u679C"):_l("\u6CA1\u6709\u66F4\u591A\u5B57\u6BB5"))),s)}V.propTypes={style:(0,y.shape)({}),classNamePopup:y.string,filterColumnClassName:y.string,onAdd:y.func,onClose:y.func}},97397:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>b});var ce=t(8177),g=t.n(ce),p=t(63239),L=t.n(p),te=t(85105),R=t.n(te),y=t(99663),a=t(22600),r=t(49135),o=t(93196),d=t(67294),Z=t(45697),H=t.n(Z),U=t(93967),f=t.n(U),V=t(44894),C=t(68461),O=t(44253),n=t(96486),s=t.n(n),j,A,S,I,c;function q(k,ee,re,ie,le){var E={};return Object.keys(ie).forEach(function(w){E[w]=ie[w]}),E.enumerable=!!E.enumerable,E.configurable=!!E.configurable,("value"in E||E.initializer)&&(E.writable=!0),E=re.slice().reverse().reduce(function(w,K){return K(k,ee,w)||w},E),le&&E.initializer!==void 0&&(E.value=E.initializer?E.initializer.call(le):void 0,E.initializer=void 0),E.initializer===void 0&&(Object.defineProperty(k,ee,E),E=null),E}var b=(S=(c=I=function(k){(0,o.default)(ee,k);function ee(re){(0,y.default)(this,ee);var ie=(0,r.default)(this,(ee.__proto__||R()(ee)).call(this,re)),le=re.fullValues,E=le===void 0?[]:le;return ie.state={records:s().map(E,function(w){return safeParse(w)}),selectRecordVisible:!1},ie}return(0,a.default)(ee,[{key:"triggerChange",value:function(){var ie=this.props.onChange,le=this.state.records;ie({values:le.map(function(E){return E.id}),fullValues:le.map(function(E){return L()(E)})})}},{key:"addRecord",value:function(ie){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},E=this.props.onChange,w=this.state.records,K=w.filter(function(N){return!s().find(ie,function(F){return N.id===F.sid})}).concat(ie.map(function(N){return{name:N.name,id:N.sid}}));this.setState({records:K},le)}},{key:"removeRecord",value:function(ie){var le=this.props.onChange,E=this.state.records,w=E.filter(function(K){return K.id!==ie.id});this.setState({records:w},this.triggerChange)}},{key:"handleChange",value:function(ie,le){var E=this.props.control,w=E.advancedSetting.showtype==="4";ie=JSON.parse(ie),w?this.addRecord(ie,this.triggerChange):this.isAnyLevel?(this.setState({tempRecord:ie}),this.tempRecord=ie):this.addRecord(ie,this.triggerChange)}},{key:"render",value:function(){var ie=this,le=this.props,E=le.control,w=le.disabled,K=this.state,N=K.selectRecordVisible,F=K.tempRecord,h=this.state.records;F&&(h=h.concat(F.map(function(X){return{name:X.name,id:X.sid}})));var z=E.advancedSetting.showtype==="4";return d.createElement("div",{className:"worksheetFilterRelateRecordCondition worksheetFilterCascaderCondition"},d.createElement("div",{className:f()("recordsCon",{disabled:w}),onClick:function(){return ie.setState({selectRecordVisible:!0})}},h.length?h.map(function(X,B){return d.createElement("div",{className:"recordItem",key:B},d.createElement("span",{className:"recordname ellipsis"},X.name),d.createElement("span",{className:"remove",onClick:function(Q){Q.stopPropagation(),ie.removeRecord(X)}},d.createElement("i",{className:"icon icon-delete",style:{marginRight:2}})))}):d.createElement("span",{className:"placeholder"},_l("\u8BF7\u9009\u62E9"))),d.createElement("div",{onClick:function(B){return B.stopPropagation()}},N&&d.createElement("div",{className:"cascaderDropdown",style:z?{marginTop:14}:{}},d.createElement(C.Z,{popupClassName:"worksheetFilterCascaderPopup",visible:N,disabled:w,onChange:this.handleChange,dataSource:E.dataSource,viewId:E.viewId,advancedSetting:s().assign({},E.advancedSetting,this.isFuzzy?{anylevel:"0"}:{}),onPopupVisibleChange:function(B){!B&&!z&&ie.isAnyLevel&&ie.tempRecord&&ie.addRecord(ie.tempRecord,function(){ie.setState({tempRecord:void 0}),ie.tempRecord=void 0,ie.triggerChange()}),ie.setState({selectRecordVisible:B})}}))))}},{key:"isFuzzy",get:function(){return s().includes([O.W5.BETWEEN,O.W5.NBETWEEN],this.props.type)}},{key:"isAnyLevel",get:function(){return this.props.control.advancedSetting.anylevel==="0"||this.isFuzzy}}]),ee}(d.Component),I.propTypes={disabled:H().bool,onChange:H().func,control:H().shape({}),fullValues:H().arrayOf(H().string)},I.defaultProps={fullValues:[]},c),q(S.prototype,"addRecord",[V.Nj],g()(S.prototype,"addRecord"),S.prototype),q(S.prototype,"removeRecord",[V.Nj],g()(S.prototype,"removeRecord"),S.prototype),q(S.prototype,"handleChange",[V.Nj],g()(S.prototype,"handleChange"),S.prototype),S)},95479:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>s});var ce=t(88239),g=t(60967),p=t(3540),L=t(31546),te=t(52945),R=t.n(te),y=t(40516),a=t(12424),r=t(67294),o=t(45697),d=t.n(o),Z=t(30381),H=t.n(Z),U=t(43514),f=t(94914),V=t(44253),C=t(96486),O=t.n(C);function n(j){return{4:"month",5:"year"}[j]}function s(j){var A=j.control,S=A===void 0?{}:A,I=j.disabled,c=j.type,q=j.value,b=j.values,k=j.minValue,ee=j.maxValue,re=j.dateRange,ie=j.onChange,le=j.from,E=le===void 0?"":le,w=(0,r.useState)(q),K=(0,a.Z)(w,2),N=K[0],F=K[1],h=V.AW;re===18&&O().includes([V.W5.DATEENUM,V.W5.NDATEENUM,V.W5.DATE_EQ,V.W5.DATE_NE],c)&&(O().includes(["1","2"],O().get(S,"advancedSetting.showtype"))||O().includes(["ctime","utime"],S.controlId))&&(S.type=15,S.advancedSetting={showtype:"3"});var z=(0,f.VL)(S),X=z.split(" ")[1],B=(0,f.eO)(S).formatMode,x=String(O().get(S,"advancedSetting.showtype"));return O().includes(["4","5"],x)&&(h=h.map(function(Q){return Q.filter(function(i){return O().includes(x==="5"?[15,16,17,18]:[7,8,9,12,13,14,15,16,17,18],i.value)})}).filter(function(Q){return Q.length})),(0,r.useEffect)(function(){F(q)},[q]),r.createElement("div",{className:"worksheetFilterDateCondition"},c===V.W5.DATE_BETWEEN||c===V.W5.DATE_NBETWEEN?r.createElement("div",{className:"dateInputCon customDate"},r.createElement(y.Z,{disabled:I,value:k&&ee?[H()(k),H()(ee)]:[],showTime:X?{format:X}:!1,picker:n(x),format:z,onChange:function(i,m){(!i||!O().isArray(i))&&(i=[]),ie({minValue:i[0]&&i[0].format(B==="YYYY-MM-DD HH"?void 0:B),maxValue:i[1]&&i[1].format(B==="YYYY-MM-DD HH"?void 0:B)})}})):r.createElement("div",null,E!=="subTotal"&&r.createElement("div",{className:"dateType dateInputCon"},r.createElement(L.Z,{disabled:I,data:h,defaultValue:re,isAppendToBody:!0,menuStyle:{width:220},onChange:function(i){var m={value:void 0,values:[]};(i===10||i===11)&&(m={value:1}),ie(R()({dateRange:i},m))}})),(re===10||re===11)&&r.createElement("div",{className:"dateValue mTop10"},r.createElement(p.Z,{className:"ruleDateValue",value:N,placeholder:_l("\u8BF7\u8F93\u5165\u5929\u6570"),disabled:I,valueFilter:function(i){return i.replace(/[^-\d]/g,"")},onBlur:function(i){ie({value:N,dateRangeType:1})},onChange:F}),r.createElement(g.Z,{className:"includeToday",text:_l("\u5305\u62EC\u4ECA\u5929"),checked:O().isEqual(b,["today"]),onClick:function(){return ie({values:O().isEqual(b,["today"])?[]:["today"]})}})),re===18&&r.createElement("div",{className:"customDate dateInputCon mTop10"},r.createElement(U.Z,(0,ce.default)({},(0,ce.default)({},S,{advancedSetting:(0,ce.default)({},S.advancedSetting,{min:"",max:""})}),{value:q&&H()(q),dropdownClassName:"scrollInTable",onChange:function(i){ie({value:i?H()(i).format(B==="YYYY-MM-DD HH"?void 0:B):void 0})},compProps:{placeholder:_l("\u8BF7\u9009\u62E9")}})))))}s.propTypes={disabled:d().bool,onChange:d().func,value:d().string,dateRange:d().number,minValue:d().string,maxValue:d().string,type:d().number}},73626:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>g});var ce=t(67294);function g(p){return ce.createElement("div",{className:"ming Input w100 disabled"})}},17652:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>c});var ce=t(8177),g=t.n(ce),p=t(52945),L=t.n(p),te=t(85105),R=t.n(te),y=t(99663),a=t(22600),r=t(49135),o=t(93196),d=t(67294),Z=t(45697),H=t.n(Z),U=t(44894),f=t(1924),V=t(44253),C=t(96486),O=t.n(C),n,s,j,A,S;function I(q,b,k,ee,re){var ie={};return Object.keys(ee).forEach(function(le){ie[le]=ee[le]}),ie.enumerable=!!ie.enumerable,ie.configurable=!!ie.configurable,("value"in ie||ie.initializer)&&(ie.writable=!0),ie=k.slice().reverse().reduce(function(le,E){return E(q,b,le)||le},ie),re&&ie.initializer!==void 0&&(ie.value=ie.initializer?ie.initializer.call(re):void 0,ie.initializer=void 0),ie.initializer===void 0&&(Object.defineProperty(q,b,ie),ie=null),ie}var c=(j=(S=A=function(q){(0,o.default)(b,q);function b(k){(0,y.default)(this,b);var ee=(0,r.default)(this,(b.__proto__||R()(b)).call(this,k));return ee.state={value:k.value,minValue:k.minValue,maxValue:k.maxValue},ee}return(0,a.default)(b,[{key:"componentWillReceiveProps",value:function(ee){(ee.value!==this.props.value||ee.minValue!==this.props.minValue||ee.maxValue!==this.props.maxValue)&&this.setState(L()(this.state,{value:ee.value,minValue:ee.minValue,maxValue:ee.maxValue}))}},{key:"handleChange",value:function(){var ee=this.props.onChange,re=this.state,ie=re.value,le=re.maxValue,E=re.minValue;function w(N){return O().isUndefined(N)||N===""}var K={};w(ie)&&w(E)&&w(le)||(E&&le&&f.Z.parseFloat(le)<f.Z.parseFloat(E)?(K.minValue=le,K.maxValue=E,this.setState({minValue:le,maxValue:E})):(K.maxValue=le,K.minValue=E,K.value=ie),(ie!==this.props.value||E!==this.props.minValue||le!==this.props.maxValue)&&ee(K))}},{key:"setValue",value:function(ee,re){var ie={value:this.state.value,minValue:this.state.minValue,maxValue:this.state.maxValue};re=re.trim().replace(/[^-\d.]/g,""),ie[ee]=re,this.setState(ie)}},{key:"render",value:function(){var ee=this,re=this.props,ie=re.type,le=re.disabled,E=this.state,w=E.value,K=w===void 0?"":w,N=E.maxValue,F=N===void 0?"":N,h=E.minValue,z=h===void 0?"":h;return d.createElement("div",{className:"worksheetFilterNumberCondition"},ie===V.W5.BETWEEN||ie===V.W5.NBETWEEN?d.createElement("div",{className:"numberRange flexRow"},d.createElement("div",{className:"flex"},d.createElement("input",{disabled:le,type:"text",className:"ming Input",value:z,placeholder:_l("\u6700\u5C0F\u503C"),onChange:function(B){return ee.setValue("minValue",B.target.value)},onBlur:this.handleChange})),d.createElement("span",{className:"split"},"-"),d.createElement("div",{className:"flex"},d.createElement("input",{disabled:le,type:"text",className:"ming Input",value:F,placeholder:_l("\u6700\u5927\u503C"),onChange:function(B){return ee.setValue("maxValue",B.target.value)},onBlur:this.handleChange}))):d.createElement("input",{disabled:le,type:"text",className:"ming Input w100",value:K,placeholder:_l("\u8BF7\u8F93\u5165\u6570\u503C"),onChange:function(B){return ee.setValue("value",B.target.value)},onBlur:this.handleChange}))}}]),b}(d.Component),A.propTypes={disabled:H().bool,onChange:H().func,value:H().number,maxValue:H().number,minValue:H().number,type:H().number},S),I(j.prototype,"handleChange",[U.Nj],g()(j.prototype,"handleChange"),j.prototype),I(j.prototype,"setValue",[U.Nj],g()(j.prototype,"setValue"),j.prototype),j)},13867:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>z});var ce=t(8177),g=t.n(ce),p=t(24043),L=t.n(p),te=t(51156),R=t(63239),y=t.n(R),a=t(85105),r=t.n(a),o=t(99663),d=t(22600),Z=t(49135),H=t(93196),U=t(67294),f=t(45697),V=t.n(f),C=t(44894),O=t(93967),n=t.n(O),s=t(60510),j=t(78549),A=t(3540),S=t(86735),I=t(71893),c=(0,S.Z)([`
  position: relative;
  max-width: 100%;
  display: inline-block;
  input {
    border: none !important;
  }
`],[`
  position: relative;
  max-width: 100%;
  display: inline-block;
  input {
    border: none !important;
  }
`]),q=I.ZP.span(c);function b(X){var B=X.disabled,x=X.data,Q=X.renderItem,i=X.onRemove,m=X.needInput,v=m===void 0?!1:m,W=X.search,P=X.onChangeInput,u=P===void 0?function(){}:P,l=(0,U.useRef)(null),T=_.debounce(function(G){u({keywords:G})},500);return U.createElement("div",{className:n()("filterTagCon",{disabled:B}),onClick:function(){return l.current.focus()}},x.length?x.map(function(G,D){return U.createElement("span",{className:"fiterTagItem",key:D},Q?Q(G):U.createElement("span",{className:"text"},G.name),U.createElement("span",{className:"remove",onClick:function(se){se.stopPropagation(),!B&&i(G)}},U.createElement("i",{className:"icon icon-delete"})))}):null,v&&!B&&U.createElement(q,{className:"CityPicker-input-tagSearchBox"},U.createElement(A.Z,{manualRef:l,placeholder:x.length?"":_l("\u8BF7\u9009\u62E9"),className:"CityPicker-input-textCon CityPicker-input-tagSearch",autofocus:!0,type:"search",value:W,onChange:function(D){u({search:D}),T(D)}}),U.createElement("label",{className:"CityPicker-input-box_label"},W)))}b.propTypes={disabled:V().bool,data:V().arrayOf(V().shape({})),renderItem:V().func,onRemove:V().func};const k=b;var ee=t(44253),re=t(96486),ie=t.n(re),le,E,w,K,N;function F(X,B,x,Q,i){var m={};return Object.keys(Q).forEach(function(v){m[v]=Q[v]}),m.enumerable=!!m.enumerable,m.configurable=!!m.configurable,("value"in m||m.initializer)&&(m.writable=!0),m=x.slice().reverse().reduce(function(v,W){return W(X,B,v)||v},m),i&&m.initializer!==void 0&&(m.value=m.initializer?m.initializer.call(i):void 0,m.initializer=void 0),m.initializer===void 0&&(Object.defineProperty(X,B,m),m=null),m}var h=[_l("\u4E00\u7EA7"),_l("\u4E8C\u7EA7"),_l("\u4E09\u7EA7"),_l("\u56DB\u7EA7"),_l("\u4E94\u7EA7"),_l("\u516D\u7EA7"),_l("\u4E03\u7EA7"),_l("\u516B\u7EA7"),_l("\u4E5D\u7EA7"),_l("\u5341\u7EA7")],z=(w=(N=K=function(X){(0,H.default)(B,X);function B(x){(0,o.default)(this,B);var Q=(0,Z.default)(this,(B.__proto__||r()(B)).call(this,x));return Q.onFetchData=ie().debounce(function(i){Q.setState({keywords:i})},500),Q.state={selectedOptions:Q.getDefaultSelectedOptions(x.fullValues,x.control),keywords:"",search:void 0},Q}return(0,d.default)(B,[{key:"componentWillReceiveProps",value:function(Q){ie().isEqual(Q.fullValues,this.props.fullValues)||this.setState({selectedOptions:this.getDefaultSelectedOptions(Q.fullValues,Q.control)})}},{key:"getDefaultSelectedOptions",value:function(Q,i){return Q=Q||[],ie().includes([19,23,24],i.type)?Q.map(function(m){return JSON.parse(m)}):i.type===27||i.type===48?Q.map(function(m){return JSON.parse(m)}):i.type===28?Q.map(safeParse).filter(function(m){return!ie().isEmpty(m)}):ie().includes([9,10,11],i.type)?Q.length?ie().compact(Q.map(function(m){return ie().find(i.options,function(v){return v.key===(m.startsWith("{")?safeParse(m).id:m)})})).map(function(m){return{id:m.key,name:m.value}}):[]:[]}},{key:"getAreaLevel",value:function(Q,i){var m=ie().includes([ee.W5.LIKE,ee.W5.NCONTAIN],i);return m?3:Q===19?1:Q===23?2:3}},{key:"addItem",value:function(Q){var i=this,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=m.clearSelected;this.setState({selectedOptions:v?ie().isArray(Q)?Q:[Q]:ie().uniqBy(this.state.selectedOptions.concat(Q),"id")},function(){i.props.onChange({values:i.state.selectedOptions.map(function(W){return W.id}),fullValues:i.state.selectedOptions.map(function(W){return y()(W)})})})}},{key:"updateItem",value:function(Q,i){var m=this,v=this.state.selectedOptions.map(function(W){return W.id===Q?ie().assign({},W,i):W});this.setState({selectedOptions:v},function(){m.props.onChange({values:v.map(function(W){return W.id}),fullValues:v.map(function(W){return y()(W)})})})}},{key:"clearTemp",value:function(){var Q=this,i=this.state.selectedOptions.map(function(m){return ie().omit(m,["temp"])});this.setState({selectedOptions:i},function(){Q.props.onChange({values:i.map(function(m){return m.id}),fullValues:i.map(function(m){return y()(m)})})})}},{key:"removeItem",value:function(Q){var i=this;this.setState({selectedOptions:this.state.selectedOptions.filter(function(m){return Q.id!==m.id})},function(){i.props.onChange({values:i.state.selectedOptions.map(function(m){return m.id}),fullValues:i.state.selectedOptions.map(function(m){return y()(m)})})})}},{key:"renderSelect",value:function(Q){var i=this,m=this.props,v=m.type,W=m.disabled,P=m.folded,u=m.control,l=m.projectId,T=m.onChange,G=m.from,D=this.state,M=D.selectedOptions,se=D.search,ae=D.keywords;if(W)return U.createElement(k,{disabled:W,data:M,onRemove:this.removeItem});if(ie().includes([19,23,24],u.type)){var ne=this.getAreaLevel(u.type,v);return U.createElement("div",{className:"worksheetFilterOptionsCondition",ref:function(ve){return i.con=ve}},U.createElement(te.Z,{search:ae,destroyPopupOnHide:!0,defaultValue:void 0,level:ne,callback:function(ve,ue){var pe=ie().last(ve);se&&i.setState({keywords:void 0,search:""});var Se=ie().find(M,function(ye){return ye.temp});Se?i.updateItem(Se.id,{id:pe.id,name:pe.path}):i.addItem({temp:!0,id:pe.id,name:pe.path})},handleClose:function(){setTimeout(i.clearTemp,10),se&&i.setState({keywords:void 0,search:""})}},U.createElement(k,{data:M,onRemove:this.removeItem,needInput:!0,search:se,keywords:ae,onChangeInput:function(ve){return i.setState(ve)}})))}else if(u.type===27){var de=u.enumDefault===0&&ie().includes([ee.W5.ARREQ,ee.W5.ARRNE],v);return U.createElement("div",{className:"filterSelectDepartment",onClick:function(){(0,s.Z)({unique:de,projectId:l,isIncludeRoot:!1,showCurrentUserDept:!ie().includes(["rule","portal"],G),selectFn:function(ue){ue.length&&i.addItem((de?ue.slice(0,1):ue).map(function(pe){return{id:pe.departmentId,name:pe.departmentName}}),{clearSelected:de})}})}},U.createElement(k,{data:M,onRemove:this.removeItem}))}else if(u.type===48){var Ce=u.enumDefault===0&&ie().includes([ee.W5.ARREQ,ee.W5.ARRNE],v);return U.createElement("div",{className:"filterSelectDepartment",onClick:function(ve){(0,j.Z)(ve.target,{projectId:l,unique:Ce,showCurrentOrgRole:!ie().includes(["rule","portal"],G),showCompanyName:!0,onSave:function(pe){pe.length&&i.addItem((Ce?pe.slice(0,1):pe).map(function(Se){return{id:Se.organizeId,name:Se.organizeName}}),{clearSelected:Ce})}})}},U.createElement(k,{data:M,onRemove:this.removeItem}))}else{var he=ie().includes([9,11],u.type),fe=ie().includes([ee.W5.ARREQ,ee.W5.ARRNE,ee.W5.EQ_FOR_SINGLE],v)&&he,Ee=[];ie().includes([9,10,11],u.type)?Ee=u.options.filter(function(oe){return!oe.isDeleted||ie().find(M,function(ve){return ve.id===oe.key})}).sort(function(oe,ve){return oe.index-ve.index}).map(function(oe){return{id:oe.key,name:oe.value}}):u.type===28&&(Ee=L()({length:(u.advancedSetting||{}).max}).map(function(oe,ve){return{id:ve+1+"",name:h[ve]}}));var Y=Ee;return P&&Ee.length>5&&(Y=Ee.slice(0,5)),U.createElement("div",{className:"optionCheckboxs"},Y.map(function(oe,ve){return U.createElement("div",{className:n()("optionCheckbox ellipsis",{"ThemeBGColor3 ThemeBorderColor3 checked":ie().find(M,function(ue){return ue.id===oe.id}),multiple:!fe}),key:ve,onClick:function(){if(fe){i.addItem(oe,{clearSelected:!0});return}var pe=ie().find(M,function(Se){return Se.id===oe.id});pe?i.removeItem(oe):i.addItem(oe)}},!fe&&ie().find(M,function(ue){return ue.id===oe.id})&&U.createElement("span",{className:"icon-hr_ok selectedIcon"}),oe.name)}),Ee.length>5&&U.createElement("span",{className:"showMore ThemeColor3 Hand",onClick:function(){T({folded:!P})}},P?_l("\u66F4\u591A"):_l("\u6536\u8D77")))}}},{key:"render",value:function(){var Q=this;return U.createElement("div",{className:"worksheetFilterOptionsCondition",ref:function(m){return Q.con=m}},this.renderSelect())}}]),B}(U.Component),K.propTypes={disabled:V().bool,onChange:V().func,control:V().shape({}),fullValues:V().arrayOf(V().string),values:V().arrayOf(V().string)},K.defaultProps={folded:!0},N),F(w.prototype,"addItem",[C.Nj],g()(w.prototype,"addItem"),w.prototype),F(w.prototype,"updateItem",[C.Nj],g()(w.prototype,"updateItem"),w.prototype),F(w.prototype,"clearTemp",[C.Nj],g()(w.prototype,"clearTemp"),w.prototype),F(w.prototype,"removeItem",[C.Nj],g()(w.prototype,"removeItem"),w.prototype),F(w.prototype,"renderSelect",[C.Nj],g()(w.prototype,"renderSelect"),w.prototype),w)},7135:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>ee});var ce=t(33867),g=t(70264),p=t(85315),L=t(85105),te=t.n(L),R=t(99663),y=t(22600),a=t(49135),r=t(93196),o=t(67294),d=t(93967),Z=t.n(d),H=t(45697),U=t.n(H),f=t(26740),V=t(88239),C=t(26358),O=t(62232),n=t(15405),s=t(96486),j=t.n(s),A=t(44253),S,I,c,q=(0,n.Z)(S=(c=I=function(re){(0,r.default)(ie,re);function ie(){var le,E,w,K;(0,R.default)(this,ie);for(var N=arguments.length,F=Array(N),h=0;h<N;h++)F[h]=arguments[h];return K=(E=(w=(0,a.default)(this,(le=ie.__proto__||te()(ie)).call.apply(le,[this].concat(F))),w),w.renderLi=function(z,X,B){return o.createElement(o.Fragment,null,z.isNavGroup&&X!==0&&o.createElement("div",{className:"BorderTopGrayC"}),o.createElement("li",{className:Z()("controlLi overflow_ellipsis WordBreak",{}),key:X,onClick:B},o.createElement(ce.Z,{icon:(0,O.hB)(z.type),className:Z()("controlIcon mRight5 Font16")}),z.controlName))},w.renderCustom=function(z,X){var B=w.props.onChangeFn,x=j().find(z,function(Q){return Q.controlId===X});return x?o.createElement("ul",{className:Z()({customSelectUl:X==="rowid"})},j().map([x],function(Q,i){return w.renderLi(Q,-1,function(){B((0,V.default)({},Q,{cid:Q.controlId,rcid:""}),!0)})})):null},E),(0,a.default)(w,K)}return(0,y.default)(ie,[{key:"render",value:function(){var E=this,w=this.props,K=w.relateSheetList,N=K===void 0?[]:K,F=w.columns,h=w.showUl,z=w.onChangeFn,X=w.keywords,B=w.setKeys,x=w.conditionType,Q=w.control,i=w.defaultValue,m=w.sourceControlId,v=m===void 0?"":m,W=w.globalSheetControls,P=W===void 0?[]:W,u=w.from,l=w.showCustom,T=l?A.vJ:[],G=X?j().filter(D,function(Ce){return Ce.controlName.toLocaleLowerCase().indexOf(X.toLocaleLowerCase())>=0}):T,D=(0,C.P0)(x,F,Q,i),M=X?j().filter(D,function(Ce){return Ce.controlName.toLocaleLowerCase().indexOf(X.toLocaleLowerCase())>=0}):D,se=(0,C.P0)(x,P,Q,i),ae=X?j().filter(se,function(Ce){return Ce.controlName.toLocaleLowerCase().indexOf(X.toLocaleLowerCase())>=0}):se,ne=D.length>0||se.length>0||l&&T.length>0,de=M.length<=0&&ae.length<=0&&(l?G.length<=0:!0);return o.createElement(o.Fragment,null,h&&o.createElement("div",{className:"selectBox"},ne?o.createElement(o.Fragment,null,o.createElement("div",{className:"searchInput"},o.createElement(ce.Z,{icon:"h5_search",className:"Gray_9e searchIcon Font16"}),o.createElement("input",{type:"text",className:"",placeholder:_l("\u641C\u7D22\u5B57\u6BB5"),value:X,onChange:function(he){B(he.target.value)}})),o.createElement("div",{className:"selectBoxCom"},de&&o.createElement("div",{className:"pTop20 pBottom20 LineHeight80 TxtCenter Gray_9e"},_l("\u6682\u65E0\u641C\u7D22\u7ED3\u679C")),l&&j().includes([15,16,46],Q.type)&&this.renderCustom(G,"currenttime"),M.length>0&&!j().includes(["fastFilter"],u)&&o.createElement("ul",null,o.createElement("p",null,P.length<=0?_l("\u5F53\u524D\u8868\u5355"):_l("\u5F53\u524D\u5B50\u8868\u8BB0\u5F55")),j().map(M,function(Ce,he){return E.renderLi(Ce,he,function(){z((0,V.default)({},Ce,{cid:Ce.controlId,rcid:v}),!0)})})),ae.length>0&&o.createElement("ul",null,j().includes(["fastFilter"],u)?"":o.createElement("p",{className:""},_l("\u5F53\u524D\u8868\u5355")),j().map(ae,function(Ce,he){return E.renderLi(Ce,he,function(){z((0,V.default)({},Ce,{rcid:j().includes(["fastFilter"],u)?Ce.isNavGroup?"navGroup":"fastFilter":"parent",cid:Ce.controlId}),!0)})})),l&&j().includes([2],Q.type)&&this.renderCustom(G,"rowid"))):o.createElement("div",{className:"LineHeight40 pLeft10 Gray_9e"},_l("\u6CA1\u6709\u53EF\u9009\u5B57\u6BB5"))))}}]),ie}(o.Component),I.propTypes={disabled:U().bool,values:U().arrayOf(U().string)},I.defaultProps={values:[]},c))||S,b,k,ee=(k=b=function(re){(0,r.default)(ie,re);function ie(le){(0,R.default)(this,ie);var E=(0,a.default)(this,(ie.__proto__||te()(ie)).call(this,le));return E.onChangeFn=function(w,K){var N=E.props,F=N.dynamicSource,h=F===void 0?{}:F,z=N.onChange;E.setState({keywords:"",showUl:!1}),z({dynamicSource:[{cid:w.cid||"",rcid:w.rcid||"",staticValue:""}],isDynamicsource:!0})},E.remove=function(w){var K=E.props,N=K.dynamicSource,F=N===void 0?{}:N,h=K.onChange,z=F.filter(function(X,B){return B!==w});h({dynamicSource:[].concat((0,p.Z)(z)),isDynamicsource:!0})},E.renderName=function(w,K,N,F){return K?o.createElement("span",null,K.controlName,F&&o.createElement("i",null,_l("\u4E3B\u8BB0\u5F55")),o.createElement("i",{className:"icon-delete icon",onClick:function(z){z.stopPropagation(),E.remove(N)}})):o.createElement(g.Z,{text:o.createElement("span",null,_l("ID: %0",w.cid)),popupPlacement:"bottom"},o.createElement("span",{className:"isWrong"},_l("\u8BE5\u5B57\u6BB5\u5DF2\u5220\u9664")))},E.state={keywords:"",showUl:!1},E}return(0,y.default)(ie,[{key:"render",value:function(){var E=this,w=this.props,K=w.disabled,N=w.currentColumns,F=N===void 0?[]:N,h=w.dynamicSource,z=h===void 0?{}:h,X=w.relateSheetList,B=X===void 0?[]:X,x=w.conditionType,Q=w.control,i=w.type,m=w.sourceControlId,v=w.from,W=w.showCustom;return o.createElement("div",{className:Z()("worksheetFilterRelateCondition",{disabled:K})},o.createElement("div",{className:Z()("inputText",{focusInput:this.state.showUl}),onClick:function(){E.setState({showUl:!0})}},!z.length||z.length<=0?j().includes(["fastFilter"],v)?_l("\u9009\u62E9\u5DF2\u6DFB\u52A0\u7684\u7B5B\u9009\u9879"):_l("\u9009\u62E9\u5F53\u524D\u8868\u5355\u5B57\u6BB5"):j().map(z,function(P,u){if(W&&j().includes(["rowid","currenttime"],P.cid))return E.renderName(P,{controlName:j().get(j().find(A.vJ,function(G){return G.controlId===P.cid}),"controlName")},u);if(j().includes(["parent","fastFilter","navGroup"],P.rcid)){var T=j().find(E.props.globalSheetControls,function(G){return P.cid===G.controlId});return E.renderName(P,T,u,j().includes(["parent"],P.rcid))}else{var l=j().find(F,function(G){return P.cid===G.controlId});return E.renderName(P,l,u)}}),o.createElement(ce.Z,{icon:"expand_more",className:"Gray_9e moreIntro Font16"})),this.state.showUl&&o.createElement(q,{from:v,showUl:this.state.showUl,keywords:this.state.keywords,columns:F,onChangeFn:this.onChangeFn,relateSheetList:B,conditionType:x,control:Q,defaultValue:i,sourceControlId:m,showCustom:W,setKeys:function(u){E.setState({keywords:u})},onClickAwayExceptions:["dynamicSource"],onClickAway:function(){E.setState({showUl:!1,keywords:""})},globalSheetControls:this.props.globalSheetControls}))}}]),ie}(o.Component),b.propTypes={disabled:U().bool,values:U().arrayOf(U().string),onChange:U().func},b.defaultProps={values:[]},k)},19334:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>k});var ce=t(8177),g=t.n(ce),p=t(63239),L=t.n(p),te=t(85105),R=t.n(te),y=t(99663),a=t(22600),r=t(49135),o=t(93196),d=t(67294),Z=t(45697),H=t.n(Z),U=t(93967),f=t.n(U),V=t(44894),C=t(24607),O=t(44253),n=t(96486),s=t.n(n),j,A,S,I,c;function q(ee,re,ie,le,E){var w={};return Object.keys(le).forEach(function(K){w[K]=le[K]}),w.enumerable=!!w.enumerable,w.configurable=!!w.configurable,("value"in w||w.initializer)&&(w.writable=!0),w=ie.slice().reverse().reduce(function(K,N){return N(ee,re,K)||K},w),E&&w.initializer!==void 0&&(w.value=w.initializer?w.initializer.call(E):void 0,w.initializer=void 0),w.initializer===void 0&&(Object.defineProperty(ee,re,w),w=null),w}function b(ee){try{return JSON.parse(ee)}catch(re){return console.error(re),{}}}var k=(S=(c=I=function(ee){(0,o.default)(re,ee);function re(ie){(0,y.default)(this,re);var le=(0,r.default)(this,(re.__proto__||R()(re)).call(this,ie)),E=ie.fullValues,w=E===void 0?[]:E;return le.state={records:s().map(w,function(K){return b(K)}),selectRecordVisible:!1},le}return(0,a.default)(re,[{key:"addRecord",value:function(le){var E=this.props,w=E.control,K=E.onChange,N=this.state.records,F=w.relationControls,h=(this.selectSingle?[]:N.filter(function(z){return!s().find(le,function(X){return z.id===X.rowid})})).concat(le.map(function(z){return{name:(0,C.xI)(F,z),id:z.rowid}}));this.setState({records:h}),K({values:h.map(function(z){return z.id}),fullValues:h.map(function(z){return L()(z)})})}},{key:"removeRecord",value:function(le){var E=this.props.onChange,w=this.state.records,K=w.filter(function(N){return N.id!==le.id});this.setState({records:K}),E({values:K.map(function(N){return N.id}),fullValues:K.map(function(N){return L()(N)})})}},{key:"render",value:function(){var le=this,E=this.props,w=E.type,K=E.control,N=E.disabled,F=this.state,h=F.records,z=F.selectRecordVisible;return d.createElement("div",{className:"worksheetFilterRelateRecordCondition"},d.createElement("div",{className:f()("recordsCon",{disabled:N}),onClick:function(){Promise.resolve().then(t.bind(t,7891)).then(function(B){var x=B.selectRecord;x({allowNewRecord:!1,multiple:!le.selectSingle,coverCid:K.coverCid,filterRowIds:h.map(function(Q){return Q.id}),showControls:K.showControls,appId:K.appId,viewId:K.viewId,relateSheetId:K.dataSource,visible:!0,onOk:le.addRecord})})}},h.length?h.map(function(X,B){return d.createElement("div",{className:"recordItem",key:B},d.createElement("i",{className:"icon icon-link-worksheet"}),d.createElement("span",{className:"recordname"},X.name),d.createElement("span",{className:"remove",onClick:function(Q){Q.stopPropagation(),le.removeRecord(X)}},d.createElement("i",{className:"icon icon-delete"})))}):d.createElement("span",{className:"placeholder"},_l("\u8BF7\u9009\u62E9"))))}},{key:"selectSingle",get:function(){var le=this.props,E=le.type,w=le.control,K=w===void 0?{}:w;return K.enumDefault===1&&s().includes([O.W5.ARREQ,O.W5.ARRNE],E)}}]),re}(d.Component),I.propTypes={disabled:H().bool,onChange:H().func,control:H().shape({}),fullValues:H().arrayOf(H().string)},I.defaultProps={fullValues:[]},c),q(S.prototype,"addRecord",[V.Nj],g()(S.prototype,"addRecord"),S.prototype),q(S.prototype,"removeRecord",[V.Nj],g()(S.prototype,"removeRecord"),S.prototype),S)},49203:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>s});var ce=t(85105),g=t.n(ce),p=t(99663),L=t(22600),te=t(49135),R=t(93196),y=t(67294),a=t(93967),r=t.n(a),o=t(45697),d=t.n(o),Z=t(26740),H=t.n(Z),U=t(68924),f=t.n(U),V=t(96486),C=t.n(V),O,n,s=(n=O=function(j){(0,R.default)(A,j);function A(S){(0,p.default)(this,A);var I=(0,te.default)(this,(A.__proto__||g()(A)).call(this,S));return I.state={},I.debouncedChange=(0,V.debounce)(I.props.onChange,500),I}return(0,L.default)(A,[{key:"componentDidMount",value:function(){var I=this,c=this.debouncedChange;this.input&&(this.selectize=$(this.input).selectize({dropdownClass:"selectize-dropdown zIndex99 pAll10 dropdownTrigger",plugins:["remove_button"],dropdownParent:"body",placeholder:_l("\u8BF7\u8F93\u5165"),delimiter:",",persist:!1,openOnFocus:!1,maxOptions:0,maxItems:500,create:function(b){return{value:b,text:b}},render:{option_create:function(b,k){return'<div class="create ThemeColor3">'+_l("\u4F7F\u7528\u201C%0\u201D",f()(b.input))+"</div>"},item:function(b,k){return'<div class="item ellipsis TxtMiddle">'+k(b.text)+"</div>"}},onInitialize:function(){var b=this;this.$control_input[0]&&this.$control_input[0].addEventListener("paste",function(k){var ee=(k.clipboardData||window.clipboardData).getData("text");if(ee&&/\n/.test(ee)){var re=ee.split(`
`).slice(0,500);c({values:I.props.values.concat(re)}),re.forEach(function(ie){b.createItem(ie)}),k.preventDefault()}})},onChange:function(b){c({values:b?b.split(","):[]})}})[0].selectize)}},{key:"render",value:function(){var I=this,c=this.props,q=c.values,b=c.disabled;return q=q||[],y.createElement("div",{className:r()("worksheetFilterTextCondition",{disabled:b})},y.createElement("input",{type:"text",ref:function(ee){return I.input=ee},value:q.join(","),readOnly:!0}))}}]),A}(y.Component),O.propTypes={disabled:d().bool,values:d().arrayOf(d().string),onChange:d().func},O.defaultProps={values:[]},n)},42772:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>q});var ce=t(88239),g=t(68841),p=t.n(g),L=t(12528),te=t(85105),R=t.n(te),y=t(99663),a=t(22600),r=t(49135),o=t(93196),d=t(67294),Z=t(45697),H=t.n(Z),U=t(30381),f=t.n(U),V=t(43792),C=t(19458),O=t(13681),n=t(2e3),s=t(26313),j=t(44253),A=t(96486),S=t.n(A),I,c,q=(c=I=function(b){(0,o.default)(k,b);function k(ee){(0,y.default)(this,k);var re=(0,r.default)(this,(k.__proto__||R()(k)).call(this,ee));return re.state={},re}return(0,a.default)(k,[{key:"render",value:function(){var re=this.props,ie=re.control,le=ie===void 0?{}:ie,E=re.type,w=re.value,K=re.minValue,N=re.maxValue,F=re.onChange,h=getCookie("i18n_langtag")||md.global.Config.DefaultLang,z=String(le.unit),X=z==="1"?"HH:mm":"HH:mm:ss";return d.createElement("div",{className:"worksheetFilterDateCondition"},E===j.W5.DATE_BETWEEN||E===j.W5.DATE_NBETWEEN?d.createElement("div",{className:"dateRangeInputCon"},d.createElement(L.Z.RangePicker,{format:X,locale:h==="en"?O.Z:h==="ja"?n.Z:h==="zh-Hant"?C.Z:V.Z,defaultValue:K&&N?[f()(K,X),f()(N,X)]:[],popupClassName:"filterDateRangeInputPopup",onChange:function(x){(!x||!S().isArray(x))&&(x=[]),F({minValue:x[0]&&x[0].format(X),maxValue:x[1]&&x[1].format(X)})}})):d.createElement("div",{className:"customDate dateInputCon"},d.createElement(s.Z,(0,ce.default)({},le,{value:w&&f()(w,X),onChange:function(x){F({dateRange:18,value:x?f()(x,X).format(X):void 0})},compProps:{placeholder:_l("\u8BF7\u9009\u62E9")}}))))}}]),k}(d.Component),I.propTypes={disabled:H().bool,onChange:H().func,value:H().string,dateRange:H().number,minValue:H().string,maxValue:H().string,type:H().number},c)},23603:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>E});var ce=t(8177),g=t.n(ce),p=t(15759),L=t(88239),te=t(52945),R=t.n(te),y=t(63239),a=t.n(y),r=t(85105),o=t.n(r),d=t(99663),Z=t(22600),H=t(49135),U=t(93196),f=t(67294),V=t(45697),C=t.n(V),O=t(44894),n=t(93967),s=t.n(n),j=t(75809),A=t(61987),S=t(26358),I=t(44253),c=t(96486),q=t.n(c),b,k,ee,re,ie;function le(w,K,N,F,h){var z={};return Object.keys(F).forEach(function(X){z[X]=F[X]}),z.enumerable=!!z.enumerable,z.configurable=!!z.configurable,("value"in z||z.initializer)&&(z.writable=!0),z=N.slice().reverse().reduce(function(X,B){return B(w,K,X)||X},z),h&&z.initializer!==void 0&&(z.value=z.initializer?z.initializer.call(h):void 0,z.initializer=void 0),z.initializer===void 0&&(Object.defineProperty(w,K,z),z=null),z}var E=(ee=(ie=re=function(w){(0,U.default)(K,w);function K(N){(0,d.default)(this,K);var F=(0,H.default)(this,(K.__proto__||o()(K)).call(this,N));return F.changeUsers=function(h){var z=F.props.onChange;F.setState({users:h},function(){var X=h.map(function(B){return{id:B.accountId,name:B.fullname,avatar:B.avatar}}).map(function(B){return a()(B)});z({values:h.map(function(B){return B.accountId}),fullValues:X})})},F.state={users:(N.fullValues||[]).map(function(h){var z={};try{z=JSON.parse(h)}catch(X){return}return{accountId:z.id,fullname:z.name,avatar:z.avatar}}).filter(q().identity)},F}return(0,Z.default)(K,[{key:"selectUser",value:function(F,h,z,X){(0,j.Z)({title:F,sourceId:0,fromType:0,showMoreInvite:!1,SelectUserSettings:R()({},{projectId:q().find(md.global.Account.projects,function(B){return B.projectId===h})?h:"",callback:X},z)})}},{key:"addUser",value:function(){var F=this.props,h=F.projectId,z=F.from,X=z===void 0?"":z,B=F.control,x=B===void 0?{}:B,Q=F.appId,i=F.filterResigned,m=(0,S.LU)(x),v=this;this.props.disabled||(0,A.ZP)(this.userscon,(0,L.default)({showMoreInvite:!1,isTask:!1,includeUndefinedAndMySelf:!q().includes(["rule","portal","subTotal"],X),includeSystemField:!q().includes(["rule","portal","subTotal"],X)},q().includes(["rule"],X)?{prefixAccounts:[{accountId:"user-self",fullname:_l("\u5F53\u524D\u7528\u6237"),avatar:md.global.FileStoreConfig.pictureHost.replace(/\/$/,"")+"/UserAvatar/user-self.png?imageView2/1/w/100/h/100/q/90"}]}:{},{isHidAddUser:md.global.Account.isPortal,tabType:m,offset:{top:0,left:1},zIndex:10001,appId:Q,SelectUserSettings:{unique:this.selectSingle,projectId:h,filterResigned:i,callback:function(P){v.addUsers(P)}},selectCb:function(P){v.addUsers(P)}}))}},{key:"addUsers",value:function(F){var h=this.state.users,z=h.concat(F);if(this.selectSingle){this.changeUsers(F.slice(0,1));return}if(!F[0]||q().find(h,function(X){return X.accountId===F[0].accountId})){alert(_l("\u8BE5\u7528\u6237\u5DF2\u5B58\u5728"),3);return}this.changeUsers(z)}},{key:"removeUser",value:function(F){var h=this.state.users.filter(function(z){return z.accountId!==F.accountId});this.changeUsers(h)}},{key:"renderHead",value:function(F){return F.accountId==="user-self"?f.createElement("span",{className:"iconCon"},f.createElement("i",{className:"icon icon-self filterCustomUserHead"})):F.accountId==="user-sub"?f.createElement("span",{className:"iconCon"},f.createElement("i",{className:"icon icon-framework filterCustomUserHead"})):f.createElement(p.Z,{className:"userHead",user:{userHead:F.avatar,accountId:F.accountId},size:24,appId:this.props.appId,projectId:this.props.projectId})}},{key:"render",value:function(){var F=this,h=this.props.disabled,z=this.state.users;return f.createElement("div",{className:"worksheetFilterUsersCondition"},f.createElement("div",{className:s()("usersCon",{disabled:h}),ref:function(B){return F.userscon=B},onClick:this.addUser},z.length?z.map(function(X,B){return f.createElement("div",{className:"userItem",key:B},F.renderHead(X),f.createElement("span",{className:"fullname"},X.fullname),f.createElement("span",{className:"remove",onClick:function(Q){Q.stopPropagation(),F.removeUser(X)}},f.createElement("i",{className:"icon icon-delete"})))}):f.createElement("span",{className:"placeholder"},_l("\u8BF7\u9009\u62E9"))))}},{key:"selectSingle",get:function(){return q().get(this.props,"control.enumDefault")===0&&q().includes([I.W5.ARREQ,I.W5.ARRNE],this.props.type)}}]),K}(f.Component),re.propTypes={disabled:C().bool,projectId:C().string,onChange:C().func,fullValues:C().arrayOf(C().string),from:C().string},re.defaultProps={fullValues:[]},ie),le(ee.prototype,"addUser",[O.Nj],g()(ee.prototype,"addUser"),ee.prototype),le(ee.prototype,"addUsers",[O.Nj],g()(ee.prototype,"addUsers"),ee.prototype),le(ee.prototype,"removeUser",[O.Nj],g()(ee.prototype,"removeUser"),ee.prototype),ee)},33695:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>I});var ce=t(8177),g=t.n(ce),p=t(47426),L=t(85105),te=t.n(L),R=t(99663),y=t(22600),a=t(49135),r=t(93196),o=t(67294),d=t(45697),Z=t.n(d),H=t(44894),U=t(44253),f=t(62232),V=t(96486),C=t.n(V),O,n,s,j,A;function S(c,q,b,k,ee){var re={};return Object.keys(k).forEach(function(ie){re[ie]=k[ie]}),re.enumerable=!!re.enumerable,re.configurable=!!re.configurable,("value"in re||re.initializer)&&(re.writable=!0),re=b.slice().reverse().reduce(function(ie,le){return le(c,q,ie)||ie},re),ee&&re.initializer!==void 0&&(re.value=re.initializer?re.initializer.call(ee):void 0,re.initializer=void 0),re.initializer===void 0&&(Object.defineProperty(c,q,re),re=null),re}var I=(s=(A=j=function(c){(0,r.default)(q,c);function q(b){(0,R.default)(this,q);var k=(0,a.default)(this,(q.__proto__||te()(q)).call(this,b));return k.state={},k}return(0,y.default)(q,[{key:"getRadioGroupData",value:function(){var k=this.props.control;if(k.type===36){var ee=(0,f.jT)(k,{isShow:!0});return ee.map(function(re){return{text:re.value,value:Number(re.key)}})}return k.type===40?[{text:_l("\u4E3A\u7A7A"),value:0},{text:_l("\u4E0D\u4E3A\u7A7A"),value:1}]:[{text:_l("\u6709%25026"),value:1},{text:_l("\u65E0%25027"),value:0}]}},{key:"getCheckedByFilterType",value:function(k){var ee=this.props.control;return ee.type===36?k===U.W5.EQ?1:0:k===U.W5.HASVALUE?1:0}},{key:"getFilterTypeByCheckedValue",value:function(k){var ee=this.props.control;return ee.type===36?k?U.W5.EQ:U.W5.NE:k?U.W5.HASVALUE:U.W5.ISNULL}},{key:"render",value:function(){var k=this,ee=this.props,re=ee.disabled,ie=ee.control,le=ee.type,E=ee.onChange,w=this.getRadioGroupData(ie.type);return o.createElement("div",{className:"worksheetFilterYesNoCondition"},o.createElement(p.ZP,{disabled:re,data:w,checkedValue:this.getCheckedByFilterType(le),onChange:function(N){E({type:k.getFilterTypeByCheckedValue(N),value:1})},size:"small"}))}}]),q}(o.Component),j.propTypes={disabled:Z().bool,onChange:Z().func,control:Z().shape({}),type:Z().number},A),S(s.prototype,"getRadioGroupData",[H.Nj],g()(s.prototype,"getRadioGroupData"),s.prototype),S(s.prototype,"getCheckedByFilterType",[H.Nj],g()(s.prototype,"getCheckedByFilterType"),s.prototype),S(s.prototype,"getFilterTypeByCheckedValue",[H.Nj],g()(s.prototype,"getFilterTypeByCheckedValue"),s.prototype),s)},59957:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>V});var ce=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(44253);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(49203);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(33695);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(17652);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(95479);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(13867);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(23603);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(42772);if(!/^(1887|7596|7798)$/.test(t.j))var o=t(73626);if(!/^(1887|7596|7798)$/.test(t.j))var d=t(19334);if(!/^(1887|7596|7798)$/.test(t.j))var Z=t(97397);if(!/^(1887|7596|7798)$/.test(t.j))var H=t(7135);var U=t(96486),f=t.n(U);function V(C,O){if(O.isDynamicsource)return ce.createElement(H.Z,O);if(f().includes([g.W5.ISNULL,g.W5.HASVALUE,g.W5.NORMALUSER,g.W5.PORTALUSER],O.type)&&C!==g.Cz.BOOL.value)return ce.createElement(o.Z,null);if(C===g.Cz.CASCADER.value&&(O.type===g.W5.RCEQ||O.type===g.W5.RCNE||O.type===g.W5.EQ_FOR_SINGLE||O.type===g.W5.BETWEEN||O.type===g.W5.NBETWEEN))return ce.createElement(Z.Z,O);if(C===g.Cz.RELATE_RECORD.value&&(O.type===g.W5.RCEQ||O.type===g.W5.EQ_FOR_SINGLE||O.type===g.W5.RCNE||O.type===g.W5.ARREQ||O.type===g.W5.ARRNE||O.type===g.W5.ALLCONTAIN))return ce.createElement(d.Z,O);switch(C){case g.Cz.NUMBER.value:return ce.createElement(te.Z,O);case g.Cz.DATE.value:return ce.createElement(R.Z,O);case g.Cz.BOOL.value:return ce.createElement(L.Z,O);case g.Cz.OPTIONS.value:return ce.createElement(y.Z,O);case g.Cz.USERS.value:return ce.createElement(a.Z,O);case g.Cz.TIME.value:return ce.createElement(r.Z,O);default:return ce.createElement(p.Z,O)}}},44253:(lt,Te,t)=>{"use strict";t.d(Te,{AW:()=>d,Cz:()=>R,ON:()=>o,Op:()=>L,W5:()=>te,fr:()=>r,hh:()=>Z,kQ:()=>p,v8:()=>y,vJ:()=>H});var ce=t(96486),g=t.n(ce),p={PERSONAL:1,PUBLIC:2,TEMP:3},L={AND:1,OR:2},te={DEFAULT:0,LIKE:1,EQ:2,START:3,END:4,N_START:9,N_END:10,NCONTAIN:5,NE:6,ISNULL:7,HASVALUE:8,BETWEEN:11,NBETWEEN:12,GT:13,GTE:14,LT:15,LTE:16,DATEENUM:17,NDATEENUM:18,SELF:21,SELFANDSUB:22,SUB:23,RCEQ:24,RCNE:25,ARREQ:26,ARRNE:27,ALLCONTAIN:28,TEXT_ALLCONTAIN:29,DATE_BETWEEN:31,DATE_NBETWEEN:32,DATE_GT:33,DATE_GTE:34,DATE_LT:35,DATE_LTE:36,DATE_EQ:37,DATE_NE:38,NORMALUSER:41,PORTALUSER:42,EQ_FOR_SINGLE:51,NE_FOR_SINGLE:52},R={TEXT:{value:1,keys:[2,3,4,5,7,32,33]},NUMBER:{value:2,keys:[6,8,25,31,37]},BOOL:{value:3,keys:[14,21,36,40,42]},DATE:{value:4,keys:[15,16]},OPTIONS:{value:5,keys:[11,10,9,28,27,48,11,19,23,24,27]},USERS:{value:6,keys:[26]},RELATE_RECORD:{value:7,keys:[29]},CASCADER:{value:8,keys:[35]},SUBLIST:{value:9,keys:[34]},TIME:{value:10,keys:[46]}},y={TEXTAREA_INPUT_1:1,TEXTAREA_INPUT_2:2,PHONE_NUMBER_3:3,PHONE_NUMBER_4:4,EMAIL_INPUT:5,NUMBER_INPUT:6,CRED_INPUT:7,MONEY_AMOUNT_8:8,OPTIONS_9:9,OPTIONS_10:10,OPTIONS_11:11,ATTACHMENT:14,DATE_INPUT_15:15,DATE_INPUT_16:16,DATE_TIME_RANGE_17:17,DATE_TIME_RANGE_18:18,AREA_INPUT_19:19,AREA_INPUT_23:23,AREA_INPUT_24:24,RELATION:21,SPLIT_LINE:22,MONEY_CN:25,USER_PICKER:26,GROUP_PICKER:27,SCORE:28,RELATESHEET:29,SHEETFIELD:30,NEW_FORMULA_31:31,NEW_FORMULA_38:38,CONCATENATE:32,AUTOID:33,SWITCH:36,SUBTOTAL:37,LOCATION:40,RICH_TEXT:41,SIGNATURE:42,REMARK:10010,CASCADER:35,SUBLIST:34,EMBED:45,TIME:46,BARCODE:47,ORG_ROLE:48,RELATESEARCH:51,SECTION:52},a={MINUTE:1,HOUR:2,DAY:3,MONTH:4,YEAR:5,SECOND:6};function r(U){var f=U&&(U.type===9||U.type===11),V=U&&U.type===10,C=U&&(U.type===26&&U.enumDefault===0||U.controlId==="daid"),O=U&&U.type===26&&U.enumDefault===1,n=U&&U.type===27,s=n&&U.enumDefault===0,j=n&&U.enumDefault===1,A=U&&U.type===48&&U.enumDefault===0,S=U&&U.type===48&&U.enumDefault===1,I=U&&U.type===29&&U.enumDefault===1,c=U&&U.type===29&&U.enumDefault===2,q=V||O||j||S||c,b=f||C||s||A||I;return{isMultiple:q,isSingle:b}}function o(U,f,V,C){var O=U==="NUMBER",n=U==="DATE",s=V&&V.type===35,j=V&&V.type===27,A=V&&g().includes([19,23,24],V.type),S=V&&V.type===29&&V.enumDefault===2,I=r(V),c=I.isSingle,q=I.isMultiple;switch(f){case te.LIKE:return j||A?_l("\u4E0B\u7EA7\u5305\u542B%25024"):_l("\u5305\u542B%25003");case te.EQ_FOR_SINGLE:return _l("\u662F");case te.EQ:return O?"=":c||A?_l("\u662F\u5176\u4E2D\u4E00\u4E2A%25017"):q?_l("\u5305\u542B\u5176\u4E2D\u4E00\u4E2A%25021"):_l("\u7B49\u4E8E%25001");case te.START:return _l("\u5F00\u5934\u662F%25005");case te.END:return _l("\u7ED3\u5C3E\u662F%25007");case te.N_START:return _l("\u5F00\u5934\u4E0D\u662F%25006");case te.N_END:return _l("\u7ED3\u5C3E\u4E0D\u662F%25008");case te.NCONTAIN:return j||A?_l("\u4E0B\u7EA7\u4E0D\u5305\u542B%25025"):_l("\u4E0D\u5305\u542B%25004");case te.NE:return O?"\u2260":c||A?_l("\u4E0D\u662F\u4EFB\u4F55\u4E00\u4E2A%25018"):q?_l("\u4E0D\u5305\u542B\u4EFB\u4F55\u4E00\u4E2A%25022"):_l("\u4E0D\u7B49\u4E8E%25002");case te.ISNULL:return _l("\u4E3A\u7A7A%25009");case te.HASVALUE:return _l("\u4E0D\u4E3A\u7A7A%25010");case te.BETWEEN:return s||j||A?_l("\u5C5E\u4E8E%25019"):_l("\u5728\u8303\u56F4\u5185%25011");case te.NBETWEEN:return s||j||A?_l("\u4E0D\u5C5E\u4E8E%25020"):_l("\u4E0D\u5728\u8303\u56F4\u5185%25012");case te.GT:return n?_l("\u665A\u4E8E%25014"):">";case te.GTE:return"\u2265";case te.LT:return n?_l("\u65E9\u4E8E%25013"):"<";case te.LTE:return"\u2264";case te.DATE_LTE:return _l("\u65E9\u4E8E\u7B49\u4E8E%25015");case te.DATE_GTE:return _l("\u665A\u4E8E\u7B49\u4E8E%25016");case te.DATEENUM:case te.DATE_EQ:return _l("\u7B49\u4E8E%25001");case te.NDATEENUM:case te.DATE_NE:return _l("\u4E0D\u7B49\u4E8E%25002");case te.SELF:return _l("\u672C\u4EBA");case te.SELFANDSUB:return _l("\u672C\u4EBA\u548C\u4E0B\u5C5E");case te.SUB:return _l("\u4E0B\u5C5E");case te.RCEQ:return S?_l("\u5305\u542B\u5176\u4E2D\u4E00\u4E2A%25021"):_l("\u662F\u5176\u4E2D\u4E00\u4E2A%25017");case te.RCNE:return S?_l("\u4E0D\u5305\u542B\u4EFB\u4F55\u4E00\u4E2A%25022"):_l("\u4E0D\u662F\u4EFB\u4F55\u4E00\u4E2A%25018");case te.DATE_BETWEEN:return _l("\u5728\u8303\u56F4\u5185%25011");case te.DATE_NBETWEEN:return _l("\u4E0D\u5728\u8303\u56F4\u5185%25012");case te.DATE_GT:return _l("\u665A\u4E8E%25014");case te.DATE_LT:return _l("\u65E9\u4E8E%25013");case te.NORMALUSER:return _l("\u662F\u5E38\u89C4\u7528\u6237");case te.PORTALUSER:return _l("\u662F\u5916\u90E8\u95E8\u6237\u7528\u6237");case te.ARREQ:return _l("\u7B49\u4E8E%25001");case te.ARRNE:return _l("\u4E0D\u7B49\u4E8E%25002");case te.ALLCONTAIN:return _l("\u540C\u65F6\u5305\u542B%25023");case te.TEXT_ALLCONTAIN:return _l("\u540C\u65F6\u5305\u542B");default:return""}}var d=[[{text:_l("\u4ECA\u5929"),value:1},{text:_l("\u6628\u5929"),value:2},{text:_l("\u660E\u5929"),value:3}],[{text:_l("\u672C\u5468"),value:4},{text:_l("\u4E0A\u5468"),value:5},{text:_l("\u4E0B\u5468"),value:6}],[{text:_l("\u672C\u6708"),value:7},{text:_l("\u4E0A\u4E2A\u6708"),value:8},{text:_l("\u4E0B\u4E2A\u6708"),value:9}],[{text:_l("\u672C\u5B63\u5EA6"),value:12},{text:_l("\u4E0A\u5B63\u5EA6"),value:13},{text:_l("\u4E0B\u5B63\u5EA6"),value:14}],[{text:_l("\u4ECA\u5E74"),value:15},{text:_l("\u53BB\u5E74"),value:16},{text:_l("\u660E\u5E74"),value:17}],[{text:_l("\u8FC7\u53BB...\u5929"),value:10},{text:_l("\u5C06\u6765...\u5929"),value:11},{text:_l("\u8FC7\u53BB7\u5929"),value:21},{text:_l("\u8FC7\u53BB14\u5929"),value:22},{text:_l("\u8FC7\u53BB30\u5929"),value:23},{text:_l("\u5C06\u67657\u5929"),value:31},{text:_l("\u5C06\u676514\u5929"),value:32},{text:_l("\u5C06\u676530\u5929"),value:33}],[{text:_l("\u6307\u5B9A\u65F6\u95F4"),value:18}]],Z=[{value:1,text:_l("\u56FA\u5B9A\u503C")},{value:2,text:_l("\u53C2\u6570\u503C")}],H=[{controlId:"rowid",controlName:_l("\u8BB0\u5F55ID"),type:2},{controlId:"currenttime",controlName:_l("\u6B64\u523B"),type:16}]},67776:(lt,Te,t)=>{"use strict";t.d(Te,{E3:()=>n,Lq:()=>S,dA:()=>A,xx:()=>s});var ce=t(88106),g=t(8177),p=t.n(g),L=t(99663),te=t(22600),R=t(88239),y=t(7145),a=t.n(y),r=t(44894),o=t(45231),d=t(26358),Z=t(44253),H=t(96486),U=t.n(H),f,V,C;function O(I,c,q,b,k){var ee={};return Object.keys(b).forEach(function(re){ee[re]=b[re]}),ee.enumerable=!!ee.enumerable,ee.configurable=!!ee.configurable,("value"in ee||ee.initializer)&&(ee.writable=!0),ee=q.slice().reverse().reduce(function(re,ie){return ie(I,c,re)||re},ee),k&&ee.initializer!==void 0&&(ee.value=ee.initializer?ee.initializer.call(k):void 0,ee.initializer=void 0),ee.initializer===void 0&&(Object.defineProperty(I,c,ee),ee=null),ee}var n={filters:[],isGroupFilter:!1,loading:!0,needSave:!1};function s(I){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},q=void 0;if(I.isGroup)q=a()(I.conditionsGroups||[],{$apply:function(ee){return ee.map(function(re){return{spliceType:re.spliceType,isGroup:!0,groupFilters:re.conditions.filter(function(ie){return c.noCheck?!0:(0,d.qt)(ie)}).map(function(ie){return(0,R.default)({},(0,d.sq)(ie,re.conditionSpliceType,c))})}}).filter(function(re){return c.noCheck||!U().isEmpty(re.groupFilters)})}});else{var b=U().get(I,"conditionsGroups.0.conditions");U().isEmpty(b)?q=[]:q=b.filter(function(k){return c.noCheck?!0:(0,d.qt)(k)}).map(function(k){return(0,d.sq)(k,I.conditionsGroups[0].conditionSpliceType,c)})}return q}var j=(C=function(){function I(c){(0,L.default)(this,I),this.dispatch=c}return(0,te.default)(I,[{key:"init",value:function(q){this.dispatch({type:"INIT",value:q})}},{key:"setActiveFilter",value:function(q){this.dispatch({type:"UPDATE",value:{activeFilter:q}})}},{key:"loadFilters",value:function(q){var b=this,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};o.Z.getWorksheetFilters({worksheetId:q}).then(function(ee){var re=ee.map(d.ow);md.global.Account.isPortal&&(re=re.filter(function(ie){return ie.type!==2})),k(re),b.dispatch({type:"UPDATE",value:{filters:re,loading:!1}})})}},{key:"addFilter",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=q.defaultCondition,k={id:"new-"+new Date().getTime().toString(16)+"-"+Math.random().toString(16).slice(2),isGroup:!0,name:_l("\u81EA\u5B9A\u4E49\u7B5B\u9009"),type:1,conditionsGroups:[{spliceType:Z.Op.AND,conditionSpliceType:Z.Op.AND,conditions:b?[b]:[]}],conditions:[]};this.dispatch({type:"UPDATE",value:{editingFilter:k}})}},{key:"editFilter",value:function(q){this.dispatch({type:"UPDATE",value:{editingFilter:q,needSave:!1}})}},{key:"changeEditingFilter",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.dispatch({type:"CHANGE_EDITING_FILTER",value:q})}},{key:"addCondition",value:function(q){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,k=arguments[2],ee=(0,d.z$)(q,k);this.dispatch({type:"ADD_CONDITION",condition:ee,groupIndex:b})}},{key:"updateCondition",value:function(q){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,k=arguments[2];this.dispatch({type:"UPDATE_CONDITION",conditionIndex:k,groupIndex:b,value:q})}},{key:"deleteCondition",value:function(q){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.dispatch({type:"DELETE_CONDITION",conditionIndex:q,groupIndex:b})}},{key:"deleteConditionsGroup",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.dispatch({type:"DELETE_CONDITIONS_GROUP",groupIndex:q})}},{key:"addGroup",value:function(q){this.dispatch({type:"ADD_GROUP",group:{spliceType:q||Z.Op.AND,conditionSpliceType:Z.Op.AND,conditions:[]}})}},{key:"deleteGroup",value:function(q){this.dispatch({type:"DELETE_GROUP",groupIndex:q})}},{key:"updateConditionsGroup",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.dispatch({type:"UPDATE_CONDITIONS_GROUP",groupIndex:b,value:q})}},{key:"copyFilter",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=q.appId,k=q.worksheetId,ee=q.filter,re=q.isCharge,ie=(0,R.default)({},ee,{id:void 0,type:re&&ee.type===Z.kQ.PUBLIC?Z.kQ.PUBLIC:Z.kQ.PERSONAL,name:_l("%0-\u590D\u5236",ee.name)});this.saveFilter({appId:b,worksheetId:k,filter:ie})}},{key:"toggleFilterType",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=q.appId,k=q.worksheetId,ee=q.filter,re=(0,R.default)({},ee,{type:ee.type===Z.kQ.PUBLIC?Z.kQ.PERSONAL:Z.kQ.PUBLIC});this.saveFilter({appId:b,worksheetId:k,filter:re})}},{key:"saveFilter",value:function(q){var b=this,k=q.appId,ee=q.worksheetId,re=q.filter,ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},le=!re.id||re.id.startsWith("new"),E=s(re);o.Z.saveWorksheetFilter({appId:k,filterId:le?void 0:re.id,name:re.name,type:re.type,worksheetId:ee,items:E}).then(function(w){le?b.dispatch({type:"ADD_FILTER",filter:(0,d.ow)(w)}):b.dispatch({type:"UPDATE_FILTER",filter:(0,d.ow)(w)}),ie((0,d.ow)(w)),b.dispatch({type:"UPDATE",value:{editingFilter:void 0,needSave:!1}}),alert(_l("\u4FDD\u5B58\u6210\u529F\uFF01"))})}},{key:"deleteFilter",value:function(q){var b=this,k=q.appId,ee=q.filter,re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};o.Z.deleteWorksheetFilter({appId:k,filterId:ee.id}).then(function(ie){ie?(b.dispatch({type:"DELETE_FILTER",filterId:ee.id}),b.dispatch({type:"UPDATE",value:{editingFilter:void 0,needSave:!1}})):alert(_l("\u5220\u9664\u5931\u8D25"),3)})}},{key:"sortFilters",value:function(q,b,k){o.Z.sortWorksheetFilters({appId:q,worksheetId:b,filterIds:k}),this.dispatch({type:"SORT_FILTERS",ids:k})}}]),I}(),O(C.prototype,"setActiveFilter",[r.Nj],p()(C.prototype,"setActiveFilter"),C.prototype),O(C.prototype,"loadFilters",[r.Nj],p()(C.prototype,"loadFilters"),C.prototype),O(C.prototype,"addFilter",[r.Nj],p()(C.prototype,"addFilter"),C.prototype),O(C.prototype,"editFilter",[r.Nj],p()(C.prototype,"editFilter"),C.prototype),O(C.prototype,"changeEditingFilter",[r.Nj],p()(C.prototype,"changeEditingFilter"),C.prototype),O(C.prototype,"addCondition",[r.Nj],p()(C.prototype,"addCondition"),C.prototype),O(C.prototype,"updateCondition",[r.Nj],p()(C.prototype,"updateCondition"),C.prototype),O(C.prototype,"deleteCondition",[r.Nj],p()(C.prototype,"deleteCondition"),C.prototype),O(C.prototype,"deleteConditionsGroup",[r.Nj],p()(C.prototype,"deleteConditionsGroup"),C.prototype),O(C.prototype,"addGroup",[r.Nj],p()(C.prototype,"addGroup"),C.prototype),O(C.prototype,"deleteGroup",[r.Nj],p()(C.prototype,"deleteGroup"),C.prototype),O(C.prototype,"updateConditionsGroup",[r.Nj],p()(C.prototype,"updateConditionsGroup"),C.prototype),O(C.prototype,"copyFilter",[r.Nj],p()(C.prototype,"copyFilter"),C.prototype),O(C.prototype,"toggleFilterType",[r.Nj],p()(C.prototype,"toggleFilterType"),C.prototype),O(C.prototype,"saveFilter",[r.Nj],p()(C.prototype,"saveFilter"),C.prototype),O(C.prototype,"deleteFilter",[r.Nj],p()(C.prototype,"deleteFilter"),C.prototype),O(C.prototype,"sortFilters",[r.Nj],p()(C.prototype,"sortFilters"),C.prototype),C);function A(I){return new j(I)}function S(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments[1];function q(b,k){return U().isEmpty(k)?b:a()(b,(0,R.default)({},k,{lastAction:{$set:c.type+Date.now()}}))}switch(c.type){case"INIT":case"UPDATE":return q(I,{$apply:function(k){return(0,R.default)({},k,c.value||{})}});case"ADD_FILTER":return q(I,{filters:{$push:[c.filter]}});case"UPDATE_FILTER":return q(I,{filters:{$apply:function(k){return k.map(function(ee){return ee.id===c.filter.id?c.filter:ee})}}});case"DELETE_FILTER":return q(I,{filters:{$apply:function(k){return k.filter(function(ee){return ee.id!==c.filterId})}}});case"CHANGE_EDITING_FILTER":return q(I,{needSave:{$set:!U().get(c,"value.name")},nameIsUpdated:{$set:!!U().get(c,"value.name")},editingFilterVersion:{$set:Math.random()},editingFilter:{$merge:c.value}});case"ADD_CONDITION":return q(I,{needSave:{$set:!0},editingFilterVersion:{$set:Math.random()},editingFilter:{conditionsGroups:(0,ce.default)({},c.groupIndex,{conditions:{$push:[c.condition]}})}});case"UPDATE_CONDITION":return q(I,{needSave:{$set:!0},editingFilterVersion:{$set:Math.random()},editingFilter:{conditionsGroups:(0,ce.default)({},c.groupIndex,{conditions:(0,ce.default)({},c.conditionIndex,{$apply:function(k){return q(k,{$merge:c.value})}})})}});case"UPDATE_CONDITIONS_GROUP":return q(I,{needSave:{$set:!0},editingFilterVersion:{$set:Math.random()},editingFilter:{conditionsGroups:c.groupIndex==="*"?{$apply:function(k){return k.map(function(ee){return(0,R.default)({},ee,c.value||{})})}}:(0,ce.default)({},c.groupIndex,{$apply:function(k){return q(k,{$merge:c.value})}})}});case"DELETE_CONDITION":return q(I,{needSave:{$set:!0},editingFilterVersion:{$set:Math.random()},editingFilter:{conditionsGroups:(0,ce.default)({},c.groupIndex,{conditions:{$splice:[[c.conditionIndex,1]]}})}});case"DELETE_CONDITIONS_GROUP":return q(I,{needSave:{$set:!0},editingFilterVersion:{$set:Math.random()},editingFilter:{conditionsGroups:{$splice:[[c.groupIndex,1]]}}});case"UPDATE_FILTERS":return q(I,{filters:{$set:c.value}});case"UPDATE_LOADING":return q(I,{loading:{$set:c.value}});case"ADD_GROUP":return q(I,{needSave:{$set:!0},editingFilterVersion:{$set:Math.random()},editingFilter:{isGroup:{$set:!0},conditionsGroups:{$push:[c.group]}}});case"DELETE_GROUP":return q(I,{needSave:{$set:!0},editingFilterVersion:{$set:Math.random()},editingFilter:{conditionsGroups:{$splice:[[c.groupIndex,1]]}}});case"SORT_FILTERS":return q(I,{filters:{$apply:function(k){return c.ids.map(function(ee){return U().find(k,{id:ee})}).filter(U().identity)}}});default:return I}}},26358:(lt,Te,t)=>{"use strict";t.d(Te,{BM:()=>N,Gt:()=>I,Io:()=>S,LU:()=>x,Nt:()=>ie,Ou:()=>E,P0:()=>F,Pf:()=>ee,QZ:()=>A,aJ:()=>q,ow:()=>b,pW:()=>Q,qt:()=>re,sq:()=>s,z$:()=>K,zK:()=>h});var ce=t(63239),g=t.n(ce),p=t(52945),L=t.n(p),te=t(85315),R=t(88902),y=t.n(R),a=t(88239),r=t(96486),o=t.n(r),d=t(30381),Z=t.n(d);if(!/^(1887|7596|7798)$/.test(t.j))var H=t(83298);if(!/^(1887|7596|7798)$/.test(t.j))var U=t(89499);if(!/^(1887|7596|7798)$/.test(t.j))var f=t(1178);if(!/^(1887|7596|7798)$/.test(t.j))var V=t(86674);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(94914);if(!/^(1887|7596|7798)$/.test(t.j))var O=t(34498);if(!/^(1887|7596)$/.test(t.j))var n=t(44253);function s(i,m){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},W=i.controlId,P=i.values,u=i.controlType,l=v.returnFullValues;return o().get(i,"control")&&u===25&&(u=8,W=i.control.dataSource.slice(1,-1)),{controlId:W,dataType:u,spliceType:m,filterType:i.type,dateRange:i.dateRange,dateRangeType:i.dateRangeType,maxValue:i.maxValue,minValue:i.minValue,isDynamicsource:i.isDynamicsource,dynamicSource:i.dynamicSource||[],value:i.value,values:l&&o().includes([26,27,29,19,23,24,35,48],u)&&!o().isEmpty(P)?i.fullValues:P}}function j(i,m){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];function W(P){try{return JSON.parse(P)}catch(u){return console.error(u),{}}}try{if(o().includes([n.W5.ISNULL,n.W5.HASVALUE,n.W5.NORMALUSER,n.W5.PORTALUSER],m))return v;if(o().includes([26,27,19,23,24,29,35,48],i))return v.map(function(P){return W(P).id}).filter(o().identity)}catch(P){}return v}function A(i){return i.isGroup&&i.groupFilters?(0,a.default)({},i,{groupFilters:i.groupFilters.map(function(m){return(0,a.default)({},m,{values:j(m.dataType,m.filterType,m.values)})})}):(0,a.default)({},i,{values:j(i.dataType,i.filterType,i.values)})}function S(i){var m=y()(n.Cz),v=o().find(m,function(W){return o().includes(n.Cz[W].keys,i)});return v}function I(i){return i.map(function(m){return m.isGroup&&m.groupFilters?(0,a.default)({},m,{groupFilters:m.groupFilters.map(function(v){return(0,a.default)({},v,{values:j(v.dataType,v.filterType,v.values)})})}):(0,a.default)({},m,{values:j(m.dataType,m.filterType,m.values)})})}function c(i){return i.map(function(m){var v=(n.Cz[S(m.dataType)]||{}).value;return{controlId:m.controlId,controlType:m.dataType,conditionGroupType:v,keyStr:m.controlId+Math.random().toString(16).slice(2),type:m.filterType,dateRange:m.dateRange,dateRangeType:m.dateRangeType,spliceType:m.spliceType,maxValue:m.maxValue,minValue:m.minValue,value:m.value,fullValues:m.values,values:j(m.dataType,m.filterType,m.values),folded:m.folded,dynamicSource:m.dynamicSource||[],isDynamicsource:m.isDynamicsource}})}function q(i){i=typeof i=="string"?JSON.parse(i):i;var m=i.items||[],v={id:i.filterId,name:i.name,type:i.type,createAccountId:i.createAccountId,relationType:m[0]?m[0].spliceType:n.Op.AND,conditions:c(m)};return v}function b(i){i=typeof item=="string"?JSON.parse(i):i;var m=o().get(i,"items")||[],v=m[0]&&m[0].isGroup,W={id:i.filterId||"",name:i.name,type:i.type,createAccountId:i.createAccountId,isGroup:v};return v?W.conditionsGroups=m.map(function(P){return(0,a.default)({},P,{conditionSpliceType:o().get(P,"groupFilters.0.spliceType")||n.Op.AND,conditions:c(P.groupFilters)})}):W.conditionsGroups=[{spliceType:n.Op.AND,conditionSpliceType:o().get(m,"0.spliceType")||n.Op.AND,conditions:c(m)}],W}function k(i){var m=i.conditions;return m&&m.length&&_.every(m,function(v){return re(v)})}function ee(i){var m=[].concat((0,te.Z)(i));return m=m.map(function(v){return v.isGroup&&v.groupFilters&&(v.groupFilters=v.groupFilters.filter(re)),v}),m.filter(function(v){return v.isGroup?!!v.groupFilters.length:re(v)})}function re(i){var m=i.conditionGroupType,v=i.type,W=i.value,P=i.values,u=i.minValue,l=i.maxValue,T=i.dateRange,G=i.dynamicSource,D=G===void 0?[]:G,M=i.isDynamicsource,se=M===void 0?!1:M;if(D.length>0&&se)return!(o().get(D[0],"rcid")==="url"&&!o().get(D[0],"cid"));if(o().includes([n.W5.ISNULL,n.W5.HASVALUE,n.W5.NORMALUSER,n.W5.PORTALUSER],v))return!0;switch(m){case n.Cz.TEXT.value:return P&&P.length;case n.Cz.NUMBER.value:return v===n.W5.BETWEEN||v===n.W5.NBETWEEN?u&&l:!o().isUndefined(W);case n.Cz.BOOL.value:return!0;case n.Cz.DATE.value:case n.Cz.TIME.value:return v===n.W5.DATE_BETWEEN||v===n.W5.DATE_NBETWEEN?!o().isUndefined(u)&&!o().isUndefined(l):T===10||T===11||T===18?!o().isUndefined(W)&&!o().isUndefined(W):!o().isUndefined(T);case n.Cz.OPTIONS.value:case n.Cz.USERS.value:case n.Cz.RELATE_RECORD.value:case n.Cz.CASCADER.value:return P&&P.length;default:return!1}}function ie(i,m,v){var W=m.conditionGroupType,P=m.value,u=m.values,l=m.dateRange,T=m.dateRangeType,G=m.fullValues,D=(0,a.default)({type:i,values:[],maxValue:void 0,minValue:void 0,value:void 0,dateRange:0,dateRangeType:1,dynamicSource:v===2?[{cid:"",rcid:"url",staticValue:""}]:[],isDynamicsource:!1},o().isUndefined(G)?{}:{fullValues:o().isEmpty(u)?[]:G});if(i===n.W5.ISNULL||i===n.W5.HASVALUE)return D;switch(W){case n.Cz.TEXT.value:return L()({},D,{values:u});case n.Cz.NUMBER.value:return i===n.W5.BETWEEN||i===n.W5.NBETWEEN?L()({},D,{minValue:P}):L()({},D,{value:P});case n.Cz.BOOL.value:return D;case n.Cz.DATE.value:return i===n.W5.DATE_BETWEEN||i===n.W5.DATE_NBETWEEN?L()({},D,{minValue:Z()().add(-1,"day").startOf("day").format("YYYY-MM-DD HH:mm:ss"),maxValue:Z()().endOf("day").format("YYYY-MM-DD HH:mm:ss"),dateRange:l,dateRangeType:T}):L()({},D,{dateRange:l||1,value:o().includes([10,11],l)?P:B({type:i,value:P}),dateRangeType:T||1});case n.Cz.OPTIONS.value:case n.Cz.USERS.value:case n.Cz.RELATE_RECORD.value:case n.Cz.CASCADER.value:return L()({},D,{values:u});default:return D}}function le(i,m){return!!(i.data&&i.data.type===m||i.typeArr&&i.typeArr.map(function(v){return v.type}).indexOf(m)>-1)}function E(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=arguments[1],v=arguments[2],W=[],P=i.type,u=i.advancedSetting,l=u===void 0?{}:u,T=S(P);switch(P){case 2:case 3:case 4:case 5:case 7:case 32:case 33:W=[n.W5.EQ,n.W5.NE,n.W5.LIKE,n.W5.TEXT_ALLCONTAIN,n.W5.NCONTAIN,n.W5.START,n.W5.N_START,n.W5.END,n.W5.N_END,n.W5.ISNULL,n.W5.HASVALUE];break;case 6:case 8:case 25:case 31:case 37:W=[n.W5.EQ,n.W5.NE,n.W5.GT,n.W5.LT,n.W5.GTE,n.W5.LTE,n.W5.BETWEEN,n.W5.NBETWEEN,n.W5.ISNULL,n.W5.HASVALUE];break;case 14:case 21:case 36:case 40:case 42:W=[n.W5.HASVALUE,n.W5.ISNULL];break;case 28:W=[n.W5.EQ,n.W5.NE,n.W5.ISNULL,n.W5.HASVALUE];break;case 48:W=[n.W5.ARREQ,n.W5.ARRNE].concat((0,te.Z)(i.enumDefault===1?[]:[n.W5.EQ_FOR_SINGLE]),[n.W5.EQ,n.W5.NE],(0,te.Z)(i.enumDefault===1?[n.W5.ALLCONTAIN]:[]),[n.W5.ISNULL,n.W5.HASVALUE]);break;case 11:case 10:case 9:W=[n.W5.ARREQ,n.W5.ARRNE].concat((0,te.Z)(P===10?[]:[n.W5.EQ_FOR_SINGLE]),[n.W5.EQ,n.W5.NE],(0,te.Z)(P===10?[n.W5.ALLCONTAIN]:[]),[n.W5.ISNULL,n.W5.HASVALUE]);break;case 15:case 16:W=[].concat((0,te.Z)(P===15?[n.W5.DATEENUM,n.W5.NDATEENUM]:[n.W5.DATE_EQ,n.W5.DATE_NE]),[n.W5.DATE_LT,n.W5.DATE_GT,n.W5.DATE_LTE,n.W5.DATE_GTE,n.W5.DATE_BETWEEN,n.W5.DATE_NBETWEEN,n.W5.ISNULL,n.W5.HASVALUE]);break;case 19:case 23:case 24:W=[n.W5.EQ,n.W5.NE,n.W5.BETWEEN,n.W5.NBETWEEN].concat((0,te.Z)(v==="rule"?[]:[n.W5.LIKE,n.W5.NCONTAIN]),[n.W5.EQ_FOR_SINGLE,n.W5.ISNULL,n.W5.HASVALUE]);break;case 26:W=[n.W5.ARREQ,n.W5.ARRNE].concat((0,te.Z)(i.enumDefault===1?[]:[n.W5.EQ_FOR_SINGLE]),[n.W5.EQ,n.W5.NE],(0,te.Z)(i.enumDefault===1?[n.W5.ALLCONTAIN]:[]),[n.W5.ISNULL,n.W5.HASVALUE]).concat(o().includes(["caid","ownerid"],i.controlId)&&v!=="rule"&&!o().get(window,"md.global.Account.isPortal")?[n.W5.NORMALUSER,n.W5.PORTALUSER]:[]);break;case 27:W=[n.W5.ARREQ,n.W5.ARRNE].concat((0,te.Z)(i.enumDefault===1?[]:[n.W5.EQ_FOR_SINGLE]),[n.W5.EQ,n.W5.NE,n.W5.BETWEEN,n.W5.NBETWEEN],(0,te.Z)(v==="rule"?[]:[n.W5.LIKE,n.W5.NCONTAIN]),(0,te.Z)(i.enumDefault===1?[n.W5.ALLCONTAIN]:[]),[n.W5.ISNULL,n.W5.HASVALUE]);break;case 35:W=[n.W5.RCEQ,n.W5.RCNE,n.W5.EQ_FOR_SINGLE,n.W5.BETWEEN,n.W5.NBETWEEN,n.W5.ISNULL,n.W5.HASVALUE];break;case 29:W=o().includes(["2","5","6"],l.showtype)&&v==="rule"?[n.W5.ISNULL,n.W5.HASVALUE]:m&&(m===n.W5.LIKE||m===n.W5.NCONTAIN)?[n.W5.ARREQ,n.W5.ARRNE].concat((0,te.Z)(i.enumDefault===2?[]:[n.W5.EQ_FOR_SINGLE]),[n.W5.LIKE,n.W5.NCONTAIN,n.W5.RCEQ,n.W5.RCNE],(0,te.Z)(i.enumDefault===2?[n.W5.ALLCONTAIN]:[]),[n.W5.ISNULL,n.W5.HASVALUE]):[n.W5.ARREQ,n.W5.ARRNE].concat((0,te.Z)(i.enumDefault===2?[]:[n.W5.EQ_FOR_SINGLE]),[n.W5.RCEQ,n.W5.RCNE],(0,te.Z)(i.enumDefault===2?[n.W5.ALLCONTAIN]:[]),[n.W5.ISNULL,n.W5.HASVALUE]);break;case 34:W=[n.W5.ISNULL,n.W5.HASVALUE];break;case 46:W=[n.W5.DATEENUM,n.W5.NDATEENUM,n.W5.DATE_LT,n.W5.DATE_GT,n.W5.DATE_LTE,n.W5.DATE_GTE,n.W5.DATE_BETWEEN,n.W5.DATE_NBETWEEN,n.W5.ISNULL,n.W5.HASVALUE];break;default:W=[]}return v==="subTotal"&&(W=W.filter(function(G){return G!==n.W5.ALLCONTAIN})),i.encryId&&(W=[n.W5.EQ,n.W5.NE,n.W5.ISNULL,n.W5.HASVALUE]),W.map(function(G){return{value:G,text:(0,n.ON)(T,G,i)}})}function w(i,m){var v=(0,n.fr)(i),W=v.isMultiple;if(o().includes([2,3,4,5,7,32,33],i.type))return n.W5.EQ;if(o().includes([6,8,25,31,37],i.type))return n.W5.BETWEEN;if(o().includes([15,46],i.type))return n.W5.DATEENUM;if(i.type===16)return n.W5.DATE_EQ;if(o().includes([15,46],i.type))return n.W5.DATEENUM;if(i.type===29&&W&&m!=="rule")return n.W5.RCEQ;if(o().includes([29,35,9,10,11,19,23,24,26,27,48],i.type))return W?n.W5.EQ:n.W5.EQ_FOR_SINGLE}function K(i,m){var v=S(i.type),W=n.Cz[v]&&n.Cz[v].value,P=E(i),u=w(i,m)||n.W5.EQ||P[0].value;(o().isUndefined(u)||!o().find(P,function(T){return T.value===u}))&&(u=P[0].value);var l={controlId:i.controlId,controlType:i.type,keyStr:i.controlId+Math.random().toString(16).slice(2),control:i,conditionGroupType:W,type:W===n.Cz.BOOL.value?n.W5.HASVALUE:u};return W===n.Cz.BOOL.value&&i.type===36&&(l.type=n.W5.EQ,l.value=1),l}function N(i){if(i.type===37)return(0,a.default)({},i,{type:i.enumDefault2||6,originType:i.type});if(i.type===30){var m=i.sourceControlType;return m===37&&(m=i.enumDefault2),m===38&&(m=6),(0,a.default)({},i,{type:m,originType:i.type})}return i.type===38?(0,a.default)({},i,{type:i.enumDefault===2?15:6,originType:i.type}):i.type===50?(0,a.default)({},i,{type:2,originType:i.type}):(0,a.default)({},i)}function F(i,m,v,W){if(W===n.W5.ISNULL||W===n.W5.HASVALUE||(W===n.W5.BETWEEN||W===n.W5.NBETWEEN)&&!o().includes([n.v8.GROUP_PICKER,n.v8.AREA_INPUT_19,n.v8.AREA_INPUT_23,n.v8.AREA_INPUT_24],i))return[];var P=[];switch(i){case n.v8.TEXTAREA_INPUT_1:case n.v8.TEXTAREA_INPUT_2:case n.v8.CONCATENATE:case n.v8.AUTOID:return P=[n.v8.SWITCH,n.v8.RELATION,n.v8.SCORE,n.v8.SHEETFIELD,n.v8.SPLIT_LINE,n.v8.REMARK,n.v8.RICH_TEXT,n.v8.OPTIONS_9,n.v8.OPTIONS_10,n.v8.OPTIONS_11,n.v8.AREA_INPUT_24,n.v8.AREA_INPUT_19,n.v8.AREA_INPUT_23,n.v8.USER_PICKER,n.v8.GROUP_PICKER,n.v8.ATTACHMENT,n.v8.SIGNATURE,n.v8.RELATESHEET,n.v8.SUBTOTAL,n.v8.SUBLIST,n.v8.EMBED,n.v8.BARCODE,n.v8.CASCADER,n.v8.RELATESEARCH,n.v8.SECTION],o().filter(m,function(u){return!o().includes(P,u.type)});case n.v8.PHONE_NUMBER_3:case n.v8.PHONE_NUMBER_4:case n.v8.CRED_INPUT:case n.v8.EMAIL_INPUT:return P=[n.v8.PHONE_NUMBER_3,n.v8.PHONE_NUMBER_4,n.v8.CRED_INPUT,n.v8.TEXTAREA_INPUT_1,n.v8.TEXTAREA_INPUT_2,n.v8.EMAIL_INPUT],o().filter(m,function(u){return o().includes(P,u.type)});case n.v8.NUMBER_INPUT:case n.v8.MONEY_AMOUNT_8:case n.v8.MONEY_CN:case n.v8.NEW_FORMULA_31:return P=[n.v8.MONEY_AMOUNT_8,n.v8.MONEY_CN,n.v8.NEW_FORMULA_31,n.v8.SUBTOTAL,n.v8.AUTOID,n.v8.NUMBER_INPUT],o().filter(o().filter(m,function(u){return o().includes(P,u.type)}),function(u){return!o().includes([n.v8.SUBTOTAL],u.type)||u.type===n.v8.SUBTOTAL&&u.enumDefault2===6});case n.v8.SUBTOTAL:return v.enumDefault2===6?(P=[n.v8.MONEY_AMOUNT_8,n.v8.MONEY_CN,n.v8.NEW_FORMULA_31,n.v8.SUBTOTAL,n.v8.AUTOID],o().filter(o().filter(m,function(u){return o().includes(P,u.type)}),function(u){return!o().includes([n.v8.SUBTOTAL],u.type)||u.type===n.v8.SUBTOTAL&&v.enumDefault2===u.enumDefault2})):(P=[n.v8.DATE_INPUT_15,n.v8.DATE_INPUT_16,n.v8.NEW_FORMULA_38,n.v8.SUBTOTAL],o().filter(o().filter(m,function(u){return o().includes(P,u.type)}),function(u){return!o().includes([n.v8.SUBTOTAL],u.type)||u.type===n.v8.SUBTOTAL&&v.enumDefault2===u.enumDefault2}));case n.v8.DATE_INPUT_15:case n.v8.DATE_INPUT_16:case n.v8.NEW_FORMULA_38:return P=[n.v8.DATE_INPUT_15,n.v8.DATE_INPUT_16,n.v8.NEW_FORMULA_38,n.v8.SUBTOTAL],o().filter(o().filter(m,function(u){return o().includes(P,u.type)}),function(u){return!o().includes([n.v8.SUBTOTAL],u.type)||u.type===n.v8.SUBTOTAL&&u.enumDefault2!==6});case n.v8.OPTIONS_9:case n.v8.OPTIONS_10:case n.v8.OPTIONS_11:return P=[n.v8.OPTIONS_9,n.v8.OPTIONS_10,n.v8.OPTIONS_11],o().filter(m,function(u){return o().includes(P,u.type)&&u.dataSource===v.dataSource});case n.v8.RELATESHEET:case n.v8.CASCADER:return P=[n.v8.RELATESHEET,n.v8.CASCADER],o().filter(m,function(u){return o().includes(P,u.type)&&u.dataSource===v.dataSource&&!(u.type===29&&o().includes(["2","5","6"],o().get(u,"advancedSetting.showtype")))});case n.v8.USER_PICKER:return o().filter(m,function(u){return u.type===n.v8.USER_PICKER});case n.v8.GROUP_PICKER:return o().filter(m,function(u){return u.type===n.v8.GROUP_PICKER});case n.v8.ORG_ROLE:return o().filter(m,function(u){return u.type===n.v8.ORG_ROLE});case n.v8.AREA_INPUT_24:case n.v8.AREA_INPUT_19:case n.v8.AREA_INPUT_23:case n.v8.SWITCH:case n.v8.ATTACHMENT:return[];case n.v8.SCORE:return o().filter(m,function(u){return u.type===n.v8.SCORE});case n.v8.TIME:return o().filter(m,function(u){return o().includes([n.v8.TIME,n.v8.DATE_INPUT_16],u.type)});default:return m}}function h(i){var m=i.control,v=i.formData,W=v===void 0?[]:v,P=i.filterKey,u=P===void 0?"filters":P;if(!m||o().isEmpty(m.advancedSetting)||o().isEmpty(m.advancedSetting[u])||m.advancedSetting[u]==="[]")return[];var l=void 0;try{l=JSON.parse(m.advancedSetting[u])}catch(D){return[]}function T(D){return o().isEmpty(D.dynamicSource)?L()({},D,{values:j(D.dataType,D.filterType,D.values)}):(o().includes([V.DN.DATE,V.DN.DATE_TIME,V.DN.TIME],D.dataType)?D.dateRange=18:D.dateRange=0,X({condition:D,formData:W,relateControl:m,ignoreFilterControl:m.ignoreFilterControl}))}l=l.map(function(D){if(D.isGroup&&D.groupFilters){var M=D.groupFilters.map(T);return o().get(D,"groupFilters.0.spliceType")===1?M.filter(function(se){return!se}).length?!1:(0,a.default)({},D,{groupFilters:M}):(0,a.default)({},D,{groupFilters:M.filter(o().identity)})}else return T(D)});var G=l.filter(o().identity);return G.length?G[0].spliceType===1?G.length===l.length?G:!1:G:!1}function z(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,U.s6)(i.type)?i.filterValue.value?{values:[i.filterValue.value]}:i.filterValue:i.filterValue||{}}function X(i){var m=i.condition,v=i.formData,W=i.relateControl,P=i.ignoreFilterControl,u=P===void 0?!1:P,l=m.dataType,T=m.controlId,G=m.dynamicSource[0],D=[{controlId:"ownerid",controlName:_l("\u62E5\u6709\u8005"),type:26},{controlId:"caid",controlName:_l("\u521B\u5EFA\u4EBA"),type:26},{controlId:"ctime",controlName:_l("\u521B\u5EFA\u65F6\u95F4"),type:16},{controlId:"utime",controlName:_l("\u6700\u8FD1\u4FEE\u6539\u65F6\u95F4"),type:16}],M=o().find((W.relationControls||[]).concat(D),function(ye){return ye.controlId===T});if(!(!G||!M&&!u)){var se=G.rcid,ae=G.cid;if(ae){if((ae==="current-rowid"||ae==="rowid")&&!o().includes(["fastFilter","navGroup"],se))return W.recordId?(m.values=[W.recordId],m):void 0;if(ae==="currenttime")return M.type===46?m.value=Z()(new Date).format(M.unit==="6"||M.unit==="9"?"HH:mm:ss":"HH:mm"):m.value=Z()(new Date).format((0,C.eO)(M).formatMode),m;var ne=void 0;if(ne=o().find(v,function(ye){return ye&&ye.controlId===(o().includes(["fastFilter","navGroup"],se)?se+"_":"")+ae}),!!ne){if(ne.filterValue){var de=(0,a.default)({},m,z(ne));return(0,O.Gu)(de)||de.filterType===7?de:!1}var Ce=ne,he=Ce.type,fe=(0,U.zi)({cid:(o().includes(["fastFilter","navGroup"],se)?se+"_":"")+ae,data:v});if(fe){if(l===2||l===32||l===3||l===7||l===5)m.values=[(0,H.Z)((0,a.default)({},ne,{value:fe}),{noMask:!0})];else if(l===6||l===8||l===31||l===46)m.value=fe;else if(l===15||l===16)try{m.value=Z()(fe).format((0,C.eO)((0,a.default)({},ne,{value:fe})).formatMode)}catch(ye){m.value=fe,console.error(ye)}else if(l===9||l===11||l===10)if(he===9||he===11){var Ee=(0,f.Rc)(ne.options,fe)[0];if(!Ee)m.values=[];else{var Y=(o().get(M,"options")||[]).filter(function(ye){return ye.key===Ee.key});Y.length?m.values=Y.map(function(ye){return ye.key}):m.values=["999999"]}}else if(he===10){var oe=(0,f.Rc)(ne.options,fe);if(!oe.length)m.values=[];else{var ve=(o().get(M,"options")||[]).filter(function(ye){return o().find(oe.map(function(J){return J.value}),function(J){return J===ye.value})});ve.length?m.values=ve.map(function(ye){return ye.key}):m.values=["999999"]}}else m.values=(o().get(M,"options")||[]).filter(function(ye){return ye.value.indexOf(fe)>-1}).map(function(ye){return ye.key});else if(l===29||l===35){try{m.values=(o().isObject(fe)?fe.records:JSON.parse(fe)).map(function(ye){return ye.sid||ye.rowid}).filter(o().identity)}catch(ye){m.values=[]}if(o().isEmpty(m.values))return}else if(l===26){try{var ue=JSON.parse(fe);m.values=ue.map(function(ye){return ye.accountId}).filter(o().identity)}catch(ye){m.values=[]}if(o().isEmpty(m.values))return}else if(l===27)try{var pe=JSON.parse(fe);m.values=pe.map(function(ye){return ye.departmentId})}catch(ye){m.values=[]}else if(l===48)try{var Se=JSON.parse(fe);m.values=Se.map(function(ye){return ye.organizeId})}catch(ye){m.values=[]}else o().includes([n.v8.AREA_INPUT_24,n.v8.AREA_INPUT_19,n.v8.AREA_INPUT_23],l)?m.values=[fe]:(l===28||l===33)&&(m.values=[fe]);return m}}}}}function B(i){var m=i.type,v=i.value;return m===n.W5.DATE_GT?Z()(v).endOf("day").format("YYYY-MM-DD HH:mm:ss"):m===n.W5.DATE_GT?Z()(v).startOf("day").format("YYYY-MM-DD HH:mm:ss"):v}var x=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=m.advancedSetting,W=v===void 0?{}:v,P=m.sourceControl,u=P===void 0?{}:P,l=m.controlId;return o().includes(["caid","ownerid","daid"],l)?3:(W.usertype||o().get(u.advancedSetting||{},"usertype"))==="2"?2:1};function Q(i,m){if(o().includes([V.DN.TEXT,V.DN.TELEPHONE,V.DN.MOBILE_PHONE,V.DN.EMAIL,V.DN.CRED,V.DN.CONCATENATE,V.DN.AUTO_ID,V.DN.SEARCH],i))return(o().get(m,"values")||[])[0];if(o().includes([V.DN.NUMBER,V.DN.MONEY,V.DN.FORMULA_NUMBER,V.DN.SWITCH],i))return o().get(m,"value");if(o().includes([V.DN.RELATE_SHEET,V.DN.CASCADER],i))return g()((o().get(m,"values")||[]).map(function(v){return{sid:v.rowid}}));if(o().includes([V.DN.FLAT_MENU,V.DN.MULTI_SELECT,V.DN.DROP_DOWN,V.DN.USER_PICKER,V.DN.DEPARTMENT,V.DN.ORG_ROLE,V.DN.AREA_PROVINCE,V.DN.AREA_CITY,V.DN.AREA_COUNTY],i))return g()(o().get(m,"values")||[]);o().includes([V.DN.DATE,V.DN.DATE_TIME,V.DN.TIME],i)}},48436:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>te});var ce=t(33867),g=t(67294),p=t(87506),L=t.n(p);function te(R){var y=R.selected,a=y===void 0?[]:y,r=R.onCancel,o=r===void 0?function(){}:r,d=R.deleteSelete,Z=d===void 0?function(){}:d;return g.createElement(L(),{transitionName:"draftOperateCon",transitionEnterTimeout:500,transitionLeaveTimeout:300},!!a.length&&g.createElement("div",{className:"draftOperateCon"},g.createElement("span",{className:"Font16 mRight24"},_l("\u5DF2\u9009\u62E9%0\u6761\u8349\u7A3F",a.length)),g.createElement("div",{className:"del InlineBlock",onClick:function(){return Z(a)}},g.createElement(ce.Z,{icon:"delete2",className:"mRight6"}),_l("\u5220\u9664")),g.createElement("span",{className:"close Right"},g.createElement(ce.Z,{icon:"close",className:"Hand",onClick:o}))))}},27941:(lt,Te,t)=>{"use strict";if(t.d(Te,{Z:()=>F,r:()=>K}),!/^(1887|7596|7798)$/.test(t.j))var ce=t(70264);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(42057);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(42185);var L=t(85315);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(33867);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(62521);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(16469);var a=t(88106),r=t(52945),o=t.n(r),d=t(88239),Z=t(12424),H=t(86735),U=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var f=t(1952);if(!/^(1887|7596|7798)$/.test(t.j))var V=t(48436);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(59292);if(!/^(1887|7596|7798)$/.test(t.j))var O=t(89557);if(!/^(1887|7596|7798)$/.test(t.j))var n=t(85964);if(!/^(1887|7596|7798)$/.test(t.j))var s=t(82011);if(!/^(1887|7596|7798)$/.test(t.j))var j=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var A=t(24607);if(!/^(1887|7596|7798)$/.test(t.j))var S=t(15742);var I=t(71893);if(!/^(1887|7596|7798)$/.test(t.j))var c=t(33174);var q=(0,H.Z)([`
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
`],[`
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
`]),b=(0,H.Z)([`
  height: 56px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin: 0 -24px;
  padding: 0 16px 0 24px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.09) !important;
  .title {
    font-size: 17px;
    font-weight: 500;
  }
  .closeBtn {
    cursor: pointer;
    line-height: 1em;
    font-size: 22px;
    color: #9e9e9e;
    &:hover {
      color: #2196f3;
    }
  }
`],[`
  height: 56px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin: 0 -24px;
  padding: 0 16px 0 24px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.09) !important;
  .title {
    font-size: 17px;
    font-weight: 500;
  }
  .closeBtn {
    cursor: pointer;
    line-height: 1em;
    font-size: 22px;
    color: #9e9e9e;
    &:hover {
      color: #2196f3;
    }
  }
`]),k=(0,H.Z)([`
  flex: 1;
  overflow: hidden;
  margin: 0 -24px;
`],[`
  flex: 1;
  overflow: hidden;
  margin: 0 -24px;
`]),ee=(0,H.Z)([`
  height: 34px !important;
  line-height: 34px;
  border: 1px solid #ddd !important;
  color: #333 !important;
  background-color: #fff;
  &:hover {
    border: 1px solid #2196f3 !important;
    color: #2196f3 !important;
  }
`],[`
  height: 34px !important;
  line-height: 34px;
  border: 1px solid #ddd !important;
  color: #333 !important;
  background-color: #fff;
  &:hover {
    border: 1px solid #2196f3 !important;
    color: #2196f3 !important;
  }
`]),re=I.ZP.div(q),ie=I.ZP.div(b),le=I.ZP.div(k),E=I.ZP.div(ee);function w(h){var z=h.onCancel,X=z===void 0?function(){}:z,B=h.appId,x=h.view,Q=x===void 0?{}:x,i=h.worksheetInfo,m=i===void 0?{}:i,v=h.sheetSwitchPermit,W=h.isCharge,P=h.allowAdd,u=h.sheetViewData,l=u===void 0?{}:u,T=h.updateDraftDataCount,G=T===void 0?function(){}:T,D=h.setHighLightOfRows,M=D===void 0?function(){}:D,se=m.worksheetId,ae=m.projectId,ne=m.rules,de=ne===void 0?[]:ne,Ce=m.isWorksheetQuery,he=m.advancedSetting,fe=he===void 0?{}:he,Ee=l.rows,Y=(0,U.useState)([]),oe=(0,Z.Z)(Y,2),ve=oe[0],ue=oe[1],pe=(0,U.useState)(!1),Se=(0,Z.Z)(pe,2),ye=Se[0],J=Se[1],me=(0,U.useState)({}),be=(0,Z.Z)(me,2),xe=be[0],Ae=be[1],Ne=(0,U.useState)(""),Me=(0,Z.Z)(Ne,2),Fe=Me[0],Be=Me[1],we=(0,U.useState)(!1),Ie=(0,Z.Z)(we,2),ge=Ie[0],Re=Ie[1],Pe=(0,U.useState)(h.draftData||[]),ke=(0,Z.Z)(Pe,2),We=ke[0],Ve=ke[1],it=(0,U.useState)({}),Ge=(0,Z.Z)(it,2),pt=Ge[0],ot=Ge[1],vt=_.get(m,"template.controls"),At=vt.filter(function(Ue){return!_.includes(S.CC,Ue.type)&&!_.includes(["wfname","wfcuaids","wfcaid","wfctime","wfrtime","wfftime","wfstatus","rowid","ownerid","caid","uaid"],Ue.controlId)&&(0,A.kM)(Ue,2).visible}).concat([{controlId:"ctime",controlName:_l("\u521B\u5EFA\u65F6\u95F4"),type:16},{controlId:"utime",controlName:_l("\u6700\u8FD1\u4FEE\u6539\u65F6\u95F4"),type:16}]).map(function(Ue){return pt[Ue.controlId]?(0,d.default)({},Ue,{advancedSetting:o()({},Ue.advancedSetting,{datamask:"0"})}):Ue}),yt=(0,U.useRef)(null),st=String(We.length).length*8,St=st+32;(0,U.useEffect)(function(){Qe({appId:B,worksheetId:se})},[]);var Qe=function(){Re(!0),j.Z.getFilterRows({appId:B,worksheetId:se,getType:21,pageIndex:1,pageSize:10}).then(function(He){G(He.data.length),Ve(He.data),Re(!1)})},Xe=function(He){var ze=He.className,gt=He.style,Et=He.control,ft=He.isLast,qe=He.updateSheetColumnWidths,nt=_.get(Et,"advancedSetting.datamask")==="1"&&_.get(Et,"advancedSetting.isdecrypt")==="1";return U.createElement(O.Z,{className:ze,style:gt,worksheetId:se,control:pt[Et.controlId]?(0,d.default)({},Et,{advancedSetting:o()({},Et.advancedSetting,{datamask:"0"})}):Et,showDropdown:!pt[Et.controlId]&&nt,isLast:ft,selected:!!ve.length,updateSheetColumnWidths:qe,renderPopup:function(et){var ut=et.closeMenu;return U.createElement(R.Z,{className:"worksheetColumnHeadMenu",style:{width:180},onClickAway:ut},nt&&U.createElement(y.Z,{onClick:function(){ot((0,d.default)({},pt,(0,a.default)({},Et.controlId,!0)))}},U.createElement("i",{className:"icon icon-eye_off"}),_l("\u89E3\u7801")))}})},$e=function(He,ze){var gt=_.isUndefined(He)?{}:{controlId:ze.controlId,isAsc:He};setSortControl(gt),Qe({sortControls:_.isUndefined(He)?[]:[(0,d.default)({datatype:ze.type},gt)]})},Ke=function(He){j.Z.deleteWorksheetRows({appId:B,worksheetId:se,rowIds:He,deleteType:21}).then(function(ze){if(ze.successCount===He.length){alert(_l("\u5220\u9664\u6210\u529F"));var gt=We.filter(function(Et){return!_.includes(He,Et.rowid)});Ve(gt),G(gt.length),ue([]),h.loadDraftDataCount&&_.isFunction(h.loadDraftDataCount)&&!gt.length&&h.loadDraftDataCount({appId:B,worksheetId:se})}else alert(_l("\u5220\u9664\u5931\u8D25"),2)})};return U.createElement(c.Z,null,U.createElement(g.Z,{visible:!0,closable:!1,width:document.body.clientWidth*.9,type:"fixed",bodyStyle:{paddingTop:0,position:"relative"},closeStyle:{margin:"16px",width:"30px",height:"30px",lineHeight:"30px"}},U.createElement(re,null,U.createElement(V.Z,{selected:ve,deleteSelete:Ke,onCancel:function(){ue([])}}),U.createElement(ie,null,U.createElement("div",{className:"title"},We.length?_l("\u8349\u7A3F\u7BB1")+"\uFF08"+We.length+"/10\uFF09":_l("\u8349\u7A3F\u7BB1")),U.createElement("span",{className:"closeBtn",onClick:X},U.createElement("i",{className:"icon icon-close"}))),U.createElement(le,null,U.createElement(C.Z,{loading:ge,worksheetId:se,appId:B,lineNumberBegin:0,emptyIcon:U.createElement(te.Z,{icon:"drafts_approval"}),emptyText:_l("\u6682\u65E0\u8349\u7A3F"),noRenderEmpty:!0,columns:At,rowHeight:34,selectedIds:ve,data:We,controls:vt,from:21,rules:de,renderColumnHead:Xe,sheetSwitchPermit:v,projectId:ae,renderRowHead:function(He){var ze=He.className,gt=He.style,Et=He.rowIndex;return U.createElement(n.Z,{isDraft:!0,className:ze,style:(0,d.default)({},gt,{with:String(Et).length*8+64}),numberWidth:st,lineNumberBegin:0,allowEdit:!1,selectedIds:ve,onSelectAllWorksheet:function(){setIsAll(!0),ue(We.map(function(qe){return qe.rowid}))},onSelect:function(qe){var nt=[];qe.forEach(function(Ze){var et=_.find(We,function(ut){return ut.rowid===Ze});et&&(et.allowedit||et.allowEdit)&&nt.push(et)}),ue(qe)},rowIndex:Et,data:We})},onCellClick:function(He,ze,gt){He.type===29&&He.enumDefault===2&&Ae(He.controlId),Be(ze.rowid),J(!0)}}))),ye&&U.createElement(s.Z,{ref:yt,controls:vt,draftFormControls:vt.filter(function(Ue){return!_.includes([].concat((0,L.Z)(S.CC),[33]),Ue.type)&&!_.includes(["wfname","wfcuaids","wfcaid","wfctime","wfrtime","wfftime","wfstatus","rowid","ownerid","caid","uaid","ctime","utime"],Ue.controlId)}),sheetSwitchPermit:v,projectId:ae,showPrevNext:!0,needUpdateRows:!0,rules:de,isWorksheetQuery:Ce,isCharge:W,allowAdd:P||fe.closedrafts!=="1",appId:B,view:(0,d.default)({},Q,{controls:[]}),from:21,visible:ye,hideRecordInfo:function(He){(!He||He===Fe)&&J(!1)},recordId:Fe,activeRelateTableControlId:xe,worksheetId:se,header:U.createElement("div",{className:"flex flexRow w100 alignItemsCenter"},U.createElement("div",{className:"flex Font17 bold pLeft15"},(fe.title||"\u521B\u5EFA\u8BB0\u5F55")+"\uFF08"+_l("\u8349\u7A3F")+"\uFF09"),U.createElement(E,{className:"ming Button--medium Button mRight12",onClick:_.throttle(function(){yt.current&&yt.current.saveDraftData({draftType:"draft"})},1e3)},_l("\u5B58\u8349\u7A3F")),U.createElement(p.ZP,{className:"mRight12",onClick:_.throttle(function(){yt.current&&yt.current.saveDraftData({draftType:"submit"})},1e3)},fe.sub||_l("\u63D0\u4EA4"))),rowStatus:21,loadDraftList:Qe,currentSheetRows:We,addNewRecord:h.addNewRecord,setHighLightOfRows:M})))}var K=function(z){return(0,f.Z)(w,(0,d.default)({},z,{closeFnName:"onCancel"}))};function N(h){var z=h.appId,X=h.view,B=X===void 0?{}:X,x=h.worksheetInfo,Q=x===void 0?{}:x,i=h.sheetSwitchPermit,m=h.isCharge,v=h.sheetViewData,W=v===void 0?{}:v,P=h.allowAdd,u=h.setHighLightOfRows,l=(0,U.useState)(h.draftDataCount),T=(0,Z.Z)(l,2),G=T[0],D=T[1];return(0,U.useEffect)(function(){D(h.draftDataCount)},[h.draftDataCount]),U.createElement(ce.Z,{popupPlacement:"bottom",text:U.createElement("span",null,_l("\u8349\u7A3F\u7BB1"))},U.createElement("span",{className:"mRight16 mTop4 Relative",onClick:function(){K({view:B,appId:z,worksheetInfo:Q,sheetSwitchPermit:i,isCharge:m,sheetViewData:W,allowAdd:P,addNewRecord:h.addNewRecord,updateDraftDataCount:function(ae){D(ae)},setHighLightOfRows:u})}},U.createElement(te.Z,{icon:"drafts_approval",className:"Font20 Gray_9e pointer mTop4"}),G?U.createElement("span",{className:"draftDot"}):""))}const F=/^(1887|7596|7798)$/.test(t.j)?null:N},61799:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>r});var ce=t(88239),g=t(12424),p=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(15577);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(89499);var y=t(96486),a=t.n(y);function r(o){return function(Z){var H=Z.worksheetId,U=(0,p.useState)(a().isEmpty(Z.worksheetInfo)),f=(0,g.Z)(U,2),V=f[0],C=f[1],O=(0,p.useState)(Z.worksheetInfo||{}),n=(0,g.Z)(O,2),s=n[0],j=n[1];(0,p.useEffect)(function(){V&&L.Z.getWorksheetInfo({handleDefault:!0,getTemplate:!0,getRules:!0,worksheetId:H}).then(function(I){var c=(0,te.T3)(I.appId,H);I.advancedSetting&&(I.advancedSetting.title=c.formTitle||I.advancedSetting.title,I.advancedSetting.sub=c.formSub||I.advancedSetting.sub,I.advancedSetting.continue=c.formContinue||I.advancedSetting.continue),I.entityName=c.recordName||I.entityName,I.template.controls=(0,R.zj)(I.appId,I.template.controls),j(I),C(!1)})},[]);var A=s.advancedSetting||{},S=A?{title:A.title,submitBtnText:A.sub,submitEndAction:Number(A.subafter||1),continueBtnText:A.continue,continueEndAction:Number(A.continueafter||2),continueBtnVisible:a().includes(["true","1"],a().isUndefined(A.continuestatus)?"1":A.continuestatus),submitOpenRecordViewId:A.subview,continueOpenRecordViewId:A.continueview,autoFillVisible:a().includes(["true","1"],a().isUndefined(A.showcontinue)?"1":A.showcontinue),closedrafts:A.closedrafts,autoreserve:A.autoreserve,reservecontrols:A.reservecontrols!=="all"?A.reservecontrols:""}:void 0;return p.createElement(o,(0,ce.default)({},Z,{loading:V,worksheetInfo:s,advancedSetting:S}))}}},69945:(lt,Te,t)=>{"use strict";t.d(Te,{V:()=>de,Z:()=>he});var ce=t(25273),g=t(54208),p=t(94942),L=t.n(p),te=t(36803),R=t(88239),y=t(22382),a=t(28661),r=t.n(a),o=t(12424),d=t(42723),Z=t(80426),H=t(59012),U=t.n(H),f=t(63627),V=t(81982),C=t.n(V),O=t(66814),n=t(91880),s=t.n(n),j=t(20148),A=t(60385),S=t.n(A),I=t(86735),c=t(67294),q=t(45697),b=t.n(q),k=t(93967),ee=t.n(k),re=t(71893),ie=t(89499),le=t(6477),E=t(61799),w=t(33867),K=t(52945),N=t.n(K),F=t(85315),h=t(45231),z=t(98153),X=t(24607),B=t(15742),x=t(70039),Q=t(33174),i=t(96486),m=t.n(i),v=(0,I.Z)([`
  height: 95%;
  overflow: hidden;
  border-top-right-radius: 15px;
  border-top-left-radius: 15px;
  &.full {
    height: 100%;
    border-top-right-radius: 0;
    border-top-left-radius: 0;
  }
  .mobileContainer {
    padding-top: 25px;
  }
  .am-modal-content {
    background-color: #f5f5f5;
  }
  .am-modal-body {
    color: #333 !important;
    font-size: inherit !important;
  }
  .recordCardContent {
    padding: 5px 12px;
    margin: 0 10px 10px;
    background-color: #fff;
    border: 1px solid #fff;
    border-radius: 3px;
    box-shadow: 0px 1px 3px rgb(0 0 0 / 16%);
    position: relative;
    overflow: hidden;
    .controlWrapper {
      margin-bottom: 5px;
      display: flex;
      flex-direction: row;
      align-items: center;
    }
    .deleteRecord {
      position: absolute;
      color: #f44338;
      font-size: 22px;
      right: 10px;
      bottom: 10px;
    }
    .emptyTag {
      border-radius: 3px;
      display: inline-block;
      width: 12px;
      height: 3px;
      background-color: #ededed;
    }
  }
`],[`
  height: 95%;
  overflow: hidden;
  border-top-right-radius: 15px;
  border-top-left-radius: 15px;
  &.full {
    height: 100%;
    border-top-right-radius: 0;
    border-top-left-radius: 0;
  }
  .mobileContainer {
    padding-top: 25px;
  }
  .am-modal-content {
    background-color: #f5f5f5;
  }
  .am-modal-body {
    color: #333 !important;
    font-size: inherit !important;
  }
  .recordCardContent {
    padding: 5px 12px;
    margin: 0 10px 10px;
    background-color: #fff;
    border: 1px solid #fff;
    border-radius: 3px;
    box-shadow: 0px 1px 3px rgb(0 0 0 / 16%);
    position: relative;
    overflow: hidden;
    .controlWrapper {
      margin-bottom: 5px;
      display: flex;
      flex-direction: row;
      align-items: center;
    }
    .deleteRecord {
      position: absolute;
      color: #f44338;
      font-size: 22px;
      right: 10px;
      bottom: 10px;
    }
    .emptyTag {
      border-radius: 3px;
      display: inline-block;
      width: 12px;
      height: 3px;
      background-color: #ededed;
    }
  }
`]),W=(0,I.Z)([`
  position: relative;
  margin-right: 16px;
  padding-top: 3px;
  .draftDot {
    position: absolute;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    right: 1px;
    top: 3px;
    background-color: #f44336;
  }
`],[`
  position: relative;
  margin-right: 16px;
  padding-top: 3px;
  .draftDot {
    position: absolute;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    right: 1px;
    top: 3px;
    background-color: #f44336;
  }
`]),P=(0,re.ZP)(S())(v),u=re.ZP.div(W);function l(fe){var Ee=fe.visible,Y=fe.onCancel,oe=Y===void 0?function(){}:Y,ve=fe.appId,ue=fe.worksheetId,pe=fe.controls,Se=pe===void 0?[]:pe,ye=fe.draftData,J=ye===void 0?[]:ye,me=fe.getDraftData,be=me===void 0?function(){}:me,xe=fe.sheetSwitchPermit,Ae=(0,c.useState)(""),Ne=(0,o.Z)(Ae,2),Me=Ne[0],Fe=Ne[1],Be=function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(m().includes([29,51],ge.type)){var Re=m().get(ge,"advancedSetting.showtype");return(0,R.default)({},ge,{advancedSetting:(0,R.default)({},ge.advancedSetting,{showtype:m().includes(["5","6"],Re)?"2":Re})})}return ge},we=function(ge){var Re=(0,X.xI)(Se,ge),Pe=Se.filter(function(Ve){return!m().includes([].concat((0,F.Z)(B.CC),[47]),Ve.type)&&!m().includes(["wfname","wfcuaids","wfcaid","wfctime","wfrtime","wfftime","wfstatus","rowid","ownerid","caid","uaid","ctime"],Ve.controlId)&&(0,X.kM)(Ve,2).visible}),ke=Se.find(function(Ve){return m().includes(["utime"],Ve.controlId)}),We=Pe.filter(function(Ve){return!Ve.attribute}).filter(function(Ve){return!m().includes(["utime"],Ve.controlId)}).slice(0,2).concat(ke||[]).map(function(Ve){return Be(Ve)});return c.createElement("div",{className:"recordCardContent",onClick:function(){Fe(ge.rowid)}},c.createElement("div",{className:"flexRow valignWrapper mBottom5"},c.createElement("div",{className:"Gray Blod Font14 ellipsis"},Re)),We.map(function(Ve){return c.createElement("div",{className:"controlWrapper",key:Ve.controlId},c.createElement("div",{className:"controlName ellipsis Gray_9e mRight10"},Ve.controlName),c.createElement("div",{className:"controlContent ellipsis"},ge[Ve.controlId]?c.createElement(z.Z,{rowHeight:34,cell:N()({},Ve,{value:ge[Ve.controlId]}),row:ge,worksheetId:ue,sheetSwitchPermit:xe,from:21,className:"w100",appId:ve,disableDownload:!0}):c.createElement("div",{className:"emptyTag"})))}),c.createElement("div",{className:"deleteRecord"},c.createElement(w.Z,{icon:"delete2",onClick:function(it){it.stopPropagation(),h.Z.deleteWorksheetRows({appId:ve,worksheetId:ue,rowIds:[ge.rowid],deleteType:21}).then(function(Ge){Ge.successCount===1?(alert(_l("\u5220\u9664\u8349\u7A3F\u6210\u529F")),be({appId:ve,worksheetId:ue})):alert(_l("\u5220\u9664\u8349\u7A3F\u5931\u8D25"),2)})}})))};return c.createElement(Q.Z,null,c.createElement(P,{popup:!0,animationType:"slide-up",onClose:oe,visible:Ee,className:"full"},c.createElement("div",{className:"flexColumn h100"},c.createElement("div",{className:"flexRow valignWrapper pTop15 pLeft20 pRight20 pBottom8"},c.createElement("div",{className:"flex Font15 Gray_9e leftAlign ellipsis"},_l("\u5171%0\u6761",J.length)),c.createElement(w.Z,{icon:"closeelement-bg-circle",className:"Font22 Gray_9e",onClick:oe})),c.createElement("div",{className:"flex"},m().isEmpty(J)?c.createElement(s(),{className:"withoutRows",direction:"column",justify:"center",align:"center"},c.createElement(w.Z,{icon:"drafts_approval"}),c.createElement("div",{className:"text"},_l("\u6682\u65E0\u8349\u7A3F"))):c.createElement(ce.Z,null,J.map(function(Ie){return we(Ie)})))),c.createElement(x.RecordInfoModal,{className:"full",visible:!!Me,appId:ve,worksheetId:ue,rowId:Me,sheetSwitchPermit:xe,draftFormControls:Se.filter(function(Ie){return!m().includes([].concat((0,F.Z)(B.CC),[33]),Ie.type)&&!m().includes(["wfname","wfcuaids","wfcaid","wfctime","wfrtime","wfftime","wfstatus","rowid","ownerid","caid","uaid","ctime","utime"],Ie.controlId)}).map(function(Ie){return Be(Ie)}),getDataType:21,from:21,onClose:function(){be({appId:ve,worksheetId:ue}),Fe("")}})))}function T(fe){var Ee=fe.appId,Y=fe.controls,oe=Y===void 0?[]:Y,ve=fe.worksheetInfo,ue=fe.worksheetId,pe=fe.sheetSwitchPermit,Se=(0,c.useState)(!1),ye=(0,o.Z)(Se,2),J=ye[0],me=ye[1],be=(0,c.useState)([]),xe=(0,o.Z)(be,2),Ae=xe[0],Ne=xe[1];(0,c.useEffect)(function(){Me()},[]);var Me=function(){h.Z.getFilterRows({appId:Ee,worksheetId:ue||ve.worksheetId,getType:21}).then(function(Be){Ne(Be.data)})};return c.createElement(c.Fragment,null,!m().isEmpty(Ae)&&c.createElement(u,{onClick:function(){me(!0)}},c.createElement("i",{className:"icon-drafts_approval Font22 Gray_9d"}),!m().isEmpty(Ae)&&c.createElement("span",{className:"draftDot"})),c.createElement(l,{visible:J,appId:Ee,worksheetId:ve.worksheetId,controls:oe,draftData:Ae,worksheetInfo:ve,getDraftData:Me,onCancel:function(){return me(!1)},sheetSwitchPermit:pe}))}var G=(0,I.Z)([`
  height: 95%;
  overflow: hidden;
  border-top-right-radius: 15px;
  border-top-left-radius: 15px;
  &.full {
    height: 100%;
    border-top-right-radius: 0;
    border-top-left-radius: 0;
  }
  .mobileContainer {
    padding-top: 25px;
  }
`],[`
  height: 95%;
  overflow: hidden;
  border-top-right-radius: 15px;
  border-top-left-radius: 15px;
  &.full {
    height: 100%;
    border-top-right-radius: 0;
    border-top-left-radius: 0;
  }
  .mobileContainer {
    padding-top: 25px;
  }
`]),D=(0,I.Z)([`
  height: 50px;
  background-color: #fff;
  padding: 0 10px;
  box-sizing: border-box;

  &.confirm {
    border: none;
    padding: 0;
    position: relative;
    bottom: -10px;
  }
  .flexRow {
    justify-content: flex-end;
  }
  .am-wingblank {
    overflow: hidden;
  }
  .am-button {
    height: 36px;
    line-height: 36px;
    padding: 0 10px;
  }
  .am-button-primary:hover {
    color: #fff;
  }
  .am-button,
  .am-button::before,
  .am-button-active::before {
    border-radius: 50px !important;
  }
`],[`
  height: 50px;
  background-color: #fff;
  padding: 0 10px;
  box-sizing: border-box;

  &.confirm {
    border: none;
    padding: 0;
    position: relative;
    bottom: -10px;
  }
  .flexRow {
    justify-content: flex-end;
  }
  .am-wingblank {
    overflow: hidden;
  }
  .am-button {
    height: 36px;
    line-height: 36px;
    padding: 0 10px;
  }
  .am-button-primary:hover {
    color: #fff;
  }
  .am-button,
  .am-button::before,
  .am-button-active::before {
    border-radius: 50px !important;
  }
`]),M=(0,I.Z)([`
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.8);
  z-index: 2;
  > div {
    position: relative;
    top: 50%;
    margin-top: -22px;
  }
`],[`
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.8);
  z-index: 2;
  > div {
    position: relative;
    top: 50%;
    margin-top: -22px;
  }
`]),se=(0,re.ZP)(S())(G),ae=re.ZP.div(D),ne=re.ZP.div(M);function de(fe){var Ee=fe.title,Y=fe.cancelText,oe=fe.updateText,ve=fe.visible,ue=fe.onCancel,pe=fe.onUpdate;return c.createElement(se,{popup:!0,animationType:"slide-up",onClose:pe,visible:ve,style:{height:130}},c.createElement("div",{className:"flexColumn h100"},c.createElement(s(),{align:"center",className:"Font17 Gray bold pLeft15 pRight15 mTop24 mBottom32"},Ee),c.createElement(ae,{className:"footerBox valignWrapper flexRow",style:{border:"none"}},c.createElement(U(),{className:"flex",size:"sm"},c.createElement(C(),{className:"Font13 bold Gray_75",onClick:ue},Y)),c.createElement(U(),{className:"flex",size:"sm"},c.createElement(C(),{className:"Font13 bold",type:"primary",onClick:pe},oe)))))}function Ce(fe){var Ee=this,Y=fe.visible,oe=fe.className,ve=fe.hideNewRecord,ue=ve===void 0?_.noop:ve,pe=fe.notDialog,Se=fe.advancedSetting,ye=Se===void 0?{}:Se,J=fe.showDraftsEntry,me=fe.sheetSwitchPermit,be=fe.customButtonConfirm,xe=(0,d.Z)(fe,["visible","className","hideNewRecord","notDialog","advancedSetting","showDraftsEntry","sheetSwitchPermit","customButtonConfirm"]),Ae=xe.appId,Ne=xe.viewId,Me=xe.worksheetInfo,Fe=(0,c.useRef)(null),Be=(0,c.useState)(),we=(0,o.Z)(Be,2),Ie=we[0],ge=we[1],Re=(0,c.useState)(null),Pe=(0,o.Z)(Re,2),ke=Pe[0],We=Pe[1];(0,c.useEffect)(function(){var vt=function(){var yt=_.get(Fe.current,"setRestoreVisible");ue(),yt&&yt(!1)};return pe||window.addEventListener("popstate",vt,!1),function(){pe||window.removeEventListener("popstate",vt,!1)}},[]);var Ve=function(At,yt){r().showActionSheetWithOptions({options:[],message:c.createElement(c.Fragment,null,c.createElement("div",{className:"Font17 Gray bold pTop10 mBottom32 TxtLeft"},_l("\u7EE7\u7EED\u521B\u5EFA\u65F6\uFF0C\u662F\u5426\u4FDD\u7559\u672C\u6B21\u63D0\u4EA4\u5185\u5BB9 ?")),c.createElement(ae,{className:"valignWrapper flexRow confirm"},c.createElement(U(),{className:"flex",size:"sm"},c.createElement(C(),{className:"Font13 bold Gray_75",onClick:function(){We(!1),yt(),r().close()}},_l("\u4E0D\u4FDD\u7559"))),c.createElement(U(),{className:"flex",size:"sm"},c.createElement(C(),{className:"Font13 bold",type:"primary",onClick:function(){We(!0),At(),r().close()}},_l("\u4FDD\u7559")))))})},it=c.createElement("div",{className:"flexRow valignWrapper pTop15 pLeft20 pRight20 pBottom8"},c.createElement("div",{className:"title Font18 Gray flex bold leftAlign ellipsis"},ye.title||fe.title||fe.entityName&&_l("\u521B\u5EFA%0",fe.entityName)),Y&&ye.closedrafts!=="1"&&J&&c.createElement(T,{appId:Ae,worksheetId:fe.worksheetId||Me.worksheetId,controls:_.get(Me,"template.controls"),worksheetInfo:Me,sheetSwitchPermit:me}),c.createElement("i",{className:"icon icon-closeelement-bg-circle Gray_9e Font22",onClick:function(){ue(),(0,ie.jY)("tempNewRecord",fe.worksheetId)}})),Ge=c.createElement(le.Z,(0,R.default)({registerFunc:function(At){return Fe.current=At}},xe,{notDialog:pe,advancedSetting:ye,continueCheck:!1,showTitle:!1,autoFill:ke,onCancel:ue,from:5,onSubmitBegin:function(){return ge(!0)},onSubmitEnd:function(){return ge(!1)},viewId:""})),pt=c.createElement(ae,{className:"footerBox valignWrapper flexRow"},ye.closedrafts!=="1"&&c.createElement(U(),{className:"flexColumn TxtCenter",size:"sm"},c.createElement("div",{onClick:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}Fe.current.newRecord({autoFill:ke,rowStatus:21})}},c.createElement("i",{className:"icon-drafts_approval Font20 Gray_9e "}),c.createElement("div",{className:"Font12 bold Gray_9e"},_l("\u5B58\u8349\u7A3F")))),ye.continueBtnVisible&&c.createElement(U(),{className:"flex",size:"sm"},c.createElement(C(),{className:"Font13 bold Gray_75",onClick:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}if(ye.autoFillVisible&&ye.continueEndAction===2&&_.isNull(ke)){var At=function(){Fe.current.newRecord({isContinue:!0,autoFill:!0,actionType:ye.continueEndAction})},yt=function(){Fe.current.newRecord({isContinue:!0,autoFill:!1,actionType:ye.continueEndAction})};if(ye.autoreserve==="1"){We(!0),At();return}Ve(At,yt)}else Fe.current.newRecord({isContinue:!0,autoFill:ke,actionType:ye.continueEndAction})}},ye.continueBtnText||_l("\u63D0\u4EA4\u5E76\u7EE7\u7EED\u521B\u5EFA"))),c.createElement(U(),{className:"flex",size:"sm"},c.createElement(C(),{className:"Font13 bold",type:"primary",onClick:(0,te.Z)(L().mark(function vt(){var At,yt;return L().wrap(function(St){for(;;)switch(St.prev=St.next){case 0:if(!window.isPublicApp){St.next=3;break}return alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3),St.abrupt("return");case 3:if(!be){St.next=12;break}return St.prev=4,St.next=7,be();case 7:St.next=12;break;case 9:return St.prev=9,St.t0=St.catch(4),St.abrupt("return");case 12:ye.autoFillVisible&&ye.submitEndAction===2&&_.isNull(ke)?(At=function(){Fe.current.newRecord({autoFill:!0,actionType:ye.submitEndAction})},yt=function(){Fe.current.newRecord({autoFill:!0,actionType:ye.submitEndAction})},Ve(At,yt)):Fe.current.newRecord({autoFill:ke,actionType:ye.submitEndAction});case 13:case"end":return St.stop()}},vt,Ee,[[4,9]])}))},ye.submitBtnText||_l("\u63D0\u4EA4")))),ot=c.createElement(c.Fragment,null,Ie&&c.createElement(ne,null,c.createElement(g.Z,{size:"small"})),c.createElement("div",{className:"flexColumn leftAlign h100"},pe?null:it,c.createElement(ce.Z,{className:"flex"},c.createElement("div",{className:"pAll20 pTop0 h100"},Ge)),pt));return pe?ot:c.createElement(se,{popup:!0,animationType:"slide-up",className:ee()("MobileNewRecordModal",oe),onClose:ue,visible:Y},ot)}Ce.propTypes={notDialog:b().bool};const he=(0,E.Z)(Ce)},12246:(lt,Te,t)=>{"use strict";t.r(Te),t.d(Te,{BUTTON_ACTION_TYPE:()=>C,default:()=>n});var ce=t(42057),g=t(25273),p=t(60967),L=t(54208),te=t(88239),R=t(12424),y=t(67294),a=t(45697),r=t.n(a),o=t(93967),d=t.n(o),Z=t(89499),H=t(6477),U=t(61799),f=t(15577),V=t(33174),C={CLOSE:1,CONTINUE_ADD:2,OPEN_RECORD:3};function O(s){var j=s.visible,A=s.appId,S=s.worksheetId,I=s.title,c=s.notDialog,q=s.className,b=s.showFillNext,k=s.showContinueAdd,ee=k===void 0?!0:k,re=s.hideNewRecord,ie=s.onCloseDialog,le=ie===void 0?function(){}:ie,E=s.showShare,w=s.advancedSetting,K=w===void 0?{}:w,N=(0,y.useRef)(null),F=(0,y.useState)(),h=(0,R.Z)(F,2),z=h[0],X=h[1],B=(0,y.useState)(Math.random().toString().slice(2)),x=(0,R.Z)(B,1),Q=x[0],i=(0,y.useState)(),m=(0,R.Z)(i,2),v=m[0],W=m[1],P=(0,y.useState)(K.autoreserve==="1"),u=(0,R.Z)(P,2),l=u[0],T=u[1],G=(0,y.useState)(),D=(0,R.Z)(G,2),M=D[0],se=D[1],ae=ee&&K.continueBtnVisible,ne=/\/embed\/view\//.test(location.pathname),de=v?y.createElement("div",{className:"Gray_9e TxtCenter mTop80 pTop100"},_l("\u8BE5\u8868\u5DF2\u5220\u9664\u6216\u6CA1\u6709\u6743\u9650")):y.createElement(H.Z,(0,te.default)({},s,{maskLoading:M,registerFunc:function(Ee){return N.current=Ee},title:K.title||I,notDialog:c,autoFill:l,showTitle:!0,onCancel:re,shareVisible:z,setShareVisible:X,onSubmitBegin:function(){return se(!0)},onSubmitEnd:function(){return se(!1)},onError:function(){return W(!0)}})),Ce=!v&&y.createElement("div",{className:"footerBox flexRow",onClick:function(Ee){return Ee.stopPropagation()}},M&&y.createElement("div",{className:"loadingMask"},y.createElement(L.Z,{size:"big"})),y.createElement("span",{className:"continue TxtMiddle clearfix InlineBlock Left Gray_9e"},ae&&b&&K.autoreserve!=="1"&&K.autoFillVisible&&y.createElement(p.Z,{checked:l,onClick:function(){return T(!l)},text:_l("\u7EE7\u7EED\u521B\u5EFA\u65F6\uFF0C\u4FDD\u7559\u672C\u6B21\u63D0\u4EA4\u5185\u5BB9")})),y.createElement("div",{className:"flex"}),K.closedrafts!=="1"&&y.createElement("button",{type:"button",className:"ming Button--medium Button saveAndContinueBtn ellipsis mRight12",onClick:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}N.current.newRecord({autoFill:l,rowStatus:21})}},_l("\u5B58\u8349\u7A3F")),ae&&y.createElement("button",{type:"button",className:"ming Button--medium Button saveAndContinueBtn ellipsis",onClick:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}N.current.newRecord({isContinue:!0,autoFill:l&&K.autoFillVisible,actionType:K.continueEndAction,rowStatus:1}),c?$(".nano").nanoScroller({scrollTop:0}):$("."+Q).find(".nano").nanoScroller({scrollTop:0})}},K.continueBtnText||_l("\u63D0\u4EA4\u5E76\u7EE7\u7EED\u521B\u5EFA")),y.createElement("button",{type:"button",className:"ming Button--medium Button--primary Button mLeft12 ellipsis",onClick:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}N.current.newRecord({autoFill:l,actionType:K.submitEndAction,rowStatus:1})}},K.submitBtnText||_l("\u63D0\u4EA4"))),he={className:d()("workSheetNewRecord",q,Q),type:"fixed",verticalAlign:"bottom",width:(0,f.Q9)()?window.innerWidth-20:960,onCancel:function(){le(),re(),(0,Z.jY)("tempNewRecord",S)},footer:Ce,visible:j,iconButtons:E&&!ne&&!md.global.Account.isPortal?[{icon:"icon-share",tip:_l("\u5206\u4EAB"),onClick:function(){X(!0)}}]:[]};return(0,y.useEffect)(function(){T(K.autoreserve==="1")},[K.autoreserve]),y.createElement(y.Fragment,null,c?y.createElement("div",{className:d()("workSheetNewRecord",q,Q),onClick:function(Ee){return Ee.stopPropagation()}},y.createElement(g.Z,null,de),Ce):y.createElement(V.Z,null,y.createElement(ce.Z,(0,te.default)({},he,{allowScale:!0,bodyStyle:{paddingBottom:0},transitionName:"none",maskTransitionName:"none"}),de)))}O.propTypes={notDialog:r().bool,showFillNext:r().bool};const n=(0,U.Z)(O)},6477:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>u});var ce=t(88106),g=t(46593),p=t.n(g),L=t(69203),te=t(25273),R=t(94942),y=t.n(R),a=t(52945),r=t.n(a),o=t(88902),d=t.n(o),Z=t(85315),H=t(36803),U=t(20148),f=t.n(U),V=t(60385),C=t.n(V),O=t(63239),n=t.n(O),s=t(88239),j=t(12424),A=t(86735),S=t(67294),I=t(45697),c=t.n(I),q=t(71893),b=t(67707),k=t(5505),ee=t(1502),re=t(48947),ie=t(5631),le=t(89499),E=t(4114),w=t(91555),K=t(69945),N=t(27941),F=t(15577),h=t(36674),z=t(12246),X=t(96486),B=t.n(X),x=t(70973),Q=(0,A.Z)([`
  height: 100%;
  margin: 0 -24px;
  .newRecordTitle,
  .customFieldsCon {
    padding: 0 24px;
  }
`],[`
  height: 100%;
  margin: 0 -24px;
  .newRecordTitle,
  .customFieldsCon {
    padding: 0 24px;
  }
`]),i=(0,A.Z)([`
  position: absolute;
  top: 2px;
  width: 100%;
  overflow: hidden;
  height: 86px;
`],[`
  position: absolute;
  top: 2px;
  width: 100%;
  overflow: hidden;
  height: 86px;
`]),m=q.ZP.div(Q),v=q.ZP.div(i);function W(l){if(l){var T=l.querySelector(".customFieldsContainer .customFormItem:first-child .customFormTextareaBox input.smallInput");T&&T.click()}}function P(l){var T=this,G=function(){var gn=(0,H.Z)(y().mark(function wn(On){var An=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Yn=An.data,kn=An.handleRuleError,Fn,$n,ba,ua,La,ga,Ua,yr;return y().wrap(function(Ba){for(;;)switch(Ba.prev=Ba.next){case 0:if(!On){Ba.next=3;break}return Ge(),Ba.abrupt("return");case 3:if(Fn=void 0,He.current=!0,$n=(0,F.Q9)(),!Fn){Ba.next=13;break}return Ct(!0),alert(_l("\u8BF7\u6B63\u786E\u586B\u5199%0",ve||sn.entityName||""),3),Ge(),Ba.abrupt("return",!1);case 13:if(!tt){Ba.next=15;break}return Ba.abrupt("return",!1);case 15:if(!Fe){Ba.next=27;break}return Ba.prev=16,Ba.next=19,Fe();case 19:ba=Ba.sent,Be.btnRemark=ba,Ba.next=27;break;case 23:return Ba.prev=23,Ba.t0=Ba.catch(16),Ge(),Ba.abrupt("return");case 27:ht(!0),ua=Ke.current.newRecordOptions||{},La=ua.autoFill,ga=ua.actionType,Ua=ua.continueAdd,yr=ua.isContinue,(0,ie.ib)((0,s.default)({appId:he,projectId:Nt,viewId:fe,worksheetId:Y,formdata:$n?Yn.filter(function(cr){return $n?!0:!(0,le.XS)(cr)}).concat(B().keys(Rt).map(function(cr){return(0,s.default)({},Rt[cr],{value:n()((0,le.VM)(sn.template.controls,Rt[cr].value))})}).filter(B().identity)):Yn,customwidget:ze,setRequesting:ht,setSubListUniqueError:function(hr){ze.current.dataFormat.callStore("setUniqueError",{badData:hr})},setRuleError:function(hr){kn(hr,Ue.current)},onSubmitSuccess:function(hr){var Qa=hr.rowData,da=hr.newControls;if(ga===z.BUTTON_ACTION_TYPE.CONTINUE_ADD||Ua||Ce){alert("\u4FDD\u5B58\u6210\u529F",1,1e3),He.current=!1;var Jn=[].concat((0,Z.Z)(zt)),ra=(0,s.default)({},Rt);if(Re.reservecontrols){var ha=safeParse(Re.reservecontrols,"array");Jn=Jn.map(function(wa){return B().includes(ha,wa.controlId)?wa:B().find(an,{controlId:wa.controlId})}),d()(ra).forEach(function(wa){B().includes(ha,wa)||delete ra[wa]})}La?Re.reservecontrols&&(Zt(Jn),jt(ra)):(Zt(an),jt({})),da&&Zt((La?Jn:an).map(function(wa){return r()(B().find(da,function(Ka){return Ka.controlId===wa.controlId})||wa,{value:wa.value})})),Ct(!1),Ut(Math.random().toString()),W(gt.current)}else if(At(),ga===z.BUTTON_ACTION_TYPE.OPEN_RECORD){var Ia=B().get(Re,yr?"continueOpenRecordViewId":"submitOpenRecordViewId");B().isFunction(yt)?yt(Qa.rowid,Ia):(0,ee.L)({appId:he,worksheetId:Y,recordId:Qa.rowid,viewId:Ia,appSectionId:Ee,isOpenNewAddedRecord:!0})}(0,le.jY)("tempNewRecord",Y),B().isFunction(B().get(Ke,"current.tempSaving.cancel"))&&B().get(Ke,"current.tempSaving.cancel")(),B().isFunction(ot)&&ot(Qa,{continueAdd:ga===z.BUTTON_ACTION_TYPE.CONTINUE_ADD||Ua}),window.customWidgetViewIsActive&&le.uY.emit("POST_MESSAGE_TO_CUSTOM_WIDGET",{action:"new-record",value:Qa})},onSubmitEnd:function(){Ge(),ht(!1)},customBtn:Be},B().pick(l,["notDialog","addWorksheetRow","masterRecord","addType","updateWorksheetControls"])));case 30:case"end":return Ba.stop()}},wn,this,[[16,23]])}));return function(On){return gn.apply(this,arguments)}}(),D=l.loading,M=l.maskLoading,se=l.from,ae=l.isCustomButton,ne=l.isCharge,de=l.appPkgData,Ce=l.notDialog,he=l.appId,fe=l.viewId,Ee=l.groupId,Y=l.worksheetId,oe=l.title,ve=l.entityName,ue=l.showTitle,pe=l.needCache,Se=pe===void 0?!0:pe,ye=l.defaultRelatedSheet,J=l.defaultFormDataEditable,me=l.defaultFormData,be=l.writeControls,xe=l.registerFunc,Ae=l.masterRecord,Ne=l.masterRecordRowId,Me=l.shareVisible,Fe=l.customButtonConfirm,Be=l.customBtn,we=l.sheetSwitchPermit,Ie=l.updateWorksheetControls,ge=l.advancedSetting,Re=ge===void 0?{}:ge,Pe=l.setShareVisible,ke=Pe===void 0?function(){}:Pe,We=l.onSubmitBegin,Ve=We===void 0?function(){}:We,it=l.onSubmitEnd,Ge=it===void 0?function(){}:it,pt=l.onAdd,ot=pt===void 0?function(){}:pt,vt=l.onCancel,At=vt===void 0?function(){}:vt,yt=l.openRecord,st=l.loadDraftDataCount,St=st===void 0?function(){}:st,Qe=l.addNewRecord,Xe=Qe===void 0?function(){}:Qe,$e=l.hidePublicShare,Ke=(0,S.useRef)({}),Ue=(0,S.useRef)({}),He=(0,S.useRef)(!1),ze=(0,S.useRef)(),gt=(0,S.useRef)(),Et=(0,S.useState)(!0),ft=(0,j.Z)(Et,2),qe=ft[0],nt=ft[1],Ze=(0,S.useState)(),et=(0,j.Z)(Ze,2),ut=et[0],xt=et[1],wt=(0,S.useState)({}),kt=(0,j.Z)(wt,2),Rt=kt[0],jt=kt[1],fn=(0,S.useState)(B().cloneDeep(l.worksheetInfo||{})),Mt=(0,j.Z)(fn,2),sn=Mt[0],on=Mt[1],en=(0,S.useState)([]),$t=(0,j.Z)(en,2),an=$t[0],tn=$t[1],mt=(0,S.useState)([]),Lt=(0,j.Z)(mt,2),zt=Lt[0],Zt=Lt[1],Nt=sn.projectId,ct=sn.publicShareUrl,De=sn.visibleType,_e=(0,S.useState)(),Le=(0,j.Z)(_e,2),rt=Le[0],Ct=Le[1],dt=(0,S.useState)(),It=(0,j.Z)(dt,2),bt=It[0],Ut=It[1],Xt=(0,S.useState)(),pn=(0,j.Z)(Xt,2),tt=pn[0],ht=pn[1],Dt=(0,F.Q9)();function Ot(){var gn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ze.current){if(gn.rowStatus===21){Ve();var wn=ze.current.getSubmitData({ignoreAlert:!0,silent:!0}),On=wn.data;if(tt)return!1;ht(!0),(0,ie.ib)((0,s.default)({appId:he,projectId:Nt,viewId:fe,worksheetId:Y,formdata:Dt?On.filter(function(An){return Dt?!0:!(0,le.XS)(An)}).concat(B().keys(Rt).map(function(An){return(0,s.default)({},Rt[An],{value:n()((0,le.VM)(sn.template.controls,Rt[An].value))})}).filter(B().identity)):On,customwidget:ze,rowStatus:21,setRequesting:ht,onSubmitSuccess:function(Yn){var kn=Yn.rowData,Fn=Yn.isOverLimit;if((0,le.jY)("tempNewRecord",Y),B().isFunction(B().get(Ke,"current.tempSaving.cancel"))&&B().get(Ke,"current.tempSaving.cancel")(),xt(!1),Fn){if(Dt){C().alert(_l("\u60A8\u7684\u8349\u7A3F\u7BB1\u5DF2\u6EE1\uFF0C\u65E0\u6CD5\u4FDD\u5B58"),_l("\u8349\u7A3F\u7BB1\u4E2D\u7684\u6570\u91CF\u5DF2\u8FBE\u523010\u6761"),[{text:_l("\u6211\u77E5\u9053\u4E86"),onPress:function(){}}]);return}(0,b.Z)({className:"",title:_l("\u60A8\u7684\u8349\u7A3F\u7BB1\u5DF2\u6EE1\uFF0C\u65E0\u6CD5\u4FDD\u5B58"),description:_l("\u8349\u7A3F\u7BB1\u4E2D\u7684\u8349\u7A3F\u6570\u91CF\u5DF2\u7ECF\u8FBE\u523010\u6761"),okText:_l("\u67E5\u770B\u8349\u7A3F\u7BB1"),buttonType:"primary",cancelText:_l("\u6211\u77E5\u9053\u4E86"),onOk:function(){(0,N.r)({showFillNext:!0,appId:he,projectId:Nt,viewId:fe,worksheetId:Y,worksheetInfo:sn,isCharge:ne,needCache:!1,loadDraftDataCount:St,addNewRecord:Xe})}});return}At()},onSubmitEnd:function(){Ge(),ht(!1)}},B().pick(l,["notDialog","addWorksheetRow","masterRecord","addType","updateWorksheetControls"])));return}Ve(),Ke.current.newRecordOptions=gn,ze.current.submitFormData()}}xe({newRecord:Ot,setRestoreVisible:xt});var Ht=Ce?S.Fragment:te.Z,Kt=oe||_l("\u521B\u5EFA%0",ve||sn.entityName||""),dn=function(wn,On){var An=safeParse(wn);if(!B().isEmpty(An)){var Yn=An.create_at,kn=An.value||An;Ke.current.tempRecordCreateTime=Yn;var Fn=(0,le.dt)(kn,On,ye);Ke.current.focusTimer&&clearTimeout(Ke.current.focusTimer),Zt(Fn.formdata),jt(Fn.relateRecordData),Ut(Math.random().toString()),xt(!0)}},Cn=function(){xt(!1),(0,le.jY)("tempNewRecord",Y)};function Rn(gn){if(Se)if(window.isWxWork)(0,le.ip)(""+md.global.Account.accountId+Y+"-tempNewRecord").then(function(On){On&&dn(On,gn)});else{var wn=localStorage.getItem("tempNewRecord_"+Y);wn&&dn(wn,gn)}}return(0,S.useEffect)(function(){var gn=function(){var wn=(0,H.Z)(y().mark(function On(){var An;return y().wrap(function(kn){for(;;)switch(kn.prev=kn.next){case 0:if(!B().isEmpty(zt)){kn.next=11;break}return on(l.worksheetInfo),kn.next=4,(0,ie.q5)({isCustomButton:ae,worksheetInfo:l.worksheetInfo,defaultRelatedSheet:ye,defaultFormData:me,defaultFormDataEditable:J,writeControls:be});case 4:An=kn.sent,An=An,Zt(An),tn(An),nt(!1),Ke.current.focusTimer=setTimeout(function(){return W(gt.current)},300),Rn(An);case 11:case"end":return kn.stop()}},On,this)}));return function(){return wn.apply(this,arguments)}}();D||gn()},[D]),S.createElement(re.Z.Provider,{value:{updateWorksheetControls:Ie}},S.createElement(m,{onClick:function(wn){return wn.stopPropagation()}},Dt?S.createElement(K.V,{visible:ut,title:Ke.current.tempRecordCreateTime?_l("\u5DF2\u6062\u590D\u5230\u4E0A\u6B21\u4E2D\u65AD\u5185\u5BB9\uFF08%0\uFF09",window.createTimeSpan(new Date(Ke.current.tempRecordCreateTime))):_l("\u5DF2\u6062\u590D\u5230\u4E0A\u6B21\u4E2D\u65AD\u5185\u5BB9"),updateText:_l("\u786E\u8BA4"),cancelText:_l("\u6E05\u7A7A"),onUpdate:function(){return xt(!1)},onCancel:function(){(0,le.jY)("tempNewRecord",Y),Zt(an),Ut(Math.random()),xt(!1)}}):S.createElement(v,null,S.createElement(L.Z,{visible:ut,defaultTop:-140,visibleTop:8,title:Ke.current.tempRecordCreateTime?_l("\u5DF2\u6062\u590D\u5230\u4E0A\u6B21\u4E2D\u65AD\u5185\u5BB9\uFF08%0\uFF09",window.createTimeSpan(new Date(Ke.current.tempRecordCreateTime))):_l("\u5DF2\u6062\u590D\u5230\u4E0A\u6B21\u4E2D\u65AD\u5185\u5BB9"),updateText:_l("\u786E\u8BA4"),cancelText:_l("\u6E05\u7A7A"),onUpdate:function(){return xt(!1)},onCancel:function(){(0,le.jY)("tempNewRecord",Y),Zt(an),Ut(Math.random()),xt(!1)}})),S.createElement(Ht,null,!window.isPublicApp&&Me&&S.createElement(w.Z,{title:_l("\u65B0\u5EFA\u8BB0\u5F55\u94FE\u63A5"),from:"newRecord",canEditForm:ne,isPublic:De===2,publicUrl:ct,hidePublicShare:$e,isCharge:ne||(0,x.g9)(de.appRoleType),params:{appId:he,viewId:fe,worksheetId:Y,title:Kt},onUpdate:function(wn){on(r()({},sn,wn))},getCopyContent:function(wn,On){return new(p())(function(){var An=(0,H.Z)(y().mark(function Yn(kn){var Fn,$n;return y().wrap(function(ua){for(;;)switch(ua.prev=ua.next){case 0:if(wn!=="private"){ua.next=3;break}return kn(On+" "+Kt),ua.abrupt("return");case 3:return Fn="",ua.prev=4,ua.next=7,k.Z.getPublicWorksheetInfo({worksheetId:Y},{silent:!0});case 7:$n=ua.sent,Fn=$n.name,ua.next=13;break;case 11:ua.prev=11,ua.t0=ua.catch(4);case 13:kn(On+" "+Fn);case 14:case"end":return ua.stop()}},Yn,T,[[4,11]])}));return function(Yn){return An.apply(this,arguments)}}())},onClose:function(){return ke(!1)}}),ue&&S.createElement("div",{className:"newRecordTitle ellipsis Font19 mBottom10 Bold"},Kt),S.createElement("div",{className:"customFieldsCon",ref:gt},S.createElement(E.Z,{from:2,type:"new",loading:qe||D,recordbase:{appId:he,worksheetId:Y,viewId:fe,from:se,isCharge:ne,allowEdit:!0},sheetSwitchPermit:we,widgetStyle:sn.advancedSetting,masterRecordRowId:Ne||(Ae||{}).rowId,registerCell:function(wn){var On=wn.item,An=wn.cell;return Ue.current[On.controlId]={item:On,cell:An}},mountRef:function(wn){return ze.current=wn.current},formFlag:bt,recordinfo:sn,formdata:zt.filter(function(gn){return!B().includes(["wfname","wfstatus","wfcuaids","wfrtime","wfftime","wfdtime","wfcaid","wfctime","wfcotime","rowid","uaid"],gn.controlId)}),relateRecordData:Rt,worksheetId:Y,showError:rt,onChange:function(wn,On){var An=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Yn=An.noSaveTemp,kn=An.isAsyncChange;He.current||M||(Zt([].concat((0,Z.Z)(wn))),Se&&!Yn&&Ke.current.formUserChanged&&(Ke.current.tempSaving=(0,le.l4)("tempNewRecord",Y,n()({create_at:Date.now(),value:(0,le.Dy)(wn,Rt)}))))},onSave:G,onError:function(){Ge()},onRelateRecordsChange:function(wn,On){if(ze.current){ze.current.dataFormat.updateDataSource({controlId:wn.controlId,value:String((On||[]).length),data:On}),ze.current.updateRenderData(),Zt(zt.map(function(Yn){return Yn.controlId===wn.controlId?(0,s.default)({},Yn,{value:String((On||[]).length)}):Yn}));var An=(0,s.default)({},Rt,(0,ce.default)({},wn.controlId,(0,s.default)({},wn,{value:On})));jt(An),fe&&(Ke.current.tempSaving=(0,le.l4)("tempNewRecord",Y,n()({create_at:Date.now(),value:(0,le.Dy)(zt,Rt)})))}},updateRelateRecordTableCount:function(wn,On){ze.current&&(ze.current.dataFormat.updateDataSource({controlId:wn,value:String(On)}),ze.current.updateRenderData())},projectId:Nt||l.projectId,onWidgetChange:function(){Ke.current.formUserChanged=!0}})))))}P.propTypes={from:c().number,isCharge:c().bool,notDialog:c().bool,appId:c().string,viewId:c().string,worksheetId:c().string,worksheetInfo:c().shape({}),title:c().string,entityName:c().string,showTitle:c().bool,defaultRelatedSheet:c().shape({}),defaultFormData:c().shape({}),defaultFormDataEditable:c().bool,writeControls:c().arrayOf(c().shape({})),registerFunc:c().func,onError:c().func};const u=/^(1887|7596|7798)$/.test(t.j)?null:P},34694:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>p});var ce=t(88239);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(1952);function p(L){Promise.resolve().then(t.bind(t,12246)).then(function(te){var R=te.default;(0,g.Z)(R,(0,ce.default)({},L,{closeFnName:"hideNewRecord"}))})}},34537:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>N});var ce=t(42057),g=t(54208),p=t(94942),L=t.n(p),te=t(36803),R=t(63239),y=t.n(R),a=t(88239),r=t(85105),o=t.n(r),d=t(99663),Z=t(22600),H=t(49135),U=t(93196),f=t(86735),V=t(67294),C=t(45697),O=t.n(C),n=t(93967),s=t.n(n),j=t(71893),A=t(7145),S=t.n(A),I=t(36612),c=t(24607),q=t(24538),b=t(15498),k=t(96486),ee=t.n(k),re,ie,le,E=(0,f.Z)([`
  margin: -58px -24px;
  border-radius: 4px;
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  background: rgba(255, 255, 255, 0.8);
  z-index: 2;
`],[`
  margin: -58px -24px;
  border-radius: 4px;
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  background: rgba(255, 255, 255, 0.8);
  z-index: 2;
`]),w=j.ZP.div(E),K=(0,b.Z)(re=(le=ie=function(F){(0,U.default)(h,F);function h(z){(0,d.default)(this,h);var X=(0,H.default)(this,(h.__proto__||o()(h)).call(this,z));X.cellObjs={},X.customwidget=V.createRef(),X.formcon=V.createRef();var B=z.projectId;X.hasDefaultRelateRecordTableControls=[];var x=S()(z.formData.concat((z.masterFormData||[]).map(function(Q){return(0,a.default)({},Q,{fromMaster:!0})})),{$apply:function(i){var m=[],v=i.map(function(u){var l=(0,a.default)({},u),T=ee().find(z.writeControls,function(G){return l.controlId===G.controlId});return l.advancedSetting=(0,a.default)({},l.advancedSetting||{},{defsource:"",defaultfunc:""}),T&&T.defsource&&T.defsource!=="[]"&&(l.value="",ee().includes([9,10,11],l.type)?l.value=l.default=safeParse(T.defsource)[0].staticValue:l.advancedSetting=(0,a.default)({},l.advancedSetting||{},{defsource:T.defsource}),m.push(l)),l});function W(u){var l=ee().find(z.writeControls,function(T){return u.controlId===T.controlId});return l&&l.type===1}var P=m.length?new I.ZP({data:v.filter(function(u){return ee().find(m,function(l){return l.controlId===u.controlId||(ee().get(l,"advancedSetting.defsource")||"").indexOf(u.controlId)>-1})}).map(function(u){return u.type===29&&u.enumDefault===2&&(0,k.get)(u,"advancedSetting.showtype")==="5"?(0,a.default)({},u,{disabled:W(u)}):u}),isCreate:!0,from:2,projectId:B,onAsyncChange:function(l){var T=l.controlId,G=l.value,D=ee().find(i,{controlId:T});D&&ee().includes([26,27,48],D.type)&&X.setState(function(M){return{formFlag:Math.random(),formData:M.formData.map(function(se){return se.controlId===T?(0,a.default)({},se,{value:G}):se})}})}}).getDataSource().filter(function(u){return ee().includes(z.writeControls.map(function(l){return l.controlId}),u.controlId)&&!ee().includes([30,31,37,38],u.type)}):[];return i=i.map(function(u){var l=ee().find(z.writeControls,function(D){return u.controlId===D.controlId});if(!ee().isUndefined(u.dataSource)){if(u.type===52)return(0,a.default)({},u,{controlPermissions:"111",fieldPermission:"111"});if(!l||u.fromMaster)return(0,a.default)({},u,{controlPermissions:"000"});if(u.type===29&&u.enumDefault===2&&u.advancedSetting.showtype==="2")return(0,a.default)({},u,{value:"",controlPermissions:"000"});u.type===29&&u.enumDefault===2&&u.advancedSetting.showtype==="5"&&(u.advancedSetting.allowdelete="0"),u.controlPermissions=u.controlPermissions[0]+(l.type===1?"0":"1")+u.controlPermissions[2],u.required=l.type===3,u.fieldPermission="111";var T=ee().find(P,function(D){return D.controlId===u.controlId});if(T)if(u.type===29&&u.enumDefault===2&&u.advancedSetting.showtype==="5"&&T.store)try{ee().isEmpty(T.store.getState().records)||(u.store=T.store,X.hasDefaultRelateRecordTableControls.push(T.controlId))}catch(D){}else if(u.type===29){var G=ee().filter(safeParse(T.value,"array"),function(D){return D.sid||D.sourcevalue});ee().isEmpty(G)||(u.value=y()(G),u.count=void 0)}else u.value=T.value;return u}}).filter(function(u){return!!u&&(!z.isBatchOperate||!ee().includes([34],u.type))}),i}});return X.state={formData:x,showError:!1},X}return(0,Z.default)(h,[{key:"handleSave",value:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}this.setState({submitLoading:!0}),this.customwidget.current.submitFormData()}},{key:"onSave",value:function(){var z=(0,te.Z)(L().mark(function B(x,Q){var i=this,m=Q.data,v=Q.updateControlIds,W=Q.handleRuleError,P,u,l,T,G,D;return L().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(!x){se.next=3;break}return this.setState({submitLoading:!1}),se.abrupt("return");case 3:if(P=this.props,u=P.writeControls,l=P.onSubmit,T=P.customButtonConfirm,G=void 0,D=m.filter(function(ae){return ee().find(u,function(ne){return ne.controlId===ae.controlId})}),!G){se.next=10;break}return alert(_l("\u8BF7\u6B63\u786E\u586B\u5199\u8BB0\u5F55"),3),this.setState({submitLoading:!1}),se.abrupt("return");case 10:if(!T){se.next=20;break}return se.prev=11,se.next=14,T();case 14:se.next=20;break;case 16:return se.prev=16,se.t0=se.catch(11),this.setState({submitLoading:!1}),se.abrupt("return");case 20:this.setState({isSubmitting:!0,submitLoading:!1}),v=ee().uniq(v.concat(u.filter(function(ae){return ae.defsource}).map(function(ae){return ae.controlId}))),l(D.filter(function(ae){return ee().find(v,function(ne){return ne===ae.controlId})}).map(function(ae){return(0,c.jz)(ae,{needFullUpdate:!0,hasDefaultRelateRecordTableControls:i.hasDefaultRelateRecordTableControls})}),(0,a.default)({},ee().pick(this.props,["appId","projectId","worksheetId","viewId","recordId"])),this.customwidget.current,function(ae,ne){ae&&i.setState({isSubmitting:!1,submitLoading:!1}),ne&&ne.resultCode===22&&i.customwidget.current.dataFormat.callStore("setUniqueError",{badData:ne.badData}),ne&&ne.resultCode===32&&W(ne.badData,i.cellObjs)});case 23:case"end":return se.stop()}},B,this,[[11,16]])}));function X(B,x){return z.apply(this,arguments)}return X}()},{key:"render",value:function(){var X=this,B=this.props,x=B.isCharge,Q=B.widgetStyle,i=B.recordId,m=B.visible,v=B.className,W=B.title,P=B.worksheetId,u=B.projectId,l=B.hideDialog,T=this.state,G=T.submitLoading,D=T.formData,M=T.showError,se=T.formFlag,ae=T.isSubmitting;return V.createElement(ce.Z,{allowScale:!0,className:s()("fillRecordControls",v),width:900,onCancel:function(){l()},okDisabled:G||ae,onOk:this.handleSave.bind(this),visible:m},V.createElement("div",{className:"newRecordTitle ellipsis Font19 mBottom10"},W),G&&V.createElement(w,null,V.createElement(g.Z,null)),V.createElement("div",{className:"formCon",ref:this.formcon},V.createElement(q.Z,{parentName:"fillRecordControls",isCharge:x,widgetStyle:Q,isWorksheetQuery:!0,ignoreLock:!0,flag:se,ref:this.customwidget,popupContainer:document.body,data:D.map(function(ne){return(0,a.default)({},ne,{isCustomButtonFillRecord:!0})}),recordId:i,disableRules:!i,from:3,appId:this.props.appId,projectId:u,worksheetId:P,showError:M,registerCell:function(de){var Ce=de.item,he=de.cell;return X.cellObjs[Ce.controlId]={item:Ce,cell:he}},disabledFunctions:["controlRefresh"],onChange:function(de){X.setState({formData:de})},onSave:this.onSave.bind(this)})))}}]),h}(V.Component),ie.propTypes={isBatchOperate:O().bool,visible:O().bool,title:O().string,recordId:O().string,className:O().string,worksheetId:O().string,projectId:O().string,formData:O().arrayOf(O().shape({})),writeControls:O().arrayOf(O().shape({})),hideDialog:O().func,onSubmit:O().func,customButtonConfirm:O().func},le))||re;const N=K},4923:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>Ae});var ce=t(8177),g=t.n(ce),p=t(33867),L=t(70264),te=t(42185),R=t(88106),y=t(85315),a=t(63239),r=t.n(a),o=t(94942),d=t.n(o),Z=t(36803),H=t(69288),U=t(46593),f=t.n(U),V=t(88239),C=t(9122),O=t(85105),n=t.n(O),s=t(99663),j=t(22600),A=t(49135),S=t(93196),I=t(16469),c=t(86735),q=t(67294),b=t(45697),k=t.n(b),ee=t(44894),re=t(93967),ie=t.n(re),le=t(71893),E=t(14440),w=t(15577),K=t(58002),N=t(12246),F=t(34537);const h=F.Z;var z=t(15742),X=t(45231),B=t(88349),x=t(42638),Q=t(96486),i=t.n(Q),m=t(1952),v=t(72557),W=t(12424),P=t(62521),u=t(34279),l=t(64749),T=t(62745),G=t(93002),D=(0,c.Z)([`
  font-size: 13px;
  color: #333;
  font-weight: 500;
  margin: 18px 0 8px;
  position: relative;
  &.required {
    &:before {
      position: absolute;
      left: -10px;
      top: 3px;
      color: red;
      content: '*';
    }
  }
`],[`
  font-size: 13px;
  color: #333;
  font-weight: 500;
  margin: 18px 0 8px;
  position: relative;
  &.required {
    &:before {
      position: absolute;
      left: -10px;
      top: 3px;
      color: red;
      content: '*';
    }
  }
`]),M=(0,c.Z)([`
  &::placeholder {
    color: #bfbfbf;
  }
`],[`
  &::placeholder {
    color: #bfbfbf;
  }
`]),se=(0,c.Z)([`
  width: 100%;
  &.ant-select-focused {
    .ant-select-selector {
      border-color: #1e88e5 !important;
      box-shadow: none !important;
    }
  }
  .ant-select-selector {
    height: 36px !important;
    border-color: #ccc !important;
    border-radius: 4px !important;
    padding: 3px 10px !important;
    transition: none !important;
    .ant-select-selection-item {
      line-height: 28px !important;
    }
  }
  input {
    height: 34px !important;
  }
`],[`
  width: 100%;
  &.ant-select-focused {
    .ant-select-selector {
      border-color: #1e88e5 !important;
      box-shadow: none !important;
    }
  }
  .ant-select-selector {
    height: 36px !important;
    border-color: #ccc !important;
    border-radius: 4px !important;
    padding: 3px 10px !important;
    transition: none !important;
    .ant-select-selection-item {
      line-height: 28px !important;
    }
  }
  input {
    height: 34px !important;
  }
`]),ae=(0,c.Z)([`
  right: 0 !important;
  width: auto !important;
  margin-top: -1px;
  max-height: 250px;
  overflow-x: hidden;
  overflow-y: auto;
  .ming.Item {
    min-height: 36px !important;
    height: auto !important;
  }
  .Item-content {
    overflow: inherit !important;
    word-break: break-all !important;
    white-space: inherit !important;
    line-height: 20px !important;
    min-height: 36px;
    padding-top: 8px !important;
    padding-bottom: 8px !important;
    white-space: break-spaces !important;
  }
`],[`
  right: 0 !important;
  width: auto !important;
  margin-top: -1px;
  max-height: 250px;
  overflow-x: hidden;
  overflow-y: auto;
  .ming.Item {
    min-height: 36px !important;
    height: auto !important;
  }
  .Item-content {
    overflow: inherit !important;
    word-break: break-all !important;
    white-space: inherit !important;
    line-height: 20px !important;
    min-height: 36px;
    padding-top: 8px !important;
    padding-bottom: 8px !important;
    white-space: break-spaces !important;
  }
`]),ne=(0,c.Z)([`
  height: 36px;
  background: #f5f5f5;
  border-radius: 3px;
  border: 1px solid #ddd;
  padding: 0 10px;
`],[`
  height: 36px;
  background: #f5f5f5;
  border-radius: 3px;
  border: 1px solid #ddd;
  padding: 0 10px;
`]),de=le.ZP.div(D),Ce=(0,le.ZP)(T.Z)(M),he=(0,le.ZP)(l.default)(se),fe=(0,le.ZP)(P.Z)(ae),Ee=le.ZP.div(ne);function Y(Ne){var Me=Ne.title,Fe=Ne.description,Be=Ne.okText,we=Ne.cancelText,Ie=Ne.enableRemark,ge=Ne.remarkName,Re=Ne.remarkHint,Pe=Ne.remarkRequired,ke=Ne.verifyPwd,We=Ne.onOk,Ve=Ne.onClose,it=Ne.remarkoptions,Ge=Ne.remarktype,pt=Ne.projectId,ot=function(){var qe="",nt=(i().get(safeParse(it),"template")||[]).filter(function(Ze){return Ze.selected});return nt.length&&(qe=nt[0].value),qe},vt=(0,G.Z)({noVerify:!1,needPassWord:!1,checkIsPending:!1,remark:ot(),showTemplateList:!1,removeNoneVerification:!1}),At=(0,W.Z)(vt,2),yt=At[0],st=yt.noVerify,St=yt.needPassWord,Qe=yt.checkIsPending,Xe=yt.remark,$e=yt.showTemplateList,Ke=yt.removeNoneVerification,Ue=yt.password,He=At[1],ze=(0,q.useRef)();(0,q.useEffect)(function(){He({checkIsPending:!0}),(0,w.Gv)({projectId:pt,checkNeedAuth:!0,success:function(){He({checkIsPending:!1})},fail:function(qe){He({checkIsPending:!1,needPassWord:!0,removeNoneVerification:qe==="showPassword"})}}),i().get(ze,"current.textarea")&&!it&&i().get(ze,"current.textarea").focus()},[]);var gt=function(){var qe=(i().get(safeParse(it),"template")||[]).map(function(Ze){return{value:Ze.value,label:Ze.value}}),nt={placeholder:Re};return Xe&&(nt.defaultValue=Xe),q.createElement(he,(0,V.default)({showSearch:!0,allowClear:!0,suffixIcon:q.createElement(p.Z,{icon:"arrow-down-border Font14"}),notFoundContent:q.createElement("span",{className:"Gray_9e"},_l("\u65E0\u5339\u914D\u7ED3\u679C")),dropdownClassName:"templateListSelect",onChange:function(et){return He({remark:et})},onClear:function(){return He({remark:""})},filterOption:function(et,ut){return ut.label.toLowerCase().includes(et.toLowerCase())},options:qe},nt))},Et=function(){var qe=(i().get(safeParse(it),"template")||[]).filter(function(nt){return nt.value.indexOf(Xe)>-1});return!$e||!qe.length?null:q.createElement(fe,{onClickAwayExceptions:[".customButtonConfirmDialog .Textarea"],onClickAway:function(){return He({showTemplateList:!1})}},qe.map(function(nt,Ze){return q.createElement(I.Z,{key:Ze,onClick:function(){return He({remark:nt.value,showTemplateList:!1})}},nt.value)}))};return q.createElement(H.Z,{visible:!0,className:"customButtonConfirm customButtonConfirmDialog",title:q.createElement("b",null,Me),okText:Be,cancelText:we,okDisabled:Qe,onOk:function(){if(Ie&&Pe&&!(Xe||"").trim()){alert(_l("%0\u4E0D\u80FD\u4E3A\u7A7A",ge),3);return}ke&&St?(0,w.Gv)({password:Ue,isNoneVerification:st,closeImageValidation:!0,success:function(){We({remark:Xe}),Ve()}}):(We({remark:Xe}),Ve())},onCancel:Ve},ke&&St&&q.createElement(v.Z,{isRequired:!0,allowNoVerify:!Ke,onChange:function(qe){var nt=qe.password;return He({password:nt})}}),Fe&&q.createElement("div",{className:"Font14 Gray_75"},Fe),Ie&&q.createElement(q.Fragment,null,q.createElement(de,{className:ie()({required:Pe})},ge||_l("\u5907\u6CE8")),q.createElement("div",{className:"Relative"},Ge==="1"&&safeParse(it).template?gt():q.createElement(Ce,{ref:ze,minHeight:0,style:{paddingTop:9,paddingBottom:9},maxHeight:240,value:Xe,onChange:function(qe){return He({remark:qe})},onFocus:function(){return He({showTemplateList:!0})},onBlue:function(){return He({showTemplateList:!1})},placeholder:Re}),Ge!=="1"&&Et())))}var oe=t(89499),ve,ue,pe,Se,ye,J=(0,c.Z)([`
  .btnName {
    max-width: calc(100% - 34px);
    display: inline-block;
  }
  &.disabled {
    cursor: not-allowed !important;
    opacity: 0.5;
  }
  &:not(.disabled):hover {
    .Icon {
      color: #fff !important;
    }
  }
`],[`
  .btnName {
    max-width: calc(100% - 34px);
    display: inline-block;
  }
  &.disabled {
    cursor: not-allowed !important;
    opacity: 0.5;
  }
  &:not(.disabled):hover {
    .Icon {
      color: #fff !important;
    }
  }
`]);function me(Ne,Me,Fe,Be,we){var Ie={};return Object.keys(Be).forEach(function(ge){Ie[ge]=Be[ge]}),Ie.enumerable=!!Ie.enumerable,Ie.configurable=!!Ie.configurable,("value"in Ie||Ie.initializer)&&(Ie.writable=!0),Ie=Fe.slice().reverse().reduce(function(ge,Re){return Re(Ne,Me,ge)||ge},Ie),we&&Ie.initializer!==void 0&&(Ie.value=Ie.initializer?Ie.initializer.call(we):void 0,Ie.initializer=void 0),Ie.initializer===void 0&&(Object.defineProperty(Ne,Me,Ie),Ie=null),Ie}var be=(0,le.ZP)(I.Z)(J),xe=function(Me){return(0,m.Z)(Y,Me)},Ae=(pe=(ye=Se=function(Ne){(0,S.default)(Me,Ne);function Me(){var Fe,Be,we,Ie;(0,s.default)(this,Me);for(var ge=arguments.length,Re=Array(ge),Pe=0;Pe<ge;Pe++)Re[Pe]=arguments[Pe];return Ie=(Be=(we=(0,A.default)(this,(Fe=Me.__proto__||n()(Me)).call.apply(Fe,[this].concat(Re))),we),we.state={},Be),(0,A.default)(we,Ie)}return(0,j.default)(Me,[{key:"triggerCustomBtn",value:function(Be){var we=this.props,Ie=we.worksheetId,ge=we.recordId,Re=we.handleUpdateWorksheetRow,Pe=we.projectId;if(this.remark=void 0,window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}var ke=this.props,We=ke.count,Ve=ke.iseditting,it=ke.triggerCallback,Ge=ke.handleTriggerCustomBtn,pt=this;if(Ve){alert(_l("\u6B63\u5728\u7F16\u8F91\u8BB0\u5F55\uFF0C\u65E0\u6CD5\u89E6\u53D1\u81EA\u5B9A\u4E49\u6309\u94AE"),3);return}function ot(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},st=yt.remark;function St(Qe){if(Ge){Ge(Qe);return}pt.triggerImmediately(Qe.btnId,Qe),it()}if(i().get(Be,"advancedSetting.enableremark")&&st){if(i().isFunction(Re)){Re({worksheetId:Ie,rowId:ge,newOldControl:[],btnRemark:st,btnId:Be.btnId,btnWorksheetId:Ie,btnRowId:ge,noAlert:!0});return}X.Z.updateWorksheetRow({worksheetId:Ie,rowId:ge,newOldControl:[],btnRemark:st,btnId:Be.btnId,btnWorksheetId:Ie,btnRowId:ge,noAlert:!0})}else St(Be)}function vt(yt){C.Z.confirm({allowNoVerify:!yt,isRequired:!0,closeImageValidation:!0,onOk:ot})}function At(){var yt=Be.enableConfirm||Be.clickType===z.Pd.CONFIRM;function st(){var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Xe=Qe.onOk,$e=Qe.onClose,Ke=$e===void 0?function(){}:$e;xe({projectId:Pe,title:Be.confirmMsg,description:i().get(Be,"advancedSetting.confirmcontent"),enableRemark:i().get(Be,"advancedSetting.enableremark"),remarkName:i().get(Be,"advancedSetting.remarkname"),remarkHint:i().get(Be,"advancedSetting.remarkhint"),remarkRequired:i().get(Be,"advancedSetting.remarkrequired"),remarkoptions:i().get(Be,"advancedSetting.remarkoptions"),remarktype:i().get(Be,"advancedSetting.remarktype"),verifyPwd:Be.verifyPwd,okText:Be.sureName,cancelText:Be.cancelName,onOk:Xe||ot,onClose:Ke})}if(Be.clickType===z.Pd.FILL_RECORD){pt.fillRecord((0,V.default)({},Be,{confirm:yt||Be.verifyPwd?function(){return new(f())(function(Qe,Xe){st({onOk:function(Ke){var Ue=Ke.remark;pt.remark=Ue,Qe(Ue)},onClose:Xe})})}:void 0}));return}function St(){Be.verifyPwd?(0,w.Gv)({projectId:Pe,checkNeedAuth:!0,success:ot,fail:function(Xe){return vt(Xe==="showPassword")}}):ot()}yt?st():St()}We>md.global.SysSettings.worktableBatchOperateDataLimitCount?H.Z.confirm({title:q.createElement("span",{style:{fontWeight:500,lineHeight:"1.5em"}},_l("\u6700\u5927\u652F\u6301\u6279\u91CF\u6267\u884C%0\u884C\u8BB0\u5F55\uFF0C\u662F\u5426\u53EA\u9009\u4E2D\u5E76\u6267\u884C\u524D%0\u884C\u6570\u636E\uFF1F",md.global.SysSettings.worktableBatchOperateDataLimitCount)),onOk:At}):At()}},{key:"triggerImmediately",value:function(Be,we){var Ie=this.props,ge=Ie.worksheetId,Re=Ie.recordId,Pe=Ie.loadBtns,ke=Ie.onButtonClick;ke(Be),x.Z.startProcess({appId:ge,sources:[Re],triggerId:Be,pushUniqueId:i().get(window,"md.global.Config.pushUniqueId")}).then(function(We){We?Pe():E.Z.error({title:_l('\u6279\u91CF\u64CD\u4F5C"%0"',we.name),description:_l("\u5931\u8D25\uFF0C\u8BB0\u5F55\u4E0D\u6EE1\u8DB3\u6267\u884C\u6761\u4EF6\u6216\u6D41\u7A0B\u5C1A\u672A\u542F\u7528"),duration:3})})}},{key:"handleAddRecordCallback",value:function(Be){var we=this.props,Ie=we.reloadRecord,ge=we.loadBtns,Re=we.triggerCallback,Pe=this.activeBtn,ke=Pe===void 0?{}:Pe,We=ke.writeObject+""+ke.writeType;this.activeBtn.workflowType===2&&alert(_l("\u64CD\u4F5C\u6210\u529F")),ge(),We==="12"&&Ie(),Re()}},{key:"fillRecordControls",value:function(Be,we,Ie){var ge=this,Re=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},Pe=this.props,ke=Pe.worksheetId,We=Pe.recordId,Ve=Pe.hideRecordInfo,it=Pe.onUpdate,Ge=Pe.onUpdateRow,pt=Pe.loadBtns,ot=Pe.triggerCallback,vt=Pe.isFromBatchEdit,At=Pe.isAll,yt=Pe.selectedRows,st=Pe.handleUpdateWorksheetRow,St={appId:we.appId,viewId:we.viewId,worksheetId:we.worksheetId,rowId:we.recordId,projectID:we.projectId,newOldControl:Be,btnId:this.activeBtn.btnId,hasFilters:!!this.activeBtn.filters.length,btnWorksheetId:ke,btnRowId:We,pushUniqueId:md.global.Config.pushUniqueId,btnRemark:this.remark};if(i().isFunction(st)){st(St),this.setStateFn({fillRecordControlsVisible:!1});return}X.Z.updateWorksheetRow(St).then(function(Qe){Qe&&Qe.data?(ge.setStateFn({fillRecordControlsVisible:!1}),pt(),Ge(Qe.data),ge.activeBtn.workflowType===2&&alert(_l("\u64CD\u4F5C\u6210\u529F")),we.recordId===We&&it(i().pick(Qe.data,Be.map(function(Xe){return Xe.controlId}).concat("isviewdata")),Qe.data,Be),ge.activeBtn.writeObject===1&&!Qe.data.isviewdata&&Ve(),ot()):Qe.resultCode===11?Ie&&i().isFunction(Ie.uniqueErrorUpdate)&&(Ie.uniqueErrorUpdate(Qe.badData),Re(!0)):Qe.resultCode===22?((0,oe.a)(Qe.resultCode),Re(!0,Qe)):Qe.resultCode===32?Re(!0,Qe):((0,oe.a)(Qe.resultCode),Re(!0))})}},{key:"overrideValue",value:function(Be,we){return Be.map(function(Ie){var ge=i().find(we,function(Re){return Re.controlId===Ie.controlId});return(0,V.default)({},Ie,{value:ge?ge.value:""})})}},{key:"fillRecord",value:function(){var Fe=(0,Z.Z)(d().mark(function we(Ie){var ge,Re,Pe,ke,We,Ve,it,Ge,pt,ot,vt;return d().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:if(ge=this.props,Re=ge.worksheetId,Pe=ge.recordId,ke=void 0,!Pe){yt.next=8;break}return yt.next=5,(0,B.r)({worksheetId:Re,getType:1,rowId:Pe});case 5:ke=yt.sent,yt.next=12;break;case 8:return yt.next=10,X.Z.getWorksheetInfo({worksheetId:Re,getTemplate:!0});case 10:We=yt.sent,ke={formData:We.template.controls,advancedSetting:We.advancedSetting};case 12:this.setStateFn({rowInfo:ke}),Ve=Ie.writeObject+""+Ie.writeType,it=i().find(ke.formData,function(st){return st.controlId===Ie.relationControl}),Ge=i().find(ke.formData||[],function(st){return st.controlId===Ie.addRelationControl}),this.activeBtn=Ie,this.fillRecordProps={},this.customButtonConfirm=Ie.confirm,yt.t0=Ve,yt.next=yt.t0==="11"?22:yt.t0==="12"?27:yt.t0==="21"?43:yt.t0==="22"?58:71;break;case 22:return this.btnRelateWorksheetId=Re,this.fillRecordId=Pe,this.fillRecordProps={formData:ke.formData,widgetStyle:ke.advancedSetting},this.setStateFn({fillRecordControlsVisible:!0}),yt.abrupt("break",71);case 27:if(!(!Ge||!i().isObject(Ge))){yt.next=30;break}return H.Z.confirm({title:_l("\u65E0\u6CD5\u6267\u884C\u6309\u94AE\u201C%0\u201D",Ie.name),description:_l("\u5173\u8054\u5B57\u6BB5\u88AB\u9690\u85CF\u6216\u5DF2\u5220\u9664"),removeCancelBtn:!0,buttonType:"danger"}),yt.abrupt("return");case 30:if(yt.prev=30,pt=JSON.parse(Ge.value),!(Ge.enumDefault===1&&pt.length)){yt.next=35;break}return H.Z.confirm({title:_l("\u65E0\u6CD5\u6267\u884C\u6309\u94AE\u201C%0\u201D",Ie.name),description:_l("\u201C%0\u201D\u5DF2\u6709\u5173\u8054\u8BB0\u5F55\uFF0C\u65E0\u6CD5\u91CD\u590D\u6DFB\u52A0",Ge.controlName),removeCancelBtn:!0,buttonType:"danger"}),yt.abrupt("return");case 35:yt.next=39;break;case 37:yt.prev=37,yt.t1=yt.catch(30);case 39:return this.btnAddRelateWorksheetId=Ge.dataSource,this.masterRecord={rowId:Pe,controlId:Ge.controlId,worksheetId:Re},this.setStateFn({newRecordVisible:!0}),yt.abrupt("break",71);case 43:if(!(!it||!i().isObject(it))){yt.next=45;break}return yt.abrupt("return");case 45:this.btnRelateWorksheetId=it.dataSource,yt.prev=46,ot=JSON.parse(it.value),this.fillRecordId=ot[0].sid,this.fillRecordProps={appId:it.appId,rowId:this.fillRecordId,viewId:it.viewId,masterFormData:ke.formData,widgetStyle:ke.advancedSetting},yt.next=56;break;case 52:return yt.prev=52,yt.t2=yt.catch(46),H.Z.confirm({title:_l("\u65E0\u6CD5\u6267\u884C\u6309\u94AE\u201C%0\u201D",Ie.name),description:_l("\u201C%0\u201D\u4E3A\u7A7A\uFF0C\u8BF7\u5173\u8054\u64CD\u4F5C\u540E\u518D\u6267\u884C\u6309\u94AE\u64CD\u4F5C",it.controlName),removeCancelBtn:!0,buttonType:"danger"}),yt.abrupt("return");case 56:return this.setStateFn({fillRecordControlsVisible:!0}),yt.abrupt("break",71);case 58:if(!(!it||!i().isObject(it))){yt.next=60;break}return yt.abrupt("return");case 60:yt.prev=60,vt=JSON.parse(it.value),this.fillRecordId=vt[0].sid,this.addRelateRecordRelateRecord(it,Ie.addRelationControl),yt.next=70;break;case 66:return yt.prev=66,yt.t3=yt.catch(60),H.Z.confirm({title:_l("\u65E0\u6CD5\u6267\u884C\u6309\u94AE\u201C%0\u201D",Ie.name),description:_l("\u201C%0\u201D\u4E3A\u7A7A\uFF0C\u8BF7\u5173\u8054\u64CD\u4F5C\u540E\u518D\u6267\u884C\u6309\u94AE\u64CD\u4F5C",it.controlName),removeCancelBtn:!0,buttonType:"danger"}),yt.abrupt("return");case 70:return yt.abrupt("break",71);case 71:case"end":return yt.stop()}},we,this,[[30,37],[46,52],[60,66]])}));function Be(we){return Fe.apply(this,arguments)}return Be}()},{key:"addRelateRecordRelateRecord",value:function(Be,we){var Ie=this,ge=void 0;try{ge=JSON.parse(Be.value)}catch(Re){return}(0,B.r)({worksheetId:Be.dataSource,getType:1,appId:Be.appId,rowId:ge[0].sid}).then(function(Re){var Pe=i().find(Re.formData,function(We){return We.controlId===we});if(!Pe){H.Z.confirm({title:_l("\u65E0\u6CD5\u6267\u884C\u6309\u94AE\u201C%0\u201D",Ie.activeBtn.name),description:_l("\u5173\u8054\u5B57\u6BB5\u88AB\u9690\u85CF\u6216\u5DF2\u5220\u9664"),removeCancelBtn:!0,buttonType:"danger"});return}try{var ke=JSON.parse(Pe.value);if(Pe.enumDefault===1&&ke.length){H.Z.confirm({title:_l("\u65E0\u6CD5\u6267\u884C\u6309\u94AE\u201C%0\u201D",Ie.activeBtn.name),description:_l("\u201C%0\u201D\u5DF2\u6709\u5173\u8054\u8BB0\u5F55\uFF0C\u65E0\u6CD5\u91CD\u590D\u6DFB\u52A0",Pe.controlName),removeCancelBtn:!0,buttonType:"danger"});return}}catch(We){}Ie.masterRecord={rowId:ge[0].sid,controlId:Pe.controlId,worksheetId:Be.dataSource},Pe&&(Ie.btnAddRelateWorksheetId=Pe.dataSource,Ie.setStateFn({newRecordVisible:!0,rowInfo:Re}))})}},{key:"setStateFn",value:function(Be){var we=this.props.setCustomButtonActive;(typeof Be.fillRecordControlsVisible<"u"||typeof Be.newRecordVisible<"u")&&we(Be.fillRecordControlsVisible||Be.newRecordVisible),this.setState(Be)}},{key:"renderDialogs",value:function(){var Be=this,we=this.props,Ie=we.isCharge,ge=we.worksheetId,Re=we.viewId,Pe=we.appId,ke=we.recordId,We=we.projectId,Ve=we.isBatchOperate,it=we.triggerCallback,Ge=this.state,pt=Ge.rowInfo,ot=Ge.fillRecordControlsVisible,vt=Ge.newRecordVisible,At=this.activeBtn,yt=At===void 0?{}:At,st=this.fillRecordId,St=this.btnRelateWorksheetId,Qe=this.fillRecordProps,Xe=yt.writeObject+""+yt.writeType;return q.createElement(q.Fragment,{key:"dialogs"},ot&&q.createElement(h,(0,V.default)({isCharge:Ie,isBatchOperate:Ve,className:"recordOperateDialog",title:yt.name,loadWorksheetRecord:Xe==="21",viewId:Re,appId:Pe,recordId:st,projectId:We,visible:ot,worksheetId:St,writeControls:yt.writeControls,onSubmit:this.fillRecordControls,hideDialog:function(){Be.setStateFn({fillRecordControlsVisible:!1}),it()}},Qe,{customButtonConfirm:this.customButtonConfirm})),vt&&q.createElement(N.default,{isCustomButton:!0,title:this.activeBtn.name,className:"worksheetRelateNewRecord recordOperateDialog",worksheetId:this.btnAddRelateWorksheetId,addType:2,filterRelateSheetrecordbase:ge,visible:vt,masterRecord:this.masterRecord,projectId:We,customBtn:{btnId:this.activeBtn.btnId,btnWorksheetId:ge,btnRowId:ke},customButtonConfirm:this.customButtonConfirm,defaultRelatedSheet:{worksheetId:this.masterRecord.worksheetId,relateSheetControlId:yt.addRelationControl,value:{sid:this.masterRecord.rowId,sourcevalue:r()([{rowid:this.masterRecord.rowId}].concat((0,y.Z)(pt?pt.formData:[])).reduce(function($e,Ke){return(0,V.default)({},$e,(0,R.default)({},Ke.controlId,Ke.value))}))}},hideNewRecord:function(){Be.setStateFn({newRecordVisible:!1}),it()},onAdd:this.handleAddRecordCallback}))}},{key:"render",value:function(){var Be=this,we=this.props,Ie=we.type,ge=Ie===void 0?"button":Ie,Re=we.btnDisable,Pe=Re===void 0?{}:Re,ke=we.hideDisabled,We=we.onHideMoreBtn,Ve=this.props.buttons;ke&&(Ve=Ve.filter(function(Ge){return!(Pe[Ge.btnId]||Ge.disabled)})),md.global.Account.isPortal&&(Ve=Ve.map(function(Ge){return(0,V.default)({},Ge,{verifyPwd:!1})}));var it=[];return ge==="button"?it=Ve.map(function(Ge,pt){var ot=q.createElement("span",{key:pt,className:"InlineBlock borderBox mRight6"},q.createElement(te.ZP,{className:ie()("recordCustomButton overflowHidden",{transparentButton:Ge.color==="transparent"}),size:"small",type:"ghost",disabled:Pe[Ge.btnId]||Ge.disabled,style:(0,V.default)({},(0,oe.pQ)(Ge.color),{maxWidth:"100%",minWidth:"inherit"}),onClick:function(At){Pe[Ge.btnId]||Ge.disabled||(We(At),Be.triggerCustomBtn(Ge))}},q.createElement("div",{className:"content ellipsis"},Ge.icon&&q.createElement("i",{className:"icon icon-"+Ge.icon}),q.createElement("span",{className:"breakAll overflow_ellipsis"},Ge.name))));return Ge.desc&&ge==="button"?q.createElement(L.Z,{popupPlacement:"bottom",tooltipStyle:{maxWidth:350},text:q.createElement("span",null,Ge.desc)},ot):ot}):ge==="iconText"?it=Ve.map(function(Ge,pt){return q.createElement(K.Z,{disabled:Pe[Ge.btnId]||Ge.disabled,icon:Ge.icon||"custom_actions",iconColor:Ge.icon?Ge.color==="transparent"?"#333":Ge.color:"#bdbdbd",text:Ge.name,onClick:function(vt){Pe[Ge.btnId]||Ge.disabled||(We(vt),Be.triggerCustomBtn(Ge))}})}):it=Ve.map(function(Ge,pt){return q.createElement(be,{key:pt,icon:Ge.icon?q.createElement(p.Z,{style:{color:Ge.color==="transparent"?"#333":Ge.color},icon:Ge.icon||"custom_actions",className:"Font17 mLeft5"}):q.createElement(p.Z,{icon:"custom_actions",className:"Font17 mLeft5 Gray_bd"}),className:ie()({disabled:Pe[Ge.btnId]||Ge.disabled}),onClick:function(vt){Pe[Ge.btnId]||Ge.disabled||(document.body.click(),Be.triggerCustomBtn(Ge))}},q.createElement("span",{className:"btnName mLeft15 ellipsis"},Ge.name),Ge.desc&&q.createElement(L.Z,{popupPlacement:"bottom",tooltipStyle:{maxWidth:350},text:q.createElement("span",null,Ge.desc)},q.createElement("i",{className:"icon icon-info_outline Font17 mTop9 Right"})))}),q.createElement(q.Fragment,null,this.renderDialogs(),it)}}]),Me}(q.Component),Se.propTypes={iseditting:k().bool,isBatchOperate:k().bool,type:k().string,projectId:k().string,viewId:k().string,worksheetId:k().string,recordId:k().string,buttons:k().arrayOf(k().shape({})),btnDisable:k().shape({}),loadBtns:k().func,hideRecordInfo:k().func,reloadRecord:k().func,onHideMoreBtn:k().func,triggerCallback:k().func,onUpdate:k().func,setCustomButtonActive:k().func,onButtonClick:k().func},Se.defaultProps={loadBtns:function(){},onUpdate:function(){},onUpdateRow:function(){},hideRecordInfo:function(){},reloadRecord:function(){},onHideMoreBtn:function(){},triggerCallback:function(){},setCustomButtonActive:function(){},onButtonClick:function(){}},ye),me(pe.prototype,"triggerCustomBtn",[ee.Nj],g()(pe.prototype,"triggerCustomBtn"),pe.prototype),me(pe.prototype,"triggerImmediately",[ee.Nj],g()(pe.prototype,"triggerImmediately"),pe.prototype),me(pe.prototype,"handleAddRecordCallback",[ee.Nj],g()(pe.prototype,"handleAddRecordCallback"),pe.prototype),me(pe.prototype,"fillRecordControls",[ee.Nj],g()(pe.prototype,"fillRecordControls"),pe.prototype),me(pe.prototype,"setStateFn",[ee.Nj],g()(pe.prototype,"setStateFn"),pe.prototype),pe)},12842:(lt,Te,t)=>{"use strict";if(t.d(Te,{Z:()=>k}),!/^(1887|7596|7798)$/.test(t.j))var ce=t(25273);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(33867);var p=t(12424),L=t(29073),te=t.n(L),R=t(60713),y=t(86735),a=t(67294),r=t(71893);if(!/^(1887|7596|7798)$/.test(t.j))var o=t(95283);if(!/^(1887|7596|7798)$/.test(t.j))var d=t(57015);var Z=t(96486),H=t.n(Z);if(!/^(1887|7596|7798)$/.test(t.j))var U=t(27409);if(!/^(1887|7596|7798)$/.test(t.j))var f=t(15577);var V=t(93967),C=t.n(V),O=(0,y.Z)([`
  display: flex;
  .thumbnailBox {
    height: `,`;
    width: `,`;
    .nano-content {
      padding-right: 10px;
    }
    .thumbnailContainer {
      width: 100%;
      height: 100%;
      `,`
      background: `,`;
    }
  }
`],[`
  display: flex;
  .thumbnailBox {
    height: `,`;
    width: `,`;
    .nano-content {
      padding-right: 10px;
    }
    .thumbnailContainer {
      width: 100%;
      height: 100%;
      `,`
      background: `,`;
    }
  }
`]),n=(0,y.Z)([`
  position: relative;
  width: `,`;
  height: `,`;
  background: `,`;
  overflow: hidden;
  cursor: pointer;
  box-sizing: border-box;
  `,`
  `,`
  `,`
  &:first-child {
    margin-top: 0px;
  }
  &:last-child {
    margin-bottom: 0px;
  }
  video {
    width: 100%;
    height: 100%;
    object-fit: `,`;
  }
  .playIcon {
    position: absolute;
    left: calc(50% - 25px);
    bottom: 80px;
    background: rgba(0, 0, 0, 0.3);
    width: 50px;
    height: 50px;
    text-align: center;
    line-height: 50px;
    border-radius: 50%;
    font-size: 36px;
    color: rgba(255, 255, 255, 0.85);
  }
  .image {
    width: 100%;
    height: 100%;
    background-position: 50%;
    background-image: `,`;
    `,`;
    `,`
  }
  .bgBlur {
    width: 120%;
    height: 120%;
    margin-left: -10%;
    margin-top: -3%;
    position: absolute;
    left: 0px;
    top: 0px;
    background-repeat: no-repeat;
    background-size: cover !important;
    background: `,`;
    background-position: 50%;
    -webkit-filter: blur(30px);
    -moz-filter: blur(30px);
    -o-filter: blur(30px);
    -ms-filter: blur(30px);
    filter: blur(30px);
  }
`],[`
  position: relative;
  width: `,`;
  height: `,`;
  background: `,`;
  overflow: hidden;
  cursor: pointer;
  box-sizing: border-box;
  `,`
  `,`
  `,`
  &:first-child {
    margin-top: 0px;
  }
  &:last-child {
    margin-bottom: 0px;
  }
  video {
    width: 100%;
    height: 100%;
    object-fit: `,`;
  }
  .playIcon {
    position: absolute;
    left: calc(50% - 25px);
    bottom: 80px;
    background: rgba(0, 0, 0, 0.3);
    width: 50px;
    height: 50px;
    text-align: center;
    line-height: 50px;
    border-radius: 50%;
    font-size: 36px;
    color: rgba(255, 255, 255, 0.85);
  }
  .image {
    width: 100%;
    height: 100%;
    background-position: 50%;
    background-image: `,`;
    `,`;
    `,`
  }
  .bgBlur {
    width: 120%;
    height: 120%;
    margin-left: -10%;
    margin-top: -3%;
    position: absolute;
    left: 0px;
    top: 0px;
    background-repeat: no-repeat;
    background-size: cover !important;
    background: `,`;
    background-position: 50%;
    -webkit-filter: blur(30px);
    -moz-filter: blur(30px);
    -o-filter: blur(30px);
    -ms-filter: blur(30px);
    filter: blur(30px);
  }
`]),s=(0,y.Z)([`
  &.slick-slider .slick-dots li {
    width: 10px;
    height: 10px;
    button {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      border: 1px solid #fff;
      background-color: transparent;
      opacity: 1;
      &:hover {
        opacity: 1;
        background-color: #fff;
      }
    }
    &.slick-active {
      width: 10px;
      button {
        opacity: 1;
        background-color: #fff !important;
      }
    }
  }
  .slick-dots {
    margin: 0 !important;
  }
  .slick-dots li button {
    box-shadow: 0 2px 6px 0px rgb(0 0 0 / 15%);
  }
  .hideMore {
    cursor: pointer !important;
    word-break: break-all;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    /* autoprefixer: off */
    -webkit-box-orient: vertical;
    /* autoprefixer: on */
  }

  &.slick-slider:hover {
    .slick-prev,
    .slick-next {
      display: flex !important;
    }
  }

  &.slick-slider .slick-prev,
  &.slick-slider .slick-next {
    width: 24px;
    height: 48px;
    overflow: hidden;
    align-items: center;
    justify-content: center;
    margin-top: -24px;
    background-color: rgb(51 51 51 / 40%);
    display: none !important;
    &:hover {
      background-color: rgb(51 51 51 / 60%);
      .icon {
        opacity: 0.7;
      }
    }
  }

  &.slick-slider .slick-prev,
  &.slick-slider .slick-prev:hover {
    left: 0;
    z-index: 2;
    color: white;
    border-radius: 0px 6px 6px 0px;
  }

  &.slick-slider .slick-next,
  &.slick-slider .slick-next:hover {
    right: 0;
    z-index: 2;
    color: white;
    border-radius: 6px 0px 0px 6px;
  }
`],[`
  &.slick-slider .slick-dots li {
    width: 10px;
    height: 10px;
    button {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      border: 1px solid #fff;
      background-color: transparent;
      opacity: 1;
      &:hover {
        opacity: 1;
        background-color: #fff;
      }
    }
    &.slick-active {
      width: 10px;
      button {
        opacity: 1;
        background-color: #fff !important;
      }
    }
  }
  .slick-dots {
    margin: 0 !important;
  }
  .slick-dots li button {
    box-shadow: 0 2px 6px 0px rgb(0 0 0 / 15%);
  }
  .hideMore {
    cursor: pointer !important;
    word-break: break-all;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    /* autoprefixer: off */
    -webkit-box-orient: vertical;
    /* autoprefixer: on */
  }

  &.slick-slider:hover {
    .slick-prev,
    .slick-next {
      display: flex !important;
    }
  }

  &.slick-slider .slick-prev,
  &.slick-slider .slick-next {
    width: 24px;
    height: 48px;
    overflow: hidden;
    align-items: center;
    justify-content: center;
    margin-top: -24px;
    background-color: rgb(51 51 51 / 40%);
    display: none !important;
    &:hover {
      background-color: rgb(51 51 51 / 60%);
      .icon {
        opacity: 0.7;
      }
    }
  }

  &.slick-slider .slick-prev,
  &.slick-slider .slick-prev:hover {
    left: 0;
    z-index: 2;
    color: white;
    border-radius: 0px 6px 6px 0px;
  }

  &.slick-slider .slick-next,
  &.slick-slider .slick-next:hover {
    right: 0;
    z-index: 2;
    color: white;
    border-radius: 6px 0px 0px 6px;
  }
`]),j=(0,y.Z)([`
  position: relative;
  flex: 1;
  min-width: 0;
  z-index: 3;
  .showNumWrap {
    width: 46px;
    height: 24px;
    position: absolute;
    right: 0;
    bottom: 10px;
    border-bottom-left-radius: 12px;
    border-top-left-radius: 12px;
    background: rgba(0, 0, 0, 0.6);
    color: #fff;
    text-align: center;
  }
  .maskDotBg {
    width: 100%;
    height: 60px;
    position: absolute;
    left: 0px;
    bottom: 0px;
    background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, #000000 100%);
    opacity: 0.1;
    z-index: 3;
  }
`],[`
  position: relative;
  flex: 1;
  min-width: 0;
  z-index: 3;
  .showNumWrap {
    width: 46px;
    height: 24px;
    position: absolute;
    right: 0;
    bottom: 10px;
    border-bottom-left-radius: 12px;
    border-top-left-radius: 12px;
    background: rgba(0, 0, 0, 0.6);
    color: #fff;
    text-align: center;
  }
  .maskDotBg {
    width: 100%;
    height: 60px;
    position: absolute;
    left: 0px;
    bottom: 0px;
    background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, #000000 100%);
    opacity: 0.1;
    z-index: 3;
  }
`]),A=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return/(swf|avi|flv|mpg|rm|mov|wav|asf|3gp|mkv|rmvb|mp4)/i.test(re.ext||"")},S=function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return/(gif|png|jpg|jpeg|webp|svg|psd|bmp|tif|tiff)/i.test(re.ext||"")},I=r.ZP.div(O,function(ee){return(ee.height||600)+"px"},function(ee){return ee.coverType==="1"?"174px":"176px"},function(ee){return ee.coverType==="1"?"":"padding-left: 2px;"},function(ee){return ee.bgColor||"#333333"}),c=r.ZP.div(n,function(ee){return ee.fromThumbnail?"164px":"100%"},function(ee){var re=ee.isMobile,ie=ee.height,le=ie===void 0?600:ie,E=ee.fromThumbnail;return re?"240px":E?"112px":le+"px"},function(ee){return ee.bgColor||"transparent"},function(ee){return ee.fromThumbnail?"border: 3px solid transparent;":""},function(ee){return ee.isActive?"border-color: #2196f3;":""},function(ee){var re=ee.fromThumbnail,ie=ee.coverType;return re&&ie!=="1"?"margin: 1px 0":""},function(ee){return ee.coverType==="1"?"contain":"cover"},function(ee){return"url("+ee.url+")"},function(ee){return ee.isBgBlur?"position: absolute;z-index: 2;":""},function(ee){return ee.coverType==="1"?"background-repeat: no-repeat;background-size: contain;":"background-size: cover;"},function(ee){return"url("+ee.url+")"}),q=(0,r.ZP)(R.Z)(s),b=r.ZP.div(j);function k(ee){var re=ee.formData,ie=re===void 0?[]:re,le=ee.widgetStyle,E=le===void 0?{}:le,w=ee.flag,K=ee.worksheetId,N=ee.recordId,F=E.coverid,h=F===void 0?"":F,z=E.covertype,X=z===void 0?"0":z,B=E.covercolor,x=B===void 0?"3":B,Q=E.coverheight,i=Q===void 0?"600":Q,m=E.animation,v=m===void 0?"1":m,W=E.autosecond,P=W===void 0?"3":W,u=E.showthumbnail,l=u===void 0?"1":u,T=(0,a.useState)([]),G=(0,p.Z)(T,2),D=G[0],M=G[1],se=(0,a.useState)(0),ae=(0,p.Z)(se,2),ne=ae[0],de=ae[1],Ce=(0,U.Q9)(),he=(0,a.useRef)(null),fe=A(D[ne]),Ee=H().get(H().find(d.Z,function(ve){return ve.value===x}),"color");(0,a.useEffect)(function(){var ve=[];if(h){var ue=H().find(ie,function(pe){return pe.controlId===h})||{};ve=JSON.parse(ue.value||"[]").filter(function(pe){return A(pe)||S(pe)})}M(ve)},[w]);var Y=function(){(0,f.Ye)("previewFile",K,{fileId:H().get(D,"["+ne+"].fileID"),rowId:N}),(0,o.Z)({index:ne,attachments:D,callFrom:"player",showThumbnail:!0,hideFunctions:["editFileName","saveToKnowlege","share"]})},oe=function(ue){var pe=ue.data,Se=ue.index,ye=ue.fromThumbnail,J=ye===void 0?!1:ye,me=A(pe);return a.createElement(c,{height:i,bgColor:Ee,url:pe.viewUrl,isBgBlur:x==="4",isMobile:Ce,coverType:X,fromThumbnail:J,isActive:J&&Se===ne,onClick:function(xe){xe.stopPropagation(),J?(de(Se),he.current&&he.current.goTo(Se)):Y()}},me?a.createElement("video",{src:pe.viewUrl,poster:pe.previewUrl,controls:!Ce&&!J,width:"100%",height:"100%"}):a.createElement("div",{className:"image "}),x==="4"&&a.createElement("div",{className:"bgBlur"}),me&&Ce&&a.createElement("div",{className:"playIcon"},a.createElement(g.Z,{icon:"play_arrow"})))};return!h||!H().find(ie,function(ve){return ve.controlId===h})||!D.length?null:a.createElement(I,{height:i,coverType:X,bgColor:Ee},a.createElement(b,null,a.createElement(q,{ref:he,autoplay:P!=="0",arrows:!0,prevArrow:a.createElement("div",null,a.createElement(g.Z,{className:"Font30",icon:"navigate_before"})),nextArrow:a.createElement("div",null,a.createElement(g.Z,{className:"Font30",icon:"navigate_next"})),effect:v==="1"?"scrollx":"fade",autoplaySpeed:parseInt(P)*1e3,afterChange:function(ue){de(ue)}},D.map(function(ve,ue){return oe({data:ve,index:ue})})),Ce&&a.createElement("div",{className:"showNumWrap"},a.createElement("span",{className:"Font15"},ne+1),"/",a.createElement("span",{className:"Font12"},D.length)),!fe&&a.createElement("div",{className:"maskDotBg"})),l==="1"&&!Ce&&D.length>1&&a.createElement(ce.Z,{className:"thumbnailBox"},a.createElement("div",{className:"thumbnailContainer"},D.map(function(ve,ue){return oe({data:ve,index:ue,fromThumbnail:!0})}))))}},27425:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>te});var ce=t(86735),g=t(71893),p=(0,ce.Z)([`
  color: #9e9e9e;
  height: 28px;
  font-size: 22px;
  line-height: 28px;
  padding: 0 4px;
  margin: 12px 0 12px 8px;
  border-radius: 5px;
  &:hover {
    background: #f7f7f7;
  }
`],[`
  color: #9e9e9e;
  height: 28px;
  font-size: 22px;
  line-height: 28px;
  padding: 0 4px;
  margin: 12px 0 12px 8px;
  border-radius: 5px;
  &:hover {
    background: #f7f7f7;
  }
`]),L=g.ZP.span(p);const te=L},4114:(lt,Te,t)=>{"use strict";t.d(Te,{e:()=>i,Z:()=>D});var ce=t(25273),g=t(63239),p=t.n(g),L=t(12424),te=t(88239),R=t(52945),y=t.n(R),a=t(79221),r=t(86735),o=t(67294),d=t(45697),Z=t.n(d),H=t(93967),U=t.n(H),f=t(71893),V=t(49611),C=t.n(V),O=t(88553),n=t(15742),s=t(48836),j=t(24538),A=t(53280),S=t(24607),I=t(25734),c=t(15759),q=t(94942),b=t.n(q),k=t(36803),ee=t(12496),re=t(31742),ie=t(76345),le=t(15577),E=t(96486),w=t.n(E);function K(M){var se=this,ae=M.isLock,ne=M.recordbase,de=M.recordinfo,Ce=M.view,he=Ce===void 0?{}:Ce,fe=M.updateRecordDialogOwner,Ee=M.sheetSwitchPermit,Y=Ee===void 0?{}:Ee,oe=M.viewId,ve=M.maskinfo,ue=ve===void 0?{}:ve,pe=M.from,Se=ne.isCharge,ye=ne.worksheetId,J=ne.recordId,me=ne.recordTitle,be=ne.isSmall,xe=de.allowEdit,Ae=de.projectId,Ne=de.ownerAccount,Me=Ne===void 0?{}:Ne,Fe=de.worksheetName,Be=de.createTime,we=de.updateTime,Ie=de.createAccount,ge=Ie===void 0?{}:Ie,Re=de.editAccount,Pe=Re===void 0?{}:Re,ke=de.formData,We=de.appId,Ve=w().get(window,"shareState.isPublicRecord")||w().get(window,"shareState.isPublicView")||w().get(window,"shareState.isPublicPage"),it=ue.forceShowFullValue,Ge=ue.maskPermissions,pt=ue.handleUnMask,ot=(0,o.useRef)(),vt=w().find(ke,function(St){return St.controlId==="ownerid"}),At=vt&&!w().isEmpty(Me)&&!w().find(he.controls,function(St){return St==="ownerid"})&&((0,S.kM)(vt).visible||vt.controlId==="ownerid"),yt=vt&&xe&&vt&&(0,S.kM)(vt).editable&&!ae&&pe!==n.GP.DRAFT&&!window.isPublicApp,st=!0;return(0,re.v)(ie.RX.recordLogSwitch,Y,oe)||(st=!1),o.createElement("div",{className:U()("recordInfoFormHeader Gray_9e",{isSmall:be})},!Ve&&o.createElement("div",{className:"worksheetNameCon",style:{marginTop:16}},window.isPublicApp||md.global.Account.isPortal?o.createElement("span",{className:"worksheetName Gray_9e InlineBlock"},(0,le.T3)(We,ye).name||Fe):o.createElement("a",{className:"worksheetName Gray_9e InlineBlock",target:"_blank",href:"/worksheet/"+ye},(0,le.T3)(We,ye).name||Fe),o.createElement("div",{className:"Right"},Be&&st&&o.createElement("span",{className:"lastLog InlineBlock Font12 Gray_9e"},Be===we?ge.fullname:Pe.fullname,Be===we?_l(" \u521B\u5EFA\u4E8E "):_l(" \u66F4\u65B0\u4E8E "),createTimeSpan((0,le.LX)(Be===we?Be:we))),At&&o.createElement("span",{className:U()("owner Font12 Gray_9e",{noBorder:!st})},_l("\u62E5\u6709\u8005"),"\uFF1A",o.createElement("span",{className:U()("ownerBlock",{disabled:!yt,Hand:yt}),ref:ot,onClick:function(){yt&&(0,ee.ER)({recordId:J,appId:We,ownerAccountId:Me.accountId,projectId:Ae,target:ot.current,changeOwner:function(){var Qe=(0,k.Z)(b().mark(function Xe($e,Ke){var Ue,He,ze;return b().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return Et.prev=0,Et.next=3,(0,ee.z6)({worksheetId:ye,recordId:J,accountId:Ke==="user-self"?w().get(md,["global","Account","accountId"]):Ke});case 3:Ue=Et.sent,He=Ue.account,ze=Ue.record,fe(He,ze),alert(_l("\u4FEE\u6539\u6210\u529F")),Et.next=13;break;case 10:Et.prev=10,Et.t0=Et.catch(0),alert(_l("\u4FEE\u6539\u5931\u8D25"),2);case 13:case"end":return Et.stop()}},Xe,se,[[0,10]])}));return function($e,Ke){return Qe.apply(this,arguments)}}()})}},o.createElement("span",{className:"InlineBlock"},o.createElement(c.Z,{className:"cursorDefault",size:24,user:{accountId:Me.accountId,userHead:Me.avatar},appId:We,projectId:Ae,headClick:function(){}})),o.createElement("span",{className:"Gray mLeft4"},Me.fullname),o.createElement("i",{className:"icon icon-arrow-down Hand Font12 Gray_75 mLeft4"}))))),o.createElement("div",{className:"recordTitle flex"},o.createElement("span",{className:U()({maskHoverTheme:Ge})},me,Ge&&o.createElement("i",{className:"icon icon-eye_off Hand Font20 Gray_bd mLeft4",style:{verticalAlign:"middle"},onClick:function(Qe){Ge&&(Qe.stopPropagation(),w().isFunction(pt)&&pt())}}))))}K.propTypes={recordbase:Z().shape({}),recordinfo:Z().shape({}),view:Z().shape({}),updateRecordDialogOwner:Z().func};var N=t(12842);function F(M){var se=M.resultCode,ae=M.entityName,ne=M.empty;return o.createElement("div",{className:"abnormalCon flexColumn"},o.createElement("span",{className:"statusIcon Icon icon icon-task-folder-message"}),o.createElement("p",{className:"mTop5"},function(){return se===7?ae?_l("\u65E0\u6743\u9650\u67E5\u770B%0",ae):_l("\u65E0\u6743\u9650\u67E5\u770B\u8BB0\u5F55"):se===1&&ne?_l("\u5F53\u524D\u5B50\u8868\u4E2D\u7684\u5B57\u6BB5\u4E3A\u7A7A"):ae?_l("%0\u65E0\u6CD5\u67E5\u770B",ae):_l("\u8BB0\u5F55\u65E0\u6CD5\u67E5\u770B")}()))}F.propTypes={resultCode:Z().number,entityName:Z().string,empty:Z().bool};var h=t(48152),z=(0,r.Z)([`
  width: 100%;
  position: absolute;
  left: 0;
  top: -6px;
  overflow: hidden;
`],[`
  width: 100%;
  position: absolute;
  left: 0;
  top: -6px;
  overflow: hidden;
`]),X=(0,r.Z)([`
  margin-top: 6px;
  height: 6px;
  box-shadow: 0px 0px 6px 0px rgba(0, 0, 0, 0.16);
`],[`
  margin-top: 6px;
  height: 6px;
  box-shadow: 0px 0px 6px 0px rgba(0, 0, 0, 0.16);
`]),B=(0,r.Z)([`
  z-index: -1;
  padding: 0px 24px;
  position: absolute;
  bottom: 0px;
  width: 100%;
  background: #fff;
`],[`
  z-index: -1;
  padding: 0px 24px;
  position: absolute;
  bottom: 0px;
  width: 100%;
  background: #fff;
`]),x=(0,r.Z)([`
  height: 48px;
`],[`
  height: 48px;
`]),Q=(0,r.Z)([`
  cursor: pointer;
  position: sticky;
  margin-top: -32px;
  transition: 0.4s ease;
  left: 0px;
  top: 0px;
  right: 10px;
  padding: 0 14px 0 24px;
  opacity: 0;
  transform: translateY(-32px);
  z-index: 2;
  font-size: 12px;
  color: #515151;
  line-height: 32px;
  display: flex;
  background-color: rgba(255, 255, 255, 0.9);
  cursor: pinter;
  .title {
    color: #757575;
  }
  .splitter {
    color: #757575;
    margin: 0 6px;
  }
  .content {
    flex: 1;
    font-weight: bold;
  }
  &#stickyBarActive {
    opacity: 1;
    transform: translateY(0px);
  }
`],[`
  cursor: pointer;
  position: sticky;
  margin-top: -32px;
  transition: 0.4s ease;
  left: 0px;
  top: 0px;
  right: 10px;
  padding: 0 14px 0 24px;
  opacity: 0;
  transform: translateY(-32px);
  z-index: 2;
  font-size: 12px;
  color: #515151;
  line-height: 32px;
  display: flex;
  background-color: rgba(255, 255, 255, 0.9);
  cursor: pinter;
  .title {
    color: #757575;
  }
  .splitter {
    color: #757575;
    margin: 0 6px;
  }
  .content {
    flex: 1;
    font-weight: bold;
  }
  &#stickyBarActive {
    opacity: 1;
    transform: translateY(0px);
  }
`]),i=o.createContext(),m=f.ZP.div(z),v=["rowid"],W=[26,27,21,48],P=f.ZP.div(X),u=f.ZP.div(B),l=f.ZP.div(x),T=f.ZP.div(Q);function G(){var M=Number(localStorage.getItem("recordinfoSplitHeight"));return M>window.innerHeight-140&&(M=window.innerHeight-140),M}function D(M){var se=M.formWidth,ae=M.ignoreLock,ne=M.type,de=ne===void 0?"edit":ne,Ce=M.loading,he=M.from,fe=M.formFlag,Ee=M.abnormal,Y=M.isLock,oe=M.recordbase,ve=M.maskinfo,ue=M.controlProps,pe=ue===void 0?{}:ue,Se=M.recordinfo,ye=Se===void 0?{}:Se,J=M.relateRecordData,me=M.view,be=me===void 0?{}:me,xe=M.showError,Ae=M.sheetSwitchPermit,Ne=M.mountRef,Me=M.updateRecordDialogOwner,Fe=M.updateRows,Be=M.updateRelateRecordTableCount,we=Be===void 0?function(){}:Be,Ie=M.onRelateRecordsChange,ge=Ie===void 0?function(){}:Ie,Re=M.updateWorksheetControls,Pe=M.registerCell,ke=Pe===void 0?function(){}:Pe,We=M.onChange,Ve=M.onCancel,it=M.onSave,Ge=M.saveDraft,pt=Ge===void 0?function(){}:Ge,ot=M.onError,vt=M.masterRecordRowId,At=M.onWidgetChange,yt=At===void 0?function(){}:At,st=M.widgetStyle,St=st===void 0?{}:st,Qe=M.formdata,Xe=Qe===void 0?[]:Qe;Xe.forEach(function(Kt){Kt.defaultState={required:Kt.required,controlPermissions:Kt.controlPermissions,fieldPermission:Kt.fieldPermission,showControls:Kt.showControls},(Kt.relationControls||[]).forEach(function(dn){dn.defaultState={required:dn.required,controlPermissions:dn.controlPermissions,fieldPermission:dn.fieldPermission}})});var $e=oe.isSmall,Ke=oe.isSubList,Ue=oe.worksheetId,He=oe.recordId,ze=oe.recordTitle,gt=oe.allowEdit,Et=oe.viewId,ft=Et===void 0?"":Et,qe=(0,o.useContext)(s.Z);if(Ce)return o.createElement("div",{className:"contentBox flexColumn",style:{width:se}},o.createElement("div",{style:{padding:10}},o.createElement(a.Z,{style:{flex:1},direction:"column",widths:["30%","40%","90%","60%"],active:!0,itemStyle:{marginBottom:"10px"}}),o.createElement(a.Z,{style:{flex:1},direction:"column",widths:["40%","55%","100%","80%"],active:!0,itemStyle:{marginBottom:"10px"}}),o.createElement(a.Z,{style:{flex:2},direction:"column",widths:["45%","100%","100%","100%"],active:!0,itemStyle:{marginBottom:"10px"}})));var nt=He&&he!==21?3:2,Ze=(0,I.Mb)({from:nt,rules:ye.rules,data:Xe,recordId:He}).filter(function(Kt){return(0,S.kM)(Kt,nt).visible}).map(function(Kt){return y()(!ae&&Y?(0,te.default)({},Kt,{disabled:!0}):Kt,{isDraft:he===n.GP.DRAFT})}).filter(function(Kt){return!Kt.hidden}),et=(0,S.X3)(Ze,St,nt),ut=et.commonData,xt=ut===void 0?[]:ut,wt=et.tabData,kt=wt===void 0?[]:wt,Rt=kt.filter(function(Kt){if(Kt.type===52){var dn=Ze.filter(function(Cn){return Cn.sectionId===Kt.controlId});return!w().every(dn,function(Cn){return!((0,S.kM)(Cn,nt).visible&&!Cn.hidden)})}return!0}),jt=(0,o.useRef)(),fn=(0,o.useRef)(),Mt=(0,o.useRef)(),sn=(0,o.useRef)(),on=(0,O.Z)(),en=(0,L.Z)(on,2),$t=en[0],an=en[1].width,tn=(0,o.useState)(!!localStorage.getItem("recordinfoSplitHeight")&&He&&Rt.length&&w().get(ye,"advancedSetting.tabposition")!=="2"),mt=(0,L.Z)(tn,2),Lt=mt[0],zt=mt[1],Zt=(0,o.useState)(0),Nt=(0,L.Z)(Zt,2),ct=Nt[0],De=Nt[1],_e=(0,o.useState)(G()),Le=(0,L.Z)(_e,2),rt=Le[0],Ct=Le[1],dt=(0,o.useState)(),It=(0,L.Z)(dt,2),bt=It[0],Ut=It[1],Xt=[{controlId:"caid",value:p()([w().pick(He?ye.createAccount:md.global.Account,["accountId","avatar","fullname"])])},{controlId:"ownerid",value:p()([w().pick(He?ye.ownerAccount:md.global.Account,["accountId","avatar","fullname"])])}];(0,o.useEffect)(function(){Ne(fn),De(Mt.current.clientHeight),tt()}),(0,o.useEffect)(function(){setTimeout(function(){!Ce&&w().get(jt,"current.triggerNanoScroller")&&jt.current.triggerNanoScroller()},200)},[Ce]);function pn(Kt){Kt?safeLocalStorageSetItem("recordinfoSplitHeight",rt||ct*.5):localStorage.removeItem("recordinfoSplitHeight"),zt(Kt),Mt.current&&!rt&&Ct(ct*.5)}function tt(){if(!(!Rt.length||de!=="edit"||!Mt.current||!sn.current)){w().get(jt,"current.triggerNanoScroller")&&jt.current.triggerNanoScroller();var Kt=Mt.current.querySelector(".recordInfoFormScroll"),dn=Mt.current.querySelector(".recordInfoFormContent .customFieldsContainer"),Cn=Mt.current.querySelector(".recordInfoFormScroll > .nano-content"),Rn=Cn.scrollTop+Kt.clientHeight<dn.clientHeight+dn.offsetTop+58+26+1;sn.current.style.zIndex=Rn?3:-1}}function ht(){var Kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},dn=Kt.isSplit,Cn=Mt.current.querySelector(dn?".topCon":".recordInfoFormScroll > .nano-content"),Rn=Mt.current.querySelector(".topCon .stickyBar"),gn=Mt.current.querySelector(".topCon .recordTitle"),wn=Cn.scrollTop>gn.offsetTop+gn.offsetHeight;Rn.id=wn?"stickyBarActive":""}var Dt=de==="edit"&&!Lt?ce.Z:o.Fragment;function Ot(){var Kt=$(Mt.current).find(".recordInfoFormScroll"),dn=$(Mt.current).find(".relateRecordBlockCon");Kt.nanoScroller({scrollTop:dn[0].offsetTop-Kt.height()+112+34*11})}var Ht=(0,le.Q9)();return o.createElement(i.Provider,{value:{width:an}},o.createElement("div",{className:"recordInfoForm flexColumn",ref:Mt,style:{width:Ee?"100%":se}},(he===n.GP.WORKSHEET_ROW_LAND||he===n.GP.WORKFLOW)&&ze&&o.createElement(C(),{title:_l("\u8BB0\u5F55-%0",ze)}),!Ee&&!!Xe.length&&o.createElement("div",{className:U()(Lt?"flexColumn":"flex",{isSplit:Lt}),ref:$t},bt&&o.createElement(A.Z,{value:rt,direction:"vertical",min:ct*.2,max:ct*.8,onChange:function(dn){safeLocalStorageSetItem("recordinfoSplitHeight",dn),Ct(dn),Ut(!1)}}),o.createElement(Dt,de==="edit"?{className:"recordInfoFormScroll Relative flex",ref:jt,scrollEvent:function(){tt(),ht()}}:{},o.createElement("div",{className:"topCon",style:Lt?{height:rt||300}:{},onScroll:Lt?function(){ht({isSplit:!0})}:function(){}},de==="edit"&&!Ke&&o.createElement(N.Z,{flag:fe,formData:Xe,widgetStyle:St,worksheetId:Ue,recordId:He}),de==="edit"&&o.createElement(T,{className:"stickyBar",onClick:function(){Mt.current.querySelector(".recordInfoFormScroll > .nano-content").scrollTop=0}},o.createElement("div",{className:"title"},ye.worksheetName),o.createElement("div",{className:"splitter"},"/"),o.createElement("div",{className:"content ellipsis",title:ze},ze)),de==="edit"&&!Ke&&o.createElement(K,{view:be,isLock:Y,recordbase:oe,maskinfo:ve,recordinfo:ye,updateRecordDialogOwner:Me,sheetSwitchPermit:Ae,viewId:ft,from:he}),o.createElement("div",{className:U()("recordInfoFormContent",{noAuth:!gt})},o.createElement(j.Z,{ignoreLock:ae,forceFull:se<500?1:void 0,ref:fn,from:he===21?he:He?3:Ht?5:2,flag:fe,widgetStyle:St,controlProps:(0,te.default)({},pe,{updateWorksheetControls:Re,updateRelateRecordTableCount:we}),data:Xe.filter(function(Kt){return!w().includes(v,Kt.controlId)&&!(w().get(window,"shareState.isPublicForm")&&w().includes(W,Kt.type))}),systemControlData:Xt,rules:ye.rules,isWorksheetQuery:ye.isWorksheetQuery,disabled:!gt,projectId:ye.projectId||M.projectId,groupId:ye.groupId,masterRecordRowId:vt,worksheetId:Ue,recordId:He,registerCell:ke,showError:xe,onChange:We,onSave:it,saveDraft:pt,onError:ot,sheetSwitchPermit:Ae,viewId:ft,showSplitIcon:de==="edit"&&xt.length>0,appId:ye.appId,isCharge:(0,E.get)(qe,"isCharge")||oe.isCharge,onFormDataReady:function(dn){tt(),He||We(dn.getDataSource(),[],{noSaveTemp:!0})},onWidgetChange:yt,tabControlProp:{formdata:Xe,isSplit:Lt,setSplit:pn,formWidth:se,scrollToTable:Ot,beginDrag:function(){return Ut(!0)},updateRelateRecordTableCount:we,recordbase:(0,te.default)({},oe,{allowEdit:Y?!1:oe.allowEdit}),relateRecordData:J,setNavVisible:tt,splitTabDom:Mt.current&&Mt.current.querySelector("#newCustomTabSectionWrap"),onRelateRecordsChange:ge,updateWorksheetControls:Re}}))),de==="edit"&&!Lt&&o.createElement(l,null)),o.createElement("div",{id:"newCustomTabSectionWrap",className:U()("relateRecordBlockCon",{flex:Lt})}),!Lt&&de==="edit"&&!!Rt.length&&o.createElement(u,{ref:sn},o.createElement(m,null,o.createElement(P,null)),o.createElement(h.Z,{sideVisible:pe.sideVisible,showSplitIcon:!!He&&xt.length>0,widgetStyle:St,setSplit:pn,isSplit:Lt,controls:Rt,onClick:function(dn){fn.current.setActiveTabControlId(dn),Ot()}}))),(Ee||Xe.length===0)&&o.createElement(F,{resultCode:ye.resultCode,entityName:ye.entityName,empty:!!Xe.length})))}D.propTypes={type:Z().string,loading:Z().bool,showError:Z().bool,formFlag:Z().any,abnormal:Z().bool,controlProps:Z().shape({}),view:Z().shape({}),recordbase:Z().shape({}),recordinfo:Z().shape({}),from:Z().number,formdata:Z().arrayOf(Z().shape({})),relateRecordData:Z().shape({}),mountRef:Z().func,updateRecordDialogOwner:Z().func,updateRows:Z().func,onChange:Z().func,onRelateRecordsChange:Z().func,onSave:Z().func,saveDraft:Z().func,onCancel:Z().func,addRefreshEvents:Z().func,reloadRecord:Z().func,registerCell:Z().func,updateWorksheetControls:Z().func}},82011:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>Qe});var ce=t(8177),g=t.n(ce),p=t(42057),L=t(88239),te=t(54208),R=t(94942),y=t.n(R),a=t(36803),r=t(85105),o=t.n(r),d=t(99663),Z=t(22600),H=t(49135),U=t(93196),f=t(67294),V=t(44894),C=t(45697),O=t.n(C),n=t(40240),s=t(82303),j=t(45231),A=t(15742),S=t(88106),I=t(69203),c=t(93567),q=t(88902),b=t.n(q),k=t(63239),ee=t.n(k),re=t(69288),ie=t(85315),le=t(12424),E=t(86735),w=t(93967),K=t.n(w),N=t(71893),F=t(53280),h=t(89499),z=t(25734),X=t(24607),B=t(48947),x=t(12496),Q=t(31742),i=t(76345),m=t(4114),v=t(33867),W=t(70264),P=t(96486),u=t.n(P),l=t(537),T=t(27425);function G(Xe){var $e=Xe.currentSheetRows,Ke=Xe.currentIndex,Ue=Xe.onSwitch,He=$e.length>0&&Ke!==0,ze=$e.length>0&&Ke!==$e.length-1;return f.createElement(f.Fragment,null,f.createElement("span",{className:K()("prevRecordBtn",{disable:!He,ThemeHoverColor3:He}),onClick:He?function(){Ue(!1)}:function(){}},f.createElement(W.Z,{offset:[-18,0],text:f.createElement("span",null,window.isMacOs?_l("\u4E0A\u4E00\u6761\uFF08\u2318 + \u21E7 + ,\uFF09"):_l("\u4E0A\u4E00\u6761\uFF08Ctrl + Shift + ,\uFF09"))},f.createElement("i",{className:"icon icon-arrow-up-border"}))),f.createElement("span",{className:K()("nextRecordBtn",{disable:!ze,ThemeHoverColor3:ze}),onClick:ze?function(){Ue(!0)}:function(){}},f.createElement(W.Z,{text:f.createElement("span",null,window.isMacOs?_l("\u4E0B\u4E00\u6761\uFF08\u2318 + \u21E7 + .\uFF09"):_l("\u4E0B\u4E00\u6761\uFF08Ctrl + Shift + .\uFF09"))},f.createElement("i",{className:"icon icon-arrow-down-border"}))))}G.propTypes={currentSheetRows:O().arrayOf(O().shape({})),currentIndex:O().number,onSwitch:O().func};var D=t(4923),M=t(31846),se=t(34694),ae=t(89471);function ne(Xe){var $e=Xe.buttons,Ke=Xe.recordbase,Ue=Xe.btnDisable,He=Xe.recordinfo,ze=Xe.sheetSwitchPermit,gt=Xe.onButtonClick,Et=Xe.onDelete,ft=Xe.reloadRecord,qe=Xe.onUpdate,nt=Xe.handleAddSheetRow,Ze=Xe.hideRecordInfo,et=Xe.hideFav,ut=Ke.from,xt=Ke.isCharge,wt=Ke.appId,kt=Ke.worksheetId,Rt=Ke.viewId,jt=Ke.recordId,fn=Ke.workId,Mt=Ke.instanceId,sn=He.allowDelete,on=He.formData,en=He.projectId,$t=He.allowAdd,an=He.rowData;return f.createElement(M.Z,{from:ut,hideFav:et,showDeleteHr:!1,shows:["share","share","print","task","copy","editform","recreate","openinnew","fav"],isCharge:xt,allowDelete:sn,allowCopy:$t&&He.allowEdit,allowRecreate:$t,projectId:en,appId:wt,viewId:Rt,worksheetId:kt,recordId:jt,workId:fn,instanceId:Mt,formdata:on,btnDisable:Ue,defaultCustomButtons:$e,sheetSwitchPermit:ze,onDelete:Et,onButtonClick:gt,reloadRecord:ft,onUpdate:qe,onCopySuccess:nt,hideRecordInfo:Ze,onRecreate:function(){(0,ae.GE)({rowId:jt,worksheetId:kt,columns:on}).then(function(mt){var Lt=mt.defaultData,zt=mt.defcontrols;(0,se.Z)({worksheetId:kt,appId:wt,viewId:Rt,defaultFormData:Lt,defaultFormDataEditable:!0,directAdd:!1,writeControls:zt,onAdd:function(Nt){nt((0,L.default)({},Nt),jt),alert(_l("\u521B\u5EFA\u6210\u529F"))}})})}},f.createElement(T.Z,{className:"moreBtn Hand Gray_9e Font22 mLeft10"},f.createElement(v.Z,{icon:"task-point-more",className:"ThemeHoverColor3"})))}ne.propTypes={buttons:O().arrayOf(O().shape({})),recordbase:O().shape({}),btnDisable:O().shape({}),recordinfo:O().shape({}),sheetSwitchPermit:O().arrayOf(O().shape({})),reloadRecord:O().func,onDelete:O().func,onUpdate:O().func,onButtonClick:O().func};var de,Ce,he,fe,Ee;function Y(Xe,$e,Ke,Ue,He){var ze={};return Object.keys(Ue).forEach(function(gt){ze[gt]=Ue[gt]}),ze.enumerable=!!ze.enumerable,ze.configurable=!!ze.configurable,("value"in ze||ze.initializer)&&(ze.writable=!0),ze=Ke.slice().reverse().reduce(function(gt,Et){return Et(Xe,$e,gt)||gt},ze),He&&ze.initializer!==void 0&&(ze.value=ze.initializer?ze.initializer.call(He):void 0,ze.initializer=void 0),ze.initializer===void 0&&(Object.defineProperty(Xe,$e,ze),ze=null),ze}function oe(Xe){var $e=void 0,Ke=document.createElement("div");return Ke.style.position="absolute",Ke.style.left="-10000px",Ke.style.top="-10000px",Ke.style.zIndex="99999",Ke.style.border="1px solid",Ke.innerHTML='<span class="InlineBlock borderBox"><button type="button" class="ming Button--small Button--ghost Button recordCustomButton overflowHidden"><div class="content ellipsis">'+(Xe.icon?'<i class="'+("icon icon-"+Xe.icon)+'"></i>':"")+'<span class="breakAll overflow_ellipsis">'+Xe.name+"</span></div></button></span>",document.body.appendChild(Ke),$e=Ke.offsetWidth,document.body.removeChild(Ke),$e}var ve=(he=(Ee=fe=function(Xe){(0,U.default)($e,Xe);function $e(){var Ke,Ue,He,ze;(0,d.default)(this,$e);for(var gt=arguments.length,Et=Array(gt),ft=0;ft<gt;ft++)Et[ft]=arguments[ft];return ze=(Ue=(He=(0,H.default)(this,(Ke=$e.__proto__||o()($e)).call.apply(Ke,[this].concat(Et))),He),He.state={buttonShowNum:3,btnDisable:{},customBtns:[]},He.customButtonsCon=f.createRef(),Ue),(0,H.default)(He,ze)}return(0,Z.default)($e,[{key:"componentDidMount",value:function(){var Ue=this;this.loadBtns(),this.props.addRefreshEvents("loadcustombtns",function(){setTimeout(function(){Ue.setState({btnDisable:{}})},500),Ue.loadBtns()}),typeof ResizeObserver<"u"&&(this.resizeOb=new ResizeObserver(this.setButtonShowNum),this.resizeOb.observe(this.customButtonsCon.current))}},{key:"componentWillReceiveProps",value:function(Ue){(Ue.recordbase.recordId!==this.props.recordbase.recordId||Ue.recordbase.viewId&&Ue.recordbase.viewId!==this.props.recordbase.viewId)&&(this.loadBtns(Ue.recordbase.recordId,Ue.recordbase.viewId),this.setState({btnDisable:{}}))}},{key:"componentDidUpdate",value:function(Ue){Ue.sideVisible!==this.props.sideVisible&&this.setButtonShowNum()}},{key:"componentWillUnmount",value:function(){this.resizeOb&&(this.resizeOb.unobserve(this.customButtonsCon.current),this.resizeOb.disconnect(),delete this.resizeOb)}},{key:"loadBtns",value:function(){var Ke=(0,a.Z)(y().mark(function He(ze,gt){var Et,ft;return y().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:return Et=this.context.api,nt.next=3,Et.getWorksheetBtns(ze?(0,L.default)({rowId:ze},gt?{viewId:gt}:{}):{});case 3:ft=nt.sent,this.setState({customBtns:ft},this.setButtonShowNum);case 5:case"end":return nt.stop()}},He,this)}));function Ue(He,ze){return Ke.apply(this,arguments)}return Ue}()},{key:"setButtonShowNum",value:function(){if(this.customButtonsCon.current){var Ue=this.state.customBtns,He=3,ze=this.customButtonsCon.current.clientWidth-20,gt=Ue.map(function(qe){return oe(qe)+6}),Et=u().sum(gt);if(Et<ze)He=Ue.length;else for(var ft=0;ft<gt.length&&u().sum(gt.slice(0,ft+1))<=ze;)He=ft+1,ft=ft+1;this.setState({buttonShowNum:He})}}},{key:"disableCustomButton",value:function(Ue){this.setState({btnDisable:(0,L.default)({},this.state.btnDisable,(0,S.default)({},Ue,!0))})}},{key:"render",value:function(){var Ue=this.props,He=Ue.isCharge,ze=Ue.iseditting,gt=Ue.recordbase,Et=Ue.recordinfo,ft=Ue.sheetSwitchPermit,qe=Ue.reloadRecord,nt=Ue.hideRecordInfo,Ze=Ue.onUpdate,et=Ue.onDelete,ut=Ue.handleAddSheetRow,xt=Ue.hideFav,wt=Ue.customBtnTriggerCb,kt=this.state,Rt=kt.customBtns,jt=kt.buttonShowNum,fn=kt.btnDisable,Mt=gt.viewId,sn=gt.worksheetId,on=gt.recordId,en=gt.appId,$t=Et.projectId;return f.createElement(f.Fragment,null,f.createElement("div",{className:"flex",style:{lineHeight:1},ref:this.customButtonsCon},f.createElement("div",{className:"customButtons"},f.createElement(D.Z,{isCharge:He,iseditting:ze,viewId:Mt,appId:en,worksheetId:sn,recordId:on,projectId:$t,buttons:Rt.slice(0,jt),btnDisable:fn,reloadRecord:qe,loadBtns:this.loadBtns,onUpdate:Ze,hideRecordInfo:nt,onHideMoreBtn:function(){},onButtonClick:this.disableCustomButton,triggerCallback:wt}))),f.createElement(ne,{hideFav:xt,recordbase:gt,recordinfo:Et,sheetSwitchPermit:ft,buttons:Rt.slice(jt),btnDisable:fn,reloadRecord:qe,onUpdate:Ze,onDelete:et,handleAddSheetRow:ut,hideRecordInfo:nt}))}}]),$e}(f.Component),fe.contextType=B.Z,fe.propTypes={iseditting:O().bool,recordbase:O().shape({}),recordinfo:O().shape({}),sideVisible:O().bool,sheetSwitchPermit:O().arrayOf(O().shape({})),addRefreshEvents:O().func,reloadRecord:O().func,hideRecordInfo:O().func,onUpdate:O().func,onDelete:O().func,hideFav:O().bool},Ee),Y(he.prototype,"loadBtns",[V.Nj],g()(he.prototype,"loadBtns"),he.prototype),Y(he.prototype,"setButtonShowNum",[V.Nj],g()(he.prototype,"setButtonShowNum"),he.prototype),Y(he.prototype,"disableCustomButton",[V.Nj],g()(he.prototype,"disableCustomButton"),he.prototype),he),ue=t(10358),pe=t(15577),Se=(0,E.Z)([`
  display: flex;
  .discussCount {
    font-size: 14px;
  }
  .text {
    font-size: 13px;
    margin-left: 2px;
  }
`],[`
  display: flex;
  .discussCount {
    font-size: 14px;
  }
  .text {
    font-size: 13px;
    margin-left: 2px;
  }
`]),ye=(0,N.ZP)(T.Z)(Se),J=null;function me(Xe){var $e=Xe.isCharge,Ke=Xe.loading,Ue=Xe.sheetSwitchPermit,He=Xe.sideVisible,ze=Xe.recordbase,gt=Xe.recordinfo,Et=Xe.iseditting,ft=Xe.showPrevNext,qe=Xe.addRefreshEvents,nt=Xe.refreshRotating,Ze=Xe.currentSheetRows,et=Xe.currentIndex,ut=Xe.hideRecordInfo,xt=Xe.switchRecord,wt=Xe.reloadRecord,kt=Xe.onCancel,Rt=Xe.onUpdate,jt=Xe.onSubmit,fn=Xe.onRefresh,Mt=Xe.onDelete,sn=Xe.onSideIconClick,on=Xe.handleAddSheetRow,en=Xe.viewId,$t=Xe.view,an=Xe.from,tn=Xe.isOpenNewAddedRecord,mt=Xe.customBtnTriggerCb,Lt=gt.projectId,zt=Lt===void 0?localStorage.getItem("currentProjectId"):Lt,Zt=Xe.header,Nt=ze.isSmall,ct=ze.worksheetId,De=ze.recordId,_e=ze.notDialog,Le=(0,f.useRef)(De),rt=(0,f.useState)(),Ct=(0,le.Z)(rt,2),dt=Ct[0],It=Ct[1],bt=(0,f.useState)(gt.isFavorite),Ut=(0,le.Z)(bt,2),Xt=Ut[0],pn=Ut[1],tt=(0,Q.v)(i.RX.recordDiscussSwitch,Ue,en),ht=(0,Q.v)(i.RX.recordLogSwitch,Ue,en),Dt=(0,Q.v)(i.RX.approveDetailsSwitch,Ue,en),Ot=md.global.Account.isPortal&&!Xe.allowExAccountDiscuss,Ht=u().get(window,"shareState.isPublicRecord")||u().get(window,"shareState.isPublicView")||u().get(window,"shareState.isPublicPage")||u().get(window,"shareState.isPublicQuery")||u().get(window,"shareState.isPublicForm")||u().get(window,"shareState.isPublicWorkflowRecord")||u().get(window,"shareState.isPublicPrint"),Kt=Ht&&_e,dn=(0,pe.vo)(zt),Cn=!window.shareState.shareId&&!window.isPublicApp&&!md.global.Account.isPortal&&!u().isEmpty(dn),Rn=!Ht&&!md.global.Account.isPortal&&(Dt||tt||ht)||md.global.Account.isPortal&&Xe.allowExAccountDiscuss&&tt||md.global.Account.isPortal&&Xe.approved&&Dt||an===A.GP.WORKFLOW;function gn(){if(!(He||!tt||Ot)){var kn=0;md.global.Account.isPortal&&Xe.allowExAccountDiscuss&&Xe.exAccountDiscussEnum===1&&(kn=2),l.Z.getDiscussionsCount({pageIndex:1,pageSize:1,sourceId:ct+"|"+Le.current,sourceType:8,entityType:kn}).then(function(Fn){It(Fn.data)})}}(0,f.useEffect)(function(){Le.current=De,tn||gn()},[De,Xe.allowExAccountDiscuss]),(0,f.useEffect)(function(){pn(u().get(Xe,"recordinfo.isFavorite"))},[u().get(Xe,"recordinfo.isFavorite"),De]),(0,f.useEffect)(function(){return h.uY.addListener("RELOAD_RECORD_INFO_DISCUSS",gn),function(){h.uY.removeListener("RELOAD_RECORD_INFO_DISCUSS",gn)}},[]),en&&(Zt=null);var wn=function(){return f.createElement(ye,{className:"Hand ThemeHoverColor3",onClick:sn},f.createElement(W.Z,{offset:[0,0],text:f.createElement("span",null,He?_l("\u6536\u8D77"):_l("\u5C55\u5F00"))},f.createElement("span",null,f.createElement("i",{className:"icon "+(He?"icon-sidebar_close":"icon-sidebar_open")}))),!He&&!!dt&&f.createElement("span",{className:"discussCount"},dt>99?"99+":dt,f.createElement("span",{className:"text"},_l("\u6761\u8BA8\u8BBA"))))},On=function(){var Fn=f.createElement(T.Z,{className:"Hand ThemeHoverColor3 closeBtn",onClick:kt},f.createElement("i",{className:"icon icon-close"}));return _e?Fn:f.createElement(W.Z,{offset:[0,0],text:f.createElement("span",{className:"nowrap"},_l("\u5173\u95ED\uFF08esc\uFF09"))},Fn)},An=function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}Ke||u().get(Xe,"recordinfo.isFavorite")===void 0||(J&&J.abort(),Xt?J=ue.Z.removeFavorite({projectId:zt,rowId:De,worksheetId:ct,viewId:en}):J=ue.Z.addFavorite({worksheetId:ct,rowId:De,viewId:en}),J.then(function(Fn){pn(!Xt),J=null,Fn?alert(Xt?_l("\u5DF2\u53D6\u6D88\u6536\u85CF"):_l("\u6536\u85CF\u6210\u529F")):alert(_l("\u64CD\u4F5C\u5931\u8D25\uFF0C\u7A0D\u540E\u518D\u8BD5"),3)}))},Yn=function(){var Fn=f.createElement(T.Z,{className:K()("Hand favBtn",{ThemeHoverColor3:!Xt}),style:{color:Xt?"#FFC402":"#9E9E9E"},onClick:An},f.createElement(v.Z,{className:"Font22 Hand",icon:Xt?"star":"star_outline"}));return f.createElement(W.Z,{offset:[0,0],text:f.createElement("span",null,Xt?_l("\u53D6\u6D88\u6536\u85CF"):_l("\u6536\u85CF"))},Fn)};return f.createElement("div",{className:"recordHeader flexRow Font22",style:{zIndex:10}},!!Zt&&!Ke&&f.createElement("div",{className:"customHeader flex flexRow"},an===A.GP.DRAFT&&f.createElement(G,{currentSheetRows:Ze,currentIndex:et,onSwitch:xt}),f.cloneElement(Zt,{onSubmit:jt,isSmall:Nt}),Rn&&an!==A.GP.DRAFT&&wn(),On()),!Zt&&f.createElement("div",{className:"flex flexRow w100"},ft&&f.createElement(G,{currentSheetRows:Ze,currentIndex:et,onSwitch:xt}),f.createElement("span",{className:K()("refreshBtn Font20 Gray_9e ThemeHoverColor3 Hand",{isLoading:nt,disable:Et}),onClick:Et?function(){}:fn},f.createElement(W.Z,{offset:[0,0],text:f.createElement("span",null,_l("\u5237\u65B0"))},f.createElement("i",{className:"icon icon-task-later"}))),!Ht&&!Et?f.createElement(ve,{isCharge:$e,hideFav:!0,addRefreshEvents:qe,iseditting:Et,sideVisible:He,recordbase:ze,recordinfo:gt,hideRecordInfo:ut,reloadRecord:wt,onDelete:Mt,onUpdate:Rt,sheetSwitchPermit:Ue,handleAddSheetRow:on,customBtnTriggerCb:mt}):f.createElement("div",{className:"flex"}),Cn&&Yn(),Rn&&wn(),(!Kt||u().get(window,"shareState.isPublicView")||u().get(window,"shareState.isPublicPage"))&&On()))}me.propTypes={loading:O().bool,iseditting:O().bool,sideVisible:O().bool,header:O().element,recordbase:O().shape({}),recordinfo:O().shape({}),sheetSwitchPermit:O().arrayOf(O().shape({})),refreshRotating:O().bool,showPrevNext:O().bool,currentSheetRows:O().arrayOf(O().shape({})),currentIndex:O().number,addRefreshEvents:O().func,hideRecordInfo:O().func,switchRecord:O().func,reloadRecord:O().func,onCancel:O().func,onUpdate:O().func,onSubmit:O().func,onDelete:O().func,onRefresh:O().func,onSideIconClick:O().func};var be=t(9527),xe=t.n(be),Ae=t(58950);function Ne(Xe){var $e=Xe.loading,Ke=Xe.workflowStatus,Ue=Xe.className,He=Xe.recordbase,ze=Xe.workflow,gt=Xe.approval,Et=Xe.isOpenNewAddedRecord,ft=Xe.sheetSwitchPermit,qe=Xe.onFold,nt=Xe.projectId,Ze=Xe.formFlag,et=Xe.formdata,ut=He.isSubList,xt=He.appId,wt=He.viewId,kt=He.appSectionId,Rt=He.worksheetId,jt=He.recordId,fn=He.recordTitle,Mt=[],sn=!(0,Q.v)(i.RX.approveDetailsSwitch,ft,wt)||md.global.Account.isPortal&&!Xe.approved;return ut&&Mt.push("discuss","discussPortal","files"),(0,Q.v)(i.RX.recordDiscussSwitch,ft,wt)||Mt.push("discuss","discussPortal","files"),(0,Q.v)(i.RX.recordLogSwitch,ft,wt)||Mt.push("logs"),(sn||ze)&&Mt.push("approval"),ze||Mt.push("workflow"),md.global.Account.isPortal?(Mt.push("logs","files"),Xe.allowExAccountDiscuss?Xe.exAccountDiscussEnum===0?Mt.push("discussPortal"):Mt.push("discuss"):Mt.push("discuss","discussPortal")):Xe.allowExAccountDiscuss?Xe.exAccountDiscussEnum===0&&Mt.push("discussPortal"):Mt.push("discussPortal"),[].concat((0,ie.Z)(new(xe())(Mt))).length>=6?"":f.createElement("div",{className:"recordInfoInfo "+(Ue||"")},f.createElement(Ae.Z,{configLoading:$e,workflowStatus:Ke,isOpenNewAddedRecord:Et,workflow:ze,approval:gt,hiddenTabs:Mt,appId:xt,appSectionId:kt,viewId:wt,title:fn,rowId:jt,worksheetId:Rt,onFold:qe,projectId:nt,controls:Xe.controls,forReacordDiscussion:!0,formFlag:Ze,formdata:et,allowExAccountDiscuss:Xe.allowExAccountDiscuss,exAccountDiscussEnum:Xe.exAccountDiscussEnum,approved:Xe.approved}))}Ne.propTypes={isOpenNewAddedRecord:O().bool,className:O().string,workflow:O().element,approval:O().element,recordbase:O().shape({}),sheetSwitchPermit:O().arrayOf(O().shape({})),onFold:O().func};var Me=t(18097),Fe=t(35989),Be=t(30381),we,Ie,ge,Re,Pe,ke=(0,E.Z)([`
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  background: rgba(255, 255, 255, 0.8);
  z-index: 2;
`],[`
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  background: rgba(255, 255, 255, 0.8);
  z-index: 2;
`]);function We(Xe,$e,Ke,Ue,He){var ze={};return Object.keys(Ue).forEach(function(gt){ze[gt]=Ue[gt]}),ze.enumerable=!!ze.enumerable,ze.configurable=!!ze.configurable,("value"in ze||ze.initializer)&&(ze.writable=!0),ze=Ke.slice().reverse().reduce(function(gt,Et){return Et(Xe,$e,gt)||gt},ze),He&&ze.initializer!==void 0&&(ze.value=ze.initializer?ze.initializer.call(He):void 0,ze.initializer=void 0),ze.initializer===void 0&&(Object.defineProperty(Xe,$e,ze),ze=null),ze}var Ve=N.ZP.div(function(Xe){var $e=Xe.left;return`
position: absolute;
z-index: 2;
left: `+$e+`px;
width: 10px;
height: 100%;
cursor: ew-resize;
&:hover {
  border-left: 2px solid #ddd;
}
`}),it=N.ZP.div(ke),Ge=(ge=(Pe=Re=function(Xe){(0,U.default)($e,Xe);function $e(Ke){var Ue=this;(0,d.default)(this,$e);var He=(0,H.default)(this,($e.__proto__||o()($e)).call(this,Ke));return He.getPortalConfigSet=function(){var ze=(0,a.Z)(y().mark(function gt(Et){var ft;return y().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:if(ft=Et.appId,ft){nt.next=3;break}return nt.abrupt("return",{});case 3:return nt.abrupt("return",Fe.Z.getConfig({appId:ft}));case 4:case"end":return nt.stop()}},gt,Ue)}));return function(gt){return ze.apply(this,arguments)}}(),He.state={loading:!0,submitLoading:!1,formWidth:He.getFormWidth(Ke),recordinfo:{},tempFormData:[],updateControlIds:[],appId:Ke.appId,worksheetId:Ke.worksheetId,viewId:Ke.viewId,recordId:Ke.recordId,abnormal:!1,sideVisible:Ke.from!==A.GP.DRAFT&&(Ke.from===A.GP.WORKFLOW||!!localStorage.getItem("recordInfoSideVisible")),currentIndex:u().findIndex(Ke.currentSheetRows,function(ze){return u().get(ze,"rowid")===Ke.recordId}),allowExAccountDiscuss:!1,exAccountDiscussEnum:0,approved:!1,forceShowFullValue:null,widgetStyle:Ke.widgetStyle,relateRecordData:{},restoreVisible:!1,canSubmitDraft:!1},He.hadWaterMark=window.hadWaterMark,He.debounceRefresh=u().debounce(He.refreshEvent,1e3),He.refreshEvents={},He.cellObjs={},He.submitType="",He}return(0,Z.default)($e,[{key:"componentDidMount",value:function(){h.uY.addListener("RELOAD_RECORD_INFO",this.debounceRefresh),window.addEventListener("keydown",this.handleRecordInfoKeyDown),this.loadRecord({recordId:this.state.recordId})}},{key:"componentWillReceiveProps",value:function(Ue){(Ue.recordId!==this.props.recordId||Ue.flag!==this.props.flag)&&Ue.recordId&&(this.setState({loading:!0,recordId:Ue.recordId,abnormal:!1,currentIndex:u().findIndex(this.props.currentSheetRows,function(ze){return u().get(ze,"rowid")===Ue.recordId})}),this.loadRecord({recordId:Ue.recordId,props:Ue})),Ue.width!==this.props.width&&this.setState({formWidth:this.getFormWidth(Ue)});var He={};Ue.worksheetId!==this.state.worksheetId&&(He.worksheetId=Ue.worksheetId),Ue.viewId!==this.state.viewId&&(He.viewId=Ue.viewId),Ue.appId!==this.state.appId&&(He.appId=Ue.appId),u().isEmpty(He)||this.setState(He)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleRecordInfoKeyDown),h.uY.removeListener("RELOAD_RECORD_INFO",this.debounceRefresh)}},{key:"loadTempValue",value:function(){var Ue=this,He=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ze=He.updateTime,gt=this.props.recordId,Et=this.state,ft=Et.viewId,qe=Et.iseditting,nt=Et.tempFormData;if(ft){var Ze=void 0,et=function(){if(Ze&&!qe){var xt=safeParse(Ze);if(u().isEmpty(xt))return;var wt=xt.create_at,kt=xt.value,Rt=new Date(wt),jt=new Date(ze);if(Rt>jt){var fn=nt.map(function(Mt){return typeof kt[Mt.controlId]<"u"&&!(Mt.type===29&&Mt.enumDefault!==1||Mt.type===34)?(0,L.default)({},Mt,{value:Mt.type===34?{rows:kt[Mt.controlId]}:kt[Mt.controlId]}):Mt});if(u().isEmpty(fn.filter(function(Mt){return typeof kt[Mt.controlId]<"u"&&!(Mt.type===29&&Mt.enumDefault!==1||Mt.type===34)})))return;Ue.setState({restoreVisible:Rt,tempFormData:fn,formFlag:Math.random().toString()}),Ue.recordform.current&&(Ue.recordform.current.dataFormat.controlIds=nt.filter(function(Mt){return kt[Mt.controlId]&&!u().includes([29,34],Mt.type)}).map(function(Mt){return Mt.controlId}))}}};window.isWxWork?(0,h.ip)(""+md.global.Account.accountId+ft+"-"+gt+"-recordInfo").then(function(ut){Ze=ut,et()}):(Ze=localStorage.getItem("recordInfo_"+ft+"-"+gt),et())}}},{key:"getFormWidth",value:function(Ue){var He=Ue||this.props,ze=He.width,gt=He.viewId,Et=He.sheetSwitchPermit;if(ze>1600&&(ze=1600),!(0,Q.v)(i.RX.recordDiscussSwitch,Et,gt)&&!(0,Q.v)(i.RX.recordLogSwitch,Et,gt))return ze;var ft=void 0;try{if(ft=parseInt(localStorage.getItem("RECORD_INFO_FORM_WIDTH"),10),!u().isNumber(ft)||u().isNaN(ft))throw new Error}catch(qe){ft=ze-500}return ft>ze-425&&(ft=ze-425),ft<450&&(ft=450),ft}},{key:"loadRecord",value:function(){var Ke=(0,a.Z)(y().mark(function He(ze){var gt=ze.recordId,Et=ze.props,ft=ze.closeWhenNotViewData,qe=ze.needUpdateControlIds,nt,Ze,et,ut,xt,wt,kt,Rt,jt,fn,Mt,sn,on,en,$t,an,tn,mt,Lt,zt,Zt,Nt,ct,De,_e,Le;return y().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return nt=Et||this.props,Ze=nt.from,et=nt.view,ut=et===void 0?{}:et,xt=nt.controls,wt=nt.allowAdd,kt=nt.appId,Rt=nt.viewId,jt=nt.worksheetId,fn=nt.relationWorksheetId,Mt=nt.instanceId,sn=nt.workId,on=nt.rules,en=nt.isWorksheetQuery,$t=nt.isWorksheetRowLand,an=nt.hideRows,tn=nt.hideRecordInfo,mt=nt.sheetSwitchPermit,Lt=nt.onError,zt=Lt===void 0?u().noop:Lt,Zt=this.isPublicShare,Nt=this.state.tempFormData,Ct.prev=3,Ct.next=6,(0,x.Om)({appId:kt,viewId:Rt,worksheetId:jt,instanceId:Mt,workId:sn,recordId:gt,getType:(0,h.AW)(Ze),getRules:!on,controls:xt,relationWorksheetId:fn});case 6:if(ct=Ct.sent,De={},!(!Zt&&!u().get(window,"shareState.isPublicForm")&&!u().get(window,"shareState.isPublicWorkflowRecord"))){Ct.next=22;break}if(Ct.prev=9,!(kt===u().get(window,["appInfo","id"])&&!u().get(window,["appInfo","epEnableStatus"])||!(0,Q.v)(i.RX.recordDiscussSwitch,mt,Rt))){Ct.next=14;break}Ct.t0={},Ct.next=17;break;case 14:return Ct.next=16,this.getPortalConfigSet(ct);case 16:Ct.t0=Ct.sent;case 17:De=Ct.t0,Ct.next=22;break;case 20:Ct.prev=20,Ct.t1=Ct.catch(9);case 22:if(ct.worksheetName=(0,pe.T3)(kt,jt).name||ct.worksheetName,ct.formData=ct.formData.map(function(dt){var It=(0,L.default)({},dt,{hidden:dt.hidden||(ut.controls||u().get(ct,"view.controls")||[]).includes(dt.controlId)});if(dt.type===29&&(0,P.get)(dt,"advancedSetting.showtype")===String(A.wn.TABLE)){var bt=dt.strDefault||"",Ut=bt.split(""),Xt=(0,le.Z)(Ut,1),pn=Xt[0],tt=safeParse((0,P.get)(dt,"advancedSetting.resultfilters")),ht=tt&&tt.length>0||!!+pn;return ht?(0,L.default)({},It,{value:void 0}):It}else return It}),($t&&(!Rt||Rt&&!ct.isViewData)||Zt)&&(ct.allowEdit=!1),!(u().isBoolean(ft)&&ft&&Rt&&!ct.isViewData)){Ct.next=30;break}if(an([gt]),Ze===A.GP.WORKSHEET_ROW_LAND){Ct.next=30;break}return tn(gt),Ct.abrupt("return");case 30:_e=qe?Nt.filter(function(dt){return!u().find(qe,function(It){return dt.controlId===It})}).concat(qe.map(function(dt){return u().find(ct.formData,function(It){return It.controlId===dt})}).filter(u().identity)):ct.formData,Le=(0,z.Mb)({rules:on,data:_e}).filter(function(dt){if(dt.type===34){var It=u().find(_e,function(bt){return dt.sectionId==bt.controlId});return It?!dt.hidden&&(0,X.kM)(dt,Ze).visible&&!It.hidden&&(0,X.kM)(It,Ze).visible:!dt.hidden&&(0,X.kM)(dt,Ze).visible}return!1}).map(function(dt){return dt.controlId}),this.setState((0,L.default)({},De,{sideVisible:md.global.Account.isPortal&&!De.allowExAccountDiscuss&&(!De.approved||!(0,Q.v)(i.RX.approveDetailsSwitch,mt,Rt))||Zt||u().get(window,"shareState.isPublicForm")||u().get(window,"shareState.isPublicWorkflowRecord")?!1:this.state.sideVisible,recordinfo:(0,L.default)({},ct,{allowAdd:wt},ct.rules?{}:{rules:on},{isWorksheetQuery:en||u().isUndefined(en)}),tempFormData:qe?Nt.filter(function(dt){return!u().find(qe,function(It){return dt.controlId===It})}).concat(qe.map(function(dt){return u().find(ct.formData,function(It){return It.controlId===dt})}).filter(u().identity)):ct.formData,formFlag:Math.random().toString(),loading:!1,refreshBtnNeedLoading:!1,widgetStyle:ct.advancedSetting||this.state.widgetStyle,childTableControlIds:Le})),this.loadTempValue({updateTime:ct.updateTime}),Ct.next=41;break;case 36:Ct.prev=36,Ct.t2=Ct.catch(3),console.error(Ct.t2),Mt&&sn&&Ct.t2.errorCode===10&&zt(Ct.t2),this.setState({abnormal:!0,loading:!1,recordinfo:Ct.t2||{},refreshBtnNeedLoading:!1});case 41:case"end":return Ct.stop()}},He,this,[[3,36],[9,20]])}));function Ue(He){return Ke.apply(this,arguments)}return Ue}()},{key:"handleCancel",value:function(){this.state.iseditting?this.setState({showCloseDialog:!0}):this.props.hideRecordInfo()}},{key:"handleDelete",value:function(){var Ke=(0,a.Z)(y().mark(function He(ze){var gt,Et,ft,qe,nt,Ze,et,ut,xt;return y().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:if(ze&&u().isFunction(ze.stopPropagation)&&ze.stopPropagation(),gt=this.props,Et=gt.hideRecordInfo,ft=gt.hideRows,qe=gt.deleteRows,nt=gt.onDeleteSuccess,Ze=nt===void 0?function(){}:nt,et=this.state,ut=et.recordId,xt=et.worksheetId,!u().isFunction(qe)){kt.next=7;break}return qe(xt,[{rowid:ut,allowDelete:!0}]),Et(),kt.abrupt("return");case 7:return kt.prev=7,kt.next=10,(0,x.JS)({worksheetId:xt,recordId:ut});case 10:Et(),Ze(),window.customWidgetViewIsActive&&h.uY.emit("POST_MESSAGE_TO_CUSTOM_WIDGET",{action:"delete-record",value:ut}),alert(_l("\u5220\u9664\u6210\u529F")),kt.next=19;break;case 16:kt.prev=16,kt.t0=kt.catch(7),alert(_l("\u5220\u9664\u5931\u8D25"),2);case 19:case"end":return kt.stop()}},He,this,[[7,16]])}));function Ue(He){return Ke.apply(this,arguments)}return Ue}()},{key:"switchRecord",value:function(Ue){var He=this.state,ze=He.recordId,gt=He.iseditting,Et=He.tempFormData,ft=He.restoreVisible,qe=this.props.switchRecordSuccess;if(gt||ft){alert(_l("\u8BF7\u5148\u4FDD\u5B58\u6216\u53D6\u6D88\u5F53\u524D\u66F4\u6539"),3);return}$(".mdEditorSave").click();var nt=this.props.currentSheetRows,Ze=u().findIndex(nt,function(Rt){return Rt&&Rt.rowid===ze}),et=Ue?Ze+1:Ze-1;if(nt[et]){var ut=nt[et].rowid,xt=u().get(nt,et+".appId"),wt=u().get(nt,et+".viewId"),kt=u().get(nt,et+".worksheetId");this.setState({tempFormData:Et.map(function(Rt){return(0,h.XS)(Rt)?(0,L.default)({},Rt,{value:void 0}):Rt})}),(0,pe.Ye)("worksheetRecord",kt,{rowId:ut}),this.loadRecord({recordId:ut,props:kt?(0,L.default)({},this.props,{appId:xt,viewId:wt,worksheetId:kt}):void 0}),this.setState((0,L.default)({recordId:ut,currentIndex:et},kt?{appId:xt,viewId:wt,worksheetId:kt}:{})),typeof qe=="function"&&qe(nt[et])}}},{key:"handleRecordInfoKeyDown",value:function(Ue){var He=this.props,ze=He.tableType,gt=He.showPrevNext;if(ze==="classic"&&Ue.key===" "&&Ue.target.tagName.toLowerCase()==="body"&&!this.con.querySelector(".cell.focus")){this.handleCancel(),Ue.preventDefault(),Ue.stopPropagation();return}var Et=this.props.currentSheetRows,ft=void 0;try{ft=[].concat((0,ie.Z)(document.querySelectorAll(".recordInfoCon"))).pop().getAttribute("data-record-id")}catch(Ze){}if(ft===this.state.recordId){var qe=Et.length>0&&this.state.currentIndex!==0,nt=Et.length>0&&this.state.currentIndex!==Et.length-1;(Ue.ctrlKey||Ue.metaKey)&&Ue.shiftKey&&Ue.keyCode===188?gt&&(qe?this.switchRecord(!1):alert(_l("\u6CA1\u6709\u66F4\u591A\u4E86"),3)):(Ue.ctrlKey||Ue.metaKey)&&Ue.shiftKey&&Ue.keyCode===190&&gt&&(nt?this.switchRecord(!0):alert(_l("\u6CA1\u6709\u66F4\u591A\u4E86"),3))}}},{key:"renderDialogs",value:function(){var Ue=this,He=this.props.hideRecordInfo,ze=this.state,gt=ze.viewId,Et=ze.showCloseDialog;return f.createElement(f.Fragment,null,Et&&f.createElement(re.Z,{visible:Et,title:f.createElement("span",{className:"Red"},_l("\u60A8\u6709\u672A\u4FDD\u5B58\u7684\u4FEE\u6539\uFF0C\u786E\u5B9A\u8981\u79BB\u5F00\u6B64\u9875\u5417\uFF1F")),description:_l("\u5982\u679C\u4E0D\u4FDD\u5B58\uFF0C\u4FEE\u6539\u7684\u5185\u5BB9\u5C06\u4F1A\u4E22\u5931"),onCancel:function(){Ue.setState({showCloseDialog:!1})},onOk:function(){(0,h.jY)("recordInfo",gt+"-"+Ue.state.recordId),He()}}))}},{key:"handleFormChange",value:function(Ue){var He=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],ze=this.props,gt=ze.from,Et=ze.allowAdd,ft=this.state,qe=ft.viewId,nt=ft.recordinfo,Ze=ft.updateControlIds,et=ft.childTableControlIds;et.every(function(kt){return u().includes(He,kt)})&&this.setState({canSubmitDraft:!0});var ut=(0,h.Dy)(Ue,void 0,{updateControlIds:He});qe&&(this.tempSaving=(0,h.l4)("recordInfo",qe+"-"+this.state.recordId,ee()({create_at:Date.now(),value:ut})));var xt=gt===A.GP.DRAFT?Et:u().isUndefined(this.props.allowEdit)?nt.allowEdit:this.props.allowEdit,wt=gt===A.GP.DRAFT&&Ue.filter(function(kt){return kt.type===34}).some(function(kt){return u().get(kt,"value.isDefault")});this.setState({restoreVisible:!1,tempFormData:Ue.map(function(kt){return kt.type===34?(0,L.default)({},kt,{value:void 0}):kt}),iseditting:!wt&&xt,updateControlIds:u().uniqBy(Ze.concat(He))})}},{key:"onSubmit",value:function(){var Ue=this,He=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ze=He.callback,gt=He.noSave,Et=He.ignoreError,ft=He.ignoreAlert,qe=ft===void 0?!1:ft,nt=He.silent,Ze=nt===void 0?!1:nt;if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}this.submitOptions={callback:ze,noSave:gt,ignoreError:Et},this.setState({submitLoading:!0}),setTimeout(function(){Ue.hasFocusingRelateRecordTags=!1,Ue.recordform.current&&Ue.recordform.current.submitFormData({ignoreAlert:qe,silent:Ze})},this.hasFocusingRelateRecordTags?1e3:0)}},{key:"getDraftParams",value:function(Ue){Ue=u().filter(Ue,function(ut){return!u().includes(["wfname","wfstatus","wfcuaids","wfrtime","wfftime","wfdtime","wfcaid","wfctime","wfcotime","rowid","uaid","ownerid","caid","utime","ctime"],ut.controlId)});var He=this.state.relateRecordData,ze=this.props,gt=ze.draftFormControls,Et=gt===void 0?[]:gt,ft=ze.controls,qe=ft===void 0?[]:ft,nt=Ue.filter(function(ut){return ut.controlId!=="ownerid"}).filter(function(ut){return ut.type!==30&&ut.type!==31&&ut.type!==32&&ut.type!==33}).filter(function(ut){return!(0,h.hB)(ut.value)}),Ze=nt.map(function(ut){return ut.controlId}),et=Et.filter(function(ut){return!u().includes(Ze,ut.controlId)}).concat(nt).concat(u().keys(He).map(function(ut){return(0,L.default)({},He[ut],{value:ee()((0,h.VM)(qe,He[ut].value))})}).filter(u().identity));return et.map(function(ut){return ut.type===34?(0,X.jz)((0,L.default)({},ut,{value:u().isObject(ut.value)?(0,L.default)({},ut.value,{isAdd:!0,updated:[]}):ut.value}),{isNewRecord:!0,isDraft:!0}):ut.type===14?(0,X.jz)(ut,{isSubListCopy:!0,isNewRecord:!0,isDraft:!0}):(0,X.jz)(ut,{isNewRecord:!0,isDraft:!0})})}},{key:"onSave",value:function(Ue,He){var ze=this,gt=He.data,Et=He.updateControlIds,ft=He.handleRuleError,qe=this.props,nt=qe.setHighLightOfRows,Ze=nt===void 0?function(){}:nt,et=qe.from,ut=this.submitOptions||{},xt=ut.callback,wt=xt===void 0?function(){}:xt,kt=ut.noSave,Rt=ut.ignoreError;if(gt=et===A.GP.DRAFT?gt:gt.filter(function(It){return!(0,h.XS)(It,{ignoreInFormTable:!0})}),Ue&&!Rt){wt({error:!0}),this.setState({submitLoading:!1});return}var jt=this.props,fn=jt.projectId,Mt=jt.instanceId,sn=jt.workId,on=jt.updateSuccess,en=jt.updateRows,$t=jt.hideRows,an=jt.hideRecordInfo,tn=jt.updateWorksheetControls,mt=jt.allowEmptySubmit,Lt=this.cellObjs,zt=this.state,Zt=zt.appId,Nt=zt.viewId,ct=zt.worksheetId,De=zt.recordId,_e=zt.recordinfo,Le=void 0,rt=(0,h.qS)(gt,this.submitType==="draft"?2:3);function Ct(It){try{return Lt[It].cell.props.rows}catch(bt){return[]}}function dt(It){try{return u().get(Lt,It+".cell.state.controls")||Lt[It].cell.controls}catch(bt){return}}if(Le&&!Rt)return alert(_l("\u8BF7\u6B63\u786E\u586B\u5199%0",_e.entityName),3),u().isFunction(wt)&&wt({error:!0}),this.setState({submitLoading:!1}),!1;if(kt){this.setState({submitLoading:!1}),wt();return}if(this.submitType==="draft"){j.Z.addWorksheetRow({projectId:fn,appId:Zt,worksheetId:ct,viewId:Nt,draftRowId:De,rowStatus:11,pushUniqueId:md.global.Config.pushUniqueId,receiveControls:this.getDraftParams(gt)}).then(function(It){It.resultCode===1?((0,h.jY)("recordInfo",Nt+"-"+ze.state.recordId),u().isFunction(u().get(ze,"tempSaving.cancel"))&&u().get(ze,"tempSaving.cancel")(),alert(_l("\u8BB0\u5F55\u6DFB\u52A0\u6210\u529F")),ze.props.loadDraftList(),ze.props.hideRecordInfo(),ze.props.addNewRecord&&u().isFunction(ze.props.addNewRecord)&&ze.props.addNewRecord(It.data,ze.props.view),Ze([De])):It.resultCode===11&&It.badData&&!u().isEmpty(It.badData)?ze.recordform.current&&u().isFunction(ze.recordform.current.uniqueErrorUpdate)&&ze.recordform.current.uniqueErrorUpdate(It.badData):It.resultCode===2?alert(_l("\u5F53\u524D\u8349\u7A3F\u5DF2\u4FDD\u5B58\uFF0C\u8BF7\u52FF\u91CD\u590D\u63D0\u4EA4"),2):alert(_l("\u8BB0\u5F55\u6DFB\u52A0\u5931\u8D25"),2),It.resultCode!==1&&ze.setState({submitLoading:!1})}).catch(function(It){ze.setState({submitLoading:!1}),u().isObject(It)?alert(It.errorMessage||_l("\u8BB0\u5F55\u6DFB\u52A0\u5931\u8D25"),2):alert(It||_l("\u8BB0\u5F55\u6DFB\u52A0\u5931\u8D25"),2)});return}this.abortChildTable(),(0,x.Vs)({appId:Zt,viewId:Nt,getType:(0,h.AW)(et),worksheetId:ct,recordId:De,projectId:fn,instanceId:Mt,workId:sn,data:gt,updateControlIds:Et,updateSuccess:on,isDraft:et===A.GP.DRAFT,allowEmptySubmit:mt,triggerUniqueError:function(bt){ze.recordform.current&&u().isFunction(ze.recordform.current.uniqueErrorUpdate)&&ze.recordform.current.uniqueErrorUpdate(bt)},setSubListUniqueError:function(bt){ze.recordform.current.dataFormat.callStore("setUniqueError",{badData:bt})},setRuleError:function(bt){ft(bt,Lt)}},function(It,bt,Ut){if(setTimeout(function(){ze.setState({submitLoading:!1})},600),It)wt({error:It});else{var Xt=_e.formData.map(function(tt){var ht=bt[tt.controlId];return u().assign({},tt,{value:ht,count:bt["rq"+tt.controlId]})});en([De],u().omit(bt,["allowedit","allowdelete"]),u().pick(bt,Et)),window.customWidgetViewIsActive&&h.uY.emit("POST_MESSAGE_TO_CUSTOM_WIDGET",{action:"update-record",value:bt}),ze.refreshAsyncLoadControl(),(0,P.get)(ze,"recordform.current.dataFormat.callStore")&&ze.recordform.current.dataFormat.callStore("reset"),Nt&&!bt.isviewdata&&($t([De]),et!==A.GP.WORKSHEET_ROW_LAND&&an()),u().isFunction(wt)&&wt({logId:Ut}),ze.setState({iseditting:!1});var pn=(0,h.II)(gt,bt);pn.length&&(u().isFunction(tn)&&tn(pn),Xt=Xt.map(function(tt){var ht=u().find(pn,function(Dt){return Dt.controlId===tt.controlId});return ht?(0,L.default)({},ht,{value:bt[ht.controlId]||ht.value}):tt})),ze.setState({formFlag:Math.random().toString(),tempFormData:Xt,recordinfo:(0,L.default)({},_e,{formData:Xt}),updateControlIds:[]}),(0,h.jY)("recordInfo",Nt+"-"+ze.state.recordId),u().isFunction(ze.refreshEvents.loadcustombtns)&&(u().isFunction(u().get(ze,"tempSaving.cancel"))&&u().get(ze,"tempSaving.cancel")(),ze.refreshEvents.loadcustombtns())}})}},{key:"saveDraftData",value:function(Ue){var He=this,ze=Ue.draftType;if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}if(ze==="submit"){this.submitType="draft",this.setState({submitLoading:!0}),this.recordform.current.submitFormData();return}this.setState({submitLoading:!0});var gt=this.recordform.current.getSubmitData({silent:!0,ignoreAlert:!0}),Et=gt.data,ft=this.props,qe=ft.projectId,nt=ft.recordId,Ze=this.state,et=Ze.appId,ut=Ze.viewId,xt=Ze.worksheetId;j.Z.addWorksheetRow({projectId:qe,appId:et,worksheetId:xt,viewId:ut,draftRowId:nt,rowStatus:ze==="submit"?11:21,pushUniqueId:md.global.Config.pushUniqueId,receiveControls:this.getDraftParams(Et)}).then(function(wt){wt.resultCode===1?(alert(_l("\u8BB0\u5F55\u4FDD\u5B58\u6210\u529F")),He.props.loadDraftList(),He.props.hideRecordInfo()):alert(_l("\u8BB0\u5F55\u4FDD\u5B58\u5931\u8D25"),2)}).catch(function(wt){u().isObject(wt)?alert(wt.errorMessage||_l("\u8BB0\u5F55\u6DFB\u52A0\u5931\u8D25"),2):alert(wt||_l("\u8BB0\u5F55\u6DFB\u52A0\u5931\u8D25"),2)})}},{key:"updateRecordOwner",value:function(Ue,He){var ze=this.props.updateRows,gt=this.state,Et=gt.recordId,ft=gt.recordinfo,qe={ownerid:ee()([Ue])};ze([Et],u().omit(He,["allowedit","allowdelete"]),qe),this.setState({recordinfo:(0,L.default)({},ft,{ownerAccount:Ue})})}},{key:"abortChildTable",value:function(){var Ue=this;b()(this.cellObjs).forEach(function(He){u().get(Ue,"cellObjs."+He+".cell.updateAbortController")&&Ue.cellObjs[He].cell.updateAbortController()})}},{key:"handleCancelChange",value:function(){var Ue=this.state,He=Ue.viewId,ze=Ue.recordinfo,gt=Ue.updateControlIds;(0,h.jY)("recordInfo",He+"-"+this.state.recordId),h.uY.emit("SAVE_CANCEL_RECORD"),this.setState({tempFormData:ze.formData||[],iseditting:!1,formFlag:Math.random().toString()}),this.recordform.current.dataFormat.callStore("cancelChange"),this.abortChildTable()}},{key:"refreshEvent",value:function(Ue){var He=Ue.worksheetId,ze=Ue.recordId,gt=Ue.closeWhenNotViewData,Et=this.state.iseditting;!Et&&He===this.state.worksheetId&&ze===this.state.recordId&&this.handleRefresh({closeWhenNotViewData:gt})}},{key:"handleRefresh",value:function(){var Ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},He=Ue.closeWhenNotViewData,ze=Ue.doNotResetPageIndex;if(!this.state.iseditting){this.setState({refreshBtnNeedLoading:!0}),u().each(this.refreshEvents||{},function(Ze){u().isFunction(Ze)&&Ze({doNotResetPageIndex:ze})});var gt=this.state,Et=gt.recordId,ft=gt.worksheetId,qe=gt.appId,nt=gt.viewId;this.loadRecord({recordId:Et,worksheetId:ft,appId:qe,viewId:nt,closeWhenNotViewData:He}),h.uY.emit("RELOAD_RECORD_INFO_DISCUSS"),h.uY.emit("RELOAD_RECORD_INFO_LOG")}}},{key:"refreshAsyncLoadControl",value:function(){var Ue=this,He=this.state.tempFormData;He.forEach(function(ze){u().isFunction(Ue.refreshEvents[ze.controlId])&&Ue.refreshEvents[ze.controlId]({noLoading:!0})})}},{key:"handleUnMask",value:function(){this.setState({forceShowFullValue:!0})}},{key:"render",value:function(){var Ue=this,He=this.props,ze=He.allowEdit,gt=He.allowAdd,Et=He.isOpenNewAddedRecord,ft=He.header,qe=He.controls,nt=qe===void 0?[]:qe,Ze=He.workflow,et=He.view,ut=He.instanceId,xt=He.workId,wt=He.notDialog,kt=He.from,Rt=He.appSectionId,jt=He.currentSheetRows,fn=He.hideRecordInfo,Mt=He.updateRows,sn=He.isSubList,on=He.sheetSwitchPermit,en=He.showPrevNext,$t=He.handleAddSheetRow,an=He.updateWorksheetControls,tn=an===void 0?function(){}:an,mt=He.rowStatus,Lt=He.hideEditingBar,zt=He.workflowStatus,Zt=He.customBtnTriggerCb,Nt=Zt===void 0?function(){}:Zt,ct=this.props.isCharge;u().isUndefined(ct)&&It&&(ct=window["app_"+It+"_is_charge"]);var De=this.state,_e=De.loading,Le=De.submitLoading,rt=De.formWidth,Ct=De.refreshBtnNeedLoading,dt=De.abnormal,It=De.appId,bt=De.viewId,Ut=De.worksheetId,Xt=De.recordId,pn=De.currentIndex,tt=De.recordinfo,ht=De.tempFormData,Dt=De.showError,Ot=De.formFlag,Ht=De.iseditting,Kt=De.restoreVisible,dn=De.sideVisible,Cn=De.hideRight,Rn=De.dragMaskVisible,gn=De.allowExAccountDiscuss,wn=De.exAccountDiscussEnum,On=De.approved,An=De.forceShowFullValue,Yn=De.widgetStyle,kn=De.relateRecordData,Fn=De.canSubmitDraft,$n=De.childTableControlIds,ba=$n===void 0?[]:$n,ua=(0,z.tf)(tt.rules,tt.formData,Xt),La=this.props.width;La>1600&&(La=1600);var ga=window.innerWidth<400,Ua=u().find(ht,function(da){return da.attribute===1})||{},yr=u().isNull(An)?u().get(Ua,"advancedSetting.datamask")!=="1":An,sr=(0,X.xI)(ht,void 0,void 0,{noMask:yr}),Ba={appId:u().isUndefined(It)?tt.appId:It,worksheetId:Ut,appSectionId:Rt,viewId:bt,recordId:Xt,instanceId:ut,workId:xt,from:kt,notDialog:wt,isSubList:sn,isCharge:ct,isSmall:ga,recordTitle:sr,allowEdit:kt===A.GP.DRAFT?gt:u().isUndefined(ze)?tt.allowEdit:ze},cr={forceShowFullValue:yr,maskPermissions:(ct||u().get(Ua,"advancedSetting.isdecrypt")==="1")&&Ua.value&&!yr&&!window.shareState.shareId,handleUnMask:this.handleUnMask},hr=!this.hadWaterMark&&tt.projectId,Qa=hr?c.Z:f.Fragment;return!this.hadWaterMark&&_e?f.createElement("span",null):f.createElement(Qa,hr?{projectId:tt.projectId}:{},f.createElement(B.Z.Provider,{value:{api:new x.tu({appId:It,worksheetId:Ut,viewId:bt,recordId:Xt}),updateWorksheetControls:tn,recordBaseInfo:Ba}},this.renderDialogs(),(kt!==A.GP.WORKFLOW||bt)&&mt!==21&&!Lt&&f.createElement(I.Z,{okDisabled:!Ht,loading:Le,style:{width:dn?rt:"100%"},visible:Ht,defaultTop:-50,visibleTop:8,title:_l("\u6B63\u5728\u4FEE\u6539\u8868\u5355\u6570\u636E \xB7\xB7\xB7"),saveShortCut:!0,onOkMouseDown:function(){Ue.hasFocusingRelateRecordTags=!!Ue.con.querySelector(".cellRelateRecordTags.cellControlEdittingStatus")},onUpdate:this.onSubmit,onCancel:this.handleCancelChange}),(kt!==A.GP.WORKFLOW||bt)&&mt!==21&&f.createElement(I.Z,{loading:Le,style:{width:dn?rt:"100%"},visible:!!Kt,defaultTop:-50,visibleTop:8,title:_l("\u5DF2\u6062\u590D\u5230\u4E0A\u6B21\u4E2D\u65AD\u5185\u5BB9\uFF08%0\uFF09",window.createTimeSpan(new Date(Kt))),onUpdate:function(){Ue.setState({restoreVisible:!1,iseditting:!0})},onCancel:function(){(0,h.jY)("recordInfo",bt+"-"+Ue.state.recordId),Ue.setState({restoreVisible:!1,tempFormData:tt.formData||[],formFlag:Math.random().toString(32)})}}),f.createElement("div",{className:K()("recordInfoCon flexColumn",{abnormal:dt,isWorkflow:kt===A.GP.WORKFLOW}),"data-record-id":Xt,"data-view-id":bt,ref:function(Jn){return Ue.con=Jn},onClick:function(Jn){return Jn.stopPropagation()}},!dt&&!((u().get(window,"shareState.isPublicView")||u().get(window,"shareState.isPublicPage"))&&u().get(et,"viewType")===6&&String(u().get(et,"childType"))==="1")&&f.createElement(me,{isCharge:ct,from:kt,isOpenNewAddedRecord:Et,allowExAccountDiscuss:gn,exAccountDiscussEnum:wn,approved:On,loading:_e,view:et,viewId:bt,header:kt===21&&!u().isEmpty(ba)&&!Fn?f.createElement("div",{className:"flex"}):ft,isSmall:ga,sideVisible:dn,sheetSwitchPermit:on,recordbase:Ba,recordinfo:tt,iseditting:Ht,showPrevNext:en,switchRecord:this.switchRecord,currentSheetRows:jt,currentIndex:pn,addRefreshEvents:function(Jn,ra){Ue.refreshEvents[Jn]=ra},onRefresh:this.handleRefresh,onSubmit:this.onSubmit,refreshRotating:Ct,hideRecordInfo:fn,reloadRecord:function(){return Ue.handleRefresh({doNotResetPageIndex:!0})},onSideIconClick:function(){kt!==A.GP.WORKFLOW&&safeLocalStorageSetItem("recordInfoSideVisible",dn?"":"true"),Ue.setState({sideVisible:!dn,hideRight:dn})},onCancel:this.handleCancel,onUpdate:function(Jn,ra){Mt([Xt],u().omit(ra,["allowedit","allowdelete"]),Jn);var ha=(0,L.default)({},Jn);u().filter(tt.formData,function(wa){return wa.type===34&&Jn[wa.controlId]}).length&&(ha=u().omit(ra,["allowedit","allowdelete"]));var Ia=tt.formData.map(function(wa){return u().assign({},wa,{value:u().isUndefined(ha[wa.controlId])?wa.value:ha[wa.controlId]})});b()(Jn).forEach(function(wa){u().isFunction(Ue.refreshEvents[wa])&&Ue.refreshEvents[wa]()}),Ue.setState({formFlag:Math.random().toString(),tempFormData:Ia,recordinfo:(0,L.default)({},tt,{formData:Ia})})},onDelete:this.handleDelete,handleAddSheetRow:function(Jn,ra){Ue.loadRecord({recordId:Jn.rowid}),Ue.setState({recordId:Jn.rowid,currentIndex:pn+1}),u().isFunction($t)&&$t(Jn,ra)},customBtnTriggerCb:Nt}),f.createElement("div",{className:"recordBody flex flexRow"},Le&&f.createElement(it,null),Rn&&f.createElement(F.Z,{value:rt,min:450,max:La-423,onChange:function(Jn){safeLocalStorageSetItem("RECORD_INFO_FORM_WIDTH",Jn),Ue.setState({dragMaskVisible:!1,formWidth:Jn})}}),f.createElement(m.Z,{ignoreHeader:kt===A.GP.WORKFLOW&&ft&&bt,ignoreLock:kt===A.GP.WORKFLOW||kt===A.GP.DRAFT,from:kt,isLock:ua,formWidth:dn?rt:La,loading:_e,recordbase:Ba,maskinfo:cr,widgetStyle:Yn,mountRef:function(Jn){return Ue.recordform=Jn},registerCell:function(Jn){var ra=Jn.item,ha=Jn.cell;return Ue.cellObjs[ra.controlId]={item:ra,cell:ha}},formFlag:Ot,abnormal:dt,recordinfo:tt,formdata:ht,controlProps:{recordInfoFrom:kt,isCharge:ct,refreshRecord:this.handleRefresh,addRefreshEvents:function(Jn,ra){Ue.refreshEvents[Jn]=ra},updateRelationControls:function(Jn,ra){Ue.recordform.current.dataFormat.data=Ue.recordform.current.dataFormat.data.map(function(ha){return ha.type===34&&ha.dataSource===Jn?(0,L.default)({},ha,{relationControls:ra}):ha}),Ue.recordform.current.setState({renderData:Ue.recordform.current.getFilterDataByRule()})},sideVisible:dn,formWidth:rt},worksheetId:Ut,view:et,showError:Dt,iseditting:Ht,sheetSwitchPermit:on,addRefreshEvents:function(Jn,ra){Ue.refreshEvents[Jn]=ra},updateRecordDialogOwner:this.updateRecordOwner,updateRows:Mt,onChange:this.handleFormChange,updateRelateRecordTableCount:function(Jn,ra){var ha=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ia=ha.changed;if((0,P.get)(Ue,"recordform.current")){Mt([Xt],(0,S.default)({},Jn,String(ra)),(0,S.default)({},Jn,String(ra)));var wa=Ue.state.tempFormData,Ka=u().find(wa,{controlId:Jn});typeof ra=="number"&&ra>=0&&u().get(Ue,"recordform.current.dataFormat")&&(Ue.recordform.current.dataFormat.setControlItemValue(Jn,String(ra)),Ue.recordform.current.updateRenderData({noRule:!0}),Ue.setState({tempFormData:wa.map(function(tr){return tr.controlId===Jn?(0,L.default)({},tr,{value:String(ra)}):tr})}),Ia&&u().isFunction(Ue.refreshEvents.loadcustombtns)&&Ue.refreshEvents.loadcustombtns()),Ia&&(wa.filter(function(tr){return tr.type===37&&u().includes(tr.dataSource,Jn)}).forEach(function(tr){j.Z.getRowDetail({worksheetId:Ut,rowId:Xt,getType:1}).then(function(Tr){var xr=safeParse(Tr.rowData)[tr.controlId],_a=wa.map(function(gr){return gr.controlId===tr.controlId?(0,L.default)({},gr,{value:xr}):gr});u().isUndefined(xr)||(Ue.setState({recordinfo:(0,L.default)({},tt,{formData:_a}),tempFormData:_a}),Ue.recordform.current.dataFormat.updateDataSource({controlId:tr.controlId,value:xr}),Ue.recordform.current.updateRenderData())})}),u().isFunction(Ue.refreshEvents.loadcustombtns)&&Ue.refreshEvents.loadcustombtns())}},onSave:this.onSave,onCancel:this.handleCancelChange,onError:function(){Ue.setState({submitLoading:!1})},currentIndex:pn,onRelateRecordsChange:function(Jn,ra){if(!(!Ue.recordform||!Ue.recordform.current||kt!==A.GP.DRAFT)){var ha=(0,L.default)({},kn,(0,S.default)({},Jn.controlId,(0,L.default)({},Jn,{value:ra})));Ue.setState({relateRecordData:ha})}},updateWorksheetControls:function(){var Jn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];tn(nt.map(function(ra){return u().find(Jn,{controlId:ra.controlId})||ra}))}}),dn&&f.createElement(Ve,{left:rt,onMouseDown:function(){return Ue.setState({dragMaskVisible:!0})}}),!dt&&(dn||typeof Cn<"u")&&f.createElement(Ne,{workflowStatus:zt||u().get(u().find(ht,function(da){return da.controlId==="wfstatus"}),"value"),loading:_e,isOpenNewAddedRecord:Et,allowExAccountDiscuss:gn,exAccountDiscussEnum:wn,approved:On,className:K()("flex",{hide:Cn}),recordbase:Ba,workflow:Ze,approval:f.createElement(Me.Z,{projectId:this.props.projectId||tt.projectId,worksheetId:Ut,recordId:Xt,isCharge:tt.roleType===2,refreshBtnNeedLoading:Ct,formWidth:rt,appId:It}),sheetSwitchPermit:on,projectId:this.props.projectId,controls:nt,formFlag:Ot,formdata:ht.map(function(da){return da.controlId==="ownerid"?(0,L.default)({},da,{value:tt.ownerAccount&&ee()([tt.ownerAccount])}):da})})))))}},{key:"isPublicShare",get:function(){return u().get(window,"shareState.isPublicRecord")||u().get(window,"shareState.isPublicView")||u().get(window,"shareState.isPublicPage")||u().get(window,"shareState.isPublicQuery")||u().get(window,"shareState.isPublicPrint")}}]),$e}(f.Component),Re.propTypes={width:O().number,visible:O().bool,isCharge:O().bool,allowAdd:O().bool,isOpenNewAddedRecord:O().bool,notDialog:O().bool,showPrevNext:O().bool,instanceId:O().string,workId:O().string,appId:O().string,appSectionId:O().string,viewId:O().string,recordId:O().string,worksheetId:O().string,from:O().number,view:O().shape({}),sheetSwitchPermit:O().arrayOf(O().shape({})),isSubList:O().bool,allowEdit:O().bool,updateSuccess:O().func,updateWorksheetControls:O().func,projectId:O().string,currentIndex:O().number,hideRecordInfo:O().func,updateRows:O().func,hideRows:O().func,currentSheetRows:O().arrayOf(O().shape({})),header:O().element,workflow:O().element,hideEditingBar:O().bool,switchRecordSuccess:O().func,customBtnTriggerCb:O().func},Re.defaultProps={showPrevNext:!1,editable:!0,view:{},sheetSwitchPermit:[],hideRecordInfo:function(){},updateRows:function(){},hideRows:function(){},from:A.GP.WORKSHEET,currentSheetRows:[],hideEditingBar:!1},Pe),We(ge.prototype,"handleCancel",[V.Nj],g()(ge.prototype,"handleCancel"),ge.prototype),We(ge.prototype,"handleDelete",[V.Nj],g()(ge.prototype,"handleDelete"),ge.prototype),We(ge.prototype,"switchRecord",[V.Nj],g()(ge.prototype,"switchRecord"),ge.prototype),We(ge.prototype,"handleRecordInfoKeyDown",[V.Nj],g()(ge.prototype,"handleRecordInfoKeyDown"),ge.prototype),We(ge.prototype,"handleFormChange",[V.Nj],g()(ge.prototype,"handleFormChange"),ge.prototype),We(ge.prototype,"onSubmit",[V.Nj],g()(ge.prototype,"onSubmit"),ge.prototype),We(ge.prototype,"getDraftParams",[V.Nj],g()(ge.prototype,"getDraftParams"),ge.prototype),We(ge.prototype,"onSave",[V.Nj],g()(ge.prototype,"onSave"),ge.prototype),We(ge.prototype,"saveDraftData",[V.Nj],g()(ge.prototype,"saveDraftData"),ge.prototype),We(ge.prototype,"updateRecordOwner",[V.Nj],g()(ge.prototype,"updateRecordOwner"),ge.prototype),We(ge.prototype,"abortChildTable",[V.Nj],g()(ge.prototype,"abortChildTable"),ge.prototype),We(ge.prototype,"handleCancelChange",[V.Nj],g()(ge.prototype,"handleCancelChange"),ge.prototype),We(ge.prototype,"refreshEvent",[V.Nj],g()(ge.prototype,"refreshEvent"),ge.prototype),We(ge.prototype,"handleRefresh",[V.Nj],g()(ge.prototype,"handleRefresh"),ge.prototype),We(ge.prototype,"refreshAsyncLoadControl",[V.Nj],g()(ge.prototype,"refreshAsyncLoadControl"),ge.prototype),We(ge.prototype,"handleUnMask",[V.Nj],g()(ge.prototype,"handleUnMask"),ge.prototype),ge),pt,ot,vt,At,yt;function st(Xe,$e,Ke,Ue,He){var ze={};return Object.keys(Ue).forEach(function(gt){ze[gt]=Ue[gt]}),ze.enumerable=!!ze.enumerable,ze.configurable=!!ze.configurable,("value"in ze||ze.initializer)&&(ze.writable=!0),ze=Ke.slice().reverse().reduce(function(gt,Et){return Et(Xe,$e,gt)||gt},ze),He&&ze.initializer!==void 0&&(ze.value=ze.initializer?ze.initializer.call(He):void 0,ze.initializer=void 0),ze.initializer===void 0&&(Object.defineProperty(Xe,$e,ze),ze=null),ze}var St=(0,n.Z)(Ge),Qe=(vt=(yt=At=function(Xe){(0,U.default)($e,Xe);function $e(Ke){(0,d.default)(this,$e);var Ue=(0,H.default)(this,($e.__proto__||o()($e)).call(this,Ke));return Ue.recordinfo=f.createRef(),Ue.state={loading:Ke.from===A.GP.WORKFLOW||u().isEmpty(Ke.sheetSwitchPermit)},Ue}return(0,Z.default)($e,[{key:"componentDidMount",value:function(){this.state.loading&&this.init()}},{key:"init",value:function(){var Ke=(0,a.Z)(y().mark(function He(){var ze,gt,Et,ft,qe,nt,Ze,et,ut,xt;return y().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:if(ze=this.props,gt=ze.instanceId,Et=ze.workId,ft=this.props,qe=ft.worksheetId,nt=ft.recordId,Ze=ft.sheetSwitchPermit,et=ft.viewId,ut=et===void 0?"":et,!(this.props.from===A.GP.WORKFLOW&&(!qe||!nt))){kt.next=20;break}return kt.prev=3,kt.next=6,j.Z.getWorkItem({instanceId:gt,workId:Et});case 6:if(xt=kt.sent,!(xt.worksheetId&&xt.rowId)){kt.next=13;break}qe=xt.worksheetId,nt=xt.rowId,ut=xt.viewId,kt.next=14;break;case 13:throw new Error;case 14:kt.next=20;break;case 16:return kt.prev=16,kt.t0=kt.catch(3),this.setState({error:!0,errorMsg:u().get(kt.t0,"errorMessage")||_l("\u6D41\u7A0B\u5DF2\u5173\u95ED\u6216\u5220\u9664")}),kt.abrupt("return");case 20:if(!((!Ze||u().isEmpty(Ze))&&qe&&md.global.Account.accountId)){kt.next=30;break}return kt.prev=21,kt.next=24,j.Z.getSwitchPermit({worksheetId:qe});case 24:Ze=kt.sent,kt.next=30;break;case 27:kt.prev=27,kt.t1=kt.catch(21),Ze=[];case 30:this.setState({loading:!1,worksheetId:qe,recordId:nt,viewId:ut,sheetSwitchPermit:Ze});case 31:case"end":return kt.stop()}},He,this,[[3,16],[21,27]])}));function Ue(){return Ke.apply(this,arguments)}return Ue}()},{key:"handleCancel",value:function(Ue){Ue.stopPropagation();var He=this.props.hideRecordInfo;this.recordinfo.current?this.recordinfo.current.handleCancel():He()}},{key:"saveDraftData",value:function(Ue){var He=Ue.draftType;this.recordinfo.current&&this.recordinfo.current.saveDraftData({draftType:He})}},{key:"render",value:function(){var Ue=this.props,He=Ue.notDialog,ze=Ue.width,gt=Ue.visible,Et=Ue.from,ft=Ue.instanceId,qe=Ue.workId,nt=this.state,Ze=nt.loading,et=nt.error,ut=nt.errorMsg,xt=nt.worksheetId,wt=nt.recordId,kt=nt.viewId,Rt={},jt=ze||(window.innerWidth-32*2>1600?1600:window.innerWidth-32*2);Et===A.GP.WORKFLOW&&(Rt.worksheetId=xt,Rt.recordId=wt,Rt.instanceId=ft,Rt.workId=qe,Rt.viewId=kt);var fn={className:"workSheetRecordInfo",dislocate:!0,footer:null,onCancel:this.handleCancel,type:"fixed",width:jt,visible:gt},Mt=void 0,sn=this.props.sheetSwitchPermit||this.state.sheetSwitchPermit,on=He?St:Ge;return et?Mt=f.createElement(s.Q,{className:"error Gray_9e"},ut):Mt=Ze?f.createElement(te.Z,{className:"mTop32"}):f.createElement(on,(0,L.default)({ref:this.recordinfo,notDialog:He},(0,L.default)({},this.props,Rt,{sheetSwitchPermit:sn,width:He?void 0:jt}))),He?f.createElement("div",{className:"workSheetRecordInfo h100"},Mt):f.createElement(p.Z,(0,L.default)({},fn,{verticalAlign:"bottom",closeSize:56,style:{minWidth:900},bodyStyle:{padding:0,position:"relative"}}),Mt)}}]),$e}(f.Component),At.propTypes={from:O().number,notDialog:O().bool,visible:O().bool,sheetSwitchPermit:O().arrayOf(O().shape({})),instanceId:O().string,workId:O().string,hideRecordInfo:O().func,onError:O().func,allowEdit:O().bool,allowEmptySubmit:O().bool},At.defaultProps={hideRecordInfo:function(){}},yt),st(vt.prototype,"handleCancel",[V.Nj],g()(vt.prototype,"handleCancel"),vt.prototype),vt)},15498:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>V});var ce=t(42723),g=t(88239),p=t(85105),L=t.n(p),te=t(99663),R=t(22600),y=t(49135),a=t(93196),r=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var o=t(45697),d=t.n(o);if(!/^(1887|7596|7798)$/.test(t.j))var Z=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var H=t(88349);var U=t(96486),f=t.n(U);const V=function(C){var O,n;return n=O=function(s){(0,a.default)(j,s);function j(A){(0,te.default)(this,j);var S=(0,y.default)(this,(j.__proto__||L()(j)).call(this,A));return S.state={loading:!0,worksheetinfo:{}},S}return(0,R.default)(j,[{key:"componentDidMount",value:function(){var S=this,I=this.props,c=I.loadWorksheetInfo,q=I.loadWorksheetRecord,b=I.worksheetId,k=I.appId,ee=I.rowId,re=I.viewId;c?Z.Z.getWorksheetInfo({worksheetId:b,getTemplate:!0}).then(function(ie){S.setState({loading:!1,worksheetinfo:f().pick(ie,["appId","projectId","entityName","allowAdd","template"])})}):q&&(0,H.r)({getType:1,appId:k,rowId:ee,viewId:re,worksheetId:b}).then(function(ie){S.setState({loading:!1,worksheetinfo:(0,g.default)({formData:ie.formData},f().pick(ie,["appId","projectId","entityName","allowAdd","template"]))})})}},{key:"render",value:function(){var S=this.props,I=S.loadWorksheetInfo,c=S.loadWorksheetRecord,q=(0,ce.Z)(S,["loadWorksheetInfo","loadWorksheetRecord"]),b=this.state,k=b.loading,ee=b.worksheetinfo;return(!(I||c)||!k)&&r.createElement(C,(0,g.default)({},q,ee))}}]),j}(r.Component),O.propTypes={loadWorksheetInfo:d().bool,loadWorksheetRecord:d().bool,worksheetId:d().string,appId:d().string,rowId:d().string,viewId:d().string},n}},12496:(lt,Te,t)=>{"use strict";t.d(Te,{tu:()=>Ce,JS:()=>de,Vn:()=>ye,C5:()=>ue,ER:()=>Y,n5:()=>ve,WB:()=>Se,tE:()=>pe,Bf:()=>oe,Om:()=>se,Vs:()=>ae,SD:()=>ne,z6:()=>Ee,A2:()=>he});var ce=t(94942),g=t.n(ce),p=t(36803),L=t(99663),te=t(22600),R=t(88106),y=t(85315),a=t(88239),r=t(12424),o=t(46593),d=t.n(o),Z=t(61987),H=t(45231),U=t(5505),f=t(88349),V=t(40979),C=t(24607),O=t(91555),n=t(15577),s=t(15029),j=t(63239),A=t.n(j),S=t(31546),I=t(32422),c=t(69288),q=t(59962),b=t(67294),k=t(73935),ee=t(68085),re=t(22013),ie=t(57482),le=t(52106),E=t(96213),w=t(94780),K=t(68924),N=t.n(K),F=t(38197),h=t.n(F),z=t(63419),X=t.n(z),B=t(98110),x=t(99452),Q=t(30381),i=t.n(Q),m=t(94796),v=function J(me){var be=this,xe={frameid:"createTask",TaskName:"",Description:"",FolderID:"",ProjectID:null,folderName:"",PostID:"",CalenderID:"",recurTime:"",worksheetAndRowId:"",DialogName:_l("\u521B\u5EFA\u65B0\u4EFB\u52A1"),Deadlines:"",StageID:"",StageName:"",createShare:null,isFromPost:!1,taskTreeView:!1,ChargeArray:[{accountId:md.global.Account.accountId,fullname:md.global.Account.fullname,avatar:md.global.Account.avatar}],MemberArray:[],createTaskAttachments:{attachmentData:[],kcAttachmentData:[]},callback:null,shareCallback:null,relationCallback:null,itemId:""};be.settings=$.extend(xe,me);var Ae=be.settings;if(location.href.indexOf("task")>=0||location.href.indexOf("application")>=0){var Ne=$("#tasks");Ne.attr("data-fid")&&(Ae.ProjectID=Ne.attr("data-pid"),Ae.FolderID=Ne.attr("data-fid"),Ae.folderName=$(".folderList li[data-id="+Ae.FolderID+"] .folderName:first").text()||$(".taskToolbar .folderName").text())}J.settings=Ae,be.init()};$.extend(v.prototype,{init:function(){var me=this,be=me.settings,xe=!1;if(be.ProjectID===null){var Ae=window.localStorage.getItem("lastProjectId");Ae!==null?be.ProjectID=Ae:(md.global.Account.projects||[]).length?be.ProjectID=md.global.Account.projects[0].projectId:be.ProjectID=""}$.map(md.global.Account.projects,function(Me,Fe){if(be.ProjectID===Me.projectId&&(xe=!0,Me.licenseType===0)){be.ProjectID="";return}}),(!md.global.Account.projects.length||!xe)&&(be.ProjectID=""),be.companyName=_l("\u4E2A\u4EBA"),$.map(md.global.Account.projects,function(Me,Fe){if(Me.projectId===be.ProjectID){be.companyName=Me.companyName;return}}),c.Z.confirm({dialogClasses:be.frameid+" createTaskConfirm",title:_l("\u521B\u5EFA\u4EFB\u52A1"),width:570,children:b.createElement("div",{dangerouslySetInnerHTML:{__html:h().template(X())(be)}}),noFooter:!0}),this.eventInit();var Ne=$("#txtTaskName").val();$("#txtTaskName").val("").focus().val(Ne)},eventInit:function(){var me=this,be=me.settings;me.updateUserCard(),me.networkInit(),me.taskFolderInit(),me.updateChargeInit(),me.membersInit(),me.initAttachmentEvent(),be.FolderID&&be.FolderID!=="1"&&v.Motheds.getFolderStage(),$("#taskTabs span").on("click",function(xe){var Ae=$(this),Ne=Ae.attr("data-type");switch(xe.stopPropagation(),Ne){case"member":$("#taskMembersBox").removeClass("Hidden"),Ae.remove();break;case"date":$("#createTaskDate").removeClass("Hidden"),$("#createTask_container").scrollTop(0),Ae.remove();break;case"desc":$("#createTaskDesc").removeClass("Hidden"),Ae.remove();break;default:break}}),me.deadlineInit(),$("#txtTaskName").on("keypress",function(xe){xe.keyCode===13&&$("#"+be.frameid).find("#taskSubmitBtn").click()}),$("#taskSubmitBtn").on({mouseover:function(){if($(this).attr("disabled"))return!1;$(this).toggleClass("ThemeBGColor2 ThemeBGColor3")},mouseout:function(){if($(this).attr("disabled"))return!1;$(this).toggleClass("ThemeBGColor2 ThemeBGColor3")},click:function(){if($(this).attr("disabled"))return!1;$(this).attr("disabled","disabled"),v.Motheds.send()}}),$(document).on("click",function(xe){var Ae=$(xe.target);!Ae.closest("#createTaskNetworkList").length&&!Ae.closest("#createTaskNetwork").length&&$("#createTaskNetworkList").addClass("Hidden"),!Ae.closest("#txtTaskFolder").length&&!$("#txtTaskFolder").is(":focus")&&$(".linkageFolder").addClass("Hidden")})},updateUserCard:function(me){var be=this.settings;$("#"+be.frameid).find("#taskUserBox,.imgMemberBox").each(function(xe,Ae){var Ne=$(Ae),Me=Ne.attr("data-id").replace(/@|\+/gi,"");if(!Ne.data("bind")){var Fe=Ne.attr("id")==="taskUserBox"?1:2,Be=me&&me.accountId===Me?me.avatar:Ne.find(".imgWidth").attr("src"),we={};Fe===2&&(we["data-id"]=Me),k.render(b.createElement(I.Z,{sourceId:Me,disabled:Me==="user-undefined"},b.createElement("span",null,Fe===2&&b.createElement("span",{className:"removeTaskMember circle"},b.createElement("i",{className:"icon-delete Icon"})),b.createElement("img",(0,a.default)({src:Be,className:"imgWidth "+(Fe===2?"createTaskMember circle":"")},we)))),Ae),Ne.data("bind",!0)}})},networkInit:function(){var me=this.settings,be=$("#createTaskNetwork"),xe=$("#createTaskNetworkList");be.on("click",function(){xe.toggleClass("Hidden")}),xe.on("click","li",function(){var Ae=$(this),Ne=Ae.attr("data-id");if(Ne!==me.ProjectID){(0,n.pF)(Ne).then(function(){be.find(".createTaskNetworkName").text(Ae.text()),me.ProjectID=Ne}).catch(function(){be.find(".createTaskNetworkName").html(_l("\u4E2A\u4EBA")),me.ProjectID=""}),me.FolderID="";var Me=$("#taskUserBox");Me.attr("data-id",md.global.Account.accountId).find(".imgWidth").attr("src",md.global.Account.avatar),$(".createTaskAddMemberBox .imgMemberBox").remove(md.global.Account.avatar),$(".createTaskFolderName").html("...").removeClass("Hidden"),$("#txtTaskFolder").val("").addClass("Hidden"),$("#createTaskStage").addClass("Hidden"),$("#folderStage").val("")}xe.addClass("Hidden")})},taskFolderInit:function(){var me=this,be=me.settings,xe=$("#txtTaskFolder");$(".createTaskFolder .createTaskFolderName").on({mouseover:function(){$(this).toggleClass("Hidden"),xe.toggleClass("Hidden")}}),xe.on({mouseout:function(){$(this).hasClass("isFocus")||($(this).toggleClass("Hidden"),$(".createTaskFolder .createTaskFolderName").toggleClass("Hidden"))},focus:function(){$(this).addClass("isFocus"),$.trim($(this).val())&&$(".linkageFolder li").length>0?($(".linkageFolder .nullFolder").removeClass("Hidden"),$(".linkageFolder").removeClass("Hidden")):$(this).keyup()},keydown:function(Ne){if(Ne.keyCode!==38&&Ne.keyCode!==40&&$("#createTaskStage").addClass("Hidden"),Ne.keyCode===13&&($(".linkageFolder li.hover").trigger("click"),Ne.stopPropagation()),Ne.keyCode===38||Ne.keyCode===40){var Me=$(".linkageFolder");if(Me.find("li.item").length<=0)return;if(Me.find("li.item").length===1){Me.find("li").addClass("hover");return}var Fe=Me.find("li.item.hover").index();if(Ne.keyCode===38)Fe===0?Me.find("li:last").addClass("hover").siblings().removeClass("hover"):(Fe--,Me.find("li").eq(Fe).addClass("hover").siblings().removeClass("hover"));else if(Ne.keyCode===40){var Be=Me.find("li.item").length-1;Fe>=Be?Me.find("li:first").addClass("hover").siblings().removeClass("hover"):(Fe++,Me.find("li").eq(Fe).addClass("hover").siblings().removeClass("hover"))}}},keyup:function(Ne){Ne.keyCode===38||Ne.keyCode===40||Ne.keyCode===13||(be.FolderID="",be.pageIndex=1,v.Motheds.searchTaskFolder())},blur:function(){$(this).removeClass("isFocus").mouseout();var Ne=$.trim($(this).val());Ne||($("#folderStage").val(""),$("#createTaskStage").addClass("Hidden")),$(".createTaskFolder .createTaskFolderName").text(Ne||"...")}}),$(".linkageFolder ul").on("scroll",function(){if(be.isMore){var Ae=$(this).height(),Ne=$(this)[0].scrollHeight,Me=$(this)[0].scrollTop;Me+Ae+30>=Ne&&(be.pageIndex++,v.Motheds.searchTaskFolder())}}),$(".linkageFolder").on({mouseover:function(){$(this).addClass("hover")},mouseout:function(){$(this).removeClass("hover")},click:function(){var Ne=$.trim($(this).find(".folderListName").text());be.FolderID=$(this).data("folderid"),$("#txtTaskFolder").val(Ne),$(".createTaskFolder .createTaskFolderName, .createTaskFolder .nullFolder .folderListName").text(Ne),$(".linkageFolder").addClass("Hidden"),be.FolderID?v.Motheds.getFolderStage():$("#folderStage").val("")}},"li.item,.nullFolder")},updateChargeInit:function(){var me=this.settings,be=this;$("#taskUpdateCharge").on({click:function(){var Ae=$(this),Ne=$("#taskUserBox"),Me=Ne.attr("data-id"),Fe=function(we){var Ie=we[0].accountId;if(Me!==Ie){var ge=we[0].avatar,Re=$("#taskUserBox img").attr("src");if(Ne.attr("data-id",Ie).data("bind",!1).off().find("img").attr("src",ge),$(".createTaskAddMemberBox .createTaskMember").each(function(){var ke=$(this);ke.attr("data-id")===Ie&&ke.parents(".imgMemberBox").remove()}),Me!=="user-undefined"){var Pe="";Pe+='<span class="imgMemberBox" data-id="'+Me+'">',Pe+='<span class="removeTaskMember circle"><i class="icon-delete Icon"></i></span>',Pe+='<img class="createTaskMember circle imgWidth" data-id="'+Me+'" src="'+Re+'" />',Pe+="</span>",$(".createTaskAddMember").before(Pe)}be.updateUserCard(we[0])}};(0,Z.ZP)(Ae[0],{sourceId:me.FolderID,projectId:me.ProjectID,showMoreInvite:!1,isTask:!0,filterAccountIds:[Me],offset:{top:16,left:0},zIndex:10001,includeUndefinedAndMySelf:!0,SelectUserSettings:{filterAccountIds:[Me],unique:!0,projectId:v.Motheds.checkIsProject(me.ProjectID)?me.ProjectID:"",callback:function(we){Fe(we)}},selectCb:function(we){Fe(we)}})}})},membersInit:function(){var me=this.settings,be="",xe=[],Ae=me.MemberArray,Ne,Me,Fe=this,Be=function(Ie,ge){if(ge.accountId===Ae[Me].accountId)return Ne=!0,!1};for(Me=0;Me<Ae.length;Me++)Ne=!1,xe.length>0?($.each(xe,Be),Ne||xe.push(Ae[Me])):xe.push(Ae[Me]);if(xe.length)for(Me=0;Me<xe.length;Me++)xe[Me].accountId&&$("#taskUserBox").attr("data-id")!=xe[Me].accountId&&(be+='<span class="imgMemberBox" data-id="'+xe[Me].accountId+'">',be+='<span class="removeTaskMember circle"><i class="icon-delete Icon"></i></span>',be+='<img class="createTaskMember circle imgWidth" data-id="'+xe[Me].accountId+'" src="'+xe[Me].avatar+'" />',be+="</span>");$(".createTaskAddMember").before(be),be&&($("#taskMembersBox").removeClass("Hidden"),$("#taskTabs span[data-type=member]").remove()),$("#taskMembersBox").on("click",".imgMemberBox .removeTaskMember",function(){var we=$(this).parents(".imgMemberBox").attr("data-id");$(this).parents(".imgMemberBox").remove()}),$("#taskMembersBox .createTaskAddMember").on({click:function(){var Ie=$(this),ge=[];$(".createTaskAddMemberBox .createTaskMember").each(function(){ge.push($(this).attr("data-id"))}),ge.push($("#taskUserBox").attr("data-id"));var Re=function(ke){be="";var We,Ve="",it=function(pt,ot){if(ot.split("MD_SpecialAccounts")[0]===Ve.split("MD_SpecialAccounts")[0])return ke[Me].accountId||$(".createTaskAddMemberBox .imgMemberBox[data-id="+ot+"]").attr("data-id",Ve).find(".createTaskMember").attr({"data-id":Ve,src:ke[Me].avatar}),We=!0,!1};for(Me=0;Me<ke.length;Me++)We=!1,Ve=ke[Me].accountId||ke[Me].account+"MD_SpecialAccounts"+ke[Me].fullname,$.each(ge,it),We||(be+='<span class="imgMemberBox" data-id="'+Ve+'">',be+='<span class="removeTaskMember circle "><i class="icon-delete Icon"></i></span>',be+='<img class="createTaskMember circle imgWidth" data-id="'+Ve+'" src="'+ke[Me].avatar+'" />',be+="</span>");$(".createTaskAddMember").before(be),Fe.updateUserCard(ke[0])};(0,Z.ZP)(Ie[0],{sourceId:"",projectId:me.ProjectID,zIndex:2e4,filterAccountIds:ge,offset:{top:27,left:0},SelectUserSettings:{filterAccountIds:ge,projectId:v.Motheds.checkIsProject(me.ProjectID)?me.ProjectID:"",callback:function(ke){Re(ke)}},selectCb:function(ke){Re(ke)}})}})},deadlineInit:function(){var me=$("#txtLastDate");$("#taskGantt").length&&($("#taskTabs span[data-type=date]").click(),me.data("start",i()().format("YYYY-MM-DD 09:00")).data("end",i()().format("YYYY-MM-DD 18:00")),me.html((0,le.Mq)(!1,i()().format("YYYY-MM-DD 09:00"),i()().format("YYYY-MM-DD 18:00"),"","",!0)));var be=function xe(){var Ae=me.data(),Ne=Ae.start,Me=Ae.end;$("#taskGantt").length&&(Ne=Ne||i()().format("YYYY-MM-DD 09:00"),Me=Me||i()().format("YYYY-MM-DD 18:00")),k.render(b.createElement(m.Z,{selectedValue:[Ne,Me],mode:"task",timePicker:!0,separator:_l("\u81F3"),timeMode:"hour",placeholder:_l("\u672A\u6307\u5B9A\u8D77\u6B62\u65F6\u95F4"),onOk:function(Be){var we=(0,r.Z)(Be,2),Ie=we[0],ge=we[1];if(Ie&&ge&&Ie>=ge)return alert(_l("\u7ED3\u675F\u65F6\u95F4\u4E0D\u80FD\u65E9\u4E8E\u6216\u7B49\u4E8E\u5F00\u59CB\u65F6\u95F4"),2),!1;Ie=Ie?Ie.format("YYYY-MM-DD HH:00"):"",ge=ge?ge.format("YYYY-MM-DD HH:00"):"",me.data("start",Ie),me.data("end",ge),$("#txtLastDateText").html(!Ie&&!ge?_l("\u672A\u6307\u5B9A\u8D77\u6B62\u65F6\u95F4"):(0,le.Mq)(!1,Ie,ge,"","",!0))},onClear:function(){delete me.data().start,delete me.data().end,k.unmountComponentAtNode(me[0]),xe()}},b.createElement("div",{id:"txtLastDateText"},_l("\u672A\u6307\u5B9A\u8D77\u6B62\u65F6\u95F4"))),me[0])};be()},initAttachmentEvent:function(){var me=this.settings;me.isComplete=!0,$("#txtDescriptionbox").autoTextarea({minHeight:24,maxHeight:72}),k.render(b.createElement(q.Z,{canAddLink:!0,onUploadComplete:function(xe){me.isComplete=xe},temporaryData:me.createTaskAttachments.attachmentData,kcAttachmentData:me.createTaskAttachments.kcAttachmentData,onTemporaryDataUpdate:function(xe){me.createTaskAttachments.attachmentData=xe},onKcAttachmentDataUpdate:function(xe){me.createTaskAttachments.kcAttachmentData=xe}}),document.getElementById("Attachment_updater_createTask"))}}),v.Motheds={searchTaskFolder:function(){var me=$.trim($("#txtTaskFolder").val());E.Z.getFolderListForCreateTask({projectId:v.settings.ProjectID,keyWords:me,pageSize:20,pageIndex:v.settings.pageIndex}).then(function(be){if(be.status){var xe="";v.settings.isMore=be.data&&be.data.length===20,be.data&&$.each(be.data,function(Ne,Me){xe+='<li class="item overflow_ellipsis ThemeBGColor3" data-folderid="'+Me.folderID+'"><img class="chargeUser circle" src="'+Me.charge.avatar+'"><span class="folderListName">'+(0,n.u1)(Me.folderName)+'</span><span class="ThemeColor8 '+(Me.visibility===0?"icon-folder-private":"icon-folder-public")+'"></span><span class="folderMemberCount">'+(Me.taskNum||"")+"</span></li>"}),v.settings.pageIndex===1?$(".linkageFolder ul").html(xe):$(".linkageFolder ul").append(xe);var Ae=$(".linkageFolder ul li").length;!Ae&&!me?$(".linkageFolder").addClass("Hidden"):($(".linkageFolder").removeClass("Hidden"),$(".linkageFolder .nullFolder").toggleClass("Hidden",!me&&!v.settings.folderId).toggleClass("clearBorder",!Ae).find(".folderListName").html((0,n.u1)(me)))}else return d().reject()}).catch(function(){alert(_l("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"),2)})},getFolderStage:function(){var me=v.settings;E.Z.getFolderStage({projectID:me.ProjectID,folderID:me.FolderID}).then(function(be){if(be.status){var xe=[],Ae=be.data;$.each(Ae,function(){xe.push({text:this.name,value:this.id})}),(Ae.length>1||Ae[0].name!==_l("\u8FDB\u884C\u4E2D"))&&$("#createTaskStage").removeClass("Hidden"),$("#folderStage").val(xe[0].value),k.render(b.createElement(S.Z,{className:"w100",data:xe,defaultValue:$("#folderStage").val(),border:!0,isAppendToBody:!0,onChange:function(Me){$("#folderStage").val(Me)}}),document.getElementById("folderStageBox"))}else return d().reject()}).catch(function(){alert(_l("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"),2)})},send:function(){var me=v.settings,be=$("#taskSubmitBtn");if(!me.isComplete)return alert(_l("\u6587\u4EF6\u4E0A\u4F20\u4E2D\uFF0C\u8BF7\u7A0D\u7B49"),3),be.removeAttr("disabled"),!1;var xe=$.trim($("#txtTaskName").val());if(xe==="")return alert(_l("\u8BF7\u8F93\u5165\u4EFB\u52A1\u540D\u79F0"),3),$("#txtTaskName").focus(),be.removeAttr("disabled"),!1;var Ae=$("#txtLastDate").data("start"),Ne=$("#txtLastDate").data("end"),Me=N()($("#txtDescriptionbox").val().replace(/\n/g,"<br/>")),Fe=me.FolderID===1?"":me.FolderID,Be=$.trim($("#txtTaskFolder").val()),we=$("#taskUserBox").attr("data-id"),Ie=$.trim($("#folderStage").val()),ge=[],Re={};if($(".createTaskAddMemberBox .createTaskMember").each(function(){var Pe=$(this).attr("data-id");Pe.indexOf("MD_SpecialAccounts")>=0?(Pe=Pe.split("MD_SpecialAccounts"),Re[Pe[0]]=Pe[1]):ge.push(Pe)}),me.CalenderID){w.Z.convertCalendarToTask({calendarId:me.CalenderID,recurTime:me.recurTime,projectId:me.ProjectID,folderId:Fe,folderName:Be,stageId:Ie,chargeAccountId:we,specialAccounts:Re,members:ge.join(","),taskName:xe,summary:Me,startTime:Ae,deadline:Ne,attachments:A()(me.createTaskAttachments.attachmentData),knowledgeAtt:A()(me.createTaskAttachments.kcAttachmentData)}).then(function(Pe){Pe.code===1&&(0,ee.Z)({linkURL:md.global.Config.WebUrl+"apps/task/task_"+Pe.data.taskId,content:_l("\u5DF2\u8F6C\u4E3A\u4EFB\u52A1")}),$(".createTaskConfirm").parent().remove()});return}E.Z.addTask({taskName:xe,stageID:Ie,summary:Me,folderName:Be,folderID:Fe==1?"":Fe,chargeAccountID:we,specialAccounts:Re,members:ge.join(","),startTime:Ae,deadline:Ne,postID:me.PostID,worksheetAndRowId:me.worksheetAndRowId,projectId:me.ProjectID,attachments:A()(me.createTaskAttachments.attachmentData),knowledgeAtt:A()(me.createTaskAttachments.kcAttachmentData),itemId:me.itemId}).then(function(Pe){if(Pe.status){if(safeLocalStorageSetItem("lastProjectId",me.ProjectID),Pe.data.taskName=Pe.data.name,Pe.data.star=!1,Pe.data.stageID=Ie,Pe.data.projectId=me.ProjectID,Pe.data.projectID=me.ProjectID,Pe.data.actualStartTime="",Pe.data.completeTime="",Pe.data.isNotice=!1,Ie?Pe.data.stageName=$("#folderStage").next().find(".spanShow .txtBox").text():Pe.data.stageName=_l("\u672A\u5B8C\u6210"),me.relationCallback&&$.isFunction(me.relationCallback))return me.relationCallback(Pe.data),$(".createTaskConfirm").parent().remove(),!1;if(me.itemId&&((0,ee.Z)({linkURL:md.global.Config.WebUrl+"apps/task/task_"+Pe.data.taskID,content:_l("\u5DF2\u8F6C\u4E3A\u4EFB\u52A1")}),me.callback&&$.isFunction(me.callback)&&me.callback()),location.href.indexOf("task")>=0)return re.Z.dispatch((0,ie.gI)(Pe.data)),$(".createTaskConfirm").parent().remove(),!1;me.callback&&$.isFunction(me.callback)?(me.callback(Pe),me.createShare===!0&&(Pe.data.limitedCount&&alert(_l("\u6709%0\u4F4D\u5916\u90E8\u7528\u6237\u9080\u8BF7\u5931\u8D25\uFF0C\u5916\u90E8\u7528\u6237\u77ED\u4FE1\u9080\u8BF7\u7528\u91CF\u8FBE\u5230\u4E0A\u9650",Pe.data.limitedCount)),(0,ee.Z)({linkURL:md.global.Config.WebUrl+"apps/task/task_"+Pe.data.taskID,content:"\u4EFB\u52A1\u521B\u5EFA\u6210\u529F"}))):me.shareCallback&&$.isFunction(me.shareCallback)?me.shareCallback(Pe):me.itemId||(Pe.data.limitedCount&&alert(_l("\u6709%0\u4F4D\u5916\u90E8\u7528\u6237\u9080\u8BF7\u5931\u8D25\uFF0C\u5916\u90E8\u7528\u6237\u77ED\u4FE1\u9080\u8BF7\u7528\u91CF\u8FBE\u5230\u4E0A\u9650",Pe.data.limitedCount)),(0,ee.Z)({linkURL:md.global.Config.WebUrl+"apps/task/task_"+Pe.data.taskID,content:_l("\u4EFB\u52A1\u521B\u5EFA\u6210\u529F")})),$(".createTaskConfirm").parent().remove()}}).catch(function(){be.removeAttr("disabled"),alert(_l("\u64CD\u4F5C\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"),2)})},checkIsProject:function(me){var be=!1;return $.map(md.global.Account.projects,function(xe){me===xe.projectId&&(be=!0)}),be}};function W(J){return new v(J)}(function(J){J.CreateTask||(J.CreateTask=function(me){return new v(me)})})(jQuery);var P=t(96486),u=t.n(P),l=t(89499),T=t(25734),G=t(49365),D=t(61805);function M(){return H.Z.getWorksheetInfo.apply(H.Z,arguments)}function se(J){var me=J.appId,be=J.viewId,xe=J.worksheetId,Ae=J.relationWorksheetId,Ne=J.recordId,Me=J.getType,Fe=Me===void 0?1:Me,Be=J.instanceId,we=J.workId,Ie=J.getRules,ge=J.controls;return new(d())(function(Re,Pe){var ke={worksheetId:xe,rowId:Ne,getType:Fe,appId:me,viewId:be,relationWorksheetId:Ae,checkView:!!be};Be&&we&&(ke.getType=9,ke.instanceId=Be,ke.workId=we),u().get(window,"shareState.isPublicWorkflowRecord")&&u().get(window,"shareState.shareId")&&(ke.shareId=u().get(window,"shareState.shareId"));var We=void 0;Ie?We=d().all([(0,f.r)(ke,ge),H.Z.getControlRules({worksheetId:xe,type:1})]):We=d().all([We=(0,f.r)(ke,ge)]),We.then(function(Ve){var it=(0,r.Z)(Ve,2),Ge=it[0],pt=it[1];Ge.resultCode===1?Re(pt?(0,a.default)({},Ge,{rules:pt}):Ge):Pe(Ge)}).catch(Pe)})}function ae(J){var me=J.appId,be=J.viewId,xe=J.getType,Ae=J.worksheetId,Ne=J.recordId,Me=J.projectId,Fe=J.instanceId,Be=J.workId,we=J.data,Ie=J.updateControlIds,ge=J.isDraft,Re=J.triggerUniqueError,Pe=J.updateSuccess,ke=J.allowEmptySubmit,We=J.setSubListUniqueError,Ve=We===void 0?function(){}:We,it=J.setRuleError,Ge=it===void 0?function(){}:it,pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},ot=function(){try{pt.apply(void 0,arguments)}catch(St){console.error(St)}},vt=we.filter(function(st){return Ie.indexOf(st.controlId)>-1&&st.type!==30}).map(function(st){return(0,C.jz)(st,{isDraft:ge})}),At={appId:me,viewId:be,getType:xe,worksheetId:Ae,rowId:Ne,newOldControl:vt,projectID:Me,pushUniqueId:md.global.Config.pushUniqueId};Fe&&Be&&(At.getType=9,At.instanceId=Fe,At.workId=Be);var yt=u().get(window,"shareState.isPublicForm")&&window.shareState.shareId;if(yt&&(At={rowId:Ne,newOldControl:vt}),!vt.length&&!ke){Fe&&Be||alert(_l("\u6CA1\u6709\u9700\u8981\u4FDD\u5B58\u7684\u5B57\u6BB5"),2),ot("empty");return}(yt?U.Z:H.Z).updateWorksheetRow(At).then(function(st){st&&st.data?(ot(null,st.data,st.requestLogId),typeof Pe=="function"&&Pe([Ne],u().assign.apply(u(),[{}].concat((0,y.Z)(vt.map(function(St){return(0,R.default)({},St.controlId,st.data[St.controlId])})))),st.data)):(st.resultCode===11?Re(st.badData):st.resultCode===22?(Ve(st.badData),(0,l.a)(st.resultCode)):st.resultCode===32?Ge(st.badData):(0,l.a)(st.resultCode),ot(!0))}).catch(function(st){console.error(st),ot(st),alert(_l("\u4FDD\u5B58\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"),2)})}function ne(J){var me=J.appId,be=J.viewId,xe=J.worksheetId,Ae=J.recordId,Ne=J.cell,Me=J.rules,Fe=J.cells,Be=Fe===void 0?[]:Fe;return new(d())(function(we,Ie){u().isEmpty(Be)&&Ne&&(Be=[Ne]),H.Z.updateWorksheetRow({appId:me,viewId:be,worksheetId:xe,rowId:Ae,newOldControl:Be}).then(function(ge){if(ge.data)we(ge.data);else{if(ge.resultCode===32){var Re=(0,T.YW)(Me,ge.badData);u().get(Re,"0.errorInfo.0")&&alert("\u7F16\u8F91\u5931\u8D25\uFF0C"+u().get(Re,"0.errorInfo.0.errorMessage"),2),Ie();return}(0,l.a)(ge.resultCode,Ne),Ie()}})})}function de(J){var me=J.worksheetId,be=J.recordIds,xe=J.recordId,Ae=J.viewId,Ne=J.appId,Me=J.deleteType;return new(d())(function(Fe,Be){H.Z.deleteWorksheetRows({worksheetId:me,rowIds:be||[xe],viewId:Ae,appId:Ne,deleteType:Me===21?Me:void 0}).then(function(we){we.isSuccess?Fe():Be()}).catch(Be)})}var Ce=function(){function J(me){var be=me.appId,xe=me.worksheetId,Ae=me.viewId,Ne=me.recordId;(0,L.default)(this,J),this.baseArgs={appId:be,worksheetId:xe,viewId:Ae,rowId:Ne}}return(0,te.default)(J,[{key:"getWorksheetBtns",value:function(be){var xe=this;return new(d())(function(Ae,Ne){H.Z.getWorksheetBtns(u().assign({},xe.baseArgs,be)).then(function(Me){Ae((0,l.QE)(xe.baseArgs.appId,Me))}).catch(function(Me){Ne(Me)})})}}]),J}();function he(J){var me=J.appId,be=J.viewId,xe=J.recordId,Ae=J.worksheetId,Ne=J.instanceId,Me=J.workId,Fe=J.controlId,Be=J.isAdd,we=J.recordIds,Ie=J.updateType;return new(d())(function(ge,Re){var Pe={worksheetId:Ae,appId:me,viewId:be,rowId:xe,controlId:Fe,isAdd:Be,rowIds:we,updateType:Ie===21?Ie:void 0};Ne&&Me&&(Pe.instanceId=Ne,Pe.workId=Me),H.Z.updateRowRelationRows(Pe).then(function(ke){ke.isSuccess?ge():Re()}).catch(Re)})}function fe(J,me){var be=[],xe=!1;if(J&&J.accountId===md.global.Account.accountId)return!0;try{be=me.filter(function(Ae){return Ae.type===26&&Ae.userPermission===2}).map(function(Ae){return JSON.parse(Ae.value)}).filter(function(Ae){return Ae&&Ae.length})}catch(Ae){}return be.forEach(function(Ae){Ae.forEach(function(Ne){Ne.accountId===md.global.Account.accountId&&(xe=!0)})}),xe}function Ee(J){var me=J.worksheetId,be=J.recordId,xe=J.accountId;return new(d())(function(Ae,Ne){H.Z.updateWorksheetRow({worksheetId:me,rowId:be,getType:3,newOldControl:[{controlId:"ownerid",type:26,value:xe}]}).then(function(Me){if(Me&&Me.data){var Fe=JSON.parse(Me.data.ownerid)[0];Ae({account:Fe,record:Me.data})}else Ne()}).catch(Ne)})}function Y(J){var me=J.recordId,be=J.ownerAccountId,xe=J.appId,Ae=J.projectId,Ne=J.target,Me=J.changeOwner;(0,Z.ZP)(Ne,{sourceId:me,projectId:Ae,showMoreInvite:!1,isTask:!1,tabType:3,appId:xe,includeUndefinedAndMySelf:!0,filterAccountIds:[be],offset:{top:16,left:0},zIndex:10001,SelectUserSettings:{unique:!0,projectId:Ae,filterAccountIds:[be],callback:function(Be){Be[0].accountId===md.global.Account.accountId&&(Be[0].fullname=md.global.Account.fullname),Me(Be,Be[0].accountId)}},selectCb:function(Be){Be[0].accountId===md.global.Account.accountId&&(Be[0].fullname=md.global.Account.fullname),Me(Be,Be[0].accountId)}})}var oe=function(){var J=(0,p.Z)(g().mark(function me(be,xe){var Ae=be.isCharge,Ne=be.appId,Me=be.worksheetId,Fe=be.viewId,Be=be.recordId,we=be.hidePublicShare,Ie,ge,Re,Pe;return g().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return We.prev=0,We.next=3,(0,f.r)({appId:Ne,worksheetId:Me,viewId:Fe,rowId:Be});case 3:Ie=We.sent,ge=(0,C.xI)(Ie.formData),Re=Ae||fe(Ie.ownerAccount,Ie.formData),Pe=Ie.shareRange,(0,O.K)({from:"recordInfo",title:_l("\u5206\u4EAB\u8BB0\u5F55"),isPublic:Pe===2,isCharge:Re,hidePublicShare:we,params:{appId:Ne,worksheetId:Me,viewId:Fe,rowId:Be,title:ge},getCopyContent:function(it,Ge){return Ge+" "+Ie.entityName+"\uFF1A"+ge}}),We.next=14;break;case 10:We.prev=10,We.t0=We.catch(0),alert(_l("\u5206\u4EAB\u5931\u8D25"),2),console.log(We.t0);case 14:case"end":return We.stop()}},me,this,[[0,10]])}));return function(be,xe){return J.apply(this,arguments)}}(),ve=function(){var J=(0,p.Z)(g().mark(function me(be){var xe=be.appId,Ae=be.worksheetId,Ne=be.viewId,Me=be.recordId,Fe,Be,we;return g().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.prev=0,ge.next=3,(0,f.r)({appId:xe,worksheetId:Ae,viewId:Ne,rowId:Me});case 3:Fe=ge.sent,Be=(0,C.xI)(Fe.formData,void 0,void 0,{noMask:!0}),we=xe+"|"+Ae+"|"+Ne+"|"+Me,W({TaskName:Be||_l("\u672A\u547D\u540D"),MemberArray:u().isEmpty(Fe.ownerAccount)?[]:[Fe.ownerAccount].filter(function(Re){return Re.accountId.indexOf("a#")===-1}),worksheetAndRowId:we,isFromPost:!0,ProjectID:Fe.projectId}),ge.next=13;break;case 9:ge.prev=9,ge.t0=ge.catch(0),alert(_l("\u521B\u5EFA\u4EFB\u52A1\u5931\u8D25"),2),console.log(ge.t0);case 13:case"end":return ge.stop()}},me,this,[[0,9]])}));return function(be){return J.apply(this,arguments)}}(),ue=function(){var J=(0,p.Z)(g().mark(function me(be){var xe=be.appId,Ae=be.worksheetId,Ne=be.viewId,Me=be.recordId,Fe,Be;return g().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(md.global.Account.isPortal&&(xe=md.global.Account.appId),xe){Ie.next=6;break}return Ie.next=4,M({worksheetId:Ae});case 4:Fe=Ie.sent,xe=Fe.appId;case 6:if(Be=(0,n.tQ)(),!Ne){Ie.next=11;break}return Ie.abrupt("return",""+location.origin+(window.subPath||"")+"/app/"+xe+"/"+Ae+"/"+Ne+"/row/"+Me+(Be?"?"+Be:""));case 11:return Ie.abrupt("return",""+location.origin+(window.subPath||"")+"/app/"+xe+"/"+Ae+"/row/"+Me+(Be?"?"+Be:""));case 12:case"end":return Ie.stop()}},me,this)}));return function(be){return J.apply(this,arguments)}}(),pe=function(){var J=(0,p.Z)(g().mark(function me(be){var xe=be.appId,Ae=be.worksheetId,Ne=be.viewId,Me=be.recordId,Fe;return g().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.next=2,ue({appId:xe,worksheetId:Ae,viewId:Ne,recordId:Me});case 2:Fe=we.sent,window.open((0,s.A6)(Fe));case 4:case"end":return we.stop()}},me,this)}));return function(be){return J.apply(this,arguments)}}();function Se(J){M({worksheetId:J}).then(function(me){var be=me.name,xe=me.templateId,Ae=me.projectId,Ne=me.appId,Me=me.groupId;(0,V.zF)({sourceName:be,templateId:xe,sourceId:J,projectId:Ae,appconfig:{appId:Ne,appSectionId:Me}})})}var ye=function(){var J=(0,p.Z)(g().mark(function me(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},xe=be.appId,Ae=be.worksheetId,Ne=be.viewId,Me=be.projectId,Fe=be.exportControlsId,Be=be.downLoadUrl,we=be.rowIds,Ie=be.rowId,ge=be.controlId,Re=be.fileName,Pe=be.onDownload,ke,We;return g().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return it.next=2,G.Z.getToken({worksheetId:Ae,viewId:Ne,tokenType:8});case 2:ke=it.sent,We={token:ke,accountId:md.global.Account.accountId,worksheetId:Ae,appId:xe,viewId:Ne,projectId:Me,exportControlsId:Fe,rowIds:we},typeof we<"u"?(0,l.XQ)(Be+"/ExportExcel/Export",{worksheetId:Ae,tokenType:8},We):(0,D.Ow)({worksheetId:Ae,rowId:Ie,controlId:ge,fileName:Re,onDownload:Pe})();case 5:case"end":return it.stop()}},me,this)}));return function(){return J.apply(this,arguments)}}()},1502:(lt,Te,t)=>{"use strict";t.d(Te,{L:()=>U});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(73935),o=t(96486),d=t.n(o),Z=t(82011),H=function(f){(0,y.default)(V,f);function V(){return(0,L.default)(this,V),(0,R.default)(this,(V.__proto__||p()(V)).apply(this,arguments))}return(0,te.default)(V,[{key:"shouldComponentUpdate",value:function(O){return this.props.recordId!==O.recordId}},{key:"render",value:function(){return a.createElement(Z.Z,this.props)}}]),V}(a.Component);function U(f){var V=document.createElement("div");document.body.appendChild(V);function C(){d().isFunction(f.onClose)&&f.onClose(),r.unmountComponentAtNode(V),document.body.removeChild(V)}r.render(a.createElement(Z.Z,(0,ce.default)({visible:!0},f,{hideRecordInfo:C})),V)}},13095:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>k});var ce=t(8177),g=t.n(ce),p=t(70264),L=t(85315),te=t(85105),R=t.n(te),y=t(99663),a=t(22600),r=t(49135),o=t(93196),d=t(67294),Z=t(45697),H=t.n(Z),U=t(93967),f=t.n(U),V=t(29314),C=t(44894),O=t(89499),n=t(26358),s=t(96486),j=t.n(s),A,S,I,c,q;function b(ee,re,ie,le,E){var w={};return Object.keys(le).forEach(function(K){w[K]=le[K]}),w.enumerable=!!w.enumerable,w.configurable=!!w.configurable,("value"in w||w.initializer)&&(w.writable=!0),w=ie.slice().reverse().reduce(function(K,N){return N(ee,re,K)||K},w),E&&w.initializer!==void 0&&(w.value=w.initializer?w.initializer.call(E):void 0,w.initializer=void 0),w.initializer===void 0&&(Object.defineProperty(ee,re,w),w=null),w}var k=(I=(q=c=function(ee){(0,o.default)(re,ee);function re(ie){(0,y.default)(this,re);var le=(0,r.default)(this,(re.__proto__||R()(re)).call(this,ie));return le.state={},le}return(0,a.default)(re,[{key:"componentDidMount",value:function(){this.drag&&this.drag.addEventListener("mousedown",this.handleMouseDown)}},{key:"componentWillUnMount",value:function(){this.drag&&this.drag.removeEventListener("mousedown",this.handleMouseDown)}},{key:"handleMouseDown",value:function(le){var E=this,w=this.props,K=w.control,N=w.columnIndex,F=w.updateSheetColumnWidths;function h(){var X=[].concat((0,L.Z)(document.querySelectorAll(".col-"+N))).slice(1).map(function(Q){return Q.innerText}),B=document.createElement("div");B.style.fontSize="13px",B.style.display="inline-block",B.innerHTML=X.map(function(Q){return"<div>"+Q+"</div>"}),document.body.append(B);var x=B.clientWidth;return document.body.removeChild(B),x+14}if(window.dragclicktimer){if(clearTimeout(window.dragclicktimer),window.dragclicktimer=void 0,!(0,O.s6)(K.type))return;var z=h();z<60&&(z=60),z>600&&(z=600),F({controlId:K.controlId,value:z})}else window.isFirefox?this.resizeColumn(le):window.dragclicktimer=setTimeout(function(){window.dragclicktimer=void 0,E.resizeColumn(le)},200)}},{key:"resizeColumn",value:function(le){var E=le.clientX,w=this.props,K=w.isLast,N=w.columnIndex,F=w.control,h=w.style,z=w.updateSheetColumnWidths,X=h.width,B=$(this.drag).parents(".sheetViewTable")[0];if(B){var x=(B.className.match(/id-([\w-]+)-id/)||[])[1],Q=E-B.getBoundingClientRect().left,i=void 0;F.type===6&&F.advancedSetting&&F.advancedSetting.showtype==="2"&&(i=Q-(X-10)+120),O.uY.emit("TRIGGER_CHANGE_COLUMN_WIDTH_MASK_"+x,{columnIndex:N,columnWidth:X,defaultLeft:Q,maskMinLeft:i,target:B,callback:function(v){z({controlId:F.controlId,value:v}),K&&setTimeout(function(){$(B).find(".scroll-x")[0]&&($(B).find(".scroll-x")[0].scrollLeft=1e5)},30)}})}}},{key:"getSortIcon",value:function(){var le=this.props.isAsc;if(le===!0)return d.createElement("i",{className:"icon icon-score-up sortIcon"});if(le===!1)return d.createElement("i",{className:"icon icon-score-down sortIcon"})}},{key:"handleChangeSort",value:function(){var le=this.props,E=le.isAsc,w=le.changeSort,K=void 0;j().isUndefined(E)?K=!0:E===!0&&(K=!1),w(K)}},{key:"render",value:function(){var le=this,E=this.props,w=E.disabled,K=E.disableSort,N=E.canDrag,F=N===void 0?!0:N,h=E.className,z=E.style,X=E.showDropdown,B=E.isAsc,x=E.showRequired,Q=E.renderPopup,i=E.getPopupContainer,m=this.state.listVisible,v=(0,n.BM)(this.props.control),W=v.sourceControlType||v.type,P=!K&&!w&&(0,O.ir)(W),u=j().get(v,"advancedSetting.datamask")==="1",l=0;x&&(l+=8),x&&v.required&&(l+=7),P&&typeof B<"u"&&(l+=13),v.desc&&(l+=21);var T=d.createElement("div",{className:f()("baseColumnHead columnHead",h),style:z},d.createElement("div",{className:"inner"},d.createElement("div",{className:f()("controlName",{"ThemeHoverColor3 Hand":P}),style:{width:z.width-10,height:z.height},onClick:P?this.handleChangeSort:function(){}},x&&v.required&&d.createElement("span",{className:"requiredStatus"},"*"),d.createElement("span",{className:"textCon",style:{maxWidth:"calc(100% - "+l+"px)"}},d.createElement("span",{className:"text ellipsis",title:v.controlName},v.controlName)),P&&typeof B<"u"&&d.createElement("span",{className:"sortIcon"},this.getSortIcon()),v.desc&&d.createElement(p.Z,{popupPlacement:"bottom",text:d.createElement("span",null,v.desc)},d.createElement("i",{className:"icon-info descIcon"}))),u&&d.createElement("i",{className:"icon icon-eye_off maskData Font16"}),X&&!w&&d.createElement("span",{className:"dropIcon"},d.createElement("i",{className:"icon icon-arrow-down-border ThemeHoverColor3 Hand",onClick:function(){return le.setState({listVisible:!0})}}))),!w&&F&&d.createElement("span",{ref:function(D){return le.drag=D},className:"resizeDrag Hand"}));return X&&!w?d.createElement(V.Z,{action:["click"],popup:Q?Q({closeMenu:function(){le.setState({listVisible:!1})}}):"hello world",getPopupContainer:i||function(){return document.body},popupClassName:"filterTrigger",popupVisible:m,popupAlign:{points:["tr","br"],overflow:{adjustX:!0,adjustY:!0}}},T):T}}]),re}(d.Component),c.propTypes={disabled:H().bool,canDrag:H().bool,className:H().string,style:H().shape({}),columnIndex:H().number,isAsc:H().bool,control:H().shape({}),showRequired:H().bool,showDropdown:H().bool,renderPopup:H().func,changeSort:H().func,updateSheetColumnWidths:H().func},c.defaultProps={changeSort:function(){},updateSheetColumnWidths:function(){}},q),b(I.prototype,"handleMouseDown",[C.Nj],g()(I.prototype,"handleMouseDown"),I.prototype),b(I.prototype,"handleChangeSort",[C.Nj],g()(I.prototype,"handleChangeSort"),I.prototype),I)},89557:(lt,Te,t)=>{"use strict";if(t.d(Te,{Z:()=>g}),!/^(1887|7596|7798)$/.test(t.j))var ce=t(13095);const g=/^(1887|7596|7798)$/.test(t.j)?null:ce.Z},42541:(lt,Te,t)=>{"use strict";t.d(Te,{EK:()=>i,Hr:()=>b,Lb:()=>m,U1:()=>W,XX:()=>le,al:()=>h,e2:()=>B,go:()=>w,gx:()=>X,lP:()=>N,p7:()=>S,wI:()=>K,xC:()=>P,xw:()=>z});var ce=t(86735),g=t(67294),p=t(71893),L=(0,ce.Z)([`
  color: #333;
  font-weight: bold;
  vertical-align: middle;
  margin: 16px 0;
`],[`
  color: #333;
  font-weight: bold;
  vertical-align: middle;
  margin: 16px 0;
`]),te=(0,ce.Z)([`
  font-size: 17px;
`],[`
  font-size: 17px;
`]),R=(0,ce.Z)([`
  font-size: 15px;
`],[`
  font-size: 15px;
`]),y=(0,ce.Z)([`
  font-size: 13px;
  margin: 20px 0 10px;
`],[`
  font-size: 13px;
  margin: 20px 0 10px;
`]),a=(0,ce.Z)([`
  font-weight: 600;
`],[`
  font-weight: 600;
`]),r=(0,ce.Z)([`
  color: #757575;
  font-size: 13px;
`],[`
  color: #757575;
  font-size: 13px;
`]),o=(0,ce.Z)([`
  color: #9e9e9e;
  font-size: 13px;
`],[`
  color: #9e9e9e;
  font-size: 13px;
`]),d=(0,ce.Z)([`
  color: #999999;
  font-size: 13px;
`],[`
  color: #999999;
  font-size: 13px;
`]),Z=(0,ce.Z)([`
  color: #bdbdbd;
  font-size: 13px;
`],[`
  color: #bdbdbd;
  font-size: 13px;
`]),H=(0,ce.Z)([`
  border-radius: 3px;
  height: 36px;
  line-height: 36px;
  background-color: #f1f1f1;
  color: #333;
  font-size: 14px;
  padding: 0 10px;
`],[`
  border-radius: 3px;
  height: 36px;
  line-height: 36px;
  background-color: #f1f1f1;
  color: #333;
  font-size: 14px;
  padding: 0 10px;
`]),U=(0,ce.Z)([`
  `,`
  input {
    border: none;
    background: inherit;
    font-size: inherit;
    width: 100%;
    margin-left: -1px;
  }
`],[`
  `,`
  input {
    border: none;
    background: inherit;
    font-size: inherit;
    width: 100%;
    margin-left: -1px;
  }
`]),f=(0,ce.Z)([`
  `,`
`],[`
  `,`
`]),V=(0,ce.Z)([`
  display: inline-block;
  cursor: pointer;
  font-size: 13px;
  margin-left: 16px;
  border-radius: 17px;
  padding: 0 12px;
  height: 32px;
  line-height: 32px;
  color: #fff;
  background-color: rgba(0, 0, 0, 0.2);
  .icon {
    position: relative;
    top: 2px;
    font-size: 18px;
    margin-right: 6px;
  }
  :hover {
    background-color: rgba(0, 0, 0, 0.25);
  }
`],[`
  display: inline-block;
  cursor: pointer;
  font-size: 13px;
  margin-left: 16px;
  border-radius: 17px;
  padding: 0 12px;
  height: 32px;
  line-height: 32px;
  color: #fff;
  background-color: rgba(0, 0, 0, 0.2);
  .icon {
    position: relative;
    top: 2px;
    font-size: 18px;
    margin-right: 6px;
  }
  :hover {
    background-color: rgba(0, 0, 0, 0.25);
  }
`]),C=(0,ce.Z)([`
  display: flex;
  align-items: center;
`],[`
  display: flex;
  align-items: center;
`]),O=(0,ce.Z)([`
  display: flex;
  align-items: center;
  justify-content: center;
`],[`
  display: flex;
  align-items: center;
  justify-content: center;
`]),n=(0,ce.Z)([`
  flex: 1;
`],[`
  flex: 1;
`]),s=(0,ce.Z)([`
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(360deg);
  }
`],[`
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(360deg);
  }
`]),j=(0,ce.Z)([`
  cursor: pointer;
  width: 22px;
  height: 22px;
  font-size: 14px;
  border-radius: 22px;
  background: #fff;
  color: #757575;
  box-shadow: 0px 1px 2px 1px rgba(0, 0, 0, 0.16);
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid #f5f5f5;
  &:hover {
    color: #333;
    box-shadow: 0px 2px 8px 1px rgba(0, 0, 0, 0.16);
  }
  &.red:hover {
    color: #f44336;
  }
`],[`
  cursor: pointer;
  width: 22px;
  height: 22px;
  font-size: 14px;
  border-radius: 22px;
  background: #fff;
  color: #757575;
  box-shadow: 0px 1px 2px 1px rgba(0, 0, 0, 0.16);
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid #f5f5f5;
  &:hover {
    color: #333;
    box-shadow: 0px 2px 8px 1px rgba(0, 0, 0, 0.16);
  }
  &.red:hover {
    color: #f44336;
  }
`]),A=`
  border: 1px solid #ddd;
  border-radius: 3px;
  background: #fff;
  resize: none;
  width: 100%;
  padding: 10px;
  font-size: 13px;
  &::placeholder {
    color: #bdbdbd;
  }
`,S=`
  box-shadow: 0px 4px 18px rgba(0, 0, 0, 0.16);
`,I=function(l){return l?l+"px":""},c=p.ZP.div(function(u){var l=u.width,T=l===void 0?20:l;return`
  display: inline-block;
  width: `+T+`px;
  height: `+T+`px;
  border-radius: `+T/2+`px;
`}),q=p.ZP.div(function(u){var l=u.fontSize,T=l===void 0?13:l,G=u.height,D=G===void 0?36:G,M=u.borderRadius,se=M===void 0?3:M,ae=u.padding,ne=ae===void 0?"0 16px":ae,de=u.bg,Ce=de===void 0?"#F8F8F8":de,he=u.color,fe=he===void 0?"#757575":he,Ee=u.hoverBg,Y=u.hoverColor;return`
  cursor: pointer;
  font-size: `+T+`px;
  height: `+D+`px;
  line-height: `+D+`px;
  border-radius: `+se+`px;
  padding: `+ne+`;
  background-color: `+Ce+`;
  color: `+fe+`;
  &:hover {
    background-color: `+(Ee||Ce)+`;
    color: `+(Y||fe)+`;
  }
`}),b=p.ZP.div(function(u){var l=u.color,T=l===void 0?"#E8E8E8":l;return"border: none; border-top: 1px solid "+T+"; margin: 20px 0;"}),k=p.ZP.div(L),ee=(0,p.ZP)(k)(te),re=(0,p.ZP)(k)(R),ie=(0,p.ZP)(k)(y),le=p.ZP.div(a),E=p.ZP.div(r),w=p.ZP.div(o),K=p.ZP.div(d),N=p.ZP.div(Z),F=p.ZP.div(function(u){var l=u.color,T=l===void 0?"#9e9e9e":l,G=u.bgcolor,D=G===void 0?"#f5f5f5":G;return`
  color: `+T+`;
  font-size: 13px;
  background-color: `+D+`;
  padding: 12px;
`}),h=p.ZP.div(H),z=(0,p.ZP)(h)(U,A),X=p.ZP.textarea(f,A),B=p.ZP.div(function(u){var l=u.top,T=u.bottom,G=u.left,D=u.right,M=u.children;return`
  position: absolute;
  top: `+I(l)+`;
  bottom: `+I(T)+`;
  left: `+I(G)+`;
  right: `+I(D)+`;
`}),x=p.ZP.div(function(u){var l=u.top,T=u.bottom,G=u.left,D=u.right,M=u.children;return`
  position: fixed;
  top: `+I(l)+`;
  bottom: `+I(T)+`;
  left: `+I(G)+`;
  right: `+I(D)+`;
`}),Q=p.ZP.span(V),i=p.ZP.div(C),m=p.ZP.div(O),v=p.ZP.div(n),W=(0,p.F4)(s),P=p.ZP.span(j)},18909:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>re});var ce=t(8177),g=t.n(ce),p=t(70264),L=t(60967),te=t(47426),R=t(66215),y=t(85105),a=t.n(y),r=t(99663),o=t(22600),d=t(49135),Z=t(93196),H=t(67294),U=t(45697),f=t.n(U),V=t(93967),C=t.n(V),O=t(44894),n=t(67385),s=t(62232),j=t(15577),A=t(96486),S=t.n(A),I,c,q,b,k;function ee(ie,le,E,w,K){var N={};return Object.keys(w).forEach(function(F){N[F]=w[F]}),N.enumerable=!!N.enumerable,N.configurable=!!N.configurable,("value"in N||N.initializer)&&(N.writable=!0),N=E.slice().reverse().reduce(function(F,h){return h(ie,le,F)||F},N),K&&N.initializer!==void 0&&(N.value=N.initializer?N.initializer.call(K):void 0,N.initializer=void 0),N.initializer===void 0&&(Object.defineProperty(ie,le,N),N=null),N}var re=(q=(k=b=function(ie){(0,Z.default)(le,ie);function le(E){(0,r.default)(this,le);var w=(0,d.default)(this,(le.__proto__||a()(le)).call(this,E));return w.state={value:E.cell.value==="1"||E.cell.value===1},w}return(0,o.default)(le,[{key:"componentWillReceiveProps",value:function(w){w.cell.value!==this.props.cell.value&&this.setState({value:w.cell.value==="1"})}},{key:"handleTableKeyDown",value:function(w){switch(w.key){case"Enter":this.handleChange(!!this.state.value);break;default:break}}},{key:"handleChange",value:function(w){var K=this.props,N=K.cell,F=K.updateCell;if(N.required&&w){alert(_l("%0\u4E3A\u5FC5\u586B\u5B57\u6BB5",N.controlName),3);return}this.setState({value:!w},function(){F({value:w?"0":"1"})})}},{key:"renderContent",value:function(){var w=this,K=this.state.value,N=this.props,F=N.row,h=F===void 0?{}:F,z=N.cell,X=z.advancedSetting,B=X===void 0?{}:X,x=z.hint,Q=x===void 0?"":x,i=K?"1":"0",m=B.showtype,v=(0,s.jT)(this.props.cell),W=this.props.editable&&!(h.rowid||"").startsWith("empty");if(m==="1"){var P=K?S().get(v[0],"value"):S().get(v[1],"value");return H.createElement(H.Fragment,null,H.createElement(R.Z,{disabled:!W,checked:K,className:C()("InlineBlock",{mobileFormSwitchDisabled:!W}),onClick:this.handleChange}),P&&H.createElement("span",{className:"mLeft6"},P))}return m==="2"?H.createElement(te.ZP,{size:"middle",disabled:!W,className:"InlineBlock",checkedValue:i,data:v.map(function(u){return{text:u.value,value:u.key}}),onChange:function(l){return w.handleChange(l!=="1")}}):H.createElement(p.Z,{text:H.createElement("span",null,Q),popupPlacement:"bottom",disable:!Q},H.createElement("div",{className:"flexCenter"},H.createElement(L.Z,{className:"InlineBlock",disabled:!W,checked:K,onClick:this.handleChange})))}},{key:"render",value:function(){var w=this.props,K=w.className,N=w.recordId,F=w.style,h=w.from,z=w.mode,X=w.cell.advancedSetting,B=X===void 0?{}:X,x=w.onClick,Q=(0,j.Q9)(),i=z==="portal";if(h===n.B.CARD&&B.showtype==="2"||(Q||i)&&S().includes(["1","2"],B.showtype)){var m=this.state.value?"1":"0",v=(0,s.jT)(this.props.cell,{needDefault:!0}),W=S().get(S().find(v,function(P){return P.key===m}),"value")||"";return(Q?H.createElement("span",{className:"overflow_ellipsis InlineBlock w100"},W):W)||H.createElement("div",{className:"emptyTag"})}return H.createElement("div",{className:C()("cellSwitch cellControl",K),style:F,onClick:x},H.createElement("div",{className:"InlineBlock",onClick:function(u){u.stopPropagation(),u.preventDefault()}},N!=="empty"&&this.renderContent()))}}]),le}(H.Component),b.propTypes={from:f().number,className:f().string,style:f().shape({}),updateCell:f().func,cell:f().shape({value:f().string}),onClick:f().func},k),ee(q.prototype,"handleTableKeyDown",[O.Nj],g()(q.prototype,"handleTableKeyDown"),q.prototype),ee(q.prototype,"handleChange",[O.Nj],g()(q.prototype,"handleChange"),q.prototype),q)},67385:(lt,Te,t)=>{"use strict";t.d(Te,{B:()=>ce,Z:()=>g});var ce={COMMON:1,LAND:2,RELATE_WORKSHEET:3,CARD:4,DRAFT:21},g={1:_l("\u4EFB\u52A1"),2:_l("\u9879\u76EE"),3:_l("\u65E5\u7A0B"),4:_l("\u6587\u4EF6"),5:_l("\u7533\u8BF7\u5355"),6:"",7:_l("\u65E5\u7A0B")}},98153:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>hi});var ce=t(8177),g=t.n(ce),p=t(94942),L=t.n(p),te=t(36803),R=t(63239),y=t.n(R),a=t(52945),r=t.n(a),o=t(85315),d=t(88106),Z=t(85105),H=t.n(Z),U=t(99663),f=t(22600),V=t(49135),C=t(93196),O=t(88239),n=t(67294),s=t(73935),j=t(45697),A=t.n(j),S=t(44894),I=t(15742),c=t(24607),q=t(6917),b=t(36612),k=t(89499),ee=t(15577),re=t(37888),ie=t(62745),le=t(42723),E=t(86735),w=t(93967),K=t.n(w),N=t(29314),F=t(71893),h=t(15405),z=t(33126),X=t(12424),B=(0,E.Z)([`
  position: absolute;
  z-index: 1051;
  `,`
  left: 0;
  white-space: nowrap;
  padding: 0 8px;
  height: 26px;
  line-height: 26px;
  font-size: 12px;
  color: #fff;
  background-color: #f44336;
  .delIcon {
    cursor: pointer;
    color: rgba(0, 0, 0, 0.24);
    margin-left: 8px;
    &:hover {
      color: rgba(0, 0, 0, 0.5);
    }
  }
`],[`
  position: absolute;
  z-index: 1051;
  `,`
  left: 0;
  white-space: nowrap;
  padding: 0 8px;
  height: 26px;
  line-height: 26px;
  font-size: 12px;
  color: #fff;
  background-color: #f44336;
  .delIcon {
    cursor: pointer;
    color: rgba(0, 0, 0, 0.24);
    margin-left: 8px;
    &:hover {
      color: rgba(0, 0, 0, 0.5);
    }
  }
`]),x=(0,E.Z)([`
  position: absolute;
  `,`
  left: 0;
  border: 3px solid transparent;
  border-left-color: #f44336;
  `,`
`],[`
  position: absolute;
  `,`
  left: 0;
  border: 3px solid transparent;
  border-left-color: #f44336;
  `,`
`]),Q=F.ZP.div(B,function(Wt){var Jt=Wt.pos;return(Jt==="top"?"top":"bottom")+": -26px;"}),i=F.ZP.div(x,function(Wt){var Jt=Wt.pos;return(Jt==="top"?"bottom":"top")+": -6px;"},function(Wt){var Jt=Wt.pos;return Jt==="top"?"border-top-color: #f44336;":"border-bottom-color: #f44336;"});function m(Wt){var Jt=Wt.pos,Vt=Jt===void 0?"top":Jt,Oe=Wt.error,at=(0,n.useState)(!1),Ye=(0,X.Z)(at,2),Ft=Ye[0],_t=Ye[1];return(0,n.useEffect)(function(){_t(!!Oe)},[Oe]),Ft?n.createElement(Q,{pos:Vt},n.createElement(i,{pos:Vt}),Oe,n.createElement("i",{className:"icon-close mLeft8 delIcon",onClick:function(){return _t(!1)}})):null}m.propTypes={pos:(0,j.oneOf)("top","bottom"),error:j.string,updateErrorState:j.func};var v=(0,E.Z)([`
  display: none;
  border: 2px solid #2d7ff9;
  position: absolute;
  left: 0px;
  right: 0px;
  top: 100%;
  border-top: none;
  margin-top: -2px;
  background: #fff;
  padding: 0 6px;
  color: #9d9d9d;
`],[`
  display: none;
  border: 2px solid #2d7ff9;
  position: absolute;
  left: 0px;
  right: 0px;
  top: 100%;
  border-top: none;
  margin-top: -2px;
  background: #fff;
  padding: 0 6px;
  color: #9d9d9d;
`]),W=F.ZP.div(v);function P(Wt){var Jt=Wt.className,Vt=Wt.style,Oe=Wt.error,at=Wt.iconName,Ye=Wt.iconClassName,Ft=Wt.editable,_t=Wt.isediting,un=Wt.popupContainer,En=Wt.onIconClick,hn=Wt.children,xn=Wt.conRef,In=Wt.iconRef,Vn=Wt.hideOutline,yn=Wt.onClick,Kn=Wt.onClear;return n.createElement(N.Z,{zIndex:99,popup:n.createElement("div",{className:"cellControlErrorTip"},Oe),getPopupContainer:function(){return un},popupClassName:"filterTrigger",popupVisible:!!Oe,destroyPopupOnHide:!0,popupAlign:{points:["tl","bl"]}},n.createElement("div",{className:K()("editableCellCon",Jt,{cellControlEdittingStatus:!Vn&&_t,cellControlErrorStatus:!Vn&&Oe,isediting:_t}),ref:xn,style:Vt,onClick:yn},hn,!_t&&n.createElement("span",{className:K()("editIcon Gray_9e ThemeHoverColor3",{canClear:!!Kn}),onClick:function(Zn){Zn.stopPropagation(),Kn?Kn():En(Zn)}},n.createElement("i",{ref:In,className:"editbtn icon icon-"+at+" Font16 Hand "+Ye}),n.createElement("i",{ref:In,className:"clearbtn icon icon-cancel Font16 Hand "+Ye,onClick:function(Zn){Zn.stopPropagation(),Kn()}}))))}const u=function(Wt){var Jt=Wt.clickAwayWrap?(0,h.Z)(P):P;return n.createElement(Jt,Wt)};P.propTypes={className:A().string,iconClassName:A().string,style:A().shape({}),iconName:A().string,isediting:A().bool,onIconClick:A().func,onClick:A().func,onClear:A().func,children:A().node};var l=t(83298),T=t(67385),G=t(96486),D=t.n(G),M=t(64530),se,ae,ne,de,Ce,he=(0,E.Z)([`
  box-sizing: border-box
  padding: 0 6px;
  height: 34px;
  textarea {
    box-sizing: border-box;
    background: transparent;
    font-size: 13px;
    width: 100% !important;
    line-height: 34px;
    height: 34px;
    resize: none;
    white-space: pre;
    overflow: hidden;
    border: none;
    outline: none;
    padding: 0;
    margin: 0;
  }
`],[`
  box-sizing: border-box
  padding: 0 6px;
  height: 34px;
  textarea {
    box-sizing: border-box;
    background: transparent;
    font-size: 13px;
    width: 100% !important;
    line-height: 34px;
    height: 34px;
    resize: none;
    white-space: pre;
    overflow: hidden;
    border: none;
    outline: none;
    padding: 0;
    margin: 0;
  }
`]),fe=(0,E.Z)([`
  position: absolute;
  padding: 2px 4px;
  bottom: 2px;
  left: 2px;
  right: 2px;
  font-size: 12px;
  color: #bdbdbd;
  background: #fff;
`],[`
  position: absolute;
  padding: 2px 4px;
  bottom: 2px;
  left: 2px;
  right: 2px;
  font-size: 12px;
  color: #bdbdbd;
  background: #fff;
`]);function Ee(Wt,Jt,Vt,Oe,at){var Ye={};return Object.keys(Oe).forEach(function(Ft){Ye[Ft]=Oe[Ft]}),Ye.enumerable=!!Ye.enumerable,Ye.configurable=!!Ye.configurable,("value"in Ye||Ye.initializer)&&(Ye.writable=!0),Ye=Vt.slice().reverse().reduce(function(Ft,_t){return _t(Wt,Jt,Ft)||Ft},Ye),at&&Ye.initializer!==void 0&&(Ye.value=Ye.initializer?Ye.initializer.call(at):void 0,Ye.initializer=void 0),Ye.initializer===void 0&&(Object.defineProperty(Wt,Jt,Ye),Ye=null),Ye}var Y=(0,z.Z)(h.Z),oe=F.ZP.div(he),ve=F.ZP.div(fe),ue=n.forwardRef(function(Wt,Jt){var Vt=Wt.className,Oe=Wt.onChange,at=(0,le.Z)(Wt,["className","onChange"]);return n.createElement(oe,{className:Vt},n.createElement("textarea",(0,O.default)({},at,{className:"stopPropagation",ref:Jt,onChange:function(Ft){return Oe(Ft.target.value.replace(/\r\n|\n/g,""))}})))});ue.propTypes={className:A().string,onChange:A().func};function pe(Wt,Jt){return D().get(Jt,"length")&&D().get(Jt,"length")<=5&&Wt().closest(".customFieldsContainer")?function(){return D().get(Jt,"length")&&D().get(Jt,"length")<=5&&Wt().closest(".customFieldsContainer")}:Wt}var Se=(ne=(Ce=de=function(Wt){(0,C.default)(Jt,Wt);function Jt(Vt){(0,U.default)(this,Jt);var Oe=(0,V.default)(this,(Jt.__proto__||H()(Jt)).call(this,Vt));return Oe.tempKey=[],Oe.con=n.createRef(),Oe.input=n.createRef(),Oe.state={value:Vt.cell.value,oldValue:Vt.cell.value,forceShowFullValue:D().get(Vt.cell,"advancedSetting.datamask")!=="1"},Oe}return(0,f.default)(Jt,[{key:"componentWillReceiveProps",value:function(Oe){Oe.cell.value!==this.props.cell.value&&this.setState({value:Oe.cell.value}),Oe.isediting!==this.props.isediting&&Oe.isediting&&D().get(Oe,"cell.advancedSetting.dotformat")==="1"&&this.setState({value:(0,ee.FY)(Oe.cell.value)}),(0,G.isEqual)((0,G.get)(Oe,"row.rowid"),(0,G.get)(this.props,"row.rowid"))||this.setState({oldValue:void 0})}},{key:"componentDidUpdate",value:function(Oe){var at=this.state,Ye=at.value,Ft=at.oldValue;!Oe.isediting&&this.props.isediting&&(this.isNumberPercent&&Ye?this.setState({value:(0,ee.pc)(Ye,100),oldValue:Ft&&(0,ee.pc)(Ft,100)},this.focus):this.focus())}},{key:"componentWillUnmount",value:function(){var Oe=this.props,at=Oe.isSubList,Ye=Oe.isediting;at&&Ye&&!this.hadBlur&&this.handleBlur()}},{key:"focus",value:function(Oe){var at=this;setTimeout(function(){if(at.input&&at.input.current){var Ye=(at.input.current.value||"").length;at.input.current.focus(),at.input.current.setSelectionRange(Ye,Ye)}},Oe||100)}},{key:"handleEdit",value:function(Oe){var at=this.props,Ye=at.updateEditingStatus,Ft=at.cell;Oe.stopPropagation(),Ye(!0,this.focus)}},{key:"handleBlur",value:function(Oe){this.hadBlur=!0;var at=this.props,Ye=at.cell,Ft=at.error,_t=at.updateCell,un=at.updateEditingStatus;this.tempKey=[];var En=this.state.oldValue,hn=En===void 0?"":En,xn=this.state.value,In=xn===void 0?"":xn;if(this.isNumberPercent&&In&&(In=(0,ee.pc)(parseFloat(In),1/100),hn=(0,ee.pc)(parseFloat(hn),1/100)),(Ye.type===6||Ye.type===8)&&In==="-"&&(In="",this.setState({value:In})),hn===In){this.isNumberPercent&&In&&this.setState({oldValue:hn,value:In}),un(!1);return}else(Ye.enumDefault===0||Ye.enumDefault===2)&&typeof In=="string"&&(In=In.replace(/\r\n|\n/g," ").trim());if(Ft){un(!1),this.setState({value:this.state.oldValue});return}_t({value:In}),this.setState({oldValue:In,value:In}),un(!1)}},{key:"handleChange",value:function(Oe){var at=this.props,Ye=at.cell,Ft=at.onValidate;(Ye.type===6||Ye.type===8)&&(Oe=(0,ee.pu)(String(Oe),!1)),Ft(Oe),this.setState({value:Oe})}},{key:"handleTableKeyDown",value:function(Oe){var at=this,Ye=this.props,Ft=Ye.cell,_t=Ye.updateEditingStatus,un=function(xn){_t(!0,function(){setTimeout(function(){var In=at.input.current;In&&(In.value=xn,at.handleChange(xn))},10)})};function En(){if(window.tempCopyForSheetView){var hn=safeParse(window.tempCopyForSheetView);hn.type==="text"?un(hn.value):un(hn.textValue)}}if(Oe.key==="v"&&(Oe.ctrlKey||Oe.metaKey)){D().isFunction(navigator.clipboard.readText)?navigator.clipboard.readText().then(un).catch(function(hn){window.tempCopyForSheetView?En():alert(_l("\u8BF7\u5F00\u542F\u6D4F\u89C8\u5668\u9488\u5BF9\u6B64\u9875\u9762\u7684\u526A\u8D34\u677F\u8BFB\u53D6\u6743\u9650"),3)}):En();return}switch(Oe.key){default:(function(){var hn=Oe.key;(0,k.bP)(Oe.key)&&at.tempKey.push(Oe.key),!(!Oe.isInputValue&&(!hn||!(0,k.bP)(Oe.key)))&&((Ft.type===6||Ft.type===8)&&(hn=(0,ee.pu)(Oe.key,!1)),_t(!0,function(){setTimeout(function(){if(Oe.keyCode===229){at.handleChange("");return}var xn=at.input.current;xn&&(xn.value=Oe.isInputValue?hn:at.tempKey.join(""),at.handleChange(Oe.isInputValue?hn:at.tempKey.join("")),window.cellLastKey==="Enter"&&(at.handleKeydown({keyCode:13,stopPropagation:function(){},preventDefault:function(){}}),window.cellLastKey=void 0))},10),Oe.stopPropagation(),Oe.preventDefault()}))})();break}}},{key:"handleKeydown",value:function(Oe){var at=this.props,Ye=at.tableId,Ft=at.cell,_t=at.updateEditingStatus;if(Oe.keyCode===27)this.tempKey=[],_t(!1),this.setState({value:this.state.oldValue}),Oe.preventDefault();else if(Oe.keyCode===13){if(this.isMultipleLine&&!(Oe.ctrlKey||Oe.metaKey))return;Oe.preventDefault(),this.handleBlur(),setTimeout(function(){return k.uY.emit("TRIGGER_TABLE_KEYDOWN_"+Ye,{keyCode:40,action:"text_enter_to_next",stopPropagation:function(){},preventDefault:function(){}})},100)}else if(D().includes(["ArrowUp","ArrowDown"],Oe.key)&&D().includes([6,8],Ft.type)){var un=Number(this.state.value);D().isNumber(un)&&!D().isNaN(un)&&this.handleChange(un+(Oe.key==="ArrowUp"?1*this.step:-1*this.step)),Oe.preventDefault()}else Oe.keyCode===9&&this.handleBlur()}},{key:"handleUnMask",value:function(Oe){!this.masked||window.shareState.shareId||(Oe.stopPropagation(),this.state.forceShowFullValue||Oe.preventDefault(),this.setState({forceShowFullValue:!0}))}},{key:"render",value:function(){var Oe=this,at=this.props,Ye=at.className,Ft=at.tableType,_t=at.style,un=at.rowIndex,En=at.from,hn=at.rowHeight,xn=at.needLineLimit,In=at.cell,Vn=at.error,yn=at.popupContainer,Kn=at.editable,Bn=at.onClick,Zn=this.context||{},zn=Zn.rows,aa=this.state,Gn=aa.value,va=aa.forceShowFullValue,ka=(0,ee.Q9)(),Ca=In.advancedSetting.dismanual==="1",Na=In.type===2||In.type===6||In.type===8||In.type===5||In.type===7||In.type===3||In.type===4;Na=!Ca&&Na;var Xa=Na&&this.props.isediting;In.type===7&&(Gn=(Gn||"").toUpperCase());var nr=En===T.B.CARD,lr={ref:this.input,value:Gn,style:{width:_t.width,height:_t.height},onClick:function(Nr){return Nr.stopPropagation()},onKeyDown:this.handleKeydown};In.type===38&&In.enumDefault===3&&In.advancedSetting.hideneg==="1"&&parseInt(Gn,10)<0&&(Gn="");var dr=window.isWxWork&&/applewebkit/.test(navigator.userAgent.toLowerCase()),Ma=(0,l.Z)((0,O.default)({},In,{value:Gn}),{noMask:va});Ma.length>3e3&&(Ma=Ma.slice(0,3e3));var Hr=n.createElement(Y,{onClickAwayExceptions:[this.editIcon&&this.editIcon.current],onClickAway:this.handleBlur,style:{fontSize:0}},In.enumDefault===0||In.enumDefault===2?n.createElement("div",{className:K()("textControlInput cellControlEdittingStatus",{cellControlErrorStatus:Vn}),style:{display:"block",width:_t.width,height:_t.height}},window.isSafari||dr?n.createElement(ue,(0,O.default)({className:"Ming stopPropagation"},lr,{value:String(lr.value||"").replace(/\r\n|\n/g," "),onChange:this.handleChange})):n.createElement("input",(0,O.default)({type:"text",className:"Ming stopPropagation"},lr,{value:String(D().isUndefined(lr.value)?"":lr.value).replace(/\r\n|\n/g," "),onChange:function(Nr){return Oe.handleChange(Nr.target.value)}}))):n.createElement(ie.Z,(0,O.default)({className:K()("Ming textControlTextArea cellControlEdittingStatus stopPropagation",{isMultipleLine:this.isMultipleLine,cellControlErrorStatus:Vn})},lr,{manualRef:function(Nr){return Oe.input={current:Nr}},style:{width:_t.width,minHeight:hn,maxHeight:154,borderRadius:0},onChange:this.handleChange})),Vn&&n.createElement(m,{pos:un===0?"bottom":"top",error:Vn}),this.isMultipleLine&&n.createElement(ve,{className:"ellipsis"},window.isMacOs?_l("\u2318+Enter\u7ED3\u675F\u7F16\u8F91"):_l("Ctrl+Enter\u7ED3\u675F\u7F16\u8F91")));return n.createElement(N.Z,{action:["click"],popup:Hr,getPopupContainer:this.isMultipleLine?pe(yn,zn):yn,popupClassName:"filterTrigger",popupVisible:Xa,destroyPopupOnHide:!window.isSafari,popupAlign:{points:["tl","tl"],overflow:{adjustY:!0}}},n.createElement(u,{hideOutline:!0,onClick:Bn,className:K()(Ye,"workSheetTextCell",{canedit:Kn&&Na,masked:this.masked&&!nr,empty:!Gn,maskHoverTheme:this.masked&&nr&&!va,focusInput:In.type===2&&Kn&&Na}),style:_t,iconName:"hr_edit",isediting:Xa,editable:Kn,onIconClick:this.handleEdit},!Xa&&(!!Gn||Gn==0)&&function(){return(In.type===2||In.type===32)&&(In.advancedSetting||{}).analysislink==="1"?n.createElement("span",{className:hn>34&&(In.type===32||In.type===2&&In.enumDefault===1)?K()("worksheetCellPureString nowrap",{linelimit:xn,ellipsis:ka}):K()({"ellipsis w100 InlineBlock":nr}),title:Ma,onClick:Oe.handleUnMask},n.createElement(re.Z,{properties:{target:"_blank",onClick:function(Nr){Nr.stopPropagation()}}},Ma)):In.type===5&&!ka?n.createElement("a",{href:"mailto:"+Gn,title:Ma,onClick:function(Nr){Nr.stopPropagation(),Oe.handleUnMask(Nr)}},Ma):n.createElement("span",{className:K()({linelimit:xn,ellipsis:ka}),title:Ma,onClick:Oe.handleUnMask},Ma)}(),Ft==="classic"&&!Ma&&!Xa&&In.hint&&n.createElement("span",{className:"guideText Gray_bd hide"},In.hint),nr&&this.masked&&!va&&n.createElement("i",{className:"icon icon-eye_off Hand maskData Font16 Gray_bd mLeft4 mTop4 hoverShow",style:{verticalAlign:"text-top"},onClick:this.handleUnMask})))}},{key:"isNumberPercent",get:function(){var Oe=this.props.cell;return D().includes([6,31,37],Oe.type)&&Oe.advancedSetting&&Oe.advancedSetting.numshow==="1"}},{key:"controlCanMask",get:function(){var Oe=this.props.cell;return(Oe.type===2&&Oe.enumDefault===2||D().includes([6,8,3,5,7],Oe.type))&&D().get(Oe,"advancedSetting.datamask")==="1"}},{key:"masked",get:function(){var Oe=this.props,at=Oe.cell,Ye=Oe.isCharge;return this.controlCanMask&&this.state.value&&(Ye||D().get(at,"advancedSetting.isdecrypt")==="1")}},{key:"isMultipleLine",get:function(){var Oe=this.props.cell;return Oe.type===2&&Oe.enumDefault===1}},{key:"step",get:function(){var Oe=(0,G.get)(this.props.cell,"advancedSetting.numinterval")||1,at=Number(Oe);return D().isNumber(at)&&!D().isNaN(at)?at:1}}]),Jt}(n.Component),de.contextType=M.Z,de.propTypes={className:A().string,style:A().shape({}),editable:A().bool,isediting:A().bool,updateCell:A().func,onValidate:A().func,popupContainer:A().any,cell:A().shape({value:A().string}),value:A().string,needLineLimit:A().bool,updateEditingStatus:A().func,onClick:A().func},Ce),Ee(ne.prototype,"focus",[S.Nj],g()(ne.prototype,"focus"),ne.prototype),Ee(ne.prototype,"handleEdit",[S.Nj],g()(ne.prototype,"handleEdit"),ne.prototype),Ee(ne.prototype,"handleBlur",[S.Nj],g()(ne.prototype,"handleBlur"),ne.prototype),Ee(ne.prototype,"handleChange",[S.Nj],g()(ne.prototype,"handleChange"),ne.prototype),Ee(ne.prototype,"handleTableKeyDown",[S.Nj],g()(ne.prototype,"handleTableKeyDown"),ne.prototype),Ee(ne.prototype,"handleKeydown",[S.Nj],g()(ne.prototype,"handleKeydown"),ne.prototype),Ee(ne.prototype,"handleUnMask",[S.Nj],g()(ne.prototype,"handleUnMask"),ne.prototype),ne),ye=t(51156),J=t(3540),me,be,xe,Ae,Ne,Me=(0,E.Z)([`
  border: none !important;
  height: 100% !important;
`],[`
  border: none !important;
  height: 100% !important;
`]);function Fe(Wt,Jt,Vt,Oe,at){var Ye={};return Object.keys(Oe).forEach(function(Ft){Ye[Ft]=Oe[Ft]}),Ye.enumerable=!!Ye.enumerable,Ye.configurable=!!Ye.configurable,("value"in Ye||Ye.initializer)&&(Ye.writable=!0),Ye=Vt.slice().reverse().reduce(function(Ft,_t){return _t(Wt,Jt,Ft)||Ft},Ye),at&&Ye.initializer!==void 0&&(Ye.value=Ye.initializer?Ye.initializer.call(at):void 0,Ye.initializer=void 0),Ye.initializer===void 0&&(Object.defineProperty(Wt,Jt,Ye),Ye=null),Ye}var Be=(0,F.ZP)(J.Z)(Me),we=(xe=(Ne=Ae=function(Wt){(0,C.default)(Jt,Wt);function Jt(Vt){(0,U.default)(this,Jt);var Oe=(0,V.default)(this,(Jt.__proto__||H()(Jt)).call(this,Vt));Oe.con=n.createRef(),Oe.editIcon=n.createRef(),Oe.onFetchData=D().debounce(function(Ye){Oe.setState({keywords:Ye})},500);var at=D().isObject(Vt.cell.value)?Vt.cell.value.text:Vt.cell.value;return Oe.state={value:at,tempValue:at,search:void 0,keywords:""},Oe}return(0,f.default)(Jt,[{key:"componentWillReceiveProps",value:function(Oe){if(Oe.cell.value!==this.props.cell.value){var at=D().isObject(Oe.cell.value)?Oe.cell.value.text:Oe.cell.value;this.setState((0,O.default)({value:at},at==='{"code":"","name":""}'?{tempValue:void 0}:{tempValue:at}))}}},{key:"handleTableKeyDown",value:function(Oe){var at=this,Ye=this.props,Ft=Ye.isediting,_t=Ye.updateEditingStatus;switch(Oe.key){case"Tab":case"Escape":this.handleExit();break;case"Enter":_t(!0),setTimeout(function(){var un=document.querySelector(".CityPicker-input-textCon");un&&un.focus()},100);break;default:(function(){!Oe.isInputValue&&(Ft||!Oe.key||!(0,k.bP)(Oe.key))||(_t(!0),setTimeout(function(){var un=document.querySelector(".worksheetCellPureString .CityPicker-input-textCon");at.setState({search:Oe.key},function(){un&&un.focus(),at.onFetchData(Oe.key)})},100),Oe.stopPropagation(),Oe.preventDefault())})()}}},{key:"handleChange",value:function(Oe,at){var Ye=this.props,Ft=Ye.tableFromModule,_t=Ye.cell,un=Ye.updateCell,En=Ye.updateEditingStatus,hn=this.getAreaLevel(_t.type),xn=D().last(Oe),In=D().get(_t,"advancedSetting.anylevel"),Vn=xn.path.split("/").length;if(this.state.search&&this.setState({search:"",keywords:""}),!(In==="1"&&!xn.last&&hn>Vn)){var yn=y()({code:xn.id,name:xn.path});if(!xn||xn.path.split("/").length<hn&&!xn.last){this.setState({tempValue:yn});return}un({value:Ft===I.i7.SUBLIST?yn:xn.id}),this.setState({value:yn,tempValue:yn}),En(!1)}}},{key:"handleExit",value:function(){var Oe=this.props,at=Oe.tableFromModule,Ye=Oe.updateCell,Ft=Oe.updateEditingStatus,_t=this.state,un=_t.value,En=_t.tempValue;un!==En&&(Ye({value:at===I.i7.SUBLIST?En:safeParse(En).code}),this.setState({value:En})),this.setState({search:"",keywords:""}),Ft(!1)}},{key:"getAreaLevel",value:function(Oe){return Oe===19?1:Oe===23?2:3}},{key:"render",value:function(){var Oe=this,at=this.props,Ye=at.className,Ft=at.style,_t=at.needLineLimit,un=at.cell,En=at.editable,hn=at.isediting,xn=at.tableFromModule,In=at.updateEditingStatus,Vn=at.updateCell,yn=at.onClick,Kn=this.state,Bn=Kn.tempValue,Zn=Kn.value,zn=Kn.search,aa=Kn.keywords,Gn=(0,ee.Q9)(),va=this.getAreaLevel(un.type),ka=D().get(un,"advancedSetting.anylevel");return n.createElement(ye.Z,{search:aa,popupVisible:hn,hasContentContainer:!1,popupClassName:"filterTrigger cellControlAreaPopup cellNeedFocus",defaultValue:[],level:va,manual:!0,mustLast:ka==="1",popupAlign:{points:["bl","tl"],offset:[-1,-2],overflow:{adjustY:!0,adjustX:!0}},callback:this.handleChange,handleClose:function(){var Na=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Xa=D().get(un,"advancedSetting.anylevel"),nr=D().last(Na),lr=safeParse(Bn);if(!nr||Xa==="1"&&(!nr.last||nr.path.split("/").length<va)){In(!1);return}nr.id!==lr.code?Oe.setState({tempValue:y()({code:nr.id,name:nr.path})},function(){Oe.handleExit()}):Oe.handleExit()},destroyPopupOnHide:!window.isSafari,disabled:!hn},n.createElement(u,{conRef:this.con,onClick:yn,className:K()(Ye,"cellControlArea",{canedit:En,focusInput:En}),style:Ft,iconRef:this.editIcon,iconName:"text_map",iconClassName:"dateEditIcon",isediting:hn,onIconClick:function(){return In(!0)}},n.createElement("div",{className:K()("worksheetCellPureString",{linelimit:_t,ellipsis:Gn})},hn?n.createElement(Be,{className:"CityPicker-input-textCon",placeholder:Bn?(0,l.Z)((0,O.default)({},un,{value:Bn})):"",value:hn?zn||"":Bn?(0,l.Z)((0,O.default)({},un,{value:Bn})):"",onChange:function(Na){Oe.setState({search:Na}),Oe.onFetchData(Na)},onClick:function(Na){return Na.stopPropagation()}}):Bn?(0,l.Z)((0,O.default)({},un,{value:Bn})):null,hn&&!un.required&&n.createElement("i",{className:"clearBtn icon icon-cancel",onClick:function(Na){Na.stopPropagation(),Vn({value:""}),Oe.setState({value:"",tempValue:"",search:""})}}))))}}]),Jt}(n.Component),Ae.propTypes={className:A().string,style:A().shape({}),editable:A().bool,isediting:A().bool,updateCell:A().func,popupContainer:A().any,cell:A().shape({value:A().string}),value:A().string,needLineLimit:A().bool,updateEditingStatus:A().func,onClick:A().func},Ne),Fe(xe.prototype,"handleTableKeyDown",[S.Nj],g()(xe.prototype,"handleTableKeyDown"),xe.prototype),Fe(xe.prototype,"handleChange",[S.Nj],g()(xe.prototype,"handleChange"),xe.prototype),Fe(xe.prototype,"handleExit",[S.Nj],g()(xe.prototype,"handleExit"),xe.prototype),xe),Ie=t(15937);function ge(Wt,Jt){var Vt=Wt.className,Oe=Wt.style,at=Wt.cell,Ye=Wt.editable,Ft=Wt.recordId,_t=Wt.updateCell,un=Wt.onClick,En=Wt.updateEditingStatus,hn=at.enumDefault2,xn=at.advancedSetting,In=at.strDefault,Vn=(In||"00")[0]==="1",yn=Wt.isediting&&!Vn,Kn=at.value,Bn=void 0;try{Bn=JSON.parse(Kn)}catch(zn){}var Zn=function(){return Bn.title||Bn.address?[Bn.title,Bn.address].filter(function(aa){return aa}).join(" "):_l("\u7ECF\u5EA6\uFF1A%0",Bn.x)+" "+_l("\u7EAC\u5EA6\uFF1A%0",Bn.y)};return(0,n.useImperativeHandle)(Jt,function(){return{handleTableKeyDown:function(aa){switch(aa.key){case"Escape":En(!1);break;default:if(!(0,k.bP)(aa.key))return;En(!0),aa.stopPropagation();break}}}}),n.createElement(u,{onClick:un,className:K()(Vt,{canedit:Ye&&!Vn}),style:Oe,iconName:"location",iconClassName:"dateEditIcon",isediting:yn,onIconClick:function(){return En(!0)}},n.createElement(n.Fragment,null,Bn&&n.createElement("span",{className:"worksheetCellPureString cellControl linelimit ellipsis",title:Zn()},Zn()),yn&&n.createElement(Ie.Z,{isMobile:(0,ee.Q9)(),distance:hn?parseInt(xn.distance,10):0,defaultAddress:Bn||null,onAddressChange:function(aa){var Gn=aa.lng,va=aa.lat,ka=aa.address,Ca=aa.name;_t({value:y()({x:Gn,y:va,address:ka,title:Ca})}),En(!1)},onClose:function(){En(!1)}})))}ge.propTypes={editable:A().bool,isediting:A().bool,className:A().string,style:A().shape({}),cell:A().shape({}),updateCell:A().func,onClick:A().func,updateEditingStatus:A().func};const Re=(0,n.forwardRef)(ge);var Pe=t(69288),ke=t(63355),We,Ve,it,Ge,pt;function ot(Wt,Jt,Vt,Oe,at){var Ye={};return Object.keys(Oe).forEach(function(Ft){Ye[Ft]=Oe[Ft]}),Ye.enumerable=!!Ye.enumerable,Ye.configurable=!!Ye.configurable,("value"in Ye||Ye.initializer)&&(Ye.writable=!0),Ye=Vt.slice().reverse().reduce(function(Ft,_t){return _t(Wt,Jt,Ft)||Ft},Ye),at&&Ye.initializer!==void 0&&(Ye.value=Ye.initializer?Ye.initializer.call(at):void 0,Ye.initializer=void 0),Ye.initializer===void 0&&(Object.defineProperty(Wt,Jt,Ye),Ye=null),Ye}var vt=(it=(pt=Ge=function(Wt){(0,C.default)(Jt,Wt);function Jt(Vt){(0,U.default)(this,Jt);var Oe=(0,V.default)(this,(Jt.__proto__||H()(Jt)).call(this,Vt));return Oe.state={value:Vt.cell.value},Oe}return(0,f.default)(Jt,[{key:"componentWillReceiveProps",value:function(Oe){Oe.cell.value!==this.props.cell.value&&this.setState({value:Oe.cell.value})}},{key:"handleTableKeyDown",value:function(Oe){var at=this.props.updateEditingStatus;switch(Oe.key){case"Escape":this.handleChange(),at(!1);break;default:break}}},{key:"handleChange",value:function(){var Oe=this.props,at=Oe.cell,Ye=Oe.updateCell;if((at.value||"")!==this.state.value){if(at.required&&!this.state.value){alert(_l("\u4FDD\u5B58\u5931\u8D25\uFF0C%0\u4E3A\u5FC5\u586B\u5B57\u6BB5",at.controlName),2);return}Ye({value:this.state.value})}}},{key:"renderEditDialog",value:function(){var Oe=this,at=this.props,Ye=at.cell,Ft=at.updateEditingStatus;return n.createElement(Pe.Z,{visible:!0,title:Ye.controlName,width:800,footer:null,anim:!1,onCancel:function(){Oe.handleChange(),Ft(!1)}},n.createElement(ke.Z,{autoFocus:!0,data:this.state.value||"",minHeight:document.documentElement.clientHeight-180,onSave:function(un){Oe.setState({value:un})},className:K()("cellControlRichTextDialog")}))}},{key:"render",value:function(){var Oe=this.props,at=Oe.className,Ye=Oe.style,Ft=Oe.needLineLimit,_t=Oe.cell,un=Oe.editable,En=Oe.isediting,hn=Oe.updateEditingStatus,xn=this.state.value;return n.createElement(u,{onClick:this.props.onClick,className:K()(at,{canedit:un}),style:Ye,iconName:"hr_edit",isediting:En,onIconClick:function(){hn(!0)}},En&&this.renderEditDialog(),!!xn&&n.createElement("div",{className:K()("worksheetCellPureString",{linelimit:Ft}),title:(0,k.gE)(xn)},(0,l.Z)((0,O.default)({},_t,{value:xn}))))}}]),Jt}(n.Component),Ge.propTypes={className:A().string,style:A().shape({}),editable:A().bool,isediting:A().bool,updateCell:A().func,cell:A().shape({value:A().string}),value:A().string,needLineLimit:A().bool,updateEditingStatus:A().func,onClick:A().func},pt),ot(it.prototype,"handleTableKeyDown",[S.Nj],g()(it.prototype,"handleTableKeyDown"),it.prototype),ot(it.prototype,"handleChange",[S.Nj],g()(it.prototype,"handleChange"),it.prototype),it),At=t(43514),yt,st,St,Qe,Xe;function $e(Wt,Jt,Vt,Oe,at){var Ye={};return Object.keys(Oe).forEach(function(Ft){Ye[Ft]=Oe[Ft]}),Ye.enumerable=!!Ye.enumerable,Ye.configurable=!!Ye.configurable,("value"in Ye||Ye.initializer)&&(Ye.writable=!0),Ye=Vt.slice().reverse().reduce(function(Ft,_t){return _t(Wt,Jt,Ft)||Ft},Ye),at&&Ye.initializer!==void 0&&(Ye.value=Ye.initializer?Ye.initializer.call(at):void 0,Ye.initializer=void 0),Ye.initializer===void 0&&(Object.defineProperty(Wt,Jt,Ye),Ye=null),Ye}var Ke=(0,z.Z)(h.Z),Ue=(St=(Xe=Qe=function(Wt){(0,C.default)(Jt,Wt);function Jt(Vt){(0,U.default)(this,Jt);var Oe=(0,V.default)(this,(Jt.__proto__||H()(Jt)).call(this,Vt));return Oe.editIcon=n.createRef(),Oe.state={value:Vt.cell.value},Oe}return(0,f.default)(Jt,[{key:"componentWillReceiveProps",value:function(Oe){Oe.cell.value!==this.props.cell.value&&this.setState({value:Oe.cell.value})}},{key:"handleTableKeyDown",value:function(Oe){var at=this.props.updateEditingStatus;switch(Oe.key){case"Escape":at(!1);break;default:break}}},{key:"handleChange",value:function(Oe){var at=this.props,Ye=at.tableFromModule,Ft=at.updateCell,_t=at.updateEditingStatus,un=at.onValidate,En=!un(Oe);if(En){Ye===I.i7.SUBLIST&&this.setState({value:Oe});return}Ft({value:Oe}),this.setState({value:Oe}),_t(!1)}},{key:"handleClear",value:function(){this.handleChange("")}},{key:"render",value:function(){var Oe=this.props,at=Oe.className,Ye=Oe.rowFormData,Ft=Ye===void 0?function(){return[]}:Ye,_t=Oe.masterData,un=_t===void 0?function(){}:_t,En=Oe.style,hn=Oe.tableFromModule,xn=Oe.needLineLimit,In=Oe.cell,Vn=Oe.popupContainer,yn=Oe.editable,Kn=Oe.isediting,Bn=Oe.rowIndex,Zn=Oe.error,zn=Oe.updateEditingStatus,aa=Oe.updateCell,Gn=Oe.onClick,va=this.state.value,ka=Vn;return(hn===I.i7.SUBLIST||hn===I.i7.RELATE_RECORD)&&(ka=function(){return document.body}),n.createElement(n.Fragment,null,n.createElement(N.Z,{getPopupContainer:ka,popupVisible:Kn&&!!Zn,popup:n.createElement(m,{error:Zn,pos:Bn===0?"bottom":"top"}),destroyPopupOnHide:!0,zIndex:"1051",popupAlign:{points:Bn===0?["tl","bl"]:["bl","tl"],offset:Bn===0?[0,-3]:[0,0]}},n.createElement(u,{onClick:Gn,className:K()(at,{canedit:yn}),hideOutline:!0,style:En,iconRef:this.editIcon,iconName:"bellSchedule",iconClassName:"dateEditIcon",isediting:Kn,onIconClick:function(){return zn(!0)}},!!va&&n.createElement("div",{className:K()("worksheetCellPureString userSelectNone ellipsis",{linelimit:xn})},(0,l.Z)((0,O.default)({},In,{value:va}))),Kn&&Zn&&n.createElement(m,{error:Zn,pos:Bn===0?"bottom":"top"}))),Kn&&n.createElement(Ke,{onClickAwayExceptions:[this.editIcon&&this.editIcon.current,".ant-picker-dropdown",".cellControlDatePicker"],onClickAway:function(){zn(!1),hn===I.i7.SUBLIST&&In.value!==va&&aa({value:va})}},n.createElement("div",{className:K()("cellControlDatePicker",at),style:En},n.createElement("div",{className:"cellControlDatePickerCon"},n.createElement(At.Z,(0,O.default)({},In,hn===I.i7.SUBLIST?{value:va}:{},{formData:_.isFunction(Ft)?Ft():Ft,masterData:un(),dropdownClassName:"scrollInTable",onChange:this.handleChange,compProps:{autoFocus:!0,open:Kn,getPopupContainer:ka}}))))))}}]),Jt}(n.Component),Qe.propTypes={className:A().string,style:A().shape({}),editable:A().bool,isediting:A().bool,updateCell:A().func,popupContainer:A().any,cell:A().shape({value:A().string}),value:A().string,needLineLimit:A().bool,updateEditingStatus:A().func,onClick:A().func},Xe),$e(St.prototype,"handleTableKeyDown",[S.Nj],g()(St.prototype,"handleTableKeyDown"),St.prototype),$e(St.prototype,"handleChange",[S.Nj],g()(St.prototype,"handleChange"),St.prototype),$e(St.prototype,"handleClear",[S.Nj],g()(St.prototype,"handleClear"),St.prototype),St),He=t(47518),ze=t.n(He),gt=t(15759),Et=t(61987),ft=t(26358),qe,nt,Ze,et,ut;function xt(Wt,Jt,Vt,Oe,at){var Ye={};return Object.keys(Oe).forEach(function(Ft){Ye[Ft]=Oe[Ft]}),Ye.enumerable=!!Ye.enumerable,Ye.configurable=!!Ye.configurable,("value"in Ye||Ye.initializer)&&(Ye.writable=!0),Ye=Vt.slice().reverse().reduce(function(Ft,_t){return _t(Wt,Jt,Ft)||Ft},Ye),at&&Ye.initializer!==void 0&&(Ye.value=Ye.initializer?Ye.initializer.call(at):void 0,Ye.initializer=void 0),Ye.initializer===void 0&&(Object.defineProperty(Wt,Jt,Ye),Ye=null),Ye}var wt=(0,z.Z)(h.Z),kt=(Ze=(ut=et=function(Wt){(0,C.default)(Jt,Wt);function Jt(Vt){(0,U.default)(this,Jt);var Oe=(0,V.default)(this,(Jt.__proto__||H()(Jt)).call(this,Vt));return Oe.cell=n.createRef(),Oe.state={value:safeParse(Vt.cell.value,"array")},Oe}return(0,f.default)(Jt,[{key:"componentWillReceiveProps",value:function(Oe){var at=this;Oe.cell.value!==this.props.cell.value&&this.setState({value:safeParse(Oe.cell.value,"array")});var Ye=Oe.cell.enumDefault===0;this.cell.current&&Ye&&!this.props.isediting&&Oe.isediting&&this.pickUser(),!Ye&&!this.props.isediting&&Oe.isediting&&D().isEmpty(this.props.cell.value)&&setTimeout(function(){at.pickUser()},200)}},{key:"renderCellUser",value:function(Oe,at){var Ye=this,Ft=this.props,_t=Ft.isediting,un=Ft.projectId,En=Ft.appId,hn=Ft.cell,xn=Ft.disabled,In=this.state.value;return n.createElement("div",{className:"cellUser",key:at},n.createElement("div",{className:"flexRow"},n.createElement(gt.Z,{className:"cellUserHead",projectId:un,user:{userHead:Oe.avatarSmall||Oe.avatar,accountId:Oe.accountId},size:21,appId:hn.dataSource?void 0:En,disabled:xn}),n.createElement("span",{className:"userName flex ellipsis"},Oe.fullname||Oe.name),_t&&!(hn.required&&In.length===1)&&n.createElement("i",{className:"Font14 Gray_9e icon-close Hand mLeft4",onClick:function(yn){yn.stopPropagation(),Ye.deleteUser(Oe.accountId)}})))}},{key:"handleExitEditing",value:function(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},at=Oe.exit,Ye=at===void 0?!0:at,Ft=this.props,_t=Ft.updateEditingStatus,un=Ft.cell,En=this.state.isError;En&&this.setState({value:safeParse(un.value,"array")}),this.setState({isError:!1}),Ye&&_t(!1)}},{key:"handleTableKeyDown",value:function(Oe){var at=this.props,Ye=at.editable,Ft=at.updateEditingStatus;if(Ye)switch(Oe.key){case"Escape":this.handleExitEditing();break;case"Backspace":this.deleteLastUser(!1);break;case"Enter":this.isPicking||this.pickUser();break;default:if(!Oe.key||!(0,k.bP)(Oe.key))return;Ft(!0),Oe.target.tagName.toLowerCase()==="input"&&Oe.target.className==="searchInput"||(Oe.stopPropagation(),Oe.preventDefault());break}}},{key:"handleChange",value:function(Oe){var at=this.props,Ye=at.isSubList,Ft=at.cell,_t=at.updateCell,un=at.updateEditingStatus,En=this.state.value;if(!(Ye&&!Oe)){if(Ft.controlId==="ownerid"){_t({value:En[0]&&En[0].accountId});return}this.handleExitEditing({exit:Ft.enumDefault===0}),_t({value:y()(En)})}}},{key:"pickUser",value:function(Oe){var at=this,Ye=this.props,Ft=Ye.isSubList,_t=Ye.worksheetId,un=Ye.cell,En=Ye.projectId,hn=Ye.updateEditingStatus,xn=Ye.appId,In=Ye.rowFormData,Vn=Ye.onValidate,yn=this.state.value,Kn=this.cell&&this.cell.current||(Oe||{}).target,Bn=(0,ft.LU)(un);if(!(!Kn||this.isPicking)){if(this.isPicking=!0,Bn===1&&md.global.Account.isPortal&&!D().find(md.global.Account.projects,function(va){return va.projectId===En})){alert(_l("\u60A8\u4E0D\u662F\u8BE5\u7EC4\u7EC7\u6210\u5458\uFF0C\u65E0\u6CD5\u83B7\u53D6\u5176\u6210\u5458\u5217\u8868\uFF0C\u8BF7\u8054\u7CFB\u7EC4\u7EC7\u7BA1\u7406\u5458"),3);return}var Zn=yn.map(function(va){return va.accountId}),zn=function(ka,Ca){if(un.enumDefault===0){if(!Vn(y()(ka))){at.setState({value:ka,isError:!0});return}at.setState({value:ka,valueChanged:!0},function(){at.handleChange(!0)})}else{var Na=[];try{Na=D().uniqBy(at.state.value.concat(ka),"accountId")}catch(Xa){}at.setState({value:Na,valueChanged:!0},function(){return at.handleChange(Ca)})}at.isPicking=!1},aa=(0,c.Mn)(un,D().isFunction(In)?In():In),Gn=ze()(aa).some(function(va){return!D().isEmpty(va)});(0,Et.ZP)(Kn,{selectRangeOptions:aa,tabType:Bn,appId:xn,showMoreInvite:!1,prefixAccounts:!D().includes(Zn,md.global.Account.accountId)&&!Gn?[{accountId:md.global.Account.accountId,fullname:md.global.Account.fullname,avatar:md.global.Account.avatar}]:[],filterAccountIds:Zn,zIndex:10001,isDynamic:un.enumDefault===1,SelectUserSettings:{unique:un.enumDefault===0,projectId:En,filterAccountIds:Zn,callback:function(ka){return zn(ka,!0)}},selectCb:zn,onClose:function(){at.isPicking=!1,Ft&&at.state.valueChanged&&at.handleChange(!0)}})}}},{key:"handleMutipleEdit",value:function(){var Oe=this.props.updateEditingStatus;Oe(!0)}},{key:"handleSingleEdit",value:function(Oe){var at=this.props.updateEditingStatus;at(!0),this.pickUser(Oe)}},{key:"deleteUser",value:function(Oe){var at=this,Ye=this.state.value;this.setState({value:Ye.filter(function(Ft){return Ft.accountId!==Oe})},function(){return at.handleChange(!0)})}},{key:"deleteLastUser",value:function(){var Oe=this.state.value;Oe.length&&this.setState({value:Oe.slice(0,-1)},this.handleChange)}},{key:"render",value:function(){var Oe=this,at=this.props,Ye=at.className,Ft=at.error,_t=at.rowIndex,un=at.singleLine,En=at.style,hn=at.rowHeight,xn=at.popupContainer,In=at.cell,Vn=at.editable,yn=at.isediting,Kn=at.updateEditingStatus,Bn=at.disabled,Zn=this.state.value,zn=In.enumDefault===0,aa=n.createElement(wt,{onClickAwayExceptions:[".cellUsers",".selectUserBox","#dialogBoxSelectUser"],onClickAway:function(){return Oe.handleExitEditing()}},n.createElement("div",{className:K()("cellUsers cellControl cellControlUserPopup cellControlEdittingStatus",{cellControlErrorStatus:Ft}),ref:yn&&!zn?this.cell:function(){},style:(0,O.default)({width:En.width},zn?{minHeight:"auto",height:En.height-1}:{minHeight:hn})},Zn.map(function(Gn,va){return Oe.renderCellUser(Gn,va)}),!zn&&n.createElement("span",{className:"addUserBtn",onClick:this.pickUser},n.createElement("i",{className:"icon icon-add Gray_75 Font14"}))),Ft&&zn&&n.createElement(m,{pos:_t===0?"bottom":"top",error:Ft}));return Bn?n.createElement("div",null,!!Zn&&n.createElement("div",{className:K()("cellUsers cellControl",{singleLine:un})},Zn.map(function(Gn,va){return Oe.renderCellUser(Gn,va)}))):n.createElement(N.Z,{action:["click"],popup:aa,getPopupContainer:xn,popupClassName:"filterTrigger",popupVisible:yn,popupAlign:{points:["tl","tl"],overflow:{adjustX:!0,adjustY:!0}}},n.createElement(u,{conRef:zn?this.cell:function(){},hideOutline:!zn,clickAwayWrap:zn,onClickAwayExceptions:[".cellUsers",".selectUserBox","#dialogBoxSelectUser"],onClickAway:function(){return yn&&Oe.handleExitEditing()},onClick:this.props.onClick,className:K()(Ye,{canedit:Vn}),style:En,iconName:"people_5",isediting:yn,onIconClick:In.enumDefault===0?this.handleSingleEdit:this.handleMutipleEdit},!!Zn&&n.createElement("div",{className:K()("cellUsers cellControl",{singleLine:un})},Zn.map(function(Gn,va){return Oe.renderCellUser(Gn,va)}))))}}]),Jt}(n.Component),et.propTypes={className:A().string,singleLine:A().bool,style:A().shape({}),rowHeight:A().number,editable:A().bool,disabled:A().bool,isediting:A().bool,updateCell:A().func,popupContainer:A().any,cell:A().shape({value:A().string}),projectId:A().string,updateEditingStatus:A().func,onClick:A().func},ut),xt(Ze.prototype,"handleExitEditing",[S.Nj],g()(Ze.prototype,"handleExitEditing"),Ze.prototype),xt(Ze.prototype,"handleTableKeyDown",[S.Nj],g()(Ze.prototype,"handleTableKeyDown"),Ze.prototype),xt(Ze.prototype,"handleChange",[S.Nj],g()(Ze.prototype,"handleChange"),Ze.prototype),xt(Ze.prototype,"pickUser",[S.Nj],g()(Ze.prototype,"pickUser"),Ze.prototype),xt(Ze.prototype,"handleMutipleEdit",[S.Nj],g()(Ze.prototype,"handleMutipleEdit"),Ze.prototype),xt(Ze.prototype,"handleSingleEdit",[S.Nj],g()(Ze.prototype,"handleSingleEdit"),Ze.prototype),xt(Ze.prototype,"deleteUser",[S.Nj],g()(Ze.prototype,"deleteUser"),Ze.prototype),xt(Ze.prototype,"deleteLastUser",[S.Nj],g()(Ze.prototype,"deleteLastUser"),Ze.prototype),Ze),Rt=t(69293),jt=t(1178),fn=t(82570),Mt=t(17529),sn,on,en,$t,an,tn=(0,E.Z)([`
  background: #fff;
  height: 100%;
  padding: 7px 8px;
  .icon {
    float: right;
    font-size: 14px;
    color: #9e9e9e;
    line-height: 20px;
  }
`],[`
  background: #fff;
  height: 100%;
  padding: 7px 8px;
  .icon {
    float: right;
    font-size: 14px;
    color: #9e9e9e;
    line-height: 20px;
  }
`]),mt=(0,E.Z)([`
  width: 280px;
  position: relative;
  background: #fff;
  z-index: 2;
  padding: 8px 12px;
  box-shadow: 0px 4px 16px 1px rgba(0, 0, 0, 0.16);
  border-radius: 3px 3px 3px 3px;
  .header {
    margin-bottom: 8px;
    display: flex;
  }
  .usage {
    color: #9e9e9e;
  }
  .reSelect {
    cursor: pointer;
  }
  textarea {
    padding: 6px 8px 24px !important;
    line-height: 1.5em;
  }
  &.error {
    textarea {
      border-color: #f44336;
    }
  }
`],[`
  width: 280px;
  position: relative;
  background: #fff;
  z-index: 2;
  padding: 8px 12px;
  box-shadow: 0px 4px 16px 1px rgba(0, 0, 0, 0.16);
  border-radius: 3px 3px 3px 3px;
  .header {
    margin-bottom: 8px;
    display: flex;
  }
  .usage {
    color: #9e9e9e;
  }
  .reSelect {
    cursor: pointer;
  }
  textarea {
    padding: 6px 8px 24px !important;
    line-height: 1.5em;
  }
  &.error {
    textarea {
      border-color: #f44336;
    }
  }
`]);function Lt(Wt,Jt,Vt,Oe,at){var Ye={};return Object.keys(Oe).forEach(function(Ft){Ye[Ft]=Oe[Ft]}),Ye.enumerable=!!Ye.enumerable,Ye.configurable=!!Ye.configurable,("value"in Ye||Ye.initializer)&&(Ye.writable=!0),Ye=Vt.slice().reverse().reduce(function(Ft,_t){return _t(Wt,Jt,Ft)||Ft},Ye),at&&Ye.initializer!==void 0&&(Ye.value=Ye.initializer?Ye.initializer.call(at):void 0,Ye.initializer=void 0),Ye.initializer===void 0&&(Object.defineProperty(Wt,Jt,Ye),Ye=null),Ye}var zt=F.ZP.div(tn),Zt=F.ZP.div(mt);function Nt(Wt){var Jt=Wt.className,Vt=Wt.value,Oe=Vt===void 0?"":Vt,at=Wt.onChange,Ye=Wt.handleSave,Ft=Wt.onSave,_t=(0,n.useRef)();return(0,n.useEffect)(function(){try{_t.current.textarea.focus(),_t.current.textarea.selectionStart=_t.current.textarea.selectionEnd=_t.current.textarea.value.length}catch(un){}},[]),n.createElement(Zt,{className:Jt},n.createElement("div",{className:"header"},n.createElement("span",{className:"usage"},Oe.length+"/200"),n.createElement("div",{className:"flex"}),n.createElement("span",{className:"reSelect ThemeColor3 ThemeHoverColor2",onClick:function(){return Ft("")}},_l("\u91CD\u65B0\u9009\u62E9"))),n.createElement(ie.Z,{ref:_t,value:Oe,minHeight:122,maxHeight:122,onChange:at,onKeyDown:function(En){if(En.key==="Enter"){Ye(),En.stopPropagation();return}}}))}Nt.propTypes={className:j.string,value:j.string,onSave:j.func,onChange:j.func};function ct(Wt){var Jt=Wt.style,Vt=Wt.otherRequired,Oe=Wt.otherValue,at=Oe===void 0?"":Oe,Ye=Wt.getPopupContainer,Ft=Wt.selected,_t=Ft===void 0?{}:Ft,un=Wt.onSave,En=un===void 0?function(){}:un,hn=(0,n.useState)(at),xn=(0,X.Z)(hn,2),In=xn[0],Vn=xn[1],yn=(0,n.useState)(),Kn=(0,X.Z)(yn,2),Bn=Kn[0],Zn=Kn[1],zn=(0,n.useRef)();function aa(){if(Vt&&!In.trim()){Zn(!0),alert(_l("\u8BF7\u586B\u5199\u8865\u5145\u4FE1\u606F"),3);return}En(In?"other:"+In.trim():"other")}return(0,Rt.Z)(zn,aa),n.createElement(N.Z,{getPopupContainer:Ye,popupVisible:!0,popup:n.createElement("div",{ref:zn},n.createElement(Nt,{className:K()({error:Bn}),value:In,onChange:function(va){va&&Zn(!1),Vn(va.slice(0,200))},onSave:En,handleSave:aa})),destroyPopupOnHide:!0,popupAlign:{points:["tl","bl"],overflow:{adjustY:!0}}},n.createElement(zt,{className:"cellControlEdittingStatus",style:Jt},_t.value,n.createElement("span",{className:"icon icon-arrow-down-border"})))}ct.propTypes={style:(0,j.shape)({}),otherRequired:j.bool,otherValue:j.string,onSave:j.func,getPopupContainer:j.func};function De(Wt,Jt){return Jt.enumDefault2===1&&Wt.color||Jt.controlId==="wfstatus"?{backgroundColor:Wt.color,color:Wt.color&&(0,ee.eO)(Wt.color)||Jt.controlId==="wfstatus"&&D().includes(["abort","other"],Wt.key)?"#333":"#fff"}:{}}var _e=(en=(an=$t=function(Wt){(0,C.default)(Jt,Wt);function Jt(Vt){(0,U.default)(this,Jt);var Oe=(0,V.default)(this,(Jt.__proto__||H()(Jt)).call(this,Vt));return Oe.con=n.createRef(),Oe.cell=n.createRef(),Oe.state={verticalPlace:"top",value:Vt.cell.value,oldValue:Vt.cell.value},Oe.popupSpecialFilterClassName=("specialFilter"+Math.random()).replace(/\./g,""),Oe}return(0,f.default)(Jt,[{key:"componentWillReceiveProps",value:function(Oe){Oe.cell.value!==this.props.cell.value&&!Oe.isediting?this.setState({value:Oe.cell.value}):this.props.isediting&&!Oe.isediting&&this.state.value!==Oe.cell.value&&this.setState({value:Oe.cell.value})}},{key:"shouldComponentUpdate",value:function(Oe,at){return Oe.style!==this.props.style||Oe.isediting!==this.props.isediting||Oe.cell.value!==this.props.cell.value&&!Oe.isediting||at.value!==this.state.value||Oe.className!==this.props.className||at.verticalPlace!==this.state.verticalPlace}},{key:"handleChange",value:function(Oe){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ye=at.forceUpdate,Ft=at.needUpdateCell,_t=at.noUpdateCell,un=this.props,En=un.cell,hn=un.updateCell,xn=un.onValidate,In=typeof Oe=="string"&&Oe.startsWith("other")||Oe&&Oe[0]&&Oe[0].startsWith("other"),Vn=En.type===10;this.isChanging=!0,Ye||((Oe==="0"||Oe===0)&&(Oe=""),typeof Oe=="string"&&(Oe=[Oe]),Oe=y()((Oe||[]).sort().reverse()));var yn=!xn(Oe);if(this.setState((0,O.default)({value:Oe},yn?{}:{oldValue:Oe})),!(!Vn&&In&&!Ft)&&!(!Vn&&_t)&&!yn){if(Vn&&this.isSubList){this.setState({value:Oe});return}hn({value:(0,c.jz)(r()({},En,{value:Oe})).value}),(!Oe||!Vn)&&this.handleExit()}}},{key:"handleTableKeyDown",value:function(Oe){var at=this.props.updateEditingStatus;switch(Oe.key){case"Tab":case"Escape":this.handleExit();break;default:if(!(0,k.bP)(Oe.key))return;at(!0);break}}},{key:"handleExit",value:function(Oe){var at=this.props,Ye=at.cell,Ft=at.error,_t=at.updateEditingStatus,un=at.updateCell,En=this.state.value,hn=Ye.type===10;if(!hn||!Ft)_t(!1);else if(Ft){_t(!1),this.setState({value:this.state.oldValue});return}hn&&this.isSubList&&En!==this.props.cell.value&&un({value:(0,c.jz)(r()({},Ye,{value:En})).value})}},{key:"getShowValue",value:function(Oe){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ye=at.defaultEmpty,Ft=Ye===void 0?!1:Ye,_t=this.state.value;if(Oe.key==="other"){var un=D().find(JSON.parse(_t||"[]"),function(En){return En.includes(Oe.key)});return Ft&&un==="other"?void 0:un==="other"?Oe.value:D().replace(un,"other:","")||Oe.value}return Oe.value}},{key:"render",value:function(){var Oe=this,at=this.props,Ye=at.tableType,Ft=at.from,_t=at.className,un=at.rowIndex,En=at.style,hn=at.error,xn=at.tableFromModule,In=at.popupContainer,Vn=at.singleLine,yn=at.cell,Kn=at.editable,Bn=at.isediting,Zn=at.updateEditingStatus,zn=at.onClick,aa=this.state,Gn=aa.value,va=aa.verticalPlace,ka=Gn?(0,jt.Rc)(yn.options,Gn):[],Ca=yn.type===10,Na=ka[0]&&ka[0].key==="other",Xa=this.isSubList||this.isRelateRecord?function(){return $(Oe.cell.current).parents(".recordInfoForm")[0]||document.body}:In;this.isSubList&&Na&&(Xa=function(){return document.body});var nr=(this.isSubList||this.isRelateRecord)&&un===0,lr=void 0;return!Ca&&Na?lr=n.createElement(ct,{style:En,otherRequired:D().get(yn,"advancedSetting.otherrequired")==="1",otherValue:this.getShowValue(ka[0],{defaultEmpty:!0}),selected:ka[0],getPopupContainer:Xa,onSave:function(Ma){Oe.handleChange(Ma,Ma===""?{noUpdateCell:!0}:{needUpdateCell:!0})}}):lr=n.createElement("div",{className:K()("cellControlOptionsPopup",{error:hn},va),ref:this.con,style:En},Ca?n.createElement(Mt.Z,(0,O.default)({},(0,O.default)({},yn,{advancedSetting:(0,O.default)({},yn.advancedSetting,{checktype:"1"})}),{isSubList:this.isSubList,isSheet:!0,isFocus:!0,dropdownClassName:"scrollInTable",value:Gn,selectProps:{open:!0,autoFocus:!0,defaultOpen:!0,getPopupContainer:Xa,onInputKeyDown:function(Ma){Ma.key==="Escape"?Oe.handleExit():Ma.key==="Tab"&&setTimeout(function(){document.activeElement.blur()},100)},onDropdownVisibleChange:function(Ma){!Ma&&!Oe.isChanging&&Oe.handleExit(),Oe.isChanging=!1}},onChange:function(Ma){return Oe.handleChange(Ma,{forceUpdate:!0})}})):n.createElement(fn.Z,(0,O.default)({},yn,{isSubList:this.isSubList,dropdownClassName:"scrollInTable",value:Gn,selectProps:{open:!0,noPushAdd_:!0,autoFocus:!0,defaultOpen:!0,getPopupContainer:Xa,onDropdownVisibleChange:function(Ma){(!hn||Oe.isSubList)&&!Ma&&!Oe.isChanging&&Oe.handleExit(),Oe.isChanging=!1},onInputKeyDown:function(Ma){Ma.key==="Escape"?Oe.handleExit():Ma.key==="Tab"&&setTimeout(function(){document.activeElement.blur()},100)},onChange:function(Ma){D().isObject(Ma)&&(Ma=Ma.value),Oe.handleChange(Ma)}}})),hn&&!nr&&n.createElement(m,{error:hn,pos:un===0?"bottom":"top"})),n.createElement(n.Fragment,null,n.createElement(u,{hideOutline:!0,conRef:this.cell,onClick:zn,className:K()(_t,{canedit:Kn}),style:r()({},En,Ft!==T.B.CARD?{padding:"5px 6px"}:{}),iconName:"arrow-down-border",isediting:Bn,onIconClick:function(){return Zn(!0)}},!!Gn&&n.createElement("div",{className:K()("cellOptions cellControl",{singleLine:Vn})},ka.map(function(dr,Ma){return n.createElement("span",{className:"cellOption ellipsis",key:Ma,style:r()({},(0,O.default)({},De(dr,yn),{maxWidth:En.width-14}),Ft===T.B.CARD?{margin:"0px 4px 0px 0px"}:{})},Oe.getShowValue(dr))})),Ye==="classic"&&!Bn&&(!Gn||Gn==="[]")&&yn.hint&&n.createElement("span",{className:"guideText Gray_bd hide mTop2"},yn.hint)),nr&&Bn&&n.createElement(N.Z,{getPopupContainer:Xa,popupVisible:!!hn,popup:n.createElement(m,{error:hn,pos:un===0?"bottom":"top"}),destroyPopupOnHide:!0,popupAlign:{points:["tl","bl"]}},lr),!nr&&Bn&&lr)}},{key:"isSubList",get:function(){return this.props.tableFromModule===I.i7.SUBLIST}},{key:"isRelateRecord",get:function(){return this.props.tableFromModule===I.i7.RELATE_RECORD}}]),Jt}(n.Component),$t.propTypes={className:A().string,style:A().shape({}),singleLine:A().bool,editable:A().bool,isediting:A().bool,popupContainer:A().any,cell:A().shape({value:A().string}),updateCell:A().func,updateEditingStatus:A().func,onClick:A().func},an),Lt(en.prototype,"handleChange",[S.Nj],g()(en.prototype,"handleChange"),en.prototype),Lt(en.prototype,"handleTableKeyDown",[S.Nj],g()(en.prototype,"handleTableKeyDown"),en.prototype),Lt(en.prototype,"handleExit",[S.Nj],g()(en.prototype,"handleExit"),en.prototype),en),Le=t(22552),rt=(0,E.Z)([`
  padding: 7px 6px !important;
  &:hover {
    `,`
    .OperateIcon {
      display: inline-block;
    }
  }
`],[`
  padding: 7px 6px !important;
  &:hover {
    `,`
    .OperateIcon {
      display: inline-block;
    }
  }
`]),Ct=(0,E.Z)([`
  padding: 7px 6px;
  background: #fff;
  box-shadow: inset 0 0 0 2px #2d7ff9 !important;
`],[`
  padding: 7px 6px;
  background: #fff;
  box-shadow: inset 0 0 0 2px #2d7ff9 !important;
`]),dt=(0,E.Z)([`
  display: none;
  margin: -7px -6px 0 2px;
  width: 34px;
  height: 34px;
  text-align: center;
  line-height: 34px;
  color: #9e9e9e;
  font-size: 16px;
  cursor: pointer;
`],[`
  display: none;
  margin: -7px -6px 0 2px;
  width: 34px;
  height: 34px;
  text-align: center;
  line-height: 34px;
  color: #9e9e9e;
  font-size: 16px;
  cursor: pointer;
`]);function It(Wt,Jt){return Jt.enumDefault2===1&&Wt.color?{backgroundColor:Wt.color,color:Wt.color&&(0,ee.eO)(Wt.color)?"#333":"#fff"}:{}}var bt=(0,z.Z)(h.Z),Ut=F.ZP.div(rt,function(Wt){var Jt=Wt.tableType;return Jt!=="classic"?"padding-right: 34px;":""}),Xt=F.ZP.div(Ct),pn=F.ZP.div(dt);function tt(Wt,Jt){var Vt=Wt.tableType,Oe=Wt.className,at=Wt.style,Ye=Wt.from,Ft=Wt.rowIndex,_t=Wt.mode,un=Wt.cell,En=un===void 0?{}:un,hn=Wt.rowHeight,xn=hn===void 0?34:hn,In=Wt.isediting,Vn=Wt.editable,yn=Wt.onClick,Kn=Wt.popupContainer,Bn=Wt.updateEditingStatus,Zn=Wt.updateCell,zn=En.options,aa=En.enumDefault2,Gn=En.value;if((0,n.useImperativeHandle)(Jt,function(){return{handleTableKeyDown:function(Na){var Xa=D().findIndex(zn,{key:safeParse(Gn)[0]});if(Na.key==="Escape")Bn(!1);else if(Na.key==="ArrowUp"||Na.key==="ArrowDown"){Na.stopPropagation(),Na.preventDefault();var nr=zn.filter(function(dr){return!dr.isDeleted&&(dr.key===safeParse(Gn)[0]||!dr.hide)});if(!nr.length)return;var lr=Xa+(Na.key==="ArrowUp"?-1:1);lr<0&&(lr=0),lr>zn.length-1&&(lr=zn.length-1),zn[lr]&&Zn({value:y()([zn[lr].key])})}}}}),Ye===T.B.CARD||_t==="mobileSub"){var va=D().find(zn,function(Ca){return Ca.key===JSON.parse(Gn||"[]")[0]})||{};return n.createElement("div",{className:"cellOptions cellControl w100"},n.createElement("span",{className:"cellOption ellipsis",style:r()({},(0,O.default)({},It(va,En),{margin:"0px 4px 0px 0px",maxWidth:"100%"}))},va.value))}var ka=n.createElement(Le.Z,{tipDirection:Ft===0?"bottom":void 0,disabled:!Vn||!In,showSelected:!In&&xn<50,showTip:In,showScaleText:In||xn>50,value:JSON.parse(Gn||"[]")[0],data:{options:zn,enumDefault2:aa},onChange:function(Na){Zn({value:y()(Na?[Na]:[])})}});return In?n.createElement(N.Z,{popup:n.createElement(bt,{onClickAway:function(){Bn(!1)}},n.createElement(Xt,{style:{width:at.width,minHeight:at.height}},ka)),getPopupContainer:function(){return document.body},popupClassName:"filterTrigger",popupVisible:In,destroyPopupOnHide:!0,popupAlign:{points:["tl","tl"]}},n.createElement("div",{className:Oe,style:at,onClick:yn})):n.createElement(Ut,{className:K()(Oe,"cellControl flexRow",{canedit:Vn}),tableType:Vt,style:at,onClick:yn},n.createElement("div",{className:"flex"},ka),Vn&&n.createElement(pn,{className:"editIcon OperateIcon"},n.createElement("i",{className:"ThemeHoverColor3 icon icon-edit",onClick:function(Na){Na.stopPropagation(),Bn(!0)}})))}tt.propTypes={className:j.string,style:(0,j.shape)({}),rowIndex:j.number,cell:(0,j.shape)({}),isediting:j.bool,editable:j.bool,onClick:j.func,popupContainer:j.func,updateEditingStatus:j.func,updateCell:j.func};const ht=(0,n.forwardRef)(tt);var Dt=t(70264),Ot=t(46593),Ht=t.n(Ot),Kt=t(60510),dn=t(3735),Cn,Rn,gn,wn,On;function An(Wt,Jt,Vt,Oe,at){var Ye={};return Object.keys(Oe).forEach(function(Ft){Ye[Ft]=Oe[Ft]}),Ye.enumerable=!!Ye.enumerable,Ye.configurable=!!Ye.configurable,("value"in Ye||Ye.initializer)&&(Ye.writable=!0),Ye=Vt.slice().reverse().reduce(function(Ft,_t){return _t(Wt,Jt,Ft)||Ft},Ye),at&&Ye.initializer!==void 0&&(Ye.value=Ye.initializer?Ye.initializer.call(at):void 0,Ye.initializer=void 0),Ye.initializer===void 0&&(Object.defineProperty(Wt,Jt,Ye),Ye=null),Ye}var Yn=(0,z.Z)(h.Z),kn=(gn=(On=wn=function(Wt){(0,C.default)(Jt,Wt);function Jt(Vt){(0,U.default)(this,Jt);var Oe=(0,V.default)(this,(Jt.__proto__||H()(Jt)).call(this,Vt));return Oe.state={value:safeParse(Vt.cell.value,"array")},Oe}return(0,f.default)(Jt,[{key:"componentWillReceiveProps",value:function(Oe){Oe.cell.value!==this.props.cell.value&&this.setState({value:safeParse(Oe.cell.value,"array")});var at=Oe.cell.enumDefault===0;at&&!this.props.isediting&&Oe.isediting&&this.handleSelect(),!at&&!this.props.isediting&&Oe.isediting&&D().isEmpty(this.props.cell.value)&&this.handleSelect()}},{key:"handleTableKeyDown",value:function(Oe){var at=this.props.updateEditingStatus;switch(Oe.key){case"Escape":at(!1);break;case"Enter":this.isSelecting||this.handleSelect();break;default:break}}},{key:"handleChange",value:function(){var Oe=this.props.updateCell,at=this.state.value;Oe({value:y()(at)})}},{key:"selectDepartments",value:function(Oe){var at=this,Ye=this.props,Ft=Ye.cell,_t=Ye.projectId;if(!D().find(md.global.Account.projects,function(un){return un.projectId===_t})){alert(_l("\u60A8\u4E0D\u662F\u8BE5\u7EC4\u7EC7\u6210\u5458\uFF0C\u65E0\u6CD5\u83B7\u53D6\u5176\u90E8\u95E8\u5217\u8868\uFF0C\u8BF7\u8054\u7CFB\u7EC4\u7EC7\u7BA1\u7406\u5458"),3);return}(0,Kt.Z)({projectId:_t,isIncludeRoot:!1,unique:Ft.enumDefault===0,showCreateBtn:!1,allPath:D().get(Ft,"advancedSetting.allpath")==="1",selectFn:Oe,onClose:function(){return at.isSelecting=!1}})}},{key:"handleSelect",value:function(){var Oe=this,at=this.props,Ye=at.cell,Ft=at.updateEditingStatus,_t=this.state.value;this.isSelecting=!0,this.selectDepartments(function(un){if(Oe.isSelecting=!1,Ye.enumDefault===0)Oe.setState({value:un},function(){Oe.handleChange(),Ft(!1)});else{var En=[];try{En=D().uniqBy(_t.concat(un),"departmentId")}catch(hn){}Oe.setState({value:En},Oe.handleChange)}})}},{key:"handleMutipleEdit",value:function(){var Oe=this.props.updateEditingStatus;Oe(!0)}},{key:"deleteDepartment",value:function(Oe){var at=this.state.value;this.setState({value:Oe?at.filter(function(Ye){return Ye.departmentId!==Oe}):at.filter(function(Ye){return!Ye.isDelete})},this.handleChange)}},{key:"renderDepartmentTag",value:function(Oe,at){var Ye=this,Ft=this.props,_t=Ft.style,un=Ft.isediting,En=Ft.cell,hn=En===void 0?{}:En;return n.createElement("span",{className:K()("cellDepartment",{isDelete:Oe.isDelete}),style:{maxWidth:_t.width-20}},n.createElement("div",{className:"flexRow"},n.createElement("div",{className:"iconWrap",style:{backgroundColor:"#2196f3"}},n.createElement("i",{className:"Font14 icon-department"})),n.createElement("div",{className:"departmentName mLeft4 flex ellipsis",style:D().get(hn,"advancedSetting.allpath")==="1"&&!Oe.isDelete?{direction:"rtl",unicodeBidi:"normal"}:{}},Oe.departmentName,Oe.deleteCount>1&&n.createElement("span",{className:"Gray mLeft5"},Oe.deleteCount)),un&&at&&n.createElement("i",{className:"Font14 Gray_9e icon-close Hand mLeft4",onClick:function(){return Ye.deleteDepartment(Oe.departmentId)}})))}},{key:"render",value:function(){var Oe=this,at=this.props,Ye=at.className,Ft=at.style,_t=at.rowHeight,un=at.singleLine,En=at.popupContainer,hn=at.cell,xn=at.projectId,In=at.editable,Vn=at.isediting,yn=at.updateEditingStatus,Kn=at.onClick,Bn=hn.advancedSetting||{},Zn=Bn.allpath,zn=(0,c.yT)(this.state.value,hn.advancedSetting),aa=hn.enumDefault===0,Gn=n.createElement(Yn,{onClickAwayExceptions:["#dialogSelectDept"],onClickAway:function(){yn(!1)}},n.createElement("div",{className:"cellDepartments cellControl cellControlDepartmentPopup cellControlEdittingStatus",style:{width:Ft.width,minHeight:_t}},zn.map(function(va){return Oe.renderDepartmentTag(va,!(hn.required&&zn.length===1))}),!aa&&n.createElement("span",{className:"addBtn",onClick:this.handleSelect},n.createElement("i",{className:"icon icon-add Gray_75 Font14"}))));return n.createElement(N.Z,{action:["click"],popup:Gn,getPopupContainer:En,popupClassName:"filterTrigger",popupVisible:Vn,popupAlign:{points:["tl","tl"],overflow:{adjustX:!0,adjustY:!0}}},n.createElement(u,{hideOutline:!aa,onClick:Kn,className:K()(Ye,{canedit:In}),style:Ft,iconName:"department",isediting:Vn,onIconClick:hn.enumDefault===0?this.handleSelect:this.handleMutipleEdit},!!zn&&n.createElement("div",{className:K()("cellDepartments cellControl",{singleLine:un})},zn.map(function(va,ka){return n.createElement(Dt.Z,{flag:va.departmentId,mouseEnterDelay:.6,disable:!xn,text:D().get(window,"shareState.shareId")?null:function(){return new(Ht())(function(Ca,Na){if(!xn)return Na();if(va.isDelete){Ca(_l("%0\u90E8\u95E8\u5DF2\u88AB\u5220\u9664",va.deleteCount>1?va.deleteCount+"\u4E2A":""));return}if(Zn==="1")return Ca(va.departmentName);dn.Z.getDepartmentFullNameByIds({projectId:xn,departmentIds:[va.departmentId]}).then(function(Xa){Ca(D().get(Xa,"0.name"))})})}},Oe.renderDepartmentTag(va))}))))}}]),Jt}(n.Component),wn.propTypes={className:A().string,singleLine:A().bool,style:A().shape({}),rowHeight:A().number,editable:A().bool,isediting:A().bool,popupContainer:A().any,cell:A().shape({value:A().string}),projectId:A().string,updateCell:A().func,updateEditingStatus:A().func,onClick:A().func},On),An(gn.prototype,"handleTableKeyDown",[S.Nj],g()(gn.prototype,"handleTableKeyDown"),gn.prototype),An(gn.prototype,"handleChange",[S.Nj],g()(gn.prototype,"handleChange"),gn.prototype),An(gn.prototype,"selectDepartments",[S.Nj],g()(gn.prototype,"selectDepartments"),gn.prototype),An(gn.prototype,"handleSelect",[S.Nj],g()(gn.prototype,"handleSelect"),gn.prototype),An(gn.prototype,"handleMutipleEdit",[S.Nj],g()(gn.prototype,"handleMutipleEdit"),gn.prototype),An(gn.prototype,"deleteDepartment",[S.Nj],g()(gn.prototype,"deleteDepartment"),gn.prototype),gn),Fn=t(61844),$n,ba,ua,La,ga;function Ua(Wt,Jt,Vt,Oe,at){var Ye={};return Object.keys(Oe).forEach(function(Ft){Ye[Ft]=Oe[Ft]}),Ye.enumerable=!!Ye.enumerable,Ye.configurable=!!Ye.configurable,("value"in Ye||Ye.initializer)&&(Ye.writable=!0),Ye=Vt.slice().reverse().reduce(function(Ft,_t){return _t(Wt,Jt,Ft)||Ft},Ye),at&&Ye.initializer!==void 0&&(Ye.value=Ye.initializer?Ye.initializer.call(at):void 0,Ye.initializer=void 0),Ye.initializer===void 0&&(Object.defineProperty(Wt,Jt,Ye),Ye=null),Ye}function yr(Wt){var Jt=parseInt(Wt,10);return(!D().isNumber(Jt)||D().isNaN(Jt))&&(Jt=0),Jt}var sr=(ua=(ga=La=function(Wt){(0,C.default)(Jt,Wt);function Jt(Vt){(0,U.default)(this,Jt);var Oe=(0,V.default)(this,(Jt.__proto__||H()(Jt)).call(this,Vt));return Oe.state={value:yr(Vt.cell.value)},Oe}return(0,f.default)(Jt,[{key:"componentWillReceiveProps",value:function(Oe){Oe.cell.value!==this.props.cell.value&&this.setState({value:yr(Oe.cell.value)})}},{key:"handleTableKeyDown",value:function(Oe){var at=this,Ye=this.props,Ft=Ye.cell,_t=Ye.updateCell,un=Ft.advancedSetting||{},En=un.max,hn=0,xn=yr(En);switch(Oe.key){default:if(/^[0-9]$/.test(Oe.key)){var In=Number(Oe.key);if(!D().isNaN(In)){if(this.prevValue&&(In=+(this.prevValue+""+In)),!D().isUndefined(hn)&&!D().isUndefined(xn)&&(In<hn||In>xn))return;_t({value:In||""}),this.prevValue=In,setTimeout(function(){at.prevValue=void 0},500)}}break}}},{key:"handleChange",value:function(Oe){var at=this.props,Ye=at.cell,Ft=at.updateCell;if(Ye.required&&!Oe){alert(_l("%0\u4E3A\u5FC5\u586B\u5B57\u6BB5",Ye.controlName),3);return}this.setState({value:Oe}),Ft({value:Oe})}},{key:"render",value:function(){var Oe=this.props,at=Oe.from,Ye=Oe.recordId,Ft=Oe.className,_t=Oe.style,un=Oe.cell,En=Oe.editable,hn=Oe.isediting,xn=Oe.onClick,In=this.state.value,Vn=(0,ee.Q9)();if(Vn){var yn=un&&un.advancedSetting?JSON.parse(un.advancedSetting.itemnames||"[]"):[],Kn=D().get(D().find(yn,function(Bn){return Bn.key===""+In}),"value")||_l("%0 \u7EA7",In);return Kn}return n.createElement("div",{className:K()(Ft,"levelWrapper cellControl flexRow",{canedit:En,isInCard:at===T.B.CARD}),style:_t,onClick:xn},Ye!=="empty"&&n.createElement("div",{className:"flex flexRow"},Vn&&n.createElement("span",{className:"mRight5",style:{marginTop:"-2px"}},In),n.createElement(Fn.Z,{hideTip:!0,backgroundColor:"rgba(0,0,0,0.16)",score:In,data:un,disabled:!En||at===T.B.CARD,callback:this.handleChange})))}}]),Jt}(n.Component),La.propTypes={className:A().string,style:A().shape({}),editable:A().bool,isediting:A().bool,cell:A().shape({}),updateCell:A().func,onClick:A().func},ga),Ua(ua.prototype,"handleTableKeyDown",[S.Nj],g()(ua.prototype,"handleTableKeyDown"),ua.prototype),Ua(ua.prototype,"handleChange",[S.Nj],g()(ua.prototype,"handleChange"),ua.prototype),ua),Ba={0:"",1:"icon-task-responsible",2:"icon-knowledge_file",3:"icon-task_custom_today",7:"icon-task_custom_today",4:"icon-file",5:"icon-content_paste2"};function cr(Wt){var Jt=Wt.from,Vt=Wt.cell,Oe=Wt.className,at=Wt.style,Ye=Vt.value,Ft=Ye?JSON.parse(Ye):[];switch(Jt){case T.B.DRAFT:case T.B.COMMON:case T.B.CARD:case T.B.RELATE_WORKSHEET:return n.createElement("div",{className:K()("cellRelations common cellControl",Oe),style:at,onClick:Wt.onClick},Ft.length>1?_l("%0 \u4E2A\u5173\u8054",Ft.length):Ft.slice(0,1).map(function(_t,un){return _t.name?n.createElement("a",{className:"cellRelation ellipsis",target:"_blank",rel:"noopener noreferrer",key:un,href:_t.link,onClick:function(hn){hn.stopPropagation()}},n.createElement("span",{className:"relatioName ThemeHoverColor3"},"["+T.Z[_t.type]+"]"+_t.name+(_t.type===4?_t.ext1:""))):n.createElement("span",{className:"relatioName"},"["+T.Z[_t.type]+"]"+_l("\u5DF2\u5220\u9664"))}));case T.B.LAND:return n.createElement("div",{className:"cellRelations land cellControl"},Ft.map(function(_t,un){return n.createElement("div",{className:"cellRelation",key:un},n.createElement("div",{className:"cellRelationIcon"},n.createElement("i",{className:Ba[_t.type]})),_t.name?n.createElement("a",{className:"relationName ThemeHoverColor3",href:_t.link,target:"_blank",rel:"noopener noreferrer"}," ",_t.name," "):n.createElement("span",{className:"relationName"},""+T.Z[_t.type]+_l("\u5DF2\u5220\u9664")),_t.name&&n.createElement(gt.Z,{className:"chargeAccount",user:{accountId:_t.accountId,userHead:_t.avatar},size:24}))}));default:return""}}cr.propTypes={className:A().string,style:A().shape({}),from:A().number,cell:A().shape({})};const hr=cr;var Qa=t(31742),da=t(76345),Jn=t(83983),ra=t(88349),ha=t(5631),Ia=t(95283),wa=(0,E.Z)([`
  &:hover {
    .CutCon {
      margin-right: 34px;
    }
    `,`
  }
  &.canedit.focusShowEditIcon.focus:not(.isediting) {
    .OperateIcon {
      display: inline-block;
    }
  }
`],[`
  &:hover {
    .CutCon {
      margin-right: 34px;
    }
    `,`
  }
  &.canedit.focusShowEditIcon.focus:not(.isediting) {
    .OperateIcon {
      display: inline-block;
    }
  }
`]),Ka=(0,E.Z)([`
  max-width: 500px;
  overflow: hidden;
  white-space: nowrap;
`],[`
  max-width: 500px;
  overflow: hidden;
  white-space: nowrap;
`]),tr=(0,E.Z)([`
  padding: 5px 6px 0px;
  box-shadow: inset 0 0 0 2px #2d7ff9 !important;
  background-color: #fff;
`],[`
  padding: 5px 6px 0px;
  box-shadow: inset 0 0 0 2px #2d7ff9 !important;
  background-color: #fff;
`]),Tr=(0,E.Z)([`
  position: relative;
  display: inline-flex;
  align-items: center;
  margin-right: 4px;
  vertical-align: middle;
  border-radius: 2px;
  overflow: hidden;
  cursor: pointer;
  margin-bottom: 5px;
  &:hover {
    .hoverMask {
      display: inline-block;
    }
    background-color: rgba(0, 0, 0, 0.05);
  }
`],[`
  position: relative;
  display: inline-flex;
  align-items: center;
  margin-right: 4px;
  vertical-align: middle;
  border-radius: 2px;
  overflow: hidden;
  cursor: pointer;
  margin-bottom: 5px;
  &:hover {
    .hoverMask {
      display: inline-block;
    }
    background-color: rgba(0, 0, 0, 0.05);
  }
`]),xr=(0,E.Z)([`
  position: relative;
  img {
    border-radius: 2px;
    vertical-align: middle;
    min-width: 21px;
    object-fit: cover;
  }
`],[`
  position: relative;
  img {
    border-radius: 2px;
    vertical-align: middle;
    min-width: 21px;
    object-fit: cover;
  }
`]),_a=(0,E.Z)([`
  vertical-align: middle;
  flex-shrink: 0;
`],[`
  vertical-align: middle;
  flex-shrink: 0;
`]),gr=(0,E.Z)([`
  padding: 0 6px;
  .ellipsis {
    display: inline-block;
  }
  .name {
    max-width: 200px;
  }
  .ext {
    max-width: 100px;
  }
`],[`
  padding: 0 6px;
  .ellipsis {
    display: inline-block;
  }
  .name {
    max-width: 200px;
  }
  .ext {
    max-width: 100px;
  }
`]),zr=(0,E.Z)([`
  position: absolute;
  border-radius: 2px;
  width: 100%;
  height: 100%;
  box-shadow: inset 0px 0px 0px 1px rgba(0, 0, 0, 0.05);
`],[`
  position: absolute;
  border-radius: 2px;
  width: 100%;
  height: 100%;
  box-shadow: inset 0px 0px 0px 1px rgba(0, 0, 0, 0.05);
`]),ea=(0,E.Z)([`
  position: absolute;
  border-radius: 2px;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.05);
  display: none;
`],[`
  position: absolute;
  border-radius: 2px;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.05);
  display: none;
`]),Xn=(0,E.Z)([`
  display: none;
  position: absolute;
  right: 0;
  top: 0;
  width: 34px;
  height: 34px;
  text-align: center;
  line-height: 34px;
  color: #9e9e9e;
  font-size: 16px;
  cursor: pointer;
`],[`
  display: none;
  position: absolute;
  right: 0;
  top: 0;
  width: 34px;
  height: 34px;
  text-align: center;
  line-height: 34px;
  color: #9e9e9e;
  font-size: 16px;
  cursor: pointer;
`]),Va=(0,E.Z)([`
  text-align: center;
  width: 240px;
  box-shadow: 0px 1px 6px rgba(0, 0, 0, 0.24);
  border-radius: 6px;
  background-color: #fff;
  overflow: hidden;
  .fileDetail {
    text-align: left;
    font-size: 13px;
    padding: 8px 16px;
    word-break: break-all;
  }
  .fileName {
    color: #333;
  }
  .panelFooter {
    margin-top: 2px;
  }
  .fileSize {
    color: #9e9e9e;
  }
  .downloadBtn {
    margin-right: 16px;
  }
  .downloadBtn,
  .deleteBtn {
    cursor: pointer;
    float: right;
    color: #9e9e9e;
    font-size: 18px;
    &:not(.disabled):hover {
      color: #f44336;
    }
    &.disabled {
      cursor: not-allowed;
    }
  }
`],[`
  text-align: center;
  width: 240px;
  box-shadow: 0px 1px 6px rgba(0, 0, 0, 0.24);
  border-radius: 6px;
  background-color: #fff;
  overflow: hidden;
  .fileDetail {
    text-align: left;
    font-size: 13px;
    padding: 8px 16px;
    word-break: break-all;
  }
  .fileName {
    color: #333;
  }
  .panelFooter {
    margin-top: 2px;
  }
  .fileSize {
    color: #9e9e9e;
  }
  .downloadBtn {
    margin-right: 16px;
  }
  .downloadBtn,
  .deleteBtn {
    cursor: pointer;
    float: right;
    color: #9e9e9e;
    font-size: 18px;
    &:not(.disabled):hover {
      color: #f44336;
    }
    &.disabled {
      cursor: not-allowed;
    }
  }
`]),$a=(0,E.Z)([`
  background-color: #f5f5f5;
  height: 160px;
  display: flex;
  justify-content: center;
  align-items: center;
`],[`
  background-color: #f5f5f5;
  height: 160px;
  display: flex;
  justify-content: center;
  align-items: center;
`]),vr=(0,E.Z)([`
  max-width: 100%;
  max-height: 160px;
  object-fit: contain;
  &.loading {
    width: 240px;
    height: 160px;
    filter: blur(2px);
  }
`],[`
  max-width: 100%;
  max-height: 160px;
  object-fit: contain;
  &.loading {
    width: 240px;
    height: 160px;
    filter: blur(2px);
  }
`]),Er=(0,E.Z)([`
  cursor: pointer;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  position: relative;
  margin-right: 4px;
  margin-bottom: 5px;
  border-radius: 2px;
  overflow: hidden;
  border: 1px solid #ddd;
  .icon {
    font-size: 16px;
    color: #ccc;
    line-height: inherit;
  }
`],[`
  cursor: pointer;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  position: relative;
  margin-right: 4px;
  margin-bottom: 5px;
  border-radius: 2px;
  overflow: hidden;
  border: 1px solid #ddd;
  .icon {
    font-size: 16px;
    color: #ccc;
    line-height: inherit;
  }
`]),ur=F.ZP.div(wa,function(Wt){var Jt=Wt.tableType;return Jt!=="classic"?`.OperateIcon {
      display: inline-block;
    }`:""}),Kr=F.ZP.div(Ka),Fr=F.ZP.div(tr),yo=F.ZP.div(Tr),eo=F.ZP.div(xr),wr=F.ZP.span(_a),Or=F.ZP.span(gr),Fo=F.ZP.span(zr),Wo=F.ZP.span(ea),Uo=F.ZP.div(Xn),No=F.ZP.div(Va),Ao=F.ZP.div($a),Oo=F.ZP.img(vr),Wr=F.ZP.div(Er);function So(Wt,Jt){return[2,3].includes(Jt)?(Wt.attachmentData.forEach(function(Vt,Oe){Vt.index=Oe}),Wt.attachments.forEach(function(Vt,Oe){Vt.index=Wt.attachmentData.length+Oe}),Wt.knowledgeAtts.forEach(function(Vt,Oe){Vt.index=Wt.attachmentData.length+Wt.attachments.length+Oe})):(Wt.attachments.forEach(function(Vt,Oe){Vt.index=Oe}),Wt.knowledgeAtts.forEach(function(Vt,Oe){Vt.index=Wt.attachments.length+Oe}),Wt.attachmentData.forEach(function(Vt,Oe){Vt.index=Wt.attachments.length+Wt.knowledgeAtts.length+Oe})),Wt}function to(Wt,Jt){var Vt=[];try{Vt=JSON.parse(Wt),Vt.attachmentData&&Vt.attachments&&Vt.knowledgeAtts&&(Vt=[].concat((0,o.Z)(Vt.attachments),(0,o.Z)(Vt.knowledgeAtts),(0,o.Z)(Vt.attachmentData))),Vt=Vt.map(function(Oe){var at=Oe.createTime||!D().isUndefined(Oe.fileSize)?{ext:Oe.ext||Oe.fileExt,fileID:Oe.fileID||Oe.fileId,originalFilename:Oe.originalFileName||Oe.originalFilename,previewUrl:Oe.previewUrl||Oe.viewUrl||Oe.url||""+Oe.serverName+Oe.key,refId:Oe.refID||Oe.refId,filesize:Oe.fileSize||Oe.filesize}:Oe;return at.ext==="."&&(at.ext=""),at.origin=Oe,at})}catch(Oe){return[]}return Vt}function go(Wt){var Jt=Wt.attachments,Vt=Wt.index,Oe=Wt.sheetSwitchPermit,at=Oe===void 0?[]:Oe,Ye=Wt.viewId,Ft=Ye===void 0?"":Ye,_t=Wt.disableDownload,un=Wt.handleOpenControlAttachmentInNewTab,En=Wt.worksheetId,hn=Wt.recordId,xn=Wt.fileId,In=Wt.controlId,Vn=Wt.from,yn=!!D().get(window,"shareState.shareId")||(0,Qa.v)(da.RX.recordAttachmentSwitch,at,Ft),Kn=["editFileName"];(!yn||_t)&&Kn.push("download","share","saveToKnowlege"),(0,ee.Ye)("previewFile",En,{fileId:xn,rowId:hn}),(0,Ia.Z)({index:Vt||0,fromType:4,attachments:Jt.map(function(Bn){return Bn.fileID&&Bn.fileID.slice(0,2)==="o_"?r()({},Bn,{previewAttachmentType:"QINIU",path:Bn.origin.url||Bn.previewUrl,ext:Bn.ext.slice(1),name:Bn.originalFilename||_l("\u56FE\u7247")}):r()({},Bn,{previewAttachmentType:Bn.refId?"KC_ID":"COMMON_ID"})}),showThumbnail:!0,hideFunctions:Kn,disableNoPeimission:!0,worksheetId:En,fileId:Jt[Vt].fileID,recordId:hn,controlId:In,from:Vn},{openControlAttachmentInNewTab:un})}function Do(Wt){var Jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},Vt=Wt.isPicture,Oe=Wt.isSubList,at=Wt.editable,Ye=Wt.cell,Ft=Ye===void 0?{}:Ye,_t=Wt.attachment,un=_t===void 0?{}:_t,En=Wt.cellInfo,hn=En===void 0?{}:En,xn=Wt.smallThumbnailUrl,In=Wt.onUpdate,Vn=Wt.deleteLocalAttachment,yn=Wt.sheetSwitchPermit,Kn=un.originalFilename,Bn=un.ext,Zn=Bn===void 0?"":Bn,zn=un.filesize,aa=Ft.controlId,Gn=hn.appId,va=hn.viewId,ka=hn.worksheetId,Ca=hn.recordId,Na=hn.disableDownload,Xa=(0,n.useState)(!0),nr=(0,X.Z)(Xa,2),lr=nr[0],dr=nr[1],Ma=!!D().get(window,"shareState.shareId")||(0,Qa.v)(da.RX.recordAttachmentSwitch,yn,va),Hr=Ma&&!Na&&un.fileID&&un.fileID.length===36,Yr=un.previewUrl.replace(/imageView2\/\d\/w\/\d+\/h\/\d+(\/q\/\d+)?/,"imageView2/2/h/160");(0,n.useEffect)(function(){var Sr=new Image;Sr.onload=function(){dr(!1)},Sr.src=Yr},[]);function Nr(){Oe?Vn(un.fileID):(0,ra.W)({appId:Gn,viewId:va,worksheetId:ka,recordId:Ca,controlId:aa,attachment:un},function(Sr,Mr){Sr?alert(_l("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"),2):In(Mr[aa])})}return n.createElement(No,{onClick:function(Mr){return Mr.stopPropagation()}},Vt&&n.createElement(Ao,null,n.createElement(Oo,{src:lr?xn:Yr,className:lr?"loading":""})),n.createElement("div",{className:"fileDetail"},n.createElement("div",{className:"fileName"},Kn+Zn),n.createElement("div",{className:"panelFooter"},n.createElement("span",{className:"fileSize"},(0,ee.sS)(zn)),n.createElement(Dt.Z,{text:n.createElement("span",null,_l("\u5220\u9664")),popupPlacement:"top"},n.createElement("i",{className:K()("icon icon-trash deleteBtn",{disabled:!at}),onClick:at?Nr:function(){}})),Hr&&n.createElement(Dt.Z,{text:n.createElement("span",null,_l("\u4E0B\u8F7D")),popupPlacement:"top"},n.createElement("i",{className:"icon icon-download downloadBtn ThemeHoverColor3",onClick:function(){return(0,ha.tg)({fileId:un.fileID,refId:un.refId,worksheetId:ka,rowId:Ca,controlId:aa})}})))))}function Ja(Wt){var Jt=(0,n.useRef)();return(0,n.useEffect)(function(){return function(){Jt.current&&(Jt.current.src="")}},[]),n.createElement(eo,null,n.createElement(Wo,{className:"hoverMask"}),n.createElement(Fo,null),n.createElement("img",(0,O.default)({},Wt,{ref:Jt})))}function ar(Wt){var Jt=Wt.showFileName,Vt=Wt.isTrash,Oe=Wt.isSubList,at=Wt.editable,Ye=Wt.index,Ft=Wt.viewId,_t=Wt.cell,un=Wt.cellInfo,En=Wt.cellWidth,hn=Wt.fileWidth,xn=Wt.fileHeight,In=Wt.attachments,Vn=Wt.sheetSwitchPermit,yn=Wt.onUpdate,Kn=Wt.deleteLocalAttachment,Bn=un.appId,Zn=un.recordId,zn=un.worksheetId,aa=un.from,Gn=Wt.attachment,va=(0,n.useState)(File.isPicture(Gn.ext)),ka=(0,X.Z)(va,2),Ca=ka[0],Na=ka[1],Xa=(Gn.previewUrl||"").replace(/imageView2\/\d\/w\/\d+\/h\/\d+(\/q\/\d+)?/,"imageView2/2/h/"+xn);return(0,n.useEffect)(function(){Na(File.isPicture(Gn.ext))},[Gn.ext]),n.createElement(N.Z,{action:["hover"],popup:n.createElement(Do,{isPicture:Ca,isSubList:Oe,editable:at&&!(_t.required&&In.length===1&&!Oe),sheetSwitchPermit:Vn,attachment:Gn,smallThumbnailUrl:Xa,cell:_t,cellInfo:un,onUpdate:yn,deleteLocalAttachment:Kn}),getPopupContainer:function(){return document.body},destroyPopupOnHide:!0,mouseEnterDelay:.4,popupAlign:{points:["tl","bl"],offset:[0,4],overflow:{adjustY:!0,adjustX:!0}}},n.createElement(yo,{className:"AttachmentCon",style:{maxWidth:En},onClick:function(lr){D().get(window.shareState,"shareId")||(go({attachments:In,index:Ye,sheetSwitchPermit:Vn,viewId:Ft,disableDownload:un.disableDownload,handleOpenControlAttachmentInNewTab:Vt?void 0:function(dr){(0,ha.Kj)({appId:Bn,recordId:Zn,viewId:Oe?void 0:Ft,worksheetId:zn,controlId:_t.controlId,fileId:dr,getType:aa===21?aa:void 0})},worksheetId:zn,recordId:Zn,fileId:Gn.fileID,controlId:_t.controlId,from:aa}),lr.stopPropagation())}},Ca?n.createElement(Ja,{crossOrigin:"anonymous",role:"presentation",src:Xa,onError:function(){return Na(!1)},style:{width:"auto",height:xn}}):n.createElement(wr,{className:"fileIcon "+(0,ee.kQ)(Gn.ext),title:Gn.originalFilename+(Gn.ext||""),style:{width:hn,height:xn}}),Jt&&n.createElement(Or,{className:"ellipsis",title:Gn.originalFilename+(Gn.ext||"")},n.createElement("span",{className:"name ellipsis"},Gn.originalFilename),n.createElement("span",{className:"ext ellipsis"},Gn.ext||""))))}function Ur(Wt,Jt){var Vt=Wt.isTrash,Oe=Wt.isSubList,at=Wt.from,Ye=at===void 0?1:at,Ft=Wt.tableType,_t=Wt.className,un=Wt.style,En=Wt.projectId,hn=Wt.appId,xn=Wt.worksheetId,In=Wt.viewId,Vn=Wt.sheetSwitchPermit,yn=Wt.isediting,Kn=Wt.error,Bn=Wt.cell,Zn=Bn===void 0?{}:Bn,zn=Wt.rowHeight,aa=zn===void 0?34:zn,Gn=Wt.popupContainer,va=Wt.onClick,ka=Wt.updateEditingStatus,Ca=Wt.updateCell,Na=(0,le.Z)(Wt,["isTrash","isSubList","from","tableType","className","style","projectId","appId","worksheetId","viewId","sheetSwitchPermit","isediting","error","cell","rowHeight","popupContainer","onClick","updateEditingStatus","updateCell"]),Xa=Wt.editable,nr=Zn.value,lr=Zn.strDefault,dr=lr===void 0?"":lr,Ma=Zn.advancedSetting,Hr=Ma===void 0?{}:Ma,Yr=Zn.enumDefault,Nr=dr.split(""),Sr=(0,X.Z)(Nr,2),Mr=Sr[1];Zn.type===14&&Mr==="1"&&(Xa=!1);var $o=(0,n.useState)(yn),xo=(0,X.Z)($o,2),Co=xo[0],no=xo[1],ho=(0,n.useState)(to(nr)),ao=(0,X.Z)(ho,2),Lr=ao[0],Ar=ao[1],Io=(0,n.useState)([]),ro=(0,X.Z)(Io,2),vo=ro[0],Br=ro[1],ir=(0,n.useState)([]),po=(0,X.Z)(ir,2),fi=po[0],ti=po[1],Go=D().isUndefined(Hr.showfilename)?D().includes(["2","3"],Hr.showtype)?"1":"0":Hr.showfilename,Yo=Ye===T.B.COMMON&&Go==="1"||Ye===T.B.CARD&&Lr.length===1&&!File.isPicture(Lr[0].ext),Qo=Go==="1"?24:aa-10,li=Qo*21/24;(0,n.useImperativeHandle)(Jt,function(){return{handleTableKeyDown:function(br){switch(br.key){case"Escape":ka(!1);break;default:}}}});var si=(0,n.useRef)(null);(0,Rt.Z)(si,function(Dr){Dr.target.closest(["#folderSelectDialog_container",".addLinkFileDialog",".attachmentsPreview",".UploadFilesTriggerPanel",".triggerTraget",".folderSelectDialog",".fileDetail"].join(","))||ka(!1)}),(0,n.useEffect)(function(){yn&&no(!0)},[yn]),(0,n.useEffect)(function(){Ar(to(nr))},[nr]);function Cr(Dr){var br=Dr||Lr,wo={},Ro=br.filter(function(Vr){return/^o_/.test(Vr.fileID)&&!Vr.refId}).map(function(Vr){return Vr.origin}),di=br.filter(function(Vr){return/^o_/.test(Vr.fileID)&&Vr.refId}).map(function(Vr){return Vr.origin});wo.attachmentData=br.filter(function(Vr){return!/^o_/.test(Vr.fileID)}).map(function(Vr){return Vr.origin}),wo.attachments=(vo||[]).concat(Ro).map(function(Vr){return(0,O.default)({},Vr,{isEdit:!1})}),wo.knowledgeAtts=(fi||[]).concat(di).map(function(Vr){return(0,O.default)({},Vr,{isEdit:!1})})||[],Ca({editType:1,value:y()(So(wo,Yr))},{callback:function(vi){var pi=[];try{pi=JSON.parse(vi[Zn.controlId])}catch(ni){}Ar(pi.map(function(ni){return{ext:ni.ext,fileID:ni.fileID,originalFilename:ni.originalFilename,previewUrl:ni.previewUrl,refId:ni.refId}}))}}),ka(!1),Br([]),ti([])}var Qr=Lr.map(function(Dr,br){return n.createElement(ar,{showFileName:Yo,isTrash:Vt,isSubList:Oe,editable:Xa,cell:Zn,popupContainer:Gn,attachment:Dr,cellWidth:un.width-12,fileHeight:Qo,fileWidth:li,cellInfo:Wt,index:br,attachments:Lr,sheetSwitchPermit:Vn,viewId:In,onUpdate:function(Ro){Ar(to(Ro))},deleteLocalAttachment:function(Ro){Cr(Lr.filter(function(di){return di.fileID!==Ro}))}})});if(yn){var qr=n.createElement(Jn.Z,{appId:hn,worksheetId:xn,originCount:Lr.length,advancedSetting:Hr,id:Zn.controlId+Na.recordId,projectId:En,noWrap:!0,destroyPopupOnHide:!window.isSafari,popupVisible:Xa&&(Co||!Lr.length),from:Ye,isQiniuUpload:!0,canAddLink:!1,minWidth:130,showAttInfo:!1,attachmentData:[],temporaryData:vo,onTemporaryDataUpdate:function(br){Br(br)},kcAttachmentData:fi,onKcAttachmentDataUpdate:function(br){ti(br)},getPopupContainer:function(){return document.body},onCancel:function(){no(!1)},onClose:function(){no(!1)},onOk:function(){Cr()}},n.createElement(Fr,{ref:si,style:{width:un.width,minHeight:un.height}},Qr,n.createElement(Wr,{style:{width:li,height:Qo,lineHeight:Qo-2+"px"},onClick:function(){return no(!0)}},n.createElement("i",{className:"icon icon-plus"}))));return n.createElement(N.Z,{zIndex:99,popup:qr,getPopupContainer:Gn,popupClassName:"filterTrigger",popupVisible:yn,destroyPopupOnHide:!0,popupAlign:{points:["tl","tl"],overflow:{adjustY:!0}}},n.createElement("div",{className:_t,style:un,onClick:va}))}return n.createElement(ur,{className:K()(_t,{canedit:Xa}),tableType:Ft,style:un,onClick:va},aa===34?n.createElement(Kr,{className:"CutCon"},Qr):Qr,Xa&&n.createElement(Uo,{className:"OperateIcon"},n.createElement("i",{className:"ThemeHoverColor3 icon icon-attachment",onClick:function(br){br.stopPropagation(),ka(!0)}})))}Ur.propTypes={className:j.string,style:j.string,isediting:j.bool,error:j.bool,cell:(0,j.shape)({}),rowHeight:j.number,popupContainer:j.func,onClick:j.func,updateEditingStatus:j.func};const Zr=(0,n.forwardRef)(Ur);var $r=t(20782),oo=t(97373),Po=t(94055),io=t(92054),Zo=t(34694),Xo=t(1502),ai=t(7891),ri=(0,E.Z)([`
  overflow: hidden;
  padding-bottom: 6px;
  &.isediting {
    background-color: #fff;
  }
`],[`
  overflow: hidden;
  padding-bottom: 6px;
  &.isediting {
    background-color: #fff;
  }
`]),bo=(0,E.Z)([`
  position: relative;
  display: inline-block;
  line-height: 21px;
  background-color: rgba(0, 100, 240, 0.08);
  border-radius: 3px;
  padding: 0 10px;
  margin: 6px 0 0 6px;
  max-width: calc(100% - 13px);
  &.isediting.allowRemove {
    padding-right: 24px;
  }
  &.allowOpenRecord:hover {
    color: #2196f3;
    background-color: rgba(33, 150, 243, 0.16);
    cursor: pointer;
  }
  .icon-close {
    cursor: pointer;
    position: absolute;
    right: 4px;
    top: 2px;
    color: #9d9d9d;
    font-size: 16px;
    cursor: pointer;
  }
  &.icon {
    font-size: 14px;
    color: #757575;
    cursor: pointer;
    padding: 0;
    height: 21px;
    width: 21px;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    &:hover {
      background: rgb(33, 150, 243, 0.1);
    }
  }
`],[`
  position: relative;
  display: inline-block;
  line-height: 21px;
  background-color: rgba(0, 100, 240, 0.08);
  border-radius: 3px;
  padding: 0 10px;
  margin: 6px 0 0 6px;
  max-width: calc(100% - 13px);
  &.isediting.allowRemove {
    padding-right: 24px;
  }
  &.allowOpenRecord:hover {
    color: #2196f3;
    background-color: rgba(33, 150, 243, 0.16);
    cursor: pointer;
  }
  .icon-close {
    cursor: pointer;
    position: absolute;
    right: 4px;
    top: 2px;
    color: #9d9d9d;
    font-size: 16px;
    cursor: pointer;
  }
  &.icon {
    font-size: 14px;
    color: #757575;
    cursor: pointer;
    padding: 0;
    height: 21px;
    width: 21px;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    &:hover {
      background: rgb(33, 150, 243, 0.1);
    }
  }
`]);function jo(){var Wt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Jt=arguments[1],Vt=void 0,Oe=document.createElement("div");return Oe.style.position="absolute",Oe.style.background="#fff",Oe.style.zIndex="999",Oe.style.left="-10000px",Oe.style.bottom="-10000px",Oe.style.width=Jt+"px",Oe.style.paddingRight="6px",document.body.appendChild(Oe),Oe.innerHTML=Wt.map(function(at){return'<div style="display:inline-block;font-size: 13px;margin: 6px 0 0 6px;padding: 0 10px;max-width: '+(Jt-46)+'px"><span class="name InlineBlock ellipsis" style="max-width: 100%;">'+at+"</span></div>"}).join(""),Vt=Oe.clientHeight,document.body.removeChild(Oe),Vt}function Jo(){for(var Wt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Vt=Jt.width,Oe=Vt===void 0?100:Vt,at=Jt.maxHeight,Ye=at===void 0?34:at,Ft=Wt.length,_t=!1,un=1;un<=Wt.length;){var En=jo(Wt.slice(0,un),Oe);if(En>Ye){_t=!0,Ft=un-1;break}un++}if(_t){var hn=jo(Wt.slice(0,Ft).concat("="),Oe);return Ft<Wt.length&&hn>Ye?Ft:Ft+1}}var Pr=F.ZP.div(ri),ko=F.ZP.div(bo);function Ho(){var Wt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Jt=Wt.worksheetId,Vt=Wt.control,Oe=Wt.recordId,at=Wt.rowFormData;try{var Ye,Ft=Vt.controlId,_t=typeof at=="function"?at():at,un=D().find(_t,function(xn){return xn.attribute===1}),En={name:un.value,sid:Oe,type:8,sourcevalue:y()((0,O.default)({},D().assign.apply(D(),(0,o.Z)(_t.map(function(xn){return(0,d.default)({},xn.controlId,xn.value)}))),(Ye={},(0,d.default)(Ye,un.controlId,un.value),(0,d.default)(Ye,"rowid",Oe),Ye)))};if(un.type===29)try{var hn=JSON.parse(un.value);En.name=hn[0].name}catch(xn){En.name=""}return{worksheetId:Jt,relateSheetControlId:Ft,value:En}}catch(xn){return}}const Xr=(0,n.forwardRef)(function(Jt,Vt){var Oe=Jt.from,at=Jt.disabled,Ye=Jt.isediting,Ft=Jt.rowIndex,_t=Jt.allowOpenRecord,un=Jt.style,En=un===void 0?{}:un,hn=Jt.control,xn=Jt.worksheetId,In=Jt.recordId,Vn=Jt.rowFormData,yn=Vn===void 0?function(){return[]}:Vn,Kn=Jt.onClose,Bn=Kn===void 0?function(){}:Kn,Zn=Jt.onCloseDialog,zn=Zn===void 0?function(){}:Zn,aa=Jt.onOpenDialog,Gn=aa===void 0?function(){}:aa,va=(0,n.useContext)(M.Z)||{},ka=va.rows,Ca=(0,n.useState)(!1),Na=(0,X.Z)(Ca,2),Xa=Na[0],nr=Na[1],lr=(0,n.useState)(Jt.count||0),dr=(0,X.Z)(lr,2),Ma=dr[0],Hr=dr[1],Yr=(0,n.useState)(Jt.records||[]),Nr=(0,X.Z)(Yr,2),Sr=Nr[0],Mr=Nr[1],$o=(0,n.useState)(Jt.addedIds||[]),xo=(0,X.Z)($o,2),Co=xo[0],no=xo[1],ho=(0,n.useState)(Jt.deletedIds||[]),ao=(0,X.Z)(ho,2),Lr=ao[0],Ar=ao[1],Io=(0,n.useRef)(null),ro=(0,n.useRef)({}),vo=hn.enumDefault2!==1&&hn.enumDefault2!==11&&!window.isPublicWorksheet,Br=hn.enumDefault===2,ir=hn.advancedSetting.allowcancel!=="0"||!Br,po=hn.enumDefault2!==10&&hn.enumDefault2!==11,fi=hn.enumDefault===2?Ma<50:Sr.length===0,ti=Jo(Sr.map(function(Cr){return(0,c.Nx)(hn,Cr)}),{width:En.width,maxHeight:En.height});(0,Rt.Z)(Io,function(Cr){ro.current.isActive||Bn({deletedIds:Lr,addedIds:Co,records:Sr,count:Ma,changed:Xa})});function Go(){ro.current.isActive=!0,Gn()}function Yo(){ro.current.isActive=!1,zn()}(0,n.useEffect)(function(){Mr(Jt.records)},[y()(Jt.records.map(function(Cr){return Cr.rowid}))]);function Qo(Cr){var Qr=Cr.appId,qr=Cr.worksheetId,Dr=Cr.recordId,br=Cr.viewId;Go(),(0,Xo.L)({appId:Qr,worksheetId:qr,recordId:Dr,viewId:br,relationWorksheetId:Jt.worksheetId,onClose:Yo})}function li(){Go(),(0,io.P)({from:Oe,disabled:at||!ir,title:hn.controlName,worksheetId:xn,controlId:hn.controlId,recordId:In,control:hn,controls:hn.relationControls,hiddenRecordIds:Lr,onlySearchLoad:!1,sourceEntityName:hn.sourceEntityName,allowlink:(hn.advancedSetting||{}).allowlink,onCardClick:!_t||!In?function(){}:function(Cr){Qo({viewId:D().get(hn,"advancedSetting.openview")||hn.viewId,worksheetId:hn.dataSource,recordId:Cr.rowid})},onDelete:function(Qr){nr(!0),Mr(Sr.filter(function(qr){return qr.rowid!==Qr.rowid})),Ar([].concat((0,o.Z)(Lr),[Qr.rowid])),Hr(Ma-1)},onCancel:Yo})}function si(){var Cr=this;if(!(!po||!fi)){Go();var Qr=hn.unique||hn.uniqueInRecord?(ka||[]).map(function(qr){return D().get(safeParse(qr[hn.controlId],"array"),"0.sid")}).filter(D().identity):[];(0,ai.selectRecord)({multiple:Br,control:hn,allowNewRecord:vo,viewId:hn.viewId,parentWorksheetId:xn,controlId:hn.controlId,recordId:In,relateSheetId:hn.dataSource,filterRowIds:Sr.map(function(qr){return qr.rowid}).concat(Qr),selectedCount:Ma,maxCount:50,formData:D().isFunction(yn)?yn():yn,defaultRelatedSheet:Ho({worksheetId:xn,control:hn,recordId:In,rowFormData:yn}),onOk:function(){var qr=(0,te.Z)(L().mark(function Dr(br){return L().wrap(function(Ro){for(;;)switch(Ro.prev=Ro.next){case 0:nr(!0),Mr(Sr.concat(br)),no([].concat((0,o.Z)(Co),(0,o.Z)(br.map(function(di){return di.rowid})))),Hr(Ma+br.length);case 4:case"end":return Ro.stop()}},Dr,Cr)}));return function(br){return qr.apply(this,arguments)}}(),onClose:Yo})}}return(0,n.useImperativeHandle)(Vt,function(){return{searchRecords:li,selectRecords:si}}),n.createElement(Pr,{ref:Io,className:K()("cellRelateRecordTags",{isediting:Ye,cellControlEdittingStatus:Ye}),style:Ye?(0,O.default)({width:En.width},Ft===0&&En.height<56?{height:56,overflow:"auto"}:{minHeight:En.height}):{width:En.width}},(!ti||ti>=Ma||Ye?Sr:Sr.slice(0,ti-1)).map(function(Cr,Qr){var qr=(0,c.Nx)(hn,Cr);return n.createElement(ko,{className:K()("ellipsis",{isediting:Ye,allowOpenRecord:_t&&Cr.rowid,allowRemove:ir}),key:Qr,title:qr,onClick:function(br){Cr.rowid&&(br.stopPropagation(),_t&&((0,ee.Ye)("worksheetRecord",hn.dataSource,{rowId:Cr.rowid}),Qo({viewId:D().get(hn,"advancedSetting.openview")||hn.viewId,worksheetId:hn.dataSource,recordId:Cr.rowid})))}},qr,Ye&&ir&&n.createElement("i",{className:"icon-close",onClick:function(br){br.stopPropagation(),nr(!0),Mr(Sr.filter(function(wo){return wo.rowid!==Cr.rowid})),Ar([].concat((0,o.Z)(Lr),[Cr.rowid])),Hr(Ma-1)}}))}),n.createElement(n.Fragment,null,Sr.length<Ma&&n.createElement(Po.default,{title:Ye?_l("\u67E5\u770B\u5168\u90E8(Shift+Enter)"):void 0,placement:"bottom"},n.createElement(ko,{className:"icon moreRecords",onClick:function(Qr){Qr.stopPropagation(),li()}},n.createElement("i",{className:"icon icon-more_horiz"}))),Ye&&(Br?Ma<50:Sr.length===0)&&(vo||po)&&n.createElement(ko,{className:"icon selectRecords",onClick:function(Qr){Qr.stopPropagation(),po?si():vo&&(Go(),(0,Zo.Z)({showFillNext:!0,directAdd:!0,className:"worksheetRelateNewRecordFromTags",worksheetId:hn.dataSource,addType:2,entityName:hn.sourceEntityName,filterRelateSheetIds:[hn.dataSource],filterRelatesheetControlIds:[hn.controlId],masterRecordRowId:In,defaultRelatedSheet:Ho({worksheetId:xn,control:hn,recordId:In,rowFormData:yn}),onAdd:function(Dr){nr(!0),Mr(Sr.concat(Dr)),no([].concat((0,o.Z)(Co),[Dr.rowid])),Hr(Ma+1),Yo()},onCloseDialog:Yo}))}},n.createElement("i",{className:"icon icon-plus"}))))});var _o=t(87889),oi=t(86179),qo=t(57559),Vo=t(79506),ci,ui,Jr,zo,ei,ii=(0,E.Z)([`
  display: inline-block;
  line-height: 21px;
  font-size: 13px;
  background-color: rgba(0, 100, 240, 0.08);
  padding: 0 10px;
  border-radius: 3px;
  margin-right: 6px;
`],[`
  display: inline-block;
  line-height: 21px;
  font-size: 13px;
  background-color: rgba(0, 100, 240, 0.08);
  padding: 0 10px;
  border-radius: 3px;
  margin-right: 6px;
`]);function Mo(Wt,Jt,Vt,Oe,at){var Ye={};return Object.keys(Oe).forEach(function(Ft){Ye[Ft]=Oe[Ft]}),Ye.enumerable=!!Ye.enumerable,Ye.configurable=!!Ye.configurable,("value"in Ye||Ye.initializer)&&(Ye.writable=!0),Ye=Vt.slice().reverse().reduce(function(Ft,_t){return _t(Wt,Jt,Ft)||Ft},Ye),at&&Ye.initializer!==void 0&&(Ye.value=Ye.initializer?Ye.initializer.call(at):void 0,Ye.initializer=void 0),Ye.initializer===void 0&&(Object.defineProperty(Wt,Jt,Ye),Ye=null),Ye}var Sn=F.ZP.div(ii),Hn=(Jr=(ei=zo=function(Wt){(0,C.default)(Jt,Wt);function Jt(Vt){(0,U.default)(this,Jt);var Oe=(0,V.default)(this,(Jt.__proto__||H()(Jt)).call(this,Vt));Oe.dropdownRef=n.createRef(),Oe.relateRecordTagsPopup=(0,n.createRef)();var at=Vt.cell.value?Oe.parseValue(Vt.cell.value):[];return Oe.state={records:at,dialogActive:!1},Oe}return(0,f.default)(Jt,[{key:"componentWillReceiveProps",value:function(Oe){this.props.cell.value!==Oe.cell.value&&this.setState({records:this.parseValue(Oe.cell.value)})}},{key:"shouldComponentUpdate",value:function(Oe){return this.props.isediting!==Oe.isediting||Oe.from===4&&this.props.cell.value!==Oe.cell.value||D().isEqual(this.props.cell.style,Oe.cell.style)}},{key:"parseValue",value:function(Oe){if(!Oe)return[];try{return JSON.parse(Oe).map(function(at){return JSON.parse(at.sourcevalue)})}catch(at){return[]}}},{key:"handleTableKeyDown",value:function(Oe){var at=this,Ye=this.props,Ft=Ye.tableId,_t=Ye.count,un=_t===void 0?0:_t,En=Ye.recordId,hn=Ye.cell,xn=Ye.isediting,In=Ye.updateCell,Vn=Ye.updateEditingStatus,yn=this.state.records,Kn=hn.enumDefault===2?un<50:yn.length===0;switch(Oe.key){case"Escape":if(this.state.dialogActive)return;this.handleVisibleChange(!1);break;case"Enter":xn&&this.relateRecordTagsPopup.current&&(Oe.shiftKey?this.relateRecordTagsPopup.current.searchRecords():Kn&&this.relateRecordTagsPopup.current.selectRecords());break;default:(function(){!Oe.isInputValue&&(xn||!Oe.key||!(0,k.bP)(Oe.key))||(Vn(!0),setTimeout(function(){var Bn=document.querySelector(".cell-"+Ft+"-"+En+"-"+hn.controlId+" input");at.dropdownRef.current&&at.dropdownRef.current.setState({keywords:Bn.value=Oe.key})},100),Oe.stopPropagation(),Oe.preventDefault())})()}}},{key:"getReordsLength",value:function(Oe){var at=0;if(/^\[(.*)\]$/.test(Oe))try{at=JSON.parse(Oe).length}catch(Ye){}else at=parseInt(Oe,10);return at}},{key:"renderSelected",value:function(){var Oe=this.props,at=Oe.isMobileTable,Ye=Oe.cell,Ft=Ye===void 0?{}:Ye,_t=Ft.relationControls,un=_t===void 0?[]:_t,En=D().find(un,function(xn){return xn.attribute===1}),hn=[];if(!En)return null;if(at)return hn=this.state.records,hn.map(function(xn,In){return n.createElement(Sn,{key:In},(0,c.Nx)(Ft,xn))});try{hn=JSON.parse(Ft.value)}catch(xn){}return hn.map(function(xn,In){return n.createElement(Sn,{key:In},(0,l.Z)((0,O.default)({},En,{value:xn.name})))})}},{key:"handleVisibleChange",value:function(Oe){var at=this.props,Ye=at.cell,Ft=at.updateEditingStatus,_t=at.updateCell,un=at.onValidate;if(!Oe&&this.changed){var En=y()((0,k.VM)(Ye.relationControls,this.records).map(function(xn){return(0,O.default)({},D().pick(xn,["sid","name","sourcevalue","row"]))})),hn=un(En,!0);if(hn.errorType==="REQUIRED"){this.changed=!1,this.setState({records:this.parseValue(this.props.cell.value)||[]}),Ft(!1),alert(_l("%0\u4E0D\u80FD\u4E3A\u7A7A",Ye.controlName),3);return}_t({value:En}),this.changed=!1}Ft(Oe)}},{key:"handleRelateRecordTagChange",value:function(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},at=Oe.changed,Ye=Oe.addedIds,Ft=Oe.deletedIds,_t=Oe.records,un=_t===void 0?[]:_t,En=Oe.count,hn=this.props,xn=hn.cell,In=hn.updateEditingStatus,Vn=hn.updateCell,yn=hn.onValidate;if(!at){In(!1);return}var Kn=un.length?y()((0,k.VM)(xn.relationControls,un,{addedIds:Ye,deletedIds:Ft})):"deleteRowIds: "+Ft.join(","),Bn=yn(Kn,!0);if(Bn.errorType==="REQUIRED"){this.changed=!1,this.setState({records:this.parseValue(this.props.cell.value)||[]}),In(!1),alert(_l("%0\u4E0D\u80FD\u4E3A\u7A7A",xn.controlName),3);return}if(this.isSubList)Vn({value:Kn});else{var Zn=(0,c.jz)((0,O.default)({},xn,{value:Kn}),{needSourceValue:!0});Vn({editType:Zn.editType,value:Zn.value})}In(!1)}},{key:"render",value:function(){var Oe=this,at=this.props,Ye=at.projectId,Ft=at.appId,_t=at.viewId,un=at.tableId,En=at.isTrash,hn=at.singleLine,xn=at.className,In=at.style,Vn=at.rowIndex,yn=at.from,Kn=at.rowFormData,Bn=Kn===void 0?function(){return[]}:Kn,Zn=at.recordId,zn=at.worksheetId,aa=at.rowHeightEnum,Gn=aa===void 0?0:aa,va=at.sheetSwitchPermit,ka=at.count,Ca=at.cell,Na=at.editable,Xa=at.isediting,nr=at.updateEditingStatus,lr=at.popupContainer,dr=at.onClick,Ma=this.isSubList?this:{},Hr=Ma.addedIds,Yr=Hr===void 0?[]:Hr,Nr=Ma.deletedIds,Sr=Nr===void 0?[]:Nr,Mr=this.state.records,$o=this.context||{},xo=$o.isRequestingRelationControls,Co=Ca.advancedSetting,no=Co===void 0?{}:Co,ho=Ca.type===34,ao=no.showtype,Lr=no.allowlink,Ar=no.ddset,Io=yn!==21&&!En&&zn&&Zn,ro=this.getReordsLength(Ca.value),vo=ro>=1e3?"999+":ro;return ho&&ro>=1e3&&(vo=1e3),xo?n.createElement("div",{className:xn,style:In,onClick:dr}):(0,G.includes)([I.wn.LIST,I.wn.TABLE,I.wn.TAB_TABLE],parseInt(ao,10))||ho?n.createElement("div",{className:xn,style:In,onClick:dr},ro>0&&n.createElement("div",{className:K()("cellRelateRecordMultiple",{allowOpenList:Io}),onClick:function(ir){!Io||(0,ee.Q9)()||(ir.stopPropagation(),ho?(0,oi.X)({openFrom:"cell",allowEdit:Na&&yn!==4,title:(0,c.xI)(D().isFunction(Bn)?Bn():Bn),entityName:Ca.sourceEntityName,appId:Ft,worksheetId:zn,viewId:_t,from:yn,control:(0,O.default)({},Ca,{isDraft:yn===21}),controls:Ca.relationControls,recordId:Zn,sheetSwitchPermit:va,masterData:{worksheetId:zn,formData:(D().isFunction(Bn)?Bn():Bn).map(function(po){return D().pick(po,["controlId","type","value","options"])}).filter(function(po){return!!po.value})},projectId:Ye}):(0,qo.$)({openFrom:"cell",title:(0,c.xI)(D().isFunction(Bn)?Bn():Bn),appId:Ft,viewId:_t,worksheetId:zn,recordId:Zn,control:(0,O.default)({},Ca,{isDraft:yn===21}),allowEdit:Na,formdata:D().isFunction(Bn)?Bn():Bn,onUpdateCount:function(){k.uY.emit("RELOAD_RECORD_INFO",{worksheetId:zn,recordId:Zn})}}))}},n.createElement("i",{className:K()("icon",ho?"icon-table":"icon-link_record")}),vo)):yn===4||yn===21&&(0,ee.Q9)()?this.renderSelected():parseInt(ao,10)===I.wn.DROPDOWN?n.createElement(u,{className:K()(xn,"cellRelateRecord",{canedit:Na,focusInput:Na}),style:In,conRef:this.cell,hideOutline:!0,clickAwayWrap:Xa,onClick:dr,iconName:"arrow-down-border",isediting:Xa,onIconClick:function(){return nr(!0)}},n.createElement(_o.Z,{ref:this.dropdownRef,insheet:!0,disabled:!Na,selected:Mr,cellFrom:yn,control:(0,O.default)({},Ca,{formData:Bn,worksheetId:zn,recordId:Zn}),formData:Bn,viewId:Ca.viewId,worksheetId:zn,recordId:Zn,dataSource:Ca.dataSource,entityName:Ca.sourceEntityName,enumDefault2:Ca.enumDefault2,parentWorksheetId:zn,controlId:Ca.controlId,controls:Ca.relationControls,coverCid:Ca.coverCid,required:Ca.required,showControls:Ca.showControls,allowOpenRecord:Lr==="1",showCoverAndControls:Ar==="1"||parseInt(ao,10)===I.wn.CARD,isediting:Xa,popupContainer:function(){return document.body},multiple:Ca.enumDefault===2,onVisibleChange:this.handleVisibleChange,selectedClassName:K()("sheetview","cell-"+un+"-"+Zn+"-"+Ca.controlId,{canedit:Na,cellControlEdittingStatus:Xa,singleLine:hn}),selectedStyle:{width:In.width,minHeight:In.height,borderRadius:0},onChange:function(ir){Oe.records=ir,Oe.changed=!0,Oe.setState({records:ir,changed:!0})}})):parseInt(ao,10)===I.wn.CARD?(Mr=/^temp|default/.test(Zn)?Mr:Mr.slice(0,[5,10][Gn]||20),Xa?n.createElement(N.Z,{zIndex:99,popup:n.createElement(Xr,{from:yn,rowIndex:Vn,ref:this.relateRecordTagsPopup,isediting:!0,count:ka,style:In,control:Ca,records:Mr,addedIds:Yr,deletedIds:Sr,recordId:Zn,worksheetId:zn,allowOpenRecord:Lr==="1",rowFormData:Bn,onClose:this.handleRelateRecordTagChange,onCloseDialog:function(){setTimeout(function(){Oe.setState({dialogActive:!1})},100)},onOpenDialog:function(){return Oe.setState({dialogActive:!0})}}),getPopupContainer:function(){return Vn===0&&Oe.isSubList?document.querySelector(".worksheetTableComp.id-"+un+"-id")||document.body:lr()},popupClassName:"filterTrigger",popupVisible:Xa,destroyPopupOnHide:!0,popupAlign:{points:["tl","tl"],overflow:{adjustY:!0}}},n.createElement("div",{className:xn,style:In,onClick:dr})):n.createElement(u,{className:K()(xn,"cellRelateRecord",{canedit:Na}),style:In,conRef:this.cell,clickAwayWrap:Xa,onClick:dr,iconName:"link_record",isediting:Xa,onIconClick:function(){return nr(!0)}},n.createElement(Xr,{from:yn,disabled:!0,count:ka,style:In,control:Ca,records:Mr,addedIds:Yr,deletedIds:Sr,recordId:Zn,worksheetId:zn,allowOpenRecord:Lr==="1"}))):n.createElement("span",null)}},{key:"isSubList",get:function(){var Oe=this.props.tableFromModule;return Oe===I.i7.SUBLIST}},{key:"addedIds",get:function(){var Oe=safeParse(D().get(this,"props.cell.value"),"array");return Oe.filter(function(at){return at.isNew})}},{key:"deletedIds",get:function(){var Oe=safeParse(D().get(this,"props.cell.value"),"array");return(D().get(Oe,"0.deletedIds")||[]).filter(function(at){return!D().find(Oe,function(Ye){return Ye.sid===at})})}}]),Jt}(n.Component),zo.contextType=$r.Z,zo.propTypes={className:A().string,style:A().shape({}),singleLine:A().bool,editable:A().bool,isediting:A().bool,popupContainer:A().any,cell:A().shape({value:A().string}),updateCell:A().func,updateEditingStatus:A().func,onClick:A().func},ei),Mo(Jr.prototype,"handleTableKeyDown",[Vo.Z],g()(Jr.prototype,"handleTableKeyDown"),Jr.prototype),Mo(Jr.prototype,"handleVisibleChange",[Vo.Z],g()(Jr.prototype,"handleVisibleChange"),Jr.prototype),Mo(Jr.prototype,"handleRelateRecordTagChange",[Vo.Z],g()(Jr.prototype,"handleRelateRecordTagChange"),Jr.prototype),Jr),Un=t(7374),Nn,Tn,Pn,jn,ta;function Qn(Wt,Jt,Vt,Oe,at){var Ye={};return Object.keys(Oe).forEach(function(Ft){Ye[Ft]=Oe[Ft]}),Ye.enumerable=!!Ye.enumerable,Ye.configurable=!!Ye.configurable,("value"in Ye||Ye.initializer)&&(Ye.writable=!0),Ye=Vt.slice().reverse().reduce(function(Ft,_t){return _t(Wt,Jt,Ft)||Ft},Ye),at&&Ye.initializer!==void 0&&(Ye.value=Ye.initializer?Ye.initializer.call(at):void 0,Ye.initializer=void 0),Ye.initializer===void 0&&(Object.defineProperty(Wt,Jt,Ye),Ye=null),Ye}var ca=(Pn=(ta=jn=function(Wt){(0,C.default)(Jt,Wt);function Jt(Vt){(0,U.default)(this,Jt);var Oe=(0,V.default)(this,(Jt.__proto__||H()(Jt)).call(this,Vt));return Oe.editIcon=n.createRef(),Oe.editRef=n.createRef(),Oe.state={value:Vt.cell.value},Oe}return(0,f.default)(Jt,[{key:"componentWillReceiveProps",value:function(Oe){Oe.cell.value!==this.props.cell.value&&this.setState({value:Oe.cell.value})}},{key:"handleTableKeyDown",value:function(Oe){var at=this.props.updateEditingStatus;switch(Oe.key){case"Escape":at(!1);break;case"Enter":D().get(this,"editRef.current.state.isEdit")&&D().isFunction(D().get(this,"editRef.current.saveSignature"))&&D().get(this,"editRef.current.saveSignature")();break;default:break}}},{key:"handleChange",value:function(Oe){var at=this.props,Ye=at.updateCell,Ft=at.updateEditingStatus;Ye({value:Oe}),this.setState({value:Oe}),Ft(!1)}},{key:"previewAttachment",value:function(Oe){var at=this.props.cell.controlName;(0,Ia.Z)({index:0,attachments:[{name:at+".png",path:Oe,previewAttachmentType:"QINIU"}],showThumbnail:!0,hideFunctions:["editFileName"]})}},{key:"renderCommon",value:function(){var Oe=this,at=this.props.rowHeight,Ye=at===void 0?34:at,Ft=this.state.value;return n.createElement("div",{className:"cellAttachment cellAttachmentSignature ellipsis Hand",style:{height:Ye-10}},n.createElement("img",{style:{height:Ye-10},crossOrigin:"anonymous",className:"thumbnail",role:"presentation",src:Ft,onClick:function(un){Oe.previewAttachment(Ft),un.stopPropagation()}}))}},{key:"render",value:function(){var Oe=this.props,at=Oe.projectId,Ye=Oe.appId,Ft=Oe.worksheetId,_t=Oe.from,un=Oe.cell,En=Oe.tableFromModule,hn=Oe.className,xn=Oe.style,In=Oe.popupContainer,Vn=Oe.editable,yn=Oe.isediting,Kn=Oe.updateEditingStatus,Bn=this.state.value;return _t===T.B.CARD||_t===T.B.DRAFT&&(0,ee.Q9)()?Bn?n.createElement("div",{className:"cellAttachments cellControl"}," ",this.renderCommon()," "):n.createElement("span",null):n.createElement(Un.Z,{projectId:at,appId:Ye,worksheetId:Ft,ref:this.editRef,onlySignature:!0,isEdit:!0,advancedSetting:un.advancedSetting,destroyPopupOnHide:!window.isSafari,popupAlign:{offset:[1,2],points:["tl","bl"],overflow:{adjustX:!0,adjustY:!0}},visible:yn,popupContainer:En===I.i7.SUBLIST||En===I.i7.RELATE_RECORD?document.body:In(),onClose:function(){Kn(!1)},onChange:this.handleChange},n.createElement(u,{onClick:this.props.onClick,className:K()(hn,{canedit:Vn}),style:xn,iconRef:this.editIcon,iconName:"hr_edit",iconClassName:"dateEditIcon",isediting:yn,onIconClick:function(){Kn(!0)}},!!Bn&&n.createElement("div",{className:"cellAttachments cellControl"}," ",this.renderCommon()," ")))}}]),Jt}(n.Component),jn.propTypes={className:A().string,style:A().shape({}),rowHeight:A().number,editable:A().bool,isediting:A().bool,updateCell:A().func,popupContainer:A().any,cell:A().shape({value:A().string}),value:A().string,updateEditingStatus:A().func,onClick:A().func},ta),Qn(Pn.prototype,"handleTableKeyDown",[S.Nj],g()(Pn.prototype,"handleTableKeyDown"),Pn.prototype),Qn(Pn.prototype,"handleChange",[S.Nj],g()(Pn.prototype,"handleChange"),Pn.prototype),Pn),la=t(18909),sa=t(40433),ma,_n,Ea,qa,Za;function ja(Wt,Jt,Vt,Oe,at){var Ye={};return Object.keys(Oe).forEach(function(Ft){Ye[Ft]=Oe[Ft]}),Ye.enumerable=!!Ye.enumerable,Ye.configurable=!!Ye.configurable,("value"in Ye||Ye.initializer)&&(Ye.writable=!0),Ye=Vt.slice().reverse().reduce(function(Ft,_t){return _t(Wt,Jt,Ft)||Ft},Ye),at&&Ye.initializer!==void 0&&(Ye.value=Ye.initializer?Ye.initializer.call(at):void 0,Ye.initializer=void 0),Ye.initializer===void 0&&(Object.defineProperty(Wt,Jt,Ye),Ye=null),Ye}var Aa=(0,z.Z)(h.Z),fa=(Ea=(Za=qa=function(Wt){(0,C.default)(Jt,Wt);function Jt(Vt){(0,U.default)(this,Jt);var Oe=(0,V.default)(this,(Jt.__proto__||H()(Jt)).call(this,Vt));return Oe.editRef=n.createRef(),Oe.con=n.createRef(),Oe.input=n.createRef(),Oe.state={value:Vt.cell.value,tempValue:Vt.cell.value,forceShowFullValue:_.get(Vt.cell,"advancedSetting.datamask")!=="1"},Oe}return(0,f.default)(Jt,[{key:"componentWillReceiveProps",value:function(Oe){Oe.cell.value!==this.props.cell.value&&this.setState({value:Oe.cell.value})}},{key:"componentDidUpdate",value:function(Oe){!Oe.isediting&&this.props.isediting&&this.focus()}},{key:"handleExit",value:function(){var Oe=this.props,at=Oe.cell,Ye=Oe.updateEditingStatus;Ye(!1),this.setState({value:at.value,tempValue:at.value})}},{key:"handleEdit",value:function(Oe){var at=this.props.updateEditingStatus;Oe.stopPropagation(),at(!0),this.listened}},{key:"handleBlur",value:function(Oe){var at=this.props,Ye=at.error,Ft=at.updateCell,_t=at.updateEditingStatus,un=this.state,En=un.tempValue,hn=un.value;if(Ye){this.handleExit();return}if(En===hn){_t(!1);return}Ft({value:En}),this.setState({value:En}),_t(!1),this.lastBlurTime=null}},{key:"focus",value:function(Oe){var at=this;setTimeout(function(){at.editPhoneObj&&at.editPhoneObj.telInput.focus()},Oe||100)}},{key:"handleChange",value:function(){var Vt=(0,te.Z)(L().mark(function at(Ye){var Ft,_t,un;return L().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:Ft=this.props,_t=Ft.cell,un=Ft.onValidate,un(Ye),this.setState({tempValue:Ye});case 3:case"end":return hn.stop()}},at,this)}));function Oe(at){return Vt.apply(this,arguments)}return Oe}()},{key:"handleTableKeyDown",value:function(Oe){var at=this,Ye=this.props,Ft=Ye.cell,_t=Ye.updateEditingStatus,un=function(hn){_t(!0,function(){setTimeout(function(){var xn=at.editRef.current.input;xn&&(xn.value=hn,at.handleChange(hn))},10)})};if(Oe.key==="v"&&(Oe.ctrlKey||Oe.metaKey)){window.tempCopyForSheetView?un(window.tempCopyForSheetView):navigator.clipboard.readText().then(un);return}switch(Oe.key){default:(function(){var En=Ft.type===6||Ft.type===8?(0,ee.pu)(Oe.key,!1):Oe.key;!En||!(0,k.bP)(Oe.key)||_t(!0,function(){setTimeout(function(){var hn=at.editRef.current.input;hn&&(hn.value=En,at.handleChange(En))},10),Oe.stopPropagation(),Oe.preventDefault()})})();break}}},{key:"handleKeydown",value:function(Oe){var at=this.props,Ye=at.tableId,Ft=at.cell,_t=at.updateEditingStatus;Oe.keyCode===27?(_t(!1),this.setState({value:Ft.value}),Oe.preventDefault()):Oe.keyCode===13&&(Oe.preventDefault(),this.handleBlur(),setTimeout(function(){return k.uY.emit("TRIGGER_TABLE_KEYDOWN_"+Ye,{keyCode:40,stopPropagation:function(){},preventDefault:function(){}})},100))}},{key:"handleUnMask",value:function(Oe){this.masked&&(Oe.stopPropagation(),this.setState({forceShowFullValue:!0}))}},{key:"render",value:function(){var Oe=this.props,at=Oe.tableType,Ye=Oe.className,Ft=Oe.style,_t=Oe.error,un=Oe.rowIndex,En=Oe.from,hn=Oe.needLineLimit,xn=Oe.cell,In=Oe.popupContainer,Vn=Oe.editable,yn=Oe.isediting,Kn=Oe.onClick,Bn=this.state,Zn=Bn.value,zn=Bn.forceShowFullValue,aa=En===T.B.CARD,Gn={ref:this.input,value:Zn,style:{width:Ft.width,height:Ft.height,padding:"7px 0px"},onClick:function(Ca){return Ca.stopPropagation()}},va=n.createElement(Aa,(0,O.default)({},Gn,{onClickAwayExceptions:[this.editIcon&&this.editIcon.current],onClickAway:this.handleBlur}),n.createElement(sa.Z,{inputClassName:"cellMobileInput stopPropagation",enumDefault:xn.enumDefault,advancedSetting:xn.advancedSetting,value:Zn,ref:this.editRef,isCell:!0,onChange:this.handleChange,onInputKeydown:this.handleKeydown}),_t&&n.createElement(m,{error:typeof _t=="string"?_t:_l("\u4E0D\u662F\u6709\u6548\u7684\u7535\u8BDD\u53F7\u7801"),pos:un===0?"bottom":"top"}));return n.createElement(N.Z,{destroyPopupOnHide:!window.isSafari,action:["click"],popup:va,getPopupContainer:window.isSafari?void 0:xn.enumDefault===0?function(){return document.body}:In,popupClassName:K()("filterTrigger cellControlMobilePhoneEdit scrollInTable",{cellControlEdittingStatus:at!=="classic",cellControlErrorStatus:_t}),popupVisible:yn,popupAlign:{points:["tl","tl"],offset:[0,0],overflow:{adjustY:!0}}},n.createElement(u,{hideOutline:!0,onClick:Kn,className:K()(Ye,{canedit:Vn,masked:this.masked&&!aa,maskHoverTheme:this.masked&&aa&&!zn}),style:Ft,iconName:"hr_edit",isediting:yn,onIconClick:this.handleEdit},!yn&&!!Zn&&n.createElement("span",{className:K()("ellipsis",{linelimit:hn}),onClick:this.handleUnMask},(0,l.Z)((0,O.default)({},xn,{value:Zn}),{noMask:zn})),aa&&this.masked&&!zn&&n.createElement("i",{className:"icon icon-eye_off Hand maskData Font16 Gray_bd mLeft4 mTop4 hoverShow",style:{verticalAlign:"text-top"},onClick:this.handleUnMask}),at==="classic"&&!yn&&!Zn&&xn.hint&&n.createElement("span",{className:"guideText Gray_bd hide"},xn.hint)))}},{key:"editPhoneObj",get:function(){try{return this.editRef.current.iti}catch(Oe){return}}},{key:"masked",get:function(){var Oe=this.props,at=Oe.cell,Ye=Oe.isCharge;return this.state.value&&(Ye||_.get(at,"advancedSetting.isdecrypt")==="1")}}]),Jt}(n.Component),qa.propTypes={className:A().string,style:A().shape({}),editable:A().bool,isediting:A().bool,updateCell:A().func,popupContainer:A().any,cell:A().shape({value:A().string}),value:A().string,needLineLimit:A().bool,updateEditingStatus:A().func,onClick:A().func},Za),ja(Ea.prototype,"handleExit",[S.Nj],g()(Ea.prototype,"handleExit"),Ea.prototype),ja(Ea.prototype,"handleEdit",[S.Nj],g()(Ea.prototype,"handleEdit"),Ea.prototype),ja(Ea.prototype,"handleBlur",[S.Nj],g()(Ea.prototype,"handleBlur"),Ea.prototype),ja(Ea.prototype,"handleChange",[S.Nj],g()(Ea.prototype,"handleChange"),Ea.prototype),ja(Ea.prototype,"handleTableKeyDown",[S.Nj],g()(Ea.prototype,"handleTableKeyDown"),Ea.prototype),ja(Ea.prototype,"handleKeydown",[S.Nj],g()(Ea.prototype,"handleKeydown"),Ea.prototype),ja(Ea.prototype,"handleUnMask",[S.Nj],g()(Ea.prototype,"handleUnMask"),Ea.prototype),Ea),Wa=t(68461),za,ya,na,Da,Ga;function Oa(Wt,Jt,Vt,Oe,at){var Ye={};return Object.keys(Oe).forEach(function(Ft){Ye[Ft]=Oe[Ft]}),Ye.enumerable=!!Ye.enumerable,Ye.configurable=!!Ye.configurable,("value"in Ye||Ye.initializer)&&(Ye.writable=!0),Ye=Vt.slice().reverse().reduce(function(Ft,_t){return _t(Wt,Jt,Ft)||Ft},Ye),at&&Ye.initializer!==void 0&&(Ye.value=Ye.initializer?Ye.initializer.call(at):void 0,Ye.initializer=void 0),Ye.initializer===void 0&&(Object.defineProperty(Wt,Jt,Ye),Ye=null),Ye}var _r=(na=(Ga=Da=function(Wt){(0,C.default)(Jt,Wt);function Jt(Vt){(0,U.default)(this,Jt);var Oe=(0,V.default)(this,(Jt.__proto__||H()(Jt)).call(this,Vt));return Oe.con=n.createRef(),Oe.cell=n.createRef(),Oe.state={value:Vt.cell.value},Oe}return(0,f.default)(Jt,[{key:"componentWillReceiveProps",value:function(Oe){Oe.cell.value!==this.props.cell.value&&this.setState({value:Oe.cell.value})}},{key:"handleTableKeyDown",value:function(Oe){var at=this.props,Ye=at.tableId,Ft=at.recordId,_t=at.cell,un=at.isediting,En=at.updateCell,hn=at.updateEditingStatus;switch(Oe.key){default:(function(){!Oe.isInputValue&&(un||!Oe.key||!(0,k.bP)(Oe.key))||(hn(!0,function(){}),Oe.stopPropagation(),Oe.preventDefault())})()}}},{key:"handleChange",value:function(Oe){this.value=Oe,this.setState({value:Oe})}},{key:"handleClear",value:function(){this.handleChange("")}},{key:"render",value:function(){var Oe=this,at=this.props,Ye=at.from,Ft=at.className,_t=at.style,un=at.error,En=at.cell,hn=at.editable,xn=at.isediting,In=at.updateEditingStatus,Vn=at.updateCell,yn=at.onClick,Kn=at.worksheetId,Bn=at.rowFormData,Zn=Bn===void 0?function(){}:Bn,zn=this.state.value;return n.createElement(u,{conRef:this.con,onClick:yn,className:K()(Ft,"cellControlCascader",{canedit:hn,focusInput:hn}),style:_t,isediting:xn,hideOutline:!0,iconName:"arrow-down-border",onIconClick:function(){return In(!0)}},!xn&&n.createElement("div",{className:"cellread linelimit"},(0,k.hB)(zn)?"":(0,l.Z)((0,O.default)({},En,{value:zn}))||_l("\u672A\u547D\u540D")),xn&&n.createElement("div",{onClick:function(Gn){return Gn.stopPropagation()}},n.createElement(Wa.Z,(0,O.default)({value:zn,from:Ye},En,{visible:xn,disabled:!hn,onChange:this.handleChange,worksheetId:Kn,formData:D().isFunction(Zn)?Zn():Zn,onPopupVisibleChange:function(Gn){Gn||(D().isUndefined(Oe.value)||Vn({value:Oe.value}),In(!1))}}))))}}]),Jt}(n.Component),Da.propTypes={className:A().string,style:A().shape({}),editable:A().bool,isediting:A().bool,cell:A().shape({value:A().string}),updateCell:A().func,updateEditingStatus:A().func,onClick:A().func},Ga),Oa(na.prototype,"handleTableKeyDown",[S.Nj],g()(na.prototype,"handleTableKeyDown"),na.prototype),Oa(na.prototype,"handleChange",[S.Nj],g()(na.prototype,"handleChange"),na.prototype),Oa(na.prototype,"handleClear",[S.Nj],g()(na.prototype,"handleClear"),na.prototype),na),Eo=t(84141),Lo,lo,Ir,so,kr,fr=(0,E.Z)([`
  `,`
  &.canedit:hover {
    .OperateIcon {
      display: inline-block;
    }
  }
`],[`
  `,`
  &.canedit:hover {
    .OperateIcon {
      display: inline-block;
    }
  }
`]),Rr=(0,E.Z)([`
  padding: 7px 6px;
  background: #fff;
  box-shadow: inset 0 0 0 2px #2d7ff9 !important;
`],[`
  padding: 7px 6px;
  background: #fff;
  box-shadow: inset 0 0 0 2px #2d7ff9 !important;
`]),mo=(0,E.Z)([`
  display: none;
  margin: -7px -6px 0 2px;
  width: 34px;
  height: 34px;
  text-align: center;
  line-height: 34px;
  color: #9e9e9e;
  font-size: 16px;
  cursor: pointer;
`],[`
  display: none;
  margin: -7px -6px 0 2px;
  width: 34px;
  height: 34px;
  text-align: center;
  line-height: 34px;
  color: #9e9e9e;
  font-size: 16px;
  cursor: pointer;
`]);function nn(Wt,Jt,Vt,Oe,at){var Ye={};return Object.keys(Oe).forEach(function(Ft){Ye[Ft]=Oe[Ft]}),Ye.enumerable=!!Ye.enumerable,Ye.configurable=!!Ye.configurable,("value"in Ye||Ye.initializer)&&(Ye.writable=!0),Ye=Vt.slice().reverse().reduce(function(Ft,_t){return _t(Wt,Jt,Ft)||Ft},Ye),at&&Ye.initializer!==void 0&&(Ye.value=Ye.initializer?Ye.initializer.call(at):void 0,Ye.initializer=void 0),Ye.initializer===void 0&&(Object.defineProperty(Wt,Jt,Ye),Ye=null),Ye}var Bt=(0,z.Z)(h.Z),ln=F.ZP.div(fr,function(Wt){var Jt=Wt.isCard;return Jt?`
  height: 100%;
  align-items: center;
  `:""}),Je=F.ZP.div(Rr),je=F.ZP.div(mo);function Tt(Wt){var Jt=parseFloat(Wt,10);return(!D().isNumber(Jt)||D().isNaN(Jt))&&(Jt=void 0),Jt}var Gt=(Ir=(kr=so=function(Wt){(0,C.default)(Jt,Wt);function Jt(Vt){(0,U.default)(this,Jt);var Oe=(0,V.default)(this,(Jt.__proto__||H()(Jt)).call(this,Vt));return Oe.state={value:Tt(Vt.cell.value)},Oe}return(0,f.default)(Jt,[{key:"componentWillReceiveProps",value:function(Oe){Oe.cell.value!==this.props.cell.value&&this.setState({value:Tt(Oe.cell.value)})}},{key:"handleTableKeyDown",value:function(Oe){var at=this.props,Ye=at.cell,Ft=at.isediting,_t=at.editable,un=at.updateEditingStatus,En=at.updateCell,hn=Ye.advancedSetting||{},xn=hn.min,In=hn.max,Vn=hn.numinterval,yn=Tt(xn),Kn=Tt(In);if(Ft&&(Oe.key==="Escape"||Oe.key==="Enter"&&String(this.state.value)!==Ye.value&&this.state.changed))un(!1),this.handleExit();else if(Ft&&D().includes(["ArrowUp","ArrowDown"],Oe.key)){Oe.stopPropagation(),Oe.preventDefault();var Bn=Tt(Vn),Zn=Tt(this.state.value||xn),zn=Zn+Bn*(Oe.key==="ArrowUp"?1:-1);if(zn<yn||zn>Kn)return;D().isNumber(zn)&&!D().isNaN(zn)&&this.setState({value:zn,changed:!0})}else if(/^[0-9]$/.test(Oe.key)){if(!_t)return;var aa=Number(Oe.key),Gn=this.prevValueId;if(!D().isNaN(aa)){if(window[Gn]&&(aa=+(window[Gn]+""+aa)),!D().isUndefined(yn)&&!D().isUndefined(Kn)&&(aa<yn||aa>Kn))return;window[Gn]=aa,setTimeout(function(){window[Gn]=void 0},500),En({value:aa})}}}},{key:"handleChange",value:function(Oe){var at=this.props,Ye=at.updateCell,Ft=at.updateEditingStatus;this.setState({value:Oe}),Ft(!1),Ye({value:Oe})}},{key:"handleExit",value:function(){var Oe=this.props,at=Oe.updateEditingStatus,Ye=Oe.updateCell,Ft=this.state.value;at(!1),this.setState({changed:!1}),Ft!==this.props.cell.value&&Ye({value:this.state.value})}},{key:"render",value:function(){var Oe=this.props,at=Oe.from,Ye=Oe.className,Ft=Oe.style,_t=Oe.cell,un=_t===void 0?{}:_t,En=Oe.isediting,hn=Oe.rowHeight,xn=hn===void 0?34:hn,In=Oe.rowIndex,Vn=Oe.editable,yn=Oe.onClick,Kn=Oe.popupContainer,Bn=Oe.updateEditingStatus,Zn=un.advancedSetting||{},zn=Zn.numinterval,aa=Zn.min,Gn=Zn.max,va=Zn.itemcolor,ka=Zn.itemnames,Ca=Zn.numshow,Na=this.state.value,Xa=n.createElement(Eo.Z,{style:at===T.B.CARD?{padding:0}:{},readonly:!En,disabled:!Vn,value:Na,showInput:!1,showTip:En,showScale:at!==T.B.CARD,showScaleText:En||xn>50,showAsPercent:Ca==="1",numStyle:at===T.B.CARD?{color:"#333"}:{},tipDirection:In===0?"bottom":void 0,min:Tt(aa),max:Tt(Gn),step:Tt(zn),itemnames:ka?JSON.parse(ka):"",itemcolor:va?JSON.parse(va):"",onChange:this.handleChange});return En?n.createElement(N.Z,{zIndex:99,popup:n.createElement(Bt,{onClickAway:this.handleExit},n.createElement(Je,{style:{width:Ft.width,minHeight:Ft.height}},Xa)),getPopupContainer:Kn,popupClassName:"filterTrigger",popupVisible:En,destroyPopupOnHide:!0,popupAlign:{points:["tl","tl"]}},n.createElement("div",{className:Ye,style:Ft,onClick:yn})):n.createElement(ln,{isCard:at===T.B.CARD,className:K()(Ye,"cellControl flexRow",{canedit:Vn}),style:Ft,onClick:yn},n.createElement("div",{className:"flex"},Xa),Vn&&n.createElement(je,{className:"OperateIcon editIcon"},n.createElement("i",{className:"ThemeHoverColor3 icon icon-edit",onClick:function(lr){lr.stopPropagation(),Bn(!0)}})))}},{key:"prevValueId",get:function(){var Oe=this.props,at=Oe.rowIndex,Ye=Oe.cell;return"numberSlider-"+at+"-"+Ye.controlId}}]),Jt}(n.Component),so.propTypes={className:A().string,style:A().shape({}),editable:A().bool,rowHeight:A().number,isediting:A().bool,cell:A().shape({}),updateCell:A().func,onClick:A().func,updateEditingStatus:A().func,popupContainer:A().func},kr),nn(Ir.prototype,"handleTableKeyDown",[S.Nj],g()(Ir.prototype,"handleTableKeyDown"),Ir.prototype),nn(Ir.prototype,"handleChange",[S.Nj],g()(Ir.prototype,"handleChange"),Ir.prototype),nn(Ir.prototype,"handleExit",[S.Nj],g()(Ir.prototype,"handleExit"),Ir.prototype),Ir),rn=t(31129),qt=(0,E.Z)([`
  padding: 4px 6px !important;
  img {
    height: `,`px !important;
    width: auto !important;
  }
  &:hover {
    padding-right: 34px;
    .OperateIcon {
      display: inline-block;
    }
  }
`],[`
  padding: 4px 6px !important;
  img {
    height: `,`px !important;
    width: auto !important;
  }
  &:hover {
    padding-right: 34px;
    .OperateIcon {
      display: inline-block;
    }
  }
`]),Pt=F.ZP.div(qt,function(Wt){var Jt=Wt.imgHeight;return Jt});function Yt(Wt){var Jt=Wt.className,Vt=Wt.style,Oe=Wt.rowFormData,at=Wt.cell,Ye=at===void 0?{}:at,Ft=Wt.rowHeight,_t=Ft===void 0?34:Ft,un=Wt.onClick;return n.createElement(Pt,{className:K()(Jt,"cellControl flexRow"),style:Vt,imgHeight:_t-9,onClick:un},n.createElement(rn.Z,(0,O.default)({isCell:!0},(0,O.default)({},Ye,{advancedSetting:(0,O.default)({},Ye.advancedSetting,{width:200})},D().pick(Wt,["recordId","appId","worksheetId","viewId"])),{formData:Oe?D().isFunction(Oe)?Oe():Oe:null})))}Yt.propTypes={className:j.string,style:(0,j.shape)({}),rowHeight:j.number,cell:(0,j.shape)({}),onClick:j.func};var Qt=t(26313),vn,cn,mn,Dn,bn;function Mn(Wt,Jt,Vt,Oe,at){var Ye={};return Object.keys(Oe).forEach(function(Ft){Ye[Ft]=Oe[Ft]}),Ye.enumerable=!!Ye.enumerable,Ye.configurable=!!Ye.configurable,("value"in Ye||Ye.initializer)&&(Ye.writable=!0),Ye=Vt.slice().reverse().reduce(function(Ft,_t){return _t(Wt,Jt,Ft)||Ft},Ye),at&&Ye.initializer!==void 0&&(Ye.value=Ye.initializer?Ye.initializer.call(at):void 0,Ye.initializer=void 0),Ye.initializer===void 0&&(Object.defineProperty(Wt,Jt,Ye),Ye=null),Ye}var Ln=(0,z.Z)(h.Z),Wn=(mn=(bn=Dn=function(Wt){(0,C.default)(Jt,Wt);function Jt(Vt){(0,U.default)(this,Jt);var Oe=(0,V.default)(this,(Jt.__proto__||H()(Jt)).call(this,Vt));return Oe.editIcon=n.createRef(),Oe.state={value:Vt.cell.value},Oe}return(0,f.default)(Jt,[{key:"componentWillReceiveProps",value:function(Oe){Oe.cell.value!==this.props.cell.value&&this.setState({value:Oe.cell.value})}},{key:"handleTableKeyDown",value:function(Oe){var at=this.props.updateEditingStatus;switch(Oe.key){case"Escape":at(!1);break;default:break}}},{key:"handleChange",value:function(Oe){var at=this.props,Ye=at.cell,Ft=at.updateCell,_t=at.updateEditingStatus,un=at.onValidate,En=!un(Oe);En||(Ft({value:Oe}),this.setState({value:Oe}),_t(!1))}},{key:"handleClear",value:function(){this.handleChange("")}},{key:"render",value:function(){var Oe=this.props,at=Oe.className,Ye=Oe.style,Ft=Oe.tableFromModule,_t=Oe.needLineLimit,un=Oe.cell,En=Oe.rowFormData,hn=Oe.popupContainer,xn=Oe.editable,In=Oe.isediting,Vn=Oe.rowIndex,yn=Oe.error,Kn=Oe.updateEditingStatus,Bn=Oe.onClick,Zn=this.state.value,zn=hn;return(Ft===I.i7.SUBLIST||Ft===I.i7.RELATE_RECORD)&&(zn=function(){return document.body}),n.createElement(n.Fragment,null,n.createElement(N.Z,{getPopupContainer:zn,popupVisible:In&&!!yn,popup:n.createElement(m,{error:yn,pos:Vn===0?"bottom":"top"}),destroyPopupOnHide:!0,zIndex:"1051",popupAlign:{points:Vn===0?["tl","bl"]:["bl","tl"],offset:Vn===0?[0,-3]:[0,0]}},n.createElement(u,{onClick:Bn,className:K()(at,{canedit:xn}),hideOutline:!0,style:Ye,iconRef:this.editIcon,iconName:"access_time",iconClassName:"dateEditIcon",isediting:In,onIconClick:function(){return Kn(!0)}},!!Zn&&n.createElement("div",{className:K()("worksheetCellPureString userSelectNone ellipsis",{linelimit:_t})},(0,l.Z)((0,O.default)({},un,{value:Zn}))),In&&yn&&n.createElement(m,{error:yn,pos:Vn===0?"bottom":"top"}))),In&&n.createElement(Ln,{onClickAwayExceptions:[this.editIcon&&this.editIcon.current,".ant-picker-dropdown",".cellControlDatePicker"],onClickAway:function(){return Kn(!1)}},n.createElement("div",{className:K()("cellControlDatePicker",at),style:Ye},n.createElement("div",{className:"cellControlDatePickerCon"},n.createElement(Qt.Z,(0,O.default)({},un,{formData:En?_.isFunction(En)?En():En:null,value:Zn,onChange:this.handleChange,compProps:{autoFocus:!0,open:In,getPopupContainer:zn}}))))))}}]),Jt}(n.Component),Dn.propTypes={className:A().string,style:A().shape({}),editable:A().bool,isediting:A().bool,updateCell:A().func,popupContainer:A().any,cell:A().shape({value:A().string}),value:A().string,needLineLimit:A().bool,updateEditingStatus:A().func,onClick:A().func},bn),Mn(mn.prototype,"handleTableKeyDown",[S.Nj],g()(mn.prototype,"handleTableKeyDown"),mn.prototype),Mn(mn.prototype,"handleChange",[S.Nj],g()(mn.prototype,"handleChange"),mn.prototype),Mn(mn.prototype,"handleClear",[S.Nj],g()(mn.prototype,"handleClear"),mn.prototype),mn),oa=t(78549),Sa,Ra,qn,Ha,pa;function Ta(Wt,Jt,Vt,Oe,at){var Ye={};return Object.keys(Oe).forEach(function(Ft){Ye[Ft]=Oe[Ft]}),Ye.enumerable=!!Ye.enumerable,Ye.configurable=!!Ye.configurable,("value"in Ye||Ye.initializer)&&(Ye.writable=!0),Ye=Vt.slice().reverse().reduce(function(Ft,_t){return _t(Wt,Jt,Ft)||Ft},Ye),at&&Ye.initializer!==void 0&&(Ye.value=Ye.initializer?Ye.initializer.call(at):void 0,Ye.initializer=void 0),Ye.initializer===void 0&&(Object.defineProperty(Wt,Jt,Ye),Ye=null),Ye}var Fa=(0,z.Z)(h.Z),rr=(qn=(pa=Ha=function(Wt){(0,C.default)(Jt,Wt);function Jt(Vt){(0,U.default)(this,Jt);var Oe=(0,V.default)(this,(Jt.__proto__||H()(Jt)).call(this,Vt));return Oe.cell=n.createRef(),Oe.state={value:safeParse(Vt.cell.value,"array")},Oe}return(0,f.default)(Jt,[{key:"componentWillReceiveProps",value:function(Oe){Oe.cell.value!==this.props.cell.value&&this.setState({value:safeParse(Oe.cell.value,"array")});var at=Oe.cell.enumDefault===0;at&&!this.props.isediting&&Oe.isediting&&this.handleSelect(),!at&&!this.props.isediting&&Oe.isediting&&D().isEmpty(this.props.cell.value)&&this.handleSelect()}},{key:"handleTableKeyDown",value:function(Oe){var at=this.props.updateEditingStatus;switch(Oe.key){case"Escape":break;case"Enter":this.isSelecting||this.handleSelect();break;default:break}}},{key:"handleChange",value:function(){var Oe=this.props.updateCell,at=this.state.value;Oe({value:y()(at)})}},{key:"handleSelect",value:function(Oe){var at=this,Ye=this.props,Ft=Ye.projectId,_t=Ye.cell,un=Ye.rowFormData,En=Ye.masterData,hn=En===void 0?function(){}:En,xn=this.cell&&this.cell.current||(event||{}).target;if(!(!xn||this.isSelecting)){var In=_t.enumDefault===0;if(this.isSelecting=!0,!D().find(md.global.Account.projects,function(yn){return yn.projectId===Ft})){alert(_l("\u60A8\u4E0D\u662F\u8BE5\u7EC4\u7EC7\u6210\u5458\uFF0C\u65E0\u6CD5\u83B7\u53D6\u5176\u7EC4\u7EC7\u89D2\u8272\u5217\u8868\uFF0C\u8BF7\u8054\u7CFB\u7EC4\u7EC7\u7BA1\u7406\u5458"),3);return}var Vn=(0,c.Mn)(_t,D().isFunction(un)?un():un,hn());(0,oa.Z)(xn,{projectId:Ft,unique:In,offset:{top:10,left:0},onSave:this.onSave,appointedOrganizeIds:D().get(Vn,"appointedOrganizeIds"),onClose:function(){at.isSelecting=!1}})}}},{key:"onSave",value:function(Oe){var at=this;if(!D().isEmpty(Oe)){this.isSelecting=!1;var Ye=this.props,Ft=Ye.cell,_t=Ye.updateEditingStatus,un=this.state.value,En=Oe.map(function(xn){return{organizeId:xn.organizeId,organizeName:xn.organizeName}});if(Ft.enumDefault===0)this.setState({value:En},function(){at.handleChange(),_t(!1)});else{var hn=[];try{hn=D().uniqBy(un.concat(En),"organizeId")}catch(xn){}this.setState({value:hn},this.handleChange)}}}},{key:"handleMutipleEdit",value:function(){var Oe=this.props.updateEditingStatus;Oe(!0)}},{key:"deleteDepartment",value:function(Oe){var at=this.state.value;this.setState({value:at.filter(function(Ye){return Ye.organizeId!==Oe})},this.handleChange)}},{key:"render",value:function(){var Oe=this,at=this.props,Ye=at.className,Ft=at.style,_t=at.rowHeight,un=at.singleLine,En=at.popupContainer,hn=at.cell,xn=at.editable,In=at.isediting,Vn=at.updateEditingStatus,yn=at.onClick,Kn=this.state.value,Bn=hn.enumDefault===0,Zn=n.createElement(Fa,{onClickAwayExceptions:[".dialogSelectOrgRole"],onClickAway:function(){Vn(!1)}},n.createElement("div",{className:"cellDepartments cellControl cellControlDepartmentPopup cellControlEdittingStatus",ref:In&&!Bn?this.cell:function(){},style:{width:Ft.width,minHeight:_t}},Kn.map(function(zn,aa){return n.createElement("span",{className:"cellDepartment",style:{maxWidth:Ft.width-20}},n.createElement("div",{className:"flexRow"},n.createElement("div",{className:"iconWrap",style:{backgroundColor:"#FFAD00"}},n.createElement("i",{className:"Font14 icon-user"})),n.createElement("div",{className:"departmentName mLeft4 flex ellipsis"},zn.organizeName?zn.organizeName:_l("\u8BE5\u7EC4\u7EC7\u89D2\u8272\u5DF2\u5220\u9664")),In&&!(hn.required&&Kn.length===1)&&n.createElement("i",{className:"Font14 Gray_9e icon-close Hand mLeft4",onClick:function(){return Oe.deleteDepartment(zn.organizeId)}})))}),!Bn&&n.createElement("span",{className:"addBtn",onClick:this.handleSelect},n.createElement("i",{className:"icon icon-add Gray_75 Font14"}))));return n.createElement(n.Fragment,null,n.createElement(N.Z,{action:["click"],popup:Zn,getPopupContainer:En,popupClassName:"filterTrigger",popupVisible:In,popupAlign:{points:["tl","tl"],overflow:{adjustX:!0,adjustY:!0}}},n.createElement(u,{conRef:Bn?this.cell:function(){},hideOutline:!Bn,onClick:yn,className:K()(Ye,{canedit:xn}),style:Ft,iconName:"user",isediting:In,onIconClick:hn.enumDefault===0?this.handleSelect:this.handleMutipleEdit},!!Kn&&n.createElement("div",{className:K()("cellDepartments cellControl",{singleLine:un})},Kn.map(function(zn,aa){return n.createElement("span",{className:"cellDepartment",style:{maxWidth:Ft.width-20}},n.createElement("div",{className:"flexRow"},n.createElement("div",{className:"iconWrap",style:{backgroundColor:"#FFAD00"}},n.createElement("i",{className:"Font14 icon-user"})),n.createElement("div",{className:"departmentName mLeft4 flex ellipsis"},zn.organizeName?zn.organizeName:_l("\u8BE5\u7EC4\u7EC7\u89D2\u8272\u5DF2\u5220\u9664"))))})))))}}]),Jt}(n.Component),Ha.propTypes={className:A().string,singleLine:A().bool,style:A().shape({}),rowHeight:A().number,editable:A().bool,isediting:A().bool,popupContainer:A().any,cell:A().shape({value:A().string}),projectId:A().string,updateCell:A().func,updateEditingStatus:A().func,onClick:A().func},pa),Ta(qn.prototype,"handleTableKeyDown",[S.Nj],g()(qn.prototype,"handleTableKeyDown"),qn.prototype),Ta(qn.prototype,"handleChange",[S.Nj],g()(qn.prototype,"handleChange"),qn.prototype),Ta(qn.prototype,"handleSelect",[S.Nj],g()(qn.prototype,"handleSelect"),qn.prototype),Ta(qn.prototype,"onSave",[S.Nj],g()(qn.prototype,"onSave"),qn.prototype),Ta(qn.prototype,"handleMutipleEdit",[S.Nj],g()(qn.prototype,"handleMutipleEdit"),qn.prototype),Ta(qn.prototype,"deleteDepartment",[S.Nj],g()(qn.prototype,"deleteDepartment"),qn.prototype),qn),xa=t(88902),er=t.n(xa),ia=t(76242),Ya=(0,E.Z)([`
  > div {
    width: 100%;
  }
  .searchIconBox {
    height: 32px;
    line-height: 32px;
  }
  .ant-select {
    font-size: 13px;
    .ant-select-arrow {
      height: 30px !important;
      border: none;
      right: 2px !important;
      transform: translateY(2px);
      .searchIconBox {
        height: 28px !important;
        border: none;
      }
    }
  }
  .ant-select .ant-select-selector,
  .ant-select .ant-select-selector:not(.ant-select-open):not(.ant-select-disabled) {
    height: 32px !important;
    min-height: auto !important;
    padding: 0 6px !important;
    background: transparent !important;
    background-color: transparent !important;
    border: none !important;
    box-shadow: none !important;
    .ant-select-selection-placeholder,
    input {
      font-size: 13px;
    }
    .ant-select-selection-search {
      left: 6px !important;
    }
    .ant-select-selection-search,
    .ant-select-selection-search-input,
    .ant-select-selection-placeholder {
      height: 32px !important;
    }
    &:hover {
      background: transparent !important;
      background-color: transparent !important;
    }
  }
  `,`
  &.hideArrow {
    .ant-select-arrow {
      display: none !important;
    }
  }
`],[`
  > div {
    width: 100%;
  }
  .searchIconBox {
    height: 32px;
    line-height: 32px;
  }
  .ant-select {
    font-size: 13px;
    .ant-select-arrow {
      height: 30px !important;
      border: none;
      right: 2px !important;
      transform: translateY(2px);
      .searchIconBox {
        height: 28px !important;
        border: none;
      }
    }
  }
  .ant-select .ant-select-selector,
  .ant-select .ant-select-selector:not(.ant-select-open):not(.ant-select-disabled) {
    height: 32px !important;
    min-height: auto !important;
    padding: 0 6px !important;
    background: transparent !important;
    background-color: transparent !important;
    border: none !important;
    box-shadow: none !important;
    .ant-select-selection-placeholder,
    input {
      font-size: 13px;
    }
    .ant-select-selection-search {
      left: 6px !important;
    }
    .ant-select-selection-search,
    .ant-select-selection-search-input,
    .ant-select-selection-placeholder {
      height: 32px !important;
    }
    &:hover {
      background: transparent !important;
      background-color: transparent !important;
    }
  }
  `,`
  &.hideArrow {
    .ant-select-arrow {
      display: none !important;
    }
  }
`]),pr=(0,F.ZP)(u)(Ya,function(Wt){var Jt=Wt.isediting;return Jt?`
      &.cell.isediting {
        padding: 0px !important;
        padding-right: 0px !important;
      }
  `:""});function mr(Wt){var Jt=Wt.isediting,Vt=Wt.editable,Oe=Wt.className,at=Wt.style,Ye=Wt.cell,Ft=Ye===void 0?{}:Ye,_t=Wt.rowFormData,un=Wt.updateEditingStatus,En=Wt.onClick,hn=Wt.updateCell,xn=Wt.updateControlValue,In=(0,n.useState)(Ft.value),Vn=(0,X.Z)(In,2),yn=Vn[0],Kn=Vn[1];return(0,n.useEffect)(function(){Kn(Ft.value)},[Ft.value]),n.createElement(pr,{className:K()(Oe,"cellControl flexRow",{canedit:Vt,hideArrow:Ft.enumDefault===2&&D().get(Ft,"advancedSetting.clicksearch")==="1"}),isediting:Jt,style:at,onClick:En,iconName:"arrow-down-border",onIconClick:function(){return un(!0)}},!Jt&&n.createElement("span",null,yn||""),Jt&&n.createElement("div",{onClick:function(Zn){return Zn.stopPropagation()}},n.createElement(ia.Z,(0,O.default)({isCell:!0},(0,O.default)({},Ft,{advancedSetting:(0,O.default)({},Ft.advancedSetting,{width:200})},D().pick(Wt,["projectId","recordId","appId","worksheetId","viewId"])),{formData:_t?D().isFunction(_t)?_t():_t:null,defaultSelectProps:{open:!0,dropdownMatchSelectWidth:420},onChange:function(Zn,zn){zn?setTimeout(function(){typeof Zn=="string"?xn({controlId:zn,value:Zn}):D().get(Zn,"rows")&&xn({controlId:zn,editType:9,value:y()([{editType:2,rowid:"all"}].concat(Zn.rows.map(function(aa){return{editType:0,newOldControl:er()(aa).filter(function(Gn){return Gn.length===24}).map(function(Gn){return{controlId:Gn,value:aa[Gn]}})}})))})},10):(hn({value:Zn}),Kn(Zn))},onVisibleChange:function(Zn){Zn||un(!1)}}))))}mr.propTypes={className:j.string,style:(0,j.shape)({}),rowHeight:j.number,cell:(0,j.shape)({}),onClick:j.func};var Pa=t(44266),jr=(0,E.Z)([`
  .relationSearchTag {
    display: inline-block;
    background-color: rgba(0, 100, 240, 0.08);
    border-radius: 3px;
    height: 21px;
    line-height: 21px;
    padding: 0 6px;
    font-size: 13px;
    cursor: pointer;
    .icon {
      font-size: 16px;
      color: #9d9d9d;
      margin-right: 5px;
      position: relative;
      top: 2px;
    }
  }
`],[`
  .relationSearchTag {
    display: inline-block;
    background-color: rgba(0, 100, 240, 0.08);
    border-radius: 3px;
    height: 21px;
    line-height: 21px;
    padding: 0 6px;
    font-size: 13px;
    cursor: pointer;
    .icon {
      font-size: 16px;
      color: #9d9d9d;
      margin-right: 5px;
      position: relative;
      top: 2px;
    }
  }
`]),Gr=F.ZP.div(jr);function co(Wt){var Jt=Wt.isCharge,Vt=Wt.editable,Oe=Wt.projectId,at=Wt.appId,Ye=Wt.worksheetId,Ft=Wt.viewId,_t=Wt.recordId,un=Wt.cell,En=Wt.rowFormData,hn=Wt.className,xn=Wt.style,In=Wt.onClick;return n.createElement(Gr,{className:hn,style:xn,onClick:In},n.createElement("div",{className:"relationSearchTag",onClick:function(yn){yn.stopPropagation(),un.type===51&&D().get(un,"advancedSetting.showtype")===String(I.zn.LIST)?(0,qo.$)({appId:at,viewId:Ft,worksheetId:Ye,recordId:_t,control:un,formdata:D().isFunction(En)?En():En,allowEdit:Vt}):(0,Pa.vG)({projectId:Oe,recordId:_t,worksheetId:Ye,viewId:Ft,isCharge:Jt,control:(0,O.default)({},un,{advancedSetting:(0,O.default)({},un.advancedSetting||{},{showtype:String(I.zn.CARD)})}),forData:D().isFunction(En)?En():En})}},n.createElement("i",{className:"icon icon-table"}),_l("\u67E5\u770B")))}var uo,Bo,or,To,fo;function Ko(Wt,Jt,Vt,Oe,at){var Ye={};return Object.keys(Oe).forEach(function(Ft){Ye[Ft]=Oe[Ft]}),Ye.enumerable=!!Ye.enumerable,Ye.configurable=!!Ye.configurable,("value"in Ye||Ye.initializer)&&(Ye.writable=!0),Ye=Vt.slice().reverse().reduce(function(Ft,_t){return _t(Wt,Jt,Ft)||Ft},Ye),at&&Ye.initializer!==void 0&&(Ye.value=Ye.initializer?Ye.initializer.call(at):void 0,Ye.initializer=void 0),Ye.initializer===void 0&&(Object.defineProperty(Wt,Jt,Ye),Ye=null),Ye}function mi(){var Wt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,O.default)({},Wt,{advancedSetting:(0,O.default)({},Wt.advancedSetting||{},Jt)})}var hi=(or=(fo=To=function(Wt){(0,C.default)(Jt,Wt);function Jt(Vt){(0,U.default)(this,Jt);var Oe=(0,V.default)(this,(Jt.__proto__||H()(Jt)).call(this,Vt));return Oe.cell=n.createRef(),Oe.state={isediting:!1},Oe}return(0,f.default)(Jt,[{key:"componentDidMount",value:function(){var Oe=this.props.registerRef;D().isUndefined(this.props.isediting)||this.setState({isediting:this.props.isediting}),D().isUndefined(this.props.error)||this.setState({error:this.props.error}),Oe(this)}},{key:"componentWillReceiveProps",value:function(Oe){this.state.error&&!Oe.error&&this.setState({error:null})}},{key:"componentWillUnmount",value:function(){var Oe=this.props.registerRef;Oe(void 0)}},{key:"componentDidCatch",value:function(Oe,at){console.error(Oe,at)}},{key:"checkCellFullVisible",value:function(){var Oe=this.props.style,at=void 0,Ye=void 0,Ft=s.findDOMNode(this),_t=Ft.parentElement.parentElement.scrollLeft,un=Ft.parentElement.parentElement.scrollTop,En=Ft.parentElement.parentElement.clientWidth,hn=Ft.parentElement.parentElement.clientHeight,xn=Oe.left+Oe.width<=_t+En,In=Oe.left>=_t,Vn=Oe.top>=un,yn=Oe.top+Oe.height<=un+hn;return In||(at=Oe.left),xn||(at=Oe.left+Oe.width-En),Vn||(Ye=Oe.top),yn||(Ye=Oe.top+Oe.height-hn),{fullvisible:xn&&In&&Vn&&yn,newLeft:at,newTop:Ye}}},{key:"haveEditingStatus",value:function(Oe){return!(Oe.type===30||Oe.type===31||Oe.type===38||Oe.type===32||Oe.type===33||Oe.type===21||Oe.type===28||Oe.type===31||Oe.type===34||Oe.type===36||Oe.type===38||Oe.type===47||Oe.type===29&&parseInt(Oe.advancedSetting.showtype,10)===I.wn.LIST)}},{key:"validate",value:function(Oe,at){var Ye=this.props,Ft=Ye.tableFromModule,_t=Ye.cellUniqueValidate,un=Ye.clearCellError,En=Ye.rowFormData,hn=(0,b.U_)({item:Oe,data:D().isFunction(En)?En():En}),xn=hn.errorType;return!xn&&(Oe.unique||Oe.uniqueInRecord)&&Ft===I.i7.SUBLIST&&(xn=_t(Oe.controlId,Oe.value,at.rowid)?"":"UNIQUE"),xn}},{key:"getErrorText",value:function(Oe,at){var Ye=this.props.isSubList;return typeof q.MP[Oe]=="string"?q.MP[Oe]:typeof q.MP[Oe]=="function"?q.MP[Oe](at,{isSubList:Ye}):_l("\u683C\u5F0F\u4E0D\u6B63\u786E")}},{key:"onValidate",value:function(Oe){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Ye=this.props,Ft=Ye.projectId,_t=Ye.cell,un=Ye.row,En=Ye.checkRulesErrorOfControl,hn=Ye.rowFormData,xn=Ye.clearCellError;D().includes([6],_t.type)&&_t.advancedSetting&&_t.advancedSetting.numshow==="1"&&Oe&&(Oe=(0,ee.IQ)(Oe,100));var In=this.validate((0,O.default)({},_t.type===10?mi(_t,{otherrequired:"0"}):(0,O.default)({},_t),{value:Oe}),un),Vn=void 0;D().includes([15,16,46],_t.type)&&In&&In!=="REQUIRED"?Vn=(0,b.U_)({item:(0,O.default)({},_t,{value:Oe}),data:D().isFunction(hn)?hn():hn,ignoreRequired:!0}).errorText:Vn=In&&this.getErrorText(In,(0,O.default)({},_t,{value:Oe})),Vn||(xn((un||{}).rowid+"-"+_t.controlId),$(".mdTableErrorTip").remove());var yn=(0,O.default)({},un,(0,d.default)({},_t.controlId,Oe));try{var Kn=new b.ZP({projectId:Ft,data:D().isFunction(hn)?hn():hn});Kn.updateDataSource({controlId:_t.controlId,value:Oe}),yn=[{}].concat((0,o.Z)(Kn.data)).reduce(function(){var Zn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},zn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return r()(Zn,(0,d.default)({},zn.controlId,zn.value))})}catch(Zn){console.log(Zn)}var Bn=En(_t,yn);return Bn?(this.setState({error:Bn.errorMessage}),!Bn):(this.setState({error:Vn||null}),at?{errorType:In,errorText:Vn}:!In)}},{key:"handleCopy",value:function(Oe){var at=this.props.tableId;(0,k.QM)(Oe,at),D().includes([2,3,4,7,5,6,8],Oe.type)||(window.tempCopyForSheetView=y()({type:"origin",value:Oe.value,textValue:(0,k.eh)(Oe),controlId:Oe.controlId,controlType:Oe.type,tableId:at}))}},{key:"handlePaste",value:function(Oe){var at=this;if(!(!window.tempCopyForSheetView||!this.editable)){var Ye=safeParse(window.tempCopyForSheetView);if(D().includes([9,10,11,29,35],Oe.type)){if(Oe.type===29&&Oe.enumDefault===2&&parseInt(Oe.advancedSetting.showtype,10)===I.wn.LIST)return;Oe.controlId===Ye.controlId&&(0,k.yd)(Oe,Ye,function(Ft){at.handleUpdateCell({value:Ft})})}else(0,k.xN)(Oe.type,Ye.controlType)&&(0,k.yd)(Oe,Ye,function(Ft){at.handleUpdateCell({value:Ft})})}}},{key:"handleTableKeyDown",value:function(Oe,at){var Ye=this.props,Ft=Ye.tableType,_t=Ye.cell,un=Ye.onClick,En=this.state.isediting,hn=this.haveEditingStatus(_t);if(Oe.key==="c"&&(Oe.metaKey||Oe.ctrlKey)){this.handleCopy(_t);return}if(Oe.key==="v"&&(Oe.metaKey||Oe.ctrlKey)&&(!D().includes([2,4,7,5,6,8],_t.type)||_t.type===6&&_t.advancedSetting&&_t.advancedSetting.showtype==="2")){this.handlePaste(_t);return}if(!((Oe.metaKey||Oe.ctrlKey)&&!(Oe.key==="v"&&(0,k.s6)(_t.type))))switch(window.cellLastKey=Oe.key,Oe.key){case"Backspace":this.editable&&hn&&!En&&!_t.required&&this.handleUpdateCell({value:""});break;case" ":En||un();break;case"Enter":this.editable&&hn&&!En&&(this.handleUpdateEditing(!0),Oe.preventDefault(),Ft==="classic"&&(at.hasEditingCell=!0,window.hasEditingCell=!0)),(D().includes([26,27,29,36,42],_t.type)||_t.type===6&&_t.advancedSetting&&_t.advancedSetting.showtype==="2")&&D().isFunction(D().get(this,"cell.current.handleTableKeyDown"))&&this.cell.current.handleTableKeyDown(Oe,at);break;default:D().isFunction(D().get(this,"cell.current.handleTableKeyDown"))&&this.cell.current.handleTableKeyDown(Oe,at);break}}},{key:"handleUpdateCell",value:function(){var Vt=(0,te.Z)(L().mark(function at(){var Ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_t,un,En,hn;return L().wrap(function(In){for(;;)switch(In.prev=In.next){case 0:if(_t=this.props,un=_t.cell,En=_t.row,hn=_t.updateCell,!window.isPublicApp){In.next=4;break}return alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3),In.abrupt("return");case 4:hn((0,O.default)({controlId:un.controlId,controlName:un.controlName,type:un.type},Ye),(0,O.default)({silent:!0,cell:r()({},un,Ye),row:En},Ft)),this.setState({error:null});case 6:case"end":return In.stop()}},at,this)}));function Oe(){return Vt.apply(this,arguments)}return Oe}()},{key:"handleUpdateEditing",value:function(Oe){var at=this,Ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};if(!(Oe&&!this.editable)){var Ft=this.props,_t=Ft.tableType,un=Ft.tableFromModule,En=Ft.cell,hn=Ft.row,xn=Ft.cache,In=Ft.clearCellError,Vn=Ft.enterEditing,yn=Vn===void 0?function(){}:Vn,Kn=Ft.cellUniqueValidate,Bn=Ft.scrollTo,Zn=Ft.onCellFocus,zn=Zn===void 0?function(){}:Zn,aa=this.error;zn(Oe);var Gn=Oe&&this.checkCellFullVisible(),va=function(){at.setState({isediting:Oe,error:Oe?aa:null},function(){Ye()}),_t==="classic"&&(xn.hasEditingCell=Oe,window.hasEditingCell=Oe),!Oe&&!aa&&(In((hn||{}).rowid+"-"+En.controlId),$(".mdTableErrorTip").remove()),Oe&&yn(),setTimeout(function(){window.cellisediting=Oe},Oe?0:500),Oe||(window.timer=Math.random())};if(!Oe&&En.unique&&En.unique&&!En.uniqueInRecord&&un===I.i7.SUBLIST&&Kn(En.controlId,En.value,hn.rowid,!0),Oe&&!Gn.fullvisible){var ka={};D().isNumber(Gn.newLeft)&&(ka.left=Gn.newLeft),D().isNumber(Gn.newTop)&&(ka.top=Gn.newTop),Bn(ka),setTimeout(va,10);return}va()}}},{key:"clickHandle",value:function(){for(var Oe=this,at=arguments.length,Ye=Array(at),Ft=0;Ft<at;Ft++)Ye[Ft]=arguments[Ft];var _t=this.props,un=_t.tableType,En=_t.clickEnterEditing,hn=_t.cell,xn=_t.cellIndex,In=_t.cache,Vn=_t.onClick,yn=_t.onFocusCell,Kn=_t.onMouseDown;Kn();var Bn=this.haveEditingStatus(hn);if(un==="classic"){if(!D().isUndefined(In.focusIndex)&&In.focusIndex===xn&&Bn){this.handleUpdateEditing(!0);return}if(yn(),!Bn)return}if(!Bn||un==="simple"){window.getSelection().toString()||Vn.apply(void 0,Ye);return}this.clicktimer||En?(clearTimeout(this.clicktimer),this.clicktimer=null,this.editable&&this.handleUpdateEditing(!0)):this.clicktimer=setTimeout(function(){Oe.clicktimer=null,un!=="classic"&&!window.cellisediting&&!window.getSelection().toString()?Vn.apply(void 0,Ye):window.cellisediting=!1},260)}},{key:"render",value:function(){var Oe=this,at=this.props,Ye=at.tableId,Ft=at.tableType,_t=at.worksheetId,un=at.isMobileTable,En=at.isSubList,hn=at.isTrash,xn=at.cache,In=at.style,Vn=at.tableFromModule,yn=at.cell,Kn=at.row,Bn=at.rowIndex,Zn=at.columnIndex,zn=at.cellIndex,aa=at.rowFormData,Gn=at.masterData,va=at.from,ka=at.mode,Ca=at.rowHeight,Na=at.rowHeightEnum,Xa=at.popupContainer,nr=at.projectId,lr=at.canedit,dr=at.gridHeight,Ma=at.tableScrollTop,Hr=at.sheetSwitchPermit,Yr=at.viewId,Nr=at.appId,Sr=at.allowlink,Mr=at.disableDownload,$o=at.updateCell,xo=at.isCharge,Co=at.onClick,no=at.onFocusCell,ho=this.state.isediting,ao=this.error,Lr=Ca===I.dN[0],Ar=this.props.className;if(ao&&(Ar=Ar+" cellControlErrorStatus"),Lr&&(Ar+=" singleLine"),ho&&(Ar+=" isediting"),xn&&!D().isUndefined(xn.focusIndex)&&xn.focusIndex===zn&&Ar.indexOf(" focus")<0&&(Ar+=" focus"),D().isObject(yn.value)&&yn.value.customCell&&yn.value.type==="text")return n.createElement("div",{style:In,className:Ar},n.createElement("span",{style:yn.value.style},yn.value.value));if(Kn&&D().isEmpty(Kn))return n.createElement("div",{className:Ar,style:In});yn.advancedSetting||(yn.advancedSetting={}),yn.type===37&&(yn.isSubtotal=!0,yn.advancedSetting&&yn.advancedSetting.summaryresult==="1"?(yn.type=2,yn.value=D().isUndefined(yn.value)?"":D().round(parseFloat(yn.value)*100,yn.dot||0).toFixed(yn.dot||0)+"%"):(D().includes([15,16],yn.enumDefault2)&&D().includes([2,3],yn.enumDefault)&&(yn.advancedSetting=(0,O.default)({},yn.advancedSetting,{showtype:yn.unit})),yn.type=yn.enumDefault2||6));var Io=(0,c.kM)(yn);if(this.editable=lr&&Kn&&Kn.allowedit&&Io.editable&&!yn.isSubtotal,this.editable&&(Ar+=" editable"),!Io.visible){if(Vn===I.i7.SUBLIST)return n.createElement("div",{className:Ar,onClick:this.props.onClick,style:In});Ar+=" readonly",this.editable=!1}var ro=this.editable,vo=(0,k.s6)(yn.type),Br=void 0,ir={tableId:Ye,tableType:Ft,cache:xn,isMobileTable:un,isSubList:En,isTrash:hn,worksheetId:_t,className:Ar,style:In,rowIndex:Bn,columnIndex:Zn,ref:this.cell,editable:ro,row:Kn,recordId:Kn&&Kn.rowid,rowHeight:Ca,rowHeightEnum:Na,count:Kn&&Kn["rq"+yn.controlId],singleLine:Lr,tableScrollTop:Ma,gridHeight:dr,popupContainer:Xa,projectId:nr,cell:(0,O.default)({},yn),rowFormData:aa,masterData:Gn,from:va,mode:ka,tableFromModule:Vn,isediting:ho,error:ao,sheetSwitchPermit:Hr,viewId:Yr,appId:Nr,updateCell:this.handleUpdateCell,updateControlValue:$o,onClick:this.clickHandle,openRecord:Co,updateEditingStatus:this.handleUpdateEditing,clearError:function(){return Oe.setState({error:null})},onValidate:this.onValidate,disableDownload:Mr,isCharge:xo,onFocusCell:no};return vo?((yn.type===41||yn.type===32||yn.type===10010||yn.type===2&&yn.enumDefault===1)&&(Br=!0),yn.type===41?n.createElement(vt,(0,O.default)({},ir,{needLineLimit:Br})):D().includes([19,23,24],yn.type)?n.createElement(we,(0,O.default)({},ir,{needLineLimit:Br})):D().includes([15,16],yn.type)?n.createElement(Ue,(0,O.default)({},ir,{needLineLimit:Br})):yn.type===3?n.createElement(fa,ir):yn.type===6&&yn.advancedSetting&&yn.advancedSetting.showtype==="2"?n.createElement(Gt,ir):n.createElement(Se,(0,O.default)({},ir,{needLineLimit:Br}))):D().includes([9,10,11],yn.type)&&yn.advancedSetting.showtype!=="2"?n.createElement(_e,ir):D().includes([9,10,11],yn.type)&&yn.advancedSetting.showtype==="2"?n.createElement(ht,ir):yn.type===28?n.createElement(sr,ir):yn.type===27?n.createElement(kn,ir):yn.type===26?(ir.disabled=this.props.disabled,n.createElement(kt,ir)):yn.type===21?n.createElement(hr,ir):yn.type===14?n.createElement(Zr,ir):yn.type===29||yn.type===34?n.createElement(Hn,ir):yn.type===42?n.createElement(ca,ir):yn.type===36?n.createElement(la.Z,ir):yn.type===30?n.createElement(Jt,(0,O.default)({},ir,{className:"control-30 "+ir.className,cell:r()({},yn,{type:yn.sourceControlType,advancedSetting:r()(D().get(yn,"sourceControl.advancedSetting")||{},{datamask:yn.advancedSetting.datamask})}),editable:!1})):yn.type===35?n.createElement(_r,ir):yn.type===40?n.createElement(Re,ir):yn.type===46?n.createElement(Wn,ir):yn.type===47?n.createElement(Yt,ir):yn.type===48?n.createElement(rr,ir):yn.type===49||yn.type===50?n.createElement(mr,ir):yn.type===51?n.createElement(co,ir):n.createElement("div",{className:Ar,onClick:this.props.onClick,style:In})}},{key:"error",get:function(){return this.state.error||this.props.error}}]),Jt}(n.Component),To.propTypes={isSubList:A().bool,className:A().string,tableFromModule:A().number,style:A().shape({}),cell:A().shape({}),row:A().shape({}),canedit:A().bool,disableDownload:A().bool,from:A().number,rowHeight:A().number,popupContainer:A().any,clickEnterEditing:A().bool,projectId:A().string,updateCell:A().func,scrollTo:A().func,onClick:A().func,onMouseDown:A().func,clearCellError:A().func,cellUniqueValidate:A().func,onCellFocus:A().func},To.defaultProps={style:{},onClick:function(){},onMouseDown:function(){},popupContainer:function(){return document.body},scrollTo:function(){},clearCellError:function(){},cellUniqueValidate:function(){return!0},registerRef:function(){}},fo),Ko(or.prototype,"onValidate",[S.Nj],g()(or.prototype,"onValidate"),or.prototype),Ko(or.prototype,"handleCopy",[S.Nj],g()(or.prototype,"handleCopy"),or.prototype),Ko(or.prototype,"handlePaste",[S.Nj],g()(or.prototype,"handlePaste"),or.prototype),Ko(or.prototype,"handleTableKeyDown",[S.Nj],g()(or.prototype,"handleTableKeyDown"),or.prototype),Ko(or.prototype,"handleUpdateCell",[S.Nj],g()(or.prototype,"handleUpdateCell"),or.prototype),Ko(or.prototype,"handleUpdateEditing",[S.Nj],g()(or.prototype,"handleUpdateEditing"),or.prototype),Ko(or.prototype,"clickHandle",[S.Nj],g()(or.prototype,"clickHandle"),or.prototype),or)},83298:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>U});var ce=t(88239);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(89499);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(1178);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(67385);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(15577);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(62232);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(94914);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(85879);var r=t(96486),o=t.n(r),d=t(30381),Z=t.n(d);if(!/^(1887|7596|7798)$/.test(t.j))var H=t(27738);function U(f){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};try{if(!f||f.controlId==="rowid"&&!(0,H.Z)(f.value))return"";var C=f.type,O=f.value,n=O===void 0?"":O,s=f.unit,j=f.advancedSetting,A=j===void 0?{}:j,S=A.suffix,I=S===void 0?"":S,c=A.prefix,q=c===void 0?"":c,b=A.thousandth,k=[],ee=void 0;if(V.noUnit&&(s="",I="",q=""),n===""||n===null)return"";if(!(0,g.s6)(f)&&f.value==="\u5DF2\u5220\u9664")return _l("\u5DF2\u5220\u9664");if(C===37&&(f.advancedSetting&&f.advancedSetting.summaryresult==="1"?(C=2,n=Math.round(parseFloat(f.value)*100)+"%"):(o().includes([15,16],f.enumDefault2)&&o().includes([2,3],f.enumDefault)&&(f.advancedSetting=(0,ce.default)({},A,{showtype:f.unit})),C=f.enumDefault2||6)),o().includes([6,31,37],f.type)&&f.advancedSetting&&f.advancedSetting.numshow==="1"&&n&&(n=(0,te.pc)(n,100)),f.controlId==="wfftime")return(0,g.UM)({value:f.value,unit:"1"}).replace(/^-/,_l("\u5DF2\u8D85\u65F6"));switch(C){case 2:case 4:case 5:case 7:case 25:case 33:case 37:case 49:case 50:n=f.enumDefault===0||f.enumDefault===2?(n||"").replace(/\r\n|\n/g," "):n;break;case 3:n=f.enumDefault===1?n.replace(/\+86/,""):n;break;case 19:case 23:case 24:try{ee=JSON.parse(n)}catch(F){n=""}n=ee.name;break;case 6:case 8:case 31:n=o().isUndefined(f.dot)?n:(0,te.FH)(n,f.dot),V.noSplit||(f.type!==6?b!=="1":o().isUndefined(b)?f.enumDefault!==1:b!=="1")&&(n=(n||"").replace(n.indexOf(".")>-1?/(\d{1,3})(?=(?:\d{3})+\.)/g:/(\d{1,3})(?=(?:\d{3})+$)/g,"$1,")),(f.advancedSetting||{}).numshow==="1"&&(I="%"),!V.noMask&&o().includes([6,8],C)&&o().get(f,"advancedSetting.datamask")==="1"&&(n=(0,a.G)((0,ce.default)({},f,{value:n}))||n),n=(q||"")+n+(s||I||"");break;case 15:case 16:o().isEmpty(n)&&(n="");var re=(0,y.VL)(f);n=Z()(Z()(C===16&&!V.doNotHandleTimeZone?(0,te.LX)(f.value):f.value),re).format(o().includes(["ctime","utime","dtime"],f.controlId)?"YYYY-MM-DD HH:mm:ss":re);break;case 46:o().isEmpty(n)&&(n=""),n=Z()(f.value,"HH:mm:ss").format(f.unit==="6"||f.unit==="9"?"HH:mm:ss":"HH:mm");break;case 38:if(o().isEmpty(n)&&(n=""),f.enumDefault===2){var ie=(0,y.VL)({advancedSetting:(0,ce.default)({},A,{showtype:f.unit||"1"})}),le=(0,te.LX)(Z()(f.value,n.indexOf("-")>-1?void 0:ie));n=Z()(le).format(ie)}else f.advancedSetting.autocarry==="1"?n=(q||"")+(0,g.UM)({value:f.value,unit:s,dot:f.dot}):n=(q||"")+(0,te.FH)(n,f.dot)+(I||{1:_l("\u5206\u949F"),2:_l("\u5C0F\u65F6"),3:_l("\u5929"),4:_l("\u6708"),5:_l("\u5E74"),6:_l("\u79D2")}[s]);break;case 17:case 18:(n===""||n==='["",""]')&&(n="");try{ee=JSON.parse(n)}catch(F){n=""}n=ee.map(function(F){return F?Z()(F).format(f.type===17?"YYYY-MM-DD":"YYYY-MM-DD HH:mm"):""}).join(" - ");break;case 10010:case 41:n=(0,g.Pz)(f.value);break;case 40:try{ee=JSON.parse(n)||{}}catch(F){n=""}n=o().isObject(ee)?(ee.title||"")+" "+(ee.address||""):"";break;case 9:case 10:case 11:k=(0,p.Rc)(f.options,f.value),n=k.map(function(F,h){if(F.key==="other"){var z=o().find(JSON.parse(f.value||"[]"),function(X){return X.includes(F.key)});return z==="other"?F.value:o().replace(z,"other:","")||F.value}return F.value}).join("\u3001");break;case 26:try{ee=JSON.parse(n)}catch(F){n=""}o().isArray(ee)||(ee=[ee]),n=ee.filter(function(F){return!!F}).map(function(F){return F.fullname}).join("\u3001");break;case 27:try{ee=JSON.parse(f.value)}catch(F){n=""}n=ee.map(function(F,h){return F.departmentName?F.departmentName:_l("\u8BE5\u90E8\u95E8\u5DF2\u5220\u9664")}).join("\u3001");break;case 36:var E=(0,R.jT)(f,{needDefault:!0}),w=o().get(o().find(E,function(F){return F.key===n||parseFloat(F.key)===n}),"value");n=n==="1"||n===1?w||_l("\u5DF2\u9009\u4E2D"):"";break;case 14:try{ee=JSON.parse(n)}catch(F){n=""}n=ee.map(function(F){return""+(F.originalFilename+F.ext)}).join("\u3001");break;case 35:try{ee=JSON.parse(n)}catch(F){ee=[]}o().isArray(ee)||(ee=[]),n=ee.length?ee[0].name:"";break;case 29:try{ee=JSON.parse(n)}catch(F){ee=[]}if(o().isArray(ee)||(ee=[]),f.enumDefault===1)n=ee.map(function(F){return U(o().assign({},f,{type:f.sourceControlType||2,value:F.name}),V)||_l("\u672A\u547D\u540D")}).join("\u3001");else if(o().get(f,"advancedSetting.showtype")==="2")n=f.value;else if(f.enumDefault===2&&f.relationControls.length){var K=o().find(f.relationControls,{controlId:f.sourceControlId});K&&(n=ee.map(function(F){return U(o().assign({},f,{type:K.sourceControlType||2,value:F.name}),V)||_l("\u672A\u547D\u540D")}).join("\u3001"))}break;case 30:n=U(o().assign({},f,{type:f.sourceControlType||2,advancedSetting:o().get(f,"sourceControl.advancedSetting")||{}}),V);break;case 21:try{ee=JSON.parse(n)}catch(F){n=""}n=ee.map(function(F){return"["+L.Z[F.type]+"]"+F.name}).join("\u3001");break;case 28:f.value||(n="");var N=JSON.parse((f.advancedSetting||{}).itemnames||"[]");n=o().get(o().find(N,function(F){return F.key===f.value}),"value")||_l("%0 \u7EA7",parseInt(f.value,10));break;case 32:n=f.value;break;case 48:try{ee=JSON.parse(f.value)}catch(F){n=""}n=ee.map(function(F,h){return F.organizeName?F.organizeName:_l("\u8BE5\u7EC4\u7EC7\u89D2\u8272\u5DF2\u5220\u9664")}).join("\u3001");break;default:n=""}return o().get(f,"advancedSetting.dotformat")==="1"&&(n=(0,te.FY)(n)),!V.noMask&&(C===2&&f.enumDefault===2||o().includes([3,5,7],C))&&o().get(f,"advancedSetting.datamask")==="1"&&(0,a.G)((0,ce.default)({},f,{value:n}))||n}catch(F){return console.log(F),""}}},67055:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>H});var ce=t(42185),g=t(12424),p=t(86735),L=t(67294),te=t(45697),R=t.n(te),y=t(71893),a=t(29314),r=(0,p.Z)([`
  position: absolute;
  left: 12px;
  cursor: pointer;
  font-size: 15px;
  color: #2196f3;
  .icon {
    font-size: 16px;
    color: #9e9e9e;
    &:hover {
      color: #2196f3;
    }
  }
`],[`
  position: absolute;
  left: 12px;
  cursor: pointer;
  font-size: 15px;
  color: #2196f3;
  .icon {
    font-size: 16px;
    color: #9e9e9e;
    &:hover {
      color: #2196f3;
    }
  }
`]),o=(0,p.Z)([`
  width: 360px;
  border-radius: 2px;
  padding: 20px;
  box-shadow: 0px 4px 16px 0px rgba(0, 0, 0, 0.16);
  background-color: #fff;
  .title {
    font-size: 15px;
    color: #333;
    font-weight: 500;
  }
  .description {
    font-size: 13px;
    color: #757575;
    line-height: 1.8em;
    margin: 10px 0 26px;
  }
  .buttons {
    text-align: right;
    .Button {
      margin-left: 16px;
    }
  }
`],[`
  width: 360px;
  border-radius: 2px;
  padding: 20px;
  box-shadow: 0px 4px 16px 0px rgba(0, 0, 0, 0.16);
  background-color: #fff;
  .title {
    font-size: 15px;
    color: #333;
    font-weight: 500;
  }
  .description {
    font-size: 13px;
    color: #757575;
    line-height: 1.8em;
    margin: 10px 0 26px;
  }
  .buttons {
    text-align: right;
    .Button {
      margin-left: 16px;
    }
  }
`]),d=y.ZP.span(r),Z=y.ZP.div(o);function H(U){var f=U.className,V=U.style,C=U.title,O=U.description,n=U.onSave,s=n===void 0?function(){}:n,j=U.onCancel,A=j===void 0?function(){}:j,S=(0,L.useState)(),I=(0,g.Z)(S,2),c=I[0],q=I[1];function b(){q(!1)}return L.createElement(d,{className:f,style:V},L.createElement(a.Z,{popupVisible:c,onPopupVisibleChange:function(ee){q(ee)},popup:L.createElement(Z,null,L.createElement("div",{className:"title"},C||_l("\u4F60\u53D8\u66F4\u4E86\u8868\u683C\u6837\u5F0F\uFF0C\u662F\u5426\u4FDD\u5B58\uFF1F")),L.createElement("div",{className:"description"},O||_l("\u4FDD\u5B58\u8868\u683C\u5F53\u524D\u7684\u5217\u5BBD\u3001\u5217\u51BB\u7ED3\u3001\u5217\u9690\u85CF\u914D\u7F6E\uFF0C\u5E76\u5E94\u7528\u7ED9\u6240\u6709\u7528\u6237")),L.createElement("div",{className:"buttons"},L.createElement(ce.ZP,{size:"mdnormal",type:"ghostgray",onClick:A.bind(this,{closePopup:b})},_l("\u6E05\u9664\u53D8\u66F4")),L.createElement(ce.ZP,{size:"mdnormal",onClick:s.bind(this,{closePopup:b})},_l("\u4FDD\u5B58\u53D8\u66F4")))),action:["click"],popupAlign:{points:["tl","bl"],offset:[-13,8],overflow:{adjustX:!0,adjustY:!0}}},L.createElement("i",{className:"icon icon-save1"})))}H.propTypes={title:R().string,description:R().string,className:R().string,style:R().shape({}),onSave:R().func,onCancel:R().func}},64530:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>p});var ce=t(67294),g=ce.createContext();const p=g},59390:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>en});var ce=t(88239),g=t(85105),p=t.n(g),L=t(99663),te=t(22600),R=t(49135),y=t(93196),a=t(67294),r=t(50533),o=t(96486),d=t.n(o),Z=t(8177),H=t.n(Z),U=t(79221),f=t(42723),V=t(3540),C=t(12424),O=t(86735),n=t(45697),s=t.n(n),j=t(93967),A=t.n(j),S=t(71893),I=(0,O.Z)([`
  display: flex;
  align-items: center;
  .next,
  .prev {
    width: 24px;
    height: 24px;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    font-size: 14px;
    color: #bdbdbd;
    border-radius: 3px;
    cursor: pointer;
    &:hover:not(.disabled) {
      color: #757575;
      background: #f5f5f5;
    }
    &.disabled {
      color: #bfbfbf;
      cursor: not-allowed;
    }
  }
  input.ming {
    margin: 0 6px;
    padding: 0 6px;
    height: 24px;
    width: 32px;
    text-align: center;
    font-size: 13px !important;
    &:focus {
      border-color: #2196f3;
    }
  }
  .pageNumber {
    margin: 0 8px;
  }
`],[`
  display: flex;
  align-items: center;
  .next,
  .prev {
    width: 24px;
    height: 24px;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    font-size: 14px;
    color: #bdbdbd;
    border-radius: 3px;
    cursor: pointer;
    &:hover:not(.disabled) {
      color: #757575;
      background: #f5f5f5;
    }
    &.disabled {
      color: #bfbfbf;
      cursor: not-allowed;
    }
  }
  input.ming {
    margin: 0 6px;
    padding: 0 6px;
    height: 24px;
    width: 32px;
    text-align: center;
    font-size: 13px !important;
    &:focus {
      border-color: #2196f3;
    }
  }
  .pageNumber {
    margin: 0 8px;
  }
`]),c=S.ZP.div(I);function q($t){var an=$t.count,tn=an===void 0?0:an,mt=$t.pageSize,Lt=mt===void 0?200:mt,zt=$t.pageIndex,Zt=zt===void 0?1:zt,Nt=$t.onChange,ct=Nt===void 0?function(){}:Nt,De=(0,a.useState)(Zt),_e=(0,C.Z)(De,2),Le=_e[0],rt=_e[1],Ct=Math.ceil(tn/Lt),dt=Le<=1,It=Le>=Ct;function bt(Ut){(0,o.isNaN)(Ut)||(Ut>Ct&&(Ut=Ct),Ut<1&&(Ut=1),ct(Ut),rt(Ut))}return(0,a.useEffect)(function(){rt(Zt)},[Zt]),a.createElement(c,null,a.createElement("span",{className:A()("prev",{disabled:dt}),onClick:function(){dt||bt(Number(Le)-1)}},a.createElement("i",{className:"icon-arrow-left-border"})),a.createElement(V.Z,{value:Le,onChange:function(Xt){rt(Xt.replace(/[^-\d]/g,""))},onBlur:function(){var Xt=Number(Le);bt(Xt)},onKeyDown:function(Xt){if(Xt.key==="Enter"){var pn=Number(Le);bt(pn)}}}),"/ ",a.createElement("span",{className:"pageNumber"},Ct),a.createElement("span",{className:A()("next",{disabled:It}),onClick:function(){It||bt(Number(Le)+1)}},a.createElement("i",{className:"icon-arrow-right-border"})))}q.propTypes={count:n.number,pageSize:n.number,pageIndex:n.number,onChange:n.func};var b=t(88106),k=t(52945),ee=t.n(k),re=t(85315),ie=t(63239),le=t.n(ie),E=t(44894),w=t(91247),K=t(22010),N=t(30381),F=t.n(N),h=t(15577),z=t(15742),X=t(21433),B=t(45231),x=t(48947),Q=t(64530),i=t(7891),m=t(99732),v=t(24607),W=t(6917),P=t(94914),u=t(86674),l=t(86179),T=t(89499),G=t(89557),D=t(60967),M=t(31846),se=t(67055),ae=(0,O.Z)([`
  padding: 0 !important;
  line-height: 34px;
  .rowIndex {
    display: inline-block;
    width: 44px;
    text-align: center;
    .num {
      font-size: 13px;
      color: #9e9e9e;
    }
    .Checkbox-box {
      margin-right: -2px !important;
    }
  }
  .moreOperate {
    margin: 5px 8px 0 12px;
  }
  .open,
  .operateBtn,
  .moreOperate {
    display: none;
  }
  .operateBtn {
    margin: 0 13px;
  }
  .operateBtn,
  .open .icon {
    font-size: 18px;
    color: #9e9e9e;
    cursor: pointer;
    top: 2px;
    position: relative;
    &.delete:hover {
      color: #f44336;
    }
  }
  .delete {
    display: none;
  }
  &.hover {
    .open {
      display: inline-block;
    }
  }
  &.isNew {
    &::before {
      content: '';
      position: absolute;
      z-index: 3;
      left: 0;
      top: 0;
      bottom: 0;
      width: 2px;
      background: #2196f3;
    }
  }
  &:not(.disabled).hover {
    .delete,
    .open,
    .operateBtn,
    .moreOperate {
      display: inline-block;
    }
    .rowIndex {
      display: none;
    }
  }
  &.showCheckbox {
    .rowIndex {
      position: absolute;
      display: inline-block !important;
      z-index: 2;
      background: inherit;
    }
  }
  &.disabled:not(.showNumber) {
    text-align: center;
    .rowIndex {
      display: none;
    }
  }
`],[`
  padding: 0 !important;
  line-height: 34px;
  .rowIndex {
    display: inline-block;
    width: 44px;
    text-align: center;
    .num {
      font-size: 13px;
      color: #9e9e9e;
    }
    .Checkbox-box {
      margin-right: -2px !important;
    }
  }
  .moreOperate {
    margin: 5px 8px 0 12px;
  }
  .open,
  .operateBtn,
  .moreOperate {
    display: none;
  }
  .operateBtn {
    margin: 0 13px;
  }
  .operateBtn,
  .open .icon {
    font-size: 18px;
    color: #9e9e9e;
    cursor: pointer;
    top: 2px;
    position: relative;
    &.delete:hover {
      color: #f44336;
    }
  }
  .delete {
    display: none;
  }
  &.hover {
    .open {
      display: inline-block;
    }
  }
  &.isNew {
    &::before {
      content: '';
      position: absolute;
      z-index: 3;
      left: 0;
      top: 0;
      bottom: 0;
      width: 2px;
      background: #2196f3;
    }
  }
  &:not(.disabled).hover {
    .delete,
    .open,
    .operateBtn,
    .moreOperate {
      display: inline-block;
    }
    .rowIndex {
      display: none;
    }
  }
  &.showCheckbox {
    .rowIndex {
      position: absolute;
      display: inline-block !important;
      z-index: 2;
      background: inherit;
    }
  }
  &.disabled:not(.showNumber) {
    text-align: center;
    .rowIndex {
      display: none;
    }
  }
`]),ne=S.ZP.span(ae);function de($t){var an=$t.row,tn=an===void 0?{}:an,mt=$t.isNew,Lt=$t.changeSheetLayoutVisible,zt=$t.disabled,Zt=$t.allowAdd,Nt=$t.allowCancel,ct=$t.className,De=$t.style,_e=$t.isSelectAll,Le=$t.rowIndex,rt=$t.showCheckbox,Ct=$t.selectedRowIds,dt=$t.showNumber,It=dt===void 0?!0:dt,bt=$t.lineNumberBegin,Ut=bt===void 0?0:bt,Xt=$t.onOpen,pn=Xt===void 0?function(){}:Xt,tt=$t.onDelete,ht=tt===void 0?function(){}:tt,Dt=$t.onCopy,Ot=Dt===void 0?function(){}:Dt,Ht=$t.saveSheetLayout,Kt=Ht===void 0?function(){}:Ht,dn=$t.resetSheetLayout,Cn=dn===void 0?function(){}:dn,Rn=$t.onSelect,gn=Rn===void 0?function(){}:Rn,wn=$t.onSelectAll,On=wn===void 0?function(){}:wn,An=!/^temp/.test(tn.rowid),Yn=zt||An&&(!Zt||!Nt);return Le===-1?rt?a.createElement("div",{className:ct,style:De},a.createElement("span",{className:"rowIndex TxtCenter InlineBlock",style:{width:44}},a.createElement(D.Z,{size:"small",clearselected:!_e&&Ct.length,checked:_e,onClick:function(){On(!Ct.length)}}))):a.createElement("div",{className:ct,style:De},Lt&&a.createElement(se.Z,{title:_l("\u4F60\u53D8\u66F4\u4E86\u8868\u683C\u5217\u5BBD\uFF0C\u662F\u5426\u4FDD\u5B58\uFF1F"),description:_l("\u4FDD\u5B58\u5F53\u524D\u8868\u683C\u7684\u5217\u5BBD\u914D\u7F6E\uFF0C\u5E76\u5E94\u7528\u7ED9\u6240\u6709\u7528\u6237"),onSave:Kt,onCancel:Cn})):!tn.rowid||tn.rowid.startsWith("empty")?a.createElement(ne,{className:A()(ct,"placeholder"),style:De}):a.createElement(ne,{className:A()(ct,{disabled:zt||An&&!Zt&&!Nt,showNumber:It,showCheckbox:rt,isNew:!An}),style:De},a.createElement("span",{className:"rowIndex"},It&&!rt&&a.createElement("span",{className:A()("num")},Ut+Le+1),rt&&a.createElement(D.Z,{checked:d().includes(Ct,tn.rowid),size:"small",onClick:function(){gn(tn.rowid,!d().includes(Ct,tn.rowid))}})),!Yn&&a.createElement(M.Z,{popupAlign:{offset:[-12,0],points:["tl","bl"]},isSubList:!0,defaultCustomButtons:[],allowCopy:!0,shows:["copy"],allowDelete:!0,showTask:!1,showHr:!1,onDelete:ht,onCopy:Ot}),!zt&&An&&Zt&&!Nt&&a.createElement("i",{className:"operateBtn icon icon-copy hand ThemeHoverColor3",onClick:Ot}),!zt&&An&&Nt&&!Zt&&a.createElement("i",{className:"operateBtn delete icon icon-task-new-delete hand",onClick:ht}),a.createElement("span",{className:"open",onClick:function(){return pn(Le)}},a.createElement("i",{className:"icon icon-worksheet_enlarge ThemeHoverColor3"})))}de.propTypes={className:s().string,showCheckbox:s().bool,showNumber:s().bool,isSelectAll:s().bool,selectedRowIds:s().arrayOf(s().string),row:s().shape({}),allowAdd:s().bool,allowCancel:s().bool,disabled:s().bool,rowIndex:s().number,style:s().shape({}),onOpen:s().func,onDelete:s().func,onCopy:s().func,saveSheetLayout:s().func,resetSheetLayout:s().func,onSelect:s().func,onSelectAll:s().func};var Ce=t(33867),he=t(20148),fe=t(60385),Ee=t.n(fe),Y=t(98153),oe=(0,O.Z)([`
  .mobileTableHeader {
    background-color: #f7f7f7;
  }
  .tableIndex {
    width: 32px !important;
    .icon-task-new-delete {
      margin-left: -4px;
    }
  }
  .mobileTableItem {
    width: 0;
    padding: 8px 0 8px 6px;
    min-height: 36px;
    .editableCellCon {
      flex: 1;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      vertical-align: top;
    }
  }
  tbody tr:nth-child(even) {
    background-color: #00000003;
  }
  .showAll {
    color: #2196f3;
    padding: 10px 0;
    justify-content: center;
  }
  .icon-arrow-right-tip {
    width: 15px;
    text-align: center;
  }
`],[`
  .mobileTableHeader {
    background-color: #f7f7f7;
  }
  .tableIndex {
    width: 32px !important;
    .icon-task-new-delete {
      margin-left: -4px;
    }
  }
  .mobileTableItem {
    width: 0;
    padding: 8px 0 8px 6px;
    min-height: 36px;
    .editableCellCon {
      flex: 1;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      vertical-align: top;
    }
  }
  tbody tr:nth-child(even) {
    background-color: #00000003;
  }
  .showAll {
    color: #2196f3;
    padding: 10px 0;
    justify-content: center;
  }
  .icon-arrow-right-tip {
    width: 15px;
    text-align: center;
  }
`]),ve=Ee().alert,ue=S.ZP.div(oe);function pe($t){var an=$t.onOpen,tn=$t.controls,mt=$t.rows,Lt=$t.isEdit,zt=$t.allowcancel,Zt=$t.allowadd,Nt=$t.disabled,ct=$t.sheetSwitchPermit,De=$t.onDelete,_e=$t.showNumber,Le=$t.masterData,rt=10,Ct=(0,a.useState)(rt),dt=(0,C.Z)(Ct,2),It=dt[0],bt=dt[1],Ut=Lt?mt:mt.slice(0,It),Xt=tn.slice(0,3),pn=It===mt.length;return a.createElement(ue,null,a.createElement("div",{className:"mobileTableHeader flexRow valignWrapper"},!d().isEmpty(Ut)&&a.createElement("div",{className:"mobileTableItem tableIndex"}),Xt.map(function(tt,ht){return a.createElement("div",{key:ht,className:A()("mobileTableItem flex Font13",{mRight30:ht===Xt.length-1})},tt.controlName)})),Ut.map(function(tt,ht){return a.createElement("div",{className:"flexRow valignWrapper Font12",key:ht},a.createElement("div",{className:"mobileTableItem tableIndex"},Lt&&!Nt&&zt?a.createElement("i",{className:"icon icon-task-new-delete Font16 Gray_9e",onClick:function(){ve(_l("\u786E\u5B9A\u5220\u9664\u6B64\u8BB0\u5F55 ?"),"",[{text:_l("\u53D6\u6D88")},{text:a.createElement("span",{className:"Red"},_l("\u786E\u5B9A")),onPress:function(){De(tt.rowid)}}])}}):_e?ht+1:""),Xt.map(function(Dt,Ot){return a.createElement("div",{key:Ot,className:"mobileTableItem flex",onClick:function(){an(ht)}},a.createElement(Y.Z,{isMobileTable:!0,className:"cell flex ellipsis",sheetSwitchPermit:ct,cell:(0,ce.default)({},Dt,{value:tt[Dt.controlId]}),row:tt,rowHeight:30,from:4,mode:"mobileSub",masterData:Le}))}),a.createElement("div",{className:"flexRow valignWrapper"},a.createElement(Ce.Z,{className:"Gray_9e",icon:"arrow-right-tip"})))}),!Lt&&d().isEmpty(mt)&&a.createElement("div",{className:"Gray_9e mTop15 mLeft15 bold"},_l("\u6682\u65E0\u8BB0\u5F55")),!Lt&&mt.length>rt&&a.createElement("div",{className:"flexRow valignWrapper showAll",onClick:function(){bt(pn?rt:mt.length)}},a.createElement("span",null,pn?_l("\u6536\u8D77"):_l("\u67E5\u770B\u5168\u90E8")),a.createElement(Ce.Z,{className:"mLeft5",icon:pn?"arrow-up":"arrow-down"})))}pe.propTypes={onOpen:s().func,controls:s().arrayOf(s().shape({})),rows:s().arrayOf(s().shape({})),isEdit:s().bool};var Se=t(36612),ye=t(1952),J=t(57963),me=function(an){return(0,ye.Z)(J.Z,an)},be=t(59292),xe=t(42057),Ae=t(25273),Ne=t(42185),Me=t(27425),Fe=t(24538),Be,we,Ie,ge,Re;function Pe($t,an,tn,mt,Lt){var zt={};return Object.keys(mt).forEach(function(Zt){zt[Zt]=mt[Zt]}),zt.enumerable=!!zt.enumerable,zt.configurable=!!zt.configurable,("value"in zt||zt.initializer)&&(zt.writable=!0),zt=tn.slice().reverse().reduce(function(Zt,Nt){return Nt($t,an,Zt)||Zt},zt),Lt&&zt.initializer!==void 0&&(zt.value=zt.initializer?zt.initializer.call(Lt):void 0,zt.initializer=void 0),zt.initializer===void 0&&(Object.defineProperty($t,an,zt),zt=null),zt}var ke=(Ie=(Re=ge=function($t){(0,y.default)(an,$t);function an(tn){(0,L.default)(this,an);var mt=(0,R.default)(this,(an.__proto__||p()(an)).call(this,tn));return mt.formcon=a.createRef(),mt.customwidget=a.createRef(),mt.state={flag:Math.random()},mt}return(0,te.default)(an,[{key:"componentWillReceiveProps",value:function(mt){mt.data&&(mt.data.rowid!==this.props.data.rowid||this.props.isMobile&&!d().isEqual(mt.data,this.props.data))&&this.setState({flag:Math.random()})}},{key:"handleChange",value:function(){var mt=this.props,Lt=mt.data,zt=mt.isMobile,Zt=mt.onSave;if(!(!this.customwidget.current||zt)){var Nt=this.customwidget.current.getSubmitData({silent:!0}),ct=this.customwidget.current.dataFormat.getUpdateControlIds(),De=Nt.fullData,_e=[{}].concat((0,re.Z)(De)).reduce(function(){var Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ee()(Le,(0,b.default)({},rt.controlId,rt.value))});Zt((0,ce.default)({},Lt,_e,{empty:!1}),ct)}}},{key:"handleSave",value:function(mt){var Lt=this;if(this.customwidget.current){var zt=this.props,Zt=zt.data,Nt=zt.onSave,ct=zt.onClose,De=this.customwidget.current.getSubmitData(),_e=this.customwidget.current.dataFormat.getUpdateControlIds(),Le=De.fullData;if(De.error)return!1;var rt=[{}].concat((0,re.Z)(Le)).reduce(function(){var Ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ee()(Ct,(0,b.default)({},dt.controlId,dt.value))});Nt((0,ce.default)({},Zt,rt,{empty:!1}),_e),mt?this.setState({flag:Math.random()},function(){if(Lt.formcon.current){var Ct=Lt.formcon.current.querySelector(".customFieldsContainer .customFormItem .customFormTextareaBox input.smallInput");Ct&&Ct.click()}}):ct()}}},{key:"handleClose",value:function(){var mt=this.props.onClose;if($(this.formcon.current).find(".Progress--circle").length>0){alert(_l("\u9644\u4EF6\u6B63\u5728\u4E0A\u4F20\uFF0C\u8BF7\u7A0D\u540E"),3);return}mt()}},{key:"render",value:function(){var mt=this.props,Lt=mt.ignoreLock,zt=mt.disabled,Zt=mt.worksheetId,Nt=mt.projectId,ct=mt.controls,De=mt.data,_e=mt.getMasterFormData,Le=mt.handleUniqueValidate,rt=mt.appId,Ct=mt.onRulesLoad,dt=mt.searchConfig,It=mt.sheetSwitchPermit,bt=mt.isMobile,Ut=mt.isWorkflow,Xt=mt.from,pn=mt.masterData,tt=this.state.flag,ht=d().isEmpty(De)?ct:ct.filter(function(Ot){return!d().includes(["ownerid","caid","ctime","utime"],Ot.controlId)}).map(function(Ot){return(0,ce.default)({},Ot,{value:d().includes([19,23,24],Ot.type)&&d().isObject(De[Ot.controlId])?De[Ot.controlId].text:De[Ot.controlId],count:De["rq"+Ot.controlId]})}),Dt=De.rowid&&De.rowid.startsWith("temp")?void 0:De.rowid;return a.createElement(x.Z.Provider,{value:{recordBaseInfo:{appId:rt,worksheetId:Zt,recordId:De.rowid}}},a.createElement("div",{ref:this.formcon},a.createElement(Fe.Z,{ignoreLock:Lt,worksheetId:Zt,disabled:zt,searchConfig:dt,sheetSwitchPermit:It,columnNumber:1,from:bt&&Ut||Dt?3:2,isDraft:Xt===21,isCreate:!1,recordId:Dt,ref:this.customwidget,masterData:pn,data:ht.map(function(Ot){return(0,ce.default)({},Ot,{fieldPermission:(0,T.XS)(Ot)?"000":Ot.fieldPermission,controlPermissions:(0,T.XS)(Ot)?"000":Ot.controlPermissions,isSubList:!0})}).filter(function(Ot){return!d().includes([34].concat(d().get(window,"shareState.isPublicForm")?[48]:[]),Ot.type)}),getMasterFormData:_e,flag:tt,projectId:Nt,appId:rt,checkCellUnique:function(){for(var Ht=arguments.length,Kt=Array(Ht),dn=0;dn<Ht;dn++)Kt[dn]=arguments[dn];return Le.apply(void 0,Kt.concat([De.rowid]))},onChange:this.handleChange,onRulesLoad:Ct,ignoreSection:!0})))}}]),an}(a.Component),ge.propTypes={ignoreLock:s().bool,disabled:s().bool,className:s().string,projectId:s().string,controls:s().arrayOf(s().shape({})),data:s().shape({}),getMasterFormData:s().func,handleUniqueValidate:s().func,onSave:s().func,onClose:s().func},ge.defaultProps={controls:[],getMasterFormData:function(){},onSave:function(){},onClose:function(){}},Re),Pe(Ie.prototype,"handleChange",[E.Nj],H()(Ie.prototype,"handleChange"),Ie.prototype),Pe(Ie.prototype,"handleSave",[E.Nj],H()(Ie.prototype,"handleSave"),Ie.prototype),Pe(Ie.prototype,"handleClose",[E.Nj],H()(Ie.prototype,"handleClose"),Ie.prototype),Ie);function We($t){var an=$t.disabled,tn=$t.allowDelete,mt=$t.className,Lt=$t.title,zt=$t.visible,Zt=$t.aglinBottom,Nt=$t.data,ct=$t.switchDisabled,De=ct===void 0?{}:ct,_e=$t.onClose,Le=$t.onDelete,rt=$t.onSwitch,Ct=(0,a.useRef)(null),dt=(0,h.Q9)(),It=a.createElement(Ae.Z,null,a.createElement("div",{className:"rowDetailCon flexColumn",style:{height:"100%"}},a.createElement("div",{className:"header flexRow"},a.createElement(Ne.ZP,{size:"mdbig",type:"ghostgray",disabled:De.prev,className:"switchButton",onClick:function(){return!De.prev&&rt({prev:!0})}},a.createElement("i",{className:"icon icon-arrow-up-border"}),a.createElement("span",{className:"text"},_l("\u4E0A\u4E00\u6761"))),a.createElement(Ne.ZP,{size:"mdbig",type:"ghostgray",disabled:De.next,className:"switchButton",onClick:function(){return!De.next&&rt({next:!0})}},a.createElement("i",{className:"icon icon-arrow-down-border"}),a.createElement("span",{className:"text"},_l("\u4E0B\u4E00\u6761"))),a.createElement("div",{className:"flex"}),!an&&tn&&a.createElement(Me.Z,{className:"headerBtn Hand ThemeHoverColor3 delete",onClick:function(){Le(Nt.rowid),_e()}},a.createElement("i",{className:"icon icon-task-new-delete"})),a.createElement(Me.Z,{className:"headerBtn Hand ThemeHoverColor3",onClick:function(){Ct.current&&Ct.current.handleClose()}},a.createElement("i",{className:"icon icon-close"}))),a.createElement("div",{className:"forCon flex"},a.createElement("div",{className:"title"},Lt),a.createElement(ke,(0,ce.default)({ref:Ct},$t)))));return a.createElement(xe.Z,(0,b.default)({className:A()("childTableRowDetailDialog",mt),verticalAlign:Zt&&"bottom",type:"fixed",visible:!0,width:dt?window.innerWidth-20:window.innerWidth-52*2>1600?1600:window.innerWidth-52*2,bodyStyle:{height:dt?window.innerHeight-20*2:window.innerHeight-32*2},onCancel:_e},"visible",zt),It)}We.propTypes={disabled:s().bool,allowDelete:s().bool,visible:s().bool,className:s().string,onClose:s().func};var Ve=t(80426),it=t(59012),Ge=t.n(it),pt=t(63627),ot=t(81982),vt=t.n(ot),At=Ee().alert;function yt($t){var an=$t.mobileIsEdit,tn=$t.className,mt=$t.data,Lt=$t.title,zt=$t.visible,Zt=$t.switchDisabled,Nt=Zt===void 0?{}:Zt,ct=$t.onClose,De=$t.onDelete,_e=$t.onSwitch,Le=$t.allowDelete,rt=(0,a.useRef)(null),Ct=mt.rowid||"",dt=an&&(Ct.includes("temp")||Ct.includes("default"))?"new":"edit",It=an?$t.disabled:!0,bt=a.createElement("div",{className:"rowDetailCon flexColumn",style:{height:"100%"}},a.createElement("div",{className:A()("header flexRow valignWrapper",dt)},a.createElement("div",{className:"title Font18 Gray flex bold leftAlign ellipsis"},dt==="new"&&Lt),["edit","new"].includes(dt)&&a.createElement("div",{className:"pRight10"},a.createElement("i",{className:A()("headerBtn icon icon-arrow-up-border mRight8 Font18",{Gray_df:Nt.prev}),onClick:function(){return!Nt.prev&&_e({prev:!0})}}),a.createElement("i",{className:A()("headerBtn icon icon-arrow-down-border Font18",{Gray_df:Nt.next}),onClick:function(){return!Nt.next&&_e({next:!0})}})),!$t.disabled&&Le&&a.createElement("i",{className:"headerBtn icon icon-task-new-delete mRight10 Font18",onClick:function(){At(_l("\u786E\u5B9A\u5220\u9664\u6B64\u8BB0\u5F55 ?"),"",[{text:_l("\u53D6\u6D88")},{text:a.createElement("span",{className:"Red"},_l("\u786E\u5B9A")),onPress:function(){De(mt.rowid),ct()}}])}}),a.createElement("i",{className:"headerBtn icon icon-close Gray_9e Font20",onClick:ct})),a.createElement("div",{className:"forCon flex leftAlign"},dt==="edit"&&a.createElement("div",{className:"title Font18 Gray flex bold leftAlign ellipsis mBottom10"},Lt),a.createElement(ke,(0,ce.default)({isMobile:!0,from:5,ref:rt},$t,{disabled:dt==="new"?!1:It}))),!(dt!=="new"&&It)&&a.createElement("div",{className:"footer btnsWrapper valignWrapper flexRow"},a.createElement(Ge(),{className:"flex",size:"sm"},a.createElement(vt(),{type:"primary",className:"bold",onClick:function(){return rt.current.handleSave()}},_l("\u4FDD\u5B58")))));return a.createElement(Ee(),{popup:!0,animationType:"slide-up",className:A()("childTableRowDetailMobileDialog",tn),onCancel:ct,visible:zt},bt)}yt.propTypes={disabled:s().bool,visible:s().bool,className:s().string,onClose:s().func};var st=t(61805),St=t(37139),Qe=t(2641),Xe,$e,Ke,Ue,He,ze=(0,O.Z)([`
  color: #9e9e9e;
  display: inline-block;
  height: 28px;
  font-size: 20px;
  line-height: 28px;
  padding: 0 4px;
  border-radius: 5px;
  &:hover {
    background: #f7f7f7;
  }
`],[`
  color: #9e9e9e;
  display: inline-block;
  height: 28px;
  font-size: 20px;
  line-height: 28px;
  padding: 0 4px;
  border-radius: 5px;
  &:hover {
    background: #f7f7f7;
  }
`]),gt=(0,O.Z)([`
  font-size: 13px;
  color: #9e9e9e;
  margin-right: 16px;
`],[`
  font-size: 13px;
  color: #9e9e9e;
  margin-right: 16px;
`]),Et=(0,O.Z)([`
  display: flex;
  align-items: center;
  width: 100%;
  height: 36px;
  cursor: pointer;
  padding-left: 14px;
  font-size: 12px;
  .hoverShow {
    visibility: hidden;
  }
  &:hover {
    background: #f8f8f8;
    .hoverShow {
      visibility: visible;
    }
  }
`],[`
  display: flex;
  align-items: center;
  width: 100%;
  height: 36px;
  cursor: pointer;
  padding-left: 14px;
  font-size: 12px;
  .hoverShow {
    visibility: hidden;
  }
  &:hover {
    background: #f8f8f8;
    .hoverShow {
      visibility: visible;
    }
  }
`]),ft=(0,O.Z)([`
  margin-left: 32px;
  height: 28px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 1px solid #eaeaea;
  border-radius: 4px;
  padding: 0 8px;
  background: #fff;
  &:hover {
    color: #2196f3;
  }
`],[`
  margin-left: 32px;
  height: 28px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 1px solid #eaeaea;
  border-radius: 4px;
  padding: 0 8px;
  background: #fff;
  &:hover {
    color: #2196f3;
  }
`]);function qe($t,an,tn,mt,Lt){var zt={};return Object.keys(mt).forEach(function(Zt){zt[Zt]=mt[Zt]}),zt.enumerable=!!zt.enumerable,zt.configurable=!!zt.configurable,("value"in zt||zt.initializer)&&(zt.writable=!0),zt=tn.slice().reverse().reduce(function(Zt,Nt){return Nt($t,an,Zt)||Zt},zt),Lt&&zt.initializer!==void 0&&(zt.value=zt.initializer?zt.initializer.call(Lt):void 0,zt.initializer=void 0),zt.initializer===void 0&&(Object.defineProperty($t,an,zt),zt=null),zt}var nt=S.ZP.span(ze),Ze=S.ZP.div(gt),et=S.ZP.div(Et),ut=S.ZP.div(ft),xt=(0,h.Q9)(),wt=z.nh.map(function($t){return(0,ce.default)({},$t,{fieldPermission:"111"})}),kt=1e3,Rt=(Ke=(He=Ue=function($t){(0,y.default)(an,$t);function an(tn){(0,L.default)(this,an);var mt=(0,R.default)(this,(an.__proto__||p()(an)).call(this,tn));return mt.worksheettable=a.createRef(),mt.state={controls:mt.getControls(tn),tempSheetColumnWidths:{},previewRowIndex:null,recordVisible:!1,loading:!!tn.recordId&&!tn.initSource&&!((0,o.get)(tn,"base.loaded")||(0,o.get)(tn,"base.reset")),selectedRowIds:[],pageIndex:1,keywords:"",pageSize:mt.settings.rownum},mt.state.sheetColumnWidths=mt.getSheetColumnWidths(),mt.controls=tn.controls,mt.abortController=typeof AbortController<"u"&&new AbortController,mt.requestPool=(0,St.O)({abortController:mt.abortController}),tn.registerCell(mt),mt}return(0,te.default)(an,[{key:"componentDidMount",value:function(){var mt=this,Lt=this.props,zt=Lt.mode,Zt=Lt.control,Nt=Lt.recordId,ct=Lt.needResetControls;this.updateDefsourceOfControl(),Nt&&((0,o.get)(this,"props.base.loaded")||(0,o.get)(this,"props.base.reset")||this.loadRows(void 0,{needResetControls:ct})),d().isFunction(Zt.addRefreshEvents)&&Zt.addRefreshEvents(Zt.controlId,function(De){return mt.refresh(null,De)}),$(this.childTableCon).on("mouseenter",".cell:not(.row-head)",this.handleMouseEnter),$(this.childTableCon).on("mouseleave",".cell:not(.row-head)",this.handleMouseLeave),window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillReceiveProps",value:function(mt){var Lt=this,zt=(0,T.h4)(this.props.control.advancedSetting),Zt=zt.max,Nt=Zt===void 0?500:Zt;mt.refreshFlag&&mt.refreshFlag!==this.props.refreshFlag&&this.refresh();var ct=this.props.initRows;this.updateDefsourceOfControl(mt);var De=this.props.control,_e=mt.control,Le=!mt.recordId,rt=!d().isEqual(De.value,_e.value);if(mt.recordId!==this.props.recordId?this.refresh(mt,{needResetControls:!1}):Le&&rt&&typeof _e.value>"u"&&ct([]),(_e.controlId!==De.controlId||!d().isEqual(_e.showControls,De.showControls)||!d().isEqual((De.relationControls||[]).map(function(Ut){return Ut.fieldPermission}),(_e.relationControls||[]).map(function(Ut){return Ut.fieldPermission}))||!d().isEqual((De.relationControls||[]).map(function(Ut){return Ut.required}),(_e.relationControls||[]).map(function(Ut){return Ut.required})))&&this.setState({controls:this.getControls(mt)}),mt.control.sideVisible!==this.props.control.sideVisible||mt.control.formWidth!==this.props.control.formWidth)try{setTimeout(function(){Lt.worksheettable&&Lt.worksheettable.current&&Lt.worksheettable.current.handleUpdate()},100)}catch(Ut){console.error(Ut)}if(!d().isEqual(this.props.rows,mt.rows)){var Ct=this.state,dt=Ct.pageIndex,It=Ct.pageSize,bt=Math.ceil(mt.rows.length/It);dt>bt&&this.setState({pageIndex:bt})}}},{key:"shouldComponentUpdate",value:function(mt,Lt){return d().isEqual(this.state,Lt)?!d().isEqual(this.props.rows,mt.rows)||!d().isEqual(this.props.cellErrors,mt.cellErrors)||!d().isEqual(this.props.mobileIsEdit,mt.mobileIsEdit)||!d().isEqual(this.props.control.relationControls,mt.control.relationControls)||!d().isEqual(this.props.control.fieldPermission,mt.control.fieldPermission):!0}},{key:"componentWillUnmount",value:function(){var mt=this.props,Lt=mt.mode,zt=mt.control;Lt!=="dialog"&&d().isFunction(zt.addRefreshEvents)&&zt.addRefreshEvents(zt.controlId,void 0),$(this.childTableCon).off("mouseenter",".cell:not(.row-head)",this.handleMouseEnter),$(this.childTableCon).off("mouseleave",".cell:not(.row-head)",this.handleMouseLeave),window.removeEventListener("keydown",this.handleKeyDown),this.abortController&&this.abortController.abort&&this.abortController.abort()}},{key:"getControls",value:function(mt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},zt=Lt.newControls;mt=mt||this.props;var Zt=mt,Nt=Zt.baseLoading,ct=Zt.from,De=Zt.appId,_e=Zt.base,Le=_e===void 0?{}:_e,rt=Zt.control,Ct=rt===void 0?{}:rt,dt=Zt.updateBase,It=Le.instanceId,bt=Le.workId,Ut=Le.worksheetInfo,Xt=(It&&bt||window.shareState.isPublicWorkflowRecord)&&Ut.workflowChildTableSwitch!==!1,pn=Ct.showControls,tt=pn===void 0?[]:pn,ht=Ct.advancedSetting,Dt=ht===void 0?{}:ht,Ot=Ct.relationControls,Ht=Ot===void 0?[]:Ot;if(Nt)return[];var Kt=(0,T.zj)(De,((0,o.get)(Le,"controls")||mt.controls).map(function(Rn){return(0,ce.default)({},Rn,Xt?{}:{controlPermissions:(0,T.XS)(Rn)||Rn.type===34?"000":(0,v.kM)(Ct,ct).editable?"111":"101"})})),dn=[];try{dn=JSON.parse(Dt.controlssorts)}catch(Rn){}var Cn=(0,T._4)(zt||Kt,d().isEmpty(dn)?tt:dn).map(function(Rn){var gn=(0,ce.default)({},Rn),wn=d().find(Ht.concat(wt),{controlId:gn.controlId});return wn&&(gn.required=wn.required,gn.fieldPermission=wn.fieldPermission),d().find(tt,function(On){return gn.controlId===On})?gn.fieldPermission=(0,T.m9)(gn.fieldPermission||"111",2,"1"):gn.fieldPermission="000",Xt?gn.controlPermissions=(0,T.m9)(gn.controlPermissions||"111",2,"1"):gn.controlPermissions="111",(gn.controlId==="ownerid"||d().get(window,"shareState.isPublicWorkflowRecord")&&d().includes([u.DN.USER_PICKER,u.DN.DEPARTMENT,u.DN.ORG_ROLE],gn.type))&&(gn.controlPermissions=(0,T.m9)(gn.controlPermissions||"111",1,"0"),gn.fieldPermission=(0,T.m9)(gn.fieldPermission||"111",1,"0")),gn});return dt({controls:Cn}),Cn=Cn.filter(function(Rn){return Rn&&!(window.isPublicWorksheet&&d().includes([u.DN.USER_PICKER,u.DN.DEPARTMENT],Rn.type))}),Cn}},{key:"updateAbortController",value:function(){this.abortController&&this.abortController.abort&&this.abortController.abort(),this.abortController=typeof AbortController<"u"&&new AbortController,this.requestPool=(0,St.O)({abortController:this.abortController})}},{key:"getControl",value:function(mt){return d().find(this.state.controls,{controlId:mt})}},{key:"handleKeyDown",value:function(mt){mt.ctrlKey&&mt.key==="Enter"&&this.childTableCon.querySelector(".cell.focus")&&(mt.preventDefault(),mt.stopPropagation(),this.handleAddRowByLine())}},{key:"handleClearAndSetRows",value:function(mt){var Lt=this.props,zt=Lt.control,Zt=Lt.clearAndSetRows,Nt=this.state.controls,ct=Nt===void 0?[]:Nt,De=safeParse(zt.advancedSetting.sorts)[0];if(De&&De.controlId){var _e=d().find(ct,function(Le){return Le.controlId===De.controlId});if(_e){Zt((0,T._3)(mt,_e,De.isAsc));return}}Zt(mt)}},{key:"updateDefsourceOfControl",value:function(mt){var Lt=mt||this.props,zt=Lt.recordId,Zt=Lt.control.controlId,Nt=Lt.masterData,ct=this.state.controls;this.setState({controls:ct.map(function(De){if(De.type===29&&De.sourceControlId===Zt)try{return De.advancedSetting=d().assign({},De.advancedSetting,{defsource:le()([{staticValue:le()([le()((0,ce.default)({rowid:zt},[{}].concat((0,re.Z)(Nt.formData.filter(function(_e){return _e.type!==34}))).reduce(function(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ee()(_e,(0,b.default)({},Le.controlId,Le.type===29&&d().isObject(Le.value)&&Le.value.records?le()(Le.value.records.map(function(rt){return{sid:rt.rowid,sourcevalue:le()(rt)}})):Le.value))})))])}])}),De}catch(_e){}else return De})})}},{key:"loadRows",value:function(mt){var Lt=this,zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Zt=zt.needResetControls,Nt=mt||this.props,ct=Nt.control,De=Nt.recordId,_e=Nt.masterData,Le=Nt.loadRows,rt=Nt.from;!De||!_e||Le({getWorksheet:Zt,worksheetId:_e.worksheetId,recordId:De,controlId:ct.controlId,isCustomButtonFillRecord:ct.isCustomButtonFillRecord,from:rt,callback:function(dt){if(dt===null){Lt.setState({error:_l("\u6CA1\u6709\u6743\u9650")});return}var It={loading:!1};if(Zt){var bt=(d().get(dt,"worksheet.template.controls")||d().get(dt,"template.controls")).concat(wt),Ut=(0,T.h4)(ct.advancedSetting),Xt=Ut.uniqueControlIds;bt=bt.map(function(pn){return(0,ce.default)({},pn,{uniqueInRecord:(0,o.includes)(Xt,pn.controlId)&&(0,P.fu)(pn)})}),bt&&bt.length&&(It.controls=Lt.getControls(mt,{newControls:bt}))}Lt.setState(It)}})}},{key:"refresh",value:function(mt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},zt=Lt.needResetControls,Zt=zt===void 0?!0:zt;this.setState({loading:!0,sortedControl:void 0,isBatchEditing:!1,selectedRowIds:[],pageIndex:1}),this.loadRows(mt,{needResetControls:Zt})}},{key:"getShowColumns",value:function(){var mt=this.props.control,Lt=this.state.controls,zt=window.isPublicWorksheet?[48]:[];return Lt.length?Lt.filter(function(Zt){return d().find(mt.showControls,function(Nt){return Nt===Zt.controlId})&&Zt.type!==34&&(0,v.kM)(Zt).visible&&!(0,T.XS)(Zt)&&!d().includes(zt.concat(z.CC),Zt.type)}).map(function(Zt){return d().assign({},Zt)}):[{}]}},{key:"getSheetColumnWidths",value:function(mt){mt=mt||this.props.control;var Lt=this.getShowColumns(),zt={},Zt=[];try{Zt=JSON.parse(mt.advancedSetting.widths)}catch(Nt){}return Lt.forEach(function(Nt,ct){zt[Nt.controlId]=Zt[ct]}),zt}},{key:"newRow",value:function(mt){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},zt=Lt.isDefaultValue,Zt=Lt.isCreate,Nt=Lt.isQueryWorksheetFill,ct=zt?"default-"+(0,w.Z)():"temp-"+(0,w.Z)(),De=this.rowUpdate({row:mt,rowId:ct},{isCreate:Zt,isQueryWorksheetFill:Nt});return(0,ce.default)({},De,{rowid:ct,allowedit:!0,addTime:new Date().getTime()})}},{key:"copyRow",value:function(mt){var Lt=this.props.addRow;Lt(ee()({},d().omit((0,T.xw)(this.state.controls,mt),["updatedControlIds"]),{rowid:"temp-"+(0,w.Z)(),allowedit:!0,isCopy:!0,addTime:new Date().getTime()}),mt.rowid)}},{key:"copyRows",value:function(mt){var Lt=this,zt=this.props.addRows,Zt=mt.map(function(Nt){return ee()({},d().omit((0,T.xw)(Lt.state.controls,Nt),["updatedControlIds"]),{rowid:"temp-"+(0,w.Z)(),allowedit:!0,isCopy:!0,addTime:new Date().getTime()})});zt(Zt)}},{key:"rowUpdate",value:function(){var mt=this,Lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},zt=Lt.row,Zt=Lt.controlId,Nt=Lt.value,ct=Lt.rowId,De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e=De.isCreate,Le=_e===void 0?!1:_e,rt=De.isQueryWorksheetFill,Ct=rt===void 0?!1:rt,dt=this.props,It=dt.masterData,bt=dt.recordId,Ut=this.worksheetInfo,Xt=Ut.projectId,pn=Ut.rules,tt=pn===void 0?[]:pn,ht=this.searchConfig,Dt=function(Kt,dn){mt.handleUpdateCell({control:mt.getControl(Kt),cell:{controlId:Kt,value:dn},row:{rowid:ct||(zt||{}).rowid}},{isQueryWorksheetFill:Ct,asyncUpdate:!0,updateSuccessCb:function(Rn){xt&&mt.handleRowDetailSave(Rn)}})},Ot=new Se.ZP({requestPool:this.requestPool,data:this.state.controls.map(function(Ht){var Kt=(zt||{})[Ht.controlId];return d().isUndefined(Kt)&&(Le||!zt)&&(Kt=Ht.value),(0,ce.default)({},Ht,{isSubList:!0,isQueryWorksheetFill:Ct,value:Kt})}),isCreate:Le||!zt,from:W.BD.NEWRECORD,rules:tt,searchConfig:ht,projectId:Xt,masterData:It,abortController:this.abortController,masterRecordRowId:bt,onAsyncChange:function(Kt){d().isEmpty(Kt.controlIds)?Kt.controlId&&Dt(Kt.controlId,Kt.value):Kt.controlIds.forEach(function(dn){Dt(dn,Kt.value)})}});return Zt&&Ot.updateDataSource({controlId:Zt,value:Nt}),[(0,ce.default)({},zt||{},{rowid:zt?zt.rowid:ct,updatedControlIds:d().uniqBy((zt&&zt.updatedControlIds||[]).concat(Ot.getUpdateControlIds()))})].concat((0,re.Z)(Ot.getDataSource())).reduce(function(){var Ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ee()(Ht,(0,b.default)({},Kt.controlId,Kt.value))})}},{key:"handleSetPageIndexWhenAddRow",value:function(mt){var Lt=this.state,zt=Lt.pageSize,Zt=Lt.pageIndex,Nt=Zt;return this.showAsPages&&mt>zt&&(Nt=Math.ceil(mt/zt),Zt!==Nt&&this.setState({pageIndex:Nt})),Nt}},{key:"handleAddRowByLine",value:function(){var mt=this,Lt=this.props,zt=Lt.from,Zt=Lt.control,Nt=Lt.addRow,ct=Lt.rows,De=this.state,_e=De.pageSize,Le=De.pageIndex,rt=this.settings.maxCount,Ct=this.settings.rownum,dt=(0,v.kM)(Zt,zt),It=!dt.editable||Zt.disabled,bt=(0,T.h4)(Zt.advancedSetting),Ut=bt.allowadd,Xt=(0,T.CD)(ct),pn=Xt.length>=rt||It||!Ut;if(!pn){var tt=this.handleSetPageIndexWhenAddRow(Xt.length+1);this.updateDefsourceOfControl();var ht=this.newRow();Nt(ht),setTimeout(function(){try{mt.worksheettable.current.table.refs.setScroll(0,ct.length+1>Ct?1e5:0),setTimeout(function(){var Dt=mt.worksheettable.current.table.refs.dom.current.querySelector(".cell.row-"+(mt.showAsPages&&tt>1?Xt.length%(_e*(tt-1)):Xt.length)+".canedit");Dt&&Dt.click()},100)}catch(Dt){}},100)}}},{key:"handleImport",value:function(){var mt=this,Lt=this.props,zt=Lt.control,Zt=Lt.masterData,Nt=Lt.rows,ct=Lt.addRows,De=this.worksheetInfo.projectId,_e=this.getShowColumns();if(!_e.filter(function(Le){return d().includes(z.ML,Le.type)}).length){alert(_l("\u6CA1\u6709\u652F\u6301\u5BFC\u5165\u7684\u5B57\u6BB5"),3);return}me({projectId:De,maxCount:this.settings.maxCount,worksheetId:Zt.worksheetId,controlId:zt.controlId,dataCount:(0,T.CD)(Nt).length,controls:_e,onAddRows:function(rt){ct(rt.slice(0,mt.settings.maxCount-(0,T.CD)(Nt).length).map(function(Ct){return mt.newRow(Ct,{isCreate:!0})}))}})}},{key:"handleAddRowsFromRelateRecord",value:function(mt){var Lt=this,zt=this.props,Zt=zt.addRows,Nt=zt.control,ct=zt.rows,De=this.worksheetInfo.entityName,_e=this.state.controls,Le=mt[0];if(Le){this.updateDefsourceOfControl();var rt=this.newRow(),Ct=xt?m.K:i.selectRecord;Ct({entityName:De,canSelectAll:!0,multiple:!0,control:Le,controlId:Le.controlId,parentWorksheetId:Nt.dataSource,allowNewRecord:!1,viewId:Le.viewId,relateSheetId:Le.dataSource,filterRowIds:Le.unique||Le.uniqueInRecord?(ct||[]).map(function(dt){return d().get(safeParse(dt[Le.controlId],"array"),"0.sid")}).filter(d().identity):[],formData:_e.map(function(dt){return(0,ce.default)({},dt,{value:rt[dt.controlId]})}).concat(this.props.masterData.formData),onOk:function(It){var bt=(0,T.CD)(ct).length;bt+It.length>Lt.settings.maxCount&&alert(_l("\u6700\u591A\u8F93\u5165%0\u6761\u8BB0\u5F55\uFF0C\u8D85\u51FA\u7684\u8BB0\u5F55\u4E0D\u5199\u5165",Lt.settings.maxCount),3),Zt(It.slice(0,Lt.settings.maxCount-bt).map(function(Ut){var Xt=Lt.rowUpdate({row:Lt.newRow(),controlId:Le.controlId,value:le()((0,T.VM)(Le.relationControls,[Ut]))});return Xt})),Lt.handleSetPageIndexWhenAddRow(bt+It.length),setTimeout(function(){try{Lt.worksheettable.current.table.refs.setScroll(0,1e5)}catch(Ut){}},100)}})}}},{key:"handleUpdateCell",value:function(mt,Lt){var zt=mt.control,Zt=mt.cell,Nt=mt.row,ct=Nt===void 0?{}:Nt,De=this.props,_e=De.rows,Le=De.updateRow,rt=De.addRow,Ct=this.state.controls,dt=d().find(_e,function(tt){return tt.rowid===ct.rowid});if(!dt)return;var It=Zt.value,bt=this.rowUpdate({row:dt,controlId:Zt.controlId,value:It},(0,ce.default)({},Lt,{control:zt}));function Ut(){d().isFunction(Lt.updateSuccessCb)&&Lt.updateSuccessCb(bt),Le({rowid:ct.rowid,value:bt},{asyncUpdate:Lt.asyncUpdate})}if(d().includes([u.DN.MULTI_SELECT,u.DN.DROP_DOWN],zt.type)&&/{/.test(It)){var Xt=(0,ce.default)({index:zt.options.length+1,isDeleted:!1,key:d().last(JSON.parse(It))},JSON.parse(d().last(JSON.parse(It)))),pn=(0,ce.default)({},zt,{options:d().uniqBy([].concat((0,re.Z)(zt.options),[Xt]),"key")});this.setState({controls:Ct.map(function(tt){return tt.controlId===zt.controlId?pn:tt})},Ut);return}Ut.apply(this)}},{key:"handleRowDetailSave",value:function(mt,Lt){var zt=this.props,Zt=zt.updateRow,Nt=zt.addRow,ct=this.state,De=ct.previewRowIndex,_e=ct.controls,Le=(0,T.II)(_e.map(function(rt){return(0,ce.default)({},rt,{value:mt[rt.controlId]})}),mt);this.setState({controls:_e.map(function(rt){var Ct=d().find(Le,{controlId:rt.controlId});return Ct?(0,ce.default)({},Ct,{value:rt.value}):rt})},function(){mt.updatedControlIds=d().isEmpty(mt.updatedControlIds)?Lt:d().uniqBy(mt.updatedControlIds.concat(Lt)),mt.updatedControlIds=mt.updatedControlIds.concat(_e.filter(function(rt){return d().find(Lt,function(Ct){return((rt.advancedSetting||{}).defsource||"").includes(Ct)})}).map(function(rt){return rt.controlId})),De>-1?Zt({rowid:mt.rowid,value:mt}):Nt(mt)})}},{key:"handleSwitch",value:function(mt){var Lt=mt.prev,zt=mt.next,Zt=this.state.previewRowIndex,Nt=void 0;Lt?Nt=Zt-1:Nt=Zt+1,this.openDetail(Nt)}},{key:"openDetail",value:function(mt){var Lt=this.props,zt=Lt.control,Zt=Lt.rows,Nt=Zt===void 0?[]:Zt,ct=Nt[mt]||{},De=ct.rowid;this.setState({previewRowIndex:mt,recordVisible:!0})}},{key:"handleClearCellError",value:function(mt){var Lt=this.props,zt=Lt.cellErrors,Zt=Lt.updateCellErrors;Zt(d().omit(zt,[mt]))}},{key:"compareValue",value:function(mt,Lt,zt){try{return mt&&mt.type===26?d().isEqual(safeParse(Lt,"array").map(function(Zt){return Zt.accountId}),safeParse(zt,"array").map(function(Zt){return Zt.accountId})):Lt===zt}catch(Zt){return console.log(Zt),!1}}},{key:"handleUniqueValidate",value:function(mt,Lt,zt,Zt){var Nt=this,ct=this.props,De=ct.rows,_e=ct.control,Le=ct.updateCellErrors,rt=this.state.controls,Ct=d().find(rt,{controlId:mt}),dt=(0,T.h4)(_e.advancedSetting),It=dt.uniqueControlIds,bt=!d().find(zt?De.filter(function(Ut){return Ut.rowid!==zt}):De,function(Ut){return Nt.compareValue(Ct,Ut[mt],Lt)});if(d().includes(It,mt))return bt;if(bt)if(Zt)Ct&&Ct.unique&&!Ct.uniqueInRecord&&B.Z.checkFieldUnique({worksheetId:_e.dataSource,controlId:mt,controlType:Ct.type,controlValue:Lt}).then(function(Ut){!Ut.isSuccess&&Ut.data&&Ut.data.rowId!==zt?Le((0,b.default)({},zt+"-"+mt,W.MP.UNIQUE(Ct,!0))):Ut.isSuccess});else return!0;else return!1}},{key:"handleMouseEnter",value:function(mt){var Lt=$(mt.target).closest(".cell")[0];if(Lt){$(Lt).addClass("errorActive");var zt=this.props,Zt=zt.rows,Nt=zt.cellErrors,ct=this.getShowColumns(),De=/cellControlErrorStatus/.test(Lt.className),_e=/iseditting/.test(Lt.className),Le=Number(Lt.className.match(/ row-([0-9]+) /)[1]),rt=Number(Lt.className.match(/ col-([0-9]+) /)[1]),Ct=(Zt[Le]||{}).rowid,dt=(ct[rt-1]||{}).controlId;if(De&&!_e&&Ct&&dt){var It=Nt[Ct+"-"+dt];if(It){var bt=(0,h.j4)(`<div
            class="mdTableErrorTip"
            style="
              position: absolute;
              font-size: 12px;
              padding: 0px 8px;
              height: 26px;
              line-height: 26px;
              white-space: nowrap;
              background: #f44336;
              zIndex: 2;
              color: #fff";
          >
            `+It+`
          </div>`);Lt.parentElement.appendChild(bt);var Ut=Lt.offsetTop+(/row-0/.test(Lt.getAttribute("class"))?Lt.offsetHeight-1:-1*bt.offsetHeight),Xt=Lt.offsetLeft;bt.style.top=Ut+"px",bt.style.left=Xt+"px"}}}}},{key:"handleMouseLeave",value:function(){$(".mdTableErrorTip").remove(),$(".cell").removeClass("errorActive")}},{key:"render",value:function(){var mt=this,Lt=this.props,zt=Lt.mode,Zt=Lt.maxHeight,Nt=Lt.cellErrors,ct=Lt.from,De=Lt.recordId,_e=Lt.viewId,Le=Lt.control,rt=Lt.rows,Ct=Lt.deleteRow,dt=Lt.deleteRows,It=Lt.sortRows,bt=Lt.addRow,Ut=Lt.updateRow,Xt=Lt.exportSheet,pn=Lt.mobileIsEdit,tt=Lt.appId,ht=Lt.sheetSwitchPermit,Dt=Lt.showSearch,Ot=Lt.showExport,Ht=Lt.updateBase,Kt=Lt.masterData,dn=this.worksheetInfo,Cn=dn.projectId,Rn=dn.rules,gn=this.searchConfig,wn=(0,T.h4)(Le.advancedSetting),On=wn.allowadd,An=wn.allowcancel,Yn=wn.allowedit,kn=wn.batchcids,Fn=wn.allowsingle,$n=wn.hidenumber,ba=wn.rowheight,ua=wn.showtype,La=wn.enablelimit,ga=wn.min,Ua=wn.max,yr=wn.rownum,sr=wn.blankrow,Ba=this.settings.maxCount,cr=this.props.maxShowRowCount||yr,hr=z.dN[ba]||34,Qa=this.showAsPages,da=this.state,Jn=da.loading,ra=da.error,ha=da.tempSheetColumnWidths,Ia=da.previewRowIndex,wa=da.sheetColumnWidths,Ka=da.sortedControl,tr=da.recordVisible,Tr=da.controls,xr=da.isBatchEditing,_a=da.selectedRowIds,gr=da.pageSize,zr=da.pageIndex,ea=da.keywords,Xn=kn.map(function(Ja){return d().find(Tr,{controlId:Ja})}).filter(d().identity),Va=!!Xn.length,$a=d().isUndefined(d().get(Le,"advancedSetting.allowsingle"))&&!Va||Fn,vr=d().get(Le,"advancedSetting.allowexport");vr=d().isUndefined(vr)||vr==="1";var Er=(0,v.kM)(Le,ct),ur=rt.map(function(Ja){return/^temp/.test(Ja.rowid)?Ja:/^empty/.test(Ja.rowid)?(0,ce.default)({},Ja,{allowedit:On}):(0,ce.default)({},Ja,{allowedit:ct===W.BD.DRAFT?On:Yn})}),Kr=ur,Fr=!Er.editable||Le.disabled,yo=!Tr.length,eo=this.getShowColumns(),wr=(0,T.CD)(Kr).length>=Ba,Or=yo||Fr||!On,Fo=!d().includes([W.BD.DEFAULT],ct),Wo=An||On&&!!Kr.filter(function(Ja){return/^temp/.test(Ja.rowid)}).length,Uo=!d().includes([W.BD.DEFAULT],ct)&&(!d().get(window,"shareState.shareId")||d().get(window,"shareState.isPublicForm")),No=!xt&&!Fr&&Fo&&(On||An)&&!!(0,T.CD)(ur).length,Ao=!xt&&Uo&&!Or&&$a,Oo=xt?yt:We;if(!eo.length)return a.createElement("div",{className:"Gray_9e"},_l("\u6CA1\u6709\u652F\u6301\u586B\u5199\u7684\u5B57\u6BB5"));ea&&(ur=(0,T.$p)({rows:ur,controls:Tr,keywords:ea}));var Wr=ur;Qa&&(Wr=Wr.slice((zr-1)*gr,zr*gr));var So=Wr.length<=cr,to=(So?Wr.length||1:cr)*hr+34;Zt&&to>Zt&&(to=Zt);var go=void 0;!xt&&!Or&&($a||Va)&&!(wr||Or)&&(go={height:36,comp:a.createElement(et,{className:"Gray_9e",onClick:wr||Or?function(){}:function(){$a?mt.handleAddRowByLine():Va&&mt.handleAddRowsFromRelateRecord(Xn)}},a.createElement("i",{className:"icon "+($a?"icon-plus":"icon-done_all")+" mRight5 Font14"}),a.createElement("span",{className:"hoverShow content ellipsis",style:{maxWidth:200}},$a?_l("\u6DFB\u52A0\u4E00\u884C"):_l("\u9009\u62E9%0",Xn[0]&&Xn[0].controlName)),$a&&Va&&a.createElement(ut,{className:"hoverShow",onClick:function(ar){mt.handleAddRowsFromRelateRecord(Xn),ar.stopPropagation()}},a.createElement("i",{className:"icon icon-done_all mRight5 Font16"}),a.createElement("span",{className:"content ellipsis",style:{maxWidth:200}},_l("\u9009\u62E9%0",Xn[0]&&Xn[0].controlName))))});var Do=a.createElement(a.Fragment,null,Dt&&a.createElement(X.Z,{style:{marginTop:-6},inputWidth:100,searchIcon:a.createElement(nt,{className:"Hand ThemeHoverColor3"},a.createElement("i",{className:"icon icon-search inherit"})),keywords:ea,className:A()("queryInput",{mobileQueryInput:xt}),focusedClass:"mRight10",onOk:function(ar){mt.setState({keywords:ar,pageIndex:1})},onClear:function(){mt.setState({keywords:"",pageIndex:1})}}),Ot&&vr&&De&&ct!==W.BD.DRAFT&&!Le.isCustomButtonFillRecord&&!d().get(window,"shareState.shareId")&&(xt?Fr:!0)&&a.createElement(Qe.Z,{exportSheet:function(ar){return Xt({worksheetId:mt.props.masterData.worksheetId,rowId:De,controlId:Le.controlId,fileName:(((d().last([].concat((0,re.Z)(document.querySelectorAll(".recordTitle"))))||{}).innerText||"").slice(0,200)+" "+Le.controlName+F()().format("YYYYMMDD HHmmss")).trim()+".xlsx",onDownload:ar})}}),zt!=="dialog"&&ct!==W.BD.DRAFT&&De&&!xt&&a.createElement("span",{className:"mLeft6","data-tip":_l("\u5168\u5C4F"),onClick:function(){return(0,l.X)((0,ce.default)({},mt.props,{allowEdit:!Fr,worksheetId:mt.props.masterData.worksheetId,title:(d().last([].concat((0,re.Z)(document.querySelectorAll(".recordTitle"))))||{}).innerText||d().get(mt,"props.masterData.formData")?(0,v.xI)(d().get(mt,"props.masterData.formData")):""}))}},a.createElement(nt,{className:"Hand ThemeHoverColor3"},a.createElement("i",{className:"icon icon-worksheet_enlarge"}))));return a.createElement(Q.Z.Provider,{value:{rows:rt}},a.createElement("div",{className:"childTableCon",ref:function(ar){return mt.childTableCon=ar},onClick:function(ar){return ar.stopPropagation()}},!d().isEmpty(Nt)&&a.createElement("span",{className:"errorTip"}," ",_l("\u8BF7\u6B63\u786E\u586B\u5199%0",Le.controlName)," "),xr&&!!_a.length&&a.createElement("div",{className:"selectedTip"},_l("\u5DF2\u9009\u62E9%0\u6761\u8BB0\u5F55",_a.length)),xt?a.createElement("div",{className:"operate valignWrapper"},xt&&!Or&&!wr&&Va&&a.createElement("span",{className:"addRowByDialog h5 ellipsis mRight10",onClick:function(){return mt.handleAddRowsFromRelateRecord(Xn)}},a.createElement("i",{className:"icon icon-done_all mRight5 Font16"}),a.createElement("span",{className:"content ellipsis",style:{maxWidth:200}},_l("\u9009\u62E9%0",Xn[0]&&Xn[0].controlName))),xt&&pn&&!Or&&!wr&&$a&&a.createElement("span",{className:"addRowByLine h5",onClick:function(){mt.handleAddRowByLine(),mt.setState({previewRowIndex:ur.length,recordVisible:!0})}},a.createElement("i",{className:"icon icon-plus mRight5 Font16"}),_l("\u6DFB\u52A0")),a.createElement("div",{className:A()("operates",{isMobile:xt}),style:{width:"100%",display:"flex",justifyContent:"flex-end"}},Do)):a.createElement("div",{className:"operate"},xr?a.createElement(a.Fragment,null,a.createElement("span",{className:"operateButton exitBatch",onClick:function(){return mt.setState({isBatchEditing:!1,selectedRowIds:[]})},style:{paddingLeft:10}},a.createElement("i",{className:"icon icon-close Gray_9e Font18 mRight5"}),_l("\u9000\u51FA")),Wo&&a.createElement("span",{className:A()("operateButton",{disabled:!_a.length}),onClick:function(){_a.length&&(dt(An?_a:_a.filter(function(ar){return/^temp/.test(ar)})),mt.setState({selectedRowIds:[],isBatchEditing:_a.length===ur.length}))}},_l("\u5220\u9664")),On&&a.createElement("span",{className:A()("operateButton",{disabled:!_a.length||(0,T.CD)(Kr).length>=Ba}),onClick:function(){if(!(!_a.length||(0,T.CD)(Kr).length>=Ba)){if((0,T.CD)(ur).length+_a.length>Ba){alert(_l("\u590D\u5236\u5931\u8D25\uFF0C\u6700\u591A\u8F93\u5165%0\u6761\u8BB0\u5F55",Ba),2);return}_a.length&&(mt.copyRows(_a.map(function(ar){return d().find(ur,{rowid:ar})}).filter(d().identity).slice(0,Ba-ur.length)),mt.setState({selectedRowIds:[]}))}}},_l("\u590D\u5236"))):a.createElement(a.Fragment,null,!xt&&!Or&&Va&&a.createElement("span",{className:A()("addRowByDialog",{disabled:wr||Or}),onClick:wr||Or?function(){}:function(){return mt.handleAddRowsFromRelateRecord(Xn)}},a.createElement("i",{className:"icon icon-done_all mRight5 Font16"}),a.createElement("span",{className:"content ellipsis",style:{maxWidth:200}},_l("\u9009\u62E9%0",Xn[0]&&Xn[0].controlName))),!xt&&!Or&&$a&&a.createElement("span",{className:A()("addRowByLine",{disabled:wr||Or}),onClick:wr||Or?function(){}:this.handleAddRowByLine},a.createElement("i",{className:"icon icon-plus mRight5 Font16"}),_l("\u6DFB\u52A0\u4E00\u884C")),Ao&&a.createElement("span",{className:A()("importFromFile tip-top",{disabled:wr}),onClick:wr?function(){}:this.handleImport,"data-tip":_l("\u5BFC\u5165\u6570\u636E")},a.createElement("i",{className:"icon icon-knowledge-upload Font16 Gray_75"})),Ao&&No&&a.createElement("div",{className:"splitter"}),No&&a.createElement("span",{className:"addRowByLine",onClick:function(){return mt.setState({isBatchEditing:!0})}},_l("\u6279\u91CF\u64CD\u4F5C"))),a.createElement("div",{className:"flex"}),ea&&a.createElement(Ze,null,_l("\u5171 %0 \u884C",ur.length)),Qa&&ur.length>gr&&a.createElement(q,{pageIndex:zr,pageSize:gr,count:ur.length,onChange:function(ar){mt.setState({pageIndex:ar})}}),a.createElement("div",{className:"flexRow alignItemsCenter"},Do)),!xt&&!Jn&&a.createElement("div",{style:{height:go?to+go.height:to}},a.createElement(be.Z,{from:ct,tableType:"classic",isSubList:!0,showAsZebra:!1,rules:Rn,height:to,fromModule:z.i7.SUBLIST,viewId:_e,scrollBarHoverShow:!0,ref:this.worksheettable,setHeightAsRowCount:So,forceScrollOffset:So&&{height:!0},clickEnterEditing:!0,cellErrors:Nt,clearCellError:this.handleClearCellError,cellUniqueValidate:this.handleUniqueValidate,fixedColumnCount:0,lineEditable:!Fr,noRenderEmpty:!ea,keyWords:ea,rowHeight:hr,worksheetId:Le.dataSource,projectId:Cn,appId:tt,columns:eo,controls:Tr,data:ea?(0,T.CD)(Wr):Wr,sheetColumnWidths:(0,ce.default)({},wa,ha),rowHeadWidth:$n&&!On&&!An?44:75,sheetSwitchPermit:ht,masterFormData:function(){return mt.props.masterData.formData},masterData:function(){return mt.props.masterData},sheetViewHighlightRows:[{}].concat((0,re.Z)(_a)).reduce(function(Ja,ar){return(0,ce.default)({},Ja,(0,b.default)({},ar,!0))}),renderRowHead:function(ar){return a.createElement(de,(0,ce.default)({showNumber:!$n,lineNumberBegin:Qa?(zr-1)*gr:0,showCheckbox:xr&&!!ur.length},ar,{isSelectAll:_a.length===ur.length,selectedRowIds:_a,row:Wr[ar.rowIndex],allowAdd:On,allowCancel:An,changeSheetLayoutVisible:Le.isCharge&&!d().isEmpty(ha),disabled:Fr,onSelect:function(Zr){var $r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;$r?mt.setState({selectedRowIds:d().uniq(_a.concat(Zr))}):mt.setState({selectedRowIds:_a.filter(function(oo){return oo!==Zr})})},onSelectAll:function(Zr){Zr?mt.setState({selectedRowIds:(0,T.CD)(ur).map(function($r){return $r.rowid})}):mt.setState({selectedRowIds:[]})},onOpen:mt.openDetail,onDelete:function(){return Ct(ar.row.rowid)},onCopy:function(){if(wr){alert(La?_l("\u5DF2\u8D85\u8FC7\u5B50\u8868\u6700\u5927\u884C\u6570"):_l("\u6700\u591A\u8F93\u5165%0\u6761\u8BB0\u5F55",Ba),3);return}mt.copyRow(ar.row)},saveSheetLayout:function(Zr){var $r=Zr.closePopup,oo=le()(eo.map(function(io){return(0,ce.default)({},wa,ha)[io.controlId]||160})),Po=(0,ce.default)({},Le,{advancedSetting:(0,ce.default)({},Le.advancedSetting,{widths:oo})});B.Z.editWorksheetControls({worksheetId:mt.props.masterData.worksheetId,controls:[(0,ce.default)({},d().pick(Po,["controlId","advancedSetting"]),{editattrs:["advancedSetting"]})]}).then(function(io){io.data&&($r(),mt.setState({tempSheetColumnWidths:{},sheetColumnWidths:mt.getSheetColumnWidths(Po)}),d().isFunction(d().get(mt,"context.updateWorksheetControls"))&&d().get(mt,"context.updateWorksheetControls")(io.data.controls.filter(function(Zo){return Zo.controlId===Le.controlId})))})},resetSheetLayout:function(){mt.setState({tempSheetColumnWidths:{}})}}))},renderColumnHead:function(ar){var Ur=(0,f.Z)(ar,[]),Zr=Ur.control;return a.createElement(G.Z,(0,ce.default)({showRequired:!Fr,isAsc:Ka&&Ka.controlId===Zr.controlId?Ka.isAsc:void 0,changeSort:function(oo){It({control:Zr,isAsc:oo}),mt.setState({sortedControl:d().isUndefined(oo)?void 0:{controlId:Zr.controlId,isAsc:oo}})}},Ur))},updateCell:this.handleUpdateCell,onColumnWidthChange:function(ar,Ur){mt.setState({tempSheetColumnWidths:(0,ce.default)({},ha,(0,b.default)({},ar,Ur))})},addNewRow:this.handleAddRowByLine,onFocusCell:function(ar,Ur){if(!(Or||wr)){var Zr=ar.rowid.startsWith("empty");if(Zr){Ut({rowid:ar.rowid,value:mt.newRow({},{isCreate:!0})}),setTimeout(function(){var $r=mt.worksheettable.current.table.refs.dom.current.querySelector(".cell.cell-"+Ur);$r&&$r.click()},100);return}}},onUpdateRules:function(ar){Ht({worksheetInfo:(0,ce.default)({},mt.worksheetInfo,{rules:ar})})},tableFooter:go})),xt&&!Jn&&a.createElement(pe,{sheetSwitchPermit:ht,allowcancel:An,allowadd:On,disabled:Fr,rows:ur,controls:eo,onOpen:this.openDetail,isEdit:pn,onDelete:Ct,showNumber:!$n}),Jn&&(ra?a.createElement("div",{className:"center Gray_9e"},ra):a.createElement("div",{style:{padding:10}},a.createElement(U.Z,{style:{flex:1},direction:"column",widths:["30%","40%","90%","60%"],active:!0,itemStyle:{marginBottom:"10px"}}))),tr&&a.createElement(Oo,{masterData:Kt,isWorkflow:!0,ignoreLock:/^(temp|default|empty)/.test((Wr[Ia]||{}).rowid),visible:!0,aglinBottom:!!De,from:ct,worksheetId:Le.dataSource,projectId:Cn,appId:tt,searchConfig:gn,sheetSwitchPermit:ht,controlName:Le.controlName,title:Ia>-1?Le.controlName+"#"+(Ia+1):_l("\u521B\u5EFA%0",Le.controlName),disabled:Fr||!/^temp/.test(d().get(Wr,Ia+".rowid"))&&!Yn,mobileIsEdit:pn,allowDelete:/^temp/.test(d().get(Wr,Ia+".rowid"))||An,controls:Tr,data:Ia>-1?Wr[Ia]||{}:this.newRow(),switchDisabled:{prev:Ia===0,next:Ia===(0,T.CD)(Wr.filter(function(Ja){return!Ja.isSubListFooter})).length-1},getMasterFormData:function(){return mt.props.masterData.formData},handleUniqueValidate:this.handleUniqueValidate,onSwitch:this.handleSwitch,onSave:this.handleRowDetailSave,onDelete:Ct,onClose:function(){return mt.setState({recordVisible:!1})}})))}},{key:"settings",get:function(){var mt=this.props.control,Lt=mt===void 0?{}:mt,zt=(0,T.h4)(Lt.advancedSetting),Zt=zt.min,Nt=zt.max,ct=zt.rownum,De=zt.enablelimit,_e=void 0,Le=d().get(window,"shareState.isPublicForm")?200:kt;return De&&(_e=Zt,Le=Nt),{minCount:_e,maxCount:Le,rownum:ct}}},{key:"searchConfig",get:function(){var mt=this.props,Lt=mt.searchConfig,zt=mt.base;return(0,o.get)(zt,"searchConfig")||Lt}},{key:"worksheetInfo",get:function(){var mt=this.props.base,Lt=mt===void 0?{}:mt;return Lt.worksheetInfo||{}}},{key:"showAsPages",get:function(){return(0,o.get)(this,"props.control.advancedSetting.showtype")==="2"&&!xt}}]),an}(a.Component),Ue.contextType=x.Z,Ue.propTypes={mode:s().string,entityName:s().string,recordId:s().string,control:s().shape({}),masterData:s().shape({}),registerCell:s().func,loadRows:s().func,initRows:s().func,addRow:s().func,updateRow:s().func,deleteRow:s().func,sortRows:s().func,resetRows:s().func,mobileIsEdit:s().bool,showSearch:s().bool,showExport:s().bool},Ue.defaultProps={masterData:{formData:[]},registerCell:function(){}},He),qe(Ke.prototype,"updateAbortController",[E.Nj],H()(Ke.prototype,"updateAbortController"),Ke.prototype),qe(Ke.prototype,"handleKeyDown",[E.Nj],H()(Ke.prototype,"handleKeyDown"),Ke.prototype),qe(Ke.prototype,"refresh",[E.Nj],H()(Ke.prototype,"refresh"),Ke.prototype),qe(Ke.prototype,"newRow",[E.Nj],H()(Ke.prototype,"newRow"),Ke.prototype),qe(Ke.prototype,"handleAddRowByLine",[E.Nj],H()(Ke.prototype,"handleAddRowByLine"),Ke.prototype),qe(Ke.prototype,"handleImport",[E.Nj],H()(Ke.prototype,"handleImport"),Ke.prototype),qe(Ke.prototype,"handleAddRowsFromRelateRecord",[E.Nj],H()(Ke.prototype,"handleAddRowsFromRelateRecord"),Ke.prototype),qe(Ke.prototype,"handleUpdateCell",[E.Nj],H()(Ke.prototype,"handleUpdateCell"),Ke.prototype),qe(Ke.prototype,"handleRowDetailSave",[E.Nj],H()(Ke.prototype,"handleRowDetailSave"),Ke.prototype),qe(Ke.prototype,"handleSwitch",[E.Nj],H()(Ke.prototype,"handleSwitch"),Ke.prototype),qe(Ke.prototype,"openDetail",[E.Nj],H()(Ke.prototype,"openDetail"),Ke.prototype),qe(Ke.prototype,"handleClearCellError",[E.Nj],H()(Ke.prototype,"handleClearCellError"),Ke.prototype),qe(Ke.prototype,"handleUniqueValidate",[E.Nj],H()(Ke.prototype,"handleUniqueValidate"),Ke.prototype),qe(Ke.prototype,"handleMouseEnter",[E.Nj],H()(Ke.prototype,"handleMouseEnter"),Ke.prototype),qe(Ke.prototype,"handleMouseLeave",[E.Nj],H()(Ke.prototype,"handleMouseLeave"),Ke.prototype),Ke),jt=function(an,tn){return{baseLoading:an.baseLoading,base:an.base,rows:an.rows,lastAction:an.lastAction,cellErrors:an.cellErrors}},fn=function(an){return{loadRows:(0,K.DE)(st.UV,an),setOriginRows:(0,K.DE)(st.FG,an),resetRows:(0,K.DE)(st.gI,an),initRows:(0,K.DE)(st.VO,an),addRow:(0,K.DE)(st.SA,an),addRows:(0,K.DE)(st.P5,an),updateRow:(0,K.DE)(st.RQ,an),deleteRow:(0,K.DE)(st.qK,an),deleteRows:(0,K.DE)(st.M5,an),sortRows:(0,K.DE)(st.Li,an),clearAndSetRows:(0,K.DE)(st.v,an),exportSheet:(0,K.DE)(st.Ow,an),updateCellErrors:(0,K.DE)(st.Jn,an),updateBase:(0,K.DE)(st.l7,an)}};const Mt=(0,r.$j)(jt,fn)(Rt);var sn=t(68195),on=(0,r.$j)(function($t){return{baseLoading:$t.baseLoading,base:$t.base,rows:$t.rows,lastAction:$t.lastAction}})(function($t){var an=$t.baseLoading;return an?a.createElement("div",{style:{minHeight:74,background:"#f7f7f7"}}):a.createElement(Mt,$t)}),en=function($t){(0,y.default)(an,$t);function an(tn){(0,L.default)(this,an);var mt=(0,R.default)(this,(an.__proto__||p()(an)).call(this,tn)),Lt=tn.worksheetId,zt=tn.recordId,Zt=tn.masterData;return mt.store=tn.control.store||(0,sn.Z)(tn.control,{initRowIsCreate:tn.initRowIsCreate,relationWorksheetId:Lt,recordId:zt,masterData:Zt}),mt.store.init(),mt.bindSubscribe(),mt}return(0,te.default)(an,[{key:"componentWillReceiveProps",value:function(mt){var Lt=mt.onChange;mt.control.store&&mt.control.store!==this.store&&(this.store=mt.control.store,this.store.init(),this.bindSubscribe());var zt=this.store.getState()||{};mt.from===21&&!d().isEqual(this.props.flag,mt.flag)&&!d().isEmpty(zt.rows)&&Lt({rows:zt.rows,lastAction:zt.lastAction,originRows:zt.originRows})}},{key:"bindSubscribe",value:function(){var mt=this,Lt=this.props.onChange;this.store.subscribe(function(){var zt=mt.store.getState();Lt({rows:zt.rows,lastAction:zt.lastAction,originRows:zt.originRows})})}},{key:"render",value:function(){var mt=this,Lt=this.props.registerCell,zt=Lt===void 0?function(){}:Lt;return a.createElement(r.zt,{store:this.store},a.createElement(on,(0,ce.default)({},this.props,{store:this.store,registerCell:function(Nt){zt(Nt),mt.store.ref=Nt}})))}}]),an}(a.Component)},61805:(lt,Te,t)=>{"use strict";t.d(Te,{FG:()=>k,Jn:()=>q,Li:()=>K,M5:()=>ie,Ow:()=>N,P5:()=>w,RQ:()=>le,SA:()=>ee,UV:()=>E,VO:()=>I,gI:()=>c,l7:()=>S,qK:()=>re,v:()=>b,yL:()=>h});var ce=t(88106),g=t(52945),p=t.n(g),L=t(85315),te=t(99663),R=t(22600),y=t(94942),a=t.n(y),r=t(36803),o=t(46593),d=t.n(o),Z=t(88239);if(!/^(1887|7596|7798)$/.test(t.j))var H=t(91247);if(!/^(1887|7596|7798)$/.test(t.j))var U=t(89499);var f=t(45231),V=t(96486),C=t.n(V),O=t(36612);if(!/^(1887|7596|7798)$/.test(t.j))var n=t(37139);var s=/^(1887|7596|7798)$/.test(t.j)?null:void 0,j=function(){var z=(0,r.Z)(a().mark(function X(B){var x,Q,i;return a().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:x=[],Q=void 0,i=void 0;case 2:if(!(C().isUndefined(Q)||x.length<Q)){v.next=11;break}return v.next=5,f.Z.getRowRelationRows(B);case 5:i=v.sent,x=x.concat(i.data||[]).map(function(W,P){return(0,Z.default)({},W,{allowedit:!0,addTime:P})}),Q||(Q=i.count),B.pageIndex+=1,v.next=2;break;case 11:return v.abrupt("return",{res:i,rows:x.slice(0,1e3)});case 12:case"end":return v.stop()}},X,this)}));return function(B){return z.apply(this,arguments)}}(),A=200;function S(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(X,B){var x=B(),Q=x.base,i=Q===void 0?{}:Q;X({type:"UPDATE_BASE",value:(0,Z.default)({},i,z)})}}var I=function(X){return{type:"INIT_ROWS",rows:X}},c=function(){return function(X,B){var x=B(),Q=x.base,i=Q===void 0?{}:Q;return X(I(B().originRows)),i.reset&&!i.loaded&&X({type:"RESET"}),d().resolve()}},q=function(X){return{type:"UPDATE_CELL_ERRORS",value:X||{}}},b=function(X){return function(B,x){B({type:"CLEAR_AND_SET_ROWS",rows:X,deleted:x().rows.map(function(Q){return Q.rowid})})}},k=function(X){return{type:"LOAD_ROWS",rows:X}},ee=function(X,B){return{type:"ADD_ROW",row:X,rowid:X.rowid,insertRowId:B}},re=function(X){return{type:"DELETE_ROW",rowid:X}},ie=function(X){return{type:"DELETE_ROWS",rowIds:X}},le=function(X){var B=X.rowid,x=X.value,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=Q.asyncUpdate;return function(m){return m({type:"UPDATE_ROW",asyncUpdate:i,rowid:B,value:(0,Z.default)({},x,{empty:!1})}),d().resolve()}},E=function(X){var B=X.worksheetId,x=X.recordId,Q=X.isCustomButtonFillRecord,i=X.controlId,m=X.pageIndex,v=m===void 0?1:m,W=X.getWorksheet,P=X.from,u=X.callback,l=u===void 0?function(){}:u;return function(T,G){var D={worksheetId:B,rowId:x,controlId:i,getWorksheet:W,pageIndex:v,pageSize:A,getType:P===21?P:void 0};j(D).then(function(M){var se=M.res,ae=M.rows;T({type:"LOAD_ROWS",rows:ae}),T(I(ae)),Q&&ae.length&&T(le(ae[0].rowid,ae[0])),l(se)}).catch(function(M){l(null)})}},w=function(X){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,Z.default)({type:"ADD_ROWS",rows:X},B)},K=function(X){var B=X.control,x=X.isAsc;return function(Q,i){var m=i(),v=m.rows;Q({type:"INIT_ROWS",rows:(0,U._3)(v,B,x)})}},N=function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},B=X.worksheetId,x=X.rowId,Q=X.controlId,i=X.fileName,m=X.onDownload,v=m===void 0?function(){}:m;return(0,r.Z)(a().mark(function W(){var P;return a().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,(0,U.XQ)(md.global.Config.WorksheetDownUrl+"/ExportExcel/DetailTable",{worksheetId:B,tokenType:8},{worksheetId:B,rowId:x,controlId:Q,pageIndex:1,pageSize:1e4},{responseType:"blob"});case 3:P=l.sent,v(),(0,U.LR)(P.data,i),l.next=11;break;case 8:l.prev=8,l.t0=l.catch(0),alert(_l("\u5BFC\u51FA\u5931\u8D25\uFF01\u8BF7\u7A0D\u5019\u91CD\u8BD5"),2);case 11:case"end":return l.stop()}},W,s,[[0,8]])}))},F=function(){function z(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,te.default)(this,z),this.args=X,this.init()}return(0,R.default)(z,[{key:"init",value:function(){var B=this.args,x=B.requestPool,Q=B.recordId,i=B.projectId,m=B.row,v=B.abortController,W=B.masterData,P=B.controls,u=P===void 0?[]:P,l=B.searchConfig,T=B.isCreate,G=T===void 0?!1:T,D=B.isQueryWorksheetFill,M=D===void 0?!1:D;(0,V.get)(m,"updatedControlIds")&&(this.updatedControlIds=(0,V.get)(m,"updatedControlIds")),this.handleAsyncChange=this.handleAsyncChange.bind(this),this.formData=new O.ZP({requestPool:x,data:u.map(function(se){var ae=(m||{})[se.controlId];return C().isUndefined(ae)&&(G||!m)&&(ae=se.value),(0,Z.default)({},se,{isSubList:!0,isQueryWorksheetFill:M,value:ae})}),isCreate:G||!m,from:2,searchConfig:l,projectId:i,masterData:W,abortController:v,masterRecordRowId:Q,onAsyncChange:this.handleAsyncChange}),this.addTime=new Date().getTime()}},{key:"handleAsyncChange",value:function(B){var x=this.args.updateRow,Q=B.controlId,i=B.value;this.formData.updateDataSource({controlId:Q,value:i}),x(this.getRow())}},{key:"getRow",value:function(){var B=this.args,x=B.rowId,Q=B.allowEdit,i=[{updatedControlIds:C().uniqBy(this.updatedControlIds||[]).concat(this.formData.getUpdateControlIds())}].concat((0,L.Z)(this.formData.getDataSource())).reduce(function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return p()(m,(0,ce.default)({},v.controlId,v.value))});return(0,Z.default)({},i,{rowid:x,allowedit:Q,addTime:this.addTime})}}]),z}();function h(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=z.recordId,B=z.masterData,x=z.staticRows,Q=x===void 0?[]:x,i=z.abortController,m=z.type,v=z.isCreate,W=z.isDefaultValue,P=W===void 0?!0:W,u=z.isQueryWorksheetFill,l=u===void 0?!0:u,T=z.triggerSubListControlValueChange,G=T===void 0?function(){}:T;return function(D,M){var se=D(),ae=se.base,ne=ae===void 0?{}:ae,de=ne.controls,Ce=ne.projectId,he=ne.searchConfig,fe=ne.initRowIsCreate,Ee=ne.max,Y=(0,n.O)({abortController:i||typeof AbortController<"u"&&new AbortController,maxConcurrentRequests:6}),oe=(Ee?Q.slice(0,Ee):Q).map(function(ve){var ue=P?"default-"+(0,H.Z)():"temp-"+(0,H.Z)(),pe={requestPool:Y,recordId:X,projectId:Ce,abortController:i,row:ve,masterData:B,rowId:ue,controls:de,searchConfig:he,isDefaultValue:P,isQueryWorksheetFill:l,isCreate:!!X||(C().isUndefined(ve.initRowIsCreate)?C().isUndefined(fe)?!0:fe:ve.initRowIsCreate),updateRow:function(J){M({type:"UPDATE_ROW",rowid:J.rowid,value:J})}},Se=new F(pe);return Se.getRow()});m==="append"?(M(w(oe)),G({action:"append",isDefault:!0,rows:D().rows})):(M(b(oe)),G({action:"clearAndSet",isDefault:!0,rows:D().rows}))}}},47070:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>U});var ce=t(85315),g=t(88239),p=t(96486),L=t.n(p),te=t(22010),R=t(15577);function y(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,V=arguments[1];switch(V.type){case"UPDATE_BASE_LOADING":return V.value;default:return f}}function a(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},V=arguments[1];switch(V.type){case"UPDATE_BASE":return(0,g.default)({loaded:!1,reset:!1},V.value);case"LOAD_ROWS":return(0,g.default)({},f,{loaded:!0});case"CLEAR_AND_SET_ROWS":return(0,g.default)({},f,{reset:!0});case"RESET":return(0,g.default)({},f,{loaded:!1,reset:!1});default:return f}}function r(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},V=arguments[1];switch(V.type){case"UPDATE_CELL_ERRORS":return V.value;default:return f}}function o(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,V=arguments[1];return V}function d(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],V=arguments[1];switch(V.type){case"LOAD_ROWS":return V.rows.map(function(C){return(0,g.default)({},C)});default:return f}}function Z(f){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return f.length<V?f.concat(new Array(V-f.length).fill().map(function(){return{rowid:"empty-"+Math.random().toString(32)}})):f}function H(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],V=arguments[1],C=V.emptyCount||0,O=void 0,n=[].concat((0,ce.Z)(f)),s=L().findLastIndex(f,function(j){return!(j.rowid&&L().isFunction(j.rowid.startsWith)&&j.rowid.startsWith("empty"))});switch(!L().isUndefined(s)&&n.length<=C&&(n=f.slice(0,s+1)),V.type){case"INIT_ROWS":case"FORCE_SET_OUT_ROWS":case"CLEAR_AND_SET_ROWS":n=V.rows.map(function(j){return(0,g.default)({},j)});break;case"ADD_ROW":O=V.insertRowId?L().findIndex(n,function(j){return j.rowid===V.insertRowId}):-1,O>=0?n.splice(O+1,0,V.row):(n.length>5,n=n.concat(V.row));break;case"ADD_ROWS":n=n.concat(V.rows);break;case"UPDATE_ROW":n=f.map(function(j){return j.rowid===V.rowid?(0,g.default)({},j,V.value):j});break;case"DELETE_ROW":n=n.filter(function(j){return j.rowid!==V.rowid});break;case"DELETE_ROWS":n=n.filter(function(j){return!L().includes(V.rowIds,j.rowid)});break;case"UPDATE_STATE":n=V.state}return n.length<C&&!(0,R.Q9)()?Z(n,C):n}const U=(0,te.UY)({cellErrors:r,baseLoading:y,base:a,originRows:d,lastAction:o,rows:H})},68195:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>C});var ce=t(94942),g=t.n(ce),p=t(88239),L=t(36803),te=t(22010);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(53894);var y=t(96486),a=t.n(y);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var o=t(47070);if(!/^(1887|7596|7798)$/.test(t.j))var d=t(5505);if(!/^(1887|7596|7798)$/.test(t.j))var Z=t(62232);if(!/^(1887|7596|7798)$/.test(t.j))var H=t(61805);if(!/^(1887|7596|7798)$/.test(t.j))var U=t(89499);if(!/^(1887|7596|7798)$/.test(t.j))var f=t(94914);function V(O){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.controlId,j=n.relationWorksheetId,A=n.recordId,S=n.instanceId,I=n.workId,c={worksheetId:O,getTemplate:!0,getRules:!0,relationWorksheetId:j},q=void 0;return window.shareState.isPublicWorkflowRecord&&window.shareState.shareId?(c.linkId=window.shareState.shareId,c.controlId=s,q=r.Z.getWorksheetInfoByWorkItem):A&&S&&I?(c.instanceId=S,c.workId=I,c.controlId=s,q=r.Z.getWorksheetInfoByWorkItem):(0,y.get)(window,"shareState.isPublicForm")?q=d.Z.getWorksheetInfo:q=r.Z.getWorksheetInfo,q(c)}function C(O){var n=function(){var F=(0,L.Z)(g().mark(function h(){var z,X,B,x,Q,i,m;return g().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(!N.initialized){W.next=2;break}return W.abrupt("return");case 2:if(N.initialized=!0,z=(0,U.h4)(O.advancedSetting),X=z.max,I){W.next=9;break}return W.next=7,V(E,{relationWorksheetId:S,controlId:O.controlId,recordId:b,instanceId:k,workId:ee});case 7:ie=W.sent,I=(0,y.get)(ie,"template.controls");case 9:if(c){W.next=14;break}return W.next=12,r.Z.getQueryBySheetId({worksheetId:E});case 12:B=W.sent,c=(0,Z.T0)(B);case 14:x=(0,U.h4)(O.advancedSetting),Q=x.uniqueControlIds,I=I.map(function(P){return(0,p.default)({},P,{uniqueInRecord:(0,y.includes)(Q,P.controlId)&&(0,f.fu)(P)})}),i=(k&&ee||window.shareState.isPublicWorkflowRecord)&&ie.workflowChildTableSwitch!==!1,i&&(0,y.isFunction)(O.updateRelationControls)&&O.updateRelationControls(O.dataSource,I),N.dispatch({type:"UPDATE_BASE",value:{control:O,max:X,searchConfig:c,controls:I,masterData:q,recordId:b,instanceId:k,workId:ee,worksheetInfo:ie,initRowIsCreate:re}}),N.dispatch({type:"UPDATE_BASE_LOADING",value:!1}),typeof O.value=="string"&&!(0,y.isEmpty)(safeParse(O.value))&&(m={recordId:b,masterData:q,staticRows:safeParse(O.value)},(0,H.yL)(m)(N.getState,N.dispatch)),(0,y.isEmpty)(N.waitList)||(N.waitList.forEach(function(P){return P()}),N.waitList=[]);case 22:case"end":return W.stop()}},h,this)}));return function(){return F.apply(this,arguments)}}(),s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},j=s.appId,A=s.from,S=s.relationWorksheetId,I=s.controls,c=s.searchConfig,q=s.masterData,b=s.recordId,k=s.instanceId,ee=s.workId,re=s.initRowIsCreate,ie=void 0,le=function(){return function(h){return function(z){var X=Number((0,y.get)(O,"advancedSetting.blankrow"));return z.emptyCount=(0,y.isNumber)(X)&&!(0,y.isNaN)(X)?X:1,h(z)}}},E=O.dataSource,w=[];if(0)var K;var N=(0,te.MT)(o.Z,te.qC.apply(void 0,[(0,te.md)(R.Z,le)].concat(w)));return N.name=Math.floor(Math.random()*1e3),N.init=n,N.waitList=[],N.reset=function(){N.dispatch({type:"RESET"}),N.dispatch({type:"UPDATE_CELL_ERRORS",value:{}})},N.resetRows=function(){N.dispatch((0,H.gI)())},N.cancelChange=function(){N.dispatch((0,H.gI)()),N.dispatch({type:"UPDATE_CELL_ERRORS",value:{}})},N.resetRows=function(){N.dispatch((0,H.gI)())},N.clearSubListErrors=function(){N.dispatch({type:"UPDATE_CELL_ERRORS",value:{}})},N.getErrors=function(){var F=N.getState(),h=F.rows,z=F.base,X=z===void 0?{}:z,B=(0,U.pt)({rows:h,rules:(0,y.get)(X,"worksheetInfo.rules")},X.controls,O.showControls,b?3:2);return(0,y.isEmpty)(B)||N.dispatch({type:"UPDATE_CELL_ERRORS",value:B}),B},N.setUniqueError=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=F.badData,z=h===void 0?[]:h,X=(0,U.Sg)({badData:z,control:O}),B=X.controlId,x=X.error;B===O.controlId&&((0,y.isEmpty)(x)||N.dispatch({type:"UPDATE_CELL_ERRORS",value:x}))},N}},86179:(lt,Te,t)=>{"use strict";if(t.d(Te,{X:()=>w}),!/^(1887|7596|7798)$/.test(t.j))var ce=t(42057);var g=t(52945),p=t.n(g);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(42185);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(69288);var R=t(88239),y=t(12424),a=t(86735),r=t(67294),o=t(96486),d=t.n(o),Z=t(93967),H=t.n(Z);if(!/^(1887|7596|7798)$/.test(t.j))var U=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var f=t(4557);var V=t(71893);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(15742);if(!/^(1887|7596|7798)$/.test(t.j))var O=t(59390);if(!/^(1887|7596|7798)$/.test(t.j))var n=t(1952);if(!/^(1887|7596|7798)$/.test(t.j))var s=t(36612);if(!/^(1887|7596|7798)$/.test(t.j))var j=t(24607);if(!/^(1887|7596|7798)$/.test(t.j))var A=t(89499);if(!/^(1887|7596|7798)$/.test(t.j))var S=t(62232);var I=(0,a.Z)([`
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
`],[`
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
`]),c=(0,a.Z)([`
  color: #9e9e9e;
  cursor: pointer;
  display: inline-block;
  height: 28px;
  font-size: 20px;
  line-height: 28px;
  padding: 0 4px;
  border-radius: 5px;
  &:hover {
    background: #f7f7f7;
  }
`],[`
  color: #9e9e9e;
  cursor: pointer;
  display: inline-block;
  height: 28px;
  font-size: 20px;
  line-height: 28px;
  padding: 0 4px;
  border-radius: 5px;
  &:hover {
    background: #f7f7f7;
  }
`]),q=(0,a.Z)([`
  height: 50px;
  padding: 0 24px;
  display: flex;
  align-items: center;
  .inner {
    width: 100%;
  }
  .main {
    font-size: 17px;
    color: #333;
    font-weight: bold;
  }
  .split {
    font-size: 16px;
    margin: 0 8px;
    color: #9e9e9e;
  }
  .sec {
    font-size: 17px;
    color: #757575;
    max-width: 600px;
    &:hover {
      color: #333;
    }
  }
  .openInNewTab {
    cursor: pointer;
    color: #9e9e9e;
    font-size: 14px;
    margin-left: 6px;
    line-height: 18px;
    height: 18px;
  }
  .flexCenter {
    display: flex;
    align-items: center;
  }
`],[`
  height: 50px;
  padding: 0 24px;
  display: flex;
  align-items: center;
  .inner {
    width: 100%;
  }
  .main {
    font-size: 17px;
    color: #333;
    font-weight: bold;
  }
  .split {
    font-size: 16px;
    margin: 0 8px;
    color: #9e9e9e;
  }
  .sec {
    font-size: 17px;
    color: #757575;
    max-width: 600px;
    &:hover {
      color: #333;
    }
  }
  .openInNewTab {
    cursor: pointer;
    color: #9e9e9e;
    font-size: 14px;
    margin-left: 6px;
    line-height: 18px;
    height: 18px;
  }
  .flexCenter {
    display: flex;
    align-items: center;
  }
`]),b=(0,a.Z)([`
  position: relative;
  padding: 0 25px 36px;
  flex: 1;
  display: flex;
  flex-direction: column;
  .relateRecordTable {
    height: 100%;
  }
  .tableCon {
    flex: 1;
  }
  .childTableCon {
    height: 100%;
  }
  .operates {
    display: none;
  }
  .selectedTip {
    padding: 0 24px;
    line-height: 50px !important;
    top: -50px !important;
  }
  .childTableCon .errorTip {
    width: calc(100% - 300px);
    height: 30px;
    top: -35px;
  }
`],[`
  position: relative;
  padding: 0 25px 36px;
  flex: 1;
  display: flex;
  flex-direction: column;
  .relateRecordTable {
    height: 100%;
  }
  .tableCon {
    flex: 1;
  }
  .childTableCon {
    height: 100%;
  }
  .operates {
    display: none;
  }
  .selectedTip {
    padding: 0 24px;
    line-height: 50px !important;
    top: -50px !important;
  }
  .childTableCon .errorTip {
    width: calc(100% - 300px);
    height: 30px;
    top: -35px;
  }
`]),k=V.ZP.div(I),ee=V.ZP.span(c),re=V.ZP.div(q),ie=V.ZP.div(b);function le(K){return!!d().find(K,function(N){return N.type===29&&d().isEmpty(N.relationControls)})}function E(K){var N=K.allowEdit,F=N===void 0?!1:N,h=K.openFrom,z=K.isWorkflow,X=K.initSource,B=K.entityName,x=K.rules,Q=K.appId,i=K.worksheetId,m=K.viewId,v=K.from,W=K.control,P=K.controls,u=K.recordId,l=K.sheetSwitchPermit,T=K.masterData,G=K.projectId,D=K.mobileIsEdit,M=K.onClose,se=K.onChange,ae=se===void 0?function(){}:se,ne=(0,r.useRef)({}),de=C.dN[Number(d().get(W,"advancedSetting.rowheight"))]||34,Ce=d().isEmpty(P)||le(P),he=(0,r.useState)(typeof K.searchConfig>"u"),fe=(0,y.Z)(he,2),Ee=fe[0],Y=fe[1],oe=(0,r.useState)(K.searchConfig),ve=(0,y.Z)(oe,2),ue=ve[0],pe=ve[1],Se=(0,r.useState)(!1),ye=(0,y.Z)(Se,2),J=ye[0],me=ye[1],be=(0,r.useState)(h!=="cell"),xe=(0,y.Z)(be,2),Ae=xe[0],Ne=xe[1],Me=(0,r.useState)(Math.random()),Fe=(0,y.Z)(Me,2),Be=Fe[0],we=Fe[1],Ie=(0,r.useState)({}),ge=(0,y.Z)(Ie,2),Re=ge[0],Pe=ge[1],ke=(0,r.useState)(!1),We=(0,y.Z)(ke,2),Ve=We[0],it=We[1],Ge=window.innerHeight-32-50,pt=Ge-31-36-10,ot=Math.floor((pt-30-40)/de),vt=window.innerWidth-32*2>1600?1600:window.innerWidth-32*2;function At(yt){if(!ne.current.isSaving){var st=ne.current.comp.props.store,St=st.getErrors(),Qe=(0,s.U_)({item:(0,R.default)({},W,{value:Re})});if(Qe.errorType){alert(Qe.errorText,3);return}if(d().isEmpty(St))st.clearSubListErrors();else{alert(_l("\u8BF7\u6B63\u786E\u586B\u5199\u8868\u5355"),3);return}ne.current.isSaving=!0,it(!0),U.Z.updateWorksheetRow({appId:Q,viewId:m,worksheetId:i,rowId:u,newOldControl:[(0,j.jz)((0,R.default)({},W,{store:st,value:(0,R.default)({},Re,{controls:P})}))]}).then(function(Xe){Xe.data?(alert(_l("\u4FDD\u5B58\u6210\u529F")),ne.current.isSaving=!1,me(!1),it(!1),yt&&M(),Pe({}),we(Math.random()),A.uY.emit("RELOAD_RECORD_INFO",{worksheetId:i,recordId:u})):(Xe.resultCode===22&&st.setUniqueError({badData:Xe.badData}),(0,A.a)(Xe.resultCode),ne.current.isSaving=!1,it(!1))})}}return(0,r.useEffect)(function(){Ee&&U.Z.getQueryBySheetId({worksheetId:W.dataSource}).then(function(yt){pe((0,S.T0)(yt)),Y(!1)})},[]),(0,f.Z)("e",function(yt){(window.isMacOs?yt.metaKey:yt.ctrlKey)&&(Ne(function(st){return!st}),yt.preventDefault(),yt.stopPropagation())}),r.createElement(ce.Z,{visible:!0,keyboard:!0,type:"fixed",verticalAlign:"bottom",width:vt,closeIcon:r.createElement("span",null),bodyStyle:{padding:0,position:"relative"},fullScreen:Ae,onCancel:M},r.createElement(k,null,r.createElement(re,null,r.createElement("div",{className:"inner flexRow"},r.createElement("div",{className:"main ellipsis",title:W.controlName},W.controlName),r.createElement("div",{className:"flex"}),r.createElement(ee,{className:"mRight10 ThemeHoverColor3","data-tip":Ae?_l("\u9000\u51FA%0",window.isMacOs?"(\u2318 + E)":"(Ctrl + E)"):_l("\u5168\u5C4F%0",window.isMacOs?"(\u2318 + E)":"(Ctrl + E)"),onClick:function(){Ne(!Ae)}},r.createElement("i",{className:"icon icon-"+(Ae?"worksheet_narrow":"worksheet_enlarge")})),r.createElement(ee,{className:H()("ThemeHoverColor3",{mRight10:J}),"data-tip":_l("\u5173\u95ED(Esc)"),onClick:function(){if(!J){M();return}te.Z.confirm({title:_l("\u60A8\u662F\u5426\u4FDD\u5B58\u6B64\u6B21\u66F4\u6539"),description:_l("\u5F53\u524D\u6709\u5C1A\u672B\u4FDD\u5B58\u7684\u66F4\u6539\uFF0C\u60A8\u5728\u79BB\u5F00\u5F53\u524D\u9875\u9762\u524D\u662F\u5426\u9700\u8981\u4FDD\u5B58\u8FD9\u4E9B\u66F4\u6539\u3002"),cancelType:"ghost",okText:_l("\u662F\uFF0C\u4FDD\u5B58\u66F4\u6539"),cancelText:_l("\u5426\uFF0C\u653E\u5F03\u66F4\u6539"),onlyClose:!0,onOk:function(){return At(!0)},onCancel:M})}},r.createElement("i",{className:"icon icon-close"}))),J&&r.createElement(r.Fragment,null,r.createElement("div",{className:"flex"}),r.createElement(L.ZP,{loading:Ve,className:"mRight35",onClick:function(){return At()}},_l("\u4FDD\u5B58")))),r.createElement(ie,null,r.createElement(O.Z,{needResetControls:Ce,registerCell:function(st){ne.current.comp=st},refreshFlag:Be,mode:"dialog",maxShowRowCount:ot,maxHeight:pt,isWorkflow:z,initSource:X,entityName:B,rules:x,appId:Q,worksheetId:i,viewId:m,from:v,control:(0,R.default)({},F?W:(0,R.default)({},W,{advancedSetting:p()({},W.advancedSetting,{allowadd:"0",allowcancel:"0",allowedit:"0"})}),{addRefreshEvents:function(st,St){ne.current.reload=St}}),controls:P,recordId:u,searchConfig:ue,sheetSwitchPermit:l,masterData:T,projectId:G,onChange:function(st){if(h==="cell"){var St=st.rows,Qe=st.lastAction,Xe=Qe===void 0?{}:Qe;if(!d().includes(["DELETE_ROW","DELETE_ROWS","ADD_ROW","UPDATE_ROW","ADD_ROWS"],Xe.type))return;Pe(function($e){var Ke=$e.deleted,Ue=Ke===void 0?[]:Ke,He=$e.updated,ze=He===void 0?[]:He;return Xe.type==="DELETE_ROW"?Ue=d().uniqBy(Ue.concat(Xe.rowid)).filter(function(gt){return!/^(temp|default)/.test(gt)}):Xe.type==="DELETE_ROWS"&&(Ue=d().uniqBy(Ue.concat(Xe.rowIds)).filter(function(gt){return!/^(temp|default)/.test(gt)})),Xe.type==="ADD_ROW"||Xe.type==="UPDATE_ROW"?ze=d().uniqBy(ze.concat(Xe.rowid)):Xe.type==="ADD_ROWS"&&(ze=d().uniqBy(ze.concat(Xe.rows.map(function(gt){return gt.rowid})))),(0,R.default)({},$e,{updated:ze,deleted:Ue,rows:St})}),me(!0)}else(0,o.get)(st,"lastAction.type")!=="FORCE_SET_OUT_ROWS"&&ae(st,"childTableDialog")},mobileIsEdit:D,addRefreshEvents:function(st,St){ne.current[st]=St}}))))}var w=function(N){return(0,n.Z)(E,N)}},59217:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>U});var ce=t(86735),g=t(67294),p=t(45697),L=t.n(p),te=t(71893),R=t(62232),y=t(52877),a=t(96486),r=t.n(a),o=(0,ce.Z)([`
  display: flex;
  align-items: center;
  .controlName {
    flex: 1;
  }
`],[`
  display: flex;
  align-items: center;
  .controlName {
    flex: 1;
  }
`]),d=te.ZP.div(function(f){var V=f.disabled;return`
    display: flex;
    border-radius: 3px;
    height: 36px;
    line-height: 34px;
    padding: 0 6px 0 10px;
    border: 1px solid #ddd;
    min-width: 100px;
    cursor: `+(V?"pointer":"")+`;
    overflow: hidden;
    `+(V?"background-color: #f5f5f5":"")+`
    .flex {
      flex: 1;
      overflow: hidden;
    }
    .placeholder {
      color: #bdbdbd;
    }
    .downIcon {
      line-height: 34px;
      margin-left: 8px;
    }
`}),Z=te.ZP.div(o);function H(f){var V=f.control,C=V===void 0?{}:V,O=(0,R.hB)(C.type);return g.createElement(Z,null,g.createElement("i",{className:"icon-"+O+" Gray_9e Font16 mRight8"}),g.createElement("span",{className:"controlName ellipsis",title:C.controlName},C.controlName))}H.propTypes={control:(0,p.shape)({})};function U(f){var V=f.disabled,C=f.selected,O=f.style,n=f.popupStyle,s=f.offset,j=f.controls,A=j===void 0?[]:j,S=f.hiddenIds,I=S===void 0?[]:S,c=f.children,q=f.isAppendToBody,b=f.onChange,k=b===void 0?function(){}:b,ee=r().find(A,{controlId:C});return g.createElement(y.Z,{style:n,disabled:V,renderInParent:!q,columns:A.filter(function(re){return!r().includes(I,re.controlId)}),onAdd:k,offset:s||[0,0],classNamePopup:"addControlDrop"},c||g.createElement(d,{disabled:V,className:"controlSelect",style:O},g.createElement("div",{className:"flex"},!ee&&g.createElement("span",{className:"placeholder"},_l("\u8BF7\u9009\u62E9")),ee&&g.createElement(H,{control:ee})),g.createElement("i",{className:"icon-arrow-down-border Font18 Gray_9e downIcon"})))}U.propTypes={disabled:p.bool,selected:p.string,style:(0,p.shape)({}),controls:(0,p.arrayOf)((0,p.shape)({})),offset:(0,p.arrayOf)(p.number),hiddenIds:(0,p.arrayOf)(p.string),onChange:p.func}},6503:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>r});var ce=t(81274),g=t(88239),p=t(12424),L=t(67294),te=t(30381),R=t.n(te),y=new Date,a=[{label:_l("\u4ECA\u5929"),key:"today",value:[R()(y).startOf("day").format(),R()(y).endOf("day").format()]},{label:_l("\u6628\u5929"),key:"yesterday",value:[R()(y).subtract(1,"days").startOf("day").format(),R()(y).subtract(1,"days").endOf("day").format()]},{label:_l("\u524D\u5929"),key:"beforeYesterday",value:[R()(y).subtract(2,"days").startOf("day").format(),R()(y).subtract(2,"days").endOf("day").format()]},{label:_l("\u672C\u5468"),key:"tswk",value:[R()(y).startOf("week").format(),R()(y).endOf("day").format()]},{label:_l("\u4E0A\u5468"),key:"lswk",value:[R()(y).subtract(1,"w").startOf("week").format(),R()(y).subtract(1,"w").endOf("week").endOf("day").format()]},{label:_l("\u672C\u6708"),key:"month",value:[R()(y).startOf("month").format(),R()(y).endOf("day").format()]},{label:_l("\u4E0A\u6708"),key:"lastmonth",value:[R()(y).subtract(1,"months").startOf("month").format(),R()(y).subtract(1,"months").endOf("month").endOf("day").format()]},{label:_l("\u81EA\u5B9A\u4E49"),key:"custom",value:void 0}];function r(o){var d=o.options,Z=d===void 0?a:d,H=o.onChange,U=(0,L.useRef)(null);return L.createElement("ul",{className:"worksheet-data-pick-select"},Z.map(function(f){return f.key!=="custom"?L.createElement("li",{key:"data-pick-select-"+f.key,onClick:function(){return H(f)}},f.label):L.createElement("div",{key:"data-pick-select-"+f.key,ref:U},L.createElement(ce.Z.RangePicker,{offset:{left:-533,top:0},popupParentNode:function(){return U.current},onOk:function(C){var O=(0,p.Z)(C,2),n=O[0],s=O[1];H((0,g.default)({},f,{value:[R()(n).format(),R()(s).format()]}))},onClear:function(){return H((0,g.default)({},f,{value:void 0}))},onSelect:function(){}},L.createElement("li",null,_l("\u81EA\u5B9A\u4E49\u65E5\u671F"))))}))}},97933:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>j});var ce=t(35246),g=t.n(ce),p=t(74806),L=t(33867),te=t(88239),R=t(85105),y=t.n(R),a=t(99663),r=t(22600),o=t(49135),d=t(93196),Z=t(86735),H=t(67294),U=t(97238),f=t(15577),V=t(71893),C=(0,Z.Z)([`
  height: 340px;
  border: 1px dashed #e0e0e0;
  .icon {
    color: #bdbdbd;
  }
  &:hover {
    border: 1px dashed #2196f3;
    .icon {
      color: #2196f3;
    }
  }
`],[`
  height: 340px;
  border: 1px dashed #e0e0e0;
  .icon {
    color: #bdbdbd;
  }
  &:hover {
    border: 1px dashed #2196f3;
    .icon {
      color: #2196f3;
    }
  }
`]),O=(0,Z.Z)([`
  height: 340px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  .icon {
    color: #58b84c;
  }
`],[`
  height: 340px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  .icon {
    color: #58b84c;
  }
`]),n=V.ZP.div(C),s=V.ZP.div(O),j=function(A){(0,d.default)(S,A);function S(I){(0,a.default)(this,S);var c=(0,o.default)(this,(S.__proto__||y()(S)).call(this,I));return c.state={},c}return(0,r.default)(S,[{key:"componentDidMount",value:function(){this.initUpload()}},{key:"initUpload",value:function(){var c=this;this.uploader=(0,U.Z)({runtimes:"html5",browse_button:this.uplaodaExcel,drop_element:"uploadExcel",max_file_size:"20mb",max_file_count:1,bucket:3,filters:{mime_types:[{extensions:"xlsx,xls,csv"}]},type:8,init:{Error:function(b,k,ee){var re=k.file.name,ie=k.code;if(File.GetExt(re)!="xlsx"&&File.GetExt(re)!="xls"&&File.GetExt(re)!="csv"){alert(_l("\u6587\u4EF6\u7C7B\u578B\u9519\u8BEF\uFF0C\u4EC5\u652F\u6301xls\u3001xlsx\u3001csv\u6587\u4EF6"),3,1e3);return}if(ie===window.plupload.FILE_SIZE_ERROR){alert(_l("\u6587\u4EF6\u8FC7\u5927\uFF0C\u4EC5\u652F\u6301 20MB \u4EE5\u5185\u7684\u6587\u4EF6"),3);return}},FilesAdded:function(b){b.setOption("auto_start",!0)},UploadProgress:function(b,k){c.setState({file:k})},FileUploaded:function(b,k,ee){c.setState({file:k}),c.props.fileUploaded((0,te.default)({},k,{key:ee.response.key}))}}})}},{key:"render",value:function(){var c=this,q=this.props.style,b=this.state.file,k=b===void 0?{}:b;return k.name?H.createElement(s,{style:q},H.createElement(L.Z,{icon:"new_excel",className:"excelIcon mBottom18 Font50"}),H.createElement("div",{className:"Font14"},k.name),H.createElement(p.Z,{style:{width:196,marginLeft:"36px"},trailColor:"#eaeaea",strokeColor:"#2196f3",strokeWidth:8,percent:Math.floor(k.loaded/(k.size||0)*100)}),H.createElement("div",{className:"Gray_9e"},(0,f.sS)(k.size))):H.createElement(n,{style:q},H.createElement("div",{id:"uploadExcel",ref:function(re){return c.uplaodaExcel=re},className:"h100 flexColumn justifyContentCenter alignItemsCenter Hand"},H.createElement(L.Z,{icon:"upload_file",className:"Font48 mBottom18"}),H.createElement("div",{className:"Font14 mBottom12"},_l("\u70B9\u51FB\u4E0A\u4F20\u6587\u4EF6\uFF0C\u6216\u62D6\u62FD\u6587\u4EF6")),H.createElement("div",{className:"Gray_9e"},_l("\u652F\u6301 20MB \u4EE5\u5185\u7684 xls\u3001xlsx\u3001csv \u6587\u4EF6"))))}}]),S}(H.Component)},12949:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>oe});var ce=t(8177),g=t.n(ce),p=t(88239),L=t(85105),te=t.n(L),R=t(99663),y=t(22600),a=t(49135),r=t(93196),o=t(67294),d=t(45697),Z=t.n(d),H=t(93967),U=t.n(H),f=t(44894),V=t(89499),C=t(52945),O=t.n(C),n=t(25273),s=t(91088),j=t(15759),A=t(63239),S=t.n(A),I=t(14761),c=t(96486),q=t.n(c),b=function(ve){(0,r.default)(ue,ve);function ue(){return(0,R.default)(this,ue),(0,a.default)(this,(ue.__proto__||te()(ue)).apply(this,arguments))}return(0,y.default)(ue,[{key:"render",value:function(){var Se=this.props,ye=Se.worksheet,J=ye.worksheetId,me=ye.rowId,be=ye.title,xe=ye.appId,Ae=ye.name,Ne=ye.appSectionId,Me=ye.viewId,Fe=Se.change,Be=Se.scrollToListTop,we=Se.discussions,Ie=Se.addCallback,ge=Se.projectId,Re=Se.forReacordDiscussion,Pe=Se.entityType,ke=Se.atData,We=me?J+"|"+me:J,Ve={forReacordDiscussion:Re,entityType:Pe,atData:ke,placeholder:window.isPublicApp?_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u53C2\u4E0E\u8BA8\u8BBA"):_l("\u53D1\u9001\u8BA8\u8BBA"),activePlaceholder:_l("\u8F93\u5165@\u6210\u5458\uFF0C\u6309Ctrl+Enter\u5FEB\u901F\u53D1\u5E03"),sourceId:We,sourceType:me?I.Z.TYPES.WORKSHEETROW:I.Z.TYPES.WORKSHEET,appId:me?md.global.APPInfo.worksheetRowAppID:md.global.APPInfo.worksheetAppID,fromAppId:xe,projectId:ge,remark:S()({type:"worksheet",appId:xe,appName:Ae,appSectionId:Ne,worksheetId:J,viewId:Me,rowId:me,title:typeof be=="string"?be:""}),relatedLeftSpace:-60,mentionsOptions:{position:"top",isAtAll:!!me},selectGroupOptions:{position:"top"},storageId:We,extendsId:(xe||"")+"|"+(Me||""),onSubmit:function(Ge){Be(),Fe({discussions:[Ge].concat(we)}),Ie(Ge)}};return o.createElement("div",{className:"comment"},o.createElement(j.Z,{className:"createHeadImg TxtMiddle InlineBlock mRight8 mTop3",user:{userHead:md.global.Account.avatar,accountId:md.global.Account.accountId},size:32,projectId:ge}),o.createElement(I.Z,Ve))}}]),ue}(o.Component),k=t(62231),ee=function(ve){(0,r.default)(ue,ve);function ue(pe){(0,R.default)(this,ue);var Se=(0,a.default)(this,(ue.__proto__||te()(ue)).call(this,pe));return Se.state={isOnlyMe:!1},Se.updatePageIndex=Se.updatePageIndex.bind(Se),Se.reload=Se.reload.bind(Se),Se}return(0,y.default)(ue,[{key:"componentDidMount",value:function(){var Se=this.props.listRef;Se&&Se(this),V.uY.addListener("RELOAD_RECORD_INFO_DISCUSS",this.reload)}},{key:"componentWillUnMount",value:function(){V.uY.removeListener("RELOAD_RECORD_INFO_DISCUSS",this.reload)}},{key:"reload",value:function(){this.updatePageIndex({isReset:!0})}},{key:"updatePageIndex",value:function(){if(this.commentList){var Se;(Se=this.commentList).updatePageIndex.apply(Se,arguments)}}},{key:"handleFocusClick",value:function(Se){this.setState({isOnlyMe:!Se})}},{key:"render",value:function(){var Se=this,ye=this.props,J=ye.worksheet,me=J.projectId,be=J.worksheetId,xe=J.rowId,Ae=J.appId,Ne=J.appName,Me=J.appSectionId,Fe=J.viewId,Be=J.title,we=J.doNotLoadAtDidMount,Ie=ye.change,ge=ye.discussions,Re=ye.addCallback,Pe=ye.forReacordDiscussion,ke=ye.atData,We=ye.status,Ve=ye.entityType,it=this.state.isOnlyMe,Ge=xe?be+"|"+xe:be,pt={forReacordDiscussion:Pe,entityType:Ve,atData:ke,placeholder:window.isPublicApp?_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u53C2\u4E0E\u8BA8\u8BBA"):_l("\u6682\u65E0\u8BA8\u8BBA"),activePlaceholder:_l("\u8F93\u5165@\u6210\u5458\uFF0C\u6309Ctrl+Enter\u5FEB\u901F\u53D1\u5E03"),sourceId:Ge,sourceType:xe?I.Z.TYPES.WORKSHEETROW:I.Z.TYPES.WORKSHEET,appId:xe?md.global.APPInfo.worksheetRowAppID:md.global.APPInfo.worksheetAppID,fromAppId:Ae,projectId:me,remark:S()({type:"worksheet",appId:Ae,appName:Ne,appSectionId:Me,worksheetId:be,viewId:Fe,rowId:xe,title:typeof Be=="string"?Be:""}),offset:45,popupContainer:document.body,extendsId:(Ae||"")+"|"+(Fe||""),mentionsOptions:{isAtAll:!!xe},autoFocus:!0,onSubmit:function(vt){Ie({discussions:[vt].concat(ge)}),Re(vt)}};return o.createElement("div",{className:"pBottom10 pTop10 WorkSheetCommentList"},o.createElement(k.Z,{doNotLoadAtDidMount:we,status:We,sourceId:Ge,sourceType:xe?I.Z.TYPES.WORKSHEETROW:I.Z.TYPES.WORKSHEET,isFocus:it,commentList:ge,updateCommentList:function(vt){Ie({discussions:vt})},removeComment:function(vt){Ie({discussions:q().filter(ge,function(At){var yt=At.discussionId;return yt!==vt})})},manualRef:function(vt){Se.commentList=vt},entityType:Ve},o.createElement(I.Z,pt)))}}]),ue}(o.Component),re=t(18585),ie,le,E,w,K;function N(ve,ue,pe,Se,ye){var J={};return Object.keys(Se).forEach(function(me){J[me]=Se[me]}),J.enumerable=!!J.enumerable,J.configurable=!!J.configurable,("value"in J||J.initializer)&&(J.writable=!0),J=pe.slice().reverse().reduce(function(me,be){return be(ve,ue,me)||me},J),ye&&J.initializer!==void 0&&(J.value=J.initializer?J.initializer.call(ye):void 0,J.initializer=void 0),J.initializer===void 0&&(Object.defineProperty(ve,ue,J),J=null),J}var F=(E=(K=w=function(ve){(0,r.default)(ue,ve);function ue(pe){(0,R.default)(this,ue);var Se=(0,a.default)(this,(ue.__proto__||te()(ue)).call(this,pe));return Se.getAtData=function(ye){var J=ye||Se.props,me=J.formdata,be=me===void 0?[]:me,xe=J.allowExAccountDiscuss,Ae=xe===void 0?!1:xe,Ne=J.exAccountDiscussEnum,Me=Ne===void 0?0:Ne,Fe=J.status,Be=Se.state.discussions,we=Be===void 0?[]:Be,Ie=[];be=be.filter(function(We){return[We.sourceControlType,We.type].includes(26)&&(We.userPermission!==0||We.controlId==="ownerid"||We.type===30&&q().get(We,"strDefault.0")!=="1")}),Fe===1&&(!Ae||Ae&&Me!==0)&&(be=be.filter(function(We){return(We.advancedSetting||{}).usertype!=="2"})),be.map(function(We){var Ve=void 0;try{Ve=JSON.parse(We.value).map(function(it){return O()({},it,{job:We.controlName})})}catch(it){Ve=[]}Ie=Ie.concat(Ve)});var ge=[],Re=we.map(function(We){return ge=ge.concat(We.accountsInMessage),We.createAccount});Ie=Ie.concat(Re.map(function(We){return O()({},We,{job:_l("\u8BA8\u8BBA\u7528\u6237")})})).concat(ge.map(function(We){return O()({},We,{job:_l("\u8BA8\u8BBA\u7528\u6237")})})).filter(function(We){return!(["user-undefined","user-publicform",md.global.Account.accountId].includes(We.accountId)||We.accountId.indexOf("user-")>=0)}),Ie=Ie.filter(function(We){return!(Fe===1&&(!Ae||Ae&&Me!==0)&&We.accountId.indexOf("a#")>=0)&&We.status===1});var Pe={},ke=Ie.reduce(function(We,Ve){return Pe[Ve.accountId]||(Pe[Ve.accountId]=We.push(Ve)),We},[]);Se.setState({atData:ke})},Se.state={discussions:[],worksheetInfo:{},atData:[]},Se}return(0,y.default)(ue,[{key:"componentDidMount",value:function(){var Se=this,ye=this.props,J=ye.appId,me=ye.worksheetId,be=ye.appSectionId,xe=ye.disableScroll;this.scrollView&&xe&&(this.$scrollCon=$(this.scrollView).closest(".rightContentScroll")[0],this.$scrollCon&&this.$scrollCon.addEventListener("scroll",this.handleRecordRightContentScroll)),me&&(!J||!be)&&s.Z.getAppSimpleInfo({worksheetId:me}).then(function(Ae){Se.setState({worksheetInfo:Ae})}),this.getAtData()}},{key:"componentWillReceiveProps",value:function(Se){(Se.formFlag!==this.props.formFlag||Se.status!==this.props.status||!q().isEqual(this.props.formdata,Se.formdata))&&this.getAtData(Se)}},{key:"componentWillUnmount",value:function(){this.$scrollCon&&this.$scrollCon.removeEventListener("scroll",this.handleRecordRightContentScroll)}},{key:"handleRecordRightContentScroll",value:function(Se){if(this.$scrollCon&&this.$scrollCon.scrollHeight-this.$scrollCon.clientHeight-this.$scrollCon.scrollTop<20){var ye=this.commentList.updatePageIndex;ye()}}},{key:"scrollToListTop",value:function(){if(this.scrollView&&this.scrollView.nanoScroller&&this.commentList){var Se=$(this.scrollView.nanoScroller);$(this.scrollView.nanoScroller).nanoScroller({scrollTop:0})}}},{key:"handleScroll",value:function(Se,ye){var J=ye.direction,me=ye.maximum,be=ye.position;if(J==="down"&&me-be<20&&this.commentList){var xe=this.commentList.updatePageIndex;xe()}}},{key:"render",value:function(){var Se=this,ye=this.props,J=ye.disableScroll,me=ye.addCallback,be=ye.projectId,xe=ye.forReacordDiscussion,Ae=ye.status,Ne=ye.exAccountDiscussEnum,Me=this.state.worksheetInfo,Fe=Ae===4?2:Ae===1&&!md.global.Account.isPortal&&Ne===1?1:0,Be={worksheet:O()({},this.props,Me),scrollToListTop:this.scrollToListTop.bind(this),change:function(ge,Re){Se.setState(ge),Se.getAtData()},addCallback:me,projectId:be,forReacordDiscussion:xe,entityType:Fe},we={worksheet:O()({},this.props,Me),listRef:function(ge){Se.commentList=ge},change:function(ge,Re){Se.setState(ge),Se.getAtData()},addCallback:me,forReacordDiscussion:xe,status:Ae,entityType:Fe};return o.createElement("div",{className:"workSheetCommentBox flex flexRow"},J?o.createElement("div",{className:"commentListBox flex",ref:function(ge){Se.scrollView=ge}},o.createElement(ee,(0,p.default)({},we,{discussions:this.state.discussions,atData:this.state.atData}))):o.createElement(n.Z,{className:"commentListBox flex",ref:function(ge){Se.scrollView=ge},updateEvent:this.handleScroll,preserveScrollTop:!0},o.createElement(ee,(0,p.default)({},we,{discussions:this.state.discussions,atData:this.state.atData}))),o.createElement(b,(0,p.default)({},Be,{discussions:this.state.discussions,atData:this.state.atData})))}}]),ue}(o.Component),w.propTypes={appId:Z().string,worksheetId:Z().string,appSectionId:Z().string,disableScroll:Z().bool,addCallback:Z().func},K),N(E.prototype,"handleRecordRightContentScroll",[f.Nj],g()(E.prototype,"handleRecordRightContentScroll"),E.prototype),N(E.prototype,"handleScroll",[f.Nj],g()(E.prototype,"handleScroll"),E.prototype),E),h=t(54208),z=t(33867),X=t(45231),B=t(15577),x=t(68924),Q=t(30381),i=t.n(Q),m,v,W,P,u;function l(ve,ue,pe,Se,ye){var J={};return Object.keys(Se).forEach(function(me){J[me]=Se[me]}),J.enumerable=!!J.enumerable,J.configurable=!!J.configurable,("value"in J||J.initializer)&&(J.writable=!0),J=pe.slice().reverse().reduce(function(me,be){return be(ve,ue,me)||me},J),ye&&J.initializer!==void 0&&(J.value=J.initializer?J.initializer.call(ye):void 0,J.initializer=void 0),J.initializer===void 0&&(Object.defineProperty(ve,ue,J),J=null),J}var T=30,G=(W=(u=P=function(ve){(0,r.default)(ue,ve);function ue(pe){(0,R.default)(this,ue);var Se=(0,a.default)(this,(ue.__proto__||te()(ue)).call(this,pe));return Se.handleTimeFormat=function(){var ye=Se.state.isSimplify,J=ye?"whole":"simplify";Se.setState({isSimplify:!ye}),localStorage.setItem("mdTimeFormat",J)},Se.state={loadouted:!1,loading:!0,discussList:[],isSimplify:(localStorage.getItem("mdTimeFormat")||"simplify")==="simplify"},Se}return(0,y.default)(ue,[{key:"componentDidMount",value:function(){var Se=this.props.disableScroll;this.loadLog(q().pick(this.props,["worksheetId","rowId"])),this.scrollView&&Se&&(this.$scrollCon=$(this.scrollView).closest(".rightContentScroll")[0],this.$scrollCon&&this.$scrollCon.addEventListener("scroll",this.handleScroll))}},{key:"componentWillReceiveProps",value:function(Se){(Se.worksheetId!==this.props.worksheetId||Se.rowId!==this.props.rowId)&&this.loadLog(q().pick(Se,["worksheetId","rowId"]))}},{key:"componentWillUnmount",value:function(){this.$scrollCon&&this.$scrollCon.removeEventListener("scroll",this.handleScroll)}},{key:"loadLog",value:function(Se){var ye=this,J=Se.worksheetId,me=Se.rowId,be=Se.pageSize,xe=be===void 0?T:be,Ae=Se.pageIndex,Ne=Ae===void 0?1:Ae,Me=this.state.discussList;this.setState({loading:!0}),Ne===1&&(Me=[]),X.Z.getLogs({worksheetId:J,rowId:me,pageSize:xe,pageIndex:Ne}).then(function(Fe){var Be={loading:!1,loadouted:Fe.length<T};Fe.length&&(Be.pageIndex=Ne,Be.discussList=Me.concat(Fe)),ye.setState(Be)})}},{key:"handleScroll",value:function(){var Se=this.state,ye=Se.loading,J=Se.loadouted,me=Se.pageIndex,be=Se.discussList;!ye&&!J&&be.length>=T&&this.loadLog((0,p.default)({pageIndex:me+1},q().pick(this.props,["worksheetId","rowId"])))}},{key:"render",value:function(){var Se=this,ye=this.props.disableScroll,J=this.state,me=J.loading,be=J.discussList,xe=J.isSimplify,Ae=o.createElement("div",{className:"logBox"},be.map(function(Ne,Me){var Fe=(0,B.U4)({message:Ne.message,accountId:Ne.accountId,accountName:Ne.accountName}),Be=i()(Ne.createTime),we=_l("%0\u5E74%1\u6708%2\u65E5",Be.format("YYYY"),Be.format("MM"),Be.format("DD"))+" "+Be.format("HH:mm:ss");return o.createElement("div",{className:"logItem",key:Me},o.createElement(z.Z,{icon:[void 0,"plus","edit","task-new-delete","restart","download","reply"][Ne.type]}),o.createElement("span",{className:"logContent",dangerouslySetInnerHTML:{__html:(0,x.filterXSS)(Fe)}}),o.createElement("span",{className:"logTime"},o.createElement("strong",{className:"Normal Hand Hover_21 logTimeTip",onClick:Se.handleTimeFormat,"data-tip":xe?we:""},xe?createTimeSpan(Ne.createTime):we)))}));return ye?o.createElement("div",{className:"logScroll flex",ref:function(Me){Se.scrollView=Me}},Ae,me&&o.createElement(h.Z,{className:"mBottom20"})):o.createElement(n.Z,{className:"logScroll flex",onScrollEnd:this.handleScroll},Ae,me&&o.createElement(h.Z,{className:"mBottom20"}))}}]),ue}(o.Component),P.propTypes={worksheetId:Z().string,rowId:Z().string,disableScroll:Z().bool},u),l(W.prototype,"handleScroll",[f.Nj],g()(W.prototype,"handleScroll"),W.prototype),W),D=t(15797),M=t(46891),se,ae,ne,de,Ce,he,fe;function Ee(ve,ue,pe,Se,ye){var J={};return Object.keys(Se).forEach(function(me){J[me]=Se[me]}),J.enumerable=!!J.enumerable,J.configurable=!!J.configurable,("value"in J||J.initializer)&&(J.writable=!0),J=pe.slice().reverse().reduce(function(me,be){return be(ve,ue,me)||me},J),ye&&J.initializer!==void 0&&(J.value=J.initializer?J.initializer.call(ye):void 0,J.initializer=void 0),J.initializer===void 0&&(Object.defineProperty(ve,ue,J),J=null),J}var Y=(0,M.Z)(se=(de=(he=Ce=function(ve){(0,r.default)(ue,ve);function ue(pe){(0,R.default)(this,ue);var Se=(0,a.default)(this,(ue.__proto__||te()(ue)).call(this,pe));return fe.call(Se),Se.getShowTabs(pe),Se.state={loading:!1,status:Se.getActive(pe),doNotLoadAtDidMount:pe.isOpenNewAddedRecord},Se}return(0,y.default)(ue,[{key:"componentDidMount",value:function(){var Se=this;V.uY.addListener("RELOAD_RECORD_INFO_LOG",this.reloadLog),setTimeout(function(){Se.state.doNotLoadAtDidMount&&Se.setState({doNotLoadAtDidMount:!1})},1e3)}},{key:"componentWillReceiveProps",value:function(Se){Se.hiddenTabs!==this.props.hiddenTabs&&this.getShowTabs(Se)}},{key:"componentWillUnmount",value:function(){V.uY.removeListener("RELOAD_RECORD_INFO_LOG",this.reloadLog)}},{key:"getActive",value:function(){var Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(q().find(this.showTabs,{name:"approval"})&&!(Se.workflowStatus||"").startsWith('["other')){var ye=this.showTabs.filter(function(J){return J.name!=="approval"})[0];if(ye)return ye.id}return this.showTabs.length&&this.showTabs[0].id}},{key:"reloadLog",value:function(){q().isFunction(q().get(this,"logRef.current.reload"))&&q().get(this,"logRef.current.reload")()}},{key:"render",value:function(){var Se=this,ye=this.props,J=ye.workflowStatus,me=ye.configLoading,be=ye.workflow,xe=ye.approval,Ae=ye.forReacordDiscussion,Ne=this.state,Me=Ne.status,Fe=Ne.loading,Be=Ne.doNotLoadAtDidMount;return o.createElement("div",{className:"discussLogFile flexRow"},o.createElement("div",{className:"header"},this.showTabs.map(function(we){return o.createElement("span",{key:we.id,className:U()("talk ThemeHoverColor3 ThemeHoverBorderColor3 Font14","tab"+we.id,"tabsNum"+Se.showTabs.length,Se.state.status===we.id&&"ThemeColor3 ThemeBorderColor3 border2"),onClick:function(){Se.setState({status:we.id,loading:we.id===Me}),we.id===Me&&setTimeout(function(){Se.setState({loading:!1})},100)}},o.createElement("span",{className:U()("txt InlineBlock overflow_ellipsis WordBreak",Se.state.status===we.id&&"ThemeColor3 ThemeBorderColor3 border2")},we.text))})),!Fe&&o.createElement("div",{className:"body flex"},Me===-1&&xe,Me===0&&be,(Me===1||Me===4)&&!me&&o.createElement("div",{className:"talkBox"},o.createElement(F,(0,p.default)({status:Me},this.props,{doNotLoadAtDidMount:Be}))),Me===2&&(Ae?o.createElement(D.Z,(0,p.default)({ref:this.logRef},this.props)):o.createElement(G,this.props))))}}]),ue}(o.Component),Ce.propTypes={workflow:Z().element,approval:Z().element,hiddenTabs:Z().arrayOf(Z().string)},Ce.defaultProps={addCallback:function(){},hiddenTabs:[]},fe=function(){var ue=this;this.logRef=o.createRef(),this.getShowTabs=function(pe){ue.showTabs=[{id:-1,name:"approval",text:_l("\u5BA1\u6279")},{id:0,name:"workflow",text:_l("\u6D41\u7A0B")},{id:1,name:"discuss",text:_l("\u8BA8\u8BBA")},{id:4,name:"discussPortal",text:md.global.Account.isPortal?_l("\u8BA8\u8BBA"):_l("\u8BA8\u8BBA(\u5916\u90E8)")},{id:2,name:"logs",text:_l("\u65E5\u5FD7")}].filter(function(Se){return!q().find(pe.hiddenTabs,function(ye){return ye===Se.name})})}},he),Ee(de.prototype,"reloadLog",[f.Nj],g()(de.prototype,"reloadLog"),de.prototype),de))||se;const oe=Y},58950:(lt,Te,t)=>{"use strict";if(t.d(Te,{Z:()=>g}),!/^(1887|7596|7798)$/.test(t.j))var ce=t(12949);const g=/^(1887|7596|7798)$/.test(t.j)?null:ce.Z},2641:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>r});var ce=t(12424),g=t(86735),p=t(67294),L=t(45697),te=t.n(L),R=t(71893),y=(0,g.Z)([`
  color: #9e9e9e;
  display: inline-block;
  height: 28px;
  font-size: 20px;
  line-height: 28px;
  padding: 0 4px;
  border-radius: 5px;
  &:hover {
    background: #f7f7f7;
  }
`],[`
  color: #9e9e9e;
  display: inline-block;
  height: 28px;
  font-size: 20px;
  line-height: 28px;
  padding: 0 4px;
  border-radius: 5px;
  &:hover {
    background: #f7f7f7;
  }
`]),a=R.ZP.span(y);function r(o){var d=o.className,Z=o.style,H=o.noLoading,U=o.exportSheet,f=U===void 0?function(){}:U,V=(0,p.useState)(!1),C=(0,ce.Z)(V,2),O=C[0],n=C[1];return p.createElement("span",{className:d,style:Z,"data-tip":_l("\u5BFC\u51FAExcel"),onClick:function(){O||(H||n(!0),f(function(){return n(!1)}))}},O?p.createElement("i",{className:"icon icon-loading_button ThemeColor3",style:{fontSize:16,margin:5,display:"inline-block",animation:"rotate 0.6s infinite linear"}}):p.createElement(a,{className:"Hand ThemeHoverColor3"},p.createElement("i",{className:"icon icon-file_download"})))}r.propTypes={className:L.string,noLoading:L.bool,style:(0,L.shape)({}),exportSheet:L.func}},58002:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>U});var ce=t(86735),g=t(67294),p=t(45697),L=t.n(p),te=t(93967),R=t.n(te),y=t(71893),a=(0,ce.Z)([`
  display: inline-block;
  cursor: pointer;
  color: #333;
  padding: 0px 12px;
  height: 28px;
  line-height: 28px;
  border-radius: 4px;
  white-space: nowrap;
  &:hover {
    background: #f5f5f5;
  }
  &.disabled {
    cursor: not-allowed !important;
    opacity: 0.5;
  }
`],[`
  display: inline-block;
  cursor: pointer;
  color: #333;
  padding: 0px 12px;
  height: 28px;
  line-height: 28px;
  border-radius: 4px;
  white-space: nowrap;
  &:hover {
    background: #f5f5f5;
  }
  &.disabled {
    cursor: not-allowed !important;
    opacity: 0.5;
  }
`]),r=(0,ce.Z)([`
  margin-right: 4px;
  font-size: 18px;
  vertical-align: middle;
  color: #757575;
`],[`
  margin-right: 4px;
  font-size: 18px;
  vertical-align: middle;
  color: #757575;
`]),o=(0,ce.Z)([`
  vertical-align: middle;
  font-size: 13px;
`],[`
  vertical-align: middle;
  font-size: 13px;
`]),d=y.ZP.div(a),Z=y.ZP.span(r),H=y.ZP.span(o);function U(f){var V=f.disabled,C=f.className,O=f.icon,n=f.text,s=f.iconColor,j=f.style,A=f.onClick,S=f.textCmp;return g.createElement(d,{className:R()(C,{disabled:V}),style:j,onClick:A},O&&g.createElement(Z,{className:R()("icon icon-"+O),style:s?{color:s}:{}}),g.createElement(H,{className:R()("text")},S?S():n))}U.propTypes={icon:p.string,style:(0,p.shape)({}),disabled:p.bool,className:p.string,text:p.string,iconColor:p.string,after:p.element,onClick:p.func}},57963:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>it});var ce=t(42057),g=t(12424),p=t(86735),L=t(67294),te=t(71893),R=t(96486),y=t.n(R),a=t(94942),r=t.n(a),o=t(36803),d=t(42185),Z=t(70264),H=t(31546),U=t(85315),f=t(89499),V=t(53670),C=t(4557),O=t(52945),n=t.n(O),s=t(88239),j=t(42723),A=t(88902),S=t.n(A),I=t(91706),c=t(45697),q=t(93967),b=t.n(q),k=t(40240),ee=t(29314),re=t(62232),ie=t(55266),le=t(43113),E=(0,p.Z)([`
  border-radius: 4px;
  border: 1px solid #e0e0e0;
  overflow: hidden;
  .cell {
    line-height: 20px;
    background-color: #fff;
    border: 1px solid rgba(0, 0, 0, 0.09) !important;
    border-left: none !important;
    border-top: none !important;
    padding: 7px 8px;
    overflow: hidden;
    background-color: #f9fcfd;
    &.oddRow {
      background-color: #fff;
    }
  }
  .controlHead {
    display: flex;
    background-color: #fff;
    align-items: center;
    .controlIcon {
      margin-right: 4px;
      font-size: 15px;
      color: #9d9d9d;
    }
    .dropdownIcon {
      margin-left: 4px;
      font-size: 13px;
      color: #9d9d9d;
    }
    .controlName {
      color: #333;
      font-size: 13px;
      font-weight: 500;
    }
  }
`],[`
  border-radius: 4px;
  border: 1px solid #e0e0e0;
  overflow: hidden;
  .cell {
    line-height: 20px;
    background-color: #fff;
    border: 1px solid rgba(0, 0, 0, 0.09) !important;
    border-left: none !important;
    border-top: none !important;
    padding: 7px 8px;
    overflow: hidden;
    background-color: #f9fcfd;
    &.oddRow {
      background-color: #fff;
    }
  }
  .controlHead {
    display: flex;
    background-color: #fff;
    align-items: center;
    .controlIcon {
      margin-right: 4px;
      font-size: 15px;
      color: #9d9d9d;
    }
    .dropdownIcon {
      margin-left: 4px;
      font-size: 13px;
      color: #9d9d9d;
    }
    .controlName {
      color: #333;
      font-size: 13px;
      font-weight: 500;
    }
  }
`]),w=(0,p.Z)([`
  .worksheetFilterColumnOptionList.menuList {
    width: 310px !important;
    max-height: 240px;
    .Item-content {
      padding: 0 16px;
    }
  }
`],[`
  .worksheetFilterColumnOptionList.menuList {
    width: 310px !important;
    max-height: 240px;
    .Item-content {
      padding: 0 16px;
    }
  }
`]),K=(0,p.Z)([`
  cursor: pointer;
  height: 48px;
  padding: 0 15px;
  border: 1px solid #e0e0e0;
  display: flex;
  align-items: center;
  .icon {
    margin-right: 3px;
  }
`],[`
  cursor: pointer;
  height: 48px;
  padding: 0 15px;
  border: 1px solid #e0e0e0;
  display: flex;
  align-items: center;
  .icon {
    margin-right: 3px;
  }
`]),N=(0,te.ZP)(I.Z)(E),F=(0,te.ZP)(ie.Z)(w),h=te.ZP.div(K);function z(Ge){var pt=Ge.offsetLeft,ot=Ge.offsetTop,vt=Ge.offsetWidth,At=Ge.offsetHeight,yt=void 0,st=void 0,St=Ge.parentElement.parentElement.scrollLeft,Qe=Ge.parentElement.parentElement.scrollTop,Xe=Ge.parentElement.parentElement.clientWidth,$e=Ge.parentElement.parentElement.clientHeight,Ke=pt+vt<=St+Xe,Ue=pt>=St,He=ot>=Qe,ze=ot+At<=Qe+$e;return Ue||(yt=pt),Ke||(yt=pt+vt-Xe),He||(st=ot),ze||(st=ot+At-$e),{fullvisible:Ke&&Ue&&He&&ze,newLeft:yt,newTop:st}}function X(Ge){var pt=Ge.controls,ot=Ge.key,vt=Ge.style,At=Ge.columnIndex,yt=pt[At];return L.createElement("div",{key:ot,style:vt,className:"cell controlHead"},!!yt&&L.createElement(L.Fragment,null,L.createElement("i",{className:"controlIcon icon-"+(0,re.hB)(yt.type)}),L.createElement("div",{className:"flex controlName"},L.createElement("div",{className:"ellipsis"},yt.controlName))))}X.propTypes={controls:(0,c.arrayOf)((0,c.shape)({})),key:c.number,style:(0,c.shape)({}),columnIndex:c.number};function B(Ge,pt,ot){var vt=(ot?Ge-60:Ge)/(pt-(ot?1:0));return vt>150?vt:150}function x(Ge){var pt=Ge.loading,ot=Ge.activeIndex,vt=Ge.mode,At=vt===void 0?"paste":vt,yt=Ge.height,st=yt===void 0?400:yt,St=Ge.rowCount,Qe=St===void 0?14:St,Xe=Ge.showNumber,$e=Xe===void 0?!1:Xe,Ke=Ge.rowStartIndex,Ue=Ge.disableYScroll,He=Ge.width,ze=Ge.controls,gt=Ge.mapConfig,Et=gt===void 0?{}:gt,ft=Ge.renderCellContent,qe=Ge.onCellClick,nt=qe===void 0?function(){}:qe,Ze=Ge.onUpdateMapConfig,et=Ze===void 0?function(){}:Ze,ut=At==="paste"?ze.length:S()(Et).length;Ge.columnCount&&Ge.columnCount>ut&&(ut=Ge.columnCount),$e&&(ut=ut+1);var xt=(0,L.useRef)();(0,L.useEffect)(function(){var Rt=y().get(xt,"current.dom.current");if(Rt){var jt=Rt.querySelector(".cell.active");if(jt){var fn=z(jt);fn.fullvisible||xt.current.setScroll(fn.newLeft,fn.newTop)}}});var wt=B(He,ut,$e),kt=Math.ceil(st/34);return L.createElement(N,{showHead:!0,ref:xt,loading:pt,disableYScroll:Ue,width:He,height:st,rowHeight:34,getColumnWidth:function(jt){return $e&&jt===0?60:wt},rowCount:Qe>kt?Qe:kt,columnCount:ut,leftFixedCount:$e?1:0,Cell:function(jt){var fn=jt.style,Mt=jt.key,sn=jt.data,on=sn===void 0?{}:sn,en=(0,j.Z)(jt,["style","key","data"]),$t=(0,le.r)((0,s.default)({columnIndex:en.columnIndex,rowIndex:en.rowIndex},on.grid||{})),an=$t.columnIndex,tn=$t.rowIndex,mt=tn*ut+an;if((y().get(on,"grid.id")||"").startsWith("top")){if($e&&an===0)return typeof Ke>"u"?L.createElement("div",{key:Mt,style:fn,className:"cell controlHead "}):L.createElement("div",{key:Mt,style:fn,className:"cell TxtCenter "},Ke!==0&&Ke);if(At==="paste")return X({controls:ze,style:fn,key:Mt,columnIndex:an});var Lt=Et[an-1],zt=Lt&&y().find(ze,{controlId:Lt});return L.createElement(ee.Z,{action:["click"],popup:L.createElement(F,{className:"lightTheme",controls:ze,filterColumnClassName:"menuList",selected:Lt,footer:L.createElement(h,{onClick:function(){et(an-1,void 0)}},L.createElement("i",{className:"icon icon-file_upload_off Font15 Gray_bd"}),_l("\u4E0D\u5BFC\u5165\u6B64\u5217")),onAdd:function(Nt){et(an-1,Nt.controlId)}}),getPopupContainer:function(){return document.body},popupAlign:{points:["tr","br"],overflow:{adjustX:!0,adjustY:!0}}},L.createElement("div",{key:Mt,style:fn,className:"cell controlHead Hand"},L.createElement("i",{className:"controlIcon icon-"+(zt?(0,re.hB)(zt.type):"file_upload_off Gray_bd")}),L.createElement("div",{className:"flex controlName"},zt?L.createElement("div",{className:"ellipsis"},zt.controlName):L.createElement("div",{className:"ellipsis Gray_c6"},_l("\u4E0D\u5BFC\u5165\u6B64\u5217"))),L.createElement("i",{className:"dropdownIcon icon icon-arrow-down"})))}return L.createElement("div",{key:Mt,style:n()({},fn,mt===ot?{boxShadow:"inset 0px 0px 0px 1px #2196f3"}:{}),className:b()("cell",{active:mt===ot,oddRow:tn%2===1,TxtCenter:$e&&an===0}),onClick:function(){nt(mt,{columnIndex:an,rowIndex:tn})}},function(){return $e&&an===0&&tn<Qe?tn+(Ke||0)+1:y().isFunction(ft)?ft({index:mt,rowIndex:tn,columnIndex:$e?an-1:an}):void 0}())}})}x.propTypes={loading:c.bool,activeIndex:c.number,mode:c.string,height:c.number,rowCount:c.number,showNumber:c.bool,disableYScroll:c.bool,width:c.number,rowStartIndex:c.number,controls:(0,c.arrayOf)((0,c.shape)({})),mapConfig:(0,c.arrayOf)((0,c.shape)({})),renderCellContent:c.func,onUpdateMapConfig:c.func,onCellClick:c.func};const Q=(0,k.Z)(x);var i=t(97933),m=(0,p.Z)([`
  height: 52px;
  line-height: 52px;
  text-align: center;
  position: relative;
  border-bottom: 1px solid rgba(0, 0, 0, 0.09);
  .title {
    position: absolute;
    font-weight: 500;
    left: 24px;
    font-size: 17px;
    color: #333;
  }
  .tabs {
    display: inline-block;
    .tab {
      cursor: pointer;
      color: #757575;
      display: inline-block;
      padding: 0 5px;
      line-height: 45px;
      border-bottom: 3px solid transparent;
      &.active {
        border-bottom-color: #2196f3;
        color: #2196f3;
      }
      &:first-child {
        margin-right: 30px;
      }
    }
  }
`],[`
  height: 52px;
  line-height: 52px;
  text-align: center;
  position: relative;
  border-bottom: 1px solid rgba(0, 0, 0, 0.09);
  .title {
    position: absolute;
    font-weight: 500;
    left: 24px;
    font-size: 17px;
    color: #333;
  }
  .tabs {
    display: inline-block;
    .tab {
      cursor: pointer;
      color: #757575;
      display: inline-block;
      padding: 0 5px;
      line-height: 45px;
      border-bottom: 3px solid transparent;
      &.active {
        border-bottom-color: #2196f3;
        color: #2196f3;
      }
      &:first-child {
        margin-right: 30px;
      }
    }
  }
`]),v=(0,p.Z)([`
  flex: 1;
  padding: 24px;
  .uploadExcel {
    height: 100%;
    > div {
      height: 100%;
    }
  }
  .footer {
    text-align: right;
    margin-top: 20px;
  }
  .editingCellInput {
    border: none;
    padding: 0;
    outline: none;
    width: 100%;
    font-size: 14px;
  }
`],[`
  flex: 1;
  padding: 24px;
  .uploadExcel {
    height: 100%;
    > div {
      height: 100%;
    }
  }
  .footer {
    text-align: right;
    margin-top: 20px;
  }
  .editingCellInput {
    border: none;
    padding: 0;
    outline: none;
    width: 100%;
    font-size: 14px;
  }
`]),W=(0,p.Z)([`
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 17px;
  .splitCharDorpDown {
    margin-left: 14px;
    width: 200px;
  }
  .infoIcon {
    margin-left: 5px;
  }
  .right {
    flex-shrink: 0;
  }
`],[`
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 17px;
  .splitCharDorpDown {
    margin-left: 14px;
    width: 200px;
  }
  .infoIcon {
    margin-left: 5px;
  }
  .right {
    flex-shrink: 0;
  }
`]),P=20,u=[{name:_l("Excel\u5BFC\u5165"),value:0},{name:_l("\u7C98\u8D34\u5BFC\u5165"),value:1}],l=te.ZP.div(m),T=te.ZP.div(v),G=te.ZP.div(W);function D(Ge){for(var pt=[],ot="",vt=!1,At=/\r\n|\n|\r/,yt=0;yt<Ge.length;yt++){var st=Ge[yt];st==='"'&&(vt=!vt),At.test(st)&&!vt?(ot.trim()!==""&&pt.push(ot.trim()),ot=""):ot+=st}return ot.trim()!==""&&pt.push(ot.trim()),pt}function M(Ge){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,ot=["	",":","|",","," "][pt-1];return D(Ge).map(function(vt){return(vt||"").split(ot).map(function(At){return pt===1&&At.indexOf(`
`)>-1&&/^"|"$/.test(At)?At.replace(/^"/,"").replace(/"$/,""):At})}).filter(function(vt){return!y().isEmpty(vt.filter(function(At){return!y().isUndefined(At)&&At!==""}))})}function se(Ge){var pt=Ge.oldData,ot=Ge.columnsCount,vt=Ge.startRowIndex,At=Ge.startColumnIndex,yt=Ge.isClear,st=Ge.changes,St=st===void 0?[[]]:st,Qe=y().cloneDeep(pt);if(yt)return Qe[vt][At]="",Qe;var Xe=vt+St.length,$e=At+Math.max.apply(Math,(0,U.Z)(St.map(function(He){return He&&He.length}).filter(y().identity)));$e>ot&&($e=ot);for(var Ke=vt;Ke<Xe;Ke++)for(var Ue=At;Ue<$e;Ue++)y().isArray(Qe[Ke])||(Qe[Ke]=new Array(ot).fill(void 0)),Qe[Ke][Ue]=St[Ke-vt][Ue-At];return Qe}function ae(Ge){var pt=Ge.className,ot=Ge.defaultValue,vt=Ge.onChange,At=vt===void 0?function(){}:vt,yt=Ge.onBlur,st=yt===void 0?function(){}:yt,St=Ge.onKeyDown,Qe=St===void 0?function(){}:St,Xe=(0,L.useRef)();return(0,L.useEffect)(function(){Xe.current&&Xe.current.focus()},[]),L.createElement("input",{className:pt,ref:Xe,defaultValue:ot,onChange:At,onBlur:st,onKeyDown:Qe})}ae.propTypes={className:c.string,defaultValue:c.string,onChange:c.func,onBlur:c.func,onKeyDown:c.func};function ne(Ge){var pt=Ge.dialogHeight,ot=Ge.importDataActiveType,vt=Ge.controls,At=Ge.onParsePaste,yt=(0,L.useState)(1),st=(0,g.Z)(yt,2),St=st[0],Qe=st[1],Xe=(0,L.useState)(0),$e=(0,g.Z)(Xe,2),Ke=$e[0],Ue=$e[1],He=(0,L.useState)(!1),ze=(0,g.Z)(He,2),gt=ze[0],Et=ze[1],ft=(0,L.useRef)([[]]),qe=(0,L.useState)(new Array(11).fill(void 0).map(function(){return new Array(vt.length).fill(void 0)})),nt=(0,g.Z)(qe,2),Ze=nt[0],et=nt[1],ut=Ze.filter(function(kt){return!y().isEmpty(kt.filter(y().identity))}),xt=window.isMacOs?"Command":"Ctrl",wt=(0,L.useCallback)(function(kt,Rt){var jt=Math.floor(kt/vt.length),fn=kt%vt.length;try{var Mt=M(Rt,St),sn=se({oldData:Ze,startRowIndex:jt,startColumnIndex:fn,columnsCount:vt.length,changes:Mt,isClear:!Rt});if(ft.current){var on=ft.current.concat([sn]);ft.current=on.slice(on.length>20?on.length-P:0)}et(sn)}catch(en){console.error(en)}},[Ze,St]);return(0,V.b)(function(kt){ot===1&&(y().isUndefined(Ke)||wt(Ke,kt))},[Ke]),(0,C.Z)(function(kt){return y().includes(["Backspace"],kt.key)},function(kt){gt||y().isUndefined(Ke)||wt(Ke,"")}),(0,C.Z)(function(kt){return y().includes(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter","z","Tab"],kt.key)},function(kt){if((kt.metaKey||kt.ctrlKey)&&kt.key==="z"){kt.preventDefault(),kt.stopPropagation(),(ft.current||[]).pop();var Rt=y().last(ft.current||[]);Rt&&et(Rt);return}if(!gt){if(!gt&&!y().isUndefined(Ke)&&kt.key==="Enter"){Et(!0);return}if(!(kt.key==="ArrowLeft"&&Ke%vt.length===0)&&!(kt.key==="ArrowRight"&&(Ke+1)%vt.length===0)){var jt=Ke+({ArrowUp:vt.length*-1,ArrowDown:vt.length*1,ArrowLeft:-1,ArrowRight:1}[kt.key]||0);jt<0||jt>vt.length*(Ze.length+1)-1||Ue(jt)}}}),L.createElement("div",null,L.createElement(G,null,L.createElement("div",{className:"Font13 Gray_75"},_l("\u5DF2\u9690\u85CF\u4E0D\u53EF\u5BFC\u5165\u5B57\u6BB5\u3002\u4F7F\u7528 %0 + V \u4ECE Excel \u4E2D\u7C98\u8D34\u6570\u636E\uFF0C%0 + Z \u6492\u9500\u4E0A\u6B21\u64CD\u4F5C",xt)),L.createElement("div",{className:"right"},_l("\u5206\u9694\u7B26"),L.createElement(H.Z,{className:"splitCharDorpDown",border:!0,value:St,data:[{text:"Tab",value:1},{text:_l("\u5206\u53F7(:)"),value:2},{text:_l("\u7AD6\u7EBF(|)"),value:3},{text:_l("\u9017\u53F7(,)"),value:4},{text:_l("\u7A7A\u683C"),value:5}],onChange:Qe}),L.createElement(Z.Z,{text:_l("\u5207\u6362\u5206\u9694\u7B26\uFF0C\u4EC5\u9488\u5BF9\u65B0\u7C98\u8D34\u6570\u636E\u6709\u6548\uFF0C\u5DF2\u6709\u6570\u636E\u4E0D\u4F1A\u4EA7\u751F\u5F71\u54CD\u201D")},L.createElement("i",{className:"infoIcon icon icon-info_outline Font18 Gray_bd"})))),L.createElement("div",{style:{height:pt-210}},L.createElement(Q,{rowCount:Ze.length+1,activeIndex:Ke,controls:vt,renderCellContent:function(Rt){var jt=Rt.index,fn=Rt.rowIndex,Mt=Rt.columnIndex;return jt===Ke&&gt?L.createElement(ae,{className:"editingCellInput",defaultValue:y().get(Ze,fn+"."+Mt)||"",onBlur:function(on){var en=on.target.value;setTimeout(function(){Et(!1),wt(jt,en)},80)},onKeyDown:function(on){on.stopPropagation(),on.key==="Tab"&&on.preventDefault(),on.key==="Enter"?(on.preventDefault(),wt(jt,on.target.value.trim()),Et(!1)):on.key==="Escape"&&(on.preventDefault(),Et(!1))}}):L.createElement("div",{title:y().get(Ze,fn+"."+Mt),className:"ellipsis"},y().get(Ze,fn+"."+Mt))},onCellClick:function(Rt){Rt===Ke?Et(!0):(Et(!1),Ue(Rt))}})),L.createElement("div",{className:"footer"},L.createElement(d.ZP,{type:"primary",disabled:y().isEmpty(ut),onClick:function(){y().isEmpty(ut)||At(ut)}},_l("\u4E0B\u4E00\u6B65"))))}ne.propTypes={dialogHeight:c.number,importDataActiveType:c.number,controls:(0,c.arrayOf)((0,c.shape)({})),onParsePaste:c.func};function de(Ge){var pt=this,ot=Ge.projectId,vt=Ge.dialogHeight,At=Ge.importDataActiveType,yt=Ge.worksheetId,st=Ge.controls,St=Ge.onParseExcel,Qe=Ge.onParsePaste,Xe=Ge.setImportDataActiveType;return L.createElement(L.Fragment,null,L.createElement(l,null,L.createElement("span",{className:"title"},_l("\u5BFC\u5165\u6570\u636E")),L.createElement("div",{className:"tabs"},u.map(function($e,Ke){return L.createElement("span",{key:Ke,className:$e.value===At?"tab active":"tab",onClick:function(){return Xe($e.value)}},$e.name)}))),L.createElement(T,null,At===0&&L.createElement(L.Fragment,null,L.createElement(i.Z,{style:{height:"100%"},fileUploaded:function(){var $e=(0,o.Z)(r().mark(function Ke(Ue){var He,ze;return r().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return He=Ue.serverName+Ue.key,Et.next=3,(0,f.C8)(md.global.Config.WorksheetDownUrl+"/Import/PreviewSubtable",{worksheetId:yt,tokenType:7},{worksheetId:yt,filePath:He.replace(/\?.+/,"")});case 3:ze=Et.sent,y().get(ze,"data.data.rows")?St(ze.data.data,He):alert(_l("\u6587\u4EF6\u89E3\u6790\u5931\u8D25\uFF01"),2);case 5:case"end":return Et.stop()}},Ke,pt)}));return function(Ke){return $e.apply(this,arguments)}}()})),At===1&&L.createElement(ne,{controls:st,dialogHeight:vt,onParsePaste:Qe,importDataActiveType:At})))}de.propTypes={worksheetId:c.string,dialogHeight:c.number,importDataActiveType:c.number,controls:(0,c.arrayOf)((0,c.shape)({})),onParseExcel:c.func,onParsePaste:c.func,setImportDataActiveType:c.func};var Ce=t(66946),he=t(54208),fe=t(88106),Ee=t(63239),Y=t.n(Ee),oe=t(30381),ve=t.n(oe),ue=t(86674),pe=t(36612),Se=function(){var Ge=(0,o.Z)(r().mark(function pt(ot){var vt=ot.projectId,At=ot.worksheetId,yt=ot.controlId,st=ot.mapConfig,St=st===void 0?[]:st,Qe=ot.controls,Xe=Qe===void 0?[]:Qe,$e=ot.data,Ke=$e===void 0?[]:$e,Ue,He,ze,gt,Et;return r().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(Ue=[],He=[],Ke.forEach(function(nt,Ze){var et={};S()(St).forEach(function(ut){if(St[ut]){var xt=y().find(Xe,{controlId:St[ut]});if(xt)if(y().includes(J,xt.type)){var wt="",kt="";switch(xt.type){case ue.DN.DROP_DOWN:case ue.DN.FLAT_MENU:wt=ye(nt[ut],xt.options),wt&&wt!=="[]"&&(kt=wt);break;case ue.DN.MULTI_SELECT:wt=ye(nt[ut],xt.options,!0),wt&&wt!=="[]"&&(kt=wt);break;case ue.DN.MONEY:case ue.DN.NUMBER:wt=parseFloat((nt[ut]||"").replace(/,/g,"")),y().isNaN(wt)||(kt=wt);break;case ue.DN.DATE:case ue.DN.DATE_TIME:kt=me(nt[ut],xt)||kt;break;case ue.DN.TIME:/^\w\w:\w\w(:\w\w)?$/.test(nt[ut])&&(kt=nt[ut]);break;case ue.DN.EMAIL:case ue.DN.CRED:case ue.DN.MOBILE_PHONE:case ue.DN.TELEPHONE:(0,pe.U_)({item:(0,s.default)({},xt,{value:nt[ut]})}).errorType||(kt=nt[ut]);break;case ue.DN.SWITCH:kt=y().includes(["\u2713","\u5F00\u542F","\u662F"],(nt[ut]||"").trim())?"1":"0";break;default:kt=nt[ut]}et[xt.controlId]=kt}else He.push(xt.controlId)}}),Ue[Ze]=et}),ze={},!He.length){qe.next=11;break}if(gt=Ke.map(function(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Ze=arguments[1];return{rowIndex:Ze,cells:S()(St).map(function(et){if(St[et]){var ut=y().find(Xe,{controlId:St[et]});if(ut&&y().includes(He,ut.controlId)&&!y().isUndefined(nt[et]))return ze[St[et]+"-"+Ze]=nt[et],{controlId:St[et],value:nt[et]}}}).filter(y().identity)}}).filter(function(nt){return nt&&nt.cells&&!y().isEmpty(nt.cells)}),!gt.length){qe.next=11;break}return qe.next=9,(0,f.XQ)(md.global.Config.WorksheetDownUrl+"/Import/HandlerPreview",{worksheetId:At,tokenType:7},{projectId:vt,worksheetId:At,controlId:yt,rows:gt});case 9:Et=qe.sent,y().isArray(y().get(Et,"data.data"))&&Et.data.data.forEach(function(nt){var Ze=Number(nt.rowIndex);nt.cells.forEach(function(et){var ut=y().find(Xe,{controlId:et.controlId});if(ut)switch(ut.type){case ue.DN.AREA_PROVINCE:case ue.DN.AREA_CITY:case ue.DN.AREA_COUNTY:et.value&&ze[ut.controlId+"-"+nt.rowIndex]&&(Ue[Ze][ut.controlId]=Y()({code:et.value,name:ze[ut.controlId+"-"+nt.rowIndex]}));break;case ue.DN.USER_PICKER:et.value&&et.value!=="[]"&&(Ue[Ze][ut.controlId]=Y()(safeParse(et.value,"array").map(function(xt){return{accountId:xt.id,fullname:xt.name,avatar:xt.avatarUrl}})));break;case ue.DN.DEPARTMENT:et.value&&et.value!=="[]"&&(Ue[Ze][ut.controlId]=Y()(safeParse(et.value,"array").map(function(xt){return{departmentId:xt.id,departmentName:xt.name}})));break;case ue.DN.ORG_ROLE:et.value&&et.value!=="[]"&&(Ue[Ze][ut.controlId]=Y()(safeParse(et.value,"array").map(function(xt){return{organizeId:xt.id,organizeName:xt.name}})));break;case ue.DN.RELATE_SHEET:et.value&&et.value!=="[]"&&(Ue[Ze][ut.controlId]=Y()(safeParse(et.value,"array").map(function(xt){return{sid:xt.id,name:xt.name,sourcevalue:Y()({rowid:xt.id,name:xt.name})}})));break;default:break}})});case 11:return qe.abrupt("return",Ue);case 12:case"end":return qe.stop()}},pt,this)}));return function(ot){return Ge.apply(this,arguments)}}();function ye(){var Ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",pt=arguments[1],ot=arguments[2];if(!Ge.trim())return"";ot&&(Ge=Ge.split(","));for(var vt=[],At=pt.filter(function(St){return!St.isDeleted}),yt=0;yt<At.length;yt++){var st=At[yt];(ot?y().includes(Ge,st.value):st.value===Ge)&&vt.push(st.key)}return Y()(vt)}var J=[ue.DN.TEXT,ue.DN.NUMBER,ue.DN.MONEY,ue.DN.EMAIL,ue.DN.DATE,ue.DN.DATE_TIME,ue.DN.TIME,ue.DN.MOBILE_PHONE,ue.DN.TELEPHONE,ue.DN.SWITCH,ue.DN.SCORE,ue.DN.RICH_TEXT,ue.DN.CRED,ue.DN.DROP_DOWN,ue.DN.FLAT_MENU,ue.DN.MULTI_SELECT];function me(Ge,pt){var ot=void 0;if(/^\d{4}\d{1,2}\d{1,2}/.test(Ge)&&(ot="YYYY\u5E74M\u6708D\u65E5 HH:mm:ss"),new Date(ve()(Ge,ot).valueOf()).toString()!=="Invalid Date")return ve()(Ge,ot).format()}const be=Se;var xe=(0,p.Z)([`
  height: 52px;
  display: flex;
  align-items: center;
  padding: 0 24px;
  position: relative;
  .title {
    font-weight: 500;
    font-size: 17px;
    color: #333;
  }
`],[`
  height: 52px;
  display: flex;
  align-items: center;
  padding: 0 24px;
  position: relative;
  .title {
    font-weight: 500;
    font-size: 17px;
    color: #333;
  }
`]),Ae=(0,p.Z)([`
  flex: 1;
  padding: 0 24px 0;
  .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    .headNumber {
      width: 180px;
      margin-left: 8px;
    }
    .sheetsDropDown {
      width: 180px;
    }
  }
  .uploadExcel {
    height: 100%;
    > div {
      height: 100%;
    }
  }
`],[`
  flex: 1;
  padding: 0 24px 0;
  .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    .headNumber {
      width: 180px;
      margin-left: 8px;
    }
    .sheetsDropDown {
      width: 180px;
    }
  }
  .uploadExcel {
    height: 100%;
    > div {
      height: 100%;
    }
  }
`]),Ne=(0,p.Z)([`
  padding: 0 24px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
`],[`
  padding: 0 24px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
`]),Me=(0,p.Z)([`
  display: block;
  font-size: 13px;
  color: #333;
  line-height: 20px;
`],[`
  display: block;
  font-size: 13px;
  color: #333;
  line-height: 20px;
`]),Fe=(0,p.Z)([`
  position: absolute;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.8);
  z-index: 20;
  display: flex;
  justify-content: center;
  align-items: center;
`],[`
  position: absolute;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.8);
  z-index: 20;
  display: flex;
  justify-content: center;
  align-items: center;
`]),Be=te.ZP.div(xe),we=te.ZP.div(Ae),Ie=te.ZP.div(Ne),ge=te.ZP.div(Me),Re=te.ZP.div(Fe);function Pe(Ge){var pt=this,ot=Ge.maxCount,vt=ot===void 0?1e3:ot,At=Ge.dialogHeight,yt=Ge.dataFrom,st=Ge.dataCount,St=Ge.projectId,Qe=Ge.worksheetId,Xe=Ge.controlId,$e=Ge.excelUrl,Ke=Ge.sheets,Ue=Ke===void 0?[]:Ke,He=Ge.controls,ze=Ge.setStep,gt=Ge.onClose,Et=Ge.onAddRows,ft=(0,L.useState)(!1),qe=(0,g.Z)(ft,2),nt=qe[0],Ze=qe[1],et=(0,L.useState)(!1),ut=(0,g.Z)(et,2),xt=ut[0],wt=ut[1],kt=(0,L.useState)(Ge.cellsData||[]),Rt=(0,g.Z)(kt,2),jt=Rt[0],fn=Rt[1],Mt=(0,L.useState)(1),sn=(0,g.Z)(Mt,2),on=sn[0],en=sn[1],$t=(0,L.useState)(0),an=(0,g.Z)($t,2),tn=an[0],mt=an[1],Lt=(yt==="excel"?jt.slice(on):jt).slice(0,vt-st),zt=Lt.filter(function(Ct){return!y().isEmpty(Ct.filter(y().identity))}),Zt=y().get(Lt,"0.length"),Nt=(0,L.useState)([].concat((0,U.Z)(new Array(He.length))).map(function(Ct,dt){return(0,fe.default)({},dt,y().get(He,dt+".controlId"))}).reduce(function(Ct,dt){return n()({},Ct,dt)})),ct=(0,g.Z)(Nt,2),De=ct[0],_e=ct[1],Le=yt==="excel"||Ue.length>1,rt=Le?At-177:At-127;return L.createElement(L.Fragment,null,xt&&L.createElement(Re,null,L.createElement(he.Z,{size:"big"})),L.createElement(Be,null,L.createElement("span",{className:"title"},_l("\u8BBE\u7F6E\u5BFC\u5165\u6570\u636E")),L.createElement("span",{className:"Font13 Gray_9e mLeft8"},_l("\u68C0\u67E5\u5373\u5C06\u5BFC\u5165\u7684\u6570\u636E\uFF0C\u4F60\u53EF\u4EE5\u8C03\u6574\u5BFC\u5165\u6570\u636E\u5BF9\u5E94\u7684\u5B57\u6BB5"))),L.createElement(we,null,Le&&L.createElement("div",{className:"header mBottom18"},yt==="excel"&&L.createElement("div",{className:"setHead"},_l("\u8868\u5934\u884C"),L.createElement(H.Z,{className:"headNumber",border:!0,value:on,data:new Array(jt.length<10?jt.length:10).fill().map(function(Ct,dt){return{text:dt===0?_l("\u6CA1\u6709\u8868\u5934\u884C"):_l("\u7B2C%0\u884C",dt),value:dt}}),onChange:en}),L.createElement("span",{"data-tip":_l("\u53EA\u6709\u8868\u5934\u4E0B\u65B9\u7684\u6570\u636E\u624D\u4F1A\u88AB\u5BFC\u5165"),className:"mLeft8"},L.createElement("i",{className:"icon-info_outline Font18 Gray_bd"}))),Ue.length>1&&L.createElement(H.Z,{className:"sheetsDropDown",border:!0,value:tn,data:Ue,onChange:function(){var Ct=(0,o.Z)(r().mark(function dt(It){var bt;return r().wrap(function(Xt){for(;;)switch(Xt.prev=Xt.next){case 0:return Ze(!0),Xt.next=3,(0,f.C8)(md.global.Config.WorksheetDownUrl+"/Import/PreviewSubtable",{worksheetId:Qe,tokenType:7},{worksheetId:Qe,filePath:$e.replace(/\?.+/,""),getSheetIndex:It});case 3:bt=Xt.sent,y().get(bt,"data.data.rows")?fn(bt.data.data.rows.map(function(pn){return pn.cells})):fn([]),mt(It),Ze(!1);case 7:case"end":return Xt.stop()}},dt,pt)}));return function(dt){return Ct.apply(this,arguments)}}()})),L.createElement("div",{style:{height:rt}},L.createElement(Q,{showNumber:!0,loading:nt,rowStartIndex:yt==="excel"&&!y().isEmpty(zt)?on:void 0,mode:"mapToControls",height:rt,rowCount:Lt.length,data:Lt,controls:He,mapConfig:De,columnCount:yt==="excel"&&Zt,renderCellContent:function(dt){var It=dt.rowIndex,bt=dt.columnIndex;return L.createElement(ge,{className:"ellipsis"},y().get(Lt,It+"."+bt))},onUpdateMapConfig:function(dt,It){var bt=(0,s.default)({},De);S()(bt).forEach(function(Ut){It&&bt[Ut]===It&&(bt[Ut]=void 0)}),_e((0,s.default)({},bt,(0,fe.default)({},dt,It)))}}))),L.createElement(Ie,null,L.createElement("div",{className:"importInfo",dangerouslySetInnerHTML:{__html:_l("\u5BFC\u5165 %0 \u884C\u6570\u636E\uFF0C %1/\u5171 %2 \u5217",Lt.length,'<span style="color:#f1a04a">'+y().values(De).filter(y().identity).length+"</span>",He.length)}}),L.createElement("div",{className:"operate"},L.createElement(Ce.Z,{className:"customSubtotalMessage Gray_bd",type:2,href:"https://help.mingdao.com",text:_l("\u5E2E\u52A9")}),L.createElement(d.ZP,{className:"mRight10",type:"link",onClick:function(){ze("upload")}},_l("\u53D6\u6D88")),L.createElement(d.ZP,{type:"primary",disabled:y().isEmpty(zt)||y().isEmpty(y().values(De).filter(y().identity)),onClick:(0,o.Z)(r().mark(function Ct(){var dt;return r().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return wt(!0),bt.next=3,be({projectId:St,worksheetId:Qe,controlId:Xe,mapConfig:De,controls:He,data:Lt});case 3:dt=bt.sent,wt(!1),Et(dt),gt();case 7:case"end":return bt.stop()}},Ct,pt)}))},_l("\u5BFC\u5165")))))}Pe.propTypes={dialogHeight:c.number,maxCount:c.number,dataFrom:c.number,dataCount:c.number,projectId:c.string,worksheetId:c.string,controlId:c.string,excelUrl:c.string,sheets:(0,c.arrayOf)((0,c.shape)({})),controls:(0,c.arrayOf)((0,c.shape)({})),setStep:c.func,onClose:c.func,onAddRows:c.func};var ke=t(15742),We=(0,p.Z)([`
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
`],[`
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
`]),Ve=te.ZP.div(We);function it(Ge){var pt=Ge.maxCount,ot=pt===void 0?1e3:pt,vt=Ge.dataCount,At=Ge.projectId,yt=Ge.worksheetId,st=Ge.controlId,St=Ge.onClose,Qe=Ge.onAddRows,Xe=Ge.controls.filter(function(on){return y().includes(ke.ML,on.type)}),$e=(0,L.useState)([]),Ke=(0,g.Z)($e,2),Ue=Ke[0],He=Ke[1],ze=(0,L.useState)([]),gt=(0,g.Z)(ze,2),Et=gt[0],ft=gt[1],qe=(0,L.useState)(),nt=(0,g.Z)(qe,2),Ze=nt[0],et=nt[1],ut=(0,L.useState)(0),xt=(0,g.Z)(ut,2),wt=xt[0],kt=xt[1],Rt=(0,L.useState)("upload"),jt=(0,g.Z)(Rt,2),fn=jt[0],Mt=jt[1],sn=window.innerHeight-32>600?600:window.innerHeight-32;return L.createElement(ce.Z,{visible:!0,verticalAlign:"bottom",width:1e3,closeSize:50,onCancel:St,bodyStyle:{padding:0,position:"relative",height:sn,flex:"none"}},L.createElement(Ve,null,fn==="upload"&&L.createElement(de,{dialogHeight:sn,importDataActiveType:wt,setImportDataActiveType:kt,worksheetId:yt,controls:Xe,onParseExcel:function(en,$t){ft(en.rows.map(function(an){return an.cells})),He(en.sheets.map(function(an){return{value:an.index,text:an.name}})),$t&&et($t),Mt("preview")},onParsePaste:function(en){ft(en),Mt("preview")}}),fn==="preview"&&L.createElement(Pe,{dialogHeight:sn,maxCount:ot,dataFrom:wt===0?"excel":"paste",dataCount:vt,projectId:At,controlId:st,worksheetId:yt,excelUrl:Ze,sheets:Ue,cellsData:Et,controls:Xe,setStep:Mt,onClose:St,onAddRows:Qe})))}it.propTypes={dataCount:c.number,maxCount:c.number,projectId:c.string,worksheetId:c.string,controlId:c.string,onClose:c.func,onAddRows:c.func}},51040:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>z});var ce=t(3540),g=t(31546),p=t(85315),L=t(85105),te=t.n(L),R=t(99663),y=t(22600),a=t(49135),r=t(93196),o=t(86735),d=t(67294),Z=t(45697),H=t.n(Z),U=t(71893),f=t(29314),V=t(93967),C=t.n(V),O=t(96486),n=t.n(O),s,j,A=(0,o.Z)([`
  font-size: 14px;
  color: #888;
  cursor: default;
`],[`
  font-size: 14px;
  color: #888;
  cursor: default;
`]),S=(0,o.Z)([`
  padding: 0 15px;
  line-height: 28px;
`],[`
  padding: 0 15px;
  line-height: 28px;
`]),I=(0,o.Z)([`
  padding: 6px 8px;
  margin: 0 8px;
  border-radius: 3px;
  cursor: pointer;
  &:hover {
    background: #f0f0f0;
  }
`],[`
  padding: 6px 8px;
  margin: 0 8px;
  border-radius: 3px;
  cursor: pointer;
  &:hover {
    background: #f0f0f0;
  }
`]),c=(0,o.Z)([`
  display: inline-block;
  cursor: pointer;
  font-size: 18px;
  color: #9e9e9e;
  width: 25px;
  text-align: center;
  &.disabled {
    color: #ddd;
  }
`],[`
  display: inline-block;
  cursor: pointer;
  font-size: 18px;
  color: #9e9e9e;
  width: 25px;
  text-align: center;
  &.disabled {
    color: #ddd;
  }
`]),q=(0,o.Z)([`
  border-radius: 3px;
  box-shadow: 0px 4px 16px rgba(0, 0, 0, 0.24);
  background: #fff;
  padding: 6px 0 10px;
`],[`
  border-radius: 3px;
  box-shadow: 0px 4px 16px rgba(0, 0, 0, 0.24);
  background: #fff;
  padding: 6px 0 10px;
`]),b=(0,o.Z)([`
  .pageIndex {
    padding: 0 14px;
    line-height: 28px;
    height: 28px;
    color: #333;
    &.dot {
      line-height: 20px;
    }
    &:not(.current, .dot) {
      cursor: pointer;
      &:hover {
        background: #f0f0f0;
      }
    }
  }
`],[`
  .pageIndex {
    padding: 0 14px;
    line-height: 28px;
    height: 28px;
    color: #333;
    &.dot {
      line-height: 20px;
    }
    &:not(.current, .dot) {
      cursor: pointer;
      &:hover {
        background: #f0f0f0;
      }
    }
  }
`]),k=(0,o.Z)([`
  margin-top: 12px;
  padding: 0 14px;
  .Dropdown--input {
    height: 28px !important;
  }
`],[`
  margin-top: 12px;
  padding: 0 14px;
  .Dropdown--input {
    height: 28px !important;
  }
`]),ee=(0,o.Z)([`
  margin: 12px 0 6px;
  padding: 0 14px;
  .Input {
    margin: 0 10px;
    width: 57px;
    height: 28px !important;
  }
`],[`
  margin: 12px 0 6px;
  padding: 0 14px;
  .Input {
    margin: 0 10px;
    width: 57px;
    height: 28px !important;
  }
`]),re=U.ZP.div(A),ie=U.ZP.div(S),le=U.ZP.span(I),E=U.ZP.span(c),w=U.ZP.div(q),K=U.ZP.div(b),N=U.ZP.div(k),F=U.ZP.div(ee),h=[{text:20,value:20},{text:25,value:25},{text:30,value:30},{text:50,value:50},{text:100,value:100}],z=(j=s=function(X){(0,r.default)(B,X);function B(x){(0,R.default)(this,B);var Q=(0,a.default)(this,(B.__proto__||te()(B)).call(this,x));return Q.conRef=d.createRef(),Q.jumpInputRef=d.createRef(),Q.state={popupVisible:!1},Q}return(0,y.default)(B,[{key:"renderPopup",value:function(){var Q=this,i=this.props,m=i.abnormalMode,v=i.pageIndex,W=i.pageSize,P=i.allowChangePageSize,u=i.changePageIndex,l=i.changePageSize,T=v-2,G=void 0;return T+5>=this.pageNum-1&&!m&&(T=this.pageNum-1-5,G=!0),T<=3&&!m&&(T=2,G=!0),T<2&&(T=2),d.createElement(w,{className:"flexColumn"},d.createElement(K,null,d.createElement("div",{key:"begin",className:C()("pageIndex",{"current ThemeColor3":v===1}),onClick:function(){return v!==1&&u(1)}},1),T>2&&d.createElement("div",{key:"dotbegin",className:"pageIndex dot"},"..."),[].concat((0,p.Z)(new Array(m?7:G?6:5))).map(function(D,M){return T+M}).filter(function(D){return D<Q.pageNum||m}).map(function(D,M){return d.createElement("div",{key:M,className:C()("pageIndex",{"current ThemeColor3":v===D}),onClick:function(){return v!==D&&u(D)}},D)}),(T+5<this.pageNum-1||m)&&d.createElement("div",{key:"dotend",className:"pageIndex dot"},"..."),this.pageNum>1&&d.createElement("div",{key:"end",className:C()("pageIndex",{"current ThemeColor3":v===this.pageNum}),onClick:function(){return v!==Q.pageNum&&u(Q.pageNum)}},this.pageNum)),P&&d.createElement(N,null,d.createElement(g.Z,{width:90,style:{marginRight:10,height:28},isAppendToBody:!0,border:!0,value:W,renderTitle:function(M){return _l("%0\u884C",M.text)},data:h,onChange:l}),_l("/\u9875")),d.createElement(F,null,_l("\u8DF3\u81F3"),d.createElement(ce.Z,{manualRef:this.jumpInputRef,valueFilter:function(M){return M.replace(/[^0-9]/g,"")},defaultValue:v,onKeyDown:function(M){if(M.keyCode===13&&Q.jumpInputRef.current&&Q.jumpInputRef.current.value){var se=parseInt(Q.jumpInputRef.current.value,10);n().isNaN(se)||(se>0&&se<=Q.pageNum||m?u(se):alert(_l("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u9875\u6570"),3))}}}),_l("\u9875")))}},{key:"render",value:function(){var Q=this,i=this.props,m=i.disabled,v=i.abnormalMode,W=i.className,P=W===void 0?"":W,u=i.pageIndex,l=i.maxCount,T=i.allCount,G=i.countForShow,D=i.onPrev,M=i.onNext,se=this.state.popupVisible;return l?d.createElement(re,{className:P},d.createElement(ie,null,_l("\u5171%0\u884C",T>l?l:T))):!T&&!v?d.createElement(re,{className:P},d.createElement(ie,null,_l("\u51710\u884C"))):d.createElement(re,{className:P,ref:this.conRef},d.createElement(f.Z,{action:["click"],popupVisible:!m&&se,onPopupVisibleChange:function(ne){return Q.setState({popupVisible:ne})},destroyPopupOnHide:!0,popupAlign:{points:["tl","bl"]},popup:this.renderPopup(),getPopupContainer:function(){return Q.conRef.current||document.body}},d.createElement(le,null,v?_l("\u7B2C%0\u9875",u):_l("\u5171%0\u884C\uFF0C%1/%2\u9875",typeof G<"u"?G:T,u,this.pageNum))),d.createElement(E,{className:u===1&&"disabled",onClick:u===1?function(){}:D},d.createElement("i",{className:"icon icon-arrow-left-border"})),d.createElement(E,{className:u===this.pageNum&&"disabled",onClick:u===this.pageNum?function(){}:M},d.createElement("i",{className:"icon icon-arrow-right-border"})))}},{key:"pageNum",get:function(){return Math.ceil(this.props.allCount/this.props.pageSize)}}]),B}(d.Component),s.propTypes={disabled:H().bool,abnormalMode:H().bool,className:H().string,allowChangePageSize:H().bool,pageIndex:H().number,pageSize:H().number,allCount:H().number,countForShow:H().number,onPrev:H().func,onNext:H().func,changePageIndex:H().func,changePageSize:H().func},s.defaultProps={abnormalMode:!1,allowChangePageSize:!0,pageIndex:0,pageSize:0,allCount:0,onPrev:function(){},onNext:function(){},changePageIndex:function(){},changePageSize:function(){}},j)},31846:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>ye});var ce=t(69288),g=t(88239),p=t(33867),L=t(52945),te=t.n(L),R=t(94942),y=t.n(R),a=t(36803),r=t(12424),o=t(16469),d=t(62521),Z=t(86735),H=t(67294),U=t(45697),f=t.n(U),V=t(29314),C=t(71893),O=t(45231),n=t(10358),s=t(5631),j=t(15742),A=t(12496),S=t(4923),I=t(63239),c=t.n(I),q=t(85105),b=t.n(q),k=t(99663),ee=t(22600),re=t(49135),ie=t(93196),le=t(93967),E=t.n(le),w=t(75599),K=t(35408),N=t(13476),F=t(15577),h=t(77863),z=t(31742),X=t(76345),B=t(71129),x=t(96486),Q=t.n(x),i,m,v=(0,Z.Z)([`
  &.active,
  &.hover {
    background-color: #1e88e5 !important;
    .Item-content,
    .Icon {
      color: #fff !important;
    }
  }
  &.printItem.Item {
    .Item-content {
      padding-left: 32px;
    }
  }
`],[`
  &.active,
  &.hover {
    background-color: #1e88e5 !important;
    .Item-content,
    .Icon {
      color: #fff !important;
    }
  }
  &.printItem.Item {
    .Item-content {
      padding-left: 32px;
    }
  }
`]),W=(0,Z.Z)([`
  color: #999;
  font-size: 12px;
  margin: 12px 16px 4px;
`],[`
  color: #999;
  font-size: 12px;
  margin: 12px 16px 4px;
`]),P=(0,C.ZP)(o.Z)(v),u=C.ZP.div(W),l=(m=i=function(J){(0,ie.default)(me,J);function me(be){(0,k.default)(this,me);var xe=(0,re.default)(this,(me.__proto__||b()(me)).call(this,be));return xe.state={showPrintGroup:!1,tempList:[]},xe}return(0,ee.default)(me,[{key:"componentDidMount",value:function(){var xe=this,Ae=this.props,Ne=Ae.viewId,Me=Ae.worksheetId,Fe=Ae.recordId;Me&&O.Z.getPrintList({worksheetId:Me,viewId:Ne,rowIds:[Fe]}).then(function(Be){var we=Ne?Be:Be.filter(function(ge){return ge.range===1}),Ie=Q().values(B.bU);xe.setState({tempList:we.filter(function(ge){return!ge.disabled}).sort(function(ge,Re){return B.fC[Q().findKey(B.bU,function(Pe){return Pe===ge.type})]-B.fC[Q().findKey(B.bU,function(Pe){return Pe===Re.type})]}),tempListLoaded:!0})})}},{key:"menuPrint",value:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}var xe=this.props,Ae=xe.viewId,Ne=xe.recordId,Me=xe.appId,Fe=xe.worksheetId,Be=xe.projectId,we=xe.workId,Ie=xe.instanceId;this.setState({showPrintGroup:!1},function(){var ge={printId:"",isDefault:!0,worksheetId:Fe,projectId:Be,rowId:Ne,getType:1,viewId:Ae,appId:Me,workId:we,id:Ie},Re=Math.random().toString(36).substring(2);w.Z.add({key:""+Re,value:c()(ge)}),window.open((window.subPath||"")+"/printForm/"+Me+"/"+(we?"flow":"worksheet")+"/new/print/"+Re)})}},{key:"render",value:function(){var xe=this,Ae=this.props,Ne=Ae.viewId,Me=Ae.recordId,Fe=Ae.appId,Be=Ae.worksheetId,we=Ae.controls,Ie=Ae.projectId,ge=Ae.sheetSwitchPermit,Re=Ae.onItemClick,Pe=Re===void 0?function(){}:Re,ke=this.state,We=ke.tempList,Ve=ke.showPrintGroup,it=we.filter(function(pt){return pt.attribute===1}),Ge=(0,F.XH)(Ie,h.UU.wordPrintTemplate);return We.length<=0?(0,z.v)(X.RX.recordPrintSwitch,ge,Ne)?H.createElement(P,{className:E()("printItem",{hover:Ve}),icon:H.createElement(p.Z,{icon:"print",className:"Font17 mLeft5"}),onClick:function(){Pe(),xe.menuPrint()}},H.createElement("span",{className:"mLeft15"},_l("\u6253\u5370%02002"))):"":H.createElement(V.Z,{popupVisible:Ve,onPopupVisibleChange:function(ot){xe.setState({showPrintGroup:ot})},popupClassName:"DropdownPrintTrigger",action:["hover"],mouseEnterDelay:.1,popupAlign:{points:["tl","tr"],offset:[1,-5],overflow:{adjustX:1,adjustY:2}},popup:H.createElement("div",{className:""},We.length>0&&H.createElement("div",{className:E()("tempList",{noDefaultPrint:!(0,z.v)(X.RX.recordPrintSwitch,ge,Ne)})},We.map(function(pt){var ot=[2,5].includes(pt.type);return H.createElement(P,{className:"",icon:ot?H.createElement("span",{className:B.YC[pt.type].fileIcon+" fileIcon"}):H.createElement(p.Z,{icon:(0,N.Uc)(pt).icon,className:"Font18"}),onClick:(0,a.Z)(y().mark(function vt(){var At,yt,st,St,Qe;return y().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:if(Pe(),!window.isPublicApp){$e.next=4;break}return alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3),$e.abrupt("return");case 4:if(!Q().includes([3,4],pt.type)){$e.next=11;break}return $e.next=7,O.Z.getRowDetail({appId:Fe,viewId:Ne,worksheetId:Be,rowId:Me,getTemplate:!0});case 7:At=$e.sent,(0,K.$w)({templateId:pt.id,appId:Fe,worksheetId:Be,viewId:Ne,projectId:Ie,selectedRows:[safeParse(At.rowData)],controls:At.templateControls,zIndex:9999}),$e.next=20;break;case 11:if(!(pt.type!==0&&Ge==="2")){$e.next=14;break}return(0,F.j0)(Ie,h.UU.wordPrintTemplate),$e.abrupt("return");case 14:yt=pt.id,st=pt.type===0,St={printId:yt,isDefault:st,worksheetId:Be,projectId:Ie,rowId:Me,getType:1,viewId:Ne,appId:Fe,name:pt.name,attriData:it[0],fileTypeNum:pt.type,allowDownloadPermission:pt.allowDownloadPermission},Qe=Math.random().toString(36).substring(2),w.Z.add({key:""+Qe,value:c()(St)}),window.open((window.subPath||"")+"/printForm/"+Fe+"/worksheet/preview/print/"+Qe);case 20:case"end":return $e.stop()}},vt,xe)}))},H.createElement("div",{title:pt.name,className:"ellipsis templateName"},pt.name),Q().includes([3,4],pt.type)&&H.createElement("span",{className:"detail"},(0,N.Uc)(pt).text))})),(0,z.v)(X.RX.recordPrintSwitch,ge,Ne)&&H.createElement(H.Fragment,null,H.createElement(u,null,_l("\u7CFB\u7EDF\u9ED8\u8BA4\u6253\u5370")),H.createElement(P,{className:E()({defaultPrint:We.length>0}),onClick:function(){Pe(),xe.menuPrint()}},_l("\u6253\u5370\u8BB0\u5F55"))))},H.createElement(P,{className:E()("printItem",{hover:Ve}),icon:H.createElement(p.Z,{icon:"print",className:"Font17 mLeft5"})},H.createElement("span",{className:"mLeft15"},We.filter(function(pt){return pt.type!==0}).length>0?_l("\u6253\u5370/\u5BFC\u51FA"):_l("\u6253\u5370%02002")),H.createElement(p.Z,{icon:"arrow-right-tip",style:{left:"auto",right:15},className:"Font14 mLeft5"})))}}]),me}(H.Component),i.propTypes={viewId:f().string,recordId:f().string,appId:f().string,worksheetId:f().string,workId:f().string,instanceId:f().string,controls:f().arrayOf(f().shape({})),projectId:f().string,sheetSwitchPermit:f().arrayOf(f().shape({})),onItemClick:f().func},m),T=t(89499),G=(0,Z.Z)([`
  display: flex;
  justify-content: center;
  align-items: center;
  height: 36px;
  .icon {
    font-size: 20px;
    color: #9e9e9e;
    height: 20px;
    animation: rotate 0.6s infinite linear;
  }
`],[`
  display: flex;
  justify-content: center;
  align-items: center;
  height: 36px;
  .icon {
    font-size: 20px;
    color: #9e9e9e;
    height: 20px;
    animation: rotate 0.6s infinite linear;
  }
`]),D=(0,Z.Z)([`
  border-top: 1px solid #ebebeb;
  margin: 6px 0;
`],[`
  border-top: 1px solid #ebebeb;
  margin: 6px 0;
`]),M=(0,Z.Z)([`
  position: relative !important;
  overflow: auto;
  padding: 6px 0 !important;
  width: 240px !important;
`],[`
  position: relative !important;
  overflow: auto;
  padding: 6px 0 !important;
  width: 240px !important;
`]),se=(0,Z.Z)([`
  .Item-content {
    padding-left: 47px !important;
  }
`],[`
  .Item-content {
    padding-left: 47px !important;
  }
`]),ae=(0,Z.Z)([`
  .Item-content {
    color: #f44336 !important;
    .Icon {
      color: #f44336 !important;
    }
  }
  &:not(.disabled):hover {
    .Icon {
      color: #fff !important;
    }
  }
`],[`
  .Item-content {
    color: #f44336 !important;
    .Icon {
      color: #f44336 !important;
    }
  }
  &:not(.disabled):hover {
    .Icon {
      color: #fff !important;
    }
  }
`]),ne=(0,Z.Z)([`
  font-size: 12px;
  color: #bdbdbd;
  padding: 9px;
  text-align: center;
`],[`
  font-size: 12px;
  color: #bdbdbd;
  padding: 9px;
  text-align: center;
`]),de=(0,Z.Z)([`
  cursor: pointer;
  text-align: center;
  border-radius: 3px;
  line-height: 24px;
  display: inline-block;
  width: 24px;
  height: 24px;
  color: #9e9e9e;
  font-size: 18px;
  &:hover {
    background-color: rgba(0, 0, 0, 0.03);
    color: #2196f3;
  }
`],[`
  cursor: pointer;
  text-align: center;
  border-radius: 3px;
  line-height: 24px;
  display: inline-block;
  width: 24px;
  height: 24px;
  color: #9e9e9e;
  font-size: 18px;
  &:hover {
    background-color: rgba(0, 0, 0, 0.03);
    color: #2196f3;
  }
`]),Ce=(0,Z.Z)([`
  font-weight: bold;
  color: #f44336;
`],[`
  font-weight: bold;
  color: #f44336;
`]),he=C.ZP.div(G),fe=C.ZP.div(D),Ee=(0,C.ZP)(d.Z)(M),Y=(0,C.ZP)(o.Z)(se),oe=(0,C.ZP)(Y)(ae),ve=C.ZP.div(ne),ue=C.ZP.span(de),pe=C.ZP.div(Ce),Se=H.memo(function(){for(var J=arguments.length,me=Array(J),be=0;be<J;be++)me[be]=arguments[be];return H.createElement(ye,me)},function(J,me){return console.log(J,me),!0});function ye(J){var me=this,be=function(){var Fn=(0,a.Z)(y().mark(function $n(){var ba;return y().wrap(function(La){for(;;)switch(La.prev=La.next){case 0:return La.prev=0,bt([]),tt(!0),La.next=5,O.Z.getWorksheetBtns({appId:yt,worksheetId:St,viewId:st,rowId:Qe});case 5:ba=La.sent,tt(!1),bt((0,T.QE)(yt,ba).filter(function(ga){return!ga.disabled})),La.next=13;break;case 10:La.prev=10,La.t0=La.catch(0),alert(_l("\u52A0\u8F7D\u81EA\u5B9A\u4E49\u6309\u94AE\u5931\u8D25"),3);case 13:case"end":return La.stop()}},$n,this,[[0,10]])}));return function(){return Fn.apply(this,arguments)}}(),xe=J.isSubList,Ae=J.action,Ne=Ae===void 0?["click"]:Ae,Me=J.isRelateRecordTable,Fe=J.allowAdd,Be=J.allowRecreate,we=J.popupAlign,Ie=J.shows,ge=Ie===void 0?[]:Ie,Re=J.showHr,Pe=Re===void 0?!0:Re,ke=J.maxHeight,We=J.children,Ve=J.preMenuItems,it=Ve===void 0?[]:Ve,Ge=J.popupContainer,pt=J.from,ot=J.relateRecordControlId,vt=J.isCharge,At=J.projectId,yt=J.appId,st=J.viewId,St=J.worksheetId,Qe=J.recordId,Xe=J.workId,$e=J.instanceId,Ke=J.allowDelete,Ue=J.allowCopy,He=J.formdata,ze=J.disableCustomButtons,gt=J.defaultCustomButtons,Et=J.sheetSwitchPermit,ft=Et===void 0?[]:Et,qe=J.reloadRecord,nt=qe===void 0?function(){}:qe,Ze=J.onDelete,et=J.onDeleteSuccess,ut=et===void 0?function(){}:et,xt=J.onCopy,wt=J.onCopySuccess,kt=wt===void 0?function(){}:wt,Rt=J.onUpdate,jt=Rt===void 0?function(){}:Rt,fn=J.onRemoveRelation,Mt=fn===void 0?function(){}:fn,sn=J.onPopupVisibleChange,on=sn===void 0?function(){}:sn,en=J.hideRecordInfo,$t=en===void 0?function(){}:en,an=J.onRecreate,tn=an===void 0?function(){}:an,mt=J.hideFav,Lt=Q().includes(ge,"share")&&!md.global.Account.isPortal,zt=Q().includes(ge,"copy")&&Ue&&((0,z.v)(X.RX.recordCopySwitch,ft,st)||xe),Zt=Q().includes(ge,"recreate")&&Be&&((0,z.v)(X.RX.recordRecreateSwitch,ft,st)||xe),Nt=Q().includes(ge,"print"),ct=Q().includes(ge,"task")&&!md.global.Account.isPortal,De=Q().includes(ge,"removeRelation"),_e=Q().includes(ge,"editform")&&vt,Le=Q().includes(ge,"openinnew"),rt=(0,H.useRef)(),Ct=(0,H.useState)([]),dt=(0,r.Z)(Ct,2),It=dt[0],bt=dt[1],Ut=(0,H.useState)(),Xt=(0,r.Z)(Ut,2),pn=Xt[0],tt=Xt[1],ht=(0,H.useState)(!1),Dt=(0,r.Z)(ht,2),Ot=Dt[0],Ht=Dt[1],Kt=(0,H.useState)(!1),dn=(0,r.Z)(Kt,2),Cn=dn[0],Rn=dn[1],gn=Me?Y:oe,wn=Q().isEmpty((0,F.vo)(At)),On=!mt&&!window.shareState.shareId&&!window.isPublicApp&&!md.global.Account.isPortal&&!wn&&Q().includes(ge,"fav");function An(Fn){rt.current||Ht(Fn)}var Yn=function(){n.Z.checkFavoriteByRowId({rowId:Qe,worksheetId:St,viewId:st}).then(function($n){Rn($n)})};(0,H.useEffect)(function(){Ot&&!gt&&!ze&&be(),Ot&&On&&Yn()},[Ot]);var kn=function(){Cn?n.Z.removeFavorite({projectId:At,rowId:Qe,worksheetId:St,viewId:st}).then(function($n){$n&&(alert(_l("\u5DF2\u53D6\u6D88\u6536\u85CF")),Rn(!1))}):n.Z.addFavorite({worksheetId:St,rowId:Qe,viewId:st}).then(function($n){$n&&(alert(_l("\u6536\u85CF\u6210\u529F")),Rn(!0))})};return H.createElement(V.Z,{action:Ne,popupClassName:"relateRecordDropdownPopup filterTrigger",getPopupContainer:Ge||function(){return document.body},popupVisible:Ot,onPopupVisibleChange:function($n){on($n),$n&&An($n)},popupAlign:te()({},{points:["tr","br"],offset:[0,0],overflow:{adjustX:!0,adjustY:!0}},we),zIndex:1e3,destroyPopupOnHide:!0,popup:H.createElement(Ee,{style:{maxHeight:(ke||508)+"px"},onClickAwayExceptions:[".customButtonConfirm",".verifyPasswordConfirm",".DropdownPrintTrigger","#t_mask",".templateListSelect"],onClickAway:function(){return An(!1)}},De&&H.createElement(H.Fragment,null,H.createElement(Y,{icon:H.createElement(p.Z,{icon:"close",className:"Font18 mLeft5"}),onClick:function(){Mt(),An(!1)}},_l("\u53D6\u6D88\u5173\u8054")),H.createElement(fe,null)),!!it.length&&it.map(function(Fn,$n){return Fn==="hr"?H.createElement(fe,{key:$n}):H.createElement(Y,{className:"printItem",key:$n,icon:H.createElement(p.Z,{icon:Fn.icon,className:"Font17 mLeft5"}),onClick:function(){Q().isFunction(Fn.fn)&&(An(!1),Fn.fn())}},Fn.text)}),!pn&&!It.length&&!De&&!Lt&&!zt&&!(Nt&&(0,z.v)(X.RX.recordPrintSwitch,ft,st))&&!ct&&!Le&&!Ke&&!_e&&H.createElement(ve,null,_l("\u65E0\u53EF\u7528\u7684\u64CD\u4F5C")),pn&&(!gt||!!gt.length)&&H.createElement(he,null,H.createElement("i",{className:"icon icon-loading_button"})),!!(gt||It).length&&H.createElement(H.Fragment,null,H.createElement(S.Z,(0,g.default)({type:"menu"},{projectId:At,appId:yt,viewId:st,worksheetId:St,recordId:Qe,isCharge:vt},{buttons:gt||It,loadBtns:be,triggerCallback:function(){return An(!1)},onUpdate:jt,reloadRecord:nt,setCustomButtonActive:function($n){return rt.current=$n}})),H.createElement(fe,null)),On&&H.createElement(Y,{className:"printItem",icon:H.createElement(p.Z,{className:"Font17 mLeft5",icon:Cn?"star":"star_outline",style:{color:Cn?"#ffc402":"#9e9e9e"}}),onClick:function(){kn()}},Cn?_l("\u53D6\u6D88\u6536\u85CF"):_l("\u6536\u85CF\u8BB0\u5F55")),Lt&&H.createElement(Y,{className:"printItem",icon:H.createElement(p.Z,{icon:"share",className:"Font17 mLeft5"}),onClick:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}(0,A.Bf)({isCharge:vt,appId:yt,worksheetId:St,viewId:st,recordId:Qe,hidePublicShare:!((0,z.v)(X.RX.recordShareSwitch,ft,st)&&!md.global.Account.isPortal)}),An(!1)}},_l("\u5206\u4EAB%02004")),zt&&H.createElement(Y,{className:"printItem",icon:H.createElement(p.Z,{icon:"copy",className:"Font17 mLeft5"}),onClick:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}An(!1),Q().isFunction(xt)?xt():ce.Z.confirm({title:_l("\u60A8\u786E\u8BA4\u590D\u5236\u8FD9\u6761\u8BB0\u5F55\u5417\uFF1F"),onOk:function(){(0,s.GO)({worksheetId:St,viewId:st,rowIds:[Qe],relateRecordControlId:ot},function(ba){kt(ba[0],Qe)})}})}},_l("\u590D\u5236%02003")),Zt&&H.createElement(Y,{className:"printItem",icon:H.createElement(p.Z,{icon:"copy_all",className:"Font17 mLeft5"}),onClick:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}An(!1),tn()}},_l("\u91CD\u65B0\u521B\u5EFA")),Nt&&H.createElement(l,(0,g.default)({isCharge:vt,controls:He||[]},{appId:yt||J.printAppId,viewId:st,worksheetId:St,projectId:At,workId:Xe,instanceId:$e},{sheetSwitchPermit:ft,recordId:Qe,onItemClick:function(){return Ht(!1)}})),ct&&!md.global.SysSettings.forbidSuites.includes("2")&&H.createElement(Y,{className:"createTaskItem",icon:H.createElement(p.Z,{icon:"task-worksheet",className:"Font17 mLeft5"}),onClick:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}(0,A.n5)({appId:yt,worksheetId:St,viewId:st,recordId:Qe}),An(!1)}},_l("\u521B\u5EFA\u4E3A\u4EFB\u52A1")),!window.isPublicApp&&Le&&H.createElement(Y,{icon:H.createElement(p.Z,{icon:"launch",className:"Font17 mLeft5"}),onClick:function(){(0,A.tE)({appId:yt,worksheetId:St,viewId:st,recordId:Qe}),An(!1)}},_l("\u65B0\u9875\u9762\u6253\u5F00%02001")),Ke&&pt!==j.GP.WORKFLOW&&H.createElement(gn,{className:"deleteItem",icon:H.createElement(p.Z,{icon:"task-new-delete",className:"Font17 mLeft5"}),onClick:(0,a.Z)(y().mark(function Fn(){var $n=function(){var ba=(0,a.Z)(y().mark(function ua(){return y().wrap(function(ga){for(;;)switch(ga.prev=ga.next){case 0:if(!Q().isFunction(Ze)){ga.next=4;break}Ze(),ga.next=15;break;case 4:return ga.prev=4,ga.next=7,(0,A.JS)({worksheetId:St,recordId:Qe,deleteType:pt});case 7:alert(_l("\u5220\u9664\u6210\u529F")),ut({appId:yt,worksheetId:St,viewId:st,recordId:Qe}),ga.next=15;break;case 11:ga.prev=11,ga.t0=ga.catch(4),console.log(ga.t0),alert(_l("\u5220\u9664\u5931\u8D25"),2);case 15:case"end":return ga.stop()}},ua,this,[[4,11]])}));return function(){return ba.apply(this,arguments)}}();return y().wrap(function(ua){for(;;)switch(ua.prev=ua.next){case 0:if(!window.isPublicApp){ua.next=3;break}return alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3),ua.abrupt("return");case 3:if(An(!1),!xe){ua.next=7;break}return $n(),ua.abrupt("return");case 7:De?ce.Z.confirm({onlyClose:!0,title:H.createElement(pe,null,_l("\u6CE8\u610F\uFF1A\u6B64\u64CD\u4F5C\u5C06\u5220\u9664\u539F\u59CB\u8BB0\u5F55")),description:_l("\u5982\u679C\u53EA\u9700\u8981\u53D6\u6D88\u4E0E\u5F53\u524D\u8BB0\u5F55\u7684\u5173\u8054\u5173\u7CFB\uFF0C\u4ECD\u4FDD\u7559\u539F\u59CB\u8BB0\u5F55\u3002\u53EF\u4EE5\u9009\u62E9\u4EC5\u53D6\u6D88\u5173\u8054\u5173\u7CFB"),buttonType:"danger",cancelType:"ghostgray",okText:_l("\u5220\u9664\u8BB0\u5F55"),cancelText:_l("\u4EC5\u53D6\u6D88\u5173\u8054\u5173\u7CFB"),onOk:$n,onCancel:function(){return Mt({confirm:!1})}}):ce.Z.confirm({title:_l("\u662F\u5426\u5220\u9664\u6B64\u6761\u8BB0\u5F55"),buttonType:"danger",onOk:$n});case 8:case"end":return ua.stop()}},Fn,me)}))},_l("\u5220\u9664%02000")),Pe&&_e&&H.createElement(fe,null),!window.isPublicApp&&_e&&H.createElement(Y,{className:"openCustomWidget",icon:H.createElement(p.Z,{icon:"settings",className:"Font17 mLeft5"}),onClick:function(){$t(),(0,A.WB)(St)}},_l("\u7F16\u8F91\u8868\u5355")))},We?H.cloneElement(We,Ot?{style:{display:"inline-block"}}:{}):H.createElement(ue,{className:"moreOperate",style:Ot?{display:"inline-block"}:{}},H.createElement("i",{className:"icon icon-task-point-more"})))}ye.propTypes={popupAlign:f().shape({}),isRelateRecordTable:f().bool,allowAdd:f().bool,showHr:f().bool,shows:f().arrayOf(f().string),maxHeight:f().number,children:f().element,preMenuItems:f().arrayOf(f().shape({})),popupContainer:f().element,from:f().number,allowDelete:f().bool,isCharge:f().bool,projectId:f().string,appId:f().string,viewId:f().string,worksheetId:f().string,recordId:f().string,workId:f().string,instanceId:f().string,formdata:f().arrayOf(f().shape({})),sheetSwitchPermit:f().arrayOf(f().shape({})),onDelete:f().func,onDeleteSuccess:f().func,onCopy:f().func,onCopySuccess:f().func,onUpdate:f().func,onRemoveRelation:f().func,reloadRecord:f().func,onPopupVisibleChange:f().func}},8765:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>K});var ce=t(88239),g=t(12424),p=t(86735),L=t(67294),te=t(45697),R=t.n(te),y=t(71893),a=t(96486),r=t.n(a),o=t(27738),d=t(42541),Z=t(70518),H=t(15577),U=t(24607),f=t(52945),V=t.n(f),C=t(98153),O=t(89499),n=(0,p.Z)([""],[""]),s=(0,p.Z)([`
  display: inline-block;
  width: 22px;
  height: 6px;
  background: #eaeaea;
  border-radius: 3px;
`],[`
  display: inline-block;
  width: 22px;
  height: 6px;
  background: #eaeaea;
  border-radius: 3px;
`]),j=(0,p.Z)([`
  display: inline-block;
`],[`
  display: inline-block;
`]),A=(0,p.Z)([`
  display: flex;
  flex-direction: row;
  font-size: 12px;
  line-height: 28px;
  .label {
    max-width: 160px;
    color: #9e9e9e;
    padding-right: 1em;
  }
  .content {
    flex: 1;
    height: 28px;
    overflow: hidden;
    white-space: nowrap;
    .cellOptions,
    .cellDepartments,
    .cellUsers,
    .RelateRecordDropdown {
      overflow: hidden;
      width: 100%;
    }
    *:not(.icon) {
      font-size: 12px !important;
    }
  }
`],[`
  display: flex;
  flex-direction: row;
  font-size: 12px;
  line-height: 28px;
  .label {
    max-width: 160px;
    color: #9e9e9e;
    padding-right: 1em;
  }
  .content {
    flex: 1;
    height: 28px;
    overflow: hidden;
    white-space: nowrap;
    .cellOptions,
    .cellDepartments,
    .cellUsers,
    .RelateRecordDropdown {
      overflow: hidden;
      width: 100%;
    }
    *:not(.icon) {
      font-size: 12px !important;
    }
  }
`]),S=y.ZP.div(n),I=y.ZP.span(s),c=y.ZP.div(j),q=y.ZP.div(A);function b(N){var F=N.width,h=N.controls,z=N.data,X=N.parentControl,B=N.projectId,x=N.worksheetId,Q=N.viewId,i=N.isCharge,m=N.sheetSwitchPermit,v=1;F>950&&h.length>6?v=3:F>670&&h.length>3&&(v=2);var W=r().chunk(h,3).slice(0,v);return L.createElement(S,null,W.map(function(P,u){return L.createElement(c,{style:{width:r().round(100/v,2)+"%"},key:u},P.map(function(l,T){return L.createElement(q,{key:T},L.createElement("div",{className:"label ellipsis"},l.controlName),L.createElement("div",{className:"content control"+l.type},(0,O.hB)(z[l.controlId])?L.createElement(I,null):L.createElement(C.Z,{cell:V()({},l,{value:z[l.controlId]}),row:z,worksheetId:x,from:4,rowFormData:function(){return r().get(X,"formData")||[]},projectId:B,viewId:Q,isCharge:i,sheetSwitchPermit:m})))}))}))}var k=(0,p.Z)([`
  display: inline-flex;
  flex-direction: row;
  margin: `,`;
  position: relative;
  border-radius: 3px;
  background-color: #fff;
  box-shadow: rgba(0, 0, 0, 0.12) 0px 1px 4px 0px, rgba(0, 0, 0, 0.12) 0px 0px 2px 0px;
  &:hover {
    `,`
  }
  .operateButton {
    position: absolute;
    display: flex;
    top: -11px;
    right: -11px;
    visibility: hidden;
    z-index: 2;
  }
  &:hover .operateButton {
    visibility: visible;
  }
  &:last-child {
    margin-bottom: 0px;
  }
  .hoverShow {
    visibility: hidden;
  }
  &:hover {
    .hoverShow {
      visibility: visible;
    }
  }
`],[`
  display: inline-flex;
  flex-direction: row;
  margin: `,`;
  position: relative;
  border-radius: 3px;
  background-color: #fff;
  box-shadow: rgba(0, 0, 0, 0.12) 0px 1px 4px 0px, rgba(0, 0, 0, 0.12) 0px 0px 2px 0px;
  &:hover {
    `,`
  }
  .operateButton {
    position: absolute;
    display: flex;
    top: -11px;
    right: -11px;
    visibility: hidden;
    z-index: 2;
  }
  &:hover .operateButton {
    visibility: visible;
  }
  &:last-child {
    margin-bottom: 0px;
  }
  .hoverShow {
    visibility: hidden;
  }
  &:hover {
    .hoverShow {
      visibility: visible;
    }
  }
`]),ee=(0,p.Z)([`
  font-weight: 500;
  font-size: 14px;
  line-height: 20px;
  color: #333;
`],[`
  font-weight: 500;
  font-size: 14px;
  line-height: 20px;
  color: #333;
`]),re=(0,p.Z)([`
  flex: 1;
  padding: 12px 16px;
  overflow: hidden;
`],[`
  flex: 1;
  padding: 12px 16px;
  overflow: hidden;
`]),ie=y.ZP.div(k,function(N){var F=N.isMobile;return F?"0 0 10px 0":"0 14px 14px 0"},function(N){var F=N.canView,h=N.isMobile;return F&&!h?"box-shadow: rgba(0, 0, 0, 0.12) 0px 4px 12px 0px, rgba(0, 0, 0, 0.12) 0px 0px 2px 0px;":""}),le=y.ZP.div(ee),E=y.ZP.div(re);function w(N){return function(F){F.stopPropagation(),N()}}function K(N){var F=N.from,h=N.disabled,z=N.style,X=z===void 0?{}:z,B=N.width,x=N.controls,Q=N.data,i=N.cover,m=N.allowReplaceRecord,v=N.onClick,W=N.onDelete,P=N.projectId,u=N.viewId,l=N.allowlink,T=N.sourceEntityName,G=T===void 0?"":T,D=N.parentControl,M=N.isCharge,se=N.sheetSwitchPermit,ae=se===void 0?[]:se,ne=N.onReplaceRecord,de=ne===void 0?function(){}:ne,Ce=50+28*x.slice(0,3).length,he=(0,H.Q9)(),fe=(0,L.useState)(!1),Ee=(0,g.Z)(fe,2),Y=Ee[0],oe=Ee[1],ve=r().find(D.relationControls,{attribute:1}),ue=ve&&r().get(ve,"advancedSetting.datamask")==="1"&&r().get(ve,"advancedSetting.isdecrypt")==="1",pe=N.title||(Q.rowid&&(0,o.Z)(Q.rowid)?(0,U.Nx)(D,Q,{noMask:Y}):_l("\u5173\u8054\u5F53\u524D%0",G));return L.createElement(ie,{onClick:v,style:(0,ce.default)({},X,B?{width:B}:{}),className:!h&&l!=="0"&&"Hand",canView:l!=="0",isMobile:he},!h&&L.createElement("div",{className:"operateButton"},m&&L.createElement(d.xC,{className:"mRight8 tip-bottom",style:he?{visibility:"visible"}:{},onClick:w(de),"data-tip":_l("\u91CD\u65B0\u9009\u62E9")},L.createElement("i",{className:"icon icon-swap_horiz"})),L.createElement(d.xC,{className:"red",style:he?{visibility:"visible"}:{},onClick:w(W)},L.createElement("i",{className:"icon icon-close"}))),L.createElement(E,{style:(0,ce.default)({},x.length?{paddingBottom:10}:{})},L.createElement(le,{key:"title",className:"ellipsis",title:pe,style:{marginBottom:x.length?8:0}},pe,ue&&!Y&&L.createElement("i",{className:"icon icon-eye_off ThemeHoverColor3 Hand maskData Font16 Gray_9e mLeft4 mTop4 hoverShow",style:{verticalAlign:"middle"},onClick:function(ye){ye.stopPropagation(),oe(!0)}})),L.createElement(b,{parentControl:D,width:B,controls:x,data:Q,worksheetId:D.dataSource,projectId:P,viewId:u,isCharge:M,sheetSwitchPermit:ae})),i&&!!x.length&&L.createElement("img",{src:i,style:{width:Ce,height:Ce,boxSizing:"content-box",borderTopRightRadius:"3px",borderBottomRightRadius:"3px",borderLeft:"1px solid rgb(0, 0, 0, .04)",objectFit:"contain"},onClick:function(ye){ye.stopPropagation(),(0,Z.x)(i.replace(/imageView2.+/,""),{disableDownload:!0,ext:(i.match(/\.(jpg|jpeg|png|gif|bmp)(\?|$)/i)||"")[1]||"png"})}}))}K.propTypes={disabled:R().bool,title:R().string,width:R().string,controls:R().arrayOf(R().shape({})),data:R().shape({}),cover:R().string,onClick:R().func,onDelete:R().func}},35300:(lt,Te,t)=>{"use strict";t.d(Te,{fl:()=>J,ZP:()=>Fe,rD:()=>Me});var ce=t(8177),g=t.n(ce),p=t(12424),L=t(52945),te=t.n(L),R=t(88106),y=t(63239),a=t.n(y),r=t(88239),o=t(85315),d=t(85105),Z=t.n(d),H=t(99663),U=t(22600),f=t(49135),V=t(93196),C=t(33867),O=t(86735),n=t(67294),s=t(45697),j=t.n(s),A=t(93967),S=t.n(A),I=t(44894),c=t(71893),q=t(45231),b=t(40240),k=t(64530),ee=t(7891),re=t(99732),ie=t(86995),le=t(82011),E=t(92054),w=t(70039),K=t(12246),N=t(69945),F=t(24607),h=t(26358),z=t(8765),X=(0,O.Z)([`
  display: inline-block;
  margin: 5px 10px 5px 0;
  position: relative;
  background: #f0f0f0;
  border-radius: 5px;
  max-width: 97%;
  padding: 0 12px;
  box-sizing: border-box;
  height: 32px;
  line-height: 32px;
`],[`
  display: inline-block;
  margin: 5px 10px 5px 0;
  position: relative;
  background: #f0f0f0;
  border-radius: 5px;
  max-width: 97%;
  padding: 0 12px;
  box-sizing: border-box;
  height: 32px;
  line-height: 32px;
`]),B=(0,O.Z)([`
  position: absolute;
  top: -5px;
  right: -8px;
  font-size: 20px;
  color: #757575;
  line-height: 1em;
  overflow: hidden;
`],[`
  position: absolute;
  top: -5px;
  right: -8px;
  font-size: 20px;
  color: #757575;
  line-height: 1em;
  overflow: hidden;
`]),x=(0,O.Z)([`
  font-weight: 500;
  font-size: 14px;
  color: #333;
  width: 100%;
`],[`
  font-weight: 500;
  font-size: 14px;
  color: #333;
  width: 100%;
`]),Q=c.ZP.div(X),i=c.ZP.span(B),m=c.ZP.div(x);function v(Be){return function(we){we.stopPropagation(),Be()}}function W(Be){var we=Be.disabled,Ie=Be.title,ge=Be.onClick,Re=Be.onDelete;return n.createElement(Q,{onClick:ge},!we&&n.createElement(i,{onClick:v(Re)},n.createElement("i",{className:"icon icon-minus-square"})),n.createElement(m,{className:"ellipsis",title:Ie},Ie))}var P=t(25758),u=t(91877),l=t(6917),T=t(89499),G=t(15577),D=t(96486),M=t.n(D),se,ae,ne,de,Ce,he,fe=(0,O.Z)([`
  cursor: pointer;
  height: 36px;
  font-weight: bold;
  padding: 0 16px;
  display: flex;
  align-items: center;
  color: #333;
  border: 1px solid #dddddd;
  border-radius: 4px;
  > .icon {
    color: #9e9e9e;
    font-weight: normal;
  }
  &:hover {
    background: #f5f5f5;
  }
`],[`
  cursor: pointer;
  height: 36px;
  font-weight: bold;
  padding: 0 16px;
  display: flex;
  align-items: center;
  color: #333;
  border: 1px solid #dddddd;
  border-radius: 4px;
  > .icon {
    color: #9e9e9e;
    font-weight: normal;
  }
  &:hover {
    background: #f5f5f5;
  }
`]),Ee=(0,O.Z)([`
  display: inline-block;
  cursor: pointer;
  height: 29px;
  line-height: 29px;
  padding: 0 12px;
  color: #2196f3;
  border-radius: 3px;
  font-size: 13px;
  .loading {
    margin-right: 6px;
    .icon {
      display: inline-block;
      animation: rotate 1.2s linear infinite;
    }
  }
  &:hover {
    background: #f8f8f8;
  }
`],[`
  display: inline-block;
  cursor: pointer;
  height: 29px;
  line-height: 29px;
  padding: 0 12px;
  color: #2196f3;
  border-radius: 3px;
  font-size: 13px;
  .loading {
    margin-right: 6px;
    .icon {
      display: inline-block;
      animation: rotate 1.2s linear infinite;
    }
  }
  &:hover {
    background: #f8f8f8;
  }
`]),Y=(0,O.Z)([""],[""]),oe=(0,O.Z)([`
  &.lineWrap {
    color: #2196f3;
    width: 100%;
    .scanIcon {
      color: #2196f3 !important;
      margin-right: 5px;
    }
    .scanButton {
      width: 100%;
      margin-left: 0;
    }
  }
  .scanButton {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid #e0e0e0;
    margin-left: 10px;
    border-radius: 3px;
  }
`],[`
  &.lineWrap {
    color: #2196f3;
    width: 100%;
    .scanIcon {
      color: #2196f3 !important;
      margin-right: 5px;
    }
    .scanButton {
      width: 100%;
      margin-left: 0;
    }
  }
  .scanButton {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid #e0e0e0;
    margin-left: 10px;
    border-radius: 3px;
  }
`]),ve=(0,O.Z)([`
  position: absolute;
  cursor: pointer;
  right: 10px;
  font-size: 20px;
  color: #bdbdbd;
  &:hover {
    color: #757575;
  }
`],[`
  position: absolute;
  cursor: pointer;
  right: 10px;
  font-size: 20px;
  color: #bdbdbd;
  &:hover {
    color: #757575;
  }
`]),ue=(0,O.Z)([`
  background-color: #f8f8f8;
`],[`
  background-color: #f8f8f8;
`]);function pe(Be,we,Ie,ge,Re){var Pe={};return Object.keys(ge).forEach(function(ke){Pe[ke]=ge[ke]}),Pe.enumerable=!!Pe.enumerable,Pe.configurable=!!Pe.configurable,("value"in Pe||Pe.initializer)&&(Pe.writable=!0),Pe=Ie.slice().reverse().reduce(function(ke,We){return We(Be,we,ke)||ke},Pe),Re&&Pe.initializer!==void 0&&(Pe.value=Pe.initializer?Pe.initializer.call(Re):void 0,Pe.initializer=void 0),Pe.initializer===void 0&&(Object.defineProperty(Be,we,Pe),Pe=null),Pe}var Se=200,ye=c.ZP.div(fe),J=c.ZP.div(Ee),me=c.ZP.div(function(Be){var we=Be.isMobile,Ie=Be.autoHeight,ge=Be.isCard;return we?`
      `+(Ie?"height: auto !important;":"")+`
      `+(ge?"":"align-items: center;")+`
      padding: 0px !important;
    `:`
    `+(Ie?"height: auto !important;":"")+`
    padding: 0px !important;
  `}),be=c.ZP.div(Y),xe=(0,c.ZP)(ie.Z)(oe),Ae=(0,c.ZP)(C.Z)(ve),Ne=c.ZP.div(ue);function Me(Be){var we=Be.width,Ie=Be.isMobile,ge=Be.enumDefault,Re=Be.records,Pe=void 0,ke=1;if(we){var We=we-2;Ie?Pe="100%":ge===1||Re&&Re.length===1?Pe=We-14:We>=1200?(Pe=Math.floor(We/3)-14,ke=3):We>=800?(Pe=Math.floor(We/2)-14,ke=2):(Pe=We-14,ke=1)}else Pe="100%";return{cardWidth:Pe,colNum:ke}}var Fe=(0,b.Z)(se=(de=(he=Ce=function(Be){(0,V.default)(we,Be);function we(Ie){(0,H.default)(this,we);var ge=(0,f.default)(this,(we.__proto__||Z()(we)).call(this,Ie));ge.handleClick=function(pt){var ot=ge.props.control,vt=ge.state.records,At=ot.enumDefault2;if($(pt.target).closest(".relateRecordBtn").length){var yt=M().isUndefined(ge.state.count)?vt.length:ge.state.count;if(yt>=Se){alert(_l("\u6700\u591A\u5173\u8054%0\u6761",Se),3);return}At!==10&&At!==11?ge.handleSelectRecord(ge.handleAdd):ge.setState({showNewRecord:!0})}};var Re=ge.props.control,Pe=Re.relationControls,ke=Pe===void 0?[]:Pe,We=Re.showControls,Ve=We===void 0?[]:We,it=ge.hasRelateControl(ke,Ve),Ge=!0;try{(Ie.records||[]).length>=Ie.count&&(Ge=!1)}catch(pt){console.error(pt)}return ge.state={sheetTemplateLoading:it,controls:it?[]:(0,T.zj)(Ie.appId,(0,T.Xx)(ke)),previewRecord:null,showNewRecord:!1,mobileRecordkeyWords:"",count:Ie.count,records:Ie.records||[],deletedIds:Ie.deletedIds||[],addedIds:Ie.addedIds||[],showLoadMore:Ge,isLoadingMore:!1,pageIndex:1},ge}return(0,U.default)(we,[{key:"componentDidMount",value:function(){var ge=this.props,Re=ge.count,Pe=Re===void 0?0:Re,ke=ge.records,We=ke===void 0?[]:ke,Ve=ge.control,it=Ve===void 0?{}:Ve;if(this.state.sheetTemplateLoading&&this.loadControls(),M().get(this,"props.control.isSubList")){var Ge=We.length;Ge<Pe&&this.loadMoreRecords(1)}(M().get(window,"shareState.isPublicForm")&&M().includes(["2","5","6"],M().get(this,"props.control.advancedSetting.originShowType"))||(0,G.Q9)()&&M().includes(["2","5"],M().get(it,"advancedSetting.showtype"))&&M().includes([l.BD.H5_EDIT,l.BD.RECORDINFO],it.from)&&!M().get(this,"props.control.hasDefaultValue"))&&this.loadMoreRecords(1)}},{key:"componentWillReceiveProps",value:function(ge){var Re=this,Pe=ge.control,ke=Pe.relationControls,We=ke===void 0?[]:ke,Ve=Pe.showControls,it=Ve===void 0?[]:Ve,Ge=Pe.value,pt=Pe.from,ot=Pe.disabled,vt=ge.control||{};if(this.props.control.dataSource!==ge.control.dataSource){var At=this.hasRelateControl(We,it);if((0,G.Q9)()&&M().includes([l.BD.H5_EDIT,l.BD.H5_ADD,l.BD.RECORDINFO],pt)&&!ot){!Ge||M().isNumber(Ge)?this.setState({records:[],count:0,addedIds:[],deletedIds:[]},function(){Re.loadControls(ge),Re.loadMoreRecords(1,ge)}):(this.loadControls(ge),this.setState({records:ge.records,count:ge.records.length}));return}At&&this.setState({sheetTemplateLoading:!0})}else if((0,G.Q9)()&&M().includes([l.BD.H5_EDIT,l.BD.H5_ADD,l.BD.RECORDINFO],pt)&&!ot){!Ge||M().isNumber(Ge)?this.setState({records:[],count:0,addedIds:[],deletedIds:[]},function(){Re.loadControls(ge),Re.loadMoreRecords(1,ge)}):(this.loadControls(ge),this.setState({records:ge.records,count:ge.records.length}));return}ge.flag!==this.props.flag&&(M().get(window,"shareState.isPublicForm")&&M().includes(["2","5","6"],M().get(this,"props.control.advancedSetting.originShowType"))||(0,G.Q9)()&&M().includes(["2","5"],M().get(vt,"advancedSetting.showtype"))&&M().includes([l.BD.H5_EDIT,l.BD.RECORDINFO],vt.from)&&!M().get(this,"props.control.hasDefaultValue")?this.loadMoreRecords(1):this.setState({records:ge.records,count:ge.count,addedIds:[],deletedIds:[]})),M().isEqual(ge.records,this.props.records)||this.setState({records:ge.records,count:ge.count})}},{key:"getCoverUrl",value:function(ge,Re){var Pe=this.state.controls,ke=M().find(Pe,function(Ge){return Ge.controlId&&Ge.controlId===ge});if(ke)try{var We=M().find(JSON.parse(Re[ge]),function(Ge){return File.isPicture(Ge.ext)}),Ve=We.previewUrl,it=Ve===void 0?"":Ve;return it.indexOf("imageView2")>-1?it.replace(/imageView2\/\d\/w\/\d+\/h\/\d+(\/q\/\d+)?/,"imageView2/2/w/200"):it+"&imageView2/2/w/200"}catch(Ge){}}},{key:"hasRelateControl",value:function(ge,Re){return!!M().find(ge.filter(function(Pe){return M().find(Re,function(ke){return ke===Pe.controlId})}),function(Pe){return M().includes([29,30],Pe.type)})}},{key:"loadControls",value:function(ge){var Re=this,Pe=(ge||this.props).control,ke=Pe.dataSource,We=Pe.worksheetId;q.Z.getWorksheetInfo({worksheetId:ke,getTemplate:!0,relationWorksheetId:We}).then(function(Ve){Re.setState({controls:(0,T.zj)((ge||Re.props).appId,Ve.template.controls),sheetTemplateLoading:!1})})}},{key:"loadMoreRecords",value:function(){var ge=this,Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,Pe=arguments[1],ke=(Pe||this.props).control,We=ke.from,Ve=ke.controlId,it=ke.recordId,Ge=ke.worksheetId,pt=ke.advancedSetting;this.setState({isLoadingMore:!0}),q.Z.getRowRelationRows({worksheetId:Ge,rowId:it,controlId:Ve,pageIndex:Re,pageSize:50}).then(function(ot){ge.setState(function(vt){var At=M().uniqBy([].concat((0,o.Z)(vt.records),(0,o.Z)(ot.data)),"rowid"),yt={records:At,pageIndex:Re,isLoadingMore:!1,showLoadMore:At.length<ot.count&&ot.data.length>0};return(0,G.Q9)()&&M().includes(["2","5"],M().get(pt,"showtype"))&&M().includes([l.BD.H5_EDIT,l.BD.RECORDINFO],We)&&(yt.count=ot.count),yt})})}},{key:"handleChange",value:function(ge){var Re=this.props,Pe=Re.recordId,ke=Re.onChange,We=this.state,Ve=We.count,it=We.records,Ge=We.isLoadingMore,pt=We.showLoadMore,ot=We.pageIndex,vt=We.deletedIds,At=vt===void 0?[]:vt,yt=We.addedIds,st=yt===void 0?[]:yt;ke({deletedIds:At,addedIds:st,records:it,count:Ve,searchByChange:ge}),Pe&&!Ge&&pt&&it.length<20&&this.loadMoreRecords(ot+1)}},{key:"handleDelete",value:function(ge){var Re=this.state,Pe=Re.count,ke=Re.records,We=Re.addedIds,Ve=Re.deletedIds;this.setState({deletedIds:M().includes(We,ge.rowid)?Ve:M().uniq(Ve.concat(ge.rowid)),records:ke.filter(function(it){return it.rowid!==ge.rowid}),addedIds:We.filter(function(it){return it!==ge.rowid}),count:Pe-1},this.handleChange)}},{key:"deleteAllRecord",value:function(ge){var Re=this.state,Pe=Re.records,ke=Re.addedIds,We=Re.deletedIds,Ve=Pe.map(function(Ge){return Ge.rowid}),it={deletedIds:M().uniq(We.concat(Ve)),records:[],addedIds:ke.filter(function(Ge){return!M().includes(Ve,Ge.rowid)}),count:0};M().isFunction(ge)?ge(it):this.setState(it,this.handleChange)}},{key:"clearAndAdd",value:function(ge){var Re=this;this.deleteAllRecord(function(Pe){var ke=Pe.count,We=Pe.addedIds,Ve=We===void 0?[]:We;Re.setState((0,r.default)({},Pe,{records:ge,count:ke+ge.length,addedIds:Ve.concat(ge.map(function(it){return it.rowid}))}),function(){return Re.handleChange(!1)})})}},{key:"handleAdd",value:function(ge){var Re=this.props.multiple,Pe=this.state,ke=Pe.count,We=Pe.records,Ve=Pe.addedIds,it=Ve===void 0?[]:Ve;ge=ge.map(function(pt){return(0,r.default)({},pt,{isNewAdd:!0})}).slice(0,Se-ke);var Ge=Re?M().uniqBy(ge.concat(We),function(pt){return pt.rowid}):ge;this.setState({records:Ge,count:ke+ge.length,addedIds:it.concat(ge.map(function(pt){return pt.rowid}))},this.handleChange)}},{key:"handleReplaceRecord",value:function(ge){var Re=this,Pe=this.state,ke=Pe.addedIds,We=ke===void 0?[]:ke,Ve=Pe.deletedIds,it=Ve===void 0?[]:Ve;this.handleSelectRecord(function(Ge){Re.setState({records:Ge,deletedIds:M().uniq(it.concat(ge.rowid)),addedIds:We.concat(Ge.map(function(pt){return pt.rowid})).filter(function(pt){return pt!==ge.rowid})},Re.handleChange)})}},{key:"getDefaultRelateSheetValue",value:function(){try{var ge,Re=this.props.control,Pe=Re.formData,ke=Re.controlId,We=Re.recordId,Ve=Re.worksheetId,it=M().find(Pe,function(ot){return ot.attribute===1}),Ge={name:it.value,sid:We,type:8,sourcevalue:a()((0,r.default)({},M().assign.apply(M(),(0,o.Z)(Pe.map(function(ot){return(0,R.default)({},ot.controlId,ot.value)}))),(ge={},(0,R.default)(ge,it.controlId,it.value),(0,R.default)(ge,"rowid",We),ge)))};if(it.type===29)try{var pt=JSON.parse(it.value);Ge.name=pt[0].name}catch(ot){Ge.name=""}return{worksheetId:Ve,relateSheetControlId:ke,value:Ge}}catch(ot){return}}},{key:"handleSelectRecord",value:function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Pe=this.props,ke=Pe.control,We=Pe.showCoverAndControls,Ve=this.context||{},it=Ve.rows,Ge=ke.appId,pt=ke.viewId,ot=ke.worksheetId,vt=ke.recordId,At=ke.controlId,yt=ke.dataSource,st=ke.enumDefault,St=ke.showControls,Qe=St===void 0?[]:St,Xe=ke.coverCid,$e=ke.formData,Ke=ke.isCharge,Ue=this.state,He=Ue.records,ze=Ue.deletedIds,gt=this.disabledManualWrite,Et=this.isCard,ft=(0,r.default)({control:ke,recordId:vt,ignoreRowIds:ze,allowNewRecord:this.allowNewRecord,disabledManualWrite:gt,multiple:st===2,coverCid:Xe,filterRowIds:He.map(function(qe){return qe.rowid}).concat(ke.dataSource===ot?vt:[]).concat(ke.isSubList&&(ke.unique||ke.uniqueInRecord)?(it||[]).map(function(qe){return M().get(safeParse(qe[ke.controlId],"array"),"0.sid")}).filter(M().identity):[]),showControls:Qe,appId:Ge,viewId:pt,isCharge:Ke,masterRecordRowId:vt,relateSheetId:yt,parentWorksheetId:ot,filterRelatesheetControlIds:[At],defaultRelatedSheet:this.getDefaultRelateSheetValue(),controlId:At,onOk:ge,formData:$e},(0,G.Q9)()&&!Et&&!We?{showControls:[],control:(0,r.default)({},ke,{showControls:[]})}:{});((0,G.Q9)()?re.K:ee.selectRecord)(te()(ft,Re))}},{key:"renderRecordsCon",value:function(){var ge=this,Re=this.props,Pe=Re.width,ke=Re.control,We=Re.allowOpenRecord,Ve=ke.viewId,it=ke.from,Ge=ke.recordId,pt=ke.projectId,ot=ke.dataSource,vt=ke.disabled,At=ke.enumDefault,yt=ke.coverCid,st=ke.openRelateSheet,St=ke.sourceEntityName,Qe=ke.advancedSetting,Xe=ke.isCharge,$e=ke.sheetSwitchPermit,Ke=this.allowReplaceRecord,Ue=this.isCard,He=this.state,ze=He.records,gt=He.showAll,Et=He.showLoadMore,ft=He.isLoadingMore,qe=He.pageIndex,nt=(Qe||{}).allowlink,Ze=(0,F.kM)(ke,it),et=(ke.advancedSetting.allowcancel!=="0"||At===1)&&Ze.editable,ut=(0,G.Q9)(),xt=Me({width:Pe,isMobile:ut,enumDefault:At,records:ze}),wt=xt.cardWidth,kt=xt.colNum;return Ue?n.createElement("div",{className:S()("recordsCon mBottom6",{"pLeft10 pRight10":ut&&M().includes([l.BD.H5_EDIT,l.BD.RECORDINFO],it)&&Qe.showtype==="2"})},!!ze.length&&(gt||M().includes([l.BD.H5_ADD,l.BD.H5_EDIT],it)||ut&&it===l.BD.RECORDINFO||ze.length<=kt*3?ze:ze.slice(0,kt*3)).map(function(Rt,jt){return n.createElement(z.Z,{from:it,projectId:pt,viewId:Ve,allowReplaceRecord:Ke,disabled:vt||!et&&!Rt.isNewAdd,width:wt,isCharge:Xe,key:jt,controls:ge.controls,sheetSwitchPermit:$e,data:Rt,cover:ge.getCoverUrl(yt,Rt),allowlink:nt,parentControl:ke,sourceEntityName:St,onClick:!We||ke.isSubList&&M().get(window,"shareState.shareId")||nt==="0"?function(){}:function(){(0,G.Ye)("worksheetRecord",ot,{rowId:Rt.rowid}),ge.setState({previewRecord:{recordId:Rt.rowid}})},onDelete:function(){return ge.handleDelete(Rt)},onReplaceRecord:function(){return ge.handleReplaceRecord(Rt)}})}),ze.length>kt*3&&(ut?!M().includes([l.BD.H5_ADD,l.BD.H5_EDIT,l.BD.RECORDINFO],it):!0)&&n.createElement("div",null,Ge&&Et&&gt&&n.createElement(J,{onClick:function(){ft||ge.loadMoreRecords(qe+1)}},ft&&n.createElement("span",{className:"loading"},n.createElement("i",{className:"icon icon-loading_button"})),_l("\u52A0\u8F7D\u66F4\u591A")),n.createElement(J,{className:"ThemeColor3 Hand mBottom10 InlineBlock",onClick:function(){return ge.setState({showAll:!gt})}},gt?_l("\u6536\u8D77"):_l("\u5C55\u5F00\u66F4\u591A")))):n.createElement("div",{className:"recordsCon"},ze.map(function(Rt,jt){return n.createElement(W,{key:jt,disabled:vt||!et,title:Rt.rowid?(0,F.Nx)(ke,Rt):_l("\u5173\u8054\u5F53\u524D%0",St),onClick:!We||vt&&!Ge?function(){}:function(){it===l.BD.SHARE||it===l.BD.WORKFLOW?st("",Rt.wsid,Rt.rowid,Ve):ut?vt&&ge.setState({previewRecord:{recordId:Rt.rowid}}):ge.setState({previewRecord:{recordId:Rt.rowid}})},onDelete:function(){return ge.handleDelete(Rt)}})}))}},{key:"render",value:function(){var ge=this,Re=this.props,Pe=Re.control,ke=Re.editable,We=Re.allowOpenRecord,Ve=Re.showCoverAndControls,it=Pe.appId,Ge=Pe.viewId,pt=Pe.worksheetId,ot=Pe.projectId,vt=Pe.from,At=Pe.recordId,yt=Pe.controlId,st=Pe.controlName,St=Pe.dataSource,Qe=Pe.disabled,Xe=Pe.enumDefault,$e=Pe.enumDefault2,Ke=Pe.strDefault,Ue=Pe.showControls,He=Ue===void 0?[]:Ue,ze=Pe.coverCid,gt=Pe.formData,Et=Pe.sourceEntityName,ft=Pe.sheetSwitchPermit,qe=Pe.advancedSetting,nt=qe===void 0?{}:qe,Ze=Pe.isCharge,et=Pe.hint,ut=Pe.openRelateSheet,xt=Pe.showRelateRecordEmpty,wt=this.state,kt=wt.records,Rt=wt.previewRecord,jt=wt.showNewRecord,fn=wt.sheetTemplateLoading,Mt=this.onlyRelateByScanCode,sn=this.disabledManualWrite,on=this.addRelationButtonVisible,en=this.isCard,$t=this.allowNewRecord,an=(0,G.Q9)(),tn=(0,u.g)(),mt=Xe===2;if(fn)return null;var Lt=(0,h.zK)({control:Pe,formData:gt}),zt=an?N.Z:K.default,Zt=Pe.advancedSetting.allowcancel!=="0"||Xe===1,Nt=nt.searchcontrol,ct=function(){if(sn)return _l("\u626B\u7801\u6DFB\u52A0%0",Et);if(an&&et)return et;if(Nt){var _e=M().find(Pe.relationControls,{controlId:Nt})||{};return _l("\u641C\u7D22%0",_e.controlName||Et)}else return _l("\u9009\u62E9%0",Et)};return xt&&!on&&M().isEmpty(kt)?n.createElement(Ne,{className:"withoutRowsWrapper flexColumn valignWrapper h100"},n.createElement(P.uy,{text:_l("\u6682\u65E0\u8BB0\u5F55")})):n.createElement(n.Fragment,null,n.createElement(be,{className:S()("flexRow valignWrapper mBottom10",{"pLeft20 pRight20 mobileCreateRelateBtn":an&&M().includes([l.BD.H5_EDIT,l.BD.RECORDINFO,l.BD.DRAFT],vt)&&nt.showtype==="2"}),isMobile:an},n.createElement(me,{className:S()("customFormControlBox flexRow relateRecordBtn",{formBoxNoBorder:en},{controlDisabled:Qe||on&&!en&&!kt.length&&sn}),isMobile:an,autoHeight:!!kt.length,isCard:en,onClick:function(_e){return!Qe&&!en&&!sn&&ge.handleClick(_e)}},n.createElement("div",{className:"flex",style:{minWidth:0}},on&&n.createElement(n.Fragment,null,en?n.createElement(ye,{className:"relateRecordBtn",onClick:this.handleClick},n.createElement("i",{className:"icon icon-plus mRight5 Font16"}),Et||""):kt.length?null:n.createElement("span",{className:"Gray_bd"},ct())),sn&&!tn&&n.createElement("div",{className:"Gray_9e mBottom5 mTop5 pTop3 pBottom3"},_l("\u8BF7\u5728\u79FB\u52A8\u7AEF\u626B\u7801\u6DFB\u52A0\u5173\u8054")),!en&&this.renderRecordsCon(),vt!==l.BD.PUBLIC_ADD&&!!Rt&&(an?n.createElement(w.RecordInfoModal,{className:"full",visible:!0,appId:it,worksheetId:St,viewId:Ge,rowId:Rt&&Rt.recordId,onClose:function(){ge.setState({previewRecord:void 0}),M().isFunction(Pe.refreshRecord)&&Pe.refreshRecord()}}):n.createElement(le.Z,{visible:!0,allowAdd:$t,appId:it,viewId:nt.openview||Pe.viewId,from:1,hideRecordInfo:function(){ge.setState({previewRecord:void 0}),M().isFunction(Pe.refreshRecord)&&Pe.refreshRecord()},projectId:ot,recordId:Rt&&Rt.recordId,worksheetId:St,relationWorksheetId:pt,currentSheetRows:kt,showPrevNext:!0})),jt&&n.createElement(zt,{showFillNext:!0,directAdd:!0,className:"worksheetRelateNewRecord",appId:it,worksheetId:St,addType:2,entityName:Et,filterRelateSheetIds:[St],filterRelatesheetControlIds:[yt],visible:jt,masterRecordRowId:At,hideNewRecord:function(){ge.setState({showNewRecord:!1})},defaultRelatedSheet:this.getDefaultRelateSheetValue(),onAdd:function(_e){ge.handleAdd([(0,r.default)({},_e,{isNewAdd:!0})])}})),!Qe&&!en&&!Mt&&n.createElement(C.Z,{icon:"arrow-right-border",className:"Font16 Gray_bd",style:{marginRight:-5}})),(!kt.length||mt)&&vt!==l.BD.SHARE&&$e!==11&&Mt&&tn&&!Qe&&n.createElement(xe,{className:S()({lineWrap:!on}),projectId:ot,worksheetId:St,filterControls:Lt,parentWorksheetId:pt,control:Pe,onChange:function(_e){ge.handleAdd([_e])},onOpenRecordCardListDialog:function(_e){ge.handleSelectRecord(ge.handleAdd,{keyWords:_e,isScan:!0})}},n.createElement("div",{className:"scanButton"},n.createElement("i",{className:"scanIcon icon icon-qr_code_19 Font20 Gray_75"}),!on&&_l("\u626B\u7801\u5173\u8054%0",Et||""))),!Qe&&mt&&en&&At&&!an&&n.createElement(Ae,{icon:"search",onClick:function(){(0,E.P)({from:vt,title:st,worksheetId:pt,controlId:yt,recordId:At,control:Pe,controls:ge.controls,getCoverUrl:function(Le){return ge.getCoverUrl(ze,Le)},viewId:Ge,disabled:Qe,isCharge:Ze,sourceEntityName:Et,allowlink:(nt||{}).allowlink,allowAdd:$t,allowRemove:Zt,onNewRecord:function(){ge.setState({showNewRecord:!0})},onCardClick:!We||Qe&&!At?function(){}:function(_e){vt===l.BD.SHARE||vt===l.BD.WORKFLOW?ut("",_e.wsid,_e.rowid,Ge):an?Qe&&ge.setState({previewRecord:{recordId:_e.rowid}}):ge.setState({previewRecord:{recordId:_e.rowid}})},onDelete:ge.handleDelete})}})),en&&this.renderRecordsCon())}},{key:"controls",get:function(){var ge=this.props.control.showControls,Re=this.state.controls;return ge.map(function(Pe){return M().find(Re,function(ke){return ke.controlId===Pe})}).filter(function(Pe){return Pe&&Pe.attribute!==1})}},{key:"onlyRelateByScanCode",get:function(){var ge=(M().get(this,"props.control.strDefault")||"").split("").map(function(ke){return!!+ke}),Re=(0,p.Z)(ge,3),Pe=Re[2];return Pe}},{key:"disabledManualWrite",get:function(){return this.onlyRelateByScanCode&&M().get(this,"props.control.advancedSetting.dismanual")==="1"}},{key:"isCard",get:function(){var ge=this.props,Re=ge.from,Pe=ge.control,ke=Pe===void 0?{}:Pe,We=ke.advancedSetting||{};return parseInt(We.showtype,10)===1||M().includes([l.BD.H5_ADD,l.BD.H5_EDIT,l.BD.RECORDINFO,l.BD.DRAFT],Re)&&parseInt(We.showtype,10)===2}},{key:"addRelationButtonVisible",get:function(){var ge=this.props.control,Re=ge===void 0?{}:ge,Pe=Re.from,ke=Re.disabled,We=Re.enumDefault,Ve=Re.enumDefault2,it=this.state.records,Ge=it===void 0?[]:it,pt=(0,F.kM)(Re,Pe);return(!Ge.length||We===2)&&Pe!==l.BD.SHARE&&Ve!==11&&(this.isCard?!this.disabledManualWrite:!0)&&!ke&&pt.editable}},{key:"allowReplaceRecord",get:function(){var ge=this.props.control,Re=ge===void 0?{}:ge,Pe=Re.from,ke=Re.disabled,We=Re.enumDefault,Ve=Re.enumDefault2,it=this.state.records,Ge=it===void 0?[]:it;return Ge.length===1&&We===1&&Pe!==l.BD.SHARE&&Ve!==10&&Ve!==11&&(this.isCard?!this.disabledManualWrite:!0)&&!ke}},{key:"allowNewRecord",get:function(){var ge=this.props,Re=ge.control,Pe=Re===void 0?{}:Re,ke=ge.editable;return ke&&Pe.enumDefault2!==1&&Pe.enumDefault2!==11&&!window.isPublicWorksheet}}]),we}(n.Component),Ce.contextType=k.Z,Ce.propTypes={editable:j().bool,multiple:j().bool,control:j().shape({disabled:j().bool,appId:j().string,viewId:j().string,worksheetId:j().string,projectId:j().string,from:j().number,recordId:j().string,controlId:j().string,coverCid:j().string,enumDefault2:j().number,strDefault:j().string,value:j().string,dataSource:j().string,showControls:j().arrayOf(j().string),enumDefault:j().number,onChange:j().func,openRelateSheet:j().func,formData:j().arrayOf(j().shape({}))}),records:j().arrayOf(j().shape({})),onChange:j().func},Ce.defaultProps={control:{}},he),pe(de.prototype,"loadMoreRecords",[I.Nj],g()(de.prototype,"loadMoreRecords"),de.prototype),pe(de.prototype,"handleDelete",[I.Nj],g()(de.prototype,"handleDelete"),de.prototype),pe(de.prototype,"deleteAllRecord",[I.Nj],g()(de.prototype,"deleteAllRecord"),de.prototype),pe(de.prototype,"clearAndAdd",[I.Nj],g()(de.prototype,"clearAndAdd"),de.prototype),pe(de.prototype,"handleAdd",[I.Nj],g()(de.prototype,"handleAdd"),de.prototype),pe(de.prototype,"handleReplaceRecord",[I.Nj],g()(de.prototype,"handleReplaceRecord"),de.prototype),de))||se},33008:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>V});var ce=t(88239),g=t(12424),p=t(42723),L=t(86735),te=t(67294),R=t(45697),y=t.n(R),a=t(71893),r=t(96486),o=t.n(r),d=(0,L.Z)([""],[""]),Z=(0,L.Z)([`
  border: none;
  padding: 0;
  margin: 0 10px;
  background: transparent;
  font-size: 12px;
  max-width: 100%;
  max-width: calc(100% - 30px);
`],[`
  border: none;
  padding: 0;
  margin: 0 10px;
  background: transparent;
  font-size: 12px;
  max-width: 100%;
  max-width: calc(100% - 30px);
`]),H=a.ZP.span(d),U=a.ZP.input(Z);function f(C){if(!C||!o().isString(C))return 4;var O=4,n=document.createElement("span");return n.setAttribute("style","position: absolute; font-size: 12px; left: -10000px; top: -10000px"),n.innerText=C,document.body.appendChild(n),O=n.offsetWidth,document.body.removeChild(n),O}function V(C){var O=C.value,n=C.height,s=C.placeholder,j=s===void 0?"":s,A=C.mountRef,S=A===void 0?function(){}:A,I=C.onChange,c=I===void 0?function(){}:I,q=(0,p.Z)(C,["value","height","placeholder","mountRef","onChange"]),b=(0,te.useState)(4),k=(0,g.Z)(b,2),ee=k[0],re=k[1],ie=(0,te.useRef)();return(0,te.useEffect)(function(){re(f(O))},[O]),(0,te.useEffect)(function(){ie&&ie.current&&(setTimeout(function(){ie.current&&ie.current.focus()},10),S(ie))},[]),te.createElement(U,(0,ce.default)({ref:ie,placeholder:j,value:O,style:{width:ee+2,lineHeight:(n||34)+"px"},onChange:function(E){c(E.target.value)}},q))}V.propTypes={maxWidth:y().number,height:y().number,mountRef:y().func,onChange:y().func}},33984:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>v});var ce=t(8177),g=t.n(ce),p=t(12424),L=t(61283),te=t(88106),R=t(85315),y=t(88239),a=t(63239),r=t.n(a),o=t(85105),d=t.n(o),Z=t(99663),H=t(22600),U=t(49135),f=t(93196),V=t(86735),C=t(67294),O=t(45697),n=t.n(O),s=t(29314),j=t(44894),A=t(93967),S=t.n(A),I=t(71893),c=t(6917),q=t(82011),b=t(24607),k=t(58126),ee=t(12246),re=t(33008),ie=t(51205),le=t(96486),E=t.n(le),w=t(89499),K,N,F,h,z,X=(0,V.Z)([`
  width: 310px;
  padding: 10px 16px;
  color: #9e9e9e;
  border-radius: 3px;
  background-color: #fff;
  box-shadow: 0px 4px 16px rgba(0, 0, 0, 0.24);
  .clearBtn {
    padding: 6px 16px;
    margin: 0 -16px 6px;
    cursor: pointer;
    color: #9e9e9e;
    &:hover {
      background: #e4f4ff;
    }
  }
`],[`
  width: 310px;
  padding: 10px 16px;
  color: #9e9e9e;
  border-radius: 3px;
  background-color: #fff;
  box-shadow: 0px 4px 16px rgba(0, 0, 0, 0.24);
  .clearBtn {
    padding: 6px 16px;
    margin: 0 -16px 6px;
    cursor: pointer;
    color: #9e9e9e;
    &:hover {
      background: #e4f4ff;
    }
  }
`]),B=(0,V.Z)([`
  position: absolute;
  left: 10px;
  top: 50%;
  margin-top: -6px;
  color: #bdbdbd;
  line-height: 1em;
  width: calc(100% - 10px);
`],[`
  position: absolute;
  left: 10px;
  top: 50%;
  margin-top: -6px;
  color: #bdbdbd;
  line-height: 1em;
  width: calc(100% - 10px);
`]);function x(W,P,u,l,T){var G={};return Object.keys(l).forEach(function(D){G[D]=l[D]}),G.enumerable=!!G.enumerable,G.configurable=!!G.configurable,("value"in G||G.initializer)&&(G.writable=!0),G=u.slice().reverse().reduce(function(D,M){return M(W,P,D)||D},G),T&&G.initializer!==void 0&&(G.value=G.initializer?G.initializer.call(T):void 0,G.initializer=void 0),G.initializer===void 0&&(Object.defineProperty(W,P,G),G=null),G}var Q=I.ZP.div(X),i=I.ZP.div(B),m=50,v=(F=(z=h=function(W){(0,f.default)(P,W);function P(u){(0,Z.default)(this,P);var l=(0,U.default)(this,(P.__proto__||d()(P)).call(this,u));return l.cell=C.createRef(),l.list=C.createRef(),l.state={active:!1,listvisible:!1,newrecordVisible:!1,selected:u.selected||[],keywords:"",activeIndex:void 0,deletedIds:[],addedIds:[]},l.initSearchControl(u),l}return(0,H.default)(P,[{key:"componentDidMount",value:function(){if(this.props.isediting)if(this.canSelect)this.openPopup();else{if(this.props.selected.length>0&&this.props.multiple)return;if(this.props.multiple&&this.props.selected.length>=m){alert(_l("\u6700\u591A\u5173\u8054%0\u6761",m),3);return}this.setState({newrecordVisible:!0})}}},{key:"componentWillReceiveProps",value:function(l){E().isEqual(this.props.selected,l.selected)||this.setState({selected:l.selected}),l.flag!==this.props.flag&&this.setState({addedIds:[],deletedIds:[]}),(E().get(l,"control.advancedSetting.searchcontrol")!==E().get(this.props,"control.advancedSetting.searchcontrol")||!E().isEqual(E().get(this.props,"control.relationControls"),E().get(l,"control.relationControls")))&&this.initSearchControl(l)}},{key:"initSearchControl",value:function(l){var T=l.control,G=T===void 0?{}:T,D=G.advancedSetting||{},M=D.searchcontrol,se=void 0;M&&(se=E().find(G.relationControls,{controlId:M})),se||(se=E().find(G.relationControls,{attribute:1})),this.searchControl=se}},{key:"getDefaultRelateSheetValue",value:function(){try{var l,T=this.props.control,G=T.formData,D=T.controlId,M=T.recordId,se=T.worksheetId,ae=typeof G=="function"?G():G,ne=E().find(ae,function(he){return he.attribute===1}),de={name:ne.value,sid:M,type:8,sourcevalue:r()((0,y.default)({},E().assign.apply(E(),(0,R.Z)(ae.map(function(he){return(0,te.default)({},he.controlId,he.value)}))),(l={},(0,te.default)(l,ne.controlId,ne.value),(0,te.default)(l,"rowid",M),l)))};if(ne.type===29)try{var Ce=JSON.parse(ne.value);de.name=Ce[0].name}catch(he){de.name=""}return{worksheetId:se,relateSheetControlId:D,value:de}}catch(he){return}}},{key:"getXOffset",value:function(){var l=this.popupWidth;return this.cell&&this.cell.current&&window.innerWidth-this.cell.current.getBoundingClientRect().left<l?window.innerWidth-l-10-this.cell.current.getBoundingClientRect().left:0}},{key:"openPopup",value:function(){if(!this.cell.current){this.setState({listvisible:!0});return}var l=this.cell.current.getBoundingClientRect().top,T=window.innerHeight-this.cell.current.clientHeight-l<360;this.setState({renderToTop:T,listvisible:!0,cellToTop:l})}},{key:"handleAdd",value:function(l){var T=this,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},D=this.props.multiple,M=this.state,se=M.selected,ae=M.addedIds,ne=ae===void 0?[]:ae;if(D&&se.length>=m){alert(_l("\u6700\u591A\u5173\u8054%0\u6761",m),3);return}E().find(se,function(de){return de.rowid===l.rowid})||this.setState({selected:D?se.concat(l):[l],addedIds:ne.concat(l.rowid)},function(){T.handleChange(),G()})}},{key:"handleClear",value:function(){var l=this,T=this.props.onVisibleChange;this.setState({selected:[],listvisible:!1},function(){l.handleChange(),T(!1)})}},{key:"handleDelete",value:function(l){var T=this.state,G=T.selected,D=T.deletedIds,M=D===void 0?[]:D;this.setState({selected:G.filter(function(se){return se.rowid!==l.rowid}),deletedIds:E().uniq(M.concat(l.rowid))},this.handleChange)}},{key:"handleItemClick",value:function(l){var T=this,G=this.props,D=G.multiple,M=G.onVisibleChange,se=this.state.selected;if(D&&l.rowid!=="isEmpty"){var ae=E().find(se,function(ne){return l.rowid===ne.rowid});ae?(this.allowRemove||ae.isNewAdd)&&this.handleDelete(l):this.handleAdd(E().assign({},l,{isNewAdd:!0}));return}else this.setState({selected:[l],listvisible:!1},function(){T.handleChange(),M(!1),T.setState({newrecordVisible:!1})})}},{key:"handleInputKeyDown",value:function(l){var T=this.props.control,G=this.state.selected;if((0,le.get)(this,"list.current")){if(l.key==="ArrowUp")this.list.current.updateActiveId(-1);else if(l.key==="ArrowDown")this.list.current.updateActiveId(1);else if(l.key==="Enter")this.list.current.handleEnter();else if(l.key==="Backspace"){if(E().get(this,"inputRef.current.value"))return;var D=G.slice(-1)[0];D&&T.enumDefault!==1&&this.handleDelete(D)}}}},{key:"handleChange",value:function(){var l=this.props,T=l.multiple,G=l.doNotClearKeywordsWhenChange,D=l.onChange,M=this.state,se=M.selected,ae=M.addedIds,ne=M.deletedIds;se.length>1&&E().find(se,{rowid:"isEmpty"})&&(se=se.filter(function(de){return de.rowid!=="isEmpty"})),T&&this.inputRef&&this.inputRef.current&&this.inputRef.current.focus(),G||this.setState({keywords:""}),D(se,{addedIds:ae,deletedIds:ne})}},{key:"handleClick",value:function(){var l=this.props,T=l.insheet,G=l.disabled,D=l.onClick;T?this.active?this.inputRef&&this.inputRef.current&&this.inputRef.current.focus():D():this.setState({listvisible:!G})}},{key:"renderSingle",value:function(){var l=this,T=this.props,G=T.insheet,D=T.isediting,M=T.isQuickFilter,se=T.control,ae=T.allowOpenRecord,ne=T.entityName,de=T.staticRecords,Ce=this.state,he=Ce.selected,fe=Ce.keywords,Ee=this.canSelect,Y=this.active;return C.createElement(C.Fragment,null,!!he.length&&!fe&&C.createElement("span",{className:"normalSelectedItem placeholder ellipsis",onClick:function(ve){ae&&(l.setState({previewRecord:{recordId:he[0].rowid}}),ve.stopPropagation())}},he[0].rowid?(0,b.Nx)(se,he[0]):_l("\u5173\u8054\u5F53\u524D%0",ne)),(E().isEmpty(de)&&Ee||M)&&Y&&C.createElement(re.Z,{mountRef:function(ve){return l.inputRef=ve},value:fe,onChange:function(ve){return l.setState({keywords:ve})},onKeyDown:this.handleInputKeyDown}),!Y&&E().isEmpty(he)&&!G&&se.hint&&C.createElement(i,{className:"ellipsis"},se.hint),E().isEmpty(de)&&Ee&&!he.length&&Y&&!fe&&this.searchControl&&C.createElement(i,{className:"ellipsis"},_l("\u641C\u7D22%0",this.searchControl.controlName)),G&&D&&!Ee&&he.length===0&&C.createElement("span",{className:"activeSelectedItem addBtn Hand",onClick:function(ve){if(ve.stopPropagation(),l.props.multiple&&l.props.selected.length>=m){alert(_l("\u6700\u591A\u5173\u8054%0\u6761",m),3);return}l.setState({newrecordVisible:!0})}},C.createElement("i",{className:"icon icon-plus"})))}},{key:"renderMultipe",value:function(){var l=this,T=this.props,G=T.insheet,D=T.isQuickFilter,M=T.selectedStyle,se=T.isediting,ae=T.control,ne=T.worksheetId,de=T.allowOpenRecord,Ce=T.entityName,he=T.cellFrom,fe=T.recordId,Ee=T.viewId,Y=T.isCharge,oe=this.state,ve=oe.selected,ue=oe.keywords,pe=oe.activeIndex,Se=this.active,ye=ve.length;return C.createElement(C.Fragment,null,!Se&&E().isEmpty(ve)&&!G&&ae.hint&&C.createElement(i,{className:"ellipsis"},ae.hint),ve.map(function(J,me){return Se||G?C.createElement("div",{key:me,className:S()("activeSelectedItem",{active:Se,allowRemove:l.allowRemove||J.isNewAdd}),style:E().assign({},me===0?he===4?{margin:0}:{marginTop:6}:{}),onClick:function(xe){!de||Se||(l.setState({previewRecord:{recordId:J.rowid}}),xe.stopPropagation())}},C.createElement("span",{className:"name InlineBlock ellipsis"},J.rowid?(0,b.Nx)(ae,J):_l("\u5173\u8054\u5F53\u524D%0",Ce)),Se&&(l.allowRemove||J.isNewAdd)&&C.createElement("i",{className:"icon icon-close",onClick:function(xe){xe.stopPropagation(),l.handleDelete(J)}})):[C.createElement("div",{key:me,className:"normalSelectedItem ellipsis",onClick:function(xe){de&&(l.setState({previewRecord:{recordId:J.rowid}}),xe.stopPropagation())}},(0,b.Nx)(ae,J)),me!==ye-1&&C.createElement("span",{style:{lineHeight:"34px",marginRight:2}},", ")]}),(this.canSelect||D)&&Se&&C.createElement(re.Z,{mountRef:function(me){return l.inputRef=me},value:ue,onChange:function(me){return l.setState({keywords:me})},onKeyDown:this.handleInputKeyDown}),G&&se&&!this.canSelect&&C.createElement("span",{className:"activeSelectedItem addBtn Hand",onClick:function(me){if(me.stopPropagation(),l.props.multiple&&l.props.selected.length>=m){alert(_l("\u6700\u591A\u5173\u8054%0\u6761",m),3);return}l.setState({newrecordVisible:!0})}},C.createElement("i",{className:"icon icon-plus"})))}},{key:"renderPopup",value:function(l){var T=this,G=l.disabledManualWrite,D=this.props,M=D.isQuickFilter,se=D.multiple,ae=D.control,ne=D.formData,de=D.insheet,Ce=D.disableNewRecord,he=D.prefixRecords,fe=D.staticRecords,Ee=D.onVisibleChange,Y=typeof ne=="function"?ne():ne,oe=this.state,ve=oe.keywords,ue=oe.selected,pe=oe.listvisible,Se=oe.newrecordVisible,ye=oe.renderToTop,J=oe.cellToTop,me=oe.activeIndex,be=this.isMobile?0:this.getXOffset();return C.createElement(L.Z,{onClickAway:function(){Se||Ee(!1)},className:"scrollInTable",style:this.isMobile?{position:"relative",marginLeft:-20}:{}},(de||M)&&this.renderSelected(!0),G&&C.createElement(Q,null,!de&&!!ue.length&&C.createElement("div",{className:"clearBtn",onClick:this.handleClear},_l("\u6E05\u9664")),_l("\u8BF7\u5728\u79FB\u52A8\u7AEF\u626B\u7801\u6DFB\u52A0\u5173\u8054")),pe&&!G&&C.createElement(k.Z,(0,y.default)({ref:this.list,isQuickFilter:M,activeIndex:me,keyWords:ve,searchControl:this.searchControl,control:ae,formData:Y,prefixRecords:he,staticRecords:fe,maxHeight:ye&&J,style:(0,y.default)({},ye?{bottom:(E().get(this,"cell.current.clientHeight")||0)+(de?0:3)}:{top:"100%"},{left:be,position:"absolute",width:this.popupWidth})},E().pick(this.props,["from","viewId","dataSource","parentWorksheetId","recordId","controlId","multiple","coverCid","showControls","showCoverAndControls","fastSearchControlArgs"]),{isMobile:this.isMobile,selectedIds:ue.map(function(xe){return xe.rowid}),onItemClick:this.handleItemClick,onClear:this.handleClear,allowNewRecord:this.props.enumDefault2!==1&&this.props.enumDefault2!==11&&!Ce,onNewRecord:function(){if(se&&ue.length>=m){alert(_l("\u6700\u591A\u5173\u8054%0\u6761",m),3);return}T.setState({newrecordVisible:!0,listvisible:!1})}})))}},{key:"renderSelected",value:function(l){var T=this,G=this.props,D=G.control,M=D===void 0?{}:D,se=G.isQuickFilter,ae=G.isediting,ne=G.insheet,de=G.multiple,Ce=G.selectedClassName,he=G.selectedStyle,fe=G.disabled,Ee=G.allowOpenRecord,Y=G.renderSelected,oe=this.state,ve=oe.selected,ue=oe.keywords,pe=oe.listvisible,Se=void 0;return E().isFunction(Y)&&!(se&&pe)?Se=Y(ve):de&&!se?Se=this.renderMultipe():Se=E().isArray(ve)&&ve.length>1?this.renderMultipe():this.renderSingle(),C.createElement("div",{className:S()("RelateRecordDropdown-selected",Ce,{free:l,active:pe||ae,emptyRecord:!ve.length,readonly:fe,allowOpenRecord:Ee,"customFormControlBox mobile":this.isMobile}),ref:this.cell,style:he,onClick:this.handleClick},Se,!fe&&!(this.active&&ue)&&C.createElement("i",{className:"icon "+(this.isMobile?"icon-arrow-right-border":"icon-arrow-down-border")+" dropIcon"}),!fe&&this.allowRemove&&(!!ve.length||ue)&&(!ne||this.active)&&C.createElement("i",{className:"icon icon-closeelement-bg-circle Hand clearIcon",onClick:function(J){J.stopPropagation(),ue?T.setState({keywords:""},function(){T.inputRef&&T.inputRef.current&&T.inputRef.current.focus()}):T.handleClear()}}))}},{key:"render",value:function(){var l=this,T=this.props,G=T.from,D=T.insheet,M=T.popupOffset,se=T.zIndex,ae=T.isediting,ne=T.control,de=ne===void 0?{}:ne,Ce=T.selectedStyle,he=T.className,fe=T.popupClassName,Ee=T.disabled,Y=T.dataSource,oe=T.enumDefault2,ve=T.isQuickFilter,ue=T.popupContainer,pe=T.onVisibleChange,Se=this.state,ye=Se.keywords,J=Se.selected,me=Se.isTop,be=Se.listvisible,xe=Se.previewRecord,Ae=Se.newrecordVisible,Ne=(de.strDefault||"").split("").map(function(ge){return!!+ge}),Me=(0,p.Z)(Ne,3),Fe=Me[2],Be=Fe&&de.advancedSetting.dismanual==="1",we=this.renderPopup({disabledManualWrite:Be}),Ie=D?ae:be;return C.createElement("div",{className:S()("RelateRecordDropdown",he),onClick:function(Re){ae&&Re.stopPropagation()}},C.createElement(s.Z,{action:D?[]:["click"],popupVisible:Ie,onPopupVisibleChange:function(Re){!Ee&&Re?l.openPopup():l.setState({listvisible:!1}),pe(Re)},popupClassName:S()("relateRecordDropdownPopup filterTrigger",fe,{isQuickFilter:ve}),getPopupContainer:ue||function(){return document.body},popupAlign:{points:D||me?["tl","tl"]:["tl","bl"],offset:M||[0,0],overflow:{adjustX:!this.isMobile}},zIndex:se||(this.isMobile?999:1e3),destroyPopupOnHide:!0,popup:we},(!D||!ae)&&(!ve||!be)?this.renderSelected():C.createElement("div",{style:Ce,ref:this.cell})),Ae&&!Be&&C.createElement(ee.default,{showFillNext:!0,directAdd:!0,className:"worksheetRelateNewRecord",worksheetId:Y,addType:2,defaultFormDataEditable:!0,defaultFormData:this.searchControl&&(0,w.s6)(this.searchControl.type)&&ye?(0,te.default)({},this.searchControl.controlId,ye):{},defaultRelatedSheet:this.getDefaultRelateSheetValue(),visible:Ae,hideNewRecord:function(){l.setState({newrecordVisible:!1})},onAdd:function(Re){return l.handleItemClick(Re)}}),G!==c.BD.PUBLIC_ADD&&xe&&C.createElement(q.Z,{visible:!0,viewId:E().get(de,"advancedSetting.openview")||de.viewId,from:1,hideRecordInfo:function(){l.setState({previewRecord:void 0})},recordId:xe.recordId,worksheetId:Y,relationWorksheetId:this.props.parentWorksheetId,currentSheetRows:J,showPrevNext:!0,updateRows:function(){var Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Re[0]&&l.setState({selected:J.map(function(ke){return ke.rowid===Re[0]?(0,y.default)({},ke,E().omit(Pe,["allowdelete","allowedit"])):ke})})}}))}},{key:"active",get:function(){var l=this.props.isediting,T=this.state.listvisible;return l||T}},{key:"isMobile",get:function(){return this.props.from===c.BD.H5_ADD||this.props.from===c.BD.H5_EDIT}},{key:"canSelect",get:function(){return this.props.enumDefault2!==10&&this.props.enumDefault2!==11}},{key:"popupWidth",get:function(){var l=this.props,T=l.insheet,G=l.showCoverAndControls,D=l.showControls,M=G&&D.length?480:313;return!T&&this.cell.current?Math.max(this.cell.current.clientWidth,M):M}},{key:"allowRemove",get:function(){var l=this.props.multiple;return!l||E().get(this.props,"control.advancedSetting.allowcancel")!=="0"}}]),P}(C.Component),h.propTypes={disableNewRecord:n().bool,isQuickFilter:n().bool,insheet:n().bool,isediting:n().bool,disabled:n().bool,multiple:n().bool,allowOpenRecord:n().bool,className:n().string,controls:n().arrayOf(n().shape({})),selected:n().arrayOf(n().shape({})),selectedClassName:n().string,selectedStyle:n().shape({}),popupContainer:n().func,prefixRecords:n().arrayOf(n().shape({})),staticRecords:n().arrayOf(n().shape({})),onChange:n().func,onClick:n().func,onVisibleChange:n().func,renderSelected:n().func},h.defaultProps={onVisibleChange:function(){},onChange:function(){},onClick:function(){}},z),x(F.prototype,"openPopup",[j.Nj],g()(F.prototype,"openPopup"),F.prototype),x(F.prototype,"handleAdd",[j.Nj],g()(F.prototype,"handleAdd"),F.prototype),x(F.prototype,"handleClear",[j.Nj],g()(F.prototype,"handleClear"),F.prototype),x(F.prototype,"handleDelete",[j.Nj],g()(F.prototype,"handleDelete"),F.prototype),x(F.prototype,"handleItemClick",[j.Nj],g()(F.prototype,"handleItemClick"),F.prototype),x(F.prototype,"handleInputKeyDown",[j.Nj],g()(F.prototype,"handleInputKeyDown"),F.prototype),x(F.prototype,"handleClick",[j.Nj],g()(F.prototype,"handleClick"),F.prototype),F)},58126:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>B});var ce=t(8177),g=t.n(ce),p=t(25273),L=t(54208),te=t(85105),R=t.n(te),y=t(99663),a=t(22600),r=t(49135),o=t(93196),d=t(67294),Z=t(45697),H=t.n(Z),U=t(44894),f=t(45231),V=t(5505),C=t(64530),O=t(82303),n=t(26358),s=t(88239),j=t(71893),A=t(93967),S=t.n(A),I=t(24607),c=t(83298),q=t(96486),b=t.n(q),k,ee;function re(x){return b().find(x,function(Q){return File.isPicture(Q.ext)||Q.previewUrl})}var ie={NORMAL:1,BIG:2},le="RelateRecordListItem",E=j.ZP.div(function(x){var Q=x.size;return`
  width: `+Q+`px;
  height: `+Q+`px;
  margin-right: `+(Q===ie.BIG?12:8)+`px;
  img {
    width: `+Q+`px;
    height: `+Q+`px;
    border: 1px solid rgba(0, 0, 0, 0.06);
    border-radius: 4px;
  }
`}),w=(ee=k=function(x){(0,o.default)(Q,x);function Q(i){(0,y.default)(this,Q);var m=(0,r.default)(this,(Q.__proto__||R()(Q)).call(this,i));return m.state={coverError:!1},m}return(0,a.default)(Q,[{key:"renderControls",value:function(){var m=this.props.data,v=this.cardControls,W=v===void 0?[]:v,P=W.map(function(u){return(0,c.Z)((0,s.default)({},u,{value:m[u.controlId]}))}).filter(function(u){return!!u});return d.createElement("div",{style:{marginLeft:"-7px"}},P.map(function(u){return d.createElement("div",{className:le+"-control ellipsis"},u)}))}},{key:"render",value:function(){var m=this,v=this.props,W=v.titleIsBold,P=v.active,u=v.multiple,l=v.coverCid,T=v.control,G=v.showControls,D=v.data,M=v.selected,se=v.showCoverAndControls,ae=v.onClick,ne=this.state.coverError,de=this.cover,Ce=(0,I.Nx)(T,D),he=se&&G.length?ie.BIG:ie.NORMAL,fe=he===ie.BIG?56:36,Ee=he===ie.BIG?44:24,Y=he===ie.BIG?{lineHeight:fe/2-6+"px",padding:"6px 40px 6px 12px"}:{lineHeight:fe-12+"px",padding:"6px 40px 6px 12px"},oe=void 0;return de&&(oe=File.isPicture(de.ext)?de.previewUrl.replace(/imageView2\/1\/w\/\d+\/h\/\d+/,"|imageView2/1/w/"+Ee+"/h/"+Ee):de.previewUrl),d.createElement("div",{className:S()(le,"flexRow",{selected:M,big:he===ie.BIG,hover:P,isEmpty:D.rowid==="isEmpty"}),onClick:ae,style:(0,s.default)({},Y,{minHeight:fe})},se&&l&&d.createElement(E,{size:Ee},oe&&!ne&&d.createElement("img",{src:oe,onError:function(){return m.setState({coverError:!0})}})),d.createElement("div",{className:"flex overflowHidden"},d.createElement("div",{className:S()("title",{Bold:W}),title:Ce,style:{color:"#333",fontWeight:he===ie.BIG?"bold":"normal",lineHeight:se&&G.length?"1.5":"24px",marginBottom:se&&G.length?4:0}},Ce),se&&!!G.length&&this.renderControls()),M&&u&&d.createElement("span",{className:le+"-selectedIcon"},d.createElement("i",{className:"icon icon-done_2"})))}},{key:"cover",get:function(){var m=this.props,v=m.coverCid,W=m.data;if(!v)return null;var P=void 0;try{P=re(JSON.parse(W[v])||[])}catch(u){return null}return P}},{key:"cardControls",get:function(){var m=this.props,v=m.controls,W=m.showControls,P=[{controlId:"ownerid",controlName:_l("\u62E5\u6709\u8005"),type:26},{controlId:"caid",controlName:_l("\u521B\u5EFA\u4EBA"),type:26},{controlId:"ctime",controlName:_l("\u521B\u5EFA\u65F6\u95F4"),type:16},{controlId:"utime",controlName:_l("\u6700\u8FD1\u4FEE\u6539\u65F6\u95F4"),type:16}].concat(v),u=new Array(W.length);return P.forEach(function(l){var T=W.indexOf(l.controlId);T>-1&&l.attribute!==1&&(u[T]=l)}),u.filter(function(l){return!!l})}}]),Q}(d.PureComponent),k.propTypes={multiple:H().bool,coverCid:H().string,showControls:H().string,control:H().shape({}),selected:H().bool,data:H().shape({}),showCoverAndControls:H().bool,onClick:H().func},k.defaultProps={controls:[],showControls:[],data:{}},ee),K,N,F,h,z;function X(x,Q,i,m,v){var W={};return Object.keys(m).forEach(function(P){W[P]=m[P]}),W.enumerable=!!W.enumerable,W.configurable=!!W.configurable,("value"in W||W.initializer)&&(W.writable=!0),W=i.slice().reverse().reduce(function(P,u){return u(x,Q,P)||P},W),v&&W.initializer!==void 0&&(W.value=W.initializer?W.initializer.call(v):void 0,W.initializer=void 0),W.initializer===void 0&&(Object.defineProperty(x,Q,W),W=null),W}var B=(F=(z=h=function(x){(0,o.default)(Q,x);function Q(i){(0,y.default)(this,Q);var m=(0,r.default)(this,(Q.__proto__||R()(Q)).call(this,i));return m.con=d.createRef(),m.state={loading:b().isEmpty(i.staticRecords),keyWords:"",records:i.staticRecords||[],pageIndex:1,activeId:void 0},m.handleSearch=b().debounce(m.handleSearch,500),m}return(0,a.default)(Q,[{key:"componentDidMount",value:function(){var m=this,v=this.props,W=v.control,P=v.parentWorksheetId;W?(window.isPublicWorksheet&&!b().get(window,"shareState.isPublicWorkflowRecord")?V.Z:f.Z).getWorksheetInfo({worksheetId:W.dataSource,getTemplate:!0,relationWorksheetId:P}).then(function(u){m.setState({allowAdd:u.allowAdd,worksheetInfo:u},m.loadRecord)}):this.loadRecord()}},{key:"componentWillReceiveProps",value:function(m){m.keyWords!==this.props.keyWords&&this.handleSearch(m.keyWords)}},{key:"handleEnter",value:function(){var m=this.props,v=m.onItemClick,W=m.onNewRecord,P=this.state,u=P.activeId,l=P.records;if(u==="newRecord"){W();return}var T=b().find(l,{rowid:u});T&&v(T)}},{key:"handleUpdateScroll",value:function(m){var v=34;try{v=this.con.current.querySelector(".RelateRecordListItem:nth-child("+m+")").offsetHeight}catch(l){}var W=this.con.current.querySelector(".nano-content"),P=W.clientHeight,u=W.scrollTop;v*m-u>P-20?W.scrollTop=v*m-P+v:v*m<u&&(W.scrollTop=v*m)}},{key:"updateActiveId",value:function(m){var v=this.state,W=v.activeId,P=v.records,u=void 0;W?u=b().findIndex(P,{rowid:W}):u=-1,b().isUndefined(u)&&(u=-1);var l=P[u+m];if(this.handleUpdateScroll(u+m),!l){this.setState({activeId:"newRecord"});return}var T=l.rowid;this.setState({activeId:T})}},{key:"loadRecord",value:function(){var m=this,v=this.props,W=v.from,P=v.isQuickFilter,u=v.control,l=v.formData,T=v.viewId,G=v.dataSource,D=v.selectedIds,M=v.parentWorksheetId,se=v.recordId,ae=v.controlId,ne=v.searchControl,de=v.multiple,Ce=v.staticRecords,he=v.fastSearchControlArgs,fe=this;if(b().isEmpty(Ce)){var Ee=this.state,Y=Ee.pageIndex,oe=Ee.keyWords,ve=Ee.records,ue=Ee.worksheetInfo;if(b().get(u,"advancedSetting.clicksearch")==="1"&&!oe){this.setState({loading:!1,records:[]});return}var pe=void 0;if(b().isEmpty(b().get(ue,"template.controls"))||(u.relationControls=ue.template.controls),u&&u.advancedSetting.filters&&(pe=(0,n.zK)({control:u,formData:l})),pe===!1&&!P){this.setState({error:"notCorrectCondition",loading:!1});return}this.setState({loading:!0});var Se=void 0,ye={worksheetId:G,viewId:T,searchType:1,pageSize:50,pageIndex:Y,status:1,keyWords:oe,isGetWorksheet:!0,getType:7,filterControls:pe||[]};he&&(delete ye.keyWords,String(oe||"").trim()&&(ye.fastFilters=[{spliceType:1,isGroup:!0,groupFilters:[{controlId:he.controlId,dataType:2,spliceType:1,filterType:he.filterType,dateRange:0,dateRangeType:1,isDynamicsource:!1,values:[oe]}]}])),M&&ae&&b().get(M,"length")===24&&(ye.relationWorksheetId=M,ye.controlId=ae),this.searchAjax&&b().isFunction(this.searchAjax.abort)&&this.searchAjax.abort(),window.isPublicWorksheet?(ye.shareId=window.publicWorksheetShareId,Se=V.Z.getRelationRows):Se=f.Z.getFilterRows,this.searchAjax=Se(ye),this.searchAjax.then(function(J){if(J.resultCode===1){var me=[];(u.unique||u.uniqueInRecord)&&(me=(b().get(fe,"context.rows")||[]).map(function(Ae){return b().get(safeParse(Ae[u.controlId],"array"),"0.sid")}).filter(b().identity));var be=ve.concat(J.data.filter(function(Ae){return Ae.rowid!==se&&!b().includes(me,Ae.rowid)})),xe=oe&&Y===1&&b().get(u,"advancedSetting.searchcontrol")&&ne;xe&&b().get(u,"advancedSetting.searchtype")!=="1"&&(be=be.sort(function(Ae,Ne){return Ne[ne.controlId]===oe?1:-1})),m.setState({records:be,loading:!1,loadouted:J.data.length<20,controls:J.template?J.template.controls:[],worksheet:J.worksheet||{},activeId:xe&&be[0]&&be[0][ne.controlId]===oe?be[0].rowid:void 0})}else m.setState({loading:!1,error:!0})})}}},{key:"handleSearch",value:function(m){var v=this.props.staticRecords;if(!b().isEmpty(v)){this.setState({keyWords:m.trim()});return}this.setState({keyWords:m.trim(),pageIndex:1,records:[]},this.loadRecord)}},{key:"loadNext",value:function(){this.setState({pageIndex:this.state.pageIndex+1,loading:!0},this.loadRecord)}},{key:"render",value:function(){var m=this,v=this.props,W=v.style,P=v.maxHeight,u=v.isMobile,l=v.control,T=v.coverCid,G=v.showControls,D=v.searchControl,M=v.multiple,se=v.selectedIds,ae=v.showCoverAndControls,ne=v.staticRecords,de=v.prefixRecords,Ce=de===void 0?[]:de,he=v.onItemClick,fe=v.allowNewRecord,Ee=v.onNewRecord,Y=this.state,oe=Y.error,ve=Y.loading,ue=Y.worksheet,pe=ue===void 0?{}:ue,Se=Y.keyWords,ye=Y.controls,J=Y.loadouted,me=Y.allowAdd,be=Y.activeId,xe=(ve?[]:Ce).concat(this.state.records);if(!b().isEmpty(ne)&&Se&&(xe=b().filter(ne,function(Me){return new RegExp(Se,"i").test(Me.name)})),b().get(l,"advancedSetting.clicksearch")==="1"&&!Se)return null;var Ae=ae&&G.length?56:36,Ne=xe.length*Ae+12;return P&&(Ne=P-48-10),d.createElement("div",{className:"RelateRecordList flexColumn",ref:this.con,style:b().assign({},W,u?{width:window.innerWidth}:{}),onClick:function(Fe){return Fe.stopPropagation()}},d.createElement("div",{className:"flexColumn",style:{minHeight:xe.length?Ae:!xe.length&&!Se&&!ve?100:50,height:Ne>323?323:Ne}},d.createElement("div",{className:"flex flexColumn listCon",onClick:function(Fe){return Fe.stopPropagation()}},d.createElement(p.Z,{className:"flex",onScrollEnd:function(){!ve&&!J&&b().isEmpty(ne)&&m.loadNext()}},!xe.length&&Se&&!ve&&d.createElement(O.Q,{style:{color:"#9e9e9e"}},_l("\u65E0\u5339\u914D\u7ED3\u679C")),!xe.length&&!Se&&!ve&&d.createElement(O.Q,{style:{color:"#9e9e9e"}},d.createElement("i",{className:"icon Icon icon-ic-line Font56 Gray_bd"}),d.createElement("div",{className:"mTop10"},oe?oe==="notCorrectCondition"?_l("\u4E0D\u5B58\u5728\u7B26\u5408\u6761\u4EF6\u7684%0",pe.entityName||l&&l.sourceEntityName||""):_l("\u6CA1\u6709\u6743\u9650"):_l("\u6682\u65E0\u8BB0\u5F55"))),!!xe.length&&xe.map(function(Me,Fe){return d.createElement(w,{active:be===Me.rowid,multiple:M,titleIsBold:D&&Se&&Me[D.controlId]===Se,selected:b().find(se,function(Be){return Me.rowid===Be}),showCoverAndControls:ae,control:l,controls:ye,key:Fe,showControls:Me.rowid==="isEmpty"?[]:G,coverCid:T,data:Me,onClick:function(we){we.stopPropagation(),m.setState({activeId:void 0}),he(Me)}})}),ve&&d.createElement("div",{className:"loadingCon"},d.createElement(L.Z,null))))),d.createElement("div",{style:{borderTop:"1px solid #ddd"}}),fe&&me&&!(b().get(window,"shareState.isPublicFormPreview")||b().get(window,"shareState.isPublicForm"))&&(!oe||oe==="notCorrectCondition")&&d.createElement("div",{className:"RelateRecordList-create "+(be==="newRecord"?"active":""),onClick:function(Fe){Fe.stopPropagation(),m.setState({activeId:void 0}),Ee(Fe)}},d.createElement("i",{className:"icon icon-plus"})," ",pe.entityName||l&&l.sourceEntityName))}}]),Q}(d.PureComponent),h.contextType=C.Z,h.propTypes={from:H().number,viewId:H().string,dataSource:H().string,selectedIds:H().arrayOf(H().string),parentWorksheetId:H().string,recordId:H().string,controlId:H().string,multiple:H().bool,showCoverAndControls:H().bool,coverCid:H().string,showControls:H().arrayOf(H().string),prefixRecords:H().arrayOf(H().shape({})),onItemClick:H().func,onClear:H().func,onNewRecord:H().func},z),X(F.prototype,"handleEnter",[U.Nj],g()(F.prototype,"handleEnter"),F.prototype),X(F.prototype,"updateActiveId",[U.Nj],g()(F.prototype,"updateActiveId"),F.prototype),X(F.prototype,"handleSearch",[U.Nj],g()(F.prototype,"handleSearch"),F.prototype),F)},87889:(lt,Te,t)=>{"use strict";if(t.d(Te,{Z:()=>g}),!/^(1887|7596|7798)$/.test(t.j))var ce=t(33984);const g=/^(1887|7596|7798)$/.test(t.j)?null:ce.Z},6395:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>I,z:()=>j});var ce=t(62521),g=t(16469),p=t(12424),L=t(86735),te=t(67294),R=t(45697),y=t.n(R),a=t(71893),r=t(29314),o=t(93967),d=t.n(o),Z=t(96486),H=t.n(Z),U=(0,L.Z)([`
  position: relative;
  display: flex;
  align-items: center;
`],[`
  position: relative;
  display: flex;
  align-items: center;
`]),f=(0,L.Z)([`
  > .Menu {
    position: relative !important;
  }
`],[`
  > .Menu {
    position: relative !important;
  }
`]),V=(0,L.Z)([`
  overflow: hidden;
  display: inline-flex;
  font-weight: 500;
  border-radius: 4px;
  cursor: pointer;
  height: 36px;
  line-height: 36px;
  color: #333;
  border: 1px solid #dddddd;
  font-size: 13px;
  .content {
    padding: 0 16px;
    display: inline-flex;
    align-items: center;
    font-weight: bold;
    > .icon {
      color: #9e9e9e;
      font-weight: normal;
    }
  }
  &:not(.disabled) {
    .content:hover {
      background-color: #f5f5f5;
    }
  }
  &.disabled {
    opacity: 0.6;
    cursor: not-allowed;
    background: transparent;
  }
`],[`
  overflow: hidden;
  display: inline-flex;
  font-weight: 500;
  border-radius: 4px;
  cursor: pointer;
  height: 36px;
  line-height: 36px;
  color: #333;
  border: 1px solid #dddddd;
  font-size: 13px;
  .content {
    padding: 0 16px;
    display: inline-flex;
    align-items: center;
    font-weight: bold;
    > .icon {
      color: #9e9e9e;
      font-weight: normal;
    }
  }
  &:not(.disabled) {
    .content:hover {
      background-color: #f5f5f5;
    }
  }
  &.disabled {
    opacity: 0.6;
    cursor: not-allowed;
    background: transparent;
  }
`]),C=(0,L.Z)([`
  position: relative;
  display: inline-block;
  width: 36px;
  text-align: center;
  cursor: pointer;
  color: #333;
  height: 34px;
  &:hover {
    background-color: #f5f5f5;
  }
  &:before {
    position: absolute;
    content: '';
    width: 1px;
    height: 16px;
    top: 10px;
    left: -0.5px;
    background-color: #ddd;
  }
`],[`
  position: relative;
  display: inline-block;
  width: 36px;
  text-align: center;
  cursor: pointer;
  color: #333;
  height: 34px;
  &:hover {
    background-color: #f5f5f5;
  }
  &:before {
    position: absolute;
    content: '';
    width: 1px;
    height: 16px;
    top: 10px;
    left: -0.5px;
    background-color: #ddd;
  }
`]),O=(0,L.Z)([`
  width: 0;
  height: 18px;
  border-right: 1px solid #ddd;
  margin: 0 14px 0 14px;
`],[`
  width: 0;
  height: 18px;
  border-right: 1px solid #ddd;
  margin: 0 14px 0 14px;
`]),n=a.ZP.div(U),s=a.ZP.div(f),j=a.ZP.div(V),A=a.ZP.span(C),S=a.ZP.span(O);function I(c){var q=c.entityName,b=c.btnVisible,k=c.selectedRowIds,ee=c.addVisible,re=c.selectVisible,ie=c.isBatchEditing,le=c.onNew,E=c.onSelect,w=c.onBatchOperate,K=b.enterBatchEdit,N=b.deleteRecords,F=b.removeRelation,h=b.exportRecords,z=!!(0,Z.get)(window,"shareState.shareId"),X=(0,te.useState)(),B=(0,p.Z)(X,2),x=B[0],Q=B[1],i=(0,te.useRef)(),m=ee?_l("\u65B0\u5EFA%0",q):_l("\u9009\u62E9%0",q),v=ee?"icon-plus":"icon-link_record",W=ee?le:E,P=(0,Z.isEmpty)(k);return te.createElement(n,{ref:i},!ie&&te.createElement(te.Fragment,null,(ee||re)&&te.createElement(r.Z,{zIndex:999,popupVisible:x&&ee&&re,actions:["click"],getPopupContainer:function(){return i.current},onPopupVisibleChange:Q,popup:te.createElement(s,null,te.createElement(ce.Z,{style:{top:0},onClickAwayExceptions:[".relateRecordBtnDropIcon"],onClickAway:function(){return Q(!1)}},te.createElement(g.Z,{onClick:le},_l("\u65B0\u5EFA%0",q)),te.createElement(g.Z,{onClick:E},_l("\u5173\u8054\u5DF2\u6709%0",q)))),popupClassName:"filterTrigger",destroyPopupOnHide:!0,popupAlign:{offset:[0,4],points:["tl","bl"],overflow:{adjustY:!0}}},te.createElement(j,{onClick:W},te.createElement("div",{className:"content"},te.createElement("i",{className:"icon "+v+" mRight5 Font16"}),m),ee&&re&&te.createElement(A,{className:"relateRecordBtnDropIcon",onClick:function(l){l.stopPropagation(),Q(!0)}},te.createElement("i",{className:"icon icon-arrow-down"})))),(ee||re)&&K&&te.createElement(S,null),K&&te.createElement(te.Fragment,null,te.createElement(j,{onClick:function(){return w({action:"enterBatchEditing"})}},te.createElement("div",{className:"content"},_l("\u6279\u91CF\u64CD\u4F5C"))))),ie&&te.createElement(te.Fragment,null,K&&te.createElement(j,{className:"mRight10",onClick:function(){return w({action:"exitBatchEditing"})}},te.createElement("div",{className:"content",style:{paddingLeft:10}},te.createElement("i",{className:"icon icon-close Gray_9e Font18 mRight5"}),_l("\u9000\u51FA"))),F&&te.createElement(j,{className:d()("mRight10",{disabled:P}),onClick:function(){P||w({action:"removeRelation"})}},te.createElement("div",{className:"content"},_l("\u53D6\u6D88\u5173\u8054"))),N&&!z&&te.createElement(j,{className:d()("mRight10",{disabled:P}),onClick:function(){P||w({action:"deleteRecords"})}},te.createElement("div",{className:"content"},_l("\u5220\u9664"))),h&&!z&&te.createElement(j,{className:d()("mRight10",{disabled:P}),onClick:function(){P||w({action:"exportRecords"})}},te.createElement("div",{className:"content"},_l("\u5BFC\u51FA")))))}I.propTypes={entityName:y().string,btnVisible:y().shape({}),selectedRowIds:y().arrayOf(y().string),addVisible:y().bool,isBatchEditing:y().bool,selectVisible:y().bool,onNew:y().func,onSelect:y().func,onBatchOperate:y().func}},24666:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>St});var ce=t(88239),g=t(12424),p=t(86735),L=t(67294),te=t(45697),R=t.n(te),y=t(50533),a=t(96486),r=t.n(a),o=t(93967),d=t.n(o),Z=t(71893),H=t(26358),U=t(44516),f=t(10149),V=t(4557),C=t(1502),O=t(4114),n=t(42723),s=t(88106),j=t(52945),A=t.n(j),S=t(15742),I=t(31742),c=t(86674),q=t(76345),b=t(15577),k=t(59292),ee=t(82425),re=t(42185),ie=t(29314),le=(0,p.Z)([`
  width: 280px;
  border-radius: 3px;
  padding: 20px;
  box-shadow: 0px 4px 16px rgba(0, 0, 0, 0.24);
  background-color: #fff;
`],[`
  width: 280px;
  border-radius: 3px;
  padding: 20px;
  box-shadow: 0px 4px 16px rgba(0, 0, 0, 0.24);
  background-color: #fff;
`]),E=(0,p.Z)([`
  font-size: 14px;
  color: #333;
`],[`
  font-size: 14px;
  color: #333;
`]),w=(0,p.Z)([`
  overflow: hidden;
  margin-top: 30px;
`],[`
  overflow: hidden;
  margin-top: 30px;
`]),K=Z.ZP.div(function(Qe){var Xe=Qe.left;return`
position: absolute;
left: `+(Xe||0)+`px;
top: -16px;
height: 0px;
width: 0px;
border: 8px solid transparent;
border-bottom-color: #fff;
> span {
  position: absolute;
  z-index: -1;
  top: -9px;
  left: -8px;
  width: 0px;
  height: 0px;
  border: 8px solid transparent;
  border-bottom-color: rgba(0, 0, 0, 0.12);
}
`}),N=Z.ZP.div(le),F=Z.ZP.div(E),h=Z.ZP.div(w);function z(Qe){var Xe=Qe.visible,$e=Qe.className,Ke=Qe.content,Ue=Qe.showAngle,He=Ue===void 0?!0:Ue,ze=Qe.angleLeft,gt=Qe.okText,Et=Qe.cancelText,ft=Qe.style,qe=Qe.offset,nt=Qe.children,Ze=Qe.points,et=Qe.onOk,ut=Qe.onPopupVisibleChange;return L.createElement(ie.Z,{popupStyle:ft,action:["click"],popupVisible:Xe,destroyPopupOnHide:!0,onPopupVisibleChange:ut,popup:L.createElement(N,{className:$e},He&&L.createElement(K,{left:ze||0},L.createElement("span",null)),L.createElement(F,null,Ke),L.createElement(h,null,L.createElement(re.ZP,{className:"Right",size:"small",type:"danger",onClick:function(wt){et(wt),ut(!1)}},gt||_l("\u786E\u5B9A")),L.createElement(re.ZP,{className:"Right",size:"small",type:"link",onClick:function(){return ut(!1)}},Et||_l("\u53D6\u6D88")))),popupAlign:{points:Ze||["tl","bl"],offset:qe||[],overflow:{adjustY:!0}}},nt)}z.propTypes={className:R().string,content:R().string,angleLeft:R().number,offset:R().arrayOf(R().number),style:R().shape({}),points:R().arrayOf(R().string),okText:R().string,cancelText:R().string,onOk:R().func,children:R().node};var X=t(60967),B=t(31846),x=t(67055),Q=t(42541),i=(0,p.Z)([`
  padding: 0 16px !important;
  text-align: center;
  line-height: 34px;
  color: #9e9e9e;
  .moreOperate,
  .openRecord,
  .deleteRowIcon {
    display: none;
  }
  .moreOperate {
    margin-top: 5px;
  }
  .deleteRowIcon {
    margin-top: 2px;
  }
  .Checkbox-box {
    margin-right: -2px !important;
  }
  &.isNew {
    &::before {
      content: '';
      position: absolute;
      z-index: 3;
      left: 0;
      top: 0;
      bottom: 0;
      width: 2px;
      background: #2196f3;
    }
  }
  &.hover {
    `,`
    .openRecord {
      display: inline-flex;
    }
    .moreOperate,
    .deleteRowIcon {
      display: inline-block;
    }
  }
`],[`
  padding: 0 16px !important;
  text-align: center;
  line-height: 34px;
  color: #9e9e9e;
  .moreOperate,
  .openRecord,
  .deleteRowIcon {
    display: none;
  }
  .moreOperate {
    margin-top: 5px;
  }
  .deleteRowIcon {
    margin-top: 2px;
  }
  .Checkbox-box {
    margin-right: -2px !important;
  }
  &.isNew {
    &::before {
      content: '';
      position: absolute;
      z-index: 3;
      left: 0;
      top: 0;
      bottom: 0;
      width: 2px;
      background: #2196f3;
    }
  }
  &.hover {
    `,`
    .openRecord {
      display: inline-flex;
    }
    .moreOperate,
    .deleteRowIcon {
      display: inline-block;
    }
  }
`]),m=(0,p.Z)([`
  display: inline-flex;
  margin-left: 8px;
  font-size: 16px;
  width: 24px;
  height: 24px;
  color: #2196f3;
  border-radius: 4px;
  &:hover {
    background: rgba(0, 0, 0, 0.05);
  }
`],[`
  display: inline-flex;
  margin-left: 8px;
  font-size: 16px;
  width: 24px;
  height: 24px;
  color: #2196f3;
  border-radius: 4px;
  &:hover {
    background: rgba(0, 0, 0, 0.05);
  }
`]),v=Z.ZP.span(i,function(Qe){var Xe=Qe.hideOperate;return!Xe&&`
    .number {
      display: none;
    }`}),W=(0,Z.ZP)(Q.Lb)(m);function P(Qe){var Xe=(0,L.useState)(),$e=(0,g.Z)(Xe,2),Ke=$e[0],Ue=$e[1],He=Qe.tableType,ze=Qe.isBatchEditing,gt=Qe.allIsSelected,Et=Qe.selected,ft=Qe.allowAdd,qe=Qe.allowDelete,nt=Qe.allowOpenRecord,Ze=Qe.layoutChangeVisible,et=Qe.allowRemoveRelation,ut=Qe.className,xt=Qe.style,wt=Qe.rowIndex,kt=Qe.tableControls,Rt=Qe.row,jt=Qe.projectId,fn=Qe.appId,Mt=Qe.viewId,sn=Qe.worksheetId,on=Qe.sheetSwitchPermit,en=Qe.relateRecordControlPermission,$t=Qe.showQuickFromSetting,an=Qe.allowEdit,tn=Qe.pageIndex,mt=tn===void 0?1:tn,Lt=Qe.pageSize,zt=Qe.recordId,Zt=Qe.relateRecordControlId,Nt=Qe.deleteRelateRow,ct=Qe.updateRows,De=ct===void 0?function(){}:ct,_e=Qe.addRecord,Le=_e===void 0?function(){}:_e,rt=Qe.saveSheetLayout,Ct=rt===void 0?function(){}:rt,dt=Qe.resetSheetLayout,It=dt===void 0?function(){}:dt,bt=Qe.removeRecords,Ut=bt===void 0?function(){}:bt,Xt=Qe.onRecreate,pn=Xt===void 0?function(){}:Xt,tt=Qe.onSelect,ht=tt===void 0?function(){}:tt,Dt=Qe.openRecord,Ot=Dt===void 0?function(){}:Dt,Ht=!!r().get(window,"shareState.shareId");return L.createElement(z,{visible:Ke,angleLeft:xt.width/2-8,placement:"bottomLeft",content:_l("\u4F60\u786E\u5B9A\u8981\u53D6\u6D88\u5173\u8054\u5417\uFF1F"),onPopupVisibleChange:function(dn){return!dn&&Ue(!1)},onOk:function(dn){dn.stopPropagation(),Nt(Rt.rowid)},okText:_l("\u786E\u5B9A"),cancelText:_l("\u53D6\u6D88")},L.createElement(v,{className:d()(ut,{isNew:Rt.isNew}),style:xt,hideOperate:!zt&&!et},Ze&&wt===-1&&L.createElement(x.Z,{description:_l("\u4FDD\u5B58\u8868\u683C\u5F53\u524D\u7684\u5217\u5BBD\u914D\u7F6E\uFF0C\u5E76\u5E94\u7528\u7ED9\u6240\u6709\u7528\u6237"),onSave:Ct,onCancel:It}),ze&&(wt===-1||Rt.rowid)&&L.createElement(X.Z,{size:"small",checked:wt===-1?gt:Et,onClick:function(){ht(wt===-1?{action:gt?"clearSelectAll":"selectAll"}:{action:"toggleSelectRow"})}}),!ze&&L.createElement(L.Fragment,null,Rt.rowid&&L.createElement("span",{className:"number",key:"number",style:en.editable&&an?{}:{display:"inline-block"}},(mt-1)*Lt+wt+1),Rt.rowid&&!(!$t&&!qe&&!et)&&en.editable&&an&&(zt&&!Ht?L.createElement(B.Z,(0,ce.default)({appId:fn,viewId:Mt,worksheetId:sn,recordId:Rt.rowid,projectId:jt},{relateRecordControlId:Zt,allowCopy:ft,allowAdd:ft,allowRecreate:ft,isRelateRecordTable:!0,disableCustomButtons:!$t,shows:$t?d()("share","print","copy","recreate","fav",{openinnew:Mt&&nt,removeRelation:et}):d()({removeRelation:et}),formdata:kt.map(function(Kt){return(0,ce.default)({},Kt,{value:Rt[Kt.controlId]})}),allowDelete:qe&&Rt.allowdelete,showTask:!1,sheetSwitchPermit:on,popupAlign:{offset:[0,4],points:["tl","bl"]},onRemoveRelation:function(){var dn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Cn=dn.confirm,Rn=Cn===void 0?!0:Cn;Rn?Ue(!0):Nt(Rt.rowid)},onCopySuccess:Le,onDeleteSuccess:function(){Ut([Rt])},onRecreate:pn,onUpdate:function(dn,Cn){De(r().omit(Cn,["allowedit","allowdelete"]))}})):et&&L.createElement("div",{className:"deleteRowIcon",key:"deleteRowIcon",onClick:function(){return Ue(!0)}},L.createElement("i",{className:"icon icon-close deleteRow Font18 Hand"}))),Rt.rowid&&nt&&He==="classic"&&L.createElement(W,{className:"openRecord allowOutClick",onClick:function(){return Ot(Rt.rowid)}},L.createElement("i",{className:"icon icon-worksheet_enlarge allowOutClick Hand ThemeHoverColor3"})))))}P.propTypes={showQuickFromSetting:R().bool,isBatchEditing:R().bool,allIsSelected:R().bool,selected:R().bool,allowDelete:R().bool,allowOpenRecord:R().bool,layoutChangeVisible:R().bool,allowRemoveRelation:R().bool,allowEdit:R().bool,allowAdd:R().bool,projectId:R().string,relateRecordControlId:R().string,className:R().string,pageIndex:R().number,pageSize:R().number,recordId:R().string,appId:R().string,viewId:R().string,worksheetId:R().string,sheetSwitchPermit:R().shape({editable:R().any}),relateRecordControlPermission:R().shape({editable:R().any}),row:R().shape({rowid:R().string}),tableControls:R().arrayOf(R().shape({})),rowIndex:R().number,style:R().shape({}),deleteRelateRow:R().func,updateRows:R().func,addRecord:R().func,saveSheetLayout:R().func,resetSheetLayout:R().func,removeRecords:R().func,onRecreate:R().func,onSelect:R().func,openRecord:R().func};var u=t(62521),l=t(16469),T=t(89499),G=t(89557);function D(Qe){var Xe=Qe.disabled,$e=Qe.className,Ke=Qe.style,Ue=Qe.control,He=Qe.columnIndex,ze=Qe.fixedColumnCount,gt=Qe.isAsc,Et=Qe.isLast,ft=Qe.sheetHiddenColumnIds,qe=ft===void 0?[]:ft,nt=Qe.clearHiddenColumn,Ze=Qe.hideColumn,et=Qe.changeSort,ut=Qe.updateSheetColumnWidths,xt=Qe.frozen,wt=Qe.getPopupContainer,kt=Qe.onShowFullValue,Rt=Ue.type===30?Ue.sourceControlType:Ue.type,jt=!Xe&&(0,T.ir)(Rt),fn=!(r().get(window,"shareState.isPublicView")||r().get(window,"shareState.isPublicPage"))&&r().get(Ue,"advancedSetting.datamask")==="1"&&r().get(Ue,"advancedSetting.isdecrypt")==="1";return L.createElement(G.Z,{disableSort:Xe,className:$e,style:Ke,control:Ue,showDropdown:!0,isLast:Et,isAsc:gt,changeSort:et,updateSheetColumnWidths:ut,getPopupContainer:wt,renderPopup:function(sn){var on=sn.closeMenu;return L.createElement(u.Z,{className:"worksheetColumnHeadMenu",style:{width:180},onClickAway:on},jt&&(0,T.Zv)(Rt,Ue).map(function(en){return L.createElement(l.Z,{key:en.value,onClick:function(){et(en.value===2),on()}},L.createElement("i",{className:d()("icon",en.value===1?"icon-descending-order2":"icon-ascending-order2")}),en.text)}),fn&&L.createElement(l.Z,{onClick:kt},L.createElement("i",{className:"icon icon-eye_off"}),_l("\u89E3\u5BC6")),L.createElement(l.Z,{onClick:function(){Ze(Ue.controlId),on()}},L.createElement("i",{className:"icon icon-visibility_off"}),_l("\u9690\u85CF")),!!qe.length&&L.createElement(l.Z,{onClick:function(){nt(),on()}},L.createElement("i",{className:"icon icon-eye"}),_l("\u663E\u793A\u6240\u6709\u5217")),He<6&&ze!==He+1&&L.createElement(l.Z,{onClick:function(){xt(He),on()}},L.createElement("i",{className:"icon icon-task-new-locked"}),_l("\u51BB\u7ED3")),ze>1&&He<ze&&L.createElement(l.Z,{onClick:function(){xt(0),on()}},L.createElement("i",{className:"icon icon-task-new-no-locked"}),_l("\u89E3\u51BB\u6240\u6709\u5217")))}})}D.propTypes={className:R().string,columnIndex:R().number,style:R().shape({}),isAsc:R().bool,isLast:R().bool,control:R().shape({controlId:R().any,sourceControlType:R().any,type:R().number}),fixedColumnCount:R().number,frozen:R().func,hideColumn:R().func,sheetHiddenColumnIds:R().arrayOf(R().string),clearHiddenColumn:R().func,changeSort:R().func,updateSheetColumnWidths:R().func,getPopupContainer:R().func,onShowFullValue:R().func};var M=t(22010);function se(Qe,Xe){return Xe.map(function($e){var Ke=(0,a.find)(Qe.relationControls,{controlId:$e.controlId});return Ke&&($e.required=Ke.required,$e.fieldPermission=Ke.fieldPermission),$e})}function ae(Qe,Xe){var $e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],Ke=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Ue=se(Qe,Xe).filter(function(He){return!(0,a.find)($e,function(ze){return He.controlId===ze})}).map(function(He){return Ke[He.controlId]?(0,ce.default)({},He,{advancedSetting:A()({},He.advancedSetting,{datamask:"0"})}):He});return Qe.showControls.map(function(He){return(0,a.find)(Ue,{controlId:He})}).filter(a.identity)}function ne(Qe,Xe){var $e={},Ke=[];try{Ke=JSON.parse(Qe.advancedSetting.widths)}catch(Ue){}return Ke.length&&Qe.showControls.map(function(Ue){return(0,a.find)((Xe||Qe.relationControls||[]).concat(c.cU),function(He){return He.controlId===Ue})}).filter(function(Ue){return Ue}).forEach(function(Ue,He){$e[Ue.controlId]=Ke[He]}),$e}function de(Qe){var Xe=Qe.advancedSetting,$e=Xe.allowdelete,Ke=$e===void 0?"1":$e,Ue=Xe.allowexport,He=Ue===void 0?"1":Ue,ze=Xe.allowedit,gt=ze===void 0?"1":ze,Et=Xe.showquick,ft=Et===void 0?"1":Et,qe=Xe.allowbatch,nt=qe===void 0?"0":qe,Ze=Xe.alternatecolor,et=Ze===void 0?"1":Ze,ut=Xe.sheettype,xt=ut===void 0?"0":ut,wt=Xe.allowlink;return{showAsZebra:et==="1",allowLineEdit:gt==="1",tableType:xt==="1"?"classic":"simple",showQuickFromSetting:ft==="1",allowOpenRecord:wt!=="0",allowDeleteFromSetting:Ke==="1"}}var Ce=20;function he(){var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Xe=Qe.records,$e=Xe===void 0?[]:Xe,Ke=Qe.pageSize,Ue=Ke===void 0?Ce:Ke,He=Qe.pageIndex,ze=He===void 0?1:He;if(ze!==1)return $e.slice(0,Ue);var gt=$e.filter(function(ft){return ft.isNew}),Et=$e.filter(function(ft){return!ft.isNew});return gt.concat(Et.slice(0,Ue))}function fe(Qe){var Xe=Qe.cache,$e=Qe.base,Ke=$e===void 0?{}:$e,Ue=Qe.tableState,He=Ue===void 0?{}:Ue,ze=Qe.changes,gt=ze===void 0?{}:ze,Et=Qe.controls,ft=Qe.useHeight,qe=Qe.appendRecords,nt=Qe.deleteRecords,Ze=Qe.updateTableState,et=Qe.updateRecord,ut=Qe.handleOpenRecordInfo,xt=Qe.handleRecreateRecord,wt=Qe.updateCell,kt=Qe.updateSort,Rt=Qe.handleRemoveRelation,jt=Qe.handleSaveSheetLayout,fn=gt.addedRecords,Mt=fn===void 0?[]:fn,sn=Qe.records,on=Qe.updateWorksheetControls,en=Ke.isTab,$t=Ke.from,an=Ke.initialCount,tn=Ke.isCharge,mt=Ke.control,Lt=Ke.recordId,zt=Ke.allowEdit,Zt=Ke.sheetSwitchPermit,Nt=Ke.controlPermission,ct=Ke.allowRemoveRelation,De=Ke.relateWorksheetInfo,_e=Ke.addVisible,Le=Ke.isHiddenOtherViewRecord,rt=He.tableLoading,Ct=He.pageIndex,dt=He.count,It=He.keywords,bt=He.fixedColumnCount,Ut=He.layoutChanged,Xt=He.disableMaskDataControls,pn=Xt===void 0?{}:Xt,tt=He.sheetHiddenColumnIds,ht=tt===void 0?[]:tt,Dt=He.sortControl,Ot=He.defaultScrollLeft,Ht=He.highlightRows,Kt=Ht===void 0?{}:Ht,dn=He.sheetColumnWidths,Cn=dn===void 0?{}:dn,Rn=He.selectedRowIds,gn=Rn===void 0?[]:Rn,wn=He.isBatchEditing,On=(0,L.useRef)(),An=(0,L.useMemo)(function(){return ae(mt,Et,ht,pn)},[Et,mt,ht]),Yn=(0,L.useMemo)(function(){return ne(mt,Et)},[mt,Et]),kn=de(mt),Fn=kn.showQuickFromSetting,$n=kn.allowOpenRecord,ba=kn.allowDeleteFromSetting,ua=en?3:1;Lt&&!Ke.saveSync&&Ct===1&&(sn=Mt.concat(sn));var La=sn.length>ua?sn.length:ua,ga=!Lt,Ua=He.pageSize||Ce,yr=Number((mt.advancedSetting||{}).rowheight||0),sr=(0,a.isEqual)((0,a.uniq)(gn),(Lt&&!Ke.saveSync?he({records:sn,pageIndex:Ct,pageSize:Ua}):sn).map(function(Qa){return Qa.rowid})),Ba=String(ga?sn.length*10:Ct*Ua).length*8,cr=(Ba>24?Ba:24)+32+(kn.tableType==="classic"&&$n?34:0);Lt&&Ke.saveSync&&La>Ua&&(La=Ua);var hr=(0,L.useCallback)(function(Qa){return Le&&(0,a.get)(mt,"advancedSetting.showcount")!=="1"&&!It&&(Ct===Math.ceil(dt/Ua)||dt===0)&&dt<Number(an)?Qa.concat((0,s.default)({},(0,a.get)(Et,"0.controlId")&&_.get(Et,"0.controlId")!=="rowid"?(0,a.get)(Et,"0.controlId"):"tip",{customCell:!0,type:"text",value:_l("%0\u6761\u8BB0\u5F55\u5DF2\u9690\u85CF",an-dt),style:{color:"#9e9e9e"}})):Qa},[mt.controlId]);return L.createElement(k.Z,(0,ce.default)({scrollBarHoverShow:!0,isRelateRecordList:!0,disablePanVertical:!0},kn,{ref:On,loading:rt,fromModule:S.i7.RELATE_RECORD,fixedColumnCount:bt,rowCount:ft?void 0:La,defaultScrollLeft:Ot,allowlink:(0,a.get)(mt,"advancedSetting.allowlink"),viewId:mt.viewId,sheetSwitchPermit:Zt,lineEditable:kn.allowLineEdit&&!mt.disabled&&zt&&Nt.editable&&(0,I.v)(q.RX.quickSwitch,Zt,mt.viewId),noRenderEmpty:!0,projectId:De.projectId,appId:De.appId,worksheetId:De.worksheetId,rules:De.rules,rowHeadWidth:cr,rowHeight:S.dN[yr]||34,controls:Et,data:Lt?hr(he({records:sn,pageIndex:Ct,pageSize:Ua})):sn,columns:An,sheetColumnWidths:(0,ce.default)({},Yn,Cn),sheetViewHighlightRows:Kt,renderRowHead:function(da){var Jn=da.className,ra=da.style,ha=da.rowIndex,Ia=da.row;return L.createElement(P,{tableType:kn.tableType,isBatchEditing:wn,showQuickFromSetting:Fn,selected:(0,a.includes)(gn,Ia.rowid),allIsSelected:sr,relateRecordControlId:mt.controlId,allowOpenRecord:$n,className:Jn,style:ra,rowIndex:ha,row:Ia,layoutChangeVisible:tn&&Ut,allowRemoveRelation:ct,tableControls:Et,sheetSwitchPermit:Zt,appId:De.appId,viewId:mt.viewId,worksheetId:De.worksheetId,relateRecordControlPermission:Nt,allowAdd:_e,allowDelete:ba,allowEdit:zt&&mt.type!==51,pageIndex:Ct,pageSize:Ua,recordId:Lt,projectId:De.projectId,deleteRelateRow:Rt,removeRecords:function(Ka){nt(Ka.map(function(tr){return tr.rowid}))},openRecord:function(Ka){return ut({recordId:Ka})},addRecord:function(Ka,tr){Ze({highlightRows:(0,s.default)({},Ka.rowid,!0)}),qe([Ka],{afterRecordId:tr})},saveSheetLayout:function(){jt({updateWorksheetControls:on,columns:An,columnWidthsOfSetting:Yn})},resetSheetLayout:function(){Ze({layoutChanged:!1,sheetHiddenColumnIds:[],sortControl:void 0,fixedColumnCount:0,sheetColumnWidths:{}})},onRecreate:function(){xt(Ia,{openRecord:function(tr){return ut({recordId:tr})}})},updateRows:function(Ka){et(Ka)},onSelect:function(){var Ka=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},tr=Ka.action,Tr=void 0,xr=void 0,_a=void 0;switch(tr){case"toggleSelectRow":xr=(0,a.findIndex)(sn,{rowid:Ia.rowid}),Tr=!(0,a.includes)(gn,Ia.rowid),Tr&&Xe.current.shiftActive&&typeof Xe.current.lastSelectRowIndex<"u"?(_a=sn.slice(Math.min(Xe.current.lastSelectRowIndex,xr),Math.max(Xe.current.lastSelectRowIndex,xr)+1),Ze({selectedRowIds:(0,a.uniq)(gn.concat(_a.map(function(gr){return gr.rowid})))})):Ze({selectedRowIds:Tr?gn.concat(Ia.rowid):gn.filter(function(gr){return gr!==Ia.rowid})}),xr>=0&&(Xe.current.lastSelectRowIndex=xr);break;case"selectAll":Ze({selectedRowIds:(Lt&&!Ke.saveSync?he({records:sn,pageIndex:Ct,pageSize:Ua}):sn).map(function(gr){return gr.rowid})});break;case"clearSelectAll":Ze({selectedRowIds:[]});break}}})},renderColumnHead:function(da){var Jn=(0,n.Z)(da,[]),ra=Jn.control;return L.createElement(D,(0,ce.default)({},Jn,{control:pn[ra.controlId]?(0,ce.default)({},ra,{advancedSetting:A()({},ra.advancedSetting,{datamask:"0"})}):ra,disabled:ga||$t===S.GP.DRAFT,sheetHiddenColumnIds:ht,isAsc:Jn.control.controlId===(Dt||{}).controlId?(Dt||{}).isAsc:void 0,changeSort:function(Ia){var wa=void 0;try{var Ka=On.current.con.querySelector(".sheetViewTable .scroll-x");Ka&&(wa=Ka.scrollLeft)}catch(tr){console.error(tr)}kt({newIsAsc:Ia,controlId:Jn.control.controlId,newDefaultScrollLeft:wa})},hideColumn:function(Ia){Ze({layoutChanged:!0,sheetHiddenColumnIds:(0,a.uniqBy)(ht.concat(Ia))})},clearHiddenColumn:function(){Ze({layoutChanged:!0,sheetHiddenColumnIds:[]})},frozen:function(Ia){Ze({layoutChanged:!0,fixedColumnCount:Ia})},onShowFullValue:function(){Ze({disableMaskDataControls:(0,ce.default)({},pn,(0,s.default)({},ra.controlId,!0))})}}))},onCellClick:function(da,Jn){(0,b.Ye)("worksheetRecord",mt.dataSource,{rowId:Jn.rowid}),ut({recordId:Jn.rowid,activeRelateTableControlIdOfRecord:da.type===29?da.controlId:void 0}),Ze({highlightRows:{}})},updateCell:wt,onColumnWidthChange:function(da,Jn){Ze({layoutChanged:!0,sheetColumnWidths:(0,ce.default)({},Cn,(0,s.default)({},da,Jn))})}}))}fe.propTypes={cache:(0,te.shape)({}),base:(0,te.shape)({}),tableState:(0,te.shape)({}),records:(0,te.arrayOf)((0,te.shape)({})),rowHeight:te.number,useHeight:te.bool,appendRecords:te.func,deleteRecords:te.func,updateTableState:te.func,updateRecord:te.func,handleOpenRecordInfo:te.func,handleRecreateRecord:te.func,updateCell:te.func,updateSort:te.func,handleRemoveRelation:te.func,handleSaveSheetLayout:te.func,updateWorksheetControls:te.func};const Ee=(0,y.$j)(function(Qe){return(0,ce.default)({},Qe)},function(Qe){return{updateTableState:(0,M.DE)(ee.HP,Qe),appendRecords:(0,M.DE)(ee.VO,Qe),updateRecord:(0,M.DE)(ee.Vs,Qe),deleteRecords:(0,M.DE)(ee.kl,Qe),handleRecreateRecord:(0,M.DE)(ee.uU,Qe),updateCell:(0,M.DE)(ee.wW,Qe),updateSort:(0,M.DE)(ee.mJ,Qe),handleRemoveRelation:(0,M.DE)(ee.tA,Qe),handleSaveSheetLayout:(0,M.DE)(ee.PR,Qe)}})(fe);var Y=t(85315),oe=t(94942),ve=t.n(oe),ue=t(36803),pe=t(3540),Se=t(37727),ye=t(30381),J=t.n(ye),me=t(34694),be=t(7891),xe=t(57559),Ae=t(2641),Ne=t(51040),Me=t(12496),Fe=t(6395),Be=(0,p.Z)([`
  display: flex;
  flex-direction: row;
  align-items: center;
  line-height: 36px;
  `,`
  .searchIcon {
    position: relative;
    z-index: 2;
    .icon-search {
      position: relative;
      margin: 5px 0 0;
    }
    .searchInput {
      font-size: 0px;
      overflow: hidden;
      background: #eaeaea;
      height: 28px;
      border-radius: 28px;
      input {
        width: 150px;
        margin-left: 30px;
        padding-left: 0px;
        height: 28px;
        line-height: 28px;
        font-size: 12px;
        border: none;
        background: transparent;
      }
    }
    .clearKeywords {
      cursor: pointer;
      margin: 5px;
      position: absolute;
      right: 0px;
    }
  }
`],[`
  display: flex;
  flex-direction: row;
  align-items: center;
  line-height: 36px;
  `,`
  .searchIcon {
    position: relative;
    z-index: 2;
    .icon-search {
      position: relative;
      margin: 5px 0 0;
    }
    .searchInput {
      font-size: 0px;
      overflow: hidden;
      background: #eaeaea;
      height: 28px;
      border-radius: 28px;
      input {
        width: 150px;
        margin-left: 30px;
        padding-left: 0px;
        height: 28px;
        line-height: 28px;
        font-size: 12px;
        border: none;
        background: transparent;
      }
    }
    .clearKeywords {
      cursor: pointer;
      margin: 5px;
      position: absolute;
      right: 0px;
    }
  }
`]),we=(0,p.Z)([`
  color: #9e9e9e;
  display: inline-block;
  height: 28px;
  font-size: 20px;
  line-height: 28px;
  padding: 0 4px;
  border-radius: 5px;
  &:hover {
    background: #f7f7f7;
  }
`],[`
  color: #9e9e9e;
  display: inline-block;
  height: 28px;
  font-size: 20px;
  line-height: 28px;
  padding: 0 4px;
  border-radius: 5px;
  &:hover {
    background: #f7f7f7;
  }
`]),Ie=Z.ZP.div(Be,function(Qe){var Xe=Qe.smallMode;return Xe&&"display: block;"}),ge=Z.ZP.span(we);function Re(Qe){var Xe=Qe.className,$e=Qe.control,Ke=Qe.onSearch,Ue=(0,L.useRef)(null),He=(0,L.useState)(!1),ze=(0,g.Z)(He,2),gt=ze[0],Et=ze[1],ft=(0,L.useState)(Qe.keywords),qe=(0,g.Z)(ft,2),nt=qe[0],Ze=qe[1];return(0,L.useLayoutEffect)(function(){gt&&Ue.current&&Ue.current.focus()},[gt]),(0,L.useEffect)(function(){nt&&!Qe.keywords&&Ze("")},[Qe.keywords]),(0,L.useEffect)(function(){!nt&&Qe.keywords?(Ze(Qe.keywords),Et(!0)):Et(!1)},[Qe.control.controlId]),L.createElement(Se.y_,{defaultStyle:{width:0,opacity:0,iconLeft:0},style:{width:(0,Se.ST)(gt?180:0),opacity:(0,Se.ST)(gt?1:0),iconLeft:(0,Se.ST)(gt?27:0)}},function(et){return gt?L.createElement("div",{className:d()("searchIcon flexRow",Xe)},L.createElement("i",{className:"icon icon-search Gray_9e Font20 Hand",style:{left:et.iconLeft}}),L.createElement("div",{className:"searchInput",style:{width:et.width,backgroundColor:"rgba(234, 234, 234, "+et.opacity+")"}},L.createElement(pe.Z,{manualRef:Ue,placeholder:_l("\u641C\u7D22")+'"'+$e.controlName+'"',value:nt,onChange:Ze,onBlur:function(){!Qe.keywords&&!nt&&gt&&Et(!1)},onKeyDown:function(xt){xt.keyCode===13&&Ke(nt)}}),Qe.keywords&&gt&&L.createElement("i",{className:"icon icon-cancel Gray_9e Font16 clearKeywords",onClick:function(xt){xt.stopPropagation(),Ze(""),Ke(""),Et(!1)}}))):L.createElement("span",{"data-tip":_l("\u641C\u7D22"),style:{height:28,marginRight:6}},L.createElement(ge,{className:"Hand ThemeHoverColor3",onClick:function(){return Et(!0)}},L.createElement("i",{className:"icon icon-search"})))})}Re.propTypes={control:(0,te.shape)({}),className:te.string,keywords:te.string,onSearch:te.func};function Pe(Qe){var Xe=this,$e=Qe.mode,Ke=Qe.cache,Ue=Qe.smallMode,He=Qe.style,ze=Qe.className,gt=Qe.base,Et=gt===void 0?{}:gt,ft=Qe.tableState,qe=ft===void 0?{}:ft,nt=Qe.changes,Ze=nt===void 0?{}:nt,et=Qe.records,ut=Qe.appendRecords,xt=Qe.handleAddRelation,wt=Qe.handleRemoveRelation,kt=Qe.updatePageIndex,Rt=Qe.refresh,jt=Qe.search,fn=Qe.updateTableState,Mt=Qe.handleOpenRecordInfo,sn=Qe.deleteOriginalRecords,on=Ze.addedRecords,en=Et.from,$t=Et.appId,an=Et.viewId,tn=Et.control,mt=Et.allowEdit,Lt=Et.formData,zt=Et.searchMaxCount,Zt=Et.worksheetId,Nt=Et.recordId,ct=Et.addVisible,De=Et.relateWorksheetInfo,_e=Et.selectVisible,Le=Et.allowRemoveRelation,rt=Et.allowDeleteFromSetting,Ct=Et.allowExportFromSetting,dt=qe.tableLoading,It=qe.keywords,bt=qe.pageIndex,Ut=qe.pageSize,Xt=qe.count,pn=qe.isBatchEditing,tt=qe.selectedRowIds,ht=qe.countForShow,Dt=Et.allowBatchEdit&&!!et.length;return L.createElement(Ie,{className:ze,style:He,smallMode:Ue},(ct||_e||Dt)&&L.createElement(Fe.Z,{btnVisible:{enterBatchEdit:Dt,removeRelation:Le,deleteRecords:!!Nt&&rt,exportRecords:Ct&&!!Nt&&en!==S.GP.DRAFT&&tn.recordInfoFrom!==S.GP.WORKFLOW},isBatchEditing:pn,entityName:De.entityName||tn.sourceEntityName||"",addVisible:ct,selectVisible:_e,selectedRowIds:tt,onNew:function(){(0,me.Z)({worksheetId:tn.dataSource,masterRecord:Et.saveSync?{rowId:Nt,controlId:tn.controlId,worksheetId:Zt}:void 0,defaultRelatedSheet:tn.type!==51&&{worksheetId:Zt,relateSheetControlId:tn.controlId,value:ee.A$(Lt,Nt)},directAdd:!0,showFillNext:!0,onAdd:function(Kt){Kt&&ut([Kt])},openRecord:function(Kt){return Mt({recordId:Kt})}})},onSelect:function(){(0,be.selectRecord)({canSelectAll:!0,multiple:!0,control:tn,allowNewRecord:!1,viewId:tn.viewId,parentWorksheetId:Zt,controlId:tn.controlId,recordId:Nt,relateSheetId:De.worksheetId,filterRowIds:[Nt].concat(Nt&&en!==21&&Et.saveSync?[]:(Et.saveSync?et:et.concat(on)).map(function(Ht){return Ht.rowid})),onOk:function(){var Ht=(0,ue.Z)(ve().mark(function Kt(dn){return ve().wrap(function(Rn){for(;;)switch(Rn.prev=Rn.next){case 0:xt(dn);case 1:case"end":return Rn.stop()}},Kt,Xe)}));return function(dn){return Ht.apply(this,arguments)}}(),formData:Lt})},onBatchOperate:function(Ht){var Kt=Ht.action,dn=void 0;switch(Kt){case"enterBatchEditing":Ke.current.lastSelectRowIndex=void 0,fn({isBatchEditing:!0});break;case"exitBatchEditing":fn({isBatchEditing:!1,selectedRowIds:[]});break;case"removeRelation":wt(tt);break;case"deleteRecords":if(dn=tt.filter(function(Cn){var Rn=(0,a.find)(et,{rowid:Cn});return Rn&&Rn.allowdelete}),!dn.length){alert(_l("\u6CA1\u6709\u6709\u6743\u9650\u5220\u9664\u7684\u8BB0\u5F55"),3);return}sn({recordIds:dn});break;case"exportRecords":(0,Me.Vn)({appId:De.appId,worksheetId:De.worksheetId,downLoadUrl:De.downLoadUrl,viewId:tn.viewId,projectId:De.projectId,exportControlsId:tn.showControls,rowIds:tt});break}}}),L.createElement("div",{className:"flex"}),L.createElement("div",{className:d()("operateButtons flexRow alignItemsCenter",{isInForm:Et.isInForm&&$e!=="dialog"})},pn&&!!Nt&&en!==21&&!!Nt&&L.createElement("span",{className:"mRight6","data-tip":_l("\u5237\u65B0"),style:{height:28},onClick:function(){Rt()}},L.createElement(ge,{className:"Hand ThemeHoverColor3"},L.createElement("i",{className:"icon icon-task-later"}))),!!Nt&&L.createElement(Re,{className:"mRight6",keywords:It,control:tn,onSearch:jt}),$e==="recordForm"&&!!Nt&&en!==S.GP.DRAFT&&L.createElement("span",{"data-tip":_l("\u5168\u5C4F"),style:{height:28,marginRight:6},onClick:function(){return(0,xe.$)({appId:$t,viewId:an,worksheetId:Zt,recordId:Nt,control:(0,ce.default)({},tn,Et.isTab?{store:void 0}:{}),allowEdit:mt,formdata:Lt,reloadTable:Et.isTab?Rt:function(){}})}},L.createElement(ge,{className:"Hand ThemeHoverColor3"},L.createElement("i",{className:"icon icon-worksheet_enlarge"}))),tn.type!==51&&en!==S.GP.DRAFT&&Ct&&!!Nt&&!(0,a.get)(window,"shareState.shareId")&&L.createElement(Ae.Z,{style:{height:28},exportSheet:function(Ht){(0,Me.Vn)({worksheetId:Zt,rowId:Nt,controlId:tn.controlId,fileName:((((0,a.last)([].concat((0,Y.Z)(document.querySelectorAll(".recordTitle"))))||{}).innerText||"").slice(0,200)+" "+tn.controlName+J()().format("YYYYMMDD HHmmss")).trim()+".xlsx",onDownload:Ht})}}),(!!Nt||tn.type===51)&&L.createElement(Ne.Z,{disabled:dt,className:"pagination",pageIndex:bt,pageSize:Ut,allCount:tn.type===51&&!(0,a.isUndefined)(zt)&&Xt>zt?zt:Xt,countForShow:ht,allowChangePageSize:!1,changePageIndex:function(Ht){kt(Ht)},onPrev:function(){kt(bt-1<0?0:bt-1)},onNext:function(){kt(bt+1>Math.ceil(Xt/Ut)?Math.ceil(Xt/Ut):bt+1)}})))}Pe.propTypes={mode:te.string,cache:(0,te.shape)({}),smallMode:te.bool,style:(0,te.shape)({}),className:te.string,base:(0,te.shape)({}),tableState:(0,te.shape)({}),records:(0,te.arrayOf)((0,te.shape)({})),appendRecords:te.func,handleAddRelation:te.func,handleRemoveRelation:te.func,updatePageIndex:te.func,refresh:te.func,search:te.func,updateTableState:te.func,handleOpenRecordInfo:te.func,deleteOriginalRecords:te.func};const ke=(0,y.$j)(function(Qe){return(0,ce.default)({},Qe)},function(Qe){return{appendRecords:(0,M.DE)(ee.VO,Qe),updatePageIndex:(0,M.DE)(ee.w8,Qe),refresh:(0,M.DE)(ee.bi,Qe),search:(0,M.DE)(ee.yC,Qe),handleAddRelation:(0,M.DE)(ee.Pr,Qe),handleRemoveRelation:(0,M.DE)(ee.tA,Qe),updateTableState:(0,M.DE)(ee.HP,Qe),deleteOriginalRecords:(0,M.DE)(ee.v3,Qe)}})(Pe);var We=(0,p.Z)([`
  &.userSelectNone {
    * {
      user-select: none !important;
    }
  }
`],[`
  &.userSelectNone {
    * {
      user-select: none !important;
    }
  }
`]),Ve=Z.ZP.div(We);function it(Qe){var Xe=Qe.mode,$e=Xe===void 0?"recordForm":Xe,Ke=Qe.saveSync,Ue=Qe.isSplit,He=Qe.base,ze=He===void 0?{}:He,gt=Qe.tableState,Et=gt===void 0?{}:gt,ft=Qe.loading,qe=Qe.control,nt=Qe.records,Ze=Qe.useHeight,et=Qe.updateWorksheetControls,ut=Qe.updateRecord,xt=Qe.deleteRecords,wt=Qe.refresh,kt=Qe.updateBase,Rt=Qe.updateTableConfigByControl,jt=ze.isTab,fn=ze.isInForm,Mt=ze.allowEdit,sn=ze.controlPermission,on=ze.relateWorksheetInfo;if(ft)return Et.error?L.createElement("div",{className:"center Gray_9e pTop100"},Et.error):L.createElement(f.Z,{style:(0,ce.default)({},Ue&&{overflow:"auto",padding:"0 24px"})});var en=(0,L.useRef)({}),$t=(0,L.useRef)(),an=(0,L.useContext)(O.e)||{},tn=an.width,mt=tn<500,Lt=(0,L.useCallback)(function(zt){var Zt=zt.recordId,Nt=zt.activeRelateTableControlId;(0,C.L)({showPrevNext:!0,currentSheetRows:nt.filter(function(ct){return ct.rowid}),from:2,visible:!0,appId:on.appId,viewId:(0,a.get)(qe,"advancedSetting.openview")||qe.viewId,recordId:Zt,activeRelateTableControlId:Nt,worksheetId:on.worksheetId,relationWorksheetId:ze.worksheetId,rules:on.rules,updateRows:function(De,_e){var Le=(0,g.Z)(De,1),rt=Le[0];ut(_e)},projectId:on.projectId,onDeleteSuccess:function(){!qe.disabled&&Mt&&sn.editable&&xt([Zt])}})},[qe.controlId,nt]);return(0,L.useEffect)(function(){(0,a.isUndefined)(Ke)||kt({saveSync:Ke})},[Ke]),(0,L.useEffect)(function(){Rt(qe)},[qe.fieldPermission,qe.controlPermissions,qe.advancedSetting,qe.disabled,qe.enumDefault,qe.enumDefault2]),(0,V.Z)("Shift",function(){en.current.shiftActive=!1,setTimeout(function(){$t.current&&($t.current.className=$t.current.className.replace(" userSelectNone",""))},500)},{event:"keyup"},[]),(0,V.Z)("Shift",function(){en.current.shiftActive=!0,$t.current&&($t.current.className=$t.current.className+" userSelectNone")},{event:"keydown"},[]),(0,L.useEffect)(function(){(0,a.isFunction)(qe.addRefreshEvents)&&qe.addRefreshEvents(qe.controlId,wt)},[]),L.createElement(L.Fragment,null,L.createElement(ke,{mode:$e,smallMode:mt,className:d()("mBottom10",{mTop10:!Ue&&jt}),style:(0,ce.default)({},Ue&&{padding:"10px 24px"}),cache:en,handleOpenRecordInfo:Lt}),L.createElement(Ve,{className:d()({flex:Ue||Ze,mTop30:mt&&fn}),style:(0,ce.default)({},Ue&&{overflow:"auto",padding:"0 24px"}),ref:$t},L.createElement(Ee,{useHeight:Ze,handleOpenRecordInfo:Lt,updateWorksheetControls:et,cache:en})),Ue&&L.createElement("div",{style:{height:30}}))}it.propTypes={mode:te.string,base:(0,te.shape)({}),saveSync:te.bool,isSplit:te.bool,loading:te.bool,control:(0,te.shape)({}),records:(0,te.arrayOf)((0,te.shape)({})),useHeight:te.bool,updateWorksheetControls:te.func,updateRecord:te.func,deleteRecords:te.func,updateBase:te.func,refresh:te.func,updateTableConfigByControl:te.func};var Ge=function(Xe){return(0,ce.default)({},Xe)},pt=function(Xe){return{refresh:(0,M.DE)(ee.bi,Xe),updateBase:(0,M.DE)(ee.l7,Xe),updateRecord:(0,M.DE)(ee.Vs,Xe),deleteRecords:(0,M.DE)(ee.kl,Xe),updateTableConfigByControl:(0,M.DE)(ee.Bw,Xe)}};const ot=(0,y.$j)(Ge,pt)(it);var vt=t(67062),At=t(89343),yt=(0,p.Z)([`
  position: relative;
  line-height: 1.5;
  `,`
  `,`
`],[`
  position: relative;
  line-height: 1.5;
  `,`
  `,`
`]),st=Z.ZP.div(yt,function(Qe){var Xe=Qe.useHeight;return Xe&&"height: 100%;"},function(Qe){var Xe=Qe.isSplit;return Xe&&"flex: 1; overflow: hidden; display: flex; flex-direction: column;"});function St(Qe){var Xe=Qe.appId,$e=Qe.control,Ke=Qe.allowEdit,Ue=Qe.pageSize,He=Qe.worksheetId,ze=Qe.recordId,gt=Qe.formData,Et=gt===void 0?[]:gt,ft=Qe.sheetSwitchPermit,qe=Qe.onCountChange,nt=(0,L.useState)(!1),Ze=(0,g.Z)(nt,2),et=Ze[0],ut=Ze[1],xt=(0,L.useRef)({changes:{addedRecordIds:[],deletedRecordIds:[]}}),wt=(0,L.useMemo)(function(){return xt.current={changes:{addedRecordIds:[],deletedRecordIds:[]}},$e.store||(0,vt.Z)($e,{recordId:ze,allowEdit:Ke,worksheetId:He,formData:Et,pageSize:Ue,sheetSwitchPermit:ft,appId:Xe})},[$e.controlId,(0,a.get)($e,"store.version")]);return(0,L.useEffect)(function(){xt.current.storeVersion=wt.version,wt.subscribe(function(){if(xt.current.storeVersion===wt.version){var kt=wt.getState(),Rt=!(0,a.isEqual)(xt.current.changes,kt.changes)&&!(0,a.isEqual)(kt.changes,At.R),jt=!kt.base.saveSync&&typeof kt.tableState.countForShow<"u"?kt.tableState.countForShow:kt.tableState.count;(xt.current.count!==jt||!ze)&&(0,a.isFunction)(qe)&&qe(jt,(0,a.get)(kt,"base.isTab")?(0,a.get)(kt,"changes.changed"):Rt),xt.current.count=jt,xt.current.changes=kt.changes}})},[wt.version]),(0,L.useEffect)(function(){$e.type===51&&ut((0,H.zK)({control:(0,ce.default)({},$e,{relationControls:wt.getState().controls,recordId:ze}),formData:Et,filterKey:"resultfilters"}))},[Et.filter(function(kt){return((0,a.get)($e,"advancedSetting.resultfilters")||"").indexOf(kt.controlId)>-1}).map(function(kt){return kt.value}).join("")]),(0,L.useEffect)(function(){$e.type===51&&(wt.dispatch({type:"UPDATE_BASE",value:{formData:Et}}),!wt.getState().loading&&$e.type===51&&wt.dispatch((0,ee.a8)()))},[et]),(0,L.useEffect)(function(){wt.init()},[wt.version]),L.createElement(y.zt,{store:wt},L.createElement(st,{useHeight:Qe.useHeight,isSplit:Qe.isSplit,className:d()({flexColumn:Qe.useHeight})},L.createElement(ot,Qe)))}St.propTypes={useHeight:te.bool,allowEdit:te.bool,pageSize:te.number,control:(0,te.shape)({}),worksheetId:te.string,recordId:te.string,formData:(0,te.arrayOf)((0,te.shape)({})),sheetSwitchPermit:(0,te.arrayOf)((0,te.shape)({})),onCountChange:te.func}},82425:(lt,Te,t)=>{"use strict";t.d(Te,{A$:()=>h,Bw:()=>b,HP:()=>F,PR:()=>X,Pr:()=>x,S1:()=>ee,VO:()=>E,Vs:()=>le,a8:()=>i,bi:()=>re,kl:()=>w,l7:()=>k,mJ:()=>N,tA:()=>B,uU:()=>z,v3:()=>Q,w8:()=>c,wW:()=>K,yC:()=>ie});var ce=t(88106),g=t(63239),p=t.n(g),L=t(85315),te=t(12424),R=t(94942),y=t.n(R),a=t(88239),r=t(36803),o=t(96486),d=t.n(o);if(!/^(1887|7596|7798)$/.test(t.j))var Z=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var H=t(15742);if(!/^(1887|7596|7798)$/.test(t.j))var U=t(62232);if(!/^(1887|7596|7798)$/.test(t.j))var f=t(26358);if(!/^(1887|7596|7798)$/.test(t.j))var V=t(86674);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(36612);if(!/^(1887|7596|7798)$/.test(t.j))var O=t(89499);if(!/^(1887|7596|7798)$/.test(t.j))var n=t(24607);if(!/^(1887|7596|7798)$/.test(t.j))var s=t(12496);if(!/^(1887|7596|7798)$/.test(t.j))var j=t(34694);if(!/^(1887|7596|7798)$/.test(t.j))var A=t(89471);if(!/^(1887|7596|7798)$/.test(t.j))var S=t(15577);function I(){var m=this,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},W=v.pageIndex,P=v.pageSize,u=v.keywords,l=v.getRules,T=v.getWorksheet;return function(){var G=(0,r.Z)(y().mark(function D(M,se){var ae,ne,de,Ce,he,fe,Ee,Y,oe,ve,ue,pe,Se,ye,J,me,be,xe;return y().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return ae=se(),ne=ae.base,de=ne===void 0?{}:ne,Ce=ae.tableState,he=Ce===void 0?{}:Ce,fe=ae.changes,Ee=fe===void 0?{}:fe,Y=Ee.addedRecords,oe=Y===void 0?[]:Y,ve=Ee.deletedRecordIds,ue=ve===void 0?[]:ve,pe=he.filterControls,Se=de.from,ye=de.worksheetId,J=de.control,me=de.recordId,be=de.allowEdit,W=W||he.pageIndex,P=P||he.pageSize,u=(0,o.isUndefined)(u)?he.keywords:u,M({type:"UPDATE_TABLE_STATE",value:{tableLoading:!0}}),Ne.next=11,Z.Z.getRowRelationRows({worksheetId:ye,rowId:me,controlId:J.controlId,pageIndex:W,keywords:u,pageSize:P,getWorksheet:T,getRules:l,filterControls:pe||[],sortId:(he.sortControl||{}).controlId,isAsc:(he.sortControl||{}).isAsc,getType:Se===H.GP.DRAFT?Se:void 0});case 11:xe=Ne.sent,M({type:"UPDATE_RECORDS",records:!de.isTab&&me?xe.data.filter(function(Me){return!(0,o.includes)(ue,Me.rowid)}):xe.data}),M({type:"UPDATE_TABLE_STATE",value:{tableLoading:!1,pageIndex:W,pageSize:P,keywords:u}}),M({type:"UPDATE_TABLE_STATE",value:(0,a.default)({count:xe.count},de.saveSync?{}:{countForShow:xe.count-ue.length+oe.length})});case 15:case"end":return Ne.stop()}},D,m)}));return function(D,M){return G.apply(this,arguments)}}()}function c(m){var v=this;return function(){var W=(0,r.Z)(y().mark(function P(u,l){return y().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:u({type:"UPDATE_TABLE_STATE",value:{pageIndex:m}}),u(I({pageIndex:m}));case 2:case"end":return G.stop()}},P,v)}));return function(P,u){return W.apply(this,arguments)}}()}function q(m){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W=v.from,P=v.allowEdit,u=v.relateWorksheetInfo,l=v.recordId,T=(0,n.kM)(m,l?3:2),G=typeof m.advancedSetting.allowcancel>"u"?!0:m.advancedSetting.allowcancel==="1",D=(m.strDefault||"").split("").map(function(pe){return!!+pe}),M=(0,te.Z)(D,3),se=M[0],ae=M[2],ne=ae&&m.advancedSetting.dismanual==="1",de=Number(m.advancedSetting.fixedcolumncount||0),Ce=!m.disabled&&P&&T.editable,he=Ce&&!(0,o.isEmpty)(u)&&u.allowAdd&&m.enumDefault2!==1&&m.enumDefault2!==11&&!ne&&!(!l&&m.type===51)&&!(0,o.get)(window,"shareState.isPublicForm"),fe=Ce&&!(0,o.isEmpty)(u)&&m.enumDefault2!==10&&m.enumDefault2!==11&&!ne&&m.type!==51,Ee=(0,o.get)(m,"advancedSetting.allowbatch")==="1",Y=(0,o.get)(m,"advancedSetting.allowdelete")==="1",oe=Ce&&Ee&&W!==H.GP.DRAFT,ve=(0,o.get)(m,"advancedSetting.allowexport")==="1",ue=(0,S.p3)((m.advancedSetting||{}).maxcount||void 0);return{fixedColumnCount:de,controlPermission:T,addVisible:he,selectVisible:fe,allowBatchEdit:oe,allowRemoveRelation:G,allowDeleteFromSetting:Y,allowExportFromSetting:ve,searchMaxCount:ue,isHiddenOtherViewRecord:se}}function b(m){return function(v,W){var P=W(),u=P.base,l=u===void 0?{}:u,T=l.from,G=l.allowEdit,D=l.relateWorksheetInfo,M=l.recordId,se=q(m,{from:T,allowEdit:G,relateWorksheetInfo:D,recordId:M});v({type:"UPDATE_BASE",value:(0,a.default)({control:m},se)})}}var k=function(v){return{type:"UPDATE_BASE",value:v}};function ee(){var m=this;return function(){var v=(0,r.Z)(y().mark(function W(P,u){var l,T,G,D,M,se,ae,ne,de,Ce,he,fe,Ee,Y,oe,ve,ue,pe,Se;return y().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(l=u(),!l.initialized){J.next=3;break}return J.abrupt("return");case 3:if(T=l.base,G=T===void 0?{}:T,D=l.tableState,M=G.from,se=G.mode,ae=G.worksheetId,ne=G.control,de=G.recordId,Ce=G.allowEdit,he=D.pageSize,fe=!de,Ee=void 0,!(fe||ne.type===51)){J.next=17;break}return J.next=11,Z.Z.getWorksheetInfo({worksheetId:ne.dataSource,getTemplate:!0,getRules:!0});case 11:if(Ee=J.sent,!(Ee&&Ee.resultCode!==1)){J.next=15;break}return P({type:"UPDATE_TABLE_STATE",value:{error:_l("\u6CA1\u6709\u6743\u9650")}}),J.abrupt("return");case 15:J.next=23;break;case 17:return J.next=19,Z.Z.getRowRelationRows({worksheetId:ae,rowId:de,controlId:ne.controlId,pageIndex:1,pageSize:he,getWorksheet:!0,getRules:!0,getType:M===H.GP.DRAFT?M:void 0}).catch(function(me){P({type:"UPDATE_TABLE_STATE",value:{error:_l("\u6CA1\u6709\u6743\u9650")}})});case 19:Y=J.sent,Ee=Y.worksheet,P({type:"UPDATE_RECORDS",records:Y.data}),P({type:"UPDATE_TABLE_STATE",value:{count:Y.count}});case 23:return J.next=25,Z.Z.getSwitchPermit({worksheetId:ne.dataSource});case 25:return oe=J.sent,J.next=28,Z.Z.getQueryBySheetId({worksheetId:ne.dataSource});case 28:ve=J.sent,ue=(0,U.T0)(ve),pe=q(ne,{from:M,allowEdit:Ce,relateWorksheetInfo:Ee,recordId:de}),Se=(0,o.get)(Ee,"template.controls").concat(V.cU).filter(function(me){return me&&(0,n.kM)((0,a.default)({},me,{fieldPermission:"111",controlPermissions:pe.isHiddenOtherViewRecord?me.controlPermissions:(0,O.m9)(ne.controlPermissions||"111",0,"1")})).visible}),P({type:"UPDATE_CONTROLS",controls:(0,O.zj)(G.appId,Se)}),ne.type===51&&P(i()),P({type:"UPDATE_TABLE_STATE",value:{fixedColumnCount:pe.fixedColumnCount}}),P({type:"UPDATE_BASE",value:(0,a.default)({},pe,{isTab:[String(H.wn.LIST),String(H.wn.TAB_TABLE)].includes((0,o.get)(ne,"advancedSetting.showtype")),isInForm:String(H.wn.TABLE)===(0,o.get)(ne,"advancedSetting.showtype"),relateWorksheetInfo:Ee,sheetSwitchPermit:oe,searchConfig:ue})}),P({type:"UPDATE_LOADING",value:!1}),P({type:"UPDATE_INIT_STATE",value:!0});case 38:case"end":return J.stop()}},W,m)}));return function(W,P){return v.apply(this,arguments)}}()}function re(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=m.doNotResetPageIndex;return function(W,P){var u=P(),l=u.base,T=l===void 0?{}:l,G=u.tableState,D=G===void 0?{}:G,M=T.control,se=M===void 0?{}:M,ae=D.pageIndex,ne=D.filterControls;if(W({type:"RESET"}),se.type===51&&(W({type:"UPDATE_TABLE_STATE",value:{filterControls:ne}}),!ne)){W({type:"UPDATE_RECORDS",records:[]});return}W(I(v?{pageIndex:ae}:{}))}}function ie(m){return function(v,W){v({type:"UPDATE_TABLE_STATE",value:{keywords:m,pageIndex:1}}),v(I())}}function le(m){return{type:"UPDATE_RECORD",newRecord:m}}function E(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W=v.afterRecordId;return function(P,u){var l=u(),T=l.base,G=T===void 0?{}:T;P({type:"APPEND_RECORDS",records:m,recordId:G.recordId,saveSync:G.saveSync,afterRecordId:W})}}function w(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return function(v,W){var P=W(),u=P.base,l=u===void 0?{}:u;v({type:"DELETE_RECORDS",recordIds:typeof m=="string"?[m]:m,saveSync:l.saveSync})}}function K(m){var v=m.cell,W=m.row,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function(u,l){var T=l(),G=T.base,D=G===void 0?{}:G,M=T.controls,se=D.relateWorksheetInfo,ae=D.searchConfig;function ne(Ee){(0,s.SD)({appId:se.appId,worksheetId:se.worksheetId,recordId:W.rowid,cells:Ee,cell:v,rules:se.rules}).then(function(Y){(0,o.isFunction)(P.updateSuccessCb)&&P.updateSuccessCb(Y);var oe=(0,o.find)(M,{controlId:v.controlId});if(oe&&(0,o.includes)([V.DN.MULTI_SELECT,V.DN.DROP_DOWN],v.type)&&/{/.test(v.value)){var ve=(0,a.default)({index:oe.options.length+1,isDeleted:!1,key:(0,o.last)(JSON.parse(Y[v.controlId]))},JSON.parse((0,o.last)(JSON.parse(v.value))));u({type:"UPDATE_CONTROLS",controls:M.map(function(ue){return ue.controlId===v.controlId?(0,a.default)({},ue,{options:[].concat((0,L.Z)(ue.options),[ve])}):ue})})}u(le((0,a.default)({},Y,{allowedit:!0,allowdelete:!0})))})}var de=new C.ZP({data:((0,o.get)(se,"template.controls")||M).filter(function(Ee){return Ee.advancedSetting}).map(function(Ee){return(0,a.default)({},Ee,{value:(W||{})[Ee.controlId]||Ee.value})}),projectId:se.projectId,searchConfig:ae,rules:se.rules||[],onAsyncChange:function(Y){var oe=[];(0,o.isEmpty)(Y.controlIds)?Y.controlId&&(Y.value==="deleteRowIds: all"&&(Y.value=""),oe.push(Y)):Y.controlIds.forEach(function(ve){oe.push({controlId:ve,value:Y.value})}),ne(oe)}});de.updateDataSource(v);var Ce=de.getDataSource(),he=de.getUpdateControlIds(),fe=Ce.filter(function(Ee){return(0,o.includes)(he,Ee.controlId)}).map(function(Ee){return(0,o.pick)(Ee,["controlId","controlName","type","value"])});fe.forEach(function(Ee){Ee.controlId===v.controlId&&(Ee.editType=v.editType)}),ne(fe)}}function N(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=m.newIsAsc,W=m.controlId,P=m.newDefaultScrollLeft;return function(u){u({type:"UPDATE_TABLE_STATE",value:{pageIndex:1,sortControl:(0,o.isUndefined)(v)?{}:{controlId:W,isAsc:v},defaultScrollLeft:P}}),u(I({pageIndex:1}))}}function F(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{type:"UPDATE_TABLE_STATE",value:m}}function h(){var m,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],W=arguments[1],P=v.filter(function(u){return u.attribute===1})||{};return{name:P.value,sid:W,type:8,sourcevalue:p()((0,a.default)({},o.assign.apply(void 0,(0,L.Z)(v.map(function(u){return(0,ce.default)({},u.controlId,u.type===29&&(0,o.isObject)(u.value)&&u.value.records?p()(u.value.records.map(function(l){return{sid:l.rowid,sourcevalue:p()(l)}})):u.value)}))),(m={},(0,ce.default)(m,P.controlId,P.value),(0,ce.default)(m,"rowid",W),m)))}}function z(m){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W=v.openRecord,P=W===void 0?function(){}:W;return function(u,l){var T=l(),G=T.base,D=G===void 0?{}:G,M=T.controls,se=D.worksheetId,ae=D.control,ne=D.recordId,de=D.relateWorksheetInfo,Ce=D.formData;(0,A.GE)({rowId:m.rowid,worksheetId:de.worksheetId,columns:M}).then(function(he){var fe=he.defaultData,Ee=he.defcontrols;(0,j.Z)({worksheetId:ae.dataSource,masterRecord:{rowId:ne,controlId:ae.controlId,worksheetId:se},defaultRelatedSheet:ae.type!==51&&{worksheetId:se,relateSheetControlId:ae.controlId,value:h(Ce,ne)},directAdd:!0,showFillNext:!0,defaultFormData:fe,defaultFormDataEditable:!0,writeControls:Ee,onAdd:function(oe){oe&&u(E([oe]))},openRecord:P})})}}function X(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=m.updateWorksheetControls,W=m.columns,P=m.columnWidthsOfSetting;return function(u,l){var T=l(),G=T.base,D=G===void 0?{}:G,M=T.tableState,se=M===void 0?{}:M,ae=D.worksheetId,ne=se.sheetColumnWidths,de=se.fixedColumnCount,Ce=se.sheetHiddenColumnIds,he=(0,o.omit)(D.control,["relationControls"]);if(!(0,o.isEmpty)(ne)){var fe=p()(W.map(function(Y){return(0,a.default)({},P,ne)[Y.controlId]||160}));he.advancedSetting.widths=fe}if((0,o.isUndefined)(de)||(he.advancedSetting.fixedcolumncount=de),(0,o.isEmpty)(Ce)||(he.showControls=he.showControls.filter(function(Y){return!(0,o.includes)(Ce,Y)})),(0,o.get)(he,"advancedSetting.resultfilters")){var Ee=safeParse((0,o.get)(he,"advancedSetting.resultfilters"),"array");he.advancedSetting.resultfilters=(0,o.isEmpty)(Ee)?"":p()(Ee.map(f.QZ))}Z.Z.editWorksheetControls({worksheetId:ae,controls:[(0,a.default)({},(0,o.pick)(he,["controlId","advancedSetting"]),{editattrs:["advancedSetting"]})]}).then(function(Y){(0,o.isFunction)(v)&&v([he]),u(F({layoutChanged:!1}))})}}function B(m){var v=this;return function(){var W=(0,r.Z)(y().mark(function P(u,l){var T,G,D,M,se,ae,ne,de,Ce,he,fe,Ee,Y,oe,ve,ue,pe;return y().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(T=l(),G=T.base,D=G===void 0?{}:G,M=T.tableState,se=M===void 0?{}:M,ae=D.from,ne=D.saveSync,de=D.recordId,Ce=D.appId,he=D.viewId,fe=D.worksheetId,Ee=D.control,Y=se.count,oe=se.pageSize,ve=se.allIsSelected,ue=se.instanceId,pe=se.workId,m&&!(0,o.isArray)(m)&&(m=[m]),!(de&&ae!==H.GP.DRAFT&&ne)){ye.next=17;break}return ye.prev=5,ye.next=8,(0,s.A2)({worksheetId:fe,appId:Ce,viewId:he,recordId:de,instanceId:ue,workId:pe,controlId:Ee.controlId,isAdd:!1,recordIds:m,updateType:ae});case 8:u(w(m)),u(re({doNotResetPageIndex:!0})),ye.next=15;break;case 12:ye.prev=12,ye.t0=ye.catch(5),alert(_l("\u53D6\u6D88\u5173\u8054\u5931\u8D25\uFF01"),2);case 15:ye.next=18;break;case 17:u(w(m));case 18:u({type:"UPDATE_TABLE_STATE",value:{selectedRowIds:[],isBatchEditing:!1}});case 19:case"end":return ye.stop()}},P,v,[[5,12]])}));return function(P,u){return W.apply(this,arguments)}}()}function x(m){var v=this;return function(){var W=(0,r.Z)(y().mark(function P(u,l){var T,G,D,M,se,ae,ne,de,Ce,he,fe,Ee;return y().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(T=l(),G=T.base,D=G===void 0?{}:G,M=D.from,se=D.saveSync,ae=D.recordId,ne=D.appId,de=D.viewId,Ce=D.worksheetId,he=D.control,fe=D.instanceId,Ee=D.workId,m&&!(0,o.isArray)(m)&&(m=[m]),!(ae&&M!==H.GP.DRAFT&&se)){oe.next=16;break}return oe.prev=4,oe.next=7,(0,s.A2)({worksheetId:Ce,appId:ne,viewId:de,recordId:ae,controlId:he.controlId,isAdd:!0,recordIds:m.map(function(ve){return ve.rowid}),updateType:M,instanceId:fe,workId:Ee});case 7:u(E(m)),alert(_l("\u6DFB\u52A0\u8BB0\u5F55\u6210\u529F\uFF01")),oe.next=14;break;case 11:oe.prev=11,oe.t0=oe.catch(4),alert(_l("\u6DFB\u52A0\u8BB0\u5F55\u5931\u8D25\uFF01"),2);case 14:oe.next=17;break;case 16:u(E(m));case 17:case"end":return oe.stop()}},P,v,[[4,11]])}));return function(P,u){return W.apply(this,arguments)}}()}function Q(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=m.recordIds,W=v===void 0?[]:v;return function(P,u){var l=u(),T=l.base,G=T===void 0?{}:T,D=l.records,M=l.tableState,se=M===void 0?{}:M,ae=G.relateWorksheetInfo,ne=se.count,de=se.pageSize,Ce=W.filter(function(he){var fe=(0,o.find)(D,{rowid:he});return fe&&fe.allowdelete});if(!Ce.length){alert(_l("\u6CA1\u6709\u6709\u6743\u9650\u5220\u9664\u7684\u8BB0\u5F55"),3);return}(0,s.JS)({worksheetId:ae.worksheetId,recordIds:Ce}).then(function(he){P(w(Ce)),Ce.length<W.length&&alert(_l("\u5B58\u5728\u65E0\u6743\u9650\u5220\u9664\u7684\u8BB0\u5F55\uFF0C\u6709\u6743\u9650\u7684\u5DF2\u5220\u9664"),3),P(F({selectedRowIds:[],isBatchEditing:!1})),ne>de&&P(re())}).catch(function(he){alert(_l("\u5220\u9664\u5931\u8D25\uFF01"),3)})}}function i(){return function(m,v){var W=v(),P=W.base,u=P===void 0?{}:P,l=W.controls,T=u.control,G=u.formData,D=u.recordId,M=(0,f.zK)({control:(0,a.default)({},T,{relationControls:l,recordId:D}),formData:G,filterKey:"resultfilters"});m(F({filterControls:M})),m(M?I({pageIndex:1,keywords:""}):{type:"UPDATE_RECORDS",records:[]})}}},89343:(lt,Te,t)=>{"use strict";t.d(Te,{R:()=>H,ZP:()=>C});var ce=t(85315),g=t(88239),p=t(52945),L=t.n(p),te=t(22010),R=t(96486),y=t.n(R);function a(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments[1];switch(n.type){case"UPDATE_LOADING":return n.value;default:return O}}function r(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments[1];switch(n.type){case"UPDATE_BASE":return L()({},O,n.value);default:return O}}var o={pageIndex:1,pageSize:20,count:0};function d(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:(0,g.default)({},o),n=arguments[1];if((0,R.includes)(["APPEND_RECORDS","DELETE_RECORDS"],n.type)&&!n.saveSync){var s=typeof O.countForShow>"u"?O.count:O.countForShow;return n.type==="APPEND_RECORDS"?(0,g.default)({},O,{countForShow:s+n.records.length}):n.type==="DELETE_RECORDS"?(0,g.default)({},O,{countForShow:s-n.recordIds.length}):(0,g.default)({},O)}switch(n.type){case"UPDATE_RECORDS":return(0,g.default)({},O,{count:n.records.length});case"UPDATE_TABLE_STATE":return L()({},O,n.value);case"APPEND_RECORDS":return(0,g.default)({},O,{count:O.count+n.records.length});case"DELETE_RECORDS":return(0,g.default)({},O,{count:O.count-n.recordIds.length});case"RESET":return(0,g.default)({},o);default:return O}}function Z(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments[1];switch(n.type){case"UPDATE_CONTROLS":return n.controls;default:return O}}var H={addedRecordIds:[],deletedRecordIds:[],addedRecords:[]};function U(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:(0,R.cloneDeep)(H),n=arguments[1];if(n.saveSync&&(0,R.includes)(["APPEND_RECORDS","DELETE_RECORDS"],n.type))return(0,g.default)({},O,{changed:!0});var s=(n.records||[]).map(function(j){return(0,g.default)({},j,{isNew:!0})});switch(n.type){case"APPEND_RECORDS":return(0,g.default)({},O,{addedRecordIds:(0,R.uniq)(O.addedRecordIds.concat(s.map(function(j){return j.rowid}))),addedRecords:(0,R.uniqBy)(O.addedRecords.concat(s),"rowid")});case"DELETE_RECORDS":return(0,g.default)({},O,{addedRecordIds:O.addedRecordIds.filter(function(j){return!(0,R.includes)(n.recordIds,j)}),addedRecords:O.addedRecords.filter(function(j){return!(0,R.includes)(n.recordIds,j.rowid)}),deletedRecordIds:(0,R.uniq)(O.deletedRecordIds.concat(n.recordIds.filter(function(j){return!(0,R.includes)(O.addedRecordIds,j)})))});case"RESET":return(0,R.cloneDeep)(H);default:return O}}function f(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments[1],s=void 0;switch(n.type){case"UPDATE_RECORDS":return n.records;case"UPDATE_RECORD":return O.map(function(A){return A.rowid===(0,R.get)(n,"newRecord.rowid")?n.newRecord:A});case"APPEND_RECORDS":if(s=n.records,!n.saveSync&&n.recordId)return O;if(n.afterRecordId){var j=(0,R.findIndex)(O,function(A){return A.rowid===n.afterRecordId});return j<0?O:[].concat((0,ce.Z)(O.slice(0,j+1)),(0,ce.Z)(s),(0,ce.Z)(O.slice(j+1)))}else return s.concat(O);case"DELETE_RECORDS":return O.filter(function(A){return!(0,R.includes)(n.recordIds,A.rowid)});default:return O}}function V(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments[1];switch(n.type){case"UPDATE_INIT_STATE":return n.value;default:return O}}const C=(0,te.UY)({initialized:V,loading:a,base:r,controls:Z,records:f,tableState:d,changes:U})},67062:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>a});var ce=t(22010);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(89343);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(82425);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(53894);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(91247);var R=t(96486),y=t.n(R);function a(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=o.from,Z=o.isCharge,H=o.appId,U=o.recordId,f=o.saveSync,V=f===void 0?!0:f,C=o.allowEdit,O=o.worksheetId,n=o.formData,s=n===void 0?[]:n,j=o.instanceId,A=o.pageSize,S=A===void 0?20:A,I=o.workId,c=(0,ce.MT)(g.ZP,(0,ce.qC)((0,ce.md)(L.Z)));return c.version=(0,te.Z)(),c.dispatch({type:"UPDATE_BASE",value:{from:d,isCharge:Z,worksheetId:O,control:r,appId:H,recordId:U,allowEdit:C&&!(0,R.get)(window,"shareState.isPublicWorkflowRecord")&&!(r&&r.disabled),formData:s,instanceId:j,workId:I,saveSync:V,initialCount:Number(r.value)}}),c.dispatch({type:"UPDATE_TABLE_STATE",value:{pageSize:S}}),c.cancelChange=function(){c.dispatch({type:"RESET"}),c.dispatch((0,p.bi)())},c.init=function(){return c.dispatch((0,p.S1)())},c}},57559:(lt,Te,t)=>{"use strict";t.d(Te,{$:()=>I});var ce=t(42057),g=t(12424),p=t(88239),L=t(86735),te=t(67294),R=t(45697),y=t.n(R),a=t(71893),r=t(4557);if(!/^(1887|7596|7798)$/.test(t.j))var o=t(1952);var d=t(24666),Z=t(96486),H=t.n(Z),U=(0,L.Z)([`
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  .tableOperate {
    padding: 0 24px 8px !important;
    height: 44px;
  }
`],[`
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  .tableOperate {
    padding: 0 24px 8px !important;
    height: 44px;
  }
`]),f=(0,L.Z)([`
  color: #9e9e9e;
  cursor: pointer;
  display: inline-block;
  height: 28px;
  font-size: 20px;
  line-height: 28px;
  padding: 0 4px;
  border-radius: 5px;
  &:hover {
    background: #f7f7f7;
  }
`],[`
  color: #9e9e9e;
  cursor: pointer;
  display: inline-block;
  height: 28px;
  font-size: 20px;
  line-height: 28px;
  padding: 0 4px;
  border-radius: 5px;
  &:hover {
    background: #f7f7f7;
  }
`]),V=(0,L.Z)([`
  height: 50px;
  padding: 0 24px;
  display: flex;
  align-items: center;
  flex-shrink: 0;
  .main {
    font-size: 17px;
    color: #333;
    font-weight: bold;
    width: 100%;
  }
  .split {
    font-size: 16px;
    margin: 0 8px;
    color: #9e9e9e;
  }
  .sec {
    font-size: 17px;
    color: #757575;
    max-width: 600px;
    &:hover {
      color: #333;
    }
  }
  .openInNewTab {
    cursor: pointer;
    color: #9e9e9e;
    font-size: 14px;
    margin-left: 6px;
    line-height: 18px;
    height: 18px;
  }
  .flexCenter {
    display: flex;
    align-items: center;
  }
`],[`
  height: 50px;
  padding: 0 24px;
  display: flex;
  align-items: center;
  flex-shrink: 0;
  .main {
    font-size: 17px;
    color: #333;
    font-weight: bold;
    width: 100%;
  }
  .split {
    font-size: 16px;
    margin: 0 8px;
    color: #9e9e9e;
  }
  .sec {
    font-size: 17px;
    color: #757575;
    max-width: 600px;
    &:hover {
      color: #333;
    }
  }
  .openInNewTab {
    cursor: pointer;
    color: #9e9e9e;
    font-size: 14px;
    margin-left: 6px;
    line-height: 18px;
    height: 18px;
  }
  .flexCenter {
    display: flex;
    align-items: center;
  }
`]),C=(0,L.Z)([`
  padding: 0 24px 80px;
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
`],[`
  padding: 0 24px 80px;
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
`]),O=a.ZP.div(U),n=a.ZP.span(f),s=a.ZP.div(V),j=a.ZP.div(C);function A(c){var q=c.addRefreshEvents,b=c.appId,k=c.worksheetId,ee=c.recordId,re=c.allowEdit,ie=c.formdata,le=c.control,E=c.onUpdateCount;return te.createElement(d.Z,{mode:"dialog",appId:b,useHeight:!0,allowEdit:re,control:(0,p.default)({},le,{addRefreshEvents:q}),recordId:ee,worksheetId:k,formData:ie,onCountChange:E,pageSize:50})}A.propTypes={allowEdit:y().bool,appId:y().string,control:y().shape({}),formdata:y().arrayOf(y().shape({})),recordId:y().string,worksheetId:y().string,onUpdateCount:y().func,addRefreshEvents:y().func};function S(c){var q=c.appId,b=c.openFrom,k=c.worksheetId,ee=c.recordId,re=c.control,ie=c.formdata,le=c.allowEdit,E=c.onClose,w=c.reloadTable,K=w===void 0?function(){}:w,N=c.onUpdateCount,F=N===void 0?function(){}:N,h=(0,te.useRef)({}),z=(0,te.useState)(b!=="cell"),X=(0,g.Z)(z,2),B=X[0],x=X[1],Q=window.innerWidth-32*2>1600?1600:window.innerWidth-32*2;return(0,r.Z)("e",function(i){(window.isMacOs?i.metaKey:i.ctrlKey)&&(x(function(m){return!m}),i.preventDefault(),i.stopPropagation())}),(0,r.Z)("R",function(i){!i.ctrlKey||!i.shiftKey||(i.preventDefault(),i.stopPropagation(),(0,Z.get)(h,"current."+re.controlId)&&(0,Z.get)(h,"current."+re.controlId)())}),te.createElement(ce.Z,{visible:!0,keyboard:!0,type:"fixed",verticalAlign:"bottom",width:Q,closeSize:50,closeIcon:te.createElement("span",null),bodyStyle:{padding:0,position:"relative"},fullScreen:B,style:{transition:"none"},onCancel:E},te.createElement(O,null,te.createElement(s,null,te.createElement("div",{className:"main ellipsis"},re.controlName),te.createElement("div",{className:"flex"}),te.createElement(n,{className:"mRight10 ThemeHoverColor3","data-tip":_l("\u5237\u65B0(Ctrl + Shift + R)"),onClick:function(){(0,Z.get)(h,"current."+re.controlId)&&(0,Z.get)(h,"current."+re.controlId)()}},te.createElement("i",{className:"icon icon-task-later"})),te.createElement(n,{className:"mRight10 ThemeHoverColor3","data-tip":B?_l("\u9000\u51FA%0",window.isMacOs?"(\u2318 + E)":"(Ctrl + E)"):_l("\u5168\u5C4F%0",window.isMacOs?"(\u2318 + E)":"(Ctrl + E)"),onClick:function(){x(!B)}},te.createElement("i",{className:"icon icon-"+(B?"worksheet_narrow":"worksheet_enlarge")})),te.createElement(n,{className:"ThemeHoverColor3","data-tip":_l("\u5173\u95ED(Esc)"),onClick:function(){K(),E()}},te.createElement("i",{className:"icon icon-close"}))),te.createElement(j,null,te.createElement(A,(0,p.default)({appId:q,worksheetId:k,recordId:ee,allowEdit:le,formdata:ie,control:re,onUpdateCount:F},{addRefreshEvents:function(m,v){h.current[m]=v}})))))}S.propTypes={worksheetId:y().string,recordId:y().string,allowEdit:y().bool,appId:y().string,control:y().shape({}),formdata:y().arrayOf(y().shape({})),reloadTable:y().func,onClose:y().func,onUpdateCount:y().func};var I=function(q){return(0,o.Z)(S,q)}},88565:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>V});var ce=t(85105),g=t.n(ce),p=t(99663),L=t(22600),te=t(49135),R=t(93196),y=t(67294),a=t(45697),r=t.n(a),o=t(93967),d=t.n(o),Z=t(70264),H=t(15577),U,f,V=(f=U=function(C){(0,R.default)(O,C);function O(n){(0,p.default)(this,O);var s=(0,te.default)(this,(O.__proto__||g()(O)).call(this,n));return s.state={isFocus:!1},s}return(0,L.default)(O,[{key:"componentWillReceiveProps",value:function(s){typeof s.active<"u"&&this.setState({isFocus:s.active}),this.props.viewId!==s.viewId&&this.setState({value:"",isFocus:!1})}},{key:"render",value:function(){var s=this,j=this.props,A=j.inputWidth,S=j.focusedClass,I=j.style,c=j.searchIcon,q=this.state,b=q.value,k=q.isFocus,ee=this.props,re=ee.className,ie=ee.keyWords,le=ee.onOk,E=ee.onClear,w=ee.onFocus,K=ee.onBlur,N=ee.placeholder;return y.createElement("div",{className:d()("searchInputComp",re,{default:!k,flex:k&&(0,H.Q9)()},k?S:""),style:I},y.createElement("div",{className:"inputCon"},y.createElement(Z.Z,{disable:k,popupPlacement:"bottom",text:y.createElement("span",null,N||_l("\u641C\u7D22"))},!k&&c?y.createElement("span",{onClick:function(){s.setState({isFocus:!0},function(){$(s.inputEl).focus()})}},c):y.createElement("i",{className:"icon icon-search Gray_9e",onClick:function(){s.setState({isFocus:!0},function(){$(s.inputEl).focus()})}})),y.createElement("input",{ref:function(h){s.inputEl=h},placeholder:N||_l("\u641C\u7D22"),type:(0,H.Q9)()?"search":"text",value:b,style:k&&A?{width:A}:{},onKeyUp:function(h){h.keyCode===13&&le(h.target.value)},onChange:function(h){s.setState({value:h.target.value})},onFocus:function(){s.setState({isFocus:!0}),w()},onBlur:function(){!b&&!ie&&(s.setState({isFocus:!1}),K())}}),y.createElement("i",{className:d()("icon icon-cancel Hand Gray_9e",{none:!b}),onClick:function(){s.setState({value:"",isFocus:!1},function(){E()})}})))}}]),O}(y.Component),U.propTypes={active:r().bool,className:r().string,focusedClass:r().string,style:r().shape({}),placeholder:r().string,onClear:r().func,onOk:r().func,onFocus:r().func,onBlur:r().func},U.defaultProps={style:{},onClear:function(){},onFocus:function(){},onBlur:function(){}},f)},21433:(lt,Te,t)=>{"use strict";if(t.d(Te,{Z:()=>g}),!/^(1887|7596|7798)$/.test(t.j))var ce=t(88565);const g=/^(1887|7596|7798)$/.test(t.j)?null:ce.Z},22344:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>K});var ce=t(42057),g=t(79221),p=t(88239),L=t(85315),te=t(42723),R=t(3540),y=t(33867),a=t(12424),r=t(86735),o=t(67294),d=t(45697),Z=t(71893),H=t(45231),U=t(8765),f=t(96486),V=t.n(f),C=(0,r.Z)([`
  padding: 10px 0;
  display: grid;
  grid-gap: 12px;
`],[`
  padding: 10px 0;
  display: grid;
  grid-gap: 12px;
`]),O=Z.ZP.div(C);function n(N){var F=N.col,h=F===void 0?3:F,z=N.records,X=N.controls,B=N.control,x=N.viewId,Q=N.disabled,i=N.allowRemove,m=N.isCharge,v=N.getCoverUrl,W=v===void 0?function(){}:v,P=N.sourceEntityName,u=N.allowlink,l=N.onCardClick,T=l===void 0?function(){}:l,G=N.onDelete,D=G===void 0?function(){}:G,M=(0,f.get)(N,"control.showControls")||[];return o.createElement(O,{style:{gridTemplateColumns:"repeat("+h+", minmax(200px, 1fr))"}},z.map(function(se,ae){return o.createElement(U.Z,{style:{margin:0},key:ae,controls:M.map(function(ne){return(0,f.find)(X,function(de){return de.controlId===ne})}).filter(function(ne){return ne&&ne.attribute!==1}),parentControl:B,data:se,viewId:x,disabled:Q||!i,isCharge:m,cover:W(se),allowlink:u,sourceEntityName:P,onClick:function(){return T(se)},onDelete:function(){return D(se)}})}))}n.propTypes={col:d.number,records:(0,d.arrayOf)((0,d.shape)({})),controls:(0,d.arrayOf)((0,d.shape)({})),control:(0,d.shape)({}),viewId:d.string,disabled:d.bool,isCharge:d.bool,coverUrl:d.string,sourceEntityName:d.string,allowlink:d.string,onClick:d.func,onDelete:d.func};var s=t(68190),j=t.n(s),A=(0,r.Z)([`
  font-size: 16px;
  font-weight: 600;
  color: #333;
  margin-left: 24px;
`],[`
  font-size: 16px;
  font-weight: 600;
  color: #333;
  margin-left: 24px;
`]),S=(0,r.Z)([`
  display: flex;
  margin: 16px 24px 0px;
  align-items: center;
  border-radius: 3px;
  border: 1px solid #dddddd;
  padding: 0 10px;
  .ming.Input {
    padding: 0 6px;
    border: none;
  }
  input::placeholder {
    color: #bdbdbd;
  }
  &.focus {
    border-color: #2196f3;
  }
`],[`
  display: flex;
  margin: 16px 24px 0px;
  align-items: center;
  border-radius: 3px;
  border: 1px solid #dddddd;
  padding: 0 10px;
  .ming.Input {
    padding: 0 6px;
    border: none;
  }
  input::placeholder {
    color: #bdbdbd;
  }
  &.focus {
    border-color: #2196f3;
  }
`]),I=(0,r.Z)([`
  padding: 10px 24px;
  flex: 1;
  overflow: auto;
`],[`
  padding: 10px 24px;
  flex: 1;
  overflow: auto;
`]),c=(0,r.Z)([`
  font-size: 14px;
  color: #9e9e9e;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  img {
    width: 130px;
    margin-bottom: 14px;
  }
`],[`
  font-size: 14px;
  color: #9e9e9e;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  img {
    width: 130px;
    margin-bottom: 14px;
  }
`]),q=(0,r.Z)([`
  display: inline-block;
  cursor: pointer;
  height: 29px;
  line-height: 29px;
  padding: 0 12px;
  color: #2196f3;
  border-radius: 3px;
  font-size: 13px;
  .loading {
    margin-right: 6px;
    .icon {
      display: inline-block;
      animation: rotate 1.2s linear infinite;
    }
  }
  &:hover {
    background: #f8f8f8;
  }
`],[`
  display: inline-block;
  cursor: pointer;
  height: 29px;
  line-height: 29px;
  padding: 0 12px;
  color: #2196f3;
  border-radius: 3px;
  font-size: 13px;
  .loading {
    margin-right: 6px;
    .icon {
      display: inline-block;
      animation: rotate 1.2s linear infinite;
    }
  }
  &:hover {
    background: #f8f8f8;
  }
`]),b=(0,r.Z)([`
  margin-top: 20px;
  height: 38px;
  border-radius: 38px;
  background-color: #2196f3;
  padding: 0 24px;
  color: #fff;
  display: flex;
  align-items: center;
  cursor: pointer;
  &:hover {
    background: #0c88eb;
  }
`],[`
  margin-top: 20px;
  height: 38px;
  border-radius: 38px;
  background-color: #2196f3;
  padding: 0 24px;
  color: #fff;
  display: flex;
  align-items: center;
  cursor: pointer;
  &:hover {
    background: #0c88eb;
  }
`]),k=Z.ZP.div(A),ee=Z.ZP.div(S),re=Z.ZP.div(I),ie=Z.ZP.div(c),le=Z.ZP.div(q),E=Z.ZP.div(b);function w(N){var F=N.enableClear,h=F===void 0?!0:F,z=N.onChange,X=z===void 0?function(){}:z,B=(0,o.useState)(""),x=(0,a.Z)(B,2),Q=x[0],i=x[1],m=(0,o.useState)(!1),v=(0,a.Z)(m,2),W=v[0],P=v[1],u=(0,o.useRef)();return(0,o.useEffect)(function(){u.current.focus()},[]),o.createElement(ee,{className:W?"focus":""},o.createElement(y.Z,{icon:"search",className:"Gray_9d Font18"}),o.createElement(R.Z,{value:Q,manualRef:function(T){u.current=T},placeholder:_l("\u641C\u7D22"),className:"flex",onFocus:function(){return P(!0)},onBlur:function(){return P(!1)},onChange:function(T){i(T),X(T)}}),h&&Q&&o.createElement(y.Z,{icon:"cancel",className:"Hand Gray_9d Font16",onClick:function(){u.current.value="",X(""),i("")}}))}function K(N){var F=N.from,h=N.allowAdd,z=N.title,X=N.worksheetId,B=N.recordId,x=N.controlId,Q=N.control,i=N.controls,m=i===void 0?[]:i,v=N.hiddenRecordIds,W=v===void 0?[]:v,P=N.sourceEntityName,u=N.getCoverUrl,l=N.onlySearchLoad,T=l===void 0?!0:l,G=N.onCancel,D=N.onDelete,M=N.onCardClick,se=N.onNewRecord,ae=se===void 0?function(){}:se,ne=(0,te.Z)(N,["from","allowAdd","title","worksheetId","recordId","controlId","control","controls","hiddenRecordIds","sourceEntityName","getCoverUrl","onlySearchLoad","onCancel","onDelete","onCardClick","onNewRecord"]),de=(0,o.useRef)(),Ce=(0,o.useState)(""),he=(0,a.Z)(Ce,2),fe=he[0],Ee=he[1],Y=(0,o.useState)([]),oe=(0,a.Z)(Y,2),ve=oe[0],ue=oe[1],pe=(0,o.useState)(!T),Se=(0,a.Z)(pe,2),ye=Se[0],J=Se[1],me=(0,o.useState)(!1),be=(0,a.Z)(me,2),xe=be[0],Ae=be[1],Ne=(0,o.useState)(0),Me=(0,a.Z)(Ne,2),Fe=Me[0],Be=Me[1],we=(0,o.useState)({pageIndex:1,worksheetId:X,rowId:B,controlId:x,pageSize:20}),Ie=(0,a.Z)(we,2),ge=Ie[0],Re=Ie[1],Pe=(0,o.useCallback)((0,f.debounce)(function(We){var Ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};J(!0),F===21&&(We.getType=21),H.Z.getRowRelationRows(We).then(function(it){if(J(!1),it.resultCode!==1){Ae(!0);return}Be(it.count),ue(function(Ge){return V().uniqBy([].concat((0,L.Z)(Ge),(0,L.Z)(it.data||[])),"rowid")}),Ve(it.data||[])})},200),[]);function ke(){Pe((0,p.default)({},ge,{pageIndex:1}),function(We){We.length<20||(Re(function(Ve){return(0,p.default)({},Ve,{pageIndex:2})}),Pe((0,p.default)({},ge,{pageIndex:2})))})}return(0,o.useEffect)(function(){T||ke()},[]),o.createElement(ce.Z,{visible:!0,className:"searchRelateRecordsModal",type:"fixed",footer:null,onCancel:G,width:1095,bodyStyle:{padding:"14px 0px",display:"flex",flexDirection:"column"}},o.createElement(k,null,z),!xe&&o.createElement(w,{className:"flex",onChange:function(Ve){if(Ee(Ve),ue([]),!(Ve||"").trim()){if(T)return;ke();return}J(!0),Pe((0,p.default)({},ge,{keyWords:Ve,pageIndex:1}))}}),o.createElement(re,{ref:de,onScroll:function(){de.current.scrollHeight-de.current.scrollTop-de.current.clientHeight<100&&!ye&&ve.length<Fe&&(Re(function(Ve){return(0,p.default)({},Ve,{pageIndex:Ve.pageIndex+1})}),J(!0),Pe((0,p.default)({keyWords:fe},ge,{pageIndex:ge.pageIndex+1})))}},ye&&!ve.length&&o.createElement("div",{style:{padding:10}},o.createElement(g.Z,{style:{flex:1},direction:"column",widths:["30%","40%","90%","60%"],active:!0,itemStyle:{marginBottom:"10px"}})),!ye&&!fe&&!ve.length&&(xe?o.createElement(ie,null,_l("\u65E0\u6743\u9650")):o.createElement(ie,null,o.createElement("img",{src:j(),alt:""}),_l("\u8BF7\u8F93\u5165\u5173\u952E\u8BCD\u8FDB\u884C\u641C\u7D22"))),!ye&&!!fe&&!ve.length&&o.createElement(ie,null,o.createElement("img",{src:j(),alt:""}),o.createElement("div",{className:"Font16 Gray_9e"},_l("\u6CA1\u6709\u641C\u7D22\u7ED3\u679C")),h&&o.createElement(E,{onClick:function(Ve){ae(),G()}},o.createElement("i",{className:"Icon icon icon-plus Font13 mRight5 White"}),_l("\u65B0\u5EFA%0",P))),!!ve.length&&o.createElement(o.Fragment,null,o.createElement(n,(0,p.default)({control:Q,controls:m,records:ve.filter(function(We){return!V().includes(W,We.rowid)}),getCoverUrl:u,onCardClick:M,onDelete:function(Ve){D(Ve),ue(function(it){return it.filter(function(Ge){return Ge.rowid!==Ve.rowid})})}},ne)))))}K.propTypes={title:d.string,worksheetId:d.string,controlId:d.string,recordId:d.string,getCoverUrl:d.func,onCancel:d.func}},92054:(lt,Te,t)=>{"use strict";if(t.d(Te,{P:()=>L}),!/^(1887|7596|7798)$/.test(t.j))var ce=t(22344);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(1952);var p=null;function L(te){return(0,g.Z)(ce.Z,te)}},91555:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>x,K:()=>Q});var ce=t(42057),g=t(66215),p=t(94942),L=t.n(p),te=t(88239),R=t(36803),y=t(12424),a=t(67294),r=t(45697),o=t.n(r),d=t(1952),Z=t(42541),H=t(60866),U=t(67272),f=t(51024),V=t(10524),C=t(31059),O=t(34279),n=t(64749),s=t(6538),j=t(14321),A=t(33867),S=t(30381),I=t.n(S),c=t(96486),q=t.n(c),b=t(43792),k=t(15577),ee="9999-12-31 23:59:59",re=[{label:_l("\u6C38\u4E45\u6709\u6548"),value:ee,getValidTime:function(){return ee}},{label:_l("1\u5C0F\u65F6\u540E"),getSubLabel:function(){var m=I()(),v=m.add(1,"h");return(I()(v).isSame(m,"d")?_l("\u4ECA\u5929"):_l("\u660E\u5929"))+" "+v.format("HH:mm")},getValidTime:function(){return I()().add(1,"h").format("YYYY-MM-DD HH:mm")},value:1},{label:_l("1\u5929\u540E"),getSubLabel:function(){return I()().add(1,"d").format("DD"+_l("\u65E5")+" HH:mm")},getValidTime:function(){return I()().add(1,"d").format("YYYY-MM-DD HH:mm")},value:2},{label:_l("3\u5929\u540E"),getSubLabel:function(){return I()().add(3,"d").format("DD"+_l("\u65E5")+" HH:mm")},getValidTime:function(){return I()().add(3,"d").format("YYYY-MM-DD HH:mm")},value:3},{label:_l("7\u5929\u540E"),getSubLabel:function(){return I()().add(7,"d").format("MM"+_l("\u6708")+"DD"+_l("\u65E5")+" HH:mm")},getValidTime:function(){return I()().add(7,"d").format("YYYY-MM-DD HH:mm")},value:4},{label:_l("\u81EA\u5B9A\u4E49"),value:5}];function ie(i){var m=i.data,v=i.onChange,W=m||{},P=W.validTime,u=W.password,l=(0,a.useState)(ee),T=(0,y.Z)(l,2),G=T[0],D=T[1],M=(0,a.useState)(null),se=(0,y.Z)(M,2),ae=se[0],ne=se[1],de=(0,a.useState)(!1),Ce=(0,y.Z)(de,2),he=Ce[0],fe=Ce[1],Ee=(0,a.useState)(u),Y=(0,y.Z)(Ee,2),oe=Y[0],ve=Y[1],ue=P===ee||q().isEmpty(P);(0,a.useEffect)(function(){G===5&&fe(!0)},[G]);var pe=function(){if(oe.length<4||oe.length>8){alert(_l("\u5BC6\u7801\u957F\u5EA64~8\u4F4D"),2);return}if(/^[0-9]+$/.test(oe)||/^[A-Za-z]+$/.test(oe)){alert(_l("\u5BC6\u7801\u5FC5\u987B\u5305\u542B\u6570\u5B57\u6216\u8005\u5B57\u6BCD"),2);return}v({password:oe})};return a.createElement("div",{className:"flexRow alignItemsCenter mTop16 validityDateConfig mBottom8"},a.createElement("div",{className:"flex flexRow alignItemsCenter mRight10"},a.createElement("div",{className:"mRight8"},_l("\u94FE\u63A5\u6709\u6548\u671F")),G===5?a.createElement(j.default,{showTime:{format:"HH:mm"},showNow:!1,autoFocus:!0,suffixIcon:null,locale:b.Z,open:he,onOpenChange:fe,format:"YYYY"+_l("\u5E74")+"MM"+_l("\u6708")+"DD"+_l("\u65E5")+" HH:mm",value:ae,clearIcon:a.createElement(A.Z,{icon:"cancel1",className:"Gray_bd Font17"}),disabledDate:function(ye){return ye?ye<I()():!1},onChange:function(ye){q().isNull(ye)?(D(ee),v({validTime:ee}),ne(null)):(ne(ye),v({validTime:ye.format("YYYY-MM-DD HH:mm")}))}}):a.createElement(n.default,{value:ue?ee:P?I()(P).format("YYYY-MM-DD HH:mm"):null,className:"dateSelect",suffixIcon:a.createElement(A.Z,{icon:"expand_more",className:"Gray_9e Font20"}),allowClear:!!P,clearIcon:a.createElement(A.Z,{icon:"cancel1",className:"Gray_bd Font17"}),onChange:function(){var ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ee,J=q().find(re,{value:ye});if(J&&J.getValidTime){var me=J.getValidTime();v({validTime:me})}else v({validTime:""});D(ye)}},re.map(function(Se){return a.createElement(n.default.Option,{key:Se.value,value:Se.value,className:"validityDateOption pLeft20 pRight20"},a.createElement("div",{className:"Font13 ellipsis"},a.createElement("span",null,Se.label),Se.getSubLabel&&a.createElement("span",{className:"Gray_9e mLeft5"},"( ",Se.getSubLabel()," )")))}))),a.createElement("div",{className:"flex flexRow alignItemsCenter"},a.createElement(C.default,{checked:u,className:"mRight10",onChange:function(ye){var J=(0,k.ne)(4);ye.target.checked?(ve(J),v({password:J})):v({password:""})}},_l("\u5BC6\u7801\u4FDD\u62A4")),u&&a.createElement(f.default,{placeholder:_l("\u8BF7\u8F93\u51654-8\u4F4D\u5BC6\u7801"),value:oe,className:"flex",onChange:function(ye){var J=ye.target.value;ve(J.replace(/[^A-Za-z0-9]/g,"").slice(0,8))},onBlur:pe,onKeyDown:function(ye){ye.which===13&&pe()}})))}var le=t(45231),E=t(89499),w=t(5505),K=t(49365),N=t(12496),F={worksheetApi:45,customPage:21,report:31},h=function(){var i=(0,R.Z)(L().mark(function m(v){var W,P;return L().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:W=v.from,P=void 0,l.t0=W,l.next=l.t0==="recordInfo"?5:l.t0==="newRecord"?9:l.t0==="view"?11:l.t0==="customPage"?13:15;break;case 5:return l.next=7,(0,N.C5)({appId:v.appId,recordId:v.rowId,viewId:v.viewId,worksheetId:v.worksheetId});case 7:return P=l.sent,l.abrupt("break",15);case 9:return P=(0,E.cK)(q().pick(v,["appId","worksheetId","viewId"])),l.abrupt("break",15);case 11:return P=location.origin+"/embed/view/"+v.appId+"/"+v.worksheetId+"/"+v.viewId,l.abrupt("break",15);case 13:return P=location.origin+"/embed/page/"+v.appId+"/"+v.sourceId,l.abrupt("break",15);case 15:return l.abrupt("return",P);case 16:case"end":return l.stop()}},m,this)}));return function(v){return i.apply(this,arguments)}}(),z=function(){var i=(0,R.Z)(L().mark(function m(v){var W,P,u,l,T;return L().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(W=v.from,P=v.validTime,u=v.password,l=v.isEdit,T=void 0,v.isPublic!==!1){D.next=4;break}return D.abrupt("return");case 4:D.t0=W,D.next=D.t0==="recordInfo"?7:D.t0==="view"?11:D.t0==="worksheetApi"||D.t0==="customPage"||D.t0==="report"?15:20;break;case 7:return D.next=9,le.Z.getWorksheetShareUrl({appId:v.appId,worksheetId:v.worksheetId,viewId:v.viewId,rowId:v.rowId,objectType:2,validTime:P,password:u,isEdit:l});case 9:return T=D.sent,D.abrupt("break",20);case 11:return D.next=13,le.Z.getWorksheetShareUrl({appId:v.appId,worksheetId:v.worksheetId,viewId:v.viewId,objectType:1,validTime:P,password:u,isEdit:l});case 13:return T=D.sent,D.abrupt("break",20);case 15:return D.next=17,K.Z.getEntityShare({appId:v.appId,sourceId:v.sourceId,sourceType:F[W]});case 17:return T=D.sent,T.shareLink=T.url,D.abrupt("break",20);case 20:return D.abrupt("return",T);case 21:case"end":return D.stop()}},m,this)}));return function(v){return i.apply(this,arguments)}}(),X=function(){var i=(0,R.Z)(L().mark(function m(v){var W,P,u,l,T,G;return L().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:W=v.from,P=v.isPublic,u=v.onUpdate,l=v.validTime,T=v.password,G=void 0,M.t0=W,M.next=M.t0==="recordInfo"?5:M.t0==="newRecord"?12:M.t0==="view"?18:M.t0==="worksheetApi"||M.t0==="customPage"||M.t0==="report"?27:32;break;case 5:return M.next=7,le.Z.updateWorksheetRowShareRange({appId:v.appId,worksheetId:v.worksheetId,rowId:v.rowId,viewId:v.viewId,shareRange:P?2:1,objectType:2});case 7:if(!P){M.next=11;break}return M.next=10,le.Z.getWorksheetShareUrl({appId:v.appId,worksheetId:v.worksheetId,rowId:v.rowId,viewId:v.viewId,objectType:2});case 10:G=M.sent;case 11:return M.abrupt("break",32);case 12:return M.next=14,w.Z.updatePublicWorksheetState({worksheetId:v.worksheetId,visibleType:P?2:1});case 14:return G=M.sent,P&&(G.shareLink=G.url),u({visibleType:P?2:1}),M.abrupt("break",32);case 18:return M.next=20,le.Z.updateWorksheetShareRange({appId:v.appId,worksheetId:v.worksheetId,viewId:v.viewId,shareRange:P?2:1,objectType:1});case 20:if(G=M.sent,!P){M.next=25;break}return M.next=24,le.Z.getWorksheetShareUrl({appId:v.appId,worksheetId:v.worksheetId,viewId:v.viewId,objectType:1});case 24:G=M.sent;case 25:return u({shareRange:P?2:1}),M.abrupt("break",32);case 27:return M.next=29,K.Z.editEntityShareStatus({appId:v.appId,sourceId:v.sourceId,sourceType:F[W],status:P?1:0,validTime:l,password:T});case 29:return G=M.sent,P&&(G.shareLink=G.appEntityShare.url),M.abrupt("break",32);case 32:return M.abrupt("return",G);case 33:case"end":return M.stop()}},m,this)}));return function(v){return i.apply(this,arguments)}}();function B(i){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"public",v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return i==="recordInfo"&&m==="private"?{entityId:v.worksheetId,cardType:8,title:v.title,extra:{rowId:v.rowId,viewId:v.viewId,appId:v.appId}}:{cardType:7,title:v.title,extra:{from:i,worksheetId:v.worksheetId,appId:v.appId}}}function x(i){var m=this,v=function(){var ge=(0,R.Z)(L().mark(function Re(Pe){var ke;return L().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:return Ve.next=2,X((0,te.default)({from:u,isPublic:Pe},M,{onUpdate:ae}));case 2:ke=Ve.sent,Se(Pe),Me(ke),be(ke?ke.shareLink:void 0);case 6:case"end":return Ve.stop()}},Re,this)}));return function(Pe){return ge.apply(this,arguments)}}(),W=function(){var ge=(0,R.Z)(L().mark(function Re(Pe){var ke;return L().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:return Ve.next=2,z((0,te.default)({from:u,isPublic:pe},M,Pe));case 2:ke=Ve.sent,Me(ke),be(ke?ke.shareLink:void 0);case 5:case"end":return Ve.stop()}},Re,this)}));return function(Pe){return ge.apply(this,arguments)}}(),P=function(){var ge=(0,R.Z)(L().mark(function Re(Pe){var ke;return L().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:return Ve.next=2,X((0,te.default)({from:u,isPublic:!0},M,Ne,Pe));case 2:ke=Ve.sent,Me(ke.appEntityShare);case 4:case"end":return Ve.stop()}},Re,this)}));return function(Pe){return ge.apply(this,arguments)}}(),u=i.from,l=i.title,T=i.isCharge,G=i.card,D=i.params,M=D===void 0?{}:D,se=i.onUpdate,ae=se===void 0?function(){}:se,ne=i.onClose,de=i.getCopyContent,Ce=i.canEditForm,he=i.hidePublicShare,fe=(0,a.useState)(),Ee=(0,y.Z)(fe,2),Y=Ee[0],oe=Ee[1],ve=(0,a.useState)(i.isPublic),ue=(0,y.Z)(ve,2),pe=ue[0],Se=ue[1],ye=(0,a.useState)(pe&&i.publicUrl),J=(0,y.Z)(ye,2),me=J[0],be=J[1],xe=(0,a.useState)({}),Ae=(0,y.Z)(xe,2),Ne=Ae[0],Me=Ae[1],Fe=!q().includes(["report","worksheetApi"],u),Be=q().includes(["view","customPage"],u),we=Be?_l("\u5D4C\u5165\u94FE\u63A5"):_l("\u5185\u90E8\u6210\u5458\u8BBF\u95EE"),Ie=void 0;return T||(Ie=u==="recordInfo"?_l("\u8BB0\u5F55\u62E5\u6709\u8005\u624D\u80FD\u64CD\u4F5C"):_l("\u7CFB\u7EDF\u89D2\u8272\uFF08\u5305\u542B\u7BA1\u7406\u5458\u3001\u8FD0\u8425\u8005\u3001\u5F00\u53D1\u8005\uFF09\u624D\u80FD\u64CD\u4F5C")),(0,a.useEffect)(function(){Fe&&(0,R.Z)(L().mark(function ge(){var Re;return L().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,h((0,te.default)({from:u},M));case 2:Re=ke.sent,oe(Re);case 4:case"end":return ke.stop()}},ge,m)}))()},[]),(0,a.useEffect)(function(){(0,R.Z)(L().mark(function ge(){return L().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:!me&&!he&&W();case 1:case"end":return Pe.stop()}},ge,m)}))()},[]),a.createElement(ce.Z,{visible:!0,width:720,footer:null,title:a.createElement(Z.XX,null,l||_l("\u5206\u4EAB")),onCancel:ne},Fe&&a.createElement(a.Fragment,null,a.createElement(Z.XX,{className:"Font15"},we),a.createElement(Z.wI,{className:"mTop10"},_l("\u4EC5\u9650\u5E94\u7528\u5185\u6210\u5458\u767B\u5F55\u7CFB\u7EDF\u540E\u6839\u636E\u6743\u9650\u8BBF\u95EE")),a.createElement(H.Z,(0,te.default)({chatCard:B(u,"private",M),theme:"light",copyShowText:!0,className:"mTop13",url:Y,qrVisible:!Be,allowSendToChat:!Be,inputBtns:[{tip:_l("\u65B0\u7A97\u53E3\u6253\u5F00"),icon:"task-new-detail",onClick:function(){return window.open(Y)}}]},q().isFunction(de)?{getCopyContent:function(Re){return de("private",Re+"?")}}:{})),a.createElement(Z.Hr,{style:{margin:"25px 0 22px"}})),!he&&a.createElement(a.Fragment,null,u==="worksheetApi"?a.createElement(Z.wI,{className:""},_l("\u542F\u7528\u540E\uFF0C\u5C06 API \u6587\u6863\u516C\u5F00\u53D1\u5E03\u7ED9\u5E94\u7528\u5916\u7684\u7528\u6237\u67E5\u770B\u4F7F\u7528")):a.createElement(a.Fragment,null,a.createElement(Z.XX,{className:"Font15"},_l("\u5BF9\u5916\u516C\u5F00\u5206\u4EAB")),a.createElement(Z.wI,{className:"mTop10"},_l("\u83B7\u5F97\u94FE\u63A5\u7684\u6240\u6709\u4EBA\u90FD\u53EF\u4EE5\u67E5\u770B"))),a.createElement("span",{"data-tip":Ie,className:"InlineBlock mTop15 tip-right"},a.createElement(g.Z,{disabled:!T,checked:!!me,onClick:function(){return v(!me)}})),!!me&&a.createElement(a.Fragment,null,a.createElement(H.Z,(0,te.default)({chatCard:B(u,"public",M),className:"mTop20",theme:"light",copyShowText:!0,allowSendToChat:u!=="worksheetApi",qrVisible:u!=="worksheetApi",inputBtns:[{tip:_l("\u65B0\u7A97\u53E3\u6253\u5F00"),icon:"task-new-detail",onClick:function(){return window.open(me)}}],url:me},q().isFunction(de)?{getCopyContent:function(Re){return de("public",Re+"?")}}:{})),u==="newRecord"&&Ce&&a.createElement("a",{href:"/worksheet/form/edit/"+M.worksheetId+"?#detail",target:"_blank",className:"mTop13 InlineBlock"},_l("\u7F16\u8F91\u516C\u5F00\u8868\u5355")),q().includes(["view","recordInfo","customPage","worksheetApi"],u)&&a.createElement(ie,{data:Ne,onChange:function(Re){Me((0,te.default)({},Ne,Re)),q().includes(["view","recordInfo"],u)&&W((0,te.default)({isEdit:!0},Ne,Re)),q().includes(["customPage","worksheetApi"],u)&&P(Re)}}))))}x.propTypes={from:o().string,title:o().string,params:o().shape({}),card:o().shape({}),isCharge:o().bool,publicUrl:o().string,isPublic:o().number,onUpdate:o().func,onClose:o().func};var Q=function(m){return(0,d.Z)(x,m)}},82303:(lt,Te,t)=>{"use strict";t.d(Te,{Q:()=>te});var ce=t(86735),g=t(67294),p=t(71893),L=(0,ce.Z)([`
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
`],[`
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
`]),te=p.ZP.div(L)},15797:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>Ee});var ce=t(25273),g=t(54208),p=t(44336),L=t(74253),te=t(15759),R=t(12424),y=t(70264),a=t(33867),r=t(72444),o=t(88239),d=t(67294),Z=t(93002),H=t(29314),U=t(30381),f=t.n(U),V=t(68924),C=t.n(V),O=t(93967),n=t.n(O),s=t(96486),j=t.n(s),A=t(83298),S=t(52877),I=t(68071),c=t(34197),q=t(69288),b=t(63355),k=t(59295),ee=t(15577),re=t(14828),ie=500,le=function(oe){return d.createElement("span",{className:n()({added:oe.added,removed:oe.removed})},oe.value)};function E(Y){var oe=Y.oldValue,ve=Y.newValue,ue=Y.type,pe=ue===void 0?"text":ue,Se=Y.control,ye=(0,d.useState)(!1),J=(0,R.Z)(ye,2),me=J[0],be=J[1],xe=(0,d.useState)(!1),Ae=(0,R.Z)(xe,2),Ne=Ae[0],Me=Ae[1],Fe=(0,d.useState)(!1),Be=(0,R.Z)(Fe,2),we=Be[0],Ie=Be[1],ge=(0,d.useRef)(null),Re=(0,ee.Q9)(),Pe=(0,d.useState)(1),ke=(0,R.Z)(Pe,2),We=ke[0],Ve=ke[1],it=null,Ge=oe.slice(0,ie),pt=ve.slice(0,ie);pe==="rich_text"?it=(0,k.Kx)(Ge.replace(/<[^>]+>|&[^>]+;/g,"").trim(),pt.replace(/<[^>]+>|&[^>]+;/g,"").trim()):it=(0,k.Kx)(Ge,pt);var ot=(0,d.useState)(it),vt=(0,R.Z)(ot,2),At=vt[0],yt=vt[1];(0,d.useEffect)(function(){if(Se&&Se.enumDefault!==2){var Xe=getComputedStyle(ge.current),$e=Number(Xe.height.replace("px","")),Ke=Number(Xe.lineHeight.replace("px",""));$e>Ke*5&&Me(!0)}},[]);var st=(0,d.useMemo)(function(){return At?At.map(function(Xe,$e){return d.createElement(d.Fragment,{key:"renderDiffText-"+Xe.value+"-"+$e},le(Xe))}):null},[At]),St=function($e){if($e===0){be(!1);return}if($e===1)if(oe.length>We*500||ve.length>We*500){var Ke=null;be(!0);var Ue=We;Ve(Ue+1);var He=oe.slice(Ue*500,(Ue+1)*500),ze=ve.slice(Ue*500,(Ue+1)*500);pe==="rich_text"?Ke=At.concat((0,k.Kx)(He.replace(/<[^>]+>|&[^>]+;/g,"").trim(),ze.replace(/<[^>]+>|&[^>]+;/g,"").trim())):Ke=At.concat((0,k.Kx)(He,ze)),yt(Ke)}else be(!0)},Qe=function(){return Ie(!1)};return Se&&Se.enumDefault===2?d.createElement(I.Z,{type:"rect",oldValue:[oe],newValue:[ve],needPreview:!1,control:Se}):d.createElement(d.Fragment,null,d.createElement("div",{ref:ge,className:n()("WorksheetRecordLogDiffText paddingLeft27",{mobileLogDiffText:Re,height100:Re&&Ne&&!me,noHeight:Re&&Ne&&me,ellipsis5:Ne&&!me})},st),(Ne||pe==="rich_text")&&d.createElement("div",{className:"WorksheetRecordLogDiffTextBottomButtons paddingLeft27"},Ne?d.createElement("div",null,me&&d.createElement("span",{className:"WorksheetRecordLogOpen mRight25",onClick:function(){return St(0)}},_l("\u6536\u8D77")),(oe.length>We*500||ve.length>We*500||!me)&&d.createElement("span",{className:"WorksheetRecordLogOpen",onClick:function(){return St(1)}},_l("\u67E5\u770B\u66F4\u591A"))):d.createElement("span",null),pe==="rich_text"?d.createElement("span",{className:n()("WorksheetRecordLogOpen",{hideEle:Re}),onClick:function(){return Ie(!0)}},_l("\u4EE5\u5BCC\u6587\u672C\u67E5\u770B")):d.createElement("span",null)),pe==="rich_text"&&d.createElement(q.Z,{title:d.createElement("div",{className:"richTextHeader"},d.createElement("div",{className:"leftCon"},d.createElement("div",{className:"title"},_l("\u4FEE\u6539\u524D"))),d.createElement("div",{className:"rightCon"},d.createElement("div",{className:"title"},_l("\u4FEE\u6539\u540E")))),style:{width:"90%",height:"90%",minHeight:"90%"},className:"richTextDiffDialog",visible:we,onCancel:Qe},d.createElement("div",{className:"richTextContent flexRow flex"},d.createElement("div",{className:"leftCon"},oe?d.createElement(b.Z,{data:oe,className:"richText",disabled:!0}):null),d.createElement("div",{className:"rightCon"},ve?d.createElement(b.Z,{data:ve,className:"richText",disabled:!0}):null))))}const w=d.memo(E,function(Y,oe){var ve=Y.type||"text",ue=Y.type||"text";return!!(ve===ue&&j().isEqual(Y.control,oe.control)&&Y.oldValue===oe.oldValue&&Y.newValue===oe.newValue)});var K=t(37262);function N(Y){var oe=Y.prop,ve=oe.newValue,ue=oe.oldValue,pe=oe.name,Se=(0,ee.Q9)(),ye=safeParse(ve,"array"),J=safeParse(ue,"array"),me=(0,d.useState)(!1),be=(0,R.Z)(me,2),xe=be[0],Ae=be[1],Ne=(0,d.useState)({add:[],update:[],remove:[]}),Me=(0,R.Z)(Ne,2),Fe=Me[0],Be=Me[1];(0,d.useEffect)(function(){Be(oe.editType===2?{add:[],update:[],remove:j().difference(ye,J)}:{add:j().difference(ye,J),update:j().intersection(ye,J),remove:j().difference(J,ye)})},[]);var we=function(){return oe.editType===0?d.createElement("p",{className:"worksheetRecordLogSubListItem"},_l("\u66F4\u65B0\u4E86%0\u6761",Fe.add.length)):d.createElement(d.Fragment,null,Fe.add.length!==0&&d.createElement("p",{className:"worksheetRecordLogSubListItem"},_l("\u65B0\u589E\u4E86%0\u6761",Fe.add.length)),Fe.update.length!==0&&d.createElement("p",{className:"worksheetRecordLogSubListItem"},_l("\u66F4\u65B0\u4E86%0\u6761",Fe.update.length)),Fe.remove.length!==0&&d.createElement("p",{className:"worksheetRecordLogSubListItem"},_l("\u79FB\u9664\u4E86%0\u6761",Fe.remove.length)))};return d.createElement("div",{className:"worksheetRecordLogSubList"},we(),d.createElement("span",{className:n()("WorksheetRecordLogOpen",{hideEle:Se}),onClick:function(){return Ae(!0)}},_l("\u67E5\u770B\u8BE6\u60C5")),d.createElement(q.Z,{className:"worksheetRecordLogSubDialog",style:{width:"90%",height:"90%",minHeight:"90%",maxWidth:"1600px"},visible:xe,onCancel:function(){return Ae(!1)}},d.createElement("h3",{className:"tableTitle"},pe),d.createElement(K.Z,Y)))}const F=N;var h=t(61987);function z(Y){var oe=Y.text,ve=Y.childNode,ue=Y.onSelect,pe=(0,d.useState)(!1),Se=(0,R.Z)(pe,2),ye=Se[0],J=Se[1];return d.createElement(H.Z,{popupVisible:ye,onPopupVisibleChange:function(be){J(be)},action:["click"],popupAlign:{points:["tl","bl"]},popup:d.createElement("span",{onClick:function(){ue(),J(!1)},className:"triggerSelectPopup"},oe)},ve)}const X=z;var B=t(6503),x=t(45231),Q=t(75053);function i(Y){var oe=[];return Y.forEach(function(ve){!oe.length||!f()(oe[oe.length-1].time).isSame(ve.createTime,"day")||oe[oe.length-1].accountId!==ve.accountId?oe.push({time:ve.createTime,accountName:ve.accountName,accountId:ve.accountId,child:[].concat(ve),avatar:ve.avatar}):oe[oe.length-1].child.push(ve)}),oe}function m(Y){var oe=[];return Y.forEach(function(ve,ue){!oe.length||!f()(oe[oe.length-1].time).isSame(ve.operatContent.createTime,"day")||oe[oe.length-1].accountId!==ve.opeartorInfo.accountId||oe[oe.length-1].type!==ve.operatContent.type||oe[[oe.length-1]].requestType!==ve.operatContent.requestType||ve.operatContent.requestType===7||ve.operatContent.requestType===2?oe.push((0,o.default)({},ve.opeartorInfo,{time:ve.operatContent.createTime,accountName:ve.opeartorInfo.fullname,type:ve.operatContent.type,requestType:ve.operatContent.requestType,child:[].concat(ve)})):oe[oe.length-1].child.push(ve)}),oe}function v(Y){if(!Y)return null;var oe=j().startsWith(Y,"[")?safeParse(Y,"array")[0]:Y;return!oe&&Y&&(oe=Y),j().startsWith(oe,"other")?oe==="other"?_l("\u5176\u4ED6"):j().replace(oe,"other:","")||_l("\u5176\u4ED6"):j().startsWith(oe,"\u5176\u4ED6")?oe==="\u5176\u4ED6"?_l("\u5176\u4ED6"):j().replace(oe,"\u5176\u4ED6:","")||_l("\u5176\u4ED6"):Q.H$.hasOwnProperty(oe)?Q.H$[oe]:Q.f4.find(function(ve){return ve.key===oe})?Q.f4.find(function(ve){return ve.key===oe}).value:oe}var W=function(oe,ve,ue){return oe.map(function(pe){var Se=(0,A.Z)((0,o.default)({},ve,{value:pe}),{noMask:!0});return(ve||{}).dot===0&&ue===6&&j().endsWith(Se,".0")?Se.replace(".0",""):Se})},P=t(62232),u=t(86674),l=t(20640),T=t.n(l),G=new RegExp("<[^<>]+>","g"),D=20,M=[];function se(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=arguments[1],ve=Y.advancedSetting,ue=ve===void 0?{}:ve,pe=ue.allpath==="1"?(oe.departmentPath||[]).sort(function(Se,ye){return ye.depth-Se.depth}).map(function(Se){return Se.departmentName}):[];return pe.concat([oe.departmentName]).join("/")}function ae(Y,oe,ve){var ue=Y.type,pe=Y.oldText,Se=Y.newText,ye=Y.oldValue,J=Y.newValue,me=Y.id,be=Y.editType,xe=ve.requestType,Ae=oe.controls&&oe.controls.length?oe.controls:oe.formdata,Ne=Ae?Ae.find(function(st){return me===st.controlId}):void 0,Me=!1;if(Q.Yw.includes(ue)||Q.d7.includes(ue)){var Fe=[],Be=[];if(Q.GH.includes(ue))Fe=safeParse(ye,"array"),Be=safeParse(J,"array");else if(ue===36)Fe=[String(ye)==="1"?"\u2611":"\u2610"],Be=[String(J)==="1"?"\u2611":"\u2610"];else if(ue===40){var we=safeParse(ye),Ie=safeParse(J);Fe=[we.address].filter(function(st){return st}),Be=[Ie.address].filter(function(st){return st}),Fe.length===0&&we.x&&we.y&&(Fe=[_l("\u7ECF\u5EA6")+"\uFF1A"+j().round(we.x,6)+" "+_l("\u7EAC\u5EA6")+"\uFF1A"+j().round(we.y,6)]),Be.length===0&&Ie.x&&Ie.y&&(Be=[_l("\u7ECF\u5EA6")+"\uFF1A"+j().round(Ie.x,6)+" "+_l("\u7EAC\u5EA6")+"\uFF1A"+j().round(Ie.y,6)])}else if(me.startsWith("wf")&&[16].includes(ue))Fe=ye?[f()(ye).format("YYYY-MM-DD HH:mm:ss")]:[],Be=J?[f()(J).format("YYYY-MM-DD HH:mm:ss")]:[];else if(ue===38)Fe=ye?[ye]:[],Be=J?[J]:[];else if([16,19,23,24].includes(ue))Fe=ye?[(0,A.Z)((0,o.default)({},Ne,{value:ye}))]:[],Be=J?[(0,A.Z)((0,o.default)({},Ne,{value:J}))]:[];else if(ue===46||ue===15)Fe=ye?[(0,A.Z)((0,o.default)({},Ne,{value:ye}))]:[],Be=J?[(0,A.Z)((0,o.default)({},Ne,{value:J}))]:[];else if(ue===29){var ge=Ne||{},Re=ge.advancedSetting,Pe=Re===void 0?{}:Re;if(([8,2].includes(xe)||["2","5","6"].includes(Pe.showtype))&&!ye&&[1,2].includes(be)){var ke=safeParse(safeParse(J).rows,"array");Fe=be===2?ke:[],Be=be===1?ke:[],Me=!0}else Fe=safeParse(safeParse(ye).rows,"array"),Be=safeParse(safeParse(J).rows,"array")}else ue===21?(Fe=safeParse(ye,"array").map(function(st){return st.name}),Be=safeParse(J,"array").map(function(st){return st.name})):(Fe=pe?pe.split(",").filter(function(st){return st}):ye?ye.split(",").filter(function(st){return st}):[],Be=Se?Se.split(",").filter(function(st){return st}):J?J.split(",").filter(function(st){return st}):[],ue===6||ue===8?(Fe=W(Fe,Ne,ue),Be=W(Be,Ne,ue)):me==="wfstatus"&&(Fe=ye?[v(ye)].filter(function(st){return st}):[],Be=J?[v(J)].filter(function(st){return st}):[]));var We=[],Ve=[],it=[];return ue===29?(We=j().differenceBy(Fe,Be,"recordId").map(function(st){return st.name||_l("\u672A\u547D\u540D")}),Ve=j().differenceBy(Be,Fe,"recordId").map(function(st){return st.name||_l("\u672A\u547D\u540D")}),it=j().intersectionBy(Fe,Be,"recordId").map(function(st){return st.name||_l("\u672A\u547D\u540D")})):(ue===6||ue===8)&&be!==0?(it=Fe,Ve=be===1?Be:[],We=be===2?Be:[]):Q.GH.includes(ue)?(We=be===2?Be.filter(function(st){return Fe.find(function(St){return St[Q.zA[ue][0]]===st[Q.zA[ue][0]]})}).map(function(st){return ue===27?se(Ne,st):st[Q.zA[ue][1]]}):j().differenceBy(Fe,Be,Q.zA[ue][0]).map(function(st){return ue===27?se(Ne,st):st[Q.zA[ue][1]]}),Ve=be===2?[]:j().differenceBy(Be,Fe,Q.zA[ue][0]).map(function(st){return ue===27?se(Ne,st):st[Q.zA[ue][1]]}),it=be===2?Fe.filter(function(st){return!Be.find(function(St){return St[Q.zA[ue][0]]===st[Q.zA[ue][0]]})}).map(function(st){return ue===27?se(Ne,st):st[Q.zA[ue][1]]}):j().intersectionBy(Fe,Be,Q.zA[ue][0]).map(function(st){return ue===27?se(Ne,st):st[Q.zA[ue][1]]})):be===2?(We=Be.filter(function(st){return Fe.find(function(St){return j().isEqual(St,st)})}),Ve=[],it=Fe.filter(function(st){return Be.find(function(St){return!j().isEqual(St,st)})})):(We=j().difference(Fe,Be),Ve=j().difference(Be,Fe),it=Be.filter(function(st){return Fe.find(function(St){return j().isEqual(St,st)})})),d.createElement(I.Z,{oldValue:We,newValue:Ve,defaultValue:it||[],type:Q.Yw.includes(ue)?"circle":"rect",needPreview:ue===29,data:Y,control:Ne,onlyNew:Me,isChangeValue:(ue===6||ue===8)&&be!==0,key:"WorksheetRecordLogSelectTags-"+me})}else if(ue===2&&["del_discussion","transf_task"].indexOf(me)>-1){var Ge=J.replace(/\n/g,"<br>");return Ge=(0,ee.U4)({message:Ge}),Ge=d.createElement("div",{className:"singeText paddingLeft27",dangerouslySetInnerHTML:{__html:Ge}})}else{if(ue===2)return d.createElement(w,{oldValue:ye?ye.replace(/^"|"$/g,""):"",newValue:J?J.replace(/^"|"$/g,""):"",control:Ne,key:"WorksheetRecordLogDiffText-"+me});if(ue===41)return d.createElement(w,{oldValue:ye?ye.replace(/^"|"$/g,""):"",newValue:J?J.replace(/^"|"$/g,""):"",type:"rich_text",key:"WorksheetRecordLogDiffText-"+me});if(ue===14||ue===42){var pt=safeParse(J,"array"),ot=safeParse(ye,"array");(0,r.default)(pt[0])!=="object"&&(pt=[]),(0,r.default)(ot[0])!=="object"&&(ot=[]);var vt=j().differenceBy(ot,pt,ue===14?"fileId":"key"),At=j().differenceBy(pt,ot,ue===14?"fileId":"key"),yt=pt.filter(function(st){return ot.find(function(St){return St[ue===14?"fileId":"key"]===st[ue===14?"fileId":"key"]})});return d.createElement(c.Z,{oldList:vt,newList:At,defaultList:yt,type:ue,recordInfo:oe,control:Ne,key:"WorksheetRecordLogThumbnail-"+me})}else return ue===34?d.createElement(F,{key:"WorksheetRecordLogSubList-"+me,prop:Y,control:Ne,recordInfo:oe,extendParam:ve}):null}}var ne=function(oe,ve,ue,pe){var Se=pe.selectField,ye=pe.moreList,J=ye===void 0?[]:ye,me=pe.setMoreList,be=pe.lastMark,xe=pe.showFilter,Ae=oe.operatContent,Ne=(0,ee.Q9)(),Me=Ae.logData,Fe=null,Be=Ae.extendParams.find(function(ge){return j().startsWith(ge,"btnRemarkName:")}),we=(Ae.extendParams.find(function(ge){return j().startsWith(ge,"btnremark:")})||"").replace("btnremark:","");we&&(Fe=d.createElement("div",null,(Be||"").replace("btnRemarkName:",""),"\uFF1A",we));var Ie=J.find(function(ge){return ge===Ae.uniqueId});return Se&&!Ie&&(Me=Me.filter(function(ge){return ge.id===Se.controlId})),d.createElement(d.Fragment,null,Fe,Me.map(function(ge){if(ge.newValue===""&&ge.oldValue===""||["thirdprimary"].includes(ge.id))return null;var Re=u.g5[j().findKey(u.DN,function(St){return St===ge.type})]||{},Pe=j().find(ve.controls&&ve.controls.length?ve.controls:ve.formdata,function(St){return ge.id===St.controlId})||{},ke=Pe&&Pe.controlPermissions||"111",We=ke[0]==="1",Ve="",it=!0;if(We){if(ge.type===29){var Ge=Pe||{},pt=Ge.advancedSetting,ot=pt===void 0?{}:pt;if(Ae.requestType===8||ot.showtype==="2"){var vt=ge.newValue?safeParse(ge.newValue):ge.oldValue?safeParse(ge.oldValue):void 0;if(vt&&vt.rows){var At=safeParse(ge.newValue,"object"),yt=safeParse(ge.oldValue,"object"),st=" ";ge.editType===1?st=" "+_l("\u6DFB\u52A0\u4E86"):ge.editType===2?st=" "+_l("\u53D6\u6D88\u4E86"):st=" "+(ge.newValue?_l("\u6DFB\u52A0\u4E86"):_l("\u53D6\u6D88\u4E86")),Ve=""+st+_l("%0\u6761",safeParse(ge.newValue?At.rows:yt.rows,"array").length||1)}else vt&&(it=!1,Ve=(ge.editType!==2?" "+_l("\u6DFB\u52A0\u4E86"):" "+_l("\u53D6\u6D88\u4E86"))+_l("%0\u6761",vt.length||1)+"\u5173\u8054\u8BB0\u5F55")}Ae.requestType===8&&(Ve+=_l("\uFF08\u88AB\u52A8\uFF09"))}return["transf_task","del_discussion"].indexOf(ge.id)>-1&&(it=!1),ge.isDeleted&&it&&(Ve+=_l("(\u5DF2\u5220\u9664)")),d.createElement("div",{className:n()("worksheet-rocord-log-item",{"worksheet-rocord-log-item-Row":ge.type===34}),key:"worksheet-rocord-log-item-"+ge.id},d.createElement("div",{className:"widgetTitle"},ge.isDeleted||Ne||!xe||u._Q.find(function(St){return St.controlId===ge.id})?d.createElement("span",{className:"selectTriggerChild"},d.createElement(a.Z,{className:"Font16 Gray_9e",icon:Re.icon}),d.createElement("span",null,ge.name)):d.createElement(X,{text:_l("\u7B5B\u9009\u6B64\u5B57\u6BB5"),onSelect:function(){Pe.controlId&&ue(Pe)},childNode:d.createElement("span",{className:"selectTriggerChild hasHover"},d.createElement(a.Z,{className:"Font16 Gray_9e",icon:Re.icon}),d.createElement("span",null,Pe.controlName||ge.name))}),d.createElement("span",{className:"extendText"},Ve)),(!ge.isDeleted||["transf_task","del_discussion"].indexOf(ge.id)>-1)&&ae(ge,ve,{createTime:Ae.createTime,uniqueId:Ae.uniqueId,lastMark:be,requestType:Ae.requestType,objectType:Ae.objectType}))}}),Se&&Me.length!==Ae.logData.length&&!Ie&&d.createElement("span",{onClick:function(){me(J.concat(Ae.uniqueId))},className:"moreLogData Gray_9e"},_l("\u67E5\u770B\u5176\u4ED6\u5B57\u6BB5")," ",Ae.logData.length-Me.length))},de=function(oe){var ve=oe.accountId,ue=oe.accountName,pe=oe.child,Se=oe.fullname,ye=(0,ee.Q9)();return ve==="user-workflow"?d.createElement("span",{className:"titleAvatarText workflow Gray_9e"},d.createElement("span",{className:n()("accountName",{mobileAccountName:ye})},_l("\u5DE5\u4F5C\u6D41")," ")):pe[0].operatContent.requestType===3?d.createElement("span",{className:"titleAvatarText"},d.createElement("span",{className:"accountName"},ue," ")):d.createElement("span",{className:"titleAvatarText accountName"},Se)},Ce=function(oe){var ve=oe.accountId,ue=oe.child,pe=oe.type,Se=(0,ee.Q9)();if(pe===7)return null;if(ve==="user-workflow"){var ye="";return ue[0].operatContent.extendParams.find(function(xe){return j().startsWith(xe,"workflow:")})&&(ye=ue[0].operatContent.extendParams.find(function(xe){return j().startsWith(xe,"workflow:")}).replace("workflow:","")),ye?d.createElement("span",{className:"titleAvatarText workflow Gray_9e mRight5"},Se?d.createElement("span",{className:"Gray"},ye.replace(G,"")):d.createElement("span",{dangerouslySetInnerHTML:{__html:C()(ye)}})):null}else if(ue[0].operatContent.requestType===3){var J=ue[0].operatContent.extendParams.find(function(xe){return j().startsWith(xe,"btn:")});return d.createElement("span",{className:"titleAvatarText mRight5"},d.createElement("span",{className:"Gray_9e"},_l("\u64CD\u4F5C\u6309\u94AE")),d.createElement("span",{className:"Gray"}," ",J?J.replace("btn:",""):""))}else if(ue[0].operatContent.requestType===2){var me=ue[0].operatContent.extendParams.find(function(xe){return j().startsWith(xe,"workflow:")}),be=me?me.replace("workflow:",""):void 0;return be?d.createElement("span",{className:"titleAvatarText workflow Gray_9e mRight5"},d.createElement("span",{className:"mRight5"},_l("\u89E6\u53D1\u5DE5\u4F5C\u6D41")),Se?d.createElement("span",{className:"Gray"},be.replace(G,"")):d.createElement("span",{dangerouslySetInnerHTML:{__html:C()(be)}})):null}else return null},he=function(oe,ve){var ue=ve.controls,pe=oe.child[0].operatContent.logData.filter(function(Me){return Me.oldValue!==""||Me.newValue!==""}).length,Se=!1;oe.child[0].operatContent.logData.forEach(function(Me){var Fe=j().find(ue,function(we){return Me.id===we.controlId})||{},Be=Fe&&Fe.controlPermissions||"111";Be[0]==="0"&&(Se=!0)});var ye=j().get(oe,"child[0].operatContent")||{},J=ye.requestType,me=oe.type,be=oe.accountId,xe=null;if(be==="user-integration"&&me===4)xe=d.createElement("span",{className:"createRecord mLeft2"},_l("\u521B\u5EFA\u4E86\u8BB0\u5F55"),J?_l("(\u901A\u8FC7%0)",Q.Jm[J]):"");else switch(me){case 1:xe=d.createElement("span",{className:"createRecord mLeft2"},_l("\u521B\u5EFA\u4E86\u8BB0\u5F55")," ",J?_l("(\u901A\u8FC7%0)",Q.Jm[J]):"");break;case 2:xe=d.createElement("span",{className:"mLeft2"},_l("\u66F4\u65B0%0\u4E2A\u5B57\u6BB5",pe));break;case 3:xe=d.createElement("span",{className:"mLeft2"},_l("\u5220\u9664\u4E86\u8BB0\u5F55"));break;case 4:var Ae=oe.child[0].operatContent.extendParams.find(function(Me){return j().startsWith(Me,"triggerWorkflow:")})||"triggerWorkflow:0";xe=d.createElement("span",{className:"mLeft2"},_l("\u901A\u8FC7"),d.createElement("span",{className:"Gray mLeft5 mRight5"},_l("\u5BFC\u5165Excel\u6587\u4EF6"),Ae.replace("triggerWorkflow:","")==="1"?_l("(\u89E6\u53D1\u5DE5\u4F5C\u6D41)"):null),_l("\u521B\u5EFA\u4E86\u8BB0\u5F55"));break;case 5:xe=d.createElement("span",{className:"mLeft2"},_l("\u5BFC\u51FA\u4E86\u8BB0\u5F55"));break;case 6:xe=d.createElement("span",{className:"mLeft2"},_l("\u6062\u590D\u4E86\u8BB0\u5F55"));break;case 7:var Ne=oe.child[0].operatContent.extendParams.find(function(Me){return j().startsWith(Me,"btn:")});xe=d.createElement("span",{className:"mLeft2"},_l("\u64CD\u4F5C\u6309\u94AE %0",Ne?Ne.replace("btn:",""):""));break;default:xe=d.createElement("span",{className:"mLeft2"},_l("\u66F4\u65B0\u4E86\u8BB0\u5F55"));break}return d.createElement(d.Fragment,null,xe,Se&&d.createElement(y.Z,{popupPlacement:"right",text:d.createElement("span",null,_l("\u90E8\u5206\u5B57\u6BB5\u65E0\u6743\u9650\u4E0D\u53EF\u89C1"))},d.createElement(a.Z,{icon:"info_outline",className:"Font14 mLeft5"})))};function fe(Y,oe){var ve=Y.controls,ue=Y.worksheetId,pe=Y.formdata,Se=Y.showFilter,ye=Se===void 0?!0:Se,J=Y.filterUniqueIds,me=J===void 0?void 0:J,be=Y.appId,xe=Y.projectId,Ae=(0,d.useRef)(),Ne=(0,Z.Z)({loading:!1,showAddCondition:!1,loadouted:!1,sign:{newDataEnd:!1,oldLogEnd:!1,showLodOldButton:!1},showDivider:!1,lastMark:void 0}),Me=(0,R.Z)(Ne,2),Fe=Me[0],Be=Fe.loading,we=Fe.showAddCondition,Ie=Fe.loadouted,ge=Fe.sign,Re=Fe.showDivider,Pe=Fe.lastMark,ke=Me[1],We=(0,Z.Z)({selectUser:void 0,selectField:void 0,selectDate:{visible:!1,range:void 0},pageIndexs:{newLogIndex:1,oldLogIndex:0}}),Ve=(0,R.Z)(We,2),it=Ve[0],Ge=it.selectUser,pt=it.selectField,ot=it.selectDate,vt=it.pageIndexs,At=Ve[1],yt=(0,Z.Z)({discussList:[],discussData:[]}),st=(0,R.Z)(yt,2),St=st[0],Qe=St.discussList,Xe=St.discussData,$e=st[1],Ke=(0,Z.Z)({newEditionData:[],newEditionList:[]}),Ue=(0,R.Z)(Ke,2),He=Ue[0],ze=He.newEditionData,gt=He.newEditionList,Et=Ue[1],ft=(0,d.useState)([]),qe=(0,R.Z)(ft,2),nt=qe[0],Ze=qe[1],et=(0,d.useState)({}),ut=(0,R.Z)(et,2),xt=ut[0],wt=ut[1],kt=(0,d.useState)((localStorage.getItem("mdTimeFormat")||"simplify")==="simplify"),Rt=(0,R.Z)(kt,2),jt=Rt[0],fn=Rt[1],Mt=!1,sn=(0,ee.Q9)();(0,d.useImperativeHandle)(oe,function(){return{reload:on,handleScroll:Lt}}),(0,d.useEffect)(function(){var De=Y.appId,_e=Y.worksheetId;De||x.Z.getWorksheetInfo({worksheetId:_e,getViews:!0,getSwitchPermit:!0,getTemplate:!0,getRules:!0}).then(function(Le){wt(Le)})},[]),(0,d.useEffect)(function(){on()},[Y.rowId,Y.filterUniqueIds]),(0,d.useEffect)(function(){if((Ge||pt||ot.range)&&vt.newLogIndex===1||Be||Mt&&vt.newLogIndex===1){Mt=!1;return}en({})},[vt.newLogIndex]),(0,d.useEffect)(function(){vt.oldLogIndex&&$t()},[vt.oldLogIndex]);function on(){Mt=!0,At({selectUser:void 0,selectField:void 0,selectDate:{visible:!1,range:void 0},pageIndexs:{newLogIndex:1,oldLogIndex:0}}),$e({discussList:[]}),ke({sign:{newDataEnd:!1,oldLogEnd:!1,showLodOldButton:!1},lastMark:void 0,loadouted:!1}),en({lastMark:void 0})}function en(De){var _e=Y.worksheetId,Le=Y.rowId,rt=Y.pageSize,Ct=rt===void 0?D:rt,dt=Y.filterUniqueIds,It=Y.isGlobaLog,bt=De.pageIndex,Ut=De.filedId,Xt=De.opeartorId,pn=De.startDateTime,tt=De.endDateTime,ht=De.hasOwnProperty("opeartorId")?Xt:Ge&&Ge[0].accountId,Dt=De.hasOwnProperty("filedId")?Ut:pt&&pt.controlId,Ot=De.hasOwnProperty("startDateTime")?pn:ot.range&&ot.range.value[0],Ht=De.hasOwnProperty("endDateTime")?tt:ot.range&&ot.range.value[1],Kt=De.hasOwnProperty("lastMark")?De.lastMark:Pe;ke({loading:!0});var dn={worksheetId:_e,pageSize:Ct,objectType:2,opeartorIds:ht?[ht]:[],controlIds:Dt?[Dt]:[],startDate:Ot,endDate:Ht,lastMark:Kt,rowId:Le};It&&(dn.filterUniqueIds=dt,dn.isGlobaLog=!0);var Cn=dt&&!It?x.Z.batchGetWorksheetOperationLogs((0,o.default)({},dn,{filterUniqueIds:dt})):x.Z.getWorksheetOperationLogs(dn);Cn.then(function(Rn){ke({loading:!1,lastMark:Rn.lastMark});var gn=Rn.logs;if($e({newEditionData:vt.newLogIndex===1?[]:ze.concat(gn)}),gn.length){var wn=m(gn.filter(function(On){return!M.includes(function(An){return An===On.id})}));M.concat(gn.map(function(On){return On.operatContent.uniqueId})),Et({newEditionList:vt.newLogIndex===1?wn:gt.concat(wn)}),gn.length<D||gn[gn.length-1].operatContent.type===1?ke({sign:(0,o.default)({},ge,{newDataEnd:!0,showLodOldButton:!gn.find(function(On){return On.operatContent.type===1||On.operatContent.type===4})})}):ge.newDataEnd&&ke({sign:(0,o.default)({},ge,{newDataEnd:!1})})}else ke({sign:(0,o.default)({},ge,{newDataEnd:!0})}),vt.newLogIndex===1&&(At({pageIndexs:(0,o.default)({},vt,{oldLogIndex:1})}),ke({sign:(0,o.default)({},ge,{newDataEnd:!0}),showDivider:!0}),Et({newEditionList:[]}))})}function $t(){var De=Y.worksheetId,_e=Y.rowId,Le=Y.pageSize,rt=Le===void 0?D:Le,Ct=Y.filterUniqueIds;Ct||Ie||Ge||pt||ot.range||(ke({loading:!0}),x.Z.getLogs({worksheetId:De,rowId:_e,pageSize:rt,pageIndex:vt.oldLogIndex}).then(function(dt){if(ke({loading:!1,loadouted:dt.length<D}),$e({discussData:Xe.concat(dt)}),dt.length){var It=i(dt.filter(function(bt){return!M.includes(function(Ut){return Ut===bt.id})}));M.concat(It.map(function(bt){return bt.id})),$e({discussList:Qe.concat(It)}),(dt[dt.length-1].templateId==="addwsrow"||dt.length<D)&&ke({sign:(0,o.default)({},ge,{newDataEnd:!0,oldLogEnd:!0})})}}))}var an=function(_e){_e.stopPropagation(),ke({lastMark:void 0}),At({selectField:void 0,pageIndexs:(0,o.default)({},vt,{newLogIndex:1})}),Ze([]),en({filedId:void 0,lastMark:void 0})},tn=function(_e){_e.stopPropagation(),ke({lastMark:void 0}),At({selectUser:void 0,pageIndexs:(0,o.default)({},vt,{newLogIndex:1})}),en({opeartorId:void 0,lastMark:void 0})},mt=function(_e){_e.stopPropagation(),ke({lastMark:void 0}),At({selectDate:{visible:ot.visible,range:void 0},pageIndexs:(0,o.default)({},vt,{newLogIndex:1})}),en({startDateTime:void 0,endDateTime:void 0,lastMark:void 0})},Lt=j().debounce(function(){(Ge||pt||ot.range)&&ge.newDataEnd||Be||Ie&&ge.newDataEnd||ge.newDataEnd&&ge.oldLogEnd||(!Be&&!ge.newDataEnd?At({pageIndexs:(0,o.default)({},vt,{newLogIndex:vt.newLogIndex+1})}):!Be&&ge.newDataEnd&&!ge.oldLogEnd&&At({pageIndexs:(0,o.default)({},vt,{oldLogIndex:vt.oldLogIndex+1})}))},500),zt=function(_e){ke({lastMark:void 0}),At({selectUser:_e,pageIndexs:(0,o.default)({},vt,{newLogIndex:1})}),en({opeartorId:_e[0].accountId,lastMark:void 0})};function Zt(){var De=Y.worksheetId,_e=Y.projectId,Le=_e===void 0?"":_e,rt=Y.appId,Ct=["user-sub","user-undefined"];(0,h.ZP)(Ae.current,{hidePortalCurrentUser:!0,selectRangeOptions:!1,includeSystemField:!0,prefixOnlySystemField:!0,rect:Ae.current.getBoundingClientRect(),tabType:3,appId:rt||xt.appId,showMoreInvite:!1,isTask:!1,filterAccountIds:Ge?Ge.map(function(dt){return dt.accountId}).concat(Ct):[].concat(Ct),offset:{top:2},zIndex:10001,SelectUserSettings:{unique:!0,projectId:Le||De.projectId,filterAccountIds:Ge?Ge.map(function(dt){return dt.accountId}).concat(Ct):[].concat(Ct),callback:zt},selectCb:zt})}var Nt=function(_e){ke({lastMark:void 0}),At({selectField:_e,pageIndexs:(0,o.default)({},vt,{newLogIndex:1})}),Ze([]),en({filedId:_e.controlId,lastMark:void 0})},ct=function(){var _e=jt?"whole":"simplify";fn(!jt),localStorage.setItem("mdTimeFormat",_e)};return d.createElement(ce.Z,{className:"logScroll flex worksheetRecordLog",onScrollEnd:Lt},d.createElement("div",{className:n()("logBox",{mobileLogBox:sn})},ye&&d.createElement("div",{className:n()("selectCon",{hideEle:sn})},d.createElement("div",{className:"left"},d.createElement("span",{className:n()({selectLight:Ge},"selectUser"),onClick:Zt,ref:Ae},d.createElement(a.Z,{icon:"person"}),d.createElement("span",{className:"selectConText"},Ge?Ge[0].fullname:_l("\u64CD\u4F5C\u8005")),d.createElement(a.Z,{icon:"arrow-down",style:Ge?{}:{display:"inline-block"}}),Ge&&d.createElement(a.Z,{onClick:tn,icon:"cancel1"})),d.createElement(S.Z,{columns:(0,P.UX)(j().filter(ve&&ve.length?ve:pe,function(De){return!j().includes([33,47,30,22,10010,45,43,25,51,52],De.type)&&!j().includes(["caid","ctime","utime","daid","rowid","uaid"],De.controlId)})),defaultVisible:we,onAdd:function(_e){Nt(_e)},comp:function(){return d.createElement("span",{className:n()({selectLight:pt},"selectField")},d.createElement(a.Z,{icon:"title"}),d.createElement("span",{className:"selectConText"},pt?pt.controlName:_l("\u5B57\u6BB5")),d.createElement(a.Z,{icon:"arrow-down",style:pt?{}:{display:"inline-block"}}),pt&&d.createElement(a.Z,{icon:"cancel1",onClick:an}))},offset:[0,0]})),d.createElement(H.Z,{popupVisible:ot.visible,onPopupVisibleChange:function(_e){return At({selectDate:(0,o.default)({},ot,{visible:_e})})},action:["click"],popupAlign:{points:["tr","br"]},popup:d.createElement(B.Z,{onChange:function(_e){_e.value&&(At({selectDate:{visible:!1,range:(0,o.default)({},_e,{value:[_e.value[0],_e.value[1]]})},pageIndexs:(0,o.default)({},vt,{newLogIndex:1})}),ke({lastMark:void 0}),en({startDateTime:f()(_e.value[0]).format("YYYY-MM-DD HH:mm:ss"),endDateTime:f()(_e.value[1]).format("YYYY-MM-DD HH:mm:ss"),lastMark:void 0}))}})},d.createElement("span",{className:(ot.range?"selectLight":"")+" selectDate"},d.createElement(a.Z,{icon:"event"}),ot.range&&d.createElement("span",{className:"selectConText"},ot.range.label),ot.range&&d.createElement(a.Z,{icon:"arrow-down"}),ot.range&&d.createElement(a.Z,{icon:"cancel1",onClick:mt})))),!Be&&me&&me.length>0&&gt.length===0&&d.createElement("div",{className:"Gray_75 pBottom10 noneContent Font13",style:{paddingTop:"120px",textAlign:"center"}},_l("\u65E0\u6570\u636E\u6216\u65E0\u6743\u9650\u67E5\u770B")),gt.length===0&&(Ge||pt||ot.range)&&d.createElement("div",{className:"Gray_c pBottom10 noneContent",style:{paddingTop:"120px",textAlign:"center"}},_l("\u6682\u65E0\u6570\u636E")),gt.map(function(De,_e){var Le=De.child,rt="";Le[0].operatContent.extendParams.find(function(It){return j().startsWith(It,"user_agent:")})&&(rt=Le[0].operatContent.extendParams.find(function(It){return j().startsWith(It,"user_agent:")}).replace("user_agent:",""));var Ct=f()((0,ee.LX)(De.time)),dt=_l("%0\u5E74%1\u6708%2\u65E5",Ct.format("YYYY"),Ct.format("MM"),Ct.format("DD"))+" "+f()(Ct).format("HH:mm:ss");return d.createElement("div",{className:"worksheetRocordLogCard",key:"worksheetRocordLogCard-"+De.time+"-"+_e},d.createElement("div",{className:n()("worksheetRocordLogCardTopBox",{mBottom0:De.type===1})},d.createElement("div",{className:"worksheetRocordLogCardTitle flex"},sn||!ye?d.createElement("span",{className:"selectTriggerChildAvatar"},d.createElement(te.Z,{className:"worksheetRocordLogCardTitleAvatar",size:20,user:{accountId:De.accountId,userHead:De.avatar},appId:be,projectId:xe,headClick:function(){}}),de(De)):d.createElement(X,{text:_l("\u7B5B\u9009\u6B64\u7528\u6237"),onSelect:function(bt){var Ut={accountId:De.accountId,avatar:De.avatar,fullname:De.fullname};(0,Q.S1)().hasOwnProperty(De.accountId)&&(Ut=(0,Q.S1)()[De.accountId]),zt([Ut])},childNode:d.createElement("span",{className:"selectTriggerChildAvatar"},d.createElement(te.Z,{className:"worksheetRocordLogCardTitleAvatar",size:20,user:{accountId:De.accountId,userHead:De.avatar},appId:be,projectId:xe,headClick:function(){}}),de(De))}),Ce(De),d.createElement("span",null,d.createElement("span",{className:"Gray_9e"},he(De,{controls:ve||pe})))),rt?d.createElement(y.Z,{text:d.createElement("span",null,_l("\u590D\u5236\u521B\u5EFA\u65F6\u7684UA\u4FE1\u606F")),popupPlacement:"top"},d.createElement("span",{className:"icon icon-copy Gray_9e Font18 Hand ThemeHoverColor3",onClick:function(){T()(rt),alert(_l("\u590D\u5236\u6210\u529F"))}})):"",d.createElement("div",{className:"worksheetRocordLogCardName nowrap Gray_9e mLeft12 Hand Hover_21 timeDataTip",onClick:ct,"data-tip":jt?dt:""},jt?createTimeSpan((0,ee.LX)(De.time),!0):dt)),De.child.map(function(It,bt){var Ut={selectField:pt,moreList:nt,setMoreList:Ze,lastMark:Pe,showFilter:ye},Xt=!1;It.operatContent.logData.forEach(function(Dt){var Ot=j().find(ve||pe,function(Kt){return Dt.id===Kt.controlId})||{},Ht=Ot&&Ot.controlPermissions||"111";Ht[0]==="0"&&(Xt=!0)});var pn=It.operatContent.logData.filter(function(Dt){return Dt.oldValue!==""||Dt.newValue!==""}).length,tt=f()((0,ee.LX)(It.operatContent.createTime)),ht=_l("%0\u5E74%1\u6708%2\u65E5",tt.format("YYYY"),tt.format("MM"),tt.format("DD"))+" "+tt.format("HH:mm:ss");return d.createElement("div",{key:"worksheetRocordLogCardHrCon-"+De.accountName+"-"+bt,className:"worksheetRocordLogCardHrCon"},It.operatContent.createTime!==De.time&&d.createElement("div",{className:"worksheetRocordLogCardHrTime"},d.createElement("span",null,!!pn&&_l("\u66F4\u65B0\u4E86 %0\u4E2A\u5B57\u6BB5",pn),!!pn&&Xt&&d.createElement(y.Z,{popupPlacement:"right",text:d.createElement("span",null,_l("\u90E8\u5206\u5B57\u6BB5\u65E0\u6743\u9650\u4E0D\u53EF\u89C1"))},d.createElement(a.Z,{icon:"info_outline",className:"Font14 mLeft5"}))),d.createElement("span",{className:"Hand Hover_21 timeDataTip",onClick:ct,"data-tip":jt?ht:""},jt?createTimeSpan((0,ee.LX)(It.operatContent.createTime),!0):ht)),ne(It,Y,Nt,Ut))}))}),!me&&ge.showLodOldButton&&Qe.length===0&&d.createElement("p",{className:"loadOldLog"},d.createElement("span",{onClick:function(){At({pageIndexs:(0,o.default)({},vt,{oldLogIndex:1})}),ke({sign:(0,o.default)({},ge,{showLodOldButton:!1}),showDivider:!0})}},_l("\u7EE7\u7EED\u67E5\u770B\u65E7\u7248\u65E5\u5FD7"))),!me&&!Ge&&!pt&&!ot.range&&Re&&Qe.length>0&&d.createElement(L.Z,{className:"logDivider"},_l("\u4EE5\u4E0B\u662F\u65E7\u7248\u65E5\u5FD7"),d.createElement(y.Z,{text:d.createElement("span",null,_l("\u65E7\u7248\u65E5\u5FD7\u4E0D\u652F\u6301\u8FDB\u884C\u7B5B\u9009\u3002\u56E0\u4E3A\u65B0\u65E7\u7248\u672C\u7684\u5347\u7EA7\uFF0C\u53EF\u80FD\u4F1A\u4EA7\u751F\u4E00\u6BB5\u65F6\u95F4\u91CD\u590D\u8BB0\u5F55\u7684\u65E5\u5FD7"))},d.createElement(a.Z,{className:"Font12",icon:"Import-failure"}))),!Ge&&!pt&&!ot.range&&Qe.map(function(De,_e){return d.createElement("div",{className:"worksheetRocordLogCard",key:"worksheetRocordLogCard-"+De.time+"-"+_e},d.createElement("div",{className:"worksheetRocordLogCardTopBox"},d.createElement("div",{className:"worksheetRocordLogCardTitle"},d.createElement(te.Z,{className:"worksheetRocordLogCardTitleAvatar",size:20,user:{accountId:De.accountId,userHead:De.avatar},appId:be,projectId:xe,headClick:function(){}}),d.createElement("span",null,De.accountName," ",d.createElement("span",{className:"Gray_9e"},_l("\u66F4\u65B0\u4E86 %0 \u4E2A\u5B57\u6BB5",De.child.length)))),d.createElement("div",{className:"worksheetRocordLogCardName Gray_9e Hover_21 timeDataTip Hand","data-tip":jt?createTimeSpan((0,ee.LX)(De.time),!0):"",onClick:ct},createTimeSpan((0,ee.LX)(De.time),!0))),De.child.map(function(Le){var rt=(0,ee.U4)({message:Le.message,accountId:Le.accountId,accountName:Le.accountName});if(sn){var Ct=rt.replace(G,"").split(" "),dt=Ct&&Ct.length&&Ct[0],It=Ct&&Ct.length&&Ct[1];return Le.accountId==="user-workflow"&&(dt=dt.slice(3)),d.createElement("div",{className:"logContent",key:"logContent-"+Le.id,style:{marginTop:10,marginBottom:10}},d.createElement("span",null,Le.accountId==="user-workflow"?_l("\u5DE5\u4F5C\u6D41"):"",d.createElement("span",{className:"Gray mRight5"},dt),It))}return d.createElement("div",{className:"logContent",key:"logContent-"+Le.id,style:{marginTop:10,marginBottom:10},dangerouslySetInnerHTML:{__html:C()(rt)}})}))})),Be&&d.createElement(g.Z,{className:"mBottom20"}))}const Ee=(0,d.forwardRef)(fe)},68071:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>f});var ce=t(12424),g=t(88239),p=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(15577);var te=t(14828);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(82011);var y=t(93967),a=t.n(y),r=t(96486),o=t.n(r);if(!/^(1887|7596|7798)$/.test(t.j))var d=t(85879);if(!/^(1887|7596|7798)$/.test(t.j))var Z=t(83298);var H=function(C,O){var n=safeParse(C,"array");switch(O.type){case 26:case 27:case 48:return n.map(function(s){return s.departmentName||s.fullname||s.organizeName}).filter(function(s){return s}).join("\u3001");case 40:return n.address||_l("\u7ECF\u5EA6")+"\uFF1A"+o().round(n.x,6)+" "+_l("\u7EAC\u5EA6")+"\uFF1A"+o().round(n.y,6);default:return(0,Z.Z)((0,g.default)({},O,{value:C}))}};function U(V){var C=V.oldValue,O=V.newValue,n=V.defaultValue,s=n===void 0?[]:n,j=V.type,A=j===void 0?"circle":j,S=V.needPreview,I=V.data,c=V.control,q=V.onlyNew,b=q===void 0?!1:q,k=V.isChangeValue,ee=k===void 0?!1:k,re=(0,L.Q9)(),ie=(0,p.useState)(!1),le=(0,ce.Z)(ie,2),E=le[0],w=le[1],K=(0,p.useState)(void 0),N=(0,ce.Z)(K,2),F=N[0],h=N[1],z=(0,p.useState)(void 0),X=(0,ce.Z)(z,2),B=X[0],x=X[1],Q=(0,p.useState)(!1),i=(0,ce.Z)(Q,2),m=i[0],v=i[1],W=(0,p.useState)([]),P=(0,ce.Z)(W,2),u=P[0],l=P[1],T=o().get(c,["advancedSetting"])||{},G=T.isdecrypt,D=function(ne,de){re||(w(de),h({type:ne,index:de}))};(0,p.useEffect)(function(){if(T.masktype&&v(!0),S){var ae=safeParse(I.oldValue),ne=safeParse(I.newValue),de={appId:ae.appId||ne.appId,worksheetId:ae.worksheetId||ne.worksheetId,viewId:ae.viewId||ne.viewId,delList:[],addList:[],defList:[]},Ce=safeParse(ae.rows,"array"),he=safeParse(ne.rows,"array");b?(de.delList=he,de.addList=he,de.defList=he):(de.delList=o().differenceBy(Ce,he,"recordId"),de.addList=o().differenceBy(he,Ce,"recordId"),de.defList=o().intersectionBy(Ce,he,"recordId")),x(de)}},[]);var M=function(ne){var de=ne;if(S&&de&&["[","{"].includes(de[0])){var Ce=(c||{}).sourceControlType,he=(0,g.default)({},(c||{}).sourceControl,{type:Ce});!Ce&&c&&(he=c.relationControls.find(function(ve){return ve.attribute===1})||c.relationControls[0]),de=H(ne,he)}if(c){var fe=c.type,Ee=c.enumDefault;if(fe===3){var Y=Ee===1?de.replace(/\+86/,""):de;return m&&o().indexOf(u,de)<0?(0,d.G)((0,g.default)({},c,{value:Y})):Y}if(fe===35){var oe=c.relationControls.find(function(ve){return ve.controlId===c.sourceTitleControlId});return oe&&(0,Z.Z)((0,g.default)({},oe,{value:ne}))||de}}return m&&o().indexOf(u,de)<0?(0,d.G)((0,g.default)({},c,{value:de})):de},se=function(ne,de){var Ce=ee?de==="old"?"-":"+":"";return ne.map(function(he,fe){return he?p.createElement("span",{key:"WorksheetRocordLogSelectTag-"+de+"-"+he+"-"+fe,className:a()("WorksheetRocordLogSelectTag",{noneTextLineThrough:ee},{hoverHighline:S&&!re},{oldValue:de==="old"},{newValue:de==="new"},{defaultValue:de==="default"}),style:A==="circle"?{borderRadius:"10px"}:{},onClick:function(){S&&D(de,fe),m&&G==="1"&&l(u.concat(he))}},Ce+" "+M(he)):null})};return p.createElement(p.Fragment,null,p.createElement("div",{className:a()("WorksheetRocordLogSelectTags paddingLeft27",{flexDirectionRever:ee})},se(C,"old"),se(O,"new"),se(s,"default")),E!==!1&&F&&B&&p.createElement(R.Z,{visible:!0,allowAdd:!1,appId:B.appId,viewId:B.viewId,from:1,hideRecordInfo:function(){w(!1)},recordId:F.type==="old"?B.delList[E].recordId:F.type==="new"?B.addList[E].recordId:B.defList[E].recordId,worksheetId:B.worksheetId}))}const f=/^(1887|7596|7798)$/.test(t.j)?null:U},37262:(lt,Te,t)=>{"use strict";if(t.d(Te,{Z:()=>k}),!/^(1887|7596|7798)$/.test(t.j))var ce=t(25273);var g=t(31277),p=t.n(g);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(31929);var te=t(80176),R=t.n(te);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(2307);var a=t(61256),r=t.n(a);if(!/^(1887|7596|7798)$/.test(t.j))var o=t(36671);var d=t(63239),Z=t.n(d),H=t(88902),U=t.n(H),f=t(88239),V=t(12424),C=t(67294),O=t(96486),n=t.n(O);if(!/^(1887|7596|7798)$/.test(t.j))var s=t(83298);if(!/^(1887|7596|7798)$/.test(t.j))var j=t(34197);if(!/^(1887|7596|7798)$/.test(t.j))var A=t(86674);if(!/^(1887|7596|7798)$/.test(t.j))var S=t(75053);if(!/^(1887|7596|7798)$/.test(t.j))var I=t(45231);var c=t(14828);function q(ee){var re=ee.cell,ie=(0,C.useState)(!1),le=(0,V.Z)(ie,2),E=le[0],w=le[1],K=re.type===2&&re.enumDefault===2||n().includes([6,8,3,5,7],re.type)&&re.value&&n().get(re,"advancedSetting.isdecrypt")==="1",N=(0,s.Z)(re,{noMask:E});return K?C.createElement("span",{className:"canMask",onClick:function(){return w(!0)}},N):N}function b(ee){var re=ee.control,ie=ee.prop,le=ee.recordInfo,E=ee.extendParam,w=re.showControls,K=(0,C.useState)(!1),N=(0,V.Z)(K,2),F=N[0],h=N[1],z=(0,C.useState)([]),X=(0,V.Z)(z,2),B=X[0],x=X[1],Q=(0,C.useState)([]),i=(0,V.Z)(Q,2),m=i[0],v=i[1],W=(0,C.useState)(1),P=(0,V.Z)(W,2),u=P[0],l=P[1],T=(0,C.useState)(!1),G=(0,V.Z)(T,2),D=G[0],M=G[1],se=(0,C.useState)(null),ae=(0,V.Z)(se,2),ne=ae[0],de=ae[1],Ce=function oe(ve){var ue=ve?ve.pageIndex:u;I.Z.getDetailTableLog({worksheetId:le.worksheetId,rowId:le.rowId,uniqueId:E.uniqueId,createTime:E.createTime,lastMark:E.createTime,requestType:E.requestType,objectType:E.objectType,pageIndex:ue,pageSize:20,log:ve?ve.log:ne}).then(function(pe){h(!1),l(ue+1);var Se=pe.oldRows,ye=pe.newRows,J=safeParse(Se,"array"),me=safeParse(ye,"array"),be=n().intersectionBy(me,J,"rowid").map(function(Me){return(0,f.default)({},Me,{oldValue:J.find(function(Fe){return Fe.rowid===Me.rowid}),newValue:me.find(function(Fe){return Fe.rowid===Me.rowid}),type:"update"})}),xe=n().differenceBy(me,J,"rowid").map(function(Me){return(0,f.default)({},Me,{type:"add"})}),Ae=n().differenceBy(J,me,"rowid").map(function(Me){return(0,f.default)({},Me,{type:"remove"})}),Ne=m.concat(n().sortBy(be.concat(xe,Ae),["ctime"]));v(Ne),pe.flag&&M(!0),!pe.flag&&Ne.length<10&&oe({pageIndex:ue+1,log:ve?ve.log:ne})})};(0,C.useEffect)(function(){h(!0),I.Z.getWorksheetInfo({getRules:!0,getTemplate:!0,worksheetId:re.dataSource,relationWorksheetId:le.worksheetId}).then(function(oe){var ve=w.map(function(ye){var J=oe.template.controls.concat(A.cU).find(function(me){return me.controlId===ye});return{title:J?J.controlName:"",width:200,dataIndex:ye,key:ye,render:function(be,xe){if(xe.type==="update"){var Ae=xe.oldValue[ye]?[xe.oldValue[ye]]:[],Ne=xe.newValue[ye]?[xe.newValue[ye]]:[];n().startsWith(xe.oldValue[ye],"[")&&(Ae=safeParse(xe.oldValue[ye],"array")),n().startsWith(xe.newValue[ye],"[")&&(Ne=safeParse(xe.newValue[ye],"array"));var Me=n().difference(Ae,Ne),Fe=n().difference(Ne,Ae),Be=n().intersection(Ne,Ae);return J&&U()(S.J0).find(function(ge){return ge==J.type})&&(Me=n().differenceBy(Ae,Ne,S.J0[J.type]),Fe=n().differenceBy(Ne,Ae,S.J0[J.type]),Be=n().intersectionBy(Ne,Ae,S.J0[J.type])),C.createElement(C.Fragment,null,fe(Me,J,"remove"),fe(Fe,J,"add"),fe(Be,J,"update"))}var we=(0,f.default)({},J,{value:be,value2:be}),Ie=(0,s.Z)(we);return Ie?C.createElement(q,{cell:we}):he(we,xe.type)}}});x(ve);var ue=safeParse(safeParse(ie.newValue).rows,"array"),pe=safeParse(safeParse(ie.oldValue).rows,"array"),Se=(0,f.default)({},ie);n().startsWith(ie.newValue,"{")&&(Se.newValue=Z()(ue.map(function(ye){return ye.recordId})),Se.oldValue=Z()(pe.map(function(ye){return ye.recordId}))),de(Se),Ce({pageIndex:1,log:Se})})},[]);var he=function(ve,ue){try{var pe=ve.type,Se=ve.value2,ye=ve.value;if(!Se||Se.length===0)return null;var J=Se;if(typeof Se=="string"&&n().startsWith(Se,"[")&&(J=safeParse(Se)),pe===42)return J=J&&J.hasOwnProperty("server")?[J]:[{server:J}],C.createElement(j.Z,{oldList:ue==="remove"?J:[],newList:ue==="add"?J:[],defaultList:ue==="update"?J:[],type:pe,recordInfo:le,control:ve});if(pe===14)return C.createElement(j.Z,{oldList:ue==="remove"?J:[],newList:ue==="add"?J:[],defaultList:ue==="update"?J:[],type:pe,recordInfo:le,control:ve});if(pe===29&&n().startsWith(ye,"{")){var me=safeParse(ye),be=safeParse(me.rows,"array");return be.map(function(Ae){var Ne=Ae.name||_l("\u672A\u547D\u540D");return C.createElement("span",{className:"rectTag "+(ue==="add"?"newBackground":ue==="remove"?"oldBackground":"defaultBackground")},ve.dataSource===me.worksheetId&&(0,s.Z)((0,f.default)({},ve.sourceControl,{value:Ae.name}))||Ne)})}if(pe===36&&(J=String(J)==="1"?"\u2611":"\u2610"),pe===35){var xe=ve.relationControls.find(function(Ae){return Ae.controlId===ve.sourceTitleControlId});J=xe&&(0,s.Z)((0,f.default)({},xe,{value:[11].includes(xe.type)?Z()([ye]):ye}))||ye}return typeof J=="string"?C.createElement("span",{className:"rectTag "+(ue==="add"?"newBackground":ue==="remove"?"oldBackground":"defaultBackground")},J):null}catch(Ae){return console.log(Ae),null}},fe=function(ve,ue,pe){return ve.map(function(Se,ye){var J=(0,f.default)({},ue,{value:typeof Se!="string"?Z()([Se]):Se,value2:[42,11,10].includes(ue.type)?Se:[Se]}),me=(0,s.Z)(J);return me?C.createElement(C.Fragment,{key:"worksheetRecordLogSubTableUpdataItem-"+pe+"-"+ue.controlId+"-"+ye},C.createElement("span",{className:"rectTag "+S.QI[pe]},C.createElement(q,{cell:J}))):C.createElement(C.Fragment,{key:"worksheetRecordLogSubTableUpdataItem-"+pe+"-"+ue.controlId+"-"+ye},he(J,pe))})},Ee=n().debounce(function(){D||(h(!0),Ce())},500),Y=function(){return C.createElement(o.default,{imageStyle:{height:40},image:o.default.PRESENTED_IMAGE_SIMPLE,description:C.createElement("span",null,_l("\u65E0\u6570\u636E\uFF0C\u6216\u662F\u79FB\u9664\u8BB0\u5F55\u6682\u4E0D\u652F\u6301\u67E5\u770B\u8BE6\u60C5"))})};return C.createElement(ce.Z,{className:"flex",onScrollEnd:Ee},C.createElement(L.default,{renderEmpty:Y},C.createElement(y.Z,{loading:F,className:"worksheetRecordLogSubTable",rowClassName:function(ve){return"worksheetRecordLogSubTableRow "+ve.type},rowKey:function(ve){return"worksheetRecordLogSubTableRow-"+ve.rowid},columns:B,dataSource:m,scroll:{x:1300},pagination:!1,bordered:!0})))}const k=/^(1887|7596|7798)$/.test(t.j)?null:b},34197:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>d});var ce=t(12424),g=t(67294),p=t(29314),L=t(96486),te=t.n(L);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(15577);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(68071);var a=t(14828);function r(Z){var H=Z.url,U=Z.name,f=Z.filesize,V=Z.isPicture;return g.createElement("div",{className:"picturePreview"},V&&g.createElement("div",{className:"imgCon"},g.createElement("img",{src:H,className:"picturePreviewImg"})),g.createElement("div",{className:"fileDetail"},g.createElement("p",{className:"filename"},U),f&&g.createElement("p",{className:"fileSize"},(0,R.sS)(f))))}function o(Z){var H=Z.oldList,U=H===void 0?[]:H,f=Z.newList,V=f===void 0?[]:f,C=Z.defaultList,O=C===void 0?[]:C,n=Z.type,s=Z.recordInfo,j=Z.control,A=(0,R.Q9)(),S=(0,g.useState)(!1),I=(0,ce.Z)(S,2),c=I[0],q=I[1],b=U.length+V.length+O.length;if(md.global.Config.IsLocal)return g.createElement(g.Fragment,null,g.createElement(y.Z,{type:"rect",oldValue:U.filter(function(ee,re){return c||re<8}).map(function(ee){return n===14?ee.originalFilename+ee.ext:_l("\u7B7E\u540D.jpg")}),newValue:V.filter(function(ee,re){return c||re<8-U.length}).map(function(ee){return n===14?ee.originalFilename+ee.ext:_l("\u7B7E\u540D.jpg")}),defaultValue:O.filter(function(ee,re){return c||re<8-U.length-V.length}).map(function(ee){return n===14?ee.originalFilename+ee.ext:_l("\u7B7E\u540D.jpg")})}),b>8&&g.createElement("div",null,g.createElement("span",{onClick:function(){return q(!c)},className:"WorksheetRecordLogOpen paddingLeft27"},c?_l("\u6536\u8D77"):_l("\u5C55\u5F00"))));var k=function(re,ie){return A?re.map(function(le){return g.createElement("span",{key:"WorksheetRecordLogThumbnailItem-type-"+(n===14?le.fileID:le.key),className:"WorksheetRecordLogThumbnailItem "+ie},n===42||File.isPicture(le.ext)?g.createElement("span",{className:"itemImgCon"},g.createElement("img",{className:"itemImg",src:(le.previewUrl||le.server||"").replace(/imageView2\/\d\/w\/\d+\/h\/\d+(\/q\/\d+)?/,"imageView2/2/h/20")})):g.createElement("span",{className:"itemImgCon itemImg fileIcon "+(0,R.kQ)(le.ext),title:le.originalFilename+(le.ext||""),style:{width:"20px"}}),g.createElement("span",{className:"filename overflow_ellipsis"},n===14?le.originalFilename:_l("\u7B7E\u540D")),n===14?le.ext:".jpg")}):re.map(function(le,E){return g.createElement(p.Z,{action:["hover"],getPopupContainer:function(){return document.body},destroyPopupOnHide:!0,mouseEnterDelay:.4,popupAlign:{points:["tl","bl"],offset:[0,4],overflow:{adjustY:!0,adjustX:!0}},popup:g.createElement(r,{url:(n===14?le.previewUrl:le.server).replace(/imageView2\/\d\/w\/\d+\/h\/\d+(\/q\/\d+)?/,"imageView2/2/h/160"),name:n===14?le.originalFilename+le.ext:_l("\u7B7E\u540D.jpg"),filesize:n===14?le.filesize:void 0,isPicture:n===14?File.isPicture(le.ext):!0})},g.createElement("span",{key:"WorksheetRecordLogThumbnailItem-type-"+(n===14?le.fileID:le.key),className:"WorksheetRecordLogThumbnailItem "+ie},n===42||File.isPicture(le.ext)?g.createElement("span",{className:"itemImgCon"},g.createElement("img",{className:"itemImg",src:(le.previewUrl||le.server||"").replace(/imageView2\/\d\/w\/\d+\/h\/\d+(\/q\/\d+)?/,"imageView2/2/h/20")})):g.createElement("span",{className:"itemImgCon itemImg fileIcon "+(0,R.kQ)(le.ext),title:le.originalFilename+(le.ext||""),style:{width:"20px"}}),g.createElement("span",{className:"filename overflow_ellipsis"},n===14?le.originalFilename:_l("\u7B7E\u540D")),n===14?le.ext:".jpg"))})};return g.createElement("div",{className:"WorksheetRecordLogThumbnail paddingLeft27"},k(U.filter(function(ee,re){return c||re<8}),"oldBackground"),k(V.filter(function(ee,re){return c||re<8-U.length}),"newBackground"),k(O.filter(function(ee,re){return c||re<8-U.length-V.length}),"defaultBackground"),b>8&&g.createElement("div",null,g.createElement("span",{onClick:function(){return q(!c)},className:"WorksheetRecordLogOpen"},c?_l("\u6536\u8D77"):_l("\u5C55\u5F00"))))}const d=/^(1887|7596|7798)$/.test(t.j)?null:o},75053:(lt,Te,t)=>{"use strict";t.d(Te,{GH:()=>y,H$:()=>r,J0:()=>g,Jm:()=>d,QI:()=>a,S1:()=>p,Yw:()=>te,d7:()=>R,f4:()=>ce,zA:()=>L});var ce=[{key:"pass",color:"#4caf50",index:1,enumDefault2:1,value:_l("\u901A\u8FC7")},{key:"refuse",color:"#f44336",index:2,enumDefault2:1,value:_l("\u5426\u51B3")},{key:"abort",color:"#e8e8e8",index:3,enumDefault2:1,value:_l("\u4E2D\u6B62")},{key:"other",color:"rgba(33, 150, 243, 0.13)",index:4,enumDefault2:1,value:_l("\u5176\u4ED6")}],g={26:"accountId",48:"departmentId",27:"departmentId",42:"key",30:"SHEET_FIELD"},p=function(){return{"user-workflow":{accountId:"user-workflow",avatar:md.global.FileStoreConfig.pictureHost.replace(/\/$/,"")+"/UserAvatar/workflow.png?imageView2/1/w/48/h/48/q/90",fullname:"\u5DE5\u4F5C\u6D41"},"user-publicform":{accountId:"user-publicform",avatar:md.global.FileStoreConfig.pictureHost.replace(/\/$/,"")+"/UserAvatar/publicform.png?imageView2/1/w/100/h/100/q/90",fullname:"\u516C\u5F00\u8868\u5355"},"user-api":{accountId:"user-api",avatar:md.global.FileStoreConfig.pictureHost.replace(/\/$/,"")+"/UserAvatar/worksheetapi.png?imageView2/1/w/100/h/100/q/90",fullname:"API"}}},L={27:["departmentId","departmentName"],26:["accountId","fullname"],48:["organizeId","organizeName"]},te=[26,36,27,10,48,11,9],R=[6,8,5,15,16,38,46,3,4,24,31,28,7,40,35,37,29,27,19,23,50,21,33,32],y=[26,27,48],a={remove:"oldBackground",add:"newBackground",update:"defaultBackground"},r={\u901A\u8FC7:_l("\u901A\u8FC7"),\u5426\u51B3:_l("\u5426\u51B3"),\u4E2D\u6B62:_l("\u4E2D\u6B62")},o={2:_l("\u5DE5\u4F5C\u6D41"),3:_l("\u81EA\u5B9A\u4E49\u52A8\u4F5C")},d={1:_l("\u63D0\u4EA4\u6309\u94AE"),2:_l("\u5DE5\u4F5C\u6D41"),3:_l("\u81EA\u5B9A\u4E49\u52A8\u4F5C"),4:"API",5:_l("\u5916\u90E8\u95E8\u6237"),6:_l("\u516C\u5F00\u8868\u5355"),11:_l("\u6570\u636E\u96C6\u6210")}},43113:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>C,r:()=>H});var ce=t(88106),g=t(88239),p=t(96486),L=t(67294),te=t(98153);function R(O){var n=O.key,s=O.isTrash,j=O.className,A=O.style,S=O.columnIndex,I=O.rowIndex,c=O.cellIndex,q=O.row,b=O.control,k=O.fixedColumnCount,ee=O.getPopupContainer,re=O.from,ie=O.tableType,le=O.tableId,E=O.cache,w=O.worksheetId,K=O.rowFormData,N=O.masterData,F=O.isSubList,h=O.rowHeight,z=O.rowHeightEnum,X=O.updateCell,B=X===void 0?function(){}:X,x=O.onCellClick,Q=x===void 0?function(){}:x,i=O.onFocusCell,m=i===void 0?function(){}:i,v=O.onCellMouseDown,W=v===void 0?function(){}:v,P=O.projectId,u=O.lineEditable,l=O.scrollTo,T=O.tableScrollTop,G=O.isediting,D=O.error,M=O.clearCellError,se=O.enterEditing,ae=O.cellUniqueValidate,ne=O.clickEnterEditing,de=O.fromModule,Ce=O.sheetSwitchPermit,he=O.viewId,fe=O.appId,Ee=O.allowlink,Y=O.isCharge,oe=O.onCellFocus,ve=O.checkRulesErrorOfControl,ue=O.registerRef,pe=function(){b.key==="number"||!q.rowid||Ee==="0"||Q(b,q,I,S)};return L.createElement(te.Z,{key:n,isTrash:s,tableId:le,tableType:ie,cache:E,viewId:he,appId:fe,worksheetId:w,sheetSwitchPermit:Ce,tableFromModule:de,clickEnterEditing:ne,isSubList:F,isediting:G,isCharge:Y,error:D,clearCellError:M,enterEditing:se,cellUniqueValidate:ae,className:j,style:A,allowlink:Ee,canedit:u&&!(0,p.find)(["caid","ctime","utime","wfname","wfstatus","wfcuaids","wfrtime","wfftime","wfdtime","wfcaid","wfctime","wfcotime","rowid","uaid"],function(Se){return Se===b.controlId}),cell:(0,g.default)({},b,{disabled:!q.allowedit||b.disabled}),row:q,rowIndex:I,cellIndex:c,columnIndex:S,rowFormData:K,masterData:N,rowHeight:h,rowHeightEnum:z,from:re===21?re:1,popupContainer:function(){return ee(S<=k)},projectId:P,scrollTo:l,tableScrollTop:T,updateCell:function(ye,J){B({cell:ye,control:b,row:q},J)},onClick:pe,onFocusCell:m,onMouseDown:function(){return W({rowIndex:I})},onCellFocus:oe,checkRulesErrorOfControl:ve,registerRef:ue})}var y=t(39832),a=t(93967),r=t.n(a),o=t(15742),d=t(89499),Z=t(86674);function H(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=O.columnIndex,s=O.rowIndex,j=O.columnCount,A=O.leftFixed,S=O.rightFixed,I=O.topFixed,c=O.bottomFixed,q=O.rightFixedCount,b=O.leftFixedCount,k={columnIndex:n,rowIndex:s};return A?k.columnIndex=n:S?k.columnIndex=j-q+n:k.columnIndex=b+n,(I||c)&&(k.rowIndex=void 0),k}var U=(0,L.memo)(R,function(O,n){var s=["style","className","row.rowid","error","control.controlId","control.value","control.options","control.controlPermissions","control.fieldPermission","control.relationControls","control.advancedSetting.datamask"];return(0,p.every)(s,function(j){return(0,p.isEqual)((0,p.get)(O,j),(0,p.get)(n,j))})});function f(O){return O.startsWith("top")?"head":O.startsWith("bottom")?"foot":"data"}function V(O){var n,s=O.key,j=O.style,A=j===void 0?{}:j,S=O.data,I=S===void 0?{}:S,c=I.grid,q=c===void 0?{}:c,b=I.tableId,k=I.isTrash,ee=I.from,re=I.allowlink,ie=I.isSubList,le=I.fromModule,E=I.projectId,w=I.appId,K=I.worksheetId,N=I.viewId,F=I.tableType,h=I.cache,z=I.rows,X=z===void 0?[]:z,B=I.controls,x=B===void 0?[]:B,Q=I.visibleColumns,i=Q===void 0?[]:Q,m=I.columns,v=m===void 0?[]:m,W=I.cellColumnCount,P=I.rowHeight,u=I.lineEditable,l=I.fixedColumnCount,T=I.columnHeadHeight,G=I.recordColorConfig,D=I.cellErrors,M=I.rowHeightEnum,se=I.rulePermissions,ae=I.masterData,ne=I.masterFormData,de=I.sheetSwitchPermit,Ce=I.sheetViewHighlightRows,he=I.registerRef,fe=I.updateSheetColumnWidths,Ee=I.renderFunctions,Y=I.clearCellError,oe=I.getPopupContainer,ve=I.enterEditing,ue=I.onCellClick,pe=I.checkRulesErrorOfControl,Se=I.onFocusCell,ye=I.cellUniqueValidate,J=I.updateCell,me=(0,L.useRef)({}),be=H((0,g.default)({columnIndex:O.columnIndex,rowIndex:O.rowIndex},q)),xe=be.columnIndex,Ae=be.rowIndex,Ne=(0,g.default)({},A),Me=Ae*W+xe,Fe=X[Ae]||{};me.current.row=Fe;var Be=(0,g.default)({},i[xe]||{});if(Be.fieldPermission=se[Fe.rowid+"-"+Be.controlId]||Be.fieldPermission||"111",Fe.isSubListFooter)return L.createElement("span",{style:(0,g.default)({},Ne,{height:26})});if(Be.type==="emptyForResize")return L.createElement("div",{style:A});var we=Fe[Be.controlId],Ie=f(q.id,Be,Ae,xe),ge=r()("control-"+(Be.type===30&&Be.sourceControlType||Be.type),"row-"+((0,p.includes)(["head","foot"],Ie)?Ie:Ae),"col-"+xe,"cell-"+Me,"cell","rowHeight-"+((0,p.findIndex)(o.dN,function(We){return We===P})||0),(n={},(0,ce.default)(n,"control-val-"+Be.controlId,Ie!=="head"),(0,ce.default)(n,"placeholder",!Fe.rowid),(0,ce.default)(n,"emptyRow",Fe.rowid&&(0,p.isFunction)(Fe.rowid.startsWith)&&Fe.rowid.startsWith("empty")),(0,ce.default)(n,"oddRow",Ae%2===1),(0,ce.default)(n,"readonly",u&&Ae>=0&&xe>0&&Be.fieldPermission&&(Be.fieldPermission[1]==="0"||Be.fieldPermission[0]==="0")),(0,ce.default)(n,"fixedRow",Ae===0),(0,ce.default)(n,"lastFixedColumn",xe===l),(0,ce.default)(n,"alignRight",(0,d.pr)(Be)),(0,ce.default)(n,"highlight",!(0,p.isUndefined)(window["sheetTableHighlightRow"+b])&&window["sheetTableHighlightRow"+b]===Ae),(0,ce.default)(n,"highlightFromProps",Ce[Fe.rowid]),(0,ce.default)(n,"focusShowEditIcon",F==="classic"&&(0,p.includes)([Z.DN.DATE,Z.DN.DATE_TIME,Z.DN.TIME,Z.DN.AREA_CITY,Z.DN.AREA_COUNTY,Z.DN.AREA_PROVINCE,Z.DN.USER_PICKER,Z.DN.DEPARTMENT,Z.DN.ORG_ROLE,Z.DN.ATTACHMENT,Z.DN.RICH_TEXT,Z.DN.LOCATION,Z.DN.SIGNATURE,Z.DN.RELATE_SHEET,Z.DN.CASCADER],Be.type)&&(0,d.hB)(we)),n));(q.id.startsWith("bottom")||q.id.startsWith("top"))&&(Ne.height=34),q.id.startsWith("top")&&T>34&&(Ne.height=T,ge+=" wrapControlName");var Re=G&&(0,d.j8)({controlId:G.controlId,colorItems:G.colorItems,controls:x,row:Fe});if(Re&&G.showBg&&Re.lightColor&&Be.type!=="emptyForResize"&&(Ne.backgroundColor=Re.lightColor),(0,p.isFunction)(Ee.rowHead)&&Be.type==="rowHead"&&Ie!=="foot"){var Pe=Ee.rowHead({className:ge,key:s,style:Ne,rowIndex:Ie==="head"?-1:Ae,control:Be,row:Fe,data:X});return Re&&G.showLine?L.createElement(L.Fragment,null,Pe,L.createElement("span",{className:"colorTag",style:{left:A.left+A.width-10,top:A.top+6,height:A.height-12,zIndex:2,backgroundColor:Re.color}})):Pe}if((0,p.isFunction)(Ee.head)&&Ie==="head")return Ee.head({className:ge,fixedColumnCount:l+1,key:s,style:Ne,columnIndex:xe,rowIndex:Ae,control:Be,updateSheetColumnWidths:fe});if((0,p.isFunction)(Ee.foot)&&Ie==="foot")return Ee.foot({style:Ne,columnIndex:xe});var ke=D[Fe.rowid+"-"+Be.controlId];return L.createElement(U,{key:s,isTrash:k,from:ee,allowlink:re,isSubList:ie,fromModule:le,projectId:E,cache:h,appId:w,worksheetId:K,viewId:N,tableId:b,tableType:F,fixedColumnCount:l,lineEditable:u,className:ge,style:Ne,columnIndex:xe,rowIndex:Ae,cellIndex:Me,control:(0,g.default)({},Be,{value:we}),row:Fe,error:ke,rowHeight:P,rowHeightEnum:M,sheetSwitchPermit:de,masterData:ae,rowFormData:function(){return(x||v).map(function(Ve){return(0,g.default)({},Ve,{value:(me.current.row||{})[Ve.controlId]})}).concat(ne().filter(function(Ve){return Ve.controlId.length===24}))},clearCellError:Y,getPopupContainer:oe,enterEditing:function(){return ve(Me)},onCellClick:ue,onFocusCell:function(){return Se({row:Fe,cellIndex:Me,rowIndex:Ae,columnIndex:xe})},scrollTo,checkRulesErrorOfControl:pe,cellUniqueValidate:ye,updateCell:function(Ve,it){return J({row:Fe,rowIndex:Ae,args:Ve,options:it})},registerRef:function(Ve){return he(Ve,Me)}})}const C=V},69601:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>U});var ce=t(12424),g=t(86735),p=t(67294),L=t(45697),te=t.n(L),R=t(93967),y=t.n(R),a=t(71893),r=t(88553),o=t(34863),d=t.n(o),Z=(0,g.Z)([`
  position: absolute;
  width: 100%;
  height: 100%;
  background: #fff;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  .iconBox {
    width: 130px;
    height: 130px;
    display: inline-block;
    border-radius: 50%;
    background: url(`,`) no-repeat;
    background-size: 130px 130px;
    background-color: #f5f5f5;
  }
`],[`
  position: absolute;
  width: 100%;
  height: 100%;
  background: #fff;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  .iconBox {
    width: 130px;
    height: 130px;
    display: inline-block;
    border-radius: 50%;
    background: url(`,`) no-repeat;
    background-size: 130px 130px;
    background-color: #f5f5f5;
  }
`]),H=a.ZP.div(Z,d());function U(f){var V=f.style,C=f.sheetIsFiltered,O=f.allowAdd,n=f.showNewRecord,s=f.text,j=f.icon,A=(0,r.Z)(),S=(0,ce.Z)(A,2),I=S[0],c=S[1].height;return p.createElement(H,{ref:I,style:V},!!c&&p.createElement("div",{className:y()("TxtCenter",{Hand:!(C||!O)}),onClick:function(){C||!O||n()}},c>200&&(j||p.createElement("i",{className:"iconBox mBottom12"})),p.createElement("span",{className:"Gray_9e Block mBottom20 TxtCenter Font17 Gray_9e"},s||(C?_l("\u6CA1\u6709\u7B26\u5408\u6761\u4EF6\u7684\u8BB0\u5F55"):O?_l("\u6682\u672A\u6DFB\u52A0\u8BB0\u5F55\uFF0C\u70B9\u51FB\u521B\u5EFA"):_l("\u6682\u672A\u6DFB\u52A0\u8BB0\u5F55")))))}U.propTypes={style:te().shape(),sheetIsFiltered:te().bool,text:te().bool,icon:te().element,allowAdd:te().bool,showNewRecord:te().func}},85964:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>q});var ce=t(70264),g=t(62521),p=t(16469),L=t(60967),te=t(88239),R=t(12424),y=t(86735),a=t(45697),r=t.n(a),o=t(67294),d=t(71893),Z=t(29314),H=t(93967),U=t.n(H),f=t(42541),V=t(31846),C=t(67055),O=t(96486),n=t.n(O),s=t(34694),j=t(89471),A=(0,y.Z)([`
  user-select: none;
  padding-left: 2px;
  padding-top: 0px !important;
  padding-bottom: 0px !important;
  font-size: 13px;
  color: #9e9e9e;
  padding: 0px !important;
  align-items: center;
  > * {
    flex: 0 0 auto;
  }
  .numberCon {
    display: inline-block;
    text-align: center;
  }
  .moreOperate {
    margin-left: 8px;
    visibility: hidden;
  }
  .checkbox {
    margin-top: 5px;
    display: none;
    .Checkbox-box {
      margin: 0px;
    }
  }
  .openRecord {
    visibility: hidden;
  }
  .topCheckbox {
    position: absolute;
    text-align: center;
    .checkboxCon {
      position: relative;
      display: inline-block;
      .Checkbox-box {
        margin: 0px;
      }
    }
  }
  .number {
    display: inline-block;
  }
  &.rowHadFocus {
    .openRecord {
      visibility: visible;
    }
  }
  &.hover {
    .openRecord {
      visibility: visible;
    }
  }
  &.cell.noRightBorder {
    border-right: none !important;
  }
  &.hideNumber {
    .number {
      display: none;
    }
  }
  &.hover.hasBatch,
  &.selected.hasBatch {
    .number {
      display: none;
    }
    .checkbox {
      display: inline-block;
    }
  }
  &.hideNumber {
    .number {
      display: none;
    }
    .checkbox {
      display: inline-block;
    }
  }
  &.hover {
    .moreOperate {
      visibility: visible;
    }
  }
`],[`
  user-select: none;
  padding-left: 2px;
  padding-top: 0px !important;
  padding-bottom: 0px !important;
  font-size: 13px;
  color: #9e9e9e;
  padding: 0px !important;
  align-items: center;
  > * {
    flex: 0 0 auto;
  }
  .numberCon {
    display: inline-block;
    text-align: center;
  }
  .moreOperate {
    margin-left: 8px;
    visibility: hidden;
  }
  .checkbox {
    margin-top: 5px;
    display: none;
    .Checkbox-box {
      margin: 0px;
    }
  }
  .openRecord {
    visibility: hidden;
  }
  .topCheckbox {
    position: absolute;
    text-align: center;
    .checkboxCon {
      position: relative;
      display: inline-block;
      .Checkbox-box {
        margin: 0px;
      }
    }
  }
  .number {
    display: inline-block;
  }
  &.rowHadFocus {
    .openRecord {
      visibility: visible;
    }
  }
  &.hover {
    .openRecord {
      visibility: visible;
    }
  }
  &.cell.noRightBorder {
    border-right: none !important;
  }
  &.hideNumber {
    .number {
      display: none;
    }
  }
  &.hover.hasBatch,
  &.selected.hasBatch {
    .number {
      display: none;
    }
    .checkbox {
      display: inline-block;
    }
  }
  &.hideNumber {
    .number {
      display: none;
    }
    .checkbox {
      display: inline-block;
    }
  }
  &.hover {
    .moreOperate {
      visibility: visible;
    }
  }
`]),S=(0,y.Z)([`
  margin-left: 8px;
  font-size: 16px;
  width: 24px;
  height: 24px;
  color: #2196f3;
  border-radius: 4px;
  &:hover {
    background: rgba(0, 0, 0, 0.05);
  }
`],[`
  margin-left: 8px;
  font-size: 16px;
  width: 24px;
  height: 24px;
  color: #2196f3;
  border-radius: 4px;
  &:hover {
    background: rgba(0, 0, 0, 0.05);
  }
`]),I=d.ZP.div(A),c=(0,d.ZP)(f.Lb)(S);function q(b){var k=b.tableType,ee=b.hasBatch,re=ee===void 0?!0:ee,ie=b.showNumber,le=ie===void 0?!0:ie,E=b.showOperate,w=E===void 0?!0:E,K=b.numberWidth,N=b.readonly,F=b.isTrash,h=b.isDraft,z=b.rowHeadOnlyNum,X=b.isCharge,B=b.tableId,x=b.layoutChangeVisible,Q=b.style,i=b.selectedIds,m=b.canSelectAll,v=b.allWorksheetIsSelected,W=b.allowAdd,P=b.appId,u=b.viewId,l=b.worksheetId,T=b.projectId,G=b.controls,D=G===void 0?[]:G,M=b.data,se=b.lineNumberBegin,ae=b.rowIndex,ne=b.updateRows,de=b.sheetSwitchPermit,Ce=b.hideRows,he=b.onSelect,fe=b.onSelectAllWorksheet,Ee=b.handleAddSheetRow,Y=Ee===void 0?function(){}:Ee,oe=b.onReverseSelect,ve=oe===void 0?function(){}:oe,ue=b.saveSheetLayout,pe=b.resetSheetLayout,Se=b.setHighLight,ye=Se===void 0?function(){}:Se,J=b.refreshWorksheetControls,me=J===void 0?function(){}:J,be=b.onOpenRecord,xe=be===void 0?function(){}:be,Ae=b.columns,Ne=b.className,Me=(0,o.useState)(),Fe=(0,R.Z)(Me,2),Be=Fe[0],we=Fe[1],Ie=M[ae]||{},ge=m&&v?!n().includes(i,Ie.rowid):n().includes(i,Ie.rowid);function Re(Pe){if(m&&v){fe(!1),Pe&&he(M.map(function(ke){return ke.rowid}));return}i.length>0&&!Pe?he([]):he(M.map(function(ke){return ke.rowid}))}return(0,O.isEmpty)(Ie)&&ae>-1?o.createElement(I,{className:U()(Ne,"noRightBorder",{selected:ge}),style:Q}):o.createElement(I,{tableType:k,rowHeadOnlyNum:z,showOperate:w,className:U()(Ne,"flexRow noRightBorder",{selected:ge,hideNumber:!le,hasBatch:re}),style:Q,readonly:N||!re,onClick:function(ke){ke.target.classList.contains("cell")&&xe()}},ae!==-1&&o.createElement(o.Fragment,null,w&&!N&&!F&&!h?o.createElement(V.Z,(0,te.default)({appId:P,viewId:u,worksheetId:l,recordId:Ie.rowid,projectId:T,isCharge:X},{formdata:D.map(function(Pe){return(0,te.default)({},Pe,{value:Ie[Pe.controlId]})}),shows:["share","print","copy","openinnew","recreate","fav"],allowCopy:W&&Ie.allowedit,allowDelete:Ie.allowdelete,allowRecreate:W,sheetSwitchPermit:de,popupAlign:{offset:[0,4],points:["tl","bl"]},onUpdate:function(ke,We,Ve){n().find(Ve,function(it){return n().includes([10,11],it.type)&&/color/.test(it.value)})&&me(),ke.isviewdata?ne([We.rowid],n().omit(ke,["allowedit","allowdelete"])):Ce([We.rowid])},onCopySuccess:function(){ye(B,ae+1),Y.apply(void 0,arguments)},onDeleteSuccess:function(){Ce([Ie.rowid])},onPopupVisibleChange:function(ke){ke&&ye(B,ae)},onRecreate:function(){(0,j.GE)({rowId:Ie.rowid,worksheetId:l,columns:D}).then(function(ke){var We=ke.defaultData,Ve=ke.defcontrols;(0,s.Z)({worksheetId:l,appId:P,viewId:u,defaultFormData:We,defaultFormDataEditable:!0,directAdd:!1,writeControls:Ve,onAdd:function(Ge){ye(B,ae+1),Y((0,te.default)({},Ge),Ie.rowid),alert(_l("\u521B\u5EFA\u6210\u529F"))}})})}})):o.createElement("span",{className:"moreOperate",style:{width:24}}),(re||le)&&o.createElement("div",{className:"numberCon",style:{marginLeft:10,width:K}},le&&o.createElement("div",{className:"number"},se+ae+1),!N&&re&&o.createElement("div",{className:"checkbox"},o.createElement(L.Z,{checked:ge,size:"small",onClick:function(){i.indexOf(Ie.rowid)>-1?he(i.filter(function(ke){return ke!==Ie.rowid}),Ie.rowid):he(n().uniqBy(i.concat(Ie.rowid)),Ie.rowid)}})))),!N&&ae===-1&&o.createElement(o.Fragment,null,x&&o.createElement(C.Z,{onSave:ue,onCancel:pe}),o.createElement("div",{className:"topCheckbox",style:{right:k==="classic"?46:30,width:K}},re&&o.createElement("div",{className:"checkboxCon mTop3"},o.createElement(L.Z,{size:"small",clearselected:!!(M.length&&i.length&&i.length!==M.length),disabled:!M.length,checked:m&&v?!i.length:!!M.length&&i.length===M.length,onClick:function(ke,We,Ve){Ve.stopPropagation(),Re()}}),m&&o.createElement(Z.Z,{popupVisible:Be,onPopupVisibleChange:function(ke){we(ke)},popupAlign:{points:["tl","bl"],offset:[-32,10]},action:["click"],popup:o.createElement(g.Z,null,o.createElement(p.Z,{onClick:function(ke){ke.stopPropagation(),Re(!0),we(!1)}},_l("\u9009\u62E9\u672C\u9875\u8BB0\u5F55%02053")),o.createElement(p.Z,{onClick:function(ke){ke.stopPropagation(),we(!1),fe(!0)}},_l("\u9009\u62E9\u6240\u6709\u8BB0\u5F55%02054")),(i.length||v)&&o.createElement(p.Z,{onClick:function(ke){ke.stopPropagation(),we(!1),ve()}},_l("\u53CD\u9009%02055")))},o.createElement("i",{className:"icon icon-expand_more Hand",style:{position:"absolute",top:5,right:-15}}))))),k==="classic"&&function(){var Pe=o.createElement(c,{className:"openRecord",onClick:function(){return xe()}},o.createElement("i",{className:"icon icon-worksheet_enlarge Hand ThemeHoverColor3"}));return localStorage.getItem("row_head_no_show_tip")!=="1"?o.createElement(ce.Z,{destroyPopupOnHide:!0,popupPlacement:"bottom",text:function(){return document.querySelector(".cell.focus")?_l("\u6253\u5F00\u8BB0\u5F55\uFF08\u7A7A\u683C\uFF09"):_l("\u6253\u5F00\u8BB0\u5F55")},onToolTipVisibleChange:function(We){We&&setTimeout(function(){return localStorage.setItem("row_head_no_show_tip","1")},1e3)}},Pe):Pe}())}q.propTypes={readonly:r().bool,isTrash:r().bool,isDraft:r().bool,style:r().shape({}),allWorksheetIsSelected:r().bool,appId:r().string,viewId:r().string,worksheetId:r().string,projectId:r().string,controls:r().arrayOf(r().shape({})),canSelectAll:r().bool,className:r().string,data:r().arrayOf(r().shape({})),hideRows:r().func,lineNumberBegin:r().number,onSelect:r().func,onSelectAllWorksheet:r().func,rowIndex:r().number,selectedIds:r().arrayOf(r().string),sheetSwitchPermit:r().arrayOf(r().shape({})),updateRows:r().func,handleAddSheetRow:r().func,setHighLight:r().func,refreshWorksheetControls:r().func}},59292:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>u});var ce=t(94942),g=t.n(ce),p=t(36803),L=t(88106),te=t(52945),R=t.n(te),y=t(63239),a=t.n(y),r=t(85315),o=t(88239),d=t(12424),Z=t(91706),H=t(86735),U=t(67294),f=t(71893),V=t(96486),C=t.n(V),O=t(93967),n=t.n(O),s=t(40240),j=t(93002),A=t(53670),S=t(53280),I=t(45231),c=t(89499),q=t(15742),b=t(88902),k=t.n(b),ee=t(25734),re={DELETE:8,TAB:9,ENTER:13,LEFT:37,TOP:38,RIGHT:39,BOTTOM:40,ESC:27};function ie(l){var T=l.offsetLeft,G=l.offsetTop,D=l.offsetWidth,M=l.offsetHeight,se=void 0,ae=void 0,ne=l.parentElement.parentElement.scrollLeft,de=l.parentElement.parentElement.scrollTop,Ce=l.parentElement.parentElement.clientWidth,he=l.parentElement.parentElement.clientHeight,fe=T+D<=ne+Ce,Ee=T>=ne,Y=G>=de,oe=G+M<=de+he;return Ee||(se=T),fe||(se=T+D-Ce),Y||(ae=G),oe||(ae=G+M-he),{fullvisible:fe&&Ee&&Y&&oe,newLeft:se,newTop:ae}}function le(l){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},G=T.showColumnWidthChangeMask,D=T.tableType,M=T.isRelateRecordList,se=T.isSubList,ae=T.cache,ne=ae===void 0?{}:ae,de=T.onCellEnter,Ce=de===void 0?function(){}:de,he=T.onCellLeave,fe=he===void 0?function(){}:he,Ee=T.addNewRow,Y=Ee===void 0?function(){}:Ee,oe=T.setScroll,ve=T.focusCell,ue=T.handleTableKeyDown,pe=document.querySelector(".sheetViewTable.id-"+l+"-id"),Se=$(".sheetViewTable.id-"+l+"-id");function ye(Ne){var Me=$(Ne.originalEvent.target).closest(".cell"),Fe=Me.attr("class").match(/.*(row-[0-9]+) .*/);Fe&&Se&&(Se.find(".cell").removeClass("hover"),Se.find("."+Fe[1]).addClass("hover"),D==="classic"&&(Se.find(".cell").removeClass("grayHover"),Me[0].classList.contains("col-0")||Me.addClass("grayHover")),Ce(Me[0]))}function J(){Se&&(Se.find(".cell").removeClass("hover"),D==="classic"&&Se.find(".cell").removeClass("grayHover"),fe())}function me(Ne){var Me=void 0,Fe=void 0,Be=void 0,we=void 0,Ie=1;if(!C().isUndefined(ne.focusIndex)){var ge=window.isMacOs&&Ne.metaKey||!window.isMacOs&&Ne.ctrlKey;switch(ge&&(Ne.stopPropagation(),Ne.preventDefault()),Ne.keyCode){case re.LEFT:if(Ie=ne.focusIndex-1,Ie%ne.columnCount===0)return;ge&&(Me=!0,Ie=ne.focusIndex-ne.focusIndex%ne.columnCount+1);break;case re.TOP:Ie=ne.focusIndex-ne.columnCount,ge&&(Be=!0,Ie=ne.focusIndex%ne.columnCount);break;case re.RIGHT:case re.TAB:if(Ie=ne.focusIndex+1,Ie%ne.columnCount===0)if(Ne.keyCode===re.TAB)Ie+=1,Me=!0;else return;ge&&(Fe=!0,Ie=Math.ceil(ne.focusIndex/ne.columnCount)*ne.columnCount-1),Ie%ne.columnCount-1===ne.fixedColumnCount&&(Me=!0);break;case re.BOTTOM:Ie=ne.focusIndex+ne.columnCount,ge&&(we=!0,Ie=(ne.rowCount-1)*ne.columnCount+ne.focusIndex%ne.columnCount);break;default:break}if(!(Ie<1)){if(Ie>ne.rowCount*ne.columnCount-1){Ne.action==="text_enter_to_next"&&se&&(Y(),setTimeout(function(){ve(Ie)},100));return}var Re=pe.querySelector(".cell-"+Ie);if(Re){var Pe=ie(Re);Pe.fullvisible||oe(Pe.newLeft,Pe.newTop)}Me&&oe(0),Fe&&oe(1e4),Be&&oe(void 0,0),we&&oe(void 0,1e4),ve(Ie),Ne.stopPropagation(),Ne.preventDefault()}}}function be(){var Ne=pe.querySelector(".readOnlyTip");Ne&&Ne.parentElement.removeChild(Ne)}function xe(Ne){if(!(D!=="classic"||!(se||M)&&document.querySelector(".workSheetRecordInfo"))){if(be(),Ne.key==="Enter"){var Me=pe.querySelector(".cell-"+ne.focusIndex);if(Me&&(!Me.classList.contains("editable")||Me.className.match(/control-(30|31|38|32|33|47|37|25)/))){h(Me,Math.floor(ne.focusIndex/ne.columnCount)===ne.rowCount-1&&ne.rowCount!==1);return}}!ne.hasEditingCell&&C().includes([re.TAB,re.BOTTOM,re.TOP,re.LEFT,re.RIGHT],Ne.keyCode)?me(Ne):ue(ne.focusIndex,Ne)}}function Ae(Ne){be();var Me=C().includes((0,V.get)(Ne,"target.className")||"","allowOutClick");if(!((Ne.target.closest(".cellNeedFocus,.mui-dialog-container,.UploadFilesTriggerWrap,.rc-trigger-popup")||!se&&Ne.target.closest(".recordInfoCon"))&&!Me)&&(!Ne.target.closest(".sheetViewTable.id-"+l+"-id")||Me)){try{C().get(safeParse(window.tempCopyForSheetView),"tableId")===l&&(window.tempCopyForSheetView=void 0)}catch(Fe){}ve(-1e4)}}return c.uY.addListener("TRIGGER_CHANGE_COLUMN_WIDTH_MASK_"+l,G),Se.on("mouseenter",".cell:not(.row-head)",ye),Se.on("mouseleave",".cell:not(.row-head)",J),c.uY.addListener("TRIGGER_TABLE_KEYDOWN_"+l,xe),window.addEventListener("keydown",xe),document.body.addEventListener("click",Ae),function(){c.uY.removeListener("TRIGGER_CHANGE_COLUMN_WIDTH_MASK_"+l,G),Se.off("mouseenter",".cell:not(.row-head)",ye),Se.off("mouseleave",".cell:not(.row-head)",J),window.removeEventListener("keydown",xe),c.uY.removeListener("TRIGGER_TABLE_KEYDOWN_"+l,xe),document.body.removeEventListener("click",Ae)}}function E(l){var T=l.width,G=l.visibleColumns,D=l.sheetColumnWidths,M=void 0;function se(ne){var de=G[ne];return de.width||D[de.controlId]||200}if(C().sum([].concat((0,r.Z)(new Array(G.length))).map(function(ne,de){return se(de)}))<T){var ae=G.map(function(ne){return D[ne.controlId]||ne.width}).filter(C().identity);M=(T-C().sum(ae))/(G.length-ae.length)}return function(ne,de){var Ce=G[ne]||{};return Ce.width||D[Ce.controlId]||!de&&M||200}}function w(l,T,G){var D=(0,ee.Mb)({rules:G,recordId:l.rowid,data:T.map(function(ae){return(0,o.default)({},ae,{value:l[ae.controlId]})})}),M=!/^temp/.test(l.rowid)&&(0,ee.tf)(G,D,l.rowid),se={};return D.forEach(function(ae){if(M){se[l.rowid+"-"+ae.controlId]=(ae.fieldPermission[0]||"1")+"0"+(ae.fieldPermission[2]||"1");return}se[l.rowid+"-"+ae.controlId]=ae.fieldPermission||"111"}),se}function K(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},T=l.data,G=T===void 0?[]:T,D=l.controls,M=l.rules,se=l.isSubList,ae=l.columns,ne={};return G.forEach(function(de){var Ce=w(de,D,M);C().isEmpty(Ce)||k()(Ce).forEach(function(he){ne[he]=Ce[he]})}),ne}function N(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",T=arguments[1],G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",D=void 0,M=document.createElement("div");return M.innerText=l,M.style=G,M.style.width=T+"px",M.style.position="absolute",M.style.left="-10000px",M.style.bottom="-10000px",document.body.appendChild(M),D=M.clientHeight,document.body.removeChild(M),D}function F(l){var T=Math.max.apply(Math,(0,r.Z)(l.map(function(G){return N(G.controlName,G.width,"font-size: 13px;line-height: 1.3em;word-break: break-all;")})));return T<18?18:T>68?68:T}function h(l,T){var G=document.createElement("div");G.classList.add("readOnlyTip"),G.innerText=_l("\u5F53\u524D\u5B57\u6BB5\u4E0D\u53EF\u7F16\u8F91"),G.style.display="block",T?(G.style.borderBottom="none",G.style.top=l.offsetTop-30+3+"px"):(G.style.borderTop="none",G.style.top=l.offsetTop+l.offsetHeight-3+"px"),G.style.left=l.offsetLeft+"px",G.style.width=l.clientWidth+"px",l.parentElement.appendChild(G)}var z=t(43113),X=t(69601),B=t(45697),x=t.n(B),Q=(0,H.Z)([`
  position: absolute;
  text-align: center;
  width: 100%;
  height: 36px;
  top: 35px;
  line-height: 34px;
  background: #d8effe;
  .green {
    color: #30ae01;
  }
`],[`
  position: absolute;
  text-align: center;
  width: 100%;
  height: 36px;
  top: 35px;
  line-height: 34px;
  background: #d8effe;
  .green {
    color: #30ae01;
  }
`]),i=f.ZP.div(Q);function m(l){return U.createElement(i,null,U.createElement("div",{className:"ThemeColor3"},_l('\u6CA1\u6709\u641C\u7D22\u5230"'),U.createElement("span",{class:"green"},l.keyWords),_l('"\u76F8\u5173\u7684\u8BB0\u5F55')))}m.propTypes={keyWords:x().string};var v=(0,H.Z)([`
  font-size: 13px;
  user-select: text !important;
  .colorTag {
    position: absolute;
    width: 4px;
    border-radius: 3px;
    display: inline-block;
  }
  .cell {
    background-color: #fff;
    border: 1px solid rgba(0, 0, 0, 0.09) !important;
    border-left: none !important;
    border-top: none !important;
    padding: 7px 6px;
    overflow: hidden;
    .ghostAngle {
      display: none;
    }
    &.lastFixedColumn {
      border-right-width: 2px !important;
    }
    &.highlight,
    &.highlightFromProps {
      background-color: #f5fbff !important;
      .editIcon {
        background-color: #f5fbff !important;
      }
    }
    &.grayHover:not(.cellControlErrorStatus):not(.placeholder) {
      box-shadow: inset 0 0 0 1px #e0e0e0 !important;
    }
    &.focus:not(.cellControlErrorStatus):not(.control-10.isediting):not(.control-11.isediting) {
      box-shadow: inset 0 0 0 2px #2d7ff9 !important;
      z-index: 2;
    }
  }
  .row-head {
    background-color: #fafafa !important;
  }
  .readOnlyTip {
    position: absolute;
    display: none;
    border: 2px solid #2d7ff9;
    background: #fff;
    padding: 4px 5px;
    color: #bdbdbd;
    z-index: 9;
    white-space: nowrap;
    overflow: hidden;
  }
  `,`
  &.isChangeColumnWidth {
    * {
      user-select: none !important;
    }
  }
  &.hideVerticalLine {
    .cell:not(.lastFixedColumn) {
      border-right: none !important;
    }
  }
  &.showAsZebra {
    .cell.oddRow {
      background-color: #fafafa;
    }
  }
  &:not(.classic) {
    .cell.hover:not(.isediting):not(.highlight):not(.highlightFromProps) {
      background-color: rgba(0, 0, 0, 0.04) !important;
      .editIcon {
        background-color: transparent !important;
      }
    }
  }
  &.classic {
    .cell.canedit:not(.isediting):not(.focus) {
      .editIcon {
        display: none !important;
      }
    }
    .cell.canedit:not(.isediting):is(.control-2, .control-3, .control-5, .control-7, .control-6, .control-8) {
      .editIcon {
        display: none !important;
      }
    }
  }
`],[`
  font-size: 13px;
  user-select: text !important;
  .colorTag {
    position: absolute;
    width: 4px;
    border-radius: 3px;
    display: inline-block;
  }
  .cell {
    background-color: #fff;
    border: 1px solid rgba(0, 0, 0, 0.09) !important;
    border-left: none !important;
    border-top: none !important;
    padding: 7px 6px;
    overflow: hidden;
    .ghostAngle {
      display: none;
    }
    &.lastFixedColumn {
      border-right-width: 2px !important;
    }
    &.highlight,
    &.highlightFromProps {
      background-color: #f5fbff !important;
      .editIcon {
        background-color: #f5fbff !important;
      }
    }
    &.grayHover:not(.cellControlErrorStatus):not(.placeholder) {
      box-shadow: inset 0 0 0 1px #e0e0e0 !important;
    }
    &.focus:not(.cellControlErrorStatus):not(.control-10.isediting):not(.control-11.isediting) {
      box-shadow: inset 0 0 0 2px #2d7ff9 !important;
      z-index: 2;
    }
  }
  .row-head {
    background-color: #fafafa !important;
  }
  .readOnlyTip {
    position: absolute;
    display: none;
    border: 2px solid #2d7ff9;
    background: #fff;
    padding: 4px 5px;
    color: #bdbdbd;
    z-index: 9;
    white-space: nowrap;
    overflow: hidden;
  }
  `,`
  &.isChangeColumnWidth {
    * {
      user-select: none !important;
    }
  }
  &.hideVerticalLine {
    .cell:not(.lastFixedColumn) {
      border-right: none !important;
    }
  }
  &.showAsZebra {
    .cell.oddRow {
      background-color: #fafafa;
    }
  }
  &:not(.classic) {
    .cell.hover:not(.isediting):not(.highlight):not(.highlightFromProps) {
      background-color: rgba(0, 0, 0, 0.04) !important;
      .editIcon {
        background-color: transparent !important;
      }
    }
  }
  &.classic {
    .cell.canedit:not(.isediting):not(.focus) {
      .editIcon {
        display: none !important;
      }
    }
    .cell.canedit:not(.isediting):is(.control-2, .control-3, .control-5, .control-7, .control-6, .control-8) {
      .editIcon {
        display: none !important;
      }
    }
  }
`]),W=(0,f.ZP)(Z.Z)(v,function(l){var T=l.controlStyles;return T||""});function P(l,T){var G=this,D=l.fromModule,M=D===void 0?q.i7.APP:D,se=l.showControlStyle,ae=l.enableRules,ne=ae===void 0?!0:ae,de=l.recordColorConfig,Ce=l.showHead,he=Ce===void 0?!0:Ce,fe=l.appId,Ee=l.worksheetId,Y=l.viewId,oe=l.tableType,ve=l.className,ue=l.noRenderEmpty,pe=l.loading,Se=l.isSubList,ye=l.isRelateRecordList,J=l.readonly,me=l.controls,be=l.projectId,xe=l.columns,Ae=l.lineEditable,Ne=l.width,Me=l.height,Fe=l.setHeightAsRowCount,Be=l.rowCount,we=l.rowHeight,Ie=we===void 0?34:we,ge=l.rowHeightEnum,Re=l.showRowHead,Pe=Re===void 0?!0:Re,ke=l.showSearchEmpty,We=ke===void 0?!0:ke,Ve=l.disablePanVertical,it=l.defaultScrollLeft,Ge=l.sheetViewHighlightRows,pt=Ge===void 0?{}:Ge,ot=l.cellErrors,vt=ot===void 0?{}:ot,At=l.clearCellError,yt=At===void 0?function(){}:At,st=l.fixedColumnCount,St=st===void 0?0:st,Qe=l.renderColumnHead,Xe=l.renderFooterCell,$e=l.cellPopupContainer,Ke=l.sheetSwitchPermit,Ue=l.from,He=l.isTrash,ze=l.allowlink,gt=l.addNewRow,Et=l.cellUniqueValidate,ft=l.onUpdateRules,qe=ft===void 0?function(){}:ft,nt=l.tableFooter,Ze=l.emptyIcon,et=l.emptyText,ut=l.sheetIsFiltered,xt=l.allowAdd,wt=l.noRecordAllowAdd,kt=l.showNewRecord,Rt=l.keyWords,jt=l.showSummary,fn=jt===void 0?!1:jt,Mt=l.scrollBarHoverShow,sn=l.showVerticalLine,on=sn===void 0?!0:sn,en=l.showAsZebra,$t=en===void 0?!0:en,an=l.wrapControlName,tn=an===void 0?!1:an,mt=l.rowHeadWidth,Lt=mt===void 0?70:mt,zt=l.renderRowHead,Zt=l.onColumnWidthChange,Nt=Zt===void 0?function(){}:Zt,ct=l.onCellClick,De=l.onFocusCell,_e=De===void 0?function(){}:De,Le=l.masterFormData,rt=Le===void 0?function(){return[]}:Le,Ct=l.masterData,dt=Ct===void 0?function(){}:Ct,It=l.updateCell,bt=M===q.i7.RELATE_RECORD,Ut=(0,j.Z)({tableId:l.tableId||Math.random().toString(32).slice(2),rules:(ne||bt)&&l.rules&&l.rules.length?l.rules:[],rulesLoading:!l.rules&&(ne||bt),data:l.data,maskVisible:!1,isChangeColumnWidth:!1,sheetColumnWidths:l.sheetColumnWidths||{}}),Xt=(0,d.Z)(Ut,2),pn=Xt[0],tt=Xt[1],ht=pn.tableId,Dt=pn.rules,Ot=pn.data,Ht=pn.maskVisible,Kt=pn.isChangeColumnWidth,dn=pn.sheetColumnWidths,Cn=pn.maskLeft,Rn=Cn===void 0?0:Cn,gn=pn.maskMinLeft,wn=gn===void 0?0:gn,On=pn.maskMaxLeft,An=On===void 0?0:On,Yn=pn.maskOnChange,kn=(0,A.o)({}),Fn=(0,d.Z)(kn,2),$n=Fn[0],ba=Fn[1],ua=(0,A.o)({}),La=(0,d.Z)(ua,2),ga=La[0],Ua=La[1],yr=(0,U.useMemo)(function(){return Dt.length?K({isSubList:Se,columns:xe,controls:me,rules:Dt,data:Ot}):{}},[]),sr=(0,U.useState)(yr),Ba=(0,d.Z)(sr,2),cr=Ba[0],hr=Ba[1],Qa=(0,U.useRef)();window.tableRef=Qa;var da=(0,U.useCallback)(function(ea){hr(function(Xn){return(0,o.default)({},Xn||{},ea)})},[]),Jn=(0,U.useMemo)(function(){return(Pe?[{type:"rowHead",width:Lt}]:[]).concat(xe).concat({type:"emptyForResize",width:60}).filter(function(ea){return!C().includes(q.CC,ea.type)})},[xe,Lt]),ra=Be||Ot.length,ha=Se&&Ot.filter(function(ea){return ea.rowid}).length,Ia=Jn.filter(function(ea){return ea.type!=="emptyForResize"}).length,wa=Me,Ka=(0,U.useCallback)(E({width:Ne,visibleColumns:Jn,sheetColumnWidths:dn}),[Ne,Jn,dn]),tr=(0,U.useMemo)(function(){if(!tn)return 34;var ea=F(Jn.map(function(Xn,Va){return(0,o.default)({},Xn,{width:Ka(Va)})}));return ea+16},[Jn]);if(Fe||!C().isUndefined(Be)){var Tr=C().sum(Jn.map(function(ea,Xn){return Ka(Xn,!0)||200}))>Ne;wa=ra*Ie+34+(Tr?(0,c.Iz)():0),Se&&(C().last(Ot)||{}).isSubListFooter&&(wa-=Ie-26)}function xr(ea){var Xn=ea.columnWidth,Va=ea.defaultLeft,$a=ea.maskMinLeft,vr=ea.callback;tt({maskVisible:!0,isChangeColumnWidth:!0,maskLeft:Va,maskMinLeft:$a||Va-(Xn-10),maskMaxLeft:window.innerWidth,maskOnChange:function(ur){var Kr=Xn+(ur-Va);vr(Kr),tt({maskVisible:!1}),setTimeout(function(){tt({isChangeColumnWidth:!1}),(0,c.MO)()},100)}})}function _a(ea){if(ba("focusIndex",ea>0?ea:void 0),[].concat((0,r.Z)(Qa.current.dom.current.querySelectorAll(".cell"))).forEach(function(Er){Er.classList.remove("focus"),Er.classList.remove("rowHadFocus");var ur=Er.querySelector("input");ur&&Er.removeChild(ur)}),ea!==-1e4){var Xn=Qa.current&&Qa.current.dom.current.querySelector(".cell-"+ea);Xn.classList.contains("emptyRow")&&$n.data[Math.floor(ea/Ia)]&&_e($n.data[Math.floor(ea/Ia)],ea);var Va=Qa.current.dom.current.querySelector(".cell-"+(ea-ea%Ia));if(Xn){var $a=ie(Xn);if($a.fullvisible||Qa.current.setScroll($a.newLeft),Xn.classList.add("focus"),Xn.classList.contains("focusInput")){var vr=document.createElement("input");vr.className="body",vr.style="position: absolute; left: 0px; top: -40px;",Xn.appendChild(vr),vr.addEventListener("compositionend",function(Er){setTimeout(function(){c.uY.emit("TRIGGER_TABLE_KEYDOWN_"+ht,{key:Er.target.value,isInputValue:!0,stopPropagation:function(){},preventDefault:function(){}})},10)}),vr.onkeydown=function(Er){Er.keyCode===229&&Er.stopPropagation()},vr.focus()}Va.classList.add("rowHadFocus")}}}function gr(ea,Xn){if(!C().isUndefined(ea)){var Va=ga[ea];!Xn.isInputValue&&(Xn.target&&Xn.target.classList.contains("stopPropagation")||Xn.key==="Enter"&&Xn.target.tagName.toLowerCase()!=="body"&&!Xn.target.classList.contains("body")&&!Xn.target.classList.contains("mdModalWrap")&&!Xn.target.classList.contains("nano-content"))&&!(C().includes([26,27],Va.props.cell.type)&&Xn.key!=="Enter")||Va&&C().isFunction(Va.handleTableKeyDown)&&Va.handleTableKeyDown(Xn,$n)}}(0,U.useImperativeHandle)(T,function(){return{refs:Qa.current,rules:Dt}});function zr(){I.Z.getControlRules({type:1,worksheetId:Ee}).then(function(ea){ea.length?(qe(ea),da(K({isSubList:Se,columns:xe,controls:me,rules:ea,data:Ot})),tt({rules:ea,rulesLoading:!1})):tt({rulesLoading:!1})})}return(0,U.useEffect)(function(){var ea=ra;Se&&C().find(Ot,function(Xn){return Xn.isSubListFooter})&&(ea-=1),ba("columnCount",Ia),ba("rowCount",ea),ba("fixedColumnCount",St),_a(-1e4)},[Ia,ra,St,ha]),(0,U.useEffect)(function(){tt({sheetColumnWidths:l.sheetColumnWidths||{}})},[l.sheetColumnWidths]),(0,U.useEffect)(function(){Qa.current.forceUpdate()},[oe,Ne,Ie,Lt,St,xe.map(function(ea){return ea.controlId}).join(","),a()(dn)]),(0,U.useEffect)(function(){ba("data",Ot);var ea=l.data.filter(function($a){return!$a.isSubListFooter}),Xn=Ot.filter(function($a){return!$a.isSubListFooter}),Va=[];$n.prevColumns&&!C().isEqual($n.prevColumns.map(function($a){return $a.fieldPermission}),xe.map(function($a){return $a.fieldPermission}))?Va=l.data:(0,c.CD)(ea).length!==(0,c.CD)(Xn).length&&(0,c.CD)(ea).length>(0,c.CD)(Xn).length?Va=ea.filter(function($a){return!C().find(Xn,function(vr){return vr.rowid===$a.rowid})}):C().intersection(ea.map(function($a){return $a.rowid}),Xn.map(function($a){return $a.rowid})).length?l.data.forEach(function($a){var vr=C().find(Ot,function(Er){return Er.rowid===$a.rowid});vr&&!C().isEqual(vr,$a)&&Va.push($a)}):Va=ea,tt({data:l.data}),Va.length&&Dt.length&&da(K({isSubList:Se,columns:xe,controls:me,rules:Dt,data:Va}))},[l.data]),(0,U.useEffect)(function(){ba("prevColumns",xe)},[xe]),(0,U.useEffect)(le.bind(null,ht,{cache:$n,tableType:oe,isSubList:Se,isRelateRecordList:ye,showColumnWidthChangeMask:xr,focusCell:_a,handleTableKeyDown:gr,addNewRow:gt,setScroll:function(){var Xn;return(Xn=Qa.current).setScroll.apply(Xn,arguments)}}),[]),(0,U.useEffect)(function(){pn.rulesLoading&&zr()},[]),U.createElement(U.Fragment,null,Ht&&U.createElement(S.Z,{value:Rn,min:wn,max:An,onChange:Yn}),U.createElement(W,{controlStyles:se&&(0,c.wV)(Jn),disablePanVertical:Ve,noRenderEmpty:ue,loading:pe,ref:Qa,className:n()("worksheetTableComp sheetViewTable id-"+ht+"-id",ve,oe,{scrollBarHoverShow:Mt,hideVerticalLine:!on,showAsZebra:$t,isChangeColumnWidth:Kt}),width:Ne,height:wa,hasSubListFooter:Se&&(C().last(Ot)||{}).isSubListFooter,columnHeadHeight:tr,setHeightAsRowCount:Fe,sheetColumnWidths:dn,rowHeight:Ie,defaultScrollLeft:it,getColumnWidth:Ka,rowCount:ra,columnCount:Jn.length,leftFixedCount:St+1,Cell:z.Z,showHead:he,showFoot:fn,tableData:{tableId:ht,isTrash:He,from:Ue,allowlink:ze,isSubList:Se,fromModule:M,appId:fe,worksheetId:Ee,viewId:Y,projectId:be,tableType:oe,controls:me,visibleColumns:Jn,columns:xe,cellColumnCount:Ia,rowHeight:Ie,rowHeightEnum:ge,fixedColumnCount:St,columnHeadHeight:tr,recordColorConfig:de,cellErrors:vt,lineEditable:!J&&Ae,rulePermissions:cr,masterData:dt,masterFormData:rt,sheetViewHighlightRows:pt,sheetSwitchPermit:Ke,cache:$n,rows:Ot,clearCellError:yt,updateSheetColumnWidths:function(Xn){var Va=Xn.controlId,$a=Xn.value;Nt(Va,$a),tt({sheetColumnWidths:R()({},dn,(0,L.default)({},Va,$a))})},getPopupContainer:function(Xn){return $e||document.querySelector(".sheetViewTable.id-"+ht+"-id "+(Xn?".main-left":".main-center"))||document.body},enterEditing:function(Xn){oe==="classic"&&$n.focusIndex!==Xn&&_a(Xn)},onCellClick:ct,onFocusCell:function(Xn){var Va=Xn.row,$a=Xn.cellIndex,vr=Xn.rowIndex,Er=Xn.columnIndex;_e(Va,$a),_a(vr*Ia+Er)},checkRulesErrorOfControl:function(Xn,Va){return(0,c.eD)({from:3,rules:Dt,controls:me,control:Xn,row:Va})},cellUniqueValidate:Et,scrollTo:function(){var Xn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Va=Xn.left,$a=Xn.top;Qa.current.setScroll(Va,$a)},updateCell:function(){var Xn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Va=Xn.row,$a=Xn.rowIndex,vr=Xn.args,Er=Xn.options;It(vr,(0,o.default)({},Er,{updateSuccessCb:function(){var ur=(0,p.Z)(g().mark(function Kr(Fr){return g().wrap(function(eo){for(;;)switch(eo.prev=eo.next){case 0:Dt.length&&da(w(Fr,(Se?xe:me).map(function(wr){return(0,o.default)({},wr,{fieldPermission:wr.fieldPermission})}),Dt));case 1:case"end":return eo.stop()}},Kr,G)}));return function(Fr){return ur.apply(this,arguments)}}()}))},registerRef:function(Xn,Va){Ua(Va,Xn)},renderFunctions:{head:Qe,foot:Xe,rowHead:zt}},renderEmpty:function(Xn){var Va=Xn.style;if(!(Rt&&We))return U.createElement(X.Z,{icon:Ze,text:et,style:Va,sheetIsFiltered:ut,allowAdd:xt&&wt,showNewRecord:kt})},tableFooter:nt}),!Ot.length&&We&&Rt&&U.createElement(m,{keyWords:Rt}))}const u=(0,s.Z)((0,U.forwardRef)(P))},40979:(lt,Te,t)=>{"use strict";t.d(Te,{Y8:()=>j,wd:()=>s,zF:()=>H});var ce=t(63239),g=t.n(ce),p=t(88239),L=t(88902),te=t.n(L);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(45231);var y=t(30381),a=t.n(y);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(36021);if(!/^(1887|7596|7798)$/.test(t.j))var o=t(15742);var d=t(96486),Z=t.n(d),H=function(S){var I=S.sourceName,c=S.templateId,q=S.sourceId,b=S.projectId,k=S.appconfig,ee=k===void 0?{}:k,re=function(E){return location.href.indexOf("application")>-1?encodeURIComponent(location.href):encodeURIComponent("/app/"+ee.appId+"/"+ee.appSectionId+"/"+E+"/"+(ee.viewId||""))},ie="/worksheet/field/edit?projectId="+b+"&sourceName="+encodeURIComponent(I);ee.appId&&(ie+="&appId="+ee.appId),q?(ie+="&sourceId="+q+"&fromURL="+re(q)+"&templateId="+c,(0,r.T8)(ie)):R.Z.addWorksheet({name:I,projectid:b,sourceType:1}).then(function(le){ie+="&sourceId="+le.id+"&fromURL="+re(le.id)+"&templateId="+le.templateId,(0,r.T8)(ie)})},U=function(S,I){switch(I){case 10:{var c="",q=[],b=_.forIn(S.value,function(k,ee){k||delete S.value[ee]});return _Object$keys(b).forEach(function(k){c?c.length>k.length?(q=c.split(""),q.splice(c.length-k.length,1,"1"),c=q.join("")):c=k.substr(0,k.length-c.length)+c:c=k}),S.value?c:""}case 14:return S.value&&(S.value.attachments=formatTemporaryData(S.value.attachments).map(function(k){var ee=!1;return k.twice&&(ee=!0),_extends({},k,{isEdit:ee})}),S.value.knowledgeAtts=formatKcAttachmentData(S.value.knowledgeAtts).map(function(k){var ee=!1;return k.isUpload||(ee=!0),_extends({},k,{isEdit:ee})})),S.value?_JSON$stringify(S.value):"";case 15:return S.value?moment(S.value).format("YYYY-MM-DD"):"";case 16:return S.value?moment(S.value).format("YYYY-MM-DD HH:mm"):"";case 17:case 18:return S.value?_JSON$stringify(S.value.map(function(k){return moment(k).format("YYYY-MM-DD HH:mm")})):"";case 19:case 23:case 24:return S.value?S.value[S.value.length-1].id:"";case 27:return S.value?_JSON$stringify([S.value]):"";case 21:case 26:case 28:return S.value?_JSON$stringify(S.value):"";case 29:return S.value?_JSON$stringify(S.value.map(function(k){return _extends({},k,{sourcevalue:{}})})):"";default:return S.value?typeof S.value=="string"?S.value:S.value.toString():""}},f=function(S){switch(S.type){case 14:{var I={attachments:[],knowledgeAtts:[],attachmentData:[]},c=S.value?JSON.parse(S.value):{};return c&&c.map&&c.map(function(q,b,k){return q.refType?I.knowledgeAtts.push(q):I.attachments.push(q),null}),I}case 17:case 18:{if(S.value)try{return JSON.parse(S.value).filter(function(q){return q}).length>0?JSON.parse(S.value).map(function(q){return q?moment(q).format("x"):""}):""}catch(q){return S.value.split(",").filter(function(b){return b}).length>0?S.value.split(",").map(function(b){return b||""}):""}break}case 15:case 16:return S.value?JSON.parse(moment(S.value).format("x")):"";case 21:case 26:case 28:case 29:return S.value?JSON.parse(S.value):"";case 27:return S.value?JSON.parse(S.value)[0]:"";default:return S.value}};function V(A){return A.map(function(S){var I=Math.floor(S/1e3);switch(I){case 301:return S===301100?_l("\u53EF\u67E5\u770B\u5168\u90E8"):_l("\u53EF\u67E5\u770B%0",SUB_PERMISSION_NAME[S-301e3]);case 302:return _l("\u53EF\u7F16\u8F91%0",SUB_PERMISSION_NAME[S-302e3]);case 303:return _l("\u53EF\u5206\u4EAB%0",SUB_PERMISSION_NAME[S-303e3]);case 304:return _l("\u53EF\u5BFC\u51FA%0",SUB_PERMISSION_NAME[S-304e3]);default:return""}}).filter(function(S){return S}).join("\u3001")}function C(A){var S=window.localStorage.getItem("worksheet_hided_columns_"+md.global.Account.accountId+"_"+A);return S?S.split(","):[]}function O(A,S){safeLocalStorageSetItem("worksheet_hided_columns_"+md.global.Account.accountId+"_"+A,S.join(","))}var n=function(S){return[VIEW_DISPLAY_TYPE.gallery,VIEW_DISPLAY_TYPE.board].includes(String(S))},s=function(S){return[o.B.gallery,o.B.board,o.B.structure,o.B.detail].includes(String(S))},j=function(S){var I=S.viewType,c=S.advancedSetting,q=c===void 0?{}:c,b=S.coverType,k=b===void 0?0:b;if(o.B.gallery===String(I)){var ee=q,re=ee.coverposition,ie=re===void 0?"2":re;return ie==="2"&&k>=2&&(k=0),(0,p.default)({},S,{coverType:k,advancedSetting:(0,p.default)({},q,{coverposition:ie})})}else{var le=q,E=le.coverposition,w=E===void 0?"0":E,K={};return w==="2"&&(w="0"),o.B.sheet===String(I)&&(q=(0,p.default)({},q,{enablerules:"1"})),o.B.detail===String(I)&&(K={childType:2}),(0,p.default)({},S,{coverType:k,advancedSetting:(0,p.default)({},q,{coverposition:w})},K)}}},15742:(lt,Te,t)=>{"use strict";t.d(Te,{B:()=>S,CC:()=>w,D:()=>I,DZ:()=>h,G7:()=>z,GP:()=>s,ML:()=>K,Pd:()=>q,dN:()=>b,i7:()=>ie,lL:()=>N,lt:()=>L,nh:()=>le,uG:()=>E,v4:()=>F,wn:()=>ee,yM:()=>X,zn:()=>re});var ce=t(96486),g=t.n(ce),p=t(86674),L={CUSTOM_ROLE:0,DEVELOPERS_ROLE:1,RUNNER_ROLE:2,RUNNER_DEVELOPERS_ROLE:3,ADMIN_ROLE:100,POSSESS_ROLE:200,MAP_OWNER:300},te={WORKSHEET:1,APP:2},R={DESCRIPTION:1,CHARGE:2,ADMIN:3,MEMBERS:4},y={DESCRIPTION:_l("\u5DE5\u4F5C\u8868\u63CF\u8FF0"),CHARGE:_l("\u8D1F\u8D23\u4EBA"),ADMIN:_l("\u7BA1\u7406\u5458"),MEMBERS:_l("\u666E\u901A\u6210\u5458")},a=50,r={DEFAULT:0,APKROLE:1,APK:2,ALL:99},o={ALL:99,MAIN_WEB:0,APP_PACKAGE:1,APP:2,WORKSHEET:3,KC:4,FOLDER:5},d={NONE:0,ADMIN:1,PREFABRICATED_ADMIN:2,PREFABRICATED:3,OBSERVER:4,WOKESHEETNOTICE:5,ALLROLE:99,CHARGE:9999},Z={CHARGE:_l("\u8D1F\u8D23\u4EBA"),2:_l("\u7BA1\u7406\u5458"),3:_l("\u666E\u901A\u6210\u5458"),5:_l("\u901A\u77E5\u4EBA")},H={CHARGE:_l("\u62E5\u6709\u5DE5\u4F5C\u8868\u6240\u6709\u6743\u9650"),2:_l("\u9664\u5220\u9664\u5DE5\u4F5C\u8868\u4EE5\u5916\u7684\u6240\u6709\u6743\u9650"),5:_l("\u5F53\u589E\u52A0\u3001\u5220\u9664\u8BB0\u5F55\u65F6\u5C06\u6536\u5230\u901A\u77E5\u3002\u540C\u65F6\u62E5\u6709\u666E\u901A\u6210\u5458\u7684\u6743\u9650")},U={ALL:0,NORMAL:1,UNAUDITED:2,REFUSED:3},f={VISIBLE:301,EDIT:302,SHARE:303,EXPORT:304},V={ALL:100,MY:101},C={100:_l("\u53EF\u89C1\u7684\u8BB0\u5F55"),101:_l("\u81EA\u5DF1\u62E5\u6709\u7684\u8BB0\u5F55")},O={301:_l("\u53EF\u89C1"),302:_l("\u7F16\u8F91"),303:_l("\u5206\u4EAB"),304:_l("\u5BFC\u51FA")},n={NONE:0,ALL:1,SELF:2},s={WORKSHEET:1,WORKSHEET_ROW_LAND:2,CHAT:3,WORKFLOW:4,DRAFT:21},j={2:_l("\u6587\u672C\u6846"),3:_l("\u7535\u8BDD\u53F7\u7801"),4:_l("\u7535\u8BDD\u53F7\u7801"),5:_l("\u90AE\u4EF6\u5730\u5740"),6:_l("\u6570\u503C"),7:_l("\u8BC1\u4EF6"),8:_l("\u91D1\u989D"),9:_l("\u9009\u9879"),10:_l("\u9009\u9879"),11:_l("\u5355\u9009\u4E0B\u62C9\u83DC\u5355"),14:_l("\u9644\u4EF6"),15:_l("\u65F6\u95F4"),16:_l("\u65F6\u95F4"),17:_l("\u65F6\u95F4\u6BB5"),18:_l("\u65F6\u95F4\u6BB5"),19:_l("\u5730\u533A"),20:_l("\u516C\u5F0F"),21:_l("\u81EA\u7531\u8FDE\u63A5"),23:_l("\u5730\u533A"),24:_l("\u5730\u533A"),25:_l("\u5927\u5199\u91D1\u989D"),26:_l("\u4EBA\u5458\u9009\u62E9"),27:_l("\u90E8\u95E8\u9009\u62E9"),28:_l("\u7B49\u7EA7"),29:_l("\u5173\u8054\u4ED6\u8868"),30:_l("\u4ED6\u8868\u5B57\u6BB5"),31:_l("\u516C\u5F0F"),32:_l("\u6587\u672C\u7EC4\u5408"),33:_l("\u81EA\u52A8\u7F16\u53F7"),36:_l("\u68C0\u67E5\u9879"),10010:_l("\u5907\u6CE8")},A=function(x){var Q={};return g().keys(x).forEach(function(i){Q[Q[i]=x[i]]=i}),Q},S=A({0:"sheet",1:"board",4:"calendar",3:"gallery",2:"structure",5:"gunter",6:"detail",7:"resource",21:"customize",8:"map"}),I=[{icon:"table",color:"#3793FF",text:_l("\u8868\u683C%05017"),id:"sheet"},{icon:"kanban",color:"#00BCD4",text:_l("\u770B\u677F%05016"),id:"board"},{icon:"event",color:"#00C345",text:_l("\u65E5\u5386%05015"),id:"calendar"},{icon:"gallery_view",color:"#F5BF00",text:_l("\u753B\u5ECA%05014"),id:"gallery"},{icon:"reader",color:"#FF9300",text:_l("\u8BE6\u60C5"),id:"detail"},{icon:"hierarchy",color:"#FF3D3D",text:_l("\u5C42\u7EA7%05013"),id:"structure"},{icon:"location_map",color:"#EB2F96",text:_l("\u5730\u56FE"),id:"map"},{icon:"gantt",color:"#8A2AEB",text:_l("\u7518\u7279\u56FE%05012"),id:"gunter"},{icon:"person_three",color:"#2F4EEB",text:_l("\u8D44\u6E90"),id:"resource"},{icon:"puzzle",color:"#757575",text:_l("\u63D2\u4EF6"),id:"customize"}],c={0:50,1:50,2:100,3:50,4:1e3},q={IMMEDIATELY:1,CONFIRM:2,FILL_RECORD:3},b=[34,62,88,142],k={STRING:0,HTML:1,COMPONENT:2},ee={CARD:1,LIST:2,DROPDOWN:3,TABLE:5,TAB_TABLE:6},re={CARD:1,LIST:2,TEXT:3,EMBED_LIST:5,TAB_LIST:6},ie={APP:1,RELATE_RECORD:2,SUBLIST:3},le=[{controlId:"ownerid",controlName:_l("\u62E5\u6709\u8005"),controlPermissions:"111",type:26,enumDefault:0,display:!0},{controlId:"caid",controlName:_l("\u521B\u5EFA\u4EBA"),controlPermissions:"100",type:26,display:!0},{controlId:"ctime",controlName:_l("\u521B\u5EFA\u65F6\u95F4"),controlPermissions:"100",type:16,display:!0},{controlId:"utime",controlName:_l("\u6700\u8FD1\u4FEE\u6539\u65F6\u95F4"),controlPermissions:"100",type:16,display:!0}],E=[2,3,4,5,6,7,8,9,10,11,14,15,16,19,23,24,26,27,28,29,35,36,40,41,46,48],w=[10010,22,43,45,49,51,51,p.DN.SECTION],K=[p.DN.TEXT,p.DN.NUMBER,p.DN.MONEY,p.DN.EMAIL,p.DN.DATE,p.DN.DATE_TIME,p.DN.TIME,p.DN.MOBILE_PHONE,p.DN.TELEPHONE,p.DN.AREA_PROVINCE,p.DN.AREA_CITY,p.DN.AREA_COUNTY,p.DN.DROP_DOWN,p.DN.FLAT_MENU,p.DN.MULTI_SELECT,p.DN.USER_PICKER,p.DN.DEPARTMENT,p.DN.ORG_ROLE,p.DN.SWITCH,p.DN.SCORE,p.DN.RICH_TEXT,p.DN.CRED,p.DN.RELATE_SHEET],N={OPEN_RECORD:"0",OPEN_LINK:"1",NONE:"2"},F={LINE:"0",LINE_BG:"1",BG:"2"},h={DISABLED:0,ENABLED:1,DELETED:2,EXPIRED:3},z={DEVELOPMENT:0,PUBLISH:1,IMPORT:2},X={NORMAL:1,NO_CONFIG:2,NOT_PUBLISH:3,LOAD_SCRIPT_SUCCESS:4,LOAD_SCRIPT_ERROR:5,DELETED:6,DEVELOPING:7,EXPIRED:8}},5631:(lt,Te,t)=>{"use strict";t.d(Te,{GO:()=>S,Kj:()=>I,ib:()=>A,q5:()=>j,tg:()=>s});var ce=t(88902),g=t.n(ce),p=t(88239),L=t(63239),te=t.n(L),R=t(46593),y=t.n(R),a=t(94942),r=t.n(a),o=t(36803),d=t(45231),Z=t(48446),H=t(98306);if(!/^(1887|7596|7798)$/.test(t.j))var U=t(24607);if(!/^(1887|7596|7798)$/.test(t.j))var f=t(15742);if(!/^(1887|7596|7798)$/.test(t.j))var V=t(86674);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(89499);var O=t(96486),n=t.n(O),s=function(){var c=(0,o.Z)(r().mark(function q(b){var k=b.fileId,ee=b.refId,re=b.worksheetId,ie=re===void 0?void 0:re,le=b.rowId,E=b.controlId,w;return r().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(N.prev=0,!(!k&&!ee)){N.next=3;break}throw new Error;case 3:if(w=void 0,!ee){N.next=10;break}return N.next=7,Z.Z.getNodeDetail({actionType:14,id:ee,worksheetId:ie});case 7:w=N.sent,N.next=13;break;case 10:return N.next=12,H.Z.getAttachmentDetail({fileId:k,worksheetId:ie,rowId:le,controlId:E});case 12:w=N.sent;case 13:window.open(w.downloadUrl),N.next=20;break;case 16:N.prev=16,N.t0=N.catch(0),console.error(N.t0),alert(_l("\u4E0B\u8F7D\u9644\u4EF6\u5931\u8D25"),3);case 20:case"end":return N.stop()}},q,this,[[0,16]])}));return function(b){return c.apply(this,arguments)}}();function j(c){var q=c.isCustomButton,b=c.worksheetInfo,k=c.defaultRelatedSheet,ee=k===void 0?{}:k,re=c.defaultFormData,ie=re===void 0?{}:re,le=c.defaultFormDataEditable,E=c.writeControls,w=E===void 0?[]:E;return new(y())(function(K,N){var F=n().cloneDeep(b.template.controls);function h(){try{F=F.filter(function(x){return!n().includes(V.gs,x.controlId)}).map(function(x){if(x.type===29&&Number(x.advancedSetting.showtype)!==f.wn.LIST&&x.sourceControlId===ee.relateSheetControlId&&x.dataSource===ee.worksheetId)try{x.advancedSetting=n().assign({},x.advancedSetting,{defsource:te()([{staticValue:te()([te()((0,p.default)({},JSON.parse(ee.value.sourcevalue),{name:ee.value.name}))])}])}),x.fieldPermission?x.fieldPermission=x.fieldPermission.replace(/(\w)(\w)(\w)/g,"$10$3"):x.fieldPermission="101"}catch(Q){}return ie[x.controlId]&&(x.value=ie[x.controlId],le||(x.fieldPermission?x.fieldPermission=x.fieldPermission.replace(/(\w)(\w)(\w)/g,"$10$3"):x.fieldPermission="101")),(0,p.default)({},x)}),F=F.map(function(x){var Q=n().find(w,function(u){return x.controlId===u.controlId})||{};if(Q.defsource&&(x.value="",n().includes([9,10,11],x.type)?x.value=x.default=safeParse(Q.defsource)[0].staticValue:x.advancedSetting=(0,p.default)({},x.advancedSetting||{},{defsource:Q.defsource})),x.type===30&&!x.value){var i=n().find(b.template.controls,function(u){return u.controlId===x.dataSource.slice(1,-1)}),m=i&&n().find(i.relationControls,function(u){return u.controlId===x.sourceControlId});if(!i)return x;if(i.value){var v=JSON.parse(i.value)[0];if(!v.sourcevalue)return(0,p.default)({},x);if(m&&m.type===29)try{var W=JSON.parse(v.sourcevalue)[x.sourceControlId],P=JSON.parse(W)[0];P&&(x.value=P.name)}catch(u){}else x.value=JSON.parse(v.sourcevalue)[x.sourceControlId]}}return(0,p.default)({},x)})}catch(x){N(x)}K(F)}var z=g()(ie);if(z.length===1){var X=n().find(F,function(x){return x.controlId===z[0]});if(X&&X.type===29&&n().find(F,function(x){return x.dataSource==="$"+X.controlId+"$"})){var B=safeParse(ie[X.controlId]);if(B.length&&B[0].sid&&!B[0].sourcevalue){d.Z.getRowDetail({worksheetId:X.dataSource,rowId:B[0].sid}).then(function(x){B[0].sourcevalue=x.rowData,ie[X.controlId]=te()(B),h()}).catch(function(x){h()});return}}}h()})}function A(c){var q=c.appId,b=c.projectId,k=c.addType,ee=c.viewId,re=c.worksheetId,ie=c.masterRecord,le=c.formdata,E=c.customBtn,w=c.updateWorksheetControls,K=c.onSubmitEnd,N=K===void 0?function(){}:K,F=c.onSubmitSuccess,h=F===void 0?function(){}:F,z=c.customwidget,X=c.setRequesting,B=c.rowStatus,x=c.setSubListUniqueError,Q=c.setRuleError,i=le.filter(function(v){return v.type!==30&&v.type!==31&&v.type!==32&&v.type!==51}).map(function(v){return(0,U.jz)(v,{isNewRecord:!0})}).filter(function(v){return!(0,C.hB)(v.value)}),m=(0,p.default)({silent:!0,receiveControls:i,appId:q,projectId:b,viewId:ee,worksheetId:re,masterRecord:ie,pushUniqueId:md.global.Config.pushUniqueId,rowStatus:B||1},E);m.masterRecord&&!m.masterRecord.rowId&&delete m.masterRecord,d.Z.addWorksheetRow(m).then(function(v){if(B===21){if(v.resultCode===20){N(),X(!1),h({isOverLimit:!0,rowData:[]});return}else v.data?(alert(_l("\u4FDD\u5B58\u8349\u7A3F\u6210\u529F")),h({rowData:[]}),N(),X(!1)):alert(_l("\u4FDD\u5B58\u8349\u7A3F\u5931\u8D25"),2);return}if(v.resultCode===1&&!v.data){alert(_l("\u8BB0\u5F55\u6DFB\u52A0\u6210\u529F")),N(),X(!1);return}if(v.resultCode===1){var W=void 0,P=(0,C.II)(le,v.data);P.length&&n().isFunction(w)&&(w(P),W=P.map(function(u){return(0,p.default)({},u,{value:v.data[u.controlId]})})),h({rowData:v.data,newControls:W})}else v.resultCode===11?z.current&&n().isFunction(z.current.uniqueErrorUpdate)&&z.current.uniqueErrorUpdate(v.badData):v.resultCode===22?(x(v.badData),(0,C.a)(v.resultCode)):v.resultCode===32?Q(v.badData):(0,C.a)(v.resultCode);N(),X(!1)}).catch(function(v){N(),n().isObject(v)?alert(v.errorMessage||_l("\u8BB0\u5F55\u6DFB\u52A0\u5931\u8D25"),3):alert(v||_l("\u8BB0\u5F55\u6DFB\u52A0\u5931\u8D25"),3)})}function S(c){var q=c.worksheetId,b=c.viewId,k=c.rowIds,ee=c.relateRecordControlId,re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};d.Z.copyRow({worksheetId:q,viewId:b,rowIds:k,copyRelationControlId:ee}).then(function(ie){ie&&ie.resultCode===1&&ie.data.length?(ie.data.length<k.length?alert(_l("%0\u6761\u590D\u5236\u5931\u8D25\uFF08\u53EF\u80FD\u6709\u5FC5\u586B\u9879\u4E3A\u7A7A\uFF0C\u8BBE\u7F6E\u4E0D\u5141\u8BB8\u91CD\u590D\u6216\u6570\u636E\u8D85\u91CF\uFF09",k.length-ie.data.length),3):alert(_l("\u590D\u5236\u6210\u529F")),re(ie.data)):ie&&ie.resultCode===7?alert(_l("\u590D\u5236\u5931\u8D25\uFF0C\u6743\u9650\u4E0D\u8DB3\uFF01"),3):ie&&ie.resultCode===9?alert(_l("\u590D\u5236\u5931\u8D25\uFF0C\u8D85\u8FC7\u6700\u5927\u6570\u91CF\uFF01"),3):ie&&ie.resultCode===11?alert(_l("\u590D\u5236\u5931\u8D25\uFF0C\u5F53\u524D\u8868\u5B58\u5728\u552F\u4E00\u5B57\u6BB5"),3):alert(ie&&ie.resultCode===1?_l("\u590D\u5236\u5931\u8D25\uFF08\u53EF\u80FD\u6709\u5FC5\u586B\u9879\u4E3A\u7A7A\uFF0C\u8BBE\u7F6E\u4E0D\u5141\u8BB8\u91CD\u590D\u6216\u6570\u636E\u8D85\u91CF\uFF09"):_l("\u590D\u5236\u5931\u8D25\uFF01"),2)}).catch(function(ie){console.log(ie),alert(_l("\u590D\u5236\u5931\u8D25\uFF01"),3)})}var I=function(){var c=(0,o.Z)(r().mark(function q(b){var k=b.appId,ee=b.controlId,re=b.fileId,ie=b.recordId,le=b.viewId,E=b.worksheetId,w=b.getType,K;return r().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(!(!ee||!re||!ie||!E)){F.next=3;break}return console.error("\u53C2\u6570\u4E0D\u5168"),F.abrupt("return");case 3:return F.next=5,d.Z.getAttachmentShareId({appId:k,controlId:ee,fileId:re,rowId:ie,viewId:le,worksheetId:E,getType:w});case 5:K=F.sent,K&&window.open((window.subPath?window.subPath:"")+"/recordfile/"+K+"/"+(w||""));case 7:case"end":return F.stop()}},q,this)}));return function(b){return c.apply(this,arguments)}}()},53670:(lt,Te,t)=>{"use strict";t.d(Te,{b:()=>L,o:()=>p});var ce=t(72444),g=t(67294);function p(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},R=(0,g.useRef)(te);function y(a,r,o){if(!a){console.error("need a key");return}if((typeof a>"u"?"undefined":(0,ce.default)(a))==="object"){if(o)for(var d in R.current)d&&delete R.current[d];for(var Z in a)Z&&(R.current[Z]=a[Z])}else typeof r>"u"?delete R.current[a]:R.current[a]=r}return[R.current,y]}function L(){for(var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},R=arguments.length,y=Array(R>1?R-1:0),a=1;a<R;a++)y[a-1]=arguments[a];(0,g.useEffect)(function(){var r=function(d){var Z=d.clipboardData.getData("text");te(Z)};return document.addEventListener("paste",r),function(){document.removeEventListener("paste",r)}},[].concat(y))}},91650:(lt,Te,t)=>{"use strict";t.r(Te),t.d(Te,{addRecord:()=>n,changeBoardViewData:()=>C,delBoardViewRecord:()=>O,getBoardViewPageData:()=>q,getSingleBoardPageData:()=>k,initBoardViewData:()=>I,initBoardViewRecordCount:()=>V,onCopySuccess:()=>s,sortBoardRecord:()=>ee,updateBoardViewRecord:()=>j,updateBoardViewRecordCount:()=>f,updateMultiSelectBoard:()=>ie,updateTitleData:()=>re});var ce=t(42723),g=t(88106),p=t(88239),L=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(89499);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(57185);var y=t(70973),a=t(7145),r=t.n(a),o=t(96486),d=t.n(o),Z=t(20890),H=t.n(Z),U=(0,y.W_)(L.Z.getFilterRows);function f(le){return{type:"UPDATE_BOARD_VIEW_RECORD_COUNT",data:le}}function V(le){return{type:"INIT_BOARD_VIEW_RECORD_COUNT",data:le}}function C(le){return{type:"CHANGE_BOARD_VIEW_DATA",data:le}}function O(le){return function(E,w){var K=w(),N=K.sheet;L.Z.deleteWorksheetRows((0,p.default)({rowIds:[le.rowId]},(0,y.YA)(N))).then(function(F){F.isSuccess&&(E({type:"DEL_BOARD_VIEW_RECORD_COUNT",data:le}),E(f([le.key,-1])))})}}function n(le){return function(E,w){var K=le.item,N=le.key;E({type:"ADD_BOARD_VIEW_RECORD",data:{item:K,key:N}}),E(f([N,1]))}}function s(le){return function(E,w){var K=le.item,N=le.key;E({type:"ADD_BOARD_VIEW_RECORD",data:{item:K,key:N}}),E(f([N,1]))}}function j(le){return function(E,w){if(E({type:"UPDATE_BOARD_VIEW_RECORD",data:le}),le.target){var K=(0,R.H)(le.target);K!==le.key&&(E({type:"UPDATE_BOARD_VIEW_RECORD_COUNT",data:[le.key,-1]}),E({type:"UPDATE_BOARD_VIEW_RECORD_COUNT",data:[K,1]}))}}}var A=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},w=arguments[1],K=E.base,N=E.controls,F=E.navGroupFilters,h=F===void 0?[]:F,z=E.quickFilter,X=z===void 0?[]:z,B=K.viewId,x=K.appId,Q=K.chartId,i=K.type;w=w||(0,R.X)(E);var m=w,v=m.worksheetId,W=m.viewControl,P=m.advancedSetting;if(W){var u=void 0,l=_.find(N,function(G){return G.controlId===W});l&&l.type===29&&(u=l.dataSource);var T=(0,p.default)({type:i,appId:x,worksheetId:v,viewId:B,reportId:Q||void 0,kanbanSize:20,kanbanIndex:1,navGroupFilters:h},E.filters,{fastFilters:(0,te.pT)(X)});return u&&(T=(0,p.default)({},T,{relationWorksheetId:u,kanbanSize:P&&P.navshow==="1"?50:20})),T}},S=function(E){return!E||!_.isArray(E)?{}:E.map(function(w){return(0,g.default)({},w.key,w.totalNum)}).reduce(function(w,K){return(0,p.default)({},w,K)},{})};function I(le){return function(E,w){var K=w(),N=K.sheet,F=A(N,le);F&&(E({type:"CHANGE_BOARD_VIEW_LOADING",loading:!0}),E({type:"CHANGE_BOARD_VIEW_STATE",payload:{kanbanIndex:1,hasMoreData:!0}}),c({para:F,dispatch:E,view:le||(0,R.X)(N),controls:N.controls}))}}function c(le){var E=le.para,w=le.dispatch,K=le.view,N=le.controls;(E.type==="single"?L.Z.getFilterRows:U)((0,te.zG)(E)).then(function(F){var h=F.data,z=F.resultCode;z!==1&&(w({type:"WORKSHEET_UPDATE_ACTIVE_VIEW_STATUS",resultCode:z}),w({type:"CHANGE_BOARD_VIEW_LOADING",loading:!1}));var X=(0,y.K1)(h,K,N);w(C(X)),w(V(S(h))),w({type:"CHANGE_BOARD_VIEW_LOADING",loading:!1}),w({type:"CHANGE_BOARD_VIEW_STATE",payload:{kanbanIndex:E.kanbanIndex,hasMoreData:!(h.length<20)}})})}function q(le){var E=le.alwaysCallback,w=E===void 0?o.noop:E;return function(K,N){var F=N(),h=F.sheet,z=h.boardView,X=z.boardViewState,B=z.boardViewRecordCount,x=z.boardData,Q=X.hasMoreData,i=X.kanbanIndex,m=A(h),v=m||{},W=v.relationWorksheetId,P=v.kanbanSize,u=W&&P===50;if(u||!Q||!m){w();return}U((0,te.zG)((0,p.default)({},m,{kanbanIndex:i+1}))).then(function(l){var T=l.data,G=x.map(function(se){return se.key}),D=T.filter(function(se){return!(0,o.includes)(G,se.key)});K(C(x.concat(D))),K(V((0,p.default)({},B,S(D))));var M={kanbanIndex:i+1};T.length<20&&(M=(0,p.default)({},M,{hasMoreData:!1})),K({type:"CHANGE_BOARD_VIEW_STATE",payload:M})}).finally(function(){w()})}}function b(le,E){return(0,Z.uniqBy)(le.concat(E),function(w){return _.get(JSON.parse(w),"rowid")})}function k(le){var E=le.pageIndex,w=le.kanbanKey,K=le.alwaysCallback,N=le.checkIsMore;return function(F,h){var z=h(),X=z.sheet,B=X.boardView,x=X.searchArgs,Q=B.boardData,i=A(X);if(!i){K();return}U((0,te.zG)((0,p.default)({},i,{pageIndex:E,kanbanKey:w}))).then(function(m){var v=m.data;F({type:"CHANGE_BOARD_VIEW_LOADING",loading:!1});var W=_.findIndex(Q,function(u){return u.key===w}),P=_.get(_.find(v,function(u){return u.key===w}),"rows");F({type:"CHANGE_BOARD_VIEW_DATA",data:E===1?v:r()(Q,(0,g.default)({},W,{rows:{$set:b(Q[W].rows,P)}}))}),F(V(S(v))),N((P||[]).length>=i.kanbanSize)}).finally(function(){K()})}}function ee(le){var E=le.srcKey,w=le.targetKey,K=le.value,N=(0,ce.Z)(le,["srcKey","targetKey","value"]);return function(F,h){var z=h(),X=z.sheet,B=N.rowId;L.Z.updateWorksheetRow(N).then(function(x){(0,o.isEmpty)(x.data)?alert(_l("\u62D6\u62FD\u66F4\u65B0\u5931\u8D25!"),2):(F({type:"SORT_BOARD_VIEW_RECORD",data:{key:E,rowId:B,targetKey:w}}),F(f([E,-1])),F(f([w,1])))})}}function re(le){return{type:"UPDATE_BOARD_TITLE_DATA",data:le}}var ie=function(E){return{type:"UPDATE_MULTI_SELECT_BOARD",data:E}}},92663:(lt,Te,t)=>{"use strict";t.r(Te),t.d(Te,{changeCalendarTime:()=>A,changeMobileCurrentData:()=>F,changeMobileCurrentDate:()=>h,deleteEventList:()=>le,fetch:()=>U,fetchExternal:()=>C,getCalendarData:()=>S,getEventList:()=>k,getEventScheduledData:()=>c,getInitType:()=>I,mobileIsShowMoreClick:()=>N,refresh:()=>V,refreshEventList:()=>E,searchEventArgs:()=>re,searchKeys:()=>ee,updataEditable:()=>O,updateCalendarEventIsAdd:()=>w,updateEventData:()=>K,updateEventList:()=>ie,updateFormatData:()=>f});var ce=t(88106),g=t(85315),p=t(88239);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(89499);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(15577);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(5913);var a=t(96486),r=t.n(a),o=t(30381),d=t.n(o),Z=void 0,H=/^(1887|7596|7798)$/.test(t.j)?null:[],U=function(X){return function(B,x){var Q=x().sheet,i=Q.base,m=Q.filters,v=Q.quickFilter,W=v===void 0?[]:v,P=i.worksheetId,u=i.viewId,l=i.appId,T=i.chartId;Z&&H.includes(u)&&Z.abort(),H.push(u),Z=L.Z.getFilterRows((0,te.zG)((0,p.default)({appId:l,viewId:u,worksheetId:P,status:1,pageIndex:1,sortControls:X.sortControls,reportId:T||void 0,pageSize:1e7},r().pick(X,["keyWords","searchType","filterControls","filtersGroup","isUnRead","kanbanKey","layer","beginTime","endTime"]),{fastFilters:(0,te.pT)(W)}))),Z.then(function(G){H=b.filter(function(D){return D!==u}),B({type:"CHANGE_CALENDARLIST",data:G.data,resultCode:G.resultCode}),B(O(!0)),B(f())})}};function f(){return function(z,X){var B=X().sheet,x=B.views,Q=x===void 0?[]:x,i=B.base,m=i===void 0?{}:i,v=B.controls,W=B.calendarview,P=W===void 0?{}:W,u=m.viewId,l=P.calendar,T=l===void 0?[]:l,G=P.calendarData,D=G===void 0?{}:G,M=[];T.map(function(se){var ae=(0,y.S7)((0,p.default)({},se,{worksheetControls:v,currentView:Q.find(function(ne){return ne.viewId===u})||{},calendarData:D}));M.push.apply(M,(0,g.Z)(ae))}),z({type:"CHANGE_CALENDAR_FORMAT",data:M}),z({type:"CHANGE_MOBILE_CURRENTDATA",data:M})}}var V=function(){return function(X,B){var x=B().sheet,Q=x.filters,i=x.calendarview,m=i.calendarViewStart,v=i.calendarViewEnd;X(U((0,p.default)({},Q,{beginTime:m,endTime:v}))),X(C())}},C=function(){return function(X,B){var x=B().sheet.base,Q=x===void 0?{}:x,i=Q.worksheetId,m=Q.viewId,v=(0,R.Q9)(),W=X(I());!((0,y.QV)()||[]).includes(i+"-"+m)&&!v&&W!=="eventNoScheduled"&&X(c("eventNoScheduled")),X(c(W))}},O=function(X){return function(B,x){B({type:"CHANGE_CALENDAR_EDITABLE",data:X})}},n=function(X){var B=[];return X.forEach(function(x,Q){var i=-1,m=B.some(function(W,P){if(d()(x.start).isSame(W.date,"day"))return i=P,!0});if(m)B[i].res.push(x);else{var v=[];v.push(x),B.push({date:d()(x.start).format("YYYY-MM-DD"),res:v})}}),B},s=function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],x=B.concat(X),Q=r().uniq(x.map(function(m){return m.date})),i=[];return Q.map(function(m){i.push({date:m,res:r().flatMap(x.filter(function(v){return v.date===m}).map(function(v){return v.res}))})}),i},j=function(X){var B=X.arr,x=B===void 0?[]:B,Q=X.addData,i=Q===void 0?[]:Q,m=X.isAdd,v=m===void 0?!1:m,W=X.isUp,P=W===void 0?!1:W,u=X.updataRowIds,l=u===void 0?[]:u;if(l.length>0){var T=i.filter(function(se){return l.includes(se.extendedProps.rowid)});T.length>0&&(x=x.map(function(se){var ae=se.res.find(function(ne){return l.includes(ne.extendedProps.rowid)});return ae?(0,p.default)({},se,{res:se.res.filter(function(ne){return!l.includes(ne.extendedProps.rowid)})}):se}),x=x.filter(function(se){return se.res.length>0||d()().format("YYYY-MM-DD").isSame(se.date,"day")}))}var G=[];if(v?(i.length<=0&&(G=x),P?G=s(x,n(i)):G=s(n(i),x)):G=n(i),G.length>0&&!G.find(function(se){return d()().isSame(se.date,"day")})){var D=G.filter(function(se){return d()().isAfter(se.date)}),M=G.filter(function(se){return d()().isBefore(se.date)});D.push({date:d()().format("YYYY-MM-DD"),res:[]}),G=D.concat(M)}return G=G.sort(function(se,ae){return Date.parse(se.date)-Date.parse(ae.date)}),G};function A(z,X){return function(B,x){B({type:"CHANGE_CALENDAR_VIEW_START",data:z}),B({type:"CHANGE_CALENDAR_VIEW_END",data:X})}}function S(){return function(z,X){var B=X().sheet,x=B.controls,Q=B.base,i=B.views,m=Q.viewId,v=m===void 0?"":m,W=Q.worksheetId,P=i.find(function(Se){return Se.viewId===v})||{},u=(0,R.aq)(P),l=u.calendarType,T=l===void 0?"0":l,G=u.unweekday,D=G===void 0?"":G,M=u.colorid,se=M===void 0?"":M,ae=u.begindate,ne=ae===void 0?"":ae,de=u.enddate,Ce=de===void 0?"":de,he=u.calendarcids,fe=he===void 0?"[]":he;try{fe=JSON.parse(fe)}catch(Se){fe=[]}var Ee=se?x.find(function(Se){return Se.controlId===se})||[]:[],Y=(0,y.wg)(x);fe.length<=0&&(fe=[{begin:ne||(Y[0]||{}).controlId,end:Ce}]);var oe=fe.map(function(Se){var ye=Se.begin?Y.find(function(me){return me.controlId===Se.begin})||{}:{},J=Se.end?Y.find(function(me){return me.controlId===Se.end})||{}:{};return(0,p.default)({},Se,{startData:ye,startFormat:(0,y.jY)(ye)?"YYYY-MM-DD HH:mm":"YYYY-MM-DD",endData:J,endFormat:(0,y.jY)(J)?"YYYY-MM-DD HH:mm":"YYYY-MM-DD"})}),ve=(0,y.jY)(oe[0].startData)?"today prev,next dayGridMonth,timeGridWeek,timeGridDay":"today prev,next dayGridMonth,dayGridWeek,dayGridDay",ue=(0,y.cA)()[W+"-"+v],pe="";ue&&(["dayGridWeek","timeGridWeek"].includes(ue)?pe=(0,y.jY)(oe[0].startData)?"timeGridWeek":"dayGridWeek":["timeGridDay","dayGridDay"].includes(ue)?pe=(0,y.jY)(oe[0].startData)?"timeGridDay":"dayGridDay":pe=ue),z({type:"CHANGE_CALENDAR_DATA",data:{calendarInfo:oe,unweekday:D,colorOptions:Ee.options||[],btnList:ve,initialView:pe||(0,y.fE)(T,oe[0].startData)}})}}var I=function(){return function(X,B){var x=window.localStorage.getItem("CalendarShowExternalTypeEvent");return x||safeLocalStorageSetItem("CalendarShowExternalTypeEvent","eventNoScheduled"),x||"eventNoScheduled"}},c=function(X){return function(B,x){B(k(X==="eventScheduled"?{pageIndex:1,typeEvent:X,cb:function(){B(k({pageIndex:1,typeEvent:X,keyWords:"",isAdd:!0,isUp:!0}))}}:{pageIndex:1,typeEvent:X}))}},q=void 0,b=/^(1887|7596|7798)$/.test(t.j)?null:[];function k(z){var X=z.pageIndex,B=X===void 0?1:X,x=z.typeEvent,Q=x===void 0?"eventNoScheduled":x,i=z.keyWords,m=i===void 0?"":i,v=z.isAdd,W=v===void 0?!1:v,P=z.isUp,u=P===void 0?!1:P,l=z.cb,T=l===void 0?null:l;return function(G,D){var M=D().sheet,se=M.calendarview,ae=M.controls,ne=M.views,de=M.base,Ce=M.filters,he=se.calendarData,fe=se.calenderEventList,Ee=fe===void 0?{}:fe,Y=de.appId,oe=de.worksheetId,ve=de.viewId,ue=ne.find(function(Ae){return Ae.viewId===ve})||{},pe=he.calendarInfo,Se=pe===void 0?[]:pe;if(!(u&&[Q+"UpIndex"]===B)&&[Q+"Index"]!==B){q&&b.includes(ve)&&q.abort(),G({type:"CHANGE_CALENDAR_ISOVER",data:!0});var ye={appId:Y,viewId:ve,worksheetId:oe,status:1,pageIndex:B,pageSize:m?1e4:20,keyWords:m,filtersGroup:Ce.filtersGroup};b.push(ve);var J=[];if(Se.map(function(Ae){J.push({controlId:Ae.begin,datatype:Ae.startData.type,spliceType:2,dateRangeType:1,values:[]})}),Q==="eventScheduled"){var me=[];m?J.map(function(Ae){me.push((0,p.default)({},Ae,{spliceType:2,filterType:8,dateRange:0}))}):u?J.map(function(Ae){me.push((0,p.default)({},Ae,{filterType:15,dateRange:1}))}):J.map(function(Ae){me.push((0,p.default)({},Ae,{filterType:13,dateRange:2}))}),ye=(0,p.default)({},ye,{sortControls:Se.map(function(Ae){return{controlId:Ae.begin,datatype:Ae.startData.type,isAsc:!u}})||[],filterControls:me})}else if(Q==="eventNoScheduled"){var be=[];J.map(function(Ae){be.push((0,p.default)({},Ae,{spliceType:1,filterType:7,dateRange:0}))}),ye=(0,p.default)({},ye,{beginTime:"",endTime:"",filterControls:be})}q=L.Z.getFilterRows((0,te.zG)((0,p.default)({},ye,{filterControls:[].concat((0,g.Z)(Ce.filterControls||[]),(0,g.Z)(ye.filterControls||[]))})));var xe=Ee[Q+"Dt"]||[];q.then(function(Ae){b=b.filter(function(Ie){return Ie!==ve});var Ne=Ae.data;if(m){var Me=[];Ne.map(function(Ie){Me.push.apply(Me,(0,g.Z)((0,y.S7)((0,p.default)({},Ie,{worksheetControls:ae,currentView:ue,calendarData:he,byRowId:!0}))))}),G({type:"CHANGE_CALENDAR_LIST",data:(0,p.default)({},Ee,{keyWords:m,seachData:Me})}),G({type:"CHANGE_CALENDAR_LOADING",data:!1})}else{var Fe;W?xe=u?Ne.concat(xe):xe.concat(Ne):xe=Ne;var Be=[];Ne.map(function(Ie){var ge;(ge=Be).push.apply(ge,(0,g.Z)((0,y.S7)((0,p.default)({},Ie,{worksheetControls:ae,byRowId:Q!=="eventScheduled",currentView:ue,calendarData:he}))))}),Q==="eventScheduled"&&(Be=Be.sort(function(Ie,ge){return Date.parse(Ie.start)-Date.parse(ge.start)}));var we=(0,p.default)({},Ee,(Fe={},(0,ce.default)(Fe,Q,W?u?Be.concat(Ee[Q]):Ee[Q].concat(Be):Be),(0,ce.default)(Fe,Q+"Dt",xe),(0,ce.default)(Fe,Q+"IsAll",u?Ee[Q+"IsAll"]:Ne.length<20),(0,ce.default)(Fe,Q+"Index",u?Ee[Q+"Index"]:B),(0,ce.default)(Fe,Q+"Count",u?Ee[Q+"Count"]:Ae.count),(0,ce.default)(Fe,"typeEvent",Q),(0,ce.default)(Fe,"keyWords",m),(0,ce.default)(Fe,"seachData",[]),(0,ce.default)(Fe,"updataRowIds",B===1?[]:Ee.updataRowIds),(0,ce.default)(Fe,"eventScheduledUpIsAll",u?Ne.length<20:Ee.eventScheduledUpIsAll),(0,ce.default)(Fe,"eventScheduledUpIndex",u?B:Ee.eventScheduledUpIndex),(0,ce.default)(Fe,"eventScheduledUpCount",u?Ae.count:Ee.eventScheduledUpCount),(0,ce.default)(Fe,"eventScheduledDtResort",Q==="eventScheduled"?j({arr:Ee.eventScheduledDtResort||[],addData:Be,isUp:u,isAdd:W,updataRowIds:Ee.updataRowIds}):Ee.eventScheduledDtResort),Fe));B===1&&Q==="eventScheduled"&&!u&&(we=(0,p.default)({},we,{eventScheduledUpIsAll:!1,eventScheduledUpIndex:0,eventScheduledUpCount:0})),G({type:"CHANGE_CALENDAR_LIST",data:we}),G({type:"CHANGE_CALENDAR_LOADING",data:!1})}G({type:"CHANGE_CALENDAR_ISOVER",data:!0}),T&&(G({type:"CHANGE_CALENDAR_LOADING",data:!0}),T())})}}}function ee(z){return function(X,B){var x=B().sheet.calendarview,Q=x.calenderEventList,i=Q===void 0?{}:Q;X({type:"CHANGE_CALENDAR_LIST",data:(0,p.default)({},i,{keyWords:z})})}}function re(z,X){return function(B,x){var Q=B(I());B({type:"CHANGE_CALENDAR_LOADING",data:!0}),B(k({pageIndex:X,typeEvent:Q,keyWords:z}))}}function ie(z,X){return function(B,x){var Q=x().sheet.calendarview,i=Q.calenderEventList,m=i===void 0?{}:i,v=m.keyWords,W=B(I());B(k({pageIndex:z,typeEvent:W,keyWords:v,isAdd:!0,isUp:X}))}}function le(z){return function(X,B){var x,Q=B().sheet.calendarview,i=Q.calenderEventList,m=i===void 0?{}:i,v=X(I()),W=m[v+"Dt"].filter(function(u){return u.rowid!==z}),P=m[v].filter(function(u){return u.extendedProps.rowid!==z});X({type:"CHANGE_CALENDAR_LIST",data:(0,p.default)({},m,(x={},(0,ce.default)(x,v,P),(0,ce.default)(x,v+"Dt",W),(0,ce.default)(x,v+"Count",m[v+"Count"]-1),(0,ce.default)(x,"eventScheduledDtResort",v==="eventScheduled"?j({addData:P}):m.eventScheduledDtResort),x))})}}function E(){return function(z,X){var B=z(I());z({type:"CHANGE_CALENDAR_CLEAR",data:{typeEvent:B}}),z({type:"CHANGE_CALENDAR_LOADING",data:!0})}}function w(z){return function(X,B){X({type:"CALENDAR_EVENT_IS_ADD",data:z})}}function K(z,X,B){return function(x,Q){var i=Q().sheet,m=i.calendarview,v=i.controls,W=i.base,P=i.views,u=m.calendarData,l=m.calenderEventList,T=l===void 0?{}:l,G=P.find(function(pe){return pe.viewId===W.viewId})||{},D=T.keyWords,M=T.seachData,se=T.eventScheduledDtResort,ae=se===void 0?[]:se,ne=T.updataRowIds,de=ne===void 0?[]:ne,Ce=x(I());if(D){var he=[];M.map(function(pe,Se){pe.extendedProps.rowid===z?he.push.apply(he,(0,g.Z)((0,y.S7)((0,p.default)({},r().omit(X,["allowedit","allowdelete"]),{worksheetControls:v,currentView:G,calendarData:u,byRowId:!0})))):he.push(pe)}),x({type:"CHANGE_CALENDAR_LIST",data:(0,p.default)({},T,{seachData:he})})}else if(Ce==="eventNoScheduled")x(le(z));else{var fe,Ee=T[Ce+"Dt"]||[],Y=!1;if(Ce==="eventScheduled"){var oe=(ae[0]||{}).date,ve=(ae[ae.length-1]||{}).date;d()(B).isBetween(oe,ve)||d()(B).isSame(oe,"day")||d()(B).isSame(ve,"day")||T.eventScheduledUpCount<20||T.eventScheduledCount<20||(Y=!0)}Ee.findIndex(function(pe){return pe.rowid===z})<0?(Ee=Ee.concat(r().omit(X,["allowedit","allowdelete"])),Y=!0):Ee=Ee.map(function(pe,Se){return pe.rowid===z?r().omit(X,["allowedit","allowdelete"]):pe});var ue=[];Ee.map(function(pe){var Se;(Se=ue).push.apply(Se,(0,g.Z)((0,y.S7)((0,p.default)({},pe,{worksheetControls:v,byRowId:Ce!=="eventScheduled",currentView:G,calendarData:u}))))}),ue=Ce==="eventScheduled"?ue.sort(function(pe,Se){return Date.parse(pe.start)-Date.parse(Se.start)}):ue,de=Y?de.includes(z)?de:de.concat([z]):de.filter(function(pe){return pe!==z}),x({type:"CHANGE_CALENDAR_LIST",data:(0,p.default)({},T,(fe={updataRowIds:de},(0,ce.default)(fe,Ce,ue),(0,ce.default)(fe,Ce+"Dt",Ee),(0,ce.default)(fe,"eventScheduledDtResort",Ce==="eventScheduled"?j({addData:ue}):T.eventScheduledDtResort),fe))})}}}var N=function(X){return function(B,x){B({type:"SHOW_MOBILE_MORE_CLICK",flag:X})}},F=function(X){return function(B,x){B({type:"CHANGE_MOBILE_CURRENTDATA",data:X})}},h=function(X){return function(B,x){B({type:"CHANGE_MOBILE_CURRENTDATE",date:X})}}},183:(lt,Te,t)=>{"use strict";t.r(Te),t.d(Te,{refresh:()=>ce});function ce(){return{type:"REFRESH_CUSTOM_WIDGET_VIEW"}}},26918:(lt,Te,t)=>{"use strict";t.r(Te),t.d(Te,{clearData:()=>a,deleteRow:()=>o,fetchRows:()=>R,refresh:()=>y,updateRow:()=>r});var ce=t(88239);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(89499);var L=t(96486),te=t.n(L),R=function(Z,H){return function(U,f){var V=f().sheet,C=V.base,O=V.filters,n=V.detailView,s=V.quickFilter,j=V.navGroupFilters,A=C.appId,S=C.viewId,I=C.worksheetId,c=n.detailViewRows,q=n.detailViewLoading;if(!q){U({type:"CHANGE_DETAIL_VIEW_PAGE_INDEX",pageIndex:Z}),U({type:"CHANGE_DETAIL_VIEW_LOADING",loading:!0}),U({type:"CHANGE_DETAIL_VIEW_KEYWORDS",keyWords:H});var b=(0,ce.default)({appId:A,viewId:S,worksheetId:I,pageIndex:Z,pageSize:50,status:1},(0,ce.default)({},O,{keyWords:H||O.keyWords}),{fastFilters:(0,p.pT)(s),navGroupFilters:j});g.Z.getFilterRows((0,p.zG)(b)).then(function(k){U({type:"CHANGE_DETAIL_VIEW_ROWS",list:Z>1?c.concat(k.data):k.data,resultCode:k.resultCode}),U({type:"CHANGE_DETAIL_VIEW_ROWS_COUNT",count:k.count}),U({type:"CHANGE_DETAIL_VIEW_NO_MORE_ROWS",noMore:k.data.length<50}),U({type:"CHANGE_DETAIL_VIEW_LOADING",loading:!1})})}}},y=function(){return function(Z,H){var U=H().sheet.detailView,f=U.detailKeyWords;Z(R(1,f))}},a=function(){return function(Z,H){Z({type:"CHANGE_DETAIL_VIEW_ROWS",list:[]}),Z({type:"CHANGE_DETAIL_VIEW_KEYWORDS",keyWords:""})}},r=function(Z){return function(H,U){var f=U().sheet.detailView,V=f.detailViewRows,C=V.find(function(O){return O.rowid===Z.rowid});C?H({type:"CHANGE_DETAIL_VIEW_ROWS",list:V.map(function(O){return O.rowid===Z.rowid?(0,ce.default)({},Z,te().pick(O,["allowedit","allowdelete"])):O})}):(H({type:"CHANGE_DETAIL_VIEW_ROWS",list:[Z].concat(V)}),H({type:"CHANGE_DETAIL_VIEW_ROWS_COUNT",count:f.detailViewRowsCount+1}))}},o=function(Z){return function(H,U){var f=U().sheet.detailView,V=f.detailViewRows,C=V.filter(function(O){return O.rowid!==Z});H({type:"CHANGE_DETAIL_VIEW_ROWS",list:C}),H({type:"CHANGE_DETAIL_VIEW_ROWS_COUNT",count:f.detailViewRowsCount-1})}}},99597:(lt,Te,t)=>{"use strict";t.r(Te),t.d(Te,{changeIndex:()=>r,deleteRow:()=>H,fetch:()=>a,getCurrentView:()=>d,refresh:()=>o,updateRow:()=>Z});var ce=t(88239);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(15308);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(89499);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(15577);var R=t(96486),y=t.n(R),a=function(f){return function(V,C){var O=C().sheet,n=O.base,s=O.filters,j=O.galleryview,A=O.quickFilter,S=O.navGroupFilters,I=n.appId,c=n.viewId,q=n.worksheetId,b=n.chartId,k=n.maxCount,ee=j.galleryIndex,re=j.gallery,ie=(0,te.Q9)();f<=1?V({type:"CHANGE_GALLERY_VIEW_LOADING",loading:!0}):V({type:"CHANGE_GALLERY_LOADING",loading:!0});var le=(0,ce.default)({worksheetId:q,pageSize:ie?20:100,pageIndex:f,status:1,appId:I,viewId:c,reportId:b||void 0},s,{fastFilters:ie?(0,L.pT)(y().get(C(),"mobile.quickFilter")||[]):(0,L.pT)(A),navGroupFilters:S});k&&(le.pageIndex=1,le.pageSize=k),g.Z.getFilterRows((0,L.zG)(le)).then(function(E){V({type:"CHANGE_GALLERY_VIEW_DATA",list:f>1?re.concat(E.data):E.data,resultCode:E.resultCode}),V({type:"CHANGE_GALLERY_VIEW_INDEX",pageIndex:f}),V({type:"GALLERY_VIEW_RECORD_COUNT",count:E.count}),V({type:"CHANGE_GALLERY_VIEW_LOADING",loading:!1}),V({type:"CHANGE_GALLERY_LOADING",loading:!1})})}},r=function(f){return function(V,C){V({type:"CHANGE_GALLERY_VIEW_INDEX",pageIndex:f})}},o=function(){return function(f,V){f(a(1))}},d=function(){return function(f,V){var C=V().sheet,O=C.base,n=O===void 0?{}:O,s=C.views,j=s===void 0?[]:s,A=n.viewId,S=A===void 0?"":A;f({type:"CHANGE_GALLERY_VIEW",data:j.find(function(I){return I.viewId===S})||{}})}},Z=function(f){return function(V,C){var O=C().sheet.galleryview,n=O.gallery,s=n.find(function(j){return j.rowid===f.rowid});V(s?{type:"CHANGE_GALLERY_VIEW_DATA",list:n.map(function(j){return j.rowid===f.rowid?(0,ce.default)({},y().pick(j,["allowedit","allowdelete"]),f):j})}:{type:"CHANGE_GALLERY_VIEW_DATA",list:[f].concat(n)}),V((0,p.getNavGroupCount)())}},H=function(f){return function(V,C){var O=C().sheet.galleryview,n=O.gallery,s=n.filter(function(j){return j.rowid!==f});V({type:"CHANGE_GALLERY_VIEW_DATA",list:s}),V((0,p.getNavGroupCount)())}}},81010:(lt,Te,t)=>{"use strict";t.r(Te),t.d(Te,{addNewRecord:()=>X,addRecord:()=>ie,changeViewType:()=>Q,createRecord:()=>re,destroyGunterView:()=>I,fetchRows:()=>O,hideRecord:()=>E,loadLeftPeriodList:()=>v,loadRightPeriodList:()=>W,moveGroupingRow:()=>z,refreshGunterView:()=>c,removeRecord:()=>le,resetLoadGunterView:()=>q,updataPeriodType:()=>k,updateChartScroll:()=>S,updateEditIndex:()=>B,updateGroupSubVisible:()=>i,updateGroupingData:()=>n,updateGroupingRow:()=>h,updateGroupingScroll:()=>A,updateGroupingVisible:()=>j,updateGunterSearchRecord:()=>m,updateRecord:()=>w,updateRecordDragTime:()=>N,updateRecordTime:()=>K,updateRecordTimeBlockColor:()=>s,updateRecordTitle:()=>F,updateViewConfig:()=>ee,updateWithoutArrangementVisible:()=>x,zoomGunterView:()=>b});var ce=t(63239),g=t.n(ce),p=t(88106),L=t(88239);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(96849);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(36612);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(89499);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(60368);if(!/^(1887|7596|7798)$/.test(t.j))var o=t(24607);if(!/^(1887|7596|7798)$/.test(t.j))var d=t(15577);var Z=t(96486),H=t.n(Z),U=t(30381),f=t.n(U),V=function(u){var l=u.result,T=u.parent;return function(G,D){var M=D().sheet.gunterView;(0,R.iu)(M.grouping,l,M.viewConfig),G({type:"CHANGE_GUNTER_GROUPING",data:M.grouping}),G({type:"CHANGE_GUNTER_PERIOD_LIST",data:l}),G({type:"CHANGE_GUNTER_PERIOD_PARENT_LIST",data:T})}},C=function(u,l,T){var G=l.startTime,D=l.endTime,M=T.onlyWorkDay;if(G=f()(G),D=f()(D),u===r.v.day)return M?(0,R.B7)(G.add(-5,"d"),D.add(14,"d"),null,T):(0,R.gw)(G.add(-5,"d"),D.add(14,"d"),null,T);if(u===r.v.week)return(0,R.KS)(G.startOf("w"),D.endOf("w").add(M?4:2,"w"),null,T);if(u===r.v.month)return(0,R.wH)(G.startOf("M"),D.endOf("M").add(M?4:2,"M"),null,T);if(u===r.v.quarter)return(0,R.Yi)(G.startOf("Q"),D.endOf("Q").add(M?4:2,"Q"),null,T);if(u===r.v.year)return(0,R.V4)(G.startOf("Y"),D.endOf("Y").add(M?2:1,"Y"),null,T)},O=function(){return function(u,l){var T=l().sheet,G=T.base,D=T.controls,M=T.views,se=T.filters,ae=T.quickFilter,ne=ae===void 0?[]:ae,de=(0,d.A_)(),Ce=de.access_token;Ce&&(window.access_token=Ce);var he=G.viewId?H().find(M,{viewId:G.viewId}):M[0],fe=H().find(D,function(Ee){return Ee.controlId===(he||{}).viewControl});u({type:"CHANGE_GUNTER_LOADINNG",data:!0}),te.Z.getFilterRows((0,a.zG)((0,L.default)({appId:G.appId,viewId:G.viewId,worksheetId:G.worksheetId,relationWorksheetId:fe&&fe.type===29?fe.dataSource:null},se,{fastFilters:(0,a.pT)(ne)}))).then(function(Ee){var Y=Ee.data,oe=Ee.count,ve=Ee.resultCode,ue=location.href.includes("localhost"),pe=location.href.includes("gunterExport");setTimeout(function(){var Se=l().sheet,ye=Se.base,J=Se.gunterView,me=J.viewConfig.colorId,be=(0,R.WO)(Y.map(function(Fe){var Be=(Fe.rows||[]).map(function(ge){return(0,L.default)({},(0,R.b0)(JSON.parse(ge),J.viewConfig),{groupId:Fe.key})}),we=(0,R.tO)(Be),Ie="gunter-sub-visible-"+Fe.key;return(0,L.default)({},Fe,we,{rows:Be,subVisible:localStorage.getItem(Ie)?!0:pe})}));if(pe){var xe=he.advancedSetting.calendartype,Ae=localStorage.getItem("gunterViewType"),Ne=Ae?Number(Ae):xe?Number(xe):r.v.day;u({type:"CHANGE_GUNTER_PERIOD_TYPE",data:Ne}),u({type:"CHANGE_GUNTER_VIEW_CONFIG",data:(0,R.YW)(Ne,J.viewConfig)});var Me=C(Ne,(0,R.tO)(be),J.viewConfig);(0,R.iu)(be,Me.result,J.viewConfig),u(V(Me))}else(0,R.iu)(be,J.periodList,J.viewConfig);u(n((0,R.B3)(be,H().find(D,{controlId:me})))),u({type:"CHANGE_GUNTER_LOADINNG",data:!1}),J.chartScroll.enable&&J.chartScroll.enable()},ue||pe?1e3:0)})}},n=function(u){return function(l,T){var G=T().sheet.gunterView,D=G.viewConfig,M=G.withoutArrangementVisible,se=D.viewControl;u.forEach(function(ae,ne){var de=M?ae.rows.length:ae.rows.filter(function(he){return he.diff>0}).length,Ce=1+(ae.subVisible?de:0);ne?ae.openCount=Ce+u[ne-1].openCount:ae.openCount=Ce,H().isEmpty(se)?(ae.subVisible=!0,ae.hide=!0,ae.openCount=de):ae.key=="-1"&&H().isEmpty(ae.rows)?(ae.hide=!0,ae.openCount=ae.openCount-1):ae.hide=!1,ae.groupingIndex=ae.openCount-(ae.subVisible?de:0)-1}),l({type:"CHANGE_GUNTER_GROUPING",data:u})}},s=function(){return function(u,l){var T=l().sheet,G=T.gunterView,D=T.controls,M=G.grouping,se=G.viewConfig,ae=se.colorId,ne=H().find(D,{controlId:ae});u({type:"CHANGE_GUNTER_GROUPING",data:(0,R.B3)(M,ne)})}},j=function(){return function(u,l){var T=l().sheet.gunterView,G=!T.groupingVisible;safeLocalStorageSetItem("gunterGroupingVisible",G),u({type:"CHANGE_GUNTER_GROUPING_VISIBLE",data:G})}},A=function(u){return function(l,T){l({type:"CHANGE_GUNTER_GROUPING_SCROLL",data:u})}},S=function(u){return function(l,T){l({type:"CHANGE_GUNTER_CHART_SCROLL",data:u})}},I=function(){return function(u,l){u({type:"CHANGE_GUNTER_PERIOD_TYPE",data:null}),u({type:"CHANGE_GUNTER_PERIOD_LIST",data:[]}),u({type:"CHANGE_GUNTER_PERIOD_PARENT_LIST",data:[]}),u({type:"CHANGE_GUNTER_GROUPING",data:[]}),u({type:"CHANGE_GUNTER_SEARCH_RECORD_ID",data:null})}},c=function(u){return function(l,T){var G=T().sheet.gunterView;l(k(G.periodType||r.v.day,u)),l({type:"CHANGE_GUNTER_IS_REFRESH",data:!G.isRefresh})}},q=function(){return function(u,l){var T=l().sheet.gunterView,G=T.chartScroll;G&&G.disable&&G.disable(),u(c()),u(O())}},b=function(){return function(u,l){var T=l().sheet.gunterView;u(k(T.periodType)),u({type:"CHANGE_GUNTER_ZOOM",data:Date.now()})}},k=function(u,l){return function(T,G){var D=G().sheet.gunterView,M=D.viewConfig;T({type:"CHANGE_GUNTER_PERIOD_TYPE",data:u}),T({type:"CHANGE_GUNTER_VIEW_CONFIG",data:(0,R.YW)(u,M)}),safeLocalStorageSetItem("gunterViewType",u);var se={};if(u===r.v.day){var ae=M.onlyWorkDay;se=ae?(0,R.B7)(null,null,l,M):(0,R.gw)(null,null,l,M)}else u===r.v.week?se=(0,R.KS)(null,null,l,M):u===r.v.month?se=(0,R.wH)(null,null,l,M):u===r.v.quarter?se=(0,R.Yi)(null,null,l,M):u===r.v.year&&(se=(0,R.V4)(null,null,l,M));T(V(se))}},ee=function(u){return function(l,T){var G=T().sheet,D=G.base,M=G.views,se=G.gunterView,ae=G.controls,ne=D.viewId?H().find(M,{viewId:D.viewId}):M[0],de=ne.advancedSetting,Ce=ne.viewControl,he=ne.displayControls,fe=de.unweekday,Ee=de.begindate,Y=de.enddate,oe=de.colorid,ve=de.calendartype,ue=de.milepost,pe=de.clicktype,Se=H().find(ae,{attribute:1})||{},ye=H().find(ae,{controlId:Ee})||{},J=H().find(ae,{controlId:Y})||{};H().get(window,"shareState.shareId")&&(ye.disabled=!0,J.disabled=!0,Se.disabled=!0);var me=(0,L.default)({},se.viewConfig,{periodType:ve?Number(ve):r.v.day,milepost:ue,onlyWorkDay:!!fe,dayOff:(0,R.I9)(fe),startId:Ee,endId:Y,viewControl:Ce,displayControls:he.map(function(be){return H().find(ae,{controlId:be})}).filter(function(be){return be}),colorId:oe,startFormat:ye.type===16?"YYYY-MM-DD HH:mm":"YYYY-MM-DD",endFormat:J.type===16?"YYYY-MM-DD HH:mm":"YYYY-MM-DD",endZeroFormat:J.type===16?"YYYY-MM-DD 00:00":"YYYY-MM-DD",startType:ye.type,endType:J.type,startDisable:ye.disabled||!(0,o.kM)(ye,3).editable,endDisable:J.disabled||!(0,o.kM)(J,3).editable,titleDisable:Se.disabled||!(0,o.kM)(Se,3).editable,clickType:pe||"0"});l({type:"CHANGE_GUNTER_VIEW_CONFIG",data:me})}},re=function(u){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function(T,G){var D=G().sheet,M=D.controls,se=D.gunterView,ae=se.grouping,ne=se.viewConfig,de=se.periodList,Ce=ne.startId,he=ne.endId,fe=ne.startType,Ee=ne.endType,Y=ne.milepost,oe=H().find(M,{attribute:1})||{},ve=null,ue=ae.map(function(pe){if(pe.key===u){var Se,ye=pe.rows[0];ve=pe.openCount;var J=(Se={isEdit:!0},(0,p.default)(Se,oe.controlId,null),(0,p.default)(Se,Ce,""),(0,p.default)(Se,he,""),(0,p.default)(Se,"startTime",f()().format(fe===16?"YYYY-MM-DD 00:00":"YYYY-MM-DD")),(0,p.default)(Se,"endTime",f()().format(Ee===16?"YYYY-MM-DD 00:00":"YYYY-MM-DD")),(0,p.default)(Se,"diff",1),(0,p.default)(Se,"rowid","createrowid-"+Date.now()),(0,p.default)(Se,"left",null),(0,p.default)(Se,"right",null),(0,p.default)(Se,"width",null),(0,p.default)(Se,"groupId",u),(0,p.default)(Se,"isMilepost",l),Se);l&&(J[Y]="1"),pe.rows.push(J)}return pe});(0,R.iu)(ue,de,ne),T(B(ve)),T(n(ue))}},ie=function(u,l){return function(T,G){var D=G().sheet,M=D.base,se=D.controls,ae=D.gunterView,ne=D.worksheetInfo,de=ae.grouping,Ce=ae.viewConfig,he=Ce.startId,fe=Ce.endId,Ee=Ce.viewControl,Y=Ce.milepost,oe=H().find(se,{attribute:1}),ve=H().find(se,{controlId:he}),ue=H().find(se,{controlId:fe}),pe=[u,{controlId:he,controlName:ve.controlName,dot:ve.dot,type:ve.type,value:f()().format("YYYY-MM-DD")},{controlId:fe,controlName:ue.controlName,dot:ue.dot,type:ue.type,value:f()().format("YYYY-MM-DD")}];if(Ee&&l.groupId!=="-1"){var Se=H().find(se,{controlId:Ee}),ye=H().find(de,{key:l.groupId}),J=ye.key,me=ye.name;if([29].includes(Se.type)&&(J=g()([{sid:J,name:me}])),[9,11].includes(Se.type)){var be=H().find(Se.options,{key:l.groupId}),xe=be.key;J=g()([xe])}J==="-1"&&(J=""),pe.push({controlId:Ee,controlName:Se.controlName,dot:Se.dot,type:Se.type,value:J})}if(Y&&l.isMilepost){var Ae=H().find(se,{controlId:Y});pe.push({controlId:Y,controlName:Ae.controlName,dot:Ae.dot,type:Ae.type,value:"1"})}T(h((0,p.default)({},u.controlId,u.value),l.rowid)),se.forEach(function(Ne){if(Ne.advancedSetting&&Ne.advancedSetting.defsource&&Ne.type!==30&&!H().find(pe,{controlId:Ne.controlId})){var Me=(0,y.QX)(l,Ne);pe.push({controlId:Ne.controlId,controlName:Ne.controlName,dot:Ne.dot,type:Ne.type,value:Me})}}),te.Z.addWorksheetRow({addType:1,appId:M.appId,projectId:ne.projectId,silent:!0,viewId:M.viewId,worksheetId:M.worksheetId,receiveControls:pe}).then(function(Ne){if(Ne.resultCode===1&&T(h(Ne.data,l.rowid)),Ne.resultCode===11){alert(_l("\u521B\u5EFA\u5931\u8D25\uFF0C%0\u4E0D\u5141\u8BB8\u91CD\u590D",oe.controlName||""),3);var Me=de.map(function(Fe){var Be=Fe.rows.filter(function(we){return we.rowid!==l.rowid});return(0,L.default)({},Fe,{rows:Be})});T(n(Me))}})}},le=function(u){return function(l,T){var G=T().sheet,D=G.base,M=G.gunterView;te.Z.deleteWorksheetRows({appId:D.appId,viewId:D.viewId,worksheetId:D.worksheetId,rowIds:[u]}).then(function(se){if(se.isSuccess){var ae=M.grouping.map(function(ne){var de=ne.rows.filter(function(he){return he.rowid!==u}),Ce=(0,R.tO)(de);return(0,L.default)({},ne,Ce,{rows:de})});(0,R.iu)(ae,M.periodList,M.viewConfig),l(n(ae))}})}},E=function(u){return function(l,T){var G=T().sheet,D=G.base,M=G.gunterView,se=M.grouping.map(function(ae){var ne=ae.rows.filter(function(Ce){return Ce.rowid!==u}),de=(0,R.tO)(ne);return(0,L.default)({},ae,de,{rows:ne})});(0,R.iu)(se,M.periodList,M.viewConfig),l(n(se))}},w=function(u,l,T){return function(G,D){var M=D().sheet,se=M.gunterView,ae=M.controls,ne=se.viewConfig,de=l[ne.viewControl],Ce=H().find(ae,{controlId:ne.colorId}),he=(0,R.Gp)((0,L.default)({},u,(0,R.b0)(T,ne)),Ce);if(H().isString(de)){var fe=H().find(ae,{controlId:ne.viewControl}),Ee="";if([29].includes(fe.type)){var Y=JSON.parse(de)[0];Ee=Y?Y.sid:"-1"}if([9,11].includes(fe.type)){var oe=de?JSON.parse(de)[0]:"-1";Ee=oe}G(z(he,Ee,u.groupId)),G(B(null))}else G(h(he,T.rowid))}},K=function(u,l,T){return function(G,D){var M=D().sheet,se=M.base,ae=M.gunterView,ne=M.controls,de=ae.viewConfig,Ce=de.startId,he=de.endId,fe=de.milepost,Ee=H().find(ne,{controlId:Ce}),Y=H().find(ne,{controlId:he}),oe=Ee.advancedSetting||{},ve=oe.allowweek,ue=Y.advancedSetting||{},pe=ue.allowweek,Se=(0,R.I9)(ve),ye=(0,R.I9)(pe),J=[];if(l&&Se.length&&!Se.includes(f()(l).days())||T&&ye.length&&!ye.includes(f()(T).days())){G(h((0,L.default)({},u,{resetTime:Date.now()}),u.rowid));return}H().isNull(l)||(J.push({controlId:Ce,controlName:Ee.controlName,dot:Ee.dot,type:Ee.type,value:l}),u[Ce]=l,u.startTime=l),H().isNull(T)||(J.push({controlId:he,controlName:Y.controlName,dot:Y.dot,type:Y.type,value:T}),u[he]=T,u.endTime=T),u.dragStartTime=null,u.dragEndTime=null,u.dragBeforeStartTime=null,u.dragBeforeEndTime=null,G(h((0,R.b0)(u,ae.viewConfig),u.rowid)),te.Z.updateWorksheetRow({appId:se.appId,rowId:u.rowid,viewId:se.viewId,worksheetId:se.worksheetId,newOldControl:J}).then(function(me){var be=me.data,xe=me.resultCode})}},N=function(u,l,T,G){return function(D,M){var se=M().sheet.gunterView;u.dragStartTime?u.dragStartTime=f()(u.dragStartTime).add(G,"d").format("YYYY-MM-DD"):(u.dragStartTime=f()(l).add(G,"d").format("YYYY-MM-DD"),u.dragBeforeStartTime=u.startTime),u.dragEndTime?u.dragEndTime=f()(u.dragEndTime).add(G,"d").format("YYYY-MM-DD"):(u.dragEndTime=f()(T).add(G,"d").format("YYYY-MM-DD"),u.dragBeforeEndTime=u.endTime);var ae=(0,L.default)({},u,{startTime:u.dragStartTime,endTime:u.dragEndTime});D(h(ae,u.rowid))}},F=function(u,l){return function(T,G){var D,M=G().sheet,se=M.base,ae=M.gunterView,ne=ae.viewConfig,de=ne.startId,Ce=ne.endId,he=ne.colorId,fe=ne.milepost;T(h((D={},(0,p.default)(D,u.controlId,u.value),(0,p.default)(D,"groupId",l.groupId),D),l.rowid)),te.Z.updateWorksheetRow({appId:se.appId,rowId:l.rowid,viewId:se.viewId,worksheetId:se.worksheetId,newOldControl:[u]}).then(function(Ee){var Y=Ee.data,oe=Ee.resultCode;if(!Y){var ve;(0,a.a)(Y.resultCode,u),T(h((ve={},(0,p.default)(ve,u.controlId,l[u.controlId]),(0,p.default)(ve,"groupId",l.groupId),ve),l.rowid))}})}},h=function(u,l){return function(T,G){var D=G().sheet.gunterView,M=D.grouping,se=D.periodList,ae=D.viewConfig,ne=u.groupId,de=M.map(function(Ce){if(ne&&Ce.key!==ne)return Ce;var he=Ce.rows.map(function(Ee){return l===Ee.rowid?(0,L.default)({},Ee,u):Ee}),fe=(0,R.tO)(he);return(0,L.default)({},Ce,fe,{rows:he})});(0,R.iu)(de,se,ae),T({type:"CHANGE_GUNTER_GROUPING",data:de})}},z=function(u,l,T){return function(G,D){var M=D().sheet.gunterView,se=M.grouping,ae=M.periodList,ne=M.viewConfig,de=se.map(function(Ce){var he=Ce.rows;Ce.key===T&&(he=Ce.rows.filter(function(Ee){return Ee.rowid!==u.rowid})),Ce.key===l&&(u.groupId=l,Ce.rows.push(u),he=Ce.rows);var fe=(0,R.tO)(he);return(0,L.default)({},Ce,fe,{rows:he})});(0,R.iu)(de,ae,ne),G(n(de))}},X=function(u,l){return function(T,G){var D=G().sheet,M=D.gunterView,se=D.controls,ae=M.grouping,ne=M.periodList,de=M.viewConfig,Ce=u[de.viewControl],he=H().find(se,{controlId:de.viewControl})||{},fe="-1";if([29].includes(he.type)){var Ee=JSON.parse(Ce)[0];fe=Ee?Ee.sid:"-1"}if([9,11].includes(he.type)){var Y=Ce?JSON.parse(Ce)[0]:"-1";fe=Y}var oe=H().find(se,{controlId:de.colorId}),ve=ae.map(function(ue){if(ue.key===fe){u.groupId=fe;var pe=(0,R.b0)((0,R.Gp)(u,oe),de);return l?ue.rows.splice(l,0,pe):ue.rows.push(pe),(0,L.default)({},ue)}return ue});(0,R.iu)(ve,ne,de),T(n(ve))}},B=function(u){return function(l,T){if(H().isString(u)){var G=T().sheet.gunterView,D=G.grouping,M=G.withoutArrangementVisible;u=(0,R.PA)(u,D,M)}l({type:"CHANGE_GUNTER_EDIT_INDEX",data:u})}},x=function(u){return function(l,T){var G=T().sheet.gunterView;localStorage.setItem("gunterViewWithoutArrangementVisible",u),l({type:"CHANGE_GUNTER_WITHOUT_ARRANGEMENT_VISIBLE",data:u}),l(n(G.grouping))}},Q=function(u){return function(l,T){for(var G=T().sheet.gunterView,D=G.chartScroll,M=G.periodList,se=Math.abs(D.x)+D.wrapperWidth/2,ae=0,ne=null,de=0;de<M.length;de++)if(se>ae)ae=ae+M[de].width;else{ne=M[de-1].time;break}l(k(u,ne))}},i=function(u){return function(l,T){var G=T().sheet.gunterView.grouping,D=G.map(function(M){if(M.key===u){var se=!M.subVisible,ae="gunter-sub-visible-"+u;return se?safeLocalStorageSetItem(ae,!0):localStorage.removeItem(ae),(0,L.default)({},M,{subVisible:se})}else return M});l(B(null)),l(n(D))}},m=function(u){return function(l,T){var G=T().sheet.gunterView,D=G.grouping,M=G.withoutArrangementVisible,se=G.chartScroll,ae=G.groupingScroll;if(u){var ne=0,de=H().find(D,{key:u.groupId});de.subVisible||(l(i(u.groupId)),ne=100),setTimeout(function(){var Ce=(0,R.PA)(u.rowid,D,M),he=Ce*32,fe=he/se.scrollerHeight*100,Ee=fe/100*Math.abs(se.maxScrollY);se.scrollTo(se.x,-Ee),ae&&ae.scrollTo(ae.x,-Ee),se._execEvent("scroll"),l(B(Ce)),l(c(u.startTime)),l({type:"CHANGE_GUNTER_SEARCH_RECORD_ID",data:u.rowid})},ne)}else l(B(null)),l({type:"CHANGE_GUNTER_SEARCH_RECORD_ID",data:null})}},v=function(){return function(u,l){var T=l().sheet.gunterView,G=T.periodType,D=T.periodList,M=T.viewConfig,se=M.periodCount,ae=M.onlyWorkDay,ne=se/2,de=D[0].time,Ce=D[D.length-1-ne].time,he=null;if(G===r.v.day){var fe=f()(de).add(-ne,"d"),Ee=f()(Ce);he=ae?(0,R.B7)(de,null,null,M):(0,R.gw)(fe,Ee,null,M)}else if(G===r.v.week){var Y=f()(de).add(-ne,"w"),oe=f()(Ce);he=(0,R.KS)(Y,oe,null,M)}else if(G===r.v.month){var ve=f()(de).add(-ne,"M"),ue=f()(Ce);he=(0,R.wH)(ve,ue,null,M)}else if(G===r.v.quarter){var pe=f()(de).add(-ne,"Q"),Se=f()(Ce);he=(0,R.Yi)(pe,Se,null,M)}else if(G===r.v.year){var ye=f()(de).add(-(ne/2),"Y"),J=f()(Ce);he=(0,R.V4)(ye,J,null,M)}u(V(he))}},W=function(){return function(u,l){var T=l().sheet.gunterView,G=T.periodType,D=T.periodList,M=T.viewConfig,se=M.periodCount,ae=M.onlyWorkDay,ne=se/2,de=D[ne].time,Ce=D[D.length-1].time,he=null;if(G===r.v.day){var fe=f()(de),Ee=f()(Ce).add(ne,"d");he=ae?(0,R.B7)(null,Ce,null,M):(0,R.gw)(fe,Ee,null,M)}else if(G===r.v.week){var Y=f()(de),oe=f()(Ce).add(ne,"w");he=(0,R.KS)(Y,oe,null,M)}else if(G===r.v.month){var ve=f()(de),ue=f()(Ce).add(ne,"M");he=(0,R.wH)(ve,ue,null,M)}else if(G===r.v.quarter){var pe=f()(de),Se=f()(Ce).add(ne,"Q");he=(0,R.Yi)(pe,Se,null,M)}else if(G===r.v.year){var ye=f()(de),J=f()(Ce).add(ne/2,"Y");he=(0,R.V4)(ye,J,null,M)}u(V(he))}}},75704:(lt,Te,t)=>{"use strict";t.r(Te),t.d(Te,{addHierarchyChildrenRecord:()=>q,addHierarchyRecord:()=>I,addHierarchyRelateSheetControls:()=>m,addMultiRelateHierarchyControls:()=>u,addTextTitleRecord:()=>Q,addTopLevelStateFromTemp:()=>h,becomeTopLevelRecord:()=>F,changeHierarchyChildrenVisible:()=>N,deleteHierarchyRecord:()=>k,expandMultiLevelHierarchyDataOfMultiRelate:()=>S,expandedMultiLevelHierarchyData:()=>s,getAssignChildren:()=>K,getDefaultHierarchyData:()=>W,getHierarchyRecord:()=>B,getTopLevelHierarchyData:()=>b,hideHierarchyRecord:()=>ee,hierarchyViewRefresh:()=>P,initHierarchyRelateSheetControls:()=>v,moveMultiSheetRecord:()=>E,moveRecord:()=>X,multiRelateGetChildren:()=>w,onCopySuccess:()=>c,removeHierarchyTempItem:()=>i,updateHierarchyData:()=>z,updateHierarchySearchRecord:()=>l,updateMovedRecord:()=>le,updateTitleData:()=>x});var ce=t(88106),g=t(88902),p=t.n(g),L=t(63239),te=t.n(L),R=t(88239),y=t(42723),a=t(47518),r=t.n(a);if(!/^(1887|7596|7798)$/.test(t.j))var o=t(45231);var d=t(7145),Z=t.n(d);if(!/^(1887|7596|7798)$/.test(t.j))var H=t(70973);var U=t(96486),f=t.n(U);if(!/^(1887|7596|7798)$/.test(t.j))var V=t(57185);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(89499);var O=500,n=function T(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return r()(G).map(function(M){M&&(D+=1),(0,U.get)(M,"childrenids.length")>0&&(D=T(M.childrenids,D))}),D};function s(T){return function(G,D){var M=D(),se=M.sheet,ae=se.filters||{},ne=ae.searchType,de=(0,y.Z)(ae,["searchType"]),Ce=se.hierarchyView.hierarchyDataStatus.pageSize,he=Ce===void 0?50:Ce;o.Z.getFilterRows((0,C.zG)((0,R.default)({},T,de,(0,H.YA)(se),{pageSize:he,searchType:ne||1}))).then(function(fe){var Ee=fe.data,Y=fe.count,oe=fe.resultCode;if(oe===1){var ve=(0,H.z8)(Ee),ue=n(Ee),pe=(ue<1e3&&he===50||ue>1e3&&he===1e3)&&se.hierarchyView.hierarchyTopLevelDataCount===0;G({type:"INIT_HIERARCHY_VIEW_DATA",data:ve}),G({type:"CHANGE_HIERARCHY_DATA_STATUS",data:(0,R.default)({loading:pe,pageIndex:1},pe?{pageSize:ue>1e3?50:1e3}:{})}),G({type:"CHANGE_HIERARCHY_TOP_LEVEL_DATA_COUNT",count:Y}),G({type:"EXPAND_HIERARCHY_VIEW_STATE",data:{treeData:ve,data:Ee,level:pe?ue>1e3?"1":"5":+T.layer}}),pe&&G(W())}})}}function j(T){return T.map(function(G){return G.rowid}).join(",")}function A(T){var G=T.worksheet,D=T.records,M=T.kanbanKey,se=T.index,ae=T.para,ne=ae.dispatch,de=ae.getState,Ce=ae.viewControls,he=ae.level,fe=ae.filters,Ee=(0,y.Z)(ae,["dispatch","getState","viewControls","level","filters"]),Y=de(),oe=Y.sheet;if(f().isEqual(f().get(fe,"filtersGroup")||[],f().get(oe,"filters.filtersGroup")||[])){if(D.length>=1e3||se>he||se>Ce.length){var ve=(0,H.z8)(D);ne({type:"INIT_HIERARCHY_VIEW_DATA",data:ve}),ne({type:"EXPAND_HIERARCHY_VIEW_STATE",data:{treeData:ve,data:D,level:he}}),ne({type:"CHANGE_HIERARCHY_DATA_STATUS",data:{loading:!1}});return}var ue=Ce[se-1],pe=ue.worksheetId,Se=ue.controlId;o.Z.getFilterRows((0,C.zG)((0,R.default)({},Ee,fe,{relationWorksheetId:pe,controlId:Se,kanbanKey:M,pageSize:O}))).then(function(ye){var J=ye.data;if(J.length<1){var me=(0,H.z8)(D);ne({type:"INIT_HIERARCHY_VIEW_DATA",data:me}),ne({type:"EXPAND_HIERARCHY_VIEW_STATE",data:{treeData:me,data:D,level:he}}),ne({type:"CHANGE_HIERARCHY_DATA_STATUS",data:{loading:!1}});return}A({worksheet:G,records:D.concat(J),kanbanKey:j(J),index:se+1,para:ae})})}}var S=function(G){return function(D,M){var se=M(),ae=se.sheet,ne=ae.worksheetInfo,de=ne===void 0?{}:ne,Ce=ae.filters,he=de.worksheetId,fe=(0,V.X)(ae),Ee=fe.viewControls,Y=fe.viewId;o.Z.getFilterRows((0,C.zG)((0,R.default)({worksheetId:he,viewId:Y,pageSize:50},Ce))).then(function(oe){var ve=oe.data,ue=oe.count,pe=j(ve);if(D({type:"CHANGE_HIERARCHY_TOP_LEVEL_DATA_COUNT",count:ue}),D({type:"CHANGE_HIERARCHY_DATA_STATUS",data:{pageIndex:1}}),!pe||G<=1){var Se=(0,H.z8)(ve);D({type:"EXPAND_HIERARCHY_VIEW_STATE",data:{treeData:Se,data:ve,level:1}}),D({type:"INIT_HIERARCHY_VIEW_DATA",data:Se}),D({type:"CHANGE_HIERARCHY_DATA_STATUS",data:{loading:!1}});return}var ye={viewControls:Ee,level:G,viewId:Y,dispatch:D,getState:M,worksheetId:he,filters:Ce};A({worksheet:ae,records:ve,kanbanKey:pe,index:2,para:ye})})}},I=function(G){return function(D){var M=G.path,se=G.pathId,ae=G.data;D({type:"CHANGE_HIERARCHY_VIEW_DATA",data:(0,H.z8)([ae])}),(0,U.isEmpty)(M)?D({type:"ADD_TOP_LEVEL_STATE",data:[ae]}):D(q({data:ae,path:M,pathId:se}))}};function c(T){return function(G){var D=T.path,M=T.pathId,se=T.item;D.length===1?G({type:"ADD_TOP_LEVEL_STATE",data:se}):G(q({data:se,path:D.slice(0,-1),pathId:M.slice(0,-1)}))}}function q(T){return{type:"ADD_HIERARCHY_CHILDREN_RECORD_STATE",data:T}}var b=function(G){return function(D){D({type:"CHANGE_HIERARCHY_DATA_STATUS",data:{loading:!0}}),o.Z.getFilterRows((0,C.zG)(G)).then(function(M){var se=M.data,ae=M.resultCode,ne=M.count;if(ae===1){var de=(0,H.z8)(se);D({type:"INIT_HIERARCHY_VIEW_DATA",data:de}),D({type:"INIT_HIERARCHY_VIEW_STATE",data:se}),D({type:"CHANGE_HIERARCHY_TOP_LEVEL_DATA_COUNT",count:ne}),D({type:"CHANGE_HIERARCHY_DATA_STATUS",data:{loading:!1}})}})}};function k(T){var G=T.rows,D=T.path,M=T.pathId,se=(0,y.Z)(T,["rows","path","pathId"]);return function(ae,ne){var de=ne(),Ce=de.sheet,he=Ce.hierarchyView,fe=he.hierarchyViewData,Ee=G.filter(function(Y){return!!Y.allowDelete}).map(function(Y){return Y.rowid});o.Z.deleteWorksheetRows((0,R.default)({rowIds:Ee},(0,H.ny)(Ce,D),se)).then(function(Y){var oe=Ee[0];if(Y.isSuccess){var ve=M.length;ae(ve===1?s({layer:3}):K({path:D.slice(0,-1),pathId:M.slice(0,-1),kanbanKey:M[ve-2]},!0)),ae({type:"CHANGE_HIERARCHY_VIEW_DATA",data:Z()(fe,{$unset:[oe]})})}})}}var ee=function(G,D,M){return function(se,ae){var ne=ae(),de=ne.sheet,Ce=de.hierarchyView,he=Ce.hierarchyViewData,fe=M.length;se(fe===1?s({layer:3}):K({path:D.slice(0,-1),pathId:M.slice(0,-1),kanbanKey:M[fe-2]},!0)),se({type:"CHANGE_HIERARCHY_VIEW_DATA",data:Z()(he,{$unset:[G]})})}},re=function(G,D){for(var M=0;M<D.length;M++)if(G[M]!==D[M])return!1;return!0},ie=function(G,D){if(!(!Array.isArray(G)||!Array.isArray(D)))return te()(G.slice(0,-1))===te()(D.slice(0,-1))};function le(T){return function(G,D){var M=T.src,se=T.target,ae=(0,y.Z)(T,["src","target"]),ne=D(),de=ne.sheet,Ce=de.controls,he=(0,V.X)(de),fe=he.viewControl,Ee=f().find(Ce,function(oe){return oe.controlId===fe}),Y=[(0,R.default)({},f().pick(Ee,["type","controlId","controlName"]),{value:te()([{sid:se.rowId}])})];o.Z.updateWorksheetRow((0,R.default)({newOldControl:Y,rowId:M.rowId},(0,H.YA)(de),ae)).then(function(oe){if(M.path.length===1){G(s({layer:3}));return}if(ie(M.path,se.path)){G(K({path:M.path.slice(0,-1),pathId:M.pathId.slice(0,-1),kanbanKey:M.pathId[M.pathId.length-2]},!0));return}if(re(M.path,se.path)){G(K((0,R.default)({},f().pick(se,["path","pathId"]),{kanbanKey:se.rowId}),!0));return}G(K((0,R.default)({},f().pick(se,["path","pathId"]),{kanbanKey:se.rowId}),!0)),G(K({path:M.path.slice(0,-1),pathId:M.pathId.slice(0,-1),kanbanKey:M.pathId[M.pathId.length-2]},!0))})}}function E(T){return function(G,D){var M=D(),se=M.sheet,ae=T.src,ne=T.target,de=(0,V.X)(se),Ce=de.viewControls,he=Ce[ne.path.length-1].worksheetId,fe=Ce[ne.path.length],Ee=fe.controlId,Y=fe.worksheetId,oe=se.hierarchyView,ve=(0,U.get)(oe,["hierarchyViewData",[ae.rowId]]),ue=ve.pid,pe=ve.controls,Se=f().find(pe,function(J){return J.controlId===Ee})||{},ye=Se.viewId;o.Z.replaceRowRelationRows({worksheetId:he,fromRowId:ue,toRowId:ne.rowId,rowIds:[ae.rowId],controlId:Ee,viewId:ye}).then(function(J){var me=J.isSuccess;me?(G({type:"MULTI_RELATE_MOVE_RECORD",data:{src:ae,target:ne}}),G(K({path:ne.path,pathId:ne.pathId,kanbanKey:ne.rowId,controlId:Ee,relationWorksheetId:Y})),G(K({path:ae.path.slice(0,-1),pathId:ae.pathId.slice(0,-1),kanbanKey:ue,controlId:Ee,relationWorksheetId:Y}))):alert(_l("\u8C03\u6574\u5173\u8054\u5173\u7CFB\u5931\u8D25! \u8BF7\u7A0D\u540E\u91CD\u8BD5"),2)})}}function w(T){return function(G,D){var M=D(),se=M.sheet,ae=(0,V.X)(se),ne=ae.viewControls,de=ne===void 0?[]:ne,Ce=de[T.path.length];if(Ce){var he=Ce.controlId,fe=Ce.worksheetId;G(K((0,R.default)({},T,{controlId:he,relationWorksheetId:fe})))}}}function K(T){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,D=T.path,M=D===void 0?[]:D,se=T.pathId,ae=se===void 0?[]:se,ne=T.callback,de=(0,y.Z)(T,["path","pathId","callback"]);return function(Ce,he){var fe=he(),Ee=fe.sheet,Y=Ee.filters,oe=Ee.hierarchyView,ve=(0,V.X)(Ee),ue=ve.viewType,pe=ve.childType,Se=ve.viewControls,ye=Se===void 0?[]:Se,J=function(){if(ue===2&&pe===2){var be=M.length,xe=ye[be]||{},Ae=xe.controlId,Ne=xe.worksheetId;return{controlId:Ae,relationWorksheetId:Ne,pageSize:1e3}}};de=(0,R.default)({},J(),(0,H.YA)(Ee),Y,de),o.Z.getFilterRows((0,C.zG)(de)).then(function(me){var be=me.data,xe=me.resultCode,Ae=me.count;if(xe===1){if(Ce({type:"CHANGE_HIERARCHY_VIEW_DATA",data:(0,H.z8)(be)}),G){Ce({type:"UPDATE_HIERARCHY_CHILDREN",data:{data:be,path:M,pathId:ae}});return}Ce({type:"EXPAND_CHILDREN_STATE",data:{data:be,path:M,pathId:ae}}),f().isFunction(ne)&&ne()}})}}var N=function(G){return{type:"TOGGLE_HIERARCHY_VISIBLE",data:G}};function F(T){return function(G,D){var M=D(),se=M.sheet,ae=se.hierarchyView,ne=se.controls,de=ae.hierarchyViewState,Ce=T.rowId,he=T.path,fe=T.pathId,Ee=(0,R.default)({kanbanKey:fe[fe.length-2]},(0,H.YA)(se),se.filters,{path:he.slice(0,-1),pathId:fe.slice(0,-1)}),Y=(0,V.X)(se),oe=Y.viewControl,ve=f().find(ne,function(pe){return pe.controlId===oe}),ue=[(0,R.default)({},f().pick(ve,["type","controlId","controlName"]),{value:te()([])})];o.Z.updateWorksheetRow((0,R.default)({newOldControl:ue,rowId:Ce},(0,H.YA)(se))).then(function(pe){pe&&pe.data&&(G(K(Ee,!0)),G({type:"ADD_TOP_LEVEL_STATE",data:[pe.data]}),T.children&&T.children.length&&G(K((0,R.default)({kanbanKey:Ce,path:[de.length],pathId:[Ce]},(0,H.YA)(se),se.filters),!0)))})}}var h=function(G){return{type:"ADD_TOP_LEVEL_STATE_FROM_TEMP",data:G}};function z(T){var G=T.recordId,D=T.value,M=T.path,se=T.pathId,ae=T.relateSheet;return function(ne,de){var Ce=de(),he=Ce.sheet,fe=he.hierarchyView,Ee=fe.hierarchyViewData,Y=(0,V.X)(he),oe=Y.viewControl,ve=Y.childType,ue=p()(D);if(f().includes(ue,oe)){var pe=(0,R.default)({kanbanKey:se[se.length-2]},(0,H.YA)(he),he.filters,{path:M.slice(0,-1),pathId:se.slice(0,-1)});ne(K(pe,!0)),ne({type:"ADD_TOP_LEVEL_STATE",data:[Ee[G]]});return}if(f().isEmpty(D)||ne({type:"CHANGE_HIERARCHY_VIEW_DATA",data:Z()(Ee,(0,ce.default)({},G,{$apply:function(J){return(0,R.default)({},J,D)}}))}),ae){if(String(ve)==="2"){ne(w({path:M,pathId:se,kanbanKey:G}));return}var Se=(0,R.default)({kanbanKey:G},(0,H.YA)(he),he.filters,{path:M,pathId:se});ne(K(Se,!0))}}}function X(T){return{type:"MOVE_RECORD",data:T}}function B(T,G){return function(D,M){var se=M(),ae=se.sheet;T=(0,R.default)({},(0,H.YA)(ae),ae.filters,T),o.Z.getFilterRows((0,C.zG)(T)).then(function(ne){var de=ne.data,Ce=ne.resultCode,he=ne.count;(0,U.isFunction)(G)&&G(de),!(Ce!==1||!de.length)&&(D({type:"CHANGE_HIERARCHY_VIEW_DATA",data:(0,H.z8)(de)}),D({type:"CHANGE_HIERARCHY_DATA_STATUS",data:{loading:!1,pageIndex:T.pageIndex||1}}),D({type:"ADD_TOP_LEVEL_STATE",data:de}),D({type:"CHANGE_HIERARCHY_TOP_LEVEL_DATA_COUNT",count:he}))})}}function x(T){var G=T.data,D=T.rowId;return function(M,se){var ae=se(),ne=ae.sheet,de=(0,U.get)(ne,["hierarchyView","hierarchyViewData",D]);M({type:"UPDATE_HIERARCHY_VIEW_DATA",data:(0,ce.default)({},D,(0,R.default)({},de,G))})}}function Q(T){return{type:"ADD_TEXT_TITLE_RECORD",data:T}}function i(T){return{type:"REMOVE_HIERARCHY_TEMP_ITEM",data:T}}function m(T){return{type:"ADD_HIERARCHY_RELATE_SHEET_CONTROLS",payload:T}}function v(T){return{type:"INIT_HIERARCHY_RELATE_SHEET_CONTROLS",payload:T}}function W(T){return function(G,D){var M=D(),se=M.sheet,ae=Number(fe)===2?50:f().get(se,"hierarchyView.hierarchyTopLevelDataCount")?f().get(se,"hierarchyView.hierarchyDataStatus.pageSize"):1e3,ne=(0,U.isEmpty)(T)?(0,V.X)(se):T,de=ne.viewId,Ce=ne.viewControl,he=ne.viewControls,fe=ne.childType;if(!(!Ce&&(0,U.isEmpty)(he)))if(G({type:"CHANGE_HIERARCHY_DATA_STATUS",data:{loading:!0,pageSize:ae}}),f().includes(["1","0"],String(fe))){var Ee=safeParse(localStorage.getItem("hierarchyConfig-"+de)),Y=Ee.level;G(s({layer:Y||(ae===1e3?"5":"1")}))}else{var oe=safeParse(localStorage.getItem("hierarchyConfig-"+de)),ve=oe.level;G(S(ve||3))}}}function P(){W()}function u(T){return function(G){o.Z.getWorksheetsControls({worksheetIds:T}).then(function(D){var M=D.code,se=D.data;if(M===1){var ae=se.map(function(ne){return ne.controls});G(m({ids:T,controls:ae}))}})}}var l=function(G){return function(D,M){var se=M(),ae=se.sheet,ne=ae.hierarchyView.hierarchyTopLevelDataCount||0;if(ne<1e3){if(G){var de=(0,H.fl)(G.rowid,ae.hierarchyView.hierarchyViewState);de&&(D({type:"CHANGE_HIERARCHY_DATA_VISIBLE",data:de}),setTimeout(function(){var Ce=document.getElementById(""+G.rowid);Ce&&Ce.scrollIntoView({inline:"center",block:"center"})},100))}D({type:"CHANGE_HIERARCHY_SEARCH_RECORD_ID",data:G?G.rowid:null})}else D({type:"CHANGE_HIERARCHY_RECORD_INFO_ID",data:G?G.rowid:null})}}},15308:(lt,Te,t)=>{"use strict";t.r(Te),t.d(Te,{addNewRecord:()=>G,clearChartId:()=>F,clearFilters:()=>ne,copyCustomPage:()=>ve,getNavGroupCount:()=>Y,initMobileGunter:()=>pe,loadCustomButtons:()=>m,loadDraftDataCount:()=>Se,loadWorksheet:()=>Q,openNewRecord:()=>D,refreshSheet:()=>T,refreshWorksheetControls:()=>se,resetQuickFilter:()=>Ce,saveView:()=>u,updateAppPkgData:()=>X,updateBase:()=>N,updateCurrentViewState:()=>ye,updateCustomButtons:()=>v,updateFilters:()=>ae,updateGroupFilter:()=>he,updateIsCharge:()=>z,updateNavGroup:()=>l,updateQuickFilter:()=>de,updateSearchRecord:()=>ue,updateSheetListVisible:()=>oe,updateView:()=>P,updateViewShowcount:()=>J,updateViews:()=>W,updateWorksheetControls:()=>M,updateWorksheetInfo:()=>i,updateWorksheetLoading:()=>B,updateWorksheetSomeControls:()=>h});var ce=t(63239),g=t.n(ce),p=t(88106),L=t(88902),te=t.n(L),R=t(94942),y=t.n(R),a=t(88239),r=t(36803),o=t(52945),d=t.n(o);if(!/^(1887|7596|7798)$/.test(t.j))var Z=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var H=t(49365);var U=t(7145),f=t.n(U);if(!/^(1887|7596|7798)$/.test(t.j))var V=t(15742);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(26358);if(!/^(1887|7596|7798)$/.test(t.j))var O=t(34694);if(!/^(1887|7596|7798)$/.test(t.j))var n=t(15081);if(!/^(1887|7596|7798)$/.test(t.j))var s=t(99597);if(!/^(1887|7596|7798)$/.test(t.j))var j=t(92663);if(!/^(1887|7596|7798)$/.test(t.j))var A=t(17293);if(!/^(1887|7596|7798)$/.test(t.j))var S=t(81010);if(!/^(1887|7596|7798)$/.test(t.j))var I=t(91650);if(!/^(1887|7596|7798)$/.test(t.j))var c=t(75704);if(!/^(1887|7596|7798)$/.test(t.j))var q=t(26918);if(!/^(1887|7596|7798)$/.test(t.j))var b=t(183);if(!/^(1887|7596|7798)$/.test(t.j))var k=t(31742);if(!/^(1887|7596|7798)$/.test(t.j))var ee=t(76345);if(!/^(1887|7596|7798)$/.test(t.j))var re=t(62232);if(!/^(1887|7596|7798)$/.test(t.j))var ie=t(89499);var le=t(96486),E=t.n(le);if(!/^(1887|7596|7798)$/.test(t.j))var w=t(15577);if(!/^(1887|7596|7798)$/.test(t.j))var K=t(94869);var N=function(be){return function(xe,Ae){var Ne=Ae().sheet;if(E().get(Ne,"base.viewId")&&be.viewId&&E().get(Ne,"base.viewId")!==be.viewId){var Me=E().find(Ne.views,function(Fe){return Fe.viewId===be.viewId});Me&&(0,ie.YO)(Me)&&xe(ne())}xe({type:"WORKSHEET_UPDATE_BASE",base:d()({},be,{chartId:be.chartId||void 0})})}},F=function(be){return function(xe,Ae){xe({type:"WORKSHEET_UPDATE_BASE",base:{chartId:void 0}})}},h=function(be){return{type:"WORKSHEET_UPDATE_SOME_CONTROLS",controls:be}},z=function(be){return{type:"WORKSHEET_UPDATE_IS_CHARGE",isCharge:be}},X=function(be){return{type:"WORKSHEET_UPDATE_APPPKGDATA",appPkgData:be}},B=function(be){return{type:"WORKSHEET_UPDATE_LOADING",loading:be}},x=null;function Q(me,be){var xe=this;return function(Ae,Ne){var Me=Ne().sheet.base,Fe=Me===void 0?{}:Me,Be=Fe.appId,we=Fe.viewId,Ie=Fe.chartId;x&&x.abort&&Fe.type!=="single"&&x.abort(),Ae({type:"WORKSHEET_FETCH_START"});var ge={worksheetId:me,reportId:Ie||void 0,getViews:!0,getTemplate:!0,getRules:!0,getSwitchPermit:!0,resultType:2};x=Z.Z.getWorksheetInfo(ge),E().isFunction(be)&&be(x),x.then(function(){var Re=(0,r.Z)(y().mark(function Pe(ke){var We,Ve;return y().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:if(We=(0,w.T3)(Be,me),ke.entityName=We.recordName||ke.entityName,ke.advancedSetting&&(ke.advancedSetting.title=We.formTitle||ke.advancedSetting.title,ke.advancedSetting.sub=We.formSub||ke.advancedSetting.sub,ke.advancedSetting.continue=We.formContinue||ke.advancedSetting.continue),(E().get(window,"shareState.isPublicView")||E().get(window,"shareState.isPublicPage"))&&(ke.allowAdd=!1),Ve=void 0,!ke.isWorksheetQuery){Ge.next=9;break}return Ge.next=8,Z.Z.getQueryBySheetId({worksheetId:me},{silent:!0});case 8:Ve=Ge.sent;case 9:if([1,4].includes(ke.resultCode)){Ge.next=12;break}return Ae({type:"WORKSHEET_INIT_FAIL"}),Ge.abrupt("return");case 12:E().get(ke,"template.controls")&&(ke.template.controls=(0,ie.zj)(Be,ke.template.controls)),(!ke.isWorksheetQuery||Ve)&&(Ae({type:"WORKSHEET_INIT",value:d()(Ie?(0,a.default)({},ke,{views:ke.views.map(function(pt){return(0,a.default)({},pt,{viewType:0})})}):ke,{isRequestingRelationControls:ke.requestAgain})}),Ae((0,n.setViewLayout)(we)),Ae({type:"WORKSHEET_SEARCH_CONFIG_INIT",value:(0,re.T0)(E().get(Ve,"searchConfig")||[])})),me&&Ae({type:"WORKSHEET_PERMISSION_INIT",value:ke.switches}),ke.requestAgain&&(x=Z.Z.getWorksheetInfo((0,a.default)({},ge,{resultType:void 0})),x.then(function(pt){var ot=(0,ie.zj)(Be,E().get(pt,"template.controls"));E().isEmpty(ot)||(Ae(h(ot)),Ae({type:"WORKSHEET_UPDATE_IS_REQUESTING_RELATION_CONTROLS",value:!1}))}));case 16:case"end":return Ge.stop()}},Pe,xe)}));return function(Pe){return Re.apply(this,arguments)}}()).catch(function(Re){!(0,le.get)(Re,"errorCode")===1&&Ae({type:"WORKSHEET_INIT_FAIL"})})}}var i=function(be){return{type:"WORKSHEET_UPDATE_WORKSHEETINFO",info:be}};function m(me){var be=me.appId,xe=me.viewId,Ae=me.rowId,Ne=me.worksheetId;return function(Me){!Ne||E().get(window,"shareState.isPublicView")||E().get(window,"shareState.isPublicPage")||Z.Z.getWorksheetBtns({appId:be,viewId:xe,rowId:Ae,worksheetId:Ne}).then(function(Fe){Me(xe?{type:"WORKSHEET_UPDATE_BUTTONS",buttons:Fe}:{type:"WORKSHEET_UPDATE_SHEETBUTTONS",buttons:Fe})})}}function v(me,be){return function(xe,Ae){var Ne=Ae().sheet,Me=Ne.buttons,Fe=Me===void 0?[]:Me,Be=Ne.sheetButtons,we=Be===void 0?[]:Be;if(be){var Ie=Ae().sheet,ge=Ie.base,Re=ge.worksheetId,Pe=ge.appId,ke=ge.viewId;xe({type:"WORKSHEET_UPDATE_SHEETBUTTONS",buttons:(0,k.u)(E().cloneDeep(we),me,be)}),xe(m({worksheetId:Re,appId:Pe,viewId:ke}))}else xe({type:"WORKSHEET_UPDATE_SHEETBUTTONS",buttons:(0,k.u)(E().cloneDeep(we),me,be)}),xe({type:"WORKSHEET_UPDATE_BUTTONS",buttons:(0,k.u)(E().cloneDeep(Fe),me,be)})}}var W=function(be){return{type:"WORKSHEET_UPDATE_VIEWS",views:be}},P=function(be){return{type:"WORKSHEET_UPDATE_VIEW",view:be}};function u(me,be,xe){return function(Ae,Ne){var Me=Ne().sheet,Fe=Me.base,Be=Me.views,we=Me.navGroupFilters,Ie=E().find(Be,function(ke){return ke.viewId===me}),ge=(0,a.default)({},be),Re=te()(ge).filter(function(ke){return ke!=="editAdKeys"});if(!Ie){console.error("can not find view");return}var Pe=E().some(["filters","moreSort","viewControl","fastFilters"].map(function(ke){return Re.includes(ke)}))||Re.includes("advancedSetting")&&(!!E().get(ge,["advancedSetting","navfilters"])||!!E().get(ge,["advancedSetting","colorid"]));ge.filters&&(ge.filters=ge.filters.map(C.QZ)),Z.Z.saveWorksheetView((0,a.default)({},E().pick(Fe,["appId","worksheetId"]),{viewId:me,editAttrs:Re},ge)).then(function(ke){var We=Re.reduce(function(Ve,it){return(0,a.default)({},Ve,(0,p.default)({},it,ke[it]))},(0,a.default)({},Ie,be));E().get(be,"advancedSetting.shownullitem")!==E().get(Ie,"advancedSetting.shownullitem")&&E().get(be,"advancedSetting.shownullitem")===""&&we&&we.length>0&&we[0].values.length<=0&&Ae(he([])),Re.includes("navGroup")&&(Ae(he([],We)),Ae(Y())),Ae({type:"WORKSHEET_UPDATE_VIEW",view:ke}),Pe&&(E().includes(Re,"filters")&&!E().isEqual(Ie.filters,We.filters)||E().get(Ie,"advancedSetting.colorid")!==E().get(We,"advancedSetting.colorid"))&&Ae(T(We)),typeof xe=="function"&&xe(We)}).catch(function(ke){alert(_l("\u89C6\u56FE\u914D\u7F6E\u4FDD\u5B58\u5931\u8D25"),3)})}}var l=function(){return function(be,xe){var Ae=xe().sheet,Ne=Ae.views,Me=Ae.base,Fe=Me.viewId,Be=Fe===void 0?"":Fe,we=Ne.find(function(ge){return ge.viewId===Be})||{},Ie=we.navGroup&&we.navGroup.length>0?we.navGroup[0]:{};Ie.controlId&&window.localStorage.getItem("navGroupIsOpen")!=="false"&&be(Y())}};function T(me,be){return function(xe){String(me.viewType)===V.B.sheet?(xe((0,n.refresh)(be)),xe(l())):String(me.viewType)===V.B.board?xe((0,I.initBoardViewData)()):String(me.viewType)===V.B.structure?xe((0,c.getDefaultHierarchyData)()):String(me.viewType)===V.B.calendar?xe((0,j.refresh)()):String(me.viewType)===V.B.gallery?(xe((0,s.refresh)()),xe(l())):String(me.viewType)===V.B.gunter?xe((0,S.resetLoadGunterView)()):String(me.viewType)===V.B.detail?xe((0,q.refresh)()):String(me.viewType)===V.B.resource?xe((0,A.refresh)()):String(me.viewType)===V.B.customize&&E().get(be,"isRefreshBtn")?xe((0,b.refresh)()):String(me.viewType)===V.B.map&&xe((0,K.initMapViewData)(void 0,!0))}}function G(me,be){return function(xe){String(be.viewType)===V.B.sheet?(xe((0,n.addRecord)(me)),xe(l())):String(be.viewType)===V.B.board?xe((0,I.initBoardViewData)()):String(be.viewType)===V.B.structure?xe((0,c.getDefaultHierarchyData)()):String(be.viewType)===V.B.calendar?xe((0,j.refresh)()):String(be.viewType)===V.B.gallery?(xe((0,s.refresh)()),xe(l())):String(be.viewType)===V.B.gunter?xe((0,S.addNewRecord)(me)):String(be.viewType)===V.B.resource?xe((0,A.refresh)()):String(be.viewType)===V.B.detail?xe((0,q.refresh)()):String(be.viewType)===V.B.map&&xe((0,K.initMapViewData)(void 0,!0))}}function D(){return function(me,be){var xe=be().sheet,Ae=xe.base,Ne=xe.views,Me=xe.worksheetInfo,Fe=xe.navGroupFilters,Be=xe.sheetSwitchPermit,we=xe.isCharge,Ie=xe.draftDataCount,ge=xe.appPkgData,Re=Ae.appId,Pe=Ae.viewId,ke=Ae.groupId,We=Ae.worksheetId,Ve=E().find(Ne,{viewId:Pe})||!Pe&&Ne[0]||{},it=Ve.advancedSetting,Ge=it===void 0?{}:it,pt=Ge.usenav,ot=pt==="1"&&!E().isEmpty(Ve.navGroup)&&Ve.navGroup.length>0&&E().includes([V.B.sheet,V.B.gallery],String(Ve.viewType));function vt(){var St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,O.Z)((0,a.default)({},St,{showFillNext:!0,appId:Re,viewId:Pe,worksheetId:We,worksheetInfo:Me,groupId:ke,projectId:Me.projectId,needCache:!0,addType:1,showShare:!0,sheetSwitchPermit:Be,hidePublicShare:!((0,k.v)(ee.RX.recordShareSwitch,Be,Pe)&&!md.global.Account.isPortal),isCharge:we,appPkgData:ge,entityName:Me.entityName,onAdd:function(Xe){if(!E().isEmpty(Xe)){me(G(Xe,Ve)),me((0,n.setHighLightOfRows)([Xe.rowid]));return}me({type:"UPDATE_DRAFT_DATA_COUNT",data:Ie+1})},updateWorksheetControls:function(Xe){me(h(Xe))},loadDraftDataCount:function(){me(Se({appId:Re,worksheetId:We}))},addNewRecord:function(Xe,$e){me(G(Xe,$e))}}))}if(ot&&!E().isEmpty(Fe)&&Fe.length>0){var At=void 0,yt=Fe[0];if([9,10,11].includes(yt.dataType))At=(0,p.default)({},yt.controlId,g()([yt.values[0]])),vt({defaultFormData:At,defaultFormDataEditable:!0});else{var st=E().find(Me.template.controls,{controlId:yt.controlId}).dataSource;if(!st)return;Z.Z.getRowDetail({worksheetId:st,rowId:yt.values[0]}).then(function(St){At=(0,p.default)({},yt.controlId,g()([{sid:yt.values[0],name:yt.navNames[0]||"",sourcevalue:St.rowData}])),vt({defaultFormData:At,defaultFormDataEditable:!0})})}}else vt()}}var M=function(be){return{type:"WORKSHEET_UPDATE_CONTROLS",controls:be}},se=function(be){return function(xe,Ae){var Ne=Ae().sheet,Me=Ne.base.worksheetId;Z.Z.getWorksheetInfo({worksheetId:Me,getTemplate:!0}).then(function(Fe){xe({type:"WORKSHEET_UPDATE_SOME_CONTROLS",controls:Fe.template.controls})})}};function ae(me,be){return function(xe){xe({type:"WORKSHEET_UPDATE_FILTERS",filters:me}),xe(T(be,{changeFilters:!0}))}}function ne(me,be){return function(xe){xe({type:"WORKSHEET_CLEAR_FILTERS"})}}function de(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],be=arguments[1];return function(xe,Ae){xe({type:"WORKSHEET_UPDATE_QUICK_FILTER",filter:me}),xe(T(be,{resetPageIndex:!0}))}}function Ce(me){return function(be,xe){var Ae=xe().sheet.quickFilter;E().isEmpty(Ae)||(be({type:"WORKSHEET_RESET_QUICK_FILTER"}),be(T(me)))}}function he(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],be=arguments[1];return function(xe,Ae){xe({type:"WORKSHEET_UPDATE_GROUP_FILTER",navGroupFilters:me}),String(be.viewType)===V.B.map&&xe((0,K.mapNavGroupFiltersUpdate)(me,be))}}var fe=null,Ee=/^(1887|7596|7798)$/.test(t.j)?null:[];function Y(){return function(me,be){var xe=be().sheet,Ae=xe.filters,Ne=Ae===void 0?{}:Ae,Me=xe.base,Fe=Me===void 0?{}:Me,Be=xe.quickFilter,we=Be===void 0?{}:Be,Ie=Fe.appId,ge=Fe.worksheetId,Re=Fe.viewId,Pe=Ne.filterControls,ke=Ne.filtersGroup,We=Ne.keyWords,Ve=Ne.searchType;fe&&fe.abort&&Ee.includes(ge)&&fe.abort(),!(!ge&&!Re)&&(Ee.push(ge),fe=Z.Z.getNavGroup((0,ie.zG)({appId:Ie,worksheetId:ge,viewId:Re,filterControls:Pe,filtersGroup:ke,searchType:Ve,fastFilters:(E().isArray(we)?we:[]).map(function(it){return E().pick(it,["controlId","dataType","spliceType","filterType","dateRange","value","values","minValue","maxValue"])}),keyWords:We})),fe.then(function(it){Ee=(Ee||[]).filter(function(Ge){return Ge!==ge}),me({type:"WORKSHEET_NAVGROUP_COUNT",data:it})}))}}function oe(me){return{type:me?"WORKSHEET_SHOW_LIST":"WORKSHEET_HIDE_LIST"}}function ve(me){return function(be,xe){var Ae=xe().sheetList.data;H.Z.copyCustomPage(me).then(function(Ne){if(Ne){alert(_l("\u590D\u5236\u6210\u529F"));var Me={workSheetId:Ne,workSheetName:me.name,type:1,status:1,icon:me.icon||"1_0_home",iconColor:me.iconColor||"#616161"};be({type:"SHEET_LIST",data:f()(Ae,{$push:[Me]})})}else alert(_l("\u590D\u5236\u5931\u8D25"),2)})}}function ue(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},be=arguments[1];return function(xe){String(me.viewType)===V.B.structure?xe((0,c.updateHierarchySearchRecord)(be)):String(me.viewType)===V.B.gunter?xe((0,S.updateGunterSearchRecord)(be)):String(me.viewType)===V.B.map&&xe({type:"CHANGE_MAP_VIEW_SEARCH_DATA",data:be})}}function pe(me){var be=me.appId,xe=me.worksheetId,Ae=me.viewId,Ne=me.access_token;return function(Me){Ne&&(window.access_token=Ne);var Fe={appId:be,worksheetId:xe,viewId:Ae};Me({type:"WORKSHEET_UPDATE_BASE",base:Fe}),Z.Z.getWorksheetInfo({worksheetId:xe,getViews:!0,getTemplate:!0,getRules:!0}).then(function(Be){Me({type:"WORKSHEET_INIT",value:Be})})}}var Se=function(be){var xe=be.appId,Ae=be.worksheetId;return function(Ne,Me){E().get(window,"shareState.isPublicView")||E().get(window,"shareState.isPublicPage")||Z.Z.getFilterRowsTotalNum({appId:xe,worksheetId:Ae,getType:21}).then(function(Fe){Ne({type:"UPDATE_DRAFT_DATA_COUNT",data:Number(Fe)||0})})}};function ye(me){return function(be,xe){var Ae=xe().sheet,Ne=Ae.base,Me=Ae.views,Fe=Ne.viewId,Be=E().find(Me,function(we){return we.viewId===Fe});be({type:"WORKSHEET_UPDATE_VIEW",view:(0,a.default)({},Be,me)})}}function J(me){return function(be,xe){var Ae=xe().sheet.base,Ne=Ae.viewId;safeLocalStorageSetItem("showcount_"+Ne,me),be({type:"VIEW_UPDATE_SHOW_COUNT",showcount:me})}}},94869:(lt,Te,t)=>{"use strict";t.r(Te),t.d(Te,{initMapViewData:()=>r,mapNavGroupFiltersUpdate:()=>o});var ce=t(88239);if(!/^(1887|7596|7798)$/.test(t.j))var g=t(89499);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(57185);var te=t(96486),R=t.n(te),y=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},H=arguments[1],U=Z.base,f=Z.navGroupFilters,V=f===void 0?[]:f,C=Z.quickFilter,O=C===void 0?[]:C,n=U.appId;H=H||(0,L.X)(Z);var s=H,j=s.worksheetId,A=s.viewId;return(0,g.zG)((0,ce.default)({appId:n,viewId:A,worksheetId:j,navGroupFilters:V,pageIndex:1,pageSize:200},Z.filters,{fastFilters:(0,g.pT)(O)}))};function a(d,Z){var H=d.para,U=d.dispatch;p.Z.getFilterRows(H).then(function(f){var V=f.data,C=f.resultCode;U({type:"CHANGE_MAP_VIEW_DATA",data:V.reverse()}),U({type:"CHANGE_MAP_VIEW_LOADING",loading:!1}),U({type:"REFRESH_MAP",refreshMap:!1})})}function r(d){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function(H,U){var f=U(),V=f.sheet,C=y(V,d);C&&(H({type:"CHANGE_MAP_VIEW_LOADING",loading:!0}),Z&&H({type:"REFRESH_MAP",refreshMap:!0}),a({para:C,dispatch:H},V))}}function o(d,Z){return function(H,U){var f=U(),V=f.sheet,C=y(V,Z),O=R().get(V,"mapView.mapViewState.navGroupFilters")||[];C&&(d.length===0&&O.length===0||(H({type:"CHANGE_MAP_VIEW_LOADING",loading:!0}),H({type:"REFRESH_MAP",refreshMap:!0}),H({type:"NAV_GROUP_FILTERS",navGroupFilters:d}),a({para:(0,ce.default)({},C,{navGroupFilters:d}),dispatch:H})))}}},17293:(lt,Te,t)=>{"use strict";t.r(Te),t.d(Te,{fetchRows:()=>s,fetchRowsByGroupId:()=>j,getRelationControls:()=>A,getTimeList:()=>q,initData:()=>n,refresh:()=>c,updateByKey:()=>ie,updateCurrnetTime:()=>ee,updateKeyWords:()=>b,updateRecordTime:()=>re,updateResourceDataByKeys:()=>k});var ce=t(63239),g=t.n(ce),p=t(85315),L=t(88239);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(44257);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(96849);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(89499);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(15577);var o=t(96486),d=t.n(o),Z=t(30381),H=t.n(Z),U=t(27484),f=t.n(U);if(!/^(1887|7596|7798)$/.test(t.j))var V=t(92510);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(5913);if(!/^(1887|7596|7798)$/.test(t.j))var O=t(70973);var n=function(){return function(E,w){E({type:"CHANGE_RESOURCE_LOADINNG",data:!0}),E({type:"CHANGE_RESOURCE_RESOURCE_DATA",data:[]}),E({type:"CHANGE_RESOURCE_RESOURCE_DATA_BY_KEY",data:[]}),E({type:"CHANGE_RESOURCE_KEYWORDS",data:""}),E({type:"CHANGE_RESOURCE_CURRENT_TIME",data:null})}},s=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function(w,K){var N=K().sheet,F=N.base,h=N.controls,z=N.views,X=N.filters,B=N.quickFilter,x=B===void 0?[]:B,Q=N.resourceview,i=(0,r.A_)(),m=i.access_token;m&&(window.access_token=m);var v=(F.viewId?d().find(z,{viewId:F.viewId}):z[0])||{},W=d().find(h,function(ae){return ae.controlId===(v||{}).viewControl}),P=Q.gridTimes,u=P===void 0?[]:P,l=Q.currentTime,T=Q.keywords,G=localStorage.getItem(v.viewId+"_resource_type")||V.V5[d().get(v,"advancedSetting.calendarType")||0],D=(d().get(v,"advancedSetting.showtime")||"").split("-").map(function(ae){return f()(ae,"HH:mm").format("HH:mm")}),M=void 0,se=void 0;G==="Month"?(M=H()((u[0]||{}).date).format("YYYY-MM-DD HH:mm"),se=H()((u[u.length-1]||{}).date).format("YYYY-MM-DD 23:59:59")):(M=H()((u[0]||{}).date).format("YYYY-MM-DD")+" "+(D[0]&&D.length>1?D[0]:"00:00"),se=G==="Week"?""+H()(H()((u[u.length-1]||{}).date)).format("YYYY-MM-DD HH:59"):""+H()(H()((u[u.length-1]||{}).date)).format("YYYY-MM-DD HH:59")),E&&w({type:"CHANGE_RESOURCE_LOADINNG",data:!0}),te.Z.getFilterRows((0,a.zG)((0,L.default)({beginTime:M,endTime:se,appId:F.appId,viewId:F.viewId,worksheetId:F.worksheetId,relationWorksheetId:W&&W.type===29?W.dataSource:null},X,{fastFilters:(0,a.pT)(x),kanbanIndex:1,kanbanSize:50}))).then(function(ae){var ne=ae.data,de=ae.count,Ce=ae.resultCode,he=S((0,O.K1)(ne,v,h),v,h,u,l);w({type:"CHANGE_RESOURCE_RESOURCE_DATA",data:he});var fe=he.filter(function(Ee){return Ee.name.toLowerCase().indexOf(T.toLowerCase())>=0});w({type:"CHANGE_RESOURCE_RESOURCE_DATA_BY_KEY",data:fe}),w({type:"CHANGE_RESOURCE_LOADINNG",data:!1})})}},j=function(E,w){return function(K,N){var F=N().sheet,h=F.base,z=F.controls,X=F.views,B=F.filters,x=F.quickFilter,Q=x===void 0?[]:x,i=F.resourceview,m=i.resourceData,v=m===void 0?[]:m,W=(0,r.A_)(),P=W.access_token;P&&(window.access_token=P);var u=h.viewId?d().find(X,{viewId:h.viewId}):X[0],l=d().find(z,function(Ce){return Ce.controlId===(u||{}).viewControl}),T=i.gridTimes,G=T===void 0?[]:T,D=i.currentTime,M=i.keywords,se=localStorage.getItem(u.viewId+"_resource_type")||V.V5[d().get(u,"advancedSetting.calendarType")||0],ae=(d().get(u,"advancedSetting.showtime")||"").split("-").map(function(Ce){return f()(Ce,"HH:mm").format("HH:mm")}),ne=void 0,de=void 0;se==="Month"?(ne=H()((G[0]||{}).date).format("YYYY-MM-DD HH:mm"),de=H()((G[G.length-1]||{}).date).format("YYYY-MM-DD 23:59:59")):(ne=H()((G[0]||{}).date).format("YYYY-MM-DD")+" "+(ae[0]&&ae.length>1?ae[0]:"00:00"),de=se==="Week"?""+H()(H()((G[G.length-1]||{}).date)).format("YYYY-MM-DD HH:59"):""+H()(H()((G[G.length-1]||{}).date)).format("YYYY-MM-DD HH:59")),te.Z.getFilterRows((0,a.zG)((0,L.default)({beginTime:ne,endTime:de,appId:h.appId,viewId:h.viewId,worksheetId:h.worksheetId,relationWorksheetId:l&&l.type===29?l.dataSource:null},B,{fastFilters:(0,a.pT)(Q),kanbanIndex:1,kanbanSize:50,pageSize:20,kanbanKey:E,pageIndex:w}))).then(function(Ce){var he=Ce.data,fe=Ce.count,Ee=Ce.resultCode;console.log(he);var Y=[];v.map(function(oe){oe.key===E&&(Y=oe.rows.map(function(ve){return d().omit(ve,["color","width","startTime","endTime"," hoverColor","fontColor","left","top","height"])}))}),K(ie(E,Y.concat((d().get(he,"[0].rows")||[]).map(function(oe){return JSON.parse(oe)}))))})}},A=function(E){return function(w,K){E&&te.Z.getWorksheetControls({worksheetId:E,getTemplate:!0}).then(function(N){var F=N.code,h=N.data;if(F===1){var z=h.controls;w({type:"CHANGE_RESOURCE_RESOURCE_RELATION_CONTROLS",data:z})}})}},S=function(E,w,K,N,F){var h=localStorage.getItem(w.viewId+"_resource_type")||V.V5[d().get(w,"advancedSetting.calendarType")||0],z=h!=="Day"?V.kM:V.it;return(0,y.WO)(E.filter(function(X){return X.key!=="-1"}).map(function(X){var B=I(X,w,K,N,!0,F),x=(0,R.HI)(B,w,N*z),Q=x.data,i=x.totalHeight;return(0,L.default)({},X,{rows:Q,height:i})}))},I=function(E,w,K,N){var F=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,h=arguments[5],z=(E.rows||[]).map(function(X){var B=(0,L.default)({},(0,R.b0)(F?JSON.parse(X):X,w,K),{groupId:E.key}),x=K.find(function(m){return m.controlId===d().get(w,"advancedSetting.colorid")})||{};B=(0,y.Gp)(B,x);var Q=(0,C.n5)(B.color),i=(0,r.eO)(B.color)?"#333":"#fff";return B=(0,L.default)({},B,(0,R.Fk)(B,w,N,K,h)),(0,L.default)({},B,{hoverColor:Q,fontColor:i})});return z},c=function(){return function(E,w){E(s())}},q=function(E){return function(w,K){var N=K().sheet,F=N.views,h=N.base,z=N.resourceview,X=h.viewId?d().find(F,{viewId:h.viewId}):F[0],B=(0,R.DL)(F.find(function(i){return i.viewId===h.viewId}),z.currentTime),x=localStorage.getItem(X.viewId+"_resource_type")||V.V5[d().get(X,"advancedSetting.calendarType")||0],Q=[];x==="Month"?Q=B.list:x==="Week"?B.list.map(function(i){var m;return(m=Q).push.apply(m,(0,p.Z)(i.times))}):B.list.map(function(i){i.times.map(function(m){Q.push(m,(0,L.default)({},m,{date:H()(m.date).add(30,"m").format("YYYY-MM-DD HH:mm")}))})}),w({type:"CHANGE_RESOURCE_TIME_LIST",data:B}),w({type:"CHANGE_RESOURCE_TIME_LIST_A",data:Q}),E&&E()}},b=function(E){return function(w,K){var N=K().sheet.resourceview,F=N.resourceData,h=F===void 0?[]:F;w({type:"CHANGE_RESOURCE_KEYWORDS",data:E});var z=h.filter(function(X){return X.name.toLowerCase().indexOf(E.toLowerCase())>=0});w(k(z))}},k=function(E){return function(w,K){w({type:"CHANGE_RESOURCE_RESOURCE_DATA_BY_KEY",data:E})}},ee=function(E){return function(w,K){w({type:"CHANGE_RESOURCE_CURRENT_TIME",data:E})}},re=function(E,w,K,N,F){return function(h,z){var X=z().sheet,B=X.base,x=X.controls,Q=X.resourceview,i=X.views,m=B.viewId?d().find(i,{viewId:B.viewId}):i[0],v=Q.keywords,W=v===void 0?"":v,P=Q.resourceData,u=Q.gridTimes,l=Q.currentTime,T=x.find(function(ae){return ae.controlId===d().get(m,"advancedSetting.begindate")})||{},G=x.find(function(ae){return ae.controlId===d().get(m,"advancedSetting.enddate")})||{},D=[];if(d().isNull(w)||D.push({controlId:d().get(m,"advancedSetting.begindate"),controlName:T.controlName,dot:T.dot,type:T.type,value:T.type===15?H()(w).format("YYYY-MM-DD"):w}),d().isNull(K)||D.push({controlId:d().get(m,"advancedSetting.enddate"),controlName:G.controlName,dot:G.dot,type:G.type,value:G.type===15?H()(K).format("YYYY-MM-DD"):K}),F){var M=x.find(function(ae){return ae.controlId===m.viewControl})||{},se=P.find(function(ae){return ae.key===F});D.push({controlId:m.viewControl,controlName:M.controlName,dot:M.dot,type:M.type,value:M.type===29?g()([{name:se.name,sid:se.key}]):M.type===26?"["+se.name+"]":se.data})}te.Z.updateWorksheetRow({appId:B.appId,rowId:E.rowid,viewId:B.viewId,worksheetId:B.worksheetId,newOldControl:D}).then(function(ae){var ne=[],de=[];F?P.map(function(Ce){Ce.key===F?ne=Ce.rows.concat(ae.data).map(function(he){return d().omit(he,["color","width","startTime","endTime"," hoverColor","fontColor","left","top","height"])}):N===Ce.key&&(de=Ce.rows.filter(function(he){return he.rowid!==E.rowid}).map(function(he){return d().omit(he,["color","width","startTime","endTime"," hoverColor","fontColor","left","top","height"])}))}):P.map(function(Ce){Ce.key===N&&(ne=Ce.rows.map(function(he){return he.rowid===ae.data.rowid?d().omit((0,L.default)({},he,ae.data),["color","width","startTime","endTime"," hoverColor","fontColor","left","top","height"]):d().omit(he,["color","width","startTime","endTime"," hoverColor","fontColor","left","top","height"])}))}),h(F?ie(F,ne,N,de):ie(N,ne))})}},ie=function(E,w,K,N){return function(F,h){console.log(E,w,K,N);var z=h().sheet,X=z.base,B=z.controls,x=z.resourceview,Q=z.views,i=X.viewId?d().find(Q,{viewId:X.viewId}):Q[0],m=x.keywords,v=m===void 0?"":m,W=x.resourceData,P=x.gridTimes,u=x.currentTime,l=function(M,se){var ae=(0,L.default)({},M,{rows:se}),ne=I(ae,i,B,P,!1,u),de=localStorage.getItem(i.viewId+"_resource_type")||V.V5[d().get(i,"advancedSetting.calendarType")||0],Ce=de!=="Day"?V.kM:V.it,he=(0,R.HI)(ne,i,P*Ce),fe=he.data,Ee=he.totalHeight;return(0,L.default)({},ae,{rows:fe,height:Ee})},T=W.map(function(D){return D.key===E?l(D,w):D.key===K?l(D,N):D});F({type:"CHANGE_RESOURCE_RESOURCE_DATA",data:T});var G=T.filter(function(D){return D.name.toLowerCase().indexOf(v.toLowerCase())>=0});F(k(G))}}},15081:(lt,Te,t)=>{"use strict";t.r(Te),t.d(Te,{addRecord:()=>v,changePageIndex:()=>B,changePageSize:()=>X,changeWorksheetSheetViewSummaryType:()=>m,clearHiddenColumn:()=>K,clearHighLight:()=>b,clearSelect:()=>re,fetchRows:()=>s,frozenColumn:()=>N,getWorksheetSheetViewSummary:()=>i,hideColumn:()=>w,hideRows:()=>ie,refresh:()=>q,resetSheetLayout:()=>h,saveSheetLayout:()=>F,selectRows:()=>le,setHighLight:()=>k,setHighLightOfRows:()=>ee,setRowsEmpty:()=>j,setViewLayout:()=>Q,sortByControl:()=>A,updateControlOfRow:()=>I,updateDefaultScrollLeft:()=>z,updateRows:()=>c,updateSheetColumnWidths:()=>E,updateViewPermission:()=>S});var ce=t(52945),g=t.n(ce),p=t(88902),L=t.n(p),te=t(88106),R=t(85315),y=t(63239),a=t.n(y),r=t(88239),o=t(96486),d=t.n(o);if(!/^(1887|7596|7798)$/.test(t.j))var Z=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var H=t(86674);if(!/^(1887|7596|7798)$/.test(t.j))var U=t(89499);if(!/^(1887|7596|7798)$/.test(t.j))var f=t(15308);if(!/^(1887|7596|7798)$/.test(t.j))var V=t(25734);var C=50,O=void 0,n=void 0,s=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=P.isFirst,l=P.changeView,T=P.noLoading,G=P.noClearSelected,D=P.updateWorksheetControls;return function(M,se){var ae=se().sheet,ne=ae.base,de=ae.filters,Ce=ae.sheetview,he=ae.quickFilter,fe=ae.navGroupFilters,Ee=ne.appId,Y=ne.viewId,oe=ne.worksheetId,ve=ne.maxCount,ue=ne.chartId,pe=ne.showAsSheetView,Se=parseInt((0,U.q2)("WORKSHEET_VIEW_PAGESIZE",Y),10);d().isNaN(Se)&&(Se=void 0);var ye=Ce.sheetFetchParams,J=ye.pageIndex,me=ye.sortControls;l&&(J=1,M(x()));var be=(0,r.default)({worksheetId:oe,pageSize:Se||C,pageIndex:J,status:1,appId:Ee,viewId:Y,reportId:ue||void 0,sortControls:me,notGetTotal:!0},de,{fastFilters:(0,U.pT)(he),navGroupFilters:fe,isGetWorksheet:D},pe?{getType:0}:{});ve&&(be.pageIndex=1,be.pageSize=ve),(l||u)&&M(Q(Y)),Se&&Se!==C&&M(X(Se,be.pageIndex)),M({type:"WORKSHEET_SHEETVIEW_FETCH_ROWS_START",value:{noLoading:T,noClearSelected:G}}),M(i()),l&&O&&d().isFunction(O.abort)&&O.abort(),O=Z.Z.getFilterRows((0,U.zG)(be)),O.then(function(xe){if(D&&d().get(xe,"template.controls")){try{M({type:"WORKSHEET_UPDATE_CONTROLS",controls:d().get(xe,"template.controls").filter(function(Ae){return Ae.controlId.length===24||d().includes(H.cU.conact(H._Q).map(function(Ne){return Ne.controlId}),Ae.controlId)})})}catch(Ae){}M(Q(Y))}M({type:"WORKSHEET_SHEETVIEW_FETCH_ROWS",rows:xe.data,resultCode:xe.resultCode}),ue&&M({type:"WORKSHEET_SHEETVIEW_UPDATE_COUNT",count:xe.count})}),J===1&&!ue&&(l&&n&&d().isFunction(n.abort)&&n.abort(),n=Z.Z.getFilterRowsTotalNum((0,U.zG)(be)),n.then(function(xe){if(!xe)M({type:"WORKSHEET_SHEETVIEW_UPDATE_COUNT_ABNORMAL"});else{var Ae=parseInt(xe,10);d().isNaN(Ae)||M({type:"WORKSHEET_SHEETVIEW_UPDATE_COUNT",count:Ae})}}))}},j=function(){return function(P){P({type:"WORKSHEET_SHEETVIEW_FETCH_ROWS",rows:[]}),P({type:"WORKSHEET_SHEETVIEW_UPDATE_COUNT",count:0})}},A=function(P){return{type:"WORKSHEET_SHEETVIEW_UPDATE_SORTS",sortControl:P}};function S(){return function(W,P){var u=P().sheet.base,l=u.appId,T=u.viewId,G=u.worksheetId;Z.Z.getViewPermission({appId:l,worksheetId:G,viewId:T}).then(function(D){D.view&&W({type:"WORKSHEET_SHEETVIEW_UPDATE_PERMISSION",viewId:T,value:D.view})})}}function I(W){var P=W.cell,u=P===void 0?{}:P,l=W.cells,T=l===void 0?[]:l,G=W.recordId,D=W.rules,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function(se,ae){!d().isEmpty(u)&&d().isEmpty(T)&&(T=[u]);var ne=ae().sheet,de=ne.base,Ce=ne.controls,he=de.appId,fe=de.viewId,Ee=de.worksheetId,Y=u.controlId,oe=u.value,ve=d().find(Ce,{controlId:Y}),ue=T.map(function(pe){var Se=pe.controlId,ye=pe.editType,J=pe.value,me=d().find(Ce,{controlId:Se});if(me.type===29)try{var be=JSON.parse(J);d().isArray(be)&&!d().isEmpty(be)&&be[0].sourcevalue&&(J=a()(be.map(function(xe){return d().omit(xe,"sourcevalue")})))}catch(xe){}return me&&(0,r.default)({},d().pick(me,["controlId","type","controlName","dot"]),{editType:ye,value:J})}).filter(d().identity);d().isEmpty(ue)||Z.Z.updateWorksheetRow({appId:he,viewId:fe,worksheetId:Ee,rowId:G,newOldControl:ue}).then(function(pe){if(pe.resultCode===1){if(se((0,f.updateNavGroup)()),d().isFunction(M.callback)&&M.callback(pe.data),se(c([G],d().omit(pe.data,["allowedit","allowdelete"]))),d().isFunction(M.updateSuccessCb)&&M.updateSuccessCb(pe.data),se(i()),d().includes([H.DN.MULTI_SELECT,H.DN.DROP_DOWN],ve.type)&&/{/.test(oe)){var Se=(0,r.default)({index:ve.options.length+1,isDeleted:!1,key:d().last(JSON.parse(pe.data[Y]))},JSON.parse(d().last(JSON.parse(oe)))),ye=(0,r.default)({},ve,{options:[].concat((0,R.Z)(ve.options),[Se])});se({type:"WORKSHEET_UPDATE_CONTROL",control:ye})}}else if(pe.resultCode===11)M.row&&(se(c([G],(0,te.default)({},Y,oe))),se(c([G],d().omit(M.row,["allowedit","allowdelete"])))),(0,U.a)(pe.resultCode,M.cell);else if(pe.resultCode===32){var J=(0,V.YW)(D,pe.badData);d().get(J,"0.errorInfo.0")&&alert("\u7F16\u8F91\u5931\u8D25\uFF0C"+d().get(J,"0.errorInfo.0.errorMessage"),2)}else(0,U.a)(pe.resultCode)}).catch(function(pe){alert(_l("\u7F16\u8F91\u5931\u8D25\uFF01"),3)})}}function c(W,P){return function(u,l){u({type:"WORKSHEET_SHEETVIEW_UPDATE_ROWS_BY_ROWIDS",rowIds:W,rowUpdatedValue:P}),u((0,f.updateNavGroup)())}}function q(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=W.resetPageIndex,u=W.changeFilters,l=W.noLoading,T=W.noClearSelected,G=W.updateWorksheetControls;return function(D,M){var se=M().sheet,ae=se.filters,ne=se.quickFilter,de=se.navGroupFilters,Ce=se.views,he=se.base,fe=he.chartId,Ee=he.viewId,Y=d().find(Ce,{viewId:Ee}),oe=!fe&&d().get(Y,"advancedSetting.clicksearch")==="1",ve=!fe&&d().get(Y,"advancedSetting.showallitem")==="1"&&!d().get(Y,"navGroup[0].viewId")&&d().get(Y,"navGroup").length>0;(ae.keyWords||P||u)&&D(B(1)),oe&&d().isEmpty(ne)||ve&&d().isEmpty(de)?D(j()):D(s({noLoading:l,noClearSelected:T,updateWorksheetControls:G})),D({type:"WORKSHEET_SHEETVIEW_REFRESH"})}}var b=function(P){return function(){$(".sheetViewTable.id-"+P+"-id .cell").removeClass("highlight"),delete window["sheetTableHighlightRow"+P]}},k=function(P,u){return function(l){l(b(P)),$(".sheetViewTable.id-"+P+"-id .cell.row-"+u).addClass("highlight"),window["sheetTableHighlightRow"+P]=u}},ee=function(P,u){return function(l,T){var G=T().sheet.sheetview,D=G.sheetViewData.rows;l(b(u)),P.forEach(function(M){var se=d().findIndex(D,function(ae){return ae.rowid===M});d().isUndefined(se)||(setTimeout(function(){$((u?".sheetViewTable.id-"+u+"-id":".sheetViewTable")+" .cell.row-"+se).addClass("highlight")},100),window["sheetTableHighlightRow"+u]=se)})}},re=function(){return{type:"WORKSHEET_SHEETVIEW_CLEAR_SELECT"}};function ie(W){return function(P,u){var l=u().sheet.sheetview,T=l.sheetViewData.rows;W=W.filter(function(G){return d().find(T,function(D){return G===D.rowid})}),W.length&&(P(re()),P({type:"WORKSHEET_SHEETVIEW_HIDE_ROWS",rowIds:W})),P((0,f.updateNavGroup)())}}function le(W){var P=W.rows,u=P===void 0?[]:P,l=W.selectAll;return l?{type:"WORKSHEET_SHEETVIEW_SELECT_ALL",value:!0}:{type:"WORKSHEET_SHEETVIEW_SELECT_ROWS",rows:u}}var E=function(P,u){return{type:"WORKSHEET_SHEETVIEW_UPDATE_COLUMN_WIDTH",controlId:P,value:u}},w=function(P){return{type:"WORKSHEET_SHEETVIEW_HIDE_COLUMN",controlId:P}},K=function(){return{type:"WORKSHEET_SHEETVIEW_CLEAR_HIDDEN_COLUMN"}};function N(W){return{type:"WORKSHEET_SHEETVIEW_UPDATE_FIXED_COLUMN_COUNT",value:W}}function F(W){var P=W.closePopup,u=P===void 0?function(){}:P;return function(l,T){var G=T().sheet,D=G.base,M=G.controls,se=G.views,ae=G.sheetview,ne=D.appId,de=D.worksheetId,Ce=D.viewId,he=ae.sheetViewConfig,fe=he.fixedColumnCount,Ee=he.sheetHiddenColumns,Y=he.sheetColumnWidths,oe=d().find(se,function(ue){return ue.viewId===Ce});if(oe){var ve={appId:ne,worksheetId:de,viewId:Ce,editAttrs:["AdvancedSetting"]};Ee.length&&(ve.editAttrs=ve.editAttrs.concat("ShowControls"),oe.advancedSetting.customdisplay==="1"&&oe.showControls.length?ve.showControls=oe.showControls.filter(function(ue){return!d().find(Ee,function(pe){return pe===ue})}):(ve.advancedSetting=(0,r.default)({},oe.advancedSetting,{customdisplay:"1"}),ve.showControls=M.filter(function(ue){return/^\w{24}$/.test(ue.controlId)||d().includes(safeParse(oe.advancedSetting.sysids,"array"),ue.controlId)}).sort(function(ue,pe){return ue.row*10+ue.col>pe.row*10+pe.col?1:-1}).filter(function(ue){return!d().find(Ee,function(pe){return pe===ue.controlId})}).map(function(ue){return ue.controlId}))),ve.advancedSetting={fixedcolumncount:fe,sheetcolumnwidths:a()(Y),layoutupdatetime:new Date().getTime()},ve.editAdKeys=L()(ve.advancedSetting),delete ve.advancedSetting.fixedColumnCount,delete ve.advancedSetting.layoutUpdateTime,delete ve.advancedSetting.sheetColumnWidths,l(K()),l({type:"WORKSHEET_UPDATE_VIEW",view:(0,r.default)({},oe,ve)}),u(),Z.Z.saveWorksheetView(ve).then(function(){}).catch(function(ue){alert(_l("\u4FDD\u5B58\u8868\u683C\u5916\u89C2\u5931\u8D25\uFF01"),3),console.log(ue)})}}}function h(){return function(W,P){var u=P().sheet,l=u.base,T=u.views,G=l.viewId,D=d().find(T,function(ne){return ne.viewId===G});if(D){var M=D.advancedSetting,se=M===void 0?{}:M,ae={};if(se.sheetcolumnwidths)try{ae=JSON.parse(se.sheetcolumnwidths)}catch(ne){}W(K()),W(N(Number(se.fixedcolumncount||0))),(0,U.$3)("WORKSHEET_VIEW_COLUMN_FROZON",G,se.fixedcolumncount||0),W({type:"WORKSHEET_SHEETVIEW_INIT_COLUMN_WIDTH",value:ae}),(0,U.$3)("WORKSHEET_VIEW_COLUMN_WIDTH",G,a()(ae)),(0,U.yB)("SHEET_LAYOUT_UPDATE_TIME",G)}}}var z=function(P){return{type:"WORKSHEET_SHEETVIEW_UPDATE_SCROLL_LEFT",value:P}};function X(W,P){return function(u,l){var T=l().sheet.base;(0,U.$3)("WORKSHEET_VIEW_PAGESIZE",T.viewId,W),u({type:"WORKSHEET_SHEETVIEW_CHANGE_PAGESIZE",pageSize:W,pageIndex:P})}}function B(W,P){return function(u){P?setTimeout(function(){u({type:"WORKSHEET_SHEETVIEW_CHANGE_PAGEINDEX",pageIndex:W})},P):u({type:"WORKSHEET_SHEETVIEW_CHANGE_PAGEINDEX",pageIndex:W})}}function x(){return function(W,P){W({type:"WORKSHEET_SHEETVIEW_CLEAR"})}}function Q(W){return function(P,u){var l=u().sheet.views,T=d().find(l,{viewId:W});if(!(!T||T.viewType!==0)){var G=T.advancedSetting,D={},M=(0,U.q2)("SHEET_LAYOUT_UPDATE_TIME",W),se=parseInt((0,U.q2)("WORKSHEET_VIEW_PAGESIZE",W),10),ae=(0,U.q2)("WORKSHEET_VIEW_COLUMN_FROZON",W);try{D=JSON.parse((0,U.q2)("WORKSHEET_VIEW_COLUMN_WIDTH",W))}catch(ne){}if(G.layoutUpdateTime&&(G.layoutupdatetime=G.layoutUpdateTime),G.fixedColumnCount&&(G.fixedcolumncount=G.fixedColumnCount),G.sheetColumnWidths&&(G.sheetcolumnwidths=G.sheetColumnWidths),G.layoutupdatetime&&(!M||Number(G.layoutupdatetime)>Number(M))&&(G.fixedcolumncount&&(ae=Number(G.fixedcolumncount),(0,U.yB)("WORKSHEET_VIEW_COLUMN_FROZON",W)),G.sheetcolumnwidths))try{D=(0,r.default)({},D,JSON.parse(G.sheetcolumnwidths)),(0,U.$3)("WORKSHEET_VIEW_COLUMN_WIDTH",W,a()(D))}catch(ne){}d().isEmpty(D)||P({type:"WORKSHEET_SHEETVIEW_INIT_COLUMN_WIDTH",value:D}),d().isNumber(se)&&!d().isNaN(se)&&P({type:"WORKSHEET_SHEETVIEW_CHANGE_PAGESIZE",pageSize:se}),d().isNumber(parseInt(ae,10))&&!d().isNaN(parseInt(ae,10))&&P({type:"WORKSHEET_SHEETVIEW_UPDATE_FIXED_COLUMN_COUNT",value:parseInt(ae,10)})}}}function i(){return function(W,P){var u=P().sheet,l=u.base,T=u.sheetview,G=u.filters,D=u.quickFilter,M=u.navGroupFilters,se=l.appId,ae=l.viewId,ne=l.worksheetId,de=l.chartId,Ce=T.sheetViewData.rowsSummary,he={};try{he=JSON.parse((0,U.q2)("WORKSHEET_VIEW_SUMMARY_TYPES",ae))}catch(Y){}var fe=g()(he,Ce.types),Ee=L()(fe).map(function(Y){return{controlId:Y,rptType:parseInt(fe[Y],10)}});Ee.length&&Z.Z.getFilterRowsReport((0,U.zG)((0,r.default)({appId:se,viewId:ae,worksheetId:ne,reportId:de||void 0,columnRpts:Ee,filterControls:[],keyWords:"",searchType:1},G,{fastFilters:D.map(function(Y){return d().pick(Y,["controlId","dataType","spliceType","filterType","dateRange","value","values","minValue","maxValue"])}),navGroupFilters:M}))).then(function(Y){Y&&Y.length&&W({type:"WORKSHEET_SHEETVIEW_FETCH_REPORT_SUCCESS",types:fe,values:[{}].concat((0,R.Z)(Y)).reduce(function(oe,ve){return g()({},oe,(0,te.default)({},ve.controlId,ve.value))})})})}}function m(W){var P=W.controlId,u=W.value;return function(l,T){var G=T().sheet,D=G.sheetview,M=G.base,se=D.sheetViewData.rowsSummary,ae=M.viewId,ne=g()({},se.types,(0,te.default)({},P,u));if(u===0&&delete ne[P],(0,U.$3)("WORKSHEET_VIEW_SUMMARY_TYPES",ae,a()(ne)),u===0){l({type:"WORKSHEET_SHEETVIEW_FETCH_REPORT_SUCCESS",types:ne});return}l({type:"WORKSHEET_SHEETVIEW_FETCH_REPORT_SUCCESS",types:ne,values:{}}),l(i())}}function v(W,P){return function(u,l){var T=l().sheet.sheetview,G=T.sheetViewData,D=G.rows,M=G.count;if(d().isArray(W)||(W=[W]),u({type:"WORKSHEET_SHEETVIEW_UPDATE_COUNT",count:M+W.length}),u(i()),P){var se=d().findIndex(D,function(ne){return ne.rowid===P}),ae=d().isUndefined(P)?[].concat((0,R.Z)(W),(0,R.Z)(D)):[].concat((0,R.Z)(D.slice(0,se+1)),(0,R.Z)(W),(0,R.Z)(D.slice(se+1)));u({type:"WORKSHEET_SHEETVIEW_UPDATE_ROWS",rows:ae,count:M+1})}else u({type:"WORKSHEET_SHEETVIEW_UPDATE_ROWS",rows:[].concat((0,R.Z)(W),(0,R.Z)(D)),count:M+1})}}},70973:(lt,Te,t)=>{"use strict";t.d(Te,{K1:()=>n,Rg:()=>U,U9:()=>H,W_:()=>C,YA:()=>o,fl:()=>O,g9:()=>V,le:()=>f,ny:()=>Z,z8:()=>r});var ce=t(88239),g=t(52367),p=t.n(g),L=t(26378),te=t.n(L),R=t(96486),y=t.n(R);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(15742);var r=function(j){var A={};return j.forEach(function(S){A[S.rowid]=S}),A},o=function(j){var A=_.get(j,"base"),S=A.appId,I=A.worksheetId,c=A.viewId;return{appId:S,worksheetId:I,viewId:c}},d=function(j){var A=j.base,S=j.views;return(0,R.find)(S,function(I){return I.viewId===A.viewId})||{}},Z=function(j){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],S=_.get(j,"base"),I=S.appId,c=S.worksheetId,q=S.viewId,b=d(j),k=b.childType,ee=b.viewControls;if(k===2&&A.length>0){var re=ee[A.length-1];return{appId:I,worksheetId:re.worksheetId}}return{appId:I,worksheetId:c,viewId:q}},H=function(j,A){var S=U(j,A),I=S.isAdmin,c=S.isOwner;return!!I||!!c},U=function(j,A){var S={};return j===a.lt.POSSESS_ROLE&&(S.isOwner=!A),j===a.lt.MAP_OWNER&&(S.isOwner=!0),j===a.lt.ADMIN_ROLE&&(S.isAdmin=!A),j===a.lt.DEVELOPERS_ROLE&&(S.isDeveloper=!A),j===a.lt.RUNNER_ROLE&&(S.isRunner=!A),j===a.lt.RUNNER_DEVELOPERS_ROLE&&(S.isRunner=!A,S.isDeveloper=!A),S},f=function(j,A){var S=U(j,A),I=S.isAdmin,c=S.isOwner,q=S.isDeveloper;return!!I||!!c||!!q},V=function(j){var A=U(j),S=A.isAdmin,I=A.isOwner,c=A.isRunner;return!!S||!!I||!!c};function C(s){var j={};return function(){return j[s.name]&&j[s.name].abort(),j[s.name]=s.apply(void 0,arguments),j[s.name]}}function O(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(s){var A=function S(I){var c=!0,q=!1,b=void 0;try{for(var k=te()(I),ee;!(c=(ee=k.next()).done);c=!0){var re=ee.value;if(re.rowId===s)return re;if(re.children&&re.children.length>0){var ie=S(re.children);if(ie)return ie}}}catch(le){q=!0,b=le}finally{try{!c&&k.return&&k.return()}finally{if(q)throw b}}return null};return A(j)}}function n(s){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],S=safeParse(_.get(j,"advancedSetting.customitems"),"array");_.get(j,"advancedSetting.navshow")==="2"&&(S=safeParse(_.get(j,"advancedSetting.navfilters"),"array"));var I=_.find(A,function(ee){return ee.controlId===j.viewControl});if(!_.isEmpty(S)&&I){var c=S.map(function(ee){var re=safeParse(ee);return _.includes([9,10,11,28],I.type)?ee:re.id||re.accountId}),q=new(p())(c.map(function(ee,re){return[ee,re]})),b=_.sortBy(s,"sort"),k=_.sortBy(b,function(ee){return ee.key==="-1"?-999:q.get(ee.key)});return k.map(function(ee,re){return(0,ce.default)({},ee,{sort:re+1})})}return s}},57185:(lt,Te,t)=>{"use strict";t.d(Te,{H:()=>L,X:()=>te});var ce=t(72444),g=t(96486),p=t.n(g);function L(R){try{var y=JSON.parse(R);if(Array.isArray(y)){var a=(0,g.head)(y);return(typeof a>"u"?"undefined":(0,ce.default)(a))==="object"?a.sid||a.accountId||"-1":a}return y||"-1"}catch(r){return"-1"}}var te=function(y){var a=y.base,r=y.views;return(0,g.find)(r,function(o){return o.viewId===a.viewId})||{}}},1178:(lt,Te,t)=>{"use strict";t.d(Te,{AH:()=>a,IQ:()=>H,Rc:()=>o,WB:()=>r,Yp:()=>y});var ce=t(85315),g=t(88239),p=t(27484),L=t.n(p),te=t(96486),R=t.n(te);function y(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",f=arguments[1];if(!U||!f)return 0;try{return U.match(new RegExp(f,"g")).length}catch(V){return 0}}function a(U,f){if(!U)return{error:!0};/^[+-]/.test(f)||(f="+"+f);try{for(var V=L()(U),C=/([/+/-]){1}(\d+(\.\d+)?)+([YQMwdhms]){1}/g,O=C.exec(f);O;){var n=O[1],s=Number(O[2]),j=O[4];/^[+-]$/.test(n)&&s&&typeof s=="number"&&/^[YQMwdhms]$/.test(j)&&(V=V[n==="+"?"add":"subtract"](Math.round(s),j.replace(/Y/,"y"))),O=C.exec(f)}return{result:V}}catch(A){return{error:A}}}function r(U){try{if(!U)return;var f=[],V=U.type,C=U.value,O=void 0,n=void 0;switch(V===37&&(U.advancedSetting&&U.advancedSetting.summaryresult==="1"?(V=2,C=Math.round(parseFloat(U.value)*100)+"%"):V=U.enumDefault2||6),V){case 6:case 8:return String(C).trim()!==""&&R().isNumber(Number(C))&&!R().isNaN(Number(C))?Number(C):void 0;case 19:case 23:case 24:return JSON.parse(C).name;case 17:case 18:return C===""||C==='["",""]'?void 0:JSON.parse(C);case 40:return O=JSON.parse(C)||{},R().isObject(O)?(O.coordinate||"").toLowerCase()==="wgs84"?(f=H(O.x,O.y),(0,g.default)({},O,{x:f[0],y:f[1]})):O:void 0;case 9:case 10:case 11:return n=o(U.options,U.value),n.map(function(s,j){return s.value});case 26:return O=JSON.parse(C),R().isArray(O)||(O=[O]),O.filter(function(s){return!!s}).map(function(s){return typeof s=="string"?s:s.fullname});case 27:return JSON.parse(U.value).map(function(s,j){return typeof s=="string"?s:s.departmentName?s.departmentName:_l("\u8BE5\u90E8\u95E8\u5DF2\u5220\u9664")});case 48:return JSON.parse(U.value).map(function(s,j){return typeof s=="string"?s:s.organizeName?s.organizeName:_l("\u8BE5\u7EC4\u7EC7\u5DF2\u5220\u9664")});case 36:return C==="1"||C===1;case 14:return JSON.parse(C).map(function(s){return""+(s.originalFilename+s.ext)});case 35:return O=JSON.parse(C),R().isArray(O)&&O.length?O[0].name:void 0;case 29:return R().isNumber(+C)&&!R().isNaN(+C)?O=new Array(+C).fill():(O=JSON.parse(C),O=R().isArray(O)&&O.map(function(s){return r(R().assign({},U,{type:U.sourceControlType||2,value:s.name}))}).filter(R().identity)),U.enumDefault===1?O.slice(0,1):O;case 34:return R().isObject(C)?R().get(C,"rows"):[].concat((0,ce.Z)(new Array(C?Number(C):0)));case 30:return r(R().assign({},U,{type:U.sourceControlType||2,advancedSetting:R().get(U,"sourceControl.advancedSetting")||{}}));case 46:return R().isEmpty(C)?"":L()(C,y(C,":")===2?"HH:mm:ss":"HH:mm").format(U.unit==="6"||U.unit==="9"?"HH:mm:ss":"HH:mm");default:return C}}catch(s){typeof console<"u"&&console.log(s);return}}function o(U,f){if(!f||f==="[]")return[];var V=[];try{return V=JSON.parse(f),V.map(function(C){return R().find(U,function(O){return C.indexOf("other")>-1||C.indexOf("add_")>-1?C.indexOf(O.key)>-1:C===O.key})}).filter(R().identity)}catch(C){return console.log(C),[]}}function d(U,f){var V=3.141592653589793,C=6378245,O=.006693421622965943,n=-100+2*U+3*f+.2*f*f+.1*U*f+.2*Math.sqrt(Math.abs(U));return n+=(20*Math.sin(6*U*V)+20*Math.sin(2*U*V))*2/3,n+=(20*Math.sin(f*V)+40*Math.sin(f/3*V))*2/3,n+=(160*Math.sin(f/12*V)+320*Math.sin(f*V/30))*2/3,n}function Z(U,f){var V=3.141592653589793,C=6378245,O=.006693421622965943,n=300+U+2*f+.1*U*U+.1*U*f+.1*Math.sqrt(Math.abs(U));return n+=(20*Math.sin(6*U*V)+20*Math.sin(2*U*V))*2/3,n+=(20*Math.sin(U*V)+40*Math.sin(U/3*V))*2/3,n+=(150*Math.sin(U/12*V)+300*Math.sin(U/30*V))*2/3,n}function H(U,f){var V=6378245,C=.006693421622965943,O=3.141592653589793,n=d(U-105,f-35),s=Z(U-105,f-35),j=f/180*O,A=Math.sin(j);A=1-C*A*A;var S=Math.sqrt(A);n=n*180/(V*(1-C)/(A*S)*O),s=s*180/(V/S*Math.cos(j)*O);var I=f+n,c=U+s;return[c,I]}},89499:(lt,Te,t)=>{"use strict";t.d(Te,{$3:()=>pe,$p:()=>Lt,AW:()=>Rt,C8:()=>en,CD:()=>rt,D4:()=>jt,Dy:()=>it,EN:()=>gt,HP:()=>ze,I7:()=>l,II:()=>ke,Iz:()=>kt,LR:()=>$t,MO:()=>Ut,P7:()=>fe,Pz:()=>he,QE:()=>bt,QM:()=>ut,Sg:()=>dt,UM:()=>de,VM:()=>Ne,WO:()=>sn,XQ:()=>on,XS:()=>Ie,Xx:()=>ft,YO:()=>pn,Zl:()=>Le,Zu:()=>u,Zv:()=>ae,_3:()=>nt,_4:()=>J,_l:()=>mt,a:()=>Ct,bP:()=>Ze,cK:()=>qe,dS:()=>T,dt:()=>Ge,eD:()=>st,eh:()=>et,fm:()=>P,gE:()=>Ce,h2:()=>fn,h4:()=>Et,hB:()=>be,ip:()=>Zt,ir:()=>se,j8:()=>tn,jY:()=>vt,l4:()=>ot,m9:()=>ge,oS:()=>an,pQ:()=>De,pT:()=>Mt,pr:()=>we,pt:()=>Fe,q2:()=>ye,qS:()=>Be,s6:()=>ve,uY:()=>v,wV:()=>Xt,xN:()=>xt,xw:()=>Ve,yB:()=>Se,yS:()=>me,yd:()=>wt,zG:()=>ct,zi:()=>Ee,zj:()=>It});var ce=t(12424),g=t(52945),p=t.n(g),L=t(46593),te=t.n(L),R=t(99663),y=t(22600),a=t(72444),r=t(94942),o=t.n(r),d=t(88239),Z=t(36803),H=t(63239),U=t.n(H),f=t(88902),V=t.n(f),C=t(88106),O=t(17187),n=t.n(O),s=t(30381),j=t.n(s),A=t(68924),S=t.n(A),I=t(20640),c=t.n(I),q=t(5274);if(!/^(1887|7596)$/.test(t.j))var b=t(15577);var k=t(92138);if(!/^(1887|7596|7798)$/.test(t.j))var ee=t(26637);if(!/^(1887|7596|7798)$/.test(t.j))var re=t(13714);var ie=t(49365),le=t(5505),E=t(75599);if(!/^(1887|7596|7798)$/.test(t.j))var w=t(6917);if(!/^(1887|7596|7798)$/.test(t.j))var K=t(36612);if(!/^(1887|7596|7798)$/.test(t.j))var N=t(24607);if(!/^(1887|7596|7798)$/.test(t.j))var F=t(25734);if(!/^(1887|7596|7798)$/.test(t.j))var h=t(15742);if(!/^(1887|7596|7798)$/.test(t.j))var z=t(86674);if(!/^(1887|7596|7798)$/.test(t.j))var X=t(83298);var B=t(96486),x=t.n(B),Q=t(19575),i=t.n(Q);if(!/^(1887|7596|7798)$/.test(t.j))var m=t(1694);var v=new(n());window.onresize=function(){return v.emit("WINDOW_RESIZE")};function W(tt){return tt.map(function(ht){var Dt={};return ht.forEach(function(Ot){Dt[Ot.controlId]=Ot.value}),Dt})}var P={HIDDEN:0,COMPLETED:1,INCOMPLETE:2,SUM:3,AVERAGE:4,MAXIMUM:5,MINIMUM:6},u=[{type:"COMMON",value:P.HIDDEN,label:_l("\u4E0D\u663E\u793A")},{type:"COMMON",value:P.COMPLETED,label:_l("\u5DF2\u586B\u5199")},{type:"COMMON",value:P.INCOMPLETE,label:_l("\u672A\u586B\u5199")},{type:"NUMBER",value:P.SUM,label:_l("\u6C42\u548C")},{type:"NUMBER",value:P.AVERAGE,label:_l("\u5E73\u5747\u503C")},{type:"NUMBER",value:P.MAXIMUM,label:_l("\u6700\u5927\u503C")},{type:"NUMBER",value:P.MINIMUM,label:_l("\u6700\u5C0F\u503C")}];function l(tt){var ht=u.filter(function(Dt){return Dt.value===tt})[0];return ht?ht.label:""}function T(tt,ht){return tt===37&&(tt=ht.enumDefault2),tt===6||tt===8||tt===31||tt===28||tt===38&&ht&&ht.enumDefault===1?{list:u.filter(function(Dt){return Dt.type==="COMMON"}).concat(void 0).concat(u.filter(function(Dt){return Dt.type==="NUMBER"})),default:3}:{list:u.filter(function(Dt){return Dt.type==="COMMON"}),default:1}}function G(tt,ht){var Dt=[],Ot={};try{Ot=JSON.parse(ye("WORKSHEET_VIEW_SUMMARY_TYPES",tt))}catch(Ht){}return ht.forEach(function(Ht){var Kt=Ht.type===30?Ht.sourceControlType:Ht.type;Dt.push({controlId:Ht.controlId,rptType:parseInt(Ot[Ht.controlId]||_.includes([6,8,31],Kt)?3:2,10)})}),Dt}function D(tt){var ht=_.uniqBy(tt.map(function(Ot){return Ot.projectId})),Dt=md.global.Account.projects.filter(function(Ot){return ht.indexOf(Ot.projectId)>-1});return[{companyName:_l("\u4E2A\u4EBA"),projectId:""}].concat(Dt).map(function(Ot){return{project:Ot,list:tt.filter(function(Ht){return Ht.projectId===Ot.projectId})}}).filter(function(Ot){return Ot.list.length})}function M(tt,ht){return ht.typeArr?ht.typeArr.map(function(Dt){return Dt.type}).indexOf(tt)>-1:ht.data&&tt===ht.data.type}function se(tt){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Dt=[2,3,4,5,6,7,8,9,10,11,15,16,26,27,28,29,30,31,32,33,34,36,37,38,42,46,48,50];return ht.type===30&&ht.strDefault==="10"?!1:x().includes(Dt,tt)}function ae(tt){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Dt=1,Ot=2;if(tt===6||tt===8||tt===33||tt===34||tt===29&&ht.enumDefault===2)return[{text:"1 \u2192 9",value:Ot},{text:"9 \u2192 1",value:Dt}];if(tt===2||tt===29||tt===32)return[{text:"A \u2192 Z",value:Ot},{text:"Z \u2192 A",value:Dt}];if(tt===15||tt===16||tt===17||tt===18)return[{text:_l("\u6700\u65B0\u7684\u5728\u524D%05029"),value:Dt},{text:_l("\u6700\u65E7\u7684\u5728\u524D%05030"),value:Ot}];if(tt===36){var Ht=[_l("\u672A\u9009\u4E2D \u2192 \u9009\u4E2D"),_l("\u9009\u4E2D \u2192 \u672A\u9009\u4E2D")];return ht.advancedSetting&&(ht.advancedSetting.showtype==="1"&&(Ht=[_l("\u5173\u95ED \u2192 \u5F00\u542F"),_l("\u5F00\u542F \u2192 \u5173\u95ED")]),ht.advancedSetting.showtype==="2"&&(Ht=[_l("\u5426 \u2192 \u662F"),_l("\u662F \u2192 \u5426")])),[{text:Ht[0],value:Ot},{text:Ht[1],value:Dt}]}else return[{text:_l("\u5347\u5E8F%05031"),value:Ot},{text:_l("\u964D\u5E8F%05032"),value:Dt}]}function ne(tt){if(!tt.length)return[];var ht=tt.filter(function(Cn){return Cn.type===29&&Cn.enumDefault===2}),Dt=tt.filter(function(Cn){return Cn.type===30}),Ot=!_.isEmpty(ht),Ht=tt.slice(0);if(Ot){var Kt=ht.map(function(Cn){return Cn.controlId}),dn=Dt.filter(function(Cn){return _.find(Kt,function(Rn){return Cn.dataSource.slice(1,-1)===Rn})});Ht=Ht.filter(function(Cn){return!_.find(dn,function(Rn){return Rn.controlId===Cn.controlId})})}return Ht}function de(tt){var ht=tt.value,Dt=tt.unit,Ot=Dt===void 0?"6":Dt,Ht=tt.hideUnitStr,Kt=tt.dot,dn=Kt===void 0?0:Kt,Cn=ht<0;ht=(0,b.FH)(Math.floor(ht*Math.pow(10,dn))/Math.pow(10,dn),dn),Cn&&(ht=-1*ht);var Rn=x().find(ee.g1,function(ua){return ua.value===Ot});if(!Rn)return ht;var gn=Rn.text,wn={6:1,5:365*24*60*60,4:30*24*60*60,3:24*60*60,2:60*60,1:60},On=Number(ht)*wn[Ot],An=Math.floor(On/wn[5]);On-=An*wn[5];var Yn=Math.floor(On/wn[4]);On-=Yn*wn[4];var kn=Math.floor(On/wn[3]);On-=kn*wn[3];var Fn=Math.floor(On/wn[2]);On-=Fn*wn[2];var $n=Math.floor(On/wn[1]);On-=$n*wn[1];var ba=[{value:An,unit:_l("\u5E74")},{value:Yn,unit:_l("\u6708")},{value:kn,unit:_l("\u5929")},{value:Fn,unit:_l("\u65F6")},{value:$n,unit:_l("\u5206")},{value:On,unit:_l("\u79D2")}].slice(0,6-Number(Ot)||6).filter(function(ua){return ua.value!==0||ua.unit===gn}).map(function(ua){return ua.value+ua.unit}).join("");return Ht&&(ba=ba.slice(0,-1)),ba&&(Cn?"-":"")+ba}function Ce(tt){return S()(tt).replace(/(<([^>]+)>)/gi,"")}function he(tt){try{var ht=new DOMParser().parseFromString(tt,"text/html");return ht.body.textContent||""}catch(Dt){return tt}}function fe(tt){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return tt.filter(function(Ot){return!x().find(ht,function(Ht){return Ot.controlId===Ht&&!(Dt&&x().find(["ownerid","caid","ctime","utime"],function(Kt){return Kt===Ht}))})})}function Ee(tt){var ht=tt.cid,Dt=tt.data;return(x().find(Dt,function(Ot){return Ot.controlId===ht})||{}).value}var Y=/^(1887|7596|7798)$/.test(t.j)?null:[2,3,4,25,7,19,23,24,10010,32,33,41,15,16,5,17,18],oe=/^(1887|7596|7798)$/.test(t.j)?null:[8,6,31,38];function ve(tt){var ht=Y.concat(oe);return x().includes(ht,tt)}function ue(tt){return _.includes(oe,tt)}function pe(tt,ht,Dt){if(x().isObject(Dt))throw new Error("\u53EA\u652F\u6301\u5B58\u50A8\u5B57\u7B26\u4E32");var Ot=30,Ht={};if(localStorage.getItem(tt))try{Ht=JSON.parse(localStorage.getItem(tt))}catch(dn){}var Kt=x().assign({},Ht,(0,C.default)({},ht,Dt));V()(Kt).length>Ot&&delete Kt[V()(Kt).pop],safeLocalStorageSetItem(tt,U()(Kt))}function Se(tt,ht){var Dt={};if(localStorage.getItem(tt))try{Dt=JSON.parse(localStorage.getItem(tt))}catch(Ot){}delete Dt[ht],safeLocalStorageSetItem(tt,U()(Dt))}function ye(tt,ht){var Dt=[];if(localStorage.getItem(tt))try{Dt=JSON.parse(localStorage.getItem(tt))}catch(Ot){return}return Dt[ht]}function J(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!ht.length)return tt;ht=ht.filter(x().identity);var Dt=tt.filter(function(Ot){return!x().find(ht,function(Ht){return(Ot.controlId||Ot.data.controlId)===Ht})});return ht.map(function(Ot){return x().find(tt,function(Ht){return(Ht.controlId||Ht.data.controlId)===Ot})}).filter(x().identity).concat(Dt)}function me(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!ht.length)return tt.map(function(Ot){return Ot.controlId||Ot.data.controlId}).filter(function(Ot){return x().identity});ht=ht.filter(function(Ot){return x().find(tt,function(Ht){return(Ht.controlId||Ht.data.controlId)===Ot})}).filter(x().identity);var Dt=tt.filter(function(Ot){return!x().find(ht,function(Ht){return(Ot.controlId||Ot.data.controlId)===Ht})}).map(function(Ot){return Ot.controlId||Ot.data.controlId}).filter(function(Ot){return x().identity});return ht.concat(Dt)}function be(tt){return typeof tt>"u"||tt===""||tt==="[]"||tt==='["",""]'||tt===null}function xe(tt){tt=tt+"";var ht=_.find([{text:_l("\u5E74"),value:"5"},{text:_l("\u6708"),value:"4"},{text:_l("\u5929"),value:"3"},{text:_l("\u5C0F\u65F6"),value:"2"},{text:_l("\u5206\u949F"),value:"1"}],function(Dt){return Dt.value===tt});return ht?ht.text:""}function Ae(tt){var ht=tt.sourceControlType||tt.type;return ht===6||ht===8||ht===31||ht===36?"NUMBER":"STRING"}function Ne(tt){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ot=Dt.addedIds,Ht=Ot===void 0?[]:Ot,Kt=Dt.deletedIds,dn=Kt===void 0?[]:Kt,Cn=Dt.count,Rn=Cn===void 0?0:Cn,gn=Dt.isFromDefault;x().isArray(ht)||(ht=[]);var wn=x().find(tt,function(An){return An.attribute===1}),On=ht.map(function(){var An=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Yn=wn?An[wn.controlId]:"";if(wn&&wn.type===29&&Yn)try{var kn=JSON.parse(An[wn.controlId]);Yn=kn[0].name}catch(Fn){Yn=""}return{name:Yn,sid:An.rowid,type:8,sourcevalue:U()(An),row:An,isNew:x().includes(Ht,An.rowid)||gn,isFromDefault:gn,deletedIds:dn,count:Rn}});return On}function Me(tt,ht){return tt.type===26?safeParse(ht,"array").map(function(Dt){return Dt.accountId}).sort().join(""):tt.type===29?safeParse(ht,"array").map(function(Dt){return Dt.sid}).sort().join(""):ht}function Fe(tt){var ht=tt.rows,Dt=tt.rules,Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Ht=this,Kt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],dn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:3,Cn={};try{rt(ht).forEach(function(){var gn=(0,Z.Z)(o().mark(function wn(On){var An,Yn,kn,Fn,$n,ba;return o().wrap(function(La){for(;;)switch(La.prev=La.next){case 0:if(An=yt({from:dn,rules:Dt,controls:Ot.filter(function(ga){return x().find(Kt,function(Ua){return Ua===ga.controlId})}),row:On}),Yn=An.errors,kn=An.formData.filter(function(ga){return x().find(Kt,function(Ua){return Ua===ga.controlId})&&(0,N.kM)(ga).visible&&(0,N.kM)(ga).editable}),Fn=(0,F.tf)(Dt,An.formData.filter(function(ga){return x().find(Kt,function(Ua){return Ua===ga.controlId})&&(0,N.kM)(ga).visible}),On.rowid),!Fn){La.next=6;break}return La.abrupt("return");case 6:$n=new K.ZP({data:kn.map(function(ga){return(0,d.default)({},ga,{isSubList:!0})}),from:w.BD.NEWRECORD}),ba=$n.getErrorControls(),Yn.forEach(function(ga){x().includes(Kt,ga.controlId)&&(Cn[On.rowid+"-"+ga.controlId]=ga.errorMessage)}),ba.forEach(function(ga){Cn[On.rowid+"-"+ga.controlId]=typeof w.MP[ga.errorType]=="string"?w.MP[ga.errorType]:w.MP[ga.errorType](x().find(kn,function(Ua){return Ua.controlId===ga.controlId}))});case 10:case"end":return La.stop()}},wn,Ht)}));return function(wn){return gn.apply(this,arguments)}}());var Rn=Ot.filter(function(gn){return x().find(Kt,function(wn){return wn===gn.controlId})&&(gn.unique||gn.uniqueInRecord)});return Rn.forEach(function(gn){var wn=ht.filter(function(Yn){return typeof Yn[gn.controlId]<"u"&&!Yn[gn.controlId].startsWith("deleteRowIds")&&!be(Yn[gn.controlId])}),On=x().uniqBy(wn,function(Yn){return Me(gn,Yn[gn.controlId])});if(wn.length!==On.length){var An=wn.filter(function(Yn){return!x().find(On,function(kn){return kn.rowid===Yn.rowid})});An.forEach(function(Yn){var kn=wn.filter(function(Fn){return Me(gn,Fn[gn.controlId])===Me(gn,Yn[gn.controlId])});kn.length>1&&kn.forEach(function(Fn){Cn[Fn.rowid+"-"+gn.controlId]=w.MP.UNIQUE(gn,!0)})})}}),Cn}catch(gn){throw alert(_l("\u5931\u8D25"),3),console.log(gn),gn}}var Be=function(){var ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Dt=arguments[1];return ht.filter(function(Ot){return Ot.type===34&&(0,N.kM)(Ot,Dt).visible&&(0,N.kM)(Ot,Dt).editable})};function we(tt){var ht=tt.type,Dt=tt.sourceControlType,Ot=tt.enumDefault,Ht=tt.enumDefault2;return ht===6||ht===8||ht===31||ht===37&&we({type:Ht})||ht===30&&we({type:Dt,enumDefault:Ot})||ht===38&&(Ot===1||Ot===3)}function Ie(tt){var ht=tt.type,Dt=tt.enumDefault,Ot=tt.advancedSetting,Ht=Ot===void 0?{}:Ot,Kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},dn=Kt.ignoreInFormTable,Cn=dn===void 0?!1:dn;return ht===29&&Dt===2&&x().includes(Cn?[String(h.wn.LIST),String(h.wn.TAB_TABLE)]:[String(h.wn.LIST),String(h.wn.TABLE),String(h.wn.TAB_TABLE)],Ht.showtype)||ht===51&&Ht.showtype===String(h.zn.LIST)}function ge(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"111",ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return tt.substring(0,ht)+Dt+tt.substring(ht+1)}function Re(tt){try{var ht=JSON.parse(tt);if(Array.isArray(ht)){var Dt=head(ht);return(typeof Dt>"u"?"undefined":_typeof(Dt))==="object"?Dt.sid:Dt}return ht||"-1"}catch(Ot){return"-1"}}function Pe(tt,ht,Dt){var Ot=safeParse(ht),Ht=void 0;if(Ot.length>1){var Kt=safeParse(Dt);Ht=Ot.map(function(dn,Cn){return{index:tt.options.length+Cn+1,isDeleted:!1,key:Kt[Cn],color:"#2196f3",value:dn&&(dn.match(/add_(.*)/)||"")[1]}}).filter(function(dn){return dn.value})}else Ht={index:tt.options.length+1,isDeleted:!1,key:x().last(JSON.parse(Dt)),color:"#2196f3",value:ht&&(ht.match(/"add_(.*)"]/)||"")[1]};return(0,d.default)({},tt,{options:tt.options.concat(Ht)})}function ke(tt,ht){var Dt=[];try{Dt=x().filter(tt,function(Ot){return x().includes([10,11],Ot.type)&&/"add_/.test(Ot.value)}).map(function(Ot){return Pe(Ot,Ot.value,ht[Ot.controlId])})}catch(Ot){}return Dt}function We(tt,ht){if(be(ht))return ht;switch(tt.type){case z.DN.TEXT:case z.DN.MOBILE_PHONE:case z.DN.TELEPHONE:case z.DN.EMAIL:case z.DN.NUMBER:case z.DN.CRED:case z.DN.MONEY:case z.DN.FLAT_MENU:case z.DN.MULTI_SELECT:case z.DN.DROP_DOWN:case z.DN.DATE:case z.DN.DATE_TIME:case z.DN.RELATION:case z.DN.MONEY_CN:case z.DN.USER_PICKER:case z.DN.DEPARTMENT:case z.DN.SCORE:case z.DN.FORMULA_NUMBER:case z.DN.RELATE_SHEET:case z.DN.SWITCH:case z.DN.RICH_TEXT:case z.DN.CASCADER:case z.DN.LOCATION:case z.DN.ATTACHMENT:case z.DN.AREA_PROVINCE:case z.DN.AREA_CITY:case z.DN.AREA_COUNTY:case z.DN.SHEET_FIELD:case z.DN.ORG_ROLE:case z.DN.TIME:case z.DN.CONCATENATE:case z.DN.SIGNATURE:return ht;default:return}}function Ve(tt,ht){var Dt={};return tt.forEach(function(Ot){Dt[Ot.controlId]=We(Ot,ht[Ot.controlId])}),Dt}function it(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ot=Dt.updateControlIds,Ht={};return tt.filter(function(Kt){return(Ot?x().includes(Ot,Kt.controlId):!be(Kt.value))&&Kt.controlId.length===24}).forEach(function(Kt){if(Kt.type===z.DN.SUB_LIST)Kt.value&&Kt.value.rows&&rt(Kt.value.rows).length&&(Ht[Kt.controlId]=rt(Kt.value.rows).map(function(dn){var Cn=x().pickBy(dn,function(gn){return!be(gn)}),Rn=x().keys(x().pickBy(dn,function(gn){return typeof gn=="string"&&gn.indexOf("sourcevalue")>-1}));return Rn.forEach(function(gn){try{var wn=JSON.parse([Cn[gn]]);Cn[gn]=U()(wn.map(function(On){return(0,d.default)({},On,{sourcevalue:U()(x().pickBy(JSON.parse(On.sourcevalue),function(An){return!be(An)&&(typeof An!="string"||An.indexOf("sourcevalue")<0)}))})}))}catch(On){delete Cn[gn]}}),Cn}));else if(Kt.type===z.DN.RELATE_SHEET)try{Ht[Kt.controlId]=U()(JSON.parse(Kt.value).map(function(dn){return{type:dn.type,sid:dn.sid,name:(0,N.Nx)(Kt,dn.name?dn:dn.row||safeParse(dn.sourcevalue))}}))}catch(dn){}else Kt.type!==z.DN.SUB_LIST&&x().includes(["string","number"],(0,a.default)(Kt.value))&&(Ht[Kt.controlId]=Kt.value)}),V()(ht).forEach(function(Kt){var dn=ht[Kt];dn&&(Ht[dn.controlId]=dn.value)}),Ht}function Ge(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ht=arguments[1],Dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ot=[],Ht={};try{Ot=ht.map(function(Kt){if(Kt.type===z.DN.SUB_LIST&&tt[Kt.controlId])return(0,d.default)({},Kt,{value:{isAdd:!0,rows:tt[Kt.controlId],action:"clearAndSet"}});if(Kt.sourceControlId===Dt.relateSheetControlId)try{return(0,d.default)({},Kt,{value:U()([Dt.value])})}catch(dn){return(0,d.default)({},Kt,{value:tt[Kt.controlId]})}else return(0,d.default)({},Kt,{value:tt[Kt.controlId]})}),ht.forEach(function(Kt){Kt.type===z.DN.RELATE_SHEET&&Kt.enumDefault===2&&tt[Kt.controlId]&&(Ht[Kt.controlId]=(0,d.default)({},Kt,{value:tt[Kt.controlId]}))})}catch(Kt){}return{formdata:Ot,relateRecordData:Ht}}var pt=x().debounce(zt,1e3);function ot(tt,ht,Dt){var Ot=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;if(window.isWxWork)return pt(""+md.global.Account.accountId+ht+"-"+tt,Dt),pt;var Ht=[];if(localStorage.getItem(tt))try{Ht=JSON.parse(localStorage.getItem(tt))||[],Ht=Ht.filter(function(Kt){return Kt!==ht})}catch(Kt){}Ht.push(ht),Ht.length>Ot&&(localStorage.removeItem(tt+"_"+Ht[0],Dt),Ht=Ht.slice(1));try{safeLocalStorageSetItem(tt,U()(Ht)),safeLocalStorageSetItem(tt+"_"+ht,Dt)}catch(Kt){V()(localStorage).filter(function(dn){return dn.startsWith(tt)}).forEach(function(dn){return localStorage.removeItem(dn)}),safeLocalStorageSetItem(tt,U()(Ht)),safeLocalStorageSetItem(tt+"_"+ht,Dt)}}function vt(tt,ht){if(window.isWxWork){Nt(""+md.global.Account.accountId+ht+"-"+tt);return}var Dt=[];if(localStorage.getItem(tt))try{Dt=JSON.parse(localStorage.getItem(tt))||[],Dt=Dt.filter(function(Ot){return Ot!==ht})}catch(Ot){}Dt&&Dt.length?safeLocalStorageSetItem(tt,U()(Dt)):localStorage.removeItem(tt),localStorage.removeItem(tt+"_"+ht)}function At(tt){return/^\w{24}$/.test(tt)}function yt(tt){var ht=tt.from,Dt=tt.rules,Ot=tt.controls,Ht=tt.control,Kt=tt.row,dn=[],Cn=(0,F.Mb)({from:ht,rules:Dt,recordId:Kt.rowid,data:Ot.map(function(Rn){return(0,d.default)({},Rn,{value:Kt[Rn.controlId]})}),updateControlIds:Ht?[Ht.controlId]:[],checkAllUpdate:!Ht,checkRuleValidator:function(gn,wn,On){On&&dn.push({controlId:gn,errorType:wn,errorMessage:On})}});return{formData:Cn,errors:dn}}function st(tt){var ht=tt.from,Dt=tt.rules,Ot=tt.controls,Ht=tt.control,Kt=tt.row,dn=yt({from:ht,rules:Dt,controls:Ot,control:Ht,row:Kt}).errors;return x().find(dn,function(Cn){return Cn.controlId===Ht.controlId})}function St(tt){tt=typeof tt=="number"?{typeof:tt}:tt;var ht=tt,Dt=ht.type;return Dt===WIDGETS_TO_API_TYPE_ENUM.RELATE_SHEET||Dt===WIDGETS_TO_API_TYPE_ENUM.USER_PICKER||Dt===WIDGETS_TO_API_TYPE_ENUM.DEPARTMENT?"array":Dt===WIDGETS_TO_API_TYPE_ENUM.NUMBER?"number":"string"}function Qe(tt){switch(tt.sourceControlType||tt.type){case WIDGETS_TO_API_TYPE_ENUM.TEXT:return"1";case WIDGETS_TO_API_TYPE_ENUM.NUMBER:case WIDGETS_TO_API_TYPE_ENUM.MONEY:return 1;case WIDGETS_TO_API_TYPE_ENUM.EMAIL:return"a#b.com".replace("#","@");case WIDGETS_TO_API_TYPE_ENUM.MOBILE_PHONE:return"+8618799999999";case WIDGETS_TO_API_TYPE_ENUM.DATE:return moment().format("YYYY-MM-DD");case WIDGETS_TO_API_TYPE_ENUM.DATE_TIME:return moment().format("YYYY-MM-DD HH:mm");case WIDGETS_TO_API_TYPE_ENUM.FLAT_MENU:case WIDGETS_TO_API_TYPE_ENUM.MULTI_SELECT:case WIDGETS_TO_API_TYPE_ENUM.USER_PICKER:case WIDGETS_TO_API_TYPE_ENUM.DEPARTMENT:case WIDGETS_TO_API_TYPE_ENUM.RELATE_SHEET:return"[]";case WIDGETS_TO_API_TYPE_ENUM.AREA_PROVINCE:case WIDGETS_TO_API_TYPE_ENUM.AREA_CITY:return'{name: "china"}';case WIDGETS_TO_API_TYPE_ENUM.SUB_LIST:case WIDGETS_TO_API_TYPE_ENUM.SWITCH:return 1;default:return"1"}}function Xe(tt){return new vm.Script(tt).runInNewContext()}var $e=`onmessage = function (e) {
  try {
  const result = new Function(e.data)();
  if (typeof result === 'object' && typeof result.then === 'function') {
      postMessage('promise begin');
      Promise.all([result]).then(function ([value]) {
        postMessage('promise value ' + value);
        postMessage({
          type: 'over',
          value,
        });
      });
    } else {
      postMessage({
        type: 'over',
        value: new Function(e.data)(),
      });
    }
  } catch (err) {
    postMessage({
      type: 'error',
      err,
    });
  }
};
`;function Ke(){return new Worker("data:application/javascript,"+encodeURIComponent($e))}var Ue=function(){function tt(){var ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Dt=ht.max,Ot=Dt===void 0?10:Dt;(0,R.default)(this,tt),this.max=Ot,this.runningCount=0,this.queue=[],this.workers=[],this.list=[],this.isRunning=!1}return(0,y.default)(tt,[{key:"getWorker",value:function(){var Dt=this.workers.filter(function(Ht){return Ht.idle})[0];if(Dt)return Dt;if(this.workers.length<this.max){var Ot={worker:Ke(),idle:!1,id:Math.random()};return this.workers.push(Ot),Ot}}},{key:"run",value:function(){var Dt=this,Ot=this.getWorker();if(Ot){var Ht=this.list.shift();if(!Ht){this.isRunning=!1;return}var Kt=Ht.code,dn=Ht.cb,Cn=Ht.timeout;Ot.idle=!1,this.isRunning=!0,this.runningCount++;var Rn=function(){Ot.idle=!0,Dt.runningCount--,Dt.run()},gn=void 0;Ot.worker.onmessage=function(wn){wn.data.type==="begin"&&(gn=setTimeout(function(){Ot.worker.terminate(),Dt.workers=Dt.workers.filter(function(On){return On.id!==Ot.id}),Rn(),dn(Cn+"ms time out")},Cn)),wn.data.type==="over"&&(Rn(),dn(null,wn.data.value),clearTimeout(gn)),wn.data.type==="error"&&(console.error(wn.err),Rn(),dn(wn.err),clearTimeout(gn))},Ot.worker.postMessage(Kt)}}},{key:"push",value:function(Dt){var Ot=Dt.code,Ht=Dt.cb,Kt=Dt.timeout;this.list.push({code:Ot,cb:Ht,timeout:Kt}),this.runningCount<this.max&&this.run()}}]),tt}(),He=new Ue;function ze(tt,ht){var Dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ot=Dt.timeout,Ht=Ot===void 0?1e3:Ot;He.push({code:tt,cb:ht,timeout:Ht})}function gt(tt){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"mdfunction";try{return tt=tt.replace(/\$(.+?)\$/g,'"1"'),ht==="mdfunction"?(tt=tt.replace(/[\r\r\n ]/g,""),tt=tt.replace(/([A-Z]+)(?=\()/g,"test"),Xe("function test() {return '-';}"+tt)):ht==="javascript"&&Xe("function test() {"+tt+" }"),!0}catch(Dt){return!1}}function Et(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{allowadd:tt.allowadd==="1",allowcancel:tt.allowcancel==="1",allowedit:tt.allowedit==="1",allowsingle:tt.allowsingle==="1",batchcids:safeParseArray(tt.batchcids),hidenumber:tt.hidenumber==="1",rowheight:Number(tt.rowheight||0),blankrow:Number(tt.blankrow||1),enablelimit:tt.enablelimit==="1",min:tt.enablelimit==="1"?Number(tt.min||0):void 0,max:tt.enablelimit==="1"?Number(tt.max||1e3):void 0,rownum:Number(tt.rownum||15),showtype:tt.showtype||"1",uniqueControlIds:safeParse(tt.uniquecontrols,"arrray")}}function ft(tt){var ht=h.nh.map(function(Dt){return Dt.controlId});return x().some(tt.map(function(Dt){return x().includes(ht,Dt.controlId)}))||(tt=tt.concat(h.nh)),tt}function qe(tt){var ht=tt.appId,Dt=tt.worksheetId,Ot=tt.viewId;return md.global.Config.WebUrl+"app/"+ht+"/newrecord/"+Dt+"/"+Ot+"/"}function nt(tt,ht,Dt){var Ot=Ae(ht);if(x().isUndefined(Dt))return x().sortBy(tt,"addTime");var Ht=x().sortBy(tt,function(Kt){return Ot==="NUMBER"?parseFloat(Kt[ht.controlId]):(0,X.Z)((0,d.default)({},ht,{value:Kt[ht.controlId]}))});return Dt||(Ht=Ht.reverse()),Ht}function Ze(tt){return`1234567890-=!@#$%^&*()_+[];',./{}|:"<>?ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz`.indexOf(tt)>-1}function et(tt){var ht=void 0;try{x().includes([z.DN.SIGNATURE,z.DN.SUB_LIST],tt.type)?ht=tt.value:tt.type===z.DN.ATTACHMENT?ht=safeParse(tt.value).map(function(Dt){return""+Dt.originalFilename+Dt.ext+"("+Dt.previewUrl+")"}).join(","):tt.type===z.DN.RELATION?ht=safeParse(tt.value).map(function(Dt){return"["+{1:_l("\u4EFB\u52A1"),2:_l("\u9879\u76EE"),3:_l("\u65E5\u7A0B"),4:_l("\u6587\u4EF6"),5:_l("\u7533\u8BF7\u5355"),6:"",7:_l("\u65E5\u7A0B")}[Dt.type]+"]"+Dt.name+"("+Dt.link+")"}).join(","):x().includes([z.DN.SCORE],tt.type)?ht=tt.value:ht=(0,X.Z)(tt)}catch(Dt){}return ht}function ut(tt,ht){var Dt=et(tt);window.tempCopyForSheetView=U()({type:"text",value:Dt,controlType:tt.type,tableId:ht}),c()(Dt)}function xt(tt,ht){return x().includes([15,16],tt)&&x().includes([15,16],ht)?!0:tt===ht}function wt(tt,ht){var Dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};x().includes([z.DN.MOBILE_PHONE,z.DN.NUMBER,z.DN.FLAT_MENU,z.DN.MULTI_SELECT,z.DN.DROP_DOWN,z.DN.DATE,z.DN.DATE_TIME,z.DN.USER_PICKER,z.DN.DEPARTMENT,z.DN.SCORE,z.DN.RELATE_SHEET,z.DN.CASCADER,z.DN.SWITCH,z.DN.RICH_TEXT,z.DN.TIME,z.DN.ORG_ROLE,z.DN.LOCATION],tt.type)?Dt(ht.value):x().includes([z.DN.AREA_PROVINCE,z.DN.AREA_CITY,z.DN.AREA_COUNTY],tt.type)&&Dt(safeParse(ht.value).code)}function kt(){var tt=void 0,ht=document.createElement("div");return ht.style="position: absolute; left: -10000px; top: -10000px; width: 100px; height: 100px; overflow: scroll;",ht.innerHTML='<div style="width: 100px;height:200px"></div>',document.body.appendChild(ht),tt=ht.offsetWidth-ht.clientWidth,document.body.removeChild(ht),tt||10}function Rt(tt){return tt==21?21:tt===h.GP.CHAT||tt===h.GP.WORKSHEET_ROW_LAND&&location.search&&location.search.indexOf("share")>-1||x().get(window,"shareState.isPublicView")||x().get(window,"shareState.isPublicPage")||x().get(window,"shareState.isPublicWorkflowRecord")||x().get(window,"shareState.isPublicRecord")||x().get(window,"shareState.isPublicPrint")?3:1}function jt(tt){for(var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Dt=null,Ot=0;Ot<ht.length;Ot++){var Ht=ht[Ot];if(Ht.workSheetId==tt){Dt=Ht;break}if(Ht.type===2&&(Dt=jt(tt,Ht.items),Dt))break}return Dt}function fn(){for(var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Dt=null,Ot=0;Ot<tt.length;Ot++){var Ht=tt[Ot];if(Ht.type===2){if(Dt=fn(Ht.items,ht),Dt)break}else if(ht||[1,4].includes(Ht.status)&&!Ht.navigateHide){Dt=Ht.workSheetId;break}}return Dt}function Mt(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return tt.map(function(ht){return x().pick(ht,["controlId","dataType","spliceType","filterType","dateRange","value","values","minValue","maxValue"])})}function sn(tt,ht){var Dt=0;try{var Ot=void 0,Ht=safeParse(tt,"array");x().isUndefined(x().get(Ht,"0.count"))?x().isUndefined(ht)?Ot=Ht[0].count||Ht.length:Ot=ht:Ot=Ht[0].count,!x().isUndefined(Ot)&&!x().isNaN(Number(Ot))&&(Dt=Number(Ot))}catch(Kt){}return String(tt).startsWith("deleteRowIds")?0:Dt}var on=function(){var tt=(0,Z.Z)(o().mark(function ht(Dt){var Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ht=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Kt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},dn;return o().wrap(function(Rn){for(;;)switch(Rn.prev=Rn.next){case 0:return Rn.next=2,(x().get(window,"shareState.isPublicForm")?le.Z:ie.Z).getToken(Ot);case 2:if(dn=Rn.sent,dn){Rn.next=5;break}return Rn.abrupt("return",te().reject("\u83B7\u53D6token\u5931\u8D25"));case 5:return Rn.abrupt("return",q.Z.post(Dt,p()({},Ht,{token:dn,accountId:x().get(window,"shareState.isPublicForm")?"user-publicform":md.global.Account.accountId}),Kt));case 6:case"end":return Rn.stop()}},ht,this)}));return function(Dt){return tt.apply(this,arguments)}}(),en=function(){var tt=(0,Z.Z)(o().mark(function ht(Dt){var Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ht=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Kt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},dn;return o().wrap(function(Rn){for(;;)switch(Rn.prev=Rn.next){case 0:return Rn.next=2,(x().get(window,"shareState.isPublicForm")?le.Z:ie.Z).getToken(Ot);case 2:if(dn=Rn.sent,dn){Rn.next=5;break}return Rn.abrupt("return",te().reject("\u83B7\u53D6token\u5931\u8D25"));case 5:return Rn.abrupt("return",q.Z.get(Dt,(0,d.default)({},Kt,{params:(0,d.default)({},Ht,{token:dn,accountId:x().get(window,"shareState.isPublicForm")?"user-publicform":md.global.Account.accountId})})));case 6:case"end":return Rn.stop()}},ht,this)}));return function(Dt){return tt.apply(this,arguments)}}();function $t(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",ht=arguments[1];ht=ht||tt.name||"file";function Dt(Ot){var Ht=document.createElement("a");Ht.href=Ot,Ht.download=ht,Ht.click()}Dt(typeof tt=="string"?tt:URL.createObjectURL(tt))}var an=function(ht,Dt){var Ot=JSON.parse(localStorage.getItem("mdAppCache_"+md.global.Account.accountId+"_"+ht))||{},Ht=Ot.worksheets.map(function(Kt){return Kt.groupId===Dt&&(Kt.worksheetId=""),Kt});Ot.worksheets=Ht,Ot.lastWorksheetId="",safeLocalStorageSetItem("mdAppCache_"+md.global.Account.accountId+"_"+ht,U()(Ot))};function tn(tt){var ht=tt.controlId,Dt=tt.controls,Ot=tt.colorItems,Ht=tt.row,Kt=x().find(Dt,{controlId:ht});if(!(!Kt||Kt.enumDefault2!==1)&&Ht[Kt.controlId]){var dn=safeParse(Ht[Kt.controlId])[0];dn&&typeof dn=="string"&&dn.startsWith("other")&&(dn="other");var Cn=Kt.options.find(function(gn){return gn.key===dn&&(Ot===""||x().includes(Ot,gn.key))}),Rn=Cn&&Cn.color&&(0,k.generate)(Cn.color)[0];return Cn&&Cn.color&&{color:Cn.color,lightColor:(0,b.eO)(Cn.color)?Rn:(0,re.default)(Rn).setAlpha(.8).toRgbString()}}}function mt(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ht=x().get(tt,"advancedSetting.colorid"),Dt=x().get(tt,"advancedSetting.coloritems")?safeParse(x().get(tt,"advancedSetting.coloritems"),"array"):"",Ot=x().get(tt,"advancedSetting.colortype");return ht&&{controlId:ht,colorItems:Dt,showLine:x().includes([h.v4.LINE,h.v4.LINE_BG],Ot),showBg:x().includes([h.v4.BG,h.v4.LINE_BG],Ot)}}function Lt(tt){var ht=tt.rows,Dt=tt.keywords,Ot=Dt===void 0?"":Dt,Ht=tt.controls;return Ot?ht.filter(function(Kt){return Ht.filter(function(dn){return dn.controlId.length===24}).map(function(dn){return(0,X.Z)((0,d.default)({},dn,{value:Kt[dn.controlId]||""}))}).join("").toLocaleLowerCase().indexOf(Ot.toLocaleLowerCase())>-1}):ht}function zt(tt,ht){var Dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ot=Dt.needEncode,Ht=Ot===void 0?!0:Ot,Kt=Dt.expireTime,dn=tt,Cn=ht;return Ht&&(dn=Q.Base64.encode(tt),Cn=Q.Base64.encode(ht)),E.Z.add({key:dn,value:Cn,expireTime:Kt||j()(new Date(Date.now()+3*24*60*60*1e3)).format("YYYY-MM-DD HH:mm:ss")})}function Zt(tt){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Dt=ht.needEncode,Ot=Dt===void 0?!0:Dt,Ht=tt;return Ot&&(Ht=Q.Base64.encode(tt)),E.Z.get({key:Ht}).then(function(Kt){return Kt?Q.Base64.decode(Kt):""})}function Nt(tt){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Dt=ht.needEncode,Ot=Dt===void 0?!0:Dt,Ht=tt;return Ot&&(Ht=Q.Base64.encode(tt)),E.Z.clear({key:Ht},{silent:!0})}var ct=function(ht){var Dt=(0,b.A_)(),Ot=x().isObject(ht.requestParams)?(0,d.default)({},ht.requestParams):{};return x().isEmpty(Dt)?ht:(V()(Dt).forEach(function(Ht){x().isArray(Dt[Ht])?Ot[Ht.trim()]=Dt[Ht][Dt[Ht].length-1]:Dt[Ht]!==null&&(Ot[Ht.trim()]=Dt[Ht])}),(0,d.default)({},ht,{requestParams:Ot}))},De=function(ht){var Dt=ht,Ot="#fff";return ht==="transparent"&&(Ot="#333",Dt="#ccc"),{backgroundColor:ht||"#2196f3",borderColor:Dt,color:Ot}},_e=function(ht){var Dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ht){var Ot=Dt[ht];Ot&&/^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/i.test(Ot.replace(/\? /,""))&&window.open(Ot)}},Le=function(ht,Dt){var Ot=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},Ht=x().get(ht,"advancedSetting.clicktype")||h.lL.OPEN_RECORD;if(Ht===h.lL.OPEN_RECORD)Ot();else if(Ht===h.lL.OPEN_LINK){var Kt=x().get(ht,"advancedSetting.clickcid");_e(Kt,Dt)}};function rt(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];try{return tt.filter(function(ht){return!(ht.rowid||"").startsWith("empty")})}catch(ht){return console.error(ht),[]}}function Ct(tt,ht){alert(tt===11?_l("\u7F16\u8F91\u5931\u8D25\uFF0C%0\u4E0D\u5141\u8BB8\u91CD\u590D",ht?ht.controlName:""):tt===31?_l("\u8BB0\u5F55\u63D0\u4EA4\u5931\u8D25\uFF1A\u6709\u5FC5\u586B\u5B57\u6BB5\u672A\u586B\u5199"):tt===22?_l("\u8BB0\u5F55\u63D0\u4EA4\u5931\u8D25\uFF1A\u5B50\u8868\u5B57\u6BB5\u5B58\u5728\u91CD\u590D\u6570\u636E"):_l("\u7F16\u8F91\u5931\u8D25\uFF01"),2)}function dt(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ht=tt.control,Dt=tt.badData,Ot=Dt===void 0?[]:Dt;if(Ot[0]){var Ht=Ot[0].split(":"),Kt=(0,ce.Z)(Ht,3),dn=Kt[0],Cn=Kt[1],Rn=Kt[2],gn=ht.store.getState().rows,wn=rt(gn).filter(function(On){return Rn.indexOf("-")>-1?(On[Cn]||"").indexOf(Rn)>-1:(On[Cn]||"")===Rn}).map(function(On){return On.rowid});return wn.length?{controlId:dn,error:wn.map(function(On){return(0,C.default)({},On+"-"+Cn,w.MP.UNIQUE())}).reduce(function(On,An){return(0,d.default)({},On,An)})}:{}}}var It=function(ht){var Dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return window["langData-"+ht]?Dt.map(function(Ot){var Ht=(0,b.T3)(ht,Ot.controlId),Kt=(0,d.default)({},Ot,{controlName:Ht.name||Ot.controlName,hint:Ht.hintText||Ot.hint});return Ot.type===10010?Kt.dataSource=Ht.remark||Ot.dataSource:Kt.desc=Ht.description||Ot.desc,Kt}):Dt},bt=function(ht){var Dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return window["langData-"+ht]?Dt.map(function(Ot){var Ht=(0,b.T3)(ht,Ot.btnId);return(0,d.default)({},Ot,{name:Ht.name||Ot.name,desc:Ht.description||Ot.desc})}):Dt};function Ut(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}function Xt(tt){return tt.filter(function(ht){return x().includes(m.wP,ht.type===30?ht.sourceControlType:ht.type)}).map(function(ht){return{controlId:ht.controlId,valueStyle:(0,N.kn)((0,d.default)({},ht,{value:" "})).valueStyle}}).filter(function(ht){return ht.valueStyle}).map(function(ht){return`
    .control-val-`+ht.controlId+` {
      > span:not(.editIcon), > a, .worksheetCellPureString, .titleText, &.titleText {
        `+ht.valueStyle+`
      }
    }
  `})}function pn(tt){return String(tt.viewType)===h.B.structure&&x().includes([0,1],Number(tt.childType))||String(tt.viewType)===h.B.gunter}},5913:(lt,Te,t)=>{"use strict";t.d(Te,{O$:()=>le,PH:()=>V,Pm:()=>O,QV:()=>re,S7:()=>c,cA:()=>ie,dm:()=>E,fE:()=>b,jY:()=>k,n5:()=>C,oF:()=>w,wg:()=>ee});var ce=t(88239),g=t(42723);if(!/^(1887|7596|7798)$/.test(t.j))var p=t(83298);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(15577);var te=t(30381),R=t.n(te);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(24607);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(1694);var r=t(96486),o=t.n(r);if(!/^(1887|7596|7798)$/.test(t.j))var d=t(31742);if(!/^(1887|7596|7798)$/.test(t.j))var Z=t(76345);if(!/^(1887|7596|7798)$/.test(t.j))var H=t(86674);if(!/^(1887|7596|7798)$/.test(t.j))var U=t(89499);var f="#C9E6FC",V={0:"eventAll",1:"eventScheduled",2:"eventNoScheduled"},C=function(N){return a.aJ[a.sI.indexOf(N.toUpperCase())]},O=function(N){for(var F=0;F<N.length;F++){var h=N.charCodeAt(F);if(55296<=h&&h<=56319){if(N.length>1){var z=N.charCodeAt(F+1),X=(h-55296)*1024+(z-56320)+65536;if(118784<=X&&X<=128895)return!0}}else if(N.length>1){var z=N.charCodeAt(F+1);if(z==8419)return!0}else{if(8448<=h&&h<=10239)return!0;if(11013<=h&&h<=11015)return!0;if(10548<=h&&h<=10549)return!0;if(12951<=h&&h<=12953)return!0;if(h==169||h==174||h==12349||h==12336||h==11093||h==11036||h==11035||h==11088)return!0}}},n=function(N,F){return N[F.begin]&&N[F.end]&&A(N,F)&&R()(N[F.begin]).isBefore(N[F.end])},s=function(N,F){return N[F.begin]?R()(N[F.begin]).format(F.startFormat):""},j=function(N,F){return!N[F.end]||R()(N[F.begin]).isAfter(N[F.end])?"":R()(n(N,F)?R()(N[F.end]).add(1,"day"):R()(N[F.end])).format(F.endFormat)},A=function(N,F){return R()(N[F.end]).format("YYYYMMDD")-R()(N[F.begin]).format("YYYYMMDD")>=1||R()(N[F.end]).diff(R()(N[F.begin]),"minutes")>=1439},S=function(N){return N.find(function(F){return F.attribute===1})||[]},I=function(N,F,h,z){var X=N.colorOptions,B=X===void 0?[]:X,x=(0,L.aq)(h),Q=x.colorid,i=Q===void 0?"":Q,m=F[i]?JSON.parse(F[i])[0]:"";return m&&(B.find(function(v){return(m&&m.startsWith("other")?"other":m)===v.key})||[]).color||f},c=function(N){var F=N.worksheetControls,h=F===void 0?[]:F,z=N.currentView,X=z===void 0?{}:z,B=N.calendarData,x=B===void 0?{}:B,Q=N.byRowId,i=(0,g.Z)(N,["worksheetControls","currentView","calendarData","byRowId"]);if(Q)return q(N);var m=x.hiddenDays,v=m===void 0?[]:m,W=x.colorOptions,P=W===void 0?[]:W,u=x.btnList,l=x.initialView,T=x.calendarInfo,G=T===void 0?[]:T,D=S(h),M=I(x,i,X,h),se=(0,U._l)(X),ae=se&&(0,U.j8)({controlId:se.controlId,colorItems:se.colorItems,controls:h,row:i});ae&&(ae=(0,ce.default)({},se,ae));var ne=[];return G.map(function(de){var Ce=(0,y.kM)(de.startData).editable;if(i[de.begin]){var he=s(i,de),fe=n(i,de),Ee=j(i,de);ne.push((0,ce.default)({},de,{info:de,keyIds:i.rowid+"-"+de.begin,extendedProps:(0,ce.default)({},i,{editable:Ce,recordColor:ae,stringColor:M}),title:(0,p.Z)((0,ce.default)({},D,{value:i[D.controlId]}))||_l("\u672A\u547D\u540D"),start:he,end:Ee,allDay:!!fe,editable:Ce,timeList:[{info:de,start:he,end:Ee,editable:Ce,allDay:!!fe}],backgroundColor:M,borderColor:M,textColor:M&&(0,L.eO)(M)?"#333":"#fff"}))}}),ne},q=function(N){var F=N.worksheetControls,h=F===void 0?[]:F,z=N.currentView,X=z===void 0?{}:z,B=N.calendarData,x=B===void 0?{}:B,Q=(0,g.Z)(N,["worksheetControls","currentView","calendarData"]),i=x.colorOptions,m=i===void 0?[]:i,v=x.calendarInfo,W=v===void 0?[]:v,P=S(h),u=I(x,Q,X,h),l=(0,U._l)(X),T=l&&(0,U.j8)({controlId:l.controlId,colorItems:l.colorItems,controls:h,row:Q});T&&(T=(0,ce.default)({},l,T));var G=[];return W.map(function(D){var M=s(Q,D),se=n(Q,D),ae=j(Q,D);G.push({info:D,start:M,end:ae,allDay:!!se,editable:(0,y.kM)(D.startData).editable})}),[{extendedProps:(0,ce.default)({},Q,{stringColor:u,recordColor:T}),title:(0,p.Z)((0,ce.default)({},P,{value:Q[P.controlId]}))||_l("\u672A\u547D\u540D"),timeList:G,backgroundColor:u,borderColor:u,textColor:u&&(0,L.eO)(u)?"#333":"#fff"}]},b=function(N,F){var h=["1","2"].includes(N)?N==="1"?k(F)?"timeGridWeek":"dayGridWeek":k(F)?"timeGridDay":"dayGridDay":"dayGridMonth";return h},k=function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return N.type===16||N.type===38&&N.enumDefault===2&&N.unit!=="3"},ee=function(N){return N.filter(function(F){return F.controlId!=="utime"&&(o().includes([15,16],F.type)||F.type===38&&F.enumDefault===2)})},re=function(){var N=[];try{N=JSON.parse(window.localStorage.getItem("CalendarShowExternal"))||[]}catch(F){N=[]}return o().isArray(N)||(N=[]),N},ie=function(){if(["timeGridWeek","timeGridDay","dayGridMonth","dayGridWeek","dayGridDay"].includes(window.localStorage.getItem("CalendarViewType")))return{};var N={};try{N=JSON.parse(window.localStorage.getItem("CalendarViewType"))||{}}catch(F){N={}}return N},le=function(N){return["5","4"].includes(o().get(N,["advancedSetting","showtype"]))},E=function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],F=!1;return N.map(function(h){[h.endData,h.startData].map(function(z){le(z)&&(F=!0)})}),F},w=function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"controlId";return N.filter(function(z){return(0,d.v)(Z.RX.sysControlSwitch,F)?!0:!H.Vh.includes(z[h])})}},60368:(lt,Te,t)=>{"use strict";t.d(Te,{v:()=>ce,z:()=>g});var ce={day:0,week:1,month:2,quarter:3,year:4},g=[{name:_l("\u65E5"),value:ce.day,periodCount:50,minDayWidth:30,defaultMinDayWidth:30},{name:_l("\u5468%05034"),value:ce.week,periodCount:20,minDayWidth:22,defaultMinDayWidth:22},{name:_l("\u6708%05035"),value:ce.month,periodCount:20,minDayWidth:8,defaultMinDayWidth:8},{name:_l("\u5B63\u5EA6"),value:ce.quarter,periodCount:20,minDayWidth:2.4,defaultMinDayWidth:2.4},{name:_l("\u5E74"),value:ce.year,periodCount:20,minDayWidth:.9,defaultMinDayWidth:.9}]},96849:(lt,Te,t)=>{"use strict";t.d(Te,{AE:()=>K,B3:()=>k,B7:()=>f,Gp:()=>ee,I9:()=>ie,KS:()=>O,PA:()=>le,V4:()=>j,WO:()=>E,YW:()=>Z,Yi:()=>s,b0:()=>re,gw:()=>V,hN:()=>w,iu:()=>b,tO:()=>c,ug:()=>I,wH:()=>n});var ce=t(12424),g=t(88239),p=t(85315),L=t(52945),te=t.n(L);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(60368);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(15577);var a=t(96486),r=t.n(a),o=t(30381),d=t.n(o),Z=function(F,h){var z=F||R.v.day,X=r().find(R.z,{value:z}),B=X.minDayWidth,x=X.defaultMinDayWidth,Q=H(z,B,h);return te()(h,{periodCount:Q,minDayWidth:B,periodType:z})},H=function(F,h,z){var X=z.onlyWorkDay,B=z.dayOff,x=B===void 0?[]:B,Q=30,i=Q-x.length*4,m=(0,y.Q9)()?screen.width*2:screen.width,v=0;if(F===R.v.day&&(v=30),F===R.v.week){var W=7,P=X?W-x.length:W;v=P*h}if(F===R.v.month&&(v=X?i*h:Q*h),F===R.v.quarter&&(v=X?i*3*h:Q*3*h),F===R.v.year){v=X?i*6*h:Q*6*h;var u=parseInt(m/v),l=u%4;return l===0?u:u+(4-l)}var T=parseInt(m/v);return T%2===0?T:T+1},U=function(F,h,z){for(var X=[],B=Math.abs(F),x=F>=0?0:-1;X.length!==B;){var Q=d()(h).add(x,"d"),i=Q.day();F>=0?x=x+1:x=x-1,z.includes(i)||X.push(Q.format("YYYY-MM-DD"))}return X},f=function(F,h,z,X){var B=X.minDayWidth,x=X.periodCount,Q=X.dayOff,i=x/2,m=[];if(F&&r().isNull(h)){var v=U(-i,F,Q),W=v[v.length-1];m.push.apply(m,(0,p.Z)(U(x+x,W,Q)))}else if(h&&r().isNull(F)){var P=U(i+2,h,Q),u=P[P.length-1];m.push.apply(m,(0,p.Z)(U(-(x+x),u,Q).reverse()))}else if(F&&h){var l=A(F,h,Q),T=U(l,F,Q);m.push.apply(m,(0,p.Z)(T))}else{var G=U(-x,z,Q).reverse(),D=U(x,z,Q);m.push.apply(m,(0,p.Z)(G.concat(D)))}for(var M={},se=[],ae=0;ae<m.length;ae++){var ne=d()(m[ae]),de=ne.format("YYYY-MM-DD"),Ce=ne.format("YYYY-MM"),he=de===d()().format("YYYY-MM-DD"),fe={time:de,width:B};if(he&&(fe.isToday=he,fe.left=B/2),se.push(fe),M[Ce]){var Ee=M[Ce].width;M[Ce].width=Ee+B}else M[Ce]={width:B,time:Ce}}return{result:se,parent:r().toArray(M)}},V=function(F,h,z,X){for(var B=X.minDayWidth,x=X.periodCount,Q=F||d()(z).add(-x,"d"),i=h||d()(z).add(x,"d"),m=Math.abs(Q.diff(i,"d"))+1,v={},W=[],P=0;P<m;P++){var u=d()(Q).add(P,"d"),l=u.day(),T=u.format("YYYY-MM-DD"),G=u.format("YYYY-MM"),D=T===d()().format("YYYY-MM-DD"),M={time:T,width:B};if(D&&(M.isToday=D,M.left=B/2),W.push(M),v[G]){var se=v[G].width;v[G].width=se+B}else v[G]={width:B,time:G}}return{result:W,parent:r().toArray(v)}},C=function(F,h,z){for(var X=Math.abs(F.diff(h,"d")),B=0,x=0;x<=X;x++){var Q=d()(F).add(x,"d"),i=Q.days();if(z.includes(i)||(B=B+1),Q.format("YYYY-MM-DD")===d()().format("YYYY-MM-DD"))break}return B},O=function(F,h,z,X){for(var B=X.minDayWidth,x=X.periodCount,Q=X.onlyWorkDay,i=X.dayOff,m=Q?7-i.length:7,v=F||d()(z).startOf("w").add(-x,"w"),W=h||d()(z).endOf("w").add(x,"w"),P=Math.abs(v.diff(W,"w"))+1,u={},l=[],T=0;T<P;T++){var G=d()(v).add(T*7,"d"),D=G.format("YYYY-MM-DD"),M=G.format("YYYY-MM"),se=m*B,ae=G.format("YYYY-WW")===d()().format("YYYY-WW"),ne={time:D,width:se};if(ae&&(ne.isToday=Q?!i.includes(d()().days()):!0,ne.left=(Q?C(d()().startOf("w"),d()().endOf("w"),i):d()().days()||7)*B,ne.left=ne.left-B/2),l.push(ne),u[M]){var de=u[M].width;u[M].width=de+se}else u[M]={width:se,time:M}}return{result:l,parent:r().toArray(u)}},n=function(F,h,z,X){for(var B=X.minDayWidth,x=X.periodCount,Q=X.onlyWorkDay,i=X.dayOff,m=F||d()(z).add(-x,"M"),v=h||d()(z).add(x,"M"),W=Math.abs(m.diff(v,"M"))+1,P={},u=[],l=0;l<W;l++){var T=d()(m).add(l,"M"),G=T.format("YYYY-MM"),D=T.format("YYYY"),M=Q?A(T.startOf("month").format("YYYY-MM-DD"),T.endOf("month").format("YYYY-MM-DD"),i):T.daysInMonth(),se=M*B,ae=G===d()().format("YYYY-MM"),ne={time:G,width:se};if(ae&&(ne.isToday=Q?!i.includes(d()().days()):!0,ne.left=(Q?C(d()().startOf("M"),d()().endOf("M"),i):Number(d()().format("DD")))*B,ne.left=ne.left-B/2),u.push(ne),P[D]){var de=P[D].width;P[D].width=de+se}else P[D]={width:se,time:D}}return{result:u,parent:r().toArray(P)}},s=function(F,h,z,X){for(var B=X.minDayWidth,x=X.periodCount,Q=X.onlyWorkDay,i=X.dayOff,m=F||d()(z).startOf("Q").add(-x,"Q"),v=h||d()(z).endOf("Q").add(x,"Q"),W=Math.abs(m.diff(v,"Q"))+1,P={},u=[],l=0;l<W;l++){var T=d()(m).add(l,"Q"),G=T.format("YYYY-MM"),D=T.format("YYYY"),M=T.startOf("Q").format("YYYY-MM-DD"),se=T.endOf("Q").format("YYYY-MM-DD"),ae=Q?A(M,se,i):Math.abs(d()(M).diff(d()(se),"d"))+1,ne=ae*B,de=T.format("YYYY-Q")===d()().format("YYYY-Q"),Ce={time:G,width:ne};if(de&&(Ce.isToday=Q?!i.includes(d()().days()):!0,Ce.left=(Q?C(d()().startOf("Q"),d()().endOf("Q"),i):Math.abs(d()(M).diff(d()(),"d")))*B,Ce.left=Ce.left-B/2),u.push(Ce),P[D]){var he=P[D].width;P[D].width=he+ne}else P[D]={width:ne,time:D}}return{result:u,parent:r().toArray(P)}},j=function(F,h,z,X){for(var B=X.minDayWidth,x=X.periodCount,Q=X.onlyWorkDay,i=X.dayOff,m=x/2,v=F||d()(z).startOf("Y").add(-m,"Y"),W=h||d()(z).endOf("Y").add(m,"Y"),P=Math.abs(v.diff(W,"Y"))+1,u={},l=[],T=0;T<P;T++){var G=d()(v).add(T,"Y"),D=G.format("YYYY"),M=G.format("YYYY-MM-DD"),se=d()(D+"-06").endOf("M").format("YYYY-MM-DD"),ae=Q?A(M,se,i):Math.abs(d()(M).diff(d()(se),"d"))+1,ne=ae*B,de={time:D+"-01-01",width:ne},Ce=D+"-07-01",he=d()(D+"-12").endOf("M").format("YYYY-MM-DD"),fe=Q?A(Ce,he,i):Math.abs(d()(Ce).diff(d()(he),"d"))+1,Ee=fe*B,Y={time:D+"-07-01",width:Ee},oe=ne+Ee,ve=G.year()===d()().year();if(ve){var ue=Number(d()().format("MM")),pe=Q?!i.includes(d()().days()):!0;ue<=6?(de.isToday=pe,de.left=(Q?C(d()(M),d()(se),i):Math.abs(d()(M).diff(d()(),"d")))*B,de.left=de.left-B/2):(Y.isToday=pe,Y.left=(Q?C(d()(Ce),d()(he),i):Math.abs(d()(Ce).diff(d()(),"d")))*B,Y.left=Y.left-B/2),l.push(de,Y)}else l.push(de,Y);if(u[D]){var Se=u[D].width;u[D].width=Se+oe}else u[D]={width:oe,time:D}}return{result:l,parent:r().toArray(u)}},A=function(F,h,z){var X=d()(F).endOf("w").format("YYYY-MM-DD"),B=d()(h).startOf("w").add(-1,"d").format("YYYY-MM-DD"),x=d()(B).diff(d()(X),"d"),Q=x/7*(7-z.length);if(Q>0){var i=S(F,X,z),m=S(d()(B).add(1,"d").format("YYYY-MM-DD"),h,z);return i+Q+m}else return S(F,h,z)},S=function(F,h,z){for(var X=d()(h).diff(d()(F),"d"),B=0,x=0;x<=X;x++){var Q=d()(F).add(x,"d"),i=Q.days();z.includes(i)||(B=B+1)}return B},I=function(F,h,z){var X=z.onlyWorkDay,B=z.dayOff;if(h!==R.v.day)return!1;var x=d()(F).days();if(X){var Q=[1,2,3,4,5,6,0].filter(function(m){return!B.includes(m)}),i=Q.filter(function(m){return m===0}).length?0:Math.max.apply(null,Q);return x===i}else return x===0},c=function(F){var h=function(v){return v?d()(v).valueOf():0},z=function(v){return d()(v).format("YYYY-MM-DD")},X=F.filter(function(m){return(m.dragBeforeStartTime||m.startTime)&&(m.dragBeforeEndTime||m.endTime)}),B=X.map(function(m){return h(m.dragBeforeStartTime||m.startTime)}).filter(function(m){return m}),x=X.map(function(m){return h(m.dragBeforeEndTime||m.endTime)}).filter(function(m){return m}),Q=B.length?z(Math.min.apply(null,B)):void 0,i=x.length?z(Math.max.apply(null,x)):void 0;return{startTime:Q,endTime:i}},q=function(F,h,z){var X=z.minDayWidth,B=z.onlyWorkDay,x=z.periodType,Q=z.dayOff,i=z.milepost,m=F.dragStartTime||F.startTime,v=F.dragEndTime||F.endTime,W=h[0].time,P=h[h.length-1].time,u=F[i]==="1";if(r().isEmpty(m)||r().isEmpty(v)||d()(m).isAfter(v))return{left:0,width:0};if(d()(m).isSameOrAfter(P))return{right:0,width:0};if(d()(W).isSameOrAfter(v))return{left:0,width:0};var l=0,T=0;if(d()(m).isSameOrAfter(W)){var G=B?A(W,d()(m).add(-1,"d").format("YYYY-MM-DD"),Q):d()(m).diff(d()(W),"d");l=G*X,x===R.v.day&&(!B||!Q.includes(d()(m).days()))&&!u&&(l=l+w(m,X))}if(d()(v).isSameOrAfter(W)){var D=B?A(W,v,Q):d()(v).diff(d()(W),"d")+1;if(T=D*X,x===R.v.day&&(!B||!Q.includes(d()(v).days()))&&!u){var M=w(v,X);M&&(T=T+M-X)}}return{left:l,width:T-l}},b=function(F,h,z){if(r().isEmpty(h))return F;F.forEach(function(X){var B=q(X,h,z);X.rows.forEach(function(x){delete x.left,delete x.right;var Q=q(x,h,z);te()(x,Q)}),te()(X,B)})},k=function(F,h){return F.forEach(function(z){z.rows.forEach(function(X){ee(X,h)})}),F},ee=function(F){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},z=h.controlId,X=h.options,B="#2196F3";if(F[z]&&h.enumDefault2===1){var x=JSON.parse(F[z]),Q=r().isArray(x)?x[0]:null,i=r().find(X,{key:Q&&Q.startsWith("other")?"other":Q})||{},m=i.color;F.color=m||B}else F.color=B;return F},re=function(F,h){var z=h.startId,X=h.endId,B=h.milepost,x=F[z],Q=F[X];return F[B]=="1"&&(x?Q=x:Q&&(x=Q)),(0,g.default)({},F,{startTime:x,endTime:Q,diff:Q&&x?d()(Q).diff(d()(x),"d")+1:0})},ie=function(F){return F?F.replace("7","0").split("").map(function(h){return Number(h)}):[]},le=function(F,h,z){for(var X=null,B=0;B<h.length;B++){for(var x=h[B].groupingIndex,Q=h[B].rows.filter(function(m){return z?!0:m.diff>0}),i=0;i<Q.length;i++)if(F===Q[i].rowid){X=x+i+1;break}if(r().isNumber(X))break}return X},E=function(F){var h=F.filter(function(X){return X.key=="-1"}),z=F.filter(function(X){return X.key!=="-1"}).sort(function(X,B){return X.sort-B.sort});return z.concat(h)},w=function(F,h){var z=F.split(" "),X=(0,ce.Z)(z,2),B=X[0],x=X[1];if(x){var Q=2359,i=Number(x.slice(0,5).replace(/:/,"")),m=(Q-i)/Q*100;return(100-m)/100*h}else return 0},K=function(F){return 23.99*60/100*F/60}},92510:(lt,Te,t)=>{"use strict";t.d(Te,{Nv:()=>o,RL:()=>g,V5:()=>ce,Wj:()=>te,Wn:()=>a,iK:()=>Z,it:()=>L,kM:()=>p,yM:()=>R,yu:()=>d});var ce=["Month","Week","Day"],g=100,p=50,L=60,te=2,R=[_l("\u5468\u4E00"),_l("\u5468\u4E8C"),_l("\u5468\u4E09"),_l("\u5468\u56DB"),_l("\u5468\u4E94"),_l("\u5468\u516D"),_l("\u5468\u65E5")],y=100,a=[32,44,56],r=a[0],o=22,d=20,Z=[{text:_l("\u6708"),value:"Month"},{text:_l("\u5468"),value:"Week"},{text:_l("\u65E5"),value:"Day"}]},44257:(lt,Te,t)=>{"use strict";t.d(Te,{DL:()=>O,Fk:()=>s,HI:()=>j,IM:()=>I,US:()=>c,b0:()=>n});var ce=t(26378),g=t.n(ce),p=t(88239),L=t(24043),te=t.n(L),R=t(96486),y=t.n(R),a=t(30381),r=t.n(a),o=t(27484),d=t.n(o);if(!/^(1887|7596|7798)$/.test(t.j))var Z=t(92510);if(!/^(1887|7596|7798)$/.test(t.j))var H=t(83298);var U=function(b,k){var ee=k?r()(k).month()+1:r()().month()+1,re=k?r()(k).year():r()().year(),ie=function(w,K){return te()({length:new Date(K,w,0).getDate()},function(N,F){return{date:new Date(K,w-1,F+1),dateStr:new Date(K,w-1,F+1).getDate(),dayOfWeek:new Date(K,w-1,F+1).getDay()===0?7:new Date(K,w-1,F+1).getDay()}})},le=ie(ee,re).filter(function(E){return(y().get(b,"advancedSetting.unweekday")||"").indexOf(E.dayOfWeek+"")<0});return{list:le,title:r()(le[0].date).format("YYYY/MM/D")+" - "+r()(le[le.length-1].date).format("D")}},f=function(b){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r()();function ee(le,E){var w=r()(le).weekday(E-1);w.isAfter(r()(le))&&(w=w.subtract(7,"days"));for(var K=[],N=0;N<7;N++){var F=r()(w).add(N,"days");K.push({date:F,dateStr:r()(F).format("D"),dayOfWeek:r()(F).day()===0?7:r()(F).day(),times:V(b,F)})}return K}var re=Number(y().get(b,"advancedSetting.weekbegin")||"1"),ie=ee(k?r()(k):r()(),re).filter(function(le){return(y().get(b,"advancedSetting.unweekday")||"").indexOf(le.dayOfWeek+"")<0});return{list:ie,title:r()(ie[0].date).format("YYYY/MM/D")+" - "+r()(ie[ie.length-1].date).format("D")}},V=function(b,k){for(var ee=(y().get(b,"advancedSetting.showtime")||"").split("-").map(function(F){return d()(F,"HH:mm")}),re=y().get(b,"advancedSetting.hour24")==="1",ie=[],le=0;le<24;le++){var E=d()().set("hour",le).set("minute",0),w=ee[0],K=ee[1];if(d()(E).isBetween(w,K,null,"[]")){var N=d()(E).format("H");ie.push({time:d()(E).format(re?"H":"h"),amOrPm:le<12?"am":"pm",timeStr:N,date:r()(r()(r()(k).format("YYYY/MM/D 00:00:00")).add(N,"h")).format("YYYY/MM/D HH:mm")})}}return ie},C=function(b){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r()();return{list:[{date:k?r()(k):r()(),times:V(b,k?r()(k):r()())}],title:(k?r()(k):r()()).format("YYYY/M/D")}},O=function(b,k){var ee=localStorage.getItem(b.viewId+"_resource_type")||Z.V5[y().get(b,"advancedSetting.calendarType")||0];switch(ee){case"Month":return U(b,k);case"Week":return f(b,k);case"Day":return C(b,k);default:return U(b,k)}},n=function(b,k,ee){var re=k.advancedSetting,ie=re.begindate,le=re.enddate,E=b[ie],w=b[le];return(0,p.default)({},b,{startTime:E,endTime:w,diff:w&&E?r()(w).diff(r()(E)):0})},s=function(b,k){var ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],re=arguments[3],ie=arguments[4],le=b.startTime,E=b.endTime,w=b.diff,K=localStorage.getItem(k.viewId+"_resource_type")||Z.V5[y().get(k,"advancedSetting.calendarType")||0],N=function(ve,ue){var pe=-1;return ee.map(function(Se,ye){var J=K==="Week"?"h":K==="Month"?"d":"m";if(r()(ve).isSame(r()(ee[ye].date)))pe=ye;else if(ye<ee.length-1){if(r()(ve).isBetween(r()(ee[ye].date),r()(ee[ye+1].date))){var me=r()(ee[ye].date),be=r()(ee[ye+1].date),xe=be.diff(me,K!=="Month"?"minutes":"days"),Ae=!ue&&xe>(K!=="Month"?K==="Week"?60:30:1);pe=ue||Ae?ye+1:ye}}else r()(ve).isBetween(r()(ee[ye].date),r()(ee[ye].date).add(K==="Day"?30:1,J))&&(pe=ue?ye+1:ye)}),pe},F=0,h=0,z=(re.find(function(oe){return oe.controlId===y().get(k,"advancedSetting.begindate")})||{}).type===15,X=(re.find(function(oe){return oe.controlId===y().get(k,"advancedSetting.enddate")})||{}).type===15;(z||K==="Month"||K==="Month")&&(le=r()(le).format("YYYY-MM-DD 00:00:00")),(X||K==="Month")&&(E=r()(r()(E).format("YYYY-MM-DD 23:59")));var B=K==="Month"?r()(ee[ee.length-1].date).add(1,"d").subtract(1,"seconds"):K==="Week"?r()(ee[ee.length-1].date).add(1,"h").subtract(1,"seconds"):r()(ee[ee.length-1].date).add(30,"minutes").subtract(1,"seconds"),x=void 0,Q=void 0;if(r()(ee[0].date).isAfter(r()(E))||r()(B).isBefore(r()(le)))x=0,Q=0;else{var i=r()(ee[0].date).isAfter(r()(le)),m=r()(B).isBefore(r()(E),K==="Month"?"day":"second");x=i?0:N(le),Q=m?ee.length:N(E,!0)}var v=K!=="Day"?Z.kM:Z.it;F=Math.floor((x>0?x:0)*v);var W=Math.floor((Q>0?Q:0)*v);h=W-F;var P=S(b,re);if(!z){var u=y().get(k,"advancedSetting.hour24")==="1",l=r()(b.startTime).format(u?"H:mm":"h:mm"),T=r()(b.startTime).format("H");P=""+l+(T>12?"p":"a")+" "+P}function G(oe){for(var ve=0,ue=0;ue<oe.length;ue++){var pe=oe.charCodeAt(ue);pe>=19968&&pe<=40959&&ve++}return ve}var D=G(P),M=P.length-D>0?P.length-D:0,se=Math.ceil((D*12+M*8)/(h-10)),ae=Math.floor(se*Z.Nv+10),ne=Z.Nv*5+8,de=Z.Wn[Number(y().get(k,"rowHeight")||"0")],Ce=[];if(K==="Month")Ce=[(ie?r()(ie):r()()).startOf("month"),(ie?r()(ie):r()()).endOf("month")];else if(K==="Week"){var he=function(ve,ue){var pe=r()(ve).weekday(ue-1);pe.isAfter(r()(ve))&&(pe=pe.subtract(7,"days"));for(var Se=[],ye=0;ye<7;ye++)Se.push(r()(pe).add(ye,"days"));return Se},fe=Number(y().get(k,"advancedSetting.weekbegin")||"1");Ce=he(ie?r()(ie):r()(),fe)}else Ce=[ie?r()(ie):r()()];var Ee=r()(Ce[0]).format("YYYY-MM-DD 00:00:00"),Y=r()(Ce[Ce.length-1]).format("YYYY-MM-DD 23:59:59");return{left:F,width:h,height:ae>ne?ne:ae<de?de:ae,text:P,after:r()(Y).isBefore(r()(b.endTime)),before:r()(Ee).isAfter(r()(b.startTime))}},j=function(b,k){var ee=Z.Wn[Number(y().get(k,"rowHeight")||"0")],re=b.filter(function(i){return!!i.startTime&&!!i.endTime&&i.width>0});if(re.length<=0)return{data:re,totalHeight:ee};re.sort(function(i,m){return i.left-m.left});for(var ie=[],le=0;le<re.length;le++){for(var E=re[le],w=0;;){var K=!1,N=!0,F=!1,h=void 0;try{for(var z=g()(ie),X;!(N=(X=z.next()).done);N=!0){var B=X.value;if(E.left<B.left+B.width&&E.left+E.width>B.left&&w<B.top+B.height&&w+E.height>B.top){K=!0;break}}}catch(i){F=!0,h=i}finally{try{!N&&z.return&&z.return()}finally{if(F)throw h}}if(!K)break;w+=1}E.top=w,ie.push((0,p.default)({},E,{top:w}))}function x(){for(var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],m=0,v=0;v<i.length;v++)i[v].top+i[v].height>m&&(m=i[v].top+i[v].height);return m}var Q=x(re);return{data:re,totalHeight:Q>ee?Q:ee}},A=function(b){var k=b.sort(function(re,ie){return new Date(re.startTime)-new Date(ie.startTime)}),ee=[];return k.forEach(function(re){var ie=ee.find(function(le){return!le.some(function(E){var w=new Date(E.startTime)<=new Date(re.endTime),K=new Date(E.endTime)>=new Date(re.startTime);return w&&K})});ie?ie.push(re):ee.push([re])}),ee},S=function(b,k){var ee=y().find(k,{attribute:1}),re=b[ee.controlId],ie=_l("\u672A\u547D\u540D"),le=ee?(0,H.Z)((0,p.default)({},ee,{value:re})):ie;return le||ie},I=function(b,k,ee){var re=r()(b),ie=r()(k),le=r()();if(!le.isBetween(re,ie,null,"[]"))return-1;var E=ie.diff(re),w=le.diff(re);if(ee==="Day"&&w>r()(re).add(.5,"h").diff(re)||ee==="Week"&&w>r()(re).add(1,"h").diff(re)||ee==="Month"&&w>r()(re).add(1,"d").diff(re))return 100;var K=w/E*100;return K.toFixed(2)},c=function(b){return b.map(function(k,ee){var re=0;if(ee>0){var ie=b.slice(0,ee);re=y().sum(ie.map(function(le){return le.height+Z.yu+1}))}return{key:k.key,top:re,bottom:re+k.height+Z.yu+1,name:k.name}})}},48836:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>p});var ce=t(67294),g=ce.createContext();const p=g},22013:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>o,x:()=>r});var ce=t(17187),g=t.n(ce),p=t(53894),L=t(22010),te=t(88613);function R(d){var Z=d.dispatch;return function(H){return function(U){return U&&U.then?U.then(Z):H(U)}}}function y(d){return function(Z){var H=Z.dispatch;return function(U){return function(f){U(f),d.emit(f.type,f)}}}}var a={post:{fontSize:parseInt(window.localStorage.getItem(md.global.Account.accountId+"_fontsize")||13,10)},appPkg:{}};function r(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a,Z=new(g()),H=[p.Z,R,y(Z)],U=[];if(0)var f;var V=(0,L.MT)((0,te.R)(),d,L.qC.apply(void 0,[L.md.apply(void 0,H)].concat(U)));return V.emitter=Z,V}const o=r()},1924:(lt,Te,t)=>{"use strict";t.d(Te,{Z:()=>g});var ce={};ce.isNumber=function(p){return typeof p=="number"&&!isNaN(p)},ce.isNumberStr=function(p){return p!==""&&ce.isNumber(+p)},ce.parseFloat=function(p,L){var te=parseFloat(p);return isNaN(te)||p===""||typeof p>"u"?L:te};const g=ce},27409:(lt,Te,t)=>{"use strict";t.d(Te,{A_:()=>d,Q9:()=>y});var ce=t(12424),g=t(63239),p=t.n(g),L=t(96486),te=t.n(L),R=t(70714),y=function(){var I=navigator.userAgent.toLowerCase(),c=I.match(/ipad/i)=="ipad",q=I.match(/iphone os/i)=="iphone os",b=I.match(/midp/i)=="midp",k=I.match(/rv:1.2.3.4/i)=="rv:1.2.3.4",ee=I.match(/ucweb/i)=="ucweb",re=I.match(/android/i)=="android",ie=I.match(/windows ce/i)=="windows ce",le=I.match(/windows mobile/i)=="windows mobile";return c||q||b||k||ee||re||ie||le},a={get:function(I,c){var q=new XMLHttpRequest;q.open("GET",I,!0),q.onreadystatechange=function(){(q.readyState==4&&q.status==200||q.status==304)&&c.call(this,q.responseText)},q.send()},post:function(I){var c=this,q=(0,R.qz)(),b=new XMLHttpRequest;b.open("POST",I.url,I.async),b.setRequestHeader("Content-Type","application/json; charset=UTF-8"),q&&b.setRequestHeader("Authorization","md_pss_id "+q),window.md&&window.md.global.Account&&window.md.global.Account.accountId&&b.setRequestHeader("AccountId",md.global.Account.accountId),b.withCredentials="withCredentials"in I?I.withCredentials:!0,b.onreadystatechange=function(){if(b.readyState==4&&(b.status==200||b.status==304)){var k=JSON.parse(b.responseText);k.state?I.succees.call(this,k):(window.nativeAlert(k.exception),I.error.call(this,k))}},b.onerror=function(k){I.error.call(c,k)},b.send(p()(I.data))}},r=function(){location.href="/login"},o=function(I,c){var q=document.createElement("script");q.async="async",q.src=I,c&&(q.onload=c),document.getElementsByTagName("head")[0].appendChild(q)},d=function(){for(var I=new URL(location.href.replace("#",encodeURIComponent("#"))),c=I.search.replace("?",""),q=new Object,b=c.split("&"),k=0;k<b.length;k++){var ee=b[k].split("=");q[ee[0]]=decodeURIComponent(ee[1])}return q},Z=function(I,c){var q=decodeURIComponent(I),b=q.includes("#"),k=c.includes("true"),ee=function(N){return N.includes("?")?N+"&pc_slide=true":N+"?pc_slide=true"};if(!k)return q;if(b){var re=q.split("#"),ie=_slicedToArray(re,2),le=ie[0],E=ie[1],w=ee(le);return w+"#"+E}else return ee(q)},H=function(I){var c="";for(var q in I)c=(c?c+"&":"")+(q+"="+I[q]);return c},U=function(I,c){return I&&(I.includes("?")?I+"&"+c:I+"?"+c)},f=function(){var I=!1;return a.post({url:__api_server__.main+"Login/CheckLogin",data:{},async:!1,succees:function(q){q.data&&(I=!0)}}),I},V=function(I){a.post({url:__api_server__.main+"Global/GetGlobalMeta",data:{},async:!0,succees:function(q){var b=q.data;window.config=b.config,window.md?window.md.global=b["md.global"]:window.md={global:b["md.global"]},window.md.global&&!window.md.global.Account&&(window.md.global.Account={}),I()}})},C=function(I){var c=I||new Date,q=O(c.getMonth()+1),b=O(c.getDate()),k=O(c.getHours()),ee=O(c.getMinutes()),re=O(c.getSeconds()),ie=c.getFullYear()+"-"+q+"-"+b+" "+k+":"+ee+":"+re;return ie};function O(S){return S>=0&&S<=9?"0"+S:S}var n=function(I){return Date.parse(I.replace(/-/g,"/"))},s=function(I){var c=n(I),q=n(C());return q<c},j=function(I,c,q){var b;if(q)b=q.toGMTString();else{var k=new Date;k.setFullYear(k.getFullYear()+10),b=k.toGMTString()}document.domain.indexOf("mingdao.com")==-1?document.cookie=I+"="+escape(c)+";expires="+b+";path=/":document.cookie=I+"="+escape(c)+";expires="+b+";path=/;domain=.mingdao.com"},A=function(I){var c=document.cookie.match(new RegExp("(^| )"+I+"=([^;]*)(;|$)"));return c!=null?unescape(c[2]):null}},89471:(lt,Te,t)=>{"use strict";t.d(Te,{GE:()=>f,N$:()=>H});var ce=t(46593),g=t.n(ce),p=t(94942),L=t.n(p),te=t(36803),R=t(63239),y=t.n(R),a=t(88239),r=t(45231),o=t(86674),d=t(91247),Z=["rowid","ownerid","caid","ctime","utime","uaid","wfname","wfcuaids","wfcaid","wfctime","wfrtime","wfftime","wfstatus"];function H(V){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=JSON.parse(V||"[]"),s=n;return n.length&&(s=n.filter(function(j){return!j.refId}).map(function(j,A){var S=j.fileUrl||j.fileRealPath;!S&&j.filepath&&j.filename&&(S=""+j.filepath+j.filename);var I=new URL(S),c=(I.pathname||"").split("/"),q=(c[c.length-1]||"").split(".")[0],b=(I.pathname||"").slice(1).replace(q+j.ext,""),k=md.global.Config.IsLocal,ee=File.isPicture(j.ext)?md.global.FileStoreConfig.pictureHost:md.global.FileStoreConfig.documentHost,re="",ie={};if(k&&C&&(j.viewUrl||j.previewUrl)){var le=new URL(ee);b=b.replace(le.pathname.slice(1),""),re=(j.viewUrl||j.previewUrl).match(/\?.*/)[0],O&&(ie={ext:j.ext,previewUrl:j.previewUrl})}return(0,a.default)({},ie,{fileID:j.fileId||j.fileID,fileSize:j.filesize,url:S+re,viewUrl:S+re,serverName:k&&C?ee:I.origin+"/",filePath:b,fileName:q,fileExt:j.ext,originalFileName:j.originalFilename,key:(0,d.Z)(),oldOriginalFileName:j.originalFilename,index:A})})),y()({attachments:s,knowledgeAtts:[],attachmentData:[]})}var U=function(){var V=(0,te.Z)(L().mark(function C(O,n,s){var j=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,A,S;return L().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return A="",S=O,c.next=4,r.Z.getRowRelationRows({controlId:O.controlId,rowId:n,worksheetId:s,pageIndex:1,pageSize:200,getWorksheet:!0}).then(function(q){if(q.resultCode===1){var b=((q.template||{}).controls||[]).filter(function(ee){return!_.includes(Z,ee.controlId)}),k=(q.data||[]).map(function(ee){var re={};return b.forEach(function(ie){if(j&&ie.type===29&&ie.advancedSetting.showtype==="3"){var le=JSON.parse(ee[ie.controlId]).slice(0,5);re[ie.controlId]=y()(le);return}re[ie.controlId]=ie.type===o.DN.ATTACHMENT?H(ee[ie.controlId],j,!0):ee[ie.controlId]}),re});A=[{cid:"",rcid:"",isAsync:!1,staticValue:y()(k)}]}S.defsource=y()(A),S.advancedSetting=(0,a.default)({},O.advancedSetting,{defsource:y()(A)})});case 4:return c.abrupt("return",S);case 5:case"end":return c.stop()}},C,this)}));return function(O,n,s){return V.apply(this,arguments)}}(),f=function(){var V=(0,te.Z)(L().mark(function C(O){var n,s,j,A,S,I,c,q;return L().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return n=O.rowId,s=O.worksheetId,j=O.columns,k.next=3,r.Z.getRowDetail({checkView:!0,getType:1,rowId:n,worksheetId:s});case 3:if(A=k.sent,A.resultCode!==1){k.next=14;break}return S=JSON.parse(A.rowData||"{}"),I=[],c=_.cloneDeep(j),_.forIn(S,function(ee,re){var ie=j.find(function(w){return w.controlId===re});if(ie)if([38,32,33].includes(ie.type)||(ie.fieldPermission||"111").split("")[2]==="0")S[re]=null;else if(ie.type===14)S[re]=H(ee,!0);else if(ie.type===34)I.push(U(ie,n,s,!0));else if(ie.type===29)S[re]=["2","5","6"].includes(ie.advancedSetting.showtype)?0:y()(JSON.parse(ee||"[]").slice(0,5));else if(ie.type===37&&ie.dataSource){var le=ie.dataSource.substring(1,ie.dataSource.length-1),E=j.find(function(w){return w.controlId===le});S[re]=E.type===29&&["2","5","6"].includes(E.advancedSetting.showtype)?void 0:ee}else S[re]=ee;else return}),k.next=11,g().all(I);case 11:return q=k.sent,q.forEach(function(ee){var re=_.findIndex(c,function(ie){return ie.controlId==ee.controlId});S[ee.controlId]=void 0,re>-1&&(c[re]=ee)}),k.abrupt("return",{defaultData:S,defcontrols:c});case 14:case"end":return k.stop()}},C,this)}));return function(O){return V.apply(this,arguments)}}()},72728:lt=>{lt.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAfCAYAAAAFkva3AAADOklEQVR42qWUWU8TcRTFxxiNj8YXEx+BUmjZKS1Ll2k70720oH4TeXWJn8Dod/BRozHGCARNlMTEQIzGBAFjFChrgcJAKeV4z2CakLK08vDLzb33nPOfJTMKgDJy/ckbwpAwJswJ+X/1HefcH+c70mwkE5eEh4Kxm0yjkLyJYvIWDhK3Wc2ec+6po/7YsGwiflUYMRIpFOMSEJeA6CCKoZSQZGXPubmnTvSjwrUjYWvx6EVh2IgfBu1HB7AfjKGghlHw6SXYc849ddSL76NwuRS2Eovez8X6sR+TW5Er2BPTnlfHnkcrh3Meoh/qt8RHvxm2FIlcF4w9Oa0QTiPvCyHvDp4FdXJwGvTRzxwlEw7f2YgkUIgMyolR5Hs1IVgBGvWmj37JGVLmQ9rotp5CPpjGTm8IO93BiqGePvqZo/zRtMUdLY1dNQFDBIYrUDHU00e/5GSUX0F/cTc4gB1PHNvOQNXQRz9zlJ9+NWcEUjA8MWx1BQR/FQRMH/2Ss6lM+7wTG74kjL4Eco4gcp3+iqGePvolZ1KZ8noeLXojMLwp5Lo0bHaoFUM9fcvil5zHynd3X/eMW8WWO4VNVxTrHX6st6tnQh319NHPHPML+NrbMzbXqyPX04/1Tg3ZFlXwnYJKnamnj/7S5/Slp9sq7Ga75f6dMWTb/Fhr9p0I99RRTx/9pTAy4XI+mHXKs3AmkG3Vsdrkw6rdWwbn3FNHPX1lv6DPXY4rwuyCQ8e6I4aVJhXLNk8ZnHNPHfX0lYWRT47O9LfOPmTb41ht1rHU6MVSg6cEe865p476E/+0ZLyjfXhWXvtaW0yuRMWi1V2CPefci26E+lPDPrS1tgjFtVbeqi4hHmQsblaz55x76s4MI+9bW55ONXvFHEXGqmK+to/V7DnnnrqKwsaam2zCwbI9KlekSZjHrOw5577iMDJitz//YfNhyRbGgsVvVvacc19V2FtbozZua5e3GEGmXjcre86rDnvT2HBBmPlt0bBoiYCVPedVh5HXVuvdCYsLmboQWKW/x/l/hb2qr28YsdixUBsCK/v/DiMvLXXTszV+sLI/V9iLutonkzUusJ477FltjSZsCPpZ2r+QQ8neDXOh7wAAAABJRU5ErkJggg=="},19081:lt=>{lt.exports="data:image/svg+xml;base64,PCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI2IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjYgMjQiPgo8dGl0bGU+dGFzay1kaXN1c3Npb25uaWxkYXRhPC90aXRsZT4KPHBhdGggZmlsbD0iI2RmZGZkZiIgZD0iTTIyLjQ1MSAxOS43OTljMi4xNzctMS41MTEgMy42MDMtNC4wMjggMy42MDMtNi44NzggMC00LjYyMi0zLjc0Ny04LjM3LTguMzctOC4zNy0wLjcxMyAwLTEuNDA1IDAuMDg5LTIuMDY2IDAuMjU3IDEuNDc1IDEuMzUzIDIuNCAzLjI5NSAyLjQgNS40NTUgMCA0LjAzMS0zLjIyMyA3LjMwNy03LjIzMiA3LjM5NyAxLjUwOSAyLjE5MiA0LjAzNiAzLjYzIDYuODk5IDMuNjMgMC41NDQgMCAxLjA3Ni0wLjA1NCAxLjU5MS0wLjE1MyAxLjcxMyAyLjEzNSAzLjg3IDIuNzcxIDQuNzc5IDIuNzcxIDAuNiAwIDAuODk2LTAuMjE5IDAuNjc5LTAuNDE2LTEuMzE2LTEuMTg5LTIuMzM3LTIuNzY1LTIuMjgxLTMuNjk0eiI+PC9wYXRoPgo8cGF0aCBmaWxsPSIjY2NjIiBkPSJNMTAuMSAwLjA5MWMtNS40ODkgMC05LjkzOSA0LjQ1LTkuOTM5IDkuOTM5IDAgMy4zODUgMS42OTQgNi4zNzMgNC4yNzggOC4xNjggMC4wNjYgMS4xMDMtMS4xNDcgMi45NzUtMi43MDkgNC4zODYtMC4yNTggMC4yMzQgMC4wOTQgMC40OTQgMC44MDYgMC40OTQgMS4wNzkgMCAzLjY0LTAuNzU2IDUuNjc1LTMuMjkxIDAuNjExIDAuMTE4IDEuMjQzIDAuMTgyIDEuODg5IDAuMTgyIDUuNDg5IDAgOS45MzktNC40NSA5LjkzOS05LjkzOXMtNC40NS05LjkzOS05LjkzOS05LjkzOXpNMTMuNSA2LjYzYzAuNTc4IDAgMS4wNDYgMC40NjggMS4wNDYgMS4wNDZzLTAuNDY5IDEuMDQ2LTEuMDQ2IDEuMDQ2LTEuMDQ2LTAuNDY5LTEuMDQ2LTEuMDQ2Yy0wLTAuNTc4IDAuNDY4LTEuMDQ2IDEuMDQ2LTEuMDQ2ek02LjcgNi42M2MwLjU3OCAwIDEuMDQ2IDAuNDY4IDEuMDQ2IDEuMDQ2cy0wLjQ2OSAxLjA0Ni0xLjA0NiAxLjA0NmMtMC41NzggMC0xLjA0Ni0wLjQ2OS0xLjA0Ni0xLjA0NnMwLjQ2OS0xLjA0NiAxLjA0Ni0xLjA0NnpNMTAuMTAxIDE2LjA5NGMtMi4yNTkgMC00LjE4LTEuNTI5LTQuODkyLTMuNjY0bDkuODA2LTAuMDY1Yy0wLjY5NCAyLjE2OC0yLjYzMiAzLjcyOS00LjkxMyAzLjcyOXoiPjwvcGF0aD4KPC9zdmc+Cg=="},94789:lt=>{lt.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANwAAADcCAYAAAAbWs+BAAAAAXNSR0IArs4c6QAACplJREFUeAHt3U+IXVcdB/DMixEFxUiFQjLJvCHYhVQpFBG60IgLLQUN7qRKZyEGpGB3LrqwQXAhClUpImJNBUGQ2ogImoWp4KILN0VdWBfzL0ZCbEkKIYRkXvw9eWXuPGbue4dzJnPue58Hjznvnt+579zPvd937/xh7qFDHgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgEDNAgs1T263uW1ubn5ia2vrieh7LJ6n4tmPp8ccCNy7d+/thYWFjdjUv8fXS4cPH355cXHxzS5temcCt7GxcWowGPwocB/vErC57p9ABPBGBO/b/X7/+/v3LmXX3InAxVnto3FWuxSb/kDZzbe2GRH41dLS0pMRvkHt21N94OLM9nCE7S+B+YHaMc3vQAV+GWe6Lx/oDKZ4894UNQdWcvXq1QfjMvIPwnZgu6BLb/zk6urqudonXHXgbt269b0APF47ovnVIRAfzM/Gtx8frmM2u8+i2sCtr69/JKZc/SXC7qyWHpDA4fj24zsH9N5TvW21gYufQH1pqi1QRKAhEMfN5+Ms997Goqqa1QYulD5XlZTJdEIgLivfHWe507VOtubA9WtFM6+6BSJ0D9U6w3fVOrGY14emnNt/4jLijSlrlXVUIEL0vpj6o9NMP46Hk9PUHURNzYGbyiNwf7e8vHx2qmJFnRWIH6I9Gvv6r9NsQNQNw1nlo+ZLyirBTIpAjoDA5egZSyBRQOASwZQTyBEQuBw9YwkkCghcIphyAjkCApejZyyBRAGBSwRTTiBHQOBy9IwlkCggcIlgygnkCAhcjp6xBBIFBC4RTDmBHAGBy9EzlkCigMAlgiknkCMgcDl6xhJIFBC4RDDlBHIEBC5Hz1gCiQIClwimnECOgMDl6BlLIFFA4BLBlBPIERC4HD1jCSQKCFwimHICOQICl6NnLIFEAYFLBFNOIEdA4HL0jCWQKCBwiWDKCeQICFyOnrEEEgUELhFMOYEcAYHL0TOWQKKAwCWCKSeQIyBwOXrGEkgUELhEMOUEcgQELkfPWAKJAgKXCKacQI6AwOXoGUsgUaDztxxO3N6J5aurq0d7vd434ra1Z6L4kYkDFAwF1uIe3BcGg8G5uP3zdSR7CzjDNWyGYYsD51KE7blYLGwNmwnNfpg9E3ZBuMqtBUvgGjhxwLwSLx0wDZPE5v8/sIYfXInj5qZc4Ea7evTJfHpu9vz+begwbCv7t/pur1ngtvffme2mVqYAyz0ABW4PGIsJ7IeAwO2HqnVeR7C7gMBtu5zfbmplClzIHD+zwwVutGvj90dr8aPtH8zsnr5PGxaGr4fl+fv0dp17G4Fr7LI4UJ6JA+alxiLNBIFh2KL8dMKQuSv1lyZjuzxCtxK/Ijgfi1fi2Y+nx2SB4fdsF5zZJkMJ3C5GceC8GouHTw8CRQVcUhbltDIC7QIC1+6jl0BRAYErymllBNoFBK7dRy+BogICV5TTygi0Cwhcu49eAkUFBK4op5URaBcQuHYfvQSKCghcUU4rI9AuIHDtPnoJFBUQuKKcVkagXUDg2n30EigqIHBFOa2MQLuAwLX76CVQVEDginJaGYF2AYFr99FLoKiAwBXltDIC7QIC1+6jl0BRAYErymllBNoF/E+TMZ/hjSg6cruq641bRK2NbYaXlQo4wzV2zDBsHbpd1dH4t3Qro1tErTQ2Q7NiAYFr7Jyu3q4q5v3z+LDoNzZFs1IBgRvtmDhgH4nm6Ur30zTTem6aIjUHKyBw2/5ntpvda8VZ7gvdm/X8zVjgZmefH52dTZndLRG4Gdm38QOU9RnZlJneDIHb3r3nt5udbHV9/p1ET520wI3E4n4Cnb1d1ejs9nzqzld//wUErmEeoevc7apGt4g6E3O/3tgUzUoF/KXJ2I6JA7crt6saBswtosb2X+0vBW6XPRShezUWD58eBIoKuKQsymllBNoFBK7dRy+BogICV5TTygi0Cwhcu49eAkUFBK4op5URaBcQuHYfvQSKCghcUU4rI9AuIHDtPnoJFBUQuKKcVkagXUDg2n30EigqIHBFOa2MQLuAwLX76CVQVEDginJaGYF2AYFr99FLoKiAwBXltDIC7QIC1+6jl0BRAYErymllBNoFBK7dRy+BogICV5TTygi0C/ifJmM+8V+weuvr6yux+IvxfCyeH4ynx06By/Hy3NLS0ovxL9YHO7u8ahNwhmvoxA093hNhuxiLfhbPJ+IpbA2fRnMx2j8Nq9evXLmy1FiuOUFA4HYC/SRefmbnIq9aBB6+ffv2r1v6dY0JCNwI5PLlyw/F5dFXxny8nCAQZh/f3Nz81IQy3SMBgRtBbG1tnYnmgiMjXeDu3bufTh81nyMEbrTfB4PB8fk8BIpste91p2QUuBFUr9e7MqWZsjGBsPv32CIv9xAQuBFMHDS/2cPI4gkCYffKhBLdIwGBG0GcOHHiX/E7uF84MtIEhmZDu7RR81stcI193+/3vxYvX4jnVmOx5h4CEbaLI7M9KiweF/CXJg2R+BH37Xj5dPyK4Id37tx5Ntp+qdvwaTRvhNVvI2wvxVcfTg2YSU2B20VocXHxjVj81C5dFhHIEnBJmcVnMIE0AYFL81JNIEtA4LL4DCaQJiBwaV6qCWQJCFwWn8EE0gQELs1LNYEsAYHL4jOYQJqAwKV5qSaQJSBwWXwGE0gTELg0L9UEsgQELovPYAJpAgKX5qWaQJaAwGXxGUwgTUDg0rxUE8gSELgsPoMJpAkIXJqXagJZAgKXxWcwgTQBgUvzUk0gS0DgsvgMJpAmIHBpXqoJZAkIXBafwQTSBAQuzUs1gSwBgcviM5hAmoDApXmpJpAlIHBZfAYTSBMQuDQv1QSyBAQui89gAmkCApfmpZpAloDAZfEZTCBNQODSvFQTyBIQuCw+gwmkCQhcmpdqAlkCApfFZzCBNIFZCNy9tE1W3UWBuJ/4YNp593q9qWunXWepuppvOfxmbOQDkzY07jF9dm1t7eykOv3zIxDhHB47VT6qPcMF2uUqxUyqeoH4EF6vdZLVBi7A/lwrmnnVLXDkyJGLtc6w2sDFp9SFWtHMq16BuDL627Fjx5zhUndRv9+/FGP+kTpO/XwLxAf18zULVHuGG6F9q2Y8c6tOYDU+qF+sblaNCVUduMB7Oeb648Z8NQnsKhCXkm/H926P79pZ0cKqAzd0itB9Pb68UJGZqdQn8N+Y0mePHz/+z/qmtnNG1QduON0I3dNxbf5UNN/aOX2vCBz6fRh8bHl5+bUuWCx0YZLvzPHatWvvv3nz5jfj8uGrEcAH31nu6/wJxDHwxzgGvhsfxn/q0tZ3KnBN2I2NjU9ubW2dCvRjgX+k2ac9swI3Yn+vx59uvXby5MkrM7uVNowAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQI7Bf4HxteFjsUnOsAAAAAASUVORK5CYII="},88338:lt=>{lt.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUoAAAFKBAMAAACJBws2AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAhUExURUdwTPPz8/X19fX19fb29vr6+vf39/X19b29vc7Oztzc3BxrfqcAAAAHdFJOUwDmuY1lFjjtGxLGAAAJXElEQVR42u2dz1cTSRDHWyB4DSjEt6cIaq4RVnOddRGvs+Jbr0FZuTI/kk5y2xMhN08Zve2JwF+5LrKAIJmq6uqq5kFd5ZnPq+76Vk31L2PY7NPGxvrayuMFu7C4srq+sfEpNoFZZWetZi9bsroZEOj87z9B/B/013YQjDuP7XRb3AyfMQBOEKMyJ5hRkXP+ucXZA4U4+lizWEteSOvjc0uxh6L6+a5haZa+lnPkK0u3J3HgjpR051zNulkSCXjSFfIbpndvbrlD+pekLctjXjE/Wi576Q/yg+WzZ6EPt9dBn6uxUlovgjTPDGkTDzVSpWG5LeVPli3Lbxk35Lb1Ycu8kG+tH3vKCTlrfVkzXA3yUiBVWtafZXHQkcMcQXPWr0WByrkHcd+2vm05/PFmGXPv480y5ttWwpZDTTqcKaghRJmGWGSwlh2VmhhlEgceOt9tKZgvHS9fQbtW0rrhZh33DNQSpsxCFnQ3aW+IU6YhC7qDtFdqCpRoaZ+xGlYPflYSZqaOK7Fh3lKizEJOO7QE9Ib8K4Pj/4xOmSOKISriUTH8bgdfqUrW9lxXJkfDi/bVc2lEU/Tj4WX7x6uy/0H53yfDqzbyWbTXmCBpmEBnzrBB0jDrvmToOkhSDOWeZKg/vN7GfsQIHzuD4TQ79BI/+GqomEp54KMywqfw3nC67XtI5ru8400a8y5/3pmUUqLlKGEXy3JXEpzZ5BbLAkB5wCyZ85xS6eDM6ZJ5j39WkmZmlfV75yez8svxF3dnZqxiedmVpyX6pYKY4MyIMzteYjx32eASP2eWbDmlnc8//NuRUwKaMuQVJxm6XKQdOYlRzCbpg+lTb+ISP3U2Se+VOKtwGPKcLYcXJb4aOAz5tZ8/sw4DPioVKq5c/t4hO5YrFXbIu0xV+qT866ZPF/aUKfEUgOF00KKIJfFcmJZ/Q/yN1aIllsTThwAM6N+8GUvimYCm3IReccQc3xIFyEt9+sSsM+iQBUohXTE7rAXwCDgxGEph9LTsA/W6R28Zxe5LuD2gjwb0JkfTfVpOoPONHuQd93WoCfTHJ2TKzL3zUkAHskeWoivVG77VBg6KPlmKrqRydLtgABaY879Ej1fVtT80gHuI3ojJXVdPBvDZRqdMXKdlHx65E/pKQOQ2LYUoq45rPD0CJb7DnjsuTPTgP92jU6ZOpYYU5Q8Fx1ywlJHbAqkQZd2lILL2ETxwXSg7bhtzED/dd1iHztzW7Xsyvkzc9rxMCL4kUF5YU6FsCKX4krLzoOmQH2nzkuLLqtNWrInMvLzQIGzYYGP8QpBbG2yMn+dI0g5BqRg/y5EzNuAYP8uR923AMW73XM5LSMX4WZC3bMAxfhbkjaBjPHUQIrkYty77a8Vi/LTemLVBx/hpvTFjg47xU8G8b4OO8VPB3LVBx/ipYLYCj/HM4fiJXIyndLkUjHHrcBxBLsZPBHPWBh7jJ4I5YwOP8RPBvGcDj/GTz8j3NvAYP+kV7QYf4136uahHcvMyR6eeAWQfcOk+4UN08kGlnv6Qx8aYH02RXcHBcKiAmSITZMFGiVrfxS1P9IdDFWfGqDQ+YaTEaGcb1SQachqqVTSrM+CoIW9iio0eKyVC4uuYYuORFmUVU2xMWCkR4bOHKTbUKLsYyoKV8gBD+eYGUOZ3lLeOsnUDKLM7SkbKxg2gTO8obx1l7QZQJneUjJT2BlDaG0J5Ny9vG+XtzD3HNTs4CpzytMsL6RjrUZ61ogGYelXwGNH5UqM8oP6xKOUY00ZU+9JFtWS1KPdR3U4tykNU5xhFydhzw3XhUT03PsoRrt2JonzPRrnvjbJj7nuj7LFR7mG6/wUmeErDB0FZxaykICkHbJR1zKqUGmUTs8KnRhlhVkvVKNuYlWc1yhiz10CN0jBSjn0pUYraXaKl6ilqp45WHs9Qu54K3M8WXJQ5agcZrnJL2Cq3Lmo3Xhnl2FMV3EHtbCyjHGGmJYKyyko5xAw4grKO2nFbSrmP+DhDUDZRu5fLexs1aOJBUbZRO8HLKUfgWYmhxO2qBzTSDsFtIjhlijuhAKAce6DMcKc9lCi7uJMzSpR7uFNISpR13IkuJcom7nScEmUbd9JQSYmQpzZ1fJkiT8DqUGbI08Q6lF3kyWwdyj3kKXcdyjryxgAdygh545wOJfayGhXKDPu6gwplF3vDikruqWJvq1HxZRN7848KZRt7i5IGZYK+kQpAuQ/9GodSZujbvQCUI/CHLpCyg74pDbFlhG13SR196xxkp84hsLMBpYzQN/hBKEfQAQdSxujbEEG7nsYWePQLRJnib5aE7SD7egzamgWjzPG3dCrsc6vibzxVoIzwt8fKUyaEm3jlKXPCrcbylFXCxeXylBHhEnhxyqtvpbQCpMwot8CLU3YoN+qLUzYprxOIU8aUF2ekKTPSk4vSlB3SCyTSlHXSay7SlDHpZRxhyoz2ytCElbL0lPsS7cUmYcqI9vpVj5VyH/XJA9ci2fs2OsRX2QaslIfo9AjsXBeCIX79A99vBCdm2bTM6S8vMlJSEg+w28rnzM+kxCOcfoiJB/rIXSGUw5fcXqr95djdDst/JuJ89deXZczPzfux6S8oV8KATNrML3t7sZz7lXQvVmd/cd7HgMdlT87vBkDZLYOkPVXAbFEpJfGSY05LyyEDkMwlAOW8OmUbQKmeJXMIpLpk1kGUypJZLpYhxM8SDNLMazozaQMpVfNPFwqpKkZgV2rWbzkcUjGZRwhKNWXPMJDUa/aFFF25MkpxkEppEulKnTQJTY7n9laB8ikW0lQawc9KnTBvEijFNTOjQIonoIhEKZzNcxqkcGnUJlKabUHIZSqkpLTjBV3jC2iJDikn7amDK+WkvWmcbDvw0BEcc7fxlhrzpnG27eDHW2TM3cdbouqIDIttBz/eJ2Pus9LMYiZKr2MeGTbb8gb5wjDaB0+Qzwyr/eYF8iEvpJ8Iygy3zfOLe9pmpzRz3IV7EhkPxl13NI0X4w30p8aEj/nMmPAxPULyJaEXxqttcUR64hnSmHe1GwDJoJt+dPIKplsWSkUgv+X0Vw6QT2IjZeQYkpiSF2qP5yTIB20jax9Ck/JrJAkbROlro2CVjxjO9GVsdAzOmb40mrbzGMC4uGm0rZQzAMYTWdpZu04/k9XN2IRjO+tXXbq4vmmCs8qfOxvraysLdmFldX1j8y9GJ/4L/spqfhzkw9AAAAAASUVORK5CYII="},27456:lt=>{lt.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUoAAAFKBAMAAACJBws2AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAhUExURUdwTOnp6ff39/T09PPz8/Pz8/X19fX19eDg4L29vc3NzRZccyUAAAAHdFJOUwD9IHuv0knvvazyAAAIF0lEQVR42u2dy1MbORDGlfGjOIYQsI+TIs5ynGBX4OjwiHM0Lljn6M2D5IiZGYsrld1irjnF+LYnNvtXLgXZZXFmRqNRS/q06698NPhXre6W1DNqMUYl77jd2ds/Omjw8erR4V67fewzMD1r7/Mfddh+C4TYOeBZWt1FAPXedYY8X/HuC8tj73UaXKzxrg/PaJnz3ZAXV/zCTsy85HJ6/NbCYHN5mR729R4vo2jTJOR7XlavzI32c15eK4ZGvd7jKopGJiArQ66mODAQNw2urE3cuPm3dvRCfuA0+lkn5FNOpR0XIDViUkJqw6xwWmlJSPUGMeVYQ3r3hpxaMflk6fU4vSJqzOdch1ZoIVtcjwbI4a0l0OtDbZQxXaD3uD5F6E5J6poVrlcBaDrXkNy3uG5N1CGrXL+68ONNMuZPuAmtYcf33xrB5nOy3N7ipjQADx3lAPrIzWmCHjpqE2XPKGWEO+uoz0BDw5SljFnjHN+Y3tA4ZYls1OLmNXDAlCWMWeM21AcP8O/GdMGUsmHes0QZIU875Yy5ZY0yRF0MlV0afbRIWXidWec2VTSzP7FK+Qg6o0tm9iq3qy54GpJIRnVuWyP42CkaP0PrlDF+7BSLny0ASmH8eBxBPujyV25nsQVBGaInyyIpswVCOYDc70jtf1AGPH/IH8BQPoSPcEGUe5w7MOQ1IMq+AwOeM+RIA549l1ehKLuAxYLi5YMhFGWMVx0qXjH6CYzyFHqlkbviqHM0pU0/teXmspIaJnLRp0RVDQOOmahLv2PWCSgb2h2zRkB5rt0xPyV4Q/7jJPkmwRvySIdb6nfMGgnlhWbH3ICknM+YryEp57YVXgJJOb6/rahiUs6tMZdAKe+XOLYNUn67nNfsj2J5PbFKec15USCve7YpLy8vxLvyqn3KDMyAPniUKKfC8NkGoLy8EoXPGwTKmSB8qIJHjTLdM+/Cp4JBOc0PnxoG5WUjd/G2AUJ5lbt42wah/JK7eEtAKGd5Qe6hUKY6pk88P6pTXuQE+RIM5VVOkG/AUH5N+foJdYgrU37Jmclfw1BOc4I8gaaMiySi8+by3ccG5fdUVJX4Xc2Us+z1Rk2i1te0YMuuOF3O/cWZBVueCOur52q2TH2WIWvLU3G6VLJl+rdlbRkKNz1qtkxkKafZWx+Zer6ULcfpX7qUtGUsTpcqtjyjseVNwqxos2UzIfHLm+p6LdHll00iWwbC1aUGW8r65c1LO0vwtjwRPTSD8MtT4RoYwZYT0Rr4HMEvQ1G9DcIvI+FKHcEvYxElhC25cD+B4JfXU2QlgY/x6ymyksDny+spsuqAXwaiOjCEX3YFiw0MW/YlKe345UNRwQ1hrX693Pikz5ZnVH55KlgSnUPYciIqXirtx6n8ciIqXjZU9uNnRLYMRZTnY964+5xJ1tyWl+8VFm8/eba892v/fELCQjBFNSv93/5K9tBZJ+VvjlAmDlAmC8rFiC8oF5QLygXlgnJBuaBcUP7v1urJYt9DSOnGTve1zO+OJSmbshWYLEq5OpFcBaaZ0FB+BqtmlaPUURnMq1+mn1NeE53W1FBlLVML3kCq/mfWgqGq/9Os6v+S8Sd88nX1vuCpFIYtu1hP+DKfQ1b0xTjhc8iKcVvK++XIwlN8eVv6okMUEH7pS763YcWWsY03daT9MhK++Y9gy1D0BhlEvpyAvY03zXwbbwl+Hj+Rff/Sii37omMUEH4ZCA+WIqzVA9Gb4Kb3PZlvght/q17WlmPxsWyzJxRyDmdv67JlhjFlbRnqPjkzljw5M8s+OfNAW22D5qzUCdqJrln2iS6J4x6yNTcSWwbER5712NJ36NQm0AnYvGPu29C2nMCdzJ5mJiLROtg2ZZe6KYgWygCu+8LX7ESE08kira9BBNcVJI0yhOuwktZv4xSuW80sJ8RhOv/khjhMF6XUpiA+WEeqVLeM0Lp75c7iKJ3S0gf8IVjXubw2FjAd/DL6uflI3RALtHOz3lmyWGs8svBRoPw942murY6n34pDznU89exS/pnxh3PdY0124pXoHx862dXYjQ7RmN22fSc7lzvSBZ4ir+vvqF93wS0pFhzUpoy03JrBNWfL2xtIwC4gSb2BBOtWqQy3dORmHLhbhh45fGOTG7dfOXKTmBu3srlxw50btwU6cvOi58KAO3IjqCO3q7pxU60bt/7CRPngP3AbtRs3eztyS7obN85DDPlEBAmxfOsKKQFW7LEYkj0B3ZahpcxRAUrr8RMWgbQeP91ClJbjJy4GaTl+HhWktBs/fkFKq+WDSVFIqxWjoDClxWQUFoe0mIy6EpTW9j+RDKS1xXBfitKSMWM5SNZywZTMszFNxj5zwJgDJq0hvFfaCfN+CUrjYR6VgTQ+AXVLURo2ZjlTml4aBSUp2S8GIdfKQppM7fIJ3UZqHzAF9cBDx+xGbaREaSiA1tQgzQSQSuiYm4G6TFn695OhOqT+MVcfbxMTZcBI1MLN56ZcM6KCZHV9rhmPyCg1umbACNVCd8pbPdcCuUILyTwdq6PIZ9SYQ9B0PhfoDWLI8YhpUAU5vO/0lBRyhzF8TG2QlJgaIRn7QAT5imnVexcgGVsnSEibTLvWVdN7HDADqqtNltGIGZGnsvRY8ZkpvceNm3vOWW7Uo01mVp0SkLs+M636S0nGxyNmQ+9kclL8glmS1yma4scWBluW0y7jLado3GPrjDd61jnIRFzdfctg9Ky9n4J42AZC/D70x+323v7RQYOPV48O93bbx3QD/RcaOT5m4sSwjAAAAABJRU5ErkJggg=="},51194:lt=>{lt.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbIAAAEOBAMAAAAeVY8hAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAkUExURUdwTL29vcnJycDAwMfHx9HR0b29veDg4ODg4M/Pz729veDg4Nen/+8AAAAKdFJOUwDyR6d4HsnG692J2rwfAAAIhElEQVR42u3dPU8bSRgH8M2+YMoQkhSuNglECDebHLkCN3twaXDjkNOdFRoul6Nw5d6NdRIVX+JMwMWUtpGR5ssdEBLby87svDzz7Ng3T5AilAj46T87L7s7g+ctUP0Re8tZUfcfy36iw439k9va2dvUi4xeWxRatPFzldxUtU9u/+7/tddUj4xSa0Lz96ukeie7r/7Nx05TNTJqS2jRq1nUDO9tUzEyS0LbaBNWDd6rRWZFaNFrwqvPapFRelr6FfaG8OtrrBLZTWjNkltilRRV/71KZGWH9pGI1DuFyEoOTQwmQ5tGVmpoojAJ2jSyMkMLiHgl8pGVF1pYlZD1xXrIyiysrND8NpGpgdBPORdZWaHtErm6kI6spNBeENl6Ih1ZKaEFRL5S2cjKCC1qK8gKL7UHkZUQ2guiUueykeGHFhC1SmUjww5NqS0Wtse8yLBD+0BU62/ZyHBD86vKMs5UJD8y3NC2ibrsXDYyzNBColOpZGSYoR1oyZ7KRoYXml5krNDYkeGFdqApu5CNDCs0XxPG6B5rPFlqe8fIm/P7HNgYZ/pR1Zb1m5Kh4UT2gejXM7nQcCLz2gCygScVGk5kKwSiEpnQxovR5fM6/lqZkfkEpmLx0JAi2waSXYqHli5O/8HuQ/zyIgsIVKWioaWL1RhZ93r8siLzqmCyvicWGlJkISGGm6N/Vk5knwBl+b2jt1VKZGA9I7t3zISGFRlkY2QM1pnQsCJ7BCp7XBwaVmRAc8aix2lb+JFFoDDG+nM2NLTIAlgZ88bjFnZkoH0+c2U9ExpaZNLPpZWfW28hRwZ8mbEvtPvQ8CILoWXsx4RbqJGB3LSar389Tmh4kQGPZvwXRLYwIwNcwRSsZO5CQ4zMJ/AVs0NDjGzFgCxhd8R4MPBxmrNGQ64DA7KnVsjaBmQDG2ARMVFNC2ShEVlqgWzFiOzYAtknI7LLJe0axV7AXbTF2f2WGQtkRmCcmeNCzxrt6PZDQ7Lyu/3AkCwpXfbI0HX2eEmHM84NA7TaNiQ7X9KB2gbZriFZ+UN125Cs/BVa1ZBsbUknVze1nCtqG6ZXvjFZvKTTxmWWpU62YFP98if7yytbcbKFu+PoZE72f5Ct/6Rdb+2U9fXriSAiTHFla9olKjs6RR2p1/Bk3RGqDC8zn9J4OTNbpbSHOdd/+3JT688rYVk9910ue1eegajMz9+X7S++7G4negdR1sSSNW5lwwW6dyUqi+7ec73Gu9+o/ThXVBZ8ezc5QbtHPMCS3W//ulqcJxaisvsDHyZoT5kukGQhc3eDtU8GBWWt77Ie1tPcSyTZj9NHRkhP4MljHNnMztgYaUqc4MhWp7IO0sQxxZE12Lv1TE2vYhRZxDmtyNT0ykORzZ3LlKA8gh/gyBqzsiHKUH2BI5vbyXyNMlRfosgC7u7zR3YOZ0KyzGEIVwgDWj9BkWWOP5tgdPsxhizMnl8Rm1+hAbxGLCBrZWU98yu0ryiyelY2Mt85nmPIcg73aRrvHI8xZDkHQ3aMz4lTDFmj6DymyMZZo4AsOis8w3PXxg6kWJZ7SmliuAu5xJDlnns2NPzcM8GQneXJJoZnITGCLBQ5XxB6iQbydnSR7EjksNxt+8bpYhnjMOCR0QvtGEEWsk4ojU1eaDGCbJUl6xkc0WC2VxTI6mLn5cKeffIMQcY5vrlpbuqYIsg4x6TPzYoBjo8GXXUWyxps2dBYv3+OIIvOOCfbG+v3EwRZwDv/PTHUHPtNBBn3ZPsrQ3eKofb1c2Xc30YwMdQcEwRZSKnwryMAa45QjZEra/FlZmbFYDtXebIuXzYychM8RZD5tKBiA4s0uI2rHNlqkaxjYO74DEPWKJKNDdwziBFkUREse3PuwKLBjCurFMoyN+cCm/oPnqxRLBtCP5SB3NLPlp0Vy66hn34mGLKAClQK+wIF6CkMTFlNRAb8yPoYRdYVkWVf5GzbExlTFlKhiiFDS1BkLTFZ5pG1VvcIfNYJS1YXk2Vf5AztGMs4Mp8KVnY19UIZ9sRDkVVEZZ3snEx1BQq24iyQNURlD7Y3/a4o+9tDkUVnorKH25t2beg+mDLhxpiznySsWtB9MGU1cdnD7U0q7dHAcY25MvHGmLefRKE99teQZCGVqIftSP63b69hyY5kZDm7rCUvtdv9xUiyrowsb5f1RynZOzSZVGPM3WXtvZYaydBkLTlZL+/ris+yvnh4srqcLP/XL/wiCLs9bx5L5lPJamrQvniIsoqsrJP/pUWutc8epqwhKxsyvvZvRZ1//72HKZOZgOTvJ5m26zdc2Pr3XhVJFlDpYt/A4LXI6Sk5SLKavOyK/fUPWbGtb3rYsq68bML7Dht5tvW92f+CIwupQvFXV4f781Pkwc7m/H/AkR2pyE6Lvs3hxv6fd6rnO3ubD/4VR9ZVkY30fggUmU+VKrZf1lKTdeyXNdRkY+tlkRos7+why2QVRZlec8SQNVRlQ8tl8rPhwlmxJbKAKldqt6ymLruyW9ZVl02sloVUo2IDsgON9w3mZC0dWc9mWV1HNrJY5lNaTnM0LqvoyTr2yhp6srG1skgPpjErNi3TbIy8m3Mly2q6sqGlMvXZsPY0xLAsoNqV2ik70ped2inr6ssmVspCClCxjbIWhKxno6wOIRtbKPMpSDXtk1VgZB37ZA0Y2dA6mf4EROfmnElZQIEq0ZedTKtNyPPpZ00VWQ1KNtSXkT6pfvv49mrFj8+UZF0o2QRAxioVWUjBKrVLdgQnO7VL1oWTjayS+RSwYl3Zr9PaJeTp9DMF2SqkrGPTeFaHlI1tkr0ELRvv65dVTuZkTuZkTuZkTuZkTuZkTuZkTuZkJclen5wkyynTKSdzMidzMidzMidzMidzMidzMidzMidzMidzMifjy4yUkzmZkzmZhuw/X1LMlAPjcScAAAAASUVORK5CYII="},89380:lt=>{lt.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAAEECAYAAADOCEoKAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAhBklEQVR42u3de5gcZZ0v8O/vrZ7umemu7oFJJpMEJIQsVwlRBIVFmBAXUFwS4QCyBEnWo6BHMYhc3FUu6x4ecN0l6/H2eNmNXHY9+ODiioogIbDgQjAcEuUigQBiLuMESXdVT2p6uut3/ujukExmpm9V9VZX/z7PwwOku9/6vUXXl7fernqLICKBmTOWZR0D4EhmPoSIUszcS0S9APb8Vf2zCX9PV9rIEdEoM4/u/XcAe/7a6zWbiF4D8Lxpms8RUVb3PhCtI90FiMaMjo7OdV33qFKpdBSAI4noKABHApitubTtAJ5n5heUUs8T0fNKqRd6e3u36t5non4SCCGWy+VOAvBeAMcy85EoB0BKd12NYGYbwAtE9DyA3zLzo5lM5gnddYnJSSCEBDMbuVzuBCIaYuYhAH/ebgd/A321ATxGROuYeV06nd5AREXddQkJBG06KQDq2BcSECEhgRAQCYD6SUDoI4HgM8uyjgZwGTNfDKBfdz1t6g0iuhPAt03TfE53MVEmgeADZs7Ytn0hM/81gHfrridingTwPdM075afOr0ngeAhy7IWu677USI6F0CP7noibjeAe4joe6ZprtNdTFRIILRodHR0brFY/AiAlQD+THc9HWozgH+JxWJ3yHUPrZFAaJJt28eWSqXriOhCAIbuegQAoMTMPzAM49ZUKvUb3cW0IwmEBuVyuVMAXAfgbN21iGn9FMAt6XT6Md2FtBMJhDpls9mzieg6AKforkU05DFmvjmTyfxcdyHtQAJhGsxs5PP5C13XvRbAQt31iJZsUkrdkkwm7yaiku5iwkoCYRLM3G3b9krXda8mokN11yO8w8xblFL/kEql1hCRo7uesJFAmMC27TNLpdI3iGi+7lqEf5h5i2EYn0ylUr/QXUuYSCBU5HK5I5h5NRGdpbsWERxmvj8ej3+yp6fnFd21hEHHBwIzm7Zt/x0zfwpATHc9QosxZv5KOp2+lYgs3cXo1LGBwMxkWdalAG4BMEt3PSIUhpn5mnQ6fQcRse5idOjIQLBte6Hrut+G3GcgJvekUurjqVRqk+5CgtZRgZDNZg8kopsBfAyA0l2PCDWXmb8N4G8zmcyfdBcTlI44KJg5ZlnWJ1C+5v2yTum3aIkiossBbLYs63Jm7ojvTORHCKOjoweNj4/fS0TH665FtC9m3tDV1bWst7f3D7pr8VOkUy+Xyy0dHx/fJGEgWkVEx4+Pj2/K5XJLddfip0gGAjN3ZbPZbwC4l4gO0F2PiIbKd+nebDb7NWbu0l2PL33UXYDXHMeZPzY2dreMCoSfmHlDIpG4oLu7e4vuWrwUqUDIZrMXA/iWLF4qglB5etXydDr9Y921eCUSpwzMnMjlcncQ0Z0SBiIole9a9RSiW3c9nvRJdwGtsizraGa+G8AxumsRHe1ZIrqg3VeFbusRQjabvZiZN0DCQOh3DDNvqJy2tq22DQTLsm6rrNUfiaGaiIRuIrrTsqzbdBfSrLY7ZWDmuGVZdwI4X3ctQkzjh6ZpLieigu5CGtFWgcDMacuy/hPAabprEaIOj5imeQ4R5XQXUq+2CYTK8w9+AZkvEO3lWQBD6XR6p+5C6tEWcwiO48wvFotPQMJAtJ9jmPkJx3HaYkm+0I8Q8vn88aVS6ecAZuquRYgWjBiG8f5kMrlBdyHTCfUIwbbts4rF4qOQMBDtb2axWHzUtu1Qr9kZ2kDI5XIrXde9j4h6ddcihBeIqNd13ftyudxK3bVMWaPuAiZjWdaHmfnfddchhF+YeXkmk7lLdx0ThS4QKo9MuxeyArKItiKAc9Pp9E90F7K3UAVCPp9/V6lU+i/I1YeiMziGYZyaTCaf0l1IVWgCoXKT0qMA+nXXIkSA3iCi00zTfFZ3IUBIJhV37959KDM/CAkD0Xn6mfmBfD4/W3chQAhGCNls9kAAT8mzFEWH+y0zn6Z7yXetIwRmTgG4X8JACLwdwM+ZOaGzCG2BwMyGZVk/IaITdO4AIcKCiE60LOtuZjZ01aAlEJiZcrncHQCGdHVciJA6x7KsNbo2riUQcrncZ4joIl2dFiLklmez2VU6Nhz4pGLlWoNfAYjkuvZCeKRgGMYpQV+jEOgIgZkzxWLxh5AwEKKWeLFYvJuZM0FuNNBAsCzr+0Q0L8htCtGuiGieZVn/GuQ2AwuEyjlRpJ+LJ4QPPhTkfEIgcwgybyBESwKbT/B9hCDzBkK0LLD5BN8DQeYNhGhdUPMJvgaCzBsI4akPWZZ1uZ8b8G0OQeYNhPAeM48qpU7w6xmSvowQZN5ACH8QUS8z383MPX6070sgWJb1eZk3EMI3x1iWdYMfDXt+ypDL5Q4HsAmA1ts4hYi4MQDHpdPp33nZqB8jhG9BwkAIvyWY+eteN+ppIFiW9WEAiwPbJUJ0MCJaUjnmvGvTq4aYOZXL5Z4jooOD3zVCdCZmfj2dTh9NRLYX7Xk2QrAs6wsSBkIEi4gOtizrC56150UjMpEohFaeTTB6NUKQiUQh9Ekw8z970VDLgSATiULoR0Rn5nK5ZS2308qHZSJRiPDwYoKxpRGCTCQKER5eTDA2PUKwbXvQdd0tAHy5ploI0ZTdhmEsSCaT25r5cNMjBNd1V0HCQIiw6SmVSlc0++GmRgjMnMnlcq8SUZ/u3gsh9sXMb6bT6flEtKvRzzY1QrAs6xMSBkKEExEd0OxCKg2PEJi527KsLQBC8fhqIcSktpqmuYCInEY+1PAIwbbtFZAwECLs5laO1YY0FAjMbDDzZ3X3VAhRGzOvavRJ0rFG3mzb9vkA/kx3R+uhlEJXVxcMw4BSCkSBP8ZSBOiNN95APB7XXUbYHFE5Zn9Q7wcaGiG4rnu17h7WQkTo6elBMplEPB6HYRgSBh3Atm0UCgXdZYSO67oNjejrDoRcLreMiN6pu4PTqYZBLNbQwEdEhITC/ojoBNu2z6r3/Y2MEK7T3blaEokEDKOhUyYRMbZtY2xsTHcZoeK6bt3Hbl2BYFnWEIB36+7YdIhIRgYCAJDP52WksK/Tstnse+p5Y70jhGW6e1RLPB6XuQKxh5w+7EspVdfai3UFAjNfpLtDtcipgphIQuEtzOxNIFROFwZ0d6gWCQQxGQmFPWZVjuVp1QwEZl6huydCtEJCoayeY1nVaCDJzOfp7ogQrZJQAJj5XGZOTfeeaQPBtu2/JKJpGxCiXXR6KBCRadv2B6d7T60RgqdPhRFCt06/TqHWMT1lIFiWNRPAB3R3QAivdfh1Ch+wLGvKHwmmDATXdS8G0KW7eiH80MGnD10Azp3qxSkDgYjkdEFEmm3bGB8f111G4KY7bZg0EHbv3n0ogBN1Fy6E3yzL6sRQONVxnMMme2HSQCgUCkvh4ZOhhQizDgwFGhsb+8vJXpg0EIhoSHfFQgTJsqyOmlOY6hifNBCY+TTdBQsRtA6baDyFmfc7C9gvEGzbXiRLrItO1UHXKfTn8/njJv7hfoFQKpWGdFcqhE6dcp3CZMf6foEg8wdCdMbpw2TH+n6BIPMHQpR1QCjsN4+wTyDI/IEQ+4p4KOw3j7BPIMj8gRD7i3IoTDzm9wkEmT8QYnJRDYWJx/w+gSDzB0JMLaKhsM88wp5AkPkD0c6CeoxbBG+I2mceYc+DDEql0pAsYz69XAHIjgFOCXBZdzXTUwR0G0AmAaQ74JGHpmnijTfeCGRblmUhlUpF5lmSlXmEZ4C9RghEtEh3YWHlMvC6BWzPA6PF8IdBtebRYrnm1632qLkVQR+gUTp92PvY33sOYZ7uwsJqq10+uNrVaLHch6gbGBhAV1dwa/pEKBTmVf9h70A4UndVYZQttHcYVI0Wy32JMsMwMHv2bBx44IGBPdYvIqGw59iPAQAz91mWNUt3VWGUjdB9LtkxIBON094pERFM04RpmoFu17Is3V1vxSxm7iOiXQoAcrmcjA6mMFbSXYH0Rfgvn8/PAyqnDEQkgSBEB2PmI4FKIDDzPN0FhVUiQo+MjFJfhLdc130rECATilPKJHRXIH0R/iOieYCcMtSUiQM9wUxY+6onFv0JRdESOWWo10Gp9g6Fnli5D0JMpTqHQLZtD7quu113Qa0K4membOXS5bE2uXQ5Ubl0WUYG/mvznx0BAEqp2bFqMojaMnE5uER0MfORCsCg7kKEEKEwqAD06a5CCBEKfYqZ+3RXIYTQj5n7ZIQghAAAMHO3IqJu3YUIIfQjou4YM0sg1Cmfz++53dV1Xd3ltDWlFOLxOFKpFJLJpO5yRFlfrHLbo+5CQs11XYyMjMBxHN2lRIbrunAcB47jwLZtzJw5E0qp1hsWTZM5hDpJGPjLcRyMjIzoLkMAfUpWWp6ebdsSBgGojhSEPkQkI4Ra5EsaHNnX2nUrmVScXsTW4A812dfayc+OtTCH/C6mCJF9rZ2cMtQSlYdxtAPZ19r1ye88NaRSspBAUGRf66cA7NJdRJilUikkErL2mN8SiYQEgn67FDPLb2o1DAwMSCj4KJFIYGBgQHcZHY+ZnRgRSSDUoJTC4OAgbNvec+myTIC1hoj2XLosI4NwICInBjllqJt8eUXE7VLMvEt3FUII/Zh5l5JTBiFEhUwqCiHKiMhRRLRLdyFCiFBw5DoEIUSVnDIIIfaQSUUhRBkR7ZI5BCEEgPKVioqIXtVdiBBCP6XUDmUYxgu6CxFC6GcYxguqu7v79wBKuosRQujDzHZ3d/fvFRG5AF7SXZAQQh8iepmI3OoCKXLaIERnexUoL5ACSCAI0eleACQQhBBlLwBADACY+QV5nFttuQKQHQOcEuCGfH0URUC3AWQSQFrWLhU1MPMLAECVf+mzLOtN3UW1wjRN39p2GdhqA6NF3b1sTm8MmJsqh4Twh2VZuktoiWmaBxDRLgWUL1lk5qzuosKqncMAKNe+VR6KJKY2XL1iec8y7EQk8wiTyBbaOwyqRovlvggxiT3HvprsD8VbsmO6K5C+CN9JINRrLELXcEapL8I71QlFYK9AUErdr7swIUTwDMNYV/3nPYGQTCY3AnhDd3FhkzB0VyB9Ef5h5l2pVOqZ6r/vPanIAB7TXWDYZCL0wKYo9UV4g4ge2fvf93nYKzOv011g2GTiQE9MdxWt64mV+yLE3iYe8/sEwt7nEuItB6XaOxR6YuU+CDHRxGN+n2vXmJksyxoB0K+70Eb5eaViVbZy6fJYm1y6nKhcuiwjA/+145WKzLwrk8kcsPef7fP/PSLiXC73GICluosNo0xcDi4RHRPnD4AJpwyAzCMI0SkmO9b3CwSZRxCiM0x2rO8XCHI9ghDRN/H6g6r9AkGuRxAi+iabPwAmCQRA5hGEiLqpjvFJl8xwHOewQqGwearXwyiInx3z+Txs20ahUIDrurq73NaUUojH40ilUkgmk7rLaVmb/ezIXV1dh/X09Lwy8YVJRwjd3d0vA1ivu+qwcF0Xw8PD2LlzJxzHkTDwgOu6cBwHO3fuxPDwsOzTYD06WRgAUwQCADDzD3RXHRYjIyNwHHkmrl8cx8HIyIjuMjoGEU15bE8ZCEqpfwMwrrt43WzbljAIgOM4sG1Z5y0A4wDumerFKQPBNM0/AviZ7up1ky9pcGRfB+JnpmlOORxT031yuqFFpxgf7/hBUmBkXwdizXQvThsIqVTqPmZuq+lTrzGH/C6mCJF97S9mtk3TvG+699QaIdhE9CPdHdEpHpe7mYIi+9pfRHQPEU27hriq1YhSqqNPG1IpWUggKLKv/UVEa2q9p2YgJJPJXwIY1t0ZXVKpFBIJWXvMb4lEQgLBR8y8xTTNdbXeVzMQiKjY6ZOLAwMDEgo+SiQSGBgY0F1GpBHRD+t5X81AqDS2RneHdFJKYXBwEP39/UgkEpAH47aOiJBIJNDf34/BwUEoVddXUTSp3lP/ur/ZuVxuHYDTdHdsKkHcyyDEVEJ+L8Mj6XR6qJ431h3LSqlbdPdKCNG4Ro7dugMhlUrdz8y/1t05IUT9mPnpVCpV91PZGjpxU0r9o+4OCiHqR0Rfauj9jbyZmQ3Lsp4DcLjujk4kcwjCLzucbXjZ3oyXrc3Y4WzD8O7tAICNu57e5329RhLzexcAAOb1HoZUzMQx5kIc2nsYkoaWn1Q3p9Ppho7VhqfLLcu6nJm/qaN305FAEF56fOcj2Pjm09j45ga8bG9uub15PfPx9vQinD7zTBzac1hQ3ViZTqfXNPKBhgOBmbsty3oZwJygelUPCQTRqpfsF/HA9p/iF9vvQ77o352XM+OzsGTmWVg84y8wEB/0azPbTdM8mIhKjXyoqR/Us9nsKiK6za+eNEMCQTRr45sbcPsr393vFCAIi2ecgQ/P/YjnwcDMV2YymdWNfq6pQGDm7lwut42IDmjm836QQBCNesl+Ed988TYtQTCRl8HAzLvS6fRsImp4ZZ+mLg+rbOir/u8mIbxnFy18Y/NtuHz9JaEIAwB4eOcDuPK3l+H/brvDi+b+uZkwAFpYVZmZ+yzL2gagx6d91BAZIYh6bHxzA67/zTW+zhG0al7PfFxx2LXNTj7uNk1zNhFlm/lw0xeQE9EuZv5yUDtJiFbd/sp3cdX/+2SowwAAXt29BV94/rNYu/MXDX+Wmb/cbBgALT53gZnjuVzuJSI6OID9NC0ZIYip2EULN2y6JjSnB41YPOMMXHHoNfW+/XemaS4kokKz22vpFjMiKhDRFUHuICEaYRctXPX0J9oyDIDy3MJXX/ky8qXaoxql1KpWwgDw6MlM2Wz2fiI6M6B9NCkZIYiJdjjbcMOmazy5sEi3eT3z8fdH/dN0Vzz+OJ1OL2t1O57chE5EnwEwFtzuEWJ61dOEKIQBUJ5XuGXzDVO9PBaLxT7lxXY8W+kjl8vdAuDaAPbNpIIYIeQKQHYMcEqAG/IFghUB3QaQSQDpDlu7tHqaEJUw2NtkcwrMfFMmk7nRi/Y9CwRmTuVyued0TTD6GQguA1ttYLTYels69MaAualySHSCGzZdg8d3PtJ6QyF1wZxLcNHcSwEAzPx6Op1e0OrcQZVn61YRka2Uqns6tJ20cxgA5dq3hvuXNs/c8/q/RzoMAODubXfgWWsjAICIrvAqDAAPAwEATNP8ATM/FPD+8VW20N5hUDVaLPclyl6yX8Q3N6/WXUYgbt58Pd4s/GltOp2+18t2PV/Zkoj+FyI0wZiNTE+i1ZfJ3LApGgPUQ3oPrfme0VIen/7NStfrbXseCOl0+ncAVnvdri5jDd08Gm5R6stE33/lOxh2tusuo2Un95+K77z73/CPC2svOZJ38+9b8ssTl3m5fV/WvjZN8++Z+XU/2hZioh3ONvzo9fZ/dMhJB56KG4+9FYoUjpvxTvzTwm/V/AwTbht6eFGfVzX4EghEZMdisfMAtP1Za8LQXYH0pZbbt3wn9Pcn1HLSgafipoW37vN8ioUz3lEzFAiYp9z4Kq/q8O3pGMlk8ilm1nZdglcyEXpgU5T6UrXD2YYHdvxMdxktmSwMquoJBQCXelWLr4/LqazY8h9+bsNvmTjQE9NdRet6YuW+RM3tW76ju4SWvHfG6bjpuFunfXLVwhnvwA1H3zrl6wTMO/2hE1Z4UY/vz88yTXMlM7/q93b8dFCqvUOhJ1buQ9TYRautRwen9C/GF4/931A0/WFYKBXw3Ve+XuMXBboBHvA9EIgoG4vFLkAbzycoAt5mAoPJ8sHVDlf8KSrXOpgs194ONTfq8ZH2vQDplP7FuH7hzXWFwcfXL8fW3b+f9o0EzBt6+IRFrdYVyP/3ksnkU9ls9tqwLczaqEw8msPudtWuvyycNuN9+Ntjv1R3GPxh92t1tWuUsArAilZqC+yRu5lMZnXUrmIU+lQfntJu/AoDAGDC0lbrC/QZ3IZhXAxgR5DbFNG08c32W/DEzzAAAAL1tXraEGggpFKpYSK6GIDnl1yKzrLxzQ26S2hIvWEwVhprKgyqlMtDrdQZaCAAgGmaa5n5qqC3K6Ll8Z2P6i6hbqfPPLPuMPifT/5V02FQRstaqTXwQAD2XJ9wa6vtiM60w9nWNlcmnj7zTHz+7TfVHQbbnT+0usnjWvmwtl/X0+n0dblcbi6A5bpqaFQ+n4dt2ygUCnBdOetphVIK8XgcqVQKyWSyoc9Wn74cdtUwIJr+N18Pw6Ayj7Cob93iZ3Y183ktI4Qq0zRXAFirs4Z6uK6L4eFh7Ny5E47jSBh4wHVdOI6DnTt3Ynh4uKF9+pL9YtPbPffgi7DmPT+s+X/sVukIg6pYMbao2c9qDQQiKpmmuZSZ1+uso5aRkRE4TlNPxhJ1cBwHIyMjdb/fbvJ04Zy5/wOfWPAZHNT7Ntxx0o+gfPr6nzHrbG1hAACuonnNflZrIADlOyMBvJ+ZX9Zdy2Rs25YwCIDjOLDt+g50u2g13P4H5izDpw//3J6DdFb3bNxxsvehcMass3H10V/UFgZlbRwIAJDJZP6USCTOAPCG7lomqvdLKlpX775+2WrslOHM2R/ElUdct99B6nUohCMMWhOKQACA7u7uLYZhvJ+ZG49/H42Pj+suoWP4sa+XzDoLnzvyC1MepF6FwvsHl7Z9GAAhCgSgfM+DUmopgNAsa8oc8gcwRIgf+/qCQ5bXPEhndc/G7Sfd0/Q2zpl7Hq46+m/qCoOPr18e2jAAQhYIAGCa5sPMvEJ3HVXxuNzNFBQ/9vVl65dj++6tNd832DMHd518b8MjhbPnfAifPvzqmu+rjgy27v695330UugCAQAymcxdAD6GEIwUUqkILiQQUvXu68Hu2Q21e8l/n1tXKDR6+nD2nA9h1RHXtv1pwt5CGQgAkE6nv8vMy6B5SfdUKoVEIoJrj4VMIpGoOxBm9cxpuH2vQ2Hp3PMjFwZAiAMBADKZzE+J6Cxm3qWzjoGBAQkFHyUSCQwMDPi+Ha9CYenc8/Gpw68KbRgo113X9GcDrbQJpmmuU0q9V+ey7kopDA4Oor+/H4lEouYXQdRGREgkEujv78fg4OC0awpOtKjvnU1v95L/PhdbR2sfoFOFQtjDAACKseKrzX62bb7Zo6OjB42Pjz9MRAsmez2Ipz+LcHjJfhGXr7+kpTa+/557MLf3oJrvG3a245JfnQsXbluEAQA8tGR908d16EcIVb29vX9QSp0c9suchf8WpA5vuY1LnzgP2+oeKfwHzn/bxfj0EZ+rGQaF0hg+tl5fGDCwsZXPt00gAIBpmiPpdHoxgPt01yL0Wtj3jpbb+MgT59V5+jCIyxZcUfN9Y6UxfPTJv8K23TonEHldK59uq0AAACIaNU1zGTO35wqbwhPHHXC8J+1cWmco1KL7NKGKmNa18vm2CwSgfJdkJpO5CMBXdNci9Pjzmad51laroTDuFkIRBgBQMgrrWvl8WwZCVTqdvpqZlzOz3IHUYRakDsdA96Bn7TUbCuNuAR998qJQhAEYP252YZSqtg4EoHxVYyKROM513VHdtYhgeTlKAMqh8Ppo/ZcWFyphoHfO4C1MfG+rbbR9IADlOyWVUgOlUunXumsRwTnv4A973ubKJ86vKxQKbgF//cSFoQkDMGfXLnlqTavNRCIQAICI8rFY7IRisfh5ZpY1zjrAYPccT35tmKhWKFTDYIezTfcu2Nu9XjQSmUCo6urquoWIFrqu+0fdtQj/XXrox3xpd6pQKLgFrHziAg5ZGKBkjN/oRTuRCwQAIKJnlVJzSqXSj3TXIvx13AHH+zJKAPYPhYJbwIonzh8fdraH6wpf5u+vW/zMq140FclAAMo/TcZisfMAXOC6bts+eVrU5tcoAXgrFApugZf/aln+j86OLt393Qdz1qvRAdBG9zK0gplnuK67Vil1rO5ahD+u33Q1fuXj05zMrkzOGs+mdfdzIgZuWrtk/Y1etdcRgVBVLBaXK6W+TkSh+w8rWrPD2YbLnlyOfCmvu5TAMPDa2iXr53nZZmRPGSYTi8XuJKIB13X/hWWxxEgZ7J6Dj8z379QhjJTrrvC8Td2dChoRjRmG8VEiOpyZm38EkAid8w6+CCfPOFV3GYFg4KZf/sWv13ndbkedMkymWCyuVEr9HyJq7AGDIpTsooWPr1+OPzo7dJfiGwY/snbJU0N+tN1xI4SJYrHYv1ZOI+4CIKcRbS4VM/F3C/8BSSOa+c7ARleNL/Or/Y4fIeyNmY9h5p8Q0aG6axGt8WJVpdBhzpYMDK1b/NQzfm2i40cIe6tc0DQfwDuKxeKTkBFD21qQOhxXH/VF3WV4J4AwAGSEMC1mPrhYLK4xDGMxycqqbenxkUfw5eduau+fIwMKA0BGCNMiote7urqWENGsUql0NzNrf3CMaMzJM04tXn/srQ8SI6e7lmYwsLFkjC8KIgwACYS6ENFILBa7kIj6SqXS95hZLoUOOWZ2XNf9GhH1vav/xDOKRuG4VhcgDb4T+LGrCkNe3adQDxkGN4GZjfHx8SsMw7haKdXYc8WEr1zX3V4qlW7p6ur6OhGVJr5++kMnrCbQZ3TXWQvDvXLtkl+vDnq7EggtKhQK7yaimw3DOJWIYrrr6UTMPF4qldYx89/E4/Gai+S878F3DblKrSHgEN2179cX8COuwqqgThEmkkDwCDMnXNe9nIiuJKLQfdGiyHXd1wCsVkp9jYgant85/aETbyTgBt39AAAwZ5mwyotVj1ohgeADZj6yVCp9SSl1DhHJ8+Q9VJm/+U8i+jwRvdRqe0MPL5qn3K5VxFgBooyGDmWZaLWrCqtbXSDVCxIIPmJmBeCUUql0BRGdoZSS5801gZkt13UfNAzjqwD+i4g8XyJv6OFFfcqNrwKwIohTifIEp7vGVcU1YQiCKgmEADHzsaVS6bNEdJZSyrs1xCPIdd0dzPyAYRhfIaLfBLnt9z34riEmWsFEQ16GAwOvAXyvq7BG1xxBLRIImjDzLNd1LyaiS4joWACG7po0KzHzJma+Syl1JxEN6y4IqJ5SxJYR0yImzCNQfWu/l+cEniHGq0xY56rxdUH+fNgsCYQQYOYEgHe6rvsBZj6DiI5WSqV01+Vzn23XdZ8zDON+APcDeJqIxnTXVY+hhxf1xYqxRVO97sdtyUGRQAgpZs6Mj49fQkQfJKKjDcOYBaBdJygLpVJpmJmfZ+b7urq6bieirO6ixP4kENoIMx8CYJHruscz89GVuzJnE1EfEfVorm03M+8CsJ2ZX2HmF2Kx2FMAniGi13TvO1EfCYQIYebZhULhFKXUMUR0CDPPAJBRSqVc100SUS8RdaM80ohXLqQyqjduVZaVK1Xu2SgAKDCzQ0SjlUflWQCyRLSTmV9zXffZeDz+OBGF6yEFomn/HyUZUwzQ8O6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA0LTIwVDE3OjM2OjE3KzA4OjAwsImxAAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNC0yMFQxNzozNjoxNyswODowMMHUCbwAAAAASUVORK5CYII="},60726:lt=>{lt.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABQCAQAAABfPPjqAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfkCRIXFQsPD4Q4AAAC9UlEQVR42u2b4XXaMBSFr7xArAlqJqiZADZoswFMgD1B2wliJijZIGxAJoiZIGYCwQJ5/eGQNIAsyTbWM8f3Dwc/v+P3cSUZPYzAu1QULGiKGP1TLjZvS1mUb0T5cnigxHddzSSyu/QDaP/SS2dOlYdjIABUdhM4QKwyQKhIvPqupD3RKEDiu4hWlQRi4ruGNiUmYk++i2hXge8CBqABqOdiD0Q7SmkcilDQmFLamc5nvspRKrOvR1QiHnoLRGOZnx9VsXjR5zAecpRewgFkTqk+i61DtJWxPqoK8e1yhK9Dq8popgvwBdrUi7IdcqGojuvq5utQTbEFUnG9KFsgTOtF2c4hFOFIH9y/Iroc4etQpBJdSCU6HM4O4ea++gDi5bA4PXZYVOEwdwgAUIjs7VnmgIqDCVUMtppAtMYT8vICiPFT/PBN3ACInjE7NsWPUhFWnFphDnOIlnJ6igPIQk5p6RvjU9YO0Vyu9FE1E399o5SydKgaB5ArmvtGcQAy4XBCsgCyweGDZASyxeGCZABywamHRGu6p9F7321O66ZAlaucK04phxVvT+O272sVDtXDcXIpDH6dZTe8r2mB6uK4IdHscMFNmdSfi9ohZ2pSmGQ/8MTqbt4k/6uutn1o7FLNFfOK+yE/SFfd4PlAuvKO1QVJzdpAutqi8Cn76U2j8+2J6/LQQU/B4VNOGuZ3A1SWRAfzebrtvAtSB0OulIqxEXems/RXtR14nbWxZI6pjUvafEuXOuzLmZGqo3ZInTYajUhPhnwLpM7m0FFVc+nysn2Sb5hLnbeC9S7RHzOO2SUPve3LSPQof1vmVyJ5adbLHBE9/gezo3s5c8ivQOp8Dn1KhYgRoUBhM9ROpavbI1AzDb+C91UDEHcNQNw1AHHXAMRd/B+8cNTNOTQAcdftAdHWdwltiraB4fnovmlze3/7lAWnZ6ka4ixlIQBA5eK772JawNnK+H2Vk3H/XaJl+W+Wj96OipBg2kenaIsNsmMr7B8O2EUAkehtPQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wOS0xOFQxNToyMToxMSswODowML6NDHwAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDktMThUMTU6MjE6MTErMDg6MDDP0LTAAAAAIHRFWHRzb2Z0d2FyZQBodHRwczovL2ltYWdlbWFnaWNrLm9yZ7zPHZ0AAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAXdEVYdFRodW1iOjpJbWFnZTo6SGVpZ2h0ADgwJQ5AEwAAABd0RVh0VGh1bWI6OkltYWdlOjpXaWR0aAAxMDTrDT90AAAAGXRFWHRUaHVtYjo6TWltZXR5cGUAaW1hZ2UvcG5nP7JWTgAAABd0RVh0VGh1bWI6Ok1UaW1lADE2MDA0MTM2NzGKgGHIAAAAEnRFWHRUaHVtYjo6U2l6ZQAxMjk1QkLQKRdMAAAAR3RFWHRUaHVtYjo6VVJJAGZpbGU6Ly8vYXBwL3RtcC9pbWFnZWxjL2ltZ3ZpZXcyXzEwXzE1OTk4MDcwOTg2NzYwMDQ4Xzg0X1swXYTqW+YAAAAASUVORK5CYII="},34863:lt=>{lt.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAAqACAAQAAAABAAABLKADAAQAAAABAAABLAAAAAASEBdJAAANn0lEQVR4Ae3dXYhcZxkH8HNmkjY2KIUWta1SgqhIQNoiZJOZRtBgpAWhoPiBt4EI3iiI+HFRP6AgCBVKhH6AYLGKoBdaL8RK7eyENmy72hJ74UW9aimilXbXTeLOHF+rh2zINnu2e87Z9z3ntxDO7MyZ533e37P735nJsJtlPggQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgC4F8i9vdvAOBoijyyenTn86K4vPh322h1A07KOeu8Qqsh9ZeyvL8sav37v32oUOHXoi31bQ7E1gNzW95efnalZWVR4os+3hDSygbp8BqNhh85eho9MM420u7q0Ha7cfZfXhkNXxtZeWnwirO+TTc1f5sPj81mUzuanidXpYXWA2MPTwN/FQoe7yB0komIhB+WN2/tLR0fSLtJtOmwGpiVEVxoomyaiYlcP3a2todSXWcQLMCq4EhhRcGDzZQVsnUBPL8aGotx96vwGpgQuE1rHc0UFbJxATC18EHEms5+nYFVvQj0iABAqWAwColHAkQiF5AYEU/Ig0SIFAKCKxSwpEAgegFBFb0I9IgAQKlgMAqJRwJEIheQGBFPyINEiBQCgisUsKRAIHoBQRW9CPSIAECpYDAKiUcCRCIXkBgRT8iDRIgUAoIrFLCkQCB6AUEVvQj0iABAqWAwColHAkQiF5AYEU/Ig0SIFAKCKxSwpEAgegFBFb0I9IgAQKlgMAqJRwJEIheQGBFPyINEiBQCgisUsKRAIHoBQRW9CPSIAECpYDAKiUcCRCIXkBgRT8iDRIgUAoIrFLCkQCB6AUEVvQj0iABAqWAwColHAkQiF5AYEU/Ig0SIFAKCKxSwpEAgegFBFb0I9IgAQKlgMAqJRwJEIheQGBFPyINEiBQCgisUsKRAIHoBQRW9CPSIAECpYDAKiUcCRCIXkBgRT8iDRIgUArsKS84piuQZ9mfQ/en8jx/fN++fS+nu5NGOt+7trZ2MMvzjxZF8aWwwtWNrKJoKwICqxXm5hYJIfXQu2666YsHDhw419wqyVd+Kezgd4uLiw8XWfbbEFw3Jr+jnm7AU8KEBx8eWT09Ho1OCqtqQxyPx2eD2YlqZzsrRgGBFeNUqvY0HH4zPMJar3q687IshNZvwtPD51ikKSCw0pzb610Ps+xMwu3vZutP7+bi1n7zAgLrzdvt9j1n+/fvP7/bTSS6fnhm6CNFAYGV4tT+1/NwdXV1nG77u9d5SKtbdm91K+9EQGDtRG+X77s+n385/I+XRwvbmMN0Oj0aTv/gNu7i1IgEBFZEw9h2K0XxsfBf9d/Y9v16eoczZ868czafPyjk0/0C8D6sdGf3eufhfUXfeWIyGWfD4T2D+fyZ8L9gryW+pdrbf+qppw6cX18/du7ChXtC8etqX0DB1gQEVmvUjS50PJvNjhd5XkwWFwXWpdR7zl+4cM2lV/ksVQGBlerkNun7/0913rbJTa4i0AkBr2F1Yow2QaAfAgKrH3O2SwKdEBBYnRijTRDoh4DA6sec7ZJAJwQEVifGaBME+iEgsPoxZ7sk0AkBgdWJMdoEgX4ICKx+zNkuCXRCQGB1Yow2QaAfAgKrH3O2SwKdEBBYnRijTRDoh4DA6sec7ZJAJwQEVifGaBME+iEgsPoxZ7sk0AkBgdWJMdoEgX4ICKx+zNkuCXRCQGB1Yow2QaAfAn7jaEfmHP4C9KthK8+Efy9GtaWiuDn8peXbwm9DfUtUfWkmSQGBleTYLjYdgupfIRC+Nj5y5L5weX7xlngunT179qq/v/LK3eHvkX01BJdH9fGMJrlOBFZyI7vYcAio8O0/+MTRI0ceu3htfJcOHjx4IXT19Sem0xeyorg/vg51lIqAn3apTGqzPoviR7GH1ca2j45GD4SQfXzjdS4T2I6AwNqOVmTnDgaDRyNraet28vznW5/kDAKbCwiszV2SuHY2HD6fRKMbmgxPYp/d8KmLBLYlILC2xRXXycPZ7L1xdbR1N+FF9xu2PssZBDYXEFibuyRx7awojiXR6IYmw2tYt2/41EUC2xIQWNviiuzkovjC4uLihyLr6g3bOX369K1Flp18wxPcQGALAYG1BVDkNw9DADw6nU7vjLzPLITV8dl8/qvwlHBv7L3qL14B78OKdzaVOgsB8Pbw1PDXk8lkWuT578NTrhcq3bGtk+bz94Q3tn54fTYbt7WkdborILA6MtvwSGsU3pQ5CgEW345i7Ck+JR1VEPCUsAKSUwgQiENAYMUxB10QIFBBQGBVQHIKAQJxCAisOOagCwIEKggIrApITiFAIA4BgRXHHHRBgEAFAYFVAckpBAjEISCw4piDLggQqCAgsCogOYUAgTgEBFYcc9AFAQIVBARWBSSnECAQh4DAimMOuiBAoIKAwKqA5BQCBOIQEFhxzEEXBAhUEBBYFZCcQoBAHAICK4456IIAgQoCAqsCklMIEIhDwG8cjWMOtXQRfj3yP0Khv9VSLMIi4bepXhX2eHM4+kEb4XzaaElgtaHc8Bp5lv04LPH98Wj0bPiGjvB3JNcHEP5K0FtDtWNhkz8Ix3fXV1mlFAQEVgpTukKPgzw/MR6PH7zCKZ26Kez1tbChXz755JOP/Xt9/Q/h0dYtndqgzVxRwEPrK/JEfmOe/6xPYbVxGgsLC6/uGQ4/F647v/F6l7stILASnm8Y3r0Jt7/j1g8fPvx8KPL4jgspkIyAwEpmVJc1OhsMBn+67NqeXZEPBpOebbnX2xVY6Y5/GF6/+e8L0L3+yIviul4D9GzzAivhgc+y7CMJt19L6yG0j9RSSJEkBARWEmPavMl8Pv/W0tLSNZvf2v1rn5hOPxPe3nCo+zu1w1JAYJUSCR7DN+v71s6de3h5efnaBNvfUcvT6fTOENindlTEnZMT8D6s5EZ2acPhKdFdK6urhybT6alhni+FW1+89IzufBb2Opxn2a3ZfH7HbD7/ZHd2ZidVBQRWVamIzwvfyDdmRfHd9Yh71BqBOgQ8JaxDUQ0CBFoREFitMFuEAIE6BARWHYpqECDQioDAaoXZIgQI1CEgsOpQVIMAgVYEBFYrzBYhQKAOAYFVh6IaBAi0IiCwWmG2CAECdQgIrDoU1SBAoBUBgdUKs0UIEKhDQGDVoagGAQKtCAisVpgtQoBAHQICqw5FNQgQaEVAYLXCbBECBOoQEFh1KKpBgEArAgKrFWaLECBQh4DAqkNRDQIEWhEQWK0wW4QAgToEBFYdimoQINCKgMBqhdkiBAjUISCw6lBUgwCBVgQEVivMFiFAoA4BgVWHohoECLQiILBaYbYIAQJ1CAisOhTVIECgFQGB1QqzRQgQqENAYNWhqAYBAq0ICKxWmC1CgEAdAgKrDkU1CBBoRUBgtcJsEQIE6hAQWHUoqkGAQCsCAqsVZosQIFCHgMCqQ/HyGv+8/CrX9E0gz/OX+7bnpvcrsBoQDl+oyw2UVTIxgSLL/phYy9G3K7AaGFGeZfc1UFbJtATOX7VnzyNptRx/twKrgRmNx+NfhEdZP2mgtJKpCOT59xYWFv6SSrup9CmwGppUeJR1MoTWQw2VVzZmgTy/9/bR6O6YW0y1t/B95aNJgclkciwbDD6bFcWoKIr3N7mW2rsjEH4wzcN8/xpWn4bLD4RH2JPd6cSqBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEAg+w+5pn1GGA5howAAAABJRU5ErkJggg=="},40945:(lt,Te,t)=>{lt.exports=t.p+"static/1x1.9ee4900c622aa0c3c63e3d50e85a2b8f.png"},31611:(lt,Te,t)=>{lt.exports=t.p+"static/1x2.0b3c6d81e23adb2fc255026110b7273e.png"},41736:(lt,Te,t)=>{lt.exports=t.p+"static/2x2.eccb0acd4bda260dc8e44c4f31c1a15f.png"},57753:(lt,Te,t)=>{lt.exports=t.p+"static/2x5.31b81403e4fe24331564a423feed8f6f.png"},75362:(lt,Te,t)=>{lt.exports=t.p+"static/3x6.66a7bc628ec8abd9730964a0f24e40f9.png"},68190:(lt,Te,t)=>{lt.exports=t.p+"static/empty.ac78851cc3acef4776cc8cc78aec4618.png"},53364:lt=>{lt.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE4AAABOCAYAAACOqiAdAAAABHNCSVQICAgIfAhkiAAAIABJREFUeF5tnDusdXtVxffa5/FdgkYJiSgxSnxARBCBKBBAoLGxsbKwsbKyobGys7GxsbC0sDOxM7GysLIxsbCx8hFJiIlGTSTh3nu+c/Zy/sbjv9YB7sdm7b0ee6811phzjDn//3W2p4/9y3751tPlfrtdLtvL5XLn5X59umxXlqx7O6+ny2Xeb9u817r5fPc8799qn+36vveb4y7b7uVs02vLd83S2+c4/d7zZbs8zfHzeWfdvC5z7MXnsd/PPtftst3tl31e291smnX7/ewzry3Ly/2sf2Dd7K91c/wD+7LM+od5z7FacqyXPsbbtP1urnnWXx/8+TLnxm8Ll9lvv99m3fWyvb3+63693uYC5qQBQuAVMAAJSFyUgBmgZr8NQGY/LvY2IOrzvLZ5L7D12ctNYAFwgZz1Amq+/8K6OTlALXACdE6QCxvgdp20wfJrQOFi+lngzGsuVmAGHF34bNvv5/sCGjeD9/rMdq6Z47mWfp7v52ZdHrjGAMiN5P3VYG/P99/arxe+BJBmyYUOGwBHXyY28QW+QDFGdwLGAVzYCWAC1MzU/gAhsAycjp+lbsYAtWs7LAOo3LQ5F9083cC56OtgHJA2WKS7H/AExol5BQy26MLLuPlugQhjfBPMOPabdQAupp2WAPTANQK8v2+fdZuib5a3+2/vOlgXPTtzgYtxXBg/VADmovXewOmY+SKHath07/WLcQKobOSmAGgYSUjqM+Bl/bzzdn4D8O4cHuvOE4IN1QH1FI6wyKFsEK5hIuEJE7Uv56/PZhwAKvS5gQDO+ehmZD1phmMBa27i5Z5rmeNub/5zAtoMc1g6/0BvnzhowxIzUIwSbQcwQqAhSbjOsSsclfsKoMOcYwlNM61sDXAFFMYpfGfBHdbJhmUKO+56LqSh+ui8VxYZID4nLwmIgjrfvQCDYXPOw2QtWU/aEPNY8vuwld/jRia0weHlnf/etwBhMQhdxTTYx0XzhTkIESAElOsMpBN3Qne2O8wNNttvYhDr5lgJQ0L+FfOyzw3gmlthGuFpYHbltvmq5rcCGaDEtGHNtfkrobmEIEyTGHCOLMu0iIJCkd/ixs71Kx/ODbwlbSl1gcftg/8rxvFBG5XLvDNfvnNwEqdZR46bEGmO0w8ZCDPOeaFCYlVNGCvv+WTFTOWy2V9AGTCLBOrNTQSo+T8B1iR9CIQBgpFmhfNV2EWYTnJXGAokq21DUClHYQfjQgzlRgPna4AUyf1KPxCBc5nl7Ye+MznOSbK5TbTWZ4en1uvuAA5fjNIBqIEVOPps4JeFEStRXL7HYa0wRTU5hhwXAHWMBCLbx5Y4PKKuzTMCKuApgSdEw74meoWjxKLA8t7X4jyI0nLuvjYJo0L07eVW5a3IzRJSHVEH43703R1UfWFJyskNBhQfY1Vy6M3FPxI2AMLFEZLcWYDjQhPeCmG/B+DDjsCyqG9DWGB5/UWqyucCF5AUslZT1BVQzR4uNmA+OqELkKqqQHZeW+HZ3Mc5AxzfpeskDMdehThXhavzsS1WBWv2u33ovd0xzQWGadBcOQ57wp1pwoTqsGheD7OeixsAfdeelHvMRDNwMQ8LIqWO31viwMlaHDbClfCU0nKyFgDsnNTuLkZYYYSaopoNRQNnhkXYBNgRwgpNsY1wbo7LzSaHCkByGtuazx1BtmkFMATaP/y0W47jyGsISYK6Mw3XfNkA5nxTmhuU23zGSN8AUGHt7Q3j7/N1UlVyndlmb0e4ein1HbB2KgcZ1AB5UljdaIEKIDamtSNeX6bBTkcN17M8apK/7dQIwP37upYjJGPTuOn1nBHJ7fZjz2YcJZB8Dyg70S7gzjlPdysnEOW1efTdo4q45rOTqRnqigKWwjwYOexLSFowAlzCdUMkhlm3KW8kRsk7Mp/LBM95C9QkdM5TpZKZpxQBwzhPqgCBnvShMCfKuCFmk7yp8h0hm0iSowC4EEHpCHH4yMsuJcKhT+6SopbmvaP6Ycd/f3znRAinWeoOyWWHcWKv7Yl8UTyca1uAH1siYeCkHKpHbmuuM4NgnG0IDKrxrbKmDIJxFYlXOc3hqhyuyDHz7Fk5R9/snfNRVQBw3iYCkG/lMmKQRQRH4Pb2o7cdWUcpDQpqFGkP9VsIX6WyPmlynIQD4GCYDDB0nx9cwNkTuiFwDl/8HOtZl/cLPMKV8CVvUUUkBPW7nCfsg4UG3fYjoiA7YmV0ncsN5WZRmsG0/KbACeOU23zTVQUBqupvqhyfs4ihHGfhYvv23k++7Hco1eM2F3ycnFUon9spWCGRnKI7berLluRu+2727kVlA5xVDJaZ+m4AwLI5cXLe3GWF8IAngCbPNYe5WwKgsDBGvUsAVIpwQS8Gpq6WrWk3R2aa6Gk11G1OF+SyZeaVSgjZ5Hfl4OTk7/60gbs8bFMWcvdyp3V3GxrOGab7rJsSx/UbwKWoF4AwEeVsqHIxZqbv9kkwVs7Az3k7irpqWbWWMNqHAV41o26qAajxlaqSOh5TT4tx3MzkZOWvs9BV/dnP1Y6aG+3mcL7cPAEccciN1Xl+52cC3AAmAOdk7wZErIX8Uls2LZDjwNcJTyiICSvXcbKpDOSpopyqKKLIoj4gxhy3DNMddTi4fma/6X0BoASpnq7RYB9nsTLjuJESj1YSqnT8e21QWFVtjezhSBdEQZilsIRZrXASAbPPjeqGbs7//dzkODX95rvmBMlv1ylz7vhhil9tS2chrntT6LKdEw0LxTzYmGQqv2cPuHJLFG11R5KMVXKtdpJPmBx3U0fCvs2JnTAnF7tHZ/Vmvf2cgeP3UwVI9Z2/Vp5VyjBwbaGt9/VytUox5gC1Y4+m6Tqyoffb/3zitgMYP+xcB4BXtWSuYiEAzclS0kRlJR4ymoQKd7JiwYkSAlbbZWliT2yAfTdtAcgn3GlyHGyLnyNMOUHlN4ByLekKZnxd20xcKGIQb7nOR2JFiBKGMM7MUXEucMKo1Nv2kI6ANmcv24TvNFvJeQB1m/c3mrH7eFYM/X/9goGDXQAH+wCMXCfgyjqWzXnYlnPZQoiXafVLi3HJRyiWFDfq1BJGfmkuKEl3l/m119s5Lwyw8inMi+o3bGt89ZnfKeMMnO0TzHK+a77Vd6uaqUDB8AC3WEZY8jJwL1oOeFm3/ccvvuz3FQfAIlyHdYBWEL2cUBjllVop/xk8gfmYPNdkrVKIvOLct8RBiToqJU/UMox9zTjlPkAU40jWk+MWwwrQ4eOc21whuJOR8J28ZfAo/eIXpY4AFO94bnOl9LtNONIPfFEuc3gCmIAbcF921g3o3/5U7AiqGpZdsSYBjhynECZ0E7KwEXDdu0/tJwCjcilvHNpclPOO2jo6WYCqCcWOOITOJReDNnL8YjkDJAm9JQYViKhnSy8V5mwb4ACM8JIYWB09uMT5PA/76U7P8QCEsgKQwhHgAAiW2aw/pwG7gPv3z7zsBeeeExRQp3yHwoqRs04hOv8bYN3/j1kWaORJ8gkMALDmwQDXWlEnHRUk17V1zjEKU4OqC8LnbRYCqypCNevUP7PVkeprjITtsRRSeNgcn5gmqj7L1Ebh5Rc9HuJQJPk3RM04GHiE6hGy27/98m3novFw9wOSQQS4ef/GOW6FrxLxnJ+Y5/DlWLd6EARyjFloJfbFrFqS7RqsAVgbSTc0UV/uPOtmm5awDBBzA1ZeS+t8vvtaLwdLxDIDJ5bLWiQs22xYTdVYDeWz9yfxO5cB2sswzLmsLxj3bMYhEIDJ+f7z516m5BpWwagAtw2zCE+BBuPIawGKML6HbQCcpezM6rzy/mxMSdC2Bw4hhwlJ26WMmWYDahMs5omBGGDbIRf3ZirJnvyFHVHTMS0fNyb5Db6XXFovxneTa1nnEFR/kHxFa38AEeMIUQaXBpznMK3iAPOAz8ycm/9Pv4I4uHXjHDdAIQ6AJ/YdwN0DDsBJRZ37WNYHWkBY1+TdAju5UOClBpQlCCPFCDPQBph8xnuPOXRAWKxM2MrHzXE35c2Iglw/NwFTa5D0fdgg6s8Mhh+ezAxSKO6EKZZjgAuAMPFF5wQTAY7PAe4ff/UADiYJKIFBTgNIQDQ4AEV+4z1hjLpKSMK8MtGKG4PcSqNmVZ3WhJUUsMU04EVZJR7kLuxI+4RUIbEkOq5gJbcppwHcoaKuiZMeAI7Rs+YwAUXYNUwJWQMnBrJc+Q6mzXYxzsKx/cMXbjsXTHjCPLOMMAQUg7aMcYUB0JILC9yhvqhtmPeqXOMCYVJdvT1U2ziyLO3+ypY0xyE6CNERqgrtlFFugwHOqc6s3ZAYAIYTv5nmC78NcHo/+4pZFYHYDdQV4J6T83yMjwXU7e+/aOAIOTMuIUpOC3CqIoZZsFEgD3ACFMZFQMh59oNH7gNMjw+0KVp7AeMwps5Hbk17fkk7wDKto6wbo1yqbAy68xcvh7fHgv1ZjVIU+fqet4/L1xQN2EVOWwzivRn2rBxX4IZRAhTGWTSexTyYVj9nAdn+7kvPO+GnCx8huA9b7hueABTg7h8oxaygAmz2FYASFVQ52/i+5QPHwMpj5aXQNUtuA4B6fOui4+WktuS6+d6MObS9b6AI2aMCURVwzpOZXtH8dbYUgCGmLREIoAndZwALUC/7vBfgBq6hyvduf/vl513dkADwQJgiDAlRrzfD7h+vEYbXwNnGxM5EkS/KfeQlfCD57nvdvr2XCnMl9NiUNe5gVVWBL2sDWB0PmGM19hrQ03SUJ1Sd6xqzJvamcCPsGqIOX4Uj4KCXsyScyzBUVdvCVBTVduXJOe5vvjzikPADAAlAgBJ4YR4MRDEfak+GcbDz+oZjzDxCdZvPAFVBcc1L+NNXC3hq+8AcQDFzPMpWO0K4DVPFIkI1Ia1RL44L2zqkyOc0P2HXUV/ClmF2jKzFIKoZlQRUARdw38YEi2EDmv2bjTCfWAq4v/7qhCqigDgoZMljZg8hegcwUljvAzsLKOsBSgAuhppp2JkroR2h2eIRMdOruzwh7DrSKul5cTQNKZVSmUgk3Jmx7wtwmV93dFbcvVBeIh+lm3GEa5XR+wCgFbJLAPSxBvK9sPQA/th38vFfffXEuDBGuU61afycQteKezDPIazqIsKCWVZbKp8JU4GefMfkFoC8F+NqbGM3VB65zDJ7ML98dk70BBwYyLp4vppYFFWsavfCVkKFegDaJ4edgTIzDZQAme3PCsvTflHe5zkfA4pA2M9tf/m1yXHkoTdlmcNRoCTX3Q8z5N8ESPet6hoctjsXhpECHsal7mWbXg5tjb6n0+L8BctgoIGDcEcjs+qbUAXYUUyHofNV2z0uj9xLU8G+EnvZdADDNvalcH8ZhrH/AWBNMcpqttooIywD3F98LT4u4UmIPQjII7/xHgbesRSAATl5j5xYRVV+fMf5rl2WekP1+WJ51HHmc5gnIFuCzWmq/GJAmjaXVDcVBXmNBqMYBdPcKKCl7bA8gBODuOjb+xYG2PQ9IercZSb1WH0OAw8b8r74aUbOjf3zr0+ops/WENXFx58JlITfnVg5bfWV6+zvlBPpmAjQmGkAUnvKDJNys02AufZ1q97DkgBHDtN4QUa9GFN1F3dAE0gsa2hhWfKPiu+sl/eCcWaKGDfq6FCzDTFrzDzXoN4m5Z19CyTHP0k8EAiDT8kFmNufDXCEpuyEws0Xb/vhnAWIDwm1giifl/AGMIV3mEitiq1RvsM0a2ljvfp8AtRVxj2gUS+nLvWoEqUqQMLEAWgf4BKeZliBA5h8TpkE0zC3x8UWnJZMgPaeFXNeVlLnLlTW681EfqfbmyPZtv3pN0ZVufsKRxhyc9k1avmQvNVkb/Y5jM1KADNAZavsSxip+rZhHHVdTQMAnVDUvm0uMJsA9ilk54O8GgwEHIZJnNMOf2ZRaMuHgtxA2JO56zGBNQxcoVoxiKJ6f1T2/csTN2An1zlnSjjms7wdjJvl8/zGy9zA7U8K3FJMl1W9YOe15LsAJDvC/u+MaMRmyL6EcQXjvjcjCt1uC/aFQZjmOPlAGKjZlry8XV3gGFpD4JzmITr3xcg3vARow1MXmUQfZRVrTvmNUK5ns30hRPlOM9HfxbJAZr1u4gD3x9+YwZrmJRXxR6gSrrBObApYYtQbAyZWwqSErMPbZZfBP5RaagqAYh7jthGUqi5AMqYL+7Aes6S16Y6FweIfXq/AiU0KL+rRsEQXNkqpri6sqWklPGe98ljNrZdvVW4ZOB8Dw2AauQ2WOa/5t/x72x+JceQ4QjReTaCQk+bCMbgn02vAsCcG4JWQxL+ZebYfYlkqEnVdClz9XcUjDBQLJRSEqOGCddxlfVLCL2CEb0yvAPNFNnwFQryew+4QBQPhEutZ9Svh7HzGelrqS10V3i6/OB8A3v4QVQ1wynEzvUFl1TksBV7CE8AWwybHRU3r/ZZ4wGLAmaW2RU1XZzniQNjWIKtdD+My+1LDhDBs8srtZsaRx5znHLxSTwHQxA/77LUAuYop4G6pFLRtgJF/M9MOMQAwf67pBUArbW/KiMMffM3Dg6uMGuAW82JmCV+xq1VBK4UsxUouGEBTvrXKcP3Leo+SqXJQTpuGAXlyjK9uXBRYJlkj+NQOZplewzjlsoSt8hAciaIKpABG2L7Nkzor/KgcwjiOxfi6FR6ABKT93CsgOS416+rJ0Y/7/V8z46ScylcJr1PYNemzzcyydTErq8hhZL7jlcAAXA22mOf6dtmgpgIZZKZgkN1GHDIGAeNe4tVcCThUuRAuE5ti4LhIVwwHoAAGd2w52OZwpGJw/jO49nUGFONsIK2muUnKbynyv5ladZVTyU+1IM1X8nhRSYES28HFw8Tl/WI/Kg7nHId1aZVR4VAVEpZqNE2MU6mq6sFzNQ7lrH9TeCYruShPYlfoptCf45cXE6hO8D62JVjr1axXTXvsS9jDXnlFqazB235PwM3dLXuUkwDGfq6guDviXLfWBcBjH7OuAKnAF1iuLh5R6SUYqTaynaf1XElMfRvg1A4njynxW80Koi/8BFgUD/7Q8RWLlOPCFl38IQYHuMPFlHAwDNAMdpg23yGbQtmW7ovaSr/7FQ/WNOzIMWYUFxYPd8pvqiAIPfKagHDV4Qao9wegigDfxWeXZd7nAbYGMFUdGknjiRgqCIBDUfFxiINNbr1a3y9AAtjbsKFhR2jaerhe7WeHaX1a7Uj6bQFWwNXHNb9hcXIeAu53pgMsNS1gAg1QnJfKMoWc8mC3jYdTM3NeWda/mV22MQ98T0K8N+Mhzc9DFMxUjseKMFvKUxM8h6RMs1+zxaifEhvEPocq/8hTTwnLszd7ZowhgHZfTLHV1UzzMt+ZNpO+Qyy2mKhW/e0vuTtC89FMq29L6RXj2xCrES6TrMC2JQ3th5lDIuM8r0duiDzhfE6XZQGHlTkZY+c3wCNWXWoVOBfhLuo7ROc6slbCF7WA0wWaaeecRsgXTFcTFouyk0EaAxkP2Fy6+nkGefutjHJ19N6F/lHsH3nODLTHc0VwgAlwV217lDmeZcUj4auwh2kJ20OMzNqdG5SJjcwX8X/uza2+W9tJ7bPJ9dvdu1wCJlcG0lvYlNA0XCgmIWfldW6j/+HuyPfeBCtxGC7gnDO5EdtvMiB9MsBiHJ7slOsA8iGMtHAcrXWYRc6CRV4mTAWY8xrhqtz2ZvJXgauJjs/rzACNyTK6JVm12dVUBUK2baI5cYtEQ7TlUIBL2AGS4fB+b6cjUiANQMI7oABsxxm0/aTELf0qINtvMAVCBhRbkPIooJlRVcaqI8xxdQGgjyR3gTdMG2AADsZ5CVgGUDdkMc5tK3dVbEHuND0ihb8YR47z+INmRgLgaie1ewGoVsoW7GZVP38/48TESfTOgQ7RI3TrDcmlrlVldSQQKHvqXjrAv/75DEivwjwAqeAPcLyvzQirCM2yyUwjRAMcAAIkIUt+43sEIIxr9ziD3AhClNrNTcZSMb8Gzsr6usPbUSwux3VpOhtaHjWoyymHF0wBVL8SymXm8n4OS6tuGgK8l61JBwawAe7rn03JJX+WwZXFOA/1tbkps6se3NW5bAACmINhwzRaTQMQTLyjhR7fRzvdan2YZQ0hpvD33OORgoaqGpltkyMSh49TzqvKiRXpzgYU5yVXB1LCYc8hEgaQvGamNieeuyMWAPXngGymSbhbnDp43m9fmflxaufEbsijBbjVnIzneoQ183pEJAjXN3evQ5NtAAagGOiAJd8GwBpqPG7QRbYkoiDgeDLHOU7TH+ZUNTdYuYiQxdNxx90af6u61QneLe4jZK2kBpTc9iSfd4Sxs2ErCKB0/qu6tjKRUp86Lp6QM8B98dMzlVV2xGaWoTi5/8k3fCbPceEw7Rx6gChBODFO/bkAxBIRkfXgplADd6JiB7GzTXNMaGCq+0tLCf+rbpyAcbie1BVxSOlj8BxeNCNbi9pvGYwqLOMJBtNM8zZ/Bnivx44Y0KcA1tpY/bgC9/lPDeM4YeUxl0awALAwsQKR8JSRjaEll70TUUhoSjnZPusdunMDMiqmXJlRMzUzM8itoURuFuvohsjHTXpQu5xRrWHYzdMZVHopXBAM9+BccDthOwcdIWvFPIWo/FlZeLDtKfvUABfAV6pLk0EtqeO1/dInh3EJ1QKnWnMpYiqFMi5+TLktDCN38RkgAA4ACVmNTdS/sR0l1tKpAQA7704DzawX4/BvIIlqep6IGWcxWAPPq3a0IEhhFcrteJDJ3BVxGJpxCtF0Pxixb/4zC2Hp0QioqT6MsxsO2yc/4VBdPTfaPbIONrWuVwk524vHyWuyIAAg4CwGWJTaEa/PfJJ4PIlDPOCac8d0Mfk4h6r+NI9GtchvVdWMnQrEY+BZlQRz2xSiBoalgEq51Sal85VDd4XqAs7gGlS+xcBKHAT6YVf4lTZQt49/fOxIxhoIT4dmmCLzakHQMiDoMzlMSyf75sD7MI59Oh/F+S1jqwppCwIMVXjKhgxgGl9FHHC/qVXDNrPP4epJf77zna/b+SD2c+3eRikzVurRrkMgDOZhYc457wCu7fSWZhGHn/15GOeC3e2gFOXkMZQxoC0ABUgYlTzn3Dcqi0/7gHPcHQCqckjneI7rlApPUuSz7Y4NMI9SIg7DOqbor1q1IYqn8xgDTcbOjmRUXwPQyT9ucYeBVcowkv1WE3OFr0F+LSBexz++10yrXeH3puT62Mc9IC0W6e4nVMUiwEgrKCwE4KonLJJqsu+IBP4OwGQ75OEA/mi5d1L2NgBLkPhuPVvh4cFXjJsRaT+e5EFjt5ea4zzVoRNnjvm5DLzw0EeakzKxKK1BUDhqcOYAy6NbrJulhg+7LxVGB6TPap1a9ac+4baSOxdcSMOz5dNcvEqquVh5Nyd1K61typ2Ydht/N/vMUsyTeLi0cp/OzQFVCfzW/I4Bm3lw+Lz8DREqBxeqKblkR9wZOZTVua2huiYHzkXL883YqFtBnbbwbnJcjHEalh7kmX1Pansu18S4UW+BLttzjIRtHx3gVHcmV2FC8WgNR9eZLtAlGAOaJhjKdjTXwbQyDnANHIKgZkHyo0ADpFQMmiJGicV6PYsFkHfGjXIrbSXNF1G14Bx3TLf3+2NA2ibYg8pHwrcoxOymE9zcZsX9Qbkv4xIyOml+Kn86520/MU8PthnZaayAo8k0KtwNnAUg3o58RS5L+VWFlV/D13E8IRrroXkmeXn+cHKcGqiwkMFoPyG4hXF6NCnGt38BR488nixJZ4r3UaKGrKdAUEoBGAM5MxqfcPRAtUO46lnPt4YL1baqGLQOrrq6h7f9+CcNnJRO7W9fuJO6wemIPsn+kYtm+wCntjchHCUV8ALOedAzngyUhcFt9h80xf+6/hQQgBGtbp27C3x0R5Tb1GaKFRHj+ryVQ1WejgtXhwPoAM5Fe8FyVXGMp/ZzO7ykgnrAmuHzGO32kQFuTYHgzkdJyVv4NcBTnlotI8AZUAhVqbENb2c0kePE0HeYbX4KzZRbniLB2ILbSvo7ALIjVlXNCx5RuN48POgw9QxMl1+HQKypWQGq83+pBlzLzrR9AUwuYziw3eCOHwRghXVr1fNsJY5lfQe7M1Yxa7YPT8mlGUcZ9zRwUcowzm2hO4WujW1Y1tKKxD9gasjwzDi+t6ITkdCAM0C325uxVNkRwrWzlIYzFPhtl+tPCJV5rzrBbit15mVnKwEYVUArjVcGWHbmaH46h70r5paVnbLalpWZ7LFbltuHPt0na1zke84bIcb7l+XjAM6gZlqrGGhzrImGDccPuDXlHBdWBbyKgpqYAswvjTOgsjLAlFrDPB7uCHDnpwo7SHMWiT4yqSJcF9/nsQDD3ZOGKNO5AE2lFNalrah4PDP1KNM0S3MJCoBn7siPzPOqHW3y3JEO2sAMT64xOJ6JSWUgA4slAaBRTuWvCc0HHrmcpYFM3oz9aMdX80RkfF3Uy5JITWdka5aqIGR1PQV/mxO9RiQ0WRBboAKf57Rc7LszfOQ28hnG+O32buraVhIZLw24BtrTt46J1J1waPXEgsgHTrPBlsThvf3wZ553sUP5CGPaUDWT7MOS05S7YNSMgQ7jDI59no0uALqjIm+W8PTUsNoQRAVV9cxzzVQX63h0idoe/5buyCtxqI87F/utGJr3MhBD6Kqi+K4fBw8DW4q1LrWIOPfBxGOcwc3R1d9TL48wZVK3gdw++NnnXY9SCjhfEPnKRb8vWGooobAw3M/zqDBMtmNymsPabHWuc1UgG9KclpuwnjQM49SHC3A0MflLNuQz/+eH22BPG5qqHpLjmFPiRyTJZa0kHGZmkOfv6nFwLIZUFnArEuznbjLeT22jfcJbQ4ZHW57vphUgoUplsn3gcwauYwEaPBFYthQsFYpZZw9GdxfG2eMJtPg2KeVJQbkZOj4CBKv53BnoHoCe0CRs5eMMmObdyINOfJC9AAACCUlEQVTlDw8o73nEy7OY5mLneQc/BegHQvSopMK3avldqep6iHcEwLMyOz/EzOqULgOHAh9VyT7H8N24OQvN0+VdfNzjjHLZV1UUXgPnR4vOOcuW5QrjMK8qwVywo7h60ibGd5letktwrMgMAWoMdb5757cp7BWqLBGHKeaZLkrlMP04zZNLN9Y+zuzSk4FiQquJ17nO4ebSywB6/odnpBsgRrOswJ5MqHCVODgNYIr7GIAGomfduyzvvvB2xKFPBebi6/RhFxes/MRF28QqXzUvalxh2BDDrPUJVQEqb2jW6g8i6GnsCWMqBDHPxT3+zTMx56Xi3lPz990tdOcqF/f9u8FlVpucSuQCyA/04s3MkuMhOJtll2MegDE74RS/h4VxB2ZA1uiXb4z9pC0Jfb9t47FLlT7OcUrqgJWQW7WlQEu5lPCUmRWoFgiD625Ip/lXTfu4ph9Ht6r6+a6j1JK3Y+b5nKIamWLcMUTIBa8qIsJhe+KLPx5Jyqxz1p+6xFVIhXmmORTIPYBZSYHLLO1Dcv5uDzVe59ht+8qoqmYrhUly9FE+qaIBkxIGEPszNwasnIcYEKpV46NycCoweH75zw5R3PuRyusYX6oIdTElCH6SBkD8t5ccji34O3ijUX6F1lGG9fGhPgWD5bBglG3n5kAfdvNSz6jKu/X7zMQnCcicx8159P8BAmE/KjhXgksAAAAASUVORK5CYII="}}]);
