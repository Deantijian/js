"use strict";(self.webpackChunkmingdao_web=self.webpackChunkmingdao_web||[]).push([[3740],{13740:(ae,L,i)=>{i.r(L),i.d(L,{default:()=>te});var h=i(88239),Y=i(54208),I=i(88106),y=i(70801),F=i(26581),R=i(12424),G=i(46593),S=i.n(G),A=i(85105),C=i.n(A),k=i(99663),B=i(22600),T=i(49135),x=i(93196),t=i(67294),M=i(12423),H=i(47426),b=i(81274),E=i(59911),O=i(93967),v=i.n(O),ne=i(28283),_=i(30381),f=i.n(_),g=i(29208),U=function(D){(0,x.default)(d,D);function d(o){(0,k.default)(this,d);var e=(0,T.default)(this,(d.__proto__||C()(d)).call(this,o));return e.saveBaseInfo=function(){var a=e.state,n=a.isError,l=a.baseInfo,c=a.errTxtInfo;n||c.length>0||S().all([g.Z.checkSensitive({content:l.fullname}),g.Z.checkSensitive({content:l.companyName}),g.Z.checkSensitive({content:l.profession}),g.Z.checkSensitive({content:l.address})]).then(function(u){u.find(function(s){return s})?alert(_l("\u8F93\u5165\u5185\u5BB9\u5305\u542B\u654F\u611F\u8BCD\uFF0C\u8BF7\u91CD\u65B0\u586B\u5199"),3):E.Z.editAccountBasicInfo(l).then(function(s){s?(alert(_l("\u7F16\u8F91\u6210\u529F"),1),e.props.updateValue(l),e.props.closeDialog()):alert(_l("\u7F16\u8F91\u5931\u8D25"),2)}).catch()},function(){})},e.setTxterr=function(a,n){var l=e.state.errTxtInfo;g.Z.checkSensitive({content:a.target.value}).then(function(c){c?e.setState({errTxtInfo:l.concat(n)}):e.setState({errTxtInfo:l.filter(function(u){return u!==n})})})},e.renderErrTxt=function(){return t.createElement("div",{className:"Red errorBox"},t.createElement("span",null,_l("\u8F93\u5165\u5185\u5BB9\u5305\u542B\u654F\u611F\u8BCD\uFF0C\u8BF7\u91CD\u65B0\u586B\u5199")))},e.state={baseInfo:e.props.baseInfo||{},isError:!1,errTxtInfo:[]},e}return(0,B.default)(d,[{key:"updateValue",value:function(e,a){this.setState(function(n){return{baseInfo:(0,h.default)({},n.baseInfo,(0,I.default)({},e,a))}})}},{key:"render",value:function(){var e=this,a=this.state,n=a.baseInfo,l=a.isError,c=a.errTxtInfo,u=c===void 0?[]:c;return t.createElement("div",{className:"baseInfoEditContent Gray"},t.createElement("div",{className:"Bold"},_l("\u59D3\u540D"),t.createElement("span",{className:"TxtMiddle Red"},"*")),t.createElement("input",{type:"text",className:v()("formControl mTop6",{error:l}),defaultValue:n.fullname,onChange:function(r){e.updateValue("fullname",r.target.value)},onBlur:function(r){n.fullname?e.setTxterr(r,"fullname"):e.setState({isError:!n.fullname})},onFocus:function(){return e.setState({isError:!1})}}),t.createElement("div",{className:"Red errorBox"},t.createElement("span",{className:v()({Hidden:!l&&!u.includes("fullname")})},u.includes("fullname")?_l("\u8F93\u5165\u5185\u5BB9\u5305\u542B\u654F\u611F\u8BCD\uFF0C\u8BF7\u91CD\u65B0\u586B\u5199"):_l("\u59D3\u540D\u4E0D\u80FD\u4E3A\u7A7A"))),t.createElement("div",{className:"Bold"},_l("\u751F\u65E5")),t.createElement(b.Z,{selectedValue:n.birthdate?f()(n.birthdate):f()("19900101"),min:f()("19500101"),max:f()(new Date().getFullYear()-18+"0101"),onClear:function(){e.updateValue("birthdate","")},onSelect:function(r){r&&e.updateValue("birthdate",f()(r).format("YYYY-MM-DD"))}},t.createElement("input",{className:"formControl mTop6 mBottom24",value:n.birthdate?f()(n.birthdate).format("YYYY-MM-DD"):""})),t.createElement("div",{className:"Bold"},_l("\u6027\u522B")),t.createElement(H.ZP,{className:"wsRadioGroup mTop6 mBottom24",data:[{value:1,text:_l("\u7537")},{value:2,text:_l("\u5973")}],checkedValue:n.gender,onChange:function(r){e.updateValue("gender",r)},size:"small"}),t.createElement("div",{className:"Bold"},_l("\u7EC4\u7EC7\u540D\u79F0")),t.createElement("input",{type:"text",className:"mTop6 formControl",maxLength:50,value:n.companyName,onChange:function(r){e.updateValue("companyName",r.target.value)},onBlur:function(r){e.setTxterr(r,"companyName")}}),u.includes("companyName")&&this.renderErrTxt(),t.createElement("div",{className:"Bold mTop24"},_l("\u804C\u4F4D")),t.createElement("input",{type:"text",className:"mTop6 formControl",maxLength:50,value:n.profession,onChange:function(r){e.updateValue("profession",r.target.value)},onBlur:function(r){e.setTxterr(r,"profession")}}),u.includes("profession")&&this.renderErrTxt(),t.createElement("div",{className:"Bold mTop24"},_l("\u5C45\u4F4F\u5730\u5740")),t.createElement("input",{type:"text",className:"mTop6 formControl",value:n.address,onChange:function(r){e.updateValue("address",r.target.value)},onBlur:function(r){e.setTxterr(r,"address")}}),u.includes("address")&&this.renderErrTxt(),t.createElement("div",{className:"mTop20 flexEnd "},t.createElement("button",{type:"button",className:"ming Button Button--link Gray_9e mRight30",onClick:function(){return e.props.closeDialog()}},_l("\u53D6\u6D88")),t.createElement("button",{type:"button",className:"ming Button Button--primary saveBtn",onClick:function(){return e.saveBaseInfo()}},_l("\u786E\u8BA4"))))}}]),d}(t.Component),P=i(86515),W=i(36021),V=i(66344),z=function(D){(0,x.default)(d,D);function d(o){(0,k.default)(this,d);var e=(0,T.default)(this,(d.__proto__||C()(d)).call(this,o));return e.state={baseInfo:e.props.baseInfo||{}},e}return(0,B.default)(d,[{key:"updateValue",value:function(e,a){this.setState(function(n){return{baseInfo:(0,h.default)({},n.baseInfo,(0,I.default)({},e,a.trim()))}})}},{key:"saveBaseInfo",value:function(){var e=this;if(this.validateContract()){var a=this.state.baseInfo;E.Z.editContactInfo(a).then(function(n){n?(alert(_l("\u7F16\u8F91\u6210\u529F"),1),e.props.updateValue(a),e.props.closeDialog()):alert(_l("\u7F16\u8F91\u5931\u8D25"),2)}).catch()}}},{key:"validateContract",value:function(){var e=this.state.baseInfo;return e.snsLinkedin!==""&&!V.Z.isURL(e.snsLinkedin)?(alert(_l("LinkedIn\u8F93\u5165\u4E0D\u6B63\u786E,\u8BF7\u8F93\u5165\u6709\u6548\u7684URL"),3),!1):e.snsSina!==""&&!V.Z.isURL(e.snsSina)?(alert(_l("\u65B0\u6D6A\u5FAE\u535A\u4E3B\u9875\u8F93\u5165\u4E0D\u6B63\u786E,\u8BF7\u8F93\u5165\u6709\u6548\u7684URL"),3),!1):!0}},{key:"render",value:function(){var e=this,a=this.state.baseInfo;return t.createElement("div",{className:"baseInfoEditContent Gray"},t.createElement("div",{className:"Gray_9e mBottom24"},_l("\u90AE\u7BB1\u548C\u624B\u673A\u8BBE\u7F6E\u8BF7\u5230 "),t.createElement("span",{className:"ThemeColor3 Hover_49 Hand",onClick:function(){e.props.closeDialog(),(0,W.T8)(P.Z.url({type:"account"}))}},_l("\u8D26\u6237\u4E0E\u9690\u79C1")),_l(" \u9875\u9762\u8BBE\u7F6E")),t.createElement("div",{className:"Bold"},_l("\u5FAE\u4FE1")),t.createElement("input",{type:"text",placeholder:_l("\u5FAE\u4FE1\u8D26\u53F7"),className:"mTop6 mBottom24 formControl",value:a.weiXin,onChange:function(l){e.updateValue("weiXin",l.target.value)}}),t.createElement("div",{className:"Bold"},_l("LinkedIn")),t.createElement("input",{type:"text",placeholder:_l("linkedln\u4E2A\u4EBA\u9875\u9762\u5730\u5740"),className:"mTop6 mBottom24 formControl",value:a.snsLinkedin,onChange:function(l){e.updateValue("snsLinkedin",l.target.value)}}),t.createElement("div",{className:"Bold"},_l("\u5FAE\u535A")),t.createElement("input",{type:"text",placeholder:_l("\u5FAE\u535A\u4E2A\u4EBA\u9875\u9762\u5730\u5740"),className:"mTop6 mBottom24 formControl",value:a.snsSina,onChange:function(l){e.updateValue("snsSina",l.target.value)}}),t.createElement("div",{className:"mTop20 flexEnd"},t.createElement("button",{type:"button",className:"ming Button Button--link Gray_9e mRight30",onClick:function(){return e.props.closeDialog()}},_l("\u53D6\u6D88")),t.createElement("button",{type:"button",className:"ming Button Button--primary saveBtn",onClick:function(){return e.saveBaseInfo()}},_l("\u786E\u8BA4"))))}}]),d}(t.Component),K=i(20845),X=i(88902),j=i.n(X),J=i(96486),Z=i.n(J),Q={name:!1,title:!1,startDate:!1,endDate:!1},w=function(D){(0,x.default)(d,D);function d(o){(0,k.default)(this,d);var e=(0,T.default)(this,(d.__proto__||C()(d)).call(this,o)),a={autoId:0,description:"",endDate:"",name:"",startDate:"",title:"",isSoFar:!1},n=Z().isArray(e.props.item)?a:e.props.item;return e.state={baseInfo:(0,h.default)({},n,{isSoFar:f()().format("YYYY-MM-DD")===n.endDate}),errorList:Q},e}return(0,B.default)(d,[{key:"updateValue",value:function(e,a){this.setState(function(n){return{baseInfo:(0,h.default)({},n.baseInfo,(0,I.default)({},e,a))}})}},{key:"updateError",value:function(e,a,n){var l=this,c=this.state,u=c.errorList,s=u===void 0?{}:u,r=c.errorSentry,m=r===void 0?{}:r;["name","title"].includes(e)&&n?g.Z.checkSensitive({content:n}).then(function(p){l.setState({errorSentry:(0,h.default)({},m,(0,I.default)({},e,p)),errorList:(0,h.default)({},s,(0,I.default)({},e,a))})}):this.setState(function(p){return{errorList:(0,h.default)({},p.errorList,(0,I.default)({},e,a))}})}},{key:"getRangeTime",value:function(e){var a=new Date(e==="max"?new Date().getTime()-864e5:new Date(this.state.baseInfo.startDate).getTime()+864e5);return f()(a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate())}},{key:"renderTitleErrorMsg",value:function(){var e=this.state.baseInfo,a=this.props.type;if(e.title){if(!/^[A-Za-z0-9\u0391-\uFFE5 \.,()，。（）\-]+$/.exec($.trim(e.title)))return a===1?_l("\u804C\u4F4D\u540D\u79F0\u4E0D\u80FD\u542B\u7279\u6B8A\u5B57\u7B26"):_l("\u4E13\u4E1A\u548C\u5B66\u5386\u4E0D\u80FD\u542B\u7279\u6B8A\u5B57\u7B26")}else return a===1?_l("\u8BF7\u8F93\u5165\u804C\u4F4D"):_l("\u8BF7\u8F93\u5165\u4E13\u4E1A\u548C\u5B66\u5386")}},{key:"endDateError",value:function(){var e=this.state.baseInfo,a=!1;return e.isSoFar?a=!1:a=!e.endDate,a}},{key:"saveBaseInfo",value:function(){var e=this,a=this.state,n=a.errorList,l=a.baseInfo,c=l===void 0?{}:l,u=a.errorSentry,s=u===void 0?{}:u,r=!1;j()(n).forEach(function(m){r=m==="endDate"?e.endDateError():!c[m],e.updateError([m],r)}),!r&&!s.name&&!s.title&&S().all([g.Z.checkSensitive({content:c.name}),g.Z.checkSensitive({content:c.title})]).then(function(m){if(m.find(function(N){return N}))alert(_l("\u8F93\u5165\u5185\u5BB9\u5305\u542B\u654F\u611F\u8BCD\uFF0C\u8BF7\u91CD\u65B0\u586B\u5199"),3);else{var p=(0,h.default)({},c,{isSoFar:c.isSoFar?0:1,type:e.props.type});E.Z.editAccountDetail(p).then(function(N){N?(alert(_l("\u64CD\u4F5C\u6210\u529F"),1),e.props.updateValue(),e.props.closeDialog()):alert(_l("\u64CD\u4F5C\u5931\u8D25"),2)}).catch()}})}},{key:"render",value:function(){var e=this,a=this.state,n=a.baseInfo,l=a.errorList,c=a.errorSentry,u=c===void 0?{}:c,s=this.props.type;return t.createElement("div",{className:"baseInfoEditContent Gray"},t.createElement("div",{className:"Bold"},s===1?_l("\u7EC4\u7EC7\u540D\u79F0"):_l("\u5B66\u6821\u540D\u79F0"),t.createElement("span",{className:"TxtMiddle Red"},"*")),t.createElement("input",{type:"text",className:v()("formControl mTop6",{error:l.name}),defaultValue:n.name,onChange:function(m){return e.updateValue("name",m.target.value)},onBlur:function(){return e.updateError("name",!n.name,n.name)},onFocus:function(){return e.updateError("name",!1)}}),t.createElement("div",{className:"Red errorBox"},t.createElement("span",{className:v()({Hidden:!l.name&&!u.name})},u.name?_l("\u8F93\u5165\u5185\u5BB9\u5305\u542B\u654F\u611F\u8BCD\uFF0C\u8BF7\u91CD\u65B0\u586B\u5199"):s===1?_l("\u8BF7\u8F93\u5165\u7EC4\u7EC7\u540D\u79F0"):_l("\u8BF7\u8F93\u5165\u5B66\u6821\u540D\u79F0"))),t.createElement("div",{className:"Bold"},s===1?_l("\u671F\u95F4\u6700\u9AD8\u804C\u4F4D"):_l("\u4E13\u4E1A\u548C\u5B66\u5386"),t.createElement("span",{className:"TxtMiddle Red"},"*")),t.createElement("input",{type:"text",className:v()("formControl mTop6",{error:l.title}),defaultValue:n.title,onChange:function(m){return e.updateValue("title",m.target.value)},onBlur:function(){return e.updateError("title",!n.title,n.title)},onFocus:function(){return e.updateError("title",!1)}}),t.createElement("div",{className:"Red errorBox"},t.createElement("span",{className:v()({Hidden:!l.title&&!u.title})},u.title?_l("\u8F93\u5165\u5185\u5BB9\u5305\u542B\u654F\u611F\u8BCD\uFF0C\u8BF7\u91CD\u65B0\u586B\u5199"):this.renderTitleErrorMsg())),t.createElement("div",{className:"Bold"},s===1?_l("\u63CF\u8FF0"):_l("\u6838\u5FC3\u8BFE\u7A0B")),t.createElement("textarea",{className:"mTop6 mBottom24 formControl",value:n.description,onChange:function(m){e.updateValue("description",m.target.value)}}),t.createElement("div",{className:"Bold"},_l("\u8D77\u6B62\u65F6\u95F4"),t.createElement("span",{className:"TxtMiddle Red"},"*")),t.createElement("div",{className:"flexRow mTop6"},t.createElement("div",null,t.createElement(b.Z,{selectedValue:n.startDate?f()(n.startDate):f()(),max:this.getRangeTime("max"),allowClear:!1,onOk:function(m){e.updateValue("startDate",f()(m).format("YYYY-MM-DD")),e.updateError("startDate",!m)},onSelect:function(m){e.updateValue("startDate",f()(m).format("YYYY-MM-DD")),e.updateError("startDate",!m)}},t.createElement("input",{type:"text",className:v()("formControl",{error:l.startDate}),placeholder:_l("\u5F00\u59CB\u65F6\u95F4"),value:n.startDate,onBlur:function(){return e.updateError("startDate",!n.startDate)},onFocus:function(){return e.updateError("startDate",!1)}})),t.createElement("div",{className:"Red errorBox"},t.createElement("span",{className:v()({Hidden:!l.startDate})},_l("\u8BF7\u9009\u62E9\u8D77\u59CB\u5E74\u6708")))),t.createElement("span",{className:"LineHeight36"},t.createElement("span",{className:"mLeft16 mRight16"},_l("\u81F3"))),t.createElement("div",null,t.createElement(b.Z,{selectedValue:n.endDate?f()(n.endDate):f()(),disabled:n.isSoFar,min:this.getRangeTime("min"),allowClear:!1,onOk:function(m){e.updateValue("endDate",f()(m).format("YYYY-MM-DD")),e.updateError("endDate",!m)},onSelect:function(m){e.updateValue("endDate",f()(m).format("YYYY-MM-DD")),e.updateError("endDate",!m)}},t.createElement("input",{type:"text",className:v()("formControl",{error:!n.isSoFar&&l.endDate}),placeholder:_l("\u7ED3\u675F\u65F6\u95F4"),disabled:n.isSoFar,value:n.isSoFar?_l("\u81F3\u4ECA"):n.endDate,onBlur:function(){return e.updateError("endDate",!n.endDate)},onFocus:function(){return e.updateError("endDate",!1)}})),t.createElement("div",{className:"Red errorBox"},t.createElement("span",{className:v()({Hidden:!l.endDate&&!n.isSoFar||n.isSoFar})},_l("\u8BF7\u9009\u62E9\u7ED3\u675F\u5E74\u6708"))))),t.createElement(K.Z,{checked:n.isSoFar,onClick:function(){e.updateValue("isSoFar",!n.isSoFar),n.isSoFar||e.updateValue("endDate","")}},s===1?_l("\u8FD8\u5728\u8FD9\u91CC\u5DE5\u4F5C"):_l("\u8FD8\u5728\u8FD9\u91CC\u5B66\u4E60")),t.createElement("div",{className:"mTop20 flexEnd"},t.createElement("button",{type:"button",className:"ming Button Button--link Gray_9e mRight30",onClick:function(){return e.props.closeDialog()}},_l("\u53D6\u6D88")),t.createElement("button",{type:"button",className:"ming Button Button--primary saveBtn",onClick:function(){return e.saveBaseInfo()}},n.autoId?_l("\u786E\u8BA4"):_l("\u6DFB\u52A0"))))}}]),d}(t.Component),q=[{label:_l("\u751F\u65E5"),key:"birthdate",filter:"transFromDate"},{label:_l("\u6027\u522B"),key:"gender",filter:"transFormGender"},{label:_l("\u804C\u4F4D"),key:"profession"}],ee=[{label:_l("\u90AE\u7BB1"),key:"email"},{label:_l("\u624B\u673A"),key:"mobilePhone"}],te=function(D){(0,x.default)(d,D);function d(o){(0,k.default)(this,d);var e=(0,T.default)(this,(d.__proto__||C()(d)).call(this,o));return e.detailItem=function(a,n){var l=e.state[n]||{};return t.createElement("div",{className:"mBottom10",key:a.key},t.createElement("span",{className:"Gray_75 itemLabel"},a.label),t.createElement("span",{className:"Gray"},l[a.key]?a.filter?e[a.filter](l[a.key]):l[a.key]:_l("\u672A\u586B\u5199")))},e.state={accountInfo:{},baseDetail:{},concatInfo:{},educationList:[],workList:[],dataPlan:0,dataUsage:0,percent:0,loading:!1,operateMenuVisible:!1,editFullName:!1,isErr:!1},e}return(0,B.default)(d,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;this.setState({loading:!0}),S().all([this.getUserInfo(),this.getConcatInfo(),this.getEducation(),this.getWorkList()]).then(function(a){var n=(0,R.Z)(a,4),l=n[0],c=n[1],u=n[2],s=n[3];e.setState({accountInfo:l.accountInfo,dataPlan:l.dataPlan,dataUsage:l.dataUsage,percent:l.dataUsage?l.dataUsage/l.dataPlan*100:0,baseDetail:l.accountInfo,concatInfo:c,educationList:u.list,workList:s.list,loading:!1})})}},{key:"getUserInfo",value:function(){return E.Z.getAccountListInfo({})}},{key:"getConcatInfo",value:function(){return E.Z.getContactInfo({})}},{key:"getEducation",value:function(){return E.Z.getAccountDetail({type:2})}},{key:"getWorkList",value:function(){return E.Z.getAccountDetail({type:1})}},{key:"transFromDate",value:function(e){return e&&e.split(" ")[0]}},{key:"transFormGender",value:function(e){var a={1:_l("\u7537"),2:_l("\u5973")};return a[e]}},{key:"renderAccountInfo",value:function(){var e=this.state,a=e.accountInfo,n=e.dataUsage,l=e.dataPlan,c=e.percent;return t.createElement("div",{className:"flexRow"},t.createElement("div",{className:"detailContainer pTop0 pBottom0"},t.createElement("div",{className:"flexCenter"},t.createElement("span",{className:"Gray_75 itemLabel"},_l("\u5F53\u524D\u7248\u672C")),a.accountType==0?t.createElement("span",{className:"freeTag"},_l("\u514D\u8D39\u7248")):t.createElement(t.Fragment,null,t.createElement("span",{className:"accountTag"},_l("\u4ED8\u8D39\u7248")),t.createElement("span",{className:"Gray_9e mLeft10 mRight5"},_l("\u5269\u4F59 %0 \u5929",a.expireDays)),t.createElement(F.Z,{popupPlacement:"top",text:t.createElement("span",null,_l("\u5230\u671F\u65F6\u95F4\uFF1A\u6839\u636E\u60A8\u6240\u5728\u7EC4\u7EC7\u6700\u665A\u5230\u671F\u65F6\u95F4\u4E3A\u51C6\u3002"))},t.createElement("span",{className:"icon-novice-circle Font15 Gray_bd mLeft2 Hand"}))))))}},{key:"renderDetail",value:function(){var e=this;return t.createElement("div",{className:"detailContainer"},t.createElement("div",{className:"Font15 Bold Gray mBottom16"},_l("\u8BE6\u7EC6\u8D44\u6599")),q.map(function(a){return e.detailItem(a,"baseDetail")}),t.createElement("div",null,t.createElement("span",{className:"itemLabel"}),t.createElement("button",{type:"button",className:"ming Button Button--link ThemeColor3 Hover_49",onClick:this.handleEditDetail.bind(this)},_l("\u66F4\u591A"))))}},{key:"handleEditDetail",value:function(){var e=this;y.Z.confirm({title:_l("\u7F16\u8F91\u4E2A\u4EBA\u8D44\u6599"),dialogClasses:"editDetailDialog",noFooter:!0,children:t.createElement(U,{baseInfo:this.state.baseDetail,closeDialog:function(){$(".editDetailDialog.mui-dialog-container").parent().remove()},updateValue:function(n){e.setState({baseDetail:n})}})})}},{key:"renderInfo",value:function(){var e=this;return t.createElement("div",{className:"infoContainer"},t.createElement("div",{className:"Font15 Bold Gray mBottom16"},_l("\u8054\u7CFB\u4FE1\u606F")),ee.map(function(a){return e.detailItem(a,"concatInfo")}),t.createElement("div",null,t.createElement("span",{className:"itemLabel"}),t.createElement("button",{type:"button",className:"ming Button Button--link ThemeColor3 Hover_49",onClick:this.handleEditInfo.bind(this)},_l("\u66F4\u591A"))))}},{key:"handleEditInfo",value:function(){var e=this;y.Z.confirm({title:_l("\u7F16\u8F91\u8054\u7CFB\u4FE1\u606F"),dialogClasses:"editInfoDialog",noFooter:!0,children:t.createElement(z,{baseInfo:this.state.concatInfo,closeDialog:function(){$(".editInfoDialog.mui-dialog-container").parent().remove()},updateValue:function(n){e.setState({concatInfo:n})}})})}},{key:"renderEdu",value:function(){var e=this,a=this.state.educationList;return t.createElement(t.Fragment,null,a.map(function(n,l){return e.getEduOrWorkItem(2,n)}))}},{key:"renderWork",value:function(){var e=this,a=this.state.workList;return t.createElement(t.Fragment,null,a.map(function(n,l){return e.getEduOrWorkItem(1,n)}))}},{key:"getEduOrWorkItem",value:function(e,a){var n=this,l=f()().format("YYYY-MM-DD")===a.endDate?_l("\u81F3\u4ECA"):a.endDate;return t.createElement("div",{className:"eduOrWorkItemBox",key:a.autoId},t.createElement("div",{className:"itemHeader"},t.createElement("div",{className:"itemName overflow_ellipsis Bold Gray"},a.name),t.createElement("div",{className:"Gray_9e itemDate"},_l("%0 \u81F3 %1",a.startDate,l)),t.createElement("div",{className:"itemOption"},t.createElement("span",{className:"ThemeColor3 Hover_49 mRight24",onClick:function(){return n.handleAddOrEditItem(e,a)}},t.createElement("span",{className:"m\bLeft6 icon-edit_17"}),t.createElement("span",null,_l("\u7F16\u8F91"))),t.createElement("span",{className:"ThemeColor3 Hover_49 mRight24",onClick:function(){return n.handleDeleteItem(e,a.autoId)}},t.createElement("span",{className:"m\bLeft6 icon-delete_12"}),t.createElement("span",null,_l("\u5220\u9664"))))),a.title&&t.createElement("div",{className:"LineHeight20 Gray_9e flexWrap"},a.title),a.description&&t.createElement("div",{className:"LineHeight20 Gray_9e flexWrap"},a.description))}},{key:"handleAddOrEditItem",value:function(e,a){var n=this;y.Z.confirm({title:""+(Z().isArray(a)?_l("\u6DFB\u52A0"):_l("\u7F16\u8F91"))+(e===1?_l("\u5DE5\u4F5C\u5C65\u5386"):_l("\u6559\u80B2\u7ECF\u5386"))+" ",dialogClasses:"addOrEditItemDialog",noFooter:!0,children:t.createElement(w,{item:a,type:e,closeDialog:function(){$(".addOrEditItemDialog.mui-dialog-container").parent().remove()},updateValue:function(){var c=e===1?"getWorkList":"getEducation",u=e===1?"workList":"educationList";n[c]().then(function(s){n.setState((0,I.default)({},u,s.list))})}})})}},{key:"handleDeleteItem",value:function(e,a){var n=this;confirm(_l("\u786E\u8BA4\u5220\u9664")+"?")&&E.Z.delAccountDetail({autoId:a,detailType:e}).then(function(l){if(l){var c=e===1?"workList":"educationList",u=n.state[c]||[];n.setState((0,I.default)({},c,u.filter(function(s){return s.autoId!==a}))),alert(_l("\u5220\u9664\u6210\u529F"),1)}else alert(_l("\u5220\u9664\u5931\u8D25"),2)}).catch()}},{key:"handleUploadImg",value:function(){var e=this;y.Z.confirm({title:_l("\u4E0A\u4F20\u5934\u50CF"),dialogClasses:"uploadAvatorDialog",noFooter:!0,children:t.createElement(M.Z,{avatar:this.state.accountInfo.avatarBig,closeDialog:function(){$(".uploadAvatorDialog.mui-dialog-container").parent().remove()},updateAvator:function(){e.getUserInfo().then(function(n){e.setState({accountInfo:n.accountInfo})})}})})}},{key:"setFullName",value:function(){var e=this,a=this.state.baseDetail.fullname;g.Z.checkSensitive({content:a}).then(function(n){if(n)return e.setState({isErr:!0}),alert(_l("\u8F93\u5165\u5185\u5BB9\u5305\u542B\u654F\u611F\u8BCD\uFF0C\u8BF7\u91CD\u65B0\u586B\u5199"),3);e.setState({isErr:!1}),E.Z.editAccountBasicInfo(e.state.baseDetail).then(function(l){l?e.setState({editFullName:!1}):e.setState({editFullName:!1})}).catch()})}},{key:"render",value:function(){var e=this,a=this.state,n=a.accountInfo,l=a.loading,c=a.educationList,u=a.workList,s=a.baseDetail,r=a.editFullName,m=a.isErr;return l?t.createElement(Y.Z,{className:"mTop40"}):t.createElement("div",{className:"personalInfoContainer"},t.createElement("div",{className:"personalTop"},t.createElement("div",{className:"accountHeadBox"},t.createElement("div",{className:"userImage",onClick:this.handleUploadImg.bind(this)},t.createElement("img",{src:n.avatarBig,alt:""}),t.createElement("div",{className:"hoverAvatar"},t.createElement("span",{className:"Font20 icon-upload_pictures"}))),t.createElement("div",{className:"userInfoRight mLeft25"},t.createElement("div",{className:"Gray Font17 overflow_ellipsis LineHeight32"},r?t.createElement("input",{className:v()("editfullNameInput",{isErr:m}),autofocus:"autofocus",value:s.fullname,onChange:function(N){return e.setState({baseDetail:(0,h.default)({},s,{fullname:N.target.value})})},onKeyDown:function(N){N.keyCode===13&&e.setFullName()},onBlur:function(){return e.setFullName()}}):t.createElement("span",null,s.fullname,md.global.SysSettings.enableEditAccountInfo&&t.createElement(F.Z,{popupPlacement:"top",text:t.createElement("span",null,_l("\u7F16\u8F91\u59D3\u540D"))},t.createElement("span",{className:"Font15 Hand Hover_49 Gray_bd mLeft10 icon-create",onClick:function(){return e.setState({editFullName:!0},function(){$(".editfullNameInput").focus()})}})))),t.createElement("div",{className:"mTop10 Gray"},t.createElement("label",null,_l("\u4F7F\u7528\uFF1A"),t.createElement("span",{className:"mLeft5 ThemeColor3"},_l("%0 \u5929",n.loginDays))))))),t.createElement("div",{className:"flexRow w100"},this.renderDetail(),this.renderInfo()),t.createElement("div",{className:"mBottom40"},t.createElement("div",{className:"Font15 Bold Gray mBottom16"},_l("\u6559\u80B2\u7ECF\u5386")),this.renderEdu(),t.createElement("span",{className:"Hand ThemeColor3 Hover_49",onClick:function(){return e.handleAddOrEditItem(2,c)}},_l("\u6DFB\u52A0"))),t.createElement("div",null,t.createElement("div",{className:"Font15 Bold Gray mBottom16"},_l("\u5DE5\u4F5C\u5C65\u5386")),this.renderWork(),t.createElement("span",{className:"Hand ThemeColor3 Hover_49",onClick:function(){return e.handleAddOrEditItem(1,u)}},_l("\u6DFB\u52A0"))))}}]),d}(t.Component)}}]);
