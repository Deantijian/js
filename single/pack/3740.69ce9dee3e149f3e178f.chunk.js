"use strict";(self.webpackChunkmingdao_web=self.webpackChunkmingdao_web||[]).push([[3740],{28283:()=>{},13740:(j,A,l)=>{l.r(A),l.d(A,{default:()=>ne});var g=l(88239),V=l(54208),I=l(88106),x=l(69288),P=l(70264),U=l(12424),Y=l(46593),M=l.n(Y),v=l(85105),T=l.n(v),L=l(99663),B=l(22600),O=l(49135),S=l(93196),t=l(67294),W=l(12423),Z=l(47426),F=l(81274),D=l(59911),H=l(93967),E=l.n(H),G=l(28283),N=l(30381),p=l.n(N),o=l(29208),_=function(k){(0,S.default)(m,k);function m(i){(0,L.default)(this,m);var e=(0,O.default)(this,(m.__proto__||T()(m)).call(this,i));return e.saveBaseInfo=function(){var a=e.state,n=a.isError,r=a.baseInfo,u=a.errTxtInfo;n||u.length>0||M().all([o.Z.checkSensitive({content:r.fullname}),o.Z.checkSensitive({content:r.companyName}),o.Z.checkSensitive({content:r.profession}),o.Z.checkSensitive({content:r.address})]).then(function(d){d.find(function(c){return c})?alert(_l("\u8F93\u5165\u5185\u5BB9\u5305\u542B\u654F\u611F\u8BCD\uFF0C\u8BF7\u91CD\u65B0\u586B\u5199"),3):D.Z.editAccountBasicInfo(r).then(function(c){c?(alert(_l("\u7F16\u8F91\u6210\u529F"),1),e.props.updateValue(r),e.props.closeDialog()):alert(_l("\u7F16\u8F91\u5931\u8D25"),2)}).catch()},function(){})},e.setTxterr=function(a,n){var r=e.state.errTxtInfo;o.Z.checkSensitive({content:a.target.value}).then(function(u){u?e.setState({errTxtInfo:r.concat(n)}):e.setState({errTxtInfo:r.filter(function(d){return d!==n})})})},e.renderErrTxt=function(){return t.createElement("div",{className:"Red errorBox"},t.createElement("span",null,_l("\u8F93\u5165\u5185\u5BB9\u5305\u542B\u654F\u611F\u8BCD\uFF0C\u8BF7\u91CD\u65B0\u586B\u5199")))},e.state={baseInfo:e.props.baseInfo||{},isError:!1,errTxtInfo:[]},e}return(0,B.default)(m,[{key:"updateValue",value:function(e,a){this.setState(function(n){return{baseInfo:(0,g.default)({},n.baseInfo,(0,I.default)({},e,a))}})}},{key:"render",value:function(){var e=this,a=this.state,n=a.baseInfo,r=a.isError,u=a.errTxtInfo,d=u===void 0?[]:u;return t.createElement("div",{className:"baseInfoEditContent Gray"},t.createElement("div",{className:"Bold"},_l("\u59D3\u540D"),t.createElement("span",{className:"TxtMiddle Red"},"*")),t.createElement("input",{type:"text",className:E()("formControl mTop6",{error:r}),defaultValue:n.fullname,onChange:function(s){e.updateValue("fullname",s.target.value)},onBlur:function(s){n.fullname?e.setTxterr(s,"fullname"):e.setState({isError:!n.fullname})},onFocus:function(){return e.setState({isError:!1})}}),t.createElement("div",{className:"Red errorBox"},t.createElement("span",{className:E()({Hidden:!r&&!d.includes("fullname")})},d.includes("fullname")?_l("\u8F93\u5165\u5185\u5BB9\u5305\u542B\u654F\u611F\u8BCD\uFF0C\u8BF7\u91CD\u65B0\u586B\u5199"):_l("\u59D3\u540D\u4E0D\u80FD\u4E3A\u7A7A"))),t.createElement("div",{className:"Bold"},_l("\u751F\u65E5")),t.createElement(F.Z,{selectedValue:n.birthdate?p()(n.birthdate):p()("19900101"),min:p()("19500101"),max:p()(new Date().getFullYear()-18+"0101"),onClear:function(){e.updateValue("birthdate","")},onSelect:function(s){s&&e.updateValue("birthdate",p()(s).format("YYYY-MM-DD"))}},t.createElement("input",{className:"formControl mTop6 mBottom24",value:n.birthdate?p()(n.birthdate).format("YYYY-MM-DD"):""})),t.createElement("div",{className:"Bold"},_l("\u6027\u522B")),t.createElement(Z.ZP,{className:"wsRadioGroup mTop6 mBottom24",data:[{value:1,text:_l("\u7537")},{value:2,text:_l("\u5973")}],checkedValue:n.gender,onChange:function(s){e.updateValue("gender",s)},size:"small"}),t.createElement("div",{className:"Bold"},_l("\u7EC4\u7EC7\u540D\u79F0")),t.createElement("input",{type:"text",className:"mTop6 formControl",maxLength:50,value:n.companyName,onChange:function(s){e.updateValue("companyName",s.target.value)},onBlur:function(s){e.setTxterr(s,"companyName")}}),d.includes("companyName")&&this.renderErrTxt(),t.createElement("div",{className:"Bold mTop24"},_l("\u804C\u4F4D")),t.createElement("input",{type:"text",className:"mTop6 formControl",maxLength:50,value:n.profession,onChange:function(s){e.updateValue("profession",s.target.value)},onBlur:function(s){e.setTxterr(s,"profession")}}),d.includes("profession")&&this.renderErrTxt(),t.createElement("div",{className:"Bold mTop24"},_l("\u5C45\u4F4F\u5730\u5740")),t.createElement("input",{type:"text",className:"mTop6 formControl",value:n.address,onChange:function(s){e.updateValue("address",s.target.value)},onBlur:function(s){e.setTxterr(s,"address")}}),d.includes("address")&&this.renderErrTxt(),t.createElement("div",{className:"mTop20 flexEnd "},t.createElement("button",{type:"button",className:"ming Button Button--link Gray_9e mRight30",onClick:function(){return e.props.closeDialog()}},_l("\u53D6\u6D88")),t.createElement("button",{type:"button",className:"ming Button Button--primary saveBtn",onClick:function(){return e.saveBaseInfo()}},_l("\u786E\u8BA4"))))}}]),m}(t.Component),y=l(86515),R=l(36021),h=l(66344),z=function(k){(0,S.default)(m,k);function m(i){(0,L.default)(this,m);var e=(0,O.default)(this,(m.__proto__||T()(m)).call(this,i));return e.state={baseInfo:e.props.baseInfo||{}},e}return(0,B.default)(m,[{key:"updateValue",value:function(e,a){this.setState(function(n){return{baseInfo:(0,g.default)({},n.baseInfo,(0,I.default)({},e,a.trim()))}})}},{key:"saveBaseInfo",value:function(){var e=this;if(this.validateContract()){var a=this.state.baseInfo;D.Z.editContactInfo(a).then(function(n){n?(alert(_l("\u7F16\u8F91\u6210\u529F"),1),e.props.updateValue(a),e.props.closeDialog()):alert(_l("\u7F16\u8F91\u5931\u8D25"),2)}).catch()}}},{key:"validateContract",value:function(){var e=this.state.baseInfo;return e.snsLinkedin!==""&&!h.Z.isURL(e.snsLinkedin)?(alert(_l("LinkedIn\u8F93\u5165\u4E0D\u6B63\u786E,\u8BF7\u8F93\u5165\u6709\u6548\u7684URL"),3),!1):e.snsSina!==""&&!h.Z.isURL(e.snsSina)?(alert(_l("\u65B0\u6D6A\u5FAE\u535A\u4E3B\u9875\u8F93\u5165\u4E0D\u6B63\u786E,\u8BF7\u8F93\u5165\u6709\u6548\u7684URL"),3),!1):!0}},{key:"render",value:function(){var e=this,a=this.state.baseInfo;return t.createElement("div",{className:"baseInfoEditContent Gray"},t.createElement("div",{className:"Gray_9e mBottom24"},_l("\u90AE\u7BB1\u548C\u624B\u673A\u8BBE\u7F6E\u8BF7\u5230 "),t.createElement("span",{className:"ThemeColor3 Hover_49 Hand",onClick:function(){e.props.closeDialog(),(0,R.T8)(y.Z.url({type:"account"}))}},_l("\u8D26\u6237\u4E0E\u9690\u79C1")),_l(" \u9875\u9762\u8BBE\u7F6E")),t.createElement("div",{className:"Bold"},_l("\u5FAE\u4FE1")),t.createElement("input",{type:"text",placeholder:_l("\u5FAE\u4FE1\u8D26\u53F7"),className:"mTop6 mBottom24 formControl",value:a.weiXin,onChange:function(r){e.updateValue("weiXin",r.target.value)}}),t.createElement("div",{className:"Bold"},_l("LinkedIn")),t.createElement("input",{type:"text",placeholder:_l("linkedln\u4E2A\u4EBA\u9875\u9762\u5730\u5740"),className:"mTop6 mBottom24 formControl",value:a.snsLinkedin,onChange:function(r){e.updateValue("snsLinkedin",r.target.value)}}),t.createElement("div",{className:"Bold"},_l("\u5FAE\u535A")),t.createElement("input",{type:"text",placeholder:_l("\u5FAE\u535A\u4E2A\u4EBA\u9875\u9762\u5730\u5740"),className:"mTop6 mBottom24 formControl",value:a.snsSina,onChange:function(r){e.updateValue("snsSina",r.target.value)}}),t.createElement("div",{className:"mTop20 flexEnd"},t.createElement("button",{type:"button",className:"ming Button Button--link Gray_9e mRight30",onClick:function(){return e.props.closeDialog()}},_l("\u53D6\u6D88")),t.createElement("button",{type:"button",className:"ming Button Button--primary saveBtn",onClick:function(){return e.saveBaseInfo()}},_l("\u786E\u8BA4"))))}}]),m}(t.Component),X=l(60967),J=l(88902),Q=l.n(J),w=l(96486),K=l.n(w),q={name:!1,title:!1,startDate:!1,endDate:!1},ee=function(k){(0,S.default)(m,k);function m(i){(0,L.default)(this,m);var e=(0,O.default)(this,(m.__proto__||T()(m)).call(this,i)),a={autoId:0,description:"",endDate:"",name:"",startDate:"",title:"",isSoFar:!1},n=K().isArray(e.props.item)?a:e.props.item;return e.state={baseInfo:(0,g.default)({},n,{isSoFar:p()().format("YYYY-MM-DD")===n.endDate}),errorList:q},e}return(0,B.default)(m,[{key:"updateValue",value:function(e,a){this.setState(function(n){return{baseInfo:(0,g.default)({},n.baseInfo,(0,I.default)({},e,a))}})}},{key:"updateError",value:function(e,a,n){var r=this,u=this.state,d=u.errorList,c=d===void 0?{}:d,s=u.errorSentry,f=s===void 0?{}:s;["name","title"].includes(e)&&n?o.Z.checkSensitive({content:n}).then(function(C){r.setState({errorSentry:(0,g.default)({},f,(0,I.default)({},e,C)),errorList:(0,g.default)({},c,(0,I.default)({},e,a))})}):this.setState(function(C){return{errorList:(0,g.default)({},C.errorList,(0,I.default)({},e,a))}})}},{key:"getRangeTime",value:function(e){var a=new Date(e==="max"?new Date().getTime()-864e5:new Date(this.state.baseInfo.startDate).getTime()+864e5);return p()(a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate())}},{key:"renderTitleErrorMsg",value:function(){var e=this.state.baseInfo,a=this.props.type;if(e.title){if(!/^[A-Za-z0-9\u0391-\uFFE5 \.,()，。（）\-]+$/.exec($.trim(e.title)))return a===1?_l("\u804C\u4F4D\u540D\u79F0\u4E0D\u80FD\u542B\u7279\u6B8A\u5B57\u7B26"):_l("\u4E13\u4E1A\u548C\u5B66\u5386\u4E0D\u80FD\u542B\u7279\u6B8A\u5B57\u7B26")}else return a===1?_l("\u8BF7\u8F93\u5165\u804C\u4F4D"):_l("\u8BF7\u8F93\u5165\u4E13\u4E1A\u548C\u5B66\u5386")}},{key:"endDateError",value:function(){var e=this.state.baseInfo,a=!1;return e.isSoFar?a=!1:a=!e.endDate,a}},{key:"saveBaseInfo",value:function(){var e=this,a=this.state,n=a.errorList,r=a.baseInfo,u=r===void 0?{}:r,d=a.errorSentry,c=d===void 0?{}:d,s=!1;Q()(n).forEach(function(f){s=f==="endDate"?e.endDateError():!u[f],e.updateError([f],s)}),!s&&!c.name&&!c.title&&M().all([o.Z.checkSensitive({content:u.name}),o.Z.checkSensitive({content:u.title})]).then(function(f){if(f.find(function(b){return b}))alert(_l("\u8F93\u5165\u5185\u5BB9\u5305\u542B\u654F\u611F\u8BCD\uFF0C\u8BF7\u91CD\u65B0\u586B\u5199"),3);else{var C=(0,g.default)({},u,{isSoFar:u.isSoFar?0:1,type:e.props.type});D.Z.editAccountDetail(C).then(function(b){b?(alert(_l("\u64CD\u4F5C\u6210\u529F"),1),e.props.updateValue(),e.props.closeDialog()):alert(_l("\u64CD\u4F5C\u5931\u8D25"),2)}).catch()}})}},{key:"render",value:function(){var e=this,a=this.state,n=a.baseInfo,r=a.errorList,u=a.errorSentry,d=u===void 0?{}:u,c=this.props.type;return t.createElement("div",{className:"baseInfoEditContent Gray"},t.createElement("div",{className:"Bold"},c===1?_l("\u7EC4\u7EC7\u540D\u79F0"):_l("\u5B66\u6821\u540D\u79F0"),t.createElement("span",{className:"TxtMiddle Red"},"*")),t.createElement("input",{type:"text",className:E()("formControl mTop6",{error:r.name}),defaultValue:n.name,onChange:function(f){return e.updateValue("name",f.target.value)},onBlur:function(){return e.updateError("name",!n.name,n.name)},onFocus:function(){return e.updateError("name",!1)}}),t.createElement("div",{className:"Red errorBox"},t.createElement("span",{className:E()({Hidden:!r.name&&!d.name})},d.name?_l("\u8F93\u5165\u5185\u5BB9\u5305\u542B\u654F\u611F\u8BCD\uFF0C\u8BF7\u91CD\u65B0\u586B\u5199"):c===1?_l("\u8BF7\u8F93\u5165\u7EC4\u7EC7\u540D\u79F0"):_l("\u8BF7\u8F93\u5165\u5B66\u6821\u540D\u79F0"))),t.createElement("div",{className:"Bold"},c===1?_l("\u671F\u95F4\u6700\u9AD8\u804C\u4F4D"):_l("\u4E13\u4E1A\u548C\u5B66\u5386"),t.createElement("span",{className:"TxtMiddle Red"},"*")),t.createElement("input",{type:"text",className:E()("formControl mTop6",{error:r.title}),defaultValue:n.title,onChange:function(f){return e.updateValue("title",f.target.value)},onBlur:function(){return e.updateError("title",!n.title,n.title)},onFocus:function(){return e.updateError("title",!1)}}),t.createElement("div",{className:"Red errorBox"},t.createElement("span",{className:E()({Hidden:!r.title&&!d.title})},d.title?_l("\u8F93\u5165\u5185\u5BB9\u5305\u542B\u654F\u611F\u8BCD\uFF0C\u8BF7\u91CD\u65B0\u586B\u5199"):this.renderTitleErrorMsg())),t.createElement("div",{className:"Bold"},c===1?_l("\u63CF\u8FF0"):_l("\u6838\u5FC3\u8BFE\u7A0B")),t.createElement("textarea",{className:"mTop6 mBottom24 formControl",value:n.description,onChange:function(f){e.updateValue("description",f.target.value)}}),t.createElement("div",{className:"Bold"},_l("\u8D77\u6B62\u65F6\u95F4"),t.createElement("span",{className:"TxtMiddle Red"},"*")),t.createElement("div",{className:"flexRow mTop6"},t.createElement("div",null,t.createElement(F.Z,{selectedValue:n.startDate?p()(n.startDate):p()(),max:this.getRangeTime("max"),allowClear:!1,onOk:function(f){e.updateValue("startDate",p()(f).format("YYYY-MM-DD")),e.updateError("startDate",!f)},onSelect:function(f){e.updateValue("startDate",p()(f).format("YYYY-MM-DD")),e.updateError("startDate",!f)}},t.createElement("input",{type:"text",className:E()("formControl",{error:r.startDate}),placeholder:_l("\u5F00\u59CB\u65F6\u95F4"),value:n.startDate,onBlur:function(){return e.updateError("startDate",!n.startDate)},onFocus:function(){return e.updateError("startDate",!1)}})),t.createElement("div",{className:"Red errorBox"},t.createElement("span",{className:E()({Hidden:!r.startDate})},_l("\u8BF7\u9009\u62E9\u8D77\u59CB\u5E74\u6708")))),t.createElement("span",{className:"LineHeight36"},t.createElement("span",{className:"mLeft16 mRight16"},_l("\u81F3"))),t.createElement("div",null,t.createElement(F.Z,{selectedValue:n.endDate?p()(n.endDate):p()(),disabled:n.isSoFar,min:this.getRangeTime("min"),allowClear:!1,onOk:function(f){e.updateValue("endDate",p()(f).format("YYYY-MM-DD")),e.updateError("endDate",!f)},onSelect:function(f){e.updateValue("endDate",p()(f).format("YYYY-MM-DD")),e.updateError("endDate",!f)}},t.createElement("input",{type:"text",className:E()("formControl",{error:!n.isSoFar&&r.endDate}),placeholder:_l("\u7ED3\u675F\u65F6\u95F4"),disabled:n.isSoFar,value:n.isSoFar?_l("\u81F3\u4ECA"):n.endDate,onBlur:function(){return e.updateError("endDate",!n.endDate)},onFocus:function(){return e.updateError("endDate",!1)}})),t.createElement("div",{className:"Red errorBox"},t.createElement("span",{className:E()({Hidden:!r.endDate&&!n.isSoFar||n.isSoFar})},_l("\u8BF7\u9009\u62E9\u7ED3\u675F\u5E74\u6708"))))),t.createElement(X.Z,{checked:n.isSoFar,onClick:function(){e.updateValue("isSoFar",!n.isSoFar),n.isSoFar||e.updateValue("endDate","")}},c===1?_l("\u8FD8\u5728\u8FD9\u91CC\u5DE5\u4F5C"):_l("\u8FD8\u5728\u8FD9\u91CC\u5B66\u4E60")),t.createElement("div",{className:"mTop20 flexEnd"},t.createElement("button",{type:"button",className:"ming Button Button--link Gray_9e mRight30",onClick:function(){return e.props.closeDialog()}},_l("\u53D6\u6D88")),t.createElement("button",{type:"button",className:"ming Button Button--primary saveBtn",onClick:function(){return e.saveBaseInfo()}},n.autoId?_l("\u786E\u8BA4"):_l("\u6DFB\u52A0"))))}}]),m}(t.Component),te=[{label:_l("\u751F\u65E5"),key:"birthdate",filter:"transFromDate"},{label:_l("\u6027\u522B"),key:"gender",filter:"transFormGender"},{label:_l("\u804C\u4F4D"),key:"profession"}],ae=[{label:_l("\u90AE\u7BB1"),key:"email"},{label:_l("\u624B\u673A"),key:"mobilePhone"}],ne=function(k){(0,S.default)(m,k);function m(i){(0,L.default)(this,m);var e=(0,O.default)(this,(m.__proto__||T()(m)).call(this,i));return e.detailItem=function(a,n){var r=e.state[n]||{};return t.createElement("div",{className:"mBottom10",key:a.key},t.createElement("span",{className:"Gray_75 itemLabel"},a.label),t.createElement("span",{className:"Gray"},r[a.key]?a.filter?e[a.filter](r[a.key]):r[a.key]:_l("\u672A\u586B\u5199")))},e.state={accountInfo:{},baseDetail:{},concatInfo:{},educationList:[],workList:[],dataPlan:0,dataUsage:0,percent:0,loading:!1,operateMenuVisible:!1,editFullName:!1,isErr:!1},e}return(0,B.default)(m,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;this.setState({loading:!0}),M().all([this.getUserInfo(),this.getConcatInfo(),this.getEducation(),this.getWorkList()]).then(function(a){var n=(0,U.Z)(a,4),r=n[0],u=n[1],d=n[2],c=n[3];e.setState({accountInfo:r.accountInfo,dataPlan:r.dataPlan,dataUsage:r.dataUsage,percent:r.dataUsage?r.dataUsage/r.dataPlan*100:0,baseDetail:r.accountInfo,concatInfo:u,educationList:d.list,workList:c.list,loading:!1})})}},{key:"getUserInfo",value:function(){return D.Z.getAccountListInfo({})}},{key:"getConcatInfo",value:function(){return D.Z.getContactInfo({})}},{key:"getEducation",value:function(){return D.Z.getAccountDetail({type:2})}},{key:"getWorkList",value:function(){return D.Z.getAccountDetail({type:1})}},{key:"transFromDate",value:function(e){return e&&e.split(" ")[0]}},{key:"transFormGender",value:function(e){var a={1:_l("\u7537"),2:_l("\u5973")};return a[e]}},{key:"renderAccountInfo",value:function(){var e=this.state,a=e.accountInfo,n=e.dataUsage,r=e.dataPlan,u=e.percent;return t.createElement("div",{className:"flexRow"},t.createElement("div",{className:"detailContainer pTop0 pBottom0"},t.createElement("div",{className:"flexCenter"},t.createElement("span",{className:"Gray_75 itemLabel"},_l("\u5F53\u524D\u7248\u672C")),a.accountType==0?t.createElement("span",{className:"freeTag"},_l("\u514D\u8D39\u7248")):t.createElement(t.Fragment,null,t.createElement("span",{className:"accountTag"},_l("\u4ED8\u8D39\u7248")),t.createElement("span",{className:"Gray_9e mLeft10 mRight5"},_l("\u5269\u4F59 %0 \u5929",a.expireDays)),t.createElement(P.Z,{popupPlacement:"top",text:t.createElement("span",null,_l("\u5230\u671F\u65F6\u95F4\uFF1A\u6839\u636E\u60A8\u6240\u5728\u7EC4\u7EC7\u6700\u665A\u5230\u671F\u65F6\u95F4\u4E3A\u51C6\u3002"))},t.createElement("span",{className:"icon-novice-circle Font15 Gray_bd mLeft2 Hand"}))))))}},{key:"renderDetail",value:function(){var e=this;return t.createElement("div",{className:"detailContainer"},t.createElement("div",{className:"Font15 Bold Gray mBottom16"},_l("\u8BE6\u7EC6\u8D44\u6599")),te.map(function(a){return e.detailItem(a,"baseDetail")}),t.createElement("div",null,t.createElement("span",{className:"itemLabel"}),t.createElement("button",{type:"button",className:"ming Button Button--link ThemeColor3 Hover_49",onClick:this.handleEditDetail.bind(this)},_l("\u66F4\u591A"))))}},{key:"handleEditDetail",value:function(){var e=this;x.Z.confirm({title:_l("\u7F16\u8F91\u4E2A\u4EBA\u8D44\u6599"),dialogClasses:"editDetailDialog",noFooter:!0,children:t.createElement(_,{baseInfo:this.state.baseDetail,closeDialog:function(){$(".editDetailDialog.mui-dialog-container").parent().remove()},updateValue:function(n){e.setState({baseDetail:n})}})})}},{key:"renderInfo",value:function(){var e=this;return t.createElement("div",{className:"infoContainer"},t.createElement("div",{className:"Font15 Bold Gray mBottom16"},_l("\u8054\u7CFB\u4FE1\u606F")),ae.map(function(a){return e.detailItem(a,"concatInfo")}),t.createElement("div",null,t.createElement("span",{className:"itemLabel"}),t.createElement("button",{type:"button",className:"ming Button Button--link ThemeColor3 Hover_49",onClick:this.handleEditInfo.bind(this)},_l("\u66F4\u591A"))))}},{key:"handleEditInfo",value:function(){var e=this;x.Z.confirm({title:_l("\u7F16\u8F91\u8054\u7CFB\u4FE1\u606F"),dialogClasses:"editInfoDialog",noFooter:!0,children:t.createElement(z,{baseInfo:this.state.concatInfo,closeDialog:function(){$(".editInfoDialog.mui-dialog-container").parent().remove()},updateValue:function(n){e.setState({concatInfo:n})}})})}},{key:"renderEdu",value:function(){var e=this,a=this.state.educationList;return t.createElement(t.Fragment,null,a.map(function(n,r){return e.getEduOrWorkItem(2,n)}))}},{key:"renderWork",value:function(){var e=this,a=this.state.workList;return t.createElement(t.Fragment,null,a.map(function(n,r){return e.getEduOrWorkItem(1,n)}))}},{key:"getEduOrWorkItem",value:function(e,a){var n=this,r=p()().format("YYYY-MM-DD")===a.endDate?_l("\u81F3\u4ECA"):a.endDate;return t.createElement("div",{className:"eduOrWorkItemBox",key:a.autoId},t.createElement("div",{className:"itemHeader"},t.createElement("div",{className:"itemName overflow_ellipsis Bold Gray"},a.name),t.createElement("div",{className:"Gray_9e itemDate"},_l("%0 \u81F3 %1",a.startDate,r)),t.createElement("div",{className:"itemOption"},t.createElement("span",{className:"ThemeColor3 Hover_49 mRight24",onClick:function(){return n.handleAddOrEditItem(e,a)}},t.createElement("span",{className:"m\bLeft6 icon-edit_17"}),t.createElement("span",null,_l("\u7F16\u8F91"))),t.createElement("span",{className:"ThemeColor3 Hover_49 mRight24",onClick:function(){return n.handleDeleteItem(e,a.autoId)}},t.createElement("span",{className:"m\bLeft6 icon-delete_12"}),t.createElement("span",null,_l("\u5220\u9664"))))),a.title&&t.createElement("div",{className:"LineHeight20 Gray_9e flexWrap"},a.title),a.description&&t.createElement("div",{className:"LineHeight20 Gray_9e flexWrap"},a.description))}},{key:"handleAddOrEditItem",value:function(e,a){var n=this;x.Z.confirm({title:""+(K().isArray(a)?_l("\u6DFB\u52A0"):_l("\u7F16\u8F91"))+(e===1?_l("\u5DE5\u4F5C\u5C65\u5386"):_l("\u6559\u80B2\u7ECF\u5386"))+" ",dialogClasses:"addOrEditItemDialog",noFooter:!0,children:t.createElement(ee,{item:a,type:e,closeDialog:function(){$(".addOrEditItemDialog.mui-dialog-container").parent().remove()},updateValue:function(){var u=e===1?"getWorkList":"getEducation",d=e===1?"workList":"educationList";n[u]().then(function(c){n.setState((0,I.default)({},d,c.list))})}})})}},{key:"handleDeleteItem",value:function(e,a){var n=this;confirm(_l("\u786E\u8BA4\u5220\u9664")+"?")&&D.Z.delAccountDetail({autoId:a,detailType:e}).then(function(r){if(r){var u=e===1?"workList":"educationList",d=n.state[u]||[];n.setState((0,I.default)({},u,d.filter(function(c){return c.autoId!==a}))),alert(_l("\u5220\u9664\u6210\u529F"),1)}else alert(_l("\u5220\u9664\u5931\u8D25"),2)}).catch()}},{key:"handleUploadImg",value:function(){var e=this;x.Z.confirm({title:_l("\u4E0A\u4F20\u5934\u50CF"),dialogClasses:"uploadAvatorDialog",noFooter:!0,children:t.createElement(W.Z,{avatar:this.state.accountInfo.avatarBig,closeDialog:function(){$(".uploadAvatorDialog.mui-dialog-container").parent().remove()},updateAvator:function(){e.getUserInfo().then(function(n){e.setState({accountInfo:n.accountInfo})})}})})}},{key:"setFullName",value:function(){var e=this,a=this.state.baseDetail.fullname;o.Z.checkSensitive({content:a}).then(function(n){if(n)return e.setState({isErr:!0}),alert(_l("\u8F93\u5165\u5185\u5BB9\u5305\u542B\u654F\u611F\u8BCD\uFF0C\u8BF7\u91CD\u65B0\u586B\u5199"),3);e.setState({isErr:!1}),D.Z.editAccountBasicInfo(e.state.baseDetail).then(function(r){r?e.setState({editFullName:!1}):e.setState({editFullName:!1})}).catch()})}},{key:"render",value:function(){var e=this,a=this.state,n=a.accountInfo,r=a.loading,u=a.educationList,d=a.workList,c=a.baseDetail,s=a.editFullName,f=a.isErr;return r?t.createElement(V.Z,{className:"mTop40"}):t.createElement("div",{className:"personalInfoContainer"},t.createElement("div",{className:"personalTop"},t.createElement("div",{className:"accountHeadBox"},t.createElement("div",{className:"userImage",onClick:this.handleUploadImg.bind(this)},t.createElement("img",{src:n.avatarBig,alt:""}),t.createElement("div",{className:"hoverAvatar"},t.createElement("span",{className:"Font20 icon-upload_pictures"}))),t.createElement("div",{className:"userInfoRight mLeft25"},t.createElement("div",{className:"Gray Font17 overflow_ellipsis LineHeight32"},s?t.createElement("input",{className:E()("editfullNameInput",{isErr:f}),autofocus:"autofocus",value:c.fullname,onChange:function(b){return e.setState({baseDetail:(0,g.default)({},c,{fullname:b.target.value})})},onKeyDown:function(b){b.keyCode===13&&e.setFullName()},onBlur:function(){return e.setFullName()}}):t.createElement("span",null,c.fullname,md.global.SysSettings.enableEditAccountInfo&&t.createElement(P.Z,{popupPlacement:"top",text:t.createElement("span",null,_l("\u7F16\u8F91\u59D3\u540D"))},t.createElement("span",{className:"Font15 Hand Hover_49 Gray_bd mLeft10 icon-create",onClick:function(){return e.setState({editFullName:!0},function(){$(".editfullNameInput").focus()})}})))),t.createElement("div",{className:"mTop10 Gray"},t.createElement("label",null,_l("\u4F7F\u7528\uFF1A"),t.createElement("span",{className:"mLeft5 ThemeColor3"},_l("%0 \u5929",n.loginDays))))))),t.createElement("div",{className:"flexRow w100"},this.renderDetail(),this.renderInfo()),t.createElement("div",{className:"mBottom40"},t.createElement("div",{className:"Font15 Bold Gray mBottom16"},_l("\u6559\u80B2\u7ECF\u5386")),this.renderEdu(),t.createElement("span",{className:"Hand ThemeColor3 Hover_49",onClick:function(){return e.handleAddOrEditItem(2,u)}},_l("\u6DFB\u52A0"))),t.createElement("div",null,t.createElement("div",{className:"Font15 Bold Gray mBottom16"},_l("\u5DE5\u4F5C\u5C65\u5386")),this.renderWork(),t.createElement("span",{className:"Hand ThemeColor3 Hover_49",onClick:function(){return e.handleAddOrEditItem(1,d)}},_l("\u6DFB\u52A0"))))}}]),m}(t.Component)},12423:(j,A,l)=>{l.d(A,{Z:()=>E});var g=l(42185),V=l(85105),I=l.n(V),x=l(99663),P=l(22600),U=l(49135),Y=l(93196),M=l(86735),v=l(67294),T=l(96761),L=l.n(T),B=l(19575),O=l.n(B),S=l(59911),t=l(15577),W=l(71893),Z,F,D=(0,M.Z)([`
  position: fixed;
  bottom: 0;
  height: 50px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  padding: 6px 20px;
  display: flex;
  width: 100%;
  background: #fff;
  left: 0;
  .cancle,
  .save {
    flex: 1;
    height: 36px;
    background: #ffffff;
    border-radius: 22px;
    opacity: 1;
    border: 1px solid #dddddd;
    color: #757575;
    border: 1px solid #dddddd;
    line-height: 36px;
    &.save {
      background: #2196f3;
      color: #fff;
      border: 1px solid #2196f3;
    }
  }
`],[`
  position: fixed;
  bottom: 0;
  height: 50px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  padding: 6px 20px;
  display: flex;
  width: 100%;
  background: #fff;
  left: 0;
  .cancle,
  .save {
    flex: 1;
    height: 36px;
    background: #ffffff;
    border-radius: 22px;
    opacity: 1;
    border: 1px solid #dddddd;
    color: #757575;
    border: 1px solid #dddddd;
    line-height: 36px;
    &.save {
      background: #2196f3;
      color: #fff;
      border: 1px solid #2196f3;
    }
  }
`]),H=W.ZP.div(D),E=(F=Z=function(G){(0,Y.default)(N,G);function N(p){(0,x.default)(this,N);var o=(0,U.default)(this,(N.__proto__||I()(N)).call(this,p));return o.onSave=function(){var _=o.state.preview;if(!_){o.props.closeDialog();return}(0,t.LP)([{bucket:4,ext:".png"}],o.props.defaultType?0:1).then(function(y){if(y.error)alert(y.error);else{var R=md.global.FileStoreConfig.uploadHost+"/putb64/-1/key/"+B.Base64.encode(y[0].key),h=new XMLHttpRequest;h.onreadystatechange=function(){h.readyState==4&&JSON.parse(h.responseText).key&&(o.props.editAvatar?(o.props.editAvatar(y[0]),o.props.closeDialog()):S.Z.editAccountAvatar({fileName:JSON.parse(h.responseText).key.replace("UserAvatar/","")}).then(function(){o.props.updateAvator(),o.props.closeDialog()}))},h.open("POST",R,!0),h.setRequestHeader("Content-Type","application/octet-stream"),h.setRequestHeader("Authorization","UpToken "+y[0].uptoken),h.send(_.replace("data:image/png;base64,",""))}})},o.state={avatar:o.props.avatar,preview:null,src:""},o.onCrop=o.onCrop.bind(o),o.onClose=o.onClose.bind(o),o.onBeforeFileLoad=o.onBeforeFileLoad.bind(o),o}return(0,P.default)(N,[{key:"guid",value:function(){function o(){return((1+Math.random())*65536|0).toString(16).substring(1)}return o()+o()+"-"+o()+"-"+o()+"-"+o()+"-"+o()+o()+o()}},{key:"onClose",value:function(){this.setState({preview:null})}},{key:"onCrop",value:function(o){this.setState({preview:o})}},{key:"onBeforeFileLoad",value:function(o){o.target.files[0].size>1024*1024*10&&(alert(_l("\u56FE\u7247\u8FC7\u5927"),2),o.target.value="")}},{key:"render",value:function(){var o=this,_=this.state,y=_.avatar,R=_.preview;return y?v.createElement("div",{className:"mTop25"},v.createElement("div",{className:"flexRow",style:{minHeight:200}},v.createElement(L(),{label:_l("\u4E0A\u4F20\u56FE\u7247"),labelStyle:{display:"block",cursor:"pointer",fontWeight:700,fontSize:"16px"},width:200,height:200,imageWidth:200,onCrop:this.onCrop,onClose:this.onClose,onBeforeFileLoad:this.onBeforeFileLoad,src:this.state.src}),v.createElement("div",{className:"reviewBox"},v.createElement("span",{className:"Block Gray_9e mBottom16"},_l("\u9884\u89C8")),v.createElement("img",{src:R||y,style:{width:80,height:80,borderRadius:"50%"}}))),(0,t.Q9)()?v.createElement(H,{className:"actionBox"},v.createElement("div",{className:"cancle Font14 Bold mRight5 TxtCenter",onClick:function(){o.props.closeDialog()}},_l("\u53D6\u6D88")),v.createElement("div",{className:"save Hand Font14 Bold mLeft5 TxtCenter",onClick:function(){o.onSave()}},_l("\u786E\u8BA4"))):v.createElement("div",{className:"flexEnd"},v.createElement(g.ZP,{type:"button",className:"ming Button Button--primary mTop20 saveBtn",onClick:this.onSave},_l("\u5B8C\u6210")))):null}}]),N}(v.Component),Z.isUploading=!1,F)}}]);
