(self.webpackChunkmingdao_web=self.webpackChunkmingdao_web||[]).push([[5327],{68988:U=>{U.exports=`{{?it.restCalCount || it.calendars}}
    {{? it.isFirst}}
    <div class="calendarListHeader">
        <ul>
            <li>
                <div class="calendarListColor">{{! _l('\u5206\u7C7B')}}</div>
                <div class="calendarListDate">{{!_l('\u65E5\u671F')}}</div>
                <div class="calendarListTime">{{!_l('\u65F6\u95F4')}}</div>
                <div class="calendarListName">{{!_l('\u53D1\u8D77\u4EBA')}}</div>
                <div class="calendarListTitle">{{!_l('\u4E8B\u4EF6')}}</div>
                <div class="Clear"></div>
            </li>
        </ul>
    </div>
    <div class="calendarList">
    {{?}}
        {{~it.calendars:calendar:i}}
            <div class="calendarListModel">
                <ul>
                    <li data-id="{{!calendar.eventID }}" data-time="{{!it.moment(calendar.start).format('YYYY-MM-DD')}}" data-recurtime="{{=calendar.recurTime ? it.moment(calendar.recurTime).toISOString() : ''}}" data-time-ms="{{!new Date(calendar.start).getTime() }}" class="pointer" data-istask="{{=calendar.isTask}}">
                        <div class="calendarListColor"><span class="{{!it.colorClass(calendar.backgroundColor) }}"></span></div>
                        <div class="calendarListDate">{{=it.moment(calendar.start).format('MMMDo')}}</div>
                        <div class="calendarListTime">{{?calendar.allDay}}{{!_l('\u5168\u5929') }}{{??}}{{!it.moment(calendar.startTime).format('HH:mm')}} - {{!it.moment(calendar.endTime).format('HH:mm')}}{{?}}</div>
                        <div class="calendarListName">{{!calendar.createUserName }}</div>
                        <div class="calendarListTitle">{{!calendar.title }}</div>
                    </li>
                </ul>
            </div>
        {{~}}
    {{? it.isFirst}}
        <div class="calendarListMore {{? it.restCalCount === 0}}Hidden{{?}}">
            <a href="javascript:void(0);" id="calendarListMore" queryend="{{!it.queryEnd }}" restcalcount="{{!it.restCalCount }}">{{!_l('\u66F4\u591A\u65E5\u7A0B...')}}</a> {{!_l('\u81F3')}} <span id="calendarListMoreData">{{!it.queryEnd }}</span>
        </div>
    </div>
    {{?}}
{{??}}
    <div class="calendarNoList">
        {{!_l('\u672A\u627E\u5230\u4ECA\u540E\u7684\u65E5\u7A0B\u5217\u8868') }}<br />
        {{!_l('\u60A8\u53EF\u4EE5\u521B\u5EFA\u65B0\u65E5\u7A0B\u6216\u4F7F\u7528\u5FEB\u6377\u952E') }}<span class="calendarNoListC">C</span>{{!_l('\u521B\u5EFA') }}<br />
        <span class="calendarNoListBtn pointer">{{!_l('\u521B\u5EFA\u65B0\u65E5\u7A0B') }}</span>
    </div>
{{?}}
`},89616:U=>{U.exports=`<div class="classificationCalendarList">
    <ul>
        {{~it:category}}
            ##classificationCalendarList##
        {{~}}
    </ul>
</div>
<a href="javascript:void(0);" class="classificationCalendarListAdd"><span class="icon-plus iconAdd"></span><span>{{= _l('\u6DFB\u52A0\u65B0\u5206\u7C7B')}}</span></a>`},13286:U=>{U.exports=`<li catid="{{!it ? category.catID : ''}}">
    <div class="classificationListColumn">{{=_l('\u540D\u79F0')}}</div>
    <div class="classificationListColumnOperation">
        <input type="text" class="classificationListName ThemeBorderColor3" value="{{!it ? category.catName : ''}}" placeholder="{{=_l('\u8BF7\u8F93\u5165\u5206\u7C7B\u65E5\u7A0B\u540D\u79F0')}}"/>
        <div class="classificationListDropdown">            
            <span class="{{!it ? it.colorClass(category.color) : 'colorBlockGreen'}} colorBlock"></span>
            <i class="icon-arrow-down-border iconDown"></i>
            <div class="colorBlockMain">
                <div class="colorBlockList overflow_ellipsis" title="{{= _l('\u7EA2\u8272')}}">
                    <span class="colorBlockRed"></span> {{= _l('\u7EA2\u8272')}}
                </div>
                <div class="colorBlockList overflow_ellipsis" title="{{= _l('\u7D2B\u8272')}}">
                    <span class="colorBlockViolet"></span> {{= _l('\u7D2B\u8272')}}
                </div>
                <div class="colorBlockList overflow_ellipsis" title="{{= _l('\u8910\u8272')}}">
                    <span class="colorBlockBrown"></span> {{= _l('\u8910\u8272')}}
                </div>
                <div class="colorBlockList overflow_ellipsis" title="{{= _l('\u6A59\u8272')}}">
                    <span class="colorBlockOrange"></span> {{= _l('\u6A59\u8272')}}
                </div>
                <div class="colorBlockList overflow_ellipsis" title="{{= _l('\u84DD\u8272')}}">
                    <span class="colorBlockBlue"></span> {{= _l('\u84DD\u8272')}}
                </div>
                <div class="colorBlockList overflow_ellipsis" title="{{= _l('\u7EFF\u8272')}}">
                    <span class="colorBlockGreen"></span> {{= _l('\u7EFF\u8272')}}
                </div>
                <div class="colorBlockList overflow_ellipsis" title="{{= _l('\u9EC4\u8272')}}">
                    <span class="colorBlockYellow"></span> {{= _l('\u9EC4\u8272')}}
                </div>
            </div>
        </div>
    </div>
    <a href="javascript:void(0);" class="Left classificationListDel icon-delete" title="{{=_l('\u5220\u9664')}}"></a>
    <div class="Clear"></div>
</li>`},72969:U=>{U.exports=`{{~it:user}}
    {{? user.accountID != md.global.Account.accountId}}
        <div class="addOtherUser boxSizing" data-id="{{!user.accountID}}" >
            <span class="addOtherUserHeadImg noInsert circle showBusinessCard pointer" data-src="{{!user.avatar}}"></span>
            <span class="ThemeColor9">{{!user.fullName}}</span>
            <i class="addOtherUserDelImg icon-delete ThemeColor9 ThemeHoverColor10"></i>
        </div>
    {{?}}
{{~}}
`},27142:U=>{U.exports=`{{~it.calendars:calendar}}
<li id="inviteSinlge_{{!calendar.id}}">
    <div class="inviteSinlge">
        <div class="inviteCalName">
            <span class="inviteCalendarType editColorModel pointer"><i class="editColor calendarColorBlue"></i><i class="icon-arrow-down-border"></i><div class="inviteCalendarTypeList"><ul></ul></div></span>{{!calendar.title}}</div>
        <div class="inviteContent">
            <div class="calTime">
                <span class="icon-clock inviteIcon"></span><span class="Gray_9">{{=_l('\u65F6\u95F4')}}:</span>
                <span class="rightLabel">
                    {{!it.TplComm.formatInviteData(calendar.startTime, calendar.endTime, calendar.isAllDay, 0)}}
                </span>
            </div>
            <div class="calAddress mTop15 clearfix">
                <div class="Left">
                    <span class="icon-location inviteIcon"></span><span class="Gray_9">{{=_l('\u5730\u70B9')}}:</span>
                </div>
                {{? !calendar.address}}
                    <span class="Gray_c rightLabel">{{=_l('\u672A\u586B\u5199\u5730\u5740')}}</span>
                {{??}}
                    <span class="rightLabel">{{!calendar.address}}</span>
                {{?}}
            </div>
            <div class="calMembers mTop15">
                <div class="participants">
                    <span class="icon-charger inviteIcon"></span><span class="Gray_9">{{=_l('\u6210\u5458:')}}</span>
                </div>
                <div class="Left memberBox">
                    <div class="createUser">
                        <span class="pointer mRight15 InlineBlock mBottom5 Relative showBusinessCard" data-id="{{!calendar.createUser}}" data-avatar="{{!calendar.head}}" data-status="{{!calendar.status}}" data-name="{{!calendar.createUserName}}" data-isCalendar="true">
                            <img class="circle userHead" src="{{!calendar.head}}" />
                            <span class="TxtTop calendarName">{{!calendar.createUserName}}</span>
                            <span class="Gray_6 TxtTop calendarName">{{=_l('(\u53D1\u8D77\u4EBA)')}}</span>
                        </span>
                    </div>
                    <div class="members">
                        {{~ calendar.members:member}}
                            <span title="{{!member.remark}}" class="pointer mRight15 InlineBlock mBottom5 Relative showBusinessCard" data-id="{{!member.accountID}}" data-status="{{!member.status}}" data-avatar="{{!member.head}}" data-name="{{!member.memberName}}">
                                <img class="circle userHead" src="{{!member.head}}" />
                                {{? member.status==0}}
                                <span class="userStatus calendarCenterLabelNosubmit"></span>
                                {{?? member.status==1}}
                                <span class="userStatus calendarCenterLabelSubmit"></span>
                                {{?? member.status==2}}
                                <span class="userStatus calendarCenterLabelRefuse"></span>
                                {{?}}
                                <span class="TxtTop calendarName">{{!member.memberName}}</span>
                            </span>
                        {{~}}
                    </div>
                    {{?calendar.thirdUserList}}
                    <div class="wechatMemberTitle">\u901A\u8FC7\u65E5\u7A0B\u5206\u4EAB\u52A0\u5165\u7684\u7528\u6237</div>
                    <div class="wechatMemberList">
                        <div class="wechatMembers">
                            {{~calendar.thirdUserList:thirdUser}}
                            <span class="pointer mRight15 InlineBlock mBottom5 Relative showBusinessCard" data-thirdId="{{!thirdUser.thirdID}}">
                                <img class="circle userHead" src="{{!thirdUser.face}}">
                                <span class="userStatus calendarCenterLabelSubmit"></span>
                                <span class="TxtTop calendarName overflow_ellipsis">{{!thirdUser.nickName}}</span>
                            </span>
                            {{~}}
                        </div>
                    </div>
                    {{?}}
                </div>
                <div class="Clear"></div>
            </div>
            <div class="calDesc mTop15 Gray_9 clearfix">
                <div class="Left">
                    <span class="icon-calendar-abstract inviteIcon"></span><span class="Gray_9">{{=_l('\u6458\u8981')}}:</span>
                </div>
                {{? !calendar.description}}
                    <span class="Gray_c rightLabel">{{=_l('\u672A\u586B\u5199\u6458\u8981')}}</span>
                {{??}}
                    <span class="rightLabel">{{= calendar.description}}</span>
                {{?}}
            </div>
            {{? calendar.isRecur && !calendar.isChildCalendar}}
            <div class="repeatDesc mTop15">
                <div id="calendarInviteRepeat">
                    <img src="../../images/repeat_ico.png" alt=""/>
                    <label class=" Gray_9 ">{{= _l('\u91CD\u590D')}}:</label>
                    <span class="repeatDetialDes mLeft10 rightLabel">{{!calendar.repeat}}</span>
                    <div class="Clear"></div>
                </div>
            </div>
            {{?}}
            {{? calendar.isPrivate}}
            <div class="isPrivate mTop15 Gray_9">
                <div id="calendarIsPrivate">
                    <span class="checkboxIcon checked"></span>
                    <label class="rightLabel">{{= _l('\u79C1\u5BC6\u65E5\u7A0B')}}</label>
                </div>
            </div>
            {{?}}
            <div class="operator" data-calendarid="{{!calendar.id}}" data-recurtime="{{=calendar.recurTime ? it.moment(calendar.recurTime).toISOString() : ''}}">
                <span class="btnBootstrap btnBootstrapPadding boderRadAll_3 enterInvite">
                    {{= _l('\u786E\u8BA4')}}</span> <span class="btnBootstrap btnBootstrapPadding boderRadAll_3 mLeft10 refuseInvite">{{= _l('\u4E0D\u80FD\u53C2\u52A0')}}</span>
            </div>
        </div>
    </div>
</li>
{{~}}
`},61496:U=>{U.exports=`<li catid="1" title="{{= _l('\u5DE5\u4F5C\u65E5\u7A0B') }}">
    {{? it.catID === '1'}} <i class="icon-ok selectIcon"></i> {{?}}
    <i class="calendarColorBlue editColor"></i>
    <span>{{= _l('\u5DE5\u4F5C\u65E5\u7A0B') }}</span>
</li>
{{~ it.cats:cat}}
<li catid="{{! cat.catID}}" title="{{!cat.catName}}">
    {{? cat.catID === it.catID}} <i class="icon-ok selectIcon"></i> {{?}}
    <i class="editColor {{!it.colorClass(cat.color)}}"></i>
    <span>{{!cat.catName}}</span>
</li>
{{~}}
`},90239:U=>{U.exports=`<table class="synchronousMain">
    <tr>
        <td class="synchronousMainFontSize20">{{=_l('\u540C\u6B65\u65E5\u7A0B\u5230\u60A8\u7684outlook\u6216\u5176\u4ED6\u5E94\u7528')}}</td>
    </tr>
    <tr>
        <td class="synchronousMainDescription">{{=_l('\u8BF7\u4F7F\u7528\u4EE5\u4E0B\u7F51\u5740\u901A\u8FC7\u5176\u4ED6\u5E94\u7528\u8BBF\u95EE\u4F7F\u7528\u60A8\u7684\u65E5\u5386\u3002\u53EF\u5C06\u5176\u590D\u5236\u7C98\u8D34\u5230\u4EFB\u4F55\u652F\u6301iCal\u683C\u5F0F\u7684\u65E5\u5386\u4EA7\u54C1\u4E2D')}}</td>
    </tr>
    <tr>
        <td class="synchronousMainStyle">
            <a id="icalURL" href="{{!it}}" class="synchronousBtn1 btnBootstrap btnBootstrap-primary btnBootstrap-small">{{=_l('\u6DFB\u52A0\u8BA2\u9605')}}</a>
            <a id="clipinner" class="synchronousMargin" data-clipboard-text="{{!it.replace(/webcal:/, location.protocol)}}">
                {{=_l('\u590D\u5236Internet\u65E5\u5386\u5730\u5740')}}
            </a>
        </td>
    </tr>
    <tr>
        <td class="synchronousBorder">
            <p class="synchronousPStyle1">
                {{=_l('iCal\u53C8\u79F0iCalendar-\u4F7F\u7528\u8FD9\u79CD\u683C\u5F0F\u53EF\u4EE5\u4ECE\u5176\u4ED6\u5E94\u7528\u7A0B\u5E8F\u4E2D\u67E5\u770B\u60A8\u5F53\u524D\u65E5\u5386\u7684\u53EA\u8BFB\u7248\u672C')}}<br/>
                <span class="ThemeColor3">{{=_l('\u8BF7\u6309\u4E0B\u5217\u6B65\u9AA4\u64CD\u4F5C\uFF0C\u6765\u4F7F\u7528\u60A8\u7684\u65E5\u5386\u7F51\u5740')}}</span>
            </p>
        </td>
    </tr>
    <tr>
        <td class="synchronousBg">
            <table id="iCalAbout" cellspacing="0" cellpadding="0">
                <tr>
                    <td type="1" class="ThemeBGColor5 Select synchronousSelect" >Microsoft Outlook</td>
                    <td rowspan="3" id="iCalContent" class="pTop3 pLeft10">
                        <span class="synchronousLineHeight24">1.{{=_l('\u5728\u672C\u9875\u4E0A\u65B9\uFF0C\u590D\u5236ICAL\u683C\u5F0F\u65E5\u5386\u7F51\u5740')}}</span><br/>
                        <span id="iCalContent_two">2.{{=_l('"\u6253\u5F00Outlook\uFF0C\u5728\u5DE5\u5177>\u8D26\u6237\u8BBE\u7F6E>Internet\u65E5\u5386\u4E2D\u65B0\u5EFA\uFF0C\u5E76\u7C98\u8D34
\u521A\u624D\u83B7\u5F97\u7684ICAL\u683C\u5F0F\u65E5\u5386\u5730\u5740"')}}</span>
                    </td>
                </tr>
                <tr>
                    <td type="2" class="synchronousSelect">{{=_l('Mac\u65E5\u5386')}}</td>
                </tr>
                <tr>
                    <td type="3" class="synchronousSelect">Google Calendar</td>
                </tr>
            </table>
        </td>
    </tr>
</table>`},61827:U=>{U.exports=`<ul id="sortable" class="ThemeBorderColor7">
    <li id="workCalendar">
        <i class="iconTickBlue iconTickM"></i>
        <span class="iconTickStyle {{!it.isWorkCalendar ? 'icon-calendar-check' : 'icon-calendar-nocheck'}} ThemeColor9"></span><span class="ThemeColor10">{{=_l('\u5DE5\u4F5C\u65E5\u7A0B')}}</span>
    </li>
    <li id="taskCalendar">
        <i class="iconTickGreen iconTickM"></i>
        <span class="iconTickStyle {{!it.isTaskCalendar ? 'icon-calendar-check' : 'icon-calendar-nocheck'}} ThemeColor9"></span><span id="filterTaskType" data-tasktype="{{!it.filterTaskType}}"><span class="filterTaskTypeName ThemeColor10">{{? it.filterTaskType == 1}}{{=_l('\u53C2\u4E0E\u7684\u4EFB\u52A1')}}{{?? it.filterTaskType == 2}}{{=_l('\u8D1F\u8D23\u7684\u4EFB\u52A1')}}{{??}}{{=_l('\u6258\u4ED8\u7684\u4EFB\u52A1')}}{{?}}</span><i class="icon-arrow-down-border ThemeColor10"></i></span>
        <div class="filterTaskTypeList">
            <ul>
                <li><i class="filterTaskTypeListIcon" data-tasktype="1"></i><span>{{=_l('\u53C2\u4E0E\u7684\u4EFB\u52A1')}}</span></li>
                <li><i class="filterTaskTypeListIcon" data-tasktype="2"></i><span>{{=_l('\u8D1F\u8D23\u7684\u4EFB\u52A1')}}</span></li>
                <li><i class="filterTaskTypeListIcon" data-tasktype="3"></i><span>{{=_l('\u6258\u4ED8\u7684\u4EFB\u52A1')}}</span></li>
            </ul>
        </div>
    </li>
</ul>`},65655:U=>{U.exports=`{{var listClass = "";}}
{{~it:category}}
    {{listClass = window.localStorage.getItem("categorys") !== null ? (window.localStorage.getItem("categorys").indexOf(category.catID) >= 0 ? 'icon-calendar-check' : 'icon-calendar-nocheck') : 'icon-calendar-check';}}
    <li class="allowDrop" catid="{{!category.catID}}">
      <i class="{{!it.colorClass(category.color,'list')}} iconTickM"></i>
      <span class="iconTickStyle {{!listClass}} ThemeColor9"></span><span class="ThemeColor10">{{!category.catName}}</span>
    </li>
{{~}}
`},15327:(U,Je,b)=>{"use strict";b.r(Je),b.d(Je,{default:()=>Xi});var Yt=b(46593),At=b.n(Yt),Bt=b(85105),Ot=b.n(Bt),Nt=b(99663),Vt=b(22600),zt=b(49135),Ft=b(93196),M=b(67294),De=b(72444),Gt=b(30381),g=b.n(Gt);var fe={firstLoading:!0,lang:"en",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,titleFormat:{month:"MMMM YYYY",week:"ll",day:"LL"},columnFormat:{month:"ddd",week:Ut,day:"dddd"},timeFormat:{default:Pt},displayEventEnd:{month:!1,basicWeek:!1,default:!0},isRTL:!1,defaultButtonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",today:"Today",month:"M",week:"W",day:"D"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200};function Pt(r,e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")}function Ut(r,e){var t=e.longDateFormat("L");return t=t.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),r.isRTL?t+=" ddd":t="ddd "+t,t}var pe={en:{columnFormat:{week:"ddd M/D"},dayPopoverFormat:"dddd, MMMM D"}},Wt={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}},F=$.fullCalendar={version:"2.1.0"},Ce=F.views={};$.fn.fullCalendar=function(r){var e=Array.prototype.slice.call(arguments,1),t=this;return this.each(function(i,n){var a=$(n),s=a.data("fullCalendar"),o;typeof r=="string"?s&&$.isFunction(s[r])&&(o=s[r].apply(s,e),i||(t=o),r==="destroy"&&a.removeData("fullCalendar")):s||(s=new Zt(a,r),a.data("fullCalendar",s),s.render())}),t};function qe(r){we(fe,r)}function we(r){function e(i,n){$.isPlainObject(n)&&$.isPlainObject(r[i])&&!_e(i)?r[i]=we({},r[i],n):n!==void 0&&(r[i]=n)}for(var t=1;t<arguments.length;t++)$.each(arguments[t],e);return r}function _e(r){return/(Time|Duration)$/.test(r)}F.langs=pe,F.datepickerLang=function(r,e,t){var i=pe[r];i||(i=pe[r]={}),we(i,{isRTL:t.isRTL,weekNumberTitle:t.weekHeader,titleFormat:{month:t.showMonthAfterYear?"YYYY["+t.yearSuffix+"] MMMM":"MMMM YYYY["+t.yearSuffix+"]"},defaultButtonText:{prev:Oe(t.prevText),next:Oe(t.nextText),today:Oe(t.currentText)}}),$.datepicker&&($.datepicker.regional[e]=$.datepicker.regional[r]=t,$.datepicker.regional.en=$.datepicker.regional[""],$.datepicker.setDefaults(t))},F.lang=function(r,e){var t;e&&(t=pe[r],t||(t=pe[r]={}),we(t,e||{})),fe.lang=r};function Zt(r,e){var t=this;e=e||{};var i=we({},fe,e),n;i.lang in pe?n=pe[i.lang]:n=pe[fe.lang],n&&(i=we({},fe,n,e)),i.isRTL&&(i=we({},fe,Wt,n||{},e)),t.options=i,t.render=Q,t.destroy=te,t.refetchEvents=D,t.reportEvents=x,t.reportEventChange=E,t.rerenderEvents=R,t.changeView=ie,t.select=z,t.unselect=O,t.prev=le,t.next=J,t.prevYear=ne,t.nextYear=ue,t.today=q,t.gotoDate=G,t.incrementDate=ce,t.zoomTo=Ee,t.getDate=de,t.getCalendar=Qi,t.getView=Ki,t.option=Ji,t.trigger=qi,t.exit=a;function a(){fe.firstLoading=!0}function s(T){var L=g().localeData||g().langData;return L.call(g(),T)||L.call(g(),"en")}var o=_(s(i.lang));if(i.monthNames&&(o._months=i.monthNames),i.monthNamesShort&&(o._monthsShort=i.monthNamesShort),i.dayNames&&(o._weekdays=i.dayNames),i.dayNamesShort&&(o._weekdaysShort=i.dayNamesShort),i.firstDay!=null){var l=_(o._week);l.dow=i.firstDay,o._week=l}t.defaultAllDayEventDuration=g().duration(i.defaultAllDayEventDuration),t.defaultTimedEventDuration=g().duration(i.defaultTimedEventDuration),t.moment=function(){var T;return i.timezone==="local"?(T=F.moment.apply(null,arguments),T.hasTime()&&T.local()):i.timezone==="UTC"?T=F.moment.utc.apply(null,arguments):T=F.moment.parseZone.apply(null,arguments),"_locale"in T?T._locale=o:T._lang=o,T},t.getIsAmbigTimezone=function(){return i.timezone!=="local"&&i.timezone!=="UTC"},t.rezoneDate=function(T){return t.moment(T.toArray())},t.getNow=function(){var T=i.now;return typeof T=="function"&&(T=T()),t.moment(T)},t.calculateWeekNumber=function(T){var L=i.weekNumberCalculation;if(typeof L=="function")return L(T);if(L==="local")return T.week();if(L.toUpperCase()==="ISO")return T.isoWeek()},t.getEventEnd=function(T){return T.end?T.end.clone():t.getDefaultEventEnd(T.allDay,T.start)},t.getDefaultEventEnd=function(T,L){var ae=L.clone();return T?ae.stripTime().add(t.defaultAllDayEventDuration):ae.add(t.defaultTimedEventDuration),t.getIsAmbigTimezone()&&ae.stripZone(),ae},t.formatRange=function(T,L,ae){return typeof ae=="function"&&(ae=ae.call(t,i,o)),vt(T,L,ae,null,i.isRTL)},t.formatDate=function(T,L){return typeof L=="function"&&(L=L.call(t,i,o)),ut(T,L)},Qt.call(t,i);var c=t.isFetchNeeded,f=t.fetchEvents,u=r[0],v,m,k,H,S,I,V,B=0,Y,W=[];i.defaultDate!=null?Y=t.moment(i.defaultDate):Y=t.getNow();function Q(T){k?Z()&&(re(),P(T)):N()}function N(){H=i.theme?"ui":"fc",r.addClass("fcOld"),i.isRTL?r.addClass("fc-rtl"):r.addClass("fc-ltr"),i.theme?r.addClass("ui-widget"):r.addClass("fc-unthemed");var T=$('<div class="fc-view-container-box"></div>');T.prependTo(r),k=$("<div class='fc-view-container'/>").prependTo(T),v=new jt(t,i),m=v.render(),m&&r.prepend(m),ie(i.defaultView),i.handleWindowResize&&(V=ht(C,i.windowResizeDelay),$(window).resize(V))}function te(){S&&S.destroy(),v.destroy(),k.remove(),r.removeClass("fcOld fc-ltr fc-rtl fc-unthemed ui-widget"),$(window).unbind("resize",V)}function Z(){return r.is(":visible")}function ie(T){P(0,T)}function P(T,L){B++,S&&L&&S.name!==L&&(v.deactivateButton(S.name),Ie(),S.start&&S.destroy(),S.el.remove(),S=null),!S&&L&&(S=new Ce[L](t),S.el=$("<div class='fc-view fc-"+L+"-view' />").appendTo(k),v.activateButton(L)),S&&(T&&(Y=S.incrementDate(Y,T)),(!S.start||T||!Y.isWithin(S.intervalStart,S.intervalEnd))&&Z()&&(Ie(),S.start&&S.destroy(),S.render(Y),Re(),A(),K(),fe.firstLoading&&(w(),fe.firstLoading=!1))),Re(),B--}t.getSuggestedViewHeight=function(){return I===void 0&&re(),I},t.isHeightAuto=function(){return i.contentHeight==="auto"||i.height==="auto"};function oe(T){if(Z())return T&&he(),B++,S.updateSize(!0),B--,!0}function re(){Z()&&he()}function he(){typeof i.contentHeight=="number"?I=i.contentHeight:typeof i.height=="number"?I=i.height-(m?m.outerHeight(!0):0):I=Math.round(k.width()/Math.max(i.aspectRatio,.5))}function C(T){!B&&T.target===window&&S.start&&oe(!0)&&S.trigger("windowResize",u)}function D(){d(),y()}function R(){Z()&&(Ie(),S.destroyEvents(),S.renderEvents(W),Re())}function d(){Ie(),S.destroyEvents(),Re()}function w(){!i.lazyFetching||c(S.start,S.end)?y():R()}function y(){f(S.start,S.end)}function x(T){W=T,R()}function E(){R()}function A(){v.updateTitle(S.title)}function K(){var T=t.getNow();T.isWithin(S.intervalStart,S.intervalEnd)?v.disableButton("today"):v.enableButton("today")}function z(T,L){T=t.moment(T),L?L=t.moment(L):T.hasTime()?L=T.clone().add(t.defaultTimedEventDuration):L=T.clone().add(t.defaultAllDayEventDuration),S.select(T,L)}function O(){S&&S.unselect()}function le(){P(-1)}function J(){P(1)}function ne(){Y.add(-1,"years"),P()}function ue(){Y.add(1,"years"),P()}function q(){Y=t.getNow(),P()}function G(T){Y=t.moment(T),P()}function ce(T){Y.add(g().duration(T)),P()}function Ee(T,L){var ae,He;(!L||Ce[L]===void 0)&&(L=L||"day",ae=v.getViewsWithButtons().join(" "),He=ae.match(new RegExp("\\w+"+ft(L))),He||(He=ae.match(/\w+Day/)),L=He?He[0]:"agendaDay"),Y=T,ie(L)}function de(){return Y.clone()}function Ie(){k.css({width:"100%",height:k.height(),overflow:"hidden"})}function Re(){k.css({width:"",height:"",overflow:""})}function Qi(){return t}function Ki(){return S}function Ji(T,L){if(L===void 0)return i[T];(T=="height"||T=="contentHeight"||T=="aspectRatio")&&(i[T]=L,oe(!0))}function qi(T,L){if(i[T])return i[T].apply(L||u,Array.prototype.slice.call(arguments,2))}}function jt(r,e){var t=this;t.render=s,t.destroy=o,t.updateTitle=c,t.activateButton=f,t.deactivateButton=u,t.disableButton=v,t.enableButton=m,t.getViewsWithButtons=k;var i=$(),n=[],a;function s(){var H=e.header;if(a=e.theme?"ui":"fc",H)return i=$("<div class='fc-toolbar'/>").append(l("left")).append(l("right")).append(l("center")).append('<div class="fc-clear"/>'),i}function o(){i.remove()}function l(H){var S=$('<div class="fc-'+H+'"/>'),I=e.header[H];return I&&$.each(I.split(" "),function(V){var B=$(),Y=!0,W;$.each(this.split(","),function(Q,N){var te,Z,ie,P,oe,re,he,C;N=="title"?(B=B.add($("<h2>&nbsp;</h2>")),Y=!1):(r[N]?te=function(){r[N]()}:Ce[N]&&(te=function(){r.changeView(N)},n.push(N)),te&&(Z=ke(e.themeButtonIcons,N),ie=ke(e.buttonIcons,N),P=ke(e.defaultButtonText,N),oe=ke(e.buttonText,N),oe?re=j(oe):Z&&e.theme?re="<span class='ui-icon ui-icon-"+Z+"'></span>":ie&&!e.theme?re="<span class='fc-icon fc-icon-"+ie+"'></span>":re=j(P||N),he=["fc-"+N+"-button",a+"-button",a+"-state-default"],C=$('<button type="button" class="'+he.join(" ")+'">'+re+"</button>").click(function(){C.hasClass(a+"-state-disabled")||(fe.firstLoading=!0,te(),(C.hasClass(a+"-state-active")||C.hasClass(a+"-state-disabled"))&&C.removeClass(a+"-state-hover"))}).mousedown(function(){C.not("."+a+"-state-active").not("."+a+"-state-disabled").addClass(a+"-state-down")}).mouseup(function(){C.removeClass(a+"-state-down")}).hover(function(){C.not("."+a+"-state-active").not("."+a+"-state-disabled").addClass(a+"-state-hover")},function(){C.removeClass(a+"-state-hover").removeClass(a+"-state-down")}),B=B.add(C)))}),Y&&B.first().addClass(a+"-corner-left").end().last().addClass(a+"-corner-right").end(),B.length>1?(W=$("<div/>"),Y&&W.addClass("fc-button-group"),W.append(B),S.append(W)):S.append(B)}),S}function c(H){i.find("h2").text(H)}function f(H){i.find(".fc-"+H+"-button").addClass(a+"-state-active")}function u(H){i.find(".fc-"+H+"-button").removeClass(a+"-state-active")}function v(H){i.find(".fc-"+H+"-button").attr("disabled","disabled").addClass(a+"-state-disabled")}function m(H){i.find(".fc-"+H+"-button").removeAttr("disabled").removeClass(a+"-state-disabled")}function k(){return n}}F.sourceNormalizers=[],F.sourceFetchers=[];var _i={dataType:"json",cache:!1},Xt=1;function Qt(r){var e=this;e.isFetchNeeded=k,e.fetchEvents=H,e.addEventSource=V,e.removeEventSource=Y,e.updateEvent=N,e.renderEvent=ie,e.removeEvents=P,e.clientEvents=oe,e.mutateEvent=D;var t=e.trigger,i=e.getView,n=e.reportEvents,a=e.getEventEnd,s={events:[]},o=[s],l,c,f=0,u=0,v=0,m=[];$.each((r.events?[r.events]:[]).concat(r.eventSources||[]),function(d,w){var y=B(w);y&&o.push(y)});function k(d,w){return!l||d.clone().stripZone()<l.clone().stripZone()||w.clone().stripZone()>c.clone().stripZone()}function H(d,w){l=d,c=w,m=[];var y=++f,x=o.length;u=x;for(var E=0;E<x;E++)S(o[E],y)}function S(d,w){I(d,function(y){var x=$.isArray(d.events),E,A;if(w==f){if(y)for(E=0;E<y.length;E++)A=y[E],x||(A=C(A,d)),A&&m.push(A);u--,u||n(m)}})}function I(d,w){var y,x=F.sourceFetchers,E;for(y=0;y<x.length;y++){if(E=x[y].call(e,d,l.clone(),c.clone(),r.timezone,w),E===!0)return;if((typeof E>"u"?"undefined":(0,De.default)(E))=="object"){I(E,w);return}}var A=d.events;if(A)$.isFunction(A)?(re(),A.call(e,l.clone(),c.clone(),r.timezone,function(ce){w(ce),he()})):$.isArray(A)?w(A):w();else{var K=d.url;if(K){var z=d.success,O=d.error,le=d.complete,J;$.isFunction(d.data)?J=d.data():J=d.data;var ne=$.extend({},J||{}),ue=Se(d.startParam,r.startParam),q=Se(d.endParam,r.endParam),G=Se(d.timezoneParam,r.timezoneParam);ue&&(ne[ue]=g()(l.format()).format()),q&&(ne[q]=g()(c.format()).format()),r.timezone&&r.timezone!="local"&&(ne[G]=r.timezone),re(),d.url(ne).then(function(ce){ce=ce.data.calendars||[];var Ee=Be(z,this,arguments);$.isArray(Ee)&&(ce=Ee),ce.forEach(function(de){!de.allDay&&g()(de.startTime).format("YYYY-MM-DD")!==g()(de.endTime).format("YYYY-MM-DD")&&(de.allDay=!0),de.allDay&&!de.isAllDay&&g()(de.startTime).format("YYYY-MM-DD")===g()(de.endTime).format("YYYY-MM-DD")&&(de.allDay=!1)}),w(ce),he()}).catch(function(){Be(O,this,arguments),w()})}else w()}}function V(d){var w=B(d);w&&(o.push(w),u++,S(w,f))}function B(d){var w=F.sourceNormalizers,y,x;if($.isFunction(d)||$.isArray(d)?y={events:d}:typeof d=="string"?y={url:d}:(typeof d>"u"?"undefined":(0,De.default)(d))==="object"&&(y=$.extend({},d)),y){for(y.className?typeof y.className=="string"&&(y.className=y.className.split(/\s+/)):y.className=[],$.isArray(y.events)&&(y.events=$.map(y.events,function(E){return C(E,y)})),x=0;x<w.length;x++)w[x].call(e,y);return y}}function Y(d){o=$.grep(o,function(w){return!W(w,d)}),m=$.grep(m,function(w){return!W(w.source,d)}),n(m)}function W(d,w){return d&&w&&Q(d)==Q(w)}function Q(d){return((typeof d>"u"?"undefined":(0,De.default)(d))=="object"?d.events||d.url:"")||d}function N(d){d.start=e.moment(d.start),d.end&&(d.end=e.moment(d.end)),D(d),Z(d),n(m)}var te=["title","url","allDay","className","editable","color","backgroundColor","borderColor","textColor"];function Z(d){var w,y,x,E;for(w=0;w<m.length;w++)if(y=m[w],y._id==d._id&&y!==d)for(x=0;x<te.length;x++)E=te[x],d[E]!==void 0&&(y[E]=d[E])}function ie(d,w){var y=C(d);y&&(y.source||(w&&(s.events.push(y),y.source=s),m.push(y)),n(m))}function P(d){var w,y;for(d==null?d=function(){return!0}:$.isFunction(d)||(w=d+"",d=function(E){return E._id==w}),m=$.grep(m,d,!0),y=0;y<o.length;y++)$.isArray(o[y].events)&&(o[y].events=$.grep(o[y].events,d,!0));n(m)}function oe(d){return $.isFunction(d)?$.grep(m,d):d!=null?(d+="",$.grep(m,function(w){return w._id==d})):m}function re(){v++||t("loading",null,!0,i())}function he(){--v||t("loading",null,!1,i())}function C(d,w){var y={},x,E,A,K,z=g()(d.start).format("YYYY-MM-DD")!==g()(d.end).format("YYYY-MM-DD")&&d.start.substr(0,10)===d.end.substr(0,10),O=g()(d.start).format("YYYY-MM-DD")===g()(d.end).add("d",-1).format("YYYY-MM-DD")&&d.start.substr(0,10)!==d.end.substr(0,10);if(r.eventDataTransform&&(d=r.eventDataTransform(d)),w&&w.eventDataTransform&&(d=w.eventDataTransform(d)),x=e.moment(d.start||d.date),!!x.isValid()&&(E=null,!(d.end&&(E=e.moment(d.end),!E.isValid()))))return A=d.allDay,A===void 0&&(K=Se(w?w.allDayDefault:void 0,r.allDayDefault),K!==void 0?A=K:A=!x.hasTime()&&(!E||!E.hasTime())),A?(x.hasTime()&&x.stripTime(),E&&E.hasTime()&&E.stripTime(),(d.isTask||z)&&(E=E.add(1,"d"))):(x.hasTime()||(x=e.rezoneDate(x)),E&&O&&(E=E.add("d",-1)),E&&!E.hasTime()&&(E=e.rezoneDate(E))),$.extend(y,d),w&&(y.source=w),y._id=d._id||(d.id===void 0?"_fc"+Xt++:d.id+""),d.className?typeof d.className=="string"?y.className=d.className.split(/\s+/):y.className=d.className:y.className=[],y.allDay=A,y.start=x,y.end=E,r.forceEventDuration&&!y.end&&(y.end=a(y)),Ye(y),y}function D(d,w,y){var x=d._allDay,E=d._start,A=d._end,K=!1,z,O,le,J;return!w&&!y&&(w=d.start,y=d.end),d.allDay!=x?z=d.allDay:z=!(w||y).hasTime(),z&&(w&&(w=w.clone().stripTime()),y&&(y=y.clone().stripTime())),w&&(z?O=$e(w,E.clone().stripTime()):O=$e(w,E)),z!=x?K=!0:y&&(le=$e(y||e.getDefaultEventEnd(z,w||E),w||E).subtract($e(A||e.getDefaultEventEnd(x,E),E))),J=R(d.isChildCalendar?[d]:oe(d._id),K,z,O,le),{dateDelta:O,durationDelta:le,undo:J}}function R(d,w,y,x,E){var A=e.getIsAmbigTimezone(),K=[];return $.each(d,function(z,O){var le=O._allDay,J=O._start,ne=O._end,ue=y!=null?y:le,q=J.clone(),G=!w&&ne?ne.clone():null;ue?(q.stripTime(),G&&G.stripTime()):(q.hasTime()||(q=e.rezoneDate(q)),G&&!G.hasTime()&&(G=e.rezoneDate(G))),!G&&(r.forceEventDuration||+E)&&(G=e.getDefaultEventEnd(ue,q)),q.add(x),G&&G.add(x).add(E),A&&(+x||+E)&&(q.stripZone(),G&&G.stripZone()),O.allDay=ue,O.start=q,O.end=G,Ye(O),K.push(function(){O.allDay=le,O.start=J,O.end=ne,Ye(O)})}),function(){for(var z=0;z<K.length;z++)K[z]()}}}function Ye(r){r._allDay=r.allDay,r._start=r.start.clone(),r._end=r.end?r.end.clone():null}function et(r,e){e.left&&r.css({"border-left-width":1,"margin-left":e.left-1}),e.right&&r.css({"border-right-width":1,"margin-right":e.right-1})}function tt(r){r.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function it(r,e,t){var i=Math.floor(e/r.length),n=Math.floor(e-i*(r.length-1)),a=[],s=[],o=[],l=0;rt(r),r.each(function(c,f){var u=c===r.length-1?n:i,v=$(f).outerHeight(!0);v<u?(a.push(f),s.push(v),o.push($(f).height())):l+=v}),t&&(e-=l,i=Math.floor(e/a.length),n=Math.floor(e-i*(a.length-1))),$(a).each(function(c,f){var u=c===a.length-1?n:i,v=s[c],m=o[c],k=u-(v-m);v<u&&$(f).height(k)})}function rt(r){r.height("")}function nt(r){var e=0;return r.find("> *").each(function(t,i){var n=$(i).outerWidth();n>e&&(e=n)}),e++,r.width(e),e}function at(r,e){return r.height(e).addClass("fc-scroller"),r[0].scrollHeight-1>r[0].clientHeight?!0:(Ae(r),!1)}function Ae(r){r.height("").removeClass("fc-scroller")}function st(r){var e=r.css("position"),t=r.parents().filter(function(){var i=$(this);return/(auto|scroll)/.test(i.css("overflow")+i.css("overflow-y")+i.css("overflow-x"))}).eq(0);return e==="fixed"||!t.length?$(r[0].ownerDocument||document):t}function ot(r){var e=r.offset().left,t=e+r.width(),i=r.children(),n=i.offset().left,a=n+i.outerWidth();return{left:n-e,right:t-a}}function lt(r){return r.which==1&&!r.ctrlKey}function ct(r,e,t,i){var n,a,s,o;if(e>t&&r<i)return r>=t?(n=r.clone(),s=!0):(n=t.clone(),s=!1),e<=i?(a=e.clone(),o=!0):(a=i.clone(),o=!1),{start:n,end:a,isStart:s,isEnd:o}}function ke(r,e){if(r=r||{},r[e]!==void 0)return r[e];for(var t=e.split(/(?=[A-Z])/),i=t.length-1,n;i>=0;i--)if(n=r[t[i].toLowerCase()],n!==void 0)return n;return r.default}var dt=["sun","mon","tue","wed","thu","fri","sat"];function $e(r,e){return g().duration({days:r.clone().stripTime().diff(e.clone().stripTime(),"days"),ms:r.time()-e.time()})}function Kt(r){return Object.prototype.toString.call(r)==="[object Date]"||r instanceof Date}function Jt(r,e){return r-e}F.applyAll=Be;function _(r){var e=function(){};return e.prototype=r,new e}function qt(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])}function Be(r,e,t){if($.isFunction(r)&&(r=[r]),r){var i,n;for(i=0;i<r.length;i++)n=r[i].apply(e,t)||n;return n}}function Se(){for(var r=0;r<arguments.length;r++)if(arguments[r]!==void 0)return arguments[r]}function j(r){var e={"&":"&#38;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;return r?r.toString().replace(t,function(i){return e[i]||i}):""}function Oe(r){return r.replace(/&.*?;/g,"")}function ft(r){return r.charAt(0).toUpperCase()+r.slice(1)}function ht(r,e){var t,i,n,a,s=function o(){var l=+new Date-a;l<e&&l>0?t=setTimeout(o,e-l):(t=null,r.apply(n,i),t||(n=i=null))};return function(){n=this,i=arguments,a=+new Date,t||(t=setTimeout(s,e))}}var _t=/^\s*\d{4}-\d\d$/,ei=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;F.moment=function(){return Le(arguments)},F.moment.utc=function(){var r=Le(arguments,!0);return r.hasTime()&&r.utc(),r},F.moment.parseZone=function(){return Le(arguments,!0,!0)};function Le(r,e,t){var i=r[0],n=r.length==1&&typeof i=="string",a,s,o,l;return g().isMoment(i)?(l=g().apply(null,r),i._ambigTime&&(l._ambigTime=!0),i._ambigZone&&(l._ambigZone=!0)):Kt(i)||i===void 0?l=g().apply(null,r):(a=!1,s=!1,n?_t.test(i)?(i+="-01",r=[i],a=!0,s=!0):(o=ei.exec(i))&&(a=!o[5],s=!0):$.isArray(i)&&(s=!0),e?l=g().utc.apply(g(),r):l=g().apply(null,r),a?(l._ambigTime=!0,l._ambigZone=!0):t&&(s?l._ambigZone=!0:n&&l.zone(i))),new X(l)}function X(r){qt(this,r)}X.prototype=_(g().fn),X.prototype.clone=function(){return Le([this])},X.prototype.time=function(r){if(r==null)return g().duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});delete this._ambigTime,!g().isDuration(r)&&!g().isMoment(r)&&(r=g().duration(r));var e=0;return g().isDuration(r)&&(e=Math.floor(r.asDays())*24),this.hours(e+r.hours()).minutes(r.minutes()).seconds(r.seconds()).milliseconds(r.milliseconds())},X.prototype.stripTime=function(){var r=this.toArray();return g().fn.utc.call(this),this.year(r[0]).month(r[1]).date(r[2]).hours(0).minutes(0).seconds(0).milliseconds(0),this._ambigTime=!0,this._ambigZone=!0,this},X.prototype.hasTime=function(){return!this._ambigTime},X.prototype.stripZone=function(){var r=this.toArray(),e=this._ambigTime;return g().fn.utc.call(this),this.year(r[0]).month(r[1]).date(r[2]).hours(r[3]).minutes(r[4]).seconds(r[5]).milliseconds(r[6]),e&&(this._ambigTime=!0),this._ambigZone=!0,this},X.prototype.hasZone=function(){return!this._ambigZone},X.prototype.zone=function(r){return r!=null&&(delete this._ambigTime,delete this._ambigZone),g().fn.zone.apply(this,arguments)},X.prototype.local=function(){var r=this.toArray(),e=this._ambigZone;return delete this._ambigTime,delete this._ambigZone,g().fn.local.apply(this,arguments),e&&this.year(r[0]).month(r[1]).date(r[2]).hours(r[3]).minutes(r[4]).seconds(r[5]).milliseconds(r[6]),this},X.prototype.utc=function(){return delete this._ambigTime,delete this._ambigZone,g().fn.utc.apply(this,arguments)},X.prototype.format=function(){return arguments[0]?ut(this,arguments[0]):this._ambigTime?me(this,"YYYY-MM-DD"):this._ambigZone?me(this,"YYYY-MM-DD[T]HH:mm:ss"):me(this)},X.prototype.toISOString=function(){return this._ambigTime?me(this,"YYYY-MM-DD"):this._ambigZone?me(this,"YYYY-MM-DD[T]HH:mm:ss"):g().fn.toISOString.apply(this,arguments)},X.prototype.isWithin=function(r,e){var t=Ne([this,r,e]);return t[0]>=t[1]&&t[0]<t[2]},X.prototype.isSame=function(r,e){var t;return e?(t=Ne([this,r],!0),g().fn.isSame.call(t[0],t[1],e)):(r=F.moment.parseZone(r),g().fn.isSame.call(this,r)&&!!this._ambigTime==!!r._ambigTime&&!!this._ambigZone==!!r._ambigZone)},$.each(["isBefore","isAfter"],function(r,e){X.prototype[e]=function(t,i){var n=Ne([this,t]);return g().fn[e].call(n[0],n[1],i)}});function Ne(r,e){var t=[],i=!1,n=!1,a;for(a=0;a<r.length;a++)t.push(F.moment.parseZone(r[a])),i=i||t[a]._ambigTime,n=n||t[a]._ambigZone;for(a=0;a<t.length;a++)i&&!e?t[a].stripTime():n&&t[a].stripZone();return t}function me(r,e){return g().fn.format.call(r,e)}function ut(r,e){return mt(r,Ct(e))}function mt(r,e){var t="",i;for(i=0;i<e.length;i++)t+=Ve(r,e[i]);return t}var gt={t:function(e){return me(e,"a").charAt(0)},T:function(e){return me(e,"A").charAt(0)}};function Ve(r,e){var t,i;return typeof e=="string"?e:(t=e.token)?gt[t]?gt[t](r):me(r,t):e.maybe&&(i=mt(r,e.maybe),i.match(/[1-9]/))?i:""}function vt(r,e,t,i,n){var a;return r=F.moment.parseZone(r),e=F.moment.parseZone(e),a=(r.localeData||r.lang).call(r),t=a.longDateFormat(t)||t,i=i||" - ",ti(r,e,Ct(t),i,n)}F.formatRange=vt;function ti(r,e,t,i,n){var a,s,o="",l,c="",f,u="",v="",m="";for(s=0;s<t.length&&(a=pt(r,e,t[s]),a!==!1);s++)o+=a;for(l=t.length-1;l>s&&(a=pt(r,e,t[l]),a!==!1);l--)c=a+c;for(f=s;f<=l;f++)u+=Ve(r,t[f]),v+=Ve(e,t[f]);return(u||v)&&(n?m=v+i+u:m=u+i+v),o+m+c}var ii={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"};function pt(r,e,t){var i,n;return typeof t=="string"?t:(i=t.token)&&(n=ii[i.charAt(0)],n&&r.isSame(e,n))?me(r,i):!1}var ze={};function Ct(r){return r in ze?ze[r]:ze[r]=yt(r)}function yt(r){for(var e=[],t=/\[([^\]]*)\]|\(([^\)]*)\)|(LT|(\w)\4*o?)|([^\w\[\(]+)/g,i;i=t.exec(r);)i[1]?e.push(i[1]):i[2]?e.push({maybe:yt(i[2])}):i[3]?e.push({token:i[3]}):i[5]&&e.push(i[5]);return e}function wt(r){this.options=r||{}}wt.prototype={isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var e=this,t=this.options;this.el=$('<div class="fc-popover"/>').addClass(t.className||"").css({top:0,left:0}).append(t.content).appendTo(t.parentEl),this.el.on("click",".fc-close",function(){e.hide()}),t.autoHide&&$(document).on("mousedown",this.documentMousedownProxy=$.proxy(this,"documentMousedown"))},documentMousedown:function(e){this.el&&!$(e.target).closest(this.el).length&&this.hide()},destroy:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),$(document).off("mousedown",this.documentMousedownProxy)},position:function(){var e=this.options,t=this.el.offsetParent().offset(),i=this.el.outerWidth(),n=this.el.outerHeight(),a=$(window),s=st(this.el),o,l,c,f,u;f=e.top||0,e.left!==void 0?u=e.left:e.right!==void 0?u=e.right-i:u=0,s.is(window)||s.is(document)?(s=a,o=0,l=0):(c=s.offset(),o=c.top,l=c.left),o+=a.scrollTop(),l+=a.scrollLeft(),e.viewportConstrain!==!1&&(f=Math.min(f,o+s.outerHeight()-n-this.margin),f=Math.max(f,o+this.margin),u=Math.min(u,l+s.outerWidth()-i-this.margin),u=Math.max(u,l+this.margin)),this.el.css({top:f-t.top,left:u-t.left})},trigger:function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1))}};function Tt(r){this.grid=r}Tt.prototype={grid:null,rows:null,cols:null,containerEl:null,minX:null,maxX:null,minY:null,maxY:null,build:function(){this.grid.buildCoords(this.rows=[],this.cols=[]),this.computeBounds()},getCell:function(e,t){var i=null,n=this.rows,a=this.cols,s=-1,o=-1,l;if(this.inBounds(e,t)){for(l=0;l<n.length;l++)if(t>=n[l][0]&&t<n[l][1]){s=l;break}for(l=0;l<a.length;l++)if(e>=a[l][0]&&e<a[l][1]){o=l;break}s>=0&&o>=0&&(i={row:s,col:o},i.grid=this.grid,i.date=this.grid.getCellDate(i))}return i},computeBounds:function(){var e;this.containerEl&&(e=this.containerEl.offset(),this.minX=e.left,this.maxX=e.left+this.containerEl.outerWidth(),this.minY=e.top,this.maxY=e.top+this.containerEl.outerHeight())},inBounds:function(e,t){return this.containerEl?e>=this.minX&&e<this.maxX&&t>=this.minY&&t<this.maxY:!0}};function Dt(r){this.coordMaps=r}Dt.prototype={coordMaps:null,build:function(){var e=this.coordMaps,t;for(t=0;t<e.length;t++)e[t].build()},getCell:function(e,t){var i=this.coordMaps,n=null,a;for(a=0;a<i.length&&!n;a++)n=i[a].getCell(e,t);return n}};function Me(r,e){this.coordMap=r,this.options=e||{}}Me.prototype={coordMap:null,options:null,isListening:!1,isDragging:!1,origCell:null,origDate:null,cell:null,date:null,mouseX0:null,mouseY0:null,mousemoveProxy:null,mouseupProxy:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,mousedown:function(e){lt(e)&&(e.preventDefault(),this.startListening(e),this.options.distance||this.startDrag(e))},startListening:function(e){var t,i;this.isListening||(e&&this.options.scroll&&(t=st($(e.target)),!t.is(window)&&!t.is(document)&&(this.scrollEl=t,this.scrollHandlerProxy=ht($.proxy(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),this.computeCoords(),e&&(i=this.getCell(e),this.origCell=i,this.origDate=i?i.date:null,this.mouseX0=e.pageX,this.mouseY0=e.pageY),$(document).on("mousemove",this.mousemoveProxy=$.proxy(this,"mousemove")).on("mouseup",this.mouseupProxy=$.proxy(this,"mouseup")).on("selectstart",this.preventDefault),this.isListening=!0,this.trigger("listenStart",e))},computeCoords:function(){this.coordMap.build(),this.computeScrollBounds()},mousemove:function(e){var t,i;this.isDragging||(t=this.options.distance||1,i=Math.pow(e.pageX-this.mouseX0,2)+Math.pow(e.pageY-this.mouseY0,2),i>=t*t&&this.startDrag(e)),this.isDragging&&this.drag(e)},startDrag:function(e){var t;this.isListening||this.startListening(),this.isDragging||(this.isDragging=!0,this.trigger("dragStart",e),t=this.getCell(e),t&&this.cellOver(t,!0))},drag:function(e){var t;this.isDragging&&(t=this.getCell(e),ri(t,this.cell)||(this.cell&&this.cellOut(),t&&this.cellOver(t)),this.dragScroll(e))},cellOver:function(e){this.cell=e,this.date=e.date,this.trigger("cellOver",e,e.date)},cellOut:function(){this.cell&&(this.trigger("cellOut",this.cell),this.cell=null,this.date=null)},mouseup:function(e){this.stopDrag(e),this.stopListening(e)},stopDrag:function(e){this.isDragging&&(this.stopScrolling(),this.trigger("dragStop",e),this.isDragging=!1)},stopListening:function(e){this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),$(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mousemoveProxy=null,this.mouseupProxy=null,this.isListening=!1,this.trigger("listenStop",e),this.origCell=this.cell=null,this.origDate=this.date=null)},getCell:function(e){return this.coordMap.getCell(e.pageX,e.pageY)},trigger:function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(e){e.preventDefault()},computeScrollBounds:function(){var e=this.scrollEl,t;e&&(t=e.offset(),this.scrollBounds={top:t.top,left:t.left,bottom:t.top+e.outerHeight(),right:t.left+e.outerWidth()})},dragScroll:function(e){var t=this.scrollSensitivity,i=this.scrollBounds,n,a,s,o,l=0,c=0;i&&(n=(t-(e.pageY-i.top))/t,a=(t-(i.bottom-e.pageY))/t,s=(t-(e.pageX-i.left))/t,o=(t-(i.right-e.pageX))/t,n>=0&&n<=1?l=n*this.scrollSpeed*-1:a>=0&&a<=1&&(l=a*this.scrollSpeed),s>=0&&s<=1?c=s*this.scrollSpeed*-1:o>=0&&o<=1&&(c=o*this.scrollSpeed)),this.setScrollVel(l,c)},setScrollVel:function(e,t){this.scrollTopVel=e,this.scrollLeftVel=t,this.constrainScrollVel(),(this.scrollTopVel||this.scrollLeftVel)&&!this.scrollIntervalId&&(this.scrollIntervalId=setInterval($.proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var e=this.scrollEl;this.scrollTopVel<0?e.scrollTop()<=0&&(this.scrollTopVel=0):this.scrollTopVel>0&&e.scrollTop()+e[0].clientHeight>=e[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?e.scrollLeft()<=0&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&e.scrollLeft()+e[0].clientWidth>=e[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var e=this.scrollEl,t=this.scrollIntervalMs/1e3;this.scrollTopVel&&e.scrollTop(e.scrollTop()+this.scrollTopVel*t),this.scrollLeftVel&&e.scrollLeft(e.scrollLeft()+this.scrollLeftVel*t),this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel&&this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.computeCoords())},scrollHandler:function(){this.scrollIntervalId||this.computeCoords()}};function ri(r,e){return!r&&!e?!0:r&&e?r.grid===e.grid&&r.row===e.row&&r.col===e.col:!1}function St(r,e){this.options=e=e||{},this.sourceEl=r,this.parentEl=e.parentEl?$(e.parentEl):r.parent()}St.prototype={options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,start:function(e){this.isFollowing||(this.isFollowing=!0,this.mouseY0=e.pageY,this.mouseX0=e.pageX,this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),$(document).on("mousemove",this.mousemoveProxy=$.proxy(this,"mousemove")))},stop:function(e,t){var i=this,n=this.options.revertDuration;function a(){i.isAnimating=!1,i.destroyEl(),i.top0=i.left0=null,t&&t()}if(this.isFollowing&&!this.isAnimating)if(i.isFollowing=!1,$(document).off("mousemove",i.mousemoveProxy),e&&n&&!this.isHidden){var s=window.localStorage.getItem("lastView")==="month"?$(".fc-view.fc-month-view").scrollTop():0,o=0;window.localStorage.getItem("lastView")==="month"&&/Safari/.test(navigator.userAgent)&&(s=0,o=250),i.isAnimating=!0,i.el.animate({top:i.top0+s,left:i.left0-o},{duration:n,complete:a})}else a()},getEl:function(){var e=this.el;return e||(this.sourceEl.width(),e=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)),e},destroyEl:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var e,t;this.getEl(),this.top0===null&&(this.sourceEl.width(),e=this.sourceEl.offset(),t=this.el.offsetParent().offset(),this.top0=e.top-t.top,this.left0=e.left-t.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(e){var t=window.localStorage.getItem("lastView")==="month"?$(".fc-view.fc-month-view").scrollTop():0,i=0;window.localStorage.getItem("lastView")==="month"&&/Safari/.test(navigator.userAgent)&&(t=0,i=250),this.topDelta=e.pageY-this.mouseY0+t,this.leftDelta=e.pageX-this.mouseX0-i,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}};function Fe(r){this.view=r}Fe.prototype={view:null,cellHtml:"<td/>",rowHtml:function(e,t){var i=this.view,n=this.getHtmlRenderer("cell",e),a="",s,o;for(t=t||0,s=0;s<i.colCnt;s++)o=i.cellToDate(t,s),a+=n(t,s,o);return a=this.bookendCells(a,e,t),"<tr>"+a+"</tr>"},bookendCells:function(e,t,i){var n=this.view,a=this.getHtmlRenderer("intro",t)(i||0),s=this.getHtmlRenderer("outro",t)(i||0),o=n.opt("isRTL"),l=o?s:a,c=o?a:s;return typeof e=="string"?l+e+c:e.prepend(l).append(c)},getHtmlRenderer:function(e,t){var i=this.view,n,a,s,o;return n=e+"Html",t&&(a=t+ft(e)+"Html"),a&&(o=i[a])?s=i:a&&(o=this[a])?s=this:(o=i[n])?s=i:(o=this[n])&&(s=this),typeof o=="function"?function(l){return o.apply(s,arguments)||""}:function(){return o||""}}};function ge(r){Fe.call(this,r),this.coordMap=new Tt(this)}ge.prototype=_(Fe.prototype),$.extend(ge.prototype,{el:null,coordMap:null,cellDuration:null,render:function(){this.bindHandlers()},destroy:function(){},buildCoords:function(e,t){},getCellDate:function(e){},getCellDayEl:function(e){},rangeToSegs:function(e,t){},bindHandlers:function(){var e=this;this.el.on("mousedown",function(t){!$(t.target).is(".fc-more")&&!$(t.target).closest(".fc-popover").length&&$(t.target).parents(".fc-draggable").length==0&&($(t.target).closest(".showActiveTitle").length==0||$(t.target).closest(".fc-helper").length)&&e.dayMousedown(t)}),this.bindSegHandlers()},dayMousedown:function(e,t){var i=this,n=this.view,a=n.opt("selectable"),s=null,o,l,c,f=new Me(this.coordMap,{scroll:n.opt("dragScroll"),dragStart:function(){n.unselect()},cellOver:function(v,m){f.origDate&&(c=i.getCellDayEl(v),s=[m,f.origDate].sort(Jt),o=s[0],l=s[1].clone().add(i.cellDuration),a&&i.renderSelection(o,l))},cellOut:function(v,m){s=null,i.destroySelection()},listenStop:function(v){s&&(s[0].isSame(s[1])&&n.trigger("dayClick",c[0],o,v),a&&n.reportSelection(o,l,v))}});t==1&&n.trigger("dayClick"),f.mousedown(e)},renderDrag:function(e,t,i){},destroyDrag:function(){},renderResize:function(e,t,i){},destroyResize:function(){},renderRangeHelper:function(e,t,i){var n=this.view,a;!t&&n.opt("forceEventDuration")&&(t=n.calendar.getDefaultEventEnd(!e.hasTime(),e)),a=i?_(i.event):{},a.start=e,a.end=t,a.allDay=!(e.hasTime()||t&&t.hasTime()),a.className=(a.className||[]).concat("fc-helper"),i||(a.editable=!1),this.renderHelper(a,i)},renderHelper:function(e,t){},destroyHelper:function(){},renderSelection:function(e,t){this.renderHighlight(e,t)},destroySelection:function(){this.destroyHighlight()},renderHighlight:function(e,t){},destroyHighlight:function(){},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.rowHtml("head")+"</thead></table></div>"},headCellHtml:function(e,t,i){var n=this.view,a=n.calendar,s=n.opt("columnFormat");return'<th class="fc-day-header '+n.widgetHeaderClass+" fc-"+dt[i.day()]+'">'+j(a.formatDate(i,s))+"</th>"},bgCellHtml:function(e,t,i){var n=this.view,a=this.getDayClasses(i);return a.unshift("fc-day",n.widgetContentClass),'<td class="'+a.join(" ")+'" data-date="'+i.format()+'"></td>'},getDayClasses:function(e){var t=this.view,i=t.calendar.getNow().stripTime(),n=["fc-"+dt[e.day()]];return t.name==="month"&&e.month()!=t.intervalStart.month()&&n.push("fc-other-month"),e.isSame(i,"day")?n.push("fc-today",t.highlightStateClass):e<i?n.push("fc-past"):n.push("fc-future"),n}}),$.extend(ge.prototype,{isMouseOverSeg:!1,isDraggingSeg:!1,isResizingSeg:!1,renderEvents:function(e){},getSegs:function(){},destroyEvents:function(){},renderSegs:function(e,t){var i=this.view,n="",a=[],s;for(s=0;s<e.length;s++)n+=this.renderSegHtml(e[s],t);return $(n).each(function(o,l){var c=e[o],f=i.resolveEventEl(c.event,$(l));f&&(f.data("fc-seg",c),c.el=f,a.push(c))}),a},renderSegHtml:function(e,t){},eventsToSegs:function(e,t,i){var n=this;return $.map(e,function(a){return n.eventToSegs(a,t,i)})},eventToSegs:function(e,t,i){var n=e.start.clone().stripZone(),a=this.view.calendar.getEventEnd(e).stripZone(),s,o,l;for(t&&i?(l=ct(n,a,t,i),s=l?[l]:[]):s=this.rangeToSegs(n,a),o=0;o<s.length;o++)l=s[o],l.event=e,l.eventStartMS=+n,l.eventDurationMS=a-n;return s},bindSegHandlers:function(){var e=this,t=this.view;$.each({mouseenter:function(n,a){e.triggerSegMouseover(n,a)},mouseleave:function(n,a){e.triggerSegMouseout(n,a)},click:function(n,a){return t.trigger("eventClick",this,n.event,a)},mousedown:function(n,a){$(a.target).is(".fc-resizer")&&t.isEventResizable(n.event)?e.segResizeMousedown(n,a):t.isEventDraggable(n.event)&&e.segDragMousedown(n,a)}},function(i,n){e.el.on(i,".fc-event-container > *",function(a){var s=$(this).data("fc-seg");if(s&&!e.isDraggingSeg&&!e.isResizingSeg)return n.call(this,s,a)})})},triggerSegMouseover:function(e,t){this.isMouseOverSeg||(this.isMouseOverSeg=!0,this.view.trigger("eventMouseover",e.el[0],e.event,t))},triggerSegMouseout:function(e,t){this.isMouseOverSeg&&(this.isMouseOverSeg=!1,this.view.trigger("eventMouseout",e.el[0],e.event,t))},segDragMousedown:function(e,t){var i=this,n=this.view,a=e.el,s=e.event,o,l,c=new St(e.el,{parentEl:n.el,opacity:n.opt("dragOpacity"),revertDuration:n.opt("dragRevertDuration"),zIndex:2}),f=new Me(n.coordMap,{distance:5,scroll:n.opt("dragScroll"),listenStart:function(v){c.hide(),c.start(v)},dragStart:function(v){i.triggerSegMouseout(e,v),i.isDraggingSeg=!0,s.isChildCalendar||n.hideEvent(s),n.trigger("eventDragStart",a[0],s,v,{})},cellOver:function(v,m){var k=e.cellDate||f.origDate,H=i.computeDraggedEventDates(e,k,m);o=H.start,l=H.end,n.renderDrag(o,l,e)?c.hide():c.show()},cellOut:function(){o=null,n.destroyDrag(),c.show()},dragStop:function(v){var m=o&&!o.isSame(s.start);c.stop(!m,function(){i.isDraggingSeg=!1,n.destroyDrag(),n.showEvent(s),n.trigger("eventDragStop",a[0],s,v,{}),m&&(n.eventDrop(a[0],s,o,v),/Safari/.test(navigator.userAgent)&&window.localStorage.getItem("lastView")==="month"?$(".fc-month-view").css("position","static"):$(".fc-month-view").css("position","relative"))})},listenStop:function(){c.stop()}});f.mousedown(t)},computeDraggedEventDates:function(e,t,i){var n=this.view,a=e.event,s=a.start,o=n.calendar.getEventEnd(a),l,c,f;return i.hasTime()===t.hasTime()?(l=$e(i,t),c=s.clone().add(l),a.end===null?f=null:f=o.clone().add(l)):(c=i,f=null),{start:c,end:f}},segResizeMousedown:function(e,t){var i=this,n=this.view,a=e.el,s=e.event,o=s.start,l=n.calendar.getEventEnd(s),c=null,f;function u(){i.destroyResize(),n.showEvent(s)}f=new Me(this.coordMap,{distance:5,scroll:n.opt("dragScroll"),dragStart:function(m){i.triggerSegMouseout(e,m),i.isResizingSeg=!0,n.trigger("eventResizeStart",a[0],s,m,{})},cellOver:function(m,k){k.isBefore(o)&&(k=o),c=k.clone().add(i.cellDuration),c.isSame(l)?(c=null,u()):(i.renderResize(o,c,e),n.hideEvent(s))},cellOut:function(){c=null,u()},dragStop:function(m){i.isResizingSeg=!1,u(),n.trigger("eventResizeStop",a[0],s,m,{}),c&&(n.eventResize(a[0],s,c,m),/Safari/.test(navigator.userAgent)&&window.localStorage.getItem("lastView")==="month"?$(".fc-month-view").css("position","static"):$(".fc-month-view").css("position","relative"))}}),f.mousedown(t)},getSegClasses:function(e,t,i){var n=e.event,a=["fc-event",e.isStart?"fc-start":"fc-not-start",e.isEnd?"fc-end":"fc-not-end"].concat(n.className,n.source?n.source.className:[]);return t&&a.push("fc-draggable"),i&&a.push("fc-resizable"),a},getEventSkinCss:function(e){var t=this.view,i=e.source||{},n=e.color,a=i.color,s=t.opt("eventColor"),o=e.backgroundColor||n||i.backgroundColor||a||t.opt("eventBackgroundColor")||s,l=e.borderColor||n||i.borderColor||a||t.opt("eventBorderColor")||s,c=e.textColor||i.textColor||t.opt("eventTextColor"),f=[];return o&&f.push("background-color:"+o),l&&f.push("border-color:"+l),c&&f.push("color:"+c),f.join(";")}});function Ge(r,e){return r.eventStartMS-e.eventStartMS||e.eventDurationMS-r.eventDurationMS||e.event.allDay-r.event.allDay}function be(r){ge.call(this,r)}be.prototype=_(ge.prototype),$.extend(be.prototype,{numbersVisible:!1,cellDuration:g().duration({days:1}),bottomCoordPadding:0,rowEls:null,dayEls:null,helperEls:null,highlightEls:null,render:function(e){var t=this.view,i="",n;for(n=0;n<t.rowCnt;n++)i+=this.dayRowHtml(n,e);this.el.html(i),this.rowEls=this.el.find(".fc-row"),this.dayEls=this.el.find(".fc-day"),this.dayEls.each(function(a,s){var o=t.cellToDate(Math.floor(a/t.colCnt),a%t.colCnt);t.trigger("dayRender",null,o,$(s))}),ge.prototype.render.call(this)},destroy:function(){this.destroySegPopover()},dayRowHtml:function(e,t){var i=this.view,n=["fc-row","fc-week",i.widgetContentClass];return t&&n.push("fc-rigid"),'<div class="'+n.join(" ")+'"><div class="fc-bg"><table>'+this.rowHtml("day",e)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.rowHtml("number",e)+"</thead>":"")+"</table></div></div>"},dayCellHtml:function(e,t,i){return this.bgCellHtml(e,t,i)},buildCoords:function(e,t){var i=this.view.colCnt,n,a,s;this.dayEls.slice(0,i).each(function(o,l){n=$(l),a=n.offset().left,o&&(s[1]=a),s=[a],t[o]=s}),s[1]=a+n.outerWidth(),this.rowEls.each(function(o,l){n=$(l),a=n.offset().top,o&&(s[1]=a),s=[a],e[o]=s}),s[1]=a+n.outerHeight()+this.bottomCoordPadding},getCellDate:function(e){return this.view.cellToDate(e)},getCellDayEl:function(e){return this.dayEls.eq(e.row*this.view.colCnt+e.col)},rangeToSegs:function(e,t){return this.view.rangeToSegments(e,t)},renderDrag:function(e,t,i){var n;if(this.renderHighlight(e,t||this.view.calendar.getDefaultEventEnd(!0,e)),i&&!i.el.closest(this.el).length)return this.renderRangeHelper(e,t,i),n=this.view.opt("dragOpacity"),n!==void 0&&this.helperEls.css("opacity",n),!0},destroyDrag:function(){this.destroyHighlight(),this.destroyHelper()},renderResize:function(e,t,i){this.renderHighlight(e,t),this.renderRangeHelper(e,t,i)},destroyResize:function(){this.destroyHighlight(),this.destroyHelper()},renderHelper:function(e,t){var i=[],n=this.renderEventRows([e]);this.rowEls.each(function(a,s){var o=$(s),l=$('<div class="fc-helper-skeleton"><table/></div>'),c;t&&t.row===a?c=t.el.position().top:c=(o.find(".fc-content-skeleton tbody").position()||{}).top,l.css("top",c).find("table").append(n[a].tbodyEl),o.append(l),i.push(l[0])}),this.helperEls=$(i)},destroyHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},renderHighlight:function(e,t){var i=this.rangeToSegs(e,t),n=[],a,s,o;for(a=0;a<i.length;a++)s=i[a],o=$(this.highlightSkeletonHtml(s.leftCol,s.rightCol+1)),o.appendTo(this.rowEls[s.row]),n.push(o[0]);this.highlightEls=$(n)},destroyHighlight:function(){this.highlightEls&&(this.highlightEls.remove(),this.highlightEls=null)},highlightSkeletonHtml:function(e,t){var i=this.view.colCnt,n="";return e>0&&(n+='<td colspan="'+e+'"/>'),t>e&&(n+='<td colspan="'+(t-e)+'" class="fc-highlight" />'),i>t&&(n+='<td colspan="'+(i-t)+'"/>'),n=this.bookendCells(n,"highlight"),'<div class="fc-highlight-skeleton"><table><tr>'+n+"</tr></table></div>"}}),$.extend(be.prototype,{segs:null,rowStructs:null,renderEvents:function(e){var t=this.rowStructs=this.renderEventRows(e),i=[];this.rowEls.each(function(n,a){$(a).find(".fc-content-skeleton > table").append(t[n].tbodyEl),i.push.apply(i,t[n].segs)}),this.segs=i},getSegs:function(){return(this.segs||[]).concat(this.popoverSegs||[])},destroyEvents:function(){for(var e=this.rowStructs||[],t;t=e.pop();)t.tbodyEl.remove();this.segs=null,this.destroySegPopover()},renderEventRows:function(e){var t=this.eventsToSegs(e),i=[],n,a;for(t=this.renderSegs(t),n=this.groupSegRows(t),a=0;a<n.length;a++)i.push(this.renderEventRow(a,n[a]));return i},renderSegHtml:function(e,t){var i=this.view,n=i.opt("isRTL"),a=e.event,s=i.isEventDraggable(a),o=!t&&a.allDay&&e.isEnd&&i.isEventResizable(a),l=this.getSegClasses(e,s,o),c=this.getEventSkinCss(a),f="",u,v=null;l.unshift("fc-day-grid-event");var m=function(V){if(V.indexOf("#EF9A9A")>=0)return"background:#F44336";if(V.indexOf("#CE93D8")>=0)return"background:#9C27B0";if(V.indexOf("#BCAAA4")>=0)return"background:#795548";if(V.indexOf("#FFCC80")>=0)return"background:#FF9800";if(V.indexOf("#90CAF9")>=0)return"background:#1E88E5";if(V.indexOf("#A5D6A7")>=0)return"background:#4CAF50";if(V.indexOf("#FFF59D")>=0)return"background:#FFEB3B";if(V.indexOf("#E6E6E6")>=0)return"background:#B4B4B4"};if(i.name=="month"&&!a.isAllDay&&e.isStart){var k=g()(a.startTime).format("HH:mm"),H=g()(a.endTime).format("HH:mm");g()(a.startTime).format("YYYY-MM-DD")!=g()(a.endTime).format("YYYY-MM-DD")?f='<span class="fc-time" data-start="'+k+'" data-end="'+H+'">'+k+"</span>":(f='<span class="notAllDayMark" style="'+m(c)+'"></span> <span class="fc-time" data-start="'+k+'" data-end="'+H+'">'+k+"</span>",v=m(c),c=c.split(";")[c.split(";").length-1])}u='<span class="fc-title">'+(a.isTask?a.title:j(a.title||"")||"&nbsp;")+"</span>",i.name!=="month"&&!a.isAllDay&&e.isStart&&g()(a.startTime).format("YYYY-MM-DD")!=g()(a.endTime).format("YYYY-MM-DD")&&(u='<span class="fc-title">'+(a.isTask?a.title:j(a.title||"")||"&nbsp;")+"</span>"),u=u.replace(_l("(\u5168\u5929)"),"<span class='fcTitleFont'>"+_l("(\u5168\u5929)")+"</span>");var S=a.allDay?" showActiveTitle":" showActiveTitle notAllDayOver";return(g()(a.end)-g()(a.start))/(24*60*60*1e3)>1&&(S=" showActiveTitle"),'<a class="'+l.join(" ")+S+'" data-hoverBgColor="'+v+'"'+(a.url?' href="'+j(a.url)+'"':"")+(c?' style="'+c+'"':"")+'><div class="fc-content">'+(n?u+" "+f:f+" "+u)+"</div>"+(o?'<div class="fc-resizer"/>':"")+"</a>"},renderEventRow:function(e,t){var i=this.view,n=i.colCnt,a=this.buildSegLevels(t),s=Math.max(1,a.length),o=$("<tbody/>"),l=[],c=[],f=[],u,v,m,k,H,S,I;function V(B){for(;m<B;)I=(f[u-1]||[])[m],I?I.attr("rowspan",parseInt(I.attr("rowspan")||1,10)+1):(I=$("<td/>"),k.append(I)),c[u][m]=I,f[u][m]=I,m++}for(u=0;u<s;u++){if(v=a[u],m=0,k=$("<tr/>"),l.push([]),c.push([]),f.push([]),v)for(H=0;H<v.length;H++){for(S=v[H],V(S.leftCol),I=$('<td class="fc-event-container"/>').append(S.el),S.leftCol!=S.rightCol?I.attr("colspan",S.rightCol-S.leftCol+1):f[u][m]=I;m<=S.rightCol;)c[u][m]=I,l[u][m]=S,m++;k.append(I)}V(n),this.bookendCells(k,"eventSkeleton"),o.append(k)}return{row:e,tbodyEl:o,cellMatrix:c,segMatrix:l,segLevels:a,segs:t}},buildSegLevels:function(e){var t=[],i,n,a;for(e.sort(Ge),i=0;i<e.length;i++){for(n=e[i],a=0;a<t.length&&ni(n,t[a]);a++);n.level=a,(t[a]||(t[a]=[])).push(n)}for(a=0;a<t.length;a++)t[a].sort(ai);return t},groupSegRows:function(e){var t=this.view,i=[],n;for(n=0;n<t.rowCnt;n++)i.push([]);for(n=0;n<e.length;n++)i[e[n].row].push(e[n]);return i}});function ni(r,e){var t,i;for(t=0;t<e.length;t++)if(i=e[t],i.leftCol<=r.rightCol&&i.rightCol>=r.leftCol)return!0;return!1}function ai(r,e){return r.leftCol-e.leftCol}$.extend(be.prototype,{segPopover:null,popoverSegs:null,destroySegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(e){var t=this.rowStructs||[],i,n;for(i=0;i<t.length;i++)this.unlimitRow(i),e?typeof e=="number"?n=e:n=this.computeRowLevelLimit(i):n=!1,n!==!1&&this.limitRow(i,n)},computeRowLevelLimit:function(e){var t=this.rowEls.eq(e),i=t.height(),n=this.rowStructs[e].tbodyEl.children(),a,s;for(a=0;a<n.length;a++)if(s=n.eq(a).removeClass("fc-limited"),s.position().top+s.outerHeight()>i)return a;return!1},limitRow:function(e,t){var i=this,n=this.view,a=this.rowStructs[e],s=[],o=0,l,c,f,u,v,m,k,H,S,I,V,B,Y,W,Q,N;function te(Z){for(;o<Z;)l={row:e,col:o},k=i.getCellSegs(l,t),k.length&&(I=f[t-1][o],N=i.renderMoreLink(l,k),Q=$("<div/>").append(N),I.append(Q),s.push(Q[0])),o++}if(t&&t<a.segLevels.length){for(c=a.segLevels[t-1],f=a.cellMatrix,u=a.tbodyEl.children().slice(t).addClass("fc-limited").get(),v=0;v<c.length;v++){for(m=c[v],te(m.leftCol),S=[],H=0;o<=m.rightCol;)l={row:e,col:o},k=this.getCellSegs(l,t),S.push(k),H+=k.length,o++;if(H){for(I=f[t-1][m.leftCol],V=I.attr("rowspan")||1,B=[],Y=0;Y<S.length;Y++)W=$('<td class="fc-more-cell"/>').attr("rowspan",V),k=S[Y],l={row:e,col:m.leftCol+Y},N=this.renderMoreLink(l,[m].concat(k)),Q=$("<div/>").append(N),W.append(Q),B.push(W[0]),s.push(W[0]);I.addClass("fc-limited").after($(B)),u.push(I[0])}}te(n.colCnt),a.moreEls=$(s),a.limitedEls=$(u)}},unlimitRow:function(e){var t=this.rowStructs[e];t.moreEls&&(t.moreEls.remove(),t.moreEls=null),t.limitedEls&&(t.limitedEls.removeClass("fc-limited"),t.limitedEls=null)},renderMoreLink:function(e,t){var i=this,n=this.view;return $('<a class="fc-more"/>').text(this.getMoreLinkText(t.length)).on("click",function(a){var s=n.opt("eventLimitClick"),o=n.cellToDate(e),l=$(this),c=i.getCellDayEl(e),f=i.getCellSegs(e),u=i.resliceDaySegs(f,o),v=i.resliceDaySegs(t,o);typeof s=="function"&&(s=n.trigger("eventLimitClick",null,{date:o,dayEl:c,moreEl:l,segs:u,hiddenSegs:v},a)),s==="popover"?i.showSegPopover(o,e,l,u):typeof s=="string"&&n.calendar.zoomTo(o,s)})},showSegPopover:function(e,t,i,n){var a=this,s=this.view,o=i.parent(),l,c;s.rowCnt==1?l=this.view.el:l=this.rowEls.eq(t.row),c={className:"fc-more-popover",content:this.renderSegPopoverContent(e,n),parentEl:this.el,top:l.offset().top,autoHide:!0,viewportConstrain:s.opt("popoverViewportConstrain"),hide:function(){a.segPopover.destroy(),a.segPopover=null,a.popoverSegs=null}},s.opt("isRTL")?c.right=o.offset().left+o.outerWidth()+1:c.left=o.offset().left-1,this.segPopover=new wt(c),this.segPopover.show()},renderSegPopoverContent:function(e,t){var i=this.view,n=i.opt("theme"),a=e.format(i.opt("dayPopoverFormat")),s=$('<div class="fc-header '+i.widgetHeaderClass+'"><span class="fc-close '+(n?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+j(a)+'</span><div class="fc-clear"/></div><div class="fc-body '+i.widgetContentClass+'"><div class="fc-event-container"></div></div>'),o=s.find(".fc-event-container"),l;for(t=this.renderSegs(t,!0),this.popoverSegs=t,l=0;l<t.length;l++)t[l].cellDate=e,o.append(t[l].el),t[l].event.isTask&&o.find(".fc-title").eq(l).prepend('<span class="icon-calendartask" style="width:14px;display: inline-block;height:14px;margin: 1px 3px -2px 0;font-size: 16px;vertical-align: top;"> </span>'),$("#tb_OtherUserCalendar .addOtherUser").length>0&&o.find(".fc-title").eq(l).prepend('<img src="'+t[l].event.head+'" style="width:14px;margin-top: 1px; height:14px;margin-bottom:-2px;padding-right: 3px;">');return s},resliceDaySegs:function(e,t){var i=$.map(e,function(s){return s.event}),n=t.clone().stripTime(),a=n.clone().add(1,"days");return this.eventsToSegs(i,n,a)},getMoreLinkText:function(e){var t=this.view,i=t.opt("eventLimitText");return typeof i=="function"?i(e):"+"+e+" "+i},getCellSegs:function(e,t){for(var i=this.rowStructs[e.row].segMatrix,n=t||0,a=[],s;n<i.length;)s=i[n][e.col],s&&a.push(s),n++;return a}});function xe(r){ge.call(this,r)}xe.prototype=_(ge.prototype),$.extend(xe.prototype,{slotDuration:null,snapDuration:null,minTime:null,maxTime:null,dayEls:null,slatEls:null,slatTops:null,highlightEl:null,helperEl:null,render:function(){this.processOptions(),this.el.html(this.renderHtml()),this.dayEls=this.el.find(".fc-day"),this.slatEls=this.el.find(".fc-slats tr"),this.computeSlatTops(),ge.prototype.render.call(this)},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+'</table></div><div class="fc-slats"><table>'+this.slatRowHtml()+"</table></div>"},slotBgCellHtml:function(e,t,i){return this.bgCellHtml(e,t,i)},slatRowHtml:function(){for(var e=this.view,t=e.calendar,i=e.opt("isRTL"),n="",a=this.slotDuration.asMinutes()%15===0,s=g().duration(+this.minTime),o,l,c;s<this.maxTime;)o=e.start.clone().time(s),l=o.minutes(),c='<td class="fc-axis fc-time '+e.widgetContentClass+'" '+e.axisStyleAttr()+">"+(!a||!l?"<span>"+j(t.formatDate(o,e.opt("axisFormat")))+"</span>":"")+"</td>",n+="<tr "+(l?'class="fc-minor"':"")+">"+(i?"":c)+'<td class="'+e.widgetContentClass+'"/>'+(i?c:"")+"</tr>",s.add(this.slotDuration);return n},processOptions:function(){var e=this.view,t=e.opt("slotDuration"),i=e.opt("snapDuration");t=g().duration(t),i=i?g().duration(i):t,this.slotDuration=t,this.snapDuration=i,this.cellDuration=i,this.minTime=g().duration(e.opt("minTime")),this.maxTime=g().duration(e.opt("maxTime"))},rangeToSegs:function(e,t){var i=this.view,n=[],a,s,o,l,c;for(e=e.clone().stripZone(),t=t.clone().stripZone(),s=0;s<i.colCnt;s++)o=i.cellToDate(0,s),l=o.clone().time(this.minTime),c=o.clone().time(this.maxTime),a=ct(e,t,l,c),a&&(a.col=s,n.push(a));return n},resize:function(){this.computeSlatTops(),this.updateSegVerticals()},buildCoords:function(e,t){var i=this.view.colCnt,n=this.el.offset().top,a=g().duration(+this.minTime),s=null,o,l;for(this.dayEls.slice(0,i).each(function(c,f){o=$(f),l=o.offset().left,s&&(s[1]=l),s=[l],t[c]=s}),s[1]=l+o.outerWidth(),s=null;a<this.maxTime;)l=n+this.computeTimeTop(a),s&&(s[1]=l),s=[l],e.push(s),a.add(this.snapDuration);s[1]=n+this.computeTimeTop(a)},getCellDate:function(e){var t=this.view,i=t.calendar;return i.rezoneDate(t.cellToDate(0,e.col).time(this.minTime+this.snapDuration*e.row))},getCellDayEl:function(e){return this.dayEls.eq(e.col)},computeDateTop:function(e,t){return this.computeTimeTop(g().duration(e.clone().stripZone()-t.clone().stripTime()))},computeTimeTop:function(e){var t=(e-this.minTime)/this.slotDuration,i,n,a,s;return t=Math.max(0,t),t=Math.min(this.slatEls.length,t),i=Math.floor(t),n=t-i,a=this.slatTops[i],n?(s=this.slatTops[i+1],a+(s-a)*n):a},computeSlatTops:function(){var e=[],t;this.slatEls.each(function(i,n){t=$(n).position().top,e.push(t)}),e.push(t+this.slatEls.last().outerHeight()),this.slatTops=e},renderDrag:function(e,t,i){var n;if(i)return this.renderRangeHelper(e,t,i),n=this.view.opt("dragOpacity"),n!==void 0&&this.helperEl.css("opacity",n),!0;this.renderHighlight(e,t||this.view.calendar.getDefaultEventEnd(!1,e))},destroyDrag:function(){this.destroyHelper(),this.destroyHighlight()},renderResize:function(e,t,i){this.renderRangeHelper(e,t,i)},destroyResize:function(){this.destroyHelper()},renderHelper:function(e,t){var i=this.renderEventTable([e]),n=i.tableEl,a=i.segs,s,o,l;for(s=0;s<a.length;s++)o=a[s],t&&t.col===o.col&&(l=t.el,o.el.css({left:l.css("left"),right:l.css("right"),"margin-left":l.css("margin-left"),"margin-right":l.css("margin-right")}));this.helperEl=$('<div class="fc-helper-skeleton"/>').append(n).appendTo(this.el),$($(".fc-helper-skeleton")).find(".fc-axis").css("width","31px"),this.helperEl.html(this.helperEl.html().replace("undefined","")),this.helperEl.find(".removeClass").remove()},destroyHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(e,t){this.view.opt("selectHelper")?this.renderRangeHelper(e,t):this.renderHighlight(e,t)},destroySelection:function(){this.destroyHelper(),this.destroyHighlight()},renderHighlight:function(e,t){this.highlightEl=$(this.highlightSkeletonHtml(e,t)).appendTo(this.el)},destroyHighlight:function(){this.highlightEl&&(this.highlightEl.remove(),this.highlightEl=null)},highlightSkeletonHtml:function(e,t){var i=this.view,n=this.rangeToSegs(e,t),a="",s=0,o,l,c,f,u;for(o=0;o<n.length;o++)l=n[o],s<l.col&&(a+='<td colspan="'+(l.col-s)+'"/>',s=l.col),c=i.cellToDate(0,s),f=this.computeDateTop(l.start,c),u=this.computeDateTop(l.end,c),a+='<td><div class="fc-highlight-container"><div class="fc-highlight" style="top:'+f+"px;bottom:-"+u+'px"/></div></td>',s++;return s<i.colCnt&&(a+='<td colspan="'+(i.colCnt-s)+'"/>'),a=this.bookendCells(a,"highlight"),'<div class="fc-highlight-skeleton"><table><tr>'+a+"</tr></table></div>"}}),$.extend(xe.prototype,{segs:null,eventSkeletonEl:null,renderEvents:function(e){var t=this.renderEventTable(e);this.eventSkeletonEl=$('<div class="fc-content-skeleton"/>').append(t.tableEl),this.el.append(this.eventSkeletonEl),this.segs=t.segs},getSegs:function(){return this.segs||[]},destroyEvents:function(){this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null),this.segs=null},renderEventTable:function(e){var t=$("<table><tr/></table>"),i=t.find("tr"),n=this.eventsToSegs(e),a,s,o,l,c,f;for(n=this.renderSegs(n),a=this.groupSegCols(n),this.computeSegVerticals(n),l=0;l<a.length;l++){for(c=a[l],si(c),f=$('<div class="fc-event-container"/>'),s=0;s<c.length;s++)o=c[s],o.el.css(this.generateSegPositionCss(o)),o.bottom-o.top<30&&o.el.addClass("fc-short"),f.append(o.el);i.append($("<td/>").append(f))}return this.bookendCells(i,"eventSkeleton"),{tableEl:t,segs:n}},updateSegVerticals:function(){var e=this.segs,t;if(e)for(this.computeSegVerticals(e),t=0;t<e.length;t++)e[t].el.css(this.generateSegVerticalCss(e[t]))},computeSegVerticals:function(e){var t,i;for(t=0;t<e.length;t++)i=e[t],i.top=this.computeDateTop(i.start,i.start),i.bottom=this.computeDateTop(i.end,i.start)},renderSegHtml:function(e,t){var i=this.view,n=e.event,a=i.isEventDraggable(n),s=!t&&e.isEnd&&i.isEventResizable(n),o=this.getSegClasses(e,a,s),l=this.getEventSkinCss(n),c,f,u;o.unshift("fc-time-grid-event"),i.isMultiDayEvent(n)?(e.isStart||e.isEnd)&&(c=i.getEventTimeText(e.start,e.end),f=i.getEventTimeText(e.start,e.end,"LT"),u=i.getEventTimeText(e.start,null)):(c=i.getEventTimeText(n),f=i.getEventTimeText(n,"LT"),u=i.getEventTimeText(n.start,null));var v="",m="",k="";n.startTime&&g()(n.endTime)-g()(n.startTime)<60*60*1e3?(v=g()(n.startTime).format("HH:mm")+" - "+g()(n.endTime).format("HH:mm"),k="removeClass"):v=j(c);var H="";return n.endTime&&(H=g()(n.endTime).format("HH:mm")),'<a class="'+o.join(" ")+' showActiveTitle"'+(l?' style="'+l+'"':"")+'><div class="fc-content">'+(c?'<div class="fc-time" data-start="'+j(u)+'" data-end="'+H+'" data-full="'+j(f)+'"><span class="'+k+'">'+v+"</span></div>":"")+(n.title?'<div class="fc-title">'+m+j(n.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(s?'<div class="fc-resizer"/>':"")+"</a>"},generateSegPositionCss:function(e){var t=this.view,i=t.opt("isRTL"),n=t.opt("slotEventOverlap"),a=e.backwardCoord,s=e.forwardCoord,o=this.generateSegVerticalCss(e),l,c;return n&&(s=Math.min(1,a+(s-a)*2)),i?(l=1-s,c=a):(l=a,c=1-s),o.zIndex=e.level+1,o.left=l*100+"%",o.right=c*100+"%",n&&e.forwardPressure&&(o[i?"marginLeft":"marginRight"]=10*2),o},generateSegVerticalCss:function(e){return{top:e.top,bottom:-e.bottom}},groupSegCols:function(e){var t=this.view,i=[],n;for(n=0;n<t.colCnt;n++)i.push([]);for(n=0;n<e.length;n++)i[e[n].col].push(e[n]);return i}});function si(r){var e,t,i;if(r.sort(Ge),e=oi(r),li(e),t=e[0]){for(i=0;i<t.length;i++)bt(t[i]);for(i=0;i<t.length;i++)Pe(t[i],0,0)}}function oi(r){var e=[],t,i,n;for(t=0;t<r.length;t++){for(i=r[t],n=0;n<e.length&&Et(i,e[n]).length;n++);i.level=n,(e[n]||(e[n]=[])).push(i)}return e}function li(r){var e,t,i,n,a;for(e=0;e<r.length;e++)for(t=r[e],i=0;i<t.length;i++)for(n=t[i],n.forwardSegs=[],a=e+1;a<r.length;a++)Et(n,r[a],n.forwardSegs)}function bt(r){var e=r.forwardSegs,t=0,i,n;if(r.forwardPressure===void 0){for(i=0;i<e.length;i++)n=e[i],bt(n),t=Math.max(t,1+n.forwardPressure);r.forwardPressure=t}}function Pe(r,e,t){var i=r.forwardSegs,n;if(r.forwardCoord===void 0)for(i.length?(i.sort(di),Pe(i[0],e+1,t),r.forwardCoord=i[0].backwardCoord):r.forwardCoord=1,r.backwardCoord=r.forwardCoord-(r.forwardCoord-t)/(e+1),n=0;n<i.length;n++)Pe(i[n],0,r.forwardCoord)}function Et(r,e,t){t=t||[];for(var i=0;i<e.length;i++)ci(r,e[i])&&t.push(e[i]);return t}function ci(r,e){return r.bottom>e.top&&r.top<e.bottom}function di(r,e){return e.forwardPressure-r.forwardPressure||(r.backwardCoord||0)-(e.backwardCoord||0)||Ge(r,e)}ee.prototype={calendar:null,coordMap:null,el:null,start:null,end:null,intervalStart:null,intervalEnd:null,rowCnt:null,colCnt:null,isSelected:!1,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,documentMousedownProxy:null,documentDragStartProxy:null,init:function(){var e=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=e+"-widget-header",this.widgetContentClass=e+"-widget-content",this.highlightStateClass=e+"-state-highlight",this.documentMousedownProxy=$.proxy(this,"documentMousedown"),this.documentDragStartProxy=$.proxy(this,"documentDragStart")},render:function(){this.updateSize(),this.trigger("viewRender",this,this,this.el),$(document).on("mousedown",this.documentMousedownProxy).on("dragstart",this.documentDragStartProxy)},destroy:function(){this.unselect(),this.trigger("viewDestroy",this,this,this.el),this.destroyEvents(),this.el.empty(),$(document).off("mousedown",this.documentMousedownProxy).off("dragstart",this.documentDragStartProxy)},incrementDate:function(e,t){},updateSize:function(e){e&&this.recordScroll(),this.updateHeight(),this.updateWidth()},updateWidth:function(){},updateHeight:function(){var e=this.calendar;this.setHeight(e.getSuggestedViewHeight(),e.isHeightAuto())},setHeight:function(e,t){},computeScrollerHeight:function(e){var t=this.el.add(this.scrollerEl),i;return t.css({position:"relative",left:-1}),i=this.el.outerHeight()-this.scrollerEl.height(),t.css({position:"",left:""}),e-i},recordScroll:function(){this.scrollerEl&&(this.scrollTop=this.scrollerEl.scrollTop())},restoreScroll:function(){this.scrollTop!==null&&this.scrollerEl.scrollTop(this.scrollTop)},renderEvents:function(e){this.segEach(function(t){this.trigger("eventAfterRender",t.event,t.event,t.el)}),this.trigger("eventAfterAllRender")},destroyEvents:function(){this.segEach(function(e){this.trigger("eventDestroy",e.event,e.event,e.el)})},resolveEventEl:function(e,t){var i=this.trigger("eventRender",e,e,t);return i===!1?t=null:i&&i!==!0&&(t=$(i)),t},showEvent:function(e){this.segEach(function(t){t.el.css("visibility","")},e)},hideEvent:function(e){this.segEach(function(t){t.el.css("visibility","hidden")},e)},segEach:function(e,t){var i=this.getSegs(),n;for(n=0;n<i.length;n++)(!t||i[n].event._id===t._id)&&e.call(this,i[n])},getSegs:function(){},renderDrag:function(e,t,i){},destroyDrag:function(){},documentDragStart:function(e,t){var i=this,n=null,a;this.opt("droppable")&&(a=new Me(this.coordMap,{cellOver:function(o,l){n=l,i.renderDrag(l)},cellOut:function(){n=null,i.destroyDrag()}}),$(document).one("dragstop",function(s,o){i.destroyDrag(),n&&i.trigger("drop",s.target,n,s,o)}),a.startDrag(e))},select:function(e,t,i){this.unselect(i),this.renderSelection(e,t),this.reportSelection(e,t,i)},renderSelection:function(e,t){},reportSelection:function(e,t,i){this.isSelected=!0,this.trigger("select",null,e,t,i)},unselect:function(e){this.isSelected&&(this.isSelected=!1,this.destroySelection(),this.trigger("unselect",null,e))},destroySelection:function(){},documentMousedown:function(e){var t;this.isSelected&&this.opt("unselectAuto")&&lt(e)&&(t=this.opt("unselectCancel"),(!t||!$(e.target).closest(t).length)&&this.unselect(e))}};function ee(r){var e=this;e.calendar=r,e.opt=a,e.trigger=s,e.isEventDraggable=o,e.isEventResizable=l,e.eventDrop=c,e.eventResize=f;var t=r.reportEventChange,i=r.options,n=g().duration(i.nextDayThreshold);e.init();function a(C){var D=i[C];return $.isPlainObject(D)&&!_e(C)?ke(D,e.name):D}function s(C,D){return r.trigger.apply(r,[C,D||e].concat(Array.prototype.slice.call(arguments,2),[e]))}function o(C){var D=C.source||{};return Se(C.startEditable,D.startEditable,a("eventStartEditable"),C.editable,D.editable,a("editable"))}function l(C){var D=C.source||{};return Se(C.durationEditable,D.durationEditable,a("eventDurationEditable"),C.editable,D.editable,a("editable"))}e.getEventTimeText=function(C,D){var R,d;return(typeof C>"u"?"undefined":(0,De.default)(C))==="object"&&(typeof D>"u"?"undefined":(0,De.default)(D))==="object"?(R=C,d=D,D=arguments[2]):(R=C.start,d=C.end),D=D||a("timeFormat"),d&&a("displayEventEnd")?r.formatRange(R,d,D):r.formatDate(R,D)};function c(C,D,R,d){var w=r.mutateEvent(D,R,null);s("eventDrop",C,D,w.dateDelta,function(){w.undo(),t()},d,{}),t()}function f(C,D,R,d){var w=r.mutateEvent(D,null,R);s("eventResize",C,D,w.durationDelta,function(){w.undo(),t()},d,{}),t()}e.isHiddenDay=I,e.skipHiddenDays=B,e.getCellsPerWeek=V,e.dateToCell=te,e.dateToDayOffset=Z,e.dayOffsetToCellOffset=ie,e.cellOffsetToCell=P,e.cellToDate=Y,e.cellToCellOffset=W,e.cellOffsetToDayOffset=Q,e.dayOffsetToDate=N,e.rangeToSegments=oe,e.isMultiDayEvent=he;var u=a("hiddenDays")||[],v=[],m,k=[],H=[],S=a("isRTL");(function(){a("weekends")===!1&&u.push(0,6);for(var C=0,D=0;C<7;C++)k[C]=D,v[C]=$.inArray(C,u)!=-1,v[C]||(H[D]=C,D++);if(m=D,!m)throw"invalid hiddenDays"})();function I(C){return g().isMoment(C)&&(C=C.day()),v[C]}function V(){return m}function B(C,D,R){var d=C.clone();for(D=D||1;v[(d.day()+(R?D:0)+7)%7];)d.add(D,"days");return d}function Y(){var C=W.apply(null,arguments),D=Q(C),R=N(D);return R}function W(C,D){var R=e.colCnt,d=S?-1:1,w=S?R-1:0;(typeof C>"u"?"undefined":(0,De.default)(C))=="object"&&(D=C.col,C=C.row);var y=C*R+(D*d+w);return y}function Q(C){var D=e.start.day();return C+=k[D],Math.floor(C/m)*7+H[(C%m+m)%m]-D}function N(C){return e.start.clone().add(C,"days")}function te(C){var D=Z(C),R=ie(D),d=P(R);return d}function Z(C){return C.clone().stripTime().diff(e.start,"days")}function ie(C){var D=e.start.day();return C+=D,Math.floor(C/7)*m+k[(C%7+7)%7]-k[D]}function P(C){var D=e.colCnt,R=S?-1:1,d=S?D-1:0,w=Math.floor(C/D),y=(C%D+D)%D*R+d;return{row:w,col:y}}function oe(C,D){for(var R=e.rowCnt,d=e.colCnt,w=[],y=re(C,D),x=Z(y.start),E=Z(y.end),A=ie(x),K=ie(E)-1,z=0;z<R;z++){var O=z*d,le=O+d-1,J=Math.max(A,O),ne=Math.min(K,le);if(J<=ne){var ue=P(J),q=P(ne),G=[ue.col,q.col].sort(),ce=Q(J)==x,Ee=Q(ne)+1==E;w.push({row:z,leftCol:G[0],rightCol:G[1],isStart:ce,isEnd:Ee})}}return w}function re(C,D){var R=C.clone().stripTime(),d,w;return D&&(d=D.clone().stripTime(),w=+D.time(),w&&w>=n&&d.add(1,"days")),(!D||d<=R)&&(d=R.clone().add(1,"days")),{start:R,end:d}}function he(C){var D=re(C.start,C.end);return D.end.diff(D.start,"days")>1}}function se(r){ee.call(this,r),this.dayGrid=new be(this),this.coordMap=this.dayGrid.coordMap}se.prototype=_(ee.prototype),$.extend(se.prototype,{dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headRowEl:null,render:function(e,t,i){this.rowCnt=e,this.colCnt=t,this.dayNumbersVisible=i,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderHtml()),this.headRowEl=this.el.find("thead .fc-row"),this.scrollerEl=this.el.find(".fc-day-grid-container"),this.dayGrid.coordMap.containerEl=this.scrollerEl,this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(this.hasRigidRows()),ee.prototype.render.call(this)},destroy:function(){this.dayGrid.destroy(),ee.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){if(this.weekNumbersVisible)return'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+"><span>"+j(this.opt("weekNumberTitle"))+"</span></th>"},numberIntroHtml:function(e){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"><span>"+this.calendar.calculateWeekNumber(this.cellToDate(e,0))+"</span></td>"},dayIntroHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>"},introHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>"},numberCellHtml:function(e,t,i){var n;return this.dayNumbersVisible?(n=this.dayGrid.getDayClasses(i),n.unshift("fc-day-number"),'<td class="'+n.join(" ")+'" data-date="'+i.format()+'">'+i.date()+"</td>"):"<td/>"},weekNumberStyleAttr:function(){return this.weekNumberWidth!==null?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var e=this.opt("eventLimit");return e&&typeof e!="number"},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=nt(this.el.find(".fc-week-number")))},setHeight:function(e,t){var i=this.opt("eventLimit"),n;Ae(this.scrollerEl),tt(this.headRowEl),this.dayGrid.destroySegPopover(),i&&typeof i=="number"&&this.dayGrid.limitRows(i),n=this.computeScrollerHeight(e),this.setGridHeight(n,t),i&&typeof i!="number"&&this.dayGrid.limitRows(i),!t&&at(this.scrollerEl,n)&&(et(this.headRowEl,ot(this.scrollerEl)),n=this.computeScrollerHeight(e),this.scrollerEl.height(n),this.restoreScroll())},setGridHeight:function(e,t){t?rt(this.dayGrid.rowEls):it(this.dayGrid.rowEls,e,!0)},renderEvents:function(e){this.dayGrid.renderEvents(e),this.updateHeight(),ee.prototype.renderEvents.call(this,e)},getSegs:function(){return this.dayGrid.getSegs()},destroyEvents:function(){ee.prototype.destroyEvents.call(this),this.recordScroll(),this.dayGrid.destroyEvents()},renderDrag:function(e,t,i){return this.dayGrid.renderDrag(e,t,i)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(e,t){this.dayGrid.renderSelection(e,t)},destroySelection:function(){this.dayGrid.destroySelection()}}),qe({fixedWeekCount:!0}),Ce.month=Ue;function Ue(r){se.call(this,r)}Ue.prototype=_(se.prototype),$.extend(Ue.prototype,{name:"month",incrementDate:function(e,t){return e.clone().stripTime().add(t,"months").startOf("month")},render:function(e){var t;this.intervalStart=e.clone().stripTime().startOf("month"),this.intervalEnd=this.intervalStart.clone().add(1,"months"),this.start=this.intervalStart.clone(),this.start=this.skipHiddenDays(this.start),this.start.startOf("week"),this.start=this.skipHiddenDays(this.start),this.end=this.intervalEnd.clone(),this.end=this.skipHiddenDays(this.end,-1,!0),this.end.add((7-this.end.weekday())%7,"days"),this.end=this.skipHiddenDays(this.end,-1,!0),t=Math.ceil(this.end.diff(this.start,"weeks",!0)),this.isFixedWeeks()&&(this.end.add(6-t,"weeks"),t=6),this.title=this.calendar.formatDate(this.intervalStart,this.opt("titleFormat")),se.prototype.render.call(this,t,this.getCellsPerWeek(),!0)},setGridHeight:function(e,t){t=t||this.opt("weekMode")==="variable",t&&(e*=this.rowCnt/6),it(this.dayGrid.rowEls,e,!t)},isFixedWeeks:function(){var e=this.opt("weekMode");return e?e==="fixed":this.opt("fixedWeekCount")}}),Ce.basicWeek=We;function We(r){se.call(this,r)}We.prototype=_(se.prototype),$.extend(We.prototype,{name:"basicWeek",incrementDate:function(e,t){return e.clone().stripTime().add(t,"weeks").startOf("week")},render:function(e){this.intervalStart=e.clone().stripTime().startOf("week"),this.intervalEnd=this.intervalStart.clone().add(1,"weeks"),this.start=this.skipHiddenDays(this.intervalStart),this.end=this.skipHiddenDays(this.intervalEnd,-1,!0),this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat")," \u2014 "),se.prototype.render.call(this,1,this.getCellsPerWeek(),!1)}}),Ce.basicDay=Ze;function Ze(r){se.call(this,r)}Ze.prototype=_(se.prototype),$.extend(Ze.prototype,{name:"basicDay",incrementDate:function(e,t){var i=e.clone().stripTime().add(t,"days");return i=this.skipHiddenDays(i,t<0?-1:1),i},render:function(e){this.start=this.intervalStart=e.clone().stripTime(),this.end=this.intervalEnd=this.start.clone().add(1,"days"),this.title=this.calendar.formatDate(this.start,this.opt("titleFormat")),se.prototype.render.call(this,1,1,!1)}}),qe({allDaySlot:!0,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",axisFormat:hi,timeFormat:{agenda:ui},minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0});var fi=5;function hi(r,e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")}function ui(r,e){return e.longDateFormat("LT").replace(/\s*a$/i,"")}function ye(r){ee.call(this,r),this.timeGrid=new xe(this),this.opt("allDaySlot")?(this.dayGrid=new be(this),this.coordMap=new Dt([this.dayGrid.coordMap,this.timeGrid.coordMap])):this.coordMap=this.timeGrid.coordMap}ye.prototype=_(ee.prototype),$.extend(ye.prototype,{timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,render:function(e){this.rowCnt=1,this.colCnt=e,this.el.addClass("fc-agenda-view").html(this.renderHtml()),this.scrollerEl=this.el.find(".fc-time-grid-container"),this.timeGrid.coordMap.containerEl=this.scrollerEl,this.timeGrid.el=this.el.find(".fc-time-grid"),this.timeGrid.render(),this.bottomRuleEl=$('<hr class="'+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)"),ee.prototype.render.call(this),this.resetScroll()},destroy:function(){this.timeGrid.destroy(),this.dayGrid&&this.dayGrid.destroy(),ee.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="'+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){var e,t,i,n;return this.opt("weekNumbers")?(e=this.cellToDate(0,0),t=this.calendar.calculateWeekNumber(e),i=this.opt("weekNumberTitle"),this.opt("isRTL")?n=t+i:n=i+t,'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"><span>"+j(n)+"</span></th>"):'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><span>"+(this.opt("allDayHtml")||j(this.opt("allDayText")))+"</span></td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){return this.axisWidth!==null?'style="width:'+this.axisWidth+'px"':""},updateSize:function(e){e&&this.timeGrid.resize(),ee.prototype.updateSize.call(this,e)},updateWidth:function(){this.axisWidth=nt(this.el.find(".fc-axis"))},setHeight:function(e,t){var i,n;this.bottomRuleHeight===null&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight()),this.bottomRuleEl.hide(),this.scrollerEl.css("overflow",""),Ae(this.scrollerEl),tt(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.destroySegPopover(),i=this.opt("eventLimit"),i&&typeof i!="number"&&(i=fi),i&&this.dayGrid.limitRows(i)),t||(n=this.computeScrollerHeight(e),at(this.scrollerEl,n)?(et(this.noScrollRowEls,ot(this.scrollerEl)),n=this.computeScrollerHeight(e),this.scrollerEl.height(n),this.restoreScroll()):(this.scrollerEl.height(n).css("overflow","hidden"),this.bottomRuleEl.show()))},resetScroll:function(){var e=this,t=g().duration(this.opt("scrollTime")),i=this.timeGrid.computeTimeTop(t);i=Math.ceil(i),i&&i++;function n(){e.scrollerEl.scrollTop(i)}n(),setTimeout(n,0)},renderEvents:function(e){var t=[],i=[],n=[],a,s;for(s=0;s<e.length;s++)e[s].allDay?t.push(e[s]):i.push(e[s]);a=this.timeGrid.renderEvents(i),this.dayGrid&&(n=this.dayGrid.renderEvents(t)),this.updateHeight(),ee.prototype.renderEvents.call(this,e)},getSegs:function(){return this.timeGrid.getSegs().concat(this.dayGrid?this.dayGrid.getSegs():[])},destroyEvents:function(){ee.prototype.destroyEvents.call(this),this.recordScroll(),this.timeGrid.destroyEvents(),this.dayGrid&&this.dayGrid.destroyEvents()},renderDrag:function(e,t,i){if(e.hasTime())return this.timeGrid.renderDrag(e,t,i);if(this.dayGrid)return this.dayGrid.renderDrag(e,t,i)},destroyDrag:function(){this.timeGrid.destroyDrag(),this.dayGrid&&this.dayGrid.destroyDrag()},renderSelection:function(e,t){e.hasTime()||t.hasTime()?this.timeGrid.renderSelection(e,t):this.dayGrid&&this.dayGrid.renderSelection(e,t)},destroySelection:function(){this.timeGrid.destroySelection(),this.dayGrid&&this.dayGrid.destroySelection()}}),Ce.agendaWeek=je;function je(r){ye.call(this,r)}je.prototype=_(ye.prototype),$.extend(je.prototype,{name:"agendaWeek",incrementDate:function(e,t){return e.clone().stripTime().add(t,"weeks").startOf("week")},render:function(e){this.intervalStart=e.clone().stripTime().startOf("week"),this.intervalEnd=this.intervalStart.clone().add(1,"weeks"),this.start=this.skipHiddenDays(this.intervalStart),this.end=this.skipHiddenDays(this.intervalEnd,-1,!0),this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat")," \u2014 "),ye.prototype.render.call(this,this.getCellsPerWeek())}}),Ce.agendaDay=Xe;function Xe(r){ye.call(this,r)}Xe.prototype=_(ye.prototype),$.extend(Xe.prototype,{name:"agendaDay",incrementDate:function(e,t){var i=e.clone().stripTime().add(t,"days");return i=this.skipHiddenDays(i,t<0?-1:1),i},render:function(e){this.start=this.intervalStart=e.clone().stripTime(),this.end=this.intervalEnd=this.start.clone().add(1,"days"),this.title=this.calendar.formatDate(this.start,this.opt("titleFormat")),ye.prototype.render.call(this,1)}});const mi=function(){};var gi=b(57853),vi=b(6307),pi=b(52945),Qe=b.n(pi),Ci=b(63239),yi=b.n(Ci),Ke=b(70801),kt=b(73935),wi=b(15577),Ti=b(61496),Di=b.n(Ti),Si=b(13286),$t=b.n(Si),bi=b(61827),Ei=b.n(bi),ki=b(65655),Mt=b.n(ki),$i=b(90239),Mi=b.n($i),Hi=b(27142),Li=b.n(Hi),xi=b(72969),Ii=b.n(xi),Ri=b(89616),Yi=b.n(Ri),Ai=b(75809),ve=b(94780),Ht=b(67741),Lt=b(36590),Bi=b(83080),Oi=b(59061),Ni=b(70794),Vi=b(68988),xt=b.n(Vi),p={};p.Comm=Ht.Z;var Te,zi=function(){var e=$(window).height();return e>=940?5:e>=810?4:e>=680?3:e>=550?2:1};p.settings={isRange:0,isRangeTime:[],isRangeTimeOut:null,lastDate:new Date,selectedTime:{Start:null,End:null},isFirstData:null,lastTime:null,isAllDay:null,isResize:!1,recurTime:null},p.Method={loadFullCalendar:function(e){$("#calendar").fullCalendar({header:{left:"today prev,next,title",center:"agendaDay,agendaWeek,month",right:""},timezone:"local",defaultDate:e.date,firstDay:0,startParam:"startDate",endParam:"endDate",defaultView:e.currentView,slotMinutes:30,scrollTime:e.scrollTime,height:$(window).height()-$(".fc-day-grid").height()-$("#topBarContainer").height()-15,selectable:!0,selectHelper:!0,editable:!0,eventLimit:zi(),handleWindowResize:!1,eventLimitClick:"popover",axisFormat:"HH:mm",titleFormat:{month:_l("YYYY \u5E74 MMM"),week:_l("YYYY \u5E74 MMMD\u65E5"),day:_l("YYYY \u5E74 MMMD\u65E5 dddd")},columnFormat:{month:"ddd",week:"DD ddd",day:""},events:{url:ve.Z.getCalendars,data:{isWorkCalendar:p.Comm.settings.isWorkCalendar,isTaskCalendar:p.Comm.settings.isTaskCalendar,filterTaskType:p.Comm.settings.filterTaskType,categoryIDs:p.Method.getCategoryIDsFun(),memberIDs:p.Comm.settings.otherUsers.join(",")}},timeFormat:"H:mm",eventClick:function(o,l,c){if(o.isTask)$(".calendarEdit,.showActiveTitleMessage").remove(),$("#calendar").trigger("openTask",o.eventID);else{if(p.settings.recurTime=o.recurTime,p.settings.isRange=0,clearTimeout(p.settings.isRangeTimeOut),!o.canLook){alert(_l("\u8BE5\u65E5\u7A0B\u4E3A\u4ED6\u4EBA\u7684\u79C1\u5BC6\u65E5\u7A0B\uFF0C\u65E0\u6CD5\u67E5\u770B"),3);return}var f=l.clientX,u=window.isChrome?l.clientY+document.body.scrollTop:l.clientY+document.documentElement.scrollTop,v=$(window).width()-f,m=360;v<m&&(f=f-m),(0,Lt.default)({calendarId:o.id,recurTime:o.recurTime?g()(o.recurTime).toISOString():"",saveCallback:function(){p.Method.rememberClick()}}),$(".hoverContentColor").removeClass("hoverContentColor"),$(this).addClass("hoverContentColor")}},eventAfterRender:function(o,l,c){var f=$(l).find(".fc-title");if(!o.isTask)(p.Comm.settings.otherUsers.length>1||p.Comm.settings.otherUsers.length==1&&p.Comm.settings.otherUsers[0]!=md.global.Account.accountId)&&f.prepend('<img src="'+o.head+'" style="width:14px;margin-top: 1px; height:14px;margin-bottom:-2px;padding-right: 3px;"/>');else{var u=o.eventID;f.prepend('<span class="icon-calendartask" data-endtime="'+g()(o.end._i).format("HH:mm")+'" style="width:14px;display: inline-block;height:14px;margin: 1px 3px -2px 0;font-size: 16px;vertical-align: top;"> </span>'),$(l).find(".fc-resizer").remove()}},loading:function(o,l){o?($("#calendarLoading").show(),$("#calInvite").removeClass("ThemeBGColor3"),$("#calendar").css("visibility","hidden")):($("#calendarLoading").hide(),$("#calendar").css("visibility","visible"),p.Method.editViewStyle())},select:function(o,l,c,f){var u="",v="";($(".fc-highlight").length>1||$(".fc-highlight").attr("colspan")>1)&&(v=!0),$(".fc-month-view").length>0&&v&&(u=!0),p.settings.selectedTime.Start=g()(o).format(),p.settings.selectedTime.End=g()(l).format();var m={Start:p.settings.selectedTime.Start,End:p.settings.selectedTime.End,AllDay:""},k=g()(m.Start).unix(),H=g()(m.End).unix();H-k>30*60&&$(".fc-highlight").attr("colspan")!=1&&(u=!0),v&&(m.End=g()(m.End).add(-1,"day").format(),m.AllDay=!0),u&&(0,Ni.Z)(m)},eventMouseover:function(o,l,c){p.Method.changeEventColor(o,l,0)},eventMouseout:function(o,l,c){p.Method.changeEventColor(o,l,1)},eventDrop:function(o,l,c,f,u,v){p.settings.isResize=!1,p.Method.dropResize(o,l,c,f,u,v)},eventResize:function(o,l,c,f,u,v){p.settings.isResize=!0,p.Method.dropResize(o,l,c,f,u,v)},dayClick:function(o,l,c){var f=function(){if(p.settings.isRange>=2){if(clearTimeout(p.settings.isRangeTimeOut),p.settings.isRangeTime[1]-p.settings.isRangeTime[0]<300){var v={Start:"",End:"",AllDay:""};o.format().length<=10?o.format()!==g()(new Date).format("YYYY-MM-DD")&&(v.Start=g()(o).set("hour",10).format("YYYY-MM-DD HH:mm:ss"),v.End=g()(o).set("hour",11).format("YYYY-MM-DD HH:mm:ss"),v.AllDay=!0):(v.Start=o.format(),v.End=o.add(30,"m").format()),$.CreateCalendar(v)}p.settings.lastDate="",p.settings.isRangeTime=[],p.settings.isRange=0}else p.settings.isRange==1&&(p.settings.isFirstData=o,p.settings.isRangeTimeOut=setTimeout(function(){p.settings.lastDate="",p.settings.isRangeTime=[],p.settings.isRange=0},300))};o.toString()!=p.settings.lastDate.toString()?(p.settings.isRange=0,p.settings.isRangeTime=[],p.settings.isRangeTime[0]=+new Date):p.settings.isRangeTime[1]=+new Date,p.settings.lastDate=o,p.settings.isRange++,f()}});var t=$(".fc-center");t.find(".fc-month-button").removeClass("fc-corner-right"),t.find(".fc-list-button").length==0&&t.find(".fc-button-group").append('<button type="button" class="fc-button fc-list-button fc-state-default fc-corner-right" unselectable="on">'+_l("\u5217\u8868")+"</button>"),$(".fc-center").find("button").off().on("click",function(){$(".hoverTitleMessage").remove(),$(this).hasClass("fc-list-button")?safeLocalStorageSetItem("lastView","list"):($("#calendar").fullCalendar("render"),$("#calendar").find(".fc-view-container").show(),$("#calendarList").hide(),$("#calendar").find(".fc-left").show()),$(this).hasClass("fc-agendaDay-button")&&($("#calendar").fullCalendar("changeView","agendaDay"),safeLocalStorageSetItem("lastView","agendaDay")),$(this).hasClass("fc-agendaWeek-button")&&($("#calendar").fullCalendar("changeView","agendaWeek"),safeLocalStorageSetItem("lastView","agendaWeek")),$(this).hasClass("fc-month-button")&&($("#calendar").fullCalendar("changeView","month"),safeLocalStorageSetItem("lastView","month")),$(this).addClass("fc-state-active").siblings().removeClass("fc-state-active"),p.Method.editViewStyle(),p.Method.rememberClickRefresh()}),$(".fc-list-button").bind("refreshList",function(){p.Method.calendarList(g()().format("YYYY-MM-DD HH:mm:ss"),g()().add("2","months").format("YYYY-MM-01"),!0)});var i=$(".fc-toolbar");i.children(".addNewCalendarBox").length==0&&i.prepend('<div class="addNewCalendarBox ThemeBGColor3 ThemeHoverBGColor2" id="addNewCalendar"><i class="icon-plus"></i>'+_l("\u65B0\u65E5\u7A0B")+"</div>");var n=$("#container"),a;n.on({mousemove:function(o){if(clearTimeout(a),$(".hoverTitleMessage,.showActiveTitleMessage").hide(),!(p.Method.detectLeftButton(o)||$(o.target).hasClass("fc-axis")||$(o.target).closest(".fc-axis").length)){var l=o.clientX,c=o.clientY;a=setTimeout(function(){$(".hoverTitleMessage").length||$("body").append('<div class="hoverTitleMessage">'+_l("\u53CC\u51FB\u521B\u5EFA\u65E5\u7A0B")+"</div>");var f=$(".hoverTitleMessage");f.width()+l+15>$(window).width()&&(l=l-f.width()-15),f.css({left:l+15,top:c+$(window).scrollTop()+15}).show()},250)}},mouseleave:function(){clearTimeout(a),$(".hoverTitleMessage,.showActiveTitleMessage").hide()}},".fc-view tbody:first"),n.on("mousemove",".showActiveTitle",function(s){var o=$(this),l=s.clientX,c=s.clientY;if(clearTimeout(a),p.Method.detectLeftButton(s)){$(".hoverTitleMessage,.showActiveTitleMessage").hide();return}$(".showActiveTitleMessage,.hoverTitleMessage").hide(),a=setTimeout(function(){var f=o.find(".fc-title").html();if(f){if(!(f.indexOf(_l("\u5168\u5929"))>0||!o.find(".fc-time").length&&f.indexOf("icon-calendartask")<0))if(f.indexOf("icon-calendartask")>0)f=o.find(".icon-calendartask").attr("data-endtime")+" "+f.split("</span>")[1];else{var u=o.find(".fc-time"),v=u.attr("data-start")+" - "+u.attr("data-end")+" ";f.indexOf("</span>")>0?f=v+f.split("</span>")[1]:f=v+f}$(".showActiveTitleMessage").length||$("body").append('<div class="showActiveTitleMessage">'+f+"</div>");var m=$(".showActiveTitleMessage").html(f);m.width()+l+15>$(window).width()&&(l=l-m.width()-15),m.css({left:l+15,top:c+$(window).scrollTop()+15}).show(),$(".hoverTitleMessage").hide()}},250),s.stopPropagation()}),n.on({mouseover:function(){$(this).css("background",$(this).attr("data-hoverBgColor").split(":")[1])},mouseout:function(){$(this).css("background","none")}},".notAllDayOver"),$("#addNewCalendar").on("click",function(){$.CreateCalendar()}),$(".fc-button-group button").addClass("ThemeColor3 ThemeBorderColor3"),$(".fc-prev-button,.fc-next-button,.fc-today-button").hover(function(){$(this).addClass("ThemeBGColor3")},function(){$(this).removeClass("ThemeBGColor3")}),$(".fc-today-button").on("click",function(){$(this).removeClass("ThemeBGColor3")})},init:function(){var e=window.localStorage.getItem("lastView"),t=g()(Te.getTime()-170*60*1e3).format("HH:mm:ss"),i={date:Te,scrollTime:t};p.Comm.settings.date&&(i.date=p.Comm.settings.date,p.Comm.settings.date=""),p.settings.lastTime&&(i.date=p.settings.lastTime),e=="list"?(i.currentView="agendaDay",p.Method.calendarList(g()().format("YYYY-MM-DD HH:mm:ss"),g()().add("2","months").format("YYYY-MM-01"),!0),$("#calendar").fullCalendar("destroy"),p.Method.loadFullCalendar(i),$("#calendar").find(".fc-view-container,.fc-left").hide(),$("#calendarList").css("display","block"),$("#calendar").fullCalendar("getView").name="list"):(["agendaDay","agendaWeek","month"].indexOf(e)==-1&&(e="agendaDay",safeLocalStorageSetItem("lastView","agendaDay")),i.currentView=e,p.Method.loadFullCalendar(i))},editViewStyle:function(){/Safari/.test(navigator.userAgent)&&window.localStorage.getItem("lastView")==="month"?$(".fc-month-view").css("position","static"):$(".fc-month-view").css("position","relative");var e=p.Method.getViewName();if(e=="agendaWeek"&&($(".fc-state-highlight").css({background:"#fff0f0","border-top-width":"1px","border-top-color":"#ff0"}),$(".fewWeeks").remove(),$(".fc-toolbar .fc-left h2").append(' <span class="fewWeeks">'+_l("\u7B2C%0\u5468",$("#calendar").fullCalendar("getDate").weeks())+"</span>")),e=="agendaDay"||e=="agendaWeek"){$(".fc-axis").css("width","31px");var t=g()($("#calendar").fullCalendar("getDate")).format("YYYY-MM-DD"),i=!1;if(e=="agendaDay"&&t==g()(Te).format("YYYY-MM-DD")&&(i=!0),e=="agendaWeek"&&($(".fc-day-header").each(function(){$(this).css("border-bottom-color").indexOf("rgb(255, 153, 153)")>=0&&(i=!0)}),i=!0),$(".fc-time-grid").find(".rect").length==0&&i){var n=Te,a=n.getHours()+parseFloat((n.getMinutes()/60).toFixed(2)),s=a*40+(window.isFirefox?0:n.getHours())-4.5+"px",o='<div style="text-align:right;width: 100%;top:'+s+';position: absolute;z-index: 8;left:54px;">';o+='<div class="rect"></div><div class="rectLine"></div>',o+="</div>",$(".fc-time-grid-container .fc-time-grid").append(o)}$(".fc-slats").find(".fc-axis").each(function(){var l=$.trim($(this).text());if(l!=""){var c=l=="00:00"?"-5px":"-10px";$(this).html('<span style="position: relative;left: 0;top: '+c+'">'+l+"</span>")}}),setTimeout(function(){$(".fc-time-grid-container.fc-scroller").scrollTop((g()().hour()+2)*40-$(".fc-time-grid-container.fc-scroller").height()/2)},100)}e=="month"&&($(".fcOld td.fc-today").css("border-style","solid"),$(".fc-state-highlight").css({background:"#FCD7D7","border-top-width":"2px","border-top-color":"#F72F37"}),$(".fc-row.fc-widget-header").css({"border-right-width":0})),e=="list"&&$(".fc-list-button").addClass("fc-state-active").siblings().removeClass("fc-state-active"),$(".fc-scroller").on("scroll",function(l){var c=$(this).height(),f=$(this)[0].scrollTop,u=$(this)[0].scrollHeight;if(c+f>=u)return $(this).scrollTop(u-c-1),l.stopPropagation(),!1;if(f<=0)return $(this).scrollTop(1),l.stopPropagation(),!1})},dropResize:function(e,t,i){if($(".showActiveTitleMessage,.hoverTitleMessage").hide(),e.isTask){alert(_l("\u4EFB\u52A1\u4E0D\u53EF\u66F4\u6539"),3),i();return}e.hasMember?(0,Bi.Z)(function(){p.Method.ajaxAfterDrop(e,t,i,arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])},i):p.Method.ajaxAfterDrop(e,t,i,!1,!1)},ajaxAfterDrop:function(e,t,i,n,a){var s=function(l){var c=e.id,f=e.recurTime,u=g()(e.start).format("YYYY-MM-DD HH:mm"),v=g()(e.end).format("YYYY-MM-DD HH:mm"),m=e.isAllDay,k=t._days,H=t._milliseconds/6e4;l&&(u=e.oldStartTime,v=e.oldEndTime),m&&(u=u.split(" ")[0],v=g()(e.end).day(-1).format("YYYY-MM-DD")),ve.Z.editCalendarTime({calendarID:c,start:g()(u).toISOString(),end:g()(v).toISOString(),dayDelta:k,minuteDelta:H,isAll:m,isResize:p.settings.isResize,reType:n,recurTime:f?g()(f).toISOString():"",isAllCalendar:l}).then(function(S){S.code==1?(alert(_l("\u64CD\u4F5C\u6210\u529F")),p.Method.rememberClick()):alert(_l("\u64CD\u4F5C\u5931\u8D25"),3)})};(0,Oi.Z)({operatorTitle:_l("\u60A8\u786E\u5B9A\u66F4\u6539\u65E5\u7A0B\u4FE1\u606F\u5417?"),recurTitle:_l("\u60A8\u786E\u5B9A\u7F16\u8F91\u91CD\u590D\u65E5\u7A0B\u5417?"),recurCalendarUpdateFun:s},{originRecur:e.isRecur,isChildCalendar:e.isChildCalendar},{directRun:a,callback:i})},getViewName:function(){return $("#calendar").fullCalendar("getView").name},getCategoryIDsFun:function(){var e="";return p.Comm.settings.categorys.length?e=p.Comm.settings.categorys.join(","):window.localStorage.getItem("categorys")!=""&&(e="All"),e},changeEventColorHover:function(e){if(e){if(e.indexOf("rgb(239, 154, 154)")>=0)return"#F44336";if(e.indexOf("rgb(206, 147, 216)")>=0)return"#9C27B0";if(e.indexOf("rgb(188, 170, 164)")>=0)return"#795548";if(e.indexOf("rgb(255, 204, 128)")>=0)return"#FF9800";if(e.indexOf("rgb(144, 202, 249)")>=0)return"#1E88E5";if(e.indexOf("rgb(165, 214, 167)")>=0)return"#4CAF50";if(e.indexOf("rgb(255, 245, 157)")>=0)return"#FFEB3B";if(e.indexOf("rgb(230, 230, 230)")>=0)return"#B4B4B4"}},changeEventColorLeave:function(e){if(e){if(e.indexOf("rgb(244, 67, 54)")>=0)return"#EF9A9A";if(e.indexOf("rgb(156, 39, 176)")>=0)return"#CE93D8";if(e.indexOf("rgb(121, 85, 72)")>=0)return"#BCAAA4";if(e.indexOf("rgb(255, 152, 0)")>=0)return"#FFCC80";if(e.indexOf("rgb(30, 136, 229)")>=0)return"#90CAF9";if(e.indexOf("rgb(76, 175, 80)")>=0)return"#A5D6A7";if(e.indexOf("rgb(255, 235, 59)")>=0)return"#FFF59D";if(e.indexOf("rgb(180, 180, 180)")>=0)return"#E6E6E6"}},changeEventColor:function(e,t,i){if(t.currentTarget!=document)if($(t.currentTarget).hasClass("notAllDayOver"))i==0?$(t.currentTarget).addClass("hoverContentColor"):$(t.currentTarget).removeClass("hoverContentColor");else{var n=$(t.currentTarget).css("background-color");i==0?$(t.currentTarget).css("background-color",p.Method.changeEventColorHover(n)).addClass("hoverContentColor"):$(t.currentTarget).css("background-color",p.Method.changeEventColorLeave(n)).removeClass("hoverContentColor")}},detectLeftButton:function(e){e=e||window.event;var t=e.which||e.button;return e.type==="mousemove"&&(t=0),t==1},rememberClick:function(){var e=$("#calendar");e.length>0&&(p.Method.getViewName()=="agendaDay"||p.Method.getViewName()=="agendaWeek"||p.Method.getViewName()=="month"?e.fullCalendar("refetchEvents"):p.Method.getViewName()=="list"&&$(".fc-list-button").trigger("refreshList"))},rememberClickRefresh:function(){$("#calendar").show(),p.Method.getViewName=="list"&&$("#calendarList").show(),$("#invitedMain").hide(),p.settings.lastTime=$("#calendar").fullCalendar("getDate"),$("#calendar").fullCalendar("destroy"),p.Method.init(),$("#calendar").fullCalendar("refetchEvents")},calendarList:function(e,t,i,n){ve.Z.getCalendarList2({memberIDs:p.Comm.settings.otherUsers.join(","),isPrivateCalendar:p.Comm.settings.isPrivateCalendar,isTaskCalendar:p.Comm.settings.isTaskCalendar,filterTaskType:p.Comm.settings.filterTaskType,isWorkCalendar:p.Comm.settings.isWorkCalendar,categoryIDs:p.Method.getCategoryIDsFun(),startDate:e,endDate:t}).then(function(a){if(a.msg=="\u64CD\u4F5C\u6210\u529F"){var s=a.data;s.isFirst=i,s.colorClass=p.Method.colorClass;var o=g()(t).add(1,"M").format("YYYY-MM-DD");if(i){s.queryEnd=o;var l=Te;s.dateTime=_l(" %0\u5E74%1\u6708%2\u65E5",l.getFullYear(),l.getMonth()+1,l.getDate());var c=[0,1,2,3,4,5,6].map(function(u){return g()().day(u).format("dddd")});s.dateWeek=c[l.getDay()],$("#calendar").find(".fc-center h2").html(s.dateTime+" "+s.dateWeek);var f=$(window).height()-$(".nativeHeaderWrap").height()-118;$("#calendarList").html(p.Comm.doT.template(xt())(Qe()({},s,{moment:g()}))).find(".calendarList").css("height",f),$("#calendarList .calendarNoList").css("height",f+45),$(".calendarList").scrollTop(n)}else i||($("#calendarListMore").attr({queryend:o,restCalCount:s.restCalCount}),parseInt(s.restCalCount,10)==0&&$(".calendarListMore").hide(),$("#calendarListMoreData").html(o),s.calendars&&$("#calendarList .calendarListMore").before(p.Comm.doT.template(xt())(Qe()({},s,{moment:g()}))))}})},colorClass:function(e){switch(e){case"#EF9A9A":return"calendarListColorRed";case"#CE93D8":return"calendarListColorViolet";case"#BCAAA4":return"calendarListColorBrown";case"#FFCC80":return"calendarListColorOrange";case"#90CAF9":return"calendarListColorBlue";case"#A5D6A7":return"calendarListColorGreen";case"#FFF59D":return"calendarListColorYellow";case"#E6E6E6":return"calendarListColorGrey";default:break}}},p.Event=function(){window.onresize=function(){p.Method.editViewStyle()},$("#calendarList").on("click",".calendarNoListBtn",function(){$.CreateCalendar()}).on("click",".calendarListModel li",function(r){var e=$(this),t=r.clientX,i=window.isChrome?r.clientY+document.body.scrollTop:r.clientY+document.documentElement.scrollTop,n=$(window).width()-t,a=360,s=e.data("istask");if(s)return $("#calendar").trigger("openTask",e.attr("data-id")),!1;n<a&&(t=t-a),(0,Lt.default)({calendarId:e.attr("data-id"),recurTime:e.attr("data-recurtime"),saveCallback:function(){p.Method.calendarList(g()().format("YYYY-MM-DD HH:mm:ss"),g()($(".calendarListMore a").attr("queryend")).format("YYYY-MM-DD"),!0,$(".calendarList").scrollTop())}})}).on("click","#calendarListMore",function(){var r=$(this).attr("queryend"),e=$(this).attr("restCalCount");parseInt(e,10)>0&&p.Method.calendarList(g()(r).add("month",-1).format("YYYY-MM-DD"),r,!1)}),$(document).on("click",function(r){var e=$(r.target);e.closest(".showActiveTitle").length||$(".hoverContentColor").removeClass("hoverContentColor")})},p.Export={init:function(){Te=new Date(g()().format()),p.Method.init(),p.Event(),setInterval(function(){Te=new Date(g()().format())},6e3)},rememberClickRefresh:p.Method.rememberClickRefresh};const Fi=p.Export;var Gi=b(96486),It=b.n(Gi),Pi=b(20640),Ui=b.n(Pi),Wi=b(56375),h={};h.settings={oldCategoryList:[],pageIndex:1,pageSize:10,dataCount:null,isComplete:!0},h.Comm=Ht.Z,h.Calendar=Fi,h.Event=function(){$("#calInvite").on("click",function(){$("#calendarLoading").show(),$("#calendar,#calendarList").hide(),$(this).addClass("ThemeBGColor8"),h.settings.pageIndex=1,$("#invitedCalendars").css("height",$(window).height()-$("#topBarContainer").height()-90),document.title=_l("\u5F85\u786E\u8BA4\u65E5\u7A0B")+" - "+_l("\u65E5\u7A0B"),h.Method.getInvitedCalendars()}),$("#exitInvited").on({mouseover:function(){$(this).addClass("ThemeBGColor2").removeClass("ThemeBGColor3")},mouseout:function(){$(this).addClass("ThemeBGColor3").removeClass("ThemeBGColor2")},click:function(){$("#calInvite").removeClass("ThemeBGColor8"),document.title=_l("\u65E5\u7A0B"),h.Calendar.rememberClickRefresh()}}),$("#invitedCalendars").on("click",".inviteCalendarType",function(t){var i=$(this).find(".inviteCalendarTypeList");i.find("li").length?i.show():h.Comm.getUserAllCalCategories(function(n){var a={colorClass:h.Method.inviteColorClass,cats:n||[],catID:"1"},s=h.Comm.doT.template(Di())(a);i.find("ul").append(s),i.show()}),t.stopPropagation()}),$("#invitedCalendars").on("click",".inviteCalendarTypeList li",function(t){var i=$(this).find("span").html(),n=$(this).attr("catID"),a=$(this).find(".editColor").attr("class"),s=$(this).parents(".inviteCalendarType");s.find(".editColor").eq(0).removeClass().addClass(a),s.attr("catID",n),$(this).parent().find(".selectIcon").prependTo($(this)),s.find(".inviteCalendarTypeList").hide(),t.stopPropagation()}),$("#synchronous").on("click",function(){h.Method.getIcsUrl()}),$("#addCalendarType").on("click",function(){var t=Yi().replace("##classificationCalendarList##",$t());if(Ke.Z.confirm({dialogClasses:"classificationCalendarEdit",width:570,title:_l("\u5206\u7C7B\u65E5\u7A0B\u7F16\u8F91"),children:M.createElement("div",{dangerouslySetInnerHTML:{__html:h.Comm.doT.template(t)(h.settings.oldCategoryList)}}),onOk:function(){var a=$(".classificationCalendarList li");if(a.length>0){var s,o,l,c,f=[];a.each(function(){c=$(this),s=c.attr("catid")||"",o=$.trim(c.find(".classificationListName").val()),o!==""&&(l=h.Method.colorValue(c.find(".classificationListColumnOperation .colorBlock").attr("class").replace(/^colorBlock\s|\scolorBlock$/,"")),f.push({catName:o,color:l,catID:s}))}),f.length>0&&h.Method.updateUserCalCategoryInfo(f)}}}),!h.Comm.settings.categorys.length){var i=[];$(".allowDrop").each(function(){$(this).find(".iconTickStyle").hasClass("icon-calendar-check")&&i.push($(this).attr("catid"))}),safeLocalStorageSetItem("categorys",i),h.Comm.settings.categorys=i}$(".classificationCalendarListAdd").click(function(){$(".classificationCalendarList").find("ul").append(h.Comm.doT.template($t())),$(".classificationListName:last").focus()}),$(".classificationCalendarList").on("click",".classificationListDropdown",function(n){if(!$(n.target).closest(".colorBlockList").length){var a=$(this).find(".colorBlockMain");$(".colorBlockMain").not(a).hide(),$(this).find(".colorBlockMain:visible").length?a.hide():a.show()}n.stopPropagation()}).on("click",".colorBlockList",function(){var n=$(this).parent(),a=$(this).find("span").attr("class");n.siblings(".colorBlock").removeClass().addClass("colorBlock "+a),n.hide(),event.stopPropagation()}),$(".classificationCalendarList").on("click",".classificationListDel",function(){var n=$(this),a=n.closest("li").attr("catid");a?h.Method.deleteUserCalCategory(n,a):n.parent().remove()})});var r=$("#calendarTypeList");r.on("click","li .iconTickStyle",function(){var t=$(this),i="icon-calendar-check";t.hasClass("icon-calendar-check")&&(i="icon-calendar-nocheck"),t.removeClass("icon-calendar-check icon-calendar-nocheck").addClass(i),h.Comm.settings.isWorkCalendar=!!$("#workCalendar .icon-calendar-check").length,h.Comm.settings.isTaskCalendar=!!$("#taskCalendar .icon-calendar-check").length,h.Comm.settings.categorys=[],$(".allowDrop").each(function(){$(this).find(".icon-calendar-check").length&&h.Comm.settings.categorys.push($(this).attr("catid"))}),safeLocalStorageSetItem("isWorkCalendar",h.Comm.settings.isWorkCalendar),safeLocalStorageSetItem("isTaskCalendar",h.Comm.settings.isTaskCalendar),safeLocalStorageSetItem("categorys",h.Comm.settings.categorys.join(",")),h.Calendar.rememberClickRefresh()}),r.on("click","#filterTaskType",function(t){var i=$(this),n=i.attr("data-tasktype"),a=i.siblings(".filterTaskTypeList");a.is(":visible")?a.hide():(a.find(".filterTaskTypeListIcon").removeClass("icon-ok"),a.find(".filterTaskTypeListIcon[data-tasktype="+n+"]").addClass("icon-ok"),a.show()),t.stopPropagation()}),r.on("click",".filterTaskTypeList li",function(t){var i=$(this).find(".filterTaskTypeListIcon").attr("data-tasktype"),n=$(this).find("span").html(),a=$("#filterTaskType"),s=a.attr("data-tasktype");i!=s&&(a.attr("data-tasktype",i).find(".filterTaskTypeName").html(n),h.Comm.settings.filterTaskType=i,safeLocalStorageSetItem("filterTaskType",i),h.Calendar.rememberClickRefresh()),$(".filterTaskTypeList").hide(),t.stopPropagation()}),(!md.global.Account.projects||!md.global.Account.projects.length)&&$("#others").hide(),$("#others").on("click",function(){var t=$(this),i=localStorage.getItem("calendarLastPId");(0,Ai.Z)({sourceId:"",sourceProjectId:"",showMoreInvite:!1,SelectUserSettings:{projectId:It().find(md.global.Account.projects,function(n){return n.projectId===i})?i:"",filterFriend:!0,filterOthers:!0,filterAccountIds:[md.global.Account.accountId],filterAll:!0,projectCallback:function(a){safeLocalStorageSetItem("calendarLastPId",a)},callback:function(a){var s=a.length,o,l=[];if(s>0){for(var c=0;c<s;c++)o=a[c],o.accountId&&$.inArray(o.accountId,h.Comm.settings.otherUsers)<0&&(h.Comm.settings.otherUsers.push(o.accountId),safeLocalStorageSetItem("otherUsers"+md.global.Account.accountId,h.Comm.settings.otherUsers.join(",")),l.push({fullName:o.fullname,accountID:o.accountId,avatar:o.avatar}));l.length>0&&(h.Method.addOtherUser(l,!0),h.Calendar.rememberClickRefresh())}}}})}),$("#hideOneself .cbComplete").on("click",function(){var t=$(this),i="icon-calendar-nocheck";t.hasClass("icon-calendar-nocheck")?(i="icon-calendar-check",h.Comm.settings.otherUsers.splice($.inArray(md.global.Account.accountId,h.Comm.settings.otherUsers),1)):h.Comm.settings.otherUsers.push(md.global.Account.accountId),t.removeClass("icon-calendar-check icon-calendar-nocheck").addClass(i),safeLocalStorageSetItem("otherUsers"+md.global.Account.accountId,h.Comm.settings.otherUsers.join(",")),h.Calendar.rememberClickRefresh()});var e=$("#tb_OtherUserCalendar");e.on("click",".addOtherUserDelImg",function(){var t=$(this).closest(".addOtherUser").attr("data-id");h.Comm.settings.otherUsers.splice($.inArray(t,h.Comm.settings.otherUsers),1),safeLocalStorageSetItem("otherUsers"+md.global.Account.accountId,h.Comm.settings.otherUsers.join(",")),$(this).closest(".addOtherUser").remove(),e.find(".addOtherUser").length||(e.hide(),$("#hideOneself").hide().find(".cbComplete").removeClass("icon-calendar-check").addClass("icon-calendar-nocheck"),h.Comm.settings.otherUsers=[md.global.Account.accountId],window.localStorage.removeItem("otherUsers"+md.global.Account.accountId)),h.Calendar.rememberClickRefresh()}),$("#allOtherUserDel").on("click",function(t){history.replaceState("","","home"),h.Comm.settings.otherUsers=[md.global.Account.accountId],window.localStorage.removeItem("otherUsers"+md.global.Account.accountId),$("#hideOneself").hide().find(".cbComplete").removeClass("icon-calendar-check").addClass("icon-calendar-nocheck"),e.hide().find(".addOtherUser").remove(),h.Calendar.rememberClickRefresh(),t.stopPropagation()}),$("#invitedCalendars").on("click",".enterInvite",function(){var t=$(this).parent(),i=t.data("calendarid"),n=t.data("recurtime"),a=$(this).parents(".inviteSinlge").find(".inviteCalendarType").attr("catID")||"1";h.Comm.inviteCalendar.confirm(i,n,a)}).on("click",".refuseInvite",function(){var t=$(this).parent(),i=t.data("calendarid"),n=t.data("recurtime");h.Comm.inviteCalendar.refuse(i,n,"")}),$(document).on("click",function(t){var i=$(t.target);$(".filterTaskTypeList").is(":visible")&&!i.closest(".filterTaskTypeList").length&&!i.is($("#calendarTypeList"))&&$(".filterTaskTypeList").hide(),$(".inviteCalendarTypeList").length&&!$(t.target).closest(".inviteCalendarTypeList").length&&$(".inviteCalendarTypeList").hide(),$(t.target).closest(".classificationCalendarList .colorBlockMain").length||$(".classificationCalendarList .colorBlockMain").hide()})},h.Method={init:function(){$("#calendarTypeList").html(h.Comm.doT.template(Ei())(h.Comm.settings)),$("#sortable").append(LoadDiv()),h.Comm.getUserAllCalCategories(function(e){e?(h.settings.oldCategoryList=e,h.settings.oldCategoryList.colorClass=h.Method.colorClass,$("#sortable .MdLoader").parent().remove(),$("#sortable").append(h.Comm.doT.template(Mt())(h.settings.oldCategoryList))):$("#sortable .MdLoader").parent().remove()})},getIcsUrl:function(){ve.Z.getIcsUrl().then(function(e){if(e.code==1){var t=e.data.replace(/^http[\s\S]*:\/\/?/,"webcal://");Ke.Z.confirm({dialogClasses:"calendarInteraction",width:644,height:369,noFooter:!0,children:M.createElement("div",{dangerouslySetInnerHTML:{__html:h.Comm.doT.template(Mi())(t)}})});var i=$("#iCalAbout").find(".synchronousSelect");$("#clipinner").off().on("click",function(){Ui()($("#clipinner").attr("data-clipboard-text")),alert(_l("\u5DF2\u7ECF\u590D\u5236\u5230\u7C98\u8D34\u677F\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528Ctrl+V \u8D34\u5230\u9700\u8981\u7684\u5730\u65B9\u53BB\u4E86\u54E6"))}),i.click(function(){$("#iCalAbout td").removeClass("ThemeBGColor5 Select"),$(this).addClass("Select ThemeBGColor5");var n=$(this).attr("type"),a=$("#iCalContent_two");n==1?a.html("2."+_l('"\u6253\u5F00Outlook\uFF0C\u5728\u5DE5\u5177>\u8D26\u6237\u8BBE\u7F6E>Internet\u65E5\u5386\u4E2D\u65B0\u5EFA\uFF0C\u5E76\u7C98\u8D34\u521A\u624D\u83B7\u5F97\u7684ICAL\u683C\u5F0F\u65E5\u5386\u5730\u5740"')):n==2?a.html("2."+_l('"\u6253\u5F00Mac\u65E5\u5386\uFF0C\u5728\u6587\u4EF6>\u65B0\u5EFA\u65E5\u5386\u8BA2\u9605\uFF0C\u7C98\u8D34\u521A\u624D\u83B7\u5F97\u7684Internet\u683C\u5F0F\u65E5\u5386\u5730\u5740"')):n==3&&a.html("2."+_l('"\u767B\u5F55Google Calendar\uFF0C\u5728\u5176\u4ED6\u65E5\u5386>\u901A\u8FC7\u7F51\u5740\u6DFB\u52A0\u4E2D\uFF0C\u7C98\u8D34\u521A\u624D\u83B7\u5F97\u7684ICAL\u683C\u5F0F\u65E5\u5386\u5730\u5740"'))}),i.hover(function(){$(this).hasClass("ThemeBGColor5")||$(this).addClass("iCalAboutHover")},function(){$(this).removeClass("iCalAboutHover")})}else h.Comm.errorMessage(e.msg)})},deleteUserCalCategory:function(e,t){Ke.Z.confirm({dialogClasses:"DeleteUserCalCategory",width:408,children:M.createElement("div",{className:"Font14"},_l("\u5220\u9664\u4E4B\u540E\u8BE5\u5206\u7C7B\u4E0B\u7684\u5168\u90E8\u65E5\u7A0B\u5F52\u7C7B\u5230\u5DE5\u4F5C\u65E5\u7A0B\uFF1F")),onOk:function(){ve.Z.deleteUserCalCategory({catID:t}).then(function(n){n.code==1?(It().remove(h.settings.oldCategoryList,function(a){return a.catID==t}),h.Comm.settings.categorys.length&&(h.Comm.settings.categorys.splice($.inArray(t,h.Comm.settings.categorys),1),safeLocalStorageSetItem("categorys",h.Comm.settings.categorys)),$(".calendarTypeList li[catid="+t+"]").remove(),e.parent().remove(),h.Calendar.rememberClickRefresh()):h.Comm.errorMessage(n.msg)})}})},updateUserCalCategoryInfo:function(e){ve.Z.updateUserCalCategoryInfo({newCalCategory:yi()(e)}).then(function(t){if(t.code==1){alert(_l("\u4FEE\u6539\u6210\u529F"));for(var i=t.data,n=i.length,a=h.settings.oldCategoryList.length,s,o=0;o<n;o++)if(s=i[o].catID,a==0)h.Comm.settings.categorys.push(s);else for(var l=0;l<a&&s!=h.settings.oldCategoryList[l].catID;l++)l==a-1&&h.Comm.settings.categorys.push(s);safeLocalStorageSetItem("categorys",h.Comm.settings.categorys),h.Calendar.rememberClickRefresh(),i.colorClass=h.Method.colorClass,h.settings.oldCategoryList=i;var c=$("#sortable");c.find(".allowDrop").remove(),c.append(h.Comm.doT.template(Mt())(h.settings.oldCategoryList))}else h.Comm.errorMessage(t.msg)})},calendarRemind:function(){ve.Z.getUserInvitedCalendarsCount().then(function(e){e.code==1&&e.data>0&&$("#calendarNumber").html(e.data).show()})},getInvitedCalendars:function(){ve.Z.invitedCalendars().then(function(e){if(e.code==1){var t=e.data;if(h.settings.dataCount=t.count,t.statusTypes=[""],$("#calendarLoading").hide(),t.calendars&&t.calendars.forEach(function(a){a.members.forEach(function(s,o){if(s.accountID===a.createUser){a.members.splice(o,1);return}})}),h.settings.dataCount>0){$("#calendarNumber").html(h.settings.dataCount).show();for(var i=0;i<t.calendars.length;i++){var n=t.calendars[i];n.isRecur&&(t.calendars[i].repeat=(0,Wi.MD)(n))}t.TplComm=h.inviteCalendarMethod,t.calendars.forEach(function(a){a.description=(0,wi.u1)(a.description).replace(/\n/g,"<br>")}),$("#invitedMain").show().find("#invitedCalendars").html(h.Comm.doT.template(Li())(Qe()({},t,{moment:g()}))),$("#invitedCalendars").find(".showBusinessCard").each(function(a,s){var o=$(s);if(!o.data("hasbusinesscard")){var l=o.parents(".addOtherUser").attr("data-id")||o.attr("data-id"),c=o.attr("data-avatar"),f=o.attr("data-status"),u=o.attr("data-name"),v=o.attr("data-isCalendar");kt.render(M.createElement(vi.Z,{sourceId:l},M.createElement("span",null,M.createElement("img",{className:"circle userHead",src:c}),f&&M.createElement("span",{class:"userStatus "+(f==="0"?"calendarCenterLabelNosubmit":f==="1"?"calendarCenterLabelSubmit":"calendarCenterLabelRefuse")}),M.createElement("span",{class:"TxtTop calendarName"}," ",u),v&&M.createElement("span",{class:"Gray_6 TxtTop calendarName"}," ",_l("(\u53D1\u8D77\u4EBA)")))),s),o.data("hasbusinesscard",!0)}})}else $("#invitedMain").show().find("#invitedCalendars").html('<div class="noData">'+_l("\u6682\u65E0\u5F85\u786E\u8BA4\u65E5\u7A0B")+"</div>"),$("#calendarNumber").hide()}else h.Comm.errorMessage(e.msg)})},colorClass:function(e,t){switch(e){case 0:return t=="list"?"iconTickRed":"colorBlockRed";case 1:return t=="list"?"iconTickViolet":"colorBlockViolet";case 2:return t=="list"?"iconTickBrown":"colorBlockBrown";case 3:return t=="list"?"iconTickOrange":"colorBlockOrange";case 4:return t=="list"?"iconTickBlue":"colorBlockBlue";case 5:return t=="list"?"iconTickGreen":"colorBlockGreen";case 6:return t=="list"?"iconTickYellow":"colorBlockYellow";default:break}},colorValue:function(e){switch(e){case"colorBlockRed":return 0;case"colorBlockViolet":return 1;case"colorBlockBrown":return 2;case"colorBlockOrange":return 3;case"colorBlockBlue":return 4;case"colorBlockGreen":return 5;case"colorBlockYellow":return 6;default:break}},inviteColorClass:function(e){switch(e){case 0:return"calendarColorRed";case 1:return"calendarColorViolet";case 2:return"calendarColorBrown";case 3:return"calendarColorOrange";case 4:return"calendarColorBlue";case 5:return"calendarColorGreen";case 6:return"calendarColorYellow";case 99:return"calendarColorGreen";case 100:return"calendarColorYellow";default:return"calendarColorBlue"}},otherUsers:function(){h.Comm.settings.otherUsers.length==1&&h.Comm.settings.otherUsers[0]==md.global.Account.accountId||ve.Z.getUserInfo({accountIDs:h.Comm.settings.otherUsers.join(",")}).then(function(e){e.code==1?h.Method.addOtherUser(e.data):h.Comm.errorMessage(e.msg)})},addOtherUser:function(e,t){var i=h.Comm.doT.template(Ii())(e),n=$("#tb_OtherUserCalendar"),a=$("#hideOneself");t?n.prepend(i):n.html(i),n.show(),a.show(),t&&$("#calendarType").scrollTop($("#calendarType")[0].scrollHeight),$("#calendarMenu .addOtherUserHeadImg.noInsert").each(function(s,o){var l=$(o).parent().attr("data-id"),c=$(o).attr("data-src");$(o).removeClass("noInsert"),kt.render(M.createElement(gi.Z,{user:{userHead:c,accountId:l},size:24}),o)}),$.inArray(md.global.Account.accountId,h.Comm.settings.otherUsers)<0&&a.find(".cbComplete").removeClass("icon-calendar-nocheck").addClass("icon-calendar-check")}},h.inviteCalendarMethod={formatInviteData:function(e,t,i,n){var a=g()(e),s=g()(t),o=parseInt(a.years(),10),l=parseInt(a.months(),10),c=parseInt(a.date(),10),f=parseInt(s.years(),10),u=parseInt(s.months(),10),v=parseInt(s.date(),10),m="",k=0;return o==f&&l==u&&c==v&&(k=1),i?n==0&&(k==1?m=a.format("MM\u6708DD\u65E5 (ddd)")+" ("+_l("\u5168\u5929")+")":(e=a.format("MM\u6708DD\u65E5 (ddd)"),t=s.format("MM\u6708DD\u65E5 (ddd)")+" ("+_l("\u5168\u5929")+")",m=e+" - "+t)):n==0&&(k==1?(e=a.format("MM\u6708DD\u65E5 (ddd) HH:mm"),t=s.format("HH:mm"),m=e+" - "+t):(e=a.format("MM\u6708DD\u65E5 (ddd) HH:mm"),t=s.format("MM\u6708DD\u65E5 (ddd) HH:mm"),m=e+" - "+t)),m},setWeek:function(e){for(var t=e.split(","),i=t.length,n=_l("\u661F\u671F"),a=[],s=0;s<i;s++)a.push(parseInt(t[s],10)),n+=h.inviteCalendarMethod.getWeekUpper(parseInt(t[s],10))+"\u3001";return n=n.substring(0,n.length-1),a.length==5&&parseInt(a[0],10)==1&&parseInt(a[4],10)==5&&(n=_l("\u5728 \u5DE5\u4F5C\u65E5")),n},getWeekUpper:function(e){var t=[0,1,2,3,4,5,6].map(function(i){return g()().day(i).format("dd")});return t[e]}},h.Export={init:function(){h.Comm.settings.otherUsers=window.localStorage.getItem("otherUsers"+md.global.Account.accountId)?window.localStorage.getItem("otherUsers"+md.global.Account.accountId).split(","):[md.global.Account.accountId],h.Comm.getQueryString("view")=="agendaWeek"&&(safeLocalStorageSetItem("lastView","agendaWeek"),h.Comm.settings.date=h.Comm.getQueryString("date"),h.Comm.settings.otherUsers=[md.global.Account.accountId],h.Comm.settings.otherUsers.push(h.Comm.getQueryString("userID")),safeLocalStorageSetItem("otherUsers"+md.global.Account.accountId,h.Comm.settings.otherUsers.join(",")),history.replaceState("","","home")),h.Calendar.init(),h.Method.init(),h.Method.calendarRemind(),h.Method.otherUsers()},bindEvent:h.Event};const Rt=h.Export;var Zi=b(54208),ji=b(3567),Xi=function(r){(0,Ft.default)(e,r);function e(t){(0,Nt.default)(this,e);var i=(0,zt.default)(this,(e.__proto__||Ot()(e)).call(this,t));return i.state={openTaskDetail:!1,taskId:""},mi(),i}return(0,Vt.default)(e,[{key:"componentDidMount",value:function(){$("html").addClass("AppCalendar"),Rt.bindEvent();var i=void 0,n=getCookie("i18n_langtag")||md.global.Config.DefaultLang;n==="zh-Hant"?i=b.e(3950).then(b.t.bind(b,13950,23)):n==="ja"?i=b.e(3357).then(b.t.bind(b,63357,23)):n!=="en"?i=b.e(8067).then(b.t.bind(b,48067,23)):i=At().resolve(),i&&i.then(function(){return Rt.init()});var a=this;$("#calendar").on("openTask",function(s,o){a.setState({openTaskDetail:!0,taskId:o})})}},{key:"componentWillUnmount",value:function(){$("html").removeClass("AppCalendar"),$("#calendar").fullCalendar("exit")}},{key:"render",value:function(){var i=this,n=this.state,a=n.openTaskDetail,s=n.taskId;return M.createElement(M.Fragment,null,M.createElement("div",{id:"calendarMenu",className:"calendarMenu ThemeBGColor9 flexColumn"},M.createElement("ul",{className:"calendarMenuTop liThemeHover0 ThemeBorderColor7"},M.createElement("li",{className:"boxSizing relative ThemeHoverBGColor7",id:"calInvite"},M.createElement("i",{className:"icon-calendar-confirmed ThemeColor9"}),M.createElement("span",{className:"ThemeColor10"},_l("\u5F85\u786E\u8BA4\u65E5\u7A0B")),M.createElement("span",{className:"calendarNumber",id:"calendarNumber"})),M.createElement("li",{className:"boxSizing ThemeHoverBGColor7",id:"synchronous"},M.createElement("i",{className:"icon-calendar-synchro ThemeColor9"}),M.createElement("span",{className:"ThemeColor10"},_l("\u540C\u6B65\u65E5\u7A0B\u5230\u5176\u4ED6\u5E94\u7528")))),M.createElement("div",{className:"calendarType flex",id:"calendarType"},M.createElement("div",{className:"calendarTypeTitle boxSizing relative"},M.createElement("span",{className:"ThemeColor9"},_l("\u5206\u7C7B\u65E5\u7A0B")),M.createElement("i",{className:"icon-edit pointer ThemeColor9 ThemeHoverColor10 addCalendarType",id:"addCalendarType"})),M.createElement("div",{className:"calendarTypeList",id:"calendarTypeList"}),M.createElement("div",{id:"hideOneself",className:"ThemeBorderColor7 ThemeColor9"},M.createElement("span",{className:"cbComplete icon-calendar-nocheck ThemeColor8",title:_l("\u9690\u85CF\u81EA\u5DF1")}),_l("\u9690\u85CF\u6211\u7684\u65E5\u7A0B"),M.createElement("span",{id:"allOtherUserDel",className:"ThemeColor9"},_l("\u6E05\u7A7A\u5168\u90E8"))),M.createElement("div",{id:"tb_OtherUserCalendar",className:"ThemeColor9"})),M.createElement("div",{className:"selectOther ThemeBorderColor8",id:"others",title:_l("\u67E5\u770B\u540C\u4E8B\u65E5\u7A0B")},M.createElement("i",{className:"icon-charger iconSelectOther ThemeColor8"}),M.createElement("span",{className:"ThemeColor9"},_l("\u67E5\u770B\u540C\u4E8B\u65E5\u7A0B")))),M.createElement("div",{className:"calendarMain boxSizing"},M.createElement("div",{id:"invitedMain"},M.createElement("span",{id:"exitInvited",className:"exitInvited ThemeBGColor3"},"< ",_l("\u8FD4\u56DE\u6211\u7684\u65E5\u7A0B")),M.createElement("ul",{id:"invitedCalendars",className:"calendarInvite boxSizing"})),M.createElement("div",{id:"calendar"}),M.createElement("div",{id:"calendarList"})),M.createElement("div",{id:"calendarLoading",className:"boxSizing relative"},M.createElement(Zi.Z,null)),M.createElement(ji.Z,{visible:a,taskId:s,openType:3,closeCallback:function(){return i.setState({openTaskDetail:!1})}}))}}]),e}(M.Component)}}]);
