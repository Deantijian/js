"use strict";(self.webpackChunkmingdao_web=self.webpackChunkmingdao_web||[]).push([[9865],{99865:(F,d,a)=>{a.r(d),a.d(d,{default:()=>M});var p=a(52945),c=a.n(p),m=a(85105),v=a.n(m),h=a(99663),f=a(22600),g=a(49135),y=a(93196),t=a(67294),u=a(65406),E=a(94176),C=a(25265),N=a(17563),I=a(15577),A=a(30381),G=a.n(A),M=function(b){(0,y.default)(s,b);function s(l){(0,h.default)(this,s);var e=(0,g.default)(this,(s.__proto__||v()(s)).call(this,l));return e.state={loading:!0,result:!1},e}return(0,f.default)(s,[{key:"componentWillReceiveProps",value:function(e){var n=e.location,r=n.search,i=N.parse(r.slice(1)),o=i.gID;o&&this.valideUserJoinGroup(o)}},{key:"componentDidMount",value:function(){var e=(0,I.A_)(),n=e.gID;n?this.valideUserJoinGroup(n):alert(_l("\u7FA4\u7EC4Id\u4E0D\u80FD\u4E3A\u7A7A"),3)}},{key:"valideUserJoinGroup",value:function(e){var n=this;u.Z.valideUserJoinGroup({groupId:e}).then(function(r){n.setState({result:r})})}},{key:"handleOpenChat",value:function(){var e=this,n=this.state.result.groupId;u.Z.valideUserJoinGroup({groupId:n}).then(function(r){var i=r.isMember;i?E.Z.dispatch(C.Pr(n)):(alert(_l("\u5DF2\u7ECF\u88AB\u7BA1\u7406\u5458\u4ECE\u7FA4\u4E2D\u5220\u9664"),2),e.setState({result:r}))})}},{key:"handleOpenFeed",value:function(){var e=this.state.result.groupId;location.href="/feed?groupId="+e}},{key:"handleApply",value:function(){var e=this,n=this.state.result,r=n.groupId,i=n.isApply;if(i){alert(_l("\u5DF2\u7ECF\u7533\u8BF7\u52A0\u5165\u8BE5\u7FA4\u7EC4\uFF0C\u8BF7\u7B49\u5F85\u7FA4\u7EC4\u7BA1\u7406\u5458\u7684\u5BA1\u6279"),2);return}u.Z.applyJoinGroup({groupId:r}).then(function(o){o.isMember?e.setState({result:c()(e.state.result,{isMember:!0})}):o.isApply&&alert(_l("\u5DF2\u7ECF\u7533\u8BF7\u52A0\u5165\u8BE5\u7FA4\u7EC4\uFF0C\u8BF7\u7B49\u5F85\u7FA4\u7EC4\u7BA1\u7406\u5458\u7684\u5BA1\u6279"),4),o.isApply&&(e.setState({result:c()(e.state.result,{isApply:!0})}),alert(_l("\u5DF2\u7ECF\u7533\u8BF7\u52A0\u5165\u8BE5\u7FA4\u7EC4\uFF0C\u8BF7\u7B49\u5F85\u7FA4\u7EC4\u7BA1\u7406\u5458\u7684\u5BA1\u6279"),2))})}},{key:"renderContent",value:function(){var e=this.state.result,n=e.project;return t.createElement("div",null,t.createElement("img",{src:e.avatar,className:"group-avatar"}),t.createElement("div",{className:"group-name"},e.name),n?t.createElement("div",null,n.companyName):void 0,t.createElement("div",{className:"group-row"},t.createElement("div",null,_l("\u521B\u5EFA\u4EBA"),"\uFF1A ",t.createElement("span",{className:"black"},e.createAccount.fullname)," "),t.createElement("div",null,e.isPost?_l("\u7FA4\u7EC4\u6210\u5458"):_l("\u804A\u5929\u6210\u5458"),"\uFF1A",t.createElement("span",{className:"black"},e.groupMemberCount)," ")),t.createElement("div",{className:"group-create-tiem"},_l("\u5EFA\u7ACB\u65F6\u95F4"),"\uFF1A ",t.createElement("span",{className:"black"},G()(e.createTime).format("YYYY-MM-DD"))),e.isPost?t.createElement("div",{className:"group-about"},t.createElement("span",null,_l("\u7FA4\u516C\u544A")),t.createElement("div",null,e.about?e.about:_l("\u6682\u65E0\u7FA4\u516C\u544A"))):void 0,e.isMember?t.createElement("div",{className:"group-btns"},t.createElement("div",{className:"group-btn group-send ThemeBGColor3",onClick:this.handleOpenChat.bind(this)},t.createElement("i",{className:"icon-replyto"}),_l("\u53D1\u6D88\u606F")),e.isPost?t.createElement("div",{className:"group-btn group-feed",onClick:this.handleOpenFeed.bind(this)},t.createElement("i",{className:"icon-dynamic-empty"}),_l("\u7FA4\u7EC4\u52A8\u6001")):void 0):t.createElement("div",{className:"group-btns"},e.isPost?t.createElement("div",{className:"group-btn group-apply ThemeBGColor3",onClick:this.handleApply.bind(this)},e.isApply?_l("\u5DF2\u7533\u8BF7"):_l("\u7533\u8BF7\u52A0\u5165")):void 0))}},{key:"render",value:function(){var e=this.state.result;return t.createElement("div",{className:"groupValidate-wrapper card"},e?this.renderContent():void 0)}}]),s}(t.Component)}}]);
