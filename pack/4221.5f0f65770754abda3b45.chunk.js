"use strict";(self.webpackChunkmingdao_web=self.webpackChunkmingdao_web||[]).push([[4221],{44221:(ke,$,c)=>{c.r($),c.d($,{default:()=>Ae});var ie=c(93567),de=c(25273),ue=c(85315),we=c(44516),B=c(10149),z=c(54208),W=c(20845),U=c(88239),fe=c(85105),X=c.n(fe),J=c(99663),Q=c(22600),q=c(49135),_=c(93196),e=c(67294),he=c(12855),me=c(96486),F=c.n(me),ge=c(30381),T=c.n(ge),ye=c(46891),ve=c(26581),Z=c(33867),Ce=c(86735),Se=c(5017),Ie=c(93967),R=c.n(Ie),L=c(2116),Ee=(0,Ce.Z)([`
  padding-top: 8px;
  padding-right: 11px;
  width: fit-content;
  .sideItem {
    width: 150px;
    padding: 13px 0;
    border-radius: 3px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .sideItem span {
    line-height: 14px;
    height: 14px;
    padding-left: 10px;
    border-left: 2px solid #fff;
  }
  .sideItem:hover {
    background: #f7f7f7;
    span {
      border-left: 2px solid #f7f7f7;
    }
  }
  .sideItem.current {
    background: #f2faff;
    font-weight: 600;
    color: #2196f3;
  }
  .sideItem.current span {
    border-left: 2px solid #2196f3;
  }
  .sideTooltip {
    width: 352px;
  }
`],[`
  padding-top: 8px;
  padding-right: 11px;
  width: fit-content;
  .sideItem {
    width: 150px;
    padding: 13px 0;
    border-radius: 3px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .sideItem span {
    line-height: 14px;
    height: 14px;
    padding-left: 10px;
    border-left: 2px solid #fff;
  }
  .sideItem:hover {
    background: #f7f7f7;
    span {
      border-left: 2px solid #f7f7f7;
    }
  }
  .sideItem.current {
    background: #f2faff;
    font-weight: 600;
    color: #2196f3;
  }
  .sideItem.current span {
    border-left: 2px solid #2196f3;
  }
  .sideTooltip {
    width: 352px;
  }
`]),Te=Se.ZP.ul(Ee),xe=function(v){(0,_.default)(m,v);function m(){return(0,J.default)(this,m),(0,q.default)(this,(m.__proto__||X()(m)).apply(this,arguments))}return(0,Q.default)(m,[{key:"render",value:function(){var t=this.props,a=t.current,n=a===void 0?"all":a,r=t.onChange;return e.createElement(Te,null,L.Gg.filter(function(s){return md.global.Account.projects.length===0?s.key!=="app"&&s.key!=="record":!0}).map(function(s){return e.createElement("li",{key:"GlobalSearchSide-"+s.key,className:R()("sideItem",{current:n===s.key}),onClick:function(){return r({searchType:s.key})}},e.createElement("span",null,s.label),s.key==="record"&&e.createElement(ve.Z,{tooltipClass:"sideTooltip",text:_l("\u53EF\u641C\u7D22\u7684\u5B57\u6BB5\u7C7B\u578B\u5305\u542B\uFF1A\u6587\u672C\u3001\u90AE\u7BB1\u3001\u7535\u8BDD\u3001\u81EA\u52A8\u7F16\u53F7\u3001\u8BC1\u4EF6\u3001\u6587\u672C\u7EC4\u5408\u3001\u5173\u8054\u5B57\u6BB5\u3001\u4ED6\u8868\u5B57\u6BB5(\u4EC5\u5B58\u50A8)\u3002")},e.createElement(Z.Z,{icon:"info_outline",className:"Font17 Gray_bd mRight10"})))}))}}]),m}(e.Component),ee=c(17748),te=c(14322),ae=c(29455),ne=c(78848),re=c(68650),le=c(36021),Y=c(29396),b=c(15577),G=c(77863),oe=c(6100),Ne=c(3540),O=c(12424),M=c(31261),je=c(91088);function Pe(v){var m=v.projectId,y=v.onChange,t=v.defaultAppId,a=v.className,n=v.filterIds,r=(0,e.useState)(null),s=(0,O.Z)(r,2),o=s[0],p=s[1],i=(0,e.useState)(!1),d=(0,O.Z)(i,2),u=d[0],S=d[1],N=(0,e.useState)(""),C=(0,O.Z)(N,2),g=C[0],I=C[1],P=(0,e.useState)([]),A=(0,O.Z)(P,2),D=A[0],f=A[1],h=(0,e.useState)(!1),l=(0,O.Z)(h,2),j=l[0],H=l[1];(0,e.useEffect)(function(){je.Z.getMyApp({projectId:m||localStorage.getItem("currentProjectId")}).then(function(E){f(E.apps)})},[m]);var k=function(w){I(w)},K=function(w){p(w),y(w.id),S(!1)},Le=function(w){p(null),y(void 0),w.stopPropagation()};return e.createElement(M.Z,{className:"appSelectTrigger",popupVisible:u,onPopupVisibleChange:function(w){return S(w)},action:["click"],popupAlign:{points:["tr","br"]},popup:e.createElement("div",{className:"appDrowSelectCon"},e.createElement("div",{className:"appSearchCon"},e.createElement(Z.Z,{icon:"search Font16 Gray_9d"}),e.createElement(Ne.Z,{placeholder:_l("\u641C\u7D22"),className:"flex",value:g,onChange:k})),e.createElement("ul",{className:"appList"},j&&e.createElement(z.Z,{size:"middle"}),D.filter(function(E){return E.name.indexOf(g)>-1}).filter(function(E){return n.length===0||n.indexOf(E.id)>-1}).map(function(E){return e.createElement("li",{className:"appListItem",key:"appDrowSelectList-item-"+E.id,onClick:function(){return K(E)}},e.createElement("span",{className:"imgCon",style:{background:E.iconColor}},e.createElement(oe.Z,{url:E.iconUrl,fill:"#FFF",size:16})),e.createElement("span",{className:"name mLeft15 ellipsis"},E.name))})))},e.createElement("span",{className:a+" selectApp "+(o?"light":"")},o?e.createElement("span",{className:"selectedIconCon",style:{background:o.iconColor}},e.createElement(oe.Z,{url:o.iconUrl,fill:"#FFF",size:10})):e.createElement(Z.Z,{icon:"widgets",className:o?"color_light":"Gray_9e"}),e.createElement("span",{className:"mLeft6 "+(o?"color_light Bold":"Gray_9e")},o?o.name:_l("\u6309\u5E94\u7528")),o&&e.createElement(Z.Z,{icon:"clear_bold",className:"Font12 color_light lineHeight13 mLeft8",onClick:Le})))}var se=[{label:"\u9ED8\u8BA4",key:0,icon:"score-down"},{label:"\u66F4\u65B0\u65F6\u95F4",key:1,icon:"score-down"},{label:"\u66F4\u65B0\u65F6\u95F4",key:2,icon:"score-up"},{label:"\u521B\u5EFA\u65F6\u95F4",key:3,icon:"score-down"},{label:"\u521B\u5EFA\u65F6\u95F4",key:4,icon:"score-up"}];function De(v){var m=v.value,y=m===void 0?0:m,t=v.onChange,a=v.className,n=a===void 0?"":a,r=(0,e.useState)(!1),s=(0,O.Z)(r,2),o=s[0],p=s[1],i=function(u){t(u),p(!1)};return e.createElement(M.Z,{className:"appSelectTrigger",popupVisible:o,onPopupVisibleChange:function(u){return p(u)},action:["click"],popupAlign:{points:["tr","br"]},popup:e.createElement("div",{className:"SelectSortDrowCon"},e.createElement("div",{className:"title"},_l("\u6309\u66F4\u65B0\u65F6\u95F4")),e.createElement("div",{className:R()("item valignWrapper",{lighthigh:y===1}),onClick:function(){return i(1)}},_l("\u964D\u5E8F"),e.createElement(Z.Z,{icon:"score-down",className:"Font16 mLeft4"})),e.createElement("div",{className:R()("item valignWrapper",{lighthigh:y===2}),onClick:function(){return i(2)}},_l("\u5347\u5E8F"),e.createElement(Z.Z,{icon:"score-up",className:"Font16 mLeft4"})),e.createElement("div",{className:"title"},_l("\u6309\u521B\u5EFA\u65F6\u95F4")),e.createElement("div",{className:R()("item valignWrapper",{lighthigh:y===3}),onClick:function(){return i(3)}},_l("\u964D\u5E8F"),e.createElement(Z.Z,{icon:"score-down",className:"Font16 mLeft4"})),e.createElement("div",{className:R()("item valignWrapper",{lighthigh:y===4}),onClick:function(){return i(4)}},_l("\u5347\u5E8F"),e.createElement(Z.Z,{icon:"score-up",className:"Font16 mLeft4"})))},e.createElement("span",{className:"selectSort Gray_9e "+n+" "+(y===0?"":"lighthigh")},y===0?_l("\u66F4\u65B0\u65F6\u95F4"):se[y].label,e.createElement(Z.Z,{icon:se[y].icon,className:"Gray_9e"})))}var Ze=c(81274),ce=[{label:_l("\u4E0D\u9650\u65F6\u95F4"),key:"clear",value:void 0},{label:_l("\u4ECA\u5929"),key:"today",value:[T()(new Date).startOf("day").format(),T()(new Date).endOf("day").format()]},{label:_l("\u6700\u8FD17\u5929"),key:"last7",value:[T()(new Date).subtract(6,"days").startOf("day").format(),T()(new Date).format()]},{label:_l("\u672C\u6708"),key:"month",value:[T()(new Date).startOf("month").format(),T()(new Date).format()]},{label:_l("\u4E0A\u6708"),key:"lastmonth",value:[T()(new Date).subtract(1,"months").startOf("month").format(),T()(new Date).subtract(1,"months").endOf("month").endOf("day").format()]},{label:_l("\u81EA\u5B9A\u4E49"),key:"custom",value:void 0}];function be(v){var m=v.options,y=m===void 0?ce:m,t=v.value,a=t===void 0?ce[0]:t,n=v.onChange,r=(0,e.useRef)(null),s=(0,e.useState)(!1),o=(0,O.Z)(s,2),p=o[0],i=o[1];return e.createElement(M.Z,{className:"dateFilterTrigger",popupVisible:p,onPopupVisibleChange:function(u){return i(u)},action:["click"],popupAlign:{points:["tr","br"]},popup:e.createElement("ul",{className:"globalSearch-data-filter-select"},y.map(function(d){return d.key!=="custom"?e.createElement("li",{className:R()("selectItem",{active:a&&a.key===d.key}),key:"data-filter-select-"+d.key,onClick:function(){n(d),i(!1)}},d.label):e.createElement("div",{key:"data-filter-select-"+d.key,ref:r},e.createElement(Ze.Z.RangePicker,{offset:{left:-533,top:0},popupParentNode:function(){return r.current},onOk:function(S){var N=(0,O.Z)(S,2),C=N[0],g=N[1];n((0,U.default)({},d,{value:[T()(C).format(),T()(g).format()]})),i(!1)},onClear:function(){return n((0,U.default)({},d,{value:void 0}))},onSelect:function(){}},e.createElement("li",{className:R()("selectItem",{active:a&&a.key===d.key})},_l("\u81EA\u5B9A\u4E49\u65E5\u671F"))))}))},e.createElement("span",{className:"globalSearchDateFilter Gray_9e valignWrapper"},e.createElement(Z.Z,{icon:"event",className:"mRight5 Font14"}),a.key==="clear"?_l("\u6309\u66F4\u65B0\u65F6\u95F4"):a.key==="custom"?""+T()(a.value[0]).format("YYYY-MM-DD")+_l("\u81F3")+T()(a.value[1]).format("YYYY-MM-DD"):a.label))}var pe=c(59206),x=c(1762),V,Ae=(0,he.Z)(V=(0,ye.Z)(V=function(v){(0,_.default)(m,v);function m(y){(0,J.default)(this,m);var t=(0,q.default)(this,(m.__proto__||X()(m)).call(this,y));return t.getFilterCount=function(){var a=t.state,n=a.projectId,r=a.searchType,s=n==="all"||!n?(0,x.yH)():n,o=F().find(md.global.Account.projects||[],{projectId:s});if(r==="record"&&((0,b.XH)(s,G.UU.globalSearch)!=="1"||o.licenseType===2)){t.setState({filterCount:0});return}if(!s){alert(_l("\u8BF7\u5148\u52A0\u5165\u7EC4\u7EC7"),2);return}Y.Z.getFilterCount({projectId:s}).then(function(p){t.setState({filterCount:p})})},t.updateSearchParam=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.setState(a,function(){t.getData(),a.hasOwnProperty("projectId")&&["record","all"].includes(t.state.searchType)&&t.getFilterCount()})},t.getData=function(){var a=t.state,n=a.searchKey,r=a.searchType,s=a.pageIndex,o=a.projectId,p=a.appId,i=a.sort,d=a.dateRange,u=a.appData,S=a.data,N=a.onlyTitle,C=r==="record"&&p?1:2;if(!(!n||!n.trim()||n.trim()==="undefined")&&!(L.CG.hasOwnProperty(r)&&!o)){t.setState({loading:!0,otherLoading:!0});var g=o==="all"||!o?(0,x.yH)():o,I={keywords:n,searchType:L.CG[r],searchRange:C,pageIndex:s,pageSize:r==="all"?5:50,projectId:g,appId:C===1?p:void 0,sort:r==="record"?i:0,onlyTitle:N,bombLayer:r==="all"},P={keywords:n,searchType:r,projectId:r==="all"||o==="all"?"":o,pageSize:r==="all"?5:50,searchRange:r==="all"||o==="all"?"0":"2",postType:-1,pageIndex:s};if(d&&d.key!=="clear"&&(P.startDate=T()(d.value[0]).format("YYYY-MM-DD"),P.endDate=T()(d.value[1]).format("YYYY-MM-DD")),r==="all")Y.Z.search(P).then(function(f){t.setState({loading:!1,data:f})}),md.global.Account.projects.length===0?t.setState({otherLoading:!1}):Y.Z.searchApp(I).then(function(f){t.setState({otherLoading:!1,resultCode:f.resultCode,appData:f})},function(f){t.setState({otherLoading:!1})});else{var A=F().find(md.global.Account.projects||[],{projectId:g});if(r==="record"&&((0,b.XH)(g,G.UU.globalSearch)!=="1"||A.licenseType===2)){t.setState({loading:!1,otherLoading:!1,total:0,loadEnd:!0});return}var D=L.CG.hasOwnProperty(r)?Y.Z.searchApp(I):Y.Z.search(P);D.then(function(f){var h=r==="app"?f.apps:r==="record"?f.rows:f,l={loading:!1,otherLoading:!1,total:L.CG.hasOwnProperty(r)?h.total||0:h[0]&&h[0].count||0,searchAppResCode:f.resultCode};if(["app","record"].indexOf(r)>-1){var j=r==="app"?"apps":"rows";s===1?l.appData=f:r==="app"?(l.appData=f,l.appData.apps.list=u.apps.list.concat(h.list)):(l.appData=f,l.appData.rows.list=u.rows.list.concat(h.list),l.appData.rows.titleControls=u.rows.titleControls.concat(h.titleControls)),l.loadEnd=r==="record"?!f.rows.nextPage:!(l.total>l.appData[j].list.length)}else l.data=h,s!==1&&(l.data[0][r+"List"]=(S[0][r+"List"]||[]).concat(h[0][r+"List"]||[]),l.loadEnd=!(l.total>l.data[0][r+"List"].length));t.setState((0,U.default)({},l))})}}},t.updateSearchApp=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.setState({loading:!0});var n=t.state,r=n.searchKey,s=n.projectId,o=n.appProjectId,p=n.resultCode,i=n.appData,d=n.onlyTitle,u=n.searchType,S=a.type,N={keywords:r,searchType:S,searchRange:2,pageIndex:1,pageSize:5,projectId:s?S===7?o:s:(0,x.yH)(),sort:0,onlyTitle:d,bombLayer:u==="all"};Y.Z.searchApp(N).then(function(C){var g=F().cloneDeep(i);S===7?g.apps=C.apps:(g.rows=C.rows,g.resultCode=C.resultCode),t.setState({loading:!1,resultCode:S===7?p:C.resultCode,appData:g})})},t.onChange=function(a){var n=t.state,r=n.searchKey,s=n.searchType,o=n.projectId,p=n.loading,i=n.otherLoading;a.searchType===s||p||i||(0,le.T8)("/search?search_key="+(r||"")+"&search_type="+(a.searchType||""))},t.getStart=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=t.state,r=n.appData,s=n.data,o="";if(r&&(r.apps.length!==0||r.rows.length!==0))o=r.apps.length!==0?"app":r.rows.length!==0?"record":"";else if(s){var p=s.filter(function(i){return i.count!==0&&["user","group"].indexOf(i.type)<0});if(p.length===0)return!1;o=p[0].type}else return!1;return a===o},t.onStartBetween=function(a){var n=t.state,r=n.appData,s=n.data,o=s.filter(function(d){return["user","group"].indexOf(d.type)<0}),p="";if(a==="app")p=r.rows.length!==0?"record":o[0].type;else if(a==="record")p=o[0]?o[0].type:"";else{var i=o.find(function(d,u){return u!==0&&o[u-1].type===a});p=i?i.type:""}t.setState({highlightType:p})},t.renderList=function(){var a=t.state,n=a.searchType,r=a.loading,s=a.searchKey,o=a.projectId,p=a.data,i=a.appData,d=a.searchAppResCode,u=a.otherLoading,S=a.sort,N=a.onlyTitle,C=a.resultCode,g=null;if(d===2&&n==="record")return null;var I=F().find(md.global.Account.projects,{projectId:o!=="all"||L.Yt.includes(n)?o:(0,x.yH)()});if(n==="record"&&((0,b.XH)(I.projectId,G.UU.globalSearch)!=="1"||I.licenseType===2))return null;if(!r&&!u&&(n==="all"&&(!p||p.length===0)&&(!i||(!i.apps||i.apps.total===0)&&(!i.rows||i.rows.total===0))||n==="record"&&(!i||!i.rows||i.rows.total===0)||n==="app"&&(!i||!i.apps||i.apps.total===0)))return e.createElement(ee.Z,{positionStyle:{top:"97px",transform:"translate(-50%, 0)"},text:_l("\u6CA1\u6709\u641C\u7D22\u7ED3\u679C")});if(!(!p&&!i)){if((n==="user"||n==="group")&&p&&p[0]){var P={allCount:p[0].count||0,type:p[0].type,list:p[0][n+"List"]};g=e.createElement(te.Z,{needDesc:n==="group"?!1:o&&o!=="all",data:(0,U.default)({},P),type:n==="user"?0:1,needShowMore:!1,needShowAll:!1,searchKeyword:s})}else if(["kcnode","task","post"].indexOf(n)>-1)g=p&&e.createElement(ne.Z,{data:p[0]||[],dataKey:n,searchKeyword:s,needTime:!0,start:!0});else if(["app","record"].indexOf(n)>-1){if(!i||!o)return null;g=e.createElement(re.Z,{currentProjectId:I.projectId,data:n==="app"?i.apps:i.rows,dataKey:n,searchKeyword:s,currentProjectName:I.companyName,needTime:!0,start:!0,loadMore:!0,sortTime:S<3?"updateTime":"createTime",getNextPage:function(){if(H!=="app"){var j=t.state,H=j.searchType,k=j.loadEnd;k||t.updateSearchParam({pageIndex:t.state.pageIndex+1})}},update:function(){t.updateSearchParam({pageIndex:1}),t.getFilterCount()}})}else if(n==="all"){var A=t.state,D=A.appProjectId,f=A.highlightType,h=A.filterCount;return e.createElement(e.Fragment,null,["apps","rows"].map(function(l){if(!i)return null;var j=[e.createElement(ae.Z,{style:{marginLeft:"18px"},currentProjectId:(l==="apps"?D:o)||(0,x.yH)(),needAll:!1,onChange:function(K){if(l==="apps"){t.setState({appProjectId:K},function(){return t.updateSearchApp({type:7})});return}t.setState({projectId:K},function(){t.updateSearchApp({type:8}),t.getFilterCount()})}})],H=l==="apps"?"app":"record";return l==="rows"&&j.push(e.createElement("div",{className:"mLeftAuto valignWrapper"},e.createElement(pe.Z,{className:"mRight20",projectId:o||(0,x.yH)(),count:h,update:function(){return t.updateSearchApp({type:8})},onChangeCount:function(K){return t.setState({filterCount:K})}}),e.createElement(W.Z,{text:_l("\u53EA\u641C\u7D22\u8BB0\u5F55\u6807\u9898"),className:"Gray_9e",checked:N,onClick:function(K){t.setState({onlyTitle:!N},function(){return t.updateSearchApp({type:8})})}}))),e.createElement(re.Z,{currentProjectId:I.projectId,key:"global-search-appList-"+l,data:i[l]||{},dataKey:H,searchKeyword:s,currentProjectName:I.companyName,needTime:!0,needTitle:!0,viewAll:!0,className:"globalSearchAllContentItem",extendButtons:j,start:f?f===H:t.getStart(H),explore:l==="rows"&&d===4,onStartBetween:function(){return t.onStartBetween(H)},resultCode:l==="rows"?I.licenseType===2?3:C:null,update:function(){l!=="apps"&&(t.updateSearchApp({type:8}),t.getFilterCount())}})}),p&&p.filter(function(l){return l.type!=="user"&&l.type!=="group"}).map(function(l){return e.createElement(ne.Z,{className:"globalSearchAllContentItem",data:l,dataKey:l.type,searchKeyword:s,needTime:!0,needTitle:!0,start:f?f===l.type:t.getStart(l.type),onStartBetween:function(){return t.onStartBetween(l.type)},viewAll:!0})}),p&&p.filter(function(l){return l.type==="user"||l.type==="group"}).map(function(l){var j={allCount:l.count,type:l.type,list:l[l.type+"List"]};return e.createElement(te.Z,{needDesc:!1,data:(0,U.default)({},j),type:l.type==="user"?0:1,needShowMore:!1,needShowAll:!0,searchKeyword:s,needTitle:!0,className:"globalSearchAllContentItem"})}))}return e.createElement(e.Fragment,null,g,(r||u)&&e.createElement("div",{className:"searchContent loading"},e.createElement(z.Z,{size:"middle"})))}},t.handleScrollEnd=F().debounce(function(a){var n=t.state,r=n.searchType,s=n.loadEnd;r==="all"||s||t.updateSearchParam({pageIndex:t.state.pageIndex+1})},500),t.state={searchKey:void 0,searchType:"",loading:!1,data:void 0,pageIndex:1,projectId:"",total:0,searchAppResCode:!1,appData:void 0,appId:void 0,sort:0,dateRange:void 0,loadEnd:!1,otherLoading:!1,appProjectId:"",highlightType:"",onlyTitle:!0,filterCount:void 0},t}return(0,Q.default)(m,[{key:"componentDidMount",value:function(){var t=(0,b.A_)(this.props.search);this.initParam(),t.appId&&t.appId!=="undefined"&&this.setState({appId:t.appId})}},{key:"componentDidUpdate",value:function(){var t=(0,b.A_)(this.props.search);(this.state.searchKey!==t.search_key||t.search_type&&this.state.searchType!==t.search_type)&&this.initParam()}},{key:"initParam",value:function(){var t=(0,b.A_)(this.props.search),a=this.state,n=a.searchType,r=a.projectId,s=a.appProjectId,o=L.Yt.includes(t.search_type)?"all":t.search_type!==n?(0,x.yH)():r;this.updateSearchParam({searchKey:t.search_key,searchType:t.search_type||"all",projectId:L.Yt.includes(t.search_type)?"all":t.search_type!==n?(0,x.yH)():r,appProjectId:t.search_type!==n?(0,x.yH)():s,pageIndex:1,dateRange:void 0})}},{key:"render",value:function(){var t=this,a=this.state,n=a.searchKey,r=a.searchType,s=a.data,o=a.loading,p=a.projectId,i=a.total,d=a.searchAppResCode,u=a.appData,S=a.appId,N=a.sort,C=a.dateRange,g=a.otherLoading,I=a.onlyTitle,P=a.pageIndex,A=a.filterCount;if(!r)return null;var D=p==="all"||!p?(0,x.yH)():p,f=F().find(md.global.Account.projects,{projectId:D});return e.createElement(ie.Z,{projectId:(0,x.yH)()},e.createElement("div",{className:"GlobalSearch"},e.createElement("div",{className:"GlobalSearchCard"},e.createElement(xe,{current:r,onChange:function(l){l.searchType!==r&&(t.setState({data:void 0,appData:void 0}),(0,le.T8)("/search?search_key="+n+"&search_type="+l.searchType))}}),e.createElement("div",{className:"GlobalSearchContent"},r!=="all"&&e.createElement(e.Fragment,null,e.createElement("div",{className:"flexRow selectCon mTop20"},e.createElement(ae.Z,{currentProjectId:p||(0,x.yH)(),needAll:L.Yt.includes(r),onChange:function(l){return t.updateSearchParam({projectId:l,pageIndex:1})}}),e.createElement("div",{className:"mRight24 valignWrapper"},r==="record"&&e.createElement(e.Fragment,null,e.createElement(pe.Z,{projectId:p||(0,x.yH)(),count:A,update:function(){t.updateSearchParam({pageIndex:1})},onChangeCount:function(l){return t.setState({filterCount:l})}}),e.createElement(W.Z,{text:_l("\u53EA\u641C\u7D22\u8BB0\u5F55\u6807\u9898"),className:"Gray_9e mLeft20",checked:I,onClick:function(l){t.updateSearchParam({onlyTitle:!I,pageIndex:1})}}),e.createElement(Pe,{className:"mLeft16",projectId:p,defaultAppId:S,filterIds:F().uniq((u?u.rows.list||[]:[]).map(function(h){return h.appId})),onChange:function(l){return t.updateSearchParam({appId:l,pageIndex:1})}})),["record"].indexOf(r)>-1&&e.createElement(De,{className:"mLeft20",value:N,onChange:function(l){return t.updateSearchParam({sort:l,pageIndex:1})}}),["post","task","kcnode"].indexOf(r)>-1&&e.createElement(be,{value:C,onChange:function(l){return t.updateSearchParam({dateRange:l,pageIndex:1})}}))),n&&(r==="record"?(0,b.XH)(D,G.UU.globalSearch)!=="2"&&f.licenseType!==2:!0)&&e.createElement(B.Z,{round:!0,paragraph:!1,loading:(o||g)&&P===1&&(["app","record"].indexOf(r)<0||d===2&&r==="record"),title:{width:"250px"},active:!0},e.createElement("p",{className:"allCount mTop16 Gray_9e mLeft10"},d===2&&r==="record"?_l("\u6570\u636E\u6B63\u5728\u521D\u59CB\u5316\uFF0C\u8BF7\u8010\u5FC3\u7B49\u5F85"):["app","record"].indexOf(r)<0?_l("\u641C\u7D22\u5230 %0 \u4E2A\u7ED3\u679C",i):null))),(!n||!n.trim())&&(r==="record"?(0,b.XH)(D,G.UU.globalSearch)==="1"&&f.licenseType!==2:!0)&&e.createElement(ee.Z,{positionStyle:{top:"97px",transform:"translate(-50%, 0)"},text:_l("\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u5B57")}),r==="record"&&!o&&((0,b.XH)(D,G.UU.globalSearch)!=="1"||f.licenseType===2)&&e.createElement("div",{className:"upgradeVersion "},(0,b.j0)(D,G.UU.globalSearch,{dialogType:"content"})),e.createElement(de.Z,{onScrollEnd:this.handleScrollEnd},n&&n.trim()&&e.createElement(e.Fragment,null,[].concat((0,ue.Z)(new Array(5))).map(function(h,l){return e.createElement(B.Z,{className:"mBottom20 scrollListskeleton",active:!0,round:!0,loading:o&&g&&P===1,title:!1,avatar:{size:32},paragraph:{rows:2,width:["253px","100%"]}},l===0?t.renderList():null)})))))))}}]),m}(e.Component))||V)||V}}]);
