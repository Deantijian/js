"use strict";(self.webpackChunkmingdao_web=self.webpackChunkmingdao_web||[]).push([[5123],{5123:(O,L,r)=>{r.r(L),r.d(L,{default:()=>z});var V=r(70264),F=r(62745),h=r(33867),R=r(85105),P=r.n(R),N=r(99663),C=r(22600),G=r(49135),A=r(93196),e=r(67294),y=r(15577),D=r(36964),W=r.n(D);const x={applyLicenseCode:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("PrivateGuide","ApplyLicenseCode",t,n)},getLicenseList:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("PrivateGuide","GetLicenseList",t,n)},getServerLicenseList:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("PrivateGuide","GetServerLicenseList",t,n)},getServerInfo:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("PrivateGuide","GetServerInfo",t,n)},getPlatformLicenseInfo:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("PrivateGuide","GetPlatformLicenseInfo",t,n)},getPlatformLicenseLogs:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("PrivateGuide","GetPlatformLicenseLogs",t,n)},getSupportInfo:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("PrivateGuide","GetSupportInfo",t,n)},getProjects:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("PrivateGuide","GetProjects",t,n)},bindProject:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("PrivateGuide","BindProject",t,n)},bindLicenseCode:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("PrivateGuide","BindLicenseCode",t,n)},enableLicenseCode:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("PrivateGuide","EnableLicenseCode",t,n)},bindTrialLicenseCode:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("PrivateGuide","BindTrialLicenseCode",t,n)},addAdmin:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("PrivateGuide","AddAdmin",t,n)},addProject:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("PrivateGuide","AddProject",t,n)},getGuideStepStatus:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("PrivateGuide","GetGuideStepStatus",t,n)}};var b=r(42185),T=r(47426),Z=r(31546),S=r(3540),Y=r(96486),E=r.n(Y),K=function(s){(0,A.default)(t,s);function t(n){(0,N.default)(this,t);var a=(0,G.default)(this,(t.__proto__||P()(t)).call(this,n));a.handleGenerateKey=function(m){var l=a.state,o=l.serverId,p=l.channel,f=l.licenseTemplateVersion,d=l.projectName,u=l.scaleId,g=l.job,I=l.licenseVersion;if(E().isEmpty(o)){alert(_l("\u8BF7\u8F93\u5165\u670D\u52A1\u5668 ID"),3);return}if(E().isEmpty(d)){alert(_l("\u8BF7\u8F93\u5165\u7EC4\u7EC7\u540D\u79F0"),3);return}if(E().isEmpty(g)){alert(_l("\u8BF7\u8F93\u5165\u804C\u4F4D"),3);return}x.applyLicenseCode({serverId:o,channel:p,licenseTemplateVersion:f,projectName:d,job:g,scaleId:u,licenseVersion:I},{silent:!0}).then(function(v){v?(alert(_l("\u5BC6\u94A5\u7533\u8BF7\u6210\u529F\uFF0C\u8BF7\u590D\u5236\u540E\u53BB\u7533\u8BF7\u9875\u9762\u586B\u5199")),a.props.onClose(m,v)):alert(_l("\u5BC6\u94A5\u7533\u8BF7\u5931\u8D25"),2)}).fail(function(v){var c=v.errorMessage;alert(c==="community exists"||c==="professional trial exists"?_l("\u5BC6\u94A5\u7533\u8BF7\u5931\u8D25\uFF0C\u8BE5\u670D\u52A1\u5668ID\u5DF2\u7533\u8BF7\u8FC7\u5BC6\u94A5"):_l("\u5BC6\u94A5\u7533\u8BF7\u5931\u8D25"),2)})};var i=(0,y.A_)();return a.state={serverId:i.serverId,channel:i.channel||"",licenseTemplateVersion:i.ltv||"",projectName:"",job:"",scaleId:1,licenseVersion:0},a}return(0,C.default)(t,[{key:"render",value:function(){var a=this,i=this.state,m=i.serverId,l=i.projectName,o=i.job,p=i.scaleId,f=i.seconds,d=i.licenseVersion,u=(0,y.A_)().v,g=u&&parseFloat(u)>=5.3,I=[{value:1,text:_l("10\u4EBA\u4EE5\u4E0B")},{value:2,text:_l("10\uFF5E50\u4EBA")},{value:3,text:_l("51\uFF5E100\u4EBA")},{value:4,text:_l("101\uFF5E250\u4EBA")},{value:5,text:_l("251\uFF5E500\u4EBA")},{value:6,text:_l("501\u4EBA\u53CA\u4EE5\u4E0A")}];return e.createElement(e.Fragment,null,e.createElement("span",{className:"flexRow valignWrapper Gray_75 pointer",onClick:this.props.onClose},e.createElement(h.Z,{icon:"backspace",className:"mRight3 Font20"}),_l("\u8FD4\u56DE")),e.createElement("div",{className:"applyForm"},e.createElement("div",{className:"Bold Font28 mBottom30"},_l("\u5BC6\u94A5\u7533\u8BF7")),e.createElement("div",{className:"formItem"},e.createElement("div",{className:"Font14 Bold mBottom5"},_l("\u670D\u52A1\u5668 ID")),e.createElement("div",{className:"mTop16 mBottom24 Gray_75"},m)),e.createElement("div",{className:"formItem"},e.createElement("div",{className:"Font14 Bold mBottom5"},_l("\u7EC4\u7EC7\u540D\u79F0")),e.createElement(S.Z,{value:l,onChange:function(c){a.setState({projectName:c})}})),e.createElement("div",{className:"formItem"},e.createElement("div",{className:"Font14 Bold mBottom5"},_l("\u804C\u4F4D")),e.createElement(S.Z,{value:o,onChange:function(c){a.setState({job:c})}})),e.createElement("div",{className:"formItem"},e.createElement("div",{className:"Font14 Bold mBottom5"},_l("\u9884\u8BA1\u4F7F\u7528\u4EBA\u6570")),e.createElement(Z.Z,{data:I,value:p,border:!0,onChange:function(c){return a.setState({scaleId:c})}})),g&&e.createElement("div",{className:"formItem"},e.createElement("div",{className:"Font14 Bold mBottom10"},_l("\u7248\u672C")),e.createElement(T.ZP,{radioItemClassName:"mBottom10",checkedValue:d,data:[{text:_l("\u793E\u533A\u7248"),value:0},{text:_l("\u4E13\u4E1A\u7248\u8BD5\u7528\uFF08\u6709\u6548\u671F30\u5929\uFF0C\u6BCF\u4E2A\u670D\u52A1\u5668ID\u53EF\u7533\u8BF71\u6B21\uFF09"),value:5}],vertical:!0,onChange:function(c){a.setState({licenseVersion:c})}})),e.createElement(b.ZP,{className:"generateKey",type:"primary",size:"large",onClick:this.handleGenerateKey},_l("\u751F\u6210\u5BC6\u94A5")),e.createElement("div",{className:"mTop16 Gray_75"},_l("\u70B9\u51FB\u751F\u6210\u5373\u4EE3\u8868\u60A8\u540C\u610F"),e.createElement("a",{href:"https://docs.pd.mingdao.com/agreement",target:"_blank"},_l("\u300A\u4F7F\u7528\u534F\u8BAE\u300B")))))}}]),t}(e.Component),M=r(30381),B=r.n(M),H=[_l("\u793E\u533A\u7248"),_l("\u6807\u51C6\u7248"),_l("\u4E13\u4E1A\u7248"),_l("\u5927\u578B\u4E13\u4E1A\u7248"),_l("\u6559\u5B66\u7248"),_l("\u4E13\u4E1A\u7248\u8BD5\u7528")],j=function(t){var n=B()(t).format("YYYY");return n==9999?_l("\u6C38\u4E45"):B()(t).format("YYYY\u5E74MM\u6708DD\u65E5")},z=function(s){(0,A.default)(t,s);function t(n){(0,N.default)(this,t);var a=(0,G.default)(this,(t.__proto__||P()(t)).call(this));a.getLicenseList=function(l){x.getLicenseList().then(function(o){a.setState({licenseList:o},l)})},a.handleSetVisible=function(l,o){var p=a.state.licenseList;a.setState({licenseList:p.map(function(f,d){return d===o&&(f.visible=!l),f})})},a.handleCloseApply=function(l,o){location.hash="",a.getLicenseList(function(){o&&a.handleSetVisible(!1,0)}),a.setState({isApply:!1})};var i=location,m=i.hash;return a.state={isApply:m==="#apply",licenseList:[]},a}return(0,C.default)(t,[{key:"componentDidMount",value:function(){this.state.isApply||this.getLicenseList()}},{key:"renderLicenseItem",value:function(a,i){var m=this,l=a.serverId,o=a.licenseCode,p=a.startDate,f=a.expirationDate,d=a.licenseVersion,u=a.visible;return e.createElement(e.Fragment,{key:i},e.createElement("div",{className:"flexRow companyItem Hand",onClick:function(){m.handleSetVisible(u,i)}},e.createElement("div",{className:"flex flexRow valignWrapper"},e.createElement(h.Z,{icon:u?"expand_more":"navigate_next",className:"Gray_9e Font18 pointer"}),e.createElement("span",{className:"mLeft5 serverId"},l)),e.createElement("div",{className:"flex flexRow valignWrapper"},H[d]),e.createElement("div",{className:"flex flexRow valignWrapper"},j(p)),e.createElement("div",{className:"flex flexRow valignWrapper"},j(f))),u&&e.createElement("div",{className:"flexRow valignWrapper companyPrivateKeyItem"},e.createElement("div",{className:"flex flexRow w100"},e.createElement("div",{className:"Gray_75 mBottom5 mRight5"},_l("\u4EA7\u54C1\u5BC6\u94A5")),e.createElement("div",{className:"flex Relative"},e.createElement(F.Z,{minHeight:90,readOnly:!0,defaultValue:o}),e.createElement(V.Z,{text:e.createElement("span",null,_l("\u590D\u5236")),popupPlacement:"bottom"},e.createElement("div",{className:"copyWrapper"},e.createElement(W(),{component:"div","data-clipboard-text":o,onSuccess:function(){alert(_l("\u590D\u5236\u6210\u529F"))}},e.createElement(h.Z,{icon:"content-copy",className:"pointer Gray_75 Font16"}))))))))}},{key:"renderContent",value:function(){var a=this,i=this.state.licenseList,m=(0,y.A_)();return e.createElement(e.Fragment,null,e.createElement("div",{className:"personalEntrypointHeader flexRow"},e.createElement("div",{className:"Bold Font18"},_l("\u4EA7\u54C1\u5BC6\u94A5")),e.createElement("div",{className:"flexRow valignWrapper"},m.serverId?e.createElement("div",{className:"applyPrivateKey pointer",onClick:function(){a.setState({isApply:!0})}},_l("\u7533\u8BF7\u5BC6\u94A5")):null)),e.createElement("div",{className:"personalEntrypointContent"},e.createElement("div",{className:"flexRow titleWrapper"},e.createElement("div",{className:"Bold"},_l("\u670D\u52A1\u5668ID")),e.createElement("div",{className:"Bold"},_l("\u7248\u672C")),e.createElement("div",{className:"Bold"},_l("\u5F00\u59CB\u65F6\u95F4")),e.createElement("div",{className:"Bold"},_l("\u5230\u671F\u65F6\u95F4"))),i.length?e.createElement(e.Fragment,null,i.map(function(l,o){return a.renderLicenseItem(l,o)})):e.createElement("div",{className:"withoutList flexColumn valignWrapper"},e.createElement("div",{className:"iconWrapper flexRow valignWrapper"},e.createElement(h.Z,{className:"Font40",icon:"Empty_nokey"})),e.createElement("div",{className:"Gray_75"},_l("\u6682\u65E0\u5BC6\u94A5")))))}},{key:"render",value:function(){var a=this.state.isApply;return e.createElement("div",{className:"card personalEntrypointWrapper"},a?e.createElement(K,{onClose:this.handleCloseApply}):this.renderContent())}}]),t}(e.Component)}}]);
