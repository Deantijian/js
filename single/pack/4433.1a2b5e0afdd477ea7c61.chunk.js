(self.webpackChunkmingdao_web=self.webpackChunkmingdao_web||[]).push([[4433],{84433:(I,D,w)=>{"use strict";w.r(D),w.d(D,{CityLayer:()=>$e,CountryLayer:()=>Ke,CountyLayer:()=>Ht,DRILL_TYPE_LIST:()=>We,DataConfig:()=>N,DrillDownLayer:()=>rr,ProvinceLayer:()=>oe,RegionLayer:()=>Je,RegionList:()=>fe,WorldLayer:()=>br,getDataConfig:()=>T,getRegionByAdcode:()=>gr,setDataConfig:()=>A,setDataLevel:()=>B});var S=w(82492),k=w.n(S),O=2,R={world:{fill:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/ad26cd25-96ea-40fd-935d-7e21a5c08893.bin"},line:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/62f61f5f-cca7-4137-845d-13c8f9969664.bin"},label:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/90c51eb3-04d7-402f-bd05-95e4bd27dd62.bin",parser:{type:"geojson"}},nationalBoundaries:{type:"json",url:"https://gw.alipayobjects.com/os/bmw-prod/ee493a41-0558-4c0e-bee6-520276c4f1a8.json"}},country:{CHN:{1:{fill:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/71ac4de3-bb14-449d-a97d-2b98e25ec8df.bin"},line:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/70ec087e-c48a-4b76-8825-6452f17bae7a.bin"},provinceLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/0024caaf-86b2-4e75-a3d1-6d2146490b67.bin"},label:{type:"json",url:"https://gw.alipayobjects.com/os/bmw-prod/36832a45-68f8-4b51-b006-9dec71f92a23.json"}},2:{fill:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/522c6496-c711-4581-88db-c3741cd39abd.bin"},line:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/f6a4e2b1-359b-43a6-921c-39d2088d1dab.bin"},cityLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/f6a4e2b1-359b-43a6-921c-39d2088d1dab.bin"},provinceLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/0024caaf-86b2-4e75-a3d1-6d2146490b67.bin"}},3:{fill:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/524f7de2-7d69-4fa7-8da3-7ff42fa69ee4.bin"},countryLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/bc97875a-90f2-42c0-a62c-43d2efd7460d.bin"},cityLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/8bfbfe7e-bd0e-4bbe-84d8-629f4dc7abc4.bin"},provinceLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/778ad7ba-5a3f-4ed6-a94a-b8ab8acae9d6.bin"}},nationalBoundaries:{type:"json",url:"https://gw.alipayobjects.com/os/bmw-prod/ee493a41-0558-4c0e-bee6-520276c4f1a8.json"},nationalBoundaries2:{type:"json",url:"https://gw.alipayobjects.com/os/bmw-prod/f2189cc4-662b-4358-8573-36f0f918b7ca.json"},island:{type:"json",url:"https://gw.alipayobjects.com/os/bmw-prod/fe49b393-1147-4769-94ed-70471f4ff15d.json"}}}},C={world:{fill:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/35bb8365-1926-471c-b357-db2c02ff3a81.bin"},line:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/8ec671c3-a4f9-4fdf-8e88-85d2ab1d8930.bin"},label:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/90c51eb3-04d7-402f-bd05-95e4bd27dd62.bin",parser:{type:"geojson"}},nationalBoundaries:{type:"json",url:"https://gw.alipayobjects.com/os/bmw-prod/ee493a41-0558-4c0e-bee6-520276c4f1a8.json"}},country:{CHN:{1:{fill:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/380370e0-76aa-4240-8874-5732de77e71d.bin"},line:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/70ec087e-c48a-4b76-8825-6452f17bae7a.bin"},provinceLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/778ad7ba-5a3f-4ed6-a94a-b8ab8acae9d6.bin"},label:{type:"json",url:"https://gw.alipayobjects.com/os/bmw-prod/36832a45-68f8-4b51-b006-9dec71f92a23.json"}},2:{fill:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/feeb1f06-11c6-4495-84c9-f41ea6f77123.bin"},line:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/8bfbfe7e-bd0e-4bbe-84d8-629f4dc7abc4.bin"},cityLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/8bfbfe7e-bd0e-4bbe-84d8-629f4dc7abc4.bin"},provinceLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/778ad7ba-5a3f-4ed6-a94a-b8ab8acae9d6.bin"}},3:{fill:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/24a9ee83-2be1-4fc1-b187-769ac939269d.bin"},line:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/bc97875a-90f2-42c0-a62c-43d2efd7460d.bin"},countryLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/bc97875a-90f2-42c0-a62c-43d2efd7460d.bin"},cityLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/8bfbfe7e-bd0e-4bbe-84d8-629f4dc7abc4.bin"},provinceLine:{type:"pbf",url:"https://gw.alipayobjects.com/os/bmw-prod/778ad7ba-5a3f-4ed6-a94a-b8ab8acae9d6.bin"}},nationalBoundaries:{type:"json",url:"https://gw.alipayobjects.com/os/bmw-prod/ee493a41-0558-4c0e-bee6-520276c4f1a8.json"},nationalBoundaries2:{type:"json",url:"https://gw.alipayobjects.com/os/bmw-prod/f2189cc4-662b-4358-8573-36f0f918b7ca.json"},island:{type:"json",url:"https://gw.alipayobjects.com/os/bmw-prod/fe49b393-1147-4769-94ed-70471f4ff15d.json"}}},province:{11e4:""}},_={1:C,2:R};function A(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:O;k()(_[t],r)}function T(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:O;return _[r]}function B(r){O=r}var N=_[O],E=w(84059),re=w(26729),X=w(74951),W=w(13218),V=w.n(W),ne=w(30236),$=w.n(ne),K=w(3614),Z=w.n(K),ie=w(95022),y=w.n(ie);function v(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?v=function(e){return typeof e}:v=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(r)}function l(r,t,e,n,i,o,a){try{var s=r[o](a),u=s.value}catch(c){e(c);return}s.done?t(u):Promise.resolve(u).then(n,i)}function f(r){return function(){var t=this,e=arguments;return new Promise(function(n,i){var o=r.apply(t,e);function a(u){l(o,n,i,a,s,"next",u)}function s(u){l(o,n,i,a,s,"throw",u)}a(void 0)})}}function h(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function b(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?h(Object(e),!0).forEach(function(n){L(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):h(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function L(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function x(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function z(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function ae(r,t,e){return t&&z(r.prototype,t),e&&z(r,e),r}function J(){return typeof Reflect<"u"&&Reflect.get?J=Reflect.get:J=function(t,e,n){var i=it(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},J.apply(this,arguments)}function it(r,t){for(;!Object.prototype.hasOwnProperty.call(r,t)&&(r=U(r),r!==null););return r}function ot(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&Oe(r,t)}function Oe(r,t){return Oe=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Oe(r,t)}function at(r){var t=ut();return function(){var n=U(r),i;if(t){var o=U(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return lt(this,i)}}function lt(r,t){if(t&&(v(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return st(r)}function st(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ut(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function U(r){return U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},U(r)}var Ae=["loaded"];function Be(r,t){if(Array.isArray(t))return t}var Pe=function(r){ot(e,r);var t=at(e);function e(n){var i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return x(this,e),i=t.call(this),i.fillLayer=void 0,i.lineLayer=void 0,i.labelLayer=void 0,i.bubbleLayer=void 0,i.loaded=!1,i.scene=void 0,i.options=void 0,i.layers=[],i.fillData=void 0,i.layerType=void 0,i.popup=void 0,i.scene=n,i.options=$()(i.getDefaultOption(),o,Be),B(i.options.geoDataLevel),i}return ae(e,[{key:"destroy",value:function(){var i=this;this.layers.forEach(function(o){return i.scene.removeLayer(o)}),this.layers.length=0}},{key:"show",value:function(){this.layers.forEach(function(i){return i.show()})}},{key:"hide",value:function(){this.layers.forEach(function(i){return i.hide()})}},{key:"setOption",value:function(i){this.options=$()(this.options,i,Be)}},{key:"getFillData",value:function(){return this.fillData}},{key:"getOptions",value:function(){return this.options}},{key:"getLayer",value:function(i){return this[i+"Layer"]}},{key:"on",value:function(i,o){var a=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"fill";return Ae.indexOf(i)!==-1?J(U(e.prototype),"on",this).call(this,i,o):this.loaded&&this.getLayer(s)?this.getLayer(s).on(i,o):J(U(e.prototype),"once",this).call(this,"loaded",function(){a.getLayer(s).on(i,o)}),this}},{key:"off",value:function(i,o){var a=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"fill";return Ae.indexOf(i)!==-1?J(U(e.prototype),"on",this).call(this,i,o):this.getLayer(s)&&(this.loaded&&this.getLayer(s)?this.getLayer(s).off(i,o):J(U(e.prototype),"once",this).call(this,"loaded",function(){a.getLayer(s).off(i,o)})),this}},{key:"updateData",value:function(i,o){var a;this.setOption({data:i,joinBy:o});var s=this.options,u=s.data,c=u===void 0?[]:u,p=s.joinBy;if(this.fillLayer.setData(this.fillData,{transforms:c.length===0?[]:[{type:"join",sourceField:p[1],targetField:p[0],data:c}]}),this.options.bubble&&((a=this.options.bubble)===null||a===void 0?void 0:a.enable)!==!1){var d={};c.forEach(function(g){d[g[p[1]]]=g});var m=this.fillData.features.map(function(g){return b(b({},g.properties),{},{center:[g.properties.x,g.properties.y]})}).filter(function(g){return d[g[p[0]]]});this.bubbleLayer.setData(m,{transforms:c.length===0?[]:[{type:"join",sourceField:p[1],targetField:p[0],data:c}]})}}},{key:"fetchData",value:function(){var n=f(regeneratorRuntime.mark(function o(a){var s,u;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(a.type!=="pbf"){p.next=11;break}return p.next=3,fetch(a.url);case 3:return p.next=5,p.sent.arrayBuffer();case 5:return s=p.sent,u=X.decode(new(Z())(s)),this.options.simplifyTolerance!==!1&&(u=y()(u,this.options.simplifyTolerance||.8)),p.abrupt("return",u);case 11:if(!V()(a.url)){p.next=15;break}p.t0=a.url,p.next=18;break;case 15:return p.next=17,fetch(a.url);case 17:p.t0=p.sent.json();case 18:return p.abrupt("return",p.t0);case 19:case"end":return p.stop()}},o,this)}));function i(o){return n.apply(this,arguments)}return i}()},{key:"getDefaultOption",value:function(){return{zIndex:0,visible:!0,viewType:"normal",enablePropagation:!0,geoDataLevel:2,regionType:"province",depth:1,adcode:[],joinBy:["name","name"],simplifyTolerance:!1,label:{enable:!0,color:"#000",field:"name",size:10,stroke:"#fff",strokeWidth:2,textAllowOverlap:!0,opacity:1,textOffset:[0,0],padding:[5,5]},bubble:{enable:!1,shape:"circle",color:"#1AA9FF",size:15,style:{opacity:1,stroke:"#fff",strokeWidth:1}},fill:{scale:null,color:"#ddd",style:{opacity:1},activeColor:!1},autoFit:!0,showBorder:!0,strokeOpacity:1,stroke:"#bdbdbd",strokeVisible:!0,strokeWidth:.6,cityStroke:"#636363",cityStrokeWidth:.6,countyStrokeWidth:.6,provinceStrokeWidth:.6,provinceStroke:"#f0f0f0",provinceStrokeVisible:!0,countyStroke:"#525252",coastlineStroke:"#4190da",coastlineWidth:.6,nationalStroke:"#c994c7",nationalWidth:.5,chinaNationalStroke:"gray",chinaNationalWidth:1,popup:{enable:!0,openTriggerEvent:"mousemove",closeTriggerEvent:"mouseout",option:{},Html:function(o){return"".concat(o.name)}}}}},{key:"addFillLayer",value:function(i){var o=this,a,s=this.options,u=s.popup,c=s.data,p=c===void 0?[]:c,d=s.fill,m=s.autoFit,g=s.joinBy,M=s.visible,j=s.enablePropagation,F=s.zIndex;this.fillData=i;var P=new E.PolygonLayer({autoFit:m,visible:M,enablePropagation:j,zIndex:F}).source(i,{transforms:p.length===0?[]:[{type:"join",sourceField:g[1],targetField:g[0],data:p}]});if(this.setLayerAttribute(P,"color",d.color),this.setLayerAttribute(P,"filter",d.filter),d.scale&&V()(d.color)){var G;P.scale("color",{type:d.scale,field:d==null||(G=d.color)===null||G===void 0?void 0:G.field})}if(P.shape("fill").style(d.style),d.activeColor&&P.active({color:d.activeColor}),this.fillLayer=P,this.layers.push(P),this.scene.addLayer(P),this.options.onClick&&this.fillLayer.on("click",function(Y){o.options&&o.options.onClick&&o.options.onClick(Y,o.layerType)}),this.options.bubble&&((a=this.options.bubble)===null||a===void 0?void 0:a.enable)!==!1){var xe=i.features.map(function(Y){return b(b({},Y.properties),{},{center:[Y.properties.x,Y.properties.y]})});this.addBubbleLayer(xe)}this.addPopup()}},{key:"updateLayerAttribute",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"fill",o=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,s=this.getLayer(i);this.setLayerAttribute(s,o,a)}},{key:"enablePopup",value:function(){this.setOption({popup:b(b({},this.options.popup),{},{enable:!0})})}},{key:"disablePopup",value:function(){this.setOption({popup:b(b({},this.options.popup),{},{enable:!1})})}},{key:"addFillLine",value:function(i){var o=this.options,a=o.stroke,s=o.strokeWidth,u=o.zIndex,c=o.visible,p=o.strokeOpacity,d=new E.LineLayer({zIndex:u+.1,visible:c}).source(i).color(a).size(s).style({opacity:p});this.scene.addLayer(d),this.layers.push(d),this.lineLayer=d}},{key:"addLabelLayer",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"json",a=this.addLabel(i,o);this.scene.addLayer(a),this.layers.push(a),this.labelLayer=a}},{key:"addBubbleLayer",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"json",a=this.options,s=a.bubble,u=a.zIndex,c=a.data,p=c===void 0?[]:c,d=a.joinBy,m=a.visible,g=new E.PointLayer({zIndex:u+.3,visible:m}).source(i,{parser:{type:o,coordinates:"center"},transforms:p.length===0?[]:[{type:"join",sourceField:d[1],targetField:d[0],data:p}]});return this.setLayerAttribute(g,"color",s.color),this.setLayerAttribute(g,"size",s.size),this.setLayerAttribute(g,"shape",s.shape),this.setLayerAttribute(g,"filter",s.filter),s.scale&&g.scale(s.scale.field,{type:s.scale.type}),g.style(s.style),this.scene.addLayer(g),this.layers.push(g),this.bubbleLayer=g,g}},{key:"addLabel",value:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"json",a=this.options,s=a.label,u=a.zIndex,c=a.visible,p=new E.PointLayer({zIndex:u+5,visible:c}).source(i,{parser:{type:o,coordinates:"center"}}).shape(s.field,"text").style(s);return this.setLayerAttribute(p,"color",s.color),this.setLayerAttribute(p,"size",s.size),this.setLayerAttribute(p,"filter",s.filter),p}},{key:"addPopup",value:function(){var i=this,o=this.options.popup,a;o.triggerLayer?a=o.triggerLayer==="bubble"?this.bubbleLayer:this.fillLayer:a=this.options.bubble.enable?this.bubbleLayer:this.fillLayer,a.on(o.openTriggerEvent,function(s){if(o.enable){var u=o.Html?o.Html(s.feature.properties?s.feature.properties:s.feature):"";i.popup=new E.Popup(b({closeButton:!1},o.option)).setLnglat(s.lngLat).setHTML(u),i.scene.addPopup(i.popup)}}),a.on(o.closeTriggerEvent,function(s){i.popup&&i.popup.remove()})}},{key:"setLayerAttribute",value:function(i,o,a){a&&(V()(a)?i[o](a.field,a.values):i[o](a))}}]),e}(re.EventEmitter);function le(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?le=function(e){return typeof e}:le=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(r)}function ze(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function Ie(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?ze(Object(e),!0).forEach(function(n){ct(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ze(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function ct(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Me(r,t,e,n,i,o,a){try{var s=r[o](a),u=s.value}catch(c){e(c);return}s.done?t(u):Promise.resolve(u).then(n,i)}function ft(r){return function(){var t=this,e=arguments;return new Promise(function(n,i){var o=r.apply(t,e);function a(u){Me(o,n,i,a,s,"next",u)}function s(u){Me(o,n,i,a,s,"throw",u)}a(void 0)})}}function pt(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Ne(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function yt(r,t,e){return t&&Ne(r.prototype,t),e&&Ne(r,e),r}function se(){return typeof Reflect<"u"&&Reflect.get?se=Reflect.get:se=function(t,e,n){var i=dt(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},se.apply(this,arguments)}function dt(r,t){for(;!Object.prototype.hasOwnProperty.call(r,t)&&(r=q(r),r!==null););return r}function ht(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&De(r,t)}function De(r,t){return De=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},De(r,t)}function vt(r){var t=wt();return function(){var n=q(r),i;if(t){var o=q(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return bt(this,i)}}function bt(r,t){if(t&&(le(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gt(r)}function gt(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function wt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function q(r){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},q(r)}var oe=function(r){ht(e,r);var t=vt(e);function e(n){var i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return pt(this,e),i=t.call(this,n,o),i.fillRawData=void 0,i.lineRawData=void 0,i.labelRawData=void 0,i.layerType="Province",i.addProvinceFillLayer(),i}return yt(e,[{key:"updateDistrict",value:function(i,o,a){if(!i&&Array.isArray(i)&&i.length===0){this.hide();return}var s=this.options,u=s.label,c=s.showBorder;this.setOption({adcode:i});var p=this.filterData(this.fillRawData,i),d=this.filterData(this.lineRawData,i),m=this.filterLabelData(this.labelRawData,i);this.fillData=p,this.updateData(o,a),c&&this.lineLayer.setData(d),u.enable&&this.labelLayer&&this.labelLayer.setData(m),this.show()}},{key:"getDefaultOption",value:function(){var i=se(q(e.prototype),"getDefaultOption",this).call(this);return k()({},i,{adcode:["110000"],depth:2,label:{field:"NAME_CHN",textAllowOverlap:!1},popup:{enable:!0,Html:function(a){return"<span>".concat(a.NAME_CHN,"</span>")}}})}},{key:"filterData",value:function(i,o){var a=Array.isArray(o)?o:[o],s=i.features.filter(function(u){var c=u.properties,p=c.adcode_pro,d=c.adcode;return a.indexOf(p)!==-1||a.indexOf(d)!==-1||a.indexOf(""+p)!==-1||a.indexOf(""+d)!==-1});return{type:"FeatureCollection",features:s}}},{key:"filterLabelData",value:function(i,o){var a=Array.isArray(o)?o:[o],s=i.filter(function(u){var c=u.adcode_pro,p=u.adcode;return a.indexOf(c)!==-1||a.indexOf(p)!==-1||a.indexOf(""+c)!==-1||a.indexOf(""+p)!==-1});return s}},{key:"addProvinceFillLayer",value:function(){var n=ft(regeneratorRuntime.mark(function o(){var a,s,u,c,p,d,m,g,M;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return a=this.options,s=a.depth,u=a.adcode,c=a.label,p=a.showBorder,d=T(this.options.geoDataLevel).country.CHN[s],F.next=4,this.fetchData(d.fill);case 4:m=F.sent,this.labelRawData=m.features.map(function(P){return Ie(Ie({},P.properties),{},{center:[P.properties.x,P.properties.y]})}),g=this.filterData(m,u),this.fillData=g,M=this.filterLabelData(this.labelRawData,u),this.fillRawData=m,this.addFillLayer(g),c.enable&&this.addLabelLayer(M),this.lineRawData=m,p&&this.addFillLine(g),this.emit("loaded"),this.loaded=!0;case 16:case"end":return F.stop()}},o,this)}));function i(){return n.apply(this,arguments)}return i}()}]),e}(Pe);function ue(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ue=function(e){return typeof e}:ue=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(r)}function mt(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Ve(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Lt(r,t,e){return t&&Ve(r.prototype,t),e&&Ve(r,e),r}function ce(){return typeof Reflect<"u"&&Reflect.get?ce=Reflect.get:ce=function(t,e,n){var i=Ot(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},ce.apply(this,arguments)}function Ot(r,t){for(;!Object.prototype.hasOwnProperty.call(r,t)&&(r=ee(r),r!==null););return r}function Pt(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&_e(r,t)}function _e(r,t){return _e=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},_e(r,t)}function Dt(r){var t=kt();return function(){var n=ee(r),i;if(t){var o=ee(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return _t(this,i)}}function _t(r,t){if(t&&(ue(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return St(r)}function St(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function kt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function ee(r){return ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ee(r)}var $e=function(r){Pt(e,r);var t=Dt(e);function e(){var n;mt(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=t.call.apply(t,[this].concat(o)),n.layerType="City",n}return Lt(e,[{key:"getDefaultOption",value:function(){var i=ce(ee(e.prototype),"getDefaultOption",this).call(this);return k()({},i,{adcode:["110000"],depth:3})}},{key:"filterData",value:function(i,o){var a=Array.isArray(o)?o:[o],s=i.features.filter(function(u){var c=u.properties,p=c.adcode_cit,d=c.adcode;return a.indexOf(p)!==-1||a.indexOf(""+p)!==-1||a.indexOf(d)!==-1||a.indexOf(""+d)!==-1});return{type:"FeatureCollection",features:s}}},{key:"filterLabelData",value:function(i,o){var a=Array.isArray(o)?o:[o],s=i.filter(function(u){var c=u.adcode_cit,p=u.adcode;return a.indexOf(c)!==-1||a.indexOf(""+c)!==-1||a.indexOf(p)!==-1||a.indexOf(""+p)!==-1});return s}}]),e}(oe),We=["Country","Region","Province","City","County"],fe={100:{name:"\u534E\u5317\u533A",code:"100",child:[11e4,12e4,13e4,15e4,21e4,22e4,23e4,37e4],center:[118.740234375,42.87596410238256]},101:{name:"\u534E\u4E1C\u533A",code:"101",child:[32e4,34e4,31e4],center:[118.564453125,31.765537409484374]},102:{name:"\u534E\u5357\u533A",code:"102",child:[44e4,45e4,46e4],center:[110.709228515625,22.238259929564308]},103:{name:"\u534E\u897F\u533A",code:"103",child:[5e5,51e4,52e4,53e4],center:[90.263671875,36.73888412439431]},104:{name:"\u534E\u4E2D\u533A",code:"104",child:[33e4,35e4,36e4,42e4,43e4],center:[118.05908203124999,28.38173504322308]},301:{name:"\u4E2D\u897F\u533A",code:"301",child:[14e4,41e4,54e4,61e4,62e4,63e4,64e4,65e4],center:[109.1162109375,35.209721645221386]},701:{name:"\u6E2F\u6FB3\u53F0",code:"701",child:[71e4,81e4,82e4]}};function pe(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?pe=function(e){return typeof e}:pe=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(r)}function Ue(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function Rt(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Ue(Object(e),!0).forEach(function(n){jt(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Ue(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function jt(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function He(r,t,e,n,i,o,a){try{var s=r[o](a),u=s.value}catch(c){e(c);return}s.done?t(u):Promise.resolve(u).then(n,i)}function H(r){return function(){var t=this,e=arguments;return new Promise(function(n,i){var o=r.apply(t,e);function a(u){He(o,n,i,a,s,"next",u)}function s(u){He(o,n,i,a,s,"throw",u)}a(void 0)})}}function xt(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Ge(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Et(r,t,e){return t&&Ge(r.prototype,t),e&&Ge(r,e),r}function Ct(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&Se(r,t)}function Se(r,t){return Se=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Se(r,t)}function Tt(r){var t=Bt();return function(){var n=ye(r),i;if(t){var o=ye(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return Ft(this,i)}}function Ft(r,t){if(t&&(pe(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return At(r)}function At(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Bt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function ye(r){return ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ye(r)}var Ke=function(r){Ct(e,r);var t=Tt(e);function e(n){var i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return xt(this,e),i=t.call(this,n,o),i.layerType="Country",i.fillRawData=void 0,i.init(),i}return Et(e,[{key:"init",value:function(){var n=H(regeneratorRuntime.mark(function o(){var a,s,u,c;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return a=this.options,s=a.depth,u=a.showBorder,d.next=3,this.addProvinceFill();case 3:return d.next=5,this.addProvinceLabel();case 5:if(c=T(this.options.geoDataLevel).country.CHN[s],!u){d.next=15;break}return d.next=9,this.addProvinceLine(c.provinceLine);case 9:if(s!==2){d.next=12;break}return d.next=12,this.addCityBorder(c.fill);case 12:if(s!==3){d.next=15;break}return d.next=15,this.addCountyBorder(c.fill);case 15:this.emit("loaded"),this.loaded=!0;case 17:case"end":return d.stop()}},o,this)}));function i(){return n.apply(this,arguments)}return i}()},{key:"addProvinceFill",value:function(){var n=H(regeneratorRuntime.mark(function o(){var a,s,u,c,p,d;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return a=this.options,s=a.depth,u=a.adcode,c=T(this.options.geoDataLevel).country.CHN[s],g.next=4,this.fetchData(c.fill);case 4:p=g.sent,this.fillRawData=p,d=p,u&&Array.isArray(u)&&u.length!==0&&(d=this.filterData(p,u)),this.fillData=d,this.addFillLayer(d);case 10:case"end":return g.stop()}},o,this)}));function i(){return n.apply(this,arguments)}return i}()},{key:"addProvinceLabel",value:function(){var n=H(regeneratorRuntime.mark(function o(){var a,s,u,c,p;return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(s=this.options.depth,u=T(this.options.geoDataLevel).country.CHN[s],!u.label){m.next=8;break}return m.next=5,this.fetchData(u.label);case 5:m.t0=m.sent,m.next=9;break;case 8:m.t0=null;case 9:c=m.t0,c&&(!((a=this.options.label)===null||a===void 0)&&a.enable)&&(p=this.getOptions().viewType,p==="standard"?(this.addLabelLayer(c.filter(function(g){return g.name!=="\u6FB3\u95E8"})),this.addMCLabel()):this.addLabelLayer(c));case 11:case"end":return m.stop()}},o,this)}));function i(){return n.apply(this,arguments)}return i}()},{key:"addProvinceLine",value:function(){var n=H(regeneratorRuntime.mark(function o(a){var s,u,c,p,d,m,g;return regeneratorRuntime.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,this.fetchData(a);case 2:s=j.sent,u=s.features.filter(function(F){var P=F.properties.type;return P==="1"}),c=s.features.filter(function(F){var P=F.properties.type;return P==="4"}),p={type:"FeatureCollection",features:u},d={type:"FeatureCollection",features:c},m=s.features.filter(function(F){var P=F.properties.type;return P!=="1"&&P!=="4"}),g={type:"FeatureCollection",features:m},this.addNationBorder(g,p,d);case 10:case"end":return j.stop()}},o,this)}));function i(o){return n.apply(this,arguments)}return i}()},{key:"addNormalProvinceLine",value:function(){var n=H(regeneratorRuntime.mark(function o(a){return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:case"end":return u.stop()}},o)}));function i(o){return n.apply(this,arguments)}return i}()},{key:"addNationBorder",value:function(){var n=H(regeneratorRuntime.mark(function o(a,s,u){var c,p,d,m,g,M,j,F,P,G,xe,Y,me,Le,wr,Ee,Ce,Te;return regeneratorRuntime.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:c=this.options,p=c.nationalStroke,d=c.provinceStroke,m=c.provinceStrokeWidth,g=c.nationalWidth,M=c.chinaNationalStroke,j=c.chinaNationalWidth,F=c.coastlineStroke,P=c.coastlineWidth,G=c.showBorder,xe=c.stroke,Y=c.strokeWidth,me=c.visible,Le=c.zIndex,wr=c.strokeOpacity,Ee=new E.LineLayer({zIndex:Le+.1,visible:me&&G}).source(a).size("type",function(Q){return Q==="3"?m:Q==="2"?P:Q==="0"?j:"#fff"}).shape("line").color("type",function(Q){return Q==="3"?d:Q==="2"?F:Q==="0"?M:"#fff"}),Ce=new E.LineLayer({zIndex:Le+.1,visible:me&&G}).source(s).size(j).shape("line").color(M).style({lineType:"dash",dashArray:[2,2]}),Te=new E.LineLayer({zIndex:Le+.1,visible:me&&G}).source(u).size(m).shape("line").color(d).style({lineType:"dash",dashArray:[4,2,2,2]}),this.scene.addLayer(Ee),this.scene.addLayer(Ce),this.scene.addLayer(Te),this.layers.push(Ee,Ce,Te);case 8:case"end":return Fe.stop()}},o,this)}));function i(o,a,s){return n.apply(this,arguments)}return i}()},{key:"addCityBorder",value:function(){var n=H(regeneratorRuntime.mark(function o(a){var s,u,c,p,d,m,g;return regeneratorRuntime.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,this.fetchData(a);case 2:s=j.sent,u=this.options,c=u.cityStroke,p=u.cityStrokeWidth,d=u.visible,m=u.strokeOpacity,g=new E.LineLayer({zIndex:2,visible:d}).source(s).color(c).size(p).style({opacity:m}),this.scene.addLayer(g),this.layers.push(g);case 7:case"end":return j.stop()}},o,this)}));function i(o){return n.apply(this,arguments)}return i}()},{key:"addCountyBorder",value:function(){var n=H(regeneratorRuntime.mark(function o(a){var s,u,c,p,d,m,g;return regeneratorRuntime.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,this.fetchData(a);case 2:s=j.sent,u=this.options,c=u.countyStrokeWidth,p=u.countyStroke,d=u.visible,m=u.strokeOpacity,g=new E.LineLayer({zIndex:2,visible:d}).source(s).color(p).size(c).style({opacity:m}),this.scene.addLayer(g),this.layers.push(g);case 7:case"end":return j.stop()}},o,this)}));function i(o){return n.apply(this,arguments)}return i}()},{key:"addMCLabel",value:function(){var i=[{name:"\u6FB3\u95E8",center:[113.537747,22.187009]}],o=this.addText(i,{maxZoom:2.9},[-45,-10]),a=this.addText(i,{minZoom:3,maxZoom:4},[-35,-10]),s=this.addText(i,{minZoom:4.1},[0,0]);this.scene.addLayer(s),this.scene.addLayer(o),this.scene.addLayer(a),this.layers.push(s,o,a)}},{key:"filterData",value:function(i,o){var a=Array.isArray(o)?o:[o],s=i.features.filter(function(u){var c=u.properties,p=c.REGION_CODE,d=c.adcode_pro;return a.indexOf("86")!==-1||a.indexOf(86)!==-1||a.indexOf(p)!==-1||a.indexOf(""+p)!==-1||a.indexOf(d)!==-1||a.indexOf(""+d)!==-1});return{type:"FeatureCollection",features:s}}},{key:"addText",value:function(i,o,a){var s=this.options,u=s.label,c=s.zIndex,p=s.visible,d=new E.PointLayer(Rt({zIndex:c+.4,visible:p},o)).source(i,{parser:{type:"json",coordinates:"center"}}).color(u.color).shape("name","text").size(u.size).style({opacity:u.opacity,stroke:u.stroke,strokeWidth:u.strokeWidth,textAllowOverlap:u.textAllowOverlap,textOffset:a});return d}},{key:"addRegionLabel",value:function(){var i=Object.values(fe).map(function(o){return o})}}]),e}(Pe);function de(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?de=function(e){return typeof e}:de=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(r)}function zt(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Ze(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function It(r,t,e){return t&&Ze(r.prototype,t),e&&Ze(r,e),r}function he(){return typeof Reflect<"u"&&Reflect.get?he=Reflect.get:he=function(t,e,n){var i=Mt(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},he.apply(this,arguments)}function Mt(r,t){for(;!Object.prototype.hasOwnProperty.call(r,t)&&(r=te(r),r!==null););return r}function Nt(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&ke(r,t)}function ke(r,t){return ke=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},ke(r,t)}function Vt(r){var t=Ut();return function(){var n=te(r),i;if(t){var o=te(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return $t(this,i)}}function $t(r,t){if(t&&(de(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wt(r)}function Wt(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Ut(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function te(r){return te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},te(r)}var Ht=function(r){Nt(e,r);var t=Vt(e);function e(){var n;zt(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=t.call.apply(t,[this].concat(o)),n.layerType="County",n}return It(e,[{key:"getDefaultOption",value:function(){var i=he(te(e.prototype),"getDefaultOption",this).call(this);return k()({},i,{adcode:["110100"],depth:3})}},{key:"filterData",value:function(i,o){var a=Array.isArray(o)?o:[o],s=i.features.filter(function(u){var c=u.properties.adcode;return a.indexOf(c)!==-1||a.indexOf(""+c)!==-1});return{type:"FeatureCollection",features:s}}},{key:"filterLabelData",value:function(i,o){var a=Array.isArray(o)?o:[o],s=i.filter(function(u){var c=u.adcode;return a.indexOf(c)!==-1||a.indexOf(""+c)!==-1});return s}}]),e}(oe);function ve(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ve=function(e){return typeof e}:ve=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(r)}function Gt(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Kt(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&Re(r,t)}function Re(r,t){return Re=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Re(r,t)}function Zt(r){var t=Qt();return function(){var n=be(r),i;if(t){var o=be(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return Jt(this,i)}}function Jt(r,t){if(t&&(ve(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yt(r)}function Yt(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Qt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function be(r){return be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},be(r)}var Je=function(r){Kt(e,r);var t=Zt(e);function e(){var n;Gt(this,e);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=t.call.apply(t,[this].concat(o)),n.layerType="Region",n}return e}(oe);function Ye(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function Qe(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Ye(Object(e),!0).forEach(function(n){Xt(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Ye(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function Xt(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function qt(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Xe(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function er(r,t,e){return t&&Xe(r.prototype,t),e&&Xe(r,e),r}function tr(r,t){if(Array.isArray(t))return t}var rr=function(){function r(t,e){qt(this,r),this.drillState=void 0,this.options=void 0,this.regionLayer=void 0,this.cityLayer=void 0,this.countyLayer=void 0,this.provinceLayer=void 0,this.scene=void 0,this.layers=[],this.drillList=void 0,this.options=$()(this.getDefaultOption(),e,tr),this.drillState=this.options.viewStart,this.scene=t,this.drillList=this.getViewList(),this.initLayers(t),this.initLayerEvent(),this.scene.setMapStatus({doubleClickZoom:!1})}return er(r,[{key:"getDefaultOption",value:function(){return{drillDepth:2,drillStart:1,customTrigger:!1,autoUpdateData:!0,regionDrill:!1,drillDownTriggerEvent:"click",drillUpTriggerEvent:"undblclick",provinceData:[],viewStart:"Country",viewEnd:"County",cityData:[],countyData:[],city:{adcode:[],depth:2},region:{adcode:[],depth:1},county:{adcode:[]}}}},{key:"addCountryEvent",value:function(){var e=this,n=this.options,i=n.drillDownTriggerEvent,o=n.drillDownEvent;this.provinceLayer.fillLayer.on(i,function(a){var s=a.feature.properties.adcode,u="Province";if(e.drillState="Province",e.options.regionDrill){var c=a.feature.properties.REGION_CODE;s=fe[c].child,e.drillState="Region",u="Region"}e.options.autoUpdateData&&e.drillDown(s),e.drillList.indexOf(u)!==-1&&(e.provinceLayer.hide(),o&&o(a.feature.properties,u,s))})}},{key:"addRegionEvent",value:function(){var e=this,n=this.options,i=n.drillDownTriggerEvent,o=n.drillUpTriggerEvent,a=n.drillUpEvent,s=n.drillDownEvent;this.regionLayer.fillLayer.on(o,function(u){e.drillUp("Country"),e.drillList.indexOf("Country")!==-1&&a&&a({from:"region",to:"country"})}),this.regionLayer.fillLayer.on(i,function(u){e.drillState="Province",e.options.autoUpdateData&&e.drillDown(u.feature.properties.adcode),e.drillList.indexOf("Province")!==-1&&(e.regionLayer.hide(),s&&s(u.feature.properties,"Province",u.feature.properties.adcode))})}},{key:"addProvinceEvent",value:function(){var e=this,n=this.options,i=n.drillDownTriggerEvent,o=n.drillUpTriggerEvent,a=n.drillUpEvent,s=n.drillDownEvent;this.cityLayer.fillLayer.on(o,function(){e.drillState="Province";var u=e.options.regionDrill?"Region":"Country";e.drillUp(u),e.drillList.indexOf(u)!==-1&&a&&a({to:u,from:"Province"})}),this.cityLayer.fillLayer.on(i,function(u){e.drillState="City",e.options.autoUpdateData&&e.drillDown(u.feature.properties.adcode),e.drillList.indexOf("City")!==-1&&s&&s(u.feature.properties,"City",u.feature.properties.adcode)})}},{key:"addCityEvent",value:function(){var e=this,n=this.options,i=n.drillDownTriggerEvent,o=n.drillUpTriggerEvent,a=n.drillUpEvent;this.countyLayer.fillLayer.on(o,function(){e.drillUp("Province"),e.drillList.indexOf("Province")!==-1&&a&&a({to:"Province",from:"city"})})}},{key:"show",value:function(){this.layers.forEach(function(e){return e.show()})}},{key:"hide",value:function(){this.layers.forEach(function(e){return e.hide()})}},{key:"destroy",value:function(){this.layers.forEach(function(e){return e.destroy()})}},{key:"showProvinceView",value:function(e,n,i){this.cityLayer.show(),this.cityLayer.updateDistrict(e,n,i),this.cityLayer.fillLayer.fitBounds(),this.options.regionDrill?this.regionLayer.hide():this.provinceLayer.hide(),this.drillState="Province"}},{key:"showCityView",value:function(e,n,i){this.countyLayer.show();var o="".concat(e);o.substr(0,4)==="5000"?o=[o.substr(0,2)+"0100",o.substr(0,2)+"0200"]:o.substr(2,2)==="00"&&o!=="810000"&&o!=="820000"&&(o=[o.substr(0,2)+"0100"]),this.countyLayer.updateDistrict(o,n,i),this.countyLayer.fillLayer.fitBounds(),this.cityLayer.hide(),this.drillState="City"}},{key:"showRegionView",value:function(e,n,i){this.regionLayer.show(),this.regionLayer.updateDistrict(e,n,i),this.regionLayer.fillLayer.fitBounds(),this.provinceLayer.hide(),this.drillState="Region"}},{key:"drillUp",value:function(e){if(this.drillList.indexOf(e)!==-1)switch(e){case"Province":this.cityLayer.show(),this.cityLayer.fillLayer.fitBounds(),this.countyLayer.hide(),this.drillState="Province";break;case"Country":this.provinceLayer.show(),this.provinceLayer.fillLayer.fitBounds(),this.options.regionDrill?this.regionLayer.hide():this.cityLayer.hide(),this.drillState="Country";break;case"Region":this.options.regionDrill&&(this.regionLayer.show(),this.regionLayer.fillLayer.fitBounds(),this.cityLayer.hide(),this.drillState="Region");break}}},{key:"drillDown",value:function(e,n,i){if(this.drillList.indexOf(this.drillState)!==-1)switch(this.drillState){case"Province":this.showProvinceView(e,n,i);break;case"Region":this.showRegionView(e,n,i);break;case"City":this.showCityView(e,n,i);break}}},{key:"updateData",value:function(e,n,i){switch(e){case"Country":case"province":this.provinceLayer.updateData(n,i);break;case"Region":case"region":this.regionLayer.updateData(n,i);break;case"Province":case"city":this.cityLayer.updateData(n,i);break;case"City":case"county":this.countyLayer.updateData(n,i)}}},{key:"getLayerOption",value:function(e){var n=this.options,i=n.joinBy,o=n.label,a=n.bubble,s=n.fill,u=n.popup,c=n.geoDataLevel,p=n.onClick,d=e.toLowerCase()+"Data";return Qe({data:this.options[d],joinBy:i,label:o,bubble:a,fill:s,popup:u,onClick:p,geoDataLevel:c},this.options[e.toLowerCase()])}},{key:"initLayers",value:function(e){var n=this.getViewList();n.indexOf("Country")!==-1&&(this.provinceLayer=new Ke(e,Qe({},this.getLayerOption("Province")))),n.indexOf("Region")!==-1&&(this.regionLayer=new Je(e,this.getLayerOption("Region"))),n.indexOf("Province")!==-1&&(this.cityLayer=new oe(e,this.getLayerOption("City"))),n.indexOf("City")!==-1&&(this.countyLayer=new $e(e,this.getLayerOption("County")))}},{key:"initLayerEvent",value:function(){var e=this,n=this.getViewList();this.options.customTrigger||(n.indexOf("Country")!==-1&&this.provinceLayer.on("loaded",function(){e.addCountryEvent(),e.options.viewStart!=="Country"&&e.provinceLayer.hide(),e.layers.push(e.provinceLayer)}),n.indexOf("Region")!==-1&&this.regionLayer.on("loaded",function(){e.addRegionEvent(),e.options.viewStart!=="Region"&&e.regionLayer.hide(),e.layers.push(e.regionLayer)}),n.indexOf("Province")!==-1&&this.cityLayer.on("loaded",function(){e.addProvinceEvent(),e.options.viewStart!=="Province"&&e.cityLayer.hide(),e.layers.push(e.cityLayer)}),n.indexOf("City")!==-1&&this.countyLayer.on("loaded",function(){e.addCityEvent(),e.options.viewStart!=="City"&&e.countyLayer.hide(),e.layers.push(e.countyLayer)}))}},{key:"getViewList",value:function(){var e=this.options,n=e.viewStart,i=e.viewEnd,o=We;!this.options.regionDrill&&o.indexOf("Region")!==-1&&o.splice(1,1);var a=o.indexOf(n),s=o.indexOf(i);if(a===-1||s===-1||s<a)throw new Error("\u4E0B\u94BB viewStart, viewEnd \u53C2\u6570\u9519\u8BEF");return o.slice(a,s+1)}},{key:"getProperties",value:function(e,n){var i=Array.isArray(n)?n:[n],o=e.features.filter(function(a){var s=a.properties.adcode;return i.indexOf(s)!==-1||i.indexOf(""+s)!==-1});return o[0]?o[0].properties:{}}},{key:"enablePopup",value:function(){this.cityLayer&&this.cityLayer.enablePopup(),this.countyLayer&&this.countyLayer.enablePopup(),this.provinceLayer&&this.provinceLayer.enablePopup(),this.regionLayer&&this.regionLayer.enablePopup()}},{key:"disablePopup",value:function(){this.cityLayer&&this.cityLayer.disablePopup(),this.countyLayer&&this.countyLayer.disablePopup(),this.provinceLayer&&this.provinceLayer.disablePopup(),this.regionLayer&&this.regionLayer.disablePopup()}}]),r}();function ge(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ge=function(e){return typeof e}:ge=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(r)}function qe(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,n)}return e}function et(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?qe(Object(e),!0).forEach(function(n){nr(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):qe(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function nr(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function tt(r,t,e,n,i,o,a){try{var s=r[o](a),u=s.value}catch(c){e(c);return}s.done?t(u):Promise.resolve(u).then(n,i)}function ir(r){return function(){var t=this,e=arguments;return new Promise(function(n,i){var o=r.apply(t,e);function a(u){tt(o,n,i,a,s,"next",u)}function s(u){tt(o,n,i,a,s,"throw",u)}a(void 0)})}}function or(r,t){return ur(r)||sr(r,t)||lr(r,t)||ar()}function ar(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lr(r,t){if(r){if(typeof r=="string")return rt(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return rt(r,t)}}function rt(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function sr(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n=[],i=!0,o=!1,a,s;try{for(e=e.call(r);!(i=(a=e.next()).done)&&(n.push(a.value),!(t&&n.length===t));i=!0);}catch(u){o=!0,s=u}finally{try{!i&&e.return!=null&&e.return()}finally{if(o)throw s}}return n}}function ur(r){if(Array.isArray(r))return r}function cr(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function fr(r,t,e){return t&&nt(r.prototype,t),e&&nt(r,e),r}function pr(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&je(r,t)}function je(r,t){return je=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},je(r,t)}function yr(r){var t=vr();return function(){var n=we(r),i;if(t){var o=we(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return dr(this,i)}}function dr(r,t){if(t&&(ge(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hr(r)}function hr(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function vr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function we(r){return we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},we(r)}var br=function(r){pr(e,r);var t=yr(e);function e(n){var i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return cr(this,e),i=t.call(this,n,o),i.loadData().then(function(a){var s,u=or(a,3),c=u[0],p=u[1],d=u[2];i.addFillLayer(c),i.options.showBorder&&i.addFillLine(p),!((s=i.options.label)===null||s===void 0)&&s.enable&&i.addLabelLayer(d,"json"),i.emit("loaded"),i.loaded=!0}),i}return fr(e,[{key:"addFillLine",value:function(i){var o=i.features.filter(function(c){return c.properties.type==="10"||c.properties.type==="1"||c.properties.type==="11"||c.properties.type==="8"}),a={type:"FeatureCollection",features:o},s=i.features.filter(function(c){return c.properties.type!=="10"&&c.properties.type!=="1"&&c.properties.type!=="11"&&c.properties.type!=="8"}),u={type:"FeatureCollection",features:s};this.addNationBorder(u,a)}},{key:"loadData",value:function(){var n=ir(regeneratorRuntime.mark(function o(){var a,s,u,c;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return a=T(this.options.geoDataLevel).world,d.next=3,this.fetchData(a.fill);case 3:return s=d.sent,d.next=6,this.fetchData(a.line);case 6:return u=d.sent,c=s.features.map(function(m){return et(et({},m.properties),{},{center:[m.properties.x,m.properties.y]})}),d.abrupt("return",[s,u,c]);case 9:case"end":return d.stop()}},o,this)}));function i(){return n.apply(this,arguments)}return i}()},{key:"addNationBorder",value:function(i,o){var a=this.options,s=a.nationalStroke,u=a.nationalWidth,c=a.coastlineStroke,p=a.chinaNationalStroke,d=a.chinaNationalWidth,m=a.coastlineWidth,g=a.visible,M=a.zIndex,j=new E.LineLayer({zIndex:M+.1,visible:g}).source(i).size("type",function(P){return P==="0"?d:P==="2"||P==="9"?m:u}).color("type",function(P){return P==="0"?p:P==="2"||P==="9"?c:s}),F=new E.LineLayer({zIndex:M+.1,visible:g}).source(o).size("type",function(P){return P==="1"?d:u}).shape("line").color("type",function(P){return P==="1"?p:s}).style({lineType:"dash",dashArray:[2,2]});this.scene.addLayer(j),this.scene.addLayer(F),this.layers.push(j,F)}}]),e}(Pe);function gr(r){var t=Object.values(fe).find(function(e){return e.child.indexOf(r)!==-1});return t}},81490:I=>{"use strict";I.exports=C;var D,w,S,k,O,R=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","GeometryCollection"];function C(y){k=2,O=Math.pow(10,6),S=null,D=[],w=[];var v=y.readFields(_,{});return D=null,v}function _(y,v,l){y===1?D.push(l.readString()):y===2?k=l.readVarint():y===3?O=Math.pow(10,l.readVarint()):y===4?A(l,v):y===5?T(l,v):y===6&&B(l,v)}function A(y,v){return v.type="FeatureCollection",v.features=[],y.readMessage(N,v)}function T(y,v){v.type="Feature";var l=y.readMessage(E,v);return"geometry"in l||(l.geometry=null),l}function B(y,v){return v.type="Point",y.readMessage(re,v)}function N(y,v,l){y===1?v.features.push(T(l,{})):y===13?w.push(W(l)):y===15&&V(l,v)}function E(y,v,l){y===1?v.geometry=B(l,{}):y===11?v.id=l.readString():y===12?v.id=l.readSVarint():y===13?w.push(W(l)):y===14?v.properties=V(l,{}):y===15&&V(l,v)}function re(y,v,l){y===1?v.type=R[l.readVarint()]:y===2?S=l.readPackedVarint():y===3?X(v,l,v.type):y===4?(v.geometries=v.geometries||[],v.geometries.push(B(l,{}))):y===13?w.push(W(l)):y===15&&V(l,v)}function X(y,v,l){l==="Point"?y.coordinates=ne(v):l==="MultiPoint"?y.coordinates=K(v,!0):l==="LineString"?y.coordinates=K(v):l==="MultiLineString"?y.coordinates=Z(v):l==="Polygon"?y.coordinates=Z(v,!0):l==="MultiPolygon"&&(y.coordinates=ie(v))}function W(y){for(var v=y.readVarint()+y.pos,l=null;y.pos<v;){var f=y.readVarint(),h=f>>3;h===1?l=y.readString():h===2?l=y.readDouble():h===3?l=y.readVarint():h===4?l=-y.readVarint():h===5?l=y.readBoolean():h===6&&(l=JSON.parse(y.readString()))}return l}function V(y,v){for(var l=y.readVarint()+y.pos;y.pos<l;)v[D[y.readVarint()]]=w[y.readVarint()];return w=[],v}function ne(y){for(var v=y.readVarint()+y.pos,l=[];y.pos<v;)l.push(y.readSVarint()/O);return l}function $(y,v,l,f){var h=0,b=[],L,x,z=[];for(x=0;x<k;x++)z[x]=0;for(;l?h<l:y.pos<v;){for(L=[],x=0;x<k;x++)z[x]+=y.readSVarint(),L[x]=z[x]/O;b.push(L),h++}return f&&b.push(b[0]),b}function K(y){return $(y,y.readVarint()+y.pos)}function Z(y,v){var l=y.readVarint()+y.pos;if(!S)return[$(y,l,null,v)];for(var f=[],h=0;h<S.length;h++)f.push($(y,l,S[h],v));return S=null,f}function ie(y){var v=y.readVarint()+y.pos;if(!S)return[[$(y,v,null,!0)]];for(var l=[],f=1,h=0;h<S[0];h++){for(var b=[],L=0;L<S[f];L++)b.push($(y,v,S[f+1+L],!0));f+=S[f]+1,l.push(b)}return S=null,l}},62020:I=>{"use strict";I.exports=_;var D,w,S,k,O,R=1e6,C={Point:0,MultiPoint:1,LineString:2,MultiLineString:3,Polygon:4,MultiPolygon:5,GeometryCollection:6};function _(l,f){D={},S=[],w=0,k=0,O=1,A(l),O=Math.min(O,R);for(var h=Math.ceil(Math.log(O)/Math.LN10),b=0;b<S.length;b++)f.writeStringField(1,S[b]);return k!==2&&f.writeVarintField(2,k),h!==6&&f.writeVarintField(3,h),l.type==="FeatureCollection"?f.writeMessage(4,re,l):l.type==="Feature"?f.writeMessage(5,X,l):f.writeMessage(6,W,l),D=null,f.finish()}function A(l){var f,h;if(l.type==="FeatureCollection")for(f=0;f<l.features.length;f++)A(l.features[f]);else if(l.type==="Feature"){l.geometry!==null&&A(l.geometry);for(h in l.properties)E(h)}else if(l.type==="Point")N(l.coordinates);else if(l.type==="MultiPoint")B(l.coordinates);else if(l.type==="GeometryCollection")for(f=0;f<l.geometries.length;f++)A(l.geometries[f]);else if(l.type==="LineString")B(l.coordinates);else if(l.type==="Polygon"||l.type==="MultiLineString")T(l.coordinates);else if(l.type==="MultiPolygon")for(f=0;f<l.coordinates.length;f++)T(l.coordinates[f]);for(h in l)v(h,l.type)||E(h)}function T(l){for(var f=0;f<l.length;f++)B(l[f])}function B(l){for(var f=0;f<l.length;f++)N(l[f])}function N(l){k=Math.max(k,l.length);for(var f=0;f<l.length;f++)for(;Math.round(l[f]*O)/O!==l[f]&&O<R;)O*=10}function E(l){D[l]===void 0&&(S.push(l),D[l]=w++)}function re(l,f){for(var h=0;h<l.features.length;h++)f.writeMessage(1,X,l.features[h]);V(l,f,!0)}function X(l,f){l.geometry!==null&&f.writeMessage(1,W,l.geometry),l.id!==void 0&&(typeof l.id=="number"&&l.id%1===0?f.writeSVarintField(12,l.id):f.writeStringField(11,l.id)),l.properties&&V(l.properties,f),V(l,f,!0)}function W(l,f){f.writeVarintField(1,C[l.type]);var h=l.coordinates;if(l.type==="Point")$(h,f);else if(l.type==="MultiPoint")K(h,f,!0);else if(l.type==="LineString")K(h,f);else if(l.type==="MultiLineString")Z(h,f);else if(l.type==="Polygon")Z(h,f,!0);else if(l.type==="MultiPolygon")ie(h,f);else if(l.type==="GeometryCollection")for(var b=0;b<l.geometries.length;b++)f.writeMessage(4,W,l.geometries[b]);V(l,f,!0)}function V(l,f,h){var b=[],L=0;for(var x in l)h&&v(x,l.type)||(f.writeMessage(13,ne,l[x]),b.push(D[x]),b.push(L++));f.writePackedVarint(h?15:14,b)}function ne(l,f){if(l!==null){var h=typeof l;h==="string"?f.writeStringField(1,l):h==="boolean"?f.writeBooleanField(5,l):h==="object"?f.writeStringField(6,JSON.stringify(l)):h==="number"&&(l%1!==0?f.writeDoubleField(2,l):l>=0?f.writeVarintField(3,l):f.writeVarintField(4,-l))}}function $(l,f){for(var h=[],b=0;b<k;b++)h.push(Math.round(l[b]*O));f.writePackedSVarint(3,h)}function K(l,f){var h=[];y(h,l),f.writePackedSVarint(3,h)}function Z(l,f,h){var b=l.length,L;if(b!==1){var x=[];for(L=0;L<b;L++)x.push(l[L].length-(h?1:0));f.writePackedVarint(2,x)}var z=[];for(L=0;L<b;L++)y(z,l[L],h);f.writePackedSVarint(3,z)}function ie(l,f){var h=l.length,b,L;if(h!==1||l[0].length!==1){var x=[h];for(b=0;b<h;b++)for(x.push(l[b].length),L=0;L<l[b].length;L++)x.push(l[b][L].length-1);f.writePackedVarint(2,x)}var z=[];for(b=0;b<h;b++)for(L=0;L<l[b].length;L++)y(z,l[b][L],!0);f.writePackedSVarint(3,z)}function y(l,f,h){var b,L,x=f.length-(h?1:0),z=new Array(k);for(L=0;L<k;L++)z[L]=0;for(b=0;b<x;b++)for(L=0;L<k;L++){var ae=Math.round(f[b][L]*O)-z[L];l.push(ae),z[L]+=ae}}function v(l,f){if(l==="type")return!0;if(f==="FeatureCollection"){if(l==="features")return!0}else if(f==="Feature"){if(l==="id"||l==="properties"||l==="geometry")return!0}else if(f==="GeometryCollection"){if(l==="geometries")return!0}else if(l==="coordinates")return!0;return!1}},74951:(I,D,w)=>{"use strict";D.encode=w(62020),D.decode=w(81490)},95022:(I,D,w)=>{var S=w(44878);I.exports=function(R,C,_){return _||(R=JSON.parse(JSON.stringify(R))),R.features?O(R,C):R.type&&R.type==="Feature"?k(R,C):new Error("FeatureCollection or individual Feature required")},I.exports.simplify=function(R,C){return S(R,C)};function k(R,C){var _=R.geometry,A=_.type;if(A==="LineString")_.coordinates=I.exports.simplify(_.coordinates,C);else if(A==="Polygon"||A==="MultiLineString")for(var T=0;T<_.coordinates.length;T++)_.coordinates[T]=I.exports.simplify(_.coordinates[T],C);else if(A==="MultiPolygon")for(var B=0;B<_.coordinates.length;B++)for(var N=0;N<_.coordinates[B].length;N++)_.coordinates[B][N]=I.exports.simplify(_.coordinates[B][N],C);return R}function O(R,C){for(var _=0;_<R.features.length;_++)R.features[_]=k(R.features[_],C);return R}},44878:(I,D,w)=>{var S=w(54301),k=function(O,R){for(var C=0,_=0,A=1;A<=O.length-2;A++){var T=new S(O[0],O[O.length-1]).perpendicularDistance(O[A]);T>C&&(_=A,C=T)}if(C>R)var B=k(O.slice(0,_),R),N=k(O.slice(_,O.length),R),E=B.concat(N);else O.length>1?E=[O[0],O[O.length-1]]:E=[O[0]];return E};I.exports=k},54301:I=>{var D=function(w,S){this.p1=w,this.p2=S};D.prototype.rise=function(){return this.p2[1]-this.p1[1]},D.prototype.run=function(){return this.p2[0]-this.p1[0]},D.prototype.slope=function(){return this.rise()/this.run()},D.prototype.yIntercept=function(){return this.p1[1]-this.p1[0]*this.slope(this.p1,this.p2)},D.prototype.isVertical=function(){return!isFinite(this.slope())},D.prototype.isHorizontal=function(){return this.p1[1]==this.p2[1]},D.prototype._perpendicularDistanceHorizontal=function(w){return Math.abs(this.p1[1]-w[1])},D.prototype._perpendicularDistanceVertical=function(w){return Math.abs(this.p1[0]-w[0])},D.prototype._perpendicularDistanceHasSlope=function(w){var S=this.slope(),k=this.yIntercept();return Math.abs(S*w[0]-w[1]+k)/Math.sqrt(Math.pow(S,2)+1)},D.prototype.perpendicularDistance=function(w){return this.isVertical()?this._perpendicularDistanceVertical(w):this.isHorizontal()?this._perpendicularDistanceHorizontal(w):this._perpendicularDistanceHasSlope(w)},I.exports=D}}]);
