(self.webpackChunkmingdao_web=self.webpackChunkmingdao_web||[]).push([[8416],{82066:()=>{"use strict"},94087:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>C});var h=t(52945),Te=t.n(h);const C={createQrCodeImage:function(Ne){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return j.ajaxOptions=Te()({},j.ajaxOptions,{type:"GET"}),mdyAPI("Code","CreateQrCodeImage",Ne,j)},createVerifyCodeImage:function(Ne){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return j.ajaxOptions=Te()({},j.ajaxOptions,{type:"GET"}),mdyAPI("Code","CreateVerifyCodeImage",Ne,j)},generateCodeBlock:function(Ne){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Code","GenerateCodeBlock",Ne,j)},getGenerateCodeRecord:function(Ne){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return j.ajaxOptions=Te()({},j.ajaxOptions,{type:"GET"}),mdyAPI("Code","GetGenerateCodeRecord",Ne,j)},saveGenerateCodeRecord:function(Ne){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Code","SaveGenerateCodeRecord",Ne,j)}}},6953:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>h});const h={getJobs:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Job","GetJobs",C,Ce)},addJob:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Job","AddJob",C,Ce)},editJobName:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Job","EditJobName",C,Ce)},deleteJobs:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Job","DeleteJobs",C,Ce)},importJobList:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Job","ImportJobList",C,Ce)},pagedJobAccounts:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Job","PagedJobAccounts",C,Ce)},addJobUser:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Job","AddJobUser",C,Ce)},deleteJobUser:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Job","DeleteJobUser",C,Ce)},deleteJobUsers:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Job","DeleteJobUsers",C,Ce)}}},23098:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>h});const h={mDAccountLogin:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Login","MDAccountLogin",C,Ce)},mDAccountAutoLogin:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Login","MDAccountAutoLogin",C,Ce)},mDTwofactorLogin:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Login","MDTwofactorLogin",C,Ce)},checkLogin:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Login","CheckLogin",C,Ce)},loginOut:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Login","LoginOut",C,Ce)},sendTwofactorVerifyCode:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Login","SendTwofactorVerifyCode",C,Ce)},lDAPLogin:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Login","LDAPLogin",C,Ce)},tPLogin:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Login","TPLogin",C,Ce)},tPMDAccountLogin:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Login","TPMDAccountLogin",C,Ce)},workWeiXinLogin:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Login","WorkWeiXinLogin",C,Ce)},workWeiXinInstallAuthLogin:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Login","WorkWeiXinInstallAuthLogin",C,Ce)},getWorkWeiXinCorpInfo:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Login","GetWorkWeiXinCorpInfo",C,Ce)},workWeiXinMiniProgramLogin:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Login","WorkWeiXinMiniProgramLogin",C,Ce)},workWeiXinH5Login:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Login","WorkWeiXinH5Login",C,Ce)},getDingDingCorpInfo:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Login","GetDingDingCorpInfo",C,Ce)},dingDingAppLogin:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Login","DingDingAppLogin",C,Ce)},workWeiXinAppLoginByApp:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Login","WorkWeiXinAppLoginByApp",C,Ce)},getWorkWeiXinCorpInfoByApp:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Login","GetWorkWeiXinCorpInfoByApp",C,Ce)},welinkAppLoginByApp:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Login","WelinkAppLoginByApp",C,Ce)},getFeishuCorpInfoByApp:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Login","GetFeishuCorpInfoByApp",C,Ce)},feishuAppLoginByApp:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Login","FeishuAppLoginByApp",C,Ce)}}},95248:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>h});const h={create:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Plugin","Create",C,Ce)},edit:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Plugin","Edit",C,Ce)},getDetail:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Plugin","GetDetail",C,Ce)},getList:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Plugin","GetList",C,Ce)},getAll:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Plugin","GetAll",C,Ce)},remove:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Plugin","Remove",C,Ce)},release:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Plugin","Release",C,Ce)},rollback:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Plugin","Rollback",C,Ce)},getReleaseHistory:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Plugin","GetReleaseHistory",C,Ce)},removeRelease:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Plugin","RemoveRelease",C,Ce)},commit:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Plugin","Commit",C,Ce)},removeCommit:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Plugin","RemoveCommit",C,Ce)},getCommitHistory:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Plugin","GetCommitHistory",C,Ce)},getUseDetail:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Plugin","GetUseDetail",C,Ce)},import:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Plugin","Import",C,Ce)},export:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Plugin","Export",C,Ce)},getExportHistory:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Plugin","GetExportHistory",C,Ce)},getPluginListBySourece:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Plugin","GetPluginListBySourece",C,Ce)}}},25488:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>h});const h={get:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Variable","Get",C,Ce)},gets:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Variable","Gets",C,Ce)},create:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Variable","Create",C,Ce)},edit:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Variable","Edit",C,Ce)},remove:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Variable","Remove",C,Ce)},getLogs:function(C){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mdyAPI("Variable","GetLogs",C,Ce)}}},94656:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>me});var h=t(85105),Te=t.n(h),C=t(99663),Ce=t(22600),Ne=t(49135),j=t(93196),L=t(67294),I=t(45697),k=t.n(I),e=t(44894),oe=t(93967),m=t.n(oe),y,i,me=(i=y=function(J){(0,j.default)(T,J);function T(){return(0,C.default)(this,T),(0,Ne.default)(this,(T.__proto__||Te()(T)).apply(this,arguments))}return(0,Ce.default)(T,[{key:"render",value:function(){var E=this.props,r=E.data,R=E.value,a=E.onChange;return L.createElement("div",{className:"checkBlock"},r.map(function(z){return L.createElement("div",{className:m()("block",{active:z.value===R}),onClick:function(){return a(z.value)}},z.text)}))}}]),T}(L.Component),y.propTypes={data:k().arrayOf(k().shape({text:k().string,value:k().number})),value:k().number,onChange:k().func},y.defaultProps={onChange:function(){}},i)},3247:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>Te}),!/^(1887|7596|7798)$/.test(t.j))var h=t(94656);const Te=/^(1887|7596|7798)$/.test(t.j)?null:h.Z},45371:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>e});var h=t(69288),Te=t(60967),C=t(47426),Ce=t(42185),Ne=t(67294),j=t(73935),L=t(96486),I=t.n(L),k=function(){};const e=function(oe){var m=oe.style,y=oe.bodyStyle,i=y===void 0?{}:y,me=oe.footer,J=oe.className,T=oe.description,te=oe.title,E=oe.data,r=oe.onOk,R=r===void 0?k:r,a=oe.onCancel,z=a===void 0?k:a,N=oe.clickOmitText,q=N===void 0?!1:N,K=document.createElement("div");document.body.appendChild(K);var ye=void 0,v=function(Y){Y==="cancel"&&z(),Y==="ok"&&R(ye),U()},se=function(){return Ne.createElement("div",{className:"deleteReconfirmFooter"},Ne.createElement(Ce.ZP,{type:"link",onClick:function(){return v("cancel")}},_l("\u53D6\u6D88")),Ne.createElement(Ce.ZP,{type:"danger",disabled:!0,className:"deleteReconfirmOkBtn Button--disabled"},_l("\u5220\u9664")))},de=function(Y){ye=Y,I().find(E,function(be){return be.value===Y})?$(".deleteReconfirmFooter .deleteReconfirmOkBtn").removeAttr("disabled").removeClass("Button--disabled").on("click",function(){v("ok")}):$(".deleteReconfirmFooter .deleteReconfirmOkBtn").prop("disabled",!0).addClass("Button--disabled")},U=function(){setTimeout(function(){var Y=j.unmountComponentAtNode(K);Y&&K.parentNode&&K.parentNode.removeChild(K),z&&z()},0)};j.render(Ne.createElement(h.Z,{style:m,className:J,visible:!0,title:Ne.createElement("span",{style:{color:"#f44336"}},te),onCancel:U,description:T,footer:I().isUndefined(me)?se():me},Ne.createElement("div",{style:i},E.length>1?Ne.createElement(C.ZP,{needDefaultUpdate:!0,data:E,vertical:!0,radioItemClassName:"deleteReconfirmRadioItem",onChange:de}):Ne.createElement("div",null,E.map(function(pe){var Y=pe.text,be=pe.value;return q?Ne.createElement(Ne.Fragment,{key:be},Ne.createElement(Te.Z,{style:{display:"inline"},value:be,text:null,onClick:function(Le,Be){return de(Le?Be:void 0)}}),Ne.createElement("span",null,Y)):Ne.createElement(Te.Z,{value:be,text:Y,onClick:function(Le,Be){return de(Le?Be:void 0)}})})))),K)}},56002:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>e});var h=t(88239),Te=t(42723),C=t(67294),Ce=t(45697),Ne=t.n(Ce),j=t(36021),L=t(53825),I=t(96486),k=t.n(I);function e(oe){var m=oe.to,y=oe.children,i=oe.onClick,me=(0,Te.Z)(oe,["to","children","onClick"]);return C.createElement(L.Z,(0,h.default)({draggable:"false",to:(0,j.IS)(m),onClick:i},me),y)}e.propTypes={to:Ne().string,children:Ne().element,onClick:Ne().func}},42597:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>r});var h=t(85105),Te=t.n(h),C=t(99663),Ce=t(22600),Ne=t(49135),j=t(93196),L=t(45697),I=t.n(L),k=t(67294),e=t(73935),oe=t(93967),m=t.n(oe),y=t(33867),i,me,J,T=(me=i=function(R){(0,j.default)(a,R);function a(z){(0,C.default)(this,a);var N=(0,Ne.default)(this,(a.__proto__||Te()(a)).call(this,z));return J.call(N),N.state={value:null,options:N.props.options||[],availOptions:[],list:[],checkedItems:{},filterText:""},N}return(0,Ce.default)(a,[{key:"componentDidMount",value:function(){this.init(this.props)}},{key:"componentWillReceiveProps",value:function(N){var q=this;N.value!==this.props.value&&this.initValue(N),N.options!==this.props.options&&this.initOptions(N),N.openMenu&&N.filter&&!this.props.openMenu&&setTimeout(function(){q.search.focus()},100)}},{key:"getItem",value:function(N,q){for(var K in N)if(N[K]){var ye=N[K];if(ye.value===q)return ye;if(ye.items){var v=this.getItem(ye.items,q);if(v)return v}}return null}},{key:"render",value:function(){var N=this,q="\u8BF7\u9009\u62E9",K=null,ye=null;if(this.props.multipleLevel&&this.props.multipleSelect){var v=[];for(var se in this.state.checkedItems)this.state.checkedItems[se]&&function(){var be=N.state.checkedItems[se];v.push(k.createElement("li",{key:be.value},k.createElement("div",{className:"label"},k.createElement("span",{title:be.label},be.label)),k.createElement(y.Z,{icon:"close",onClick:function(Le){N.unCheckItem(Le,be)}})))}();v.length&&(q="\u5DF2\u9009\u62E9",K=k.createElement("button",{onClick:function(Q){N.clearCheckedItems(Q)}},"\u6E05\u9664\u9009\u62E9"),ye=k.createElement("ul",{className:"multi-dropdown-pills"},v))}var de=null,U=null;this.props.filter&&(U=k.createElement("div",{className:"flexRow li dropdown-nav",style:{padding:"0 16px 0 14px",height:36,alignItems:"center",borderBottom:"1px solid #e0e0e0",marginBottom:5}},k.createElement("i",{className:"icon-search Gray_75 Font14"}),k.createElement("input",{type:"text",ref:function(Q){N.search=Q},className:"mLeft5 flex Border0 placeholderColor w100",placeholder:this.props.filterHint,onChange:function(Q){N.updateFilterText(Q)}})));var pe=null;(this.props.multipleLevel||this.props.multipleSelect)&&(pe=k.createElement("div",{className:"li divider",key:"divider-0"}),this.state.list.length<1?de=k.createElement("div",{className:this.props.multipleHideDropdownNav?"Hidden":"li dropdown-nav",key:"nav"},k.createElement("div",null,k.createElement("div",{className:"label"},k.createElement("span",null,"\u8BF7\u9009\u62E9")),K)):de=k.createElement("div",{className:"li dropdown-nav back",key:"nav",onClick:this.back},k.createElement(y.Z,{icon:"arrow-left-border"}),k.createElement("div",null,k.createElement("div",{className:"label"},k.createElement("span",null,"\u8FD4\u56DE")),K)));var Y=this.state.availOptions.map(function(be,Q,Le){if(be.type&&be.type==="header")return k.createElement("li",{className:"dropdown-header",key:"header-"+Q},be.label);if(be.type&&be.type==="divider")return k.createElement("li",{className:"divider",key:"divider-"+Q});var Be=[];(!N.props.multipleSelect&&be.value===N.state.value||N.props.multipleSelect&&N.state.checkedItems[be.value])&&Be.push("checked"),be.disabled&&Be.push("disabled");var ke=Be.join(" "),Ie=null;if(N.props.multipleSelect){var he=!!N.state.checkedItems[be.value];he?Ie=k.createElement("span",{className:"check-icon"},k.createElement("span",{className:"rect"},k.createElement(y.Z,{icon:"ok"}))):Ie=k.createElement("span",{className:"check-icon"},k.createElement("span",{className:"rect"}))}var Re=null,ue="";return N.props.multipleLevel&&be.items&&be.items.length&&(Re=k.createElement(y.Z,{className:"arrow",icon:"arrow-right-border",onClick:function(Ee){N.showSubItems(Ee,be)}}),ue="arrow"),k.createElement("li",{className:ke,key:be.value+"-"+Q},k.createElement("div",{className:ue,onClick:function(Ee){N.itemOnClick(Ee,be)}},Ie,k.createElement("div",{className:"label"},k.createElement("span",{title:typeof be.label=="string"?be.label:""},be.label))),Re)});return(!this.props.options||!this.props.options.length)&&(Y=[k.createElement("li",{className:"disabled",key:"item-empty"},k.createElement("div",null,k.createElement("div",{className:"label"},k.createElement("span",{title:this.props.emptyHint},this.props.emptyHint))))]),k.createElement("ul",{className:"multi-dropdown-menu"},de,U,ye,pe,k.createElement("ul",{className:"list"},Y))}}]),a}(k.Component),J=function(){var a=this;this.init=function(z){a.initValue(z),a.initOptions(z)},this.getValue=function(z){var N=z.value||null,q={},K=[];if(z.multipleSelect?K=N:K.push(N),K&&K.length)for(var ye in K)K[ye]&&(q[K[ye]]=a.getItem(z.options,K[ye]));return{value:N,checkedItems:q}},this.initValue=function(z){var N=a.getValue(z),q=N.value,K=N.checkedItems;a.setState({value:q,checkedItems:K})},this.initOptions=function(z){var N=a.getValue(z),q=N.value,K=N.checkedItems;a.setState({value:q,options:z.options||[],availOptions:z.options||[],list:[],checkedItems:K,filter:""})},this.showSubItems=function(z,N){if(z.preventDefault(),z.stopPropagation(),!N.disabled){var q=a.state.list,K=a.state.options;a.props.multipleLevel&&N.items&&N.items.length&&(q.push(N),K=N.items),a.setState({options:K,list:q},function(){a.filterList()})}},this.itemOnClick=function(z,N){if(z.preventDefault(),z.stopPropagation(),!N.disabled){var q=!0;if(a.props.multipleSelect){q=!1;var ye={};for(var v in a.state.checkedItems)if(a.state.checkedItems[v]){var se=a.state.checkedItems[v];ye[v]=se}ye[N.value]?ye[N.value]=null:ye[N.value]=N;var de=[],U=[];for(var pe in ye)if(ye[pe]){var Y=ye[pe];de.push(Y.value),U.push(Y.label)}a.props.onChange(z,de,U,q),a.setState({checkedItems:ye})}else{var K=N.label;a.props.multipleLevel&&(K=a.state.list.map(function(be,Q,Le){return be.label}),K.push(N.label)),a.props.onChange(z,N.value,K,q),a.setState({value:N.value})}}},this.unCheckItem=function(z,N){z.preventDefault(),z.stopPropagation();var q={};for(var K in a.state.checkedItems)if(a.state.checkedItems[K]){var ye=a.state.checkedItems[K];K!==N.value&&(q[K]=ye)}var v=[],se=[];for(var de in q)if(q[de]){var U=q[de];v.push(U.value),se.push(U.label)}a.props.onChange(z,v,se,!1),a.setState({checkedItems:q})},this.clearCheckedItems=function(z){z.preventDefault(),z.stopPropagation(),a.props.onChange(z,[],[],!1),a.setState({checkedItems:{}})},this.back=function(z){z.preventDefault(),z.stopPropagation();var N=a.state.list;N.pop();var q=[];N.length>0?q=N[N.length-1].items:q=a.props.options,a.setState({list:N,options:q,availOptions:q,filter:""})},this.updateFilterText=function(z){var N=z.target.value;a.setState({filter:N},function(){a.filterList()})},this.filterList=function(){var z=[];a.state.options.map(function(N,q,K){return N.type&&z.push(N),N.value&&(N.label.indexOf(a.state.filter)>=0||N.label.toLowerCase().indexOf(a.state.filter)>=0)&&z.push(N),null}),a.setState({availOptions:z})}},me);T.propTypes={value:I().any,openMenu:I().bool,options:I().arrayOf(I().shape({label:I().any,value:I().any,type:I().oneOf(["header","divider"]),disabled:I().bool,item:I().any})),emptyHint:I().string,multipleLevel:I().bool,multipleSelect:I().bool,filter:I().bool,filterHint:I().string,onChange:I().func},T.defaultProp={value:null,openMenu:!1,options:[],emptyHint:"",multipleLevel:!1,multipleSelect:!1,filter:!1,filterHint:"",onChange:function(a,z){}};const te=T;var E=function(R){(0,j.default)(a,R);function a(z){(0,C.default)(this,a);var N=(0,Ne.default)(this,(a.__proto__||Te()(a)).call(this,z));return N.clickListener=function(q){var K=e.findDOMNode(N);(K===q.target||!K.contains(q.target))&&N.state.menuOpened&&N.hideMenu()},N.keyDownListener=function(q){q.keyCode===27&&N.state.menuOpened&&N.hideMenu()},N.onChange=function(q,K,ye,v){N.props.onClick&&N.props.onClick(q,K,ye),K!==N.state.value&&(N.setState({value:K}),N.props.onChange&&N.props.onChange(q,K,ye)),v&&N.hideMenu()},N.toggleMenuOpened=function(){N.setState({menuOpened:!N.state.menuOpened})},N.state={value:N.props.value||null,label:N.props.label||"\u8BF7\u9009\u62E9",menuOpened:!1},N.button=null,N}return(0,Ce.default)(a,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.clickListener,!0),window.addEventListener("keydown",this.keyDownListener,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.clickListener,!0),window.removeEventListener("keydown",this.keyDownListener,!1)}},{key:"componentWillReceiveProps",value:function(N){if(N.value!==this.state.value&&this.setState({value:N.value}),N.label!==this.state.label){var q=N.label&&N.label.length?N.label.toString():"\u8BF7\u9009\u62E9";this.setState({label:q})}}},{key:"showMenu",value:function(){this.setState({menuOpened:!0})}},{key:"hideMenu",value:function(){this.setState({menuOpened:!1})}},{key:"render",value:function(){var N=this,q=["multi-dropdown"];if(this.state.menuOpened&&q.push("open"),this.button){var K=this.button.getBoundingClientRect(),ye=window.innerHeight-K.top-K.height;ye<228&&q.push("menu-top")}var v=q.join(" ");return k.createElement("div",{className:m()(v,this.props.className||"")},k.createElement("button",{ref:function(de){N.button=de},type:"button",className:"dropdown-btn",onClick:this.toggleMenuOpened},k.createElement("span",null,this.state.label),k.createElement(y.Z,{icon:"arrow-down-border"})),k.createElement(te,{value:this.state.value,openMenu:this.state.menuOpened,options:this.props.options,emptyHint:this.props.emptyHint,multipleLevel:this.props.multipleLevel,multipleSelect:this.props.multipleSelect,filter:this.props.filter,filterHint:this.props.filterHint,multipleHideDropdownNav:this.props.multipleHideDropdownNav,onChange:this.onChange}))}}]),a}(k.Component);E.propTypes={value:I().any,label:I().string,options:I().arrayOf(I().shape({label:I().any,value:I().any,type:I().oneOf(["header","divider"]),items:I().any})),emptyHint:I().string,multipleLevel:I().bool,multipleSelect:I().bool,filter:I().bool,filterHint:I().string,onChange:I().func,onClick:I().func,className:I().string},E.defaultProp={value:null,label:"\u8BF7\u9009\u62E9",options:[],emptyHint:"",multipleLevel:!1,multipleSelect:!1,filter:!1,filterHint:"",multipleHideDropdownNav:!1,onChange:function(a,z,N,q){}};const r=E},92531:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>Te}),!/^(1887|7596|7798)$/.test(t.j))var h=t(42597);const Te=/^(1887|7596|7798)$/.test(t.j)?null:h.Z},14467:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>a});var h=t(88239),Te=t(1952),C=t(69288),Ce=t(25273),Ne=t(60967),j=t(54208),L=t(85105),I=t.n(L),k=t(99663),e=t(22600),oe=t(49135),m=t(93196),y=t(67294),i=t(6953),me=t(93967),J=t.n(me),T=t(96486),te=t.n(T),E,r,R=(r=E=function(z){(0,m.default)(N,z);function N(){var q,K,ye,v;(0,k.default)(this,N);for(var se=arguments.length,de=Array(se),U=0;U<se;U++)de[U]=arguments[U];return v=(K=(ye=(0,oe.default)(this,(q=N.__proto__||I()(N)).call.apply(q,[this].concat(de))),ye),ye.state={data:[],selectData:[],loading:!0,keywords:"",pageIndex:1,isMore:!1},ye.promise=null,ye.onScrollEnd=function(){var pe=ye.state,Y=pe.isMore,be=pe.loading;be||!Y||ye.setState({pageIndex:ye.state.pageIndex+1},function(){ye.fetchData()})},K),(0,oe.default)(ye,v)}return(0,e.default)(N,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var K=this,ye=this.props.projectId,v=this.state,se=v.keywords,de=v.data,U=de===void 0?[]:de,pe=v.pageIndex,Y=pe===void 0?1:pe;this.setState({isMore:!1}),this.promise&&this.promise.abort&&this.promise.abort(),this.promise=i.Z.getJobs({keywords:se,projectId:ye,pageIndex:Y,pageSize:10}),this.promise.then(function(be){var Q=Y>1?U.concat(be.list):be.list;K.setState({data:Q,loading:!1,isMore:be.list&&be.list.length>=10})}).catch(function(be){K.setState({loading:!1})})}},{key:"toggle",value:function(K,ye){var v=this.props.unique,se=[].concat(this.state.selectData);ye?v?se=[K]:se=se.concat(K):te().remove(se,function(de){return de.jobId===K.jobId}),this.setState({selectData:se})}},{key:"renderContent",value:function(){var K=this,ye=this.state,v=ye.loading,se=ye.data,de=se===void 0?[]:se,U=ye.keywords,pe=ye.selectData;return v?y.createElement(j.Z,null):de.length?y.createElement(Ce.Z,{onScrollEnd:this.onScrollEnd},de.map(function(Y,be){return y.createElement(Ne.Z,{key:be,className:"GSelect-department-row pointer",style:{padding:"9px 5px"},checked:!!te().find(pe,function(Q){return Q.jobId===Y.jobId}),onClick:function(Le){return K.toggle(Y,!Le)},text:Y.jobName})})):y.createElement("div",{className:"GSelect-NoData"},y.createElement("i",{className:"icon-search GSelect-iconNoData"}),y.createElement("p",{className:"GSelect-noDataText"},U?_l("\u641C\u7D22\u65E0\u7ED3\u679C"):_l("\u65E0\u7ED3\u679C")))}},{key:"renderResult",value:function(){var K=this,ye=this.state.selectData,v=this.props.isAppRole;return ye.map(function(se,de){return y.createElement("div",{className:"GSelect-result-subItem",key:"subItem-"+de},y.createElement("div",{className:"GSelect-result-subItem__avatar",style:v?{background:"unset",color:"#9e9e9e"}:{}},y.createElement("i",{className:"icon-limit-principal"})),y.createElement("div",{className:"GSelect-result-subItem__name overflow_ellipsis"},se.jobName),y.createElement("div",{className:"GSelect-result-subItem__remove",onClick:function(){return K.toggle(se,!1)}},y.createElement("span",{className:"icon-close"})))})}},{key:"render",value:function(){var K=this,ye=this.props,v=ye.onClose,se=ye.projectId,de=ye.onSave,U=ye.showCompanyName,pe=ye.overlayClosable,Y=ye.visible,be=this.state,Q=be.keywords,Le=be.selectData;return y.createElement(C.Z,{visible:Y,title:_l("\u9009\u62E9\u804C\u4F4D"),width:480,type:"scroll",onCancel:v,overlayClosable:pe,onOk:function(){de(Le),v()}},y.createElement("div",{className:"selectJobContainer"},y.createElement("div",{className:"selectJobContainer_search"},y.createElement("span",{className:"searchIcon icon-search"}),y.createElement("input",{type:"text",className:"searchInput",placeholder:_l("\u641C\u7D22\u804C\u4F4D"),value:Q,onChange:function(ke){K.setState({keywords:ke.target.value,loading:!0,pageIndex:1,data:[]},function(){K.searchRequst=te().throttle(K.fetchData,200),K.searchRequst()})}}),y.createElement("span",{className:J()("searchClose icon-closeelement-bg-circle",{Block:!!Q.trim()}),onClick:function(){return K.setState({keywords:""})}})),U&&y.createElement("div",{className:"mTop12 Font13 overflow_ellipsis"},(te().find(md.global.Account.projects,function(Be){return Be.projectId===se})||{}).companyName),y.createElement("div",{className:"selectJobContent"},this.renderContent()),y.createElement("div",{className:"GSelect-result-box"},this.renderResult())))}}]),N}(y.Component),E.defaultProps={projectId:"",unique:!1,onSave:function(){},onClose:function(){}},r);const a=function(z){return(0,Te.Z)(R,(0,h.default)({},z))}},92410:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>ye}),!/^(1887|7596|7798)$/.test(t.j))var h=t(25273);if(!/^(1887|7596|7798)$/.test(t.j))var Te=t(54208);var C=t(97373),Ce=t.n(C);if(!/^(1887|7596|7798)$/.test(t.j))var Ne=t(94055);if(!/^(1887|7596|7798)$/.test(t.j))var j=t(33867);var L=t(12424),I=t(86735),k=t(67294),e=t(71893),oe=t(93967),m=t.n(oe),y=t(96486),i=t.n(y);if(!/^(1887|7596|7798)$/.test(t.j))var me=t(62232);if(!/^(1887|7596|7798)$/.test(t.j))var J=t(11797);if(!/^(1887|7596|7798)$/.test(t.j))var T=t(47935);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(58008);if(!/^(1887|7596|7798)$/.test(t.j))var E=t(25488);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(55832);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(15577);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(77863);var z=(0,I.Z)([`
  height: 100%;
  display: flex;
  flex-direction: column;
  .headTr {
    display: flex;
    align-items: center;
    margin: 0;
    padding: 14px 10px;
    border-bottom: 1px solid #e0e0e0;
    color: #757575;
    &.emptyNoBorder {
      border-bottom: none;
    }
  }
  .name {
    flex: 6;
    min-width: 40%;
    flex-grow: initial;
    padding-right: 8px;
  }
  .value {
    flex: 6;
    min-width: 0;
  }
  .description {
    flex: 4;
    min-width: 0;
  }
  .option {
    flex: 1;
  }

  .dataItem {
    display: flex;
    height: 40px;
    line-height: 40px;
    padding: 0 10px;
    border-bottom: 1px solid #f5f5f5;
    font-size: 14px;
    .doneIcon {
      display: none;
      position: absolute;
      top: 12px;
      right: 20px;
      color: #2196f3;
    }

    &:hover {
      background: #f5f5f5;
      .optionIcon {
        display: block;
      }
    }
    &.allowSelect {
      cursor: pointer;
      position: relative;
      &.isActive {
        background: #dbeefd;
        .doneIcon {
          display: block;
        }
      }
    }
    &.isEditing {
      background: #ecf7fe;
    }

    .name {
      .foldIcon {
        cursor: pointer;
        &:hover {
          .icon-arrow-right-tip,
          .icon-arrow-down {
            color: #2196f3;
          }
        }
      }
      i {
        font-size: 16px;
        color: #bdbdbd;
        cursor: pointer;
      }
    }
    .value {
      .emptyValue {
        width: fit-content;
        height: 16px;
        line-height: 16px;
        padding: 0 8px;
        border-radius: 27px;
        color: #f51744;
        background: rgba(245, 23, 68, 0.08);
        font-size: 11px;
      }
      .maskIcon {
        color: #bdbdbd;
        margin-left: 8px;
        cursor: pointer;
        &:hover {
          color: #2196f3;
        }
      }
    }
  }
`],[`
  height: 100%;
  display: flex;
  flex-direction: column;
  .headTr {
    display: flex;
    align-items: center;
    margin: 0;
    padding: 14px 10px;
    border-bottom: 1px solid #e0e0e0;
    color: #757575;
    &.emptyNoBorder {
      border-bottom: none;
    }
  }
  .name {
    flex: 6;
    min-width: 40%;
    flex-grow: initial;
    padding-right: 8px;
  }
  .value {
    flex: 6;
    min-width: 0;
  }
  .description {
    flex: 4;
    min-width: 0;
  }
  .option {
    flex: 1;
  }

  .dataItem {
    display: flex;
    height: 40px;
    line-height: 40px;
    padding: 0 10px;
    border-bottom: 1px solid #f5f5f5;
    font-size: 14px;
    .doneIcon {
      display: none;
      position: absolute;
      top: 12px;
      right: 20px;
      color: #2196f3;
    }

    &:hover {
      background: #f5f5f5;
      .optionIcon {
        display: block;
      }
    }
    &.allowSelect {
      cursor: pointer;
      position: relative;
      &.isActive {
        background: #dbeefd;
        .doneIcon {
          display: block;
        }
      }
    }
    &.isEditing {
      background: #ecf7fe;
    }

    .name {
      .foldIcon {
        cursor: pointer;
        &:hover {
          .icon-arrow-right-tip,
          .icon-arrow-down {
            color: #2196f3;
          }
        }
      }
      i {
        font-size: 16px;
        color: #bdbdbd;
        cursor: pointer;
      }
    }
    .value {
      .emptyValue {
        width: fit-content;
        height: 16px;
        line-height: 16px;
        padding: 0 8px;
        border-radius: 27px;
        color: #f51744;
        background: rgba(245, 23, 68, 0.08);
        font-size: 11px;
      }
      .maskIcon {
        color: #bdbdbd;
        margin-left: 8px;
        cursor: pointer;
        &:hover {
          color: #2196f3;
        }
      }
    }
  }
`]),N=(0,I.Z)([`
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  .iconCon {
    width: 130px;
    height: 130px;
    text-align: center;
    background: #f5f5f5;
    border-radius: 50%;
    color: #c2c3c3;
    i {
      line-height: 130px;
    }
  }
`],[`
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  .iconCon {
    width: 130px;
    height: 130px;
    text-align: center;
    background: #f5f5f5;
    border-radius: 50%;
    color: #c2c3c3;
    i {
      line-height: 130px;
    }
  }
`]),q=e.ZP.div(z),K=e.ZP.div(N);function ye(v){var se=v.data,de=v.loading,U=v.onRefreshVarList,pe=U===void 0?function(){}:U,Y=v.emptyText,be=v.onAdd,Q=be===void 0?function(){}:be,Le=v.onEdit,Be=Le===void 0?function(){}:Le,ke=v.readOnly,Ie=v.allowSelected,he=v.onSelect,Re=he===void 0?function(){}:he,ue=v.activeId,we=v.setActiveId,Ee=v.projectId,b=v.emptyNoBorder,le=(0,k.useState)([]),ae=(0,L.Z)(le,2),ve=ae[0],W=ae[1],ce=(0,k.useState)([]),Z=(0,L.Z)(ce,2),_e=Z[0],P=Z[1],xe=(0,k.useState)([]),bt=(0,L.Z)(xe,2),tt=bt[0],Dt=bt[1],vn=(0,k.useState)({}),Fe=(0,L.Z)(vn,2),Bt=Fe[0],kt=Fe[1],Tt=(0,k.useState)({visible:!1,id:"",projectId:""}),tn=(0,L.Z)(Tt,2),Vn=tn[0],Zn=tn[1],Ot=(0,R.XH)(Ee,a.UU.globalVariable);(0,k.useEffect)(function(){W((0,T.f)(se))},[se]);var $t=function($e){E.Z.get({id:$e}).then(function(jt){Be(jt.resultCode===1?jt.variable:{})})},cn=[{dataIndex:"name",title:_l("\u540D\u79F0"),render:function($e){return k.createElement("div",{className:"flexRow alignItemsCenter"},$e.hasChild?k.createElement("div",{className:"foldIcon",onClick:function(){var rn=!i().includes(_e,$e.key);P(rn?_e.concat([$e.key]):_e.filter(function(Rt){return Rt!==$e.key}))}},k.createElement(j.Z,{className:"Font13 mRight8",icon:i().includes(_e,$e.key)?"arrow-right-tip":"arrow-down"}),k.createElement(j.Z,{icon:"custom_folder_2"}),k.createElement("span",{className:"mLeft6 Gray overflow_ellipsis"},$e.name)):k.createElement("div",{className:"Hand overflow_ellipsis",onClick:ke?function(){}:function(){return $t($e.id)}},k.createElement(Ne.default,{title:J.Vn[$e.controlType],placement:"top"},k.createElement(j.Z,{icon:(0,me.hB)($e.controlType)})),$e.name.indexOf(".")>-1?k.createElement(k.Fragment,null,k.createElement("span",{className:"mLeft6 Gray_9e"},$e.name.slice(0,$e.name.lastIndexOf("."))),k.createElement("span",{className:"Gray"},$e.name.slice($e.name.lastIndexOf("."),$e.name.length))):k.createElement("span",{className:"mLeft6 Gray"},$e.name)))}},{dataIndex:"value",title:_l("\u503C"),render:function($e){return!$e.value&&$e.value!==0&&!$e.hasChild?k.createElement("div",{className:"flexRow alignItemsCenter h100"},k.createElement("div",{className:"emptyValue"},_l("\u503C\u4E3A\u7A7A"))):k.createElement("div",{className:"flexRow alignItemsCenter"},k.createElement("span",{className:"Gray_9e overflow_ellipsis"},$e.hasChild?"":$e.maskType===0||i().includes(tt,$e.id)?$e.value:"*".repeat($e.value.length)),$e.maskType===1&&!ke&&k.createElement(Ne.default,{placement:"top",title:i().includes(tt,$e.id)?_l("\u9690\u85CF"):_l("\u663E\u793A")},k.createElement(j.Z,{icon:i().includes(tt,$e.id)?"workflow_hide":"eye_off",className:"maskIcon",onClick:function(){var rn=i().includes(tt,$e.id);Dt(rn?tt.filter(function(Rt){return Rt!==$e.id}):tt.concat($e.id))}})))}},{dataIndex:"description",title:_l("\u63CF\u8FF0"),render:function($e){return k.createElement("div",{className:"Gray_9e overflow_ellipsis"},$e.description)}},{dataIndex:"option",title:"",render:function($e){return ke?"":k.createElement(te.Z,{isDirOption:$e.hasChild,onAdd:function(){Ot==="2"?(0,R.j0)(Ee,a.UU.globalVariable):Q($e.key+".")},onEdit:function(){return $t($e.id)},onDelete:function(){Ot==="2"?(0,R.j0)(Ee,a.UU.globalVariable):E.Z.remove({id:$e.id}).then(function(rn){rn&&(pe(J.nt.DELETE,$e),alert(_l("\u5220\u9664\u6210\u529F")))})},onLog:function(){Zn({visible:!0,id:$e.id,projectId:$e.projectId}),we($e.id)}})}}],Mn=function dt($e){return $e.map(function(jt){var rn=!jt.hasChild&&Ie,Rt=ve.filter(function(St){return St.pid===jt.key})||[];return k.createElement(k.Fragment,null,k.createElement("div",{key:jt.hasChild?jt.key:jt.id,className:m()("dataItem",{allowSelect:rn,isActive:Bt.id===jt.id,isEditing:ue===jt.id&&!jt.hasChild}),onClick:rn?function(){kt(jt),Re(jt)}:function(){}},cn.map(function(St,zt){return k.createElement("div",{key:(jt.hasChild?jt.key:jt.id)+"-"+zt,className:""+St.dataIndex,style:{paddingLeft:St.dataIndex==="name"?(jt.key.split(".").length-1)*30+"px":0}},St.render?St.render(jt):jt[St.dataIndex])}),k.createElement(j.Z,{icon:"done",className:"doneIcon"})),!!Rt.length&&!i().includes(_e,jt.key)&&dt(Rt))})};return k.createElement(q,null,k.createElement("div",{className:m()("headTr",{emptyNoBorder:b&&!ve.length})},cn.map(function(dt,$e){return k.createElement("div",{key:$e,className:""+dt.dataIndex},dt.title)})),de?k.createElement(Te.Z,{className:"mTop10"}):ve.length?k.createElement(h.Z,null,Mn(ve.filter(function(dt){return!dt.pid})),Vn.visible&&k.createElement(r.Z,{variableId:Vn.id,projectId:Vn.projectId,onClose:function(){Zn({visible:!1,id:"",projectId:""}),we("")}})):k.createElement(K,null,k.createElement("div",{className:"iconCon"},k.createElement(j.Z,{icon:"global_variable",className:"Font64"})),k.createElement("div",{className:"mTop24 Font16 Gray_9e"},Y)))}},58008:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>J}),!/^(1887|7596|7798)$/.test(t.j))var h=t(33867);if(!/^(1887|7596|7798)$/.test(t.j))var Te=t(69288);var C=t(12424),Ce=t(86735),Ne=t(67294),j=t(29314),L=t(71893),I=(0,Ce.Z)([`
  height: 100%;
  display: flex;
  align-items: center;
  .optionIcon {
    color: #9e9e9e;
    font-size: 16px;
    cursor: pointer;
    display: none;
    &:hover {
      color: #2196f3;
    }
  }
`],[`
  height: 100%;
  display: flex;
  align-items: center;
  .optionIcon {
    color: #9e9e9e;
    font-size: 16px;
    cursor: pointer;
    display: none;
    &:hover {
      color: #2196f3;
    }
  }
`]),k=(0,Ce.Z)([`
  position: relative !important;
  width: 220px !important;
  padding: 6px 0 !important;
  box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.16);
  border-radius: 3px;
  background: #fff;
`],[`
  position: relative !important;
  width: 220px !important;
  padding: 6px 0 !important;
  box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.16);
  border-radius: 3px;
  background: #fff;
`]),e=(0,Ce.Z)([`
  padding: 0 20px;
  line-height: 36px;
  cursor: pointer;
  &:hover {
    background-color: #f5f5f5;
  }
`],[`
  padding: 0 20px;
  line-height: 36px;
  cursor: pointer;
  &:hover {
    background-color: #f5f5f5;
  }
`]),oe=(0,Ce.Z)([`
  color: #f44336;
`],[`
  color: #f44336;
`]),m=L.ZP.div(I),y=L.ZP.div(k),i=L.ZP.div(e),me=(0,L.ZP)(i)(oe);function J(T){var te=T.isDirOption,E=T.onAdd,r=T.onEdit,R=T.onDelete,a=T.onLog,z=(0,Ne.useState)(!1),N=(0,C.Z)(z,2),q=N[0],K=N[1],ye=function(){K(!1),Te.Z.confirm({title:_l("\u786E\u5B9A\u5220\u9664\u8FD9\u4E2A\u53D8\u91CF\uFF1F"),buttonType:"danger",description:Ne.createElement("div",null,Ne.createElement("span",null,_l("\u5220\u9664\u53D8\u91CF\u540E\uFF0C\u65E0\u6CD5\u6062\u590D"))),okText:_l("\u786E\u5B9A"),onOk:R})};return Ne.createElement(m,null,Ne.createElement(j.Z,{action:["click"],popupClassName:"moreOption",getPopupContainer:function(){return document.body},popupVisible:q,onPopupVisibleChange:function(se){return K(se)},popupAlign:{points:["tr","bl"],offset:[25,5],overflow:{adjustX:!0,adjustY:!0}},popup:Ne.createElement(y,null,te?Ne.createElement(i,{onClick:function(){K(!1),E()}},_l("\u6DFB\u52A0\u53D8\u91CF")):Ne.createElement(Ne.Fragment,null,Ne.createElement(i,{onClick:function(){K(!1),r()}},_l("\u7F16\u8F91")),Ne.createElement(i,{onClick:function(){K(!1),a()}},_l("\u65E5\u5FD7")),Ne.createElement(me,{onClick:ye},_l("\u5220\u9664"))))},Ne.createElement(h.Z,{icon:"moreop",className:"optionIcon"})))}},97779:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>E});var h=t(88239),Te=t(12424),C=t(69288),Ce=t(86735),Ne=t(67294),j=t(71893),L=t(96486),I=t.n(L),k=t(93967),e=t.n(k);if(!/^(1887|7596|7798)$/.test(t.j))var oe=t(12935);if(!/^(1887|7596|7798)$/.test(t.j))var m=t(92410);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(25488);if(!/^(1887|7596|7798)$/.test(t.j))var i=t(1952);var me=(0,Ce.Z)([`
  position: relative;
  .mui-dialog-body {
    padding: 0 !important;
  }
  .selectVarWrapper {
    display: flex;
    flex-direction: column;
    height: 100%;
    padding: 0 20px;
    .searchCon {
      width: 100%;
      height: 36px;
    }
    .tabWrap {
      display: flex;
      border-bottom: 1px solid #eaeaea;
      .tabItem {
        padding: 0 20px;
        height: 48px;
        line-height: 48px;
        font-size: 14px;
        font-weight: 600;
        &:last-child {
          margin-left: 32px;
        }
        &.active {
          border-bottom: 3px solid #2196f3;
          color: #2196f3;
        }
      }
    }
  }
`],[`
  position: relative;
  .mui-dialog-body {
    padding: 0 !important;
  }
  .selectVarWrapper {
    display: flex;
    flex-direction: column;
    height: 100%;
    padding: 0 20px;
    .searchCon {
      width: 100%;
      height: 36px;
    }
    .tabWrap {
      display: flex;
      border-bottom: 1px solid #eaeaea;
      .tabItem {
        padding: 0 20px;
        height: 48px;
        line-height: 48px;
        font-size: 14px;
        font-weight: 600;
        &:last-child {
          margin-left: 32px;
        }
        &.active {
          border-bottom: 3px solid #2196f3;
          color: #2196f3;
        }
      }
    }
  }
`]),J=(0,j.ZP)(C.Z)(me),T=[{label:_l("\u5E94\u7528"),value:"app"},{label:_l("\u7EC4\u7EC7"),value:"project"}];function te(r){var R=r.onOk,a=r.onClose,z=r.projectId,N=r.appId,q=r.filterTypes,K=q===void 0?[]:q,ye=r.filterNoEdit,v=ye===void 0?!1:ye,se=(0,Ne.useState)(""),de=(0,Te.Z)(se,2),U=de[0],pe=de[1],Y=(0,Ne.useState)(N?"app":"project"),be=(0,Te.Z)(Y,2),Q=be[0],Le=be[1],Be=(0,Ne.useState)(!1),ke=(0,Te.Z)(Be,2),Ie=ke[0],he=ke[1],Re=(0,Ne.useState)([]),ue=(0,Te.Z)(Re,2),we=ue[0],Ee=ue[1],b=(0,Ne.useState)({}),le=(0,Te.Z)(b,2),ae=le[0],ve=le[1];return(0,Ne.useEffect)(function(){he(!0),y.Z.gets({sourceId:N||z,sourceType:N?Q==="project"?11:1:0}).then(function(W){he(!1),W.resultCode===1?Ee(W.variables):Ee([])})},[Q]),Ne.createElement(J,{visible:!0,type:"fixed",width:800,title:_l("\u9009\u62E9\u5168\u5C40\u53D8\u91CF"),okDisabled:I().isEmpty(ae),onOk:function(){R(ae),a()},onCancel:function(){a()}},Ne.createElement("div",{className:"selectVarWrapper"},Ne.createElement(oe.Z,{className:"searchCon",placeholder:_l("\u641C\u7D22\u53D8\u91CF\u540D\u79F0"),onChange:I().debounce(function(W){pe(W)},500)}),Ne.createElement("div",{className:"tabWrap"},T.filter(function(W){return N||!N&&W.value==="project"}).map(function(W){return Ne.createElement("div",{className:e()("tabItem Hand",{active:W.value===Q}),onClick:function(){return Le(W.value)}},W.label)})),Ne.createElement("div",{className:"flex"},Ne.createElement(m.Z,{data:we.filter(function(W){return W.name.toLocaleLowerCase().indexOf(U.toLocaleLowerCase())>-1&&(!K.length||I().includes(K,W.controlType))&&(W.allowEdit===1||!v)}),readOnly:!0,allowSelected:!0,onSelect:function(ce){return ve(ce)},loading:Ie,emptyText:U?_l("\u6682\u65E0\u641C\u7D22\u7ED3\u679C"):_l("\u6682\u65E0\u5168\u5C40\u53D8\u91CF"),emptyNoBorder:!0}))))}const E=function(r){return(0,i.Z)(te,(0,h.default)({},r))}},55832:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>v}),!/^(1887|7596|7798)$/.test(t.j))var h=t(25273);if(!/^(1887|7596|7798)$/.test(t.j))var Te=t(15759);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(54208);var Ce=t(88239);if(!/^(1887|7596|7798)$/.test(t.j))var Ne=t(33867);var j=t(12424),L=t(48659),I=t.n(L),k=t(1825),e=t(86735),oe=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var m=t(93002);var y=t(71893),i=t(29314),me=t(30381),J=t.n(me),T=t(93967),te=t.n(T);if(!/^(1887|7596|7798)$/.test(t.j))var E=t(61987);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(6503);var R=t(68924),a=t.n(R);if(!/^(1887|7596|7798)$/.test(t.j))var z=t(25488);var N=(0,e.Z)([`
  color: #333;
  .ant-drawer-mask {
    background-color: transparent;
  }
  .ant-drawer-content-wrapper {
    box-shadow: -3px 3px 6px 1px rgba(0, 0, 0, 0.13);
  }
  .ant-drawer-header {
    border-bottom: 0;
    .ant-drawer-header-title {
      flex-direction: row-reverse;
      .ant-drawer-title {
        font-size: 17px;
        font-weight: 600;
      }
      .ant-drawer-close {
        padding: 0;
        margin-top: -24px;
        margin-right: -12px;
      }
    }
  }
  .ant-drawer-body {
    display: flex;
    flex-direction: column;
    height: 100%;
    padding: 0;

    .filterWrapper {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 25px;

      .icon {
        font-size: 16px;
        color: #757575;
      }
      .icon.icon-arrow-down {
        color: #9e9e9e;
        font-size: 8px;
        width: 16px;
        display: inline-block;
        text-align: center;
      }
      .icon-cancel1 {
        display: none;
      }

      .selectUser,
      .selectDate {
        padding: 10px;
        background: #fff;
        display: flex;
        align-items: center;
        width: fit-content;
        cursor: pointer;
        border-radius: 3px;
        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        border: 1px solid #f5f5f5;
        &:hover {
          box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.2);
          .icon-cancel1 {
            display: inline-block;
          }
          .icon-arrow-down {
            display: none;
          }
        }
      }
      .selectConText {
        margin: 0 4px;
        color: #9e9e9e;
      }
      .selectLight {
        color: #2196f3;
        .icon {
          color: #2196f3;
        }
        .selectConText {
          color: #2196f3;
        }
      }
    }
    .emptyText {
      margin-top: 100px;
      font-size: 13px;
      color: #bdbdbd;
      text-align: center;
    }
  }
`],[`
  color: #333;
  .ant-drawer-mask {
    background-color: transparent;
  }
  .ant-drawer-content-wrapper {
    box-shadow: -3px 3px 6px 1px rgba(0, 0, 0, 0.13);
  }
  .ant-drawer-header {
    border-bottom: 0;
    .ant-drawer-header-title {
      flex-direction: row-reverse;
      .ant-drawer-title {
        font-size: 17px;
        font-weight: 600;
      }
      .ant-drawer-close {
        padding: 0;
        margin-top: -24px;
        margin-right: -12px;
      }
    }
  }
  .ant-drawer-body {
    display: flex;
    flex-direction: column;
    height: 100%;
    padding: 0;

    .filterWrapper {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 25px;

      .icon {
        font-size: 16px;
        color: #757575;
      }
      .icon.icon-arrow-down {
        color: #9e9e9e;
        font-size: 8px;
        width: 16px;
        display: inline-block;
        text-align: center;
      }
      .icon-cancel1 {
        display: none;
      }

      .selectUser,
      .selectDate {
        padding: 10px;
        background: #fff;
        display: flex;
        align-items: center;
        width: fit-content;
        cursor: pointer;
        border-radius: 3px;
        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        border: 1px solid #f5f5f5;
        &:hover {
          box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.2);
          .icon-cancel1 {
            display: inline-block;
          }
          .icon-arrow-down {
            display: none;
          }
        }
      }
      .selectConText {
        margin: 0 4px;
        color: #9e9e9e;
      }
      .selectLight {
        color: #2196f3;
        .icon {
          color: #2196f3;
        }
        .selectConText {
          color: #2196f3;
        }
      }
    }
    .emptyText {
      margin-top: 100px;
      font-size: 13px;
      color: #bdbdbd;
      text-align: center;
    }
  }
`]),q=(0,e.Z)([`
  display: flex;
  justify-content: space-between;
  padding: 16px 20px;
  margin: 0 10px;
  border-bottom: 1px solid #eaeaea;

  .logContent {
    font-size: 12px;
    color: #9e9e9e;
    a {
      color: #333;
    }
  }
  .operatorAvatar {
    display: inline-block !important;
    margin-right: 8px;
    img {
      margin-top: -2px;
    }
  }
`],[`
  display: flex;
  justify-content: space-between;
  padding: 16px 20px;
  margin: 0 10px;
  border-bottom: 1px solid #eaeaea;

  .logContent {
    font-size: 12px;
    color: #9e9e9e;
    a {
      color: #333;
    }
  }
  .operatorAvatar {
    display: inline-block !important;
    margin-right: 8px;
    img {
      margin-top: -2px;
    }
  }
`]),K=(0,y.ZP)(k.Z)(N),ye=y.ZP.div(q);function v(se){var de=se.onClose,U=se.variableId,pe=se.projectId,Y=pe===void 0?"":pe,be=(0,oe.useRef)(),Q=(0,m.Z)({selectUser:void 0,selectDate:{visible:!1,range:void 0}}),Le=(0,j.Z)(Q,2),Be=Le[0],ke=Be.selectUser,Ie=Be.selectDate,he=Le[1],Re=(0,m.Z)({loading:!0,pageIndex:1,noMore:!1}),ue=(0,j.Z)(Re,2),we=ue[0],Ee=ue[1],b=(0,oe.useState)([]),le=(0,j.Z)(b,2),ae=le[0],ve=le[1],W=function(){var xe=((ke||[])[0]||{}).accountId,bt=((Ie.range||{}).value||{})[0],tt=((Ie.range||{}).value||{})[1],Dt=bt?J()(bt).format("YYYY-MM-DD HH:mm:ss"):void 0,vn=tt?J()(tt).format("YYYY-MM-DD HH:mm:ss"):void 0;Ee({loading:!0}),z.Z.getLogs({variableId:U,pageIndex:we.pageIndex,pageSize:50,start:Dt,end:vn,operator:xe}).then(function(Fe){var Bt=Fe.logs;ve(we.pageIndex>1?ae.concat(Bt):Bt),Ee({loading:!1,noMore:Bt.length<50})})};(0,oe.useEffect)(W,[we.pageIndex,ke,Ie]);var ce=function(){we.noMore||Ee({pageIndex:we.pageIndex+1})},Z=function(xe){Ee({operator:xe}),he({selectUser:xe})},_e=function(){var xe=["user-sub","user-undefined"];(0,E.ZP)(be.current,{hidePortalCurrentUser:!0,selectRangeOptions:!1,includeSystemField:!0,prefixOnlySystemField:!0,rect:be.current.getBoundingClientRect(),tabType:1,showMoreInvite:!1,isTask:!1,filterAccountIds:ke?ke.map(function(bt){return bt.accountId}).concat(xe):[].concat(xe),offset:{top:2},zIndex:10001,SelectUserSettings:{unique:!0,projectId:Y,filterAccountIds:ke?ke.map(function(bt){return bt.accountId}).concat(xe):[].concat(xe),callback:Z},selectCb:Z})};return oe.createElement(K,{visible:!0,width:470,placement:"right",title:_l("\u65E5\u5FD7"),closeIcon:oe.createElement("i",{className:"icon-close Font18"}),onClose:de},oe.createElement("div",{className:"filterWrapper"},oe.createElement("span",{className:te()({selectLight:ke},"selectUser"),onClick:_e,ref:be},oe.createElement(Ne.Z,{icon:"task_custom_personnel"}),oe.createElement("span",{className:"selectConText"},ke?ke[0].fullname:_l("\u64CD\u4F5C\u8005")),oe.createElement(Ne.Z,{icon:"arrow-down",style:ke?{}:{display:"inline-block"}}),ke&&oe.createElement(Ne.Z,{onClick:function(xe){xe.stopPropagation(),he({selectUser:void 0})},icon:"cancel1"})),oe.createElement(i.Z,{popupVisible:Ie.visible,onPopupVisibleChange:function(xe){return he({selectDate:(0,Ce.default)({},Ie,{visible:xe})})},action:["click"],popupAlign:{points:["tr","br"]},popup:oe.createElement(r.Z,{onChange:function(xe){xe.value&&he({selectDate:{visible:!1,range:(0,Ce.default)({},xe,{value:[xe.value[0],xe.value[1]]})}})}})},oe.createElement("span",{className:(Ie.range?"selectLight":"")+" selectDate"},oe.createElement(Ne.Z,{icon:"event"}),Ie.range&&oe.createElement("span",{className:"selectConText"},Ie.range.label),Ie.range&&oe.createElement(Ne.Z,{icon:"arrow-down"}),Ie.range&&oe.createElement(Ne.Z,{icon:"cancel1",onClick:function(xe){xe.stopPropagation(),he({selectDate:{visible:Ie.visible,range:void 0}})}})))),we.loading&&we.pageIndex===1?oe.createElement(C.Z,{className:"mTop10"}):ae.length?oe.createElement(h.Z,{onScrollEnd:ce},ae.map(function(P){return oe.createElement(ye,{key:P.id},oe.createElement("div",null,oe.createElement(Te.Z,{className:"circle operatorAvatar",user:{userHead:P.operator.avatar,accountId:P.operator.accountId},size:20,projectId:Y}),oe.createElement("span",{className:"Font12 mRight8"},P.operator.fullname),oe.createElement("span",{className:"logContent",dangerouslySetInnerHTML:{__html:a()(P.opeartContent)}})),oe.createElement("div",{className:"Font12 Gray_9e nowrap pTop2"},P.operationDatetime))})):oe.createElement("div",{className:"emptyText"},_l("\u6682\u65E0\u6570\u636E")))}},11797:(wn,gt,t)=>{"use strict";t.d(gt,{Vn:()=>C,nt:()=>Ce});var h=[{text:_l("\u5141\u8BB8"),value:1},{text:_l("\u4E0D\u5141\u8BB8"),value:0}],Te=[{text:_l("\u7EC4\u7EC7\u4E0B\u6240\u6709\u5E94\u7528"),value:1},{text:_l("\u6307\u5B9A\u5E94\u7528"),value:2}],C={2:_l("\u6587\u672C"),6:_l("\u6570\u503C")},Ce={ADD:"add",UPDATE:"update",DELETE:"delete",WHOLE_LIST:"whole_list"}},47935:(wn,gt,t)=>{"use strict";t.d(gt,{f:()=>Ce});var h=t(88239),Te=t(96486),C=t.n(Te),Ce=function(j){var L=[];return j.forEach(function(I){for(var k=I.name.split("."),e=function(y){var i=k.slice(0,y+1).join("."),me=y!==k.length-1,J=me?{}:I;L.filter(function(T){return T.key===i}).length||L.push((0,h.default)({key:i,name:k[y],pid:y===0?"":k.slice(0,y).join("."),hasChild:me},J))},oe=0;oe<k.length;oe++)e(oe)}),L}},12935:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>me});var h=t(12424),Te=t(86735),C=t(67294),Ce=t(71893),Ne=t(45697),j=t.n(Ne),L=t(42541),I=(0,Te.Z)([`
  width: 220px;
  height: 36px;
  border-radius: 36px;
  background-color: #f5f5f5;
  padding-left: 10px;
  overflow: hidden;
  input {
    flex: 1;
    border: none;
    margin-left: 2px;
    background-color: inherit;
  }
  &:hover {
    background-color: #eaeaea;
  }
`],[`
  width: 220px;
  height: 36px;
  border-radius: 36px;
  background-color: #f5f5f5;
  padding-left: 10px;
  overflow: hidden;
  input {
    flex: 1;
    border: none;
    margin-left: 2px;
    background-color: inherit;
  }
  &:hover {
    background-color: #eaeaea;
  }
`]),k=(0,Te.Z)([`
  cursor: pointer;
  width: 28px;
  height: 28px;
  border-radius: 28px;
  margin-right: 2px;
  &:hover {
    background: #f5f5f5;
  }
`],[`
  cursor: pointer;
  width: 28px;
  height: 28px;
  border-radius: 28px;
  margin-right: 2px;
  &:hover {
    background: #f5f5f5;
  }
`]),e=(0,Te.Z)([`
  display: inline-block;
  margin: 5px;
  font-size: 0px;
  cursor: pointer;
`],[`
  display: inline-block;
  margin: 5px;
  font-size: 0px;
  cursor: pointer;
`]),oe=(0,Ce.ZP)(L.EK)(I),m=(0,Ce.ZP)(L.Lb)(k),y=Ce.ZP.div(e),i=!1;function me(J){var T=J.clickShowInput,te=J.placeholder,E=J.value,r=J.onChange,R=(0,C.useRef)(),a=(0,C.useState)(),z=(0,h.Z)(a,2),N=z[0],q=z[1];return(0,C.useEffect)(function(){T&&N&&R.current&&R.current.focus()},[N]),T&&!N?C.createElement(y,{onClick:function(){return q(!0)}},C.createElement("i",{className:"icon icon-search Font20 Gray_9d"})):C.createElement(oe,{className:J.className},C.createElement("i",{className:"icon icon-search Font18 Gray_9d"}),C.createElement("input",{ref:R,type:"text",placeholder:te,onBlur:function(ye){ye.target.value.trim()===""&&q(!1)},onChange:function(ye){!i&&r(ye.target.value)},onCompositionStart:function(){return i=!0},onCompositionEnd:function(ye){ye.type==="compositionend"&&(i=!1),r(ye.target.value)}}),E&&C.createElement(m,{onClick:function(ye){R.current.value="",q(!1),r("")}},C.createElement("i",{className:"icon icon-cancel Gray_9e Font16"})))}me.propTypes={clickShowInput:j().bool,placeholder:j().string,value:j().string,onChange:j().func}},97592:(wn,gt,t)=>{"use strict";t.d(gt,{MR:()=>oa,xy:()=>zt});var h=t(70264),Te=t(25273),C=t(79221),Ce=t(52945),Ne=t.n(Ce),j=t(6100),L=t(62521),I=t(16469),k=t(33867),e=t(88239),oe=t(12424),m=t(67294),y=t(91088),i=t(50533),me=t(22010),J=t(42602),T=t(69288),te=t(85105),E=t.n(te),r=t(99663),R=t(22600),a=t(49135),z=t(93196),N=t(93967),q=t.n(N),K,ye,v=(ye=K=function(In){(0,z.default)(Vt,In);function Vt(){var Yt,qt,rt,Qe;(0,r.default)(this,Vt);for(var ht=arguments.length,Lt=Array(ht),Ct=0;Ct<ht;Ct++)Lt[Ct]=arguments[Ct];return Qe=(qt=(rt=(0,a.default)(this,(Yt=Vt.__proto__||E()(Vt)).call.apply(Yt,[this].concat(Lt))),rt),rt.state={searchValue:"",sourceAppSectionId:""},qt),(0,a.default)(rt,Qe)}return(0,R.default)(Vt,[{key:"renderGroupingItem",value:function(qt){var rt=this,Qe=this.state,ht=Qe.sourceAppSectionId,Lt=Qe.searchValue,Ct=qt.appSectionId,mt=qt.name;return Lt&&!mt.toLocaleLowerCase().includes(Lt.toLocaleLowerCase())?null:m.createElement("div",{key:Ct,className:q()("groupingItem flexRow alignItemsCenter pointer",{active:ht===Ct}),onClick:function(){rt.setState({sourceAppSectionId:Ct})}},m.createElement("div",{className:"flex mLeft5"},m.createElement("span",{className:"ellipsis"},mt||_l("\u672A\u547D\u540D\u5206\u7EC4"))),ht===Ct&&m.createElement(k.Z,{icon:"done",className:"Font18 ThemeColor"}))}},{key:"render",value:function(){var qt=this,rt=this.props,Qe=rt.onOk,ht=rt.onCancel,Lt=rt.data,Ct=this.state,mt=Ct.sourceAppSectionId,vt=Ct.searchValue;return m.createElement(T.Z,{className:"delAppItemDialog",confirm:"danger",width:640,title:_l("\u5220\u9664\u4E00\u7EA7\u5206\u7EC4"),visible:!0,footer:null,onCancel:ht},m.createElement("div",{className:"explain"},_l("\u5F53\u524D\u4E00\u7EA7\u5206\u7EC4\u5305\u542B\u5185\u5BB9\uFF0C\u5FC5\u987B\u5C06\u4ED6\u4EEC\u79FB\u5230\u5176\u4ED6\u4E00\u7EA7\u5206\u7EC4\u540E\u518D\u8FDB\u884C\u5220\u9664")),m.createElement("div",{className:"moveTo"},m.createElement("span",null,_l("\u79FB\u52A8\u5230")),m.createElement("div",{className:"groupingWrap flexColumn mTop10"},m.createElement("div",{className:"searchWrap flexRow alignItemsCenter mBottom8 pBottom10"},m.createElement(k.Z,{icon:"search",className:"Font18 Gray_9e mRight3"}),m.createElement("input",{className:"w100",placeholder:"\u641C\u7D22",type:"text",value:vt,onChange:function(bn){qt.setState({searchValue:bn.target.value})}})),m.createElement(Te.Z,{className:"flex"},Lt.map(function(Xt){return qt.renderGroupingItem(Xt)})))),m.createElement("div",{className:"btnBox"},m.createElement("button",{className:"btnCancel",onClick:ht},_l("\u53D6\u6D88")),m.createElement("button",{onClick:function(){return Qe(mt)},disabled:!mt,className:q()("btnOk",{btnDel:!!mt})},_l("\u5220\u9664"))))}}]),Vt}(m.Component),K.propTypes={},K.defaultProps={},ye),se=t(5232),de=t(11105),U=t(10509),pe=t(91516),Y=t(66261),be=t(13711),Q=t(29314),Le=t(22013),Be=t(45697),ke=t.n(Be),Ie=t(50685);const he=Ie.Z;var Re=t(42723),ue=t(5167),we=t(15577);function Ee(In){var Vt=In.appItem,Yt=(0,Re.Z)(In,["appItem"]),qt=Yt.sheetListVisible,rt=Yt.isCharge,Qe=Yt.activeSheetId,ht=Yt.appPkg,Lt=Vt.workSheetId,Ct=Vt.icon,mt=Vt.iconUrl,vt=Vt.status,Xt=Vt.layerIndex,bn=Vt.items,pn=bn===void 0?[]:bn,Rn=ht.id,fe=ht.iconColor,$n=ht.viewHideNavi,gn=ht.currentPcNaviStyle,en=ht.themeType,_t=ht.displayIcon,nn=_t===void 0?"":_t,Gt=ht.hideFirstSection,xt=(0,we.T3)(Rn,Lt).name||Vt.workSheetName,Mt=Lt+"-open",ze=ht.permissionType===2,yt=(rt||ze)&&$n?pn:pn.filter(function(ma){return[1,4].includes(ma.status)&&!ma.navigateHide}),Ut=!!_.find(yt,{workSheetId:Qe}),Wt=[1,3].includes(gn)&&!["light"].includes(en),kn=(0,m.useState)(localStorage.getItem(Mt)?!0:Ut),on=(0,oe.Z)(kn,2),En=on[0],fn=on[1],jn=(0,m.useState)(!1),Ta=(0,oe.Z)(jn,2),zn=Ta[0],pa=Ta[1],Ea=(0,m.useState)(!1),la=(0,oe.Z)(Ea,2),Kn=la[0],sa=la[1],ba=!En&&Ut,Fa=gn===3&&Gt&&Vt.firstGroupIndex===0?!0:nn.split("")[1]==="1";(0,m.useEffect)(function(){qt||fn(!1)},[qt]);var wa=function(){return Wt?"rgba(255, 255, 255, "+.9+")":[1,3].includes(gn)?ba||["light"].includes(en)?fe:"#757575":ba?fe:"#757575"},Na=function(){return[1,3].includes(gn)&&!["light"].includes(en)?en==="theme"?"rgba(0, 0, 0, 0.15)":"rgba(255, 255, 255, 0.15)":(0,pe.i)(fe)},Za=function(){return yt.map(function(fa,Ma){return m.createElement(pe.Z,(0,e.default)({key:fa.workSheetId,className:q()({pLeft40:qt}),disableTooltip:!0,appItem:(0,e.default)({},fa,{parentId:Lt,parentStatus:vt,layerIndex:Xt+1,isAppItem:fa.type!==2,index:Ma})},Yt))})},ya=function(){var fa="visibility_off";return vt===3&&(fa="desktop_off"),vt===4&&(fa="mobile_off"),[2,3,4].includes(vt)&&m.createElement(h.Z,{popupPlacement:"right",text:m.createElement("span",null,_l("\u4EC5\u7CFB\u7EDF\u89D2\u8272\u5728\u5BFC\u822A\u4E2D\u53EF\u89C1\uFF08\u5305\u542B\u7BA1\u7406\u5458\u3001\u5F00\u53D1\u8005\uFF09\uFF0C\u5E94\u7528\u9879\u6743\u9650\u4F9D\u7136\u9075\u5FAA\u89D2\u8272\u6743\u9650\u539F\u5219"))},m.createElement(k.Z,{className:"Font16 mRight10 visibilityIcon",icon:fa,style:{color:[1,3].includes(gn)&&en==="theme"?"#FCD8D3":"#ee6f09"}}))},An=function(){return m.createElement(se.Z,{appItem:Vt,appPkg:ht,isCharge:rt,onDragEnd:function(){window.dragNow=null}},m.createElement("div",{className:q()("workSheetItem flexRow workSheetGroup","workSheetItem-"+Lt),onClick:function(Ma){if(qt){var Ya=Ma.target.classList;(Ya.contains("nameWrap")||Ya.contains("name")||Ya.contains("arrowIcon"))&&(fn(!En),En?localStorage.removeItem(Mt):localStorage.setItem(Mt,1))}else pa(!zn)},onMouseDown:function(){window.dragNow=Date.now()},onMouseMove:function(){var Ma=Date.now();window.dragNow&&Ma-window.dragNow>50&&(sa(!0),fn(!1))},onMouseUp:function(){window.dragNow=null,sa(!1)},style:{backgroundColor:ba&&Na()}},m.createElement("div",{className:"NoUnderline valignWrapper h100 nameWrap"},Fa&&m.createElement("div",{className:"iconWrap mRight10"},m.createElement(j.Z,{url:mt||md.global.FileStoreConfig.pubHost+"/customIcon/"+Ct+".svg",fill:wa(),size:22})),m.createElement("span",{className:q()("name ellipsis Font14 mRight10",{bold:ba}),title:xt,style:{color:Wt?"rgba(255, 255, 255, "+(gn===3?.9:1)+")":ba?fe:void 0}},xt),ya()),rt&&m.createElement(ue.Z,(0,e.default)({},In,{isGroup:!0}),m.createElement("div",{className:"rightArea mRight10 moreBtn"},m.createElement(k.Z,{icon:"more_horiz",className:"Font18 moreIcon"}))),qt&&(En?m.createElement(k.Z,{className:"Font16 arrowIcon",icon:"arrow-up-border"}):m.createElement(k.Z,{className:"Font16 arrowIcon",icon:"arrow-down-border"}))),qt&&m.createElement("div",{className:q()("groupItems overflowHidden",{hide:Kn}),style:{height:En&&yt.length?yt.length*44+1:0}},Za()))};return m.createElement(m.Fragment,null,qt?An():m.createElement(Q.Z,{popupVisible:yt.length?zn:!1,onPopupVisibleChange:pa,action:["hover"],popupAlign:{points:["tl","tr"],offset:[0,-5],overflow:{adjustX:!0,adjustY:!0}},popup:m.createElement("div",{className:"card z-depth-2 pTop5 pBottom5"},m.createElement("div",{className:"workSheetLeft BorderRight0"},Za()))},m.createElement("div",null,An())))}var b=[{icon:"plus",text:_l("\u4ECE\u7A7A\u767D\u521B\u5EFA%02008"),createType:"worksheet"},{icon:"new_excel",text:_l("\u4ECEExcel\u521B\u5EFA%02007"),createType:"importExcel"}],le=[{icon:"plus",text:_l("\u4ECE\u7A7A\u767D\u521B\u5EFA%02008"),createType:"worksheet"},{icon:"new_excel",text:_l("\u4ECEExcel\u521B\u5EFA%02007"),createType:"importExcel"},{icon:"dashboard",text:_l("\u521B\u5EFA\u81EA\u5B9A\u4E49\u9875\u9762%02006"),createType:"customPage"},{icon:"add-files",text:_l("\u5206\u7EC4%02005"),createType:"group"}];function ae(In){var Vt=In.isCharge,Yt=In.isUnfold,qt=In.projectId,rt=In.appId,Qe=In.groupId,ht=In.sheetListActions,Lt=In.getSheetList,Ct=(0,m.useState)(!1),mt=(0,oe.Z)(Ct,2),vt=mt[0],Xt=mt[1],bn=(0,m.useState)(""),pn=(0,oe.Z)(bn,2),Rn=pn[0],fe=pn[1],$n=(0,m.useState)(!1),gn=(0,oe.Z)($n,2),en=gn[0],_t=gn[1];(0,m.useEffect)(function(){return window.__worksheetLeftReLoad=Lt,function(){delete window.__worksheetLeftReLoad}},[]);var nn=function(Mt,ze){ht.createAppItem((0,e.default)({appId:rt,groupId:Qe,type:Mt},ze)),fe("")},Gt=function(Mt){if(Mt==="importExcel"){Xt(!1),_t(!0);return}if(Mt==="group"){ht.addAppSection({appId:rt,groupId:Qe}),Xt(!1);return}fe(Mt),Xt(!1)};return m.createElement(m.Fragment,null,Vt&&m.createElement(Q.Z,{forceRender:!0,popupVisible:vt,onPopupVisibleChange:Xt,action:["click"],popupAlign:{points:["tl","bl"],offset:[10,0],overflow:{adjustX:!0,adjustY:!0}},popup:m.createElement("div",{className:"createNewMenu"},m.createElement(L.Z,null,le.map(function(xt,Mt){return m.createElement(m.Fragment,{key:Mt},xt.createType==="customPage"&&m.createElement("div",{className:"spaceLine mTop4 mBottom4"}),xt.createType==="worksheet"&&m.createElement("div",{className:"Gray_9e pLeft12 pTop7 pBottom3"},_l("\u5DE5\u4F5C\u8868")),xt.subList?m.createElement(Q.Z,{getPopupContainer:function(){return document.querySelector(".createWorksheetApp .Item-content")},action:["hover"],popupAlign:{points:["tl","tr"],offset:[0,-5]},popup:m.createElement(L.Z,{className:"createNewMenu subMenu"},xt.subList.map(function(ze){return m.createElement(I.Z,{key:ze.createType,onClick:function(){return Gt(ze.createType)}},m.createElement(k.Z,{icon:ze.icon,className:"Font18 Gray_9e"}),m.createElement("span",{className:"mLeft20"},ze.text))}))},m.createElement(I.Z,{className:"createWorksheetApp",key:xt.createType},m.createElement(k.Z,{icon:xt.icon,className:"Font18"}),m.createElement("span",{className:"mLeft20"},xt.text),m.createElement(k.Z,{icon:"arrow-right-tip",className:"Font15"}))):m.createElement(I.Z,{key:xt.createType,onClick:function(){Gt(xt.createType)}},m.createElement(k.Z,{icon:xt.icon,className:"Font18"}),m.createElement("span",{className:"mLeft20"},xt.text)))})))},m.createElement("div",{id:"createCustomItem",className:q()("newWorkSheet pAll12 pLeft15 pointer mLeft2",{active:vt})},m.createElement(h.Z,{disable:Yt,popupPlacement:"right",text:m.createElement("span",null,_l("\u65B0\u5EFA"))},m.createElement(k.Z,{icon:"add",className:"mRight10 Font20 pointer"})),m.createElement("span",{className:"Font14 text"},_l("\u65B0\u5EFA")))),!!Rn&&m.createElement(be.Z,{type:Rn,onCreate:nn,onCancel:function(){return Gt("")}}),en&&m.createElement(Y.Z,{projectId:qt,appId:rt,groupId:Qe,onCancel:function(){return _t(!1)},createType:"worksheet",refreshPage:function(){Lt({appId:rt,appSectionId:Qe})}}))}var ve=t(96486),W=t.n(ve),ce,Z,_e;function P(){var In={},Vt=window.localStorage.getItem("worksheet_left_projectfolded_"+md.global.Account.accountId);if(!Vt)return In;try{In=JSON.parse(Vt)}catch(Yt){return{}}return In}var xe=(Z=ce=function(In){(0,z.default)(Vt,In);function Vt(Yt){(0,r.default)(this,Vt);var qt=(0,a.default)(this,(Vt.__proto__||E()(Vt)).call(this,Yt));return _e.call(qt),qt.state={projectFolded:P()},qt}return(0,R.default)(Vt,[{key:"componentWillUnmount",value:function(){this.props.sheetListActions.updateSheetListLoading(!0),this.props.sheetListActions.clearSheetList()}},{key:"componentWillReceiveProps",value:function(qt){qt.groupId!==this.props.groupId&&this.getSheetList(qt),W().isEqual(qt.groupData,this.props.groupData)||this.getSheetList(qt)}},{key:"renderSheetAppItem",value:function(qt,rt,Qe){var ht=this.props,Lt=ht.groupId,Ct=ht.firstGroupIndex,mt=qt.type!==2,vt=mt?pe.Z:Ee;return qt.layerIndex=1,qt.isAppItem=mt,qt.parentId=Lt,qt.index=Qe,qt.firstGroupIndex=Ct,m.createElement(vt,(0,e.default)({key:qt.workSheetId,appItem:qt},rt))}},{key:"renderContent",value:function(qt){var rt=this,Qe=this.props,ht=Qe.worksheetId,Lt=Qe.isCharge,Ct=Qe.appPkg,mt=Qe.secondLevelGroup,vt=mt===void 0?!1:mt,Xt=this.props,bn=Xt.appId,pn=Xt.projectId,Rn=Xt.groupId,fe=Xt.sheetListActions,$n=vt?m.Fragment:Te.Z,gn=Ct.currentPcNaviStyle===0?this.props.isUnfold:!0,en={appId:bn,groupId:Rn,sheetList:qt,activeSheetId:ht,sheetListActions:fe,isCharge:Lt,sheetListVisible:gn,appPkg:Ct,projectId:pn};return m.createElement(m.Fragment,null,m.createElement("div",{className:"flex flexColumn"},m.createElement($n,null,m.createElement(de.W,{key:"navigationList",context:window,backend:U.PD},qt.map(function(_t,nn){return rt.renderSheetAppItem(_t,en,nn)})),!vt&&m.createElement(ae,{isCharge:Lt,isUnfold:gn,projectId:pn,appId:bn,groupId:Rn,sheetListActions:fe,getSheetList:this.getSheetList}))),!vt&&m.createElement("div",{className:"unfoldWrap TxtRight"},m.createElement(h.Z,{text:m.createElement("span",null,gn?_l("\u6536\u8D77\u5BFC\u822A"):_l("\u5C55\u5F00\u5BFC\u822A"))},m.createElement(k.Z,{icon:gn?"menu_left":"menu_right",className:"Font20 Gray_9e pointer unfoldIcon",onClick:function(){safeLocalStorageSetItem("sheetListIsUnfold",!gn),fe.updateSheetListIsUnfold(!gn)}}))))}},{key:"render",value:function(){var qt=this,rt=this.props,Qe=rt.worksheetId,ht=rt.loading,Lt=rt.isUnfold,Ct=rt.guidanceVisible,mt=rt.secondLevelGroup,vt=mt===void 0?!1:mt,Xt=rt.appPkg,bn=this.data,pn=W().find(bn,{workSheetId:Qe})||{},Rn=(0,we.FL)(),fe=Rn.ln;return m.createElement("div",{className:q()("workSheetLeft flexRow",{workSheetLeftHide:Xt.currentPcNaviStyle===0?!Lt&&fe:!1,hide:!fe})},vt?this.renderContent(bn):ht||W().isEmpty(bn)?m.createElement(C.Z,{active:!0}):this.renderContent(bn),Ct&&pn.type===0&&m.createElement(he,{sheetListVisible:Lt,onClose:function(){qt.props.sheetListActions.updateGuidanceVisible(!1)}}))}},{key:"data",get:function(){var qt=this.props,rt=qt.data,Qe=qt.isCharge,ht=qt.appPkg,Lt=ht.permissionType===2,Ct=Qe||Lt?function(mt){return!0}:function(mt){return!(mt.type===2&&W().isEmpty(mt.items))};return(Qe||Lt)&&ht.viewHideNavi?rt:rt.filter(function(mt){return[1,4].includes(mt.status)&&!mt.navigateHide}).filter(Ct)}}]),Vt}(m.Component),ce.propTypes={worksheetId:ke().string,sheetListActions:ke().object,sheetList:ke().array,activeSheetId:ke().string},_e=function(){var Vt=this;this.componentWillMount=function(){this.getSheetList(this.props)},this.getSheetList=function(Yt){var qt=Yt||Vt.props,rt=qt.appId,Qe=qt.groupId,ht=qt.groupData;ht?(Vt.props.sheetListActions.updateSheetList(ht),Vt.props.sheetListActions.updateSheetListLoading(!1)):rt&&Qe&&Vt.props.sheetListActions.getSheetList({appId:rt,appSectionId:Qe})}},Z),bt=function(Vt){return{sheetListActions:(0,me.DE)(J,Vt),dispatch:Vt}},tt=function(Vt){return{data:Vt.sheetList.data,loading:Vt.sheetList.loading,isUnfold:Vt.sheetList.isUnfold,guidanceVisible:Vt.sheetList.guidanceVisible}};const Dt=(0,i.$j)(tt,bt)(xe);function vn(In,Vt){var Yt=In.appId,qt=In.projectId,rt=In.groupId,Qe=In.worksheetId,ht=In.isCharge,Lt=In.appPkg,Ct=In.groupData,mt=In.firstGroupIndex,vt=(0,m.useMemo)(Le.x,[]);(0,m.useImperativeHandle)(Vt,function(){return{dispatch:vt.dispatch,getState:vt.getState}});var Xt=vt.getState(),bn=Xt.sheetList;return m.createElement(i.zt,{store:vt},m.createElement(Dt,{appId:Yt,projectId:qt,groupId:rt,worksheetId:Qe,isCharge:ht,appPkg:Lt,groupData:Ct,firstGroupIndex:mt,secondLevelGroup:!0}))}const Fe=(0,m.forwardRef)(vn);var Bt=t(60876),kt=t(89499),Tt=t(13714),tn=t(71893),Vn=t(49365),Zn="@ADD/GROUP",Ot=[{type:"rename",icon:"edit",text:_l("\u91CD\u547D\u540D%02011")},{type:"addAfter",icon:"add",text:_l("\u5728\u6B64\u540E\u6DFB\u52A0\u5206\u7EC4%02010")},{type:"del",icon:"delete2",text:_l("\u5220\u9664\u5206\u7EC4%02009"),className:"delApp"}],$t="@DEFAULT/CREATE",cn=_l("\u672A\u547D\u540D\u5206\u7EC4"),Mn=100,dt=[{type:"modify",icon:"edit",text:_l("\u540D\u79F0\u548C\u5916\u89C2%02052"),action:"modifyAppIconAndNameVisible"},{type:"editNavigation",icon:"custom_navigation",action:"navigationConfigVisible",text:_l("\u5BFC\u822A\u8BBE\u7F6E%02051")},{type:"editIntro",icon:"info",text:_l("\u7F16\u8F91\u5E94\u7528\u8BF4\u660E%02050"),action:"editAppIntroVisible"},{type:"appAnalytics",icon:"poll",text:_l("\u4F7F\u7528\u5206\u6790%02049"),action:"appAnalyticsVisible",featureId:17},{type:"appLogs",icon:"wysiwyg",text:_l("\u65E5\u5FD7"),featureId:31},{type:"copy",icon:"content-copy",text:_l("\u590D\u5236"),action:"copyAppVisible"},{type:"modifyAppLockPassword",icon:"lock",text:_l("\u89E3\u9501\u5E94\u7528%02048"),action:"modifyAppLockPasswordVisible"},{type:"appManageMenu",icon:"custom_widgets",text:_l("\u5E94\u7528\u7BA1\u7406"),action:"toAppManageMenu"},{type:"worksheetapi",icon:"worksheet_API",text:_l("API\u5F00\u53D1\u6587\u6863%02043"),action:"goWorksheetapi",featureId:21}],$e={100:"manage_accounts",2:"account_box",1:"construction"},jt=tn.ZP.div(function(In){var Vt=In.borderColor;return`
  border-radius: 16px;
  height: 30px;
  &:hover,
  &.active {
    border: 1px solid `+Vt+` !important;
  }
`}),rn={},Rt=function(Vt){var Yt=Vt.projectId,qt=Vt.sheet,rt=Vt.appPkg,Qe=Vt.ids,ht=Vt.item,Lt=Vt.unfoldAppSectionId,Ct=Vt.appSectionDetail,mt=Vt.onUpdateAppSectionItem,vt=Vt.onDelAppSection,Xt=rt.iconColor,bn=rt.currentPcNaviStyle,pn=rt.themeType,Rn=rt.expandType,fe=(0,m.useState)(ht.edit||!1),$n=(0,oe.Z)(fe,2),gn=$n[0],en=$n[1],_t=!!(0,kt.D4)(Qe.worksheetId,ht.items),nn=function(){return bn===3?ht.index===0&&(rt.hideFirstSection||W().isEmpty(ht.workSheetName))&&!ht.edit:Ct.length===1&&W().isEmpty(ht.workSheetName)&&!ht.edit},Gt=ht.workSheetId+"-hide",xt=function(){return bn===3?(rt.hideFirstSection||W().isEmpty(ht.workSheetName))&&ht.index===0?!0:Rn===1?_t:localStorage.getItem(Gt)?!1:Rn===0:!localStorage.getItem(Gt)},Mt=(0,m.useState)(xt()),ze=(0,oe.Z)(Mt,2),yt=ze[0],Ut=ze[1],Wt=(0,m.useState)(!1),kn=(0,oe.Z)(Wt,2),on=kn[0],En=kn[1],fn=(0,m.useState)(!1),jn=(0,oe.Z)(fn,2),Ta=jn[0],zn=jn[1],pa=(0,m.useState)(!1),Ea=(0,oe.Z)(pa,2),la=Ea[0],Kn=Ea[1],sa=(0,m.useState)(!1),ba=(0,oe.Z)(sa,2),Fa=ba[0],wa=ba[1],Na=(0,m.useState)(""),Za=(0,oe.Z)(Na,2),ya=Za[0],An=Za[1],ma=!yt&&_t,fa=(0,m.useRef)();(0,m.useEffect)(function(){var La="AppSectionRef-"+ht.workSheetId;return rn[La]=fa,function(){delete rn[La]}},[]),(0,m.useEffect)(function(){en(ht.edit)},[ht.edit]),(0,m.useEffect)(function(){var La=ht.index===0&&rt.hideFirstSection&&!ht.edit;Lt&&bn===3&&!La&&Rn===1&&Lt!==ht.workSheetId&&Ut(!1)},[Lt]);var Ma=function(){return[1,3].includes(bn)&&!["light"].includes(pn)?pn==="theme"?"rgba(0, 0, 0, 0.15)":"rgba(255, 255, 255, 0.15)":(0,pe.i)(Xt)},Ya=function(Qa,nr){var Rr=zt(ht.workSheetId);Rr.dispatch((0,J.createAppItem)((0,e.default)({appId:Qe.appId,groupId:ht.workSheetId,type:Qa},nr))),An("")},Ba=function(){return m.createElement(L.Z,{className:"worksheetItemOperate"},m.createElement(I.Z,{icon:m.createElement(k.Z,{icon:"edit",className:"Font16"}),onClick:function(){en(!0),En(!1)}},m.createElement("span",{className:"text"},_l("\u91CD\u547D\u540D"))),m.createElement("hr",{className:"splitter"}),m.createElement("div",{class:"Gray_9e pLeft12 pTop7 pBottom3"},_l("\u65B0\u5EFA")),m.createElement(I.Z,{onClick:function(){An("worksheet"),En(!1)}},m.createElement(k.Z,{icon:"plus",className:"Font18"}),m.createElement("span",{className:"text"},_l("\u4ECE\u7A7A\u767D\u521B\u5EFA\u5DE5\u4F5C\u8868"))),m.createElement(I.Z,{onClick:function(){Kn(!0),En(!1)}},m.createElement(k.Z,{icon:"new_excel",className:"Font18"}),m.createElement("span",{className:"text"},_l("\u4ECEExcel\u521B\u5EFA\u5DE5\u4F5C\u8868"))),m.createElement(I.Z,{icon:m.createElement(k.Z,{icon:"dashboard",className:"Font18"}),onClick:function(){An("customPage"),En(!1)}},m.createElement("span",{className:"text"},_l("\u81EA\u5B9A\u4E49\u9875\u9762"))),m.createElement(I.Z,{icon:m.createElement(k.Z,{icon:"add-files",className:"Font16"}),onClick:function(){Ut(!0),fa.current.dispatch((0,J.addAppSection)({appId:Qe.appId,groupId:ht.workSheetId})),En(!1)}},m.createElement("span",{className:"text"},_l("\u5B50\u5206\u7EC4"))),m.createElement("hr",{className:"splitter"}),m.createElement(I.Z,{icon:m.createElement(k.Z,{icon:"delete2",className:"Font16"}),className:"delete",onClick:function(){Ct.length===1||W().isEmpty(ht.items)?vt(ht.workSheetId):zn(!0),En(!1)}},m.createElement("span",{className:"text"},_l("\u5220\u9664\u5206\u7EC4"))))};return m.createElement("div",{className:q()("appGroupWrap",{treeAppGroupWrap:bn===3&&!nn(),hideFirstSection:bn===3&&rt.hideFirstSection&&ht.index===0})},m.createElement(se.Z,{appItem:ht,appPkg:rt,isCharge:qt.isCharge,onDragEnd:function(){window.dragNow=null}},!nn()&&m.createElement("div",{className:q()("appGroup flexRow alignItemsCenter pointer",{hover:on,close:(bn===1?!yt:!0)||Fa}),style:{backgroundColor:ma&&Ma()},onClick:function(Qa){var nr=Qa.target.classList;(nr.contains("appGroup")||nr.contains("nameWrap")||nr.contains("arrowIcon"))&&(Vt.setUnfoldAppSectionId(yt?null:ht.workSheetId),setTimeout(function(){Ut(!yt),yt?localStorage.setItem(Gt,1):localStorage.removeItem(Gt)},0))},onMouseDown:function(){window.dragNow=Date.now()},onMouseMove:function(){var Qa=Date.now();window.dragNow&&Qa-window.dragNow>50&&(wa(!0),Ut(!1))},onMouseUp:function(){window.dragNow=null,wa(!1)}},m.createElement("div",{className:"flex ellipsis bold nameWrap flexRow alignItemsCenter"},gn?m.createElement("input",{autoFocus:!0,className:"w100 editInput",defaultValue:ht.workSheetName,onBlur:function(Qa){en(!1),mt(ht,{workSheetName:Qa.target.value,edit:!1})},onKeyDown:function(Qa){Qa.which===13&&(en(!1),mt(ht,{workSheetName:Qa.target.value,edit:!1}))}}):m.createElement(m.Fragment,null,bn===3&&m.createElement(j.Z,{url:ht.iconUrl?ht.iconUrl:md.global.FileStoreConfig.pubHost+"/customIcon/"+ht.icon+".svg",fill:["light"].includes(pn)?rt.iconColor:"#fff",size:22,className:"mRight10"}),(0,we.T3)(Qe.appId,ht.workSheetId).name||ht.workSheetName||_l("\u672A\u547D\u540D\u5206\u7EC4"))),!gn&&m.createElement(m.Fragment,null,qt.isCharge&&m.createElement(Q.Z,{popupVisible:on,onPopupVisibleChange:En,action:["click"],popup:Ba(),popupAlign:{points:["tl","bl"],offset:[1,1],overflow:{adjustX:!0,adjustY:!0}}},m.createElement("div",{className:"moreWrap"},m.createElement(k.Z,{icon:"more_horiz",className:"Font18 moreIcon"}))),m.createElement(k.Z,{className:"Font16 arrowIcon",icon:yt?"arrow-up-border":"arrow-down-border"}))),m.createElement("div",{className:q()({hide:!yt||Fa})},m.createElement(Fe,{ref:fa,projectId:Yt,appId:Qe.appId,groupData:ht.items,groupId:ht.workSheetId,worksheetId:Qe.worksheetId,isCharge:qt.isCharge,appPkg:rt,firstGroupIndex:ht.index}))),Ta&&m.createElement(v,{data:Ct.filter(function(La){return La.workSheetId!==ht.workSheetId}),onOk:function(Qa){vt(ht.workSheetId,Qa),zn(!1)},onCancel:function(){return zn(!1)}}),!!ya&&m.createElement(be.Z,{type:ya,onCreate:Ya,onCancel:function(){return An("")}}),la&&m.createElement(Y.Z,{projectId:Yt,appId:Qe.appId,groupId:ht.workSheetId,onCancel:function(){return Kn(!1)},createType:"worksheet",refreshPage:function(){var Qa=zt(ht.workSheetId);Qa.dispatch((0,J.getSheetList)({appId:Qe.appId,appSectionId:ht.workSheetId}))}}))},St=function(Vt){var Yt=Vt.appSectionDetail,qt=Vt.appPkg,rt=Vt.showRoleDebug,Qe=rt===void 0?function(){}:rt,ht=Vt.roleSelectValue,Lt=ht===void 0?[]:ht,Ct=Vt.roleDebugVisible,mt=Vt.updateALLSheetList,vt=Vt.clearSheetList,Xt=Vt.getAllAppSectionDetail,bn=(0,m.useState)(!0),pn=(0,oe.Z)(bn,2),Rn=pn[0],fe=pn[1],$n=(0,m.useState)(null),gn=(0,oe.Z)($n,2),en=gn[0],_t=gn[1],nn=(0,Bt.s3)(Vt);(0,m.useEffect)(function(){return window.updateAppGroups=Gt,Gt(),function(){mt([]),vt(),delete window.updateAppGroups}},[nn.appId]);var Gt=function(){var Wt=nn.appId;md.global.Account.isPortal&&(Wt=md.global.Account.appId),Wt&&(fe(!0),Xt(Wt,function(){fe(!1)}))},xt=function(Wt,kn){kn.workSheetName&&(mt(Yt.map(function(on){return on.workSheetId===Wt.workSheetId?(0,e.default)({},on,kn):on})),y.Z.updateAppSectionName({appId:nn.appId,appSectionId:Wt.workSheetId,name:kn.workSheetName}).then(function(on){on.data||alert(_l("\u7F16\u8F91\u5931\u8D25"),2)}))},Mt=function(Wt,kn){var on=Yt.map(function(zn){return(0,e.default)({},zn,{items:oa(zn.appSectionId)})});if(on.length===1){mt(on.map(function(zn){return Ne()({},zn,{workSheetName:""})})),y.Z.updateAppSectionName({appId:nn.appId,appSectionId:Wt,name:""}).then(function(zn){});return}var En=W().find(on,{workSheetId:Wt}),fn=En.items,jn=fn===void 0?[]:fn,Ta=on.filter(function(zn){return zn.workSheetId!==Wt}).map(function(zn){return zn.workSheetId===kn?(0,e.default)({},zn,{items:zn.items.concat(jn)}):zn});mt(Ta),y.Z.deleteAppSection({appId:nn.appId,appSectionId:Wt,sourceAppSectionId:kn}).then(function(zn){zn.data||alert(_l("\u5220\u9664\u5931\u8D25"),2)})},ze=function(){return qt.iconColor?(0,Tt.default)(qt.iconColor).setAlpha(.3).toRgbString():"rgba(255, 255, 255, 0.3)"},yt=Yt.length===1&&W().isEmpty(Yt[0].items)&&W().isEmpty(Yt[0].workSheetName)&&!Yt[0].edit;return m.createElement(m.Fragment,null,m.createElement("div",{className:"LeftAppGroupWrap flex w100 flexColumn Relative"},Rn?m.createElement(C.Z,{className:"w100 h100",active:!0}):m.createElement(m.Fragment,null,yt&&m.createElement(C.Z,{className:"w100 h100 Absolute"}),m.createElement(de.W,{key:"navigationList",context:window,backend:U.PD},m.createElement(Te.Z,{className:q()({hide:yt})},Yt.map(function(Ut,Wt){return m.createElement(Rt,(0,e.default)({key:Ut.workSheetId,ids:nn,skeletonVisible:yt,item:(0,e.default)({},Ut,{index:Wt}),unfoldAppSectionId:en,setUnfoldAppSectionId:_t,appSectionDetail:Yt},Vt,{onUpdateAppSectionItem:xt,onDelAppSection:Mt}))}))))),(qt.debugRole||{}).canDebug&&m.createElement("div",{className:"mBottom2 pLeft12 pRight12 w100"},m.createElement(jt,{className:q()("pLeft16 pRight12 valignWrapper roleSelectCon Hand",{active:Ct}),onClick:function(Wt){return Qe()},borderColor:ze()},m.createElement("span",{className:"overflow_ellipsis flex bold valignWrapper LineHeight20"},Lt.length===1&&$e[Lt[0].roleType]&&m.createElement(k.Z,{icon:$e[Lt[0].roleType],className:"icon mRight6 Font16"}),Lt.length===0?_l("\u9009\u62E9\u89D2\u8272"):Lt.length===1?Lt[0].name:_l("%0\u4E2A\u89D2\u8272",Lt.length)),m.createElement(h.Z,{disable:!Lt.length,placement:"bottom",text:_l("\u6E05\u7A7A\u8C03\u8BD5")},m.createElement(k.Z,{icon:Lt.length?"cancel":"expand_more",className:"Font16 roleSelectIcon",onClick:function(Wt){Lt.length&&Wt.stopPropagation(),Lt.length&&Vn.Z.setDebugRoles({appId:nn.appId,roleIds:[]}).then(function(kn){kn&&window.location.reload()})}})))))},zt=function(Vt){var Yt=rn["AppSectionRef-"+Vt]||{};return Yt.current},oa=function(Vt){var Yt=zt(Vt);return Yt?Yt.getState().sheetList.data:[]};const qn=(0,i.$j)(function(In){return{appSectionDetail:In.sheetList.appSectionDetail}},function(In){return(0,me.DE)({getAllAppSectionDetail:J.getAllAppSectionDetail,updateALLSheetList:J.updateALLSheetList,clearSheetList:J.clearSheetList},In)})(St)},80204:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>Ie});var h=t(55055),Te=t(62443),C=t(97373),Ce=t(94055),Ne=t(33867),j=t(88239),L=t(85105),I=t.n(L),k=t(99663),e=t(22600),oe=t(49135),m=t(93196),y=t(67294),i=t(93967),me=t.n(i),J=t(55992),T=t(23098),te=t(7452),E=t(22177),r=t(50533),R=t(22013),a=t(729),z=t(90570),N=t(11875),q=t(15742),K=t(27167),ye=t(25087),v=t(15577),se=t(36021),de=t(96486),U=t.n(de),pe,Y,be,Q=(0,v.Q9)(),Le=!0,Be=(Y=pe=function(he){(0,m.default)(Re,he);function Re(ue){(0,k.default)(this,Re);var we=(0,oe.default)(this,(Re.__proto__||I()(Re)).call(this,ue));return be.call(we),we.state={dialogVisible:!1,reportData:{},loading:!0,settingVisible:!0,scopeVisible:!1,sheetVisible:!1,isLinkageFilter:!0,activeData:void 0},we.isPublicShare=window.shareAuthor||U().get(window,"shareState.shareId"),we}return(0,e.default)(Re,[{key:"componentDidMount",value:function(){this.getData(this.props)}},{key:"componentWillReceiveProps",value:function(we){(we.needUpdate!==this.props.needUpdate||!U().isEqual(we.filtersGroup,this.props.filtersGroup)||!U().isEqual(we.linkageFiltersGroup,this.props.linkageFiltersGroup))&&this.getData(we)}},{key:"renderChart",value:function(){var we=this.props,Ee=we.projectId,b=we.report,le=we.mobileCount,ae=we.mobileFontSize,ve=we.layoutType,W=we.sourceType,ce=we.themeColor,Z=we.customPageConfig,_e=Z===void 0?{}:Z,P=this.props,xe=P.pageEditable,bt=xe===void 0?!1:xe,tt=P.linkageMatch,Dt=tt===void 0?{}:tt,vn=P.onUpdateLinkageFiltersGroup,Fe=vn===void 0?U().noop:vn,Bt=b.id,kt=this.state,Tt=kt.loading,tn=kt.reportData,Vn=tn.reportType,Zn=ye.Z[Vn];return y.createElement(E.Z,null,y.createElement(Zn,{projectId:Ee,loading:Tt,isThumbnail:!0,isViewOriginalData:!this.isPublicShare,isLinkageData:W===1&&_e.autoLinkage&&!bt,onOpenChartDialog:this.handleOpenChartDialog,onUpdateLinkageFiltersGroup:Fe,mobileCount:le,mobileFontSize:ae,layoutType:ve,sourceType:W,customPageConfig:_e,themeColor:ce,reportData:(0,j.default)({},tn,{reportId:Bt}),linkageMatch:Dt}))}},{key:"renderContent",value:function(){var we=this.state.reportData,Ee=we.reportType,b=we.map,le=we.contrastMap,ae=we.contrast,ve=we.data;if([z.f0.BarChart,z.f0.LineChart,z.f0.RadarChart,z.f0.FunnelChart,z.f0.DualAxes,z.f0.CountryLayer,z.f0.BidirectionalBarChart,z.f0.ScatterChart,z.f0.WordCloudChart,z.f0.TopChart].includes(Ee))return b.length||le.length?this.renderChart():y.createElement(N.Ll,null);if([z.f0.GaugeChart,z.f0.ProgressChart,z.f0.PieChart].includes(Ee))return U().isEmpty(b)?y.createElement(N.Ll,null):this.renderChart();if([z.f0.NumberChart].includes(Ee))return this.renderChart();if([z.f0.PivotTable].includes(Ee))return U().isEmpty(ve.data)?y.createElement(N.Ll,null):this.renderChart()}},{key:"renderBody",value:function(){var we=this.props.needRefresh,Ee=this.state,b=Ee.loading,le=Ee.reportData;return le.reportType===z.f0.CountryLayer&&we?y.createElement(y.Fragment,null,b&&y.createElement("div",{className:"fixedLoading"},y.createElement(N.gb,null)),le.status>0?this.renderContent():y.createElement(N.hO,{status:le.status})):y.createElement("div",{className:"content flexColumn"},b?y.createElement(N.gb,null):le.status>0?this.renderContent():y.createElement(N.hO,{status:le.status}))}},{key:"render",value:function(){var we=this,Ee=this.state,b=Ee.dialogVisible,le=Ee.reportData,ae=Ee.settingVisible,ve=Ee.scopeVisible,W=Ee.sheetVisible,ce=Ee.activeData,Z=Ee.isLinkageFilter,_e=le.displaySetup||{},P=_e.showTitle,xe=P===void 0?!0:P,bt=this.props,tt=bt.sourceType,Dt=bt.filtersGroup,vn=bt.linkageFiltersGroup,Fe=bt.initiateChartInfo,Bt=bt.customPageConfig,kt=Bt===void 0?{}:Bt,Tt=bt.themeColor,tn=this.props,Vn=tn.report,Zn=tn.appId,Ot=tn.pageId,$t=tn.ownerId,cn=tn.needEnlarge,Mn=tn.needRefresh,dt=Mn===void 0?!0:Mn,$e=tn.filters,jt=tn.className,rn=tn.onRemove,Rt=tn.isCharge,St=tn.permissionType,zt=tn.isLock,oa=tn.projectId,qn=tn.onCancelFavorite,In=tt?St>0:$t||Rt,Vt=![z.f0.PivotTable].includes(le.reportType);return y.createElement("div",{className:me()("statisticsCard statisticsCard-"+Vn.id+" statisticsCard-"+le.reportType,jt,{hideChartHeader:!xe,hideNumberChartName:!xe})},y.createElement("div",{className:"header"},(tt?!1:In)&&y.createElement("span",{"data-tip":_l("\u62D6\u62FD"),className:"iconItem dragWrap Gray_9e mRight5"},y.createElement(Ne.Z,{icon:"drag"})),y.createElement("div",{className:"flex valignWrapper",style:{minWidth:0}},y.createElement("div",{className:"pointer ellipsis bold reportName",style:{maxWidth:"80%"}},le.name),le.desc&&y.createElement(Ce.default,{title:le.desc,placement:"bottom"},y.createElement(Ne.Z,{icon:"info",className:"Font18 pointer Gray_9e mLeft7 reportDesc"})),tt&&!U().isEmpty(Fe)&&y.createElement(Te.Z,{visible:void 0,trigger:"click",placement:"bottom",overlayClassName:"customPageAutoLinkagePopoverWrap",content:y.createElement("div",{className:"customPageAutoLinkagePopover"},y.createElement("div",{className:"Font14 bold mBottom5"},_l("\u4F5C\u7528\u4E8E\u56FE\u8868\u7684\u6761\u4EF6")," \xB7 ",y.createElement("span",null,Fe.length)),Fe.map(function(Yt){return y.createElement("div",{className:"linkageFilter"},Yt.filters.map(function(qt,rt){return y.createElement("div",{className:"flexRow alignItemsCenter",key:qt.controlId},!rt&&y.createElement(Ne.Z,{className:"Font16 mRight5 ThemeColor",icon:U().find(a.og,{type:Yt.reportType}).icon}),y.createElement("div",{className:me()({mLeft20:rt}),dangerouslySetInnerHTML:{__html:_l("%0\u662F%1",'<span class="bold mRight2">'+qt.controlName+"</span>",'<span class="bold mLeft2">'+(qt.controlValue||"--")+"</span>")}}))}))}))},y.createElement("span",{className:me()("mLeft7 pTop5 filterCriteriaIcon",{"tip-bottom-right":!xe}),"data-tip":_l("\u4F5C\u7528\u4E8E\u56FE\u8868\u7684\u6761\u4EF6")},y.createElement(Ne.Z,{icon:"filter_criteria",className:"Font18 pointer Gray_9e"})))),y.createElement("div",{className:"operateIconWrap valignWrapper Relative"},cn&&!this.isPublicShare&&(tt?le.status>0:!0)&&y.createElement("span",{className:"iconItem Gray_9e","data-tip":_l("\u7B5B\u9009"),onClick:function(){we.setState({dialogVisible:!0,sheetVisible:!1,settingVisible:!1,scopeVisible:!0,activeData:void 0})}},y.createElement(Ne.Z,{className:"Font20",icon:"filter"})),dt&&le.status>0&&y.createElement("span",{onClick:function(){return we.getData(we.props,!0)},"data-tip":_l("\u5237\u65B0"),className:"iconItem Gray_9e freshDataIconWrap"},y.createElement(Ne.Z,{className:"Font20",icon:"refresh1"})),cn&&le.status>0&&y.createElement("span",{className:"iconItem Gray_9e","data-tip":_l("\u653E\u5927"),onClick:function(){we.handleOperateClick({settingVisible:!1,activeData:void 0})}},y.createElement(Ne.Z,{icon:"task-new-fullscreen"})),cn&&!this.isPublicShare&&(tt===3?!0:le.status>0)&&y.createElement(K.Z,{className:"iconItem Gray_9e Font20",projectId:oa,pageId:Ot,themeColor:Tt,permissions:In,permissionType:St,isLock:zt,isCharge:Rt,reportData:le,reportStatus:le.status,reportType:le.reportType,favorite:le.favorite,onCancelFavorite:qn,filter:le.filter,sourceType:tt,isMove:tt?!1:In&&Rt,onRemove:tt?!1:In&&rn,exportData:{filters:$e,filtersGroup:Dt,linkageFiltersGroup:Z&&vn},report:{id:Vn.id,name:le.name,desc:le.desc},ownerId:$t,appId:Zn,worksheetId:le.appId,onOpenSetting:(tt===1?Rt:In)?function(){we.handleOperateClick({settingVisible:!0,activeData:void 0})}:null,onSheetView:Vt?function(){we.setState({dialogVisible:!0,sheetVisible:!0,settingVisible:!1,scopeVisible:!1,activeData:void 0})}:null}))),this.renderBody(),b&&y.createElement(J.Z,(0,j.default)({},this.props,{linkageFiltersGroup:Z&&vn,report:(0,j.default)({},Vn,{name:le.name,desc:le.desc}),pageId:Ot,customPageConfig:kt,themeColor:Tt,activeData:ce,worksheetId:le.appId,settingVisible:ae,scopeVisible:ve,sheetVisible:W,permissions:In,dialogVisible:b,updateDialogVisible:function(qt){var rt=qt.dialogVisible,Qe=qt.isRequest,ht=qt.reportId,Lt=qt.reportName,Ct=qt.reportDesc;we.setState({dialogVisible:rt}),(Lt!==le.name||Ct!==le.desc)&&we.setState({reportData:(0,j.default)({},le,{name:Lt,desc:Ct})}),Qe&&we.getData((0,j.default)({},we.props,{report:{id:ht}}))},onRemove:rn})))}}]),Re}(y.Component),pe.defaultProps={needEnlarge:!0,needTimingRefresh:!0,onLoad:U().noop},be=function(){var Re=this;this.componentWillUnmount=function(){clearInterval(Re.timer),Re.abortRequest()},this.initInterval=function(){clearInterval(Re.timer);var ue=Re.props,we=ue.report,Ee=ue.customPageConfig,b=Ee===void 0?{}:Ee,le=b.refresh;le&&(Re.timer=setInterval(function(){Re.getData(Re.props,!1,!0),Le&&(Le=!1,T.Z.checkLogin({}).then(function(ae){Le=ae}))},le*1e3))},this.abortRequest=function(){Re.request&&Re.request.abort&&Re.request.abort()},this.getData=function(ue){var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,b=ue||Re.props,le=b.needTimingRefresh,ae=b.needRefresh,ve=ae===void 0?!0:ae,W=b.report,ce=b.filters,Z=b.filtersGroup,_e=b.linkageFiltersGroup,P=b.pageId,xe=b.sourceType,bt=Re.state.isLinkageFilter,tt=location.href.includes("printPivotTable")&&JSON.parse(sessionStorage.getItem("printFilter-"+W.id));Re.setState({loading:!0}),Re.abortRequest();var Dt=xe===3?"getFavoriteData":Ee?"refreshData":"getData";Re.request=te.Z[Dt]({reportId:W.id,pageId:P,version:"6.5",reload:we,filters:tt||[ce,Z,bt&&_e].filter(function(vn){return vn})}),Re.request.then(function(vn){Re.setState({reportData:(0,a.$Q)(vn),loading:!1}),Re.props.onLoad(vn)}),le&&ve&&Re.initInterval()},this.handleOperateClick=function(ue){var we=ue.settingVisible,Ee=ue.sheetVisible,b=Ee===void 0?!1:Ee,le=ue.activeData;Re.setState({dialogVisible:!0,settingVisible:we,scopeVisible:!1,sheetVisible:b,activeData:le})},this.handleOpenChartDialog=function(ue){var we=Re.props,Ee=we.report,b=we.filters,le=we.filtersGroup,ae=we.linkageFiltersGroup,ve=Re.state,W=ve.reportData,ce=ve.isLinkageFilter,Z=W.appId,_e=W.filter,P=W.style,xe=W.country,bt=_e.filterRangeId,tt=_e.rangeType,Dt=_e.rangeValue,vn=_e.dynamicFilter,Fe=_e.today,Bt=Fe===void 0?!1:Fe,kt=_e.customRangeValue,Tt=xe||{},tn=Tt.drillParticleSizeType,Vn=P&&P.viewDataType||1;Vn===2&&_e.viewId&&[q.B.sheet].includes(_e.viewType.toString())?te.Z.getReportSingleCacheId((0,j.default)({},ue,{appId:Z,filterRangeId:bt,rangeType:tt,rangeValue:Dt,dynamicFilter:vn,today:Bt,customRangeValue:kt,particleSizeType:tn,filters:[b,le,ce&&ae].filter(function(Zn){return Zn}),isPersonal:!0,reportId:Ee.id})).then(function(Zn){Zn.id&&window.open((0,se.IS)("/worksheet/"+Z+"/view/"+_e.viewId+"?chartId="+Zn.id+"&"+(0,v.tQ)()))}):Re.handleOperateClick({settingVisible:!1,sheetVisible:!0,activeData:ue})}},Y);function ke(he,Re){var ue=(0,y.useMemo)(R.x,[]);return(0,y.useImperativeHandle)(Re,function(){return{dispatch:ue.dispatch,getState:ue.getState}}),y.createElement(r.zt,{store:ue},y.createElement(Be,(0,j.default)({},he,{ref:he.$cardRef})))}const Ie=(0,y.forwardRef)(ke)},27167:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>Y});var h=t(59768),Te=t.n(h),C=t(82891),Ce=t(44336),Ne=t.n(Ce),j=t(74253),L=t(63239),I=t.n(L),k=t(60954),e=t.n(k),oe=t(12386),m=t(33867),y=t(85105),i=t.n(y),me=t(99663),J=t(22600),T=t(49135),te=t(93196),E=t(69288),r=t(67294),R=t(93967),a=t.n(R),z=t(90570),N=t(91555),q=t(79790),K=t(81299),ye=t(7452),v=t(45231),se=t(10358),de=t(96486),U=t.n(de),pe=E.Z.confirm,Y=function(be){(0,te.default)(Q,be);function Q(Le){(0,me.default)(this,Q);var Be=(0,T.default)(this,(Q.__proto__||i()(Q)).call(this,Le));return Be.handleExportExcel=function(ke){var Ie=Be.props,he=Ie.report,Re=Ie.pageId,ue=Ie.exportData,we=Ie.filter,Ee=Ie.sourceType,b=ue.filters,le=b===void 0?[]:b,ae=ue.filtersGroup,ve=ae===void 0?[]:ae,W=ue.sorts,ce=ue.filterControls,Z=ue.filterRangeId,_e=ue.rangeType,P=ue.rangeValue,xe=ue.particleSizeType;ye.Z.export({exportType:ke,reportId:he.id,pageId:Ee===2?void 0:Re,particleSizeType:xe,filterRangeId:Z,rangeType:_e,rangeValue:P,dynamicFilter:_e?we.dynamicFilter:void 0,sorts:W,filters:[le,ve,ce].filter(function(bt){return!U().isEmpty(bt)})}).then(function(bt){}).catch(function(bt){alert(bt,2)})},Be.handleDelete=function(){var ke=Be.props,Ie=ke.report,he=ke.filter,Re=ke.appId,ue=Ie.id,we=Ie.name;Be.handleUpdateDropdownVisible(!1),pe({title:r.createElement("span",{className:"Red"},_l("\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8868\u201C%0\u201D ?",we)),onOk:function(){K.Z.deleteReport({reportId:ue}).then(function(b){Be.props.onRemove(ue),he.filterId&&v.Z.deleteWorksheetFilter({appId:Re,filterId:he.filterId}).then()})}})},Be.handleCopy=function(){var ke=Be.props.report,Ie=document.querySelector(".panelTab.active");K.Z.copyReport({move:!1,reportId:ke.id,current:!0}).then(function(he){he.reportId&&(alert(_l("\u590D\u5236\u6210\u529F")),Ie&&Ie.click())})},Be.handleUpdateOwnerId=function(){var ke=Be.props,Ie=ke.ownerId,he=ke.report;K.Z.updateOwnerId({ownerId:Ie?"":md.global.Account.accountId,reportId:he.id}).then(function(Re){Re&&(alert(_l("\u79FB\u51FA\u6210\u529F")),!Ie&&Be.removeReportFavoritesExcludeAccountId(),Be.props.onRemove(he.id))})},Be.removeReportFavoritesExcludeAccountId=function(){var ke=Be.props,Ie=ke.projectId,he=ke.report,Re=ke.reportData,ue=U().get(Re,"createdBy.accountId")||md.global.Account.accountId;se.Z.removeReportFavoritesExcludeAccountId({projectId:Ie,reportId:he.id,accountId:ue})},Be.handleChangeFavorite=function(ke){var Ie=Be.props,he=Ie.report,Re=Ie.worksheetId,ue=Ie.projectId,we=Ie.pageId,Ee=Ie.onCancelFavorite,b={type:2,projectId:ue,worksheetId:Re,pageId:we,reportId:he.id};ke?se.Z.addFavorite(b).then(function(le){le&&(alert(_l("\u6536\u85CF\u6210\u529F")),Be.setState({favorite:ke}))}):se.Z.removeFavorite(b).then(function(le){le&&(alert(_l("\u5DF2\u53D6\u6D88\u6536\u85CF")),Be.setState({favorite:ke}),Ee&&Ee())})},Be.handleUpdateDropdownVisible=function(ke){var Ie=Be.props.report;Be.setState({dropdownVisible:ke});var he=document.querySelector(".statisticsCard-"+Ie.id);ke?he.classList.add("active"):he.classList.remove("active")},Be.state={shareVisible:!1,showPageMove:!1,favorite:Le.favorite},Be}return(0,J.default)(Q,[{key:"componentWillReceiveProps",value:function(Be){Be.favorite!==this.props.favorite&&this.setState({favorite:Be.favorite})}},{key:"renderOverlay",value:function(){var Be=this,ke=this.props,Ie=ke.themeColor,he=ke.reportType,Re=ke.report,ue=ke.sourceType,we=ke.ownerId,Ee=ke.reportStatus,b=ke.isMove,le=ke.isCharge,ae=ke.permissionType,ve=ke.projectId,W=ke.onSheetView,ce=ke.onOpenSetting,Z=ke.onRemove,_e=this.state.favorite,P=![z.f0.PivotTable].includes(he),xe=U().find(md.global.Account.projects,{projectId:ve})&&!window.isPublicApp&&!window.shareState.id&&!md.global.Account.isPortal&&ue!==2;return r.createElement(oe.default,{className:"chartMenu",expandIcon:r.createElement(m.Z,{icon:"arrow-right-tip"}),style:{width:180}},ce&&r.createElement(oe.default.Item,{className:"pLeft10",onClick:function(){ce(),Be.handleUpdateDropdownVisible(!1)}},r.createElement("div",{className:"flexRow valignWrapper"},r.createElement(m.Z,{className:"Gray_9e Font18 mLeft5 mRight5",icon:"settings"}),r.createElement("span",null,_l("\u8BBE\u7F6E")))),xe&&r.createElement(oe.default.Item,{className:"pLeft10",onClick:function(){Be.handleChangeFavorite(!_e),Be.handleUpdateDropdownVisible(!1)}},r.createElement("div",{className:"flexRow valignWrapper"},r.createElement(m.Z,{className:"Font18 mLeft5 mRight5",icon:_e?"task-star":"star-hollow",style:{color:_e?"#ffc402":"#9e9e9e"}}),r.createElement("span",null,_e?_l("\u53D6\u6D88\u6536\u85CF"):_l("\u6536\u85CF")))),W&&Ee>0&&r.createElement(oe.default.Item,{className:"pLeft10",onClick:function(){W(),Be.handleUpdateDropdownVisible(!1)}},r.createElement("div",{className:"flexRow valignWrapper"},r.createElement(m.Z,{className:"Gray_9e Font18 mLeft5 mRight5",icon:"table"}),r.createElement("span",null,_l("\u4EE5\u8868\u683C\u663E\u793A")))),!md.global.Account.isPortal&&!location.href.includes("embed/page")&&Ee>0&&ue!==3&&r.createElement(oe.default.Item,{className:"pLeft10",onClick:function(){Be.setState({shareVisible:!0}),Be.handleUpdateDropdownVisible(!1)}},r.createElement("div",{className:"flexRow valignWrapper"},r.createElement(m.Z,{className:"Gray_9e Font18 mLeft5 mRight5",icon:"share"}),r.createElement("span",null,_l("\u5206\u4EAB")))),!window.isPublicApp&&Ee>0&&r.createElement(oe.default.SubMenu,{popupClassName:"chartMenu",title:_l("\u5BFC\u51FAExcel%06002"),icon:r.createElement(m.Z,{className:"Gray_9e Font18 mRight5",icon:"file_download"}),popupOffset:[0,0]},r.createElement(oe.default.Item,{style:{width:180},className:"pLeft20",onClick:function(){Be.handleExportExcel(0)}},r.createElement("div",{className:"flexRow valignWrapper"},_l("\u6309\u7167\u539F\u503C\u5BFC\u51FA%06000"))),r.createElement(oe.default.Item,{style:{width:180},className:"pLeft20",onClick:function(){Be.handleExportExcel(1)}},r.createElement("div",{className:"flexRow valignWrapper"},_l("\u6309\u663E\u793A\u5355\u4F4D\u5BFC\u51FA%06001")))),[z.f0.PivotTable].includes(he)&&!md.global.Account.isPortal&&r.createElement(oe.default.Item,{className:"pLeft10",onClick:function(){var tt=Be.props.exportData,Dt=tt.filters,vn=Dt===void 0?[]:Dt,Fe=tt.filtersGroup,Bt=Fe===void 0?[]:Fe,kt=[vn,Bt].filter(function(Tt){return!U().isEmpty(Tt)});Be.handleUpdateDropdownVisible(!1),sessionStorage.setItem("printFilter-"+Re.id,I()(kt)),window.open("/printPivotTable/"+Re.id+"/"+encodeURIComponent(Ie||""))}},r.createElement("div",{className:"flexRow valignWrapper"},r.createElement(m.Z,{className:"Gray_9e Font18 mLeft5 mRight5",icon:"print"}),r.createElement("span",null,_l("\u6253\u5370")))),b&&r.createElement(r.Fragment,null,r.createElement(j.Z,{className:"mTop5 mBottom5"}),r.createElement(oe.default.Item,{className:"pLeft10",onClick:this.handleUpdateOwnerId},r.createElement("div",{className:"flexRow valignWrapper"},r.createElement(m.Z,{className:"Gray_9e Font18 mLeft5 mRight5",icon:we?"worksheet_public":"minus-square"}),r.createElement("span",null,we?_l("\u8F6C\u4E3A\u516C\u5171\u56FE\u8868"):_l("\u4ECE\u516C\u5171\u4E2D\u79FB\u51FA")))),r.createElement(oe.default.SubMenu,{popupClassName:"chartMenu",title:_l("\u590D\u5236\u5230"),icon:r.createElement(m.Z,{className:"Gray_9e Font18 mRight5",icon:"content-copy"}),popupOffset:[0,0]},r.createElement(oe.default.Item,{style:{width:180},className:"pLeft20",onClick:this.handleCopy},r.createElement("div",{className:"flexRow valignWrapper"},_l("\u5F53\u524D\u7EDF\u8BA1"))),ae!==2&&r.createElement(oe.default.Item,{style:{width:180},className:"pLeft20",onClick:function(){Be.setState({showPageMove:!0}),Be.handleUpdateDropdownVisible(!1)}},r.createElement("div",{className:"flexRow valignWrapper"},_l("\u81EA\u5B9A\u4E49\u9875\u9762"))))),Z&&r.createElement(r.Fragment,null,r.createElement(j.Z,{className:"mTop5 mBottom5"}),r.createElement(oe.default.Item,{className:"pLeft10",onClick:this.handleDelete},r.createElement("div",{className:"flexRow valignWrapper"},r.createElement(m.Z,{className:"Gray_9e Font18 mLeft5 mRight5",icon:"task-new-delete"}),r.createElement("span",null,_l("\u5220\u9664"))))))}},{key:"render",value:function(){var Be=this,ke=this.state,Ie=ke.shareVisible,he=ke.showPageMove,Re=ke.dropdownVisible,ue=this.props,we=ue.appId,Ee=ue.worksheetId,b=ue.report,le=ue.className,ae=ue.permissions,ve=ue.isCharge,W=ue.isLock,ce=ue.sheetVisible,Z=ue.permissionType;return r.createElement(r.Fragment,null,r.createElement(C.default,{trigger:["click"],placement:"bottomRight",visible:Re,onVisibleChange:this.handleUpdateDropdownVisible,overlay:this.renderOverlay()},r.createElement(m.Z,{className:le,icon:"more_horiz"})),Ie&&r.createElement(N.Z,{title:_l("\u5206\u4EAB\u7EDF\u8BA1\u56FE: %0",b.name),from:"report",isCharge:ae||(W?[100,200,1,2,3].includes(Z):ve||[2].includes(Z)),params:{appId:we,sourceId:b.id,worksheetId:Ee,title:b.name},getCopyContent:function(P,xe){return P==="private"?xe:xe+" "+b.name},onClose:function(){return Be.setState({shareVisible:!1})}}),he&&r.createElement(q.Z,{appId:we,reportId:b.id,onCancel:function(){Be.setState({showPageMove:!1})}}))}}]),Q}(r.Component)},66879:(wn,gt,t)=>{"use strict";if(t.r(gt),t.d(gt,{default:()=>Te}),!/^(1887|7596|7798)$/.test(t.j))var h=t(80204);const Te=/^(1887|7596|7798)$/.test(t.j)?null:h.Z},55992:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>Yn});var h=t(69288),Te=t(25273),C=t(85175),Ce=t(20838),Ne=t(97373),j=t(94055),L=t(33867),I=t(31277),k=t(31929),e=t(52262),oe=t(65400),m=t(54208),y=t(85105),i=t.n(y),me=t(99663),J=t(22600),T=t(49135),te=t(93196),E=t(88239),r=t(67294),R=t(45697),a=t.n(R),z=t(93967),N=t.n(z),q=t(11105),K=t(10509),ye=t(81299),v=t(5095),se=t(68469),de=t(59768),U=t(82891),pe=t(60954),Y=t(12386),be=t(10524),Q=t(31059),Le=t(12424),Be=t(8796),ke=t(62232),Ie=t(86674),he=function(O){var V=O.item,s=O.isActive,c=O.onChangeCheckbox,g=(0,Be.c)({item:{type:"ChartDnd",data:V},collect:function(ge){return{isDragging:ge.isDragging()}}}),x=(0,Le.Z)(g,2),S=x[0].isDragging,X=x[1],re=function(){return V.controlId==="record_count"?"calculate":[Ie.DN.SCORE,Ie.DN.MONEY].includes(V.type)?"number_6":[Ie.DN.MULTI_SELECT].includes(V.type)?"arrow_drop_down_circle":Ie.DN.FORMULA_NUMBER===V.type?"number_6":(0,ke.hB)(V.type)};return r.createElement("div",{ref:X,role:"axisControlItem",style:{opacity:S?.4:1},className:"axisControlItem flexRow valignWrapper pTop8 pBottom8 pLeft5 Font13 Gray pointer"},r.createElement("div",null,r.createElement(Q.default,{className:"mRight10",checked:s,onChange:c})),r.createElement(L.Z,{className:N()("Gray_75 Font20 mRight10",{active:s}),icon:re()}),r.createElement("span",{className:N()("ellipsis",{active:s})},V.controlName))};const Re=he;var ue=function(O){var V=O.item,s=O.isActive,c=O.onOpenEdit,g=O.onDelete,x=O.onChangeCheckbox,S=(0,Be.c)({item:{type:"ChartDnd",data:V},collect:function(Ze){return{isDragging:Ze.isDragging()}}}),X=(0,Le.Z)(S,2),re=X[0].isDragging,ee=X[1],ge=function(){if(s){alert(_l("\u5F53\u524D\u5B57\u6BB5\u6B63\u5728\u88AB\u4F7F\u7528\uFF0C\u65E0\u6CD5\u5220\u9664"),3);return}h.Z.confirm({title:r.createElement("span",{className:"Red"},_l("\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BA1\u7B97\u5B57\u6BB5\u201C%0\u201D ?",V.controlName)),onOk:function(){g(V.controlId)}})};return r.createElement(r.Fragment,null,r.createElement("div",{ref:ee,role:"axisControlItem",style:{opacity:re?.4:1},className:"axisControlItem flexRow valignWrapper pTop8 pBottom8 pLeft5 pRight5 Font13 Gray pointer"},r.createElement(Q.default,{className:"mRight10",checked:s,onChange:x}),r.createElement(L.Z,{className:N()("Gray_75 Font20 mRight10",{active:s}),icon:"calculate"}),r.createElement("span",{className:N()("ellipsis flex",{active:s})},V.controlName),r.createElement(L.Z,{className:"Gray_75 Font16 mRight15",icon:"settings",onClick:c}),r.createElement(L.Z,{className:"Red Font18",icon:"trash",onClick:ge})))};const we=ue;var Ee=t(41617),b=t(11378),le=t(56697),ae=t(67272),ve=t(51024),W=t(34279),ce=t(64749),Z=t(85315),_e=t(6538),P=t(14321),xe=t(729),bt=t(83839),tt=t(43792),Dt=t(15577),vn=t(96486),Fe=t.n(vn),Bt=t(30381),kt=t.n(Bt),Tt=P.default.RangePicker,tn=Fe().cloneDeep(xe.p3.filter(function(Ye){return![18,19].includes(Ye.value)}));tn.splice.apply(tn,[18,0].concat((0,Z.Z)(xe.fC)));var Vn=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));s.handleSave=function(){var g=s.props,x=g.controls,S=g.onChangeFilter,X=s.state,re=X.filterRangeId,ee=X.rangeType,ge=X.rangeValue,Se=X.today,Ze=X.dynamicFilter,Je=Fe().find(x,{controlId:re})||{};S({filterRangeName:Je.controlName,filterRangeId:re,rangeType:ee,rangeValue:ge,today:[8,15,18,19].includes(ee)?Se:!1,dynamicFilter:Ze})};var c=V.filter;return s.state={filterRangeId:c.filterRangeId,rangeType:c.rangeType,rangeValue:c.rangeValue,today:c.today,dynamicFilter:c.dynamicFilter||{startType:1,startCount:1,startUnit:1,endType:1,endCount:1,endUnit:1},customRangeDay:!1,dropdownVisible:!1},s}return(0,J.default)(O,[{key:"renderFooter",value:function(){var s=this,c=this.props.onCancel;return r.createElement("div",{className:"mTop20 mBottom10 pRight8"},r.createElement(oe.default,{type:"link",onClick:c},_l("\u53D6\u6D88")),r.createElement(oe.default,{type:"primary",onClick:function(){s.handleSave(),c()}},_l("\u786E\u8BA4")))}},{key:"renderTime",value:function(){var s=this,c=this.state.filterRangeId,g=this.props.controls;return r.createElement(r.Fragment,null,r.createElement("div",{className:"Font13"},_l("\u65F6\u95F4")),r.createElement(ce.default,{className:"chartSelect w100 mTop5",value:c,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(S){s.setState({filterRangeId:S},s.handleSave)}},g.map(function(x){return r.createElement(ce.default.Option,{className:"selectOptionWrapper",key:x.controlId,value:x.controlId},x.controlName)})))}},{key:"renderScope",value:function(){var s=this,c=this.state,g=c.today,x=c.rangeType,S=c.rangeValue,X={18:_l("\u8FC7\u53BB"),19:_l("\u5C06\u6765")};return r.createElement(r.Fragment,null,r.createElement("div",{className:"Font13 mTop20"},_l("\u8303\u56F4")),r.createElement("div",{className:"flexRow valignWrapper mTop5"},r.createElement("div",{className:"flex"},r.createElement(ce.default,{className:"chartSelect w100",value:[18,19].includes(x)?[7,30,365].includes(Number(S))?x+"-"+S:""+X[x]+S+_l("\u5929"):x,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(ee){var ge={rangeType:ee};if(Fe().isString(ee)){var Se=ee.split("-"),Ze=(0,Le.Z)(Se,2),Je=Ze[0],At=Ze[1];ge.rangeType=Number(Je),ge.rangeValue=Number(At)}else ee===20?ge.rangeValue=kt()().add(-7,"days").format("YYYY/MM/DD")+"-"+kt()().format("YYYY/MM/DD"):ge.rangeValue=null;s.setState(ge)},onDropdownVisibleChange:function(ee){s.setState({dropdownVisible:ee})}},tn.map(function(re){return r.createElement(ce.default.Option,{className:"selectOptionWrapper",key:re.value,value:re.value},re.text)}))),x==20&&this.renderRangePicker(),[8,15,18,19].includes(x)&&r.createElement("div",{className:"flexRow valignWrapper mLeft10"},r.createElement(Q.default,{checked:g,onChange:function(ee){s.setState({today:ee.target.checked})}},_l("\u81F3\u4ECA\u5929")),r.createElement(j.default,{title:(0,xe.ZP)({rangeType:x,rangeValue:S}),placement:"bottom"},r.createElement(L.Z,{className:"Font18 Gray_9e",icon:"info"})))),x==21&&this.renderDynamicFilter())}},{key:"renderRangePicker",value:function(){var s=this,c=this.state.rangeValue;return r.createElement("div",{className:"mLeft10"},r.createElement(Tt,{className:"chartInput rangePickerInput",allowClear:!1,suffixIcon:null,locale:tt.Z,format:"YYYY/MM/DD",value:c?c.split("-").map(function(g){return kt()(g)}):null,onChange:function(x){var S=(0,Le.Z)(x,2),X=S[0],re=S[1];s.setState({rangeValue:X.format("YYYY/MM/DD")+"-"+re.format("YYYY/MM/DD")})}}))}},{key:"renderDynamicFilter",value:function(){var s=this,c=this.state.dynamicFilter,g=[1,3,4],x=function(X){s.setState({dynamicFilter:(0,E.default)({},c,X)})};return r.createElement(r.Fragment,null,r.createElement("div",{className:"flexRow valignWrapper mTop20"},r.createElement("div",{className:"mRight15"},_l("\u4ECE")),r.createElement(ce.default,{className:"chartSelect flex",value:c.startType,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(X){x({startType:X,startUnit:g.includes(X)?X:c.startUnit})}},xe.bx.map(function(S){return r.createElement(ce.default.Option,{className:"selectOptionWrapper",key:S.value,value:S.value},S.name)})),[5,6].includes(c.startType)&&r.createElement(r.Fragment,null,r.createElement(ve.default,{className:"chartInput flex mLeft10 mRight10",value:c.startCount,onChange:function(X){var re=event.target.value;x({startCount:(0,Dt.pu)(re).replace("-","")})}}),r.createElement(ce.default,{className:"chartSelect flex",value:c.startUnit,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(X){x({startUnit:X})}},xe.ik.map(function(S){return r.createElement(ce.default.Option,{className:"selectOptionWrapper",key:S.value,value:S.value},S.name)})))),r.createElement("div",{className:"flexRow valignWrapper mTop10"},r.createElement("div",{className:"mRight15"},_l("\u81F3")),r.createElement(ce.default,{className:"chartSelect flex",value:c.endType,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(X){x({endType:X,endUnit:g.includes(X)?X:c.endUnit})}},xe.bx.map(function(S){return r.createElement(ce.default.Option,{className:"selectOptionWrapper",key:S.value,value:S.value},S.name)})),[5,6].includes(c.endType)&&r.createElement(r.Fragment,null,r.createElement(ve.default,{className:"chartInput flex mLeft10 mRight10",value:c.endCount,onChange:function(X){var re=event.target.value;x({endCount:(0,Dt.pu)(re).replace("-","")})}}),r.createElement(ce.default,{className:"chartSelect flex",value:c.endUnit,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(X){x({endUnit:X})}},xe.ik.map(function(S){return r.createElement(ce.default.Option,{className:"selectOptionWrapper",key:S.value,value:S.value},S.name)})))))}},{key:"renderContent",value:function(){return r.createElement(r.Fragment,null,this.renderTime(),this.renderScope())}},{key:"render",value:function(){var s=this.state.dropdownVisible,c=this.props,g=c.visible,x=c.onCancel;return r.createElement(le.Z,{title:_l("\u65F6\u95F4\u8303\u56F4"),style:s?{top:-100}:{},width:560,className:"chartModal",visible:g,centered:!0,destroyOnClose:!0,closeIcon:r.createElement(L.Z,{icon:"close",className:"Font20 pointer Gray_9e"}),footer:this.renderFooter(),onCancel:x},this.renderContent())}}]),O}(r.Component),Zn=t(12692),Ot=t(86735),$t=t(91247),cn=t(55266),Mn=t(29314),dt=t(71893),$e,jt,rn,Rt=(0,Ot.Z)([`
  line-height: 24px;
  padding: 0 12px;
  border-radius: 16px;
  background: #d8eeff;
  color: #174c76;
  border: 1px solid #bbd6ea;
  &.invalid {
    color: #f44336;
    background: rgba(244, 67, 54, 0.06);
    border-color: #f44336;
  }
`],[`
  line-height: 24px;
  padding: 0 12px;
  border-radius: 16px;
  background: #d8eeff;
  color: #174c76;
  border: 1px solid #bbd6ea;
  &.invalid {
    color: #f44336;
    background: rgba(244, 67, 54, 0.06);
    border-color: #f44336;
  }
`]),St=dt.ZP.div(Rt),zt=xe.Th.map(function(Ye){return(0,E.default)({},Ye,{text:Ye.alias||Ye.text})}),oa=xe.MU.filter(function(Ye){return Ye.value!==7}),qn=(jt=$e=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));rn.call(s);var c=V.editCalculateControl;return s.state={controlName:c?c.controlName:"",formulaStr:c?c.dataSource:"",dot:c?c.dot:8,fnmatch:"",showInSideFormulaSelect:!1,dropdownVisible:!1},s}return(0,J.default)(O,[{key:"renderControlTypeOverlay",value:function(s,c){var g=this,x=s.controlId,S=s.type,X=(0,xe.Yc)(S);return r.createElement(Y.default,{className:"chartMenu",style:{width:140}},(X?zt:oa).map(function(re){return r.createElement(Y.default.Item,{key:re.value,style:{color:c.value===re.value?"#2196f3":null},onClick:function(){var ge=g.state.formulaStr.replace(new RegExp(x+"-"+c.value),x+"-"+re.value);g.tagtextarea.setValue(ge),g.setState({formulaStr:ge})}},re.text)}))}},{key:"genControlTag",value:function(s,c){var g=Fe().find(s,{controlId:c.replace(/-\w/,"")})||{},x=Fe().isEmpty(g),S=c.replace(/\w+-/,""),X=(0,xe.Yc)(g.type),re=Fe().find(X?zt:oa,{value:Number(S)});return r.createElement(St,{className:N()("flexRow valignWrapper",{invalid:x})},r.createElement("span",{className:"Font12"},x?_l("\u5B57\u6BB5\u5DF2\u5220\u9664"):g.controlName),re&&r.createElement("span",{className:"Font12 mLeft5",style:{color:"#688ca7"}},re.text),!x&&r.createElement(U.default,{trigger:["click"],overlay:this.renderControlTypeOverlay(g,re)},r.createElement(L.Z,{className:"Font14 mLeft5 pointer",icon:"arrow-down-border"})))}},{key:"render",value:function(){var s=this,c=this.props.axisControls,g=this.state,x=g.controlName,S=g.showInSideFormulaSelect,X=g.formulaStr,re=g.dot,ee=g.dropdownVisible;return r.createElement("div",null,r.createElement("div",{className:"mBottom10"},_l("\u540D\u79F0")),r.createElement(ve.default,{value:x,className:"chartInput",placeholder:_l("\u8F93\u5165\u5B57\u6BB5\u540D\u79F0"),onChange:function(Se){s.setState({controlName:Se.target.value})}}),r.createElement("div",{className:"flexRow valignWrapper mTop16 mBottom10"},r.createElement("div",{className:"flex Font14"},_l("\u8BA1\u7B97")),r.createElement(Mn.Z,{action:["click"],popupVisible:ee,onPopupVisibleChange:function(Se){return s.setState({dropdownVisible:Se})},popup:this.renderControlOverlay(),popupAlign:{points:["tl","bl"],overflow:{adjustX:!0,adjustY:!0}}},r.createElement("div",{className:"flexRow valignWrapper pointer",style:{color:"#2196F3"}},r.createElement(L.Z,{className:"Font20",icon:"add"}),r.createElement("span",{className:"Font13"},_l("\u9009\u62E9\u5B57\u6BB5"))))),r.createElement(Zn.Z,{mode:2,defaultValue:X,maxHeight:240,getRef:function(Se){s.tagtextarea=Se},renderTag:function(Se,Ze){return s.genControlTag(c,Se)},onChange:this.handleChange}),r.createElement("div",{className:"mTop8 Font12 Gray_75"},_l("\u82F1\u6587\u8F93\u5165+\u3001-\u3001*\u3001/\u3001( ) \u8FDB\u884C\u8FD0\u7B97\uFF0C\u652F\u6301\u8F93\u5165\u6570\u503C\u6216\u5168\u6570\u503C\u7684\u8BA1\u7B97\uFF0C\u4E0D\u652F\u6301\u516C\u5F0F")),r.createElement("div",{className:"mTop16 mBottom10"},_l("\u4FDD\u7559\u5C0F\u6570\u4F4D\u6570")),r.createElement(ve.default,{style:{width:100},className:"chartInput",value:re,onChange:function(Se){s.handleChangeDot(Se.target.value)},suffix:r.createElement("div",{className:"flexColumn"},r.createElement(L.Z,{icon:"expand_less",className:"Gray_9e Font20 pointer mBottom2",onClick:function(){var Se=Number(re);s.handleChangeDot(Se+1)}}),r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20 pointer mTop2",onClick:function(){var Se=Number(re);s.handleChangeDot(Se?Se-1:0)}}))}))}}]),O}(r.Component),rn=function(){var O=this;this.handleSave=function(){var V=O.props,s=V.currentReport,c=V.editCalculateControl,g=s.formulas,x=s.yaxisList,S=O.state,X=S.controlName,re=S.formulaStr,ee=S.dot;if(Fe().isEmpty(X)){alert(_l("\u5B57\u6BB5\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if(Fe().isEmpty(re)){alert(_l("\u8BA1\u7B97\u503C\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if(c){var ge=g.map(function(Je){return Je.controlId===c.controlId?(0,E.default)({},Je,{controlName:X,dataSource:re,dot:ee}):Je}),Se={formulas:ge};Fe().find(x,{controlId:c.controlId})&&(Se.yaxisList=x.map(function(Je){return Je.controlId===c.controlId?(0,E.default)({},Je,{controlName:X,dot:ee}):Je})),O.props.onChangeCurrentReport(Se,!0)}else{var Ze={controlId:(0,$t.Z)(),controlName:X,type:10000001,dataSource:re,dot:ee};O.props.onChangeCurrentReport({formulas:g.concat(Ze)})}O.props.onChangeDialogVisible(!1)},this.handleChange=function(V,s,c){if(!V){var g=O.state.fnmatch,x="";c.origin==="+input"&&(/[0-9|+|\-|*|/|(|),]/.test(c.text[0])||(x=g+c.text[0])),c.origin==="+delete"&&g&&c.removed[0]&&(x=/^[A-Z0-9]+$/.test(c.removed[0])?g.replace(new RegExp(c.removed[0]+"$"),""):""),O.setState({formulaStr:s,fnmatch:x,showInSideFormulaSelect:x,fnmatchPos:x?O.tagtextarea.cmObj.getCursor():void 0})}},this.handleChangeDot=function(V){var s="";V?(s=parseInt(V),s=isNaN(s)?0:s,s=s>8?8:s):s=0,O.setState({dot:s})},this.renderControlOverlay=function(){var V=O.props.axisControls,s=V.map(function(c){return c.type===1e7?(0,E.default)({},c,{type:6}):c});return r.createElement(cn.Z,{controls:s,onAdd:function(g){O.tagtextarea.insertColumnTag(g.controlId+"-"+((0,xe.Yc)(g.type)?1:5)),O.setState({dropdownVisible:!1})},onClose:function(){O.setState({dropdownVisible:!1})}})}},jt),In=function(Ye){(0,te.default)(O,Ye);function O(V){return(0,me.default)(this,O),(0,T.default)(this,(O.__proto__||i()(O)).call(this,V))}return(0,J.default)(O,[{key:"renderFooter",value:function(){var s=this;return r.createElement("div",{className:"mTop20 mBottom10 pRight8"},r.createElement(k.default,{autoInsertSpaceInButton:!1},r.createElement(oe.default,{type:"link",onClick:function(){s.props.onChangeDialogVisible(!1)}},_l("\u53D6\u6D88")),r.createElement(oe.default,{type:"primary",onClick:function(){s.calculateControlEl.handleSave()}},_l("\u786E\u8BA4"))))}},{key:"render",value:function(){var s=this,c=this.props.dialogVisible;return r.createElement(le.Z,{title:_l("\u6DFB\u52A0\u8BA1\u7B97\u5B57\u6BB5"),width:480,className:"chartModal",visible:c,centered:!0,destroyOnClose:!0,closeIcon:r.createElement(L.Z,{icon:"close",className:"Font20 pointer Gray_9e"}),footer:this.renderFooter(),onCancel:function(){s.props.onChangeDialogVisible(!1)}},r.createElement(qn,(0,E.default)({ref:function(x){s.calculateControlEl=x}},this.props)))}}]),O}(r.Component),Vt=t(24607),Yt=t(50533),qt=t(22010),rt=t(31742),Qe=t(76345),ht=t(9819),Lt,Ct,mt=[{value:0,name:_l("\u6240\u6709\u8BB0\u5F55")},{value:1,name:_l("\u6709\u67E5\u770B\u6743\u9650\u7684\u8BB0\u5F55")}],vt=(Lt=(0,Yt.$j)(function(Ye){return(0,E.default)({},Fe().pick(Ye.statistics,["currentReport","axisControls","worksheetInfo","base"]))},function(Ye){return(0,qt.DE)(ht,Ye)}),Lt(Ct=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.formatAxisControls=function(c,g){var x=s.props,S=x.worksheetInfo,X=x.ownerId,re=x.currentReport;if(X){var ee=S.views,ge=S.switches,Se=re.filter,Ze=Se===void 0?{}:Se,Je=Fe().find(ee,{viewId:g||Ze.viewId})||{},At=(0,rt.v)(Qe.RX.sysControlSwitch,ge,Je.viewId);return c.filter(function(Jt){var Kt=Jt.advancedSetting||{};if(Kt.datamask==="1"||!At&&Fe().find(Ie._Q,{controlId:Jt.controlId})||Je.controls&&Je.controls.includes(Jt.controlId))return!1;var ln=Fe().find(S.columns,{controlId:Jt.controlId});return ln?(0,Vt.kM)(ln,3).visible:!0})}else return c},s.handleSearch=function(){var c=s.props.axisControls,g=s.state.searchValue;if(g){var x=c.filter(function(X){return(X.controlName||"").toLocaleLowerCase().includes(g.toLocaleLowerCase())});s.setState({currentAxisControls:s.formatAxisControls(x)})}else{var S=s.props.axisControls;s.setState({currentAxisControls:s.formatAxisControls(S)})}},s.handleChangeCheckbox=function(c,g){s.props.changeControlCheckbox(c,g)},s.state={searchValue:"",timeModalVisible:!1,sheetModalVisible:!1,calculateControlModalVisible:!1,currentAxisControls:s.formatAxisControls(V.axisControls),editCalculateControl:null},s}return(0,J.default)(O,[{key:"componentWillReceiveProps",value:function(s){var c=Fe().get(s,["currentReport","filter","viewId"]),g=Fe().get(s,["currentReport","formulas","length"]);if((!Fe().isEqual(s.axisControls,this.props.axisControls)||c!==Fe().get(this.props,["currentReport","filter","viewId"]))&&this.setState({currentAxisControls:this.formatAxisControls(s.axisControls,c)}),g>Fe().get(this.props,["currentReport","formulas","length"])){var x=document.querySelector(".chartDataSource .scrollWrapper");setTimeout(function(){x.nanoscroller.scrollTop(x.nanoscroller.maxScrollTop)},0)}}},{key:"renderHeader",value:function(){var s=this.props,c=s.dataIsUnfold,g=s.onChangeDataIsUnfold;return c?r.createElement("div",{className:"flexRow valignWrapper horizontalPaddingWrapper"},r.createElement("div",{className:"Bold Font18 Gray flex"},_l("\u6570\u636E\u6E90")),r.createElement(L.Z,{className:"Gray_9e Font18 pointer",icon:"arrow-right-border",onClick:g})):r.createElement("div",{className:"flexColumn valignWrapper horizontalPaddingWrapper"},r.createElement(L.Z,{className:"Gray_9e Font18 pointer mTop5",icon:"arrow-left-border",onClick:g}),r.createElement("div",{className:"Bold Font18 Gray flex mTop15 AllBreak"},_l("\u6570\u636E\u6E90")))}},{key:"renderSheet",value:function(){var s=this,c=this.props,g=c.worksheetInfo,x=c.currentReport,S=c.base,X=c.sourceType,re=c.axisControls,ee=c.appId,ge=c.projectId,Se=c.ownerId,Ze=x.filter,Je=Ze===void 0?{}:Ze,At=Fe().find(g.views,{viewId:Je.viewId}),Jt=S.appType,Kt=this.state.sheetModalVisible;return r.createElement(r.Fragment,null,r.createElement("div",{className:"mTop20 horizontalPaddingWrapper"},r.createElement("div",{className:"sheetInfoWrapper flexRow valignWrapper pointer",onClick:function(){s.setState({sheetModalVisible:!0})}},r.createElement("span",{className:"flex Font13 Bold"},g.name,Jt===1&&(At?"("+At.name+")":Je.viewId?r.createElement("span",{className:"removeViewId"},"(",_l("\u89C6\u56FE\u5DF2\u88AB\u5220\u9664"),")"):"("+_l("\u6240\u6709\u8BB0\u5F55")+")"),Jt===2&&"("+_l("\u805A\u5408\u8868")+")"),r.createElement(L.Z,{className:"Gray_9e Font18",icon:"swap_horiz"}))),r.createElement(Ee.Z,{appType:Jt,sourceType:X,dialogVisible:Kt,ownerId:Se,appId:ee,projectId:ge,viewId:Je.viewId||null,worksheetInfo:g,onChange:function(Gn,yn,na){s.props.changeBase({appType:na}),Gn===g.worksheetId?s.props.changeCurrentReport({filter:(0,E.default)({},Je,{viewId:yn})},!0):s.props.onChangeSheetId(Gn),s.setState({sheetModalVisible:!1})},onChangeDialogVisible:function(Gn){s.setState({sheetModalVisible:Gn})}}))}},{key:"renderTime",value:function(){var s=this,c=this.props,g=c.worksheetInfo,x=c.currentReport,S=c.axisControls,X=x.filter,re=X===void 0?{}:X,ee=x.displaySetup,ge=this.state.timeModalVisible;return r.createElement("div",{className:"mTop15 horizontalPaddingWrapper"},r.createElement("div",{className:"Bold Font13 Gray mBottom10"},_l("\u65F6\u95F4")),r.createElement("div",{className:"timeWrapper flexRow valignWrapper pointer",onClick:function(){s.setState({timeModalVisible:!0})}},r.createElement("div",{className:N()("flex Font13 Bold",[20,21].includes(re.rangeType)?"flexColumn":"flexRow")},r.createElement("span",{className:"nowrap"},re.filterRangeName),r.createElement("span",{className:N()({mLeft5:![20,21].includes(re.rangeType)})},"(",(0,xe.FF)(re),")")),r.createElement(L.Z,{className:"Gray_9e Font14",icon:"arrow-down-border"})),r.createElement(Vn,{filter:re,controls:S.filter(function(Se){return(0,xe.$$)(Se.type)}),visible:ge,onCancel:function(){s.setState({timeModalVisible:!1})},onChangeFilter:function(Ze){s.props.changeCurrentReport({displaySetup:(0,E.default)({},ee,{contrastType:0}),filter:(0,E.default)({},re,Ze)},!0)}}))}},{key:"renderPermission",value:function(){var s=this.props,c=s.currentReport,g=s.changeCurrentReport,x=c.auth,S=x===void 0?0:x,X=function(){return r.createElement(Y.default,{className:"chartMenu"},mt.map(function(ee){return r.createElement(Y.default.Item,{key:ee.value,onClick:function(){return g({auth:ee.value},!0)}},ee.name)}))};return r.createElement("div",{className:"mTop15 horizontalPaddingWrapper"},r.createElement("div",{className:"Bold Font13 Gray mBottom10"},_l("\u6743\u9650")),r.createElement(U.default,{overlay:X(),trigger:["click"],placement:"bottomRight"},r.createElement("div",{className:"timeWrapper flexRow valignWrapper pointer"},r.createElement("div",{className:"flex Font13 Bold"},Fe().get(Fe().find(mt,{value:S}),"name")),r.createElement(L.Z,{className:"Gray_9e Font14",icon:"arrow-down-border"}))))}},{key:"renderSearch",value:function(){var s=this,c=this.state.searchValue;return r.createElement("div",{className:"searchControlWrapper flexRow valignWrapper Gray_9e"},r.createElement(L.Z,{className:"Font18 mRight3",icon:"search"}),r.createElement("input",{className:"flex",value:c,placeholder:_l("\u641C\u7D22"),onChange:function(x){s.setState({searchValue:x.target.value},s.handleSearch)},onKeyDown:function(x){x.which===13&&s.handleSearch()}}),c&&r.createElement(L.Z,{className:"Font18 pointer",icon:"close",onClick:function(){s.setState({searchValue:""},s.handleSearch)}}))}},{key:"renderAddCalculateControl",value:function(){var s=this;return r.createElement("div",{className:"tip-top-left mRight5 addCalculateControl","data-tip":_l("\u6DFB\u52A0\u8BA1\u7B97\u5B57\u6BB5")},r.createElement(L.Z,{icon:"add",className:"Font18 Gray_9e pointer",onClick:function(g){g.stopPropagation(),s.setState({calculateControlModalVisible:!0})}}))}},{key:"renderCalculateControl",value:function(s){var c=this,g=this.props,x=g.axisControls,S=g.currentReport,X=g.changeCurrentReport,re=this.state,ee=re.calculateControlModalVisible,ge=re.editCalculateControl,Se=S.formulas,Ze=Se===void 0?[]:Se;return r.createElement(se.Z.Panel,{className:N()({hide:Fe().isEmpty(Ze)}),key:"calculateControl",header:r.createElement(r.Fragment,null,this.renderAddCalculateControl(),r.createElement("div",{className:"flex Gray_9e"},_l("\u8BA1\u7B97\u503C")))},r.createElement("div",null,r.createElement("div",{className:"chartCollapse"},Ze.map(function(Je){return r.createElement(we,{key:Je.controlId,item:Je,isActive:s.includes(Je.controlId),onChangeCheckbox:function(Jt){c.handleChangeCheckbox(Jt,Je)},onOpenEdit:function(){c.setState({calculateControlModalVisible:!0,editCalculateControl:Je})},onDelete:function(Jt){X({formulas:Ze.filter(function(Kt){return Kt.controlId!==Jt})})}})})),r.createElement(In,{editCalculateControl:ge,axisControls:x,currentReport:S,onChangeCurrentReport:X,dialogVisible:ee,onChangeDialogVisible:function(At){c.setState({calculateControlModalVisible:At,editCalculateControl:null})}})))}},{key:"renderExpandIcon",value:function(s){return r.createElement(L.Z,{className:N()("Font18 Gray_9e",{"icon-arrow-active":s.isActive}),icon:"arrow-down-border"})}},{key:"renderControls",value:function(){var s=this,c=this.props.currentReport,g=(0,xe.ys)(c),x=this.state.currentAxisControls;return r.createElement(r.Fragment,null,r.createElement(se.Z,{ghost:!0,className:"dataSourceCollapse",defaultActiveKey:["sheetControl","calculateControl"],expandIcon:this.renderExpandIcon},r.createElement(se.Z.Panel,{header:r.createElement("div",{className:"flex Gray_9e"},_l("\u5DE5\u4F5C\u8868")),key:"sheetControl"},r.createElement("div",null,x.map(function(S){return r.createElement(Re,{key:S.controlId,item:S,isActive:g.includes(S.controlId),onChangeCheckbox:function(re){s.handleChangeCheckbox(re,S)}})}),Fe().isEmpty(x)&&r.createElement("div",{className:"centerAlign pTop30"},_l("\u65E0\u641C\u7D22\u7ED3\u679C")))),this.renderCalculateControl(g)))}},{key:"renderField",value:function(){return r.createElement("div",{className:"mTop20 flex flexColumn"},r.createElement("div",{className:"horizontalPaddingWrapper"},r.createElement("div",{className:"flexRow valignWrapper mBottom5"},r.createElement("span",{className:"flex Font13 Gray Bold"},_l("\u5B57\u6BB5")),this.renderAddCalculateControl()),this.renderSearch()),this.renderControls())}},{key:"render",value:function(){var s=this.props,c=s.dataIsUnfold,g=s.ownerId;return r.createElement("div",{className:N()("chartDataSource flexColumn",{small:!c})},c?r.createElement(r.Fragment,null,this.renderHeader(),r.createElement(Te.Z,{className:"flex scrollWrapper"},this.renderSheet(),this.renderTime(),!g&&this.renderPermission(),this.renderField())):r.createElement(r.Fragment,null,this.renderHeader()))}}]),O}(r.Component))||Ct),Xt=t(338),bn=function(O){var V=O.disable,s=V===void 0?!1:V,c=O.allowInput,g=O.inputValue,x=O.onChnageInputValue,S=(0,r.useState)(!1),X=(0,Le.Z)(S,2),re=X[0],ee=X[1],ge=(0,r.useState)(!1),Se=(0,Le.Z)(ge,2),Ze=Se[0],Je=Se[1],At=(0,Xt.L)({accept:"ChartDnd",drop:function(ga){O.onAddControl(ga.data)},hover:function(ga){if(Kt.isOver){var ua=O.onVerification(ga.data);ee(ua)}},collect:function(ga){return{isOver:ga.isOver(),canDrop:ga.canDrop()}}}),Jt=(0,Le.Z)(At,2),Kt=Jt[0],ln=Jt[1],Gn=Kt.isOver?re?"succeeFidldItem":"errorFidldItem":"",yn=function(ga){var ua=ga.target.value;ua!==""?(ua=Number(ua),ua=isNaN(ua)?0:ua):ua="",x(ua,g!==ua),Je(!!_.isNumber(ua))};return(0,r.useEffect)(function(){Je(!!_.isNumber(g))},[g]),r.createElement("div",{ref:ln,className:N()("flexRow valignWrapper withoutFidldItem",{withoutValueItem:Ze,disable:s},Gn),onClick:function(){c&&Je(!0)}},Ze?r.createElement("input",{defaultValue:g,onBlur:yn,onKeyDown:function(ga){ga.which===13&&yn(ga)}}):c?_l("\u8F93\u5165\u56FA\u5B9A\u503C\u6216\u9009\u62E9\u52A8\u6001\u503C"):_l("\u4ECE\u5DE6\u4FA7\u62D6\u62FD\u6DFB\u52A0\u5B57\u6BB5"))};const pn=bn;var Rn=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.handleSave=function(){var c=s.state.rename;s.props.onChangeRename(c),s.props.onHideDialogVisible(!1)},s.state={rename:V.rename},s}return(0,J.default)(O,[{key:"componentWillReceiveProps",value:function(s){s.rename!==this.props.rename&&this.setState({rename:s.rename})}},{key:"renderFooter",value:function(){var s=this;return r.createElement("div",{className:"mTop20 mBottom10 pRight8"},r.createElement(k.default,{autoInsertSpaceInButton:!1},r.createElement(oe.default,{type:"link",onClick:function(){s.props.onHideDialogVisible(!1)}},_l("\u53D6\u6D88")),r.createElement(oe.default,{type:"primary",onClick:this.handleSave},_l("\u786E\u8BA4"))))}},{key:"render",value:function(){var s=this,c=this.props.dialogVisible,g=this.state.rename;return r.createElement(le.Z,{title:_l("\u91CD\u547D\u540D"),width:480,className:"chartModal",visible:c,destroyOnClose:!0,centered:!0,closeIcon:r.createElement(L.Z,{icon:"close",className:"Font20 pointer Gray_9e"}),footer:this.renderFooter(),onCancel:function(){s.props.onHideDialogVisible(!1)}},r.createElement(ve.default,{autoFocus:!0,className:"chartInput",value:g,onChange:function(S){s.setState({rename:S.target.value})}}))}}]),O}(r.Component),fe=t(90570),$n=[{value:0,name:_l("\u9690\u85CF")},{value:1,name:_l("\u663E\u793A\u4E3A 0")},{value:2,name:_l("\u663E\u793A\u4E3A --")}],gn=[{value:0,name:_l("\u9690\u85CF")},{value:1,name:_l("\u663E\u793A")}],en=[{value:0,name:_l("\u9690\u85CF")},{value:1,name:_l("\u663E\u793A\u4E3A 0")},{value:2,name:_l("\u663E\u793A\u4E3A -- (\u8FDE\u7EED)")},{value:3,name:_l("\u663E\u793A\u4E3A -- (\u4E2D\u65AD)")}],_t=function(O){return O===fe.f0.LineChart?en:O===fe.f0.NumberChart?gn:$n},nn=function(O,V){var s=V.isTime,c=V.isOption;if([fe.f0.BarChart,fe.f0.LineChart,fe.f0.DualAxes,fe.f0.RadarChart].includes(O)&&(s||c)||fe.f0.NumberChart===O&&c)return!0},Gt=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.handleUpdateTimeParticleSizeType=function(c){var g=s.props.currentReport,x=g.xaxes,S=g.sorts,X=x.particleSizeType?x.controlId+"-"+x.particleSizeType:x.controlId;s.props.onChangeCurrentReport({xaxes:(0,E.default)({},x,{particleSizeType:c}),sorts:S.filter(function(re){return Fe().findKey(re)!==X})},!0)},s.handleChangeXaxes=function(c){var g=s.props.currentReport.xaxes;s.props.onChangeCurrentReport({xaxes:(0,E.default)({},g,c)},!0)},s.handleVerification=function(c){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=s.props.currentReport,S=x.reportType,X=x.split,re=x.yaxisList;return[fe.f0.CountryLayer].includes(S)&&!(0,xe.Wf)(c.type)?(g&&alert(_l("\u884C\u653F\u533A\u57DF\u56FE\u4EC5\u652F\u6301\u5730\u533A\u5B57\u6BB5\u53EF\u4F5C\u4E3Ax\u8F74\u7EF4\u5EA6"),2),!1):[fe.f0.FunnelChart].includes(S)&&(0,xe.$$)(c.type)?(g&&alert(_l("\u65F6\u95F4\u7C7B\u578B\u4E0D\u80FD\u4F5C\u4E3Ax\u8F74\u7EF4\u5EA6"),2),!1):[fe.f0.PieChart].includes(S)&&re.length>1?(g&&alert(_l("\u591A\u6570\u503C\u65F6\u4E0D\u80FD\u540C\u65F6\u914D\u7F6E\u7EF4\u5EA6"),2),!1):[fe.f0.BarChart,fe.f0.RadarChart].includes(S)&&X.controlId&&re.length>1?(g&&alert(_l("\u591A\u6570\u503C\u65F6\u4E0D\u80FD\u540C\u65F6\u914D\u7F6E\u7EF4\u5EA6\u548C\u5206\u7EC4"),2),!1):(0,xe.Lc)(c.type)?!0:(g&&alert(_l("\u8BE5\u5B57\u6BB5\u4E0D\u80FD\u4F5C\u4E3Ax\u8F74\u7EF4\u5EA6"),2),!1)},s.handleAddControl=function(c){var g=s.props.currentReport,x=g.reportType,S=g.xaxes,X=g.displaySetup;s.handleVerification(c,!0)&&s.props.addXaxes(c)},s.state={dialogVisible:!1},s}return(0,J.default)(O,[{key:"getAreaParticleSizeDropdownData",value:function(s){return s===19?xe.yx.filter(function(c){return![2,3].includes(c.value)}):s===23?xe.yx.filter(function(c){return![3].includes(c.value)}):xe.yx}},{key:"renderModal",value:function(){var s=this,c=this.state.dialogVisible,g=this.props.currentReport.xaxes;return r.createElement(Rn,{dialogVisible:c,rename:g.rename||g.controlName,onChangeRename:function(S){s.handleChangeXaxes({rename:S}),s.setState({dialogVisible:!1})},onHideDialogVisible:function(){s.setState({dialogVisible:!1})}})}},{key:"renderOverlay",value:function(s){var c=this,g=this.props.disableParticleSizeTypes,x=this.props.currentReport,S=x.xaxes,X=x.reportType,re=(0,xe.OX)(S.controlType),ee=(0,xe.$$)(S.controlType),ge=X!==fe.f0.CountryLayer&&(0,xe.Wf)(S.controlType),Se=X===fe.f0.LineChart,Ze=Fe().get(s,"advancedSetting.showtype"),Je=ee?(0,xe.VM)(xe._5,{showtype:Ze,controlType:S.controlType}):[],At=(0,xe.xl)(xe.x9,{showtype:Ze,controlType:S.controlType}),Jt=this.getAreaParticleSizeDropdownData(s.type);return!Se&&S.emptyType===3&&(S.emptyType=2),r.createElement(Y.default,{className:"chartControlMenu chartMenu",expandIcon:r.createElement(L.Z,{icon:"arrow-right-tip"})},r.createElement(Y.default.Item,{onClick:function(){c.setState({dialogVisible:!0})}},_l("\u91CD\u547D\u540D")),ee&&r.createElement(r.Fragment,null,r.createElement(Y.default.SubMenu,{popupClassName:"chartMenu",title:_l("\u5F52\u7EC4"),popupOffset:[0,-15]},r.createElement(Y.default.ItemGroup,{title:_l("\u65F6\u95F4")},Je.map(function(Kt){return r.createElement(Y.default.Item,{className:"valignWrapper",disabled:Kt.value===S.particleSizeType?!0:g.includes(Kt.value),style:{width:200,color:Kt.value===(S.particleSizeType||1)?"#1e88e5":null},key:Kt.value,onClick:function(){c.handleUpdateTimeParticleSizeType(Kt.value)}},r.createElement("div",{className:"flex"},Kt.text),r.createElement("div",{className:"Gray_75 Font12"},Kt.getTime()))})),!!At.length&&r.createElement(r.Fragment,null,r.createElement(Y.default.Divider,null),r.createElement(Y.default.ItemGroup,{title:_l("\u96C6\u5408")},At.map(function(Kt){return r.createElement(Y.default.Item,{className:"valignWrapper",disabled:Kt.value===S.particleSizeType?!0:g.includes(Kt.value),style:{width:200,color:Kt.value===(S.particleSizeType||1)?"#1e88e5":null},key:Kt.value,onClick:function(){c.handleUpdateTimeParticleSizeType(Kt.value)}},r.createElement("div",{className:"flex"},Kt.text),r.createElement("div",{className:"Gray_75 Font12"},Kt.getTime()))})))),r.createElement(Y.default.SubMenu,{popupClassName:"chartMenu",title:_l("\u65E5\u671F\u683C\u5F0F"),popupOffset:[0,-15]},xe.Xr.map(function(Kt){return r.createElement(Y.default.Item,{className:"valignWrapper",style:{width:200,color:Kt.value===S.showFormat?"#1e88e5":null},key:Kt.value,onClick:function(){c.handleChangeXaxes({showFormat:Kt.value})}},r.createElement("div",{className:"flex"},Kt.getTime()))}))),ge&&r.createElement(Y.default.SubMenu,{popupClassName:"chartMenu",title:_l("\u5F52\u7EC4"),popupOffset:[0,-15]},Jt.map(function(Kt){return r.createElement(Y.default.Item,{disabled:Kt.value===S.particleSizeType?!0:g.includes(Kt.value),style:{width:120,color:Kt.value===(S.particleSizeType||1)?"#1e88e5":null},key:Kt.value,onClick:function(){c.handleUpdateTimeParticleSizeType(Kt.value)}},Kt.text)})),S.controlType===35&&r.createElement(Y.default.SubMenu,{popupClassName:"chartMenu",title:_l("\u5F52\u7EC4"),popupOffset:[0,-15]},xe.nq.map(function(Kt){return r.createElement(Y.default.Item,{disabled:Kt.value===S.particleSizeType,style:{width:120,color:Kt.value===(S.particleSizeType||1)?"#1e88e5":null},key:Kt.value,onClick:function(){c.handleUpdateTimeParticleSizeType(Kt.value)}},Kt.text)})),nn(X,{isTime:ee,isOption:re})&&r.createElement(Y.default.SubMenu,{popupClassName:"chartMenu",title:r.createElement("div",{className:"flexRow valignWrapper w100"},r.createElement("div",{className:"flex"},_l("\u65E0\u8BB0\u5F55\u7684\u9879\u76EE")),r.createElement("div",{className:"Font12 Gray_75 emptyTypeName"},S.emptyType?_l("\u663E\u793A"):_l("\u9690\u85CF"))),popupOffset:[0,-15]},_t(X).map(function(Kt){return r.createElement(Y.default.Item,{key:Kt.value,style:{color:Kt.value===S.emptyType?"#1e88e5":null},onClick:function(){c.handleChangeXaxes({emptyType:Kt.value})}},Kt.name)})),!ee&&r.createElement(Y.default.Item,{className:"flexRow valignWrapper",onClick:function(){c.handleChangeXaxes({xaxisEmpty:!S.xaxisEmpty})}},r.createElement("div",{className:"flex"},_l("\u7EDF\u8BA1\u7A7A\u503C")),S.xaxisEmpty&&r.createElement(L.Z,{icon:"done",className:"Font17"})))}},{key:"renderAxis",value:function(){var s=this.props,c=s.allControls,g=s.axisControls,x=s.currentReport,S=x.xaxes,X=x.reportType,re=S.rename&&S.rename!==S.controlName?S.controlName:null,ee=(0,xe.$$)(S.controlType),ge=X!==fe.f0.CountryLayer&&(0,xe.Wf)(S.controlType),Se=Fe().find(g,{controlId:S.controlId}),Ze=Fe().find(c,{controlId:S.controlId})||{};return r.createElement("div",{className:"flexRow valignWrapper fidldItem"},Se?r.createElement(j.default,{title:re},r.createElement("span",{className:"Gray flex ellipsis"},S.rename||S.controlName,ee&&" ("+Fe().find(xe.qp,{value:S.particleSizeType||1}).text+")",ge&&" ("+Fe().find(xe.yx,{value:S.particleSizeType||1}).text+")")):Ze.strDefault==="10"?r.createElement("span",{className:"Red flex ellipsis"},Ze.controlName+" ("+_l("\u65E0\u6548\u7C7B\u578B")+")"):r.createElement(j.default,{title:"ID: "+S.controlId},r.createElement("span",{className:"Red flex ellipsis"},_l("\u5B57\u6BB5\u5DF2\u5220\u9664"))),r.createElement(U.default,{overlay:this.renderOverlay(Se||{}),trigger:["click"],placement:"bottomRight"},r.createElement(L.Z,{className:"Gray_9e Font18 pointer",icon:"arrow-down-border"})),r.createElement(L.Z,{className:"Gray_9e Font18 pointer mLeft10",icon:"close",onClick:this.props.removeXaxes}))}},{key:"render",value:function(){var s=this.props,c=s.name,g=s.currentReport;return r.createElement("div",{className:"fieldWrapper mBottom20"},r.createElement("div",{className:"Bold mBottom12"},c),g.xaxes.controlId?this.renderAxis():r.createElement(pn,{onVerification:this.handleVerification,onAddControl:this.handleAddControl}),this.renderModal())}}]),O}(r.Component),xt=t(42723),Mt=t(95742),ze=(0,Ot.Z)([`
  position: relative;
  &:hover {
    .sortableDrag {
      opacity: 1;
    }
  }
  .sortableDrag {
    position: absolute;
    top: 7px;
    left: -18px;
    opacity: 0;
    &:hover {
      opacity: 1;
    }
  }
`],[`
  position: relative;
  &:hover {
    .sortableDrag {
      opacity: 1;
    }
  }
  .sortableDrag {
    position: absolute;
    top: 7px;
    left: -18px;
    opacity: 0;
    &:hover {
      opacity: 1;
    }
  }
`]),yt=dt.ZP.div(ze),Ut=function(O){var V=O.item,s=O.onNormType,c=O.onEmptyShowType,g=O.onChangeControlId,x=O.onChangeCurrentReport,S=O.currentReport,X=O.sortIndex,re=S.reportType,ee=S.sorts,ge=S.xaxes,Se=S.yaxisList,Ze=V.controlId,Je=V.controlType,At=V.normType,Jt=fe.f0.NumberChart===re,Kt=ge.controlId&&Se.length===1,ln=Jt?Kt:!0,Gn=Jt&&!Kt&&V.emptyShowType===0?1:V.emptyShowType;return r.createElement(Y.default,{className:"chartControlMenu chartMenu",expandIcon:r.createElement(L.Z,{icon:"arrow-right-tip"})},r.createElement(Y.default.Item,{onClick:function(){g(Ze)}},_l("\u91CD\u547D\u540D")),(0,xe.Yc)(Je,!1)&&r.createElement(Y.default.SubMenu,{popupClassName:"chartMenu",title:_l("\u8BA1\u7B97"),popupOffset:[0,-15]},xe.Th.filter(function(yn){return yn.value!==5}).map(function(yn){return r.createElement(Y.default.Item,{style:{width:120,color:yn.value===At?"#1e88e5":null},key:yn.value,onClick:function(){s(Ze,yn.value)}},yn.text)})),!(0,xe.Yc)(Je)&&r.createElement(Y.default.SubMenu,{popupClassName:"chartMenu",title:_l("\u8BA1\u7B97"),popupOffset:[0,-15]},[{text:_l("\u8BA1\u6570"),value:5},{text:_l("\u53BB\u91CD\u8BA1\u6570"),value:6}].map(function(yn){return r.createElement(Y.default.Item,{style:{width:120,color:yn.value===At?"#1e88e5":null},key:yn.value,onClick:function(){s(Ze,yn.value)}},yn.text)})),[fe.f0.BarChart,fe.f0.LineChart,fe.f0.DualAxes,fe.f0.RadarChart,fe.f0.NumberChart,fe.f0.BidirectionalBarChart].includes(re)&&r.createElement(Y.default.SubMenu,{popupClassName:"chartMenu",title:r.createElement("div",{className:"flexRow valignWrapper w100"},r.createElement("div",{className:"flex"},_l("\u7A7A\u503C\u663E\u793A")),r.createElement("div",{className:"Font12 Gray_75 emptyTypeName"},Fe().find(xe.n7,{value:Gn}).text)),popupOffset:[0,-15]},xe.n7.filter(function(yn){return yn.value?!0:ln}).map(function(yn){return r.createElement(Y.default.Item,{style:{width:120,color:yn.value===Gn?"#1e88e5":null},key:yn.value,onClick:function(){c(Ze,yn.value)}},yn.text)})))},Wt=(0,Mt.W8)(function(Ye){var O=Ye.item,V=Ye.sortIndex,s=Ye.onClear,c=Ye.axisControls,g=Ye.allControls,x=O.rename&&O.rename!==O.controlName?O.controlName:null,S=(0,xe.Yc)(O.controlType,!1),X=Fe().find(c,{controlId:O.controlId}),re=Fe().find(g,{controlId:O.controlId})||{},ee=Fe().find(xe.Th,{value:O.normType})||{};return r.createElement(yt,null,r.createElement(L.Z,{className:"sortableDrag Font20 pointer Gray_bd ThemeHoverColor3",icon:"drag_indicator"}),r.createElement("div",{className:"flexRow valignWrapper fidldItem",key:O.controlId},X?r.createElement(j.default,{title:x},r.createElement("span",{className:"Gray flex ellipsis"},S&&ee&&ee.text+": ",O.rename||O.controlName)):re.strDefault==="10"?r.createElement("span",{className:"Red flex ellipsis"},re.controlName+" ("+_l("\u65E0\u6548\u7C7B\u578B")+")"):r.createElement(j.default,{title:"ID: "+O.controlId},r.createElement("span",{className:"Red flex ellipsis"},_l("\u5B57\u6BB5\u5DF2\u5220\u9664"))),r.createElement(U.default,{overlay:Ut(Ye),trigger:["click"],placement:"bottomRight"},r.createElement(L.Z,{className:"Gray_9e Font18 pointer",icon:"arrow-down-border"})),r.createElement(L.Z,{className:"Gray_9e Font18 pointer mLeft10",icon:"close",onClick:function(){s(O.controlId)}})))}),kn=(0,Mt.JN)(function(Ye){var O=Ye.list,V=(0,xt.Z)(Ye,["list"]);return r.createElement("div",null,O.map(function(s,c){return r.createElement(Wt,(0,E.default)({key:c,sortIndex:c,index:c,item:s},V))}))}),on=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.handleVerification=function(c){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=s.props.currentReport,S=x.xaxes,X=x.split,re=x.yaxisList,ee=x.reportType;return Fe().find(re,{controlId:c.controlId})?(g&&alert(_l("\u4E0D\u5141\u8BB8\u6DFB\u52A0\u91CD\u590D\u5B57\u6BB5"),2),!1):[fe.f0.ScatterChart].includes(ee)&&c.controlId===X.controlId?(g&&alert(_l("\u6570\u503C\u548C\u989C\u8272\u4E0D\u5141\u8BB8\u91CD\u590D"),2),!1):[fe.f0.BarChart,fe.f0.RadarChart].includes(ee)&&X.controlId&&S.controlId&&re.length>=1?(g&&alert(_l("\u591A\u6570\u503C\u65F6\u4E0D\u80FD\u540C\u65F6\u914D\u7F6E\u7EF4\u5EA6\u548C\u5206\u7EC4"),2),!1):[fe.f0.ProgressChart,fe.f0.GaugeChart].includes(ee)?(0,xe.Yc)(c.type)||c.type===Ie.DN.SCORE?!0:(g&&alert(_l("\u53EA\u5141\u8BB8\u6DFB\u52A0\u6570\u503C\u548C\u516C\u5F0F\u5B57\u6BB5"),2),!1):!0},s.handleAddControl=function(c){var g=s.props,x=g.yaxisList,S=g.currentReport,X=g.onChangeCurrentReport;s.handleVerification(c,!0)&&s.props.onAddAxis(c)},s.handleNormType=function(c,g){var x=s.props,S=x.yaxisList,X=x.onChangeCurrentReport,re=S.map(function(ee){return ee.controlId===c&&(ee.normType=g),ee});X({yaxisList:re})},s.handleEmptyShowType=function(c,g){var x=s.props,S=x.yaxisList,X=x.onChangeCurrentReport,re=S.map(function(ee){return ee.controlId===c&&(ee.emptyShowType=g),ee});X({yaxisList:re})},s.handleChangeControlId=function(c){s.setState({currentControlId:c})},s.handleChangeRename=function(c){var g=s.state.currentControlId,x=s.props,S=x.yaxisList,X=x.onChangeCurrentReport,re=S.map(function(ee){return ee.controlId===g&&(ee.rename=c),ee});X({yaxisList:re})},s.handleSortEnd=function(c){var g=c.oldIndex,x=c.newIndex;if(g!==x){var S=s.props,X=S.currentReport,re=S.yaxisList,ee=S.onChangeCurrentReport,ge=X.reportType,Se=X.config,Ze=(0,Mt.Rp)(re,g,x),Je={yaxisList:Ze};if(ge===fe.f0.ProgressChart){var At=Se.targetList||[];Je.config=(0,E.default)({},Se,{targetList:(0,Mt.Rp)(At,g,x)})}ee(Je)}},s.state={currentControlId:null},s}return(0,J.default)(O,[{key:"renderModal",value:function(){var s=this,c=this.props.yaxisList,g=this.state.currentControlId,x=Fe().find(c,{controlId:g})||{};return r.createElement(Rn,{dialogVisible:!!g,rename:x.rename||x.controlName,onChangeRename:this.handleChangeRename,onHideDialogVisible:function(){s.setState({currentControlId:null})}})}},{key:"renderWithoutFidldItem",value:function(){var s=this.props,c=s.currentReport,g=s.yaxisList,x=s.split,S=c.reportType,X=c.xaxes,re=r.createElement(pn,{onVerification:this.handleVerification,onAddControl:this.handleAddControl});return[fe.f0.PieChart,fe.f0.FunnelChart].includes(S)?(X.controlId?Fe().isEmpty(g):!0)&&re:[fe.f0.CountryLayer,fe.f0.WordCloudChart,fe.f0.GaugeChart,fe.f0.ScatterChart,fe.f0.BidirectionalBarChart].includes(S)?Fe().isEmpty(g)&&re:re}},{key:"render",value:function(){var s=this.props,c=s.name,g=s.currentReport,x=s.axisControls,S=s.allControls,X=s.yaxisList,re=g.reportType;return r.createElement("div",{className:"fieldWrapper mBottom20"},r.createElement("div",{className:"Bold mBottom12"},c),r.createElement(kn,{axis:"xy",helperClass:"sortableNumberField",list:X,allControls:S,axisControls:x,currentReport:g,shouldCancelStart:function(ge){var Se=ge.target;return!Se.classList.contains("icon-drag_indicator")},onClear:this.props.onRemoveAxis,onNormType:this.handleNormType,onEmptyShowType:this.handleEmptyShowType,onChangeControlId:this.handleChangeControlId,onChangeCurrentReport:this.props.onChangeCurrentReport,onSortEnd:this.handleSortEnd}),this.renderWithoutFidldItem(),this.renderModal())}}]),O}(r.Component),En=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.handleVerification=function(c){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(0,xe.Yc)(c.type)||c.type===Ie.DN.SCORE?!0:(g&&alert(_l("\u53EA\u5141\u8BB8\u6DFB\u52A0\u6570\u503C\u548C\u516C\u5F0F\u5B57\u6BB5"),2),!1)},s.handleAddControl=function(c){s.handleVerification(c,!0)&&s.props.addValueAxis(c)},s.state={},s}return(0,J.default)(O,[{key:"renderOverlay",value:function(){var s=this,c=this.props.valueAxis;return r.createElement(Y.default,{className:"chartControlMenu chartMenu",expandIcon:r.createElement(L.Z,{icon:"arrow-right-tip"})},(0,xe.Yc)(c.controlType,!1)&&r.createElement(Y.default.SubMenu,{popupClassName:"chartMenu",title:_l("\u8BA1\u7B97"),popupOffset:[0,-15]},xe.Th.filter(function(g){return g.value!==5}).map(function(g){return r.createElement(Y.default.Item,{style:{width:120,color:g.value===c.normType?"#1e88e5":null},key:g.value,onClick:function(){s.props.changeValueAxis({normType:g.value})}},g.text)})),!(0,xe.Yc)(c.controlType)&&r.createElement(Y.default.SubMenu,{popupClassName:"chartMenu",title:_l("\u8BA1\u7B97"),popupOffset:[0,-15]},[{text:_l("\u8BA1\u6570"),value:5},{text:_l("\u53BB\u91CD\u8BA1\u6570"),value:6}].map(function(g){return r.createElement(Y.default.Item,{style:{width:120,color:g.value===c.normType?"#1e88e5":null},key:g.value,onClick:function(){s.props.changeValueAxis({normType:g.value})}},g.text)})))}},{key:"renderAxis",value:function(){var s=this.props,c=s.valueAxis,g=s.allControls,x=s.axisControls,S=c.rename&&c.rename!==c.controlName?c.controlName:null,X=(0,xe.Yc)(c.controlType,!1),re=_.find(x,{controlId:c.controlId}),ee=_.find(g,{controlId:c.controlId})||{};return r.createElement("div",{className:"flexRow valignWrapper fidldItem"},re?r.createElement(j.default,{title:S},r.createElement("span",{className:"Gray flex ellipsis"},X&&_.find(xe.Th,{value:c.normType}).text+": ",re.controlName)):ee.strDefault==="10"?r.createElement("span",{className:"Red flex ellipsis"},ee.controlName+" ("+_l("\u65E0\u6548\u7C7B\u578B")+")"):r.createElement(j.default,{title:"ID: "+c.controlId},r.createElement("span",{className:"Red flex ellipsis"},_l("\u5B57\u6BB5\u5DF2\u5220\u9664"))),X&&r.createElement(U.default,{overlay:this.renderOverlay(re),trigger:["click"],placement:"bottomRight"},r.createElement(L.Z,{className:"Gray_9e Font18 pointer",icon:"arrow-down-border"})),r.createElement(L.Z,{className:"Gray_9e Font18 pointer mLeft10",icon:"close",onClick:this.props.removeValueAxis}))}},{key:"render",value:function(){var s=this,c=this.props,g=c.name,x=c.valueAxis;return r.createElement("div",{className:"fieldWrapper mBottom20"},r.createElement("div",{className:"Bold mBottom8 title"},g),x.controlId?this.renderAxis():r.createElement(pn,{allowInput:!0,inputValue:x.value?Number(x.value):x.value,onChnageInputValue:function(X,re){s.props.changeValueAxis({value:X},re)},onVerification:this.handleVerification,onAddControl:this.handleAddControl}))}}]),O}(r.Component),fn=xe.qp.filter(function(Ye){return[5,8,9,10,11].includes(Ye.value)}),jn=xe.x9.filter(function(Ye){return[11,12,14].includes(Ye.value)}),Ta=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.handleVerification=function(c){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=s.props,S=x.reportType,X=x.xaxes,re=x.yaxisList;return[fe.f0.ScatterChart].includes(S)&&Fe().find(re,{controlId:c.controlId})?(g&&alert(_l("\u6570\u503C\u548C\u989C\u8272\u4E0D\u5141\u8BB8\u91CD\u590D"),2),!1):[fe.f0.BarChart,fe.f0.RadarChart].includes(S)&&X.controlId&&re.length>1?(g&&alert(_l("\u591A\u6570\u503C\u65F6\u4E0D\u80FD\u540C\u65F6\u914D\u7F6E\u7EF4\u5EA6\u548C\u5206\u7EC4"),2),!1):(0,xe.Yc)(c.type)?(g&&alert("\u6570\u503C\u548C\u516C\u5F0F\u5B57\u6BB5\u4E0D\u80FD\u5206\u7EC4",2),!1):!0},s.handleAddControl=function(c){if(s.handleVerification(c,!0)){var g=s.props,x=g.split,S=g.disableParticleSizeTypes,X=(0,xe.$$)(c.type),re=(0,xe.Wf)(c.type),ee=X?fn:xe.yx,ge=(0,xe.ad)(c.controlId,S),Se=ee.map(function(Ze){return Ze.value}).filter(function(Ze){return!ge.includes(Ze)});s.props.onChangeCurrentReport((0,E.default)({controlId:c.controlId,particleSizeType:X||re?Se[0]:0},c))}},s.handleClear=function(){var c=s.props.split;s.props.onChangeCurrentReport({controlId:null,particleSizeType:0})},s.handleUpdateTimeParticleSizeType=function(c){var g=s.props.split;s.props.onChangeCurrentReport({particleSizeType:c})},s.getName=function(){var c=s.props.reportType;return c===fe.f0.DualAxes?_l("\u5206\u7EC4(Y\u8F74)"):c===fe.f0.BidirectionalBarChart?_l("\u5206\u7EC4(\u6570\u503C1)"):c===fe.f0.ScatterChart?_l("\u989C\u8272(\u7EF4\u5EA6)"):_l("\u5206\u7EC4")},s}return(0,J.default)(O,[{key:"renderTimeOverlay",value:function(s){var c=this,g=this.props,x=g.split,S=g.disableParticleSizeTypes,X=Fe().get(s,"advancedSetting.showtype"),re=(0,xe.ad)(x.controlId,S),ee=x.controlType===Ie.DN.TIME?jn:fn;return r.createElement(Y.default,{className:"chartControlMenu chartMenu"},ee.map(function(ge){return r.createElement(Y.default.Item,{className:"valignWrapper",disabled:ge.value===x.particleSizeType?!0:re.includes(ge.value),style:{color:ge.value===x.particleSizeType?"#1e88e5":null},key:ge.value,onClick:function(){c.handleUpdateTimeParticleSizeType(ge.value)}},r.createElement("div",{className:"flex"},ge.text),r.createElement("div",{className:"Gray_75 Font12"},ge.getTime()))}))}},{key:"renderAreaOverlay",value:function(){var s=this,c=this.props,g=c.split,x=c.disableParticleSizeTypes,S=(0,xe.ad)(g.controlId,x);return r.createElement(Y.default,{className:"chartControlMenu chartMenu"},xe.yx.map(function(X){return r.createElement(Y.default.Item,{className:"valignWrapper",disabled:X.value===g.particleSizeType?!0:S.includes(X.value),style:{color:X.value===g.particleSizeType?"#1e88e5":null},key:X.value,onClick:function(){s.handleUpdateTimeParticleSizeType(X.value)}},r.createElement("div",{className:"flex"},X.text))}))}},{key:"renderAxis",value:function(s){var c=this.props,g=c.split,x=c.axisControls,S=c.allControls,X=Fe().find(x,{controlId:g.controlId}),re=Fe().find(S,{controlId:g.controlId})||{},ee=(0,xe.$$)(g.controlType),ge=(0,xe.Wf)(g.controlType);return r.createElement("div",{className:"flexRow valignWrapper fidldItem"},X?r.createElement("span",{className:"Gray flex ellipsis"},X.controlName,ee&&" ("+Fe().find(xe.qp,{value:g.particleSizeType||1}).text+")",ge&&" ("+Fe().get(Fe().find(xe.yx,{value:g.particleSizeType||1}),"text")+")"):re.strDefault==="10"?r.createElement("span",{className:"Red flex ellipsis"},re.controlName+" ("+_l("\u65E0\u6548\u7C7B\u578B")+")"):r.createElement(j.default,{title:"ID: "+g.controlId},r.createElement("span",{className:"Red flex ellipsis"},_l("\u5B57\u6BB5\u5DF2\u5220\u9664"))),ee&&r.createElement(U.default,{overlay:this.renderTimeOverlay(X),trigger:["click"],placement:"bottomRight"},r.createElement(L.Z,{className:"Gray_9e Font18 pointer",icon:"arrow-down-border"})),ge&&r.createElement(U.default,{overlay:this.renderAreaOverlay(X),trigger:["click"],placement:"bottomRight"},r.createElement(L.Z,{className:"Gray_9e Font18 pointer",icon:"arrow-down-border"})),r.createElement(L.Z,{className:"Gray_9e Font18 pointer mLeft10",icon:"close",onClick:this.handleClear}))}},{key:"render",value:function(){var s=this.props,c=s.name,g=s.split,x=s.yaxisList,S=s.reportType,X=[fe.f0.BarChart,fe.f0.RadarChart,fe.f0.ScatterChart].includes(S)?!0:x.length===1;return X?r.createElement("div",{className:"fieldWrapper mBottom20"},r.createElement("div",{className:"Bold mBottom12"},c||this.getName()),g.controlId?this.renderAxis():r.createElement(pn,{onVerification:this.handleVerification,onAddControl:this.handleAddControl})):null}}]),O}(r.Component),zn=(0,Ot.Z)([`
  padding: 8px 5px;
  border-bottom: 1px solid #DDDDDDFF;
  input {
    color: #202020;
    border: none;
  }
  .icon-close:hover {
    color: #2196F3 !important;
  }
`],[`
  padding: 8px 5px;
  border-bottom: 1px solid #DDDDDDFF;
  input {
    color: #202020;
    border: none;
  }
  .icon-close:hover {
    color: #2196F3 !important;
  }
`]),pa=(0,Ot.Z)([`
  padding: 0 10px;
  height: 28px;
  line-height: 28px;
  color: #757575;
  margin-right: 8px;
  border-radius: 3px;
  background-color: #f5f5f5;
  cursor: pointer;
  &:hover {
    color: #2196F3;
    background-color: #f0f0f0;
  }
`],[`
  padding: 0 10px;
  height: 28px;
  line-height: 28px;
  color: #757575;
  margin-right: 8px;
  border-radius: 3px;
  background-color: #f5f5f5;
  cursor: pointer;
  &:hover {
    color: #2196F3;
    background-color: #f0f0f0;
  }
`]),Ea=(0,Ot.Z)([`
  width: 120px;
  margin-right: 10px !important;
  &.ant-select-sm {
    .ant-select-selector, .ant-select-selection-item {
      height: 28px !important;
      line-height: 26px !important;
      box-shadow: none !important;
    }
  }
`],[`
  width: 120px;
  margin-right: 10px !important;
  &.ant-select-sm {
    .ant-select-selector, .ant-select-selection-item {
      height: 28px !important;
      line-height: 26px !important;
      box-shadow: none !important;
    }
  }
`]),la=dt.ZP.div(zn),Kn=dt.ZP.div(pa),sa=(0,dt.ZP)(ce.default)(Ea),ba=2,Fa=(0,Mt.W6)(function(Ye){var O=Ye.selected;return r.createElement("i",{style:{visibility:O?null:"hidden"},className:"icon icon-drag Gray_9e Font16 Right ThemeHoverColor3 Hand dragHandle"})}),wa=(0,Mt.W8)(function(Ye){var O=Ye.index,V=Ye.selected,s=Ye.column,c=Ye.attribute,g=Ye.handleItemClick,x=Ye.handleChangeSize,S=Fe().find(V,{controlId:s.controlId});return r.createElement("div",{className:"showControlsColumnCheckItem flexRow Hand"},r.createElement("div",{className:"flex overflow_ellipsis"},r.createElement(L.Z,{onClick:function(){c||g(s)},icon:S?"ic_toggle_on":"ic_toggle_off",style:{cursor:c?"auto":null},className:"switchIcon Font22 mRight12"}),r.createElement("i",{className:N()("icon Gray_9e mRight6 Font16","icon-"+(0,ke.hB)(s.type))}),r.createElement("span",{className:"Font14"},s.controlName)),s.type===14&&S&&r.createElement(sa,{className:"chartSelect",value:S.size,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),size:"small",onChange:function(re){x(S.controlId,re)}},xe.Q$.map(function(X){return r.createElement(ce.default.Option,{key:X.value,className:"selectOptionWrapper",value:X.value},X.text)})),r.createElement(Fa,{selected:S}))}),Na=(0,Mt.JN)(function(Ye){var O=Ye.filteredColumns,V=Ye.selected,s=Ye.attribute,c=Ye.handleItemClick,g=Ye.handleChangeSize;return r.createElement("div",{className:"columnCheckList"},!O.length&&r.createElement("div",{className:"emptyTip TxtCenter"},_l("\u6CA1\u6709\u641C\u7D22\u7ED3\u679C")),O.map(function(x,S){return r.createElement(wa,{key:S,index:S,selected:V,attribute:s.controlId===x.controlId,column:x,handleItemClick:c,handleChangeSize:g})}))}),Za=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.handleSave=function(){var c=s.state,g=c.columns,x=c.selected,S=s.props.relationControls,X=Fe().find(S,{attribute:1}),re=g.filter(function(Se){return Fe().find(x,{controlId:Se.controlId})}),ee=re.map(function(Se){return Fe().find(x,{controlId:Se.controlId})}),ge=ee.length===1&&Fe().find(ee,{controlId:X.controlId});s.props.onUpdateXaxisFields(ge?[]:ee),s.props.onHideDialogVisible(!1)},s.handleSortEnd=function(c){var g=c.oldIndex,x=c.newIndex,S=s.state.columns,X=(0,Mt.Rp)(S,g,x);s.setState({columns:X})},s.handleShowAll=function(){var c=s.state.columns;s.setState({selected:c.map(function(g){return{controlId:g.controlId,size:ba}})})},s.handleHideAll=function(){var c=s.props.relationControls,g=s.state.selected,x=Fe().find(c,{attribute:1});s.setState({selected:g.filter(function(S){return S.controlId==x.controlId})})},s.handleItemClick=function(c){var g=s.state.selected;Fe().find(g,{controlId:c.controlId})?s.setState({selected:g.filter(function(x){return x.controlId!==c.controlId})}):s.setState({selected:g.concat({controlId:c.controlId,size:ba})})},s.handleChangeSize=function(c,g){var x=s.state.selected;s.setState({selected:x.map(function(S){return S.controlId===c?(0,E.default)({},S,{size:g}):S})})},s.state={searchValue:"",selected:[],columns:[]},s}return(0,J.default)(O,[{key:"componentWillReceiveProps",value:function(s){if(s.dialogVisible&&!this.props.dialogVisible){var c=s.relationControls.filter(function(re){return![10010,21,22,25,29,41,42,43,45,47,49,51,52].includes(re.type)&&!Fe().find(s.fields,{controlId:re.controlId})}).sort(function(re,ee){return re.row===ee.row?re.col-ee.col:re.row-ee.row}),g=s.fields.map(function(re){return Fe().find(s.relationControls,{controlId:re.controlId})}),x=Fe().find(s.relationControls,{attribute:1})||{},S={controlId:x.controlId,controlName:x.controlName,controlType:x.controlType},X=Fe().find(s.fields,{controlId:x.controlId});this.setState({columns:g.concat(c),selected:X?s.fields:[S].concat(s.fields)})}}},{key:"renderFooter",value:function(){var s=this;return r.createElement("div",{className:"mTop20 mBottom10 pRight8"},r.createElement(k.default,{autoInsertSpaceInButton:!1},r.createElement(oe.default,{type:"link",onClick:function(){s.props.onHideDialogVisible(!1)}},_l("\u53D6\u6D88")),r.createElement(oe.default,{type:"primary",onClick:this.handleSave},_l("\u786E\u8BA4"))))}},{key:"render",value:function(){var s=this,c=this.props,g=c.dialogVisible,x=c.relationControls,S=this.state,X=S.searchValue,re=S.columns,ee=S.selected,ge=re.filter(function(Se){return(Se.controlName||"").toLocaleLowerCase().includes(X.toLocaleLowerCase())});return r.createElement(le.Z,{title:_l("\u663E\u793A\u5B57\u6BB5"),width:580,className:"chartModal",visible:g,destroyOnClose:!0,centered:!0,closeIcon:r.createElement(L.Z,{icon:"close",className:"Font20 pointer Gray_9e"}),footer:this.renderFooter(),onCancel:function(){s.props.onHideDialogVisible(!1)}},r.createElement(la,{className:"flexRow valignWrapper Gray_9e"},r.createElement(L.Z,{icon:"search",className:"Font18 mRight3"}),r.createElement("input",{value:X,className:"flex",placeholder:_l("\u641C\u7D22\u5B57\u6BB5"),onChange:function(Ze){s.setState({searchValue:Ze.target.value.trim()})}})),r.createElement("div",{className:"flexRow mTop10 mBottom6"},r.createElement("div",{className:"flexRow flex"},r.createElement(Kn,{onClick:this.handleShowAll},_l("\u663E\u793A\u5168\u90E8")),r.createElement(Kn,{onClick:this.handleHideAll},_l("\u9690\u85CF\u5168\u90E8"))),!Fe().isEmpty(ee)&&r.createElement("div",{className:"Gray_75"},_l("\u663E\u793A%0\u5217",ee.length))),r.createElement("div",{className:"sortableList flex",style:{overflow:"auto",height:360}},r.createElement(Na,{useDragHandle:!0,axis:"y",lockAxis:"y",helperClass:"active",filteredColumns:ge,attribute:Fe().find(x,{attribute:1}),selected:ee,onSortEnd:this.handleSortEnd,handleItemClick:this.handleItemClick,handleChangeSize:this.handleChangeSize})))}}]),O}(r.Component),ya,An,ma=(0,Ot.Z)([`
  position: relative;
  &:hover {
    .sortableDrag {
      opacity: 1;
    }
  }
  .sortableDrag {
    position: absolute;
    top: 7px;
    left: -18px;
    opacity: 0;
    &:hover {
      opacity: 1;
    }
  }
`],[`
  position: relative;
  &:hover {
    .sortableDrag {
      opacity: 1;
    }
  }
  .sortableDrag {
    position: absolute;
    top: 7px;
    left: -18px;
    opacity: 0;
    &:hover {
      opacity: 1;
    }
  }
`]),fa=dt.ZP.div(ma),Ma=function(O){var V=O.axis,s=O.type,c=O.normType,g=O.showFormat,x=O.particleSizeType,S=O.disableParticleSizeTypes,X=O.xaxisEmpty,re=O.xaxisEmptyType,ee=O.emptyShowType,ge=O.onChangeData,Se=O.onUpdateParticleSizeType,Ze=O.onSelectReNameId,Je=O.onShowControl,At=O.verifyNumber,Jt=(0,xe.Yc)(V.type,!1),Kt=(0,xe.$$)(V.type),ln=(0,xe.Wf)(V.type),Gn=V.type===29,yn=(0,xe.ad)(V.controlId,S),na=Fe().get(V,"advancedSetting.showtype"),ga=Kt?(0,xe.VM)(xe._5,{showtype:na,controlType:V.type}):[],ua=(0,xe.xl)(xe.x9,{showtype:na,controlType:V.type});return r.createElement(Y.default,{className:"chartControlMenu chartMenu",expandIcon:r.createElement(L.Z,{icon:"arrow-right-tip"})},r.createElement(Y.default.Item,{onClick:function(){Ze(V.controlId,x)}},_l("\u91CD\u547D\u540D")),s?r.createElement(r.Fragment,null,r.createElement(Y.default.SubMenu,{popupClassName:"chartMenu",title:r.createElement("div",{className:"flexRow valignWrapper w100"},r.createElement("div",{className:"flex"},_l("\u7EDF\u8BA1\u7A7A\u503C")),r.createElement("div",{className:"Font12 Gray_75 emptyTypeName"},X?Fe().find(xe.TH,{value:re}).text:_l("\u4E0D\u663E\u793A"))),popupOffset:[0,-15]},r.createElement(Y.default.Item,{style:{width:120,color:X?null:"#1e88e5"},onClick:function(){ge(V.controlId,{xaxisEmpty:!1})}},_l("\u4E0D\u663E\u793A")),xe.TH.map(function(Xn){return r.createElement(Y.default.Item,{style:{width:120,color:X&&Xn.value===re?"#1e88e5":null},key:Xn.value,onClick:function(){ge(V.controlId,{xaxisEmpty:!0,xaxisEmptyType:Xn.value})}},Xn.text)}))):(Jt||[1e7,10000001].includes(V.type))&&r.createElement(Y.default.SubMenu,{popupClassName:"chartMenu",title:r.createElement("div",{className:"flexRow valignWrapper w100"},r.createElement("div",{className:"flex"},_l("\u7A7A\u503C\u663E\u793A")),r.createElement("div",{className:"Font12 Gray_75 emptyTypeName"},Fe().find(xe.n7,{value:ee}).text)),popupOffset:[0,-15]},xe.n7.map(function(Xn){return r.createElement(Y.default.Item,{style:{width:120,color:Xn.value===ee?"#1e88e5":null},key:Xn.value,onClick:function(){ge(V.controlId,{emptyShowType:Xn.value})}},Xn.text)})),Jt&&At&&r.createElement(Y.default.SubMenu,{popupClassName:"chartMenu",title:_l("\u8BA1\u7B97"),popupOffset:[0,-15]},xe.Th.filter(function(Xn){return Xn.value!==5}).map(function(Xn){return r.createElement(Y.default.Item,{style:{width:120,color:Xn.value===c?"#1e88e5":null},key:Xn.value,onClick:function(){ge(V.controlId,{normType:Xn.value})}},Xn.text)})),!(0,xe.Yc)(V.type)&&At&&r.createElement(Y.default.SubMenu,{popupClassName:"chartMenu",title:_l("\u8BA1\u7B97"),popupOffset:[0,-15]},xe.MU.map(function(Xn){return r.createElement(Y.default.Item,{className:"valignWrapper",style:{width:120,color:Xn.value===c?"#1e88e5":null},key:Xn.value,onClick:function(){ge(V.controlId,{normType:Xn.value})}},r.createElement("div",{className:"flex"},Xn.text),Xn.value===7&&r.createElement(j.default,{title:_l("\u4EC5\u663E\u793A\u4E00\u4E2A")},r.createElement(L.Z,{icon:"info",className:"Font16 pointer Gray_9e"})))})),s&&Kt&&r.createElement(r.Fragment,null,r.createElement(Y.default.SubMenu,{popupClassName:"chartMenu",title:_l("\u5F52\u7EC4"),popupOffset:[0,-15]},r.createElement(Y.default.ItemGroup,{title:_l("\u65F6\u95F4")},ga.map(function(Xn){return r.createElement(Y.default.Item,{className:"valignWrapper",disabled:Xn.value===x?!0:yn.includes(Xn.value),style:{width:200,color:Xn.value===x?"#1e88e5":null},key:Xn.value,onClick:function(){Se(V.controlId,x,Xn.value)}},r.createElement("div",{className:"flex"},Xn.text),r.createElement("div",{className:"Gray_75 Font12"},Xn.getTime()))})),!!ua.length&&r.createElement(r.Fragment,null,r.createElement(Y.default.Divider,null),r.createElement(Y.default.ItemGroup,{title:_l("\u96C6\u5408")},ua.map(function(Xn){return r.createElement(Y.default.Item,{className:"valignWrapper",disabled:Xn.value===x?!0:yn.includes(Xn.value),style:{width:200,color:Xn.value===x?"#1e88e5":null},key:Xn.value,onClick:function(){Se(V.controlId,x,Xn.value)}},r.createElement("div",{className:"flex"},Xn.text),r.createElement("div",{className:"Gray_75 Font12"},Xn.getTime()))})))),r.createElement(Y.default.SubMenu,{popupClassName:"chartMenu",title:_l("\u65E5\u671F\u683C\u5F0F"),popupOffset:[0,-15]},xe.Xr.map(function(Xn){return r.createElement(Y.default.Item,{className:"valignWrapper",style:{width:200,color:Xn.value===g?"#1e88e5":null},key:Xn.value,onClick:function(){ge(V.controlId,{showFormat:Xn.value})}},r.createElement("div",{className:"flex"},Xn.getTime()))}))),s&&ln&&r.createElement(Y.default.SubMenu,{popupClassName:"chartMenu",title:_l("\u5F52\u7EC4"),popupOffset:[0,-15]},xe.yx.map(function(Xn){return r.createElement(Y.default.Item,{disabled:Xn.value===x?!0:yn.includes(Xn.value),style:{width:120,color:Xn.value===x?"#1e88e5":null},key:Xn.value,onClick:function(){Se(V.controlId,x,Xn.value)}},Xn.text)})),V.type===35&&r.createElement(Y.default.SubMenu,{popupClassName:"chartMenu",title:_l("\u5F52\u7EC4"),popupOffset:[0,-15]},xe.nq.map(function(Xn){return r.createElement(Y.default.Item,{disabled:Xn.value===x,style:{width:120,color:Xn.value===(x||1)?"#1e88e5":null},key:Xn.value,onClick:function(){Se(V.controlId,x,Xn.value)}},Xn.text)})),Gn&&s==="lines"&&r.createElement(Y.default.Item,{onClick:function(){Je(V.controlId)}},_l("\u663E\u793A\u5B57\u6BB5")))},Ya=(0,Mt.W8)(function(Ye){var O=Ye.type,V=Ye.item,s=Ye.axisControls,c=Ye.allControls,g=Ye.onClear,x=Ye.verifyNumber,S=Ye.disableParticleSizeTypes,X=Ye.onUpdateParticleSizeType,re=Ye.onChangeData,ee=Ye.onShowControl,ge=Ye.onSelectReNameId,Se=Fe().find(s,{controlId:V.controlId})||{},Ze=Fe().find(c,{controlId:V.controlId})||{},Je=(0,xe.$$)(Se.type),At=(0,xe.Wf)(Se.type),Jt={axis:Se,type:O,normType:V.normType,particleSizeType:V.particleSizeType,xaxisEmpty:V.xaxisEmpty,emptyShowType:V.emptyShowType,xaxisEmptyType:V.xaxisEmptyType,showFormat:V.showFormat,disableParticleSizeTypes:S,onUpdateParticleSizeType:X,onChangeData:re,onShowControl:ee,onSelectReNameId:ge,verifyNumber:x},Kt=V.rename&&V.rename!==Se.controlName?Se.controlName:null;return r.createElement(fa,{className:"mBottom12"},r.createElement(L.Z,{className:"sortableDrag Font20 pointer Gray_bd ThemeHoverColor3",icon:"drag_indicator"}),r.createElement("div",{className:"flexRow valignWrapper fidldItem mBottom0",key:V.controlId},Se.controlId?r.createElement(j.default,{title:Kt},r.createElement("span",{className:"Gray flex ellipsis"},x&&![1e7,10000001].includes(Se.type)&&Fe().find(xe.Th.concat(xe.MU),{value:V.normType}).text+": ",V.rename||Se.controlName,!x&&r.createElement(r.Fragment,null,Je&&" ("+Fe().find(xe.qp,{value:V.particleSizeType||1}).text+")",At&&" ("+Fe().find(xe.yx,{value:V.particleSizeType||1}).text+")"))):Ze.strDefault==="10"?r.createElement("span",{className:"Red flex ellipsis"},Ze.controlName+" ("+_l("\u65E0\u6548\u7C7B\u578B")+")"):r.createElement(j.default,{title:"ID: "+V.controlId},r.createElement("span",{className:"Red flex ellipsis"},_l("\u5B57\u6BB5\u5DF2\u5220\u9664"))),r.createElement(U.default,{trigger:["click"],overlay:Ma(Jt),placement:"bottomRight"},r.createElement(L.Z,{className:"Gray_9e Font18 pointer",icon:"arrow-down-border"})),r.createElement(L.Z,{className:"Gray_9e Font18 pointer mLeft10",icon:"close",onClick:function(){g(V)}})))}),Ba=(0,Mt.JN)(function(Ye){var O=Ye.list,V=(0,xt.Z)(Ye,["list"]);return r.createElement("div",null,O.map(function(s,c){return r.createElement(Ya,(0,E.default)({key:c,sortIndex:c,index:c,item:s},V))}))}),La=(ya=(0,Yt.$j)(function(Ye){return(0,E.default)({},Fe().pick(Ye.statistics,["worksheetInfo"]))}),ya(An=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.handleVerification=function(c){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=s.props,S=x.list,X=x.verifyNumber;return!(0,xe.$$)(c.type)&&Fe().find(S,{controlId:c.controlId})?(g&&alert(_l("\u4E0D\u5141\u8BB8\u6DFB\u52A0\u91CD\u590D\u5B57\u6BB5"),2),!1):!X&&[1e7,10000001].includes(c.type)?(g&&alert(_l("\u4E0D\u5141\u8BB8\u6DFB\u52A0\u8BA1\u7B97\u5B57\u6BB5"),2),!1):!0},s.handleAddControl=function(c){var g=s.props,x=g.list,S=g.verifyNumber,X=g.disableParticleSizeTypes;s.handleVerification(c,!0)&&s.props.onAdd(c)},s.handleSelectReNameId=function(c,g){var x=s.props.verifyNumber,S=x?{controlId:c}:{controlId:c,particleSizeType:g},X=Fe().find(s.props.list,S)||{};s.setState({resetNameVisible:!0,currentControl:X})},s.handleShowControl=function(c){var g=s.props,x=g.worksheetInfo,S=g.list,X=x.columns,re=Fe().find(X,{controlId:c})||{},ee=Fe().find(S,{controlId:c})||{};s.setState({showControlVisible:!0,currentControl:(0,E.default)({},ee,{relationControls:re.relationControls})})},s.handleChangeRename=function(c){var g=s.props.list,x=s.state.currentControl,S=g.map(function(X){return X.controlId===x.controlId&&x.particleSizeType===X.particleSizeType&&(X.rename=c),X});s.props.onUpdateList(S)},s.handleUpdateParticleSizeType=function(c,g,x){var S=s.props.list,X=g?c+"-"+g:c,re=S.map(function(ee){return ee.controlId===c&&ee.particleSizeType===g&&(ee.particleSizeType=x),ee});s.props.onUpdateList(re,X)},s.handleChangeData=function(c,g){var x=s.props.list,S=x.map(function(X){return X.controlId===c?(0,E.default)({},X,g):X});s.props.onUpdateList(S)},s.handleSortEnd=function(c){var g=c.oldIndex,x=c.newIndex;if(g!==x){var S=(0,Mt.Rp)(Fe().cloneDeep(s.props.list),g,x);s.props.onUpdateList(S)}},s.state={resetNameVisible:!1,showControlVisible:!1,currentControl:{}},s}return(0,J.default)(O,[{key:"renderModal",value:function(){var s=this,c=this.state,g=c.resetNameVisible,x=c.showControlVisible,S=c.currentControl;return r.createElement(r.Fragment,null,r.createElement(Rn,{dialogVisible:g,rename:S.rename||S.controlName,onChangeRename:this.handleChangeRename,onHideDialogVisible:function(){s.setState({resetNameVisible:!1,currentControl:{}})}}),r.createElement(Za,{dialogVisible:x,relationControls:S.relationControls||[],fields:S.fields||[],onUpdateXaxisFields:function(re){s.handleChangeData(S.controlId,{fields:re})},onHideDialogVisible:function(){s.setState({showControlVisible:!1})}}))}},{key:"render",value:function(){var s=this.props,c=s.type,g=s.name,x=s.list,S=s.axisControls,X=s.allControls,re=s.disableParticleSizeTypes,ee=s.verifyNumber;return r.createElement("div",{className:"fieldWrapper mBottom20"},r.createElement("div",{className:"Bold mBottom12"},g),r.createElement(Ba,{axis:"xy",helperClass:"sortableNumberField",type:c,list:x,axisControls:S,allControls:X,verifyNumber:ee,disableParticleSizeTypes:re,onClear:this.props.onRemove,onChangeData:this.handleChangeData,onUpdateParticleSizeType:this.handleUpdateParticleSizeType,onSelectReNameId:this.handleSelectReNameId,onShowControl:this.handleShowControl,shouldCancelStart:function(Se){var Ze=Se.target;return!Ze.classList.contains("icon-drag_indicator")},onSortEnd:this.handleSortEnd}),r.createElement(pn,{onVerification:this.handleVerification,onAddControl:this.handleAddControl}),this.renderModal())}}]),O}(r.Component))||An),Qa=t(8177),nr=t.n(Qa),Rr=t(88902),hr=t.n(Rr),yr=t(52945),br=t.n(yr),Lr=t(44894),lr=t(15742),Or=t(52877),Vr=t(3540),Kr=t(31546),Br=t(59957),kr=t(26358),ja=t(44253),ur=t(5420),vr=t(87600),Pr,Gr,cr,Cr,Zr;function ar(Ye,O,V,s,c){var g={};return Object.keys(s).forEach(function(x){g[x]=s[x]}),g.enumerable=!!g.enumerable,g.configurable=!!g.configurable,("value"in g||g.initializer)&&(g.writable=!0),g=V.slice().reverse().reduce(function(x,S){return S(Ye,O,x)||x},g),c&&g.initializer!==void 0&&(g.value=g.initializer?g.initializer.call(c):void 0,g.initializer=void 0),g.initializer===void 0&&(Object.defineProperty(Ye,O,g),g=null),g}var mo=[ja.W5.ISNULL,ja.W5.HASVALUE,ja.W5.BETWEEN,ja.W5.NBETWEEN,ja.W5.NORMALUSER,ja.W5.PORTALUSER,ja.W5.DATE_BETWEEN,ja.W5.DATE_NBETWEEN],Oo=[ja.v8.ATTACHMENT,ja.v8.SWITCH,ja.v8.AREA_INPUT_24,ja.v8.AREA_INPUT_19,ja.v8.AREA_INPUT_23,ja.v8.LOCATION],Ho=(cr=(Zr=Cr=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.setIsDynamicsourceFn=function(){var c=s.props,g=c.condition,x=g===void 0?[]:g,S=c.from,X=x.dynamicSource,re=x.isDynamicsource;return X&&X.length>0?re===void 0&&(re=!0):re===void 0&&(re=!!(Fe().includes(["relateSheet"],S)&&Fe().isUndefined(X)&&s.getIsDynamicValue())),re},s.isCanDynamicsource=function(c){var g=c.condition,x=g===void 0?[]:g,S=c.from,X=S===void 0?"":S,re=x.type,ee=re===void 0?"":re,ge=x.controlType,Se=ge===void 0?"":ge;return X==="relateSheet"&&!(!Fe().includes([27],x.controlType)&&Fe().includes(mo,ee))&&!Fe().includes(Oo,Se)},s.getIsDynamicValue=function(){var c=s.props,g=c.condition,x=c.control;return!(!Fe().includes([27],g.controlType)&&Fe().includes(mo,g.type))&&!Fe().includes(Oo,g.controlType)&&!(0,vr.CZ)(x)},s.renderOption=function(){var c=s.props,g=c.isRules,x=c.projectId,S=c.canEdit,X=c.index,re=c.control,ee=c.conditionGroupType,ge=c.relationType,Se=c.condition,Ze=c.conditionsLength,Je=c.onChange,At=c.onDelete,Jt=c.onUpdateFilter,Kt=c.from,ln=c.currentColumns,Gn=c.columns,yn=c.relateSheetList,na=c.sourceControlId,ga=na===void 0?"":na;return r.createElement(r.Fragment,null,X===0?r.createElement(Kr.Z,{disabled:!S,defaultValue:ge,isAppendToBody:!0,menuStyle:{width:"auto"},data:[{text:_l("\u4E14%25000"),value:ja.Op.AND},{text:_l("\u6216"),value:ja.Op.OR}],onChange:function(Xn){Jt({relationType:Xn})}}):r.createElement("span",{className:"relationType"},[_l("\u4E14%25000"),_l("\u6216")][ge-1]))},s.state={isDynamicsource:s.isCanDynamicsource(V)&&s.setIsDynamicsourceFn()},s}return(0,J.default)(O,[{key:"componentDidMount",value:function(){this.state={isDynamicsource:this.isCanDynamicsource(this.props)&&this.setIsDynamicsourceFn()}}},{key:"changeConditionType",value:function(s){var c=this.props,g=c.condition,x=c.onChange,S=(0,kr.Nt)(s,g);x(S),Fe().includes(mo,s)&&!Fe().includes([27],g.controlType)&&this.setState({isDynamicsource:!1})}},{key:"render",value:function(){var s=this,c=this.props,g=c.isRules,x=c.projectId,S=c.appId,X=c.canEdit,re=c.index,ee=c.control,ge=c.conditionGroupType,Se=c.relationType,Ze=c.condition,Je=c.conditionsLength,At=c.onChange,Jt=c.onDelete,Kt=c.onUpdateFilter,ln=c.from,Gn=c.currentColumns,yn=c.columns,na=c.relateSheetList,ga=c.sourceControlId,ua=ga===void 0?"":ga,Xn=c.filterDept,$a=c.isSheetFieldError,Ga=c.filterResigned,er=Ga===void 0?!0:Ga,rr=c.conditionItemForDynamicStyle,gr=(0,kr.Ou)(ee,Ze.type,ln);g&&ee&&(ee.type===29&&ee.enumDefault===2&&(gr=gr.filter(function(Oa){return!Fe().includes([ja.W5.RCEQ,ja.W5.RCNE],Oa.value)}),Fe().find(gr,function(Oa){return Oa.value===Ze.type})||this.changeConditionType(gr[0].value)),(ee.type===35||ee.type===27)&&(gr=gr.filter(function(Oa){return!Fe().includes([ja.W5.BETWEEN,ja.W5.NBETWEEN],Oa.value)}))),Xn&&ee&&ee.type===27&&(gr=gr.filter(function(Oa){return!Fe().includes([ja.W5.BETWEEN,ja.W5.NBETWEEN],Oa.value)})),ln==="subTotal"&&ee&&Fe().includes([19,23,24,27,35],ee.type)&&(gr=gr.filter(function(Oa){return!Fe().includes([ja.W5.BETWEEN,ja.W5.NBETWEEN,ja.W5.LIKE,ja.W5.NCONTAIN],Oa.value)}));var sr=ln==="relateSheet",Tr=this.getIsDynamicValue();return r.createElement("div",{className:N()("conditionItem",{readonly:!X,conditionItemForDynamicStyle:sr})},r.createElement("div",{className:N()("conditionItemHeader",{isbool:ge===ja.Cz.BOOL.value})},ee?r.createElement(r.Fragment,null,r.createElement("span",{className:N()("columnName ellipsis",{errorName:$a}),title:ee.controlName},$a?_l("%0(\u65E0\u6548\u6570\u636E)",ee.controlName):ee.controlName),ge!==ja.Cz.BOOL.value&&r.createElement("span",{className:"relation"},r.createElement(Kr.Z,{defaultValue:Ze.type||gr[0].value,disabled:!X,data:gr,isAppendToBody:!0,menuStyle:{width:"auto"},onChange:this.changeConditionType})),r.createElement("span",{className:"deleteBtn ThemeHoverColor3",onClick:function(){Jt()}},r.createElement("i",{className:"icon icon-close"}))):r.createElement("div",{className:"deletedColumn"},r.createElement("i",{className:"icon icon-info"}),r.createElement(j.default,{overlayClassName:"deleteHoverTips",overlayInnerStyle:{padding:"8px 10px"},title:r.createElement("span",null,_l("ID: %0",Ze.controlId)),placement:"bottom"},r.createElement("span",{className:"Hand"},_l("\u8BE5\u5B57\u6BB5\u5DF2\u5220\u9664"))),r.createElement("span",{className:"deleteBtn ThemeHoverColor3",onClick:function(){Jt()}},r.createElement("i",{className:"icon icon-close"})))),r.createElement("div",{className:"conditionItemContent"},sr&&r.createElement(ce.default,{className:"dynamicSource",disabled:!Tr,dropdownClassName:"dynamicSelectDropdown",value:this.state.isDynamicsource?2:1,options:Tr?ur.a0:ur.a0.filter(function(Oa){return Oa.value===1}),suffixIcon:r.createElement(L.Z,{icon:"arrow-down-border Font14"}),onChange:function(Va){s.setState({isDynamicsource:Va!==1},function(){At((0,E.default)({isDynamicsource:Va!==1},Va===1?{dynamicSource:[]}:{values:void 0,value:void 0}))})}}),ee?r.createElement("div",{className:"conditionValue"},(0,Br.Z)(ge,(0,E.default)({},Ze,{dateRange:ln==="subTotal"?18:Ze.dateRange,disabled:!X,onChange:At,control:ee,relationColumns:yn,currentColumns:Gn,relateSheetList:na,projectId:x,appId:S,sourceControlId:ua,from:ln,filterResigned:er,conditionType:Ze.controlType,isDynamicsource:this.state.isDynamicsource,globalSheetControls:this.props.globalSheetControls}))):r.createElement(Vr.Z,{className:"deletedColumn",disabled:!0}),!sr&&re!==Je-1&&r.createElement("div",{className:"conditionRelation"},this.renderOption())),sr&&re!==Je-1&&r.createElement("div",{className:"conditionRelationBox"},this.renderOption()))}}]),O}(r.Component),Cr.propTypes={isRules:a().bool,projectId:a().string,canEdit:a().bool,index:a().number,conditionGroupType:a().number,relationType:a().number,control:a().shape({}),condition:a().shape({}),conditionsLength:a().number,onChange:a().func,onDelete:a().func,onUpdateFilter:a().func},Zr),ar(cr.prototype,"changeConditionType",[Lr.Nj],nr()(cr.prototype,"changeConditionType"),cr.prototype),cr),Ko,Co,Jr,pr,fo;function oo(Ye,O,V,s,c){var g={};return Object.keys(s).forEach(function(x){g[x]=s[x]}),g.enumerable=!!g.enumerable,g.configurable=!!g.configurable,("value"in g||g.initializer)&&(g.writable=!0),g=V.slice().reverse().reduce(function(x,S){return S(Ye,O,x)||x},g),c&&g.initializer!==void 0&&(g.value=g.initializer?g.initializer.call(c):void 0,g.initializer=void 0),g.initializer===void 0&&(Object.defineProperty(Ye,O,g),g=null),g}var Xr=["relateSheet","rule","subTotal","custombutton"],Bo=(Jr=(fo=pr=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V)),c=(0,kr.aJ)({items:V.conditions});return s.state={relationType:c.relationType,conditions:c.conditions},s}return(0,J.default)(O,[{key:"componentWillReceiveProps",value:function(s){if(s.id&&s.id!==this.props.id){var c=(0,kr.aJ)({items:s.conditions});this.setState({relationType:c.relationType,conditions:c.conditions})}}},{key:"addCondition",value:function(s){if(!s){alert(_l("\u5B57\u6BB5\u4E0D\u5B58\u5728"),3);return}var c=this.props.from,g=c===void 0?"":c,x=this.state.conditions,S=(0,kr.z$)(s),X=x.concat(S);this.setState({conditions:X}),(Fe().includes(Xr,g)||(0,kr.qt)(S))&&this.handleConditionsChange(X)}},{key:"updateCondition",value:function(s,c){var g=this.props.from,x=g===void 0?"":g,S=this.state.conditions,X=S.map(function(ee,ge){return ge===s?br()({},ee,c):ee});if(this.setState({conditions:X}),Fe().includes(Xr,x))this.handleConditionsChange(X);else if(!Fe().isEqual(S.map(function(ee){return Fe().omit(ee,["folded","control"])}),X.map(function(ee){return Fe().omit(ee,["folded","control"])}))){var re=X.filter(function(ee){return(0,kr.qt)(ee)});this.handleConditionsChange(re)}}},{key:"deleteCondition",value:function(s){var c=this.state.conditions,g=c.filter(function(x,S){return S!==s});this.setState({conditions:g}),this.handleConditionsChange(g)}},{key:"handleConditionsChange",value:function(s,c){var g=this,x=this.props,S=x.onConditionsChange,X=x.feOnly,re=s.map(function(ee){return{controlId:ee.controlType===25?ee.control.dataSource.slice(1,-1):ee.controlId,dataType:ee.controlType===25?8:ee.controlType,spliceType:Fe().isUndefined(c)?g.state.relationType:c,filterType:ee.type,dateRange:ee.dateRange,dateRangeType:ee.dateRangeType,values:X&&Fe().includes([26,27,29,19,23,24,35,48],ee.controlType)?ee.fullValues:ee.values,maxValue:ee.maxValue,minValue:ee.minValue,value:ee.value,folded:ee.folded,dynamicSource:ee.dynamicSource||[],isDynamicsource:ee.isDynamicsource}});Fe().isUndefined(c)||this.setState({relationType:c}),S(re)}},{key:"handleChangeRelationType",value:function(s){this.handleConditionsChange(this.state.conditions,s)}},{key:"renderConditions",value:function(){var s=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],g=this.props,x=g.isRules,S=g.projectId,X=g.appId,re=g.canEdit,ee=g.from,ge=g.currentColumns,Se=g.relateSheetList,Ze=g.sourceControlId,Je=g.globalSheetControls,At=g.filterDept,Jt=g.filterResigned,Kt=Jt===void 0?!0:Jt,ln=this.state,Gn=ln.relationType,yn=ln.conditions;return yn.map(function(na,ga){var ua=Fe().find(c,function(er){return na.controlId===er.controlId}),Xn=ua&&(0,kr.Io)(ua.type),$a=Xn&&ja.Cz[Xn].value,Ga=(0,ke.fi)(ua);return r.createElement(Ho,{isRules:x,canEdit:re,projectId:S,appId:X,key:na.keyStr,index:ga,from:ee,filterDept:At,sourceControlId:Ze,condition:na,conditionsLength:yn.length,conditionGroupType:$a,isSheetFieldError:Ga,relationType:Gn,control:ua,filterResigned:Kt,columns:s.props.columns,currentColumns:ge,relateSheetList:Se,globalSheetControls:Je,onChange:function(rr){s.updateCondition(ga,rr)},onDelete:function(){s.deleteCondition(ga)},onUpdateFilter:function(rr){s.handleChangeRelationType(rr.relationType)}})})}},{key:"render",value:function(){var s=this.props,c=s.from,g=s.canEdit,x=s.showSystemControls,S=s.filterColumnClassName,X=s.offset,re=this.props.columns,ee=re===void 0?[]:re,ge=this.state.conditions,Se=Fe().flatten(hr()(ja.Cz).map(function(Ze){return ja.Cz[Ze].keys}));return x&&(ee=ee.filter(function(Ze){return!Fe().find(lr.nh,function(Je){return Je.controlId===Ze.controlId})}).concat(lr.nh)),ee=ee.map(kr.BM),ee=ee.filter(function(Ze){return Fe().includes(Se,Ze.type)}).filter(function(Ze){return!(Ze.type===38&&Ze.enumDefault===3)}),r.createElement("div",{className:N()("singleFilter workSheetFilter",{exist:ge.length})},this.renderConditions(ee),g&&r.createElement(Or.Z,{offset:X,from:c,comp:this.props.comp,filterColumnClassName:S,conditionCount:ge.length,columns:(0,ke.UX)(ee),onAdd:this.addCondition}))}}]),O}(r.Component),pr.propTypes={isRules:a().bool,controllable:a().bool,feOnly:a().bool,showSystemControls:a().bool,projectId:a().string,filterColumnClassName:a().string,canEdit:a().bool,columns:a().arrayOf(a().shape({})),conditions:a().arrayOf(a().shape({})),onConditionsChange:a().func},pr.defaultProps={conditions:[],onConditionsChange:function(){}},fo),oo(Jr.prototype,"addCondition",[Lr.Nj],nr()(Jr.prototype,"addCondition"),Jr.prototype),Jr),Eo=t(45231),yo=function(O){var V=(0,Xt.L)({accept:"ChartDnd",drop:function(X){O.onAddControl(X.data)},collect:function(X){return{isOver:X.isOver(),canDrop:X.canDrop()}}}),s=(0,Le.Z)(V,2),c=s[0],g=s[1],x=c.isOver?.8:1;return r.createElement("div",{ref:g,style:{opacity:x},role:"Dustbin",className:"Gray_bd centerAlign Font13 pTop10 pBottom10"},_l("\u4ECE\u5DE6\u4FA7\u62D6\u62FD\u6DFB\u52A0\u5B57\u6BB5"))},qr=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.handleAddControl=function(c){if(c.type===1e7){alert(_l("\u8BB0\u5F55\u6570\u91CF\u4E0D\u80FD\u4F5C\u4E3A\u7B5B\u9009\u6761\u4EF6"),2);return}var g=s.props.worksheetInfo.columns,x=Fe().find(g,{controlId:c.controlId});s.singleFilter.addCondition(Fe().find(g,{controlId:c.controlId}))},s.saveFilter=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],g=s.state.oldConditions;if(!Fe().isEqual(g,c)){s.setState({oldConditions:c}),c=c.map(function(re){var ee=(0,xe.$$)(re.dataType),ge=kt().isMoment(re.value);return ee&&ge?(0,E.default)({},re,{value:re.value.format("YYYY-MM-DD")}):re});var x=s.props,S=x.projectId,X=x.worksheetInfo;Eo.Z.getWorksheetFilterById({filterId:"",projectId:S,worksheetId:X.worksheetId,items:c}).then(function(re){var ee=re.items;s.props.onChangeFilterItem(ee,c)})}},s.state={oldConditions:V.filterItem},s}return(0,J.default)(O,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var s=this,c=this.props,g=c.currentReport,x=c.projectId,S=c.axisControls,X=c.worksheetInfo,re=c.filterItem,ee=c.filterResigned,ge=ee===void 0?!0:ee;return r.createElement("div",{className:"mBottom20"},r.createElement("div",{className:"Bold mBottom12 Font13"},_l("\u7B5B\u9009")),r.createElement("div",{className:"SingleFilterWrapper"},r.createElement(Bo,{ref:function(Ze){s.singleFilter=Ze},filterColumnClassName:"sheetStatisticsFilterColumnOption",canEdit:!0,appId:X.appId,filterResigned:ge,projectId:x,columns:X.columns,conditions:re,onConditionsChange:this.saveFilter}),r.createElement(yo,{onAddControl:this.handleAddControl})))}}]),O}(r.Component),ll=t(51156),eo=[{text:_l("\u5168\u56FD"),value:""},{text:_l("\u7701"),value:2},{text:_l("\u5E02"),value:3}],Zo=["110000","120000","310000","500000","810000","820000"],zo=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.filterArea=function(){var c=s.props,g=c.xaxes,x=c.controls,S=Fe().find(x,{controlId:g.controlId})||{},X=S.type;return X===19?eo.filter(function(re){return![2,3].includes(re.value)}):X===23?eo.filter(function(re){return![3].includes(re.value)}):eo},s.handleChangeParticleSizeType=function(c){s.props.onChangeCurrentReport({country:{filterCode:"",particleSizeType:c||1}},!c)},s.handleChangeFilterCode=function(c){var g=s.props.country,x=c[c.length-1];g.particleSizeType-1!==c.length&&!Zo.includes(x.id)||s.props.onChangeCurrentReport({country:(0,E.default)({},g,{filterCode:x.id,filterCodeName:c.map(function(S){return S.name}).join("/")})},!0)},s}return(0,J.default)(O,[{key:"render",value:function(){var s=this.props,c=s.country,g=s.style,x=s.onChangeCurrentReport,S=c.particleSizeType-1,X=c.particleSizeType==1?"":c.particleSizeType;return r.createElement("div",{className:"fieldWrapper mBottom20"},r.createElement("div",{className:"title flexRow Font13 Bold valignWrapper mBottom12"},_l("\u8303\u56F4")),r.createElement("div",{className:"flexRow valignWrapper mBottom15"},r.createElement(ce.default,{className:"chartSelect w100",value:X,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:this.handleChangeParticleSizeType},this.filterArea().map(function(re){return r.createElement(ce.default.Option,{className:"selectOptionWrapper",key:re.value,value:re.value},re.text)}))),c.particleSizeType>1&&r.createElement(ll.Z,{defaultValue:c.filterCode||void 0,level:S,callback:this.handleChangeFilterCode},r.createElement(Vr.Z,{readOnly:!0,className:"w100 pointer mBottom15",value:c.filterCodeName})),r.createElement("div",{className:"flexRow valignWrapper"},r.createElement(Q.default,{className:"mLeft0 mBottom16 Font13",checked:g.isDrillDownLayer,onChange:function(ee){x({style:(0,E.default)({},g,{isDrillDownLayer:!g.isDrillDownLayer})})}},_l("\u5141\u8BB8\u9009\u53D6\u5730\u56FE"))))}}]),O}(r.Component),Yo=t(39281),to=t(74048),il=t(25130),mr=t(64713),Mo=t(21459),Ar,lo,Io,$o=(0,Ot.Z)([`
  border-radius: 4px;
  padding: 5px 9px;
  border: 1px solid #DEDEDE;
  background-color: #EFEFEF;
`],[`
  border-radius: 4px;
  padding: 5px 9px;
  border: 1px solid #DEDEDE;
  background-color: #EFEFEF;
`]),Qo=dt.ZP.div($o),io=(lo=Ar=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));Io.call(s);var c=s.props.currentReport.displaySetup;return s.state={showControlVisible:!1,showOptionIds:c.showOptionIds},s}return(0,J.default)(O,[{key:"renderFooter",value:function(){var s=this;return r.createElement("div",{className:"mTop20 mBottom10 pRight8"},r.createElement(k.default,{autoInsertSpaceInButton:!1},r.createElement(oe.default,{type:"link",onClick:function(){s.setState({showControlVisible:!1})}},_l("\u53D6\u6D88")),r.createElement(oe.default,{type:"primary",onClick:this.handleSaveShowOptionIds},_l("\u786E\u8BA4"))))}},{key:"render",value:function(){var s=this,c=this.props,g=c.allControls,x=c.reportData,S=c.currentReport,X=this.state,re=X.showControlVisible,ee=X.showOptionIds,ge=S.xaxes,Se=S.displaySetup,Ze=Fe().find(g,{controlId:ge.controlId})||{},Je=Ze.options,At=Je===void 0?[]:Je,Jt=At.filter(function(Kt){return!Kt.isDeleted}).map(function(Kt){return{controlId:Kt.key,controlName:Kt.value,type:ge.controlType}});return r.createElement("div",{className:"mBottom20"},r.createElement("div",{className:"mBottom8 Font13"},_l("\u7D2F\u8BA1")),r.createElement("div",{className:"flexRow valignWrapper"},r.createElement(Q.default,{className:"flexRow",checked:Se.isAccumulate,onChange:function(){s.handleChangeDisplaySetup({isAccumulate:!Se.isAccumulate})}},_l("\u6BCF\u5C42\u7D2F\u8BA1\u4E4B\u540E\u6240\u6709\u7684\u503C"))),Se.isAccumulate&&(0,xe.OX)(ge.controlType)&&r.createElement("div",{className:"mBottom16 mLeft20"},r.createElement(mr.default.Group,{onChange:this.handleChange,value:Se.showOptionIds.length?2:1},r.createElement(to.default,{direction:"vertical",className:"mTop10"},r.createElement(mr.default,{value:1,className:"Font13"},_l("\u5168\u90E8")),r.createElement(mr.default,{value:2,className:"Font13"},r.createElement("div",{className:"flexRow valignWrapper"},r.createElement("div",null,_l("\u81EA\u5B9A\u4E49\u663E\u793A\u9879")))))),!Fe().isEmpty(Se.showOptionIds)&&r.createElement(Qo,{className:"flexRow valignWrapper mTop10"},r.createElement("div",{className:"flex"},_l("\u663E\u793A%0\u9879\u5B57\u6BB5",Se.showOptionIds.length)),r.createElement(L.Z,{className:"Gray_9e pointer",icon:"edit",onClick:function(){s.setState({showControlVisible:!0})}}))),r.createElement(le.Z,{title:_l("\u81EA\u5B9A\u4E49\u663E\u793A\u9879"),width:580,className:"chartModal",visible:re,centered:!0,destroyOnClose:!0,closeIcon:r.createElement(L.Z,{icon:"close",className:"Font20 pointer Gray_9e"}),footer:this.renderFooter(),onCancel:function(){s.setState({showControlVisible:!1})}},r.createElement("div",{className:"Font15 Gray_75"},_l("\u8BBE\u7F6E\u6F0F\u6597\u56FE\u4E2D\u663E\u793A\u7684\u9879\uFF0C\u672A\u663E\u793A\u9879\u4EC5\u5728\u56FE\u5F62\u4E2D\u9690\u85CF\uFF0C\u4ECD\u4F1A\u5411\u4E0A\u7D2F\u8BA1")),r.createElement(Mo.Z,{layout:2,noShowCount:!0,noempty:!1,dragable:!1,showControls:ee,columns:Jt,placeholder:_l("\u641C\u7D22\u9009\u9879"),onChange:this.handleChangeColumn})))}}]),O}(r.Component),Io=function(){var O=this;this.handleChangeDisplaySetup=function(V){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=O.props.currentReport.displaySetup;O.props.changeCurrentReport({displaySetup:(0,E.default)({},c,V)},s)},this.handleChange=function(V){var s=V.target.value;s===1?O.handleChangeDisplaySetup({showOptionIds:[]},!0):O.setState({showControlVisible:!0})},this.handleChangeColumn=function(V){var s=V.newShowControls,c=V.newControlSorts;O.setState({showOptionIds:s})},this.handleSaveShowOptionIds=function(){var V=O.state.showOptionIds;if(Fe().isEmpty(V)){alert(_l("\u8BF7\u9009\u62E9\u663E\u793A\u9879"),2);return}O.handleChangeDisplaySetup({showOptionIds:V},!0),O.setState({showControlVisible:!1})}},lo),No,zr,no=(No=(0,Yt.$j)(function(Ye){return(0,E.default)({},Fe().pick(Ye.statistics,["currentReport","reportData","axisControls","worksheetInfo","filterItem"]))},function(Ye){return(0,qt.DE)(ht,Ye)}),No(zr=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.handleChangeFilterItem=function(c,g){var x=s.props.currentReport;s.props.changeFilterItem(c),s.props.changeCurrentReport({filter:(0,E.default)({},x.filter,{filterControls:g})},!0)},s}return(0,J.default)(O,[{key:"renderChartType",value:function(){var s=this,c=this.props.currentReport,g=c.reportType,x=c.displaySetup,S=g==fe.f0.FunnelChart,X=function(ee){x.showChartType!==ee.value&&s.props.changeCurrentReport({displaySetup:(0,E.default)({},x,{showChartType:ee.value,isPerPile:[fe.f0.LineChart].includes(g)?!1:x.isPerPile})})};return r.createElement("div",{className:S?"mBottom15":"mBottom20"},S&&r.createElement("div",{className:"mBottom15 Bold Font13"},_l("\u56FE\u5F62")),r.createElement("div",{className:N()("mBottom10 Font13",S?"mBottom8":"mBottom10",{Bold:!S})},xe.Qo[g].title),[fe.f0.GaugeChart,fe.f0.ProgressChart].includes(g)?r.createElement("div",{className:"chartTypeImageSelect flexRow valignWrapper mBottom16"},xe.Qo[g].items.map(function(re){return r.createElement("div",{key:re.value,className:N()("flex styleItem centerAlign pointer Gray_75",{active:x.showChartType==re.value}),onClick:function(){return X(re)}},r.createElement("div",{className:"iconWrap"},r.createElement("img",{src:x.showChartType==re.value?re.activeIcon:re.icon})),re.name)})):r.createElement("div",{className:"chartTypeSelect flexRow valignWrapper"},xe.Qo[g].items.map(function(re){return r.createElement("div",{key:re.value,className:N()("flex centerAlign pointer Gray_75",{active:x.showChartType==re.value}),onClick:function(){return X(re)}},re.name)})))}},{key:"renderShape",value:function(){var s=this,c=this.props.currentReport.style;return r.createElement("div",{className:"mBottom15"},r.createElement("div",{className:"mBottom8 Font13"},_l("\u5F62\u72B6")),r.createElement("div",{className:"chartTypeSelect flexRow valignWrapper"},xe.Sg.map(function(g){return r.createElement("div",{key:g.value,className:N()("flex centerAlign pointer Gray_75",{active:(c.funnelShape||"funnel")==g.value}),onClick:function(){s.props.changeCurrentReport({style:(0,E.default)({},c,{funnelShape:g.value})})}},g.name)})))}},{key:"renderCurvature",value:function(){var s=this,c=this.props.currentReport.style;return r.createElement("div",{className:"mBottom15"},r.createElement("div",{className:"mBottom8 Font13"},_l("\u66F2\u7387")),r.createElement("div",{className:"chartTypeSelect flexRow valignWrapper"},xe.SC.map(function(g){return r.createElement("div",{key:g.value,className:N()("flex centerAlign pointer Gray_75",{active:(c.funnelCurvature||2)==g.value}),onClick:function(){s.props.changeCurrentReport({style:(0,E.default)({},c,{funnelCurvature:g.value})})}},g.name)})))}},{key:"renderAccumulate",value:function(){var s=this.props,c=s.reportData,g=s.currentReport,x=s.worksheetInfo,S=s.changeCurrentReport;return r.createElement(io,{reportData:c,allControls:x.columns,currentReport:g,changeCurrentReport:S})}},{key:"renderPivotTableAxis",value:function(s,c){var g=this,x=this.props,S=x.currentReport,X=x.axisControls,re=x.worksheetInfo,ee=x.changeCurrentReport,ge=S.pivotTable||{},Se=ge.lines,Ze=Se===void 0?[]:Se,Je=ge.columns,At=Je===void 0?[]:Je,Jt=[].concat((0,Z.Z)(Ze),(0,Z.Z)(At)).filter(function(Kt){return Kt.particleSizeType}).map(function(Kt){return Kt.controlId+"-"+Kt.particleSizeType});return r.createElement(r.Fragment,null,r.createElement(La,{name:s,type:"lines",axisControls:X,allControls:re.columns,list:Ze,disableParticleSizeTypes:Jt,onUpdateList:function(ln,Gn){ee({pivotTable:(0,E.default)({},S.pivotTable,{lines:ln}),sorts:S.sorts.filter(function(yn){return Fe().findKey(yn)!==Gn})},!0)},onAdd:this.props.addLines,onRemove:this.props.removeLines}),r.createElement(La,{name:c,type:"columns",axisControls:X,allControls:re.columns,list:At,disableParticleSizeTypes:Jt,onUpdateList:function(ln,Gn){ee({pivotTable:(0,E.default)({},S.pivotTable,{columns:ln}),sorts:S.sorts.filter(function(yn){return Fe().findKey(yn)!==Gn})},!0)},onAdd:this.props.addColumns,onRemove:this.props.removeColumns}),r.createElement(La,{name:_l("\u503C"),verifyNumber:!0,disableParticleSizeTypes:[],axisControls:X.concat(S.formulas),allControls:re.columns,list:S.yaxisList,onUpdateList:function(ln,Gn){ee({yaxisList:ln,sorts:S.sorts.filter(function(yn){return Fe().findKey(yn)!==Gn})},!0)},onAdd:this.props.addYaxisList,onRemove:function(ln){var Gn=ln.controlId;g.props.removeYaxisList(Gn)}}))}},{key:"renderChartAxis",value:function(s,c){var g=this,x=this.props,S=x.currentReport,X=x.axisControls,re=x.worksheetInfo,ee=x.changeCurrentReport,ge=S.reportType,Se=S.displaySetup,Ze=S.xaxes,Je=S.yaxisList,At=S.split,Jt=S.rightY,Kt=S.formulas,ln=Kt===void 0?[]:Kt,Gn=[fe.f0.DualAxes,fe.f0.BidirectionalBarChart].includes(ge),yn=fe.f0.DualAxes===ge,na=ge&&![fe.f0.GaugeChart,fe.f0.ProgressChart].includes(ge),ga=[Ze,At,Jt?Jt.split:{}].filter(function(ua){return ua.particleSizeType}).map(function(ua){return ua.controlId+"-"+ua.particleSizeType});return r.createElement(r.Fragment,null,na&&r.createElement(Gt,{name:s,disableParticleSizeTypes:(0,xe.ad)(Ze.controlId,ga),currentReport:S,onChangeCurrentReport:ee,allControls:re.columns,axisControls:X,addXaxes:this.props.addXaxes,removeXaxes:this.props.removeXaxes}),fe.f0.ScatterChart===ge?r.createElement(r.Fragment,null,r.createElement(on,{name:_l("X\u8F74(\u6570\u503C)"),yaxisList:Fe().isEmpty(Je[0])?[]:[Je[0]],currentReport:S,axisControls:X.concat(ln),allControls:re.columns,onChangeCurrentReport:function(Xn){Je[0]=Xn.yaxisList[0],g.props.changeYaxisList((0,E.default)({},Xn,{yaxisList:Je}))},onRemoveAxis:function(){Je[0]={},g.props.changeYaxisList({yaxisList:Je})},onAddAxis:function(Xn){g.props.addIndexYaxisList(Xn,0)}}),r.createElement(on,{name:_l("Y\u8F74(\u6570\u503C)"),yaxisList:Fe().isEmpty(Je[1])?[]:[Je[1]],currentReport:S,axisControls:X.concat(ln),allControls:re.columns,onChangeCurrentReport:function(Xn){Je[1]=Xn.yaxisList[0],g.props.changeYaxisList((0,E.default)({},Xn,{yaxisList:Je}))},onRemoveAxis:function(){Je[1]={},g.props.changeYaxisList({yaxisList:Je})},onAddAxis:function(Xn){g.props.addIndexYaxisList(Xn,1)}}),r.createElement(on,{name:_l("\u70B9\u5927\u5C0F"),yaxisList:Fe().isEmpty(Je[2])?[]:[Je[2]],currentReport:S,axisControls:X.concat(ln),allControls:re.columns,onChangeCurrentReport:function(Xn){Je[2]=Xn.yaxisList[0],g.props.changeYaxisList((0,E.default)({},Xn,{yaxisList:Je}))},onRemoveAxis:function(){Je[2]=null,g.props.changeYaxisList({yaxisList:Je.filter(function(Xn){return Xn})})},onAddAxis:function(Xn){g.props.addIndexYaxisList(Xn,2)}})):r.createElement(on,{name:c,split:At,yaxisList:Je,currentReport:S,axisControls:X.concat(ln),allControls:re.columns,onChangeCurrentReport:this.props.changeYaxisList,onRemoveAxis:this.props.removeYaxisList,onAddAxis:this.props.addYaxisList}),Gn&&r.createElement(on,{name:yn?_l("\u8F85\u52A9Y\u8F74(\u6570\u503C)"):_l("\u65B9\u54112(\u6570\u503C)"),split:Jt.split,yaxisList:Jt.yaxisList,currentReport:S,axisControls:X.concat(ln),allControls:re.columns,onChangeCurrentReport:this.props.changeRightYaxisList,onRemoveAxis:this.props.removeRightYaxisList,onAddAxis:this.props.addRightYaxisList}),[fe.f0.BarChart,fe.f0.LineChart,fe.f0.DualAxes,fe.f0.RadarChart,fe.f0.ScatterChart].includes(ge)&&r.createElement(Ta,{reportType:ge,split:S.split,xaxes:S.xaxes,yaxisList:S.yaxisList,disableParticleSizeTypes:ga,axisControls:X,allControls:re.columns,onChangeCurrentReport:this.props.changeSplit}),yn&&r.createElement(Ta,{name:yn?_l("\u5206\u7EC4(\u8F85\u52A9Y\u8F74)"):_l("\u5206\u7EC4(\u6570\u503C2)"),split:S.rightY.split,xaxes:S.xaxes,yaxisList:S.rightY.yaxisList,disableParticleSizeTypes:ga,axisControls:X,allControls:re.columns,onChangeCurrentReport:this.props.changeRightSplit}),ge===fe.f0.CountryLayer&&S.xaxes.controlId&&r.createElement(zo,{xaxes:S.xaxes,country:S.country,style:S.style||{},controls:X,onChangeCurrentReport:ee}))}},{key:"renderChartValueAxis",value:function(){var s=this,c=this.props,g=c.currentReport,x=c.axisControls,S=c.worksheetInfo,X=c.changeCurrentReport,re=g.config,ee=g.formulas,ge=ee===void 0?[]:ee;return r.createElement(r.Fragment,null,r.createElement(En,{name:_l("\u6700\u5C0F\u503C"),valueAxis:re.min||{},currentReport:g,onChangeCurrentReport:X,allControls:S.columns,axisControls:x.concat(ge),addValueAxis:function(Ze){s.props.addValueAxis("min",Ze)},changeValueAxis:function(Ze,Je){s.props.changeConfig({min:(0,E.default)({},re.min,Ze)},Je)},removeValueAxis:function(){s.props.changeConfig({min:null})}}),r.createElement(En,{name:_l("\u6700\u5927\u503C"),valueAxis:re.max||{},currentReport:g,onChangeCurrentReport:X,allControls:S.columns,axisControls:x.concat(ge),addValueAxis:function(Ze){s.props.addValueAxis("max",Ze)},changeValueAxis:function(Ze,Je){s.props.changeConfig({max:(0,E.default)({},re.max,Ze)},Je)},removeValueAxis:function(){s.props.changeConfig({max:null})}}))}},{key:"renderTargetValueAxis",value:function(){var s=this,c=this.props,g=c.currentReport,x=c.axisControls,S=c.worksheetInfo,X=c.changeCurrentReport,re=g.yaxisList,ee=g.config,ge=ee===void 0?{}:ee,Se=g.formulas,Ze=Se===void 0?[]:Se,Je=ge.targetList||[];return r.createElement("div",{className:"fieldWrapper targetValueAxis mBottom20"},r.createElement("div",{className:"Bold mBottom12"},_l("\u76EE\u6807\u503C")),!re.length&&r.createElement(r.Fragment,null,r.createElement("div",{className:"mBottom12 Gray_75"},_l("\u8BF7\u5148\u914D\u7F6E\u6570\u503C")),r.createElement(pn,{disable:!0,allowInput:!0})),re.map(function(At,Jt){return r.createElement(En,{key:At.controlId,name:At.controlName,valueAxis:Je[Jt]||{},currentReport:g,onChangeCurrentReport:X,allControls:S.columns,axisControls:x.concat(Ze),addValueAxis:function(ln){s.props.addTargetValueAxis(Jt,ln)},changeValueAxis:function(ln,Gn){var yn=Je[Jt]||{};Je[Jt]=(0,E.default)({},yn,ln),s.props.changeConfig({targetList:Je},Gn)},removeValueAxis:function(){s.props.removeTargetValueAxis(Jt)}})}))}},{key:"render",value:function(){var s=this.props,c=s.currentReport,g=s.axisControls,x=s.projectId,S=s.worksheetInfo,X=s.filterItem,re=c.reportType,ee=c.displaySetup,ge=(0,xe.ek)(re,ee?ee.showChartType:null),Se=ge.x,Ze=ge.y,Je=re===fe.f0.PivotTable;return r.createElement("div",{className:"chartSetting"},Je?this.renderPivotTableAxis(Se,Ze):this.renderChartAxis(Se,Ze),[fe.f0.GaugeChart].includes(re)&&this.renderChartValueAxis(),[fe.f0.ProgressChart].includes(re)&&this.renderTargetValueAxis(),xe.Qo[re]&&ee&&this.renderChartType(),re===fe.f0.FunnelChart&&this.renderShape(),re===fe.f0.FunnelChart&&this.renderCurvature(),re===fe.f0.FunnelChart&&this.renderAccumulate(),r.createElement(qr,{filterResigned:!1,projectId:x,filterItem:X,axisControls:g,worksheetInfo:S,onChangeFilterItem:this.handleChangeFilterItem}))}}]),O}(r.Component))||zr),xo=t(45142),fr=t(40987),Dr=t(88106),Yr=t(60496),Jo,So,wo,To=(So=Jo=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));wo.call(s);var c=V.showXAxisCount;return s.state={count:c,showXAxisType:c<0?0:1},s}return(0,J.default)(O,[{key:"componentWillReceiveProps",value:function(s){s.showXAxisCount!==this.props.showXAxisCount&&this.setState({count:s.showXAxisCount,showXAxisType:s.showXAxisCount<0?0:1})}},{key:"getText",value:function(){var s=this.props,c=s.currentReport,g=s.name,x=s.reportType;return[fe.f0.BarChart,fe.f0.LineChart,fe.f0.DualAxes].includes(x)?_l("X\u8F74"):x===fe.f0.PieChart?_l("\u5206\u533A"):x===fe.f0.RadarChart?_l("\u7EF4\u5EA6"):x===fe.f0.FunnelChart?_l("\u5206\u7EC4"):x===fe.f0.PivotTable?g:_l("\u884C\u6570\u636E")}},{key:"render",value:function(){var s=this,c=this.props.className,g=this.state,x=g.count,S=g.showXAxisType;return r.createElement("div",{className:N()("flexRow valignWrapper mBottom16",c)},r.createElement("span",null,_l("\u663E\u793A%0",this.getText())),r.createElement("div",{className:"addonBeforeWrapper valignWrapper mLeft5 mRight5"},r.createElement(ce.default,{className:"chartSelect",style:{width:60},value:S,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(re){var ee=re?Math.abs(x):-Math.abs(x);s.setState({count:ee,showXAxisType:re},s.handleSaveCount)}},r.createElement(ce.default.Option,{className:"selectOptionWrapper",key:1,value:1},_l("\u524D")),r.createElement(ce.default.Option,{className:"selectOptionWrapper",key:0,value:0},_l("\u540E"))),r.createElement(ve.default,{style:{width:130,paddingLeft:70},className:"chartInput",value:x?Math.abs(x).toString():"",onBlur:this.handleSaveCount,onKeyDown:function(re){re.which===13&&s.handleSaveCount()},onChange:function(re){var ee=(0,Dt.pu)(re.target.value),ge=parseInt(ee||0);ge=ge>1e3?1e3:ge,s.setState({count:ge})}})),r.createElement("span",null,_l("\u9879")))}}]),O}(r.Component),wo=function(){var O=this;this.handleSaveCount=function(){var V=O.props.showXAxisCount,s=O.state,c=s.count,g=s.showXAxisType;V!==c&&O.props.onChange(g?Math.abs(c):-Math.abs(c))}},So),Xo=t(92559),sl=t(59361),jr=t(94708),ho=t(45842),bo=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.state={ruleColorModalVisible:!1},s}return(0,J.default)(O,[{key:"render",value:function(){var s=this,c=this.props,g=c.currentReport,x=c.onChangeDisplayValue,S=c.onUpdateDisplaySetup,X=c.onChangeStyle,re=g.reportType,ee=g.yaxisList,ge=g.displaySetup,Se=g.summary,Ze=g.rightY,Je=g.style;if(re===fe.f0.PieChart)return r.createElement(r.Fragment,null,r.createElement("div",{className:"flexRow valignWrapper"},r.createElement(Q.default,{className:"mLeft0 mBottom16",checked:ge.showDimension,onChange:function(){x("showDimension",!ge.showDimension)}},_l("\u663E\u793A\u7EF4\u5EA6\u6807\u7B7E"))),r.createElement("div",{className:"flexRow valignWrapper"},r.createElement(Q.default,{className:"mLeft0 mBottom16",checked:ge.showNumber,onChange:function(){x("showNumber",!ge.showNumber)}},_l("\u663E\u793A\u6570\u503C"))),r.createElement("div",{className:"flexRow valignWrapper"},r.createElement(Q.default,{className:"mLeft0 mBottom16",checked:ge.showPercent,onChange:function(){x("showPercent",!ge.showPercent)}},_l("\u663E\u793A\u767E\u5206\u6BD4"))));if(re===fe.f0.GaugeChart){var At=this.state.ruleColorModalVisible,Jt=g.style,Kt=Jt.fontColor,ln=Kt===void 0?"rgba(0, 0, 0, 1)":Kt,Gn=Jt.isApplyGaugeColor,yn=Gn===void 0?!1:Gn,na=g.displaySetup.colorRules,ga=_.get(na[0],"dataBarRule"),ua=function(){return s.setState({ruleColorModalVisible:!1})};return r.createElement(r.Fragment,null,r.createElement("div",{className:"mBottom10"},r.createElement("div",{className:"flexRow valignWrapper mBottom13"},r.createElement(Q.default,{className:"mLeft0",checked:ge.showDimension,onChange:function(){x("showDimension",!ge.showDimension)}},_l("\u663E\u793A\u7EF4\u5EA6\u6807\u7B7E"))),r.createElement("div",{className:"flexRow valignWrapper mBottom13"},r.createElement(Q.default,{className:"mLeft0",checked:ge.showNumber,onChange:function(){x("showNumber",!ge.showNumber)}},_l("\u663E\u793A\u6570\u503C"))),r.createElement("div",{className:"flexRow valignWrapper mBottom13"},r.createElement(Q.default,{className:"mLeft0",checked:ge.showPercent,onChange:function(){x("showPercent",!ge.showPercent)}},_l("\u663E\u793A\u767E\u5206\u6BD4"))),r.createElement("div",{className:"flexRow valignWrapper mBottom13"},r.createElement(Q.default,{checked:yn,onChange:function(){X({isApplyGaugeColor:event.target.checked})}},_l("\u4F7F\u7528\u4EEA\u8868\u76D8\u989C\u8272"))),r.createElement("div",{className:"flexRow valignWrapper",style:yn?{filter:"opacity(0.5)",pointerEvents:"none"}:void 0},r.createElement("div",null,_l("\u989C\u8272")),_.isEmpty(ga)&&r.createElement(jr.Z,{isPopupBody:!0,className:"mLeft10",value:ln,onChange:function(Va){X({fontColor:Va})}},r.createElement("div",{className:"colorWrap pointer"},r.createElement("div",{className:"colorBlock",style:{backgroundColor:ln}}))),r.createElement("div",{className:"entranceWrap ruleIcon flexRow valignWrapper pointer",onClick:function(){s.setState({ruleColorModalVisible:!0})}},r.createElement(L.Z,{className:"Font16 Gray_9e",icon:"formula"})),!_.isEmpty(ga)&&r.createElement("div",{className:"entranceWrap ruleIcon flexRow valignWrapper pointer",onClick:function(){var Va=na.map(function(Ka,tr){return tr===0?{}:Ka});x("colorRules",Va)}},r.createElement(L.Z,{className:"Font16 Gray_9e",icon:"delete2"})))),r.createElement(ho.Z,{visible:At,yaxisList:g.yaxisList,reportType:g.reportType,colorRule:ga||{},onSave:function(Va){var Ka={controlId:"",dataBarRule:Va};na.length?x("colorRules",[Ka,na[1]]):x("colorRules",[Ka,{}]),ua()},onCancel:ua}))}if(re===fe.f0.ProgressChart){var Xn=Je.currentValueName,$a=Xn===void 0?_l("\u5B9E\u9645"):Xn,Ga=Je.targetValueName,er=Ga===void 0?_l("\u76EE\u6807"):Ga,rr=Je.showValueType,gr=rr===void 0?1:rr;return ge.showChartType===1?r.createElement(r.Fragment,null,r.createElement("div",{className:"flexRow valignWrapper mBottom5"},r.createElement(Q.default,{className:"mLeft0",checked:ge.showNumber,onChange:function(){S((0,E.default)({},ge,{showNumber:!ge.showNumber}))}},_l("\u663E\u793A\u5F53\u524D\u503C"))),ge.showNumber&&r.createElement(ve.default,{className:"chartInput mBottom16",value:$a,onChange:function(Va){X({currentValueName:Va.target.value})}}),r.createElement("div",{className:"flexRow valignWrapper mBottom5"},r.createElement(Q.default,{className:"mLeft0",checked:ge.showDimension,onChange:function(){S((0,E.default)({},ge,{showDimension:!ge.showDimension}))}},_l("\u663E\u793A\u76EE\u6807\u503C"))),ge.showDimension&&r.createElement(ve.default,{className:"chartInput mBottom16",value:er,onChange:function(Va){X({targetValueName:Va.target.value})}})):r.createElement(r.Fragment,null,r.createElement("div",{className:"flexRow valignWrapper"},r.createElement(Q.default,{className:"mLeft0 mBottom5",checked:ge.showNumber,onChange:function(){S((0,E.default)({},ge,{showNumber:!ge.showNumber}))}},_l("\u663E\u793A\u6570\u503C"))),ge.showNumber&&r.createElement("div",{className:"valignWrapper mBottom16 mLeft25"},r.createElement(mr.default.Group,{value:gr,onChange:function(Va){var Ka=Va.target.value;X({showValueType:Ka})}},r.createElement(to.default,{direction:"vertical"},r.createElement(mr.default,{value:1,className:"Font13"},_l("\u6570\u503C")),r.createElement(mr.default,{value:2,className:"Font13"},_l("\u767E\u5206\u6BD4")),r.createElement(mr.default,{value:3,className:"Font13"},_l("\u6570\u503C/\u76EE\u6807\u503C"))))))}var sr=function(){return[fe.f0.BarChart].includes(re)?ee.length>1?!0:ge.showTotal:[fe.f0.BidirectionalBarChart].includes(re)?Se.showTotal||_.get(Ze,"summary.showTotal"):!1},Tr=re===fe.f0.LineChart&&ge.showNumber;return r.createElement(r.Fragment,null,r.createElement("div",{className:N()("flexRow valignWrapper",Tr?"mBottom10":"mBottom16")},r.createElement(Q.default,{className:"flexRow mLeft0",checked:ge.showDimension||ge.showNumber||ge.showPercent,onChange:function(){ge.showDimension||ge.showNumber||ge.showPercent?S((0,E.default)({},ge,{showDimension:!1,showNumber:!1,showPercent:!1})):S((0,E.default)({},ge,{showDimension:!0,showNumber:!0,showPercent:!0}))}},re===fe.f0.FunnelChart?_l("\u663E\u793A\u8F6C\u5316\u7387"):_l("\u663E\u793A\u6570\u636E"))),re===fe.f0.LineChart&&ge.showNumber&&r.createElement(ce.default,{mode:"multiple",className:"chartSelect mBottom16 w100",value:_.isEmpty(Je.chartShowLabelIds)?["all"]:Je.chartShowLabelIds,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),tagRender:function(Va){var Ka=Va.label,tr=Va.value,Fr=Va.closable,ro=Va.onClose,xr=tr=="all"?!0:_.find(ee,{controlId:tr}),Lo=function(hl){hl.preventDefault(),hl.stopPropagation()};return r.createElement(sl.default,{color:xr?void 0:"error",onMouseDown:Lo,closable:Fr,onClose:ro},xr?Ka:_l("\u5B57\u6BB5\u5DF2\u5220\u9664"))},onDeselect:function(Va){var Ka=Je.chartShowLabelIds||[];X({chartShowLabelIds:Ka.filter(function(tr){return tr!==Va})})},onSelect:function(Va){if(Va==="all")X({chartShowLabelIds:["all"]});else{var Ka=Je.chartShowLabelIds||[];X({chartShowLabelIds:Ka.filter(function(tr){return tr!=="all"}).concat(Va)})}}},r.createElement(ce.default.Option,{value:"all"},_l("\u5168\u90E8")),ee.map(function(Oa){return r.createElement(ce.default.Option,{key:Oa.controlId,value:Oa.controlId},Oa.controlName)})),sr()&&r.createElement("div",{className:"flexRow valignWrapper"},r.createElement(Q.default,{className:"mLeft0 mBottom16",checked:Je.showLabelPercent,onChange:function(){X({showLabelPercent:!Je.showLabelPercent})}},_l("\u663E\u793A\u767E\u5206\u6BD4"))),[fe.f0.BarChart,fe.f0.DualAxes].includes(re)&&ge.isPile&&r.createElement("div",{className:"flexRow valignWrapper"},r.createElement(Q.default,{className:"mLeft0 mBottom16",checked:ge.showPileTotal,onChange:function(){x("showPileTotal",!ge.showPileTotal)}},_l("\u663E\u793A\u5806\u53E0\u603B\u6570"))),[fe.f0.BarChart,fe.f0.LineChart,fe.f0.DualAxes,fe.f0.BidirectionalBarChart].includes(re)&&r.createElement("div",{className:"flexRow valignWrapper"},r.createElement(Q.default,{className:"flexRow mLeft0 mBottom16",checked:ge.hideOverlapText,onChange:function(){x("hideOverlapText",!ge.hideOverlapText)}},_l("\u9690\u85CF\u91CD\u53E0\u7684\u6807\u7B7E\u6587\u5B57"))))}}]),O}(r.Component),vo=function(Ye){(0,te.default)(O,Ye);function O(V){return(0,me.default)(this,O),(0,T.default)(this,(O.__proto__||i()(O)).call(this,V))}return(0,J.default)(O,[{key:"render",value:function(){var s=this.props,c=s.currentReport,g=s.onChangeDisplayValue,x=s.onChangeStyle,S=c.reportType,X=c.displaySetup,re=c.style,ee=X.xdisplay,ge=S===fe.f0.BarChart&&X.showChartType===2;return r.createElement(r.Fragment,null,r.createElement("div",{className:"flexRow valignWrapper mLeft0 mBottom16"},r.createElement(Q.default,{checked:ee.showDial,onChange:function(Ze){g("xdisplay",(0,E.default)({},ee,{showDial:!ee.showDial}))}},_l("\u663E\u793A\u523B\u5EA6\u6807\u7B7E"))),![fe.f0.ScatterChart].includes(S)&&ee.showDial&&r.createElement("div",{className:"flexRow valignWrapper mBottom16 mLeft25"},r.createElement(Q.default,{className:"mLeft0",checked:!!X.fontStyle,onChange:function(){g("fontStyle",X.fontStyle?0:1)}},ge?_l("\u81EA\u52A8\u503E\u659CY\u8F74\u6587\u5B57"):_l("\u81EA\u52A8\u503E\u659CX\u8F74\u6587\u5B57")),r.createElement(j.default,{title:_l("\u52FE\u9009\u65F6\uFF0C\u5F53\u4F4D\u7F6E\u4E0D\u591F\uFF0C\u6587\u5B57\u4F1A\u81EA\u52A8\u503E\u659C\u4EE5\u4FDD\u8BC1\u5B8C\u6574\u663E\u793A\u3002\u672A\u52FE\u9009\u65F6\uFF0C\u5C06\u59CB\u7EC8\u6C34\u5E73\u663E\u793A%0\u6587\u5B57\u3002",ge?_l("Y\u8F74"):_l("X\u8F74")),placement:"bottom"},r.createElement(L.Z,{className:"Gray_9e Font17 pointer",icon:"info1"}))),[fe.f0.LineChart,fe.f0.BarChart].includes(S)&&r.createElement("div",{className:"flexRow valignWrapper mLeft0 mBottom16"},r.createElement(Q.default,{checked:re.showXAxisSlider,onChange:function(Ze){x({showXAxisSlider:Ze.target.checked})}},_l("\u663E\u793A\u6A2A\u8F74\u6EDA\u52A8\u6761"))),![fe.f0.BidirectionalBarChart].includes(S)&&r.createElement("div",{className:N()("flexRow valignWrapper mLeft0",ee.showTitle?"mBottom8":"mBottom16")},r.createElement(Q.default,{checked:ee.showTitle,onChange:function(Ze){g("xdisplay",(0,E.default)({},ee,{showTitle:!ee.showTitle}))}},_l("\u663E\u793A\u6807\u9898"))),ee.showTitle&&r.createElement(ve.default,{defaultValue:ee.title,className:"chartInput mBottom16",onBlur:function(Ze){g("xdisplay",(0,E.default)({},ee,{title:Ze.target.value}))}}),fe.f0.ScatterChart===S&&r.createElement(r.Fragment,null,r.createElement("div",{className:"mBottom16 minWrapper"},r.createElement("div",{className:"mBottom8"},_l("\u6700\u5C0F\u503C")),r.createElement(ve.default,{className:"chartInput",placeholder:_l("\u81EA\u52A8"),defaultValue:ee.minValue,onBlur:function(Ze){var Je=Ze.target.value,At=Number((0,Dt.pu)(Je));g("xdisplay",(0,E.default)({},ee,{minValue:Je&&At}))}})),r.createElement("div",{className:"mBottom16 maxWrapper"},r.createElement("div",{className:"mBottom8"},_l("\u6700\u5927\u503C")),r.createElement(ve.default,{className:"chartInput",placeholder:_l("\u81EA\u52A8"),defaultValue:ee.maxValue,onBlur:function(Ze){var Je=Ze.target.value,At=Number((0,Dt.pu)(Je));g("xdisplay",(0,E.default)({},ee,{maxValue:Je&&At}))}}))))}}]),O}(r.Component),so=function(Ye){(0,te.default)(O,Ye);function O(V){return(0,me.default)(this,O),(0,T.default)(this,(O.__proto__||i()(O)).call(this,V))}return(0,J.default)(O,[{key:"render",value:function(){var s=this.props,c=s.ydisplay,g=s.onChangeDisplayValue,x=s.onChangeCurrentReport,S=s.isRight,X=s.reportType,re=s.yreportType,ee=s.isDualAxes;return r.createElement(r.Fragment,null,ee&&!S&&r.createElement("div",{className:"mBottom16"},r.createElement("div",{className:"mBottom8"},_l("\u56FE\u8868\u7C7B\u578B")),r.createElement("div",{className:"chartTypeSelect flexRow valignWrapper"},r.createElement("div",{className:N()("flex centerAlign pointer Gray_75",{active:re==fe.f0.BarChart}),onClick:function(){x({yreportType:fe.f0.BarChart},!0)}},_l("\u67F1\u56FE")),r.createElement("div",{className:N()("flex centerAlign pointer Gray_75",{active:re==fe.f0.LineChart}),onClick:function(){x({yreportType:fe.f0.LineChart},!0)}},_l("\u6298\u7EBF\u56FE")))),X!==fe.f0.BidirectionalBarChart&&r.createElement("div",{className:"flexRow valignWrapper"},r.createElement(Q.default,{className:"mLeft0 mBottom16",checked:c.showDial,onChange:function(){var Se=!c.showDial,Ze=(0,E.default)({},c,{showDial:Se});g(Ze)}},_l("\u663E\u793A\u523B\u5EA6\u6807\u7B7E"))),![fe.f0.BidirectionalBarChart,fe.f0.ScatterChart].includes(X)&&c.showDial&&!S&&r.createElement("div",{className:"mBottom16"},r.createElement("div",{className:"mBottom8"},_l("\u7EBF\u6761\u6837\u5F0F")),r.createElement(ce.default,{className:"chartSelect w100",value:c.lineStyle,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(Se){g((0,E.default)({},c,{lineStyle:Se}))}},r.createElement(ce.default.Option,{className:"selectOptionWrapper",value:1},_l("\u5B9E\u7EBF")),r.createElement(ce.default.Option,{className:"selectOptionWrapper",value:2},_l("\u865A\u7EBF")))),X!==fe.f0.BidirectionalBarChart&&r.createElement(r.Fragment,null,r.createElement("div",{className:"flexRow valignWrapper"},r.createElement(Q.default,{className:"mLeft0 mBottom16",checked:c.showTitle,onChange:function(Se){g((0,E.default)({},c,{showTitle:!c.showTitle}))}},_l("\u663E\u793A\u6807\u9898"))),c.showTitle&&r.createElement(ve.default,{className:"chartInput mBottom16",defaultValue:c.title,onBlur:function(Se){g((0,E.default)({},c,{title:Se.target.value}))}})),r.createElement(r.Fragment,null,r.createElement("div",{className:"mBottom16 minWrapper"},r.createElement("div",{className:"mBottom8"},_l("\u6700\u5C0F\u503C")),r.createElement(ve.default,{className:"chartInput",placeholder:_l("\u81EA\u52A8"),defaultValue:c.minValue,onBlur:function(Se){var Ze=Se.target.value,Je=Number(Ze||0);g((0,E.default)({},c,{minValue:Ze&&Je}))}})),r.createElement("div",{className:"mBottom16 maxWrapper"},r.createElement("div",{className:"mBottom8"},_l("\u6700\u5927\u503C")),r.createElement(ve.default,{className:"chartInput",placeholder:_l("\u81EA\u52A8"),defaultValue:c.maxValue,onBlur:function(Se){var Ze=Se.target.value,Je=Number(Ze||0);g((0,E.default)({},c,{maxValue:Ze&&Je}))}}))))}}]),O}(r.Component);function cl(Ye){var O=Ye.currentReport,V=Ye.changeCurrentReport,s=(0,xt.Z)(Ye,["currentReport","changeCurrentReport"]),c=O.displaySetup,g=O.rightY,x=O.reportType,S=O.yreportType,X=c.ydisplay,re=function(ge){V({displaySetup:(0,E.default)({},c,{ydisplay:ge})})};return r.createElement(se.Z.Panel,(0,E.default)({key:"bidirectionalBarChartYAxis",header:_l("\u6D4B\u91CF\u8F74"),className:N()({yAxisCollapsible:!1})},s),r.createElement("div",null,r.createElement("div",{className:"flexRow valignWrapper"},r.createElement(Q.default,{className:"mLeft0 mBottom16",checked:X.showDial,onChange:function(){var ge=!X.showDial,Se=(0,E.default)({},X,{showDial:ge});re(Se)}},_l("\u663E\u793A\u523B\u5EA6\u6807\u7B7E"))),X.showDial&&r.createElement("div",{className:"mBottom16"},r.createElement("div",{className:"mBottom8"},_l("\u7EBF\u6761\u6837\u5F0F")),r.createElement(ce.default,{className:"chartSelect w100",value:X.lineStyle,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(ge){re((0,E.default)({},X,{lineStyle:ge}))}},r.createElement(ce.default.Option,{className:"selectOptionWrapper",value:1},_l("\u5B9E\u7EBF")),r.createElement(ce.default.Option,{className:"selectOptionWrapper",value:2},_l("\u865A\u7EBF")))),r.createElement("div",{className:"mBottom10"},_l("\u65B9\u54111(\u6570\u503C)")),r.createElement(so,{yreportType:S,reportType:x,isDualAxes:!1,ydisplay:c.ydisplay,onChangeCurrentReport:V,onChangeDisplayValue:re}),r.createElement("div",{className:"mBottom10"},_l("\u65B9\u54112(\u6570\u503C)")),r.createElement(so,{isRight:!0,reportType:x,ydisplay:g.display.ydisplay,onChangeDisplayValue:function(ge){V({rightY:(0,E.default)({},g,{display:(0,E.default)({},g.display,{ydisplay:ge})})})}})))}function ko(Ye){var O=Ye.currentReport,V=Ye.changeCurrentReport,s=(0,xt.Z)(Ye,["currentReport","changeCurrentReport"]),c=O.displaySetup,g=O.rightY,x=O.reportType,S=O.yreportType,X=x===fe.f0.DualAxes,re=x===fe.f0.BarChart,ee=re&&c.showChartType===2,ge=c.ydisplay.showDial||c.ydisplay.showTitle,Se=X?g.display.ydisplay.showDial||g.display.ydisplay.showTitle:!1;return r.createElement(r.Fragment,null,r.createElement(se.Z.Panel,(0,E.default)({key:"yAxis",header:X?_l("Y\u8F74"):ee?_l("X\u8F74"):_l("Y\u8F74"),className:N()({yAxisCollapsible:!ge})},s,{extra:r.createElement(fr.Z,{size:"small",checked:ge,onClick:function(Je,At){At.stopPropagation()},onChange:function(Je){V({displaySetup:(0,E.default)({},c,{ydisplay:(0,E.default)({},c.ydisplay,{showDial:Je,showTitle:Je})})})}})}),r.createElement(so,{yreportType:S,reportType:x,isDualAxes:X,ydisplay:c.ydisplay,onChangeCurrentReport:V,onChangeDisplayValue:function(Je){V({displaySetup:(0,E.default)({},c,{ydisplay:Je})})}})),X&&r.createElement(se.Z.Panel,(0,E.default)({key:"rightyAxis",header:X?_l("\u8F85\u52A9Y\u8F74"):_l("\u6570\u503C(2)"),className:N()({yAxisCollapsible:!Se})},s,{extra:r.createElement(fr.Z,{size:"small",checked:Se,onClick:function(Je,At){At.stopPropagation()},onChange:function(Je){V({rightY:(0,E.default)({},g,{display:(0,E.default)({},g.display,{ydisplay:(0,E.default)({},g.display.ydisplay,{showDial:Je,showTitle:Je})})})})}})}),r.createElement(so,{isRight:!0,reportType:x,ydisplay:g.display.ydisplay,onChangeDisplayValue:function(Je){V({rightY:(0,E.default)({},g,{display:(0,E.default)({},g.display,{ydisplay:Je})})})}})))}var co=(0,Ot.Z)([`
  width: 32px;
  height: 32px;
  border-radius: 3px;
  padding: 4px;
  border: 1px solid #DDDDDD;
  background-color: #fff;
  .colorBlock {
    width: 100%;
    height: 100%;
  }
`],[`
  width: 32px;
  height: 32px;
  border-radius: 3px;
  padding: 4px;
  border: 1px solid #DDDDDD;
  background-color: #fff;
  .colorBlock {
    width: 100%;
    height: 100%;
  }
`]),Wr=dt.ZP.div(co),Vo=function(O){var V=O.data,s=O.quadrant,c=O.onChangeQuadrant,g=(0,r.useState)(s[V.textKey]||V.name),x=(0,Le.Z)(g,2),S=x[0],X=x[1];return r.createElement(ve.default,{value:S,className:"chartInput flex",placeholder:V.name,onChange:function(ee){X(ee.target.value.slice(0,20))},onBlur:function(){c((0,Dr.default)({},V.textKey,S))}})},Do=function(O){var V=(0,r.useState)(O.value),s=(0,Le.Z)(V,2),c=s[0],g=s[1];return r.createElement(ve.default,{value:c,className:"chartInput mLeft10 flex",placeholder:_l("\u9ED8\u8BA4"),onChange:function(S){g((0,Dt.pu)(S.target.value))},onBlur:function(S){O.onChange(c&&Number(c))},onKeyDown:function(S){S.which===13&&O.onChange(Number(c&&Number(c)))}})},qo=function(Ye){(0,te.default)(O,Ye);function O(V){return(0,me.default)(this,O),(0,T.default)(this,(O.__proto__||i()(O)).call(this,V))}return(0,J.default)(O,[{key:"renderQuadrantItem",value:function(s){var c=this.props,g=c.quadrant,x=c.onChangeQuadrant;return r.createElement(r.Fragment,null,r.createElement("div",{className:"flexRow valignWrapper mBottom12"},r.createElement(Vo,(0,E.default)({data:s},this.props)),r.createElement(jr.Z,{isPopupBody:!0,className:"mLeft10",value:g[s.bgColorKey],onChange:function(X){x((0,Dr.default)({},s.bgColorKey,X))}},r.createElement(Wr,{className:"pointer"},r.createElement("div",{className:"colorBlock",style:{backgroundColor:g[s.bgColorKey]}})))))}},{key:"render",value:function(){var s=this.props,c=s.quadrant,g=s.onChangeQuadrant;return r.createElement(r.Fragment,null,r.createElement("div",{className:"flexRow valignWrapper mBottom16"},r.createElement("div",{className:"mRight10",style:{width:60}},_l("\u8C61\u9650\u8F74")),r.createElement(jr.Z,{isPopupBody:!0,value:c.axisColor,onChange:function(S){g({axisColor:S})}},r.createElement(Wr,{className:"pointer"},r.createElement("div",{className:"colorBlock",style:{backgroundColor:c.axisColor}})))),r.createElement("div",{className:"flexRow valignWrapper mBottom16"},r.createElement("div",{className:"mRight10",style:{width:60}},_l("\u6587\u672C")),r.createElement(jr.Z,{isPopupBody:!0,value:c.textColor,onChange:function(S){g({textColor:S})}},r.createElement(Wr,{className:"pointer"},r.createElement("div",{className:"colorBlock",style:{backgroundColor:c.textColor}})))),r.createElement("div",{className:"mBottom16"},r.createElement("div",{className:"mBottom12"},_l("\u4F4D\u7F6E")),r.createElement("div",{className:"mTop10"},r.createElement("div",{className:"flexRow valignWrapper mBottom10"},r.createElement("div",null,_l("X\u8F74")),r.createElement(Do,{value:c.xValue,onChange:function(S){g({xValue:S})}})),r.createElement("div",{className:"flexRow valignWrapper"},r.createElement("div",null,_l("Y\u8F74")),r.createElement(Do,{value:c.yValue,onChange:function(S){g({yValue:S})}})))),r.createElement("div",{className:"mBottom16"},r.createElement("div",{className:"mBottom12"},_l("\u8C61\u9650\u540D\u79F0\u548C\u80CC\u666F\u8272")),this.renderQuadrantItem({textKey:"topRightText",bgColorKey:"topRightBgColor",name:_l("\u53F3\u4E0A\u8C61\u9650")}),this.renderQuadrantItem({textKey:"topLeftText",bgColorKey:"topLeftBgColor",name:_l("\u5DE6\u4E0A\u8C61\u9650")}),this.renderQuadrantItem({textKey:"bottomLeftText",bgColorKey:"bottomLeftBgColor",name:_l("\u5DE6\u4E0B\u8C61\u9650")}),this.renderQuadrantItem({textKey:"bottomRightText",bgColorKey:"bottomRightBgColor",name:_l("\u53F3\u4E0B\u8C61\u9650")})))}}]),O}(r.Component),Wo=function(Ye){(0,te.default)(O,Ye);function O(V){return(0,me.default)(this,O),(0,T.default)(this,(O.__proto__||i()(O)).call(this,V))}return(0,J.default)(O,[{key:"render",value:function(){var s=this.props,c=s.currentReport,g=s.onChangeDisplayValue,x=c.displaySetup,S=x.ydisplay;return r.createElement(r.Fragment,null,r.createElement("div",{className:"mBottom16 flexRow valignWrapper minWrapper"},r.createElement("div",{className:"mRight8"},_l("\u6700\u5C0F\u503C")),r.createElement("div",{className:"flex"},r.createElement(ve.default,{className:"chartInput",placeholder:_l("\u81EA\u52A8"),defaultValue:S.minValue,onBlur:function(re){var ee=re.target.value,ge=Number(ee||0);g("ydisplay",(0,E.default)({},S,{minValue:ee&&ge}))}}))),r.createElement("div",{className:"mBottom16 flexRow valignWrapper maxWrapper"},r.createElement("div",{className:"mRight8"},_l("\u6700\u5927\u503C")),r.createElement("div",{className:"flex"},r.createElement(ve.default,{className:"chartInput",placeholder:_l("\u81EA\u52A8"),defaultValue:S.maxValue,onBlur:function(re){var ee=re.target.value,ge=Number(ee||0);g("ydisplay",(0,E.default)({},S,{maxValue:ee&&ge}))}}))))}}]),O}(r.Component),ao=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.handleChangeMagnitude=function(c,g){var x=s.props,S=x.changeAllYaxis,X=x.yaxisList,re=x.onChangeYaxisList,ee=X.map(function(ge){if(S||ge.controlId===g.controlId){var Se=Fe().find(fe.$f,{value:c}),Ze=Se.suffix,Je=0;return c===0?Je=2:c===1&&(Je=ge.controlType===10000001?2:""),(0,E.default)({},ge,{magnitude:c,suffix:Ze,ydot:Je})}return ge});re({yaxisList:ee})},s.handleChangeYdot=function(c,g){var x=s.props,S=x.changeAllYaxis,X=x.yaxisList,re=x.onChangeYaxisList,ee="";c&&(ee=Fe().isNumber(c)?c:Number((0,Dt.pu)(c)),ee=ee>9?9:ee);var ge=X.map(function(Se){return S||Se.controlId===g.controlId?(0,E.default)({},Se,{ydot:ee}):Se});re({yaxisList:ge})},s.handleChangeSuffix=function(c,g){var x=s.props,S=x.changeAllYaxis,X=x.yaxisList,re=x.onChangeYaxisList,ee=X.map(function(ge){return S||ge.controlId===g.controlId?(0,E.default)({},ge,{suffix:c}):ge});re({yaxisList:ee})},s.handleChangeFixType=function(c,g){var x=s.props,S=x.changeAllYaxis,X=x.yaxisList,re=x.onChangeYaxisList,ee=X.map(function(ge){return S||ge.controlId===g.controlId?(0,E.default)({},ge,{fixType:c}):ge});re({yaxisList:ee})},s.state={},s}return(0,J.default)(O,[{key:"render",value:function(){var s=this,c=this.props,g=c.data,x=c.isPivotTable,S=g.magnitude,X=g.ydot,re=g.dot,ee=g.suffix,ge=g.fixType,Se=g.controlType,Ze=S===1&&X==="";return r.createElement(r.Fragment,null,r.createElement("div",{className:"mBottom15"},r.createElement("div",{className:"mBottom8"},_l("\u6570\u503C\u6570\u91CF\u7EA7")),r.createElement(ce.default,{className:"chartSelect w100",value:S,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(At){s.handleChangeMagnitude(At,g)}},(x?fe.$f.filter(function(Je){return Je.value}):fe.$f).map(function(Je){return r.createElement(ce.default.Option,{className:"selectOptionWrapper",key:Je.value,value:Je.value},Je.text)}))),r.createElement("div",{className:"mBottom15"},r.createElement("div",{className:"mBottom8"},_l("\u4FDD\u7559\u5C0F\u6570")),r.createElement(ve.default,{className:"chartInput",value:Ze?void 0:X,placeholder:Ze&&_l("\u6309\u5DE5\u4F5C\u8868\u5B57\u6BB5\u914D\u7F6E\u663E\u793A"),onChange:function(At){s.handleChangeYdot(At.target.value.replace(/-/g,""),g)},suffix:r.createElement("div",{className:"flexColumn"},r.createElement(L.Z,{icon:"expand_less",className:"Gray_9e Font20 pointer mBottom2",onClick:function(){var At=Number(X);s.handleChangeYdot(At+1,g)}}),r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20 pointer mTop2",onClick:function(){var At=Number(X);s.handleChangeYdot(At?At-1:0,g)}}))})),r.createElement("div",{className:"mBottom15"},r.createElement("div",{className:"mBottom8"},_l("\u5355\u4F4D")),r.createElement("div",{className:"addonBeforeWrapper valignWrapper"},r.createElement(ce.default,{className:"chartSelect",disabled:[0].includes(S),value:ge||0,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(At){s.handleChangeFixType(At,g)}},r.createElement(ce.default.Option,{className:"selectOptionWrapper",key:1,value:1},_l("\u524D\u7F00")),r.createElement(ce.default.Option,{className:"selectOptionWrapper",key:0,value:0},_l("\u540E\u7F00"))),r.createElement(ve.default,{className:"chartInput flex",style:{paddingLeft:90},value:ee,disabled:[0].includes(S),onChange:function(At){s.handleChangeSuffix(At.target.value.slice(0,10),g)}}))))}}]),O}(r.Component);function _o(Ye){var O=Ye.currentReport,V=Ye.changeCurrentReport,s=Ye.onChangeStyle,c=(0,xt.Z)(Ye,["currentReport","changeCurrentReport","onChangeStyle"]),g=O.reportType,x=O.yaxisList,S=O.rightY,X=O.style,re=g===fe.f0.DualAxes,ee=S?S.yaxisList:[],ge=x[0],Se=ee[0],Ze=X.tooltipValueType,Je=Ze===void 0?0:Ze;return r.createElement(r.Fragment,null,[fe.f0.PivotTable,fe.f0.NumberChart,fe.f0.TopChart].includes(g)?r.createElement(se.Z.Panel,(0,E.default)({header:_l("\u663E\u793A\u5355\u4F4D"),key:"pivotTableUnit"},c),x.filter(function(At){return At.normType!==7}).map(function(At){return r.createElement(r.Fragment,null,r.createElement("div",{className:"mBottom12 Bold Gray_75"},At.controlName),r.createElement(ao,{data:At,yaxisList:x,onChangeYaxisList:function(Kt){V((0,E.default)({},Kt,{displaySetup:(0,E.default)({},O.displaySetup,{magnitudeUpdateFlag:Date.now()})}))}}))})):r.createElement(se.Z.Panel,(0,E.default)({header:_l("\u663E\u793A\u5355\u4F4D"),key:"leftUnit"},c),ge&&r.createElement(r.Fragment,null,re&&r.createElement("div",{className:"mBottom12 Bold Gray_75"},_l("Y\u8F74")),r.createElement(ao,{changeAllYaxis:!0,data:ge,yaxisList:x,onChangeYaxisList:function(Jt){V((0,E.default)({},Jt,{displaySetup:(0,E.default)({},O.displaySetup,{magnitudeUpdateFlag:Date.now()})}))}})),Se&&r.createElement(r.Fragment,null,r.createElement("div",{className:"mBottom12 Bold Gray_75"},re?_l("\u8F85\u52A9Y\u8F74"):_l("\u6570\u503C(2)")),r.createElement(ao,{changeAllYaxis:!0,data:Se,yaxisList:ee,onChangeYaxisList:function(Jt){V({displaySetup:(0,E.default)({},O.displaySetup,{magnitudeUpdateFlag:Date.now()}),rightY:(0,E.default)({},O.rightY,Jt)})}})),[fe.f0.BarChart,fe.f0.LineChart,fe.f0.DualAxes,fe.f0.BidirectionalBarChart,fe.f0.PieChart,fe.f0.RadarChart,fe.f0.FunnelChart,fe.f0.ScatterChart].includes(g)&&r.createElement("div",{className:"mBottom15 mTop5"},r.createElement("div",{className:"mBottom8"},_l("\u5361\u7247\u5185\u5BB9")),r.createElement("div",{className:"chartTypeSelect flexRow valignWrapper"},r.createElement("div",{className:N()("flex centerAlign pointer Gray_75",{active:Je===0}),onClick:function(){return s({tooltipValueType:0})}},_l("\u539F\u503C")),r.createElement("div",{className:N()("flex centerAlign pointer Gray_75",{active:Je===1}),onClick:function(){return s({tooltipValueType:1})}},_l("\u663E\u793A\u5355\u4F4D"))))))}var _r=t(8620),_a=t(96072),$r=_r.W[0].colors,el=[{value:100,color:$r[0]},{value:66,color:$r[1]},{value:33,color:$r[2]}],tl={type:1,quantity:3,isFloor:!0,sectionColors:el},uo=function(O,V){for(var s=100/O,c=[],g=0;g<O;g++)if(g){var x=s*g;c.push(V?Math.floor(x):Number(x.toFixed(2)))}return c.concat(100).reverse().map(function(S){return{value:S}})},nl=function(O){var V=O.style,s=O.onChangeStyle,c=O.visible,g=O.onCancel,x=V.sectionColorConfig,S=x===void 0?tl:x,X=(0,r.useState)(S),re=(0,Le.Z)(X,2),ee=re[0],ge=re[1],Se=ee.type,Ze=ee.isFloor,Je=ee.quantity,At=ee.sectionColors,Jt=function(Gn){ge((0,E.default)({},ee,Gn))},Kt=function(){Jt({sectionColors:At.sort(function(Gn,yn){return yn.value-Gn.value})})};return r.createElement(le.Z,{title:_l("\u533A\u95F4\u989C\u8272"),width:680,className:"chartModal",visible:c,centered:!0,destroyOnClose:!0,closeIcon:r.createElement(L.Z,{icon:"close",className:"Font20 pointer Gray_9e"}),footer:r.createElement("div",{className:"mTop20 mBottom10 pRight8"},r.createElement(k.default,{autoInsertSpaceInButton:!1},r.createElement(oe.default,{type:"link",onClick:g},_l("\u53D6\u6D88")),r.createElement(oe.default,{type:"primary",onClick:function(){var Gn=At.filter(function(na,ga){var ua=At[ga+1]||{};return na.value>=ua.value||_.isUndefined(ua.value)});if(Gn.length!==At.length){alert(_l("\u5F53\u524D\u503C\u8BF7\u6309\u4ECE\u5927\u5230\u5C0F\u586B\u5199"),3);return}if(At.filter(function(na){return!na.value}).length){alert(_l("\u5F53\u8F93\u5165\u5927\u4E8E0\u7684\u503C"),3);return}var yn=At.map(function(na){return na.value});if(_.uniq(yn).length!==yn.length){alert(_l("\u4E0D\u5141\u8BB8\u914D\u7F6E\u76F8\u540C\u503C"),3);return}s({sectionColorConfig:ee}),g()}},_l("\u786E\u8BA4")))),onCancel:g},r.createElement("div",{className:"Font13"},r.createElement("div",{className:"mBottom10"},_l("\u6570\u636E\u6620\u5C04\u533A\u95F4")),r.createElement(mr.default.Group,{className:"mBottom10",value:Se,onChange:function(Gn){var yn=Gn.target.value,na={type:yn};yn===1&&(na.quantity=At.length,na.sectionColors=uo(At.length,Ze)),Jt(na)}},r.createElement(mr.default,{value:1,className:"Font13 mRight60"},_l("\u7B49\u5206\u533A\u95F4")),r.createElement(mr.default,{value:2,className:"Font13"},_l("\u81EA\u5B9A\u4E49\u533A\u95F4"))),Se===1&&r.createElement("div",{className:"flexRow valignWrapper mTop10 mBottom10"},r.createElement("div",{className:"mRight10"},_l("\u533A\u95F4\u4E2A\u6570")),r.createElement(ve.default,{style:{width:100},className:"chartInput",value:Je,onChange:function(Gn){var yn=Gn.target.value.replace(/[^0-9]+/g,"");Jt({quantity:yn?Number(yn):""})},onBlur:function(){var Gn=Je||0;Gn<=0&&(Gn=1),Gn>=10&&(Gn=10);var yn=uo(Gn,Ze);Jt({quantity:Gn,sectionColors:yn.map(function(na,ga){return(0,E.default)({},na,{color:_.get(At[ga],"color")||void 0})})})},suffix:r.createElement("div",{className:"flexColumn"},r.createElement(L.Z,{icon:"expand_less",className:"Gray_9e Font20 pointer mBottom2 Hover_21",onClick:function(){var Gn=Je+1;Gn>=10&&(Gn=10);var yn=uo(Gn,Ze);Jt({quantity:Gn,sectionColors:yn.map(function(na,ga){return(0,E.default)({},na,{color:_.get(At[ga],"color")||void 0})})})}}),r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20 pointer mTop2 Hover_21",onClick:function(){var Gn=Je-1;Gn<=1&&(Gn=1);var yn=uo(Gn,Ze);Jt({quantity:Gn,sectionColors:yn.map(function(na,ga){return(0,E.default)({},na,{color:_.get(At[ga],"color")||void 0})})})}}))}),r.createElement(Q.default,{className:"mLeft16",checked:Ze,onChange:function(Gn){var yn=Gn.target.checked;Jt({isFloor:yn,sectionColors:uo(At.length,yn)})}},_l("\u53D6\u6574"))),r.createElement("div",{className:"mBottom16 mTop10"},_l("\u6309\u767E\u5206\u6BD4\u533A\u95F4\u5212\u5206\u4F9D\u636E")),At.map(function(ln,Gn){return r.createElement("div",{className:"flexRow valignWrapper mBottom10",key:Gn},r.createElement("div",{className:"mRight10"},_l("\u5F53\u524D\u503C <=")),r.createElement(ve.default,{disabled:Se===1,style:{width:180},className:"chartInput Gray",value:ln.value,onChange:function(na){var ga=na.target.value.replace(/[^0-9]+/g,""),ua=ga?Number(ga):"";ua<=0&&(ua=0),ua>=100&&(ua=100),Jt({sectionColors:At.map(function(Xn,$a){return Gn===$a?(0,E.default)({},Xn,{value:ua}):Xn})})},onBlur:Kt,onKeyDown:function(na){na.which===13&&Kt()}}),r.createElement("div",{className:"mLeft5 mRight24"},"%"),r.createElement("div",null,_l("\u989C\u8272\u4E3A")),r.createElement(jr.Z,{isPopupBody:!0,className:"mLeft10",value:ln.color||$r[Gn%$r.length],onChange:function(na){Jt({sectionColors:At.map(function(ga,ua){return Gn===ua?(0,E.default)({},ga,{color:na}):ga})})}},r.createElement("div",{className:"colorWrap pointer"},r.createElement("div",{className:"colorBlock",style:{backgroundColor:ln.color||$r[Gn%$r.length]}}))),Se===2&&At.length>1&&r.createElement(j.default,{title:_l("\u5220\u9664")},r.createElement(L.Z,{className:"mLeft10 Gray_9e Font18 pointer Hover_21",icon:"close",onClick:function(){Jt({sectionColors:At.filter(function(na,ga){return Gn!==ga})})}})))}),Se===2&&At.length<10&&r.createElement("div",{className:"flexRow valignWrapper pointer mTop10 mBottom10 ThemeColor hoverThemeColor",style:{width:"max-content"},onClick:function(){Jt({sectionColors:At.concat({value:""})})}},r.createElement(L.Z,{className:"mRight2",icon:"add"}),_l("\u6DFB\u52A0\u533A\u95F4"))))},Ro=function(O){var V=O.projectId,s=O.currentReport,c=O.onChangeStyle,g=O.onChangeDisplayValue,x=O.themeColor,S=O.customPageConfig,X=S===void 0?{}:S,re=X.chartColor,ee=X.chartColorIndex,ge=ee===void 0?1:ee,Se=s.style||{},Ze=(0,fe.KC)(Se,x,V),Je=s.style.gaugeColor,At=Je===void 0?"#64B5F6":Je,Jt=re&&ge>=(Se.chartColorIndex||0)?Ze[0]:(0,_a.T)(At,x),Kt=s.displaySetup.colorRules,ln=_.get(Kt[1],"dataBarRule"),Gn=s.style,yn=Gn.gaugeColorType,na=yn===void 0?1:yn,ga=Gn.sectionColorConfig,ua=Gn.applySectionScale,Xn=(0,r.useState)(!1),$a=(0,Le.Z)(Xn,2),Ga=$a[0],er=$a[1],rr=(0,r.useState)(!1),gr=(0,Le.Z)(rr,2),sr=gr[0],Tr=gr[1];return r.createElement("div",{className:"mBottom16"},r.createElement(mr.default.Group,{className:"mBottom10",value:na,onChange:function(Va){var Ka=Va.target.value;c({gaugeColorType:Ka,applySectionScale:Ka===1?!1:ua}),Ka===2&&_.isEmpty(ga)&&Tr(!0)}},r.createElement(mr.default,{value:1,className:"Font13 mRight40"},_l("\u8FDB\u5EA6")),r.createElement(mr.default,{value:2,className:"Font13"},_l("\u533A\u95F4\u989C\u8272"))),na===1&&r.createElement("div",{className:"flexRow valignWrapper"},r.createElement("div",null,_l("\u989C\u8272")),_.isEmpty(ln)&&r.createElement(jr.Z,{isPopupBody:!0,sysColor:!0,themeColor:x,className:"mLeft10",value:Jt,onChange:function(Va){var Ka={gaugeColor:Va};re&&(Ka.chartColorIndex=ge+1),c(Ka)}},r.createElement("div",{className:"colorWrap pointer"},r.createElement("div",{className:"colorBlock",style:{backgroundColor:Jt}}))),r.createElement("div",{className:"entranceWrap ruleIcon flexRow valignWrapper pointer",onClick:function(){er(!0)}},r.createElement(L.Z,{className:"Font16 Gray_9e",icon:"formula"})),!_.isEmpty(ln)&&r.createElement("div",{className:"entranceWrap ruleIcon flexRow valignWrapper pointer",onClick:function(){var Va=Kt.map(function(Ka,tr){return tr===1?{}:Ka});g("colorRules",Va)}},r.createElement(L.Z,{className:"Font16 Gray_9e",icon:"delete2"}))),na===2&&r.createElement("div",{className:"entranceWrap hover flex flexRow valignWrapper pointer pLeft10",onClick:function(){return Tr(!0)}},r.createElement("span",{className:"flex"},_l("\u81EA\u5B9A\u4E49\u533A\u95F4")),r.createElement(L.Z,{className:"Font16 Gray_9e mRight10 highlightIcon",icon:"edit"})),r.createElement(ho.Z,{isPercent:!0,visible:Ga,yaxisList:s.yaxisList,reportType:s.reportType,colorRule:ln||{},onSave:function(Va){var Ka={controlId:"",dataBarRule:Va};Kt.length?g("colorRules",[Kt[0],Ka]):g("colorRules",[{},Ka]),er(!1)},onCancel:function(){return er(!1)}}),r.createElement(nl,{style:s.style,onChangeStyle:c,visible:sr,onCancel:function(){return Tr(!1)}}))};function Ao(Ye){var O=Ye.currentReport,V=Ye.onChangeStyle,s=Ye.onChangeDisplayValue,c=(0,xt.Z)(Ye,["currentReport","onChangeStyle","onChangeDisplayValue"]);return r.createElement(se.Z.Panel,(0,E.default)({key:"gaugeColor",header:_l("\u4EEA\u8868\u76D8")},Ye),r.createElement(Ro,Ye))}function Po(Ye){var O=Ye.currentReport,V=Ye.onChangeStyle,s=(0,xt.Z)(Ye,["currentReport","onChangeStyle"]),c=O.style,g=_.isUndefined(c.scaleType)?1:c.scaleType,x=_.isUndefined(c.isNumberScale)?g===1:c.isNumberScale,S=_.isUndefined(c.isProgressScale)?g===2:c.isProgressScale,X=c.applySectionScale;return r.createElement(se.Z.Panel,(0,E.default)({key:"scale",header:_l("\u523B\u5EA6"),className:N()({collapsible:!g})},s,{extra:r.createElement(fr.Z,{size:"small",checked:!!g,onClick:function(ee,ge){ge.stopPropagation()},onChange:function(ee){V({scaleType:ee?1:null,isNumberScale:ee,isProgressScale:ee})}})}),r.createElement("div",{className:"flexRow valignWrapper mBottom13"},r.createElement(Q.default,{checked:x,onChange:function(){V({isNumberScale:event.target.checked})}},_l("\u663E\u793A\u6570\u503C"))),r.createElement("div",{className:"flexRow valignWrapper mBottom13"},r.createElement(Q.default,{checked:S,onChange:function(){V({isProgressScale:event.target.checked})}},_l("\u663E\u793A\u767E\u5206\u6BD4"))),c.gaugeColorType===2&&r.createElement("div",{className:"flexRow valignWrapper mBottom13"},r.createElement(Q.default,{checked:X,onChange:function(){V({applySectionScale:event.target.checked})}},_l("\u6309\u7167\u533A\u95F4\u663E\u793A"))))}function Uo(Ye){var O=Ye.currentReport,V=Ye.onChangeStyle,s=(0,xt.Z)(Ye,["currentReport","onChangeStyle"]),c=O.style,g=_.isUndefined(c.indicatorVisible)?!0:c.indicatorVisible;return r.createElement(se.Z.Panel,(0,E.default)({key:"indicator",header:_l("\u6307\u9488"),className:"hideArrowIcon"},s,{extra:r.createElement(fr.Z,{size:"small",checked:g,onClick:function(S,X){X.stopPropagation()},onChange:function(S){V({indicatorVisible:S})}})}))}var Qr=t(38778),Go=t(66643),go=t(46865),al=t(96661);function rl(Ye){var O=this,V=Ye.currentReport,s=Ye.onChangeStyle,c=Ye.changeCurrentReport,g=Ye.themeColor,x=Ye.customPageConfig,S=(0,xt.Z)(Ye,["currentReport","onChangeStyle","changeCurrentReport","themeColor","customPageConfig"]),X=V.style,re=V.pivotTable,ee=re===void 0?{}:re,ge=function(na){var ga=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;c({pivotTable:(0,E.default)({},ee,{lineSummary:(0,E.default)({},ee.lineSummary,na)})},ga)},Se=function(na){var ga=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;c({pivotTable:(0,E.default)({},ee,{columnSummary:(0,E.default)({},ee.columnSummary,na)})},ga)},Ze=function(){return r.createElement(se.Z.Panel,(0,E.default)({key:"preinstallStyle",header:_l("\u8868")},S),r.createElement(Go.Z,{style:X,customPageConfig:x,onChangeStyle:s}))},Je=function(){return r.createElement(se.Z.Panel,(0,E.default)({key:"cell",header:_l("\u5355\u5143\u683C")},S),r.createElement(go.Z,{type:"cell",style:X,themeColor:g,customPageConfig:x,onChangeStyle:s}))},At=function(){return r.createElement(se.Z.Panel,(0,E.default)({key:"lineTitleStyle",header:_l("\u884C\u6807\u9898")},S),r.createElement(go.Z,{type:"line",style:X,pivotTable:ee,themeColor:g,customPageConfig:x,onChangeStyle:s}))},Jt=function(){return r.createElement(se.Z.Panel,(0,E.default)({key:"columnTitleStyle",header:_l("\u5217\u6807\u9898")},S),r.createElement(go.Z,{type:"column",style:X,themeColor:g,customPageConfig:x,onChangeStyle:s}))},Kt=function(){var na=ee.lines,ga=!!na.slice(1,na.length).filter(function(ua){return ua.subTotal}).length;return na.length<=1?null:r.createElement(se.Z.Panel,(0,E.default)({key:"subLineCount",header:_l("\u884C\u5C0F\u8BA1"),className:N()({collapsible:!ga})},S,{extra:r.createElement(fr.Z,{size:"small",checked:ga,onClick:function(Xn,$a){$a.stopPropagation()},onChange:function(Xn){c({pivotTable:(0,E.default)({},V.pivotTable,{lines:na.map(function($a,Ga){return Ga?(0,E.default)({},$a,{subTotal:Xn}):$a})})},!0)}})}),r.createElement(al.Z,{currentReport:V,onChangeCurrentReport:c}))},ln=function(){var na=V.reportType,ga=V.displaySetup,ua=V.yaxisList,Xn=ee.showLineTotal,$a=ee.lineSummary,Ga=$a===void 0?{}:$a,er=Ga.controlList,rr=er===void 0?[]:er,gr=Ga.rename;return r.createElement(se.Z.Panel,(0,E.default)({key:"lineCount",header:_l("\u884C\u603B\u8BA1"),className:N()({collapsible:!Xn})},S,{extra:r.createElement(fr.Z,{size:"small",checked:Xn,onClick:function(Tr,Oa){Oa.stopPropagation()},onChange:function(Tr){c({pivotTable:(0,E.default)({},ee,{showLineTotal:Tr})},!0)}})}),r.createElement(r.Fragment,null,r.createElement("div",{className:"mBottom16"},r.createElement("div",{className:"mBottom8"},_l("\u540D\u79F0")),r.createElement(ve.default,{defaultValue:gr||_l("\u884C\u6C47\u603B"),className:"chartInput w100",onChange:function(Tr){ge({rename:Tr.target.value.slice(0,20)},!1)}})),r.createElement(Yr.Y,{summary:Ga,locationType:"line",onChangeSummary:ge}),ua.filter(function(sr){return(0,xe.Yc)(sr.controlType)?!0:sr.normType!==7}).map(function(sr){return r.createElement(Yr.X,{key:sr.controlId,yAxis:sr,isPivotTable:!0,extra:r.createElement(Q.default,{className:"mLeft0 mBottom15",checked:!!_.find(rr,{controlId:sr.controlId}),onChange:function(Oa){var Va=sr.controlId;if(Oa.target.checked){var Ka={controlId:Va,name:"",sum:0,type:1};c({pivotTable:(0,E.default)({},ee,{lineSummary:(0,E.default)({},Ga,{controlList:rr.concat(Ka)})})},!0)}else c({pivotTable:(0,E.default)({},ee,{lineSummary:(0,E.default)({},Ga,{controlList:rr.filter(function(tr){return tr.controlId!==Va})})})},!0)}},sr.controlName),summary:_.find(rr,{controlId:sr.controlId})||{type:1},onChangeSummary:function(Oa){var Va=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Ka=sr.controlId,tr=rr.map(function(Fr){return Ka===Fr.controlId?(0,E.default)({},Fr,Oa):Fr});c({pivotTable:(0,E.default)({},ee,{lineSummary:(0,E.default)({},Ga,{controlList:tr})})},Va)}})})))},Gn=function(){var na=V.reportType,ga=V.displaySetup,ua=V.yaxisList,Xn=ee.showColumnTotal,$a=ee.columnSummary,Ga=$a===void 0?{}:$a,er=Ga.controlList,rr=er===void 0?[]:er,gr=Ga.rename,sr=function(Ka,tr,Fr){if(tr){var ro=(0,E.default)({controlId:Ka,name:"",sum:0,type:1},Fr);c({pivotTable:(0,E.default)({},ee,{columnSummary:(0,E.default)({},Ga,{controlList:rr.concat(ro)})})},!0)}else O.props.changeCurrentReport({pivotTable:(0,E.default)({},ee,{columnSummary:(0,E.default)({},Ga,{controlList:rr.filter(function(xr){return xr.controlId!==Ka})})})},!0)},Tr=function(Ka,tr){var Fr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,ro=rr.map(function(xr){return Ka===xr.controlId?(0,E.default)({},xr,tr):xr}).filter(function(xr){return xr.number||xr.percent});c({pivotTable:(0,E.default)({},ee,{columnSummary:(0,E.default)({},Ga,{controlList:ro})})},Fr)},Oa=function(Ka){var tr=_.find(rr,{controlId:Ka.controlId});return r.createElement(r.Fragment,null,r.createElement("div",{className:"mBottom5 bold"},Ka.controlName),r.createElement("div",{className:"flexRow valignWrapper mBottom15"},r.createElement(Q.default,{className:"flex",checked:tr?tr.number:!1,onChange:function(ro){var xr=ro.target.checked,Lo=Ka.controlId;tr?Tr(Lo,{number:xr}):sr(Lo,xr,xr?{number:!0,percent:!1}:void 0)}},_l("\u6570\u503C")),r.createElement(Q.default,{className:"flex",checked:tr?tr.percent:!1,onChange:function(ro){var xr=ro.target.checked,Lo=Ka.controlId;tr?Tr(Lo,{percent:xr}):sr(Lo,xr,xr?{number:!1,percent:!0}:void 0)}},_l("\u767E\u5206\u6BD4"))))};return r.createElement(se.Z.Panel,{key:"columnCount",header:_l("\u5217\u603B\u8BA1"),className:N()({collapsible:!Xn}),extra:r.createElement(fr.Z,{size:"small",checked:Xn,onClick:function(Ka,tr){tr.stopPropagation()},onChange:function(Ka){c({pivotTable:(0,E.default)({},ee,{showColumnTotal:Ka})},!0)}})},r.createElement(r.Fragment,null,r.createElement("div",{className:"mBottom16"},r.createElement("div",{className:"mBottom8"},_l("\u540D\u79F0")),r.createElement(ve.default,{defaultValue:gr||_l("\u5217\u6C47\u603B"),className:"chartInput w100",onChange:function(Ka){Se({rename:Ka.target.value.slice(0,20)},!1)}})),r.createElement(Yr.Y,{summary:Ga,locationType:"column",onChangeSummary:Se}),ua.filter(function(Va){return(0,xe.Yc)(Va.controlType)?!0:Va.normType!==7}).map(function(Va){return r.createElement(Yr.X,{key:Va.controlId,yAxis:Va,isPivotTable:!0,extra:Oa(Va),summary:_.find(rr,{controlId:Va.controlId})||{type:1},onChangeSummary:function(tr,Fr){Tr(Va.controlId,tr,Fr)}})})))};return r.createElement(r.Fragment,null,Ze(),Je(),At(),Jt(),Kt(),ln(),Gn())}function Fo(Ye){var O=Ye.key,V=Ye.title,s=Ye.yaxisList,c=Ye.summary,g=Ye.currentReport,x=Ye.changeCurrentReport,S=(0,xt.Z)(Ye,["key","title","yaxisList","summary","currentReport","changeCurrentReport"]),X=g.displaySetup,re=c.controlList,ee=re===void 0?[]:re,ge=c.all&&ee.length===s.length;return r.createElement(se.Z.Panel,(0,E.default)({key:O,header:V},S,{extra:r.createElement(fr.Z,{size:"small",checked:ge,onClick:function(Ze,Je){Je.stopPropagation()},onChange:function(Ze){x({displaySetup:(0,E.default)({},X,{showTotal:Ze}),summary:(0,E.default)({},c,{all:Ze,controlList:Ze?s.map(function(Je){return{controlId:Je.controlId,name:"",sum:0,type:1}}):[]})},!0)}})}),r.createElement(r.Fragment,null,r.createElement("div",{className:"mBottom16"},r.createElement(Q.default,{className:"mBottom10",checked:c.all,onChange:function(Ze){var Je={summary:(0,E.default)({},c,{all:Ze.target.checked})};Ze.target.checked&&(Je.displaySetup=(0,E.default)({},X,{showTotal:!0})),x(Je,!0)}},_l("\u5168\u90E8")," ("+_l("\u6C42\u548C")+")"),r.createElement("div",{className:"mBottom8"},_l("\u63D0\u793A")),r.createElement(ve.default,{defaultValue:c.name||_l("\u603B\u8BA1"),className:"chartInput w100",onChange:function(Ze){x({summary:(0,E.default)({},c,{name:Ze.target.value.slice(0,20)})},!1)}})),s.filter(function(Se){return(0,xe.Yc)(Se.controlType)?!0:Se.normType!==7}).map(function(Se){var Ze=_.find(ee,{controlId:Se.controlId})||{type:1};return r.createElement(Yr.X,{key:Se.controlId,yAxis:Se,isPivotTable:!0,extra:r.createElement(Q.default,{className:"mLeft0 mBottom15",checked:!!_.find(ee,{controlId:Se.controlId}),onChange:function(At){var Jt=Se.controlId;if(At.target.checked){var Kt={controlId:Jt,name:"",sum:0,type:1},ln={summary:(0,E.default)({},c,{controlList:ee.concat(Kt)}),displaySetup:(0,E.default)({},X,{showTotal:!0})};x(ln,!0)}else x({summary:(0,E.default)({},c,{controlList:ee.filter(function(Gn){return Gn.controlId!==Jt})})},!0)}},Se.controlName),summary:Ze,onChangeSummary:function(At){var Jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Kt=Se.controlId,ln=ee.map(function(Gn){return Kt===Gn.controlId?(0,E.default)({},Gn,At):Gn});x({summary:(0,E.default)({},c,{controlList:ln})},Jt)}})})))}var Wn=t(70264),Ae=t(75064),Ge=(0,Ot.Z)([`
  border: 1px solid #d9d9d9;
  border-radius: 4px;
  height: 30px;
  background-color: #fff;
  &.ruleIcon {
    width: 30px;
    margin-left: 10px;
    justify-content: center;
    &:hover {
      background-color: #f5f5f5;
    }
  }
`],[`
  border: 1px solid #d9d9d9;
  border-radius: 4px;
  height: 30px;
  background-color: #fff;
  &.ruleIcon {
    width: 30px;
    margin-left: 10px;
    justify-content: center;
    &:hover {
      background-color: #f5f5f5;
    }
  }
`]),A=dt.ZP.div(Ge),M=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.state={baseColorModalVisible:!1,ruleColorModalVisible:!1},s}return(0,J.default)(O,[{key:"getRuleVisible",value:function(){var s=this.props.currentReport,c=s.reportType,g=s.yaxisList,x=s.split,S=s.yreportType,X=s.displaySetup;return[fe.f0.BarChart].includes(c)?g.length===1&&Fe().isEmpty(x.controlId):[fe.f0.DualAxes].includes(c)?g.length===1&&Fe().isEmpty(x.controlId)&&S===fe.f0.BarChart:[fe.f0.ScatterChart].includes(c)?Fe().isEmpty(x.controlId):[fe.f0.CountryLayer].includes(c)?X.showChartType!==2:[fe.f0.FunnelChart,fe.f0.GaugeChart,fe.f0.ProgressChart].includes(c)}},{key:"getColorName",value:function(){var s=this.props.worksheetInfo.projectId,c=this.props.currentReport,g=c.style,x=g===void 0?{}:g,S=c.reportType,X=c.split,re=S===fe.f0.BarChart,ee=""+fe.Yv[0].name+_l("\u914D\u8272"),ge=(0,xe.en)(this.props.currentReport)||re&&Fe().get(X,"options.length");if(Fe().isUndefined(x.colorType))return ee;var Se=this.props.customPageConfig,Ze=Se.chartColor,Je=Se.chartColorIndex,At=Je===void 0?1:Je,Jt=At>=(x.chartColorIndex||0)?(0,E.default)({},x,Ze):x,Kt=Jt.colorType,ln=Jt.colorGroupIndex,Gn=Jt.colorGroupId;if(Kt===0)return ge?_l("\u9009\u9879\u914D\u8272"):ee;if(Kt===1){var yn=null,na=(0,fe.og)(s);return Gn==="adaptThemeColor"?yn=_l("\u9002\u5E94\u4E3B\u9898"):Gn?yn=(Fe().find(na,{id:Gn})||na[0]).name:fe.Yv[ln]?yn=fe.Yv[ln].name:yn=na[0].name,""+yn+_l("\u914D\u8272")}else return _l("\u81EA\u5B9A\u4E49\u914D\u8272")}},{key:"renderBaseColorModal",value:function(){var s=this,c=this.props,g=c.worksheetInfo,x=c.currentReport,S=c.onChangeCurrentReport,X=c.themeColor,re=c.customPageConfig,ee=x.style,ge=re.chartColor,Se=re.chartColorIndex,Ze=Se===void 0?1:Se,Je=this.state.baseColorModalVisible;return r.createElement(Ae.Z,{visible:Je,projectId:g.projectId,currentReport:x,onChange:function(Jt){ge&&(Jt.style.chartColorIndex=Ze+1),S(Jt,!0),s.setState({baseColorModalVisible:!1})},onCancel:function(){s.setState({baseColorModalVisible:!1})}})}},{key:"renderRuleColorModal",value:function(){var s=this,c=this.props,g=c.currentReport,x=c.onChangeDisplayValue,S=this.state.ruleColorModalVisible,X=g.displaySetup.colorRules,re=function(){s.setState({ruleColorModalVisible:!1})};return r.createElement(ho.Z,{visible:S,yaxisList:g.yaxisList,reportType:g.reportType,colorRule:X.length?Fe().get(X[0],"dataBarRule")||{}:{},onSave:function(ge){var Se={controlId:"",dataBarRule:ge};x("colorRules",[Se]),re()},onCancel:re})}},{key:"render",value:function(){var s=this,c=this.getColorName(),g=this.props.currentReport.displaySetup,x=this.getRuleVisible(),S=x?g.colorRules:[];return r.createElement("div",{className:"mBottom16 flexRow valignWrapper"},r.createElement(A,{className:"flex flexRow valignWrapper pointer pLeft10",onClick:function(){S.length?s.setState({ruleColorModalVisible:!0}):s.setState({baseColorModalVisible:!0})}},S.length?r.createElement(r.Fragment,null,r.createElement(L.Z,{className:"Font16 Gray_9e mRight10",icon:"formula"}),r.createElement("span",null,_l("\u89C4\u5219"))):r.createElement("span",null,c)),x&&(S.length?r.createElement(A,{className:"ruleIcon flexRow valignWrapper pointer",onClick:function(){s.props.onChangeDisplayValue("colorRules",[])}},r.createElement(L.Z,{className:"Font16 Gray_9e",icon:"delete2"})):r.createElement(Wn.Z,{text:r.createElement("span",null,_l("\u989C\u8272\u89C4\u5219"))},r.createElement(A,{className:"ruleIcon flexRow valignWrapper pointer",onClick:function(){s.setState({ruleColorModalVisible:!0})}},r.createElement(L.Z,{className:"Font16 Gray_9e",icon:"formula"})))),this.renderBaseColorModal(),this.renderRuleColorModal())}}]),O}(r.Component),Ve=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.handleSave=function(){var c=s.state,g=c.min,x=c.max,S=c.positiveNumberColor,X=c.negativeNumberColor,re=c.axisColor,ee=c.direction,ge=c.onlyShowBar;s.props.onSave({min:g,max:x,positiveNumberColor:S,negativeNumberColor:X,axisColor:re,direction:ee,onlyShowBar:ge})},s.state={min:0,max:void 0,positiveNumberColor:"#44b9b0",negativeNumberColor:"#fe423f",axisColor:"#333333",direction:1,onlyShowBar:!1},s}return(0,J.default)(O,[{key:"componentWillReceiveProps",value:function(s){if(s.visible){var c=s.colorRule;this.setState(c)}}},{key:"renderRuleColorFooter",value:function(){var s=this.props.onCancel;return r.createElement("div",{className:"mTop20 mBottom10 pRight8"},r.createElement(k.default,{autoInsertSpaceInButton:!1},r.createElement(oe.default,{type:"link",onClick:s},_l("\u53D6\u6D88")),r.createElement(oe.default,{type:"primary",onClick:this.handleSave},_l("\u786E\u8BA4"))))}},{key:"renderContent",value:function(){var s=this,c=this.state,g=c.min,x=c.max,S=c.positiveNumberColor,X=c.negativeNumberColor,re=c.axisColor,ee=c.direction,ge=c.onlyShowBar;return r.createElement(r.Fragment,null,r.createElement("div",{className:"flexRow dataBarColorContent"},r.createElement("div",{className:"flex mRight10"},r.createElement("div",{className:"mBottom8"},_l("\u6700\u5C0F\u503C")),r.createElement(ve.default,{value:g,className:"chartInput mRight10",placeholder:_l("\u6700\u5C0F\u503C"),onChange:function(Ze){var Je=(0,Dt.pu)(event.target.value);s.setState({min:Je||void 0})},onBlur:function(){s.setState({min:g?Number(g):void 0})}}),r.createElement("div",{className:"mTop12 mBottom8"},_l("\u6B63\u503C\u6761\u5F62\u56FE")),r.createElement(jr.Z,{isPopupBody:!0,value:S,onChange:function(Ze){s.setState({positiveNumberColor:Ze})}},r.createElement("div",{className:"palette valignWrapper pointer",style:{width:56}},r.createElement("div",{className:"colorBox",style:{backgroundColor:S}}),r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}))),r.createElement("div",{className:"mTop12 mBottom8"},_l("\u8D1F\u503C\u6761\u5F62\u56FE")),r.createElement(jr.Z,{isPopupBody:!0,value:X,onChange:function(Ze){s.setState({negativeNumberColor:Ze})}},r.createElement("div",{className:"palette valignWrapper pointer",style:{width:56}},r.createElement("div",{className:"colorBox",style:{backgroundColor:X}}),r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}))),r.createElement("div",{className:"mTop12"},r.createElement(Q.default,{checked:ge,onChange:function(Ze){s.setState({onlyShowBar:Ze.target.checked})}},_l("\u4EC5\u663E\u793A\u6761\u5F62\u56FE")))),r.createElement("div",{className:"flex"},r.createElement("div",{className:"mBottom8"},_l("\u6700\u5927\u503C")),r.createElement(ve.default,{value:x,className:"chartInput mRight10",placeholder:_l("\u6700\u5927\u503C"),onChange:function(Ze){var Je=(0,Dt.pu)(event.target.value);s.setState({max:Je||void 0})},onBlur:function(){s.setState({max:x?Number(x):void 0})}}),r.createElement("div",{className:"mTop12 mBottom8"},_l("\u6761\u5F62\u56FE\u65B9\u5411")),r.createElement(ce.default,{style:{width:230},className:"chartSelect mRight10",value:ee,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(Ze){s.setState({direction:Ze})}},r.createElement(ce.default.Option,{className:"selectOptionWrapper",value:1},_l("\u4ECE\u5DE6\u5230\u53F3")),r.createElement(ce.default.Option,{className:"selectOptionWrapper",value:2},_l("\u4ECE\u53F3\u5230\u5DE6"))),r.createElement("div",{className:"mTop12 mBottom8"},_l("\u8F74")),r.createElement(jr.Z,{isPopupBody:!0,value:re,onChange:function(Ze){s.setState({axisColor:Ze})}},r.createElement("div",{className:"palette valignWrapper pointer",style:{width:56}},r.createElement("div",{className:"colorBox",style:{backgroundColor:re}}),r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}))))))}},{key:"render",value:function(){var s=this.props,c=s.visible,g=s.onCancel;return r.createElement(le.Z,{title:_l("\u6570\u636E\u6761"),width:580,className:"chartModal chartRuleColorModal",visible:c,centered:!0,destroyOnClose:!0,closeIcon:r.createElement(L.Z,{icon:"close",className:"Font20 pointer Gray_9e"}),footer:this.renderRuleColorFooter(),onCancel:g},this.renderContent())}}]),O}(r.Component),Oe=(0,Ot.Z)([`
  color: #2196F3;
  &:hover {
    color: #0484fb;
  }
`],[`
  color: #2196F3;
  &:hover {
    color: #0484fb;
  }
`]),it=(0,Ot.Z)([`
  border: 1px solid #d9d9d9;
  border-radius: 4px;
  height: 30px;
  background-color: #fff;
  position: relative;
  &.ruleIcon {
    width: 30px;
    margin-left: 5px;
    justify-content: center;
    &:hover {
      background-color: #f5f5f5;
    }
    .icon-closeelement-bg-circle:hover {
      color: #2196f3 !important;
    }
  }
  &:hover {
    .close {
      display: block;
    }
  }
  .close {
    position: absolute;
    right: -6px;
    top: -6px;
    display: none;
  }
`],[`
  border: 1px solid #d9d9d9;
  border-radius: 4px;
  height: 30px;
  background-color: #fff;
  position: relative;
  &.ruleIcon {
    width: 30px;
    margin-left: 5px;
    justify-content: center;
    &:hover {
      background-color: #f5f5f5;
    }
    .icon-closeelement-bg-circle:hover {
      color: #2196f3 !important;
    }
  }
  &:hover {
    .close {
      display: block;
    }
  }
  .close {
    position: absolute;
    right: -6px;
    top: -6px;
    display: none;
  }
`]),ot=(0,Ot.Z)([`
  position: relative;
  &:hover .deleteColorRule {
    display: block;
  }
  .deleteColorRule {
    position: absolute;
    top: 0;
    left: -37px;
    padding: 7px;
    display: none;
    &:hover {
      color: #2196f3 !important;
      display: block;
    }
  }
`],[`
  position: relative;
  &:hover .deleteColorRule {
    display: block;
  }
  .deleteColorRule {
    position: absolute;
    top: 0;
    left: -37px;
    padding: 7px;
    display: none;
    &:hover {
      color: #2196f3 !important;
      display: block;
    }
  }
`]),qe=dt.ZP.div(Oe),It=dt.ZP.div(it),ft=dt.ZP.div(ot),st=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.state={editControlId:null,applyType:null,dataBarColorModalVisible:!1,ruleColorModalVisible:!1},s}return(0,J.default)(O,[{key:"renderDataBarModal",value:function(){var s=this,c=this.state,g=c.dataBarColorModalVisible,x=c.editControlId,S=c.applyType,X=this.props,re=X.onChangeDisplayValue,ee=X.currentReport,ge=ee.yaxisList,Se=ee.displaySetup,Ze=Se.colorRules,Je=Ze===void 0?[]:Ze,At=_.find(Je,{controlId:x}),Jt=function(){s.setState({applyType:null,editControlId:null,dataBarColorModalVisible:!1})};return r.createElement(Ve,{visible:g,colorRule:_.get(At,S)||{},onSave:function(ln){var Gn=Je.map(function(yn){return yn.controlId===x&&(yn[S]=ln),yn});re("colorRules",Gn),Jt()},onCancel:Jt})}},{key:"renderRuleColorModal",value:function(){var s=this,c=this.state,g=c.ruleColorModalVisible,x=c.editControlId,S=c.applyType,X=this.props,re=X.onChangeDisplayValue,ee=X.currentReport,ge=ee.yaxisList,Se=ee.displaySetup,Ze=ee.reportType,Je=Se.colorRules,At=Je===void 0?[]:Je,Jt=_.find(At,{controlId:x}),Kt=function(){s.setState({applyType:null,editControlId:null,ruleColorModalVisible:!1})};return r.createElement(ho.Z,{visible:g,reportType:Ze,yaxisList:ge,colorRule:_.get(Jt,S)||{},onSave:function(Gn){var yn=At.map(function(na){return na.controlId===x&&(na[S]=Gn),na});re("colorRules",yn),Kt()},onCancel:Kt})}},{key:"renderAddDropdown",value:function(){var s=this.props,c=s.onChangeDisplayValue,g=s.currentReport,x=g.yaxisList,S=g.displaySetup,X=S.colorRules,re=X===void 0?[]:X,ee=re.map(function(Se){return Se.controlId}),ge=x.filter(function(Se){return!ee.includes(Se.controlId)}).filter(function(Se){return Se.normType!==7});return ge.length?r.createElement(U.default,{placement:"topLeft",trigger:["click"],overlay:r.createElement(Y.default,null,ge.map(function(Se){return r.createElement(Y.default.Item,{key:Se.controlId,className:"pTop7 pBottom7 pLeft20",onClick:function(){var Je=re.concat({controlId:Se.controlId});c("colorRules",Je)}},Se.controlName)}))},r.createElement(qe,{className:"Font13 valignWrapper pointer",onClick:function(Ze){return Ze.preventDefault()}},r.createElement(L.Z,{icon:"add"}),_l("\u6DFB\u52A0\u5B57\u6BB5"))):null}},{key:"render",value:function(){var s=this,c=this.props,g=c.onChangeDisplayValue,x=c.currentReport,S=x.yaxisList,X=x.displaySetup,re=X.colorRules,ee=re===void 0?[]:re,ge=ee.map(function(Ze){return Ze.controlId}),Se=S.filter(function(Ze){return Ze.normType!==7});return r.createElement("div",{className:"mBottom16"},ee.map(function(Ze){return r.createElement(ft,{key:Ze.controlId,className:"flexRow valignWrapper mBottom10"},r.createElement(L.Z,{icon:"delete2",className:"Gray_9e Font18 pointer mLeft5 deleteColorRule",onClick:function(){var At=ee.filter(function(Jt){return Jt.controlId!==Ze.controlId});g("colorRules",At)}}),r.createElement(ce.default,{className:N()("chartSelect flex mRight5",{Red:Ze.controlId&&!_.find(Se,{controlId:Ze.controlId})}),style:{minWidth:0},value:Ze.controlId?_.find(Se,{controlId:Ze.controlId})?Ze.controlId:_l("\u5DF2\u5220\u9664"):void 0,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(At){var Jt=ee.map(function(Kt){return Kt.controlId===Ze.controlId&&(Kt.controlId=At),Kt});g("colorRules",Jt)}},Se.map(function(Je){return r.createElement(ce.default.Option,{key:Je.controlId,className:"selectOptionWrapper",value:Je.controlId,disabled:Je.controlId!==Ze.controlId&&ge.includes(Je.controlId)},Je.controlName)})),r.createElement(Wn.Z,{text:r.createElement("span",null,_l("\u5B57\u4F53\u8272"))},r.createElement(It,{className:"ruleIcon flexRow valignWrapper pointer",onClick:function(){s.setState({ruleColorModalVisible:!0,editControlId:Ze.controlId,applyType:"textColorRule"})}},r.createElement(L.Z,{className:N()("Font16",Ze.textColorRule?"ThemeColor":"Gray_9e"),icon:"letter_a"}),Ze.textColorRule&&r.createElement(L.Z,{icon:"closeelement-bg-circle",className:"Gray_9e Font15 pointer close",onClick:function(At){At.stopPropagation();var Jt=ee.map(function(Kt){return Kt.controlId===Ze.controlId&&(Kt.textColorRule=void 0),Kt});g("colorRules",Jt)}}))),r.createElement(Wn.Z,{text:r.createElement("span",null,_l("\u80CC\u666F\u8272"))},r.createElement(It,{className:"ruleIcon flexRow valignWrapper pointer",onClick:function(){s.setState({ruleColorModalVisible:!0,editControlId:Ze.controlId,applyType:"bgColorRule"})}},r.createElement(L.Z,{className:N()("Font18",Ze.bgColorRule?"ThemeColor":"Gray_9e"),icon:"background_color"}),Ze.bgColorRule&&r.createElement(L.Z,{icon:"closeelement-bg-circle",className:"Gray_9e Font15 pointer close",onClick:function(At){At.stopPropagation();var Jt=ee.map(function(Kt){return Kt.controlId===Ze.controlId&&(Kt.bgColorRule=void 0),Kt});g("colorRules",Jt)}}))),r.createElement(Wn.Z,{text:r.createElement("span",null,_l("\u6570\u636E\u6761"))},r.createElement(It,{className:"ruleIcon flexRow valignWrapper pointer",onClick:function(){s.setState({dataBarColorModalVisible:!0,editControlId:Ze.controlId,applyType:"dataBarRule"})}},r.createElement(L.Z,{className:N()("Font16",Ze.dataBarRule?"ThemeColor":"Gray_9e"),icon:"data_bar"}),Ze.dataBarRule&&r.createElement(L.Z,{icon:"closeelement-bg-circle",className:"Gray_9e Font15 pointer close",onClick:function(At){At.stopPropagation();var Jt=ee.map(function(Kt){return Kt.controlId===Ze.controlId&&(Kt.dataBarRule=void 0),Kt});g("colorRules",Jt)}}))))}),this.renderAddDropdown(),this.renderRuleColorModal(),this.renderDataBarModal())}}]),O}(r.Component),Zt=t(55720),On=t.n(Zt),Fn=t(49510),Ca=t.n(Fn),Jn=t(33495),aa=t.n(Jn),xa=[{value:"crown",name:_l("\u7687\u51A0"),icon:On()},{value:"medal",name:_l("\u5956\u724C"),icon:Ca()},{value:"number",name:_l("\u6570\u5B57"),icon:aa()}],va=function(O){var V=O.style,s=O.onChangeStyle,c=V||{},g=c.topStyle;return r.createElement("div",{className:"chartTypeImageSelect flexRow valignWrapper mBottom16"},xa.map(function(x){return r.createElement("div",{key:x.value,className:N()("flex styleItem centerAlign pointer Gray_75",{active:x.value===g}),onClick:function(){s({topStyle:x.value})}},r.createElement("div",{className:"iconWrap"},r.createElement("img",{src:x.icon})),x.name)}))},Pa=function(O){var V=O.style,s=O.onChangeStyle,c=V||{},g=c.valueProgressVisible;return r.createElement("div",{className:"flexRow valignWrapper"},r.createElement(Q.default,{className:"mLeft0 mBottom16",checked:g,onChange:function(){s({valueProgressVisible:!g})}},_l("\u663E\u793A\u56FE\u5F62")))};function ta(Ye){var O=Ye.currentReport,V=Ye.onChangeStyle,s=O.style||{},c=s.topStyle,g=c===void 0?"crown":c,x=s.valueProgressVisible,S=x===void 0?!0:x;return r.createElement(r.Fragment,null,r.createElement(se.Z.Panel,{key:"valueProgress",header:_l("\u6570\u636E\u6761"),className:N()({collapsible:!S}),extra:r.createElement(fr.Z,{size:"small",checked:S,onClick:function(re,ee){ee.stopPropagation()},onChange:function(re){V({valueProgressVisible:re})}})},r.createElement(Pa,{style:O.style,onChangeStyle:V})),r.createElement(se.Z.Panel,{key:"topStyle",header:_l("TOP\u6837\u5F0F"),className:N()({collapsible:!g}),extra:r.createElement(fr.Z,{size:"small",checked:g,onClick:function(re,ee){ee.stopPropagation()},onChange:function(re){V({topStyle:re?"crown":!1})}})},r.createElement(va,{style:O.style,onChangeStyle:V})))}var Ia,Aa,Wa=(Ia=(0,Yt.$j)(function(Ye){return(0,E.default)({},Fe().pick(Ye.statistics,["currentReport","reportData","worksheetInfo"]))},function(Ye){return(0,qt.DE)(ht,Ye)}),Ia(Aa=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.handleChangeDisplaySetup=function(c){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;s.props.changeCurrentReport({displaySetup:c},g)},s.handleChangeDisplayValue=function(c,g,x){var S=s.props.currentReport.displaySetup;s.handleChangeDisplaySetup((0,E.default)({},S,(0,Dr.default)({},c,g)),x)},s.handleChangeStyle=function(c){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=s.props.currentReport.style;s.props.changeCurrentReport({style:(0,E.default)({},x,c)},g)},s}return(0,J.default)(O,[{key:"renderCount",value:function(){var s=this,c=this.props.currentReport,g=c.reportType,x=c.displaySetup,S=c.summary,X=c.yaxisList,re=c.rightY,ee=c.pivotTable,ge=ee===void 0?{}:ee,Se=g===fe.f0.DualAxes,Ze=[fe.f0.DualAxes,fe.f0.BidirectionalBarChart].includes(g),Je=S.showTotal||(re?re.summary.showTotal:null),At=Ze?Je:x.showTotal;return r.createElement(se.Z.Panel,{key:"count",header:_l("\u603B\u8BA1"),className:N()({collapsible:!At}),extra:r.createElement(fr.Z,{size:"small",checked:At,onClick:function(Kt,ln){ln.stopPropagation()},onChange:function(Kt){Ze?s.props.changeCurrentReport({displaySetup:(0,E.default)({},x,{showTotal:!1}),summary:(0,E.default)({},S,{showTotal:Kt}),rightY:(0,E.default)({},re,{summary:(0,E.default)({},re.summary,{showTotal:Kt})})},!0):s.handleChangeDisplayValue("showTotal",Kt,!0)}})},r.createElement(r.Fragment,null,r.createElement(Yr.X,{smallTitle:Ze?r.createElement(Q.default,{className:"mLeft0 mBottom15",checked:S.showTotal,onChange:function(){s.props.changeCurrentReport({displaySetup:(0,E.default)({},x,{showTotal:!1}),summary:(0,E.default)({},S,{showTotal:!S.showTotal})},!0)}},Se?_l("Y\u8F74"):_l("\u6570\u503C(1)")):null,summary:S||{},yaxisList:X,onChangeSummary:function(Kt){var ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;s.props.changeCurrentReport({summary:(0,E.default)({},S,Kt)},ln)}}),Ze&&r.createElement(Yr.X,{smallTitle:Ze?r.createElement(Q.default,{className:"mLeft0 mBottom15",checked:re.summary.showTotal,onChange:function(){s.props.changeCurrentReport({displaySetup:(0,E.default)({},x,{showTotal:!1}),rightY:(0,E.default)({},re,{summary:(0,E.default)({},re.summary,{showTotal:!re.summary.showTotal})})},!0)}},Se?_l("\u8F85\u52A9Y\u8F74"):_l("\u6570\u503C(2)")):null,summary:re.summary||{},yaxisList:re.yaxisList,onChangeSummary:function(Kt){var ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;s.props.changeCurrentReport({rightY:(0,E.default)({},re,{summary:(0,E.default)({},re.summary,Kt)})},ln)}})))}},{key:"renderNumberCount",value:function(){return(0,Qr.yb)((0,E.default)({},this.props,{onChangeDisplayValue:this.handleChangeDisplayValue}))}},{key:"renderNumberStyle",value:function(){return(0,Qr.ZP)((0,E.default)({},this.props,{onChangeStyle:this.handleChangeStyle,onChangeDisplayValue:this.handleChangeDisplayValue}))}},{key:"renderLegend",value:function(){var s=this,c=this.props.currentReport,g=c.displaySetup,x=c.yaxisList,S=c.split,X=c.reportType;return[fe.f0.LineChart,fe.f0.BarChart,fe.f0.RadarChart].includes(X)&&!(x.length>1||S.controlId||g.contrastType)?null:r.createElement(se.Z.Panel,{key:"legend",header:_l("\u56FE\u4F8B"),className:N()({collapsible:!g.showLegend}),extra:r.createElement(fr.Z,{size:"small",checked:g.showLegend,onClick:function(ee,ge){ge.stopPropagation()},onChange:function(ee){s.handleChangeDisplayValue("showLegend",ee,!0)}})},r.createElement("div",{className:"mBottom8"},_l("\u4F4D\u7F6E")),r.createElement("div",{className:"chartTypeSelect flexRow valignWrapper mBottom16"},fe.Hk.map(function(re){return r.createElement("div",{key:re.value,className:N()("flex centerAlign pointer Gray_75",{active:g.legendType==re.value}),onClick:function(){s.handleChangeDisplayValue("legendType",re.value)}},re.text)})))}},{key:"renderLabel",value:function(){var s=this,c=this.props.currentReport,g=c.displaySetup,x=g.showNumber,S=g.showPileTotal,X=g.hideOverlapText,re=x||S||X;return r.createElement(se.Z.Panel,{key:"label",header:_l("\u6570\u636E\u6807\u7B7E"),className:N()({collapsible:!re}),extra:r.createElement(fr.Z,{size:"small",checked:re,onClick:function(ge,Se){Se.stopPropagation()},onChange:function(ge){s.handleChangeDisplaySetup((0,E.default)({},c.displaySetup,{showNumber:ge,showDimension:ge,showPercent:ge,showPileTotal:ge,hideOverlapText:ge})),s.handleChangeStyle({showLabelPercent:ge})}})},r.createElement(bo,{currentReport:c,onChangeDisplayValue:this.handleChangeDisplayValue,onUpdateDisplaySetup:this.handleChangeDisplaySetup,onChangeStyle:this.handleChangeStyle}))}},{key:"renderGaugeColor",value:function(){return Ao((0,E.default)({},this.props,{onChangeStyle:this.handleChangeStyle,onChangeDisplayValue:this.handleChangeDisplayValue}))}},{key:"renderScale",value:function(){return Po((0,E.default)({},this.props,{onChangeStyle:this.handleChangeStyle}))}},{key:"renderIndicator",value:function(){return Uo((0,E.default)({},this.props,{onChangeStyle:this.handleChangeStyle}))}},{key:"renderLayout",value:function(){var s=this,c=this.props.currentReport,g=c.style,x=g.columnCount||1,S=Fe().debounce(function(X){X?(X=parseInt(X),X=isNaN(X)?0:X,X=X>4?4:X):X=1,s.handleChangeStyle({columnCount:X})},100);return r.createElement(se.Z.Panel,{key:"layout",header:_l("\u5E03\u5C40")},r.createElement("div",null,r.createElement("div",{className:"flexRow valignWrapper mBottom12"},r.createElement("div",{style:{width:90}},_l("\u6BCF\u884C\u663E\u793A\u4E2A\u6570")),r.createElement(ve.default,{className:"chartInput columnCountInput",style:{width:78},value:x,onChange:function(re){S(re.target.value)},suffix:r.createElement("div",{className:"flexColumn"},r.createElement(L.Z,{icon:"expand_less",className:N()("Font20 pointer mBottom2",x===4?"disabled":"Gray_9e"),onClick:function(){var re=Number(x);S(re+1)}}),r.createElement(L.Z,{icon:"expand_more",className:N()("Font20 pointer mBottom2",x===1?"disabled":"Gray_9e"),onClick:function(){var re=Number(x);S(re-1)}}))})),r.createElement("div",{className:"flexRow valignWrapper mTop16 mBottom16"},r.createElement(Q.default,{checked:g.allowScroll,onChange:function(re){s.handleChangeStyle({allowScroll:re.target.checked})}},_l("\u5141\u8BB8\u5BB9\u5668\u5185\u6EDA\u52A8")),r.createElement(j.default,{title:_l("\u5F53\u7EDF\u8BA1\u9879\u8F83\u591A\u65F6\uFF0C\u52FE\u9009\u6B64\u914D\u7F6E\u53EF\u4EE5\u5728\u5BB9\u5668\u5185\u6EDA\u52A8\u67E5\u770B"),placement:"bottom",arrowPointAtCenter:!0},r.createElement(L.Z,{className:"Gray_9e Font18 pointer",icon:"knowledge-message"})))))}},{key:"renderXAxis",value:function(){var s=this,c=this.props.currentReport,g=c.displaySetup,x=g.xdisplay,S=g.fontStyle,X=g.showChartType,re=!!S||x.showDial||x.showTitle,ee=c.reportType===fe.f0.BarChart,ge=c.reportType===fe.f0.BidirectionalBarChart,Se=ee&&X===2;return r.createElement(se.Z.Panel,{key:"xAxis",header:Se?_l("Y\u8F74"):ge?_l("\u7EF4\u5EA6\u8F74"):_l("X\u8F74"),className:N()({collapsible:!re}),extra:r.createElement(fr.Z,{size:"small",checked:re,onClick:function(Je,At){At.stopPropagation()},onChange:function(Je){s.handleChangeDisplaySetup((0,E.default)({},c.displaySetup,{fontStyle:Je?1:0,xdisplay:(0,E.default)({},x,{showDial:Je,showTitle:Je})})),s.handleChangeStyle({showXAxisSlider:Je})}})},r.createElement(vo,{currentReport:c,onChangeDisplayValue:this.handleChangeDisplayValue,onChangeStyle:this.handleChangeStyle}))}},{key:"renderYAxis",value:function(){var s=this.props.currentReport,c=s.reportType===fe.f0.BidirectionalBarChart;return c?cl(this.props):ko(this.props)}},{key:"renderQuadrant",value:function(){var s=this,c=this.props.currentReport.style,g=c.quadrant,x=g===void 0?{}:g;return r.createElement(se.Z.Panel,{key:"quadrant",header:_l("\u56DB\u8C61\u9650"),className:N()({collapsible:!x.visible}),extra:r.createElement(fr.Z,{size:"small",checked:x.visible,onClick:function(X,re){re.stopPropagation()},onChange:function(X){var re={axisColor:"#9e9e9e",topRightBgColor:"#F44336",topRightText:_l("\u53F3\u4E0A\u8C61\u9650"),topLeftBgColor:"#FFA340",topLeftText:_l("\u5DE6\u4E0A\u8C61\u9650"),bottomLeftBgColor:"#4CAF50",bottomLeftText:_l("\u5DE6\u4E0B\u8C61\u9650"),bottomRightBgColor:"#2196F3",bottomRightText:_l("\u53F3\u4E0B\u8C61\u9650"),textColor:"#9e9e9e"};s.handleChangeStyle({quadrant:(0,E.default)({},Fe().isEmpty(x)?re:x,{visible:X})})}})},r.createElement(qo,{quadrant:x,onChangeQuadrant:function(X){s.handleChangeStyle({quadrant:(0,E.default)({},x,X)})}}))}},{key:"renderMeasureAxis",value:function(){var s=this.props.currentReport;return r.createElement(se.Z.Panel,{key:"measureAxis",header:_l("\u6D4B\u91CF\u8F74")},r.createElement(Wo,{currentReport:s,onChangeDisplayValue:this.handleChangeDisplayValue}))}},{key:"renderTopChart",value:function(){return ta((0,E.default)({},this.props,{onChangeStyle:this.handleChangeStyle}))}},{key:"renderWordCloudFontSize",value:function(){var s=this.props.currentReport;return r.createElement(se.Z.Panel,{key:"wordCloudFontSize",header:_l("\u8BCD\u5927\u5C0F\u8303\u56F4")},r.createElement(Wo,{currentReport:s,onChangeDisplayValue:this.handleChangeDisplayValue}))}},{key:"renderDataFilter",value:function(){var s=this,c=this.props.currentReport,g=c.displaySetup,x=c.reportType,S=c.pivotTable;return r.createElement(se.Z.Panel,{header:_l("\u6570\u636E\u8FC7\u6EE4"),key:"dataFilter"},x===fe.f0.PivotTable?r.createElement(r.Fragment,null,r.createElement(To,{className:"mBottom10",name:_l("\u884C\u6570\u636E"),showXAxisCount:S.showLineCount,reportType:x,onChange:function(re){s.props.changeCurrentReport({pivotTable:(0,E.default)({},S,{showLineCount:re})},!0)}}),r.createElement(To,{name:_l("\u5217\u6570\u636E"),showXAxisCount:S.showColumnCount,reportType:x,onChange:function(re){s.props.changeCurrentReport({pivotTable:(0,E.default)({},S,{showColumnCount:re})},!0)}})):r.createElement(To,{showXAxisCount:g.showXAxisCount,reportType:x,onChange:function(re){s.handleChangeDisplayValue("showXAxisCount",re,!0)}}))}},{key:"renderUnit",value:function(){return _o((0,E.default)({},this.props,{onChangeStyle:this.handleChangeStyle}))}},{key:"renderTitle",value:function(){var s=this,c=this.props,g=c.currentReport,x=c.changeCurrentReport,S=g.name,X=g.desc,re=g.displaySetup,ee=re.showTitle,ge=ee===void 0?!0:ee;return r.createElement(se.Z.Panel,{key:"title",header:_l("\u6807\u9898"),className:N()({collapsible:!ge}),extra:r.createElement(fr.Z,{size:"small",checked:ge,onClick:function(Ze,Je){Je.stopPropagation()},onChange:function(Ze){s.handleChangeDisplayValue("showTitle",Ze)}})},r.createElement("div",{className:"mBottom12"},r.createElement("div",{className:"mBottom8"},_l("\u663E\u793A\u6807\u9898")),r.createElement(ve.default,{value:S,className:"chartInput w100 mBottom12",placeholder:_l("\u6DFB\u52A0\u56FE\u8868\u6807\u9898"),onChange:function(Ze){x({name:Ze.target.value},!1)}}),r.createElement("div",{className:"mBottom8"},_l("\u663E\u793A\u8BF4\u660E")),r.createElement(ve.default.TextArea,{rows:4,className:"chartInput w100",autoSize:{minRows:4,maxRows:6},placeholder:_l("\u6DFB\u52A0\u56FE\u8868\u63CF\u8FF0"),value:X,onChange:function(Ze){x({desc:Ze.target.value},!1)}})))}},{key:"renderColor",value:function(){var s=this.props,c=s.currentReport,g=s.changeCurrentReport,x=s.worksheetInfo;return r.createElement(se.Z.Panel,{header:_l("\u56FE\u5F62\u989C\u8272"),key:"color"},r.createElement(M,(0,E.default)({},this.props,{onChangeCurrentReport:g,onChangeDisplayValue:this.handleChangeDisplayValue})))}},{key:"renderPivotTableFieldColor",value:function(){var s=this.props,c=s.currentReport,g=s.changeCurrentReport;return r.createElement(se.Z.Panel,{header:_l("\u989C\u8272"),key:"pivotTableFieldColor",className:"pivotTableFieldColorPanel"},r.createElement(st,{currentReport:c,onChangeCurrentReport:g,onChangeDisplayValue:this.handleChangeDisplayValue}))}},{key:"renderCountConfig",value:function(){var s=this.props,c=s.currentReport,g=s.changeCurrentReport,x=c.reportType;if([fe.f0.GaugeChart,fe.f0.ProgressChart].includes(x))return null;if(fe.f0.PivotTable===x)return rl((0,E.default)({},this.props,{onChangeStyle:this.handleChangeStyle}));if(fe.f0.NumberChart===x)return this.renderNumberCount();if([fe.f0.BarChart,fe.f0.LineChart].includes(x)){var S=c.summary,X=c.yaxisList;return Fo((0,E.default)({},this.props,{key:"allCount",title:_l("\u603B\u8BA1"),summary:S,yaxisList:X}))}if(fe.f0.DualAxes===x){var re=c.summary,ee=c.yaxisList,ge=c.rightY;return r.createElement(r.Fragment,null,Fo((0,E.default)({},this.props,{key:"allCount",title:_l("\u603B\u8BA1"),summary:re,yaxisList:ee,changeCurrentReport:function(Ze,Je){var At=Ze.displaySetup,Jt=Ze.summary,Kt={summary:Jt};At&&(Kt.displaySetup=At),g(Kt,Je)}})),Fo((0,E.default)({},this.props,{key:"rightAllCount",title:_l("\u8F85\u52A9Y\u8F74\u603B\u8BA1"),summary:ge.summary,yaxisList:ge.yaxisList,changeCurrentReport:function(Ze,Je){var At=Ze.displaySetup,Jt=At===void 0?{}:At,Kt=Ze.summary,ln=Jt.showTotal;g({rightY:(0,E.default)({},ge,{summary:(0,E.default)({},Kt,{showTotal:ln})})},Je)}})))}return this.renderCount()}},{key:"renderExpandIcon",value:function(s){return r.createElement(L.Z,{className:N()("Font18 mRight5 Gray_9e",{"icon-arrow-active":s.isActive}),icon:"arrow-down-border"})}},{key:"render",value:function(){var s=this.props,c=s.currentReport,g=s.sourceType,x=c.reportType,S=c.xaxes,X=(0,xe.$$)(S.controlType);return r.createElement("div",{className:"chartStyle"},r.createElement(se.Z,{className:"chartCollapse",expandIcon:this.renderExpandIcon,ghost:!0},this.renderCountConfig(),fe.f0.NumberChart===x&&this.renderNumberStyle(),g&&this.renderTitle(),[fe.f0.WordCloudChart].includes(x)&&this.renderWordCloudFontSize(),![fe.f0.NumberChart,fe.f0.CountryLayer,fe.f0.PivotTable,fe.f0.WordCloudChart,fe.f0.TopChart,fe.f0.GaugeChart,fe.f0.ProgressChart].includes(x)&&this.renderLegend(),[fe.f0.LineChart,fe.f0.BarChart,fe.f0.DualAxes,fe.f0.BidirectionalBarChart,fe.f0.ScatterChart].includes(x)&&this.renderXAxis(),[fe.f0.LineChart,fe.f0.BarChart,fe.f0.DualAxes,fe.f0.BidirectionalBarChart,fe.f0.ScatterChart].includes(x)&&this.renderYAxis(),fe.f0.ScatterChart===x&&this.renderQuadrant(),[fe.f0.RadarChart].includes(x)&&this.renderMeasureAxis(),![fe.f0.NumberChart,fe.f0.CountryLayer,fe.f0.PivotTable,fe.f0.WordCloudChart,fe.f0.TopChart].includes(x)&&this.renderLabel(),fe.f0.GaugeChart===x&&r.createElement(r.Fragment,{key:"gaugeChart"},this.renderGaugeColor(),this.renderScale(),this.renderIndicator()),[fe.f0.ProgressChart].includes(x)&&this.renderLayout(),[fe.f0.TopChart].includes(x)&&this.renderTopChart(),![fe.f0.NumberChart,fe.f0.CountryLayer,fe.f0.DualAxes,fe.f0.BidirectionalBarChart,fe.f0.WordCloudChart,fe.f0.GaugeChart,fe.f0.ProgressChart,fe.f0.ScatterChart].includes(x)&&this.renderDataFilter(),![fe.f0.WordCloudChart].includes(x)&&this.renderUnit(),![fe.f0.NumberChart,fe.f0.PivotTable,fe.f0.GaugeChart].includes(x)&&this.renderColor(),fe.f0.PivotTable===x&&this.renderPivotTableFieldColor()))}}]),O}(r.Component))||Aa),Xa=(0,Ot.Z)([`
  border-radius: 4px;
  padding: 5px 9px;
  border: 1px solid #DEDEDE;
  background-color: #EFEFEF;
`],[`
  border-radius: 4px;
  padding: 5px 9px;
  border: 1px solid #DEDEDE;
  background-color: #EFEFEF;
`]),Ha=dt.ZP.div(Xa),Er=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));s.handleChangeViewDataType=function(g){var x=g.target.value;s.props.onChangeStyle({viewDataType:x})},s.handleChange=function(g){var x=g.target.value;x===1?s.props.onChangeDisplaySetup({showControlIds:[]},!0):s.setState({showControlVisible:!0})},s.handleSaveShowControlIds=function(){s.props.onChangeDisplaySetup({showControlIds:s.state.showControlIds},!0),s.setState({showControlVisible:!1})},s.handleChangeColumn=function(g){var x=g.newShowControls,S=g.newControlSorts;s.setState({showControlIds:x})};var c=V.displaySetup;return s.state={showControlVisible:!1,showControlIds:c.showControlIds},s}return(0,J.default)(O,[{key:"renderFooter",value:function(){var s=this;return r.createElement("div",{className:"mTop20 mBottom10 pRight8"},r.createElement(k.default,{autoInsertSpaceInButton:!1},r.createElement(oe.default,{type:"link",onClick:function(){s.setState({showControlVisible:!1})}},_l("\u53D6\u6D88")),r.createElement(oe.default,{type:"primary",onClick:this.handleSaveShowControlIds},_l("\u786E\u8BA4"))))}},{key:"renderShowControls",value:function(){var s=this,c=this.state,g=c.showControlVisible,x=c.showControlIds,S=this.props.displaySetup,X=this.columnsSorts;return r.createElement(r.Fragment,null,r.createElement("div",{className:"mBottom10 Font13"},_l("\u663E\u793A\u6570\u636E")),r.createElement("div",{className:"mBottom16"},r.createElement(mr.default.Group,{onChange:this.handleChange,value:S.showControlIds.length?2:1},r.createElement(to.default,{direction:"vertical"},r.createElement(mr.default,{value:1,className:"Font13"},_l("\u6309\u7167\u6743\u9650\u67E5\u770B")),r.createElement(mr.default,{value:2,className:"Font13"},_l("\u6240\u6709\u6570\u636E")))),!Fe().isEmpty(S.showControlIds)&&r.createElement(Ha,{className:"flexRow valignWrapper mTop10"},r.createElement("div",{className:"flex"},_l("\u663E\u793A%0\u4E2A\u5B57\u6BB5",S.showControlIds.length)),r.createElement(L.Z,{className:"Gray_9e pointer",icon:"edit",onClick:function(){s.setState({showControlVisible:!0})}}))),r.createElement(le.Z,{title:_l("\u81EA\u5B9A\u4E49\u663E\u793A\u5B57\u6BB5"),width:580,className:"chartModal",visible:g,centered:!0,destroyOnClose:!0,closeIcon:r.createElement(L.Z,{icon:"close",className:"Font20 pointer Gray_9e"}),footer:this.renderFooter(),onCancel:function(){s.setState({showControlVisible:!1})}},r.createElement(Mo.Z,{layout:2,noShowCount:!0,noempty:!1,dragable:!1,showControls:x,columns:X,onChange:this.handleChangeColumn})))}},{key:"render",value:function(){var s=this.props,c=s.style,g=s.viewId,x=s.worksheetInfo,S=x.views,X=Fe().find(S,{viewId:g}),re=X?![lr.B.sheet].includes(X.viewType.toString()):!0,ee=c.viewDataType||1;return r.createElement(r.Fragment,null,r.createElement("div",{className:"flexColumn mBottom16"},r.createElement(mr.default.Group,{onChange:this.handleChangeViewDataType,value:ee},r.createElement(to.default,{direction:"vertical"},r.createElement(mr.default,{value:1,className:"Font13"},_l("\u5728\u56FE\u8868\u4E2D\u5206\u680F\u67E5\u770B")),r.createElement(mr.default,{value:2,className:"Font13",disabled:re},r.createElement("span",{className:"Gray"},_l("\u524D\u5F80\u89C6\u56FE\u4E2D\u67E5\u770B"))))),r.createElement("div",{className:"Font12 mLeft25 mTop5 Gray_9e"},_l("\u9700\u8981\u5728\u7EDF\u8BA1\u6570\u636E\u6E90\u4E2D\u6307\u5B9A\u7EDF\u8BA1\u7684\u89C6\u56FE\uFF08\u5F53\u524D\u53EA\u652F\u6301\u8868\u89C6\u56FE\uFF09"))),ee===1&&this.renderShowControls())}},{key:"columnsSorts",get:function(){var s=this.props,c=s.displaySetup,g=s.viewId,x=s.worksheetInfo,S=x.views,X=x.columns,re=Fe().find(S,{viewId:g})||{},ee=re.showControls,ge=ee===void 0?[]:ee;return ge.length?ge.map(function(Se){return Fe().find(X,{controlId:Se})}).filter(function(Se){return Se}):X.filter(function(Se){return![10010,22,45,47,51,52].includes(Se.type)}).sort(function(Se,Ze){return Se.row===Ze.row?Se.col-Ze.col:Se.row-Ze.row})}}]),O}(r.Component),ir,Ir,za,Ja=P.default.RangePicker,or=(Ir=ir=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));za.call(s);var c=s.props.currentReport,g=c.displaySetup,x=c.filter;return s.state={customRangeVisible:g.contrastType===5&&x.customRangeValue},s}return(0,J.default)(O,[{key:"renderNumberChartContrast",value:function(){var s=this,c=this.state.customRangeVisible,g=this.props.currentReport,x=g.displaySetup,S=g.filter,X=(0,xe.oB)(S),re=S.customRangeValue;return r.createElement("div",{className:"mBottom16"},r.createElement("div",{className:"flexRow mBottom8"},r.createElement(Q.default,{checked:x.contrast,onChange:function(ge){var Se=ge.target.checked;s.props.onUpdateDisplaySetup((0,E.default)({},x,{contrast:Se}),!0)}},_l("\u73AF\u6BD4"))),!!X.length&&r.createElement("div",{className:"flexRow mBottom8"},r.createElement(Q.default,{checked:x.contrastType,onChange:function(ge){var Se=ge.target.checked;s.props.onUpdateDisplaySetup((0,E.default)({},x,{contrastType:Se?2:0}),!0)}},_l("\u540C\u6BD4"))),!!x.contrastType&&!!X.length&&r.createElement(ce.default,{className:"chartSelect w100",value:c?5:x.contrastType,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(ge){if(ge===5){s.setState({customRangeVisible:!0});var Se=kt()().add(-7,"days").format("YYYY/MM/DD")+"-"+kt()().format("YYYY/MM/DD");s.props.onChangeCurrentReport({displaySetup:(0,E.default)({},x,{contrastType:5}),filter:(0,E.default)({},S,{customRangeValue:Se})},!0)}else s.setState({customRangeVisible:!1}),s.handleChangeDropdown(ge)}},X.map(function(ee){return r.createElement(ce.default.Option,{className:"selectOptionWrapper",key:ee.value,value:ee.value},ee.text)})),c&&r.createElement(Ja,{className:"chartInput w100 mTop10",allowClear:!1,suffixIcon:null,locale:tt.Z,format:"YYYY/MM/DD",value:re?re.split("-").map(function(ee){return kt()(ee)}):[kt()().add(-7,"days"),kt()()],onChange:function(ge){var Se=(0,Le.Z)(ge,2),Ze=Se[0],Je=Se[1],At=Ze.format("YYYY/MM/DD")+"-"+Je.format("YYYY/MM/DD");s.props.onChangeCurrentReport({displaySetup:(0,E.default)({},x,{contrastType:5}),filter:(0,E.default)({},S,{customRangeValue:At})},!0)}}))}},{key:"renderLineChartContrast",value:function(){var s=this.props.currentReport,c=s.displaySetup,g=s.filter,x=(0,xe.v$)(g);return r.createElement("div",{className:"mBottom16"},r.createElement(ce.default,{className:"chartSelect w100",value:c.contrastType||0,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:this.handleChangeDropdown},x.map(function(S){return r.createElement(ce.default.Option,{className:"selectOptionWrapper",disabled:S.disabled,key:S.value,value:S.value},S.text)})))}},{key:"render",value:function(){var s=this.props,c=s.contrastVisible,g=s.isNumberChart;return r.createElement(r.Fragment,null,c&&(g?this.renderNumberChartContrast():this.renderLineChartContrast()))}}]),O}(r.Component),za=function(){var O=this;this.handleChangeLifecycle=function(V){var s=O.props.currentReport.displaySetup;O.props.onUpdateDisplaySetup((0,E.default)({},s,{isLifecycle:V,lifecycleValue:0}))},this.handleChangeDropdown=function(V){var s=O.props.currentReport.displaySetup;O.props.onUpdateDisplaySetup((0,E.default)({},s,{contrastType:V}),!0)}},Ir),Ua=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.handleUpdateLifecycleValue=function(c){var g=s.props.currentReport.displaySetup;s.props.onUpdateDisplaySetup((0,E.default)({},g,{lifecycleValue:Number(c.replace(/[^\d.]/g,""))}))},s}return(0,J.default)(O,[{key:"render",value:function(){var s=this,c=this.props.currentReport,g=c.displaySetup;return r.createElement("div",{className:"mBottom16"},r.createElement("div",{className:"mBottom8 Gray_9e"},_l("\u8FD9\u4E00\u4E2A\u65E7\u7684\u529F\u80FD\uFF0C\u76EE\u524D\u5DF2\u7ECF\u88AB\u7684\u8F85\u52A9\u7EBF\u529F\u80FD\u6240\u4EE3\u66FF\u3002\u65B0\u521B\u5EFA\u7684\u56FE\u8868\u5DF2\u4E0D\u518D\u5305\u542B\u6B64\u914D\u7F6E\u3002")),r.createElement(ve.default,{className:"chartInput w100",value:g.lifecycleValue?g.lifecycleValue.toString():"",onChange:function(S){s.handleUpdateLifecycleValue(S.target.value)}}))}}]),O}(r.Component),qa=t(69852),dr=t(97538),Nr=t(3872),Sr=(0,Ot.Z)([`
  color: #2196F3;
  &:hover {
    color: #0484fb;
  }
`],[`
  color: #2196F3;
  &:hover {
    color: #0484fb;
  }
`]),wr=(0,Ot.Z)([`
  &:hover {
    .ant-input {
      background-color: #F5F5F5 !important;
    }
    .icon-edit {
      display: block;
    }
  }
  input {
    padding: 7px 11px;
  }
  .icon-edit {
    display: none;
    position: absolute;
    right: 15px;
    top: 10px;
    color: #1890ff !important;
  }
`],[`
  &:hover {
    .ant-input {
      background-color: #F5F5F5 !important;
    }
    .icon-edit {
      display: block;
    }
  }
  input {
    padding: 7px 11px;
  }
  .icon-edit {
    display: none;
    position: absolute;
    right: 15px;
    top: 10px;
    color: #1890ff !important;
  }
`]),Ur=(0,Ot.Z)([`
  &:hover .icon {
    color: #1890ff !important;
  }
`],[`
  &:hover .icon {
    color: #1890ff !important;
  }
`]),Mr=(0,Ot.Z)([`
  .lineStyle {
    width: 250px;
  }
  .percentValue {
    width: 160px;
  }
  .ant-checkbox-input {
    position: absolute !important;
  }
  .requiredItem .ant-form-item-label {
    margin-left: -10px;
  }
  .percentInput.ant-input-affix-wrapper {
    .ant-input {
      height: 34px !important;
    }
    .ant-input-suffix {
      border-left: none !important;
    }
  }
  .footer {
    align-items: center;
    justify-content: flex-end;
  }
`],[`
  .lineStyle {
    width: 250px;
  }
  .percentValue {
    width: 160px;
  }
  .ant-checkbox-input {
    position: absolute !important;
  }
  .requiredItem .ant-form-item-label {
    margin-left: -10px;
  }
  .percentInput.ant-input-affix-wrapper {
    .ant-input {
      height: 34px !important;
    }
    .ant-input-suffix {
      border-left: none !important;
    }
  }
  .footer {
    align-items: center;
    justify-content: flex-end;
  }
`]),Hr=dt.ZP.div(Sr),po=dt.ZP.div(wr),ol=dt.ZP.span(Ur),ul=(0,dt.ZP)(dr.Z)(Mr),pl=[{name:_l("\u6052\u5B9A\u7EBF"),type:"constantLine"},{name:_l("\u6700\u5C0F\u503C\u7EBF"),type:"minLine"},{name:_l("\u6700\u5927\u503C\u7EBF"),type:"maxLine"},{name:_l("\u5E73\u5747\u7EBF"),type:"averageLine"},{name:_l("\u4E2D\u503C\u7EBF"),type:"medianLine"},{name:_l("\u767E\u5206\u4F4D\u6570\u7EBF"),type:"percentLine"},{name:_l("\u8D8B\u52BF\u7EBF"),type:"tendencyLine"}],dl=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.handleSave=function(){var c=s.state.lineConfig;s.props.onSave(c),s.props.onCancel()},s.handleChangeConfig=function(c){var g=s.state.lineConfig;s.setState({lineConfig:(0,E.default)({},g,c)})},s.state={lineConfig:{}},s}return(0,J.default)(O,[{key:"componentWillReceiveProps",value:function(s){s.visible&&!this.props.visible&&this.setState({lineConfig:s.lineConfig})}},{key:"renderFooter",value:function(){var s=this.props.onCancel;return r.createElement("div",{className:"mTop32 mBottom20 footer flexRow"},r.createElement(k.default,{autoInsertSpaceInButton:!1},r.createElement(oe.default,{type:"link",onClick:s},_l("\u53D6\u6D88")),r.createElement(oe.default,{type:"primary",htmlType:"submit"},_l("\u786E\u8BA4"))))}},{key:"render",value:function(){var s=this,c=this.state.lineConfig,g=this.props,x=g.visible,S=g.onCancel,X=g.yaxisList,re=g.rightYaxisList,ee=g.reportType,ge=c.type,Se=Fe().uniqBy(X.concat(re),"controlId");return r.createElement(le.Z,{title:ge&&Fe().find(pl,{type:ge}).name,width:580,className:"chartModal",visible:x,centered:!0,destroyOnClose:!0,closeIcon:r.createElement(L.Z,{icon:"close",className:"Font20 pointer Gray_9e"}),footer:null,onCancel:S},r.createElement(ul,{layout:"vertical",onFinish:this.handleSave},r.createElement(dr.Z.Item,{initialValue:c.name,label:_l("\u540D\u79F0"),className:"requiredItem",name:"name",rules:[{required:!0,message:_l("\u8BF7\u8F93\u5165\u540D\u79F0")},{max:12,message:_l("\u540D\u79F0\u5B57\u7B26\u6570\u91CF\u4E0D\u80FD\u8D85\u8FC7 12 \u4E2A")}]},r.createElement(ve.default,{className:"chartInput",onChange:function(Je){s.handleChangeConfig({name:Je.target.value})}})),ge==="constantLine"?r.createElement("div",{className:"valignWrapper"},r.createElement("div",{className:"flex"},r.createElement(dr.Z.Item,{initialValue:c.value,label:_l("\u56FA\u5B9A\u503C"),className:"requiredItem",name:"value",rules:[{required:!0,message:_l("\u8BF7\u8F93\u5165\u56FA\u5B9A\u503C")}]},r.createElement(ve.default,{className:"chartInput",placeholder:_l("\u8BF7\u8F93\u5165\u6570\u503C"),onChange:function(Je){var At=(0,Dt.pu)(Je.target.value);s.handleChangeConfig({value:Number(At)})}}))),fe.f0.DualAxes===ee&&r.createElement("div",{className:"flex mLeft10"},r.createElement(dr.Z.Item,{label:_l("\u4F4D\u7F6E")},r.createElement(ce.default,{className:"chartSelect w100",value:c.location,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(Je){s.handleChangeConfig({location:Je})}},r.createElement(ce.default.Option,{className:"selectOptionWrapper",value:"left"},_l("\u5DE6\u8F74")),r.createElement(ce.default.Option,{className:"selectOptionWrapper",value:"right"},_l("\u53F3\u8F74")))))):r.createElement("div",{className:"mBottom24 valignWrapper"},r.createElement("div",{className:"flex"},r.createElement("div",{className:"mBottom12"},_l("\u53C2\u8003\u5B57\u6BB5")),r.createElement(ce.default,{className:"chartSelect w100",value:Fe().find(Se,{controlId:c.controlId})?c.controlId:r.createElement("span",{className:"Red"},_l("\u5F53\u524D\u5B57\u6BB5\u5DF2\u5220\u9664")),suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(Je){s.handleChangeConfig({controlId:Je})}},Se.map(function(Ze){return r.createElement(ce.default.Option,{className:"selectOptionWrapper",value:Ze.controlId},Ze.controlName||r.createElement("span",{className:"Red"},_l("\u5F53\u524D\u5B57\u6BB5\u5DF2\u5220\u9664")))}))),ge==="percentLine"&&r.createElement("div",{className:"mLeft10 percentValue"},r.createElement("div",{className:"mBottom12"},_l("\u767E\u5206\u4F4D\u6570")),r.createElement(ve.default,{className:"chartInput percentInput",value:c.percent,suffix:"%",onChange:function(Je){var At=Je.target.value,Jt=parseInt(At);Jt=isNaN(Jt)?0:Jt,Jt=Jt>=100?100:Jt,s.handleChangeConfig({percent:Jt})}}))),r.createElement("div",{className:"mBottom24 valignWrapper"},r.createElement("div",{className:"lineStyle flex mRight10"},r.createElement("div",{className:"mBottom12"},_l("\u7EBF\u6761\u6837\u5F0F")),r.createElement(ce.default,{className:"chartSelect w100",value:c.style,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(Je){s.handleChangeConfig({style:Je})}},r.createElement(ce.default.Option,{className:"selectOptionWrapper",value:1},_l("\u5B9E\u7EBF")),r.createElement(ce.default.Option,{className:"selectOptionWrapper",value:2},_l("\u865A\u7EBF")),r.createElement(ce.default.Option,{className:"selectOptionWrapper",value:3},_l("\u70B9\u7EBF")))),ge!=="tendencyLine"&&r.createElement("div",{className:"flex"},r.createElement("div",{className:"mBottom12"},_l("\u989C\u8272")),r.createElement("div",{className:"valignWrapper"},r.createElement(Nr.default,{type:"normal",color:c.color,handleChange:function(Je){s.handleChangeConfig({color:Je})}})))),ge!=="tendencyLine"&&r.createElement("div",{className:"mBottom24"},r.createElement("div",{className:"mBottom12"},_l("\u663E\u793A\u5185\u5BB9")),r.createElement(Q.default,{className:"mRight10",checked:c.showName,onChange:function(Je){s.handleChangeConfig({showName:event.target.checked})}},_l("\u540D\u79F0")),r.createElement(Q.default,{checked:c.showValue,onChange:function(Je){s.handleChangeConfig({showValue:event.target.checked})}},_l("\u503C"))),this.renderFooter()))}}]),O}(r.Component),ml=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.handleAddLine=function(c){var g=s.props.currentReport.displaySetup,x=g.auxiliaryLines;if(c.id)s.props.onChangeDisplaySetup({auxiliaryLines:x.map(function(X){return X.id===c.id?c:X})});else{var S=(0,E.default)({},c,{id:(0,$t.Z)()});s.props.onChangeDisplaySetup({auxiliaryLines:x.concat(S)})}},s.handleRemoveLine=function(c){var g=s.props.currentReport.displaySetup,x=g.auxiliaryLines;s.props.onChangeDisplaySetup({auxiliaryLines:x.filter(function(S){return S.id!==c})})},s.renderMenu=function(){var c=s.props.currentReport,g=c.yaxisList,x=c.displaySetup,S=x.isPile,X=x.isPerPile,re=x.isAccumulate,ee={controlId:(g[0]||{}).controlId,color:"#2196F3",style:1,showName:!1,value:void 0};return r.createElement(Y.default,null,pl.filter(function(ge){return S||X||re?ge.type==="constantLine":!0}).map(function(ge){return r.createElement(Y.default.Item,{key:ge.type,className:"pTop7 pBottom7 pLeft20",onClick:function(){s.setState({editLineConfig:(0,E.default)({},ge,ee,{showValue:ge.type!=="tendencyLine",location:ge.type==="constantLine"?"left":null,percent:ge.type==="percentLine"?50:0})})}},ge.name)}))},s.state={editLineConfig:null},s}return(0,J.default)(O,[{key:"render",value:function(){var s=this,c=this.props.currentReport,g=c.displaySetup,x=c.yaxisList,S=c.rightY,X=c.reportType,re=Fe().get(S,["yaxisList"]),ee=g.auxiliaryLines,ge=this.state.editLineConfig;return r.createElement("div",{className:"mBottom16"},ee.map(function(Se){return r.createElement("div",{className:"valignWrapper flex mBottom12",key:Se.id},r.createElement(po,{className:"valignWrapper w100 Relative"},r.createElement(ve.default,{readOnly:!0,value:Se.name,className:"chartInput flex mRight5"}),r.createElement(L.Z,{className:"Gray_9e pointer",icon:"edit",onClick:function(){s.setState({editLineConfig:Se})}})),r.createElement(ol,{"data-tip":_l("\u5220\u9664")},r.createElement(L.Z,{className:"Gray_9e pointer Font19",icon:"task-new-delete",onClick:function(){s.handleRemoveLine(Se.id)}})))}),r.createElement(U.default,{trigger:["click"],overlay:this.renderMenu,getPopupContainer:function(){return document.querySelector(".ChartDialogSetting .chartTabs")}},r.createElement(Hr,{className:"Font13 valignWrapper pointer",onClick:function(Ze){return Ze.preventDefault()}},r.createElement(L.Z,{icon:"add"}),_l("\u6DFB\u52A0\u8F85\u52A9\u7EBF"))),r.createElement(dl,{visible:!!ge,lineConfig:ge||{},yaxisList:x,rightYaxisList:re||[],reportType:X,onSave:this.handleAddLine,onCancel:function(){s.setState({editLineConfig:null})}}))}}]),O}(r.Component),jo=t(22013),fl=t(7452),Pe=t(18484),Bn=(0,Ot.Z)([`
  .ant-modal-header {
    padding: 20px 24px 10px !important;
  }
  .searchWrap {
    padding: 5px 0;
    border-bottom: 1px solid #f5f5f5;
    margin-bottom: 20px;
    input {
      padding: 3px;
      border: none;
      min-width: 0;
    }
  }
`],[`
  .ant-modal-header {
    padding: 20px 24px 10px !important;
  }
  .searchWrap {
    padding: 5px 0;
    border-bottom: 1px solid #f5f5f5;
    margin-bottom: 20px;
    input {
      padding: 3px;
      border: none;
      min-width: 0;
    }
  }
`]),Un=(0,dt.ZP)(le.Z)(Bn),Pt=function(O,V){return O.filter(function(s){return[Pe.GV.analysis,"analysis"].includes(s.type)}).map(function(s){var c=_.get(s,"config.objectId"),g={objectId:c};if(Pe.GV.analysis===s.type){var x=_.find(V,{id:s.value})||{};g.name=x.name||s.name,g.worksheetId=x.appId,g.reportId=x.id}return s.type==="analysis"&&(g.name=s.name,g.worksheetId=s.worksheetId,g.reportId=s.value),g})},ne=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));s.handleSave=function(){var x=s.state,S=x.selectIds,X=x.components,re=S;S.length===0&&(re=[]),S.length===X.length&&(re=null),s.setState({modalVisible:!1}),s.props.onChangeStyle({autoLinkageChartObjectIds:re})};var c=jo.Z.getState(),g=c.customPage;return s.state={modalVisible:!1,components:[],selectIds:[],searchValue:""},s.customPage=g||{},s}return(0,J.default)(O,[{key:"componentDidMount",value:function(){var s=this,c=this.props,g=c.reportId,x=c.worksheetInfo,S=c.currentReport,X=S.style.autoLinkageChartObjectIds;fl.Z.listByPageId({appId:this.customPage.pageId}).then(function(re){re=Pt(s.customPage.components,re).filter(function(ge){return ge.reportId!==g}).filter(function(ge){return ge.worksheetId===x.worksheetId});var ee=X&&X.filter(function(ge){return _.find(re,{objectId:ge})});s.setState({components:re,selectIds:ee?ee.length===0?[]:ee:re.map(function(ge){return ge.objectId})})})}},{key:"renderFooter",value:function(){var s=this;return r.createElement("div",{className:"mTop20 mBottom10 pRight8"},r.createElement(k.default,{autoInsertSpaceInButton:!1},r.createElement(oe.default,{type:"link",onClick:function(){return s.setState({modalVisible:!1})}},_l("\u53D6\u6D88")),r.createElement(oe.default,{type:"primary",onClick:this.handleSave},_l("\u786E\u8BA4"))))}},{key:"renderModal",value:function(){var s=this,c=this.state,g=c.modalVisible,x=c.components,S=c.selectIds,X=c.searchValue;return r.createElement(Un,{title:r.createElement(r.Fragment,null,_l("\u9009\u62E9\u8054\u52A8\u7B5B\u9009\u76F8\u5173\u7EC4\u4EF6"),"(",S.length,"/",x.length,")",r.createElement(j.default,{title:_l("\u8054\u52A8\u7B5B\u9009\u6307\u5B9A\u7EC4\u4EF6\u540E\uFF0C\u5C06\u53D6\u6D88\u81EA\u52A8\u6A21\u5F0F\u4E0B\uFF0C\u4F7F\u7528\u76F8\u540C\u6570\u636E\u96C6\u7684\u7EC4\u4EF6\u81EA\u52A8\u5173\u8054\u3002")},r.createElement(L.Z,{className:"mLeft5 Gray_9e pointer",icon:"info"}))),width:480,className:"chartModal",visible:g,centered:!0,destroyOnClose:!0,closeIcon:r.createElement(L.Z,{icon:"close",className:"Font20 pointer Gray_9e"}),footer:this.renderFooter(),onCancel:function(){return s.setState({modalVisible:!1})}},r.createElement("div",{className:"searchWrap flexRow alignItemsCenter"},r.createElement(L.Z,{className:"Gray_9e Font20 mRight5",icon:"search"}),r.createElement("input",{placeholder:_l("\u641C\u7D22\u7EC4\u4EF6\u540D\u79F0"),className:"flex",value:X,onChange:function(ee){s.setState({searchValue:ee.target.value})}})),r.createElement(Q.default,{className:"mBottom8",indeterminate:!!S.length&&S.length<x.length,checked:S.length===x.length,onChange:function(ee){var ge=ee.target.checked;s.setState({selectIds:ge?x.map(function(Se){return Se.objectId}):[]})}},_l("\u5168\u9009")),x.filter(function(re){return re.name.includes(X)}).map(function(re){return r.createElement("div",{key:re.objectId,className:"mBottom8"},r.createElement(Q.default,{checked:S.includes(re.objectId),onChange:function(ge){var Se=ge.target.checked;s.setState({selectIds:Se?S.concat(re.objectId):S.filter(function(Ze){return re.objectId!==Ze})})}},re.name))}))}},{key:"renderState",value:function(){var s=this.state.components,c=this.props.currentReport,g=this.customPage.config,x=c.style.autoLinkageChartObjectIds;if(x===null)return _l("\u81EA\u52A8\u8054\u52A8");if(x){var S=x.filter(function(X){return _.find(s,{objectId:X})});return S.length?_l("\u5DF2\u8BBE\u7F6E")+" ("+S.length+"/"+s.length+")":_l("\u672A\u8BBE\u7F6E")}return g.autoLinkage?_l("\u81EA\u52A8\u8054\u52A8"):_l("\u672A\u8BBE\u7F6E")}},{key:"render",value:function(){var s=this;return r.createElement(r.Fragment,null,r.createElement("div",{className:"entranceWrap flexRow valignWrapper pointer pLeft10 mBottom10",onClick:function(){return s.setState({modalVisible:!0})}},this.renderState()),this.renderModal())}}]),O}(r.Component),F,B,n=(F=(0,Yt.$j)(function(Ye){return(0,E.default)({},Fe().pick(Ye.statistics,["currentReport","worksheetInfo","reportData"]))},function(Ye){return(0,qt.DE)(ht,Ye)}),F(B=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.handleChangeDisplaySetup=function(c){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=s.props.currentReport.displaySetup;s.props.changeCurrentReport({displaySetup:(0,E.default)({},x,c)},g)},s.handleChangeStyle=function(c){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=s.props.currentReport.style;s.props.changeCurrentReport({style:(0,E.default)({},x,c)},g)},s}return(0,J.default)(O,[{key:"renderAutoLinkage",value:function(){var s=this.props,c=s.reportId,g=s.worksheetInfo,x=s.currentReport;return r.createElement(se.Z.Panel,{key:"autoLinkage",header:_l("\u8054\u52A8\u7B5B\u9009")},r.createElement(ne,{reportId:c,worksheetInfo:g,currentReport:x,onChangeStyle:this.handleChangeStyle}))}},{key:"renderOriginalData",value:function(){var s=this,c=this.props,g=c.worksheetInfo,x=c.currentReport,S=x.displaySetup,X=x.filter,re=x.style;return r.createElement(se.Z.Panel,{key:"originalData",header:_l("\u67E5\u770B\u539F\u59CB\u6570\u636E"),className:N()({collapsible:!S.showRowList}),extra:r.createElement(fr.Z,{size:"small",checked:S.showRowList,onClick:function(ge,Se){Se.stopPropagation()},onChange:function(ge){s.handleChangeDisplaySetup({showRowList:ge})}})},r.createElement(Er,{worksheetInfo:g,displaySetup:S,viewId:X.viewId,style:re||{},onChangeDisplaySetup:this.handleChangeDisplaySetup,onChangeStyle:this.handleChangeStyle}))}},{key:"renderAuxiliaryLine",value:function(){var s=this.props.currentReport;return r.createElement(se.Z.Panel,{key:"auxiliaryLine",header:_l("\u8F85\u52A9\u7EBF")},r.createElement(ml,{currentReport:s,onChangeDisplaySetup:this.handleChangeDisplaySetup}))}},{key:"renderDataContrast",value:function(){var s=this,c=this.props,g=c.currentReport,x=c.reportData,S=g.reportType,X=g.displaySetup,re=g.filter,ee=g.style,ge=re||{},Se=ge.rangeType,Ze=S===fe.f0.NumberChart,Je=hr()(x.map||[]),At=Je.length<2||[fe.f0.NumberChart,fe.f0.FunnelChart].includes(S),Jt=X.contrastType||X.contrast,Kt=ee.numberChartStyle,ln=Kt===void 0?Qr.zj:Kt;return At?r.createElement(se.Z.Panel,{header:_l("\u6570\u636E\u5BF9\u6BD4"),key:"dataContrast",className:N()({collapsible:Ze?!Jt:!1}),extra:Ze?r.createElement(fr.Z,{size:"small",checked:Jt,disabled:!Se,onClick:function(yn,na){na.stopPropagation()},onChange:function(yn){s.handleChangeDisplaySetup((0,E.default)({},X,{contrastType:yn?2:0,contrast:!!yn}),!0)}}):null},r.createElement(or,{isNumberChart:Ze,contrastVisible:At,currentReport:g,onUpdateDisplaySetup:this.handleChangeDisplaySetup,onChangeStyle:this.handleChangeStyle,onChangeCurrentReport:this.props.changeCurrentReport}),Ze&&r.createElement(Qr.xv,{numberChartStyle:ln,onChangeNumberStyle:function(yn){s.handleChangeStyle({numberChartStyle:(0,E.default)({},ln,yn)})}})):null}},{key:"renderPeriodTarget",value:function(){var s=this.props.currentReport,c=s.displaySetup;return c.lifecycleValue?r.createElement(se.Z.Panel,{key:"periodTarget",header:_l("\u5468\u671F\u76EE\u6807")},r.createElement(Ua,{currentReport:s,onUpdateDisplaySetup:this.handleChangeDisplaySetup})):null}},{key:"renderExpandIcon",value:function(s){return r.createElement(L.Z,{className:N()("Font18 mRight5 Gray_9e",{"icon-arrow-active":s.isActive}),icon:"arrow-down-border"})}},{key:"render",value:function(){var s=this.props,c=s.sourceType,g=s.currentReport,x=g.reportType,S=g.xaxes;return r.createElement("div",{className:"chartAdvanced"},r.createElement(se.Z,{className:"chartCollapse",expandIcon:this.renderExpandIcon,ghost:!0},c===1&&this.renderAutoLinkage(),[fe.f0.LineChart,fe.f0.NumberChart,fe.f0.FunnelChart].includes(x)&&this.renderDataContrast(),x===fe.f0.LineChart&&this.renderPeriodTarget(),this.renderOriginalData(),[fe.f0.BarChart,fe.f0.LineChart,fe.f0.DualAxes].includes(x)&&this.renderAuxiliaryLine()))}}]),O}(r.Component))||B),l,o,d,u,p,f=P.default.RangePicker,w=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,20,21],D=(l=(0,Yt.$j)(function(Ye){return(0,E.default)({},Fe().pick(Ye.statistics,["currentReport","worksheetInfo","base"]))},function(Ye){return(0,qt.DE)(ht,Ye)}),l(o=(u=d=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this));p.call(s);var c=V.currentReport,g=c.filter,x=g===void 0?{}:g,S=c.xaxes,X=S===void 0?{}:S;return s.state={currentRangeType:x.rangeType,currentRangeValue:x.rangeValue,dropdownScopeValue:x.rangeType,dropdownDayValue:x.rangeValue||7,particleSizeType:X?X.particleSizeType:0,dynamicFilter:{startType:1,startCount:1,startUnit:1,endType:1,endCount:1,endUnit:1},customRangeDay:!1},s}return(0,J.default)(O,[{key:"renderScope",value:function(){var s=this,c=this.props.currentReport,g=this.state,x=g.dropdownScopeValue,S=g.dropdownDayValue,X=g.currentRangeValue,re=g.currentRangeType,ee=c.filter;if(re===0)return r.createElement(r.Fragment,null,r.createElement(ce.default,{className:"chartSelect w100",value:x,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:this.handleUpdateScope},xe.p3.map(function(Jt){return r.createElement(ce.default.Option,{className:"selectOptionWrapper",key:Jt.value,value:Jt.value},Jt.text)})),(0,xe.HZ)(x)&&r.createElement(ce.default,{className:"chartSelect w100 mTop10",value:Number(S),suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:this.handleUpdateDay},xe.E5.map(function(Jt){return r.createElement(ce.default.Option,{className:"selectOptionWrapper",key:Jt.value,value:Jt.value},Jt.text)})),x===20&&r.createElement(f,{className:"chartInput w100 mTop10",allowClear:!1,suffixIcon:null,locale:tt.Z,format:"YYYY/MM/DD",value:S?S.split("-").map(function(Jt){return kt()(Jt)}):[kt()().add(-7,"days"),kt()()],onChange:function(Kt){var ln=(0,Le.Z)(Kt,2),Gn=ln[0],yn=ln[1];s.setState({dropdownDayValue:Gn.format("YYYY/MM/DD")+"-"+yn.format("YYYY/MM/DD")},s.handleSave)}}),x===21&&this.renderDynamicFilter());if([1,2,3].includes(re))return r.createElement(ve.default,{readOnly:!0,className:"chartInput",value:Fe().find(xe.p3,{value:ee.rangeType}).text});if(w.includes(re)){var ge=ee.rangeType===20?ee.rangeValue.split("-").map(function(Jt){return kt()(Jt)}):[kt()(ee.startDate),kt()(ee.endDate)],Se=re===20?X.split("-").map(function(Jt){return kt()(Jt)}):[kt()(ee.startDate),kt()(ee.endDate)];return r.createElement(f,{className:"chartInput w100",allowClear:!1,suffixIcon:null,locale:tt.Z,format:"YYYY/MM/DD",defaultValue:ge,disabledDate:function(Kt){if(Kt){var ln=(0,Le.Z)(Se,2),Gn=ln[0],yn=ln[1];return Kt<Gn||Kt>yn}else return!1},onChange:function(Kt){var ln=(0,Le.Z)(Kt,2),Gn=ln[0],yn=ln[1];s.props.changeCurrentReport({filter:(0,E.default)({},ee,{rangeType:20,rangeValue:Gn.format("YYYY/MM/DD")+"-"+yn.format("YYYY/MM/DD")})},!0)}})}if((0,xe.HZ)(re)){var Ze=this.state,Je=Ze.customRangeDay,At=Ze.currentRangeValue;return r.createElement(U.default,{overlay:r.createElement(Y.default,{className:"rangeDayOverlayMenu"},xe.E5.filter(function(Jt){return Jt.value<=At}).map(function(Jt){return r.createElement(Y.default.Item,{key:Jt.value,className:N()({active:Number(S)===Jt.value}),onClick:function(){s.setState({customRangeDay:!1}),s.handleUpdateDay(Jt.value)}},Jt.text)})),trigger:["click"]},r.createElement(ve.default,{value:Je===!1?_l("%0\u5929",S):Je,className:"chartInput w100",onChange:function(Kt){var ln=Kt.target.value,Gn=Number(ln.replace(/[^\d]/g,"")),yn=Number(At);s.setState({customRangeDay:Gn>yn?yn:Gn})},onBlur:function(){s.state.customRangeDay&&s.handleUpdateDay(s.state.customRangeDay)},onKeyDown:function(Kt){Kt.which===13&&s.state.customRangeDay&&s.handleUpdateDay(s.state.customRangeDay)}}))}}},{key:"renderDynamicFilter",value:function(){var s=this,c=this.state.dynamicFilter,g=[1,3,4],x=function(X){s.setState({dynamicFilter:(0,E.default)({},c,X)},s.handleSave)};return r.createElement(r.Fragment,null,r.createElement("div",{className:"flexRow valignWrapper mTop20"},r.createElement("div",{className:"mRight15"},_l("\u4ECE")),r.createElement(ce.default,{className:"chartSelect flex",value:c.startType,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(X){x({startType:X})}},xe.bx.map(function(S){return r.createElement(ce.default.Option,{className:"selectOptionWrapper",key:S.value,value:S.value},S.name)})),[5,6].includes(c.startType)&&r.createElement(r.Fragment,null,r.createElement(ve.default,{className:"chartInput flex mLeft10 mRight10",value:c.startCount,onChange:function(X){var re=event.target.value;x({startCount:(0,Dt.pu)(re).replace("-","")})}}),r.createElement(ce.default,{className:"chartSelect flex",value:c.startUnit,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(X){x({startUnit:X})}},xe.ik.map(function(S){return r.createElement(ce.default.Option,{className:"selectOptionWrapper",key:S.value,value:S.value},S.name)})))),r.createElement("div",{className:"flexRow valignWrapper mTop10"},r.createElement("div",{className:"mRight15"},_l("\u81F3")),r.createElement(ce.default,{className:"chartSelect flex",value:c.endType,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(X){x({endType:X,startUnit:g.includes(X)?X:c.startUnit})}},xe.bx.map(function(S){return r.createElement(ce.default.Option,{className:"selectOptionWrapper",key:S.value,value:S.value},S.name)})),[5,6].includes(c.endType)&&r.createElement(r.Fragment,null,r.createElement(ve.default,{className:"chartInput flex mLeft10 mRight10",value:c.endCount,onChange:function(X){var re=event.target.value;x({endCount:(0,Dt.pu)(re).replace("-","")})}}),r.createElement(ce.default,{className:"chartSelect flex",value:c.endUnit,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(X){x((0,Dr.default)({endUnit:X},"endUnit",g.includes(X)?X:c.endUnit))}},xe.ik.map(function(S){return r.createElement(ce.default.Option,{className:"selectOptionWrapper",key:S.value,value:S.value},S.name)})))))}},{key:"renderGroup",value:function(){var s=this,c=this.props.currentReport,g=c.xaxes,x=this.state.particleSizeType,S=g.controlType===16?xe._5:xe._5.filter(function(ee){return![6,7].includes(ee.value)}),X=Fe().findIndex(S,{value:x}),re=Fe().findIndex(xe.x9,{value:x});return r.createElement(r.Fragment,null,r.createElement("div",{className:"Font12 Bold mBottom10 mTop10"},_l("\u5F52\u7EC4")),r.createElement(ce.default,{className:"chartSelect w100",value:g.particleSizeType,suffixIcon:r.createElement(L.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(ge){s.props.changeCurrentReport({particleSizeType:ge},!0)}},Fe().find(S,{value:g.particleSizeType})&&r.createElement(ce.default.OptGroup,{label:_l("\u65F6\u95F4")},S.filter(function(ee,ge){return ge>=X}).map(function(ee){return r.createElement(ce.default.Option,{title:!0,className:"selectOptionWrapper",key:ee.value,value:ee.value},ee.text)})),Fe().find(xe.x9,{value:g.particleSizeType})&&r.createElement(ce.default.OptGroup,{label:_l("\u96C6\u5408")},xe.x9.filter(function(ee,ge){return ge>=re}).map(function(ee){return r.createElement(ce.default.Option,{title:!0,className:"selectOptionWrapper",key:ee.value,value:ee.value},ee.text)}))))}},{key:"render",value:function(){var s=this,c=this.state,g=c.dropdownScopeValue,x=c.dropdownDayValue,S=c.currentRangeType,X=this.props,re=X.projectId,ee=X.worksheetInfo,ge=X.currentReport,Se=Fe().get(ge,"xaxes")||{},Ze=Fe().get(ge,"filter")||{},Je=(0,xe.$$)(Se.controlType),At=(0,rt.v)(Qe.RX.sysControlSwitch,ee.switches,Ze.viewId),Jt=Fe().flatten(hr()(ja.Cz).map(function(ln){return ja.Cz[ln].keys})),Kt=ee.columns.filter(function(ln){return(ln.controlPermissions||"111")[0]==="1"}).map(kr.BM).filter(function(ln){return Fe().includes(Jt,ln.type)}).filter(function(ln){return!(ln.type===38&&ln.enumDefault===3)}).filter(function(ln){return!(!At&&Fe().find(Ie._Q,{controlId:ln.controlId}))}).sort(function(ln,Gn){return ln.row*10+ln.col>Gn.row*10+Gn.col?1:-1});return r.createElement("div",{className:"ChartDialogSetting setting flexColumn ChartFilterPanel"},r.createElement(Te.Z,{className:"flex"},r.createElement("div",{className:"pLeft20 pRight20 pBottom10"},r.createElement("div",{className:"item borderNone pTop20"},r.createElement("div",{className:"title Font18 Bold"},_l("\u7EDF\u8BA1\u8303\u56F4")),r.createElement("div",{className:"Font12 Bold mBottom10 mTop10"},_l("\u65F6\u95F4"),(w.includes(S)||(0,xe.HZ)(S))&&"\uFF08"+Fe().find(xe.p3,{value:S}).text+"\uFF09"),this.renderScope(),Je&&this.renderGroup(),r.createElement("div",{className:"Font12 Bold mBottom10 mTop20 pTop10 flexRow",style:{borderTop:"1px solid #E0E0E0"}},r.createElement("span",{className:"flex"},_l("\u7B5B\u9009"))),r.createElement(Bo,{canEdit:!0,projectId:re,appId:ee.appId,columns:Kt,conditions:[],filterResigned:!1,onConditionsChange:Fe().debounce(function(){var ln=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Gn=arguments[1];ln=ln.map(function(yn){var na=(0,xe.$$)(yn.dataType),ga=kt().isMoment(yn.value);return na&&ga?(0,E.default)({},yn,{value:yn.value.format("YYYY-MM-DD")}):yn}),s.props.changeCurrentReport({filter:(0,E.default)({},Ze,{filterControls:ln})},!0),s.getTableData()},200)})))))}}]),O}(r.Component),p=function(){var O=this;this.getTableData=function(){var V=O.props.currentReport.reportType;V!==fe.f0.PivotTable&&(O.props.changeBase({reportSingleCacheId:null,apkId:null,match:{}}),O.props.getTableData())},this.handleUpdateScope=function(V){O.setState({dropdownScopeValue:V,dropdownDayValue:V===20?kt()().add(-7,"days").format("YYYY/MM/DD")+"-"+kt()().format("YYYY/MM/DD"):(0,xe.HZ)(V)?7:null},function(){O.handleSave()})},this.handleUpdateDay=function(V){O.setState({dropdownDayValue:V},function(){O.handleSave()})},this.handleSave=function(){var V=O.props.currentReport.filter,s=O.props.base.sheetVisible,c=O.state,g=c.dropdownScopeValue,x=c.dropdownDayValue,S=c.dynamicFilter;O.props.changeCurrentReport({filter:(0,E.default)({},V,{rangeType:g,rangeValue:x,dynamicFilter:S})},!0),s&&O.getTableData()}},u))||o),G=t(11875),H=t(27167),De=t(53280),je=t(25087),lt=t(90099),Ft,un,dn=(0,Ot.Z)([`
  padding: 17px 20px;
  .SingleViewHeader {
    .icon-task-later, .addRecord {
      display: none;
    }
  }
  .hoverHighlight {
    &:hover {
      color: #2196f3 !important;
      border-color: #2196f3;
    }
  }
  .chartSheetHeader + div {
    display: none;
  }
  .chartSheetHeader .dataTitle {
    border-bottom: 3px solid #2196f3;
  }
  .searchInputComp + div {
    display: flex;
    align-items: center;
    margin-left: 12px;
    span:first-child {
      margin-right: 12px;
    }
  }
  .actionDivider {
    height: 14px;
    width: 1px;
    margin-left: 5px;
    background-color: #bdbdbd;
  }
  &.small {
    .searchInputComp + div span:first-child {
      display: none;
    }
  }
`],[`
  padding: 17px 20px;
  .SingleViewHeader {
    .icon-task-later, .addRecord {
      display: none;
    }
  }
  .hoverHighlight {
    &:hover {
      color: #2196f3 !important;
      border-color: #2196f3;
    }
  }
  .chartSheetHeader + div {
    display: none;
  }
  .chartSheetHeader .dataTitle {
    border-bottom: 3px solid #2196f3;
  }
  .searchInputComp + div {
    display: flex;
    align-items: center;
    margin-left: 12px;
    span:first-child {
      margin-right: 12px;
    }
  }
  .actionDivider {
    height: 14px;
    width: 1px;
    margin-left: 5px;
    background-color: #bdbdbd;
  }
  &.small {
    .searchInputComp + div span:first-child {
      display: none;
    }
  }
`]),Hn=dt.ZP.div(dn),ca=(Ft=(0,Yt.$j)(function(Ye){return(0,E.default)({},Fe().pick(Ye.statistics,["base","currentReport","tableData","reportData","axisControls","worksheetInfo","reportSingleCacheLoading"]))},function(Ye){return(0,qt.DE)(ht,Ye)}),Ft(un=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.handleCloseReportSingleCacheId=function(){s.props.changeBase({reportSingleCacheId:null,apkId:null,match:null})},s.handleToView=function(){var c=s.props,g=c.base,x=c.getReportSingleCacheId;x({isPersonal:!0,match:g.match})},s.state={reutrnVisible:!1},s}return(0,J.default)(O,[{key:"componentDidMount",value:function(){var s=this.props,c=s.base,g=s.getTableData,x=s.tableData;this.isRequestTableData&&g(),this.setState({reutrnVisible:!c.match})}},{key:"getTitle",value:function(){var s=this.props,c=s.base,g=s.tableData,x=s.currentReport,S=s.reportData,X=fe.f0.NumberChart===x.reportType,re=fe.f0.PivotTable===x.reportType;if(X){var ee=x.yaxisList;return ee[0].controlName}var ge=c.match,Se=re?S:g,Ze=Se.lines,Je=Ze===void 0?[]:Ze,At=Se.columns,Jt=At===void 0?[]:At,Kt=Se.valueMap,ln=Kt===void 0?{}:Kt,Gn=Je.map(function(na){var ga=ln[na.cid]||{},ua=ge[na.cid];return na.controlType===29?_l("\u5173\u8054\u8868"):ga[ua]||ua}).filter(function(na){return na}),yn=Jt.map(function(na){var ga=ln[na.cid]||{},ua=ge[na.cid];return ga[ua]||ua}).filter(function(na){return na});return Gn.concat(yn).join("-")}},{key:"renderHeaderName",value:function(){var s=this.state.reutrnVisible,c=this.props,g=c.base,x=c.currentReport,S=![fe.f0.PivotTable,fe.f0.NumberChart].includes(x.reportType);if(g.reportSingleCacheId){var X=this.getTitle();return r.createElement("div",{className:"flex valignWrapper ellipsis chartSheetHeader"},S&&r.createElement("div",{className:"valignWrapper hoverHighlight Font15 Gray bold pointer mRight20 mBottom3",onClick:this.handleCloseReportSingleCacheId},_l("\u4EE5\u8868\u683C\u663E\u793A")),r.createElement("div",{className:"Font15 Gray bold ellipsis dataTitle"},_l("\u539F\u59CB\u6570\u636E"),X&&"\uFF1A"+X))}else return r.createElement("div",{className:"flex Font15 bold"},_l("\u4EE5\u8868\u683C\u663E\u793A"))}},{key:"renderHeaderAction",value:function(){var s=this,c=this.props,g=c.base,x=c.settingVisible,S=c.currentReport,X=c.worksheetInfo,re=c.direction,ee=c.onChangeDirection,ge=c.onClose,Se=c.isSmall,Ze=Fe().get(S,["filter","viewId"]),Je=Fe().find(X.views,{viewId:Ze});return r.createElement("div",{className:"valignWrapper"},g.reportSingleCacheId&&r.createElement("div",{className:"actionDivider"}),g.reportSingleCacheId&&Je&&!Je.viewType&&!md.global.Account.isPortal&&r.createElement(j.default,{title:_l("\u524D\u5F80\u89C6\u56FE\u67E5\u770B")},r.createElement(L.Z,{className:"Font20 Gray_9e pointer hoverHighlight mLeft12",icon:"launch",onClick:this.handleToView})),r.createElement(L.Z,{icon:"close",className:"Font22 Gray_9e pointer mLeft12 hoverHighlight",onClick:function(){s.handleCloseReportSingleCacheId(),ge()}}))}},{key:"renderHeader",value:function(){return r.createElement("div",{className:"valignWrapper mBottom16"},this.renderHeaderName(),this.renderHeaderAction())}},{key:"renderBody",value:function(){var s=this.props,c=s.currentReport,g=s.tableData,x=s.worksheetInfo,S=s.base,X=s.reportSingleCacheLoading,re=s.settingVisible,ee=je.Z[fe.f0.PivotTable],ge=location.href.includes("public/chart"),Se=Fe().get(window,"shareState.shareId")||window.shareAuthor;if(Fe().isEmpty(g)&&this.isRequestTableData||!Fe().isEmpty(S.match)&&Fe().isEmpty(S.reportSingleCacheId))return r.createElement(m.Z,null);if(S.reportSingleCacheId){var Ze=c||{},Je=Ze.filter,At=Je===void 0?{}:Je,Jt=Ze.displaySetup,Kt=Jt===void 0?{}:Jt;return X?r.createElement(m.Z,null):r.createElement(lt.Z,{showAsSheetView:!0,filtersGroup:[],showHeader:!0,appId:S.apkId,worksheetId:x.worksheetId,viewId:At.viewId,chartId:S.reportSingleCacheId,showControlIds:Kt.showControlIds,headerLeft:this.renderHeaderName(),headerRight:this.renderHeaderAction()})}else if(this.isRequestTableData){var ln=g.data,Gn=ln===void 0?{}:ln,yn=g.status;return Fe().isEmpty(Gn.data)||!yn?r.createElement(G.Ll,null):r.createElement(r.Fragment,null,this.renderHeader(),r.createElement(ee,{isViewOriginalData:!re&&!ge&&!Se,requestOriginalData:this.props.requestOriginalData,reportData:g}))}}},{key:"render",value:function(){var s=this.props,c=s.style,g=s.isSmall,x=s.base;return r.createElement(Hn,{className:N()("chartSheet flexColumn",{small:g,pTop10:x.reportSingleCacheId}),style:c},this.renderBody())}},{key:"isRequestTableData",get:function(){var s=this.props.currentReport;return![fe.f0.PivotTable].includes(s.reportType)}}]),O}(r.Component))||un),da,Me,nt=(0,Dt.Q9)(),He=dt.ZP.div(function(Ye){var O=Ye.value;return`
  position: absolute;
  z-index: 2;
  top: `+O+`px;
  width: 100%;
  height: 2px;
  cursor: ns-resize;
  background-color: #ccc;
  &:hover {
    background-color: #ddd;
  }
`}),ie=dt.ZP.div(function(Ye){var O=Ye.value;return`
  position: absolute;
  z-index: 2;
  left: `+O+`px;
  width: 2px;
  height: 100%;
  cursor: ew-resize;
  background-color: #ccc;
  &:hover {
    background-color: #ddd;
  }
`}),We=(da=(0,Yt.$j)(function(Ye){return(0,E.default)({},Fe().pick(Ye.statistics,["loading","currentReport","worksheetInfo","reportData","base","direction"]))},function(Ye){return(0,qt.DE)(ht,Ye)}),da(Me=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.state={min:0,max:0,dragValue:0,sheetSize:0,dragMaskVisible:!1},s.$chartRef=(0,r.createRef)(null),s}return(0,J.default)(O,[{key:"componentDidMount",value:function(){this.changeDragValue(this.props.direction)}},{key:"componentWillReceiveProps",value:function(s){var c=this;(s.scopeVisible!==this.props.scopeVisible||s.direction!==this.props.direction)&&setTimeout(function(){c.changeDragValue(s.direction)},0)}},{key:"changeDragValue",value:function(s){var c=this.$chartRef.current||{},g=c.offsetHeight,x=c.offsetWidth,S=s==="vertical"?g:x,X=Number(localStorage.getItem(s+"ChartSheetDragValue")||0),re=Number(localStorage.getItem(s+"ChartSheetSheetSize")||0);this.setState({dragValue:X||S/2,sheetSize:re||S/2,min:20/100*S,max:80/100*S})}},{key:"renderChart",value:function(){var s=this.props,c=s.projectId,g=s.themeColor,x=s.customPageConfig,S=s.reportData,X=s.currentReport,re=s.base,ee=s.direction,ge=s.getReportSingleCacheId,Se=s.requestOriginalData,Ze=s.changeCurrentReport,Je=re.settingVisible,At=re.report,Jt=At===void 0?{}:At,Kt=re.sourceType,ln=Jt.id,Gn=S.reportType,yn=S.valueMap,na=je.Z[Gn],ga=location.href.includes("public/chart"),ua=window.shareAuthor||Fe().get(window,"shareState.shareId"),Xn={projectId:c,sourceType:Kt,isViewOriginalData:!Je&&!nt&&!ga&&!ua,requestOriginalData:Se,direction:ee,themeColor:g,customPageConfig:x};if([fe.f0.PivotTable].includes(Gn)){var $a=S.data,Ga=S.columns,er=S.ylist,rr=S.lines;return Fe().isEmpty($a.data)?r.createElement(G.Ll,null):r.createElement(na,(0,E.default)({},Xn,{settingVisible:Je,onChangeCurrentReport:Ze,reportData:(0,E.default)({},X,{reportId:ln,data:$a,columns:Ga,ylist:er,lines:X.pivotTable?Fe().merge(rr,X.pivotTable.lines):rr,valueMap:yn})}))}if(fe.f0.CountryLayer===Gn){var gr=S.map,sr=S.country,Tr=S.summary;return gr.length?r.createElement(na,(0,E.default)({},Xn,{reportData:(0,E.default)({},X,{map:gr,country:sr,summary:Je?X.summary:Tr})})):r.createElement(G.Ll,null)}if([fe.f0.GaugeChart,fe.f0.ProgressChart].includes(Gn)){var Oa=S.map;return Fe().isEmpty(Oa)?r.createElement(G.Ll,null):r.createElement(na,(0,E.default)({},Xn,{reportData:(0,E.default)({},X,{map:Oa})}))}if([fe.f0.BarChart,fe.f0.LineChart,fe.f0.RadarChart,fe.f0.FunnelChart,fe.f0.DualAxes,fe.f0.BidirectionalBarChart,fe.f0.ScatterChart,fe.f0.WordCloudChart,fe.f0.TopChart].includes(Gn)){var Va=S.map,Ka=S.contrastMap,tr=S.summary,Fr=S.rightY,ro=Fr===void 0?{}:Fr;return Va.length||Ka.length?r.createElement(na,(0,E.default)({},Xn,{reportData:(0,E.default)({},X,{map:Va,contrastMap:Ka,valueMap:yn,summary:Je?X.summary:tr,rightY:Je?X.rightY:ro,reportId:ln})})):r.createElement(G.Ll,null)}if([fe.f0.PieChart].includes(Gn)){var xr=S.map,Lo=S.summary;return xr.length?r.createElement(na,(0,E.default)({},Xn,{reportData:(0,E.default)({},X,{map:xr,summary:Je?X.summary:Lo,reportId:ln})})):r.createElement(G.Ll,null)}if([fe.f0.NumberChart].includes(Gn)){var vl=S.map,hl=S.contrast,gl=S.contrastMap,Cl=(0,E.default)({},X,{map:vl,contrast:hl,contrastMap:gl});return r.createElement(na,(0,E.default)({},Xn,{reportData:Cl}))}}},{key:"render",value:function(){var s=this,c=this.props,g=c.loading,x=c.base,S=c.isCharge,X=c.sheetVisible,re=c.settingVisible,ee=c.worksheetInfo,ge=c.reportData,Se=c.currentReport,Ze=c.onChangeSheetVisible,Je=c.renderHeaderDisplaySetup,At=ge.createdBy,Jt=At===void 0?{}:At,Kt=ge.lastModifiedBy,ln=Kt===void 0?{}:Kt,Gn=Fe().get(Se,["filter","viewId"]),yn=Fe().find(ee.views,{viewId:Gn}),na=this.props,ga=na.direction,ua=na.scopeVisible,Xn=this.state,$a=Xn.dragMaskVisible,Ga=Xn.min,er=Xn.max,rr=Xn.sheetSize,gr=Number(localStorage.getItem(ga+"ChartSheetDragValue")||0),sr=this.state.dragValue-(ua&&gr&&ga==="horizontal"?320:0),Tr=x.sourceType,Oa=x.permissions,Va=x.report,Ka=Tr===1?S:Oa;return r.createElement("div",{className:N()("chartBody Relative flex",{flexColumn:ga==="vertical",flexRow:ga==="horizontal"}),ref:this.$chartRef},r.createElement("div",{className:N()("chart flexColumn",ga)},ge.status>0?Je():null,g?r.createElement(G.gb,null):ge.status>0?r.createElement(r.Fragment,null,this.renderChart(),r.createElement("div",{className:"flexRow mTop10 Gray_9e Font13 userInfo"},r.createElement("span",{className:"mRight25"},_l("\u521B\u5EFA\u4EBA"),": ",Jt.fullName),r.createElement("span",{className:"mRight25"},_l("\u6700\u540E\u4FEE\u6539\u4EBA"),": ",ln.fullName),Ka&&Va.id&&r.createElement("span",null,_l("\u56FE\u8868ID"),": ",Va.id))):r.createElement(G.hO,{isEdit:re?!(Gn&&Fe().isEmpty(yn)):!1,status:ge.status})),X&&r.createElement(r.Fragment,null,$a&&r.createElement(De.Z,{direction:ga,value:sr,min:Ga,max:er,onChange:function(Fr){var ro=s.$chartRef.current,xr=ro.offsetHeight,Lo=ro.offsetWidth,vl=(ga==="vertical"?xr:Lo)-Fr,hl=Fr+(ua?320:0);s.setState({dragMaskVisible:!1,dragValue:hl,sheetSize:vl},function(){var gl=ge.style;ga==="vertical"&&ge.reportType===fe.f0.PivotTable&&(gl.pivotTableColumnFreeze||gl.pivotTableLineFreeze)&&gl.paginationVisible&&s.props.getReportData()}),safeLocalStorageSetItem(ga+"ChartSheetDragValue",hl),safeLocalStorageSetItem(ga+"ChartSheetSheetSize",vl)}}),r.createElement(ca,{direction:ga,settingVisible:re,isSmall:ga==="horizontal"?rr<540:!1,style:{height:ga==="vertical"?rr:"100%",width:ga==="horizontal"?rr:"100%"},onClose:function(){Ze(!1)}}),ga==="vertical"&&r.createElement(He,{value:sr,onMouseDown:function(){return s.setState({dragMaskVisible:!0})}}),ga==="horizontal"&&r.createElement(ie,{value:sr,onMouseDown:function(){return s.setState({dragMaskVisible:!0})}})))}}]),O}(r.Component))||Me),Ue,Ke,ut,wt=(0,Ot.Z)([`
  .ant-input:focus, .ant-input-focused {
    box-shadow: none !important;
  }
`],[`
  .ant-input:focus, .ant-input-focused {
    box-shadow: none !important;
  }
`]),Et=ve.default.TextArea,et=dt.ZP.div(wt),Xe=(Ke=Ue=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));ut.call(s);var c=V.desc;return s.state={desc:c},s}return(0,J.default)(O,[{key:"componentWillReceiveProps",value:function(s){s.desc!==this.props.desc&&this.setState({desc:s.desc})}},{key:"render",value:function(){var s=this,c=this.props,g=c.pageId,x=c.dialogClasses,S=this.state.desc;return r.createElement(et,{className:"WhiteBG z-depth-2 boderRadAll_4",style:{width:300,padding:12}},r.createElement(Et,{rows:4,autoSize:{minRows:4,maxRows:6},placeholder:_l("\u6DFB\u52A0\u56FE\u8868\u63CF\u8FF0"),value:S,onChange:function(re){s.setState({desc:re.target.value})}}),r.createElement("div",{className:"TxtRight pTop20 pBottom5"},r.createElement(oe.default,{type:"text",size:"small",onClick:this.props.onClose},_l("\u53D6\u6D88")),r.createElement(oe.default,{type:"primary",size:"small",className:"mLeft10",onClick:this.handleSave},_l("\u4FDD\u5B58"))))}}]),O}(r.Component),ut=function(){var O=this;this.handleSave=function(){var V=O.state.desc.trim(),s=O.props,c=s.desc,g=s.reportId,x=s.onSave,S=s.onClose;if(!g){x(V),S();return}V!==c&&(ye.Z.updateReportDesc({reportId:g,desc:V}).then(function(X){X&&x(V)}),S())}},Ke),pt=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.handleBlur=function(c){var g=c.target.value,x=s.props.report;x.id&&ye.Z.updateReportName({reportId:x.id,name:g}).then(function(S){}),s.setState({isEdit:!1}),s.props.changeCurrentReport({name:g})},s.state={isEdit:!1,editDescVisible:!1},s}return(0,J.default)(O,[{key:"render",value:function(){var s=this,c=this.props,g=c.report,x=c.permissions,S=c.currentReport,X=this.state,re=X.isEdit,ee=X.editDescVisible;return r.createElement(r.Fragment,null,re?r.createElement(Vr.Z,{autoFocus:!0,className:"flex mRight20",defaultValue:S.name,onBlur:this.handleBlur,onKeyDown:function(Se){Se.which===13&&s.handleBlur(Se)}}):r.createElement("div",{className:"nameWrapper valignWrapper flex"},r.createElement("span",{className:"ellipsis bold Font16"},S.name),x&&r.createElement(L.Z,{icon:"workflow_write",className:"Font18 pointer Gray_9e mLeft7",onClick:function(){s.setState({isEdit:!0})}}),(x?!0:S.desc)&&r.createElement(Mn.Z,{action:["click"],popup:r.createElement(Xe,{reportId:g.id,desc:S.desc,onSave:function(Se){s.props.changeCurrentReport({desc:Se})},onClose:function(){s.setState({editDescVisible:!1})}}),popupVisible:ee,onPopupVisibleChange:function(Se){x&&s.setState({editDescVisible:Se})},popupAlign:{points:["tr","br"],offset:[10,10],overflow:{adjustX:!0,adjustY:!0}}},r.createElement(j.default,{title:S.desc||_l("\u7F16\u8F91\u56FE\u8868\u8BF4\u660E"),placement:"bottom"},r.createElement(L.Z,{icon:"info",className:N()("Font18 pointer Gray_9e mLeft7",{hideDesc:!ee&&Fe().isEmpty(S.desc)})})))))}}]),O}(r.Component),at,ct,Nt,mn=(0,Ot.Z)([`
  border-radius: 3px;
  background-color: #fff;
  box-shadow: 0 6px 26px 6px #8484845c;
  width: auto !important;
  padding: 20px !important;
  max-height: 360px;
  overflow-y: auto;
  .sortItem {
    margin-bottom: 20px;
    &:last-child {
      margin-bottom: 0;
    }
  }
  .sortSelect {
    border-radius: 5px;
    background-color: #fff;
    margin-top: 8px;
    .item {
      width: 80px;
      color: #757575;
      text-align: center;
      font-size: 14px;
      padding: 5px 0;
      cursor: pointer;
      border: 1px solid #e0e0e0;
      border-right: none;
      &:first-child {
        border-radius: 5px 0 0 5px;
      }
      &:last-child {
        border-radius: 0 5px 5px 0;
        border-right: 1px solid #e0e0e0;
      }
      &.active {
        color: #1e88e5;
        border-color: #1e88e5;
        background-color: #fff;
      }
      &.active + .item {
        border-left-color: #1e88e5;
      }
    }
  }
`],[`
  border-radius: 3px;
  background-color: #fff;
  box-shadow: 0 6px 26px 6px #8484845c;
  width: auto !important;
  padding: 20px !important;
  max-height: 360px;
  overflow-y: auto;
  .sortItem {
    margin-bottom: 20px;
    &:last-child {
      margin-bottom: 0;
    }
  }
  .sortSelect {
    border-radius: 5px;
    background-color: #fff;
    margin-top: 8px;
    .item {
      width: 80px;
      color: #757575;
      text-align: center;
      font-size: 14px;
      padding: 5px 0;
      cursor: pointer;
      border: 1px solid #e0e0e0;
      border-right: none;
      &:first-child {
        border-radius: 5px 0 0 5px;
      }
      &:last-child {
        border-radius: 0 5px 5px 0;
        border-right: 1px solid #e0e0e0;
      }
      &.active {
        color: #1e88e5;
        border-color: #1e88e5;
        background-color: #fff;
      }
      &.active + .item {
        border-left-color: #1e88e5;
      }
    }
  }
`]),Qt=(0,Ot.Z)([`
  border-radius: 3px;
  padding: 8px 5px;
  &:hover,
  &.sortableCustomSortItem {
    background-color: #f6f6f6;
  }
  &.sortableCustomSortItem {
    z-index: 9999;
  }
`],[`
  border-radius: 3px;
  padding: 8px 5px;
  &:hover,
  &.sortableCustomSortItem {
    background-color: #f6f6f6;
  }
  &.sortableCustomSortItem {
    z-index: 9999;
  }
`]),Cn=(0,Ot.Z)([`
  &.active, &:hover {
    span, .icon {
      color: #2196F3 !important;
    }
  }
`],[`
  &.active, &:hover {
    span, .icon {
      color: #2196F3 !important;
    }
  }
`]),_n=dt.ZP.div(mn),ra=dt.ZP.div(Qt),Nn=dt.ZP.div(Cn),Ht={value:0,text:_l("\u4E0D\u6392\u5E8F")},Sn={value:3,text:_l("\u81EA\u5B9A\u4E49")},Dn=(0,Mt.W8)(function(Ye){var O=Ye.item,V=Ye.sortIndex;return r.createElement(ra,{className:"customSortItem flexRow valignWrapper",key:V},r.createElement(L.Z,{icon:"drag",className:"Gray_9e Font15 pointer"}),r.createElement("span",{className:"Gray Font14 mLeft5"},O.name))}),xn=(0,Mt.JN)(function(Ye){var O=Ye.list;return r.createElement("div",null,O.map(function(V,s){return r.createElement(Dn,{key:s,index:s,sortIndex:s,item:V})}))}),an=(ct=at=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));Nt.call(s);var c=V.currentReport.rightY;return s.state={visible:!1,currentCustomSort:null,sortList:[],customSortLoading:!1,customSortId:null,customSortValue:null,rightYaxisList:c?s.setYaxisList(V):[]},s}return(0,J.default)(O,[{key:"componentWillReceiveProps",value:function(s){var c=s.currentReport.rightY;this.setState({rightYaxisList:c?this.setYaxisList(s):[]})}},{key:"renderItem",value:function(s,c){var g=this,x=this.props.currentReport,S=x.sorts,X=(0,xe.l0)(s)?[].concat((0,Z.Z)((0,xe.Zv)(s)),[Sn]):(0,xe.Zv)(s),re=Fe().find(S,s.controlId),ee=re?re[s.controlId]:0;return!Fe().isEmpty(X)&&r.createElement("div",{className:"sortItem",key:s.controlId},r.createElement("div",{className:"Gray Font14 ellipsis"},s.particleSizeType?s.controlName+"("+Fe().find(xe.qp,{value:s.particleSizeType}).text+")":s.controlName),r.createElement("div",{className:"sortSelect flexRow"},[Ht].concat((0,Z.Z)(X)).map(function(ge){return r.createElement("div",{key:ge.value,className:N()("item",{active:(Fe().isArray(ee)?Sn.value:ee)===ge.value}),onClick:function(){ge.value==Sn.value?(g.getCustomSort(s.originalControlId||s.controlId,re),g.setState({currentCustomSort:s.controlId,visible:!1})):c(ge.value,s)}},ge.text,ge.value==Sn.value&&(Fe().isArray(ee)?Sn.value:ee)===ge.value&&r.createElement(L.Z,{icon:"arrow-down",className:"Font12 mLeft2"}))})))}},{key:"renderFooter",value:function(){var s=this;return r.createElement("div",{className:"mTop20 mBottom10 pRight8"},r.createElement(k.default,{autoInsertSpaceInButton:!1},r.createElement(oe.default,{type:"link",onClick:function(){s.setState({currentCustomSort:null,visible:!0})}},_l("\u53D6\u6D88")),r.createElement(oe.default,{type:"primary",onClick:this.handleSaveSortList},_l("\u786E\u8BA4"))))}},{key:"renderContent",value:function(){var s=this,c=this.state.rightYaxisList,g=this.props,x=g.reportType,S=g.currentReport,X=S.xaxes,re=X===void 0?{}:X,ee=S.yaxisList,ge=ee===void 0?[]:ee,Se=S.split,Ze=S.rightY,Je=S.pivotTable;return r.createElement(_n,{className:"displaySetupPanel"},re.controlId&&![fe.f0.PivotTable,fe.f0.TopChart].includes(x)&&this.renderItem((0,E.default)({},re,{originalControlId:re.controlId,controlId:re.particleSizeType?re.controlId+"-"+re.particleSizeType:re.controlId}),this.handleChangeXSort),x==fe.f0.PivotTable&&Je&&r.createElement(r.Fragment,null,Je.lines.map(function(At){return s.renderItem((0,E.default)({},At,{originalControlId:At.controlId,controlId:(0,xe.$$)(At.controlType)?At.controlId+"-"+At.particleSizeType:At.controlId}),s.handleChangePivotTableSort)}),Je.columns.map(function(At){return s.renderItem((0,E.default)({},At,{originalControlId:At.controlId,controlId:(0,xe.$$)(At.controlType)?At.controlId+"-"+At.particleSizeType:At.controlId}),s.handleChangePivotTableSort)})),ge.map(function(At){return s.renderItem(At,s.handleChangeYSort)}),Se&&Se.controlId&&this.renderItem((0,E.default)({},Se,{originalControlId:Se.controlId,controlId:Se.particleSizeType?Se.controlId+"-"+Se.particleSizeType:Se.controlId}),this.handleChangeYSort),c.map(function(At){return s.renderItem(At,s.handleChangeYSort)}),Ze&&Ze.split.controlId&&this.renderItem((0,E.default)({},Ze.split,{originalControlId:Ze.split.controlId,controlId:Ze.split.particleSizeType?Ze.split.controlId+"-"+Ze.split.particleSizeType:Ze.split.controlId}),this.handleChangeYSort))}},{key:"render",value:function(){var s=this.state,c=s.visible,g=s.currentCustomSort,x=s.customSortValue,S=s.sortList,X=s.customSortLoading,re=this.props.reportType,ee=S.length*38;return r.createElement(r.Fragment,null,[fe.f0.LineChart,fe.f0.BarChart,fe.f0.PieChart,fe.f0.RadarChart,fe.f0.FunnelChart,fe.f0.DualAxes,fe.f0.PivotTable,fe.f0.NumberChart,fe.f0.BidirectionalBarChart,fe.f0.TopChart,fe.f0.CountryLayer].includes(re)&&r.createElement(U.default,{visible:c,onVisibleChange:this.handleChangeVisible,overlay:this.renderContent(),trigger:["click"],placement:"bottomRight"},r.createElement(j.default,{title:_l("\u6392\u5E8F"),placement:"bottom"},r.createElement(L.Z,{icon:"swap_vert",className:"Font20 pointer Gray_9e Bold mLeft16 hoverHighlight"}))),r.createElement(le.Z,{title:r.createElement("div",{className:"valignWrapper"},r.createElement("div",{className:"flex"},_l("\u81EA\u5B9A\u4E49\u6392\u5E8F")),r.createElement(Nn,{className:N()("valignWrapper pointer",{active:x}),onClick:this.handleChangeCustomSortValue},r.createElement(L.Z,{className:"mRight5 Gray_9e Font20",icon:"swap_vert"}),r.createElement("span",{className:"Gray Font13 Normal"},x?x===2?"Z \u2192 A":"A \u2192 Z":_l("\u81EA\u5B9A\u4E49")))),className:"chartModal",visible:!!g,centered:!0,width:400,footer:this.renderFooter(),closable:!1},r.createElement("div",{className:"valignWrapper",style:{height:ee>520?520:ee}},r.createElement(Te.Z,null,X?r.createElement(m.Z,null):g&&r.createElement(xn,{axis:"y",helperClass:"sortableCustomSortItem",list:S,shouldCancelStart:function(Se){var Ze=Se.target;return!Ze.classList.contains("icon-drag")},onSortEnd:this.handleSortEnd})))))}}]),O}(r.Component),Nt=function(){var O=this;this.setYaxisList=function(V){var s=V.currentReport,c=s.yaxisList,g=s.rightY,x=Fe().filter(c,function(S){return Fe().find(g.yaxisList,{controlId:S.controlId})}).map(function(S){return S.controlId});return Fe().cloneDeep(g.yaxisList).map(function(S){return x.includes(S.controlId)&&(S.originalControlId=S.controlId,S.controlId=S.controlId+"-right"),S})},this.handleChangeSorts=function(V){var s=O.props,c=s.reportType,g=s.currentReport,x=c===fe.f0.PivotTable,S=g.xaxes,X=g.yaxisList,re=g.rightY,ee=g.split,ge=ee===void 0?{}:ee,Se=X.map(function(ua){return ua.controlId});if(x){var Ze=g.pivotTable,Je=Ze===void 0?{lines:[],columns:[]}:Ze,At=Je.lines.map(function(ua){return(0,xe.$$)(ua.controlType)?ua.controlId+"-"+ua.particleSizeType:ua.controlId}),Jt=Je.columns.map(function(ua){return(0,xe.$$)(ua.controlType)?ua.controlId+"-"+ua.particleSizeType:ua.controlId});V=(0,xe.Cg)(V,[].concat((0,Z.Z)(At),(0,Z.Z)(Jt),(0,Z.Z)(Se)))}else{var Kt=S.particleSizeType?S.controlId+"-"+S.particleSizeType:S.controlId,ln=re?re.yaxisList.map(function(ua){return ua.controlId}):[],Gn=ge.particleSizeType?ge.controlId+"-"+ge.particleSizeType:ge.controlId,yn=re?re.split.particleSizeType?re.split.controlId+"-"+re.split.particleSizeType:re.split.controlId:null,na=Fe().filter(Se,function(ua){return ln.includes(ua)}).map(function(ua){return ua}),ga=ln.map(function(ua){return na.includes(ua)?ua+"-right":ua});V=(0,xe.Cg)(V,[Kt].concat((0,Z.Z)(Se),[Gn],(0,Z.Z)(ga),[yn]),na)}O.props.onChangeCurrentReport({sorts:V})},this.handleSaveSortList=function(){var V=O.props,s=V.reportType,c=V.currentReport,g=c.xaxes,x=c.split,S=x===void 0?{}:x,X=c.sorts,re=c.yaxisList,ee=c.rightY,ge=O.state,Se=ge.currentCustomSort,Ze=ge.sortList,Je=ge.customSortValue,At=Fe().isNumber(Je)?Je:Ze.map(function(ln){return ln.originalName}),Jt=s===fe.f0.PivotTable;if(Jt)O.handleChangePivotTableSort(At,{controlId:Se});else if(Se===g.controlId&&O.handleChangeXSort(At,{controlId:g.controlId}),Se===S.controlId&&O.handleChangeYSort(At,{controlId:S.controlId}),ee&&Se===ee.split.controlId){var Kt=Fe().filter(re,function(ln){return Fe().find(ee.yaxisList,{controlId:ln.controlId})}).map(function(ln){return ln.controlId});O.handleChangeYSort(At,{controlId:Kt.includes(ee.split.controlId)?ee.split.controlId+"-right":ee.split.controlId})}O.setState({currentCustomSort:null,visible:!0})},this.handleChangeVisible=function(){var V=O.state.visible;O.setState({visible:!V})},this.handleChangeCustomSortValue=function(){var V=O.state,s=V.customSortId,c=V.customSortValue;c===1?O.getCustomSort(s,(0,Dr.default)({},s,2)):c===2?O.getCustomSort(s,null):O.getCustomSort(s,(0,Dr.default)({},s,1))},this.getCustomSort=function(V,s){var c=O.props,g=c.reportId,x=c.pageId,S=c.sourceType,X=c.currentReport,re=c.reportData;O.setState({customSortLoading:!0,customSortId:V,customSortValue:s&&Fe().isNumber(s[V])?s[V]:null}),ye.Z.customSort({reportId:g,pageId:x,appId:X.appId,controlId:V,auth:re.auth,owner:re.owner,sourceType:S,filter:X.filter,sort:s}).then(function(ee){O.setState({sortList:ee.map(function(ge){var Se=Fe().findKey(ge);return{name:ge[Se],originalName:Se}}),customSortLoading:!1})})},this.createSortItem=function(V,s){var c=(0,Dr.default)({},V,s);O.handleChangeSorts([c])},this.handleChangeXSort=function(V,s){var c=s.controlId,g=O.props,x=g.reportType,S=g.currentReport,X=S.xaxes,re=S.yaxisList,ee=S.split,ge=ee===void 0?{}:ee,Se=S.sorts,Ze=S.displaySetup,Je=x===fe.f0.DualAxes,At=Fe().isEmpty(ge.controlId)||Je;if(Se.length){var Jt=Fe().isEmpty(Fe().find(Se,c));Jt&&Se.push((0,Dr.default)({},c,V));var Kt=Se.map(function(ln,Gn){return ln[c]?V?(ln[c]=V,ln):null:Ze.isPile&&re[0].controlId==Fe().findKey(ln)?At||Ze.isPile?null:ln:At?null:ln}).filter(function(ln){return ln});O.handleChangeSorts(Kt)}else V&&O.createSortItem(c,V)},this.handleChangeYSort=function(V,s){var c=s.controlId,g=O.props,x=g.reportType,S=g.currentReport,X=S.yaxisList,re=S.split,ee=S.pivotTable,ge=S.sorts,Se=S.xaxes,Ze=S.displaySetup,Je=x===fe.f0.DualAxes,At=x===fe.f0.PivotTable,Jt=Fe().isEmpty(re&&re.controlId)||Je,Kt=Se.particleSizeType?Se.controlId+"-"+Se.particleSizeType:Se.controlId;if(ge.length){var ln=Fe().isEmpty(Fe().find(ge,c));ln&&ge.push((0,Dr.default)({},c,V));var Gn=ge.map(function(yn){if(yn[c])return V?(yn[c]=V,yn):null;if(yn[Kt])return Ze.isPile&&X[0].controlId==c?Jt||Ze.isPile?null:yn:Jt?null:yn;if(At){var na=Fe().findLast(ee.lines)||{},ga=Fe().findLast(ee.columns)||{},ua=Fe().findKey(yn);return Fe().find(X,{controlId:ua})||[na.controlId,ga.controlId].includes(ua)?null:yn}else return Ze.isPile?yn:null});O.handleChangeSorts(Gn.filter(function(yn){return yn}))}else V&&O.createSortItem(c,V)},this.handleChangePivotTableSort=function(V,s){var c=s.controlId,g=O.props.currentReport,x=g.pivotTable,S=g.yaxisList,X=g.sorts,re=x.lines;if(X.length){var ee=Fe().findLast(x.lines)||{},ge=Fe().findLast(x.columns)||{},Se=Fe().isEmpty(Fe().find(X,c));Se&&X.push((0,Dr.default)({},c,V));var Ze=X.map(function(Je){if(Je[c])return V?(Je[c]=V,Je):null;var At=Fe().findKey(Je);return[ee.controlId,ge.controlId].includes(c)&&Fe().find(S,{controlId:At})?null:Je});O.handleChangeSorts(Ze.filter(function(Je){return Je}))}else V&&O.createSortItem(c,V)},this.handleSortEnd=function(V){var s=V.oldIndex,c=V.newIndex;if(s!==c){var g=O.state,x=g.currentCustomSort,S=g.sortList,X=(0,Mt.Rp)(S,s,c);O.setState({sortList:X,customSortValue:null})}}},ct),Qn=function(O){var V=O.settingVisible,s=O.scopeVisible,c=O.sheetVisible,g=O.direction,x=O.currentReport,S=O.reportData,X=O.worksheetInfo,re=O.sourceType,ee=O.base,ge=O.onChangeScopeVisible,Se=O.onChangeSheetVisible,Ze=O.onChangeDirection,Je=O.changeCurrentReport,At=O.getReportData,Jt=O.getTableData,Kt=ee.report,ln=Kt===void 0?{}:Kt,Gn=ee.pageId,yn=Fe().get(window,"shareState.shareId")||window.shareAuthor,na=![fe.f0.PivotTable].includes(S.reportType),ga=x.style,ua=ga||{},Xn=ua.pivotTableColumnWidthConfig;return r.createElement("div",{className:"flexRow valignWrapper"},c&&!V?r.createElement(j.default,{title:g==="vertical"?_l("\u5207\u6362\u4E3A\u7AD6\u7248\u6A21\u5F0F"):_l("\u5207\u6362\u4E3A\u6A2A\u7248\u6A21\u5F0F"),placement:"bottom"},r.createElement(L.Z,{icon:"call_to_action_on",className:N()("Font20 Gray_9e pointer mLeft16",g),onClick:function(){Ze()}})):na&&r.createElement(j.default,{title:_l("\u4EE5\u8868\u683C\u663E\u793A"),placement:"bottom"},r.createElement(L.Z,{icon:"worksheet",className:"Font20 Gray_9e pointer mLeft16",onClick:function(){Se()}})),!V&&r.createElement(j.default,{title:_l("\u5237\u65B0"),placement:"bottom"},r.createElement(L.Z,{icon:"rotate",className:"Font20 Gray_9e pointer mLeft16",onClick:function(){At(),c&&Jt()}})),!V&&!yn&&r.createElement(j.default,{title:_l("\u7EDF\u8BA1\u8303\u56F4"),placement:"bottom"},r.createElement(L.Z,{icon:"filter",className:N()("Font20 Gray_9e pointer mLeft16",{active:s}),onClick:function(){ge(!s)}})),V&&[fe.f0.PivotTable].includes(S.reportType)&&!Fe().isEmpty(Xn)&&r.createElement(j.default,{title:_l("\u7B49\u5206"),placement:"bottom"},r.createElement(L.Z,{icon:"equal_division",className:"Font20 Gray_9e pointer mLeft16",onClick:function(){Je({style:(0,E.default)({},ga,{pivotTableColumnWidthConfig:void 0})}),sessionStorage.removeItem("pivotTableColumnWidthConfig-"+ln.id)}})),r.createElement(an,{reportId:ln.id,pageId:Gn,sourceType:re,currentReport:x,reportType:S.reportType,map:S.map,valueMap:S.valueMap,reportData:S,onChangeCurrentReport:function(Ga){Je(Ga,!0),c&&Jt()}}))};const Ln=(0,Yt.$j)(function(Ye){var O=Ye.statistics;return(0,E.default)({},Fe().pick(O,["currentReport","reportData","worksheetInfo","base"]))},function(Ye){return(0,qt.DE)(ht,Ye)})(Qn);var hn=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));return s.setDefaultValue=function(c){var g=s.props.displaySetup,x=null;c===fe.f0.BarChart&&(x=(0,E.default)({},g,{isPile:!1,isPerPile:!1})),c===fe.f0.LineChart&&(x=(0,E.default)({},g,{isPile:!1,isAccumulate:!1,isPerPile:!1})),c===fe.f0.FunnelChart&&(x=(0,E.default)({},g,{isAccumulate:!1})),s.props.onUpdateDisplaySetup(x,"default")},s}return(0,J.default)(O,[{key:"getDefaultValue",value:function(s){var c=this.props.displaySetup;if(s===fe.f0.BarChart)return!(c.isPile||c.isPerPile);if(s===fe.f0.LineChart)return!(c.isPile||c.isAccumulate||c.isPerPile);if(s===fe.f0.FunnelChart)return!c.isAccumulate}},{key:"handleCheck",value:function(s,c){var g=this.props.displaySetup,x=null;s==="isPile"||s==="isPerPile"?x=(0,E.default)({},g,{isPile:s==="isPile"?!c:!1,isPerPile:s==="isPerPile"?!c:!1}):x=(0,E.default)({},g,(0,Dr.default)({},s,!c)),this.props.onUpdateDisplaySetup(x,s)}},{key:"render",value:function(){var s=this,c=this.props,g=c.displaySetup,x=c.xAxisisTime,S=c.mapKeys,X=c.reportType,re=c.chartType,ee=c.title,ge=[fe.f0.LineChart,fe.f0.BarChart].includes(X)&&S.length>=2,Se=(X===fe.f0.BarChart||X===fe.f0.LineChart&&g.showChartType===2)&&S.length>=2,Ze=fe.f0.LineChart===X&&x,Je=!ge&&!Se&&!Ze;return r.createElement(r.Fragment,null,ee&&!Je&&r.createElement("div",{className:"mRight10"},ee),r.createElement("div",{className:N()("displaySetup flexRow valignWrapper",{hide:Je})},!Je&&r.createElement("div",{className:N()("item",{active:this.getDefaultValue(X)}),onClick:function(){s.setDefaultValue(X)}},_l("\u9ED8\u8BA4")),ge&&r.createElement("div",{className:N()("item",{active:g.isPile}),onClick:this.handleCheck.bind(this,"isPile",g.isPile)},_l("\u5806\u53E0")),Se&&fe.f0.DualAxes!==re&&r.createElement("div",{className:N()("item",{active:g.isPerPile}),onClick:this.handleCheck.bind(this,"isPerPile",g.isPerPile)},_l("\u767E\u5206\u6BD4")),Ze&&r.createElement("div",{className:N()("item",{active:g.isAccumulate}),onClick:this.handleCheck.bind(this,"isAccumulate",g.isAccumulate)},_l("\u7D2F\u8BA1"))))}}]),O}(r.Component),Ra=function(O){var V=O.settingVisible,s=O.currentReport,c=O.reportData,g=O.changeCurrentReport,x=O.children,S=fe.f0.DualAxes===s.reportType,X=s.xaxes,re=s.displaySetup,ee=s.yreportType,ge=s.sorts,Se=Fe().get(X,["controlType"]),Ze=(0,xe.$$)(Se);return r.createElement("div",{className:"chartHeader mBottom10"},r.createElement("div",{className:"flexRow valignWrapper Font13 Gray_75"},[fe.f0.LineChart,fe.f0.BarChart,fe.f0.FunnelChart,fe.f0.DualAxes].includes(s.reportType)&&V&&r.createElement(r.Fragment,null,r.createElement(hn,{title:S?_l("Y\u8F74(%0)",Fe().find(xe.og,{type:ee||1}).name):null,displaySetup:re,mapKeys:hr()(c.map||[]),reportType:S?ee:c.reportType,xAxisisTime:Ze,onUpdateDisplaySetup:function(At,Jt){Jt==="default"?g({displaySetup:At,sorts:[]},!0):Jt==="isPile"&&!S&&Fe().find(ge,X.controlId)?g({displaySetup:At,sorts:ge.filter(function(Kt){return Fe().findKey(Kt)!==X.controlId})},!0):g({displaySetup:At},!0)},chartType:c.reportType}),s.rightY&&s.rightY.display&&r.createElement(hn,{title:_l("\u8F85\u52A9Y\u8F74(\u6298\u7EBF\u56FE)"),displaySetup:s.rightY.display,mapKeys:hr()(c.contrastMap||[]),reportType:s.rightY.reportType,xAxisisTime:Ze,onUpdateDisplaySetup:function(At){g({rightY:(0,E.default)({},s.rightY,{display:At})})}}))),x)};const ha=(0,Yt.$j)(function(Ye){var O=Ye.statistics;return(0,E.default)({},Fe().pick(O,["currentReport","reportData","base"]))},function(Ye){return(0,qt.DE)(ht,Ye)})(Ra);var Pn=t(49611),ea=t.n(Pn),Tn=t(22177),sn,Da,ia,ka,Sa,Yn=(sn=(0,Yt.$j)(function(Ye){return(0,E.default)({},Fe().pick(Ye.statistics,["currentReport","axisControls","worksheetInfo","reportData","filterItem","detailLoading","loading","base","direction"]))},function(Ye){return(0,qt.DE)(ht,Ye)}),sn(Da=(ka=ia=function(Ye){(0,te.default)(O,Ye);function O(V){(0,me.default)(this,O);var s=(0,T.default)(this,(O.__proto__||i()(O)).call(this,V));Sa.call(s);var c=V.settingVisible,g=V.scopeVisible,x=V.sheetVisible,S=V.report,X=V.worksheetId,re=V.viewId,ee=V.activeData;return s.state={reportId:S.id,worksheetId:X,viewId:re,settingVisible:c,scopeVisible:g,sheetVisible:x,saveLoading:!1,chartIsUnfold:!0,dataIsUnfold:!0,activeData:ee},s}return(0,J.default)(O,[{key:"componentDidMount",value:function(){this.getReportConfigDetail()}},{key:"componentWillUnmount",value:function(){this.props.destroy()}},{key:"componentWillReceiveProps",value:function(s){var c=this.state.activeData;!s.loading&&this.props.loading&&!Fe().isEmpty(c)&&(this.props.requestOriginalData(c),this.setState({activeData:null}))}},{key:"getReportConfigDetail",value:function(s){var c=this.props,g=c.base,x=c.report,S=x===void 0?{}:x,X=c.permissions,re=c.pageId,ee=c.ownerId,ge=c.sourceType,Se=c.filters,Ze=c.filtersGroup,Je=c.linkageFiltersGroup,At=c.customPageConfig,Jt=At===void 0?{}:At,Kt=c.appType,ln=this.state,Gn=ln.reportId,yn=ln.worksheetId,na=ln.viewId,ga=ln.settingVisible,ua=ln.sheetVisible;this.props.changeBase({permissions:X,report:S,sourceType:ge,appType:g.appType||Kt,isPublic:!ee,sheetId:yn,viewId:na,pageId:re,settingVisible:ga,sheetVisible:ua,filters:Se,filtersGroup:Ze,linkageFiltersGroup:Je}),this.props.getReportConfigDetail({reportId:Gn,appId:yn,reportType:s,customPageConfig:Jt})}},{key:"handleUpdateReportType",value:function(s){var c=this.props,g=c.currentReport,x=c.loading;x||s===g.reportType||this.getReportConfigDetail(s)}},{key:"renderHeader",value:function(){var s=this,c=this.props,g=c.report,x=c.permissions,S=c.isCharge,X=c.isLock,re=c.permissionType,ee=c.sourceType,ge=ee===void 0?0:ee,Se=c.currentReport,Ze=c.reportData,Je=c.worksheetInfo,At=c.base,Jt=c.onRemove,Kt=c.ownerId,ln=c.projectId,Gn=c.onCancelFavorite,yn=this.state,na=yn.saveLoading,ga=yn.settingVisible,ua=location.href.includes("public/chart"),Xn=window.shareAuthor||Fe().get(window,"shareState.shareId");return r.createElement("div",{className:"header valignWrapper"},r.createElement(pt,this.props),r.createElement("div",{className:"flexRow valignWrapper settingWrapper"},ga&&r.createElement(k.default,{autoInsertSpaceInButton:!1},r.createElement(oe.default,{className:"buttonSave",block:!0,shape:"round",type:"primary",onClick:this.handleVerifySave},na?r.createElement(m.Z,{size:"small"}):_l("\u4FDD\u5B58"))),!ga&&g.id&&(ge===1?S:x)&&r.createElement(j.default,{title:_l("\u8BBE\u7F6E"),placement:"bottom"},r.createElement(L.Z,{icon:"settings",className:N()("Font20 pointer Gray_9e",{active:ga}),onClick:function(){s.setState({settingVisible:!ga,scopeVisible:!1,sheetVisible:!1},function(){s.props.changeBase({settingVisible:!ga,sheetVisible:!1,reportSingleCacheId:null,apkId:null,match:null}),s.props.getReportData()})}})),!ga&&this.renderChartOperation(),!ga&&!ua&&!Xn&&r.createElement(H.Z,{className:"Gray_9e pointer mLeft16 Font24",reportType:Se.reportType,reportData:Ze,reportStatus:Ze.status,favorite:Ze.favorite,onCancelFavorite:Gn,permissions:x,isCharge:S,isLock:X,permissionType:re,sourceType:ge,isMove:ge?!1:x&&S,report:g,filter:Se.filter,exportData:(0,E.default)({filters:At.filters,filtersGroup:At.filtersGroup,linkageFiltersGroup:At.linkageFiltersGroup,sorts:Se.sorts,particleSizeType:Se.particleSizeType},Se.filter),sheetVisible:At.sheetVisible,projectId:ln,appId:Je.appId,worksheetId:Ze.appId,onRemove:ge?!1:x&&g.id&&Jt,ownerId:Kt}),!ua&&r.createElement(j.default,{title:_l("\u5173\u95ED"),placement:"bottom"},r.createElement(L.Z,{icon:"close",className:"Font24 pointer mLeft16 Gray_9e",onClick:this.handleCancel}))),ua&&r.createElement(ea(),{title:Se.name}))}},{key:"renderCharts",value:function(){var s=this,c=this.props.currentReport,g=c.reportType,x=c.displaySetup;return r.createElement("div",{className:"charts flexRow pLeft20 pRight20"},xe.og.map(function(S,X){return r.createElement(r.Fragment,{key:X},r.createElement("div",{"data-tip":S.name,onClick:function(){S.type===fe.f0.BarChart&&s.props.changeCurrentReport({displaySetup:(0,E.default)({},x,{showChartType:1})}),s.handleUpdateReportType(S.type)},className:N()("chartItem",{active:S.type===fe.f0.BarChart?g===fe.f0.BarChart&&x.showChartType===1:g===S.type})},r.createElement(L.Z,{icon:S.icon})),S.type===fe.f0.BarChart&&r.createElement("div",{"data-tip":_l("\u6A2A\u5411\u67F1\u56FE"),onClick:function(){s.props.changeCurrentReport({displaySetup:(0,E.default)({},x,{showChartType:2})}),g!==fe.f0.BarChart&&s.handleUpdateReportType(S.type)},className:N()("chartItem",{active:g===fe.f0.BarChart&&x.showChartType===2})},r.createElement(L.Z,{icon:"stats_bar_chart1"})))}))}},{key:"renderChart",value:function(){var s=this,c=this.props,g=c.projectId,x=c.base,S=c.isCharge,X=c.themeColor,re=c.customPageConfig,ee=re===void 0?{}:re,ge=this.state,Se=ge.settingVisible,Ze=ge.scopeVisible;return r.createElement(We,{projectId:g,customPageConfig:ee,themeColor:X||Fe().get(jo.Z.getState(),"appPkg.iconColor"),sheetVisible:x.sheetVisible,settingVisible:Se,scopeVisible:Ze,isCharge:S,renderHeaderDisplaySetup:this.renderHeaderDisplaySetup,onChangeSheetVisible:function(At){s.handleChangeSheetVisible(At)}})}},{key:"renderSetting",value:function(){var s=this,c=this.props,g=c.projectId,x=c.reportData,S=c.currentReport,X=c.sourceType,re=c.themeColor,ee=c.customPageConfig,ge=ee===void 0?{}:ee,Se=this.state.chartIsUnfold;return Se?r.createElement("div",{className:"setting flexColumn"},r.createElement("div",{className:"flexColumn pTop20 pBottom20 h100"},r.createElement("div",{className:"flexRow valignWrapper mTop4 mBottom20 pLeft20 pRight20"},r.createElement("div",{className:"Font18 Bold flex"},_l("\u56FE\u8868")),r.createElement(L.Z,{className:"Gray_9e Font18 pointer",icon:"arrow-right-border",onClick:function(){s.setState({chartIsUnfold:!Se})}})),r.createElement(Te.Z,{className:"flex"},this.renderCharts(),r.createElement(Ce.Z,{className:"chartTabs pLeft20 pRight20",defaultActiveKey:"setting"},r.createElement(Ce.Z.TabPane,{tab:_l("\u914D\u7F6E"),key:"setting"},r.createElement(no,{projectId:g})),r.createElement(Ce.Z.TabPane,{tab:_l("\u6837\u5F0F"),key:"style",disabled:x.status<=0},r.createElement(Wa,{projectId:g,sourceType:X,themeColor:re||Fe().get(jo.Z.getState(),"appPkg.iconColor"),customPageConfig:ge})),![fe.f0.GaugeChart,fe.f0.ProgressChart].includes(S.reportType)&&r.createElement(Ce.Z.TabPane,{tab:_l("\u5206\u6790"),key:"analyse",disabled:x.status<=0},r.createElement(n,{sourceType:X,reportId:this.state.reportId})))))):r.createElement("div",{className:"setting flexColumn small"},r.createElement("div",{className:"pAll20"},r.createElement("div",{className:"flexColumn valignWrapper mTop9 mBottom20"},r.createElement(L.Z,{className:"Gray_9e Font18 pointer",icon:"arrow-left-border",onClick:function(){s.setState({chartIsUnfold:!Se})}}),r.createElement("div",{className:"Font18 Bold flex AllBreak mTop15"},_l("\u56FE\u8868")))))}},{key:"renderContent",value:function(){var s=this,c=this.state,g=c.settingVisible,x=c.dataIsUnfold,S=c.reportId,X=c.scopeVisible,re=this.props,ee=re.permissions,ge=re.appId,Se=re.projectId,Ze=re.sourceType,Je=re.ownerId;return r.createElement(Tn.Z,null,this.renderChart(),g&&ee&&r.createElement("div",{className:"ChartDialogSetting flexRow h100"},r.createElement(q.W,{key:"statistics",context:window,backend:K.PD},r.createElement(vt,{dataIsUnfold:x,ownerId:Je,appId:ge,projectId:Se,sourceType:Ze,onChangeDataIsUnfold:function(){s.setState({dataIsUnfold:!x})},onChangeSheetId:function(Jt){var Kt=s.props.reportData.reportType;s.props.changeSheetId(Jt),s.setState({worksheetId:Jt,reportId:null})}}),this.renderSetting())),X&&r.createElement("div",{className:"ChartDialogSetting flexRow h100"},r.createElement(D,{id:S,projectId:Se})))}},{key:"render",value:function(){var s=this.props,c=s.nodialog,g=s.reportData,x=s.detailLoading,S=s.className,X=x||Fe().isEmpty(g)?r.createElement(G.gb,null):this.renderContent();if(c)return r.createElement("div",{className:N()("ChartDialog",S)},this.renderHeader(),r.createElement("div",{className:"flexRow flex overflowHidden"},X));var re={dialogClasses:"ChartDialogContainer",className:N()("ChartDialog",S),okText:_l("\u786E\u8BA4"),width:document.body.clientWidth-64,type:"fixed",visible:!0,overlayClosable:!1,onCancel:this.handleCancel,closable:!1,title:this.renderHeader()};return r.createElement(h.Z,re,X)}}]),O}(r.Component),ia.propTypes={appId:a().string,projectId:a().string,worksheetId:a().string,nodialog:a().bool,settingVisible:a().bool,scopeVisible:a().bool,permissions:a().bool,report:a().shape({}),updateDialogVisible:a().func,onGetReportConfigList:a().func},ia.defaultProps={nodialog:!1,settingVisible:!0,scopeVisible:!1,sheetVisible:!1,permissions:!0},Sa=function(){var O=this;this.handleCancel=function(){var V=O.props.currentReport;O.props.updateDialogVisible({dialogVisible:!1,isRequest:!1,reportName:V.name,reportDesc:V.desc})},this.handleSave=function(){var V=O.props.base.appType,s=(0,xe.GI)(O.props);delete s.filter.filterControls,ye.Z.saveReportConfig((0,E.default)({},s,{appType:V})).then(function(c){var g=O.props.updateDialogVisible;g({dialogVisible:!1,isRequest:!0,reportId:c.reportId,reportName:s.name,reportType:s.reportType,worksheetId:s.appId})})},this.handleVerifySave=function(){var V=O.props.currentReport,s=V.xaxes,c=V.yaxisList,g=V.reportType,x=V.pivotTable;if(!g){alert(_l("\u8BF7\u9009\u62E9\u56FE\u8868\u7C7B\u578B"),2);return}if(g==fe.f0.NumberChart){Fe().isEmpty(c)?alert(_l("\u8BF7\u914D\u7F6E\u7EF4\u5EA6\u540E\u518D\u4FDD\u5B58\u56FE\u8868"),2):O.handleSaveFilter();return}if(g==fe.f0.PivotTable){O.handleSaveFilter();return}else{Fe().isEmpty(c)?alert(_l("\u8BF7\u914D\u7F6E\u7EF4\u5EA6\u548C\u6570\u503C\u540E\u518D\u4FDD\u5B58\u56FE\u8868"),2):O.handleSaveFilter();return}O.handleSaveFilter()},this.handleSaveFilter=function(){var V=O.props,s=V.filterItem,c=V.currentReport,g=V.worksheetInfo,x=c.filter,S=O.props.appId;if(O.setState({saveLoading:!0}),Fe().isEmpty(x.filterId)&&Fe().isEmpty(s)){O.handleSave();return}Eo.Z.saveWorksheetFilter({name:"",type:"",worksheetId:g.worksheetId,items:(0,kr.Gt)(s),filterId:x.filterId,appId:S,module:2}).then(function(X){O.props.changeCurrentReport({filter:(0,E.default)({},x,{filterId:X.filterId})}),O.handleSave()})},this.handleChangeSheetVisible=function(V){O.props.changeBase({sheetVisible:V})},this.renderHeaderDisplaySetup=function(){var V=O.state.settingVisible;return r.createElement(ha,{settingVisible:V},V&&O.renderChartOperation())},this.renderChartOperation=function(){var V=O.props,s=V.sourceType,c=V.base,g=V.direction,x=O.state,S=x.settingVisible,X=x.scopeVisible;return r.createElement(r.Fragment,null,r.createElement(Ln,{sheetVisible:c.sheetVisible,direction:g,settingVisible:S,scopeVisible:X,sourceType:s,onChangeScopeVisible:function(ee){O.setState({scopeVisible:ee})},onChangeSheetVisible:function(){S&&O.props.changeDirection("vertical"),O.handleChangeSheetVisible(!c.sheetVisible)},onChangeDirection:function(){c.sheetVisible?O.props.changeDirection():O.handleChangeSheetVisible(!c.sheetVisible)}}))}},ka))||Da)},75064:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>U});var h=t(63239),Te=t.n(h),C=t(11378),Ce=t(56697),Ne=t(88239),j=t(25130),L=t(64713),I=t(94708),k=t(33867),e=t(31277),oe=t(31929),m=t(52262),y=t(65400),i=t(85105),me=t.n(i),J=t(99663),T=t(22600),te=t(49135),E=t(93196),r=t(67294),R=t(93967),a=t.n(R),z=t(90570),N=t(729),q=t(22013),K=t(96486),ye=t.n(K),v,se,de,U=(se=v=function(pe){(0,E.default)(Y,pe);function Y(be){(0,J.default)(this,Y);var Q=(0,te.default)(this,(Y.__proto__||me()(Y)).call(this,be));de.call(Q);var Le=be.projectId,Be=(0,z.og)(Le),ke=be.currentReport,Ie=ke.style,he=ke.xaxes,Re=he===void 0?{}:he,ue=ke.split,we=ue===void 0?{}:ue,Ee=ke.reportType,b=Ee===z.f0.BarChart,le=Ie||{},ae=le.colorType,ve=le.colorGroupIndex,W=le.colorGroupId,ce=le.customColors,Z=Be[0].colors,_e=Z.map(function(Fe){return Z[0]}),P=JSON.parse(localStorage.getItem("chartCustomColors")),xe=(Re.options||[]).map(function(Fe){return Fe.color}),bt=(we.options||[]).map(function(Fe){return Fe.color}),tt=bt.length?bt:xe;Q.isAlienationColor=(0,N.en)(be.currentReport)||b&&bt.length;var Dt=[1,2].includes(ae)?ae:ye().isEmpty(tt)||!Q.isAlienationColor?1:0,vn=ye().isEmpty(Ie)?1:Dt;return Q.state={type:vn,colorGroupIndex:ve||0,colorGroupId:ve?null:W||Be[0].id,colorIndex:0,customColors:ce||P||_e,controlColors:Q.isAlienationColor?tt:[]},Q.chartColors=Be,Q}return(0,T.default)(Y,[{key:"renderBaseColorFooter",value:function(){var Q=this.props.onCancel;return r.createElement("div",{className:"mTop20 mBottom10 pRight8"},r.createElement(oe.default,{autoInsertSpaceInButton:!1},r.createElement(y.default,{type:"link",onClick:Q},_l("\u53D6\u6D88")),r.createElement(y.default,{type:"primary",onClick:this.handleSave},_l("\u786E\u8BA4"))))}},{key:"renderColorGroup",value:function(Q,Le,Be){var ke=Q.name,Ie=Q.id,he=Q.colors,Re=this,ue=this.state.colorGroupId;return r.createElement("div",{key:Le,className:a()("flexRow valignWrapper colorItem",{active:Ie==ue}),onClick:function(){Re.setState({colorGroupId:Ie})}},r.createElement("div",{className:"flexRow valignWrapper flex wrap"},he.map(function(we,Ee){return r.createElement("div",{key:Ee,className:"item narrow",style:{backgroundColor:we}})})),r.createElement("div",{className:"flexRow valignWrapper"},r.createElement("div",{className:"Font13 mLeft10 colorName"},ke),r.createElement(k.Z,{className:a()("mLeft10 Font20",{Visibility:Ie!==ue}),icon:"done"})))}},{key:"renderColor",value:function(Q,Le){var Be=this,ke=this.state,Ie=ke.customColors,he=ke.colorIndex;return r.createElement("div",{key:Le,className:a()("flexRow valignWrapper colorItem",{active:Le==he}),onClick:function(){Be.setState({colorIndex:Le})}},r.createElement(I.Z,{isPopupBody:!0,value:Q,onChange:function(ue){Be.setState({customColors:Ie.map(function(we,Ee){return Le===Ee?ue:we})})}},r.createElement("div",{className:"item",style:{backgroundColor:Q}})),r.createElement("div",{className:"Font13 mLeft5"},_l("\u8272\u503C%0",Le+1)))}},{key:"render",value:function(){var Q=this,Le=this.props,Be=Le.visible,ke=Le.onCancel,Ie=this.state,he=Ie.type,Re=Ie.customColors,ue=Ie.controlColors,we=!ye().isEmpty(ue),Ee=ye().get(q.Z.getState(),"appPkg.iconColor"),b=this.chartColors.filter(function(ae){return(ae.themeColors||[]).map(function(ve){return ve.toLocaleUpperCase()}).includes(Ee.toLocaleUpperCase())}),le=b.map(function(ae){return ae.id});return r.createElement(Ce.Z,{title:_l("\u56FE\u5F62\u989C\u8272"),width:480,className:"chartModal chartBaseColorModal",visible:Be,centered:!0,destroyOnClose:!0,closeIcon:r.createElement(k.Z,{icon:"close",className:"Font20 pointer Gray_9e"}),footer:this.renderBaseColorFooter(),onCancel:ke},r.createElement("div",{className:"mBottom16"},_l("\u914D\u8272\u65B9\u6848")),r.createElement(L.default.Group,{onChange:this.handleChangeType,value:he},we&&r.createElement(L.default,{value:0},_l("\u9009\u9879\u8272")),r.createElement(L.default,{value:1},_l("\u8272\u677F")),r.createElement(L.default,{value:2},_l("\u81EA\u5B9A\u4E49"))),he===0&&r.createElement("div",{className:"mTop20 Gray_75"},_l("\u9009\u9879\u8272\u662F\u4F7F\u7528\u5DE5\u4F5C\u8868\u8BE5\u9009\u9879\u5B57\u6BB5\u6240\u914D\u7F6E\u7684\u989C\u8272")),he===1&&r.createElement("div",{className:"colorSwatches"},b.map(function(ae,ve){return Q.renderColorGroup((0,Ne.default)({},ae,{id:"adaptThemeColor",name:_l("\u9002\u5E94\u4E3B\u9898")}),ve,!0)}),this.chartColors.filter(function(ae){return!le.includes(ae.id)}).map(function(ae,ve){return Q.renderColorGroup(ae,ve)})),he===2&&r.createElement("div",{className:"colorSwatches"},Re.map(function(ae,ve){return Q.renderColor(ae,ve)})))}}]),Y}(r.Component),de=function(){var Y=this;this.handleSave=function(){var be=Y.props,Q=be.currentReport,Le=be.onChange,Be=Y.state,ke=Be.type,Ie=Be.colorGroupId,he=Be.customColors,Re={colorType:ke,colorGroupIndex:void 0};ke===1?Re.colorGroupId=Ie:(Re.colorGroupId=null,Re.customColors=he,safeLocalStorageSetItem("chartCustomColors",Te()(he))),Le({style:(0,Ne.default)({},Q.style,Re)})},this.handleChangeType=function(be){var Q=be.target.value;Y.setState({type:Q,colorIndex:0})}},se)},60496:(wn,gt,t)=>{"use strict";t.d(gt,{X:()=>R,Y:()=>z});var h=t(67272),Te=t.n(h),C=t(51024),Ce=t(97373),Ne=t.n(Ce),j=t(94055),L=t(34279),I=t.n(L),k=t(64749),e=t(33867),oe=t(85105),m=t.n(oe),y=t(99663),i=t(22600),me=t(49135),J=t(93196),T=t(67294),te=t(93967),E=t.n(te),r=t(729),R=function(N){(0,J.default)(q,N);function q(K){return(0,y.default)(this,q),(0,me.default)(this,(q.__proto__||m()(q)).call(this,K))}return(0,i.default)(q,[{key:"render",value:function(){var ye=this.props,v=ye.smallTitle,se=ye.isPivotTable,de=ye.summary,U=ye.yaxisList,pe=ye.yAxis,Y=ye.extra,be=ye.onChangeSummary;return T.createElement(T.Fragment,null,se&&Y,v&&v,!se&&T.createElement("div",{className:"mBottom16"},T.createElement("div",{className:"mBottom8"},_l("\u663E\u793A\u5B57\u6BB5")),T.createElement(k.default,{className:"chartSelect w100",value:de.controlId,suffixIcon:T.createElement(e.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(Le){be({controlId:Le})}},T.createElement(k.default.Option,{className:"selectOptionWrapper",value:""},_l("\u5168\u90E8")),U.map(function(Q){return T.createElement(k.default.Option,{className:"selectOptionWrapper",key:Q.controlId,value:Q.controlId},Q.controlName)}))),(se?!0:de.controlId)&&T.createElement("div",{className:"mBottom16"},T.createElement("div",{className:"flexRow valignWrapper mBottom8"},T.createElement("div",null,_l("\u6C47\u603B\u65B9\u5F0F")),se&&de.type===5&&T.createElement(j.default,{placement:"bottom",title:_l("\u6C47\u603B\u6309\u7167\u8BA1\u7B97\u65B9\u5F0F\u663E\u793A\uFF0C\u9700\u8981\u8BA1\u7B97\u9009\u62E9\u7684\u5B57\u6BB5\u548C\u6DFB\u52A0\u7684\u8BA1\u7B97\u5B57\u6BB5\u90FD\u663E\u793A\u5728\u900F\u89C6\u8868\u4E2D")},T.createElement(e.Z,{className:"Font15 Gray_9e pointer mLeft5",icon:"info"}))),T.createElement("div",{className:"chartTypeSelect flexRow valignWrapper"},(se&&pe.controlType===10000001?r.Th:r.Th.filter(function(Q){return Q.value!==5})).map(function(Q){return T.createElement("div",{key:Q.value,className:E()("flex centerAlign pointer Gray_75",{active:de.type==Q.value}),onClick:function(){if(se)be({type:Q.value,name:Q.value===1?"":Q.text});else{var Be=r.Th.map(function(ke){return ke.text}).includes(de.name);be({type:Q.value,name:Be?Q.text:de.name})}}},Q.alias||Q.text)}))),T.createElement("div",{className:"mBottom16"},T.createElement("div",{className:"mBottom8"},_l("\u63D0\u793A")),T.createElement(C.default,{value:de.name,className:"chartInput w100",onChange:function(Le){be({name:Le.target.value},!1)}})))}}]),q}(T.Component),a=function(q){if(q==="line"){var K=[{value:1,text:_l("\u4E0A\u65B9")},{value:2,text:_l("\u4E0B\u65B9")}];return K}if(q==="column"){var ye=[{value:3,text:_l("\u5DE6\u4FA7")},{value:4,text:_l("\u53F3\u4FA7")}];return ye}},z=function(q){var K=q.summary,ye=q.locationType,v=q.onChangeSummary;return T.createElement("div",{className:"mBottom16"},T.createElement("div",{className:"mBottom8"},_l("\u4F4D\u7F6E")),T.createElement("div",{className:"chartTypeSelect flexRow valignWrapper"},a(ye).map(function(se){return T.createElement("div",{key:se.value,className:E()("flex centerAlign pointer Gray_75",{active:K.location==se.value}),onClick:function(){v({location:se.value})}},se.text)})))}},66643:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>q});var h=t(34279),Te=t.n(h);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(64749);var Ce=t(10524),Ne=t.n(Ce);if(!/^(1887|7596|7798)$/.test(t.j))var j=t(31059);var L=t(97373),I=t.n(L);if(!/^(1887|7596|7798)$/.test(t.j))var k=t(94055);if(!/^(1887|7596|7798)$/.test(t.j))var e=t(33867);var oe=t(88239),m=t(86735),y=t(67294),i=t(71893),me=t(93967),J=t.n(me);if(!/^(1887|7596|7798)$/.test(t.j))var T=t(46865);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(22013);if(!/^(1887|7596|7798)$/.test(t.j))var E=t(18484);var r=(0,m.Z)([`
  width: 14px;
  height: 14px;
  border-radius: 2px;
  margin-right: 5px;
`],[`
  width: 14px;
  height: 14px;
  border-radius: 2px;
  margin-right: 5px;
`]),R=i.ZP.div(r),a=[{value:1,color:"#E0E0E0",name:_l("\u7B80\u5355"),config:{columnTextColor:"#757575",columnBgColor:"#fafafa",lineTextColor:"#333",lineBgColor:"#fff"}},{value:2,color:"#2196F3",name:_l("\u5546\u52A1"),config:{columnTextColor:"#fff",columnBgColor:"#2196F3",lineTextColor:"#fff",lineBgColor:"#2196F3"}},{value:3,color:"#3E4662",name:_l("\u70AB\u9177"),config:{columnTextColor:"#fff",columnBgColor:"#3E4662",lineTextColor:"#fff",lineBgColor:"#3E4662"}}],z=[{value:1,name:_l("\u81EA\u52A8")},{value:2,name:_l("\u56FA\u5B9A")},{value:3,name:_l("\u767E\u5206\u6BD4")}],N=function(ye){var v=ye.style,se=ye.onChangeStyle,de=ye.customPageConfig,U=v.pivotTableStyle,pe=U===void 0?T.t:U,Y=v.paginationVisible,be=v.paginationSize,Q=be===void 0?20:be,Le=v.pcWidthModel,Be=Le===void 0?1:Le,ke=v.mobileWidthModel,Ie=ke===void 0?1:ke,he=_.get(te.Z.getState().appPkg,"iconColor"),Re=de.pivoTableColor,ue=de.pivoTableColorIndex,we=ue===void 0?1:ue,Ee=function(le,ae){var ve=(0,oe.default)({},pe,le);Re&&(ve.pivoTableColorIndex=we+1),se({pivotTableStyle:ve},ae)};return y.createElement("div",{className:"mBottom16"},y.createElement("div",{className:"mBottom10"},_l("\u9884\u8BBE\u6837\u5F0F")),y.createElement("div",{className:"chartTypeSelect flexRow valignWrapper"},y.createElement("div",{className:"flex centerAlign pointer Gray_75",onClick:function(){var le=(0,E.eO)(he);Ee({columnTextColor:le?"#757575":"#fff",columnBgColor:"themeColor",lineTextColor:le?"#333":"#fff",lineBgColor:"themeColor"})}},y.createElement(R,{style:{backgroundColor:he}}),_l("\u4E3B\u9898")),a.map(function(b){return y.createElement("div",{key:b.value,className:"flex centerAlign pointer Gray_75",onClick:function(){Ee(b.config)}},y.createElement(R,{style:{backgroundColor:b.color}}),b.name)})),y.createElement("div",{className:"mBottom10 mTop16 flexRow valignWrapper"},_l("\u5217\u5BBD\u6A21\u5F0F"),y.createElement(k.default,{title:y.createElement("div",{className:"pTop5 pBottom5"},y.createElement("div",{className:"mBottom2"},_l("\u81EA\u52A8")),y.createElement("div",null,_l("\u6839\u636E\u5185\u5BB9\u957F\u5EA6\u81EA\u52A8\u8BBE\u7F6E\u5217\u5BBD")),y.createElement("div",{className:"mBottom2 mTop10"},_l("\u56FA\u5B9A")),y.createElement("div",null,_l("\u5217\u5BBD\u6309\u56FA\u5B9A\u5BBD\u5EA6\uFF0C\u5F53\u5217\u6570\u8F83\u591A\u65F6\u6A2A\u5411\u6EDA\u52A8\u67E5\u770B")),y.createElement("div",{className:"mBottom2 mTop10"},_l("\u767E\u5206\u6BD4")),y.createElement("div",null,_l("\u5217\u5BBD\u6309\u767E\u5206\u6BD4\uFF0C\u5728\u6240\u6709\u5C3A\u5BF8\u4E0B\u59CB\u7EC8\u5B8C\u6574\u663E\u793A\u6240\u6709\u5217\uFF0C\u9002\u5408\u5217\u6570\u8F83\u5C11\u7684\u60C5\u51B5"))),overlayInnerStyle:{width:300},placement:"bottomRight",arrowPointAtCenter:!0},y.createElement(e.Z,{className:"mLeft10 Gray_9e Font16 pointer",icon:"knowledge-message"}))),y.createElement("div",{className:"mBottom5"},_l("PC")),y.createElement("div",{className:"chartTypeSelect flexRow valignWrapper"},z.map(function(b){return y.createElement("div",{key:b.value,className:J()("flex centerAlign pointer Gray_75",{active:Be===b.value}),onClick:function(){se({pcWidthModel:b.value},!0)}},b.name)})),y.createElement("div",{className:"mBottom5 mTop10"},_l("\u79FB\u52A8")),y.createElement("div",{className:"chartTypeSelect flexRow valignWrapper"},z.map(function(b){return y.createElement("div",{key:b.value,className:J()("flex centerAlign pointer Gray_75",{active:Ie===b.value}),onClick:function(){se({mobileWidthModel:b.value})}},b.name)})),y.createElement("div",{className:"flexRow valignWrapper mTop16"},y.createElement(j.default,{className:"mLeft0",checked:Y,onChange:function(le){se({paginationVisible:le.target.checked})}},_l("\u663E\u793A\u5206\u9875"))),Y&&y.createElement("div",{className:"mTop10 flexRow valignWrapper"},y.createElement("div",{className:"mRight10"},_l("\u9ED8\u8BA4")),y.createElement(C.default,{style:{width:100},className:"chartSelect",value:Q,suffixIcon:y.createElement(e.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(le){se({paginationSize:le})}},[20,25,30,50,100].map(function(b){return y.createElement(C.default.Option,{className:"selectOptionWrapper",key:b,value:b},b)})),y.createElement("div",{className:"mLeft10"},_l("\u6761/\u9875"))),y.createElement("div",{className:"flexRow valignWrapper mTop16"},y.createElement(j.default,{className:"mLeft0",checked:v.pivotTableUnilineShow,onChange:function(le){se({pivotTableUnilineShow:le.target.checked})}},_l("\u5355\u884C\u663E\u793A"))))};const q=/^(1887|7596|7798)$/.test(t.j)?null:N},96661:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>me});var h=t(67272),Te=t.n(h),C=t(51024),Ce=t(10524),Ne=t.n(Ce),j=t(31059),L=t(88239),I=t(85105),k=t.n(I),e=t(99663),oe=t(22600),m=t(49135),y=t(93196),i=t(67294),me=function(J){(0,y.default)(T,J);function T(te){return(0,e.default)(this,T),(0,m.default)(this,(T.__proto__||k()(T)).call(this,te))}return(0,oe.default)(T,[{key:"render",value:function(){var E=this.props,r=E.currentReport,R=E.onChangeCurrentReport,a=r.pivotTable.lines;return i.createElement("div",{className:"mBottom16"},a.slice(1,a.length).map(function(z){return i.createElement("div",{key:z.controlId,className:"mBottom16"},i.createElement(j.default,{className:"mBottom10",checked:z.subTotal,onChange:function(q){R({pivotTable:(0,L.default)({},r.pivotTable,{lines:a.map(function(K){return K.controlId===z.controlId?(0,L.default)({},K,{subTotal:q.target.checked}):K})})},!0)}},z.controlName),i.createElement("div",{className:"mBottom5"},_l("\u540D\u79F0")),i.createElement(C.default,{className:"chartInput",defaultValue:z.subTotalName||_l("\u603B\u8BA1"),onChange:function(q){R({pivotTable:(0,L.default)({},r.pivotTable,{lines:a.map(function(K){return K.controlId===z.controlId?(0,L.default)({},K,{subTotalName:q.target.value}):K})})})}}))}))}}]),T}(i.Component)},41617:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>ue});var h=t(11378),Te=t(56697),C=t(31277),Ce=t(31929),Ne=t(52262),j=t(65400),L=t(34279),I=t(64749),k=t(85175),e=t(20838),oe=t(31546),m=t(54208),y=t(6100),i=t(33867),me=t(88106),J=t(88239),T=t(85105),te=t.n(T),E=t(99663),r=t(22600),R=t(49135),a=t(93196),z=t(86735),N=t(67294),q=t(93967),K=t.n(q),ye=t(45231),v=t(91088),se=t(63239),de=t.n(se),U=t(96486),pe="Integration";const Y={server:function(){return(__api_server__.datapipeline||md.global.Config.DataPipelineUrl)+"/"},ajaxOptions:{url:"",type:"Get",cache:!1,dataType:"json",contentType:"application/json"}};var be={findByFlowId:function(Ee,b){return Y.ajaxOptions.url=Y.server(b)+"syncTask/findByFlowId",Y.ajaxOptions.type="GET",mdyAPI(pe,"syncTaskfindByFlowId",Ee,$.extend(Y,b))},deleteTask:function(Ee,b){return Y.ajaxOptions.url=Y.server(b)+"syncTask/deleteTask",Y.ajaxOptions.type="POST",mdyAPI(pe,"syncTaskdeleteTask",de()(Ee),$.extend(Y,b))},datasourceUseDetails:function(Ee,b){return Y.ajaxOptions.url=Y.server(b)+"syncTask/datasourceUseDetails",Y.ajaxOptions.type="POST",mdyAPI(pe,"syncTaskdatasourceUseDetails",de()(Ee),$.extend(Y,b))},findByName:function(Ee,b){return Y.ajaxOptions.url=Y.server(b)+"syncTask/findByName",Y.ajaxOptions.type="GET",mdyAPI(pe,"syncTaskfindByName",Ee,$.extend(Y,b))},startTask:function(Ee,b){return Y.ajaxOptions.url=Y.server(b)+"syncTask/startTask",Y.ajaxOptions.type="POST",mdyAPI(pe,"syncTaskstartTask",de()(Ee),$.extend(Y,b))},stopAll:function(Ee,b){return Y.ajaxOptions.url=Y.server(b)+"syncTask/stopAll",Y.ajaxOptions.type="POST",mdyAPI(pe,"syncTaskstopAll",de()(Ee),$.extend(Y,b))},createAggTableSyncTaskPreCheck:function(Ee,b){return Y.ajaxOptions.url=Y.server(b)+"syncTask/createAggTableSyncTaskPreCheck",Y.ajaxOptions.type="GET",mdyAPI(pe,"syncTaskcreateAggTableSyncTaskPreCheck",Ee,$.extend(Y,b))},updateSyncTask:function(Ee,b){return Y.ajaxOptions.url=Y.server(b)+"syncTask/updateSyncTask",Y.ajaxOptions.type="POST",mdyAPI(pe,"syncTaskupdateSyncTask",de()(Ee),$.extend(Y,b))},getStatistics:function(Ee,b){return Y.ajaxOptions.url=Y.server(b)+"syncTask/getStatistics",Y.ajaxOptions.type="GET",mdyAPI(pe,"syncTaskgetStatistics",Ee,$.extend(Y,b))},stopTask:function(Ee,b){return Y.ajaxOptions.url=Y.server(b)+"syncTask/stopTask",Y.ajaxOptions.type="POST",mdyAPI(pe,"syncTaskstopTask",de()(Ee),$.extend(Y,b))},list:function(Ee,b){return Y.ajaxOptions.url=Y.server(b)+"syncTask/list",Y.ajaxOptions.type="POST",mdyAPI(pe,"syncTasklist",de()(Ee),$.extend(Y,b))},test:function(Ee,b){return Y.ajaxOptions.url=Y.server(b)+"syncTask/test",Y.ajaxOptions.type="GET",mdyAPI(pe,"syncTasktest",Ee,$.extend(Y,b))},findTaskListByPro:function(Ee,b){return Y.ajaxOptions.url=Y.server(b)+"syncTask/findTaskListByPro",Y.ajaxOptions.type="GET",mdyAPI(pe,"syncTaskfindTaskListByPro",Ee,$.extend(Y,b))},createOnlySyncTaskPreCheck:function(Ee,b){return Y.ajaxOptions.url=Y.server(b)+"syncTask/createOnlySyncTaskPreCheck",Y.ajaxOptions.type="GET",mdyAPI(pe,"syncTaskcreateOnlySyncTaskPreCheck",Ee,$.extend(Y,b))}};const Q=be;var Le=t(15577),Be=t(70973),ke=t(15742),Ie=t(71893),he=(0,z.Z)([`
  .ant-tabs-nav {
    margin-bottom: 0 !important;
    &::before {
      border-bottom: none !important;
    }
  }
  .ant-tabs-content {
    border: 1px solid #ddd;
    border-radius: 4px;
  }
  .searchWrap {
    padding: 12px 10px;
    border-bottom: 1px solid #eaeaea;
    input {
      border: none;
      &::placeholder {
        color: #bdbdbd;
      }
    }
  }
  .workSheetListWrap {
    padding: 6px 0;
    height: 300px;
    overflow-y: auto;
    .sheetItem {
      padding: 10px;
      &:hover {
        background-color: #F5F5F5;
      }
    }
    .svgIconWrap div {
      display: flex;
      align-items: center;
    }
  }
  .viewsWrap {
    .viewItem {
      padding: 7px 20px 7px 32px;
      &.active, &:hover {
        background-color: #F5F5F5;
      }
    }
  }
  .iconWrap {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    justify-content: center;
    background: #f5f5f5;
  }
`],[`
  .ant-tabs-nav {
    margin-bottom: 0 !important;
    &::before {
      border-bottom: none !important;
    }
  }
  .ant-tabs-content {
    border: 1px solid #ddd;
    border-radius: 4px;
  }
  .searchWrap {
    padding: 12px 10px;
    border-bottom: 1px solid #eaeaea;
    input {
      border: none;
      &::placeholder {
        color: #bdbdbd;
      }
    }
  }
  .workSheetListWrap {
    padding: 6px 0;
    height: 300px;
    overflow-y: auto;
    .sheetItem {
      padding: 10px;
      &:hover {
        background-color: #F5F5F5;
      }
    }
    .svgIconWrap div {
      display: flex;
      align-items: center;
    }
  }
  .viewsWrap {
    .viewItem {
      padding: 7px 20px 7px 32px;
      &.active, &:hover {
        background-color: #F5F5F5;
      }
    }
  }
  .iconWrap {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    justify-content: center;
    background: #f5f5f5;
  }
`]),Re=Ie.ZP.div(he),ue=function(we){(0,a.default)(Ee,we);function Ee(b){(0,E.default)(this,Ee);var le=(0,R.default)(this,(Ee.__proto__||te()(Ee)).call(this,b));return le.setViewsData=function(ae,ve){var W=le.state.viewsData;le.setState({viewsData:(0,J.default)({},W,(0,me.default)({},ae,(0,J.default)({},W[ae],ve)))})},le.handleSave=function(){var ae=le.state,ve=ae.viewId,W=ae.newWorksheetId,ce=ae.appType;ve||ve===null?le.props.onChange(W,ve,ce):alert(_l("\u8BF7\u9009\u62E9\u4E00\u4E2A\u89C6\u56FE"),3)},le.state={myApps:[],sheets:[],aggregationSheets:[],searchValue:"",views:b.worksheetInfo.views,viewsData:{},viewId:b.viewId,newWorksheetId:b.worksheetInfo.worksheetId,appType:b.appType},le}return(0,r.default)(Ee,[{key:"componentDidMount",value:function(){var le=this.props.appId;this.getMyApps(),this.getSheets(le)}},{key:"componentWillReceiveProps",value:function(le){}},{key:"getMyApps",value:function(){var le=this,ae=this.props.projectId;v.Z.getAllHomeApp().then(function(ve){var W=[];ae?W=_.flatten(ve.validProject.filter(function(ce){return ce.projectId===ae}).map(function(ce){return ce.projectApps})):W=ve.aloneApps,le.setState({myApps:W.filter(function(ce){return(0,Be.le)(ce.permissionType)&&!ce.isLock}).map(function(ce){return{text:ce.name,value:ce.id}})})})}},{key:"getSheets",value:function(le){var ae=this;v.Z.getWorksheetsByAppId({appId:le,type:0}).then(function(ve){ae.setState({sheets:ve})})}},{key:"getAggregationSheetList",value:function(le){var ae=this,ve=this.props.projectId;Q.list({projectId:ve,appId:le,pageNo:0,pageSize:9999,taskType:1}).then(function(W){var ce=W.content;ae.setState({aggregationSheets:ce.filter(function(Z){return Z.taskStatus==="RUNNING"})})})}},{key:"getWorksheetViews",value:function(le){var ae=this,ve=this.state.viewsData[le]||{},W=ve.views,ce=W===void 0?[]:W,Z=ve.loading,_e=ve.show;if(!Z){if(ce.length){this.setViewsData(le,{show:!_e});return}this.setViewsData(le,{loading:!0}),ye.Z.getWorksheetInfo({worksheetId:le,getViews:!0}).then(function(P){var xe=P.views,bt=xe===void 0?[]:xe;ae.setViewsData(le,{views:bt,show:!0,loading:!1})})}}},{key:"renderWorkSheetItem",value:function(le){var ae=this,ve=this.state,W=ve.newWorksheetId,ce=ve.viewId,Z=ve.viewsData,_e=Z[le.workSheetId]||{},P=_e.views,xe=P===void 0?[]:P,bt=_e.show,tt=_e.loading,Dt=W===le.workSheetId,vn=function(Bt){var kt=ke.B[Bt.viewType||0],Tt=_.find(ke.D,{id:kt})||{},tn=Tt.icon,Vn=Tt.color,Zn=Dt&&ce===Bt.viewId;return N.createElement("div",{className:K()("viewItem pointer flexRow alignItemsCenter",{active:Zn}),key:Bt.viewId,onClick:function(){ae.setState({newWorksheetId:le.workSheetId,viewId:Bt.viewId,appType:1})}},N.createElement(i.Z,{className:K()("Font18 mRight8",{Visibility:Bt.viewId===null}),icon:tn,style:{color:Vn}}),N.createElement("span",{className:K()("flex",{ThemeColor:Zn})},Bt.name),Zn&&N.createElement(i.Z,{className:"ThemeColor Font18",icon:"done"}))};return N.createElement(N.Fragment,{key:le.workSheetId},N.createElement("div",{className:"sheetItem pointer flexRow alignItemsCenter",onClick:function(){ae.getWorksheetViews(le.workSheetId)}},N.createElement(i.Z,{className:"Gray_9e mRight8",icon:bt?"arrow-down":"arrow-right-tip"}),N.createElement(y.Z,{className:"svgIconWrap",url:le.iconUrl,fill:Dt||bt?"#2196f3":"#9e9e9e",size:18}),N.createElement("span",{className:K()("bold mLeft8",{ThemeColor:Dt||bt})},le.workSheetName),tt&&N.createElement(m.Z,{className:"mLeft5",size:"small"})),!!xe.length&&bt&&N.createElement("div",{className:"viewsWrap"},[{name:_l("\u65E0\uFF08\u6240\u6709\u8BB0\u5F55\uFF09"),viewId:null}].concat(xe).map(function(Fe){return vn(Fe)})))}},{key:"renderAggregationSheetItem",value:function(le){var ae=this,ve=this.state.newWorksheetId,W=ve===le.worksheetId;return N.createElement(N.Fragment,{key:le.worksheetId},N.createElement("div",{className:"sheetItem pointer flexRow alignItemsCenter pLeft20",onClick:function(){ae.setState({viewId:null,newWorksheetId:le.worksheetId,appType:2})}},N.createElement(i.Z,{className:"Font20 Gray_9e",icon:"aggregate_table"}),N.createElement("span",{className:K()("bold mLeft8 flex",{ThemeColor:W})},le.name),W&&N.createElement(i.Z,{className:"ThemeColor Font18",icon:"done"})))}},{key:"renderSearch",value:function(){var le=this,ae=this.state.searchValue;return N.createElement("div",{className:"searchWrap flexRow alignItemsCenter"},N.createElement(i.Z,{className:"Font18 Gray_9e mRight3",icon:"search"}),N.createElement("input",{class:"w100",placeholder:_l("\u641C\u7D22"),type:"text",value:ae,onChange:function(W){return le.setState({searchValue:W.target.value})}}))}},{key:"renderContent",value:function(){var le=this,ae=this.props,ve=ae.worksheetInfo,W=ae.appId,ce=ae.projectId,Z=ae.sourceType,_e=ae.ownerId,P=this.state,xe=P.myApps,bt=P.sheets,tt=P.views,Dt=P.newWorksheetId,vn=P.searchValue,Fe=P.viewId,Bt=P.aggregationSheets;return N.createElement("div",null,Z?N.createElement(N.Fragment,null,N.createElement("div",{className:"mBottom10"},_l("\u5E94\u7528")),N.createElement(oe.Z,{isAppendToBody:!0,border:!0,openSearch:!0,className:"w100",menuClass:"statisticsSelectWorksheetDropdownMenu",placeholder:_l("\u8BF7\u9009\u62E9\u4F60\u4F5C\u4E3A\u7BA1\u7406\u5458\u6216\u5F00\u53D1\u8005\u7684\u5E94\u7528"),noData:_l("\u6CA1\u6709\u53EF\u9009\u7684\u5E94\u7528"),defaultValue:W,data:xe,onChange:function(Tt){le.getSheets(Tt)}}),N.createElement(Re,null,N.createElement(e.Z,{className:"mTop10",defaultActiveKey:"1",centered:!0},N.createElement(e.Z.TabPane,{tab:_l("\u5DE5\u4F5C\u8868"),key:"workSheet"},this.renderSearch(),N.createElement("div",{className:"workSheetListWrap"},bt.filter(function(kt){return kt.workSheetName.includes(vn)}).map(function(kt){return le.renderWorkSheetItem(kt)})))))):(ve.worksheetId||Dt)&&N.createElement(N.Fragment,null,N.createElement("div",{className:"mBottom10"},_l("\u89C6\u56FE")),N.createElement(I.default,{className:"chartSelect w100",value:Fe||null,suffixIcon:N.createElement(i.Z,{icon:"expand_more",className:"Gray_9e Font20"}),onChange:function(Tt){le.setState({viewId:Tt})}},!_e&&N.createElement(I.default.Option,{className:"selectOptionWrapper",value:null},_l("\u65E0\uFF08\u6240\u6709\u8BB0\u5F55\uFF09")),(tt||[]).map(function(kt){return N.createElement(I.default.Option,{className:"selectOptionWrapper",key:kt.viewId,value:kt.viewId},(0,Le.T3)(W,kt.viewId).name||kt.name)}))))}},{key:"renderFooter",value:function(){var le=this;return N.createElement("div",{className:"mTop20 mBottom10 pRight8"},N.createElement(Ce.default,{autoInsertSpaceInButton:!1},N.createElement(j.default,{type:"link",onClick:function(){le.props.onChangeDialogVisible(!1)}},_l("\u53D6\u6D88")),N.createElement(j.default,{type:"primary",onClick:this.handleSave},_l("\u786E\u8BA4"))))}},{key:"render",value:function(){var le=this,ae=this.props.dialogVisible;return N.createElement(Te.Z,{title:_l("\u6570\u636E\u6E90"),width:640,className:"chartModal chartSheetModal",visible:ae,centered:!0,destroyOnClose:!0,closeIcon:N.createElement(i.Z,{icon:"close",className:"Font24 pointer Gray_9e"}),footer:this.renderFooter(),onCancel:function(){le.props.onChangeDialogVisible(!1)}},this.renderContent())}}]),Ee}(N.Component)},79790:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>te});var h=t(69288),Te=t(31546),C=t(42185),Ce=t(85105),Ne=t.n(Ce),j=t(99663),L=t(22600),I=t(49135),k=t(93196),e=t(67294),oe=t(93967),m=t.n(oe),y=t(91088),i=t(22013),me=t(70973),J=t(81299),T=function(r,R,a){var z=[],N=r.filter(function(q){return q.projectId===R})[0];return N&&N.projectApps&&N.projectApps.length&&N.projectApps.forEach(function(q){(0,me.le)(q.permissionType)&&!q.isLock&&z.push({text:a===q.id?q.name+" ("+_l("\u672C\u5E94\u7528")+")":q.name,value:q.id})}),z},te=function(E){(0,k.default)(r,E);function r(R){(0,j.default)(this,r);var a=(0,I.default)(this,(r.__proto__||Ne()(r)).call(this,R));return a.state={showSheetMove:!1,appList:[],appValue:"",pages:[],pageValue:""},a}return(0,L.default)(r,[{key:"componentDidMount",value:function(){var a=this,z=this.props.appId,N=i.Z.getState().appPkg.projectId;y.Z.getAllHomeApp().then(function(q){var K=q.validProject,ye=T(K,N,z);a.setState({appList:ye,appValue:z})}),this.handleChangeApp(z)}},{key:"handleOk",value:function(){var a=this.props,z=a.reportId,N=a.pageId,q=a.onSucceed,K=a.onCancel,ye=this.state.pageValue;if(N===ye){alert(_l("\u4E0D\u80FD\u79FB\u52A8\u5230\u5F53\u524D\u9875\u9762"),3),K();return}J.Z.copyReport({reportId:z,sourceType:1,pageId:ye,move:!!N,sourcePageId:N||void 0}).then(function(v){alert(_l("\u64CD\u4F5C\u6210\u529F")),q&&q(v.version)}),K()}},{key:"handleChangeApp",value:function(a){var z=this,N=this.props.pageId;this.setState({appValue:a}),y.Z.getWorksheetsByAppId({appId:a,type:1}).then(function(q){q=q.filter(function(K){return!K.urlTemplate}).map(function(K){return{text:K.workSheetName,value:K.workSheetId}}),z.setState({pages:q,pageValue:q.length?N||q[0].value:""})})}},{key:"renderFooter",value:function(){var a=this.state.pageValue;return e.createElement("div",null,e.createElement(C.ZP,{type:"link",onClick:this.props.onCancel},_l("\u53D6\u6D88")),e.createElement(C.ZP,{type:"primary",onClick:this.handleOk.bind(this),disabled:!a,className:m()({"Button--disabled":!a})},_l("\u786E\u8BA4")))}},{key:"render",value:function(){var a=this,z=this.props,N=z.pageId,q=z.dialogClasses,K=this.state,ye=K.appList,v=K.appValue,se=K.pages,de=K.pageValue;return e.createElement(h.Z,{dialogClasses:q,className:"PageMove",visible:!0,anim:!1,title:N?_l("\u79FB\u52A8\u5230\u81EA\u5B9A\u4E49\u9875\u9762"):_l("\u590D\u5236\u5230\u81EA\u5B9A\u4E49\u9875\u9762"),width:560,onCancel:this.props.onCancel,footer:this.renderFooter()},e.createElement("div",{className:"flexRow valignWrapper mTop25"},e.createElement("span",{className:"Gray_75 mRight10 TxtRight name"},_l("\u5E94\u7528")),e.createElement(Te.Z,{border:!0,isAppendToBody:!0,menuClass:"sheetMoveApp",className:m()("flex",{empty:!v}),value:v,data:ye,onChange:function(pe){a.handleChangeApp(pe)}})),e.createElement("div",{className:"flexRow valignWrapper mTop15"},e.createElement("span",{className:"Gray_75 mRight10 TxtRight name"},_l("\u9875\u9762")),e.createElement(Te.Z,{disabled:!v,placeholder:_l("\u8BF7\u9009\u62E9\u9875\u9762"),isAppendToBody:!0,className:m()("flex",{empty:!de}),border:!0,value:de,data:se,onChange:function(pe){a.setState({pageValue:pe})}})))}}]),r}(e.Component)},32069:(wn,gt,t)=>{"use strict";t.d(gt,{Fk:()=>E});var h=t(16469),Te=t(86735),C=t(71893),Ce=(0,Te.Z)([`
  .ant-table-thead > tr > th {
    background: #fff !important;
    color: #333333;
    font-size: 13px;
    font-weight: normal;
    &:not(:last-child):not(.ant-table-selection-column):not(.ant-table-row-expand-icon-cell):not([colspan])::before {
      display: none;
    }
  }
  .ant-switch-checked {
    background-color: rgba(40, 202, 131, 1);
  }
`],[`
  .ant-table-thead > tr > th {
    background: #fff !important;
    color: #333333;
    font-size: 13px;
    font-weight: normal;
    &:not(:last-child):not(.ant-table-selection-column):not(.ant-table-row-expand-icon-cell):not([colspan])::before {
      display: none;
    }
  }
  .ant-switch-checked {
    background-color: rgba(40, 202, 131, 1);
  }
`]),Ne=(0,Te.Z)([`
  cursor: pointer;
  display: inline-block;
  width: 34px;
  height: 34px;
  background: #fff;
  opacity: 1;
  border-radius: 17px;
  line-height: 34px;
  &:hover {
    background: #f7f7f7;
  }
  margin-left: 8px;
`],[`
  cursor: pointer;
  display: inline-block;
  width: 34px;
  height: 34px;
  background: #fff;
  opacity: 1;
  border-radius: 17px;
  line-height: 34px;
  &:hover {
    background: #f7f7f7;
  }
  margin-left: 8px;
`]),j=(0,Te.Z)([`
  background: #2196f3;
  &:hover {
    background: #1764c0;
  }
`],[`
  background: #2196f3;
  &:hover {
    background: #1764c0;
  }
`]),L=(0,Te.Z)([`
  .Item-content {
    padding-left: 47px !important;
  }
`],[`
  .Item-content {
    padding-left: 47px !important;
  }
`]),I=(0,Te.Z)([`
  .Item-content {
    color: #f44336 !important;
    .Icon {
      color: #f44336 !important;
    }
  }
  &:not(.disabled):hover {
    .Icon {
      color: #fff !important;
    }
  }
`],[`
  .Item-content {
    color: #f44336 !important;
    .Icon {
      color: #f44336 !important;
    }
  }
  &:not(.disabled):hover {
    .Icon {
      color: #fff !important;
    }
  }
`]),k=(0,Te.Z)([`
  .btn {
    padding: 0 32px;
    background: #2196f3;
    color: #fff;
    line-height: 36px;
    border-radius: 3px;
    &:hover {
      background: #1764c0;
    }
    &.disable {
      opacity: 0.5;
    }
  }
  .cancel {
    color: #757575;
    margin-right: 52px;
    &:hover {
      color: #2196f3;
    }
    padding: 8px 32px;
  }
`],[`
  .btn {
    padding: 0 32px;
    background: #2196f3;
    color: #fff;
    line-height: 36px;
    border-radius: 3px;
    &:hover {
      background: #1764c0;
    }
    &.disable {
      opacity: 0.5;
    }
  }
  .cancel {
    color: #757575;
    margin-right: 52px;
    &:hover {
      color: #2196f3;
    }
    padding: 8px 32px;
  }
`]),e=(0,Te.Z)([`
   {
    padding: 24px;
    align-items: center;
    .iconCon {
      width: 44px;
      height: 44px;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      position: relative;
      .iconParam {
        color: #757575;
      }
      &.isEdit {
        .iconParam {
          color: #2196f3;
        }
        border: 1px solid #2196f3;
      }
      .tip {
        position: absolute;
        font-size: 20px;
        left: -10px;
        top: -10px;
      }
    }
    .btn {
      padding: 0 20px;
      margin-right: 12px;
      line-height: 26px;
      color: #2196f3;
      border: 1px solid #2196f3;
      border-radius: 26px;
      height: 28px;
      &:hover {
        color: rgba(23, 100, 192, 1);
        border: 1px solid rgba(23, 100, 192, 1);
      }
    }
  }
`],[`
   {
    padding: 24px;
    align-items: center;
    .iconCon {
      width: 44px;
      height: 44px;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      position: relative;
      .iconParam {
        color: #757575;
      }
      &.isEdit {
        .iconParam {
          color: #2196f3;
        }
        border: 1px solid #2196f3;
      }
      .tip {
        position: absolute;
        font-size: 20px;
        left: -10px;
        top: -10px;
      }
    }
    .btn {
      padding: 0 20px;
      margin-right: 12px;
      line-height: 26px;
      color: #2196f3;
      border: 1px solid #2196f3;
      border-radius: 26px;
      height: 28px;
      &:hover {
        color: rgba(23, 100, 192, 1);
        border: 1px solid rgba(23, 100, 192, 1);
      }
    }
  }
`]),oe=(0,Te.Z)([`
  background: #ffffff;
  border-radius: 18px;
  color: #bdbdbd;
  padding: 8px 12px;
  margin: 0 auto;
  &:hover {
    color: #2196f3;
  }
`],[`
  background: #ffffff;
  border-radius: 18px;
  color: #bdbdbd;
  padding: 8px 12px;
  margin: 0 auto;
  &:hover {
    color: #2196f3;
  }
`]),m=C.ZP.div(Ce),y=C.ZP.div(function(R){var a=R.width;return`
  text-align: center;
  position: relative;
  overflow: hidden;
  width: `+(a||48)+`px;
  height: `+(a||48)+`px;
  min-width: `+(a||48)+`px;
  background: #ffffff;
  opacity: 1;
  border-radius: 8px;
  color: #bdbdbd;
  svg,
  .ming {
    display: inline-block;
  }
  .bg {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    opacity: 0.08;
    z-index: 0;
  }
`}),i=C.ZP.div(Ne),me=C.ZP.div(j),J=(0,C.ZP)(h.Z)(L),T=(0,C.ZP)(J)(I),te=C.ZP.div(k),E=C.ZP.div(e),r=C.ZP.div(oe)},36574:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>k}),!/^(1887|7596|7798)$/.test(t.j))var h=t(69288);if(!/^(1887|7596|7798)$/.test(t.j))var Te=t(3540);var C=t(12424),Ce=t(86735),Ne=t(67294),j=t(71893),L=(0,Ce.Z)([`
  .title {
    font-size: 20px;
    font-weight: bold;
    margin-bottom: 10px;
  }
`],[`
  .title {
    font-size: 20px;
    font-weight: bold;
    margin-bottom: 10px;
  }
`]),I=j.ZP.div(L);function k(e){var oe=e.name,m=e.onCancel,y=e.onChange,i=e.title,me=e.deduplication,J=e.list,T=(0,Ne.useState)(oe),te=(0,C.Z)(T,2),E=te[0],r=te[1];return Ne.createElement(h.Z,{visible:!0,title:i||_l("\u91CD\u547D\u540D"),onCancel:m,onOk:function(){var a=E.trim();if(me&&J.find(function(z){return z.alias===a}))return alert(_l("\u540D\u79F0\u91CD\u590D\uFF0C\u8BF7\u4FEE\u6539\u540E\u63D0\u4EA4"),3);y(E.trim()),m()}},Ne.createElement(I,null,Ne.createElement(Te.Z,{className:"w100",value:E,onChange:r,autoFocus:!0})))}},32415:(wn,gt,t)=>{"use strict";t.d(gt,{E0:()=>I,Q:()=>y});var h=t(30381),Te=t.n(h),C=[{type:"connect",txt:_l("API \u5E93"),icon:"connect"},{type:"connectList",txt:_l("\u6211\u7684\u8FDE\u63A5"),icon:"workflow_webhook"}],Ce=[{type:"dataConnect",txt:_l("\u8FDE\u63A5\u5668"),icon:"add_circle_outline"},{type:"source",txt:_l("\u6570\u636E\u6E90"),icon:"storage"},{type:"task",txt:_l("\u540C\u6B65\u4EFB\u52A1"),icon:"synchronization"}],Ne=[].concat(C,Ce),j=30,L=[{typeId:23,title:_l("\u8F93\u5165\u53C2\u6570"),des:_l("\u8F93\u5165\u53C2\u6570\u7528\u4E8E\u5728\u5DE5\u4F5C\u8868\u6216\u5DE5\u4F5C\u6D41\u4E2D\u4F7F\u7528 API \u67E5\u8BE2\u65F6\uFF0C\u53EF\u4EE5\u4F20\u5165\u52A8\u6001\u503C"),icon:"input",support:"https://help.mingdao.com/integration/api#enter-parameters"},{typeId:8,title:_l("API \u8BF7\u6C42\u53C2\u6570"),des:_l("\u914D\u7F6E\u53D1\u9001 API \u8BF7\u6C42\u65F6\u9700\u8981\u7684 Query Param\u3001Header\u3001Body \u7B49\u8BF7\u6C42\u53C2\u6570"),icon:"tune",support:"https://help.mingdao.com/integration/api#api-request"},{typeId:21,title:_l("\u8F93\u51FA\u53C2\u6570"),des:_l("\u5728 API \u67E5\u8BE2\u65F6\uFF0C\u53EF\u4EE5\u5C06\u8F93\u51FA\u53C2\u6570\u7684\u503C\u7ED1\u5B9A\u5230\u5DE5\u4F5C\u8868\u5B57\u6BB5\u6216\u88AB\u5DE5\u4F5C\u6D41\u8282\u70B9\u5F15\u7528"),icon:"output",support:"https://help.mingdao.com/integration/api#output-parameters"}],I=[{name:_l("Basic Auth \u8BA4\u8BC1"),actionId:"521",appType:31},{name:_l("OAuth 2.0 \u8BA4\u8BC1\uFF08\u5BA2\u6237\u7AEF\u51ED\u8BC1\uFF09"),actionId:"522",appType:32},{name:_l("API Key \u6216\u65E0\u9700\u9274\u6743"),actionId:"520",appType:30}],k=[{txt:_l("\u4F7F\u7528 Javascript \u8BED\u8A00"),actionId:"102",typeId:14,name:"JavaScript"},{txt:_l("\u4F7F\u7528 Python \u8BED\u8A00"),actionId:"103",typeId:14,name:"Python"}],e={0:_l("\u521B\u5EFA"),1:_l("\u66F4\u65B0\u672A\u53D1\u5E03"),2:_l("\u53D1\u5E03"),3:_l("\u5173\u95ED")},oe=function(J){return moment(J).format("YYYY-MM-DD")===moment().format("YYYY-MM-DD")?_l("\u4ECA\u5929")+" "+moment(J).format("HH:mm"):new Date(moment().format("YYYY-MM-DD"))-new Date(moment(J).format("YYYY-MM-DD"))===24*60*60*1e3?_l("\u6628\u5929")+" "+moment(J).format("HH:mm"):moment(J).format("YYYY")===moment().format("YYYY")?moment(J).format("MMMDo HH:mm"):moment(J).format("YYYY-MM-DD HH:mm")},m=function(J,T){return(J.match(/\$[^ \r\n]+?\$/g)||[]).forEach(function(te){J=J.replace(te,T[te]||"")}),J},y=function(J){if(J){var T=void 0;return J.length===5?T=J.substr(0,4)+"*":J.length>5?T=J.substr(0,4)+"************"+J.substr(-4,4):T=J,T}},i=[{type:"task",txt:_l("\u4EFB\u52A1")},{type:"disposition",txt:_l("\u914D\u7F6E")},{type:"monitor",txt:_l("\u76D1\u63A7")}]},12387:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>a}),!/^(1887|7596|7798)$/.test(t.j))var h=t(12692);if(!/^(1887|7596|7798)$/.test(t.j))var Te=t(3540);var C=t(34279),Ce=t.n(C);if(!/^(1887|7596|7798)$/.test(t.j))var Ne=t(64749);var j=t(88106),L=t(12424),I=t(63239),k=t.n(I),e=t(69288),oe=t(86735),m=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(93002);var i=t(71893);if(!/^(1887|7596|7798)$/.test(t.j))var me=t(95248);var J=t(96486),T=t.n(J),te=(0,oe.Z)([`
  .mui-dialog-desc {
    font-size: 13px !important;
    padding-top: 8px !important;
  }
  .mui-dialog-body {
    padding-top: 12px !important;
  }
`],[`
  .mui-dialog-desc {
    font-size: 13px !important;
    padding-top: 8px !important;
  }
  .mui-dialog-body {
    padding-top: 12px !important;
  }
`]),E=(0,oe.Z)([`
  margin-bottom: 24px;
  .labelText {
    font-weight: 500;
    margin-bottom: 10px;
    .requiredStar {
      color: #f44336;
      margin-left: -4px;
    }
  }
  .ming.Input {
    font-size: 13px;
  }
  .Width60 {
    width: 60px;
  }
  .selectItem {
    width: 100% !important;
    font-size: 13px;
    .ant-select-selector {
      min-height: 36px;
      padding: 2px 11px !important;
      border: 1px solid #ccc !important;
      border-radius: 3px !important;
      box-shadow: none !important;
    }
    &.ant-select-focused {
      .ant-select-selector {
        border-color: #1e88e5 !important;
      }
    }
  }
`],[`
  margin-bottom: 24px;
  .labelText {
    font-weight: 500;
    margin-bottom: 10px;
    .requiredStar {
      color: #f44336;
      margin-left: -4px;
    }
  }
  .ming.Input {
    font-size: 13px;
  }
  .Width60 {
    width: 60px;
  }
  .selectItem {
    width: 100% !important;
    font-size: 13px;
    .ant-select-selector {
      min-height: 36px;
      padding: 2px 11px !important;
      border: 1px solid #ccc !important;
      border-radius: 3px !important;
      box-shadow: none !important;
    }
    &.ant-select-focused {
      .ant-select-selector {
        border-color: #1e88e5 !important;
      }
    }
  }
`]),r=(0,i.ZP)(e.Z)(te),R=i.ZP.div(E);function a(z){var N=z.onClose,q=z.latestVersion,K=q===void 0?"":q,ye=z.debugConfiguration,v=z.pluginId,se=z.commitId,de=z.onRefreshDetail,U=z.source,pe=U===void 0?0:U,Y=T().isEmpty(ye)?"":k()(ye),be=(0,m.useState)([]),Q=(0,L.Z)(be,2),Le=Q[0],Be=Q[1],ke=(0,y.Z)({configuration:Y,commitId:se}),Ie=(0,L.Z)(ke,2),he=Ie[0],Re=Ie[1],ue=(0,y.Z)({loading:!0,pageIndex:1,noMore:!1}),we=(0,L.Z)(ue,2),Ee=we[0],b=we[1],le=(0,m.useRef)();(0,m.useEffect)(function(){if(K){var Z=K.split(".");Re({v1:parseInt(Z[0]),v2:parseInt(Z[1]),v3:parseInt(Z[2])+1})}else Re({v1:0,v2:0,v3:1})},[]),(0,m.useEffect)(function(){ae()},[Ee.pageIndex]);var ae=function(){Ee.loading&&me.Z.getCommitHistory({id:v,pageSize:50,pageIndex:Ee.pageIndex,source:pe}).then(function(_e){_e&&(b({loading:!1,noMore:_e.history.length<50}),Be(Ee.pageIndex>1?Le.concat(_e.history):_e.history))})},ve=function(_e,P){if(!_e){Re((0,j.default)({},P,""));return}Re((0,j.default)({},P,isNaN(parseInt(_e))?0:parseInt(_e)))},W=function(){var _e=he.v1*100+he.v2*10+he.v3,P=parseInt(K.split(".")[0])*100+parseInt(K.split(".")[1])*10+parseInt(K.split(".")[2]);if(!he.commitId){alert(_l("\u8BF7\u9009\u62E9\u4E00\u4E2A\u5DF2\u63D0\u4EA4\u7684\u4EE3\u7801"),3);return}if(!_e||T().includes([he.v1,he.v2,he.v3],"")){alert(_l("\u8BF7\u6B63\u786E\u586B\u5199\u7248\u672C\u53F7"),3);return}if(K&&_e<=P){alert(_l("\u7248\u672C\u53F7\u5FC5\u987B\u5927\u4E8E"+K),3);return}if(!he.description){alert(_l("\u53D1\u5E03\u8BF4\u660E\u4E0D\u80FD\u4E3A\u7A7A"),3);return}if(he.configuration.replace(/\s/g,"")&&he.configuration.replace(/\s/g,"")!=="{}"&&T().isEmpty(safeParse(he.configuration))){alert(_l("\u53D1\u5E03\u914D\u7F6E\u683C\u5F0F\u4E0D\u6B63\u786E,\u8BF7\u8F93\u5165JSON\u683C\u5F0F"),3);return}return!0},ce=function(){W()&&me.Z.release({id:he.commitId,versionCode:[he.v1,he.v2,he.v3].join("."),description:he.description,configuration:safeParse(he.configuration),pluginSource:pe,pluginId:v}).then(function(_e){_e&&(alert(_l("\u53D1\u5E03\u6210\u529F")),de(),N())})};return m.createElement(r,{visible:!0,width:800,title:_l("\u53D1\u5E03\u65B0\u7248\u672C\u5230\u7EC4\u7EC7"),description:_l("\u9009\u62E9\u4E00\u4E2A\u672A\u53D1\u5E03\u7684\u63D0\u4EA4\uFF0C\u5C06\u63D2\u4EF6\u53D1\u5E03\u4E3A\u6B63\u5F0F\u7248\u672C\u3002\u53D1\u5E03\u540E\u8BE5\u63D2\u4EF6\u5C06\u5728\u672C\u7EC4\u7EC7\u4E0B\u6B63\u5F0F\u751F\u6548\uFF0C\u7EC4\u7EC7\u5185\u6240\u6709\u5E94\u7528\u5747\u53EF\u88AB\u6388\u6743\u4F7F\u7528\u8BE5\u63D2\u4EF6\u3002"),onOk:ce,onCancel:N},m.createElement(R,null,m.createElement("div",{className:"labelText"},m.createElement("span",{className:"requiredStar"},"*"),_l("\u9009\u62E9\u5DF2\u63D0\u4EA4\u7684\u4EE3\u7801")),m.createElement(Ne.default,{className:"selectItem",options:Le.map(function(Z){return{label:m.createElement("span",null,Z.author.fullname+"\uFF0C"+Z.commitTime+" "+(Z.message||"")),value:Z.id}}),notFoundContent:_l("\u6682\u65E0\u5DF2\u63D0\u4EA4\u7684\u4EE3\u7801"),value:he.commitId,onChange:function(_e){return Re({commitId:_e})},onPopupScroll:function(_e){_e.target&&_e.target.scrollTop+_e.target.offsetHeight===_e.target.scrollHeight&&b({loading:!0,pageIndex:Ee.pageIndex+1})}})),m.createElement(R,null,m.createElement("div",{className:"labelText"},m.createElement("span",{className:"requiredStar"},"*"),_l("\u7248\u672C\u53F7")),m.createElement(Te.Z,{className:"Width60",maxLength:3,value:he.v1,onChange:function(_e){return ve(_e,"v1")}}),m.createElement("span",{className:"mLeft2 mRight2"},"."),m.createElement(Te.Z,{className:"Width60",maxLength:3,value:he.v2,onChange:function(_e){return ve(_e,"v2")}}),m.createElement("span",{className:"mLeft2 mRight2"},"."),m.createElement(Te.Z,{className:"Width60",maxLength:3,value:he.v3,onChange:function(_e){return ve(_e,"v3")}}),!!K&&m.createElement("span",{className:"Gray_75 mLeft12"},_l("\u7248\u672C\u53F7\u5FC5\u987B\u5927\u4E8E\uFF1A")+K)),m.createElement(R,null,m.createElement("div",{className:"labelText"},m.createElement("span",{className:"requiredStar"},"*"),_l("\u53D1\u5E03\u8BF4\u660E")),m.createElement(Te.Z,{className:"w100",value:he.description,onChange:function(_e){return Re({description:_e})}})),m.createElement(R,null,m.createElement("div",{className:"labelText"},_l("\u53D1\u5E03\u7ED9\u5176\u4ED6\u7528\u6237\u65F6\u7684\u9ED8\u8BA4\u73AF\u5883\u53C2\u6570\u914D\u7F6E,\u91C7\u7528JSON\u683C\u5F0F")),m.createElement(h.Z,{height:180,getRef:function(_e){return le.current=_e},defaultValue:Y,codeMirrorMode:"javascript",onChange:function(_e,P){Re({configuration:P})}}),m.createElement("div",{className:"mTop12 InlineBlock pointer Gray_75 Hover_21",onClick:function(){le.current.setValue(Y),Re({configuration:Y})}},_l("\u91CD\u65B0\u8F7D\u5165\u5F00\u53D1\u65F6\u7684\u73AF\u5883\u53C2\u6570\u914D\u7F6E"))))}},26226:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>q}),!/^(1887|7596|7798)$/.test(t.j))var h=t(69288);if(!/^(1887|7596|7798)$/.test(t.j))var Te=t(60967);var C=t(12424),Ce=t(95679),Ne=t(62745),j=t(88106),L=t(52945),I=t.n(L),k=t(97373),e=t.n(k),oe=t(94055),m=t(86735),y=t(67294),i=t(95742),me=t(71893),J=t(96486),T=t.n(J),te=(0,m.Z)([`
  .Radio-text {
    display: none;
  }
  .Radio-box {
    margin-right: 0 !important;
  }
  .icon-delete2 {
    &:hover {
      color: #f44336 !important;
    }
  }
`],[`
  .Radio-text {
    display: none;
  }
  .Radio-box {
    margin-right: 0 !important;
  }
  .icon-delete2 {
    &:hover {
      color: #f44336 !important;
    }
  }
`]),E=(0,m.Z)([`
  display: inline-block;
  height: 32px;
  line-height: 32px;
  border: 1px solid #ddd;
  border-radius: 4px;
  padding: 0 20px;
  background: #f5f5f5;
  cursor: pointer;
  color: #757575;
  &:hover {
    border-color: #2196f3;
  }
`],[`
  display: inline-block;
  height: 32px;
  line-height: 32px;
  border: 1px solid #ddd;
  border-radius: 4px;
  padding: 0 20px;
  background: #f5f5f5;
  cursor: pointer;
  color: #757575;
  &:hover {
    border-color: #2196f3;
  }
`]),r=me.ZP.div(te),R=me.ZP.div(E),a=(0,i.W6)(function(){return y.createElement(oe.default,{title:_l("\u62D6\u62FD\u8C03\u6574\u6392\u5E8F")},y.createElement("i",{className:"icon-drag Font16 Gray_9e ThemeHoverColor3",style:{cursor:"move"}}))}),z=(0,i.W8)(function(K){var ye=K.data,v=K.items,se=K.sourceKey,de=K.item,U=K.currentIndex,pe=K.setData;return y.createElement(r,{className:"flexRow mTop12 alignItemsCenter"},y.createElement(a,null),y.createElement(Ne.Z,{className:"flex mLeft10 Font13",style:{paddingTop:7,paddingBottom:7},minHeight:0,maxHeight:120,value:de.value,onChange:function(be){return pe(I()({},ye,(0,j.default)({},se,v.map(function(Q,Le){return Le===U&&(Q.value=be),Q}))))}}),y.createElement(oe.default,{title:_l("\u8BBE\u4E3A\u9ED8\u8BA4\u503C")},y.createElement("div",{className:"mLeft15"},y.createElement(Ce.Z,{className:"mRight0",checked:de.selected,onClick:function(){return pe(I()({},ye,(0,j.default)({},se,v.map(function(be,Q){return be.selected=Q===U?!de.selected:!1,be}))))}}))),y.createElement(oe.default,{title:_l("\u5220\u9664")},y.createElement("i",{className:"icon-delete2 Font16 Gray_9e pointer mLeft10",onClick:function(){var be=T().cloneDeep(v);T().remove(be,function(Q,Le){return Le===U}),pe(I()({},ye,(0,j.default)({},se,be)))}})))}),N=(0,i.JN)(function(K){var ye=K.data,v=K.items,se=K.sourceKey,de=K.setData;return y.createElement("ul",null,v.map(function(U,pe){return y.createElement(z,{key:pe,index:pe,data:ye,items:v,sourceKey:se,item:U,currentIndex:pe,setData:de})}))});const q=function(K){var ye=K.title,v=K.description,se=K.keys,de=K.opinionTemplate,U=K.onSave,pe=K.onClose,Y=(0,y.useState)(de.inputType),be=(0,C.Z)(Y,2),Q=be[0],Le=be[1],Be=(0,y.useState)(de.opinions),ke=(0,C.Z)(Be,2),Ie=ke[0],he=ke[1],Re=function(){var we=!1;return se.forEach(function(Ee){var b=Ee.key;Ie[b]&&Ie[b].filter(function(le){return!!le.value.trim()}).length&&(we=!0)}),Q!==1&&!we};return y.createElement(h.Z,{visible:!0,width:640,className:"workflowDialogBox workflowSettings",style:{overflow:"initial"},overlayClosable:!1,type:"scroll",title:ye,description:v,okDisabled:Re(),onOk:function(){var we={};se.forEach(function(Ee){var b=Ee.key;we[b]=(Ie[b]||[]).map(function(le){return le.value=le.value.trim(),le}).filter(function(le){return!!le.value})}),U({inputType:Q,opinions:we}),pe()},onCancel:pe},y.createElement("div",{className:"Bold"},_l("\u8F93\u5165\u65B9\u5F0F")),y.createElement("div",{className:"mTop10 flexRow"},y.createElement(Te.Z,{className:"InlineFlex",checked:Q===1,text:_l("\u7528\u6237\u81EA\u7531\u8F93\u5165"),onClick:function(we){return Le(we?2:1)}})),se.map(function(ue,we){return y.createElement(y.Fragment,{key:we},y.createElement("div",{className:"mTop25 bold"},ue.text),Ie[ue.key]&&!!Ie[ue.key].length&&y.createElement(N,{useDragHandle:!0,helperClass:"zIndex99999",onSortEnd:function(b){var le=b.oldIndex,ae=b.newIndex;he(I()({},Ie,(0,j.default)({},ue.key,(0,i.Rp)(Ie[ue.key],le,ae))))},data:Ie,items:Ie[ue.key],sourceKey:ue.key,setData:he}),y.createElement("div",{className:"mTop15"},y.createElement(R,{onClick:function(){return he(I()({},Ie,(0,j.default)({},ue.key,(Ie[ue.key]||[]).concat({selected:!1,value:""}))))}},"+ ",_l("\u6A21\u677F"))))}))}},24488:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>z});var h=t(33867),Te=t(88106),C=t(85105),Ce=t.n(C),Ne=t(99663),j=t(22600),L=t(49135),I=t(93196),k=t(67294),e=t(93967),oe=t.n(e),m=t(45697),y=t.n(m),i=t(15405),me=t(33126),J=t(72078),T=t(5618),te=t(96486),E=t.n(te),r,R,a=(0,me.Z)(i.Z),z=(R=r=function(N){(0,I.default)(q,N);function q(K){(0,Ne.default)(this,q);var ye=(0,L.default)(this,(q.__proto__||Ce()(q)).call(this,K));return ye.handleClick=function(v){ye.state.activeIndex===v&&(v=-1),ye.setState({activeIndex:v}),ye.search&&ye.search.focus()},ye.state={activeIndex:K.condition.length>1?-1:0,keywords:""},ye}return(0,j.default)(q,[{key:"componentWillReceiveProps",value:function(ye){ye.condition.length!==this.props.condition.length&&this.setState({activeIndex:ye.condition.length>1?-1:0})}},{key:"render",value:function(){var ye=this,v=this.props,se=v.header,de=v.footer,U=v.className,pe=v.style,Y=v.onClose,be=v.noItemTips,Q=v.noData,Le=v.onClickAwayExceptions,Be=v.openSearch,ke=v.title,Ie=v.handleFieldClick,he=this.state,Re=he.activeIndex,ue=he.keywords,we=E().cloneDeep(this.props.condition);return we.forEach(function(Ee){Ee.items=Ee.items.filter(function(b){return b.text.toLowerCase().indexOf(ue.toLowerCase())>-1})}),we=we.filter(function(Ee){return Ee.items.length}),k.createElement(a,{style:pe,className:oe()("startConditionWrap",(0,Te.default)({},U,U)),onClickAwayExceptions:Le,onClickAway:Y},k.createElement("div",{className:"conditionWrapContent"},ke&&k.createElement("div",{className:"pLeft16 pRight16 mTop15"},ke),se&&se,Be&&k.createElement("div",{className:"flexRow mTop5 mBottom5",style:{padding:"0 16px 0 14px",height:36,alignItems:"center",borderBottom:"1px solid #e0e0e0"}},k.createElement("i",{className:"icon-search Gray_75 Font14"}),k.createElement("input",{type:"text",ref:function(b){ye.search=b},autoFocus:!0,className:"mLeft5 flex Border0 placeholderColor Gray",placeholder:_l("\u641C\u7D22\u6D41\u7A0B\u8282\u70B9\u5BF9\u8C61\u4E0B\u7684\u5B57\u6BB5"),onChange:function(b){return ye.setState({keywords:b.target.value.trim()})}})),k.createElement("div",{className:oe()("conditionWrap",{"pTop6 pBottom6":we.length||Q||ue})},k.createElement("div",{className:"conditionScrollWrap"},!we.length&&ue&&k.createElement("div",{className:"conditionDetail flexRow Gray_9e"},_l("\u65E0\u641C\u7D22\u7ED3\u679C")),!we.length&&Q&&!ue&&k.createElement("div",{className:"conditionDetail flexRow Gray_9e"},Q),we.map(function(Ee,b){return k.createElement("div",{key:b,className:"conditionBox"},k.createElement("div",{className:oe()("conditionDetail flexRow ThemeHoverColor3",{ThemeColor3:b===Re&&!ue}),onClick:function(){return!ue&&ye.handleClick(b)}},k.createElement(h.Z,{icon:Ee.isSourceApp?"workflow_field":(0,J.wu)(Ee.nodeTypeId,Ee.appType,Ee.actionId).replace("icon-",""),className:"Gray_9e"}),k.createElement("div",{className:"flex mLeft10 ellipsis"},Ee.isSourceApp?_l("\u9009\u62E9\u6620\u5C04\u5B57\u6BB5"):Ee.text),E().includes([T.IF.SHEET,T.IF.CUSTOM_ACTION,T.IF.WORKSHEET_LOG],Ee.appType)&&k.createElement("div",{className:"mLeft15 mRight10 Gray_9e ellipsis",style:{maxWidth:150}},Ee.appTypeName+"\u201C"+Ee.appName+"\u201D"),k.createElement(h.Z,{icon:b===Re||ue?"arrow-up-border":"arrow-down-border",className:"mLeft10 Gray_9e"})),k.createElement("ul",{className:oe()("conditionFieldBox",{show:b===Re||ue})},!Ee.items.length&&k.createElement("li",{className:"flexRow conditionFieldNull Gray_9e"},k.createElement("div",{className:"ellipsis"},be)),Ee.items.map(function(le,ae){return k.createElement("li",{className:"flexRow ThemeHoverBGColor3",key:ae,onClick:function(W){W.stopPropagation(),Ie({nodeId:Ee.id,fieldValueId:le.value,nodeName:Ee.text,fieldValueName:le.text,fieldValueType:le.type,nodeTypeId:Ee.nodeTypeId,appType:Ee.appType,actionId:Ee.actionId,isSourceApp:Ee.isSourceApp,nAlias:Ee.nAlias,cAlias:le.cAlias,sourceType:le.sourceType})}},k.createElement("div",{className:"ellipsis"},k.createElement("span",{className:"field"},"["+le.field+"]"),k.createElement("span",{title:le.text},le.text)))})))}))),de&&de))}}]),q}(k.Component),r.propTypes={className:y().string,style:y().object,title:y().string,header:y().node,footer:y().node,noItemTips:y().string,noData:y().string,condition:y().arrayOf(y().shape({text:y().string,id:y().string,nodeTypeId:y().number,appName:y().any,appType:y().number,appTypeName:y().any,actionId:y().string,nAlias:y().any,items:y().arrayOf(y().shape({type:y().number,value:y().string,field:y().string,text:y().string,cAlias:y().any,sourceType:y().any}).isRequired).isRequired}).isRequired).isRequired,handleFieldClick:y().func,onClose:y().func,onClickAwayExceptions:y().array,openSearch:y().bool},r.defaultProps={onClickAwayExceptions:[]},R)},3495:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>Ce}),!/^(1887|7596|7798)$/.test(t.j))var h=t(33867);if(!/^(1887|7596|7798)$/.test(t.j))var Te=t(60967);var C=t(67294);const Ce=function(Ne){var j=Ne.checked,L=Ne.fields,I=Ne.index,k=Ne.updateSource;return C.createElement(C.Fragment,null,C.createElement(Te.Z,{checked:j,text:_l("\u5141\u8BB8\u65B0\u589E\u9009\u9879"),onClick:function(oe){return k({fields:L.map(function(m,y){return y===I&&(m.allowAddOptions=!oe),m})})}}),C.createElement("span",{className:"mLeft5 Gray_9e workflowDetailTipsWidth tip-bottom-left","data-tip":_l("\u52FE\u9009\u540E\uFF0C\u5982\u679C\u6D41\u7A0B\u8282\u70B9\u5BF9\u8C61\u7684\u503C\u4E0D\u5728\u5907\u9009\u9879\u4E2D\uFF0C\u53EF\u4EE5\u5C06\u5176\u81EA\u52A8\u6DFB\u52A0\u81F3\u9009\u9879\u5217\u8868")},C.createElement(h.Z,{icon:"workflow_help",className:"Font16",style:{verticalAlign:"text-top"}})))}},90144:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>v});var h=t(97373),Te=t.n(h);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(94055);if(!/^(1887|7596|7798)$/.test(t.j))var Ce=t(60967);if(!/^(1887|7596|7798)$/.test(t.j))var Ne=t(31546);var j=t(88106),L=t(52945),I=t.n(L);if(!/^(1887|7596|7798)$/.test(t.j))var k=t(33867);var e=t(88902),oe=t.n(e),m=t(12424),y=t(86735),i=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var me=t(53943);if(!/^(1887|7596|7798)$/.test(t.j))var J=t(66057);if(!/^(1887|7596|7798)$/.test(t.j))var T=t(70221);var te=t(93967),E=t.n(te),r=t(96486),R=t.n(r),a=t(71893);if(!/^(1887|7596|7798)$/.test(t.j))var z=t(5618);if(!/^(1887|7596|7798)$/.test(t.j))var N=t(93618);if(!/^(1887|7596|7798)$/.test(t.j))var q=t(61987);var K=(0,y.Z)([`
  display: inline-flex;
  padding: 0 12px 12px 12px;
  margin-right: 36px;
  font-weight: bold;
  font-size: 15px;
  cursor: pointer;
  position: relative;
  &.active {
    &::before {
      position: absolute;
      bottom: -2px;
      left: 0;
      right: 0;
      content: '';
      height: 0;
      border-bottom: 3px solid #2196f3;
    }
  }
`],[`
  display: inline-flex;
  padding: 0 12px 12px 12px;
  margin-right: 36px;
  font-weight: bold;
  font-size: 15px;
  cursor: pointer;
  position: relative;
  &.active {
    &::before {
      position: absolute;
      bottom: -2px;
      left: 0;
      right: 0;
      content: '';
      height: 0;
      border-bottom: 3px solid #2196f3;
    }
  }
`]),ye=a.ZP.div(K);const v=function(se){var de=se.companyId,U=se.processId,pe=se.data,Y=se.updateSource,be=se.cacheKey,Q=(0,i.useState)(1),Le=(0,m.Z)(Q,2),Be=Le[0],ke=Le[1],Ie=(0,i.useState)(!!pe.processConfig.requiredIds.length),he=(0,m.Z)(Ie,2),Re=he[0],ue=he[1],we=[{text:_l("\u81EA\u52A8\u8FDB\u5165\u4E0B\u4E00\u4E2A\u8282\u70B9"),value:4},{text:_l("\u7531\u6D41\u7A0B\u62E5\u6709\u8005\u4EE3\u7406"),value:2},{text:_l("\u7531\u6307\u5B9A\u4EBA\u5458\u4EE3\u7406"),value:5},{text:_l("\u6D41\u7A0B\u7ED3\u675F"),value:3}],Ee=[{text:_l("\u6D41\u7A0B\u8BBE\u7F6E"),value:1},{text:_l("\u6570\u636E\u66F4\u65B0"),value:2}],b=[{text:_l("\u53D1\u8D77\u4EBA\u65E0\u9700\u5BA1\u6279\u81EA\u52A8\u901A\u8FC7"),key:"startEventPass"},{text:_l("\u5DF2\u5BA1\u6279\u8FC7\u7684\u5BA1\u6279\u4EBA\u81EA\u52A8\u901A\u8FC7"),key:"userTaskPass"}],le=pe.processConfig.initiatorMaps?parseInt(oe()(pe.processConfig.initiatorMaps)[0]):0,ae=function(ce,Z){(0,q.ZP)(ce.target,{offset:{top:10,left:0},projectId:de,unique:!0,filterAll:!0,filterFriend:!0,filterOthers:!0,filterOtherProject:!0,onSelect:function(P){Z(P.map(function(xe){return{type:z.$A.USER,entityId:"",entityName:"",roleId:xe.accountId,roleName:xe.fullname,avatar:xe.avatar}}))}})},ve=pe.processConfig.revokeFlowNodes.filter(function(W){return W.typeId===z.QZ.APPROVAL}).map(function(W){return{text:W.name,value:W.id,disabled:R().includes(pe.processConfig.requiredIds,W.id)}});return(0,i.useEffect)(function(){ue(!!pe.processConfig.requiredIds.length)},[be]),i.createElement(i.Fragment,null,i.createElement("div",{className:"Font13 mTop20 bold"},_l("\u53D1\u8D77\u4EBA\u4E3A\u7A7A\u65F6"),i.createElement("span",{className:"workflowDetailTipsWidth mLeft5 tip-bottom-right","data-tip":_l("\u8BBE\u7F6E\u53D1\u8D77\u4EBA\u4E3A\u7A7A\u65F6\u7684\u5904\u7406\u65B9\u5F0F\u3002\u5F53\u8BBE\u4E3A\u81EA\u52A8\u8FDB\u884C\u4E0B\u4E00\u8282\u70B9\u65F6\uFF0C\u5982\u679C\u9000\u56DE\u5230\u6D41\u7A0B\u53D1\u8D77\u8282\u70B9\uFF0C\u4E5F\u4F1A\u81EA\u52A8\u7531\u4E0B\u4E00\u4E2A\u8282\u70B9\u8FDB\u884C\u5904\u7406")},i.createElement(k.Z,{className:"Font16 Gray_9e",icon:"info"}))),i.createElement(Ne.Z,{className:"flowDropdown mTop10",data:we,value:le||void 0,border:!0,placeholder:_l("\u6D41\u7A0B\u7ED3\u675F"),onChange:function(ce){return Y({processConfig:I()({},pe.processConfig,{initiatorMaps:(0,j.default)({},ce,[])})})}}),le===2&&!pe.processConfig.agents.length&&i.createElement("div",{className:"Gray_75 mTop5"},_l("\u5F53\u524D\u6D41\u7A0B\u8FD8\u6CA1\u6709\u6D41\u7A0B\u62E5\u6709\u8005\uFF0C\u8BF7\u5728 \u6D41\u7A0B\u53D1\u8D77\u8282\u70B9 \u4E2D\u914D\u7F6E")),le===5&&i.createElement("div",{className:"flexRow alignItemsCenter"},i.createElement("div",{className:"mRight10 mTop12"},_l("\u4EE3\u7406\u4EBA")),i.createElement(N.Z,{companyId:de,leastOne:!0,accounts:pe.processConfig.initiatorMaps[le]}),i.createElement("div",{className:E()("Gray_c ThemeHoverColor3 mTop12 pointer",{mLeft8:pe.processConfig.initiatorMaps[le].length}),style:{height:28},onClick:function(ce){return ae(ce,function(Z){Y({processConfig:I()({},pe.processConfig,{initiatorMaps:(0,j.default)({},le,Z)})})})}},i.createElement("i",{className:E()("Font28",pe.processConfig.initiatorMaps[le].length?"icon-add-member3":"icon-task-add-member-circle")}))),i.createElement("div",{className:"mTop25",style:{borderBottom:"1px solid #ddd"}},Ee.map(function(W){return i.createElement(ye,{key:W.value,className:E()("pointerEventsAuto",{active:W.value===Be}),onClick:function(){return ke(W.value)}},W.text)})),Be===1&&i.createElement(i.Fragment,null,i.createElement("div",{className:"Font13 mTop20"},i.createElement("span",{className:"bold"},_l("\u6D41\u7A0B\u62E5\u6709\u8005")),i.createElement("span",{className:"Gray_9e"},_l("\uFF08\u4EE3\u7406\u5BA1\u6279\u6D41\u7A0B\u4E2D\u8D1F\u8D23\u4EBA\u4E3A\u7A7A\u65F6\u7684\u53D1\u8D77\u3001\u5BA1\u6279\u3001\u586B\u5199\u8282\u70B9\uFF09"))),i.createElement("div",{className:"flexRow alignItemsCenter"},i.createElement(N.Z,{companyId:de,leastOne:!0,accounts:pe.processConfig.agents}),i.createElement("div",{className:E()("Gray_c ThemeHoverColor3 mTop12 pointer",{mLeft8:pe.processConfig.agents.length}),style:{height:28},onClick:function(ce){return ae(ce,function(Z){Y({processConfig:I()({},pe.processConfig,{agents:Z})})})}},i.createElement("i",{className:E()("Font28",pe.processConfig.agents.length?"icon-add-member3":"icon-task-add-member-circle")}))),i.createElement("div",{className:"Font13 mTop20 bold"},_l("\u81EA\u52A8\u901A\u8FC7\uFF08\u9ED8\u8BA4\u8BBE\u7F6E\uFF09")),b.map(function(W,ce){return i.createElement("div",{key:ce,className:"flexRow mTop15 alignItemsCenter"},i.createElement(Ce.Z,{text:W.text,checked:pe.processConfig[W.key],onClick:function(_e){return Y({processConfig:I()({},pe.processConfig,(0,j.default)({},W.key,!_e))})}}))}),(pe.processConfig.startEventPass||pe.processConfig.userTaskPass)&&i.createElement("div",{className:"mTop15 mLeft25"},i.createElement("div",{className:"Gray_75"},_l("\u4EE5\u4E0B\u60C5\u51B5\u4E0D\u81EA\u52A8\u901A\u8FC7")),i.createElement("div",{className:"flexRow mTop15 alignItemsCenter"},i.createElement(Ce.Z,{text:_l("\u5FC5\u586B\u5B57\u6BB5\u4E3A\u7A7A\u65F6"),checked:pe.processConfig.required,onClick:function(ce){return Y({processConfig:I()({},pe.processConfig,{required:!ce})})}}),i.createElement("span",{className:"workflowDetailTipsWidth mLeft5","data-tip":_l("\u52FE\u9009\u540E\uFF0C\u5F53\u6709\u5FC5\u586B\u5B57\u6BB5\u4E3A\u7A7A\u65F6\u4E0D\u81EA\u52A8\u901A\u8FC7\uFF0C\u4ECD\u9700\u8FDB\u884C\u5BA1\u6279\u64CD\u4F5C\u3002")},i.createElement(k.Z,{icon:"info",className:"Gray_9e Font16 TxtTop InlineBlock mTop3"}))),i.createElement("div",{className:"flexRow mTop15 alignItemsCenter"},i.createElement(Ce.Z,{text:_l("\u8BBE\u7F6E\u4E3A\u5FC5\u987B\u5BA1\u6279\u7684\u8282\u70B9"),checked:Re,onClick:function(ce){ue(!ce),ce&&Y({processConfig:I()({},pe.processConfig,{requiredIds:[]})})}})),Re&&i.createElement(Ne.Z,{className:"flowDropdown flowDropdownMoreSelect mTop10",menuStyle:{width:"100%"},data:ve,value:pe.processConfig.requiredIds.length||void 0,border:!0,openSearch:!0,renderTitle:function(){return!!pe.processConfig.requiredIds.length&&i.createElement("ul",{className:"tagWrap"},pe.processConfig.requiredIds.map(function(ce){var Z=R().find(pe.processConfig.revokeFlowNodes,function(_e){return _e.id===ce});return i.createElement("li",{key:ce,className:E()("tagItem flexRow",{error:!Z})},i.createElement(C.default,{title:Z?null:"ID\uFF1A"+ce},i.createElement("span",{className:"tag"},Z?Z.name:_l("\u8282\u70B9\u5DF2\u5220\u9664"))),i.createElement("span",{className:"delTag",onClick:function(P){P.stopPropagation();var xe=[].concat(pe.processConfig.requiredIds);R().remove(xe,function(bt){return bt===ce}),Y({processConfig:I()({},pe.processConfig,{requiredIds:xe})})}},i.createElement(k.Z,{icon:"close",className:"pointer"})))}))},onChange:function(ce){Y({processConfig:I()({},pe.processConfig,{requiredIds:pe.processConfig.requiredIds.concat(ce)})}),ue(!0)}})),i.createElement(T.Z,{hideGoToSettings:!0,projectId:de,appId:se.relationType===2?se.relationId:"",processId:pe.processConfig.agents.length?"":U,title:_l("\u5BA1\u6279/\u586B\u5199\u4EBA\u4E3A\u7A7A\u65F6\uFF08\u9ED8\u8BA4\u8BBE\u7F6E\uFF09"),titleInfo:_l("\u8BBE\u7F6E\u8282\u70B9\u8D1F\u8D23\u4EBA\u4E3A\u7A7A\u65F6\u7684\u9ED8\u8BA4\u5904\u7406\u65B9\u5F0F\uFF0C\u5728\u6BCF\u4E2A\u8282\u70B9\u4E2D\u4E5F\u53EF\u5355\u72EC\u8BBE\u7F6E\u3002"),userTaskNullMap:pe.processConfig.userTaskNullMaps,updateSource:function(ce){return Y({processConfig:I()({},pe.processConfig,{userTaskNullMaps:ce})})}})),Be===2&&i.createElement(i.Fragment,null,pe.flowNodeMap?i.createElement(i.Fragment,null,i.createElement("div",{className:"Font13 bold mTop25"},_l("\u56DE\u5230\u53D1\u8D77\u8282\u70B9\u65F6")),i.createElement("div",{className:"Font13 Gray_9e mTop10"},_l("\u5F53\u6D41\u7A0B\u9000\u56DE\u81F3\u6B64\u8282\u70B9\u65F6\u89E6\u53D1\u66F4\u65B0")),i.createElement(me.Z,{type:1,companyId:se.companyId,processId:se.processId,relationId:se.relationId,selectNodeId:se.selectNodeId,nodeId:pe.flowNodeMap[z.fh.BEFORE].selectNodeId,controls:pe.flowNodeMap[z.fh.BEFORE].controls.filter(function(W){return W.type!==29}),fields:pe.flowNodeMap[z.fh.BEFORE].fields,showCurrent:!0,formulaMap:pe.flowNodeMap[z.fh.BEFORE].formulaMap,updateSource:function(ce){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};return Y({flowNodeMap:I()({},pe.flowNodeMap,(0,j.default)({},z.fh.BEFORE,I()({},pe.flowNodeMap[z.fh.BEFORE],ce)))},Z)}}),i.createElement(J.Z,se)):i.createElement("div",{className:"mTop25 Gray_9e"},_l("\u8282\u70B9\u5F02\u5E38\uFF0C\u65E0\u6CD5\u914D\u7F6E"))))}},1003:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>r});var h=t(12692),Te=t(85105),C=t.n(Te),Ce=t(99663),Ne=t(22600),j=t(49135),L=t(93196),I=t(67294),k=t(45697),e=t.n(k),oe=t(29440),m=t(42424),y=t(93967),i=t.n(y),me=t(96486),J=t.n(me),T=t(72078),te,E,r=(E=te=function(R){(0,L.default)(a,R);function a(){var z,N,q,K;(0,Ce.default)(this,a);for(var ye=arguments.length,v=Array(ye),se=0;se<ye;se++)v[se]=arguments[se];return K=(N=(q=(0,j.default)(this,(z=a.__proto__||C()(a)).call.apply(z,[this].concat(v))),q),q.state={fieldsVisible:!1},N),(0,j.default)(q,K)}return(0,Ne.default)(a,[{key:"componentDidMount",value:function(){this.props.getRef(this.tagtextarea)}},{key:"componentDidUpdate",value:function(N,q){if(this.tagtextarea&&N.content!==this.props.content){var K=this.tagtextarea.cmObj.getCursor();this.tagtextarea.setValue(this.props.content),this.tagtextarea.cmObj.setCursor(K)}}},{key:"render",value:function(){var N=this,q=this.props,K=q.projectId,ye=q.processId,v=q.relationId,se=q.selectNodeId,de=q.sourceAppId,U=q.isIntegration,pe=q.type,Y=q.height,be=q.content,Q=q.formulaMap,Le=q.onFocus,Be=q.onChange,ke=q.updateSource,Ie=q.operatorsSetMargin,he=q.className,Re=this.state.fieldsVisible;return I.createElement("div",{className:"flexRow mTop10 relative"},I.createElement(h.Z,{className:i()("flex",he,{smallPadding:Y===0&&be&&be.match(/\$[\w]+-[\w]+\$/g)}),height:Y,defaultValue:be||"",operatorsSetMargin:Ie,getRef:function(we){N.tagtextarea=we},onFocus:Le,renderTag:function(we,Ee){var b=we.split(/([a-zA-Z0-9#]{24,32})-/).filter(function(ve){return ve}),le=Q[b[0]]||{},ae=Q[b.join("-")]||{};return I.createElement(m.Z,{flowNodeType:le.type,appType:le.appType,actionId:le.actionId,nodeName:(0,T.iQ)(b[0],ae.sourceType,le.name),controlId:b[1],controlName:ae.name||""})},onChange:Be}),I.createElement(oe.Z,{item:{type:pe},fieldsVisible:Re,projectId:K,processId:ye,relationId:v,selectNodeId:se,sourceAppId:de,isIntegration:U,handleFieldClick:function(we){var Ee=J().cloneDeep(Q);Ee[we.nodeId]={type:we.nodeTypeId,appType:we.appType,actionId:we.actionId,name:we.nodeName},Ee[we.nodeId+"-"+we.fieldValueId]={type:we.fieldValueType,name:we.fieldValueName,sourceType:we.sourceType},ke({formulaMap:Ee},function(){N.tagtextarea.insertColumnTag(we.nodeId+"-"+we.fieldValueId)})},openLayer:function(){return N.setState({fieldsVisible:!0})},closeLayer:function(){return N.setState({fieldsVisible:!1})}}))}}]),a}(I.Component),te.propTypes={projectId:e().string,processId:e().string,relationId:e().string,selectNodeId:e().string,sourceAppId:e().string,isIntegration:e().bool,type:e().number,height:e().number,content:e().string,formulaMap:e().object,getRef:e().func,onFocus:e().func,onChange:e().func,updateSource:e().func,operatorsSetMargin:e().bool,className:e().string},te.defaultProps={getRef:function(){},onFocus:function(){},operatorsSetMargin:!1,sourceAppId:"",isIntegration:!1,className:""},E)},82370:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>e}),!/^(1887|7596|7798)$/.test(t.j))var h=t(31546);var Te=t(52945),C=t.n(Te),Ce=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var Ne=t(5618);if(!/^(1887|7596|7798)$/.test(t.j))var j=t(46665);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(90890);var I=t(96486),k=t.n(I);const e=function(oe){var m=oe.projectId,y=oe.processId,i=oe.relationId,me=oe.selectNodeId,J=oe.data,T=oe.text,te=oe.minDate,E=oe.onChange,r=[{text:Ne.rO[Ne.uK.MINUTE],value:Ne.uK.MINUTE},{text:Ne.rO[Ne.uK.HOUR],value:Ne.uK.HOUR},{text:Ne.rO[Ne.uK.DAY],value:Ne.uK.DAY}];return J.type===1?Ce.createElement("div",{className:"flexRow alignItemsCenter mTop10"},T&&Ce.createElement("div",{className:"mRight10"},T),Ce.createElement("div",{className:"flex"},Ce.createElement(L.Z,{projectId:m,processId:y,relationId:i,selectNodeId:me,type:"number",min:1,allowedEmpty:!0,data:J.executeTime,updateSource:function(a){return E(C()({},J,{executeTime:a}))}})),Ce.createElement(h.Z,{className:"mLeft10",style:{width:100},data:r,value:J.unit,border:!0,onChange:function(a){E(C()({},J,{unit:a}))}})):Ce.createElement("div",{className:"flexRow alignItemsCenter mTop10"},Ce.createElement("div",{className:"flex"},Ce.createElement(L.Z,{projectId:m,processId:y,relationId:i,selectNodeId:me,type:"date",timePicker:!0,minDate:te,data:J.executeTime,updateSource:function(a){return E(C()({},J,{executeTime:a,dayTime:a.fieldControlType===15?"08:00":""}))}})),J.executeTime&&!!J.executeTime.fieldControlType&&J.executeTime.fieldControlType===15&&Ce.createElement(Ce.Fragment,null,Ce.createElement("div",{className:"mLeft10"},_l("\u7684")),Ce.createElement("div",{className:"mLeft10",style:{width:100}},Ce.createElement(j.Z,{type:"minute",value:{hour:J.dayTime?parseInt(J.dayTime.split(":")[0]):8,minute:J.dayTime?parseInt(J.dayTime.split(":")[1]):0,second:0},onChange:function(a,z){E(C()({},J,{dayTime:z.hour.toString().padStart(2,"0")+":"+z.minute.toString().padStart(2,"0")}))}}))))}},93618:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>a});var h=t(88106),Te=t(97373),C=t(94055),Ce=t(31546),Ne=t(15759),j=t(85105),L=t.n(j),I=t(99663),k=t(22600),e=t(49135),oe=t(93196),m=t(67294),y=t(93967),i=t.n(y),me=t(5618),J=t(42424),T=t(96486),te=t.n(T),E=t(72078),r=t(14467),R=t(27749),a=function(z){(0,oe.default)(N,z);function N(){var q,K,ye,v;(0,I.default)(this,N);for(var se=arguments.length,de=Array(se),U=0;U<se;U++)de[U]=arguments[U];return v=(K=(ye=(0,e.default)(this,(q=N.__proto__||L()(N)).call.apply(q,[this].concat(de))),ye),ye.removeMember=function(pe){var Y=te().cloneDeep(ye.props.accounts);te().remove(Y,function(be,Q){return Q===pe}),ye.props.updateSource({accounts:Y})},ye.selectJob=function(pe){var Y=ye.props.companyId;(0,r.Z)({projectId:Y,overlayClosable:!1,unique:!0,onSave:function(Q){var Le=te().cloneDeep(ye.props.accounts);Le[pe].extensionId=Q[0].jobId,Le[pe].extensionName=Q[0].jobName,ye.props.updateSource({accounts:Le})}})},ye.selectOrgRole=function(pe){var Y=ye.props.companyId;(0,R.Z)({projectId:Y,unique:!0,onSave:function(Q){var Le=te().cloneDeep(ye.props.accounts);Le[pe].extensionId=Q[0].organizeId,Le[pe].extensionName=Q[0].organizeName,ye.props.updateSource({accounts:Le})}})},K),(0,e.default)(ye,v)}return(0,k.default)(N,[{key:"renderUser",value:function(K){var ye=this.props,v=ye.chatButton,se=v===void 0?!0:v,de=ye.companyId;return m.createElement("div",{className:"flexRow flowDetailMemberBox"},m.createElement(Ne.Z,{projectId:de,user:{userHead:K.avatar,accountId:K.roleId},size:26,chatButton:se}),m.createElement("div",{className:"mLeft6 ellipsis bold"},K.roleName))}},{key:"renderRole",value:function(K){var ye=this.props.appId;return m.createElement("div",{className:"flexRow flowDetailMemberBox"},m.createElement("span",{className:i()("flowDetailMemberIcon icon-group-members bd")}),m.createElement("div",{className:i()("mLeft6 ellipsis bold",{delete:!K.roleName&&!K.entityName})},!K.roleName&&!K.entityName?_l("\u89D2\u8272\u5DF2\u5220\u9664"):K.roleName+(ye!==K.entityId?"\uFF08"+K.entityName+"\uFF09":"")))}},{key:"renderControl",value:function(K,ye){var v=this,se=this.props.removeOrganization,de=[[{text:me.gq[11],value:11},{text:K.controlType!==27?me.gq[12]:me.qe[12],value:12},{text:K.controlType!==27?me.gq[13]:me.qe[13],value:13},{text:K.controlType!==27?me.gq[14]:me.qe[14],value:14},{text:m.createElement("span",null,K.controlType!==27?me.gq[15]:me.qe[15],this.renderOrgRoleInfo()),value:15}],[{text:_l("\u79FB\u9664"),value:0}]];return K.roleTypeId||te().remove(de,function(U,pe){return pe===1}),K.controlType===27&&de.forEach(function(U){te().remove(U,function(pe){return pe.value===11})}),m.createElement(m.Fragment,null,m.createElement(J.Z,{flowNodeType:K.flowNodeType,appType:K.appType,actionId:K.actionId,nodeName:(0,E.iQ)(K.entityId,K.sourceType,K.entityName),controlId:K.roleId,controlName:K.roleName}),(K.controlType===26||K.controlType===27||K.controlType===10000001||K.controlType===10000002)&&!!K.entityName&&!!K.roleName&&!se&&m.createElement(m.Fragment,null,m.createElement(Ce.Z,{className:i()("flowDetailOrganize",{organizeTransform:K.roleTypeId}),data:de,value:K.roleTypeId,isAppendToBody:!0,menuStyle:{width:"auto !important"},border:!0,renderTitle:function(){return v.renderOrganize(K.controlType,K.roleTypeId)},onChange:function(pe){return v.onChange(pe,ye)}}),te().includes([14,15],K.roleTypeId)&&this.renderExtensionInfo(K,ye)))}},{key:"renderOrganize",value:function(K,ye){return ye?m.createElement("div",{className:i()("flowDetailMemberOrganizeTitle",{user:ye===11},{department:te().includes([12,13],ye)},{job:ye===14},{role:ye===15})},K!==27?me.gq[ye]:me.qe[ye],m.createElement("i",{className:"icon-arrow-down-border mLeft5"})):m.createElement("span",{"data-tip":K!==27?_l("\u4F7F\u7528\u4EBA\u5458\u7684\u7EC4\u7EC7\u7ED3\u6784\u5173\u7CFB"):_l("\u4F7F\u7528\u90E8\u95E8\u7684\u7EC4\u7EC7\u7ED3\u6784\u5173\u7CFB")},m.createElement("i",{className:"icon-task-point-more flowDetailMemberOrganize"}))}},{key:"onChange",value:function(K,ye){var v=te().cloneDeep(this.props.accounts);K===14&&this.selectJob(ye),K===15&&this.selectOrgRole(ye),v[ye].roleTypeId=K,this.props.updateSource({accounts:v})}},{key:"renderExtensionInfo",value:function(K,ye){var v={14:{placeholder:_l("\u9009\u62E9\u804C\u4F4D"),delText:_l("\u804C\u4F4D\u5DF2\u5220\u9664"),action:this.selectJob},15:{placeholder:_l("\u9009\u62E9\u7EC4\u7EC7\u89D2\u8272"),delText:_l("\u7EC4\u7EC7\u89D2\u8272\u5DF2\u5220\u9664"),action:this.selectOrgRole}};return m.createElement("div",{className:i()("flowDetailMemberJob bold",{ThemeColor3:!K.extensionId},{delete:K.extensionId&&!K.extensionName}),onClick:function(){return v[K.roleTypeId].action(ye)}},K.extensionId?K.extensionName||v[K.roleTypeId].delText:v[K.roleTypeId].placeholder,m.createElement("i",{className:"icon-arrow-down-border mLeft5 Gray"}))}},{key:"renderText",value:function(K){return m.createElement("div",{className:"flexRow flowDetailMemberBox"},m.createElement("div",{className:"pLeft12 ellipsis"},K.entityId))}},{key:"renderTags",value:function(K){return m.createElement("div",{className:"flexRow flowDetailMemberBox"},m.createElement("span",{className:i()("flowDetailMemberIcon",K.type===me.$A.DEPARTMENT?"icon-department blue":K.type===me.$A.ROLE?"icon-limit-principal bd":"icon-user bd")}),m.createElement("div",{className:"mLeft6 ellipsis bold"},K.entityName))}},{key:"renderDepartment",value:function(K,ye){var v=this,se=this.props.removeOrganization,de=[[{text:me.qe[12],value:12},{text:me.qe[13],value:13},{text:me.qe[14],value:14},{text:m.createElement("span",null,me.qe[15],this.renderOrgRoleInfo()),value:15}],[{text:_l("\u79FB\u9664"),value:0}]];return K.roleTypeId||te().remove(de,function(U,pe){return pe===1}),m.createElement(m.Fragment,null,this.renderTags(K),!!K.entityName&&!se&&m.createElement(m.Fragment,null,m.createElement(Ce.Z,{className:i()("flowDetailOrganize",{organizeTransform:K.roleTypeId}),data:de,value:K.roleTypeId||"",isAppendToBody:!0,menuStyle:{width:"auto !important"},border:!0,renderTitle:function(){return v.renderOrganize(27,K.roleTypeId)},onChange:function(pe){return v.onChange(pe,ye)}}),te().includes([14,15],K.roleTypeId)&&this.renderExtensionInfo(K,ye)))}},{key:"renderOrgRoleInfo",value:function(){return m.createElement(C.default,{zIndex:1e4,placement:"bottom",title:_l("\u7531\u6240\u9009\u7EC4\u7EC7\u89D2\u8272\u4E2D\u8BBE\u7F6E\u7684\u5206\u7BA1\u6B64\u90E8\u95E8\u7684\u8D1F\u8D23\u4EBA\u8FDB\u884C\u5BA1\u6279\u3002\u5982\uFF1A\u5DE5\u4F1A\u59D4\u5458\uFF08\u7EC4\u7EC7\u89D2\u8272\uFF09\u4E2D\u5F20\u4E09\u5206\u7BA1\u90E8\u95E8A\u3001B\uFF1B\u5219A\u3001B\u90E8\u95E8\u7684\u5BA1\u6279\u7531\u5F20\u4E09\u4F5C\u4E3A\u8D1F\u8D23\u4EBA\u3002")},m.createElement("i",{className:"icon-info Font16 mLeft10"}))}},{key:"render",value:function(){var K,ye=this,v=this.props,se=v.accounts,de=v.leastOne,U=v.inline,pe=(K={},(0,h.default)(K,me.$A.ROLE,_l("\u89D2\u8272\u4E0B\u672A\u8BBE\u7F6E\u4EBA\u5458")),(0,h.default)(K,me.$A.DEPARTMENT,_l("\u90E8\u95E8\u4E0B\u672A\u8BBE\u7F6E\u4EBA\u5458")),(0,h.default)(K,me.$A.JOB,_l("\u804C\u4F4D\u4E0B\u672A\u8BBE\u7F6E\u4EBA\u5458")),(0,h.default)(K,me.$A.ORGANIZE_ROLE,_l("\u7EC4\u7EC7\u89D2\u8272\u4E0B\u672A\u8BBE\u7F6E\u4EBA\u5458")),K);return m.createElement("ul",{className:"flowDetailMembers"},(se||[]).map(function(Y,be){return m.createElement("li",{key:be,className:i()(U?"inlineFlexRow":"flexRow",{noDel:de&&se.length<=1}),style:{zIndex:se.length-be}},Y.type===me.$A.USER&&ye.renderUser(Y),Y.type===me.$A.ROLE&&ye.renderRole(Y),Y.type===me.$A.CONTROL&&ye.renderControl(Y,be),Y.type===me.$A.TEXT&&ye.renderText(Y),Y.type===me.$A.DEPARTMENT&&ye.renderDepartment(Y,be),te().includes([me.$A.JOB,me.$A.ORGANIZE_ROLE],Y.type)&&ye.renderTags(Y),!(de&&se.length<=1)&&m.createElement("span",{className:"mLeft5 flowDetailMemberDel","data-tip":_l("\u522A\u9664"),onClick:function(){return ye.removeMember(be)}},m.createElement("i",{className:i()("icon-delete",U?"Font14":"Font18")})),!U&&te().includes([me.$A.ROLE,me.$A.DEPARTMENT,me.$A.JOB,me.$A.ORGANIZE_ROLE],Y.type)&&!Y.count&&m.createElement("div",{className:"flowDetailMemberError flex"},m.createElement("i",{className:"mRight5 Font16 icon-workflow_error"}),pe[Y.type]),!U&&te().includes([me.$A.ROLE],Y.type)&&Y.count===-1&&m.createElement("div",{className:"flowDetailMemberError flex"},m.createElement("i",{className:"mRight5 Font16 icon-workflow_error"}),_l("\u4E0D\u652F\u6301\u5305\u542B\u5168\u7EC4\u7EC7\u7684\u89D2\u8272")))}))}}]),N}(m.Component)},37842:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>I});var h=t(85105),Te=t.n(h),C=t(99663),Ce=t(22600),Ne=t(49135),j=t(93196),L=t(67294),I=function(k){(0,j.default)(e,k);function e(){var oe,m,y,i;(0,C.default)(this,e);for(var me=arguments.length,J=Array(me),T=0;T<me;T++)J[T]=arguments[T];return i=(m=(y=(0,Ne.default)(this,(oe=e.__proto__||Te()(e)).call.apply(oe,[this].concat(J))),y),y.cacheName="",m),(0,Ne.default)(y,i)}return(0,Ce.default)(e,[{key:"render",value:function(){var m=this,y=this.props,i=y.name,me=y.updateSource;return L.createElement("input",{type:"text",className:"flex",value:i,onFocus:function(){return m.cacheName=i},onChange:function(T){return me({name:T.currentTarget.value})},onBlur:function(T){return!T.currentTarget.value.trim()&&me({name:m.cacheName})}})}}]),e}(L.Component)},70221:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>T}),!/^(1887|7596|7798)$/.test(t.j))var h=t(31546);var Te=t(97373),C=t.n(Te);if(!/^(1887|7596|7798)$/.test(t.j))var Ce=t(94055);if(!/^(1887|7596|7798)$/.test(t.j))var Ne=t(33867);var j=t(88106),L=t(88902),I=t.n(L),k=t(67294),e=t(96486),oe=t.n(e),m=t(93967),y=t.n(m);if(!/^(1887|7596|7798)$/.test(t.j))var i=t(5618);if(!/^(1887|7596|7798)$/.test(t.j))var me=t(61987);if(!/^(1887|7596|7798)$/.test(t.j))var J=t(93618);const T=function(te){var E=te.projectId,r=te.appId,R=te.processId,a=te.hideGoToSettings,z=te.isApproval,N=te.title,q=te.titleInfo,K=te.userTaskNullMap,ye=te.showDefaultItem,v=te.updateSource,se=parseInt(I()(K)[0]),de=[{text:_l("\u81EA\u52A8\u8FDB\u5165\u4E0B\u4E00\u4E2A\u8282\u70B9"),value:1},{text:_l("\u7531\u6D41\u7A0B\u62E5\u6709\u8005\u4EE3\u7406"),value:2},{text:_l("\u6307\u5B9A\u4EBA\u5458\u4EE3\u7406"),value:5},{text:_l("\u6D41\u7A0B\u7ED3\u675F"),value:3},{text:z?_l("\u4F7F\u7528\u53D1\u8D77\u8282\u70B9\u4E2D\u7684\u9ED8\u8BA4\u8BBE\u7F6E"):_l("\u4F7F\u7528\u6D41\u7A0B\u9ED8\u8BA4\u8BBE\u7F6E"),value:0}],U=function(Y){(0,me.ZP)(Y.target,{offset:{top:10,left:0},projectId:E,unique:!0,filterAll:!0,filterFriend:!0,filterOthers:!0,filterOtherProject:!0,onSelect:function(Q){v((0,j.default)({},se,Q.map(function(Le){return{type:i.$A.USER,entityId:"",entityName:"",roleId:Le.accountId,roleName:Le.fullname,avatar:Le.avatar}})))}})};return(!ye||!se)&&oe().remove(de,function(pe){return pe.value===0}),k.createElement(k.Fragment,null,k.createElement("div",{className:"Font13 mTop20 bold"},N,q&&k.createElement("span",{className:"workflowDetailTipsWidth mLeft5 tip-top-right","data-tip":q},k.createElement(Ne.Z,{className:"Font16 Gray_9e",icon:"info"}))),k.createElement(h.Z,{className:"flowDropdown mTop10",data:de,value:se||void 0,placeholder:z?_l("\u4F7F\u7528\u53D1\u8D77\u8282\u70B9\u4E2D\u7684\u9ED8\u8BA4\u8BBE\u7F6E"):_l("\u4F7F\u7528\u6D41\u7A0B\u9ED8\u8BA4\u8BBE\u7F6E"),border:!0,renderTitle:function(){return k.createElement(k.Fragment,null,de.find(function(Y){return Y.value===se}).text,se===2&&k.createElement(Ce.default,{title:_l("\u6D41\u7A0B\u7684\u62E5\u6709\u8005\u9ED8\u8BA4\u4E3A\u6D41\u7A0B\u521B\u5EFA\u8005\uFF0C\u5728\u6D41\u7A0B\u914D\u7F6E\u4E2D\u53EF\u4FEE\u6539\u6D41\u7A0B\u62E5\u6709\u8005\u3002\uFF08\u5F53\u6CA1\u6709\u6D41\u7A0B\u62E5\u6709\u8005\u65F6\uFF0C\u7531\u5E94\u7528\u62E5\u6709\u8005\u4EE3\u7406\uFF09")},k.createElement(Ne.Z,{className:"Font14 Gray_9e Absolute",icon:"info",style:{right:30}})))},onChange:function(Y){return v((0,j.default)({},Y,[]))}}),R&&se===2&&k.createElement("div",{className:"Gray_75 mTop5"},_l("\u5F53\u524D\u6D41\u7A0B\u8FD8\u6CA1\u6709\u6D41\u7A0B\u62E5\u6709\u8005"),a?_l("\uFF0C\u8BF7\u5728 \u6D41\u7A0B\u53D1\u8D77\u8282\u70B9 \u4E2D\u914D\u7F6E"):k.createElement("span",{className:"ThemeColor3 ThemeHoverColor2 pointer mLeft5",onClick:function(){return window.open("/workflowedit/"+R+"/3")}},_l("\u524D\u5F80\u8BBE\u7F6E"))),se===5&&k.createElement("div",{className:"flexRow alignItemsCenter"},k.createElement("div",{className:"mRight10 mTop12"},_l("\u4EE3\u7406\u4EBA")),k.createElement(J.Z,{companyId:E,appId:r,leastOne:!0,accounts:K[se]}),k.createElement("div",{className:y()("Gray_c ThemeHoverColor3 mTop12 pointer",{mLeft8:K[se].length}),onClick:U},k.createElement("i",{className:y()("Font28",K[se].length?"icon-add-member3":"icon-task-add-member-circle")}))))}},66057:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>m}),!/^(1887|7596|7798)$/.test(t.j))var h=t(31546);var Te=t(88106),C=t(52945),Ce=t.n(C),Ne=t(67294),j=t(93967),L=t.n(j),I=t(96486),k=t.n(I);if(!/^(1887|7596|7798)$/.test(t.j))var e=t(21674);if(!/^(1887|7596|7798)$/.test(t.j))var oe=t(5618);const m=function(y){var i=y.data,me=y.getNodeDetail,J=y.updateSource,T=((i.fields||[])[0]||{}).fieldId||"",te=i.controls.find(function(R){var a=R.controlId;return a===T}),E=i.controls.map(function(R){var a=R.controlId,z=R.controlName,N=R.sourceEntityName;return{text:Ne.createElement("span",null,z,Ne.createElement("span",{className:"Gray_75"},"\uFF08",_l("\u5173\u8054\u8868\u201C%0\u201D",N),"\uFF09")),value:a}}),r=(i.flowNodeMap||{})[oe.fh.GET_OPERATION]||{};return T&&E.unshift({text:_l("\u6E05\u9664\u9009\u62E9"),value:""}),Ne.createElement(Ne.Fragment,null,Ne.createElement("div",{className:"Font13 mTop20 bold"},_l("\u66F4\u65B0\u6D41\u7A0B\u64CD\u4F5C\u660E\u7EC6\uFF08\u6BCF\u4E2A\u8282\u70B9\u5B8C\u6210\u540E\uFF09")),Ne.createElement("div",{className:"Font13 Gray_9e mTop10"},_l("\u9009\u62E9\u4E00\u4E2A\u5B50\u8868\u6216\u5173\u8054\u8868\uFF0C\u7CFB\u7EDF\u5C06\u4E8E\u6BCF\u4E2A\u8282\u70B9\u5B8C\u6210\u540E\uFF0C\u81EA\u52A8\u540C\u6B65\u672C\u6D41\u7A0B\u7684\u5404\u4EBA\u5DE5\u8282\u70B9\u7684\u64CD\u4F5C\u660E\u7EC6\u81F3\u8BE5\u8868")),Ne.createElement(h.Z,{className:L()("flowDropdown mTop10",{"errorBorder errorBG":T&&!te}),data:E,value:T,renderTitle:T?T&&!te?function(){return Ne.createElement("span",{className:"errorColor"},_l("\u5B57\u6BB5\u4E0D\u5B58\u5728\u6216\u5DF2\u5220\u9664"))}:function(){return Ne.createElement("span",null,te.controlName,Ne.createElement("span",{className:"Gray_75"},"\uFF08",_l("\u5173\u8054\u8868\u201C%0\u201D",te.sourceEntityName),"\uFF09"))}:function(){return Ne.createElement("span",{className:"Gray_9e"},_l("\u8BF7\u9009\u62E9"))},border:!0,onChange:function(a){return a?me({fields:[{fieldId:a}]}):J({fields:[],flowNodeMap:Ce()({},i.flowNodeMap,(0,Te.default)({},oe.fh.GET_OPERATION,{}))})}}),(r.fields||[]).map(function(R,a){var z=k().find(r.controls,function(K){return K.controlId===R.fieldId})||{},N=z.controlName,q=z.sourceEntityName;return R.type===29?null:Ne.createElement("div",{key:R.fieldId,className:"relative"},Ne.createElement("div",{className:"flexRow alignItemsCenter mTop15"},Ne.createElement("div",{className:"ellipsis Font13 flex mRight20"},N,z.required&&Ne.createElement("span",{className:"mLeft5 red"},"*"),z.type===29&&Ne.createElement("span",{className:"Gray_9e"},"\uFF08"+_l("\u5DE5\u4F5C\u8868")+"\u201C"+q+"\u201D\uFF09"))),Ne.createElement(e.Z,{companyId:y.companyId,processId:y.processId,relationId:y.relationId,selectNodeId:y.selectNodeId,sourceNodeId:r.selectNodeId,controls:r.controls,formulaMap:r.formulaMap,fields:r.fields,showCurrent:!0,updateSource:function(ye){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};return J({flowNodeMap:Ce()({},i.flowNodeMap,(0,Te.default)({},oe.fh.GET_OPERATION,Ce()({},i.flowNodeMap[oe.fh.GET_OPERATION],ye)))},v)},item:R,i:a}))}))}},12620:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>m}),!/^(1887|7596|7798)$/.test(t.j))var h=t(31546);if(!/^(1887|7596|7798)$/.test(t.j))var Te=t(33867);var C=t(97373),Ce=t.n(C);if(!/^(1887|7596|7798)$/.test(t.j))var Ne=t(94055);var j=t(67294),L=t(93967),I=t.n(L);if(!/^(1887|7596|7798)$/.test(t.j))var k=t(5618);var e=t(96486),oe=t.n(e);function m(y){var i=y.controls,me=y.selectedIds,J=y.placeholder,T=J===void 0?_l("\u8BF7\u9009\u62E9"):J,te=y.updateSource,E=(i||[]).map(function(r){return{text:j.createElement(j.Fragment,null,j.createElement("span",{className:"Gray_9e mRight5"},"[",k.Do[r.type],"]"),j.createElement("span",null,r.controlName)),searchText:r.controlName,value:r.controlId,disabled:oe().includes(me,r.controlId)}});return j.createElement(h.Z,{className:"flowDropdown mTop10 flowDropdownMoreSelect",selectClose:!1,data:E,value:me.length||void 0,border:!0,openSearch:!0,placeholder:T,onChange:function(R){return te(me.concat(R))},disabledClickElement:".ant-tooltip",renderTitle:function(){return!!me.length&&j.createElement("ul",{className:"tagWrap"},me.map(function(R){var a=oe().find(i,function(z){return z.controlId===R});return j.createElement("li",{key:R,className:I()("tagItem flexRow",{error:!a})},j.createElement(Ne.default,{title:a?null:"ID\uFF1A"+R},j.createElement("span",{className:"tag"},a?a.controlName:_l("\u5B57\u6BB5\u5DF2\u5220\u9664"))),j.createElement("span",{className:"delTag",onClick:function(N){N.stopPropagation();var q=[].concat(me);oe().remove(q,function(K){return K===R}),te(q)}},j.createElement(Te.Z,{icon:"close",className:"pointer"})))}))}})}},95103:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>i});var h=t(31546),Te=t(85105),C=t.n(Te),Ce=t(99663),Ne=t(22600),j=t(49135),L=t(93196),I=t(67294),k=t(93967),e=t.n(k),oe=t(72078),m=t(96486),y=t.n(m),i=function(me){(0,L.default)(J,me);function J(){return(0,Ce.default)(this,J),(0,j.default)(this,(J.__proto__||C()(J)).apply(this,arguments))}return(0,Ne.default)(J,[{key:"renderTitle",value:function(te){var E=this.props.isIntegration;return I.createElement(I.Fragment,null,I.createElement("span",{className:e()((0,oe.wu)(te.nodeTypeId,te.appType,te.actionId),te.nodeId?"Font16 Gray_9e":"Font18 errorColor")}),I.createElement("span",{className:e()("Font14 mLeft5",{errorColor:!te.nodeId})},te.nodeName||_l("\u8282\u70B9\u5DF2\u5220\u9664")),E?null:te.appId?I.createElement(I.Fragment,null,I.createElement("span",{className:"Font14 mLeft5 bold"},te.appTypeName),I.createElement("span",{className:"Font14 mLeft5 bold"},"\u201C"+te.appName+"\u201D")):y().isEmpty(te)?null:I.createElement("span",{className:"Font14 mLeft5 Gray_9e"},_l("\u5DE5\u4F5C\u8868\u5DF2\u5220\u9664")))}},{key:"renderDropdownItem",value:function(te){var E=this.props.isIntegration;return I.createElement("div",{className:"flexRow",style:{alignItems:"center"}},I.createElement("span",{className:e()("Font16 Gray_9e",(0,oe.wu)(te.nodeTypeId,te.appType,te.actionId))}),I.createElement("span",{className:e()("Font14 mLeft5 ellipsis flex",{Gray_9e:!te.appId})},te.nodeName),E?null:te.appId&&te.appName?I.createElement(I.Fragment,null,I.createElement("span",{className:"Font14 mLeft5 bold flowDropdownGray"},te.appTypeName),I.createElement("span",{className:"Font14 mLeft5 bold flowDropdownGray ellipsis",style:{maxWidth:150}},"\u201C"+te.appName+"\u201D")):I.createElement("span",{className:"Font14 mLeft5 Gray_75"},I.createElement("i",{className:"icon-workflow_error Font14 mRight5"}),_l("\u8BBE\u7F6E\u6B64\u8282\u70B9\u540E\u624D\u80FD\u9009\u62E9")))}},{key:"render",value:function(){var te=this,E=this.props,r=E.isIntegration,R=E.appList,a=E.selectNodeId,z=E.selectNodeObj,N=E.onChange,q=E.smallBorder,K=E.disabled,ye=K===void 0?!1:K,v=(R||[]).map(function(se){return{text:te.renderDropdownItem(se),value:se.nodeId,disabled:(!se.appId||!se.appName)&&!r}});return I.createElement(h.Z,{className:e()("flowDropdown mTop10",{"errorBorder errorBG":a&&!z.nodeId},{flowDropdownBorder:!q}),data:v,value:a||void 0,disabled:ye,border:!0,renderTitle:function(){return a&&te.renderTitle(z)},onChange:N})}}]),J}(I.Component)},29440:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>R});var h=t(16469),Te=t(85105),C=t.n(Te),Ce=t(99663),Ne=t(22600),j=t(49135),L=t(93196),I=t(45697),k=t.n(I),e=t(67294),oe=t(62023),m=t(24488),y=t(5618),i=t(96486),me=t.n(i),J=t(97779),T=t(93967),te=t.n(T),E,r,R=(r=E=function(a){(0,L.default)(z,a);function z(N){(0,Ce.default)(this,z);var q=(0,j.default)(this,(z.__proto__||C()(z)).call(this,N));return q.state={fieldsData:null},q}return(0,Ne.default)(z,[{key:"componentWillReceiveProps",value:function(q,K){(!me().isEqual(q.item,this.props.item)||q.sourceAppId!==this.props.sourceAppId)&&this.setState({fieldsData:null})}},{key:"getFlowNodeAppDtos",value:function(){var q=this,K=this.props,ye=K.isFilter,v=K.processId,se=K.selectNodeId,de=K.sourceAppId,U=K.item,pe=K.sourceNodeId,Y=K.conditionId,be=K.dataSource,Q=K.isIntegration,Le=K.showCurrent,Be=K.disabledInterface,ke=K.filterType;if(Be){this.setState({fieldsData:[]});return}oe.Z[ye?"getFlowAppDtos":"getFlowNodeAppDtos"]({processId:v,nodeId:se,sourceAppId:de,type:U.type,enumDefault:U.enumDefault,selectNodeId:pe,conditionId:Y,dataSource:be,current:Le,filterType:ke},{isIntegration:Q}).then(function(Ie){var he=Ie.map(function(Re){return{text:Re.nodeName,id:Re.nodeId,nodeTypeId:Re.nodeTypeId,appName:Re.appName,appType:Re.appType,appTypeName:Re.appTypeName,actionId:Re.actionId,isSourceApp:Re.isSourceApp,items:Re.controls.map(function(ue){return{type:ue.type,value:ue.controlId,field:y.Do[ue.type],text:Re.appType===y.IF.WEBHOOK?"["+(ue.enumDefault===0?"Body":ue.enumDefault===1001?"Params":"Header")+"] "+ue.controlName:ue.controlName,sourceType:ue.sourceControlType}})}});q.setState({fieldsData:he})})}},{key:"header",value:function(){var q=this.props,K=q.projectId,ye=q.relationId,v=q.item,se=q.handleFieldClick,de=q.closeLayer,U=q.isIntegration,pe=[];return!me().includes([1,2,3,4,5,6,7,8,33,41],v.type)||U?null:(me().includes([6,8],v.type)&&(pe=[6]),e.createElement("ul",{className:"flowDetailUserList"},e.createElement(h.Z,{icon:e.createElement("i",{className:"icon-global_variable"}),onClick:function(){(0,J.Z)({projectId:K,appId:ye,filterTypes:pe,onOk:function(Q){var Le=Q.id,Be=Q.controlType,ke=Q.name,Ie=Q.sourceType;se({nodeId:y.uT,fieldValueId:Le,nodeName:_l("\u5168\u5C40\u53D8\u91CF"),fieldValueName:ke,fieldValue:v.type===26||v.type===27?"[]":"",fieldValueType:Be,nodeTypeId:y.QZ.SYSTEM,appType:y.IF.GLOBAL_VARIABLE,actionId:"",isSourceApp:!1,sourceType:Ie})}}),de()}},_l("\u5168\u5C40\u53D8\u91CF"))))}},{key:"renderOtherFieldsBox",value:function(){var q=this.props,K=q.item,ye=q.fieldsVisible,v=q.handleFieldClick,se=q.closeLayer,de=q.showClear,U=q.disabledInterface,pe=this.state.fieldsData;return!ye||!me().isArray(pe)?null:e.createElement(m.Z,{header:this.header(),className:"actionFields",openSearch:!U,footer:de&&this.footer(),noItemTips:_l("\u6CA1\u6709\u53EF\u7528\u7684\u5B57\u6BB5"),noData:!U&&_l("\u6CA1\u6709\u53EF\u7528\u7684\u8282\u70B9\u5BF9\u8C61"),condition:pe,handleFieldClick:function(be){var Q=be.nodeId,Le=be.fieldValueId,Be=be.nodeName,ke=be.fieldValueName,Ie=be.fieldValueType,he=be.nodeTypeId,Re=be.appType,ue=be.actionId,we=be.isSourceApp,Ee=be.sourceType;v({nodeId:Q,fieldValueId:Le,nodeName:Be,fieldValueName:ke,fieldValue:K.type===26||K.type===27?"[]":"",fieldValueType:Ie,nodeTypeId:he,appType:Re,actionId:ue,isSourceApp:we,sourceType:Ee}),se()},onClose:se})}},{key:"footer",value:function(){var q=this,K=this.props.disabledInterface;return e.createElement("ul",{className:te()("flowDetailUserList clearAllFields",{BorderTopGrayC:!K})},e.createElement(h.Z,{icon:e.createElement("i",{className:"icon-workflow_empty"}),onClick:function(){q.props.handleFieldClick({fieldValue:"",nodeId:"",fieldValueId:"",nodeName:"",fieldValueName:"",fieldValueType:"",nodeTypeId:null,appType:null,actionId:"",isSourceApp:"",isClear:!0})}},_l("\u6E05\u7A7A")))}},{key:"render",value:function(){var q=this,K=this.props,ye=K.item,v=K.openLayer;return e.createElement(e.Fragment,null,e.createElement("div",{className:"actionControlMore ThemeColor3 tip-bottom-left","data-tip":_l("\u4F7F\u7528\u672C\u6D41\u7A0B\u8282\u70B9\u5BF9\u8C61\u7684\u503C"),onClick:function(){v(),q.getFlowNodeAppDtos(ye.type,ye.enumDefault)}},e.createElement("i",{className:ye.fieldValueId||/\$.*\$/.test(ye.fieldValue)?"icon-workflow_ok ThemeColor3":"icon-workflow_other"})),this.renderOtherFieldsBox())}}]),z}(e.Component),E.propTypes={isFilter:k().bool,sourceNodeId:k().string,fieldsVisible:k().bool,showClear:k().bool,showCurrent:k().bool,projectId:k().string,processId:k().string,relationId:k().string,selectNodeId:k().string,sourceAppId:k().string,isIntegration:k().bool,conditionId:k().string,dataSource:k().string,handleFieldClick:k().func,openLayer:k().func,closeLayer:k().func,item:k().shape({fieldValueId:k().string,type:k().number,enumDefault:k().number}),disabledInterface:k().bool,filterType:k().number},E.defaultProps={isFilter:!1,sourceAppId:"",sourceNodeId:"",isIntegration:!1,showClear:!1,showCurrent:!1,disabledInterface:!1,filterType:0},r)},2697:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>te});var h=t(69288),Te=t(54208),C=t(42185),Ce=t(31546),Ne=t(85105),j=t.n(Ne),L=t(99663),I=t(22600),k=t(49135),e=t(93196),oe=t(67294),m=t(45697),y=t.n(m),i=t(49365),me=t(81912),J,T,te=(T=J=function(E){(0,e.default)(r,E);function r(R){(0,L.default)(this,r);var a=(0,k.default)(this,(r.__proto__||j()(r)).call(this,R));return a.onOk=function(){var z=a.props,N=z.onCancel,q=z.onOk,K=a.state,ye=K.selectAppId,v=K.selectPBCId,se=K.appList,de=K.list,U=se.find(function(Y){return Y.value===ye}).text,pe=de.find(function(Y){return Y.value===v}).text;q({appId:ye,appName:U,selectPBCId:v,selectPBCName:pe}),N()},a.state={selectAppId:"",selectPBCId:"",appList:null,list:[]},a}return(0,I.default)(r,[{key:"componentDidMount",value:function(){this.getAppList()}},{key:"getAppList",value:function(){var a=this,z=this.props,N=z.companyId,q=z.appId;i.Z.getManagerApps({projectId:N}).then(function(K){K=K.filter(function(ye){return ye.appId!==q}).map(function(ye){var v=ye.appId,se=ye.appName;return{value:v,text:se}}),a.setState({appList:K})})}},{key:"getPBCList",value:function(a){var z=this,N=[];this.ajaxRequest&&this.ajaxRequest.abort(),this.ajaxRequest=me.Z.list({relationId:a,processListType:10}),this.ajaxRequest.then(function(q){z.ajaxRequest=null,q.forEach(function(K){K.processList.forEach(function(ye){N.push({text:ye.name,value:ye.id})})}),z.setState({list:N})})}},{key:"renderContent",value:function(){var a=this,z=this.props.onCancel,N=this.state,q=N.selectAppId,K=N.appList,ye=N.list,v=N.selectPBCId;return oe.createElement(oe.Fragment,null,oe.createElement("div",{className:"formItem flexRow mTop10"},oe.createElement("div",{className:"label"},_l("\u5E94\u7528")),oe.createElement("div",{className:"content"},oe.createElement(Ce.Z,{isAppendToBody:!0,border:!0,className:"w100",placeholder:_l("\u8BF7\u9009\u62E9"),noData:_l("\u6CA1\u6709\u53EF\u9009\u7684\u5E94\u7528"),value:q,data:K,openSearch:!0,onChange:function(de){a.setState({selectAppId:de,list:[]}),a.getPBCList(de)}}))),oe.createElement("div",{className:"formItem flexRow mTop15"},oe.createElement("div",{className:"label"},_l("\u4E1A\u52A1\u6D41\u7A0B")),oe.createElement("div",{className:"content"},oe.createElement(Ce.Z,{isAppendToBody:!0,border:!0,className:"w100",placeholder:_l("\u8BF7\u9009\u62E9"),noData:_l("\u6CA1\u6709\u53EF\u9009\u7684\u4E1A\u52A1\u6D41\u7A0B"),disabled:!q,value:v,data:ye,openSearch:!0,onChange:function(de){return a.setState({selectPBCId:de})}}))),oe.createElement("div",{className:"btns TxtRight mTop20"},oe.createElement(C.ZP,{type:"link",onClick:z},_l("\u53D6\u6D88")),oe.createElement(C.ZP,{disabled:!q||!v,onClick:this.onOk},_l("\u786E\u5B9A"))))}},{key:"render",value:function(){var a=this.state.appList;return oe.createElement(h.Z,{className:"selectOtherPBCDialog",visible:!0,title:_l("\u8C03\u7528\u5176\u4ED6\u5E94\u7528\u4E0B\u7684\u5C01\u88C5\u4E1A\u52A1\u6D41\u7A0B"),footer:null,onCancel:this.props.onCancel},a===null?oe.createElement(Te.Z,null):this.renderContent())}}]),r}(oe.Component),J.propTypes={companyId:y().string,appId:y().string,onOk:y().func,onCancel:y().func},J.defaultProps={companyId:"",appId:"",onOk:function(){},onCancel:function(){}},T)},53054:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>U});var h=t(16469),Te=t(88239),C=t(85105),Ce=t.n(C),Ne=t(99663),j=t(22600),L=t(49135),I=t(93196),k=t(67294),e=t(93967),oe=t.n(e),m=t(24488),y=t(69288),i=t(54208),me=t(42185),J=t(92531),T=t(31546),te=t(45697),E=t.n(te),r=t(49365),R=t(82066),a,z,N=(z=a=function(pe){(0,I.default)(Y,pe);function Y(be){(0,Ne.default)(this,Y);var Q=(0,L.default)(this,(Y.__proto__||Ce()(Y)).call(this,be));return Q.onOk=function(){var Le=Q.state,Be=Le.selectAppId,ke=Le.selectRoleIds,Ie=Le.appList,he=Le.roles,Re=Ie.find(function(we){return we.value===Be}).label,ue=ke.map(function(we){var Ee=he.find(function(b){return b.value===we});return{roleId:we,roleName:Ee.label,count:Ee.count}});Q.props.onOk({appId:Be,appName:Re,roles:ue})},Q.state={selectAppId:be.appId,selectRoleIds:[],appList:null,roles:[]},Q}return(0,j.default)(Y,[{key:"componentDidMount",value:function(){var Q=this.state.selectAppId;this.getAppList(),Q&&this.getRolesByApp(Q)}},{key:"getAppList",value:function(){var Q=this,Le=this.state.selectAppId;r.Z.getManagerApps({projectId:this.props.companyId}).then(function(Be){Be=Be.map(function(ke){var Ie=ke.appId,he=ke.appName;return{value:Ie,text:Le===Ie?he+_l("\uFF08\u672C\u5E94\u7528\uFF09"):he,label:he}}),Q.setState({appList:Be}),!Le&&Be.length&&(Q.setState({selectAppId:Be[0].value}),Q.getRolesByApp(Be[0].value))})}},{key:"getRolesByApp",value:function(Q){var Le=this;r.Z.getRolesWithUsers({appId:Q}).then(function(Be){Be=Be.map(function(ke){var Ie=ke.roleId,he=ke.name,Re=ke.users,ue=ke.departmentsInfos;return{value:Ie,label:he,count:Re.length+ue.length}}),Le.setState({roles:Be})})}},{key:"renderContent",value:function(){var Q=this,Le=this.props,Be=Le.onCancel,ke=Le.multiChoose,Ie=this.state,he=Ie.selectAppId,Re=Ie.selectRoleIds,ue=Ie.appList,we=Ie.roles,Ee=Re.map(function(b){return we.find(function(le){return le.value===b}).label});return k.createElement(k.Fragment,null,k.createElement("div",{className:"formItem flexRow mTop10"},k.createElement("div",{className:"label"},_l("\u5E94\u7528")),k.createElement("div",{className:"content"},k.createElement(T.Z,{isAppendToBody:!0,border:!0,openSearch:!0,className:"w100",placeholder:_l("\u8BF7\u9009\u62E9"),noData:_l("\u6CA1\u6709\u53EF\u9009\u7684\u5E94\u7528"),value:he,data:ue,onChange:function(le){Q.setState({selectAppId:le,selectRoleIds:[]}),Q.getRolesByApp(le)}}))),k.createElement("div",{className:"formItem flexRow mTop15"},k.createElement("div",{className:"label"},_l("\u89D2\u8272")),k.createElement("div",{className:"content"},k.createElement(J.Z,{className:Ee.length?"":"noSelectRoles",value:Re,options:we,multipleSelect:ke,label:Ee.length?Ee.join("\u3001"):_l("\u9009\u62E9\u89D2\u8272"),multipleLevel:!1,multipleHideDropdownNav:!0,filter:!0,filterHint:_l("\u641C\u7D22"),onChange:function(le,ae){return Q.setState({selectRoleIds:ke?ae:[ae]})}}))),k.createElement("div",{className:"btns TxtRight mTop20"},k.createElement(me.ZP,{type:"link",onClick:Be},_l("\u53D6\u6D88")),k.createElement(me.ZP,{disabled:!he||!Re.length,onClick:this.onOk},_l("\u786E\u5B9A"))))}},{key:"render",value:function(){var Q=this.state.appList;return k.createElement(y.Z,{className:"selectUserFromAppDialog",visible:!0,title:_l("\u9009\u62E9\u5E94\u7528\u4E0B\u89D2\u8272"),footer:null,onCancel:this.props.onCancel},Q===null?k.createElement(i.Z,null):this.renderContent())}}]),Y}(k.Component),a.propTypes={appId:E().string,companyId:E().string.isRequired,onOk:E().func,onCancel:E().func,multiChoose:E().bool},a.defaultProps={appId:"",onOk:function(){},onCancel:function(){},multiChoose:!0},z),q=t(5618),K=t(62023),ye=t(75809),v=t(60510),se=t(27749),de=t(14467),U=function(pe){(0,I.default)(Y,pe);function Y(be){(0,Ne.default)(this,Y);var Q=(0,L.default)(this,(Y.__proto__||Ce()(Y)).call(this,be));return Q.addTelAndEmail=function(Le){var Be=Q.props,ke=Be.unique,Ie=Be.updateSource,he=Be.specialType,Re=Le.currentTarget.value.trim(),ue=_.cloneDeep(Q.props.accounts),we=he===3?/^1[3456789]\d{9}$/:/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)*\.[\w-]+$/i,Ee=[];Le.keyCode===13&&(we.test(Re)?(_.find(ue,function(b){return b.type===q.$A.TEXT&&b.entityId===Re})||(Ee.push({type:q.$A.TEXT,entityId:Re,entityName:"",roleId:"",roleName:"",avatar:""}),Ie({accounts:ke?Ee:ue.concat(Ee)})),Le.currentTarget.value=""):alert(he===3?_l("\u8F93\u5165\u7684\u624B\u673A\u53F7\u7801\u6709\u8BEF"):_l("\u8F93\u5165\u7684\u90AE\u7BB1\u5730\u5740\u6709\u8BEF"),2)),Le.stopPropagation()},Q.addMembers=function(Le){var Be=_.cloneDeep(Q.props.accounts),ke=Q.props,Ie=ke.companyId,he=ke.unique,Re=ke.updateSource,ue=ke.onClose;Le.stopPropagation(),ue(),(0,ye.Z)({title:_l("\u9009\u62E9\u4EBA\u5458"),showMoreInvite:!1,SelectUserSettings:{filterAccountIds:Be.map(function(we){return we.roleId}),projectId:Ie,dataRange:2,unique:he,callback:function(Ee){var b=Ee.map(function(le){return{type:q.$A.USER,entityId:"",entityName:"",roleId:le.accountId,roleName:le.fullname,avatar:le.avatar}});Re({accounts:he?b:Be.concat(b)})}}})},Q.addDepartment=function(Le){var Be=_.cloneDeep(Q.props.accounts),ke=Q.props,Ie=ke.companyId,he=ke.unique,Re=ke.updateSource,ue=ke.onClose;Le.stopPropagation(),ue(),(0,v.Z)({projectId:Ie,returnCount:!0,selectedDepartment:[],unique:he,showCreateBtn:!1,selectFn:function(Ee){Ee=Ee.map(function(b){return{type:q.$A.DEPARTMENT,entityId:b.departmentId,entityName:b.departmentName,roleId:"",roleName:"",avatar:"",count:b.userCount}}),Ee.length&&Re({accounts:he?Ee:Be.concat(Ee)})}})},Q.addOrgRole=function(Le){var Be=Q.props,ke=Be.companyId,Ie=Be.unique,he=Be.onClose;Le.stopPropagation(),(0,se.Z)({projectId:ke,unique:Ie,onSave:Q.selectRole,onClose:he})},Q.addJob=function(Le){var Be=_.cloneDeep(Q.props.accounts),ke=Q.props,Ie=ke.companyId,he=ke.unique,Re=ke.updateSource,ue=ke.onClose;Le.stopPropagation(),ue(),(0,de.Z)({projectId:Ie,unique:he,onSave:function(Ee){var b=Be.map(function(le){return le.entityId});Ee=Ee.filter(function(le){return b.indexOf(le.jobId)===-1}).map(function(le){return{type:q.$A.JOB,entityId:le.jobId,entityName:le.jobName,roleId:"",roleName:"",avatar:"",count:le.userCount}}),Ee.length&&Re({accounts:he?Ee:Be.concat(Ee)})}})},Q.selectAppUsers=function(Le){var Be=Le.appId,ke=Le.appName,Ie=Le.roles,he=_.cloneDeep(Q.props.accounts),Re=Q.props,ue=Re.unique,we=Re.updateSource,Ee=Re.onClose,b=[];Ie.forEach(function(le){_.find(he,function(ae){return ae.entityId===Be&&ae.roleId===le.roleId})||b.push({type:q.$A.ROLE,entityId:Be,entityName:ke,roleId:le.roleId,roleName:le.roleName,avatar:"",count:le.count})}),Ee(),we({accounts:ue?b:he.concat(b)}),Q.setState({showSelectAppUserDialog:!1})},Q.selectRole=function(Le){var Be=_.cloneDeep(Q.props.accounts),ke=Q.props,Ie=ke.unique,he=ke.updateSource,Re=ke.onClose,ue=Be.map(function(we){return we.entityId});Le=Le.filter(function(we){return ue.indexOf(we.organizeId)===-1}).map(function(we){return{type:q.$A.ORGANIZE_ROLE,entityId:we.organizeId,entityName:we.organizeName,roleId:"",roleName:"",avatar:"",count:1}}),Re(),he({accounts:Ie?Le:Be.concat(Le)})},Q.handleFieldClick=function(Le){var Be=Le.nodeId,ke=Le.fieldValueId,Ie=Le.nodeName,he=Le.fieldValueName,Re=Le.fieldValueType,ue=Le.nodeTypeId,we=Le.appType,Ee=Le.actionId,b=_.cloneDeep(Q.props.accounts),le=Q.props,ae=le.unique,ve=le.updateSource,W=le.onClose,ce=[];ce.push({type:q.$A.CONTROL,entityId:Be,entityName:Ie,roleId:ke,roleTypeId:0,roleName:he,avatar:"",controlType:Re,flowNodeType:ue,appType:we,actionId:Ee}),W(),ve({accounts:ae?ce:b.concat(ce)})},Q.state={showSelectAppUserDialog:!1,fieldsData:[]},Q}return(0,j.default)(Y,[{key:"componentWillReceiveProps",value:function(Q,Le){(Q.nodeId!==this.props.nodeId||Q.specialType!==this.props.specialType)&&this.setState({fieldsData:[]}),Q.visible&&!this.state.fieldsData.length&&!this.props.disabledNodeRole&&this.getUserAppDtos(Q)}},{key:"getUserAppDtos",value:function(Q){var Le=this,Be=Q.processId,ke=Q.nodeId,Ie=Q.specialType,he=Q.schedule;K.Z.getUserAppDtos({processId:Be,nodeId:ke,type:Ie,schedule:he}).then(function(Re){var ue=Re.map(function(we){return(0,Te.default)({},we,{text:we.nodeName,id:we.nodeId,nodeTypeId:we.nodeTypeId,appType:we.appType,actionId:we.actionId,items:we.controls.map(function(Ee){return{type:Ee.type,value:Ee.controlId,field:q.Do[Ee.type],text:Ee.controlName}})})});Le.setState({fieldsData:ue})})}},{key:"header",value:function(){var Q=this,Le=this.props,Be=Le.specialType,ke=Le.onlyNodeRole;return k.createElement("ul",{className:"flowDetailUserList"},(Be===3||Be===5)&&k.createElement("div",{className:"explainHeader flexRow"},k.createElement("i",{className:oe()("Gray_9e",Be===3?"icon-download_client":"icon-mailbox")}),k.createElement("input",{type:"text",className:"w100 Gray",autoFocus:!0,placeholder:Be===3?_l("\u8F93\u5165\u624B\u673A\u53F7\u7801"):_l("\u8F93\u5165\u90AE\u7BB1\u5730\u5740"),onClick:function(he){return he.stopPropagation()},onKeyDown:this.addTelAndEmail})),ke?null:k.createElement(k.Fragment,null,k.createElement(h.Z,{icon:k.createElement("i",{className:"icon-account_circle"}),onClick:this.addMembers},_l("\u901A\u8BAF\u5F55")),k.createElement(h.Z,{icon:k.createElement("i",{className:"icon-department"}),onClick:this.addDepartment},_l("\u90E8\u95E8")),k.createElement(h.Z,{icon:k.createElement("i",{className:"icon-user"}),onClick:this.addOrgRole},_l("\u7EC4\u7EC7\u89D2\u8272")),k.createElement(h.Z,{icon:k.createElement("i",{className:"icon-limit-principal"}),onClick:this.addJob},_l("\u804C\u4F4D")),k.createElement(h.Z,{icon:k.createElement("i",{className:"icon-group-members"}),onClick:function(){return Q.setState({showSelectAppUserDialog:!0})}},_l("\u5E94\u7528\u89D2\u8272"))))}},{key:"render",value:function(){var Q=this,Le=this.props,Be=Le.visible,ke=Le.appId,Ie=Le.companyId,he=Le.onClose,Re=Le.unique,ue=Le.disabledNodeRole,we=this.state,Ee=we.fieldsData,b=we.showSelectAppUserDialog;return Be?b?k.createElement(N,{appId:ke,multiChoose:!Re,companyId:Ie,onOk:this.selectAppUsers,onCancel:function(){he(),Q.setState({showSelectAppUserDialog:!1})}}):k.createElement(m.Z,{header:this.header(),className:"actionFields",openSearch:!ue,noItemTips:_l("\u6CA1\u6709\u53EF\u7528\u7684\u5B57\u6BB5"),condition:Ee,handleFieldClick:this.handleFieldClick,onClickAwayExceptions:[".workflowDetailAddBtn"],onClose:he}):null}}]),Y}(k.Component)},21674:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>ke});var h=t(68841),Te=t.n(h),C=t(12528),Ce=t(51156),Ne=t(3540),j=t(33867),L=t(46417),I=t(92531),k=t(31546),e=t(12692),oe=t(63239),m=t.n(oe),y=t(52945),i=t.n(y),me=t(85105),J=t.n(me),T=t(99663),te=t(22600),E=t(49135),r=t(93196),R=t(67294),a=t(93967),z=t.n(a),N=t(662),q=t(94796),K=t(42424),ye=t(29440),v=t(72078),se=t(70518),de=t(5618),U=t(44293),pe=t(95283),Y=t(75809),be=t(60510),Q=t(27749),Le=t(30381),Be=t.n(Le),ke=function(Ie){(0,r.default)(he,Ie);function he(Re){(0,T.default)(this,he);var ue=(0,E.default)(this,(he.__proto__||J()(he)).call(this,Re));return ue.cacheFile=[],ue.renderRelationField=function(we){var Ee=we||{},b=Ee.appName,le=Ee.appTypeName,ae=Ee.nodeId,ve=Ee.nodeName,W=Ee.nodeTypeId,ce=Ee.appType,Z=Ee.actionId;return ae&&!ve?R.createElement("span",{style:{color:"#f44336"}},_l("\u8282\u70B9\u5DF2\u5220\u9664")):R.createElement(R.Fragment,null,R.createElement("span",{className:(0,v.wu)(W,ce,Z)+" Font16 Gray_9e mRight5"}),R.createElement("span",null,ve),R.createElement("span",{className:"bold mLeft4 mRight5"},le),b&&R.createElement("span",{className:"bold"},"\u201C"+b+"\u201D"))},ue.onFetchData=_.debounce(function(we){ue.setState({keywords:we})},500),ue.state={moreFieldsIndex:"",isUploading:!1,search:void 0,keywords:""},Re.item.fieldId==="attachments"&&Re.item.fieldValue&&(ue.cacheFile=safeParse(Re.item.fieldValue,"array")),ue}return(0,te.default)(he,[{key:"componentWillReceiveProps",value:function(ue){ue.item.fieldId!==this.props.item.fieldId&&(this.cacheFile=[])}},{key:"componentDidUpdate",value:function(ue,we){if(this.props.item.type===2&&ue.item.fieldValue!==this.props.item.fieldValue&&this.tagtextarea){var Ee=this.tagtextarea.cmObj.getCursor();this.tagtextarea.setValue(this.props.item.fieldValue),this.tagtextarea.cmObj.setCursor(Ee)}}},{key:"updateSingleControlValue",value:function(ue,we){var Ee=this.props,b=Ee.item,le=Ee.updateSource,ae=_.cloneDeep(this.props.fields);ae[we]=i()({},ae[we],ue),b.type===10000008&&ae.forEach(function(ve){ve.dataSource===b.fieldId&&(ve.fieldValue="",ve.nodeId="",ve.nodeName="",ve.fieldValueId="",ve.fieldValueName="")}),le({fields:ae})}},{key:"renderSelectFieldsValue",value:function(ue,we){var Ee=this;return R.createElement("div",{className:z()("actionControlBox flex ThemeBorderColor3 clearBorderRadius ellipsis actionCustomBox",{actionCustomBoxError:!ue.nodeName||!ue.fieldValueName})},R.createElement("span",{className:"flexRow pTop3"},R.createElement(K.Z,{flowNodeType:ue.nodeTypeId,appType:ue.nodeAppType||ue.appType,actionId:ue.nodeActionId||ue.actionId,nodeName:(0,v.iQ)(ue.nodeId,ue.sourceType,ue.nodeName),controlId:ue.fieldValueId,controlName:ue.fieldValueDefault?ue.fieldValueName+" = "+(0,v.OV)(ue):ue.fieldValueName,isSourceApp:ue.isSourceApp})),R.createElement("i",{className:"icon-delete actionControlDel ThemeColor3",onClick:function(){return Ee.updateSingleControlValue({nodeId:"",nodeName:"",fieldValueId:"",fieldValueName:""},we)}}))}},{key:"renderClear",value:function(ue,we){var Ee=this;return R.createElement("div",{className:"actionControlBox flex ThemeBorderColor3 clearBorderRadius ellipsis actionCustomBox"},R.createElement("span",{className:"flexRow pTop3"},R.createElement("div",{className:"flowDetailTagBox"},R.createElement("div",{className:"flowDetailMemberNodeName ellipsis",style:{paddingRight:10,borderRadius:26,borderRightWidth:1}},R.createElement("i",{className:"Font14 mRight5 icon-workflow_empty Gray_9e"}),_l("\u6E05\u7A7A")))),R.createElement("i",{className:"icon-delete actionControlDel ThemeColor3",onClick:function(){return Ee.updateSingleControlValue({fieldValue:ue.type===26||ue.type===27?"[]":"",nodeId:"",nodeName:"",fieldValueId:"",fieldValueName:"",isClear:!1},we)}}))}},{key:"renderOtherFields",value:function(ue,we,Ee){var b=this;return R.createElement(ye.Z,{showClear:this.props.showClear,showCurrent:this.props.showCurrent,disabledInterface:this.props.isBatch&&ue.type===14,item:ue,fieldsVisible:this.state.moreFieldsIndex===we,projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,sourceAppId:this.props.sourceAppId,sourceNodeId:this.props.sourceNodeId,isIntegration:this.props.isIntegration,filterType:this.props.filterType,dataSource:ue.type===29?(_.find(this.props.controls,function(le){return le.controlId===ue.fieldId})||{}).dataSource:"",handleFieldClick:function(ae){return Ee?Ee(ae):b.updateSingleControlValue(ae,we)},openLayer:function(){return b.setState({moreFieldsIndex:we})},closeLayer:function(){return b.setState({moreFieldsIndex:""})}})}},{key:"checkPhoneNumberControl",value:function(ue,we,Ee){var b=ue.target.value.replace(/[^\d]/g,"");ue.target.value=b,we&&this.updateSingleControlValue({fieldValue:b},Ee)}},{key:"selectUser",value:function(ue,we,Ee,b){var le=this;(0,Y.Z)({title:_l("\u9009\u62E9\u4EBA\u5458"),showMoreInvite:!1,SelectUserSettings:{unique:b,filterAccountIds:JSON.parse(we.fieldValue).map(function(ae){return ae.accountId}),projectId:this.props.companyId,dataRange:2,callback:function(ve){var W=ve.map(function(ce){return{avatar:ce.avatar,fullName:ce.fullname,accountId:ce.accountId}});le.updateSingleControlValue({fieldValue:b?m()(W):m()(JSON.parse(we.fieldValue).concat(W))},Ee)}}})}},{key:"selectDepartment",value:function(ue,we,Ee){var b=this;(0,be.Z)({projectId:this.props.companyId,selectedDepartment:[],unique:Ee,showCreateBtn:!1,selectFn:function(ae){if(!Ee){var ve=JSON.parse(ue.fieldValue).map(function(W){return W.departmentId});_.remove(ae,function(W){return _.includes(ve,W.departmentId)})}ae=ae.map(function(W){return{departmentId:W.departmentId,departmentName:W.departmentName}}),b.updateSingleControlValue({fieldValue:Ee?m()(ae):m()(JSON.parse(ue.fieldValue).concat(ae))},we)}})}},{key:"selectRole",value:function(ue,we,Ee){var b=this;(0,Q.Z)({projectId:this.props.companyId,unique:Ee,onSave:function(ae){if(!Ee){var ve=JSON.parse(ue.fieldValue||"[]").map(function(W){return W.organizeId});_.remove(ae,function(W){return _.includes(ve,W.organizeId)})}ae=ae.map(function(W){return{organizeId:W.organizeId,organizeName:W.organizeName}}),b.updateSingleControlValue({fieldValue:Ee?m()(ae):m()(JSON.parse(ue.fieldValue||"[]").concat(ae))},we)}})}},{key:"deleteTags",value:function(ue,we){var Ee=this.props.updateSource,b=_.cloneDeep(this.props.fields);b[we].fieldValue=JSON.parse(b[we].fieldValue),_.remove(b[we].fieldValue,function(le){return le.accountId===ue||le.departmentId===ue||le.organizeId}),b[we].fieldValue=m()(b[we].fieldValue),Ee({fields:b})}},{key:"checkNumberControl",value:function(ue,we,Ee){var b=ue.target.value.replace(/[^-\d.]/g,"").replace(/^\./g,"").replace(/^-/,"$#$").replace(/-/g,"").replace("$#$","-").replace(/^-\./,"-").replace(".","$#$").replace(/\./g,"").replace("$#$",".");we&&(b==="."||b==="-")&&(b=""),ue.target.value=b,we&&this.updateSingleControlValue({fieldValue:b},Ee)}},{key:"textareaSelectOtherNodeUpdateValue",value:function(ue,we){var Ee=this,b=this.props.updateSource,le=_.cloneDeep(this.props.formulaMap);ue.isClear?this.updateSingleControlValue({fieldValue:"",nodeId:"",nodeName:"",fieldValueId:"",fieldValueName:"",isClear:!0},we):(le[ue.nodeId]={type:ue.nodeTypeId,appType:ue.appType,actionId:ue.actionId,name:ue.nodeName,isSourceApp:ue.isSourceApp.toString()},le[ue.nodeId+"-"+ue.fieldValueId]={type:ue.fieldValueType,name:ue.fieldValueName,sourceType:ue.sourceType},b({formulaMap:le},function(){Ee.tagtextarea?Ee.tagtextarea.insertColumnTag(ue.nodeId+"-"+ue.fieldValueId):Ee.updateSingleControlValue({fieldValue:"$"+ue.nodeId+"-"+ue.fieldValueId+"$",fieldValueId:"",nodeAppId:"",isClear:!1},we)}))}},{key:"previewAttachments",value:function(ue){ue.serverName?(0,se.x)(ue.url,{ext:File.GetExt(ue.fileExt),name:ue.originalFileName}):(0,pe.Z)({attachments:[i()({},ue,{path:ue.privateDownloadUrl})],callFrom:"player"})}},{key:"render",value:function(){var ue=this,we=this.props,Ee=we.controls,b=we.item,le=we.i,ae=this.state,ve=ae.isUploading,W=ae.search,ce=ae.keywords,Z=_.cloneDeep(this.props.formulaMap),_e=[];if(!b.fieldId)return R.createElement("div",{className:"mTop8 actionControlBox actionDisabled"});if(b.isClear)return R.createElement("div",{className:"mTop8 flexRow relative"},this.renderClear(b,le),this.renderOtherFields(b,le,b.type!==2?"":function(Rt){return ue.textareaSelectOtherNodeUpdateValue(Rt,le)}));if(b.type===1)return R.createElement("div",{className:"mTop8 flexRow relative"},b.fieldValueId?this.renderSelectFieldsValue(b,le):R.createElement("input",{type:"text",className:"flex ThemeBorderColor3 actionControlBox clearBorderRadius pTop0 pBottom0 pLeft10 pRight10",placeholder:_l("\u8BF7\u8F93\u5165..."),defaultValue:b.fieldValue||"",onChange:function(St){return ue.updateSingleControlValue({fieldValue:St.currentTarget.value},le)}}),this.renderOtherFields(b,le));if(b.type===2||b.type===32||b.type===33||b.type===41||b.type===50)return R.createElement("div",{className:"mTop8 flexRow relative"},R.createElement(e.Z,{className:z()("flex",{minH100:b.fieldId==="content"},{smallPadding:b.fieldId!=="content"&&b.fieldValue&&b.fieldValue.match(/\$[\w]+-[\w]+\$/g)}),height:0,defaultValue:b.fieldValue,getRef:function(St){ue.tagtextarea=St},renderTag:function(St,zt){var oa=St.split(/([a-zA-Z0-9#]{24,32})-/).filter(function(Vt){return Vt}),qn=Z[oa[0]]||{},In=Z[oa.join("-")]||{};return R.createElement(K.Z,{flowNodeType:qn.type,appType:qn.appType,actionId:qn.actionId,nodeName:(0,v.iQ)(oa[0],In.sourceType,qn.name),controlId:oa[1],controlName:In.name||"",isSourceApp:qn.isSourceApp==="true"})},onChange:function(St,zt,oa){ue.updateSingleControlValue({fieldValue:zt,fieldValueId:"",nodeAppId:""},le)}}),this.renderOtherFields(b,le,function(Rt){return ue.textareaSelectOtherNodeUpdateValue(Rt,le)}));if(b.type===3||b.type===4)return R.createElement("div",{className:"mTop8 flexRow relative"},b.fieldValueId?this.renderSelectFieldsValue(b,le):R.createElement("input",{type:"text",className:"flex ThemeBorderColor3 actionControlBox clearBorderRadius pTop0 pBottom0 pLeft10 pRight10",placeholder:b.type===3?_l("\u586B\u5199\u624B\u673A\u53F7"):_l("\u586B\u5199\u5EA7\u673A\u53F7"),defaultValue:b.fieldValue||"",onKeyUp:function(St){return ue.checkPhoneNumberControl(St)},onPaste:function(St){return ue.checkPhoneNumberControl(St)},onBlur:function(St){return ue.checkPhoneNumberControl(St,!0,le)}}),this.renderOtherFields(b,le));if(b.type===5||b.type===7){var P=/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)*\.[\w-]+$/i,xe=_l("\u586B\u5199\u90AE\u7BB1\u5730\u5740");if(b.type===7){var bt=_.find(Ee,function(Rt){return Rt.controlId===b.fieldId}).enumDefault;bt===1?(P=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,xe=_l("\u586B\u5199\u8EAB\u4EFD\u8BC1")):bt===2?(P=/^[a-zA-Z0-9]{5,17}$/,xe=_l("\u586B\u5199\u62A4\u7167")):(P=/.*/,xe=bt===3?_l("\u586B\u5199\u6E2F\u6FB3\u901A\u884C\u8BC1"):_l("\u586B\u5199\u53F0\u6E7E\u901A\u884C\u8BC1"))}var tt=b.fieldValue?!P.test(b.fieldValue):!1;return R.createElement("div",{className:"mTop8 flexRow relative"},b.fieldValueId?this.renderSelectFieldsValue(b,le):R.createElement("input",{type:"text",className:z()("flex ThemeBorderColor3 actionControlBox clearBorderRadius pTop0 pBottom0 pLeft10 pRight10",{errorBorder:tt}),placeholder:xe,defaultValue:b.fieldValue||"",onBlur:function(St){return ue.updateSingleControlValue({fieldValue:St.target.value.trim()},le)}}),this.renderOtherFields(b,le))}if(b.type===6||b.type===8||b.type===31)return R.createElement("div",{className:"mTop8 flexRow relative"},b.fieldValueId?this.renderSelectFieldsValue(b,le):R.createElement("input",{type:"text",className:"flex ThemeBorderColor3 actionControlBox clearBorderRadius pTop0 pBottom0 pLeft10 pRight10",placeholder:b.type===6?_l("\u586B\u5199\u6570\u5B57"):_l("\u586B\u5199\u91D1\u989D"),defaultValue:b.fieldValue||"",maxLength:16,onKeyUp:function(St){return ue.checkNumberControl(St)},onPaste:function(St){return ue.checkNumberControl(St)},onBlur:function(St){return ue.checkNumberControl(St,!0,le)}}),this.renderOtherFields(b,le));if(b.type===9||b.type===11||b.type===36||b.type===44){var Dt=_.includes(["folder_stage_id","portal_role","portal_status"],b.fieldId);return _e=((_.find(Ee,function(Rt){return Rt.controlId===b.fieldId})||{}).options||[]).map(function(Rt){return{text:Rt.value,value:Rt.key}}),b.fieldValue&&_e.unshift({text:_l("\u6E05\u9664\u9009\u62E9"),value:""}),R.createElement("div",{className:"mTop8 flexRow relative"},b.fieldValueId?this.renderSelectFieldsValue(b,le):R.createElement(k.Z,{className:z()("flowDropdown flex",{actionCustomBoxError:b.fieldValue&&!_.find(_e,function(Rt){return Rt.value===b.fieldValue})},{clearBorderRadius:!Dt}),data:_e,value:b.fieldValue||void 0,border:!0,isAppendToBody:!0,onChange:function(St){return ue.updateSingleControlValue({fieldValue:St},le)}}),!Dt&&this.renderOtherFields(b,le))}if(b.type===10){var vn=[];return _e=((_.find(Ee,function(Rt){return Rt.controlId===b.fieldId})||{}).options||[]).map(function(Rt){return _.includes(b.fieldValue.split(","),Rt.key)&&vn.push(Rt.value),{label:Rt.value,value:Rt.key}}),R.createElement("div",{className:"mTop8 flexRow relative"},b.fieldValueId?this.renderSelectFieldsValue(b,le):R.createElement(I.Z,{className:z()("flowDropdown flex clearBorderRadius",{actionCustomBoxError:b.fieldValue&&b.fieldValue.split(",").length!==vn.length},{flowDropdownNull:!b.fieldValue}),value:b.fieldValue.split(","),options:_e,multipleSelect:!0,label:vn.join("\u3001"),multipleLevel:!1,multipleHideDropdownNav:!0,onChange:function(St,zt){return ue.updateSingleControlValue({fieldValue:zt.join(",")},le)}}),this.renderOtherFields(b,le))}if(b.type===14)return R.createElement("div",{className:"mTop8 flexRow relative"},b.fieldValueId?this.renderSelectFieldsValue(b,le):b.fieldId==="attachments"?R.createElement(R.Fragment,null,R.createElement(L.Z,{className:"workflowFileUpload",options:{max_file_size:"50m",chunk_size:"50m"},onUploaded:function(St,zt,oa){ue.setState({isUploading:!1}),St.disableBrowse(!1);var qn=ue.cacheFile.map(function(In){return parseInt(In.fileSize||In.filesize)}).reduce(function(In,Vt){return Vt+In},0);if(qn+parseInt(zt.size)>50*1024*1024){alert(_l("\u90E8\u5206\u9644\u4EF6\u4E0A\u4F20\u5931\u8D25\uFF0C\u603B\u5927\u5C0F\u8D85\u8FC750MB"),2);return}ue.cacheFile.push((0,U.LE)(zt,decodeURIComponent(m()(oa)))),ue.updateSingleControlValue({fieldValue:m()(ue.cacheFile)},le)},onAdd:function(St,zt){ue.setState({isUploading:!0}),St.disableBrowse()},onError:function(St,zt,oa){alert(oa,2)}}),R.createElement("div",{className:"actionControlBox flex clearBorderRadius pLeft10 pRight10 actionControlUsers"},JSON.parse(b.fieldValue||"[]").map(function(Rt,St){var zt=File.GetExt(Rt.fileExt||Rt.ext);return R.createElement("div",{key:St,className:"InlineFlex boderRadAll_3 GrayBG alignItemsCenter mRight10 mTop3 mBottom3 pRight5 TxtTop relative",style:{height:28,zIndex:2}},File.isPicture("."+zt)?R.createElement("img",{src:Rt.previewUrl?Rt.previewUrl:Rt.serverName+Rt.key,style:{height:28}}):R.createElement("span",{className:"fileIcon fileIcon-"+zt,style:{width:24,height:28}}),R.createElement("span",{className:"ThemeHoverColor3 pointer"},R.createElement("span",{className:"ellipsis InlineBlock mLeft5",style:{maxWidth:200}},Rt.originalFileName||Rt.originalFilename),".",zt),R.createElement(j.Z,{icon:"close",className:"pointer Gray_9e ThemeHoverColor3 mLeft10",onClick:function(){var qn=JSON.parse(b.fieldValue);_.remove(qn,function(In,Vt){return Vt===St}),ue.cacheFile=qn,ue.updateSingleControlValue({fieldValue:m()(qn)},le)}}))}),!JSON.parse(b.fieldValue||"[]").length&&!ve&&R.createElement("span",{className:"Gray_bd LineHeight34"},_l("\u9009\u62E9\u9644\u4EF6")),ve&&R.createElement("span",{className:"Gray_9e LineHeight34"},_l("\u4E0A\u4F20\u4E2D...")))):R.createElement("div",{className:"actionControlBox flex clearBorderRadius"}),this.renderOtherFields(b,le));if(b.type===15||b.type===16){var Fe=_.get(_.find(Ee,function(Rt){return Rt.controlId===b.fieldId}),"advancedSetting.showtype")||1,Bt={3:"date",4:"month",5:"year"},kt={1:"minute",2:"hour",6:"second"};return R.createElement("div",{className:"mTop8 flexRow relative"},b.fieldValueId?this.renderSelectFieldsValue(b,le):R.createElement("div",{className:"actionControlBox flex ThemeBorderColor3 clearBorderRadius actionControlBoxClear"},R.createElement(N.Z,{selectedValue:b.fieldValue?Be()(b.fieldValue):null,timePicker:b.type===16,mode:Bt[Fe],timeMode:kt[Fe],allowClear:!1,onOk:function(St){return ue.updateSingleControlValue({fieldValue:St.format(de.bq[Fe])},le)}},b.fieldValue?Be()(b.fieldValue).format(de.bq[Fe]):R.createElement("span",{className:"Gray_bd"},_l("\u8BF7\u9009\u62E9\u65E5\u671F"))),b.fieldValue&&R.createElement(j.Z,{icon:"cancel1",className:"Font16 Gray_9e ThemeHoverColor3 Absolute",style:{top:9,right:10},onClick:function(){return ue.updateSingleControlValue({fieldValue:""},le)}})),this.renderOtherFields(b,le))}if(b.type===17||b.type===18){var Tt=b.type===17?"YYYY-MM-DD":"YYYY-MM-DD HH:mm",tn=b.fieldValue?b.fieldValue.split(","):[];return R.createElement("div",{className:"mTop8 flexRow relative"},b.fieldValueId?this.renderSelectFieldsValue(b,le):R.createElement("div",{className:"actionControlBox flex ThemeBorderColor3 clearBorderRadius"},R.createElement(q.Z,{selectedValue:tn.length?[Be()(tn[0]),Be()(tn[1])]:null,timePicker:b.type===18,timeMode:"minute",placeholder:"",onOk:function(St){return ue.updateSingleControlValue({fieldValue:St[0].format(Tt)+","+St[1].format(Tt)},le)},onClear:function(){return ue.updateSingleControlValue({fieldValue:""},le)}},tn.length?Be()(tn[0]).format(Tt)+" ~ "+Be()(tn[1]).format(Tt):R.createElement("span",{className:"Gray_bd"},_l("\u8BF7\u9009\u62E9\u65E5\u671F")))),this.renderOtherFields(b,le))}if(b.type===19||b.type===23||b.type===24){var Vn=b.type===19?1:b.type===23?2:3,Zn=safeParse(b.fieldValue||"{}").value||"";return R.createElement("div",{className:"mTop8 flexRow relative"},b.fieldValueId?this.renderSelectFieldsValue(b,le):R.createElement("div",{className:"actionControlBox flex ThemeBorderColor3 clearBorderRadius actionControlBoxClear"},R.createElement(Ce.Z,{search:ce,level:Vn,callback:function(St){W&&ue.setState({search:void 0,keywords:""}),ue.updateSingleControlValue({fieldValue:m()({id:St[St.length-1].id,value:St[St.length-1].path})},le)}},R.createElement(Ne.Z,{className:"CityPicker-input-textCon w100",placeholder:b.type===19?_l("\u7701"):b.type===23?_l("\u7701/\u5E02"):_l("\u7701/\u5E02/\u53BF"),value:W!==void 0?W:Zn,onChange:function(St){ue.setState({search:St}),ue.onFetchData(St)}})),Zn&&R.createElement(j.Z,{icon:"cancel1",className:"Font16 Gray_9e ThemeHoverColor3 Absolute",style:{top:9,right:10},onClick:function(){ue.setState({search:"",keywords:""}),ue.updateSingleControlValue({fieldValue:""},le)}})),this.renderOtherFields(b,le))}if(b.type===26||b.type===27||b.type===48){var Ot=(_.find(Ee,function(Rt){return Rt.controlId===b.fieldId})||{}).enumDefault===0,$t={26:{name:"fullName",id:"accountId",placeholder:_l("\u9009\u62E9\u4EBA\u5458")},27:{name:"departmentName",id:"departmentId",placeholder:_l("\u9009\u62E9\u90E8\u95E8")},48:{name:"organizeName",id:"organizeId",placeholder:_l("\u9009\u62E9\u7EC4\u7EC7\u89D2\u8272")}};return R.createElement("div",{className:"mTop8 flexRow relative"},b.fieldValueId?this.renderSelectFieldsValue(b,le):R.createElement("div",{className:"actionControlBox flex ThemeBorderColor3 clearBorderRadius actionControlUsers",onClick:function(St){b.type===26?ue.selectUser(St,b,le,Ot):b.type===27?ue.selectDepartment(b,le,Ot):ue.selectRole(b,le,Ot)}},R.createElement("ul",{className:"pLeft6 tagWrap"},!JSON.parse(b.fieldValue||"[]").length&&R.createElement("span",{className:"Gray_bd LineHeight34 mLeft4"},$t[b.type].placeholder),JSON.parse(b.fieldValue||"[]").map(function(Rt,St){return R.createElement("li",{key:St,className:"tagItem flexRow"},R.createElement("span",{className:"tag bold",title:Rt[$t[b.type].name]},Rt[$t[b.type].name]),R.createElement("span",{className:"delTag",onClick:function(oa){oa.stopPropagation(),ue.deleteTags(Rt[$t[b.type].id],le)}},R.createElement(j.Z,{icon:"close",className:"pointer"})))}))),this.renderOtherFields(b,le))}if(b.type===28){var cn=_.find(Ee,function(Rt){return Rt.controlId===b.fieldId}),Mn=cn.options;return _e=Mn.map(function(Rt){return{text:Rt.value,value:Rt.key}}),b.fieldValue&&_e.unshift({text:_l("\u6E05\u9664\u9009\u62E9"),value:""}),R.createElement("div",{className:"mTop8 flexRow relative"},b.fieldValueId?this.renderSelectFieldsValue(b,le):R.createElement(k.Z,{className:"flowDropdown flex clearBorderRadius",data:_e,value:b.fieldValue||void 0,border:!0,isAppendToBody:!0,onChange:function(St){return ue.updateSingleControlValue({fieldValue:St},le)}}),this.renderOtherFields(b,le))}if(b.type===29||b.type===10000008){var dt=(_.find(Ee,function(Rt){return Rt.controlId===b.fieldId})||{}).flowNodeAppDtos||[],$e=[dt.map(function(Rt){return{text:ue.renderRelationField(Rt),value:Rt.nodeId}})];return b.nodeId&&$e[0].unshift({text:_l("\u6E05\u9664\u9009\u62E9"),value:""}),R.createElement("div",{className:"mTop8 flexRow relative"},b.fieldValueId?this.renderSelectFieldsValue(b,le):R.createElement(k.Z,{className:"flowDropdown flex clearBorderRadius",data:$e,value:b.nodeId||void 0,border:!0,isAppendToBody:!0,placeholder:_l("\u9009\u62E9\u6D41\u7A0B\u4E2D\u5BF9\u5E94\u6B64\u5DE5\u4F5C\u8868\u7684\u8282\u70B9\u5BF9\u8C61"),renderTitle:function(){return ue.renderRelationField(_.find(dt,function(St){return St.nodeId===b.nodeId})||b)},onChange:function(St){return ue.updateSingleControlValue({nodeId:St},le)}}),this.renderOtherFields(b,le))}if(b.type===42||b.type===10000003||b.type===10000007)return R.createElement("div",{className:"mTop8 flexRow relative"},b.fieldValueId?this.renderSelectFieldsValue(b,le):R.createElement("div",{className:"actionControlBox flex clearBorderRadius"}),this.renderOtherFields(b,le));if(b.type===46){var jt=getCookie("i18n_langtag")||md.global.Config.DefaultLang,rn=b.unit==="1"?"HH:mm":"HH:mm:ss";return R.createElement("div",{className:"mTop8 flexRow relative"},b.fieldValueId?this.renderSelectFieldsValue(b,le):R.createElement("div",{className:"actionControlBox flex ThemeBorderColor3 clearBorderRadius"},R.createElement(C.Z,{className:"triggerConditionTime",showNow:!1,bordered:!1,suffixIcon:null,clearIcon:R.createElement(j.Z,{icon:"cancel1",className:"Font16 Gray_9e ThemeHoverColor3"}),inputReadOnly:!0,placeholder:_l("\u8BF7\u9009\u62E9\u65F6\u95F4"),format:rn,value:b.fieldValue?Be()(b.fieldValue,rn):null,onChange:function(St,zt){return ue.updateSingleControlValue({fieldValue:zt},le)}})),this.renderOtherFields(b,le))}return null}}]),he}(R.Component)},50732:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>I});var h=t(52945),Te=t.n(h);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(31546);var Ce=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var Ne=t(5618);var j=t(96486),L=t.n(j);const I=function(k){var e=k.controls,oe=k.sorts,m=k.updateSource,y=function(R){return Ce.createElement("span",null,L().find(e,function(a){return a.controlId===R}).controlName)},i=[],me=e.filter(function(r){return L().includes([2,6,8,15,16,31,37,38,46],r.type)||r.type===29&&r.enumDefault===2}).map(function(r){return{text:Ce.createElement("div",{className:"ellipsis"},Ce.createElement("span",{className:"field"},"[",Ne.Do[r.type],"]"),Ce.createElement("span",null,r.controlName)),value:r.controlId,searchText:r.controlName}});if(oe=oe.length&&e.find(function(r){return r.controlId===oe[0].controlId})?oe:[],oe.length){var J=e.find(function(r){return r.controlId===oe[0].controlId}),T=J.type,te=J.enumDefault,E=J.enumDefault2;L().includes([6,8,31],T)||T===29&&te===2||T===37&&E===6||T===38&&te===1?i=[{text:"1 \u2192 9",value:!0},{text:"9 \u2192 1",value:!1}]:T===2?i=[{text:_l("A \u2192 Z"),value:!0},{text:_l("Z \u2192 A"),value:!1}]:T===46?i=[{text:_l("\u6700\u65E9\u7684\u5728\u524D"),value:!0},{text:_l("\u6700\u665A\u7684\u5728\u524D"),value:!1}]:i=[{text:_l("\u6700\u65B0\u7684\u5728\u524D"),value:!1},{text:_l("\u6700\u65E7\u7684\u5728\u524D"),value:!0}],me=[me].concat([{text:Ce.createElement("div",{className:"ellipsis"},Ce.createElement("span",{className:"field"},Ce.createElement("i",{className:"Font16 icon-workflow_empty"})),Ce.createElement("span",null,_l("\u6E05\u7A7A"))),value:"",searchText:_l("\u6E05\u7A7A")}])}return Ce.createElement("div",{className:"mTop15 flexRow"},Ce.createElement(C.Z,{className:"flowDropdown flex",disabled:!me.length,data:me,value:oe.length?oe[0].controlId:void 0,border:!0,openSearch:!0,renderTitle:function(){return!!oe.length&&oe[0].controlId&&y(oe[0].controlId)},placeholder:_l("\u9009\u62E9\u5B57\u6BB5"),onChange:function(R){return m({sorts:R?[{controlId:R,isAsc:!1,controlType:e.find(function(a){return a.controlId===R}).type}]:[]})}}),Ce.createElement(C.Z,{className:"flowDropdown flex mLeft10",disabled:!oe.length,data:i,value:oe.length?oe[0].isAsc:void 0,border:!0,placeholder:_l("\u9009\u62E9\u89C4\u5219"),onChange:function(R){return m({sorts:[Te()({},oe[0],{isAsc:R})]})}}))}},90890:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>te});var h=t(85105),Te=t.n(h),C=t(99663),Ce=t(22600),Ne=t(49135),j=t(93196),L=t(67294),I=t(93967),k=t.n(I),e=t(662),oe=t(29440),m=t(42424),y=t(30381),i=t.n(y),me=t(72078),J,T,te=(T=J=function(E){(0,j.default)(r,E);function r(R){(0,C.default)(this,r);var a=(0,Ne.default)(this,(r.__proto__||Te()(r)).call(this,R));return a.renderSelectFieldsValue=function(){var z=a.props,N=z.data,q=z.updateSource;return L.createElement("div",{className:k()("actionControlBox flex ThemeBorderColor3 clearBorderRadius ellipsis actionCustomBox")},L.createElement("span",{className:"flexRow pTop3"},L.createElement(m.Z,{flowNodeType:N.fieldNodeType,appType:N.fieldAppType,actionId:N.fieldActionId,nodeName:(0,me.iQ)(N.fieldNodeId,N.sourceType,N.fieldNodeName),controlId:N.fieldControlId,controlName:N.fieldControlName})),L.createElement("i",{className:"icon-delete actionControlDel ThemeColor3",onClick:function(){return q({fieldControlId:"",fieldControlType:0,fieldControlName:"",fieldNodeId:"",fieldNodeName:"",fieldNodeType:0,fieldValue:""})}}))},a.renderOtherFields=function(){var z=a.props,N=z.projectId,q=z.processId,K=z.relationId,ye=z.selectNodeId,v=z.updateSource,se=z.type;return L.createElement(oe.Z,{item:{type:se==="date"?16:6},fieldsVisible:a.state.fieldsVisible,projectId:N,processId:q,relationId:K,selectNodeId:ye,handleFieldClick:function(U){var pe=U.actionId,Y=U.fieldValueId,be=U.appType,Q=U.fieldValue,Le=U.fieldValueName,Be=U.nodeId,ke=U.nodeName,Ie=U.nodeTypeId,he=U.fieldValueType,Re=U.sourceType;v({fieldActionId:pe,fieldControlName:Le,fieldNodeName:ke,fieldAppType:be,fieldNodeType:Ie,fieldNodeId:Be,fieldValue:Q,fieldControlId:Y,fieldControlType:he,sourceType:Re})},openLayer:function(){return a.setState({fieldsVisible:!0})},closeLayer:function(){return a.setState({fieldsVisible:!1})}})},a.state={fieldsVisible:!1},a}return(0,Ce.default)(r,[{key:"renderDate",value:function(){var a=this.props,z=a.data,N=a.updateSource,q=a.timePicker,K=a.minDate;return L.createElement("div",{className:"actionControlBox flex ThemeBorderColor3 clearBorderRadius"},L.createElement(e.Z,{selectedValue:z.fieldValue?i()(z.fieldValue):null,timePicker:!!q,allowClear:!1,min:K,onOk:function(v){return N({fieldValue:v.format(q?"YYYY-MM-DD HH:mm":"YYYY-MM-DD")})}},z.fieldValue?i()(z.fieldValue).format(q?"YYYY-MM-DD HH:mm":"YYYY-MM-DD"):L.createElement("span",{className:"Gray_bd"},_l("\u8BF7\u9009\u62E9\u65E5\u671F"))))}},{key:"renderNumber",value:function(){var a=this,z=this.props,N=z.type,q=z.data,K=z.updateSource,ye=z.hasOtherField,v=z.min,se=z.max,de={numberFieldValue:_l("\u586B\u5199\u5929\u6570"),hourFieldValue:_l("\u586B\u5199\u5C0F\u65F6\u6570"),minuteFieldValue:_l("\u586B\u5199\u5206\u949F\u6570"),secondFieldValue:_l("\u586B\u5199\u79D2\u949F\u6570"),number:""};return L.createElement("input",{type:"text",className:k()("flex ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10",{clearBorderRadius:ye}),placeholder:de[N],value:q.fieldValue,onChange:function(pe){return K({fieldValue:a.formatVal(pe.target.value)})},onBlur:function(pe){v&&v>parseInt(pe.target.value||0,10)&&(pe.target.value=v,K({fieldValue:v.toString()})),se&&se<parseInt(pe.target.value||0,10)&&(pe.target.value=se,K({fieldValue:se.toString()}))}})}},{key:"formatVal",value:function(a){var z=this.props,N=z.type,q=z.allowedEmpty,K=z.min;if(a=parseInt(a,10),q&&!a&&a!==0)return"";if(typeof a!="number"||isNaN(a))return K||0;switch(N){case"numberFieldValue":return Math.max(0,Math.min(a,999));case"hourFieldValue":return Math.max(0,Math.min(a,23));case"minuteFieldValue":case"secondFieldValue":return Math.max(0,Math.min(a,59));case"number":return a}}},{key:"render",value:function(){var a=this.props,z=a.data,N=a.type,q=a.hasOtherField;return L.createElement("div",{className:"flexRow relative"},z.fieldNodeId?this.renderSelectFieldsValue():N==="date"?this.renderDate():this.renderNumber(),q&&this.renderOtherFields())}}]),r}(L.Component),J.defaultProps={hasOtherField:!0,min:0,max:0,minDate:null},T)},42424:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>L});var h=t(97373),Te=t(94055),C=t(67294),Ce=t(93967),Ne=t.n(Ce),j=t(72078);const L=function(I){var k=I.flowNodeType,e=I.appType,oe=I.actionId,m=I.nodeName,y=I.controlId,i=I.controlName,me=I.className,J=I.onClick,T=J===void 0?function(){}:J,te=I.isSourceApp,E=I.actualityValue,r=E===void 0?"":E,R=!m||!i?"error":"";return te?C.createElement(Te.default,{title:i||!y?null:"ID\uFF1A"+y},C.createElement("div",{className:"flowDetailTagBox"},C.createElement("div",{className:Ne()("flowDetailMemberNodeName ellipsis bold",R),style:{paddingLeft:13,paddingRight:13,borderRadius:26,borderRightWidth:1},title:i||""},i||"- -"))):C.createElement(Te.default,{title:i||!y?null:"ID\uFF1A"+y},C.createElement("div",{className:Ne()("flowDetailTagBox",me),onClick:T},C.createElement("div",{className:Ne()("flowDetailMemberNodeName ellipsis bold",R),title:m||_l("\u8282\u70B9\u5220\u9664")},C.createElement("i",{className:Ne()("Font14 mRight5",(0,j.wu)(parseInt(k),parseInt(e),oe),{Gray_9e:!!m&&!!i})}),m||_l("\u8282\u70B9\u5220\u9664")),C.createElement("div",{className:Ne()("flowDetailMemberArrow1",R)}),C.createElement("div",{className:Ne()("flowDetailMemberArrow2",R)}),C.createElement("div",{className:Ne()("flowDetailMemberFieldName ellipsis bold",R),title:i},i||"- -",r&&" = "+r)))}},46007:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>y});var h=t(31546),Te=t(85105),C=t.n(Te),Ce=t(99663),Ne=t(22600),j=t(49135),L=t(93196),I=t(67294),k=t(46665),e=t(5618),oe,m,y=(m=oe=function(i){(0,L.default)(me,i);function me(){var J,T,te,E;(0,Ce.default)(this,me);for(var r=arguments.length,R=Array(r),a=0;a<r;a++)R[a]=arguments[a];return E=(T=(te=(0,j.default)(this,(J=me.__proto__||C()(me)).call.apply(J,[this].concat(R))),te),te.updateTimeType=function(z){var N=te.props,q=N.updateSource,K=N.dateNoTime,ye=void 0,v=void 0;z===e.rW.CURRENT?(ye=0,v=e.uK.DAY):(ye=K?1:15,v=K?e.uK.DAY:e.uK.MINUTE,te.text&&(te.text.value=ye)),q({executeTimeType:z,number:ye,unit:v})},T),(0,j.default)(te,E)}return(0,Ne.default)(me,[{key:"componentWillReceiveProps",value:function(T,te){T.data.number!==this.props.data.number&&this.text&&(this.text.value=T.data.number)}},{key:"checkNumberControl",value:function(T,te){var E=T.target.value.replace(/[^\d]/g,"");T.target.value=E,te&&this.props.updateSource({number:E})}},{key:"render",value:function(){var T=this,te=this.props,E=te.data,r=te.dateNoTime,R=te.updateSource,a=[{text:r?_l("\u5728\u4EE5\u4E0A\u65E5\u671F"):_l("\u5728\u4EE5\u4E0A\u65E5\u671F\u65F6\u95F4"),value:e.rW.CURRENT,className:e.rW.CURRENT===E.executeTimeType?"ThemeColor3":""},{text:_l("\u4E4B\u524D"),value:e.rW.BEFORE,className:e.rW.BEFORE===E.executeTimeType?"ThemeColor3":""},{text:_l("\u4E4B\u540E"),value:e.rW.AFTER,className:e.rW.AFTER===E.executeTimeType?"ThemeColor3":""}],z=[{text:e.rO[e.uK.MINUTE],value:e.uK.MINUTE,className:E.unit===e.uK.MINUTE?"ThemeColor3":""},{text:e.rO[e.uK.HOUR],value:e.uK.HOUR,className:E.unit===e.uK.HOUR?"ThemeColor3":""},{text:e.rO[e.uK.DAY],value:e.uK.DAY,className:E.unit===e.uK.DAY?"ThemeColor3":""}];return I.createElement(I.Fragment,null,I.createElement("div",{className:"mTop10 flexRow alignItemsCenter"},I.createElement(h.Z,{className:"flowDropdown",style:{width:E.executeTimeType===e.rW.CURRENT?"100%":192},data:a,value:E.executeTimeType,border:!0,onChange:this.updateTimeType}),E.executeTimeType!==e.rW.CURRENT&&I.createElement(I.Fragment,null,I.createElement("input",{type:"text",className:"ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10 mLeft15",ref:function(q){T.text=q},defaultValue:E.number,style:{width:100,minWidth:80},onKeyUp:function(q){return T.checkNumberControl(q)},onPaste:function(q){return T.checkNumberControl(q)},onBlur:function(q){return T.checkNumberControl(q,!0)}}),r?I.createElement("div",{className:"mLeft15 flex"},_l("\u5929")):I.createElement(h.Z,{className:"flowDropdown flex mLeft15",data:z,value:E.unit,border:!0,onChange:function(q){return R({unit:q})}}))),r&&I.createElement("div",{className:"mTop10 flexRow alignItemsCenter timeWidth"},I.createElement(k.Z,{type:"minute",value:{hour:E.time?parseInt(E.time.split(":")[0]):8,minute:E.time?parseInt(E.time.split(":")[1]):0,second:0},onChange:function(q,K){R({time:K.hour.toString().padStart(2,"0")+":"+K.minute.toString().padStart(2,"0")})}}),I.createElement("div",{className:"flex mLeft15"},_l("\u6267\u884C"))))}}]),me}(I.Component),oe.defaultProps={dateNoTime:!0},m)},10941:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>we});var h=t(88239),Te=t(52945),C=t.n(Te),Ce=t(68841),Ne=t(12528),j=t(51156),L=t(3540),I=t(33867),k=t(60967),e=t(31546),oe=t(97373),m=t(94055),y=t(85105),i=t.n(y),me=t(99663),J=t(22600),T=t(49135),te=t(93196),E=t(67294),r=t(45697),R=t.n(r),a=t(662),z=t(93967),N=t.n(z),q=t(88106),K,ye,v=(ye=K=function(Ee){(0,te.default)(b,Ee);function b(le){(0,me.default)(this,b);var ae=(0,T.default)(this,(b.__proto__||i()(b)).call(this,le));return ae.state={val:ae.props.defaultValue,charWidth:0,inputActive:!1},ae.createTag=function(ve){var W=ve.target.value.trim(),ce=ae.props.tags;(ve.keyCode===13||ve.type==="blur")&&(ae.setState({val:"",inputActive:!1,charWidth:12}),ce.indexOf(W)===-1&&W&&ae.props.createTag(W))},ae.onChange=function(ve){var W=ve.target.value;ae.setState({val:W},function(){var ce=ae.textWrap.offsetWidth,Z=ce;ae.setState({charWidth:Z})})},ae.handleClick=function(){ae.tagInput.focus()},ae.handleFocus=function(){ae.setState({inputActive:!0})},ae.delTag=function(ve){ae.props.delTag(ve)},ae}return(0,J.default)(b,[{key:"render",value:function(){var ae,ve=this,W=this.props,ce=W.tags,Z=W.className,_e=W.disable,P=this.state,xe=P.val,bt=P.inputActive,tt=P.charWidth,Dt=P.inputFocus;return E.createElement("div",{className:N()("tagInputWrap",(ae={},(0,q.default)(ae,Z,Z),(0,q.default)(ae,"disable",_e),(0,q.default)(ae,"active",bt),ae))},E.createElement("ul",{className:"tagWrap"},ce.map(function(vn,Fe){return E.createElement("li",{key:Fe,className:"tagItem flexRow"},E.createElement("span",{className:"tag",title:vn},vn),E.createElement("span",{className:"delTag",onClick:function(){return ve.delTag(vn)}},E.createElement(I.Z,{icon:"close",className:"pointer"})))}),E.createElement("li",{className:"flex",onClick:this.handleClick},E.createElement("div",{className:"inputBox"},E.createElement("input",{type:"text",autoFocus:Dt,disabled:_e,ref:function(Fe){return ve.tagInput=Fe},style:{width:tt+12},value:xe,onFocus:this.handleFocus,onChange:this.onChange,onKeyDown:this.createTag,onBlur:this.createTag})))),E.createElement("span",{ref:function(Fe){return ve.textWrap=Fe},style:{visibility:"hidden",position:"absolute"}},xe),E.createElement("div",{className:N()("createTag ellipsis",{show:xe.length!==0}),onClick:this.userTag},"\u4F7F\u7528 \u201C"+xe+"\u201D"))}}]),b}(E.Component),K.propTypes={defaultValue:R().string,className:R().string,createTag:R().func,delTag:R().func,disable:R().bool},K.defaultProps={defaultValue:"",disable:!1},ye),se=t(5618),de=t(72078),U=t(24488),pe=t(42424),Y=t(29440),be=t(75809),Q=t(60510),Le=t(27749),Be=t(30381),ke=t.n(Be),Ie=t(96486),he=t.n(Ie),Re,ue,we=(ue=Re=function(Ee){(0,te.default)(b,Ee);function b(le){(0,me.default)(this,b);var ae=(0,T.default)(this,(b.__proto__||i()(b)).call(this,le));return ae.cacheCityPickerData=[],ae.switchField=function(ve){var W=ve.filedId,ce=ve.i,Z=ve.j,_e=ve.nodeId,P=_e===void 0?"":_e,xe=ve.nodeName,bt=xe===void 0?"":xe,tt=ve.nodeType,Dt=tt===void 0?-1:tt,vn=ve.appType,Fe=vn===void 0?-1:vn,Bt=ve.actionId,kt=Bt===void 0?"":Bt,Tt=ve.sourceType,tn=he().cloneDeep(ae.props.data),Vn=ae.props,Zn=Vn.controls,Ot=Vn.updateSource,$t=Vn.isNodeHeader,cn=Vn.selectNodeId,Mn=void 0;$t?Zn.forEach(function(dt){dt.nodeId===P&&(Mn=he().find(dt.controls,function($e){return $e.controlId===W}))}):Mn=he().find(Zn,function(dt){return dt.controlId===W}),tn[ce][Z]={filedId:W,filedTypeId:Mn.type,filedValue:Mn.controlName,nodeId:P||cn,nodeName:bt,nodeType:Dt,appType:Fe,actionId:kt,enumDefault:Mn.enumDefault,conditionId:((0,de.v7)(Mn.type,Mn.enumDefault)||{}).defaultConditionId,conditionValues:[],sourceType:Tt},Ot(tn)},ae.deleteCondition=function(ve,W){var ce=he().cloneDeep(ae.props.data),Z=ae.props.updateSource;ce[ve].splice(W,1),ce[ve].length||ce.splice(ve,1),Z(ce)},ae.onFetchData=he().debounce(function(ve){ae.setState({keywords:ve})},500),ae.clearNoNum=function(ve,W,ce,Z){var _e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,P=ve.target.value.replace(/[^-\d.]/g,"").replace(/^\./g,"").replace(/^-/,"$#$").replace(/-/g,"").replace("$#$","-").replace(/^-\./,"-").replace(".","$#$").replace(/\./g,"").replace("$#$",".");W&&(P==="."||P==="-")&&(P=""),ve.target.value=P,W&&ae.updateConditionValue({value:P,i:ce,j:Z,second:_e})},ae.updateConditionValue=function(ve){var W=ve.value,ce=ve.i,Z=ve.j,_e=ve.second,P=ve.isSingle,xe=he().cloneDeep(ae.props.data),bt=ae.props.updateSource,tt=xe[ce][Z].filedTypeId;if((tt===1||tt===2||tt===3||tt===4||tt===5||tt===7||tt===29||tt===32||tt===33||tt===50)&&(he().includes(xe[ce][Z].conditionValues.map(function(kt){return kt.value}),W)?he().remove(xe[ce][Z].conditionValues,function(kt){return kt.value===W}):xe[ce][Z].conditionValues.push({value:W})),(tt===6||tt===8||tt===31||tt===38&&typeof _e=="boolean")&&(xe[ce][Z].conditionValues[_e?1:0]={value:W}),(tt===9||tt===10||tt===11||tt===28||tt===38)&&(typeof W=="string"?he().remove(xe[ce][Z].conditionValues,function(kt){return kt.value.key===W}):P?xe[ce][Z].conditionValues=[{value:W}]:xe[ce][Z].conditionValues.push({value:W})),tt===19||tt===23||tt===24)if(typeof W=="string")he().remove(xe[ce][Z].conditionValues,function(kt){return kt.value.key===W});else{var Dt=he().last(W),vn=Dt.id,Fe=he().find(xe[ce][Z].conditionValues,function(kt){return kt.value.key===vn});Fe||xe[ce][Z].conditionValues.push({value:{key:vn,value:Dt.path}})}if(he().includes([26,27,48,10000001],tt)){var Bt={26:{id:"accountId",name:"fullname"},27:{id:"departmentId",name:"departmentName"},48:{id:"organizeId",name:"organizeName"},10000001:{id:"accountId",name:"fullname"}};typeof W=="string"?he().remove(xe[ce][Z].conditionValues,function(kt){return kt.value.key===W}):P?xe[ce][Z].conditionValues=[{value:{key:(W[0]||{})[Bt[tt].id],value:(W[0]||{})[Bt[tt].name]}}]:W.forEach(function(kt){xe[ce][Z].conditionValues.push({value:{key:kt[Bt[tt].id],value:kt[Bt[tt].name]}})})}bt(xe)},ae.switchCondition=function(ve,W,ce){var Z=he().cloneDeep(ae.props.data),_e=ae.props.updateSource;Z[W][ce].conditionId=ve,Z[W][ce].conditionValues=[],_e(Z)},ae.switchFilterCondition=function(ve,W,ce,Z){var _e=he().cloneDeep(ae.props.data),P=ae.props.updateSource;_e[ce][Z][ve]=W,P(_e)},ae.updateConditionDateValue=function(ve){var W=ve.value,ce=ve.i,Z=ve.j,_e=ve.type,P=_e===void 0?20:_e,xe=ve.second,bt=xe===void 0?!1:xe,tt=he().cloneDeep(ae.props.data),Dt=ae.props.updateSource;tt[ce][Z].conditionValues[bt?1:0]={type:P,value:W},Dt(tt)},ae.updateDynamicConditionValue=function(ve){var W=ve.actionId,ce=ve.appType,Z=ve.fieldValueId,_e=ve.fieldValueName,P=ve.nodeId,xe=ve.nodeName,bt=ve.nodeTypeId,tt=ve.i,Dt=ve.j,vn=ve.second,Fe=ve.isDel,Bt=ve.sourceType,kt=he().cloneDeep(ae.props.data),Tt=ae.props.updateSource;Fe?kt[tt][Dt].conditionValues.length>1?kt[tt][Dt].conditionValues[vn?1:0]="":kt[tt][Dt].conditionValues=[]:kt[tt][Dt].conditionValues[vn?1:0]={actionId:W,appType:ce,controlId:Z,controlName:_e,nodeId:P,nodeName:xe,nodeType:bt,sourceType:Bt},Tt(kt)},ae.addAndCondition=function(ve){var W=he().cloneDeep(ae.props.data),ce=ae.props.updateSource;W[ve].push({}),ce(W)},ae.addOrCondition=function(){var ve=ae.props,W=ve.data,ce=ve.updateSource,Z=ve.openNewFilter,_e=ve.addConditions;Z?_e():ce(he().cloneDeep(W).concat([[{}]]))},ae.state={showControlsIndex:"",moreFieldsIndex:"",controlsData:ae.getFieldData(le.controls),search:void 0,keywords:""},ae.cityPickerSearchRef=E.createRef(),ae}return(0,J.default)(b,[{key:"componentWillReceiveProps",value:function(ae,ve){he().isEqual(ae.controls,this.props.controls)||this.setState({controlsData:this.getFieldData(ae.controls)})}},{key:"getFieldData",value:function(ae){var ve=this,W=this.props.isNodeHeader,ce=void 0;return W?ce=ae.map(function(Z){return{text:Z.nodeName,id:Z.nodeId,nodeTypeId:Z.nodeTypeId,appName:Z.appName,appType:Z.appType,appTypeName:Z.appTypeName,actionId:Z.actionId,isSourceApp:Z.isSourceApp,items:Z.controls.map(function(_e){return{type:_e.type,value:_e.controlId,field:se.Do[_e.type],text:_e.controlName,sourceType:_e.sourceControlType}})}}):ce=ae.map(function(Z){return{text:ve.renderTitle(Z),value:Z.controlId,searchText:Z.controlName}}),ce}},{key:"renderTitle",value:function(ae){return E.createElement(E.Fragment,null,E.createElement("span",{className:"Gray_9e mRight5"},"[",se.Do[ae.type],"]"),E.createElement(m.default,{title:ae.controlName?null:"ID\uFF1A"+ae.controlId},E.createElement("span",{style:{color:ae.controlName?"#333":"#f44336"}},ae.controlName||_l("\u5B57\u6BB5\u5DF2\u5220\u9664"))))}},{key:"renderItem",value:function(ae,ve,W,ce,Z){var _e=this,P=this.props,xe=P.singleCondition,bt=P.controls,tt=P.isNodeHeader,Dt=P.openNewFilter,vn=P.isLast,Fe=P.filterEncryptCondition,Bt=P.excludingDepartmentSpecialFilter,kt=void 0,Tt=[],tn=void 0,Vn=void 0;tt?bt.forEach(function($t){$t.nodeId===ae.nodeId&&(Vn=he().find($t.controls,function(cn){return cn.controlId===ae.filedId}))}):Vn=he().find(bt,function($t){return $t.controlId===ae.filedId});var Zn=he().get(Vn||{},"advancedSetting.showtype"),Ot=he().get(Vn||{},"unit");return ae.filedId&&(Tt=((0,de.v7)(ae.filedTypeId,ae.enumDefault)||{ids:[]}).ids.map(function($t,cn){return(he().includes([15,16],ae.filedTypeId)||ae.filedTypeId===38&&ae.enumDefault===2)&&(ae.conditionId==="15"&&$t==="37"||ae.conditionId==="16"&&$t==="38"||ae.conditionId==="17"&&$t==="41"||ae.conditionId==="18"&&$t==="39")&&(tn=cn),{text:(0,de.nf)(Vn||{},$t),value:$t}}),kt=(0,de.ED)(ae.conditionId)),typeof tn=="number"&&(Tt[tn].text=Tt[tn].text+"\uFF08\u65B0\u7248\u6BD4\u8F83\u5230\u65F6\u95F4\uFF09",Tt.splice(tn,0,{text:se.kE[ae.conditionId]+"\uFF08\u65E7\u7248\u6BD4\u8F83\u5230\u65E5\u671F\uFF09",value:ae.conditionId,disabled:!0})),Fe&&Vn&&Vn.encryId&&he().remove(Tt,function($t){return he().includes(["3","4","5","6","11","12","13","14","15","16","44","45"],$t.value)}),Bt&&Vn&&Vn.type===27&&he().remove(Tt,function($t){return he().includes(["48","49"],$t.value)}),E.createElement("div",{key:ve+"-"+W,className:"mTop15 triggerConditionItem"},this.renderControls(ae,ve,W),E.createElement("div",{className:"mTop10 flexRow alignItemsCenter"},E.createElement(e.Z,{className:N()("flowDropdown fixedHeight Width200"),isAppendToBody:!0,menuClass:"flowTriggerDropdown",data:Tt,value:ae.conditionId||void 0,border:!0,placeholder:_l("\u8BF7\u9009\u62E9"),disabled:!ae.filedId,renderTitle:function(){return ae.conditionId&&E.createElement("span",null,(0,de.nf)(Vn||{},ae.conditionId)+(typeof tn=="number"?"*":""))},onChange:function(cn){return _e.switchCondition(cn,ve,W)}}),E.createElement("div",{className:"flex"}),ae.conditionId&&Dt&&!he().includes(["7","8","31","32"],ae.conditionId)&&ae.conditionValues[0]&&ae.conditionValues[0].controlId&&E.createElement(k.Z,{text:_l("\u6761\u4EF6\u5F02\u5E38\u65F6\u5FFD\u7565"),checked:ae.ignoreEmpty===1,onClick:function(cn){return _e.switchFilterCondition("ignoreEmpty",cn?0:1,ve,W)}}),ae.conditionId&&(0,de.RV)(ae.filedTypeId,ae.conditionId)&&E.createElement(k.Z,{className:"mLeft15",text:_l("\u503C\u4E3A\u7A7A\u65F6\u5FFD\u7565"),checked:ae.ignoreValueEmpty===1,onClick:function(cn){return _e.switchFilterCondition("ignoreValueEmpty",cn?0:1,ve,W)}})),E.createElement("div",{className:"mTop10 relative flexRow"},this.renderItemValue(ae,kt,ve,W,Zn,Ot),(ae.conditionId==="1"||ae.conditionId==="3"||ae.conditionId==="5"||ae.conditionId==="6")&&E.createElement("span",{className:"triggerTipIcon ThemeColor3 Block tip-bottom-left","data-tip":_l("\u5F53\u9009\u62E9\u591A\u4E2A\u503C\uFF0C\u5219\u8868\u793A\u662F\u5176\u4E2D\u4EFB\u4F55\u4E00\u4E2A\u503C\u65F6\uFF0C\u5373\u7B26\u5408\u6761\u4EF6")},E.createElement("i",{className:"icon-info Font16"})),(ae.conditionId==="2"||ae.conditionId==="4")&&E.createElement("span",{className:"triggerTipIcon ThemeColor3 Block tip-bottom-left","data-tip":_l("\u5F53\u9009\u62E9\u591A\u4E2A\u503C\uFF0C\u5219\u8868\u793A\u4E0D\u662F\u5176\u4E2D\u6240\u6709\u503C\u65F6\uFF0C\u624D\u7B26\u5408\u6761\u4EF6")},E.createElement("i",{className:"icon-info Font16"}))),Z?E.createElement("div",{className:"triggerConditionBtn mTop15"},xe?E.createElement(E.Fragment,null,ve===0&&this.props.data.length===1&&E.createElement("span",{className:"ThemeBorderColor3",onClick:function(){return _e.addAndCondition(ve)}},"+ ",_l("\u4E14")),W===0&&ve===this.props.data.length-1&&E.createElement("span",{className:"ThemeBorderColor3",onClick:this.addOrCondition},"+ ",_l("\u6216"))):E.createElement(E.Fragment,null,E.createElement("span",{className:"ThemeBorderColor3",onClick:function(){return _e.addAndCondition(ve)}},"+ ",_l("\u4E14")),ce&&(vn||!Dt)&&E.createElement("span",{className:"ThemeBorderColor3",onClick:this.addOrCondition},"+ ",_l("\u6216")))):E.createElement("div",{className:"Font13 Gray_9e mTop15"},_l("\u4E14")),Z&&!ce&&!Dt&&E.createElement("div",{className:"Font14 triggerConditionSplit mTop15"},E.createElement("span",null,_l("\u6216"))))}},{key:"renderControls",value:function(ae,ve,W){var ce=this,Z=this.props.isNodeHeader,_e=this.state,P=_e.showControlsIndex,xe=_e.controlsData;return E.createElement("div",{className:"relative"},Z?E.createElement("div",{className:"ming Dropdown pointer flowDropdown flowDropdownBorder",onClick:function(tt){$(tt.target).closest(".ant-tooltip").length||ce.setState({showControlsIndex:ve+"-"+W})}},E.createElement("div",{className:"Dropdown--input Dropdown--border"},E.createElement("span",{className:"value"},ae.filedId?E.createElement(pe.Z,{flowNodeType:ae.nodeType,appType:ae.appType,actionId:ae.actionId,nodeName:(0,de.iQ)(ae.nodeId,ae.sourceType,ae.nodeName),controlId:ae.filedId,controlName:ae.filedValue,actualityValue:ae.fromValue}):E.createElement("div",{className:"Gray_9e"},_l("\u8BF7\u9009\u62E9"))),E.createElement("i",{className:"ming Icon icon-default icon icon-arrow-down-border mLeft8 Gray_9e"}))):E.createElement(e.Z,{className:"flowDropdown",isAppendToBody:!0,data:xe,value:ae.filedId,border:!0,openSearch:!0,placeholder:_l("\u8BF7\u9009\u62E9"),disabledClickElement:".ant-tooltip",renderTitle:function(){return ae.filedId&&ce.renderTitle({type:ae.filedTypeId,controlName:ae.filedValue,controlId:ae.filedId})},onChange:function(tt){return ce.switchField({i:ve,j:W,filedId:tt})}}),E.createElement("i",{className:"icon-delete2 Font16 ThemeColor3 triggerTipIcon",onClick:function(){return ce.deleteCondition(ve,W)}}),P===ve+"-"+W&&E.createElement(U.Z,{className:"actionFields",noItemTips:_l("\u6CA1\u6709\u53EF\u7528\u7684\u5B57\u6BB5"),condition:xe,openSearch:!0,handleFieldClick:function(tt){var Dt=tt.fieldValueId,vn=tt.nodeId,Fe=tt.nodeName,Bt=tt.nodeTypeId,kt=tt.appType,Tt=tt.actionId,tn=tt.sourceType;ce.switchField({i:ve,j:W,filedId:Dt,nodeId:vn,nodeName:Fe,nodeType:Bt,appType:kt,actionId:Tt,sourceType:tn}),ce.setState({showControlsIndex:""})},onClose:function(){return ce.setState({showControlsIndex:""})}}))}},{key:"renderItemValue",value:function(ae){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,W=arguments[2],ce=arguments[3],Z=this,_e=arguments[4],P=arguments[5],xe=this.props,bt=xe.isNodeHeader,tt=xe.projectId,Dt=this.state,vn=Dt.search,Fe=Dt.keywords;if(he().isEmpty(ae))return E.createElement("div",{className:"flex triggerConditionNum triggerConditionDisabled"});if(ve===0)return null;var Bt=ae.filedId,kt=ae.filedTypeId,Tt=ae.conditionValues,tn=ae.enumDefault,Vn=ae.conditionId;if(kt===1||kt===2||kt===3||kt===4||kt===5||kt===7||kt===29||kt===32||kt===33||kt===50)return E.createElement("div",{className:"flex relative flexRow"},Tt[0]&&Tt[0].controlId?this.renderSelectFieldsValue(Tt[0],W,ce):E.createElement(v,{disable:he().includes(["9","10","33","34","43"],ae.conditionId)&&kt===29,className:"flex clearBorderRadius",tags:Tt.map(function(St){return St.value}),createTag:function(zt){return Z.updateConditionValue({value:zt,i:W,j:ce})},delTag:function(zt){return Z.updateConditionValue({value:zt,i:W,j:ce})}}),this.renderOtherFields(ae,W,ce));if(kt===6||kt===8||kt===31||kt===38&&tn===1)return E.createElement("div",{className:"flex"},E.createElement("div",{className:"flexRow relative"},Tt[0]&&Tt[0].controlId?this.renderSelectFieldsValue(Tt[0],W,ce):E.createElement("input",{key:Bt+Vn,type:"text",className:"triggerConditionNum flex ThemeBorderColor3 clearBorderRadius",defaultValue:Tt[0]?Tt[0].value:"",placeholder:he().includes(["15","16"],Vn)?_l("\u6700\u5C0F\u503C"):"",onKeyUp:function(zt){return Z.clearNoNum(zt)},onPaste:function(zt){return Z.clearNoNum(zt)},onBlur:function(zt){return Z.clearNoNum(zt,!0,W,ce)}}),this.renderOtherFields(ae,W,ce),ve>1&&E.createElement("div",{className:"Font13 mLeft10 Gray_9e LineHeight36"},_l("\u81F3"))),ve>1&&E.createElement("div",{className:"mTop10 flexRow relative"},Tt[1]&&Tt[1].controlId?this.renderSelectFieldsValue(Tt[1],W,ce,!0):E.createElement("input",{key:Bt+Vn,type:"text",className:"triggerConditionNum flex ThemeBorderColor3 clearBorderRadius",defaultValue:Tt[1]?Tt[1].value:"",placeholder:he().includes(["15","16"],Vn)?_l("\u6700\u5927\u503C"):"",onKeyUp:function(zt){return Z.clearNoNum(zt)},onPaste:function(zt){return Z.clearNoNum(zt)},onBlur:function(zt){return Z.clearNoNum(zt,!0,W,ce,!0)}}),this.renderOtherFields(ae,W,ce,!0)));if(kt===9||kt===10||kt===11||kt===28||kt===38&&tn===2){var Zn=this.props.controls,Ot=void 0,$t=void 0;return(!Tt[0]||!Tt[0].controlId)&&(bt?Zn.forEach(function(St){St.nodeId===ae.nodeId&&(Ot=(he().find(St.controls,function(zt){return zt.controlId===Bt})||{}).options)}):Ot=(he().find(Zn,function(St){return St.controlId===Bt})||{}).options,Ot=Ot||[],$t=Ot.map(function(St){return{text:St.value,value:St.key,disabled:!!he().find(Tt,function(zt){return zt.value.key===St.key})}})),E.createElement("div",{className:"flex relative flexRow"},Tt[0]&&Tt[0].controlId?this.renderSelectFieldsValue(Tt[0],W,ce):E.createElement(e.Z,{className:"flowDropdown flex flowDropdownTags clearBorderRadius",isAppendToBody:!0,data:$t,value:"",placeholder:_l("\u8BF7\u9009\u62E9"),border:!0,onChange:function(zt){return Z.updateConditionValue({value:he().find(Ot,function(oa){return oa.key===zt}),i:W,j:ce,isSingle:he().includes(["9","10"],ae.conditionId)&&he().includes([9,11],kt)})},renderTitle:function(){return Z.renderDropdownTagList(Tt,W,ce)}}),this.renderOtherFields(ae,W,ce))}if(kt===15||kt===16){var cn={3:"date",4:"month",5:"year"},Mn=[],dt=kt===16&&!he().includes(["9","10"],ae.conditionId),$e=he().includes(["ctime","utime"],Bt)||_e==="6"?"second":_e==="2"?"hour":"minute",jt=$e==="second"?"YYYY-MM-DD HH:mm:ss":se.bq[_e]||"YYYY-MM-DD HH:mm:ss";return dt||(jt=jt.split(" ")[0]),se.vB.forEach(function(St,zt){zt%3===0?Mn.push([St]):Mn[Mn.length-1].push(St)}),_e==="4"&&he().remove(Mn,function(St,zt){return he().includes([0,1],zt)}),_e==="5"&&he().remove(Mn,function(St,zt){return he().includes([0,1,2,3],zt)}),he().includes(["9","10","17","18","39","40","41","42"],ae.conditionId)?E.createElement("div",{className:"flex"},E.createElement("div",{className:"flexRow relative"},Tt[0]&&Tt[0].controlId?this.renderSelectFieldsValue(Tt[0],W,ce):E.createElement(e.Z,{className:"flowDropdown flex clearBorderRadius",data:Mn,value:Tt[0]&&Tt[0].type?Tt[0].type:void 0,border:!0,renderTitle:!Tt[0]||!Tt[0].type?function(){return E.createElement("span",{className:"Gray_9e"},_l("\u8BF7\u9009\u62E9"))}:function(){return E.createElement("span",null,se.vB.find(function(St){return St.value===Tt[0].type}).text)},onChange:function(zt){return Z.updateConditionDateValue({type:zt,value:zt===20?"":se.vB.find(function(oa){return oa.value===zt}).text,i:W,j:ce})}}),this.renderOtherFields(ae,W,ce)),Tt[0]&&Tt[0].type===20&&E.createElement("div",{className:"mTop10 triggerConditionNum triggerConditionDate ThemeBorderColor3"},E.createElement(a.Z,{selectedValue:Tt[0]&&Tt[0].value?ke()(Tt[0].value):null,mode:cn[_e],timePicker:dt,timeMode:$e,allowClear:!1,onOk:function(zt){return Z.updateConditionDateValue({value:zt.format(jt),i:W,j:ce})}},Tt[0]&&Tt[0].value?ke()(Tt[0].value).format(jt):"",E.createElement("i",{className:"icon-bellSchedule Font14 Gray_9e"})))):E.createElement("div",{className:"flex"},E.createElement("div",{className:"flexRow relative"},Tt[0]&&Tt[0].controlId?this.renderSelectFieldsValue(Tt[0],W,ce):E.createElement("div",{className:"flex triggerConditionNum triggerConditionDate ThemeBorderColor3 clearBorderRadius"},E.createElement(a.Z,{selectedValue:Tt[0]&&Tt[0].value?ke()(Tt[0].value):null,mode:cn[_e],timePicker:dt,timeMode:$e,allowClear:!1,onOk:function(zt){return Z.updateConditionDateValue({value:zt.format(jt),i:W,j:ce})}},Tt[0]&&Tt[0].value?ke()(Tt[0].value).format(jt):"",E.createElement("i",{className:"icon-bellSchedule Font14 Gray_9e"}))),this.renderOtherFields(ae,W,ce),ve>1&&E.createElement("div",{className:"Font13 mLeft10 Gray_9e LineHeight36"},_l("\u81F3"))),ve>1&&E.createElement("div",{className:"mTop10 flexRow relative"},Tt[1]&&Tt[1].controlId?this.renderSelectFieldsValue(Tt[1],W,ce,!0):E.createElement("div",{className:"flex triggerConditionNum triggerConditionDate ThemeBorderColor3 clearBorderRadius"},E.createElement(a.Z,{selectedValue:Tt[1]&&Tt[1].value?ke()(Tt[1].value):null,mode:cn[_e],timePicker:dt,timeMode:$e,allowClear:!1,onOk:function(zt){return Z.updateConditionDateValue({value:zt.format(jt),i:W,j:ce,second:!0})}},Tt[1]&&Tt[1].value?ke()(Tt[1].value).format(jt):"",E.createElement("i",{className:"icon-bellSchedule Font14 Gray_9e"}))),this.renderOtherFields(ae,W,ce,!0)))}if(kt===19||kt===23||kt===24){var rn=kt===19?1:kt===23?2:3;return E.createElement("div",{className:"flex relative flexRow"},Tt[0]&&Tt[0].controlId?this.renderSelectFieldsValue(Tt[0],W,ce):E.createElement("div",{className:N()("flex triggerConditionNum triggerConditionList ThemeBorderColor3 clearBorderRadius",{pTop2:Tt.length}),onClick:function(){return Z.cityPickerSearchRef.current.focus()}},E.createElement(j.Z,{search:Fe,level:rn,callback:function(zt){vn&&Z.setState({search:"",keywords:""}),Z.cacheCityPickerData=zt,rn===zt.length&&Z.updateConditionValue({value:zt,i:W,j:ce})},handleClose:function(){return Z.cacheCityPickerData.length&&Z.updateConditionValue({value:Z.cacheCityPickerData,i:W,j:ce})}},E.createElement("ul",{className:"pLeft6 tagWrap"},Tt.map(function(St,zt){return E.createElement("li",{key:zt,className:"tagItem flexRow"},E.createElement("span",{className:"tag",title:St.value.value},St.value.value),E.createElement("span",{className:"delTag",onClick:function(qn){qn.stopPropagation(),Z.cacheCityPickerData=[],Z.updateConditionValue({value:St.value.key,i:W,j:ce})}},E.createElement(I.Z,{icon:"close",className:"pointer"})))}),E.createElement("div",{className:"CityPicker-input-tagSearchBox"},E.createElement(L.Z,{className:"CityPicker-input-textCon CityPicker-input-tagSearch",placeholder:Tt.length?"":ae.type===19?_l("\u7701"):ae.type===23?_l("\u7701/\u5E02"):_l("\u7701/\u5E02/\u53BF"),value:vn,manualRef:this.cityPickerSearchRef,onChange:function(zt){Z.setState({search:zt}),Z.onFetchData(zt)}}),E.createElement("label",{className:"CityPicker-input-box_label"},vn))))),this.renderOtherFields(ae,W,ce))}if(kt===26||kt===27||kt===48||kt===10000001)return E.createElement("div",{className:"flex relative flexRow"},Tt[0]&&Tt[0].controlId?this.renderSelectFieldsValue(Tt[0],W,ce):E.createElement("div",{className:N()("flex triggerConditionNum triggerConditionList ThemeBorderColor3 clearBorderRadius",{pTop2:Tt.length}),onClick:function(zt){he().includes([26,10000001],kt)?Z.selectUser(zt,Tt,W,ce,he().includes(["9","10"],ae.conditionId)&&tn===0):kt===27?Z.selectDepartment(Tt,W,ce,he().includes(["9","10"],ae.conditionId)&&tn===0):Z.selectRole(Tt,W,ce,he().includes(["9","10"],ae.conditionId)&&tn===0)}},Tt.length?E.createElement("ul",{className:"pLeft6 tagWrap"},Tt.map(function(St,zt){return E.createElement("li",{key:zt,className:"tagItem flexRow"},E.createElement("span",{className:"tag",title:St.value.value},St.value.value),E.createElement("span",{className:"delTag",onClick:function(qn){qn.stopPropagation(),Z.updateConditionValue({value:St.value.key,i:W,j:ce})}},E.createElement(I.Z,{icon:"close",className:"pointer"})))})):E.createElement("div",{className:"Gray_bd pLeft10 pRight10"},he().includes([26,10000001],kt)?_l("\u8BF7\u9009\u62E9\u4EBA\u5458"):kt===27?_l("\u8BF7\u9009\u62E9\u90E8\u95E8"):_l("\u8BF7\u9009\u62E9\u7EC4\u7EC7\u89D2\u8272"))),this.renderOtherFields(ae,W,ce));if(kt===46){var Rt=P==="1"?"HH:mm":"HH:mm:ss";return E.createElement("div",{className:"flex"},E.createElement("div",{className:"flexRow relative"},Tt[0]&&Tt[0].controlId?this.renderSelectFieldsValue(Tt[0],W,ce):E.createElement("div",{className:"flex triggerConditionNum triggerConditionDate ThemeBorderColor3 clearBorderRadius"},E.createElement(Ne.Z,{className:"triggerConditionTime",showNow:!1,bordered:!1,allowClear:!1,suffixIcon:E.createElement("i",{className:"icon-access_time Font14 Gray_9e"}),inputReadOnly:!0,placeholder:"",format:Rt,value:Tt[0]&&Tt[0].value?ke()(Tt[0].value,Rt):null,onChange:function(zt,oa){return Z.updateConditionDateValue({value:oa,i:W,j:ce})}})),this.renderOtherFields(ae,W,ce),ve>1&&E.createElement("div",{className:"Font13 mLeft10 Gray_9e LineHeight36"},_l("\u81F3"))),ve>1&&E.createElement("div",{className:"mTop10 flexRow relative"},Tt[1]&&Tt[1].controlId?this.renderSelectFieldsValue(Tt[1],W,ce,!0):E.createElement("div",{className:"flex triggerConditionNum triggerConditionDate ThemeBorderColor3 clearBorderRadius"},E.createElement(Ne.Z,{className:"triggerConditionTime",showNow:!1,bordered:!1,allowClear:!1,suffixIcon:E.createElement("i",{className:"icon-access_time Font14 Gray_9e"}),inputReadOnly:!0,placeholder:"",format:Rt,value:Tt[1]&&Tt[1].value?ke()(Tt[1].value,Rt):null,onChange:function(zt,oa){return Z.updateConditionDateValue({value:oa,i:W,j:ce,second:!0})}})),this.renderOtherFields(ae,W,ce,!0)))}}},{key:"renderDropdownTagList",value:function(ae,ve,W){var ce=this;return E.createElement("div",{className:"flex triggerConditionNum triggerConditionDropdown"},ae.length?E.createElement("ul",{className:"pLeft6 tagWrap"},ae.map(function(Z,_e){return E.createElement("li",{key:_e,className:"tagItem flexRow"},E.createElement("span",{className:"tag",title:Z.value.value},Z.value.value),E.createElement("span",{className:"delTag",onClick:function(xe){xe.stopPropagation(),ce.updateConditionValue({value:Z.value.key,i:ve,j:W})}},E.createElement(I.Z,{icon:"close",className:"pointer"})))})):E.createElement("div",{className:"Gray_bd pLeft10 pRight10"},_l("\u8BF7\u9009\u62E9")))}},{key:"selectUser",value:function(ae,ve,W,ce,Z){var _e=this;(0,be.Z)({title:_l("\u9009\u62E9\u4EBA\u5458"),SelectUserSettings:{filterResigned:!1,filterAccountIds:Z?[]:ve.map(function(P){return P.value.key}),projectId:this.props.projectId,dataRange:2,unique:Z,includeSystemField:!0,filterSystemAccountId:["user-self","user-sub"],prefixAccountIds:[md.global.Account.accountId],callback:function(xe){_e.updateConditionValue({value:xe,i:W,j:ce,isSingle:Z})}}})}},{key:"selectDepartment",value:function(ae,ve,W,ce){var Z=this;(0,Q.Z)({projectId:this.props.projectId,selectedDepartment:[],unique:ce,showCreateBtn:!1,selectFn:function(P){if(!ce){var xe=ae.map(function(bt){return bt.value.key});he().remove(P,function(bt){return he().includes(xe,bt.departmentId)})}Z.updateConditionValue({value:P,i:ve,j:W,isSingle:ce})}})}},{key:"selectRole",value:function(ae,ve,W,ce){var Z=this;(0,Le.Z)({projectId:this.props.projectId,unique:ce,onSave:function(P){if(!ce){var xe=ae.map(function(bt){return bt.value.key});he().remove(P,function(bt){return he().includes(xe,bt.organizeId)})}Z.updateConditionValue({value:P,i:ve,j:W,isSingle:ce})}})}},{key:"renderOtherFields",value:function(ae,ve,W){var ce=this,Z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,_e=this.props,P=_e.projectId,xe=_e.processId,bt=_e.relationId,tt=_e.selectNodeId,Dt=_e.sourceAppId,vn=_e.isIntegration,Fe=_e.controls,Bt=this.state.moreFieldsIndex,kt="";return ae.filedTypeId===29&&Fe.forEach(function(Tt){Tt.controls?Tt.controls.forEach(function(tn){tn.controlId===ae.filedId&&(kt=tn.dataSource)}):Tt.controlId===ae.filedId&&(kt=Tt.dataSource)}),E.createElement(Y.Z,{isFilter:!0,item:C()({},ae,{type:ae.filedTypeId}),fieldsVisible:Bt===ve+"-"+W+"-"+Z,projectId:P,processId:xe,relationId:bt,selectNodeId:tt,sourceAppId:Dt,isIntegration:vn,conditionId:ae.conditionId,dataSource:kt,handleFieldClick:function(tn){return ce.updateDynamicConditionValue((0,h.default)({},tn,{i:ve,j:W,second:Z}))},openLayer:function(){return ce.setState({moreFieldsIndex:ve+"-"+W+"-"+Z})},closeLayer:function(){return ce.setState({moreFieldsIndex:""})}})}},{key:"renderSelectFieldsValue",value:function(ae,ve,W,ce){var Z=this,_e=this.props.data;return E.createElement("div",{className:N()("actionControlBox flex ThemeBorderColor3 clearBorderRadius ellipsis actionCustomBox",{actionCustomBoxError:!ae.nodeName||!ae.controlName})},E.createElement("span",{className:"flexRow pTop3"},E.createElement(pe.Z,{flowNodeType:ae.nodeType,appType:ae.appType,actionId:ae.actionId,nodeName:(0,de.iQ)(ae.nodeId,ae.sourceType,ae.nodeName),controlId:ae.controlId,controlName:ae.controlName,actualityValue:(_e[ve][W].toValue||[]).join(", ")})),E.createElement("i",{className:"icon-delete actionControlDel ThemeColor3",onClick:function(){return Z.updateDynamicConditionValue((0,h.default)({},ae,{i:ve,j:W,second:ce,isDel:!0}))}}))}},{key:"render",value:function(){var ae=this,ve=this.props,W=ve.Header,ce=ve.data;return E.createElement(E.Fragment,null,E.createElement(W,null),E.createElement("div",{className:"flowDetailTrigger"},ce.map(function(Z,_e){return Z.map(function(P,xe){return ae.renderItem(P,_e,xe,_e===ce.length-1,xe===Z.length-1)})})))}}]),b}(E.Component),Re.propTypes={processId:R().string,selectNodeId:R().string,sourceAppId:R().string,isIntegration:R().bool,Header:R().func,isNodeHeader:R().bool,openNewFilter:R().bool,controls:R().array,data:R().array,updateSource:R().func,projectId:R().string,singleCondition:R().bool,isLast:R().bool,addConditions:R().func,filterEncryptCondition:R().bool,excludingDepartmentSpecialFilter:R().bool},Re.defaultProps={processId:"",selectNodeId:"",sourceAppId:"",Header:function(){return null},isNodeHeader:!1,openNewFilter:!1,controls:[],data:[],updateSource:function(){},projectId:"",singleCondition:!1,isLast:!1,addConditions:function(){},filterEncryptCondition:!1,excludingDepartmentSpecialFilter:!1},ue)},36546:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>Ce});var h=t(88239),Te=t(67294),C=t(10941);const Ce=function(Ne){var j=function(I,k){var e=void 0;I.length?e=Ne.data.map(function(oe,m){return k===m&&(oe.conditions=I),oe}):e=Ne.data.filter(function(oe,m){return k!==m}),Ne.updateSource(e)};return Ne.openNewFilter?Ne.data.map(function(L,I){return Te.createElement(Te.Fragment,{key:I},Te.createElement(C.Z,(0,h.default)({},Ne,{data:L.conditions,updateSource:function(e){return j(e,I)},isLast:I===Ne.data.length-1,addConditions:function(){return Ne.updateSource(Ne.data.concat({conditions:[[{}]],spliceType:Ne.data[0].spliceType}))}})),I!==Ne.data.length-1&&Te.createElement("div",{className:"flowDetailTrigger"},Te.createElement("div",{className:"Font14 triggerConditionSplit mTop15"},Te.createElement("span",null,Ne.data[0].spliceType===1?_l("\u4E14"):_l("\u6216")))))}):Te.createElement(C.Z,Ne)}},53943:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>J});var h=t(31546),Te=t(85105),C=t.n(Te),Ce=t(99663),Ne=t(22600),j=t(49135),L=t(93196),I=t(67294),k=t(5618),e=t(3495),oe=t(21674),m=t(96486),y=t.n(m),i,me,J=(me=i=function(T){(0,L.default)(te,T);function te(){var E,r,R,a;(0,Ce.default)(this,te);for(var z=arguments.length,N=Array(z),q=0;q<z;q++)N[q]=arguments[q];return a=(r=(R=(0,j.default)(this,(E=te.__proto__||C()(te)).call.apply(E,[this].concat(N))),R),R.addFields=function(){var K=y().cloneDeep(R.props.fields);K.push({fieldId:"",type:0,fieldValue:"",fieldValueId:"",nodeId:""}),R.props.updateSource({fields:K})},r),(0,j.default)(R,a)}return(0,Ne.default)(te,[{key:"renderFieldsTitle",value:function(r){return r?r.type===29?I.createElement("div",{className:"flexRow"},I.createElement("div",null,I.createElement("span",{className:"Gray_9e mRight5"},"[",k.Do[r.type],"]"),I.createElement("span",null,r.controlName)),I.createElement("span",{className:"flex ellipsis mLeft10 Gray_9e",style:{textAlign:"right"}},_l("\u5DE5\u4F5C\u8868\uFF02%0\uFF02",r.sourceEntityName))):I.createElement(I.Fragment,null,I.createElement("span",{className:"Gray_9e mRight5"},"[",k.Do[r.type],"]"),I.createElement("span",null,r.controlName)):null}},{key:"switchFields",value:function(r,R){var a=this.props,z=a.controls,N=a.updateSource,q=y().find(z,function(ye){return ye.controlId===r}),K=y().cloneDeep(this.props.fields);K[R]={addType:0,fieldId:r,type:q.type,enumDefault:q.enumDefault,fieldValue:q.type===26||q.type===27?"[]":"",fieldValueId:"",nodeId:""},N({fields:K})}},{key:"delFields",value:function(r){var R=y().cloneDeep(this.props.fields);y().remove(R,function(a,z){return z===r}),this.props.updateSource({fields:R})}},{key:"renderOperatorType",value:function(r,R){var a=this,z=this.props,N=z.type,q=z.isBatch,K=[{text:_l("\u8BBE\u4E3A"),value:0},{text:_l("\u589E\u52A0"),value:1},{text:_l("\u51CF\u5C11"),value:2}];return r.type===14&&y().remove(K,function(ye){return ye.value===2}),r.fieldId&&(y().includes([6,8,9,10,11,14,26,27,48],r.type)||r.type===29&&r.enumDefault===2)&&N===1&&!q?I.createElement(h.Z,{className:"flowAddTypeDropdown",data:K,value:r.addType,onChange:function(v){return a.updateOperatorType(v,R)}}):I.createElement("div",{className:"Gray_9e",style:{lineHeight:"20px"}},_l("\u8BBE\u4E3A"))}},{key:"updateOperatorType",value:function(r,R){var a=y().cloneDeep(this.props.fields);a[R].addType=r,this.props.updateSource({fields:a})}},{key:"render",value:function(){var r=this,R=this.props,a=R.controls,z=R.fields,N=R.formulaMap,q=R.updateSource,K=R.companyId,ye=R.relationId,v=R.processId,se=R.selectNodeId,de=R.type,U=R.nodeId,pe=R.isSubProcessNode,Y=R.showCurrent,be=R.isBatch,Q=R.filterType,Le=a.filter(function(Ie){return Ie.type===29}).map(function(Ie){return{text:r.renderFieldsTitle(Ie),searchText:Ie.controlName,value:Ie.controlId,disabled:!!y().find(z,function(he){return he.fieldId===Ie.controlId})}}),Be=a.filter(function(Ie){return Ie.type!==29}).map(function(Ie){return{text:r.renderFieldsTitle(Ie),searchText:Ie.controlName,value:Ie.controlId,disabled:!!y().find(z,function(he){return he.fieldId===Ie.controlId})}}),ke=[Be,Le];return I.createElement(I.Fragment,null,z.map(function(Ie,he){return I.createElement(I.Fragment,{key:Ie.fieldId||he},I.createElement("div",{className:"relative actionItem mTop15"},I.createElement("div",{className:"Gray_9e"},de===1?_l("\u5C06\u5B57\u6BB5"):_l("\u5C06\u53C2\u6570")),I.createElement(h.Z,{className:"flowDropdown mTop5 flowDropdownMinWidth",data:ke,value:Ie.fieldId||void 0,border:!0,openSearch:!0,isAppendToBody:!0,noData:pe?_l("\u5B50\u6D41\u7A0B\u6682\u65E0\u53C2\u6570"):_l("\u672C\u6D41\u7A0B\u6682\u65E0\u53C2\u6570"),placeholder:de===1?_l("\u8BF7\u9009\u62E9\u5B57\u6BB5"):_l("\u8BF7\u9009\u62E9\u53C2\u6570"),renderTitle:function(){return Ie.fieldId&&r.renderFieldsTitle(y().find(a,function(ue){return ue.controlId===Ie.fieldId}))},onChange:function(ue){return r.switchFields(ue,he)}}),I.createElement("div",{className:"mTop10 flexRow alignItemsCenter"},I.createElement("div",{className:"flex"},r.renderOperatorType(Ie,he)),de===1&&y().includes([9,10,11],Ie.type)&&Ie.fieldValueId&&I.createElement(e.Z,{checked:Ie.allowAddOptions||!1,fields:z,index:he,updateSource:q})),I.createElement(oe.Z,{showClear:!0,showCurrent:Y,isBatch:be,companyId:K,processId:v,relationId:ye,selectNodeId:se,sourceNodeId:U,controls:a,formulaMap:N,fields:z,updateSource:q,filterType:Q,item:Ie,i:he}),I.createElement("i",{className:"icon-delete2 Font16 ThemeColor3 actionItemDel",onClick:function(){return r.delFields(he)}})),he!==z.length-1&&I.createElement("div",{className:"actionFieldsSplit"}))}),I.createElement("div",{className:"addActionBtn mTop20"},I.createElement("span",{className:"ThemeBorderColor3",onClick:this.addFields},I.createElement("i",{className:"icon-add Font16"}),de===1?_l("\u6DFB\u52A0\u5B57\u6BB5"):_l("\u6DFB\u52A0\u53C2\u6570"))))}}]),te}(I.Component),i.defaultProps={type:1,isBatch:!1,isSubProcessNode:!1,companyId:"",processId:"",relationId:"",selectNodeId:"",nodeId:"",controls:[],fields:[],showCurrent:!1,filterType:0,formulaMap:{},updateSource:function(){}},me)},26314:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>Pt});var h=t(88239),Te=t(52945),C=t.n(Te),Ce=t(85105),Ne=t.n(Ce),j=t(99663),L=t(22600),I=t(49135),k=t(93196),e=t(67294),oe=t(45697),m=t.n(oe),y=t(50533),i=t(25273),me=t(54208),J=t(88902),T=t.n(J),te=t(69288),E=t(88106),r=t(93967),R=t.n(r),a=t(5618),z=t(62023),N=t(72078),q=t(66946),K=t(37842),ye=t(96486),v=t.n(ye),se=function(F,B){var n=F.actionId,l=F.appType;return v().includes([6,7],B)?n==="1"||l===102?String(B)+"-"+n+"-"+String(l):String(B)+"-"+n:B===0?String(B)+"-"+String(l):String(B)};function de(ne){var F=ne.data,B=ne.icon,n=ne.bg,l=ne.updateSource,o=ne.closeDetail,d=ne.selectNodeType,u=ne.isIntegration,p=ne.removeNodeName,f=F.name,w=se(F,d),D=a.AM[w];return u?e.createElement("div",{className:"workflowDetailHeader flexRow"},e.createElement("span",{className:"icon-backspace Font26 mRight10 Gray ThemeHoverColor3 pointer",onClick:o}),e.createElement("div",{className:"flex Font20 Gray bold"},f)):e.createElement("div",{className:R()("workflowDetailHeader flexRow",n)},p?e.createElement("div",{className:"flex"}):e.createElement(e.Fragment,null,e.createElement("i",{className:R()("Font24",B)}),e.createElement(K.Z,{name:f,updateSource:l})),D&&e.createElement(q.Z,{href:D,type:1,className:"workflowDetailHeaderSupport mLeft10"}),e.createElement("i",{className:"icon-delete Font18 mLeft10",onClick:o}))}var U=t(12424),pe=t(55171),Y=t.n(pe);be.propTypes={isCorrect:oe.any,onSave:oe.func,closeDetail:oe.func};function be(ne){var F=ne.isCorrect,B=ne.onSave,n=ne.closeDetail,l=ne.isIntegration,o=ne.processId,d=ne.selectNodeId,u=ne.instanceId,p=ne.selectNodeType,f=ne.flowInfo,w=ne.debugEvents,D=(0,e.useState)(null),G=(0,U.Z)(D,2),H=G[0],De=G[1],je=(0,e.useState)(!1),lt=(0,U.Z)(je,2),Ft=lt[0],un=lt[1],dn=function(){un(!0),H||z.Z.getNodeDetailHistory({processId:o,nodeId:d,instanceId:u}).then(function(da){_.includes([a.QZ.SEARCH,a.QZ.ACTION],p)&&(da={worksheetId:da.appId,rowId:da.sureSourceId}),p===a.QZ.FORMULA&&(da={result:da.sureSourceId}),p===a.QZ.GET_MORE_RECORD&&(da={worksheetId:da.appId||"",rowIds:da.sourceIds||[]}),_.includes([a.QZ.CODE,a.QZ.JSON_PARSE],p)&&(da=safeParse(da)),De(da)})};if(_.includes(w,0)&&u){var Hn=[5,10,11,15,17,18,19,27];return _.includes(Hn,p)?null:e.createElement(e.Fragment,null,e.createElement("div",{className:"workflowDetailFooter flexRow"},e.createElement("span",{className:"footerSaveBtn ThemeBGColor3 ThemeHoverBGColor2 mRight10",onClick:dn},_l("\u67E5\u770B\u8F93\u51FA\u6570\u636E"))),Ft&&e.createElement(te.Z,{className:"workflowDetailExecDialog",visible:!0,type:"fixed",title:_l("\u67E5\u770B\u8F93\u51FA\u6570\u636E"),width:1080,footer:null,onCancel:function(){return un(!1)}},e.createElement("div",{className:"flexRow h100 breakAll"},H===null?e.createElement(me.Z,{className:"mTop10"}):e.createElement(i.Z,{className:"flex"},e.createElement(Y(),{src:H,theme:"brewer",displayDataTypes:!1,displayObjectSize:!1,name:null})))))}return f.parentId||u?null:e.createElement("div",{className:R()("workflowDetailFooter flexRow",{workflowDetailFooterWhile:l})},e.createElement("span",{className:R()("footerSaveBtn ThemeBGColor3 ThemeHoverBGColor2 mRight10",{Alpha5:!F}),onClick:B},_l("\u4FDD\u5B58")),e.createElement("span",{className:"footerCancelBtn ThemeBorderColor3 ThemeHoverBorderColor2 ThemeColor3 ThemeHoverColor2",onClick:n},_l("\u53D6\u6D88")))}var Q=t(33867),Le=t(47426),Be=t(63239),ke=t.n(Be),Ie=t(31546),he=t(662),Re=t(30381),ue=t.n(Re),we=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.disposeDateRule=function(){var l=n.props,o=l.data,d=l.updateSource,u=n.state.isOldCustom;if(o.repeatType!==a.DC.CUSTOM){var p=o.repeatType===a.DC.WORK?a.DC.WEEK:o.repeatType,f=o.repeatType===a.DC.WORK?[1,2,3,4,5]:o.repeatType===a.DC.WEEK?[ue()(o.executeTime).days()]:[];d({frequency:p,interval:1,weekDays:f,config:null})}else u||n.initConfig()},n.switchFrequency=function(){var l=n.props,o=l.data,d=l.updateSource;o.frequency!==a.DC.WEEK?d({weekDays:[]}):d({weekDays:[ue()(o.executeTime).days()]})},n.initConfig=function(){var l=n.props,o=l.data,d=l.updateSource;d({config:{minute:{type:3,values:[ue()(o.executeTime).format("m")]},hour:{type:3,values:[ue()(o.executeTime).format("H")]},day:{type:1,values:[]},week:{type:0,values:[]},month:{type:1,values:[]}}})},n.state={isOldCustom:B.data.repeatType===a.DC.CUSTOM&&!B.data.config},n}return(0,L.default)(F,[{key:"renderOldContent",value:function(){var n=this,l=this.props.data;return e.createElement(e.Fragment,null,l.repeatType===a.DC.CUSTOM&&this.renderFrequencyContent(),e.createElement("div",{className:"workflowDetailDesc pTop15 pBottom15 mTop20",style:{background:"rgba(255, 163, 64, 0.12)"}},e.createElement("div",{className:"Gray_9e mBottom5"},_l("\u65B0\u7248\u5B9A\u65F6\u89E6\u53D1\u5668\u53EF\u4EE5\u7EFC\u5408\u5C0F\u65F6\u3001\u5929/\u661F\u671F\u3001\u6708\u4E09\u4E2A\u7EF4\u5EA6\u6765\u8BBE\u7F6E\u5B9A\u65F6\u4EFB\u52A1\u3002"),e.createElement("span",{style:{color:"#ffa340"}},_l("\u6CE8\u610F\uFF1A\u5207\u6362\u4E3A\u65B0\u65B9\u5F0F\u5E76\u4FDD\u5B58\u914D\u7F6E\u540E\uFF0C\u5C06\u65E0\u6CD5\u6062\u590D\u5230\u65E7\u7684\u914D\u7F6E\u65B9\u5F0F"))),e.createElement("span",{className:"ThemeColor3 ThemeHoverColor2 pointer",onClick:function(){n.setState({isOldCustom:!1}),n.initConfig()}},_l("\u5207\u6362\u4E3A\u65B0\u7248\u914D\u7F6E\u65B9\u5F0F"))))}},{key:"renderFrequencyContent",value:function(){var n=this,l=this.props,o=l.data,d=l.updateSource,u=[{text:_l("\u5C0F\u65F6"),value:a.DC.HOUR},{text:_l("\u5929"),value:a.DC.DAY},{text:_l("\u5468"),value:a.DC.WEEK},{text:_l("\u6708"),value:a.DC.MONTH},{text:_l("\u5E74"),value:a.DC.YEAR}];return md.global.Config.IsLocal&&u.unshift({text:_l("\u5206\u949F"),value:a.DC.MINUTE}),e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 mTop20 Gray_75"},_l("\u9891\u7387")),e.createElement("div",{className:"mTop10 flexRow alignItemsCenter"},_l("\u6BCF"),e.createElement("input",{type:"text",className:"ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10 mLeft15",style:{width:48,height:36,textAlign:"right",minWidth:48,boxSizing:"border-box"},defaultValue:o.interval,onKeyUp:function(f){return n.checkNumberControl(f)},onPaste:function(f){return n.checkNumberControl(f)},onBlur:function(f){return n.checkNumberControl(f,!0)}}),e.createElement(Ie.Z,{className:"flowDropdown mLeft15",style:{width:90},data:u,value:o.frequency,border:!0,onChange:function(f){return d({frequency:f},n.switchFrequency)}}),o.frequency===a.DC.MONTH&&e.createElement("span",{className:"Gray_75 mLeft15"},_l("\u7B2C%0\u5929",ue()(o.executeTime).format("DD"))),o.frequency===a.DC.YEAR&&e.createElement("span",{className:"Gray_75 mLeft15"},ue()(o.executeTime).format("MMMDo"))),o.frequency===a.DC.WEEK&&this.renderWeek())}},{key:"checkNumberControl",value:function(n,l){var o=this.props.updateSource,d=n.target.value.replace(/[^\d]/g,"");n.target.value=d,l&&(d==="0"&&(d="1",n.target.value=d),o({interval:d}))}},{key:"renderWeek",value:function(){var n=this,l=this.props.data,o=[{text:ue().localeData()._weekdaysMin[0],value:0},{text:ue().localeData()._weekdaysMin[1],value:1},{text:ue().localeData()._weekdaysMin[2],value:2},{text:ue().localeData()._weekdaysMin[3],value:3},{text:ue().localeData()._weekdaysMin[4],value:4},{text:ue().localeData()._weekdaysMin[5],value:5},{text:ue().localeData()._weekdaysMin[6],value:6}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 mTop20 Gray_75"},_l("\u65F6\u95F4")),e.createElement("div",{className:"mTop10 weekList"},o.map(function(d,u){return e.createElement("span",{key:u,className:R()({ThemeBGColor3:v().includes(l.weekDays,d.value)}),onClick:function(){return n.switchWeek(d.value)}},d.text)})))}},{key:"switchWeek",value:function(n){var l=this.props,o=l.data,d=l.updateSource,u=v().cloneDeep(o.weekDays);v().includes(u,n)?v().remove(u,function(p){return p===n}):u.push(n),d({weekDays:u.length?u:[ue()(o.executeTime).days()]})}},{key:"renderContent",value:function(){var n=this.props,l=n.data,o=n.getNodeDetail,d=n.checkTimingTriggerConfig;return l.config?e.createElement(e.Fragment,null,md.global.Config.IsLocal&&this.renderMinute(),this.renderMonth(),this.renderDay(),this.renderHour(),e.createElement("div",{className:"mTop25 webhookBtn InlineBlock",onClick:function(){if(l.executeEndTime&&ue()(l.executeTime)>=ue()(l.executeEndTime)){alert(_l("\u7ED3\u675F\u6267\u884C\u65F6\u95F4\u4E0D\u80FD\u5C0F\u4E8E\u5F00\u59CB\u6267\u884C\u65F6\u95F4"),2);return}if(l.executeEndTime&&ue()(l.executeEndTime)<=ue()()){alert(_l("\u7ED3\u675F\u6267\u884C\u65F6\u95F4\u4E0D\u80FD\u665A\u4E8E\u5F53\u524D\u65F6\u95F4"),2);return}d(l.config)&&o({appId:l.executeTime+(l.executeEndTime?"&"+l.executeEndTime:""),fields:ke()(l.config)})}},_l("\u751F\u6210\u521D\u59CB\u4E03\u6B21\u7684\u6267\u884C\u65F6\u95F4")),!!l.executeTimes.length&&e.createElement("div",{className:"mTop25 webhookBox"},e.createElement("div",{className:"webhookHeader flexRow"},e.createElement("div",{className:"bold w180 ellipsis"},_l("\u5E8F\u53F7")),e.createElement("div",{className:"bold mLeft15 flex ellipsis"},_l("\u65E5\u671F\u65F6\u95F4"))),e.createElement("ul",{className:"webhookList"},l.executeTimes.map(function(u,p){return e.createElement("li",{className:"flexRow",key:p},e.createElement("div",{className:"w180"},p+1),e.createElement("div",{className:"mLeft15 flex"},u))})))):null}},{key:"renderMinute",value:function(){var n=this,l=this.props.data,o=[{text:_l("\u6BCF\u5206\u949F\u90FD\u89E6\u53D1"),value:1},{text:_l("\u6309\u8303\u56F4\u89E6\u53D1"),value:2},{text:_l("\u6309\u56FA\u5B9A\u503C\u89E6\u53D1"),value:3},{text:_l("\u6309\u4E00\u5B9A\u589E\u91CF\u89E6\u53D1"),value:4}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 mTop20"},_l("\u5206\u949F")),e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:o,value:l.config.minute.type,border:!0,onChange:function(u){return n.updateConfigValue({minute:{type:u,values:[]}})}}),this.renderRangeContent("minute"),this.renderFixedContent("minute"),this.renderIncrementContent("minute"))}},{key:"renderHour",value:function(){var n=this,l=this.props.data,o=[{text:_l("\u6BCF\u5C0F\u65F6\u90FD\u89E6\u53D1"),value:1},{text:_l("\u6309\u8303\u56F4\u89E6\u53D1"),value:2},{text:_l("\u6309\u56FA\u5B9A\u503C\u89E6\u53D1"),value:3},{text:_l("\u6309\u4E00\u5B9A\u589E\u91CF\u89E6\u53D1"),value:4}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 mTop20"},_l("\u5C0F\u65F6")),e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:o,value:l.config.hour.type,border:!0,onChange:function(u){return n.updateConfigValue({hour:{type:u,values:[]}})}}),this.renderRangeContent("hour"),this.renderFixedContent("hour"),this.renderIncrementContent("hour"))}},{key:"renderDay",value:function(){var n=this,l=this.props.data,o=l.config.day.type!==0,d=[{text:_l("\u6BCF\u5929\u90FD\u89E6\u53D1"),value:1},{text:_l("\u6309\u8303\u56F4\u89E6\u53D1"),value:2},{text:_l("\u6309\u56FA\u5B9A\u503C\u89E6\u53D1"),value:3},{text:_l("\u6309\u4E00\u5B9A\u589E\u91CF\u89E6\u53D1"),value:4},{text:_l("\u6BCF\u6708\u7684\u6700\u540E\u4E00\u5929\u89E6\u53D1"),value:5}],u=[{text:ue().localeData()._weekdaysMin[0],value:"1"},{text:ue().localeData()._weekdaysMin[1],value:"2"},{text:ue().localeData()._weekdaysMin[2],value:"3"},{text:ue().localeData()._weekdaysMin[3],value:"4"},{text:ue().localeData()._weekdaysMin[4],value:"5"},{text:ue().localeData()._weekdaysMin[5],value:"6"},{text:ue().localeData()._weekdaysMin[6],value:"7"}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 mTop20"},_l("\u5929/\u661F\u671F")),e.createElement(Le.ZP,{className:"mTop5 Font12",data:[{text:_l("\u5929"),value:1,checked:o},{text:_l("\u661F\u671F"),value:2,checked:!o}],onChange:function(f){f===1?n.updateConfigValue({day:{type:1,values:[]},week:{type:0,values:[]}}):n.updateConfigValue({day:{type:0,values:[]},week:{type:3,values:[(ue()(l.executeTime).day()+1).toString()]}})}}),o?e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:d,value:l.config.day.type,border:!0,onChange:function(f){return n.updateConfigValue({day:{type:f,values:[]}})}}):e.createElement("div",{className:"mTop10 weekList"},u.map(function(p,f){return e.createElement("span",{key:f,className:R()({ThemeBGColor3:v().includes(l.config.week.values,p.value)}),onClick:function(){return n.updateFixedConfig("week",p.value)}},p.text)})),this.renderRangeContent("day"),this.renderFixedContent("day"),this.renderIncrementContent("day"))}},{key:"renderMonth",value:function(){var n=this,l=this.props.data,o=[{text:_l("\u6BCF\u6708\u90FD\u89E6\u53D1"),value:1},{text:_l("\u6309\u56FA\u5B9A\u503C\u89E6\u53D1"),value:3}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 mTop20"},_l("\u6708")),e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:o,value:l.config.month.type,border:!0,onChange:function(u){return n.updateConfigValue({month:{type:u,values:[]}})}}),this.renderFixedContent("month"))}},{key:"updateConfigValue",value:function(n){var l=this.props,o=l.data,d=l.updateSource;d({config:C()({},(0,h.default)({},o.config),(0,h.default)({},n))})}},{key:"renderRangeContent",value:function(n){var l=this,o=this.props.data,d={minute:{min:0,max:59},hour:{min:0,max:23},day:{min:1,max:31}};if(o.config[n].type!==2)return null;var u=o.config[n].values[0]||"",p=o.config[n].values[1]||"";return e.createElement("div",{className:"mTop10 flexRow alignItemsCenter"},e.createElement("input",{type:"text",className:"ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10 flex",style:{height:36,textAlign:"right",boxSizing:"border-box"},placeholder:_l("\u8F93\u5165\u8303\u56F4"),defaultValue:u,onKeyUp:function(w){return l.checkRangeNumber(w)},onPaste:function(w){return l.checkRangeNumber(w)},onBlur:function(w){return l.checkRangeNumber(w,n,d[n].min,d[n].max,!1)}}),e.createElement("span",{className:"mLeft10 mRight10"},"~"),e.createElement("input",{type:"text",className:"ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10 flex",style:{height:36,textAlign:"right",boxSizing:"border-box"},placeholder:_l("\u8F93\u5165\u8303\u56F4"),defaultValue:p,onKeyUp:function(w){return l.checkRangeNumber(w)},onPaste:function(w){return l.checkRangeNumber(w)},onBlur:function(w){return l.checkRangeNumber(w,n,d[n].min,d[n].max,!0)}}))}},{key:"checkRangeNumber",value:function(n,l,o,d,u){var p=n.target.value.replace(/[^\d]/g,"");if(n.target.value=p,l){var f=this.props.data,w=[].concat(f.config[l].values);p=p.replace(/^0*/,""),(!p||parseInt(p)<parseInt(o))&&(p=String(o),n.target.value=p),parseInt(p)>parseInt(d)&&(p=String(d),n.target.value=p),!u&&w[1]&&parseInt(p)>parseInt(w[1])&&(p=w[1],n.target.value=p),u&&w[0]&&parseInt(p)<parseInt(w[0])&&(p=w[0],n.target.value=p),w[u?1:0]=p,this.updateConfigValue((0,E.default)({},l,C()({},(0,h.default)({},f.config[l]),{values:w})))}}},{key:"renderFixedContent",value:function(n){var l=this,o=this.props.data,d=o.config[n].values,u={minute:{suffix:_l("\u5206\u949F"),min:0,max:59},hour:{suffix:_l("\u65F6"),min:0,max:23},day:{suffix:_l("\u65E5"),min:1,max:31},month:{suffix:_l("\u6708"),min:1,max:12}},p=[];if(o.config[n].type!==3)return null;for(var f=u[n].min;f<=u[n].max;f++)p.push({text:f.toString().padStart(2,"0"),value:f.toString(),disabled:v().includes(d,f.toString())});return e.createElement(Ie.Z,{className:R()("flowDropdown mTop10 flowDropdownMoreSelect",{flowDropdownDate:n==="day"}),selectClose:!1,data:p,value:d.length||void 0,border:!0,placeholder:_l("\u8BF7\u9009\u62E9"),onChange:function(D){return l.updateFixedConfig(n,D)},renderTitle:function(){return!!d.length&&e.createElement("ul",{className:"tagWrap"},d.map(function(D){return e.createElement("li",{key:D,className:"tagItem flexRow"},e.createElement("span",{className:"tag"},D+u[n].suffix),e.createElement("span",{className:"delTag",onClick:function(H){H.stopPropagation(),l.updateFixedConfig(n,D)}},e.createElement(Q.Z,{icon:"close",className:"pointer"})))}))}})}},{key:"updateFixedConfig",value:function(n,l){var o=this.props.data,d=[].concat(o.config[n].values);v().includes(d,l)?v().remove(d,function(u){return u===l}):d.push(l),this.updateConfigValue((0,E.default)({},n,{type:3,values:d}))}},{key:"renderIncrementContent",value:function(n){var l=this,o=this.props.data,d={minute:{text1:_l("\u5206\u5F00\u59CB\uFF0C\u6BCF\u9694"),text2:_l("\u5206\u949F"),min:0,max:59},hour:{text1:_l("\u65F6\u5F00\u59CB\uFF0C\u6BCF\u9694"),text2:_l("\u5C0F\u65F6"),min:0,max:23},day:{text1:_l("\u65E5\u5F00\u59CB\uFF0C\u6BCF\u9694"),text2:_l("\u65E5"),min:1,max:30}};if(o.config[n].type!==4)return null;var u=o.config[n].values[0]||"",p=o.config[n].values[1]||"";return e.createElement("div",{className:"mTop10 flexRow alignItemsCenter"},_l("\u4ECE"),e.createElement("input",{type:"text",className:"ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10 mLeft15 flex",style:{height:36,textAlign:"right",boxSizing:"border-box"},defaultValue:u,onKeyUp:function(w){return l.checkIncrementStartNumber(w)},onPaste:function(w){return l.checkIncrementStartNumber(w)},onBlur:function(w){return l.checkIncrementStartNumber(w,n,d[n].min,d[n].max)}}),e.createElement("span",{className:"mLeft10 mRight10"},d[n].text1),e.createElement("input",{type:"text",className:"ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10 flex",style:{height:36,textAlign:"right",boxSizing:"border-box"},defaultValue:p,onKeyUp:function(w){return l.checkIncrementNumber(w)},onPaste:function(w){return l.checkIncrementNumber(w)},onBlur:function(w){return l.checkIncrementNumber(w,n)}}),e.createElement("span",{className:"mLeft10"},d[n].text2))}},{key:"checkIncrementStartNumber",value:function(n,l,o,d){var u=n.target.value.replace(/[^\d]/g,"");if(n.target.value=u,l){var p=this.props.data,f=[].concat(p.config[l].values);u=u.replace(/^0*/,""),(!u||parseInt(u)<parseInt(o))&&(u=String(o),n.target.value=u),parseInt(u)>parseInt(d)&&(u=String(d),n.target.value=u),f[0]=u,this.updateConfigValue((0,E.default)({},l,C()({},(0,h.default)({},p.config[l]),{values:f})))}}},{key:"checkIncrementNumber",value:function(n,l){var o=n.target.value.replace(/[^\d]/g,"");if(n.target.value=o,l){var d=this.props.data,u=[].concat(d.config[l].values);o=o.replace(/^0*/,""),o||(o="1",n.target.value=o),u[1]=o,this.updateConfigValue((0,E.default)({},l,C()({},(0,h.default)({},d.config[l]),{values:u})))}}},{key:"render",value:function(){var n=this,l=this.props,o=l.data,d=l.updateSource,u=this.state.isOldCustom,p=[{text:_l("\u6BCF\u5C0F\u65F6"),value:a.DC.HOUR},{text:_l("\u6BCF\u5929"),value:a.DC.DAY},{text:_l("\u5DE5\u4F5C\u65E5(\u661F\u671F\u4E00\u81F3\u661F\u671F\u4E94)"),value:a.DC.WORK},{text:_l("\u6BCF\u5468")+"("+ue()(o.executeTime).format("dddd")+")",value:a.DC.WEEK},{text:_l("\u6BCF\u6708")+"("+ue()(o.executeTime).format("Do")+")",value:a.DC.MONTH},{text:_l("\u6BCF\u5E74")+"("+ue()(o.executeTime).format("MMMDo")+")",value:a.DC.YEAR},{text:_l("\u81EA\u5B9A\u4E49"),value:a.DC.CUSTOM}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"flowDetailStartHeader flexColumn BGBlue"},e.createElement("div",{className:"flowDetailStartIcon flexRow"},e.createElement("i",{className:"icon-hr_surplus Font40 blue"})),e.createElement("div",{className:"Font16 mTop10"},_l("\u5B9A\u65F6"))),e.createElement("div",{className:"workflowDetailBox mTop20"},e.createElement("div",{className:"Font13 bold"},_l("\u5F00\u59CB\u6267\u884C\u65F6\u95F4")),e.createElement("div",{className:"actionControlBox ThemeBorderColor3 mTop10 Relative"},e.createElement(he.Z,{selectedValue:o.executeTime?ue()(o.executeTime):"",timePicker:!0,allowClear:!1,timeMode:"minute",onOk:function(w){return d({executeTime:w.format("YYYY-MM-DD HH:mm")},function(){o.frequency===a.DC.WEEK&&o.weekDays.length===1&&d({weekDays:[w.days()]}),o.repeatType===a.DC.CUSTOM&&!u&&!md.global.Config.IsLocal&&n.updateConfigValue({minute:{type:3,values:[w.format("m")]}})})}},o.executeTime?ue()(o.executeTime).format("YYYY-MM-DD HH:mm"):_l("\u8BF7\u9009\u62E9")),e.createElement("i",{className:"icon-hr_time Absolute Font16 Gray_9e",style:{right:10,top:10}})),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u7ED3\u675F\u6267\u884C\u65F6\u95F4")),e.createElement("div",{className:"Font13 Gray_9e mTop5"},_l("\u5F53\u5230\u8FBE\u6B64\u65F6\u95F4\u70B9\u540E\uFF0C\u6D41\u7A0B\u5C06\u4F1A\u88AB\u81EA\u52A8\u5173\u95ED")),e.createElement("div",{className:"actionControlBox ThemeBorderColor3 mTop10 Relative"},e.createElement(he.Z,{selectedValue:o.executeEndTime?ue()(o.executeEndTime):"",timePicker:!0,timeMode:"minute",onOk:function(w){return d({executeEndTime:w.format("YYYY-MM-DD HH:mm")})},onClear:function(){return d({executeEndTime:""})}},o.executeEndTime?ue()(o.executeEndTime).format("YYYY-MM-DD HH:mm"):_l("\u8BF7\u9009\u62E9")),e.createElement("i",{className:"icon-hr_time Absolute Font16 Gray_9e",style:{right:10,top:10}})),o.executeTime&&e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop20"},_l("\u5FAA\u73AF")),e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:p,value:o.repeatType,border:!0,onChange:function(w){return d({repeatType:w},n.disposeDateRule)}})),o.repeatType!==a.DC.CUSTOM?null:u?this.renderOldContent():this.renderContent()))}}]),F}(e.Component),Ee=t(62745),b=t(60967),le=t(95679),ae=t(62521),ve=t(16469),W=t(86735),ce=t(1003),Z=t(42424),_e=t(29440),P=t(71893),xe=(0,W.Z)([`
  width: 34px;
  height: 34px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  right: 36px;
  top: 11px;
`],[`
  width: 34px;
  height: 34px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  right: 36px;
  top: 11px;
`]),bt=(0,W.Z)([`
  height: 34px;
  display: flex;
  align-items: center;
  position: absolute;
  left: 12px;
  right: 70px;
  top: 11px;
`],[`
  height: 34px;
  display: flex;
  align-items: center;
  position: absolute;
  left: 12px;
  right: 70px;
  top: 11px;
`]),tt=(0,W.Z)([`
  padding-top: 7px !important;
  padding-bottom: 7px !important;
  vertical-align: top;
  &:not(:hover):not(:focus) {
    border-color: #ddd !important;
  }
`],[`
  padding-top: 7px !important;
  padding-bottom: 7px !important;
  vertical-align: top;
  &:not(:hover):not(:focus) {
    border-color: #ddd !important;
  }
`]),Dt=P.ZP.div(xe),vn=P.ZP.div(bt),Fe=(0,P.ZP)(Ee.Z)(tt);const Bt=function(ne){var F=ne.projectId,B=F===void 0?"":F,n=ne.processId,l=n===void 0?"":n,o=ne.relationId,d=o===void 0?"":o,u=ne.selectNodeId,p=u===void 0?"":u,f=ne.isIntegration,w=f===void 0?!1:f,D=ne.appId,G=D===void 0?"":D,H=ne.source,De=H===void 0?[]:H,je=ne.sourceKey,lt=je===void 0?"":je,Ft=ne.keyName,un=Ft===void 0?"name":Ft,dn=ne.keyPlaceholder,Hn=dn===void 0?"key":dn,ca=ne.pairsName,da=ca===void 0?"value":ca,Me=ne.pairsPlaceholder,nt=Me===void 0?_l("\u53C2\u8003value"):Me,He=ne.btnText,ie=He===void 0?"+ key-value pairs":He,We=ne.formulaMap,Ue=We===void 0?{}:We,Ke=ne.pairsOnlyText,ut=Ke===void 0?!1:Ke,wt=ne.updateSource,Et=wt===void 0?function(){}:wt,et=ne.showType,Xe=et===void 0?!1:et,pt=ne.onlyFile,at=pt===void 0?!1:pt,ct=ne.flowNodeList,Nt=ct===void 0?[]:ct,mn=(0,e.useState)(""),Qt=(0,U.Z)(mn,2),Cn=Qt[0],_n=Qt[1],ra=(0,e.useState)(-1),Nn=(0,U.Z)(ra,2),Ht=Nn[0],Sn=Nn[1],Dn=(0,e.useRef)(null),xn=function(Pn){var ea=Pn.key,Tn=Pn.value,sn=Pn.i,Da=Pn.nodeId,ia=Da===void 0?"":Da,ka=v().cloneDeep(De);ka[sn]||(ka[sn]={}),ea==="type"&&(ka[sn].value=""),ka[sn][ea]=Tn,ka[sn].nodeId=ia,Et((0,E.default)({},lt,ka))},an=function(Pn){var ea=v().cloneDeep(De);v().remove(ea,function(Tn,sn){return sn===Pn}),Et((0,E.default)({},lt,ea))},Qn=function(Pn,ea){var Tn=Pn.replace(/\$/g,"").split(/([a-zA-Z0-9#]{24,32})-/).filter(function(ia){return ia}),sn=Ue[Tn[0]]||{},Da=Ue[Tn.join("-")]||{};return e.createElement("div",{className:"actionControlBox flex ThemeBorderColor3 clearBorderRadius ellipsis actionCustomBox"},e.createElement("span",{className:"flexRow pTop3"},e.createElement(Z.Z,{flowNodeType:sn.type,appType:sn.appType,actionId:sn.actionId,nodeName:(0,N.iQ)(Tn[0],Da.sourceType,sn.name),controlId:Tn[1],controlName:Da.name||""})),e.createElement("i",{className:"icon-delete actionControlDel ThemeColor3",onClick:function(){return xn({key:"value",value:"",i:ea})}}))},Ln=function(Pn){return e.createElement(_e.Z,{item:{type:14},fieldsVisible:Cn===Pn,projectId:B,processId:l,relationId:d,selectNodeId:p,sourceAppId:G,isIntegration:w,handleFieldClick:function(Tn){var sn=v().cloneDeep(Ue);sn[Tn.nodeId]={type:Tn.nodeTypeId,appType:Tn.appType,actionId:Tn.actionId,name:Tn.nodeName},sn[Tn.nodeId+"-"+Tn.fieldValueId]={type:Tn.fieldValueType,name:Tn.fieldValueName,sourceType:Tn.sourceType},Et({formulaMap:sn},function(){xn({key:"value",value:"$"+Tn.nodeId+"-"+Tn.fieldValueId+"$",i:Pn})}),_n("")},openLayer:function(){return _n(Pn)},closeLayer:function(){return _n("")}})},hn=function(Pn,ea){var Tn=function(){Sn(-1)};return ea!==Ht?null:e.createElement(ae.Z,{className:"nodeListMenu",onClickAwayExceptions:[Dn.current],onClickAway:Tn},Pn&&e.createElement(ve.Z,{onClick:function(){xn({key:"value",value:"",i:ea}),Tn()}},_l("\u6E05\u9664\u9009\u62E9")),Nt.map(function(sn){return e.createElement(ve.Z,{key:sn.nodeId,onClick:function(){xn({key:"value",value:"",i:ea,nodeId:sn.nodeId}),Tn()}},e.createElement("div",{className:"flexRow",style:{alignItems:"center"}},e.createElement("span",{className:R()("Font16 Gray_9e",(0,N.wu)(sn.nodeTypeId,sn.appType,sn.actionId))}),e.createElement("span",{className:R()("Font14 mLeft5 ellipsis flex",{Gray_9e:!sn.appId})},sn.nodeName),sn.appId&&sn.appName?e.createElement(e.Fragment,null,e.createElement("span",{className:"Font14 mLeft5 bold flowDropdownGray"},sn.appTypeName),e.createElement("span",{className:"Font14 mLeft5 bold flowDropdownGray ellipsis",style:{maxWidth:150}},"\u201C"+sn.appName+"\u201D")):e.createElement("span",{className:"Font14 mLeft5 Gray_75"},e.createElement("i",{className:"icon-workflow_error Font14 mRight5"}),_l("\u8BBE\u7F6E\u6B64\u8282\u70B9\u540E\u624D\u80FD\u9009\u62E9"))))}))},Ra=function(Pn){if(!Pn.nodeId)return null;var ea=v().find(Nt,function(Tn){return Tn.nodeId===Pn.nodeId})||{};return e.createElement(vn,null,e.createElement(Z.Z,{flowNodeType:ea.nodeTypeId,appType:ea.appType,actionId:ea.appId,nodeName:(0,N.iQ)(ea.nodeId,ea.sourceType,ea.appName),controlId:ea.nodeId,controlName:ea.nodeName}))};return e.createElement(e.Fragment,null,De.map(function(ha,Pn){return e.createElement("div",{className:"flexRow",key:Pn},!at&&e.createElement("input",{type:"text",className:"mTop10 ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10 mRight10",style:{width:140},placeholder:Hn,value:ha.name,onChange:function(Tn){return xn({key:un,value:Tn.target.value,i:Pn,nodeId:ha.nodeId})}}),Xe&&e.createElement(Ie.Z,{className:"flowDropdown mTop10 mRight10",style:{width:100},data:[{text:_l("\u6587\u672C"),value:2},{text:_l("\u9644\u4EF6"),value:14}],value:ha.type||2,border:!0,onChange:function(Tn){return xn({key:"type",value:Tn,i:Pn})}}),e.createElement("div",{className:R()("flex mRight8 relative",{hasNodeList:Nt.length}),style:{minWidth:0}},ut?e.createElement(Fe,{className:"mTop10 ThemeBorderColor3 Font13",maxHeight:250,minHeight:0,placeholder:nt,value:ha.value,onChange:function(Tn){xn({key:da,value:Tn,i:Pn})}}):ha.type===14?e.createElement("div",{className:"flexRow mTop10 relative"},ha.value?Qn(ha.value,Pn):e.createElement("div",{className:"actionControlBox flex clearBorderRadius"}),Ln(Pn)):e.createElement(ce.Z,{projectId:B,processId:l,relationId:d,selectNodeId:p,sourceAppId:G,isIntegration:w,type:2,height:0,content:ha.value,formulaMap:Ue,onChange:function(Tn,sn,Da){return xn({key:da,value:sn,i:Pn})},updateSource:Et}),!!Nt.length&&e.createElement(Dt,{ref:Dn,onClick:function(){return Sn(Pn)}},e.createElement("i",{className:"icon-arrow-down-border Font16 ThemeHoverColor3 pointer Gray_bd"})),hn(!!ha.nodeId,Pn),Ra(ha)),!at&&e.createElement("i",{className:"icon-delete2 Font16 mTop20 ThemeHoverColor3 pointer Gray_bd",onClick:function(){return an(Pn)}}))}),ie&&e.createElement("div",{className:"mTop10"},e.createElement("span",{className:"ThemeHoverColor3 pointer Gray_9e",onClick:function(){var Pn;return Et((0,E.default)({},lt,De.concat(C()((Pn={},(0,E.default)(Pn,un,""),(0,E.default)(Pn,da,""),Pn),Xe?{type:2}:{}))))}},ie)))},kt=function(ne){var F=ne.data,B=ne.controls,n=ne.showRequired,l=ne.updateSource,o=ne.hideControlType;return e.createElement("div",{className:"mTop15 webhookBox"},e.createElement("div",{className:"webhookHeader flexRow"},e.createElement("div",{className:"bold w180 ellipsis"},_l("\u53C2\u6570\u540D")),!o&&e.createElement("div",{className:"bold mLeft15 w70 ellipsis"},_l("\u7C7B\u578B")),e.createElement("div",{className:"bold mLeft15 flex ellipsis"},_l("\u53C2\u8003\u503C")),n&&e.createElement("div",{className:"bold mLeft15 w40 ellipsis"},_l("\u5FC5\u586B"))),e.createElement("ul",{className:"webhookList"},(B||[]).map(function(d,u){return e.createElement("li",{className:"flexRow",key:u},e.createElement("div",{className:"w180"},d.controlName),!o&&e.createElement("div",{className:"mLeft15 w70 ellipsis"},a.Do[d.type]),e.createElement("div",{className:"mLeft15 flex",style:{minWidth:0}},d.value),n&&e.createElement("div",{className:"mLeft15 w40"},e.createElement(b.Z,{checked:d.required,onClick:function(f){var w=[].concat(F);w.forEach(function(D){D.controlId===d.controlId&&(D.required=!f)}),l({controls:w})}})))})))};var Tt=t(20640),tn=t.n(Tt),Vn={NULL:0,POST:1,CUSTOM:2,COMPLETE:3,PAIRS:4},Zn=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.getAppTemplateControls=function(){var l=n.props,o=l.data,d=l.processId,u=l.updateSource,p=n.state,f=p.count,w=p.maxCount;z.Z.getAppTemplateControls({processId:d,nodeId:o.id,appId:d,appType:o.appType}).then(function(D){n.setState({count:f+1}),(f+1>=w||D.length)&&clearInterval(n.setInterval),D.length&&(n.setState({type:Vn.COMPLETE}),u({controls:D}))})},n.postCustomOptions=function(){var l=n.props.data;(0,N.BH)(l.jsonParam)?fetch(l.hookUrl,{method:"POST",body:l.jsonParam,headers:{"Content-Type":"application/json"}}).then(function(){n.getAppTemplateControls()}):alert(_l("\u9A8C\u8BC1\u683C\u5F0F\u5931\u8D25\uFF0C\u8BF7\u4FEE\u6539"),2)},n.postKeyValueOptions=function(){var l=n.props.data,o=new FormData,d=l.params.filter(function(p){return!!p.name});if(d.length){for(var u=0;u<d.length;u++)o.append(d[u].name,d[u].value);fetch(l.hookUrl,{method:"POST",body:o}).then(function(){n.getAppTemplateControls()})}else alert(_l("\u8BF7\u914D\u7F6Ekey-value\u53C2\u6570"),2)},n.state={type:B.data.controls.length?Vn.COMPLETE:Vn.NULL,count:0,maxCount:30,contentType:B.data.returnJson?2:1},n}return(0,L.default)(F,[{key:"componentWillUnmount",value:function(){clearInterval(this.setInterval)}},{key:"loopGetParameter",value:function(){this.setInterval=setInterval(this.getAppTemplateControls,6e3)}},{key:"render",value:function(){var n=this,l=this.props,o=l.data,d=l.updateSource,u=l.onSave,p=this.state,f=p.type,w=p.count,D=p.maxCount,G=p.contentType,H=!o.controls.length&&w>=D,De=[{text:"key-value pairs",value:1},{text:"JSON",value:2}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"flowDetailStartHeader flexColumn BGBlueAsh"},e.createElement("div",{className:"flowDetailStartIcon flexRow"},e.createElement("i",{className:"icon-workflow_webhook Font40 gray"})),e.createElement("div",{className:"Font16 mTop10"},_l("Webhook"))),e.createElement("div",{className:"workflowDetailBox mTop20"},e.createElement("div",{className:"Font13 bold"},_l("Webhook URL")),e.createElement("div",{className:"Gray_75 mTop5"},_l("\u6211\u4EEC\u4E3A\u60A8\u751F\u6210\u4E86\u4E00\u4E2A\u7528\u6765\u63A5\u6536\u8BF7\u6C42\u7684URL")),e.createElement("div",{className:"mTop10 flexRow"},e.createElement("input",{type:"text",className:"webhookLink flex",value:o.hookUrl,disabled:!0}),e.createElement("div",{className:"mLeft10 webhookLinkCopy",onClick:function(){tn()(o.hookUrl),alert(_l("\u5DF2\u590D\u5236\u5230\u526A\u5207\u677F"))}},_l("\u590D\u5236\u94FE\u63A5"))),f===Vn.NULL&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u751F\u6210\u53C2\u6570\u5217\u8868")),e.createElement("div",{className:"Gray_75 mTop5"},_l("\u7CFB\u7EDF\u5C06\u6839\u636E\u751F\u6210\u7684\u53C2\u6570\u5217\u8868\u6765\u6293\u53D6\u8BF7\u6C42\u4E2D\u7684\u6570\u636E")),e.createElement("div",{className:"mTop15"},e.createElement(le.Z,{text:_l("\u4ECE\u8BF7\u6C42\u8303\u4F8B\u751F\u6210"),checked:f===Vn.POST,onClick:function(){n.loopGetParameter(),n.setState({type:Vn.POST})}})),e.createElement("div",{className:"Gray_75 mTop5 mLeft30"},_l("\u8BF7\u51C6\u5907\u4E00\u6761GET\u6216POST\u8BF7\u6C42")),e.createElement("div",{className:"mTop15"},e.createElement(le.Z,{text:_l("\u4ECEJSON\u6570\u636E\u8303\u4F8B\u751F\u6210"),checked:f===Vn.CUSTOM,onClick:function(){return n.setState({type:Vn.CUSTOM})}})),e.createElement("div",{className:"mTop15"},e.createElement(le.Z,{text:_l("\u4ECEkey-value pairs\u751F\u6210"),checked:f===Vn.PAIRS,onClick:function(){n.setState({type:Vn.PAIRS}),o.params.length||d({params:[{name:"",value:""}]})}}))),f===Vn.POST&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u4ECE\u8BF7\u6C42\u8303\u4F8B\u751F\u6210")),e.createElement("div",{className:"Gray_75 mTop5"},_l("\u8BF7\u57283\u5206\u949F\u5185\u5411URL\u53D1\u9001\u4E00\u6761GET\u6216POST\u8BF7\u6C42")),e.createElement("div",{className:"mTop15 workflowDetailDesc",style:{padding:"15px 16px",color:H?"#f44336":"#2196f3"}},H?_l("\u5F53\u524DURL\u5E76\u6CA1\u6709\u6536\u5230\u4EFB\u4F55\u6709\u6548\u8BF7\u6C42\uFF0C\u662F\u5426\u91CD\u8BD5?"):_l("\u6B63\u5728\u63A5\u6536\u8BF7\u6C42\u2026")),e.createElement("div",{className:"mTop15 flexRow alignItemsCenter"},e.createElement("div",{className:"webhookBtn mRight10",onClick:function(){return n.setState({type:Vn.NULL})}},_l("\u8FD4\u56DE")),H&&e.createElement("div",{className:"webhookBtn mRight10",onClick:function(){n.setState({count:0}),n.loopGetParameter()}},_l("\u91CD\u8BD5")),o.hooksAll&&e.createElement(e.Fragment,null,e.createElement(b.Z,{className:"mLeft10",checked:o.hooksBody,text:_l("\u751F\u6210Body\u5168\u6587\u53C2\u6570"),onClick:function(lt){return d({hooksBody:!lt},u)}}),e.createElement("span",{className:"workflowDetailTipsWidth mLeft5 Gray_9e tip-top","data-tip":_l("\u52FE\u9009\u540E\uFF0C\u5C06\u4F1A\u751F\u6210\u4E00\u4E2A\u8BB0\u5F55Body\u5168\u6587\u7684\u6587\u672C\u683C\u5F0F\u53C2\u6570")},e.createElement("i",{className:"Font14 icon-workflow_help"}))))),f===Vn.CUSTOM&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u4ECEJSON\u6570\u636E\u8303\u4F8B\u751F\u6210")),e.createElement("div",{className:"Gray_75 mTop5"},_l("\u8BF7\u63D0\u4F9B\u4E00\u4E2A\u8BF7\u6C42\u6570\u636E\u793A\u4F8B \uFF08JSON\u683C\u5F0F\uFF09")),e.createElement(Ee.Z,{className:"mTop15",maxHeight:250,minHeight:250,value:o.jsonParam,onChange:function(lt){d({jsonParam:lt})}}),e.createElement("div",{className:"mTop15 flexRow"},e.createElement("div",{className:"webhookBtn mRight10",onClick:function(){return n.setState({type:Vn.NULL})}},_l("\u8FD4\u56DE")),e.createElement("div",{className:"webhookBtn mRight10",onClick:this.postCustomOptions},_l("\u4E0B\u4E00\u6B65")))),f===Vn.PAIRS&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u4ECEkey-value pairs\u751F\u6210")),e.createElement(Bt,{key:this.props.selectNodeId,projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,appId:o.appId,source:o.params,sourceKey:"params",formulaMap:o.formulaMap,updateSource:d,pairsOnlyText:!0}),e.createElement("div",{className:"mTop15 flexRow"},e.createElement("div",{className:"webhookBtn mRight10",onClick:function(){return n.setState({type:Vn.NULL})}},_l("\u8FD4\u56DE")),e.createElement("div",{className:"webhookBtn mRight10",onClick:this.postKeyValueOptions},_l("\u4E0B\u4E00\u6B65")))),f===Vn.COMPLETE&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u53C2\u6570\u5217\u8868")),e.createElement("div",{className:"Gray_75 mTop5"},_l('\u7CFB\u7EDF\u5C06\u6839\u636E\u4EE5\u4E0B\u53C2\u6570\u5217\u8868\u6765\u6293\u53D6\u8BF7\u6C42\u4E2D\u7684\u6570\u636E\u3002\u652F\u6301\u5C06\u53C2\u6570\u8BBE\u4E3A\u5FC5\u586B\u9879\uFF0C\u6B64\u65F6\u5982\u679C\u5BF9\u65B9\u7684\u8BF7\u6C42\u4E2D\u6CA1\u6709\u9644\u5E26\u8BE5\u53C2\u6570\u65F6\uFF0C\u6211\u4EEC\u5C06\u8FD4\u56DE\u9519\u8BEF\u6D88\u606F"msg": "\u53C2\u6570\u7F3A\u5C11\u5FC5\u586B\u9879"\u3002')),e.createElement("div",{className:"mTop20 bold"},_l("\u8BF7\u6C42")," Body"),e.createElement(kt,{data:o.controls,controls:o.controls.filter(function(je){return je.enumDefault===0}),showRequired:!0,updateSource:d}),o.hooksAll&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u8BF7\u6C42")," Params"),e.createElement(kt,{data:o.controls,controls:o.controls.filter(function(je){return je.enumDefault===1001}),showRequired:!0,updateSource:d}),e.createElement("div",{className:"mTop20 bold"},_l("\u8BF7\u6C42")," Header"),e.createElement(kt,{controls:o.controls.filter(function(je){return je.enumDefault===1e3})})),e.createElement("div",{className:"mTop15 flexRow"},e.createElement("div",{className:"webhookBtn",onClick:function(){n.setState({type:Vn.NULL}),d({controls:[]},u)}},_l("\u4FEE\u6539"))),!o.hooksAll&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u81EA\u5B9A\u4E49\u8FD4\u56DE\u6570\u636E")),e.createElement("div",{className:"Gray_75 mTop5"},_l("\u7CFB\u7EDF\u9ED8\u8BA4\u63A5\u53D7\u6570\u636E\u540E\u8FD4\u56DE"),'{"status": 1, "data": {"sourceId": "xx", "instanceId": "xx"}, "msg": "\u6210\u529F"}'),e.createElement("div",{className:"flexRow mTop15"},De.map(function(je,lt){return e.createElement("div",{className:"flex",key:lt},e.createElement(le.Z,{text:je.text,checked:G===je.value,onClick:function(){n.setState({contentType:je.value}),d({returns:[{name:"",value:""}],returnJson:""})}}))})),G===1?e.createElement(Bt,{key:this.props.selectNodeId,projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,appId:o.appId,source:o.returns.length?o.returns:[{name:"",value:""}],sourceKey:"returns",formulaMap:o.formulaMap,updateSource:d}):e.createElement(ce.Z,{className:"minH100",projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,sourceAppId:o.appId,type:2,content:o.returnJson,formulaMap:o.formulaMap,onChange:function(lt,Ft,un){return d({returnJson:Ft})},updateSource:d})))))}}]),F}(e.Component);const Ot=function(ne){var F=ne.data;return e.createElement(e.Fragment,null,e.createElement("div",{className:"flowDetailStartHeader flexColumn BGBlueAsh"},e.createElement("div",{className:"flowDetailStartIcon flexRow"},e.createElement("i",{className:"icon-custom_actions Font40 gray"})),e.createElement("div",{className:"Font16 mTop10"},_l("\u6309\u94AE\u89E6\u53D1"))),e.createElement("div",{className:"workflowDetailBox mTop20"},e.createElement("div",{className:"ellipsis"},_l("\u5DE5\u4F5C\u8868"),e.createElement("span",{className:"mLeft10 bold"},F.appName)),e.createElement("div",{className:"ellipsis mTop15"},_l("\u6570\u636E\u6E90"),e.createElement("span",{className:"mLeft10 bold"},F.actionId===a.gp.BATCH_ACTION?_l("\u591A\u6761\u8BB0\u5F55"):_l("\u5355\u6761\u8BB0\u5F55"))),e.createElement("div",{className:"mTop20 bold"},_l("\u6309\u94AE")),e.createElement("div",{className:"workflowDetailDesc mTop10",style:{padding:"8px 16px",border:"1px solid #ddd"}},e.createElement("div",null,F.triggerName),e.createElement("div",{className:"ellipsis Gray_75"},a.Cr[F.clickType]))))},$t=function(ne){var F=ne.data,B={7:_l("\u53D1\u9001 API \u8BF7\u6C42"),12:_l("\u4EE3\u7801\u5757"),17:_l("\u4E1A\u52A1\u6D41\u7A0B\u6570\u7EC4"),18:_l("JSON \u89E3\u6790"),20:_l("\u4EBA\u5458\u4FE1\u606F"),21:_l("\u90E8\u95E8\u4FE1\u606F"),23:_l("\u5916\u90E8\u7528\u6237"),42:_l("API\u6570\u7EC4"),405:_l("\u4EBA\u5DE5\u8282\u70B9")};return e.createElement(e.Fragment,null,e.createElement("div",{className:"flowDetailStartHeader flexColumn BGBlueAsh"},e.createElement("div",{className:"flowDetailStartIcon flexRow"},e.createElement("i",{className:"icon-subprocess Font40 gray"})),e.createElement("div",{className:"Font16 mTop10"},_l("\u5B50\u6D41\u7A0B"))),e.createElement("div",{className:"workflowDetailBox mTop20"},e.createElement("div",{className:"Font13 bold"},_l("\u6570\u636E\u6E90")),e.createElement("div",{className:"Font13 mTop10"},F.appType===a.IF.SHEET?_l("\u5DE5\u4F5C\u8868\uFF1A%0",F.appName):_l("\u5176\u4ED6\uFF1A%0",B[F.appType])),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u88AB\u4EE5\u4E0B\u5DE5\u4F5C\u6D41\u89E6\u53D1")),!F.processList.length&&e.createElement("div",{className:"Font12 Gray_9e workflowDetailDesc mTop10 subProcessDesc"},_l("\u672A\u88AB\u4EFB\u4F55\u6D41\u7A0B\u89E6\u53D1")),F.processList.map(function(n,l){return e.createElement("div",{className:"workflowDetailDesc mTop10 subProcessDesc",key:l},e.createElement("div",{className:"Font13"},e.createElement("span",{className:"ThemeColor3 ThemeHoverColor2",onClick:function(){return window.open("/workflowedit/"+n.processId)}},n.processName)),e.createElement("div",{className:"Font12"},e.createElement("span",{className:"Gray_9e mRight5"},_l("\u8282\u70B9")),e.createElement("span",null,n.flowNodes.map(function(o){return"\u201C"+o.name+"\u201D"}).join("\u3001")),e.createElement("span",{className:"Gray_9e mLeft5"},_l("\u89E6\u53D1"))))})))};var cn=t(36546);const Mn=function(ne){var F=ne.data,B=ne.updateSource,n=ne.processId,l=ne.selectNodeId,o=ne.companyId,d=ne.renderConditionBtn,u=ne.relationId,p={20:{icon:"icon-hr_structure",title:_l("\u4EBA\u5458"),actions:[{text:_l("\u5F53\u65B0\u4EBA\u5165\u804C\u65F6"),value:a.FH.ADD},{text:_l("\u5F53\u4EBA\u5458\u79BB\u804C\u65F6"),value:a.FH.DELETE}]},21:{icon:"icon-workflow",title:_l("\u90E8\u95E8"),actions:[{text:_l("\u5F53\u521B\u5EFA\u90E8\u95E8\u65F6"),value:a.FH.ADD},{text:_l("\u5F53\u89E3\u6563\u90E8\u95E8\u65F6"),value:a.FH.DELETE}]},23:{icon:"icon-language",title:_l("\u5916\u90E8\u7528\u6237"),actions:[{text:_l("\u5F53\u65B0\u7528\u6237\u6CE8\u518C\u65F6"),value:a.FH.ADD},{text:_l("\u5F53\u7528\u6237\u767B\u5F55\u65F6"),value:a.FH.ONLY_EDIT},{text:_l("\u5F53\u7528\u6237\u6CE8\u9500\u65F6"),value:a.FH.DELETE},{text:_l("\u5F53\u7528\u6237\u88AB\u505C\u7528\u65F6"),value:a.FH.STOP}]}};return e.createElement(e.Fragment,null,e.createElement("div",{className:"flowDetailStartHeader flexColumn BGGreen"},e.createElement("div",{className:"flowDetailStartIcon flexRow"},e.createElement("i",{className:R()("Font40 green",p[F.appType].icon)})),e.createElement("div",{className:"Font16 mTop10"},p[F.appType].title)),e.createElement("div",{className:"workflowDetailBox mTop20"},e.createElement("div",{className:"bold"},_l("\u89E6\u53D1\u65B9\u5F0F")),p[F.appType].actions.map(function(f){return e.createElement("div",{className:"mTop15",key:f.value},e.createElement(le.Z,{text:f.text,checked:F.triggerId===f.value,onClick:function(){return B({triggerId:f.value,operateCondition:[]})}}),f.value===a.FH.DELETE&&e.createElement("span",{className:"Gray_9e","data-tip":_l("\u5305\u62EC\u7528\u6237\u81EA\u884C\u6CE8\u9500\u6216\u88AB\u7BA1\u7406\u5458\u6CE8\u9500"),style:{marginLeft:-15,marginTop:2,verticalAlign:"top",height:14}},e.createElement("i",{className:"Font14 icon-workflow_help"})))}),!F.operateCondition.length&&d(),e.createElement("div",{className:"pTop15"},e.createElement(cn.Z,{processId:n,relationId:u,selectNodeId:l,sourceAppId:F.appId,controls:F.controls,data:F.operateCondition,updateSource:function(w){return B({operateCondition:w})},projectId:o}))))};var dt=t(12620);const $e=function(ne){var F=ne.data,B=ne.switchWorksheet,n=ne.updateSource,l=ne.processId,o=ne.selectNodeId,d=ne.companyId,u=ne.renderConditionBtn,p=ne.triggerConditionHeader,f=ne.relationId,w=F.appType===a.IF.SHEET,D=F.appList.map(function(H){return{text:H.name,value:H.id,className:H.id===F.appId?"ThemeColor3":""}}),G=[{text:_l("\u5F53\u65B0\u589E\u6216\u66F4\u65B0\u8BB0\u5F55\u65F6"),value:a.FH.EDIT,selectFields:!0},{text:_l("\u4EC5\u65B0\u589E\u8BB0\u5F55\u65F6"),value:a.FH.ADD,desc:_l("\u5F53\u65B0\u589E\u8BB0\u5F55\u65F6\u89E6\u53D1\u6D41\u7A0B")},{text:_l("\u4EC5\u66F4\u65B0\u8BB0\u5F55\u65F6"),value:a.FH.ONLY_EDIT,selectFields:!0},{text:_l("\u5220\u9664\u8BB0\u5F55\u65F6"),value:a.FH.DELETE}];return e.createElement(e.Fragment,null,e.createElement("div",{className:R()("flowDetailStartHeader flexColumn",w?"BGYellow":"BGBlueAsh")},e.createElement("div",{className:"flowDetailStartIcon flexRow"},e.createElement("i",{className:R()("Font40",w?"icon-table yellow":"icon-sending gray")})),e.createElement("div",{className:"Font16 mTop10"},w?_l("\u5DE5\u4F5C\u8868"):_l("\u4E8B\u4EF6\u63A8\u9001"))),e.createElement("div",{className:"workflowDetailBox mTop20"},e.createElement("div",{className:"Font13 bold"},_l("\u9009\u62E9\u5DE5\u4F5C\u8868")),e.createElement(Ie.Z,{className:"flowDropdown flowDropdownBorder mTop10",disabled:F.appId&&!w,data:D,value:F.appId||void 0,border:!0,openSearch:!0,noData:_l("\u6682\u65E0\u5DE5\u4F5C\u8868\uFF0C\u8BF7\u5148\u5728\u5E94\u7528\u91CC\u521B\u5EFA"),placeholder:_l("\u8BF7\u9009\u62E9\u4E00\u4E2A\u5DE5\u4F5C\u8868\uFF0C\u5F00\u59CB\u914D\u7F6E\u6D41\u7A0B"),onChange:B}),e.createElement("div",{className:"Font13 bold mTop20"},w?_l("\u89E6\u53D1\u65B9\u5F0F"):_l("\u8BA2\u9605\u4E8B\u4EF6\u7C7B\u578B")),G.filter(function(H){return H.value!==a.FH.EDIT||w}).map(function(H){return e.createElement("div",{className:"mTop15",key:H.value},e.createElement(le.Z,{text:H.text,checked:F.triggerId===H.value,onClick:function(){return n({triggerId:H.value})}}),H.selectFields&&F.triggerId===H.value&&e.createElement("div",{className:"mLeft30"},e.createElement(dt.Z,{controls:F.filedControls,selectedIds:F.assignFieldIds,placeholder:_l("\u9009\u62E9\u89E6\u53D1\u5B57\u6BB5"),updateSource:function(je){return n({assignFieldIds:je})}}),e.createElement("div",{className:"Gray_9e mTop5 Font12"},_l("\u5F53\u4EE5\u4E0A\u6307\u5B9A\u7684\u5176\u4E2D\u4E00\u4E2A\u5B57\u6BB5\u66F4\u65B0\u65F6\u5C06\u89E6\u53D1\u6D41\u7A0B\uFF0C\u5982\u672A\u6307\u5B9A\u5219\u8868\u793A\u4EFB\u4F55\u5B57\u6BB5\u66F4\u65B0\u65F6\u90FD\u4F1A\u89E6\u53D1"))),H.desc&&F.triggerId===H.value&&e.createElement("div",{className:"mTop10 mLeft30 Gray_9e"},H.desc))}),!F.operateCondition.length&&u(),!!F.operateCondition.length&&e.createElement(cn.Z,{processId:l,relationId:f,selectNodeId:o,sourceAppId:F.appId,controls:F.controls,Header:p,data:F.operateCondition,updateSource:function(De){return n({operateCondition:De})},projectId:d})))};var jt=t(97373),rn=t(94055),Rt=t(46007),St=t(46665);const zt=function(ne){var F=ne.data,B=ne.switchWorksheet,n=ne.updateSource,l=ne.processId,o=ne.selectNodeId,d=ne.companyId,u=ne.renderConditionBtn,p=ne.triggerConditionHeader,f=ne.relationId,w=function(lt){return lt?e.createElement(e.Fragment,null,e.createElement("span",{className:"Gray_9e mRight5"},"[",a.Do[lt.type],"]"),e.createElement("span",null,lt.controlName)):e.createElement(rn.default,{title:"ID\uFF1A"+F.assignFieldId},e.createElement("span",{style:{color:"#f44336"}},_l("\u5B57\u6BB5\u5DF2\u5220\u9664")))},D=F.appList.map(function(je){return{text:je.name,value:je.id,className:je.id===F.appId?"ThemeColor3":""}}),G=function(lt){return F.controls.filter(function(Ft){return Ft.type===15||Ft.type===16}).map(function(Ft){return{text:w(Ft),value:Ft.controlId,className:Ft.controlId===lt?"ThemeColor3":""}})},H=(v().find(F.controls,function(je){return je.controlId===F.assignFieldId})||{}).type===15,De=[{text:_l("\u4E0D\u91CD\u590D"),value:0},{text:_l("\u6BCF\u5E74"),value:1},{text:_l("\u6BCF\u6708"),value:2},{text:_l("\u6BCF\u5468"),value:3}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"flowDetailStartHeader flexColumn BGBlue"},e.createElement("div",{className:"flowDetailStartIcon flexRow"},e.createElement("i",{className:"icon-hr_time Font40 blue"})),e.createElement("div",{className:"Font16 mTop10"},_l("\u65E5\u671F\u5B57\u6BB5"))),e.createElement("div",{className:"workflowDetailBox mTop20"},e.createElement("div",{className:"Font13 bold"},_l("\u9009\u62E9\u5DE5\u4F5C\u8868")),e.createElement(Ie.Z,{className:"flowDropdown flowDropdownBorder mTop10",data:D,value:F.appId||void 0,border:!0,openSearch:!0,noData:_l("\u6682\u65E0\u5DE5\u4F5C\u8868\uFF0C\u8BF7\u5148\u5728\u5E94\u7528\u91CC\u521B\u5EFA"),placeholder:_l("\u8BF7\u9009\u62E9\u4E00\u4E2A\u5DE5\u4F5C\u8868\uFF0C\u5F00\u59CB\u914D\u7F6E\u6D41\u7A0B"),onChange:B}),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u6307\u5B9A\u65E5\u671F\u5B57\u6BB5")),e.createElement("div",{className:"Font13 Gray_9e mTop10"},_l("\u5C06\u6309\u7167\u6B64\u5B57\u6BB5\u7684\u65E5\u671F\u4F5C\u4E3A\u65E5\u671F\u8868\u6765\u89E6\u53D1\u6D41\u7A0B")),e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:G(F.assignFieldId),value:F.assignFieldId||void 0,border:!0,placeholder:_l("\u8BF7\u9009\u62E9\u5B57\u6BB5"),onChange:function(lt){return n({assignFieldId:lt})},disabledClickElement:".ant-tooltip",renderTitle:function(){return F.assignFieldId&&w(v().find(F.controls,function(lt){return lt.controlId===F.assignFieldId}))}}),!!F.assignFieldId&&e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop20"},_l("\u5F00\u59CB\u6267\u884C\u65F6\u95F4")),e.createElement(Rt.Z,{data:F,dateNoTime:H,updateSource:n}),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u91CD\u590D\u5468\u671F")),e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:De,value:F.frequency,border:!0,onChange:function(lt){return n({frequency:lt})}}),F.frequency!==0&&e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop20"},_l("\u7ED3\u675F\u6267\u884C\u65F6\u95F4")),e.createElement("div",{className:"Font13 Gray_9e mTop5"},_l("\u5F53\u5230\u8FBE\u6B64\u65F6\u95F4\u70B9\u540E\u5C06\u505C\u6B62\u5FAA\u73AF")),e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:F.executeEndTime?[{text:_l("\u6E05\u9664\u9009\u62E9"),value:""}].concat(G(F.executeEndTime)):G(F.executeEndTime),value:F.executeEndTime||void 0,border:!0,placeholder:_l("\u8BF7\u9009\u62E9\u5B57\u6BB5"),onChange:function(lt){return n({executeEndTime:lt,endTime:lt&&v().find(F.controls,function(Ft){return Ft.controlId===lt}).type===15?"08:00":""})},renderTitle:function(){return F.executeEndTime&&w(v().find(F.controls,function(lt){return lt.controlId===F.executeEndTime}))}}),(v().find(F.controls,function(je){return je.controlId===F.executeEndTime})||{}).type===15&&e.createElement("div",{className:"mTop10 flexRow alignItemsCenter timeWidth"},e.createElement(St.Z,{type:"minute",value:{hour:F.endTime?parseInt(F.endTime.split(":")[0]):8,minute:F.endTime?parseInt(F.endTime.split(":")[1]):0,second:0},onChange:function(lt,Ft){n({endTime:Ft.hour.toString().padStart(2,"0")+":"+Ft.minute.toString().padStart(2,"0")})}})))),!F.operateCondition.length&&u(),!!F.operateCondition.length&&e.createElement(cn.Z,{processId:l,relationId:f,selectNodeId:o,sourceAppId:F.appId,controls:F.controls,Header:p,data:F.operateCondition,updateSource:function(lt){return n({operateCondition:lt})},projectId:d})))};var oa=t(46593),qn=t.n(oa),In=t(91088),Vt=t(91247),Yt=t(27738),qt=(0,W.Z)([`
  padding: 12px;
  border-radius: 4px;
  height: 340px;
  overflow: auto;
  width: 100%;
  border: 1px solid #ddd;
  resize: none;
  &:focus {
    border-color: #2196f3;
  }
`],[`
  padding: 12px;
  border-radius: 4px;
  height: 340px;
  overflow: auto;
  width: 100%;
  border: 1px solid #ddd;
  resize: none;
  &:focus {
    border-color: #2196f3;
  }
`]),rt=a.Jy.concat([{text:_l("\u5BF9\u8C61"),value:10000006,en:"object"}]),Qe=P.ZP.textarea(qt),ht=function(){return{controlId:(0,Vt.Z)(),controlName:"",type:2,alias:"",required:!1,desc:"",workflowDefaultValue:"",attribute:0}};const Lt=function(ne){var F=ne.data,B=ne.updateSource,n=ne.isIntegration,l={1:{title:_l("\u5DE5\u4F5C\u6D41"),desc:_l("\u8282\u70B9")},2:{title:_l("\u81EA\u5B9A\u4E49\u9875\u9762"),desc:_l("\u6309\u94AE")}},o={2:_l("\u9ED8\u8BA4\u503C"),6:_l("\u9ED8\u8BA4\u503C"),14:"",16:_l("\u9ED8\u8BA4\u503C (2019-10-01 09:00)"),26:_l("\u9ED8\u8BA4\u503C (\u4EBA\u5458ID)"),27:_l("\u9ED8\u8BA4\u503C (\u90E8\u95E8ID)"),48:_l("\u9ED8\u8BA4\u503C (\u7EC4\u7EC7\u89D2\u8272ID)"),10000007:_l("\u9ED8\u8BA4\u503C (\u793A\u4F8B\uFF1A[] )"),10000008:_l("\u9ED8\u8BA4\u503C (\u793A\u4F8B\uFF1A[] )")},d=function(G,H,De,je){var lt=De.controlId,Ft=De.type,un=De.dataSource,dn=v().cloneDeep(F.controls);dn.forEach(function(Hn){Hn.controlId===lt&&(Hn[G]=je&&v().includes(["controlName","alias"],G)&&dn.filter(function(ca){return ca.dataSource===un}).find(function(ca){return H&&ca[G]===H&&ca.controlId!==lt})?H+Math.floor(Math.random()*1e4).toString().padStart(4,"0"):H,G==="type"&&H===14&&(Hn.value=""))}),G==="type"&&v().includes([10000007,10000008],Ft)&&v().remove(dn,function(Hn){return Hn.dataSource===lt}),G==="type"&&H===10000007&&dn.push(C()({},ht(),{controlName:"string",dataSource:lt})),B({controls:dn})},u=function(G){var H=G.processId,De=G.type;De===1?window.open("/workflowedit/"+H):In.Z.getAppSimpleInfo({workSheetId:H}).then(function(je){var lt=je.appId,Ft=je.appSectionId;window.open("/app/"+lt+"/"+Ft+"/"+H)})},p=function(G){var H=G.type,De=G.dataSource,je=G.controlId,lt=v().cloneDeep(F.controls),Ft=0;lt.forEach(function(un,dn){un.controlId===je&&(Ft=dn)}),je||(Ft=lt.length-1),H===10000008||De?lt.splice(Ft+1,0,C()({},ht(),{dataSource:De||je})):lt.splice(Ft+1,0,ht()),B({controls:lt})},f=function D(G){return G.map(function(H){return H.dataSource&&v().find(F.controls,function(De){return De.controlId===H.dataSource}).type===10000007?null:e.createElement(e.Fragment,{key:H.controlId},e.createElement("div",{className:R()("mTop15 flexRow alignItemsCenter relative",{pLeft20:H.dataSource})},e.createElement("input",{type:"text",className:"ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10",style:{width:180},placeholder:_l("\u53C2\u6570\u540D\uFF08\u5FC5\u586B\uFF09"),value:H.controlName,maxLength:64,onChange:function(je){return d("controlName",je.target.value,H)},onBlur:function(je){return d("controlName",je.target.value.trim(),H,!0)}}),e.createElement(Ie.Z,{className:"flowDropdown mLeft10",style:{width:160},data:a.Jy.filter(function(De){return De.value!==10000003&&(!H.dataSource||H.dataSource&&!v().includes([14,10000008],De.value))}),value:H.type,renderTitle:function(){return e.createElement("span",null,rt.find(function(je){return je.value===H.type}).text)},border:!0,disabled:!(0,Yt.Z)(H.controlId),onChange:function(je){d("type",je,H)}}),e.createElement("input",{type:"text",className:"ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10 flex mLeft10",placeholder:H.dataSource?_l("\u522B\u540D\uFF08\u5FC5\u586B\uFF09"):_l("\u522B\u540D"),value:H.alias,onChange:function(je){return d("alias",je.target.value.replace(/[^a-z\d-_]/gi,""),H)},onBlur:function(je){var lt=je.target.value.trim();lt&&!/^[a-zA-Z]{1}/.test(lt)&&(lt="pbp"+lt),d("alias",lt,H,!0)}}),e.createElement(b.Z,{className:"InlineBlock Font12 TxtMiddle mLeft10 LineHeight20",text:_l("\u5FC5\u586B"),checked:H.required,onClick:function(je){return d("required",!je,H)}}),H.type<1e7&&!H.dataSource&&e.createElement("span",{className:"mLeft10","data-tip":H.attribute===0?_l("\u8BBE\u4E3A\u6807\u9898"):_l("\u53D6\u6D88\u8BBE\u4E3A\u6807\u9898"),style:{height:16}},e.createElement("i",{className:R()("Font16 Gray_9e ThemeHoverColor3 pointer",H.attribute===0?"icon-title":"icon-ic_title ThemeColor3"),onClick:function(){var je=[].concat(F.controls).map(function(lt){return lt.attribute=lt.controlId===H.controlId?H.attribute?0:1:0,lt});B({controls:je})}})),e.createElement("i",{className:"icon-delete2 Font16 Gray_9e ThemeHoverColor3 mLeft10 pointer",onClick:function(){var je=[].concat(F.controls);v().remove(je,function(lt){return lt.controlId===H.controlId||lt.dataSource===H.controlId}),B({controls:je})}}),e.createElement("i",{className:"icon-add Font16 pointer Gray_9e ThemeHoverColor3 mLeft10 pointer",onClick:function(){return p(H)}})),e.createElement("div",{className:R()("mTop10 flexRow alignItemsCenter",{pLeft20:H.dataSource})},n&&H.type!==10000003&&!H.dataSource&&e.createElement("input",{type:"text",className:"ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10 mRight10",disabled:H.type===14,style:{width:180},placeholder:o[H.type],value:H.workflowDefaultValue,onChange:function(je){return d("workflowDefaultValue",je.target.value,H)},onBlur:function(je){return d("workflowDefaultValue",je.target.value.trim(),H,!0)}}),e.createElement("input",{type:"text",className:"ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10 flex",placeholder:_l("\u8BF4\u660E"),value:H.desc,onChange:function(je){return d("desc",je.target.value,H)},onBlur:function(je){return d("desc",je.target.value.trim(),H)}})),H.type===10000003&&e.createElement(Ee.Z,{className:"mTop10 Font13",maxHeight:250,minHeight:0,disabled:!(0,Yt.Z)(H.controlId),style:{paddingTop:7,paddingBottom:7},placeholder:_l("\u6570\u7EC4\u7ED3\u6784\uFF08\u8BF7\u7ED9\u51FA\u4E00\u4E2A\u8303\u4F8B\uFF09"),value:H.value,onChange:function(je){d("value",je,H)}}),D(F.controls.filter(function(De){return De.dataSource===H.controlId})))})},w=function(){te.Z.confirm({width:640,title:_l("\u4ECEJSON\u793A\u4F8B\u751F\u6210"),description:e.createElement(Qe,{id:"generateJSON"}),okText:_l("\u5BFC\u5165"),onOk:function(){return new(qn())(function(H,De){var je=document.getElementById("generateJSON").value.trim();(0,N.BH)(je)?z.Z.jsonToControls({json:je}).then(function(lt){var Ft=v().cloneDeep(F.controls),un=function(Hn){var ca=Hn.item,da=Hn.dataSource,Me=da===void 0?"":da;return{controlId:(0,Vt.Z)(),dataSource:Me,jsonPath:ca.jsonPath,controlName:!Me&&v().find(Ft,function(nt){return nt.controlName===ca.controlName})?ca.controlName+Math.floor(Math.random()*1e4).toString().padStart(4,"0"):ca.controlName,type:ca.type,alias:ca.controlName,required:ca.required,desc:"",workflowDefaultValue:"",attribute:0}};lt.filter(function(dn){return dn.type===10000007}).map(function(dn){lt.push((0,h.default)({},dn,{type:2,controlName:"string",value:"",jsonPath:"@",dataSource:dn.jsonPath}))}),lt.filter(function(dn){return!dn.dataSource}).forEach(function(dn){Ft.push(un({item:dn}))}),lt.filter(function(dn){return dn.dataSource}).forEach(function(dn){Ft.push(un({item:dn,dataSource:v().find(Ft,function(Hn){return Hn.jsonPath===dn.dataSource}).controlId}))}),B({controls:Ft}),H()}):(alert(_l("JSON\u683C\u5F0F\u6709\u9519\u8BEF"),2),De(!0))})}})};return e.createElement(e.Fragment,null,!n&&e.createElement("div",{className:"flowDetailStartHeader flexColumn BGBlueAsh"},e.createElement("div",{className:"flowDetailStartIcon flexRow"},e.createElement("i",{className:"icon-pbc Font40 gray"})),e.createElement("div",{className:"Font16 mTop10"},_l("\u5C01\u88C5\u4E1A\u52A1\u6D41\u7A0B"))),e.createElement("div",{className:"workflowDetailBox mTop20"},e.createElement("div",{className:"Font13 bold"},_l("\u8F93\u5165\u53C2\u6570")),n&&!F.controls.length&&e.createElement("div",{className:"Font13 Gray_75 mTop20"},_l("\u6CA1\u6709\u8F93\u5165\u53C2\u6570\u7684 API \u8BF7\u76F4\u63A5\u4FDD\u5B58\u5B8C\u6210\u914D\u7F6E")),f(F.controls.filter(function(D){return!D.dataSource})),e.createElement("div",{className:"addActionBtn mTop25 flexRow alignItemsCenter"},e.createElement("span",{className:"ThemeBorderColor3",onClick:p},e.createElement("i",{className:"icon-add Font16"}),_l("\u6DFB\u52A0\u53C2\u6570")),e.createElement("div",{className:"ThemeHoverColor3 pointer Gray_75",onClick:w},e.createElement("i",{className:"Font14 icon-knowledge-upload"}),_l("\u4ECEJSON\u793A\u4F8B\u751F\u6210"))),!n&&e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop30"},_l("\u5728\u672C\u7EC4\u7EC7\u4E0B\uFF0C\u6B63\u5728\u88AB\u4EE5\u4E0B\u4E8B\u4EF6\u8C03\u7528")),!F.processList.length&&e.createElement("div",{className:"Font12 Gray_9e workflowDetailDesc mTop10 subProcessDesc"},_l("\u672A\u88AB\u4EFB\u4F55\u6D41\u7A0B\u6216\u6309\u94AE\u8C03\u7528")),F.processList.map(function(D,G){return e.createElement("div",{className:"workflowDetailDesc mTop10 subProcessDesc",key:G},e.createElement("div",{className:"Font13"},e.createElement("span",{className:"ThemeColor3 ThemeHoverColor2 pointer",onClick:function(){return u(D)}},l[D.type].title,"\uFF1A",D.processName)),e.createElement("div",{className:"Font12"},e.createElement("span",{className:"Gray_9e"},l[D.type].desc,"\uFF1A"),e.createElement("span",null,D.flowNodes.map(function(H){return""+H.name}).join("\u3001"))))}))))},Ct=function(ne){var F=ne.data;return e.createElement(e.Fragment,null,e.createElement("div",{className:"flowDetailStartHeader flexColumn BGBlue"},e.createElement("div",{className:"flowDetailStartIcon flexRow"},e.createElement("i",{className:"icon-replyto Font40 blue"})),e.createElement("div",{className:"Font16 mTop10"},_l("\u8BA8\u8BBA\u901A\u77E5\u89E6\u53D1"))),e.createElement("div",{className:"workflowDetailBox mTop20"},e.createElement("div",{className:"ellipsis"},_l("\u5E94\u7528"),e.createElement("span",{className:"mLeft10 bold"},F.apkName)),e.createElement("div",{className:"mTop20 bold"},_l("\u8BA8\u8BBA\u901A\u77E5")),e.createElement("div",{className:"workflowDetailDesc mTop10",style:{padding:"8px 16px",border:"1px solid #ddd"}},e.createElement("div",{className:"ellipsis Gray_75"},_l("\u5F53\u5916\u90E8\u7528\u6237\u6536\u5230\u8BA8\u8BBA\u901A\u77E5\u65F6\uFF08\u88AB\u56DE\u590D\u3001\u88AB\u63D0\u5230\uFF09\u89E6\u53D1")))))};var mt=t(90144);const vt=function(ne){var F=ne.data,B=ne.updateSource;return e.createElement(e.Fragment,null,e.createElement("div",{className:"flowDetailStartHeader flexColumn BGDarkBlue",style:{height:245}},e.createElement("div",{className:"flowDetailStartIcon flexRow",style:{background:"rgba(0, 0, 0, 0.24)"}},e.createElement("i",{className:"icon-approval Font40 white"})),e.createElement("div",{className:"Font16 mTop10"},_l("\u53D1\u8D77\u5BA1\u6279\u6D41\u7A0B")),e.createElement("div",{className:"Font14 mTop10"},_l("\u5BF9\u81EA\u52A8\u5316\u5DE5\u4F5C\u6D41\u4E2D\u7684\u6570\u636E\u53D1\u8D77\u5BA1\u6279\u6D41\u7A0B\uFF0C\u5B9E\u73B0\u4E1A\u52A1\u81EA\u52A8\u5316\u548C\u4EBA\u5DE5\u5BA1\u6279\u7684\u6253\u901A"))),e.createElement("div",{className:"workflowDetailBox mTop20"},e.createElement("div",{className:"Font13 bold"},_l("\u88AB\u4EE5\u4E0B\u5DE5\u4F5C\u6D41\u89E6\u53D1")),e.createElement("div",{className:"Font13 mTop15 flexRow alignItemsCenter"},e.createElement("div",{className:"ellipsis"},F.triggerName||e.createElement("span",{style:{color:"#f44336"}},_l("\u6D41\u7A0B\u5DF2\u5220\u9664"))),F.triggerName&&e.createElement("i",{className:"mLeft5 icon-task-new-detail Font12 ThemeColor3 ThemeHoverColor2 pointer",onClick:function(){return window.open("/workflowedit/"+F.triggerId)}}),e.createElement("div",{className:"flex"})),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u53D1\u8D77\u5BA1\u6279\u7684\u6570\u636E\u5BF9\u8C61")),e.createElement("div",{className:"workflowDetailDesc mTop10 subProcessDesc bold alignItemsCenter flexRow"},e.createElement("i",{className:"icon-worksheet Gray_9e mRight8 Font16"}),_l("\u5DE5\u4F5C\u8868\u201C%0\u201D",F.appName)),e.createElement("div",{className:"Font13 mTop20 bold"},_l("\u53D1\u8D77\u4EBA\u64CD\u4F5C")),[{text:_l("\u5141\u8BB8\u53D1\u8D77\u4EBA\u64A4\u56DE"),key:"allowRevoke"},{text:_l("\u5141\u8BB8\u53D1\u8D77\u4EBA\u50AC\u529E"),key:"allowUrge"}].map(function(n){return e.createElement("div",{key:n.key,className:"mTop15 flexRow alignItemsCenter"},e.createElement(b.Z,{className:" flexRow",text:n.text,checked:F.processConfig[n.key],onClick:function(o){return B({processConfig:C()({},F.processConfig,(0,E.default)({},n.key,!o))})}}))}),e.createElement(mt.Z,ne)))};var Xt=16,bn=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.getNodeDetail=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=l.appId,d=o===void 0?void 0:o,u=l.fields,p=u===void 0?void 0:u,f=n.props,w=f.processId,D=f.selectNodeId,G=f.selectNodeType,H=f.flowInfo,De=f.isIntegration,je=f.instanceId;z.Z.getNodeDetail({processId:w,nodeId:D,flowNodeType:G,appId:d,fields:p,instanceId:je},{isIntegration:De}).then(function(lt){lt.appType===a.IF.PBC&&!H.child&&!lt.controls.length&&(lt.controls=[{controlId:(0,Vt.Z)(),controlName:"",type:2,alias:"",required:!1,desc:""}]),lt.appType===a.IF.APPROVAL_START&&p&&(lt=C()(n.state.data,{fields:lt.fields,flowNodeMap:lt.flowNodeMap})),lt.appType===a.IF.APPROVAL_START&&(!lt.processConfig.userTaskNullMaps||lt.processConfig.userTaskNullMaps[0])&&(lt.processConfig.userTaskNullMaps=(0,E.default)({},lt.processConfig.userTaskNullPass?1:3,[]),lt.processConfig.userTaskNullPass=!1),n.setState({data:lt})})},n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=l.close,d=o===void 0?!0:o,u=l.isUpdate,p=u===void 0?void 0:u,f=n.props.flowInfo,w=n.state,D=w.data,G=w.saveRequest,H=v().get(v().find(D.controls,function(Ht){var Sn=Ht.controlId;return Sn===v().get(D,"assignFieldId")}),"type")===Xt,De=D.appId,je=D.appType,lt=D.assignFieldId,Ft=D.assignFieldIds,un=D.operateCondition,dn=D.triggerId,Hn=D.name,ca=D.executeTimeType,da=D.number,Me=D.unit,nt=D.executeTime,He=D.executeEndTime,ie=D.endTime,We=D.repeatType,Ue=D.interval,Ke=D.frequency,ut=D.weekDays,wt=D.config,Et=D.controls,et=Et===void 0?[]:Et,Xe=D.returnJson,pt=D.returns,at=pt===void 0?[]:pt,ct=D.processConfig,Nt=D.hooksAll,mn=D.hooksBody,Qt=D.fields,Cn=D.flowNodeMap,_n=D.time;if(_n=H?"":_n,!G){if(!f.child){if(!De&&(je===a.IF.SHEET||je===a.IF.DATE)){alert(_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u5DE5\u4F5C\u8868"),2);return}if(je===a.IF.WEBHOOK&&!D.controls.length&&d){alert(_l("\u8BF7\u8BBE\u7F6E\u6709\u6548\u7684\u53C2\u6570"),2);return}if((0,N.lX)(un)){alert(_l("\u7B5B\u9009\u6761\u4EF6\u7684\u5224\u65AD\u503C\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if(We===a.DC.CUSTOM&&wt&&!n.checkTimingTriggerConfig(wt))return;if(!Nt&&Xe&&!(0,N.BH)(Xe)){alert(_l("\u81EA\u5B9A\u4E49\u6570\u636E\u8FD4\u56DEJSON\u683C\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u4FEE\u6539"),2);return}if(v().includes([a.IF.PBC,a.IF.PARAMETER],je)){var ra=0,Nn=0;if(et.filter(function(Ht){return!Ht.controlName}).length){alert(_l("\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if(et.filter(function(Ht){return Ht.type===10000003}).forEach(function(Ht){(v().isEmpty(safeParse(Ht.value))||!v().isArray(safeParse(Ht.value)))&&ra++}),ra){alert(_l("\u6570\u7EC4\u8303\u4F8B\u6570\u636E\u6709\u9519\u8BEF"),2);return}if(et.filter(function(Ht){return Ht.type===10000008}).forEach(function(Ht){et.find(function(Sn){return Sn.dataSource===Ht.controlId})||Nn++}),Nn){alert(_l("\u5BF9\u8C61\u6570\u7EC4\u4E0B\u81F3\u5C11\u8981\u6709\u4E00\u4E2A\u53C2\u6570"),2);return}if(et.filter(function(Ht){return Ht.dataSource&&!Ht.alias&&et.find(function(Sn){return Sn.controlId===Ht.dataSource}).type===10000008}).length){alert(_l("\u5BF9\u8C61\u6570\u7EC4\u4E0B\uFF0C\u5B50\u8282\u70B9\u7684\u522B\u540D\u4E3A\u5FC5\u586B"),2);return}}if(je===a.IF.LOOP&&He&&ue()(nt)>=ue()(He)){alert(_l("\u7ED3\u675F\u6267\u884C\u65F6\u95F4\u4E0D\u80FD\u5C0F\u4E8E\u5F00\u59CB\u6267\u884C\u65F6\u95F4"),2);return}if(je===a.IF.APPROVAL_START&&(ct.initiatorMaps[5]&&!(ct.initiatorMaps[5]||[]).length||ct.userTaskNullMaps[5]&&!(ct.userTaskNullMaps[5]||[]).length)){alert(_l("\u5FC5\u987B\u6307\u5B9A\u4EE3\u7406\u4EBA"),2);return}}z.Z.saveNode({appId:De,appType:je,assignFieldId:lt,assignFieldIds:Ft,processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,operateCondition:un,triggerId:dn,name:Hn.trim(),executeTimeType:ca,number:da,unit:Me,time:_n,executeTime:nt,executeEndTime:He,endTime:ie,repeatType:We,interval:Ue,frequency:Ke,weekDays:ut,config:wt,isUpdate:p,controls:et.map(function(Ht){return C()(Ht,{workflowRequired:Ht.required})}),returnJson:Xe,returns:at.filter(function(Ht){return!!Ht.name}),processConfig:ct,hooksBody:mn,fields:Qt,flowNodeMap:(0,N.zA)(Cn)},{isIntegration:n.props.isIntegration}).then(function(Ht){n.props.updateNodeData(Ht),d&&n.props.closeDetail(),n.setState({saveRequest:!1})}),n.setState({saveRequest:!0})}},n.switchWorksheet=function(l){var o=function(){return n.getNodeDetail({appId:l})};n.state.data.appId?te.Z.confirm({title:e.createElement("span",{style:{color:"#f44336"}},_l("\u6CE8\u610F\uFF01\u4F60\u5C06\u8981\u66F4\u6539\u89E6\u53D1\u6D41\u7A0B\u7684\u5DE5\u4F5C\u8868")),description:_l("\u66F4\u6362\u4E3A\u65B0\u7684\u5DE5\u4F5C\u8868\u540E\uFF0C\u6240\u6709\u76F8\u5173\u8282\u70B9\u914D\u7F6E\u7684\u5B57\u6BB5\u90FD\u5C06\u88AB\u91CD\u7F6E\uFF0C\u4F60\u9700\u8981\u91CD\u65B0\u914D\u7F6E\u8FD9\u4E9B\u8282\u70B9\u3002\u8BF7\u786E\u8BA4\u4F60\u9700\u8981\u6267\u884C\u6B64\u64CD\u4F5C"),okText:_l("\u786E\u8BA4\u66F4\u6539"),onOk:o}):o()},n.triggerConditionHeader=function(){return e.createElement("div",{className:"mTop25"},e.createElement("div",{className:"Font13 bold"},_l("\u89E6\u53D1\u6761\u4EF6")),e.createElement("div",{className:"Font13 mTop5 Gray_9e"},_l("\u5F53\u8BB0\u5F55\u6EE1\u8DB3\u4EE5\u4E0B\u6761\u4EF6\u65F6\u8FDB\u5165\u6D41\u7A0B")))},n.renderConditionBtn=function(){var l=n.state.data,o=l.appId||v().includes([a.IF.USER,a.IF.DEPARTMENT],l.appType);return e.createElement("div",{className:"addActionBtn mTop25"},e.createElement("span",{className:o?"ThemeBorderColor3":"Gray_bd borderColor_c",onClick:function(){return o&&n.updateSource({operateCondition:[[{}]]})}},e.createElement("i",{className:"icon-add Font16"}),_l("\u7B5B\u9009\u6761\u4EF6")),e.createElement("div",{className:R()("mTop10",o?"Gray_9e":"Gray_bd")},_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u4EC5\u4F7F\u6EE1\u8DB3\u6761\u4EF6\u7684\u8BB0\u5F55\u8FDB\u5165\u6D41\u7A0B\u3002")))},n.checkTimingTriggerConfig=function(l){var o={minute:_l("\u5206\u949F"),hour:_l("\u5C0F\u65F6"),day:_l("\u5929"),week:_l("\u661F\u671F"),month:_l("\u6708")},d=[];return T()(l).forEach(function(u){(l[u].type===2||l[u].type===4)&&(!l[u].values[0]||!l[u].values[1])&&d.push(u),l[u].type===3&&!l[u].values[0]&&d.push(u)}),d.length&&alert(_l("%0\u914D\u7F6E\u6709\u8BEF",d.map(function(u){return o[u]}).join("\u3001")),2),!d.length},n.state={data:{},saveRequest:!1},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail()}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"render",value:function(){var n=this,l=this.props,o=l.processId,d=l.selectNodeId,u=l.flowInfo,p=this.state.data;return v().isEmpty(p)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},p),icon:u.child?"icon-subprocess":(0,N.wu)(p.typeId,p.appType,p.triggerId),bg:u.child?"BGBlueAsh":(0,N.bC)(p.appType,p.triggerId),updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,u.child?e.createElement($t,{data:p}):e.createElement(e.Fragment,null,v().includes([a.IF.SHEET,a.IF.EVENT_PUSH],p.appType)&&e.createElement($e,(0,h.default)({},this.props,{data:p,switchWorksheet:this.switchWorksheet,updateSource:this.updateSource,triggerConditionHeader:this.triggerConditionHeader,renderConditionBtn:this.renderConditionBtn})),p.appType===a.IF.LOOP&&e.createElement(we,{data:p,updateSource:this.updateSource,getNodeDetail:this.getNodeDetail,checkTimingTriggerConfig:this.checkTimingTriggerConfig}),p.appType===a.IF.DATE&&e.createElement(zt,(0,h.default)({},this.props,{data:p,switchWorksheet:this.switchWorksheet,updateSource:this.updateSource,triggerConditionHeader:this.triggerConditionHeader,renderConditionBtn:this.renderConditionBtn})),p.appType===a.IF.WEBHOOK&&e.createElement(Zn,(0,h.default)({},this.props,{data:p,processId:o,selectNodeId:d,updateSource:this.updateSource,onSave:function(){return n.onSave({close:!1,isUpdate:!0})}})),p.appType===a.IF.CUSTOM_ACTION&&e.createElement(Ot,{data:p}),v().includes([a.IF.USER,a.IF.DEPARTMENT,a.IF.EXTERNAL_USER],p.appType)&&p.triggerId!==a.FH.DISCUSS&&e.createElement(Mn,(0,h.default)({},this.props,{data:p,updateSource:this.updateSource,renderConditionBtn:this.renderConditionBtn})),v().includes([a.IF.PBC,a.IF.PARAMETER],p.appType)&&e.createElement(Lt,(0,h.default)({},this.props,{data:p,updateSource:this.updateSource})),p.triggerId===a.FH.DISCUSS&&e.createElement(Ct,{data:p}),p.appType===a.IF.APPROVAL_START&&e.createElement(vt,(0,h.default)({},this.props,{data:p,getNodeDetail:this.getNodeDetail,updateSource:this.updateSource}))))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:u.child||v().includes([a.IF.SHEET,a.IF.DATE,a.IF.EVENT_PUSH],p.appType)&&p.appId||p.appType===a.IF.WEBHOOK&&p.controls.length||v().includes([a.IF.LOOP,a.IF.USER,a.IF.DEPARTMENT,a.IF.CUSTOM_ACTION,a.IF.EXTERNAL_USER,a.IF.PBC,a.IF.PARAMETER,a.IF.APPROVAL_START],p.appType),onSave:function(){p.appType===a.IF.WEBHOOK?n.onSave({isUpdate:!1}):n.onSave()}})))}}]),F}(e.Component),pn=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateSource=function(l){n.setState({data:l})},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=n.props,p=u.processId,f=u.selectNodeId,w=u.selectNodeType,D=u.updateNodeData;if(!d){if((0,N.lX)(o)){alert(_l("\u7B5B\u9009\u6761\u4EF6\u7684\u5224\u65AD\u503C\u4E0D\u80FD\u4E3A\u7A7A"),2);return}z.Z.saveNode({nodeId:f,flowNodeType:w,operateCondition:o,processId:p}).then(function(G){D(G),n.props.closeDetail()}),n.setState({saveRequest:!0})}},n.state={data:[],controls:[],saveRequest:!1},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){var n=this,l=this.props,o=l.processId,d=l.selectNodeId,u=l.selectNodeType,p=l.instanceId;z.Z.getNodeDetail({processId:o,nodeId:d,flowNodeType:u,instanceId:p}).then(function(f){p&&f.conditions.forEach(function(w){w.forEach(function(D){D.fromValue||(D.fromValue=_l("\u7A7A")),D.toValue||(D.toValue=[_l("\u7A7A")])})}),n.setState({name:f.name,data:f.conditions.length?f.conditions:n.state.data,controls:f.flowNodeAppDtos})})}},{key:"triggerConditionHeader",value:function(){return e.createElement("div",{className:"Font13 Gray_9e"},_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\u540E\uFF0C\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u624D\u80FD\u8FDB\u5165\u8BE5\u5206\u652F"))}},{key:"render",value:function(){var n=this,l=this.props,o=l.flowInfo,d=l.closeDetail,u=l.instanceId,p=this.state,f=p.data,w=p.controls,D=p.name;return e.createElement(te.Z,{className:R()("workflowDialogBox",{workflowDetailRelease:!!o.parentId||u}),overlayClosable:!1,visible:!0,title:e.createElement("div",{className:"flexRow",style:{height:24}},e.createElement("span",{className:"ellipsis"},D||_l("\u5206\u652F")),e.createElement("span",{className:"mLeft10"},e.createElement(q.Z,{type:1,className:"workflowDialogSupport",href:"https://help.mingdao.com/worksheet/field-filter"})),e.createElement("span",{className:"flex"})),onCancel:d,width:560,onOk:this.onSave},e.createElement(cn.Z,{processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,isNodeHeader:!0,controls:w,Header:this.triggerConditionHeader,data:f,updateSource:this.updateSource,projectId:this.props.companyId}),!f.length&&e.createElement("div",{className:"Font13 addConditionBtn ThemeColor3 ThemeHoverColor2 mTop15",onClick:function(){return n.setState({data:[[{}]]})}},_l("\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6")))}}]),F}(e.Component),Rn=t(70264),fe=t(95103),$n=t(93618),gn=t(53054);const en=function(ne){var F=(0,e.useState)(!1),B=(0,U.Z)(F,2),n=B[0],l=B[1],o=ne.operationUserRange,d=ne.operationType,u=ne.title,p=ne.btnText,f=ne.updateSource,w=(o||{})[d]||[];return e.createElement("div",{className:"mLeft25 relative"},e.createElement("div",{className:"Font13 mTop10 Gray_9e"},u,w.length?_l("\u4EE5\u4E0B\u6307\u5B9A\u6210\u5458"):_l("\u6240\u6709\u6210\u5458")),e.createElement($n.Z,{companyId:ne.companyId,appId:ne.relationType===2?ne.relationId:"",accounts:w,updateSource:f}),e.createElement("div",{className:"mTop12 flexRow ThemeColor3 workflowDetailAddBtn",onClick:function(){return l(!0)}},e.createElement("i",{className:"Font28 icon-task-add-member-circle mRight10"}),p,e.createElement(gn.Z,{appId:ne.relationType===2?ne.relationId:"",visible:n,companyId:ne.companyId,processId:ne.processId,nodeId:ne.selectNodeId,accounts:w,updateSource:f,onClose:function(){return l(!1)}})))};var _t=t(70221);const nn=function(ne){var F=ne.dataKey,B=ne.name,n=ne.buttonName,l=ne.onChange;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 Gray_9e mTop10"},n),e.createElement("div",{className:"flexRow"},e.createElement("input",{type:"text",className:"flex ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10 mTop10",defaultValue:B,onChange:function(d){return l((0,E.default)({},F,d.currentTarget.value))}})))};var Gt=t(21674);const xt=function(ne){var F=ne.companyId,B=ne.processId,n=ne.relationId,l=ne.selectNodeId,o=ne.selectNodeType,d=ne.title,u=ne.desc,p=ne.flowNodeMap,f=ne.updateSource,w=ne.showApprovalBtn,D=w===void 0?!1:w;return e.createElement(e.Fragment,null,e.createElement(b.Z,{className:"mTop15 flexRow",text:e.createElement("span",null,d,e.createElement(Rn.Z,{popupPlacement:"bottom",text:e.createElement("span",null,u)},e.createElement(Q.Z,{className:"Font16 Gray_9e mLeft5",style:{verticalAlign:"text-bottom"},icon:"info"}))),checked:!!p.accounts.length,onClick:function(H){return f({accounts:H?[]:[{type:6,entityId:l+"#custom",roleId:o===a.QZ.APPROVAL?"approveid":"editid",roleTypeId:0,controlType:10000001,flowNodeType:o,appType:101}]})}}),!!p.accounts.length&&e.createElement("div",{className:"Gray_9e mTop5",style:{marginLeft:26}},_l("\u8BBE\u7F6E\u4E3A\u6458\u8981\u7684\u5B57\u6BB5\u53EF\u4EE5\u90AE\u4EF6\u4E2D\u663E\u793A")),!!p.accounts.length&&e.createElement("div",{className:"mLeft25 mTop10"},D&&e.createElement(e.Fragment,null,e.createElement(b.Z,{className:"flexRow",text:_l("\u90AE\u4EF6\u5185\u5FEB\u901F\u5BA1\u6279"),checked:p.batch,onClick:function(H){return f({batch:!H})}}),e.createElement("div",{className:"Gray_9e mTop5",style:{marginLeft:26}},_l("\u663E\u793A\u901A\u8FC7\u3001\u5426\u51B3\u3001\u9000\u56DE\u6309\u94AE\uFF08\u6839\u636E\u64CD\u4F5C\u914D\u7F6E\uFF09\u3002\u5728\u90AE\u4EF6\u5185\u5FEB\u901F\u5BA1\u6279\u65F6\u4E0D\u80FD\u586B\u5199\u7B7E\u540D\u3001\u610F\u89C1\u548C\u5B57\u6BB5\uFF0C\u9000\u56DE\u65F6\u5C06\u76F4\u63A5\u9000\u56DE\u5230\u7B2C\u4E00\u4E2A\u5141\u8BB8\u9000\u56DE\u7684\u8282\u70B9"))),e.createElement("div",{className:"mTop10"},_l("\u8BBE\u7F6E\u9644\u4EF6(\u603B\u5927\u5C0F\u4E0D\u8D85\u8FC750M)")),e.createElement("div",{className:"mTop10"},e.createElement(Gt.Z,{companyId:F,processId:B,relationId:n,selectNodeId:l,controls:p.controls,formulaMap:p.formulaMap,fields:p.fields,updateSource:function(H){return f(H)},item:p.fields.filter(function(G){return G.fieldId==="attachments"})[0],i:v().findIndex(p.fields,function(G){return G.fieldId==="attachments"})}))))};var Mt=t(90890),ze=t(37417),yt=t(82370),Ut=(0,W.Z)([`
  border: 1px solid #2196f3;
  padding: 0 16px;
  height: 28px;
  line-height: 28px;
  display: inline-flex;
  border-radius: 28px;
  cursor: pointer;
  align-items: center;
`],[`
  border: 1px solid #2196f3;
  padding: 0 16px;
  height: 28px;
  line-height: 28px;
  display: inline-flex;
  border-radius: 28px;
  cursor: pointer;
  align-items: center;
`]),Wt=(0,W.Z)([`
  background: #f4f4f4;
  padding: 10px 12px;
  margin-top: 10px;
  border-radius: 4px;
  position: relative;
  .icon {
    position: absolute;
    top: 10px;
    right: 10px;
  }
`],[`
  background: #f4f4f4;
  padding: 10px 12px;
  margin-top: 10px;
  border-radius: 4px;
  position: relative;
  .icon {
    position: absolute;
    top: 10px;
    right: 10px;
  }
`]),kn=(0,W.Z)([`
  padding: 16px;
  border-radius: 3px 3px 3px 3px;
  border: 1px solid #eaeaea;
`],[`
  padding: 16px;
  border-radius: 3px 3px 3px 3px;
  border: 1px solid #eaeaea;
`]),on=(0,W.Z)([`
  height: 36px;
  .actionControlBox {
    min-width: 60px !important;
  }
`],[`
  height: 36px;
  .actionControlBox {
    min-width: 60px !important;
  }
`]),En=P.ZP.span(Ut),fn=P.ZP.div(Wt),jn=P.ZP.div(kn),Ta=P.ZP.div(on);const zn=function(ne){var F=ne.schedule,B=ne.companyId,n=ne.processId,l=ne.selectNodeId,o=ne.selectNodeName,d=ne.selectNodeType,u=ne.relationType,p=ne.relationId,f=ne.updateSource,w=(0,e.useState)(F),D=(0,U.Z)(w,2),G=D[0],H=D[1],De=(0,e.useState)(!1),je=(0,U.Z)(De,2),lt=je[0],Ft=je[1],un=(0,e.useState)({}),dn=(0,U.Z)(un,2),Hn=dn[0],ca=dn[1],da=[{text:_l("\u81EA\u5B9A\u4E49"),value:1},{text:_l("\u6307\u5B9A\u7684\u65E5\u671F\u65F6\u95F4"),value:2}],Me=[{text:a.rO[a.uK.MINUTE],value:a.uK.MINUTE},{text:a.rO[a.uK.HOUR],value:a.uK.HOUR},{text:a.rO[a.uK.DAY],value:a.uK.DAY}],nt=[{text:_l("\u5206\u949F"),value:a.DC.MINUTE},{text:_l("\u5C0F\u65F6"),value:a.DC.HOUR},{text:_l("\u5929"),value:a.DC.DAY}],He=function(){return{accounts:[{appType:101,avatar:"",controlType:10000001,count:0,entityId:l+"#custom",entityName:o,flowNodeType:d,roleId:d===a.QZ.WRITE?"editid":"approveidNull",roleName:d===a.QZ.WRITE?_l("\u6240\u6709\u586B\u5199\u4EBA"):_l("\u672A\u5BA1\u7684\u5BA1\u6279\u4EBA"),roleTypeId:0,type:6}],executeTime:{fieldValue:"2"},executeTimeType:a.rW.BEFORE,id:(0,Vt.Z)(),message:_l("\u8BF7\u60A8\u5C3D\u5FEB\u5904\u7406\uFF01"),type:1,unit:2,repeat:{repeatType:0}}},ie=[{text:_l("\u4E4B\u524D"),value:a.rW.BEFORE},{text:_l("\u5F53\u65F6"),value:a.rW.CURRENT},{text:_l("\u4E4B\u540E"),value:a.rW.AFTER}],We=[{text:d===a.QZ.WRITE?_l("\u81EA\u52A8\u63D0\u4EA4"):_l("\u81EA\u52A8\u901A\u8FC7"),value:2},{text:_l("\u81EA\u52A8\u5426\u51B3"),value:3},{text:_l("\u6D41\u7A0B\u4E2D\u6B62"),value:4},{text:_l("\u4EC0\u4E48\u4E5F\u4E0D\u505A"),value:0}],Ue=function(Xe,pt){var at=[].concat(G.actions);at.forEach(function(ct){ct.id===Xe&&T()(pt).forEach(function(Nt){ct[Nt]=pt[Nt]})}),H(C()({},G,{actions:at}))},Ke=function(Xe,pt){return e.createElement("div",{className:"mTop10 flexRow alignItemsCenter"},e.createElement("div",null,_l("\u5728\u622A\u6B62\u65F6\u523B")),e.createElement(Ie.Z,{className:R()("mLeft10",{flex:Xe.executeTimeType===a.rW.CURRENT&&!pt}),style:{width:Xe.executeTimeType===a.rW.CURRENT&&!pt?"auto":110},data:ie.filter(function(at){return at.value!==a.rW.BEFORE||!pt}),value:Xe.executeTimeType,border:!0,onChange:function(ct){Ue(Xe.id,{executeTimeType:ct,executeTime:{fieldValue:ct===a.rW.CURRENT?"":"2"},unit:ct===a.rW.CURRENT?void 0:2,repeat:{repeatType:0}})}}),Xe.executeTimeType!==a.rW.CURRENT&&e.createElement(e.Fragment,null,e.createElement("div",{className:"flex mLeft10"},e.createElement(Mt.Z,{projectId:B,processId:n,relationId:p,selectNodeId:l,type:"number",min:1,allowedEmpty:!0,data:Xe.executeTime,updateSource:function(ct){return Ue(Xe.id,{executeTime:ct})}})),e.createElement(Ie.Z,{className:"mLeft10",style:{width:110},data:Me,value:Xe.unit,border:!0,onChange:function(ct){Ue(Xe.id,{unit:ct,repeat:C()({},Xe.repeat,Et(ct))})}})),pt&&e.createElement("div",{className:"mLeft10"},Xe.type===3?_l("\u81EA\u52A8\u5426\u51B3"):Xe.type===4?_l("\u6D41\u7A0B\u4E2D\u6B62"):d===a.QZ.WRITE?_l("\u81EA\u52A8\u63D0\u4EA4"):_l("\u81EA\u52A8\u901A\u8FC7")))},ut=function(){return(F.executeTime.fieldValue||(F.executeTime.fieldNodeName||"")+"-"+(F.executeTime.fieldControlName||""))+(F.type===1?a.rO[F.unit]:"")+(F.dayTime?_l("\u7684%0",F.dayTime):"")},wt=function(Xe,pt){return e.createElement("div",{className:pt===0?"mTop8":"mTop3",key:Xe.id},e.createElement("span",{className:"Gray_9e"},_l("\u5728\u622A\u6B62\u65F6\u523B")),e.createElement("span",{className:"mLeft3"},ie.find(function(at){return at.value===Xe.executeTimeType}).text),Xe.unit&&Xe.unit!==a.rW.CURRENT&&e.createElement("span",{className:"Gray_9e mLeft3"},Xe.executeTime.fieldValue+a.rO[Xe.unit]),Xe.type===1?e.createElement(e.Fragment,null,e.createElement("span",{className:"mLeft3 mRight2"},_l("\u63D0\u9192")),e.createElement("span",{className:"Gray_9e"},e.createElement(ze.Z,{accounts:Xe.accounts}),v().get(Xe,"repeat.repeatType")===6&&_l("\uFF1B\u6BCF%0%1\u91CD\u590D\u63D0\u9192",Xe.repeat.interval,nt.find(function(at){return at.value===Xe.repeat.frequency}).text))):e.createElement("span",{className:"mLeft3 Gray_9e"},Xe.type===3?_l("\u81EA\u52A8\u5426\u51B3"):Xe.type===4?_l("\u6D41\u7A0B\u4E2D\u6B62"):d===a.QZ.WRITE?_l("\u81EA\u52A8\u63D0\u4EA4"):_l("\u81EA\u52A8\u901A\u8FC7")))},Et=function(Xe){return{frequency:Xe===a.uK.MINUTE?a.DC.MINUTE:Xe===a.uK.HOUR?a.DC.HOUR:a.DC.DAY,interval:Xe===a.uK.MINUTE?30:1}};return(0,e.useEffect)(function(){H(F)},[F]),(0,e.useEffect)(function(){F.type||(H(C()({},G,{type:1,unit:3,executeTime:{fieldValue:"1"},actions:[He()]})),Ft(!0))},[F.enable]),F.enable?e.createElement(e.Fragment,null,F.type&&e.createElement(fn,null,e.createElement(Q.Z,{icon:"edit",className:"Gray_9e ThemeHoverColor3 pointer",onClick:function(){return Ft(!0)}}),e.createElement("div",{className:"bold"},_l("\u622A\u6B62\uFF1A\u5230\u8FBE\u6B64\u8282\u70B9\u540E\u7684%0",ut())),F.actions.filter(function(et){return et.type===1}).map(wt),F.actions.filter(function(et){return v().includes([2,3,4],et.type)}).map(wt)),lt&&e.createElement(te.Z,{className:"workflowDialogBox",visible:!0,width:800,title:_l("\u9650\u65F6\u5904\u7406"),onCancel:function(){F.type?H(F):f({schedule:C()({},F,{enable:!1})}),Ft(!1)},onOk:function(){var Xe=[];G.actions.filter(function(pt){return pt.type===1}).forEach(function(pt,at){pt.accounts.length||Xe.push(at+1)}),Xe.length?alert(_l("\u7B2C%0\u6761\u622A\u6B62\u63D0\u9192\u89C4\u5219\u7684\u63D0\u9192\u4EBA\u4E3A\u7A7A\uFF01",Xe.join("\u3001")),2):(f({schedule:C()({},G,{enable:!0})}),Ft(!1))}},e.createElement("div",{className:"bold mTop10"},_l("\u622A\u6B62\u65F6\u523B")),e.createElement("div",{className:"mTop10"},e.createElement(Ie.Z,{style:{width:240},data:da,value:G.type,border:!0,onChange:function(Xe){H(C()({},G,{type:Xe,executeTime:{fieldValue:Xe===1?"1":""},unit:Xe===1?3:void 0}))}})),e.createElement(yt.Z,{projectId:B,processId:n,relationId:p,selectNodeId:l,data:G,text:_l("\u5230\u8FBE\u6B64\u8282\u70B9\u540E\u7684"),onChange:H}),e.createElement("div",{className:"mTop25 bold"},_l("\u622A\u6B62\u63D0\u9192")),G.actions.filter(function(et){return et.type===1}).map(function(et,Xe){return e.createElement(jn,{className:"mTop10",key:et.id},e.createElement("div",{className:"flexRow"},e.createElement("div",{className:"flex bold Gray_75"},_l("\u63D0\u9192%0",Xe+1)),e.createElement(Q.Z,{type:"delete2",className:"Font16 Gray_9e ThemeHoverColor3 mLeft10 pointer",onClick:function(){var at=[].concat(G.actions);v().remove(at,function(ct){return ct.id===et.id}),H(C()({},G,{actions:at}))}})),Ke(et),et.executeTimeType===a.rW.BEFORE&&e.createElement(Ta,{className:"mTop10 flexRow alignItemsCenter"},e.createElement(b.Z,{className:"InlineBlock",text:_l("\u91CD\u590D\u63D0\u9192"),checked:v().get(et,"repeat.repeatType")===6,onClick:function(at){var ct=(0,h.default)({repeatType:at?0:6},Et(et.unit));Ue(et.id,{repeat:ct})}}),v().get(et,"repeat.repeatType")===6&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mLeft25 mRight10"},_l("\u6BCF")),e.createElement("div",{className:"flexRow",style:{width:80}},e.createElement(Mt.Z,{hasOtherField:!1,type:"number",min:1,data:{fieldValue:et.repeat.interval},updateSource:function(at){var ct=at.fieldValue;return Ue(et.id,{repeat:C()({},et.repeat,{interval:ct})})}})),e.createElement(Ie.Z,{className:"mLeft10",style:{width:80},data:nt.filter(function(pt){return et.unit===a.uK.MINUTE&&pt.value===a.DC.MINUTE||et.unit===a.uK.HOUR&&v().includes([a.DC.MINUTE,a.DC.HOUR],pt.value)||et.unit===a.uK.DAY}),value:et.repeat.frequency,border:!0,onChange:function(at){return Ue(et.id,{repeat:C()({},et.repeat,{interval:v().includes([1,7],at)?1:30,frequency:at})})}}),e.createElement("div",{className:"mLeft25"},_l("\u6700\u591A\u91CD\u590D10\u6B21")))),e.createElement("div",{className:"mTop10 flexRow alignItemsCenter"},e.createElement("div",null,_l("\u63D0\u9192\u5185\u5BB9")),e.createElement("input",{type:"text",className:"mLeft10 flex ThemeBorderColor3 actionControlBox pLeft10 pRight10",value:et.message,onChange:function(at){return Ue(et.id,{message:at.target.value})},onBlur:function(at){at.target.value.trim()||(at.target.value=_l("\u8BF7\u60A8\u5C3D\u5FEB\u5904\u7406\uFF01")),Ue(et.id,{message:at.target.value.trim()})}})),e.createElement("div",{className:"flexRow"},e.createElement("div",{className:"pTop16"},_l("\u63D0\u9192\u4EBA")),e.createElement("div",{className:"flex mLeft10"},e.createElement($n.Z,{companyId:B,appId:u===2?p:"",accounts:et.accounts,updateSource:function(at){return Ue(et.id,at)}}),e.createElement("div",{className:"flexRow ThemeColor3 workflowDetailAddBtn mTop15",onClick:function(){return ca(C()({},Hn,(0,E.default)({},et.id,!0)))}},e.createElement("i",{className:"Font28 icon-task-add-member-circle mRight10"}),_l("\u6DFB\u52A0\u63D0\u9192\u4EBA"),e.createElement(gn.Z,{appId:u===2?p:"",visible:Hn[et.id],companyId:B,processId:n,nodeId:l,unique:!1,schedule:!0,accounts:et.accounts,updateSource:function(at){return Ue(et.id,at)},onClose:function(){return ca(C()({},Hn,(0,E.default)({},et.id,!1)))}})))))}),e.createElement("div",{className:"mTop15"},e.createElement(En,{className:"ThemeColor3 ThemeHoverColor2 ThemeBorderColor3 ThemeHoverBorderColor2",onClick:function(){return H(C()({},G,{actions:G.actions.concat([He()])}))}},"+ ",_l("\u63D0\u9192"))),e.createElement("div",{className:"mTop25 bold"},_l("\u8D85\u671F\u540E")),e.createElement("div",{className:"flexRow mTop10"},We.filter(function(et){return d!==a.QZ.WRITE||et.value!==3}).map(function(et,Xe){return e.createElement(le.Z,{key:Xe,text:et.text,checked:(G.actions.find(function(pt){return v().includes([2,3,4],pt.type)})||{type:0}).type===et.value,onClick:function(){H(C()({},G,{actions:et.value?G.actions.filter(function(at){return at.type===1}).concat([{executeTime:{},executeTimeType:a.rW.CURRENT,id:(0,Vt.Z)(),type:et.value}]):G.actions.filter(function(at){return at.type===1})}))}})})),G.actions.filter(function(et){return v().includes([2,3,4],et.type)}).map(function(et){return Ke(et,!0)}))):null};var pa=t(66215),Ea,la,Kn=(0,W.Z)([`
  > li {
    align-items: center;
    height: 40px;
    border-bottom: 1px solid #e0e0e0;
    > div.flex {
      min-width: 0;
    }
    > div:not(.flex) {
      width: 84px;
    }
    .tip-bottom-left {
      &:after {
        width: 200px;
        white-space: normal;
      }
    }
  }
`],[`
  > li {
    align-items: center;
    height: 40px;
    border-bottom: 1px solid #e0e0e0;
    > div.flex {
      min-width: 0;
    }
    > div:not(.flex) {
      width: 84px;
    }
    .tip-bottom-left {
      &:after {
        width: 200px;
        white-space: normal;
      }
    }
  }
`]),sa=(0,W.Z)([`
  width: 1px;
  margin: 0 30px;
  &::before {
    content: '';
    background: #f5f5f5;
    position: absolute;
    height: 100%;
    width: 1px;
  }
`],[`
  width: 1px;
  margin: 0 30px;
  &::before {
    content: '';
    background: #f5f5f5;
    position: absolute;
    height: 100%;
    width: 1px;
  }
`]),ba=[20,22,25,30,31,32,33,34,37,38,45,47,51],Fa=P.ZP.ul(Kn),wa=P.ZP.div(sa),Na=(la=Ea=function(ne){(0,k.default)(F,ne);function F(){var B,n,l,o;(0,j.default)(this,F);for(var d=arguments.length,u=Array(d),p=0;p<d;p++)u[p]=arguments[p];return o=(n=(l=(0,I.default)(this,(B=F.__proto__||Ne()(F)).call.apply(B,[this].concat(u))),l),l.state={showTableControls:!1,selectItem:{},foldIds:[]},n),(0,I.default)(l,o)}return(0,L.default)(F,[{key:"isDisabled",value:function(n,l){var o=this.props,d=o.readonlyControlTypes,u=o.selectNodeType;return!!(v().includes(ba.concat(d),n.type)||n.type>1e4||n.type===29&&v().includes(["2","5","6"],n.showType)&&(l==="REQUIRED"||u===a.QZ.LINK)||v().includes([43,49],n.type)&&l==="REQUIRED")}},{key:"updateAllSettings",value:function(n){var l=this,o=n.key,d=n.checked,u=this.props,p=u.data,f=u.updateSource,w=this.state,D=w.showTableControls,G=w.selectItem,H=v().cloneDeep(D?G.subFormProperties:p);o==="LOOK"&&H.forEach(function(De){d?De.property===4&&(De.property=1):De.property=4}),o==="EDIT"&&H.forEach(function(De){l.isDisabled(De)||(d?v().includes([1,4],De.property)&&(De.property=2):De.property=1)}),o==="REQUIRED"&&H.forEach(function(De){l.isDisabled(De,"REQUIRED")||(d?v().includes([1,2,4],De.property)&&(De.property=3):De.property=2)}),D?this.setState({selectItem:C()({},G,{subFormProperties:H})}):f({formProperties:H})}},{key:"onChange",value:function(n,l){var o=this,d=this.props,u=d.data,p=d.updateSource,f=this.state,w=f.showTableControls,D=f.selectItem,G=v().cloneDeep(w?D.subFormProperties:u);G.forEach(function(H){H.id===n.id&&(H.property=l)}),n.type===52&&G.forEach(function(H){H.sectionId===n.id&&!o.isDisabled(H)&&(H.property=l)}),w?this.setState({selectItem:C()({},D,{subFormProperties:G})}):p({formProperties:G})}},{key:"onChangeCard",value:function(n,l){var o=this.props,d=o.data,u=o.updateSource,p=v().cloneDeep(d);if(p.filter(function(f){return!!f.showCard}).length>=8&&l){alert(_l("\u6700\u591A\u53EF\u8BBE\u7F6E8\u4E2A\u5B57\u6BB5"),2);return}p.forEach(function(f){f.id===n&&(f.showCard=l)}),u({formProperties:p})}},{key:"renderContent",value:function(n){var l=this,o=n.data,d=n.showCard,u=d===void 0?!1:d,p=n.isChildTable,f=p===void 0?!1:p,w=this.props.hideTypes;return e.createElement(Fa,{className:"mTop15"},e.createElement("li",{className:"flexRow"},e.createElement("div",{className:"flex bold"},_l("\u540D\u79F0")),e.createElement("div",{className:"mLeft16"},!v().includes(w,1)&&e.createElement(b.Z,{className:"InlineBlock Font12 TxtMiddle",text:_l("\u67E5\u770B"),clearselected:o.filter(function(D){return D.property===4}).length!==o.length&&o.filter(function(D){return D.property===4}).length,checked:!o.filter(function(D){return D.property===4}).length,onClick:function(G){return l.updateAllSettings({key:"LOOK",checked:!G})}})),e.createElement("div",{className:"mLeft16"},!v().includes(w,2)&&e.createElement(b.Z,{className:"InlineBlock Font12 TxtMiddle",text:_l("\u7F16\u8F91"),clearselected:o.filter(function(D){return D.property===2||D.property===3}).length&&o.filter(function(D){return D.property===2||D.property===3}).length!==o.filter(function(D){return!l.isDisabled(D)}).length,checked:o.filter(function(D){return D.property===2||D.property===3}).length===o.filter(function(D){return!l.isDisabled(D)}).length,onClick:function(G){return l.updateAllSettings({key:"EDIT",checked:!G})}})),e.createElement("div",{className:"mLeft16"},!v().includes(w,3)&&e.createElement(b.Z,{className:"InlineBlock Font12 TxtMiddle",text:_l("\u5FC5\u586B"),clearselected:o.filter(function(D){return D.property===3}).length&&o.filter(function(D){return D.property===3}).length!==o.filter(function(D){return!l.isDisabled(D,"REQUIRED")}).length,checked:o.filter(function(D){return D.property===3}).length===o.filter(function(D){return!l.isDisabled(D,"REQUIRED")}).length,onClick:function(G){return l.updateAllSettings({key:"REQUIRED",checked:!G})}})),u&&e.createElement("div",{className:"mLeft16 mRight16 cursorDefault",style:{width:60}},e.createElement("span",{className:"tip-bottom-left","data-tip":_l("\u6307\u5B9A\u6458\u8981\u5B57\u6BB5\uFF0C\u663E\u793A\u5728\u6211\u7684\u6D41\u7A0B\u5217\u8868\u4E2D\uFF0C\u65B9\u4FBF\u5FEB\u901F\u4E86\u89E3\u5F85\u5904\u7406\u4E8B\u9879\u7684\u5185\u5BB9\u3002")},_l("\u6458\u8981")))),this.renderField(o,u,f))}},{key:"renderField",value:function(n,l,o,d){var u=this,p=this.props.hideTypes,f=this.state.foldIds;return n.filter(function(w){return!w.sectionId||!!d}).map(function(w,D){return e.createElement(e.Fragment,null,e.createElement("li",{className:R()("flexRow",{mLeft30:d}),key:D},e.createElement("div",{className:R()("flex flexRow alignItemsCenter",{"ThemeHoverColor3 pointer":w.type===52}),onClick:function(){w.type===52&&u.setState({foldIds:v().includes(f,w.id)?f.filter(function(H){return H!==w.id}):f.concat(w.id)})}},w.type===52&&e.createElement("i",{className:R()("mRight5 Gray_75",v().includes(f,w.id)?"icon-arrow-right-tip":"icon-arrow-down")}),e.createElement("div",{className:"ellipsis",title:w.name||(w.type===22?_l("\u5206\u6BB5"):_l("\u5907\u6CE8"))},w.name||(w.type===22?_l("\u5206\u6BB5"):_l("\u5907\u6CE8"))),w.type===29&&!!(w.subFormProperties||[]).length&&e.createElement("div",{"data-tip":_l("\u8BBE\u7F6E\u5B50\u8868\u64CD\u4F5C\u548C\u5217\u6743\u9650"),className:"mLeft5 Gray_9e ThemeHoverColor3 pointer tip-bottom-right",style:{display:"inline-flex"},onClick:function(){return u.setState({showTableControls:!0,selectItem:w})}},e.createElement(Q.Z,{type:"settings",className:"Font16"}))),e.createElement("div",{className:"mLeft16"},!v().includes(p,w.property)&&e.createElement(b.Z,{checked:w.property!==4,onClick:function(H){return u.onChange(w,H?4:1)}})),e.createElement("div",{className:"mLeft16"},!u.isDisabled(w)&&(!o||!w.detailTable)&&!v().includes(p,2)&&e.createElement(b.Z,{checked:w.property===2||w.property===3,onClick:function(H){return u.onChange(w,H?1:2)}})),e.createElement("div",{className:"mLeft16"},!u.isDisabled(w,"REQUIRED")&&(!o||!w.detailTable)&&!v().includes(p,3)&&e.createElement(b.Z,{checked:w.property===3,onClick:function(H){return u.onChange(w,H?2:3)}})),l&&e.createElement("div",{className:"mLeft16 mRight16",style:{width:60}},!v().includes([14,21,22,40,41,42,43,45,47,49,51,52],w.type)&&e.createElement(b.Z,{checked:w.showCard,onClick:function(H){return u.onChangeCard(w.id,H?0:1)}}))),w.type===52&&!v().includes(f,w.id)&&!!n.filter(function(G){return G.sectionId===w.id}).length&&u.renderField(n.filter(function(G){return G.sectionId===w.id}),l,o,!0))})}},{key:"render",value:function(){var n=this,l=this.props,o=l.data,d=l.addNotAllowView,u=l.showCard,p=l.updateSource,f=l.hideTypes,w=this.state,D=w.showTableControls,G=w.selectItem;return e.createElement(e.Fragment,null,e.createElement("div",{className:"flexRow"},e.createElement("div",{className:"flex"}),e.createElement(rn.default,{title:_l("\u52FE\u9009\u65F6\uFF0C\u5F53\u5DE5\u4F5C\u8868\u4E2D\u65B0\u589E\u5B57\u6BB5\u65F6\uFF0C\u65B0\u5B57\u6BB5\u5C06\u81EA\u52A8\u8BBE\u4E3A\u5141\u8BB8\u67E5\u770B")},e.createElement("div",null,e.createElement(b.Z,{className:"InlineBlock Font12 TxtMiddle",text:_l("\u65B0\u589E\u5B57\u6BB5\u9ED8\u8BA4\u53EF\u67E5\u770B"),checked:!d,onClick:function(De){return p({addNotAllowView:De})}})))),this.renderContent({data:o,showCard:u}),D&&e.createElement(te.Z,{visible:!0,width:680,title:_l("\u5B50\u8868\u64CD\u4F5C\u548C\u5217\u6743\u9650"),onCancel:function(){return n.setState({showTableControls:!1})},onOk:function(){p({formProperties:o.map(function(De){return De.id===G.id&&(De=C()({},De,G)),De})}),n.setState({showTableControls:!1})}},e.createElement("div",{className:"Gray_9e"},_l("\u672A\u5F00\u542F\u65F6\u6309\u7167\u5B50\u8868\u672C\u8EAB\u6743\u9650\uFF0C\u5F00\u542F\u540E\u53EF\u914D\u7F6E\u5B50\u8868\u7684\u7EC6\u5206\u64CD\u4F5C\u548C\u5217\u6743\u9650")),e.createElement(pa.Z,{className:"mTop10",checked:G.workflow,text:G.workflow?_l("\u5F00\u542F"):_l("\u5173\u95ED%03087"),onClick:function(){return n.setState({selectItem:C()({},G,{workflow:!G.workflow})})}}),G.workflow&&e.createElement("div",{className:"flexRow relative mTop20"},!v().includes(f,2)&&e.createElement(e.Fragment,null,e.createElement("div",null,e.createElement("div",{className:"bold"},_l("\u64CD\u4F5C")),[{text:_l("\u53EF\u65B0\u589E\u660E\u7EC6"),key:"allowAdd"},{text:_l("\u53EF\u7F16\u8F91\u5DF2\u6709\u660E\u7EC6"),key:"allowEdit"},{text:_l("\u53EF\u5220\u9664\u5DF2\u6709\u660E\u7EC6"),key:"allowCancel"}].map(function(H){return e.createElement(b.Z,{key:H.key,className:"mTop15",text:H.text,checked:G[H.key]==="1",onClick:function(je){return n.setState({selectItem:C()({},G,(0,E.default)({},H.key,je?"0":"1"))})}})})),e.createElement(wa,null)),e.createElement("div",{className:"flex"},e.createElement("div",{className:"bold"},_l("\u5217\u6743\u9650")),this.renderContent({data:G.subFormProperties,isChildTable:!0})))))}}]),F}(e.Component),Ea.defaultProps={processId:"",nodeId:"",selectNodeId:"",data:[],hideTypes:[],readonlyControlTypes:[],updateSource:function(){},showCard:!1},la),Za=t(53943),ya=(0,W.Z)([`
  display: inline-flex;
  padding: 0 12px 12px 12px;
  margin-right: 36px;
  font-weight: bold;
  font-size: 15px;
  cursor: pointer;
  position: relative;
  &.active {
    &::before {
      position: absolute;
      bottom: -2px;
      left: 0;
      right: 0;
      content: '';
      height: 0;
      border-bottom: 3px solid #2196f3;
    }
  }
`],[`
  display: inline-flex;
  padding: 0 12px 12px 12px;
  margin-right: 36px;
  font-weight: bold;
  font-size: 15px;
  cursor: pointer;
  position: relative;
  &.active {
    &::before {
      position: absolute;
      bottom: -2px;
      left: 0;
      right: 0;
      content: '';
      height: 0;
      border-bottom: 3px solid #2196f3;
    }
  }
`]),An=P.ZP.div(ya),ma=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.onChange=function(l){n.getNodeDetail(n.props,l)},n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.updateFlowMapSource=function(l,o){var d=n.state.data;n.updateSource({flowNodeMap:C()({},d.flowNodeMap,(0,E.default)({},l,C()({},d.flowNodeMap[l],o)))})},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.selectNodeId,p=o.name,f=o.accounts,w=o.formProperties,D=o.submitBtnName,G=o.schedule,H=o.operationTypeList,De=o.encrypt,je=o.operationUserRange,lt=o.flowNodeMap,Ft=o.userTaskNullMap,un=o.addNotAllowView;if(!u){alert(_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u5BF9\u8C61"),2);return}if(Ft[5]&&!Ft[5].length){alert(_l("\u5FC5\u987B\u6307\u5B9A\u4EE3\u7406\u4EBA"),2);return}d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,name:p.trim(),selectNodeId:u,accounts:f,formProperties:w,submitBtnName:D.trim()||_l("\u63D0\u4EA4"),schedule:G,operationTypeList:H,encrypt:De,operationUserRange:je,flowNodeMap:(0,N.zA)(lt),userTaskNullMap:Ft,addNotAllowView:un}).then(function(dn){n.props.updateNodeData(dn),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.state={data:{},saveRequest:!1,showSelectUserDialog:!1,tabIndex:1},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n,l){var o=this,d=n.processId,u=n.selectNodeId,p=n.selectNodeType,f=n.isApproval,w=n.instanceId,D=this.state.data;z.Z.getNodeDetail({processId:d,nodeId:u,flowNodeType:p,selectNodeId:l,instanceId:w}).then(function(G){if(l){var H;G=C()({},D,{selectNodeId:G.selectNodeId,appList:G.appList,selectNodeObj:G.selectNodeObj,flowNodeMap:C()({},D.flowNodeMap,(H={},(0,E.default)(H,a.fh.BEFORE,G.flowNodeMap[a.fh.BEFORE]),(0,E.default)(H,a.fh.PASS,G.flowNodeMap[a.fh.PASS]),H)),formProperties:G.formProperties})}o.setState({data:G}),f&&!G.selectNodeId&&o.onChange(G.flowNodeList[0].nodeId)})}},{key:"renderTabs",value:function(){var n=this,l=this.state.tabIndex,o=[{text:_l("\u586B\u5199\u8BBE\u7F6E"),value:1},{text:_l("\u5B57\u6BB5\u8BBE\u7F6E"),value:2},{text:_l("\u6570\u636E\u66F4\u65B0"),value:3}];return e.createElement("div",{className:"mTop25",style:{borderBottom:"1px solid #ddd"}},o.map(function(d){return e.createElement(An,{key:d.value,className:R()("pointerEventsAuto",{active:d.value===l}),onClick:function(){return n.setState({tabIndex:d.value})}},d.text)}))}},{key:"switchWriteSettings",value:function(n,l){var o=this.state.data,d=v().cloneDeep(o.operationTypeList);n?d.push(l):v().remove(d,function(u){return u===l}),this.updateSource({operationTypeList:d})}},{key:"render",value:function(){var n=this,l=this.state,o=l.data,d=l.showSelectUserDialog,u=l.tabIndex,p=[{title:_l("\u8282\u70B9\u5F00\u59CB\u65F6\u66F4\u65B0"),desc:_l("\u6D41\u7A0B\u8FDB\u5165\u6B64\u8282\u70B9\u4E14\u586B\u5199\u5F00\u59CB\u524D\uFF0C\u66F4\u65B0\u6570\u636E\u5BF9\u8C61\u7684\u5B57\u6BB5\u503C\uFF08\u9000\u56DE\u81F3\u6B64\u8282\u70B9\u4E5F\u4F1A\u89E6\u53D1\u66F4\u65B0\uFF09"),key:a.fh.BEFORE},{title:_l("\u586B\u5199\u540E\u66F4\u65B0"),desc:_l("\u8282\u70B9\u901A\u8FC7\u540E\uFF0C\u66F4\u65B0\u6570\u636E\u5BF9\u8C61\u7684\u5B57\u6BB5\u503C"),key:a.fh.PASS}];return v().isEmpty(o)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},o),icon:"icon-workflow_write",bg:"BGSkyBlue",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},e.createElement("div",{className:"Font13 bold"},_l("\u6570\u636E\u5BF9\u8C61")),e.createElement(fe.Z,{disabled:this.props.isApproval,appList:o.appList,selectNodeId:o.selectNodeId,selectNodeObj:o.selectNodeObj,onChange:this.onChange}),e.createElement("div",{className:"Font13 mTop25 bold"},_l("\u6307\u5B9A\u4EBA")),e.createElement($n.Z,{companyId:this.props.companyId,appId:this.props.relationType===2?this.props.relationId:"",accounts:o.accounts,updateSource:this.updateSource}),e.createElement("div",{className:"mTop12 flexRow ThemeColor3 workflowDetailAddBtn",onClick:function(){return n.setState({showSelectUserDialog:!0})}},e.createElement("i",{className:"Font28 icon-task-add-member-circle mRight10"}),_l("\u6307\u5B9A\u586B\u5199\u4EBA"),e.createElement(gn.Z,{appId:this.props.relationType===2?this.props.relationId:"",visible:d,companyId:this.props.companyId,processId:this.props.processId,nodeId:this.props.selectNodeId,accounts:o.accounts,updateSource:this.updateSource,onClose:function(){return n.setState({showSelectUserDialog:!1})}})),this.renderTabs(),u===1&&e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 mTop25 bold"},_l("\u586B\u5199\u4EBA\u64CD\u4F5C")),e.createElement(b.Z,{className:"mTop15 flexRow",text:_l("\u6682\u5B58"),checked:v().includes(o.operationTypeList,13),onClick:function(w){return n.switchWriteSettings(!w,13)}}),e.createElement(b.Z,{className:"mTop15 flexRow",text:_l("\u8F6C\u4EA4\u4ED6\u4EBA\u586B\u5199"),checked:v().includes(o.operationTypeList,10),onClick:function(w){return n.switchWriteSettings(!w,10)}}),v().includes(o.operationTypeList,10)&&e.createElement(en,(0,h.default)({},this.props,{operationUserRange:o.operationUserRange,operationType:"10",title:_l("\u53EF\u8F6C\u4EA4\u7ED9\uFF1A"),btnText:_l("\u6DFB\u52A0\u5019\u9009\u4EBA"),updateSource:function(w){var D=w.accounts;return n.updateSource({operationUserRange:(0,E.default)({},10,D)})}})),e.createElement(_t.Z,{projectId:this.props.companyId,appId:this.props.relationType===2?this.props.relationId:"",isApproval:this.props.isApproval,title:_l("\u586B\u5199\u4EBA\u4E3A\u7A7A\u65F6"),titleInfo:_l("\u8BBE\u7F6E\u5F53\u524D\u8282\u70B9\u8D1F\u8D23\u4EBA\u4E3A\u7A7A\u65F6\u7684\u5904\u7406\u65B9\u5F0F\u3002\u5F53\u4F7F\u7528\u9ED8\u8BA4\u8BBE\u7F6E\u65F6\uFF0C\u6309\u7167\u6D41\u7A0B\u53D1\u8D77\u8282\u70B9\u4E2D\u8BBE\u7F6E\u7684\u7EDF\u4E00\u7684\u5904\u7406\u65B9\u5F0F"),showDefaultItem:!0,userTaskNullMap:o.userTaskNullMap,updateSource:function(w){return n.updateSource({userTaskNullMap:w})}}),e.createElement("div",{className:"Font13 mTop25 bold"},_l("\u5B89\u5168")),e.createElement(b.Z,{className:"mTop15 flexRow alignItemsCenter",text:e.createElement("span",null,_l("\u767B\u5F55\u5BC6\u7801\u9A8C\u8BC1"),e.createElement(Rn.Z,{popupPlacement:"bottom",text:e.createElement("span",null,_l("\u542F\u7528\u540E\uFF0C\u7528\u6237\u8F93\u5165\u767B\u5F55\u5BC6\u7801\u540E\u624D\u53EF\u8FDB\u884C\u63D0\u4EA4"))},e.createElement(Q.Z,{className:"Font16 Gray_9e mLeft5",style:{verticalAlign:"text-bottom"},icon:"info"}))),checked:o.encrypt,onClick:function(w){return n.updateSource({encrypt:!w})}}),e.createElement("div",{className:"Font13 bold mTop25"},_l("\u6309\u94AE\u540D\u79F0")),e.createElement(nn,{dataKey:"submitBtnName",name:o.submitBtnName,buttonName:_l("\u63D0\u4EA4\u6309\u94AE"),onChange:this.updateSource}),e.createElement("div",{className:"Font13 mTop25 bold"},_l("\u5176\u4ED6")),e.createElement(xt,(0,h.default)({},this.props,{title:_l("\u542F\u7528\u90AE\u4EF6\u901A\u77E5"),desc:md.global.Config.IsPlatformLocal?_l("\u542F\u7528\u540E\uFF0C\u5F85\u529E\u6D88\u606F\u540C\u65F6\u4F1A\u4EE5\u90AE\u4EF6\u7684\u5F62\u5F0F\u53D1\u9001\u7ED9\u76F8\u5173\u8D1F\u8D23\u4EBA\uFF1B\u90AE\u4EF60.03\u5143/\u5C01\uFF0C\u81EA\u52A8\u4ECE\u8D26\u52A1\u4E2D\u5FC3\u6263\u8D39"):_l("\u542F\u7528\u540E\uFF0C\u5F85\u529E\u6D88\u606F\u540C\u65F6\u4F1A\u4EE5\u90AE\u4EF6\u7684\u5F62\u5F0F\u53D1\u9001\u7ED9\u76F8\u5173\u8D1F\u8D23\u4EBA"),flowNodeMap:o.flowNodeMap[a.fh.EMAIL],updateSource:function(w){return n.updateFlowMapSource(a.fh.EMAIL,w)}})),e.createElement(b.Z,{className:"mTop15 flexRow",text:e.createElement("span",null,_l("\u5F00\u542F\u9650\u65F6\u5904\u7406")),checked:(o.schedule||{}).enable,onClick:function(w){return n.updateSource({schedule:C()({},o.schedule,{enable:!w})})}}),e.createElement(zn,(0,h.default)({},this.props,{schedule:o.schedule,updateSource:this.updateSource}))),u===2&&e.createElement(e.Fragment,null,e.createElement("div",{className:"Gray_75 mTop15"},_l("\u8BBE\u7F6E\u586B\u5199\u65F6\u53EF\u4EE5\u67E5\u770B\u3001\u7F16\u8F91\u3001\u5FC5\u586B\u7684\u5B57\u6BB5\u3002\u8BBE\u4E3A\u6458\u8981\u7684\u5B57\u6BB5\u53EF\u4EE5\u5728\u6D41\u7A0B\u5F85\u529E\u5217\u8868\u4E2D\u76F4\u63A5\u663E\u793A\u3002"),e.createElement(q.Z,{type:3,text:_l("\u5E2E\u52A9"),className:"ThemeColor3 ThemeHoverColor2",href:"https://help.mingdao.com/worksheet/field-filter"})),o.selectNodeId?e.createElement("div",{className:"Font13 mTop15"},o.selectNodeObj.nodeName&&!o.selectNodeObj.appName?e.createElement("div",{className:"Gray_9e Font13 flexRow flowDetailTips"},e.createElement("i",{className:"icon-task-setting_promet Font16"}),e.createElement("div",{className:"flex mLeft10",dangerouslySetInnerHTML:{__html:_l("\u8282\u70B9\u6240\u4F7F\u7528\u7684\u6570\u636E\u6765\u6E90%0\u4E2D\u7684\u5DE5\u4F5C\u8868\u5DF2\u5220\u9664\u3002\u5FC5\u987B\u4FEE\u590D\u6B64\u8282\u70B9\u4E2D\u7684\u9519\u8BEF\uFF0C\u6216\u91CD\u65B0\u6307\u5B9A\u4E00\u4E2A\u6709\u6548\u7684\u5BF9\u8C61\u540E\u624D\u80FD\u8BBE\u7F6E\u53EF\u586B\u5199\u5B57\u6BB5\u3002",'<span class="mLeft5 mRight5 flowDetailTipsColor">\u201C'+o.selectNodeObj.nodeName+"\u201D</span>")}})):e.createElement(Na,{processId:this.props.processId,nodeId:this.props.selectNodeId,selectNodeId:o.selectNodeId,data:o.formProperties,addNotAllowView:o.addNotAllowView,updateSource:this.updateSource,showCard:!0})):e.createElement("div",{className:"Gray_9e Font13 flexRow flowDetailTips mTop15"},e.createElement("i",{className:"icon-task-setting_promet Font16"}),e.createElement("div",{className:"flex mLeft10"},_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u5BF9\u8C61\u540E\uFF0C\u624D\u80FD\u8BBE\u7F6E\u5B57\u6BB5\u6743\u9650")))),u===3&&e.createElement(e.Fragment,null,o.selectNodeId?p.map(function(f){var w=o.flowNodeMap[f.key]||{};return e.createElement(e.Fragment,{key:f.key},e.createElement("div",{className:"Font13 bold mTop25"},f.title),e.createElement("div",{className:"Font13 Gray_9e mTop10"},f.desc),e.createElement(Za.Z,{type:1,companyId:n.props.companyId,processId:n.props.processId,relationId:n.props.relationId,selectNodeId:n.props.selectNodeId,nodeId:w.selectNodeId,controls:w.controls.filter(function(D){return D.type!==29}),fields:w.fields,showCurrent:!0,filterType:f.key===a.fh.BEFORE?7:0,formulaMap:w.formulaMap,updateSource:function(G){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};return n.updateSource({flowNodeMap:C()({},o.flowNodeMap,(0,E.default)({},f.key,C()({},o.flowNodeMap[f.key],G)))},H)}}))}):e.createElement("div",{className:"Gray_9e Font13 flexRow flowDetailTips mTop25"},e.createElement("i",{className:"icon-task-setting_promet Font16"}),e.createElement("div",{className:"flex mLeft10"},_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u5BF9\u8C61\u540E\uFF0C\u624D\u80FD\u8BBE\u7F6E\u6570\u636E\u66F4\u65B0"))))))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:o.selectNodeId,onSave:this.onSave})))}}]),F}(e.Component),fa=t(47518),Ma=t.n(fa),Ya=t(26226),Ba=(0,W.Z)([`
  box-shadow: 0 1px 3px 1px rgba(0, 0, 0, 0.16);
  border-radius: 3px;
  padding: 16px 22px;
  .circle {
    width: 32px;
    height: 32px;
  }
`],[`
  box-shadow: 0 1px 3px 1px rgba(0, 0, 0, 0.16);
  border-radius: 3px;
  padding: 16px 22px;
  .circle {
    width: 32px;
    height: 32px;
  }
`]),La=P.ZP.div(Ba);const Qa=function(ne){var F=ne.companyId,B=ne.processId,n=ne.relationId,l=ne.selectNodeId,o=ne.data,d=ne.selectMsgKey,u=ne.updateSource,p=ne.onClose,f=(0,e.useState)(o[d]),w=(0,U.Z)(f,2),D=w[0],G=w[1],H=function(je){var lt=je.match(/\$[^ \r\n]+?\$/g);return lt&&lt.forEach(function(Ft){var un=Ft.replace(/\$/g,"").split(/([a-zA-Z0-9#]{24,32})-/).filter(function(dn){return dn});je=je.replace(Ft,"{"+((o.formulaMap[un[0]]||{}).name||"")+"-"+((o.formulaMap[un.join("-")]||{}).name||"")+"}")}),je};return e.createElement(te.Z,{visible:!0,width:640,className:"workflowDialogBox workflowSettings",style:{overflow:"initial"},overlayClosable:!1,type:"scroll",title:_l("\u901A\u77E5\u8BBE\u7F6E"),onOk:function(){u((0,E.default)({},d,D.trim())),p()},onCancel:p},e.createElement("div",null,_l("\u6D88\u606F\u5185\u5BB9")),e.createElement(ce.Z,{projectId:F,processId:B,relationId:n,selectNodeId:l,type:2,height:0,content:D,formulaMap:o.formulaMap,onChange:function(je,lt,Ft){return G(lt)},updateSource:u}),e.createElement("div",{className:"mTop20"},_l("\u9884\u89C8")),e.createElement(La,{className:"flexRow mTop15"},e.createElement("div",{className:"circle chat_workflow"}),e.createElement("div",{className:"mLeft15 flex"},e.createElement("div",{className:"mTop6"},e.createElement("span",{className:"Gray_9e"},_l("\u5DE5\u4F5C\u6D41"),"\uFF1A"),e.createElement("span",null,_l("{\u8BB0\u5F55\u540D\u79F0}\uFF1A{\u8BB0\u5F55\u6807\u9898}\uFF0C")),!D.trim()&&d==="passMessage"&&_l("\u5DF2\u901A\u8FC7%0",o.name),!D.trim()&&d==="overruleMessage"&&_l("\u4E8E%0\u88AB\u5426\u51B3",o.name),D.trim()&&e.createElement("span",{style:{background:"#FFA340"}},H(D)),e.createElement("span",{className:"ThemeColor3 mLeft5"},_l("\u67E5\u770B\u8BE6\u60C5"))),e.createElement("div",{className:"mTop15 Gray_9e"},ue()().format("YYYY-MM-DD HH:mm:ss")))))};var nr=t(93002);const Rr=function(ne){var F=ne.isApproval,B=ne.data,n=ne.getCallBackNodeNames,l=ne.updateSource,o=ne.onClose,d=(0,nr.Z)({callBackNodeType:B.callBackNodeType,callBackType:B.callBackType===1&&B.callBackMultipleLevel===1?2:B.callBackType,callBackMultipleLevel:B.callBackMultipleLevel,callBackNodeIds:B.callBackNodeIds}),u=(0,U.Z)(d,2),p=u[0],f=u[1],w=[{text:_l("\u91CD\u65B0\u6267\u884C\u6D41\u7A0B"),value:0},{text:B.multipleLevelType===0?_l("\u76F4\u63A5\u8FD4\u56DE\u5BA1\u6279\u8282\u70B9"):_l("\u8FD4\u56DE\u6B64\u8282\u70B9\u7684\u7B2C\u4E00\u7EA7"),value:1},{text:_l("\u76F4\u63A5\u8FD4\u56DE\u9000\u56DE\u7684\u5C42\u7EA7"),value:2}],D=[{text:_l("\u4E0A\u65B9\u6240\u6709\u8282\u70B9"),value:0},{text:_l("\u6307\u5B9A\u8282\u70B9"),value:3},{text:_l("\u4EC5\u4E0A\u4E00\u4E2A\u8282\u70B9"),value:2},{text:_l("\u4EC5\u53D1\u8D77\u8282\u70B9"),value:1}];return B.multipleLevelType===0&&v().remove(w,function(G){return G.value===2}),F||v().remove(D,function(G){return v().includes([2,3],G.value)}),e.createElement(te.Z,{visible:!0,width:640,className:"workflowDialogBox workflowSettings",style:{overflow:"initial"},overlayClosable:!1,type:"scroll",title:_l("\u9000\u56DE\u8BBE\u7F6E"),onOk:function(){if(p.callBackNodeType===3&&!p.callBackNodeIds.length){alert(_l("\u5FC5\u987B\u6307\u5B9A\u8282\u70B9"),2);return}l({callBackType:p.callBackType===2?1:p.callBackType,callBackMultipleLevel:p.callBackType===2?1:-1,callBackNodeType:p.callBackNodeType,callBackNodeIds:p.callBackNodeIds}),o()},onCancel:o},e.createElement("div",{className:"bold"},_l("\u5904\u7406\u5B8C\u6210\u540E")),e.createElement(Ie.Z,{className:"mTop10 w100",border:!0,menuStyle:{width:"100%"},data:w,value:p.callBackType===1&&p.callBackMultipleLevel===1?2:p.callBackType,onChange:function(H){f({callBackType:H,callBackMultipleLevel:H===2?1:-1,callBackNodeIds:[]}),B.selectNodeId&&n(B.selectNodeId,H===2?1:H)}}),e.createElement("div",{className:"bold mTop20"},_l("\u5141\u8BB8\u9000\u56DE\u7684\u8282\u70B9")),e.createElement(Ie.Z,{className:"mTop10 w100",border:!0,menuStyle:{width:"100%"},data:D,value:p.callBackNodeType,onChange:function(H){f({callBackNodeType:H}),B.selectNodeId&&H===3&&!B.callBackNodes.length&&n(B.selectNodeId,p.callBackType)}}),p.callBackNodeType===0&&e.createElement("div",{className:"mTop10 flexRow alignItemsCenter boderRadAll_4 pLeft12 pRight12 Gray_75",style:{minHeight:36,background:"#F4F4F4"}},B.callBackNodes.map(function(G){return Ma()(G)}).join("\u3001")||_l("\u65E0\u53EF\u9000\u56DE\u7684\u8282\u70B9")),p.callBackNodeType===3&&e.createElement("div",{className:"flowDetailTrigger"},e.createElement(Ie.Z,{className:"mTop10 w100 flowDropdown flowDropdownTags",border:!0,menuStyle:{width:"100%"},data:B.callBackNodes.map(function(G){return{text:Ma()(G),value:T()(G)[0],disabled:v().includes(p.callBackNodeIds,T()(G)[0])}}),value:"",onChange:function(H){var De=p.callBackNodeIds;v().includes(De,H)?v().remove(De,function(je){return je===H}):De.push(H),f({callBackNodeIds:De})},renderTitle:function(){return e.createElement("div",{className:"flex triggerConditionNum triggerConditionDropdown"},p.callBackNodeIds.length?e.createElement("ul",{className:"pLeft6 tagWrap"},p.callBackNodeIds.map(function(H,De){var je=v().find(B.callBackNodes,function(lt){return T()(lt)[0]===H});return e.createElement("li",{key:De,className:"tagItem flexRow"},e.createElement("span",{className:"tag"},je?je[H]:e.createElement("span",{style:{color:"#f44336"}},_l("\u8282\u70B9\u5DF2\u5220\u9664"))),e.createElement("span",{className:"delTag",onClick:function(Ft){Ft.stopPropagation(),f({callBackNodeIds:p.callBackNodeIds.filter(function(un){return un!==H})})}},e.createElement(Q.Z,{icon:"close",className:"pointer"})))})):e.createElement("div",{className:"Gray_bd pLeft10 pRight10"},_l("\u8BF7\u9009\u62E9")))}})))};var hr=(0,W.Z)([`
  padding: 5px 10px;
  border-radius: 4px;
  height: 36px;
  display: flex;
  align-items: center;
  border: 1px solid #ddd;
  min-width: 0;
  cursor: pointer;
  position: relative;
  .flowDetailMembers {
    margin-top: -12px;
    min-width: 0;
  }
`],[`
  padding: 5px 10px;
  border-radius: 4px;
  height: 36px;
  display: flex;
  align-items: center;
  border: 1px solid #ddd;
  min-width: 0;
  cursor: pointer;
  position: relative;
  .flowDetailMembers {
    margin-top: -12px;
    min-width: 0;
  }
`]),yr=(0,W.Z)([`
  height: 36px;
  background: #f5f5f5;
  border-radius: 4px;
  align-items: center;
  padding: 0 12px;
  .icon-delete2:hover {
    color: #f44336 !important;
  }
`],[`
  height: 36px;
  background: #f5f5f5;
  border-radius: 4px;
  align-items: center;
  padding: 0 12px;
  .icon-delete2:hover {
    color: #f44336 !important;
  }
`]),br=(0,W.Z)([`
  display: inline-flex;
  padding: 0 12px 12px 12px;
  margin-right: 36px;
  font-weight: bold;
  font-size: 15px;
  cursor: pointer;
  position: relative;
  &.active {
    &::before {
      position: absolute;
      bottom: -2px;
      left: 0;
      right: 0;
      content: '';
      height: 0;
      border-bottom: 3px solid #2196f3;
    }
  }
`],[`
  display: inline-flex;
  padding: 0 12px 12px 12px;
  margin-right: 36px;
  font-weight: bold;
  font-size: 15px;
  cursor: pointer;
  position: relative;
  &.active {
    &::before {
      position: absolute;
      bottom: -2px;
      left: 0;
      right: 0;
      content: '';
      height: 0;
      border-bottom: 3px solid #2196f3;
    }
  }
`]),Lr=P.ZP.div(hr),lr=P.ZP.div(yr),Or=P.ZP.div(br),Vr=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.updateFlowMapSource=function(l,o){var d=n.state.data;n.updateSource({flowNodeMap:C()({},d.flowNodeMap,(0,E.default)({},l,C()({},d.flowNodeMap[l],o)))})},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.name,p=o.selectNodeId,f=o.accounts,w=o.countersignType,D=o.operationTypeList,G=o.ignoreRequired,H=o.isCallBack,De=o.callBackType,je=o.callBackMultipleLevel,lt=o.formProperties,Ft=o.passBtnName,un=o.overruleBtnName,dn=o.auth,Hn=o.condition,ca=o.multipleLevelType,da=o.multipleLevel,Me=o.batch,nt=o.schedule,He=o.passSendMessage,ie=o.passMessage,We=o.overruleSendMessage,Ue=o.overruleMessage,Ke=o.callBackNodeType,ut=o.callBackNodeIds,wt=o.encrypt,Et=o.operationUserRange,et=o.returnBtnName,Xe=o.opinionTemplate,pt=o.flowNodeMap,at=o.userTaskNullMap,ct=o.candidateUserMap,Nt=o.addNotAllowView,mn=o.signOperationType;if(!p){alert(_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u5BF9\u8C61"),2);return}if(!f.length&&ca===0){alert(_l("\u5FC5\u987B\u6307\u5B9A\u5BA1\u6279\u4EBA"),2);return}if(at[5]&&!at[5].length){alert(_l("\u5FC5\u987B\u6307\u5B9A\u4EE3\u7406\u4EBA"),2);return}d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,name:u.trim(),selectNodeId:p,multipleLevelType:ca,multipleLevel:da,accounts:f,countersignType:ca!==0&&w===0?1:w,condition:Hn,operationTypeList:D,ignoreRequired:G,isCallBack:H,callBackType:De,callBackMultipleLevel:je,formProperties:lt,passBtnName:Ft.trim()||_l("\u901A\u8FC7"),overruleBtnName:un.trim()||_l("\u5426\u51B3"),returnBtnName:et.trim()||_l("\u9000\u56DE"),auth:dn,batch:Me,schedule:nt,passSendMessage:He,passMessage:ie,overruleSendMessage:We,overruleMessage:Ue,callBackNodeType:Ke,callBackNodeIds:ut,encrypt:wt,operationUserRange:Et,opinionTemplate:Xe,flowNodeMap:(0,N.zA)(pt),userTaskNullMap:at,candidateUserMap:ct,addNotAllowView:Nt,signOperationType:mn}).then(function(Qt){n.props.updateNodeData(Qt),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.onChange=function(l){var o=n.state.data;n.getNodeDetail(n.props,l,function(){o.isCallBack&&n.getCallBackNodeNames(l,o.callBackType)})},n.getCallBackNodeNames=function(l,o){var d=n.props,u=d.processId,p=d.selectNodeId;z.Z.getCallBackNodeNames({processId:u,nodeId:p,selectNodeId:l,callBackType:o}).then(function(f){n.updateSource({callBackNodes:f})})},n.authRankChange=function(l){var o=n.state.data,d=o.auth.passTypeList.filter(function(p){return n.checkHasOpinion(p)}),u=o.auth.overruleTypeList.filter(function(p){return n.checkHasOpinion(p)});o.auth.passTypeList.filter(function(p){return!n.checkHasOpinion(p)}).length&&d.push(l),o.auth.overruleTypeList.filter(function(p){return!n.checkHasOpinion(p)}).length&&u.push(l),n.updateSource({auth:{passTypeList:d,overruleTypeList:u}})},n.state={data:{},saveRequest:!1,showSelectUserDialog:!1,selectMsgKey:"",showCallbackDialog:!1,tabIndex:1,showApprovalTemplate:!1},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n,l){var o=this,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},u=n.processId,p=n.selectNodeId,f=n.selectNodeType,w=n.isApproval,D=n.instanceId,G=this.state.data;z.Z.getNodeDetail({processId:u,nodeId:p,flowNodeType:f,selectNodeId:l,instanceId:D}).then(function(H){if(l){var De;H=C()({},G,{selectNodeId:H.selectNodeId,appList:H.appList,selectNodeObj:H.selectNodeObj,flowNodeMap:C()({},G.flowNodeMap,(De={},(0,E.default)(De,a.fh.PASS,H.flowNodeMap[a.fh.PASS]),(0,E.default)(De,a.fh.OVERRULE,H.flowNodeMap[a.fh.OVERRULE]),(0,E.default)(De,a.fh.BEFORE,H.flowNodeMap[a.fh.BEFORE]),(0,E.default)(De,a.fh.RETURN,H.flowNodeMap[a.fh.RETURN]),De)),formProperties:H.formProperties})}o.setState({data:H},d),w&&!H.selectNodeId&&o.onChange(H.flowNodeList[0].nodeId)})}},{key:"renderApprovalUser",value:function(){var n=this,l=this.props.isApproval,o=this.state.data,d=[{text:_l("\u81EA\u5B9A\u4E49"),value:0},{text:_l("\u6309\u90E8\u95E8\u5C42\u7EA7\u9010\u7EA7\u5BA1\u6279"),value:3}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop20"},_l("\u5BA1\u6279\u4EBA")),e.createElement("div",{className:"flexRow mTop10"},d.map(function(u,p){return e.createElement("div",{className:R()({mLeft80:p>0}),key:p},e.createElement(le.Z,{text:u.text,checked:o.multipleLevelType===u.value||u.value===3&&v().includes([1,2,3,4],o.multipleLevelType),onClick:function(){n.updateSource({multipleLevelType:u.value,callBackMultipleLevel:-1,accounts:[],multipleLevel:1,schedule:C()({},o.schedule,{enable:!1}),candidateUserMap:o.multipleLevelType===0&&l?{11:[]}:{}}),n.setState({tabIndex:1})}}))})),o.multipleLevelType===0?this.renderMember():this.renderApprovalStartAndEnd())}},{key:"renderMember",value:function(){var n=this,l=this.state,o=l.data,d=l.showSelectUserDialog,u=o.accounts;return e.createElement("div",{className:"mTop15"},e.createElement($n.Z,{companyId:this.props.companyId,appId:this.props.relationType===2?this.props.relationId:"",accounts:u,updateSource:this.updateSource}),e.createElement("div",{className:"flexRow mTop12 ThemeColor3 workflowDetailAddBtn",onClick:function(){return n.setState({showSelectUserDialog:!0})}},e.createElement("i",{className:"Font28 icon-task-add-member-circle mRight10"}),_l("\u6DFB\u52A0\u5BA1\u6279\u4EBA"),e.createElement(gn.Z,{appId:this.props.relationType===2?this.props.relationId:"",visible:d,companyId:this.props.companyId,processId:this.props.processId,nodeId:this.props.selectNodeId,unique:!1,accounts:u,updateSource:this.updateSource,onClose:function(){return n.setState({showSelectUserDialog:!1})}})))}},{key:"renderApprovalStartAndEnd",value:function(){var n=this,l=this.props.isApproval,o=this.state,d=o.data,u=o.showSelectUserDialog,p={down:[{text:_l("\u6700\u9AD8\u5C42\u7EA7"),value:1},{text:_l("\u7B2C2\u5C42\u7EA7"),value:2},{text:_l("\u7B2C3\u5C42\u7EA7"),value:3},{text:_l("\u7B2C4\u5C42\u7EA7"),value:4},{text:_l("\u7B2C5\u5C42\u7EA7"),value:5},{text:_l("\u7B2C6\u5C42\u7EA7"),value:6},{text:_l("\u7B2C7\u5C42\u7EA7"),value:7},{text:_l("\u7B2C8\u5C42\u7EA7"),value:8},{text:_l("\u7B2C9\u5C42\u7EA7"),value:9},{text:_l("\u7B2C10\u5C42\u7EA7"),value:10},{text:_l("\u7B2C11\u5C42\u7EA7"),value:11},{text:_l("\u7B2C12\u5C42\u7EA7"),value:12},{text:_l("\u7B2C13\u5C42\u7EA7"),value:13},{text:_l("\u7B2C14\u5C42\u7EA7"),value:14},{text:_l("\u7B2C15\u5C42\u7EA7"),value:15},{text:_l("\u7B2C16\u5C42\u7EA7"),value:16},{text:_l("\u7B2C17\u5C42\u7EA7"),value:17},{text:_l("\u7B2C18\u5C42\u7EA7"),value:18},{text:_l("\u7B2C19\u5C42\u7EA7"),value:19},{text:_l("\u7B2C20\u5C42\u7EA7"),value:20}],up:[{text:_l("\u5411\u4E0A1\u7EA7"),value:2},{text:_l("\u5411\u4E0A2\u7EA7"),value:3},{text:_l("\u5411\u4E0A3\u7EA7"),value:4},{text:_l("\u5411\u4E0A4\u7EA7"),value:5},{text:_l("\u5411\u4E0A5\u7EA7"),value:6},{text:_l("\u5411\u4E0A6\u7EA7"),value:7},{text:_l("\u5411\u4E0A7\u7EA7"),value:8},{text:_l("\u5411\u4E0A8\u7EA7"),value:9},{text:_l("\u5411\u4E0A9\u7EA7"),value:10},{text:_l("\u5411\u4E0A10\u7EA7"),value:11},{text:_l("\u5411\u4E0A11\u7EA7"),value:12},{text:_l("\u5411\u4E0A12\u7EA7"),value:13},{text:_l("\u5411\u4E0A13\u7EA7"),value:14},{text:_l("\u5411\u4E0A14\u7EA7"),value:15},{text:_l("\u5411\u4E0A15\u7EA7"),value:16},{text:_l("\u5411\u4E0A16\u7EA7"),value:17},{text:_l("\u5411\u4E0A17\u7EA7"),value:18},{text:_l("\u5411\u4E0A18\u7EA7"),value:19},{text:_l("\u5411\u4E0A19\u7EA7"),value:20}]},f=[{text:_l("\u53D1\u8D77\u4EBA"),value:"11"},{text:_l("\u6307\u5B9A\u4EBA\u5458"),value:"12"},{text:_l("\u6307\u5B9A\u90E8\u95E8"),value:"13"}],w=T()(d.candidateUserMap||{}).filter(function(D){return D!=="0"})[0]||"12";return l||v().remove(f,function(D){return D.value==="11"}),e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop20"},_l("\u5BA1\u6279\u8D77\u70B9")),e.createElement("div",{className:"flexRow alignItemsCenter mTop10"},e.createElement(Ie.Z,{style:{minWidth:180},data:f,value:w,border:!0,onChange:function(G){n.updateSource({candidateUserMap:(0,E.default)({},G,[]),accounts:[]})}}),w!=="11"&&e.createElement(Lr,{className:"flex mLeft10",onClick:function(){return n.setState({showSelectUserDialog:!0})}},((d.candidateUserMap||{})[w]||[]).concat(d.accounts).length?e.createElement($n.Z,{companyId:this.props.companyId,appId:this.props.relationType===2?this.props.relationId:"",leastOne:!0,accounts:d.candidateUserMap&&d.candidateUserMap[w]?d.candidateUserMap[w]:d.accounts,removeOrganization:!0}):e.createElement("span",{className:"Gray_9e"},w==="12"?_l("\u9009\u62E9\u4EBA\u5458\u5B57\u6BB5"):_l("\u9009\u62E9\u90E8\u95E8\u5B57\u6BB5")),w==="12"&&!!d.accounts.length&&d.accounts[0].controlType===27&&e.createElement("div",{className:"mLeft5"},_l("\u90E8\u95E8\u8D1F\u8D23\u4EBA")),e.createElement("div",{className:"flex"}),e.createElement("i",{className:"icon-arrow-down-border mLeft8 Gray_9e"}),e.createElement(gn.Z,{appId:this.props.relationType===2?this.props.relationId:"",visible:u,companyId:this.props.companyId,processId:this.props.processId,nodeId:this.props.selectNodeId,specialType:w==="12"?26:27,onlyNodeRole:!0,unique:!0,accounts:d.accounts,updateSource:function(G){var H=G.accounts;return n.updateSource({candidateUserMap:(0,E.default)({},w,H),accounts:[]})},onClose:function(){return n.setState({showSelectUserDialog:!1})}})),e.createElement("div",{className:"mLeft10"},_l("\u7684\u76F4\u63A5\u90E8\u95E8\u8D1F\u8D23\u4EBA"))),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u5BA1\u6279\u7EC8\u70B9")),e.createElement("div",{className:"flexRow alignItemsCenter mTop10"},e.createElement(Ie.Z,{className:"flowDropdown",style:{width:240},data:[{text:_l("\u901A\u8BAF\u5F55\u6307\u5B9A\u5C42\u7EA7"),value:"down"},{text:_l("\u8D77\u70B9\u5411\u4E0A\u7684\u7EA7\u6570"),value:"up"}],value:v().includes([1,2],d.multipleLevelType)?"up":"down",border:!0,onChange:function(G){var H=d.multipleLevelType;G==="down"?H=H===1?3:4:H=H===3?1:2,n.updateSource({multipleLevelType:H,multipleLevel:v().includes([1,2],H)?2:1})}}),e.createElement(Ie.Z,{className:"flowDropdown mLeft10 mRight10 flex",data:p[v().includes([1,2],d.multipleLevelType)?"up":"down"],value:d.multipleLevel,border:!0,renderTitle:v().includes([1,2],d.multipleLevelType)&&d.multipleLevel===-1?function(){return e.createElement("span",null,_l("\u76F4\u5230\u901A\u8BAF\u5F55\u7684\u6700\u9AD8\u7EA7"))}:null,onChange:function(G){n.updateSource({multipleLevel:G})}}),_l("\u90E8\u95E8\u8D1F\u8D23\u4EBA")),w!=="13"&&e.createElement("div",{className:"flexRow alignItemsCenter mTop20"},e.createElement(b.Z,{className:"InlineFlex",text:_l("\u4EC5\u4E3B\u90E8\u95E8\u8D1F\u8D23\u4EBA\u9700\u8981\u5BA1\u6279"),checked:v().includes([2,4],d.multipleLevelType),onClick:function(G){var H=d.multipleLevelType;G?H=H===2?1:3:H=H===1?2:4,n.updateSource({multipleLevelType:H})}}),e.createElement("span",{className:"workflowDetailTipsWidth mLeft5 Gray_9e","data-tip":_l("\u5982\u4E0D\u52FE\u9009\uFF0C\u5219\u9700\u8981\u89E6\u53D1\u8005\u6240\u5C5E\u7684\u6240\u6709\u90E8\u95E8\u7684\u5BF9\u5E94\u5C42\u7EA7\u7684\u90E8\u95E8\u8D1F\u8D23\u4EBA\u4E00\u8D77\u5BA1\u6279")},e.createElement("i",{className:"Font14 icon-workflow_help"}))))}},{key:"renderApprovalMode",value:function(){var n=this,l=this.state.data,o=[{text:_l("\u6216\u7B7E\uFF08\u4E00\u540D\u5BA1\u6279\u4EBA\u901A\u8FC7\u6216\u5426\u51B3\u5373\u53EF\uFF09"),value:3,includeType:[6,7,13]},{text:_l("\u4F1A\u7B7E\uFF08\u9700\u6240\u6709\u5BA1\u6279\u4EBA\u901A\u8FC7\uFF09"),value:1,includeType:[6,13,16]},{text:_l("\u4F1A\u7B7E\uFF08\u53EA\u9700\u4E00\u540D\u5BA1\u6279\u4EBA\u901A\u8FC7\uFF0C\u5426\u51B3\u9700\u5168\u5458\u5426\u51B3\uFF09"),value:2,includeType:[13,16]},{text:_l("\u4F1A\u7B7E\uFF08\u6309\u6BD4\u4F8B\u6295\u7968\u901A\u8FC7\uFF09"),value:4,includeType:[6,13,16]}],d=[{text:"10%",value:"10"},{text:"20%",value:"20"},{text:"30%",value:"30"},{text:"40%",value:"40"},{text:"50%",value:"50"},{text:"60%",value:"60"},{text:"70%",value:"70"},{text:"80%",value:"80"},{text:"90%",value:"90"},{text:"100%",value:"100"}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop20"},_l("\u591A\u4EBA\u5BA1\u6279\u65F6\u91C7\u7528\u7684\u5BA1\u6279\u65B9\u5F0F")),e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:o,value:l.countersignType,border:!0,placeholder:l.multipleLevelType===0?_l("\u6216\u7B7E\uFF08\u4E00\u540D\u5BA1\u6279\u4EBA\u901A\u8FC7\u6216\u5426\u51B3\u5373\u53EF\uFF09"):_l("\u4F1A\u7B7E\uFF08\u9700\u6240\u6709\u5BA1\u6279\u4EBA\u901A\u8FC7\uFF09"),onChange:function(p){var f="";p===4&&(f="100"),n.updateSource({countersignType:p,operationTypeList:v().intersection(l.operationTypeList,o.find(function(w){return w.value===p}).includeType),ignoreRequired:!1,isCallBack:p===2?!1:l.isCallBack,condition:f})}}),l.countersignType===4&&e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop25"},_l("\u901A\u8FC7\u6BD4\u4F8B")),e.createElement("div",{className:"mTop10 flexRow alignItemsCenter"},e.createElement(Ie.Z,{className:"flowDropdown mRight10",style:{width:120},data:d,value:l.condition,border:!0,onChange:function(p){n.updateSource({condition:p})}}),_l("\u53CA\u4EE5\u4E0A\u7684\u6210\u5458\u901A\u8FC7\u540E\u5373\u89C6\u4E3A\u8282\u70B9\u901A\u8FC7"))))}},{key:"renderTabs",value:function(){var n=this,l=this.state.tabIndex,o=[{text:_l("\u5BA1\u6279\u8BBE\u7F6E"),value:1},{text:_l("\u5B57\u6BB5\u8BBE\u7F6E"),value:2},{text:_l("\u6570\u636E\u66F4\u65B0"),value:3}];return e.createElement("div",{className:"mTop25",style:{borderBottom:"1px solid #ddd"}},o.map(function(d){return e.createElement(Or,{key:d.value,className:R()("pointerEventsAuto",{active:d.value===l}),onClick:function(){return n.setState({tabIndex:d.value})}},d.text)}))}},{key:"renderApprovalSettings",value:function(){var n=this,l=this.state.data,o=[{text:_l("\u5BA1\u6279\u524D\u52A0\u7B7E"),value:1},{text:_l("\u901A\u8FC7\u540E\u52A0\u7B7E"),value:2},{text:_l("\u7528\u6237\u53EF\u9009"),value:0}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop25"},_l("\u5BA1\u6279\u4EBA\u64CD\u4F5C")),e.createElement(b.Z,{className:"mTop15 flexRow",text:_l("\u6682\u5B58"),checked:v().includes(l.operationTypeList,13),onClick:function(u){return n.switchApprovalSettings(!u,13)}}),e.createElement(b.Z,{className:"mTop15 flexRow",text:_l("\u5426\u51B3"),checked:!v().includes(l.operationTypeList,-5),onClick:function(u){return n.switchApprovalSettings(u,-5)}}),l.countersignType!==2&&e.createElement(e.Fragment,null,e.createElement("div",{className:"flexRow alignItemsCenter mTop15"},e.createElement(b.Z,{className:"flex flexRow",text:_l("\u9000\u56DE"),disabled:l.countersignType===2,checked:l.isCallBack,onClick:function(u){n.updateSource({isCallBack:!u,callBackType:0,callBackMultipleLevel:-1}),l.selectNodeId&&!u&&n.getCallBackNodeNames(l.selectNodeId,0)}})),l.isCallBack&&e.createElement("div",{className:"flowBackBox Font12 mTop10"},e.createElement("div",null,e.createElement("span",{className:"Gray_9e mRight5"},_l("\u5904\u7406\u5B8C\u6210\u540E")),l.callBackType===0&&_l("\u91CD\u65B0\u6267\u884C\u6D41\u7A0B"),l.callBackType===1?l.callBackMultipleLevel===1?_l("\u76F4\u63A5\u8FD4\u56DE\u9000\u56DE\u7684\u5C42\u7EA7"):l.multipleLevelType===0?_l("\u76F4\u63A5\u8FD4\u56DE\u5BA1\u6279\u8282\u70B9"):_l("\u8FD4\u56DE\u6B64\u8282\u70B9\u7684\u7B2C\u4E00\u7EA7"):""),e.createElement("div",{className:"mTop4"},e.createElement("span",{className:"Gray_9e mRight5"},_l("\u5141\u8BB8\u9000\u56DE\u7684\u8282\u70B9")),l.callBackNodeType===0&&e.createElement(e.Fragment,null,l.callBackNodes.map(function(d){return Ma()(d)}).join("\u3001")||_l("\u65E0\u53EF\u9000\u56DE\u7684\u8282\u70B9")),l.callBackNodeType===1&&_l("\u4EC5\u53D1\u8D77\u8282\u70B9"),l.callBackNodeType===2&&_l("\u4EC5\u4E0A\u4E00\u4E2A\u8282\u70B9"),l.callBackNodeType===3&&l.callBackNodes.filter(function(d){return v().includes(l.callBackNodeIds,T()(d)[0])}).map(function(d){return Ma()(d)}).join("\u3001")),e.createElement(Q.Z,{type:"edit",className:"Gray_9e ThemeHoverColor3 Font14 pointer",onClick:function(){return n.setState({showCallbackDialog:!0})}}))),l.countersignType!==2&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop15"},e.createElement(b.Z,{className:"InlineFlex",text:_l("\u8F6C\u5BA1"),checked:v().includes(l.operationTypeList,6),onClick:function(u){return n.switchApprovalSettings(!u,6)}})),v().includes(l.operationTypeList,6)&&e.createElement(en,(0,h.default)({},this.props,{operationUserRange:l.operationUserRange,operationType:"6",title:_l("\u53EF\u8F6C\u5BA1\u7ED9\uFF1A"),btnText:_l("\u6DFB\u52A0\u8F6C\u5BA1\u5019\u9009\u4EBA"),updateSource:function(u){var p=u.accounts;return n.updateSource({operationUserRange:C()({},l.operationUserRange,(0,E.default)({},6,p))})}}))),!(v().includes([1,2,4],l.countersignType)||l.countersignType===0&&l.multipleLevelType!==0)&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop15"},e.createElement(b.Z,{className:"InlineFlex",text:_l("\u52A0\u7B7E"),checked:v().includes(l.operationTypeList,7),onClick:function(u){return n.switchApprovalSettings(!u,7)}})),v().includes(l.operationTypeList,7)&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mLeft25 relative"},e.createElement("div",{className:"Font13 mTop5 Gray_9e"},_l("\u52A0\u7B7E\u65B9\u5F0F")),e.createElement("div",{className:"flexRow mTop10"},o.map(function(d,u){return e.createElement("div",{className:"mRight40",key:u},e.createElement(le.Z,{text:d.text,checked:l.signOperationType===d.value,onClick:function(){return n.updateSource({signOperationType:d.value})}}))}))),e.createElement(en,(0,h.default)({},this.props,{operationUserRange:l.operationUserRange,operationType:"7",title:_l("\u53EF\u52A0\u7B7E\u7ED9\uFF1A"),btnText:_l("\u6DFB\u52A0\u52A0\u7B7E\u5019\u9009\u4EBA"),updateSource:function(u){var p=u.accounts;return n.updateSource({operationUserRange:C()({},l.operationUserRange,(0,E.default)({},7,p))})}})))),(v().includes([1,2,4],l.countersignType)||l.countersignType===0&&l.multipleLevelType!==0)&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop15"},e.createElement(b.Z,{className:"InlineFlex",text:_l("\u6DFB\u52A0\u5BA1\u6279\u4EBA"),checked:v().includes(l.operationTypeList,16),onClick:function(u){return n.switchApprovalSettings(!u,16)}})),v().includes(l.operationTypeList,16)&&e.createElement(en,(0,h.default)({},this.props,{operationUserRange:l.operationUserRange,operationType:"16",title:_l("\u53EF\u6DFB\u52A0\uFF1A"),btnText:_l("\u6DFB\u52A0\u5019\u9009\u4EBA"),updateSource:function(u){var p=u.accounts;return n.updateSource({operationUserRange:C()({},l.operationUserRange,(0,E.default)({},16,p))})}}))),e.createElement(_t.Z,{projectId:this.props.companyId,appId:this.props.relationType===2?this.props.relationId:"",isApproval:this.props.isApproval,title:_l("\u5BA1\u6279\u4EBA\u4E3A\u7A7A\u65F6"),titleInfo:_l("\u8BBE\u7F6E\u5F53\u524D\u8282\u70B9\u8D1F\u8D23\u4EBA\u4E3A\u7A7A\u65F6\u7684\u5904\u7406\u65B9\u5F0F\u3002\u5F53\u4F7F\u7528\u9ED8\u8BA4\u8BBE\u7F6E\u65F6\uFF0C\u6309\u7167\u6D41\u7A0B\u53D1\u8D77\u8282\u70B9\u4E2D\u8BBE\u7F6E\u7684\u7EDF\u4E00\u7684\u5904\u7406\u65B9\u5F0F"),showDefaultItem:!0,userTaskNullMap:l.userTaskNullMap,updateSource:function(u){return n.updateSource({userTaskNullMap:u})}}))}},{key:"switchApprovalSettings",value:function(n,l){var o=this.state.data,d=v().cloneDeep(o.operationTypeList);n?d.push(l):v().remove(d,function(u){return u===l}),this.updateSource({operationTypeList:d})}},{key:"checkHasOpinion",value:function(n){return v().includes([100,101],n)}},{key:"opinionRequiredChange",value:function(n,l,o){var d=this,u=this.state.data,p=[].concat(u.auth[l]);v().remove(p,function(f){return d.checkHasOpinion(f)}),n?o&&p.push(o):!o&&p.push(101),this.updateSource({auth:C()({},u.auth,(0,E.default)({},l,p))})}},{key:"authRequiredChange",value:function(n,l){var o=this,d=this.state.data,u=[].concat(d.auth[l]).filter(function(f){return o.checkHasOpinion(f)}),p=d.auth.passTypeList.concat(d.auth.overruleTypeList).filter(function(f){return!o.checkHasOpinion(f)})[0]||1;n&&u.push(p),this.updateSource({auth:C()({},d.auth,(0,E.default)({},l,u))})}},{key:"renderMessage",value:function(){var n=this,l=this.state.data,o=[{text:_l("\u901A\u8FC7\u65F6\u901A\u77E5"),key:"passSendMessage",msgKey:"passMessage"},{text:_l("\u5426\u51B3\u65F6\u901A\u77E5"),key:"overruleSendMessage",msgKey:"overruleMessage"}];return e.createElement(e.Fragment,null,o.map(function(d){return e.createElement("div",{className:"flexRow mTop10 alignItemsCenter",key:d.key},e.createElement(b.Z,{text:d.text,checked:l[d.key],onClick:function(p){return n.updateSource((0,E.default)({},d.key,!p))}}),l[d.key]&&e.createElement(lr,{className:"flex mLeft10 flexRow"},e.createElement("div",{className:"flex mRight20 ellipsis Font12"},l[d.msgKey]?_l("\u81EA\u5B9A\u4E49"):_l("\u9ED8\u8BA4\u6D88\u606F\u5185\u5BB9")),e.createElement(Q.Z,{type:"edit",className:"Gray_9e ThemeHoverColor3 Font14 pointer",onClick:function(){return n.setState({selectMsgKey:d.msgKey})}})))}))}},{key:"renderSeniorSettings",value:function(){var n=this,l=this.state.data;return e.createElement(e.Fragment,null,e.createElement(b.Z,{className:"mTop15 flexRow",text:_l("\u5426\u51B3/\u9000\u56DE\u65F6\uFF0C\u65E0\u9700\u586B\u5199\u8868\u5355\u5B57\u6BB5"),checked:l.ignoreRequired,onClick:function(d){return n.updateSource({ignoreRequired:!d})}}),e.createElement(b.Z,{className:"mTop15 flexRow",text:e.createElement("span",null,_l("\u5141\u8BB8\u6279\u91CF / \u5FEB\u901F\u5BA1\u6279"),e.createElement(Rn.Z,{popupPlacement:"bottom",text:e.createElement("span",null,_l("\u5141\u8BB8\u5BA1\u6279\u4EBA\u6279\u91CF\u3001\u5FEB\u901F\u5904\u7406\u5BA1\u6279\u4EFB\u52A1\uFF08\u5728\u79FB\u52A8\u7AEF\u53EF\u4EE5\u76F4\u63A5\u70B9\u51FB\u5F85\u5BA1\u6279\u5217\u8868\u4E0A\u7684\u6309\u94AE\u8FDB\u884C\u5BA1\u6279\uFF09\u3002\u5728\u6279\u91CF\u5904\u7406\u5BA1\u6279\u65F6\u5C06\u5FFD\u7565\u8868\u5355\u4E2D\u7684\u5FC5\u586B\u5B57\u6BB5\u3002"))},e.createElement(Q.Z,{className:"Font16 Gray_9e mLeft5",style:{verticalAlign:"text-bottom"},icon:"info"}))),checked:l.batch,onClick:function(d){return n.updateSource({batch:!d})}}),e.createElement(xt,(0,h.default)({},this.props,{title:_l("\u542F\u7528\u90AE\u4EF6\u901A\u77E5"),desc:md.global.Config.IsPlatformLocal?_l("\u542F\u7528\u540E\uFF0C\u5F85\u529E\u6D88\u606F\u540C\u65F6\u4F1A\u4EE5\u90AE\u4EF6\u7684\u5F62\u5F0F\u53D1\u9001\u7ED9\u76F8\u5173\u8D1F\u8D23\u4EBA\uFF1B\u90AE\u4EF60.03\u5143/\u5C01\uFF0C\u81EA\u52A8\u4ECE\u8D26\u52A1\u4E2D\u5FC3\u6263\u8D39"):_l("\u542F\u7528\u540E\uFF0C\u5F85\u529E\u6D88\u606F\u540C\u65F6\u4F1A\u4EE5\u90AE\u4EF6\u7684\u5F62\u5F0F\u53D1\u9001\u7ED9\u76F8\u5173\u8D1F\u8D23\u4EBA"),showApprovalBtn:!l.encrypt,flowNodeMap:l.flowNodeMap[a.fh.EMAIL],updateSource:function(d){return n.updateFlowMapSource(a.fh.EMAIL,d)}})),l.multipleLevelType===0&&e.createElement(e.Fragment,null,e.createElement(b.Z,{className:"mTop15 flexRow",text:_l("\u5F00\u542F\u9650\u65F6\u5904\u7406"),checked:(l.schedule||{}).enable,onClick:function(d){return n.updateSource({schedule:C()({},l.schedule,{enable:!d})})}}),e.createElement(zn,(0,h.default)({},this.props,{schedule:l.schedule,updateSource:this.updateSource}))))}},{key:"render",value:function(){var n=this,l=this.state,o=l.data,d=l.showCallbackDialog,u=l.tabIndex,p=l.showApprovalTemplate,f=l.selectMsgKey,w={1:_l("\u7B7E\u540D"),2:_l("\u56DB\u7EA7\uFF1A\u5B9E\u540D"),3:_l("\u4E09\u7EA7\uFF1A\u5B9E\u540D+\u5B9E\u4EBA"),4:_l("\u4E8C\u7EA7\uFF1A\u5B9E\u540D+\u5B9E\u4EBA+\u7F51\u8BC1\uFF08\u5F00\u53D1\u4E2D...\uFF09"),5:_l("\u4E00\u7EA7\uFF1A\u5B9E\u540D+\u5B9E\u4EBA+\u7F51\u8BC1+\u5B9E\u8BC1\uFF08\u5F00\u53D1\u4E2D...\uFF09")},D=[{title:_l("\u8282\u70B9\u5F00\u59CB\u65F6\u66F4\u65B0"),desc:_l("\u6D41\u7A0B\u8FDB\u5165\u6B64\u8282\u70B9\u4E14\u5BA1\u6279\u5F00\u59CB\u524D\uFF0C\u66F4\u65B0\u6570\u636E\u5BF9\u8C61\u7684\u5B57\u6BB5\u503C\uFF08\u9000\u56DE\u81F3\u6B64\u8282\u70B9\u4E5F\u4F1A\u89E6\u53D1\u66F4\u65B0\uFF09"),key:a.fh.BEFORE},{title:_l("\u901A\u8FC7\u540E\u66F4\u65B0"),desc:_l("\u8282\u70B9\u901A\u8FC7\u540E\uFF0C\u66F4\u65B0\u6570\u636E\u5BF9\u8C61\u7684\u5B57\u6BB5\u503C"),key:a.fh.PASS},{title:_l("\u5426\u51B3\u540E\u66F4\u65B0"),desc:_l("\u8282\u70B9\u5426\u51B3\u540E\uFF0C\u66F4\u65B0\u6570\u636E\u5BF9\u8C61\u7684\u5B57\u6BB5\u503C"),key:a.fh.OVERRULE},{title:_l("\u9000\u56DE\u540E\u66F4\u65B0"),desc:_l("\u8282\u70B9\u9000\u56DE\u540E\uFF0C\u66F4\u65B0\u6570\u636E\u5BF9\u8C61\u7684\u5B57\u6BB5\u503C"),key:a.fh.RETURN}];return v().isEmpty(o)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},o),icon:"icon-workflow_ea",bg:"BGViolet",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},e.createElement("div",{className:"Font13 bold"},_l("\u6570\u636E\u5BF9\u8C61")),e.createElement(fe.Z,{disabled:this.props.isApproval,appList:o.appList,selectNodeId:o.selectNodeId,selectNodeObj:o.selectNodeObj,onChange:this.onChange}),this.renderApprovalUser(),this.renderApprovalMode(),this.renderTabs(),u===1&&e.createElement(e.Fragment,null,this.renderApprovalSettings(),e.createElement("div",{className:"Font13 bold mTop25"},_l("\u8282\u70B9\u7ED3\u679C\u901A\u77E5\u53D1\u8D77\u4EBA")),this.renderMessage(),e.createElement("div",{className:"Font13 bold mTop25"},_l("\u5BA1\u6279\u610F\u89C1")),e.createElement("div",{className:"flexRow mTop15"},e.createElement("div",{className:"flex flexRow"},e.createElement(b.Z,{className:"InlineFlex",text:_l("\u901A\u8FC7\u65F6\u586B\u5199"),checked:!v().includes(o.auth.passTypeList,101),onClick:function(H){return n.opinionRequiredChange(!H,"passTypeList")}}),e.createElement(b.Z,{className:"InlineFlex mLeft25",text:_l("\u5FC5\u586B"),checked:v().includes(o.auth.passTypeList,100),onClick:function(H){return n.opinionRequiredChange(!H,"passTypeList",100)}})),e.createElement("div",{className:"flex flexRow"},e.createElement(b.Z,{className:"InlineFlex",text:_l("\u5426\u51B3/\u9000\u56DE\u65F6\u586B\u5199"),checked:!v().includes(o.auth.overruleTypeList,101),onClick:function(H){return n.opinionRequiredChange(!H,"overruleTypeList")}}),e.createElement(b.Z,{className:"InlineFlex mLeft25",text:_l("\u5FC5\u586B"),checked:v().includes(o.auth.overruleTypeList,100),onClick:function(H){return n.opinionRequiredChange(!H,"overruleTypeList",100)}}))),e.createElement(lr,{className:"mTop15 flexRow"},e.createElement("div",{className:"flex mRight20 ellipsis Font12"},_l("\u610F\u89C1\u6A21\u677F\uFF1A"),!(o.opinionTemplate.opinions[a.fh.PASS]||[]).length&&!(o.opinionTemplate.opinions[a.fh.OVERRULE]||[]).length?e.createElement("span",{className:"ThemeColor3 pointer ThemeHoverColor2",onClick:function(){return n.setState({showApprovalTemplate:!0})}},_l("\u672A\u8BBE\u7F6E")):_l("\u5DF2\u8BBE\u7F6E"),o.opinionTemplate.inputType===1?_l("\uFF08\u7528\u6237\u81EA\u7531\u8F93\u5165\uFF09"):_l("\uFF08\u53EA\u80FD\u9009\u62E9\u6A21\u677F\uFF09")),(!!(o.opinionTemplate.opinions[a.fh.PASS]||[]).length||!!(o.opinionTemplate.opinions[a.fh.OVERRULE]||[]).length)&&e.createElement(e.Fragment,null,e.createElement("span",{"data-tip":_l("\u5220\u9664\u6A21\u677F")},e.createElement(Q.Z,{type:"delete2",className:"Gray_9e Font14 pointer",onClick:function(){return n.updateSource({opinionTemplate:{inputType:o.opinionTemplate.inputType,opinions:{}}})}})),e.createElement(Q.Z,{type:"edit",className:"Gray_9e ThemeHoverColor3 Font14 pointer mLeft20",onClick:function(){return n.setState({showApprovalTemplate:!0})}}))),e.createElement("div",{className:"Font13 bold mTop25"},o.authTypeList.length===1?w[o.authTypeList[0].value]:_l("\u8BA4\u8BC1")),e.createElement("div",{className:"flexRow mTop15"},e.createElement(b.Z,{className:"InlineFlex flex",text:_l("\u901A\u8FC7\u65F6\u5FC5\u987B\u8BA4\u8BC1"),checked:!!o.auth.passTypeList.filter(function(G){return!n.checkHasOpinion(G)}).length,onClick:function(H){return n.authRequiredChange(!H,"passTypeList")}}),e.createElement(b.Z,{className:"InlineFlex flex",text:_l("\u5426\u51B3/\u9000\u56DE\u65F6\u5FC5\u987B\u8BA4\u8BC1"),checked:!!o.auth.overruleTypeList.filter(function(G){return!n.checkHasOpinion(G)}).length,onClick:function(H){return n.authRequiredChange(!H,"overruleTypeList")}})),o.authTypeList.length===1||o.auth.passTypeList.filter(function(G){return!n.checkHasOpinion(G)}).length+o.auth.overruleTypeList.filter(function(G){return!n.checkHasOpinion(G)}).length===0?null:e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop25"},_l("\u8BA4\u8BC1\u7B49\u7EA7")),e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:o.authTypeList.map(function(G){var H=G.value,De=G.disabled;return{value:H,text:w[H],disabled:De}}),value:o.auth.passTypeList.concat(o.auth.overruleTypeList).filter(function(G){return!n.checkHasOpinion(G)})[0],border:!0,onChange:this.authRankChange})),e.createElement("div",{className:"Font13 mTop25 bold"},_l("\u5B89\u5168")),e.createElement(b.Z,{className:"mTop15 flexRow alignItemsCenter",text:e.createElement("span",null,_l("\u767B\u5F55\u5BC6\u7801\u9A8C\u8BC1"),e.createElement(Rn.Z,{popupPlacement:"bottom",text:e.createElement("span",null,_l("\u542F\u7528\u540E\uFF0C\u7528\u6237\u8F93\u5165\u767B\u5F55\u5BC6\u7801\u540E\u624D\u53EF\u8FDB\u884C\u901A\u8FC7/\u5426\u51B3"))},e.createElement(Q.Z,{className:"Font16 Gray_9e mLeft5",style:{verticalAlign:"text-bottom"},icon:"info"}))),checked:o.encrypt,onClick:function(H){return n.updateSource({encrypt:!H},function(){n.updateFlowMapSource(a.fh.EMAIL,{batch:!1})})}}),e.createElement("div",{className:"Font13 bold mTop25"},_l("\u6309\u94AE\u540D\u79F0")),e.createElement(nn,{dataKey:"passBtnName",name:o.passBtnName,buttonName:_l("\u901A\u8FC7\u6309\u94AE"),onChange:this.updateSource}),e.createElement(nn,{dataKey:"overruleBtnName",name:o.overruleBtnName,buttonName:_l("\u5426\u51B3\u6309\u94AE"),onChange:this.updateSource}),o.isCallBack&&e.createElement(nn,{dataKey:"returnBtnName",name:o.returnBtnName,buttonName:_l("\u9000\u56DE\u6309\u94AE"),onChange:this.updateSource}),e.createElement("div",{className:"Font13 bold mTop25"},_l("\u5176\u4ED6")),this.renderSeniorSettings()),u===2&&e.createElement(e.Fragment,null,e.createElement("div",{className:"Gray_75 mTop15"},_l("\u8BBE\u7F6E\u5BA1\u6279\u65F6\u53EF\u4EE5\u67E5\u770B\u3001\u7F16\u8F91\u3001\u5FC5\u586B\u7684\u5B57\u6BB5\u3002\u8BBE\u4E3A\u6458\u8981\u7684\u5B57\u6BB5\u53EF\u4EE5\u5728\u6D41\u7A0B\u5F85\u529E\u5217\u8868\u548C\u90AE\u4EF6\u901A\u77E5\u4E2D\u76F4\u63A5\u663E\u793A\uFF0C\u4F7F\u5BA1\u6279\u4EBA\u65E0\u9700\u6253\u5F00\u8BE6\u60C5\u5373\u53EF\u5FEB\u901F\u5B8C\u6210\u5BA1\u6279\u3002"),e.createElement(q.Z,{type:3,text:_l("\u5E2E\u52A9"),className:"ThemeColor3 ThemeHoverColor2",href:"https://help.mingdao.com/worksheet/field-filter"})),o.selectNodeId?e.createElement("div",{className:"Font13 mTop15"},e.createElement(Na,{processId:this.props.processId,nodeId:this.props.selectNodeId,selectNodeId:o.selectNodeId,data:o.formProperties,addNotAllowView:o.addNotAllowView,updateSource:this.updateSource,showCard:!0})):e.createElement("div",{className:"Gray_9e Font13 flexRow flowDetailTips mTop15"},e.createElement("i",{className:"icon-task-setting_promet Font16"}),e.createElement("div",{className:"flex mLeft10"},_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u5BF9\u8C61\u540E\uFF0C\u624D\u80FD\u8BBE\u7F6E\u5B57\u6BB5\u6743\u9650")))),u===3&&e.createElement(e.Fragment,null,o.selectNodeId?D.map(function(G){var H=o.flowNodeMap[G.key]||{};return e.createElement(e.Fragment,{key:G.key},e.createElement("div",{className:"Font13 bold mTop25"},G.title),e.createElement("div",{className:"Font13 Gray_9e mTop10"},G.desc),e.createElement(Za.Z,{type:1,companyId:n.props.companyId,processId:n.props.processId,relationId:n.props.relationId,selectNodeId:n.props.selectNodeId,nodeId:H.selectNodeId,controls:H.controls.filter(function(De){return De.type!==29}),fields:H.fields,showCurrent:!0,filterType:G.key===a.fh.BEFORE?7:0,formulaMap:H.formulaMap,updateSource:function(je){var lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};return n.updateSource({flowNodeMap:C()({},o.flowNodeMap,(0,E.default)({},G.key,C()({},o.flowNodeMap[G.key],je)))},lt)}}))}):e.createElement("div",{className:"Gray_9e Font13 flexRow flowDetailTips mTop25"},e.createElement("i",{className:"icon-task-setting_promet Font16"}),e.createElement("div",{className:"flex mLeft10"},_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u5BF9\u8C61\u540E\uFF0C\u624D\u80FD\u8BBE\u7F6E\u6570\u636E\u66F4\u65B0"))))))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:o.selectNodeId&&(!!o.accounts.length&&o.multipleLevelType===0||o.multipleLevelType!==0),onSave:this.onSave})),d&&e.createElement(Rr,(0,h.default)({},this.props,{data:o,getCallBackNodeNames:this.getCallBackNodeNames,updateSource:this.updateSource,onClose:function(){return n.setState({showCallbackDialog:!1})}})),f&&e.createElement(Qa,(0,h.default)({},this.props,{data:o,selectMsgKey:f,updateSource:this.updateSource,onClose:function(){return n.setState({selectMsgKey:""})}})),p&&e.createElement(Ya.Z,{title:_l("\u610F\u89C1\u6A21\u677F"),description:_l("\u9884\u7F6E\u5E38\u7528\u7684\u610F\u89C1\u4F5C\u4E3A\u6A21\u677F\uFF0C\u5E2E\u52A9\u5BA1\u6279\u4EBA\u5FEB\u6377\u586B\u5199"),keys:[{key:a.fh.PASS,text:_l("\u901A\u8FC7\u65F6\u7684\u6A21\u677F")},{key:a.fh.OVERRULE,text:_l("\u5426\u51B3/\u9000\u56DE\u65F6\u7684\u6A21\u677F")}],opinionTemplate:o.opinionTemplate,onSave:function(H){return n.updateSource({opinionTemplate:H})},onClose:function(){return n.setState({showApprovalTemplate:!1})}}))}}]),F}(e.Component),Kr=t(45231),Br=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.accounts,p=o.selectNodeId,f=o.name,w=o.sendContent,D=o.formProperties,G=o.viewId,H=o.addNotAllowView,De=o.showTitle;if(!p){alert(_l("\u5FC5\u987B\u6307\u5B9A\u6570\u636E\u5BF9\u8C61"),2);return}if(!D.length&&!G){alert(_l("\u5FC5\u987B\u6307\u5B9A\u89C6\u56FE"),2);return}if(!u.length){alert(_l("\u5FC5\u987B\u6307\u5B9A\u901A\u77E5\u4EBA"),2);return}d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,name:f.trim(),selectNodeId:p,sendContent:w.trim(),accounts:u,formProperties:D,viewId:G,addNotAllowView:H,showTitle:w.trim()?De:!0}).then(function(je){n.props.updateNodeData(je),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.onChange=function(l){var o=n.state.data,d=v().find(o.appList,function(u){return u.nodeId===l});n.updateSource({selectNodeId:l,selectNodeObj:d,viewId:""}),n.getWorksheetInfo(d.appId)},n.state={data:{},saveRequest:!1,showSelectUserDialog:!1,views:[]},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n){var l=this,o=n.processId,d=n.selectNodeId,u=n.selectNodeType,p=n.isApproval,f=n.instanceId;z.Z.getNodeDetail({processId:o,nodeId:d,flowNodeType:u,instanceId:f}).then(function(w){l.setState({data:w}),w.appId&&l.getWorksheetInfo(w.appId),p&&!w.selectNodeId&&l.onChange(w.flowNodeList[0].nodeId)})}},{key:"renderContent",value:function(){var n=this,l=this.state,o=l.data,d=l.showSelectUserDialog,u=this.state.views.map(function(f){return{text:f.name,value:f.viewId,className:o.viewId===f.viewId?"ThemeColor3":""}}),p=v().find(u,function(f){return f.value===o.viewId});return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold"},_l("\u6570\u636E\u5BF9\u8C61")),e.createElement(fe.Z,{disabled:this.props.isApproval,smallBorder:!0,appList:o.appList,selectNodeId:o.selectNodeId,selectNodeObj:o.selectNodeObj,onChange:this.onChange}),o.selectNodeId&&!!o.formProperties.length&&e.createElement(e.Fragment,null,e.createElement("div",{className:"workflowDetailDesc pTop15 pBottom15 mTop20",style:{background:"rgba(255, 163, 64, 0.12)"}},e.createElement("div",{className:"Gray_9e mBottom5"},_l("\u65B0\u7248\u53D1\u9001\u8BB0\u5F55\u53EF\u4EE5\u9009\u62E9\u4E00\u4E2A\u89C6\u56FE\uFF0C\u6309\u7167\u6240\u9009\u89C6\u56FE\u914D\u7F6E\u7684\u663E\u793A\u5B57\u6BB5\u53D1\u9001\u3002\u5982\u679C\u901A\u77E5\u4EBA\u5206\u53D1\u4E86\u6B64\u89C6\u56FE\uFF0C\u53EF\u4EE5\u76F4\u63A5\u6309\u6743\u9650\u7F16\u8F91\u8BB0\u5F55\u3001\u6267\u884C\u81EA\u5B9A\u4E49\u52A8\u4F5C\u3002"),e.createElement("span",{style:{color:"#ffa340"}},_l("\u6CE8\u610F\uFF1A\u5207\u6362\u4E3A\u65B0\u65B9\u5F0F\u5E76\u4FDD\u5B58\u914D\u7F6E\u540E\uFF0C\u5C06\u65E0\u6CD5\u6062\u590D\u5230\u65E7\u7684\u914D\u7F6E\u65B9\u5F0F"))),e.createElement("span",{className:"ThemeColor3 ThemeHoverColor2 pointer",onClick:function(){return n.updateSource({formProperties:[]})}},_l("\u5207\u6362\u4E3A\u65B0\u7248\u914D\u7F6E\u65B9\u5F0F"))),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u8BBE\u7F6E\u5B57\u6BB5")),e.createElement(Na,{processId:this.props.processId,nodeId:this.props.selectNodeId,selectNodeId:o.selectNodeId,data:o.formProperties,addNotAllowView:o.addNotAllowView,updateSource:this.updateSource,hideTypes:[2,3]})),!o.formProperties.length&&e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop20"},_l("\u89C6\u56FE")),e.createElement("div",{className:"Font13 Gray_9e mTop5"},_l("\u6309\u7167\u6240\u9009\u89C6\u56FE\u914D\u7F6E\u7684\u663E\u793A\u5B57\u6BB5\u53D1\u9001\uFF0C\u5982\u679C\u901A\u77E5\u4EBA\u88AB\u5206\u53D1\u4E86\u6B64\u89C6\u56FE\uFF0C\u53EF\u4EE5\u76F4\u63A5\u6309\u6743\u9650\u7F16\u8F91\u8BB0\u5F55\u3001\u6267\u884C\u81EA\u5B9A\u4E49\u52A8\u4F5C")),e.createElement(Ie.Z,{className:R()("flowDropdown mTop10",{"errorBorder errorBG":o.viewId&&!!u.length&&!p}),isAppendToBody:!0,disabled:!o.selectNodeId,data:u,value:o.viewId,renderTitle:!o.viewId||!u.length?function(){return e.createElement("span",{className:"Gray_9e"},_l("\u8BF7\u9009\u62E9"))}:o.viewId&&!p?function(){return e.createElement("span",{className:"errorColor"},_l("\u89C6\u56FE\u65E0\u6548\u6216\u5DF2\u5220\u9664"))}:function(){return e.createElement("span",null,p.text)},border:!0,onChange:function(w){return n.updateSource({viewId:w})}})),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u6284\u9001\u4EBA")),e.createElement($n.Z,{companyId:this.props.companyId,appId:this.props.relationType===2?this.props.relationId:"",accounts:o.accounts,updateSource:this.updateSource}),e.createElement("div",{className:"flexRow mTop15 ThemeColor3 workflowDetailAddBtn",onClick:function(){return n.setState({showSelectUserDialog:!0})}},e.createElement("i",{className:"Font28 icon-task-add-member-circle mRight10"}),_l("\u6DFB\u52A0\u6284\u9001\u4EBA"),e.createElement(gn.Z,{appId:this.props.relationType===2?this.props.relationId:"",visible:d,companyId:this.props.companyId,processId:this.props.processId,nodeId:this.props.selectNodeId,unique:!1,accounts:o.accounts,updateSource:this.updateSource,onClose:function(){return n.setState({showSelectUserDialog:!1})}})),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u901A\u77E5\u5185\u5BB9")),e.createElement("div",{className:"Font13 Gray_9e mTop5"},_l("\u53EF\u4E0D\u8BBE\uFF0C\u9ED8\u8BA4\u663E\u793A\u8BB0\u5F55\u6807\u9898\u3002\u8BBE\u7F6E\u540E\uFF0C\u663E\u793A\u8BBE\u7F6E\u7684\u901A\u77E5\u5185\u5BB9\u548C\u8BB0\u5F55\u6807\u9898\uFF08\u53EF\u9009\uFF09")),e.createElement(ce.Z,{className:"minH100",projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,type:2,content:o.sendContent,formulaMap:o.formulaMap,onChange:function(w,D,G){return n.updateSource({sendContent:D})},updateSource:this.updateSource}),e.createElement("div",{className:"mTop10"},e.createElement(b.Z,{className:"InlineFlex",disabled:!o.sendContent,text:_l("\u663E\u793A\u8BB0\u5F55\u6807\u9898"),checked:o.showTitle||!o.sendContent,onClick:function(w){return n.updateSource({showTitle:!w})}})))}},{key:"getWorksheetInfo",value:function(n){var l=this;Kr.Z.getWorksheetInfo({worksheetId:n,getViews:!0}).then(function(o){o.resultCode===1&&l.setState({views:o.views})})}},{key:"render",value:function(){var n=this.state.data;return v().isEmpty(n)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},n),icon:"icon-workflow_notice",bg:"BGBlue",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},this.renderContent()))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:!!n.accounts.length&&n.selectNodeId,onSave:this.onSave})))}}]),F}(e.Component),kr=function(ne){(0,k.default)(F,ne);function F(){return(0,j.default)(this,F),(0,I.default)(this,(F.__proto__||Ne()(F)).apply(this,arguments))}return(0,L.default)(F,[{key:"render",value:function(){var n=this.props,l=n.data,o=n.SelectNodeObjectChange,d=n.isApproval;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold"},l.appType===a.IF.PROCESS?_l("\u66F4\u65B0\u53C2\u6570"):_l("\u9009\u62E9\u66F4\u65B0\u5BF9\u8C61")),l.appType!==a.IF.PROCESS&&e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 Gray_9e mTop10"},_l("\u5F53\u524D\u6D41\u7A0B\u4E2D\u7684\u8282\u70B9\u5BF9\u8C61"),l.appType===a.IF.EXTERNAL_USER&&_l("\uFF08\u83B7\u53D6\u4EBA\u5458\u6570\u636E\u8282\u70B9\uFF09")),e.createElement(fe.Z,{disabled:d,appList:l.flowNodeList,selectNodeId:l.selectNodeId,selectNodeObj:l.selectNodeObj,onChange:function(p){return o(p,!0)}}),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u66F4\u65B0\u5B57\u6BB5"))),(l.selectNodeId||l.appType===a.IF.PROCESS)&&e.createElement(Za.Z,{type:l.appType===a.IF.PROCESS?2:1,companyId:this.props.companyId,relationId:this.props.relationId,processId:this.props.processId,selectNodeId:this.props.selectNodeId,nodeId:l.selectNodeId,controls:l.controls,fields:l.fields,formulaMap:l.formulaMap,updateSource:this.props.updateSource}))}}]),F}(e.Component),ja=t(3495),ur=t(23928),vr=function(F){return F.appList.filter(function(B){return!B.otherApkId}).map(function(B){var n=B.name,l=B.id;return{text:n,value:l}})},Pr=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.switchWorksheet=function(l,o){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",p=n.props,f=p.updateSource,w=p.getAppTemplateControls,D=v().cloneDeep(n.props.data.appList);d&&(v().remove(D,function(G){return G.id===l}),D.push({id:l,name:o,otherApkId:d,otherApkName:u})),f({appId:l,appList:D,fields:[],controls:[]},function(){w("",l)})},n.state={showOtherWorksheet:!1,isBatch:!!B.data.selectNodeId},n}return(0,L.default)(F,[{key:"componentWillReceiveProps",value:function(n,l){n.data.selectNodeId!==this.props.data.selectNodeId&&this.setState({isBatch:!!n.data.selectNodeId})}},{key:"render",value:function(){var n=this,l=this.state,o=l.showOtherWorksheet,d=l.isBatch,u=this.props,p=u.data,f=u.updateSource,w=p.appList.find(function(H){var De=H.id;return De===p.appId}),D=[].concat(p.fields.filter(function(H){return H.type!==29}),p.fields.filter(function(H){return H.type===29})),G=[{text:_l("\u5176\u5B83\u5E94\u7528\u4E0B\u7684\u5DE5\u4F5C\u8868"),value:"other",className:"Gray_75"}];return e.createElement(e.Fragment,null,p.appType===a.IF.EXTERNAL_USER&&e.createElement("div",{className:"Font14 Gray_75 workflowDetailDesc mBottom20"},md.global.Config.IsPlatformLocal?_l("\u5411\u6307\u5B9A\u624B\u673A\u53F7\u53D1\u9001\u77ED\u4FE1\u9080\u8BF7\u7528\u6237\u6CE8\u518C\u5916\u90E8\u95E8\u6237\uFF0C\u5E76\u5728\u5916\u90E8\u95E8\u6237\u4E0B\u81EA\u52A8\u521B\u5EFA\u4E00\u6761\u5BF9\u5E94\u7684\u7528\u6237\u6570\u636E\uFF08\u6210\u5458\u72B6\u6001\u4E3A\u201C\u672A\u6FC0\u6D3B\u201D\uFF09\u3002\u77ED\u4FE10.05\u5143/\u6761\uFF0C\u81EA\u52A8\u4ECE\u4F01\u4E1A\u8D26\u52A1\u4E2D\u5FC3\u6263\u8D39\u3002"):_l("\u5411\u6307\u5B9A\u624B\u673A\u53F7\u53D1\u9001\u77ED\u4FE1\u9080\u8BF7\u7528\u6237\u6CE8\u518C\u5916\u90E8\u95E8\u6237\uFF0C\u5E76\u5728\u5916\u90E8\u95E8\u6237\u4E0B\u81EA\u52A8\u521B\u5EFA\u4E00\u6761\u5BF9\u5E94\u7684\u7528\u6237\u6570\u636E\uFF08\u6210\u5458\u72B6\u6001\u4E3A\u201C\u672A\u6FC0\u6D3B\u201D\uFF09\u3002")),e.createElement("div",{className:"Font13 bold"},p.appType===a.IF.SHEET?_l("\u9009\u62E9\u5DE5\u4F5C\u8868"):p.appType===a.IF.EXTERNAL_USER?_l("\u5E94\u7528"):_l("\u9009\u62E9\u9879\u76EE")),p.appType!==a.IF.EXTERNAL_USER&&e.createElement(Ie.Z,{className:R()("flowDropdown mTop10",{"errorBorder errorBG":p.appId&&!w}),data:p.appType===a.IF.SHEET?[vr(p),this.props.relationType===a.RA.NETWORK?[]:G]:vr(p),value:p.appId,renderTitle:p.appId?p.appId&&!w?function(){return e.createElement("span",{className:"errorColor"},p.appType===a.IF.SHEET?_l("\u5DE5\u4F5C\u8868\u65E0\u6548\u6216\u5DF2\u5220\u9664"):_l("\u9879\u76EE\u65E0\u6548\u6216\u5DF2\u5220\u9664"))}:function(){return e.createElement(e.Fragment,null,e.createElement("span",null,w.name),w.otherApkName&&e.createElement("span",{className:"Gray_9e"},"\uFF08",w.otherApkName,"\uFF09"))}:function(){return e.createElement("span",{className:"Gray_9e"},_l("\u8BF7\u9009\u62E9"))},border:!0,openSearch:!0,onChange:function(De){De==="other"?n.setState({showOtherWorksheet:!0}):n.switchWorksheet(De)}}),p.appType===a.IF.EXTERNAL_USER&&e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 mTop10"},(p.appList.find(function(H){return H.id===p.appId})||{name:_l("\u5E94\u7528\u5DF2\u5220\u9664")}).name),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u9080\u8BF7\u65B9\u5F0F"))),v().includes([a.IF.SHEET,a.IF.EXTERNAL_USER],p.appType)&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20"},e.createElement(le.Z,{text:p.appType===a.IF.EXTERNAL_USER?_l("\u9080\u8BF71\u540D\u7528\u6237"):_l("\u65B0\u589E\u4E00\u6761\u8BB0\u5F55"),checked:!d,onClick:function(){n.setState({isBatch:!1}),f({selectNodeId:""})}})),e.createElement("div",{className:"mTop10"},e.createElement(le.Z,{text:p.appType===a.IF.EXTERNAL_USER?_l("\u57FA\u4E8E\u591A\u6761\u6570\u636E\u9080\u8BF7\u591A\u540D\u7528\u6237"):_l("\u57FA\u4E8E\u591A\u6761\u8BB0\u5F55\u9010\u6761\u65B0\u589E\u8BB0\u5F55"),checked:d,onClick:function(){return n.setState({isBatch:!0})}}))),d&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u9009\u62E9\u6570\u636E\u6E90")),e.createElement(fe.Z,{smallBorder:!0,appList:p.flowNodeList,selectNodeId:p.selectNodeId,selectNodeObj:p.selectNodeObj,onChange:function(De){var je=v().find(p.flowNodeList,function(lt){return lt.nodeId===De});f({selectNodeId:De,selectNodeObj:je})}})),e.createElement("div",{className:"Font13 bold mTop20"},p.appType===a.IF.SHEET?_l("\u65B0\u589E\u8BB0\u5F55"):p.appType===a.IF.EXTERNAL_USER?_l("\u586B\u5145\u7528\u6237\u4FE1\u606F"):_l("\u521B\u5EFA\u4EFB\u52A1")),D.map(function(H,De){var je=v().find(p.controls,function(un){return un.controlId===H.fieldId})||{},lt=je.controlName,Ft=je.sourceEntityName;return e.createElement("div",{key:H.fieldId,className:"relative"},e.createElement("div",{className:"flexRow alignItemsCenter mTop15"},e.createElement("div",{className:"ellipsis Font13 flex mRight20"},lt,(je.required||v().includes(["portal_role"],H.fieldId))&&e.createElement("span",{className:"mLeft5 red"},"*"),je.type===29&&e.createElement("span",{className:"Gray_9e"},"\uFF08"+_l("\u5DE5\u4F5C\u8868")+"\u201C"+Ft+"\u201D\uFF09")),p.appType===a.IF.SHEET&&v().includes([9,10,11],H.type)&&H.fieldValueId&&e.createElement(ja.Z,{checked:H.allowAddOptions||!1,fields:D,index:De,updateSource:f})),H.fieldId==="portal_mobile"&&e.createElement("div",{className:"Gray_9e mTop5"},md.global.Config.IsPlatformLocal?_l("\u6839\u636E\u6B64\u5B57\u6BB5\u53D1\u9001\u9080\u8BF7\u77ED\u4FE1\uFF0C\u77ED\u4FE10.05\u5143/\u6761"):_l("\u6839\u636E\u6B64\u5B57\u6BB5\u53D1\u9001\u9080\u8BF7\u77ED\u4FE1")),e.createElement(Gt.Z,{companyId:n.props.companyId,relationId:n.props.relationId,processId:n.props.processId,selectNodeId:n.props.selectNodeId,sourceNodeId:p.selectNodeId,controls:p.controls,formulaMap:p.formulaMap,fields:D,updateSource:f,item:H,i:De}))}),o&&e.createElement(ur.Z,{projectId:this.props.companyId,worksheetType:0,selectedAppId:this.props.relationId,selectedWorksheetId:p.appId,visible:!0,onOk:function(De,je,lt){var Ft=n.props.relationId===De;n.switchWorksheet(je,lt.workSheetName,!Ft&&De,!Ft&&lt.appName)},onHide:function(){return n.setState({showOtherWorksheet:!1})}}))}}]),F}(e.Component),Gr=function(ne){(0,k.default)(F,ne);function F(){var B,n,l,o;(0,j.default)(this,F);for(var d=arguments.length,u=Array(d),p=0;p<d;p++)u[p]=arguments[p];return o=(n=(l=(0,I.default)(this,(B=F.__proto__||Ne()(F)).call.apply(B,[this].concat(u))),l),l.onChange=function(f){var w=l.props,D=w.data,G=w.SelectNodeObjectChange,H=v().find(D.flowNodeList,function(De){return De.nodeId===f});D.selectNodeObj.appId&&D.selectNodeObj.appId!==H.appId?te.Z.confirm({title:e.createElement("span",{style:{color:"#f44336"}},_l("\u6CE8\u610F\uFF01\u4F60\u5C06\u8981\u66F4\u6539\u8282\u70B9\u5BF9\u8C61\u7684\u8868\u548C\u539F\u6765\u4E0D\u4E00\u81F4")),description:_l("\u66F4\u6539\u65B0\u7684\u8282\u70B9\u5BF9\u8C61\u7684\u5DE5\u4F5C\u8868\u540E\uFF0C\u6240\u6709\u4F7F\u7528\u539F\u8868\u683C\u6570\u636E\u7684\u8282\u70B9\u914D\u7F6E\u90FD\u5C06\u91CD\u7F6E\uFF0C\u4E14\u65E0\u6CD5\u6062\u590D\u3002\u8BF7\u786E\u8BA4\u4F60\u8981\u6267\u884C\u6B64\u64CD\u4F5C"),okText:_l("\u786E\u8BA4\u66F4\u6539"),onOk:function(){G(f)}}):G(f)},n),(0,I.default)(l,o)}return(0,L.default)(F,[{key:"render",value:function(){var n=this.props,l=n.data,o=n.updateSource;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold"},_l("\u9009\u62E9\u5220\u9664\u5BF9\u8C61")),e.createElement("div",{className:"Font13 Gray_9e mTop10"},_l("\u5F53\u524D\u6D41\u7A0B\u4E2D\u7684\u8282\u70B9\u5BF9\u8C61")),e.createElement(fe.Z,{appList:l.flowNodeList,selectNodeId:l.selectNodeId,selectNodeObj:l.selectNodeObj,onChange:this.onChange}),e.createElement("div",{className:"mTop20 flexRow"},e.createElement(b.Z,{className:"InlineFlex",text:_l("\u5F7B\u5E95\u5220\u9664\u8BB0\u5F55\uFF0C\u4E0D\u653E\u5165\u56DE\u6536\u7AD9"),checked:l.destroy,onClick:function(u){return o({destroy:!u})}})),e.createElement("div",{className:"Gray_9e mTop5 mLeft26"},_l("\u5F7B\u5E95\u5220\u9664\u540E\u6570\u636E\u4E0D\u53EF\u6062\u590D\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C")))}}]),F}(e.Component),cr=t(50732);const Cr=function(ne){var F=ne.companyId,B=ne.relationId,n=ne.processId,l=ne.selectNodeId,o=ne.data,d=ne.updateSource,u=ne.filterText,p=ne.sortText,f=ne.showRandom,w=f===void 0?!1:f,D=ne.openNewFilter,G=D===void 0?!1:D,H=ne.disabledNewFilter,De=H===void 0?!1:H,je=ne.filterEncryptCondition,lt=je===void 0?!1:je;return e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u7B5B\u9009\u6761\u4EF6")),u&&e.createElement("div",{className:"Gray_75 mTop5"},u),o.conditions.length||o.filters.length?e.createElement(cn.Z,{projectId:F,relationId:B,processId:n,selectNodeId:l,openNewFilter:G,controls:o.controls,data:G?o.filters:o.conditions,updateSource:function(un){return d(G?{filters:un}:{conditions:un})},singleCondition:!G,filterEncryptCondition:lt}):e.createElement("div",{className:"addActionBtn mTop15"},e.createElement("span",{className:"ThemeBorderColor3",onClick:function(){return d(G?{filters:[{conditions:[[{}]],spliceType:2}]}:{conditions:[[{}]]})}},e.createElement("i",{className:"icon-add Font16"}),_l("\u7B5B\u9009\u6761\u4EF6"))),!!o.conditions.length&&!De&&e.createElement("div",{className:"workflowDetailDesc pTop15 pBottom15 mTop20",style:{background:"rgba(255, 163, 64, 0.12)"}},e.createElement("div",{className:"Gray_9e mBottom5"},_l("\u7B5B\u9009\u5668\u73B0\u5DF2\u652F\u6301\u4E14\u6216\u7EC4\u5408\uFF1B\u624B\u52A8\u5207\u6362\u540E\uFF0C\u4E0D\u4F1A\u4E22\u5931\u60A8\u73B0\u6709\u7684\u914D\u7F6E\uFF0C\u53EF\u4EE5\u76F4\u63A5\u5728\u73B0\u6709\u7B5B\u9009\u6761\u4EF6\u7684\u57FA\u7840\u4E0A\u8FDB\u4E00\u6B65\u914D\u7F6E")),e.createElement("span",{className:"ThemeColor3 ThemeHoverColor2 pointer",onClick:function(){return d({conditions:[],filters:(0,N.cA)(o.conditions)})}},_l("\u4F7F\u7528\u652F\u6301\u4E14\u6216\u7EC4\u5408\u7684\u7B5B\u9009\u5668"))),e.createElement("div",{className:"mTop20 flexRow"},e.createElement("div",{className:"flex bold"},_l("\u6392\u5E8F\u89C4\u5219")),w&&e.createElement(b.Z,{className:"flexRow",text:_l("\u5FFD\u7565\u6392\u5E8F\u89C4\u5219\uFF0C\u968F\u673A\u83B7\u53D6\u4E00\u6761"),checked:o.random,onClick:function(un){return d({random:!un})}})),p&&e.createElement("div",{className:"Gray_75 mTop5"},p),e.createElement(cr.Z,{sorts:o.sorts,controls:o.controls,updateSource:d}))},Zr=function(ne){var F=ne.executeType,B=ne.switchExecuteType,n=ne.allowAdd,l=n===void 0?!1:n,o=ne.nodeType,d=[{text:_l("\u7EE7\u7EED\u6267\u884C"),value:2,desc:o===a.QZ.WEBHOOK?_l("\u4E4B\u540E\u8282\u70B9\u5728\u4F7F\u7528\u672C\u8282\u70B9\u5BF9\u8C61\u6216\u6570\u636E\u65F6\u5C06\u8DF3\u8FC7\u65E0\u6CD5\u5339\u914D\u503C\u7684\u9879"):_l("\u4E4B\u540E\u8282\u70B9\u5728\u4F7F\u7528\u672C\u8282\u70B9\u5BF9\u8C61\u6216\u6570\u636E\u65F6\u5C06\u8DF3\u8FC7\u6267\u884C")},{text:_l("\u5728\u5DE5\u4F5C\u8868\u4E2D\u65B0\u589E\u8BB0\u5F55\u540E\u7EE7\u7EED\u6267\u884C"),value:1},{text:v().includes([a.QZ.WEBHOOK,a.QZ.JSON_PARSE],o)?_l("\u4E2D\u6B62\u6D41\u7A0B"):_l("\u4E2D\u6B62\u6D41\u7A0B\uFF0C\u6216\u7EE7\u7EED\u6267\u884C\u67E5\u627E\u7ED3\u679C\u5206\u652F"),value:0}];return l||v().remove(d,function(u){return u.value===1}),e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},o===a.QZ.WEBHOOK?_l("\u8BF7\u6C42\u8D85\u65F6\u6216\u8BF7\u6C42\u5931\u8D25\u65F6"):o===a.QZ.JSON_PARSE?_l("\u89E6\u53D1\u9519\u8BEF\u65F6"):_l("\u672A\u83B7\u53D6\u5230\u6570\u636E\u65F6")),d.map(function(u){return e.createElement("div",{className:"mTop15",key:u.value},e.createElement(le.Z,{text:u.text,checked:F===u.value,onClick:function(){return B(u.value)}}),u.desc&&e.createElement("div",{className:"mTop5 mLeft30 Gray_9e"},u.desc))}))};var ar=function(ne){(0,k.default)(F,ne);function F(){var B,n,l,o;(0,j.default)(this,F);for(var d=arguments.length,u=Array(d),p=0;p<d;p++)u[p]=arguments[p];return o=(n=(l=(0,I.default)(this,(B=F.__proto__||Ne()(F)).call.apply(B,[this].concat(u))),l),l.getWorksheetFields=function(f){var w=l.props,D=w.data,G=w.updateSource;z.Z.getStartEventDeploy({appId:f,appType:D.appType}).then(function(H){G({relationControls:H.controls})})},n),(0,I.default)(l,o)}return(0,L.default)(F,[{key:"renderRelationTitle",value:function(n){return e.createElement(e.Fragment,null,e.createElement("span",null,(n||{}).controlName),e.createElement("span",{className:"Gray_9e mRight5"},_l("\uFF08\u5173\u8054\u8868\u201C%0\u201D\uFF09",(n||{}).sourceEntityName)))}},{key:"renderRelationContent",value:function(){var n=this,l=this.props,o=l.data,d=l.updateSource,u=o.controls.map(function(p){return{text:n.renderRelationTitle(p),value:p.controlId,searchText:p.controlName,disabled:!!v().find(o.fields,function(f){return f.fieldId===p.controlId})}});return e.createElement(Ie.Z,{className:"flowDropdown mTop10",maxHeight:280,data:u,value:o.fields.length||void 0,openSearch:!0,renderTitle:function(){return!!o.fields.length&&!!o.controls.length&&n.renderRelationTitle(v().find(o.controls,function(f){return f.controlId===o.fields[0].fieldId}))},border:!0,noData:_l("\u6307\u5B9A\u7684\u8282\u70B9\u5BF9\u8C61\u4E2D\uFF0C\u6CA1\u6709\u5173\u8054\u4ED6\u8868\u5B57\u6BB5"),onChange:function(f){n.getWorksheetFields(o.controls.find(function(w){return w.controlId===f}).dataSource),d({fields:[{fieldId:f}]})}})}},{key:"render",value:function(){var n=this.props,l=n.data,o=n.SelectNodeObjectChange,d=n.updateSource;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Gray_75 workflowDetailDesc pTop15 pBottom15"},_l("\u57FA\u4E8E\u4E00\u79CD\u83B7\u53D6\u65B9\u5F0F\uFF0C\u901A\u8FC7\u7B5B\u9009\u6761\u4EF6\u548C\u6392\u5E8F\u89C4\u5219\u83B7\u5F97\u7B26\u5408\u6761\u4EF6\u7684\u552F\u4E00\u6570\u636E\uFF0C\u4F9B\u6D41\u7A0B\u4E2D\u7684\u5176\u4ED6\u8282\u70B9\u4F7F\u7528\u3002")),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u9009\u62E9\u83B7\u53D6\u5BF9\u8C61")),e.createElement("div",{className:"Font13 Gray_9e mTop10"},_l("\u5F53\u524D\u6D41\u7A0B\u4E2D\u7684\u8282\u70B9\u5BF9\u8C61")),e.createElement(fe.Z,{appList:l.flowNodeList,selectNodeId:l.selectNodeId,selectNodeObj:l.selectNodeObj,onChange:o}),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u9009\u62E9\u5173\u8054\u7C7B\u578B\u5B57\u6BB5")),e.createElement("div",{className:"Font13 Gray_9e mTop10"},_l("\u7CFB\u7EDF\u5C06\u8F93\u51FA\u6B64\u5B57\u6BB5\u4E2D\u6240\u5173\u8054\u7684\u7B2C\u4E00\u6761\u8BB0\u5F55\uFF0C\u4F9B\u6D41\u7A0B\u4E2D\u5176\u4ED6\u8282\u70B9\u4F7F\u7528")),l.selectNodeId&&this.renderRelationContent(),!!l.fields.length&&e.createElement(e.Fragment,null,e.createElement(Cr,{companyId:this.props.companyId,relationId:this.props.relationId,processId:this.props.processId,selectNodeId:this.props.selectNodeId,openNewFilter:!l.conditions.length,data:C()({},l,{controls:l.relationControls}),updateSource:d,showRandom:!0,filterText:_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u67E5\u627E\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u3002\u5982\u679C\u672A\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6\u5219\u8868\u793A\u53EA\u901A\u8FC7\u6392\u5E8F\u89C4\u5219\u4ECE\u6240\u6709\u8BB0\u5F55\u4E2D\u83B7\u5F97\u552F\u4E00\u6570\u636E"),sortText:_l("\u5F53\u67E5\u627E\u5230\u591A\u4E2A\u6570\u636E\u65F6\uFF0C\u5C06\u6309\u7167\u4EE5\u4E0B\u6392\u5E8F\u89C4\u5219\u83B7\u5F97\u7B2C\u4E00\u6761\u6570\u636E\u3002\u5982\u679C\u672A\u8BBE\u7F6E\u89C4\u5219\uFF0C\u6309\u7167\u5B57\u6BB5\u914D\u7F6E\u7684\u6392\u5E8F\u89C4\u5219\u8FD4\u56DE\u7B2C\u4E00\u6761\u6570\u636E"),filterEncryptCondition:!0}),e.createElement(Zr,{executeType:l.executeType,switchExecuteType:function(p){return d({executeType:p})}})))}}]),F}(e.Component),mo=t(97779);const Oo=function(ne){var F=ne.relationId,B=ne.data,n=ne.updateSource,l=function(u,p){var f=[{text:_l("\u8BBE\u4E3A"),value:0},{text:_l("\u589E\u52A0"),value:1},{text:_l("\u51CF\u5C11"),value:2}];return u.fieldId&&u.type===6?e.createElement(Ie.Z,{className:"flowAddTypeDropdown",data:f,value:u.addType,onChange:function(D){return o(D,p)}}):e.createElement("div",{className:"Gray_9e",style:{lineHeight:"20px"}},_l("\u8BBE\u4E3A"))},o=function(u,p){var f=v().cloneDeep(B.fields);f[p].addType=u,n({fields:f})};return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold"},_l("\u66F4\u65B0\u53D8\u91CF")),e.createElement("div",{className:"mTop20 Gray_9e"},_l("\u5C06\u53D8\u91CF")),!B.fields.length&&e.createElement("div",{className:"inlineFlexRow mTop12 ThemeColor3 workflowDetailAddBtn",onClick:function(){return(0,mo.Z)({projectId:ne.companyId,appId:F,filterNoEdit:!0,onOk:function(p){var f=p.id,w=p.controlType,D=p.name,G=p.sourceType;n({fields:[{addType:0,fieldId:f,fieldName:D,type:w,enumDefault:0,fieldValue:v().includes([26,27],w)?"[]":"",fieldValueId:"",nodeId:"",sourceControlType:G}]})}})}},e.createElement("i",{className:"Font28 icon-task-add-member-circle mRight10"}),_l("\u9009\u62E9\u5168\u5C40\u53D8\u91CF")),B.fields.map(function(d,u){return e.createElement(e.Fragment,null,e.createElement("ul",{className:"flowDetailMembers"},e.createElement("li",{className:"flexRow"},e.createElement(Z.Z,{flowNodeType:a.QZ.ACTION,appType:a.IF.GLOBAL_VARIABLE,nodeName:(0,N.iQ)(a.uT,d.sourceControlType),controlId:d.fieldId,controlName:d.fieldName}),e.createElement("span",{className:"mLeft5 flowDetailMemberDel","data-tip":_l("\u522A\u9664"),onClick:function(){return n({fields:[]})}},e.createElement("i",{className:"icon-delete Font18"})))),e.createElement("div",{className:"mTop10 flexRow alignItemsCenter"},e.createElement("div",{className:"flex"},l(d,u))),e.createElement(Gt.Z,{showClear:!0,companyId:ne.companyId,relationId:ne.relationId,processId:ne.processId,selectNodeId:ne.selectNodeId,controls:[],formulaMap:B.formulaMap,fields:B.fields,updateSource:n,item:d,i:u}))}))},Ho=function(ne){var F=ne.data,B=ne.updateSource;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font14 Gray_75 workflowDetailDesc mBottom20"},F.actionId===a.gp.ADD?_l("\u521B\u5EFA\u4E00\u4E2A\u7CFB\u7EDF\u5185\u65E5\u7A0B\u3002\u53EF\u540C\u65F6\u751F\u6210\u4E00\u4E2AICS\u6587\u4EF6\u5728\u5176\u4ED6\u8282\u70B9\u4E2D\u4F7F\u7528"):_l("\u4EC5\u751F\u6210\u4E00\u4E2A\u65E5\u7A0BICS\u6587\u4EF6\uFF0C\u5728\u53D1\u9001\u90AE\u4EF6\u7B49\u8282\u70B9\u4E2D\u4F5C\u4E3A\u9644\u4EF6\u4F7F\u7528\u3002\u901A\u8FC7\u6B64\u6587\u4EF6\u53EF\u6DFB\u52A0\u65E5\u7A0B\u5230\u4E2A\u4EBA\u65E5\u5386")),F.fields.map(function(n,l){var o=v().find(F.controls,function(d){return d.controlId===n.fieldId})||{};return e.createElement("div",{key:n.fieldId,className:"relative"},e.createElement("div",{className:"flexRow alignItemsCenter mTop15"},e.createElement("div",{className:"ellipsis Font13 flex mRight20"},o.controlName,o.required&&e.createElement("span",{className:"mLeft5 red"},"*"))),e.createElement(Gt.Z,{companyId:ne.companyId,relationId:ne.relationId,processId:ne.processId,selectNodeId:ne.selectNodeId,sourceNodeId:F.selectNodeId,controls:F.controls,formulaMap:F.formulaMap,fields:F.fields,updateSource:B,item:n,i:l}))}))};var Ko=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.getAppTemplateControls=function(l,o){var d=n.state.data;z.Z.getAppTemplateControls({processId:n.props.processId,nodeId:n.props.selectNodeId,selectNodeId:l,appId:o,appType:d.appType}).then(function(u){n.updateSource({controls:u},function(){d.actionId===a.gp.ADD&&n.changeFields(u)})})},n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.name,p=o.selectNodeId,f=o.appId,w=o.appType,D=o.fields,G=o.actionId,H=o.sourceAppId,De=o.sourceAppType,je=o.conditions,lt=o.sorts,Ft=o.executeType,un=o.random,dn=o.destroy,Hn=o.filters,ca=Hn===void 0?[]:Hn,da=!1;if(G===a.gp.ADD&&!f&&w!==a.IF.CALENDAR){alert(_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u5DE5\u4F5C\u8868"),2);return}else if(G!==a.gp.ADD&&!p&&!v().includes([a.IF.PROCESS,a.IF.CALENDAR],o.appType)){alert(_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u5BF9\u8C61"),2);return}if((0,N.lX)(je)){alert(_l("\u7B5B\u9009\u6761\u4EF6\u7684\u5224\u65AD\u503C\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if(v().includes([a.gp.ADD,a.gp.CREATE_FILE],G)&&(o.controls.forEach(function(Me){(Me.required||v().includes(["portal_role"],Me.controlId))&&D.forEach(function(nt){Me.controlId===nt.fieldId&&!nt.nodeId&&!nt.fieldValue&&!nt.fieldValueId&&da++})}),da>0)){alert(_l("\u6709\u5FC5\u586B\u5B57\u6BB5\u672A\u586B\u5199"),2);return}if(ca.length&&(ca.forEach(function(Me){(0,N.lX)(Me.conditions)&&(da=!0)}),da)){alert(_l("\u7B5B\u9009\u6761\u4EF6\u7684\u5224\u65AD\u503C\u4E0D\u80FD\u4E3A\u7A7A"),2);return}d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,actionId:G,name:u.trim(),selectNodeId:p,appId:f,appType:w,fields:w===a.IF.CALENDAR?n.handleCalendarDefault(D):D,sourceAppId:H,sourceAppType:De,operateCondition:je,sorts:lt,executeType:Ft,random:un,destroy:dn,filters:ca}).then(function(Me){n.props.updateNodeData(Me),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.SelectNodeObjectChange=function(l,o){var d=n.state.data,u=v().find(d.flowNodeList,function(p){return p.nodeId===l});n.updateSource({selectNodeId:l,selectNodeObj:u,controls:[],fields:o?[{fieldId:"",type:0,fieldValue:"",fieldValueId:"",nodeId:""}]:[]},function(){d.actionId!==a.gp.DELETE&&n.getAppTemplateControls(l,u.appId)})},n.changeFields=function(l){var o=[],d=l.filter(function(f){return f.type===29}),u=l.filter(function(f){return f.type!==29}),p=[].concat(u,d);p.forEach(function(f){o.push({fieldId:f.controlId,type:f.type,enumDefault:f.enumDefault,nodeId:"",nodeName:"",fieldValueId:"",fieldValueName:"",fieldValue:f.type===26||f.type===27?"[]":""})}),n.updateSource({fields:o})},n.state={data:{},saveRequest:!1,cacheKey:+new Date},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n,l){var o=this,d=n.processId,u=n.selectNodeId,p=n.selectNodeType,f=n.isApproval,w=n.instanceId;z.Z.getNodeDetail({processId:d,nodeId:u,flowNodeType:p,selectNodeId:l,instanceId:w}).then(function(D){D.appType===a.IF.CALENDAR&&(D.fields=o.handleCalendarDefault(D.fields)),o.setState({data:D,cacheKey:+new Date}),f&&!D.selectNodeId&&o.SelectNodeObjectChange(D.flowNodeList[0].nodeId)})}},{key:"handleCalendarDefault",value:function(n){return n.map(function(l){return v().includes(["is_all_day","is_private","create_file"],l.fieldId)&&!l.fieldValue&&!l.fieldValueId&&(l.fieldValue="0"),l.fieldId==="remind_time"&&!l.fieldValue&&!l.fieldValueId&&(l.fieldValue="15"),l})}},{key:"renderContent",value:function(){var n=this.state,l=n.data,o=n.cacheKey;if(l.appType===a.IF.CALENDAR)return e.createElement(Ho,(0,h.default)({key:o},this.props,{data:l,updateSource:this.updateSource}));if(l.actionId===a.gp.ADD)return e.createElement(Pr,(0,h.default)({key:o},this.props,{data:l,SelectNodeObjectChange:this.SelectNodeObjectChange,updateSource:this.updateSource,getAppTemplateControls:this.getAppTemplateControls}));if(l.appType===a.IF.GLOBAL_VARIABLE)return e.createElement(Oo,(0,h.default)({},this.props,{data:l,updateSource:this.updateSource}));if(l.actionId===a.gp.EDIT)return e.createElement(kr,(0,h.default)({key:o},this.props,{data:l,SelectNodeObjectChange:this.SelectNodeObjectChange,updateSource:this.updateSource}));if(l.actionId===a.gp.RELATION)return e.createElement(ar,(0,h.default)({key:o},this.props,{data:l,SelectNodeObjectChange:this.SelectNodeObjectChange,updateSource:this.updateSource}));if(l.actionId===a.gp.DELETE)return e.createElement(Gr,{data:l,SelectNodeObjectChange:this.SelectNodeObjectChange,updateSource:this.updateSource})}},{key:"render",value:function(){var n=this.props.selectNodeType,l=this.state.data,o=v().includes([a.IF.PROCESS,a.IF.GLOBAL_VARIABLE],l.appType)?"BGBlueAsh":l.appType===a.IF.TASK?"BGGreen":l.appType===a.IF.CALENDAR?"BGRed":"BGYellow";return v().isEmpty(l)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},l),icon:(0,N.wu)(n,l.appType,l.actionId),bg:o,updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},this.renderContent(),(!l.selectNodeId&&!l.appId&&l.actionId!==a.gp.DELETE&&!v().includes([a.IF.PROCESS,a.IF.CALENDAR],l.appType)||l.actionId===a.gp.EDIT&&l.selectNodeId&&!l.selectNodeObj.nodeName&&!l.selectNodeObj.appName||l.actionId===a.gp.ADD&&!v().includes([a.IF.EXTERNAL_USER,a.IF.CALENDAR],l.appType)&&(l.appId&&!v().find(l.appList,function(d){return d.id===l.appId})||!l.appId))&&e.createElement("div",{className:"Gray_9e Font13 flexRow flowDetailTips"},e.createElement("i",{className:"icon-task-setting_promet Font16"}),e.createElement("div",{className:"flex mLeft10"},_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u5BF9\u8C61\u540E\uFF0C\u624D\u80FD\u8BBE\u7F6E\u53EF\u6267\u884C\u7684\u52A8\u4F5C"))),l.actionId===a.gp.EDIT&&l.selectNodeId&&l.selectNodeObj.nodeName&&!l.selectNodeObj.appName&&e.createElement("div",{className:"Gray_9e Font13 flexRow flowDetailTips"},e.createElement("i",{className:"icon-task-setting_promet Font16"}),e.createElement("div",{className:"flex mLeft10",dangerouslySetInnerHTML:{__html:_l("\u8282\u70B9\u6240\u4F7F\u7528\u7684\u6570\u636E\u6765\u6E90%0\u4E2D\u7684\u5E94\u7528\u6570\u636E\u5B9E\u4F53\u5DF2\u5220\u9664\u3002\u5FC5\u987B\u4FEE\u590D\u6B64\u8282\u70B9\u4E2D\u7684\u9519\u8BEF\uFF0C\u6216\u91CD\u65B0\u6307\u5B9A\u4E00\u4E2A\u6709\u6548\u7684\u8282\u70B9\u5BF9\u8C61\u540E\u624D\u80FD\u8BBE\u7F6E\u53EF\u6267\u884C\u7684\u52A8\u4F5C",'<span class="mLeft5 mRight5 flowDetailTipsColor">\u201C'+l.selectNodeObj.nodeName+"\u201D</span>")}}))))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:l.actionId===a.gp.ADD&&l.appId||(l.actionId===a.gp.EDIT||l.actionId===a.gp.DELETE||l.actionId===a.gp.RELATION)&&l.selectNodeId||v().includes([a.IF.PROCESS,a.IF.CALENDAR],l.appType),onSave:this.onSave})))}}]),F}(e.Component),Co=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.name,p=o.appId,f=o.findFields,w=o.executeType,D=o.fields,G=o.selectNodeId,H=o.conditions,De=o.sorts,je=o.random,lt=o.link,Ft=o.filters,un=o.destroy,dn=o.execute,Hn=o.returnNew;if(v().includes([a.gp.WORKSHEET_FIND,a.gp.RECORD_UPDATE,a.gp.RECORD_DELETE],o.actionId)&&!p){alert(_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u5DE5\u4F5C\u8868"),2);return}if(o.actionId===a.gp.BATCH_FIND&&!G){alert(_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u5BF9\u8C61"),2);return}if(o.actionId===a.gp.RECORD_LINK_FIND)if(lt.trim()){if(!p){alert(_l("\u5FC5\u987B\u9009\u62E9\u4E00\u4E2A\u76EE\u6807\u5DE5\u4F5C\u8868"),2);return}}else{alert(_l("\u8BB0\u5F55\u94FE\u63A5\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if((0,N.lX)(H)){alert(_l("\u7B5B\u9009\u6761\u4EF6\u7684\u5224\u65AD\u503C\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if(Ft.length){var ca=!1;if(Ft.forEach(function(da){(0,N.lX)(da.conditions)&&(ca=!0)}),ca){alert(_l("\u7B5B\u9009\u6761\u4EF6\u7684\u5224\u65AD\u503C\u4E0D\u80FD\u4E3A\u7A7A"),2);return}}d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,name:u.trim(),appId:p,findFields:f,executeType:w,fields:D,selectNodeId:G,operateCondition:H,sorts:De,random:je,link:lt,filters:Ft,destroy:un,execute:dn,returnNew:Hn}).then(function(da){n.props.updateNodeData(da),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.switchFields=function(l){var o=n.state.data,d=v().find(o.controls,function(p){return p.controlId===l}),u=[{fieldId:l,type:d.type,enumDefault:d.enumDefault,fieldValue:d.type===26||d.type===27?"[]":"",fieldValueId:"",nodeId:""}];n.updateSource({findFields:u,executeType:2,fields:[]})},n.updateFindFields=function(l){var o=l.fields,d=l.formulaMap,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};if(o){var p=o[0];p.type!==26&&p.type!==27&&p.fieldValue||(p.type===26||p.type===27)&&p.fieldValue!=="[]"||p.fieldValueId?n.updateSource({findFields:o},u):n.updateSource({findFields:o,executeType:2,fields:[]},u)}d&&n.updateSource({formulaMap:d},u)},n.switchExecuteType=function(l){var o=n.state.data,d=[];l===1&&o.addControls.forEach(function(u){d.push({fieldId:u.controlId,type:u.type,enumDefault:u.enumDefault,nodeId:"",nodeName:"",fieldValueId:"",fieldValueName:"",fieldValue:u.type===26||u.type===27?"[]":""})}),n.updateSource(l===1?{executeType:l,fields:d}:{executeType:l})},n.state={data:{},saveRequest:!1,showOtherWorksheet:!1,cacheKey:+new Date},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n){var l=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=n.processId,u=n.selectNodeId,p=n.selectNodeType,f=n.instanceId,w=this.state.data;z.Z.getNodeDetail({processId:d,nodeId:u,flowNodeType:p,appId:o.appId,selectNodeId:o.selectNodeId,instanceId:f}).then(function(D){D.fields=v().filter(D.fields,function(G){return!v().includes([31,32].concat(D.actionId===a.gp.RECORD_UPDATE?[]:[33]),G.type)}),o.appId&&D.findFields.length&&(D.findFields=[]),l.setState({data:v().isEmpty(o)?D:(0,h.default)({},D,{name:w.name,filters:[]}),cacheKey:+new Date})})}},{key:"renderContent",value:function(){var n,l=this,o=this.state.data,d=(n={},(0,E.default)(n,a.gp.RECORD_LINK_FIND,_l("\u901A\u8FC7\u89E3\u6790\u5185\u90E8\u6210\u5458\u8BBF\u95EE\u6216\u5BF9\u5916\u516C\u5F00\u5206\u4EAB\u7684\u8BB0\u5F55\u94FE\u63A5\u6765\u83B7\u53D6\u5BF9\u5E94\u7684\u8BB0\u5F55\u5BF9\u8C61\uFF0C\u4F9B\u6D41\u7A0B\u4E2D\u7684\u5176\u4ED6\u8282\u70B9\u4F7F\u7528\u3002\u573A\u666F\u4F8B\u5982\uFF1A\u4ED3\u5E93\u7BA1\u7406\u5458\u5728PC\u7AEF\u4F7F\u7528\u626B\u63CF\u67AA\u6765\u626B\u63CF\u5546\u54C1\u7684\u4E8C\u7EF4\u7801\uFF0C\u5C06\u6307\u5411\u7684\u8BB0\u5F55\u94FE\u63A5\u5199\u5165\u6587\u672C\u6846\uFF0C\u7531\u5DE5\u4F5C\u6D41\u89E3\u6790\u51FA\u5173\u8054\u7684\u4EA7\u54C1\uFF0C\u5B9E\u73B0\u81EA\u52A8\u5316\u51FA\u5165\u5E93\u3002")),(0,E.default)(n,a.gp.RECORD_UPDATE,_l("\u4ECE\u5DE5\u4F5C\u8868\u4E2D\u901A\u8FC7\u7B5B\u9009\u6761\u4EF6\u548C\u6392\u5E8F\u89C4\u5219\u67E5\u627E\u7B26\u5408\u6761\u4EF6\u7684\u552F\u4E00\u6570\u636E\uFF0C\u5E76\u5728\u83B7\u53D6\u7684\u540C\u65F6\u5BF9\u8BB0\u5F55\u8FDB\u884C\u66F4\u65B0")),(0,E.default)(n,a.gp.RECORD_DELETE,_l("\u4ECE\u5DE5\u4F5C\u8868\u4E2D\u901A\u8FC7\u7B5B\u9009\u6761\u4EF6\u548C\u6392\u5E8F\u89C4\u5219\u76F4\u63A5\u5220\u9664\u7B26\u5408\u6761\u4EF6\u7684\u552F\u4E00\u6570\u636E")),n);return e.createElement(e.Fragment,null,e.createElement("div",{className:"Gray_75 workflowDetailDesc pTop15 pBottom15"},d[o.actionId]||_l("\u57FA\u4E8E\u4E00\u79CD\u83B7\u53D6\u65B9\u5F0F\uFF0C\u901A\u8FC7\u7B5B\u9009\u6761\u4EF6\u548C\u6392\u5E8F\u89C4\u5219\u83B7\u5F97\u7B26\u5408\u6761\u4EF6\u7684\u552F\u4E00\u6570\u636E\uFF0C\u4F9B\u6D41\u7A0B\u4E2D\u7684\u5176\u4ED6\u8282\u70B9\u4F7F\u7528\u3002")),v().includes([a.gp.WORKSHEET_FIND,a.gp.RECORD_UPDATE,a.gp.RECORD_DELETE],o.actionId)&&this.renderWorksheet(),o.actionId===a.gp.BATCH_FIND&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u9009\u62E9\u591A\u6761\u6570\u636E\u8282\u70B9")),e.createElement(fe.Z,{appList:o.flowNodeAppDtos,selectNodeId:o.selectNodeId,selectNodeObj:o.selectNodeObj,onChange:function(p){return l.getNodeDetail(l.props,{selectNodeId:p})}}),this.renderFieldAndRule(),o.selectNodeId&&e.createElement(Zr,{executeType:o.executeType,switchExecuteType:this.switchExecuteType})),o.actionId===a.gp.RECORD_LINK_FIND&&this.renderRecordLink())}},{key:"renderWorksheet",value:function(){var n=this,l=this.state,o=l.data,d=l.cacheKey,u=(o.findFields||[]).length?o.findFields[0]:{fieldId:""},p=v().filter(o.controls,function(w){return v().includes([2,3,4,5,6,7,8,31,32,33],w.type)||w.type===37&&w.enumDefault2===6}).map(function(w){return{text:n.renderFieldsTitle(w),value:w.controlId,disabled:!!v().find(o.findFields,function(D){return D.fieldId===w.controlId})}}),f=[{text:_l("\u4F7F\u7528\u8BB0\u5F55\u66F4\u65B0\u524D\u7684\u6570\u636E"),value:!1,desc:_l("\u6267\u884C\u5230\u672C\u8282\u70B9\u65F6\u4FDD\u5B58\u8BE5\u8BB0\u5F55\u66F4\u65B0\u524D\u7684\u6570\u636E\uFF0C\u4F9B\u6D41\u7A0B\u4E2D\u7684\u5176\u4ED6\u8282\u70B9\u4F7F\u7528")},{text:_l("\u4F7F\u7528\u8BB0\u5F55\u7684\u6700\u65B0\u6570\u636E"),value:null,desc:_l("\u6BCF\u6B21\u5176\u4ED6\u8282\u70B9\u4F7F\u7528\u5230\u672C\u8282\u70B9\u6570\u636E\u65F6\uFF0C\u91CD\u65B0\u83B7\u53D6\u8BE5\u8BB0\u5F55\u7684\u6700\u65B0\u6570\u636E")}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u9009\u62E9\u5DE5\u4F5C\u8868")),this.selectWorksheet(),o.findFields.length?e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u9009\u62E9\u5B57\u6BB5")),e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:p,value:u.fieldId||void 0,border:!0,isAppendToBody:!0,placeholder:_l("\u8BF7\u9009\u62E9\u5B57\u6BB5"),renderTitle:function(){return u.fieldId&&n.renderFieldsTitle(v().find(o.controls,function(D){return D.controlId===u.fieldId}))},onChange:this.switchFields}),e.createElement("div",{className:"mTop20 bold"},_l("\u67E5\u627E")),e.createElement(Gt.Z,{companyId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,controls:o.controls,formulaMap:o.formulaMap,fields:o.findFields,updateSource:this.updateFindFields,item:u,i:0}),e.createElement("div",{className:"workflowDetailDesc pTop15 pBottom15 mTop20",style:{background:"rgba(255, 163, 64, 0.12)"}},e.createElement("div",{className:"Gray_9e"},_l("\u65B0\u7248\u67E5\u627E\u65B9\u5F0F\u652F\u6301\u901A\u8FC7\u591A\u4E2A\u7B5B\u9009\u6761\u4EF6\u548C\u6392\u5E8F\u89C4\u5219\u6765\u5B9E\u73B0\u66F4\u7CBE\u51C6\u67E5\u627E\u3002")),e.createElement("div",{className:"mBottom5"},_l("\u6CE8\u610F\uFF1A\u5207\u6362\u540E\u60A8\u9700\u8981\u91CD\u65B0\u914D\u7F6E\u67E5\u627E\u89C4\u5219"),e.createElement("span",{className:"Gray_9e"},_l("\uFF0C\u662F\u5426\u5207\u6362\u4E3A\u65B0\u7248\uFF1F"))),e.createElement("span",{className:"ThemeColor3 ThemeHoverColor2 pointer",onClick:function(){return n.getNodeDetail(n.props,{appId:o.appId})}},_l("\u5207\u6362\u4E3A\u65B0\u7248\uFF0C\u5E76\u91CD\u65B0\u914D\u7F6E")))):this.renderFieldAndRule(),o.appId&&o.actionId===a.gp.RECORD_UPDATE&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u66F4\u65B0\u5B57\u6BB5")),e.createElement(Za.Z,{type:1,companyId:this.props.companyId,relationId:this.props.relationId,processId:this.props.processId,selectNodeId:this.props.selectNodeId,nodeId:o.selectNodeId,controls:o.addControls,fields:o.fields,formulaMap:o.formulaMap,updateSource:this.updateSource}),e.createElement("div",{className:"mTop20 bold"},_l("\u88AB\u4E4B\u540E\u8282\u70B9\u4F7F\u7528\u65F6")),f.map(function(w){return e.createElement("div",{className:"mTop15",key:w.value},e.createElement(le.Z,{text:w.text,checked:o.returnNew===w.value,onClick:function(){return n.updateSource({returnNew:w.value})}}),e.createElement("div",{className:"mTop5 mLeft30 Gray_9e"},w.desc))})),o.appId&&o.actionId===a.gp.RECORD_DELETE&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 flexRow"},e.createElement(b.Z,{className:"InlineFlex",text:_l("\u83B7\u53D6\u8BB0\u5F55\u6570\u636E"),checked:o.returnNew===!1,onClick:function(D){return n.updateSource({returnNew:D?null:!1})}})),e.createElement("div",{className:"Gray_9e mTop5 mLeft26"},_l("\u5220\u9664\u524D\u4FDD\u7559\u8BB0\u5F55\u6570\u636E\uFF0C\u4F9B\u4E4B\u540E\u7684\u6D41\u7A0B\u8282\u70B9\u4F7F\u7528")),e.createElement("div",{className:"mTop20 flexRow"},e.createElement(b.Z,{className:"InlineFlex",text:_l("\u5F7B\u5E95\u5220\u9664\u8BB0\u5F55\uFF0C\u4E0D\u653E\u5165\u56DE\u6536\u7AD9"),checked:o.destroy,onClick:function(D){return n.updateSource({destroy:!D})}})),e.createElement("div",{className:"Gray_9e mTop5 mLeft26"},_l("\u5F7B\u5E95\u5220\u9664\u540E\u6570\u636E\u4E0D\u53EF\u6062\u590D\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C"))),o.appId&&e.createElement(Zr,{executeType:o.executeType,allowAdd:o.actionId===a.gp.WORKSHEET_FIND,switchExecuteType:this.switchExecuteType}),o.appId&&o.executeType===1&&e.createElement(e.Fragment,null,e.createElement("div",{className:"actionFieldsSplit mRight0 mTop30"}),e.createElement("div",{className:"Font13 mTop25 bold"},_l("\u65B0\u589E\u8BB0\u5F55")),o.fields.map(function(w,D){var G=v().find(o.addControls,function(je){return je.controlId===w.fieldId}),H=G.controlName,De=G.sourceEntityName;return e.createElement("div",{key:D,className:"relative"},e.createElement("div",{className:"mTop15 ellipsis Font13"},H||G.controlName,G.required&&e.createElement("span",{className:"mLeft5 red"},"*"),G.type===29&&e.createElement("span",{className:"Gray_9e"},"\uFF08"+_l("\u5DE5\u4F5C\u8868")+"\u201C"+De+"\u201D\uFF09")),e.createElement(Gt.Z,{key:d+D,companyId:n.props.companyId,processId:n.props.processId,relationId:n.props.relationId,selectNodeId:n.props.selectNodeId,controls:o.addControls,formulaMap:o.formulaMap,fields:o.fields,updateSource:n.updateSource,item:w,i:D}))})))}},{key:"selectWorksheet",value:function(){var n=this,l=this.state.data,o=l.appList.find(function(p){var f=p.id;return f===l.appId}),d=l.appList.filter(function(p){return!p.otherApkId}).map(function(p){return{text:p.name,value:p.id,className:p.id===l.appId?"ThemeColor3":""}}),u=[{text:_l("\u5176\u5B83\u5E94\u7528\u4E0B\u7684\u5DE5\u4F5C\u8868"),value:"other",className:"Gray_75"}];return e.createElement(Ie.Z,{className:R()("flowDropdown mTop10",{flowDropdownBorder:v().includes([a.gp.WORKSHEET_FIND,a.gp.RECORD_UPDATE,a.gp.RECORD_DELETE],l.actionId)}),data:[d,this.props.relationType===a.RA.NETWORK?[]:u],value:l.appId,renderTitle:l.appId?l.appId&&!o?function(){return e.createElement("span",{className:"errorColor"},_l("\u5DE5\u4F5C\u8868\u65E0\u6548\u6216\u5DF2\u5220\u9664"))}:function(){return e.createElement(e.Fragment,null,e.createElement("span",null,o.name),o.otherApkName&&e.createElement("span",{className:"Gray_9e"},"\uFF08",o.otherApkName,"\uFF09"))}:function(){return e.createElement("span",{className:"Gray_9e"},_l("\u8BF7\u9009\u62E9\u5DE5\u4F5C\u8868"))},border:!0,openSearch:!0,noData:_l("\u6682\u65E0\u5DE5\u4F5C\u8868\uFF0C\u8BF7\u5148\u5728\u5E94\u7528\u91CC\u521B\u5EFA"),onChange:function(f){f==="other"?n.setState({showOtherWorksheet:!0}):v().includes([a.gp.WORKSHEET_FIND,a.gp.RECORD_UPDATE,a.gp.RECORD_DELETE],l.actionId)?n.getNodeDetail(n.props,{appId:f}):n.updateSource({appId:f})}})}},{key:"renderFieldsTitle",value:function(n){return n?e.createElement(e.Fragment,null,e.createElement("span",{className:"Gray_9e mRight5"},"[",a.Do[n.type===37?n.enumDefault2:n.type],"]"),e.createElement("span",null,n.controlName)):e.createElement("span",{style:{color:"#f44336"}},_l("\u5B57\u6BB5\u5DF2\u5220\u9664"))}},{key:"renderFieldAndRule",value:function(){var n=this.state,l=n.data,o=n.cacheKey;return!l.appId&&!l.selectNodeId?null:e.createElement(Cr,{key:o,companyId:this.props.companyId,relationId:this.props.relationId,processId:this.props.processId,selectNodeId:this.props.selectNodeId,openNewFilter:!l.conditions.length,data:l,updateSource:this.updateSource,showRandom:v().includes([a.gp.WORKSHEET_FIND,a.gp.BATCH_FIND],l.actionId),filterText:v().includes([a.gp.RECORD_UPDATE,a.gp.RECORD_DELETE],l.actionId)?_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u67E5\u627E\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u3002"):_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u67E5\u627E\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u3002\u5982\u679C\u672A\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6\u5219\u8868\u793A\u53EA\u901A\u8FC7\u6392\u5E8F\u89C4\u5219\u4ECE\u6240\u6709\u8BB0\u5F55\u4E2D\u83B7\u5F97\u552F\u4E00\u6570\u636E"),sortText:v().includes([a.gp.RECORD_UPDATE,a.gp.RECORD_DELETE],l.actionId)?_l("\u5F53\u67E5\u627E\u5230\u591A\u4E2A\u6570\u636E\u65F6\uFF0C\u5C06\u6309\u7167\u4EE5\u4E0B\u6392\u5E8F\u89C4\u5219\u83B7\u5F97\u7B2C\u4E00\u6761\u6570\u636E\u3002"):_l("\u5F53\u67E5\u627E\u5230\u591A\u4E2A\u6570\u636E\u65F6\uFF0C\u5C06\u6309\u7167\u4EE5\u4E0B\u6392\u5E8F\u89C4\u5219\u83B7\u5F97\u7B2C\u4E00\u6761\u6570\u636E\u3002\u5982\u679C\u672A\u8BBE\u7F6E\u89C4\u5219\uFF0C\u8FD4\u56DE\u6700\u8FD1\u66F4\u65B0\u7684\u4E00\u6761\u6570\u636E"),filterEncryptCondition:v().includes([a.gp.WORKSHEET_FIND,a.gp.RECORD_UPDATE,a.gp.RECORD_DELETE],l.actionId)})}},{key:"renderRecordLink",value:function(){var n=this,l=this.state.data;return e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u9009\u62E9\u8BB0\u5F55\u94FE\u63A5")),e.createElement("div",{className:"Font13 Gray_9e mTop10"},_l("\u5F53\u524D\u6D41\u7A0B\u8282\u70B9\u4E2D\u7684\u6587\u672C\u7C7B\u578B\u5B57\u6BB5\uFF0C\u7CFB\u7EDF\u5C06\u6839\u636E\u6B64\u94FE\u63A5\u83B7\u53D6\u76F8\u5E94\u7684\u8BB0\u5F55\uFF0C\u4F9B\u6D41\u7A0B\u4E2D\u5176\u4ED6\u8282\u70B9\u4F7F\u7528")),e.createElement("div",{className:"mTop10"},e.createElement(ce.Z,{projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,type:2,height:0,content:l.link,formulaMap:l.formulaMap,onChange:function(d,u,p){return n.updateSource({link:u})},updateSource:this.updateSource})),e.createElement("div",{className:"mTop20 bold"},_l("\u9009\u62E9\u76EE\u6807\u5DE5\u4F5C\u8868")),e.createElement("div",{className:"Font13 Gray_9e mTop10"},_l("\u9884\u8BA1\u89E3\u6790\u51FA\u7684\u8BB0\u5F55\u5F52\u5C5E\u7684\u5DE5\u4F5C\u8868")),this.selectWorksheet(),e.createElement(Zr,{executeType:l.executeType,switchExecuteType:this.switchExecuteType}))}},{key:"render",value:function(){var n=this,l=this.state,o=l.data,d=l.showOtherWorksheet;return v().isEmpty(o)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},o),icon:"icon-search",bg:"BGYellow",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},this.renderContent()))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:v().includes([a.gp.WORKSHEET_FIND,a.gp.RECORD_UPDATE,a.gp.RECORD_DELETE],o.actionId)?!!o.appId:o.actionId===a.gp.BATCH_FIND?!!o.selectNodeId:!!o.appId&&!!o.link.trim(),onSave:this.onSave})),d&&e.createElement(ur.Z,{projectId:this.props.companyId,worksheetType:0,selectedAppId:this.props.relationId,selectedWorksheetId:o.appId,visible:!0,onOk:function(p,f,w){var D=w.workSheetName,G=w.appName,H=n.props.relationId===p;v().includes([a.gp.WORKSHEET_FIND,a.gp.RECORD_UPDATE,a.gp.RECORD_DELETE],o.actionId)?n.getNodeDetail(n.props,{appId:f}):n.updateSource({appList:v().uniqBy(o.appList.concat([{id:f,name:D,otherApkId:H?"":p,otherApkName:H?"":G}]),"id"),appId:f})},onHide:function(){return n.setState({showOtherWorksheet:!1})}}))}}]),F}(e.Component),Jr=t(46417),pr=t(3540),fo=t(44293),oo=t(68924),Xr=t.n(oo),Bo=t(82302),Eo=(0,W.Z)([`
  padding: 10px;
  background: #f8f8f8;
  border: 1px solid #ddd;
  border-radius: 3px;
`],[`
  padding: 10px;
  background: #f8f8f8;
  border: 1px solid #ddd;
  border-radius: 3px;
`]),yo=P.ZP.div(Eo);const qr=function(ne){var F=ne.title,B=F===void 0?_l("\u6D4B\u8BD5\u6570\u636E"):F,n=ne.description,l=n===void 0?"":n,o=ne.onOk,d=o===void 0?function(){}:o,u=ne.onClose,p=u===void 0?function(){}:u,f=ne.testArray,w=f===void 0?[]:f,D=ne.fileArray,G=D===void 0?[]:D,H=ne.formulaMap,De=H===void 0?{}:H,je=ne.testMap,lt=je===void 0?{}:je,Ft=ne.isRequired,un=Ft===void 0?!1:Ft,dn=ne.previewContent,Hn=dn===void 0?"":dn,ca=(0,e.useState)(lt),da=(0,U.Z)(ca,2),Me=da[0],nt=da[1],He=(0,e.useState)(""),ie=(0,U.Z)(He,2),We=ie[0],Ue=ie[1],Ke=function(Xe){return Xe.replace(/\$/g,"").split(/([a-zA-Z0-9#]{24,32})-/).filter(function(pt){return pt})},ut=function(Xe,pt){return Xe.map(function(at,ct){var Nt=Ke(at),mn=(0,U.Z)(Nt,2),Qt=mn[0],Cn=mn[1];return e.createElement("div",{key:ct,className:"flexRow alignItemsCenter Height36 mTop10"},e.createElement("div",{className:"Width190 mRight10 ellipsis bold",title:""+De[Qt].name+(Cn?"."+De[Qt+"-"+Cn].name:"")},""+De[Qt].name+(Cn?"."+De[Qt+"-"+Cn].name:"")),pt?wt(at,ct):e.createElement(pr.Z,{type:"text",className:"flex",placeholder:_l("\u8BF7\u8F93\u5165\u6D4B\u8BD5\u503C"),value:Me[at],onChange:function(ra){return nt(C()({},Me,(0,E.default)({},at,ra)))},onBlur:function(ra){return nt(C()({},Me,(0,E.default)({},at,ra.target.value.trim())))}}))})},wt=function(Xe,pt){return Xe=Xe+"14",e.createElement("div",{className:"flexRow alignItemsCenter",style:{height:20}},Me[Xe]?e.createElement(e.Fragment,null,e.createElement(Q.Z,{icon:"attachment",className:"Font16 mRight10 Gray_9e"}),e.createElement("span",{className:"ellipsis InlineBlock ThemeColor3",style:{maxWidth:200}},JSON.parse(Me[Xe]).originalFileName||JSON.parse(Me[Xe]).originalFilename),e.createElement("span",{className:"ThemeColor3"},".",File.GetExt(JSON.parse(Me[Xe]).fileExt||JSON.parse(Me[Xe]).ext)),e.createElement("span",{className:"ThemeColor3 mLeft20 pointer",onClick:function(){return nt(C()({},Me,(0,E.default)({},Xe,"")))}},_l("\u6E05\u9664"))):e.createElement(Jr.Z,{options:{max_file_count:1,max_file_size:"10m"},onUploaded:function(ct,Nt,mn){ct.disableBrowse(!1),nt(function(Qt){return C()({},Qt,(0,E.default)({},Xe,ke()((0,fo.LE)(Nt,decodeURIComponent(ke()(mn))))))}),Ue("")},onAdd:function(ct,Nt){Ue(pt),ct.disableBrowse()},onError:function(ct,Nt,mn){alert(mn,2)}},e.createElement("div",{className:"Gray_9e ThemeHoverColor3 pointer flexRow alignItemsCenter",style:{height:20}},e.createElement(Q.Z,{icon:"attachment",className:"Font16 mRight10"}),We===pt?_l("\u4E0A\u4F20\u4E2D..."):_l("\u6DFB\u52A0\u9644\u4EF6"))))},Et=function(Xe){return w.forEach(function(pt){var at=Ke(pt),ct=(0,U.Z)(at,2),Nt=ct[0],mn=ct[1];Xe=Xe.replace(new RegExp(pt.replace(/\$/g,"\\$"),"g"),Me[pt]?'#{<span style="background: #ffa340">'+Me[pt]+"</span>}":"#{"+De[Nt].name+"-"+De[Nt+"-"+mn].name+"}")}),Xr()(Xe,{whiteList:C()({},Bo.whiteList,{span:["style"]})})};return e.createElement(te.Z,{visible:!0,width:720,overlayClosable:!1,title:B,description:l,onCancel:p,onOk:function(){if(un){if(T()(Me).length!==w.length||Ma()(Me).filter(function(Xe){return!Xe.trim()}).length){alert(_l("\u53C2\u6570\u503C\u4E0D\u5141\u8BB8\u4E3A\u7A7A"),3);return}d(Me)}else d(Me)}},e.createElement("div",{className:"flexRow alignItemsCenter Height36 Gray_75"},e.createElement("div",{className:"Width190 mRight10 ellipsis"},_l("\u53C2\u6570\u540D\u79F0")),e.createElement("div",{className:"flex"},_l("\u53C2\u6570\u503C"))),ut(w),ut(G,!0),Hn&&e.createElement(e.Fragment,null,e.createElement("div",{className:"bold mTop20"},_l("\u9884\u89C8")),e.createElement(yo,{className:"mTop10",dangerouslySetInnerHTML:{__html:Et(Hn)}})))};var ll=(0,W.Z)([`
  padding: 12px;
  border-radius: 4px;
  height: 340px;
  overflow: auto;
  width: 100%;
  border: 1px solid #ddd;
  resize: none;
  &:focus {
    border-color: #2196f3;
  }
`],[`
  padding: 12px;
  border-radius: 4px;
  height: 340px;
  overflow: auto;
  width: 100%;
  border: 1px solid #ddd;
  resize: none;
  &:focus {
    border-color: #2196f3;
  }
`]),eo=P.ZP.textarea(ll),Zo=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.onChange=function(l){var o=n.state.data,d=v().find(o.appList,function(u){return u.nodeId===l});n.updateSource({selectNodeId:l,selectNodeObj:d})},n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.openChecksheet=function(){var l=n.state.data,o=l.selectNodeId;if(!o){alert(_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u5BF9\u8C61"),2);return}window.open("/workflow/checksheet/"+n.props.processId+"/"+n.props.selectNodeId+"/"+o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=l.errorMsgArray,p=o.selectNodeId,f=o.name,w=o.sendContent,D=o.body,G=o.headers,H=o.method,De=o.contentType,je=o.formControls,lt=o.settings,Ft=o.testMap,un=o.successCode,dn=o.errorMsg,Hn=o.executeType;if(o.appType===a.IF.SHEET&&!p){alert(_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u5BF9\u8C61"),2);return}if(!w.trim()){alert(_l("API URL\u5FC5\u586B"),2);return}var ca=0,da={};if(u.length&&u.filter(function(Me){return Me.key||Me.value}).forEach(function(Me){!Me.key||!Me.value?ca++:da[Me.key]=Me.value}),ca){alert(_l("\u6307\u5B9A\u72B6\u6001\u7801\u548C\u9519\u8BEF\u6D88\u606F\u4E0D\u80FD\u4E3A\u7A7A"),2);return}d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,name:f.trim(),selectNodeId:p,sendContent:w.trim(),body:D,headers:G.filter(function(Me){return Me.name}),method:H,contentType:De,formControls:je.filter(function(Me){return Me.name}),settings:lt,testMap:Ft,successCode:un,errorMap:da,errorMsg:dn,executeType:Hn},{isIntegration:n.props.isIntegration}).then(function(Me){n.props.updateNodeData(Me),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.test=function(){var l=n.state.data,o=l.sendContent,d=l.headers,u=l.formControls,p=l.body,f=v().uniq((o+ke()(d)+ke()(u.filter(function(D){return D.type!==14}))+p).match(/\$[^ \r\n]+?\$/g)||[]),w=v().uniq(ke()(u.filter(function(D){return D.type===14})).match(/\$[^ \r\n]+?\$/g)||[]);f.length+w.length?n.setState({showTestDialog:!0,testArray:f,fileArray:w}):n.send()},n.send=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments[1],d=n.props,u=d.processId,p=d.selectNodeId,f=d.isIntegration,w=n.state,D=w.data,G=w.sendRequest,H=D.headers,De=D.body,je=D.sendContent,lt=D.method,Ft=D.formControls,un=D.contentType,dn=D.settings;if(n.setState({showTestDialog:!1}),!je){alert(_l("API URL\u5FC5\u586B"),2);return}G||(z.Z.webHookTestRequest({processId:u,nodeId:p,method:lt,url:n.formatParameters(je,l),headers:n.formatParameters(H.filter(function(Hn){return Hn.name}),l,!0),body:n.formatParameters(De,l),formControls:n.formatParameters(Ft.filter(function(Hn){return Hn.name}),l,!0),contentType:un,settings:dn,json:o},{isIntegration:f}).then(function(Hn){Hn.status===1?n.updateSource({controls:Hn.data.controls,testMap:l,requestDate:Hn.requestDate,requestTime:Hn.requestTime,statusCode:Hn.statusCode}):(n.updateSource({testMap:l}),alert(Hn.msg||_l("\u8BF7\u6C42\u5F02\u5E38"),2)),n.setState({sendRequest:!1})}),n.setState({sendRequest:!0}))},n.formatParameters=function(l,o,d){return d?(l=v().cloneDeep(l),l.map(function(u){return(u.value.match(/\$[^ \r\n]+?\$/g)||[]).forEach(function(p){u.value=u.value.replace(p,o[u.type===14?p+"14":p]||"")}),u})):(l.match(/\$[^ \r\n]+?\$/g)||[]).forEach(function(u){l=l.replace(u,o[u]||"")}),l},n.generateFromJSON=function(){var l=n.state.data;te.Z.confirm({width:640,title:_l("\u4ECE JSON \u5BFC\u5165\u54CD\u5E94\u793A\u4F8B"),description:e.createElement(eo,{id:"generateJSON"},l.json),onOk:function(){return new(qn())(function(d,u){var p=document.getElementById("generateJSON").value.trim();!p.trim()||(0,N.BH)(p)?(n.updateSource({json:p}),n.send(l.testMap,p),d()):(alert(_l("JSON\u683C\u5F0F\u6709\u9519\u8BEF"),2),u(!0))})}})},n.state={data:{},saveRequest:!1,sendRequest:!1,showTestDialog:!1,testArray:[],fileArray:[],errorMsgArray:[]},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n){var l=this,o=n.processId,d=n.selectNodeId,u=n.selectNodeType,p=n.isIntegration,f=n.instanceId;z.Z.getNodeDetail({processId:o,nodeId:d,flowNodeType:u,instanceId:f},{isIntegration:p}).then(function(w){w.headers.length||w.headers.push({name:"",value:""}),w.formControls.length||w.formControls.push({name:"",value:""});var D=T()(w.errorMap).map(function(G){return{key:G,value:w.errorMap[G]}});l.setState({data:w,errorMsgArray:D.length?D:[{key:"",value:""}]})})}},{key:"renderDefaultSource",value:function(){var n=this.state.data;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold"},_l("\u6570\u636E\u5BF9\u8C61")),e.createElement("div",{className:"Font13 Gray_9e mTop10"},_l("\u5F53\u524D\u6D41\u7A0B\u4E2D\u7684\u8282\u70B9\u5BF9\u8C61")),e.createElement(fe.Z,{appList:n.appList,selectNodeId:n.selectNodeId,selectNodeObj:n.selectNodeObj,onChange:this.onChange}),e.createElement("div",{className:"mTop20"},this.renderUrl()),this.renderHeaders(),e.createElement("div",{className:"Gray_75 mTop15 flexRow alignItemsCenter"},e.createElement("i",{className:"icon-workflow_error mRight5 Font16"}),_l("\u67E5\u770B\u53D1\u9001\u6570\u636E\u7684"),e.createElement("a",{className:"mLeft5",onClick:this.openChecksheet},_l("\u5B57\u6BB5\u5BF9\u7167\u8868"))))}},{key:"renderCustomSource",value:function(){var n=this,l=this.props,o=l.selectNodeType,d=l.isIntegration,u=this.state,p=u.data,f=u.showTestDialog,w=u.testArray,D=u.fileArray;return e.createElement(e.Fragment,null,this.renderUrl(),this.renderHeaders(),!v().includes([1,4,5],p.method)&&this.renderBody(),!md.global.Config.IsLocal&&e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop20"},_l("\u53EF\u4FE1 IP \u5730\u5740")),e.createElement("div",{className:"mTop10 Gray_9e"},_l("\u67D0\u4E9B\u7B2C\u4E09\u65B9\u5E73\u53F0\u9700\u8981\u8BBE\u7F6E\u767D\u540D\u5355 IP \u624D\u80FD\u8C03\u7528API\uFF0C\u4EE5\u4E0B\u662F\u7CFB\u7EDF\u4F7F\u7528\u7684 IP \u5730\u5740")),e.createElement("div",{className:"mTop10"},p.realIp)),this.renderCustomErrorMessage(),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u8FD4\u56DE\u53C2\u6570\u5217\u8868")),e.createElement("div",{className:"mTop10 Gray_9e"},_l("\u5411URL\u53D1\u9001\u8BF7\u6C42\u6D4B\u8BD5\u83B7\u53D6\u53C2\u6570\u5217\u8868\uFF1B\u8BF7\u6C42\u4E2D\u7684\u52A8\u6001\u53C2\u6570\u5C06\u53D6\u6D4B\u8BD5\u503C")),e.createElement("div",{className:"mTop15 webhookBtn InlineBlock",onClick:this.test},_l("\u6D4B\u8BD5 API")),!!(p.controls||[]).length&&e.createElement(e.Fragment,null,p.requestDate&&e.createElement("div",{className:"mTop25 Gray_75"},_l("\u8BF7\u6C42\u65F6\u95F4 %0, \u72B6\u6001\u7801 %1\uFF0C\u8017\u65F6 %2 \u79D2",p.requestDate,p.statusCode,p.requestTime/1e3)),e.createElement("div",{className:"mTop15 flexRow"},e.createElement("div",{className:"bold flex"},_l("\u54CD\u5E94 Body")),e.createElement("div",{className:"ThemeColor3 ThemeHoverColor2 pointer",onClick:this.generateFromJSON},_l("\u4ECE JSON \u5BFC\u5165\u54CD\u5E94\u793A\u4F8B"))),e.createElement(kt,{controls:p.controls.filter(function(G){return G.enumDefault===0})}),e.createElement("div",{className:"mTop15 bold"},_l("\u54CD\u5E94 Header")),e.createElement(kt,{controls:p.controls.filter(function(G){return G.enumDefault===1}),hideControlType:!0})),!d&&e.createElement(Zr,{nodeType:o,executeType:p.executeType,switchExecuteType:function(H){return n.updateSource({executeType:H})}}),f&&e.createElement(qr,{title:_l("\u7F16\u8F91 API \u6D4B\u8BD5\u6570\u636E"),onOk:this.send,onClose:function(){return n.setState({showTestDialog:!1})},testArray:w,fileArray:D,formulaMap:p.formulaMap,testMap:p.testMap}))}},{key:"renderBody",value:function(){var n=this,l=this.state.data,o=[{text:"form-data",value:4},{text:"x-www-form-urlencoded",value:1},{text:"raw",value:2},{text:"binary",value:5}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop20"},"Body"),e.createElement("div",{className:"flexRow mTop15"},o.map(function(d,u){return e.createElement("div",{className:"alignItemsCenter flexRow minHeight30",style:{flex:d.value===1?1.2:1},key:u},e.createElement(le.Z,{text:d.text,checked:l.contentType===d.value||l.contentType===3&&d.value===2,onClick:function(){return n.updateSource({contentType:d.value,body:"",formControls:[C()({name:d.value===5?"file":"",value:""},d.value===4?{type:2}:d.value===5?{type:14}:{})]})}}),d.value===2&&v().includes([2,3],l.contentType)&&e.createElement(Ie.Z,{style:{marginLeft:-15},data:[{text:"Text",value:3},{text:"JSON",value:2}],value:l.contentType,onChange:function(f){return n.updateSource({contentType:f})}}))})),v().includes([4,5],l.contentType)&&e.createElement("div",{className:"Gray_9e mTop5"},_l("\u6B64\u6A21\u5F0F\u4E0B\u5141\u8BB8\u53D1\u900110M\u4EE5\u5185\u9644\u4EF6")),v().includes([1,4,5],l.contentType)&&e.createElement(Bt,{key:this.props.selectNodeId,projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,isIntegration:this.props.isIntegration,source:l.formControls,sourceKey:"formControls",showType:l.contentType===4,onlyFile:l.contentType===5,formulaMap:l.formulaMap,btnText:l.contentType===4?"+ Form":l.contentType===5?"":"+ key-value pairs",updateSource:this.updateSource}),v().includes([2,3],l.contentType)&&e.createElement(ce.Z,{className:"minH100",projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,isIntegration:this.props.isIntegration,type:2,content:l.body,formulaMap:l.formulaMap,onChange:function(u,p,f){return n.updateSource({body:p})},updateSource:this.updateSource}))}},{key:"renderUrl",value:function(){var n=this,l=this.state.data;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold"},_l("API URL \uFF08\u5FC5\u586B\uFF09")),e.createElement("div",{className:"mTop10 Gray_9e flexRow"},e.createElement("div",{className:"flex"},_l("\u5C06\u5411\u5BF9\u5E94\u7684HTTP\u5730\u5740\u53D1\u9001\u8BF7\u6C42\uFF1BURL\u540E\u9762\u53EF\u4EE5\u62FC\u63A5\u53C2\u6570")," "),e.createElement(b.Z,{className:"flexRow",text:_l("\u4F7F\u7528\u7F51\u7EDC\u4EE3\u7406"),checked:l.settings.useProxy,onClick:function(d){return n.updateSource({settings:C()({},l.settings,{useProxy:!d})})}}),e.createElement(Rn.Z,{text:e.createElement("span",null,_l("\u9700\u8981\u7BA1\u7406\u5458\u5728\u300C\u7EC4\u7EC7\u540E\u53F0-\u96C6\u6210-\u5176\u4ED6\u300D\u4E2D\u914D\u7F6E}"))},e.createElement(Q.Z,{icon:"info_outline",className:"Gray_9e mTop3 mLeft10 mRight20"})),e.createElement(b.Z,{className:"flexRow",text:_l("\u5F00\u542FSSL\u8BC1\u4E66\u9A8C\u8BC1"),checked:l.settings.openSSL,onClick:function(d){return n.updateSource({settings:C()({},l.settings,{openSSL:!d})})}})),e.createElement("div",{className:"flexRow"},e.createElement(Ie.Z,{className:"flowDropdown mTop10 mRight10",style:{width:120},data:a.ZX,value:l.method,border:!0,onChange:function(d){return n.updateSource({method:d,body:v().includes([1,5],d)?"":l.body})}}),e.createElement("div",{className:"flex",style:{minWidth:0}},e.createElement(ce.Z,{projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,isIntegration:this.props.isIntegration,type:2,height:0,content:l.sendContent,formulaMap:l.formulaMap,onChange:function(d,u,p){return n.updateSource({sendContent:u})},updateSource:this.updateSource}))))}},{key:"renderHeaders",value:function(){var n=this.state.data;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop20"},"Headers"),e.createElement(Bt,{key:this.props.selectNodeId,projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,isIntegration:this.props.isIntegration,source:n.headers,sourceKey:"headers",formulaMap:n.formulaMap,updateSource:this.updateSource,btnText:"+ header"}))}},{key:"renderCustomErrorMessage",value:function(){var n=this,l=this.props.isIntegration,o=this.state,d=o.data,u=o.errorMsgArray;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop20"},_l("\u8BF7\u6C42\u5931\u8D25\u8BBE\u7F6E")),l&&e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 mTop15"},_l("\u8BF7\u6C42\u65F6\u957F")),e.createElement("div",{className:"mTop10 flexRow alignItemsCenter"},e.createElement("div",{style:{width:120}},e.createElement(Mt.Z,{projectId:this.props.companyId,processId:this.props.processId,selectNodeId:this.props.selectNodeId,updateSource:function(f){var w=f.fieldValue;return n.updateSource({settings:C()({},d.settings,{timeout:parseInt(w),maxRetries:w>30?0:d.settings.maxRetries})})},type:"number",min:5,max:120,hasOtherField:!1,data:{fieldValue:d.settings.timeout}})),e.createElement("div",{className:"mLeft10"},_l("\u79D2"),"\uFF085 ~ 120\uFF09"),e.createElement(b.Z,{style:{marginLeft:80},text:_l("\u8D85\u65F6\u81EA\u52A8\u91CD\u8BD5\uFF08\u6700\u591A\u91CD\u8BD52\u6B21\uFF09"),disabled:d.settings.timeout>30,checked:d.settings.maxRetries>0,onClick:function(f){return n.updateSource({settings:C()({},d.settings,{maxRetries:f?0:2})})}}))),e.createElement("div",{className:"Font13 mTop15"},_l("\u8BF7\u6C42\u6210\u529F\u7684 HTTP \u72B6\u6001\u7801")),e.createElement("div",{className:"flexRow mTop10"},e.createElement("input",{type:"text",className:"flex ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10",placeholder:_l("\u793A\u4F8B\uFF1A200,201\uFF08\u591A\u4E2A\u72B6\u6001\u7801\u7528\u82F1\u6587\u9017\u53F7\u9694\u5F00\uFF09"),value:d.successCode,onChange:function(f){return n.updateSource({successCode:f.target.value.replace(/[^0-9,]/g,"")})}})),e.createElement("div",{className:"Font13 mTop15"},_l("\u6307\u5B9A HTTP \u72B6\u6001\u7801\u9519\u8BEF\u6D88\u606F")),u.map(function(p,f){return e.createElement("div",{className:"flexRow mTop10 alignItemsCenter",key:f},e.createElement("input",{type:"text",style:{width:100},className:"ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10",placeholder:_l("\u793A\u4F8B\uFF1A500"),value:p.key,onChange:function(D){return n.updateErrorMsg("key",D.target.value.replace(/[^0-9]/g,""),f)}}),e.createElement("input",{type:"text",className:"flex ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10 mLeft10",placeholder:_l("\u8BF7\u8F93\u5165\u9519\u8BEF\u6D88\u606F"),value:p.value,onChange:function(D){return n.updateErrorMsg("value",D.target.value,f)},onBlur:function(D){return n.updateErrorMsg("value",D.target.value.trim(),f)}}),e.createElement("i",{className:"icon-delete2 Font16 ThemeHoverColor3 pointer Gray_bd mLeft8",onClick:function(){return n.deleteErrorMsg(f)}}))}),e.createElement("div",{className:"mTop10"},e.createElement("span",{className:"ThemeHoverColor3 pointer Gray_9e",onClick:function(){return n.setState({errorMsgArray:u.concat({key:"",value:""})})}},"+ ",_l("\u72B6\u6001\u7801"))),e.createElement("div",{className:"Font13 mTop15"},_l("\u8FD4\u56DE\u5176\u4ED6 HTTP \u72B6\u6001\u7801\u65F6\u7684\u9ED8\u8BA4\u9519\u8BEF\u6D88\u606F")),e.createElement("div",{className:"flexRow mTop10"},e.createElement("input",{type:"text",className:"flex ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10",placeholder:_l("\u8BF7\u8F93\u5165\u9519\u8BEF\u6D88\u606F"),value:d.errorMsg,onChange:function(f){return n.updateSource({errorMsg:f.target.value})},onBlur:function(f){return n.updateSource({errorMsg:f.target.value.trim()})}})))}},{key:"updateErrorMsg",value:function(n,l,o){var d=v().cloneDeep(this.state.errorMsgArray);d[o][n]=l,this.setState({errorMsgArray:d})}},{key:"deleteErrorMsg",value:function(n){var l=v().cloneDeep(this.state.errorMsgArray);v().remove(l,function(o,d){return d===n}),this.setState({errorMsgArray:l})}},{key:"renderPushSource",value:function(){var n=this,l=this.state.data;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13"},e.createElement("span",{className:"Gray_9e"},_l("\u7528\u4E8E\u63A5\u6536\u4E8B\u4EF6\u63A8\u9001\u6D88\u606F\uFF0C\u683C\u5F0F\u5982\u4E0B\uFF1A\u5FC5\u987B\u4E3AHTTP/HTTPS\u652F\u6301POST\u8BF7\u6C42\u7684\u516C\u7F51\u53EF\u8BBF\u95EE\u7684\u5730\u5740\uFF0C\u4E0D\u80FD\u643A\u5E26\u4EFB\u4F55\u53C2\u6570\u3002")),e.createElement("a",{onClick:this.openChecksheet},_l("\u67E5\u770B\u63A8\u9001\u6570\u636E\u7ED3\u6784"))),e.createElement("div",{className:"flexRow mTop10"},e.createElement("input",{type:"text",className:"flex ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10",placeholder:_l("\u63A8\u9001\u5730\u5740"),value:l.sendContent,onChange:function(d){return n.updateSource({sendContent:d.target.value.trim()})}})))}},{key:"render",value:function(){var n=this.state.data;return v().isEmpty(n)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},n),icon:n.actionId===a.gp.PBC_OUT?"icon-sending":"icon-workflow_webhook",bg:"BGBlueAsh",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},v().includes([a.IF.SHEET,a.IF.CUSTOM_ACTION,a.IF.EVENT_PUSH],n.appType)&&n.actionId!==a.gp.PBC_OUT&&this.renderDefaultSource(),n.appType===a.IF.WEBHOOK&&this.renderCustomSource(),n.actionId===a.gp.PBC_OUT&&this.renderPushSource()))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:(v().includes([a.IF.SHEET,a.IF.EVENT_PUSH],n.appType)&&n.selectNodeId||n.appType===a.IF.WEBHOOK||n.actionId===a.gp.PBC_OUT)&&n.sendContent,onSave:this.onSave})))}}]),F}(e.Component),zo={CUSTOM:{fnName:_l("\u81EA\u5B9A\u4E49"),type:1},SUM:{fnName:_l("\u6C42\u548C"),type:2},AVERAGE:{fnName:_l("\u5E73\u5747\u503C"),type:3},MIN:{fnName:_l("\u6700\u5C0F\u503C"),type:4},MAX:{fnName:_l("\u6700\u5927\u503C"),type:5},PRODUCT:{fnName:_l("\u4E58\u79EF"),type:6},ABS:{fnName:_l("\u7EDD\u5BF9\u503C"),type:8},INT:{fnName:_l("\u6C42\u6574"),type:9},MOD:{fnName:_l("\u6C42\u4F59"),type:10},ROUND:{fnName:_l("\u56DB\u820D\u4E94\u5165"),type:11},ROUNDUP:{fnName:_l("\u5411\u4E0A\u820D\u5165"),type:12},ROUNDDOWN:{fnName:_l("\u5411\u4E0B\u820D\u5165"),type:13}},Yo,to,il=(to=Yo=function(ne){(0,k.default)(F,ne);function F(){return(0,j.default)(this,F),(0,I.default)(this,(F.__proto__||Ne()(F)).apply(this,arguments))}return(0,L.default)(F,[{key:"getFormulaKeysWithHr",value:function(){var n=v().keys(zo).slice(1);return n.splice(5,0,"HR-HR"),n}},{key:"render",value:function(){var n=this.props,l=n.fnmatch,o=n.onClickAwayExceptions,d=n.onClickAway,u=n.onFnClick,p=this.getFormulaKeysWithHr().filter(function(f){return f.match(new RegExp(".*"+l.toUpperCase()+".*"))||f==="HR-HR"});return v().last(p)==="HR-HR"&&p.pop(),e.createElement(ae.Z,{className:"fomulaFnList",onClickAwayExceptions:o,onClickAway:d},!p.filter(function(f){return f!=="HR-HR"}).length&&e.createElement("div",{className:"fnEmpty"},_l("\u6CA1\u6709\u627E\u5230\u7B26\u5408\u7684\u516C\u5F0F")),p.map(function(f,w){return f==="HR-HR"?e.createElement("li",{className:"hr",key:w}):e.createElement(ve.Z,{key:w,onClick:function(){return u(f)}},e.createElement("span",{className:"fnKey"}," ",f," "),e.createElement("span",{className:"fnName"}," ",zo[f].fnName," "))}))}}]),F}(e.Component),Yo.propTypes={fnmatch:m().string,onClickAwayExceptions:m().arrayOf(m().oneOfType([m().object,m().string])),onClickAway:m().func,onFnClick:m().func},to);const mr=function(ne){var F=ne.execute,B=ne.onChange,n=ne.isFormula,l=n===void 0?!1:n,o=[{text:_l("\u76F4\u63A5\u83B7\u53D6"),value:!0,desc:_l("\u6267\u884C\u5230\u672C\u8282\u70B9\u65F6\u83B7\u53D6\uFF0C\u5E76\u4FDD\u5B58\u5F53\u65F6\u7684\u6570\u636E\u4F9B\u6D41\u7A0B\u4E2D\u7684\u5176\u4ED6\u8282\u70B9\u4F7F\u7528")},{text:_l("\u6BCF\u6B21\u4F7F\u7528\u65F6\u52A8\u6001\u83B7\u53D6"),value:!1,desc:_l("\u6BCF\u6B21\u5176\u4ED6\u8282\u70B9\u4F7F\u7528\u5230\u672C\u8282\u70B9\u6570\u636E\u65F6\uFF0C\u91CD\u65B0\u83B7\u53D6\u6700\u65B0\u7684\u6570\u636E")}];return l&&(o=[{text:_l("\u76F4\u63A5\u8BA1\u7B97"),value:!0,desc:_l("\u6267\u884C\u5230\u672C\u8282\u70B9\u65F6\u5F00\u59CB\u8BA1\u7B97\uFF0C\u5E76\u4FDD\u5B58\u5F53\u65F6\u7684\u8FD0\u7B97\u7ED3\u679C\u4F9B\u6D41\u7A0B\u4E2D\u7684\u5176\u4ED6\u8282\u70B9\u4F7F\u7528")},{text:_l("\u6BCF\u6B21\u4F7F\u7528\u65F6\u52A8\u6001\u8BA1\u7B97"),value:!1,desc:_l("\u6BCF\u6B21\u5176\u4ED6\u8282\u70B9\u4F7F\u7528\u5230\u672C\u8282\u70B9\u7684\u8FD0\u7B97\u7ED3\u679C\u65F6\uFF0C\u91CD\u65B0\u8FDB\u884C\u6700\u65B0\u7684\u8BA1\u7B97")}]),e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},l?_l("\u8FD0\u7B97\u65B9\u5F0F"):_l("\u83B7\u53D6\u65B9\u5F0F")),o.map(function(d){return e.createElement("div",{className:"mTop15",key:d.value},e.createElement(le.Z,{text:d.text,checked:F===d.value,onClick:function(){return B(d.value)}}),d.desc&&e.createElement("div",{className:"mTop5 mLeft30 Gray_9e"},d.desc))}))};var Mo=t(55713),Ar=t(68164),lo=t(89499),Io=(0,W.Z)([`
  input {
    width: 28px;
    min-width: 28px !important;
    text-align: center;
  }
`],[`
  input {
    width: 28px;
    min-width: 28px !important;
    text-align: center;
  }
`]),$o=P.ZP.div(Io),Qo=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=l.functionError,p=o.appType,f=o.name,w=o.actionId,D=o.fieldValue,G=o.fieldControlId,H=o.fieldNodeId,De=o.formulaValue,je=o.number,lt=o.startTime,Ft=o.endTime,un=o.outUnit,dn=o.nullZero,Hn=o.selectNodeId,ca=o.execute,da=o.unit,Me=o.limit,nt=o.type,He=o.appId,ie=o.filters,We=o.reportControlId,Ue=o.reportType;if(w===a.gp.DATE_FORMULA&&!D&&!G){alert(_l("\u65E5\u671F/\u65F6\u95F4\u5B57\u6BB5\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if(v().includes([a.gp.NUMBER_FORMULA,a.gp.DATE_FORMULA],w)&&!De){alert(_l("\u8FD0\u7B97\u516C\u5F0F\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if(w===a.gp.DATE_DIFF_FORMULA&&(!lt.fieldValue&&!lt.fieldControlId||!Ft.fieldValue&&!Ft.fieldControlId)){alert(_l("\u5F00\u59CB\u65E5\u671F\u548C\u7ED3\u675F\u65E5\u671F\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if(v().includes([a.gp.OBJECT_TOTAL,a.gp.CUSTOM_ACTION_TOTAL],w)&&!Hn){alert(_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u5BF9\u8C61"),2);return}if(w===a.gp.FUNCTION_CALCULATION){if(u){alert(_l("\u51FD\u6570\u6709\u8BEF"),2);return}else if(!De){alert(_l("\u51FD\u6570\u4E0D\u80FD\u4E3A\u7A7A"),2);return}}if(w===a.gp.WORKSHEET_TOTAL&&!He){alert(_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u5DE5\u4F5C\u8868"),2);return}d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,appType:p,actionId:w,name:f.trim(),fieldValue:D,fieldControlId:G,fieldNodeId:H,formulaValue:(De||"").replace(/,\)/g,")"),number:je,startTime:lt,endTime:Ft,outUnit:un,nullZero:dn,selectNodeId:Hn,execute:ca,unit:da,limit:Me,type:nt,appId:He,filters:ie,reportControlId:We,reportType:Ue}).then(function(Ke){n.props.updateNodeData(Ke),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.handleFnClick=function(l){var o=n.state,d=o.fnmatchPos,u=o.fnmatch;if(u)n.tagtextarea.cmObj.replaceRange(l+"()",{line:d.line,ch:d.ch-1},{line:d.line,ch:d.ch+u.length},"insertfn"),n.tagtextarea.cmObj.setCursor({line:d.line,ch:d.ch+l.length}),n.tagtextarea.cmObj.focus();else{var p=n.tagtextarea.cmObj.getCursor();n.tagtextarea.cmObj.replaceRange(l+"()",n.tagtextarea.cmObj.getCursor(),void 0,"insertfn"),n.tagtextarea.cmObj.setCursor({line:p.line,ch:p.ch+l.length+1}),n.tagtextarea.cmObj.focus()}n.setState({showFormulaLayer:!1,fnmatch:""})},n.renderTag=function(l){var o=n.state.data,d=l.split(/([a-zA-Z0-9#]{24,32})-/).filter(function(f){return f}),u=o.formulaMap[d[0]]||{},p=o.formulaMap[d.join("-")]||{};return e.createElement(Z.Z,{className:"pointer",flowNodeType:u.type,appType:u.appType,actionId:u.actionId,nodeName:(0,N.iQ)(d[0],p.sourceType,u.name),controlId:d[1],controlName:p.name})},n.editFormulaDialog=function(l){var o=n.props,d=o.processId,u=o.selectNodeId;$(l.target).closest(".ant-tooltip").length||(n.state.fieldsData.length?n.setState({showFormulaDialog:!0}):z.Z.getFlowNodeAppDtos({processId:d,nodeId:u,type:2}).then(function(p){var f={},w=p.map(function(D){return{name:D.nodeName,id:D.nodeId,controls:D.controls}});p.forEach(function(D){f[D.nodeId]={type:D.nodeTypeId,appType:D.appType,actionId:D.actionId,name:D.nodeName},D.controls.forEach(function(G){f[G.controlId]||(f[D.nodeId+"-"+G.controlId]={type:G.type,name:G.controlName})})}),n.setState({fieldsData:w,showFormulaDialog:!0}),n.updateSource({formulaMap:f})}))},n.switchWorksheet=function(l,o){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",p=n.state.data,f=v().cloneDeep(p.appList),w=function(){z.Z.getStartEventDeploy({appId:l,appType:p.appType}).then(function(G){n.updateSource({controls:G.controls})})};d&&(v().remove(f,function(D){return D.id===l}),f.push({id:l,name:o,otherApkId:d,otherApkName:u})),n.updateSource({appId:l,appList:f,filters:[],controls:[],reportControlId:"",reportType:0},w)},n.state={data:{},saveRequest:!1,showFormulaLayer:!1,fnmatchPos:null,fnmatch:"",isFocus:!1,showFormulaDialog:!1,fieldsData:[],functionError:!1,showOtherWorksheet:!1},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&(this.setState({isFocus:!1}),this.getNodeDetail(n)),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n){var l=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=o.sId,u=n.processId,p=n.selectNodeId,f=n.selectNodeType,w=n.instanceId;z.Z.getNodeDetail({processId:u,nodeId:p,flowNodeType:f,selectNodeId:d,instanceId:w}).then(function(D){D.actionId===a.gp.CUSTOM_ACTION_TOTAL&&!D.selectNodeId?l.getNodeDetail(n,{sId:D.flowNodeList[0].nodeId}):l.setState({data:D})})}},{key:"renderFormulaAndOtherValue",value:function(){var n=this,l=this.state,o=l.data,d=l.isFocus;return e.createElement(ce.Z,{className:R()("minH100",{errorBorder:!!o.formulaValue&&o.isException&&!d}),projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,operatorsSetMargin:!0,type:6,content:o.formulaValue,formulaMap:o.formulaMap,getRef:function(p){return n.tagtextarea=p},onFocus:function(){return n.setState({isFocus:!0})},onChange:function(p,f,w){return n.handleChange(p,f,w,o.actionId===a.gp.NUMBER_FORMULA)},updateSource:this.updateSource})}},{key:"handleChange",value:function(n,l,o,d){var u=this;if(d){var p=this.state.fnmatch,f="";o.origin==="+input"&&(/[0-9|\+|\-|\*|\/|\(|\),]/.test(o.text[0])||(f=p+o.text[0])),o.origin==="+delete"&&p&&o.removed[0]&&(f=/^[A-Z0-9]+$/.test(o.removed[0])?p.replace(new RegExp(o.removed[0]+"$"),""):""),this.updateSource({formulaValue:l},function(){u.setState({fnmatch:f,fnmatchPos:u.tagtextarea.cmObj.getCursor(),showFormulaLayer:!!f})})}else this.updateSource({formulaValue:l})}},{key:"renderNumberContent",value:function(){var n=this,l=this.state,o=l.data,d=l.showFormulaLayer,u=l.fnmatch;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font14 Gray_75 workflowDetailDesc"},_l("\u5BF9 \u6570\u503C/\u91D1\u989D \u7B49\u5B57\u6BB5\u8FDB\u884C\u6570\u5B66\u8FD0\u7B97")),e.createElement("div",{className:"mTop20 bold"},_l("\u8FD0\u7B97")),e.createElement("div",{className:"mTop15 Gray_9e"},_l("\u82F1\u6587\u8F93\u5165+\u3001-\u3001*\u3001/\u3001( ) \u8FDB\u884C\u8FD0\u7B97 \u6216"),e.createElement("span",{className:"ThemeColor3 ThemeHoverColor2 pointer addFormula mLeft5",onClick:function(){return n.setState({showFormulaLayer:!0,fnmatch:""})}},_l("\u6DFB\u52A0\u516C\u5F0F")),"\u3002"),e.createElement("div",{className:"Gray_9e"},_l("\u5982\uFF1ASUM(1, 2, 3)*3\uFF0C\u591A\u4E2A\u6570\u503C\u8BF7\u4F7F\u7528\u82F1\u6587\u9017\u53F7\u5206\u9694")),this.renderFormulaAndOtherValue(),d&&e.createElement("div",{className:"relative"},e.createElement(il,{fnmatch:u,onFnClick:this.handleFnClick,onClickAwayExceptions:[document.querySelector(".addFormula")],onClickAway:function(){return n.setState({showFormulaLayer:!1})}})),this.renderNumberDot(),e.createElement("div",{className:"mTop20 flexRow"},e.createElement(b.Z,{className:"InlineFlex",text:_l("\u53C2\u4E0E\u8BA1\u7B97\u7684\u5B57\u6BB5\u503C\u4E3A\u7A7A\u65F6\uFF0C\u89C6\u4E3A0"),checked:o.nullZero,onClick:function(f){return n.updateSource({nullZero:!f})}})))}},{key:"renderDateControl",value:function(n,l){var o=this,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"dateFieldsVisible";return e.createElement("div",{className:"mTop10 flexRow relative"},n.fieldNodeId?e.createElement("div",{className:R()("actionControlBox flex ThemeBorderColor3 clearBorderRadius ellipsis actionCustomBox",{actionCustomBoxError:!n.fieldNodeName||!n.fieldControlName})},e.createElement("span",{className:"flexRow pTop3"},e.createElement(Z.Z,{flowNodeType:n.fieldNodeType,appType:n.fieldAppType,actionId:n.fieldActionId,nodeName:(0,N.iQ)(n.fieldNodeId,n.sourceType,n.fieldNodeName),controlId:n.fieldControlId,controlName:n.fieldControlName})),e.createElement("i",{className:"icon-delete actionControlDel ThemeColor3",onClick:function(){return l({fieldNodeType:0,fieldNodeId:"",fieldNodeName:"",fieldControlId:"",fieldControlName:""})}})):e.createElement("div",{className:"actionControlBox flex ThemeBorderColor3 clearBorderRadius"},e.createElement(he.Z,{selectedValue:n.fieldValue?ue()(n.fieldValue):null,timePicker:!0,timeMode:"minute",allowClear:!1,onOk:function(p){return l({fieldValue:p.format("YYYY-MM-DD HH:mm")})}},n.fieldValue?ue()(n.fieldValue).format("YYYY-MM-DD HH:mm"):e.createElement("span",{className:"Gray_bd"},_l("\u8BF7\u9009\u62E9\u65E5\u671F")))),e.createElement(_e.Z,{item:{type:15},fieldsVisible:this.state[d],projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,handleFieldClick:function(p){return l({fieldValue:"",fieldNodeType:p.nodeTypeId,fieldAppType:p.appType,fieldActionId:p.actionId,fieldNodeId:p.nodeId,fieldNodeName:p.nodeName,fieldControlId:p.fieldValueId,fieldControlName:p.fieldValueName,sourceType:p.sourceType})},openLayer:function(){return o.setState((0,E.default)({},d,!0))},closeLayer:function(){return o.setState((0,E.default)({},d,!1))}}))}},{key:"renderDateContent",value:function(){var n=this,l=this.state.data;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font14 Gray_75 workflowDetailDesc"},_l("\u5BF9 \u65E5\u671F/\u65F6\u95F4 \u6DFB\u52A0/\u51CF\u53BB\u5E74\u3001\u6708\u3001\u5929\u3001\u5C0F\u65F6\u3001\u5206\u8FDB\u884C\u8BA1\u7B97")),e.createElement("div",{className:"mTop20 bold"},_l("\u8F93\u5165\u65E5\u671F/\u65F6\u95F4\u5B57\u6BB5")),this.renderDateControl(l,this.updateSource),e.createElement("div",{className:"mTop20 Gray_9e"},_l("\u8BBE\u7F6E\u53C2\u4E0E\u8FD0\u7B97\u65F6\u7684\u65E5\u671F\u683C\u5F0F"),e.createElement("span",{className:"mLeft5 workflowDetailTipsWidth","data-tip":_l("\u5982\uFF1A\u53EF\u4EE5\u5C06 2008/11/11 12:23 \u683C\u5F0F\u5316\u4E3A\u201C\u65E5\u671F\u201D\uFF0C\u4EE52008/11/11\u53C2\u4E0E\u8FD0\u7B97\u3002+8h\u540E\uFF0C\u5F97\u5230\u65F6\u95F4\u7ED3\u679C\uFF1A2008/11/11 8:00")},e.createElement("i",{className:"icon-novice-circle"}))),e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:[{text:_l("\u65E5\u671F+\u65F6\u95F4"),value:1},{text:_l("\u65E5\u671F"),value:2}],value:l.number,border:!0,onChange:function(d){return n.updateSource({number:d})}}),e.createElement("div",{className:"mTop20 bold"},_l("\u8FD0\u7B97")),e.createElement("div",{className:"mTop10 Gray_9e"},_l("\u8F93\u5165\u4F60\u60F3\u8981 \u6DFB\u52A0/\u51CF\u53BB \u7684\u65F6\u95F4\u3002\u5982\uFF1A+8h+1m\uFF0C+1M-12d, -1d+8h\u3002\u5F53\u4F7F\u7528\u6570\u503C\u5B57\u6BB5\u8FD0\u7B97\u65F6\uFF0C\u8BF7\u4E0D\u8981\u5FD8\u8BB0\u8F93\u5165\u5355\u4F4D\u3002"),e.createElement(rn.default,{title:function(){return e.createElement(e.Fragment,null,e.createElement("div",null,_l("\u5E74\uFF1AY\uFF08\u5927\u5199\uFF09")),e.createElement("div",null,_l("\u6708\uFF1AM\uFF08\u5927\u5199\uFF09")),e.createElement("div",null,_l("\u65E5\uFF1Ad")),e.createElement("div",null,_l("\u5C0F\u65F6: h")),e.createElement("div",null,_l("\u5206\uFF1Am")))}},e.createElement("span",{className:"ThemeColor3"},_l("\u67E5\u770B\u65F6\u95F4\u5355\u4F4D")))),this.renderFormulaAndOtherValue(),e.createElement("div",{className:"mTop20 bold"},_l("\u8F93\u51FA\u683C\u5F0F")),e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:[{text:_l("\u65E5\u671F+\u65F6\u95F4"),value:1},{text:_l("\u65E5\u671F"),value:3},{text:_l("\u65F6\u5206"),value:8},{text:_l("\u65F6\u5206\u79D2"),value:9}],value:l.unit,border:!0,onChange:function(d){return n.updateSource({unit:d})}}))}},{key:"renderDateDiffContent",value:function(){var n=this,l=this.state.data;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font14 Gray_75 workflowDetailDesc"},_l("\u8BA1\u7B97\u4E24\u4E2A\u65E5\u671F/\u65F6\u95F4\u4E4B\u95F4\u7684\u65F6\u957F\uFF0C\u5E76\u7CBE\u786E\u5230\u5E74\u3001\u6708\u3001\u5929\u3001\u65F6\u3001\u5206\u3001\u79D2")),e.createElement("div",{className:"mTop20 bold"},_l("\u5F00\u59CB")),this.renderDateControl(l.startTime,function(o){return n.updateSource({startTime:C()({},l.startTime,o)})},"startTimeFieldsVisible"),e.createElement("div",{className:"mTop20 bold"},_l("\u7ED3\u675F")),this.renderDateControl(l.endTime,function(o){return n.updateSource({endTime:C()({},l.endTime,o)})},"endTimeFieldsVisible"),e.createElement("div",{className:"mTop20 bold"},_l("\u683C\u5F0F\u5316")),e.createElement("div",{className:"mTop10 Gray_9e"},_l("\u53C2\u4E0E\u8BA1\u7B97\u7684\u65E5\u671F\u672A\u8BBE\u7F6E\u65F6\u95F4\u65F6\uFF0C\u683C\u5F0F\u5316\u65B9\u5F0F\u4E3A\uFF1A")),e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:[{text:_l("\u5F00\u59CB 00:00\uFF0C\u7ED3\u675F24:00"),value:1},{text:_l("\u5F00\u59CB 00:00\uFF0C\u7ED3\u675F00:00"),value:2}],value:l.number,border:!0,onChange:function(d){return n.updateSource({number:d})}}),e.createElement("div",{className:"mTop20 bold"},_l("\u8F93\u51FA\u5355\u4F4D")),e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:[{text:_l("\u5E74"),value:1},{text:_l("\u6708"),value:2},{text:_l("\u5929"),value:3},{text:_l("\u65F6"),value:4},{text:_l("\u5206"),value:5},{text:_l("\u79D2"),value:6}],value:l.outUnit,border:!0,onChange:function(d){return n.updateSource({outUnit:d})}}))}},{key:"renderObjectTotalContent",value:function(){var n=this,l=this.state.data;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font14 Gray_75 workflowDetailDesc"},_l("\u5BF9\u83B7\u53D6\u5230\u7684\u591A\u6761\u6570\u636E\u5BF9\u8C61\u8FDB\u884C\u6570\u636E\u6761\u6570\u7684\u603B\u8BA1")),e.createElement("div",{className:"mTop20 bold"},_l("\u9009\u62E9\u6C47\u603B\u5BF9\u8C61")),e.createElement("div",{className:"mTop10 Gray_9e"},_l("\u5F53\u524D\u6D41\u7A0B\u4E2D\u7684\u8282\u70B9\u5BF9\u8C61")),e.createElement(fe.Z,{appList:l.flowNodeList,selectNodeId:l.selectNodeId,selectNodeObj:l.selectNodeObj,onChange:function(d){var u=v().find(l.flowNodeList,function(p){return p.nodeId===d});n.updateSource({selectNodeId:d,selectNodeObj:u})}}),e.createElement("div",{className:"mTop20 bold"},_l("\u6C47\u603B\u7ED3\u679C")),e.createElement("div",{className:"mTop15 flexRow"},e.createElement(b.Z,{className:"InlineFlex",text:_l("\u6309\u6C47\u603B\u5BF9\u8C61\u6570\u91CF\u9650\u5236\u8FD4\u56DE\u7ED3\u679C"),checked:l.limit,onClick:function(d){return n.updateSource({limit:!d})}})))}},{key:"renderFunctionExecContent",value:function(){var n=this,l=this.state,o=l.data,d=l.showFormulaDialog,u=l.fieldsData,p=l.functionError,f=[{text:_l("\u6587\u672C"),value:2},{text:_l("\u6570\u503C"),value:6},{text:_l("\u65E5\u671F"),value:15},{text:_l("\u65E5\u671F\u65F6\u95F4"),value:16}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font14 Gray_75 workflowDetailDesc"},_l("\u901A\u8FC7\u51FD\u6570\u5BF9 \u6587\u672C/\u6570\u503C/\u65E5\u671F\u65F6\u95F4 \u7B49\u6D41\u7A0B\u8282\u70B9\u5BF9\u8C61\u7684\u503C\u8FDB\u884C\u5904\u7406")),e.createElement("div",{className:"mTop20 bold"},_l("\u8BA1\u7B97")),e.createElement("div",{className:"mTop10 boderRadAll_4 BorderGrayD pointer formulaEditorBox minH100",style:{borderColor:p?"#f44336":"#ddd"}},e.createElement(Mo.Z,{value:o.formulaValue,mode:"read",placeholder:_l("\u70B9\u51FB\u7F16\u8F91\u51FD\u6570"),renderTag:this.renderTag,onClick:this.editFormulaDialog})),e.createElement("div",{className:"mTop20 bold"},_l("\u8FD0\u7B97\u7ED3\u679C\u7C7B\u578B")),e.createElement("div",{className:"mTop15 flexRow"},f.map(function(w,D){return e.createElement("div",{style:{marginRight:64},key:D},e.createElement(le.Z,{checked:o.type===w.value,text:w.text,onClick:function(){return n.updateSource({type:w.value,number:v().includes([15,16],w.value)?0:2})}}))})),o.type===6&&this.renderNumberDot(),v().includes([15,16],o.type)&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop15 flexRow alignItemsCenter"},e.createElement("div",null,_l("\u663E\u793A\u683C\u5F0F")),e.createElement(Ie.Z,{style:{width:260},className:"flowDropdown mLeft12",data:a.hn.map(function(w){return(0,h.default)({},w,{text:w.text+(" ("+ue()().format(w.format)+") ")})}),value:o.number,border:!0,onChange:function(D){return n.updateSource({number:D})}}))),d&&e.createElement(Ar.Z,{className:"workflowDialogBox",value:{expression:o.formulaValue},title:_l("\u7ED3\u679C"),controlGroups:u,renderTag:this.renderTag,onClose:function(){return n.setState({showFormulaDialog:!1})},onSave:function(D){var G=D.expression,H=D.status;n.updateSource({formulaValue:G}),n.setState({showFormulaDialog:!1,functionError:H!==1})}}))}},{key:"renderNumberDot",value:function(){var n=this,l=this.state.data;return e.createElement("div",{className:"mTop15 flexRow flowDetailNumber"},e.createElement("div",{className:"mRight12"},_l("\u7ED3\u679C\u5C0F\u6570\u70B9\u540E\u4FDD\u7559")),e.createElement($o,null,e.createElement(Mt.Z,{updateSource:function(d){var u=d.fieldValue;return n.updateSource({number:u})},type:"number",min:0,max:9,hasOtherField:!1,data:{fieldValue:l.number}})),e.createElement("div",{className:"mLeft12"},_l("\u4F4D")))}},{key:"renderWorksheetTotalContent",value:function(){var n=this,l=this.state.data,o=l.appList.find(function(p){var f=p.id;return f===l.appId}),d=l.appList.filter(function(p){return!p.otherApkId}).map(function(p){var f=p.name,w=p.id;return{text:f,value:w}}),u=[{text:_l("\u5176\u5B83\u5E94\u7528\u4E0B\u7684\u5DE5\u4F5C\u8868"),value:"other",className:"Gray_75"}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font14 Gray_75 workflowDetailDesc"},_l("\u4ECE\u5DE5\u4F5C\u8868\u4E2D\u7B5B\u9009\u7B26\u5408\u6761\u4EF6\u7684\u6570\u636E\u5E76\u8FDB\u884C\u6C47\u603B\u8BA1\u7B97\uFF0C\u5982\uFF1A\u8BB0\u5F55\u6570\u91CF\u3001\u6C42\u548C\u3001\u5E73\u5747\u3001\u6700\u5927\u3001\u6700\u5C0F\u7B49\u3002\u6CE8\u610F\uFF1A\u5F53\u6570\u636E\u9891\u7E41\u53D8\u66F4\u65F6\u53EF\u80FD\u6709\u4E00\u5B9A\u5EF6\u65F6")),e.createElement("div",{className:"mTop20 bold"},_l("\u9009\u62E9\u5DE5\u4F5C\u8868")),e.createElement(Ie.Z,{className:R()("flowDropdown mTop10 flowDropdownBorder",{"errorBorder errorBG":l.appId&&!o}),data:[d,u],value:l.appId,renderTitle:l.appId?l.appId&&!o?function(){return e.createElement("span",{className:"errorColor"},_l("\u5DE5\u4F5C\u8868\u65E0\u6548\u6216\u5DF2\u5220\u9664"))}:function(){return e.createElement(e.Fragment,null,e.createElement("span",null,o.name),o.otherApkName&&e.createElement("span",{className:"Gray_9e"},"\uFF08",o.otherApkName,"\uFF09"))}:function(){return e.createElement("span",{className:"Gray_9e"},_l("\u8BF7\u9009\u62E9"))},border:!0,openSearch:!0,onChange:function(f){f==="other"?n.setState({showOtherWorksheet:!0}):n.switchWorksheet(f)}}),l.appId&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u7B5B\u9009\u6761\u4EF6")),e.createElement("div",{className:"Gray_75 mTop5"},_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u83B7\u5F97\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u3002\u5982\u679C\u672A\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u5219\u83B7\u53D6\u6240\u6709\u6570\u636E")),l.filters.length?e.createElement(cn.Z,{projectId:this.props.companyId,relationId:this.props.relationId,processId:this.props.processId,selectNodeId:this.props.selectNodeId,openNewFilter:!0,controls:l.controls,data:l.filters,updateSource:function(f){return n.updateSource({filters:f})},filterEncryptCondition:!0}):e.createElement("div",{className:"addActionBtn mTop15"},e.createElement("span",{className:"ThemeBorderColor3",onClick:function(){return n.updateSource({filters:[{conditions:[[{}]],spliceType:2}]})}},e.createElement("i",{className:"icon-add Font16"}),_l("\u7B5B\u9009\u6761\u4EF6"))),this.renderTotalMethod()))}},{key:"renderTotalMethod",value:function(){var n=this,l=this.state.data,o=function(p){var f=v().find(l.controls,function(w){return w.controlId===p});return(0,lo.dS)(f.type,f)},d=l.controls.find(function(u){return u.controlId===l.reportControlId})||{};return e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u6C47\u603B")),e.createElement("div",{className:"mTop10 flexRow"},e.createElement(Ie.Z,{className:"flowDropdown flex",data:[{text:_l("\u8BB0\u5F55\u6570\u91CF"),value:""}].concat(l.controls.filter(function(u){return u.controlId.length===24}).map(function(u){return{text:e.createElement(e.Fragment,null,e.createElement("span",{className:"Gray_9e mRight5"},"[",a.Do[u.type],"]"),e.createElement("span",null,u.controlName)),value:u.controlId,searchText:u.controlName}})),openSearch:!0,value:l.reportControlId,border:!0,renderTitle:l.reportControlId?function(){return e.createElement("span",{className:R()({errorColor:!d.controlName})},d.controlName||_l("\u5B57\u6BB5\u5DF2\u5220\u9664"))}:null,onChange:function(p){n.updateSource({reportControlId:p,reportType:p?o(p).default:0})}}),e.createElement("div",{className:"flex mLeft10"},!!d.controlName&&e.createElement(Ie.Z,{className:"flowDropdown",data:o(l.reportControlId).list.filter(function(u){return u&&u.value}).map(function(u){return{text:u.label,value:u.value}}),value:l.reportType,border:!0,onChange:function(p){return n.updateSource({reportType:p})}}))))}},{key:"renderCustomActionTotalContent",value:function(){var n=this,l=this.state.data;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font14 Gray_75 workflowDetailDesc"},_l("\u5BF9\u81EA\u5B9A\u4E49\u52A8\u4F5C\u89E6\u53D1\u5DE5\u4F5C\u6D41\u4E2D\u7684\u6279\u91CF\u6570\u636E\u6E90\u8FDB\u884C\u6C47\u603B\u8BA1\u7B97\uFF0C\u5982\uFF1A\u8BB0\u5F55\u6570\u91CF\u3001\u6C42\u548C\u3001\u5E73\u5747\u3001\u6700\u5927\u3001\u6700\u5C0F\u7B49\u3002")),e.createElement("div",{className:"mTop20 bold"},_l("\u6C47\u603B\u5BF9\u8C61")),e.createElement(fe.Z,{appList:l.flowNodeList,selectNodeId:l.selectNodeId,selectNodeObj:l.selectNodeObj,onChange:function(d){return n.getNodeDetail(n.props,{sId:d})}}),l.selectNodeId&&this.renderTotalMethod())}},{key:"render",value:function(){var n=this,l=this.state,o=l.data,d=l.showOtherWorksheet;return v().isEmpty(o)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},o),icon:v().includes([a.gp.OBJECT_TOTAL,a.gp.WORKSHEET_TOTAL,a.gp.CUSTOM_ACTION_TOTAL],o.actionId)?"icon-sigma":"icon-workflow_function",bg:"BGGreen",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},o.actionId===a.gp.NUMBER_FORMULA&&this.renderNumberContent(),o.actionId===a.gp.DATE_FORMULA&&this.renderDateContent(),o.actionId===a.gp.DATE_DIFF_FORMULA&&this.renderDateDiffContent(),o.actionId===a.gp.OBJECT_TOTAL&&this.renderObjectTotalContent(),o.actionId===a.gp.FUNCTION_CALCULATION&&this.renderFunctionExecContent(),o.actionId===a.gp.WORKSHEET_TOTAL&&this.renderWorksheetTotalContent(),o.actionId===a.gp.CUSTOM_ACTION_TOTAL&&this.renderCustomActionTotalContent(),(o.appId||o.actionId!==a.gp.WORKSHEET_TOTAL)&&e.createElement(mr,{isFormula:!v().includes([a.gp.WORKSHEET_TOTAL,a.gp.CUSTOM_ACTION_TOTAL],o.actionId),execute:o.execute,onChange:function(p){return n.updateSource({execute:p})}})))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:o.actionId===a.gp.NUMBER_FORMULA&&o.formulaValue||o.actionId===a.gp.DATE_FORMULA&&(o.fieldValue&&o.fieldControlId||o.formulaValue)||o.actionId===a.gp.DATE_DIFF_FORMULA&&(o.startTime.fieldValue||o.startTime.fieldControlId)&&(o.endTime.fieldValue||o.endTime.fieldControlId)||v().includes([a.gp.OBJECT_TOTAL,a.gp.CUSTOM_ACTION_TOTAL],o.actionId)&&o.selectNodeId||o.actionId===a.gp.FUNCTION_CALCULATION&&o.formulaValue||o.actionId===a.gp.WORKSHEET_TOTAL&&o.appId,onSave:this.onSave})),d&&e.createElement(ur.Z,{projectId:this.props.companyId,worksheetType:0,selectedAppId:this.props.relationId,selectedWorksheetId:o.appId,visible:!0,onOk:function(p,f,w){var D=n.props.relationId===p;n.switchWorksheet(f,w.workSheetName,!D&&p,!D&&w.appName)},onHide:function(){return n.setState({showOtherWorksheet:!1})}}))}}]),F}(e.Component),io=t(12692),No=t(24488),zr=(0,W.Z)([`
  padding: 0 7px;
  height: 22px;
  background: #f5f5f5;
  border-radius: 2px;
  color: #9e9e9e;
  display: flex;
  align-items: center;
  white-space: nowrap;
  &.yellow {
    background: #ffa340;
    color: #fff !important;
  }
  &.blue {
    background: #2196f3;
    color: #fff !important;
  }
`],[`
  padding: 0 7px;
  height: 22px;
  background: #f5f5f5;
  border-radius: 2px;
  color: #9e9e9e;
  display: flex;
  align-items: center;
  white-space: nowrap;
  &.yellow {
    background: #ffa340;
    color: #fff !important;
  }
  &.blue {
    background: #2196f3;
    color: #fff !important;
  }
`]),no=P.ZP.div(zr),xo=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.currentMapId="",n.mapData={},n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.name,p=o.accounts,f=o.messageTemplate;if(!p.length){alert(_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u53D1\u9001\u4EBA"),2);return}if(!f.id){alert(_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u6A21\u677F"),2);return}d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,name:u.trim(),accounts:p,smsContent:f.messageContent,templateId:f.id}).then(function(w){n.props.updateNodeData(w),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.setTemplate=function(){var l=n.state.data,o=l.messageTemplate.messageContent;n.mapData={},(o.match(/\$\(.*?\)|\$.*?\$/g)||[]).forEach(function(d){var u=Math.random().toString();n.mapData[u]=d,o=o.replace(d,"$"+u+"$")}),n.setState({showSetTemplate:!0,cacheTemplateContent:o})},n.editTemplate=function(){var l=n.state.data,o=l.messageTemplate;n.setState({showSetTemplate:!1,addNewTemplate:!0,templateId:o.id,sign:o.companySignature,messageContent:o.messageContent,type:o.type})},n.delTemplate=function(){n.updateSource({messageTemplate:{id:"",companySignature:"",messageContent:"",type:0}})},n.onSaveTemplate=function(l){var o=n.state,d=o.sign,u=o.messageContent,p=o.type,f=o.templateId,w=o.saveRequest;w||(z.Z.createSMSTemplate({companyId:n.props.companyId,processId:n.props.processId,nodeId:n.props.selectNodeId,companySignature:d,messageContent:u,type:p,templateId:f,referenceValue:l}).then(function(D){var G=v().cloneDeep(n.state.data);G.messageTemplate.id=D.id,G.messageTemplate.companySignature=D.companySignature,G.messageTemplate.messageContent=D.messageContent,G.messageTemplate.status=D.status,G.messageTemplate.type=D.type,G.formulaMap=C()({},G.formulaMap,D.formulaMap),n.setState({data:G,addNewTemplate:!1,sign:"",messageContent:"",type:0,templateId:"",saveRequest:!1})}),n.setState({saveRequest:!0,showTestDialog:!1}))},n.saveTemplateSetting=function(){var l=n.state.cacheTemplateContent,o=v().cloneDeep(n.state.data.messageTemplate);(l.match(/\$[^ \r\n]+?\$/g)||[]).forEach(function(d){l=l.replace(d,n.mapData[d.replace(/\$/g,"")])}),n.setState({showSetTemplate:!1,isSelectNewTpl:!1}),o.messageContent=l,n.updateSource({messageTemplate:o})},n.state={data:{},saveRequest:!1,showSelectUserDialog:!1,keywords:"",addNewTemplate:!1,templateId:"",sign:"",messageContent:"",type:0,showSignList:!1,fieldsVisible:!1,isSelectNewTpl:!1,showSetTemplate:!1,cacheTemplateContent:"",fieldsData:[],showTestDialog:!1,testArray:[]},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&(this.setState({keywords:""}),this.getNodeDetail(n)),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"componentDidUpdate",value:function(n,l){this.tagBox&&l.data.messageTemplate&&l.data.messageTemplate.messageContent!==this.state.data.messageTemplate.messageContent&&this.tagBox.setValue(this.state.data.messageTemplate.messageContent.replace(/\$\(.*?\)/g,"$-$"))}},{key:"getNodeDetail",value:function(n){var l=this,o=n.processId,d=n.selectNodeId,u=n.selectNodeType,p=n.instanceId;z.Z.getNodeDetail({processId:o,nodeId:d,flowNodeType:u,instanceId:p}).then(function(f){l.setState({data:f})})}},{key:"renderContent",value:function(){var n=this,l=this.state,o=l.data,d=l.showSelectUserDialog;return e.createElement(e.Fragment,null,md.global.Config.IsPlatformLocal&&e.createElement("div",{className:"Gray_75 workflowDetailDesc"},e.createElement("span",{className:"TxtMiddle"},_l("\u77ED\u4FE10.05\u5143/\u6761\uFF0C\u81EA\u52A8\u4ECE\u4F01\u4E1A\u8D26\u52A1\u4E2D\u5FC3\u6263\u8D39\u300270\u5B57\u8BA1\u4E00\u6761\u77ED\u4FE1\uFF0C\u8D85\u8FC770\u5B57\u4EE567\u5B57\u6BCF\u6761\u8BA1\u8D39\u3002\u6BCF\u4E2A\u6807\u70B9\u3001\u7A7A\u683C\u3001\u82F1\u6587\u5B57\u6BCD\u90FD\u7B97\u4E00\u4E2A\u5B57\u3002\u77ED\u4FE1\u5B9E\u9645\u53D1\u9001\u53EF\u80FD\u670910-20\u5206\u949F\u7684\u5EF6\u65F6\u3002\u6682\u4E0D\u652F\u6301\u6D77\u5916\u624B\u673A\u53F7\u3002"))),e.createElement("div",{className:"mTop20 bold"},_l("\u53D1\u9001\u7ED9")),e.createElement($n.Z,{companyId:this.props.companyId,appId:this.props.relationType===2?this.props.relationId:"",accounts:o.accounts,updateSource:this.updateSource}),e.createElement("div",{className:"flexRow mTop15 ThemeColor3 workflowDetailAddBtn",onClick:function(){return n.setState({showSelectUserDialog:!0})}},e.createElement("i",{className:"Font28 icon-task-add-member-circle mRight10"}),_l("\u9009\u62E9\u4EBA\u5458\u3001\u53F7\u7801\u6216\u8F93\u5165\u624B\u673A\u53F7"),e.createElement(gn.Z,{appId:this.props.relationType===2?this.props.relationId:"",specialType:3,visible:d,companyId:this.props.companyId,processId:this.props.processId,nodeId:this.props.selectNodeId,unique:!1,accounts:o.accounts,updateSource:this.updateSource,onClose:function(){return n.setState({showSelectUserDialog:!1})}})),o.messageTemplate.companySignature&&this.renderTemplateContent(),!o.messageTemplate.companySignature&&this.renderTemplateList())}},{key:"renderTemplateContent",value:function(){var n=this,l=this.state.data,o=l.messageTemplate.status;return e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u77ED\u4FE1\u5185\u5BB9")),e.createElement("div",{className:"mTop10 flowTplBox"},e.createElement("div",{className:R()("flowTplHeader flexRow alignItemsCenter",{gray:o===0},{green:o===1},{red:o===2})},o===0&&e.createElement(e.Fragment,null,e.createElement("i",{className:"Font16 Gray_75 icon-workflow_under_review"}),e.createElement("div",{className:"mLeft10 flex bold"},_l("\u6A21\u677F\u5BA1\u6838\u4E2D...")),e.createElement("div",{className:"Gray_75"},_l("\u65E0\u6CD5\u4FEE\u6539\u5BA1\u6838\u4E2D\u6A21\u677F"))),o===1&&e.createElement(e.Fragment,null,e.createElement("i",{className:"Font16 icon-Import-success"}),e.createElement("div",{className:"mLeft10 flex bold"},_l("\u5BA1\u6838\u901A\u8FC7"))),o===2&&e.createElement(e.Fragment,null,e.createElement("span",{className:"workflowDetailTipsWidth","data-tip":l.messageTemplate.failCause},e.createElement("i",{className:"Font16 icon-workflow_failure"})),e.createElement("div",{className:"mLeft10 flex bold"},_l("\u5BA1\u6838\u5931\u8D25")))),e.createElement("div",{className:"pLeft16 pRight16 pTop15 pBottom20"},e.createElement("div",{className:"bold"},_l("\u77ED\u4FE1\u7B7E\u540D\uFF1A")),e.createElement("div",{className:"mTop5"},l.messageTemplate.companySignature),e.createElement("div",{className:"mTop15 bold"},_l("\u7C7B\u578B\uFF1A")),l.messageTemplate.type===2?_l("\u8425\u9500\u63A8\u5E7F"):l.messageTemplate.type===3?_l("\u91D1\u878D\u4EA4\u6613"):_l("\u884C\u4E1A\u901A\u77E5"),e.createElement("div",{className:"mTop15 bold"},_l("\u5185\u5BB9")),e.createElement(io.Z,{className:"flowTplContent",defaultValue:l.messageTemplate.messageContent.replace(/\$\(.*?\)/g,"$-$"),getRef:function(u){n.tagBox=u},readonly:!0,renderTag:function(u,p){var f=u.split(/([a-zA-Z0-9#]{24,32})-/).filter(function(G){return G}),w=l.formulaMap[f[0]]||{},D=l.formulaMap[f.join("-")]||{};return!w.name||!D.name?e.createElement("span",{style:{color:"#ffa340"}},"(",_l("\u7F3A\u5C11\u5B57\u6BB5\u53D8\u91CF"),")"):e.createElement("span",null,"(",w.name,">",D.name,")")}}),e.createElement("div",{className:"mTop15"},o!==0&&e.createElement("span",{className:"flowTplBtn ThemeBorderColor3 ThemeColor3",onClick:o===1?this.setTemplate:this.editTemplate},_l("\u4FEE\u6539")),e.createElement("span",{className:"flowTplBtn ThemeBorderColor3 ThemeColor3",onClick:this.delTemplate},_l("\u5220\u9664"))))))}},{key:"renderTemplateList",value:function(){var n=this,l=this.state,o=l.data,d=l.keywords,u=o.templates.filter(function(p){return p.companySignature.toLocaleLowerCase().indexOf(d.toLocaleLowerCase())>-1||p.messageContent.toLocaleLowerCase().indexOf(d.toLocaleLowerCase())>-1});return e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 flexRow"},e.createElement("div",{className:"flex"},_l("\u9009\u62E9\u5DF2\u5BA1\u6838\u6A21\u677F")),e.createElement("div",{className:"ThemeColor3 ThemeHoverColor2 pointer",onClick:function(){return n.setState({addNewTemplate:!0})}},e.createElement("i",{className:"icon-plus mRight5"}),_l("\u521B\u5EFA\u65B0\u6A21\u677F"))),e.createElement("div",{className:"mTop10 relative flexRow"},e.createElement("input",{type:"text",placeholder:_l("\u641C\u7D22"),className:"ThemeBorderColor3 actionControlBox flex pLeft35 pRight10 pTop0 pBottom0",value:d,onChange:function(f){return n.setState({keywords:f.currentTarget.value.trim()})}}),e.createElement("i",{className:"icon-workflow_find Font20 Gray_9e Absolute mTop8 mLeft10"})),u.length?e.createElement("ul",{className:"mTop10 workflowMessageList"},u.map(function(p,f){return e.createElement("li",{key:f,className:"flexRow alignItemsCenter",onClick:function(){return n.selectTemplate(p.id,p.companySignature,p.messageContent)}},e.createElement(le.Z,{className:"Font15",disabled:!0}),e.createElement(no,{className:R()("mRight10",{yellow:p.type===2,blue:p.type===3})},p.type===2?_l("\u8425\u9500\u63A8\u5E7F"):p.type===3?_l("\u91D1\u878D\u4EA4\u6613"):_l("\u884C\u4E1A\u901A\u77E5")),e.createElement("div",{className:"alignItemsCenter workflowMessageListItem"},n.getTemplateListContent("\u3010"+p.companySignature+"\u3011"+p.messageContent,p.referenceValue)))})):e.createElement("div",{className:"flexColumn mTop40 alignItemsCenter"},e.createElement("i",{className:"icon-workflow_sms Gray_c Font64"}),e.createElement("div",{className:"Font15 Gray_9e mTop30"},_l("\u6CA1\u6709\u5DF2\u5BA1\u6838\u6A21\u677F\u3001\u70B9\u51FB\u521B\u5EFA\u65B0\u6A21\u677F"))))}},{key:"getTemplateListContent",value:function(n){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return T()(l).forEach(function(o){n=n.replace(new RegExp(o.replace(/\$/g,"\\$").replace(/\(/g,"\\(").replace(/\)/g,"\\)"),"g"),"#{"+l[o]+"}")}),n}},{key:"selectTemplate",value:function(n,l,o){var d=this,u=this.state.data,p=v().cloneDeep(u.messageTemplate);p.id=n,p.companySignature=l,p.messageContent=o,p.status=1,this.updateSource({messageTemplate:p},function(){d.setState({isSelectNewTpl:!0}),d.setTemplate()})}},{key:"renderNewTemplate",value:function(){var n=this,l=this.state,o=l.data,d=l.sign,u=l.messageContent,p=l.type,f=l.showSignList,w=l.isSelectNewTpl,D=l.showTestDialog,G=l.testArray,H=o.companySignatureList.filter(function(je){return je.indexOf(d)>-1}),De=[{text:_l("\u884C\u4E1A\u901A\u77E5"),value:1,desc:_l("\u4E00\u822C\u6027\u901A\u77E5\u3002\u5982\u9A8C\u8BC1\u7801\u77ED\u4FE1\u3001\u901A\u77E5\u77ED\u4FE1\u3001\u7269\u6D41\u5FEB\u9012\u77ED\u4FE1\u3001\u8BA2\u5355\u77ED\u4FE1")},{text:_l("\u8425\u9500\u63A8\u5E7F"),value:2,desc:_l("\u5982\uFF1A\u4FC3\u9500\u3001\u4F18\u60E0\u3001\u6D3B\u52A8\u62A5\u540D\u7B49\u4EA7\u54C1\u63A8\u5E7F\u548C\u54C1\u724C\u5BA3\u4F20\u7C7B\u77ED\u4FE1\uFF1B\u7CFB\u7EDF\u5C06\u81EA\u52A8\u4E3A\u6B64\u7C7B\u77ED\u4FE1\u672B\u5C3E\u9644\u52A0\u3010\u9000\u8BA2\u3011\u5B57\u6837")},{text:_l("\u91D1\u878D\u4EA4\u6613\uFF08\u6682\u4E0D\u652F\u6301\uFF09"),value:3,desc:_l("\u5982\uFF1A\u8D44\u91D1\u5230\u8D26\u63D0\u793A\u3001\u652F\u4ED8\u9A8C\u8BC1\u7801\u3001\u4EA4\u6613\u63D0\u9192\u3001\u50AC\u7F34\u901A\u77E5\u7B49"),disabled:!0}];return e.createElement("div",{className:"pBottom20"},e.createElement("div",{className:"ThemeColor3 ThemeHoverColor2 pointer"},e.createElement("span",{className:"pointer",onClick:function(){w&&n.delTemplate(),n.setState({addNewTemplate:!1,isSelectNewTpl:!1,sign:"",messageContent:""})}},e.createElement("i",{className:"icon-backspace Font20"}),e.createElement("span",{className:"mLeft5"},_l("\u8FD4\u56DE")))),e.createElement("div",{className:"Font18 bold mTop20"},w?_l("\u4FEE\u6539\u6A21\u677F\u5185\u5BB9"):_l("\u521B\u5EFA\u65B0\u6A21\u677F")),e.createElement("div",{className:"bold mTop20"},_l("\u77ED\u4FE1\u7B7E\u540D")),e.createElement("div",{className:"Gray_75 mTop10"},_l("\u8BF7\u8C28\u614E\u586B\u5199\u60A8\u7684\u7EC4\u7EC7\u7B80\u79F0\u3001\u7F51\u7AD9\u540D\u3001\u54C1\u724C\u540D\uFF0C2-8\u4E2A\u6C49\u5B57\u3002\u5982\u7B7E\u540D\u4E0D\u7B26\u5408\u89C4\u8303\uFF0C\u5C06\u4F1A\u88AB\u8FD0\u8425\u5546\u62E6\u622A\u3002")),e.createElement("div",{className:"mTop10 relative flexRow",style:{width:150}},e.createElement("input",{type:"text",maxLength:8,placeholder:_l("\u8BF7\u8F93\u5165\u7B7E\u540D"),className:"ThemeBorderColor3 actionControlBox flex pLeft10 pRight10 pTop0 pBottom0",value:d,onFocus:function(){return n.setState({showSignList:!0})},onBlur:function(){return n.setState({showSignList:!1})},onChange:function(lt){return n.setState({sign:lt.currentTarget.value.replace(/[]/g,"").trim()})}}),f&&e.createElement(ae.Z,{className:"fomulaFnList",style:{right:0}},!H.length&&e.createElement("div",{className:"fnEmpty"},_l("\u6CA1\u6709\u53EF\u7528\u7684\u7B7E\u540D")),H.map(function(je,lt){return e.createElement(ve.Z,{key:lt,onMouseDown:function(){return n.setState({sign:je})}},je)}))),e.createElement("div",{className:"bold mTop20"},_l("\u77ED\u4FE1\u7C7B\u578B")),e.createElement("div",{className:"Gray_75 mTop10"},_l("\u8BF7\u8C28\u614E\u9009\u62E9\u60A8\u7684\u77ED\u4FE1\u7C7B\u578B\uFF0C\u540E\u7EED\u5982\u679C\u5728\u53D1\u9001\u65F6\u51FA\u73B0\u5B9E\u9645\u7C7B\u578B\u4E0D\u7B26\u5408\u9884\u8BBE\u7C7B\u578B\u7684\uFF0C\u53EF\u80FD\u9762\u4E34\u6A21\u7248\u88AB\u505C\u7528\u7684\u98CE\u9669")),De.map(function(je){return e.createElement("div",{className:"mTop15",key:je.value},e.createElement(Rn.Z,{popupPlacement:"top",text:je.desc},e.createElement("span",null,e.createElement(le.Z,{text:je.text,disabled:je.disabled,checked:p===je.value,onClick:function(){return n.setState({type:je.value})}}))))}),e.createElement("div",{className:"bold mTop20"},_l("\u77ED\u4FE1\u5185\u5BB9")),e.createElement("div",{className:"Gray_75 mTop10"},_l("\u4E3A\u4FDD\u8BC1\u77ED\u4FE1\u7684\u7A33\u5B9A\u63A8\u9001\uFF0C\u4EE5\u4E0B\u5185\u5BB9\u987B\u5BA1\u6838\u540E\u624D\u80FD\u4F7F\u7528\u3002\u591A\u4E8E70\u5B57\uFF08\u542B\u7B7E\u540D\uFF09\u7684\u77ED\u4FE1\u630967\u5B57\u6BCF\u6761\u8BA1\u8D39")),e.createElement(ce.Z,{className:"minH100",projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,type:2,content:u,formulaMap:o.formulaMap,onChange:function(lt,Ft,un){return n.setState({messageContent:Ft.replace(//g,"[").replace(//g,"]")})},updateSource:this.updateSource}),e.createElement("div",{className:"Gray_75 mTop10"}),e.createElement("div",{className:"mTop30"},e.createElement("span",{className:"saveTplBtn ThemeBGColor3 ThemeHoverBGColor2",onClick:function(){var lt=v().uniq(u.match(/\$[^ \r\n]+?\$/g)||[]);if(!d){alert(_l("\u7B7E\u540D\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if(!u){alert(_l("\u77ED\u4FE1\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if(lt.length){n.setState({showTestDialog:!0,testArray:lt});return}n.onSaveTemplate()}},_l("\u63D0\u4EA4\u5BA1\u6838"))),e.createElement("div",{className:"mTop20 Gray_75 workflowDetailDesc"},e.createElement("div",null,e.createElement("span",{className:"mRight10"},"\u2022"),_l("\u5BA1\u6838\u65F6\u95F4\u7EA6\u4E3A1\u5C0F\u65F6\uFF0C\u975E\u5DE5\u4F5C\u65F6\u95F4\u63D0\u4EA4\u5BA1\u6838\u4F1A\u5EF6\u957F")),e.createElement("div",null,e.createElement("span",{className:"mRight10"},"\u2022"),_l("\u6211\u4EEC\u4F1A\u628A\u5BA1\u6838\u901A\u8FC7\u7684\u77ED\u4FE1\u6A21\u677F\u540C\u6B65\u5230\u300C\u5DE5\u4F5C\u6D41 > \u77ED\u4FE1\u6A21\u677F\u300D"))),D&&e.createElement(qr,{title:_l("\u8BBE\u7F6E\u53C2\u8003\u503C"),description:_l("\u8FD9\u4E9B\u662F\u60A8\u77ED\u4FE1\u6A21\u677F\u4E2D\u4F7F\u7528\u5230\u7684\u52A8\u6001\u503C\uFF0C\u8BF7\u7ED9\u51FA\u8303\u4F8B\u6570\u636E\u7528\u4E8E\u4EBA\u5DE5\u5BA1\u6838\u65F6\u9A8C\u8BC1\u60A8\u7684\u77ED\u4FE1\u7C7B\u578B"),onOk:this.onSaveTemplate,onClose:function(){return n.setState({showTestDialog:!1})},testArray:G,formulaMap:o.formulaMap,testMap:o.referenceValue||{},isRequired:!0,previewContent:"\u3010"+d+"\u3011"+u}))}},{key:"statisticalWordNumber",value:function(){var n=this.state,l=n.sign,o=n.messageContent,d=(o.match(/\$[^ \r\n]+?\$/g)||[]).length*8;return l.length+o.replace(/\$[^ \r\n]+?\$/g,"").length+d}},{key:"renderSetTemplate",value:function(){var n=this,l=this.state,o=l.data,d=l.fieldsVisible,u=l.fieldsData,p=l.cacheTemplateContent,f=l.isSelectNewTpl;return e.createElement(e.Fragment,null,e.createElement("div",{className:"ThemeColor3 ThemeHoverColor2 pointer"},e.createElement("span",{className:"pointer",onClick:function(){n.setState({showSetTemplate:!1}),f&&n.delTemplate()}},e.createElement("i",{className:"icon-backspace Font20"}),e.createElement("span",{className:"mLeft5"},_l("\u8FD4\u56DE")))),e.createElement("div",{className:"bold mTop20 Font18"},_l("\u5DF2\u5BA1\u6838\u6A21\u677F")),e.createElement("div",{className:"mTop10 Gray_75 flexRow"},e.createElement("div",{className:"flex"},_l("\u8BF7\u4FEE\u6539\u5DF2\u5BA1\u6838\u6A21\u677F\u4E2D\u7684\u53D8\u91CF")),e.createElement("div",{className:"ThemeColor3 ThemeHoverColor2 pointer",onClick:this.editTemplate},_l("\u4FEE\u6539\u6A21\u677F\u7684\u5185\u5BB9"))),e.createElement("div",{className:"mTop10 relative"},e.createElement(io.Z,{className:"flowTplSettingContent minH100",defaultValue:p,height:0,readonly:!0,getRef:function(D){n.tagtextarea=D},renderTag:function(D,G){var H=(n.mapData[D]||"").replace(/\$/g,"").split(/([a-zA-Z0-9#]{24,32})-/).filter(function(lt){return lt}),De=o.formulaMap[H[0]]||{},je=o.formulaMap[H.join("-")]||{};return!De.name||!je.name?e.createElement("span",{className:"fieldInsertBtn ThemeBGColor4 ThemeHoverBGColor3",onClick:function(){return n.insertFields(D)}},_l("\u70B9\u51FB\u63D2\u5165\u5B57\u6BB5")):e.createElement(Z.Z,{className:"pointer",flowNodeType:De.type,appType:De.appType,actionId:De.actionId,nodeName:(0,N.iQ)(H[0],je.sourceType,De.name),controlName:je.name,onClick:function(){return n.insertFields(D)}})}}),d&&!!u.length&&e.createElement(No.Z,{className:"actionFields",noItemTips:_l("\u6CA1\u6709\u53EF\u7528\u7684\u5B57\u6BB5"),condition:u,handleFieldClick:function(D){var G=D.nodeId,H=D.fieldValueId,De=D.nodeName,je=D.fieldValueName,lt=D.fieldValueType,Ft=D.nodeTypeId,un=D.appType,dn=D.actionId,Hn=v().cloneDeep(o.formulaMap);Hn[G]={type:Ft,appType:un,actionId:dn,name:De},Hn[G+"-"+H]={type:lt,name:je},n.mapData[n.currentMapId]="$"+G+"-"+H+"$",n.setState({fieldsVisible:!1}),n.updateSource({formulaMap:Hn},function(){n.tagtextarea.updateTextareaView()})},onClose:function(){return n.setState({fieldsVisible:!1})}})),e.createElement("div",{className:"mTop30"},e.createElement("span",{className:"saveTplBtn ThemeBGColor3 ThemeHoverBGColor2",onClick:this.saveTemplateSetting},_l("\u4FDD\u5B58"))))}},{key:"insertFields",value:function(n){var l=this,o=this.props,d=o.processId,u=o.selectNodeId;this.currentMapId=n,this.state.fieldsData.length?this.setState({fieldsVisible:!0}):z.Z.getFlowNodeAppDtos({processId:d,nodeId:u,type:2}).then(function(p){var f=p.map(function(w){return{text:w.nodeName,id:w.nodeId,nodeTypeId:w.nodeTypeId,appName:w.appName,appType:w.appType,appTypeName:w.appTypeName,actionId:w.actionId,items:w.controls.map(function(D){return{type:D.type,value:D.controlId,field:a.Do[D.type],text:D.controlName}})}});l.setState({fieldsData:f,fieldsVisible:!0})})}},{key:"render",value:function(){var n=this.state,l=n.data,o=n.addNewTemplate,d=n.showSetTemplate;return v().isEmpty(l)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},l),icon:"icon-workflow_sms",bg:"BGBlue",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},!o&&!d&&this.renderContent(),o&&this.renderNewTemplate(),d&&this.renderSetTemplate()))),!o&&!d&&e.createElement(be,(0,h.default)({},this.props,{isCorrect:l.accounts.length&&l.messageTemplate.id,onSave:this.onSave})))}}]),F}(e.Component),fr=t(63355),Dr=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.genFields=function(l){var o=l.controls,d=l.fields;o.forEach(function(u){d.push({fieldId:u.controlId,type:u.type,enumDefault:u.enumDefault,nodeId:"",nodeName:"",fieldValueId:"",fieldValueName:"",fieldValue:u.type===26||u.type===27?"[]":""})}),n.updateSource({fields:d})},n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.name,p=o.fields,f=o.actionId,w=o.appType,D=o.accounts,G=o.ccAccounts,H=!1;if(!D.length){alert(_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u53D1\u9001\u4EBA"),2);return}if(!d){if(o.controls.forEach(function(De){De.required&&o.fields.forEach(function(je){De.controlId===je.fieldId&&!je.fieldValue&&!je.fieldValueId&&H++})}),H>0){alert(_l("\u6709\u5FC5\u586B\u5B57\u6BB5\u672A\u586B\u5199"),2);return}z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,name:u.trim(),fields:p,actionId:f,appType:w,accounts:D,ccAccounts:G}).then(function(De){n.props.updateNodeData(De),n.props.closeDetail()}),n.setState({saveRequest:!0})}},n.insertFields=function(){var l=n.props,o=l.processId,d=l.selectNodeId;n.state.fieldsData.length?n.setState({fieldsVisible:!0}):z.Z.getFlowNodeAppDtos({processId:o,nodeId:d,type:2}).then(function(u){var p=u.map(function(f){return{text:f.nodeName,id:f.nodeId,nodeTypeId:f.nodeTypeId,appName:f.appName,appType:f.appType,appTypeName:f.appTypeName,actionId:f.actionId,nAlias:f.alias,items:f.controls.map(function(w){return{type:w.type,value:w.controlId,field:a.Do[w.type],text:w.controlName,cAlias:w.alias}})}});n.setState({fieldsData:p,fieldsVisible:!0})})},n.state={data:{},saveRequest:!1,showSelectUserDialog:!1,cacheKey:+new Date,showSelectCCUserDialog:!1,fieldsVisible:!1,fieldsData:[]},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.mounted=!0,this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"getNodeDetail",value:function(n){var l=this,o=n.processId,d=n.selectNodeId,u=n.selectNodeType,p=n.instanceId;z.Z.getNodeDetail({processId:o,nodeId:d,flowNodeType:u,instanceId:p}).then(function(f){l.setState({data:f,cacheKey:+new Date}),f.fields.length||l.genFields(f)})}},{key:"renderContent",value:function(){var n=this,l=this.state,o=l.data,d=l.showSelectUserDialog,u=l.cacheKey,p=l.showSelectCCUserDialog,f=l.fieldsVisible,w=l.fieldsData,D=[{text:_l("\u6807\u51C6\uFF08\u652F\u6301\u6284\u9001\uFF0C\u6BCF\u4E2A\u6536\u4EF6\u4EBA\u90FD\u53EF\u4EE5\u770B\u5230\u6240\u6709\u6536\u4EF6\u4EBA\u548C\u6284\u9001\u4EBA\uFF09"),value:a.gp.SEND_EMAIL},{text:_l("\u7FA4\u53D1\u5355\u663E\uFF08\u91C7\u7528\u4E00\u5BF9\u4E00\u5355\u72EC\u53D1\u9001\uFF0C\u6BCF\u4E2A\u6536\u4EF6\u4EBA\u53EA\u80FD\u770B\u5230\u81EA\u5DF1\u7684\u5730\u5740\uFF09"),value:a.gp.SEND_EMAIL_SINGLE_DISPLAY}],G=[{text:_l("\u7EAF\u6587\u672C"),value:0},{text:_l("\u5BCC\u6587\u672C\uFF08\u652F\u6301html\u6837\u5F0F\uFF09"),value:1}];return e.createElement(e.Fragment,null,md.global.Config.IsPlatformLocal&&e.createElement("div",{className:"Gray_75 workflowDetailDesc"},_l("\u90AE\u4EF60.03\u5143/\u5C01\uFF0C\u81EA\u52A8\u4ECE\u8D26\u52A1\u4E2D\u5FC3\u6263\u8D39\u3002")),e.createElement("div",{className:"mTop20 bold"},_l("\u53D1\u9001\u65B9\u5F0F")),e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:D,value:o.actionId,border:!0,onChange:function(De){n.updateSource({actionId:De,ccAccounts:De===a.gp.SEND_EMAIL_SINGLE_DISPLAY?[]:o.ccAccounts})}}),e.createElement("div",{className:"mTop20 bold"},_l("\u6536\u4EF6\u4EBA")),e.createElement($n.Z,{companyId:this.props.companyId,appId:this.props.relationType===2?this.props.relationId:"",accounts:o.accounts,updateSource:this.updateSource}),e.createElement("div",{className:"flexRow mTop15 ThemeColor3 workflowDetailAddBtn",onClick:function(){return n.setState({showSelectUserDialog:!0})}},e.createElement("i",{className:"Font28 icon-task-add-member-circle mRight10"}),_l("\u9009\u62E9\u4EBA\u5458\u3001\u90AE\u7BB1\u5730\u5740\u6216\u8F93\u5165\u90AE\u7BB1"),e.createElement(gn.Z,{appId:this.props.relationType===2?this.props.relationId:"",specialType:5,visible:d,companyId:this.props.companyId,processId:this.props.processId,nodeId:this.props.selectNodeId,unique:!1,accounts:o.accounts,updateSource:this.updateSource,onClose:function(){return n.setState({showSelectUserDialog:!1})}})),o.actionId===a.gp.SEND_EMAIL&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u6284\u9001\u4EBA")),e.createElement($n.Z,{companyId:this.props.companyId,appId:this.props.relationType===2?this.props.relationId:"",accounts:o.ccAccounts,updateSource:function(De){var je=De.accounts;return n.updateSource({ccAccounts:je})}}),e.createElement("div",{className:"flexRow mTop15 ThemeColor3 workflowDetailAddBtn",onClick:function(){return n.setState({showSelectCCUserDialog:!0})}},e.createElement("i",{className:"Font28 icon-task-add-member-circle mRight10"}),_l("\u9009\u62E9\u4EBA\u5458\u3001\u90AE\u7BB1\u5730\u5740\u6216\u8F93\u5165\u90AE\u7BB1"),e.createElement(gn.Z,{appId:this.props.relationType===2?this.props.relationId:"",specialType:5,visible:p,companyId:this.props.companyId,processId:this.props.processId,nodeId:this.props.selectNodeId,unique:!1,accounts:o.ccAccounts,updateSource:function(De){var je=De.accounts;return n.updateSource({ccAccounts:je})},onClose:function(){return n.setState({showSelectCCUserDialog:!1})}}))),o.fields.map(function(H,De){var je=v().find(o.controls,function(lt){return lt.controlId===H.fieldId});return e.createElement("div",{key:De,className:"relative"},e.createElement("div",{className:"mTop15 ellipsis Font13 bold"},je.controlName,je.required&&e.createElement("span",{className:"mLeft5 red"},"*")),H.fieldId==="attachments"&&e.createElement("div",{className:"mTop5 Gray_75"},_l("\u9644\u4EF6\u603B\u5927\u5C0F\u4E0D\u8D85\u8FC750M")),H.fieldId==="content"&&e.createElement("div",{className:"flexRow mTop10 relative"},G.map(function(lt,Ft){return e.createElement("div",{className:"flex",key:Ft},e.createElement(le.Z,{text:lt.text,checked:!!lt.value===H.isRichText,onClick:function(){var dn=[].concat(o.fields);dn[De].isRichText=!!lt.value,dn[De].fieldValue="",n.updateSource({fields:dn})}}))}),e.createElement("div",{className:"pointer Gray_75 ThemeHoverColor3 mLeft30",onClick:n.insertFields,style:{visibility:H.isRichText?"visible":"hidden"}},e.createElement("i",{className:"icon-workflow_other Font14"}),_l("\u8282\u70B9\u5BF9\u8C61")),f&&!!w.length&&e.createElement(No.Z,{className:"actionFields",openSearch:!0,style:{marginTop:-8},title:_l("\u70B9\u51FB\u590D\u5236\u8282\u70B9\u5BF9\u8C61\u4EE3\u7801\uFF0C\u7C98\u8D34\u5230\u9700\u8981\u7684\u4F4D\u7F6E"),noItemTips:_l("\u6CA1\u6709\u53EF\u7528\u7684\u5B57\u6BB5"),noData:_l("\u6CA1\u6709\u53EF\u7528\u7684\u8282\u70B9\u5BF9\u8C61"),condition:w,handleFieldClick:function(Ft){var un=Ft.nodeId,dn=Ft.fieldValueId,Hn=Ft.nAlias,ca=Ft.cAlias;n.setState({fieldsVisible:!1}),tn()("#{"+(Hn||un)+"."+(ca||dn)+"}"),alert(_l("\u5DF2\u590D\u5236"))},onClose:function(){return n.setState({fieldsVisible:!1})}})),H.fieldId==="content"&&H.isRichText?e.createElement(e.Fragment,null,e.createElement(fr.Z,{className:"mTop8",showTool:!0,minHeight:200,dropdownPanelPosition:{left:"0px",right:"initial"},toolbarList:["undo","redo","removeFormat","|","paragraph","heading1","heading2","heading3","|","fontFamily","fontSize","fontColor","highlight","|","bold","italic","underline","strikethrough","subscript","superscript","|","bulletedList","numberedList","todoList","|","alignment","indent","outdent","|","horizontalLine","blockQuote","link","code","imageUpload","mediaEmbed","-","insertTable","codeBlock","|","sourceEditing","findAndReplace"],data:H.fieldValue||"",onActualSave:function(Ft){if(n.mounted){var un=[].concat(o.fields);un[De].fieldValue=Ft,n.updateSource({fields:un})}}})):e.createElement(Gt.Z,{key:u+De,companyId:n.props.companyId,relationId:n.props.relationId,processId:n.props.processId,selectNodeId:n.props.selectNodeId,controls:o.controls,formulaMap:o.formulaMap,fields:o.fields,updateSource:n.updateSource,item:H,i:De}))}))}},{key:"render",value:function(){var n=this.state.data;return v().isEmpty(n)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},n),icon:"icon-workflow_email",bg:"BGBlue",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},this.renderContent()))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:!!n.accounts.length,onSave:this.onSave})))}}]),F}(e.Component),Yr=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest;if(o.actionId==="300"&&!o.fieldValue&&!o.fieldNodeId){alert(_l("\u65E5\u671F\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if(o.actionId==="301"&&(!o.numberFieldValue.fieldValue||o.numberFieldValue.fieldValue==="0")&&!o.numberFieldValue.fieldNodeId&&(!o.hourFieldValue.fieldValue||o.hourFieldValue.fieldValue==="0")&&!o.hourFieldValue.fieldNodeId&&(!o.minuteFieldValue.fieldValue||o.minuteFieldValue.fieldValue==="0")&&!o.minuteFieldValue.fieldNodeId&&(!o.secondFieldValue.fieldValue||o.secondFieldValue.fieldValue==="0")&&!o.secondFieldValue.fieldNodeId){alert(_l("\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A"),2);return}d||(o.actionId==="300"&&(o.fieldControlType===16&&o.fieldControlName?o.time=null:(o.unit=a.uK.DAY,o.time=o.time||"8:00")),z.Z.saveNode((0,h.default)({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType},o)).then(function(u){n.props.updateNodeData(u),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.state={data:{},saveRequest:!1},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n){var l=this,o=n.processId,d=n.selectNodeId,u=n.selectNodeType,p=n.instanceId;z.Z.getNodeDetail({processId:o,nodeId:d,flowNodeType:u,instanceId:p}).then(function(f){l.setState({data:f})})}},{key:"renderDelayTo",value:function(){var n=this.state.data;return n.executeTimeType!==0&&(n.day=1),e.createElement(e.Fragment,null,e.createElement("div",{className:"Gray_75 workflowDetailDesc"},_l("\u5728\u4E0A\u4E00\u4E2A\u8282\u70B9\u5B8C\u6210\u540E\uFF0C\u5EF6\u65F6\u5230\u6307\u5B9A\u7684\u65E5\u671F\u548C\u65F6\u95F4\u540E\u518D\u7EE7\u7EED\u6267\u884C\u6D41\u7A0B")),e.createElement("div",{className:"mTop24 bold"},_l("\u65E5\u671F")),e.createElement("div",{className:"mTop10"},e.createElement(Mt.Z,{projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,updateSource:this.updateSource,type:"date",data:n})),e.createElement("div",{className:"mTop30 bold"},_l("\u65F6\u95F4")),e.createElement(Rt.Z,{data:n,dateNoTime:n.fieldControlType!==16,updateSource:this.updateSource}))}},{key:"renderDelayFor",value:function(){var n=this,l=this.state.data,o=[{key:"numberFieldValue",text:_l("\u5929")},{key:"hourFieldValue",text:_l("\u5C0F\u65F6")},{key:"minuteFieldValue",text:_l("\u5206\u949F")},{key:"secondFieldValue",text:_l("\u79D2\u949F")}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font14 Gray_75 workflowDetailDesc"},_l("\u4E0A\u4E00\u8282\u70B9\u5B8C\u6210\u540E\uFF0C\u5EF6\u65F6\u4E00\u6BB5\u65F6\u95F4\u518D\u7EE7\u7EED\u6267\u884C\u6D41\u7A0B")),e.createElement("div",{className:"mTop25 bold"},_l("\u65F6\u95F4")),o.map(function(d){var u=d.key,p=d.text;return e.createElement(e.Fragment,{key:u},e.createElement("div",{className:"mTop15"},p),u==="secondFieldValue"&&e.createElement("div",{className:"mTop5 Gray_9e"},_l("\u5B9E\u9645\u8FD0\u884C\u65F6\u505C\u7559\u7684\u79D2\u949F\u6570\u53EF\u80FD\u6BD4\u8BBE\u7F6E\u7684\u65F6\u95F4\u7565\u957F")),e.createElement("div",{className:"mTop10"},e.createElement(Mt.Z,{projectId:n.props.companyId,processId:n.props.processId,relationId:n.props.relationId,selectNodeId:n.props.selectNodeId,updateSource:function(w){return n.updateSource((0,E.default)({},u,w))},type:u,data:l[u]||{}})))}))}},{key:"render",value:function(){var n=this.state.data;return v().isEmpty(n)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},n),icon:"icon-workflow_delayed",bg:"BGBlueAsh",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},n.actionId==="300"?this.renderDelayTo():this.renderDelayFor()))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:!(n.actionId==="300"&&!n.fieldValue&&!n.fieldNodeId||n.actionId==="301"&&(!n.numberFieldValue.fieldValue||n.numberFieldValue.fieldValue==="0")&&!n.numberFieldValue.fieldNodeId&&(!n.hourFieldValue.fieldValue||n.hourFieldValue.fieldValue==="0")&&!n.hourFieldValue.fieldNodeId&&(!n.minuteFieldValue.fieldValue||n.minuteFieldValue.fieldValue==="0")&&!n.minuteFieldValue.fieldNodeId&&(!n.secondFieldValue.fieldValue||n.secondFieldValue.fieldValue==="0")&&!n.secondFieldValue.fieldNodeId),onSave:this.onSave})))}}]),F}(e.Component),Jo=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.name,p=o.actionId,f=o.appId,w=o.conditions,D=o.selectNodeId,G=o.fields,H=o.sorts,De=o.numberFieldValue,je=o.execute,lt=o.filters,Ft=o.destroy;if(v().includes([a.gp.FROM_WORKSHEET,a.gp.BATCH_UPDATE,a.gp.BATCH_DELETE],p)&&!f){alert(_l("\u5FC5\u987B\u9009\u62E9\u5DE5\u4F5C\u8868"),2);return}if(v().includes([a.gp.FROM_RECORD,a.gp.FROM_ARRAY,a.gp.FROM_API_ARRAY,a.gp.FROM_CODE_ARRAY,a.gp.FROM_PBC_INPUT_ARRAY,a.gp.FROM_PBC_OUTPUT_ARRAY,a.gp.FROM_JSON_PARSE_ARRAY],p))if(D){if(!G.length){alert(p===a.gp.FROM_RECORD?_l("\u5FC5\u987B\u9009\u62E9\u4ED6\u8868\u5B57\u6BB5"):_l("\u5FC5\u987B\u9009\u62E9\u6570\u7EC4"),2);return}}else{alert(p===a.gp.FROM_RECORD?_l("\u5FC5\u987B\u9009\u62E9\u5BF9\u8C61"):_l("\u5FC5\u987B\u9009\u62E9\u8282\u70B9"),2);return}if(p===a.gp.FROM_ADD&&!D){alert(_l("\u5FC5\u987B\u9009\u62E9\u65B0\u589E\u8BB0\u5F55\u8282\u70B9"),2);return}if(p===a.gp.FROM_ARTIFICIAL&&!D){alert(_l("\u5FC5\u987B\u9009\u62E9\u5BF9\u8C61"),2);return}if((0,N.lX)(w)){alert(_l("\u7B5B\u9009\u6761\u4EF6\u7684\u5224\u65AD\u503C\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if(lt.length){var un=!1;if(lt.forEach(function(dn){(0,N.lX)(dn.conditions)&&(un=!0)}),un){alert(_l("\u7B5B\u9009\u6761\u4EF6\u7684\u5224\u65AD\u503C\u4E0D\u80FD\u4E3A\u7A7A"),2);return}}d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,name:u.trim(),actionId:p,appId:f,operateCondition:w,fields:G,selectNodeId:D,sorts:H,numberFieldValue:De,execute:je,filters:lt,destroy:Ft}).then(function(dn){n.props.updateNodeData(dn),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.getWorksheetFields=function(l){var o=n.state.data;z.Z.getStartEventDeploy({appId:l,appType:o.appType}).then(function(d){n.updateSource({controls:d.controls})})},n.getArrayFields=function(l,o,d){var u=n.props.processId;z.Z.getStartEventDeploy({processId:u,appType:l,selectNodeId:o,controlId:d}).then(function(p){n.updateSource({controls:p.controls})})},n.getCustomControls=function(l,o){var d=n.state.data;z.Z.getAppTemplateControls({processId:n.props.processId,nodeId:n.props.selectNodeId,selectNodeId:o,appId:l,appType:d.appType}).then(function(u){n.updateSource({relationControls:d.actionId===a.gp.FROM_RECORD?u.filter(function(p){return p.type===29}):u.filter(function(p){return v().includes([10000003,10000007,10000008],p.type)})})})},n.getArtificialControls=function(l,o){var d=n.state.data;z.Z.getAppTemplateControls({processId:n.props.processId,nodeId:n.props.selectNodeId,selectNodeId:o,appId:l,appType:d.appType}).then(function(u){n.updateSource({controls:u})})},n.switchWorksheet=function(l,o){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",p=n.state.data,f=v().cloneDeep(n.state.data.appList);d&&(v().remove(f,function(w){return w.id===l}),f.push({id:l,name:o,otherApkId:d,otherApkName:u})),p.actionId===a.gp.BATCH_UPDATE?n.getNodeDetail(n.props,{appId:l}):n.updateSource({appId:l,appList:f,conditions:[],filters:[],fields:[],controls:[]},function(){n.getWorksheetFields(l)})},n.state={data:{},saveRequest:!1,showOtherWorksheet:!1,cacheKey:+new Date,noAction:!1},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n){var l=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=n.processId,u=n.selectNodeId,p=n.selectNodeType,f=n.instanceId,w=this.state.data;z.Z.getNodeDetail((0,h.default)({processId:d,nodeId:u,flowNodeType:p,instanceId:f},o)).then(function(D){l.setState({data:v().isEmpty(o)?D:(0,h.default)({},D,{name:w.name}),cacheKey:+new Date,noAction:!D.actionId||!!o.actionId})})}},{key:"renderContent",value:function(){var n,l=this,o=this.state.data,d=(n={},(0,E.default)(n,a.gp.FROM_WORKSHEET,_l("\u4ECE\u5DE5\u4F5C\u8868\u83B7\u53D6\u8BB0\u5F55")),(0,E.default)(n,a.gp.FROM_RECORD,_l("\u4ECE\u8BB0\u5F55\u83B7\u53D6\u5173\u8054\u8BB0\u5F55")),(0,E.default)(n,a.gp.FROM_ADD,_l("\u4ECE\u65B0\u589E\u8282\u70B9\u83B7\u53D6\u8BB0\u5F55")),(0,E.default)(n,a.gp.FROM_ARTIFICIAL,_l("\u4ECE\u4EBA\u5DE5\u8282\u70B9\u83B7\u53D6\u64CD\u4F5C\u660E\u7EC6")),n),u=md.global.SysSettings,p=u.workflowBatchGetDataLimitCount,f=u.workflowSubProcessDataLimitCount,w=v().includes([a.gp.FROM_WORKSHEET,a.gp.BATCH_UPDATE,a.gp.BATCH_DELETE],o.actionId)&&o.appId||o.actionId===a.gp.FROM_ADD&&o.selectNodeId||o.actionId===a.gp.FROM_RECORD&&o.selectNodeId&&!!(o.fields||[]).length;return e.createElement("div",{className:"workflowDetailBox"},o.actionId&&!v().includes([a.gp.FROM_ARRAY,a.gp.FROM_API_ARRAY,a.gp.FROM_CODE_ARRAY,a.gp.FROM_PBC_INPUT_ARRAY,a.gp.FROM_PBC_OUTPUT_ARRAY,a.gp.FROM_JSON_PARSE_ARRAY,a.gp.BATCH_UPDATE,a.gp.BATCH_DELETE],o.actionId)&&e.createElement("div",{className:"bold mBottom20"},d[o.actionId]),e.createElement("div",{className:"Font14 Gray_75 workflowDetailDesc"},!v().includes([a.gp.BATCH_UPDATE,a.gp.BATCH_DELETE],o.actionId)&&_l("\u60A8\u83B7\u53D6\u7684\u591A\u6761\u6570\u636E\u53EF\u4F9B\u672C\u6D41\u7A0B\u7684\u6570\u636E\u5904\u7406\u8282\u70B9\u6216\u5B50\u6D41\u7A0B\u8282\u70B9\u4F7F\u7528\u3002\u88AB\u6570\u636E\u5904\u7406\u8282\u70B9\uFF08\u65B0\u589E\u3001\u66F4\u65B0\u3001\u5220\u9664\uFF09\u4F7F\u7528\uFF0C\u6700\u591A\u652F\u6301%0\u6761\u3002\u88AB\u5B50\u6D41\u7A0B\u8282\u70B9\u4F7F\u7528\uFF0C\u6700\u591A\u652F\u6301%1\u6761\u3002",p,f),o.actionId===a.gp.FROM_RECORD&&_l("\u6CE8\uFF1A\u6B64\u65B9\u5F0F\u6700\u591A\u83B7\u53D61000\u6761\u5173\u8054\u8BB0\u5F55\uFF0C\u5982\u679C\u9700\u8981\u83B7\u53D6\u66F4\u591A\u6570\u636E\uFF0C\u8BF7\u4F7F\u7528\u201C\u4ECE\u5DE5\u4F5C\u8868\u83B7\u53D6\u8BB0\u5F55\u201D\u7684\u65B9\u5F0F\u3002"),o.actionId===a.gp.BATCH_UPDATE&&_l("\u5728\u672C\u8282\u70B9\u5185\u66F4\u65B0\u6700\u5927\u652F\u63011000\u884C\u3002\u66F4\u65B0\u540E\u6570\u636E\u53EF\u4F9B\u6D41\u7A0B\u4E2D\u5176\u4ED6\u6570\u636E\u5904\u7406\u8282\u70B9\u6216\u5B50\u6D41\u7A0B\u8282\u70B9\u7EE7\u7EED\u4F7F\u7528\u3002\u88AB\u6570\u636E\u5904\u7406\u8282\u70B9\uFF08\u65B0\u589E\u3001\u66F4\u65B0\u3001\u5220\u9664\uFF09\u4F7F\u7528\uFF0C\u6700\u591A\u652F\u6301100\u6761\u3002"),o.actionId===a.gp.BATCH_DELETE&&_l("\u5728\u672C\u8282\u70B9\u5185\u5220\u9664\uFF0C\u6700\u5927\u652F\u63011000\u884C\u3002\u6B64\u8282\u70B9\u5BF9\u8C61\u4E0D\u80FD\u88AB\u6D41\u7A0B\u4E2D\u5176\u4ED6\u8282\u70B9\u4F7F\u7528")),(!o.actionId||v().includes([a.gp.FROM_ARRAY,a.gp.FROM_API_ARRAY,a.gp.FROM_CODE_ARRAY,a.gp.FROM_PBC_INPUT_ARRAY,a.gp.FROM_PBC_OUTPUT_ARRAY,a.gp.FROM_JSON_PARSE_ARRAY],o.actionId))&&this.renderSelectArrayType(),v().includes([a.gp.FROM_WORKSHEET,a.gp.BATCH_UPDATE,a.gp.BATCH_DELETE],o.actionId)&&this.renderWorksheet(),o.actionId===a.gp.FROM_RECORD&&this.renderRecord(),o.actionId===a.gp.FROM_ADD&&this.renderAdd(),v().includes([a.gp.FROM_ARRAY,a.gp.FROM_API_ARRAY,a.gp.FROM_CODE_ARRAY,a.gp.FROM_PBC_INPUT_ARRAY,a.gp.FROM_PBC_OUTPUT_ARRAY,a.gp.FROM_JSON_PARSE_ARRAY],o.actionId)&&this.renderArray(),o.actionId===a.gp.FROM_ARTIFICIAL&&this.renderArtificial(),o.actionId&&w&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u9650\u5236\u6570\u91CF")),e.createElement("div",{className:"Font13 Gray_9e mTop5"},_l("\u6700\u591A\u83B7\u53D6\u6761\u6570")),e.createElement("div",{className:"mTop10"},e.createElement(Mt.Z,{projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,updateSource:function(G){return l.updateSource({numberFieldValue:G})},type:"number",max:1e6,allowedEmpty:!0,data:o.numberFieldValue}))),o.actionId===a.gp.BATCH_UPDATE&&w&&this.renderBatchUpdate(),o.actionId===a.gp.BATCH_DELETE&&w&&this.renderBatchDelete(),v().includes([a.gp.FROM_WORKSHEET,a.gp.FROM_RECORD,a.gp.FROM_ADD],o.actionId)&&w&&e.createElement(mr,{execute:o.execute,onChange:function(G){return l.updateSource({execute:G})}}))}},{key:"renderSelectArrayType",value:function(){var n=this,l=this.props.flowInfo,o=this.state,d=o.data,u=o.noAction,p=[{text:_l("\u53D1\u9001API\u8BF7\u6C42\u6570\u7EC4"),value:a.gp.FROM_ARRAY},{text:_l("\u8C03\u7528\u5DF2\u96C6\u6210API\u6570\u7EC4"),value:a.gp.FROM_API_ARRAY},{text:_l("\u4EE3\u7801\u5757\u6570\u7EC4"),value:a.gp.FROM_CODE_ARRAY},{text:_l("\u4E1A\u52A1\u6D41\u7A0B\u8F93\u5165\u6570\u7EC4"),value:a.gp.FROM_PBC_INPUT_ARRAY},{text:_l("\u4E1A\u52A1\u6D41\u7A0B\u8F93\u51FA\u6570\u7EC4"),value:a.gp.FROM_PBC_OUTPUT_ARRAY},{text:_l("JSON\u89E3\u6790\u6570\u7EC4"),value:a.gp.FROM_JSON_PARSE_ARRAY}];return(l.startAppType!==a.IF.PBC||l.child)&&v().remove(p,function(f){return v().includes([a.gp.FROM_PBC_INPUT_ARRAY],f.value)}),e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u9009\u62E9\u6570\u636E\u7C7B\u578B")),e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:p,value:d.actionId,disabled:!u,border:!0,onChange:function(w){n.updateSource({actionId:w}),n.getNodeDetail(n.props,{actionId:w})}}))}},{key:"renderTriggerCondition",value:function(){var n=this.state,l=n.data,o=n.cacheKey;return e.createElement(Cr,{key:o,companyId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,openNewFilter:!l.conditions.length&&v().includes([a.gp.FROM_WORKSHEET,a.gp.FROM_RECORD,a.gp.FROM_ADD,a.gp.BATCH_UPDATE,a.gp.BATCH_DELETE],l.actionId),disabledNewFilter:!v().includes([a.gp.FROM_WORKSHEET,a.gp.FROM_RECORD,a.gp.FROM_ADD,a.gp.BATCH_UPDATE,a.gp.BATCH_DELETE],l.actionId),data:l,updateSource:this.updateSource,filterText:_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u83B7\u5F97\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u3002\u5982\u679C\u672A\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u5219\u83B7\u5F97\u6240\u6709\u6570\u636E"),filterEncryptCondition:l.actionId===a.gp.FROM_WORKSHEET})}},{key:"renderWorksheet",value:function(){var n=this,l=this.state.data,o=l.appList.find(function(p){var f=p.id;return f===l.appId}),d=l.appList.filter(function(p){return!p.otherApkId}).map(function(p){var f=p.name,w=p.id;return{text:f,value:w}}),u=[{text:_l("\u5176\u5B83\u5E94\u7528\u4E0B\u7684\u5DE5\u4F5C\u8868"),value:"other",className:"Gray_75"}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u9009\u62E9\u5DE5\u4F5C\u8868")),e.createElement(Ie.Z,{className:R()("flowDropdown mTop10",{"errorBorder errorBG":l.appId&&!o}),data:[d,u],value:l.appId,renderTitle:l.appId?l.appId&&!o?function(){return e.createElement("span",{className:"errorColor"},_l("\u5DE5\u4F5C\u8868\u65E0\u6548\u6216\u5DF2\u5220\u9664"))}:function(){return e.createElement(e.Fragment,null,e.createElement("span",null,o.name),o.otherApkName&&e.createElement("span",{className:"Gray_9e"},"\uFF08",o.otherApkName,"\uFF09"))}:function(){return e.createElement("span",{className:"Gray_9e"},_l("\u8BF7\u9009\u62E9"))},border:!0,openSearch:!0,onChange:function(f){f==="other"?n.setState({showOtherWorksheet:!0}):n.switchWorksheet(f)}}),l.appId&&this.renderTriggerCondition())}},{key:"renderRecord",value:function(){var n=this,l=this.state.data,o=((l.fields||[])[0]||{}).fieldId||"",d=l.relationControls.find(function(p){var f=p.controlId;return f===o}),u=l.relationControls.map(function(p){var f=p.controlId,w=p.controlName,D=p.sourceEntityName;return{text:e.createElement("span",null,w,e.createElement("span",{className:"Gray_75"},"\uFF08",_l("\u5173\u8054\u8868\u201C%0\u201D",D),"\uFF09")),value:f}});return e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u9009\u62E9\u8282\u70B9\u5BF9\u8C61")),e.createElement(fe.Z,{smallBorder:!0,appList:l.flowNodeList,selectNodeId:l.selectNodeId,selectNodeObj:l.selectNodeObj,onChange:function(f){var w=n.state.data,D=v().find(w.flowNodeList,function(G){return G.nodeId===f});n.updateSource({selectNodeId:f,selectNodeObj:D,fields:[],relationControls:[]},function(){n.getCustomControls(D.appId,f)})}}),l.selectNodeId&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u9009\u62E9\u5173\u8054\u7C7B\u578B\u7684\u5B57\u6BB5")),e.createElement(Ie.Z,{className:R()("flowDropdown mTop10",{"errorBorder errorBG":o&&!d}),data:u,value:o,renderTitle:o?o&&!d?function(){return e.createElement("span",{className:"errorColor"},_l("\u5B57\u6BB5\u4E0D\u5B58\u5728\u6216\u5DF2\u5220\u9664"))}:function(){return e.createElement("span",null,d.controlName,e.createElement("span",{className:"Gray_75"},"\uFF08",_l("\u5173\u8054\u8868\u201C%0\u201D",d.sourceEntityName),"\uFF09"))}:function(){return e.createElement("span",{className:"Gray_9e"},_l("\u8BF7\u9009\u62E9"))},border:!0,onChange:function(f){n.updateSource({fields:[{fieldId:f}],conditions:[]},function(){n.getWorksheetFields(l.relationControls.find(function(w){var D=w.controlId;return D===f}).dataSource)})}})),l.selectNodeId&&!!(l.fields||[]).length&&this.renderTriggerCondition())}},{key:"renderAdd",value:function(){var n=this,l=this.state.data;return e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u9009\u62E9\u65B0\u589E\u8BB0\u5F55\u8282\u70B9")),e.createElement(fe.Z,{smallBorder:!0,appList:l.flowNodeList,selectNodeId:l.selectNodeId,selectNodeObj:l.selectNodeObj,onChange:function(d){var u=n.state.data,p=v().find(u.flowNodeList,function(f){return f.nodeId===d});n.updateSource({selectNodeId:d,selectNodeObj:p,appType:p.appType},function(){n.getWorksheetFields(p.appId)})}}),l.selectNodeId&&this.renderTriggerCondition())}},{key:"renderArray",value:function(){var n,l=this,o=this.state.data,d=((o.fields||[])[0]||{}).fieldId||"",u=o.relationControls.find(function(w){var D=w.controlId;return D===d}),p=o.relationControls.map(function(w){var D=w.controlId,G=w.controlName;return{text:G,value:D}}),f=(n={},(0,E.default)(n,a.gp.FROM_ARRAY,_l("\u9009\u62E9\u53D1\u9001API\u8BF7\u6C42\u8282\u70B9")),(0,E.default)(n,a.gp.FROM_API_ARRAY,_l("\u9009\u62E9API\u8282\u70B9")),(0,E.default)(n,a.gp.FROM_CODE_ARRAY,_l("\u9009\u62E9\u4EE3\u7801\u5757\u8282\u70B9")),(0,E.default)(n,a.gp.FROM_PBC_INPUT_ARRAY,_l("\u9009\u62E9\u4E1A\u52A1\u6D41\u7A0B\u8282\u70B9")),(0,E.default)(n,a.gp.FROM_PBC_OUTPUT_ARRAY,_l("\u9009\u62E9\u4E1A\u52A1\u6D41\u7A0B\u8282\u70B9")),(0,E.default)(n,a.gp.FROM_JSON_PARSE_ARRAY,_l("\u9009\u62E9JSON\u89E3\u6790\u8282\u70B9")),n);return e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},f[o.actionId]),e.createElement(fe.Z,{smallBorder:!0,appList:o.flowNodeList,selectNodeId:o.selectNodeId,selectNodeObj:o.selectNodeObj,onChange:function(D){var G=l.state.data,H=v().find(G.flowNodeList,function(De){return De.nodeId===D});l.updateSource({selectNodeId:D,selectNodeObj:H,fields:[],relationControls:[]},function(){l.getCustomControls(H.appId,D)})}}),o.selectNodeId&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u9009\u62E9\u6570\u7EC4")),e.createElement(Ie.Z,{className:R()("flowDropdown mTop10",{"errorBorder errorBG":d&&!u}),data:p,value:d,renderTitle:d?d&&!u?function(){return e.createElement("span",{className:"errorColor"},_l("\u5B57\u6BB5\u4E0D\u5B58\u5728\u6216\u5DF2\u5220\u9664"))}:function(){return e.createElement("span",null,u.controlName)}:function(){return e.createElement("span",{className:"Gray_9e"},_l("\u8BF7\u9009\u62E9"))},border:!0,onChange:function(D){l.updateSource({fields:[{fieldId:D}],conditions:[]},function(){l.getArrayFields(o.selectNodeObj.appType,o.selectNodeId,D)})}})),o.selectNodeId&&!!(o.fields||[]).length&&this.renderTriggerCondition())}},{key:"renderArtificial",value:function(){var n=this,l=this.state.data;return e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u9009\u62E9\u8282\u70B9\u5BF9\u8C61")),e.createElement(fe.Z,{smallBorder:!0,appList:l.flowNodeList,selectNodeId:l.selectNodeId,selectNodeObj:l.selectNodeObj,onChange:function(d){var u=n.state.data,p=v().find(u.flowNodeList,function(f){return f.nodeId===d});n.updateSource({selectNodeId:d,selectNodeObj:p,fields:[],relationControls:[]},function(){n.getArtificialControls(p.appId,d)})}}),l.selectNodeId&&this.renderTriggerCondition())}},{key:"renderBatchUpdate",value:function(){var n=this.state.data;return e.createElement(e.Fragment,null,e.createElement("div",{className:"actionFieldsSplit mRight0 mTop30"}),e.createElement("div",{className:"mTop30 bold"},_l("\u83B7\u53D6\u540E\uFF0C\u66F4\u65B0\u8BB0\u5F55")),e.createElement("div",{className:"mTop5 Gray_9e"},_l("\u6700\u5927\u66F4\u65B01000\u884C\u6570\u636E")),e.createElement(Za.Z,{companyId:this.props.companyId,relationId:this.props.relationId,processId:this.props.processId,selectNodeId:this.props.selectNodeId,nodeId:n.selectNodeId,controls:n.addControls,fields:n.fields,formulaMap:n.formulaMap,updateSource:this.updateSource,isBatch:!0}))}},{key:"renderBatchDelete",value:function(){var n=this,l=this.state.data;return e.createElement(e.Fragment,null,e.createElement("div",{className:"actionFieldsSplit mRight0 mTop30"}),e.createElement("div",{className:"mTop30 bold"},_l("\u83B7\u53D6\u540E\uFF0C\u5220\u9664\u8BB0\u5F55")),e.createElement("div",{className:"mTop5 Gray_9e"},_l("\u6700\u5927\u5220\u96641000\u884C\u6570\u636E")),e.createElement("div",{className:"mTop15 flexRow"},e.createElement(b.Z,{className:"InlineFlex",text:_l("\u5F7B\u5E95\u5220\u9664\u8BB0\u5F55\uFF0C\u4E0D\u653E\u5165\u56DE\u6536\u7AD9"),checked:l.destroy,onClick:function(d){return n.updateSource({destroy:!d})}})),e.createElement("div",{className:"Gray_9e mTop5 mLeft26"},_l("\u5F7B\u5E95\u5220\u9664\u540E\u6570\u636E\u4E0D\u53EF\u6062\u590D\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C")))}},{key:"render",value:function(){var n=this,l=this.state,o=l.data,d=l.showOtherWorksheet;return v().isEmpty(o)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},o),icon:"icon-transport",bg:"BGYellow",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,this.renderContent())),e.createElement(be,(0,h.default)({},this.props,{isCorrect:v().includes([a.gp.FROM_WORKSHEET,a.gp.BATCH_UPDATE,a.gp.BATCH_DELETE],o.actionId)&&o.appId||v().includes([a.gp.FROM_RECORD,a.gp.FROM_ARRAY,a.gp.FROM_API_ARRAY,a.gp.FROM_CODE_ARRAY,a.gp.FROM_PBC_INPUT_ARRAY,a.gp.FROM_PBC_OUTPUT_ARRAY,a.gp.FROM_JSON_PARSE_ARRAY],o.actionId)&&o.selectNodeId&&o.fields.length||v().includes([a.gp.FROM_ADD,a.gp.FROM_ARTIFICIAL],o.actionId)&&o.selectNodeId,onSave:this.onSave})),d&&e.createElement(ur.Z,{projectId:this.props.companyId,worksheetType:0,selectedAppId:this.props.relationId,selectedWorksheetId:o.appId,visible:!0,onOk:function(p,f,w){var D=n.props.relationId===p;n.switchWorksheet(f,w.workSheetName,!D&&p,!D&&w.appName)},onHide:function(){return n.setState({showOtherWorksheet:!1})}}))}}]),F}(e.Component),So=t(94942),wo=t.n(So),To=t(36803),Xo=t(28325),sl=t(35433),jr=t(39980),ho=t(31226),bo=t.n(ho),vo=t(47478),so=t(68679),cl=t(88863),ko=t(70714),co=t(94087),Wr=void 0,Vo=(0,W.Z)([`
  > div {
    opacity: 0;
  }
  .icon-ai {
    font-size: 80px;
    color: #ff9a00;
  }
  .exampleBox {
    width: 480px;
    min-height: 48px;
    border: 1px solid #eaeaea;
    border-radius: 10px;
    padding: 0 14px;
  }
  .animation {
    animation: fadeInUp 0.3s ease-in-out forwards;
  }
`],[`
  > div {
    opacity: 0;
  }
  .icon-ai {
    font-size: 80px;
    color: #ff9a00;
  }
  .exampleBox {
    width: 480px;
    min-height: 48px;
    border: 1px solid #eaeaea;
    border-radius: 10px;
    padding: 0 14px;
  }
  .animation {
    animation: fadeInUp 0.3s ease-in-out forwards;
  }
`]),Do=(0,W.Z)([`
  textarea {
    box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.2);
    border-radius: 24px !important;
    border-width: 0 48px 0 8px !important;
    border-color: transparent !important;
    line-height: 1.15 !important;
  }
  .clearBtn {
    width: 48px;
    height: 48px;
    margin-right: 8px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #2196f3;
    font-size: 26px;
    color: #fff;
  }
  .sendBtn {
    position: absolute;
    top: 2px;
    right: 2px;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    &:hover {
      background: #f5f5f5;
      .icon-airplane {
        color: #2196f3;
      }
    }
    .icon-airplane {
      color: #ddd;
    }
  }
  .stopBtn {
    position: absolute;
    top: -48px;
    left: 50%;
    transform: translateX(-50%);
    border: 1px solid #eaeaea;
    height: 32px;
    border-radius: 18px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #fff;
    padding: 0 16px;
    color: #9e9e9e;
    &:hover {
      border-color: #2196f3;
      color: #2196f3;
    }
  }
`],[`
  textarea {
    box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.2);
    border-radius: 24px !important;
    border-width: 0 48px 0 8px !important;
    border-color: transparent !important;
    line-height: 1.15 !important;
  }
  .clearBtn {
    width: 48px;
    height: 48px;
    margin-right: 8px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #2196f3;
    font-size: 26px;
    color: #fff;
  }
  .sendBtn {
    position: absolute;
    top: 2px;
    right: 2px;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    &:hover {
      background: #f5f5f5;
      .icon-airplane {
        color: #2196f3;
      }
    }
    .icon-airplane {
      color: #ddd;
    }
  }
  .stopBtn {
    position: absolute;
    top: -48px;
    left: 50%;
    transform: translateX(-50%);
    border: 1px solid #eaeaea;
    height: 32px;
    border-radius: 18px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #fff;
    padding: 0 16px;
    color: #9e9e9e;
    &:hover {
      border-color: #2196f3;
      color: #2196f3;
    }
  }
`]),qo=(0,W.Z)([`
  min-width: 36px;
  width: 36px;
  height: 36px;
  margin-right: 8px;
  border-radius: 50%;
  font-size: 20px;
  color: #fff;
  background: #ff9a00;
  display: flex;
  align-items: center;
  justify-content: center;
  img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
  }
`],[`
  min-width: 36px;
  width: 36px;
  height: 36px;
  margin-right: 8px;
  border-radius: 50%;
  font-size: 20px;
  color: #fff;
  background: #ff9a00;
  display: flex;
  align-items: center;
  justify-content: center;
  img {
    width: 100%;
    height: 100%;
    border-radius: 50%;
  }
`]),Wo=(0,W.Z)([`
  padding: 6px;
  border: 1px solid #eaeaea;
  border-radius: 10px;
  max-width: 100%;
  display: inline-block;
  min-height: 36px;
  .chatGPTElement {
    p {
      margin-bottom: 0;
    }
  }
  .markdown-body {
    padding: 0 !important;
    font-size: 14px;
    h1 {
      font-size: 16px !important;
      padding-bottom: 0 !important;
      border: none !important;
      line-height: normal !important;
      font-weight: normal !important;
    }
    .token.operator,
    .token.entity,
    .token.url,
    .language-css .token.string,
    .style .token.string {
      background: transparent;
    }
    span {
      white-space: pre-wrap !important;
      word-break: break-all !important;
    }
    > pre {
      border-radius: 8px !important;
    }
  }
`],[`
  padding: 6px;
  border: 1px solid #eaeaea;
  border-radius: 10px;
  max-width: 100%;
  display: inline-block;
  min-height: 36px;
  .chatGPTElement {
    p {
      margin-bottom: 0;
    }
  }
  .markdown-body {
    padding: 0 !important;
    font-size: 14px;
    h1 {
      font-size: 16px !important;
      padding-bottom: 0 !important;
      border: none !important;
      line-height: normal !important;
      font-weight: normal !important;
    }
    .token.operator,
    .token.entity,
    .token.url,
    .language-css .token.string,
    .style .token.string {
      background: transparent;
    }
    span {
      white-space: pre-wrap !important;
      word-break: break-all !important;
    }
    > pre {
      border-radius: 8px !important;
    }
  }
`]),ao=(0,W.Z)([`
  cursor: pointer;
  padding: 0 16px;
  border-radius: 5px;
  display: inline-flex;
  height: 32px;
  align-items: center;
  &:hover {
    background: #f5f5f5;
  }
`],[`
  cursor: pointer;
  padding: 0 16px;
  border-radius: 5px;
  display: inline-flex;
  height: 32px;
  align-items: center;
  &:hover {
    background: #f5f5f5;
  }
`]),_o=(0,W.Z)([`
  display: inline-block;
  width: 10px;
  height: 16px;
  background: #333;
  animation: fadeIn 0.6s ease-in-out infinite;
  margin-top: 3px;
  vertical-align: top;
`],[`
  display: inline-block;
  width: 10px;
  height: 16px;
  background: #333;
  animation: fadeIn 0.6s ease-in-out infinite;
  margin-top: 3px;
  vertical-align: top;
`]),_r=P.ZP.div(Vo),_a=P.ZP.div(Do),$r=P.ZP.div(qo),el=P.ZP.div(Wo),tl=P.ZP.span(ao),uo=P.ZP.span(_o),nl=function(F){var B=F.codeType;return e.createElement(_r,{className:"flexColumn alignItemsCenter justifyContentCenter flex h100"},e.createElement("div",{className:"TxtCenter animation"},e.createElement("div",null,e.createElement("i",{className:"icon-ai"})),e.createElement("div",{className:"mTop15 bold Font20"},_l("\u60A8\u597D\uFF01\u6211\u662F AI \u4EE3\u7801\u751F\u6210\u52A9\u624B")),e.createElement("div",{className:"mTop10"},_l("\u8BF7\u63CF\u8FF0\u60A8\u8981\u5B9E\u73B0\u7684\u529F\u80FD\uFF0C\u6211\u5C06\u4E3A\u60A8\u751F\u6210 %0 \u4EE3\u7801",B===1?"Javascript":"Python"))),e.createElement("div",{className:"mTop40 animation",style:{animationDelay:"0.2s"}},e.createElement("div",null,_l("\u95EE\u9898\u4E3E\u4F8B\uFF1A")),e.createElement("div",{className:"exampleBox mTop15 flexRow alignItemsCenter"},_l("\u8F93\u5165\u5F00\u59CB\u65E5\u671F\u548C\u7ED3\u675F\u65E5\u671F\uFF0C\u8BF7\u5E2E\u6211\u628A\u5B83\u4EEC\u4E4B\u95F4\u7684\u65E5\u671F\u8F93\u51FA\u4E3A\u6570\u7EC4")),e.createElement("div",{className:"exampleBox mTop15 flexRow alignItemsCenter"},_l("\u5904\u7406\u6389\u8F93\u5165\u7684\u5B57\u7B26\u4E32\u4E2D\u5F00\u5934\u548C\u7ED3\u5C3E\u7684\u6240\u6709\u6362\u884C\u7B26\u53F7")),e.createElement("div",{className:"Gray_75 mTop15"},_l("\u5982\u679C\u9047\u5230\u95EE\u9898\uFF0C\u60A8\u53EF\u4EE5\u5C06\u4EE3\u7801\u62A5\u9519\u4FE1\u606F\u53D1\u9001\u7ED9\u6211\uFF0C\u6211\u4F1A\u4E3A\u60A8\u63D0\u4F9B\u4FEE\u6539\u5EFA\u8BAE\u3002"))))};const Ro=function(ne){var F=ne.processId,B=ne.nodeId,n=ne.codeType,l=n===void 0?1:n,o=ne.onSave,d=o===void 0?function(){}:o,u=ne.onClose,p=u===void 0?function(){}:u,f=(0,e.useState)(""),w=(0,U.Z)(f,2),D=w[0],G=w[1],H=(0,e.useState)([]),De=(0,U.Z)(H,2),je=De[0],lt=De[1],Ft=(0,e.useState)(null),un=(0,U.Z)(Ft,2),dn=un[0],Hn=un[1],ca=(0,e.useState)(!0),da=(0,U.Z)(ca,2),Me=da[0],nt=da[1],He=function(){var Ue=(0,To.Z)(wo().mark(function Ke(){var ut,wt,Et,et,Xe,pt,at;return wo().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:if(!(!je.length||!dn)){Nt.next=2;break}return Nt.abrupt("return");case 2:return ut="",wt=(0,so.j)(function(mn){if(mn.type==="event"){if(mn.data==="[DONE]"){var Qt=[].concat(je);Qt[je.length-1].content=ut,lt(Qt),Hn(null),We(Qt);return}var Cn=safeParse(mn.data);Cn.choices&&Cn.choices.length&&(ut+=Cn.choices[0].delta.content||"",$(".chatGPTElement:last .markdown-body").html(ie(ut)),$(".chatGPTDialog .nano-content").scrollTop(1e7))}}),Nt.next=6,fetch(md.global.Config.AjaxApiUrl+"Code/GenerateCodeBlock",{signal:dn.signal,method:"POST",headers:{Authorization:(0,ko.qz)()?"md_pss_id "+(0,ko.qz)():"","Content-Type":"application/json"},body:ke()({codeType:l,lang:0,messageList:_.takeRight(je.filter(function(mn){return mn.content}),11).map(function(mn){var Qt=mn.role,Cn=mn.content;return{role:Qt,content:Cn}})})});case 6:Et=Nt.sent,et=Et.body.getReader(),Nt.prev=8;case 9:return Nt.next=12,et.read();case 12:if(Xe=Nt.sent,pt=Xe.done,at=Xe.value,!pt){Nt.next=17;break}return Nt.abrupt("break",20);case 17:wt.feed(new TextDecoder().decode(at)),Nt.next=9;break;case 20:return Nt.prev=20,Hn(null),et.releaseLock(),Nt.finish(20);case 24:case"end":return Nt.stop()}},Ke,Wr,[[8,,20,24]])}));return function(){return Ue.apply(this,arguments)}}(),ie=function(Ke){var ut=new(bo())({highlight:function(Et,et){return(0,Xo.highlight)(Et,Xo.languages.js)}});return ut.renderer.rules.link_open=function(wt,Et){var et=wt[Et].title?' title="'+(0,vo.escapeHtml)((0,vo.replaceEntities)(wt[Et].title))+'"':"";return'<a target="_blank" href="'+(0,vo.escapeHtml)(wt[Et].href)+'"'+et+">"},ut.render(Ke)},We=function(Ke){co.Z.saveGenerateCodeRecord({workflowId:F,nodeId:B,messageList:Ke})};return(0,e.useEffect)(function(){co.Z.getGenerateCodeRecord({workflowId:F,nodeId:B}).then(function(Ue){Ue&&lt(Ue.messageList)})},[]),(0,e.useEffect)(function(){He()},[dn]),e.createElement(te.Z,{type:"fixed",title:_l("AI \u751F\u6210\u4EE3\u7801"),visible:!0,width:800,footer:null,overlayClosable:!1,onCancel:p},e.createElement("div",{className:"flexColumn h100"},e.createElement(i.Z,{className:"flex chatGPTDialog"},je.length?je.map(function(Ue,Ke){var ut=l===1?((Ue.content.match(/```javascript[\s\S]*?```/)||[])[0]||"").replace(/(```javascript\n)|\n```/g,""):((Ue.content.match(/```python[\s\S]*?```/)||[])[0]||"").replace(/(```python\n)|\n```/g,"");return e.createElement("div",{className:"flexRow mBottom25",key:Ke},e.createElement($r,null,Ue.role==="user"?e.createElement("img",{src:md.global.Account.avatar}):e.createElement("i",{className:"icon-ai1"})),e.createElement("div",{className:"flex"},e.createElement(el,{className:R()("chatGPTElement",{"ThemeBorderColor3 ThemeBGColor3 White Font14":Ue.role==="user"},{w100:Ue.role!=="user"})},Ue.role==="user"?Ue.content:e.createElement(e.Fragment,null,e.createElement("div",{className:"markdown-body",dangerouslySetInnerHTML:{__html:ie(Ue.content)}}),ut&&e.createElement("div",{className:"mTop8 mBottom5 flexRow alignItemsCenter"},e.createElement(b.Z,{className:"InlineBlock",text:_l("\u4F7F\u7528\u65F6\u6E05\u7A7A\u73B0\u6709input\u53C2\u6570\u4E0E\u4EE3\u7801\u5757"),checked:Me,onClick:function(Et){return nt(!Et)}}),e.createElement("div",{className:"flex"}),e.createElement(tl,{className:"ThemeColor3 mLeft20",onClick:function(){var Et={};l===1?(ut.match(/input\..*?[),;\n ]/g)||[]).forEach(function(et){Et[et.replace(/(input.)|([),;\n ])/g,"")]=""}):(ut.match(/input\[.*\]/g)||[]).forEach(function(et){Et[et.replace(/(input\[")|("\])/g,"")]=""}),d({clearParams:Me,code:ut,inputData:Et})}},_l("\u4F7F\u7528"))),!Ue.content&&Ke===je.length-1&&dn&&e.createElement(uo,null)))))}):e.createElement(nl,{codeType:l})),e.createElement(_a,{className:"mTop10 flexRow relative"},!!je.length&&e.createElement("div",{className:"clearBtn tip-top","data-tip":_l("\u91CD\u65B0\u5F00\u59CB"),onClick:function(){We([]),lt([])}},e.createElement("i",{className:"icon-cleaning_services"})),dn&&e.createElement("div",{className:"stopBtn",onClick:function(){dn.abort(),Hn(null)}},e.createElement("i",{className:"icon-wc-stop mRight5"}),_l("\u505C\u6B62")),e.createElement(Ee.Z,{className:"flex",minHeight:0,style:{paddingTop:16,paddingBottom:16},maxHeight:240,placeholder:_l("\u8BF7\u8F93\u5165\u2026"),value:D,onChange:G,onKeyDown:function(Ke){!Ke.shiftKey&&Ke.keyCode===13&&!dn&&(Ke.target.value.trim().replace(/\r\n/,"")&&(Hn(new AbortController),lt(je.concat([{role:"user",content:D.trim()},{role:"assistant",content:""}]))),setTimeout(function(){G("")},0))}}),e.createElement("div",{className:"sendBtn",onClick:function(){!D.trim()||dn||(G(""),Hn(new AbortController),lt(je.concat([{role:"user",content:D.trim()},{role:"assistant",content:""}])))}},e.createElement("i",{className:"icon-airplane"})))))};var Ao=t(19575),Po=t(39816),Uo=(0,W.Z)([`
  padding: 0 8px;
  height: 36px;
  background: #fff;
  border-radius: 5px;
  color: #757575;
  cursor: pointer;
  &:hover {
    background: #f5f5f5;
  }
  i {
    color: #00bcd7;
    margin-right: 3px;
  }
`],[`
  padding: 0 8px;
  height: 36px;
  background: #fff;
  border-radius: 5px;
  color: #757575;
  cursor: pointer;
  &:hover {
    background: #f5f5f5;
  }
  i {
    color: #00bcd7;
    margin-right: 3px;
  }
`]),Qr=P.ZP.div(Uo),Go=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.name,p=o.actionId,f=o.inputDatas,w=o.code,D=o.testMap,G=o.version,H=o.maxRetries;if(!w){alert(_l("\u4EE3\u7801\u5757\u5FC5\u586B"),2);return}d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,actionId:p,name:u.trim(),inputDatas:f.filter(function(De){return De.name}),code:Ao.Base64.encode(w.replace(/\t/g,"    ")),testMap:D,version:G,maxRetries:H},{isIntegration:n.props.isIntegration}).then(function(De){n.props.updateNodeData(De),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.send=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=n.props,d=o.processId,u=o.selectNodeId,p=o.isIntegration,f=n.state,w=f.data,D=f.sendRequest,G=w.actionId,H=w.code,De=w.inputDatas,je=w.version;D||(z.Z.codeTest({processId:d,nodeId:u,actionId:G,code:Ao.Base64.encode(H.replace(/\t/g,"    ")),inputDatas:De.filter(function(lt){return lt.name}).map(function(lt){return(0,h.default)({},lt,{value:l[lt.name]||""})}),version:je},{isIntegration:p}).then(function(lt){lt.status===1?(n.updateSource({controls:lt.data.controls}),n.setState({msg:""})):n.setState({msg:lt.msg}),n.setState({sendRequest:!1})}).catch(function(){n.setState({sendRequest:!1})}),n.setState({sendRequest:!0}))},n.saveTemplate=function(){},n.selectCodeCallback=function(l){var o=l.clearParams,d=l.inputData,u=l.code,p=n.state.data,f=[];T()(d).forEach(function(w){f.push({name:w,value:""})}),o?n.updateSource({inputDatas:f,code:u}):n.updateSource({inputDatas:v().uniqBy(p.inputDatas.concat(f).filter(function(w){return w.name}),function(w){return w.name}),code:p.code+`

`+u}),n.setState({showCodeSnippetDialog:!1,showChatGPTDialog:!1})},n.state={data:{},saveRequest:!1,sendRequest:!1,msg:"",isFullCode:!1,showSaveCodeDialog:!1,showCodeSnippetDialog:!1,showTestDialog:!1,showChatGPTDialog:!1},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"componentDidUpdate",value:function(n,l){(l.data.code!==this.state.data.code||!l.isFullCode&&this.state.isFullCode||l.isFullCode&&!this.state.isFullCode)&&this.updateCodeMirrorContent(this.state.data.code)}},{key:"getNodeDetail",value:function(n){var l=this,o=n.processId,d=n.selectNodeId,u=n.selectNodeType,p=n.isIntegration,f=n.instanceId;z.Z.getNodeDetail({processId:o,nodeId:d,flowNodeType:u,instanceId:f},{isIntegration:p}).then(function(w){w.inputDatas.length||w.inputDatas.push({name:"",value:""}),l.setState({data:w})})}},{key:"updateCodeMirrorContent",value:function(n){var l=this.state.isFullCode;if(l&&this.fullCodeTagtextarea){var o=this.fullCodeTagtextarea.cmObj.getCursor();this.fullCodeTagtextarea.setValue(n),this.fullCodeTagtextarea.cmObj.setCursor(o)}else if(this.tagtextarea){var d=this.tagtextarea.cmObj.getCursor();this.tagtextarea.setValue(n),this.tagtextarea.cmObj.setCursor(d)}}},{key:"renderParameterList",value:function(){var n=this,l=this.props.companyId,o=this.state,d=o.data,u=o.sendRequest,p=o.showSaveCodeDialog;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop20"},_l("Output\u5BF9\u8C61\u53C2\u6570\u5217\u8868")),e.createElement(kt,{controls:d.controls}),e.createElement("div",{className:"mTop20 Gray_9e"},_l("\u8BF7\u8FD0\u884C\u4EE3\u7801\u5757\u4EE5\u83B7\u5F97output\u5BF9\u8C61; input\u5BF9\u8C61\u5C06\u91C7\u7528\u6D4B\u8BD5\u6570\u636E")),e.createElement("div",{className:"flexRow mTop15"},e.createElement("div",{className:R()("webhookBtn InlineBlock",{disabled:u}),onClick:function(){if(!d.code){alert(_l("\u4EE3\u7801\u5757\u5FC5\u586B"),2);return}d.inputDatas.filter(function(w){return!!w.name}).length?n.setState({showTestDialog:!0}):n.send()}},_l("\u6D4B\u8BD5")),e.createElement("div",{className:"webhookBtn InlineBlock mLeft15",onClick:function(){if(!d.code.trim()){alert(_l("\u4EE3\u7801\u7247\u6BB5\u4E0D\u5141\u8BB8\u4E3A\u7A7A"),2);return}n.setState({showSaveCodeDialog:!0})}},_l("\u4FDD\u5B58\u5230\u4EE3\u7801\u7247\u6BB5\u5E93"))),p&&e.createElement(Po.J,{projectId:l,codeName:v().includes(["JavaScript","Python"],d.name)?"":d.name,code:Ao.Base64.encode(d.code.replace(/\t/g,"    ")),inputDatas:d.inputDatas,type:d.actionId,onSave:function(){alert(_l("\u4FDD\u5B58\u6210\u529F")),n.setState({showSaveCodeDialog:!1})},onClose:function(){return n.setState({showSaveCodeDialog:!1})}}))}},{key:"renderCode",value:function(){var n=this,l=this.state,o=l.data,d=l.isFullCode;return e.createElement(io.Z,{className:"workflowCodeMirrorBox",height:d?"100%":0,defaultValue:o.code,codeMirrorMode:"javascript",getRef:function(p){n[d?"fullCodeTagtextarea":"tagtextarea"]=p},lineNumbers:!0,maxHeight:1e7,onChange:function(p,f,w){n.updateSource({code:f})}})}},{key:"render",value:function(){var n=this,l=this.state,o=l.data,d=l.msg,u=l.isFullCode,p=l.showCodeSnippetDialog,f=l.showTestDialog,w=l.showChatGPTDialog,D=(o.inputDatas||[]).filter(function(G){return G.name&&G.value&&!/\$.*?\$/.test(G.value)});return v().isEmpty(o)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},o),icon:"icon-url",bg:"BGBlueAsh",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},e.createElement("div",{className:"Font14 Gray_75 workflowDetailDesc flexRow alignItemsCenter"},e.createElement("div",{className:"flex"},o.actionId===a.gp.JAVASCRIPT?_l("\u4F7F\u7528JavaScript\u8BED\u8A00"):_l("\u4F7F\u7528Python\u8BED\u8A00")),!!(o.versions||[]).length&&e.createElement(e.Fragment,null,e.createElement("div",null,o.actionId===a.gp.JAVASCRIPT?"Node.js":"Python"," ",_l("\u7248\u672C")),e.createElement(Ie.Z,{className:"Gray",menuStyle:{width:"100%",minWidth:90},data:o.versions.map(function(G){return{text:"v"+G,value:G}}),value:o.version||o.versions[0],onChange:function(H){n.updateSource({version:H})}}))),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u5B9A\u4E49input\u5BF9\u8C61")),e.createElement(Bt,{key:this.props.selectNodeId,projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,isIntegration:this.props.isIntegration,source:o.inputDatas,sourceKey:"inputDatas",flowNodeList:o.flowNodeList,formulaMap:o.formulaMap,updateSource:this.updateSource}),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u4EE3\u7801\u5757")),e.createElement("div",{className:"mTop5 flexRow alignItemsCenter"},e.createElement("div",{className:"flex Gray_9e"},o.actionId===a.gp.JAVASCRIPT?_l('Output \u793A\u4F8B\uFF1Aoutput = {output: "hello world" };'):_l("Output \u793A\u4F8B\uFF1Aoutput = {'hello': 'world!'}")),e.createElement(Qr,{className:"flexRow alignItemsCenter",onClick:function(){return n.setState({showCodeSnippetDialog:!0})}},e.createElement("i",{className:"icon-custom-description Font16"}),_l("\u4EE3\u7801\u7247\u6BB5\u5E93")),!md.global.Config.IsLocal&&e.createElement(Qr,{className:"flexRow alignItemsCenter mLeft15",onClick:function(){return n.setState({showChatGPTDialog:!0})}},e.createElement("i",{className:"icon-ai1 Font16",style:{color:"#FF9A00"}}),_l("\u751F\u6210\u4EE3\u7801"))),e.createElement("div",{className:"mTop5 relative"},this.renderCode(),e.createElement("span",{"data-tip":_l("\u653E\u5927"),className:"codeEditorFull tip-top",onClick:function(){return n.setState({isFullCode:!0})}},e.createElement(Q.Z,{icon:"open_in_full"}))),d&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop10",style:{color:"#f44336"}},_l("\u4EE3\u7801\u9519\u8BEF")),e.createElement("div",{className:"mTop10",style:{color:"#f44336"}},d)),this.renderParameterList(),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u81EA\u52A8\u91CD\u8BD5")),e.createElement(b.Z,{className:"mTop10 flexRow",text:_l("\u4EE3\u7801\u5757\u6574\u4F53\u8FD0\u884C\u5931\u8D25\u65F6\u81EA\u52A8\u91CD\u8BD5"),checked:o.maxRetries>0,onClick:function(H){return n.updateSource({maxRetries:H?0:1})}})))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:!!o.code,onSave:this.onSave})),u&&e.createElement(te.Z,{className:"workfowFullCode",closable:!1,type:"fixed",title:e.createElement("span",{"data-tip":_l("\u7F29\u5C0F"),className:"codeEditorSmall tip-top",onClick:function(){return n.setState({isFullCode:!1})}},e.createElement(Q.Z,{icon:"close_fullscreen"})),visible:!0,width:800,footer:null},this.renderCode()),p&&e.createElement(Po.Z,{projectId:this.props.companyId,type:o.actionId===a.gp.JAVASCRIPT?1:2,onSave:this.selectCodeCallback,onClose:function(){return n.setState({showCodeSnippetDialog:!1})}}),f&&e.createElement(qr,{title:_l("\u7F16\u8F91\u6D4B\u8BD5\u6570\u636E"),onOk:function(H){n.updateSource({testMap:C()({},o.testMap,H)}),n.send(H),n.setState({showTestDialog:!1})},onClose:function(){return n.setState({showTestDialog:!1})},testArray:o.inputDatas.filter(function(G){return G.name}).map(function(G){return G.name}),formulaMap:v().keyBy(o.inputDatas.filter(function(G){return G.name}),"name"),testMap:C()({},o.testMap,v().zipObject(D.map(function(G){return G.name}),D.map(function(G){return G.value})))}),w&&e.createElement(Ro,{processId:this.props.processId,nodeId:this.props.selectNodeId,codeType:o.actionId===a.gp.JAVASCRIPT?1:2,onSave:this.selectCodeCallback,onClose:function(){return n.setState({showChatGPTDialog:!1})}}))}}]),F}(e.Component),go=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.name,p=o.selectNodeId,f=o.linkType,w=o.linkName,D=o.formProperties,G=o.time,H=o.password,De=o.submitButtonName,je=o.submitType,lt=o.modifyTime,Ft=o.addNotAllowView,un=H.trim();if(!p){alert(_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u5BF9\u8C61"),2);return}if(un){if(un.length<4){alert(_l("\u5BC6\u7801\u4E0D\u80FD\u5C11\u4E8E4\u4F4D"),2);return}if(/^[0-9]*$/.test(un)||/^[a-zA-Z]*$/.test(un)){alert(_l("\u5BC6\u7801\u5FC5\u987B\u7531\u5B57\u6BCD+\u6570\u5B57\u7EC4\u6210"),2);return}}if(G.type===2&&!G.executeTime.fieldValue&&!G.executeTime.fieldControlId){alert(_l("\u94FE\u63A5\u6709\u6548\u671F\u4E0D\u80FD\u4E3A\u7A7A"),2);return}d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,name:u.trim(),selectNodeId:p,linkType:f,linkName:w,formProperties:D,time:G,password:un,submitButtonName:De.trim()||_l("\u63D0\u4EA4"),submitType:je,modifyTime:lt,addNotAllowView:Ft}).then(function(dn){n.props.updateNodeData(dn),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.updatePassword=function(l){var o=l.currentTarget.value.replace(/[^0-9a-zA-Z]/gi,"");l.currentTarget.value=o,n.updateSource({password:o})},n.state={data:{},saveRequest:!1},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n,l){var o=this,d=n.processId,u=n.selectNodeId,p=n.selectNodeType,f=n.instanceId;z.Z.getNodeDetail({processId:d,nodeId:u,flowNodeType:p,selectNodeId:l,instanceId:f}).then(function(w){o.setState({data:w})})}},{key:"renderContent",value:function(){var n=this,l=this.props.selectNodeType,o=this.state.data;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Gray_75 workflowDetailDesc pTop15 pBottom15"},_l("\u6839\u636E\u5F53\u524D\u6D41\u7A0B\u8282\u70B9\u4E2D\u7684\u8BB0\u5F55\u5BF9\u8C61\uFF0C\u751F\u6210\u7279\u5B9A\u7684\u5BF9\u5916\u5206\u4EAB\u94FE\u63A5\u3002\u53EF\u4EE5\u901A\u8FC7\u5728\u90AE\u4EF6\u3001\u77ED\u4FE1\u7684\u6B63\u6587\u91CC\u5F15\u7528\u6B64\u8282\u70B9\uFF0C\u9080\u8BF7\u5916\u90E8\u7528\u6237\u67E5\u770B\u6216\u586B\u5199\u6307\u5B9A\u7684\u8BB0\u5F55\u3002")),e.createElement("div",{className:"mTop20 bold"},_l("\u83B7\u53D6\u94FE\u63A5\u5BF9\u8C61")),e.createElement("div",{className:"Gray_75 mTop5"},_l("\u5F53\u524D\u6D41\u7A0B\u4E2D\u7684\u8282\u70B9\u5BF9\u8C61")),e.createElement(fe.Z,{appList:o.appList,selectNodeId:o.selectNodeId,selectNodeObj:o.selectNodeObj,onChange:function(u){return n.getNodeDetail(n.props,u)}}),e.createElement("div",{className:"mTop20 bold"},_l("\u83B7\u53D6\u65B9\u5F0F")),e.createElement("div",{className:"mTop15 flexRow"},[{text:_l("\u5206\u4EAB\u94FE\u63A5"),value:1},{text:_l("\u586B\u5199\u94FE\u63A5"),value:2}].map(function(d){return e.createElement("div",{key:d.value,style:{width:160}},e.createElement(le.Z,{text:d.text,checked:o.linkType===d.value,onClick:function(){return n.switchLinkType(d.value)}}))})),e.createElement("div",{className:"mTop20"},e.createElement("span",{className:"bold"},_l("\u94FE\u63A5\u540D\u79F0\uFF08\u4EC5\u7528\u4E8E\u53D1\u9001\u90AE\u4EF6\u65F6\uFF09")),e.createElement("span",{className:"pointer Gray_9e workflowDetailTipsWidth","data-tip":_l("\u901A\u8FC7\u5DE5\u4F5C\u6D41\u53D1\u9001\u90AE\u4EF6\u65F6\uFF0C\u94FE\u63A5\u53EF\u4EE5\u6309\u7167\u8BBE\u7F6E\u7684\u94FE\u63A5\u540D\u79F0\u663E\u793A\u3002\u5982\uFF1A\u5728\u90AE\u4EF6\u4E2D\u5C06\u94FE\u63A5\u663E\u793A\u4E3A\u3010\u70B9\u51FB\u67E5\u770B\u8BB0\u5F55\u3011")},e.createElement(Q.Z,{className:"Font16",icon:"workflow_help"}))),e.createElement("div",{className:"mTop10"},e.createElement(ce.Z,{projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,type:2,height:0,content:o.linkName,formulaMap:o.formulaMap,onChange:function(u,p,f){return n.updateSource({linkName:p})},updateSource:this.updateSource})),e.createElement("div",{className:"mTop20 bold"},_l("\u5BC6\u7801")),e.createElement("div",{className:"flexRow mTop10"},e.createElement("input",{type:"text",className:"flex ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10",defaultValue:o.password,maxLength:8,onChange:function(u){n.isOnComposition||n.updatePassword(u)},onCompositionStart:function(){return n.isOnComposition=!0},onCompositionEnd:function(u){u.type==="compositionend"&&(n.isOnComposition=!1),n.updatePassword(u)}})),e.createElement("div",{className:"mTop20"},e.createElement(b.Z,{className:"InlineFlex bold",text:_l("\u8BBE\u7F6E\u94FE\u63A5\u6709\u6548\u671F"),checked:o.time.enable,onClick:function(u){var p={enable:!u};o.type||(p.type=1,p.executeTime={fieldValue:"1"},p.unit=3),n.updateSource({time:C()({},o.time,p)})}})),o.time.enable&&e.createElement("div",{className:"mTop10 mLeft26"},e.createElement("div",{className:"flexRow"},[{text:_l("\u6307\u5B9A\u65F6\u957F"),value:1},{text:_l("\u6307\u5B9A\u7684\u65E5\u671F\u65F6\u95F4"),value:2}].map(function(d){return e.createElement("div",{key:d.value,style:{width:160}},e.createElement(le.Z,{text:d.text,checked:o.time.type===d.value,onClick:function(){return n.updateSource({time:C()({},o.time,{type:d.value,executeTime:{fieldValue:d.value===1?"1":""},unit:d.value===1?3:void 0})})}}))})),e.createElement(yt.Z,{projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,data:o.time,minDate:ue()(),onChange:function(u){return n.updateSource({time:u})}})),o.linkType===2&&e.createElement("div",{className:"mTop15"},e.createElement(b.Z,{className:"InlineFlex bold",text:_l("\u63D0\u4EA4\u540E\u5141\u8BB8\u67E5\u770B/\u4FEE\u6539"),checked:o.submitType!==0,onClick:function(u){return n.updateSource({submitType:u?0:1,modifyTime:-1})}})),o.linkType===2&&o.submitType!==0&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop10 mLeft26"},e.createElement("div",{className:"flexRow"},[{text:_l("\u4EC5\u67E5\u770B"),value:1},{text:_l("\u5141\u8BB8\u4FEE\u6539"),value:2}].map(function(d){return e.createElement("div",{key:d.value,style:{width:160}},e.createElement(le.Z,{text:d.text,checked:o.submitType===d.value,onClick:function(){return n.updateSource({submitType:d.value,modifyTime:-1})}}))})),o.submitType===2&&e.createElement("div",{className:"mTop10 flexRow alignItemsCenter"},e.createElement(Ie.Z,{className:"flex flowDropdown",data:[{text:_l("\u59CB\u7EC8\u5141\u8BB8\u4FEE\u6539"),value:!0},{text:_l("\u4E00\u6BB5\u65F6\u95F4\u5185\u53EF\u4FEE\u6539"),value:!1}],value:o.modifyTime===-1,border:!0,onChange:function(u){return n.updateSource({modifyTime:u?-1:24})}}),o.modifyTime!==-1&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mLeft15",style:{width:170}},e.createElement(Mt.Z,{type:"number",min:1,hasOtherField:!1,data:{fieldValue:o.modifyTime},updateSource:function(u){var p=u.fieldValue;return n.updateSource({modifyTime:p})}})),e.createElement("div",{className:"mLeft10"},_l("\u5C0F\u65F6")))))),o.selectNodeId&&e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop25"},_l("\u8BBE\u7F6E\u5B57\u6BB5")),e.createElement(Na,{processId:this.props.processId,nodeId:this.props.selectNodeId,selectNodeId:o.selectNodeId,selectNodeType:l,data:o.formProperties,addNotAllowView:o.addNotAllowView,hideTypes:o.linkType===1?[2,3]:[],readonlyControlTypes:[21,26,27,48],updateSource:this.updateSource})),o.linkType===2&&e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop25"},_l("\u6309\u94AE\u540D\u79F0")),e.createElement(nn,{dataKey:"submitButtonName",name:o.submitButtonName||_l("\u63D0\u4EA4"),buttonName:_l("\u63D0\u4EA4\u6309\u94AE"),onChange:this.updateSource})))}},{key:"switchLinkType",value:function(n){var l=this.state.data,o=v().cloneDeep(l.formProperties);n===1&&o.forEach(function(d){d.property!==4&&(d.property=1)}),this.updateSource({linkType:n,formProperties:o})}},{key:"render",value:function(){var n=this.state.data;return v().isEmpty(n)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},n),icon:"icon-link2",bg:"BGBlueAsh",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},this.renderContent()))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:!!n.appId||!!n.selectNodeId,onSave:this.onSave})))}}]),F}(e.Component),al=t(42638),rl=t(5861),Fo=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.name,p=o.selectNodeId,f=o.executeType,w=o.subProcessId,D=o.nextExecute,G=o.fields;if(!p){alert(_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u5BF9\u8C61"),2);return}d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,name:u.trim(),selectNodeId:p,executeType:f,subProcessId:w,nextExecute:D,fields:G}).then(function(H){n.props.updateNodeData(H),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.saveSubPorcessOptions=function(){var l=n.state,o=l.data,d=l.processVariables,u=l.errorItems;if(v().find(u,function(p){return p})){alert(_l("\u6709\u53C2\u6570\u914D\u7F6E\u9519\u8BEF"),2);return}if(d.filter(function(p){return!p.controlName}).length){alert(_l("\u53C2\u6570\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"),2);return}al.Z.saveProcessConfig({processId:o.subProcessId,isSaveVariables:!0,processVariables:d}).then(function(p){p&&(alert(_l("\u4FDD\u5B58\u6210\u529F")),n.setState({subProcessDialog:!1}),n.updateSource({subProcessVariables:p}))})},n.state={data:{},saveRequest:!1,subProcessDialog:!1,processVariables:[],errorItems:{}},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n){var l=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=n.processId,u=n.selectNodeId,p=n.selectNodeType,f=n.instanceId,w=this.state.data;z.Z.getNodeDetail({processId:d,nodeId:u,flowNodeType:p,selectNodeId:o.selectNodeId,appId:o.subProcessId,instanceId:f}).then(function(D){l.setState({data:v().isEmpty(o)?D:(0,h.default)({},D,{name:w.name,executeType:w.executeType}),errorItems:{}})})}},{key:"renderContent",value:function(){var n=this,l=this.state,o=l.data,d=l.subProcessDialog,u=l.processVariables,p=l.errorItems,f=[{text:_l("\u5E76\u884C"),value:1,desc:_l("\u591A\u4E2A\u6570\u636E\u5BF9\u8C61\u5C06\u540C\u65F6\u6267\u884C\u5404\u81EA\u7684\u6D41\u7A0B\u3002\u5373\u4FBF\u67D0\u6761\u5B50\u6D41\u7A0B\u8FD0\u884C\u4E2D\u6B62\uFF0C\u4E5F\u4E0D\u5F71\u54CD\u5176\u4ED6\u5B50\u6D41\u7A0B\u7684\u6267\u884C\u3002")},{text:_l("\u9010\u6761\u6267\u884C"),value:2,desc:_l("\u591A\u4E2A\u6570\u636E\u5BF9\u8C61\u5C06\u4F9D\u6B21\u6267\u884C\u6D41\u7A0B\u3002\u6BCF\u6761\u5B50\u6D41\u7A0B\u9700\u8981\u7B49\u524D\u4E00\u6761\u5B50\u6D41\u7A0B\u901A\u8FC7\u540E\u518D\u5F00\u59CB\u89E6\u53D1\uFF1B\u5982\u679C\u67D0\u6761\u5B50\u6D41\u7A0B\u8FD0\u884C\u4E2D\u6B62\uFF0C\u5219\u540E\u7EED\u7684\u5B50\u6D41\u7A0B\u90FD\u4E0D\u518D\u89E6\u53D1\u3002")}],w=o.subProcessId?[{text:e.createElement("span",{className:"Gray_9e"},_l("\u6E05\u9664\u9009\u62E9")),value:""}]:[];return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold"},_l("\u9009\u62E9\u6570\u636E\u5BF9\u8C61")),e.createElement("div",{className:"Font13 Gray_9e mTop10"},_l("\u5F53\u524D\u6D41\u7A0B\u4E2D\u7684\u8282\u70B9\u5BF9\u8C61\uFF0C\u4F5C\u4E3A\u5B50\u6D41\u7A0B\u6570\u636E\u6E90")),e.createElement(fe.Z,{appList:o.flowNodeList,selectNodeId:o.selectNodeId,selectNodeObj:o.selectNodeObj,onChange:function(G){return n.getNodeDetail(n.props,{selectNodeId:G})}}),v().isObject(o.selectNodeObj)&&(v().includes([a.QZ.GET_MORE_RECORD,a.QZ.FIND_MORE_MESSAGE],o.selectNodeObj.nodeTypeId)||o.selectNodeObj.actionId===a.gp.BATCH_ACTION)&&e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop20"},_l("\u591A\u6761\u6570\u636E\u6267\u884C\u65B9\u5F0F")),e.createElement("div",{className:"Font13 Gray_9e mTop10"},_l("\u60A8\u9009\u62E9\u4E86\u591A\u6761\u6570\u636E\u5BF9\u8C61\uFF0C\u5C06\u6839\u636E\u6570\u636E\u7684\u6761\u6570\u6267\u884C\u591A\u6761\u5B50\u6D41\u7A0B")),f.map(function(D,G){return e.createElement("div",{className:"mTop15",key:G},e.createElement(le.Z,{text:D.text,checked:o.executeType===D.value,onClick:function(){return n.updateSource({executeType:D.value})}}),e.createElement("div",{className:"mTop10 mLeft30 Gray_9e"},D.desc))})),e.createElement("div",{className:"mTop20 relative"},e.createElement("span",{className:"Font13 bold"},_l("\u6267\u884C\u5B50\u6D41\u7A0B")),!!(o.processList||[]).length&&e.createElement(Ie.Z,{className:"flowSubProcessDropdown",renderTitle:function(){return e.createElement("span",{className:"ThemeColor3"},_l("\u9009\u62E9\u5DF2\u6709\u6D41\u7A0B"))},menuStyle:{left:"inherit",right:0},data:w.concat(o.processList.map(function(D){return{text:D.name,value:D.id,disabled:o.subProcessId===D.id}})),value:o.subProcessId,onChange:function(G){return n.getNodeDetail(n.props,{selectNodeId:o.selectNodeId,subProcessId:G})}})),o.selectNodeId&&e.createElement(e.Fragment,null,e.createElement("div",{className:"workflowDetailDesc mTop10 flexRow",style:{padding:"10px 12px"}},o.subProcessId?e.createElement(e.Fragment,null,e.createElement("div",{className:"ellipsis"},o.subProcessName),!o.subProcessEnabled&&e.createElement("div",{className:"flex",style:{color:"#f44336"}},"\uFF08",_l("\u672A\u5F00\u542F"),"\uFF09")):e.createElement("div",{className:"Gray_75 ellipsis"},_l("\u8282\u70B9\u4FDD\u5B58\u540E\uFF0C\u5C06\u81EA\u52A8\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u5B50\u6D41\u7A0B"))),e.createElement("div",{className:"mTop15"},e.createElement(b.Z,{className:"InlineFlex TxtTop",text:_l("\u5B50\u6D41\u7A0B\u6267\u884C\u5B8C\u6BD5\u540E\uFF0C\u518D\u5F00\u59CB\u4E0B\u4E00\u4E2A\u8282\u70B9"),checked:o.nextExecute,onClick:function(G){return n.updateSource({nextExecute:!G})}})),e.createElement("div",{className:"Font13 Gray_9e",style:{marginLeft:26}},_l("\u52FE\u9009\u540E\uFF0C\u5F53\u5B50\u6D41\u7A0B\u6570\u636E\u6E90\u4E3A\u5355\u6761\u5BF9\u8C61\uFF0C\u4E4B\u540E\u8282\u70B9\u53EF\u4F7F\u7528\u5B50\u6D41\u7A0B\u4E2D\u7684\u53C2\u6570")),e.createElement("div",{className:"Font13 mTop20 flexRow"},e.createElement("div",{className:"flex bold"},_l("\u53C2\u6570\u4F20\u9012")),o.subProcessId&&e.createElement("div",{className:"pointer ThemeColor3 ThemeHoverColor2",onClick:function(){return n.setState({subProcessDialog:!0,processVariables:o.subProcessVariables})}},_l("\u53C2\u6570\u8BBE\u7F6E"))),e.createElement("div",{className:"Font13 Gray_9e mTop10"},_l("\u5411\u5B50\u6D41\u7A0B\u7684\u6D41\u7A0B\u53C2\u6570\u4F20\u9012\u521D\u59CB\u503C\uFF0C\u4F9B\u5B50\u6D41\u7A0B\u6267\u884C\u65F6\u4F7F\u7528")),e.createElement(Za.Z,{type:2,isSubProcessNode:!0,companyId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,controls:o.subProcessVariables,fields:o.fields,formulaMap:o.formulaMap,updateSource:this.updateSource})),d&&e.createElement(te.Z,{visible:!0,className:"subProcessDialog",onCancel:function(){return n.setState({subProcessDialog:!1})},onOk:this.saveSubPorcessOptions,title:_l("\u53C2\u6570\u8BBE\u7F6E")},e.createElement(rl.Z,{processVariables:u,errorItems:p,setErrorItems:function(G){return n.setState({errorItems:G})},updateSource:function(G){return n.setState(G)}})))}},{key:"render",value:function(){var n=this.state.data;return v().isEmpty(n)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},n),icon:"icon-subprocess",bg:"BGBlueAsh",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},this.renderContent()))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:n.selectNodeId,onSave:this.onSave})))}}]),F}(e.Component),Wn=function(ne){(0,k.default)(F,ne);function F(){var B,n,l,o;(0,j.default)(this,F);for(var d=arguments.length,u=Array(d),p=0;p<d;p++)u[p]=arguments[p];return o=(n=(l=(0,I.default)(this,(B=F.__proto__||Ne()(F)).call.apply(B,[this].concat(u))),l),l.state={showOtherWorksheet:!1,otherAppName:"",worksheetInfo:null},l.switchWorksheet=function(f){var w=l.props.switchWorksheet;l.getWorksheetInfo(f),w(f)},n),(0,I.default)(l,o)}return(0,L.default)(F,[{key:"componentDidMount",value:function(){var n=this.props.data;n.appId&&this.getWorksheetInfo(n.appId)}},{key:"getAppDetail",value:function(n){var l=this;In.Z.getApp({appId:n}).then(function(o){l.setState({otherAppName:o.name})})}},{key:"getWorksheetInfo",value:function(n){var l=this,o=this.props,d=o.data,u=o.relationId,p=this.state.otherAppName,f=void 0;d.pushType===a.No.PAGE?f=In.Z.getPageInfo({id:n}):f=Kr.Z.getWorksheetInfo({worksheetId:n,getViews:!0}),f.then(function(w){w.resultCode===1?(l.setState({worksheetInfo:w}),w.appId!==u&&p===""&&l.getAppDetail(w.appId)):l.setState({worksheetInfo:{}})})}},{key:"renderSelectSheet",value:function(){var n=this,l=this.props,o=l.data,d=l.currentAppList,u=this.state,p=u.worksheetInfo,f=u.otherAppName,w=o.pushType===a.No.PAGE,D=[{text:w?_l("\u5176\u5B83\u5E94\u7528\u4E0B\u7684\u81EA\u5B9A\u4E49\u9875\u9762"):_l("\u5176\u5B83\u5E94\u7528\u4E0B\u7684\u5DE5\u4F5C\u8868"),value:"other",className:"Gray_75"}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop20"},w?_l("\u81EA\u5B9A\u4E49\u9875\u9762"):_l("\u5DE5\u4F5C\u8868"),e.createElement("span",{className:"mLeft5 red"},"*")),e.createElement(Ie.Z,{className:R()("flowDropdown mTop10",{"errorBorder errorBG":o.appId&&p!==null&&v().isEmpty(p)}),data:[d.filter(function(G){return G.type===(w?1:0)}),D],value:o.appId,renderTitle:!o.appId||p===null?function(){return e.createElement("span",{className:"Gray_9e"},_l("\u8BF7\u9009\u62E9"))}:o.appId&&v().isEmpty(p)?function(){return e.createElement("span",{className:"errorColor"},w?_l("\u81EA\u5B9A\u4E49\u9875\u9762\u65E0\u6548\u6216\u5DF2\u5220\u9664"):_l("\u5DE5\u4F5C\u8868\u65E0\u6548\u6216\u5DF2\u5220\u9664"))}:function(){return e.createElement(e.Fragment,null,e.createElement("span",null,p.name),f&&e.createElement("span",{className:"Gray_9e"},"\uFF08",f,"\uFF09"))},border:!0,openSearch:!0,onChange:function(H){H==="other"?n.setState({showOtherWorksheet:!0}):n.switchWorksheet(H)}}))}},{key:"renderView",value:function(){var n=this.props,l=n.data,o=n.updateSource,d=this.state.worksheetInfo;if(!d||v().isEmpty(d)||d.worksheetId!==l.appId)return null;var u=d.views.map(function(f){return{text:f.name,value:f.viewId,className:l.viewId===f.viewId?"ThemeColor3":""}}),p=v().find(u,function(f){return f.value===l.viewId});return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop20"},_l("\u89C6\u56FE"),e.createElement("span",{className:"mLeft5 red"},"*")),l.pushType!==a.No.VIEW&&e.createElement("div",{className:"Font13 Gray_9e mTop5"},_l("\u6309\u7167\u6240\u9009\u89C6\u56FE\u914D\u7F6E\u7684\u663E\u793A\u5B57\u6BB5\u53D1\u9001\uFF0C\u5982\u679C\u64CD\u4F5C\u8005\u88AB\u5206\u53D1\u4E86\u6B64\u89C6\u56FE\uFF0C\u53EF\u4EE5\u76F4\u63A5\u6309\u6743\u9650\u7F16\u8F91\u8BB0\u5F55\u3001\u6267\u884C\u81EA\u5B9A\u4E49\u52A8\u4F5C")),e.createElement(Ie.Z,{className:R()("flowDropdown mTop10",{"errorBorder errorBG":l.viewId&&!p}),data:u,value:l.viewId,renderTitle:l.viewId?l.viewId&&!p?function(){return e.createElement("span",{className:"errorColor"},_l("\u89C6\u56FE\u65E0\u6548\u6216\u5DF2\u5220\u9664"))}:function(){return e.createElement("span",null,p.text)}:function(){return e.createElement("span",{className:"Gray_9e"},_l("\u8BF7\u9009\u62E9"))},border:!0,onChange:function(w){return o({viewId:w})}}))}},{key:"renderOpenDetail",value:function(){var n=this,l=this.props,o=l.data,d=l.flowNodeList,u=l.updateSource;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop20"},_l("\u8BB0\u5F55"),e.createElement("span",{className:"mLeft5 red"},"*")),e.createElement(fe.Z,{smallBorder:!0,appList:d,selectNodeId:o.selectNodeId,selectNodeObj:o.selectNodeId?v().find(d,function(p){return p.nodeId===o.selectNodeId})||{}:{},onChange:function(f){var w=v().find(d,function(D){return D.nodeId===f});u({selectNodeId:f},function(){return n.switchWorksheet(w.appId)})}}))}},{key:"renderOpenType",value:function(){var n=this.props,l=n.data,o=n.updateSource,d=[{text:_l("\u5237\u65B0\u5F53\u524D\u9875\u9762"),value:1},{text:_l("\u5F39\u5C42"),value:3},{text:_l("\u6253\u5F00\u65B0\u9875\u9762"),value:2},{text:_l("\u63A8\u9001\u6A21\u6001\u7A97\u53E3"),value:4}],u=function(f){switch(l.pushType){case a.No.DETAIL:return v().includes([1,4],f);case a.No.VIEW:case a.No.PAGE:return v().includes([3,4],f);case a.No.LINK:return v().includes([3],f)}};return v().remove(d,function(p){return u(p.value)}),e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop20"},_l("\u6253\u5F00\u65B9\u5F0F")),e.createElement("div",{className:"workflowOpenModeBox"},d.map(function(p){return e.createElement("div",{className:"mTop15",key:p.value},e.createElement(le.Z,{text:p.text,checked:p.value===l.openMode,onClick:function(){return o({openMode:p.value})}}))})))}},{key:"renderTextContent",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"content",l=this.props,o=l.data,d=l.updateSource,u=l.formulaMap,p=l.updateRootSource;return e.createElement(ce.Z,{className:"minH100",projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,type:2,content:o.content,formulaMap:u,onChange:function(w,D,G){return d((0,E.default)({},n,D))},updateSource:p})}},{key:"render",value:function(){var n=this,l=this.props.data,o=this.state.showOtherWorksheet;return e.createElement(e.Fragment,null,l.pushType===a.No.CREATE&&this.renderSelectSheet(),l.pushType===a.No.DETAIL&&e.createElement(e.Fragment,null,this.renderOpenDetail(),this.renderView(),this.renderOpenType()),l.pushType===a.No.VIEW&&e.createElement(e.Fragment,null,this.renderSelectSheet(),this.renderView(),this.renderOpenType()),l.pushType===a.No.PAGE&&e.createElement(e.Fragment,null,this.renderSelectSheet(),this.renderOpenType()),l.pushType===a.No.LINK&&e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop20"},_l("\u94FE\u63A5"),e.createElement("span",{className:"mLeft5 red"},"*")),this.renderTextContent(),this.renderOpenType()),o&&e.createElement(ur.Z,{projectId:this.props.companyId,worksheetType:l.pushType===a.No.PAGE?1:0,selectedAppId:this.props.relationId,selectedWorksheetId:l.appId,visible:!0,onOk:function(u,p,f){var w=n.props.relationId===u;!w&&u&&n.setState({otherAppName:!w&&f.appName}),n.switchWorksheet(p)},onHide:function(){return n.setState({showOtherWorksheet:!1})}}))}}]),F}(e.Component),Ae=(0,W.Z)([`
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 36px;
  border: 1px solid #ddd;
  opacity: 1;
  border-radius: 3px;
  padding: 0 20px 0 15px;
  margin-right: 10px;
  cursor: pointer;
  &.active {
    position: relative;
    border-color: #2196f3;
    &::before {
      position: absolute;
      right: -8px;
      top: -8px;
      border-style: solid;
      border-width: 8px;
      border-color: #2196f3 transparent transparent transparent;
      content: '';
      transform: rotateZ(-135deg);
    }
  }
  i {
    font-size: 20px;
    margin-right: 5px;
  }
`],[`
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 36px;
  border: 1px solid #ddd;
  opacity: 1;
  border-radius: 3px;
  padding: 0 20px 0 15px;
  margin-right: 10px;
  cursor: pointer;
  &.active {
    position: relative;
    border-color: #2196f3;
    &::before {
      position: absolute;
      right: -8px;
      top: -8px;
      border-style: solid;
      border-width: 8px;
      border-color: #2196f3 transparent transparent transparent;
      content: '';
      transform: rotateZ(-135deg);
    }
  }
  i {
    font-size: 20px;
    margin-right: 5px;
  }
`]),Ge=(0,W.Z)([`
  margin-top: 30px;
  border: 1px solid #ddd;
  border-radius: 4px;
  padding: 20px;
  position: relative;
  .workflowMessageTitle {
    position: absolute;
    top: -10px;
    left: 18px;
    background: #fff;
    padding: 0 3px;
  }
  .workflowMessageDelete {
    position: absolute;
    top: -9px;
    right: 18px;
    background: #fff;
    padding: 0 3px;
    font-size: 16px;
    color: #bdbdbd;
    cursor: pointer;
    &:hover {
      color: #2196f3;
    }
  }
  .Font13.bold {
    font-weight: normal;
  }
  .workflowOpenModeBox {
    display: flex;
    > div {
      margin-right: 50px;
    }
  }
`],[`
  margin-top: 30px;
  border: 1px solid #ddd;
  border-radius: 4px;
  padding: 20px;
  position: relative;
  .workflowMessageTitle {
    position: absolute;
    top: -10px;
    left: 18px;
    background: #fff;
    padding: 0 3px;
  }
  .workflowMessageDelete {
    position: absolute;
    top: -9px;
    right: 18px;
    background: #fff;
    padding: 0 3px;
    font-size: 16px;
    color: #bdbdbd;
    cursor: pointer;
    &:hover {
      color: #2196f3;
    }
  }
  .Font13.bold {
    font-weight: normal;
  }
  .workflowOpenModeBox {
    display: flex;
    > div {
      margin-right: 50px;
    }
  }
`]),A=P.ZP.div(Ae),M=P.ZP.div(Ge),Ve=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.name,p=o.promptType,f=o.pushType,w=o.openMode,D=o.selectNodeId,G=o.viewId,H=o.content,De=o.appId,je=o.duration,lt=o.title,Ft=o.buttons,un=!1;(Ft||[]).forEach(function(dn){n.checkHasError(dn)&&(un=!0)}),!(n.checkHasError(o)||un)&&(d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,name:u.trim(),promptType:p,pushType:f,openMode:w,appId:De,selectNodeId:D,viewId:G,content:H,duration:je,title:lt,buttons:Ft}).then(function(dn){n.props.updateNodeData(dn),n.props.closeDetail()}),n.setState({saveRequest:!0})))},n.switchWorksheet=function(l,o){o===void 0?n.updateSource({appId:l,viewId:""}):n.updateButtonSource({appId:l,viewId:""},o)},n.state={data:{},saveRequest:!1,currentAppList:[]},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n){var l=this,o=n.processId,d=n.selectNodeId,u=n.selectNodeType,p=n.instanceId;z.Z.getNodeDetail({processId:o,nodeId:d,flowNodeType:u,instanceId:p}).then(function(f){l.setState({data:f}),l.getWorksheetsByAppId()})}},{key:"updateButtonSource",value:function(n,l){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},d=this.state.data,u=d.buttons;u[l]=C()({},u[l],n),this.updateSource(u,o)}},{key:"checkHasError",value:function(n){var l=n.pushType,o=n.content,d=n.appId,u=n.selectNodeId,p=n.title,f=n.viewId;return v().includes([a.No.ALERT,a.No.LINK],l)&&!o.trim()?(alert(l===a.No.ALERT?_l("\u63D0\u793A\u5185\u5BB9\u4E0D\u5141\u8BB8\u4E3A\u7A7A"):_l("\u94FE\u63A5\u4E0D\u5141\u8BB8\u4E3A\u7A7A"),2),!0):v().includes([a.No.CREATE,a.No.VIEW,a.No.PAGE],l)&&!d?(alert(l===a.No.PAGE?_l("\u81EA\u5B9A\u4E49\u9875\u9762\u4E0D\u5141\u8BB8\u4E3A\u7A7A"):_l("\u5DE5\u4F5C\u8868\u4E0D\u5141\u8BB8\u4E3A\u7A7A"),2),!0):l===a.No.VIEW&&!f?(alert(_l("\u89C6\u56FE\u4E0D\u5141\u8BB8\u4E3A\u7A7A"),2),!0):l===a.No.DETAIL&&!u?(alert(_l("\u8BB0\u5F55\u4E0D\u5141\u8BB8\u4E3A\u7A7A"),2),!0):l===a.No.NOTIFICATION&&!(p||"").trim()?(alert(_l("\u6807\u9898\u4E0D\u5141\u8BB8\u4E3A\u7A7A"),2),!0):!1}},{key:"getWorksheetsByAppId",value:function(){var n=this,l=this.props.relationId;In.Z.getWorksheetsByAppId({appId:l}).then(function(o){n.setState({currentAppList:o.map(function(d){var u=d.workSheetName,p=d.workSheetId,f=d.type;return{text:u,value:p,type:f}})})})}},{key:"renderNullContent",value:function(){var n=this,l=[{text:_l("\u5F39\u51FA\u63D0\u793A"),value:a.No.ALERT,desc:_l("\u5728\u9876\u90E8\u663E\u793A\u5E76\u81EA\u52A8\u6D88\u5931\u3002\u7528\u4E8E\u4E00\u53E5\u8BDD\u7684\u7B80\u77ED\u63D0\u793A")},{text:_l("\u5361\u7247\u901A\u77E5"),value:a.No.NOTIFICATION,desc:_l("\u5728\u5E95\u90E8\u663E\u793A\u5E76\u53EF\u8BBE\u4E3A\u4E0D\u81EA\u52A8\u6D88\u5931\u3002\u53EF\u5305\u542B\u6807\u9898\u3001\u63CF\u8FF0\u3001\u6309\u94AE\uFF0C\u9002\u5408\u8F83\u591A\u6587\u5B57\u6216\u5E26\u6709\u64CD\u4F5C\u7684\u901A\u77E5")}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold"},_l("\u901A\u77E5")),e.createElement("ul",{className:"typeList mTop10"},l.map(function(o,d){return e.createElement("li",{key:d,onClick:function(){return n.updateSource({pushType:o.value})}},e.createElement(le.Z,{className:"Font16",text:o.text}),e.createElement("div",{className:"Gray_75 Font13 mLeft30 mTop5"},o.desc))})),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u4E8B\u4EF6")),e.createElement("ul",{className:"typeList"},a.XO.filter(function(o){return!v().includes([a.No.ALERT,a.No.NOTIFICATION],o.value)}).map(function(o,d){return e.createElement("li",{key:d,className:"pTop4 pBottom4",onClick:function(){return n.updateSource({pushType:o.value,openMode:2})}},e.createElement(le.Z,{className:"Font16",text:o.text}))})))}},{key:"renderContent",value:function(){var n=this,l=this.props.flowInfo,o=this.state,d=o.data,u=o.currentAppList;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font14 Gray_75 workflowDetailDesc"},l.startAppType===a.IF.PBC&&!l.child&&_l("\u4EC5\u901A\u8FC7\u81EA\u5B9A\u4E49\u9875\u9762\u4E0A\u7684\u6309\u94AE\u8C03\u7528\u7684PBP\u652F\u6301\u754C\u9762\u63A8\u9001\u529F\u80FD\uFF08\u901A\u8FC7API\u548C\u5DE5\u4F5C\u6D41\u8C03\u7528\u65F6\u6B64\u8282\u70B9\u65E0\u6CD5\u751F\u6548\uFF09\u3002"),d.pushType===a.No.ALERT?_l("\u5728\u9876\u90E8\u663E\u793A\u5E76\u81EA\u52A8\u6D88\u5931\u3002\u7528\u4E8E\u4E00\u53E5\u8BDD\u7684\u7B80\u77ED\u63D0\u793A"):d.pushType===a.No.NOTIFICATION?_l("\u5728\u5E95\u90E8\u663E\u793A\u5E76\u53EF\u8BBE\u4E3A\u4E0D\u81EA\u52A8\u6D88\u5931\u3002\u53EF\u5305\u542B\u6807\u9898\u3001\u63CF\u8FF0\u3001\u6309\u94AE\uFF0C\u9002\u5408\u8F83\u591A\u6587\u5B57\u6216\u5E26\u6709\u64CD\u4F5C\u7684\u901A\u77E5"):_l("\u89E6\u53D1\u6309\u94AE\u540E\uFF0C\u76F4\u63A5\u63A8\u9001\u6307\u5B9A\u5185\u5BB9\u7ED9\u6309\u94AE\u64CD\u4F5C\u8005\u3002\u4E0D\u80FD\u662F\u4E00\u4E2A\u5EF6\u65F6\u53CD\u9988\uFF08\u8BE5\u8282\u70B9\u4E0E\u89E6\u53D1\u5668\u4E4B\u95F4\u4E0D\u80FD\u6709\u5EF6\u65F6\u3001\u4EBA\u5DE5\u548C\u5B50\u6D41\u7A0B\u8282\u70B9\uFF09\u5982\u679C\u6D41\u7A0B\u6267\u884C\u4E2D\u89E6\u53D1\u4E86\u591A\u4E2A\u754C\u9762\u63A8\u9001\u8282\u70B9\uFF0C\u53EA\u751F\u6548\u7B2C\u4E00\u4E2A")),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u63A8\u9001\u5185\u5BB9")),this.renderEventList(d.pushType),d.pushType===a.No.ALERT&&e.createElement(e.Fragment,null,this.renderMessageType(),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u63CF\u8FF0"),e.createElement("span",{className:"mLeft5 red"},"*")),this.renderTextContent(),this.renderDurationContent()),d.pushType===a.No.NOTIFICATION&&e.createElement(e.Fragment,null,this.renderMessageType(),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u6807\u9898"),e.createElement("span",{className:"mLeft5 red"},"*")),this.renderTextContent("title"),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u63CF\u8FF0")),this.renderTextContent(),this.renderDurationContent(),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u5361\u7247\u6309\u94AE")),(d.buttons||[]).map(function(p,f){return e.createElement(M,null,e.createElement("div",{className:"workflowMessageTitle"},_l("\u6309\u94AE%0",f+1)),e.createElement("i",{className:"icon-delete2 workflowMessageDelete",onClick:function(){n.updateSource({buttons:d.buttons.filter(function(D,G){return G!==f})})}}),e.createElement("div",null,_l("\u540D\u79F0")),e.createElement("div",{className:"mTop10 flexRow"},e.createElement("input",{type:"text",className:"ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10 flex",value:p.name,onChange:function(D){return n.updateButtonSource({name:D.target.value},f)},onBlur:function(D){return n.updateButtonSource({name:D.target.value.trim()||_l("\u6309\u94AE")},f)}})),e.createElement("div",{className:"mTop20"},_l("\u4E8B\u4EF6")),n.renderEventList(p.pushType,f),e.createElement(Wn,(0,h.default)({},n.props,{data:p,currentAppList:u,flowNodeList:d.flowNodeList,formulaMap:d.formulaMap,switchWorksheet:function(D){return n.switchWorksheet(D,f)},updateSource:function(D,G){return n.updateButtonSource(D,f,G)},updateRootSource:n.updateSource})))}),(d.buttons||[]).length<2&&e.createElement("div",{className:"addActionBtn mTop25"},e.createElement("span",{className:"ThemeBorderColor3",onClick:function(){return n.updateSource({buttons:(d.buttons||[]).concat({name:_l("\u6309\u94AE"),pushType:3,openMode:2,appId:"",selectNodeId:"",viewId:"",content:""})})}},e.createElement("i",{className:"icon-add Font16"}),_l("\u6DFB\u52A0\u6309\u94AE")))),e.createElement(Wn,(0,h.default)({},this.props,{data:d,currentAppList:u,flowNodeList:d.flowNodeList,formulaMap:d.formulaMap,switchWorksheet:this.switchWorksheet,updateSource:this.updateSource,updateRootSource:this.updateSource})))}},{key:"renderEventList",value:function(n,l){var o=this,d=v().cloneDeep(a.XO);return l!==void 0&&v().remove(d,function(u){return v().includes([1,7],u.value)}),d.forEach(function(u){u.value===n&&(u.className="ThemeColor3")}),e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:d,value:n,border:!0,onChange:function(p){var f={pushType:p,openMode:2,appId:"",content:"",viewId:"",selectNodeId:""};l===void 0?o.updateSource(C()(f,{promptType:1,buttons:[]})):o.updateButtonSource(f,l)}})}},{key:"renderMessageType",value:function(){var n=this,l=this.state.data,o=[{text:_l("\u6210\u529F"),value:1,color:"#4CAF50",icon:"icon-plus-interest"},{text:_l("\u5931\u8D25"),value:2,color:"#F44336",icon:"icon-delete_out"},{text:_l("\u8B66\u544A"),value:3,color:"#FFBA00",icon:"icon-error1"},{text:_l("\u901A\u77E5"),value:4,color:"#2196F3",icon:"icon-info"}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop20"},_l("\u63D0\u793A\u7C7B\u578B")),e.createElement("div",{className:"flexRow mTop15"},o.map(function(d){return e.createElement(A,{key:d.value,className:R()({active:l.promptType===d.value}),onClick:function(){return n.updateSource({promptType:d.value})}},e.createElement("i",{className:d.icon,style:{color:d.color}}),d.text)})))}},{key:"renderTextContent",value:function(){var n=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"content",o=this.state.data,d=l==="title"?{height:0}:{};return e.createElement(ce.Z,(0,h.default)({className:R()({minH100:l!=="title"}),projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,type:2},d,{content:o[l],formulaMap:o.formulaMap,onChange:function(p,f,w){return n.updateSource((0,E.default)({},l,f))},updateSource:this.updateSource}))}},{key:"renderDurationContent",value:function(){var n=this,l=this.state.data,o=[{text:_l("\u6307\u5B9A\u65F6\u95F4\u540E"),value:1},{text:_l("\u6C38\u4E0D\uFF0C\u9700\u8981\u624B\u52A8\u5173\u95ED"),value:2}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold mTop20"},_l("\u81EA\u52A8\u6D88\u5931")),l.pushType===a.No.NOTIFICATION&&e.createElement("div",{className:"flexRow mTop10"},o.map(function(d){return e.createElement(le.Z,{key:d.value,className:R()({mLeft50:d.value===2}),checked:l.duration>0&&d.value===1||l.duration===0&&d.value===2,text:d.text,onClick:function(){d.value===2?n.updateSource({duration:0}):d.value===1&&l.duration===0&&n.updateSource({duration:5})}})})),l.duration!==0&&e.createElement("div",{className:"flexRow mTop10 alignItemsCenter"},e.createElement("div",{className:"flex"},e.createElement(Mt.Z,{updateSource:function(u){var p=u.fieldValue;return n.updateSource({duration:p})},type:"number",min:1,max:10,allowedEmpty:!0,hasOtherField:!1,data:{fieldValue:l.duration}})),e.createElement("div",{className:"mLeft10"},_l("\u79D2"))))}},{key:"render",value:function(){var n=this.state.data;return v().isEmpty(n)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},n),icon:"icon-interface_push",bg:"BGBlue",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},n.pushType?this.renderContent():this.renderNullContent()))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:v().includes([a.No.ALERT,a.No.LINK],n.pushType)&&n.content.trim()||v().includes([a.No.CREATE,a.No.VIEW,a.No.PAGE],n.pushType)&&n.appId||n.pushType===a.No.DETAIL&&n.selectNodeId||n.pushType===a.No.NOTIFICATION&&(n.title||"").trim(),onSave:this.onSave})))}}]),F}(e.Component),Oe=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.name,p=o.selectNodeId,f=o.appId,w=o.fileName,D=o.pdf;if(!p){alert(_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u5BF9\u8C61"),2);return}if(!f){alert(_l("\u6253\u5370\u6A21\u677F\u5FC5\u9009"),2);return}if(w&&/[/:*?"<>|]/.test(w)){alert(_l("\u975E\u6CD5\u6587\u4EF6\u540D"),2);return}d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,name:u.trim(),selectNodeId:p,appId:f,fileName:w,pdf:D}).then(function(G){n.props.updateNodeData(G),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.state={data:{},saveRequest:!1},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n,l){var o=this,d=n.processId,u=n.selectNodeId,p=n.selectNodeType,f=n.instanceId,w=this.state.data;z.Z.getNodeDetail({processId:d,nodeId:u,flowNodeType:p,selectNodeId:l,instanceId:f}).then(function(D){o.setState({data:l?(0,h.default)({},D,{name:w.name}):D})})}},{key:"renderContent",value:function(){var n=this,l=this.state.data,o=l.appList.map(function(u){return{text:u.name,value:u.id,className:u.id===l.appId?"ThemeColor3":""}}),d=o.find(function(u){return u.value===l.appId});return e.createElement(e.Fragment,null,e.createElement("div",{className:"Gray_75 workflowDetailDesc pTop15 pBottom15"},_l("\u5C06\u8BB0\u5F55\u8F6C\u4E3APDF\u3001Word\u6216Excel\u6587\u4EF6\uFF0C\u53EF\u4EE5\u901A\u8FC7\u65B0\u589E\u8BB0\u5F55\u3001\u66F4\u65B0\u8BB0\u5F55\u6216\u53D1\u9001\u90AE\u4EF6\u8282\u70B9\u5C06\u6587\u4EF6\u5199\u5165\u9644\u4EF6\u3002\u6CE8\uFF1A\u6587\u6863\u5927\u5C0F\u4E0D\u5F97\u8D85\u8FC7100M\uFF0C\u4F5C\u4E3A\u90AE\u4EF6\u9644\u4EF6\u53D1\u9001\u65F6\u4E0D\u5F97\u8D85\u8FC710M\u3002")),e.createElement("div",{className:"mTop20 bold"},_l("\u6253\u5370\u5BF9\u8C61")),e.createElement("div",{className:"Gray_75 mTop5"},_l("\u5F53\u524D\u6D41\u7A0B\u4E2D\u7684\u8282\u70B9\u5BF9\u8C61")),e.createElement(fe.Z,{appList:l.flowNodeList,selectNodeId:l.selectNodeId,selectNodeObj:l.selectNodeObj,onChange:function(p){return n.getNodeDetail(n.props,p)}}),e.createElement("div",{className:"mTop20 bold"},_l("\u6253\u5370\u6A21\u677F")),e.createElement(Ie.Z,{className:R()("flowDropdown mTop10",{"errorBorder errorBG":l.appId&&!d}),data:o,value:l.appId,renderTitle:l.appId?l.appId&&!d?function(){return e.createElement("span",{className:"errorColor"},_l("\u6A21\u677F\u5DF2\u5220\u9664"))}:function(){return e.createElement("span",null,d.text)}:function(){return e.createElement("span",{className:"Gray_9e"},_l("\u8BF7\u9009\u62E9"))},border:!0,openSearch:!0,noData:_l("\u6682\u65E0\u6253\u5370\u6A21\u677F"),onChange:function(p){return n.updateSource({appId:p})}}),e.createElement("div",{className:"mTop20 bold"},_l("\u6587\u4EF6\u540D")),e.createElement("div",{className:"Gray_75 mTop5"},_l('\u7CFB\u7EDF\u9ED8\u8BA4\u4F7F\u7528\u8BB0\u5F55\u6807\u9898\u4F5C\u4E3A\u6587\u4EF6\u540D\uFF0C\u81EA\u5B9A\u4E49\u540D\u79F0\u65F6\u4E0D\u5F97\u5305\u542B\u82F1\u6587\u5B57\u7B26/:*?"<>|')),e.createElement(ce.Z,{projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,type:2,height:0,content:l.fileName,formulaMap:l.formulaMap,onChange:function(p,f,w){return n.updateSource({fileName:f})},updateSource:this.updateSource}),e.createElement("div",{className:"Font13 mTop20 bold"},_l("\u5176\u4ED6"),e.createElement("span",{className:"workflowDetailTipsWidth mLeft5 tip-top-right","data-tip":_l("\u7CFB\u7EDF\u9ED8\u8BA4\u4F1A\u751F\u6210 Word/Excel \u6587\u4EF6\uFF0C\u751F\u6210\u7684\u6587\u4EF6\u540E\u7EED\u6D41\u7A0B\u8282\u70B9\u53EF\u76F4\u63A5\u4F7F\u7528")},e.createElement(Q.Z,{className:"Font14 Gray_9e",icon:"info"}))),e.createElement("div",{className:"mTop10 flexRow"},e.createElement(b.Z,{className:"InlineFlex",text:_l("\u540C\u65F6\u751F\u6210PDF\u6587\u4EF6"),checked:l.pdf,disabled:!l.wpsConfig,onClick:function(p){return n.updateSource({pdf:!p})}})),!l.wpsConfig&&e.createElement("div",{className:"mTop5",style:{color:"#ffa340"}},_l("\u672A\u914D\u7F6E PDF \u8F6C\u6362\u670D\u52A1")),md.global.Config.IsPlatformLocal&&l.pdf&&e.createElement("div",{className:"mTop5 Gray_9e"},_l("\u751F\u6210PDF\u6587\u4EF6\u662F\u7531WPS\u63D0\u4F9B\u7684\u7B2C\u4E09\u65B9\u670D\u52A1\uFF0C\u6536\u8D39\u6807\u51C6\u4E3A"),e.createElement("span",{style:{color:"#ffa340"}},_l("\u6BCF\u4E2A\u6587\u4EF60.15\u5143")),_l("\uFF0C\u8F6C\u6362\u5931\u8D25\u7684\u6587\u4EF6\u5C06\u4E0D\u6536\u53D6\u8D39\u7528\u3002")))}},{key:"render",value:function(){var n=this.state.data;return v().isEmpty(n)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},n),icon:"icon-print",bg:"BGBlueAsh",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},this.renderContent()))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:!!n.selectNodeId&&!!n.appId,onSave:this.onSave})))}}]),F}(e.Component),it=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.name,p=o.actionId,f=o.accounts,w=o.appId,D=o.fields,G=o.templateNode;if(!f.length){alert(_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u53D1\u9001\u4EBA"),2);return}if(!w){alert(_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u6A21\u677F"),2);return}d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,actionId:p,name:u.trim(),accounts:f,appId:w,fields:D,templateNode:G}).then(function(H){n.props.updateNodeData(H),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.state={data:{},saveRequest:!1,cacheKey:+new Date,detailType:0},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n,l){var o=this,d=n.processId,u=n.selectNodeId,p=n.selectNodeType,f=n.instanceId;z.Z.getNodeDetail({processId:d,nodeId:u,flowNodeType:p,appId:l,instanceId:f}).then(function(w){o.setState({data:l?C()({},o.state.data,{appId:l,controls:w.controls,fields:w.fields}):w,cacheKey:+new Date,detailType:w.templateNode.appId||w.templateNode.pagePath?1:0})})}},{key:"renderDesc",value:function(){var n=this.state.data;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Gray_75 workflowDetailDesc"},_l("\u53D1\u9001\u670D\u52A1\u53F7\u6D88\u606F\u662F\u6307\u5411\u5DF2\u5173\u6CE8\u516C\u4F17\u53F7\u7684\u5FAE\u4FE1\u7528\u6237\u53D1\u9001\u6A21\u7248\u6D88\u606F\u3002\u53D1\u9001\u5BF9\u8C61\u652F\u6301\u4F7F\u7528\u4EBA\u5458\u5B57\u6BB5\uFF08\u901A\u8FC7\u5FAE\u4FE1\u6388\u6743\u6CE8\u518C\u7684\u5916\u90E8\u95E8\u6237\u7528\u6237\uFF09\u6216\u6587\u672C\u5B57\u6BB5\uFF08\u5B58\u50A8\u5FAE\u4FE1\u516C\u4F17\u53F7openid\uFF09\u3002\u4F7F\u7528\u5FAE\u4FE1\u516C\u4F17\u53F7\u6A21\u677F\u6D88\u606F\u9700\u8981\u7EC4\u7EC7\u540E\u53F0\u7ED1\u5B9A\u5DF2\u8BA4\u8BC1\u7684\u4F01\u4E1A\u670D\u52A1\u53F7\uFF0C\u5E76\u5728\u5FAE\u4FE1\u516C\u4F17\u53F7\u540E\u53F0\u5F00\u901A\u201C\u6A21\u677F\u6D88\u606F\u201D\u529F\u80FD\u3002")),e.createElement("div",{className:"mTop20 bold"},_l("\u670D\u52A1\u53F7")),n.service.appId?e.createElement("div",{className:"workflowDetailDesc mTop10"},_l("\u5B98\u65B9\u8BA4\u8BC1\u670D\u52A1\u53F7"),e.createElement("span",{className:"mLeft5",style:{color:"#01ca83"}},n.service.serviceName)):e.createElement("div",{className:"Gray_75 workflowDetailDesc mTop10"},_l("\u5F53\u524D\u5E94\u7528\u5916\u90E8\u95E8\u6237\u672A\u5F00\u901A\u5FAE\u4FE1\u767B\u5F55\uFF0C\u8BF7\u524D\u5F80"),e.createElement("a",{href:"/app/"+this.props.relationId+"/role/external",className:"ThemeColor3 ThemeHoverColor2",target:location.href.indexOf("role/external")?"_blank":"_self"},_l("\u95E8\u6237\u8BBE\u7F6E")),_l("\u64CD\u4F5C")))}},{key:"renderMembers",value:function(){var n=this,l=this.state,o=l.data,d=l.showSelectUserDialog;return e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u53D1\u9001\u7ED9"),e.createElement("span",{className:"workflowDetailTipsWidth mLeft5 Gray_9e tip-bottom-right","data-tip":_l("\u53D1\u9001\u5BF9\u8C61\u5FC5\u987B\u662F\u5DF2\u5173\u6CE8\u5F53\u524D\u516C\u4F17\u53F7\u7684\u5916\u90E8\u7528\u6237")},e.createElement("i",{className:"Font16 icon-info"}))),e.createElement($n.Z,{companyId:this.props.companyId,accounts:o.accounts,appId:this.props.relationType===2?this.props.relationId:"",removeOrganization:!0,updateSource:this.updateSource}),e.createElement("div",{className:"flexRow mTop15 ThemeColor3 workflowDetailAddBtn",onClick:function(){return n.setState({showSelectUserDialog:!0})}},e.createElement("i",{className:"Font28 icon-task-add-member-circle mRight10"}),_l("\u9009\u62E9\u6210\u5458\u6216\u5305\u542Bopenid\u7684\u6587\u672C\u5B57\u6BB5"),e.createElement(gn.Z,{appId:this.props.relationType===2?this.props.relationId:"",specialType:10000005,visible:d,companyId:this.props.companyId,processId:this.props.processId,nodeId:this.props.selectNodeId,onlyNodeRole:!0,unique:!1,accounts:o.accounts,updateSource:this.updateSource,onClose:function(){return n.setState({showSelectUserDialog:!1})}})))}},{key:"renderTemplate",value:function(){var n=this,l=this.state,o=l.data,d=l.cacheKey,u=l.detailType,p=o.appList.map(function(w){return{text:w.name,value:w.id,className:w.id===o.appId?"ThemeColor3":""}}),f=[{text:_l("H5\u94FE\u63A5"),value:0},{text:_l("\u5C0F\u7A0B\u5E8F\u8DEF\u5F84"),value:1}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u9009\u62E9\u6A21\u677F"),e.createElement("span",{className:"workflowDetailTipsWidth mLeft5 Gray_9e tip-bottom-right","data-tip":_l("\u8BF7\u4E25\u683C\u6309\u7167\u6A21\u677F\u6D88\u606F\u7684\u8FD0\u8425\u89C4\u8303\u914D\u7F6E\uFF0C\u9632\u6B62\u6A21\u677F\u6D88\u606F\u88AB\u5C01\u3002\u5982\u672A\u6DFB\u52A0\u6D88\u606F\u6A21\u677F\uFF0C\u8BF7\u5148\u53BB\u516C\u4F17\u53F7\u4E2D\u914D\u7F6E\u3002")},e.createElement("i",{className:"Font16 icon-info"}))),e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:p,value:o.appId||void 0,border:!0,openSearch:!0,noData:_l("\u516C\u4F17\u53F7\u672A\u6DFB\u52A0\u6D88\u606F\u6A21\u677F"),placeholder:_l("\u641C\u7D22\u6A21\u677F"),onChange:function(D){return n.getNodeDetail(n.props,D)}}),o.appId&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u5185\u5BB9\u8BBE\u7F6E")),e.createElement("div",{className:"mTop15 Font13 Gray_75"},_l("\u6807\u9898")),e.createElement("div",{className:"mTop8 actionControlBox actionDisabled pLeft10 pRight10"},(v().find(p,function(w){return w.value===o.appId})||{}).text),o.fields.map(function(w,D){var G=v().find(o.controls,function(H){return H.controlId===w.fieldId});return v().includes(["first","reason"],w.fieldId)&&!w.fieldValue?null:e.createElement("div",{key:D,className:"relative"},e.createElement("div",{className:"mTop15 ellipsis Font13"},G.controlName||(D===0?_l("\u9876\u90E8\u81EA\u5B9A\u4E49"):_l("\u5907\u6CE8"))),e.createElement(Gt.Z,{key:d+D,companyId:n.props.companyId,processId:n.props.processId,relationId:n.props.relationId,selectNodeId:n.props.selectNodeId,controls:o.controls,formulaMap:o.formulaMap,fields:o.fields,updateSource:n.updateSource,item:w,i:D}))}),e.createElement("div",{className:"mTop20 bold"},_l("\u8BE6\u60C5\u94FE\u63A5")),e.createElement("div",{className:"flexRow mTop10"},f.map(function(w,D){return e.createElement("div",{className:"flex",key:D},e.createElement(le.Z,{text:w.text,checked:w.value===u,onClick:function(){n.setState({detailType:w.value}),n.updateSource({templateNode:{url:"",appId:"",pagePath:""}})}}))})),u===0?e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop15"},_l("H5\u9875\u9762\u8DEF\u5F84")),e.createElement("div",{className:"mTop10"},e.createElement(ce.Z,{projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,type:2,height:0,content:o.templateNode.url,formulaMap:o.formulaMap,onChange:function(D,G,H){return n.updateSource({templateNode:C()({},o.templateNode,{url:G})})},updateSource:this.updateSource}))):e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop15 Gray_75"},_l("\u9009\u62E9\u5C0F\u7A0B\u5E8F\u94FE\u63A5\uFF0C\u5219\u5C0F\u7A0B\u5E8F\u9700\u5DF2\u5173\u8054\u8BE5\u516C\u4F17\u53F7")),e.createElement("div",{className:"mTop15"},_l("\u5C0F\u7A0B\u5E8FID\uFF08AppID\uFF09")),e.createElement("div",{className:"mTop10"},e.createElement(ce.Z,{projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,type:2,height:0,content:o.templateNode.appId,formulaMap:o.formulaMap,onChange:function(D,G,H){return n.updateSource({templateNode:C()({},o.templateNode,{appId:G})})},updateSource:this.updateSource})),e.createElement("div",{className:"mTop15"},_l("\u5C0F\u7A0B\u5E8F\u9875\u9762\u8DEF\u5F84")),e.createElement("div",{className:"mTop10"},e.createElement(ce.Z,{projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,type:2,height:0,content:o.templateNode.pagePath,formulaMap:o.formulaMap,onChange:function(D,G,H){return n.updateSource({templateNode:C()({},o.templateNode,{pagePath:G})})},updateSource:this.updateSource})))))}},{key:"render",value:function(){var n=this.state.data;return v().isEmpty(n)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},n),icon:"icon-wechat",bg:"BGBlue",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},this.renderDesc(),this.renderMembers(),this.renderTemplate()))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:n.accounts.length&&n.appId,onSave:this.onSave})))}}]),F}(e.Component);const ot=function(ne){var F=ne.companyId,B=ne.processId,n=ne.relationId,l=ne.selectNodeId,o=ne.data,d=ne.updateSource;return o.fields.map(function(u,p){var f=v().find(o.subProcessVariables,function(De){return De.controlId===u.fieldId})||{},w=f.controlName,D=f.sourceEntityName,G=f.alias,H=f.dataSource?v().find(o.fields,function(De){return De.fieldId===f.dataSource})||{}:{};return H.type===10000007||H.type===10000008&&(H.fieldValueId||!H.nodeId)?null:e.createElement("div",{key:u.fieldId,className:R()("relative",{mLeft24:f.dataSource})},e.createElement("div",{className:"mTop15 ellipsis Font13"},e.createElement("span",{className:"Gray_9e mRight5"},"[",a.Do[f.type],"]"),w,f.required&&e.createElement("span",{className:"mLeft5 red"},"*"),f.type===29&&e.createElement("span",{className:"Gray_9e"},"\uFF08"+_l("\u5DE5\u4F5C\u8868")+"\u201C"+D+"\u201D\uFF09"),G&&e.createElement("span",{className:"Gray_9e"},"\uFF08",G,"\uFF09")),e.createElement(Gt.Z,{companyId:F,processId:B,relationId:n,selectNodeId:l,sourceNodeId:f.dataSource?H.nodeId:o.selectNodeId,controls:v().cloneDeep(o.subProcessVariables).map(function(De){return De.type===10000008&&(De.flowNodeAppDtos=o.batchNodes.filter(function(je){return je.nodeId!==o.selectNodeId||u.nodeId===o.selectNodeId})),De}),formulaMap:o.formulaMap,fields:o.fields,updateSource:d,item:u,i:p}),f.desc&&e.createElement("div",{className:"mTop5 Gray_9e"},f.desc))})};var qe=t(2697),It=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},d=n.state.data;n.props.haveChange(!0),d.actionId===a.gp.PBC_OUT&&l.fields&&l.fields.filter(function(u){return u.type===10000008&&u.fieldValueId}).forEach(function(u){v().remove(l.fields,function(p){return p.dataSource===u.fieldId})}),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.appId,p=o.name,f=o.fields,w=o.executeType,D=o.number,G=o.selectNodeId,H=o.nextExecute,De=v().cloneDeep(o.subProcessVariables),je=o.actionId===a.gp.PBC_OUT,lt=0;if(!u&&!je){alert(_l("\u8BF7\u9009\u62E9\u4E1A\u52A1\u6D41\u7A0B"),2);return}if(je&&f.filter(function(Ft){return!Ft.fieldName}).length){alert(_l("\u53C2\u6570\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if(!je&&w!==0&&!D.fieldValue&&!D.fieldControlId&&!G){alert(_l("\u6267\u884C\u6B21\u6570\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if(De.forEach(function(Ft){Ft.type===10000008&&(f.find(function(un){return un.fieldId===Ft.controlId})||{}).nodeId&&v().remove(De,function(un){return un.dataSource===Ft.controlId})}),De.forEach(function(Ft){Ft.required&&f.forEach(function(un){Ft.controlId===un.fieldId&&!un.nodeId&&!un.fieldValue&&!un.fieldValueId&&lt++})}),lt>0){alert(_l("\u6709\u5FC5\u586B\u5B57\u6BB5\u672A\u586B\u5199"),2);return}d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,appId:u,name:p.trim(),fields:f,executeType:w,number:D,selectNodeId:G,nextExecute:H}).then(function(Ft){n.props.updateNodeData(Ft),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.renderList=function(l){var o=n.state.data;return l.map(function(d){var u=d.dataSource?v().find(o.fields,function(p){return p.fieldId===d.dataSource}):{};return u.type===10000007?null:e.createElement(e.Fragment,{key:d.fieldId},e.createElement("div",{className:R()("mTop8 flexRow relative alignItemsCenter",{pLeft20:d.dataSource})},e.createElement("input",{type:"text",className:"ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10 mTop8",style:{width:150},placeholder:_l("\u53C2\u6570\u540D\uFF08\u5FC5\u586B\uFF09"),value:d.fieldName,maxLength:64,onChange:function(f){return n.updateExportFields("fieldName",f.target.value,d)},onBlur:function(f){return n.updateExportFields("fieldName",f.target.value.trim(),d,!0)}}),e.createElement(Ie.Z,{className:"flowDropdown mLeft10 mTop8",style:{width:120},data:a.Jy.filter(function(p){return!v().includes([14,10000003],p.value)&&(!d.dataSource||d.dataSource&&p.value!==10000008)}),value:d.type,renderTitle:function(){return e.createElement("span",null,a.Jy.find(function(f){return f.value===d.type}).text)},border:!0,disabled:!(0,Yt.Z)(d.fieldId),onChange:function(f){n.updateExportFields("type",f,d)}}),e.createElement("div",{className:"flex mLeft10",style:{minWidth:0}},e.createElement(Gt.Z,{companyId:n.props.companyId,relationId:n.props.relationId,processId:n.props.processId,selectNodeId:n.props.selectNodeId,sourceNodeId:d.dataSource?u.nodeId:"",controls:o.fields.map(function(p){return p.type===10000008&&(p.controlId=p.fieldId,p.flowNodeAppDtos=o.batchNodes),p}),formulaMap:o.formulaMap,fields:o.fields,updateSource:n.updateSource,item:d,i:v().findIndex(o.fields,function(p){return p.fieldId===d.fieldId})})),e.createElement("i",{className:"icon-delete2 Font16 Gray_9e ThemeHoverColor3 mLeft10 pointer mTop8",onClick:function(){var f=[].concat(o.fields);v().remove(f,function(w){return w.fieldId===d.fieldId}),n.updateSource({fields:f})}}),e.createElement("i",{className:"icon-add Font16 pointer Gray_9e ThemeHoverColor3 mLeft10 pointer mTop8",style:{visibility:d.type===10000008&&d.fieldValueId?"hidden":"visible"},onClick:function(){return n.addParameters(d)}})),e.createElement("div",{className:R()("mTop10 flexRow alignItemsCenter",{pLeft20:d.dataSource})},e.createElement("input",{type:"text",className:"ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10",style:{width:150},placeholder:_l("\u522B\u540D"),value:d.alias,onChange:function(f){return n.updateExportFields("alias",f.target.value.replace(/[^a-z\d-_]/gi,""),d)},onBlur:function(f){var w=f.target.value.trim();w&&!/^[a-zA-Z]{1}/.test(w)&&(w="pbp"+w),n.updateExportFields("alias",w,d,!0)}}),e.createElement("input",{type:"text",className:"ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10 flex mLeft10",placeholder:_l("\u8BF4\u660E"),value:d.desc,onChange:function(f){return n.updateExportFields("desc",f.target.value,d)},onBlur:function(f){return n.updateExportFields("desc",f.target.value.trim(),d)}})),n.renderList(o.fields.filter(function(p){return p.dataSource===d.fieldId})))})},n.getDefaultParameters=function(){return{fieldName:"",desc:"",type:2,fieldId:(0,Vt.Z)(),alias:""}},n.updateExportFields=function(l,o,d,u){var p=d.fieldId,f=d.type,w=d.dataSource,D=n.state.data,G=v().cloneDeep(D.fields);G.forEach(function(H){H.fieldId===p&&(H[l]=u&&v().includes(["fieldName","alias"],l)&&G.filter(function(De){return De.dataSource===w}).find(function(De){return o&&De[l]===o&&De.fieldId!==p})?o+Math.floor(Math.random()*1e4).toString().padStart(4,"0"):o)}),l==="type"&&v().includes([10000007,10000008],f)&&v().remove(G,function(H){return H.dataSource===p}),l==="type"&&o===10000007&&G.push(C()({},n.getDefaultParameters(),{fieldName:"string",dataSource:p})),n.updateSource({fields:G})},n.addParameters=function(l){var o=l.type,d=l.dataSource,u=l.fieldId,p=n.state.data,f=v().cloneDeep(p.fields),w=0;f.forEach(function(D,G){D.fieldId===u&&(w=G)}),u||(w=f.length-1),o===10000008||d?f.splice(w+1,0,C()({},n.getDefaultParameters(),{dataSource:d||u})):f.splice(w+1,0,n.getDefaultParameters()),n.updateSource({fields:f})},n.state={data:{},saveRequest:!1,execCountType:1,showOtherPBC:!1},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n){var l=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=o.appId,u=n.processId,p=n.selectNodeId,f=n.selectNodeType,w=n.instanceId,D=this.state.data;z.Z.getNodeDetail({processId:u,nodeId:p,flowNodeType:f,appId:d,instanceId:w}).then(function(G){G.actionId===a.gp.PBC_OUT&&!G.fields.length&&(G.fields=[{fieldName:"",desc:"",type:2,fieldId:(0,Vt.Z)()}]),d&&G.name===_l("\u8C03\u7528\u5C01\u88C5\u4E1A\u52A1\u6D41\u7A0B")?G.name=G.appList.find(function(H){return H.id===d}).name:d&&(G.name=D.name),G.subProcessVariables.length&&G.subProcessVariables.filter(function(H){return H.dataSource}).forEach(function(H){var De=v().find(G.subProcessVariables,function(je){return je.controlId===H.dataSource});De&&v().includes([10000007,10000008],De.type)&&G.fields.forEach(function(je){je.fieldId===H.controlId&&(je.dataSource=De.controlId)})}),l.setState({data:G,execCountType:G.selectNodeId?2:1})})}},{key:"renderExportContent",value:function(){var n=this.state.data;return e.createElement(e.Fragment,null,e.createElement("div",{className:"bold"},_l("\u8F93\u51FA\u53C2\u6570")),this.renderList(n.fields.filter(function(l){return!l.dataSource})),e.createElement("div",{className:"addActionBtn mTop25"},e.createElement("span",{className:"ThemeBorderColor3",onClick:this.addParameters},e.createElement("i",{className:"icon-add Font16"}),_l("\u6DFB\u52A0\u53C2\u6570"))))}},{key:"renderContent",value:function(){var n=this,l=this.state.data,o=[{text:_l("\u6267\u884C\u5355\u6B21"),value:0},{text:_l("\u6267\u884C\u591A\u6B21"),value:1}],d=[{text:_l("\u5E76\u884C"),value:1,desc:_l("\u540C\u65F6\u6267\u884C\u591A\u6761\u4E1A\u52A1\u6D41\u7A0B\uFF0C\u5373\u4FBF\u67D0\u6761\u4E1A\u52A1\u6D41\u7A0B\u8FD0\u884C\u4E2D\u6B62\uFF0C\u4E5F\u4E0D\u5F71\u54CD\u5176\u4ED6\u4E1A\u52A1\u6D41\u7A0B\u7684\u6267\u884C\u3002")},{text:_l("\u9010\u6761\u6267\u884C"),value:2,desc:_l("\u4F9D\u6B21\u6267\u884C\u591A\u6761\u4E1A\u52A1\u6D41\u7A0B\uFF0C\u6BCF\u6761\u4E1A\u52A1\u6D41\u7A0B\u9700\u8981\u7B49\u524D\u4E00\u6761\u4E1A\u52A1\u6D41\u7A0B\u901A\u8FC7\u540E\u518D\u5F00\u59CB\u89E6\u53D1\uFF1B\u5982\u679C\u67D0\u6761\u4E1A\u52A1\u6D41\u7A0B\u8FD0\u884C\u4E2D\u6B62\uFF0C\u5219\u540E\u7EED\u7684\u4E1A\u52A1\u6D41\u7A0B\u90FD\u4E0D\u518D\u89E6\u53D1\u3002")}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"bold"},_l("\u9009\u62E9\u4E1A\u52A1\u6D41\u7A0B")),this.renderSelectPBC(),l.appId&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u6267\u884C\u65B9\u5F0F")),o.map(function(u,p){return e.createElement("div",{key:p,className:"mTop10"},e.createElement(le.Z,{text:u.text,checked:u.value===l.executeType||u.value===1&&l.executeType===2,onClick:function(){return n.updateSource({executeType:u.value})}}))}),l.executeType!==0&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u6267\u884C\u6B21\u6570")),this.renderExecCount(),e.createElement("div",{className:"mTop20 bold"},_l("\u591A\u6761\u4E1A\u52A1\u6D41\u7A0B\u7684\u6267\u884C\u65B9\u5F0F")),d.map(function(u,p){return e.createElement("div",{className:"mTop15",key:p},e.createElement(le.Z,{text:u.text,checked:l.executeType===u.value,onClick:function(){return n.updateSource({executeType:u.value})}}),e.createElement("div",{className:"mTop10 mLeft30 Gray_9e"},u.desc))})),e.createElement("div",{className:"mTop20"},e.createElement(b.Z,{className:"bold",text:_l("\u4E1A\u52A1\u6D41\u7A0B\u6267\u884C\u5B8C\u6BD5\u540E\uFF0C\u518D\u5F00\u59CB\u4E0B\u4E00\u4E2A\u8282\u70B9"),checked:l.nextExecute,onClick:function(p){return n.updateSource({nextExecute:!p})}})),e.createElement("div",{className:"mLeft25 mTop5 Gray_9e"},_l("\u52FE\u9009\u540E\uFF0C\u5F53\u6267\u884C\u6B21\u6570\u4E3A\u5355\u6B21\u65F6\uFF0C\u4E4B\u540E\u8282\u70B9\u53EF\u4F7F\u7528\u4E1A\u52A1\u6D41\u7A0B\u7684\u8F93\u51FA\u53C2\u6570")),e.createElement("div",{className:"mTop20 bold"},_l("\u4F20\u9012\u53C2\u6570")),e.createElement("div",{className:"mTop5 Gray_9e"},_l("\u5411\u4E1A\u52A1\u6D41\u7A0B\u7684\u8F93\u5165\u53C2\u6570\u4F20\u9012\u521D\u59CB\u503C\uFF0C\u4F9B\u5176\u6267\u884C\u65F6\u4F7F\u7528")),e.createElement(ot,(0,h.default)({},this.props,{data:l,updateSource:this.updateSource}))))}},{key:"renderSelectPBC",value:function(){var n=this,l=this.state.data,o=l.appList.find(function(p){var f=p.id;return f===l.appId}),d=l.appList.filter(function(p){return!p.otherApkId}).map(function(p){return{text:p.name,value:p.id,className:p.id===l.appId?"ThemeColor3":""}}),u=[{text:_l("\u5176\u5B83\u5E94\u7528\u4E0B\u7684\u5C01\u88C5\u4E1A\u52A1\u6D41\u7A0B"),value:"other",className:"Gray_75"}];return e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:[d,u],value:l.appId,renderTitle:l.appId?l.appId&&!o?function(){return e.createElement("span",{className:"errorColor"},_l("\u4E1A\u52A1\u6D41\u7A0B\u65E0\u6548\u6216\u5DF2\u5220\u9664"))}:function(){return e.createElement(e.Fragment,null,e.createElement("span",null,o.name),o.otherApkName&&e.createElement("span",{className:"Gray_9e"},"\uFF08",o.otherApkName,"\uFF09"))}:function(){return e.createElement("span",{className:"Gray_9e"},_l("\u8BF7\u9009\u62E9"))},border:!0,openSearch:!0,noData:_l("\u6682\u65E0\u4E1A\u52A1\u6D41\u7A0B\uFF0C\u8BF7\u5148\u5728\u5E94\u7528\u91CC\u521B\u5EFA"),onChange:function(f){f==="other"?n.setState({showOtherPBC:!0}):n.getNodeDetail(n.props,{appId:f})}})}},{key:"renderExecCount",value:function(){var n=this,l=this.state,o=l.data,d=l.execCountType,u=[{text:_l("\u4F9D\u636E\u5B57\u6BB5\u503C"),value:1},{text:_l("\u4F9D\u636E\u591A\u6761\u6570\u636E\u5BF9\u8C61\u7684\u6570\u636E\u91CF"),value:2}];return e.createElement(e.Fragment,null,e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:u,value:d,border:!0,onChange:function(f){n.updateSource({selectNodeId:""}),n.setState({execCountType:f})}}),d===1?e.createElement("div",{className:"mTop10"},e.createElement(Mt.Z,{projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,updateSource:function(f){return n.updateSource({number:f})},type:"number",allowedEmpty:!0,min:1,data:o.number})):e.createElement(fe.Z,{smallBorder:!0,appList:o.flowNodeList,selectNodeId:o.selectNodeId,selectNodeObj:o.selectNodeObj,onChange:function(f){var w=v().find(o.flowNodeList,function(D){return D.nodeId===f});n.updateSource({selectNodeId:f,selectNodeObj:w})}}))}},{key:"render",value:function(){var n=this,l=this.state,o=l.data,d=l.showOtherPBC,u=o.actionId===a.gp.PBC_OUT;return v().isEmpty(o)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},o),icon:"icon-pbc",bg:"BGBlueAsh",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},u?this.renderExportContent():this.renderContent()))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:!!o.appId||u,onSave:this.onSave})),d&&e.createElement(qe.Z,{appId:this.props.relationId,companyId:this.props.companyId,onOk:function(f){var w=f.selectPBCId;return n.getNodeDetail(n.props,{appId:w})},onCancel:function(){return n.setState({showOtherPBC:!1})}}))}}]),F}(e.Component),ft=t(39832),st=t.n(ft);const Zt=function(ne){var F=ne.list,B=ne.isIntegration,n=B===void 0?!1:B,l=ne.json,o=function u(p){return p.map(function(f,w){return f.dataSource&&v().find(F,function(D){return D.controlId===f.dataSource}).type===10000007?null:e.createElement(e.Fragment,null,e.createElement("li",{className:"flexRow",key:w},e.createElement("div",{className:R()("w180 ellipsis",{pLeft20:f.dataSource})},f.controlName||""),n&&e.createElement("div",{className:"w120 ellipsis"},a.Do[f.type]),e.createElement("div",{className:R()("mLeft15 flex",{ellipsis:!n}),style:{minWidth:0}},n?f.desc:d(f))),u(F.filter(function(D){return D.dataSource===f.controlId})))})},d=function(p){var f=p.type,w=p.controlId,D=p.dataSource,G=p.jsonPath;if(!G)return"";if(D){var H=F.find(function(je){return je.controlId===D});H.type===10000008&&(G=G.replace(/^@/,H.jsonPath+"[0]"))}try{var De=st().query(JSON.parse(l),G.replace(/\.(\d[^\.]*)/g,"['$1']"));return f===2&&v().isArray(De)&&(De.length?De.length===1?De=v().isString(De[0])?De[0]:ke()(De[0]):De=De.map(function(je){return je}):De=""),f===6&&(De.length===1&&(v().isNumber(De[0])||v().isBoolean(De[0]))?De=v().isBoolean(De[0])?De[0]?1:0:De[0]:De=""),f===16&&(De.length===1&&typeof De[0]=="string"&&new Date(De[0].replace(/-/g,"/")).toString()!=="Invalid Date"?De=De[0]:De=""),v().includes([26,27],f)&&(De.length===1&&/^\w{8}-\w{4}-\w{4}-\w{4}-\w{12}$/.test(De[0])?De=De[0]:De=""),f===10000007&&(De.length?v().isObject(De[0])&&(D?De=De[0]:De.length===1&&v().isArray(De[0])&&De[0].length>1?De=De[0].map(function(je){return v().isObject(je)?ke()(je):je}):De=De.length===1?v().isArray(De[0])?De[0]:"":De.map(function(je){return v().isObject(je)?ke()(je):je})):De=""),f===10000008&&(De.length&&v().isArray(De[0])?De=De[0]:De=""),f===10000008&&F.find(function(je){return je.dataSource===w})?De&&v().isArray(De)?e.createElement("span",{className:"Gray_9e"},_l("\u5171 %0 \u7EC4\u6570\u636E\uFF0C\u4EE5\u4E0B\u4EC5\u663E\u793A\u7B2C 1 \u7EC4\u53C2\u8003\u503C",De.length)):"":v().isObject(De)?ke()(De):De}catch(je){return e.createElement("span",{className:"Gray_9e"},_l("\u6682\u65E0\u7ED3\u679C"))}};return e.createElement("ul",{className:"webhookList"},o(F.filter(function(u){return!u.dataSource})))};var On=a.Jy.concat([{text:_l("\u5BF9\u8C61"),value:10000006,en:"object"}]),Fn=P.ZP.div(function(ne){var F=ne.isHeader;return`
  border-bottom: 1px solid #e7e7e7;
  height: 36px;
  align-items: center;
  `+(F?"font-weight: bold;":`
        &:hover {
          background: #f5f5f5;
          .hideOperation {
            visibility: visible;
          }
        }
      `)+`
  &.active {
    background: #f5f5f5;
    .hideOperation {
      visibility: visible;
    }
  }
  .width24 {
    width: 24px;
  }
  .width100 {
    width: 100px;
  }
  .width150 {
    width: 150px;
  }
  .width190 {
    width: 190px;
  }
  .width250 {
    width: 250px;
  }
  .pLeft48 {
    padding-left: 48px !important;
  }
  .pLeft72 {
    padding-left: 72px !important;
  }
  .hideOperation {
    visibility: hidden;
  }
  .jsonMenu {
    left: inherit !important;
    right: 0 !important;
    width: 450px !important;
    .Item-content {
      &:hover {
        .Gray_9e {
          color: #fff !important;
        }
      }
    }
  }
`}),Ca=P.ZP.div(function(ne){var F=ne.isHeader;return`
  height: 36px;
  display: flex;
  align-items: center;
  `+(F?"color: #757575;":"margin-bottom: 10px;")+`
  .width150 {
    width: 150px;
  }
  .width120 {
    width: 120px;
  }
  .width100 {
    width: 100px;
  }
  .width50 {
    width: 50px;
  }
  input {
    width: 100%;
    height: 36px;
    line-height: 36px;
    border-width: 1px;
    border-style: solid;
    border-radius: 4px;
    border-color: #ddd;
    padding: 0 10px;
    &:focus {
      border-color: #2196f3;
    }
  }
`}),Jn=function(){return{controlId:(0,Vt.Z)(),type:2,controlName:"",dataSource:"",value:""}},aa=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.name,p=o.selectNodeId,f=o.outputs,w=o.conditions,D=o.errorMessage,G=o.executeType,H=!1;if(!p){alert(_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A JSON \u5BF9\u8C61"),2);return}if(f.forEach(function(De){(!De.controlName||!De.jsonPath)&&(H=!0)}),(0,N.lX)(w)){alert(_l("\u7B5B\u9009\u6761\u4EF6\u7684\u5224\u65AD\u503C\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if(w.length&&!D){alert(_l("\u6307\u5B9A\u7684\u9519\u8BEF\u6D88\u606F\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if(H){alert(_l("\u8F93\u51FA\u53C2\u6570\u914D\u7F6E\u6709\u8BEF"),2);return}d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,name:u.trim(),selectNodeId:p,outputs:f,conditions:w,errorMessage:D,executeType:G},{isIntegration:n.props.isIntegration}).then(function(De){n.props.updateNodeData(De),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.state={data:{},saveRequest:!1,showDialog:!1,foldIds:[],selectFiledId:""},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n,l){var o=this,d=n.processId,u=n.selectNodeId,p=n.selectNodeType,f=n.isIntegration,w=n.instanceId,D=this.state.data;z.Z.getNodeDetail({processId:d,nodeId:u,flowNodeType:p,selectNodeId:l,instanceId:w},{isIntegration:f}).then(function(G){G.selectNodeId&&!G.outputs.length&&(!G.appId||l)&&(G.outputs=[Jn()]),o.setState({data:l?(0,h.default)({},G,{name:D.name}):G,foldIds:[],selectFiledId:""})})}},{key:"renderContent",value:function(){var n=this,l=this.props,o=l.isIntegration,d=l.selectNodeType,u=this.state.data,p=[{text:_l("\u4E0D\u5B9A\u4E49\u9519\u8BEF\u6D88\u606F"),value:0},{text:_l("\u4ECE\u8F93\u51FA\u53C2\u6570\u4E2D\u83B7\u53D6\u8FD4\u56DE\u503C\u4F5C\u4E3A\u9519\u8BEF\u6D88\u606F"),value:1}];return e.createElement(e.Fragment,null,o?e.createElement("div",{className:"bold"},_l("\u9009\u62E9 JSON \u6765\u6E90")):e.createElement(e.Fragment,null,e.createElement("div",{className:"Font14 Gray_75 workflowDetailDesc"},_l("JSON \u89E3\u6790\u5668\u53EF\u4EE5\u628A \u53D1\u9001 API \u8BF7\u6C42 \u8282\u70B9\u6216\u8005 \u4EE3\u7801\u5757 \u8282\u70B9\u4E2D\u8F93\u51FA\u7684 JSON \u5BF9\u8C61\u89E3\u6790\u4E3A\u540E\u7EED\u8282\u70B9\u53EF\u76F4\u63A5\u4F7F\u7528\u7684\u53D8\u91CF\u548C\u6570\u7EC4\u53C2\u6570\u3002")),e.createElement("div",{className:"mTop20 bold"},_l("\u83B7\u53D6 JSON \u5BF9\u8C61")),e.createElement("div",{className:"Gray_75 mTop10"},_l("\u5F53\u524D\u6D41\u7A0B\u4E2D\u7684\u8282\u70B9\u5BF9\u8C61"))),e.createElement(fe.Z,{isIntegration:o,appList:u.flowNodeList,selectNodeId:u.selectNodeId,selectNodeObj:u.selectNodeObj,onChange:function(w){return n.getNodeDetail(n.props,w)}}),u.selectNodeId&&e.createElement(e.Fragment,null,this.renderJSONResult(),e.createElement("div",{className:"mTop20 bold"},_l("\u5B9A\u4E49\u8F93\u51FA\u53C2\u6570")),e.createElement("div",{className:"mTop10"},this.renderOutputDesc()),!!u.outputs.length&&this.renderOutputList(),e.createElement("div",{className:"mTop15 InlineBlock pointer ThemeColor3 ThemeHoverColor2",onClick:function(){return n.updateSource({outputs:u.outputs.concat([Jn()])})}},_l("+ \u8F93\u51FA\u53C2\u6570")),e.createElement("div",{className:"mTop20 bold"},_l("\u5B9A\u4E49\u9519\u8BEF\u6D88\u606F")),e.createElement("div",{className:"Gray_75 mTop10"},_l("\u5F53\u8FD4\u56DE\u5339\u914D\u9519\u8BEF\u7ED3\u679C\u7684 JSON \u65F6\uFF0C\u53EF\u4EE5\u81EA\u5B9A\u4E49\u4E2D\u6B62\u8F93\u51FA\u53C2\u6570\u65F6\u7684\u9519\u8BEF\u6D88\u606F")),p.map(function(f){return e.createElement("div",{className:"mTop15",key:f.value},e.createElement(le.Z,{text:f.text,checked:f.value===0&&!u.conditions.length||f.value===1&&u.conditions.length,onClick:function(){return n.updateSource({conditions:f.value===0?[]:[[{}]],executeType:0,errorMessage:""})}}))}),!!u.conditions.length&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop10 mLeft30 Gray_9e"},_l("\u5F53\u53C2\u6570\u8FD4\u56DE\u503C\u6EE1\u8DB3\u4EE5\u4E0B\u6761\u4EF6\u65F6\u89E6\u53D1\u9519\u8BEF")),e.createElement("div",{className:"mLeft30"},e.createElement(cn.Z,{processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,isIntegration:o,controls:u.outputs.filter(function(f){return!f.dataSource}),data:u.conditions,updateSource:function(w){return n.updateSource({conditions:w})},projectId:this.props.companyId})),e.createElement("div",{className:"mTop20 bold"},_l("\u6307\u5B9A\u89E6\u53D1\u9519\u8BEF\u65F6\u8FD4\u56DE\u7684\u9519\u8BEF\u6D88\u606F")),e.createElement(ce.Z,{projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,isIntegration:o,type:2,height:0,content:u.errorMessage,formulaMap:u.formulaMap,onChange:function(w,D,G){return n.updateSource({errorMessage:D})},updateSource:this.updateSource}),!o&&e.createElement(Zr,{nodeType:d,executeType:u.executeType,switchExecuteType:function(w){return n.updateSource({executeType:w})}})),!!u.outputs.length&&e.createElement("div",{className:"mTop25 webhookBox"},e.createElement("div",{className:"webhookHeader flexRow"},e.createElement("div",{className:"bold w180 ellipsis"},_l("\u53C2\u6570\u540D")),e.createElement("div",{className:"bold mLeft15 flex ellipsis"},_l("\u53C2\u8003\u503C"))),e.createElement(Zt,{list:u.outputs,json:u.json}))))}},{key:"renderJSONResult",value:function(){var n=this,l=this.state,o=l.data,d=l.showDialog;return o.selectNodeId?e.createElement(e.Fragment,null,e.createElement("div",{className:"webhookBtn InlineBlock mTop25",onClick:function(){if(!o.controls.length){alert(_l("\u6CA1\u6709\u53EF\u4EE5\u7528\u6765\u89E3\u6790\u7684\u6D41\u7A0B\u53C2\u6570"),2);return}n.setState({showDialog:!0})}},_l("\u67E5\u770B JSON \u89E3\u6790\u7ED3\u679C")),d&&e.createElement(te.Z,{width:1100,visible:!0,type:"scroll",title:_l("\u67E5\u770B JSON \u89E3\u6790\u7ED3\u679C"),description:this.renderOutputDesc(),showFooter:!1,onCancel:function(){return n.setState({showDialog:!1})}},e.createElement("div",{style:{minHeight:400}},e.createElement(Fn,{className:"flexRow",isHeader:!0},e.createElement("div",{className:"width250 pLeft24 mRight10"},_l("\u540D\u79F0")),e.createElement("div",{className:"width100 mRight10"},_l("\u7C7B\u578B")),e.createElement("div",{className:"flex mRight10"},_l("\u53C2\u8003\u503C")),e.createElement("div",{className:"width190 mRight10"},"JSON Path"),e.createElement("div",{className:"width150"})),o.controls.filter(function(u){return!u.dataSource}).map(function(u){return n.renderDialogJSONList(u)})))):null}},{key:"renderDialogJSONList",value:function(n){var l=this,o=this.state,d=o.data,u=o.foldIds,p=o.selectFiledId,f=v().includes([10000006,10000008],n.type),w=n.dataSource?v().find(d.controls,function(H){return H.jsonPath===n.dataSource}):{},D=w.type===10000008,G=[];return D&&(G=[{text:n.jsonPath,desc:_l("\u590D\u5236\u8282\u70B9 Path")},{text:n.dataSource+"[*]."+n.controlName,desc:_l("\u590D\u5236\u6570\u7EC4 Path")},{text:"@."+n.controlName,desc:_l("\u590D\u5236\u5BF9\u8C61\u6570\u7EC4\u5B50\u8282\u70B9 Path")}]),e.createElement(e.Fragment,null,e.createElement(Fn,{key:n.jsonPath,className:R()("flexRow Font12",{active:p===n.jsonPath})},e.createElement("div",{className:R()("width250 mRight10 flexRow",f?"pointer":"pLeft24",{pLeft24:n.dataSource&&f,pLeft48:n.dataSource&&!f,pLeft72:w.dataSource}),onClick:function(){f&&(v().includes(u,n.jsonPath)?v().remove(u,function(De){return De===n.jsonPath}):u.push(n.jsonPath),l.setState({foldIds:u}))}},f&&!w.dataSource&&e.createElement("div",{className:"width24"},e.createElement(Q.Z,{type:v().includes(u,n.jsonPath)?"arrow-right-tip":"arrow-down",className:"Gray_9e Font14"})),n.controlName),e.createElement("div",{className:"width100 mRight10"},On.find(function(H){return H.value===n.type}).en),e.createElement("div",{className:R()("flex mRight10 ellipsis",{"pointer ThemeHoverColor3":f}),onClick:function(){return f&&l.previewJSON(JSON.parse(n.value))}},n.value),e.createElement("div",{className:"width190 mRight10 ellipsis"},n.jsonPath),e.createElement("div",{className:"width150 relative hideOperation"},e.createElement(Q.Z,{type:"output",className:"Gray_9e"}),e.createElement("span",{className:"mLeft5 ThemeHoverColor3 pointer",onClick:function(){return l.onGenerationParameters(n)}},_l("\u751F\u6210\u53C2\u6570")),e.createElement(Q.Z,{type:"copy",className:"Gray_9e mLeft15"}),e.createElement("span",{className:"mLeft5 ThemeHoverColor3 pointer",onClick:function(){D?l.setState({selectFiledId:n.jsonPath}):(tn()(n.jsonPath),alert(_l("\u590D\u5236\u6210\u529F")))}},_l("\u590D\u5236")),D&&p===n.jsonPath&&e.createElement(ae.Z,{className:"jsonMenu",onClickAway:function(){return l.setState({selectFiledId:""})}},G.map(function(H,De){return e.createElement(ve.Z,{key:De,onMouseDown:function(){tn()(H.text),alert(_l("\u590D\u5236\u6210\u529F")),l.setState({selectFiledId:""})}},e.createElement("div",{className:"flexRow"},e.createElement("div",{className:"flex ellipsis mRight15"}," ",H.text," "),e.createElement("div",{className:"Gray_9e"}," ",H.desc," ")))})))),!v().includes(u,n.jsonPath)&&d.controls.filter(function(H){return H.dataSource===n.jsonPath}).map(function(H){return l.renderDialogJSONList(H)}))}},{key:"renderOutputDesc",value:function(){var n=this.state.showDialog;return e.createElement(e.Fragment,null,e.createElement("span",{className:"Gray_75"},n?_l("\u6211\u4EEC\u6839\u636E\u83B7\u53D6\u7684 JSON \u4E3A\u60A8\u89E3\u6790\u4E86\u5BF9\u5E94\u7684 JSON Path\uFF0C\u60A8\u4E5F\u53EF\u4EE5\u5B66\u4E60 JSON Path \u7684\u89C4\u5219\u6765\u66F4\u7075\u6D3B\u7684\u83B7\u53D6\u9700\u8981\u7684\u6570\u636E"):_l("\u4ECE JSON \u89E3\u6790\u7ED3\u679C\u4E2D\u590D\u5236\u89E3\u6790\u540E\u7684 JSON Path\uFF0C\u586B\u5199\u5230\u8F93\u51FA\u53C2\u6570\u503C\u4E2D")),e.createElement("span",{className:"mLeft10"},e.createElement(q.Z,{type:3,className:"workflowDialogSupport",href:"https://help.mingdao.com/workflow/node-json-parsing",text:_l("\u4E86\u89E3 JSON Path")})))}},{key:"previewJSON",value:function(n){te.Z.confirm({width:720,title:_l("\u67E5\u770B"),description:e.createElement(Y(),{src:n,theme:"brewer",displayDataTypes:!1,displayObjectSize:!1,name:null}),noFooter:!0})}},{key:"onGenerationParameters",value:function(n){var l=this,o=this.state.data,d=[];d.push({controlId:(0,Vt.Z)(),type:n.type===10000006?2:n.type,controlName:v().find(o.outputs,function(u){return u.controlName===n.controlName})?n.controlName+Math.floor(Math.random()*1e4).toString().padStart(4,"0"):n.controlName,dataSource:"",jsonPath:n.jsonPath}),n.type===10000007&&d.push(this.generationOrdinaryArrayObject(d[0].controlId)),n.type===10000008&&o.controls.filter(function(u){return u.dataSource===n.jsonPath}).forEach(function(u){var p=(0,Vt.Z)();d.push({controlId:p,type:v().includes([10000006,10000008],u.type)?2:u.type,controlName:u.controlName,dataSource:d[0].controlId,jsonPath:"@."+u.controlName}),u.type===10000007&&d.push(l.generationOrdinaryArrayObject(p))}),this.updateSource({outputs:o.outputs.length===1&&!o.outputs[0].controlName&&!o.outputs[0].jsonPath?d:o.outputs.concat(d)})}},{key:"renderOutputList",value:function(){var n=this.state.data;return e.createElement(e.Fragment,null,e.createElement(Ca,{isHeader:!0,className:"mTop5"},e.createElement("div",{className:"width150 mRight10"},_l("\u53C2\u6570\u540D")),e.createElement("div",{className:"width120 mRight10"},_l("\u7C7B\u578B")),e.createElement("div",{className:"flex mRight10"},"JSON Path"),e.createElement("div",{className:"width50"})),this.renderJSONList(n.outputs.filter(function(l){return!l.dataSource})))}},{key:"renderJSONList",value:function(n){var l=this,o=this.props.isIntegration,d=this.state.data;return n.map(function(u){var p=void 0;return u.dataSource&&v().find(d.outputs,function(f){return f.controlId===u.dataSource}).type===10000007?null:(u.type===10000007&&(p=v().find(d.outputs,function(f){return f.dataSource===u.controlId})||{}),e.createElement(e.Fragment,null,e.createElement(Ca,{key:u.controlId},e.createElement("div",{className:R()("width150 mRight10",{pLeft20:u.dataSource})},e.createElement("input",{type:"text",value:u.controlName,placeholder:_l("\u8BF7\u586B\u5199\u53C2\u6570\u540D\u79F0"),onChange:function(w){return l.updateOutputParameters("controlName",w.target.value,u)},onBlur:function(w){return l.updateOutputParameters("controlName",w.target.value.replace(/[^\u4e00-\u9fa5a-zA-Z\d_]/g,""),u,!0)}})),e.createElement("div",{className:"width120 mRight10"},e.createElement(Ie.Z,{className:"flowDropdown",style:{width:120},data:a.Jy.filter(function(f){return!v().includes([14,10000003],f.value)&&(!u.dataSource||u.dataSource&&f.value!==10000008)}),value:u.type,border:!0,disabled:!(0,Yt.Z)(u.controlId),onChange:function(w){l.updateOutputParameters("type",w,u)}})),u.type===10000007&&e.createElement("div",{className:"width100 mRight10"},e.createElement(Ie.Z,{className:"flowDropdown",style:{width:100},data:a.Jy.filter(function(f){return v().includes([2,6,16,26,27],f.value)}),value:p.type,border:!0,disabled:!(0,Yt.Z)(p.controlId),onChange:function(w){l.updateOutputParameters("type",w,p),l.updateOutputParameters("controlName",v().find(a.Jy,function(D){return D.value===w}).en,p)}})),e.createElement("div",{className:"flex mRight10"},e.createElement("input",{type:"text",value:u.jsonPath,placeholder:_l("\u8BF7\u586B\u5199 JSON Path \u503C"),onChange:function(w){return l.updateOutputParameters("jsonPath",w.target.value,u)},onBlur:function(w){return l.updateOutputParameters("jsonPath",w.target.value.trim(),u)}})),e.createElement("div",{className:"width50"},e.createElement(Q.Z,{type:"delete1",className:"Font16 mRight10 pointer Gray_9e ThemeHoverColor3",onClick:function(){return l.removeParameters(u.controlId)}}),e.createElement(Q.Z,{type:"add",className:"Font16 pointer Gray_9e ThemeHoverColor3",onClick:function(){return l.addParameters(u)}}))),o&&e.createElement("div",{className:R()("mBottom10 flexRow alignItemsCenter",{pLeft20:u.dataSource})},e.createElement("input",{type:"text",className:"ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10 flex",placeholder:_l("\u8BF4\u660E"),value:u.desc,onChange:function(w){return l.updateOutputParameters("desc",w.target.value,u)},onBlur:function(w){return l.updateOutputParameters("desc",w.target.value.trim(),u)}})),l.renderJSONList(d.outputs.filter(function(f){return f.dataSource===u.controlId}))))})}},{key:"updateOutputParameters",value:function(n,l,o,d){var u=o.controlId,p=o.type,f=o.dataSource,w=this.state.data,D=w.outputs;D.forEach(function(G){G.controlId===u&&(G[n]=d&&n==="controlName"&&D.filter(function(H){return H.dataSource===f}).find(function(H){return H.controlName===l&&H.controlId!==u})?l+Math.floor(Math.random()*1e4).toString().padStart(4,"0"):l)}),n==="type"&&v().includes([10000007,10000008],p)&&v().remove(D,function(G){return G.dataSource===u}),n==="type"&&l===10000007&&D.push(this.generationOrdinaryArrayObject(u)),this.updateSource({outputs:D})}},{key:"removeParameters",value:function(n){var l=this.state.data,o=l.outputs,d=l.conditions;v().remove(o,function(u){return u.controlId===n||u.dataSource===n}),d.forEach(function(u){v().remove(u,function(p){return p.filedId===n})}),this.updateSource({outputs:o,conditions:d.filter(function(u){return u.length})})}},{key:"addParameters",value:function(n){var l=n.type,o=n.dataSource,d=n.controlId,u=this.state.data,p=u.outputs,f=0;p.forEach(function(w,D){w.controlId===d&&(f=D)}),l===10000008||o?p.splice(f+1,0,C()({},Jn(),{dataSource:o||d})):p.splice(f+1,0,Jn()),this.updateSource({outputs:p})}},{key:"generationOrdinaryArrayObject",value:function(n){return{controlId:(0,Vt.Z)(),type:2,controlName:"string",dataSource:n,jsonPath:"@"}}},{key:"render",value:function(){var n=this.state.data;return v().isEmpty(n)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},n),icon:"icon-task_custom_polymer",bg:"BGBlueAsh",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},this.renderContent()))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:n.selectNodeId,onSave:this.onSave})))}}]),F}(e.Component),xa=(0,W.Z)([`
  border-bottom: 3px solid #f5f5f5;
  height: 36px;
  margin-top: 10px;
  li {
    border-bottom: 3px solid transparent;
    box-sizing: initial;
    cursor: pointer;
    height: 33px;
    line-height: 33px;
    padding: 0 25px;
    font-weight: bold;
    &:not(.active) {
      border-color: transparent !important;
      color: #333 !important;
    }
  }
`],[`
  border-bottom: 3px solid #f5f5f5;
  height: 36px;
  margin-top: 10px;
  li {
    border-bottom: 3px solid transparent;
    box-sizing: initial;
    cursor: pointer;
    height: 33px;
    line-height: 33px;
    padding: 0 25px;
    font-weight: bold;
    &:not(.active) {
      border-color: transparent !important;
      color: #333 !important;
    }
  }
`]),va=P.ZP.ul(xa),Pa=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.testIndex=0,n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.name,p=o.fields,f=o.expireAfterSeconds,w=o.webHookNodes,D=!1;if(o.appType===a.IF.BASIC_AUTH&&(p.forEach(function(De){!De.fieldValue&&!De.fieldValueId&&(D=!0)}),D)){alert(_l("\u7528\u6237\u540D\u3001\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if(o.appType===a.IF.OAUTH2){var G=!1,H=!1;if(w.forEach(function(De){De.params=De.params.filter(function(je){return je.name||je.value}),De.headers=De.headers.filter(function(je){return je.name||je.value}),De.formControls=De.formControls.filter(function(je){return je.name||je.value}),De.url||(G=!0),(De.params.filter(function(je){return!je.name}).length||De.headers.filter(function(je){return!je.name}).length||De.formControls.filter(function(je){return!je.name}).length)&&(D=!0),De.contentType===2&&!De.body&&(H=!0)}),G){alert(_l("Access Token URL\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if(D){alert(_l("\u53C2\u6570\u540D\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if(H){alert(_l("raw(JSON)\u4E0D\u80FD\u4E3A\u7A7A"),2);return}}d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,name:u.trim(),fields:p,webHookNodes:w,expireAfterSeconds:f},{isIntegration:n.props.isIntegration}).then(function(De){n.props.updateNodeData(De),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.test=function(){var l=n.state.data,o=l.webHookNodes[n.testIndex],d=o.url,u=o.params,p=o.headers,f=o.formControls,w=o.body,D=v().uniq((d+ke()(u)+ke()(p)+ke()(f)+w).match(/\$[^ \r\n]+?\$/g)||[]);D.length?n.setState({showTestDialog:!0,testArray:D}):n.send()},n.send=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=n.props,d=o.processId,u=o.selectNodeId,p=n.state,f=p.data,w=p.sendRequest,D=f.webHookNodes[n.testIndex],G=D.method,H=D.url,De=D.params,je=D.headers,lt=D.body,Ft=D.formControls,un=D.contentType;if(n.setState({showTestDialog:!1}),!H){alert(_l("Access Token URL"),2);return}w||(z.Z.webHookTestRequest({processId:d,nodeId:u,method:G,url:n.formatParameters(H,l),params:JSON.parse(n.formatParameters(ke()(De.filter(function(dn){return dn.name})),l)),headers:JSON.parse(n.formatParameters(ke()(je.filter(function(dn){return dn.name})),l)),body:n.formatParameters(lt,l),formControls:JSON.parse(n.formatParameters(ke()(Ft.filter(function(dn){return dn.name})),l)),contentType:un},{isIntegration:n.props.isIntegration}).then(function(dn){dn.status===1?n.updateSource({controls:dn.data.controls},function(){n.updateAjaxParameter({testMap:l},n.testIndex)}):(n.updateAjaxParameter({testMap:l},n.testIndex),alert(dn.msg||_l("\u8BF7\u6C42\u5F02\u5E38"),2)),n.setState({sendRequest:!1})}),n.setState({sendRequest:!0}))},n.formatParameters=function(l,o){return(l.match(/\$[^ \r\n]+?\$/g)||[]).forEach(function(d){l=l.replace(d,o[d]||"")}),l},n.state={data:{},saveRequest:!1,showParameterList:[],tab:"1",showTestDialog:!1,testArray:[]},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n){var l=this,o=n.processId,d=n.selectNodeId,u=n.selectNodeType,p=n.isIntegration,f=n.instanceId;z.Z.getNodeDetail({processId:o,nodeId:d,flowNodeType:u,instanceId:f},{isIntegration:p}).then(function(w){w.appType===a.IF.OAUTH2&&!w.webHookNodes.length&&(w.webHookNodes=[{method:1,url:"",params:[{name:"app_id",value:""},{name:"app_secret",value:""}],headers:[],contentType:1,formControls:[],body:"",testMap:{}}]),l.setState({data:w}),l.refreshTime&&(l.refreshTime.value=w.expireAfterSeconds)})}},{key:"renderBasicAuthContent",value:function(){var n=this,l=this.state.data;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font16 bold"},_l("Basic Auth \u8BA4\u8BC1")),e.createElement("div",{className:"mTop5 Gray_9e"},_l("\u5C06\u8FD4\u56DE\u8BA1\u7B97\u540E\u7684 Basic Auth \u53C2\u6570\u4F9B API \u8BF7\u6C42\u53C2\u6570\u4F7F\u7528")),l.fields.map(function(o,d){var u=v().find(l.controls,function(p){return p.controlId===o.fieldId})||{};return e.createElement("div",{key:o.fieldId,className:"relative"},e.createElement("div",{className:"mTop15 ellipsis Font13 bold"},u.controlName),e.createElement(Gt.Z,{companyId:n.props.companyId,processId:n.props.processId,relationId:n.props.relationId,selectNodeId:n.props.selectNodeId,isIntegration:n.props.isIntegration,sourceNodeId:l.selectNodeId,controls:l.controls,formulaMap:l.formulaMap,fields:l.fields,updateSource:n.updateSource,item:o,i:d}))}))}},{key:"renderOAuth2Content",value:function(){var n=this,l=this.state,o=l.data,d=l.showParameterList,u=l.tab,p=l.showTestDialog,f=l.testArray,w={1:{text:"Params",sourceKey:"params",btnText:"+ Query Param"},2:{text:"Headers",sourceKey:"headers",btnText:"+ Header"},3:{text:"Body",sourceKey:"formControls",btnText:"+ Form"}};return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font16 bold"},_l("OAuth 2.0 \u8BA4\u8BC1\uFF08\u5BA2\u6237\u7AEF\u51ED\u8BC1 client credentials\uFF09")),e.createElement("div",{className:"mTop5 Gray_9e"},_l("\u5C06\u8FD4\u56DE\u83B7\u53D6\u5230\u7684 Access Token \u503C\u4F9B API \u8BF7\u6C42\u53C2\u6570\u4F7F\u7528")),e.createElement("div",{className:"Font13 bold mTop20"},_l("Access Token URL")),o.webHookNodes.map(function(D,G){return v().includes([1,4,5],D.method)&&delete w[3],e.createElement(e.Fragment,null,e.createElement("div",{className:"flexRow"},e.createElement(Ie.Z,{className:"flowDropdown mRight10 mTop10",style:{width:115},data:a.ZX,value:D.method,border:!0,onChange:function(De){return n.updateAjaxParameter({method:De},G)}}),e.createElement("div",{className:"flex"},e.createElement(ce.Z,{projectId:n.props.companyId,processId:n.props.processId,relationId:n.props.relationId,selectNodeId:n.props.selectNodeId,isIntegration:n.props.isIntegration,type:2,height:0,content:D.url,formulaMap:o.formulaMap,onChange:function(De,je,lt){return n.updateAjaxParameter({url:je},G)},updateSource:n.updateSource}))),e.createElement("div",{className:"flexRow mTop10"},e.createElement("div",{className:"flex"}),e.createElement("div",{className:"ThemeColor3 ThemeHoverColor2 pointer",onClick:function(){return n.switchParameterVisible(G)}},v().includes(d,G)?_l("\u9690\u85CF\u8BF7\u6C42\u53C2\u6570\u8BE6\u60C5"):_l("\u663E\u793A\u8BF7\u6C42\u53C2\u6570\u8BE6\u60C5"),e.createElement(Q.Z,{type:v().includes(d,G)?"arrow-up-border":"arrow-down-border",className:"Font14 mLeft5"}))),v().includes(d,G)&&e.createElement(e.Fragment,null,e.createElement(va,{className:"flexRow"},T()(w).map(function(H){return e.createElement("li",{key:H,className:R()("ThemeBorderColor3 ThemeColor3",{active:u===H}),onClick:function(){return n.setState({tab:H})}},w[H].text)}),e.createElement("li",{className:"flex cursorDefault"})),u==="3"&&e.createElement("div",{className:"mTop15"},e.createElement(Le.ZP,{className:"Font12",data:[{text:"x-www-form-urlencoded",value:1,checked:D.contentType===1},{text:"raw(JSON)",value:2,checked:D.contentType===2}],onChange:function(De){var je={contentType:De};De===0?(je.formControls=[],je.body=""):De===1?je.body="":je.formControls=[],n.updateAjaxParameter(je,G)}})),(v().includes(["1","2"],u)||u==="3"&&D.contentType===1)&&e.createElement("div",{className:"mTop15"},e.createElement(Bt,{key:n.props.selectNodeId+u,projectId:n.props.companyId,processId:n.props.processId,relationId:n.props.relationId,selectNodeId:n.props.selectNodeId,isIntegration:n.props.isIntegration,source:D[w[u].sourceKey],sourceKey:w[u].sourceKey,btnText:w[u].btnText,formulaMap:o.formulaMap,updateSource:function(De){var je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};De.formulaMap?n.updateSource({formulaMap:De.formulaMap},je):n.updateAjaxParameter((0,E.default)({},w[u].sourceKey,De[w[u].sourceKey]),G)}})),u==="3"&&D.contentType===2&&e.createElement("div",{className:"mTop15"},e.createElement(ce.Z,{className:"minH100",projectId:n.props.companyId,processId:n.props.processId,relationId:n.props.relationId,selectNodeId:n.props.selectNodeId,isIntegration:n.props.isIntegration,type:2,content:D.body,formulaMap:o.formulaMap,onChange:function(De,je,lt){return n.updateAjaxParameter({body:je},G)},updateSource:n.updateSource}))))}),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u8FD4\u56DE\u53C2\u6570\u5217\u8868")),e.createElement("div",{className:"mTop10 Gray_9e"},_l("\u5411 Access Token URL \u53D1\u9001\u8BF7\u6C42\u5E76\u8FD4\u56DE\u53C2\u6570\u5217\u8868")),!!(o.controls||[]).length&&e.createElement(e.Fragment,null,e.createElement(kt,{controls:o.controls}),e.createElement("div",{className:"mTop20 Gray_9e"},_l("\u91CD\u65B0\u53D1\u9001\u8BF7\u6C42\u83B7\u53D6 Acess Token"))),e.createElement("div",{className:"mTop15 webhookBtn InlineBlock",onClick:this.test},_l("\u83B7\u53D6 Access Token")),e.createElement("div",{className:"Font13 bold mTop20"},_l("Access Token \u8FC7\u671F\u65F6\u95F4")),e.createElement("div",{className:"mTop10 Gray_9e"},_l("\u7CFB\u7EDF\u5C06\u4F9D\u636E\u8FD9\u91CC\u7684\u65F6\u957F\u8BBE\u7F6E\u6765\u5224\u65AD\u81EA\u52A8\u5237\u65B0 Access Token \u7684\u9891\u7387\uFF0C\u4E3A 0 \u5219\u4E0D\u81EA\u52A8\u5237\u65B0")),e.createElement("div",{className:"mTop15 flexRow alignItemsCenter"},e.createElement("input",{type:"text",className:"ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10",style:{width:115},ref:function(G){n.refreshTime=G},defaultValue:o.expireAfterSeconds,onKeyUp:function(G){return n.checkNumberControl(G)},onPaste:function(G){return n.checkNumberControl(G)},onBlur:function(G){return n.checkNumberControl(G,!0)}}),e.createElement("div",{className:"flex mLeft10"},_l("\u79D2"))),p&&e.createElement(qr,{title:_l("\u7F16\u8F91 Access Token \u6D4B\u8BD5\u6570\u636E"),onOk:this.send,onClose:function(){return n.setState({showTestDialog:!1})},testArray:f,formulaMap:o.formulaMap,testMap:o.webHookNodes[this.testIndex].testMap}))}},{key:"updateAjaxParameter",value:function(n,l){var o=this.state.data,d=v().cloneDeep(o.webHookNodes);T()(n).map(function(u){u==="method"&&v().includes([1,4,5],n[u])&&(d[l].contentType=1,d[l].formControls=[],d[l].body=""),d[l][u]=n[u]}),this.updateSource({webHookNodes:d})}},{key:"switchParameterVisible",value:function(n){var l=this.state.showParameterList;v().includes(l,n)?v().remove(l,function(o){return o===n}):l.push(n),this.setState({showParameterList:l})}},{key:"checkNumberControl",value:function(n,l){var o=n.target.value.replace(/[^\d]/g,"");n.target.value=o,l&&(o=parseInt(o||"0"),o>604800&&(o=604800),n.target.value=o,this.updateSource({expireAfterSeconds:o}))}},{key:"render",value:function(){var n=this.state.data;return v().isEmpty(n)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},n),icon:"icon-key1",bg:"BGBlueAsh",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},n.appType===a.IF.BASIC_AUTH&&this.renderBasicAuthContent(),n.appType===a.IF.OAUTH2&&this.renderOAuth2Content()))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:!0,onSave:this.onSave})))}}]),F}(e.Component),ta=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.appId,p=o.appType,f=o.name,w=o.actionId,D=o.selectNodeId,G=o.fields,H=o.conditions,De=o.executeType,je=o.random,lt=o.relation;if(!d){if((0,N.lX)(H)){alert(_l("\u7B5B\u9009\u6761\u4EF6\u7684\u5224\u65AD\u503C\u4E0D\u80FD\u4E3A\u7A7A"),2);return}if(!v().includes([a.gp.FROM_WORKSHEET,a.gp.WORKSHEET_FIND],w))if(D){if(!G.length){alert(_l("\u5FC5\u987B\u9009\u62E9\u7B5B\u9009\u5B57\u6BB5"),2);return}}else{alert(_l("\u5FC5\u987B\u9009\u62E9\u5BF9\u8C61"),2);return}z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,appId:u,flowNodeType:n.props.selectNodeType,actionId:w,appType:p,name:f.trim(),selectNodeId:D,fields:G,operateCondition:H,executeType:De,random:je,relation:lt}).then(function(Ft){n.props.updateNodeData(Ft),n.props.closeDetail()}),n.setState({saveRequest:!0})}},n.state={data:{},saveRequest:!1},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n,l,o){var d=this,u=n.processId,p=n.selectNodeId,f=n.selectNodeType,w=n.instanceId,D=this.state.data;z.Z.getNodeDetail({processId:u,nodeId:p,flowNodeType:f,selectNodeId:l,fields:o,instanceId:w}).then(function(G){d.setState({data:l?(0,h.default)({},G,{name:D.name}):G})})}},{key:"renderContent",value:function(){var n,l,o,d,u,p,f,w,D=this,G=this.props.selectNodeType,H=this.state.data,De=(u={},(0,E.default)(u,a.IF.USER,(n={},(0,E.default)(n,a.gp.RELATION,{title:_l("\u4ECE\u4EBA\u5458\u5B57\u6BB5\u83B7\u53D6"),filterText:_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u83B7\u5F97\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u3002\u5982\u679C\u672A\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6\uFF0C\u5219\u53EA\u4ECE\u5B57\u6BB5\u4E2D\u83B7\u5F97\u7B2C\u4E00\u540D\u4EBA\u5458\u7684\u76F8\u5173\u4FE1\u606F")}),(0,E.default)(n,a.gp.WORKSHEET_FIND,{title:_l("\u4ECE\u7EC4\u7EC7\u4EBA\u5458\u4E2D\u83B7\u53D6"),filterText:_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u83B7\u5F97\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u3002\u5982\u679C\u672A\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6\uFF0C\u5219\u53EA\u4ECE\u5F53\u524D\u7EC4\u7EC7\u7684\u6240\u6709\u4EBA\u5458\u4E2D\u83B7\u5F97\u7B2C\u4E00\u540D\uFF08\u6700\u65B0\u5165\u804C\uFF09\u4EBA\u5458\u7684\u76F8\u5173\u4FE1\u606F")}),(0,E.default)(n,a.gp.FROM_RECORD,{title:_l("\u4ECE\u4EBA\u5458\u5B57\u6BB5\u83B7\u53D6"),filterText:_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u83B7\u5F97\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u3002\u5982\u679C\u672A\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6\uFF0C\u5219\u83B7\u5F97\u6240\u6709\u6765\u81EA\u8BE5\u5B57\u6BB5\u7684\u4EBA\u5458\u7684\u76F8\u5173\u4FE1\u606F")}),(0,E.default)(n,a.gp.FROM_WORKSHEET,{title:_l("\u4ECE\u7EC4\u7EC7\u4EBA\u5458\u4E2D\u83B7\u53D6"),filterText:_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u83B7\u5F97\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u3002\u5982\u679C\u672A\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6\uFF0C\u5219\u83B7\u5F97\u5F53\u524D\u7EC4\u7EC7\u7684\u6240\u6709\u4EBA\u5458\u7684\u76F8\u5173\u4FE1\u606F")}),n)),(0,E.default)(u,a.IF.DEPARTMENT,(l={},(0,E.default)(l,a.gp.RELATION,{title:_l("\u4ECE\u90E8\u95E8\u5B57\u6BB5\u83B7\u53D6"),filterText:_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u83B7\u5F97\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u3002\u5982\u679C\u672A\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6\uFF0C\u5219\u53EA\u4ECE\u5B57\u6BB5\u4E2D\u83B7\u5F97\u7B2C\u4E00\u4E2A\u90E8\u95E8\u7684\u76F8\u5173\u4FE1\u606F")}),(0,E.default)(l,a.gp.WORKSHEET_FIND,{title:_l("\u4ECE\u7EC4\u7EC7\u90E8\u95E8\u4E2D\u83B7\u53D6"),filterText:_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u83B7\u5F97\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u3002\u5982\u679C\u672A\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6\uFF0C\u5219\u53EA\u4ECE\u5F53\u524D\u7EC4\u7EC7\u7684\u6240\u6709\u90E8\u95E8\u4E2D\u83B7\u5F97\u7B2C\u4E00\u4E2A\uFF08\u6700\u65B0\u521B\u5EFA\uFF09\u90E8\u95E8\u7684\u76F8\u5173\u4FE1\u606F")}),(0,E.default)(l,a.gp.FROM_RECORD,{title:_l("\u4ECE\u90E8\u95E8\u5B57\u6BB5\u83B7\u53D6"),filterText:_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u83B7\u5F97\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u3002\u5982\u679C\u672A\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6\uFF0C\u5219\u83B7\u5F97\u6240\u6709\u6765\u81EA\u8BE5\u5B57\u6BB5\u7684\u90E8\u95E8\u7684\u76F8\u5173\u4FE1\u606F")}),(0,E.default)(l,a.gp.FROM_WORKSHEET,{title:_l("\u4ECE\u7EC4\u7EC7\u90E8\u95E8\u4E2D\u83B7\u53D6"),filterText:_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u83B7\u5F97\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u3002\u5982\u679C\u672A\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6\uFF0C\u5219\u83B7\u5F97\u5F53\u524D\u7EC4\u7EC7\u7684\u6240\u6709\u90E8\u95E8\u7684\u76F8\u5173\u4FE1\u606F")}),l)),(0,E.default)(u,a.IF.EXTERNAL_USER,(o={},(0,E.default)(o,a.gp.RELATION,{title:_l("\u4ECE\u5916\u90E8\u7528\u6237\u5B57\u6BB5\u83B7\u53D6"),filterText:_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u83B7\u5F97\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u3002\u5982\u679C\u672A\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6\uFF0C\u5219\u53EA\u4ECE\u5B57\u6BB5\u4E2D\u83B7\u5F97\u7B2C\u4E00\u540D\u5916\u90E8\u7528\u6237\u7684\u76F8\u5173\u4FE1\u606F")}),(0,E.default)(o,a.gp.WORKSHEET_FIND,{title:_l("\u4ECE\u5916\u90E8\u95E8\u6237\u4E2D\u83B7\u53D6"),filterText:_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u83B7\u5F97\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u3002\u5982\u679C\u672A\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6\uFF0C\u5219\u53EA\u4ECE\u5F53\u524D\u5E94\u7528\u7684\u6240\u6709\u5916\u90E8\u7528\u6237\u4E2D\u83B7\u5F97\u7B2C\u4E00\u540D\uFF08\u6700\u65B0\u6CE8\u518C\uFF09\u4EBA\u5458\u7684\u76F8\u5173\u4FE1\u606F")}),(0,E.default)(o,a.gp.FROM_RECORD,{title:_l("\u4ECE\u5916\u90E8\u7528\u6237\u5B57\u6BB5\u83B7\u53D6"),filterText:_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u83B7\u5F97\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u3002\u5982\u679C\u672A\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6\uFF0C\u5219\u83B7\u5F97\u6240\u6709\u6765\u81EA\u8BE5\u5B57\u6BB5\u7684\u5916\u90E8\u7528\u6237\u7684\u76F8\u5173\u4FE1\u606F")}),(0,E.default)(o,a.gp.FROM_WORKSHEET,{title:_l("\u4ECE\u5916\u90E8\u95E8\u6237\u4E2D\u83B7\u53D6"),filterText:_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u83B7\u5F97\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u3002\u5982\u679C\u672A\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6\uFF0C\u5219\u83B7\u5F97\u5F53\u524D\u5E94\u7528\u7684\u6240\u6709\u5916\u90E8\u7528\u6237\u7684\u76F8\u5173\u4FE1\u606F")}),o)),(0,E.default)(u,a.IF.ORGANIZATION_ROLE,(d={},(0,E.default)(d,a.gp.RELATION,{title:_l("\u4ECE\u7EC4\u7EC7\u89D2\u8272\u5B57\u6BB5\u83B7\u53D6"),filterText:_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u83B7\u5F97\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u3002\u5982\u679C\u672A\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6\uFF0C\u5219\u53EA\u4ECE\u5B57\u6BB5\u4E2D\u83B7\u5F97\u7B2C\u4E00\u4E2A\u7EC4\u7EC7\u89D2\u8272\u7684\u76F8\u5173\u4FE1\u606F")}),(0,E.default)(d,a.gp.WORKSHEET_FIND,{title:_l("\u4ECE\u7EC4\u7EC7\u89D2\u8272\u4E2D\u83B7\u53D6"),filterText:_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u83B7\u5F97\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u3002\u5982\u679C\u672A\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6\uFF0C\u5219\u53EA\u4ECE\u5F53\u524D\u7EC4\u7EC7\u7684\u6240\u6709\u7EC4\u7EC7\u89D2\u8272\u4E2D\u83B7\u5F97\u7B2C\u4E00\u4E2A\uFF08\u6700\u65B0\u521B\u5EFA\uFF09\u89D2\u8272\u7684\u76F8\u5173\u4FE1\u606F")}),(0,E.default)(d,a.gp.FROM_RECORD,{title:_l("\u4ECE\u7EC4\u7EC7\u89D2\u8272\u5B57\u6BB5\u83B7\u53D6"),filterText:_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u83B7\u5F97\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u3002\u5982\u679C\u672A\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6\uFF0C\u5219\u83B7\u5F97\u6240\u6709\u6765\u81EA\u8BE5\u5B57\u6BB5\u7684\u7EC4\u7EC7\u89D2\u8272\u7684\u76F8\u5173\u4FE1\u606F")}),(0,E.default)(d,a.gp.FROM_WORKSHEET,{title:_l("\u4ECE\u7EC4\u7EC7\u89D2\u8272\u4E2D\u83B7\u53D6"),filterText:_l("\u8BBE\u7F6E\u7B5B\u9009\u6761\u4EF6\uFF0C\u83B7\u5F97\u6EE1\u8DB3\u6761\u4EF6\u7684\u6570\u636E\u3002\u5982\u679C\u672A\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6\uFF0C\u5219\u83B7\u5F97\u5F53\u524D\u7EC4\u7EC7\u7684\u6240\u6709\u7EC4\u7EC7\u89D2\u8272\u7684\u76F8\u5173\u4FE1\u606F")}),d)),u),je=(w={},(0,E.default)(w,a.QZ.FIND_SINGLE_MESSAGE,(p={},(0,E.default)(p,a.IF.USER,_l("\u83B7\u53D6\u4E00\u540D\u4EBA\u5458\u7684\u76F8\u5173\u4FE1\u606F\uFF0C\u5305\u542B\u4E2A\u4EBA\u4FE1\u606F\uFF08\u59D3\u540D\u3001\u6027\u522B\u3001\u751F\u65E5\u3001\u624B\u673A\u3001\u90AE\u7BB1\uFF09\u548C\u7EC4\u7EC7\u4FE1\u606F\uFF08\u90E8\u95E8\u3001\u804C\u4F4D\u3001\u5DE5\u53F7\u3001\u4E0A\u4E0B\u7EA7\uFF08\u53EF\u9009\uFF09\uFF09\uFF0C\u4F9B\u6D41\u7A0B\u4E2D\u7684\u5176\u4ED6\u8282\u70B9\u4F7F\u7528\u3002")),(0,E.default)(p,a.IF.DEPARTMENT,_l("\u83B7\u53D6\u4E00\u4E2A\u90E8\u95E8\u7684\u76F8\u5173\u4FE1\u606F\uFF0C\u5305\u542B\u90E8\u95E8\u540D\u79F0\u3001\u90E8\u95E8\u8D1F\u8D23\u4EBA\u3001\u90E8\u95E8\u4EBA\u5458\u53CA\u4E0A\u4E0B\u7EA7\u90E8\u95E8\uFF0C\u4F9B\u6D41\u7A0B\u4E2D\u7684\u5176\u4ED6\u8282\u70B9\u4F7F\u7528\u3002")),(0,E.default)(p,a.IF.EXTERNAL_USER,_l("\u83B7\u53D6\u4E00\u540D\u5916\u90E8\u7528\u6237\u7684\u76F8\u5173\u4FE1\u606F\uFF0C\u5305\u542B\u7528\u6237\u540D\u3001\u624B\u673A\u53F7\u3001\u89D2\u8272\u3001\u7528\u6237\u72B6\u6001\u3001openid\u548C\u81EA\u5B9A\u4E49\u5B57\u6BB5\uFF0C\u4F9B\u6D41\u7A0B\u4E2D\u7684\u5176\u4ED6\u8282\u70B9\u4F7F\u7528\u3002")),(0,E.default)(p,a.IF.ORGANIZATION_ROLE,_l("\u83B7\u53D6\u4E00\u4E2A\u7EC4\u7EC7\u89D2\u8272\u7684\u76F8\u5173\u4FE1\u606F\uFF0C\u5305\u542B\u89D2\u8272\u540D\u79F0\u3001\u5907\u6CE8\u3001\u89D2\u8272\u4E0B\u4EBA\u5458\uFF0C\u4F9B\u6D41\u7A0B\u4E2D\u7684\u5176\u4ED6\u8282\u70B9\u4F7F\u7528\u3002")),p)),(0,E.default)(w,a.QZ.FIND_MORE_MESSAGE,(f={},(0,E.default)(f,a.IF.USER,_l("\u83B7\u53D6\u591A\u540D\u4EBA\u5458\u7684\u76F8\u5173\u4FE1\u606F\uFF0C\u5305\u542B\u4E2A\u4EBA\u4FE1\u606F\uFF08\u59D3\u540D\u3001\u6027\u522B\u3001\u751F\u65E5\u3001\u624B\u673A\u3001\u90AE\u7BB1\uFF09\u548C\u7EC4\u7EC7\u4FE1\u606F\uFF08\u90E8\u95E8\u3001\u804C\u4F4D\u3001\u5DE5\u53F7\u3001\u4E0A\u4E0B\u7EA7\uFF08\u53EF\u9009\uFF09\uFF09\uFF0C\u4F9B\u6D41\u7A0B\u4E2D\u7684\u5176\u4ED6\u8282\u70B9\u4F7F\u7528\u3002")),(0,E.default)(f,a.IF.DEPARTMENT,_l("\u83B7\u53D6\u591A\u4E2A\u90E8\u95E8\u7684\u76F8\u5173\u4FE1\u606F\uFF0C\u5305\u542B\u90E8\u95E8\u540D\u79F0\u3001\u90E8\u95E8\u8D1F\u8D23\u4EBA\u3001\u90E8\u95E8\u4EBA\u5458\u53CA\u4E0A\u4E0B\u7EA7\u90E8\u95E8\uFF0C\u4F9B\u6D41\u7A0B\u4E2D\u7684\u5176\u4ED6\u8282\u70B9\u4F7F\u7528\u3002")),(0,E.default)(f,a.IF.EXTERNAL_USER,_l("\u83B7\u53D6\u591A\u540D\u5916\u90E8\u7528\u6237\u7684\u76F8\u5173\u4FE1\u606F\uFF0C\u5305\u542B\u7528\u6237\u540D\u3001\u624B\u673A\u53F7\u3001\u89D2\u8272\u3001\u7528\u6237\u72B6\u6001\u3001openid\u548C\u81EA\u5B9A\u4E49\u5B57\u6BB5\uFF0C\u4F9B\u6D41\u7A0B\u4E2D\u7684\u5176\u4ED6\u8282\u70B9\u4F7F\u7528\u3002")),(0,E.default)(f,a.IF.ORGANIZATION_ROLE,_l("\u83B7\u53D6\u591A\u4E2A\u7EC4\u7EC7\u89D2\u8272\u7684\u76F8\u5173\u4FE1\u606F\uFF0C\u5305\u542B\u89D2\u8272\u540D\u79F0\u3001\u5907\u6CE8\u3001\u89D2\u8272\u4E0B\u4EBA\u5458\uFF0C\u4F9B\u6D41\u7A0B\u4E2D\u7684\u5176\u4ED6\u8282\u70B9\u4F7F\u7528\u3002")),f)),w);return e.createElement(e.Fragment,null,e.createElement("div",{className:"Gray_75"},((De[H.appType]||{})[H.actionId]||{}).title),e.createElement("div",{className:"Gray_75 workflowDetailDesc pTop15 pBottom15 mTop10"},(je[G]||{})[H.appType]),v().includes([a.gp.FROM_RECORD,a.gp.RELATION],H.actionId)&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u9009\u62E9\u67E5\u627E\u5BF9\u8C61")),e.createElement("div",{className:"Gray_75 mTop5"},_l("\u5F53\u524D\u6D41\u7A0B\u4E2D\u7684\u8282\u70B9\u5BF9\u8C61")),e.createElement(fe.Z,{appList:H.flowNodeList,selectNodeId:H.selectNodeId,selectNodeObj:H.selectNodeObj,onChange:function(Ft){return D.getNodeDetail(D.props,Ft)}}),e.createElement("div",{className:"mTop20 bold"},_l("\u9009\u62E9\u5B57\u6BB5")),e.createElement(dt.Z,{controls:H.actionId===a.gp.RELATION?H.controls:H.relationControls,selectedIds:H.fields.map(function(lt){return lt.fieldId}),updateSource:function(Ft){return D.getNodeDetail(D.props,H.selectNodeId,ke()(Ft.map(function(un){return{fieldId:un}})))}})),e.createElement("div",{className:"mTop20 bold"},_l("\u7B5B\u9009\u6761\u4EF6")),e.createElement("div",{className:"Gray_75 mTop5"},De[H.appType][H.actionId].filterText),H.conditions.length?e.createElement(cn.Z,{processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,controls:H.actionId===a.gp.RELATION?H.relationControls:H.controls,data:H.conditions,updateSource:function(Ft){return D.updateSource({conditions:Ft})},projectId:this.props.companyId,singleCondition:H.appType===a.IF.EXTERNAL_USER,excludingDepartmentSpecialFilter:!0}):this.renderConditionBtn(),G===a.QZ.FIND_SINGLE_MESSAGE&&e.createElement("div",{className:"mTop20"},e.createElement(b.Z,{className:"InlineFlex",text:_l("\u5728\u7B5B\u9009\u6761\u4EF6\u7684\u57FA\u7840\u4E0A\uFF0C\u968F\u673A\u83B7\u53D6\u4E00\u4E2A"),checked:H.random,onClick:function(Ft){return D.updateSource({random:!Ft})}})),H.appType===a.IF.USER&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u83B7\u53D6\u6C47\u62A5\u5173\u7CFB")),e.createElement("div",{className:"mTop15",style:{height:23}},e.createElement(b.Z,{className:"InlineFlex",text:_l("\u540C\u65F6\u83B7\u53D6\u4EBA\u5458\u7684\u6C47\u62A5\u5173\u7CFB\u4FE1\u606F"),checked:H.relation,onClick:function(Ft){return D.updateSource({relation:!Ft})}})),e.createElement("div",{className:"mLeft25 Gray_9e"},_l("\u5305\u542B\u4EBA\u5458\u7684\u76F4\u5C5E\u4E0A\u53F8\u3001\u76F4\u63A5\u4E0B\u5C5E\u3001\u6240\u6709\u4E0B\u5C5E\uFF1B\u5982\u679C\u60A8\u7684\u4F7F\u7528\u573A\u666F\u65E0\u9700\u6C47\u62A5\u5173\u7CFB\u76F8\u5173\u4FE1\u606F\uFF0C\u63A8\u8350\u4E0D\u52FE\u9009\u4EE5\u63D0\u5347\u60A8\u7684\u67E5\u8BE2\u6548\u7387"))),G===a.QZ.FIND_SINGLE_MESSAGE&&e.createElement(Zr,{executeType:H.executeType,switchExecuteType:function(Ft){return D.updateSource({executeType:Ft})}}))}},{key:"renderConditionBtn",value:function(){var n=this,l=this.state.data;return e.createElement("div",{className:"addActionBtn mTop25"},e.createElement("span",{className:l.appId?"ThemeBorderColor3":"Gray_bd borderColor_c",onClick:function(){return n.updateSource({conditions:[[{}]]})}},e.createElement("i",{className:"icon-add Font16"}),_l("\u7B5B\u9009\u6761\u4EF6")))}},{key:"render",value:function(){var n=this.props.selectNodeType,l=this.state.data;return v().isEmpty(l)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},l),icon:(0,N.wu)(n,l.appType),bg:"BGBlue",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},this.renderContent()))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:v().includes([a.gp.FROM_WORKSHEET,a.gp.WORKSHEET_FIND],l.actionId)||!!l.selectNodeId&&!!l.fields.length,onSave:this.onSave})))}}]),F}(e.Component),Ia=t(14118),Aa=t(36021);const Wa=function(ne){var F=ne.appId,B=ne.companyId,n=ne.title,l=n===void 0?_l("\u9009\u62E9 API \u8FDE\u63A5\u4E0E\u8BA4\u8BC1"):n,o=ne.types,d=o===void 0?[1,2,3]:o,u=ne.visible,p=ne.allowAdd,f=p===void 0?!0:p,w=ne.onSave,D=ne.onClose,G=(0,e.useState)(null),H=(0,U.Z)(G,2),De=H[0],je=H[1],lt=(0,e.useState)(1),Ft=(0,U.Z)(lt,2),un=Ft[0],dn=Ft[1],Hn=(0,e.useState)(""),ca=(0,U.Z)(Hn,2),da=ca[0],Me=ca[1],nt=(0,e.useState)(!1),He=(0,U.Z)(nt,2),ie=He[0],We=He[1],Ue=function(){var Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";Ia.Z.getList({apkId:F,companyId:B,keyword:et,pageIndex:Et,pageSize:20,types:d},{isIntegration:!0}).then(function(Xe){Me(et),je(Et===1?Xe:De.concat(Xe)),dn(Et),We(Xe.length===20)})},Ke=v().debounce(function(wt){Ue(1,wt)},500),ut=function(){return e.createElement(i.Z,{onScrollEnd:function(){ie&&(We(!1),Ue(un+1,da))}},!De.length&&e.createElement("div",{className:"selectApiPackageNull h100"},e.createElement("div",{className:"selectApiPackageIcon"},e.createElement("i",{className:"icon-connect"})),e.createElement("div",{className:"mTop25 Font14 Gray_9e"},_l("\u6682\u65E0\u641C\u7D22\u7ED3\u679C"))),De.map(function(Et){return e.createElement("div",{key:Et.id,className:"selectApiPackageList",onClick:function(){w(Et),D()}},e.createElement("div",{className:"selectApiPackageListItem flexRow alignItemsCenter flex"},e.createElement("div",{className:"selectApiPackageListImg"},Et.iconName?e.createElement("img",{src:Et.iconName}):e.createElement(Q.Z,{icon:"connect",className:"Font16"})),e.createElement("div",{className:"flex mLeft16 flexColumn"},e.createElement("div",{className:"Font15 ellipsis"},Et.name),e.createElement("div",{className:"mTop5 Gray_9e ellipsis"},Et.explain))))}))};return(0,e.useEffect)(function(){u&&Ue()},[u]),u?e.createElement(te.Z,{className:"selectApiPackageDialog",title:l,visible:!0,width:720,showFooter:!1,onCancel:D},e.createElement("div",{className:"flexColumn h100"},De!==null&&(!!De.length||!!da)&&e.createElement("div",{className:"flexRow relative mBottom15 relative alignItemsCenter"},e.createElement("input",{type:"text",placeholder:_l("\u641C\u7D22 API \u8FDE\u63A5"),className:"selectApiPackageInput",onChange:function(Et){return Ke(Et.target.value.trim())}}),e.createElement("div",{className:"flex"}),f&&e.createElement("span",{className:"Font15 pointer ThemeColor3 ThemeHoverColor2",onClick:function(){return(0,Aa.T8)("/integration/connectList")}},"+ ",_l("\u6DFB\u52A0\u65B0\u8FDE\u63A5")),e.createElement("i",{className:"icon-search1 selectApiPackageSearch Gray_9e"})),e.createElement("div",{className:"flex"},De===null?e.createElement(me.Z,null):!De.length&&!da?e.createElement("div",{className:"selectApiPackageNull h100"},e.createElement("div",{className:"selectApiPackageIcon"},e.createElement("i",{className:"icon-connect"})),e.createElement("div",{className:"mTop25 Font14 Gray_9e"},_l("\u6682\u65E0 API \u8FDE\u63A5\u53EF\u7528\uFF0C\u8BF7\u5148\u5230\u96C6\u6210\u4E2D\u5FC3\u521B\u5EFA\u65B0\u7684 API \u8FDE\u63A5\u4E0E\u8BA4\u8BC1")),f&&e.createElement("span",{className:"selectApiPackageBtn ThemeBGColor3 ThemeHoverBGColor2",onClick:function(){return(0,Aa.T8)("/integration/connectList")}},_l("\u53BB\u96C6\u6210\u4E2D\u5FC3\u521B\u5EFA"))):ut()))):null};var Xa=t(32069),Ha=t(32415),Er=(0,W.Z)([`
  p {
    margin: 0;
  }
  .Bold400 {
    font-weight: 400;
  }
  .Green_right {
    color: #4caf50;
  }
  .iconCon {
    width: 44px;
    height: 44px;
    border: 1px solid #e0e0e0;
    border-radius: 6px;
    position: relative;
    text-align: center;
    line-height: 50px;
  }
  width: 880px;
  margin: 24px auto 0;
  background: #ffffff;
  // border: 1px solid #dddddd;
  border-radius: 10px;
  .paramCon {
    border-top: 1px solid #dddddd;
    padding: 16px;
    .conTr {
      min-height: 34px;
      line-height: 34px;
      &:hover {
        background: rgba(0, 0, 0, 0.02);
      }
    }
    .param,
    .option,
    .des {
      margin-left: 10px;
    }
    .param,
    .option,
    .name,
    .des {
      padding: 0 12px;
      min-height: 36px;
      line-height: 36px;
      & > span {
        line-height: 1.5;
      }
      flex: 3;
      &.name {
        flex: 2;
      }
      &.name,
      &.des {
        color: #7e7e7e;
      }
    }
    .option {
      flex: 1;
      .del {
        &:hover {
          color: red !important;
        }
      }
    }
    &.isEdit {
      border-top: none;
      padding: 0 24px 24px;
      .conTr {
        margin-bottom: 10px;
        &:hover {
          background: #fff;
        }
        .param,
        .name,
        .des {
          height: 36px;
          line-height: 36px;
          background: #ffffff;
          border: 1px solid #dddddd;
          border-radius: 3px;
          overflow: hidden;
          input {
            border: none;
            width: 100%;
            height: 100%;
            &:-ms-input-placeholder,
            &::-ms-input-placeholder,
            &::placeholder {
              color: #9e9e9e !important;
            }
            background: transparent;
          }
          &.disable {
            background: #f5f5f5;
            color: #757575;
            input {
              color: #757575;
            }
          }
        }
      }
      .saveBtn {
        margin: 24px auto 0px;
        padding: 11px 50px;
        background: rgb(33, 150, 243);
        color: rgb(255, 255, 255);
        line-height: 1em;
        border-radius: 30px;
        &:hover {
          background: #1764c0;
        }
      }
    }
  }
  .btn {
    &.disable {
      background: #f5f5f5;
      color: #bdbdbd;
      border: 1px solid #bdbdbd;
    }
  }
`],[`
  p {
    margin: 0;
  }
  .Bold400 {
    font-weight: 400;
  }
  .Green_right {
    color: #4caf50;
  }
  .iconCon {
    width: 44px;
    height: 44px;
    border: 1px solid #e0e0e0;
    border-radius: 6px;
    position: relative;
    text-align: center;
    line-height: 50px;
  }
  width: 880px;
  margin: 24px auto 0;
  background: #ffffff;
  // border: 1px solid #dddddd;
  border-radius: 10px;
  .paramCon {
    border-top: 1px solid #dddddd;
    padding: 16px;
    .conTr {
      min-height: 34px;
      line-height: 34px;
      &:hover {
        background: rgba(0, 0, 0, 0.02);
      }
    }
    .param,
    .option,
    .des {
      margin-left: 10px;
    }
    .param,
    .option,
    .name,
    .des {
      padding: 0 12px;
      min-height: 36px;
      line-height: 36px;
      & > span {
        line-height: 1.5;
      }
      flex: 3;
      &.name {
        flex: 2;
      }
      &.name,
      &.des {
        color: #7e7e7e;
      }
    }
    .option {
      flex: 1;
      .del {
        &:hover {
          color: red !important;
        }
      }
    }
    &.isEdit {
      border-top: none;
      padding: 0 24px 24px;
      .conTr {
        margin-bottom: 10px;
        &:hover {
          background: #fff;
        }
        .param,
        .name,
        .des {
          height: 36px;
          line-height: 36px;
          background: #ffffff;
          border: 1px solid #dddddd;
          border-radius: 3px;
          overflow: hidden;
          input {
            border: none;
            width: 100%;
            height: 100%;
            &:-ms-input-placeholder,
            &::-ms-input-placeholder,
            &::placeholder {
              color: #9e9e9e !important;
            }
            background: transparent;
          }
          &.disable {
            background: #f5f5f5;
            color: #757575;
            input {
              color: #757575;
            }
          }
        }
      }
      .saveBtn {
        margin: 24px auto 0px;
        padding: 11px 50px;
        background: rgb(33, 150, 243);
        color: rgb(255, 255, 255);
        line-height: 1em;
        border-radius: 30px;
        &:hover {
          background: #1764c0;
        }
      }
    }
  }
  .btn {
    &.disable {
      background: #f5f5f5;
      color: #bdbdbd;
      border: 1px solid #bdbdbd;
    }
  }
`]),ir=P.ZP.div(Er),Ir=function(){return{controlId:(0,Vt.Z)(),controlName:"",type:2,desc:"",hide:!1,value:""}};function za(ne){var F=(0,nr.Z)({node:ne.node,isEdit:!1,isErr:!1,controls:ne.controls||[]}),B=(0,U.Z)(F,2),n=B[0],l=n.node,o=n.isEdit,d=n.isErr,u=n.controls,p=B[1];(0,e.useEffect)(function(){f()},[]);var f=function(){z.Z.getNodeDetail({processId:ne.id,nodeId:l.id,flowNodeType:l.typeId},{isIntegration:!0}).then(function(H){p({controls:H.controls||[]})})},w=function(){var H=u.filter(function(De){return!!De.controlName}).map(function(De){return(0,h.default)({},De,{alias:De.controlName})});z.Z.saveNode({processId:ne.id,nodeId:l.id,flowNodeType:l.typeId,controls:H,appType:l.appType,name:l.name},{isIntegration:!0}).then(function(De){p({isEdit:!1}),f()})},D=function(H,De){return o?e.createElement("input",{type:"text",className:R()("Gray"),placeholder:_l("\u8BF7\u8F93\u5165"),value:H[De],readOnly:ne.connectType===2&&De!=="value",onChange:function(lt){p({controls:u.map(function(Ft,un){return Ft.controlId===H.controlId?(0,h.default)({},Ft,(0,E.default)({},De,lt.target.value)):Ft})})}}):e.createElement("span",{className:"WordBreak InlineBlock"},H.hide&&H[De]&&De==="value"?H.value.length>=12?(0,Ha.Q)(H.value):"************":H[De])};return e.createElement(ir,{className:ne.className},e.createElement(Xa.Fk,{className:"flexRow"},e.createElement("div",{className:R()("iconCon",{isEdit:o})},o?"":u.length>0&&e.createElement(Q.Z,{icon:"check_circle1",className:"Green_right tip"}),e.createElement(Q.Z,{icon:"parameter",className:"iconParam Font24"})),e.createElement("div",{className:"flex pLeft16"},e.createElement("p",{className:"Font17 Bold"},_l("\u8FDE\u63A5\u53C2\u6570")),e.createElement("p",{className:"Font13 Gray_75 mTop4"},e.createElement("span",{className:"TxtMiddle"},_l("\u7528\u4E8E\u914D\u7F6E\u9274\u6743\u65F6\u4F7F\u7528\uFF0C\u8BBE\u7F6E\u4E3A\u9690\u85CF\u540E\uFF0C\u67E5\u770B\u65F6\u8BE5\u53C2\u6570\u503C\u5C06\u4EE5\u63A9\u7801\u4EE3\u66FF")),e.createElement(q.Z,{href:"https://help.mingdao.com/integration/api#connection-parameters",type:3,text:_l("\u4F7F\u7528\u5E2E\u52A9")}))),!o&&ne.canEdit&&e.createElement("div",{className:R()("btn Hand",{disable:ne.connectType===2&&u.length<=0}),onClick:function(){ne.connectType===2&&u.length<=0||p({isEdit:!0,controls:u.length>0?u:[{controlId:(0,Vt.Z)(),controlName:"",type:2,desc:"",hide:!1,value:""}]})}},u.length<=0?_l("\u5F00\u59CB\u914D\u7F6E"):_l("\u7F16\u8F91"))),(u.length>0||o)&&e.createElement("div",{className:R()("paramCon",{isEdit:o})},o&&e.createElement("div",{className:"par headTr flexRow"},e.createElement("div",{className:"name Gray_75"},_l("\u53C2\u6570\u540D\u79F0")),e.createElement("div",{className:"param Gray_75"},_l("\u53C2\u6570\u503C")),e.createElement("div",{className:"des Gray_75"},_l("\u8BF4\u660E")),e.createElement("div",{className:"option Gray_75"},_l("\u9690\u85CF"),e.createElement(Rn.Z,{action:["hover"],popupPlacement:"topLeft",offset:[-15,0],text:e.createElement("span",{style:{color:"#fff"}},_l("\u9690\u85CF\u53C2\u6570\u4F1A\u52A0\u5BC6\u5B58\u50A8\uFF0C\u4E0D\u53EF\u53D6\u6D88\u9690\u85CF"))},e.createElement(Q.Z,{icon:"error_outline",className:R()("mLeft5")})))),u.map(function(G,H){return e.createElement("div",{className:"par conTr flexRow"},e.createElement("div",{className:R()("name WordBreak",{disable:ne.connectType===2})},D(G,"controlName")),e.createElement("div",{className:"param WordBreak"},D(G,"value")),e.createElement("div",{className:R()("des WordBreak",{disable:ne.connectType===2})},D(G,"desc")),o&&e.createElement("div",{className:"option flexRow"},e.createElement(b.Z,{className:"mLeft5 flex TxtMiddle",size:"small",checked:G.hide,disabled:G.hide,onClick:function(){p({controls:u.map(function(je,lt){return je.controlId===G.controlId?(0,h.default)({},je,{hide:!G.hide}):je})})}}),ne.connectType!==2&&e.createElement(Q.Z,{className:"flex Font18 Hand LineHeight36 InlineBlock Gray_9e del",icon:"delete1",onClick:function(){p({controls:u.filter(function(je,lt){return je.controlId!==G.controlId})})}})))}),o&&ne.canEdit&&e.createElement(e.Fragment,null,ne.connectType!==2&&e.createElement("div",{className:""},e.createElement("span",{className:"Hand ThemeColor3 mTop12 Bold400",onClick:function(){p({controls:u.concat(Ir())})}},"+ "+_l("\u8FDE\u63A5\u53C2\u6570"))),e.createElement("div",{className:"TxtCenter"},e.createElement("div",{className:"saveBtn Bold InlineBlock Hand",onClick:function(H){w()}},_l("\u4FDD\u5B58\u5E76\u7EE7\u7EED"))))))}const Ja=za;var or=t(5274),Ua=(0,W.Z)([`
  p {
    margin: 0;
  }
  .Bold400 {
    font-weight: 400;
  }
  .Green_right {
    color: #4caf50;
  }
  .iconCon {
    width: 44px;
    height: 44px;
    border: 1px solid #e0e0e0;
    border-radius: 6px;
    position: relative;
    text-align: center;
    line-height: 50px;
  }
  width: 880px;
  margin: 0 auto;
  background: #ffffff;
  // border: 1px solid #dddddd;
  border-radius: 10px;
  .con {
    padding: 20px 24px;
    .title {
      width: 130px;
      padding-right: 20px;
    }
  }
  .workflowSettings {
    position: fixed;
    top: 0;
    bottom: 0;
    right: 0;
    z-index: 100;
  }
  .line {
    padding: 10px 0;
    border-bottom: 1px solid #f2f2f2;
  }
  .btn {
    &.disable {
      background: #f5f5f5;
      color: #bdbdbd;
      border: 1px solid #bdbdbd;
    }
  }
`],[`
  p {
    margin: 0;
  }
  .Bold400 {
    font-weight: 400;
  }
  .Green_right {
    color: #4caf50;
  }
  .iconCon {
    width: 44px;
    height: 44px;
    border: 1px solid #e0e0e0;
    border-radius: 6px;
    position: relative;
    text-align: center;
    line-height: 50px;
  }
  width: 880px;
  margin: 0 auto;
  background: #ffffff;
  // border: 1px solid #dddddd;
  border-radius: 10px;
  .con {
    padding: 20px 24px;
    .title {
      width: 130px;
      padding-right: 20px;
    }
  }
  .workflowSettings {
    position: fixed;
    top: 0;
    bottom: 0;
    right: 0;
    z-index: 100;
  }
  .line {
    padding: 10px 0;
    border-bottom: 1px solid #f2f2f2;
  }
  .btn {
    &.disable {
      background: #f5f5f5;
      color: #bdbdbd;
      border: 1px solid #bdbdbd;
    }
  }
`]),qa=P.ZP.div(Ua);function dr(ne){var F=(0,nr.Z)({isErr:!1,showEdit:!1,node:ne.node||{},loading:!0}),B=(0,U.Z)(F,2),n=B[0],l=n.node,o=n.isErr,d=n.showEdit,u=n.loading,p=B[1];(0,e.useEffect)(function(){w()},[]);var f=function(){!l||!l.id||or.Z.all([z.Z.get({processId:ne.connectId},{isIntegration:!0}),z.Z.getNodeDetail({processId:ne.id,nodeId:l.id,flowNodeType:l.typeId},{isIntegration:!0})]).then(function(Ft){var un=_.toArray((Ft[0]||{}).flowNodeMap||{});p({node:(0,h.default)({},l,un.find(function(dn){return dn.typeId===22})||{},Ft[1])})})},w=function(){z.Z.getNodeDetail({processId:ne.id,nodeId:l.id,flowNodeType:l.typeId},{isIntegration:!0}).then(function(Ft){p({node:(0,h.default)({},l,Ft),loading:!1})})},D=function(Ft){return e.createElement("div",{className:"flexRow mBottom20"},e.createElement("div",{className:"title Gray_75"},_l("\u53EF\u7528\u8FD4\u56DE\u53C2\u6570")),e.createElement("div",{className:"txt flex"},e.createElement("div",{className:"flexRow line"},e.createElement("div",{className:"flex Gray_9e"},_l("\u53C2\u6570\u540D")),e.createElement("div",{className:"flex Gray_9e"},_l("\u53C2\u8003\u503C"))),Ft.map(function(un){return e.createElement("div",{className:"flexRow line"},e.createElement("div",{className:"flex WordBreak"},un.controlName),e.createElement("div",{className:"flex WordBreak"},un.value))})))},G=function(){if(l.appId)return e.createElement("div",{className:"con"},e.createElement("div",{className:"flexRow mBottom20"},e.createElement("div",{className:"title Gray_75"},_l("\u9274\u6743\u65B9\u5F0F")),e.createElement("div",{className:"txt flex"},e.createElement("span",null,Ha.E0.find(function(Ft){return Ft.appType===l.appType}).name))),e.createElement("div",{className:""},e.createElement("div",{className:"flexRow mBottom20"},e.createElement("div",{className:"title Gray_75"},_l("Basic Auth \u53C2\u6570")),e.createElement("div",{className:"txt flex"},(l.fields||[]).filter(function(Ft){return!!Ft.fieldValue}).length>=2?e.createElement("span",null,_l("\u5DF2\u83B7\u53D6")):e.createElement("span",{class:"Red"},_l("\u672A\u83B7\u53D6")))),(l.fields||[]).length>0&&l.appId&&D([{controlId:"basicAuth",controlName:"Basic Auth \u53C2\u6570",type:2,hide:!1,value:"************ (\u9690\u85CF)"}])))},H=function(){return(l.webHookNodes||[]).length<=0?"":e.createElement("div",{className:"con"},e.createElement("div",{className:"flexRow mBottom20"},e.createElement("div",{className:"title Gray_75"},_l("\u9274\u6743\u65B9\u5F0F")),e.createElement("div",{className:"txt flex"},e.createElement("span",null,Ha.E0.find(function(Ft){return Ft.appType===l.appType}).name))),e.createElement("div",{className:""},e.createElement("div",{className:"flexRow mBottom20"},e.createElement("div",{className:"title Gray_75"},"Access Token URL"),e.createElement("div",{className:"txt flex WordBreak"},l.webHookNodes[0].url)),ne.connectType!==2&&e.createElement("div",{className:"flexRow mBottom20"},e.createElement("div",{className:"title Gray_75"},"Access Token"),e.createElement("div",{className:"txt flex"},(l.controls||[]).length>0?e.createElement("span",null,_l("\u5DF2\u83B7\u53D6")):e.createElement("span",{class:"Red"},_l("\u672A\u83B7\u53D6")))),e.createElement("div",{className:"flexRow mBottom20"},e.createElement("div",{className:"title Gray_75"},_l("\u8FC7\u671F\u65F6\u95F4")),e.createElement("div",{className:"txt flex"},l.expireAfterSeconds," ",_l("\u79D2"))),ne.connectType!==2&&(l.controls||[]).length>0&&D(l.controls)))};if(u)return e.createElement(me.Z,null);var De=function(){return l.appType===31?l.appId?(l.fields||[]).filter(function(Ft){return!!Ft.fieldValue}).length>=2?e.createElement(Q.Z,{icon:"check_circle1",className:"Green_right tip"}):e.createElement(Q.Z,{icon:"error1",className:"Red tip"}):"":(l.webHookNodes||[]).length<=0?void 0:(l.controls||[]).length>0?!!l&&e.createElement(Q.Z,{icon:"check_circle1",className:"Green_right tip"}):e.createElement(Q.Z,{icon:"error1",className:"Red tip"})},je=function(){var Ft="";return l.appType!==31?Ft=l.controls?_l("\u4FEE\u6539\u914D\u7F6E"):_l("\u5F00\u59CB\u914D\u7F6E"):Ft=(l.fields||[]).filter(function(un){return!!un.fieldValue}).length<=0?_l("\u5F00\u59CB\u914D\u7F6E"):_l("\u4FEE\u6539\u914D\u7F6E"),e.createElement("div",{className:"btn Hand",onClick:function(){p({showEdit:!0})}},Ft)};return e.createElement(qa,{className:ne.className},e.createElement(Xa.Fk,{className:"flexRow"},e.createElement("div",{className:R()("iconCon")},De(),e.createElement(Q.Z,{icon:"key1",className:"iconParam Font24"})),e.createElement("div",{className:"flex pLeft16"},e.createElement("p",{className:"Font17 Bold"},l.appType===31?_l("Basic Auth \u9274\u6743\u8BA4\u8BC1"):_l("OAuth \u9274\u6743\u8BA4\u8BC1")),e.createElement("p",{className:"Font13 Gray_75 mTop4"},e.createElement("span",{className:"TxtMiddle"},_l("\u914D\u7F6E\u53D1\u9001 API \u8BF7\u6C42\u65F6\u91C7\u7528\u7684\u9274\u6743\u8BA4\u8BC1\u65B9\u5F0F")),e.createElement(q.Z,{href:l.appType===31?"https://help.mingdao.com/integration/api#basic-auth":"https://help.mingdao.com/integration/api#oauth",type:3,text:_l("\u4F7F\u7528\u5E2E\u52A9")}))),ne.canEdit&&ne.connectType===2&&l.appType!==31?"":ne.canEdit&&ne.connectType!==2&&je()),l&&l.appType===31?G():H(),d&&ne.canEdit&&e.createElement("div",{className:"workflowSettings"},e.createElement(Pt,{companyId:localStorage.getItem("currentProjectId"),processId:ne.id,relationId:ne.relationId,relationType:ne.relationType,selectNodeId:l.id,selectNodeType:l.typeId,closeDetail:function(){p({showEdit:!1})},isIntegration:!0,updateNodeData:function(Ft){f()}})))}const Nr=dr;var Sr=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.name,p=o.appId;d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,name:u.trim(),appId:p}).then(function(f){n.props.updateNodeData(f),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.state={data:{},saveRequest:!1,visible:!1,apiData:{}},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n){var l=this,o=n.processId,d=n.selectNodeId,u=n.selectNodeType,p=n.instanceId;z.Z.getNodeDetail({processId:o,nodeId:d,flowNodeType:u,instanceId:p}).then(function(f){l.setState({data:f}),f.appId&&l.getList(f.appId)})}},{key:"renderContent",value:function(){var n=this,l=this.props,o=l.relationId,d=l.companyId,u=this.state,p=u.visible,f=u.data,w=u.apiData;return e.createElement(e.Fragment,null,e.createElement("div",{className:R()("flexRow alignItemsCenter workflowDetailSelectApi",{null:!f.appId},{error:f.appId&&!f.app.name})},f.appId?f.appId&&!f.app.name?e.createElement(e.Fragment,null,e.createElement("div",{className:"flex Font15"},_l("API \u63A5\u4E0E\u8BA4\u8BC1\u5DF2\u5220\u9664")),e.createElement("span",{"data-tip":_l("\u53D8\u66F4\u8FDE\u63A5\u4E0E\u8BA4\u8BC1")},e.createElement(Q.Z,{icon:"swap_horiz",className:"Font20 Gray_9e ThemeHoverColor3 pointer",onClick:function(){return n.setState({visible:!0})}}))):e.createElement(e.Fragment,null,e.createElement("div",{className:"workflowApiIcon circle"},f.app.iconName?e.createElement("img",{src:f.app.iconName}):e.createElement(Q.Z,{icon:"connect",className:"Font20"})),e.createElement("div",{className:"mLeft12 flexColumn",style:{maxWidth:600}},e.createElement("div",{className:"Font15"},e.createElement("span",{className:"ellipsis InlineBlock",style:{maxWidth:570}},f.app.name),e.createElement(Q.Z,{icon:"task-new-detail",className:"mLeft10 Font12 ThemeColor3 ThemeHoverColor2 pointer",onClick:function(){return window.open("/integrationConnect/"+f.appId)}})),(f.app.explain||f.app.describe)&&e.createElement("div",{className:"Gray_9e ellipsis"},f.app.explain||f.app.describe)),e.createElement("div",{className:"flex"}),e.createElement("span",{"data-tip":_l("\u53D8\u66F4\u8FDE\u63A5\u4E0E\u8BA4\u8BC1")},e.createElement(Q.Z,{icon:"swap_horiz",className:"Font20 Gray_9e ThemeHoverColor3 pointer",onClick:function(){return n.setState({visible:!0})}}))):e.createElement("span",{className:"Gray_9e ThemeHoverColor3 pointer alignItemsCenter",style:{display:"inline-flex"},onClick:function(){return n.setState({visible:!0})}},e.createElement(Q.Z,{icon:"add_circle_outline",className:"Font20 mRight5"}),_l("\u8BF7\u9009\u62E9 API \u8FDE\u63A5\u4E0E\u8BA4\u8BC1"))),w.startEventId&&this.renderApiContent(),e.createElement(Wa,{appId:o,companyId:d,visible:p,onSave:function(G){n.updateSource({appId:G.id,app:G}),n.getList(G.id)},onClose:function(){return n.setState({visible:!1})}}))}},{key:"getList",value:function(n){var l=this;z.Z.get({processId:n},{isIntegration:!0}).then(function(o){l.setState({apiData:o})})}},{key:"renderApiContent",value:function(){var n=this.state.apiData,l=n.flowNodeMap[n.startEventId],o=n.flowNodeMap[l.nextId];return e.createElement(e.Fragment,null,e.createElement(Ja,{className:"w100 mTop20",id:n.id,node:{id:n.startEventId,typeId:l.typeId}}),o.appType!==a.IF.NO_AUTH&&e.createElement(e.Fragment,null,e.createElement("div",{className:"flexColumn alignItemsCenter"},e.createElement(Q.Z,{icon:"arrow",className:"Font20 Gray_bd"})),e.createElement(Nr,{className:"w100 mTop0",id:n.id,node:{appId:o.appId,id:o.id,typeId:o.typeId}})))}},{key:"render",value:function(){var n=this.state.data;return v().isEmpty(n)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},n),icon:"icon-connect",bg:"BGBlueAsh",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},this.renderContent()))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:n.appId,onSave:this.onSave})))}}]),F}(e.Component),wr=t(6100),Ur=t(52200),Mr=t(62232),Hr=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.name,p=o.appId,f=o.fields,w=v().cloneDeep(o.subProcessVariables),D=0;if(!d){if(w.forEach(function(G){G.type===10000008&&f.find(function(H){return H.fieldId===G.controlId}).nodeId&&v().remove(w,function(H){return H.dataSource===G.controlId})}),w.forEach(function(G){G.required&&f.forEach(function(H){G.controlId===H.fieldId&&!H.nodeId&&!H.fieldValue&&!H.fieldValueId&&D++})}),D>0){alert(_l("\u6709\u5FC5\u586B\u5B57\u6BB5\u672A\u586B\u5199"),2);return}z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,name:u.trim(),appId:p,fields:f}).then(function(G){n.props.updateNodeData(G),n.props.closeDetail()}),n.setState({saveRequest:!0})}},n.selectIntegrationApi=function(){var l=n.props,o=l.companyId,d=l.relationId;(0,Ur.Z)({projectId:o,appId:d,onOk:function(p){return n.getNodeDetail(n.props,p)}})},n.state={data:{},saveRequest:!1},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n,l){var o=this,d=n.processId,u=n.selectNodeId,p=n.selectNodeType,f=n.instanceId,w=this.state.data;z.Z.getNodeDetail({processId:d,nodeId:u,flowNodeType:p,appId:l,instanceId:f}).then(function(D){D.subProcessVariables.length&&D.subProcessVariables.filter(function(G){return G.dataSource}).forEach(function(G){var H=v().find(D.subProcessVariables,function(De){return De.controlId===G.dataSource});H&&v().includes([10000007,10000008],H.type)&&D.fields.forEach(function(De){De.fieldId===G.controlId&&(De.dataSource=H.controlId)})}),o.setState({data:l?(0,h.default)({},D,{name:w.name}):D})})}},{key:"renderContent",value:function(){var n=this.state.data;return e.createElement(e.Fragment,null,e.createElement("div",{className:R()("flexRow alignItemsCenter workflowDetailSelectApi",{null:!n.appId},{error:n.appId&&!n.app.name})},n.appId?n.appId&&!n.app.name?e.createElement(e.Fragment,null,e.createElement("div",{className:"flex Font15"},_l("API\u5DF2\u5220\u9664")),e.createElement("span",{"data-tip":_l("\u53D8\u66F4API")},e.createElement(Q.Z,{icon:"swap_horiz",className:"Font20 Gray_9e ThemeHoverColor3 pointer",onClick:this.selectIntegrationApi}))):e.createElement(e.Fragment,null,e.createElement("div",{className:"workflowApiIcon",style:{backgroundColor:(0,Mr.YT)(n.app.iconColor||"#757575","0.08")}},e.createElement(wr.Z,{url:n.app.iconName,fill:n.app.iconColor,size:32}),e.createElement(Rn.Z,{popupPlacement:"bottom",text:e.createElement("span",null,n.app.otherApkId||_l("\u672A\u547D\u540D\u8FDE\u63A5"))},e.createElement("div",{className:"workflowApiIconSubscript workflowDetailTipsWidth tip-bottom-right"},n.app.otherApkName?e.createElement("img",{src:n.app.otherApkName}):e.createElement(Q.Z,{icon:"connect"})))),e.createElement("div",{className:"mLeft12 flexColumn",style:{maxWidth:600}},e.createElement("div",{className:"Font15"},e.createElement("span",{className:"ellipsis InlineBlock",style:{maxWidth:570}},n.app.name),e.createElement(Q.Z,{icon:"task-new-detail",className:"mLeft10 Font12 ThemeColor3 ThemeHoverColor2 pointer",onClick:function(){return window.open("/integrationApi/"+n.appId)}})),(n.app.explain||n.app.describe)&&e.createElement("div",{className:"Gray_9e ellipsis"},n.app.explain||n.app.describe)),e.createElement("div",{className:"flex"}),e.createElement("span",{"data-tip":_l("\u53D8\u66F4API")},e.createElement(Q.Z,{icon:"swap_horiz",className:"Font20 Gray_9e ThemeHoverColor3 pointer",onClick:this.selectIntegrationApi}))):e.createElement("span",{className:"Gray_9e ThemeHoverColor3 pointer alignItemsCenter",style:{display:"inline-flex"},onClick:this.selectIntegrationApi},e.createElement(Q.Z,{icon:"add_circle_outline",className:"Font20 mRight5"}),_l("\u8BF7\u9009\u62E9 API \u6A21\u677F"))),n.appId&&!!n.fields.length&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u4F20\u9012\u53C2\u6570")),e.createElement(ot,(0,h.default)({},this.props,{data:n,updateSource:this.updateSource}))))}},{key:"render",value:function(){var n=this.state.data;return v().isEmpty(n)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},n),icon:"icon-api",bg:"BGBlueAsh",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},this.renderContent()))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:n.appId,onSave:this.onSave})))}}]),F}(e.Component),po=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.appId,p=o.name,f=o.selectNodeId,w=o.accounts,D=o.processConfig,G=o.fields,H=o.flowNodeMap;if(!f){alert(_l("\u5FC5\u987B\u5148\u9009\u62E9\u4E00\u4E2A\u6570\u636E\u5BF9\u8C61"),2);return}if(!w.length){alert(_l("\u5FC5\u987B\u6307\u5B9A\u53D1\u8D77\u4EBA"),2);return}if(D.initiatorMaps[5]&&!D.initiatorMaps[5].length||D.userTaskNullMaps[5]&&!D.userTaskNullMaps[5].length){alert(_l("\u5FC5\u987B\u6307\u5B9A\u4EE3\u7406\u4EBA"),2);return}d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,appId:u,name:p.trim(),selectNodeId:f,accounts:w,processConfig:D,fields:G,flowNodeMap:(0,N.zA)(H)}).then(function(De){n.props.updateNodeData(De),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.switchDataSource=function(l){var o=n.state.data;o.selectNodeId?te.Z.confirm({title:e.createElement("span",{style:{color:"#f44336"}},_l("\u6CE8\u610F\uFF01\u4F60\u5C06\u8981\u66F4\u6539\u5BA1\u6279\u6D41\u7A0B\u7684\u6570\u636E\u5BF9\u8C61")),description:_l("\u66F4\u6362\u4E3A\u65B0\u7684\u5DE5\u4F5C\u8868\u540E\uFF0C\u6240\u6709\u76F8\u5173\u8282\u70B9\u914D\u7F6E\u7684\u5B57\u6BB5\u90FD\u5C06\u88AB\u91CD\u7F6E\uFF0C\u4F60\u9700\u8981\u91CD\u65B0\u914D\u7F6E\u8FD9\u4E9B\u8282\u70B9\u3002\u8BF7\u786E\u8BA4\u4F60\u9700\u8981\u6267\u884C\u6B64\u64CD\u4F5C"),okText:_l("\u786E\u8BA4\u66F4\u6539"),onOk:function(){n.getNodeDetail(n.props,{sId:l})}}):n.getNodeDetail(n.props,{sId:l})},n.state={data:{},saveRequest:!1,showSelectUserDialog:!1,cacheKey:+new Date,isCorrect:!0},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n){var l=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=o.sId,u=o.fields,p=n.processId,f=n.selectNodeId,w=n.selectNodeType,D=n.instanceId,G=this.state.data;z.Z.getNodeDetail({processId:p,nodeId:f,flowNodeType:w,selectNodeId:d,fields:u,instanceId:D}).then(function(H){d&&(H.name=G.name),d&&!u&&(H.fields=[],H.flowNodeMap=C()((0,E.default)({},a.fh.BEFORE,H.flowNodeMap[a.fh.BEFORE]))),u&&(H=C()(l.state.data,{fields:H.fields,flowNodeMap:C()(H.flowNodeMap,(0,E.default)({},a.fh.BEFORE,l.state.data.flowNodeMap[a.fh.BEFORE]))})),(!H.processConfig.userTaskNullMaps||H.processConfig.userTaskNullMaps[0])&&(H.processConfig.userTaskNullMaps=(0,E.default)({},H.processConfig.userTaskNullPass?1:3,[]),H.processConfig.userTaskNullPass=!1),l.setState({data:H,cacheKey:+new Date,isCorrect:H.startAppId===H.selectNodeObj.appId||d||u})})}},{key:"renderContent",value:function(){var n=this,l=this.state,o=l.data,d=l.showSelectUserDialog,u=l.cacheKey,p=l.isCorrect,f=[{text:_l("\u5141\u8BB8\u53D1\u8D77\u4EBA\u64A4\u56DE"),key:"allowRevoke"},{text:_l("\u5141\u8BB8\u53D1\u8D77\u4EBA\u50AC\u529E"),key:"allowUrge"}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 mTop20 bold"},_l("\u53D1\u8D77\u5BA1\u6279\u7684\u6570\u636E\u5BF9\u8C61")),e.createElement(fe.Z,{appList:o.flowNodeList,selectNodeId:p&&o.selectNodeId,selectNodeObj:o.selectNodeObj,onChange:this.switchDataSource}),o.selectNodeId&&e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 mTop20 bold"},_l("\u53D1\u8D77\u4EBA")),(o.accounts||[]).length?e.createElement($n.Z,{companyId:this.props.companyId,appId:this.props.relationType===2?this.props.relationId:"",accounts:o.accounts,updateSource:this.updateSource}):e.createElement("div",{className:"mTop12 flexRow ThemeColor3 workflowDetailAddBtn",onClick:function(){return n.setState({showSelectUserDialog:!0})}},e.createElement("i",{className:"Font28 icon-task-add-member-circle mRight10"}),_l("\u6307\u5B9A\u53D1\u8D77\u4EBA"),e.createElement(gn.Z,{appId:this.props.relationType===2?this.props.relationId:"",visible:d,companyId:this.props.companyId,processId:this.props.processId,nodeId:this.props.selectNodeId,onlyNodeRole:!0,unique:!0,accounts:o.accounts,updateSource:this.updateSource,onClose:function(){return n.setState({showSelectUserDialog:!1})}})),e.createElement("div",{className:"Font13 mTop20 bold"},_l("\u53D1\u8D77\u4EBA\u64CD\u4F5C")),f.map(function(w,D){return e.createElement(e.Fragment,{key:D},e.createElement(b.Z,{className:"mTop15 flexRow",text:w.text,checked:o.processConfig[w.key],onClick:function(H){return n.updateSource({processConfig:C()({},o.processConfig,(0,E.default)({},w.key,!H))})}}),w.key==="allowRevoke"&&o.processConfig.allowRevoke&&n.renderRevokeNode())}),e.createElement(mt.Z,(0,h.default)({},this.props,{cacheKey:u,processId:o.appId,selectNodeId:o.startNodeId,data:o,getNodeDetail:function(D){var G=D.fields;return n.getNodeDetail(n.props,{sId:o.selectNodeId,fields:G})},updateSource:this.updateSource}))))}},{key:"renderRevokeNode",value:function(){var n=this,l=this.state.data,o=l.processConfig,d=o.revokeFlowNodes,u=o.revokeNodeIds,p=d.map(function(f){return{text:f.name,value:f.id,disabled:v().includes(u,f.id)}});return e.createElement("div",{className:"mTop10 mLeft25 flexRow",style:{alignItems:"center"}},e.createElement("div",null,_l("\u8282\u70B9")),e.createElement(Ie.Z,{className:"mLeft10 flex flowDropdown flowDropdownMoreSelect",menuStyle:{width:"100%"},data:p,value:u.length||void 0,border:!0,openSearch:!0,renderTitle:function(){return!!u.length&&e.createElement("ul",{className:"tagWrap"},u.map(function(w){var D=v().find(d,function(G){return G.id===w});return e.createElement("li",{key:w,className:R()("tagItem flexRow",{error:!D})},e.createElement(rn.default,{title:D?null:"ID\uFF1A"+w},e.createElement("span",{className:"tag"},D?D.name:_l("\u8282\u70B9\u5DF2\u5220\u9664"))),e.createElement("span",{className:"delTag",onClick:function(H){H.stopPropagation();var De=[].concat(u);v().remove(De,function(je){return je===w}),n.updateSource({processConfig:C()({},l.processConfig,{revokeNodeIds:De})})}},e.createElement(Q.Z,{icon:"close",className:"pointer"})))}))},onChange:function(w){return n.updateSource({processConfig:C()({},l.processConfig,{revokeNodeIds:u.concat(w)})})}}),e.createElement("div",{className:"mLeft10"},_l("\u901A\u8FC7\u540E\u4E0D\u5141\u8BB8\u64A4\u56DE")))}},{key:"render",value:function(){var n=this.state.data;return v().isEmpty(n)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},n),icon:"icon-approval",bg:"BGDarkBlue",removeNodeName:!0,updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"flowDetailStartHeader flexColumn BGDarkBlue",style:{height:245}},e.createElement("div",{className:"flowDetailStartIcon flexRow",style:{background:"rgba(0, 0, 0, 0.24)"}},e.createElement("i",{className:"icon-approval Font40 white"})),e.createElement("div",{className:"Font16 mTop10"},_l("\u53D1\u8D77\u5BA1\u6279\u6D41\u7A0B")),e.createElement("div",{className:"Font14 mTop10"},_l("\u5BF9\u81EA\u52A8\u5316\u5DE5\u4F5C\u6D41\u4E2D\u7684\u6570\u636E\u53D1\u8D77\u5BA1\u6279\u6D41\u7A0B\uFF0C\u5B9E\u73B0\u4E1A\u52A1\u81EA\u52A8\u5316\u548C\u4EBA\u5DE5\u5BA1\u6279\u7684\u6253\u901A"))),e.createElement("div",{className:"workflowDetailBox"},this.renderContent()))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:!!n.accounts.length,onSave:this.onSave})))}}]),F}(e.Component),ol=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.accounts,p=o.name,f=o.sendContent;if(!f.trim()){alert(_l("\u901A\u77E5\u5185\u5BB9\u4E0D\u5141\u8BB8\u4E3A\u7A7A"),2);return}if(!u.length){alert(_l("\u5FC5\u987B\u6307\u5B9A\u901A\u77E5\u4EBA"),2);return}d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,name:p.trim(),sendContent:f.trim(),accounts:u}).then(function(w){n.props.updateNodeData(w),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.state={data:{},saveRequest:!1,showSelectUserDialog:!1,views:[]},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n){var l=this,o=n.processId,d=n.selectNodeId,u=n.selectNodeType,p=n.instanceId;z.Z.getNodeDetail({processId:o,nodeId:d,flowNodeType:u,instanceId:p}).then(function(f){l.setState({data:f})})}},{key:"renderContent",value:function(){var n=this,l=this.state,o=l.data,d=l.showSelectUserDialog;return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold"},_l("\u901A\u77E5\u5185\u5BB9")),e.createElement(ce.Z,{className:"minH100",projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,type:2,content:o.sendContent,formulaMap:o.formulaMap,onChange:function(p,f,w){return n.updateSource({sendContent:f})},updateSource:this.updateSource}),e.createElement("div",{className:"Font13 bold mTop20"},_l("\u901A\u77E5\u4EBA")),e.createElement("div",{className:"Font13 Gray_9e mTop10"},_l("\u5C06\u901A\u8FC7\u7CFB\u7EDF\u6D88\u606F\u53D1\u9001")),e.createElement($n.Z,{companyId:this.props.companyId,appId:this.props.relationType===2?this.props.relationId:"",accounts:o.accounts,updateSource:this.updateSource}),e.createElement("div",{className:"flexRow mTop15 ThemeColor3 workflowDetailAddBtn",onClick:function(){return n.setState({showSelectUserDialog:!0})}},e.createElement("i",{className:"Font28 icon-task-add-member-circle mRight10"}),_l("\u6DFB\u52A0\u901A\u77E5\u4EBA"),e.createElement(gn.Z,{appId:this.props.relationType===2?this.props.relationId:"",visible:d,companyId:this.props.companyId,processId:this.props.processId,nodeId:this.props.selectNodeId,unique:!1,accounts:o.accounts,updateSource:this.updateSource,onClose:function(){return n.setState({showSelectUserDialog:!1})}})))}},{key:"render",value:function(){var n=this.state.data;return v().isEmpty(n)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},n),icon:"icon-hr_message_reminder",bg:"BGBlue",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},this.renderContent()))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:!!(n.sendContent||"").trim()&&!!n.accounts.length,onSave:this.onSave})))}}]),F}(e.Component),ul=t(4725),pl=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateSource=function(l){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};n.props.haveChange(!0),n.setState({data:C()({},n.state.data,l)},o)},n.onSave=function(){var l=n.state,o=l.data,d=l.saveRequest,u=o.name,p=o.actionId,f=o.appId,w=o.width,D=o.height,G=o.timeout;if(!f){alert(o.actionId==="1"?_l("\u5FC5\u987B\u9009\u62E9\u4E00\u4E2A\u81EA\u5B9A\u4E49\u9875\u9762"):o.actionId==="2"?_l("\u5FC5\u987B\u9009\u62E9\u4E00\u4E2A\u7EDF\u8BA1\u56FE\u8868"):_l("\u5FC5\u987B\u8F93\u5165\u9875\u9762\u5730\u5740"),2);return}d||(z.Z.saveNode({processId:n.props.processId,nodeId:n.props.selectNodeId,flowNodeType:n.props.selectNodeType,actionId:p,name:u.trim(),appId:f,width:w||1200,height:D||900,timeout:G||60}).then(function(H){n.props.updateNodeData(H),n.props.closeDetail()}),n.setState({saveRequest:!0}))},n.state={data:{},saveRequest:!1,showCustomPage:!1,showStatisticalCharts:!1},n}return(0,L.default)(F,[{key:"componentDidMount",value:function(){this.getNodeDetail(this.props)}},{key:"componentWillReceiveProps",value:function(n,l){n.selectNodeId!==this.props.selectNodeId&&this.getNodeDetail(n),n.selectNodeName&&n.selectNodeName!==this.props.selectNodeName&&n.selectNodeId===this.props.selectNodeId&&!v().isEmpty(this.state.data)&&this.updateSource({name:n.selectNodeName})}},{key:"getNodeDetail",value:function(n){var l=this,o=n.processId,d=n.selectNodeId,u=n.selectNodeType,p=n.instanceId;z.Z.getNodeDetail({processId:o,nodeId:d,flowNodeType:u,instanceId:p}).then(function(f){f.appDetails=f.appDetails||{},f.width=f.width||1200,f.height=f.height||900,f.timeout=f.timeout||60,l.setState({data:f})})}},{key:"renderNullContent",value:function(){var n=this,l=[{text:_l("\u81EA\u5B9A\u4E49\u9875\u9762"),value:"1",desc:_l("\u83B7\u53D6\u81EA\u5B9A\u4E49\u9875\u9762\u7684\u5FEB\u7167\u56FE\u7247\uFF0C\u4F9B\u6D41\u7A0B\u4E2D\u5176\u4ED6\u8282\u70B9\u4F7F\u7528\u3002")},{text:_l("\u7EDF\u8BA1\u56FE\u8868"),value:"2",desc:_l("\u83B7\u53D6\u7EDF\u8BA1\u56FE\u8868\u7684\u5FEB\u7167\u56FE\u7247\uFF0C\u4F9B\u6D41\u7A0B\u4E2D\u5176\u4ED6\u8282\u70B9\u4F7F\u7528\u3002")},{text:_l("\u94FE\u63A5\u5730\u5740"),value:"3",desc:_l("\u901A\u8FC7\u94FE\u63A5\u5730\u5740\u83B7\u53D6\u9875\u9762\u7684\u5FEB\u7167\u56FE\u7247\uFF0C\u4F9B\u6D41\u7A0B\u4E2D\u5176\u4ED6\u8282\u70B9\u4F7F\u7528\u3002")}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font13 bold"},_l("\u9875\u9762\u7C7B\u578B")),e.createElement("ul",{className:"typeList mTop10"},l.map(function(o,d){return e.createElement("li",{key:d,onClick:function(){return n.updateSource({actionId:o.value,appDetails:{}})}},e.createElement(le.Z,{className:"Font16",text:o.text}),e.createElement("div",{className:"Gray_75 Font13 mLeft30 mTop5"},o.desc))})))}},{key:"renderContent",value:function(){var n=this,l=this.state.data,o={1:_l("\u83B7\u53D6\u81EA\u5B9A\u4E49\u9875\u9762\u7684\u5FEB\u7167\u56FE\u7247\uFF0C\u4F9B\u6D41\u7A0B\u4E2D\u5176\u4ED6\u8282\u70B9\u4F7F\u7528\u3002"),2:_l("\u83B7\u53D6\u7EDF\u8BA1\u56FE\u8868\u7684\u5FEB\u7167\u56FE\u7247\uFF0C\u4F9B\u6D41\u7A0B\u4E2D\u5176\u4ED6\u8282\u70B9\u4F7F\u7528\u3002"),3:_l("\u901A\u8FC7\u94FE\u63A5\u5730\u5740\u83B7\u53D6\u9875\u9762\u7684\u5FEB\u7167\u56FE\u7247\uFF0C\u4F9B\u6D41\u7A0B\u4E2D\u5176\u4ED6\u8282\u70B9\u4F7F\u7528\u3002")},d=[{text:this.renderTitle("1"),value:"1"},{text:this.renderTitle("2"),value:"2"},{text:this.renderTitle("3"),value:"3"}];return e.createElement(e.Fragment,null,e.createElement("div",{className:"Font14 Gray_75 workflowDetailDesc"},o[l.actionId]),e.createElement("div",{className:"mTop20 bold"},_l("\u9875\u9762\u7C7B\u578B")),e.createElement(Ie.Z,{className:"flowDropdown mTop10",data:d,value:l.actionId,border:!0,renderTitle:function(){return n.renderTitle(l.actionId)},onChange:function(p){return n.updateSource({actionId:p,appId:"",appDetails:{}})}}),v().includes(["1","2"],l.actionId)&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold flexRow alignItemsCenter"},l.actionId==="1"?_l("\u9009\u62E9\u81EA\u5B9A\u4E49\u9875\u9762"):_l("\u9009\u62E9\u7EDF\u8BA1\u56FE\u8868"),e.createElement("span",{className:"mLeft5 red"},"*"),l.actionId==="2"&&e.createElement("span",{className:"mLeft5 tip-top-right",style:{height:18},"data-tip":_l("\u5FEB\u7167\u4E0D\u80FD\u83B7\u53D6\u5DF2\u914D\u7F6E\u6309\u6743\u9650\u8BBF\u95EE\u7684\u56FE\u8868")},e.createElement(Q.Z,{className:"Font16 Gray_bd",icon:"info"}))),e.createElement("div",{className:"ThemeBorderColor3 actionControlBox pTop0 pBottom0 pLeft10 pRight10 mTop10 ellipsis pointer",onClick:function(){return l.actionId==="1"?n.setState({showCustomPage:!0}):n.setState({showStatisticalCharts:!0})}},l.appId?e.createElement("span",{className:R()({errorColor:!l.appDetails.apkName||!l.appDetails.appName||l.actionId==="2"&&!l.appDetails.reportName})},!l.appDetails.apkName||!l.appDetails.appName||l.actionId==="2"&&!l.appDetails.reportName?_l("\u5DF2\u5220\u9664"):l.actionId==="1"?l.appDetails.appName+"-"+l.appDetails.apkName:l.appDetails.appName+"-"+l.appDetails.reportName+"("+l.appDetails.apkName+")"):e.createElement("span",{className:"Gray_9e"},_l("\u8BF7\u9009\u62E9")))),l.actionId==="3"&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u8F93\u5165\u9875\u9762\u5730\u5740"),e.createElement("span",{className:"mLeft5 red"},"*")),e.createElement("div",{className:"mTop5 Gray_75"},_l("\u8F93\u5165\u5916\u90E8\u516C\u5F00\u9875\u9762\u5B8C\u6574\u5730\u5740\uFF0C\u9700\u8981\u8D26\u53F7\u767B\u5F55\u7684\u9875\u9762\u65E0\u6CD5\u83B7\u53D6\u3002\u5916\u90E8\u9875\u9762\u53EF\u80FD\u6355\u6349\u4E0D\u5B8C\u6574\u6216\u51FA\u9519\uFF0C\u8BF7\u6D4B\u8BD5\u662F\u5426\u53EF\u4EE5\u6B63\u5E38\u4F7F\u7528\u3002")),e.createElement("div",{className:"mTop10"},e.createElement(ce.Z,{projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,type:2,height:0,content:l.appId,formulaMap:l.formulaMap,onChange:function(p,f,w){return n.updateSource({appId:f})},updateSource:this.updateSource}))),e.createElement("div",{className:"mTop20 bold"},_l("\u9875\u9762\u5BBD\u5EA6")),e.createElement("div",{className:"mTop10"},e.createElement(Mt.Z,{projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,type:"number",hasOtherField:!1,allowedEmpty:!0,data:{fieldValue:l.width},updateSource:function(p){var f=p.fieldValue;return n.updateSource({width:f})}})),l.actionId!=="1"&&e.createElement(e.Fragment,null,e.createElement("div",{className:"mTop20 bold"},_l("\u9875\u9762\u9AD8\u5EA6")),e.createElement("div",{className:"mTop10"},e.createElement(Mt.Z,{projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,type:"number",hasOtherField:!1,allowedEmpty:!0,data:{fieldValue:l.height},updateSource:function(p){var f=p.fieldValue;return n.updateSource({height:f})}}))),e.createElement("div",{className:"mTop20 bold"},_l("\u7B49\u5F85\u65F6\u957F")),e.createElement("div",{className:"mTop5 Gray_75"},_l("\u7B49\u5F85\u9875\u9762\u52A0\u8F7D\u4E00\u6BB5\u65F6\u95F4\u540E\u518D\u5F00\u59CB\u622A\u56FE\u3002\u5F53\u622A\u53D6\u9875\u9762\u672A\u5B8C\u5168\u52A0\u8F7D\u65F6\uFF0C\u53EF\u9002\u5F53\u5EF6\u957F\u65F6\u95F4\u3002\u5355\u4F4D\u79D2\uFF0C\u9ED8\u8BA460\u79D2\u3002")),e.createElement("div",{className:"mTop10"},e.createElement(Mt.Z,{projectId:this.props.companyId,processId:this.props.processId,relationId:this.props.relationId,selectNodeId:this.props.selectNodeId,type:"number",hasOtherField:!1,allowedEmpty:!0,data:{fieldValue:l.timeout},updateSource:function(p){var f=p.fieldValue;return n.updateSource({timeout:f})}})))}},{key:"renderTitle",value:function(n){var l={1:{icon:"icon-dashboard",text:_l("\u81EA\u5B9A\u4E49\u9875\u9762")},2:{icon:"icon-worksheet_column_chart",text:_l("\u7EDF\u8BA1\u56FE\u8868")},3:{icon:"icon-link1",text:_l("\u94FE\u63A5\u5730\u5740")}};return e.createElement(e.Fragment,null,e.createElement("span",{className:R()("Font16 Gray_9e",l[n].icon)}),e.createElement("span",{className:"Font14 mLeft10"},l[n].text))}},{key:"render",value:function(){var n=this,l=this.state,o=l.data,d=l.showCustomPage,u=l.showStatisticalCharts;return v().isEmpty(o)?e.createElement(me.Z,{className:"mTop15"}):e.createElement(e.Fragment,null,e.createElement(de,(0,h.default)({},this.props,{data:(0,h.default)({},o),icon:"icon-camera_alt",bg:"BGBlueAsh",updateSource:this.updateSource})),e.createElement("div",{className:"flex"},e.createElement(i.Z,null,e.createElement("div",{className:"workflowDetailBox"},o.actionId?this.renderContent():this.renderNullContent()))),e.createElement(be,(0,h.default)({},this.props,{isCorrect:o.appId,onSave:this.onSave})),d&&e.createElement(ur.Z,{projectId:this.props.companyId,title:_l("\u9009\u62E9\u81EA\u5B9A\u4E49\u9875\u9762"),worksheetType:1,selectedAppId:o.appDetails.apkId||this.props.relationId,selectedWorksheetId:o.appId,visible:!0,onOk:function(f,w,D){n.updateSource({appId:w,appDetails:{apkId:f,apkName:D.appName,appId:w,appName:D.workSheetName}}),n.setState({showCustomPage:!1})},onHide:function(){return n.setState({showCustomPage:!1})}}),u&&e.createElement(ul.Z,{projectId:this.props.companyId,appId:o.appDetails.apkId||this.props.relationId,sheetId:o.appDetails.appId,reportId:o.appId,onOk:function(f){n.updateSource({appId:f.reportId,appDetails:{apkId:f.appId,apkName:f.appName,appId:f.sheetId,appName:f.sheetName,reportId:f.reportId,reportName:f.reportName}}),n.setState({showStatisticalCharts:!1})},onCancel:function(){return n.setState({showStatisticalCharts:!1})}}))}}]),F}(e.Component);const dl={0:bn,2:pn,3:ma,4:Vr,5:Br,6:Ko,7:Co,8:Zo,9:Qo,10:xo,11:Dr,12:Yr,13:Jo,14:Go,15:go,16:Fo,17:Ve,18:Oe,19:it,20:It,21:aa,22:Pa,23:bn,24:Sr,25:Hr,26:po,27:ol,28:pl,1e3:ta,1001:ta};var ml=t(87506),jo=t.n(ml),fl=t(74996),Pe,Bn,Un=(Bn=Pe=function(ne){(0,k.default)(F,ne);function F(B){(0,j.default)(this,F);var n=(0,I.default)(this,(F.__proto__||Ne()(F)).call(this,B));return n.updateNodeData=function(l){var o=n.props.processId;n.props.dispatch((0,fl.qY)(o,l))},n}return(0,L.default)(F,[{key:"renderContent",value:function(){var n=this.props,l=n.selectNodeType,o=n.relationId,d=n.isIntegration,u=dl[l];return e.createElement(u,C()({},{updateNodeData:this.updateNodeData},this.props,{relationId:d?"":o}))}},{key:"render",value:function(){var n=this.props,l=n.selectNodeId,o=n.selectNodeType,d=n.flowInfo,u=n.instanceId,p=dl[o];return o===a.QZ.BRANCH_ITEM?e.createElement(p,(0,h.default)({updateNodeData:this.updateNodeData},this.props)):e.createElement(jo(),{transitionName:"workflowDetailTransition",transitionEnterTimeout:250,transitionLeaveTimeout:250},!!l&&e.createElement("div",{className:R()("workflowDetail flexColumn",{workflowDetailRelease:!!d.parentId||u})},this.renderContent()))}}]),F}(e.Component),Pe.propTypes={companyId:m().string.isRequired,processId:m().string.isRequired,relationId:m().string,relationType:m().number,flowInfo:m().any,selectNodeId:m().string.isRequired,selectNodeType:m().any.isRequired,selectNodeName:m().string,closeDetail:m().func.isRequired,haveChange:m().func,isIntegration:m().bool,updateNodeData:m().func},Pe.defaultProps={flowInfo:{},haveChange:function(){}},Bn);const Pt=(0,y.$j)(function(ne){return ne.workflow})(Un)},35986:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>k});var h=t(67294),Te=t(93967),C=t.n(Te);if(!/^(1887|7596|7798)$/.test(t.j))var Ce=t(33867);if(!/^(1887|7596|7798)$/.test(t.j))var Ne=t(42108);var j=t(96486),L=t.n(j),I={suspend:"workflow_suspend",fail:"workflow_failure",completed:"hr_ok",filter:"workflow_suspend",overrule:"workflow_suspend"};const k=function(e){var oe=e.statusCode,m=oe===void 0?1:oe,y=e.config,i=y===void 0?Ne.jJ:y,me=e.className,J=e.size,T=J===void 0?30:J,te=e.color,E=te===void 0?"#333":te,r=e.textSize,R=r===void 0?14:r,a=i[m],z=a.status,N=a.text;return h.createElement("div",{className:C()("historyStatus",me)},h.createElement("div",{className:C()("historyStatusIcon",z),style:{width:T,height:T}},L().includes(["pending"],z)?h.createElement("div",{className:C()("statusIcon statusIcon-"+z)}):h.createElement(Ce.Z,{icon:I[z],style:{fontSize:T/1.5}})),h.createElement("div",{className:"statusText",style:{color:E,fontSize:R+"px"}},N))}},5861:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>te});var h=t(33867),Te=t(88106),C=t(52945),Ce=t.n(C),Ne=t(31546),j=t(85105),L=t.n(j),I=t(99663),k=t(22600),e=t(49135),oe=t(93196),m=t(67294),y=t(91247),i=t(27738),me=t(5618),J=t(96486),T=t.n(J),te=function(E){(0,oe.default)(r,E);function r(){var R,a,z,N;(0,I.default)(this,r);for(var q=arguments.length,K=Array(q),ye=0;ye<q;ye++)K[ye]=arguments[ye];return N=(a=(z=(0,e.default)(this,(R=r.__proto__||L()(r)).call.apply(R,[this].concat(K))),z),z.addVariables=function(){var v=z.props,se=v.updateSource,de=v.processVariables;se({processVariables:de.concat([{type:2,controlName:"",enumDefault:0,controlId:(0,y.Z)(),processVariableType:0}])})},a),(0,e.default)(z,N)}return(0,k.default)(r,[{key:"render",value:function(){var a=this.props,z=a.updateSource,N=a.processVariables,q=a.setErrorItems,K=a.errorItems,ye=N.filter(function(v){return v.processVariableType===0});return m.createElement("div",{className:"workflowProcessVariables"},m.createElement("div",{className:"flexRow"},m.createElement("div",{style:{width:120}},_l("\u53C2\u6570\u7C7B\u578B")),m.createElement("div",{className:"flex mLeft15"},_l("\u53C2\u6570\u540D\u79F0"))),ye.map(function(v,se){return m.createElement("div",{key:se,className:"flexRow mTop12 relative"},m.createElement(Ne.Z,{style:{width:120},menuStyle:{width:"100%"},data:me.Jy.filter(function(de){return T().includes([2,6,16,26,27,48],de.value)}),value:v.type,disabled:!(0,i.Z)(v.controlId),border:!0,onChange:function(U){z({processVariables:N.map(function(pe){return pe.controlId===v.controlId&&(pe.type=U,pe.enumDefault=T().includes([26,27],U)?1:0),pe})})}}),m.createElement("input",{type:"text",className:"mLeft15 processConfigInput",placeholder:_l("\u53C2\u6570\u540D\u79F0"),value:v.controlName,maxLength:64,onChange:function(U){var pe=U.target.value.trim(),Y="";pe?/^[a-zA-Z]{1}\w*$/.test(pe)?ye.filter(function(Le){return pe===Le.controlName}).length>0?Y=2:Y="":Y=1:Y="";var be=ye.filter(function(Le){return Le.controlId!==v.controlId}),Q={};be.forEach(function(Le){T().find(be,function(Be){return Be.controlName===Le.controlName&&Be.controlId!==Le.controlId})||(Q[Le.controlId]=K[Le.controlId]===1?1:"")}),q(Ce()({},K,(0,Te.default)({},v.controlId,Y),Q)),z({processVariables:N.map(function(Le){return Le.controlId===v.controlId&&(Le.controlName=pe),Le})})}}),K[v.controlId]&&m.createElement("div",{className:"parameterErrorMessage"},K[v.controlId]===1?_l("\u975E\u6CD5\u5B57\u7B26"):_l("\u53C2\u6570\u540D\u79F0\u4E0D\u5141\u8BB8\u91CD\u590D"),m.createElement("i",{className:"parameterErrorArrow"})),m.createElement(h.Z,{icon:"task-new-delete",className:"Font16 mLeft10 Gray_9e processConfigDel",onClick:function(){T().remove(N,function(U){return U.controlId===v.controlId}),K[v.controlId]="",ye.forEach(function(U,pe){T().find(ye,function(Y,be){return Y.controlName===U.controlName&&pe!==be})||(K[U.controlId]="")}),q(K),z({processVariables:N})}}))}),m.createElement("div",{className:"mTop15"},m.createElement("span",{className:"processConfigAdd",onClick:this.addVariables},"+ ",_l("\u65B0\u53C2\u6570"))))}}]),r}(m.Component)},48231:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>Ne});var h=t(63239),Te=t.n(h),C=t(33179),Ce={getList:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/activity/getList",C.Z.ajaxOptions.type="GET",mdyAPI(C.V,"activitygetList",L,$.extend(C.Z,I))},remove:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/activity/remove",C.Z.ajaxOptions.type="POST",mdyAPI(C.V,"activityremove",Te()(L),$.extend(C.Z,I))}};const Ne=Ce},81912:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>Ne});var h=t(63239),Te=t.n(h),C=t(33179),Ce={batch:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/batch",C.Z.ajaxOptions.type="POST",mdyAPI(C.V,"v1processbatch",Te()(L),$.extend(C.Z,I))},getDifferenceByCompanyId:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/getDifferenceByCompanyId",C.Z.ajaxOptions.type="GET",mdyAPI(C.V,"v1processgetDifferenceByCompanyId",L,$.extend(C.Z,I))},getDifferenceByProcessId:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/getDifferenceByProcessId",C.Z.ajaxOptions.type="GET",mdyAPI(C.V,"v1processgetDifferenceByProcessId",L,$.extend(C.Z,I))},getDifferenceProcessCount:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/getDifferenceProcessCount",C.Z.ajaxOptions.type="POST",mdyAPI(C.V,"v1processgetDifferenceProcessCount",Te()(L),$.extend(C.Z,I))},getDifferenceProcessList:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/getDifferenceProcessList",C.Z.ajaxOptions.type="POST",mdyAPI(C.V,"v1processgetDifferenceProcessList",Te()(L),$.extend(C.Z,I))},getDifferenceProcessListByIds:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/getDifferenceProcessListByIds",C.Z.ajaxOptions.type="POST",mdyAPI(C.V,"v1processgetDifferenceProcessListByIds",Te()(L),$.extend(C.Z,I))},getHistoryDifferenceByCompanyId:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/getHistoryDifferenceByCompanyId",C.Z.ajaxOptions.type="POST",mdyAPI(C.V,"v1processgetHistoryDifferenceByCompanyId",Te()(L),$.extend(C.Z,I))},getHistoryDifferenceByProcessId:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/getHistoryDifferenceByProcessId",C.Z.ajaxOptions.type="GET",mdyAPI(C.V,"v1processgetHistoryDifferenceByProcessId",L,$.extend(C.Z,I))},getRouterList:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/getRouterList",C.Z.ajaxOptions.type="GET",mdyAPI(C.V,"v1processgetRouterList",L,$.extend(C.Z,I))},getWarning:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/getWarning",C.Z.ajaxOptions.type="GET",mdyAPI(C.V,"v1processgetWarning",L,$.extend(C.Z,I))},init:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/init",C.Z.ajaxOptions.type="POST",mdyAPI(C.V,"v1processinit",Te()(L),$.extend(C.Z,I))},remove:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/remove",C.Z.ajaxOptions.type="POST",mdyAPI(C.V,"v1processremove",Te()(L),$.extend(C.Z,I))},reset:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/reset",C.Z.ajaxOptions.type="POST",mdyAPI(C.V,"v1processreset",Te()(L),$.extend(C.Z,I))},updateRouterIndex:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/updateRouterIndex",C.Z.ajaxOptions.type="POST",mdyAPI(C.V,"v1processupdateRouterIndex",Te()(L),$.extend(C.Z,I))},updateWaiting:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/updateWaiting",C.Z.ajaxOptions.type="POST",mdyAPI(C.V,"v1processupdateWaiting",Te()(L),$.extend(C.Z,I))},updateWarning:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/updateWarning",C.Z.ajaxOptions.type="POST",mdyAPI(C.V,"v1processupdateWarning",Te()(L),$.extend(C.Z,I))},count:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/count",C.Z.ajaxOptions.type="GET",mdyAPI(C.V,"v1processcount",L,$.extend(C.Z,I))},getProcessByCompanyId:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/getProcessByCompanyId",C.Z.ajaxOptions.type="GET",mdyAPI(C.V,"v1processgetProcessByCompanyId",L,$.extend(C.Z,I))},getProcessRole:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/getProcessRole",C.Z.ajaxOptions.type="GET",mdyAPI(C.V,"v1processgetProcessRole",L,$.extend(C.Z,I))},getProcessUseCount:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/getProcessUseCount",C.Z.ajaxOptions.type="GET",mdyAPI(C.V,"v1processgetProcessUseCount",L,$.extend(C.Z,I))},list:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/list",C.Z.ajaxOptions.type="GET",mdyAPI(C.V,"v1processlist",L,$.extend(C.Z,I))},removeProcess:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/removeProcess",C.Z.ajaxOptions.type="POST",mdyAPI(C.V,"v1processremoveProcess",Te()(L),$.extend(C.Z,I))},restoreProcess:function(L,I){return C.Z.ajaxOptions.url=C.Z.server(I)+"/v1/process/restoreProcess",C.Z.ajaxOptions.type="POST",mdyAPI(C.V,"v1processrestoreProcess",Te()(L),$.extend(C.Z,I))}};const Ne=Ce},39816:(wn,gt,t)=>{"use strict";t.d(gt,{J:()=>K,Z:()=>v});var h=t(42185),Te=t(60967),C=t(12692),Ce=t(25273),Ne=t(54208),j=t(62521),L=t(16469),I=t(95679),k=t(12424),e=t(69288),oe=t(86735),m=t(67294),y=t(93967),i=t.n(y),me=t(45697),J=t(96486),T=t.n(J),te=t(71893),E=t(29314),r=t(62023),R=t(15577),a=(0,oe.Z)([`
  .codeSnippetEditLabel {
    width: 180px;
  }
  input {
    border: 1px solid #ddd;
    padding: 9px 12px;
    height: 36px;
    line-height: 18px;
    border-radius: 3px;
    &:focus {
      border-color: #2196f3;
    }
  }
  .mRight90 {
    margin-right: 90px !important;
  }
`],[`
  .codeSnippetEditLabel {
    width: 180px;
  }
  input {
    border: 1px solid #ddd;
    padding: 9px 12px;
    height: 36px;
    line-height: 18px;
    border-radius: 3px;
    &:focus {
      border-color: #2196f3;
    }
  }
  .mRight90 {
    margin-right: 90px !important;
  }
`]),z=(0,oe.Z)([`
  .mui-dialog-body {
    padding-bottom: 0 !important;
  }
  .codeSnippetHeader {
    border-bottom: 1px solid #ddd;
    li {
      padding: 14px;
      font-size: 14px;
      cursor: pointer;
      position: relative;
      &:not(.active) {
        color: #333 !important;
      }
      &.active:after {
        position: absolute;
        bottom: -1px;
        left: 0;
        right: 0;
        content: '';
        height: 3px;
        background: #2196f3;
      }
    }
    .codeSnippetSearch {
      position: relative;
      .icon-search {
        position: absolute;
        top: 8px;
        left: 10px;
      }
      .icon-cancel {
        position: absolute;
        top: 8px;
        right: 10px;
        cursor: pointer;
      }
      input {
        width: 220px;
        height: 32px;
        line-height: 18px;
        background: #f5f5f5;
        border-radius: 16px;
        padding: 7px 32px 7px 32px;
        border: none;
      }
    }
  }
  .codeSnippetLeft {
    padding: 16px 0;
    width: 240px;
    border-right: 1px solid #ddd;
    .codeSnippetLangType {
      height: 36px;
      background: #f5f5f5;
      border-radius: 9px;
      padding: 2px;
      text-align: center;
      margin-right: 20px;
      > div {
        cursor: pointer;
      }
      .active {
        height: 32px;
        background: #fff;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.16);
        border-radius: 7px;
        color: #2196f3;
      }
    }
    li {
      height: 36px;
      margin-right: 20px;
      padding-left: 15px;
      position: relative;
      cursor: pointer;
      &.active {
        background: rgba(33, 150, 243, 0.08);
        color: #2196f3;
        &:after {
          width: 3px;
          height: 18px;
          background: #2196f3;
          border-radius: 4px;
          position: absolute;
          content: '';
          position: absolute;
          left: 4px;
          top: 9px;
        }
      }
      &:hover {
        background: rgba(33, 150, 243, 0.08);
        color: #2196f3;
        .codeSnippetOperator {
          display: flex;
        }
      }
      .ellipsis {
        padding-right: 15px;
      }
      .codeSnippetOperator {
        width: 28px;
        height: 28px;
        border-radius: 4px;
        color: #9e9e9e;
        margin-right: 4px;
        display: none;
        &:hover {
          background: #fff;
          color: #2196f3;
        }
        &.active {
          display: flex;
        }
      }
      .Menu.ming {
      }
    }
  }
  .codeSnippetRight {
    padding: 16px 0 20px 16px;
    .tagInputareaIuput {
      border: none !important;
    }
  }
  .codeSnippetFooter {
  }
  .codeSnippetNull {
    width: 120px;
    height: 120px;
    background: #f5f5f5;
    border-radius: 50%;
    font-size: 60px;
    color: #bdbdbd;
  }
`],[`
  .mui-dialog-body {
    padding-bottom: 0 !important;
  }
  .codeSnippetHeader {
    border-bottom: 1px solid #ddd;
    li {
      padding: 14px;
      font-size: 14px;
      cursor: pointer;
      position: relative;
      &:not(.active) {
        color: #333 !important;
      }
      &.active:after {
        position: absolute;
        bottom: -1px;
        left: 0;
        right: 0;
        content: '';
        height: 3px;
        background: #2196f3;
      }
    }
    .codeSnippetSearch {
      position: relative;
      .icon-search {
        position: absolute;
        top: 8px;
        left: 10px;
      }
      .icon-cancel {
        position: absolute;
        top: 8px;
        right: 10px;
        cursor: pointer;
      }
      input {
        width: 220px;
        height: 32px;
        line-height: 18px;
        background: #f5f5f5;
        border-radius: 16px;
        padding: 7px 32px 7px 32px;
        border: none;
      }
    }
  }
  .codeSnippetLeft {
    padding: 16px 0;
    width: 240px;
    border-right: 1px solid #ddd;
    .codeSnippetLangType {
      height: 36px;
      background: #f5f5f5;
      border-radius: 9px;
      padding: 2px;
      text-align: center;
      margin-right: 20px;
      > div {
        cursor: pointer;
      }
      .active {
        height: 32px;
        background: #fff;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.16);
        border-radius: 7px;
        color: #2196f3;
      }
    }
    li {
      height: 36px;
      margin-right: 20px;
      padding-left: 15px;
      position: relative;
      cursor: pointer;
      &.active {
        background: rgba(33, 150, 243, 0.08);
        color: #2196f3;
        &:after {
          width: 3px;
          height: 18px;
          background: #2196f3;
          border-radius: 4px;
          position: absolute;
          content: '';
          position: absolute;
          left: 4px;
          top: 9px;
        }
      }
      &:hover {
        background: rgba(33, 150, 243, 0.08);
        color: #2196f3;
        .codeSnippetOperator {
          display: flex;
        }
      }
      .ellipsis {
        padding-right: 15px;
      }
      .codeSnippetOperator {
        width: 28px;
        height: 28px;
        border-radius: 4px;
        color: #9e9e9e;
        margin-right: 4px;
        display: none;
        &:hover {
          background: #fff;
          color: #2196f3;
        }
        &.active {
          display: flex;
        }
      }
      .Menu.ming {
      }
    }
  }
  .codeSnippetRight {
    padding: 16px 0 20px 16px;
    .tagInputareaIuput {
      border: none !important;
    }
  }
  .codeSnippetFooter {
  }
  .codeSnippetNull {
    width: 120px;
    height: 120px;
    background: #f5f5f5;
    border-radius: 50%;
    font-size: 60px;
    color: #bdbdbd;
  }
`]),N=(0,te.ZP)(e.Z)(a),q=(0,te.ZP)(e.Z)(z),K=function(de){var U=de.projectId,pe=de.id,Y=pe===void 0?"":pe,be=de.codeName,Q=be===void 0?"":be,Le=de.code,Be=de.inputDatas,ke=de.source,Ie=ke===void 0?md.global.Account.accountId:ke,he=de.type,Re=de.onSave,ue=Re===void 0?function(){}:Re,we=de.onClose,Ee=we===void 0?function(){}:we,b=(0,m.useState)(Q),le=(0,k.Z)(b,2),ae=le[0],ve=le[1],W=(0,m.useState)(Ie),ce=(0,k.Z)(W,2),Z=ce[0],_e=ce[1],P=(0,R.vo)(U),xe=function(){r.Z[Y?"updateCodeTemplate":"createCodeTemplate"]({id:Y,name:ae,source:Z,type:Y?void 0:he,code:Le,inputDatas:Be}).then(function(tt){tt&&ue({id:Y||tt.id,name:ae,source:Z})})};return m.createElement(N,{visible:!0,overlayClosable:!1,width:640,title:Y?_l("\u7F16\u8F91\u4EE3\u7801\u7247\u6BB5"):_l("\u4FDD\u5B58\u4EE3\u7801\u7247\u6BB5"),handleClose:Ee,onOk:function(){if(!ae.trim()){alert(_l("\u4EE3\u7801\u7247\u6BB5\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"),2);return}xe()},onCancel:Ee},m.createElement("div",{className:"flexRow alignItemsCenter"},m.createElement("div",{className:"codeSnippetEditLabel"},_l("\u4EE3\u7801\u7247\u6BB5\u540D\u79F0")),m.createElement("input",{type:"text",className:"flex",value:ae,onChange:function(tt){return ve(tt.target.value)}})),m.createElement("div",{className:"flexRow alignItemsCenter mTop30"},m.createElement("div",{className:"codeSnippetEditLabel"},_l("\u4FDD\u5B58\u5230")),m.createElement("div",{className:"flex flexRow"},[{text:_l("\u4E2A\u4EBA"),value:md.global.Account.accountId},{text:_l("\u7EC4\u7EC7"),value:U,disabled:!P.isSuperAdmin&&!P.isProjectAppManager}].map(function(bt){return m.createElement(I.Z,{key:bt.value,disabled:bt.disabled,className:"mRight90",checked:Z===bt.value,text:bt.text,onClick:function(){return _e(bt.value)}})}))))},ye=function(de){var U=de.projectId,pe=de.type,Y=pe===void 0?0:pe,be=de.onSave,Q=be===void 0?function(){}:be,Le=de.onClose,Be=Le===void 0?function(){}:Le,ke=(0,m.useState)(md.global.Config.IsLocal?2:1),Ie=(0,k.Z)(ke,2),he=Ie[0],Re=Ie[1],ue=(0,m.useState)(""),we=(0,k.Z)(ue,2),Ee=we[0],b=we[1],le=(0,m.useState)(Y===2?"103":"102"),ae=(0,k.Z)(le,2),ve=ae[0],W=ae[1],ce=(0,m.useState)(!1),Z=(0,k.Z)(ce,2),_e=Z[0],P=Z[1],xe=(0,m.useState)(""),bt=(0,k.Z)(xe,2),tt=bt[0],Dt=bt[1],vn=(0,m.useState)(1),Fe=(0,k.Z)(vn,2),Bt=Fe[0],kt=Fe[1],Tt=(0,m.useState)(!1),tn=(0,k.Z)(Tt,2),Vn=tn[0],Zn=tn[1],Ot=(0,m.useState)(!0),$t=(0,k.Z)(Ot,2),cn=$t[0],Mn=$t[1],dt=(0,m.useState)([]),$e=(0,k.Z)(dt,2),jt=$e[0],rn=$e[1],Rt=(0,m.useState)(""),St=(0,k.Z)(Rt,2),zt=St[0],oa=St[1],qn=(0,m.useState)(""),In=(0,k.Z)(qn,2),Vt=In[0],Yt=In[1],qt=(0,m.useRef)(null),rt=(0,m.useRef)(null),Qe=(0,R.vo)(U),ht={0:_l("\u9009\u62E9\u4EE3\u7801\u7247\u6BB5"),1:_l("\u63D2\u5165JavaScript\u4EE3\u7801\u7247\u6BB5"),2:_l("\u63D2\u5165Python\u4EE3\u7801\u7247\u6BB5")},Lt=[{text:_l("\u7CFB\u7EDF\u9884\u8BBE"),value:1},{text:_l("\u7EC4\u7EC7"),value:2},{text:_l("\u4E2A\u4EBA"),value:3}];md.global.Config.IsLocal&&T().remove(Lt,function(pn){return pn.value===1});var Ct=(0,m.useMemo)(function(){return T().debounce(function(pn){b(pn)},300)},[]),mt=function(Rn){var fe=Rn.id,$n=Rn.name;e.Z.confirm({className:"deleteCodeSnippet",title:_l("\u60A8\u786E\u5B9A\u8981\u5220\u9664\u7247\u6BB5\u201C%0\u201D\u5417\uFF1F",$n),description:_l("\u5220\u9664\u540E\u5C06\u65E0\u6CD5\u6062\u590D"),okText:_l("\u5220\u9664"),onOk:function(){r.Z.updateCodeTemplate({id:fe,deleted:!0}).then(function(en){en&&(alert(_l("\u5220\u9664\u6210\u529F")),vt(fe))})}})},vt=function(Rn){var fe=jt.filter(function($n){return $n.id!==Rn});rn(fe),oa(fe.length?fe[0].id:"")},Xt=function(Rn){Mn(!0),r.Z.getCodeTemplateList({keyword:Ee,pageIndex:Rn,pageSize:50,source:he===1?"":he===2?U:md.global.Account.accountId,type:ve}).then(function(fe){kt(Rn),Zn(fe.length===50),Mn(!1),rn(Rn===1?fe:jt.concat(fe)),Rn===1&&fe.length&&oa(fe[0].id)})},bn=function(){Vn&&!cn&&Xt(Bt+1)};return(0,m.useEffect)(function(){oa(""),Xt(1)},[he,Ee,ve]),(0,m.useEffect)(function(){rt.current&&rt.current.setValue(zt?(T().find(jt,function(pn){return pn.id===zt})||{}).code:"")},[zt]),m.createElement(q,{visible:!0,overlayClosable:!1,type:"fixed",width:1e3,title:ht[Y],handleClose:Be,showFooter:!1},m.createElement("div",{className:"flexColumn h100"},m.createElement("div",{className:"flexRow codeSnippetHeader alignItemsCenter"},m.createElement("ul",{className:"flexRow"},Lt.map(function(pn,Rn){return m.createElement("li",{key:Rn,className:i()({"ThemeColor3 active":he===pn.value}),onClick:function(){rn([]),Re(pn.value)}},m.createElement("span",{className:"bold"},pn.text))})),m.createElement("div",{className:"flex"}),m.createElement("div",{className:"codeSnippetSearch"},m.createElement("i",{className:"icon-search Font16 Gray_9e"}),m.createElement("input",{type:"text",placeholder:_l("\u641C\u7D22"),ref:qt,onChange:function(Rn){return Ct(Rn.target.value)}}),Ee&&m.createElement("i",{className:"icon-cancel Font16 Gray_9e ThemeHoverColor3",onClick:function(){b(""),qt.current.value=""}}))),m.createElement("div",{className:"flex flexRow"},m.createElement("div",{className:"codeSnippetLeft flexColumn"},Y===0&&m.createElement("div",{className:"codeSnippetLangType flexRow alignItemsCenter mBottom16"},[{text:"JavaScript",value:"102"},{text:"Python",value:"103"}].map(function(pn){return m.createElement("div",{key:pn.value,className:i()("flex flexRow alignItemsCenter justifyContentCenter",{active:ve===pn.value}),onClick:function(){rn([]),W(pn.value)}},pn.text)})),m.createElement(Ce.Z,{className:"flex",onScrollEnd:bn},m.createElement("ul",null,jt.map(function(pn){return m.createElement("li",{key:pn.id,className:i()("flexRow alignItemsCenter",{active:pn.id===zt}),onClick:function(){return oa(pn.id)}},m.createElement("div",{className:"ellipsis flex"},pn.name),(he===3||he===2&&(Qe.isSuperAdmin||Qe.isProjectAppManager))&&m.createElement(E.Z,{popupVisible:tt===pn.id,onPopupVisibleChange:function(fe){Dt(fe?pn.id:"")},action:["click"],popup:function(){return m.createElement(j.Z,null,m.createElement(L.Z,{onClick:function(){Dt(""),Yt(pn.id)}},_l("\u7F16\u8F91")),m.createElement(L.Z,{onClick:function(){Dt(""),mt(pn)}},_l("\u5220\u9664")))},popupAlign:{points:["tl","bl"],offset:[1,1],overflow:{adjustX:!0,adjustY:!0}}},m.createElement("div",{className:i()("codeSnippetOperator flexRow alignItemsCenter justifyContentCenter",{active:tt===pn.id})},m.createElement("i",{className:"icon-moreop Font16"}))))})),cn&&m.createElement(Ne.Z,{className:"mTop10"}))),m.createElement("div",{className:"codeSnippetRight flex flexColumn"},jt.length?m.createElement(Ce.Z,{className:"flex"},m.createElement(C.Z,{defaultValue:zt?(T().find(jt,function(pn){return pn.id===zt})||{}).code:"",codeMirrorMode:"javascript",getRef:function(Rn){return rt.current=Rn},lineNumbers:!0,readonly:!0,maxHeight:!0})):m.createElement("div",{className:"flex flexColumn alignItemsCenter justifyContentCenter"},m.createElement("div",{className:"codeSnippetNull flexRow alignItemsCenter justifyContentCenter"},m.createElement("i",{className:"icon-url"})),m.createElement("div",{className:"mTop20"},Ee?m.createElement(m.Fragment,null,_l("\u672A\u641C\u7D22\u5230"),m.createElement("span",{className:"ThemeColor3"},' "',Ee,'" '),_l("\u76F8\u5173\u7684\u4EE3\u7801\u7247\u6BB5")):_l("\u65E0\u4EE3\u7801\u7247\u6BB5"))),m.createElement("div",{className:"codeSnippetFooter mTop20 flexRow alignItemsCenter"},Y!==0&&!!jt.length&&m.createElement(Te.Z,{className:"InlineBlock",text:_l("\u4F7F\u7528\u65F6\u6E05\u7A7A\u73B0\u6709input\u53C2\u6570\u4E0E\u4EE3\u7801\u5757"),checked:_e,onClick:function(Rn){return P(!Rn)}}),m.createElement("div",{className:"flex"}),m.createElement(h.ZP,{type:"link",onClick:Be},_l("\u53D6\u6D88")),m.createElement(h.ZP,{className:"mLeft15",type:"primary",disabled:!zt,onClick:function(){var Rn=T().find(jt,function(fe){return fe.id===zt})||{};Q({actionId:ve,clearParams:_e,inputData:Rn.inputData,code:Rn.code})}},_l("\u786E\u8BA4")))))),!!Vt&&m.createElement(K,{projectId:U,id:Vt,codeName:jt.find(function(pn){return pn.id===Vt}).name,source:jt.find(function(pn){return pn.id===Vt}).source,onSave:function(Rn){var fe=Rn.id,$n=Rn.name,gn=Rn.source;Yt(""),gn===md.global.Account.accountId&&he!==3||gn===U&&he!==2?vt(fe):rn(jt.map(function(en){return en.id===fe&&(en.name=$n),en}))},onClose:function(){return Yt("")}}))};ye.propTypes={projectId:me.string.isRequired,type:me.number,onSave:me.func,onClose:me.func};const v=ye},22760:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>Rn});var h=t(8177),Te=t.n(h),C=t(70264),Ce=t(88106),Ne=t(52945),j=t.n(Ne),L=t(85315),I=t(69288),k=t(88239),e=t(85105),oe=t.n(e),m=t(99663),y=t(22600),i=t(49135),me=t(93196),J=t(86735),T=t(67294),te=t(87506),E=t.n(te),r=t(45697),R=t.n(r),a=t(71893),z=t(44894),N=t(93967),q=t.n(N),K=t(14440),ye=t(45371),v=t(42638),se=t(45231),de=t(5631),U=t(10502),pe=t(93307),Y=t(1952);const be=null;var Q=function($n){return(0,Y.Z)(pe.Z,$n)},Le=t(35408),Be=t(58002),ke=t(15742),Ie=t(89499),he=t(62521),Re=t(16469),ue=t(63239),we=t.n(ue),Ee=t(54208),b=t(33867),le=t(12424),ae=t(13476),ve=t(75599),W=t(15577),ce=t(77863),Z=t(71129),_e=t(96486),P=t.n(_e),xe=(0,J.Z)([`
  position: relative;
  .ming.printMenu {
    width: 280px;
    margin-top: 4px;
    .split {
      color: #999;
      font-size: 12px;
      margin: 12px 16px 6px;
    }
    .empty {
      margin: 20px;
      text-align: center;
    }
    .detail {
      position: absolute;
      right: 16px;
      color: #9e9e9e;
      font-size: 12px;
    }
    hr {
      border: none;
      border-top: 1px solid #eaeaea;
    }
    .ming.Item .Item-content .templateName {
      display: inline-block;
      max-width: 142px;
    }
    .ming.Item .Item-content .Icon {
      left: 16px;
    }
    .ming.Item .Item-content .fileIcon {
      width: 13px;
      height: 15px;
      position: absolute;
      margin-top: 10px;
      left: 16px;
    }
    .Item.noIcon .Item-content {
      padding-left: 16px !important;
    }
    &.ming .Item .Item-content {
      padding-left: 44px;
    }
    &.ming .Item .Item-content:hover .detail {
      color: #fff;
    }
  }
`],[`
  position: relative;
  .ming.printMenu {
    width: 280px;
    margin-top: 4px;
    .split {
      color: #999;
      font-size: 12px;
      margin: 12px 16px 6px;
    }
    .empty {
      margin: 20px;
      text-align: center;
    }
    .detail {
      position: absolute;
      right: 16px;
      color: #9e9e9e;
      font-size: 12px;
    }
    hr {
      border: none;
      border-top: 1px solid #eaeaea;
    }
    .ming.Item .Item-content .templateName {
      display: inline-block;
      max-width: 142px;
    }
    .ming.Item .Item-content .Icon {
      left: 16px;
    }
    .ming.Item .Item-content .fileIcon {
      width: 13px;
      height: 15px;
      position: absolute;
      margin-top: 10px;
      left: 16px;
    }
    .Item.noIcon .Item-content {
      padding-left: 16px !important;
    }
    &.ming .Item .Item-content {
      padding-left: 44px;
    }
    &.ming .Item .Item-content:hover .detail {
      color: #fff;
    }
  }
`]),bt=(0,J.Z)([`
  max-height: 360px;
  overflow-x: hidden;
  overflow-y: auto;
`],[`
  max-height: 360px;
  overflow-x: hidden;
  overflow-y: auto;
`]),tt=a.ZP.div(xe),Dt=a.ZP.div(bt),vn=[{name:_l("\u6253\u5370\u4E8C\u7EF4\u7801%02056"),printType:1},{name:_l("\u6253\u5370\u6761\u5F62\u7801%02057"),printType:3}];function Fe(fe){var $n=fe.isCharge,gn=fe.showCodePrint,en=fe.appId,_t=fe.projectId,nn=fe.worksheetId,Gt=fe.viewId,xt=fe.controls,Mt=fe.selectedRows,ze=fe.selectedRowIds,yt=fe.allowLoadMore,Ut=fe.count,Wt=fe.filterControls,kn=fe.fastFilters,on=fe.navGroupFilters,En=(0,T.useState)(!0),fn=(0,le.Z)(En,2),jn=fn[0],Ta=fn[1],zn=(0,T.useState)(!1),pa=(0,le.Z)(zn,2),Ea=pa[0],la=pa[1],Kn=(0,T.useState)(fe.templateList||[]),sa=(0,le.Z)(Kn,2),ba=sa[0],Fa=sa[1],wa=(0,W.XH)(_t,ce.UU.wordPrintTemplate);function Na(){Ta(!0),se.Z.getPrintList({worksheetId:nn,viewId:Gt,rowIds:ze}).then(function(ya){Ta(!1),Fa(yt?ya.filter(function(An){return An.type>2&&An.type!==5&&!An.disabled}).sort(function(An,ma){return Z.fC[P().findKey(Z.bU,function(fa){return fa===An.type})]-Z.fC[P().findKey(Z.bU,function(fa){return fa===ma.type})]}):ya.filter(function(An){return An.type>=2&&!An.disabled}).sort(function(An,ma){return console.log(P().findKey(Z.bU,function(fa){return fa===An.type})),Z.fC[P().findKey(Z.bU,function(fa){return fa===An.type})]-Z.fC[P().findKey(Z.bU,function(fa){return fa===ma.type})]}))})}(0,T.useEffect)(function(){fe.templateList&&Fa(fe.templateList)},[fe.templateList]),(0,T.useEffect)(function(){Ea&&!fe.templateList&&Na()},[Ea]);function Za(){var ya=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},An=ya.id,ma=ya.printType,fa=ma===void 0?1:ma;if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}var Ma=!window.isChrome&&!window.isFirefox&&!window.isSafari;if(window.isMDClient){alert("\u5BA2\u6237\u7AEF\u4E0D\u652F\u6301\u6B64\u529F\u80FD\uFF0C\u8BF7\u4F7F\u7528Chrome\u3001Firefox\u6216\u5176\u4ED6\u56FD\u4EA7\u6D4F\u89C8\u5668",3);return}if(Ma){alert("\u5F53\u524D\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u6B64\u529F\u80FD\uFF0C\u8BF7\u4F7F\u7528Chrome\u3001Firefox\u6216\u5176\u4ED6\u56FD\u4EA7\u6D4F\u89C8\u5668",3);return}An?(0,Le.$w)({templateId:An,appId:en,worksheetId:nn,viewId:Gt,projectId:_t,selectedRows:Mt,controls:xt,count:Ut,allowLoadMore:yt,filterControls:Wt,fastFilters:kn,navGroupFilters:on}):(0,Le.VN)({isCharge:$n,printType:fa,appId:en,viewId:Gt,worksheetId:nn,projectId:_t,worksheetName:name,controls:xt,selectedRows:Mt,count:Ut,allowLoadMore:yt,filterControls:Wt,fastFilters:kn,navGroupFilters:on,onClose:function(){fe.templateList||Na()}})}return T.createElement(tt,null,T.createElement(Be.Z,{icon:"print",textCmp:function(){return T.createElement(T.Fragment,null,_l("\u6253\u5370"),T.createElement(b.Z,{icon:"arrow-down-border",className:"printDownIcon"}))},onClick:function(){return la(!0)}}),Ea&&T.createElement(he.Z,{className:"printMenu",onClickAwayExceptions:[".doNotTriggerClickAway"],onClickAway:function(){return la(!1)}},T.createElement(Dt,null,jn&&T.createElement(Ee.Z,{size:"small"}),!jn&&!!wa&&ba.length===0&&!gn&&T.createElement("div",{className:"Gray_bd Font13 LineHeight36 pLeft16"},_l("\u6682\u65E0\u53EF\u7528\u6A21\u7248")),!jn&&!!wa&&ba.map(function(ya,An){return T.createElement(Re.Z,{key:An,icon:[2,5].includes(ya.type)?T.createElement("span",{className:Z.YC[ya.type].fileIcon+" fileIcon"}):T.createElement(b.Z,{icon:(0,ae.Uc)(ya).icon,className:"Font18"}),onClick:function(){if(P().includes([3,4],ya.type)){var fa=ya.type===3?"printQRCode":"printBarCode";(0,W.Ye)(fa,nn,{printId:ya.id,msg:[yt?Ut:Mt.length]}),Za({id:ya.id,printType:ya.type===3?1:3})}else{if(wa==="2"){(0,W.j0)(_t,ce.UU.wordPrintTemplate);return}var Ma=ya.id,Ya={printId:Ma,isDefault:!1,worksheetId:nn,projectId:_t,rowId:ze.join(","),getType:1,viewId:Gt,appId:en,name:ya.name,isBatch:!0,fileTypeNum:ya.type,allowDownloadPermission:ya.allowDownloadPermission},Ba=Math.random().toString(36).substring(2);ve.Z.add({key:""+Ba,value:we()(Ya)}),window.open((window.subPath||"")+"/printForm/"+en+"/worksheet/preview/print/"+Ba),la(!1)}}},T.createElement("span",{className:"templateName ellipsis"},ya.name||ya.formName||_l("\u672A\u547D\u540D")),P().includes([3,4],ya.type)&&T.createElement("span",{className:"detail"},(0,ae.Uc)(ya).text))})),!!gn&&!!ba.length&&T.createElement(T.Fragment,null,T.createElement("hr",null),T.createElement("div",{className:"split"},_l("\u7CFB\u7EDF\u9ED8\u8BA4\u6253\u5370"))),!!gn&&vn.map(function(ya,An){return T.createElement(Re.Z,{key:An,className:"noIcon",onClick:function(){return Za({printType:ya.printType})}},ya.name)})))}var Bt=t(87468),kt=t(2591),Tt=t(70973),tn=t(31742),Vn=t(76345),Zn=(0,J.Z)([`
  position: relative;
  .ming.exportMenu {
    width: 280px;
    margin-top: 4px;
  }
`],[`
  position: relative;
  .ming.exportMenu {
    width: 280px;
    margin-top: 4px;
  }
`]),Ot=a.ZP.div(Zn),$t=[{name:_l("\u5BFC\u51FA\u8BB0\u5F55")+"\uFF08Excel\uFF0CCSV\uFF09",icon:"new_excel",exportType:1},{name:_l("\u5BFC\u51FA\u9644\u4EF6"),icon:"attachment",exportType:2}];function cn(fe){var $n=fe.isCharge,gn=fe.permissionType,en=fe.count,_t=fe.allWorksheetIsSelected,nn=fe.appId,Gt=fe.view,xt=fe.worksheetId,Mt=fe.filters,ze=fe.sheetSwitchPermit,yt=fe.selectedRows,Ut=yt===void 0?[]:yt,Wt=fe.controls,kn=fe.worksheetInfo,on=kn===void 0?{}:kn,En=fe.rowsSummary,fn=fe.quickFilter,jn=fe.sortControls,Ta=fe.filtersGroup,zn=fe.navGroupFilters,pa=on.downLoadUrl,Ea=on.projectId,la=(0,T.useState)(!1),Kn=(0,le.Z)(la,2),sa=Kn[0],ba=Kn[1],Fa=$n||(0,Tt.g9)(gn)?Wt.filter(function(Na){return Na.type===14}):(0,Ie.P7)(Wt,Gt.controls).filter(function(Na){var Za=Na.controlPermissions||"111",ya=Na.fieldPermission||"111";return Na.type===14&&ya[0]==="1"&&Za[0]==="1"}),wa=(0,W.XH)(Ea,ce.UU.batchDownloadFiles);return(0,T.useEffect)(function(){},[]),T.createElement(Ot,null,T.createElement(Be.Z,{icon:"file_download",textCmp:function(){return T.createElement(T.Fragment,null,_l("\u5BFC\u51FA"),T.createElement(b.Z,{icon:"arrow-down-border",className:"printDownIcon"}))},onClick:function(){return ba(!0)}}),sa&&T.createElement(he.Z,{className:"exportMenu",onClickAwayExceptions:[".doNotTriggerClickAway"],onClickAway:function(){return ba(!1)}},$t.map(function(Na,Za){if(!(Na.exportType===2&&P().isEmpty(Fa)))return T.createElement(Re.Z,{key:Za,className:"noIcon",icon:T.createElement(b.Z,{icon:Na.icon}),onClick:function(){if(ba(!1),window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}var An=$n||(0,Tt.g9)(gn);if(Na.exportType===1)(0,Bt.O)({allCount:en,allWorksheetIsSelected:_t,appId:nn,exportView:Gt,worksheetId:xt,projectId:Ea,searchArgs:Mt,sheetSwitchPermit:ze,selectRowIds:Ut.map(function(fa){return fa.rowid}),columns:An?Wt.filter(function(fa){return fa.controlId!=="rowid"}):(0,Ie.P7)(Wt,Gt.controls,!1).filter(function(fa){return(fa.controlPermissions&&fa.controlPermissions[0]==="1"||!fa.controlPermissions)&&fa.controlId!=="rowid"}),downLoadUrl:pa,worksheetSummaryTypes:En.types,quickFilter:fn,filtersGroup:Ta,navGroupFilters:zn,sortControls:jn,isCharge:An,hideStatistics:!0});else{var ma=(0,tn.v)(Vn.RX.recordAttachmentSwitch,ze,Gt.viewId);if(!ma)return alert(_l("\u65E0\u9644\u4EF6\u4E0B\u8F7D\u6743\u9650\uFF0C\u65E0\u6CD5\u5BFC\u51FA"),2);if(wa==="2"){(0,W.j0)(Ea,ce.UU.batchDownloadFiles);return}(0,kt._)({appId:nn,worksheetId:xt,viewId:Gt.viewId,attachmentControls:Fa,selectRowIds:Ut.map(function(fa){return fa.rowid}),quickFilter:fn,searchArgs:Mt,filtersGroup:Ta,navGroupFilters:zn,isCharge:$n||(0,Tt.g9)(gn)})}}},T.createElement("span",null,Na.name))})))}var Mn=t(70450),dt=t(42723),$e=t(29314),jt=(0,J.Z)([`
  display: inline-block;
  .dropIcon {
  }
`],[`
  display: inline-block;
  .dropIcon {
  }
`]),rn=a.ZP.div(jt);function Rt(fe){var $n=fe.text,gn=fe.icon,en=fe.children,_t=fe.popupAlign,nn=fe.list,Gt=nn===void 0?[]:nn,xt=(0,dt.Z)(fe,["text","icon","children","popupAlign","list"]),Mt=(0,T.useState)(!1),ze=(0,le.Z)(Mt,2),yt=ze[0],Ut=ze[1];return T.createElement(rn,xt,T.createElement($e.Z,{popupVisible:yt,action:["click"],popupAlign:_t||{points:["tl","bl"],overflow:{adjustX:!0,adjustY:!0}},popup:T.createElement(he.Z,{className:"Relative",style:{width:140},onClickAway:function(){return Ut(!1)}},Gt.map(function(Wt,kn){return T.createElement(Re.Z,{key:kn,onClick:function(){Wt.onClick(),Ut(!1)}},T.createElement(Mn.Z,{icon:Wt.icon,iconSize:18,text:Wt.text,textSize:13}))})),onPopupVisible:Ut},T.createElement("div",{onClick:function(){Ut(!0)}},en||T.createElement(Be.Z,{icon:gn,text:T.createElement("span",null,$n," ",T.createElement("i",{className:"dropIcon icon-arrow-down-border"}))}))))}var St=t(40240),zt=t(4923),oa=(0,J.Z)([`
  display: flex;
  align-items: center;
  margin-left: 12px;
  padding-left: 12px;
  overflow: hidden;
  &:before {
    content: ' ';
    display: inline-block;
    position: relative;
    left: -12px;
    width: 1px;
    height: 13px;
    background-color: #ddd;
  }
`],[`
  display: flex;
  align-items: center;
  margin-left: 12px;
  padding-left: 12px;
  overflow: hidden;
  &:before {
    content: ' ';
    display: inline-block;
    position: relative;
    left: -12px;
    width: 1px;
    height: 13px;
    background-color: #ddd;
  }
`]),qn=(0,J.Z)([`
  height: 28px;
  padding: 0 11px;
  line-height: 30px;
  border-radius: 4px;
  font-size: 13px;
  color: #757575;
  cursor: pointer;
  .icon {
    color: #9d9d9d;
    margin-left: 3px;
  }
  &:hover {
    background: #f5f5f5;
  }
`],[`
  height: 28px;
  padding: 0 11px;
  line-height: 30px;
  border-radius: 4px;
  font-size: 13px;
  color: #757575;
  cursor: pointer;
  .icon {
    color: #9d9d9d;
    margin-left: 3px;
  }
  &:hover {
    background: #f5f5f5;
  }
`]),In=a.ZP.div(oa),Vt=a.ZP.span(qn);function Yt(fe){var $n=fe.icon,gn=fe.name,en=void 0,_t=document.createElement("div");return _t.style.visibility="hidden",_t.style.display="inline-block",_t.innerHTML=`<div style="display: inline-block; margin: 0 12px; white-space: nowrap;">
    <span class="icon icon-`+($n||"custom_actions")+`" style="margin: 0 2px;font-size: 18px;"></span>
    <span  style="font-size: 13px;">`+gn+`</span>
  </div>`,document.body.appendChild(_t),en=_t.clientWidth,document.body.removeChild(_t),en}function qt(fe){var $n=fe.isCharge,gn=fe.count,en=fe.width,_t=fe.appId,nn=fe.viewId,Gt=fe.recordId,xt=fe.projectId,Mt=fe.worksheetId,ze=fe.selectedRows,yt=fe.isAll,Ut=fe.buttons,Wt=fe.handleTriggerCustomBtn,kn=fe.handleUpdateWorksheetRow,on=fe.onUpdateRow,En=(0,T.useState)(!1),fn=(0,le.Z)(En,2),jn=fn[0],Ta=fn[1],zn=P().sum(Ut.map(Yt)),pa=1;if(zn<en)pa=Ut.length;else for(;pa<=Ut.length&&P().sum(Ut.slice(0,pa+1).map(Yt))<en-64;)pa+=1;var Ea={isFromBatchEdit:!0,count:gn,appId:_t,viewId:nn,recordId:Gt,projectId:xt,worksheetId:Mt,selectedRows:ze,isAll:yt,handleTriggerCustomBtn:Wt,handleUpdateWorksheetRow:kn,onUpdateRow:on};return T.createElement(In,null,T.createElement(zt.Z,(0,k.default)({isCharge:$n,hideDisabled:!0,isBatchOperate:ze.length>1||yt,type:"iconText"},Ea,{buttons:Ut.slice(0,pa)})),pa<Ut.length&&T.createElement($e.Z,{popupVisible:jn,zIndex:1e3,action:["click"],popupAlign:{points:["tr","br"],overflow:{adjustX:!0}},destroyPopupOnHide:!0,onPopupVisibleChange:function(){return Ta(!0)},popup:T.createElement(he.Z,{style:{position:"relative"},onClickAway:function(){return Ta(!1)},onClickAwayExceptions:[".mdModalWrap",".mui-dialog-container",".dropdownTrigger",".addFilterPopup",".filterControlOptionsList",".mui-datetimepicker",".mui-datetimerangepicker",".selectUserBox",".worksheetFilterOperateList",".ant-select-dropdown",".ant-picker-dropdown",".rc-trigger-popup","#dialogSelectDept_container",".CityPicker",".CityPicker-wrapper"]},T.createElement(zt.Z,(0,k.default)({isCharge:$n,hideDisabled:!0,isBatchOperate:ze.length>1||yt,type:"menu",icon:!0},Ea,{buttons:Ut.slice(pa)})))},T.createElement(Vt,null,_l("\u66F4\u591A"),T.createElement("i",{className:"icon icon-arrow-down-border"}))))}qt.propTypes={width:r.number,count:r.number,appId:r.string,viewId:r.string,projectId:r.string,worksheetId:r.string,recordId:r.string,selectedRows:(0,r.arrayOf)((0,r.shape)({})),isAll:r.bool,buttons:(0,r.arrayOf)((0,r.shape)({})),onUpdateRow:r.func,handleTriggerCustomBtn:r.func,handleUpdateWorksheetRow:r.func};const rt=(0,St.Z)(qt);var Qe,ht,Lt,Ct,mt,vt=(0,J.Z)([`
  display: flex;
  flex-direction: row;
  align-items: center;
  .icon {
    margin-right: 8px;
    font-size: 16px;
    color: #f44336;
  }
`],[`
  display: flex;
  flex-direction: row;
  align-items: center;
  .icon {
    margin-right: 8px;
    font-size: 16px;
    color: #f44336;
  }
`]);function Xt(fe,$n,gn,en,_t){var nn={};return Object.keys(en).forEach(function(Gt){nn[Gt]=en[Gt]}),nn.enumerable=!!nn.enumerable,nn.configurable=!!nn.configurable,("value"in nn||nn.initializer)&&(nn.writable=!0),nn=gn.slice().reverse().reduce(function(Gt,xt){return xt(fe,$n,Gt)||Gt},nn),_t&&nn.initializer!==void 0&&(nn.value=nn.initializer?nn.initializer.call(_t):void 0,nn.initializer=void 0),nn.initializer===void 0&&(Object.defineProperty(fe,$n,nn),nn=null),nn}var bn=a.ZP.div(vt),pn=(Lt=(mt=Ct=function(fe){(0,me.default)($n,fe);function $n(gn){(0,m.default)(this,$n);var en=(0,i.default)(this,($n.__proto__||oe()($n)).call(this,gn));return en.state={loading:!0,select1000:!1,customButtonExpanded:!1,customButtonLoading:!1,customButtons:[],templateList:[]},en}return(0,y.default)($n,[{key:"componentWillReceiveProps",value:function(en){var _t=this.props,nn=_t.appId,Gt=_t.worksheetId,xt=_t.viewId,Mt=_t.permission,ze=_t.updateViewPermission;(en.worksheetId!==this.props.worksheetId||en.viewId!==this.props.viewId)&&this.setState({customButtons:[]});var yt=!1,Ut=en.selectedRows.length===1&&en.selectedRows[0],Wt=this.props.selectedRows.length===1&&this.props.selectedRows[0],kn=void 0;!Wt&&Ut||Wt&&Ut&&Wt.rowid!==Ut.rowid?(kn=Ut.rowid,yt=!0):Wt&&!Ut&&en.selectedRows.length&&(yt=!0),en.viewId===this.props.viewId&&en.selectedLength&&!this.props.selectedLength&&(yt=!0,this.setState({loading:!1}),P().isEmpty(Mt)&&ze({appId:nn,worksheetId:Gt,viewId:xt})),yt&&this.loadCustomButtons(kn)}},{key:"loadCustomButtons",value:function(en){var _t=this,nn=this.props,Gt=nn.appId,xt=nn.worksheetId,Mt=nn.viewId;this.setState({customButtonLoading:!0}),Mt&&se.Z.getWorksheetBtns({appId:Gt,worksheetId:xt,viewId:Mt,rowId:en}).then(function(ze){_t.setState({customButtonLoading:!1,customButtons:(0,Ie.QE)(Gt,ze).filter(function(yt){return yt.clickType===ke.Pd.IMMEDIATELY||yt.clickType===ke.Pd.CONFIRM||yt.writeObject===1&&yt.writeType===1})})})}},{key:"triggerCustomBtn",value:function(en,_t){var nn=this.props,Gt=nn.worksheetId,xt=nn.viewId,Mt=nn.selectedRows,ze=nn.filters,yt=nn.quickFilter,Ut=nn.navGroupFilters,Wt=nn.clearSelect,kn=ze.filterControls,on=ze.keyWords,En=ze.searchType,fn={isAll:_t};_t&&(fn=(0,k.default)({},fn,{viewId:xt,filterControls:kn,keyWords:on,navGroupFilters:Ut}),fn.fastFilters=(P().isArray(yt)?yt:[]).map(function(jn){return P().pick(jn,["controlId","dataType","spliceType","filterType","dateRange","value","values","minValue","maxValue"])})),En===2&&(fn.filterControls=[{controlId:"ownerid",dataType:26,filterType:2,spliceType:1,values:[md.global.Account.accountId]}]),v.Z.startProcess((0,k.default)({appId:Gt,sources:Mt.map(function(jn){return jn.rowid}),triggerId:en.btnId,pushUniqueId:P().get(window,"md.global.Config.pushUniqueId")},fn)).then(function(jn){jn||K.Z.error({title:_l('\u6279\u91CF\u64CD\u4F5C"%0"',en.name),description:_l("\u5931\u8D25\uFF0C\u6240\u6709\u8BB0\u5F55\u90FD\u4E0D\u6EE1\u8DB3\u6267\u884C\u6761\u4EF6\uFF0C\u6216\u6D41\u7A0B\u5C1A\u672A\u542F\u7528"),duration:3})})}},{key:"handleTriggerCustomBtn",value:function(en){var _t=this,nn=this.props,Gt=nn.allWorksheetIsSelected,xt=nn.selectedLength;en.clickType===ke.Pd.IMMEDIATELY?this.triggerCustomBtn(en,Gt):en.clickType===ke.Pd.CONFIRM&&I.Z.confirm({className:"customButtonConfirm",title:en.confirmMsg,okText:en.sureName,cancelText:en.cancelName,onOk:function(){_t.triggerCustomBtn(en,Gt)}})}},{key:"handleUpdateWorksheetRow",value:function(en){var _t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},nn=this.props,Gt=nn.appId,xt=nn.worksheetId,Mt=nn.viewId,ze=nn.filters,yt=nn.quickFilter,Ut=nn.navGroupFilters,Wt=nn.allWorksheetIsSelected,kn=nn.selectedRows,on=nn.worksheetInfo,En=nn.clearSelect,fn=nn.reload,jn=nn.updateRows,Ta=nn.getWorksheetSheetViewSummary,zn=nn.refreshWorksheetControls,pa=kn.map(function(sa){return sa.rowid}),Ea=pa.length===1&&!Wt,la=pa.length===1?en.newOldControl:en.newOldControl.filter(function(sa){return!(0,Ie.hB)(sa.value)});delete en.newOldControl;var Kn=(0,k.default)({},en,{appId:Gt,viewId:Mt,worksheetId:xt,rowIds:pa,controls:la});Ea&&(Kn.newOldControl=la,Kn.rowId=pa[0],delete Kn.controls,delete Kn.rowIds),Wt&&(delete en.rowIds,Kn.isAll=!0,Kn.excludeRowIds=kn.map(function(sa){return sa.rowid}),Kn.filterControls=ze.filterControls,Kn.keyWords=ze.keyWords,Kn.searchType=ze.searchType,Kn.fastFilters=(yt||[]).map(function(sa){return P().pick(sa,["controlId","dataType","spliceType","filterType","dateRange","value","values","minValue","maxValue"])}),Kn.navGroupFilters=Ut),(Ea?se.Z.updateWorksheetRow:se.Z.updateWorksheetRows)(Kn).then(function(sa){_t(),(Ea?sa.resultCode===1:sa.successCount===kn.length)&&!en.noAlert?alert(_l("\u4FEE\u6539\u6210\u529F")):Ea&&sa.resultCode!==1&&(0,Ie.a)(sa.resultCode),!(sa.resultCode!==1&&!sa.isSuccess)&&(P().find(la,function(ba){return P().includes([10,11],ba.type)&&/color/.test(ba.value)})&&zn(),Wt||en.hasFilters||P().find(la,function(ba){return ba.type===29})?fn():jn(pa,[{}].concat((0,L.Z)(la)).reduce(function(ba,Fa){return j()({},ba,(0,Ce.default)({},Fa.controlId,Fa.value))})),Ta())})}},{key:"handlePrintQrCode",value:function(){var en=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_t=en.printType,nn=_t===void 0?1:_t,Gt=this.props.isCharge;if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}var xt=this.props,Mt=xt.appId,ze=xt.viewId,yt=xt.controls,Ut=xt.selectedRows,Wt=xt.worksheetInfo,kn=Wt.projectId,on=Wt.worksheetId,En=Wt.name,fn=!window.isChrome&&!window.isFirefox&&!window.isSafari;if(window.isMDClient){alert("\u5BA2\u6237\u7AEF\u4E0D\u652F\u6301\u6B64\u529F\u80FD\uFF0C\u8BF7\u4F7F\u7528Chrome\u3001Firefox\u6216\u5176\u4ED6\u56FD\u4EA7\u6D4F\u89C8\u5668",3);return}if(fn){alert("\u5F53\u524D\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u6B64\u529F\u80FD\uFF0C\u8BF7\u4F7F\u7528Chrome\u3001Firefox\u6216\u5176\u4ED6\u56FD\u4EA7\u6D4F\u89C8\u5668",3);return}(0,Le.VN)((0,k.default)({isCharge:Gt,printType:nn,appId:Mt,viewId:ze,worksheetId:on,projectId:kn,worksheetName:En,controls:yt,selectedRows:Ut},this.getFilterArgs()))}},{key:"findLastId",value:function(en){var _t=this.props.rows,nn=en.map(function(Gt){return P().findIndex(_t,function(xt){return xt.rowid===Gt})});return _t[P().max(nn)].rowid}},{key:"getFilterArgs",value:function(){var en=this.props,_t=en.filters,nn=_t===void 0?{}:_t,Gt=en.quickFilter,xt=en.navGroupFilters;return{filterControls:nn.filterControls,fastFilters:Gt,navGroupFilters:xt}}},{key:"render",value:function(){var en=this,_t=this.props,nn=_t.type,Gt=_t.isCharge,xt=_t.pageSize,Mt=_t.appId,ze=_t.worksheetId,yt=_t.viewId,Ut=_t.rows,Wt=_t.view,kn=_t.controls,on=_t.filters,En=_t.quickFilter,fn=_t.navGroupFilters,jn=_t.worksheetInfo,Ta=_t.count,zn=_t.selectedRows,pa=_t.selectedLength,Ea=_t.allWorksheetIsSelected,la=_t.permission,Kn=_t.clearSelect,sa=_t.sheetSwitchPermit,ba=_t.refresh,Fa=_t.addRecord,wa=_t.setHighLightOfRows,Na=_t.permissionType,Za=_t.isLock,ya=this.props,An=ya.reload,ma=ya.updateRows,fa=ya.hideRows,Ma=ya.getWorksheetSheetViewSummary,Ya=jn.projectId,Ba=jn.entityName,La=this.state,Qa=La.loading,nr=La.select1000,Rr=La.customButtonLoading,hr=La.templateList,yr=this.state.customButtons;yr=yr.filter(function(ja){return!ja.disabled});var br=zn.length===1&&zn[0],Lr=(0,tn.v)(Vn.RX.export,sa,yt),lr=(0,tn.v)(Vn.RX.execute,sa,yt)&&!Rr&&!!yr.length,Or=(0,tn.v)(Vn.RX.delete,sa,yt)&&la&&la.canRemove&&(!br||br.allowdelete),Vr=!P().isEmpty(la)&&la.canEdit&&(0,tn.v)(Vn.RX.batchEdit,sa,yt),Kr=!P().isEmpty(la)&&la.canEdit&&(0,tn.v)(Vn.RX.copy,sa,yt),Br=(0,tn.v)(Vn.RX.QrCodeSwitch,sa,yt),kr=T.createElement("div",{className:"selected"},T.createElement("span",{className:"selectedStatus"},Ea?_l(nr?"\u5DF2\u9009\u62E9 "+md.global.SysSettings.worktableBatchOperateDataLimitCount+" \u6761\u6570\u636E":'\u5DF2\u9009\u62E9"'+Wt.name+'"\u6240\u6709 %0 \u6761%1',pa,Ba):_l("\u5DF2\u9009\u62E9\u672C\u9875 %0 \u6761%1",pa,Ba)));return T.createElement(E(),{transitionName:"batchOperateCon",transitionEnterTimeout:500,transitionLeaveTimeout:300},!!pa&&Ut.length&&!Qa&&!P().isEmpty(la)&&T.createElement("div",{className:q()("batchOperateCon",{single:nn==="single"})},nn!=="single"&&kr,T.createElement("div",{className:"operate flexRow"},nn==="single"&&kr,la&&Vr&&(!br||br.allowedit)&&T.createElement(Be.Z,{icon:"hr_edit",text:_l("\u7F16\u8F91"),onClick:function(){var ur=en;if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}function vr(){(0,U.V)({appId:Mt,viewId:yt,projectId:Ya,view:Wt,worksheetId:ze,searchArgs:on,quickFilter:En,navGroupFilters:fn,allWorksheetIsSelected:Ea,updateRows:ma,getWorksheetSheetViewSummary:Ma,reloadWorksheet:function(){An(),ur.setState({select1000:!1})},selectedRows:zn,worksheetInfo:jn})}pa>md.global.SysSettings.worktableBatchOperateDataLimitCount?I.Z.confirm({title:T.createElement("span",{style:{fontWeight:500,lineHeight:"1.5em"}},_l("\u6700\u5927\u652F\u6301\u6279\u91CF\u6267\u884C%0\u884C\u8BB0\u5F55\uFF0C\u662F\u5426\u53EA\u9009\u4E2D\u5E76\u6267\u884C\u524D%0\u884C\u6570\u636E\uFF1F",md.global.SysSettings.worktableBatchOperateDataLimitCount)),onOk:function(){en.setState({select1000:!0}),vr()}}):vr()}}),!Ea&&la&&Kr&&(!br||br.allowedit)&&T.createElement(Be.Z,{icon:"copy",text:_l("\u590D\u5236"),onClick:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}if(zn.length>20){alert(_l("\u6279\u91CF\u590D\u5236\u4E0D\u80FD\u8D85\u8FC720\u884C"),3);return}I.Z.confirm({title:_l("\u60A8\u786E\u8BA4\u590D\u5236\u8FD9%0\u6761\u8BB0\u5F55\u5417\uFF1F",zn.length),onOk:function(){var vr=zn.map(function(Pr){return Pr.rowid});(0,de.GO)({worksheetId:ze,viewId:yt,rowIds:vr},function(Pr){Fa(Pr,en.findLastId(vr)),Kn(),wa(Pr.map(function(Gr){return Gr.rowid}))})}})}}),T.createElement(Fe,(0,k.default)({isCharge:Gt,showCodePrint:Br,appId:Mt,worksheetId:ze,projectId:Ya,viewId:yt,controls:kn,selectedRows:zn,selectedRowIds:zn.map(function(ja){return ja.rowid}),count:Ta,allowLoadMore:Ea},this.getFilterArgs())),Lr&&T.createElement(cn,this.props),Or&&T.createElement(Be.Z,{className:"delete",icon:"delete2",text:_l("\u5220\u9664"),onClick:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}function ur(Pr){var Gr=zn.filter(function(Cr){return Cr.allowdelete||Cr.allowDelete}).map(function(Cr){return Cr.rowid});if(!Ea&&Gr.length===0)alert(_l("\u65E0\u6743\u9650\u5220\u9664\u9009\u62E9\u7684\u8BB0\u5F55"),3);else{var cr={appId:Mt,viewId:yt,worksheetId:ze,isAll:Ea,thoroughDelete:Pr};cr.isAll?(cr.excludeRowIds=zn.map(function(Cr){return Cr.rowid}),cr.fastFilters=(En||[]).map(function(Cr){return P().pick(Cr,["controlId","dataType","spliceType","filterType","dateRange","value","values","minValue","maxValue"])}),cr.navGroupFilters=fn,cr.filterControls=on.filterControls,cr.keyWords=on.keyWords,cr.searchType=on.searchType):cr.rowIds=Gr,se.Z.deleteWorksheetRows(cr).then(function(Cr){Cr.isSuccess&&(Ea&&Cr.successCount===0?alert(_l("\u65E0\u6743\u9650\u5220\u9664\u9009\u62E9\u7684\u8BB0\u5F55"),3):Gr.length<zn.length||Ea?alert(_l("\u5220\u9664\u6210\u529F\uFF0C\u65E0\u7F16\u8F91\u6743\u9650\u7684\u8BB0\u5F55\u65E0\u6CD5\u5220\u9664")):Gr.length===zn.length&&alert(_l("\u5220\u9664\u6210\u529F")),Ea||zn.length===xt?An():(Kn(),fa(Gr),Ma()))}).catch(function(Cr){alert(_l("\u6279\u91CF\u5220\u9664\u5931\u8D25"),3)})}}var vr={title:T.createElement("span",{className:"Red"},_l("\u6279\u91CF\u5220\u9664%0",Ba)),buttonType:"danger",description:pa<=md.global.SysSettings.worktableBatchOperateDataLimitCount?_l("%0\u5929\u5185\u53EF\u5728 \u56DE\u6536\u7AD9 \u5185\u627E\u56DE\u5DF2\u5220\u9664%1\uFF0C\u65E0\u7F16\u8F91\u6743\u9650\u7684\u6570\u636E\u65E0\u6CD5\u5220\u9664\u3002",md.global.SysSettings.worksheetRowRecycleDays,Ba):_l("\u6279\u91CF\u64CD\u4F5C\u5355\u6B21\u6700\u5927\u652F\u6301%0\u884C\u8BB0\u5F55\uFF0C\u70B9\u51FB\u5220\u9664\u540E\u5C06\u53EA\u5220\u9664\u524D%0\u884C\u8BB0\u5F55",md.global.SysSettings.worktableBatchOperateDataLimitCount),onOk:ur};(0,Tt.U9)(Na)&&pa>=md.global.SysSettings.worktableBatchOperateDataLimitCount&&(vr.onlyClose=!0,vr.cancelType="danger-gray",vr.onCancel=function(){(0,ye.Z)({footer:Gt?void 0:null,clickOmitText:!1,style:{width:560},bodyStyle:{marginLeft:36},title:T.createElement("div",{className:"Bold flexRow alignItemsCenter"},T.createElement("i",{className:"icon-error error",style:{fontSize:"28px",marginRight:"8px"}}),_l("\u5F7B\u5E95\u5220\u9664\u6240\u6709%0\u884C\u8BB0\u5F55",pa)),description:T.createElement("div",{style:{marginLeft:36}},T.createElement("span",{style:{color:"#333",fontWeight:"bold"}},_l("\u6B64\u64CD\u4F5C\u5C06\u5F7B\u5E95\u5220\u9664\u6240\u6709\u6570\u636E\uFF0C\u4E0D\u53EF\u4ECE\u56DE\u6536\u7AD9\u4E2D\u6062\u590D\uFF01")),_l("\u5F53\u524D\u6240\u9009\u8BB0\u5F55\u6570\u91CF\u8D85\u8FC7%0\u884C\uFF0C\u6570\u636E\u4E0D\u4F1A\u8FDB\u5165\u56DE\u6536\u7AD9\u800C\u76F4\u63A5\u8FDB\u884C\u5F7B\u5E95\u5220\u9664\u3002\u6B64\u64CD\u4F5C\u53EA\u6709\u5E94\u7528\u7BA1\u7406\u5458\u53EF\u4EE5\u6267\u884C\u3002",md.global.SysSettings.worktableBatchOperateDataLimitCount),T.createElement("div",{className:"Bold Gray mTop18"},_l("\u6CE8\u610F:")),T.createElement("ul",{className:"mTop10 9 mLeft4 Font14"},T.createElement("li",{style:{listStyle:"inside"}},_l("\u5C06\u76F4\u63A5\u7269\u7406\u5220\u9664\uFF0C\u6C38\u8FDC\u65E0\u6CD5\u6062\u590D")),T.createElement("li",{style:{listStyle:"inside"}},_l("\u5176\u4ED6\u8868\u4E0E\u5DF2\u5220\u9664\u8BB0\u5F55\u7684\u5173\u8054\u5173\u7CFB\u4E0D\u4F1A\u88AB\u6E05\u9664\uFF0C\u8BB0\u5F55\u5C06\u663E\u793A\u4E3A\u201C\u5DF2\u5220\u9664\u201D")),T.createElement("li",{style:{listStyle:"inside"}},_l("\u5F7B\u5E95\u5220\u9664\u4E0D\u89E6\u53D1\u5DE5\u4F5C\u6D41"))),!Gt&&T.createElement("div",{className:"Gray mTop20"},_l("\u4F60\u6CA1\u6709\u6743\u9650\u8FDB\u884C\u6B64\u64CD\u4F5C\uFF01"))),data:Gt?[{text:_l("\u6211\u5DF2\u4E86\u89E3\u6CE8\u610F\u4E8B\u9879\uFF0C\u5E76\u786E\u8BA4\u5F7B\u5E95\u5220\u9664\u6570\u636E"),value:1}]:[],onOk:function(){return ur(!0)}})},vr.cancelText=T.createElement(bn,null,T.createElement("i",{className:"icon icon-error"}),_l("\u5F7B\u5E95\u5220\u9664\u6240\u6709\u6570\u636E",pa))),I.Z.confirm(vr)}}),T.createElement("div",{className:"flex"},lr&&T.createElement(rt,{isCharge:Gt,count:pa,buttons:yr,appId:Mt,viewId:yt,recordId:zn.length===1&&zn[0].rowid,projectId:Ya,worksheetId:ze,selectedRows:zn,isAll:Ea,handleTriggerCustomBtn:this.handleTriggerCustomBtn,handleUpdateWorksheetRow:this.handleUpdateWorksheetRow})),T.createElement(C.Z,{popupPlacement:"bottom",text:T.createElement("span",null,_l("\u5237\u65B0\u89C6\u56FE"))},T.createElement("i",{className:q()("refreshBtn icon icon-task-later refresh Gray_9e Font18 pointer ThemeHoverColor3 mTop5 mRight12"),onClick:function(){ba({noClearSelected:!0,updateWorksheetControls:!0})}})),((0,Tt.le)(Na)||(0,Tt.g9)(Na))&&T.createElement(Rt,{className:"mTop4",list:[{text:_l("\u6821\u51C6\u6570\u636E"),icon:"Empty_nokey",onClick:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}Q({controls:kn,appId:Mt,viewId:yt,projectId:Ya,view:Wt,worksheetId:ze,searchArgs:on,quickFilter:En,navGroupFilters:fn,allWorksheetIsSelected:Ea,updateRows:ma,getWorksheetSheetViewSummary:Ma,reloadWorksheet:An,selectedRows:zn,worksheetInfo:jn,clearSelect:Kn})}}]},T.createElement("i",{className:"icon icon-more_horiz  Gray_9e Font18 pointer ThemeHoverColor3  mRight12"})))))}}]),$n}(T.Component),Ct.propTypes={isCharge:R().bool,appId:R().string,worksheetId:R().string,viewId:R().string,selectedNum:R().number,allWorksheetIsSelected:R().bool,selectedLength:R().number,onBatchEdit:R().func,onBatchDelete:R().func,rows:R().array,permission:R().shape({}),updateViewPermission:R().func,refreshWorksheetControls:R().func},Ct.defaultProps={clearSelect:function(){}},mt),Xt(Lt.prototype,"handleTriggerCustomBtn",[z.Nj],Te()(Lt.prototype,"handleTriggerCustomBtn"),Lt.prototype),Xt(Lt.prototype,"handleUpdateWorksheetRow",[z.Nj],Te()(Lt.prototype,"handleUpdateWorksheetRow"),Lt.prototype),Xt(Lt.prototype,"handlePrintQrCode",[z.Nj],Te()(Lt.prototype,"handlePrintQrCode"),Lt.prototype),Lt);const Rn=pn},84450:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>Fo});var h=t(70264),Te=t(60967),C=t(33867),Ce=t(47426),Ne=t(63239),j=t.n(Ne),L=t(88239),I=t(85105),k=t.n(I),e=t(99663),oe=t(22600),m=t(49135),y=t(93196),i=t(67294),me=t(15405),J=t(93967),T=t.n(J),te=t(31546),E=t(69288),r=t(86735),R=t(62232),a=t(86674),z=t(71893),N=t(85315),q=function(Ae){var Ge=[],A=Ae.filter(function(Ve){return!Ve.sectionId}),M=Ae.filter(function(Ve){return!!Ve.sectionId});return A.map(function(Ve){Ge=Ge.concat([Ve].concat((0,N.Z)(M.filter(function(Oe){return Oe.sectionId===Ve.controlId}))))}),Ge.sort(function(Ve,Oe){return Ve.row*10+Ve.col>Oe.row*10+Oe.col?1:-1})},K=function(Ae){var Ge=ye(Ae),A=[];return Ae.map(function(M){(Ge.includes(M.controlId)||!M.sectionId)&&A.push(M)}),A.map(function(M){M.child=Ae.filter(function(Ve){return Ve.sectionId===M.controlId}).sort(function(Ve,Oe){return Ve.row*10+Ve.col>Oe.row*10+Oe.col?1:-1})}),A.sort(function(M,Ve){return M.row*10+M.col>Ve.row*10+Ve.col?1:-1})},ye=function(Ae){var Ge=_.uniq(Ae.map(function(A){return A.sectionId}).filter(function(A){return!!A}));return Ge},v=function(Ae,Ge,A,M){if(Ae.sectionId)if(M){var Ve=Ge.find(function(ot){return ot.controlId===Ae.sectionId});return Ve?Ge.concat([Ae]):Ge.concat([A.find(function(ot){return ot.controlId===Ae.sectionId}),Ae])}else{var Oe=Ge.filter(function(ot){return ot.sectionId===Ae.sectionId});return Oe.length<=1?Ge.filter(function(ot){return ot.controlId!==Ae.controlId&&ot.controlId!==Ae.sectionId}):Ge.filter(function(ot){return ot.controlId!==Ae.controlId})}else{var it=A.filter(function(ot){return ot.sectionId?ot.sectionId===Ae.controlId:!1});return M?Ge.concat([Ae].concat((0,N.Z)(it))):Ge.filter(function(ot){return![].concat((0,N.Z)(it.map(function(qe){return qe.controlId})),[Ae.controlId]).includes(ot.controlId)})}},se=function(Ae){return Ae.type===29&&!["1","3","5"].includes(_.get(Ae,"advancedSetting.showtype"))||Ae.type===51&&!["1","3"].includes(_.get(Ae,"advancedSetting.showtype"))},de=t(96486),U=t.n(de),pe,Y,be,Q,Le=(0,r.Z)([`
   {
    width: 300px;
    padding-bottom: 10px;
    height: auto;
    background: #fff;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2), 0 2px 6px rgba(0, 0, 0, 0.15);
    border-radius: 3px;
    position: absolute;
    max-height: 900px;
    .searchWrapper {
      border-bottom: 1px solid #e0e0e0;
      margin: 8px 16px 0;
      display: flex;
      height: 38px;
      line-height: 38px;
      overflow: hidden;
      .cursorText {
        border: none;
        flex: 1;
        margin: 0;
        padding: 0;
      }
      .icon {
        width: 20px;
        line-height: 38px;
        color: #bdbdbd;
      }
    }
    .listBox {
      overflow: auto;
      max-height: 844px;
      &::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      .widgetList {
        padding: 8px 16px;
        .childCon {
          position: relative;
          padding-left: 8px;
          &::before {
            content: '';
            position: absolute;
            left: 6px;
            top: 10px;
            width: 8px;
            height: calc(100% - 30px);
            border-left: 1px solid #e0e0e0;
            border-bottom: 1px solid #e0e0e0;
            border-radius: 2px;
          }
        }
        .widgetIcon {
          margin-right: 13px;
        }
        .ant-switch-small {
          min-width: 18px;
          height: 9px;
          line-height: 9px;
          vertical-align: middle;
          margin-right: 18px;
          .ant-switch-handle {
            width: 5px;
            height: 5px;
          }
          .ant-switch-inner {
            margin: 0;
          }
          &.ant-switch-checked {
            .ant-switch-handle {
              left: calc(100% - 5px - 2px);
            }
            .ant-switch-inner {
              margin: 0;
            }
          }
        }
      }
    }
  }
`],[`
   {
    width: 300px;
    padding-bottom: 10px;
    height: auto;
    background: #fff;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2), 0 2px 6px rgba(0, 0, 0, 0.15);
    border-radius: 3px;
    position: absolute;
    max-height: 900px;
    .searchWrapper {
      border-bottom: 1px solid #e0e0e0;
      margin: 8px 16px 0;
      display: flex;
      height: 38px;
      line-height: 38px;
      overflow: hidden;
      .cursorText {
        border: none;
        flex: 1;
        margin: 0;
        padding: 0;
      }
      .icon {
        width: 20px;
        line-height: 38px;
        color: #bdbdbd;
      }
    }
    .listBox {
      overflow: auto;
      max-height: 844px;
      &::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      .widgetList {
        padding: 8px 16px;
        .childCon {
          position: relative;
          padding-left: 8px;
          &::before {
            content: '';
            position: absolute;
            left: 6px;
            top: 10px;
            width: 8px;
            height: calc(100% - 30px);
            border-left: 1px solid #e0e0e0;
            border-bottom: 1px solid #e0e0e0;
            border-radius: 2px;
          }
        }
        .widgetIcon {
          margin-right: 13px;
        }
        .ant-switch-small {
          min-width: 18px;
          height: 9px;
          line-height: 9px;
          vertical-align: middle;
          margin-right: 18px;
          .ant-switch-handle {
            width: 5px;
            height: 5px;
          }
          .ant-switch-inner {
            margin: 0;
          }
          &.ant-switch-checked {
            .ant-switch-handle {
              left: calc(100% - 5px - 2px);
            }
            .ant-switch-inner {
              margin: 0;
            }
          }
        }
      }
    }
  }
`]),Be=z.ZP.div(Le),ke=(0,me.Z)(pe=(be=Y=function(Wn){(0,y.default)(Ae,Wn);function Ae(Ge){(0,e.default)(this,Ae);var A=(0,m.default)(this,(Ae.__proto__||k()(Ae)).call(this,Ge));Q.call(A);var M=Ge.writeControls,Ve=M===void 0?[]:M;return A.state={data:A.getData(Ge),keyWords:"",initData:A.getData(Ge),writeControls:Ve,closeList:[]},A.chooseDia=null,A}return(0,oe.default)(Ae,[{key:"componentDidMount",value:function(){var A=this.props.writeControls,M=A===void 0?[]:A;this.setState({keyWords:"",data:this.getData(this.props),initData:this.getData(this.props),writeControls:M}),this.setPoint(),$(".cursorText").focus()}},{key:"componentWillReceiveProps",value:function(A){var M=this,Ve=A.writeControls,Oe=Ve===void 0?[]:Ve,it=A.showChooseWidgetDialog;(this.props.writeControls!==Oe||it)&&this.setState({data:this.getData(A).filter(function(ot){return ot.controlName.indexOf(M.state.keyWords)>=0}),writeControls:Oe})}},{key:"render",value:function(){var A=this,M=this.props.hideFn,Ve=this.state,Oe=Ve.data,it=Oe===void 0?[]:Oe,ot=Ve.keyWords,qe=Ve.initData,It=qe===void 0?[]:qe,ft=ot?it:K(it);return i.createElement("div",{className:"ChooseWidgetDialogWrap",style:{position:"fixed",top:0,left:0,bottom:0,right:0,zIndex:1e3},onClick:function(){M()}},i.createElement(Be,{ref:function(Zt){A.chooseDia=Zt},onClick:function(Zt){Zt.stopPropagation()}},i.createElement("div",{className:"searchWrapper"},i.createElement(C.Z,{icon:"search",className:"Font18"}),i.createElement("input",{type:"text",className:"cursorText",placeholder:_l("\u641C\u7D22"),onChange:function(Zt){var On=U().trim(Zt.target.value);On?A.setState({keyWords:On,data:It.filter(function(Fn){return Fn.controlName.toLocaleLowerCase().indexOf(On.toLocaleLowerCase())>=0})}):A.setState({keyWords:"",data:A.getData(A.props)})},value:ot||""}),ot&&i.createElement(C.Z,{icon:"cancel",className:"Font18 Hand",onClick:function(){A.setState({keyWords:"",data:A.getData(A.props)})}})),i.createElement("div",{className:"listBox mTop10"},ft.length>0?ft.sort(function(st,Zt){return st.row*10+st.col>Zt.row*10+Zt.col?1:-1}).map(function(st){return A.renderCon(st)}):i.createElement("div",{className:"Gray_75 TxtCenter pTop20 Font14 pBottom20"},_l("\u65E0\u53EF\u586B\u5199\u5B57\u6BB5")))))}}]),Ae}(i.Component),Q=function(){var Ae=this;this.getData=function(Ge){var A=Ge.writeObject,M=Ge.relationControls,Ve=M===void 0?[]:M,Oe=Ge.widgetList,it=Oe===void 0?[]:Oe;return(A!==1?Ve:it).filter(function(ot){return!se(ot)})},this.setPoint=function(){var Ge=$(window).height(),A=$(".noAppointFilter").offset().top,M=$(".noAppointFilter").offset().left,Ve=$(document.documentElement).scrollTop(),Oe=$(".noAppointFilter").height(),it=Ge-Oe-[A-Ve],ot=$(Ae.chooseDia).height(),qe=$(Ae.chooseDia).find(".listBox").height();$(Ae.chooseDia).css({top:ot+24>it?"initial":A+Oe,bottom:ot+24>it?24:"initial",left:M}).find(".listBox").css({height:Ge-106>qe?qe:Ge-106})},this.handSet=function(Ge,A){var M=Ae.getData(Ae.props),Ve=Ae.state.writeControls.map(function(qe){return qe.controlId}),Oe=v(Ge,M.filter(function(qe){return Ve.includes(qe.controlId)}),M,A),it=Oe.filter(function(qe){return!Ve.includes(qe.controlId)&&![52].includes(qe.type)}),ot=Ae.state.writeControls.filter(function(qe){return!Oe.map(function(It){return It.controlId}).includes(qe.controlId)});Ae.props.SwitchFn(A?Ae.state.writeControls.concat(it.map(function(qe){return{controlId:qe.controlId,type:Ae.props.isOnlyRead(qe.type)?1:qe.required?3:2}})):Ae.state.writeControls.filter(function(qe){return!ot.map(function(It){return It.controlId}).includes(qe.controlId)}))},this.renderCon=function(Ge){var A=Ae.state,M=A.closeList,Ve=M===void 0?[]:M,Oe=A.writeControls,it=Oe===void 0?[]:Oe;if(se(Ge)||a.c_.includes(Ge.controlId))return"";var ot=it.map(function(Zt){return Zt.controlId}),qe=Ge.child,It=qe===void 0?[]:qe,ft=It.filter(function(Zt){return ot.includes(Zt.controlId)}).length,st=ot.includes(Ge.controlId)||ft>=It.length&&It.length>0;return i.createElement("div",{className:"widgetList overflow_ellipsis WordBreak Hand",key:"widgetList-"+Ge.controlId},i.createElement("div",{className:"flexRow alignItemsCenter"},i.createElement("div",{className:"flex flexRow alignItemsCenter Hand",onClick:function(){Ae.handSet(Ge,!st)}},i.createElement(Te.Z,{className:"InlineBlock",checked:st,clearselected:ft>0&&It.length>ft,text:null}),i.createElement("span",{className:"Gray_75 flex flexRow alignItemsCenter"},i.createElement(C.Z,{icon:(0,R.hB)(Ge.type),className:T()("Font14 Gray_9e widgetIcon")}),i.createElement("span",{className:"Font13 Gray WordBreak overflow_ellipsis"},Ge.controlName||(Ge.type===22?_l("\u5206\u6BB5"):_l("\u5907\u6CE8"))))),It.length>0&&i.createElement(C.Z,{icon:Ve.includes(Ge.controlId)?"expand_less":"expand_more",className:T()("Font18 Hand ThemeHoverColor3 Gray_9e widgetIcon"),onClick:function(On){On.stopPropagation(),Ae.setState({closeList:Ve.includes(Ge.controlId)?Ve.filter(function(Fn){return Fn!==Ge.controlId}):Ve.concat(Ge.controlId)})}})),It.length>0&&!Ve.includes(Ge.controlId)&&i.createElement("div",{className:"childCon"},It.map(function(Zt){return Ae.renderCon(Zt)})))}},be))||pe,Ie=t(29383),he=t(68976),Re=t(89499),ue=(0,r.Z)([`
  .controlname {
    width: 200px;
    &.isChild {
      margin-left: 24px;
      width: 176px;
    }
  }
  .actionListBox {
    width: 110px;
  }
  .valueDef {
    flex: 1;
    .inputDef {
      width: 100%;
      .optionsCon {
        border-radius: 4px;
        padding: 0 10px;
        border: 1px solid #ccc;
        background: #ffffff;
        height: 36px;
        line-height: 36px;
        width: 100%;
        position: relative;
        .txt {
          display: block;
          width: 100%;
          line-height: 36px;
          height: 100%;
        }
      }
      .datePicker {
        position: absolute;
        z-index: 1;
      }
      .settingItemTitle {
        display: none;
      }
      & > div {
        margin-top: 0;
      }
      &.notOther {
        & > div {
          & > div {
            & > div:nth-child(1) {
              width: calc(100%) !important;
              border-radius: 4px !important;
            }
          }
        }
        .tagInputarea .tagInputareaIuput,
        .CityPicker-input-container input {
          border-radius: 4px !important;
        }
        .ant-input {
          width: calc(100%) !important;
          border-radius: 4px !important;
          &:hover {
            border-color: #ccc !important;
          }
        }
        .ant-input:focus,
        .ant-input-focused {
          border-color: #2196f3 !important;
          box-shadow: none !important;
        }
        .selectOtherFieldContainer {
          display: none;
          & > div {
            display: none;
          }
        }
      }
    }
  }
`],[`
  .controlname {
    width: 200px;
    &.isChild {
      margin-left: 24px;
      width: 176px;
    }
  }
  .actionListBox {
    width: 110px;
  }
  .valueDef {
    flex: 1;
    .inputDef {
      width: 100%;
      .optionsCon {
        border-radius: 4px;
        padding: 0 10px;
        border: 1px solid #ccc;
        background: #ffffff;
        height: 36px;
        line-height: 36px;
        width: 100%;
        position: relative;
        .txt {
          display: block;
          width: 100%;
          line-height: 36px;
          height: 100%;
        }
      }
      .datePicker {
        position: absolute;
        z-index: 1;
      }
      .settingItemTitle {
        display: none;
      }
      & > div {
        margin-top: 0;
      }
      &.notOther {
        & > div {
          & > div {
            & > div:nth-child(1) {
              width: calc(100%) !important;
              border-radius: 4px !important;
            }
          }
        }
        .tagInputarea .tagInputareaIuput,
        .CityPicker-input-container input {
          border-radius: 4px !important;
        }
        .ant-input {
          width: calc(100%) !important;
          border-radius: 4px !important;
          &:hover {
            border-color: #ccc !important;
          }
        }
        .ant-input:focus,
        .ant-input-focused {
          border-color: #2196f3 !important;
          box-shadow: none !important;
        }
        .selectOtherFieldContainer {
          display: none;
          & > div {
            display: none;
          }
        }
      }
    }
  }
`]),we=z.ZP.div(ue),Ee=function(Wn){(0,y.default)(Ae,Wn);function Ae(){var Ge,A,M,Ve;(0,e.default)(this,Ae);for(var Oe=arguments.length,it=Array(Oe),ot=0;ot<Oe;ot++)it[ot]=arguments[ot];return Ve=(A=(M=(0,m.default)(this,(Ge=Ae.__proto__||k()(Ae)).call.apply(Ge,[this].concat(it))),M),M.state={showAppointDialog:M.props.showAppointDialog,writeObject:M.props.writeObject||1,writeType:M.props.writeType||1,addRelationControlId:M.props.addRelationControlId||"",writeControls:M.props.writeControls||[],writeControlsClone:M.props.writeControls||[],showChooseWidgetDialog:!1,widgetList:M.props.widgetList||[],clickType:M.props.clickType,showErrerDialog:!1,errerDialogTitle:"",errerDialogTxt:""},M.isOnlyRead=function(qe){return he.Fw.indexOf(qe)>=0},M.getControlEffect=function(qe){return M.isOnlyRead(qe.type)?1:qe.required?3:2},M.handDel=function(qe){var It=M.state.writeObject!==1?M.props.relationControls:M.state.widgetList,ft=v(It.find(function(Zt){return Zt.controlId===qe.controlId}),It.filter(function(Zt){return M.state.writeControls.map(function(On){return On.controlId}).includes(Zt.controlId)}),It,!1),st=ft.map(function(Zt){return Zt.controlId});M.setState({writeControls:M.state.writeControls.filter(function(Zt){return st.includes(Zt.controlId)})})},M.renderErrerDialog=function(){return i.createElement(E.Z,{title:M.state.errerDialogTitle,okText:_l("\u786E\u5B9A"),confirm:"danger",className:"errerDialogForAppoint",headerClass:"",bodyClass:"",onCancel:function(){M.setState({showErrerDialog:!1})},onOk:function(){M.setState({showErrerDialog:!1})},visible:M.state.showErrerDialog,updateTrigger:"fasle"},M.state.errerDialogTxt)},M.renderDefCom=function(qe,It,ft,st){if(he.wX.concat(he.up).includes(st.type)){var Zt=M.state.writeObject,On=M.props.currentSheetInfo,Fn=On,Ca=(0,L.default)({},U().omit(st.advancedSetting,["dynamicsrc","defaultfunc"]),{defaulttype:""});return st.type===34&&qe.defsource&&(Ca=(0,L.default)({},Ca,{defaulttype:"0"})),i.createElement("div",{className:T()("inputDef",{notOther:Zt===1&&!he.up.includes(st.type)||st.type===34})},i.createElement(Ie.Z,{item:qe,data:(0,L.default)({},st,{advancedSetting:(0,L.default)({},Ca,{defsource:qe.defsource})}),writeObject:Zt,allControls:U().get(Fn,["template","controls"])||[],onChange:function(aa,xa){var va=aa.advancedSetting,Pa=va===void 0?{}:va,ta=Pa.defsource;xa&&(ta=aa);var Ia=ft;Ia[It].defsource=ta,M.setState({writeControls:Ia,writeControlsClone:Ia})},titleControl:(U().get(st,["relationControls"])||[]).find(function(Jn){return Jn.attribute===1}),globalSheetInfo:U().pick(Fn,["appId","groupId","name","worksheetId","projectId"])}))}},M.renderAppointFilters=function(){var qe=q(M.state.writeObject!==1?M.props.relationControls:M.state.widgetList),It=ye(qe),ft=[];return qe.map(function(st){var Zt=M.state.writeControls.find(function(On){return On.controlId===st.controlId});Zt&&(st.sectionId&&ft.push(qe.find(function(On){return On.controlId===st.sectionId})),ft.push(Zt))}),ft=U().union(ft,"controlId"),M.state.writeType===1&&ft.length>0?i.createElement(we,{className:"appointFiltersList"},i.createElement("div",{className:"headerCon flexRow"},i.createElement("span",{className:"Gray_75 controlname "},_l("\u5B57\u6BB5")),i.createElement("span",{className:"Gray_75 actionListBox pLeft10"},_l("\u5C5E\u6027")),i.createElement("span",{className:"Gray_75 Width250 InlineBlock valueDef"},_l("\u9ED8\u8BA4\u503C"))),i.createElement("div",{className:"appointList"},ft.map(function(st,Zt){var On=U().find(qe,function(aa){return aa.controlId===st.controlId});if(!On)return"";var Fn=On.type,Ca=On.controlName,Jn=se(On);return It.includes(st.controlId)?i.createElement("div",{className:"itemBox mTop10"},i.createElement(C.Z,{icon:(0,R.hB)(Fn),className:T()("Font14 Gray_9e mRight15")}),i.createElement("span",{className:""},Ca)):i.createElement("div",{className:"itemBox mTop10"},i.createElement("span",{className:T()("widget controlname Gray Font13 WordBreak overflow_ellipsis Relative",{isErr:Jn,isChild:!!On.sectionId})},i.createElement(C.Z,{icon:(0,R.hB)(Fn),className:T()("Font14 Gray_9e mRight15")}),i.createElement("span",{className:""},Ca||(Fn===22?_l("\u5206\u6BB5"):_l("\u5907\u6CE8"))),Jn&&i.createElement(h.Z,{tooltipClass:"pointTooltip",action:["click"],popupPlacement:"bottomRight",offset:[14,0],text:i.createElement("span",{style:{color:"#fff"}},_l("\u8BE5\u5B57\u6BB5\u4E0D\u652F\u6301\u81EA\u5B9A\u4E49\u586B\u5199"))},i.createElement(C.Z,{icon:"error_outline",className:T()("Font14 Red mRight15 iconErr")}))),i.createElement(te.Z,{border:!0,isAppendToBody:!0,className:"actionListBox ",value:st.type,key:st.controlId+"_Dropdown_",data:[_l("\u53EA\u8BFB"),_l("\u586B\u5199"),_l("\u5FC5\u586B")].map(function(aa,xa){return{text:aa,value:xa+1,disabled:M.isOnlyRead(Fn)&&xa>0||Jn||([49,21,43].includes(Fn)||(0,Re.XS)(On))&&xa>1}}),onChange:function(xa){if(!(M.isOnlyRead(Fn)||[43].includes(Fn)&&[3].includes(xa))){var va=ft;va[Zt].type=xa,M.setState({writeControls:va,writeControlsClone:va})}}}),i.createElement("span",{className:T()("Width250 InlineBlock valueDef",{})},M.renderDefCom(st,Zt,ft,On)),i.createElement(C.Z,{icon:"hr_delete",className:"Font18 editAppointFilters Hand Gray_9e mLeft8",onClick:function(){M.handDel(st)}}))}))):""},M.render=function(){var qe=M.props,It=qe.btnId,ft=qe.workflowType,st=qe.clickType,Zt=qe.writeControls,On=qe.writeObject,Fn=qe.relationControl,Ca=qe.writeType,Jn=qe.addRelationControlId,aa=qe.relationControls,xa=qe.setValue,va=qe.updateRelationControl,Pa=M.state.writeObject===1?M.state.widgetList:aa;return i.createElement(i.Fragment,null,i.createElement(E.Z,{title:_l("\u8BBE\u7F6E\u586B\u5199\u5185\u5BB9%02060"),okText:_l("\u786E\u5B9A"),cancelText:_l("\u53D6\u6D88"),width:630,className:T()("appointDialog",{noOverFlow:M.state.writeType!==1}),okDisabled:M.state.writeObject===2&&Fn===""||M.state.writeType===1&&M.state.writeControls.length<=0||M.state.writeType===2&&M.state.addRelationControlId==="",onCancel:function(){var Ia=(0,L.default)({},M.props,{showAppointDialog:!1,writeObject:On,writeType:Ca,addRelationControlId:Jn,writeControls:Zt,clickType:On===2&&Fn===""||Ca===1&&Zt.length<=0||Ca===2&&Jn===""?1:st,workflowType:It?ft:2});xa(Ia)},onOk:function(){if(!(M.state.writeObject===2&&Fn===""||M.state.writeType===1&&M.state.writeControls.length<=0||M.state.writeType===2&&M.state.addRelationControlId==="")){var Ia=(0,L.default)({},M.state,{showAppointDialog:!1,writeObject:M.state.writeObject,writeType:M.state.writeType,addRelationControlId:M.state.addRelationControlId,writeControls:M.state.writeControls.filter(function(Aa){return![52].includes(Aa.type)}),workflowType:It?ft:2});xa(Ia)}},visible:M.state.showAppointDialog},i.createElement("div",{className:"appointCon"},i.createElement("p",{className:"Gray_9e Font14"},_l("\u7528\u6237\u70B9\u51FB\u6309\u94AE\u540E\uFF0C\u7ACB\u5373\u5F39\u51FA\u5BF9\u8BDD\u6846\u5E76\u586B\u5199\u6307\u5B9A\u7684\u5185\u5BB9")),i.createElement("p",{className:"Gray Font13 mTop32 Bold500"},_l("\u586B\u5199\u5BF9\u8C61%02061")),i.createElement(Ce.ZP,{className:"mTop10",data:[{value:1,text:_l("\u5F53\u524D\u8BB0\u5F55")},{value:2,text:_l("\u5173\u8054\u8BB0\u5F55\uFF08\u5355\u6761\uFF09%02062"),disabled:M.props.cannotRelate}],size:"small",onChange:function(Ia){Ia!==M.state.writeObject&&M.setState({writeObject:Ia,writeControls:[],addRelationControlId:"",writeControlsClone:[]},function(){Ia===1&&va("")})},checkedValue:M.state.writeObject}),M.state.writeObject===2&&i.createElement("div",{className:"contectBox"},i.createElement("span",{className:"titleLeft Font13 Gray"},_l("\u5173\u8054\u5B57\u6BB5")),i.createElement(te.Z,{border:!0,placeholder:_l("\u8BF7\u9009\u62E9"),className:"contectInput",value:Fn===""?void 0:Fn,data:M.state.widgetList.filter(function(ta){return ta.type===29&&ta.enumDefault===1}).map(function(ta){return{value:ta.controlId,text:ta.controlName,controltype:ta.type}}),onChange:function(Ia){Ia!==Fn&&M.setState({writeControls:[],addRelationControlId:"",writeControlsClone:[]},function(){va(Ia)})}})),i.createElement("p",{className:"Gray Font13 mTop32 Bold500"},_l("\u586B\u5199\u5185\u5BB9%02063")),i.createElement(Ce.ZP,{className:"mTop10",data:[{value:1,text:_l("\u586B\u5199\u6307\u5B9A\u5B57\u6BB5")},{value:2,text:_l("\u65B0\u5EFA\u5173\u8054\u8BB0\u5F55%02064"),disabled:M.props.cannotRelate}],size:"small",onChange:function(Ia){M.state.writeType!==Ia&&M.setState({writeType:Ia,writeControls:[],addRelationControlId:"",writeControlsClone:[]})},checkedValue:M.state.writeType}),M.renderAppointFilters(),M.state.writeType===1&&i.createElement("div",{className:"noAppointFilter",onClick:function(){M.setState({showChooseWidgetDialog:!0})}},i.createElement("i",{className:"icon icon-add Font16"}),_l("\u9009\u62E9\u586B\u5199\u5B57\u6BB5")),M.state.showChooseWidgetDialog&&i.createElement(ke,(0,L.default)({},M.props,M.state,{isOnlyRead:M.isOnlyRead,hideFn:function(){M.setState({showChooseWidgetDialog:!1})},SwitchFn:function(Ia){M.setState({writeControls:Ia})}})),M.state.writeType===2&&i.createElement("div",{className:"contectBox"},i.createElement("span",{className:"titleLeft Font13 Gray"},_l("\u5173\u8054\u5B57\u6BB5")),i.createElement(te.Z,{border:!0,placeholder:_l("\u8BF7\u9009\u62E9"),className:"contectInput",value:M.state.addRelationControlId===""?void 0:M.state.addRelationControlId,data:Pa.filter(function(ta){return ta.type===29}).map(function(ta){return{value:ta.controlId,text:ta.controlName,controltype:ta.type}}),onChange:function(Ia){M.setState({addRelationControlId:Ia})}})))),M.state.showErrerDialog&&M.renderErrerDialog())},A),(0,m.default)(M,Ve)}return(0,oe.default)(Ae,[{key:"componentDidMount",value:function(){$(".Radio").attr("title",""),$(document).find(".iconErr").click()}}]),Ae}(i.Component);const b=Ee;var le=t(39612),ae=function(Ae){for(var Ge=0;Ge<Ae.length;Ge++)if(a.x0.includes(Ae[Ge].controlId)){Ae[Ge].segmentation=!0;break}return Ae},ve=function(Wn){(0,y.default)(Ae,Wn);function Ae(){var Ge,A,M,Ve;(0,e.default)(this,Ae);for(var Oe=arguments.length,it=Array(Oe),ot=0;ot<Oe;ot++)it[ot]=arguments[ot];return Ve=(A=(M=(0,m.default)(this,(Ge=Ae.__proto__||k()(Ae)).call.apply(Ge,[this].concat(it))),M),M.state={filters:M.props.filters||[]},A),(0,m.default)(M,Ve)}return(0,oe.default)(Ae,[{key:"render",value:function(){var A=this,M=this.props,Ve=M.setValue,Oe=M.isShowBtnFilterDialog,it=M.projectId,ot=M.columns,qe=M.sheetSwitchPermit,It=M.appId;return i.createElement(E.Z,{title:_l("\u7B5B\u9009"),okText:_l("\u786E\u5B9A"),cancelText:_l("\u53D6\u6D88"),className:"showBtnFilterDialog",onCancel:function(){Ve((0,L.default)({},A.state,{filters:A.props.filters||[],isShowBtnFilterDialog:!1,showType:A.state.filters.length<=0?1:A.props.showType,isOk:!1}))},onOk:function(){Ve((0,L.default)({},A.state,{filters:A.state.filters,isShowBtnFilterDialog:!1,showType:A.state.filters.length<=0?1:A.props.showType,isOk:!0}))},visible:Oe},i.createElement(le.Z,{sheetSwitchPermit:qe,from:"custombutton",canEdit:!0,feOnly:!0,supportGroup:!0,filterColumnClassName:"showBtnFilter",projectId:it,appId:It,offset:[0,0],filterResigned:!1,columns:ae(ot),conditions:this.state.filters,onConditionsChange:function(st){A.setState({filters:st})}}))}}]),Ae}(i.Component);const W=ve;var ce=t(45231),Z=t(42638),_e=t(57296),P=t(45697),xe=t.n(P),bt=t(73935),tt=t(49611),Dt=t.n(tt),vn=function(Wn){(0,y.default)(Ae,Wn);function Ae(Ge){(0,e.default)(this,Ae);var A=(0,m.default)(this,(Ae.__proto__||k()(Ae)).call(this,Ge));return A.container=document.createElement("div"),A.container.classList.add("fullScreenCurtain"),document.body.appendChild(A.container),A}return(0,oe.default)(Ae,[{key:"componentWillUnmount",value:function(){this.container.parentNode&&this.container.parentNode.removeChild(this.container)}},{key:"render",value:function(){var A=this.props,M=A.children,Ve=A.documentTitle,Oe=Ve?i.createElement(Dt(),{title:Ve},M):i.createElement(i.Fragment,null,M);return(0,bt.createPortal)(Oe,this.container)}}]),Ae}(i.Component),Fe=t(50533),Bt=t(54208),kt=t(97373),Tt=t(94055),tn=t(55055),Vn=t(62443),Zn=t(42185),Ot=t(88106),$t=t(88902),cn=t.n($t),Mn=t(62745),dt=t(2042),$e,jt,rn=(jt=$e=function(Wn){(0,y.default)(Ae,Wn);function Ae(Ge){(0,e.default)(this,Ae);var A=(0,m.default)(this,(Ae.__proto__||k()(Ae)).call(this,Ge));return A.onOk=function(){var M=A.state,Ve=M.flowName,Oe=M.explain;if(Ve=Ve.trim(),Oe=Oe.trim(),!Ve){alert(_l("\u8BF7\u8F93\u5165\u5DE5\u4F5C\u6D41\u540D\u79F0"),2),A.name.focus();return}A.props.onOk({name:Ve,explain:Oe})},A.state={flowName:Ge.flowName,explain:Ge.explain||""},A}return(0,oe.default)(Ae,[{key:"componentDidMount",value:function(){this.name.select()}},{key:"render",value:function(){var A=this,M=this.props.onCancel,Ve=this.state,Oe=Ve.explain,it=Ve.flowName;return i.createElement(dt.Z,{visible:!0,type:"scroll",width:560,onCancel:M,onOk:this.onOk,title:_l("\u57FA\u672C\u4FE1\u606F")},i.createElement("div",{className:"workflowInfo"},i.createElement("div",{className:"Gray_9"},_l("\u540D\u79F0")),i.createElement("div",{className:"mTop10"},i.createElement("input",{type:"text",ref:function(qe){A.name=qe},className:"ThemeHoverBorderColor3 ThemeBorderColor3",autoFocus:!0,value:it,onChange:function(qe){return A.setState({flowName:qe.target.value})}})),i.createElement("div",{className:"mTop15 mBottom10 Gray_9"},_l("\u8BF4\u660E")),i.createElement(Mn.Z,{minHeight:72,name:"explain",value:Oe,onChange:function(qe){return A.setState({explain:qe})}})))}}]),Ae}(i.Component),$e.propTypes={onCancel:xe().func,onOk:xe().func,flowName:xe().string,explain:xe().string},$e.defaultProps={onCancel:function(){},onOk:function(){},flowName:"",explain:""},jt),Rt=t(74996),St,zt,oa={active:_l("\u8FD0\u884C\u4E2D%03001"),close:_l("\u5DF2\u5173\u95ED%03002")},qn=(zt=St=function(Wn){(0,y.default)(Ae,Wn);function Ae(){var Ge,A,M,Ve;(0,e.default)(this,Ae);for(var Oe=arguments.length,it=Array(Oe),ot=0;ot<Oe;ot++)it[ot]=arguments[ot];return Ve=(A=(M=(0,m.default)(this,(Ge=Ae.__proto__||k()(Ae)).call.apply(Ge,[this].concat(it))),M),M.state={disabled:!1},M.handleClick=function(qe){var It=M.props,ft=It.publishFlow,st=It.switchStatus,Zt=It.refreshPublish;M.setState({disabled:!0}),qe==="publish"&&ft(),qe==="switchStatus"&&st(),qe==="refreshPublish"&&Zt()},A),(0,m.default)(M,Ve)}return(0,oe.default)(Ae,[{key:"componentWillReceiveProps",value:function(A,M){!A.pending&&this.props.pending&&this.setState({disabled:!1})}},{key:"render",value:function(){var A=this,M=this.props,Ve=M.disabledClose,Oe=M.pending,it=M.status,ot=M.isNew,qe=M.isRefresh,It=M.className,ft=this.state.disabled;return i.createElement("div",{className:T()("workflowStatusWrap",It)},ot?i.createElement("div",{className:"publishFlowWrap",onClick:function(){return!ft&&A.handleClick("publish")}},i.createElement("div",{className:"publishFlow"},Oe?_l("\u53D1\u5E03\u4E2D..."):_l("\u53D1\u5E03\u6D41\u7A0B%03088"))):i.createElement(i.Fragment,null,qe&&i.createElement("div",{className:"refreshFlowWrap",onClick:function(){return!ft&&A.handleClick("refreshPublish")}},i.createElement("div",{className:"refreshFlow"},_l("\u66F4\u65B0\u53D1\u5E03"))),i.createElement("div",{className:T()("switchWrap","switchWrap-"+it,{pending:Oe}),onClick:function(){return!Ve&&!ft&&A.handleClick("switchStatus")}},i.createElement("div",{className:T()("contentWrap","contentWrap-"+it)},i.createElement("div",null,oa[it])),i.createElement("div",{className:T()("iconWrap","iconWrap-"+it)},i.createElement(C.Z,{icon:"hr_ok",className:T()("Font20 Gray_bd","workflowSwitchIcon-"+it)})))))}}]),Ae}(i.Component),St.propTypes={disabledClose:P.bool,status:P.string,isRefresh:P.bool,isNew:P.bool,pending:P.bool,className:P.string,switchStatus:P.func,publishFlow:P.func,refreshPublish:P.func},St.defaultProps={disabledClose:!1,status:"close",pending:!1,isRefresh:!0,isNew:!1,switchStatus:function(){},publishFlow:function(){},refreshPublish:function(){}},zt),In=t(82832),Vt=t(67707),Yt={99:_l("\u4F60\u7684\u6D41\u7A0B\u4E2D\u672A\u5305\u542B\u53EF\u6267\u884C\u64CD\u4F5C\u7684\u8282\u70B9,\u8BF7\u81F3\u5C11\u6DFB\u52A0\u4E00\u4E2A"),100:_l("\u672A\u8BBE\u7F6E\u6D41\u7A0B\u7684\u89E6\u53D1\u65B9\u5F0F"),102:_l("\u4E2A\u8282\u70B9\u672A\u8FDB\u884C\u914D\u7F6E"),103:_l("\u4E2A\u8282\u70B9\u6307\u5B9A\u7684\u5BF9\u8C61\u5DF2\u5220\u9664"),105:_l("\u4E2A\u8282\u70B9\u672A\u6307\u5B9A\u4EBA\u5458\u6216\u4EBA\u5458\u5F02\u5E38"),108:_l("\u4E2A\u8282\u70B9\u6709\u5BA1\u6838\u4E2D\u3001\u5BA1\u6838\u5931\u8D25\u7684\u77ED\u4FE1\u6A21\u7248"),200:_l("\u4E2A\u8282\u70B9\u672A\u8BBE\u7F6E\u6709\u6548\u7684\u64CD\u4F5C\u6216\u64CD\u4F5C\u5185\u5BB9\u5F02\u5E38")},qt=[99,100];const rt=function(Wn){var Ae=Wn.onOk,Ge=Wn.onCancel,A=Wn.info,M=A.processWarnings,Ve=A.name;return i.createElement(E.Z,{className:"publishErrorDialog",visible:!0,title:_l("\u5DE5\u4F5C\u6D41 \u201C%0\u201D \u53D1\u5E03\u5931\u8D25\uFF01",Ve),buttonType:"danger",onCancel:Ge,onOk:Ae,okText:_l("\u524D\u5F80\u4FEE\u6539")},i.createElement("ul",{className:"reasonList"},M.map(function(Oe){var it=U().includes(qt,Oe.warningType)?"":Oe.errorCount;return i.createElement("li",{className:"errorItem",key:Oe.warningType},i.createElement("span",{className:T()("iconBox",{warn:Oe.yellow})},i.createElement(C.Z,{className:T()("Font20",Oe.yellow?"icon-wc-sysmsg":"icon-workflow_info")})),i.createElement("span",{className:"detail"},""+it+Yt[Oe.warningType]))})))};var Qe=t(5618),ht=t(7891),Lt=t(55927),Ct=t.n(Lt),mt=t(12498),vt=t.n(mt),Xt=t(30381),bn=t.n(Xt),pn=t(15577),Rn,fe,$n=[{tabIndex:1,name:_l("\u6D41\u7A0B")},{tabIndex:3,name:_l("\u914D\u7F6E")},{tabIndex:2,name:_l("\u5386\u53F2")}],gn=(fe=Rn=function(Wn){(0,y.default)(Ae,Wn);function Ae(Ge){(0,e.default)(this,Ae);var A=(0,m.default)(this,(Ae.__proto__||k()(Ae)).call(this,Ge));return A.updateProcess=function(M){var Ve=A.props.flowInfo;A.props.dispatch((0,Rt.Q3)(Ve.companyId,Ve.id,M.name,M.explain)),A.setState({visible:!1})},A.switchStatus=function(){var M=A.props.flowInfo;A.publishOrCloseFlow(!M.enabled)},A.publishOrCloseFlow=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,Ve=A.props.flowInfo,Oe=!Ve.lastPublishDate;A.props.dispatch((0,Rt.iR)({pending:!0})),Z.Z.publish({isPublish:M,processId:Ve.id}).then(function(it){M?it.isPublish?(A.props.dispatch((0,Rt.iR)({pending:!1,enabled:!0,publish:!0,lastPublishDate:bn()().format("YYYY-MM-DD HH:mm:ss"),publishStatus:2,startAppId:it.process.startNode.appId})),Oe&&setTimeout(function(){A.setState({showPublishDialog:!0,data:it})},300)):(A.props.dispatch((0,Rt.iR)({pending:!1})),A.setState({publishErrorVisible:!0,errorInfo:it})):A.props.dispatch((0,Rt.iR)({pending:!1,enabled:!1}))}).catch(function(it){A.props.dispatch((0,Rt.iR)({state:it,pending:!1}))})},A.back=function(){var M=A.props,Ve=M.workflowDetail,Oe=M.flowInfo,it=A.props.onBack,ot=Ve.startEventId,qe=Ve.flowNodeMap,It=ot&&(qe[ot].appType===Qe.IF.SHEET||qe[ot].appType===Qe.IF.DATE)&&!qe[ot].appId;it||(it=function(){location.href="/app/"+Oe.relationId+"/workflow"+(location.hash?"?"+location.hash.replace("#",""):"")+((location.hash?"&":"?")+(0,pn.tQ)())}),It?(0,Vt.Z)({className:"leaveWorkflowConfirm",title:_l("\u662F\u5426\u653E\u5F03\u4FDD\u5B58\u5DE5\u4F5C\u6D41\uFF1F"),description:_l("\u672A\u8BBE\u7F6E\u89E6\u53D1\u65B9\u5F0F\u7684\u5DE5\u4F5C\u6D41\u5C06\u4E0D\u4F1A\u88AB\u4FDD\u5B58"),okText:_l("\u653E\u5F03\u4FDD\u5B58"),onOk:function(){return it(Oe.enabled)}}):it(Oe.enabled)},A.handleRestoreVisible=function(){var M=A.props.flowInfo;(0,Vt.Z)({title:_l("\u786E\u5B9A\u6062\u590D\u5230\u5F53\u524D\u7248\u672C\u5417\uFF1F"),description:_l("\u6267\u884C\u6B64\u64CD\u4F5C\u540E\uFF0C\u6D41\u7A0B\u5C06\u56DE\u6EDA\u5230\u5F53\u524D\u7248\u672C\u3002\u60A8\u672A\u53D1\u5E03\u7684\u6D41\u7A0B\u4FEE\u6539\u5C06\u4F1A\u88AB\u6E05\u9664\uFF0C\u6B64\u64CD\u4F5C\u65E0\u6CD5\u64A4\u56DE"),okText:_l("\u786E\u5B9A\u6062\u590D"),onOk:function(){Z.Z.goBack({processId:M.id}).then(function(){location.href="/workflowedit/"+M.parentId})}})},A.action=function(){var M=A.props,Ve=M.flowInfo,Oe=M.tabIndex,it=M.workflowDetail,ot=A.state.isProgressing,qe=function(ft){var st=it.flowNodeMap,Zt=A.hasTodoNode(st),On=function(){var Ca=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];A.setState({isProgressing:!0}),Z.Z.startProcessById({processId:Ve.id,sourceId:ft,debugEvents:Ca}).then(function(Jn){Jn&&alert(_l("\u6267\u884C\u6210\u529F")),A.setState({isProgressing:!1}),Oe===2&&document.getElementById("historyRefresh")&&document.getElementById("historyRefresh").click()})};cn()(st).forEach(function(Fn){st[Fn].typeId===Qe.QZ.APPROVAL_PROCESS&&A.hasTodoNode(st[Fn].processNode.flowNodeMap)&&(Zt=!0)}),Zt?(0,Vt.Z)({width:560,className:"actionProcessDialog",title:_l("\u5F85\u529E\u3001\u901A\u77E5\u53D1\u9001\u65B9\u5F0F"),description:i.createElement("div",null,i.createElement("p",{className:"Gray"},_l("\u70B9\u51FB\u3010\u53D1\u7ED9\u6211\u81EA\u5DF1\u6D4B\u8BD5\u3011\u65F6\uFF0C\u5B9E\u9645\u6267\u884C\u4EBA\u4E0D\u6536\u5230\u6D88\u606F\uFF0C\u7531\u6211\u4F5C\u4E3A\u8282\u70B9\u7684\u6267\u884C\u4EBA\u8FDB\u884C\u6D4B\u8BD5\u3002")),i.createElement("p",null,"\u2022",i.createElement("span",{className:"mLeft5"},_l("\u5305\u542B\u5F85\u529E\u8282\u70B9\uFF08\u5BA1\u6279\u3001\u586B\u5199\u3001\u6284\u9001\uFF09\uFF0C\u901A\u77E5\u8282\u70B9\uFF08\u7AD9\u5185\u6D88\u606F\u3001\u77ED\u4FE1\u3001\u90AE\u4EF6\uFF09\u3002"))),i.createElement("p",null,"\u2022",i.createElement("span",{className:"mLeft5"},_l("\u77ED\u4FE1\u3001\u90AE\u4EF6\u5C06\u53D1\u9001\u7ED9\u6211\u7684\u8D26\u53F7\u7ED1\u5B9A\u7684\u624B\u673A\u3001\u90AE\u7BB1\u6D4B\u8BD5\u3002"))),i.createElement("p",null,"\u2022",i.createElement("span",{className:"mLeft5"},_l("\u6682\u65F6\u4EC5\u4E3B\u6D41\u7A0B\u4E2D\u7684\u8282\u70B9\u652F\u6301\u6B64\u529F\u80FD\u3002\u5F15\u7528\u7684\u5B50\u6D41\u7A0B\u3001PBP\u4E2D\u7684\u8282\u70B9\u4ECD\u4E3A\u5B9E\u9645\u6267\u884C\u4EBA\uFF0C\u53EF \u5355\u72EC\u53BB\u6D4B\u8BD5\u8FD9\u4E9B\u8282\u70B9\u3002")))),okText:_l("\u53D1\u7ED9\u5B9E\u9645\u6267\u884C\u4EBA"),cancelText:_l("\u53D1\u7ED9\u6211\u81EA\u5DF1\u6D4B\u8BD5"),cancelType:"primary",onlyClose:!0,onOk:On,onCancel:function(){On([1,2,3])}}):On()};if(ot)return!1;U().includes([Qe.IF.SHEET,Qe.IF.DATE,Qe.IF.CUSTOM_ACTION,Qe.IF.APPROVAL_START,Qe.IF.EVENT_PUSH],Ve.startAppType)?(0,ht.selectRecord)({canSelectAll:!1,pageSize:25,multiple:!1,singleConfirm:!0,relateSheetId:Ve.startAppId,onText:_l("\u5F00\u59CB\u6D4B\u8BD5"),onOk:function(ft){qe(ft[0].rowid)}}):qe()},A.state={visible:!1,showPublishDialog:!1,publishErrorVisible:!1,errorInfo:{},isProgressing:!1,data:{},showApprovalFields:!1,showApprovalDetail:!1},A}return(0,oe.default)(Ae,[{key:"componentDidMount",value:function(){var A=this;$(".AppAdminWorkflowEdit").on("click",".publishDialogOpenHistory",function(){A.props.switchTabs(2),A.setState({showPublishDialog:!1})})}},{key:"errorNodeCenter",value:function(){var A=this;setTimeout(function(){var M=A.state.errorInfo,Ve=M.errorNodeIds,Oe=M.errorNodeMap,it=Ve[0],ot=void 0;if(Oe[it]?ot=$(".approvalProcessBoxBox[data-id="+it+"]").find(".workflowBox[data-id="+Oe[it][0]+"]"):ot=$(".workflowBox[data-id="+it+"]"),!!ot.length){var qe=ot.offset(),It=qe.top,ft=qe.left,st=$(".workflowSettings .workflowEdit"),Zt=st.scrollTop(),On=st.scrollLeft();st.scrollTop(Zt+It-st.height()/2+ot.height()/2-30),st.scrollLeft(On+ft-st.width()/2+ot.width()/2)}},1e3)}},{key:"renderActionBtn",value:function(){var A,M=this.state.isProgressing,Ve=this.props.flowInfo,Oe=(A={},(0,Ot.default)(A,Qe.IF.LOOP,{tip:_l("\u7ACB\u5373\u89E6\u53D1\u4E00\u6761\u6D41\u7A0B\uFF0C\u6267\u884C\u65F6\u95F4\u5373\u4E3A\u7CFB\u7EDF\u7684\u5F53\u524D\u65F6\u95F4")}),(0,Ot.default)(A,"default",{tip:_l("\u624B\u52A8\u9009\u62E9\u4E00\u6761\u6570\u636E\u6E90\uFF0C\u7ACB\u5373\u89E6\u53D1\u4E00\u6761\u6D41\u7A0B")}),A),it=Oe[Ve.startAppType===Qe.IF.LOOP?Qe.IF.LOOP:"default"];return Ve.publishStatus===2&&Ve.enabled&&U().includes([Qe.IF.SHEET,Qe.IF.LOOP,Qe.IF.DATE,Qe.IF.CUSTOM_ACTION,Qe.IF.APPROVAL_START,Qe.IF.EVENT_PUSH],Ve.startAppType)?i.createElement("span",{className:"workflowAction ThemeHoverColor3 ThemeHoverBorderColor3 workflowDetailTipsWidth","data-tip":it.tip,onClick:this.action},M?_l("\u6267\u884C\u4E2D..."):_l("\u7ACB\u5373\u6267\u884C%03000")):null}},{key:"renderPublishDialog",value:function(){var A=this,M=this.state,Ve=M.showPublishDialog,Oe=M.data,it=M.showApprovalFields,ot=M.showApprovalDetail;return Ve?i.createElement(In.Z,{visible:!0,width:640},i.createElement("div",{className:"publishSuccessDialog"},i.createElement("div",{className:"publishSuccessImg"}),Oe.apps.length?i.createElement(i.Fragment,null,i.createElement("div",{className:"Font20 mTop35"},_l("\u6D41\u7A0B\u5DF2\u6210\u529F\u53D1\u5E03\uFF01")),i.createElement("div",{className:"Font14 mTop25 bold"},_l("\u662F\u5426\u4E3A%0\u5F00\u542F\u5BA1\u6279\u529F\u80FD\u9879",Oe.apps.map(function(qe){return"\u201C"+qe.name+"\u201D"}).join("\u3001"))),i.createElement("div",{className:"mTop30 flexRow w100 alignItemsCenter justifyContentCenter"},i.createElement(Te.Z,{className:"mRight5",checked:it,text:_l("\u5728\u89C6\u56FE\u4E0A\u663E\u793A\u5BA1\u6279\u7CFB\u7EDF\u5B57\u6BB5"),onClick:function(It){return A.setState({showApprovalFields:!It})}}),i.createElement(Vn.Z,{title:null,arrowPointAtCenter:!0,placement:"bottomLeft",content:i.createElement("img",{width:500,src:Ct()})},i.createElement(C.Z,{type:"workflow_help",className:"Font16 Gray_9e"}))),i.createElement("div",{className:"mTop15 flexRow w100 alignItemsCenter justifyContentCenter"},i.createElement(Te.Z,{className:"mRight5",checked:ot,text:_l("\u6253\u5F00\u8BB0\u5F55\u65F6\u663E\u793A\u5BA1\u6279\u6D41\u8F6C\u8BE6\u60C5"),onClick:function(It){return A.setState({showApprovalDetail:!It})}}),i.createElement(Vn.Z,{title:null,arrowPointAtCenter:!0,placement:"bottomLeft",content:i.createElement("img",{width:500,src:vt()})},i.createElement(C.Z,{type:"workflow_help",className:"Font16 Gray_9e"}))),i.createElement(Zn.ZP,{size:"large",onClick:function(){var It=[];it&&It.push({state:!0,type:40,roleType:0}),ot&&It.push({state:!0,type:41,roleType:0}),It.length&&Oe.apps.forEach(function(ft){var st=ft.id;ce.Z.batchEditSwitch({worksheetId:st,switchList:It}).then(function(Zt){Zt||alert(_l("\u4FEE\u6539\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01"),2)})}),A.setState({showPublishDialog:!1,showApprovalFields:!1,showApprovalDetail:!1})},className:"mTop40"},_l("\u786E\u5B9A"))):i.createElement(i.Fragment,null,i.createElement("div",{className:"Font20 mTop35"},_l("\u592A\u68D2\u4E86\uFF01\u6D41\u7A0B\u5DF2\u81EA\u52A8\u5316\u8FD0\u884C")),i.createElement("div",{className:"Font14 mTop25 Gray_75"},_l("\u4F60\u518D\u4E00\u6B21\u4E3A\u5927\u5BB6\u8282\u7701\u65F6\u95F4\u63D0\u5347\u4E86\u5DE5\u4F5C\u6548\u7387\uFF01")),i.createElement("div",{className:"Font14 mTop15 Gray_75",dangerouslySetInnerHTML:{__html:_l("\u4E00\u6BB5\u65F6\u95F4\u540E\uFF0C\u4F60\u5C31\u53EF\u4EE5\u5728%0\u4E2D\u770B\u5230\u8FDB\u5165\u6D41\u7A0B\u7684\u6570\u636E\u548C\u8BE6\u7EC6\u7684\u8FD0\u884C\u72B6\u6001\u4E86",'<span class="mLeft5 mRight5 ThemeColor3 ThemeHoverColor2 pointer publishDialogOpenHistory">'+_l("\u5386\u53F2")+"</span>")}}),i.createElement(Zn.ZP,{size:"large",onClick:function(){return A.setState({showPublishDialog:!1})},className:"mTop40"},_l("\u6211\u77E5\u9053\u4E86"))))):null}},{key:"hasTodoNode",value:function(A){var M=!1;return cn()(A).forEach(function(Ve){U().includes([Qe.QZ.WRITE,Qe.QZ.APPROVAL,Qe.QZ.CC,Qe.QZ.MESSAGE,Qe.QZ.EMAIL,Qe.QZ.NOTICE],A[Ve].typeId)&&(M=!0)}),M}},{key:"render",value:function(){var A=this,M=this.state,Ve=M.visible,Oe=M.publishErrorVisible,it=M.errorInfo,ot=this.props,qe=ot.tabIndex,It=ot.switchTabs,ft=ot.flowInfo;return i.createElement("div",{className:T()("workflowSettingsHeader flexRow",{workflowReleaseHeader:ft.parentId})},i.createElement("i",{className:"icon-backspace Font20 ThemeColor3 workflowReturn",onClick:this.back}),i.createElement("div",{className:"flex relative w100 h100"},i.createElement("div",{className:"flexColumn workflowHeaderDesc"},i.createElement("div",{className:"Font17 ellipsis pointer",onClick:function(){return A.setState({visible:!0})}},ft.name),i.createElement(Tt.default,{placement:"bottomLeft",title:ft.explain||_l("\u6DFB\u52A0\u6D41\u7A0B\u8BF4\u660E...")},i.createElement("div",{className:"Gray_9e ellipsis pointer Font12",onClick:function(){return A.setState({visible:!0})}},ft.explain||_l("\u6DFB\u52A0\u6D41\u7A0B\u8BF4\u660E..."))))),$n.filter(function(st){return ft.startAppType!==Qe.IF.APPROVAL_START||st.tabIndex!==3}).map(function(st,Zt){return i.createElement("div",{key:Zt,className:T()("Font16 ThemeColor3 ThemeBorderColor3 workflowHeaderTab",{active:qe===st.tabIndex,mRight60:$n.length-1===Zt}),onClick:function(){return It(st.tabIndex)}},st.name)}),i.createElement("div",{className:"flex flexRow",style:{justifyContent:"flex-end"}},ft.parentId?i.createElement("div",{className:"workflowReleaseBtnBox"},i.createElement("div",{className:"workflowReleaseBtn"},_l("\u5386\u53F2\u7248\u672C"),i.createElement("span",{className:"mLeft5"},createTimeSpan(ft.lastPublishDate)),i.createElement("span",{"data-tip":_l("\u6062\u590D")},i.createElement(C.Z,{className:"Font18 mLeft10 White ThemeHoverColor3 pointer",icon:"restore2",onClick:this.handleRestoreVisible})))):i.createElement(i.Fragment,null,this.renderActionBtn(),i.createElement(qn,{disabledClose:ft.startAppType===Qe.IF.APPROVAL_START&&ft.enabled,status:ft.enabled?"active":"close",pending:!!ft.pending,isRefresh:ft.publishStatus===1&&ft.enabled,isNew:!ft.publish,switchStatus:this.switchStatus,publishFlow:this.publishOrCloseFlow,refreshPublish:this.publishOrCloseFlow}))),Ve&&i.createElement(rn,{onCancel:function(){return A.setState({visible:!1})},onOk:this.updateProcess,flowName:ft.name,explain:ft.explain}),Oe&&i.createElement(rt,{info:it,onOk:function(){A.props.switchTabs(1),A.setState({publishErrorVisible:!1}),A.errorNodeCenter()},onCancel:function(){return A.setState({publishErrorVisible:!1})}}),this.renderPublishDialog())}}]),Ae}(i.Component),Rn.defaultProps={tabIndex:1,switchTabs:function(){}},fe);const en=(0,Fe.$j)(function(Wn){return Wn.workflow})(gn);var _t=t(69203),nn=t(7823),Gt=t(61109);const xt=function(){return i.createElement("div",{className:"flexColumn"},i.createElement("section",{className:"workflowEndBox"},i.createElement("div",{className:"workflowEnd"}),i.createElement("div",{className:"Font13 mTop10 Gray_9e"},_l("\u6D41\u7A0B\u7ED3\u675F"))))};var Mt=t(25273),ze=t(95679),yt=t(52945),Ut=t.n(yt),Wt=t(66946),kn=t(87506),on=t.n(kn),En=t(33126),fn=t(77863),jn=t(49365),Ta=t(82066),zn=t(81912),pa,Ea,la=(Ea=pa=function(Wn){(0,y.default)(Ae,Wn);function Ae(Ge){(0,e.default)(this,Ae);var A=(0,m.default)(this,(Ae.__proto__||k()(Ae)).call(this,Ge));return A.state={selectAppId:Ge.appId,selectProcessId:"",appList:null,processList:[]},A}return(0,oe.default)(Ae,[{key:"componentDidMount",value:function(){var A=this.state.selectAppId;this.getAppList(),A&&this.getProcessByApp(A)}},{key:"getAppList",value:function(){var A=this,M=this.state.selectAppId;jn.Z.getManagerApps({projectId:this.props.companyId}).then(function(Ve){Ve=Ve.map(function(Oe){var it=Oe.appId,ot=Oe.appName;return M===it&&(ot+=_l("\uFF08\u672C\u5E94\u7528\uFF09")),{value:it,text:ot}}),A.setState({appList:Ve}),!M&&Ve.length&&(A.setState({selectAppId:Ve[0].value}),A.getProcessByApp(Ve[0].value))})}},{key:"getProcessByApp",value:function(A){var M=this;zn.Z.list({relationId:A,processListType:11}).then(function(Ve){var Oe=[];Ve.forEach(function(it){it.processList.forEach(function(ot){var qe=ot.id,It=ot.name;Oe.push({value:qe,text:It})})}),M.setState({processList:Oe})})}},{key:"renderContent",value:function(){var A=this,M=this.props,Ve=M.onOk,Oe=M.onCancel,it=this.state,ot=it.selectAppId,qe=it.selectProcessId,It=it.appList,ft=it.processList;return i.createElement(i.Fragment,null,i.createElement("div",{className:"formItem flexRow mTop10"},i.createElement("div",{className:"label"},_l("\u5E94\u7528")),i.createElement("div",{className:"content"},i.createElement(te.Z,{border:!0,className:"w100",placeholder:_l("\u8BF7\u9009\u62E9"),noData:_l("\u6CA1\u6709\u53EF\u9009\u7684\u5E94\u7528"),openSearch:!0,value:ot,data:It,onChange:function(Zt){A.setState({selectAppId:Zt,selectProcessId:""}),A.getProcessByApp(Zt)}}))),i.createElement("div",{className:"formItem flexRow mTop15"},i.createElement("div",{className:"label"},_l("\u5BA1\u6279\u6D41\u7A0B")),i.createElement("div",{className:"content"},i.createElement(te.Z,{border:!0,className:"w100",placeholder:_l("\u8BF7\u9009\u62E9"),noData:_l("\u6CA1\u6709\u53EF\u9009\u7684\u5BA1\u6279\u6D41\u7A0B"),openSearch:!0,value:qe,data:ft,onChange:function(Zt){return A.setState({selectProcessId:Zt})}}))),i.createElement("div",{className:"btns TxtRight mTop20"},i.createElement(Zn.ZP,{type:"link",onClick:Oe},_l("\u53D6\u6D88")),i.createElement(Zn.ZP,{disabled:!ot||!qe,onClick:function(){Ve({appId:ot,processId:qe}),Oe()}},_l("\u786E\u5B9A"))))}},{key:"render",value:function(){var A=this.props.onCancel,M=this.state.appList;return i.createElement(E.Z,{className:"selectUserFromAppDialog",visible:!0,title:_l("\u4ECE\u5DF2\u6709\u5BA1\u6279\u6D41\u7A0B\u590D\u5236"),overlayClosable:!1,footer:null,onCancel:A},M===null?i.createElement(Bt.Z,null):this.renderContent())}}]),Ae}(i.Component),pa.propTypes={appId:xe().string,companyId:xe().string.isRequired,onOk:xe().func,onCancel:xe().func},pa.defaultProps={appId:"",onOk:function(){},onCancel:function(){}},Ea),Kn=t(39816),sa=t(19575),ba=t(40340),Fa=(0,En.Z)(me.Z),wa=function(Wn){(0,y.default)(Ae,Wn);function Ae(Ge){(0,e.default)(this,Ae);var A=(0,m.default)(this,(Ae.__proto__||k()(Ae)).call(this,Ge));A.cacheList=[],A.createBranchNode=function(Oe){var it=Oe.isOrdinary,ot=Oe.moveType,qe=A.props.nodeId,It=A.state.selectItem;A.isConditionalBranch()?A.addFlowNode({name:"",prveId:qe,resultFlow:!it,typeId:Qe.QZ.BRANCH,moveType:ot}):A.addFlowNode({actionId:It.actionId,appType:It.appType,name:It.name,prveId:qe,typeId:It.type,moveType:ot})},A.addFlowNode=function(Oe){var it=A.props,ot=it.flowInfo,qe=it.addFlowNode,It=it.selectAddNodeId,ft=it.selectProcessId;qe(ft||ot.id,Oe),It("")};var M=(0,pn.vo)(Ge.flowInfo.companyId),Ve=!M.isProjectAdmin&&!M.isSuperAdmin;return A.state={list:[{id:"data",name:_l("\u6570\u636E\u5904\u7406%03017"),items:[{type:6,name:_l("\u65B0\u589E\u8BB0\u5F55%03018"),appType:1,actionId:"1",iconColor:"#FFA340",iconName:"icon-workflow_new"},{type:6,name:_l("\u66F4\u65B0\u8BB0\u5F55%03019"),appType:1,actionId:"2",iconColor:"#FFA340",iconName:"icon-workflow_update"},{type:7,name:_l("\u83B7\u53D6\u5355\u6761\u6570\u636E%03021"),iconColor:"#FFA340",iconName:"icon-search",isGroupList:!0,secondList:[{typeText:_l("\u4ECE\u5DE5\u4F5C\u8868\u83B7\u53D6"),source:[{type:7,appType:1,actionId:"421",name:_l("\u67E5\u8BE2\u5E76\u66F4\u65B0\u8BB0\u5F55"),describe:_l("\u6839\u636E\u67E5\u8BE2\u6761\u4EF6\u4ECE\u5DE5\u4F5C\u8868\u4E2D\u83B7\u53D6\u4E00\u6761\u8BB0\u5F55\u5E76\u540C\u65F6\u66F4\u65B0\u8BB0\u5F55\u503C")},{type:7,appType:1,actionId:"422",name:_l("\u67E5\u8BE2\u5E76\u5220\u9664\u8BB0\u5F55"),describe:_l("\u6839\u636E\u67E5\u8BE2\u6761\u4EF6\u4ECE\u5DE5\u4F5C\u8868\u4E2D\u67E5\u627E\u4E00\u6761\u8BB0\u5F55\u540E\u76F4\u63A5\u5220\u9664")},{type:7,appType:1,actionId:"406",name:_l("\u67E5\u8BE2\u5DE5\u4F5C\u8868"),describe:_l("\u6839\u636E\u67E5\u8BE2\u6761\u4EF6\u4ECE\u5DE5\u4F5C\u8868\u4E2D\u83B7\u53D6\u4E00\u6761\u8BB0\u5F55")}]},{typeText:_l("\u5176\u4ED6"),source:[{type:6,appType:1,actionId:"20",name:_l("\u83B7\u53D6\u5173\u8054\u8BB0\u5F55"),describe:_l("\u83B7\u53D6\u5173\u8054\u8BB0\u5F55\u3001\u5B50\u8868\u3001\u7EA7\u8054\u9009\u62E9\u5B57\u6BB5\u4E2D\u7684\u8BB0\u5F55")},{type:7,appType:1,actionId:"407",name:_l("\u4ECE\u591A\u6761\u6570\u636E\u4E2D\u83B7\u53D6"),describe:_l("\u4ECE\u591A\u6761\u6570\u636E\u8282\u70B9\u83B7\u53D6\u4E00\u6761\u7B26\u5408\u6761\u4EF6\u7684\u8BB0\u5F55")},{type:7,appType:1,actionId:"420",name:_l("\u4ECE\u8BB0\u5F55\u94FE\u63A5\u83B7\u53D6"),describe:_l("\u4ECE\u5B58\u6709\u8BB0\u5F55\u94FE\u63A5\u7684\u6587\u672C\u5B57\u6BB5\u83B7\u53D6\u4E00\u6761\u6307\u5B9A\u8BB0\u5F55")}]}]},{type:13,name:_l("\u83B7\u53D6\u591A\u6761\u6570\u636E%03022"),iconColor:"#FFA340",iconName:"icon-transport",isGroupList:!0,secondList:[{typeText:_l("\u4ECE\u5DE5\u4F5C\u8868\u83B7\u53D6"),source:[{type:13,appType:1,actionId:"412",name:_l("\u67E5\u8BE2\u5E76\u6279\u91CF\u66F4\u65B0"),describe:_l("\u6839\u636E\u67E5\u8BE2\u6761\u4EF6\u4ECE\u5DE5\u4F5C\u8868\u83B7\u53D6\u591A\u6761\u6570\u636E\u5E76\u6279\u91CF\u66F4\u65B0\uFF0C\u540E\u7EED\u8282\u70B9\u53EF\u4F7F\u7528\u65B0\u503C")},{type:13,appType:1,actionId:"413",name:_l("\u67E5\u8BE2\u5E76\u6279\u91CF\u5220\u9664"),describe:_l("\u6839\u636E\u67E5\u8BE2\u6761\u4EF6\u4ECE\u5DE5\u4F5C\u8868\u627E\u5230\u591A\u6761\u6570\u636E\u5E76\u5220\u9664\uFF0C\u540E\u7EED\u8282\u70B9\u4E0D\u53EF\u4F7F\u7528")},{type:13,appType:1,actionId:"400",name:_l("\u67E5\u8BE2\u5DE5\u4F5C\u8868"),describe:_l("\u83B7\u53D6\u540E\u4EC0\u4E48\u4E5F\u4E0D\u505A\uFF0C\u5728\u4EE5\u540E\u8282\u70B9\u4F7F\u7528")}]},{typeText:_l("\u5176\u4ED6"),source:[{type:13,appType:1,actionId:"401",name:_l("\u83B7\u53D6\u5173\u8054\u8BB0\u5F55"),describe:_l("\u83B7\u53D6\u5173\u8054\u8BB0\u5F55\u3001\u5B50\u8868\u3001\u7EA7\u8054\u9009\u62E9\u5B57\u6BB5\u4E2D\u7684\u8BB0\u5F55")},{type:13,actionId:"402",name:_l("\u83B7\u53D6\u6279\u91CF\u65B0\u589E\u7ED3\u679C"),describe:_l("\u4ECE\u521B\u5EFA\u591A\u6761\u7684\u65B0\u589E\u8BB0\u5F55\u8282\u70B9\u83B7\u53D6\u521A\u521A\u521B\u5EFA\u7684\u8BB0\u5F55")},{type:13,appType:1,actionId:"405",name:_l("\u83B7\u53D6\u64CD\u4F5C\u660E\u7EC6"),describe:_l("\u4ECE\u5BA1\u6279\u3001\u586B\u5199\u3001\u6284\u9001\u8282\u70B9\u83B7\u53D6\u64CD\u4F5C\u660E\u7EC6\u3002\u5305\u542B\uFF1A\u64CD\u4F5C\u4EBA\u3001\u65F6\u95F4\u3001\u64CD\u4F5C\u5185\u5BB9\u3001\u5907\u6CE8\u7B49")},{type:13,appType:1,name:_l("\u83B7\u53D6\u6570\u7EC4\u5BF9\u8C61"),describe:_l("\u83B7\u53D6\u53D1\u9001API\u8BF7\u6C42\u3001\u8C03\u7528\u5DF2\u96C6\u6210API\u3001\u4EE3\u7801\u5757\u3001\u4E1A\u52A1\u6D41\u7A0B\u8F93\u5165/\u8F93\u51FA\u8282\u70B9\u7684JSON\u6570\u7EC4\u5BF9\u8C61")}]}]},{type:6,name:_l("\u5220\u9664\u8BB0\u5F55%03020"),appType:1,actionId:"3",iconColor:"#FFA340",iconName:"icon-hr_delete"},{type:9,name:_l("\u8FD0\u7B97%03035"),iconColor:"#01CA83",iconName:"icon-workflow_function",typeText:_l("\u8FD0\u7B97\u5BF9\u8C61"),secondList:[{type:9,name:_l("\u6570\u503C\u8FD0\u7B97"),actionId:"100",describe:_l("\u5BF9 \u6570\u503C/\u91D1\u989D \u7B49\u6570\u5B57\u7C7B\u578B\u5B57\u6BB5\u8FDB\u884C\u6570\u5B66\u8FD0\u7B97")},{type:9,name:_l("\u4E3A\u65E5\u671F\u52A0\u51CF\u65F6\u95F4"),actionId:"101",describe:_l("\u5BF9 \u65E5\u671F/\u65F6\u95F4 \u6DFB\u52A0/\u51CF\u53BB\u5E74\u3001\u6708\u3001\u5929\u3001\u5C0F\u65F6\u3001\u5206\u8FDB\u884C\u8BA1\u7B97")},{type:9,name:_l("\u65F6\u957F"),actionId:"104",describe:_l("\u8BA1\u7B97\u4E24\u4E2A\u65E5\u671F/\u65F6\u95F4\u4E4B\u95F4\u7684\u65F6\u957F\uFF0C\u5E76\u7CBE\u786E\u5230\u5E74\u3001\u6708\u3001\u5929\u3001\u65F6\u3001\u5206\u3001\u79D2")},{type:9,name:_l("\u51FD\u6570\u8BA1\u7B97"),actionId:"106",describe:_l("\u901A\u8FC7\u51FD\u6570\u5BF9 \u6587\u672C/\u6570\u503C/\u65E5\u671F\u65F6\u95F4 \u7B49\u6D41\u7A0B\u8282\u70B9\u5BF9\u8C61\u7684\u503C\u8FDB\u884C\u5904\u7406")}]},{type:1,name:_l("\u5206\u652F%03033"),iconColor:"#2196f3",iconName:"icon-workflow_branch"},{type:7,name:_l("\u6C47\u603B"),iconColor:"#01CA83",iconName:"icon-sigma",typeText:_l("\u6C47\u603B\u65B9\u5F0F"),secondList:[{type:9,name:_l("\u6C47\u603B\u6309\u94AE\u6279\u91CF\u6570\u636E\u6E90"),actionId:"108",describe:_l("\u5BF9\u81EA\u5B9A\u4E49\u52A8\u4F5C\u89E6\u53D1\u5DE5\u4F5C\u6D41\u4E2D\u7684\u6279\u91CF\u6570\u636E\u6E90\u8FDB\u884C\u6C47\u603B\u8BA1\u7B97")},{type:9,name:_l("\u4ECE\u5DE5\u4F5C\u8868\u6C47\u603B"),appType:1,actionId:"107",describe:_l("\u4ECE\u5DE5\u4F5C\u8868\u4E2D\u7B5B\u9009\u7B26\u5408\u6761\u4EF6\u7684\u6570\u636E\u5E76\u8FDB\u884C\u6C47\u603B\u8BA1\u7B97\uFF0C\u5982\uFF1A\u8BB0\u5F55\u6570\u91CF\u3001\u6C42\u548C\u3001\u5E73\u5747\u3001\u6700\u5927\u3001\u6700\u5C0F\u7B49\u3002\u6CE8\u610F\uFF1A\u5F53\u6570\u636E\u9891\u7E41\u53D8\u66F4\u65F6\u53EF\u80FD\u6709\u4E00\u5B9A\u5EF6\u65F6")},{type:9,name:_l("\u83B7\u53D6\u6570\u636E\u6761\u6570"),actionId:"105",describe:_l("\u6C47\u603B\u6D41\u7A0B\u4E2D\u7684\u591A\u6761\u6570\u636E\u5BF9\u8C61\u7684\u6761\u6570")}]}]},{id:"artificial",name:_l("\u5F85\u529E"),items:[{type:26,name:_l("\u53D1\u8D77\u5BA1\u6279\u6D41\u7A0B%03024"),iconColor:"#4158DB",iconName:"icon-approval",typeText:_l("\u6267\u884C\u6D41\u7A0B"),secondList:[{type:26,appType:10,name:_l("\u521B\u5EFA\u65B0\u6D41\u7A0B"),describe:_l("\u4ECE\u7A7A\u767D\u521B\u5EFA\u4E00\u6761\u65B0\u7684\u5BA1\u6279\u6D41\u7A0B"),isNew:!0},{type:26,appType:10,name:_l("\u4ECE\u5DF2\u6709\u5BA1\u6279\u6D41\u7A0B\u590D\u5236"),describe:_l("\u4ECE\u5DF2\u6709\u5BA1\u6279\u6D41\u7A0B\u590D\u5236\u4E0D\u5305\u62EC\u6570\u636E\u5BF9\u8C61\u5728\u5185\u7684\u6D41\u7A0B\u6846\u67B6\uFF0C\u6D89\u53CA\u76F8\u5173\u5BF9\u8C61\u7684\u5B57\u6BB5\u5C06\u88AB\u91CD\u7F6E\uFF0C\u9700\u8981\u91CD\u65B0\u914D\u7F6E\u8FD9\u4E9B\u8282\u70B9")}]},{type:4,name:_l("\u5BA1\u6279"),iconColor:"#7E57C2",iconName:"icon-workflow_ea"},{type:3,name:_l("\u586B\u5199%03025"),iconColor:"#00BCD4",iconName:"icon-workflow_write"},{type:5,name:_l("\u6284\u9001%03026"),iconColor:"#2196f3",iconName:"icon-workflow_notice"}]},{id:"notice",name:_l("\u901A\u77E5%03027"),items:[{type:27,name:_l("\u53D1\u9001\u7AD9\u5185\u901A\u77E5%03028"),iconColor:"#2196f3",iconName:"icon-hr_message_reminder"},{type:10,name:_l("\u53D1\u9001\u77ED\u4FE1%03029"),iconColor:"#2196f3",iconName:"icon-workflow_sms"},{type:11,name:_l("\u53D1\u9001\u90AE\u4EF6%03030"),appType:3,actionId:"202",iconColor:"#2196f3",iconName:"icon-workflow_email"},{type:17,featureId:fn.UU.interfacePush,name:_l("\u754C\u9762\u63A8\u9001"),iconColor:"#2196f3",iconName:"icon-interface_push"},{type:19,name:_l("\u53D1\u9001\u670D\u52A1\u53F7\u4FE1\u606F%03031"),appType:22,actionId:"203",iconColor:"#2196f3",iconName:"icon-wechat"}]},{id:"component",name:_l("\u6784\u4EF6%03032"),items:[{type:16,name:_l("\u5B50\u6D41\u7A0B%03038"),iconColor:"#4C7D9E",iconName:"icon-subprocess"},{type:20,name:_l("\u8C03\u7528\u5C01\u88C5\u4E1A\u52A1\u6D41\u7A0B%03039"),appType:17,actionId:"500",iconColor:"#4C7D9E",iconName:"icon-pbc"},{type:25,featureId:fn.UU.apiIntergrationNode,name:_l("\u8C03\u7528\u5DF2\u96C6\u6210 API%03040"),appType:42,iconColor:"#4C7D9E",iconName:"icon-api"},{type:12,name:_l("\u5EF6\u65F6%03034"),iconColor:"#4C7D9E",iconName:"icon-workflow_delayed",typeText:_l("\u5EF6\u65F6\u65B9\u5F0F"),secondList:[{type:12,name:_l("\u5EF6\u65F6\u5230\u6307\u5B9A\u65E5\u671F"),actionId:"300",describe:_l("\u5728\u4E0A\u4E00\u4E2A\u8282\u70B9\u5B8C\u6210\u540E\uFF0C\u5EF6\u65F6\u5230\u6307\u5B9A\u7684\u65E5\u671F\u548C\u65F6\u95F4\u540E\u518D\u7EE7\u7EED\u6267\u884C\u6D41\u7A0B")},{type:12,name:_l("\u5EF6\u65F6\u4E00\u6BB5\u65F6\u95F4"),actionId:"301",describe:_l("\u4E0A\u4E00\u8282\u70B9\u5B8C\u6210\u540E\uFF0C\u5EF6\u65F6\u4E00\u6BB5\u65F6\u95F4\u518D\u7EE7\u7EED\u6267\u884C\u6D41\u7A0B")}]},{type:15,name:_l("\u83B7\u53D6\u94FE\u63A5%03036"),appType:13,iconColor:"#4C7D9E",iconName:"icon-link2"},{type:18,featureId:fn.UU.getPrintFileNode,name:_l("\u83B7\u53D6\u8BB0\u5F55\u6253\u5370\u6587\u4EF6%03037"),appType:14,iconColor:"#4C7D9E",iconName:"icon-print"},{type:28,featureId:fn.UU.getPrintFileNode,name:_l("\u83B7\u53D6\u9875\u9762\u5FEB\u7167"),appType:44,iconColor:"#4C7D9E",iconName:"icon-camera_alt"},{type:6,name:_l("\u66F4\u65B0\u6D41\u7A0B\u53C2\u6570%03023"),appType:102,actionId:"2",iconColor:"#4C7D9E",iconName:"icon-parameter"},{type:6,featureId:fn.UU.globalVariable,name:_l("\u66F4\u65B0\u5168\u5C40\u53D8\u91CF"),appType:104,actionId:"2",iconColor:"#4C7D9E",iconName:"icon-global_variable"}]},{id:"developer",name:_l("\u5F00\u53D1\u8005%03041"),items:[{type:24,featureId:fn.UU.apiIntergrationNode,name:_l("API \u8FDE\u63A5\u4E0E\u8BA4\u8BC1%03042"),appType:41,iconColor:"#4C7D9E",iconName:"icon-connect"},{type:8,name:_l("\u53D1\u9001 API \u8BF7\u6C42%03043"),iconColor:"#4C7D9E",iconName:"icon-workflow_webhook",typeText:_l("\u53D1\u9001\u5BF9\u8C61"),secondList:[{type:8,appType:7,name:_l("\u53D1\u9001\u81EA\u5B9A\u4E49\u8BF7\u6C42"),describe:_l("\u5411 API \u53D1\u9001\u81EA\u5B9A\u4E49\u7684Query Param\u3001Header \u548C Body \u5185\u5BB9")},{type:8,appType:1,name:_l("\u53D1\u9001\u6307\u5B9A\u6570\u636E\u5BF9\u8C61"),describe:_l("\u5411 API \u53D1\u9001\u5DE5\u4F5C\u6D41\u8282\u70B9\u4E2D\u7684\u6570\u636E\u5BF9\u8C61")}]},{type:14,featureId:fn.UU.codeBlockNode,name:_l("\u4EE3\u7801\u5757%03044"),iconColor:"#4C7D9E",iconName:"icon-url",typeText:_l("\u65B0\u5EFA\u6216\u9009\u62E9\u5DF2\u6709\u4EE3\u7801\u7247\u6BB5"),secondList:[{type:14,name:_l("JavaScript"),actionId:"102",describe:_l("\u4F7F\u7528JavaScript\u8BED\u8A00")},{type:14,name:_l("Python"),actionId:"103",describe:_l("\u4F7F\u7528Python\u8BED\u8A00")},{type:14,name:_l("\u4ECE\u4EE3\u7801\u7247\u6BB5\u5E93\u4E2D\u9009\u62E9"),describe:_l("\u76F4\u63A5\u9009\u62E9\u5DF2\u6709\u7684\u4EE3\u7801\u7247\u6BB5"),isCustom:!0}]},{type:21,name:_l("JSON \u89E3\u6790%03045"),appType:18,actionId:"510",iconColor:"#4C7D9E",iconName:"icon-task_custom_polymer"}]},{id:"message",name:_l("\u7EC4\u7EC7/\u90E8\u95E8/\u534F\u4F5C%03046"),items:[{type:1e3,name:_l("\u83B7\u53D6\u5355\u6761\u4EBA\u5458/\u90E8\u95E8/\u7EC4\u7EC7\u89D2\u8272\u6570\u636E%03047"),iconColor:"#2196f3",iconName:"icon-person_search",isGroupList:!0,secondList:[{typeText:_l("\u83B7\u53D6\u5355\u6761\u4EBA\u5458\u4FE1\u606F"),describe:_l("\u83B7\u53D6\u4E00\u540D\u4EBA\u5458\u7684\u76F8\u5173\u4FE1\u606F\uFF0C\u5305\u542B\u4E2A\u4EBA\u4FE1\u606F\uFF08\u59D3\u540D\u3001\u6027\u522B\u3001\u751F\u65E5\u3001\u624B\u673A\u3001\u90AE\u7BB1\uFF09\u548C\u7EC4\u7EC7\u4FE1\u606F\uFF08\u90E8\u95E8\u3001\u804C\u4F4D\u3001\u5DE5\u53F7\u3001\u4E0A\u4E0B\u7EA7\uFF08\u53EF\u9009\uFF09\uFF09"),source:[{type:1e3,appType:20,actionId:"20",name:_l("\u4ECE\u6210\u5458\u5B57\u6BB5\u83B7\u53D6")},{type:1e3,appType:20,actionId:"406",name:_l("\u4ECE\u6240\u6709\u7EC4\u7EC7\u6210\u5458\u4E2D\u67E5\u627E"),disabled:Ve}]},{typeText:_l("\u83B7\u53D6\u5355\u6761\u90E8\u95E8\u4FE1\u606F"),describe:_l("\u83B7\u53D6\u4E00\u4E2A\u90E8\u95E8\u7684\u76F8\u5173\u4FE1\u606F\uFF0C\u5305\u542B\u90E8\u95E8\u540D\u79F0\u3001\u90E8\u95E8\u8D1F\u8D23\u4EBA\u3001\u90E8\u95E8\u4EBA\u5458\u53CA\u4E0A\u4E0B\u7EA7\u90E8\u95E8"),source:[{type:1e3,appType:21,actionId:"20",name:_l("\u4ECE\u90E8\u95E8\u5B57\u6BB5\u83B7\u53D6")},{type:1e3,appType:21,actionId:"406",name:_l("\u4ECE\u6240\u6709\u7EC4\u7EC7\u90E8\u95E8\u4E2D\u67E5\u627E"),disabled:Ve}]},{typeText:_l("\u83B7\u53D6\u5355\u6761\u7EC4\u7EC7\u89D2\u8272\u4FE1\u606F"),describe:_l("\u83B7\u53D6\u4E00\u4E2A\u7EC4\u7EC7\u89D2\u8272\u7684\u76F8\u5173\u4FE1\u606F\uFF0C\u5305\u542B\u89D2\u8272\u540D\u79F0\u3001\u5907\u6CE8\u3001\u89D2\u8272\u4E0B\u4EBA\u5458"),source:[{type:1e3,appType:24,actionId:"20",name:_l("\u4ECE\u7EC4\u7EC7\u89D2\u8272\u5B57\u6BB5\u83B7\u53D6")},{type:1e3,appType:24,actionId:"406",name:_l("\u4ECE\u6240\u6709\u7EC4\u7EC7\u89D2\u8272\u4E2D\u67E5\u627E"),disabled:Ve}]}]},{type:1001,name:_l("\u83B7\u53D6\u591A\u6761\u4EBA\u5458/\u90E8\u95E8/\u7EC4\u7EC7\u89D2\u8272\u6570\u636E%03048"),iconColor:"#2196f3",iconName:"icon-group-members",isGroupList:!0,secondList:[{typeText:_l("\u83B7\u53D6\u591A\u6761\u4EBA\u5458\u4FE1\u606F"),describe:_l("\u83B7\u53D6\u591A\u540D\u4EBA\u5458\u7684\u76F8\u5173\u4FE1\u606F\uFF0C\u5305\u542B\u4E2A\u4EBA\u4FE1\u606F\uFF08\u59D3\u540D\u3001\u6027\u522B\u3001\u751F\u65E5\u3001\u624B\u673A\u3001\u90AE\u7BB1\uFF09\u548C\u7EC4\u7EC7\u4FE1\u606F\uFF08\u90E8\u95E8\u3001\u804C\u4F4D\u3001\u5DE5\u53F7\u3001\u4E0A\u4E0B\u7EA7\uFF08\u53EF\u9009\uFF09\uFF09"),source:[{type:1001,appType:20,actionId:"401",name:_l("\u4ECE\u6210\u5458\u5B57\u6BB5\u83B7\u53D6")},{type:1001,appType:20,actionId:"400",name:_l("\u4ECE\u6240\u6709\u7EC4\u7EC7\u6210\u5458\u4E2D\u67E5\u627E"),disabled:Ve}]},{typeText:_l("\u83B7\u53D6\u591A\u6761\u90E8\u95E8\u4FE1\u606F"),describe:_l("\u83B7\u53D6\u591A\u4E2A\u90E8\u95E8\u7684\u76F8\u5173\u4FE1\u606F\uFF0C\u5305\u542B\u90E8\u95E8\u540D\u79F0\u3001\u90E8\u95E8\u8D1F\u8D23\u4EBA\u3001\u90E8\u95E8\u4EBA\u5458\u53CA\u4E0A\u4E0B\u7EA7\u90E8\u95E8"),source:[{type:1001,appType:21,actionId:"401",name:_l("\u4ECE\u90E8\u95E8\u5B57\u6BB5\u83B7\u53D6")},{type:1001,appType:21,actionId:"400",name:_l("\u4ECE\u6240\u6709\u7EC4\u7EC7\u90E8\u95E8\u4E2D\u67E5\u627E"),disabled:Ve}]},{typeText:_l("\u83B7\u53D6\u591A\u6761\u7EC4\u7EC7\u89D2\u8272\u4FE1\u606F"),describe:_l("\u83B7\u53D6\u591A\u4E2A\u7EC4\u7EC7\u89D2\u8272\u7684\u76F8\u5173\u4FE1\u606F\uFF0C\u5305\u542B\u89D2\u8272\u540D\u79F0\u3001\u5907\u6CE8\u3001\u89D2\u8272\u4E0B\u4EBA\u5458"),source:[{type:1001,appType:24,actionId:"401",name:_l("\u4ECE\u7EC4\u7EC7\u89D2\u8272\u5B57\u6BB5\u83B7\u53D6")},{type:1001,appType:24,actionId:"400",name:_l("\u4ECE\u6240\u6709\u7EC4\u7EC7\u89D2\u8272\u4E2D\u67E5\u627E"),disabled:Ve}]}]},{type:6,name:_l("\u521B\u5EFA\u4EFB\u52A1%03049"),appType:2,actionId:"1",iconColor:"#01CA83",iconName:"icon-custom_assignment"},{type:6,appType:43,name:_l("\u521B\u5EFA\u65E5\u7A0B"),iconColor:"#F15B75",iconName:"icon-sidebar_calendar",typeText:_l("\u521B\u5EFA\u65B9\u5F0F"),secondList:[{type:6,appType:43,actionId:"1",name:_l("\u521B\u5EFA\u7CFB\u7EDF\u65E5\u7A0B"),describe:_l("\u521B\u5EFA\u4E00\u4E2A\u7CFB\u7EDF\u5185\u65E5\u7A0B\u3002\u53EF\u540C\u65F6\u751F\u6210\u4E00\u4E2AICS\u6587\u4EF6\u5728\u4E4B\u540E\u8282\u70B9\u4E2D\u4F7F\u7528")},{type:6,appType:43,actionId:"4",name:_l("\u751F\u6210ICS\u6587\u4EF6"),describe:_l("\u4EC5\u751F\u6210\u4E00\u4E2A\u65E5\u7A0BICS\u6587\u4EF6\uFF0C\u53EF\u6DFB\u52A0\u81F3\u4E2A\u4EBA\u65E5\u5386")}]}]},{id:"external",name:_l("\u5916\u90E8\u7528\u6237%03050"),items:[{type:6,name:_l("\u66F4\u65B0\u5916\u90E8\u7528\u6237\u4FE1\u606F%03051"),appType:23,actionId:"2",iconColor:"#FFA340",iconName:"icon-update_information"},{type:6,name:_l("\u9080\u8BF7\u5916\u90E8\u7528\u6237%03052"),appType:23,actionId:"1",iconColor:"#FFA340",iconName:"icon-invited_users"},{type:1e3,name:_l("\u83B7\u53D6\u5355\u6761\u5916\u90E8\u4EBA\u5458\u6570\u636E%03053"),iconColor:"#2196f3",iconName:"icon-external_users",typeText:_l("\u83B7\u53D6\u65B9\u5F0F"),secondList:[{type:1e3,appType:23,actionId:"20",name:_l("\u4ECE\u5916\u90E8\u7528\u6237\u5B57\u6BB5\u83B7\u53D6"),describe:_l("\u4ECE\u5916\u90E8\u7528\u6237\u5B57\u6BB5\u83B7\u53D6\u4E00\u540D\u6307\u5B9A\u4EBA\u5458\u7684\u76F8\u5173\u4FE1\u606F")},{type:1e3,appType:23,actionId:"406",name:_l("\u4ECE\u5916\u90E8\u95E8\u6237\u4E2D\u83B7\u53D6"),describe:_l("\u4ECE\u5F53\u524D\u5E94\u7528\u7684\u6240\u6709\u5916\u90E8\u7528\u6237\u4E2D\u83B7\u53D6\u4E00\u540D\u6307\u5B9A\u4EBA\u5458\u7684\u76F8\u5173\u4FE1\u606F")}]},{type:1001,name:_l("\u83B7\u53D6\u591A\u6761\u5916\u90E8\u4EBA\u5458\u6570\u636E%03054"),iconColor:"#2196f3",iconName:"icon-folder-public",typeText:_l("\u83B7\u53D6\u65B9\u5F0F"),secondList:[{type:1001,appType:23,actionId:"401",name:_l("\u4ECE\u5916\u90E8\u7528\u6237\u5B57\u6BB5\u83B7\u53D6"),describe:_l("\u4ECE\u5916\u90E8\u7528\u6237\u5B57\u6BB5\u83B7\u53D6\u6279\u91CF\u7528\u6237\u7684\u76F8\u5173\u4FE1\u606F")},{type:1001,appType:23,actionId:"400",name:_l("\u4ECE\u5916\u90E8\u95E8\u6237\u4E2D\u83B7\u53D6"),describe:_l("\u4ECE\u5F53\u524D\u5E94\u7528\u7684\u6240\u6709\u5916\u90E8\u7528\u6237\u4E2D\u83B7\u53D6\u6279\u91CF\u7528\u6237\u7684\u76F8\u5173\u4FE1\u606F")}]}]}],selectItem:null,selectSecond:!1,branchDialogModel:0,foldFeatures:safeParse(localStorage.getItem("workflowFoldFeatures-"+md.global.Account.accountId))||{},showApprovalDialog:!1,showCodeSnippetDialog:!1},(!U().includes([Qe.IF.CUSTOM_ACTION,Qe.IF.PBC,Qe.IF.SHEET],Ge.flowInfo.startAppType)||Ge.flowInfo.child)&&A.state.list.forEach(function(Oe){U().remove(Oe.items,function(it){return it.type===Qe.QZ.PUSH})}),Ge.flowInfo.startAppType===Qe.IF.EXTERNAL_USER&&Ge.flowInfo.startTriggerId===Qe.FH.DISCUSS&&(U().remove(A.state.list,function(Oe){return Oe.id!=="notice"}),A.state.list.forEach(function(Oe){U().remove(Oe.items,function(it){return it.type===Qe.QZ.CC})})),md.global.SysSettings.hideWeixin&&A.state.list.forEach(function(Oe){U().remove(Oe.items,function(it){return it.type===Qe.QZ.TEMPLATE})}),md.global.SysSettings.enableSmsCustomContent||A.state.list.forEach(function(Oe){U().remove(Oe.items,function(it){return it.type===Qe.QZ.MESSAGE})}),[{featureId:fn.UU.apiIntergrationNode,type:[Qe.QZ.API_PACKAGE,Qe.QZ.API]},{featureId:fn.UU.codeBlockNode,type:[Qe.QZ.CODE]},{featureId:fn.UU.getPrintFileNode,type:[Qe.QZ.FILE,Qe.QZ.SNAPSHOT]},{featureId:fn.UU.interfacePush,type:[Qe.QZ.PUSH]},{featureId:fn.UU.globalVariable,type:[Qe.QZ.ACTION],appType:Qe.IF.GLOBAL_VARIABLE}].forEach(function(Oe){U().includes(["1","2"],(0,pn.XH)(Ge.flowInfo.companyId,Oe.featureId))||A.state.list.forEach(function(it){Oe.appType?U().remove(it.items,function(ot){return U().includes(Oe.type,ot.type)&&Oe.appType===ot.appType}):U().remove(it.items,function(ot){return U().includes(Oe.type,ot.type)})})}),(Ge.flowInfo.startAppType!==Qe.IF.CUSTOM_ACTION||U().get(Ge,"flowNodeMap[props.flowInfo.startNodeId].actionId")!==Qe.gp.BATCH_ACTION)&&A.state.list.forEach(function(Oe){Oe.items.forEach(function(it){U().remove(it.secondList||[],function(ot){return ot.actionId===Qe.gp.CUSTOM_ACTION_TOTAL})})}),A.state.list.forEach(function(Oe){U().remove(Oe.items,function(it){return it.appType===Qe.IF.TASK&&md.global.SysSettings.forbidSuites.indexOf("2")>-1||it.appType===Qe.IF.CALENDAR&&md.global.SysSettings.forbidSuites.indexOf("3")>-1})}),A.cacheList=U().cloneDeep(A.state.list),A}return(0,oe.default)(Ae,[{key:"componentWillReceiveProps",value:function(A,M){A.nodeId&&A.nodeId!==this.props.nodeId&&this.setState({selectItem:null,selectSecond:!1,branchDialogModel:0,showApprovalDialog:!1}),(A.selectProcessId&&A.flowInfo.id!==A.selectProcessId||A.isApproval)&&(U().remove(this.state.list,function(Ve){return U().includes(["artificial","external"],Ve.id)}),this.state.list.forEach(function(Ve){U().remove(Ve.items,function(Oe){return!(U().includes([Qe.QZ.SEARCH,Qe.QZ.WEBHOOK,Qe.QZ.FORMULA,Qe.QZ.MESSAGE,Qe.QZ.EMAIL,Qe.QZ.DELAY,Qe.QZ.GET_MORE_RECORD,Qe.QZ.CODE,Qe.QZ.TEMPLATE,Qe.QZ.JSON_PARSE,Qe.QZ.API_PACKAGE,Qe.QZ.API,Qe.QZ.NOTICE,Qe.QZ.FIND_SINGLE_MESSAGE,Qe.QZ.FIND_MORE_MESSAGE],Oe.type)||Oe.type===Qe.QZ.ACTION&&Oe.actionId===Qe.gp.EDIT&&Oe.appType!==Qe.IF.PROCESS)}),Ve.items.forEach(function(Oe){U().remove(Oe.secondList||[],function(it){return it.actionId===Qe.gp.FROM_ADD})})})),A.selectProcessId||this.setState({list:U().cloneDeep(this.cacheList)})}},{key:"renderContent",value:function(){var A=this,M=this.props,Ve=M.flowInfo,Oe=M.selectProcessId,it=M.isApproval,ot=this.state,qe=ot.list,It=ot.selectItem,ft=ot.selectSecond,st=ot.foldFeatures;return ft?i.createElement("div",{className:"pTop20 pBottom15 pLeft20 pRight15"},It.typeText&&i.createElement("div",{className:"bold pLeft10 Font14"},It.typeText),It.type===Qe.QZ.CODE&&!md.global.SysSettings.hideHelpTip&&i.createElement("div",{className:"Gray_75 mTop10 pLeft10 InlineFlex"},_l("\u67E5\u770B\u5F53\u524D\u4EE3\u7801\u811A\u672C\u7684"),i.createElement(Wt.Z,{type:3,text:_l("\u8FD0\u884C\u7248\u672C"),className:"ThemeColor3 ThemeHoverColor2",href:"workflow/node-code-block#runtime-environment"})),It.isGroupList?(It.secondList||[]).map(function(Zt,On){return i.createElement(i.Fragment,{key:On},i.createElement("div",{className:"bold pLeft10 Font14"},Zt.typeText),Zt.describe&&i.createElement("div",{className:"Gray_75 pLeft10 mTop5"},Zt.describe),i.createElement("ul",{className:"secondNodeList mBottom25"},(Zt.source||[]).map(function(Fn,Ca){return i.createElement("li",{key:Ca,className:T()({disabled:Fn.disabled}),onClick:function(){if(Fn.disabled){alert(_l("\u4EC5\u7EC4\u7EC7\u7BA1\u7406\u5458\u53EF\u4EE5\u6DFB\u52A0"),3);return}A.createNodeClick(U().includes([6,7,13],Fn.type)?Fn:Ut()({},Fn,{name:Zt.typeText}))}},i.createElement(ze.Z,{className:"Font15",text:Fn.name,disabled:!0}),Fn.describe&&i.createElement("div",{className:"Gray_75 mLeft30 mTop5"},Fn.describe))})))}):i.createElement("ul",{className:"secondNodeList"},(It.secondList||[]).map(function(Zt,On){return i.createElement("li",{key:On,onClick:function(){return A.createNodeClick(Zt)}},i.createElement(ze.Z,{className:"Font15",text:Zt.name,disabled:!0}),i.createElement("div",{className:"Gray_75 mLeft30 mTop5"},Zt.describe))}))):i.createElement(i.Fragment,null,(Oe&&Ve.id!==Oe||it)&&i.createElement("div",{className:"createNodeMessageBox mBottom30 mLeft32 mRight32 mTop16 LineHeight20"},_l("\u5728\u5BA1\u6279\u8FC7\u7A0B\u4E2D\u6DFB\u52A0\u6570\u636E\u5904\u7406\u8282\u70B9\u3002\u5904\u7406\u7ED3\u679C\u7528\u4E8E\u5206\u652F\u5224\u65AD\u3001\u66F4\u65B0\u5BA1\u6279\u4E2D\u7684\u6570\u636E\u3002"),"\uFF08",_l("\u53EF\u5728\u5BA1\u6279\u6B65\u9AA4\u8282\u70B9\u4E2D\u914D\u7F6E\u66F4\u65B0\u6570\u636E"),i.createElement(Wt.Z,{type:3,text:_l("\u5982\u4F55\u8BBE\u7F6E\uFF1F"),href:"https://help.mingdao.com/workflow/node-approve#update"}),"\uFF09"),i.createElement("div",{className:"pBottom15 pLeft10 pRight10"},qe.map(function(Zt,On){return i.createElement("div",{className:"mTop15 nodeListContainer",key:On},i.createElement("div",{className:"Font16 bold pTop5 pBottom5 pointer",onClick:function(){var Ca=Ut()({},st,(0,Ot.default)({},Zt.id,!st[Zt.id]));A.setState({foldFeatures:Ca}),safeLocalStorageSetItem("workflowFoldFeatures-"+md.global.Account.accountId,j()(Ca))}},i.createElement(C.Z,{icon:st[Zt.id]?"arrow-right-tip":"arrow-down",className:"mRight13 Gray_9e Font13"}),Zt.name),!st[Zt.id]&&i.createElement("ul",{className:"nodeList clearfix"},Zt.items.filter(function(Fn){return!(Fn.type===25&&md.global.SysSettings.hideIntegration)}).map(function(Fn,Ca){return i.createElement("li",{key:Ca,onClick:function(){return A.createNodeClick(Fn)}},i.createElement("span",{className:"nodeListIcon",style:{backgroundColor:Fn.iconColor}},i.createElement("i",{className:Fn.iconName})),i.createElement("div",{className:"Font14"},Fn.name),Fn.type===Qe.QZ.APPROVAL&&i.createElement(h.Z,{popupPlacement:"bottom",text:_l("\u4F7F\u7528\u300C\u53D1\u8D77\u5BA1\u6279\u6D41\u7A0B\u300D\u8282\u70B9\u53EF\u63D0\u4F9B\u66F4\u5B8C\u6574\u7684\u5BA1\u6279\u80FD\u529B\uFF0C\u65E7\u300C\u5BA1\u6279\u300D\u8282\u70B9\u5373\u5C06\u88AB\u4E0B\u7EBF\u3002\u6D41\u7A0B\u4E2D\u5DF2\u6DFB\u52A0\u7684\u5BA1\u6279\u8282\u70B9\u4E0D\u53D7\u5F71\u54CD\uFF0C\u4ECD\u53EF\u4EE5\u7EE7\u7EED\u4F7F\u7528\u3002")},i.createElement("div",{className:"Font12 nodeListOverdue"},_l("\u65E7%03089"))))})))})))}},{key:"isConditionalBranch",value:function(){var A=this.props,M=A.nodeId,Ve=A.flowNodeMap,Oe=Ve[M]||{},it=Oe.typeId,ot=Oe.actionId;return U().includes([Qe.QZ.APPROVAL,Qe.QZ.SEARCH,Qe.QZ.FIND_SINGLE_MESSAGE],it)||it===Qe.QZ.ACTION&&ot==="20"}},{key:"createNodeClick",value:function(A){var M=this.props,Ve=M.nodeId,Oe=M.isLast,it=M.flowInfo,ot=M.flowNodeMap,qe=this.state.selectItem,It=qe&&qe.featureId?qe.featureId:A.featureId,ft=(0,pn.XH)(it.companyId,It);if(A.secondList){if(U().includes([Qe.QZ.CODE],A.type)&&ft==="2"){(0,pn.j0)(it.companyId,It);return}this.setState({selectItem:A,selectSecond:!0});return}A.type===Qe.QZ.BRANCH&&this.isConditionalBranch()?this.setState({selectItem:A,branchDialogModel:2}):A.type===Qe.QZ.BRANCH&&!Oe&&(ot[(ot[Ve]||{}).nextId]||{}).actionId!==Qe.gp.PBC_OUT?this.setState({selectItem:A,branchDialogModel:1}):(U().includes([Qe.QZ.CODE,Qe.QZ.PUSH,Qe.QZ.FILE,Qe.QZ.API_PACKAGE,Qe.QZ.API,Qe.QZ.SNAPSHOT],A.type)||A.type===Qe.QZ.ACTION&&A.appType===Qe.IF.GLOBAL_VARIABLE)&&ft==="2"?(0,pn.j0)(it.companyId,It):A.type===Qe.QZ.APPROVAL_PROCESS&&!A.isNew?this.setState({showApprovalDialog:!0}):A.type===Qe.QZ.CODE&&A.isCustom?this.setState({showCodeSnippetDialog:!0}):this.addFlowNode({actionId:A.actionId,appType:A.appType,name:A.type===Qe.QZ.APPROVAL_PROCESS?_l("\u672A\u547D\u540D\u5BA1\u6279\u6D41\u7A0B"):A.name,prveId:Ve,typeId:A.type})}},{key:"render",value:function(){var A=this,M=this.props,Ve=M.nodeId,Oe=M.selectAddNodeId,it=M.flowInfo,ot=M.selectProcessId,qe=M.isApproval,It=M.selectCopy,ft=M.flowNodeMap,st=this.state,Zt=st.selectItem,On=st.selectSecond,Fn=st.showApprovalDialog,Ca=st.showCodeSnippetDialog,Jn=st.branchDialogModel;return i.createElement(on(),{transitionName:"createNodeDialogTransition",transitionEnterTimeout:250,transitionLeaveTimeout:250},!!Ve&&i.createElement(Fa,{className:"createNodeDialog flexColumn",onClickAwayExceptions:[".workflowLineBtn .icon-custom_add_circle",".mui-dialog-container",".workflowCopyBtn",".ming.List"],onClickAway:function(){return Oe("")}},i.createElement("div",{className:"createNodeDialogHeader flexRow",style:{background:Zt?Zt.iconColor:"#2196f3"}},On?i.createElement("div",{className:"flex Font18"},i.createElement("i",{className:"icon-backspace Font20 pointer",onClick:function(){return A.setState({selectItem:null,selectSecond:!1})}}),i.createElement("span",{className:"mLeft10"},Zt.name)):i.createElement(i.Fragment,null,i.createElement("div",{className:"Font18"},_l("\u9009\u62E9\u4E00\u4E2A\u52A8\u4F5C")),i.createElement(Wt.Z,{className:"createNodeExplain mLeft5",type:1,text:_l("\u4E86\u89E3\u8FD9\u4E9B\u52A8\u4F5C"),href:"https://help.mingdao.com/workflow/introduction"}),i.createElement("div",{className:"flex"}),!(ot&&it.id!==ot||qe||ft[it.startNodeId].nextId==="99")&&i.createElement("div",{className:"copyNodeBtn",onClick:function(){return It(it.id)}},i.createElement("i",{className:"icon-copy Font18 mRight5"}),_l("\u590D\u5236\u5DF2\u6709\u8282\u70B9"))),i.createElement("i",{className:"icon-delete Font18 mLeft5",onClick:function(){return Oe("")}})),i.createElement("div",{className:"flex"},i.createElement(Mt.Z,null,this.renderContent())),!!Jn&&i.createElement(ba.Z,(0,L.default)({},this.props,{isConditionalBranch:Jn===2,onSave:function(xa){var va=xa.isOrdinary,Pa=xa.moveType;return A.createBranchNode({isOrdinary:va,moveType:Pa})},onClose:function(){return A.setState({branchDialogModel:0})}})),Fn&&i.createElement(la,{companyId:it.companyId,appId:it.relationId,onOk:function(xa){var va=xa.processId;return A.addFlowNode({appType:Qe.IF.APPROVAL,name:_l("\u672A\u547D\u540D\u5BA1\u6279\u6D41\u7A0B"),prveId:Ve,typeId:Qe.QZ.APPROVAL_PROCESS,appId:va})},onCancel:function(){return A.setState({showApprovalDialog:!1})}}),Ca&&i.createElement(Kn.Z,{projectId:it.companyId,type:0,onSave:function(xa){var va=xa.actionId,Pa=xa.inputData,ta=xa.code;A.setState({showCodeSnippetDialog:!1}),A.addFlowNode({actionId:va,name:va===Qe.gp.JAVASCRIPT?_l("JavaScript"):_l("Python"),prveId:Ve,typeId:Qe.QZ.CODE,appId:j()({inputData:Pa,code:sa.Base64.encode(ta)})})},onClose:function(){return A.setState({showCodeSnippetDialog:!1})}})))}}]),Ae}(i.Component),Na=t(12424),Za=t(29306),ya=t.n(Za),An=(0,r.Z)([`
  width: `,`px;
  height: `,`px;
  background-color: #f5f5f9;
  box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.16);
  border-radius: 6px;
  position: fixed;
  left: 20px;
  bottom: 20px;
  border: 5px solid transparent;
  box-sizing: initial;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: top center;
  overflow: hidden;
`],[`
  width: `,`px;
  height: `,`px;
  background-color: #f5f5f9;
  box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.16);
  border-radius: 6px;
  position: fixed;
  left: 20px;
  bottom: 20px;
  border: 5px solid transparent;
  box-sizing: initial;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: top center;
  overflow: hidden;
`]),ma=(0,r.Z)([`
  border: 1px solid #2196f3;
  border-radius: 3px;
  position: absolute;
`],[`
  border: 1px solid #2196f3;
  border-radius: 3px;
  position: absolute;
`]),fa=240,Ma=240,Ya=z.ZP.div(An,fa,Ma),Ba=z.ZP.div(ma),La={status:!1,x:0,y:0};const Qa=function(Wn){var Ae=Wn.visible,Ge=Wn.refreshPosition,A=Wn.refreshThumbnail,M=(0,i.useRef)(null),Ve=(0,i.useRef)(null),Oe=(0,i.useState)(null),it=(0,Na.Z)(Oe,2),ot=it[0],qe=it[1],It=(0,i.useState)(0),ft=(0,Na.Z)(It,2),st=ft[0],Zt=ft[1],On=(0,i.useState)(0),Fn=(0,Na.Z)(On,2),Ca=Fn[0],Jn=Fn[1],aa=(0,i.useState)(0),xa=(0,Na.Z)(aa,2),va=xa[0],Pa=xa[1],ta=(0,i.useState)(0),Ia=(0,Na.Z)(ta,2),Aa=Ia[0],Wa=Ia[1],Xa=(0,i.useState)(!1),Ha=(0,Na.Z)(Xa,2),Er=Ha[0],ir=Ha[1],Ir=function(){var qa=document.getElementsByClassName("workflowEdit")[0],dr=document.getElementsByClassName("workflowEditContent")[0],Nr=qa.clientWidth,Sr=qa.clientHeight,wr=dr.clientWidth,Ur=dr.scrollHeight,Mr=qa.scrollLeft,Hr=qa.scrollTop;return{workflowContainer:qa,boxWidth:Nr,boxHeight:Sr,containerWidth:wr,containerHeight:Ur,scrollLeft:Mr,scrollTop:Hr}},za=function(){var qa=Ir(),dr=qa.boxWidth,Nr=qa.boxHeight,Sr=qa.containerWidth,wr=qa.containerHeight,Ur=qa.scrollLeft,Mr=qa.scrollTop,Hr=dr/Sr*fa,po=Nr/wr*Ma;Zt(Hr),Jn(po),Pa(fa-Hr===0?0:(fa-Hr)*Ur/(Sr-dr)),Wa(Ma-po===0?0:(Ma-po)*Mr/(wr-Nr)),Ve.current&&(Ve.current.style.transform="translateX(0px) translateY(0px)")},Ja=function(qa,dr){var Nr=Ve.current.offsetWidth,Sr=Ve.current.offsetHeight,wr=Ir(),Ur=wr.workflowContainer,Mr=wr.boxWidth,Hr=wr.boxHeight,po=wr.containerWidth,ol=wr.containerHeight;qa<0?qa=0:qa+Nr>fa&&(qa=fa-Nr),dr<0?dr=0:dr+Sr>Ma&&(dr=Ma-Sr),Ur.scrollLeft=(po-Mr)/((fa-Nr)/qa),Ur.scrollTop=(ol-Hr)/((Ma-Sr)/dr)},or=function(qa){if(qa.target!==Ve.current){var dr=qa.clientX,Nr=qa.clientY,Sr=dr-st/2-qa.target.offsetLeft,wr=Nr-Ca/2-qa.target.offsetTop;Ja(Sr,wr)}};return(0,i.useEffect)(function(){document.addEventListener("mousemove",function(Ua){La.status&&(Ve.current.style.transform="translateX("+(Ua.clientX-La.x)+"px) translateY("+(Ua.clientY-La.y)+"px)")}),document.addEventListener("mouseup",function(){if(La.status){var Ua=Ve.current.style.transform.match(/\(.*?\)/g);Ja(parseInt(Ve.current.style.left)+parseInt(Ua[0].replace(/[^-\d]/g,"")),parseInt(Ve.current.style.top)+parseInt(Ua[1].replace(/[^-\d]/g,""))),La.status=!1}})},[]),(0,i.useEffect)(function(){Ae&&(Er?ya().toPng(document.getElementsByClassName("workflowEditContent")[0]).then(function(Ua){qe(Ua),ir(!1),za()}):za())},[Ae,Er]),(0,i.useEffect)(function(){ir(!0)},[A]),(0,i.useEffect)(function(){Ae&&Ge&&za()},[Ge]),i.createElement(on(),{transitionName:"thumbnailTransition",transitionEnterTimeout:250,transitionLeaveTimeout:250},Ae&&i.createElement(Ya,{style:{backgroundImage:"url("+ot+")"},ref:M,onClick:or},i.createElement(Ba,{style:{width:st,height:Ca,left:va,top:Aa},ref:Ve,onMouseDown:function(qa){La={status:!0,x:qa.clientX,y:qa.clientY}}})))};var nr=t(26314),Rr=t(72078),hr=t(46891),yr,br,Lr,lr,Or=(0,hr.Z)(yr=(Lr=br=function(Wn){(0,y.default)(Ae,Wn);function Ae(Ge){(0,e.default)(this,Ae);var A=(0,m.default)(this,(Ae.__proto__||k()(Ae)).call(this,Ge));return lr.call(A),A.state={nodeId:"",selectNodeId:"",selectNodeType:"",scale:100,isCopy:!1,selectProcessId:"",selectCopyIds:[],hideNodes:JSON.parse(localStorage.getItem("workflowHideNodes")||"[]"),refreshPosition:"",refreshThumbnail:"",showThumbnail:!1},A}return(0,oe.default)(Ae,[{key:"componentDidMount",value:function(){this.changeScreenWidth(),this.setViewCenter()}},{key:"componentDidUpdate",value:function(A,M){(!U().isEqual(A,this.props)||M.scale!==this.state.scale)&&(this.changeScreenWidth(),this.setViewCenter()),A.workflowDetail.flowNodeMap&&!U().isEqual(A.workflowDetail.flowNodeMap,this.props.workflowDetail.flowNodeMap)&&cn()(this.props.workflowDetail.flowNodeMap).length===1&&this.setState({nodeId:this.props.workflowDetail.startEventId}),A.workflowDetail.flowNodeMap&&cn()(A.workflowDetail.flowNodeMap).length!==cn()(this.props.workflowDetail.flowNodeMap).length&&this.setState({refreshThumbnail:+new Date,refreshPosition:+new Date})}},{key:"changeScreenWidth",value:function(){var A=this,M=$(".workflowEdit"),Ve=M.find(".workflowEditContent"),Oe=M.width();Ve.find("> .flexColumn > .workflowBranch, > .flexColumn > .approvalProcessBoxBox").map(function(it,ot){Oe<$(ot).innerWidth()*A.state.scale/100&&(Oe=$(ot).innerWidth()*A.state.scale/100)}),Ve.width(Oe)}},{key:"setViewCenter",value:function(){var A=document.getElementsByClassName("workflowEdit")[0]||{},M=A.scrollWidth,Ve=A.clientWidth;M>Ve&&this.firstLoad&&($(".workflowEdit").scrollLeft((M-Ve)/2),this.firstLoad=!1)}},{key:"detailUpdateConfirm",value:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};E.Z.confirm({className:"switchDetailConfirm",title:_l("\u8981\u4FDD\u5B58\u5BF9\u8282\u70B9\u7684\u4FEE\u6539\u5417\uFF1F"),description:_l("\u5F53\u524D\u8282\u70B9\u4E2D\u6709\u5C1A\u672A\u4FDD\u5B58\u7684\u4FEE\u6539\uFF0C\u4F60\u5728\u7EE7\u7EED\u64CD\u4F5C\u524D\u662F\u5426\u9700\u8981\u4FDD\u5B58\u8FD9\u4E9B\u4FEE\u6539\uFF1F"),okText:_l("\u5426\uFF0C\u653E\u5F03\u4FEE\u6539"),buttonType:"ghost",cancelText:_l("\u662F\uFF0C\u524D\u5F80\u4FDD\u5B58"),cancelType:"primary",onOk:A})}},{key:"getDetailOptions",value:function(){var A=this.props,M=A.flowInfo,Ve=A.workflowDetail,Oe=this.state,it=Oe.selectProcessId,ot=Oe.selectNodeId,qe=Oe.isCopy;if(!it||qe)return{};if(it===Ve.id)return{companyId:M.companyId,processId:M.id,relationId:M.relationId,relationType:M.relationType,flowInfo:M,selectNodeName:(Ve.flowNodeMap[ot]||{}).name,isApproval:M.startAppType===Qe.IF.APPROVAL_START};var It={};return cn()(Ve.flowNodeMap).forEach(function(ft){Ve.flowNodeMap[ft].processNode&&Ve.flowNodeMap[ft].processNode.id===it&&(It=Ve.flowNodeMap[ft].processNode)}),{companyId:It.companyId,processId:It.id,relationId:M.relationId,relationType:M.relationType,selectNodeName:(It.flowNodeMap[ot]||{}).name,isApproval:!0}}},{key:"render",value:function(){var A=this,M=this.props,Ve=M.flowInfo,Oe=M.workflowDetail,it=M.instanceId,ot=this.state,qe=ot.nodeId,It=ot.selectNodeId,ft=ot.selectNodeType,st=ot.scale,Zt=ot.isCopy,On=ot.selectCopyIds,Fn=ot.refreshPosition,Ca=ot.refreshThumbnail,Jn=ot.showThumbnail,aa=ot.selectProcessId;if(U().isEmpty(Oe))return i.createElement(Bt.Z,{className:"mTop15"});var xa=Oe.startEventId,va=Oe.flowNodeMap,Pa=(0,L.default)({selectNodeId:It,selectNodeType:ft,instanceId:it,debugEvents:Ve.debugEvents,isIntegration:location.href.indexOf("integration")>-1,closeDetail:this.closeDetail,haveChange:this.haveChange,deleteNode:this.deleteNode},this.getDetailOptions()),ta=(va[xa]||{}).appId&&!(va[xa]||{}).appName&&!U().includes([Qe.IF.PBC,Qe.IF.PARAMETER],va[xa].appType);return i.createElement(i.Fragment,null,i.createElement("div",{className:T()("workflowEdit flex flexRow",{addTop:ta},{workflowEditRelease:Ve.parentId}),onScroll:this.triggerScroll},i.createElement("div",{className:"workflowEditContent",style:{transform:"scale("+st/100+")",transformOrigin:"center 48px"}},this.renderNode({processId:Ve.id,data:va,firstId:xa}),i.createElement(xt,null))),i.createElement(nr.Z,Pa),i.createElement(wa,{flowInfo:Ve,flowNodeMap:va,isLast:qe?(va[qe]||{}).nextId==="99":!1,nodeId:Zt?"":qe,selectProcessId:aa,isApproval:Ve.startAppType===Qe.IF.APPROVAL_START,addFlowNode:this.addFlowNode,selectAddNodeId:this.selectAddNodeId,selectCopy:this.selectCopy}),i.createElement("div",{className:T()("workflowEditBtn",{addTop:ta})},i.createElement("span",{"data-tip":_l("\u753B\u5E03\u6982\u89C8")},i.createElement("i",{className:T()("icon-map ThemeHoverColor3",{ThemeColor3:Jn}),onClick:function(){if(cn()(va).length>500)return alert(_l("\u8282\u70B9\u6570\u91CF\u8FC7\u591A\u6B64\u529F\u80FD\u4E0D\u53EF\u7528"),2),!1;A.setState({showThumbnail:!Jn,refreshPosition:+new Date})}})),i.createElement("span",{className:"workflowEditBtnLine"}),i.createElement("span",{"data-tip":_l("\u7F29\u5C0F")},i.createElement("i",{className:T()("icon-minus ThemeHoverColor3",{disabled:st===50}),onClick:function(){return st>50&&A.setState({scale:st-10,refreshThumbnail:+new Date})}})),i.createElement("span",{className:"Font14 mRight8 TxtCenter",style:{width:40}},st,"%"),i.createElement("span",{"data-tip":_l("\u653E\u5927")},i.createElement("i",{className:T()("icon-add ThemeHoverColor3",{disabled:st===100}),onClick:function(){return st<100&&A.setState({scale:st+10,refreshThumbnail:+new Date})}})),i.createElement("span",{"data-tip":_l("\u9002\u5E94\u9AD8\u5EA6")},i.createElement("i",{className:"icon-settings_overscan ThemeHoverColor3",onClick:this.fullDisplay}))),ta&&i.createElement("div",{className:"Font15 workflowWarning workflowError"},i.createElement("i",{className:"icon-task-setting_promet mRight10"}),_l("\u89E6\u53D1\u6D41\u7A0B\u7684\u6570\u636E\u5BF9\u8C61\u5DF2\u5220\u9664\u3002\u5FC5\u987B\u91CD\u65B0\u8BBE\u7F6E\u89E6\u53D1\u65B9\u5F0F\u540E\uFF0C\u624D\u80FD\u914D\u7F6E\u5176\u4ED6\u8282\u70B9")),i.createElement(_t.Z,{visible:Zt,isBlack:!0,title:On.length?_l("\u5DF2\u9009\u62E9%0\u4E2A\u590D\u5236\u8282\u70B9",On.length):_l("\u9009\u62E9\u8981\u590D\u5236\u7684\u8282\u70B9\uFF0C\u4F9D\u6B21\u590D\u5236\u5230\u76EE\u6807\u4F4D\u7F6E"),defaultTop:-72,visibleTop:65,updateText:_l("\u590D\u5236"),onUpdate:this.createCopyNode,onCancel:this.cancelCopy}),cn()(va).length<=500&&i.createElement(Qa,{visible:Jn,refreshPosition:Fn,refreshThumbnail:Ca}))}}]),Ae}(i.Component),lr=function(){var Ae=this;this.firstLoad=!0,this.change=!1,this.selectAddNodeId=function(Ge,A){Ge&&Ae.change&&Ae.state.selectNodeId?Ae.detailUpdateConfirm(function(){Ae.closeDetail(),Ae.setState({nodeId:Ge,selectProcessId:A,isCopy:!1})}):(Ae.closeDetail(),Ae.setState({nodeId:Ge,selectProcessId:A,isCopy:!1}))},this.selectCopy=function(Ge){Ae.setState({isCopy:!0,selectProcessId:Ge})},this.cancelCopy=function(){Ae.setState({nodeId:"",isCopy:!1,selectCopyIds:[],selectProcessId:""})},this.selectCopyNode=function(Ge){var A=[].concat(Ae.state.selectCopyIds);A.indexOf(Ge)>-1?U().remove(A,function(M){return M===Ge}):A.push(Ge),Ae.setState({selectCopyIds:A})},this.createCopyNode=function(){var Ge=Ae.state,A=Ge.nodeId,M=Ge.selectCopyIds,Ve=Ge.selectProcessId,Oe=M.length;if(!Oe){alert(_l("\u8BF7\u9009\u62E9\u4EE5\u4E0B\u9AD8\u4EAE\u8282\u70B9\u8FDB\u884C\u590D\u5236"),2);return}Ae.props.dispatch((0,Rt.qs)(Ve,{prveId:A,nodeIds:M},function(){alert(_l("%0\u4E2A\u8282\u70B9\u590D\u5236\u6210\u529F",Oe))})),Ae.cancelCopy()},this.addFlowNode=function(Ge,A){Ae.props.dispatch((0,Rt.qs)(Ge,A,function(M){A.typeId===Qe.QZ.APPROVAL_PROCESS&&Ae.openDetail(Ge,M,A.typeId)}))},this.deleteNode=function(Ge,A){A===Ae.state.selectNodeId&&Ae.closeDetail(),Ae.props.dispatch((0,Rt.MT)(Ge,A))},this.updateNodeName=function(Ge,A,M){Ae.props.dispatch((0,Rt.du)(Ge,A,M))},this.updateNodeDesc=function(Ge,A,M,Ve){Ae.props.dispatch((0,Rt._V)(Ge,A,M,Ve))},this.updateBranchGatewayType=function(Ge,A,M){Ae.props.dispatch((0,Rt.At)(Ge,A,M))},this.updateBranchSort=function(Ge,A,M){Ae.props.dispatch((0,Rt.Z8)(Ge,A,M))},this.renderNode=function(Ge){var A=Ge.processId,M=Ge.data,Ve=Ge.firstId,Oe=Ge.excludeFirstId,it=Oe===void 0?!1:Oe,ot=Ge.isApproval,qe=Ae.props,It=qe.flowInfo,ft=qe.workflowDetail,st=ft.startEventId,Zt=ft.flowNodeMap,On=ft.child,Fn=ft.isSimple,Ca=Zt[st],Jn=(Ca.appType===Qe.IF.SHEET||Ca.appType===Qe.IF.DATE)&&!Ca.appName||Ca.appType===Qe.IF.LOOP&&!Ca.executeTime||Ca.appType===Qe.IF.WEBHOOK&&!Ca.count||Ca.appType===Qe.IF.PBC&&!Ca.appId&&!On||Ae.state.isCopy&&A!==Ae.state.selectProcessId;return(0,Rr.dv)(M,Ve,it).map(function(aa,xa){var va={key:aa,companyId:It.companyId,processId:A,data:M,item:M[aa],disabled:Jn,startEventId:st,nodeId:Ae.state.nodeId,selectNodeId:Ae.state.selectNodeId,isCopy:Ae.state.isCopy,selectCopyIds:Ae.state.selectCopyIds,selectProcessId:Ae.state.selectProcessId,child:On,relationId:It.relationId,relationType:It.relationType,isRelease:!!It.parentId,hideNodes:Ae.state.hideNodes,dispatch:Ae.props.dispatch,isApproval:ot||Ca.appType===Qe.IF.APPROVAL_START,isNestedProcess:ot,isSimple:Fn,renderNode:Ae.renderNode,selectAddNodeId:Ae.selectAddNodeId,selectCopy:Ae.selectCopy,selectCopyNode:Ae.selectCopyNode,addFlowNode:Ae.addFlowNode,deleteNode:Ae.deleteNode,openDetail:Ae.openDetail,updateNodeName:Ae.updateNodeName,updateNodeDesc:Ae.updateNodeDesc,updateBranchGatewayType:Ae.updateBranchGatewayType,updateBranchSort:Ae.updateBranchSort,updateHideNodes:function(Ia){return Ae.setState({hideNodes:Ia})},updateRefreshThumbnail:function(){return Ae.setState({refreshThumbnail:+new Date,refreshPosition:+new Date})}};if(!M[aa])return null;var Pa=Gt.Z[M[aa].typeId];return i.createElement(Pa,va)})},this.openDetail=function(Ge,A,M){var Ve=Ae.props,Oe=Ve.flowInfo,it=Ve.workflowDetail,ot=Ae.state.isCopy,qe=function(){Ae.setState({selectProcessId:Ge,selectNodeId:A,selectNodeType:M}),Ae.change=!1};if(!ot){if(Oe.id!==Ge&&!Oe.parentId){var It=!1;if(cn()(it.flowNodeMap).forEach(function(ft){it.flowNodeMap[ft].typeId===Qe.QZ.APPROVAL_PROCESS&&it.flowNodeMap[ft].processNode.id===Ge&&it.flowNodeMap[ft].selectNodeId&&(It=!0)}),!It){alert(_l("\u8BF7\u5148\u914D\u7F6E\u53D1\u8D77\u5BA1\u6279\u7684\u6570\u636E\u5BF9\u8C61"),2);return}}Ae.state.selectNodeId!==A&&(Ae.change?Ae.detailUpdateConfirm(qe):qe())}},this.closeDetail=function(){Ae.change=!1,Ae.setState({selectNodeId:"",selectNodeType:"",selectProcessId:""})},this.haveChange=function(Ge){Ae.change=Ge},this.triggerScroll=U().debounce(function(){Ae.state.showThumbnail&&Ae.setState({refreshPosition:+new Date})},300),this.fullDisplay=function(){var Ge=$(".workflowEdit")[0];if(Ge.clientHeight<Ge.scrollHeight){var A=Math.floor(Ge.clientHeight/Ge.scrollHeight*Ae.state.scale/10)*10;A<=50&&(A=50),A>=100&&(A=100),Ae.setState({scale:A,refreshThumbnail:+new Date})}}},Lr))||yr;const Vr=(0,Fe.$j)(function(Wn){return Wn.workflow})(Or);var Kr=t(15759),Br=t(21),kr=t(53825),ja=t(94796),ur=t(29314),vr,Pr,Gr=(Pr=vr=function(Wn){(0,y.default)(Ae,Wn);function Ae(){var Ge,A,M,Ve;(0,e.default)(this,Ae);for(var Oe=arguments.length,it=Array(Oe),ot=0;ot<Oe;ot++)it[ot]=arguments[ot];return Ve=(A=(M=(0,m.default)(this,(Ge=Ae.__proto__||k()(Ae)).call.apply(Ge,[this].concat(it))),M),M.state={popupVisible:!1},M.handleChange=function(qe){M.setState({popupVisible:!1}),M.props.onChange(qe)},M.handlePopupVisibleChange=function(qe){M.setState({popupVisible:qe})},M.renderPopup=function(){var qe=M.props,It=qe.prefix,ft=qe.suffix,st=qe.data,Zt=qe.selectedValue,On=qe.emptyStatus,Fn=qe.specialStyleExpect;return i.createElement("div",{className:"popupWrap"},It,st.length?i.createElement("ul",null,st.map(function(Ca,Jn){var aa=Ca.icon,xa=Ca.text,va=Ca.value;return i.createElement("li",{key:Jn,className:T()({ThemeColor3:va===Zt&&!U().includes(Fn,va)},"ThemeHoverBGColor3 HoverWhite"),onClick:function(){return M.handleChange(va)}},aa&&i.createElement(C.Z,{icon:aa}),i.createElement("span",null,xa))})):On,ft)},M.getTitle=function(){var qe=M.props,It=qe.data,ft=qe.selectedValue,st=It.find(function(Zt){return Zt.value===ft});return st&&st.text?st.text:""},M.renderTrigger=function(){var qe=M.props,It=qe.placeholder,ft=qe.renderTitle,st=M.state.popupVisible;return i.createElement("div",{className:"triggerWrap"},i.createElement("div",{className:"title overflow_ellipsis"},ft?ft():M.getTitle()||It),i.createElement("div",{className:T()("arrow",{bottom:st})}))},A),(0,m.default)(M,Ve)}return(0,oe.default)(Ae,[{key:"render",value:function(){var A=this.props,M=A.className,Ve=A.defaultPopupVisible,Oe=A.popupClassName,it=A.popupAlign,ot=this.state.popupVisible;return i.createElement("div",{className:T()("mingUiDropdownWrap",M)},i.createElement(ur.Z,{popupClassName:Oe,defaultPopupVisible:Ve,popupVisible:ot,popupStyle:{width:180},action:["click"],popup:this.renderPopup(),popupAlign:it,onPopupVisibleChange:this.handlePopupVisibleChange},this.renderTrigger()))}}]),Ae}(i.Component),vr.propTypes={suffix:P.node,prefix:P.node,placeholder:P.node,className:P.string,popupClassName:P.string,specialStyleExpect:(0,P.arrayOf)(P.string),defaultPopupVisible:P.bool,data:(0,P.arrayOf)((0,P.shape)({text:P.string,value:P.string.isRequired})),selectedValue:P.string,popupAlign:(0,P.shape)({points:(0,P.arrayOf)(P.string)}),emptyStatus:P.node,renderTitle:P.func,onChange:P.func},vr.defaultProps={placeholder:"\u672A\u9009\u62E9",defaultPopupVisible:!1,data:[],emptyStatus:"\u6682\u65E0\u6570\u636E",popupAlign:{points:["tl","bl"]},onChange:function(){}},Pr),cr,Cr,Zr=(Cr=cr=function(Wn){(0,y.default)(Ae,Wn);function Ae(){var Ge,A,M,Ve;(0,e.default)(this,Ae);for(var Oe=arguments.length,it=Array(Oe),ot=0;ot<Oe;ot++)it[ot]=arguments[ot];return Ve=(A=(M=(0,m.default)(this,(Ge=Ae.__proto__||k()(Ae)).call.apply(Ge,[this].concat(it))),M),M.state={value:""},M.handleChange=function(qe){M.setState({value:qe}),M.props.handleChange(qe)},A),(0,m.default)(M,Ve)}return(0,oe.default)(Ae,[{key:"componentWillReceiveProps",value:function(A){A.value!==this.props.value&&this.setState({value:A.value})}},{key:"render",value:function(){var A=this,M=this.props,Ve=M.className,Oe=M.placeholder,it=Oe===void 0?_l("\u641C\u7D22\u540D\u79F0"):Oe,ot=M.onFocus,qe=this.state.value;return i.createElement("div",{className:T()("workflowSearchWrap",Ve)},i.createElement("input",{type:"text",className:"ThemeBorderColor3",onFocus:ot,value:qe,placeholder:it,onChange:function(ft){return A.handleChange(ft.target.value)}}),i.createElement(C.Z,{icon:"workflow_find",className:"search Gray_9e Font16"}),i.createElement(C.Z,{icon:"close",onClick:function(){return A.handleChange("")},className:T()("close pointer",{hide:!qe.length})}))}}]),Ae}(i.Component),cr.propTypes={handleChange:P.func,className:P.string,placeholder:P.string,onFocus:P.func},cr.defaultProps={handleChange:U().noop,onFocus:U().noop},Cr),ar=t(42108),mo=t(48231),Oo=t(59284),Ho=t.n(Oo),Ko=(0,r.Z)([`
  .header {
    padding: 24px 0;
  }
  li {
    &.list {
      height: 68px;
    }
  }
  .list {
    display: flex;
    align-items: center;
    border-bottom: 1px solid #ddd;
    .icon-delete {
      display: none;
    }
    &:hover {
      .icon-delete {
        display: block;
      }
    }
    .w40 {
      width: 40px;
    }
    .w150 {
      width: 150px;
    }
    .w190 {
      width: 190px;
    }
  }
  .emptyListWrap {
    padding: 100px 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    img {
      width: 130px;
      height: 130px;
      border-radius: 50%;
    }
    .text {
      margin-top: 24px;
    }
  }
`],[`
  .header {
    padding: 24px 0;
  }
  li {
    &.list {
      height: 68px;
    }
  }
  .list {
    display: flex;
    align-items: center;
    border-bottom: 1px solid #ddd;
    .icon-delete {
      display: none;
    }
    &:hover {
      .icon-delete {
        display: block;
      }
    }
    .w40 {
      width: 40px;
    }
    .w150 {
      width: 150px;
    }
    .w190 {
      width: 190px;
    }
  }
  .emptyListWrap {
    padding: 100px 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    img {
      width: 130px;
      height: 130px;
      border-radius: 50%;
    }
    .text {
      margin-top: 24px;
    }
  }
`]),Co=(0,z.ZP)(E.Z)(Ko);const Jr=function(Wn){var Ae=Wn.processId,Ge=Wn.onClose,A=Ge===void 0?function(){}:Ge,M=(0,i.useState)([]),Ve=(0,Na.Z)(M,2),Oe=Ve[0],it=Ve[1],ot=(0,i.useState)(!0),qe=(0,Na.Z)(ot,2),It=qe[0],ft=qe[1],st=(0,i.useState)(1),Zt=(0,Na.Z)(st,2),On=Zt[0],Fn=Zt[1],Ca=(0,i.useState)(!0),Jn=(0,Na.Z)(Ca,2),aa=Jn[0],xa=Jn[1],va=function(){var Aa=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;ft(!0),mo.Z.getList({processId:Ae,pageIndex:Aa,pageSize:30}).then(function(Wa){ft(!1),it(Aa===1?Wa:Oe.concat(Wa)),Fn(Aa),xa(Wa.length>0)})},Pa=U().throttle(function(Ia){Ia.target.scrollTop+Ia.target.clientHeight>=Ia.target.scrollHeight-30&&!It&&aa&&va(On+1)}),ta=function(){var Aa=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";mo.Z.remove({processId:Ae,id:Aa}).then(function(){va()})};return(0,i.useEffect)(function(){va()},[]),i.createElement(Co,{visible:!0,width:960,overlayClosable:!1,type:"fixed",title:_l("\u4E32\u884C\u7B49\u5F85\u4E2D\u7684\u6D41\u7A0B"),onScroll:Pa,onCancel:A,footer:null},i.createElement("div",{className:"Gray_75 flexRow alignItemsCenter"},_l("\u5DE5\u4F5C\u6D41\u914D\u7F6E\u4E3A\u201C\u4E25\u683C\u4E32\u884C\u201D\u65F6\uFF0C\u8FD0\u884C\u4E2D\u7684\u5DE5\u4F5C\u6D41\u9700\u8981\u7B49\u5F85\u524D\u5E8F\u7684\u6D41\u7A0B\u6267\u884C\u5B8C\u6BD5"),i.createElement(Wt.Z,{type:3,text:_l("\u4E86\u89E3\u66F4\u591A"),className:"ThemeColor3 ThemeHoverColor2 mLeft5",href:"https://help.mingdao.com/worksheet/field-filter"}),i.createElement("div",{className:"flex"}),i.createElement("div",{className:"ThemeHoverColor3 pointer",onClick:function(){return ta()}},_l("\u53D6\u6D88\u7B49\u5F85\u4E2D\u7684\u6D41\u7A0B")),i.createElement("div",{className:"icon-refresh1 Font16 ThemeHoverColor3 pointer mLeft15",onClick:function(){return va()}})),i.createElement("div",{className:"list bold Gray_75 Font14 mTop30 pBottom5"},i.createElement("div",{className:"w150 mLeft16"},_l("\u72B6\u6001")),i.createElement("div",{className:"flex"},_l("\u6D41\u7A0B\u89E6\u53D1\u6570\u636E")),i.createElement("div",{className:"w190"},_l("\u52A0\u5165\u6392\u961F\u65F6\u95F4")),i.createElement("div",{className:"w150"},_l("\u89E6\u53D1\u65F6\u95F4")),i.createElement("div",{className:"w40"})),It&&On===1&&i.createElement(Bt.Z,{className:"mTop15"}),!It&&!Oe.length&&i.createElement("div",{className:"emptyListWrap"},i.createElement("img",{src:Ho()}),i.createElement("div",{className:"text Gray_9e Font16"},_l("\u6CA1\u6709\u4E32\u884C\u7B49\u5F85\u4E2D\u7684\u6D41\u7A0B"))),i.createElement("ul",null,Oe.map(function(Ia,Aa){return i.createElement("li",{className:"list",key:Aa},i.createElement("div",{className:"w150 mLeft16 bold flexRow alignItemsCenter"},i.createElement("i",{className:"icon-play-circle Font24 mRight6",style:{color:Ia.createDate?"#2196F3":"#00BCD7"}}),Ia.createDate?_l("\u8FD0\u884C\u4E2D"):_l("\u7B49\u5F85\u4E2D")),i.createElement("div",{className:"flex ellipsis mRight15"},_l("\u6570\u636E\uFF1A"),Ia.title),i.createElement("div",{className:"w190"},bn()(Ia.date).format("YYYY-MM-DD HH:mm:ss")),i.createElement("div",{className:"w150"},Ia.createDate?bn()(Ia.createDate).format("YYYY-MM-DD HH:mm:ss"):""),i.createElement("div",{className:"w40"},Aa===0&&i.createElement("span",{"data-tip":_l("\u4E2D\u6B62"),onClick:function(){return ta(Ia.id)}},i.createElement("i",{className:"icon-delete Font16 pointer ThemeHoverColor3 Gray_9e"}))))}),It&&On>1&&i.createElement(Bt.Z,{className:"mTop10"})))};var pr=t(58064),fo,oo,Xr=(oo=fo=function(Wn){(0,y.default)(Ae,Wn);function Ae(){var Ge,A,M,Ve;(0,e.default)(this,Ae);for(var Oe=arguments.length,it=Array(Oe),ot=0;ot<Oe;ot++)it[ot]=arguments[ot];return Ve=(A=(M=(0,m.default)(this,(Ge=Ae.__proto__||k()(Ae)).call.apply(Ge,[this].concat(it))),M),M.state={status:"all",time:["",""],searchVal:"",isRefresh:!1,showDialog:!1},M.formatData=function(qe){return cn()(qe).map(function(It){return(0,L.default)({},qe[It],{value:It})})},M.renderTimePlaceholder=function(){var qe=M.state.time,It=M.formatTime(qe),ft=(0,Na.Z)(It,2),st=ft[0],Zt=ft[1];return!st&&!Zt?i.createElement("span",{className:"placeholder"},_l("\u7B5B\u9009\u65F6\u95F4\u8303\u56F4")):st+" ~ "+Zt},M.formatTime=function(qe){return qe.map(function(It){return It&&bn()(It).format("YYYY/MM/DD HH:mm")})},M.handleClearFilter=function(){M.setState({status:"all",time:["",""],searchVal:""},M.onFilterParaChanged)},M.handlePara=function(){var qe=M.state,It=qe.status,ft=qe.time,st=qe.searchVal,Zt=M.formatTime(ft),On=(0,Na.Z)(Zt,2),Fn=On[0],Ca=On[1],Jn={};return It&&It!=="all"&&Ut()(Jn,{status:It}),st&&Ut()(Jn,{title:st}),Fn&&Ut()(Jn,{startDate:Fn}),Ca&&Ut()(Jn,{endDate:Ca}),Jn},M.onFilterParaChanged=function(){M.props.onFilter(M.handlePara())},M.handleFilter=function(qe){M.setState(qe,M.onFilterParaChanged)},A),(0,m.default)(M,Ve)}return(0,oe.default)(Ae,[{key:"render",value:function(){var A=this,M=this.props,Ve=M.onRefresh,Oe=M.isSerial,it=M.processId,ot=M.batchIds,qe=this.state,It=qe.status,ft=qe.time,st=qe.isRefresh,Zt=qe.showDialog,On=ot.filter(function(Jn){return Jn.status===1}).length,Fn=ot.filter(function(Jn){return _.includes([3,4],Jn.status)&&Jn.cause!==7777}).length,Ca=this.formatData(ar.jJ);return Ca.unshift({value:"all",text:_l("\u6240\u6709\u72B6\u6001")}),this.props.hideStatusAndDate?i.createElement("div",{className:"historyHeader"},i.createElement("div",{className:"filterName"},i.createElement(Zr,{handleChange:function(aa){return A.props.onFilter(Ut()({},A.props.filters,{title:aa.trim()}))}}))):i.createElement("div",{className:"historyHeader"},ot.length?i.createElement(i.Fragment,null,i.createElement("div",{className:T()("historyHeaderBtn mRight15 stop",{disabled:!On}),onClick:function(){On&&pr.Z.endInstanceList({sources:ot.filter(function(aa){return aa.status===1}).map(function(aa){var xa=aa.id;return xa})}).then(function(){Ve()})}},i.createElement("i",{className:"icon-workflow_suspend Font16 mRight5"}),On?_l("\u4E2D\u6B62 (%0)",On):_l("\u4E2D\u6B62")),i.createElement("div",{className:T()("historyHeaderBtn mRight15 refresh",{disabled:!Fn}),onClick:function(){Fn&&pr.Z.resetInstanceList({sources:ot.filter(function(aa){return _.includes([3,4],aa.status)}).map(function(aa){var xa=aa.id;return xa})}).then(function(){Ve()})}},i.createElement("i",{className:"icon-refresh1 Font16 mRight5"}),Fn?_l("\u91CD\u8BD5 (%0)",Fn):_l("\u91CD\u8BD5"))):i.createElement(i.Fragment,null,i.createElement("div",{className:"filterName"},i.createElement(Zr,{handleChange:function(aa){return A.handleFilter({searchVal:aa})}})),i.createElement("div",{className:"statusDropdown"},i.createElement(Gr,{className:"historyHeaderStatusDropdown",onChange:function(aa){return A.handleFilter({status:aa})},selectedValue:It,data:Ca,placeholder:_l("\u6240\u6709\u72B6\u6001")})),i.createElement(ja.Z,{mode:"datetime",timeMode:"minute",placeholder:_l("\u7B5B\u9009\u65F6\u95F4\u8303\u56F4"),min:bn()().add(-6,"M"),selectedValue:ft,children:i.createElement("div",{className:"filterTimeRange"},i.createElement("div",{className:"timeContent"},this.renderTimePlaceholder()),i.createElement(C.Z,{icon:"bellSchedule",className:"Gray_9e Font18"})),onOk:function(aa){return A.handleFilter({time:aa})},onClear:function(){return A.handleFilter({time:["",""]})}}),(It!=="all"||ft[0])&&i.createElement("div",{className:"clearFilter ThemeColor3",onClick:this.handleClearFilter},_l("\u6E05\u9664\u7B5B\u9009")),Oe&&i.createElement("div",{className:"clearFilter ThemeColor3",onClick:function(){return A.setState({showDialog:!0})}},_l("\u67E5\u770B\u4E32\u884C\u7B49\u5F85\u4E2D\u7684\u6D41\u7A0B"))),i.createElement("div",{className:"flex"}),i.createElement("span",{"data-tip":st?_l("\u5237\u65B0\u4E2D..."):_l("\u5237\u65B0"),id:"historyRefresh",onClick:function(){st||(A.setState({isRefresh:!0}),Ve(function(){A.setState({isRefresh:!1})}))}},i.createElement(C.Z,{className:T()("Font18 pointer ThemeHoverColor3 Block",st?"historyRefresh ThemeColor3":"Gray_9e"),icon:"ic_refresh_black"})),Zt&&i.createElement(Jr,{processId:it,onClose:function(){return A.setState({showDialog:!1})}}))}}]),Ae}(i.Component),fo.propTypes={processId:P.string,isSerial:P.bool,onFilter:P.func,onRefresh:P.func,batchIds:P.array},fo.defaultProps={processId:"",isSerial:!1,onFilter:function(){},onRefresh:function(){},batchIds:[]},oo),Bo=t(42723),Eo=t(62521),yo=t(16469),qr=t(35986);const ll=function(Wn){var Ae=Wn.status,Ge=Wn.title,A=Wn.id,M=Wn.instanceLog,Ve=M===void 0?{cause:40005,nodeName:"",causeMsg:""}:M,Oe=Wn.createDate,it=Wn.onClick,ot=Wn.index,qe=Wn.updateSource,It=Wn.batchIds,ft=Wn.onUpdateBatchIds,st=Ve.cause,Zt=Ve.nodeName,On=Ve.causeMsg,Fn=ar.R_[ar.jJ[Ae].status].color,Ca=bn()(Oe),Jn=(0,i.useState)(!1),aa=(0,Na.Z)(Jn,2),xa=aa[0],va=aa[1],Pa=(0,i.useState)(""),ta=(0,Na.Z)(Pa,2),Ia=ta[0],Aa=ta[1],Wa=(0,i.useState)(""),Xa=(0,Na.Z)(Wa,2),Ha=Xa[0],Er=Xa[1],ir=U().includes([3,4],Ae)&&st!==7777,Ir=Ae===1;return i.createElement("li",{className:"historyListItem",onClick:function(){return it(A)}},xa&&i.createElement("div",{className:"workflowRetryLoading"}),i.createElement("div",{className:"batch"},Ae===2||st===7777?null:i.createElement(Te.Z,{checked:!!It.find(function(za){return za.id===A}),onClick:function(Ja,or,Ua){Ua.stopPropagation(),ft(Ja?It.filter(function(qa){return qa.id!==A}):It.concat({id:A,status:Ae,cause:st}))}})),i.createElement("div",{className:T()("status",Ae)},i.createElement("div",{className:"iconWrap"},i.createElement(qr.Z,{statusCode:Ae}))),i.createElement("div",{className:"triggerData flex overflow_ellipsis Font14 "},Ge),i.createElement("div",{className:"cause flex overflow_ellipsis",style:{color:Fn},title:st?st===40007?ar.A5[st]:Zt?_l("\u8282\u70B9: ")+" "+Zt+", "+(st===7777?_l("\u8FC7\u671F\u81EA\u52A8\u4E2D\u6B62"):ar.A5[st]||On):ar.A5[st]||On:""},st?st===40007?ar.A5[st]:Zt?_l("\u8282\u70B9: ")+" "+Zt+", "+(st===7777?_l("\u8FC7\u671F\u81EA\u52A8\u4E2D\u6B62"):ar.A5[st]||On):ar.A5[st]||On:""),i.createElement("div",{className:"triggerTime Gray_75"},Ca.isValid()?Ca.format("YYYY-MM-DD HH:mm:ss"):""),i.createElement("div",{className:"retry"},(ir||Ir)&&i.createElement("span",{"data-tip":ir?_l("\u91CD\u8BD5"):_l("\u4E2D\u6B62"),onClick:function(Ja){Ja.stopPropagation(),!xa&&(va(!0),(ir?pr.Z.resetInstance:pr.Z.endInstance)({instanceId:A}).then(function(or){ft(It.map(function(Ua){return Ua.id===A&&(Ua.status=or.status,Ua.cause=or.instanceLog.cause),Ua})),qe(Ut()(or,{id:A}),ot),va(!1)}))}},i.createElement(C.Z,{className:"Font16 pointer ThemeHoverColor3 Block Gray_9e",icon:ir?"replay":"delete"}))),i.createElement("div",{className:"version"},i.createElement("span",{className:"tip-bottom-left","data-tip":Ia&&typeof Ia=="string"?_l("\u7248\u672C\uFF1A%0",Ia):_l("\u52A0\u8F7D\u4E2D"),onMouseOver:function(){Ia||(Aa(!0),Z.Z.getProcessPublish({instanceId:A}).then(function(Ja){Aa(bn()(Ja.lastPublishDate).format("YYYY-MM-DD HH:mm")),Er(Ja.id)}))},onClick:function(Ja){Ja.stopPropagation(),Ha&&window.open("/workflowedit/"+Ha)}},i.createElement(C.Z,{className:"Font16 ThemeHoverColor3 Block Gray_9e",icon:"info_outline"}))))};var eo,Zo,zo=(0,r.Z)([`
  border-radius: 3px;
  padding: 0 12px;
  height: 40px;
  display: flex;
  align-items: center;
  margin: 10px 24px 0;
  > a {
    color: #333;
    border-bottom: 1px dashed #757575;
    margin: 0 3px;
    &:hover {
      color: #2196f3;
    }
  }
`],[`
  border-radius: 3px;
  padding: 0 12px;
  height: 40px;
  display: flex;
  align-items: center;
  margin: 10px 24px 0;
  > a {
    color: #333;
    border-bottom: 1px dashed #757575;
    margin: 0 3px;
    &:hover {
      color: #2196f3;
    }
  }
`]),Yo=[{id:"status",text:_l("\u72B6\u6001")},{id:"triggerData",text:_l("\u89E6\u53D1\u6D41\u7A0B\u6570\u636E")},{id:"cause",text:_l("\u539F\u56E0")},{id:"time",text:_l("\u89E6\u53D1\u65F6\u95F4")},{id:"retry",text:""},{id:"version",text:""}],to=z.ZP.div(zo),il=(Zo=eo=function(Wn){(0,y.default)(Ae,Wn);function Ae(){var Ge,A,M,Ve;(0,e.default)(this,Ae);for(var Oe=arguments.length,it=Array(Oe),ot=0;ot<Oe;ot++)it[ot]=arguments[ot];return Ve=(A=(M=(0,m.default)(this,(Ge=Ae.__proto__||k()(Ae)).call.apply(Ge,[this].concat(it))),M),M.state={showList:!1},A),(0,m.default)(M,Ve)}return(0,oe.default)(Ae,[{key:"renderAccumulation",value:function(){var A=this,M=this.props,Ve=M.accumulation,Oe=M.onRecovery;return i.createElement(to,{style:{backgroundColor:ar.R_[Ve.waiting?"suspend":"pending"].bgColor}},i.createElement("span",{className:"bold"},_l("%0\u6761\u6392\u961F\u4E2D...",Ve.difference)),i.createElement(Wt.Z,{className:"mLeft10",type:1,href:Qe.AM.queue,title:_l("\u4EC0\u4E48\u662F\u6392\u961F\u4E2D\uFF1F")}),i.createElement("div",{className:"flex"}),!Ve.waiting&&i.createElement(i.Fragment,null,i.createElement("div",{className:"relative"},i.createElement("span",{className:"ThemeColor3 ThemeHoverColor2 pointer",onClick:function(){return A.setState({showList:!0})}},_l("\u6682\u505C")),this.renderSuspendList()),this.discardAction()),Ve.waiting&&i.createElement(i.Fragment,null,i.createElement("span",{className:"mLeft10"},_l("\u5DF2\u88AB")),i.createElement("a",{href:"/user_"+Ve.createdBy.accountId,className:"accumulationLine",target:"_blank"},Ve.createdBy.fullName),i.createElement("span",null,_l("\u6682\u505C\u6D88\u8D39"))),Ve.waiting&&Ve.dueDate&&i.createElement(i.Fragment,null,i.createElement("span",null,_l("\uFF0C\u5C06\u5728")),i.createElement("a",{className:"accumulationLine relative",onClick:function(){return A.setState({showList:!0})}},this.renderDateText(),this.renderSuspendList()),i.createElement("span",null,_l("\u540E\u6062\u590D"))),Ve.waiting&&i.createElement(i.Fragment,null,i.createElement("span",{className:"ThemeColor3 ThemeHoverColor2 pointer mLeft10",onClick:function(){return Oe(!1)}},_l("\u7ACB\u5373\u6062\u590D")),this.discardAction()))}},{key:"renderSuspendList",value:function(){var A=this,M=this.props.onRecovery,Ve=this.state.showList,Oe=[{text:_l("\u76F4\u81F3\u624B\u52A8\u6062\u590D"),value:0},{text:_l("\u6682\u505C1\u5C0F\u65F6"),value:1},{text:_l("\u6682\u505C2\u5C0F\u65F6"),value:2},{text:_l("\u6682\u505C3\u5C0F\u65F6"),value:3}];return Ve?i.createElement(Eo.Z,{onClickAway:function(){return A.setState({showList:!1})}},Oe.map(function(it,ot){return i.createElement(yo.Z,{key:ot,onMouseDown:function(){M(!0,it.value),A.setState({showList:!1})}},it.text)})):null}},{key:"renderDateText",value:function(){var A=this.props.accumulation,M=(bn()(A.dueDate)-bn()())/1e3,Ve=Math.floor(M/60/60),Oe=Math.floor((M-Ve*60*60)/60),it=Math.floor(M-Ve*60*60-Oe*60);return""+(Ve?_l("%0\u5C0F\u65F6",Ve):"")+(Oe?_l("%0\u5206\u949F",Oe):"")+(it?_l("%0\u79D2",it):"")}},{key:"discardAction",value:function(){var A=this.props,M=A.processId,Ve=A.onRefreshAccumulation,Oe=function(){E.Z.confirm({className:"deleteApprovalProcessDialog",title:i.createElement("span",{style:{color:"#f44336"}},_l("\u4E22\u5F03\u6392\u961F\u4E2D\u7684\u6267\u884C")),description:_l("\u8FD9\u4E9B\u5DF2\u89E6\u53D1\u7684\u6D41\u7A0B\u5B9E\u4F8B\u5C06\u4E0D\u4F1A\u88AB\u6267\u884C"),onOk:function(){zn.Z.remove({processIds:[M]}).then(function(){Ve()})}})};return i.createElement("span",{className:"ThemeColor3 ThemeHoverColor2 pointer mLeft20",onClick:Oe},_l("\u4E22\u5F03"))}},{key:"render",value:function(){var A=this.props,M=A.data,Ve=A.getMore,Oe=A.hasMoreData,it=A.requestPending,ot=A.accumulation,qe=(0,Bo.Z)(A,["data","getMore","hasMoreData","requestPending","accumulation"]);return i.createElement("div",{className:"historyListWrap"},i.createElement("ul",{className:"historyListTitle"},i.createElement("li",{style:{fontWeight:600},className:"Gray_75 Font14 batch"},i.createElement(Tt.default,{placement:"bottomLeft",align:{offset:[-10,0]},title:_l("\u5168\u9009\u5DF2\u52A0\u8F7D\u5217\u8868")},i.createElement("span",{className:"InlineBlock",style:{width:18}},i.createElement(Te.Z,{checked:!!qe.batchIds.length,clearselected:!!qe.batchIds.length&&qe.batchIds.length!==M.length,onClick:function(ft){qe.onUpdateBatchIds(!ft||ft&&qe.batchIds.length!==M.length?M.map(function(st){return{id:st.id,status:st.status,cause:st.instanceLog.cause}}):[])}})))),Yo.map(function(It){var ft=It.id,st=It.text;return i.createElement("li",{key:ft,style:{fontWeight:600},className:T()("Gray_75 Font14",ft,{flex:U().includes(["cause","triggerData"],ft)})},st)})),!U().isEmpty(ot)&&ot.difference>0&&this.renderAccumulation(),M.length?i.createElement("ul",{className:T()("historyList",{littleData:M.length<20})},M.map(function(It,ft){return i.createElement(ll,(0,L.default)({key:ft,index:ft},It,qe))}),!Oe&&M.length>20&&i.createElement("div",{className:"noMoreDataText Font16 Gray_9e"},_l("\u6CA1\u6709\u66F4\u591A\u6570\u636E"))):i.createElement("div",{className:"emptyListWrap"},i.createElement("div",{className:"imgWrap"}),i.createElement("div",{className:"text Gray_9e Font16"},_l("\u6682\u65E0\u6570\u636E\u8FD0\u884C\u8BB0\u5F55"))),Oe&&i.createElement("div",{className:"moreDataWrap"},i.createElement("div",{className:"moreData",onClick:Ve},it?_l("\u52A0\u8F7D\u4E2D..."):_l("\u66F4\u591A"))))}}]),Ae}(i.Component),eo.propTypes={processId:P.string,data:(0,P.arrayOf)((0,P.shape)({createDate:P.string,id:P.string,instanceLog:(0,P.shape)({cause:P.number,nodeName:P.string}),status:P.number,title:P.string})),accumulation:P.any,getMore:P.func,hasMoreData:P.bool,requestPending:P.bool,batchIds:P.array,onRecovery:P.func,onRefreshAccumulation:P.func,onUpdateBatchIds:P.func},eo.defaultProps={data:[],batchIds:[],getMore:function(){},onRecovery:function(){},onRefreshAccumulation:function(){},onUpdateBatchIds:function(){}},Zo),mr=t(72444);const Mo=function(Wn){var Ae=Wn.type,Ge=Wn.appType,A=Wn.actionId,M=ar.c2[Ae]||{},Ve=M.icon,Oe=M.bgColor;return(typeof Ve>"u"?"undefined":(0,mr.default)(Ve))==="object"&&(Ve=Ve[A]||Ve[Ge]),(typeof Oe>"u"?"undefined":(0,mr.default)(Oe))==="object"&&(Oe=Oe[A]||Oe[Ge]),Ge===Qe.IF.EXTERNAL_USER&&(Ve=A===Qe.gp.ADD?"invited_users":"update_information"),Ge===Qe.IF.TASK&&(Ve="custom_assignment",Oe="#01CA83"),Ge===Qe.IF.CALENDAR&&(Ve="sidebar_calendar",Oe="#F15B75"),Ge===Qe.IF.EVENT_PUSH&&(Ve="sending"),i.createElement("div",{className:"workflowNodeIconWrap",style:{backgroundColor:Oe,width:22,height:22}},i.createElement(C.Z,{icon:Ve,style:{color:"#fff"}}))};var Ar=t(78265),lo,Io,$o=(Io=lo=function(Wn){(0,y.default)(Ae,Wn);function Ae(){var Ge,A,M,Ve;(0,e.default)(this,Ae);for(var Oe=arguments.length,it=Array(Oe),ot=0;ot<Oe;ot++)it[ot]=arguments[ot];return Ve=(A=(M=(0,m.default)(this,(Ge=Ae.__proto__||k()(Ae)).call.apply(Ge,[this].concat(it))),M),M.state={data:{},isRetry:!1,processInfo:{}},M.retryPosition="",M.getData=function(){var qe=M.props.id;qe&&Ar.Z.getHistoryDetail({instanceId:qe},{isIntegration:location.href.indexOf("integration")>-1}).then(function(It){M.setState({data:It})})},M.getProcessPublish=function(){var qe=M.props.id;Z.Z.getProcessPublish({instanceId:qe}).then(function(It){M.setState({processInfo:It})})},M.renderOperationInfo=function(qe,It){var ft=M.state.data.instanceLog,st=ft.cause,Zt=ft.causeMsg,On=ft.causeAccount,Fn=qe.flowNode,Ca=qe.workItems,Jn=qe.countersign,aa=qe.countersignType,xa=qe.status,va=qe.log,Pa=va===void 0?{}:va,ta=qe.sourceId,Ia=qe.scheduleActions,Aa=qe.updateLogs,Wa=qe.updateWorks;if(!ta&&Pa.executeType===2)return i.createElement("div",{className:"Gray_75"},_l("\u8DF3\u8FC7"));if(st===7777&&xa===3&&On)return i.createElement("div",{className:"personDetail flex Gray_75 flexRow"},_l("\u7BA1\u7406\u5458\uFF1A%0 \u4E2D\u6B62",On.fullName));var Xa=Fn.type,Ha=Fn.appType,Er=Ca.map(function(za){var Ja=za.workItemAccount,or=za.workItemLog;if(or&&Ja)return{name:Ja.fullName,action:or.action,target:or.actionTargetName};if(Ja)return{name:Xa===0&&Ja.accountId==="user-undefined"?_l("\u53D1\u8D77\u4EBA\u4E3A\u7A7A"):Ja.fullName}}),ir=Ha===9&&Xa===0,Ir={102:_l("\u53D1\u9001\u90AE\u4EF6\uFF0C")};return i.createElement(i.Fragment,null,Aa&&cn()(Aa).map(function(za){return i.createElement("div",{key:za,className:"overrule mBottom12"},Ir[za],ar.A5[Aa[za].cause]||Aa[za].causeMsg)}),!!(Wa||{})[Qe.fh.BEFORE]&&i.createElement("div",{className:"breakAll mBottom12 Gray_75"},_l("\u5BA1\u6279\u524D\u66F4\u65B0\u4E86\u8BB0\u5F55")),Jn&&U().includes([1,2,4],aa)&&i.createElement("div",{className:"breakAll mBottom12 Gray_75"},i.createElement("span",null,_l("\u5F00\u59CB\u5BA1\u6279")),i.createElement("span",null,"("),i.createElement("span",null,_l("\u4F1A\u7B7E\uFF1A")),i.createElement("span",null,ar.en[aa]),i.createElement("span",null,")")),i.createElement("div",{className:"personDetail flex Gray_75 flexRow"},(U().includes([0,3,4,5,27],Xa)||ir)&&i.createElement(i.Fragment,null,i.createElement("div",{className:"personInfo inlineFlexRow"},i.createElement("span",null,ir?_l("\u53D1\u8D77\u4EBA\uFF1A"):Xa===0?_l("\u89E6\u53D1\u8005\uFF1A"):_l("%0\u4EBA\uFF1A",ar.QZ[Xa].text)),Er.map(function(za,Ja){return za&&i.createElement("span",{className:T()({overrule:za.action===5}),key:Ja},za.name,Ja<Er.length-1&&"\u3001")}),Ia&&!!Ia.length&&i.createElement("div",null,i.createElement("span",null,_l("\u63D0\u9192\u4EBA\uFF1A")),Ia.map(function(za,Ja){return za.accounts.map(function(or,Ua){return i.createElement(i.Fragment,{key:Ja+"-"+Ua},i.createElement("span",null,or.fullName),i.createElement("span",{className:"Gray_9e"},"(",bn()(za.executeTime).format("MM-DD HH:mm"),")"),(Ja!==Ia.length-1||Ua!==za.accounts.length-1)&&i.createElement("span",null,"\u3001"))})}))),U().includes([4,5],xa)&&!Jn&&It&&i.createElement("div",{className:ar.P7[xa].status},st===7777&&Fn.name?_l("\u8FC7\u671F\u81EA\u52A8\u4E2D\u6B62"):ar.A5[st]||Zt))),!Jn||!U().includes([1,2,4],aa)&&Er.map(function(za,Ja){if(za){var or=za.action,Ua=za.target;return or?U().includes([2,8,16],or)?i.createElement("div",{key:Ja,className:"actionDetail flexRow Gray_75"},i.createElement("div",{className:"actionType"},_l("%0\uFF1A",ar.KW[or].text)),Ua&&i.createElement("div",{className:"actionTarget"},Ua)):i.createElement("div",{key:Ja}):i.createElement("div",{key:Ja})}}),!!Wa&&i.createElement(i.Fragment,null,!!Wa[Qe.fh.PASS]&&i.createElement("div",{className:"info Gray_75"},_l("\u901A\u8FC7\u540E\u66F4\u65B0\u4E86\u8BB0\u5F55")),!!Wa[Qe.fh.OVERRULE]&&i.createElement("div",{className:"info Gray_75"},_l("\u5426\u51B3\u540E\u66F4\u65B0\u4E86\u8BB0\u5F55")),!!Wa[Qe.fh.RETURN]&&i.createElement("div",{className:"info Gray_75"},_l("\u9000\u56DE\u540E\u66F4\u65B0\u4E86\u8BB0\u5F55")),!!Wa[Qe.fh.ADD_OPERATION]&&i.createElement("div",{className:"info Gray_75"},_l("\u65B0\u589E\u8282\u70B9\u64CD\u4F5C\u660E\u7EC6"))))},M.operationInstance=function(qe){var It=M.state.isRetry,ft=M.props.id;It||(M.setState({isRetry:!0}),qe({instanceId:ft}).then(function(st){M.setState({data:st,isRetry:!1})}))},M.renderTemplateInfo=function(qe){return i.createElement("div",{className:"info"},qe.workItems.map(function(It){return It.opinion}).join("\u3001"))},A),(0,m.default)(M,Ve)}return(0,oe.default)(Ae,[{key:"componentWillMount",value:function(){this.getData(),this.getProcessPublish()}},{key:"renderSubProcess",value:function(A){return A.flowNode.subProcessId?i.createElement("span",{className:"ThemeColor3 ThemeHoverColor2 pointer",onClick:function(){return window.open("/workflowedit/"+A.flowNode.subProcessId+"/2/subprocessHistory/"+A.workId+"_"+A.instanceId)}},_l("\u67E5\u770B\u8BE6\u60C5")):null}},{key:"renderRetryBtn",value:function(A){var M=this,Ve=this.state,Oe=Ve.data,it=Ve.isRetry,ot=Oe.instanceLog,qe=Oe.logs,It=ot.cause,ft=U().includes([3,4],Oe.status)&&It!==7777,st=Oe.status===1;return ft||st?i.createElement("div",{className:T()("historyDetailRetry",it?"historyDetailRetryDisabled":"ThemeHoverColor2 ThemeHoverBorderColor2"),"data-tip":ft?_l("\u4ECE\u5931\u8D25\u6216\u4E2D\u6B62\u7684\u8282\u70B9\u5904\u5F00\u59CB\u91CD\u8BD5"):_l("\u4E2D\u6B62\u6D41\u7A0B"),onClick:function(On){On.stopPropagation(),M.retryPosition=A,M.operationInstance(ft?pr.Z.resetInstance:pr.Z.endInstance)}},ft?i.createElement(i.Fragment,null,i.createElement(C.Z,{className:"Font14 mRight3",icon:"refresh1"}),_l("\u91CD\u8BD5"),!!qe.length&&"#"+qe.length):i.createElement(i.Fragment,null,i.createElement(C.Z,{className:"Font14 mRight3",icon:"block"}),_l("\u4E2D\u6B62"))):null}},{key:"indentLevel",value:function(A){for(var M=this.state.data,Ve=M.works,Oe=0;;){var it=Ve.find(function(qe){return U().includes(qe.flowNode.flowIds||[],A)}),ot=Ve.find(function(qe){return qe.flowNode.id===A});if(it?(Oe++,A=U().get(it,"flowNode.prveId")):A=U().get(ot,"flowNode.prveId"),!A)break}return Oe}},{key:"render",value:function(){var A=this,M=this.props,Ve=M.onClick,Oe=M.id,it=M.openNodeDetail,ot=this.state,qe=ot.data,It=ot.isRetry,ft=ot.processInfo;if(U().isEmpty(qe))return i.createElement(Bt.Z,null);var st=qe.works,Zt=qe.title,On=qe.createDate,Fn=qe.instanceLog,Ca=qe.completeType,Jn=Fn.cause,aa=Fn.nodeName,xa=Fn.causeMsg,va=ar.jJ[qe.status].status,Pa=ar.R_[va],ta=Pa.color,Ia=Pa.bgColor,Aa={1:_l("\u901A\u8FC7"),2:_l("\u5426\u51B3"),3:_l("\u6709\u6570\u636E"),4:_l("\u65E0\u6570\u636E")};return i.createElement("div",{className:"historyDetailWrap"},i.createElement("div",{className:"header",onClick:Ve},i.createElement(C.Z,{icon:"backspace",className:"Font20 Gray_9e"}),i.createElement("span",{className:"backText Font15"},_l("\u8FD4\u56DE"))),i.createElement("div",{className:"detailContent"},i.createElement("div",{className:T()("itemInfo",va),style:{backgroundColor:Ia}},It&&this.retryPosition==="header"&&i.createElement("div",{className:"workflowRetryLoading"}),i.createElement(qr.Z,{statusCode:qe.status,size:44,color:ta,textSize:18}),i.createElement("div",{className:"title flex mRight15"},i.createElement("div",{className:"overflow_ellipsis Font18"},_l("\u6570\u636E\uFF1A")+(st.length&&st[0].flowNode.appType===17?Zt||_l("\u8F93\u5165\u53C2\u6570"):Zt||"")),i.createElement("div",{style:{color:ta}},Jn?Jn===40007?ar.A5[Jn]:aa?_l("\u8282\u70B9: ")+" "+aa+", "+(Jn===7777?_l("\u8FC7\u671F\u81EA\u52A8\u4E2D\u6B62"):ar.A5[Jn]||xa):ar.A5[Jn]||xa:"")),i.createElement("div",{className:"time"},i.createElement("div",{className:"Font15 Gray_75"},On),this.renderRetryBtn("header"))),i.createElement("div",{className:"logWrap"},i.createElement("div",{className:"logTitle Font16 Gray_75 flexRow",style:{alignItems:"center"}},i.createElement("div",{className:"flex"},_l("\u65E5\u5FD7")),!U().isEmpty(ft)&&i.createElement("div",{className:"Font13 Normal"},_l("\u7248\u672C\uFF1A%0",bn()(ft.lastPublishDate).format("YYYY-MM-DD HH:mm")),i.createElement("span",{className:"mLeft5 ThemeColor3 ThemeHoverColor2 pointer",onClick:function(){location.href="/workflowedit/"+ft.id+"/1/execHistory/"+Oe}},_l("\u8BE6\u60C5")))),i.createElement("ul",{className:"logList"},st.map(function(Wa,Xa){var Ha=Wa.flowNode,Er=Wa.startDate,ir=Wa.endDate,Ir=Wa.status,za=Wa.logs,Ja=Wa.multipleLevelType,or=Wa.sort,Ua=Wa.app,qa=Ha.name,dr=Ha.alias,Nr=Ha.resultTypeId,Sr=Ha.appType,wr=ar.QZ[Ha.child&&Ha.type===0?16:Ha.type]||{},Ur=wr.type;return i.createElement("li",{key:Xa},It&&Xa===st.length-1&&A.retryPosition==="list"&&i.createElement("div",{className:"workflowRetryLoading"}),i.createElement("div",{className:"flowItemHistory flexRow"},i.createElement(qr.Z,{config:ar.P7,statusCode:Ir}),Xa!==st.length-1&&!!(za||[]).length&&i.createElement("span",{className:"mLeft8"},i.createElement("div",{className:"historyDetailRetryResult"},_l("\u91CD\u8BD5")+"#"+za.length)),Xa===st.length-1&&i.createElement("span",{className:"mLeft8"},A.renderRetryBtn("list"))),i.createElement("div",{className:"originNode"},i.createElement("div",{style:{marginLeft:A.indentLevel(Ha.prveId)*20}}),i.createElement(Mo,{type:Ur,appType:Sr,actionId:Ha.actionId}),i.createElement("div",{className:"nodeName Font15 overflow_ellipsis flexColumn"},i.createElement("div",{title:qa,className:"pointer ThemeHoverColor3",onClick:function(){return(Ha.type!==1||!Nr)&&it({processId:ft.id,selectNodeId:Ha.type===1?Ha.flowIds[0]:Ha.id,selectNodeType:Ha.type===1?2:Ha.type,debugEvents:ft.debugEvents})}},Ha.type!==1?qa:Nr?Aa[U().find(Ha.flows,function(Mr){return Mr.id===Ha.flowIds[0]}).resultTypeId]:(U().find(Ha.flows,function(Mr){return Ha.type===1&&Mr.id===Ha.flowIds[0]})||{}).name||_l("\u5206\u652F"),Ja!==0&&or&&_l("\uFF08\u7B2C%0\u7EA7\uFF09",or)),dr&&i.createElement("div",{className:"Gray_75 Font13 ellipsis"},_l("\u522B\u540D\uFF1A%0",dr)),Ua&&Sr!==Qe.IF.EVENT_PUSH&&i.createElement("div",{className:"Gray_75 Font13 ellipsis"},_l("\u5DE5\u4F5C\u8868 \u201C%0\u201D",Ua.name)))),i.createElement("div",{className:"operationPerson"},U().includes([16,20,26],Ha.type)?A.renderSubProcess(Wa):Ha.type===19?A.renderTemplateInfo(Wa):A.renderOperationInfo(Wa,Xa===st.length-1)),i.createElement("div",{className:"operationTime Gray_75"},i.createElement("div",{className:"enterTime"},_l("\u8FDB\u5165:")+" "+bn()(Er).format("YYYY-MM-DD HH:mm:ss")),ir&&i.createElement("div",{className:"leaveTime"},_l("\u79BB\u5F00:")+" "+bn()(ir).format("YYYY-MM-DD HH:mm:ss"))))}),Ca===1&&i.createElement("li",{className:"pBottom0 pTop25"},i.createElement("div",{className:"TxtCenter Gray_9e w100"},_l("\u6D41\u7A0B\u5DF2\u7ED3\u675F")))))))}}]),Ae}(i.Component),lo.propTypes={id:P.string,onClick:P.func,openNodeDetail:P.func},lo.defaultProps={onClick:function(){},openNodeDetail:function(){}},Io);const Qo=function(Wn){var Ae=Wn.className,Ge=Wn.hideIcon,A=Ge===void 0?!1:Ge,M=Wn.onChange,Ve=M===void 0?function(){}:M,Oe=(0,i.useState)(!1),it=(0,Na.Z)(Oe,2),ot=it[0],qe=it[1],It=(0,i.useState)([]),ft=(0,Na.Z)(It,2),st=ft[0],Zt=ft[1],On=(0,i.useState)(""),Fn=(0,Na.Z)(On,2),Ca=Fn[0],Jn=Fn[1],aa=function(){var va=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Jn(va.id),Ve(va.id),qe(!1)};return(0,i.useEffect)(function(){Ar.Z.getArchivedList().then(function(xa){Zt(xa)})},[]),st.length?i.createElement(ur.Z,{popupVisible:ot,onPopupVisibleChange:function(va){return qe(va)},action:["click"],popup:function(){return i.createElement(Eo.Z,null,st.map(function(va,Pa){return i.createElement(yo.Z,{key:Pa,disabled:va.id===Ca,onClick:function(){return aa(va)}},va.text)}),Ca&&i.createElement(i.Fragment,null,i.createElement("div",{style:{height:1,background:"#bdbdbd"}}),i.createElement(yo.Z,{onClick:function(){return aa()}},_l("\u6E05\u9664"))))},popupAlign:{points:["tl","bl"],offset:[0,10],overflow:{adjustX:!0,adjustY:!0}}},i.createElement("span",{className:T()("pointer Gray_9e InlineFlex alignItemCenter",Ca?"ThemeColor3":"ThemeHoverColor3",Ae),"data-tip":Ca&&!ot?st.find(function(xa){return xa.id===Ca}).text:""},!A&&i.createElement(C.Z,{icon:"drafts_approval mRight8",className:"Font22"}),i.createElement("span",{className:"Font14"},_l("\u5F52\u6863")))):null};var io,No=(0,En.Z)(me.Z),zr=(0,Br.Z)(io=function(Wn){(0,y.default)(Ae,Wn);function Ae(Ge){(0,e.default)(this,Ae);var A=(0,m.default)(this,(Ae.__proto__||k()(Ae)).call(this,Ge));A.pageSize=20,A.filterPara={},A.getData=function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},qe=A.props.flowInfo.id,It=A.state,ft=It.pageIndex,st=It.workId,Zt=It.instanceId,On=It.filters,Fn=It.requestPending,Ca=It.archivedId,Jn=A.pageSize,aa=A.filterPara,xa=(0,L.default)({pageIndex:ft,processId:qe,pageSize:Jn,workId:st,instanceId:Zt,archivedId:Ca},aa);U().isEmpty(On)&&!xa.startDate&&(xa.startDate=bn()().add(-6,"M").format("YYYY/MM/DD HH:mm")),Ca&&(xa.startDate=void 0),!Fn&&(A.setState({requestPending:!0}),Ar.Z.getHistoryList(xa,{isIntegration:location.href.indexOf("integration")>-1}).then(function(va){A.setState({data:ft===1?va:A.state.data.concat(va),pageIndex:ft+1,hasMoreData:va.length>=A.pageSize}),ot()}).finally(function(){A.setState({requestPending:!1})}))},A.handleFilter=function(ot){A.filterPara=ot,A.setState({pageIndex:1,batchIds:[]},function(){A.getData()})},A.getMore=function(){A.getData()},A.handleRestoreVisible=function(ot){var qe=A.props.flowInfo;E.Z.confirm({title:_l("\u786E\u5B9A\u6062\u590D\u5230\u6307\u5B9A\u7248\u672C\u5417\uFF1F"),description:_l("\u6267\u884C\u6B64\u64CD\u4F5C\u540E\uFF0C\u6D41\u7A0B\u5C06\u56DE\u6EDA\u5230\u6307\u5B9A\u7684\u53D1\u5E03\u7248\u672C\u3002\u60A8\u672A\u53D1\u5E03\u7684\u6D41\u7A0B\u4FEE\u6539\u5C06\u4F1A\u88AB\u6E05\u9664\uFF0C\u6B64\u64CD\u4F5C\u65E0\u6CD5\u64A4\u56DE"),okText:_l("\u786E\u5B9A\u6062\u590D"),onOk:function(){Z.Z.goBack({processId:ot}).then(function(){location.href="/workflowedit/"+qe.id})}})},A.getHistoryList=U().throttle(function(){var ot=A.props.flowInfo,qe=A.state,It=qe.historyIsLoading,ft=qe.historyIndex,st=qe.historyIsMore,Zt=qe.historyList;ft>1&&(It&&st||!st)||(A.setState({historyIsLoading:!0}),Z.Z.getHistory({processId:ot.id,pageIndex:ft,pageSize:20}).then(function(On){A.setState({historyList:ft===1?On:Zt.concat(On),historyIsLoading:!1,historyIndex:ft+1,historyIsMore:On.length===20})}))},200),A.formatData=function(ot){return cn()(ot).map(function(qe){return(0,L.default)({},ot[qe],{value:qe})})},A.renderTimePlaceholder=function(){var ot=A.state.filters,qe=(ot.time||[]).map(function(Zt){return Zt&&bn()(Zt).format("YYYY/MM/DD HH:mm")}),It=(0,Na.Z)(qe,2),ft=It[0],st=It[1];return!ft&&!st?i.createElement("span",{className:"placeholder"},_l("\u6700\u5927\u8DE8\u5EA6180\u5929")):ft+" ~ "+st},A.onRecovery=function(ot,qe){var It=A.props.flowInfo;zn.Z.updateWaiting({processId:It.id,waiting:ot,hours:qe}).then(function(){A.getProcessAccumulation()})};var M=Ge.match.params,Ve=M.operator,Oe=M.operatorId,it=[];return U().includes(["execHistory","subprocessHistory"],Ve)?Ve==="subprocessHistory"&&(it=(Oe||"").split("_")):it=[Ve],A.state={data:[],selectActionId:it.length===1?it[0]:"",workId:it.length>1?it[0]:"",instanceId:it.length>1?it[1]:"",pageIndex:1,hasMoreData:!1,instanceData:null,historyVisible:!1,historyIsLoading:!1,historyIndex:1,historyIsMore:!0,historyList:[],showFilter:!1,filters:{},accumulation:{},requestPending:!1,batchIds:[],selectNodeObj:{},archivedId:""},A}return(0,oe.default)(Ae,[{key:"componentWillMount",value:function(){var A=this.state.instanceId;this.getData(),this.getProcessAccumulation(),A&&this.getInstance()}},{key:"getInstance",value:function(){var A=this,M=this.state.instanceId;Ar.Z.getInstance({instanceId:M}).then(function(Ve){A.setState({instanceData:Ve})})}},{key:"renderInstanceContent",value:function(){var A=this,M=this.state,Ve=M.instanceId,Oe=M.instanceData;return!Ve||Oe===null?null:i.createElement("div",{className:"instanceContent"},i.createElement("div",{className:"instanceContentBox flexRow ellipsis Font14"},i.createElement("div",{className:"flex bold"},i.createElement("span",{className:"ThemeColor3 ThemeHoverColor2 mRight10 pointer",onClick:function(){return window.open("/workflowedit/"+Oe.process.id)}},Oe.process.name),_l("\u89E6\u53D1\u4E86\u4EE5\u4E0B\u5B50\u6D41\u7A0B")),i.createElement(kr.Z,{className:"pointer Gray_9e ThemeHoverColor3 Font16 mLeft20",to:"/workflowedit/"+this.props.flowInfo.id+"/2",onClick:function(){A.setState({workId:"",instanceId:"",instanceData:null},A.handleFilter)}},i.createElement("i",{className:"icon-delete"}))))}},{key:"renderHistory",value:function(){var A=this,M=this.props.flowInfo,Ve=M.enabled,Oe=M.companyId,it=this.state,ot=it.historyIsLoading,qe=it.historyIndex,It=it.historyList;return i.createElement(No,{component:"div",className:"historyBox flexColumn",style:{height:It.length*40+64},onClickAwayExceptions:[".restoreWrap",".mui-dialog-container"],onClickAway:function(){return A.setState({historyVisible:!1})}},i.createElement("div",{className:"flexRow historyReleaseItem Gray_9e noBG"},i.createElement("div",{className:"w250"},_l("\u53D1\u5E03\u65F6\u95F4")),i.createElement("div",{className:"flex"},_l("\u53D1\u5E03\u8005"))),i.createElement(Mt.Z,{className:"flex",onScrollEnd:this.getHistoryList},It.map(function(ft,st){return i.createElement("div",{className:"flexRow historyReleaseItem",key:st,onClick:function(){return location.href="/workflowedit/"+ft.id}},i.createElement("div",{className:"w250"},createTimeSpan(ft.date),st===0&&Ve&&i.createElement("span",{className:"historyReleaseItemActive"},_l("\u8FD0\u884C\u4E2D"))),i.createElement("div",{className:"flex flexRow"},i.createElement(Kr.Z,{projectId:Oe,user:{userHead:ft.publisher.avatar,accountId:ft.publisher.accountId},size:26}),i.createElement("div",{className:"mLeft12 flex ellipsis"},ft.publisher.fullName)),i.createElement("div",{className:"mLeft12"},i.createElement("span",{"data-tip":_l("\u6062\u590D"),className:It.length>1&&st===It.length-1?"tip-top":""},i.createElement(C.Z,{className:"Font16 Gray_9e ThemeHoverColor3 pointer",icon:"restore2",onClick:function(On){On.stopPropagation(),A.handleRestoreVisible(ft.id)}}))))}),ot&&qe>1&&i.createElement(Bt.Z,{className:"mTop15",size:"small"})))}},{key:"getProcessAccumulation",value:function(){var A=this,M=this.props.flowInfo;zn.Z.getDifferenceByProcessId({processId:M.id}).then(function(Ve){A.setState({accumulation:Ve})})}},{key:"render",value:function(){var A=this,M=this.props.flowInfo,Ve=this.state,Oe=Ve.data,it=Ve.selectActionId,ot=Ve.hasMoreData,qe=Ve.historyVisible,It=Ve.showFilter,ft=Ve.filters,st=Ve.accumulation,Zt=Ve.requestPending,On=Ve.batchIds,Fn=Ve.selectNodeObj,Ca=M.lastPublishDate,Jn=M.parentId,aa=M.enabled,xa=!U().isEmpty(ft)&&!It,va={processId:Fn.processId,selectNodeId:Fn.selectNodeId,selectNodeType:Fn.selectNodeType,debugEvents:Fn.debugEvents,instanceId:it,closeDetail:function(){return A.setState({selectNodeObj:{}})}};return it?i.createElement(i.Fragment,null,i.createElement(Mt.Z,{className:"workflowHistoryWrap flex"},i.createElement("div",{className:"workflowHistoryContentWrap"},i.createElement($o,{id:it,onClick:function(){return A.setState({selectActionId:""})},openNodeDetail:function(ta){return A.setState({selectNodeObj:ta})}}))),i.createElement(nr.Z,va)):i.createElement(Mt.Z,{className:"workflowHistoryWrap flex"},i.createElement("div",{className:"lastPublishInfo"},i.createElement("div",{className:"flex Gray"},!Jn&&!Ca?_l("\u5F85\u6D41\u7A0B\u53D1\u5E03\u540E\uFF0C\u5728\u6B64\u5904\u67E5\u770B\u6D41\u7A0B\u7684\u8FD0\u884C\u5386\u53F2"):xa?i.createElement(i.Fragment,null,_l("\u6D41\u7A0B\u72B6\u6001\uFF1A"),i.createElement("span",{className:"pointer ThemeHoverColor3",onClick:function(){A.setState({showFilter:!0})}},ar.jJ[ft.status].text),i.createElement("span",{className:"mLeft15"},_l("\u7B5B\u9009\u65F6\u95F4\uFF1A")),i.createElement("span",{className:"pointer ThemeHoverColor3",onClick:function(){A.setState({showFilter:!0})}},this.renderTimePlaceholder()),i.createElement("span",{className:"mLeft15 pointer ThemeColor3 ThemeHoverColor2",onClick:function(){A.setState({filters:{}}),A.handleFilter({})}},_l("\u6E05\u9664\u7B5B\u9009"))):i.createElement(i.Fragment,null,_l("\u9ED8\u8BA4\u67E5\u770B\u6700\u8FD1\u534A\u5E74\u5185\u7684\u6D41\u7A0B\u8FD0\u884C\u8BB0\u5F55"),i.createElement("span",{className:"mLeft10 ThemeColor3 ThemeHoverColor2 pointer",onClick:function(){A.setState({showFilter:!0})}},_l("\u67E5\u770B\u66F4\u65E9")),i.createElement(Qo,{className:"mLeft10 ThemeColor3 ThemeHoverColor2",hideIcon:!0,onChange:function(ta){return A.setState({archivedId:ta,pageIndex:1},A.getData)}}))),Jn?i.createElement("div",null,_l("\u53EA\u5C55\u793A\u8BE5\u53D1\u5E03\u7248\u672C\u7684\u6D41\u7A0B\u5386\u53F2"),i.createElement("span",{className:"ThemeColor3 ThemeHoverColor2 mLeft10 pointer",onClick:function(){return location.href="/workflowedit/"+Jn}},_l("\u6253\u5F00\u5F53\u524D\u6D41\u7A0B"))):Ca?i.createElement(i.Fragment,null,aa&&i.createElement("div",null,_l("\u5F53\u524D\u8FD0\u884C\u4E2D\u6D41\u7A0B\u53D1\u5E03\u4E8E: %0",createTimeSpan(Ca))),i.createElement("div",{className:"restoreWrap ThemeHoverColor3 relative",onClick:function(ta){ta.target.className.indexOf("restoreWrap")>-1&&(qe?A.setState({historyVisible:!1}):A.setState({historyVisible:!0,historyIndex:1,historyIsMore:!0,historyList:[]},A.getHistoryList))}},_l("\u5386\u53F2\u7248\u672C"),qe&&this.renderHistory())):null),i.createElement("div",{className:"workflowHistoryContentWrap"},this.renderInstanceContent(),i.createElement(Xr,{processId:M.id,isSerial:U().includes([2,3],M.executeType),filters:xa?{status:ft.status,startDate:ft.time[0].format("YYYY/MM/DD HH:mm"),endDate:ft.time[1].format("YYYY/MM/DD HH:mm")}:{},hideStatusAndDate:xa,batchIds:On,onFilter:this.handleFilter,onRefresh:function(ta){A.setState({pageIndex:1,batchIds:[]},function(){A.getData(ta)}),A.getProcessAccumulation()}}),i.createElement(il,{processId:M.id,data:Oe,accumulation:st,disabled:xa,updateSource:function(ta,Ia){var Aa=[].concat(Oe);Aa[Ia]=ta,A.setState({data:Aa})},getMore:this.getMore,hasMoreData:ot,requestPending:Zt,batchIds:On,onClick:function(ta){return A.setState({selectActionId:ta})},onRecovery:this.onRecovery,onRefreshAccumulation:function(){return A.getProcessAccumulation()},onUpdateBatchIds:function(ta){return A.setState({batchIds:ta})}})),It&&i.createElement(E.Z,{className:"workflowHistoryBox",closable:!1,visible:!0,title:_l("\u7B5B\u9009\u6761\u4EF6"),okDisabled:!ft.status||!ft.time,onCancel:function(){A.setState({showFilter:!1,filters:{}}),A.handleFilter({})},onOk:function(){A.handleFilter({status:ft.status,startDate:ft.time[0].format("YYYY/MM/DD HH:mm"),endDate:ft.time[1].format("YYYY/MM/DD HH:mm")}),A.setState({showFilter:!1})}},i.createElement("div",null,_l("\u6D41\u7A0B\u72B6\u6001")),i.createElement(te.Z,{className:"w100 mTop10",isAppendToBody:!0,border:!0,onChange:function(ta){return A.setState({filters:Ut()({},ft,{status:ta})})},value:ft.status,data:this.formatData(ar.jJ),placeholder:_l("\u8BF7\u9009\u62E9")}),i.createElement("div",{className:"mTop20 mBottom10"},_l("\u65F6\u95F4\u8303\u56F4")),i.createElement(ja.Z,{mode:"datetime",timeMode:"minute",selectedValue:ft.time||["",""],children:i.createElement("div",{className:"filterTimeRange"},i.createElement("div",null,this.renderTimePlaceholder()),i.createElement(C.Z,{icon:"bellSchedule",className:"Gray_9e Font18"})),onOk:function(ta){ta[1]-ta[0]>180*24*60*60*1e3?alert("\u6700\u5927\u8DE8\u5EA6180\u5929"):A.setState({filters:Ut()({},ft,{time:ta})})},onClear:function(){return A.setState({filters:Ut()({},ft,{time:""})})}})))}}]),Ae}(i.Component))||io;const no=(0,Fe.$j)(function(Wn){return Wn.workflow})(zr);var xo=t(66215),fr,Dr,Yr=(Dr=fr=function(Wn){(0,y.default)(Ae,Wn);function Ae(){var Ge,A,M,Ve;(0,e.default)(this,Ae);for(var Oe=arguments.length,it=Array(Oe),ot=0;ot<Oe;ot++)it[ot]=arguments[ot];return Ve=(A=(M=(0,m.default)(this,(Ge=Ae.__proto__||k()(Ae)).call.apply(Ge,[this].concat(it))),M),M.state={data:null,keywords:"",selectItems:[]},A),(0,m.default)(M,Ve)}return(0,oe.default)(Ae,[{key:"componentDidMount",value:function(){var A=this.props.visible;A&&this.getData()}},{key:"componentWillReceiveProps",value:function(A,M){!this.props.visible&&A.visible&&this.getData()}},{key:"getData",value:function(){var A=this,M=this.props.processId;Z.Z.getTriggerProcessList({processId:M}).then(function(Ve){A.setState({data:Ve})})}},{key:"renderList",value:function(){var A=this,M=this.props.filterIds,Ve=this.state.keywords,Oe=U().cloneDeep(this.state.data);return M.length&&(Oe=Oe.map(function(it){return it.processList=it.processList.filter(function(ot){return!U().includes(M,ot.id)}),it})),Ve&&(Oe=Oe.map(function(it){return it.processList=it.processList.filter(function(ot){return U().includes(ot.name.toLocaleLowerCase(),Ve.toLocaleLowerCase())}),it})),U().remove(Oe,function(it){return!it.processList.length}),i.createElement(Mt.Z,null,!Oe.length&&i.createElement("div",{className:"TxtCenter Gray_9e Font15",style:{marginTop:210}},_l("\u6682\u65E0\u641C\u7D22\u7ED3\u679C")),Oe.map(function(it,ot){return A.renderListItem(it,ot===Oe.length-1)}))}},{key:"renderListItem",value:function(A,M){var Ve=this,Oe=this.props.relationId,it=this.state.selectItems;return i.createElement(i.Fragment,{key:A.apkId},i.createElement("div",{className:"bold ellipsis"},Oe===A.apkId?_l("\u5F53\u524D\u5E94\u7528"):A.apkName),A.processList.map(function(ot,qe){return i.createElement(Te.Z,{key:qe,className:"mTop15 flexRow",checked:!!U().find(it,function(It){return It.id===ot.id}),text:ot.name,onClick:function(ft){return Ve.onSelect(A.apkName,ot,!ft)}})}),!M&&i.createElement("div",{className:"selectWorkflowLine"}))}},{key:"onSelect",value:function(A,M,Ve){var Oe=U().cloneDeep(this.state.selectItems);Ve?Oe.push((0,L.default)({apkName:A},M)):U().remove(Oe,function(it){return it.id===M.id}),this.setState({selectItems:Oe})}},{key:"render",value:function(){var A=this,M=this.props,Ve=M.visible,Oe=M.onSave,it=M.onClose,ot=this.state,qe=ot.data,It=ot.selectItems;return Ve?i.createElement(E.Z,{visible:!0,width:540,className:"selectWorkflowDialog",title:_l("\u9009\u62E9\u5DE5\u4F5C\u6D41"),onOk:function(){Oe(It),it()},onCancel:it},i.createElement("div",{className:"flexColumn h100"},i.createElement("div",{className:"flexRow relative"},i.createElement("input",{type:"text",placeholder:_l("\u641C\u7D22\u5DE5\u4F5C\u6D41\u540D\u79F0"),className:"selectWorkflowInput",onChange:function(st){return A.setState({keywords:st.target.value})}}),i.createElement(C.Z,{icon:"workflow_find",className:"selectWorkflowSearch Gray_9e Font16"})),i.createElement("div",{className:"flex mTop15"},qe===null?i.createElement(Bt.Z,null):qe.length?this.renderList():i.createElement("div",{className:"TxtCenter Gray_9e Font15",style:{marginTop:210}},_l("\u6682\u65E0\u5176\u4ED6\u5DE5\u4F5C\u6D41"))))):null}}]),Ae}(i.Component),fr.propTypes={visible:P.bool,processId:P.string,relationId:P.string,filterIds:P.array,onSave:P.func,onClose:P.func},fr.defaultProps={visible:!1,processId:"",relationId:"",filterIds:[],onSave:function(){},onClose:function(){}},Dr),Jo=t(5861),So=t(93618),wo=t(53054),To=t(1003),Xo=t(95103),sl=t(20640),jr=t.n(sl),ho=(0,r.Z)([`
  margin-top: 10px;
  border: 1px solid #ddd;
  border-radius: 4px;
  box-sizing: border-box;
  overflow: hidden;
  .header {
    background: #f2f2f2;
    height: 40px;
    line-height: 40px;
    > div {
      border-right: 1px solid #ddd;
      &:last-child {
        border: none;
      }
    }
  }
  .w20 {
    width: 20px;
    .clearLine {
      position: absolute;
      bottom: -1px;
      left: 0;
      right: 0;
      height: 1px;
      background: #fff;
      z-index: 1;
    }
  }
  .w110 {
    width: 110px;
  }
  .w130 {
    width: 130px;
  }
  .w180 {
    width: 180px;
  }
  .list {
    li {
      min-height: 40px;
      border-top: 1px solid #ddd;
      line-height: 20px;
      div {
        min-height: 40px;
        border-right: 1px solid #ddd;
        word-break: break-all;
        &:last-child {
          border: none;
        }
        input {
          width: 100%;
          border: none;
          height: 40px;
        }
      }
    }
  }
`],[`
  margin-top: 10px;
  border: 1px solid #ddd;
  border-radius: 4px;
  box-sizing: border-box;
  overflow: hidden;
  .header {
    background: #f2f2f2;
    height: 40px;
    line-height: 40px;
    > div {
      border-right: 1px solid #ddd;
      &:last-child {
        border: none;
      }
    }
  }
  .w20 {
    width: 20px;
    .clearLine {
      position: absolute;
      bottom: -1px;
      left: 0;
      right: 0;
      height: 1px;
      background: #fff;
      z-index: 1;
    }
  }
  .w110 {
    width: 110px;
  }
  .w130 {
    width: 130px;
  }
  .w180 {
    width: 180px;
  }
  .list {
    li {
      min-height: 40px;
      border-top: 1px solid #ddd;
      line-height: 20px;
      div {
        min-height: 40px;
        border-right: 1px solid #ddd;
        word-break: break-all;
        &:last-child {
          border: none;
        }
        input {
          width: 100%;
          border: none;
          height: 40px;
        }
      }
    }
  }
`]),bo=(0,r.Z)([`
  position: absolute;
  bottom: 25px;
  transform: translateY(-7px);
  z-index: 1;
  left: 130px;
  border-radius: 3px;
  color: #fff;
  padding: 5px 12px;
  white-space: nowrap;
  background: #f44336;
  font-size: 12px;
  min-height: auto !important;
  .errorArrow {
    position: absolute;
    transform: translateY(-5px);
    z-index: 1;
    left: 12px;
    background: transparent;
    border: 6px solid transparent;
    border-top-color: #f44336;
    bottom: -17px;
  }
`],[`
  position: absolute;
  bottom: 25px;
  transform: translateY(-7px);
  z-index: 1;
  left: 130px;
  border-radius: 3px;
  color: #fff;
  padding: 5px 12px;
  white-space: nowrap;
  background: #f44336;
  font-size: 12px;
  min-height: auto !important;
  .errorArrow {
    position: absolute;
    transform: translateY(-5px);
    z-index: 1;
    left: 12px;
    background: transparent;
    border: 6px solid transparent;
    border-top-color: #f44336;
    bottom: -17px;
  }
`]),vo=Qe.Jy.concat([{text:_l("\u5BF9\u8C61"),value:10000006,en:"object"}]),so=z.ZP.div(ho),cl=z.ZP.div(bo);const ko=function(Wn){var Ae=Wn.data,Ge=Ae===void 0?[]:Ae,A=Wn.list,M=A===void 0?[]:A,Ve=Wn.errorItems,Oe=Wn.setErrorItems,it=Wn.updateSource,ot=function(ft,st){var Zt=ft.controlId,On=ft.dataSource;return Ge.map(function(Fn){if(Fn.controlId===Zt&&(Fn.value=st),Fn.controlId===On){var Ca={},Jn=!0;Ge.filter(function(aa){return aa.dataSource===On}).forEach(function(aa){(Zt===aa.controlId&&st||Zt!==aa.controlId&&aa.value)&&(Jn=!1),Ca[aa.alias||aa.controlId]=Zt===aa.controlId?st:aa.value||""}),Fn.value=Jn?"":j()([Ca])}return Fn})},qe=function It(ft){return ft.map(function(st,Zt){return st.dataSource&&U().find(M,function(On){return On.controlId===st.dataSource}).type===10000007?null:i.createElement(i.Fragment,null,i.createElement("li",{className:"flexRow relative",key:st.controlId},st.dataSource&&i.createElement("div",{className:"w20 relative"},Zt!==ft.length-1&&i.createElement("span",{className:"clearLine"})),i.createElement("div",{className:T()("pLeft15 pRight15 pTop10 pBottom10",st.dataSource?"w110":"w130")},st.controlName),i.createElement("div",{className:"pLeft15 pRight15 w110 pTop10 pBottom10"},U().find(vo,function(On){return On.value===st.type}).text),i.createElement("div",{className:"pLeft15 pRight15 w180"},i.createElement("input",{type:"text",placeholder:_l("\u8BF7\u8F93\u5165\u522B\u540D"),value:st.alias,onFocus:function(Fn){return Fn.target.select()},onChange:function(Fn){var Ca=Fn.target.value.trim(),Jn="";Ca?/^[a-zA-Z]{1}\w*$/.test(Ca)?M.filter(function(va){return Ca===va.alias&&va.controlId!==st.controlId}).length>0?Jn=2:Jn="":Jn=1:Jn="";var aa=M.filter(function(va){return va.controlId!==st.controlId}),xa={};aa.forEach(function(va){U().find(aa,function(Pa){return Pa.alias===va.alias&&Pa.controlId!==va.controlId})||(xa[va.controlId]=Ve[va.controlId]===1?1:"")}),Oe(Ut()({},Ve,(0,Ot.default)({},st.controlId,Jn),xa)),it(Ge.map(function(va){return va.controlId===st.controlId&&(va.alias=Ca),va}).map(function(va){if(va.controlId===st.dataSource){var Pa={},ta=!0;Ge.filter(function(Ia){return Ia.dataSource===st.dataSource}).forEach(function(Ia){Ia.value&&(ta=!1),Pa[Ia.alias||Ia.controlId]=Ia.value||""}),va.value=ta?"":j()([Pa])}}))}})),i.createElement("div",{className:"pLeft15 pRight15 flex"},U().includes([10000003,10000008],st.type)?i.createElement("div",{className:"flexRow alignItemsCenter"},st.value):i.createElement("input",{type:"text",placeholder:_l("\u8BF7\u8F93\u5165\u53C2\u8003\u503C"),value:st.value,onFocus:function(Fn){return Fn.target.select()},onChange:function(Fn){return it(ot(st,Fn.target.value))},onBlur:function(Fn){return it(ot(st,Fn.target.value.trim()))}})),!!Ve[st.controlId]&&i.createElement(cl,null,Ve[st.controlId]===1?_l("\u975E\u6CD5\u5B57\u7B26"):_l("\u53C2\u6570\u540D\u79F0\u4E0D\u5141\u8BB8\u91CD\u590D"),i.createElement("i",{className:"errorArrow"}))),It(M.filter(function(On){return On.dataSource===st.controlId})))})};return i.createElement(so,null,i.createElement("div",{className:"header flexRow"},i.createElement("div",{className:"bold pLeft15 pRight15 w130"},_l("\u53C2\u6570\u540D")),i.createElement("div",{className:"bold pLeft15 pRight15 w110"},_l("\u7C7B\u578B")),i.createElement("div",{className:"bold pLeft15 pRight15 w180"},_l("\u522B\u540D")),i.createElement("div",{className:"bold pLeft15 pRight15 flex"},_l("\u53C2\u8003\u503C"))),i.createElement("ul",{className:"list"},qe(M.filter(function(It){return!It.dataSource}))))};var co=t(61987),Wr={ALLOW:0,ONLY_WORKFLOW:1,NO_ALLOW:2},Vo=function(Wn){(0,y.default)(Ae,Wn);function Ae(){var Ge,A,M,Ve;(0,e.default)(this,Ae);for(var Oe=arguments.length,it=Array(Oe),ot=0;ot<Oe;ot++)it[ot]=arguments[ot];return Ve=(A=(M=(0,m.default)(this,(Ge=Ae.__proto__||k()(Ae)).call.apply(Ge,[this].concat(it))),M),M.state={data:{},showWorkflow:!1,showSelectUserDialog:!1,tab:1,errorItems:{}},M.updateSource=function(qe){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};M.setState({data:Ut()({},M.state.data,qe)},It)},M.onSave=function(){var qe=M.props.flowInfo,It=M.state,ft=It.data,st=It.saveRequest,Zt=It.errorItems,On=ft.executeType,Fn=ft.allowRevoke,Ca=ft.revokeNodeIds,Jn=ft.errorNotifiers,aa=ft.errorInterval,xa=ft.triggerType,va=ft.processNames,Pa=ft.startEventPass,ta=ft.userTaskPass,Ia=ft.userTaskNullPass,Aa=ft.sendTaskPass,Wa=ft.processVariables,Xa=ft.allowUrge,Ha=ft.pbcConfig,Er=ft.responseContentType,ir=ft.value,Ir=ft.triggerView,za=ft.required,Ja=ft.agents,or=ft.dateShowType;if(U().find(Zt,function(Ua){return Ua})){alert(_l("\u6709\u53C2\u6570\u914D\u7F6E\u9519\u8BEF"),2);return}if(Wa.filter(function(Ua){return!Ua.controlName}).length){alert(_l("\u53C2\u6570\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"),2);return}st||(Z.Z.saveProcessConfig((0,L.default)({},ft,{processId:qe.id,executeType:On,allowRevoke:Fn,revokeNodeIds:Fn?Ca:[],errorNotifiers:Jn,errorInterval:aa,triggerType:xa,processIds:ft.triggerType===Wr.ONLY_WORKFLOW?va.map(function(Ua){return Ua.id}):[],startEventPass:Pa,userTaskPass:ta,userTaskNullPass:Ia,sendTaskPass:Aa,processVariables:Wa,allowUrge:Xa,pbcConfig:Ha,responseContentType:Er,value:ir.trim(),triggerView:Ir,required:za,agents:Ja,dateShowType:or})).then(function(Ua){Ua&&(alert(_l("\u4FDD\u5B58\u6210\u529F")),qe.publish&&M.props.dispatch((0,Rt.iR)({publishStatus:1,pending:!0}))),M.updateSource({processVariables:Ua}),M.setState({saveRequest:!1})}),M.setState({saveRequest:!0}))},M.selectProcess=function(qe){var It=M.state.data,ft=U().cloneDeep(It.processNames),st=ft.map(function(Zt){return Zt.id});qe.forEach(function(Zt){U().includes(st,Zt.id)||ft.push(Zt)}),M.updateSource({processNames:ft})},M.selectProcessCharge=function(qe){var It=M.props.flowInfo;(0,co.ZP)(qe.target,{offset:{top:10,left:0},projectId:It.companyId,unique:!0,filterAll:!0,filterFriend:!0,filterOthers:!0,filterOtherProject:!0,onSelect:function(st){M.updateSource({agents:st.map(function(Zt){return{type:Qe.$A.USER,entityId:"",entityName:"",roleId:Zt.accountId,roleName:Zt.fullname,avatar:Zt.avatar}})})}})},A),(0,m.default)(M,Ve)}return(0,oe.default)(Ae,[{key:"componentDidMount",value:function(){var A=this,M=this.props.flowInfo;Z.Z.getProcessConfig({processId:M.id}).then(function(Ve){A.setState({data:Ve})})}},{key:"deleteProcess",value:function(A){var M=this.state.data,Ve=U().cloneDeep(M.processNames);U().remove(Ve,function(Oe){return Oe.id===A}),this.updateSource({processNames:Ve})}},{key:"renderProcessContent",value:function(){var A=this,M=this.props.flowInfo,Ve=this.state,Oe=Ve.data,it=Ve.showSelectUserDialog,ot=Ve.showWorkflow,qe=[{text:_l("\u59CB\u7EC8\u901A\u77E5"),value:0},{text:_l("15\u5206\u949F"),value:15},{text:_l("1\u5C0F\u65F6"),value:60},{text:_l("2\u5C0F\u65F6"),value:120},{text:_l("6\u5C0F\u65F6"),value:360},{text:_l("12\u5C0F\u65F6"),value:720},{text:_l("24\u5C0F\u65F6"),value:1440}],It=[{text:_l("\u5E76\u884C\uFF08\u9ED8\u8BA4\uFF09"),value:1,desc:_l("\u6570\u636E\u5404\u81EA\u540C\u6B65\u6267\u884C\uFF0C\u9002\u5408\u8FD0\u884C\u5B9E\u4F8B\u95F4\u4E92\u4E0D\u5F71\u54CD\u7684\u6D41\u7A0B\u3002\u6267\u884C\u901F\u5EA6\u5FEB\uFF0C\u9002\u5408\u5927\u591A\u6570\u6D41\u7A0B\u4F7F\u7528")},{text:_l("\u987A\u5E8F\u6267\u884C"),value:2,desc:_l("\u6570\u636E\u6309\u987A\u5E8F\u9010\u6761\u6267\u884C\uFF0C\u4F46\u4E0D\u4F1A\u7B49\u5F85\u6D41\u7A0B\u4E2D\u5305\u542B\u7684\u5B50\u6D41\u7A0B\u548CPBP\u6267\u884C\u5B8C\u6BD5\uFF0C\u901F\u5EA6\u8F83\u6162")},{text:_l("\u4E25\u683C\u4E32\u884C"),value:3,desc:_l("\u6570\u636E\u6309\u987A\u5E8F\u9010\u6761\u6267\u884C\uFF0C\u4E0A\u4E00\u6761\u6D41\u7A0B\u5B8C\u5168\u6267\u884C\u5B8C\u6210\u540E\u624D\u4F1A\u6267\u884C\u4E0B\u4E00\u6D41\u7A0B\uFF0C\u901F\u5EA6\u6700\u6162")}],ft=[{text:_l("\u7CBE\u786E\u5230\u5206\u949F\uFF0C\u5982\uFF1A2010-10-01 12:23"),value:1},{text:_l("\u7CBE\u786E\u5230\u79D2\uFF0C\u5982\uFF1A2010-10-01 12:23:45"),value:6}],st=U().includes(Oe.debugEvents,0);return i.createElement(i.Fragment,null,i.createElement("div",{className:"bold Font16 mTop28"},_l("\u901A\u77E5\u4EBA")),i.createElement("div",{className:"mTop15"},i.createElement("span",{className:"bold"},_l("\u6D41\u7A0B\u62E5\u6709\u8005"))),i.createElement("div",{className:"flexRow alignItemsCenter"},i.createElement(So.Z,{companyId:M.companyId,leastOne:!0,accounts:Oe.agents}),i.createElement("div",{className:T()("ThemeColor3 AddUserBtn mTop12",{mLeft12:Oe.agents.length}),onClick:this.selectProcessCharge},i.createElement("i",{className:T()("Font28",Oe.agents.length?"icon-add-member3":"icon-task-add-member-circle")}))),i.createElement("div",{className:"mTop15"},i.createElement("span",{className:"bold"},_l("\u5176\u4ED6\u901A\u77E5\u4EBA")),i.createElement("span",{className:"Gray_9e"},_l("\uFF08\u5F53\u6D41\u7A0B\u9519\u8BEF\u65F6\uFF0C\u540C\u65F6\u901A\u77E5\u4EE5\u4E0B\u4EBA\uFF09"))),i.createElement(So.Z,{companyId:M.companyId,inline:!0,removeOrganization:!0,accounts:Oe.errorNotifiers,updateSource:function(On){var Fn=On.accounts;return A.updateSource({errorNotifiers:Fn})}}),i.createElement("div",{className:"mTop15 relative"},i.createElement("div",{className:"ThemeColor3 AddUserBtn",onClick:function(){return A.setState({showSelectUserDialog:!0})}},i.createElement("i",{className:"Font28 icon-task-add-member-circle"})),i.createElement(wo.Z,{visible:it,disabledNodeRole:!0,appId:M.relationId,companyId:M.companyId,accounts:Oe.errorNotifiers,updateSource:function(On){var Fn=On.accounts;return A.updateSource({errorNotifiers:Fn})},onClose:function(){return A.setState({showSelectUserDialog:!1})}})),i.createElement("div",{className:"mTop20 flexRow",style:{alignItems:"center"}},i.createElement(te.Z,{style:{width:100},menuStyle:{width:"100%"},data:qe,value:Oe.errorInterval,border:!0,onChange:function(On){return A.updateSource({errorInterval:On})}}),i.createElement("div",{className:"Gray_75 mLeft10"},_l("\u5185\u4E0D\u53D1\u9001\u540C\u7C7B\u9519\u8BEF\u901A\u77E5"))),i.createElement("div",{className:"processConfigLine"}),i.createElement("div",{className:"bold Font16 mTop28"},_l("\u8FD0\u884C\u65B9\u5F0F")),i.createElement("div",{className:"Gray_75 mTop5"},_l("\u8BBE\u7F6E\u6D41\u7A0B\u7684\u8FD0\u884C\u65B9\u5F0F\uFF0C\u4EC5\u652F\u6301\u65B0\u589E\u8BB0\u5F55\u89E6\u53D1\uFF0C\u81EA\u5B9A\u4E49\u52A8\u4F5C\u89E6\u53D1\u7684\u6D41\u7A0B")),It.map(function(Zt,On){return i.createElement(i.Fragment,{key:On},i.createElement("div",{className:"mTop15"},i.createElement(ze.Z,{className:"bold",text:Zt.text,disabled:!Oe.sequence&&Zt.value!==1,checked:Oe.executeType===Zt.value,onClick:function(){return A.updateSource({executeType:Zt.value})}})),i.createElement("div",{className:T()("Font12 mTop5 mLeft30",!Oe.sequence&&Zt.value!==1?"Gray_9e":"Gray_75")},Zt.desc))}),i.createElement("div",{className:"processConfigLine"}),i.createElement("div",{className:"bold Font16 mTop28"},_l("\u6570\u636E\u683C\u5F0F")),i.createElement("div",{className:"Gray_75 mTop5"},_l("\u8BBE\u7F6E\u52A8\u6001\u503C\u5728\u6D41\u7A0B\u6267\u884C\u8FC7\u7A0B\u4E2D\u5F15\u7528\u6216\u53C2\u4E0E\u8BA1\u7B97\u65F6\u4F7F\u7528\u7684\u6570\u636E\u683C\u5F0F")),i.createElement("div",{className:"mTop15 bold"},_l("\u7CFB\u7EDF\u5B57\u6BB5\u4E2D\u7684\u65E5\u671F\u503C")),ft.map(function(Zt,On){return i.createElement("div",{className:"mTop15",key:On},i.createElement(ze.Z,{text:Zt.text,checked:Oe.dateShowType===Zt.value,onClick:function(){return A.updateSource({dateShowType:Zt.value})}}))}),i.createElement("div",{className:"processConfigLine"}),i.createElement("div",{className:"bold Font16 mTop28"},_l("\u8282\u70B9\u65E5\u5FD7")),i.createElement("div",{className:"Gray_75 mTop5"},_l("\u542F\u7528\u540E\uFF0C\u53EF\u4EE5\u5728\u5386\u53F2\u65E5\u5FD7\u4E2D\u67E5\u770B\u5355\u4E2A\u8282\u70B9\u5728\u6D41\u7A0B\u6267\u884C\u65F6\u7684\u8F93\u5165\u3001\u8F93\u51FA\u6570\u636E\u3002\u65E5\u5FD7\u4FDD\u7559\u6700\u8FD190\u5929\u7684\u6570\u636E")),i.createElement("div",{className:"mTop10"},i.createElement(xo.Z,{checked:st,text:st?_l("\u5F00\u542F"):_l("\u5173\u95ED%03087"),onClick:function(){return A.updateSource({debugEvents:st?[]:[0]})}})),U().includes([Qe.IF.SHEET,Qe.IF.CUSTOM_ACTION],M.startAppType)&&i.createElement(i.Fragment,null,i.createElement("div",{className:"processConfigLine"}),i.createElement("div",{className:"bold Font16 mTop28"},_l("\u89E6\u53D1\u8005\u67E5\u770B")),i.createElement("div",{className:"Gray_75 mTop5 mBottom8"},_l("\u542F\u7528\u540E\uFF0C\u6D41\u7A0B\u89E6\u53D1\u8005\u53EF\u4EE5\u5728\u201C\u6211\u53D1\u8D77\u7684\u201D\u5F85\u529E\u9879\u4E2D\u67E5\u770B\u3001\u8FFD\u8E2A\u6B64\u6D41\u7A0B")),i.createElement("div",{className:"mTop10"},i.createElement(xo.Z,{checked:Oe.triggerView,text:Oe.triggerView?_l("\u5F00\u542F"):_l("\u5173\u95ED%03087"),onClick:function(){return A.updateSource({triggerView:!Oe.triggerView})}}))),i.createElement("div",{className:"processConfigLine"}),i.createElement("div",{className:"bold Font16 mTop28"},_l("\u89E6\u53D1\u5176\u4ED6\u5DE5\u4F5C\u6D41")),i.createElement("div",{className:"mTop15"},i.createElement(ze.Z,{text:_l("\u5141\u8BB8\u89E6\u53D1"),checked:Oe.triggerType===Wr.ALLOW,onClick:function(){return A.updateSource({triggerType:Wr.ALLOW})}})),i.createElement("div",{className:"Gray_75 Font12 mTop5 mLeft30"},_l("\u5728\u9009\u62E9\u6B64\u914D\u7F6E\u65F6\uFF0C\u5982\u679C\u8981\u89E6\u53D1\u672C\u8868\u7684\u5176\u4ED6\u5DE5\u4F5C\u6D41\uFF0C\u5FC5\u987B\u4E3A\u76EE\u6807\u6D41\u7A0B\u6307\u5B9A\u89E6\u53D1\u5B57\u6BB5")),i.createElement("div",{className:"mTop15"},i.createElement(ze.Z,{text:_l("\u53EA\u80FD\u89E6\u53D1\u6307\u5B9A\u5DE5\u4F5C\u6D41"),checked:Oe.triggerType===Wr.ONLY_WORKFLOW,onClick:function(){return A.updateSource({triggerType:Wr.ONLY_WORKFLOW})}})),Oe.triggerType===Wr.ONLY_WORKFLOW&&i.createElement("div",{className:"processConfigFlow mTop5 mLeft30"},i.createElement("div",null,Oe.processNames.map(function(Zt){return i.createElement("span",{key:Zt.id,className:"processConfigItem"},i.createElement("span",{className:"ellipsis InlineBlock",style:{maxWidth:210},onClick:function(){return window.open("/workflowedit/"+Zt.id)}},M.relationId===Zt.relationId?"":"\uFF08"+Zt.apkName+"\uFF09",Zt.name),i.createElement(C.Z,{icon:"close",className:"mLeft5 Font14",onClick:function(){return A.deleteProcess(Zt.id)}}))})),i.createElement("span",{className:"ThemeColor3 ThemeHoverColor2 pointer",onClick:function(){return A.setState({showWorkflow:!0})}},i.createElement(C.Z,{icon:"add",className:"mRight5 Font16"}),_l("\u9009\u62E9\u5DE5\u4F5C\u6D41"))),i.createElement("div",{className:"mTop15"},i.createElement(ze.Z,{text:_l("\u4E0D\u5141\u8BB8\u89E6\u53D1"),checked:Oe.triggerType===Wr.NO_ALLOW,onClick:function(){return A.updateSource({triggerType:Wr.NO_ALLOW})}})),i.createElement(Yr,{visible:ot,processId:M.id,relationId:M.relationId,filterIds:Oe.processNames.map(function(Zt){return Zt.id}),onSave:this.selectProcess,onClose:function(){return A.setState({showWorkflow:!1})}}))}},{key:"renderArtificialContent",value:function(){var A=this,M=this.props.flowInfo,Ve=this.state.data,Oe=U().includes([1,8],M.startAppType),it=[{text:_l("\u5BA1\u6279\u81EA\u52A8\u901A\u8FC7"),list:[{text:_l("\u5DE5\u4F5C\u6D41\u89E6\u53D1\u8005\u81EA\u52A8\u901A\u8FC7"),checked:Ve.startEventPass,disabled:!Oe,key:"startEventPass"},{text:_l("\u5DF2\u7ECF\u5BA1\u6279\u8FC7\u8BE5\u5BF9\u8C61\u7684\u5BA1\u6279\u4EBA\u81EA\u52A8\u901A\u8FC7"),checked:Ve.userTaskPass,key:"userTaskPass"},{text:_l("\u5BA1\u6279\u4EBA\u4E3A\u7A7A\u65F6\u81EA\u52A8\u901A\u8FC7"),checked:Ve.userTaskNullPass,key:"userTaskNullPass"},{text:_l("\u9A8C\u8BC1\u5FC5\u586B\u5B57\u6BB5"),checked:Ve.required,key:"required",tip:_l("\u52FE\u9009\u540E\uFF0C\u5F53\u6709\u5FC5\u586B\u5B57\u6BB5\u4E3A\u7A7A\u65F6\u4E0D\u81EA\u52A8\u901A\u8FC7\uFF0C\u4ECD\u9700\u8FDB\u884C\u5BA1\u6279\u64CD\u4F5C\u3002[\u5BA1\u6279\u4EBA\u4E3A\u7A7A\u65F6\u81EA\u52A8\u901A\u8FC7]\u4E0D\u53D7\u6B64\u914D\u7F6E\u5F71\u54CD\u3002")}]},{text:_l("\u901A\u77E5\u8282\u70B9\u8BBE\u7F6E"),list:[{text:_l("\u5DE5\u4F5C\u6D41\u89E6\u53D1\u8005\u4E0D\u53D1\u9001\u901A\u77E5"),checked:Ve.sendTaskPass,key:"sendTaskPass"}]}],ot=Ve.revokeFlowNodes.map(function(qe){return{text:qe.name,value:qe.id}});return Ve.revokeNodeIds[0]&&ot.unshift({text:_l("\u6E05\u9664\u9009\u62E9"),value:""}),i.createElement(i.Fragment,null,i.createElement("div",{className:"bold Font16 mTop28"},_l("\u89E6\u53D1\u8005\u64CD\u4F5C")),i.createElement("div",{className:"mTop15"},i.createElement(Te.Z,{className:"InlineFlex TxtTop",text:_l("\u5141\u8BB8\u89E6\u53D1\u8005\u64A4\u56DE"),checked:Ve.allowRevoke,disabled:!Oe,onClick:function(It){return A.updateSource({allowRevoke:!It})}}),Ve.allowRevoke&&i.createElement("div",{className:"mTop10 mLeft25 flexRow",style:{alignItems:"center"}},i.createElement("div",null,_l("\u8282\u70B9")),i.createElement(te.Z,{className:"mLeft10",style:{width:220},menuStyle:{width:"100%"},data:ot,value:Ve.revokeNodeIds[0]||void 0,border:!0,onChange:function(It){return A.updateSource({revokeNodeIds:It?[It]:[]})}}),i.createElement("div",{className:"mLeft10 flex"},_l("\u901A\u8FC7\u540E\u4E0D\u5141\u8BB8\u64A4\u56DE")))),i.createElement("div",{className:"mTop15"},i.createElement(Te.Z,{className:"InlineFlex TxtTop",text:_l("\u5141\u8BB8\u89E6\u53D1\u8005\u50AC\u529E"),checked:Ve.allowUrge,disabled:!Oe,onClick:function(It){return A.updateSource({allowUrge:!It})}})),it.map(function(qe,It){return i.createElement(i.Fragment,{key:It},i.createElement("div",{className:"bold Font16 mTop28"},qe.text),qe.list.map(function(ft){return i.createElement("div",{className:"mTop15 flexRow",key:ft.key},i.createElement(Te.Z,(0,L.default)({},ft,{className:"InlineFlex TxtTop",onClick:function(Zt){return A.updateSource((0,Ot.default)({},ft.key,!Zt))}})),ft.tip&&i.createElement("span",{className:"workflowDetailTipsWidth mLeft5","data-tip":ft.tip},i.createElement(C.Z,{icon:"info",className:"Gray_9e"})))}))}))}},{key:"renderParameterContent",value:function(){var A=this,M=this.state,Ve=M.data,Oe=M.errorItems;return i.createElement(i.Fragment,null,i.createElement("div",{className:"bold Font16 mTop28"},_l("\u53C2\u6570\u5BF9\u8C61")),i.createElement("div",{className:"Gray_75 mTop5 mBottom15"},_l("\u6D41\u7A0B\u5F00\u59CB\u8FD0\u884C\u65F6\u751F\u6210\uFF0C\u53EF\u4EE5\u7528\u4EE5\u6267\u884C\u8FD0\u7B97\uFF0C\u6216\u5B9E\u73B0\u4E24\u4E2A\u6D41\u7A0B\u95F4\u7684\u6570\u636E\u4F20\u9012\uFF1B\u547D\u540D\u65F6\u8BF7\u4EE5\u82F1\u6587\u5B57\u6BCD\u6253\u5934\uFF0C\u540D\u79F0\u4E2D\u7981\u6B62\u51FA\u73B0\u6C49\u5B57")),i.createElement(Jo.Z,{processVariables:Ve.processVariables,errorItems:Oe,setErrorItems:function(ot){return A.setState({errorItems:ot})},updateSource:this.updateSource}))}},{key:"renderPBCContent",value:function(){var A=this,M=this.props.flowInfo,Ve=this.state,Oe=Ve.data,it=Ve.errorItems,ot=Oe.processVariables.filter(function(It){return It.processVariableType===1}),qe=[{text:_l("\u4F7F\u7528\u5E94\u7528\u6388\u6743"),value:1},{text:_l("\u65E0\u9700\u6388\u6743"),value:0}];return i.createElement(i.Fragment,null,i.createElement("div",{className:"bold Font16 mTop28"},_l("\u5E73\u53F0API\u80FD\u529B")),i.createElement("div",{className:"Gray_9e mTop5"},_l("\u542F\u7528\u540E\uFF0C\u6211\u4EEC\u4F1A\u81EA\u52A8\u4E3A\u60A8\u7684\u4E1A\u52A1\u6D41\u7A0B\u751F\u6210\u76F8\u5173\u7684API\u5F00\u53D1\u6587\u6863\uFF0C\u4F9B\u60A8\u5411\u5176\u4ED6\u7B2C\u4E09\u65B9\u5916\u90E8\u7CFB\u7EDF\u63D0\u4F9B\u5E73\u53F0\u5F00\u653E\u80FD\u529B"),Oe.pbcConfig.enable&&i.createElement("a",{href:"/worksheetapi/"+M.relationId,target:"_blank",className:"mLeft2 ThemeColor3 ThemeHoverColor2"},_l("\u67E5\u770B\u6587\u6863"))),i.createElement("div",{className:"mTop10"},i.createElement(xo.Z,{checked:Oe.pbcConfig.enable,text:Oe.pbcConfig.enable?_l("\u5F00\u542F"):_l("\u5173\u95ED%03087"),onClick:function(){return A.updateSource({pbcConfig:Ut()({},Oe.pbcConfig,{enable:!Oe.pbcConfig.enable})})}})),Oe.pbcConfig.enable&&i.createElement(i.Fragment,null,i.createElement("div",{className:"bold Font16 mTop28"},_l("\u8BF7\u6C42\u5730\u5740")),i.createElement("div",{className:"mTop5 Gray_9e"},_l("\u6211\u4EEC\u4E3A\u60A8\u751F\u6210\u4E86\u4E00\u4E2A\u7528\u6765\u63A5\u6536\u8BF7\u6C42\u7684URL\uFF0C\u53EF\u4EE5\u5728URL\u540E\u81EA\u5B9A\u4E49\u62FC\u63A5\u5185\u5BB9")),i.createElement("div",{className:"mTop10 flexRow"},i.createElement("input",{type:"text",className:"webhookLink flex",style:{borderTopRightRadius:0,borderBottomRightRadius:0},value:Oe.pbcConfig.url,disabled:!0}),i.createElement("input",{type:"text",className:"webhookLinkCustom",value:Oe.pbcConfig.urlExtension,onChange:function(ft){return A.updateSource({pbcConfig:Ut()({},Oe.pbcConfig,{urlExtension:ft.target.value})})},onBlur:function(ft){return A.updateSource({pbcConfig:Ut()({},Oe.pbcConfig,{urlExtension:ft.target.value.trim()})})}}),i.createElement("div",{className:"mLeft10 webhookLinkCopy",onClick:function(){jr()((Oe.pbcConfig.url+"/"+Oe.pbcConfig.urlExtension).replace(/\/$/,"")),alert(_l("\u5DF2\u590D\u5236\u5230\u526A\u5207\u677F"))}},_l("\u590D\u5236"))),i.createElement("div",{className:"bold Font16 mTop28"},_l("\u8BF7\u6C42\u9274\u6743\u8BA4\u8BC1")),i.createElement("div",{className:"mTop15 flexRow"},qe.map(function(It,ft){return i.createElement(ze.Z,{key:ft,className:"bold mRight60",text:It.text,checked:Oe.pbcConfig.authType===It.value,onClick:function(){return A.updateSource({pbcConfig:Ut()({},Oe.pbcConfig,{authType:It.value})})}})})),!!ot.length&&i.createElement(i.Fragment,null,i.createElement("div",{className:"mTop28 Font16 bold"},_l("\u8BF7\u6C42\u53C2\u6570")),i.createElement("div",{className:"mTop5 Gray_9e"},_l("\u53EF\u4EE5\u4F7F\u7528 GET/POST \u65B9\u5F0F\u53D1\u9001\u53C2\u6570\u3002\u5F53\u4F7F\u7528 POST \u65F6\uFF0C\u8BF7\u6C42\u7684\u4E3B\u4F53\u5FC5\u987B\u662F JSON \u683C\u5F0F\uFF0C\u800C\u4E14 HTTP header \u7684 Content-Type \u9700\u8981\u8BBE\u7F6E\u4E3A application/json")),i.createElement(ko,{data:Oe.processVariables,list:ot,errorItems:it,setErrorItems:function(ft){return A.setState({errorItems:ft})},updateSource:this.updateSource})),this.renderResponseType()))}},{key:"renderResponseType",value:function(){var A=this,M=this.props.flowInfo,Ve=this.state,Oe=Ve.data,it=Ve.errorItems,ot=Ve.tab,qe=Oe.processVariables.filter(function(st){return st.processVariableType===2}),It=[{text:_l("\u901A\u8FC7\u56DE\u8C03\u5730\u5740\u63A5\u53D7\u8FD4\u56DE\u53C2\u6570"),value:1,desc:_l("\u6B64\u65F6\u5BF9\u65B9\u8BF7\u6C42\u65F6\u5FC5\u987B\u9644\u5E26\u53C2\u6570callbackURL\uFF0C\u6211\u65B9\u6D41\u7A0B\u8FD0\u884C\u7ED3\u675F\u540E\u4F1A\u5411\u6B64URL\u4F20\u9012\u8F93\u51FA\u53C2\u6570")},{text:_l("\u76F4\u63A5\u8FD4\u56DE\u56FA\u5B9A\u6587\u672C\u7ED9\u8BF7\u6C42\u5730\u5740"),value:3,desc:_l("\u5BF9\u65B9\u8BF7\u6C42\u65F6\uFF0C\u7ACB\u5373\u4EE5\u8FD4\u56DE\u4E00\u6BB5\u56FA\u5B9A\u6587\u672C\u7ED9\u8BF7\u6C42\u65B9")},{text:_l("\u76F4\u63A5\u8FD4\u56DE\u6D41\u7A0B\u8282\u70B9\u6570\u636E\u5BF9\u8C61\u7ED9\u8BF7\u6C42\u5730\u5740"),value:4,desc:_l("\u9009\u62E9\u4E00\u4E2A\u4EE3\u7801\u5757\u3001\u53D1\u9001API\u8BF7\u6C42\u3001JSON\u89E3\u6790\u6216\u8C03\u7528\u5DF2\u96C6\u6210API\u8282\u70B9\uFF0C\u628A\u5B83\u7684\u8FD4\u56DE\u6570\u636E\u5BF9\u8C61\u7ACB\u5373\u8FD4\u56DE\u7ED9\u8BF7\u6C42\u65B9\uFF1B\u8BF7\u63A7\u5236\u8BF7\u6C42\u9891\u7387\u5728500\u6B21/\u5C0F\u65F6\u4EE5\u5185\uFF0C\u6D41\u7A0B\u6267\u884C\u65F6\u95F430s\u4EE5\u5185\uFF0C\u79C1\u6709\u90E8\u7F72\u4E0D\u9650")},{text:_l("\u76F4\u63A5\u8FD4\u56DE\u6D41\u7A0B\u8282\u70B9\u7684\u5B57\u6BB5\u503C\u7ED9\u8BF7\u6C42\u5730\u5740"),value:5,desc:_l("\u5C06\u6240\u9009\u8282\u70B9\u7684\u5B57\u6BB5\u503C\u7ED3\u679C\u7ACB\u5373\u8FD4\u56DE\u7ED9\u8BF7\u6C42\u65B9\uFF0C\u652F\u6301\u9009\u62E9\u8FD4\u56DE\u683C\u5F0F;\u8BF7\u63A7\u5236\u8BF7\u6C42\u9891\u7387\u5728500\u6B21/\u5C0F\u65F6\u4EE5\u5185\uFF0C\u6D41\u7A0B\u6267\u884C\u65F6\u95F430s\u4EE5\u5185\uFF0C\u79C1\u6709\u90E8\u7F72\u4E0D\u9650\u76F4\u63A5\u8FD4\u56DE\u8F93\u51FA\u53C2\u6570\u7ED9\u8BF7\u6C42\u5730\u5740")},{text:_l("\u76F4\u63A5\u8FD4\u56DE\u8F93\u51FA\u53C2\u6570\u7ED9\u8BF7\u6C42\u5730\u5740"),value:2,desc:_l("\u8BF7\u63A7\u5236\u8BF7\u6C42\u9891\u7387\u5728500\u6B21/\u5C0F\u65F6\u4EE5\u5185\uFF0C\u6D41\u7A0B\u6267\u884C\u65F6\u95F430s\u4EE5\u5185\uFF0C\u79C1\u6709\u90E8\u7F72\u4E0D\u9650")}],ft=(0,pn.XH)(M.companyId,fn.UU.encapsulatingBusinessProcess);return ot===5&&U().remove(It,function(st){return U().includes([1,2],st.value)}),i.createElement(i.Fragment,null,ft&&i.createElement("div",{className:"bold Font16 mTop28"},_l("\u54CD\u5E94\u65B9\u5F0F")),ft&&i.createElement(te.Z,{className:"mTop10 w100 workflowConfigDropdown",menuStyle:{width:"100%"},data:It,value:Oe.pbcConfig.outType,border:!0,renderItem:function(Zt){var On=Zt.text,Fn=Zt.desc;return i.createElement(i.Fragment,null,i.createElement("div",{className:"itemText"},On),i.createElement("div",{className:"Gray_9e mTop3",style:{whiteSpace:"normal",lineHeight:"18px"}},Fn))},onChange:function(Zt){if(U().includes([2,3,4,5],Zt)&&ft==="2"){(0,pn.j0)(M.companyId,fn.UU.encapsulatingBusinessProcess);return}A.updateSource({pbcConfig:Ut()({},Oe.pbcConfig,{outType:Zt}),responseContentType:U().includes([1,2,4],Zt)?2:3,value:""})}}),!!qe.length&&U().includes([1,2],Oe.pbcConfig.outType)&&i.createElement(i.Fragment,null,i.createElement("div",{className:"mTop28 Font16 bold"},_l("\u54CD\u5E94\u53C2\u6570")),i.createElement(ko,{data:Oe.processVariables,list:qe,errorItems:it,setErrorItems:function(Zt){return A.setState({errorItems:Zt})},updateSource:this.updateSource})),U().includes([3,5],Oe.pbcConfig.outType)&&i.createElement(i.Fragment,null,i.createElement("div",{className:"mTop28 Font16 bold"},Oe.pbcConfig.outType===3?_l("\u76F4\u63A5\u8FD4\u56DE\u56FA\u5B9A\u6587\u672C\u7ED9\u8BF7\u6C42\u5730\u5740"):_l("\u76F4\u63A5\u8FD4\u56DE\u6D41\u7A0B\u8282\u70B9\u7684\u5B57\u6BB5\u503C\u7ED9\u8BF7\u6C42\u5730\u5740")),this.renderContentType(),i.createElement("div",{className:"workflowDialogBox"},i.createElement("div",{className:"flowDetailTrigger"},i.createElement(To.Z,{className:"minH100",projectId:M.companyId,processId:M.id,relationId:M.relationId,selectNodeId:Oe.pbcConfig.outType===3?M.startNodeId:Oe.pcbOutId,sourceAppId:Oe.pbcConfig.outType===3?M.startAppId:"",type:2,content:Oe.value,formulaMap:Oe.formulaMap,onChange:function(Zt,On,Fn){return A.updateSource({value:On})},updateSource:this.updateSource})))),Oe.pbcConfig.outType===4&&i.createElement(i.Fragment,null,i.createElement("div",{className:"mTop28 Font16 bold"},_l("\u76F4\u63A5\u8FD4\u56DE\u6D41\u7A0B\u8282\u70B9\u6570\u636E\u5BF9\u8C61\u7ED9\u8BF7\u6C42\u5730\u5740")),this.renderContentType(),i.createElement("div",{className:"flowDetailTrigger"},i.createElement(Xo.Z,{smallBorder:!0,appList:Oe.flowNodeList,selectNodeId:Oe.value,selectNodeObj:U().find(Oe.flowNodeList,function(st){return st.nodeId===Oe.value})||{},onChange:function(Zt){return A.updateSource({value:Zt})}}))))}},{key:"renderContentType",value:function(){var A=this,M=this.state.data,Ve=[{text:_l("\u7EAF\u6587\u672C")+"\uFF08text/plain\uFF09",value:3},{text:"JSON\uFF08application/json\uFF09",value:2},{text:"XML",value:6}];return i.createElement("div",{className:"flexRow mTop10"},Ve.map(function(Oe){return i.createElement(ze.Z,{key:Oe.value,className:"flex",text:Oe.text,checked:M.responseContentType===Oe.value,onClick:function(){return A.updateSource({responseContentType:Oe.value,value:""})}})}))}},{key:"render",value:function(){var A=this,M=this.props.flowInfo,Ve=U().includes([7],M.startAppType)&&!M.child,Oe=U().includes([17],M.startAppType)&&!M.child,it=this.state,ot=it.data,qe=it.tab;if(U().isEmpty(ot))return i.createElement(Bt.Z,{className:"mTop15"});var It=[{text:_l("\u57FA\u7840"),value:1,icon:"settings"},{text:_l("\u4EBA\u5DE5\u8282\u70B9\uFF08\u65E7\uFF09"),value:2,icon:"how_to_reg",tip:_l("\u6B64\u9879\u914D\u7F6E\u4EC5\u5BF9\u65E7\u7248\u4EBA\u5DE5\u8282\u70B9\u751F\u6548\u3002\u63A8\u8350\u4F7F\u7528\u65B0\u5BA1\u6279\u6D41\u7A0B\uFF01")},{text:_l("\u6D41\u7A0B\u53C2\u6570"),value:3,icon:"tune"},{text:_l("\u5E73\u53F0API\u80FD\u529B"),value:4,icon:"pbc"},{text:_l("\u81EA\u5B9A\u4E49\u54CD\u5E94"),value:5,icon:"workflow_webhook"}],ft=U().get(U().find(md.global.Account.projects,function(st){return st.projectId===M.companyId})||{},"licenseType");return(!Oe||ft===0)&&U().remove(It,function(st){return st.value===4}),(!Ve||!ot.pbcConfig||Ve&&!(0,pn.XH)(M.companyId,fn.UU.encapsulatingBusinessProcess))&&U().remove(It,function(st){return st.value===5}),i.createElement("div",{className:"flexRow flex"},i.createElement("ul",{className:"processConfigTab"},It.map(function(st){return i.createElement("li",{className:st.value===qe?"active":"",key:st.value,onClick:function(){return A.setState({tab:st.value})}},i.createElement(C.Z,{className:"Font16",icon:st.icon}),st.text,st.tip&&i.createElement("span",{className:"workflowDetailTipsWidth mLeft5","data-tip":st.tip},i.createElement(C.Z,{icon:"info",className:"Gray_9e"})))})),i.createElement("div",{className:"processConfig flexColumn flex"},i.createElement(Mt.Z,{className:"flex"},i.createElement("div",{className:"pLeft40 pRight40"},qe===1&&this.renderProcessContent(),qe===2&&this.renderArtificialContent(),qe===3&&this.renderParameterContent(),qe===4&&this.renderPBCContent(),qe===5&&this.renderResponseType())),i.createElement("div",{className:"pLeft40 pRight40 mTop20 flexRow alignItemsCenter"},i.createElement("span",{className:"processConfigSave ThemeBGColor3 ThemeHoverBGColor2 pointer",onClick:this.onSave},_l("\u4FDD\u5B58")),i.createElement(Wt.Z,{className:"pointer Gray_9e mLeft32",href:"https://help.mingdao.com/workflow/configuration",type:2,text:_l("\u5E2E\u52A9")}))))}}]),Ae}(i.Component);const Do=(0,Fe.$j)(function(Wn){return Wn.workflow})(Vo);var qo=function(Wn){(0,y.default)(Ae,Wn);function Ae(Ge){(0,e.default)(this,Ae);var A=(0,m.default)(this,(Ae.__proto__||k()(Ae)).call(this,Ge));return A.back=function(){history.length===1?location.href="/dashboard":history.back()},A.state={tabIndex:1,noAuth:!1},A}return(0,oe.default)(Ae,[{key:"componentDidMount",value:function(){this.checkIsAppAdmin(),$("html").addClass("AppAdminWorkflowEdit"),this.props.match.params.type&&this.setState({tabIndex:parseInt(this.props.match.params.type)})}},{key:"componentWillUnmount",value:function(){this.props.dispatch((0,Rt.pf)()),$("html").removeClass("AppAdminWorkflowEdit")}},{key:"checkIsAppAdmin",value:function(){var A=this;zn.Z.getProcessRole({relationId:this.props.match.params.flowId}).then(function(M){M?(A.props.dispatch((0,Rt.BX)(A.props.match.params.flowId)),A.props.dispatch((0,Rt.zJ)(A.props.match.params.flowId))):A.setState({noAuth:!0})})}},{key:"render",value:function(){var A=this,M=this.state,Ve=M.tabIndex,Oe=M.noAuth,it=this.props,ot=it.flowInfo,qe=it.onBack,It=it.match,ft=It.params,st=ft.operator,Zt=ft.operatorId,On={1:i.createElement(Vr,{instanceId:st==="execHistory"&&Zt?Zt:""}),2:i.createElement(no,null),3:i.createElement(Do,null)};return U().isEmpty(ot)&&!Oe?i.createElement(Bt.Z,{className:"mTop15"}):Oe?i.createElement("div",{className:"workflowSettings flexColumn h100"},i.createElement("div",{className:"workflowSettingsHeader flexRow"},i.createElement("i",{className:"icon-backspace Font20 ThemeColor3 workflowReturn",onClick:this.back})),i.createElement("div",{className:"flowEmptyWrap flex"},i.createElement("div",{className:"flowEmptyPic flowEmptyPic-lock"}),i.createElement("div",{className:"Gray_9e Font14 mTop20"},_l("\u60A8\u65E0\u6743\u8BBF\u95EE\u6216\u5DF2\u5220\u9664")))):ot.id?i.createElement("div",{className:"workflowSettings flexColumn h100"},i.createElement(Dt(),{title:_l("\u5DE5\u4F5C\u6D41\u7F16\u8F91")+" - "+ot.name}),i.createElement(en,{tabIndex:Ve,switchTabs:function(Ca){return A.setState({tabIndex:Ca})},onBack:qe}),On[Ve]):i.createElement("div",{className:"workflowSettings flexColumn h100"},i.createElement("div",{className:"workflowSettingsHeader flexRow"},i.createElement("i",{className:"icon-backspace Font20 ThemeColor3 workflowReturn",onClick:this.back})),i.createElement("div",{className:"flowEmptyWrap flex"},i.createElement("div",{className:"flowEmptyPic flowEmptyPic-del"}),i.createElement("div",{className:"Gray_9e Font14 mTop20"},_l("\u5DE5\u4F5C\u6D41\u5DF2\u5220\u9664"))))}}]),Ae}(i.Component);const Wo=(0,Fe.$j)(function(Wn){return Wn.workflow})(qo);var ao,_o,_r=(_o=ao=function(Wn){(0,y.default)(Ae,Wn);function Ae(){return(0,e.default)(this,Ae),(0,m.default)(this,(Ae.__proto__||k()(Ae)).apply(this,arguments))}return(0,oe.default)(Ae,[{key:"render",value:function(){var A=this.props,M=A.flowId,Ve=A.onBack,Oe={params:{flowId:M}};return i.createElement(vn,null,i.createElement(Wo,{match:Oe,onBack:Ve}))}}]),Ae}(i.Component),ao.propTypes={flowId:P.string,onBack:P.func},ao.defaultProps={flowId:"",onBack:function(){}},_o),_a=t(26226),$r=(0,r.Z)([`
  .line {
    border-top: 1px solid #eaeaea;
    margin: 24px 0;
  }
  .btnTxt {
    input {
      flex: 1;
    }
    span {
      width: 80px;
    }
  }
  .icon-ic_toggle_off {
    color: #bdbdbd;
  }
  .icon-ic_toggle_on {
    color: #00c345;
  }
  .bold400 {
    font-weight: 400;
  }
  .remarkWrap {
    background: #f8f8f8;
    border-radius: 3px 3px 3px 3px;
    border: 1px solid #dddddd;
    line-height: 36px;
    padding: 0 12px;
  }
`],[`
  .line {
    border-top: 1px solid #eaeaea;
    margin: 24px 0;
  }
  .btnTxt {
    input {
      flex: 1;
    }
    span {
      width: 80px;
    }
  }
  .icon-ic_toggle_off {
    color: #bdbdbd;
  }
  .icon-ic_toggle_on {
    color: #00c345;
  }
  .bold400 {
    font-weight: 400;
  }
  .remarkWrap {
    background: #f8f8f8;
    border-radius: 3px 3px 3px 3px;
    border: 1px solid #dddddd;
    line-height: 36px;
    padding: 0 12px;
  }
`]),el=z.ZP.div($r),tl=function(Wn){(0,y.default)(Ae,Wn);function Ae(Ge){(0,e.default)(this,Ae);var A=(0,m.default)(this,(Ae.__proto__||k()(Ae)).call(this,Ge)),M=Ge.info,Ve=M===void 0?{}:M;return A.state={doubleConfirm:Ve.doubleConfirm||{confirmMsg:_l("\u4F60\u786E\u8BA4\u6267\u884C\u6B64\u64CD\u4F5C\u5417\uFF1F"),cancelName:_l("\u53D6\u6D88"),sureName:_l("\u786E\u8BA4")},advancedSetting:Ve.advancedSetting,visible:Ge.visible,showApprovalTemplate:!1},A}return(0,oe.default)(Ae,[{key:"componentWillReceiveProps",value:function(A){if(!U().isEqual(this.props.info,A.info)){var M=A.info;this.state={doubleConfirm:M.doubleConfirm||{confirmMsg:_l("\u4F60\u786E\u8BA4\u6267\u884C\u6B64\u64CD\u4F5C\u5417\uFF1F"),cancelName:_l("\u53D6\u6D88"),sureName:_l("\u786E\u8BA4")},advancedSetting:M.advancedSetting}}}},{key:"render",value:function(){var A=this,M=this.state,Ve=M.advancedSetting,Oe=Ve===void 0?{}:Ve,it=M.showApprovalTemplate,ot=this.props.cloneInfo,qe=Oe.confirmcontent,It=qe===void 0?"":qe,ft=Oe.enableremark,st=ft===void 0?"":ft,Zt=Oe.remarkname,On=Zt===void 0?"":Zt,Fn=Oe.remarkhint,Ca=Fn===void 0?"":Fn,Jn=Oe.remarkrequired,aa=Jn===void 0?"":Jn,xa=Oe.remarktype,va=xa===void 0?"":xa,Pa=Oe.remarkoptions,ta=Pa===void 0?"[]":Pa;return i.createElement(E.Z,{title:_l("\u786E\u8BA4\u5C42\u8BBE\u7F6E"),okText:_l("\u4FDD\u5B58"),cancelText:_l("\u53D6\u6D88"),className:"doubleConfirmDialog",width:"560px",onCancel:function(){A.props.onCancel()},onOk:function(){console.log(Oe);var Aa=A.state.doubleConfirm,Wa=Aa===void 0?{}:Aa,Xa=Wa.confirmMsg,Ha=Xa===void 0?"":Xa,Er=Wa.sureName,ir=Er===void 0?"":Er,Ir=Wa.cancelName,za=Ir===void 0?"":Ir;A.props.onChange({doubleConfirm:{confirmMsg:Ha.trim()||U().get(ot,"doubleConfirm.confirmMsg")||_l("\u4F60\u786E\u8BA4\u6267\u884C\u6B64\u64CD\u4F5C\u5417\uFF1F"),sureName:ir.trim()||U().get(ot,"doubleConfirm.sureName")||_l("\u786E\u8BA4"),cancelName:za.trim()||U().get(ot,"doubleConfirm.cancelName")||_l("\u53D6\u6D88")},advancedSetting:(0,L.default)({},Oe,{remarkname:On.trim()||U().get(ot,"advancedSetting.remarkname")||_l("\u64CD\u4F5C\u539F\u56E0")})})},visible:this.props.visible},i.createElement(el,null,i.createElement("p",{className:"Bold"},_l("\u6807\u9898")),i.createElement("input",{className:"mTop10",value:U().get(this.state,"doubleConfirm.confirmMsg"),onChange:function(Aa){A.setState({doubleConfirm:(0,L.default)({},A.state.doubleConfirm,{confirmMsg:Aa.target.value})})}}),i.createElement("p",{className:"mTop24 bold"},_l("\u8BF4\u660E")),i.createElement("input",{className:"mTop10",value:It,onChange:function(Aa){A.setState({advancedSetting:(0,L.default)({},Oe,{confirmcontent:Aa.target.value})})}}),i.createElement("div",{className:"flexRow btnTxt alignItemsCenter mTop10"},i.createElement("span",{className:"bold400"},_l("\u786E\u8BA4\u6309\u94AE")),i.createElement("input",{value:U().get(this.state,"doubleConfirm.sureName"),onChange:function(Aa){A.setState({doubleConfirm:(0,L.default)({},A.state.doubleConfirm,{sureName:Aa.target.value})})}})),i.createElement("div",{className:"flexRow btnTxt alignItemsCenter mTop10"},i.createElement("span",{className:"bold400"},_l("\u53D6\u6D88\u6309\u94AE")),i.createElement("input",{value:U().get(this.state,"doubleConfirm.cancelName"),onChange:function(Aa){A.setState({doubleConfirm:(0,L.default)({},A.state.doubleConfirm,{cancelName:Aa.target.value})})}})),i.createElement("div",{className:"line"}),i.createElement("p",{className:"Bold"},_l("\u586B\u5199\u5907\u6CE8")),i.createElement("p",{className:"Gray_75 mTop16"},_l("\u542F\u7528\u540E\uFF0C\u7528\u6237\u9700\u8981\u5BF9\u64CD\u4F5C\u8FDB\u884C\u5907\u6CE8\u8BF4\u660E")),i.createElement(C.Z,{icon:st==="1"?"ic_toggle_on":"ic_toggle_off",className:"switchIcon Font50 Hand",onClick:function(){A.setState({advancedSetting:(0,L.default)({},Oe,{enableremark:st==="1"?"":"1"})})}}),st==="1"&&i.createElement(i.Fragment,null,i.createElement("div",{className:"flexRow btnTxt alignItemsCenter mTop10"},i.createElement("span",{className:"bold400"},_l("\u5907\u6CE8\u540D\u79F0")),i.createElement("input",{value:On,onChange:function(Aa){A.setState({advancedSetting:(0,L.default)({},Oe,{remarkname:Aa.target.value})})}})),i.createElement("div",{className:"flexRow btnTxt alignItemsCenter mTop10"},i.createElement("span",{className:"bold400"},_l("\u5F15\u5BFC\u6587\u5B57")),i.createElement("input",{value:Ca,onChange:function(Aa){A.setState({advancedSetting:(0,L.default)({},Oe,{remarkhint:Aa.target.value})})}})),i.createElement("div",{className:"flexRow btnTxt alignItemsCenter mTop10"},i.createElement("span",null),i.createElement(Te.Z,{className:"checkBox InlineBlock flex",text:i.createElement("span",null,_l("\u5FC5\u586B")),checked:aa==="1",onClick:function(){A.setState({advancedSetting:(0,L.default)({},Oe,{remarkrequired:aa==="1"?"":"1"})})}})),i.createElement("div",{className:"flexRow btnTxt alignItemsCenter mTop10"},i.createElement("span",null),i.createElement(Te.Z,{className:"checkBox InlineBlock flex",text:i.createElement("span",null,_l("\u8BBE\u7F6E\u6A21\u677F")),checked:!!safeParse(ta).template,onClick:function(){A.setState({advancedSetting:(0,L.default)({},Oe,{remarkoptions:safeParse(ta).template?"":j()({template:[]})}),showApprovalTemplate:!safeParse(ta).template})}})),!!safeParse(ta).template&&i.createElement("div",{className:"flexRow btnTxt alignItemsCenter mTop10"},i.createElement("span",null),i.createElement("div",{className:"remarkWrap flex flexRow",onClick:function(){A.setState({showApprovalTemplate:!0})}},i.createElement("div",{className:"flex"},i.createElement("span",{className:"ho"},_l("\u5DF2\u8BBE\u7F6E")),va!=="1"&&" ("+_l("\u5141\u8BB8\u7528\u6237\u4FEE\u6539")+")"),i.createElement(C.Z,{icon:"edit",className:"Gray_9e Hand LineHeight36 ThemeHoverColor3"})))),it&&i.createElement(_a.Z,{title:_l("\u5907\u6CE8\u6A21\u7248"),description:_l("\u9884\u7F6E\u5E38\u7528\u9879\u4F5C\u4E3A\u6A21\u677F\uFF0C\u5E2E\u52A9\u64CD\u4F5C\u4EBA\u5FEB\u6377\u586B\u5199"),keys:[{key:"template",text:_l("\u6A21\u677F")}],opinionTemplate:{opinions:safeParse(ta),inputType:va==="1"?2:1},onSave:function(Aa){A.setState({advancedSetting:(0,L.default)({},Oe,{remarktype:Aa.inputType===1?"":"1",remarkoptions:j()(Aa.opinions)})})},onClose:function(){return A.setState({showApprovalTemplate:!1})}})))}}]),Ae}(i.Component);const uo=tl;var nl=t(5420),Ro=t(26358),Ao=t(77632),Po,Uo,Qr,Go,go,al=(0,hr.Z)(Po=(Qr=Uo=function(Wn){(0,y.default)(Ae,Wn);function Ae(Ge){(0,e.default)(this,Ae);var A=(0,m.default)(this,(Ae.__proto__||k()(Ae)).call(this,Ge));return Go.call(A),A.state={saveLoading:!1,isErrer:!1,isShowBtnFilterDialog:!1,workflowId:"",showDoubleConfirmDialog:!1,showAppointDialog:!1,relationControls:[],showWorkflowDialog:!1,filterItemTexts:[],flowName:"",flowEnabled:!1,relationWorksheetInfo:{},enableConfirm:!1,verifyPwd:!1,advancedSetting:{},cloneInfo:{}},A}return(0,oe.default)(Ae,[{key:"componentDidMount",value:function(){this.initState(this.props),$(".Radio").attr("title","")}},{key:"componentWillReceiveProps",value:function(A){var M=this.props.btnDataInfo||{},Ve=A.btnDataInfo||{};U().isEqual(M,Ve)||this.initState(A)}},{key:"render",value:function(){var A=this,M=this.props,Ve=M.appId,Oe=M.worksheetId,it=M.rowId,ot=M.projectId,qe=M.columns,It=M.sheetSwitchPermit,ft=M.isListOption,st=this.state,Zt=st.btnId,On=st.relationWorksheetInfo,Fn=st.doubleConfirm,Ca=Fn===void 0?{}:Fn,Jn=st.showDoubleConfirmDialog,aa=st.advancedSetting,xa=st.cloneInfo,va=st.isEdit;return i.createElement(i.Fragment,null,i.createElement("div",{className:"flex",style:{overflow:"auto",backgroundColor:"#fff"}},this.renderCon()),this.renderActionFooter(),this.state.isShowBtnFilterDialog&&i.createElement(W,{sheetSwitchPermit:It,projectId:ot,appId:Ve,columns:qe,filters:this.state.filters,isShowBtnFilterDialog:this.state.isShowBtnFilterDialog,showType:this.state.showType,setValue:function(ta){A.setState({filters:ta.filters,isShowBtnFilterDialog:ta.isShowBtnFilterDialog,showType:ta.showType},function(){A.formatFilterData()})}}),Jn&&i.createElement(uo,{visible:Jn,cloneInfo:xa,info:{advancedSetting:aa,doubleConfirm:Ca},onChange:function(ta){A.setState((0,L.default)({showDoubleConfirmDialog:!1},ta))},onCancel:function(){A.setState({showDoubleConfirmDialog:!1})}}),this.state.showAppointDialog&&i.createElement(b,{cannotRelate:ft&&!va,relationWorksheetInfo:On,btnId:Zt,projectId:ot,showAppointDialog:this.state.showAppointDialog,writeObject:this.state.writeObject,relationControl:this.state.relationControl,updateRelationControl:function(ta){A.setState({relationControl:ta},function(){A.getRelationControl(ta)})},writeType:this.state.writeType,addRelationControlId:this.state.addRelationControlId,writeControls:this.state.writeControls,widgetList:this.state.widgetList,appId:Ve,worksheetId:Oe,rowId:it,relationControls:this.state.relationControls,setValue:function(ta){A.setState({showAppointDialog:ta.showAppointDialog,writeObject:ta.writeObject,writeType:ta.writeType,addRelationControlId:ta.addRelationControlId,writeControls:ta.writeControls,clickType:ta.clickType,workflowType:ta.workflowType})},workflowType:this.state.workflowType,clickType:this.state.clickType,currentSheetInfo:this.props.currentSheetInfo}),this.state.showWorkflowDialog&&i.createElement(_r,{flowId:this.state.workflowId,onBack:function(ta){A.setState({showWorkflowDialog:!1,flowEnabled:ta})}}))}}]),Ae}(i.Component),Go=function(){var Ae=this;this.ajaxRequest=null,this.initState=function(Ge){var A=Ge.btnDataInfo,M=A===void 0?{}:A,Ve=Ge.viewId,Oe=Ge.isListOption,it=Ge.isEdit,ot=M.isAllView,qe=M.name,It=qe===void 0?"":qe,ft=M.showType,st=ft===void 0?1:ft,Zt=M.clickType,On=Zt===void 0?1:Zt,Fn=M.workflowType,Ca=Fn===void 0?1:Fn,Jn=M.filters,aa=Jn===void 0?[]:Jn,xa=M.writeObject,va=xa===void 0?"":xa,Pa=M.relationControl,ta=Pa===void 0?"":Pa,Ia=M.writeType,Aa=Ia===void 0?"":Ia,Wa=M.addRelationControl,Xa=Wa===void 0?"":Wa,Ha=M.writeControls,Er=Ha===void 0?[]:Ha,ir=M.desc,Ir=ir===void 0?"":ir,za=M.enableConfirm,Ja=M.verifyPwd,or=M.advancedSetting,Ua=or===void 0?{}:or,qa=M.isBatch;if(!it&&Ve&&Ge.from!=="formset"){var dr=j()([Ve]);Ua=Oe?{listviews:dr}:{detailviews:dr}}Ua=(0,L.default)({},Ua,{remarkrequired:it?Ua.remarkrequired:"1",remarkname:Ua.remarkname||_l("\u64CD\u4F5C\u539F\u56E0")});var Nr={confirmMsg:M.confirmMsg||_l("\u4F60\u786E\u8BA4\u6267\u884C\u6B64\u64CD\u4F5C\u5417\uFF1F"),cancelName:M.cancelName||_l("\u53D6\u6D88"),sureName:M.sureName||_l("\u786E\u8BA4")};Ae.setState({name:It,showType:st,clickType:On,workflowType:Ca,filters:aa,enableConfirm:za,verifyPwd:Ja,advancedSetting:Ua,doubleConfirm:Nr,writeObject:va,relationControl:ta,writeType:Aa,addRelationControlId:Xa,writeControls:Er,widgetList:(Ge.worksheetControls||[]).filter(function(Sr){return!a.x0.includes(Sr.controlId)}),isEdit:Ge.isEdit,btnId:Ge.btnId,color:it?M.color||he.DM[1]:he.DM[0],icon:M.icon||he.UZ[0],desc:Ir,isAllView:ot||(!Ge.btnId&&Ge.from==="formset"?1:0),cloneInfo:{advancedSetting:Ua,doubleConfirm:Nr},isBatch:qa},function(){Ge.btnId||$(".nameInput").focus(),Ae.getRelationControl(ta),Ae.formatFilterData(),Ae.getProcessByTriggerId()})},this.getProcessByTriggerId=function(Ge,A){var M=Ae.props.worksheetId,Ve=Ae.state,Oe=Ve.btnId,it=Ve.clickType,ot=Ve.workflowType;Oe&&M&&(it===1||ot===1||A)&&(Ae.ajaxRequest&&Ae.ajaxRequest.abort(),Ae.ajaxRequest=Z.Z.getProcessByTriggerId({appId:M,triggerId:Oe}),Ae.ajaxRequest.then(function(qe){var It=qe[0]||{};Ae.setState({workflowId:It.id,flowName:It.name,flowEnabled:It.enabled},function(){Ge&&Ge(It.id)})}))},this.getRelationControl=function(Ge){var A=Ae.props.worksheetId,M=U().find(Ae.props.currentSheetInfo.template.controls,function(it){return it.controlId===Ge})||{},Ve=M.dataSource,Oe=Ve===void 0?"":Ve;Ge&&Oe?ce.Z.getWorksheetInfo({worksheetId:Oe,getTemplate:!0,getViews:!0,relationWorksheetId:A}).then(function(it){Ae.setState({relationControls:it.template.controls,relationWorksheetInfo:it})}):Ae.setState({relationControls:[],relationWorksheetInfo:{}})},this.isEditFn=function(){var Ge=Ae.props.btnList,A=!1;U().map(Ge,function(M){M.name===Ae.state.name&&Ae.state.btnId!==M.btnId&&(A=!0)}),Ae.setState({isErrer:!Ge||Ge.length<=0?!1:A})},this.formatFilterData=function(){var Ge=Ae.state.filters,A=Ae.props.columns;Ae.setState({filterItemTexts:(0,nl.cm)(A,Ge)})},this.renderFlowText=function(){var Ge=Ae.state,A=Ge.workflowType,M=Ge.isBatch,Ve=Ge.isEdit,Oe=Ae.props.isListOption;return A===2?"":Ve&&Ae.state.flowName?i.createElement("div",{className:"filterTextCon alignItemsCenter"},i.createElement("div",{className:"txtFilter"},i.createElement("div",{className:"Bold"},Ae.state.flowName,!Ae.state.flowEnabled&&i.createElement("span",{className:"Font13 mLeft5 redCon"},_l("\u672A\u542F\u7528"))),i.createElement("div",{className:"flexRow Font13 mTop6 Bold"},i.createElement("span",{className:"Gray_75"},_l("\u6570\u636E\u6E90"),":"),i.createElement("span",{className:"mLeft3"},M?_l("\u591A\u6761\u8BB0\u5F55"):_l("\u5355\u6761\u8BB0\u5F55")))),i.createElement("div",{className:"editWorkflow Hand",onClick:function(){Ae.setState({showWorkflowDialog:!0})}},_l("\u7F16\u8F91\u5DE5\u4F5C\u6D41"))):i.createElement("div",{className:"filterTextCon createCon "+(!U().isUndefined(Oe)&&!Oe&&!Ve?"pTop10 pBottom10":"pTop16 pBottom20")},i.createElement("div",{className:"txtFilter Gray Bold Font13"},_l("\u6DFB\u52A0\u6309\u94AE\u540E\u81EA\u52A8\u521B\u5EFA\u6D41\u7A0B")),!(!U().isUndefined(Oe)&&!Oe&&!Ve)&&i.createElement(i.Fragment,null,i.createElement("div",{className:"mTop14"},_l("\u6570\u636E\u6E90")),i.createElement(Ce.ZP,{data:[{value:0,text:_l("\u5355\u6761\u8BB0\u5F55")},{value:1,text:_l("\u591A\u6761\u8BB0\u5F55")}],size:"small",onChange:function(ot){Ae.setState({isBatch:ot===1})},checkedValue:M?1:0})))},this.renderCon=function(){var Ge=Ae.state,A=Ge.name,M=Ge.widgetList,Ve=Ge.relationControls,Oe=Ve===void 0?[]:Ve,it=Ge.writeControls,ot=Ge.relationControl,qe=Ge.addRelationControlId,It=Ge.writeObject,ft=Ge.showType,st=Ge.clickType,Zt=Ge.writeType,On=Ge.filterItemTexts,Fn=Ge.workflowType,Ca=Ge.filters,Jn=Ca===void 0?[]:Ca,aa=Ge.enableConfirm,xa=Ge.verifyPwd,va=Ge.workflowId,Pa=Ge.btnId,ta=ot!==""?Oe:M,Ia=It!==1&&!ot&&Zt!==1&&!qe;return i.createElement("div",{className:"createBtnBox mTop25"},i.createElement("h5",{className:"Gray"},_l("\u6309\u94AE\u540D\u79F0")),i.createElement("input",{value:A,placeholder:_l("\u4F8B\u5982\uFF1A\u6DFB\u52A0\u7EBF\u7D22\u3001\u5173\u95ED\u673A\u4F1A"),ref:function(Wa){Ae.inputEl=Wa},onChange:function(Wa){Ae.setState({name:Wa.target.value},function(){Ae.isEditFn()})},maxLength:"50",className:T()("nameInput Font14",{errer:Ae.state.isErrer})}),Ae.state.isErrer&&i.createElement("p",{className:"errorMessage mTop6 Font12"},_l("\u6309\u94AE\u540D\u79F0\u91CD\u540D\uFF0C\u8BF7\u91CD\u65B0\u4FEE\u6539")),i.createElement("div",{className:"flexRow"},i.createElement("div",{className:"flex"}," ",Ae.renderIcons()),i.createElement("div",{className:"mLeft12"}," ",Ae.renderColors())),Ae.renderDesc(),i.createElement("div",{className:"line"}),i.createElement("h5",{className:"Gray"},_l("\u52A8\u4F5C")),i.createElement(Ce.ZP,{data:[{value:1,text:_l("\u6267\u884C\u5DE5\u4F5C\u6D41")},{value:3,text:_l("\u586B\u5199\u8868\u5355\u5B57\u6BB5")}],size:"small",onChange:function(Wa){Wa===1?!va&&Pa?Ae.getProcessByTriggerId(function(){Ae.setState({workflowType:1,clickType:1})},!0):Ae.setState({workflowType:1,clickType:1}):Ae.setState({clickType:3},function(){(It===""||Zt===""||Ia)&&Ae.setState({showAppointDialog:!0})})},checkedValue:st}),st===1&&Ae.renderFlowText(),st===3&&It!==""&&Zt!==""&&!Ia&&i.createElement("div",{className:"filterTextCon"},i.createElement("div",{className:"txtFilter"},i.createElement("span",null,It===1?i.createElement("span",{className:"mRight10"},_l("\u5728\u5F53\u524D\u8BB0\u5F55\u4E2D")):i.createElement(i.Fragment,null,i.createElement("span",{className:"mRight10"},_l("\u5728\u5173\u8054\u8BB0\u5F55")),i.createElement("span",{className:"Bold mRight10"},"\u201C",M.filter(function(Aa){return ot===Aa.controlId}).length>0?M.filter(function(Aa){return ot===Aa.controlId})[0].controlName:i.createElement("span",{className:"Gray_9e"},_l("\u5173\u8054\u8BB0\u5F55\u5DF2\u5220\u9664")),"\u201D"),i.createElement("span",{className:""},_l("\u4E2D")))),i.createElement("span",null,Zt===1?i.createElement(i.Fragment,null,i.createElement("br",null),i.createElement("span",{className:"mRight10"},_l("\u586B\u5199"))):i.createElement(i.Fragment,null,i.createElement("span",{className:"mRight10"},_l("\u65B0\u5EFA")),ta.length>0&&qe!==""&&i.createElement("span",{className:"Bold"},U().find(ta,function(Aa){return Aa.controlId===qe})?U().find(ta,function(Aa){return Aa.controlId===qe}).controlName:""))),Zt===1&&ta.length>0&&it.map(function(Aa,Wa){var Xa=U().find(ta,function(Er){return Er.controlId===Aa.controlId});if(Xa){var Ha=Xa&&Xa.controlName;return i.createElement(i.Fragment,null,i.createElement("span",{className:"Bold"},Ha||(Xa.type===22?_l("\u5206\u5272\u7EBF"):_l("\u5907\u6CE8"))),it.length>Wa+1?"\u3001":"")}else return""})),i.createElement(C.Z,{icon:"hr_edit",className:"Gray_9d Font18 editFilter Hand",onClick:function(){Ae.setState({showAppointDialog:!0})}})),i.createElement("h5",{className:"Gray mTop32"},st===1?_l("\u70B9\u51FB\u6309\u94AE\u65F6"):_l("\u63D0\u4EA4\u65F6")),i.createElement(Te.Z,{className:"checkBox InlineBlock",text:_l("\u9700\u8981\u4E8C\u6B21\u786E\u8BA4 / \u586B\u5199\u5907\u6CE8"),checked:aa||st===2,onClick:function(){Ae.setState({enableConfirm:!(aa||st===2),showDoubleConfirmDialog:!(aa||st===2)})}}),i.createElement("br",null),(aa||st===2)&&i.createElement("div",{className:"filterTextCon"},i.createElement("div",{className:"txtFilter"},i.createElement("p",null,i.createElement("span",{className:"titleTxt Gray"},_l("\u63D0\u793A\u6587\u5B57")),i.createElement("span",{className:"txt Gray breakAll"},U().get(Ae.state,"doubleConfirm.confirmMsg"))),!!(U().get(Ae.state.advancedSetting,"confirmcontent")||"").trim()&&i.createElement("p",{className:"mTop5"},i.createElement("span",{className:"titleTxt Gray"},_l("\u8BE6\u7EC6\u5185\u5BB9")),i.createElement("span",{className:"txt Gray breakAll"},Ae.state.advancedSetting.confirmcontent)),U().get(Ae.state.advancedSetting,"enableremark")==="1"&&i.createElement("p",{className:"mTop5"},i.createElement("span",{className:"titleTxt Gray"},_l("\u586B\u5199\u5907\u6CE8")),i.createElement("span",{className:"txt Gray breakAll"},U().get(Ae.state.advancedSetting,"remarkrequired")==="1"?_l("\u5FC5\u586B"):_l("\u542F\u7528")))),i.createElement(C.Z,{icon:"hr_edit",className:"Gray_9d Font18 editFilter Hand",onClick:function(){Ae.setState({showDoubleConfirmDialog:!0})}})),i.createElement(Te.Z,{className:"checkBox InlineBlock",text:i.createElement("span",null,_l("\u767B\u5F55\u5BC6\u7801\u9A8C\u8BC1"),i.createElement(h.Z,{popupPlacement:"bottom",text:i.createElement("span",null,_l("\u542F\u7528\u540E\uFF0C\u7528\u6237\u9700\u8981\u8F93\u5165\u767B\u5F55\u5BC6\u7801\u901A\u8FC7\u6821\u9A8C\u540E\u624D\u53EF\u6267\u884C\u81EA\u5B9A\u4E49\u6309\u94AE"))},i.createElement(C.Z,{icon:"help_center",className:"Gray_9e mLeft5 Font16 TxtMiddle"}))),checked:xa,onClick:function(){Ae.setState({verifyPwd:!xa})}}),st===3&&i.createElement(i.Fragment,null,i.createElement("h5",{className:"Gray mTop32"},_l("\u63D0\u4EA4\u540E")),i.createElement(Te.Z,{className:"checkBox InlineBlock",text:_l("\u7EE7\u7EED\u6267\u884C\u5DE5\u4F5C\u6D41"),checked:Fn===1,onClick:function(){!va&&Fn!==1&&Pa?Ae.getProcessByTriggerId(function(){Ae.setState({workflowType:Fn===1?2:1})},!0):Ae.setState({workflowType:Fn===1?2:1})}}),Ae.renderFlowText()),i.createElement("div",{className:"line"}),i.createElement("h5",{className:"Gray"},_l("\u542F\u7528\u6309\u94AE")),i.createElement(Ce.ZP,{data:[{value:1,text:_l("\u4E00\u76F4")},{value:2,text:_l("\u6EE1\u8DB3\u7B5B\u9009\u6761\u4EF6")}],size:"small",onChange:function(Wa){Ae.setState({showType:Wa},function(){Wa===2&&Jn.length<=0&&Ae.setState({isShowBtnFilterDialog:!0})})},checkedValue:ft}),Jn.length>0&&ft===2&&i.createElement(_e.Z,{filterItemTexts:On,loading:!1,editFn:function(){return Ae.setState({isShowBtnFilterDialog:!0})}}))},this.renderColors=function(){var Ge=Ae.state.color,A=Ge===void 0?"transparent":Ge;return i.createElement("div",{className:"mTop32 customBtnColorBox"},i.createElement("h5",{className:"Gray Bold"},_l("\u989C\u8272")),i.createElement(ur.Z,{action:["click"],popupAlign:{points:["tr","br"]},popup:i.createElement("ul",{className:"buttonTrigger"},he.DM.map(function(M){return i.createElement("li",{className:T()("buttonSetLi colorLi Hand",{current:A===M}),style:{backgroundColor:M,borderColor:M==="transparent"?"#E0E0E0":M},onClick:function(){Ae.setState({color:M})}},A===M&&i.createElement(C.Z,{icon:"ok",className:T()("check",{Gray:A==="transparent"})}))}))},i.createElement("div",{className:"conBox flexRow alignItemsCenter Hand mTop10"},i.createElement("div",{className:T()("colorCon flex TxtCenter TxtMiddle Font18",{Gray:A==="transparent"}),style:{backgroundColor:A}},"A"),i.createElement("div",{className:"op"},i.createElement(C.Z,{type:"expand_more",className:"Gray_9d Font18 mLeft8 "})))))},this.renderIcons=function(){var Ge=Ae.state,A=Ge.icon,M=Ge.color,Ve=M===void 0?"transparent":M;return i.createElement("div",{className:"mTop32 customBtnIconBox"},i.createElement("h5",{className:"Gray Bold"},_l("\u56FE\u6807")),i.createElement(ur.Z,{action:["click"],popupAlign:{points:["tl","bl"]},popup:i.createElement("ul",{className:"buttonTrigger"},he.UZ.map(function(Oe){return i.createElement("li",{className:T()("buttonSetLi iconLi Hand",{current:Oe===A&&!!Oe,Font20:!Oe}),onClick:function(){Ae.setState({icon:Oe})}},Oe?i.createElement(C.Z,{icon:Oe}):_l("\u65E0"))}))},i.createElement("div",{className:"conBox flexRow alignItemsCenter Hand mTop10"},i.createElement("div",{className:"flex flexRow alignItemsCenter mLeft5"},i.createElement(C.Z,{type:A||"block",className:T()("Font18",{Gray_d:!A,Gray_9d:!!A,Font20:!A})})),i.createElement("div",{className:"op"},i.createElement(C.Z,{type:"expand_more",className:"Gray_9d Font18 mLeft8"})))))},this.renderDesc=function(){return i.createElement("div",{className:"customBtnIconBox"},i.createElement("h5",{className:"Gray pTop16"},_l("\u6309\u94AE\u8BF4\u660E")),i.createElement("div",{className:"mTop10"},i.createElement("input",{value:Ae.state.desc,placeholder:_l("\u8BF7\u8F93\u5165\u6309\u94AE\u8BF4\u660E"),onChange:function(A){Ae.setState({desc:A.target.value})},className:T()("descInput Font14")})))},this.renderActionFooter=function(){var Ge=Ae.props,A=Ge.worksheetId,M=Ge.appId,Ve=Ge.currentSheetInfo,Oe=Ae.state,it=Oe.btnId,ot=Oe.writeControls,qe=ot===void 0?[]:ot,It=Oe.relationControl,ft=It===void 0?"":It,st=Oe.relationWorksheetInfo,Zt=st===void 0?{}:st;return i.createElement("div",{className:"createActionCon"},i.createElement("span",{className:T()("addBtn",{disable:Ae.state.name===""}),onClick:function(){if(!Ae.state.saveLoading&&Ae.state.name!==""){if(Ae.state.isErrer){alert(_l("\u6309\u94AE\u540D\u79F0\u91CD\u540D\uFF0C\u8BF7\u91CD\u65B0\u4FEE\u6539"),3);return}Ae.setState({saveLoading:!0});var Fn=ft?Zt:Ve,Ca=qe.map(function(aa){var xa=U().find(Fn.template.controls,function(va){return va.controlId===aa.controlId})||{};return(0,L.default)({},aa,{defsource:U().get((0,Ao.Hi)([(0,L.default)({},xa,{advancedSetting:{defsource:aa.defsource}})])[0],["advancedSetting","defsource"])})}),Jn=(0,L.default)({btnId:it||"",name:Ae.state.name.replace(/(^\s*)|(\s*$)/g,""),worksheetId:A,filters:Ae.state.filters.map(Ro.QZ),confirmMsg:U().get(Ae.state,"doubleConfirm.confirmMsg"),sureName:U().get(Ae.state,"doubleConfirm.sureName"),cancelName:U().get(Ae.state,"doubleConfirm.cancelName"),workflowId:Ae.state.workflowId||"",desc:Ae.state.desc.trim(),appId:M},U().pick(Ae.state,["isAllView","color","icon","writeControls","addRelationControlId","relationControl","writeType","writeObject","clickType","showType","advancedSetting","enableConfirm","verifyPwd","workflowType","isBatch"]));ce.Z.saveWorksheetBtn((0,L.default)({},Jn,{writeControls:Ca})).then(function(aa){Ae.setState({saveLoading:!1,cloneInfo:{advancedSetting:Ae.state.advancedSetting,doubleConfirm:Ae.state.doubleConfirm}}),Jn=(0,L.default)({},Jn,{filters:Ae.state.filters,btnId:aa,addRelationControl:Ae.state.addRelationControlId}),!it&&!(Ae.state.workflowType===2&&Ae.state.clickType===3)?Ae.setState({btnId:aa,isEdit:!0},function(){Ae.props.onChangeEditStatus(!0),Ae.getProcessByTriggerId(function(xa){Jn=(0,L.default)({},Jn,{workflowId:xa}),Ae.props.updateCustomButtons(Jn,!it),Ae.setState({showWorkflowDialog:!0})})}):(it||(Jn=(0,L.default)({},Jn,{btnId:aa})),(Ae.state.workflowType===1||Ae.state.clickType===1)&&Ae.state.isEdit&&!Ae.state.flowName?Ae.getProcessByTriggerId(function(xa){Jn=(0,L.default)({},Jn,{workflowId:xa}),Ae.props.updateCustomButtons(Jn,!it),Ae.setState({showWorkflowDialog:!0})}):(Ae.props.updateCustomButtons(Jn,!it),Ae.props.onClose()))})}}},Ae.state.saveLoading?Ae.state.isEdit?_l("\u4FDD\u5B58..."):_l("\u6DFB\u52A0\u6309\u94AE..."):Ae.state.isEdit?_l("\u4FDD\u5B58"):_l("\u6DFB\u52A0\u6309\u94AE")),i.createElement("span",{className:"cacleBtn",onClick:function(){Ae.props.onClose()}},_l("\u53D6\u6D88")))}},Qr))||Po,rl=(0,me.Z)(go=function(Wn){(0,y.default)(Ae,Wn);function Ae(Ge){(0,e.default)(this,Ae);var A=(0,m.default)(this,(Ae.__proto__||k()(Ae)).call(this,Ge));return A.renderTitle=function(){return i.createElement("div",{className:"title Gray"},i.createElement("span",null,A.state.isEdit?_l("\u7F16\u8F91\u6309\u94AE"):_l("\u6DFB\u52A0\u6309\u94AE")),i.createElement(C.Z,{icon:"close",className:"Gray_9d Font20 pointer",onClick:A.props.onClose}))},A.state={isEdit:Ge.isEdit},A}return(0,oe.default)(Ae,[{key:"render",value:function(){var A=this;return i.createElement("div",{className:"createCustomBtnCon"},!this.props.isClickAway&&i.createElement("div",{className:"bgCustomBtnCon"}),i.createElement("div",{className:"flexColumn h100"},this.renderTitle(),i.createElement(al,(0,L.default)({},this.props,{onChangeEditStatus:function(Ve){A.setState({isEdit:Ve})}}))))}}]),Ae}(i.Component))||go;const Fo=rl},29383:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>E});var h=t(88239),Te=t(62521),C=t(16469),Ce=t(60967),Ne=t(63239),j=t.n(Ne),L=t(12424),I=t(86735),k=t(67294),e=t(29314),oe=t(15104),m=t(93967),y=t.n(m),i=t(71893),me=t(96486),J=t.n(me),T=(0,I.Z)([`
  .Icon {
    left: 0 !important;
  }
`],[`
  .Icon {
    left: 0 !important;
  }
`]),te=i.ZP.div(T);function E(r){var R=(0,k.useState)(!1),a=(0,L.Z)(R,2),z=a[0],N=a[1],q=r.item,K=r.data,ye=K.options,v=ye===void 0?[]:ye;if(v=v.filter(function(Q){return!Q.isDeleted}),[10].includes(K.type)||[9,11].includes(K.type)){var se=q.defsource,de=se===void 0?"[]":se;try{de=JSON.parse(q.defsource)}catch(Q){de=[]}var U=de[0]||{},pe=U.staticValue,Y=pe===void 0?"[]":pe;try{Y=JSON.parse(Y)}catch(Q){Y=[]}return k.createElement("div",{className:"optionsCon"},k.createElement(e.Z,{action:["click"],popup:k.createElement(Te.Z,null,v.map(function(Q){return k.createElement(C.Z,{key:Q.key,onClick:function(){[10].includes(K.type)?Y=Y.includes(Q.key)?Y.filter(function(Be){return Be!==Q.key}):Y.filter(function(Be){return v.map(function(ke){return ke.key}).includes(Be)}).concat(Q.key):Y=[Q.key],r.onChange(j()([{cid:"",rcid:"",staticValue:j()(Y)}]),!0),![10].includes(K.type)&&N(!1)}},[10].includes(K.type)?k.createElement(te,null,k.createElement(Ce.Z,{checked:Y.includes(Q.key),text:Q.value})):Q.value)})),popupClassName:y()("dropdownTrigger optionsConDropdownTrigger"),popupVisible:z,onPopupVisibleChange:function(Le){N(Le)},popupAlign:{points:["tl","bl"],overflow:{adjustX:!0,adjustY:!0}}},k.createElement("span",{className:"txt Hand ellipsis",onClick:function(){return N(!0)}},Y.filter(function(Q){return v.map(function(Le){return Le.key}).includes(Q)}).map(function(Q){return v.find(function(Le){return Le.key===Q}).value}).join("\uFF0C"))))}var be=function(){var Le=r.data,Be=Le===void 0?{}:Le,ke=Be.advancedSetting,Ie=ke===void 0?{}:ke,he=Ie.defsource,Re=he===void 0?"":he;try{Re=JSON.parse(Re)}catch(ue){Re=Re}return Be.type===34&&Re.length<=0?(0,h.default)({},Ie,{defaulttype:""}):Ie};return k.createElement(oe.Z,(0,h.default)({},J().pick(r,["allControls","globalSheetInfo","onChange","titleControl"]),{data:(0,h.default)({},r.data,{advancedSetting:be()}),from:1,writeObject:r.writeObject}))}},68976:(wn,gt,t)=>{"use strict";t.d(gt,{DM:()=>h,Fw:()=>Ne,UZ:()=>Te,up:()=>Ce,wX:()=>C});var h=["transparent","#2196F3","#9C27B0","#3F51B5","#E91E63","#FF9800","#4CAF50","#00BCD4"],Te=["","clear_1","done_2","star_3","heart_4","people_5","people_alt_6","shopping_7","send_8","mail_9","flag_10","notifications_11","delete_12","lightning_13","thumb_up_14","attach_money_15","build_16","edit_17","cloudy_18","qr_code_19","photo_camera_20","insert_photo_21","watch_latersvg_22","free_breakfast_23","insect_24","emoji_emotions_25","emoji_objects_26","help_center"],C=[1,2,3,4,5,6,8,9,10,11,15,16,17,18,19,23,24,26,27,28,29,36,46,48],Ce=[15,16,17,18,26,46],Ne=[20,22,25,30,31,32,33,37,38,10010,45,47,51,52]},83060:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>y});var h=t(85105),Te=t.n(h),C=t(99663),Ce=t(22600),Ne=t(49135),j=t(93196),L=t(67294),I=t(33126),k=t(15405),e=t(58950),oe=(0,I.Z)(k.Z),m=[".Discussion","#folderSelectDialog_container",".addLinkFileDialog","#attachemntsPreviewContainer"],y=function(i){(0,j.default)(me,i);function me(J){return(0,C.default)(this,me),(0,Ne.default)(this,(me.__proto__||Te()(me)).call(this,J))}return(0,Ce.default)(me,[{key:"render",value:function(){var T=["discussPortal","approval","workflow"];return this.props.logSwitch||T.push("logs"),this.props.discussSwitch||T.push("discuss","files"),L.createElement("div",{className:"Discussion"},L.createElement(oe,{onClickAway:this.props.onClose,onClickAwayExceptions:m},L.createElement(e.Z,{hiddenTabs:T,title:this.props.title,projectId:this.props.projectId,worksheetId:this.props.worksheetId,appId:this.props.appId,appSectionId:this.props.appSectionId,viewId:this.props.viewId,rowId:""})))}}]),me}(L.Component)},2591:(wn,gt,t)=>{"use strict";t.d(gt,{_:()=>v});var h=t(69288),Te=t(60967),C=t(85315),Ce=t(33867),Ne=t(63239),j=t.n(Ne),L=t(85105),I=t.n(L),k=t(99663),e=t(22600),oe=t(49135),m=t(93196),y=t(34279),i=t.n(y),me=t(64749),J=t(86735),T=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(1952);var E=t(89499),r=t(70714),R=t(71893),a=(0,J.Z)([`
  font-size: 14px;
  .nameMethodWrap {
    align-items: center;
    height: 32px;
    .Checkbox {
      width: unset !important;
      margin-bottom: 0px;
    }
    .width6 {
      width: 6px;
    }
  }
`],[`
  font-size: 14px;
  .nameMethodWrap {
    align-items: center;
    height: 32px;
    .Checkbox {
      width: unset !important;
      margin-bottom: 0px;
    }
    .width6 {
      width: 6px;
    }
  }
`]),z=[{value:0,label:_l("\u7A7A\u683C")+"( )",optionLabel:" "},{value:1,label:_l("\u7834\u6298\u53F7")+"(-)",optionLabel:"-"},{value:2,label:_l("\u4E0B\u5212\u7EBF")+"(_)",optionLabel:"_"},{value:3,label:_l("\u70B9")+"(.)",optionLabel:"."}],N=[{value:0,name:_l("\u8BB0\u5F55\u6807\u9898"),example:_l("\u5F20\u4E09")},{value:1,name:_l("\u5B57\u6BB5\u540D"),example:_l("\u8EAB\u4EFD\u8BC1\u7167\u7247")},{value:2,name:_l("\u6587\u4EF6\u539F\u59CB\u540D"),example:_l("\u8EAB\u4EFD\u8BC1\u4EBA\u50CF\u9762.jpg")}],q=R.ZP.div(a),K=me.default.Option,ye=function(se){(0,m.default)(de,se);function de(U){(0,k.default)(this,de);var pe=(0,oe.default)(this,(de.__proto__||I()(de)).call(this,U));return pe.handleExport=function(){var Y=pe.props,be=Y.appId,Q=Y.viewId,Le=Y.worksheetId,Be=Y.quickFilter,ke=Be===void 0?[]:Be,Ie=Y.filtersGroup,he=Ie===void 0?[]:Ie,Re=Y.navGroupFilters,ue=Y.selectRowIds,we=ue===void 0?[]:ue,Ee=Y.searchArgs,b=Ee.filterControls,le=Ee.keyWords,ae=Ee.searchType,ve=pe.state,W=ve.selectControlIds,ce=ve.hyphenValue,Z=ve.generateFolder,_e=ve.nameMethodValues;if(!W.length){alert(_l("\u81F3\u5C11\u9009\u62E9\u4E00\u4E2A\u9644\u4EF6\u5B57\u6BB5"),3);return}var P={appId:be,viewId:Q,worksheetId:Le,rowsEstablishRolderType:Z,connectorType:ce,controlIDs:W,fileJointNames:_e,filterControls:b,keyWords:le,searchType:ae,filtersGroup:he,navGroupFilters:Re,fastFilters:(0,E.pT)(ke),rowIds:we,isGetWorksheet:!0};$.ajax({headers:{Authorization:"md_pss_id "+(0,r.qz)()},type:"POST",url:md.global.Config.AjaxApiUrl+"File/DownloadRowsBatchFile",data:j()(P),dataType:"JSON",contentType:"application/json"}).then(function(xe){xe&&xe.exception&&alert(xe.exception,2)}),pe.props.onCancel()},pe.state={hyphen:"-",hyphenValue:1,nameMethodValues:N.map(function(Y){return Y.value}),selectControlIds:!_.isEmpty(U.attachmentControls)&&U.attachmentControls.length===1?U.attachmentControls.map(function(Y){return Y.controlId}):[],generateFolder:!1},pe}return(0,e.default)(de,[{key:"checkControlVisible",value:function(pe){if(!pe)return!1;var Y=pe.controlPermissions||"111",be=pe.fieldPermission||"111";return be[0]==="1"&&Y[0]==="1"}},{key:"render",value:function(){var pe=this,Y=this.props,be=Y.visible,Q=Y.onCancel,Le=Q===void 0?function(){}:Q,Be=Y.attachmentControls,ke=Be===void 0?[]:Be,Ie=Y.isCharge,he=this.state,Re=he.hyphen,ue=he.hyphenValue,we=he.nameMethodValues,Ee=we===void 0?[]:we,b=he.selectControlIds,le=b===void 0?[]:b,ae=he.generateFolder,ve=N.filter(function(ce){return _.includes(Ee,ce.value)}),W=ke.filter(function(ce){return Ie||pe.checkControlVisible(ce)});return T.createElement(h.Z,{className:"exportSheet",visible:!0,anim:!1,title:_l("\u6279\u91CF\u5BFC\u51FA\u9644\u4EF6"),width:530,okText:_l("\u5BFC\u51FA"),onCancel:Le,onOk:this.handleExport},T.createElement(q,null,T.createElement("div",{className:"Gray_9e mBottom30"},_l("\u9009\u62E9\u9700\u8981\u5BFC\u51FA\u7684\u9644\u4EF6\u5B57\u6BB5\uFF0C\u5BFC\u51FA\u9644\u4EF6\u603B\u6570\u4E0D\u8D85\u8FC71000\u4E2A\uFF0C\u603B\u5927\u5C0F\u4E0D\u8D85\u8FC71GB")),T.createElement("div",{className:"bold mBottom10"},_l("\u9009\u62E9\u5BFC\u51FA\u7684\u9644\u4EF6\u5B57\u6BB5")),W.map(function(ce){return T.createElement(Te.Z,{key:ce.controlId,size:"small",text:T.createElement(T.Fragment,null,ce.controlName||"",Ie&&!pe.checkControlVisible(ce)&&T.createElement(Ce.Z,{type:"workflow_hide",className:"Font14 Gray_9e mLeft5"})),checked:_.includes(le,ce.controlId),onClick:function(_e){var P=[].concat((0,C.Z)(le));P=_e?P.filter(function(xe){return xe!==ce.controlId}):P.concat(ce.controlId),pe.setState({selectControlIds:P})}})}),T.createElement("div",{className:"bold mTop20"},_l("\u547D\u540D\u65B9\u5F0F")),T.createElement("div",{className:"nameMethodWrap flexRow"},N.map(function(ce,Z){return T.createElement(T.Fragment,{key:ce.value},T.createElement(Te.Z,{size:"small",text:ce.name,checked:_.includes(Ee,ce.value),onClick:function(P){if(Ee.length<=1&&P)return alert(_l("\u81F3\u5C11\u9009\u62E9\u4E00\u79CD\u547D\u540D\u65B9\u5F0F"),3);var xe=[].concat((0,C.Z)(Ee));xe=P?xe.filter(function(bt){return bt!==ce.value}):xe.concat(ce.value),pe.setState({nameMethodValues:xe})}}),Z<N.length-1&&T.createElement("span",{className:"mLeft16 mRight16 width6"},Re))}),Ee.length>1&&T.createElement(T.Fragment,null,T.createElement("span",{className:"mLeft40 mRight7"},_l("\u8FDE\u63A5\u7B26")),T.createElement(me.default,{style:{width:65},dropdownMatchSelectWidth:!1,dropdownStyle:{width:120},optionLabelProp:"optionLabel",value:ue,onChange:function(Z,_e){pe.setState({hyphen:_e.optionLabel,hyphenValue:Z})}},z.map(function(ce){return T.createElement(K,{value:ce.value,optionLabel:ce.optionLabel},ce.label)})))),!_.isEmpty(Ee)&&T.createElement("div",{className:"Gray_9e mTop10 Font13"},_l("\u793A\u4F8B\uFF1A"),ve.map(function(ce,Z){return T.createElement(T.Fragment,null,T.createElement("span",null,ce.example),Z<ve.length-1&&T.createElement("span",null,Re))})),T.createElement("div",{className:"bold mBottom10 mTop30"},_l("\u9009\u9879")),T.createElement(Te.Z,{size:"small",text:_l("\u4E3A\u6BCF\u884C\u8BB0\u5F55\u751F\u6210\u4E00\u4E2A\u6587\u4EF6\u5939"),checked:ae,onClick:function(Z){return pe.setState({generateFolder:!Z})}})))}}]),de}(T.Component),v=function(de){return(0,te.Z)(ye,de)}},87020:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>Be});var h=t(69288),Te=t(47426),C=t(97373),Ce=t(94055),Ne=t(60967),j=t(95679),L=t(33867),I=t(54208),k=t(94942),e=t.n(k),oe=t(63239),m=t.n(oe),y=t(36803),i=t(52945),me=t.n(i),J=t(88902),T=t.n(J),te=t(85105),E=t.n(te),r=t(99663),R=t(22600),a=t(49135),z=t(93196),N=t(67294),q=t(45697),K=t.n(q),ye=t(49365),v=t(89499),se=t(76345),de=t(31742),U=t(96486),pe=t.n(U),Y=t(45231),be,Q,Le,Be=(Q=be=function(ke){(0,z.default)(Ie,ke);function Ie(he){(0,r.default)(this,Ie);var Re=(0,a.default)(this,(Ie.__proto__||E()(Ie)).call(this,he));Le.call(Re);var ue={},we=(0,de.v)(se.RX.sysControlSwitch,he.sheetSwitchPermit);he.columns.unshift({type:2,controlId:"rowid",controlName:_l("\u8BB0\u5F55ID")}),we||pe().remove(he.columns,function(le){return pe().includes(["wfname","wfstatus","wfcuaids","wfrtime","wfftime","wfcaid","wfctime"],le.controlId)}),he.columns.filter(function(le){return pe().includes([26,27,29],le.type)}).map(function(le){var ae=le.controlId,ve=!1,W=!1,ce=!1,Z=!1;ue[ae]={userId:ve,jobId:W,depId:ce,relaRowId:Z}});var Ee=he.exportView.viewType===0,b=Ee&&(he.exportView.advancedSetting.customdisplay==="1"||(he.exportView.showControls||[]).length);return Re.state={loading:!0,edited:!0,initEdited:!1,type:0,showTabs:b,exportShowColumns:Ee,columnsSelected:Re.getDefaultColumnsSelected(Ee,b),isStatistics:!1,exportRelationalSheet:!1,exportExtIds:ue,columnSearchWord:"",speed:!1},Re}return(0,R.default)(Ie,[{key:"componentDidMount",value:function(){var Re=this,ue=this.props,we=ue.columns,Ee=ue.worksheetId,b=ue.exportView.viewId,le=ue.isCharge,ae=this.state.columnsSelected,ve=this.state,W=ve.showTabs,ce=ve.exportExtIds;Y.Z.getExportConfig({worksheetId:Ee,viewId:b}).then(function(Z){if(Z.status===0){Re.setState({loading:!1,edited:Z.edited});return}W&&Z.exportFieldType===0&&(ae=Re.getDefaultColumnsSelected());var _e=!1;T()(ae).forEach(function(P){ae[P]=pe().includes(Z.controlIds,P)}),Z.exportExtIds.forEach(function(P){ce[P.controlId]&&P.extIds.forEach(function(xe){ce[P.controlId][xe]=!0})}),we.filter(function(P){return(0,v.XS)(P)&&P.type!==51||P.type===34}).forEach(function(P){var xe=P.controlId;pe().includes(Z.controlIds,xe)&&(ae[xe]=!0,_e=!0)}),Re.setState({loading:!1,edited:Z.edited&&!le,initEdited:Z.edited,isStatistics:Z.getColumnRpt,type:Z.type,exportShowColumns:W?Z.exportFieldType:0,columnsSelected:ae,exportExtIds:ce,exportRelationalSheet:_e})})}},{key:"getColumnRpts",value:function(){var Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ue=this.props,we=ue.columns,Ee=ue.worksheetSummaryTypes;return we.filter(function(b){return pe().includes(Re,b.controlId)}).map(function(b){return{controlId:b.controlId,rptType:typeof Ee[b.controlId]>"u"?1:Ee[b.controlId]}})}},{key:"checkControlVisible",value:function(Re){if(!Re)return!1;var ue=Re.controlPermissions||"111",we=Re.fieldPermission||"111";return we[0]==="1"&&ue[0]==="1"}},{key:"getDefaultColumnsSelected",value:function(Re,ue){var we=this,Ee={},b=this.props,le=b.sheetHiddenColumns,ae=b.exportView,ve=b.columns,W=b.isCharge,ce=ae.showControls;return Re&&ue?ce.filter(function(Z){var _e=ve.find(function(P){return P.controlId===Z});return we.checkControlVisible(_e)&&!((0,v.XS)(_e)||_e.type===34)}).forEach(function(Z){Ee[Z]=!pe().includes(le,Z)}):(this.sortControls(ve.filter(function(Z){return W||we.checkControlVisible(Z)}).filter(function(Z){return!((0,v.XS)(Z)||[34,43,49,50].includes(Z.type))})).forEach(function(Z){W&&!we.checkControlVisible(Z)?Ee[Z.controlId]=!1:Ee[Z.controlId]=!0}),Ee.rowid=!0),Ee}},{key:"chooseColumnId",value:function(Re){var ue=this.state.columnsSelected,we=me()({},ue);we[Re.controlId]=!ue[Re.controlId],this.setState({columnsSelected:we})}},{key:"selectAllColumnId",value:function(){var Re=this.props.columns.filter(function(ve){return(0,v.XS)(ve)&&ve.type!==51||ve.type===34}),ue=this.state,we=ue.exportExtIds,Ee=ue.columnsSelected,b=T()(Ee),le=!b.filter(function(ve){return!pe().find(Re,function(W){return W.controlId===ve})}).some(function(ve){return!Ee[ve]});b.filter(function(ve){return!pe().find(Re,function(W){return W.controlId===ve})}).map(function(ve){return Ee[ve]=!le});for(var ae in we)we[ae].userId=!1,we[ae].jobId=!1,we[ae].depId=!1,we[ae].relaRowId=!1;this.setState({columnsSelected:Ee,exportExtIds:we})}},{key:"exportExcel",value:function(){var Re=this;(0,y.Z)(e().mark(function ue(){var we,Ee,b,le,ae,ve,W,ce,Z,_e,P,xe,bt,tt,Dt,vn,Fe,Bt,kt,Tt,tn,Vn,Zn,Ot,$t,cn,Mn,dt,$e,jt;return e().wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return we=Re.props,Ee=we.columns,b=we.allCount,le=we.allWorksheetIsSelected,ae=we.worksheetId,ve=we.exportView.viewId,W=we.projectId,ce=we.chartId,Z=we.selectRowIds,_e=we.appId,P=we.searchArgs,xe=P.filterControls,bt=P.keyWords,tt=P.searchType,Dt=we.quickFilter,vn=Dt===void 0?[]:Dt,Fe=we.navGroupFilters,Bt=we.filtersGroup,kt=Bt===void 0?[]:Bt,Tt=we.sortControls,tn=Re.state,Vn=tn.columnsSelected,Zn=tn.isStatistics,Ot=tn.exportShowColumns,$t=tn.exportExtIds,cn=tn.type,Mn=tn.speed,Rt.next=4,ye.Z.getToken({worksheetId:ae,viewId:ve,tokenType:3});case 4:if(dt=Rt.sent,$e=[],pe().forEach(Vn,function(St,zt){Vn[zt]&&$e.push(zt)}),jt=(0,v.zG)({token:dt,accountId:md.global.Account.accountId,worksheetId:ae,appId:_e,viewId:ve,projectId:W,reportId:ce,type:cn,exportControlsId:$e,filterControls:xe,keyWords:bt,searchType:tt,rowIds:Z,isSort:Ot,sortControls:Tt,fastFilters:(vn||[]).concat(kt).map(function(St){return pe().pick(St,["controlId","dataType","spliceType","filterType","dateRange","value","values","minValue","maxValue"])}),navGroupFilters:Fe,speed:Mn,exportExtIds:Ee.filter(function(St){return pe().includes([26,27,29],St.type)&&Vn[St.controlId]}).map(function(St){var zt=St.controlId,oa=$t[zt],qn=oa.userId,In=oa.jobId,Vt=oa.depId,Yt=oa.relaRowId,qt=[];return qn&&qt.push("userId"),In&&qt.push("jobId"),Vt&&qt.push("depId"),Yt&&qt.push("relaRowId"),{extIds:qt,controlId:zt}}).filter(function(St){return St.extIds.length})}),le&&(delete jt.rowIds,jt.excludeRowIds=Z),$e.length){Rt.next=12;break}return alert(_l("\u81F3\u5C11\u9009\u62E9\u4E00\u4E2A\u5B57\u6BB5"),3),Rt.abrupt("return");case 12:jt.columnRpts=Zn?Re.getColumnRpts($e):null,fetch(Re.props.downLoadUrl+"/ExportExcel/Export",{method:"POST",headers:{"content-type":"application/json"},body:m()(jt)}),Re.props.onHide();case 15:case"end":return Rt.stop()}},ue,Re)}))().catch(function(){})}},{key:"sortControls",value:function(Re){return Re.sort(function(ue,we){return ue.row===we.row?ue.col-we.col:ue.row-we.row})}},{key:"render",value:function(){var Re=this,ue=this.props,we=ue.allCount,Ee=ue.onHide,b=ue.allWorksheetIsSelected,le=ue.selectRowIds,ae=ue.exportView,ve=ue.hideStatistics,W=ue.isCharge,ce=[].concat(this.props.columns),Z=ae.advancedSetting,_e=ae.showControls,P=this.state,xe=P.type,bt=P.isStatistics,tt=P.exportShowColumns,Dt=P.showTabs,vn=P.columnsSelected,Fe=P.exportRelationalSheet,Bt=P.exportExtIds,kt=P.columnSearchWord,Tt=P.loading,tn=P.edited,Vn=P.speed;ae.viewType===0&&(Z.customdisplay==="1"||(_e||[]).length)&&tt?ce=ae.showControls.map(function($e){return ce.find(function(jt){return jt.controlId===$e})}).filter(function($e){return!!$e}):ce=this.sortControls(ce);var Zn=[22,34,42,43,45,47,49,50,51,52,10010],Ot=ce.filter(function($e){return!(0,v.XS)($e)&&!Zn.includes($e.type)&&(W||Re.checkControlVisible($e))&&$e.controlName.indexOf(kt)>=0}),$t=ce.filter(function($e){return(0,v.XS)($e)&&$e.type!==51||$e.type===34}),cn=T()(vn).filter(function($e){return Ot.find(function(jt){return jt.controlId==$e})}),Mn=!cn.some(function($e){return!vn[$e]}),dt=cn.filter(function($e){return vn[$e]});return N.createElement(h.Z,{className:"exportSheet",visible:!0,anim:!1,title:b||!le.length?_l("\u5C06\u89C6\u56FE\u4E0B\u6570\u636E\u5BFC\u51FA\u4E3A Excel"):_l("\u5C06\u9009\u4E2D\u7684%0\u6761\u6570\u636E\u5BFC\u51FA\u4E3A Excel",le.length),width:560,okText:_l("\u5BFC\u51FA"),footerLeftElement:function(){return W?N.createElement("span",{className:"ThemeColor3 ThemeHoverColor2 pointer",onClick:Re.saveConfig},_l("\u4FDD\u5B58\u5BFC\u51FA\u914D\u7F6E")):null},onCancel:Ee,onOk:function(){return Re.exportExcel()}},Tt?N.createElement(I.Z,null):N.createElement(N.Fragment,null,we>1e3&&!le.length&&N.createElement("div",{className:"exportSheetMessage flexRow alignItemsCenter"},N.createElement(L.Z,{icon:"info",className:"Font16 mRight6 ThemeColor3"}),_l("\u8BB0\u5F55\u8D85\u8FC71000\u6761\uFF0C\u5C06\u6309\u7167\u521B\u5EFA\u65F6\u95F4\u6392\u5E8F\uFF08\u65B0\u7684\u5728\u524D\uFF09")),!!Dt&&N.createElement("div",{className:"exportSheetTabs"},N.createElement(j.Z,{size:"small",text:_l("\u5BFC\u51FA\u5F53\u524D\u8868\u683C\u663E\u793A\u5217\u7684\u5B57\u6BB5"),disabled:tn,checked:tt,onClick:function(){return Re.switchColumnType(!0)}}),N.createElement(j.Z,{size:"small",text:_l("\u5BFC\u51FA\u6240\u6709\u5B57\u6BB5"),disabled:tn,checked:!tt,onClick:function(){return Re.switchColumnType(!1)}})),N.createElement("div",{className:"title"}),(!tt||!Dt)&&N.createElement(N.Fragment,null,N.createElement("div",{className:"search_container"},N.createElement(Ne.Z,{text:_l("\u5168\u9009"),size:"small",disabled:tn,checked:Mn,onClick:function(){return Re.selectAllColumnId()}},N.createElement("span",{style:{marginLeft:"6px",color:"#9E9E9E"}},"(",dt.length,"/",cn.length,")")),N.createElement("div",{className:"search_input"},N.createElement("i",{className:"icon icon-search Gray_9e"}),N.createElement("input",{placeholder:_l("\u641C\u7D22\u5B57\u6BB5\u540D\u79F0"),onInput:function(jt){return Re.setState({columnSearchWord:jt.target.value||""})}}))),!Ot.length&&N.createElement("div",{className:"no_data"},_l("\u672A\u641C\u7D22\u5230\u76F8\u5173\u5B57\u6BB5")),Ot.map(function($e){return N.createElement(N.Fragment,null,N.createElement(Ne.Z,{style:{left:"20px"},key:$e.controlId,size:"small",text:N.createElement(N.Fragment,null,$e.controlName||"",W&&!Re.checkControlVisible($e)&&N.createElement(L.Z,{type:"workflow_hide",className:"Font14 Gray_9e mLeft5"})),disabled:tn,checked:!!vn[$e.controlId],onClick:function(){return Re.chooseColumnId($e)}}),$e.type==29&&!!vn[$e.controlId]&&N.createElement(N.Fragment,null,N.createElement(Ne.Z,{disabled:!0,style:{left:"40px"},size:"small",checked:!0,onClick:function(){}},N.createElement("span",null,_l("\u6807\u9898"))),N.createElement(Ne.Z,{style:{left:"40px"},size:"small",disabled:tn,checked:Bt[$e.controlId].relaRowId,text:_l("\u8BB0\u5F55ID"),onClick:function(){Bt[$e.controlId].relaRowId=!Bt[$e.controlId].relaRowId,Re.setState({exportExtIds:Bt})}})),$e.type==26&&(!$e.advancedSetting||$e.advancedSetting.usertype!="2")&&!!vn[$e.controlId]&&!["wfcuaids","wfcaid"].includes($e.controlId)&&N.createElement(N.Fragment,null,N.createElement(Ne.Z,{disabled:!0,style:{left:"40px"},size:"small",checked:!0,onClick:function(){}},N.createElement("span",null,_l("\u59D3\u540D"))),N.createElement(Ne.Z,{style:{left:"40px"},size:"small",disabled:tn,checked:Bt[$e.controlId].jobId,text:_l("\u5DE5\u53F7"),onClick:function(){Bt[$e.controlId].jobId=!Bt[$e.controlId].jobId,Re.setState({exportExtIds:Bt})}}),N.createElement(Ne.Z,{style:{left:"40px"},size:"small",disabled:tn,checked:Bt[$e.controlId].userId,text:_l("\u4EBA\u5458ID"),onClick:function(){Bt[$e.controlId].userId=!Bt[$e.controlId].userId,Re.setState({exportExtIds:Bt})}})),$e.type==27&&!!vn[$e.controlId]&&N.createElement(N.Fragment,null,N.createElement(Ne.Z,{disabled:!0,style:{left:"40px"},size:"small",checked:!0,onClick:function(){}},N.createElement("span",null,_l("\u540D\u79F0"))),N.createElement(Ne.Z,{style:{left:"40px"},size:"small",disabled:tn,checked:Bt[$e.controlId].depId,text:_l("\u90E8\u95E8\u7CFB\u7EDFID"),onClick:function(){Bt[$e.controlId].depId=!Bt[$e.controlId].depId,Re.setState({exportExtIds:Bt})}})))})),N.createElement("div",{className:"title"},_l("\u5176\u4ED6")),!ve&&N.createElement(Ne.Z,{text:_l("\u5217\u7EDF\u8BA1\u7ED3\u679C"),disabled:tn,checked:bt,size:"small",onClick:function(){return Re.setState({isStatistics:!bt})}}),N.createElement(Ne.Z,{text:_l("\u5728\u5176\u4ED6sheet\u5BFC\u51FA\u5173\u8054\u8868"),checked:Fe&&xe!==1,disabled:xe===1||tn,size:"small",onClick:function(){var jt=Re.state,rn=jt.columnsSelected,Rt=jt.exportRelationalSheet;$t.forEach(function(St){return rn[St.controlId]=!Rt}),Re.setState({exportRelationalSheet:!Rt,columnsSelected:rn})}}),Fe&&$t.map(function($e){return N.createElement(Ne.Z,{style:{left:"20px"},key:$e.controlId,size:"small",disabled:xe===1||tn,text:$e.controlName||"",checked:!!vn[$e.controlId]&&xe!==1,onClick:function(){return Re.chooseColumnId($e)}})}),N.createElement(Ne.Z,{text:N.createElement("span",null,_l("\u52A0\u901F\u5BFC\u51FA"),N.createElement(Ce.default,{overlayStyle:{maxWidth:350},title:N.createElement(N.Fragment,null,N.createElement("div",null,_l("\u5BFC\u51FA\u4EE5\u4E0B\u5B57\u6BB5\u65F6\u8D70\u5197\u4F59\u503C\uFF0C\u53EF\u80FD\u4F1A\u5BFC\u51FA\u4E3A\u65E7\u6570\u636E")),N.createElement("div",null,_l("\xB7 \u5173\u8054\u8868\uFF1A\u663E\u793A\u65B9\u5F0F\u4E3A\u5361\u7247\u3001\u4E0B\u62C9\u6846")),N.createElement("div",null,_l("\xB7 \u7EA7\u8054\u9009\u62E9\uFF1A\u9AD8\u7EA7\u8BBE\u7F6E\u4E2D\u52FE\u9009\u201C\u9009\u62E9\u7ED3\u679C\u663E\u793A\u5C42\u7EA7\u8DEF\u5F84\u201D")),N.createElement("div",null,_l("\xB7 \u4ED6\u8868\u5B57\u6BB5\uFF1A\u7C7B\u578B\u4E3A\u5B58\u50A8\u6570\u636E")))},N.createElement("i",{className:"icon-info mLeft5 Font16 Gray_9e"}))),checked:Vn,size:"small",onClick:function(){return Re.setState({speed:!Vn})}}),N.createElement("div",{className:"title"},_l("\u5BFC\u51FA\u683C\u5F0F")),N.createElement(Te.ZP,{data:[{text:_l("Excel \u6587\u4EF6\uFF08.xlsx\uFF09"),value:0},{text:_l("CSV \u6587\u4EF6\uFF08.csv\uFF09"),value:1}],size:"small",checkedValue:xe,disabled:tn,onChange:function(jt){return Re.setState({type:jt})}})))}}]),Ie}(N.Component),be.propTypes={allCount:K().number,sheetHiddenColumns:K().array,allWorksheetIsSelected:K().boolean,worksheetId:K().string,exportView:K().object,projectId:K().string,downLoadUrl:K().string,columns:K().arrayOf(K().shape({})),onHide:K().func,searchArgs:K().object,columnRpts:K().array,selectRowIds:K().array,worksheetSummaryTypes:K().shape({}),quickFilter:K().object,navGroupFilters:K().object,isCharge:K().bool,hideStatistics:K().bool,sortControls:K().array},Le=function(){var Ie=this;this.switchColumnType=function(he){var Re=Ie.state,ue=Re.exportExtIds,we=Re.showTabs;for(var Ee in ue)ue[Ee].userId=!1,ue[Ee].jobId=!1,ue[Ee].depId=!1,ue[Ee].relaRowId=!1;Ie.setState({exportShowColumns:he,columnSearchWord:"",exportExtIds:ue,columnsSelected:Ie.getDefaultColumnsSelected(he,we)})},this.saveConfig=function(){var he=Ie.state.columnsSelected,Re=[];if(pe().forEach(he,function(ue,we){he[we]&&Re.push(we)}),!Re.length){alert(_l("\u81F3\u5C11\u9009\u62E9\u4E00\u4E2A\u5B57\u6BB5"),3);return}h.Z.confirm({title:_l("\u4FDD\u5B58\u5BFC\u51FA\u914D\u7F6E"),description:N.createElement("div",{className:"Font14"},N.createElement("div",{className:"Gray_75"},_l("\u5C06\u5F53\u524D\u5BFC\u51FA\u914D\u7F6E\u4FDD\u5B58\u4E3A\u9ED8\u8BA4\u5BFC\u51FA\u65B9\u5F0F\u4F9B\u6240\u6709\u7528\u6237\u4F7F\u7528\uFF0C\u4F1A\u4FDD\u5B58\u5DF2\u9009\u5B57\u6BB5\uFF08\u5BFC\u51FA\u6240\u6709\u5B57\u6BB5\uFF09\u3001\u5176\u4ED6\u3001\u4EE5\u53CA\u5BFC\u51FA\u683C\u5F0F")),N.createElement(Ne.Z,{className:"mTop20 Gray",text:_l("\u4E0D\u5141\u8BB8\u7528\u6237\u4FEE\u6539\u9ED8\u8BA4\u914D\u7F6E"),defaultChecked:Ie.state.initEdited,onClick:function(we){return Ie.setState({initEdited:we})}})),onOk:function(){var we=Ie.props,Ee=we.columns,b=we.worksheetId,le=we.exportView.viewId,ae=Ie.state,ve=ae.columnsSelected,W=ae.exportShowColumns,ce=ae.exportExtIds,Z=ae.type,_e=ae.showTabs,P=ae.isStatistics,xe=ae.initEdited,bt=[];pe().forEach(ve,function(Dt,vn){ve[vn]&&bt.push(vn)});var tt={type:Z,exportExtIds:Ee.filter(function(Dt){return pe().includes([26,27,29],Dt.type)&&ve[Dt.controlId]}).map(function(Dt){var vn=Dt.controlId,Fe=ce[vn],Bt=Fe.userId,kt=Fe.jobId,Tt=Fe.depId,tn=Fe.relaRowId,Vn=[];return Bt&&Vn.push("userId"),kt&&Vn.push("jobId"),Tt&&Vn.push("depId"),tn&&Vn.push("relaRowId"),{extIds:Vn,controlId:vn}}).filter(function(Dt){return Dt.extIds.length}),controlIds:bt,getColumnRpt:P,exportFieldType:_e&&W?1:0,edited:xe,worksheetId:b,viewId:le};Y.Z.saveExportConfig(tt).then(function(Dt){alert(_l("\u4FDD\u5B58\u6210\u529F"))})}})}},Q)},87468:(wn,gt,t)=>{"use strict";t.d(gt,{O:()=>Ne});var h=t(88239);if(!/^(1887|7596|7798)$/.test(t.j))var Te=t(1952);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(87020);var Ce=null,Ne=function(L){return(0,Te.Z)(C.Z,(0,h.default)({},L,{closeFnName:"onHide"}))}},93307:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>he});var h=t(60967),Te=t(52945),C=t.n(Te),Ce=t(66946),Ne=t(88902),j=t.n(Ne),L=t(88106),I=t(88239),k=t(85315),e=t(12424),oe=t(69288),m=t(86735),y=t(67294),i=t(45697),me=t(42541),J=t(71893),T=t(86674),te=t(62232),E=t(96486),r=t.n(E),R=t(45231);function a(Re){var ue=Re.updateControls,we=Re.appId,Ee=Re.viewId,b=Re.worksheetId,le=Re.hasAuthRowIds,ae=Re.allWorksheetIsSelected,ve=Re.selectedRows,W=Re.searchArgs,ce=Re.quickFilter,Z=Re.navGroupFilters,_e=Re.cb,P=_e===void 0?function(){}:_e,xe={appId:we,viewId:Ee,worksheetId:b,rowIds:le,controls:ue};ae&&(delete xe.rowIds,xe.isAll=!0,xe.excludeRowIds=ve.map(function(bt){return bt.rowid}),xe.filterControls=W.filterControls,xe.fastFilters=(r().isArray(ce)?ce:[]).map(function(bt){return r().pick(bt,["controlId","dataType","spliceType","filterType","dateRange","value","values","minValue","maxValue"])}),xe.navGroupFilters=Z,xe.keyWords=W.keyWords,xe.searchType=W.searchType),R.Z.refreshWorksheetRows(xe).then(P).catch(function(bt){alert(_l("\u4FEE\u6539\u5931\u8D25"),2)})}var z=(0,m.Z)([`
  .secTitle {
    margin: 18px 0;
  }
  .Checkbox {
    margin-bottom: 14px;
    [class^='icon-'] {
      vertical-align: text-bottom;
    }
  }
`],[`
  .secTitle {
    margin: 18px 0;
  }
  .Checkbox {
    margin-bottom: 14px;
    [class^='icon-'] {
      vertical-align: text-bottom;
    }
  }
`]),N=(0,m.Z)([`
  margin-top: 10px;
  > label {
    min-width: 140px;
    display: inline-block;
  }
`],[`
  margin-top: 10px;
  > label {
    min-width: 140px;
    display: inline-block;
  }
`]),q=(0,m.Z)([`
  display: flex;
  align-items: center;
  margin-top: 10px;
  .none {
    opacity: 0;
  }
`],[`
  display: flex;
  align-items: center;
  margin-top: 10px;
  .none {
    opacity: 0;
  }
`]),K=(0,m.Z)([`
  margin-top: 26px;
  .icon {
    margin-right: 2px;
  }
`],[`
  margin-top: 26px;
  .icon {
    margin-right: 2px;
  }
`]),ye=(0,m.Z)([`
  height: 260px;
  flex-direction: column;
`],[`
  height: 260px;
  flex-direction: column;
`]),v=(0,m.Z)([`
  width: 130px;
  height: 130px;
  border-radius: 130px;
  background: #f5f5f5;
  font-size: 100px;
  color: #bdbdbd;
`],[`
  width: 130px;
  height: 130px;
  border-radius: 130px;
  background: #f5f5f5;
  font-size: 100px;
  color: #bdbdbd;
`]),se=(0,J.ZP)(oe.Z)(z),de=J.ZP.div(N),U=J.ZP.div(q),pe=(0,J.ZP)(me.EK)(K),Y=(0,J.ZP)(me.Lb)(ye),be=(0,J.ZP)(me.Lb)(v);function Q(Re){return Re.filter(function(ue){return r().includes([T.DN.SUBTOTAL,T.DN.FORMULA_NUMBER,T.DN.FORMULA_DATE,T.DN.CONCATENATE,T.DN.SHEET_FIELD],ue.type)||ue.type===T.DN.SHEET_FIELD&&r().get(ue,"strDefault.0")!=="1"||ue.type===T.DN.CASCADER&&r().get(ue,"advancedSetting.storelayer")==="1"})}function Le(Re){return Re.filter(function(ue){return r().includes([T.DN.FLAT_MENU,T.DN.DROP_DOWN,T.DN.MULTI_SELECT],ue.type)})}function Be(Re){return Re.filter(function(ue){return _.includes([WIDGETS_TO_API_TYPE_ENUM.TEXT,WIDGETS_TO_API_TYPE_ENUM.MOBILE_PHONE,WIDGETS_TO_API_TYPE_ENUM.TELEPHONE,WIDGETS_TO_API_TYPE_ENUM.EMAIL,WIDGETS_TO_API_TYPE_ENUM.NUMBER,WIDGETS_TO_API_TYPE_ENUM.CRED,WIDGETS_TO_API_TYPE_ENUM.MONEY,WIDGETS_TO_API_TYPE_ENUM.FLAT_MENU,WIDGETS_TO_API_TYPE_ENUM.MULTI_SELECT,WIDGETS_TO_API_TYPE_ENUM.DROP_DOWN,WIDGETS_TO_API_TYPE_ENUM.ATTACHMENT,WIDGETS_TO_API_TYPE_ENUM.DATE,WIDGETS_TO_API_TYPE_ENUM.DATE_TIME,WIDGETS_TO_API_TYPE_ENUM.AREA_PROVINCE,WIDGETS_TO_API_TYPE_ENUM.AREA_CITY,WIDGETS_TO_API_TYPE_ENUM.AREA_COUNTY,WIDGETS_TO_API_TYPE_ENUM.USER_PICKER,WIDGETS_TO_API_TYPE_ENUM.DEPARTMENT,WIDGETS_TO_API_TYPE_ENUM.SCORE,WIDGETS_TO_API_TYPE_ENUM.RELATE_SHEET,WIDGETS_TO_API_TYPE_ENUM.AUTO_ID,WIDGETS_TO_API_TYPE_ENUM.SUB_LIST,WIDGETS_TO_API_TYPE_ENUM.CASCADER,WIDGETS_TO_API_TYPE_ENUM.SWITCH,WIDGETS_TO_API_TYPE_ENUM.FORMULA_DATE,WIDGETS_TO_API_TYPE_ENUM.LOCATION,WIDGETS_TO_API_TYPE_ENUM.RICH_TEXT,WIDGETS_TO_API_TYPE_ENUM.SIGNATURE,WIDGETS_TO_API_TYPE_ENUM.TIME,WIDGETS_TO_API_TYPE_ENUM.ORG_ROLE,WIDGETS_TO_API_TYPE_ENUM.REMARK],ue.type)})}function ke(Re,ue){return Re===WIDGETS_TO_API_TYPE_ENUM.TEXT?ue.filter(function(we){return _.includes([WIDGETS_TO_API_TYPE_ENUM.TEXT,WIDGETS_TO_API_TYPE_ENUM.EMAIL,WIDGETS_TO_API_TYPE_ENUM.NUMBER,WIDGETS_TO_API_TYPE_ENUM.MONEY,WIDGETS_TO_API_TYPE_ENUM.FLAT_MENU,WIDGETS_TO_API_TYPE_ENUM.DROP_DOWN,WIDGETS_TO_API_TYPE_ENUM.DATE,WIDGETS_TO_API_TYPE_ENUM.DATE_TIME,WIDGETS_TO_API_TYPE_ENUM.MONEY_CN,WIDGETS_TO_API_TYPE_ENUM.SHEET_FIELD,WIDGETS_TO_API_TYPE_ENUM.CONCATENATE,WIDGETS_TO_API_TYPE_ENUM.AUTO_ID,WIDGETS_TO_API_TYPE_ENUM.SUBTOTAL,WIDGETS_TO_API_TYPE_ENUM.FORMULA_NUMBER,WIDGETS_TO_API_TYPE_ENUM.REMARK],we.type)}):ue.filter(function(we){return we.type===Re})}var Ie={CALIBRATE:{value:1,text:_l("\u6821\u51C6\u6570\u636E")},REFRESH:{value:2,text:_l("\u5237\u65B0\u4E3A\u5176\u4ED6\u5B57\u6BB5\u7684\u503C")}};function he(Re){var ue=Re.controls,we=ue===void 0?[]:ue,Ee=Re.worksheetInfo,b=Re.appId,le=Re.viewId,ae=Re.worksheetId,ve=Re.allWorksheetIsSelected,W=Re.selectedRows,ce=Re.searchArgs,Z=Re.quickFilter,_e=Re.navGroupFilters,P=Re.reloadWorksheet,xe=P===void 0?function(){}:P,bt=Re.getWorksheetSheetViewSummary,tt=bt===void 0?function(){}:bt,Dt=Re.clearSelect,vn=Dt===void 0?function(){}:Dt,Fe=Re.onClose,Bt=Fe===void 0?function(){}:Fe,kt=we.filter(function(ht){return!r().includes(T.gs.concat(T._Q.map(function(Lt){return Lt.controlId})),ht.controlId)}),Tt=Q(kt),tn=Le(kt),Vn=kt.filter(function(ht){return ht.encryId}),Zn=!!Tt.concat(tn).concat(Vn).length,Ot=(0,y.useState)({}),$t=(0,e.Z)(Ot,2),cn=$t[0],Mn=$t[1],dt=(0,y.useState)({}),$e=(0,e.Z)(dt,2),jt=$e[0],rn=$e[1],Rt=(0,y.useState)([]),St=(0,e.Z)(Rt,2),zt=St[0],oa=St[1],qn=(0,y.useState)(Zn?Ie.CALIBRATE.value:Ie.REFRESH.value),In=(0,e.Z)(qn,2),Vt=In[0],Yt=In[1],qt=r().flatten(zt.map(function(ht){return[ht.sourceId,ht.targetId]})).filter(r().identity);function rt(ht,Lt,Ct){oa(function(mt){return[].concat((0,k.Z)(mt.slice(0,ht)),[(0,I.default)({},mt[ht]||{},(0,L.default)({},Lt,Ct))],(0,k.Z)(mt.slice(ht+1)))})}var Qe=void 0;return Vt===Ie.CALIBRATE.value?Qe=!!j()(cn).filter(function(ht){return cn[ht]}).length||!!j()(jt).filter(function(ht){return jt[ht]}).length:Qe=!!zt.filter(function(ht){return ht.sourceId&&ht.targetId}).length,y.createElement(se,{visible:!0,title:_l("\u6821\u51C6\u6570\u636E"),description:y.createElement("div",null,_l("\u6B64\u64CD\u4F5C\u4EC5\u7CFB\u7EDF\u89D2\u8272\u53EF\u4EE5\u6267\u884C\u3002\u5355\u6B21\u6700\u591A\u5237\u65B010w\u884C\u6570\u636E\uFF0C\u540E\u53F0\u5F02\u6B65\u5B8C\u6210\u540E\u4F1A\u53D1\u9001\u901A\u77E5\u3002"),y.createElement(Ce.Z,{className:"moreHelp",type:3,href:"https://help.mingdao.com/worksheet/batch-refresh",text:_l("\u4F7F\u7528\u5E2E\u52A9")})),overlayClosable:!1,width:"624",anim:!1,okDisabled:!Qe,onCancel:Bt,onOk:function(){var Lt=W.filter(function(vt){return vt.allowedit||vt.allowEdit}).map(function(vt){return vt.rowid}),Ct=void 0;if(Vt===Ie.CALIBRATE.value){var mt=C()({},cn,jt);Ct=j()(mt).filter(function(vt){return mt[vt]}).map(function(vt){var Xt=r().find(we,{controlId:vt});return Xt?(0,I.default)((0,I.default)({},r().pick(Xt,["controlId","type"])),Xt.encryId?{editType:21}:{}):void 0}).filter(r().identity)}else Ct=zt.filter(function(vt){return vt.sourceId&&vt.targetId}).map(function(vt){return{controlId:vt.targetId,value:vt.sourceId}});Ct.length&&a({appId:b,viewId:le,worksheetId:ae,hasAuthRowIds:Lt,allWorksheetIsSelected:ve,selectedRows:W,searchArgs:ce,quickFilter:Z,navGroupFilters:_e,updateControls:Ct,cb:function(Xt){Xt.isSuccess?(alert(_l("\u5237\u65B0\u6210\u529F")),vn(),Bt(),xe(),tt()):alert(_l("\u5355\u8868\u7684\u5237\u65B0\u6570\u636E\u6700\u5C0F\u95F4\u9694\u4E3A%0\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\u3002",Xt.successCount<60?_l("%0\u5206\u949F",Xt.successCount):_l("%0\u4E2A\u5C0F\u65F6",Xt.successCount/60%1>0?(Xt.successCount/60).toFixed(2):Xt.successCount/60)),2)}})}},y.createElement("div",null,!Zn&&y.createElement(Y,null,y.createElement(be,null,y.createElement("i",{className:"icon-view_quilt"})),y.createElement("span",{className:"Gray_9e Font13 mTop20"},_l("\u5F53\u524D\u5DE5\u4F5C\u8868\u6CA1\u6709\u53EF\u4EE5\u6821\u51C6\u7684\u5B57\u6BB5\u3002"))),Vt===Ie.CALIBRATE.value&&[{title:_l("\u5237\u65B0\u5B57\u6BB5\u503C"),controls:Tt},{title:_l("\u5237\u65B0\u9009\u9879\u6392\u5E8F\u548C\u5206\u503C"),controls:tn},{title:_l("\u5237\u65B0\u5B57\u6BB5\u52A0\u5BC6\u503C"),controls:Vn}].filter(function(ht){return ht.controls.length}).map(function(ht){return y.createElement(y.Fragment,null,y.createElement("div",{className:"secTitle Gray_75"},ht.title),ht.controls.map(function(Lt,Ct){return y.createElement(h.Z,{key:Ct,text:y.createElement("span",null,y.createElement("i",{className:"icon-"+(0,te.hB)(Lt.type)+" Gray_9e Font16 mRight8"}),Lt.controlName),checked:cn[Lt.controlId],onClick:function(){Mn(function(vt){return(0,I.default)({},vt,(0,L.default)({},Lt.controlId,!cn[Lt.controlId]))})}})}))}),!1))}he.propTypes={controls:(0,i.arrayOf)((0,i.shape)({}))}},18540:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>R}),!/^(1887|7596|7798)$/.test(t.j))var h=t(69288);var Te=t(55055),C=t.n(Te);if(!/^(1887|7596|7798)$/.test(t.j))var Ce=t(62443);if(!/^(1887|7596|7798)$/.test(t.j))var Ne=t(42185);if(!/^(1887|7596|7798)$/.test(t.j))var j=t(33867);var L=t(88239),I=t(12424),k=t(86735),e=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var oe=t(45231);var m=t(71893),y=t(96486),i=t.n(y),me=(0,k.Z)([`
  font-size: 16px;
  font-weight: 400;
  margin-top: 10px;
`],[`
  font-size: 16px;
  font-weight: 400;
  margin-top: 10px;
`]),J=(0,k.Z)([`
  text-align: right;
`],[`
  text-align: right;
`]),T=(0,k.Z)([`
  .intro {
    padding-bottom: 8px;
    color: #757575;
  }
  .controls {
    min-height: 240px;
    max-height: 560px;
    overflow-y: auto;
  }
  .controlItem {
    margin-top: 16px;
  }
  .content {
    display: flex;
    justify-content: space-between;
    padding: 0 24px 0 10px;
    line-height: 36px;
    background: #f8f8f8;
    border-radius: 3px;
  }
  .info {
    span {
      margin-left: 12px;
    }
  }
  .hint {
    margin-top: 8px;
    color: #9e9e9e;
    font-size: 12px;
  }
  .reset {
    color: #2196f3;
    cursor: pointer;
  }
  .footerBtn {
    text-align: right;
    margin-top: 32px;
  }
`],[`
  .intro {
    padding-bottom: 8px;
    color: #757575;
  }
  .controls {
    min-height: 240px;
    max-height: 560px;
    overflow-y: auto;
  }
  .controlItem {
    margin-top: 16px;
  }
  .content {
    display: flex;
    justify-content: space-between;
    padding: 0 24px 0 10px;
    line-height: 36px;
    background: #f8f8f8;
    border-radius: 3px;
  }
  .info {
    span {
      margin-left: 12px;
    }
  }
  .hint {
    margin-top: 8px;
    color: #9e9e9e;
    font-size: 12px;
  }
  .reset {
    color: #2196f3;
    cursor: pointer;
  }
  .footerBtn {
    text-align: right;
    margin-top: 32px;
  }
`]),te=m.ZP.h2(me),E=m.ZP.div(J),r=m.ZP.div(T);function R(a){var z=a.worksheetInfo,N=a.onHide,q=(0,y.get)(z,["template","controls"]),K=(0,y.filter)(q,function(pe){return pe.type===33}),ye=(0,e.useState)(-1),v=(0,I.Z)(ye,2),se=v[0],de=v[1],U=function(Y){de(-1),oe.Z.resetControlIncrease((0,L.default)({},(0,y.pick)(z,["appId","worksheetId"]),{controlId:Y})).then(function(be){alert(be?_l("\u91CD\u7F6E\u7F16\u53F7\u6210\u529F"):_l("\u91CD\u7F6E\u7F16\u53F7\u5931\u8D25"))})};return e.createElement(h.Z,{style:{width:"480px"},visible:!0,title:_l("\u91CD\u7F6E\u81EA\u52A8\u7F16\u53F7"),footer:null,onCancel:N},e.createElement(r,null,e.createElement("div",{className:"intro"},_l("\u91CD\u7F6E\u7F16\u53F7\u540E\uFF0C\u65B0\u589E\u7684\u8BB0\u5F55\u4F1A\u4ECE\u521D\u59CB\u503C\u5F00\u59CB\u7F16\u53F7\uFF0C\u4E4B\u524D\u7684\u8BB0\u5F55\u7F16\u53F7\u4E0D\u53D8\u3002")),e.createElement("div",{className:"controls"},K.map(function(pe,Y){var be=pe.controlName,Q=pe.controlId,Le=pe.advancedSetting,Be=Le===void 0?{}:Le,ke=_.find(safeParse(Be.increase||"[]","array"),function(Re){return Re.type===1})||{},Ie=ke.start,he=ke.length;return e.createElement("div",{className:"controlItem",key:Q},e.createElement("div",{className:"content"},e.createElement("div",{className:"info"},e.createElement(j.Z,{className:"Gray_9e",icon:"auto_number"}),e.createElement("span",null,be)),e.createElement(Ce.Z,{placement:"bottomRight",align:{offset:[24]},visible:se===Y,onVisibleChange:function(ue){return de(ue?Y:-1)},trigger:"click",overlayClassName:"resetReconfirm",title:e.createElement(te,null,_l("\u6B64\u64CD\u4F5C\u65E0\u6CD5\u8FD8\u539F\uFF0C\u4F60\u786E\u5B9A\u91CD\u7F6E\u8BE5\u7F16\u53F7\u5417\uFF1F")),content:e.createElement(E,null,e.createElement(Ne.ZP,{type:"link",size:"small",onClick:function(){de(-1)}},_l("\u53D6\u6D88")),e.createElement(Ne.ZP,{type:"primary",size:"small",onClick:function(){U(Q)}},_l("\u786E\u5B9A")))},e.createElement("span",{className:"reset"},_l("\u91CD\u7F6E")))),e.createElement("div",{className:"hint"},_l("\u91CD\u7F6E\u540E\u4ECE%0\u5F00\u59CB\u7F16\u53F7",_.padStart(Ie,he,"0"))))}))))}},88738:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>J});var h=t(88239),Te=t(42723),C=t(85105),Ce=t.n(C),Ne=t(99663),j=t(22600),L=t(49135),I=t(93196),k=t(67294),e=t(49365),oe=t(91088),m=t(37295),y=t(22013),i=t(42602),me=t(97592),J=function(T){(0,I.default)(te,T);function te(E){(0,Ne.default)(this,te);var r=(0,L.default)(this,(te.__proto__||Ce()(te)).call(this,E));return r.state={originalName:E.name,originalIcon:E.icon},r}return(0,j.default)(te,[{key:"onChange",value:function(r,R){var a=this,z=this.props,N=z.appItem,q=z.workSheetId,K=z.appId,ye=z.groupId,v=z.icon;if(N.type===2)oe.Z.updateAppSection({appId:K,appSectionId:q,appSectionName:r,icon:R||v}).then(function(de){a.updateName(r),a.updateIcon({icon:R||v})}).catch(function(de){alert(_l("\u4FEE\u6539\u5206\u7EC4\u540D\u79F0\u5931\u8D25"),2)});else{var se=y.Z.getState().appPkg.currentPcNaviStyle;e.Z.editWorkSheetInfoForApp({appId:K,appSectionId:N.parentGroupId||ye,workSheetId:q,workSheetName:r,icon:R||v}).then(function(de){a.updateName(r),a.updateIcon({icon:R||v})}).catch(function(de){alert(_l("\u4FEE\u6539\u5DE5\u4F5C\u8868\u540D\u79F0\u5931\u8D25"),2)})}}},{key:"updateName",value:function(r){var R=this.state.originalName,a=this.props,z=a.workSheetId,N=a.isActive,q=a.appItem,K=a.groupId,ye=(r||R).slice(0,100),v=y.Z.getState().appPkg.currentPcNaviStyle;if(N&&y.Z.dispatch((0,i.updateAppItemInfo)(z,q.type,ye)),[1,3].includes(v)){var se=(0,me.xy)(K);se.dispatch((0,i.updateSheetListAppItem)(z,{workSheetName:r}))}else this.props.updateSheetListAppItem(z,{workSheetName:r})}},{key:"updateIcon",value:function(r){var R=this.state.originalIcon,a=this.props,z=a.workSheetId,N=a.appItem,q=a.groupId,K=y.Z.getState().appPkg.currentPcNaviStyle;if([1,3].includes(K)){var ye=(0,me.xy)(q);ye.dispatch((0,i.updateSheetListAppItem)(z,r))}else this.props.updateSheetListAppItem(z,r)}},{key:"render",value:function(){var r=this,R=this.props,a=R.className,z=R.onCancel,N=R.icon,q=R.workSheetId,K=(0,Te.Z)(R,["className","onCancel","icon","workSheetId"]),ye=this.state,v=ye.originalName,se=ye.originalIcon,de=y.Z.getState().appPkg.iconColor;return k.createElement(m.Z,(0,h.default)({},K,{className:a,hideColor:!0,name:v,iconColor:de,icon:N,onChange:function(pe){var Y=pe.name,be=pe.icon,Q=Y.slice(0,100);(Q&&Q!==v||se!==be)&&r.onChange(Q,be)},onNameInput:function(pe){var Y=pe.name;r.updateName(Y)},onModify:function(pe){var Y=pe.name,be=pe.icon,Q=pe.iconUrl;Y&&r.updateName(Y),be&&r.updateIcon({icon:be,iconUrl:Q})},onClickAway:z,onClose:z}))}}]),te}(k.Component)},11022:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>Te}),!/^(1887|7596|7798)$/.test(t.j))var h=t(88738);const Te=/^(1887|7596|7798)$/.test(t.j)?null:h.Z},15678:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>r});var h=t(12424),Te=t(86735),C=t(67294),Ce=t(45697),Ne=t.n(Ce),j=t(71893),L=t(40240),I=t(46630),k=t(82690),e=t(96486),oe=t.n(e),m=(0,Te.Z)([`
  position: relative;
  display: flex;
  flex-direction: row;
`],[`
  position: relative;
  display: flex;
  flex-direction: row;
`]),y=(0,Te.Z)([`
  width: 100%;
  text-align: center;
  padding: 12px 0 20px;
  color: #bdbdbd;
`],[`
  width: 100%;
  text-align: center;
  padding: 12px 0 20px;
  color: #bdbdbd;
`]),i=(0,Te.Z)([`
  width: 87px;
  padding: 0 20px 5px 24px;
  display: flex;
  align-items: flex-end;
`],[`
  width: 87px;
  padding: 0 20px 5px 24px;
  display: flex;
  align-items: flex-end;
`]),me=j.ZP.div(m),J=j.ZP.div(y),T=j.ZP.div(i);function te(R){return String((R.advancedSetting||{}).direction)==="1"}function E(R){var a=R.mode,z=R.base,N=z===void 0?{}:z,q=R.from,K=R.noExpand,ye=R.activeFilterId,v=R.emptyText,se=R.appId,de=R.width,U=R.view,pe=R.projectId,Y=R.controls,be=Y===void 0?[]:Y,Q=R.filters,Le=Q===void 0?[]:Q,Be=R.navGroupFilters,ke=Be===void 0?[]:Be,Ie=R.refreshSheet,he=Ie===void 0?function(){}:Ie,Re=R.updateQuickFilter,ue=Re===void 0?function(){}:Re,we=R.resetQuickFilter,Ee=we===void 0?function(){}:we,b=R.onFilterClick,le=b===void 0?function(){}:b,ae=N.worksheetId,ve=a==="config",W=(0,C.useRef)(Le.length),ce=(0,C.useRef)(oe().get(U,"advancedSetting.clicksearch")),Z=2;de>1220?Z=4:de>1e3?Z=3:de>500?Z=2:Z=1;var _e=oe().get(U,"advancedSetting.enablebtn")==="1"||R.enablebtn==="1",P=Le.filter(te).length,xe=!K&&(Le.length>(_e?Z-1:Z)||Le.length>1&&P>0),bt=(0,C.useState)(xe&&localStorage.getItem("QUICK_FILTER_FULL_SHOW")==="true"),tt=(0,h.Z)(bt,2),Dt=tt[0],vn=tt[1],Fe=Dt||K,Bt=Fe?Le:Le.slice(0,_e?Z-1:Z),kt=!1;if(!Fe){var Tt=oe().findIndex(Bt,te);Tt===0?(Bt=Bt.slice(0,1),kt=!0):Tt>-1&&(Bt=Bt.slice(0,Tt))}var tn=!1;try{var Vn=te(oe().last(Bt));if(Vn)tn=!0;else if(P===0)tn=oe().sum(Bt.map(function(Ot){return te(Ot)?Z:1}))%Z===0;else{var Zn=oe().findLastIndex(Bt,te);tn=oe().sum(Bt.slice(Zn+1).map(function(Ot){return te(Ot)?Z:1}))%Z===0}}catch(Ot){}return(0,C.useEffect)(function(){W.current=0,ce.current=void 0},[U&&U.viewId]),(0,C.useEffect)(function(){W.current>0&&Le.length>W.current&&!Fe&&vn(!0),W.current=Le.length},[Le.length]),(0,C.useEffect)(function(){ce.current==="1"&&oe().get(U,"advancedSetting.clicksearch")==="0"&&he(U),ce.current=oe().get(U,"advancedSetting.clicksearch")},[oe().get(U,"advancedSetting.clicksearch")]),Le.length?C.createElement(me,{isConfigMode:ve,className:"quickFilterWrap"},C.createElement(k.Z,{from:q,worksheetId:ae,isFilterComp:q==="filterComp",isConfigMode:ve,activeFilterId:ye,projectId:pe,appId:se,operateIsNewLine:tn,firstIsFullLine:kt,view:U,controls:be.filter(function(Ot){return oe().includes(I.Dv,Ot.type===30?Ot.sourceControlType:Ot.type)}),hideStartIndex:Bt.length,filters:Le,navGroupFilters:ke,colNum:Z,fullShow:ve||Fe,showExpand:xe,setFullShow:vn,updateQuickFilter:ue,resetQuickFilter:Ee,onFilterClick:le})):C.createElement(me,{isConfigMode:ve,className:"quickFilterWrap"},C.createElement(J,null,v||_l("\u6682\u672A\u6DFB\u52A0\u5FEB\u901F\u7B5B\u9009")))}E.propTypes={from:Ce.string,noExpand:Ce.bool,mode:Ce.string,activeFilterId:Ce.string,emptyText:Ce.string,width:Ce.number,projectId:Ce.string,filters:(0,Ce.arrayOf)((0,Ce.shape)({})),view:(0,Ce.shape)({}),controls:(0,Ce.arrayOf)((0,Ce.shape)({})),updateQuickFilter:Ce.func,resetQuickFilter:Ce.func};const r=(0,L.Z)(E,{onlyWidth:!0})},37720:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>E});var h=t(11378),Te=t.n(h),C=t(56697),Ce=t(33867),Ne=t(85105),j=t.n(Ne),L=t(99663),I=t(22600),k=t(49135),e=t(93196),oe=t(67294),m=t(93967),y=t.n(m),i=t(45231),me=t(51132),J,T,te,E=(T=J=function(r){(0,e.default)(R,r);function R(a){(0,L.default)(this,R);var z=(0,k.default)(this,(R.__proto__||j()(R)).call(this,a));te.call(z);var N=a.desc;return z.state={desc:N},z}return(0,I.default)(R,[{key:"componentWillReceiveProps",value:function(z){z.desc!==this.props.desc&&this.setState({desc:z.desc})}},{key:"render",value:function(){var z=this,N=this.props,q=N.worksheetId,K=N.title,ye=N.visible,v=N.onClose,se=N.isEditing,de=N.setDescIsEditing,U=N.isCharge,pe=this.state.desc;return oe.createElement(C.Z,{zIndex:1e3,className:"appIntroDialog",wrapClassName:"appIntroDialogWrapCenter",visible:ye,onCancel:v,animation:"zoom",width:800,footer:null,centered:!0,maskStyle:{backgroundColor:"rgba(0, 0, 0, 0.7)"},bodyStyle:{minHeight:"480px",padding:0},maskAnimation:"fade",mousePosition:{x:139,y:23},closeIcon:oe.createElement(Ce.Z,{icon:"close"})},oe.createElement(me.Z,{title:K,cacheKey:q?"sheetIntroDescription":"pageIntroDescription",description:pe,permissionType:U?100:0,isEditing:se,changeSetting:function(){},changeEditState:de,onSave:function(be){de(!1),be===null||z.setState({desc:be},z.handleSave)},onCancel:function(){v()}}))}}]),R}(oe.Component),te=function(){var R=this;this.handleSave=function(){var a=R.state.desc||"",z=a.trim();if(z!==R.props.desc){var N=R.props.worksheetId;N?i.Z.updateWorksheetDec({worksheetId:N,dec:z}).then(function(q){R.props.onSave(z),alert(_l("\u4FEE\u6539\u6210\u529F"))}).catch(function(q){alert(_l("\u4FEE\u6539\u63CF\u8FF0\u5931\u8D25"),2)}):R.props.onSave(z)}}},T)},50347:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>Te}),!/^(1887|7596|7798)$/.test(t.j))var h=t(37720);const Te=/^(1887|7596|7798)$/.test(t.j)?null:h.Z},29650:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>r});var h=t(69288),Te=t(25273),C=t(31546),Ce=t(6100),Ne=t(33867),j=t(42185),L=t(85105),I=t.n(L),k=t(99663),e=t(22600),oe=t(49135),m=t(93196),y=t(67294),i=t(93967),me=t.n(i),J=t(91088),T=t(22013),te=t(70973),E=function(a,z){var N=[],q=a.filter(function(K){return K.projectId===z})[0];return q&&q.projectApps&&q.projectApps.length&&q.projectApps.forEach(function(K){var ye=(0,te.le)(K.permissionType,K.isLock);ye&&N.push({text:K.name,value:K.id})}),N},r=function(R){(0,m.default)(a,R);function a(z){(0,k.default)(this,a);var N=(0,oe.default)(this,(a.__proto__||I()(a)).call(this,z));return N.state={appList:[],appValue:"",grouping:[],groupingValue:"",searchValue:""},N}return(0,e.default)(a,[{key:"componentDidMount",value:function(){var N=this,q=this.props.appId,K=T.Z.getState().appPkg.projectId;J.Z.getAllHomeApp().then(function(ye){var v=ye.validProject,se=E(v,K);N.setState({appList:se,appValue:q})}),this.handleChangeApp(q)}},{key:"handleChangeApp",value:function(N){var q=this;this.setState({appValue:N,groupingValue:""}),J.Z.getApp({appId:N,getSection:!0}).then(function(K){var ye=K.sections;q.setState({grouping:ye.map(function(v){return v.subVisible=!0,v})})})}},{key:"handleCancel",value:function(){this.props.onClose()}},{key:"handleOk",value:function(){var N=this.state,q=N.appValue,K=N.groupingValue;this.props.onSave({resultAppId:q,ResultAppSectionId:K===q?void 0:K}),this.props.onClose()}},{key:"renderFooter",value:function(){var N=this.state.groupingValue;return y.createElement("div",null,y.createElement(j.ZP,{type:"link",onClick:this.handleCancel.bind(this)},_l("\u53D6\u6D88")),y.createElement(j.ZP,{type:"primary",onClick:this.handleOk.bind(this),disabled:!N,className:me()({"Button--disabled":!N})},_l("\u786E\u8BA4")))}},{key:"renderGroupingItem",value:function(N){var q=this,K=this.props.appItem,ye=this.state,v=ye.groupingValue,se=ye.grouping,de=ye.searchValue,U=N.subVisible,pe=N.subName,Y=N.type===2,be=Y?N.workSheetId:N.appSectionId,Q=N.name||N.workSheetName||"";return de&&!Q.toLocaleLowerCase().includes(de.toLocaleLowerCase())?null:y.createElement("div",{key:be,className:me()("groupingItem flexRow alignItemsCenter pointer",{active:v===be,pLeft30:Y}),onClick:function(){q.setState({groupingValue:be})}},!Y&&K.type!==2&&y.createElement(Ne.Z,{icon:U===!1?"arrow-right-tip":"arrow-down",className:"Gray_9e",onClick:function(Be){Be.stopPropagation(),q.setState({grouping:se.map(function(ke){return ke.appSectionId===be&&(ke.subVisible=!U),ke})})}}),y.createElement("div",{className:"flex mLeft5"},y.createElement("span",{className:"ellipsis"},Q||_l("\u672A\u547D\u540D\u5206\u7EC4")),pe&&y.createElement("span",{className:"Gray_9e mLeft5"},pe)),v===be&&y.createElement(Ne.Z,{icon:"done",className:"Font18 ThemeColor"}))}},{key:"render",value:function(){var N=this,q=this.props.appItem,K=this.state,ye=K.appList,v=K.appValue,se=K.grouping,de=K.groupingValue,U=K.searchValue,pe=q.workSheetName,Y=q.iconUrl,be=q.type;return y.createElement(h.Z,{className:"SheetMove",visible:!0,anim:!1,title:y.createElement("span",{className:"bold"},_l("\u79FB\u52A8\u5230")),width:640,onCancel:this.handleCancel.bind(this),footer:this.renderFooter()},y.createElement("div",{className:"flexRow alignItemsCenter Gray_75"},_l("\u5C06"),y.createElement("div",{className:"target flexRow alignItemsCenter"},y.createElement(Ce.Z,{url:Y,fill:"#757575",size:22}),y.createElement("span",{className:"ellipsis mLeft5",title:pe},pe)),_l("\u79FB\u52A8\u5230")),y.createElement("div",{className:"flexColumn mTop10"},y.createElement("span",{className:"mBottom8"},_l("\u5E94\u7528")),y.createElement(C.Z,{isAppendToBody:!0,placeholder:_l("\u8BF7\u9009\u62E9\u4F60\u4F5C\u4E3A\u7BA1\u7406\u5458\u6216\u5F00\u53D1\u8005\u7684\u5E94\u7528"),menuClass:"sheetMoveApp",className:me()("flex",{empty:!v}),border:!0,openSearch:!0,value:v,data:ye,onChange:function(Le){N.handleChangeApp(Le)}})),y.createElement("div",{className:"flexColumn mTop15 flex"},y.createElement("span",{className:"mBottom8"},_l("\u9009\u62E9\u5206\u7EC4")),y.createElement("div",{className:"groupingWrap flexColumn"},y.createElement("div",{className:"searchWrap flexRow alignItemsCenter mBottom8 pBottom10"},y.createElement(Ne.Z,{icon:"search",className:"Font18 Gray_9e mRight3"}),y.createElement("input",{className:"w100",placeholder:"\u641C\u7D22",type:"text",value:U,onChange:function(Le){N.setState({searchValue:Le.target.value})}})),y.createElement(Te.Z,{className:"flex"},be===2&&this.renderGroupingItem({appSectionId:v,name:_.get(_.find(ye,{value:v}),"text")||"",subName:_l("(\u4F5C\u4E3A\u4E00\u7EA7\u5206\u7EC4\u79FB\u52A8)")}),se.map(function(Q){return y.createElement(y.Fragment,null,N.renderGroupingItem(Q),be!==2&&Q.subVisible&&Q.workSheetInfo.filter(function(Le){return Le.type==2}).map(function(Le){return N.renderGroupingItem(Le)}))})))))}}]),a}(y.Component)},84527:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>m});var h=t(69288),Te=t(85105),C=t.n(Te),Ce=t(99663),Ne=t(22600),j=t(49135),L=t(93196),I=t(67294),k=t(93967),e=t(3540),oe=t(45231),m=function(y){(0,L.default)(i,y);function i(me){(0,Ce.default)(this,i);var J=me.entityName,T=me.btnName,te=(0,j.default)(this,(i.__proto__||C()(i)).call(this,me));return te.state={entityName:J||"",btnName:T||""},te}return(0,Ne.default)(i,[{key:"handleSave",value:function(){var J=this,T=this.state.entityName,te=_l("\u8BB0\u5F55");if(T!==this.props.entityName){var E=T.trim()||te;oe.Z.updateEntityName({worksheetId:this.props.worksheetId,entityName:E,projectId:this.props.projectId}).then(function(r){var R={entityName:E};J.props.updateSheetInfo(J.props.worksheetId,R),alert(_l("\u4FEE\u6539\u6210\u529F"))}).catch(function(r){alert(_l("\u4FEE\u6539\u5931\u8D25"),2)})}this.props.onHide()}},{key:"render",value:function(){var J=this,T=this.props.visible,te=this.state,E=te.entityName,r=te.btnName;return I.createElement(h.Z,{className:"SheetSetName",visible:T,anim:!1,title:_l("\u8BBE\u7F6E\u8BB0\u5F55\u540D\u79F0"),width:560,okText:_l("\u786E\u8BA4"),onCancel:this.props.onHide,onOk:this.handleSave.bind(this)},I.createElement("div",{className:"Gray_75"},_l("\u4FEE\u6539\u6DFB\u52A0\u6309\u94AE\u3001\u6D88\u606F\u901A\u77E5\u7B49\u6307\u4EE3\u8BB0\u5F55\u65F6\u6240\u4F7F\u7528\u7684\u540D\u79F0\u3002\u4F8B\u5982\uFF1A\u53EF\u4EE5\u4FEE\u6539\u201C\u5BA2\u6237\u7BA1\u7406\u201D\u8868\u7684\u8BB0\u5F55\u540D\u79F0\u4E3A\u201C\u5BA2\u6237\u201D")),I.createElement("div",{className:"inputItem flexRow valignWrapper mTop25"},I.createElement("span",{className:"Gray_75"},_l("\u8BB0\u5F55\u540D\u79F0")),I.createElement(e.Z,{className:"flex",value:E,onChange:function(a){J.setState({entityName:a})}})))}}]),i}(I.Component)},90099:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>fl});var h=t(67294),Te=t(45697),C=t.n(Te),Ce=t(50533),Ne=t(22013),j=t(15308),L=t(86735),I=t(22010),k=t(71893),e=t(49611),oe=t.n(e),m=t(15081),y=t(49300),i=t(46891),me=t(88239),J=t(79221),T=t(12424),te=t(88106),E=t(8177),r=t.n(E),R=t(72444),a=t(42723),z=t(52945),N=t.n(z),q=t(85315),K=t(85105),ye=t.n(K),v=t(99663),se=t(22600),de=t(49135),U=t(93196),pe=t(44894),Y=t(91247),be=t(40240),Q=t(89499),Le=t(88349),Be=t(10502),ke=t(15742),Ie=t(59292),he=t(36612),Re=t(29300);const ue=Re.Z;var we=t(24568);const Ee=we.Z;var b=t(85964),le=t(82011),ae=t(24607),ve=t(15577),W=t(31742),ce=t(76345),Z=t(89626),_e=t(96486),P=t.n(_e),xe,bt,tt,Dt,vn,Fe,Bt;function kt(Pe,Bn,Un,Pt,ne){var F={};return Object.keys(Pt).forEach(function(B){F[B]=Pt[B]}),F.enumerable=!!F.enumerable,F.configurable=!!F.configurable,("value"in F||F.initializer)&&(F.writable=!0),F=Un.slice().reverse().reduce(function(B,n){return n(Pe,Bn,B)||B},F),ne&&F.initializer!==void 0&&(F.value=F.initializer?F.initializer.call(ne):void 0,F.initializer=void 0),F.initializer===void 0&&(Object.defineProperty(Pe,Bn,F),F=null),F}var Tt=(0,be.Z)(xe=(Dt=(Fe=vn=function(Pe){(0,U.default)(Bn,Pe);function Bn(Un){(0,v.default)(this,Bn);var Pt=(0,de.default)(this,(Bn.__proto__||ye()(Bn)).call(this,Un));return Bt.call(Pt),Pt.state={disableMaskDataControls:{}},Pt.tableId=(0,Y.Z)(),Pt.shiftActiveRowIndex=0,Pt}return(0,se.default)(Bn,[{key:"componentDidMount",value:function(){var Pt=this.props,ne=Pt.view,F=Pt.fetchRows,B=Pt.setRowsEmpty,n=Pt.navGroupFilters;this.chartId?F({isFirst:!0}):P().get(ne,"advancedSetting.clicksearch")==="1"||this.navGroupToSearch()&&P().isEmpty(n)?B():F({isFirst:!0}),document.body.addEventListener("click",this.outerClickEvent),Q.uY.addListener("RELOAD_RECORD_INFO",this.updateRecordEvent),this.handleSetAutoRefresh(),this.bindShift()}},{key:"componentWillReceiveProps",value:function(Pt){var ne=this,F=Pt.view,B=Pt.fetchRows,n=Pt.setRowsEmpty,l=Pt.changePageIndex,o=Pt.refresh,d=Pt.sheetViewData,u=Pt.navGroupFilters,p=this.props.worksheetId===Pt.worksheetId&&this.props.viewId!==Pt.viewId;P().isEqual(P().get(Pt,["navGroupFilters"]),P().get(this.props,["navGroupFilters"]))||l(1);var f=this.navGroupToSearch(Pt)&&P().isEmpty(u);p?f||P().get(F,"advancedSetting.clicksearch")==="1"?n():B({changeView:p}):P().some(["sheetFetchParams","view.moreSort","view.advancedSetting.clicksearch","view.advancedSetting.enablerules","navGroupFilters","view.navGroup","view.advancedSetting.showallitem","view.advancedSetting.shownullitem"],function(w){return!P().isEqual(P().get(Pt,w),P().get(ne.props,w))})?f?n():B():P().get(this.props,"view.advancedSetting.refreshtime")!==P().get(Pt,"view.advancedSetting.refreshtime")?this.handleSetAutoRefresh(Pt):P().get(this.props,"sheetViewData.refreshFlag")!==P().get(Pt,"sheetViewData.refreshFlag")?this.setState({disableMaskDataControls:{}}):P().get(this.props,"view.advancedSetting.sheettype")!==P().get(Pt,"view.advancedSetting.sheettype")&&o()}},{key:"shouldComponentUpdate",value:function(Pt,ne){var F=this;return P().some(["recordInfoVisible","disableMaskDataControls"],function(B){return!P().isEqual(P().get(ne,B),P().get(F.state,B))})||P().some(["sheetViewData","sheetViewConfig","editingControls","controls","view.rowHeight","view.showControls","view.controls","view.moreSort","view.advancedSetting","buttons","worksheetInfo.isRequestingRelationControls"],function(B){return!P().isEqual(P().get(Pt,B),P().get(F.props,B))})}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("click",this.outerClickEvent),Q.uY.removeListener("RELOAD_RECORD_INFO",this.updateRecordEvent),this.unbindShift(),this.refreshTimer&&clearInterval(this.refreshTimer)}},{key:"bindShift",value:function(){window.addEventListener("keydown",this.activeShift),window.addEventListener("keyup",this.deActiveShift)}},{key:"unbindShift",value:function(){window.removeEventListener("keydown",this.activeShift),window.removeEventListener("keyup",this.deActiveShift)}},{key:"activeShift",value:function(Pt){Pt.keyCode===16&&(this.shiftActive=!0)}},{key:"deActiveShift",value:function(Pt){Pt.keyCode===16&&(this.shiftActive=!1)}},{key:"handleSetAutoRefresh",value:function(Pt){var ne=this,F=Pt||this.props,B=F.view,n=F.refresh,l=P().get(B,"advancedSetting.refreshtime");this.refreshTimer&&clearInterval(this.refreshTimer),l&&P().includes(["10","30","60","120","180","240","300"],l)&&(this.refreshTimer=setInterval(function(){var o=P().get(ne,"props.sheetViewConfig")||{},d=o.allWorksheetIsSelected,u=o.sheetSelectedRows,p=u===void 0?[]:u;d||p.length||document.querySelector(".workSheetNewRecord.mdModal")||document.querySelector(".workSheetRecordInfo.mdModal")||n({noLoading:!0})},Number(l)*1e3))}},{key:"outerClickEvent",value:function(Pt){var ne=this.props.clearHighLight;(!$(Pt.target).closest(".sheetViewTable, .recordInfoCon, .workSheetNewRecord, .mdModal")[0]||/-grid/.test(Pt.target.className))&&(ne(this.tableId),$(".sheetViewTable.id-"+this.tableId+"-id .cell").removeClass("hover"))}},{key:"updateRecordEvent",value:function(Pt){var ne=Pt.worksheetId,F=Pt.recordId,B=this.props,n=B.viewId,l=B.controls,o=B.updateRows,d=B.hideRows,u=B.sheetViewData,p=u.rows;ne===this.props.worksheetId&&P().find(p,function(f){return f.rowid===F})&&(0,Le.r)({checkView:!0,getType:1,rowId:F,viewId:n,worksheetId:ne,controls:l}).then(function(f){f.resultCode===1&&f.isViewData?o([F],[{}].concat((0,q.Z)(f.formData)).reduce(function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return N()(w,(0,te.default)({},D.controlId,D.value))})):d([F])})}},{key:"handleCellClick",value:function(Pt,ne,F){var B=this;if(!P().get(this,"props.worksheetInfo.isRequestingRelationControls")){var n=this.props,l=n.setHighLight,o=n.worksheetId,d=n.view;(0,Q.Zl)(d,ne,function(){(0,ve.Ye)("worksheetRecord",o,{rowId:ne.rowid}),l(B.tableId,F);var u={recordInfoVisible:ne,recordId:ne.rowid};Pt&&Pt.type===29&&Pt.enumDefault===2&&(u.activeRelateTableControlIdOfRecord=Pt.controlId),B.setState(u)})}}},{key:"handleCellMouseDown",value:function(Pt){var ne=Pt.rowIndex,F=this.props.setHighLight;F(this.tableId,ne)}},{key:"renderSummaryCell",value:function(Pt){var ne=Pt.style,F=Pt.columnIndex,B=Pt.rowIndex,n=this.props,l=n.viewId,o=n.sheetViewData,d=n.changeWorksheetSheetViewSummaryType,u=n.sheetViewConfig,p=u.allWorksheetIsSelected,f=u.sheetSelectedRows,w=o.rowsSummary,D=o.rows,G=[{type:"summaryhead"}].concat(this.columns)[F];return h.createElement(ue,{rowHeadOnlyNum:this.rowHeadOnlyNum,style:ne,viewId:l,summaryType:G&&w.types[G.controlId],summaryValue:G&&w.values[G.controlId],control:G,rows:D,selectedIds:f.map(function(H){return H.rowid}),allWorksheetIsSelected:p,changeWorksheetSheetViewSummaryType:d})}},{key:"renderColumnHead",value:function(Pt){var ne=this,F=Pt.control,B=Pt.className,n=Pt.style,l=Pt.columnIndex,o=Pt.fixedColumnCount,d=Pt.scrollTo,u=(0,a.Z)(Pt,["control","className","style","columnIndex","fixedColumnCount","scrollTo"]),p=this.tableId,f=this.props,w=f.appId,D=f.worksheetId,G=f.viewId,H=f.view,De=f.worksheetInfo,je=f.sheetViewConfig,lt=f.updateDefaultScrollLeft,Ft=f.changePageIndex,un=f.filters,dn=f.quickFilter,Hn=f.navGroupFilters,ca=f.refresh,da=f.clearSelect,Me=f.updateRows,nt=f.getWorksheetSheetViewSummary,He=f.sheetSwitchPermit,ie=f.sheetViewData,We=De.projectId,Ue=je.allWorksheetIsSelected,Ke=je.sheetSelectedRows,ut=this.state.disableMaskDataControls;return h.createElement(Ee,(0,me.default)({count:ie.count,worksheetId:D,viewId:G,className:B,style:n,control:ut[F.controlId]?(0,me.default)({},F,{advancedSetting:N()({},F.advancedSetting,{datamask:"0"})}):F,disabledFunctions:this.disabledFunctions,readonly:this.readonly,disabled:this.needClickToSearch&&P().isEmpty(dn),isLast:F.controlId===P().last(this.columns).controlId,columnIndex:l,fixedColumnCount:o,rowIsSelected:!!(Ue||Ke.length),canBatchEdit:(0,W.v)(ce.RX.batchEdit,He,G),onBatchEdit:function(){(0,Be.V)({appId:w,viewId:G,projectId:We,activeControl:F,view:H,worksheetId:D,searchArgs:un,quickFilter:dn,clearSelect:da,allWorksheetIsSelected:Ue,updateRows:Me,getWorksheetSheetViewSummary:nt,reloadWorksheet:function(){Ft(1),ca()},selectedRows:Ke,worksheetInfo:De,navGroupFilters:Hn})},updateDefaultScrollLeft:function(){var Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},et=Et.xOffset,Xe=et===void 0?0:et,pt=document.querySelector(".id-"+p+"-id .scroll-x");pt&&lt(pt.scrollLeft)},onShowFullValue:function(){window.shareState.shareId||ne.setState({disableMaskDataControls:(0,me.default)({},ut,(0,te.default)({},F.controlId,!0))})}},u))}},{key:"renderRowHead",value:function(Pt){var ne=this,F=Pt.className,B=Pt.key,n=Pt.style,l=Pt.columnIndex,o=Pt.rowIndex,d=Pt.control,u=Pt.data,p=this.props,f=p.isCharge,w=p.appId,D=p.view,G=p.viewId,H=p.controls,De=p.worksheetInfo,je=p.sheetSwitchPermit,lt=p.buttons,Ft=p.sheetViewData,un=p.sheetViewConfig,dn=p.getWorksheetSheetViewSummary,Hn=p.refreshWorksheetControls,ca=this.props,da=ca.addRecord,Me=ca.selectRows,nt=ca.updateRows,He=ca.hideRows,ie=ca.saveSheetLayout,We=ca.resetSheetLayout,Ue=ca.setHighLight,Ke=De.allowAdd,ut=De.worksheetId,wt=De.projectId,Et=un.allWorksheetIsSelected,et=un.sheetSelectedRows,Xe=un.sheetHiddenColumns,pt=(P().get(D,"advancedSetting.showno")||"1")==="1",at=(P().get(D,"advancedSetting.showquick")||"1")==="1",ct=(0,Q.q2)("SHEET_LAYOUT_UPDATE_TIME",G);return P().isEmpty(D)&&!this.chartId?h.createElement("span",null):h.createElement(b.Z,(0,me.default)({tableType:this.tableType,numberWidth:this.numberWidth,hasBatch:this.hasBatch,showNumber:pt,showOperate:at,count:Ft.count,readonly:this.readonly,isCharge:f,rowHeadOnlyNum:this.rowHeadOnlyNum,tableId:this.tableId,layoutChangeVisible:f&&(!!Xe.length||Number(ct)>Number(D.advancedSetting.layoutupdatetime||D.advancedSetting.layoutUpdateTime||0)),className:F},{appId:w,viewId:G,worksheetId:ut},{columns:this.columns,controls:H,projectId:wt,allowAdd:Ke,style:n,lineNumberBegin:this.lineNumberBegin,canSelectAll:!!Ft.rows.length,allWorksheetIsSelected:Et,selectedIds:et.map(function(Nt){return Nt.rowid}),sheetSwitchPermit:je,customButtons:lt,onSelectAllWorksheet:function(mn){Me({selectAll:mn,rows:[]})},onSelect:function(mn,Qt){if(Et)Me({selectAll:!1,rows:u.filter(function(Nn){return!P().find(mn,function(Ht){return Nn.rowid===Ht})}).filter(P().identity)});else{var Cn=P().findIndex(u,function(Nn){return Nn.rowid===Qt});if(ne.shiftActive){var _n=Math.min.apply(Math,[Cn,ne.shiftActiveRowIndex]),ra=Math.max.apply(Math,[Cn,ne.shiftActiveRowIndex]);ra>u.length-1&&(ra=u.length-1),Me({rows:P().unionBy(u.slice(_n,ra+1).concat(et),"rowid")})}else ne.shiftActiveRowIndex=Cn,Me({rows:mn.map(function(Nn){return P().find(u,function(Ht){return Ht.rowid===Nn})}).filter(P().identity)})}},onReverseSelect:function(){Me(Et?{selectAll:!1,rows:[]}:{rows:u.filter(function(mn){return!P().find(et,function(Qt){return Qt.rowid===mn.rowid})}).filter(P().identity)})},updateRows:nt,hideRows:function(mn){He(mn),dn()},rowIndex:o,data:u,handleAddSheetRow:da,saveSheetLayout:ie,resetSheetLayout:We,setHighLight:Ue,refreshWorksheetControls:Hn,onOpenRecord:function(){ne.handleCellClick(void 0,u[o],o)}}))}},{key:"asyncUpdate",value:function(Pt,ne,F){var B=this.props,n=B.worksheetInfo,l=B.updateControlOfRow,o=B.controls,d=B.sheetSearchConfig,u=B.sheetViewData,p=u===void 0?{}:u,f=p.rows,w=f===void 0?[]:f;Pt=P().find(w,{rowid:Pt.rowid})||{};var D=n.projectId,G=n.rules,H=G===void 0?[]:G,De=function(Hn,ca){(typeof ca>"u"?"undefined":(0,R.default)(ca))==="object"||Hn===ne.controlId||l({recordId:Pt.rowid,cell:{controlId:Hn,value:ca},rules:H})},je=new he.ZP({data:o.filter(function(dn){return dn.advancedSetting}).map(function(dn){return(0,me.default)({},dn,{value:(Pt||{})[dn.controlId]||dn.value})}),projectId:D,rules:H,searchConfig:d,onAsyncChange:function(Hn){P().isEmpty(Hn.controlIds)?Hn.controlId&&De(Hn.controlId,Hn.value):Hn.controlIds.forEach(function(ca){De(ca,Hn.value)})}});je.updateDataSource(ne);var lt=je.getDataSource(),Ft=je.getUpdateControlIds(),un=lt.filter(function(dn){return P().includes(Ft,dn.controlId)}).map(function(dn){return P().pick(dn,["controlId","controlName","type","value"])});un.forEach(function(dn){dn.controlId===ne.controlId&&(dn.editType=ne.editType)}),l({cell:ne,cells:un,recordId:Pt.rowid,rules:H},F)}},{key:"render",value:function(){var Pt=this,ne=this.props,F=ne.isCharge,B=ne.sheetViewData,n=ne.sheetViewConfig,l=ne.appId,o=ne.groupId,d=ne.view,u=ne.viewId,p=ne.sheetSwitchPermit,f=ne.worksheetInfo,w=ne.maxCount,D=ne.filters,G=ne.quickFilter,H=ne.navGroupFilters,De=ne.controls,je=this.props,lt=je.addRecord,Ft=je.updateRows,un=je.hideRows,dn=je.getWorksheetSheetViewSummary,Hn=je.updateSheetColumnWidths,ca=je.updateWorksheetSomeControls,da=je.openNewRecord,Me=this.readonly,nt=B.loading,He=B.rows,ie=n.sheetSelectedRows,We=ie===void 0?[]:ie,Ue=n.sheetColumnWidths,Ke=n.fixedColumnCount,ut=n.defaultScrollLeft,wt=f.worksheetId,Et=f.projectId,et=f.allowAdd,Xe=f.rules,pt=Xe===void 0?[]:Xe,at=f.isWorksheetQuery,ct=f.isRequestingRelationControls,Nt=this.state,mn=Nt.recordId,Qt=Nt.recordInfoVisible,Cn=Nt.activeRelateTableControlIdOfRecord,_n=Nt.tempViewIdForRecordInfo,ra=Nt.disableMaskDataControls,Nn=this.lineNumberBegin,Ht=this.columns,Sn=(P().get(d,"advancedSetting.showsummary")||"1")==="1"&&!w,Dn=(P().get(d,"advancedSetting.showvertical")||"1")==="1",xn=(P().get(d,"advancedSetting.alternatecolor")||"0")==="1",an=(P().get(d,"advancedSetting.titlewrap")||"0")==="1",Qn=(P().get(d,"advancedSetting.fastedit")||"1")==="1"&&!ct,Ln=(P().get(d,"advancedSetting.enablerules")||"1")==="1",hn=(P().get(f,"template.controls")||[]).find(function(ha){return ha.controlId===P().get(d,"navGroup[0].controlId")}),Ra=this.rowHeadWidth;return h.createElement(h.Fragment,null,!!Qt&&h.createElement(le.Z,{tableType:this.tableType,widgetStyle:f.advancedSetting,controls:De,sheetSwitchPermit:p,projectId:Et,showPrevNext:!0,needUpdateRows:!0,rules:pt,isWorksheetQuery:at,isCharge:F,allowAdd:et,appId:l,viewId:_n||u,appSectionId:o,view:d,visible:!!Qt,hideRecordInfo:function(Pn){(!Pn||Pn===Pt.state.recordId)&&Pt.setState({recordInfoVisible:!1,tempViewIdForRecordInfo:void 0})},recordId:mn,activeRelateTableControlId:Cn,worksheetId:wt,updateWorksheetControls:ca,updateRows:Ft,hideRows:un,onDeleteSuccess:function(){un([mn])},getWorksheetSummary:dn,currentSheetRows:He,handleAddSheetRow:lt,workflowStatus:Qt&&Qt.wfstatus}),nt&&h.createElement(h.Fragment,null,h.createElement(J.Z,{style:{flex:1},direction:"column",widths:["30%","40%","90%","60%"],active:!0,itemStyle:{marginBottom:"10px"}}),h.createElement(J.Z,{style:{flex:1},direction:"column",widths:["40%","55%","100%","80%"],active:!0,itemStyle:{marginBottom:"10px"}}),h.createElement(J.Z,{style:{flex:2},direction:"column",widths:["45%","100%","100%","100%"],active:!0,itemStyle:{marginBottom:"10px"}})),!nt&&h.createElement(Ie.Z,{showControlStyle:this.showControlStyle,tableType:this.tableType,readonly:Me,ref:this.table,recordColorConfig:(0,Q._l)(d),watchHeight:!(0,ve.Q9)(),tableId:this.tableId,viewId:u,appId:l,enableRules:Ln,rules:pt,isCharge:F,worksheetId:wt,sheetViewHighlightRows:this.highLightRows,showRowHead:!this.hideRowHead,lineEditable:Qn&&(0,W.v)(ce.RX.quickSwitch,p,u),fixedColumnCount:Ke,sheetColumnWidths:Ue,allowAdd:(0,W.v)(ce.RX.createButtonSwitch,p)&&et,canSelectAll:!!He.length,data:He,rowHeight:ke.dN[d.rowHeight]||34,rowHeightEnum:d.rowHeight,keyWords:D.keyWords,sheetIsFiltered:!!(D.keyWords||(0,_e.get)(D,"filterControls.length")||(0,_e.get)(D,"filtersGroup.length")||!P().isEmpty(G)),showNewRecord:da,defaultScrollLeft:ut,sheetSwitchPermit:p,noFillRows:!0,selectedIds:We.map(function(ha){return ha.rowid}),lineNumberBegin:Nn,rowHeadOnlyNum:this.rowHeadOnlyNum,rowHeadWidth:Ra,controls:De,columns:Ht.map(function(ha){return ra[ha.controlId]?(0,me.default)({},ha,{advancedSetting:N()({},ha.advancedSetting,{datamask:"0"})}):ha}),projectId:Et,wrapControlName:an,showSummary:!this.chartId&&Sn&&!(P().get(window,"shareState.isPublicView")||P().get(window,"shareState.isPublicPage")),showVerticalLine:Dn,showAsZebra:xn,onCellClick:this.handleCellClick,onCellMouseDown:this.handleCellMouseDown,renderFooterCell:this.renderSummaryCell,renderColumnHead:this.renderColumnHead,renderRowHead:this.renderRowHead,noRecordAllowAdd:!1,emptyIcon:this.needClickToSearch&&P().isEmpty(G)||this.navGroupToSearch()&&P().isEmpty(H)?h.createElement("span",null):void 0,showSearchEmpty:!(this.needClickToSearch&&P().isEmpty(G)||this.navGroupToSearch()&&P().isEmpty(H)),emptyText:this.needClickToSearch&&P().isEmpty(G)?h.createElement("span",{className:"Font14"},_l("\u6267\u884C\u67E5\u8BE2\u540E\u663E\u793A\u7ED3\u679C")):this.navGroupToSearch()&&P().isEmpty(H)?h.createElement("span",{className:"Font14"},_l("\u8BF7\u4ECE\u5DE6\u4FA7\u9009\u62E9\u4E00\u4E2A%0\u67E5\u770B",(hn||{}).controlName)):void 0,updateCell:function(Pn,ea){var Tn=Pn.cell,sn=Pn.row;Pt.asyncUpdate(sn,Tn,ea)},onColumnWidthChange:Hn}))}},{key:"showControlStyle",get:function(){var Pt=this.props.view;return P().get(Pt,"advancedSetting.controlstyle")==="1"}},{key:"tableType",get:function(){var Pt=this.props.view;return P().get(Pt,"advancedSetting.sheettype")==="1"?"classic":"simple"}},{key:"columns",get:function(){var Pt=this.props,ne=Pt.view,F=Pt.showControlIds,B=F===void 0?[]:F,n=Pt.sheetSwitchPermit,l=(0,W.v)(ce.RX.sysControlSwitch,n),o=l?this.props.controls:this.props.controls.filter(function(da){return!P().includes(Z.FO,da.controlId)}),d=this.props.sheetViewConfig.sheetHiddenColumns;if(B&&B.length)return B.map(function(da){return P().find(o,{controlId:da})}).filter(P().identity);var u=[],p=o.map(function(da){return(0,me.default)({},da)}).filter(function(da){return!P().includes(ke.CC,da.type)&&!P().find(d.concat(ne.controls),function(Me){return Me===da.controlId})&&(0,ae.kM)(da).visible}),f=ne||{},w=f.showControls,D=w===void 0?[]:w,G=(0,ve.aq)(ne),H=G.customdisplay,De=H===void 0?"0":H,je=G.sysids,lt=je===void 0?"[]":je,Ft=G.syssort,un=Ft===void 0?"[]":Ft;if(D.length&&(De="1"),De==="1")u=P().uniqBy(D).map(function(da){return P().find(p,function(Me){return Me.controlId===da})}).filter(P().identity);else{try{lt=JSON.parse(lt),un=JSON.parse(un)}catch(da){lt=[],un=[]}u=p.filter(function(da){return!P().includes(["ownerid","caid","ctime","utime","wfname","wfstatus","wfcuaids","wfrtime","wfftime","wfdtime","wfcaid","wfctime","wfcotime","rowid","uaid"],da.controlId)}).slice(0).sort(function(da,Me){return da.row*10+da.col>Me.row*10+Me.col?1:-1}).slice(0,50).concat(un.filter(function(da){return P().includes(lt,da)}).map(function(da){return P().find(p,{controlId:da})}).filter(P().identity))}u.length||(u=[{}]);var dn=u.filter(function(da){return!P().includes([].concat((0,q.Z)(Z.FO),(0,q.Z)(Z.YX)),da.controlId)}),Hn=u.filter(function(da){return P().includes(Z.FO,da.controlId)}),ca=u.filter(function(da){return P().includes(Z.YX,da.controlId)});return u=P().isEmpty(D)?[].concat((0,q.Z)(Hn),(0,q.Z)(dn),(0,q.Z)(ca)):u,u}},{key:"lineNumberBegin",get:function(){var Pt=this.props.sheetFetchParams,ne=Pt.pageIndex,F=Pt.pageSize;return(ne-1)*F}},{key:"chartId",get:function(){return this.props.chartId||this.props.chartIdFromUrl}},{key:"readonly",get:function(){return!!this.chartId||P().get(window,"shareState.isPublicView")||P().get(window,"shareState.isPublicPage")}},{key:"disabledFunctions",get:function(){var Pt=this.chartId;return Pt?["filter"]:[]}},{key:"rowHeadOnlyNum",get:function(){return!!this.chartId}},{key:"highLightRows",get:function(){try{var Pt=P().get(this.props,"sheetViewData.rows"),ne=this.props.sheetViewConfig||{},F=ne.allWorksheetIsSelected,B=ne.sheetSelectedRows;return[{}].concat((0,q.Z)(F?Pt.filter(function(n){return!P().find(B,function(l){return l.rowid===n.rowid})}).map(function(n){return n.rowid}):B.map(function(n){return n.rowid}))).reduce(function(n,l){return(0,me.default)({},n,(0,te.default)({},l,!0))})}catch(n){return console.error(n),{}}}},{key:"hideRowHead",get:function(){var Pt=this.props,ne=Pt.sheetSwitchPermit,F=Pt.view,B=Pt.viewId,n=this.tableType,l=(P().get(F,"advancedSetting.showquick")||"1")==="1",o=(P().get(F,"advancedSetting.showno")||"1")==="1",d=(0,W.v)(ce.RX.batchEdit,ne,B);return n!=="classic"&&!l&&!d&&!o}},{key:"hasBatch",get:function(){var Pt=this.props,ne=Pt.sheetSwitchPermit,F=Pt.view,B=Pt.viewId;return(0,W.v)(ce.RX.batchGroup,ne)&&((0,W.v)(ce.RX.batchEdit,ne,B)||(0,W.v)(ce.RX.QrCodeSwitch,ne,B)||(0,W.v)(ce.RX.copy,ne,B)||(0,W.v)(ce.RX.export,ne,B)||(0,W.v)(ce.RX.execute,ne,B)||(0,W.v)(ce.RX.delete,ne,B))}},{key:"numberWidth",get:function(){var Pt=this.props.sheetViewData,ne=Pt.rows,F=this.lineNumberBegin,B=String(F+ne.length).length*8;return B>14?B:14}},{key:"rowHeadWidth",get:function(){var Pt=this.props.view,ne=this.numberWidth,F=(P().get(Pt,"advancedSetting.showquick")||"1")==="1",B=(P().get(Pt,"advancedSetting.showno")||"1")==="1";if(this.rowHeadOnlyNum)return ne+24;var n=56;return(B||this.hasBatch)&&(n+=ne+8),this.tableType==="classic"&&(n+=16),this.tableType!=="classic"&&F&&!B&&!this.hasBatch&&(n-=18),n+8}},{key:"needClickToSearch",get:function(){return!this.chartId&&P().get(this.props,"view.advancedSetting.clicksearch")==="1"}}]),Bn}(h.Component),vn.propTypes={worksheetInfo:C().shape({}),controls:C().arrayOf(C().shape({})),sheetFetchParams:C().shape({}),sheetViewData:C().shape({}),sheetViewConfig:C().shape({}),updateDefaultScrollLeft:C().func,updateRows:C().func,hideRows:C().func,clearHighLight:C().func,fetchRows:C().func,setHighLight:C().func,changeWorksheetSheetViewSummaryType:C().func,updateViewPermission:C().func,getWorksheetSheetViewSummary:C().func,updateSheetColumnWidths:C().func,updateWorksheetSomeControls:C().func},Bt=function(){var Bn=this;this.table=h.createRef(),this.navGroupToSearch=function(Un){var Pt=Un||Bn.props,ne=Pt.view,F=Pt.worksheetInfo,B=(P().get(F,"template.controls")||[]).find(function(n){return n.controlId===P().get(ne,"navGroup[0].controlId")});return!!B&&P().get(ne,"advancedSetting.showallitem")==="1"&&!P().get(ne,"navGroup[0].viewId")&&P().get(ne,"navGroup").length>0}},Fe),kt(Dt.prototype,"activeShift",[pe.Nj],r()(Dt.prototype,"activeShift"),Dt.prototype),kt(Dt.prototype,"deActiveShift",[pe.Nj],r()(Dt.prototype,"deActiveShift"),Dt.prototype),kt(Dt.prototype,"outerClickEvent",[pe.Nj],r()(Dt.prototype,"outerClickEvent"),Dt.prototype),kt(Dt.prototype,"updateRecordEvent",[pe.Nj],r()(Dt.prototype,"updateRecordEvent"),Dt.prototype),kt(Dt.prototype,"handleCellClick",[pe.Nj],r()(Dt.prototype,"handleCellClick"),Dt.prototype),kt(Dt.prototype,"handleCellMouseDown",[pe.Nj],r()(Dt.prototype,"handleCellMouseDown"),Dt.prototype),kt(Dt.prototype,"renderSummaryCell",[pe.Nj],r()(Dt.prototype,"renderSummaryCell"),Dt.prototype),kt(Dt.prototype,"renderColumnHead",[pe.Nj],r()(Dt.prototype,"renderColumnHead"),Dt.prototype),kt(Dt.prototype,"renderRowHead",[pe.Nj],r()(Dt.prototype,"renderRowHead"),Dt.prototype),Dt))||xe;const tn=(0,Ce.$j)(function(Pe){return{isCharge:Pe.sheet.isCharge,worksheetInfo:Pe.sheet.worksheetInfo,filters:Pe.sheet.filters,quickFilter:Pe.sheet.quickFilter,navGroupFilters:Pe.sheet.navGroupFilters,buttons:Pe.sheet.buttons,controls:Pe.sheet.controls,sheetSwitchPermit:Pe.sheet.sheetSwitchPermit||[],sheetSearchConfig:Pe.sheet.sheetSearchConfig||[],chartIdFromUrl:P().get(Pe,"sheet.base.chartId"),maxCount:P().get(Pe,"sheet.base.maxCount"),sheetViewData:Pe.sheet.sheetview.sheetViewData,sheetFetchParams:Pe.sheet.sheetview.sheetFetchParams,sheetViewConfig:Pe.sheet.sheetview.sheetViewConfig}},function(Pe){return(0,I.DE)((0,me.default)({},P().pick(m,["setRowsEmpty","addRecord","fetchRows","updateRows","hideRows","selectRows","clearHighLight","setHighLight","updateDefaultScrollLeft","updateSheetColumnWidths","changeWorksheetSheetViewSummaryType","updateViewPermission","getWorksheetSheetViewSummary","changePageIndex","updateControlOfRow","refresh","clearSelect","saveSheetLayout","resetSheetLayout"]),{updateWorksheetSomeControls:j.updateWorksheetSomeControls,refreshWorksheetControls:j.refreshWorksheetControls}),Pe)})(Tt);var Vn=t(48836),Zn=t(79771),Ot=t(29952),$t=t(36021),cn=t(58614),Mn=t(81765),dt=t(31623),$e=t(8352),jt=t(41796),rn=t(86674),Rt=t(5913),St,zt,oa=(0,L.Z)([`
  width: 100%;
  height: 100%;
  background: #f5f5f5;
  overflow: hidden;
`],[`
  width: 100%;
  height: 100%;
  background: #f5f5f5;
  overflow: hidden;
`]),qn=k.ZP.div(oa),In=(St=(0,Ce.$j)(function(Pe){return(0,me.default)({},Pe.sheet)},function(Pe){return(0,I.DE)({saveView:j.saveView,updateWorksheetControls:j.updateWorksheetControls},Pe)}),St(zt=function(Pe){(0,U.default)(Bn,Pe);function Bn(Un){return(0,v.default)(this,Bn),(0,de.default)(this,(Bn.__proto__||ye()(Bn)).call(this,Un))}return(0,se.default)(Bn,[{key:"render",value:function(){var Pt=this,ne=this.props,F=ne.isCharge,B=ne.view,n=ne.toCustomWidget,l=ne.controls,o=l===void 0?[]:l,d=ne.updateWorksheetControls,u=ne.sheetSwitchPermit,p=ne.setViewConfigVisible,f=(0,ve.aq)(B),w=f.begindate,D=w===void 0?"":w,G=f.enddate,H=G===void 0?"":G,De=o.filter(function(un){return!rn.x0.includes(un.controlId)&&(P().includes([15,16],un.type)||un.type===38&&un.enumDefault===2)});De=(0,Rt.oF)(De,u);var je=De.map(function(un){return un.controlId}),lt=D&&!je.includes(D),Ft=H&&!je.includes(H);return lt||!D||!H||Ft||(0,Rt.O$)(o.find(function(un){return un.controlId===D})||{})||(0,Rt.O$)(o.find(function(un){return un.controlId===H})||{})?h.createElement(qn,null,h.createElement($e.default,{sheetSwitchPermit:u,isCharge:F,context:h.createElement(jt.default,(0,me.default)({},this.props,{viewType:5,saveView:function(dn,Hn){if(P().get(Hn,["advancedSetting","enddate"])){var ca={},da=B.moreSort;if(!da){var Me=(0,ve.aq)(Hn),nt=Me.begindate,He=nt===void 0?"":nt;ca={sortCid:He,editAttrs:["moreSort","sortCid","sortType","advancedSetting"],moreSort:[{controlId:He,isAsc:!0},{controlId:"ctime",isAsc:!1}],sortType:2}}var ie=(0,me.default)({},Hn,ca),We=(0,ve.aq)(ie),Ue=We.begindate,Ke=Ue===void 0?"":Ue,ut=We.enddate,wt=ut===void 0?"":ut;Pt.props.saveView(dn,(0,me.default)({},ie,{displayControls:[],editAttrs:[].concat((0,q.Z)(ie.editAttrs),["displayControls"])})),p(!0)}},updateWorksheetControls:d,view:B,mustSameType:!0,mustEnd:!0,canAddTimeControl:!0,timeControls:De,isDelete:lt})),viewType:5,toCustomWidget:n})):h.createElement(dt.Z,{view:B})}}]),Bn}(h.Component))||zt),Vt=t(18807),Yt=t(6091),qt=t(68973),rt=t(54208),Qe=t(26918),ht=t(25273),Lt=t(87600),Ct=t(83298),mt=t(93967),vt=t.n(mt),Xt=t(18888),bn=t(45231);function pn(Pe){var Bn=Pe.viewId,Un=Pe.appId,Pt=Pe.worksheetId,ne=Pe.groupId,F=Pe.views,B=Pe.sheetSwitchPermit,n=Pe.worksheetInfo,l=Pe.isCharge,o=Pe.controls,d=Pe.itemData,u=Pe.currentRecordId,p=Pe.onClick,f=Pe.onUpdateFn,w=F.find(function(ut){return ut.viewId===Bn})||{},D=w.coverCid||P().get(n,["advancedSetting","coverid"]),G=(0,ve.aq)(w),H=G.coverposition,De=H===void 0?"2":H,je=G.abstract,lt=je===void 0?"":je,Ft=o.map(function(ut){return(0,me.default)({},ut,{value:d[ut.controlId]})}),un=(0,y.KC)(d[D]),dn=un.coverImage,Hn=un.allAttachments,ca=(0,me.default)({},o.find(function(ut){return ut.controlId===D})||{},{value:d[D]});if(ca.type===45){var da=(0,Lt.Pz)(ca.value),Me=[];da.map(function(ut){ut.staticValue?Me.push(ut.staticValue):Me.push((0,ae.fS)({projectId:n.projectId,appId:Un,groupId:ne,worksheetId:Pt,viewId:Bn,recordId:u},ut.cid))}),ca=(0,me.default)({},ca,{value:Me.join("")})}var nt=function(wt){var Et=w.displayControls,et=Et===void 0?[]:Et,Xe=wt,pt=[],at=P().find(o,function(mn){return mn.attribute===1});at&&pt.push((0,me.default)({},P().pick(at,y.tn),{value:Xe[at.controlId]}));var ct=(0,W.v)(ce.RX.sysControlSwitch,B),Nt=ct?et:et.filter(function(mn){return!P().includes(["wfname","wfstatus","wfcuaids","wfrtime","wfftime","wfdtime","wfcaid","wfctime","wfcotime"],mn)});return Nt.forEach(function(mn){var Qt=P().find(o,function(_n){var ra=_n.controlId;return ra===mn});if(Qt){var Cn=Xe[mn];pt.push((0,me.default)({},P().pick(Qt,y.tn),{value:Cn}))}}),pt},He=(0,Q._l)(w),ie=He&&(0,Q.j8)({controlId:He.controlId,colorItems:He.colorItems,controls:Ft,row:P().isObject(d)?d:safeParse(d)}),We=o.find(function(ut){return ut.controlId===lt})||{},Ue={coverData:ca,coverImage:dn,allAttachments:Hn,allowEdit:d.allowedit,allowDelete:d.allowdelete,rawRow:d,recordColorConfig:He,fields:nt(d),formData:Ft,rowId:d.rowid,abstractValue:lt?(0,Ct.Z)((0,me.default)({},We,{value:d[lt]})):""},Ke=function(wt){bn.Z.updateWorksheetRow((0,me.default)({rowId:Ue.rowId},P().pick(w,["worksheetId","viewId"]),{newOldControl:[wt]})).then(function(Et){var et=Et.data,Xe=Et.resultCode;et&&Xe===1&&f([et.rowid],P().omit(et,["allowedit","allowdelete"]))})};return h.createElement("div",{className:vt()("detailItem",{isActive:u===d.rowid,hasBgColor:ie&&He.showBg}),onClick:p},h.createElement(Xt.default,{data:Ue,type:"board",className:"detailCardItem",isCharge:l,currentView:(0,me.default)({},w,{projectId:n.projectId,appId:Un}),sheetSwitchPermit:B,updateTitleData:Ke}))}var Rn=t(59665),fe=t(53280),$n=k.ZP.div(function(Pe){var Bn=Pe.width;return`
  display: flex;
  flex-direction: column;
  transition: width 0.2s;
  position: relative;
  z-index: 3;
  border-right: 1px solid #ddd;

  .searchBar {
    width: `+Bn+`px;
    padding: 0 12px;
    height: 51px;
    .icon {
      line-height: 51px;
      font-size: 20px;
      color: #bdbdbd;
      &.icon-close {
        cursor: pointer;
      }
      &.icon-search{
        &:hover{
          color:#bdbdbd;
        }
      }
      &:hover{
        color: #2196f3;
      }
    }
    input {
      width: 100%;
      height: 51px;
      border: none;
      padding-left: 6px;
      font-size: 13px;
    }
    .expandIcon{
      height: 51px;
    }
  }
  `}),gn=k.ZP.div(function(Pe){var Bn=Pe.left;return`
  position: absolute;
  z-index: 2;
  left: `+Bn+`px;
  width: 10px;
  height: 100%;
  cursor: ew-resize;
  border-left: 1px solid #e0e0e0;
  &:hover{
    border-left: 1px solid #2196f3;
  }
`}),en="";function _t(Pe){var Bn=Pe.viewId,Un=Pe.appId,Pt=Pe.worksheetId,ne=Pe.views,F=Pe.fetchRows,B=Pe.detailView,n=Pe.sheetSwitchPermit,l=Pe.worksheetInfo,o=Pe.filters,d=Pe.updateRow,u=Pe.deleteRow,p=Pe.isCharge,f=Pe.quickFilter,w=Pe.clearData,D=Pe.controls,G=B.detailViewRows,H=G===void 0?[]:G,De=B.detailViewLoading,je=B.detailPageIndex,lt=B.detailKeyWords,Ft=B.noMoreRows,un=ne.find(function(Dn){return Dn.viewId===Bn})||{},dn=un.coverCid||P().get(l,["advancedSetting","coverid"]),Hn=(0,h.useRef)(),ca=(0,h.useState)({}),da=(0,T.Z)(ca,2),Me=da[0],nt=da[1],He=(0,h.useState)(!0),ie=(0,T.Z)(He,2),We=ie[0],Ue=ie[1],Ke=(0,h.useState)(!1),ut=(0,T.Z)(Ke,2),wt=ut[0],Et=ut[1],et=(0,h.useState)(We?window.localStorage.getItem("detailGroupWidth_"+Bn)||(dn?335:240):32),Xe=(0,T.Z)(et,2),pt=Xe[0],at=Xe[1],ct=(0,h.useState)(+new Date),Nt=(0,T.Z)(ct,2),mn=Nt[0],Qt=Nt[1],Cn=De&&je===1||l.isRequestingRelationControls;(0,h.useEffect)(function(){return window.addEventListener("keydown",Ht),function(){window.removeEventListener("keydown",Ht)}}),(0,h.useEffect)(function(){return function(){w()}},[]),(0,h.useEffect)(function(){at(We?window.localStorage.getItem("detailGroupWidth_"+Bn)||(dn?335:240):32)},[Bn]),(0,h.useEffect)(function(){en!==un.viewId?(Hn.current&&(Hn.current.value=""),F(1,"")):setTimeout(function(){F(1,lt)},200)},[un]),(0,h.useEffect)(function(){Me.rowid&&H.filter(function(Dn){return Dn.rowid===Me.rowid}).length&&un.childType!==1&&en===Bn||(nt(H[0]||{}),en=Bn)},[H]);var _n=function(){!Ft&&!De&&F(je+1,lt)},ra=function(xn){Ue(xn),at(xn?window.localStorage.getItem("detailGroupWidth_"+Bn)||(dn?335:240):32)},Nn=(0,h.useCallback)(P().debounce(function(Dn){F(1,Dn)},500),[]),Ht=function(xn){var an=document.getElementsByClassName("editingBar"),Qn=!![].concat((0,q.Z)(an)).filter(function(hn){return hn.style.overflow===""}).length;if(H.length&&P().get(xn,"target.parentNode.id")==="detailNavList"){var Ln=P().findIndex(H,function(hn){return hn.rowid===Me.rowid});if(xn.keyCode===38){if(Qn)return;Ln>0&&nt(H[Ln-1])}else if(xn.keyCode===40){if(Qn)return;Ln<H.length-1&&nt(H[Ln+1])}}},Sn=function(){var xn=function(){return lt||o.keyWords?"search":!P().isEmpty(o.filterControls)||!P().isEmpty(un.filters)||!P().isEmpty(f)?"filter":"empty"};return We?De&&je===1?h.createElement(rt.Z,{className:"mTop10"}):H.length?h.createElement(ht.Z,{id:"detailNavList",className:"flex",onScrollEnd:_n},H.map(function(an){return h.createElement(pn,(0,me.default)({},Pe,{itemData:an,currentRecordId:Me.rowid,onClick:function(){var Ln=document.getElementsByClassName("editingBar"),hn=!![].concat((0,q.Z)(Ln)).filter(function(Ra){return Ra.style.overflow===""}).length;if(hn){alert(_l("\u8BF7\u5148\u4FDD\u5B58\u6216\u53D6\u6D88\u5F53\u524D\u66F4\u6539"),3);return}nt(an)},onUpdateFn:function(Ln,hn){d(hn),hn.rowid===Me.rowid&&Qt(+new Date)}}))})):xn()!=="empty"?h.createElement("div",{className:"mTop36 Gray_9e TxtCenter"},xn()==="search"?_l("\u6CA1\u6709\u641C\u7D22\u7ED3\u679C"):_l("\u6CA1\u6709\u7B26\u5408\u6761\u4EF6\u7684\u8BB0\u5F55")):h.createElement("div",{className:"empty"},_l("\u6682\u672A\u6DFB\u52A0\u8BB0\u5F55")):h.createElement("span",{className:"pLeft8 InlineBlock w100 pRight8 WordBreak Gray_9e TxtCenter Bold h100 Hand",onClick:function(){return ra(!We)}})};return h.createElement("div",{className:"detailViewWrapper"},wt&&h.createElement(fe.Z,{value:pt,min:240,max:420,onChange:function(xn){Et(!1),at(xn),safeLocalStorageSetItem("detailGroupWidth_"+Bn,xn)}}),un.childType===2&&h.createElement("div",{className:"leftList"},h.createElement($n,{width:pt},h.createElement("div",{className:vt()("searchBar flexRow",{pAll0:!We,TxtCenter:!We})},We&&h.createElement(h.Fragment,null,h.createElement("i",{className:"icon icon-search"}),h.createElement("input",{type:"text",placeholder:_l("\u641C\u7D22"),ref:Hn,className:vt()("flex",{placeholderColor:!lt}),onChange:function(xn){return Nn(xn.target.value)}})),lt&&h.createElement("i",{className:"icon icon-cancel1 Hand",onClick:function(){F(1,""),Hn.current.value=""}}),!lt&&h.createElement("i",{className:vt()("icon Font12 icon-"+(We?"back-02":"next-02")+" Hand expandIcon",{pLeft9:!We}),onClick:function(){return ra(!We)}})),Sn()),h.createElement(gn,{className:"detailNavDrag",left:pt,onMouseDown:function(){return Et(!0)}})),h.createElement("div",{className:vt()("rightRecord",{isSingle:un.childType===1}),style:{width:"calc(100% - "+pt+"px)"}},Cn&&h.createElement(rt.Z,{className:"mTop10"}),!Cn&&!H.length&&un.childType===1&&h.createElement(Rn.default,{filters:o,viewFilter:un.filters||[]}),!Cn&&Me.rowid&&!!H.filter(function(Dn){return Dn.rowid===Me.rowid}).length&&h.createElement(le.Z,{notDialog:!0,flag:mn,controls:D,switchRecordSuccess:function(xn){return nt(xn)},sheetSwitchPermit:n,allowAdd:l.allowAdd,projectId:l.projectId,currentSheetRows:H,showPrevNext:un.childType===2,appId:Un,viewId:Bn,from:1,view:un,recordId:Me.rowid,worksheetId:Pt,rules:l.rules,isWorksheetQuery:l.isWorksheetQuery,updateSuccess:function(xn,an,Qn){return d(Qn)},onDeleteSuccess:function(){return u(Me.rowid)},handleAddSheetRow:function(xn){d(xn),nt(xn)},hideRows:function(xn){setTimeout(function(){xn.forEach(u)},100)},isCharge:p,customBtnTriggerCb:function(){setTimeout(function(){F(1,lt)},100)}})))}const nn=(0,Ce.$j)(function(Pe){return P().pick(Pe.sheet,["detailView","worksheetInfo","filters","controls","sheetSwitchPermit","sheetButtons","navGroupFilters","updateRow","deleteRow","views","quickFilter"])},function(Pe){return(0,I.DE)((0,me.default)({},Qe,j),Pe)})(_t);var Gt=t(2647),xt=t(45283),Mt=t(228),ze,yt=(0,L.Z)([`
  height: 100%;
  flex: 1;
  overflow: hidden;
  position: relative;
`],[`
  height: 100%;
  flex: 1;
  overflow: hidden;
  position: relative;
`]),Ut=(0,L.Z)([""],[""]),Wt=ke.B.board,kn=ke.B.sheet,on=ke.B.calendar,En=ke.B.gallery,fn=ke.B.structure,jn=ke.B.gunter,Ta=ke.B.detail,zn=ke.B.customize,pa=ke.B.resource,Ea=ke.B.map,la=k.ZP.div(yt),Kn=k.ZP.div(Ut),sa=(ze={},(0,te.default)(ze,Wt,Zn.Z),(0,te.default)(ze,kn,tn),(0,te.default)(ze,En,cn.Z),(0,te.default)(ze,on,function(Pe){return h.createElement(Mn.Z,(0,me.default)({watchHeight:!0},Pe))}),(0,te.default)(ze,fn,Ot.Z),(0,te.default)(ze,jn,In),(0,te.default)(ze,Ta,nn),(0,te.default)(ze,"structureVertical",Yt.Z),(0,te.default)(ze,"structureMix",qt.Z),(0,te.default)(ze,zn,Gt.Z),(0,te.default)(ze,Ea,xt.Z),(0,te.default)(ze,pa,Mt.Z),ze);function ba(Pe){var Bn=Pe.loading,Un=Pe.error,Pt=Pe.view,ne=Pe.views,F=Pe.showAsSheetView,B=Pt.advancedSetting,n=B===void 0?{}:B,l=Pe.activeViewStatus;if(Bn)return h.createElement(la,null,h.createElement(Kn,null,h.createElement(J.Z,{style:{flex:1},direction:"column",widths:["30%","40%","90%","60%"],active:!0,itemStyle:{marginBottom:"10px"}}),h.createElement(J.Z,{style:{flex:1},direction:"column",widths:["40%","55%","100%","80%"],active:!0,itemStyle:{marginBottom:"10px"}}),h.createElement(J.Z,{style:{flex:2},direction:"column",widths:["45%","100%","100%","100%"],active:!0,itemStyle:{marginBottom:"10px"}})));var o=P().pick(Pe,["isCharge","appPkg","appId","groupId","worksheetId","view","viewId","chartId","maxCount","showControlIds","openNewRecord","setViewConfigVisible","groupFilterWidth","sheetSwitchPermit"]);P().isEmpty(Pt)&&!Pe.chartId&&!P().get(window,"shareState.isPublicView")&&(ne.length&&o.appId&&o.groupId&&o.worksheetId?(0,$t.T8)("/app/"+o.appId+"/"+o.groupId+"/"+o.worksheetId,!0):l=-1e4);var d=String(F?kn:Pt.viewType);!F&&Pt.viewType===2&&n.hierarchyViewType==="1"?d="structureVertical":!F&&Pt.viewType===2&&n.hierarchyViewType==="2"&&(d="structureMix");var u=sa[d];return h.createElement(Vn.Z.Provider,{value:{isCharge:Pe.isCharge}},h.createElement(la,null,!u||l!==1?h.createElement(Vt.default,{resultCode:Un?-999999:l}):h.createElement(u,o)))}ba.propTypes={loading:C().bool,error:C().bool,view:C().shape({}),activeViewStatus:C().number};const Fa=(0,i.Z)(ba);var wa=t(20782),Na=t(55055),Za=t(62443),ya=t(63355),An=t(70264),ma=t(33867),fa=t(4557),Ma=t(87506),Ya=t.n(Ma),Ba=t(50347),La=t(58173),Qa=t(11022),nr=t(42185),Rr=t(97373),hr=t(94055),yr=t(24043),br=t.n(yr),Lr=t(73935),lr=t(95742),Or=t(33126),Vr=t(15405),Kr=t(66879),Br=t(55992),kr=t(7452),ja=t(63239),ur=t.n(ja),vr=t(15845),Pr={updateReportSort:function(Bn,Un){return vr.Z.ajaxOptions.url=vr.Z.server()+"/reportSort/updateReportSort",vr.Z.ajaxOptions.type="POST",mdyAPI(vr.V,"reportSortupdateReportSort",ur()(Bn),$.extend(vr.Z,Un))}};const Gr=Pr;var cr=(0,Or.Z)(Vr.Z),Cr=[".mui-dialog-container",".GlobalStatisticsPanel",".dropdownTrigger",".openStatisticsBtn",".selectUserBox",".mdAlertDialog",".PositionContainer-active",".addFilterPopup","#dialogBoxSelectUser_container","#dialogSelectDept_container",".ant-tooltip",".ant-cascader-menus",".ant-tree-select-dropdown",".CityPickerPanelTrigger",".ant-modal-mask",".ant-modal-wrap",".ant-select-dropdown",".ant-dropdown",".ant-dropdown-menu",".ant-picker-dropdown",".rc-trigger-popup","#attachemntsPreviewContainer",".selectRoleDialog"],Zr=(0,lr.W8)(function(Pe){var Bn=Pe.item,Un=(0,a.Z)(Pe,["item"]);return h.createElement("div",{className:"StatisticsPanel-wrapper"},h.createElement(Kr.default,(0,me.default)({report:Bn},Un)))}),ar=(0,lr.JN)(function(Pe){var Bn=Pe.list,Un=Pe.width,Pt=(0,a.Z)(Pe,["list","width"]),ne=br()({length:6});return h.createElement("div",{className:"StatisticsPanel-cards",style:{width:Un}},Bn.map(function(F,B){return h.createElement(Zr,(0,me.default)({key:F.id,index:B,item:F},Pt))}),Un?ne.map(function(F,B){return h.createElement("div",{key:B,className:"StatisticsPanel-wrapper statisticsCard-empty"},h.createElement("div",{className:"statisticsCard"}))}):null)}),mo=function(Pe){(0,U.default)(Bn,Pe);function Bn(Un){(0,v.default)(this,Bn);var Pt=(0,de.default)(this,(Bn.__proto__||ye()(Bn)).call(this)),ne=md.global.Account.isPortal,F=(0,W.v)(ce.RX.statisticsSwitch,Un.sheetSwitchPermit),B=(0,W.v)(ce.RX.statisticsSelfSwitch,Un.sheetSwitchPermit)&&!ne;return Pt.state={ownerId:F?"":md.global.Account.accountId,dialogVisible:!1,loading:!0,reports:[],newReport:{name:_l("\u672A\u547D\u540D")},chartWidth:0,pageIndex:1,pageLoading:!1,showPublic:F,showSelf:B},Pt}return(0,se.default)(Bn,[{key:"componentDidMount",value:function(){setTimeout(this.getReportConfigList.bind(this),250)}},{key:"componentWillReceiveProps",value:function(Pt){this.setState({chartWidth:window.innerWidth-230-120})}},{key:"componentWillUnmount",value:function(){var Pt=document.querySelector(".GlobalStatisticsPanel");Pt&&(Lr.unmountComponentAtNode(Pt),$(Pt).remove(),$(window).off("resize",window.statisticsResize))}},{key:"handleScrollEnd",value:function(){this.getReportConfigList()}},{key:"getReportConfigList",value:function(){var Pt=this,ne=this.props,F=ne.worksheetId,B=ne.isFullScreen,n=this.state,l=n.ownerId,o=n.pageIndex,d=n.reports,u=n.pageLoading,p=n.loading,f=o>1?"pageLoading":"loading";o>1&&u||!o||(this.setState((0,te.default)({},f,!0)),this.request&&this.request.abort(),this.request=kr.Z.list({appId:F,isOwner:!!l,pageIndex:o,pageSize:B?20:10}),this.request.then(function(w){var D;Pt.setState((D={pageIndex:w.reports.length>=10?o+1:0,reports:d.concat(w.reports)},(0,te.default)(D,f,!1),(0,te.default)(D,"chartWidth",window.innerWidth-230-120),D))}))}},{key:"handleSwitchView",value:function(){var Pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.state.ownerId;this.setState({ownerId:Pt,pageIndex:1,reports:[],loading:!1},this.getReportConfigList)}},{key:"handleDelete",value:function(Pt){var ne=this.state.reports;this.setState({reports:ne.filter(function(F){return F.id!==Pt})})}},{key:"handleOpenGlobalStatisticsPanel",value:function(){var Pt=this,ne=this.props.isFullScreen;if(ne){var F=document.querySelector(".GlobalStatisticsPanel");Lr.unmountComponentAtNode(F),$(F).remove(),$(window).off("resize",window.statisticsResize)}else{var B=document.createElement("DIV");B.className="GlobalStatisticsPanel",$("#container").append(B),(0,Lr.render)(this.renderStatistics(),document.querySelector(".GlobalStatisticsPanel")),window.statisticsResize=P().debounce(function(){(0,Lr.render)(Pt.renderStatistics(),document.querySelector(".GlobalStatisticsPanel"))},200),$(window).on("resize",window.statisticsResize)}}},{key:"renderStatistics",value:function(){return h.createElement(Bn,(0,me.default)({},this.props,{isFullScreen:!0,onClose:P().noop}))}},{key:"handleSortEnd",value:function(Pt){var ne=this,F=Pt.oldIndex,B=Pt.newIndex;if(F!==B){var n=this.props.worksheetId,l=this.state,o=l.reports,d=l.ownerId,u=(0,lr.Rp)(o,F,B);this.setState({reports:u}),Gr.updateReportSort({appId:n,isOwner:!!d,reportIds:u.map(function(p){return p.id})}).then(function(p){},function(p){ne.setState({reports:o})})}}},{key:"handleUpdateDialogVisible",value:function(Pt){var ne=Pt.dialogVisible,F=Pt.isRequest;this.setState({dialogVisible:ne,newReport:{name:_l("\u672A\u547D\u540D")}}),F&&this.handleSwitchView()}},{key:"shouldCancelStart",value:function(Pt){var ne=Pt.target;return!ne.classList.contains("icon-drag")}},{key:"renderHeader",value:function(){var Pt=this,ne=this.state,F=ne.ownerId,B=ne.showSelf,n=ne.showPublic,l=this.props,o=l.isFullScreen,d=l.roleType,u=l.isCharge;return h.createElement("div",{className:"StatisticsPanel-header"},h.createElement("div",{className:"title"},n?B?_l("\u7EDF\u8BA1"):_l("\u516C\u5171\u7EDF\u8BA1"):_l("\u4E2A\u4EBA\u7EDF\u8BA1")),n&&B&&h.createElement("div",{className:"flexRow Relative"},h.createElement("div",{className:vt()("panelTab commonality",{ThemeColor3:!F,active:!F}),onClick:this.handleSwitchView.bind(this,"")},_l("\u516C\u5171")),h.createElement("div",{className:vt()("panelTab personal",{ThemeColor3:F,active:F}),onClick:this.handleSwitchView.bind(this,md.global.Account.accountId)},_l("\u4E2A\u4EBA"))),h.createElement("div",{className:"flexRow btns"},(u||F)&&h.createElement(hr.default,{title:F?_l("\u65B0\u5EFA\u4E2A\u4EBA\u56FE\u8868"):_l("\u65B0\u5EFA\u516C\u5171\u56FE\u8868"),placement:"bottom"},h.createElement(ma.Z,{onClick:function(){Pt.setState({dialogVisible:!0})},icon:"plus",className:"ThemeHoverColor3 Gray_9e"})),h.createElement(hr.default,{title:o?_l("\u5C0F\u5C4F"):_l("\u5168\u5C4F"),placement:"bottom"},h.createElement(ma.Z,{onClick:this.handleOpenGlobalStatisticsPanel.bind(this),icon:o?"worksheet_narrow":"worksheet_enlarge",className:"ThemeHoverColor3 Gray_9e"}))))}},{key:"renderContent",value:function(){var Pt=this.props,ne=Pt.isFullScreen,F=(0,a.Z)(Pt,["isFullScreen"]),B=this.state,n=B.reports,l=B.chartWidth,o=B.ownerId,d=B.pageLoading,u=(0,me.default)({},F,{axis:"xy",ownerId:o,list:n,helperClass:"sortableCard",shouldCancelStart:this.shouldCancelStart,onSortEnd:this.handleSortEnd.bind(this),width:ne?l:"",onRemove:this.handleDelete.bind(this)});return h.createElement(ht.Z,{className:"flex",onScrollEnd:this.handleScrollEnd.bind(this)},h.createElement("div",{className:"StatisticsPanel-content"},h.createElement(ar,u),d?h.createElement(rt.Z,null):null))}},{key:"renderCommonalityNoData",value:function(){var Pt=this,ne=this.props.roleType,F=this.state.ownerId;return h.createElement("div",{className:"StatisticsPanel-nodata"},h.createElement(ma.Z,{icon:"worksheet_public"}),h.createElement("div",{className:"prompt Font17 TxtCenter mBottom12"},_l("\u81EA\u7531\u5B9A\u4E49\u56FE\u8868\uFF0C\u652F\u6301\u6570\u91CF\u6216\u6570\u503C\u7EDF\u8BA1\u3001\u7EF4\u5EA6\u6216\u5468\u671F\u5BF9\u6BD4\u3001\u6570\u636E\u900F\u89C6\u7B49\u591A\u79CD\u5206\u6790")),h.createElement("div",{className:"prompt Font14 TxtCenter"},_l("\u7BA1\u7406\u5458\u53EF\u628A\u4E2A\u4EBA\u56FE\u8868\u8F6C\u4E3A\u516C\u5171\uFF0C\u4F9B\u6210\u5458\u4E00\u540C\u4F7F\u7528")),(ne===1||ne===2||F)&&h.createElement(nr.ZP,{onClick:function(){Pt.setState({dialogVisible:!0})},type:"primary"},_l("\u521B\u5EFA\u56FE\u8868")))}},{key:"renderPersonageNoData",value:function(){var Pt=this;return h.createElement("div",{className:"StatisticsPanel-nodata"},h.createElement(ma.Z,{icon:"person1"}),h.createElement("div",{className:"prompt Font17 TxtCenter"},_l("\u8FD8\u6CA1\u6709\u4E2A\u4EBA\u56FE\u8868")),h.createElement(nr.ZP,{onClick:function(){Pt.setState({dialogVisible:!0})},type:"primary",className:"mTop24"},_l("\u521B\u5EFA\u56FE\u8868")))}},{key:"render",value:function(){var Pt=this.state,ne=Pt.dialogVisible,F=Pt.newReport,B=Pt.loading,n=Pt.reports,l=Pt.ownerId,o=this.props,d=o.worksheetId,u=o.viewId,p=o.appId,f=o.projectId;return h.createElement("div",{className:"StatisticsPanel"},h.createElement(cr,{onClickAway:this.props.onClose.bind(this),onClickAwayExceptions:Cr},this.renderHeader(),B?h.createElement("div",{className:"StatisticsPanel-nodata"},h.createElement(rt.Z,null)):n.length?this.renderContent():l?this.renderPersonageNoData():this.renderCommonalityNoData(),ne?h.createElement(Br.Z,{appType:1,worksheetId:d,viewId:l?u:null,appId:p,projectId:f,settingVisible:!0,ownerId:l,permissions:!0,report:F,updateDialogVisible:this.handleUpdateDialogVisible.bind(this)}):null))}}]),Bn}(h.Component),Oo=t(83060);const Ho=Oo.Z;var Ko=t(21433),Co=t(42602),Jr=t(62521),pr=t(16469),fo=t(29314),oo=t(45371),Xr=t(1952),Bo=t(84527);const Eo=null;var yo=function(Bn){return(0,Xr.Z)(Bo.Z,(0,me.default)({},Bn,{closeFnName:"onHide"}))},qr=t(18540);const ll=null;var eo=function(Bn){return(0,Xr.Z)(qr.Z,(0,me.default)({},Bn,{closeFnName:"onHide"}))},Zo=t(57645);const zo=null;var Yo=function(Bn){return(0,Xr.Z)(Zo.Z,(0,me.default)({},Bn,{closeFnName:"onCancel"}))},to=t(62232),il=t(21509);const mr=null;var Mo=function(Bn){return(0,Xr.Z)(il.Z,(0,me.default)({},Bn,{closeFnName:"hideImportDataFromExcel"}))},Ar=t(70973);function lo(Pe){var Bn=Pe.appId,Un=Pe.groupId,Pt=Pe.viewId,ne=Pe.isCharge,F=Pe.worksheetInfo,B=Pe.sheet,n=Pe.controls,l=Pe.sheetSwitchPermit,o=Pe.isLock,d=Pe.permissionType,u=Pe.setSheetDescVisible,p=Pe.setEditNameVisible,f=Pe.updateWorksheetInfo,w=Pe.reloadWorksheet,D=Pe.deleteSheet,G=F.name,H=F.projectId,De=F.worksheetId,je=F.allowAdd,lt=F.entityName,Ft=F.btnName,un=(0,h.useState)(),dn=(0,T.Z)(un,2),Hn=dn[0],ca=dn[1],da=P().filter(n,function(We){return We.type===33}),Me=ne&&!o,nt=(0,W.v)(ce.RX.sheetTrash,l),He=(0,W.v)(ce.RX.importSwitch,l)&&je,ie=(0,Ar.le)(d)||(0,Ar.g9)(d);return!ie&&!He&&!nt&&!Me?null:h.createElement("span",{className:"moreOperate mLeft6 pointer",onClick:function(){return ca(!0)}},h.createElement(ma.Z,{className:"Gray_9d Font20",icon:"more_horiz"}),Hn&&h.createElement(Jr.Z,{style:{zIndex:999},onClick:function(Ue){return Ue.stopPropagation()},onClickAway:function(){return ca(!1)}},ie&&h.createElement(h.Fragment,null,ne&&!o&&h.createElement(h.Fragment,null,h.createElement(pr.Z,{icon:h.createElement(ma.Z,{icon:"settings",className:"Font18"}),onClick:function(){(0,to.OW)({sourceId:De,fromURL:"/app/"+Bn+"/"+Un+"/"+De+"/"+Pt},!1)}},h.createElement("span",{className:"text"},_l("\u7F16\u8F91\u8868\u5355%02036"))),h.createElement(fo.Z,{getPopupContainer:function(){return document.querySelector(".moreOperate .settingSheet .Item-content")},action:["hover"],popupAlign:{points:["tl","tr"],offset:[0,-20]},popup:h.createElement(Jr.Z,{className:"subMenu"},h.createElement(pr.Z,{onClick:function(){(0,$t.T8)("/worksheet/formSet/edit/"+De+"/display")}},h.createElement("span",{className:"text"},_l("\u4E1A\u52A1\u89C4\u5219%02028"))),h.createElement(pr.Z,{onClick:function(){(0,$t.T8)("/worksheet/formSet/edit/"+De+"/functionalSwitch")}},h.createElement("span",{className:"text"},_l("\u529F\u80FD\u5F00\u5173%02027"))),h.createElement(pr.Z,{onClick:function(){(0,$t.T8)("/worksheet/formSet/edit/"+De+"/customBtn")}},h.createElement("span",{className:"text"},_l("\u81EA\u5B9A\u4E49\u52A8\u4F5C%02026"))),h.createElement(pr.Z,{onClick:function(){(0,$t.T8)("/worksheet/formSet/edit/"+De+"/printTemplate")}},h.createElement("span",{className:"text"},_l("\u6253\u5370\u6A21\u677F%02025"))),h.createElement("hr",{className:"splitLine"}),h.createElement(pr.Z,{onClick:function(){(0,$t.T8)("/worksheet/form/edit/"+De)}},h.createElement("span",{className:"text"},_l("\u516C\u5F00\u53D1\u5E03%02024"))))},h.createElement(pr.Z,{className:"settingSheet",icon:h.createElement(ma.Z,{icon:"table",className:"Font18 pLeft3"})},h.createElement("span",{className:"text"},_l("\u8BBE\u7F6E\u5DE5\u4F5C\u8868%02035")),h.createElement(ma.Z,{className:"Font15",icon:"arrow-right-tip"}))),h.createElement("hr",{className:"splitLine"})),h.createElement(pr.Z,{icon:h.createElement(ma.Z,{icon:"edit",className:"Font18"}),onClick:function(){ca(!1),p(!0)}},h.createElement("span",{className:"text"},_l("\u4FEE\u6539\u540D\u79F0\u548C\u56FE\u6807%02034"))),h.createElement(pr.Z,{icon:h.createElement(ma.Z,{icon:"info",className:"Font18"}),onClick:function(){ca(!1),u(!0)}},h.createElement("span",{className:"text"},_l("\u7F16\u8F91\u5DE5\u4F5C\u8868\u8BF4\u660E%02033"))),h.createElement(h.Fragment,null,ne&&!o&&h.createElement(pr.Z,{icon:h.createElement(ma.Z,{icon:"button-edit"}),onClick:function(){ca(!1),yo({projectId:H,worksheetId:De,entityName:lt,btnName:Ft,updateSheetInfo:function(Ke,ut){f(ut)}})}},h.createElement("span",{className:"text"},_l("\u8BBE\u7F6E\u8BB0\u5F55\u540D\u79F0%02032"))),!P().isEmpty(da)&&h.createElement(pr.Z,{icon:h.createElement(ma.Z,{icon:"auto_number"}),onClick:function(){ca(!1),eo({worksheetInfo:F})}},h.createElement("span",{className:"text"},_l("\u91CD\u7F6E\u81EA\u52A8\u7F16\u53F7")))),h.createElement("hr",{className:"splitLine"})),He&&h.createElement(pr.Z,{icon:h.createElement(ma.Z,{icon:"restart",className:"Font16"}),onClick:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}Mo({isCharge:(0,Ar.g9)(d)||(0,Ar.le)(d),appId:Bn,worksheetId:De,worksheetName:G}),ca(!1)}},h.createElement("span",{className:"text"},_l("\u4ECEExcel\u5BFC\u5165\u6570\u636E%02031"))),nt&&h.createElement(pr.Z,{icon:h.createElement(ma.Z,{icon:"recycle"}),onClick:function(){Yo({appId:Bn,worksheetInfo:F,projectId:H,isCharge:(0,Ar.U9)(d),isAdmin:ne,controls:n,worksheetId:De,reloadWorksheet:w}),ca(!1)}},h.createElement("span",{className:"text"},_l("\u56DE\u6536\u7AD9%02030"))),Me&&h.createElement(pr.Z,{icon:h.createElement(ma.Z,{icon:"delete2"}),className:"delete",onClick:function(){ca(!1),(0,oo.Z)({clickOmitText:!0,title:h.createElement("div",{className:"Bold"},h.createElement("i",{className:"icon-error error",style:{fontSize:"28px",marginRight:"8px"}}),_l("\u5220\u9664\u5DE5\u4F5C\u8868 \u201C%0\u201D",G)),description:h.createElement("div",null,h.createElement("span",{style:{color:"#333",fontWeight:"bold"}},_l("\u6CE8\u610F\uFF1A\u5DE5\u4F5C\u8868\u4E0B\u6240\u6709\u914D\u7F6E\u548C\u6570\u636E\u5C06\u88AB\u5220\u9664\u3002")),_l("\u8BF7\u52A1\u5FC5\u786E\u8BA4\u6240\u6709\u5E94\u7528\u6210\u5458\u90FD\u4E0D\u518D\u9700\u8981\u6B64\u5DE5\u4F5C\u8868\u540E\uFF0C\u518D\u6267\u884C\u6B64\u64CD\u4F5C\u3002")),data:[{text:_l("\u6211\u786E\u8BA4\u5220\u9664\u5DE5\u4F5C\u8868\u548C\u6240\u6709\u6570\u636E"),value:1}],onOk:function(){D({type:B.type,appId:Bn,groupId:Un,projectId:H,worksheetId:De,parentGroupId:B.parentGroupId})}})}},h.createElement("span",{className:"text"},_l("\u5220\u9664\u5DE5\u4F5C\u8868%02029")))))}lo.propTypes={appId:C().string,controls:C().arrayOf(C().shape({})),groupId:C().string,isCharge:C().bool,sheetSwitchPermit:C().arrayOf(C().shape({})),updateWorksheetInfo:C().func,viewId:C().string,worksheetInfo:C().shape({}),reloadWorksheet:C().func,setSheetDescVisible:C().func,isLock:C().bool};var Io=t(22760);const $o=Io.Z;var Qo=t(27941),io=t(97592),No=(0,L.Z)([`
  display: flex;
  padding-left: 10px;
  padding-right: 20px;
  height: 38px;
  background-color: #fff;
  align-items: center;
  position: relative;
`],[`
  display: flex;
  padding-left: 10px;
  padding-right: 20px;
  height: 38px;
  background-color: #fff;
  align-items: center;
  position: relative;
`]),zr=(0,L.Z)([`
  display: flex;
  align-items: center;
  .draftDot {
    position: absolute;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    right: 0;
    top: 0;
    background-color: #f44336;
  }
`],[`
  display: flex;
  align-items: center;
  .draftDot {
    position: absolute;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    right: 0;
    top: 0;
    background-color: #f44336;
  }
`]),no=k.ZP.div(No),xo=k.ZP.div(zr);function fr(Pe){var Bn=Pe.appPkg,Un=Pe.worksheetInfo,Pt=Pe.controls,ne=Pe.sheetSwitchPermit,F=Pe.draftDataCount,B=(0,W.v)(ce.RX.statisticsSwitch,ne),n=(0,W.v)(ce.RX.statisticsSelfSwitch,ne),l=Pe.type,o=Pe.appId,d=Pe.groupId,u=Pe.view,p=Pe.viewId,f=Pe.isCharge,w=Pe.onlyBatchOperate,D=Pe.chartId,G=Pe.updateSheetList,H=Pe.updateFilters,De=Pe.updateWorksheetInfo,je=Pe.refreshSheet,lt=Pe.openNewRecord,Ft=Pe.updateSheetListAppItem,un=Pe.sheetViewData,dn=un===void 0?{}:un,Hn=Pe.sheetFetchParams,ca=Hn===void 0?{}:Hn,da=Pe.sheetViewConfig,Me=da===void 0?{}:da,nt=Pe.filters,He=Pe.quickFilter,ie=Pe.navGroupFilters,We=Pe.filtersGroup,Ue=Pe.updateRows,Ke=Pe.hideRows,ut=Pe.updateViewPermission,wt=Pe.getWorksheetSheetViewSummary,Et=Pe.changePageIndex,et=Pe.refresh,Xe=Pe.refreshWorksheetControls,pt=Pe.addRecord,at=Pe.setHighLightOfRows,ct=Pe.clearChartId,Nt=Pe.clearSelect,mn=Pe.loadDraftDataCount,Qt=mn===void 0?function(){}:mn,Cn=ca.pageSize,_n=ca.sortControls,ra=function(er){return H(er,u)},Nn=Un.worksheetId,Ht=Un.desc,Sn=Un.projectId,Dn=Un.allowAdd,xn=Un.entityName,an=Un.roleType,Qn=Un.advancedSetting,Ln=Qn===void 0?{}:Qn,hn=(0,ve.T3)(o,Nn).name||Un.name||"",Ra=(0,h.useState)(),ha=(0,T.Z)(Ra,2),Pn=ha[0],ea=ha[1],Tn=(0,h.useState)(),sn=(0,T.Z)(Tn,2),Da=sn[0],ia=sn[1],ka=(0,h.useState)(),Sa=(0,T.Z)(ka,2),Yn=Sa[0],Ye=Sa[1],O=(0,h.useState)(),V=(0,T.Z)(O,2),s=V[0],c=V[1],g=(0,h.useState)(!1),x=(0,T.Z)(g,2),S=x[0],X=x[1],re=(0,h.useState)(!1),ee=(0,T.Z)(re,2),ge=ee[0],Se=ee[1],Ze=[1,3].includes(Bn.currentPcNaviStyle)?(0,io.MR)(d):Pe.sheetList,Je=(0,Q.D4)(Nn,Ze)||{},At=(0,W.v)(ce.RX.createButtonSwitch,ne)&&Dn,Jt=dn.rows,Kt=dn.count,ln=dn.permission,Gn=dn.rowsSummary,yn=Me.allWorksheetIsSelected,na=Me.sheetSelectedRows,ga=na===void 0?[]:na;(0,h.useEffect)(function(){Ln.closedrafts!=="1"&&Qt({appId:o,worksheetId:Nn})},[Nn]);var ua=h.createElement($o,{type:l,isCharge:f,permissionType:P().get(Bn,"permissionType"),isLock:P().get(Bn,"isLock"),appId:o,worksheetId:Nn,viewId:p,view:u,count:Kt,controls:Pt,filters:nt,quickFilter:He,pageSize:Cn,navGroupFilters:ie,filtersGroup:We,sortControls:_n,worksheetInfo:Un,permission:(ln||{})[p],allWorksheetIsSelected:yn,rows:Jt,selectedRows:ga,selectedLength:yn?Kt-ga.length:ga.length,updateViewPermission:ut,sheetSwitchPermit:ne,rowsSummary:Gn,updateRows:Ue,hideRows:Ke,getWorksheetSheetViewSummary:wt,reload:function(){Et(1),et()},clearSelect:Nt,refresh:et,refreshWorksheetControls:Xe,addRecord:pt,setHighLightOfRows:at});if((0,fa.Z)("Enter",function(Ga){Ga.ctrlKey&&!document.querySelector(".workSheetNewRecord,.ant-modal-root")&&Ga.target.tagName.toLowerCase()==="body"&&lt()}),w)return ua;var Xn=(0,ve.FL)(),$a=Xn.ln;return h.createElement(h.Fragment,null,h.createElement(no,{className:"sheetHeader"},ua,h.createElement("div",{className:"flex"},!$a&&h.createElement("span",{className:"mLeft10"}),h.createElement("span",{className:vt()("fixed pointer",{hide:!$a})},Bn.currentPcNaviStyle===2?h.createElement(An.Z,{text:h.createElement("span",null,_l("\u9000\u51FA")," (",window.isMacOs?"\u2318 + E":"Shift + E",")"),popupPlacement:"bottom"},h.createElement(ma.Z,{className:"fullRotate hoverGray Font20",icon:"close_fullscreen",onClick:function(){window.disabledSideButton=!0,(0,$t.T8)("/app/"+o+"/"+d)}})):h.createElement(An.Z,{text:h.createElement("span",null,ge?_l("\u9000\u51FA"):_l("\u5C55\u5F00")," (",window.isMacOs?"\u2318 + E":"Shift + E",")"),popupPlacement:"bottom"},h.createElement(ma.Z,{className:vt()("fullRotate hoverGray",ge?"Font20":"Font17"),icon:ge?"close_fullscreen":"open_in_full",onClick:function(){ge?(window.disabledSideButton=!0,Se(!1),document.querySelector("#wrapper").classList.remove("fullWrapper")):(Se(!0),document.querySelector("#wrapper").classList.add("fullWrapper"))}}))),h.createElement("span",{className:"title ellipsis Font17 Gray Bold",title:hn||""},hn||""),Ht?h.createElement(Za.Z,{arrowPointAtCenter:!0,title:null,placement:"bottomLeft",overlayClassName:"sheetDescPopoverOverlay",content:h.createElement("div",{className:"popoverContent"},h.createElement(ya.Z,{data:(0,ve.T3)(o,Nn).description||Ht||"",disabled:!0}))},h.createElement(ma.Z,{icon:"knowledge-message",className:"Hand sheetDesc",onClick:function(){X(!1),ea(!0)}})):h.createElement("span",{className:"InlineBlock"}),h.createElement(Ba.Z,{title:_l("\u5DE5\u4F5C\u8868\u8BF4\u660E"),isCharge:f,visible:Pn,worksheetId:Nn,isEditing:S,setDescIsEditing:X,desc:S?Ht||"":(0,ve.T3)(o,Nn).description||Ht||"",onClose:function(){ea(!1)},onSave:function(er){De({desc:er})}}),h.createElement(lo,{sheet:Je,isCharge:f,appId:o,groupId:d,viewId:p,worksheetInfo:Un,controls:Pt,sheetSwitchPermit:ne,setSheetDescVisible:function(er){X(!0),ea(er)},setEditNameVisible:c,updateWorksheetInfo:De,reloadWorksheet:function(){return je(u)},isLock:P().get(Bn,"isLock"),permissionType:P().get(Bn,"permissionType"),deleteSheet:function(er){if([1,3].includes(Bn.currentPcNaviStyle)){var rr=(0,io.xy)(er.groupId);rr.dispatch((0,Co.deleteSheet)(er))}else Pe.deleteSheet(er)}}),s&&h.createElement(Qa.Z,{projectId:Sn,className:"sheetSelectIconWrap",isActive:!0,name:Un.name,appItem:Je,icon:Je.icon,appId:o,groupId:d,workSheetId:Nn,updateWorksheetInfo:function(er,rr){De(rr)},updateSheetListAppItem:Ft,updateSheetList:G,onCancel:function(){c(!1)}})),p&&h.createElement(xo,null,(0,Q.YO)(u)?null:h.createElement(h.Fragment,null,String(u.viewType)!==ke.B.map&&h.createElement(Ko.Z,{keyWords:nt.keyWords,viewId:p,className:"queryInput worksheetQueryInput",onOk:function(er){ra({keyWords:(er||"").trim()})},onClear:function(){ra({keyWords:""})}}),D?h.createElement("span",{className:vt()("worksheetFilterBtn ThemeColor3 ThemeBGColor6 active")},h.createElement("i",{className:"icon icon-worksheet_filter"}),h.createElement("span",{className:"selectedFilterName ellipsis"},_l("\u6765\u81EA\u7EDF\u8BA1\u56FE\u7684\u7B5B\u9009")),h.createElement("i",{className:"icon icon-close resetFilterBtn ThemeHoverColor2",onClick:function(){location.search=""}})):h.createElement(La.Z,{className:"mRight16 mTop1",chartId:D,isCharge:f,appPkg:Bn,sheetSwitchPermit:ne,appId:o,viewId:p,projectId:Sn,worksheetId:Nn,columns:Pt,filterResigned:!1,onChange:function(er){var rr=er.searchType,gr=er.filterControls;ra({searchType:rr,filterControls:gr})},clearChartId:ct})),!window.isPublicApp&&(B||n&&!md.global.Account.isPortal)&&h.createElement(An.Z,{popupPlacement:"bottom",text:h.createElement("span",null,_l("\u7EDF\u8BA1"))},h.createElement("span",{className:"mRight16 mTop4"},h.createElement(ma.Z,{className:vt()("openStatisticsBtn Gray_9e Font18 pointer",{ThemeColor3:Da}),icon:"worksheet_column_chart",onClick:function(){return ia(!Da)}}))),!window.isPublicApp&&!md.global.Account.isPortal&&!(!(0,W.v)(ce.RX.discussSwitch,ne)&&!(0,W.v)(ce.RX.logSwitch,ne))&&h.createElement(An.Z,{popupPlacement:"bottom",text:h.createElement("span",null,(0,W.v)(ce.RX.discussSwitch,ne)?_l("\u8BA8\u8BBA"):_l("\u65E5\u5FD7"))},h.createElement("span",{className:"mRight16 mTop4"},h.createElement(ma.Z,{className:"Font18 Gray_9e pointer",icon:(0,W.v)(ce.RX.discussSwitch,ne)?"discussion":"draft-box",onClick:function(){return Ye(!Yn)}}))),Ln.closedrafts!=="1"&&h.createElement(Qo.Z,{showFillNext:!0,appId:o,view:u,worksheetInfo:Un,sheetSwitchPermit:ne,isCharge:f,needCache:!1,draftDataCount:F,addNewRecord:Pe.addNewRecord,allowAdd:At,setHighLightOfRows:at}),At&&!Un.isRequestingRelationControls&&h.createElement("span",{style:{backgroundColor:Bn.iconColor||"#2196f3"},className:"addRow",onClick:lt},h.createElement("span",{className:"Icon icon icon-plus Font13 mRight5 White"}),h.createElement("span",{className:"White bold"},(0,ve.T3)(o,Nn).recordName||xn)))),h.createElement(Ya(),{transitionName:"Discussion",transitionEnterTimeout:500,transitionLeaveTimeout:300},Yn&&h.createElement(Ho,{title:Un.name,appId:o,appSectionId:d,viewId:p,projectId:Sn,worksheetId:Nn,onClose:function(){return Ye(!1)},logSwitch:(0,W.v)(ce.RX.logSwitch,ne),discussSwitch:(0,W.v)(ce.RX.discussSwitch,ne)})),h.createElement(Ya(),{transitionName:"StatisticsPanel",transitionEnterTimeout:500,transitionLeaveTimeout:300},Da&&h.createElement(mo,{worksheetId:Nn,viewId:p,appId:o,projectId:Sn,roleType:an,isCharge:f,themeColor:P().get(Bn,"iconColor"),isLock:P().get(Bn,"isLock"),permissionType:P().get(Bn,"permissionType"),onClose:function(){return ia(!1)},sheetSwitchPermit:ne})))}fr.propTypes={appId:C().string,controls:C().arrayOf(C().shape({})),groupId:C().string,isCharge:C().bool,sheetSwitchPermit:C().arrayOf(C().shape({})),updateFilters:C().func,view:C().shape({}),viewId:C().string,worksheetInfo:C().shape({})};const Dr=(0,Ce.$j)(function(Pe){return{appPkg:Pe.appPkg,sheetList:Pe.sheetList.data,app:Pe.sheet.app,worksheetInfo:Pe.sheet.worksheetInfo,filters:Pe.sheet.filters,quickFilter:Pe.sheet.quickFilter,navGroupFilters:Pe.sheet.navGroupFilters,controls:Pe.sheet.controls,sheetSwitchPermit:Pe.sheet.sheetSwitchPermit||[],sheetFetchParams:Pe.sheet.sheetview.sheetFetchParams,sheetViewData:Pe.sheet.sheetview.sheetViewData,sheetViewConfig:Pe.sheet.sheetview.sheetViewConfig,draftDataCount:Pe.sheet.draftDataCount}},function(Pe){return(0,I.DE)((0,me.default)({},P().pick(m,["setRowsEmpty","addRecord","setHighLightOfRows","fetchRows","updateRows","hideRows","selectRows","clearHighLight","setHighLight","updateDefaultScrollLeft","updateSheetColumnWidths","changeWorksheetSheetViewSummaryType","updateViewPermission","getWorksheetSheetViewSummary","changePageIndex","updateControlOfRow","refresh","saveSheetLayout","resetSheetLayout","clearSelect"]),{updateSheetList:Co.updateSheetList,updateWorksheetInfo:j.updateWorksheetInfo,updateSheetListAppItem:Co.updateSheetListAppItem,updateFilters:j.updateFilters,addNewRecord:j.addNewRecord,refreshSheet:j.refreshSheet,deleteSheet:Co.deleteSheet,refreshWorksheetControls:j.refreshWorksheetControls,clearChartId:j.clearChartId,loadDraftDataCount:j.loadDraftDataCount}),Pe)})(fr);var Yr=t(84141),Jo=t(36616);const So=Jo.Z;var wo=t(84450);const To=wo.Z;var Xo=t(87468),sl=t(2591),jr=t(31457);const ho=jr.Z;var bo=t(51040),vo=t(42517),so=t(75704),cl=t(26358),ko=t(3540),co=t(60967),Wr=t(25130),Vo=t(64713),Do=t(31546),qo=t(88902),Wo=t.n(qo),ao=t(93002),_o=t(57082),_r=t(44253),_a=t(46630),$r=t(52877),el=t(83655),tl=t(89014),uo=t(47426),nl=(0,L.Z)([`
  padding-bottom: 24px;
  .lineBox {
    border-top: 1px solid #dddddd;
    margin: 32px 0;
  }
  .title {
    margin-top: 0 !important;
    font-weight: bold;
    font-size: 13px;
    padding-top: 0;
  }
  .configItem {
    align-items: center;
    margin-top: 24px;
    .title {
      width: 80px;
    }
    .ming RadioGroup {
      line-height: 36px;
    }
  }
  .settingTitle {
    font-weight: 400;
    font-size: 13px;
    margin-top: 24px;
  }
  .ming.Dropdown {
    background-color: transparent;
  }
`],[`
  padding-bottom: 24px;
  .lineBox {
    border-top: 1px solid #dddddd;
    margin: 32px 0;
  }
  .title {
    margin-top: 0 !important;
    font-weight: bold;
    font-size: 13px;
    padding-top: 0;
  }
  .configItem {
    align-items: center;
    margin-top: 24px;
    .title {
      width: 80px;
    }
    .ming RadioGroup {
      line-height: 36px;
    }
  }
  .settingTitle {
    font-weight: 400;
    font-size: 13px;
    margin-top: 24px;
  }
  .ming.Dropdown {
    background-color: transparent;
  }
`]),Ro=[2,3,4,5,7,32,33],Ao=k.ZP.div(nl);function Po(Pe){var Bn=Pe.data,Un=Pe.onChange,Pt=Pe.controls,ne=Pt===void 0?[]:Pt,F=(0,to.sD)(ne.filter(function(f){return Ro.includes(f.type)&&/^\w{24}$/.test(f.controlId)})),B=(0,ao.Z)({searchtype:Bn.searchtype||"0",searchcontrol:Bn.searchcontrol,clicksearch:Bn.clicksearch||"0"}),n=(0,T.Z)(B,2),l=n[0],o=l.searchcontrol,d=l.searchtype,u=l.clicksearch,p=n[1];return(0,h.useEffect)(function(){var f=Pe.data,w=Pe.onChange,D=Pe.controls,G=D===void 0?[]:D;p({searchtype:f.searchtype||"0",searchcontrol:f.searchcontrol,clicksearch:f.clicksearch||"0"})},[Pe]),h.createElement(Ao,null,h.createElement("div",{className:"lineBox"}),h.createElement("div",{className:"title pTop0"},_l("\u4E0B\u62C9\u6846\u641C\u7D22\u8BBE\u7F6E")),h.createElement("div",{className:"settingTitle"},_l("\u641C\u7D22\u5B57\u6BB5")),h.createElement(Do.Z,{border:!0,isAppendToBody:!0,value:o,data:F,cancelAble:!0,onChange:function(w){w!=o&&Un({searchcontrol:w})}}),h.createElement("div",{className:"configItem"},h.createElement("div",{className:"settingTitle"},_l("\u641C\u7D22\u65B9\u5F0F")),h.createElement(uo.ZP,{checkedValue:d,className:"mTop8",data:[{value:"0",text:_l("\u6A21\u7CCA\u641C\u7D22")},{value:"1",text:_l("\u7CBE\u786E\u641C\u7D22")}],onChange:function(w){w!=d&&Un({searchtype:w})}})),h.createElement("div",{className:"configItem"},h.createElement(co.Z,{className:"mTop8",checked:u==="1",text:_l("\u5728\u641C\u7D22\u540E\u663E\u793A\u53EF\u9009\u8BB0\u5F55"),onClick:function(w){Un({clicksearch:w?"0":"1"})}})))}var Uo,Qr,Go=(0,L.Z)([`
  width: 400px;
  .boxEditFastFilterCover {
    position: fixed;
    left: 0;
    top: 0;
    bottom: 0;
    right: 0;
    z-index: 12;
    background: rgba(0, 0, 0, 0.2);
  }
  .boxEditFastFilter {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 400px;
    background: #fff;
    box-shadow: 0px 8px 36px 0px rgba(0, 0, 0, 0.24);
    right: 0;
    z-index: 12;
    .ant-radio-checked::after {
      position: absolute;
      top: initial;
      left: 0;
      width: 16px;
      height: 16px;
      bottom: 0;
    }
    .topHeader {
      height: 56px;
      min-height: 56px;
      padding: 0 24px;
      display: flex;
      align-items: center;
      justify-content: start;
      border-bottom: 1px solid #ededed;
      font-size: 16px;
      font-weight: 500;
      span {
        flex: 1;
      }
      .icon-close {
        color: #9d9d9d !important
        &:hover {
          color: #2196f3;
        }
      }
    }
    .con {
      overflow: auto;
      padding: 0 24px;
      .title {
        padding-top: 24px;
        margin-top: 0!important;
        font-weight: bold;
        font-size: 13px;
        font-size: 13px;
      }
      .ant-radio-input {
        display: none !important;
      }
      .active {
        .inputBox {
          border: 1px solid #2196f3;
        }
      }
      .inputBox {
        width: 100%;
        display: flex;
        line-height: 36px;
        height: 36px;
        opacity: 1;
        background: #ffffff;
        border: 1px solid #dddddd;
        border-radius: 4px;
        padding: 0 12px 0 12px;
        .icon {
          line-height: 35px;
        }
        &.timeRange {
          padding: 0 0 0 12px;
          .act{
            width: 18px;
            height: 18px;
            margin-right: 5px;
          }
          .clearTimeRange,
          .changeTimeRange{
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            display:block;
            &.clearTimeRange{
              display:none;
            }
          }
          &:hover{
            .clearTimeRange{
              display:block;
            }
            .changeTimeRange{
              display:none;
            }
          }
        }
        .itemText {
          text-align: left;
          flex: 1;
          overflow: hidden;
          white-space: nowrap;
          text-overflow: ellipsis;
        }
      }
      .Dropdown {
        width: 100%;
        display: flex;
        line-height: 36px;
        height: 36px;
        opacity: 1;
        background: #fff;
        border-radius: 4px;
        margin-top: 8px;
        box-sizing: border-box;
        & > div {
          flex: 1;
        }
        .Dropdown--input {
          padding: 0 8px 0 12px;
          width: 100%;
          display: flex;
          border: 1px solid #dddddd;
          border-radius: 4px;
          height: 36px;
          &.active {
            border: 1px solid #2196f3;
          }
          .value,
          .Dropdown--placeholder {
            flex: 1;
            max-width: 100%;
          }
          .Icon {
            line-height: 36px;
            font-size: 18px;
          }
          .icon-arrow-down-border{
            font-size: 14px;
          }
          .List {
            width: 100%;
            top: 104% !important;
          }
        }
      }
      .ming.Menu {
        width: 100%;
        top: 104% !important;
      }
      .ant-radio-group {
        display: block;
        .ant-radio-wrapper {
          width: 50%;
          display: inline-block;
          margin: 0;
          vertical-align: top;
        }
      }
    }

    .dropTimeWrap {
      .aroundList {
        max-height: 320px;
        overflow: scroll;
        label {
          display: block;
          padding: 8px 15px;
        }
      }
      .Dropdown--hr {
        height: 1px;
        margin-top: 6px;
        margin-bottom: 6px;
        background: #ddd;
        &:last-child {
          display: none;
        }
      }
    }
  }
  .filterDefaultValue{
    div:first-child {
      font-weight: bold;
    }
  }
  .RelateRecordDropdown-selected {
    height: auto;
  }
  input[type='number'] {
    &::-webkit-outer-spin-button,
    &::-webkit-inner-spin-button {
      margin: 0;
      -webkit-appearance: none !important;
    }
  }
  .ming.Input{
    font-size: 13px;
    border: 1px solid #ddd;
    &:hover {
      border-color: #bbb;
    }
    &:focus {
      border-color: #2196f3;
    }
  }
`],[`
  width: 400px;
  .boxEditFastFilterCover {
    position: fixed;
    left: 0;
    top: 0;
    bottom: 0;
    right: 0;
    z-index: 12;
    background: rgba(0, 0, 0, 0.2);
  }
  .boxEditFastFilter {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 400px;
    background: #fff;
    box-shadow: 0px 8px 36px 0px rgba(0, 0, 0, 0.24);
    right: 0;
    z-index: 12;
    .ant-radio-checked::after {
      position: absolute;
      top: initial;
      left: 0;
      width: 16px;
      height: 16px;
      bottom: 0;
    }
    .topHeader {
      height: 56px;
      min-height: 56px;
      padding: 0 24px;
      display: flex;
      align-items: center;
      justify-content: start;
      border-bottom: 1px solid #ededed;
      font-size: 16px;
      font-weight: 500;
      span {
        flex: 1;
      }
      .icon-close {
        color: #9d9d9d !important
        &:hover {
          color: #2196f3;
        }
      }
    }
    .con {
      overflow: auto;
      padding: 0 24px;
      .title {
        padding-top: 24px;
        margin-top: 0!important;
        font-weight: bold;
        font-size: 13px;
        font-size: 13px;
      }
      .ant-radio-input {
        display: none !important;
      }
      .active {
        .inputBox {
          border: 1px solid #2196f3;
        }
      }
      .inputBox {
        width: 100%;
        display: flex;
        line-height: 36px;
        height: 36px;
        opacity: 1;
        background: #ffffff;
        border: 1px solid #dddddd;
        border-radius: 4px;
        padding: 0 12px 0 12px;
        .icon {
          line-height: 35px;
        }
        &.timeRange {
          padding: 0 0 0 12px;
          .act{
            width: 18px;
            height: 18px;
            margin-right: 5px;
          }
          .clearTimeRange,
          .changeTimeRange{
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            display:block;
            &.clearTimeRange{
              display:none;
            }
          }
          &:hover{
            .clearTimeRange{
              display:block;
            }
            .changeTimeRange{
              display:none;
            }
          }
        }
        .itemText {
          text-align: left;
          flex: 1;
          overflow: hidden;
          white-space: nowrap;
          text-overflow: ellipsis;
        }
      }
      .Dropdown {
        width: 100%;
        display: flex;
        line-height: 36px;
        height: 36px;
        opacity: 1;
        background: #fff;
        border-radius: 4px;
        margin-top: 8px;
        box-sizing: border-box;
        & > div {
          flex: 1;
        }
        .Dropdown--input {
          padding: 0 8px 0 12px;
          width: 100%;
          display: flex;
          border: 1px solid #dddddd;
          border-radius: 4px;
          height: 36px;
          &.active {
            border: 1px solid #2196f3;
          }
          .value,
          .Dropdown--placeholder {
            flex: 1;
            max-width: 100%;
          }
          .Icon {
            line-height: 36px;
            font-size: 18px;
          }
          .icon-arrow-down-border{
            font-size: 14px;
          }
          .List {
            width: 100%;
            top: 104% !important;
          }
        }
      }
      .ming.Menu {
        width: 100%;
        top: 104% !important;
      }
      .ant-radio-group {
        display: block;
        .ant-radio-wrapper {
          width: 50%;
          display: inline-block;
          margin: 0;
          vertical-align: top;
        }
      }
    }

    .dropTimeWrap {
      .aroundList {
        max-height: 320px;
        overflow: scroll;
        label {
          display: block;
          padding: 8px 15px;
        }
      }
      .Dropdown--hr {
        height: 1px;
        margin-top: 6px;
        margin-bottom: 6px;
        background: #ddd;
        &:last-child {
          display: none;
        }
      }
    }
  }
  .filterDefaultValue{
    div:first-child {
      font-weight: bold;
    }
  }
  .RelateRecordDropdown-selected {
    height: auto;
  }
  input[type='number'] {
    &::-webkit-outer-spin-button,
    &::-webkit-inner-spin-button {
      margin: 0;
      -webkit-appearance: none !important;
    }
  }
  .ming.Input{
    font-size: 13px;
    border: 1px solid #ddd;
    &:hover {
      border-color: #bbb;
    }
    &:focus {
      border-color: #2196f3;
    }
  }
`]),go=k.ZP.div(Go);function al(Pe){var Bn=Pe.worksheetControls,Un=Bn===void 0?[]:Bn,Pt=Pe.view,ne=Pt===void 0?{}:Pt,F=Pe.updateCurrentView,B=Pe.activeFastFilterId,n=Pe.setActiveFastFilterId,l=Pe.onClose,o=Pe.currentSheetInfo,d=(0,h.useRef)(null),u=(0,ao.Z)({fastFilters:[],control:{},advancedSetting:{},dataType:null,dataControls:{}}),p=(0,T.Z)(u,2),f=p[0],w=f.fastFilters,D=f.control,G=f.advancedSetting,H=f.dataType,De=f.dataControls,je=p[1];if((0,h.useEffect)(function(){var He=ne.fastFilters||[],ie=He.map(function(ut){var wt=Un.find(function(Et){return Et.controlId===ut.controlId})||{};return(0,me.default)({},ut,{isErr:!ut,controlName:wt.controlName,type:(0,_a.Cb)(wt),sourceControl:wt.sourceControl})}),We=Un.find(function(ut){return ut.controlId===B})||{},Ue=ie.find(function(ut){return ut.controlId===B});[10].includes(Ue.type)&&Ue.filterType===0&&(Ue.filterType=2),Ue||(Ue=(0,me.default)({},(0,_a.Nz)(We),{isErr:!We.controlName,controlName:We.controlName,type:(0,_a.Cb)(We),sourceControl:We.sourceControl}));var Ke=Ue.advancedSetting||{};je({fastFilters:He,dataControls:We,control:Ue,advancedSetting:Ke,dataType:Ue.type})},[B,ne.fastFilters]),!D)return"";var lt=function(ie){F(N()(ne,{fastFilters:w.map(function(We,Ue){if(We.controlId===B){var Ke=We;return[].concat((0,q.Z)(_a.cM),(0,q.Z)(_a.CI)).includes(Wo()(ie)[0])?Ke=(0,me.default)({},Ke,{advancedSetting:(0,Z.D0)(Ke,P().pick(ie,_a.cM))},P().omit(ie,_a.cM)):Ke=(0,me.default)({},Ke,ie),Ke}else return(0,Z.zy)(We)}),editAttrs:["fastFilters"]}))},Ft=function(ie){var We=Un.find(function(wt){return wt.controlId===D.controlId})||{},Ue=ie.types.map(function(wt){return(0,me.default)({},wt,{disabled:!!We.encryId&&wt.value!==_r.W5.EQ})});["dateRangeType"].includes(ie.key)&&(Ue=P().get(We,"advancedSetting.showtype")==="5"?Ue.filter(function(wt){return wt.value===5}):P().get(We,"advancedSetting.showtype")==="4"?Ue.filter(function(wt){return wt.value!==3}):Ue);var Ke=(0,_a.Cb)(D),ut=["filterType","dateRangeType"].includes(ie.key)?["filterType"].includes(ie.key)&&ie.keys.includes(Ke)&&D[ie.key]===0?_r.W5.DATE_BETWEEN:D[ie.key]:JSON.parse(G[ie.key])||ie.default;return h.createElement(h.Fragment,null,h.createElement("div",{className:"title"},ie.txt),h.createElement(Do.Z,{data:Ue,value:Ue.find(function(wt){return wt.value===ut})?ut:void 0,className:"flex",onChange:function(Et){var et=(0,te.default)({},ie.key,Et);if(ie.keys.includes(Ke)){var Xe=dn();["dateRangeType"].includes(ie.key)&&(et=(0,me.default)({},et,{advancedSetting:(0,me.default)({},G,{daterange:ur()(Xe.filter(function(pt){return Et==5?_a.A8.includes(pt):Et==4?_a.NG.includes(pt):!0}))})})),["filterType"].includes(ie.key)&&(et=(0,me.default)({},et,{advancedSetting:(0,me.default)({},G,{daterange:ur()(Xe.filter(function(pt){return(0,_a.e6)(We).includes(pt)}))}),dateRangeType:Et!==_r.W5.DATEENUM?void 0:(0,_a.zT)(We)}))}lt((0,me.default)({},et))},isAppendToBody:!0}),!!We.encryId&&h.createElement("span",{className:"Gray_75 mTop8 Block"},_l("\u5F53\u524D\u5B57\u6BB5\u5DF2\u52A0\u5BC6\uFF0C\u53EA\u652F\u6301\u6309\u7167"),(ie.types.find(function(wt){return wt.value===_r.W5.EQ})||{}).text))},un=function(ie){return h.createElement(h.Fragment,null,h.createElement("div",{className:"title"},ie.txt),h.createElement(Vo.default.Group,{onChange:function(Ue){if(ie.key==="allowitem"&&Ue.target.value===1&&_a.pw.keys.includes(H)){var Ke;lt((Ke={},(0,te.default)(Ke,ie.key,Ue.target.value),(0,te.default)(Ke,"filterType",_a.pw.default),Ke))}else lt((0,te.default)({},ie.key,Ue.target.value))},value:JSON.parse(G[ie.key])||ie.default},ie.types.map(function(We){return h.createElement(Vo.default,{value:We.value},We.text,We.txt&&h.createElement("span",{className:"Gray_9e"},We.txt))})))},dn=function(){var ie=G.daterange;try{ie=JSON.parse(ie)}catch(We){ie=[]}return ie},Hn=function He(ie){var We=dn(),Ue=We.length>=_a.qI.default.length;return ie.map(function(Ke,ut){return P().isArray(Ke)?h.createElement(h.Fragment,{key:ut},He(Ke),!!Ke.length&&h.createElement("div",{className:"Dropdown--hr"})):h.createElement(h.Fragment,{key:ut},h.createElement(co.Z,{className:"checkBox",text:Ke.text,checked:Ue||We.includes(Ke.value),onClick:function(){var Et=We;Ke.value==="all"?Et=Ue?[]:_a.qI.default:Et.includes(Ke.value)?Et=Et.filter(function(et){return et!==Ke.value}):Et=Et.concat(Ke.value),lt((0,te.default)({},_a.qI.key,ur()(Et)))}}))})},ca=function(){var ie=P().get(D,"dateRangeType")+"",We=dn().filter(function(Et){return ie==="5"?_a.A8.includes(Et):ie==="4"?_a.NG.includes(Et):!0}),Ue=_a.qI.types,Ke=Un.find(function(Et){return Et.controlId===D.controlId}),ut=P().get(Ke,"advancedSetting.showtype"),wt=We.length>=_a.qI.default.length;return(P().includes(["4","5"],ut)||P().includes(["4","5"],ie))&&(Ue=Ue.map(function(Et){return Et.filter(function(et){return P().includes([ie,ut].includes("5")?_a.A8:_a.NG,et.value)})}).filter(function(Et){return Et.length}),wt=[ie,ut].includes("5")?We.length>=_a.A8.length:We.length>=_a.NG.length),h.createElement(h.Fragment,null,h.createElement("div",{className:"title"},_a.qI.txt),h.createElement(_o.Z,{className:"w100 dropTimeWrap",downElement:h.createElement("div",null,Hn(Ue))},h.createElement("div",{className:"Dropdown--input Dropdown--border mTop6"},h.createElement("div",{className:"inputBox timeRange flexRow alignItemsCenter"},h.createElement("div",{className:vt()("itemText flex",{Gray_bd:We.length<=0})},wt?_l("\u5168\u9009"):We.length<=0?_l("\u8BF7\u9009\u62E9"):_l("\u9009\u4E86 %0 \u4E2A",We.length)),h.createElement("div",{className:"act Relative"},h.createElement(ma.Z,{icon:"arrow-down-border",className:"Font14 Gray_9e changeTimeRange"}),h.createElement(ma.Z,{icon:"cancel1",className:"Font14 Gray_9e clearTimeRange Hand",onClick:function(et){et.stopPropagation(),lt({advancedSetting:(0,me.default)({},G,{daterange:"[]"})})}}))))))},da=function(){var ie=G.allowscan;return h.createElement(co.Z,{className:"checkBox InlineBlock mTop18",text:_l("App\u652F\u6301\u626B\u7801\u67E5\u8BE2"),checked:ie==="1",onClick:function(){lt({allowscan:ie==="1"?"":"1"})}})},Me=function(){return h.createElement(h.Fragment,null,h.createElement("div",{className:"title"},_l("\u4F4D\u6570")),h.createElement(ko.Z,{type:"number",className:"w100 mTop8 placeholderColor",value:P().get(G,"limit"),placeholder:_l("\u8BF7\u8F93\u5165\u6570\u503C"),onChange:function(We){je({advancedSetting:(0,me.default)({},G,{limit:We})})},onBlur:function(We){var Ue=We.target.value.trim();lt({limit:Ue})}}))},nt=function(ie){F(N()(ne,{fastFilters:ie,advancedSetting:ie.length>0?ne.advancedSetting:(0,me.default)({},G,{clicksearch:"0",enablebtn:"0"}),editAttrs:["fastFilters","advancedSetting"]}))};return h.createElement(h.Fragment,null,h.createElement("div",{className:"con flex"},h.createElement("div",{className:"title"},_l("\u7B5B\u9009\u5B57\u6BB5")),h.createElement($r.Z,{renderInParent:!0,className:"addControl",columns:(0,Rt.oF)(Un,o.switches||[]).filter(function(He){return(_a.Dv.includes(He.type)||He.type===30&&_a.Dv.includes((0,_a.Cb)(He)))&&!w.map(function(ie){return ie.controlId}).includes(He.controlId)}),onAdd:function(ie){var We=(0,_a.Nz)(ie);nt(w.map(function(Ue){return Ue.controlId===B?We:Ue})),n(ie.controlId)},style:{width:"352px"},offset:[0,1],classNamePopup:"addControlDrop",comp:function(){var ie=(0,to.hB)((Un.find(function(We){return We.controlId===D.controlId})||{}).type,!1);return h.createElement("div",{className:"inputBox mTop6",ref:d},ie?h.createElement(ma.Z,{icon:ie,className:"mRight12 Font18 Gray_75"}):null,h.createElement("div",{className:"itemText"},D.controlName),h.createElement(ma.Z,{icon:"arrow-down-border",className:"mLeft12 Font14 Gray_9e"}))}}),[_a.C0,_a.O$,_a.xW,_a.Eu,_a.zz].map(function(He){if(He.keys.includes(H))return Ft(He)}),_a.mC.keys.includes(H)&&[_r.W5.DATEENUM].includes(D.filterType)&&Ft(_a.mC),_a.C0.keys.includes(H)&&_r.W5.TEXT_ALLCONTAIN===D[_a.C0.key]&&h.createElement("div",{className:"mTop10 Gray_75"},_l("- \u4F7F\u7528\u540C\u65F6\u5305\u542B\u65F6\uFF0C\u641C\u7D22\u5185\u5BB9\u4E2D\u7684\u7A7A\u683C\u5C06\u7528\u4E8E\u5206\u8BCD"),h.createElement("br",null),_l("- \u5728\u5927\u6570\u636E\u91CF\u65F6\u4F7F\u7528\u5305\u542B\u3001\u540C\u65F6\u5305\u542B\u6761\u4EF6\u53EF\u80FD\u975E\u5E38\u7F13\u6162\uFF0C\u5EFA\u8BAE\u4F7F\u7528\u7B49\u4E8E\uFF0C\u5E76\u521B\u5EFA\u7D22\u5F15\u6765\u4F18\u5316\u6027\u80FD\u3002")),[_a.ZX].map(function(He){if(He.keys.includes(H)){var ie=D.advancedSetting,We=ie===void 0?{}:ie,Ue=D.controlId,Ke=Un.find(function(et){return et.controlId===Ue})||{},ut=We.navshow,wt=We.navfilters,Et=wt===void 0?[]:wt;return h.createElement(tl.Z,{canShowNull:!0,fromCondition:"fastFilter",params:{types:el.d9.filter(function(et){return et.value!=="1"}).filter(function(et){var Xe=Ke.type===30?Ke.sourceControlType:Ke.type;return[9,10,11,26].includes(Xe)?et.value!=="3":!0}),txt:_l("\u663E\u793A\u9879")},value:ut,onChange:function(Xe){lt({advancedSetting:(0,me.default)({},We,Xe)})},advancedSetting:We,navfilters:Et,filterInfo:{allControls:Ke.relationControls,globalSheetInfo:P().pick(o,["appId","groupId","name","projectId","roleType","worksheetId","switches"]),globalSheetControls:[].concat((0,q.Z)(ne.fastFilters.map(function(et){return Un.find(function(Xe){return Xe.controlId===et.controlId})})),[ne.navGroup&&ne.navGroup.length>0?(0,me.default)({},Un.find(function(et){return et.controlId===ne.navGroup[0].controlId}),{isNavGroup:!0}):null]).filter(function(et){return!!et&&P().get(et,"controlId")!==B}),columns:Un,viewControl:Ue}})}}),[_a.dZ].map(function(He){if(He.keys.includes(H))return un(He)}),[_a.pw].map(function(He){if(He.keys.includes(H)&&([26,27,48].includes(H)&&De.enumDefault===1||H===29&&De.enumDefault===2||H===10)&&Number(G.allowitem)===2)return Ft(He)}),[_a.Mg,_a.t8].map(function(He){if(He.keys.includes(H))return un(He)}),_a.qI.keys.includes(H)&&ca(),_a.VZ.keys.includes(H)&&[_r.W5.START,_r.W5.END].includes(D.filterType)&&Me(),_a.Vs.keys.includes(H)&&da(),[29].includes(H)&&P().get(G,"navshow")!=="2"&&h.createElement(Po,{controls:De.relationControls,data:G,onChange:function(ie){lt((0,me.default)({},ie))}})))}var rl=(0,i.Z)(Uo=function(Pe){(0,U.default)(Bn,Pe);function Bn(){return(0,v.default)(this,Bn),(0,de.default)(this,(Bn.__proto__||ye()(Bn)).apply(this,arguments))}return(0,se.default)(Bn,[{key:"render",value:function(){return h.createElement(al,this.props)}}]),Bn}(h.Component))||Uo,Fo=(0,Vr.Z)(Qr=function(Pe){(0,U.default)(Bn,Pe);function Bn(){return(0,v.default)(this,Bn),(0,de.default)(this,(Bn.__proto__||ye()(Bn)).apply(this,arguments))}return(0,se.default)(Bn,[{key:"render",value:function(){var Pt=this;return this.props.showFastFilter?h.createElement(go,null,h.createElement("div",{className:"boxEditFastFilterCover",onClick:function(){Pt.props.onClose()}}),h.createElement("div",{className:"boxEditFastFilter flexColumn"},h.createElement("div",{className:"topHeader"},h.createElement("span",{className:""},_l("\u7B5B\u9009\u8BBE\u7F6E")),h.createElement("i",{className:"icon icon-close Hand Font20",onClick:function(){Pt.props.onClose()}})),h.createElement(rl,this.props))):""}}]),Bn}(h.Component))||Qr,Wn=t(91555),Ae=(0,L.Z)([`
  display: flex;
  align-items: center;
  flex-direction: revert;
  flex-shrink: 0;
  height: 37px;
  padding: 0 20px 0 20px;
  border-bottom: 1px solid #e0e0e0;

  .detailAllCount {
    padding-left: 16px;
    font-size: 14px;
    color: #888;
  }
`],[`
  display: flex;
  align-items: center;
  flex-direction: revert;
  flex-shrink: 0;
  height: 37px;
  padding: 0 20px 0 20px;
  border-bottom: 1px solid #e0e0e0;

  .detailAllCount {
    padding-left: 16px;
    font-size: 14px;
    color: #888;
  }
`]),Ge=k.ZP.div(Ae);function A(Pe){var Bn=Pe.appId,Un=Pe.groupId,Pt=Pe.view,ne=Pe.viewId,F=Pe.isCharge,B=Pe.chartId,n=Pe.filters,l=Pe.quickFilter,o=Pe.navGroupFilters,d=Pe.worksheetInfo,u=Pe.controls,p=Pe.views,f=Pe.sheetSwitchPermit,w=Pe.sheetViewData,D=Pe.sheetFetchParams,G=Pe.sheetViewConfig,H=Pe.buttons,De=Pe.sheetButtons,je=Pe.viewConfigVisible,lt=Pe.setViewConfigVisible,Ft=Pe.viewConfigTab,un=Pe.setViewConfigTab,dn=Pe.searchData,Hn=Pe.changePageIndex,ca=Pe.changePageSize,da=Pe.refreshSheet,Me=Pe.saveView,nt=Pe.updateView,He=Pe.updateViews,ie=Pe.loadCustomButtons,We=Pe.updateCustomButtons,Ue=Pe.addMultiRelateHierarchyControls,Ke=Pe.updateWorksheetControls,ut=Pe.updateSearchRecord,wt=Pe.appPkg,Et=Pe.updateCurrentViewState,et=Pe.updateViewShowcount,Xe=Pe.detailView,pt=d.worksheetId,at=d.projectId,ct=w.count,Nt=w.pageCountAbnormal,mn=w.rowsSummary,Qt=D.pageIndex,Cn=D.pageSize,_n=D.sortControls,ra=G.allWorksheetIsSelected,Nn=G.sheetSelectedRows,Ht=G.sheetHiddenColumns,Sn=(0,h.useState)(),Dn=(0,T.Z)(Sn,2),xn=Dn[0],an=Dn[1],Qn=(0,h.useState)(!1),Ln=(0,T.Z)(Qn,2),hn=Ln[0],Ra=Ln[1],ha=(0,h.useState)(),Pn=(0,T.Z)(ha,2),ea=Pn[0],Tn=Pn[1],sn=(0,h.useState)(),Da=(0,T.Z)(sn,2),ia=Da[0],ka=Da[1],Sa=(0,h.useState)(),Yn=(0,T.Z)(Sa,2),Ye=Yn[0],O=Yn[1],V=(0,h.useState)(),s=(0,T.Z)(V,2),c=s[0],g=s[1],x=(0,h.useState)(),S=(0,T.Z)(x,2),X=S[0],re=S[1],ee=(0,W.v)(ce.RX.sysControlSwitch,f);return(0,h.useEffect)(function(){if(["gallery","board"].includes(ke.B[Pe.view.viewType])){var ge=P().get(Pe.view,"advancedSetting.showcount"),Se=localStorage.getItem("showcount_"+ne);Se?Se!==Pe.fieldShowCount&&et(Se):et(ge)}},[Pe.view]),(0,h.useEffect)(function(){re(P().find(De,function(ge){return ge.btnId===Ye}))},[Ye,De]),h.createElement(Ge,null,h.createElement(ho,{worksheetInfo:d,sheetSwitchPermit:f,isCharge:F,appId:Bn,viewList:p,worksheetControls:u,currentViewId:ne,worksheetId:pt,isLock:P().get(wt,"isLock"),updateCurrentView:function(Se){Me(ne,P().pick(Se,Se.editAttrs||[]))},changeViewDisplayType:function(Se){Me(ne,Se)},updateViewList:function(Se){He(Se)},onAddView:function(Se,Ze){He(Se),[0,3,6,21].includes(Number(Ze.viewType))&&lt(!0),(0,$t.T8)("/app/"+Bn+"/"+Un+"/"+pt+"/"+Ze.viewId)},onShare:function(){var Se=F||(0,Ar.g9)(P().get(wt,"permissionType"))||P().get(wt,"permissionType")===ke.lt.DEVELOPERS_ROLE;(0,Wn.K)({from:"view",isCharge:Se,title:_l("\u5206\u4EAB\u89C6\u56FE"),isPublic:Pt.shareRange===2,hidePublicShare:!((0,W.v)(ce.RX.viewShareSwitch,f,ne)&&!md.global.Account.isPortal),params:{appId:Bn,worksheetId:pt,viewId:ne,title:Pt.name},getCopyContent:function(Je,At){return Je==="private"?At:At+" "+d.name+"-"+Pt.name},onUpdate:function(Je){nt(N()({},Pt,Je))}})},onExport:function(){var Se=F||(0,Ar.g9)(P().get(wt,"permissionType"));(0,Xo.O)({sheetHiddenColumns:Ht,allCount:ct,allWorksheetIsSelected:ra,appId:Bn,exportView:Pt,worksheetId:pt,projectId:at,chartId:B,searchArgs:n,selectRowIds:Nn.map(function(Ze){return Ze.rowid}),sheetSwitchPermit:f,columns:Se?u.filter(function(Ze){return Ze.controlId!=="rowid"}):(0,Q.P7)(u,Pt.controls,!1).filter(function(Ze){return(Ze.controlPermissions&&Ze.controlPermissions[0]==="1"||!Ze.controlPermissions)&&Ze.controlId!=="rowid"}),downLoadUrl:d.downLoadUrl,worksheetSummaryTypes:mn.types,quickFilter:l,navGroupFilters:o,sortControls:_n,isCharge:Se,hideStatistics:!1})},onExportAttachment:function(){var Se=F||(0,Ar.g9)(P().get(wt,"permissionType"));(0,sl._)({appId:Bn,worksheetId:pt,viewId:ne,attachmentControls:Se?u.filter(function(Ze){return Ze.type===14}):(0,Q.P7)(u,Pt.controls).filter(function(Ze){return Ze.controlPermissions&&Ze.controlPermissions[0]==="1"&&Ze.type===14}),quickFilter:l,searchArgs:n,navGroupFilters:o,selectRowIds:Nn.map(function(Ze){return Ze.rowid}),isCharge:Se})},onRemoveView:function(Se,Ze){if(Ze===ne){var Je=Se[0];(0,$t.T8)("/app/"+Bn+"/"+Un+"/"+pt+"/"+Je.viewId),He(Se)}else He(Se)},onViewConfigVisible:function(){lt(!0)},getNavigateUrl:function(Se){return"/app/"+Bn+"/"+Un+"/"+pt+"/"+Se.viewId}}),(Number(Pt.viewType)===2&&P().includes([0,1],Number(Pt.childType))||P().includes([5,8],Number(Pt.viewType)))&&h.createElement(vo.default,{queryKey:dn.queryKey,data:dn.data,onSearch:function(Se){ut(Pt,Se)},onClose:function(){ut(Pt,null)}},h.createElement(An.Z,{popupPlacement:"bottom",text:h.createElement("span",null,_l("\u67E5\u627E"))},h.createElement("i",{className:vt()("icon icon-search Gray_9e Font18 pointer ThemeHoverColor3 mTop2 mRight15")}))),h.createElement(An.Z,{popupPlacement:"bottom",text:h.createElement("span",null,_l("\u5237\u65B0\u89C6\u56FE"))},h.createElement("i",{className:vt()("icon icon-task-later refresh Gray_9e Font18 pointer ThemeHoverColor3 mTop2"),onClick:function(){da(Pt,{updateWorksheetControls:!0,isRefreshBtn:!0})}})),["gallery","board"].includes(ke.B[Pt.viewType])&&!!P().get(Pt,"advancedSetting.showcount")&&h.createElement(Yr.Z,{key:ne+"_"+Pt.displayControls.length+"_"+Pe.fieldShowCount,style:{width:120,paddingRight:0},numStyle:{textAlign:"right"},showNumber:!0,className:"mLeft12",readonly:!1,disabled:!1,value:Pe.fieldShowCount>Pt.displayControls.length?Pt.displayControls.length:Pe.fieldShowCount,showInput:!1,showTip:!0,tipDirection:void 0,min:0,max:Pt.displayControls.length,step:1,itemnames:"",itemcolor:{type:1,color:"#9e9e9e"},onChange:function(Se){et(Se)}}),Number(Pt.viewType)===6&&Number(Pt.childType)===2&&h.createElement("div",{className:"detailAllCount"},_l("\u5171")+Xe.detailViewRowsCount+_l("\u6761")),Number(Pt&&Pt.viewType)===0&&h.createElement(bo.Z,{abnormalMode:Nt,className:"pagination",pageIndex:Qt,pageSize:Cn,allCount:ct,changePageSize:ca,changePageIndex:Hn,onPrev:function(){Hn(Qt-1)},onNext:function(){Hn(Qt+1)}}),je&&h.createElement(So,{appId:Bn,currentSheetInfo:d,view:Pt,projectId:at,worksheetId:pt,worksheetControls:u,sheetSwitchPermit:f,updateViewShowcount:et,onClickAwayExceptions:[".ant-select-dropdown",".ChooseWidgetDialogWrap",".dropConOption",".dropdownTrigger",".worksheetFilterColumnOptionList",".selectUserBox","#dialogBoxSelectUser_container",".PositionContainer-wrapper",".deleteCustomBtnDialog",".mui-dialog-container",".createCustomBtnCon",".showBtnFilterDialog",".doubleConfirmDialog",".appointDialog",".chooseWidgetDialog",".rc-trigger-popup",".fullScreenCurtain",".errerDialogForAppoint",".mobileDepartmentPickerDialog",".selectUserFromAppDialog",".addHierarchyRelate",".hideControlsWrap",".ant-cascader-menus",".ant-picker-dropdown",".ant-tree-select-dropdown","#chat",".boxEditFastFilter",".boxEditFastFilterCover",".ant-picker-dropdown",".quickAddControlDialog",".ant-modal-root",".ant-tooltip",".deleteHoverTips",".CodeMirror-hints",".Tooltip-wrapper",".selectRoleDialog"],onClickAway:function(){return lt(!1)},columns:u.filter(function(ge){return ee?ge.viewDisplay||!("viewDisplay"in ge):(ge.viewDisplay||!("viewDisplay"in ge))&&!P().includes(["wfname","wfstatus","wfcuaids","wfrtime","wfftime","wfdtime","wfcaid","wfctime","wfcotime"],ge.controlId)}),viewConfigTab:Ft,setViewConfigTab:un,onClose:function(){return lt(!1)},updateCurrentView:function(Se,Ze){Me(ne,P().pick(Se,[].concat((0,q.Z)(Se.editAttrs||[]),["editAdKeys"])),Ze),(P().get(Se,"viewControls")||[]).length>(P().get(Pt,"viewControls")||[]).length&&Ue(Se.viewControls.slice(-1).map(function(Je){return Je.worksheetId}))},updateCurrentViewState:Et,onShowCreateCustomBtn:function(Se,Ze,Je,At){an(Se),ka(Ze),O(Je),Ra(At)},setFastFilter:function(Se,Ze){Tn(Se),g(Ze)},viewId:ne,btnList:De,refreshFn:function(Se,Ze,Je,At){ie({worksheetId:Se,appId:Ze,viewId:Je,rowId:At})},updateWorksheetControls:Ke,hasCharge:F||(0,Ar.g9)(P().get(wt,"permissionType"))||P().get(wt,"permissionType")===ke.lt.DEVELOPERS_ROLE}),xn&&h.createElement(To,{onClickAwayExceptions:[".ChooseWidgetDialogWrap",".showBtnFilterDialog",".doubleConfirmDialog",".appointDialog",".chooseWidgetDialog",".rc-trigger-popup",".fullScreenCurtain",".errerDialogForAppoint",".mobileDepartmentPickerDialog","#dialogBoxSelectUser_container",".selectUserFromAppDialog",".selectUserBox",".dropdownTrigger",".worksheetFilterColumnOptionList",".PositionContainer-wrapper",".mui-dialog-container",".mdAlertDialog",".ant-cascader-menus",".ant-tree-select-dropdown",".ant-picker-dropdown",".ant-modal-root",".ant-tooltip",".CodeMirror-hints",".ck",".ant-picker-dropdown",".Tooltip",".selectRoleDialog"],onClickAway:function(){return an(!1)},sheetSwitchPermit:f,isEdit:ia,onClose:function(){return an(!1)},columns:u.filter(function(ge){return ge.viewDisplay||!("viewDisplay"in ge)}).map(function(ge){return(0,cl.BM)(ge)}),btnId:Ye,btnDataInfo:X,isListOption:hn,btnList:De,projectId:at,view:Pt,worksheetControls:u,currentSheetInfo:d,viewId:ne,appId:Bn,worksheetId:pt,workflowId:"",refreshFn:function(Se,Ze,Je,At){ie({worksheetId:Se,appId:Ze,viewId:Je,rowId:At})},updateCustomButtons:We}),ea&&h.createElement(Fo,{currentSheetInfo:d,view:Pt,worksheetControls:u,onClickAwayExceptions:[".addControlDrop",".nano",".mui-dialog-container",".ant-select-dropdown",".rc-trigger-popup",".selectize-dropdown",".selectUserBox",".ant-picker-dropdown"],showFastFilter:ea,onClickAway:function(){return Tn(!1)},activeFastFilterId:c,onClose:function(){Tn(!1)},setActiveFastFilterId:function(Se){g(Se)},updateCurrentView:function(Se){Me(ne,P().pick(Se,Se.editAttrs||[]))}}))}A.propTypes={appId:C().string,worksheetInfo:C().shape({}),controls:C().arrayOf(C().shape({})),groupId:C().string,isCharge:C().bool,sheetSwitchPermit:C().arrayOf(C().shape({})),view:C().shape({}),viewId:C().string,views:C().arrayOf(C().shape({})),updateView:C().func,updateViews:C().func,refreshSheet:C().func,changePageIndex:C().func,changePageSize:C().func};const M=(0,Ce.$j)(function(Pe){return{views:Pe.sheet.views,sheetList:Pe.sheet.sheetList,app:Pe.sheet.app,worksheetInfo:Pe.sheet.worksheetInfo,filters:Pe.sheet.filters,quickFilter:Pe.sheet.quickFilter,navGroupFilters:Pe.sheet.navGroupFilters,controls:Pe.sheet.controls,sheetSwitchPermit:Pe.sheet.sheetSwitchPermit||[],detailView:Pe.sheet.detailView,sheetViewData:Pe.sheet.sheetview.sheetViewData,sheetFetchParams:Pe.sheet.sheetview.sheetFetchParams,sheetViewConfig:Pe.sheet.sheetview.sheetViewConfig,buttons:Pe.sheet.buttons,sheetButtons:Pe.sheet.sheetButtons,searchData:(0,y.Im)(Pe.sheet),appPkg:Pe.appPkg,fieldShowCount:Pe.sheet.fieldShowCount}},function(Pe){return(0,I.DE)({changePageSize:m.changePageSize,changePageIndex:m.changePageIndex,refreshSheet:j.refreshSheet,saveView:j.saveView,updateView:j.updateView,updateViews:j.updateViews,loadCustomButtons:j.loadCustomButtons,updateCustomButtons:j.updateCustomButtons,addMultiRelateHierarchyControls:so.addMultiRelateHierarchyControls,updateWorksheetControls:j.updateWorksheetControls,updateSearchRecord:j.updateSearchRecord,updateCurrentViewState:j.updateCurrentViewState,updateViewShowcount:j.updateViewShowcount},Pe)})(A);var Ve=t(15678);function Oe(Pe){return h.createElement(Ve.Z,Pe)}Oe.propTypes={emptyText:Te.string,width:Te.number,projectId:Te.string,filters:(0,Te.arrayOf)((0,Te.shape)({})),view:(0,Te.shape)({}),controls:(0,Te.arrayOf)((0,Te.shape)({})),updateQuickFilter:Te.func,resetQuickFilter:Te.func};const it=(0,Ce.$j)(function(Pe){return{controls:Pe.sheet.controls.map(function(Bn){return(0,me.default)({},Bn)}),navGroupFilters:Pe.sheet.navGroupFilters,base:Pe.sheet.base}},function(Pe){return(0,I.DE)({refreshSheet:j.refreshSheet,updateQuickFilter:j.updateQuickFilter,resetQuickFilter:j.resetQuickFilter},Pe)})(Oe);var ot=t(77632),qe=k.ZP.div(function(Pe){var Bn=Pe.width;return`
  width: `+Bn+`px;
  transition: width 0.2s;
  // border-top: 1px solid #e0e0e0;
  position:relative;
  z-index: 3;
  .searchBar {
    width: `+Bn+`px;
    padding: 0 12px;
    height: 34px;
    .icon {
      line-height: 35px;
      font-size: 20px;
      color: #bdbdbd;
      &.icon-close {
        cursor: pointer;
      }
      &.icon-search{
        &:hover{
          color:#bdbdbd;
        }
      }
      &:hover{
        color: #2196f3;
      }
    }
    input {
      width: 100%;
      height: 36px;
      border: none;
      padding-left: 6px;
      font-size: 13px;
    }
  }
  .nano-content{
    max-height: calc(100% - 40px);
  }
  .groupWrap {
    width: 100%;
    .gList {
      width:auto;
      font-weight: 400;
      padding:0px 6px;
      line-height: 32px;
      .count {
        padding-left: 10px;
        font-size: 13px;
        color: #9e9e9e;
        line-height: 32px;
      }
      &.current {
        .gListDiv{
          background: #e3f3ff;
          &:hover{
            background: #e3f3ff;
          }
        }
      }
      .gListDiv{
        border-radius: 3px;
        padding-left: 6px;
        position:relative;
        height: 32px;
        &:hover{
          background: rgba(0,0,0,0.04);
        }
        .count{
          position: absolute;
          right: 6px;
        }
      }
      .option {
        left: -3px;
        top: 1px;
        height: 30px;
        width: 3px;
        border-radius: 3px 0 0 3px;
        position: absolute;
      }
      .optionTxt {
        width: 100%;
      }
      &.hasCount{
        .optionTxt {
          max-width: calc(100% - 40px);
        }
      }
    }
    &.isTree{
      overflow: auto;
      .canScroll {
        width: auto;
        height: auto;
        display: inline-block;
        min-width: 100%;
      }
      .gList {
        white-space: nowrap;
      }
      .count{
        position: initial!important;
      }
      .arrow{
        display: inline-block;
        width: 22px;
      }
      .iconArrow{
        width: 18px;
        height: 18px;
        display: inline-block;
        line-height: 18px;
        color: #9e9e9e;
        text-align: center;
        border-radius: 4px;
        &:hover{
            background: rgba(0,0,0,0.06);
            color: #757575;
          }
        }
      }
    }
  }
`});function It(Pe){var Bn=Pe.views,Un=Bn===void 0?[]:Bn,Pt=Pe.width,ne=Pe.worksheetInfo,F=Pe.isOpenGroup,B=Pe.base,n=Pe.controls,l=Pe.updateGroupFilter,o=Pe.filters,d=Pe.quickFilter,u=Pe.navGroupCounts,p=Pe.getNavGroupCount,f=Pe.sheetSwitchPermit,w=f===void 0?[]:f,D=Pe.navGroupFilters,G=(0,h.useRef)(null),H=B.appId,De=B.worksheetId,je=B.viewId,lt=P().find(Un,{viewId:je})||!je&&Un[0]||{},Ft=P().isEmpty(lt.navGroup)?{}:lt.navGroup[0],un=(0,h.useState)(),dn=(0,T.Z)(un,2),Hn=dn[0],ca=dn[1],da=(0,h.useState)([]),Me=(0,T.Z)(da,2),nt=Me[0],He=Me[1],ie=(0,h.useState)(""),We=(0,T.Z)(ie,2),Ue=We[0],Ke=We[1],ut=(0,h.useState)(""),wt=(0,T.Z)(ut,2),Et=wt[0],et=wt[1],Xe=(0,h.useState)([]),pt=(0,T.Z)(Xe,2),at=pt[0],ct=pt[1],Nt=(0,h.useState)(!0),mn=(0,T.Z)(Nt,2),Qt=mn[0],Cn=mn[1];(0,h.useEffect)(function(){Ke(""),et(""),ca("")},[Ft,Ft.controlId,Ft.viewId,Ft.isAsc]),(0,h.useEffect)(function(){P().isEmpty(D)&&Ke("")},[D]),(0,h.useEffect)(function(){var ha=n.find(function(Pn){return Pn.controlId===Ft.controlId})||{};ha.type===29&&(0,ve.aq)(lt).navshow==="1"&&F&&p(),F&&Ht()},[Ft.controlId,Ft.viewId,Ft.isAsc,F,(0,ve.aq)(lt).navfilters,(0,ve.aq)(lt).navshow,(0,ve.aq)(lt).showallitem,(0,ve.aq)(lt).allitemname,(0,ve.aq)(lt).shownullitem,(0,ve.aq)(lt).nullitemname]),(0,h.useEffect)(function(){F&&p()},[o,d,F]),(0,h.useEffect)(function(){Ht()},[Hn]),(0,h.useEffect)(function(){var ha=n.find(function(Tn){return Tn.controlId===Ft.controlId})||{},Pn=(0,ve.aq)(lt),ea=Pn.navshow;ha.type===29&&ea==="1"&&Ht()},[u]);var _n=(0,h.useCallback)(P().throttle(function(ha){var Pn=ha.trim();ca(Pn),hn("")},300),[]);(0,h.useEffect)(function(){if(!Ft.controlId||!Ue)l([],lt);else{var ha=n.find(function(Tn){return Tn.controlId===Ft.controlId})||{},Pn=P().omit(Ft,["isAsc"]),ea=2;[29,35].includes(ha.type)&&(ha.type===29&&!Ft.viewId?ea=24:ea=Ft.filterType===11?Ft.filterType:24),Ue==="null"&&(ea=_r.W5.ISNULL),l([(0,me.default)({},Pn,{values:Ue==="null"?[]:[Ue],navNames:[Et],dataType:ha.type,filterType:ea})],lt)}},[Ue,Ft]);var ra=function(){var Pn=n.find(function(ea){return ea.controlId===Ft.controlId})||{};return Pn.type===35||Pn.type===29&&Ft.viewId},Nn=function(){return!Hn&&ra()},Ht=function(){G&&G.current&&(G.current.value=Hn);var Pn=Ft.controlId,ea=(0,ve.aq)(lt),Tn=ea.navfilters,sn=Tn===void 0?"[]":Tn,Da=ea.navshow;if(Pn==="wfstatus"&&!(0,W.v)(ce.RX.sysControlSwitch,w)&&(Da="0"),ct([]),Pn){try{sn=JSON.parse(sn)}catch(ia){sn=[]}Da==="2"&&sn.length<=0?(Cn(!1),He([])):(Cn(!0),Sn())}else{He([]);return}},Sn=function(Pn){var ea=Pn||{},Tn=ea.rowId,sn=ea.cb,Da=Hn,ia=[],ka=Ft,Sa=n.find(function(V){return V.controlId===ka.controlId})||{};if([29,35].includes(Sa.type)){var Yn=(0,ve.aq)(lt),Ye=Yn.navshow;Sa.type===29&&Ye==="1"&&!Da?Qn({filterData:nt,data:u.filter(function(V){return!["all",""].includes(V.key)}).map(function(V){return{value:V.key,txt:V.name,isLeaf:!1}}),rowId:Tn,cb:sn}):an({worksheetId:Sa.dataSource,viewId:Sa.type===29?ka.viewId:Sa.viewId,rowId:Tn,cb:sn})}else{var O=(n.find(function(V){return V.controlId===ka.controlId})||{}).options||[];ia=ka.isAsc?O:O.slice().reverse(),ia=ia.filter(function(V){return!V.isDeleted}).map(function(V){return(0,me.default)({},V,{txt:V.value,value:V.key})}).filter(function(V){return Da?V.txt.indexOf(Da)>=0:!0}),He(ia),Cn(!1)}},Dn=function(Pn,ea,Tn){var sn=n.find(function(ia){return ia.controlId===Ft.controlId})||{};if(Hn&&(sn.type===35||sn.type===29&&Ft.viewId&&Tn)){var Da=JSON.parse(Pn.path);return Da.map(function(ia,ka){var Sa=ka===Da.length-1;return ia.indexOf(Hn)>-1?h.createElement(h.Fragment,{key:ka},h.createElement("span",{className:"ThemeColor3"},ia),!Sa&&h.createElement("span",null," / ")):h.createElement(h.Fragment,{key:ka},ia,!Sa&&h.createElement("span",null," / "))})}return ea?(0,Ct.Z)(N()({},ea,{value:Pn[ea.controlId]})):_l("\u672A\u547D\u540D")},xn=function ha(Pn){var ea=Pn.worksheetId,Tn=Pn.viewId,sn=Pn.rowId,Da=Pn.cb;if(F){var ia=n.find(function(s){return s.controlId===Ft.controlId})||{},ka=ia.type===35?{getType:10}:{appId:H,searchType:1,getType:Tn?10:7,viewId:Tn||ia.viewId},Sa=(0,ve.aq)(lt),Yn=Sa.navfilters,Ye=Yn===void 0?"[]":Yn,O=Sa.navshow;try{Ye=JSON.parse(Ye)}catch(s){Ye=[]}if(ia.type!==35&&Ye.length>0&&["3"].includes(O)){var V=Ye.map(function(s){return(0,ot.gC)(s)});ka=(0,me.default)({},ka,{filterControls:V})}ia.type===29&&P().get(ia,"advancedSetting.searchcontrol")&&Hn&&(ka.controlId=P().get(ia,"controlId"),ka.relationWorksheetId=lt.worksheetId),bn.Z.getFilterRows((0,Q.zG)((0,me.default)({worksheetId:ea,viewId:Tn,keyWords:Hn,pageIndex:1,pageSize:1e4,isGetWorksheet:!0,kanbanKey:sn},ka))).then(function(s){if(s.resultCode===4)ha({worksheetId:ea,viewId:"",rowId:sn,cb:Da});else if(s.resultCode===7)Qn({filterData:nt,data:[],rowId:sn,cb:Da});else{var c=s.data,g=c===void 0?[]:c,x=g;if(ia.type!==35&&Ye.length>0&&O==="2"){x=[];var S=Ye.map(function(ee){return safeParse(ee).id});S.map(function(ee){x=x.concat(g.find(function(ge){return ge.rowid===ee}))})}x=x.filter(function(ee){return!!ee});var X=P().get(s,["template","controls"])||[],re=X.find(function(ee){return ee.attribute===1});Qn({filterData:nt,data:x.map(function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{value:ee.rowid,txt:Dn(ee,re,Tn),isLeaf:!ee.childrenids}}),rowId:sn,cb:Da})}})}},an=function(Pn){xn(Pn)},Qn=function ha(Pn,ea){var Tn=Pn.filterData,sn=Pn.data,Da=Pn.rowId,ia=Pn.cb;Da&&!Hn?(Tn.forEach(function(ka){ka.value===Da?ka.children=sn:P().isArray(ka.children)&&ha({filterData:ka.children,data:sn,rowId:Da},!0)}),!ea&&He(Tn)):!ea&&He(sn),Cn(!1),ia&&ia()},Ln=function ha(Pn,ea,Tn){return Pn.map(function(sn){var Da=!sn.isLeaf,ia=Da&&!at.includes(sn.value),ka=Number((u.find(function(c){return c.key===(sn.value?sn.value==="null"?"":sn.value:"all")})||{}).count||0),Sa=n.find(function(c){return c.controlId===Ft.controlId})||{},Yn=Sa.advancedSetting,Ye=Sa.type,O=Yn.allpath,V=O===void 0?"0":O,s=V==="1"&&Ye===35?(Tn?Tn+"/":"")+sn.txt:sn.txt;return h.createElement(h.Fragment,null,h.createElement("li",{className:vt()("gList Hand",{current:Ue===sn.value,WordBreak:!Nn(),overflow_ellipsis:!Nn()}),style:{paddingLeft:(ea?18*ea:0)+6},onClick:function(){hn(sn.value),et(s)}},h.createElement("div",{className:vt()("gListDiv",{hasCount:ka>0})},h.createElement("span",{className:vt()({arrow:!Hn})},Da&&h.createElement(ma.Z,{className:"Hand Font12 iconArrow",icon:ia?"arrow-right-tip":"arrow-down",onClick:function(g){g.stopPropagation(),ia?sn.children?ct(at.concat(sn.value)):Sn({rowId:sn.value,cb:function(){ct(at.concat(sn.value))}}):ct(at.filter(function(x){return x!==sn.value}))}})),sn.txt||_l("\u672A\u547D\u540D"),ka>0&&h.createElement("span",{className:"count"},ka))),Da&&sn.children&&!ia&&ha(sn.children,ea?ea+1:1,s))})},hn=function(Pn){Ke(Pn)},Ra=function(){var Pn=(0,ve.aq)(lt),ea=Pn.showallitem,Tn=Pn.allitemname,sn=Tn===void 0?"":Tn,Da=Pn.shownullitem,ia=Pn.nullitemname,ka=ia===void 0?"":ia;if(!F)return h.createElement("span",{className:"pLeft8 InlineBlock w100 pRight8 WordBreak Gray_9e TxtCenter Bold h100 Hand",onClick:function(){Pe.changeGroupStatus(!F)}});if(Qt)return h.createElement(rt.Z,{className:"pTop16"});if(nt&&nt.length<=0&&Hn)return h.createElement("div",{className:"noData mTop35 TxtCenter Gray_9e"},_l("\u6CA1\u6709\u641C\u7D22\u7ED3\u679C"));var Sa=n.find(function(S){return S.controlId===Ft.controlId})||{},Yn=nt;Hn||(Sa.type===29&&Ft.viewId||[35].includes(Sa.type)?Yn=[{txt:_l("\u5168\u90E8"),value:"",isLeaf:!0}].concat(Yn):(Yn=ea!=="1"?[{txt:sn||_l("\u5168\u90E8"),value:"",isLeaf:!0}].concat(Yn):Yn,Yn=Da==="1"?Yn.concat({txt:ka||_l("\u4E3A\u7A7A"),value:"null",isLeaf:!0}):Yn));var Ye=[9,10,11].includes(Sa.type),O=(0,ve.aq)(lt),V=O.navfilters,s=V===void 0?"[]":V,c=O.navshow;try{s=JSON.parse(s)}catch(S){s=[]}if(Ft.controlId==="wfstatus"&&!(0,W.v)(ce.RX.sysControlSwitch,w)&&(c="0"),Ye&&s.length>0&&c==="2"){var g=[""].concat((0,q.Z)(s),["null"]),x=Yn;Yn=[],g.map(function(S){Yn=Yn.concat(x.find(function(X){return X.value===S}))}),Yn=Yn.filter(function(S){return!!S})}return h.createElement(ht.Z,{className:"flex"},h.createElement("div",{className:vt()("groupWrap",{isTree:ra()})},ra()?h.createElement("ul",{className:vt()({canScroll:ra()})},Ln(Yn)):h.createElement("ul",null,Yn.map(function(S,X){var re=Ye&&Sa.enumDefault2===1&&S.key?{backgroundColor:S.color}:{},ee=Number((u.find(function(ge){return ge.key===(S.value?S.value==="null"?"":S.value:"all")})||{}).count||0);if(!(c==="1"&&ee<=0&&!["null",""].includes(S.value)))return h.createElement("li",{className:vt()("gList Hand",{current:Ue===S.value,WordBreak:!ra(),overflow_ellipsis:!ra(),hasCount:ee>0}),onClick:function(){hn(S.value),et(S.txt)}},h.createElement("div",{className:vt()("gListDiv")},Ye&&Sa.enumDefault2===1&&!!S.key&&h.createElement("span",{className:"option",style:re}),h.createElement("span",{className:"optionTxt InlineBlock WordBreak overflow_ellipsis"},S.txt||_l("\u672A\u547D\u540D")),ee>0&&h.createElement("span",{className:"count"},ee)))}))))};return h.createElement(qe,{className:"groupFilterWrap",width:Pt,style:{borderRight:F?"0":"1px solid rgba(0, 0, 0, 0.04)"}},h.createElement("div",{className:vt()("searchBar flexRow",{pAll0:!F,TxtCenter:!F})},F&&h.createElement(h.Fragment,null,h.createElement("i",{className:"icon icon-search"}),h.createElement("input",{type:"text",placeholder:_l("\u641C\u7D22"),ref:G,className:vt()("flex",{placeholderColor:!Hn}),onChange:function(Pn){return _n(Pn.target.value)}})),Hn&&h.createElement("i",{className:"icon icon-cancel1 Hand",onClick:function(){ca(""),hn("")}}),!Hn&&h.createElement("i",{className:vt()("icon Font12 icon-"+(F?"back-02":"next-02")+" Hand LineHeight34",{pLeft9:!F}),onClick:function(){Pe.changeGroupStatus(!F)}})),Ra())}const ft=(0,Ce.$j)(function(Pe){return(0,me.default)({},Pe.sheet)},function(Pe){return(0,I.DE)({updateGroupFilter:j.updateGroupFilter,getNavGroupCount:j.getNavGroupCount},Pe)})(It);var st=t(78618),Zt=(0,L.Z)([`
  flex: 1;
  display: flex;
  overflow: hidden;
  height: 100%;
  flex-direction: column;
  background: #fff;
`],[`
  flex: 1;
  display: flex;
  overflow: hidden;
  height: 100%;
  flex-direction: column;
  background: #fff;
`]),On=(0,L.Z)([`
  height: 75px;
`],[`
  height: 75px;
`]),Fn=(0,L.Z)([`
  flex: 1;
  display: flex;
  position: relative;
`],[`
  flex: 1;
  display: flex;
  position: relative;
`]),Ca=(0,L.Z)([`
  border-bottom: 1px solid #e0e0e0;
`],[`
  border-bottom: 1px solid #e0e0e0;
`]),Jn=(0,L.Z)([`
  color: #9e9e9e;
  font-size: 17px;
  display: flex;
  flex: 1;
  justify-content: center;
  align-items: center;
`],[`
  color: #9e9e9e;
  font-size: 17px;
  display: flex;
  flex: 1;
  justify-content: center;
  align-items: center;
`]),aa=ke.B.sheet,xa=ke.B.gallery,va=ke.B.board,Pa=ke.B.calendar,ta=ke.B.gunter,Ia=ke.B.detail,Aa=ke.B.customize,Wa=ke.B.map,Xa=ke.B.resource,Ha=k.ZP.div(Zt),Er=k.ZP.div(On),ir=k.ZP.div(Fn),Ir=k.ZP.div(Ca),za=k.ZP.div(function(Pe){var Bn=Pe.left;return`
  position: absolute;
  z-index: 2;
  left: `+Bn+`px;
  width: 10px;
  height: 100%;
  cursor: ew-resize;
  border-left: 1px solid #e0e0e0;
  &:hover{
    border-left: 1px solid #2196f3;
  }
`}),Ja=k.ZP.div(Jn);function or(Pe){var Bn=Pe.loading,Un=Pe.error,Pt=Pe.appId,ne=Pe.groupId,F=Pe.worksheetId,B=Pe.worksheetInfo,n=Pe.flag,l=Pe.type,o=l===void 0?"common":l,d=Pe.views,u=Pe.activeViewStatus,p=Pe.isCharge,f=Pe.updateGroupFilter,w=Pe.updateFilters,D=Pe.config,G=D===void 0?{}:D,H=Pe.appPkg,De=H===void 0?{}:H,je=Pe.filtersGroup,lt=Pe.chartId,Ft=Pe.showControlIds,un=Pe.showAsSheetView,dn=Pe.quickFilter,Hn=Pe.navGroupFilters,ca=Pe.openNewRecord,da=Pe.updateQuickFilter,Me=Pe.setLoadRequest,nt=Me===void 0?function(){}:Me,He=Pe.abortPrevWorksheetInfoRequest,ie=He===void 0?function(){}:He,We=(0,h.useRef)({}),Ue=(0,h.useState)(!1),Ke=(0,T.Z)(Ue,2),ut=Ke[0],wt=Ke[1],Et=(0,h.useState)(""),et=(0,T.Z)(Et,2),Xe=et[0],pt=et[1],at=(0,h.useState)(!1),ct=(0,T.Z)(at,2),Nt=ct[0],mn=ct[1],Qt=(0,h.useState)(window.localStorage.getItem("navGroupIsOpen")?window.localStorage.getItem("navGroupIsOpen")==="true":!0),Cn=(0,T.Z)(Qt,2),_n=Cn[0],ra=Cn[1],Nn=(0,h.useState)(),Ht=(0,T.Z)(Nn,2),Sn=Ht[0],Dn=Ht[1],xn=Pe.viewId,an=Pe.loadWorksheet,Qn=d.filter(function(Sa){var Yn=P().get(Sa,"advancedSetting.showhide")||"";return!Yn.includes("hpc")&&!Yn.includes("hide")}),Ln=P().find(d,{viewId:xn})||!xn&&!lt&&(Qn.length?Qn:d)[0]||{},hn=(P().get(B,"template.controls")||[]).find(function(Sa){return Sa.controlId===P().get(Ln,"navGroup[0].controlId")}),Ra=(0,ve.T3)(Pt,F).name||B.name||"",ha=!P().isEmpty(Ln.navGroup)&&Ln.navGroup.length>0&&P().includes([aa,xa,Aa,Wa],String(Ln.viewType))&&hn,Pn=!P().isEmpty(Ln.fastFilters)&&P().includes([aa,xa,va,Pa,ta,Ia,Aa,Xa],String(Ln.viewType))&&!lt,ea=Pn&&!P().includes([aa],String(Ln.viewType))&&P().get(Ln,"advancedSetting.clicksearch")==="1",Tn=ha&&!P().includes([aa],String(Ln.viewType))&&!lt&&P().get(Ln,"advancedSetting.showallitem")==="1"&&!P().get(Ln,"navGroup[0].viewId"),sn={type:o,loading:Bn,error:Un,appPkg:De,appId:Pt,groupId:ne,worksheetId:F,views:d,view:Ln,activeViewStatus:u,viewId:Ln.viewId,projectId:B.projectId,isCharge:p,openNewRecord:ca,viewConfigVisible:ut,setViewConfigVisible:wt,setViewConfigTab:pt,filtersGroup:je,groupFilterWidth:ha?Sn:0,chartId:lt,showControlIds:Ft,showAsSheetView:un},Da=(P().get(B,"template.controls")||[]).find(function(Sa){return Sa.controlId===P().get(Ln,"navGroup[0].controlId")}),ia=ea&&P().isEmpty(dn)?h.createElement(Ja,null,_l("\u6267\u884C\u67E5\u8BE2\u540E\u663E\u793A\u7ED3\u679C")):Tn&&P().isEmpty(Hn)?h.createElement(Ja,null,_l("\u8BF7\u4ECE\u5DE6\u4FA7\u9009\u62E9\u4E00\u4E2A%0\u67E5\u770B",Da.controlName)):h.createElement(Fa,sn);(0,h.useEffect)(function(){F&&(ie(),an(F,nt))},[o==="single"?F:void 0,n]),(0,h.useEffect)(function(){P().isArray(je)&&!Bn&&w({filtersGroup:je},Ln)},[je,Bn]),(0,h.useEffect)(function(){f([],Ln)},[Ln.viewId,F]),(0,h.useEffect)(function(){P().get(We,"current.prevFastFilters.length")>0&&P().get(Ln,"fastFilters.length")===0&&da([],Ln),We.current.prevFastFilters=Ln.fastFilters},[Ln.fastFilters]),(0,h.useEffect)(function(){_n?ka():Dn(st.ax)},[P().get(Ln,"advancedSetting.navwidth")]);var ka=function(){var Yn=window.localStorage.getItem("navGroupWidth_"+Ln.viewId);Yn=Yn||P().get(Ln,"advancedSetting.navwidth")||st.h6,Dn(Yn)};return(0,h.useEffect)(function(){return window.openViewConfig=function(){wt(!0),pt("DebugConfig")},function(){delete window.openViewConfig}},[]),h.createElement(wa.Z.Provider,{value:{config:G,isRequestingRelationControls:B.isRequestingRelationControls}},h.createElement(Ha,{className:"worksheetSheet"},o==="common"&&Ra&&h.createElement(oe(),{title:(Ra||"")+" - "+(window.appInfo&&window.appInfo.showName||_l("\u5E94\u7528"))}),Bn?h.createElement(Er,null,h.createElement(J.Z,{direction:"row",widths:["140px"],active:!0,itemStyle:{margin:"10px 0 9px"}}),h.createElement(J.Z,{direction:"row",widths:["26px","64px","64px","64px"],active:!0,itemStyle:{margin:"10px 10px 10px 0"}})):h.createElement(h.Fragment,null,o==="common"&&h.createElement(h.Fragment,null,h.createElement(Dr,sn),h.createElement(M,(0,me.default)({},sn,{viewConfigTab:Xe,view:P().cloneDeep(Ln)}))),o==="single"&&h.createElement(Dr,(0,me.default)({},sn,{onlyBatchOperate:!0})),h.createElement(Ha,{id:"worksheetRightContentBox"},Pn&&h.createElement(Ir,null,B.isRequestingRelationControls?h.createElement("div",{style:{height:52}},h.createElement(J.Z,{direction:"row",widths:["140px"],active:!0,itemStyle:{margin:"20px 0"}})):h.createElement(it,(0,me.default)({},sn,{filters:(0,Rt.oF)(Ln.fastFilters,B.switches)}))),ha&&!lt?h.createElement(ir,null,Nt&&h.createElement(fe.Z,{value:Sn,min:st.AV,max:st.sY,onChange:function(Yn){mn(!1),Dn(Yn),safeLocalStorageSetItem("navGroupWidth_"+Ln.viewId,Yn)}}),h.createElement(ft,{key:Ln.viewId,width:Sn,isOpenGroup:_n,changeGroupStatus:function(Yn){ra(Yn),safeLocalStorageSetItem("navGroupIsOpen",Yn),Yn?ka():Dn(st.ax)}}),!(P().get(window,"shareState.isPublicView")||P().get(window,"shareState.isPublicPage"))&&_n&&h.createElement(za,{left:Sn,onMouseDown:function(){return mn(!0)}}),ia):ia))))}or.propTypes={flag:C().string,type:C().string,loading:C().bool,appId:C().string,groupId:C().string,worksheetId:C().string,viewId:C().string,activeViewStatus:C().number,isCharge:C().bool,worksheetInfo:C().shape({}),appPkg:C().shape({}),sheetSwitchPermit:C().arrayOf(C().shape({})),views:C().arrayOf(C().shape({})),loadWorksheet:C().func};const Ua=(0,Ce.$j)(function(Pe){return{appId:Pe.sheet.base.appId,appPkg:Pe.appPkg,groupId:Pe.sheet.base.groupId,worksheetId:Pe.sheet.base.worksheetId,viewId:Pe.sheet.base.viewId,chartId:Pe.sheet.base.chartId,worksheetInfo:Pe.sheet.worksheetInfo,isCharge:Pe.sheet.isCharge,loading:Pe.sheet.loading,error:Pe.sheet.error,views:Pe.sheet.views,activeViewStatus:Pe.sheet.activeViewStatus,quickFilter:Pe.sheet.quickFilter,navGroupFilters:Pe.sheet.navGroupFilters}},function(Pe){return(0,I.DE)(P().pick(j,["updateBase","updateFilters","updateQuickFilter","loadWorksheet","updateGroupFilter","openNewRecord"]),Pe)})((0,i.Z)(or));var qa=t(52262),dr=t(65400),Nr=(0,L.Z)([`
  display: flex;
  padding: 6px 0;
  align-items: center;
`],[`
  display: flex;
  padding: 6px 0;
  align-items: center;
`]),Sr=(0,L.Z)([`
  flex: 1;
`],[`
  flex: 1;
`]),wr=k.ZP.div(Nr),Ur=k.ZP.div(Sr),Mr=(0,ve.Q9)();function Hr(Pe){var Bn=Pe.headerLeft,Un=Pe.headerRight,Pt=Pe.maxCount,ne=Pe.worksheetInfo,F=Pe.view,B=Pe.searchData,n=Pe.sheetViewData,l=Pe.showAsSheetView,o=Pe.sheetFetchParams,d=Pe.sheetSwitchPermit,u=Pe.changePageSize,p=Pe.changePageIndex,f=Pe.updateFiltersWithView,w=Pe.updateSearchRecord,D=Pe.refreshSheet,G=Pe.openNewRecord,H=n.count,De=o.pageIndex,je=o.pageSize,lt=ne.entityName,Ft=ne.allowAdd,un=String(F.viewType);return Mr?h.createElement(wr,{className:"SingleViewHeader mobile"},Bn,h.createElement(Ur,null),(0,W.v)(ce.RX.createButtonSwitch,d)&&Ft&&h.createElement(ma.Z,{icon:"plus",className:"addRecord Font20 Gray_9e",onClick:function(){var Hn=ne.appId,ca=ne.worksheetId,da=F.viewId;window.mobileNavigateTo&&window.mobileNavigateTo("/mobile/addRecord/"+Hn+"/"+ca+"/"+da)}}),Un):h.createElement(wr,{className:vt()("SingleViewHeader",{Border0:!P().isEmpty(F.fastFilters)})},Bn,h.createElement(Ur,null),[ke.B.structure,ke.B.gunter].includes(un)&&!l?h.createElement(vo.default,{queryKey:B.queryKey,data:B.data,onSearch:function(Hn){w(F,Hn)},onClose:function(){w(F,null)}},h.createElement(An.Z,{popupPlacement:"bottom",text:h.createElement("span",null,_l("\u67E5\u627E"))},h.createElement(ma.Z,{icon:"search",className:"Gray_9e Font22 pointer ThemeHoverColor3 mTop2 mRight15"}))):h.createElement(Ko.Z,{className:"queryInput",onOk:function(Hn){f({keyWords:(Hn||"").trim()})},onClear:function(){f({keyWords:""})}}),h.createElement(An.Z,{popupPlacement:"bottom",text:h.createElement("span",null,_l("\u5237\u65B0"))},h.createElement(ma.Z,{icon:"task-later",className:"Gray_9e Font20 pointer mLeft2 mRight2",onClick:function(){D(F)}})),(l||un===ke.B.sheet)&&h.createElement(bo.Z,{className:"pagination",pageIndex:De,pageSize:je,allCount:H,maxCount:Pt,changePageSize:u,changePageIndex:p,onPrev:function(){p(De-1)},onNext:function(){p(De+1)}}),(0,W.v)(ce.RX.createButtonSwitch,d)&&Ft&&h.createElement(dr.default,{type:"primary",shape:"round",className:"mLeft15 addRecord",icon:h.createElement(ma.Z,{icon:"plus",className:"mRight2"}),onClick:G},lt),Un)}Hr.propTypes={headerLeft:Te.element,headerRight:Te.element,sheetViewData:(0,Te.shape)({}),showAsSheetView:Te.bool,sheetFetchParams:(0,Te.shape)({}),changePageSize:Te.func,changePageIndex:Te.func,updateFiltersWithView:Te.func,updateSearchRecord:Te.func,refreshSheet:Te.func,openNewRecord:Te.func};var po=(0,L.Z)([`
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
`],[`
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
`]),ol=(0,L.Z)([`
  flex: 1;
  border: 1px solid #e0e0e0 !important;
  overflow: hidden;
`],[`
  flex: 1;
  border: 1px solid #e0e0e0 !important;
  overflow: hidden;
`]),ul=k.ZP.div(po),pl=k.ZP.div(ol);function dl(Pe){var Bn=Pe.showHeader,Un=Pe.showPageTitle,Pt=Pe.headerLeft,ne=Pe.headerRight,F=Pe.worksheetInfo,B=Pe.views,n=Pe.viewId,l=Pe.chartId,o=Pe.showControlIds,d=Pe.showAsSheetView,u=Pe.sheetViewData,p=Pe.sheetFetchParams,f=Pe.sheetSwitchPermit,w=Pe.searchData,D=Pe.maxCount,G=Pe.filtersGroup,H=Pe.changePageIndex,De=Pe.changePageSize,je=Pe.updateFilters,lt=Pe.updateSearchRecord,Ft=Pe.refreshSheet,un=Pe.openNewRecord,dn=P().find(B,{viewId:n})||!n&&B[0]||{};return h.createElement(ul,{className:"SingleViewWrap"},Un&&F.name&&h.createElement(oe(),{title:""+F.name+(dn.name?" - "+dn.name:"")}),Bn&&h.createElement(Hr,{maxCount:D,worksheetInfo:F,view:dn,sheetSwitchPermit:f,showAsSheetView:d,headerLeft:Pt,headerRight:ne,sheetViewData:u,searchData:w,sheetFetchParams:p,changePageIndex:H,changePageSize:De,updateSearchRecord:lt,refreshSheet:Ft,openNewRecord:un,updateFiltersWithView:function(ca){return je(ca,dn)}}),h.createElement(pl,{className:"SingleViewBody"},h.createElement(Ua,{type:"single",chartId:l,showControlIds:o,showAsSheetView:d,filtersGroup:G,config:{hideColumnFilter:!0}})))}const ml=(0,Ce.$j)(function(Pe){return{appId:Pe.sheet.base.appId,worksheetId:Pe.sheet.base.worksheetId,viewId:Pe.sheet.base.viewId,isCharge:Pe.sheet.isCharge,loading:Pe.sheet.loading,views:Pe.sheet.views,activeViewStatus:Pe.sheet.activeViewStatus,worksheetInfo:Pe.sheet.worksheetInfo,sheetSwitchPermit:Pe.sheet.sheetSwitchPermit,searchData:(0,y.Im)(Pe.sheet),sheetViewData:Pe.sheet.sheetview.sheetViewData,sheetFetchParams:Pe.sheet.sheetview.sheetFetchParams}},function(Pe){return(0,I.DE)({loadWorksheet:j.loadWorksheet,changePageIndex:m.changePageIndex,changePageSize:m.changePageSize,updateFilters:j.updateFilters,updateSearchRecord:j.updateSearchRecord,refreshSheet:j.refreshSheet,openNewRecord:j.openNewRecord},Pe)})((0,i.Z)(dl));function jo(Pe,Bn){var Un=Pe.showPageTitle,Pt=Pe.showHeader,ne=Pe.showAsSheetView,F=Pe.appId,B=Pe.viewId,n=Pe.worksheetId,l=Pe.maxCount,o=Pe.chartId,d=Pe.showControlIds,u=Pe.headerLeft,p=Pe.headerRight,f=Pe.filtersGroup,w=(0,h.useMemo)(Ne.x,[]);return(0,h.useEffect)(function(){w.dispatch((0,j.updateBase)({appId:F,viewId:B,worksheetId:n,chartId:o,maxCount:l,showAsSheetView:ne,type:"single"}))},[]),(0,h.useImperativeHandle)(Bn,function(){return{dispatch:w.dispatch,getState:w.getState}}),h.createElement(Ce.zt,{store:w},h.createElement(ml,{showPageTitle:Un,chartId:o,maxCount:l,showHeader:Pt,showAsSheetView:ne,showControlIds:d,headerLeft:u,headerRight:p,filtersGroup:f}))}const fl=(0,h.forwardRef)(jo);jo.propTypes={showPageTitle:Te.bool,showHeader:Te.bool,showAsSheetView:Te.bool,headerLeft:Te.element,headerRight:Te.element,maxCount:Te.number,appId:Te.string,showControlIds:(0,Te.arrayOf)(Te.string),filtersGroup:(0,Te.arrayOf)((0,Te.shape)({})),worksheetId:Te.string,viewId:Te.string,chartId:Te.string}},58990:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>oe});var h=t(88239),Te=t(12424),C=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var Ce=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var Ne=t(7685);if(!/^(1887|7596|7798)$/.test(t.j))var j=t(58409);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(67689);var I=t(96486),k=t.n(I),e=function(y){var i=y.fieldPermission,me=i===void 0?"111":i,J=me.split(""),T=(0,Te.Z)(J,3),te=T[0],E=T[1],r=T[2];return te!=="0"};function oe(m){var y=m.visible,i=m.worksheetId,me=m.coverType,J=m.coverCid,T=m.showControlName,te=T===void 0?!1:T,E=m.showControls,r=m.handleDisplayChange,R=m.advancedSetting;if(!y)return null;var a=(0,C.useState)({sheetInfo:{},availableControls:[],coverColumns:[]}),z=(0,Te.Z)(a,2),N=z[0],q=N.sheetInfo,K=N.availableControls,ye=N.coverColumns,v=z[1],se=function(pe){return pe.filter(function(Y){return Y.attribute!==1})},de=function(pe){return pe.slice(0,2).map(function(Y){var be=Y.controlId;return be})};return(0,C.useEffect)(function(){i&&Ce.Z.getWorksheetInfo({worksheetId:i,getTemplate:!0}).then(function(U){var pe=k().get(U,["template","controls"]),Y=se(pe),be=de(Y),Q=pe.filter(function(Le){return e(Le)}).filter(function(Le){return!!Le.controlName});v({sheetInfo:U,availableControls:Y,showControls:be,controlsSorts:Y.map(function(Le){var Be=Le.controlId;return Be}),coverColumns:Q})})},[i]),C.createElement(C.Fragment,null,C.createElement(Ne.Z,{fromRelative:!0,worksheetControls:K,advancedSetting:R,handleChange:function(pe){r({advancedSetting:(0,h.default)({},R,{abstract:pe})})}}),C.createElement(j.Z,(0,h.default)({},m,{text:"",fromRelative:!0,worksheetControls:K,displayControls:E,columns:K,handleChange:function(pe){var Y=pe.showControlName;r({showControlName:Y})},handleChangeSort:function(pe){var Y=pe.newControlSorts,be=pe.newShowControls;r({showControls:be,controlsSorts:Y})}})),C.createElement(L.Z,(0,h.default)({},m,{coverColumns:ye,viewType:"2",fromRelative:!0,advancedSetting:R,worksheetControls:K,handleChangeIsCover:function(pe){return r({coverCid:pe==="notDisplay"?"":pe})},handleChangePosition:function(pe,Y){r({coverType:Y,advancedSetting:(0,h.default)({},R,{coverposition:pe})},!1)},handleChangeType:function(pe){r({coverType:pe},!1)},handleChangeOpencover:function(pe){r({advancedSetting:(0,h.default)({},R,{opencover:pe})})},handleChangeCoverWidth:function(pe){r({advancedSetting:(0,h.default)({},R,{cardwidth:pe})})}})))}},36616:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>da});var h=t(6100),Te=t(25273),C=t(31546),Ce=t(95679),Ne=t(70264),j=t(33867),L=t(3247),I=t(52945),k=t.n(I),e=t(63239),oe=t.n(e),m=t(88106),y=t(88239),i=t(85315),me=t(85105),J=t.n(me),T=t(99663),te=t(22600),E=t(49135),r=t(93196),R=t(86735),a=t(67294),z=t(93967),N=t.n(z),q=t(71893),K=t(89499),ye=t(15405),v=t(15742),se=t(26358),de=t(62232),U=t(88902),pe=t.n(U),Y=t(47426),be=t(22818),Q=t(15577),Le=t(49300),Be=t(86898),ke=t(89626),Ie=t(12424),he=t(4434),Re=t(69278),ue=(0,R.Z)([`
  .sortInput {
    flex-shrink: 0;
    min-width: 0;
  }
  .custom {
    width: 92px;
    height: 36px;
    line-height: 36px;
    background: #ffffff;
    border-radius: 3px 3px 3px 3px;
    border: 1px solid #dddddd;
    i {
      color: #9e9e9e;
    }
    &:hover,
    &.has {
      border: 1px solid #2196f3;
      color: #2196f3;
      i {
        color: #2196f3;
      }
    }
  }
`],[`
  .sortInput {
    flex-shrink: 0;
    min-width: 0;
  }
  .custom {
    width: 92px;
    height: 36px;
    line-height: 36px;
    background: #ffffff;
    border-radius: 3px 3px 3px 3px;
    border: 1px solid #dddddd;
    i {
      color: #9e9e9e;
    }
    &:hover,
    &.has {
      border: 1px solid #2196f3;
      color: #2196f3;
      i {
        color: #2196f3;
      }
    }
  }
`]),we=q.ZP.div(ue);function Ee(Me){var nt=Me.updateCurrentView,He=Me.view,ie=Me.appId,We=Me.controls,Ue=Me.onChange,Ke=Me.projectId,ut=We.find(function(ct){return ct.controlId===_.get(He,"viewControl")})||{},wt=(0,a.useState)(!1),Et=(0,Ie.Z)(wt,2),et=Et[0],Xe=Et[1],pt=ut.type!==28,at=ut.type!==26;return a.createElement(a.Fragment,null,a.createElement("div",{className:"title mTop30 Gray Bold"},_l("\u6392\u5E8F")),a.createElement(we,{className:"flexRow alignItemsCenter mTop10"},at&&(ut.type===29?a.createElement(he.Z,(0,y.default)({className:"flex mTop0 sortInput mRight10"},Me,{advancedSettingKey:"navsorts",viewControlData:ut,relationControls:ut.relationControls,onChange:function(Nt){Ue({navsorts:Nt?_.get(Nt,"advancedSetting.navsorts"):"[]"})},canClear:!0})):a.createElement(C.Z,{border:!0,cancelAble:!0,isAppendToBody:!0,className:N()("flex mTop0",{mRight10:pt}),value:_.get(He,"advancedSetting.navsorts")?_.get(He,"advancedSetting.navsorts"):"0",data:[{text:_l("\u6B63\u5E8F"),value:"0"},{text:_l("\u5012\u5E8F"),value:"1"}],onChange:function(Nt){Ue({navsorts:Nt||""})}})),pt&&a.createElement("span",{className:N()("custom ThemeHoverColor3 TxtCenter Hand",{has:(0,de.aq)(He,"customitems").length>0}),onClick:function(){Xe(!0)}},a.createElement(j.Z,{type:"folder-sort",className:""}),_l("\u81EA\u5B9A\u4E49")),et&&a.createElement(Re.Z,(0,y.default)({},Me,{view:Me.view,projectId:Ke,maxCount:50,controlInfo:ut,title:_l("\u81EA\u5B9A\u4E49\u6392\u5E8F"),advancedSettingKey:"customitems",description:_l("\u6700\u591A\u53EF\u5BF950\u9879\u6392\u5E8F\uFF0C\u8BBE\u7F6E\u6392\u5E8F\u7684\u9879\u663E\u793A\u5728\u6700\u524D"),onChange:function(Nt){var mn=[];switch(ut.type){case 29:mn=Nt.map(function(Qt){return Qt.rowid});break;case 26:mn=Nt.map(function(Qt){return Qt.accountId});break;default:mn=Nt;break}mn=mn.slice(0,50),Ue({customitems:oe()(mn)}),Xe(!1)},onClose:function(){Xe(!1)},addTxt:_l("\u6392\u5E8F\u9879")}))))}var b=t(7685),le=t(58409),ae=t(67689),ve=t(89014),W=t(83655),ce=t(96486),Z=t.n(ce),_e=t(36574),P,xe,bt=(0,R.Z)([`
  .icon {
    font-size: 16px;
    color: rgba(0, 0, 0, 0.4);
    margin-right: 4px;
  }
  span {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-left: 4px;
  }
`],[`
  .icon {
    font-size: 16px;
    color: rgba(0, 0, 0, 0.4);
    margin-right: 4px;
  }
  span {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-left: 4px;
  }
`]),tt=(0,R.Z)([`
  .inputCon {
    padding-left: 34px;
  }
  input {
    margin-left: 13px;
    height: 36px;
    background: #ffffff;
    border-radius: 3px 3px 3px 3px;
    line-height: 36px;
    border: 1px solid #dddddd;
    padding: 0 13px;
  }
`],[`
  .inputCon {
    padding-left: 34px;
  }
  input {
    margin-left: 13px;
    height: 36px;
    background: #ffffff;
    border-radius: 3px 3px 3px 3px;
    line-height: 36px;
    border: 1px solid #dddddd;
    padding: 0 13px;
  }
`]),Dt=(0,R.Z)([`
  display: inline-block;
  .switchText {
    margin-right: 6px;
    line-height: 24px;
  }
  .icon {
    vertical-align: middle;
    &-ic_toggle_on {
      color: #00c345;
    }
    &-ic_toggle_off {
      color: #bdbdbd;
    }
  }
`],[`
  display: inline-block;
  .switchText {
    margin-right: 6px;
    line-height: 24px;
  }
  .icon {
    vertical-align: middle;
    &-ic_toggle_on {
      color: #00c345;
    }
    &-ic_toggle_off {
      color: #bdbdbd;
    }
  }
`]),vn=(0,R.Z)([`
  &\uFF1Ahover {
    .icon {
      color: #2196f3;
    }
  }
`],[`
  &\uFF1Ahover {
    .icon {
      color: #2196f3;
    }
  }
`]),Fe=(0,R.Z)([`
  .Dropdown {
    .Dropdown--input {
      padding: 0 5px 0 12px !important;
    }
  }
`],[`
  .Dropdown {
    .Dropdown--input {
      padding: 0 5px 0 12px !important;
    }
  }
`]),Bt=(0,R.Z)([`
  text-align: center;
  justify-content: space-between;
  .hierachyViewCard {
    width: 120px;
    height: 70px;
    border-radius: 6px;
    color: #9e9e9e;
    line-height: 70px;
    background: #f8f8f8;
    &:hover {
      box-shadow: rgba(0, 0, 0, 0.1) 0 3px 6px;
    }
    & + .activeIcon {
      display: none;
    }
    &.active {
      background: #f2f9ff;
      color: #2196f3;
      & + .activeIcon {
        display: flex;
        background-color: #2196f3;
        border: 2px solid #fff;
        border-radius: 50%;
        color: #fff;
        height: 18px;
        position: absolute;
        right: -8px;
        top: -6px;
        width: 18px;
      }
    }
  }
`],[`
  text-align: center;
  justify-content: space-between;
  .hierachyViewCard {
    width: 120px;
    height: 70px;
    border-radius: 6px;
    color: #9e9e9e;
    line-height: 70px;
    background: #f8f8f8;
    &:hover {
      box-shadow: rgba(0, 0, 0, 0.1) 0 3px 6px;
    }
    & + .activeIcon {
      display: none;
    }
    &.active {
      background: #f2f9ff;
      color: #2196f3;
      & + .activeIcon {
        display: flex;
        background-color: #2196f3;
        border: 2px solid #fff;
        border-radius: 50%;
        color: #fff;
        height: 18px;
        position: absolute;
        right: -8px;
        top: -6px;
        width: 18px;
      }
    }
  }
`]),kt=(0,R.Z)([`
  .ming.Radio:first-child {
    margin-right: 60px;
  }
`],[`
  .ming.Radio:first-child {
    margin-right: 60px;
  }
`]),Tt=(0,R.Z)([`
  .ming.Radio:first-child {
    margin-right: 128px;
  }
  .ming.Radio:last-child {
    margin-right: 0;
  }
`],[`
  .ming.Radio:first-child {
    margin-right: 128px;
  }
  .ming.Radio:last-child {
    margin-right: 0;
  }
`]),tn=(0,q.ZP)(be.Lb)(bt),Vn=q.ZP.div(tt),Zn=q.ZP.div(Dt),Ot=(0,q.ZP)(tn)(vn),$t=q.ZP.div(Fe),cn=q.ZP.div(Bt),Mn=(0,q.ZP)(Y.ZP)(kt),dt=(0,q.ZP)(Y.ZP)(Tt),$e=(xe=P=function(Me){(0,r.default)(nt,Me);function nt(He){(0,T.default)(this,nt);var ie=(0,E.default)(this,(nt.__proto__||J()(nt)).call(this,He)),We=He.view,Ue=We.advancedSetting,Ke=Ue===void 0?{}:Ue,ut=We.childType;return ie.state={relateControls:[],emptyname:"",showChangeName:!1,hierarchyViewType:Ke.hierarchyViewType||"0",hierarchyViewConnectLine:Ke.hierarchyViewConnectLine||"0",minHierarchyLevel:Ke.minHierarchyLevel||"0",detailRecordType:ut||2},ie}return(0,te.default)(nt,[{key:"componentDidMount",value:function(){var ie=this.props.view,We=(0,Q.aq)(ie),Ue=We.emptyname,Ke=Ue===void 0?"":Ue;this.setState({emptyname:Ke,detailRecordType:ie.childType||2})}},{key:"componentWillReceiveProps",value:function(ie){var We=ie.view,Ue=(0,Q.aq)(We),Ke=Ue.emptyname,ut=Ke===void 0?"":Ke;ut!==(0,Q.aq)(this.props.view||{}).emptyname&&this.setState({emptyname:ut}),this.setState({detailRecordType:We.childType||2})}},{key:"render",value:function(){var ie=this,We=this.state,Ue=We.showChangeName,Ke=We.hierarchyViewType,ut=We.hierarchyViewConnectLine,wt=We.minHierarchyLevel,Et=We.detailRecordType,et=this.props,Xe=et.worksheetControls,pt=et.currentSheetInfo,at=et.updateCurrentView,ct=et.view,Nt=et.appId,mn=et.columns,Qt=(0,Le.G1)({controls:Xe,formatter:function(Yn){var Ye=Yn.controlName,O=Yn.controlId,V=Yn.type;return{value:O,text:Ye,icon:(0,de.hB)(V,!1)}}}),Cn=ct.viewControl,_n=ct.childType,ra=ct.viewType,Nn=ct.advancedSetting,Ht=Xe.find(function(Sa){return Sa.controlId===Cn})||{},Sn=(0,Q.aq)(ct),Dn=Sn.hidenone,xn=Dn===void 0?"0":Dn,an=Sn.navshow,Qn=an===void 0?[26].includes(Ht.type)?"1":"0":an,Ln=Sn.navempty,hn=Ln===void 0?"1":Ln,Ra=Sn.freezenav,ha=Ra===void 0?"0":Ra,Pn=String(ra)==="1",ea=String(ra)==="2",Tn=String(ra)==="3",sn=String(ra)==="6",Da=ea&&String(_n)==="2",ia=(0,Q.aq)(ct).navfilters,ka=function(){return Cn==="create"?[{text:_l("\u7236-\u5B50"),value:"create",icon:"link-worksheet"}]:ea?(0,Be.I)({worksheetId:pt.worksheetId,controls:Xe}):Qt};return a.createElement(ke.S5,null,!Da&&!Tn&&!sn&&a.createElement(a.Fragment,null,a.createElement("div",{className:"title withSwitchConfig",style:{marginTop:"0px"}},ea?_l("\u5173\u8054\u672C\u8868\u5B57\u6BB5"):_l("\u5206\u7EC4\u5B57\u6BB5")),a.createElement("div",{className:"settingContent"},a.createElement(C.Z,{data:ka(),value:Cn,className:"allCanSelectFields",hoverTheme:!0,renderTitle:function(Yn){var Ye=Yn||{},O=Ye.icon,V=Ye.text;return a.createElement(Ot,null,a.createElement(j.Z,{icon:O}),a.createElement("span",null,V))},onChange:function(Yn){if(Cn!==Yn){var Ye={navsorts:"",customitems:""},O=Xe.find(function(V){return V.controlId===Yn})||{};(!["0"].includes(Qn)&&![26].includes(O.type)||!["1"].includes(Qn)&&[26].includes(O.type))&&(Ye=(0,y.default)({},Ye,{navshow:[26].includes(O.type)?"1":"0",navfilters:oe()([])})),at((0,y.default)({},ct,{appId:Nt,viewControl:Yn,advancedSetting:Ye,editAdKeys:pe()(Ye),editAttrs:["viewControl","advancedSetting"]}))}},border:!0,style:{width:"100%"},placeholder:_l("\u8BF7\u9009\u62E9")})),Pn&&a.createElement($t,null,a.createElement(ve.Z,{params:{types:W.d9.filter(function(Sa){return Ht.type===29?!0:[9,10,11,28].includes(Ht.type)?Sa.value!=="3":[26].includes(Ht.type)?["1","2"].includes(Sa.value):!0}),txt:_l("\u663E\u793A\u9879")},value:Qn,onChange:function(Yn){var Ye=Yn;Yn.navshow==="2"&&(Ye=(0,y.default)({},Ye,{navsorts:"",customitems:""})),at((0,y.default)({},ct,{appId:Nt,advancedSetting:Ye,editAttrs:["advancedSetting"],editAdKeys:pe()(Ye)}))},advancedSetting:Nn,navfilters:ia,filterInfo:{allControls:(Xe.find(function(Sa){return Sa.controlId===Cn})||{}).relationControls,globalSheetInfo:Z().pick(pt,["appId","groupId","name","projectId","roleType","worksheetId","switches"]),columns:mn,viewControl:Cn}}),[29,26,9,10,11,28].includes((Xe.find(function(Sa){return Sa.controlId===Cn})||{}).type)&&!["2"].includes(Qn)&&a.createElement(Ee,{view:ct,appId:Z().get(pt,"appId"),projectId:Z().get(pt,"projectId"),controls:Xe,advancedSetting:Nn,onChange:function(Yn){at((0,y.default)({},ct,{appId:Nt,advancedSetting:Yn,editAttrs:["advancedSetting"],editAdKeys:pe()(Yn)}))}})),Pn&&a.createElement(Vn,null,a.createElement("div",{className:"flexRow alignItemsCenter"},a.createElement("div",{className:"flex"},a.createElement(Zn,null,a.createElement(j.Z,{icon:hn==="1"?"ic_toggle_on":"ic_toggle_off",className:"Font28 Hand",onClick:function(){at((0,y.default)({},ct,{appId:Nt,advancedSetting:{navempty:hn==="0"?"1":"0"},editAttrs:["advancedSetting"],editAdKeys:["navempty"]}))}}),a.createElement("div",{className:"switchText InlineBlock Normal mLeft12 mTop8"},_l("\u542F\u7528\u201C\u672A\u6307\u5B9A\u201D\u770B\u677F"),a.createElement(Ne.Z,{text:a.createElement("span",null,_l("\u5F00\u542F\u540E\uFF0C\u7B2C1\u4E2A\u770B\u677F\u663E\u793A\u201C\u672A\u6307\u5B9A\u201D\u3002\u5C06\u6240\u6709\u672A\u8BBE\u7F6E\u5206\u7EC4\u7684\u8BB0\u5F55\u663E\u793A\u5728\u201C\u672A\u6307\u5B9A\u201D\u770B\u677F\u4E2D\u3002\u5F53\u6CA1\u6709\u672A\u5206\u7EC4\u6570\u636E\u65F6\uFF0C\u81EA\u52A8\u9690\u85CF\u6B64\u770B\u677F")),popupPlacement:"top"},a.createElement("i",{className:"icon-help Font16 Gray_9e mLeft3 TxtMiddle"}))))),hn==="1"&&a.createElement(Ne.Z,{text:a.createElement("span",null,_l("\u91CD\u547D\u540D")),popupPlacement:"top"},a.createElement("i",{className:"icon-rename_input Font18 Gray_9e mLeft3 TxtMiddle Hand pRight5",onClick:function(){ie.setState({showChangeName:!0})}}))),a.createElement("div",{className:"mTop4"}),a.createElement(Zn,null,a.createElement(j.Z,{icon:ha==="1"?"ic_toggle_on":"ic_toggle_off",className:"Font28 Hand",onClick:function(){at((0,y.default)({},ct,{appId:Nt,advancedSetting:{freezenav:ha==="0"?"1":"0"},editAttrs:["advancedSetting"],editAdKeys:["freezenav"]}))}}),a.createElement("div",{className:"switchText InlineBlock Normal mLeft12"},_l("\u56FA\u5B9A\u7B2C1\u4E2A\u770B\u677F"),a.createElement(Ne.Z,{text:a.createElement("span",null,_l("\u5F53\u770B\u677F\u6EDA\u52A8\u65F6\uFF0C\u59CB\u7EC8\u56FA\u5B9A\u7B2C1\u4E2A\u770B\u677F\u5728\u5DE6\u4FA7\uFF0C\u65B9\u4FBF\u5411\u5176\u4ED6\u770B\u677F\u4E2D\u62D6\u62FD\u8BB0\u5F55\u3002")," "),popupPlacement:"top"},a.createElement("i",{className:"icon-help Font16 Gray_9e mLeft3 TxtMiddle"}))))),a.createElement("div",{className:"line mTop32 mBottom32",style:{borderBottom:"1px solid #EAEAEA"}})),ea&&a.createElement(a.Fragment,null,a.createElement("div",{className:"title withSwitchConfig",style:{marginTop:"0px"}},_l("\u663E\u793A\u6837\u5F0F")),a.createElement("div",{className:"settingContent"},a.createElement(cn,{className:"valignWrapper flex"},W.zh.map(function(Sa){return a.createElement("div",{className:"Relative"},a.createElement("div",{className:"hierachyViewCard mBottom8 Font48 "+Sa.icon+" "+((Ke||"0")===Sa.value?"active":""),onClick:function(){if(Ke!==Sa.value){var Ye={};Ke==="0"&&[0,1].includes(ct.coverType)&&(Ye.coverposition="2"),Ye.hierarchyViewType=Sa.value,ie.setState({hierarchyViewType:Sa.value},function(){at((0,y.default)({},ct,{appId:Nt,advancedSetting:(0,y.default)({},Ye),editAttrs:["advancedSetting"],editAdKeys:pe()(Ye)}))})}}}),a.createElement("div",{className:"activeIcon"},a.createElement("span",{className:"icon-done"})),a.createElement("div",null,Sa.text))}))),Ke==="0"&&a.createElement("div",{className:"title mTop32 mBottom18 valignWrapper"},a.createElement("span",{className:"Font13 bold mRight60"},_l("\u8FDE\u63A5\u7EBF\u6837\u5F0F")),a.createElement(Mn,{size:"middle",checkedValue:ut,data:W.$J,onChange:function(Yn){ut!==Yn&&ie.setState({hierarchyViewConnectLine:Yn},function(){at((0,y.default)({},ct,{appId:Nt,advancedSetting:(0,y.default)({},(0,Q.aq)(ct),{hierarchyViewConnectLine:Yn}),editAttrs:["advancedSetting"],editAdKeys:["hierarchyViewConnectLine"]}))})}})),Ke==="2"&&a.createElement(a.Fragment,null,a.createElement("div",{className:"title title Font13 bold mTop32 mBottom18"},_l("\u7AD6\u5411\u5C42\u7EA7\u6570")),a.createElement(C.Z,{className:"",data:W.gV,value:wt,style:{width:"100%"},border:!0,onChange:function(Yn){wt!==Yn&&ie.setState({minHierarchyLevel:Yn},function(){at((0,y.default)({},ct,{appId:Nt,advancedSetting:(0,y.default)({},(0,Q.aq)(ct),{minHierarchyLevel:Yn}),editAttrs:["advancedSetting"]}))})},placeholder:_l("2\u7EA7")})),a.createElement("div",{className:"line mTop32 mBottom32",style:{borderBottom:"1px solid #EAEAEA"}})),sn&&a.createElement(a.Fragment,null,a.createElement("div",{className:"bold mBottom20"},_l("\u8BB0\u5F55\u6570\u91CF")),a.createElement("div",{className:"flexRow alignItemsCenter"},a.createElement(dt,{size:"middle",checkedValue:Et,data:[{text:_l("\u591A\u6761"),value:2},{text:_l("\u4E00\u6761"),value:1}],onChange:function(Yn){Et!==Yn&&ie.setState({detailRecordType:Yn},function(){at((0,y.default)({},ct,{appId:Nt,childType:Yn,editAttrs:Yn===1?["childType","fastFilters"]:["childType"]},Yn===1?{fastFilters:[]}:{}))})}}),a.createElement("span",{className:"Gray_9e singleDesc"},_l("\uFF08\u7B2C\u4E00\u6761\u8BB0\u5F55\uFF09")))),(!sn||_n===2)&&a.createElement(a.Fragment,null,a.createElement("div",{className:"title mBottom24 mTop24 bold"},_l("\u5361\u7247\u5916\u89C2")),a.createElement(b.Z,(0,y.default)({},this.props,{advancedSetting:Nn,handleChange:function(Yn){at((0,y.default)({},ct,{appId:Nt,advancedSetting:{abstract:Yn},editAttrs:["advancedSetting"],editAdKeys:["abstract"]}))}})),a.createElement(le.Z,(0,y.default)({},this.props,{handleChange:function(Yn){at((0,y.default)({},ct,{appId:Nt},Yn),!1)},handleChangeSort:function(Yn){var Ye=Yn.newControlSorts,O=Yn.newShowControls;if(["board","gallery"].includes(v.B[ct.viewType])){var V=Z().get(ct,"advancedSetting.showcount");V=V?O.length<=0?void 0:Number(V)>O.length?O.length:V:void 0,at((0,y.default)({},ct,{appId:Nt,controlsSorts:Ye,displayControls:O,advancedSetting:{showcount:V},editAttrs:["advancedSetting","controlsSorts","displayControls"],editAdKeys:["showcount"]}),!1)}else at((0,y.default)({},ct,{appId:Nt,controlsSorts:Ye,displayControls:O,editAttrs:["controlsSorts","displayControls"]}),!1)},canShowCount:["board","gallery"].includes(v.B[ct.viewType])})),a.createElement(ae.Z,(0,y.default)({},this.props,{advancedSetting:Nn,handleChangeIsCover:function(Yn){return at((0,y.default)({},ct,{appId:Nt,coverCid:Yn==="notDisplay"?"":Yn,editAttrs:["coverCid"]}))},handleChangePosition:function(Yn,Ye){at((0,y.default)({},ct,{appId:Nt,coverType:Ye,advancedSetting:{coverposition:Yn},editAttrs:["coverType","advancedSetting"],editAdKeys:["coverposition"]}))},handleChangeCoverWidth:function(Yn){at((0,y.default)({},ct,{appId:Nt,advancedSetting:{cardwidth:Yn},editAdKeys:["cardwidth"],editAttrs:["advancedSetting"]}))},handleChangeType:function(Yn){return at((0,y.default)({},ct,{appId:Nt,coverType:Yn,editAttrs:["coverType"]}),!1)},handleChangeOpencover:function(Yn){at((0,y.default)({},ct,{appId:Nt,advancedSetting:{opencover:Yn},editAdKeys:["opencover"],editAttrs:["advancedSetting"]}))}})),Ue&&a.createElement(_e.Z,{onChange:function(Yn){at((0,y.default)({},ct,{appId:Nt,advancedSetting:{emptyname:Yn.trim()},editAttrs:["advancedSetting"],editAdKeys:["emptyname"]})),ie.setState({showChangeName:!1})},name:Nn.emptyname,onCancel:function(){ie.setState({showChangeName:!1})}})))}}]),nt}(a.Component),P.propTypes={},P.defaultProps={},xe),jt=t(60954),rn=t(12386),Rt=t(54208),St=t(29314),zt=t(45231),oa=t(6615),qn=t(93002),In=t(58990),Vt=t(7145),Yt=t.n(Vt),qt=(0,R.Z)([`
  margin: -6px 0 0 20px;
  padding: 18px 12px;
  border-radius: 3px;
  width: 280px;
  color: #9e9e9e;
  font-size: 13px;
`],[`
  margin: -6px 0 0 20px;
  padding: 18px 12px;
  border-radius: 3px;
  width: 280px;
  color: #9e9e9e;
  font-size: 13px;
`]),rt=(0,R.Z)([`
  width: 440px;
  .ant-menu-item {
    clear: both;
    color: rgba(0, 0, 0, 0.85);
    cursor: pointer;
    font-size: 14px;
    font-weight: 400;
    line-height: 36px !important;
    height: 36px !important;
    margin: 0;
    transition: all 0.3s;
    margin: 0 !important;
  }
  .ant-menu-item:hover {
    background-color: #f5f5f5;
    color: rgba(0, 0, 0, 0.85) !important;
  }
`],[`
  width: 440px;
  .ant-menu-item {
    clear: both;
    color: rgba(0, 0, 0, 0.85);
    cursor: pointer;
    font-size: 14px;
    font-weight: 400;
    line-height: 36px !important;
    height: 36px !important;
    margin: 0;
    transition: all 0.3s;
    margin: 0 !important;
  }
  .ant-menu-item:hover {
    background-color: #f5f5f5;
    color: rgba(0, 0, 0, 0.85) !important;
  }
`]),Qe=(0,R.Z)([`
  margin-top: -20px;
  margin-bottom: 12px;

  li {
    &:last-child {
      border: none;
    }
    &.currentSheet {
      .config.visible {
        max-height: 1600px;
      }
    }
    .display {
      display: flex;
      justify-content: space-between;
      align-items: center;
      line-height: 48px;
      width: 100%;
      padding: 4px 0;
      border-bottom: 1px solid #eaeaea;
      &.borderBottomNone {
        border-bottom: 1px solid #fff;
      }
      &:hover {
        .delete {
          visibility: visible;
        }
      }
      .delete {
        visibility: hidden;
      }
      .handle {
        display: flex;
        align-items: center;
        .switchVisible {
          cursor: pointer;
          padding-left: 20px;
          color: #757575;
          &:hover {
            color: #2196f3;
          }
        }
        .delete {
          color: #757575;
          &:hover {
            color: #f44336;
          }
        }
      }
    }
    .info {
      display: flex;
      align-items: center;
      i {
        cursor: pointer;
        font-size: 16px;
      }
      .controlName {
        margin: 0 8px;
        max-width: 140px;
      }
      .sheetInfo {
        max-width: 140px;
      }
    }
    .config {
      transition: max-height 0.25s;
      max-height: 0;
      display: none;
      .content {
        opacity: 0;
        visibility: hidden;
        transition: all 0.25s;
      }
      &.visible {
        max-height: 3000px;
        display: block;
        margin-top: -4px;
        padding-bottom: 4px;
        border-bottom: 1px solid #eaeaea;
        .content {
          padding-top: 10px;
          padding-bottom: 24px;
          opacity: 1;
          visibility: visible;
        }
      }
    }
  }
  .grade {
    margin-right: 30px;
  }
  .controlName {
    margin: 0 4px 0 12px;
    color: #333;
  }
  .relateItem {
    display: flex;
    align-items: center;
    line-height: 36px;
    margin-top: 10px;
  }
  li {
    .gradeName {
      width: 56px;
    }
    .controlInfo {
      width: 260px;
      position: relative;
      background-color: #f8f8f8;
      margin-left: 10px;
      border-radius: 3px;
    }

    .deleteWrap {
      position: absolute;
      top: 0;
      right: -24px;
    }
  }
  .addRelate {
    color: #2196f3;
    font-weight: bold;
    cursor: pointer;
    margin-top: 18px;
    &:hover {
      color: #1565c0;
    }
  }
`],[`
  margin-top: -20px;
  margin-bottom: 12px;

  li {
    &:last-child {
      border: none;
    }
    &.currentSheet {
      .config.visible {
        max-height: 1600px;
      }
    }
    .display {
      display: flex;
      justify-content: space-between;
      align-items: center;
      line-height: 48px;
      width: 100%;
      padding: 4px 0;
      border-bottom: 1px solid #eaeaea;
      &.borderBottomNone {
        border-bottom: 1px solid #fff;
      }
      &:hover {
        .delete {
          visibility: visible;
        }
      }
      .delete {
        visibility: hidden;
      }
      .handle {
        display: flex;
        align-items: center;
        .switchVisible {
          cursor: pointer;
          padding-left: 20px;
          color: #757575;
          &:hover {
            color: #2196f3;
          }
        }
        .delete {
          color: #757575;
          &:hover {
            color: #f44336;
          }
        }
      }
    }
    .info {
      display: flex;
      align-items: center;
      i {
        cursor: pointer;
        font-size: 16px;
      }
      .controlName {
        margin: 0 8px;
        max-width: 140px;
      }
      .sheetInfo {
        max-width: 140px;
      }
    }
    .config {
      transition: max-height 0.25s;
      max-height: 0;
      display: none;
      .content {
        opacity: 0;
        visibility: hidden;
        transition: all 0.25s;
      }
      &.visible {
        max-height: 3000px;
        display: block;
        margin-top: -4px;
        padding-bottom: 4px;
        border-bottom: 1px solid #eaeaea;
        .content {
          padding-top: 10px;
          padding-bottom: 24px;
          opacity: 1;
          visibility: visible;
        }
      }
    }
  }
  .grade {
    margin-right: 30px;
  }
  .controlName {
    margin: 0 4px 0 12px;
    color: #333;
  }
  .relateItem {
    display: flex;
    align-items: center;
    line-height: 36px;
    margin-top: 10px;
  }
  li {
    .gradeName {
      width: 56px;
    }
    .controlInfo {
      width: 260px;
      position: relative;
      background-color: #f8f8f8;
      margin-left: 10px;
      border-radius: 3px;
    }

    .deleteWrap {
      position: absolute;
      top: 0;
      right: -24px;
    }
  }
  .addRelate {
    color: #2196f3;
    font-weight: bold;
    cursor: pointer;
    margin-top: 18px;
    &:hover {
      color: #1565c0;
    }
  }
`]),ht=(0,R.Z)([`
  text-align: center;
  justify-content: space-between;
  .hierachyViewCard {
    width: 120px;
    height: 70px;
    border-radius: 6px;
    color: #9e9e9e;
    line-height: 70px;
    background: #f8f8f8;
    &:hover {
      box-shadow: rgba(0, 0, 0, 0.1) 0 3px 6px;
    }
    & + .activeIcon {
      display: none;
    }
    &.active {
      background: #f2f9ff;
      color: #2196f3;
      & + .activeIcon {
        display: flex;
        background-color: #2196f3;
        border: 2px solid #fff;
        border-radius: 50%;
        color: #fff;
        height: 18px;
        position: absolute;
        right: -8px;
        top: -6px;
        width: 18px;
      }
    }
  }
`],[`
  text-align: center;
  justify-content: space-between;
  .hierachyViewCard {
    width: 120px;
    height: 70px;
    border-radius: 6px;
    color: #9e9e9e;
    line-height: 70px;
    background: #f8f8f8;
    &:hover {
      box-shadow: rgba(0, 0, 0, 0.1) 0 3px 6px;
    }
    & + .activeIcon {
      display: none;
    }
    &.active {
      background: #f2f9ff;
      color: #2196f3;
      & + .activeIcon {
        display: flex;
        background-color: #2196f3;
        border: 2px solid #fff;
        border-radius: 50%;
        color: #fff;
        height: 18px;
        position: absolute;
        right: -8px;
        top: -6px;
        width: 18px;
      }
    }
  }
`]),Lt=(0,R.Z)([`
  .ming.Radio:first-child {
    margin-right: 60px;
  }
`],[`
  .ming.Radio:first-child {
    margin-right: 60px;
  }
`]),Ct=q.ZP.div(qt),mt=q.ZP.div(rt),vt=q.ZP.div(Qe),Xt=q.ZP.div(ht),bn=(0,q.ZP)(Y.ZP)(Lt),pn=function(nt){var He=nt.fieldPermission,ie=He===void 0?"111":He,We=ie.split(""),Ue=(0,Ie.Z)(We,3),Ke=Ue[0],ut=Ue[1],wt=Ue[2];return Ke!=="0"};function Rn(Me){var nt=Me.view,He=Me.currentSheetInfo,ie=Me.updateCurrentView,We=Me.appId,Ue=Me.filteredColumns,Ke=nt.viewControls,ut=Ke===void 0?[]:Ke,wt=nt.childType,Et=nt.advancedSetting,et=nt.layersName,Xe=(0,qn.Z)({activeIndex:-1,delIndex:-1,hierarchyViewType:(Et||{}).hierarchyViewType||"0",hierarchyViewConnectLine:(Et||{}).hierarchyViewConnectLine||"0",minHierarchyLevel:(Et||{}).minHierarchyLevel||"2",visible:!1}),pt=(0,Ie.Z)(Xe,2),at=pt[0],ct=at.activeIndex,Nt=at.delIndex,mn=at.hierarchyViewType,Qt=at.hierarchyViewConnectLine,Cn=at.minHierarchyLevel,_n=at.visible,ra=pt[1],Nn=function(sn){var Da=Z().get(sn,"template")||{},ia=Da.controls,ka=ia===void 0?[]:ia,Sa=ut.map(function(Yn){return Yn.worksheetId});return Z().filter(ka,function(Yn){return(Yn.type===29||Yn.type===34&&Z().includes(["0","1"],Z().get(Yn,"advancedSetting.detailworksheettype")))&&!Z().includes(Sa,Yn.dataSource)})},Ht=(0,qn.Z)({availableControls:Nn(He),controlLoading:!1}),Sn=(0,Ie.Z)(Ht,2),Dn=Sn[0],xn=Dn.availableControls,an=Dn.controlLoading,Qn=Sn[1],Ln=function(sn){ra(sn===ct?{activeIndex:-1}:{activeIndex:sn})},hn=function(sn){var Da=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;ie((0,y.default)({appId:We},nt,sn),Da)},Ra=function(){var sn=Z().last(ut)||{},Da=sn.worksheetId,ia=Da===void 0?"":Da,ka=Z().last(ut.slice(0,-1));an||(Qn({controlLoading:!0}),zt.Z.getWorksheetInfo({worksheetId:ia,getTemplate:!0,relationWorksheetId:ka?ka.worksheetId:He.worksheetId}).then(function(Sa){Qn({availableControls:Nn(Sa)})}).finally(function(){Qn({controlLoading:!1})}))},ha=function(sn){var Da=ut.map(function(ia){var ka=ia.worksheetId;return ka});zt.Z.getWorksheetInfo({worksheetId:sn.dataSource,getTemplate:!0}).then(function(ia){var ka=ia.template.controls,Sa=(0,Le.G1)({controls:ka.filter(function(Yn){return pn(Yn)}).filter(function(Yn){return!!Yn.controlName}),filter:function(Ye){return[14,47].includes(Ye.type)||[14,47].includes(Ye.sourceControlType)}});Qn({availableControls:Nn(ia,Da)}),hn({viewControls:ut.concat({worksheetName:ia.name,worksheetId:ia.worksheetId,controlId:sn.controlId,controlName:sn.controlName,showControlName:!0,coverCid:Sa[0]?Sa[0].value:void 0,coverType:0,advancedSetting:{coverposition:"0"},showControls:ka.filter(function(Yn){return Yn.attribute!==1}).slice(0,2).map(function(Yn){var Ye=Yn.controlId;return Ye})}),editAttrs:["viewControls"]})})},Pn=function(sn){sn<=1?(hn({viewControls:[{worksheetId:He.worksheetId,worksheetName:He.name}],layersName:[He.name],editAttrs:["viewControls","layersName"]}),Qn({availableControls:Nn(He)})):hn({viewControls:ut.slice(0,sn),layersName:(et||"").slice(0,sn),editAttrs:["viewControls","layersName"]})},ea=function(){return an?a.createElement(Rt.Z,null):xn.length>0?a.createElement(rn.default,{style:{maxHeight:300,overflowY:"auto"}},xn.map(function(sn){var Da=sn.controlId,ia=sn.controlName;return a.createElement(rn.default.Item,{key:Da,onClick:function(){ha(sn),ra({visible:!1})}},a.createElement("i",{className:"icon-link2 Gray_9e Font15"}),a.createElement("span",{style:{marginLeft:"6px"},className:"controlName Bold"},ia))})):a.createElement(Ct,null,_l("\u6CA1\u6709\u53EF\u9009\u62E9\u7684\u5173\u8054\u5B57\u6BB5"))};return a.createElement(vt,null,a.createElement("div",{className:"title title Font13 bold mTop20 mBottom18"},_l("\u663E\u793A\u6837\u5F0F")),a.createElement("div",{className:"settingContent"},a.createElement(Xt,{className:"valignWrapper flex"},W.zh.map(function(Tn){return a.createElement("div",{className:"Relative"},a.createElement("div",{className:"hierachyViewCard mBottom8 Font48 Hand "+Tn.icon+" "+((mn||"0")===Tn.value?"active":""),onClick:function(){mn!==Tn.value&&(ra({hierarchyViewType:Tn.value}),ie((0,y.default)({},nt,{appId:We,advancedSetting:(0,y.default)({},Et,{hierarchyViewType:Tn.value}),editAttrs:["advancedSetting"]})))}}),a.createElement("div",{className:"activeIcon"},a.createElement("span",{className:"icon-done"})),a.createElement("div",null,Tn.text))}))),mn==="0"&&a.createElement("div",{className:"title mTop32 mBottom18 valignWrapper"},a.createElement("span",{className:"Font13 bold mRight60"},_l("\u8FDE\u63A5\u7EBF\u6837\u5F0F")),a.createElement(bn,{size:"middle",checkedValue:Qt,data:W.$J,onChange:function(sn){Qt!==sn&&(ra({hierarchyViewConnectLine:sn}),ie((0,y.default)({},nt,{appId:We,advancedSetting:(0,y.default)({},Et,{hierarchyViewConnectLine:sn}),editAttrs:["advancedSetting"]})))}})),mn==="2"&&a.createElement(a.Fragment,null,a.createElement("div",{className:"title title Font13 bold mTop32 mBottom18"},_l("\u7AD6\u5411\u5C42\u7EA7\u6570")),a.createElement(C.Z,{className:"",data:W.gV,value:Cn,style:{width:"100%"},border:!0,onChange:function(sn){Cn!==sn&&(ra({minHierarchyLevel:sn}),ie((0,y.default)({},nt,{appId:We,advancedSetting:(0,y.default)({},Et,{minHierarchyLevel:sn}),editAttrs:["advancedSetting"]})))},placeholder:_l("2\u7EA7")})),a.createElement("div",{className:"line mTop25 mBottom24",style:{borderBottom:"1px solid #EAEAEA"}}),ut.map(function(Tn,sn){var Da=ct===sn;return Tn.worksheetId===He.worksheetId?a.createElement("li",{className:"currentSheet"},a.createElement("div",{className:N()("display Hand",{borderBottomNone:Da}),onClick:function(){return Ln(sn)}},a.createElement("div",{className:"info"},a.createElement("i",{className:"icon-view Font18 Gray_9e"}),a.createElement("span",{className:"controlName Font14 Bold overflow_ellipsis"},He.name),a.createElement("span",{className:"Gray_9e"},_l(" (\u672C\u8868) "))),a.createElement("div",{className:"handle"},a.createElement("div",{className:"switchVisible"},a.createElement("i",{className:N()(ct===sn?"icon-arrow-up-border":"icon-arrow-down-border","Gray_9e")})))),a.createElement("div",{className:N()("config",{visible:Da})},a.createElement("div",{className:"content"},a.createElement(b.Z,(0,y.default)({},Me,{advancedSetting:Et,handleChange:function(ka){ie((0,y.default)({},nt,{appId:We,advancedSetting:{abstract:ka},editAttrs:["advancedSetting"],editAdKeys:["abstract"]}))}})),a.createElement(le.Z,(0,y.default)({},Me,{worksheetControls:Ue,handleChange:function(ka){ie((0,y.default)({},nt,{appId:We},ka))},handleChangeSort:function(ka){var Sa=ka.newControlSorts,Yn=ka.newShowControls;ie((0,y.default)({appId:We},nt,{controlsSorts:Sa,displayControls:Yn,editAttrs:["controlsSorts","displayControls"]}))}})),a.createElement(ae.Z,(0,y.default)({},Me,{advancedSetting:Et,handleChangeIsCover:function(ka){return ie((0,y.default)({},nt,{appId:We,coverCid:ka==="notDisplay"?"":ka,editAttrs:["coverCid"]}))},handleChangePosition:function(ka,Sa){ie((0,y.default)({},nt,{appId:We,coverType:Sa,advancedSetting:{coverposition:ka},editAdKeys:["coverposition"],editAttrs:["coverType","advancedSetting"]}))},handleChangeCoverWidth:function(ka){ie((0,y.default)({},nt,{appId:We,editAdKeys:["cardwidth"],advancedSetting:{cardwidth:ka},editAttrs:["advancedSetting"]}))},handleChangeType:function(ka){return ie((0,y.default)({},nt,{appId:We,coverType:ka,editAttrs:["coverType"]}))},handleChangeOpencover:function(ka){ie((0,y.default)({},nt,{appId:We,advancedSetting:{opencover:ka},editAttrs:["advancedSetting"],editAdKeys:["opencover"]}))}}))))):a.createElement("li",{key:Tn.worksheetId},a.createElement("div",{className:N()("display Hand",{borderBottomNone:Da}),onClick:function(){return Ln(sn)}},a.createElement("div",{className:"info"},a.createElement("i",{className:"icon-link2 Gray_9e Font18"}),a.createElement("div",{className:"controlName overflow_ellipsis Font14 Bold"},Tn.controlName||Tn.worksheetName),a.createElement("div",{className:"sheetInfo Gray_9e overflow_ellipsis"},_l("( \u5DE5\u4F5C\u8868: %0 )",Tn.worksheetName))),a.createElement("div",{className:"handle"},a.createElement(oa.default,{title:_l("\u5220\u9664\u672C\u7EA7\u548C\u4E4B\u540E\u7684\u6240\u6709\u5C42\u7EA7"),visible:sn===Nt,onVisibleChange:function(ka){return!ka&&ra({delIndex:-1})},popupAlign:{offset:[-100,0]},onDel:function(ka){ka.stopPropagation(),Pn(sn),ra({delIndex:-1})},onCancel:function(ka){ka.stopPropagation(),ra({delIndex:-1})}},a.createElement("i",{className:"delete pointer icon-delete_12",onClick:function(ka){ka.stopPropagation(),ra({delIndex:sn})}})),a.createElement("div",{className:"switchVisible"},a.createElement("i",{className:N()(Da?"icon-arrow-up-border":"icon-arrow-down-border")})))),a.createElement("div",{className:N()("config",{visible:Da})},a.createElement("div",{className:"content"},a.createElement(In.Z,(0,y.default)({},Tn,{updateViewShowcount:Me.updateViewShowcount,visible:Da,handleDisplayChange:function(ka){return hn({viewControls:Yt()(ut,(0,m.default)({},sn,{$apply:function(Yn){return(0,y.default)({},Yn,ka)}})),editAttrs:["viewControls"]})}})))))}),a.createElement(St.Z,{action:["click"],getPopupContainer:function(){return document.body},popupClassName:"addHierarchyRelate",popupAlign:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:!0,adjustY:!0}},popupVisible:_n,onPopupVisibleChange:function(sn){return ra({visible:sn})},popup:a.createElement(mt,{className:"Relative ant-dropdown-menu"},ea())},a.createElement("div",{className:N()("addRelate"),onClick:Ra},a.createElement("i",{className:"icon-add Font20"}),a.createElement("span",{className:"InlineBlock TxtTop"},_l("\u4E0B\u4E00\u7EA7\u5173\u8054")))))}var fe=t(76345),$n=t(31742),gn=t(86674),en=t(46891),_t=t(78618),nn=t(95248),Gt=t(37050),xt=t(60967),Mt=t(69288),ze,yt=(0,ye.Z)(ze=function(Me){(0,r.default)(nt,Me);function nt(){return(0,T.default)(this,nt),(0,E.default)(this,(nt.__proto__||J()(nt)).apply(this,arguments))}return(0,te.default)(nt,[{key:"render",value:function(){var ie=this,We=[],Ue=this.props,Ke=Ue.btnList,ut=Ue.btnData;return Ke.length===ut.length?"":(Ke.map(function(wt){var Et=Z().find(ut,function(et){return et.btnId===wt.btnId});Et||We.push(wt)}),a.createElement("div",{className:"btnListBoxMain"},a.createElement("div",{className:"btnListBox"},We.length>0?a.createElement(a.Fragment,null,a.createElement("ul",{className:"btnListUl"},a.createElement("li",{className:"Gray_9e"},_l("\u9009\u62E9\u5DF2\u6709\u6309\u94AE")),Z().map(We,function(wt,Et){var et=wt.color,Xe=wt.icon,pt=wt.name;return a.createElement("li",{className:"Gray overflow_ellipsis WordBreak btnList",key:Et+"-btnList",onClick:function(){ie.props.setList(wt)}},a.createElement(j.Z,{icon:Xe||"custom_actions",style:{color:et},className:N()("mRight12 Font18",Xe?et?et==="transparent"?"Gray":"":"ThemeColor3":"Gray_bd")}),pt)})),a.createElement("div",{className:"creatBtn Hand",onClick:function(){ie.props.onShowCreateCustomBtn(!0,!1)}},a.createElement("i",{className:"icon icon-add Font16 mRight5"}),_l("\u521B\u5EFA\u65B0\u6309\u94AE"))):"")))}}]),nt}(a.Component))||ze;const Ut=yt;var Wt=t(95742),kn=Mt.Z.confirm,on=(0,Wt.W6)(function(){return a.createElement(j.Z,{className:"mRight10 Font16 mLeft7 Hand",icon:"drag"})}),En=(0,Wt.W8)(function(Me){var nt=Me.name,He=Me.icon,ie=Me.color,We=Me.btnId,Ue=Me.appId,Ke=Me.editBtn,ut=Me.clickType,wt=Me.writeType,Et=Me.writeObject,et=Me.deleteBtn,Xe=Me.isAllView,pt=Me.handleCopy,at=Me.isListOption,ct=(Et===2||wt===2)&&ut===3&&at;return a.createElement("div",{className:"customBtn alignItemsCenter"},a.createElement(on,null),a.createElement("span",{className:"Hand con overflow_ellipsis alignItemsCenter",onClick:function(){Ke(We)}},a.createElement("span",{className:"Font13 WordBreak Gray Bold flexRow alignItemsCenter"},ct?a.createElement(Ne.Z,{placement:"bottom",text:a.createElement("div",{style:{width:300}},_l("\u6279\u91CF\u64CD\u4F5C\u7684\u6309\u94AE\u4E0D\u652F\u6301\u5173\u8054\u5F62\u6001\u8868\u5355\u586B\u5199"))},a.createElement(j.Z,{icon:"error1",style:{color:"red"},className:N()("mRight12 Font18")})):a.createElement(j.Z,{icon:He||"custom_actions",style:{color:ie},className:N()("mRight12 Font18",He?ie?ie==="transparent"?"Gray":"":"ThemeColor3":"Gray_bd")}),a.createElement("span",{className:N()("flex overflow_ellipsis",{Gray_9e:ct})},nt||"")),a.createElement(j.Z,{className:"Font16 Hand copyIcon",icon:"copy",onClick:function(mn){return mn.stopPropagation(),kn({title:a.createElement("span",{className:"WordBreak Block"},_l("\u590D\u5236\u81EA\u5B9A\u4E49\u52A8\u4F5C\u201C%0\u201D",nt)),description:_l("\u5C06\u590D\u5236\u76EE\u6807\u81EA\u5B9A\u4E49\u52A8\u4F5C\u7684\u6240\u6709\u8282\u70B9\u548C\u914D\u7F6E"),onOk:function(){pt(We)}})}}),a.createElement(j.Z,{className:"Font16 Hand editIcon mLeft15",icon:"new_mail"})),a.createElement(j.Z,{className:"Font16 Hand mLeft15 mRight15",icon:"delete2",onClick:function(){et(We,Xe)}}))}),fn=(0,Wt.JN)(function(Me){var nt=Me.items,He=Me.editBtn,ie=Me.deleteBtn,We=Me.handleCopy,Ue=Me.isListOption;return a.createElement("div",{className:""},Z().map(nt,function(Ke,ut){return a.createElement(En,(0,y.default)({},Ke,{isListOption:Ue,name:Ke.name,icon:Ke.icon,color:Ke.color,key:"item_"+ut,index:ut,editBtn:He.bind(Ke),deleteBtn:ie.bind(Ke),handleCopy:We.bind(Ke)}))}))}),jn=function(nt){var He=[{value:2,text:_l("\u5E94\u7528\u4E8E\u6240\u6709\u8BB0\u5F55\u4E2D\u7684\u6309\u94AE\uFF0C\u65E0\u6CD5\u4ECE\u5F53\u524D\u89C6\u56FE\u4E2D\u5220\u9664"),disabled:!0},{value:0,text:_l("\u4EC5\u4ECE\u5F53\u524D\u89C6\u56FE\u4E2D\u79FB\u9664")},{value:1,text:_l("\u5220\u9664\u6309\u94AE\uFF0C\u4E0E\u4E4B\u5BF9\u5E94\u89E6\u53D1\u7684\u5DE5\u4F5C\u6D41\u4E5F\u5C06\u88AB\u5220\u9664")}];return He.filter(function(ie){return ie.value!==(nt?0:2)})},Ta=function(Me){(0,r.default)(nt,Me);function nt(He){(0,T.default)(this,nt);var ie=(0,E.default)(this,(nt.__proto__||J()(nt)).call(this,He));return ie.fetchBtnByAll=function(){var We=ie.props,Ue=We.worksheetId,Ke=We.appId,ut=We.rowId;ie.props.refreshFn(Ue,Ke,"",ut)},ie.optionWorksheetBtn=function(We,Ue,Ke){var ut=ie.props,wt=ut.worksheetId,Et=ut.appId,et=ut.viewId,Xe=ut.rowId,pt="";ie.state.optionType===9?pt="":pt=wt,zt.Z.optionWorksheetBtn({appId:Et,viewId:et,btnId:We,worksheetId:pt,optionType:Ue}).then(function(at){Ke(at)})},ie.handleMoveApp=function(We){var Ue=ie.props.onSortBtns,Ke=[],ut=[];We.map(function(wt,Et){Ke.push(wt),ut.push(wt.btnId)}),ie.setState({btnData:Ke},function(){Ue(oe()(ut)),ie.props.onFresh()})},ie.handleSortEnd=function(We){var Ue=We.oldIndex,Ke=We.newIndex;if(Ue!==Ke){var ut=ie.state.btnData.slice(),wt=ut.splice(Ue,1)[0];ut.splice(Ke,0,wt),ie.handleMoveApp(ut)}},ie.editBtn=function(We){ie.onShowCustomBtn(!0,!0,We)},ie.deleteBtn=function(We,Ue){ie.setState({showDeleteDialog:!0,btnId:We,isAllView:Ue,value:Ue?1:0})},ie.handleCopy=function(We){var Ue=ie.props,Ke=Ue.worksheetId,ut=Ue.appId,wt=Ue.viewId;zt.Z.copyWorksheetBtn({appId:ut,viewId:wt,btnId:We,worksheetId:Ke}).then(function(Et){Et?(ie.props.onFresh(),alert(_l("\u590D\u5236\u6210\u529F"))):alert(_l("\u590D\u5236\u5931\u8D25"),2)})},ie.renderDeleteDialog=function(){var We=ie.state.isAllView;return a.createElement(Mt.Z,{title:_l("\u5220\u9664\u6309\u94AE"),okText:_l("\u5220\u9664"),cancelText:_l("\u53D6\u6D88"),confirm:"danger",className:"deleteCustomBtnDialog",headerClass:"deleteCustomBtnDialogTitle",bodyClass:"deleteCustomBtnDialogCon",onCancel:function(){ie.setState({showDeleteDialog:!1})},onOk:function(){ie.optionWorksheetBtn(ie.state.btnId,ie.state.value===0?ie.props.isListOption?24:22:9,function(Ke){ie.setState({showDeleteDialog:!1},function(){ie.props.onFresh()})})},visible:ie.state.showDeleteDialog,updateTrigger:"fasle"},a.createElement(Y.ZP,{data:jn(We),size:"small",onChange:function(Ke){ie.setState({value:Ke})},checkedValue:ie.state.value}))},ie.onShowCustomBtn=function(We,Ue){var Ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";ie.props.onShowCreateCustomBtn(We,Ue,Ke,ie.props.isListOption)},ie.state={btnData:He.btnData||[],showBtn:!1,btnList:He.btnList||[],showDeleteDialog:!1,value:0,btnId:""},ie}return(0,te.default)(nt,[{key:"componentDidMount",value:function(){this.setState({btnData:this.props.btnData,btnList:this.props.btnList})}},{key:"componentWillReceiveProps",value:function(ie){(!Z().isEqual(ie.btnData,this.props.btnData)||!Z().isEqual(ie.btnList,this.props.btnList))&&this.setState({btnData:ie.btnData,btnList:ie.btnList})}},{key:"render",value:function(){var ie=this,We=this.state,Ue=We.btnData,Ke=We.btnList;return a.createElement(a.Fragment,null,a.createElement("div",{className:"customBtnBox mTop13"},Ue&&a.createElement(fn,{items:Ue,isListOption:this.props.isListOption,useDragHandle:!0,onSortEnd:this.handleSortEnd,helperClass:"customBtnSortableList",editBtn:this.editBtn,deleteBtn:this.deleteBtn,handleCopy:this.handleCopy}),a.createElement("div",{className:"addBtn Hand mTop20 Relative",onClick:function(){Ke.length<=Ue.length?ie.onShowCustomBtn(!0,!1):ie.setState({showBtn:!ie.state.showBtn},function(){if(ie.state.showBtn){var wt=document.querySelector(".btnListBoxMain");wt.scrollIntoView(!1)}})}},a.createElement("i",{className:"icon icon-add Font18 mRight5 TxtMiddle InlineBlock"}),a.createElement("span",{className:"Bold TxtMiddle InlineBlock"},_l("\u81EA\u5B9A\u4E49\u52A8\u4F5C")),this.state.showBtn&&a.createElement(Ut,{btnList:Ke,btnData:Ue,setList:function(wt){ie.optionWorksheetBtn(wt.btnId,ie.props.isListOption?23:21,function(Et){ie.setState({showBtn:!1},function(){ie.props.onFresh()})})},onClickAway:function(){return ie.setState({showBtn:!1})},onShowCreateCustomBtn:this.onShowCustomBtn}))),this.state.showDeleteDialog&&this.renderDeleteDialog())}}]),nt}(a.Component);const zn=Ta;var pa=(0,R.Z)([`
  .line {
    border-top: 1px solid #eaeaea;
    margin-top: 24px;
  }
`],[`
  .line {
    border-top: 1px solid #eaeaea;
    margin-top: 24px;
  }
`]),Ea=q.ZP.div(pa),la=function(Me){(0,r.default)(nt,Me);function nt(He){(0,T.default)(this,nt);var ie=(0,E.default)(this,(nt.__proto__||J()(nt)).call(this,He));return ie.fetchBtnByAll=function(){var We=ie.props,Ue=We.worksheetId,Ke=We.appId,ut=We.rowId;ie.props.refreshFn(Ue,Ke,"",ut)},ie.updateViewSet=function(We){ie.props.updateCurrentView(k()(ie.props.view,{advancedSetting:(0,ke.ob)(ie.props.view,(0,y.default)({},We)),editAttrs:["advancedSetting"]}))},ie.state={openList:["clickAction","recordAction","bathAction"]},ie}return(0,te.default)(nt,[{key:"render",value:function(){var ie=this,We=this.state.openList,Ue=Z().get(this.props.view,"advancedSetting")||{},Ke=Ue.detaildisable,ut=Ue.listdisable,wt=Ue.hidebtn,Et=Ue.clicktype,et=Et===void 0?"0":Et,Xe=Ue.clickcid,pt=Ue.listbtns,at=Ue.detailbtns,ct=function(_n,ra){var Nn=[],Ht=_n.filter(function(Sn){return!ra.includes(Sn.btnId)});return Nn=ra.map(function(Sn){return _n.find(function(Dn){return Dn.btnId===Sn})}).filter(function(Sn){return!!Sn}),[].concat((0,i.Z)(Nn),(0,i.Z)(Ht))},Nt=ct(this.props.btnList.filter(function(Cn){return safeParse(Z().get(Cn,"advancedSetting.listviews"),"array").includes(ie.props.viewId)||Cn.isAllView===1}),safeParse(pt,"array")),mn=ct(this.props.btnList.filter(function(Cn){return safeParse(Z().get(Cn,"advancedSetting.detailviews"),"array").includes(ie.props.viewId)||Cn.isAllView===1}),safeParse(at,"array")),Qt=!["6"].includes(Z().get(this.props,"view.viewType")+"");return a.createElement(Ea,null,a.createElement("div",{className:"viewSetTitle"},_l("\u81EA\u5B9A\u4E49\u52A8\u4F5C")),Qt&&a.createElement("div",{className:"headerCon mTop24 Hand",onClick:function(){ie.setState({openList:We.includes("clickAction")?We.filter(function(_n){return _n!=="clickAction"}):We.concat("clickAction")})}},a.createElement(j.Z,{icon:We.includes("clickAction")?"arrow-down":"arrow-right-tip",className:"Font14 Gray_9e"}),a.createElement("span",{className:"Font15 Bold mLeft10"},_l("\u70B9\u51FB\u8BB0\u5F55\u65F6"))),We.includes("clickAction")&&Qt&&a.createElement(a.Fragment,null,a.createElement(C.Z,{value:et,className:"w100 mTop24",onChange:function(_n){ie.updateViewSet({clicktype:_n})},border:!0,isAppendToBody:!0,data:[{text:_l("\u6253\u5F00\u8BB0\u5F55\u8BE6\u60C5"),value:v.lL.OPEN_RECORD},{text:_l("\u6253\u5F00\u94FE\u63A5"),value:v.lL.OPEN_LINK},{text:_l("\u65E0"),value:v.lL.NONE}]}),et==="1"&&a.createElement(a.Fragment,null,a.createElement("p",{className:"Bold Gray_75 Font13 mTop25 mBottom0"},_l("\u94FE\u63A5\u5B57\u6BB5")),a.createElement(C.Z,{placeholder:_l("\u9009\u62E9\u8BB0\u5F55\u4E2D\u7684\u6587\u672C\u5B57\u6BB5"),value:Xe,className:"mTop10 w100",onChange:function(_n){ie.updateViewSet({clickcid:_n})},border:!0,isAppendToBody:!0,data:(this.props.worksheetControls||[]).filter(function(Cn){return[1,2].includes(Cn.type)&&!gn.c_.includes(Cn.controlId)}).map(function(Cn){return{value:Cn.controlId,text:Cn.controlName}})}))),Qt&&a.createElement("div",{className:"line"}),a.createElement("div",{className:"headerCon mTop24 Hand",onClick:function(){ie.setState({openList:We.includes("recordAction")?We.filter(function(_n){return _n!=="recordAction"}):We.concat("recordAction")})}},a.createElement(j.Z,{icon:We.includes("recordAction")?"arrow-down":"arrow-right-tip",className:"Font14 Gray_9e"}),a.createElement("span",{className:"Font15 Bold mLeft10"},_l("\u8BB0\u5F55\u8BE6\u60C5")),mn.length>0&&a.createElement("span",{className:"num Bold Font15 Gray_75 mLeft8"},mn.length)),We.includes("recordAction")&&a.createElement(a.Fragment,null,a.createElement("div",{className:"customBtnBox"},a.createElement("div",{className:"flexRow mTop25 alignItemsCenter"},a.createElement("p",{className:"Bold Gray_75 Font13 mAll0 flex"},_l("\u81EA\u5B9A\u4E49\u52A8\u4F5C")),mn.length>0&&a.createElement(xt.Z,{className:"hideBtn",text:_l("\u9690\u85CF\u4E0D\u53EF\u7528\u7684\u6309\u94AE"),checked:wt==="1",onClick:function(){ie.updateViewSet({hidebtn:wt==="1"?"":"1"})}})),a.createElement(zn,(0,y.default)({},this.props,{isListOption:!1,onFresh:function(){return ie.fetchBtnByAll()},btnData:mn,btnList:this.props.btnList,onSortBtns:function(_n){ie.updateViewSet({detailbtns:_n})}})))),this.props.isSheetView&&a.createElement(a.Fragment,null,a.createElement("div",{className:"line"}),a.createElement("div",{className:"headerCon mTop24 Hand",onClick:function(){ie.setState({openList:We.includes("bathAction")?We.filter(function(_n){return _n!=="bathAction"}):We.concat("bathAction")})}},a.createElement(j.Z,{icon:We.includes("bathAction")?"arrow-down":"arrow-right-tip",className:"Font14 Gray_9e"}),a.createElement("span",{className:"Font15 Bold mLeft10"},_l("\u6279\u91CF\u64CD\u4F5C")),Nt.length>0&&a.createElement("span",{className:"num Bold Font15 Gray_75 mLeft8"},Nt.length)),We.includes("bathAction")&&a.createElement(a.Fragment,null,a.createElement("div",{className:"customBtnBox"},a.createElement("p",{className:"Bold Gray_75 Font13 mTop25 mBottom0"},_l("\u81EA\u5B9A\u4E49\u52A8\u4F5C")),a.createElement(zn,(0,y.default)({},this.props,{isListOption:!0,onFresh:function(){return ie.fetchBtnByAll()},btnData:Nt,btnList:this.props.btnList.filter(function(Cn){return!((Cn.writeObject===2||Cn.writeType===2)&&Cn.clickType===3)}),onSortBtns:function(_n){ie.updateViewSet({listbtns:_n})}}))))))}}]),nt}(a.Component);const Kn=la;var sa=t(42185),ba=t(62521),Fa=t(16469),wa=t(39612),Na=t(95438),Za=(0,R.Z)([`
  height: 100%;
  .commonConfigItem,
  .FilterConfigCon,
  .footer {
    padding: 0 40px;
    &.FilterConfigCon {
      overflow: auto;
      max-height: calc(100% - 60px);
    }
  }
  .viewSetTitle {
    padding: 25px 40px 0 !important;
  }
  .saveBtn,
  .cancelBtn {
    line-height: 32px;
    min-height: 32px;
    padding: 0 16px;
    border-radius: 16px;
    min-width: 0;
  }
  .cancelBtn {
    font-size: 14px;
    background: #f5f5f5;
    &:hover {
      background: #eaeaea;
    }
    font-weight: bold;
    display: inline-block;
    box-sizing: border-box;
    text-shadow: none;
    border: none;
    outline: none;
    vertical-align: middle;
    cursor: pointer;
    user-select: none;
    font-weight: bold;
  }
`],[`
  height: 100%;
  .commonConfigItem,
  .FilterConfigCon,
  .footer {
    padding: 0 40px;
    &.FilterConfigCon {
      overflow: auto;
      max-height: calc(100% - 60px);
    }
  }
  .viewSetTitle {
    padding: 25px 40px 0 !important;
  }
  .saveBtn,
  .cancelBtn {
    line-height: 32px;
    min-height: 32px;
    padding: 0 16px;
    border-radius: 16px;
    min-width: 0;
  }
  .cancelBtn {
    font-size: 14px;
    background: #f5f5f5;
    &:hover {
      background: #eaeaea;
    }
    font-weight: bold;
    display: inline-block;
    box-sizing: border-box;
    text-shadow: none;
    border: none;
    outline: none;
    vertical-align: middle;
    cursor: pointer;
    user-select: none;
    font-weight: bold;
  }
`]),ya=q.ZP.div(Za);function An(Me){var nt=Me.view,He=Me.projectId,ie=Me.appId,We=Me.sheetSwitchPermit,Ue=Me.updateCurrentView,Ke=Me.columns,ut=Ke===void 0?[]:Ke,wt=(0,qn.Z)({shwoMoreMenu:!1,existingFilters:[],appearFilters:nt.filters,version:0}),Et=(0,Ie.Z)(wt,2),et=Et[0],Xe=et.existingFilters,pt=et.shwoMoreMenu,at=et.appearFilters,ct=et.version,Nt=Et[1];(0,a.useEffect)(function(){var Qt=Me.worksheetId;zt.Z.getWorksheetFilters({worksheetId:Qt}).then(function(Cn){Nt({existingFilters:Xe.concat(Cn)})}).catch(function(Cn){alert(_l("\u83B7\u53D6\u7B5B\u9009\u5217\u8868\u5931\u8D25"),2)})},[Me.worksheetId]),(0,a.useEffect)(function(){var Qt=Me.view;Nt({appearFilters:Qt.filters||[]})},[Me.view]);var mn=function(){var Cn=at.map(function(ra){return(0,Na.s)(ra,ut)}).filter(Z().identity),_n=(0,se.Pf)(Cn);Ue(k()(nt,{filters:_n,editAttrs:["filters"]}),function(){Nt({version:ct+1}),alert(_l("\u4FDD\u5B58\u6210\u529F"))})};return a.createElement(ya,{className:"flexColumn"},a.createElement("div",{className:"viewSetTitle"},_l("\u8FC7\u6EE4")),a.createElement("div",{className:"flexRow commonConfigItem"},a.createElement("div",{className:"Gray_9e mTop8 flex"},_l("\u6DFB\u52A0\u7B5B\u9009\u6761\u4EF6\uFF0C\u9650\u5236\u51FA\u73B0\u5728\u6B64\u89C6\u56FE\u4E2D\u7684\u8BB0\u5F55")),Xe.length?a.createElement(St.Z,{popupVisible:pt,onPopupVisibleChange:function(Cn){Nt({shwoMoreMenu:Cn})},popupClassName:"DropdownPanelTrigger",action:["click"],popupAlign:{points:["tl","bl"],offset:[-140,0]},popup:a.createElement(ba.Z,null,Xe.map(function(Qt,Cn){var _n=Qt.filterId,ra=Qt.name,Nn=Qt.items;return a.createElement(Fa.Z,{onClick:function(){Nt({appearFilters:Nn,shwoMoreMenu:!1,version:ct+1})},key:_n},a.createElement("span",{className:"text"},ra||_l("\u672A\u547D\u540D\u7B5B\u9009\u5668 %0",Cn+1)))}))},a.createElement(Ne.Z,{disable:pt,popupPlacement:"bottom",text:a.createElement("span",null,_l("\u5DF2\u4FDD\u5B58\u7684\u7B5B\u9009\u5668"))},a.createElement("div",{className:"valignWrapper more pointer"},a.createElement("span",null,_l("\u66F4\u591A")),a.createElement(j.Z,{icon:"arrow-down"})))):null),a.createElement("div",{className:"flex overflowHidden"},a.createElement("div",{className:"FilterConfigCon"},a.createElement(wa.Z,{version:ct,supportGroup:!0,canEdit:!0,feOnly:!0,filterColumnClassName:"sheetViewFilterColumnOption",projectId:He,appId:ie,viewId:nt.viewId,sheetSwitchPermit:We,filterResigned:!1,columns:ut,conditions:at,urlParams:JSON.parse((nt.advancedSetting||{}).urlparams||"[]"),onConditionsChange:function(Cn){Nt({appearFilters:Cn})}})),(!Z().isEqual(at,nt.filters)||at.length>0)&&a.createElement("div",{className:"footer pTop12 pBottom12 "},a.createElement(sa.ZP,{type:"primary",onClick:function(){return mn()},className:"saveBtn"},_l("\u4FDD\u5B58")),a.createElement("div",{className:"cancelBtn Hand Gray_75 mLeft16",onClick:function(){Nt({appearFilters:nt.filters,version:ct+1})}},_l("\u53D6\u6D88")))))}var ma=t(21459),fa=function(Me){(0,r.default)(nt,Me);function nt(He){(0,T.default)(this,nt);var ie=(0,E.default)(this,(nt.__proto__||J()(nt)).call(this,He));return ie.getHeight=function(){ie.setState({height:document.documentElement.clientHeight-280})},ie.state={height:document.documentElement.clientHeight-280},ie}return(0,te.default)(nt,[{key:"componentDidMount",value:function(){$(window).on("resize",this.getHeight)}},{key:"componentWillUnmount",value:function(){$(window).off("resize",this.getHeight)}},{key:"render",value:function(){var ie=this.state.height,We=this.props,Ue=We.columns,Ke=We.view,ut=Ke===void 0?{}:Ke,wt=We.formatColumnsListForControls,Et=We.columnChange,et=ut.controls,Xe=et===void 0?[]:et,pt=Xe.filter(function(at){return Z().find(Ue,function(ct){return ct.controlId===at})});return a.createElement("div",{className:"commonConfigItem"},a.createElement("div",{className:"Gray_9e mTop8 mBottom4"},_l("\u8BBE\u7F6E\u6B64\u89C6\u56FE\u4E0B\u7684\u8868\u5355\u4E2D\u9700\u8981\u5BF9\u7528\u6237\u9690\u85CF\u7684\u5B57\u6BB5")),a.createElement("div",{className:"ming Dropdown pointer w100 mBottom10 hideColumns"},a.createElement(ma.Z,{layout:2,noShowCount:!0,noempty:!1,maxHeight:ie,dragable:!1,showControls:Ue.filter(function(at){return!pt.includes(at.controlId)}).map(function(at){return at.controlId}),columns:wt(Ue),onChange:Et,showTabs:!0})))}}]),nt}(a.Component),Ma,Ya,Ba,La=(0,R.Z)([`
  .rowClumns {
    label {
      flex: 1;
    }
  }
`],[`
  .rowClumns {
    label {
      flex: 1;
    }
  }
`]),Qa=q.ZP.div(La),nr=(Ya=Ma=function(Me){(0,r.default)(nt,Me);function nt(He){(0,T.default)(this,nt);var ie=(0,E.default)(this,(nt.__proto__||J()(nt)).call(this,He));Ba.call(ie);var We=He.view,Ue=We===void 0?{}:We,Ke=(0,Q.aq)(Ue),ut=Ke.appshowtype,wt=ut===void 0?"0":ut,Et=Ke.checkradioid;return ie.state={appshowtype:wt,checkradioid:Et},ie}return(0,te.default)(nt,[{key:"componentWillReceiveProps",value:function(ie){var We=(0,Q.aq)(ie.view),Ue=We.appshowtype,Ke=Ue===void 0?"0":Ue,ut=We.checkradioid,wt=ut===void 0?"":ut;(!Z().isEqual(this.state.appshowtype,Ke)||!Z().isEqual(this.state.checkradioid,wt))&&this.setState({appshowtype:Ke,checkradioid:wt})}},{key:"render",value:function(){var ie=this.props.view,We=v.B[ie.viewType]==="gallery";return We?this.renderGallerySet():this.renderCon()}}]),nt}(a.Component),Ba=function(){var nt=this;this.updateView=function(He,ie){nt.props.updateCurrentView(k()(He,{filters:(0,se.Gt)(He.filters)}),ie)},this.renderSet=function(){var He=nt.props,ie=He.view,We=He.appId,Ue=ie.advancedSetting,Ke=Ue===void 0?{}:Ue,ut=(0,Q.aq)(ie),wt=ut.appshowtype,Et=wt===void 0?"0":wt;return a.createElement(a.Fragment,null,a.createElement("div",{className:"viewSetTitle"},_l("\u5361\u7247\u663E\u793A\u5185\u5BB9")),a.createElement("div",{className:"commonConfigItem mTop24"},a.createElement(b.Z,(0,y.default)({},nt.props,{advancedSetting:Ke,handleChange:function(Xe){nt.updateView((0,y.default)({},ie,{appId:We,advancedSetting:{abstract:Xe},editAdKeys:["abstract"],editAttrs:["advancedSetting"]}),!1)}})),a.createElement(le.Z,(0,y.default)({},nt.props,{hideShowControlName:!0,maxCount3:Et==="0",text:_l("\u4E00\u884C\u4E09\u5217\u65F6\uFF0C\u6700\u591A\u53EF\u8BBE\u7F6E3\u4E2A\u663E\u793A\u5B57\u6BB5\u3002\u5982\u679C\u8981\u663E\u793A\u66F4\u591A\u5B57\u6BB5\u8BF7\u4F7F\u7528\u5176\u4ED6\u5E03\u5C40\u65B9\u5F0F"),handleChange:function(Xe){nt.updateView((0,y.default)({},ie,{appId:We},Xe),!1)},handleChangeSort:function(Xe){var pt=Xe.newControlSorts,at=Xe.newShowControls;nt.updateView((0,y.default)({appId:We},ie,{controlsSorts:pt,displayControls:at,customDisplay:!0,editAttrs:["controlsSorts","displayControls","customDisplay"]}),!1)}})),a.createElement(ae.Z,(0,y.default)({},nt.props,{advancedSetting:Ke,handleChangeIsCover:function(Xe){return nt.updateView((0,y.default)({},ie,{appId:We,coverCid:Xe==="notDisplay"?"":Xe,editAttrs:["coverCid"]}),!1)},handleChangePosition:function(Xe,pt){nt.updateView((0,y.default)({},ie,{appId:We,coverType:pt,advancedSetting:{coverposition:Xe},editAttrs:["advancedSetting","coverType"],editAdKeys:["coverposition"]}),!1)},handleChangeType:function(Xe){return nt.updateView((0,y.default)({},ie,{appId:We,coverType:Xe,editAttrs:["coverType"]}),!1)},handleChangeOpencover:function(Xe){nt.updateView((0,y.default)({},ie,{appId:We,advancedSetting:{opencover:Xe},editAttrs:["advancedSetting"],editAdKeys:["opencover"]}))}})),a.createElement("div",{className:"line mTop32",style:{borderBottom:"1px solid #EAEAEA"}}),nt.renderCheckRadio()))},this.renderCheckRadio=function(){var He=nt.props,ie=He.worksheetControls,We=ie===void 0?[]:ie,Ue=He.view,Ke=He.appId,ut=We.filter(function(et){return et.type===36}),wt=nt.state.checkradioid,Et=ut.length>0?Z().map(ut,function(et){return{text:et.controlName,value:et.controlId}}):[];return a.createElement(a.Fragment,null,a.createElement("div",{className:"title Font13 mTop24 bold"},_l("\u663E\u793A\u68C0\u67E5\u6846")),a.createElement("div",{className:"settingContent"},a.createElement("p",{className:"mTop6 mBottom8 Gray_9e viewSetText"},_l("\u9009\u62E9\u4E00\u4E2A\u68C0\u67E5\u6846\u5B57\u6BB5\u5728\u6807\u9898\u524D\u663E\u793A\uFF0C\u53EF\u5FEB\u901F\u5728\u5361\u7247\u6807\u8BB0\u72B6\u6001")),a.createElement(C.Z,{data:Et.concat({value:"",text:_l("\u4E0D\u663E\u793A")}),value:wt||"",border:!0,style:{width:"100%"},onChange:function(Xe){nt.updateView((0,y.default)({},Ue,{appId:Ke,advancedSetting:{checkradioid:Xe},editAdKeys:["checkradioid"],editAttrs:["advancedSetting"]}),!1)}})))},this.changeShowType=function(He){var ie=nt.props,We=ie.view,Ue=ie.appId;nt.setState({appshowtype:He},function(){nt.updateView((0,y.default)({},We,{appId:Ue,advancedSetting:{appshowtype:He},editAttrs:["advancedSetting"],editAdKeys:["appshowtype"]}),!1)})},this.renderGallerySet=function(){var He=nt.props,ie=He.view,We=He.appId;return a.createElement(Qa,null,a.createElement("div",{className:"viewSetTitle"},_l("\u79FB\u52A8\u7AEF\u663E\u793A")),a.createElement("div",{className:"title Font13 mTop24 bold"},_l("\u6BCF\u884C\u6570\u91CF")),a.createElement("div",{className:"settingContent"},a.createElement("p",{className:"mTop6 mBottom8 Gray_9e viewSetText"},_l("\u4E3A\u624B\u673A\u7AD6\u5C4F(\u5C4F\u5E55\u5BBD\u5EA6\u5C0F\u4E8E480pt)\u8BBE\u7F6E\u6BCF\u884C\u663E\u793A\u7684\u8BB0\u5F55\u6570\u91CF")),a.createElement(Y.ZP,{size:"middle",className:"mBottom20 rowClumns",checkedValue:Z().get(ie,"advancedSetting.rowcolumns")==="2"?"2":"1",data:[{text:_l("\u4E00\u4E2A"),value:"1"},{text:_l("\u4E24\u4E2A"),value:"2"}],onChange:function(Ke){nt.updateView((0,y.default)({},ie,{appId:We,advancedSetting:{rowcolumns:Ke},editAdKeys:["rowcolumns"],editAttrs:["advancedSetting"]}),!1)}})),nt.renderCheckRadio())},this.renderCon=function(){var He=nt.state.appshowtype;return a.createElement(a.Fragment,null,a.createElement("div",{className:"viewSetTitle"},_l("\u79FB\u52A8\u7AEF\u663E\u793A")),a.createElement("div",{className:"commonConfigItem"},a.createElement("div",{className:"Gray_9e mTop8 mBottom24"},_l("\u8868\u683C\u89C6\u56FE\u4E2D\u7684\u8BB0\u5F55\u5728\u79FB\u52A8\u7AEF\u4EE5\u5361\u7247\u7684\u5F62\u5F0F\u5448\u73B0\uFF0C\u4E3A\u79FB\u52A8\u7AEF\u8BBE\u7F6E\u8BB0\u5F55\u7684\u663E\u793A\u5E03\u5C40\uFF0C\u4EE5\u4FBF\u4E8E\u79FB\u52A8\u7AEF\u7684\u6570\u636E\u6D4F\u89C8\u548C\u64CD\u4F5C\u3002"))),a.createElement("div",{className:"commonConfigItem Font13 bold"},_l("\u5361\u7247\u6A21\u677F")),a.createElement("div",{className:"commonConfigItem mBottom32"},a.createElement("ul",{className:"cardUl"},[1,2,0].map(function(ie){return a.createElement("li",{className:N()("mTop12 Hand",{current:He===ie+"",mRight12:ie===1,mBottom4:ie!==0}),onClick:function(){nt.changeShowType(ie+"")}})}))),nt.renderSet())}},Ya),Rr=t(67092),hr=t(46630),yr=t(57479),br=t.n(yr),Lr=t(26552),lr=t(5913),Or=(0,R.Z)([`
  .hasData {
    .checkBox {
      vertical-align: middle;
    }
    .ming.Checkbox.checked .Checkbox-box {
      // background-color: #9e9e9e;
    }
    .ming.Checkbox.Checkbox--disabled {
      color: #333;
    }
    .iconWrap {
      display: inline-block;
      vertical-align: middle;
      margin-left: 8px;
    }
  }
  .noData {
    .cover {
      padding-top: 60px;
      img {
        width: 100%;
        display: block;
      }
    }
    h6 {
      font-size: 20px;
      font-weight: 500;
      color: #333333;
      text-align: center;
      padding: 0;
      padding-top: 32px;
      margin: 0;
    }
    .text {
      font-weight: 400;
      text-align: center;
      color: #9e9e9e;
      line-height: 20px;
      font-size: 13px;
      width: 80%;
      margin: 24px auto 0;
    }
  }
`],[`
  .hasData {
    .checkBox {
      vertical-align: middle;
    }
    .ming.Checkbox.checked .Checkbox-box {
      // background-color: #9e9e9e;
    }
    .ming.Checkbox.Checkbox--disabled {
      color: #333;
    }
    .iconWrap {
      display: inline-block;
      vertical-align: middle;
      margin-left: 8px;
    }
  }
  .noData {
    .cover {
      padding-top: 60px;
      img {
        width: 100%;
        display: block;
      }
    }
    h6 {
      font-size: 20px;
      font-weight: 500;
      color: #333333;
      text-align: center;
      padding: 0;
      padding-top: 32px;
      margin: 0;
    }
    .text {
      font-weight: 400;
      text-align: center;
      color: #9e9e9e;
      line-height: 20px;
      font-size: 13px;
      width: 80%;
      margin: 24px auto 0;
    }
  }
`]),Vr=q.ZP.div(Or);function Kr(Me){var nt=Me.worksheetControls,He=nt===void 0?[]:nt,ie=Me.setFastFilter,We=Me.view,Ue=We===void 0?{}:We,Ke=Me.updateCurrentView,ut=Me.currentSheetInfo,wt=Ue.advancedSetting,Et=wt===void 0?{}:wt,et=Et.enablebtn,Xe=Et.clicksearch,pt=(0,a.useState)(Ue.fastFilters||[]),at=(0,Ie.Z)(pt,2),ct=at[0],Nt=at[1],mn=(0,a.useState)(),Qt=(0,Ie.Z)(mn,2),Cn=Qt[0],_n=Qt[1];(0,a.useEffect)(function(){var Qn=(0,lr.oF)(Ue.fastFilters||[],ut.switches||[]);Nt(Qn)},[Ue.fastFilters]);var ra=function(Ln){var hn=Ln.oldIndex,Ra=Ln.newIndex;if(hn!==Ra){var ha=ct.slice(),Pn=ha.splice(hn,1)[0];ha.splice(Ra,0,Pn),Sn(ha)}},Nn=function(Ln){ie(!0,Ln),_n(!1)},Ht=function(Ln){Sn(ct.filter(function(hn){return hn.controlId!==Ln}))},Sn=function(Ln){var hn=Ln.length>0?(0,y.default)({},Et,{enablebtn:Ln.length>3?"1":Et.enablebtn}):(0,y.default)({},Et,{clicksearch:"0",enablebtn:"0"});Ke(k()(Ue,{fastFilters:Ln.map(function(Ra){return(0,ke.zy)(Ra)}),advancedSetting:(0,ke.D0)(Ue,_.omit(hn,"navfilters")),editAttrs:["fastFilters","advancedSetting"]}))},Dn=function(Ln){var hn=(0,hr.Nz)(Ln),Ra=ct.concat(hn);ct.length<=0&&Ra.length===1?(_n(!1),setTimeout(function(){_n(!0)},500)):_n(void 0),Sn(Ra),ie(!1,Ln.controlId)},xn=function(Ln){_n(!1),Ke(k()(Ue,{advancedSetting:(0,ke.ob)(Ue,(0,y.default)({},Ln)),editAttrs:["advancedSetting"]}))},an=function(){return a.createElement(Lr.Z,{fastFilters:ct,worksheetControls:(0,lr.oF)(He,ut.switches||[]),onEdit:Nn,onDelete:Ht,onAdd:Dn,onSortEnd:ra,from:"fastFilter",showAddCondition:Cn})};return a.createElement(Vr,null,ct.length>0?a.createElement("div",{className:"hasData"},a.createElement("div",{className:"viewSetTitle"},_l("\u5FEB\u901F\u7B5B\u9009")),a.createElement("div",{className:"Gray_9e mTop8 mBottom4"},_l("\u9009\u62E9\u5B57\u6BB5\u4F5C\u4E3A\u5FEB\u901F\u7B5B\u9009\u5668\u5E73\u94FA\u663E\u793A\u5728\u89C6\u56FE\u4E2D\uFF0C\u4EE5\u5E2E\u52A9\u7528\u6237\u5FEB\u901F\u67E5\u8BE2\u8BB0\u5F55\u3002")),an(),a.createElement("div",{className:"Gray mTop32 Bold"},_l("\u8BBE\u7F6E")),a.createElement("div",{className:"mTop13"},a.createElement(xt.Z,{disabled:ct.length>3,className:"checkBox InlineBlock",text:_l("\u542F\u7528\u67E5\u8BE2\u6309\u94AE"),checked:et==="1",onClick:function(){xn({enablebtn:et!=="1"?"1":"0"})}}),a.createElement(Ne.Z,{popupPlacement:"bottom",text:a.createElement("span",null,_l("\u542F\u7528\u6309\u94AE\u540E\uFF0C\u70B9\u51FB\u67E5\u8BE2\u6309\u94AE\u6267\u884C\u7B5B\u9009\u3002\u5F53\u7B5B\u9009\u5B57\u6BB5\u8D85\u8FC73\u4E2A\u65F6\u5FC5\u987B\u542F\u7528\u3002"))},a.createElement("div",{className:"iconWrap pointer"},a.createElement(j.Z,{icon:"workflow_help",className:"Gray_9e helpIcon Font18"})))),a.createElement("div",{className:"mTop15"},a.createElement(xt.Z,{className:"checkBox InlineBlock",text:_l("\u5728\u6267\u884C\u67E5\u8BE2\u540E\u663E\u793A\u6570\u636E"),checked:Xe==="1",onClick:function(){xn({clicksearch:Xe!=="1"?"1":"0"})}}),a.createElement(Ne.Z,{popupPlacement:"bottom",text:a.createElement("span",null,_l("\u52FE\u9009\u540E\uFF0C\u8FDB\u5165\u89C6\u56FE\u521D\u59CB\u4E0D\u663E\u793A\u6570\u636E\uFF0C\u67E5\u8BE2\u540E\u663E\u793A\u7B26\u5408\u7B5B\u9009\u6761\u4EF6\u7684\u6570\u636E\u3002"))},a.createElement("div",{className:"iconWrap pointer"},a.createElement(j.Z,{icon:"workflow_help ",className:"Gray_9e helpIcon Font18"}))))):a.createElement("div",{className:"noData"},a.createElement("div",{className:"cover"},a.createElement("img",{src:br(),alt:"",srcset:""})),a.createElement("h6",{className:""},_l("\u5FEB\u901F\u7B5B\u9009")),a.createElement("p",{className:"text"},_l("\u5C06\u5B57\u6BB5\u4F5C\u4E3A\u5FEB\u901F\u7B5B\u9009\u5668\u663E\u793A\u5728\u89C6\u56FE\u9876\u90E8\uFF0C\u4EE5\u5E2E\u52A9\u7528\u6237\u5FEB\u901F\u67E5\u627E\u8BB0\u5F55\u3002")),an()))}var Br=t(3540),kr=t(96381),ja=t.n(kr),ur=t(52877),vr=(0,R.Z)([`
  .hasData {
    .navWidth {
      input[type='number'] {
        &::-webkit-outer-spin-button,
        &::-webkit-inner-spin-button {
          margin: 0;
          -webkit-appearance: none !important;
        }
      }
      .unit {
        right: 12px;
        line-height: 34px;
      }
      .ming.Input {
        font-size: 13px;
        border: 1px solid #ddd;
        &:hover {
          border-color: #bbb;
        }
        &:focus {
          border-color: #2196f3;
        }
      }
    }
    .cancle {
      color: #9e9e9e;
      cursor: pointer;
      &:hover {
        color: #757575;
      }
    }
    .Dropdown {
      width: 100%;
      display: flex;
      line-height: 36px;
      height: 36px;
      opacity: 1;
      background: #ffffff;
      border-radius: 4px;
      margin: 8px 0;
      box-sizing: border-box;
      .actionIcon {
        width: 13px;
      }
      & > div {
        flex: 1;
      }
      .Dropdown--input {
        padding: 0 12px 0 12px;
        width: 100%;
        display: flex;
        border: 1px solid #dddddd;
        border-radius: 4px;
        height: 36px;
        &.active {
          border: 1px solid #2196f3;
        }
        .value,
        .Dropdown--placeholder {
          flex: 1;
          max-width: 100%;
        }
        .Icon {
          line-height: 34px;
        }
        .List {
          width: 100%;
          top: 104% !important;
        }
      }
    }
    .inputBox {
      width: 100%;
      display: flex;
      line-height: 36px;
      height: 36px;
      opacity: 1;
      background: #ffffff;
      border: 1px solid #dddddd;
      border-radius: 4px;
      padding: 0 12px 0 12px;
      .icon {
        line-height: 35px;
      }
      .itemText {
        text-align: left;
        flex: 1;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
      }
    }
    .addFilterCondition {
      width: 100% !important;
      position: relative;
      margin: 14px 0 0;
      height: auto !important;
      border: 0px !important;
      line-height: 1 !important;
      text-align: center;
      &:hover {
        color: #333 !important;
      }
      & > span {
        width: 100% !important;
        display: block !important;
        padding: 0 0 !important;
      }
      span.addIcon {
        position: relative;
        background: #f8f8f8;
        color: #2196f3;
        border-radius: 3px;
        display: block;
        padding: 12px 0;
        cursor: pointer;
        text-align: center;
        font-weight: bold;
        .icon {
          font-size: 20px;
        }
        &:hover {
          color: #1565c0;
          background: #f5f5f5;
        }
      }
      &.active {
        .inputBox {
          border: 1px solid #2196f3;
        }
      }
    }
    .checkBox {
      vertical-align: middle;
    }
    .ming.Checkbox.checked .Checkbox-box {
      // background-color: #9e9e9e;
    }
    .ming.Checkbox.Checkbox--disabled {
      color: #333;
    }
    .iconWrap {
      display: inline-block;
      vertical-align: middle;
      margin-left: 8px;
    }
  }
  .noData {
    .cover {
      padding-top: 60px;
      img {
        width: 100%;
        display: block;
      }
    }
    h6 {
      font-size: 20px;
      font-weight: 500;
      color: #333333;
      text-align: center;
      padding: 0;
      padding-top: 32px;
      margin: 0;
    }
    .text {
      font-weight: 400;
      text-align: center;
      color: #9e9e9e;
      line-height: 20px;
      font-size: 13px;
      width: 80%;
      margin: 24px auto 0;
    }
    .addFilterCondition {
      width: 100% !important;
      position: relative;
      width: auto !important;
      height: auto !important;
      border: 0px !important;
      line-height: 1 !important;
      text-align: center;
      &.nodata {
        margin: 32px auto 0 !important;
      }
      & > span {
        width: 100% !important;
        display: block !important;
        padding: 0 0 !important;
      }
      span.addIcon {
        position: relative;
        background: #2196f3;
        border-radius: 3px;
        color: #fff;
        display: inline-block;
        padding: 12px 32px;
        cursor: pointer;
        font-weight: bold;
        .icon {
          font-size: 20px;
        }
        &:hover {
          background: #1565c0;
        }
      }
    }
  }
  .RelateRecordDropdown-selected {
    height: auto;
  }
`],[`
  .hasData {
    .navWidth {
      input[type='number'] {
        &::-webkit-outer-spin-button,
        &::-webkit-inner-spin-button {
          margin: 0;
          -webkit-appearance: none !important;
        }
      }
      .unit {
        right: 12px;
        line-height: 34px;
      }
      .ming.Input {
        font-size: 13px;
        border: 1px solid #ddd;
        &:hover {
          border-color: #bbb;
        }
        &:focus {
          border-color: #2196f3;
        }
      }
    }
    .cancle {
      color: #9e9e9e;
      cursor: pointer;
      &:hover {
        color: #757575;
      }
    }
    .Dropdown {
      width: 100%;
      display: flex;
      line-height: 36px;
      height: 36px;
      opacity: 1;
      background: #ffffff;
      border-radius: 4px;
      margin: 8px 0;
      box-sizing: border-box;
      .actionIcon {
        width: 13px;
      }
      & > div {
        flex: 1;
      }
      .Dropdown--input {
        padding: 0 12px 0 12px;
        width: 100%;
        display: flex;
        border: 1px solid #dddddd;
        border-radius: 4px;
        height: 36px;
        &.active {
          border: 1px solid #2196f3;
        }
        .value,
        .Dropdown--placeholder {
          flex: 1;
          max-width: 100%;
        }
        .Icon {
          line-height: 34px;
        }
        .List {
          width: 100%;
          top: 104% !important;
        }
      }
    }
    .inputBox {
      width: 100%;
      display: flex;
      line-height: 36px;
      height: 36px;
      opacity: 1;
      background: #ffffff;
      border: 1px solid #dddddd;
      border-radius: 4px;
      padding: 0 12px 0 12px;
      .icon {
        line-height: 35px;
      }
      .itemText {
        text-align: left;
        flex: 1;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
      }
    }
    .addFilterCondition {
      width: 100% !important;
      position: relative;
      margin: 14px 0 0;
      height: auto !important;
      border: 0px !important;
      line-height: 1 !important;
      text-align: center;
      &:hover {
        color: #333 !important;
      }
      & > span {
        width: 100% !important;
        display: block !important;
        padding: 0 0 !important;
      }
      span.addIcon {
        position: relative;
        background: #f8f8f8;
        color: #2196f3;
        border-radius: 3px;
        display: block;
        padding: 12px 0;
        cursor: pointer;
        text-align: center;
        font-weight: bold;
        .icon {
          font-size: 20px;
        }
        &:hover {
          color: #1565c0;
          background: #f5f5f5;
        }
      }
      &.active {
        .inputBox {
          border: 1px solid #2196f3;
        }
      }
    }
    .checkBox {
      vertical-align: middle;
    }
    .ming.Checkbox.checked .Checkbox-box {
      // background-color: #9e9e9e;
    }
    .ming.Checkbox.Checkbox--disabled {
      color: #333;
    }
    .iconWrap {
      display: inline-block;
      vertical-align: middle;
      margin-left: 8px;
    }
  }
  .noData {
    .cover {
      padding-top: 60px;
      img {
        width: 100%;
        display: block;
      }
    }
    h6 {
      font-size: 20px;
      font-weight: 500;
      color: #333333;
      text-align: center;
      padding: 0;
      padding-top: 32px;
      margin: 0;
    }
    .text {
      font-weight: 400;
      text-align: center;
      color: #9e9e9e;
      line-height: 20px;
      font-size: 13px;
      width: 80%;
      margin: 24px auto 0;
    }
    .addFilterCondition {
      width: 100% !important;
      position: relative;
      width: auto !important;
      height: auto !important;
      border: 0px !important;
      line-height: 1 !important;
      text-align: center;
      &.nodata {
        margin: 32px auto 0 !important;
      }
      & > span {
        width: 100% !important;
        display: block !important;
        padding: 0 0 !important;
      }
      span.addIcon {
        position: relative;
        background: #2196f3;
        border-radius: 3px;
        color: #fff;
        display: inline-block;
        padding: 12px 32px;
        cursor: pointer;
        font-weight: bold;
        .icon {
          font-size: 20px;
        }
        &:hover {
          background: #1565c0;
        }
      }
    }
  }
  .RelateRecordDropdown-selected {
    height: auto;
  }
`]),Pr=q.ZP.div(vr);function Gr(Me){var nt=null,He=Me.worksheetControls,ie=He===void 0?[]:He,We=Me.view,Ue=We===void 0?{}:We,Ke=Me.updateCurrentView,ut=Me.worksheetId,wt=Me.columns,Et=Me.currentSheetInfo,et=Et===void 0?{}:Et,Xe=(0,a.useState)({}),pt=(0,Ie.Z)(Xe,2),at=pt[0],ct=pt[1],Nt=(0,a.useState)(),mn=(0,Ie.Z)(Nt,2),Qt=mn[0],Cn=mn[1],_n=(0,a.useState)(),ra=(0,Ie.Z)(_n,2),Nn=ra[0],Ht=ra[1],Sn=(0,a.useState)(),Dn=(0,Ie.Z)(Sn,2),xn=Dn[0],an=Dn[1],Qn=(0,a.useState)([]),Ln=(0,Ie.Z)(Qn,2),hn=Ln[0],Ra=Ln[1],ha=(0,a.useState)([]),Pn=(0,Ie.Z)(ha,2),ea=Pn[0],Tn=Pn[1],sn=(0,qn.Z)({navshow:0,navfilters:"[]",navwidth:_t.h6}),Da=(0,Ie.Z)(sn,2),ia=Da[0],ka=ia.navshow,Sa=ia.navfilters,Yn=ia.navwidth,Ye=Da[1];(0,a.useEffect)(function(){var re=Ue.advancedSetting,ee=re===void 0?{}:re;Ht(!ee.usenav||ee.usenav==="0"?"0":"1"),Ye({navshow:ee.navshow,navfilters:ee.navfilters||"[]",navwidth:ee.navwidth||_t.h6})},[Ue]),(0,a.useEffect)(function(){var re=Ue.navGroup||[],ee=re.length>0?re[0]:{};ct(ee);var ge=ee.controlId,Se=ie.find(function(Ze){return Ze.controlId===ge})||{};Cn((0,y.default)({},ee,{isErr:!Se.controlId,controlName:Se.controlName,type:Se.type})),Se.type===29&&Se.dataSource&&c(Se.dataSource)},[Ue.navGroup]);var O=function(){V(void 0)},V=function(ee,ge){ct(ee);var Se=["navGroup"],Ze={navGroup:ee?[ee]:[]};ge&&(Se.push("advancedSetting"),Ze=(0,y.default)({},Ze,{advancedSetting:(0,ke.ob)(Ue,(0,y.default)({},ge))})),Ke(k()(Ue,(0,y.default)({},Ze,{editAttrs:Se})))},s=function(ee){var ge=(0,W.e6)(ee),Se={shownullitem:"1"};[35].includes(ee.type)&&(Se={showallitem:""}),V(ge,(0,y.default)({navshow:["0","1"].includes(ka+"")?ka:"0",navfilters:oe()([]),usenav:"0"},Se)),an(!1),ee.type===29&&ee.dataSource&&c(ee.dataSource)},c=function(ee){nt&&nt.abort(),nt=zt.Z.getWorksheetInfo({worksheetId:ee,getViews:!0,getTemplate:!0,relationWorksheetId:ee}),nt.then(function(ge){nt="";var Se=ge.views.filter(function(Ze){return Ze.viewType===2&&String(Ze.childType)!=="2"}).map(function(Ze){return{value:Ze.viewId,text:Ze.name}});Ra(Se),Tn(Z().get(ge,["template","controls"]))})},g=function(ee){Ke(k()(Ue,{advancedSetting:(0,ke.ob)(Ue,(0,y.default)({},ee)),editAttrs:["advancedSetting"]}))},x=function(ee){var ge=ee.width,Se=ee.comp;return a.createElement(ur.Z,{renderInParent:!0,className:"addControl",columns:(0,lr.oF)((0,de.UX)(ie).filter(function(Ze){return(0,W.Gx)(Ze,ut)}),et.switches||[]),onAdd:s,style:{width:ge||"440px"},offset:[0,0],classNamePopup:"addControlDrop",comp:Se,from:"fastFilter",defaultVisible:xn})},S=function(ee){var ge=(0,W.WL)(ee.type);return ge.map(function(Se){if(Se.key==="viewId"&&ee.type===29&&(Se.types=hn,hn.length<=0&&(Se.types=[{text:a.createElement("span",{className:"Gray_9e"},_l("\u5173\u8054\u8868\u4E2D\u6CA1\u6709\u672C\u8868\u5173\u8054\u7C7B\u578B\u7684\u5C42\u7EA7\u89C6\u56FE\uFF0C\u8BF7\u5148\u53BB\u6DFB\u52A0\u4E00\u4E2A")),isTip:!0}])),ee.type===29&&!at.viewId&&Se.key==="filterType"||ee.type===29&&at.viewId&&Se.key==="navshow")return"";var Ze=!at[Se.key]&&ee.type===29?null:at[Se.key];return Se.key==="filterType"&&[29,35].includes(ee.type)&&(Ze=Ze===11?Ze:24),Se.key==="navshow"?a.createElement(ve.Z,{canShowAll:!0,canShowNull:!0,params:Se,value:ka,onChange:function(At){Ke(k()(Ue,{advancedSetting:At,editAttrs:["advancedSetting"],editAdKeys:pe()(At)}))},advancedSetting:Ue.advancedSetting,navfilters:Sa,filterInfo:{relateControls:ea,allControls:ie,globalSheetInfo:Z().pick(et,["appId","groupId","name","projectId","roleType","worksheetId","switches"]),columns:wt,viewControl:ee.controlId}}):a.createElement(a.Fragment,null,Se.txt&&a.createElement("div",{className:"title mTop30 Gray Bold"},Se.txt),Se.des&&a.createElement("div",{className:"des mTop5 Gray_9e"},Se.des),a.createElement(C.Z,{data:Se.types,value:Ze,className:"flex",onChange:function(At){V((0,y.default)({},at,(0,m.default)({},Se.key,At)),Se.key==="viewId"&&ee.type===29?{navshow:"0",navfilters:oe()([])}:null)},border:!0,renderError:function(){return ee.type===29&&hn.length>0&&Se.key==="viewId"?a.createElement("span",{className:"Red TxtMiddle"},a.createElement(j.Z,{icon:"error1",className:N()("mRight12 Font16")}),a.createElement("span",{className:""},_l("\u8BE5\u89C6\u56FE\u5DF2\u5220\u9664"))):""}}))})},X=function(ee){var ge=ee.target.value.trim();localStorage.removeItem("navGroupWidth_"+Ue.viewId),g({navwidth:ge<_t.AV?_t.AV:ge>_t.sY?_t.sY:ge}),ee.stopPropagation()};return a.createElement(Pr,null,Z().get(at,["controlId"])?a.createElement("div",{className:"hasData"},a.createElement("div",{className:"viewSetTitle"},_l("\u7B5B\u9009\u5217\u8868")),a.createElement("div",{className:"Gray_9e mTop8 mBottom4"},_l("\u5C06\u6240\u9009\u5B57\u6BB5\u9009\u9879\u4EE5\u5217\u8868\u7684\u5F62\u5F0F\u663E\u793A\u5728\u89C6\u56FE\u5DE6\u4FA7\uFF0C\u5E2E\u52A9\u7528\u6237\u5FEB\u901F\u67E5\u770B\u8BB0\u5F55\uFF0C\u652F\u6301\u9009\u9879\u3001\u5173\u8054\u8BB0\u5F55\u548C\u7EA7\u8054\u9009\u62E9\u5B57\u6BB5\u3002")),a.createElement(a.Fragment,null,a.createElement("div",{className:"con"},a.createElement("div",{className:"title mTop25 Gray Bold"},_l("\u7B5B\u9009\u5B57\u6BB5"),a.createElement("span",{className:"cancle Right",onClick:function(){O()}},_l("\u6E05\u9664"))),x({comp:function(){var ee=Qt.isErr?"error1":(0,de.hB)((ie.find(function(ge){return ge.controlId===Z().get(Qt,["controlId"])})||{}).type,!1);return a.createElement("div",{className:N()("inputBox mTop6",{Red:Qt.isErr})},ee?a.createElement(j.Z,{icon:ee,className:N()("mRight12 Font18 ",{Red:Qt.isErr,Gray_75:!Qt.isErr})}):null,a.createElement("div",{className:"itemText"},Qt.isErr?a.createElement(Ne.Z,{popupPlacement:"bottom",text:a.createElement("span",null,_l("ID: %0",Z().get(Qt,["controlId"]))),tooltipClass:"deleteHoverTips"},a.createElement("span",null,_l("\u8BE5\u5B57\u6BB5\u5DF2\u5220\u9664"))):Z().get(Qt,["controlName"])),a.createElement(j.Z,{icon:"arrow-down-border",className:"mLeft12 Gray_9e"}))}}),Qt&&!Qt.isErr&&S(Qt)),a.createElement("div",{className:"title mTop30 Gray Bold"},_l("\u9ED8\u8BA4\u5BBD\u5EA6")),a.createElement("div",{className:"Relative navWidth mTop8"},a.createElement(Br.Z,{type:"number",className:"flex placeholderColor w100 pRight30",value:Yn,placeholder:_l("\u8BF7\u8F93\u5165"),onChange:function(ee){Ye({navwidth:ee})},onKeyDown:function(ee){ee.keyCode===13&&X(ee)},onBlur:function(ee){X(ee)}}),a.createElement("span",{className:"Absolute unit Gray_9e"},"px"))),a.createElement("h6",{className:"mTop30 Font13 Bold"},_l("\u8BBE\u7F6E")),a.createElement("div",{className:"mTop13"},a.createElement(xt.Z,{className:"checkBox InlineBlock",text:_l("\u521B\u5EFA\u8BB0\u5F55\u65F6\uFF0C\u4EE5\u9009\u4E2D\u5217\u8868\u4F5C\u4E3A\u9ED8\u8BA4\u503C"),checked:Nn+""=="1",onClick:function(){g({usenav:Nn+""=="1"?"0":"1"})}}),a.createElement(Ne.Z,{popupPlacement:"bottom",text:a.createElement("span",null,_l("\u5982\uFF1A\u5728\u5546\u54C1\u8868\u4E2D\u4EE5\u5546\u54C1\u7C7B\u578B\uFF08\u751F\u9C9C\u3001\u526F\u98DF\u3001\u996E\u6599\u7B49\uFF09\u4F5C\u4E3A\u7B5B\u9009\u5217\u8868\u65F6\uFF0C\u5982\u679C\u5F53\u524D\u9009\u4E2D\u4E86\u996E\u6599\u5206\u7C7B\uFF0C\u5219\u521B\u5EFA\u8BB0\u5F55\u65F6\u5546\u54C1\u7C7B\u578B\u9ED8\u8BA4\u4E3A\u996E\u6599\u3002"))},a.createElement("div",{className:"Hand InlineBlock TxtTop mLeft5"},a.createElement(j.Z,{icon:"workflow_help",className:"Gray_9e helpIcon Font18 InlineBlock mTop2"}))))):a.createElement("div",{className:"noData"},a.createElement("div",{className:"cover"},a.createElement("img",{src:ja(),alt:"",srcset:""})),a.createElement("h6",{className:""},_l("\u7B5B\u9009\u5217\u8868")),a.createElement("p",{className:"text"},_l("\u5C06\u6240\u9009\u5B57\u6BB5\u9009\u9879\u4EE5\u5217\u8868\u7684\u5F62\u5F0F\u663E\u793A\u5728\u89C6\u56FE\u5DE6\u4FA7\uFF0C\u5E2E\u52A9\u7528\u6237\u5FEB\u901F\u67E5\u770B\u8BB0\u5F55\uFF0C\u652F\u6301\u9009\u9879\u3001\u5173\u8054\u8BB0\u5F55\u548C\u7EA7\u8054\u9009\u62E9\u5B57\u6BB5\u3002")),x({comp:function(){return a.createElement("span",{className:"addIcon"},a.createElement("i",{className:"icon icon-add Font16 mRight5"}),_l("\u9009\u62E9\u5B57\u6BB5"))}})))}var cr=t(45697),Cr=t(17529),Zr=t(24380),ar=(0,R.Z)([`
  .line {
    width: 100%;
    height: 1px;
    background: #dddddd;
  }
`],[`
  .line {
    width: 100%;
    height: 1px;
    background: #dddddd;
  }
`]),mo=(0,R.Z)([`
  .noData {
    .cover {
      padding-top: 60px;
      img {
        width: 100%;
        display: block;
      }
    }
    h6 {
      font-size: 20px;
      font-weight: 500;
      color: #333333;
      text-align: center;
      padding: 0;
      padding-top: 32px;
      margin: 0;
    }
    .text {
      font-weight: 400;
      text-align: center;
      color: #9e9e9e;
      line-height: 20px;
      font-size: 13px;
      width: 80%;
      margin: 24px auto 0;
    }
  }
  .customAntSelect {
    margin-top: 10px;
    .ant-select-selector {
      border-color: #ddd !important;
      background: #fff !important;
    }
  }
  .customAntSelect:not(.ant-select-open):not(.ant-select-disabled) {
    .ant-select-selector:hover {
      background-color: inherit !important;
      border-color: #ddd !important;
    }
  }
`],[`
  .noData {
    .cover {
      padding-top: 60px;
      img {
        width: 100%;
        display: block;
      }
    }
    h6 {
      font-size: 20px;
      font-weight: 500;
      color: #333333;
      text-align: center;
      padding: 0;
      padding-top: 32px;
      margin: 0;
    }
    .text {
      font-weight: 400;
      text-align: center;
      color: #9e9e9e;
      line-height: 20px;
      font-size: 13px;
      width: 80%;
      margin: 24px auto 0;
    }
  }
  .customAntSelect {
    margin-top: 10px;
    .ant-select-selector {
      border-color: #ddd !important;
      background: #fff !important;
    }
  }
  .customAntSelect:not(.ant-select-open):not(.ant-select-disabled) {
    .ant-select-selector:hover {
      background-color: inherit !important;
      border-color: #ddd !important;
    }
  }
`]),Oo=(0,R.Z)([`
  position: relative;
  width: 100%;
  height: 44px;
  line-height: 44px;
  background: #f8f8f8;
  border-radius: 3px;
  &:hover {
    background: #f5f5f5;
  }
`],[`
  position: relative;
  width: 100%;
  height: 44px;
  line-height: 44px;
  background: #f8f8f8;
  border-radius: 3px;
  &:hover {
    background: #f5f5f5;
  }
`]),Ho=(0,R.Z)([`
  width: 100%;
  border: 1px solid #eaeaea;
  border-radius: 3px;
  display: flex;
  align-items: center;
  height: 36px;
  padding: 0 5px 0 14px;
  &:hover {
    border-color: #2196f3;
  }
  .controlTypeIcon {
    font-size: 16px;
    color: #757575;
  }
  .controlName {
    margin-left: 10px;
    font-size: 14px;
    color: #333;
  }
  .endIcon {
    .icon {
      font-size: 13px;
      color: #9d9d9d;
    }
    .removeIcon {
      display: none;
    }
  }
  &:hover {
    .dropDownIcon {
      display: none;
    }
    .removeIcon {
      display: inline-block;
    }
  }
`],[`
  width: 100%;
  border: 1px solid #eaeaea;
  border-radius: 3px;
  display: flex;
  align-items: center;
  height: 36px;
  padding: 0 5px 0 14px;
  &:hover {
    border-color: #2196f3;
  }
  .controlTypeIcon {
    font-size: 16px;
    color: #757575;
  }
  .controlName {
    margin-left: 10px;
    font-size: 14px;
    color: #333;
  }
  .endIcon {
    .icon {
      font-size: 13px;
      color: #9d9d9d;
    }
    .removeIcon {
      display: none;
    }
  }
  &:hover {
    .dropDownIcon {
      display: none;
    }
    .removeIcon {
      display: inline-block;
    }
  }
`]),Ko=(0,R.Z)([`
  margin-top: 14px;
  > span {
    position: relative;
    display: inline-flex;
    border-radius: 3px;
    margin-right: 16px;
    width: 78px;
    height: 36px;
    justify-content: center;
    align-items: center;
    font-size: 14px;
    color: #333;
    font-weight: bold;
    cursor: pointer;
    .selected {
      position: absolute;
      color: #f52222;
      font-size: 18px;
      right: -9px;
      top: -9px;
      border-radius: 18px;
      background: #fff;
    }
    &.type-0 {
      border: 1px solid #eaeaea;
      &:before {
        position: absolute;
        content: '';
        width: 4px;
        left: 0;
        top: 0px;
        bottom: 0px;
        background: #f52222;
        border-radius: 3px;
      }
    }
    &.type-1 {
      background: #ffe8e8;
      &:before {
        position: absolute;
        content: '';
        width: 4px;
        left: 0;
        top: 0px;
        bottom: 0px;
        background: #f52222;
        border-radius: 3px;
      }
    }
    &.type-2 {
      background: #ffe8e8;
    }
  }
`],[`
  margin-top: 14px;
  > span {
    position: relative;
    display: inline-flex;
    border-radius: 3px;
    margin-right: 16px;
    width: 78px;
    height: 36px;
    justify-content: center;
    align-items: center;
    font-size: 14px;
    color: #333;
    font-weight: bold;
    cursor: pointer;
    .selected {
      position: absolute;
      color: #f52222;
      font-size: 18px;
      right: -9px;
      top: -9px;
      border-radius: 18px;
      background: #fff;
    }
    &.type-0 {
      border: 1px solid #eaeaea;
      &:before {
        position: absolute;
        content: '';
        width: 4px;
        left: 0;
        top: 0px;
        bottom: 0px;
        background: #f52222;
        border-radius: 3px;
      }
    }
    &.type-1 {
      background: #ffe8e8;
      &:before {
        position: absolute;
        content: '';
        width: 4px;
        left: 0;
        top: 0px;
        bottom: 0px;
        background: #f52222;
        border-radius: 3px;
      }
    }
    &.type-2 {
      background: #ffe8e8;
    }
  }
`]),Co=q.ZP.div(ar),Jr=q.ZP.div(mo),pr=q.ZP.div(Oo),fo=q.ZP.div(Ho);function oo(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Z().includes(Me,nt.type)||nt.type===30&&Z().includes(Me,nt.sourceControlType)}function Xr(Me){var nt=Me.value,He=Me.controls,ie=He===void 0?[]:He,We=Me.onChange,Ue=Me.onClear,Ke=Z().find(ie,{controlId:nt});return a.createElement(ur.Z,{columns:ie.filter(function(ut){return oo([9,11],ut)&&ut.controlId.length===24}),onAdd:We,style:{width:"440px"},offset:[0,0],classNamePopup:"addControlDrop",comp:function(){return a.createElement(fo,null,a.createElement("i",{className:"controlTypeIcon icon-"+(0,de.hB)(Ke.type)}),a.createElement("div",{className:"controlName ellipsis"},Ke.controlName),a.createElement("div",{className:"flex"}),a.createElement("div",{className:"endIcon"},a.createElement("i",{className:"icon removeIcon icon-closeelement-bg-circle",onClick:function(Et){Et.stopPropagation(),Ue()}}),a.createElement("i",{className:"icon dropDownIcon icon-arrow-down-border"})))}})}Xr.propTypes={value:cr.string,controls:(0,cr.arrayOf)((0,cr.shape)({})),onChange:cr.func};var Bo=q.ZP.div(Ko);function Eo(Me){var nt=Me.value,He=Me.onChange;return a.createElement(Bo,null,pe()(v.v4).map(function(ie,We){return a.createElement("span",{className:"type-"+v.v4[ie],key:We,onClick:function(){return He(v.v4[ie])}},"Aa",nt===v.v4[ie]&&a.createElement("i",{className:"selected icon-check_circle1"}))}))}Eo.propTypes={value:cr.string,onChange:cr.func};function yo(Me){var nt=Me.worksheetControls,He=nt===void 0?[]:nt,ie=Me.view,We=ie===void 0?{}:ie,Ue=Me.onChange,Ke=We.advancedSetting,ut=Ke===void 0?{}:Ke,wt=ut.colorid,Et=ut.coloritems,et=ut.colortype,Xe=function(Nt){Ue(Nt)},pt=He.filter(function(ct){return oo([9,11],ct)}),at=Z().find(pt,{controlId:wt});return a.createElement(Jr,null,a.createElement("div",{className:"Gray_9e mTop20"},_l("\u4F7F\u7528\u5355\u9009\u9879\u4E3A\u8BB0\u5F55\u6807\u8BB0\u989C\u8272")),at?a.createElement("div",{className:"hasData"},a.createElement("div",{className:"Font3 Bold mTop16 mBottom8 valignWrapper"},_l("\u5B57\u6BB5"),at&&at.enumDefault2!==1&&a.createElement(Ne.Z,{className:"mLeft6",text:_l("\u5F53\u524D\u9009\u62E9\u7684\u5B57\u6BB5\u672A\u542F\u7528\u989C\u8272")},a.createElement("i",{className:"icon icon-error1 Font16",style:{color:"#ff9300"}}))),a.createElement(Xr,{value:wt,controls:He.filter(function(ct){return oo([9,10,11],ct)&&ct.controlId.length===24}),onChange:function(Nt){Xe({colorid:Nt.controlId,coloritems:"",colortype:"0"})},onClear:function(){Xe({colorid:"",coloritems:"",colortype:""})}}),a.createElement("div",{className:"Font3 Bold mTop24 mBottom8"},_l("\u663E\u793A\u9879")),a.createElement(C.Z,{border:!0,className:"w100",data:[{text:_l("\u5168\u90E8"),value:0},{text:_l("\u663E\u793A\u6307\u5B9A\u9879"),value:1}],value:Et?1:0,onChange:function(Nt){Xe({coloritems:Nt===1?"[]":""})}}),!!Et&&a.createElement(Cr.Z,(0,y.default)({},(0,y.default)({},at,{advancedSetting:(0,y.default)({},at.advancedSetting,{allowadd:"0",checktype:"1"}),options:at.options.map(function(ct){return(0,y.default)({},ct,{hide:!1})})}),{default:void 0,fromFilter:!0,isFocus:!0,className:"optionsSelect mTop14",dropdownClassName:"scrollInTable withIsEmpty",value:Et,onChange:function(Nt){Xe({coloritems:Nt})}})),!["5","7"].includes(String(We.viewType))&&a.createElement(a.Fragment,null,a.createElement("div",{className:"Font3 Bold mTop24 mBottom8"},_l("\u663E\u793A\u65B9\u5F0F")),a.createElement(Eo,{value:et,onChange:function(Nt){Xe({colortype:Nt})}}))):a.createElement(ur.Z,{columns:He.filter(function(ct){return oo([9,11],ct)&&ct.controlId.length===24}),onAdd:function(Nt){Xe({colorid:Nt.controlId,coloritems:"",colortype:"0"})},style:{width:"440px"},popupAlign:{points:["tc","bc"],overflow:{adjustX:!0,adjustY:!0}},classNamePopup:"addControlDrop",comp:function(){return a.createElement(pr,{className:"mTop4 Bold Font13 ThemeColor3 TxtCenter"},a.createElement("i",{className:"icon icon-add Font16 mRight5"}),_l("\u9009\u62E9\u5B57\u6BB5"))}}))}function qr(Me){var nt=Me.updateCurrentView,He=Me.view,ie=Me.appId,We=(0,a.useState)(["record","control"]),Ue=(0,Ie.Z)(We,2),Ke=Ue[0],ut=Ue[1],wt=_l("\u989C\u8272"),Et=function(pt){return a.createElement("div",{className:"headerCon Hand mTop24",onClick:function(){ut(Ke.includes(pt)?Ke.filter(function(ct){return ct!==pt}):Ke.concat(pt))}},a.createElement(j.Z,{icon:Ke.includes(pt)?"arrow-down":"arrow-right-tip",className:"Font14 Gray_9e"}),a.createElement("span",{className:"Font15 Bold mLeft10"},pt==="control"?_l("\u5B57\u6BB5"):_l("\u8BB0\u5F55")))},et=function(pt){nt((0,y.default)({},He,{appId:ie,advancedSetting:(0,m.default)({},pt,Z().get(He,"advancedSetting."+pt)==="1"?"":"1"),editAdKeys:[pt],editAttrs:["advancedSetting"]}))};return a.createElement(Co,null,a.createElement("div",{className:"viewSetTitle"},wt),Et("record"),Ke.includes("record")&&a.createElement(yo,(0,y.default)({},Me,{onChange:function(pt){nt((0,y.default)({},He,{appId:ie,advancedSetting:pt,editAdKeys:pe()(pt),editAttrs:["advancedSetting"]}))}})),["0","1","3","2","6","8"].includes(String(He.viewType))&&a.createElement(a.Fragment,null,a.createElement("div",{className:"line mTop24"}),Et("control"),Ke.includes("control")&&a.createElement("div",{className:"mTop10"},a.createElement("div",{className:"Gray_9e mTop20"},_l("\u663E\u793A\u5B57\u6BB5\u914D\u7F6E\u4E2D\u7684\u6837\u5F0F")),a.createElement(Zr.Y,null,a.createElement(j.Z,{icon:Z().get(He,"advancedSetting.controlstyle")==="1"?"ic_toggle_on":"ic_toggle_off",className:"Font28 Hand",onClick:function(){et("controlstyle")}}),a.createElement("div",{className:"switchText InlineBlock Normal mLeft12 mTop8 Hand",onClick:function(){et("controlstyle")}},_l("\u5728PC\u7AEF\u663E\u793A"))),a.createElement("br",null),a.createElement(Zr.Y,null,a.createElement(j.Z,{icon:Z().get(He,"advancedSetting.controlstyleapp")==="1"?"ic_toggle_on":"ic_toggle_off",className:"Font28 Hand",onClick:function(){et("controlstyleapp")}}),a.createElement("div",{className:"switchText InlineBlock Normal mLeft12 mTop8 Hand",onClick:function(){et("controlstyleapp")}},_l("\u5728\u79FB\u52A8\u7AEF\u663E\u793A"))))))}var ll=(0,R.Z)([`
  height: 100%;
`],[`
  height: 100%;
`]),eo=(0,R.Z)([`
  .workSheetChangeColumn {
    .searchBar,
    .quickOperate {
      display: none;
    }
  }
  .showControlsColumnCheckItem {
    &:hover {
      background-color: initial;
    }
    padding: 0 0;
  }
`],[`
  .workSheetChangeColumn {
    .searchBar,
    .quickOperate {
      display: none;
    }
  }
  .showControlsColumnCheckItem {
    &:hover {
      background-color: initial;
    }
    padding: 0 0;
  }
`]),Zo=q.ZP.div(ll),zo=q.ZP.div(eo),Yo=function(Me){(0,r.default)(nt,Me);function nt(He){(0,T.default)(this,nt);var ie=(0,E.default)(this,(nt.__proto__||J()(nt)).call(this,He));return ie.getHeight=function(){ie.setState({height:document.documentElement.clientHeight-323})},ie.state={height:document.documentElement.clientHeight-323},ie}return(0,te.default)(nt,[{key:"componentDidMount",value:function(){$(window).on("resize",this.getHeight)}},{key:"componentWillUnmount",value:function(){$(window).off("resize",this.getHeight)}},{key:"render",value:function(){var ie=this,We=this.state.height,Ue=this.props,Ke=Ue.columns,ut=Ue.view,wt=Ue.sheetSwitchPermit,Et=Ue.info,et=Et===void 0?{}:Et,Xe=et.showControls,pt=Xe===void 0?[]:Xe,at=et.customdisplay,ct=at===void 0?"0":at,Nt=et.sysids,mn=et.syssort,Qt=(0,$n.v)(fe.RX.sysControlSwitch,wt),Cn=(0,K.P7)(Ke,ut.controls,!1).filter(function(Ht){return!!Ht.controlName&&!Z().includes([22,10010,43,45,49,51,52],Ht.type)}),_n=pt.filter(function(Ht){return Z().find(Cn,function(Sn){return Sn.controlId===Ht})}),ra=Qt?Ke.filter(function(Ht){return Z().includes(Z().uniq([].concat((0,i.Z)(mn),(0,i.Z)(ke.FO))),Ht.controlId)}):Ke.filter(function(Ht){return Z().includes(mn.filter(function(Sn){return!Z().includes(ke.FO,Sn)}),Ht.controlId)}),Nn=Qt?Cn:Cn.filter(function(Ht){return!Z().includes(ke.FO,Ht.controlId)});return a.createElement(Zo,{className:"flexRow commonConfigItem ming Dropdown w100 mTop15 hideColumns"},a.createElement("div",{className:""},a.createElement(Ce.Z,{className:"",text:_l("\u4E0E\u8868\u5355\u5B57\u6BB5\u4FDD\u6301\u4E00\u81F4\uFF08\u663E\u793A\u524D50\u4E2A\uFF09"),checked:ct==="0",onClick:function(Sn){ie.props.onChange("0")}})),a.createElement("div",{className:"mTop15 mBottom20"},a.createElement(Ce.Z,{className:"",text:_l("\u81EA\u5B9A\u4E49\u663E\u793A\u5217"),checked:ct==="1",onClick:function(Sn){ie.props.onChange("1")}})),ct==="1"?a.createElement(ma.Z,{layout:2,placeholder:_l("\u67E5\u627E\u5B57\u6BB5"),noempty:!1,maxHeight:We,showControls:_n,columns:Nn,controlsSorts:_n,onChange:function(Sn){var Dn=Sn.newShowControls,xn=Sn.newControlSorts;ie.props.onChangeColumns({newShowControls:Dn,newControlSorts:xn})},isShowColumns:!0,sortAutoChange:!0}):a.createElement(zo,null,a.createElement("div",{className:"commonConfigItem Font13 bold"},_l("\u663E\u793A\u7CFB\u7EDF\u5B57\u6BB5")),a.createElement(ma.Z,{layout:2,noempty:!1,showControls:Nt,dragable:!1,columns:ra,controlsSorts:mn,maxHeight:We,onChange:function(Sn){var Dn=Sn.newShowControls,xn=Sn.newControlSorts;ie.props.onChangeColumns({newShowControls:Dn,newControlSorts:xn})},sortAutoChange:!0})))}}]),nt}(a.Component),to=t(97373),il=t(94055),mr=t(66946),Mo=t(91555),Ar=(0,R.Z)([`
  margin-top: 20px;

  .icon-delete1 {
    font-size: 16px;
    color: #9e9e9e;
    margin-left: 16px;
    cursor: pointer;
    &:hover {
      color: #f44336;
    }
  }

  .ming.Input {
    border-color: #ddd;
  }
  input::-webkit-input-placeholder {
    color: #9e9e9e;
  }
  input::-ms-input-placeholder {
    color: #9e9e9e;
  }
  input::-moz-placeholder {
    color: #9e9e9e;
  }
  .ming.Input:focus {
    border-color: #2196f3 !important;
  }
  .repeatItem {
    border-color: red !important;
  }
`],[`
  margin-top: 20px;

  .icon-delete1 {
    font-size: 16px;
    color: #9e9e9e;
    margin-left: 16px;
    cursor: pointer;
    &:hover {
      color: #f44336;
    }
  }

  .ming.Input {
    border-color: #ddd;
  }
  input::-webkit-input-placeholder {
    color: #9e9e9e;
  }
  input::-ms-input-placeholder {
    color: #9e9e9e;
  }
  input::-moz-placeholder {
    color: #9e9e9e;
  }
  .ming.Input:focus {
    border-color: #2196f3 !important;
  }
  .repeatItem {
    border-color: red !important;
  }
`]),lo=(0,R.Z)([`
  display: flex;
  align-items: center;
  width: fit-content;
  margin-top: 20px;
  cursor: pointer;
  color: #757575;
  i {
    font-size: 18px;
    margin-right: 4px;
  }
  span {
    font-weight: bold;
  }

  &:hover {
    color: #2196f3;
  }
`],[`
  display: flex;
  align-items: center;
  width: fit-content;
  margin-top: 20px;
  cursor: pointer;
  color: #757575;
  i {
    font-size: 18px;
    margin-right: 4px;
  }
  span {
    font-weight: bold;
  }

  &:hover {
    color: #2196f3;
  }
`]),Io=(0,R.Z)([`
  color: #1e88e5;
  cursor: pointer;
  &:hover {
    color: #1565c0 !important;
  }
`],[`
  color: #1e88e5;
  cursor: pointer;
  &:hover {
    color: #1565c0 !important;
  }
`]),$o=q.ZP.div(Ar),Qo=q.ZP.div(lo),io=q.ZP.span(Io);function No(Me){var nt=Me.view,He=nt===void 0?{}:nt,ie=Me.updateCurrentView,We=Me.appId,Ue=Me.worksheetId,Ke=Me.currentSheetInfo,ut=Me.sheetSwitchPermit,wt=Me.hasCharge,Et=(0,a.useState)(JSON.parse((He.advancedSetting||{}).urlparams||"[]")),et=(0,Ie.Z)(Et,2),Xe=et[0],pt=et[1],at=(0,a.useState)(!1),ct=(0,Ie.Z)(at,2),Nt=ct[0],mn=ct[1],Qt=(0,a.useRef)();(0,a.useEffect)(function(){Qt&&Qt.current&&Qt.current.lastChild&&Qt.current.lastChild.firstChild&&Qt.current.lastChild.firstChild.focus()},[Nt]);var Cn=function(Nn){Nn=Z().uniq(Nn.filter(function(Ht){return Ht.trim()&&Ht.trim().length<=20})),ie((0,y.default)({},He,{appId:We,advancedSetting:(0,ke.ob)(He,{urlparams:oe()(Nn)}),editAttrs:["advancedSetting"]}))},_n=function(Nn){var Ht=Xe[Nn];if(!Ht.trim()){alert(_l("\u53C2\u6570\u540D\u4E0D\u80FD\u4E3A\u7A7A"),3);return}if(Xe.filter(function(Sn){return Sn===Ht}).length>1){alert(_l("\u53C2\u6570\u91CD\u590D"),3);return}};return a.createElement("div",null,a.createElement("div",{className:"Gray_9e mTop8"},a.createElement("span",null,_l("\u6307\u5B9A\u53C2\u6570\u540D\uFF0C\u53EF\u4F5C\u4E3A\u67E5\u8BE2\u5B57\u7B26\u4E32\u9644\u52A0\u5728")),a.createElement(io,{onClick:function(){return(0,Mo.K)({from:"view",isCharge:wt,title:_l("\u5206\u4EAB\u89C6\u56FE"),isPublic:He.shareRange===2,hidePublicShare:!((0,$n.v)(fe.RX.viewShareSwitch,ut,He.viewId)&&!md.global.Account.isPortal),params:{appId:We,worksheetId:Ue,viewId:He.viewId,title:He.name},getCopyContent:function(Ht,Sn){return Ht==="private"?Sn:Sn+" "+Ke.name+"-"+He.name},onUpdate:function(Ht){ie(k()({},He,Ht))}})}},_l("\u89C6\u56FE\u94FE\u63A5")),a.createElement("span",null,_l("\u540E\u3002\u5728\u52A0\u8F7D\u9875\u9762\u65F6\u53EF\u52A8\u6001\u83B7\u53D6\u53C2\u6570\u503C\u7528\u4E8E\u89C6\u56FE\u7684\u7B5B\u9009\u6761\u4EF6\u3002")),a.createElement(mr.Z,{text:_l("\u5E2E\u52A9"),type:3,href:"https://help.mingdao.com/view/link-parameter"})),!!Xe.length&&a.createElement($o,{ref:Qt},Xe.map(function(ra,Nn){return a.createElement("div",{key:Nn,className:"flexRow alignItemsCenter mBottom12"},a.createElement(Br.Z,{className:"flex",placeholder:_l("\u8BF7\u8F93\u5165\u53C2\u6570\u540D"),value:ra,maxLength:20,onChange:function(Sn){var Dn=Xe.map(function(xn,an){return an===Nn?Sn:xn});pt(Dn)},onBlur:function(){Cn(Xe),_n(Nn)}}),a.createElement(il.default,{title:_l("\u5220\u9664"),placement:"top"},a.createElement(j.Z,{icon:"delete1",onMouseDown:function(Sn){return Sn.preventDefault()},onClick:function(){var Sn=Xe.filter(function(Dn,xn){return xn!==Nn});pt(Sn),Cn(Sn)}})))})),a.createElement(Qo,{onClick:function(){pt(Xe.concat([""])),mn(!Nt)}},a.createElement(j.Z,{icon:"add"}),a.createElement("span",null,_l("\u53C2\u6570"))))}var zr=t(92899),no=[{fieldId:"field",type:200,paramName:_l("\u5B57\u6BB5\u9009\u62E9\u5668")},{fieldId:"text",type:2,paramName:_l("\u5B57\u7B26\u4E32")},{fieldId:"numeric",type:6,paramName:_l("\u6570\u503C")},{fieldId:"enum",type:11,paramName:_l("\u679A\u4E3E\u503C")},{fieldId:"boolean",type:36,paramName:_l("\u5E03\u5C14\u503C")},{fieldId:"group",type:22,paramName:_l("\u5206\u7EC4\u6807\u9898")}],xo=[2,3,4,5,6,7,8,9,10,11,14,15,16,19,23,24,26,27,28,29,30,31,32,33,34,35,36,37,38,40,41,42,46,48],fr={controlName:_l("\u540D\u79F0"),desc:_l("\u8BF4\u660E"),des:_l("\u5185\u5BB9"),allowitem:_l("\u5141\u8BB8\u9009\u62E9\u6570\u91CF"),controls:_l("\u5141\u8BB8\u9009\u62E9\u7684\u5B57\u6BB5\u7C7B\u578B"),max:_l("\u6700\u5927\u6570\u91CF"),defsource:_l("\u9ED8\u8BA4\u503C"),suffix:_l("\u5355\u4F4D"),dot:_l("\u5C0F\u6570\u4F4D\u6570"),checktype:_l("\u663E\u793A\u65B9\u5F0F"),direction:_l("\u6392\u5217\u65B9\u5F0F"),showtype:_l("\u663E\u793A\u65B9\u5F0F"),options:_l("\u9009\u9879")},Dr={field:["controlName","fieldId","desc","allowitem","controls","max"],text:["controlName","fieldId","desc","defsource"],numeric:["controlName","fieldId","desc","suffix","dot","defsource"],enum:["controlName","fieldId","desc","checktype","direction","options"],boolean:["controlName","fieldId","des","desc","showtype","defsource"],group:["controlName","fieldId","desc"]},Yr=function(nt,He){var ie=He;switch(nt){case 200:ie={advancedSetting:{allowitem:"0"}};break;case 22:ie={type:22,attribute:0,hint:"",default:"",dot:0,unit:"",enumDefault:0,enumDefault2:1,defaultMen:[],dataSource:"",sourceControlId:"",sourceControlType:0,showControls:[],noticeItem:0,userPermission:0,options:[],required:!1,half:!1,relationControls:[],viewId:"",unique:!1,coverCid:"",strDefault:"",desc:"",fieldPermission:"",alias:"",size:12,editAttrs:[],deleteAccountId:"",deleteTime:"0001-01-01 08:05:00",encryId:"",sectionId:"",remark:"",lastEditTime:"0001-01-01 00:00:00",disabled:!1,checked:!1};break;case 2:ie={type:2,hint:"\u8BF7\u586B\u5199",default:"",dot:0,unit:"",enumDefault:2,enumDefault2:0,defaultMen:[],dataSource:"",sourceControlId:"",sourceControlType:0,showControls:[],noticeItem:0,userPermission:0,options:[],required:!1,half:!1,relationControls:[],viewId:"",unique:!1,coverCid:"",strDefault:"",desc:"",fieldPermission:"",advancedSetting:{analysislink:"1",sorttype:"en",min:"",max:""},alias:"",size:12,editAttrs:[],deleteAccountId:"",deleteTime:"0001-01-01 08:05:00",encryId:"",sectionId:"",lastEditTime:"0001-01-01 00:00:00",disabled:!1,checked:!1};break;case 6:ie={type:6,hint:"\u8BF7\u586B\u5199\u6570\u503C",default:"",dot:0,unit:"",enumDefault:0,enumDefault2:0,defaultMen:[],dataSource:"",sourceControlId:"",sourceControlType:0,showControls:[],noticeItem:0,userPermission:0,options:[],required:!1,half:!1,relationControls:[],viewId:"",unique:!1,coverCid:"",strDefault:"",desc:"",fieldPermission:"",advancedSetting:{showtype:"0",roundtype:"2",thousandth:"0",min:"",max:"",sorttype:"zh",numshow:"0"},alias:"",size:6,editAttrs:[],deleteAccountId:"",deleteTime:"0001-01-01 08:05:00",encryId:"",sectionId:"",lastEditTime:"0001-01-01 00:00:00",disabled:!1,checked:!1};break;case 11:ie={type:11,hint:"\u8BF7\u9009\u62E9",default:"[]",dot:0,unit:"",enumDefault:0,enumDefault2:0,defaultMen:[],dataSource:"",sourceControlId:"",sourceControlType:0,showControls:[],noticeItem:0,userPermission:0,options:[],required:!1,half:!1,value:"[]",relationControls:[],viewId:"",unique:!1,coverCid:"",strDefault:"index",desc:"",fieldPermission:"",advancedSetting:{showtype:"1",sorttype:"zh",direction:"2",checktype:"1"},alias:"",size:6,editAttrs:[],deleteAccountId:"",deleteTime:"0001-01-01 08:05:00",encryId:"",sectionId:"",lastEditTime:"0001-01-01 00:00:00",disabled:!1,checked:!1};break;case 36:ie={type:36,hint:"",default:"",dot:0,unit:"",enumDefault:0,enumDefault2:0,defaultMen:[],dataSource:"",sourceControlId:"",sourceControlType:0,showControls:[],noticeItem:0,userPermission:0,options:[],required:!1,half:!1,relationControls:[],viewId:"",unique:!1,coverCid:"",strDefault:"",desc:"",fieldPermission:"",advancedSetting:{defsource:'[{"cid":"","rcid":"","staticValue":false}]',showtype:"0",sorttype:"zh"},alias:"",size:6,editAttrs:[],deleteAccountId:"",deleteTime:"0001-01-01 08:05:00",encryId:"",sectionId:"",lastEditTime:"0001-01-01 00:00:00",disabled:!1,checked:!1};break;default:break}return(0,y.default)({},ie,He)},Jo=[{value:"0",text:_l("\u5355\u9009")},{value:"1",text:_l("\u591A\u9009")}],So=[{value:"1",text:_l("\u5E73\u94FA")},{value:"0",text:_l("\u4E0B\u62C9\u6846")}],wo=[{value:"0",text:_l("\u52FE\u9009\u6846")},{value:"1",text:_l("\u5F00\u5173")}],To=[{value:"2",text:_l("\u6A2A\u5411\u6392\u5217")},{value:"1",text:_l("\u7EB5\u5411\u6392\u5217")}],Xo=[{value:!1,text:_l("\u672A\u9009\u4E2D")},{value:!0,text:_l("\u9009\u4E2D")}],sl=t(37295),jr=t(87506),ho=t.n(jr),bo=t(62745),vo=t(24336),so=t(1694),cl=(0,R.Z)([`
  .w120 {
    width: 120px !important;
  }
  input[type='number'] {
    &::-webkit-outer-spin-button,
    &::-webkit-inner-spin-button {
      margin: 0;
      -webkit-appearance: none !important;
    }
  }
  .fieldIdCon {
    border: 1px solid #ddd;
    box-sizing: border-box;
    height: 36px;
    line-height: 36px;
    border-radius: 3px;
    padding: 0 12px;
    font-size: 14px;
    cursor: no-drop;
    background: #f5f5f5;
  }
  width: 400px;
  height: 100%;
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  box-shadow: 0px 8px 36px 1px rgba(0, 0, 0, 0.24);
  background: #fff;
  .con {
    height: 100%;
    .headerCon {
      border-bottom: 1px solid #ededed;
      padding: 0 24px;
      height: 55px;
      line-height: 55px;
    }
    .editCon {
      overflow: auto;
      padding: 0 24px 24px;
    }
  }
  .title {
    font-weight: 600;
  }
  .ming.Radio {
    flex: 1;
  }

  .paramControlDropdown {
    height: auto;
    min-height: 36px;
    .itemT {
      background: #f5f5f5;
      border-radius: 4px 4px 4px 4px;
      padding: 3px 8px 3px 10px;
      border: 1px solid #e0e0e0;
      i {
        color: #9e9e9e;
        &:hover {
          color: #757575;
        }
      }
    }
    .Dropdown--border,
    .dropdownTrigger .Dropdown--border {
      min-height: 36px !important;
      height: auto !important;
    }
    .Dropdown--input .value {
      display: flex !important;
      & > div {
        flex: 1 !important;
        display: flex !important;
        flex-flow: row wrap !important;
        gap: 5px;
      }
    }
  }
  .ming.Input,
  .Textarea {
    font-size: 13px;
    border: 1px solid #ddd;
    &:hover {
      border-color: #bbb;
    }
    &:focus {
      border-color: #2196f3;
    }
  }
  .cover {
    position: fixed;
    left: 0;
    top: 0;
    bottom: 0;
    right: 0;
    z-index: 100;
  }
`],[`
  .w120 {
    width: 120px !important;
  }
  input[type='number'] {
    &::-webkit-outer-spin-button,
    &::-webkit-inner-spin-button {
      margin: 0;
      -webkit-appearance: none !important;
    }
  }
  .fieldIdCon {
    border: 1px solid #ddd;
    box-sizing: border-box;
    height: 36px;
    line-height: 36px;
    border-radius: 3px;
    padding: 0 12px;
    font-size: 14px;
    cursor: no-drop;
    background: #f5f5f5;
  }
  width: 400px;
  height: 100%;
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  box-shadow: 0px 8px 36px 1px rgba(0, 0, 0, 0.24);
  background: #fff;
  .con {
    height: 100%;
    .headerCon {
      border-bottom: 1px solid #ededed;
      padding: 0 24px;
      height: 55px;
      line-height: 55px;
    }
    .editCon {
      overflow: auto;
      padding: 0 24px 24px;
    }
  }
  .title {
    font-weight: 600;
  }
  .ming.Radio {
    flex: 1;
  }

  .paramControlDropdown {
    height: auto;
    min-height: 36px;
    .itemT {
      background: #f5f5f5;
      border-radius: 4px 4px 4px 4px;
      padding: 3px 8px 3px 10px;
      border: 1px solid #e0e0e0;
      i {
        color: #9e9e9e;
        &:hover {
          color: #757575;
        }
      }
    }
    .Dropdown--border,
    .dropdownTrigger .Dropdown--border {
      min-height: 36px !important;
      height: auto !important;
    }
    .Dropdown--input .value {
      display: flex !important;
      & > div {
        flex: 1 !important;
        display: flex !important;
        flex-flow: row wrap !important;
        gap: 5px;
      }
    }
  }
  .ming.Input,
  .Textarea {
    font-size: 13px;
    border: 1px solid #ddd;
    &:hover {
      border-color: #bbb;
    }
    &:focus {
      border-color: #2196f3;
    }
  }
  .cover {
    position: fixed;
    left: 0;
    top: 0;
    bottom: 0;
    right: 0;
    z-index: 100;
  }
`]),ko=q.ZP.div(cl),co=function(nt){return nt.split(/[\r\n]/).filter(function(He){return He.trim()}).map(function(He,ie){var We=He.split("=");return{key:We[0].trim(),value:(We[1]||"").trim()&&We[1].replace(/\[|\]/g,"").trim()||We[0].trim(),checked:!1,isDeleted:!1,index:ie+1,color:so.sI[(ie+1)%so.sI.length]}})},Wr=function(nt,He){var ie=["dot"].includes(He)?Z().get(nt,[He]):Z().get(nt,["advancedSetting",He]);return["defsource"].includes(He)&&(ie=(safeParse(ie||"[]")[0]||{}).staticValue),ie};function Vo(Me){var nt=Me.onClose,He=Me.onChange,ie=(0,qn.Z)({info:Me.info,dropDownVisible:!1}),We=(0,Ie.Z)(ie,2),Ue=We[0],Ke=Ue.info,ut=Ue.dropDownVisible,wt=We[1],Et=pe()(gn.j$).filter(function(ct){return xo.includes(gn.DN[ct])}),et={};Z().forEach(gn.DN,function(ct,Nt){et[ct]=Nt}),(0,a.useEffect)(function(){wt({info:Me.info||{}})},[Me]);var Xe=function(Nt){He((0,y.default)({},Ke,Nt))},pt=Dr[(no.find(function(ct){return ct.type===Ke.type})||{}).fieldId]||[],at=function(Nt){switch(Nt){case"controlName":case"desc":case"des":case"suffix":case"defsource":case"max":case"dot":var mn=Wr(Ke,Nt),Qt=function(Ht){wt({info:(0,y.default)({},Ke,{advancedSetting:(0,y.default)({},Ke.advancedSetting,(0,m.default)({},Nt,oe()([{cid:"",rcid:"",staticValue:Ht}])))})})};return["max"].includes(Nt)&&Ke.type===200&&Z().get(Ke,"advancedSetting.allowitem")!="1"?void 0:Ke.type===6&&["defsource"].includes(Nt)?a.createElement(Br.Z,{type:"number",className:"w120 mTop8 placeholderColor",placeholder:_l("\u8BF7\u8F93\u5165\u6570\u503C"),value:(mn||"").toString(),onChange:function(Ht){Qt(Ht)},onBlur:function(){Xe()}}):["max","dot"].includes(Nt)?a.createElement(vo.Z,{className:"w120 mTop8 placeholderColor",type:2,placeholder:_l("\u8BF7\u8F93\u5165\u6570\u503C"),value:(mn||"").toString(),onChange:function(Ht){["max"].includes(Nt)?wt({info:(0,y.default)({},Ke,{advancedSetting:(0,y.default)({},Ke.advancedSetting,(0,m.default)({},Nt,Ht))})}):["dot"].includes(Nt)&&wt({info:(0,y.default)({},Ke,(0,m.default)({},Nt,Ht))})},onBlur:function(Ht){if(["max"].includes(Nt))Xe();else if(["dot"].includes(Nt)){var Sn=Number(Ht)>12?12:Ht;Xe({dot:Sn}),wt({info:(0,y.default)({},Ke,{dot:Sn})})}}}):Ke.type===36&&["defsource"].includes(Nt)?a.createElement(Y.ZP,{checkedValue:mn,className:"mTop8",data:Xo,onChange:function(Ht){Qt(Ht)}}):a.createElement(Br.Z,{className:"w100 mTop8 placeholderColor",defaultValue:["controlName","desc","des"].includes(Nt)?Ke[Nt]:mn,placeholder:Nt==="desc"?_l("\u8BF7\u8F93\u5165\u8BF4\u660E"):_l("\u8BF7\u8F93\u5165"),onChange:function(Ht){["controlName","desc","des"].includes(Nt)?wt({info:(0,y.default)({},Ke,(0,m.default)({},Nt,Ht))}):["defsource"].includes(Nt)?wt({info:(0,y.default)({},Ke,{advancedSetting:(0,y.default)({},Ke.advancedSetting,(0,m.default)({},Nt,oe()([{cid:"",rcid:"",staticValue:Ht}])))})}):wt({info:(0,y.default)({},Ke,{advancedSetting:(0,y.default)({},Ke.advancedSetting,(0,m.default)({},Nt,Ht))})})},onBlur:function(Ht){var Sn=(["controlName","desc","des"].includes(Nt)?Ke[Nt]:mn).trim();["controlName","desc","des"].includes(Nt)?Xe((0,m.default)({},Nt,Sn)):["defsource"].includes(Nt)?Qt(Sn):Xe({advancedSetting:(0,y.default)({},Ke.advancedSetting,(0,m.default)({},Nt,Sn))}),Ht.stopPropagation()}});case"fieldId":return a.createElement("div",{className:"fieldIdCon mTop8"},Ke.fieldId);case"allowitem":case"checktype":case"direction":case"showtype":if(Ke.type===11&&["direction"].includes(Nt)&&Z().get(Ke,"advancedSetting.checktype")!=="1")return;var Cn=Jo;return Nt==="checktype"&&(Cn=So),Nt==="direction"&&(Cn=To),Ke.type===36&&(Cn=wo),a.createElement(Y.ZP,{checkedValue:Z().get(Ke,["advancedSetting",Nt])==="1"?"1":Cn.find(function(Nn){return Nn.value!=="1"}).value,className:"mTop8",data:Cn,onChange:function(Ht){Xe({advancedSetting:(0,y.default)({},Ke.advancedSetting,(0,m.default)({},Nt,Ht))})}});case"controls":var _n=Z().get(Ke,[Nt])||[];return a.createElement("div",{className:""},a.createElement(C.Z,{selectClose:!1,placeholder:_l("\u8BF7\u9009\u62E9"),className:N()("w100 mTop8 paramControlDropdown",{hs:_n.length>0}),renderItem:function(Ht){if(Ht.value==="all")return a.createElement("div",{className:"itemText Hand forAll flexRow alignItemsCenter"},Ht.text);var Sn=!!_n.includes(gn.DN[Ht.value]+"");return a.createElement("div",{className:N()("itemText flexRow alignItemsCenter",{isCur:Sn})},a.createElement(j.Z,{icon:gn.j$[Ht.value].icon,className:"Font18 Relative"}),a.createElement("span",{className:"mLeft10 flex Gray"},Ht.text),Sn&&a.createElement(j.Z,{icon:"done_2",className:"Relative ThemeColor3 Font18"}))},popupVisible:ut,onVisibleChange:function(Ht){return wt({dropDownVisible:Ht})},value:_n.length<=0?void 0:_n,onChange:function(Ht){var Sn=[];Ht?Ht=="all"?Sn=Et.map(function(Dn){return gn.DN[Dn]+""}):_n.includes(gn.DN[Ht]+"")?Sn=_n.filter(function(Dn){return Dn!==gn.DN[Ht]+""}):Sn=[].concat((0,i.Z)(_n),[gn.DN[Ht]+""]):Sn=[],Xe((0,m.default)({},Nt,Sn))},renderTitle:function(){return a.createElement("div",{className:""},(_n||[]).map(function(Ht){return a.createElement("div",{className:"itemT InlineBlock"},gn.j$[et[Ht]].widgetName,a.createElement(j.Z,{icon:"close",className:"Hand mLeft3",onClick:function(Dn){Dn.stopPropagation();var xn=_n.filter(function(an){return an!==Ht});Xe((0,m.default)({},Nt,xn))}}))}))},border:!0,menuClass:"paramControlDropdownMenu paramControlDropdownMenuSet",cancelAble:!0,isAppendToBody:!0,openSearch:!0,data:[{value:"all",text:_l("\u5168\u90E8")}].concat((0,i.Z)(Et.map(function(Nn){return(0,y.default)({},Nn,{value:Nn,text:(gn.j$[Nn]||{}).widgetName})})))}));case"options":var ra=Ke[Nt];return a.createElement(a.Fragment,null,a.createElement(bo.Z,{className:"mTop8 Font13",name:"textarea",style:(0,m.default)({maxHeight:"108px"},"maxHeight","108px"),defaultValue:ra.reduce(function(Nn,Ht,Sn){return Sn===ra.length-1?""+Nn+Ht.key+"=["+Ht.value+"]":""+Nn+Ht.key+"=["+Ht.value+`]
`},""),onBlur:function(Ht){Xe(),Ht.stopPropagation()},onChange:function(Ht){var Sn;wt({info:(0,y.default)({},Ke,(Sn={},(0,m.default)(Sn,Nt,co(Ht)),(0,m.default)(Sn,"advancedSetting",(0,y.default)({},Ke.advancedSetting,{defsource:oe()([{cid:"",rcid:"",staticValue:(co(Ht)[0]||{}).key}])})),Sn))})}}),a.createElement("p",{className:"Gray_9e mAll0"},_l("\u8F93\u5165\u9009\u9879\u503C\uFF08\u6BCF\u884C\u4E00\u4E2A\uFF09\uFF0C\u7B2C\u4E00\u4E2A\u4F5C\u4E3A\u9ED8\u8BA4\u503C\u3002\u53EF\u8BBE\u7F6E\u9009\u9879\u663E\u793A\u540D\uFF0C\u4F7F\u7528 \u9009\u9879\u503C=[\u663E\u793A\u540D] \u8868\u793A\uFF0C\u5982\uFF1A0=[\u586B\u5145]\uFF1B1=[\u5B8C\u6574\u663E\u793A]")));default:break}};return a.createElement(ko,{className:""},a.createElement("div",{className:"con flexColumn"},a.createElement("div",{className:"headerCon Bold flexRow alignItemsCenter"},a.createElement("span",{className:"flex Font16 Bold"},no.find(function(ct){return ct.type===Ke.type}).paramName," "),a.createElement(j.Z,{icon:"close",className:"Font20 Hand Gray_9e ThemeHoverColor3",onClick:function(){return nt()}})),a.createElement("div",{className:"flex editCon"},pt.map(function(ct){return a.createElement(a.Fragment,null,["norange"].includes(ct)||["max"].includes(ct)&&Ke.type===200&&Z().get(Ke,"advancedSetting.allowitem")!="1"||Ke.type===11&&["direction"].includes(ct)&&Z().get(Ke,"advancedSetting.checktype")!=="1"?null:a.createElement("div",{className:"title mTop24"},ct==="fieldId"?a.createElement(a.Fragment,null,_l("\u53D8\u91CF id "),a.createElement("span",{className:"Red"},"*")):fr[ct]),at(ct))}))))}const Do=(0,ye.Z)(Vo);var qo=(0,R.Z)([`
  .textareaWrap {
    height: 320px;
    overflow-y: auto;
  }
`],[`
  .textareaWrap {
    height: 320px;
    overflow-y: auto;
  }
`]),Wo=q.ZP.div(qo);function ao(Me){var nt=Me.onCancel,He=Me.onOk,ie=(0,a.useState)(""),We=(0,Ie.Z)(ie,2),Ue=We[0],Ke=We[1];return a.createElement(Mt.Z,{bodyClass:"pBottom0",width:720,visible:!0,title:_l("\u8F93\u5165JSON\u4EE3\u7801\u6DFB\u52A0\u914D\u7F6E"),onOk:function(){return He(Ue)},onCancel:function(){return nt()}},a.createElement(Wo,null,a.createElement(bo.Z,{name:"textarea",style:{maxHeight:"500px",minHeight:450},value:Ue,onChange:Ke})))}var _o=(0,R.Z)([`
  height: 36px;
  margin-left: -26px;
  margin-top: 10px;
`],[`
  height: 36px;
  margin-left: -26px;
  margin-top: 10px;
`]),_r=q.ZP.div(_o),_a=(0,Wt.W6)(function(){return a.createElement(j.Z,{className:"mRight10 Font16 Hand Gray_9e",icon:"drag"})}),$r=(0,Wt.W8)(function(Me){var nt=Me.type,He=Me.onEdit,ie=Me.openEdit,We=Me.onDelete,Ue=Me.num,Ke=Me.list,ut=Me.key,wt=(0,qn.Z)({controlName:Me.controlName}),Et=(0,Ie.Z)(wt,2),et=Et[0].controlName,Xe=Et[1],pt=(0,a.useRef)(null),at=(0,a.useRef)(null);return(0,a.useEffect)(function(){setTimeout(function(){var ct=pt.current;ct&&ct.focus()},200)},[]),(0,a.useEffect)(function(){Me.controlName?pt.current.value=Me.controlName:pt.current.value="",Me.fieldId&&at.current&&(at.current.value=Me.fieldId)},[Me]),a.createElement(_r,{className:"flexRow alignItemsCenter mBottom10 itemSortLi",key:ut},a.createElement(_a,null),a.createElement("div",{className:"typeTxt WordBreak overflow_ellipsis",title:(no.find(function(ct){return ct.type===nt})||{}).paramName},(no.find(function(ct){return ct.type===nt})||{}).paramName),a.createElement(Br.Z,{className:"flex mLeft12 placeholderColor",defaultValue:et,placeholder:_l("\u8BF7\u8F93\u5165"),onBlur:function(Nt){var mn=Nt.target.value.trim();et!==mn&&He({controlName:mn},Ue),Nt.stopPropagation()},manualRef:function(Nt){pt.current=Nt}}),[22,201].includes(nt)?a.createElement("div",{className:"flex mLeft12",style:{minWidth:130}}):a.createElement(Br.Z,{className:"flex mLeft12 placeholderColor",defaultValue:Me.fieldId,manualRef:function(Nt){at.current=Nt},onBlur:function(Nt){var mn=Nt.target.value.trim();if(Ke.find(function(Qt,Cn){return Qt.fieldId===mn&&Cn!==Ue})){at.current.value=Me.fieldId,alert(_l("\u53D8\u91CFid\u91CD\u590D"),3);return}mn?He({fieldId:mn},Ue):at.current.value=Me.fieldId,Nt.stopPropagation()}}),a.createElement("div",{className:"actionCon"},a.createElement(j.Z,{className:"Font16 Hand editIcon mLeft15",icon:"new_mail",onClick:function(){setTimeout(function(){ie(Ue)},500)}}),a.createElement(j.Z,{className:"Font16 Hand mLeft15 del",icon:"delete2",onClick:function(){We(Ue)}})))}),el=(0,Wt.JN)(function(Me){var nt=Me.items;return a.createElement("div",{className:""},_.map(nt,function(He,ie){return a.createElement($r,(0,y.default)({},Me,He,{key:"item_"+ie,index:ie,list:nt,num:ie}))}))});function tl(Me){return a.createElement(el,Me)}const uo=(0,en.Z)(tl);var nl=t(30381),Ro=t.n(nl),Ao=(0,R.Z)([`
  .tit {
    font-weight: 400;
  }
  .pluginSet {
    width: 440px;
    height: 36px;
    background: #ffffff;
    border-radius: 3px 3px 3px 3px;
    border: 1px solid #dddddd;
    &:hover {
      border: 1px solid #ccc;
    }
    .iconCon {
      width: 43px;
      height: 36px;
      border: 1px solid #dddddd;
      margin: -1px;
      z-index: 0;
      border-radius: 3px 0 0 3px;
      &:hover {
        border: 1px solid #ccc;
        z-index: 1;
      }
      & > div {
        margin: 0 auto;
      }
    }
    .Input {
      margin: -1px -1px -1px 0;
      border: 1px solid #dddddd;
      border-radius: 0 3px 3px 0;
      &:focus,
      &:hover {
        z-index: 1;
      }
    }
  }
  .paramCon {
    .w100 {
      width: 100px !important;
    }
    .w130 {
      width: 130px !important;
    }
    .actionCon {
      width: 60px;
    }
  }
`],[`
  .tit {
    font-weight: 400;
  }
  .pluginSet {
    width: 440px;
    height: 36px;
    background: #ffffff;
    border-radius: 3px 3px 3px 3px;
    border: 1px solid #dddddd;
    &:hover {
      border: 1px solid #ccc;
    }
    .iconCon {
      width: 43px;
      height: 36px;
      border: 1px solid #dddddd;
      margin: -1px;
      z-index: 0;
      border-radius: 3px 0 0 3px;
      &:hover {
        border: 1px solid #ccc;
        z-index: 1;
      }
      & > div {
        margin: 0 auto;
      }
    }
    .Input {
      margin: -1px -1px -1px 0;
      border: 1px solid #dddddd;
      border-radius: 0 3px 3px 0;
      &:focus,
      &:hover {
        z-index: 1;
      }
    }
  }
  .paramCon {
    .w100 {
      width: 100px !important;
    }
    .w130 {
      width: 130px !important;
    }
    .actionCon {
      width: 60px;
    }
  }
`]),Po=(0,R.Z)([`
  background: #ffffff;
  box-shadow: 0px 4px 16px 1px rgba(0, 0, 0, 0.24);
  padding: 6px 0;
  border-radius: 3px 3px 3px 3px;
  width: 160px;
  & > div {
    line-height: 36px;
    padding: 0 16px;
    font-weight: 400;
    &:hover {
      background: #2196f3;
      color: #fff;
    }
  }
`],[`
  background: #ffffff;
  box-shadow: 0px 4px 16px 1px rgba(0, 0, 0, 0.24);
  padding: 6px 0;
  border-radius: 3px 3px 3px 3px;
  width: 160px;
  & > div {
    line-height: 36px;
    padding: 0 16px;
    font-weight: 400;
    &:hover {
      background: #2196f3;
      color: #fff;
    }
  }
`]),Uo=q.ZP.div(Ao),Qr=q.ZP.div(Po);function Go(Me){var nt=Me.projectId,He=Me.worksheetControls,ie=Me.onChangeView,We=Me.view,Ue=(0,qn.Z)({switchSettings:{},paramSettings:[],name:_l("\u81EA\u5B9A\u4E49\u89C6\u56FE"),iconUrl:"https://fp1.mingdaoyun.cn/customIcon/sys_12_4_puzzle.svg",icon:"sys_12_4_puzzle",iconColor:"#445A65",editInfo:null,visible:!1,addVisible:!1,key:Ro()().format("YYYYMMDDhhmmss"),showEdit:!1}),Ke=(0,Ie.Z)(Ue,2),ut=Ke[0],wt=ut.switchSettings,Et=ut.paramSettings,et=ut.name,Xe=ut.icon,pt=ut.iconUrl,at=ut.iconColor,ct=ut.editInfo,Nt=ut.showEdit,mn=ut.visible,Qt=ut.addVisible,Cn=ut.key,_n=Ke[1];(0,a.useEffect)(function(){var Dn=Me.view,xn=Dn.pluginInfo,an=xn===void 0?{}:xn,Qn=an.switchSettings,Ln=Qn===void 0?{}:Qn,hn=an.paramSettings,Ra=hn===void 0?[]:hn,ha=an.name,Pn=an.iconUrl,ea=an.icon,Tn=an.iconColor;_n({switchSettings:Ln,paramSettings:Ra,name:ha,icon:ea||"sys_12_4_puzzle",iconUrl:Pn||"https://fp1.mingdaoyun.cn/customIcon/sys_12_4_puzzle.svg",iconColor:Tn||"#445A65"})},[Me]);var ra=function(xn){var an=xn.oldIndex,Qn=xn.newIndex;if(an!==Qn){var Ln=Et.slice(),hn=Ln.splice(an,1)[0];Ln.splice(Qn,0,hn),ie({paramSettings:Ln},!0),_n({paramSettings:Ln})}},Nn=function(xn){_n({editInfo:Et.find(function(an,Qn){return Qn===xn}),showEdit:!0})},Ht=function(xn,an){var Qn=Et.map(function(Ln,hn){return hn===an?(0,y.default)({},Ln,xn):Ln});_n({paramSettings:Qn}),ie({paramSettings:Qn},!0)},Sn=function(xn){var an=Me.view;ie({paramSettings:Et.filter(function(hn,Ra){return Ra!==xn})},!0);var Qn=_.get(an,"advancedSetting"),Ln=Qn.plugin_map;ie({plugin_map:oe()((0,y.default)({},_.omit(safeParse(Ln),[(Et.find(function(hn,Ra){return Ra===xn})||{}).fieldId])))},!1,{pluginId:_.get(an,"pluginInfo.id"),editAttrs:["advancedSetting","pluginId"]})};return a.createElement(Uo,{className:"mTop24"},a.createElement("div",{className:"tit mTop16 Bold"},_l("\u63D2\u4EF6\u540D\u79F0")),a.createElement("div",{className:"pluginSet flexRow alignItemsCenter mTop8"},a.createElement(St.Z,{action:["click"],popup:a.createElement(sl.Z,{className:"",hideInput:!0,iconColor:at,icon:pt,name:Xe,projectId:nt,onModify:function(xn){var an=xn.iconColor,Qn=xn.icon,Ln=xn.iconUrl;ie(an?{iconColor:an}:{icon:Qn},!0)}}),zIndex:1e3,popupAlign:{points:["tl","bl"],offset:[-280,0],overflow:{adjustX:!0,adjustY:!0}},getPopupContainer:function(){return document.body}},a.createElement("div",{className:"iconCon flexRow alignItemsCenter Hand TxtMiddle"},a.createElement(h.Z,{url:pt,fill:at,size:20}))),a.createElement(Br.Z,{className:"flex",value:et,onChange:function(xn){_n({name:xn})},onBlur:function(xn){var an=et.trim();_.get(We,"pluginInfo.name")!==an&&ie({name:an},!0)}})),a.createElement("div",{className:"tit mTop24 Bold"},_l("\u7CFB\u7EDF\u529F\u80FD")),a.createElement(zr.Y3,{className:"Hand flexRow alignItemsCenter mTop4",onClick:function(){ie({switchSettings:(0,y.default)({},wt,{showFastFilter:wt.showFastFilter==="1"?"":"1"})},!0)}},a.createElement(j.Z,{icon:wt.showFastFilter==="1"?"ic_toggle_on":"ic_toggle_off",className:"Font28"}),a.createElement("div",{className:"switchText switchTextP mLeft12 InlineBlock Gray Hand"},_l("\u5FEB\u901F\u7B5B\u9009"))),a.createElement(zr.Y3,{className:"Hand flexRow alignItemsCenter",onClick:function(){ie({switchSettings:(0,y.default)({},wt,{showNav:wt.showNav==="1"?"":"1"})},!0)}},a.createElement(j.Z,{icon:wt.showNav==="1"?"ic_toggle_on":"ic_toggle_off",className:"Font28"}),a.createElement("div",{className:"switchText switchTextP mLeft12 InlineBlock Gray Hand"},_l("\u7B5B\u9009\u5217\u8868"))),a.createElement("div",{className:"title Bold mTop32"},_l("\u53C2\u6570\u8BBE\u7F6E")),a.createElement("div",{className:"mTop4 Gray_9e"},_l("\u914D\u7F6E\u4F7F\u7528\u672C\u89C6\u56FE\u65F6\u9700\u8981\u7684\u8BBE\u7F6E\u9879\uFF0C\u5BF9\u5E94\u53D8\u91CF\u53EF\u4EE5\u5728\u63D2\u4EF6\u4EE3\u7801\u4E2D\u5F15\u7528"),a.createElement("span",{className:"editHref ThemeColor3 mLeft5 Hand",onClick:function(){Me.onUpdateTab("ParameterSet")}},_l("\u9884\u89C8"))),a.createElement("div",{className:"paramCon"},a.createElement("div",{className:"headCon flexRow alignItemsCenter mTop20"},a.createElement("div",{className:"w100 Gray_9e"},_l("\u7C7B\u578B")),a.createElement("div",{className:"w130 mLeft12 Gray_9e"},_l("\u540D\u79F0")),a.createElement("div",{className:"w130 mLeft12 Gray_9e"},_l("\u53D8\u91CF id "),a.createElement("span",{className:"Red"},"*")),a.createElement("div",{className:"actionCon TxtRight"},a.createElement(Ne.Z,{text:a.createElement("span",null,_l("\u6E05\u7A7A\u53C2\u6570")),popupPlacement:"top"},a.createElement("i",{className:"icon-clean_all Font20 Gray_9e ThemeHoverColor3 Hand",onClick:function(){_n({key:Ro()().format("YYYYMMDDhhmmss")}),ie({paramSettings:[]},!0)}})))),a.createElement("div",{className:"listCon"},a.createElement(uo,{items:Et,key:Cn,useDragHandle:!0,helperClass:"itemSortLiHand",onEdit:Ht,openEdit:Nn,onDelete:Sn,onSortEnd:ra})),a.createElement("div",{className:"nextStep mTop20 flexRow alignItemsCenter"},a.createElement(St.Z,{popup:a.createElement(Qr,null,no.map(function(Dn){return a.createElement("div",{className:"Hand Font14",onClick:function(){var an=Et.filter(function(Ln){return Ln.fieldId===Dn.fieldId}).length,Qn=function Ln(hn){return Et.find(function(Ra){return Ra.fieldId===""+Dn.fieldId+hn})?Ln(hn+1):hn};ie({paramSettings:Et.concat(Yr(Dn.type,{fieldId:""+Dn.fieldId+(an>0?Qn(an):""),paramName:Dn.paramName,type:Dn.type}))},!0)}},Dn.paramName)})),action:["click"],popupAlign:{points:["tl","bl"],offset:[0,5],overflow:{adjustX:!0,adjustY:!0}},getPopupContainer:function(){return document.body}},a.createElement("span",{className:"Gray_9e Bold Hand flexRow alignItemsCenter ThemeHoverColor3"},a.createElement(j.Z,{icon:"add",className:"Font20"}),a.createElement("span",{className:"mLeft4"},_l("\u53C2\u6570%05037")))),a.createElement("span",{className:"mLeft8 Gray_d"},"\uFF5C"),a.createElement("span",{className:"mLeft8 Gray_9e Bold Hand ThemeHoverColor3",onClick:function(){_n({addVisible:!0})}},_l("\u4ECE\u4EE3\u7801\u6DFB\u52A0")),a.createElement("span",{className:"flex"}),Et.length>0&&a.createElement("span",{className:"Gray_9e Bold Hand ThemeHoverColor3",onClick:function(){var xn=oe()(Et),an=new Blob([xn],{type:"application/json"}),Qn=new Date,Ln=Ro()(Qn).format("YYYYMMDDhhmmss"),hn=URL.createObjectURL(an),Ra=document.createElement("a");Ra.href=hn,Ra.download=et+"_"+Ln+".json",Ra.click(),Ra.remove(),window.URL.revokeObjectURL(hn)}},_l("\u751F\u6210JSON\u4EE3\u7801")))),a.createElement(ho(),{transitionName:"StatisticsPanel",transitionEnterTimeout:500,transitionLeaveTimeout:300},Nt&&a.createElement(Do,{controls:He.filter(function(Dn){return xo.includes(Dn.type)}),info:ct,onClickAwayExceptions:[".ant-select",".nano",".mui-dialog-container",".ant-select-dropdown",".rc-trigger-popup",".selectize-dropdown",".selectUserBox",".ant-picker-dropdown",".selectRoleDialog"],onClickAway:function(){return _n({editInfo:null,showEdit:!1})},onClose:function(){_n({editInfo:null,showEdit:!1})},onChange:function(xn){var an=Et.map(function(Qn){return Qn.fieldId===xn.fieldId?xn:Qn});_.isEqual(an,Et)||(ie({paramSettings:an},!0),_n({editInfo:xn}))}})),Qt&&a.createElement(ao,{onOk:function(xn){var an=[];try{an=JSON.parse(xn)}catch(hn){return alert(_l("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u683C\u5F0F"),3)}if(!(_.isObject(an)&&_.isArray(an))||an.length<=0)return alert(_l("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u683C\u5F0F"),3);var Qn=an.filter(function(hn){return!(_.isObject(hn)&&!_.isArray(hn)&&hn.fieldId&&hn.type&&no.map(function(Ra){return Ra.type}).includes(hn.type))});if(Qn.length>0)return alert(_l("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u683C\u5F0F"),3);var Ln=an.map(function(hn){return hn.fieldId});if(_.uniq(Ln).length<Ln.length)return alert(_l("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u683C\u5F0F"),3);ie({paramSettings:an},!0),_n({addVisible:!1})},onCancel:function(){return _n({addVisible:!1})}}))}const go=(0,en.Z)(Go);var al=t(24538),rl=t(77738),Fo=t(6917),Wn=(0,R.Z)([`
  .emptyCon {
    width: 130px;
    height: 130px;
    background: #f5f5f5;
    border-radius: 50%;
    text-align: center;
    margin: 170px auto 0;
    i {
      font-size: 70px;
      color: #bdbdbd;
    }
  }
  .customFormLine {
    display: none !important;
  }
  .customFieldsContainer .customFormItemControl .customFormControlBox {
    background: #fff;
    border-color: #ddd;
    &:not(.controlDisabled):hover {
      background: #fff;
      border-color: #ccc;
    }
  }
  .customAntSelect:not(.ant-select-open):not(.ant-select-disabled) .ant-select-selector {
    background: #fff !important;
    border-color: #ddd !important;
    &:hover {
      border-color: #ccc !important;
      background: #fff !important;
    }
  }
  .customFieldsContainer .customFormItemControl > .ming.Dropdown .Dropdown--border:not(:hover):not(.active),
  .customFieldsContainer .customFormItemControl .sortColumnWrap .Dropdown--input,
  .customFieldsContainer .customFormItemControl > .ming.Dropdown .Dropdown--border:hover,
  .customFieldsContainer .customFormItemControl > .ming.Dropdown .Dropdown--border.active {
    border-color: #ddd !important;
    &:hover {
      border-color: #ccc !important;
    }
  }
  .conCustomFields {
    .customFieldsContainer .customFormItem {
      padding: 0px 12px;
    }
    padding-top: 10px;
    &.conCustomFields_boolean {
      padding-top: 16px;
    }
    &.conCustomFields_enum {
      .RadioGroupCon .Radio {
        word-break: break-all;
      }
    }
    .customFieldsContainer .customFormItemControl .customFormControlBox.customFormControlSwitch .Checkbox {
      margin-top: 0px;
    }
  }
`],[`
  .emptyCon {
    width: 130px;
    height: 130px;
    background: #f5f5f5;
    border-radius: 50%;
    text-align: center;
    margin: 170px auto 0;
    i {
      font-size: 70px;
      color: #bdbdbd;
    }
  }
  .customFormLine {
    display: none !important;
  }
  .customFieldsContainer .customFormItemControl .customFormControlBox {
    background: #fff;
    border-color: #ddd;
    &:not(.controlDisabled):hover {
      background: #fff;
      border-color: #ccc;
    }
  }
  .customAntSelect:not(.ant-select-open):not(.ant-select-disabled) .ant-select-selector {
    background: #fff !important;
    border-color: #ddd !important;
    &:hover {
      border-color: #ccc !important;
      background: #fff !important;
    }
  }
  .customFieldsContainer .customFormItemControl > .ming.Dropdown .Dropdown--border:not(:hover):not(.active),
  .customFieldsContainer .customFormItemControl .sortColumnWrap .Dropdown--input,
  .customFieldsContainer .customFormItemControl > .ming.Dropdown .Dropdown--border:hover,
  .customFieldsContainer .customFormItemControl > .ming.Dropdown .Dropdown--border.active {
    border-color: #ddd !important;
    &:hover {
      border-color: #ccc !important;
    }
  }
  .conCustomFields {
    .customFieldsContainer .customFormItem {
      padding: 0px 12px;
    }
    padding-top: 10px;
    &.conCustomFields_boolean {
      padding-top: 16px;
    }
    &.conCustomFields_enum {
      .RadioGroupCon .Radio {
        word-break: break-all;
      }
    }
    .customFieldsContainer .customFormItemControl .customFormControlBox.customFormControlSwitch .Checkbox {
      margin-top: 0px;
    }
  }
`]),Ae=q.ZP.div(Wn),Ge=function(nt){var He=nt.value,ie=nt.advancedSetting,We=ie===void 0?{}:ie,Ue=nt.controls,Ke=Ue===void 0?[]:Ue,ut=nt.worksheetControls,wt=ut===void 0?[]:ut,Et=We.max,et=[];Ke.map(function(pt){switch(pt){case"11":et=[].concat((0,i.Z)(et),[9,11]);break;case"15":et=[].concat((0,i.Z)(et),[15,16]);break;case"3":et=[].concat((0,i.Z)(et),[3,4]);break;case"24":et=[].concat((0,i.Z)(et),[19,23,24]);break;case"31":et=[].concat((0,i.Z)(et),[31,38]);break;default:et=[].concat((0,i.Z)(et),[Number(pt)]);break}});var Xe=wt.filter(function(pt){return et.includes(pt.type)});return Z().get(nt,"advancedSetting.allowitem")==="1"?a.createElement("div",{className:""},a.createElement(rl.Z,{noempty:!1,controlsSorts:He,showControls:He,columns:Xe,empty:a.createElement("div",{className:"Gray_9e"},_l("\u8BF7\u9009\u62E9")),placeholder:_l("\u641C\u7D22"),onChange:function(at){var ct=at.newControlSorts,Nt=at.newShowControls,mn=[];ct.map(function(Cn){mn=mn.concat(Xe.find(function(_n){return Cn===_n.controlId}))});var Qt=Et?Nt.slice(0,Et):Nt;mn=mn.filter(function(Cn){return Qt.includes(Cn.controlId)}),nt.onChange(mn.map(function(Cn){return Cn.controlId})),Et&&Nt.length>Et&&alert(_l("\u663E\u793A\u5B57\u6BB5\u6700\u591A\u53EA\u80FD\u8BBE\u7F6E%0\u4E2A",Et),3)}})):a.createElement(C.Z,{placeholder:_l("\u8BF7\u9009\u62E9"),className:N()("w100 paramControlDropdown"),renderItem:function(){var at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return a.createElement("div",{className:N()("itemText",{isCur:Xe.find(function(ct){return ct.controlId===at.controlId})})},a.createElement(j.Z,{icon:(0,de.hB)(at.type,!1),className:"Font18"}),a.createElement("span",{className:"mLeft20"},at.controlName))},noData:_l("\u5F53\u524D\u5DE5\u4F5C\u8868\u4E2D\u6CA1\u6709\u53EF\u9009\u5B57\u6BB5\uFF0C\u8BF7\u5148\u53BB\u6DFB\u52A0\u4E00\u4E2A"),value:!He||He.length<=0?void 0:He[0],onChange:function(at){var ct=[];at?ct=[at]:ct=[],nt.onChange(ct)},renderTitle:function(){var at=(He||[])[0],ct=Xe.find(function(Nt){return Nt.controlId===at});return a.createElement("div",{className:"flexRow alignItemsCenter"},a.createElement(j.Z,{icon:(0,de.hB)((ct||{}).type,!1),className:"Font16 Gray_9e"}),a.createElement("span",{className:"mLeft5"},(ct||{}).controlName))},border:!0,menuClass:"paramControlDropdownMenu",cancelAble:!0,isAppendToBody:!0,openSearch:!0,data:Xe.map(function(pt){return(0,y.default)({},Z().omit(pt,["icon"]),{value:pt.controlId,text:pt.controlName})})})};function A(Me){var nt=Me.view,He=nt===void 0?{}:nt,ie=Me.onChangeView,We=Me.worksheetControls,Ue=(0,qn.Z)({paramSettings:[]}),Ke=(0,Ie.Z)(Ue,2),ut=Ke[0].paramSettings,wt=Ke[1];(0,a.useEffect)(function(){var Xe=Z().get(Me,"view.pluginInfo.paramSettings")||[],pt=Xe.map(function(at,ct){var Nt=Z().get(Me,"view.advancedSetting.plugin_map"),mn=safeParse(Nt)[at.fieldId],Qt=(0,y.default)({},at,{controlId:at.fieldId,advancedSetting:(0,y.default)({},at.advancedSetting,{hinttype:"2",titlecolor:"#333333ff",titlestyle:"1000",hidetitle:at.controlName?"":"1"}),value:mn,row:ct+1});if(Qt.type===36){var Cn=(safeParse(Z().get(at,"advancedSetting.defsource")||"[]")[0]||{}).staticValue;Qt=(0,y.default)({},Qt,{hint:Qt.des,switchSize:Qt.advancedSetting.showtype!=="1"?"default":"small",advancedSetting:(0,y.default)({},Qt.advancedSetting,{defsource:oe()([(0,y.default)({},safeParse(Z().get(Qt,"advancedSetting.defsource")||"[]")[0]||{},{staticValue:Cn?"1":"0"})])})}),[!0,!1].includes(Qt.value)&&(Qt=(0,y.default)({},Qt,{value:Qt.value?"1":"0"})),Qt.advancedSetting.showtype==="1"&&(Qt=(0,y.default)({},Qt,{advancedSetting:(0,y.default)({},Qt.advancedSetting,{itemnames:oe()([{key:"1",value:at.des},{key:"0",value:at.des}])})}))}return Qt.type===6&&(Qt=(0,y.default)({},Qt,{advancedSetting:(0,y.default)({},Qt.advancedSetting,{roundtype:"2"})})),[9,10,11].includes(Qt.type)&&(Qt=(0,y.default)({},Qt,{advancedSetting:(0,y.default)({},Qt.advancedSetting,{showtype:Qt.advancedSetting.checktype}),type:Qt.advancedSetting.checktype==="1"?9:11,value:Z().isEmpty(Qt.value)?"":oe()(Qt.value)})),Qt.type===200&&(Qt.worksheetControls=We),(0,y.default)({},Qt,{size:12})});wt({paramSettings:pt})},[Z().get(Me,"view.advancedSetting.plugin_map"),Z().get(Me,"view.pluginInfo.paramSettings")]);var Et=function(pt){var at={};(pt||ut).map(function(ct){at[ct.fieldId]=ct.type===36?ct.value==="1":[9,10,11].includes(ct.type)?safeParse(ct.value):ct.value}),ie({plugin_map:oe()(at)},!1,{pluginId:Z().get(He,"pluginInfo.id"),editAttrs:["advancedSetting","pluginId"]})},et=function(){return ut.length<=0?a.createElement(a.Fragment,null,a.createElement("div",{className:"emptyCon flexRow alignItemsCenter justifyContentCenter"},a.createElement(j.Z,{icon:"configure"})),a.createElement("div",{className:"Gray_9e Font16 TxtCenter mTop30"},_l("\u6682\u672A\u6DFB\u52A0\u53C2\u6570"))):a.createElement(al.Z,{disableRules:!0,data:ut,isCreate:!0,onChange:function(at,ct,Nt){var mn=Nt.controlId;if(mn){wt({paramSettings:at});var Qt=at.find(function(Cn){return Cn.controlId===mn});Qt&&[].concat((0,i.Z)(Fo.M),[200]).includes(Qt.type)&&Et(at)}},onBlur:function(){Et()},customWidgets:{200:Ge}})};return a.createElement(Ae,{className:"mTop16"},et())}var M=t(15759),Ve=t(20640),Oe=t.n(Ve),it=t(12387),ot=(0,R.Z)([`
  height: 100%;
  .submitCon {
    height: 100%;
    .submitContent {
      padding: 0 40px 32px;
    }
  }
`],[`
  height: 100%;
  .submitCon {
    height: 100%;
    .submitContent {
      padding: 0 40px 32px;
    }
  }
`]),qe=(0,R.Z)([`
  .refresh {
    color: #9e9e9e;
  }
  .w160 {
    width: 160px !important;
  }
  .w60 {
    width: 60px !important;
  }
  .w44 {
    width: 44px !important;
  }
  .nullCon {
    padding-bottom: 32px;
    border-bottom: 1px solid #dddddd;
  }
  .conLi {
    padding: 10px 12px 10px 8px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.04);
    transition: all 0.2s ease;
    .ming.Radio {
      margin-right: 0;
    }
    .action {
      option: 0;
      // display: none;
      width: 0;
      transition: all 0.2s ease;
      &::before {
        display: none;
      }
    }
    &:hover {
      background: #f5f5f5;
      .action {
        option: 1;
        width: 16px;
        // display: inline-block;
        &::before {
          display: block;
        }
      }
    }
  }
`],[`
  .refresh {
    color: #9e9e9e;
  }
  .w160 {
    width: 160px !important;
  }
  .w60 {
    width: 60px !important;
  }
  .w44 {
    width: 44px !important;
  }
  .nullCon {
    padding-bottom: 32px;
    border-bottom: 1px solid #dddddd;
  }
  .conLi {
    padding: 10px 12px 10px 8px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.04);
    transition: all 0.2s ease;
    .ming.Radio {
      margin-right: 0;
    }
    .action {
      option: 0;
      // display: none;
      width: 0;
      transition: all 0.2s ease;
      &::before {
        display: none;
      }
    }
    &:hover {
      background: #f5f5f5;
      .action {
        option: 1;
        width: 16px;
        // display: inline-block;
        &::before {
          display: block;
        }
      }
    }
  }
`]),It=(0,R.Z)([`
  padding: 6px 0;
  width: 160px;
  background: #ffffff;
  box-shadow: 0px 4px 16px 1px rgba(0, 0, 0, 0.25);
  & > div {
    height: 36px;
    font-weight: 400;
    .icon {
      color: #9e9e9e;
    }
    &.del {
      color: #f44336;
      .icon {
        color: #f44336;
      }
    }
    &:hover {
      color: #fff;
      background: #2196f3;
      .icon {
        color: #fff;
      }
    }
  }
`],[`
  padding: 6px 0;
  width: 160px;
  background: #ffffff;
  box-shadow: 0px 4px 16px 1px rgba(0, 0, 0, 0.25);
  & > div {
    height: 36px;
    font-weight: 400;
    .icon {
      color: #9e9e9e;
    }
    &.del {
      color: #f44336;
      .icon {
        color: #f44336;
      }
    }
    &:hover {
      color: #fff;
      background: #2196f3;
      .icon {
        color: #fff;
      }
    }
  }
`]),ft=q.ZP.div(ot),st=q.ZP.div(qe),Zt=q.ZP.div(It),On=50,Fn=[{txt:_l("\u53D1\u5E03"),icon:"publish",key:"publish"},{txt:_l("\u5220\u9664"),icon:"delete1",key:"delete"}];function Ca(Me){var nt=Me.onDel,He=Me.setPublish,ie=Me.id,We=Me.projectId,Ue=Me.view,Ke=(0,qn.Z)({visible:!1}),ut=(0,Ie.Z)(Ke,2),wt=ut[0].visible,Et=ut[1],et=md.global.Account.projects.find(function(Xe){return Xe.projectId===We})||{};return a.createElement(St.Z,{action:["click"],popupVisible:wt,onPopupVisibleChange:function(pt){Et({visible:pt})},popup:a.createElement(Zt,null,Fn.filter(function(Xe){return(et.isSuperAdmin||et.isProjectAppManager||Z().get(Ue,"pluginInfo.creator.accountId")===md.global.Account.accountId)&&et.allowPlugin?!0:Xe.key!=="publish"}).map(function(Xe,pt){return a.createElement("div",{className:N()("Hand Font14 flexRow alignItemsCenter pLeft12",{del:Xe.key==="delete"}),onClick:function(ct){Et({visible:!1}),Xe.key==="delete"?Mt.Z.confirm({className:"",buttonType:"danger",title:a.createElement("span",{className:"Bold Font17"},_l("\u5220\u9664\u5F53\u524D\u7248\u672C")),description:_l("\u5F7B\u5E95\u5220\u9664\u63D0\u4EA4\u7248\u672C\uFF0C\u4E0D\u53EF\u6062\u590D"),onOk:function(){nt(ie)},okText:_l("\u5220\u9664")}):He(),ct.stopPropagation()}},a.createElement(j.Z,{icon:Xe.icon,className:"mRight8"}),Xe.txt)})),popupAlign:{points:["tl","bl"],overflow:{adjustX:!0,adjustY:!0}},getPopupContainer:function(){return document.body}},a.createElement(j.Z,{icon:"more_horiz",className:"ThemeHoverColor3 Hand action mLeft12 Font16"}))}function Jn(Me){var nt=Me.view,He=nt===void 0?{}:nt,ie=Me.onChangeView,We=Me.appId,Ue=Me.updateCurrentViewState,Ke=Me.projectId,ut=(0,qn.Z)({pageIndex:0,loading:!1,isMore:!0,CommitId:"",list:[],configuration:null,publishVersion:""}),wt=(0,Ie.Z)(ut,2),Et=wt[0],et=Et.pageIndex,Xe=Et.loading,pt=Et.isMore,at=Et.list,ct=Et.CommitId,Nt=Et.configuration,mn=Et.publishVersion,Qt=wt[1];(0,a.useEffect)(function(){_n(1)},[]),(0,a.useEffect)(function(){var Ht=He.pluginInfo,Sn=Ht===void 0?{}:Ht,Dn=He.advancedSetting,xn=Dn===void 0?{}:Dn,an=Sn.configuration,Qn=xn.plugin_attachement_info,Ln=safeParse(Qn),hn=Ln.CommitId;Qt({CommitId:hn,configuration:an})},[Me]);var Cn=function(Sn){Oe()(Sn),alert(_l("\u590D\u5236\u6210\u529F"))},_n=function(Sn,Dn){Z().get(He,"pluginInfo.id")&&(!Dn&&(Xe||!pt)||(Qt({loading:!0}),Dn&&Qt({list:[]}),nn.Z.getCommitHistory({id:Z().get(He,"pluginInfo.id"),pageIndex:Sn,pageSize:On,appId:We}).then(function(xn){var an=xn.totalCount,Qn=xn.history,Ln=Qn===void 0?[]:Qn,hn=Sn<=1?Ln:at.concat(Ln);Qt({pageIndex:Sn,isMore:an>hn.length,loading:!1,list:hn})})))},ra=function(Sn){nn.Z.removeCommit({appId:We,id:Sn}).then(function(Dn){if(Dn){if(Qt({list:at.filter(function(Qn){return Qn.id!==Sn})}),ct===Sn){var xn=Z().get(He,"advancedSetting"),an=xn.plugin_attachement_info;ie({plugin_attachement_info:oe()((0,y.default)({},safeParse(an),{CommitId:""}))},!1,{pluginId:Z().get(He,"pluginInfo.id"),editAttrs:["advancedSetting","pluginId"]})}alert(_l("\u5220\u9664\u6210\u529F"))}else alert(_l("\u5220\u9664\u5931\u8D25\uFF0C\u7A0D\u540E\u518D\u8BD5"),3)})},Nn=function(Sn,Dn){return a.createElement("div",{className:"textCopyCon flexRow alignItemsCenter mTop16 Hand",onClick:function(){return Cn(Sn)}},a.createElement("div",{className:"flex"},Dn?Dn():Sn),a.createElement(j.Z,{className:"Hand mLeft10",icon:"content-copy"}))};return a.createElement(ft,{className:"flexColumn"},a.createElement(Te.Z,{className:"submitCon flex",onScrollEnd:function(){return _n(et+1)}},a.createElement("div",{className:"submitContent"},a.createElement("div",{className:"viewSetTitle"},_l("\u63D0\u4EA4")),a.createElement("div",{className:"mTop4 Gray_9e"},_l("\u63D2\u4EF6\u5F00\u53D1\u5B8C\u6210\u540E\uFF0C\u53EF\u4EE5\u6309\u4EE5\u4E0B\u6B65\u9AA4\u63D0\u4EA4\u63D2\u4EF6\u3002\u53D1\u5E03\u6210\u529F\u540E\uFF0C\u672C\u63D2\u4EF6\u5728\u7EC4\u7EC7\u4E0B\u6240\u6709\u5E94\u7528\u5747\u53EF\u4F7F\u7528\u3002")),a.createElement("div",{className:"Gray_75 mTop24 Bold"},_l("\u7B2C1\u6B65")),a.createElement("div",{className:"mTop4"},_l("\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\u5C06\u672C\u5730\u9879\u76EE\u6253\u5305")),Nn("mdye build"),a.createElement("div",{className:"Gray_75 mTop24 Bold"},_l("\u7B2C2\u6B65")),a.createElement("div",{className:"mTop4"},_l("\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\u5C06\u672C\u5730\u9879\u76EE\u63D0\u4EA4\u5E76\u63A8\u9001\u5230\u7EBF\u4E0A\u5F85\u53D1\u5E03\u63D2\u4EF6\u5217\u8868\u3002\u53EF\u4EE5\u4F7F\u7528-m\u53C2\u6570\u4E3A\u672C\u6B21\u63A8\u9001\u6DFB\u52A0\u5907\u6CE8\u4FE1\u606F\uFF1A")),Nn('mdye push -m "COMMENTS"',function(){return a.createElement("div",{className:""},"mdye push -m ",a.createElement("span",{className:"ThemeColor3"},'"COMMENTS"'))}),a.createElement("div",{className:"mTop24"},_l("\u63D0\u4EA4\u65F6\uFF0C\u9700\u8981\u767B\u5F55\u8D26\u6237\uFF0C\u8BF7\u6309\u63D0\u793A\u8F93\u5165\u7528\u6237\u540D\uFF08\u624B\u673A\u53F7\u6216\u90AE\u7BB1\u5730\u5740\uFF09\u548C\u5BC6\u7801\u3002")),a.createElement("div",{className:"Bold mTop32"},_l("\u5DF2\u63D0\u4EA4")),a.createElement("div",{className:"mTop8 TxtMiddle Gray_9e flexRow alignItemsCenter"},_l("\u9009\u62E9\u4E00\u4E2A\u5DF2\u63D0\u4EA4\u7684\u4EE3\u7801\u5E94\u7528\u5230\u89C6\u56FE")," ",a.createElement(j.Z,{icon:"task-later",className:"Gray_bd ThemeHoverColor3 Hand Font16 mLeft5",onClick:function(){_n(1,!0)}})),a.createElement(st,{className:"flexColumn mTop12"},a.createElement("div",{className:"con mTop10 flex"},at.map(function(Ht){return a.createElement("div",{className:"flexRow conLi alignItemsCenter"},a.createElement(Ce.Z,{className:"",checked:Ht.id===ct,onClick:function(Dn){var xn=Z().get(He,"advancedSetting"),an=xn.plugin_attachement_info;Ht.id!==ct&&ie({plugin_attachement_info:oe()((0,y.default)({},safeParse(an),{CommitId:Ht.id}))},!1,{pluginId:Z().get(He,"pluginInfo.id"),editAttrs:["advancedSetting","pluginId"]})}}),a.createElement("div",{className:"flex Gray_9e mLeft12 WordBreak overflow_ellipsis",style:{"flex-shrink":0}},a.createElement("div",{className:"Gray overflow_ellipsis",title:Z().get(Ht,"message")},Z().get(Ht,"message")),a.createElement("div",{className:"Gray_9e"},createTimeSpan(Ht.commitTime),Ht.versionTags.filter(function(Sn){return!!Sn}).length>0&&" | ",Ht.versionTags.join("\u3001"),Ht.beUsing&&"("+_l("\u5F53\u524D")+")")),a.createElement("div",{className:"mLeft12 Gray_9e actionOptions TxtRight flexRow alignItemsCenter"},a.createElement(M.Z,{size:20,user:{userHead:Z().get(Ht.author,"avatar"),accountId:Z().get(Ht.author,"accountId")},projectId:Ke}),a.createElement(Ca,(0,y.default)({},Ht,{projectId:Ke,view:He,onDel:ra,setPublish:function(){Qt({publishVersion:Ht.id})}}))))}),at.length<=0&&!Xe&&a.createElement("div",{className:"Gray_bd nullCon TxtCenter pTop10"},_l("\u8FD8\u6CA1\u6709\u63D0\u4EA4")),Xe&&a.createElement(Rt.Z,null))))),!!mn&&a.createElement(it.Z,{latestVersion:Z().get(He,"pluginInfo.latestVersion"),pluginId:Z().get(He,"pluginInfo.id"),commitId:mn,configuration:Nt,debugConfiguration:Nt,onClose:function(){Qt({publishVersion:""})},onRefreshDetail:function(){_n(1,!0),nn.Z.getDetail({id:Z().get(He,"pluginInfo.id"),source:Z().get(He,"pluginInfo.source")}).then(function(Sn){Ue({pluginInfo:Sn})})}}))}var aa=t(12692),xa=t(46336),va=t(68640),Pa=t.n(va),ta=t(24324),Ia=t.n(ta),Aa=(0,R.Z)([`
  li {
    .leftLine {
      width: 1px;
      height: 100%;
      position: absolute;
      background: #eaeaea;
      left: 12px;
      top: 24px;
      z-index: -1;
    }
    .tabCon {
      width: 24px;
      height: 24px;
      background: #f0f0f0;
      color: #757575;
      border-radius: 50%;
      text-align: center;
      line-height: 24px;
      margin-top: 14px;
      &.hs {
        background: #e3f2fd;
        color: #2196f3;
      }
      &.cur {
        background: #2196f3;
        color: #fff;
      }
    }
    .line {
      width: 100%;
      height: 1px;
      background: #eaeaea;
    }
  }
  .con {
    h5 {
      margin: 0;
    }
  }
  .nextStep {
    &:hover {
      color: #1565c0;
    }
  }
  .btn {
    padding: 0 20px;
    height: 36px;
    line-height: 36px;
    border-radius: 3px 3px 3px 3px;
    background: #2196f3;
    color: #fff;
    &.canClear {
      background: #ffffff;
      color: #757575;
      border: 1px solid #dddddd;
    }
  }
  .viewColdeTagTextarea {
    max-width: 400px;
    .CodeMirror {
      min-height: 100px;
      max-width: 400px;
    }
  }
  .ming.Input {
    border: 1px solid #ddd;
    &:hover {
      border-color: #bbb;
    }
    &:focus {
      border-color: #2196f3;
    }
  }
  .tagInputarea .tagInputareaIuput:not(.active) {
    border: 1px solid #ddd !important;
  }
`],[`
  li {
    .leftLine {
      width: 1px;
      height: 100%;
      position: absolute;
      background: #eaeaea;
      left: 12px;
      top: 24px;
      z-index: -1;
    }
    .tabCon {
      width: 24px;
      height: 24px;
      background: #f0f0f0;
      color: #757575;
      border-radius: 50%;
      text-align: center;
      line-height: 24px;
      margin-top: 14px;
      &.hs {
        background: #e3f2fd;
        color: #2196f3;
      }
      &.cur {
        background: #2196f3;
        color: #fff;
      }
    }
    .line {
      width: 100%;
      height: 1px;
      background: #eaeaea;
    }
  }
  .con {
    h5 {
      margin: 0;
    }
  }
  .nextStep {
    &:hover {
      color: #1565c0;
    }
  }
  .btn {
    padding: 0 20px;
    height: 36px;
    line-height: 36px;
    border-radius: 3px 3px 3px 3px;
    background: #2196f3;
    color: #fff;
    &.canClear {
      background: #ffffff;
      color: #757575;
      border: 1px solid #dddddd;
    }
  }
  .viewColdeTagTextarea {
    max-width: 400px;
    .CodeMirror {
      min-height: 100px;
      max-width: 400px;
    }
  }
  .ming.Input {
    border: 1px solid #ddd;
    &:hover {
      border-color: #bbb;
    }
    &:focus {
      border-color: #2196f3;
    }
  }
  .tagInputarea .tagInputareaIuput:not(.active) {
    border: 1px solid #ddd !important;
  }
`]),Wa=q.ZP.div(Aa),Xa=[{text:_l("React \u57FA\u7840\u793A\u4F8B\u6A21\u677F"),template:"React",value:1,iconTxt:"react",color:"#61DAFB"},{text:_l("JavaScript \u57FA\u7840\u793A\u4F8B\u6A21\u677F"),template:"JavaScript",value:3,iconTxt:"JS",color:"#FFCA28"},{text:_l("React + Tailwind CSS \u6A21\u677F"),template:"React-Tailwind",value:4,svg:Pa(),width:18,tip:_l("\u8BE5\u6A21\u677F mdye-cli \u4F9D\u8D56\u7248\u672C >= beta-0.0.23")},{text:_l("Vue \u6A21\u677F"),template:"Vue",value:5,svg:Ia(),width:16,tip:_l("Vue3\uFF0C\u8BE5\u6A21\u677F mdye-cli \u4F9D\u8D56\u7248\u672C >= beta-0.0.34")},{text:_l("Vue2 \u6A21\u677F"),template:"Vue2",value:6,svg:Ia(),width:16,tip:_l("\u8BE5\u6A21\u677F mdye-cli \u4F9D\u8D56\u7248\u672C >= beta-0.0.34\uFF0CVue2 \u5B98\u65B9\u5DF2\u7ECF\u7EC8\u6B62\u652F\u6301\u4E14\u4E0D\u518D\u7EF4\u62A4\uFF0C\u4E0D\u5EFA\u8BAE\u518D\u4F7F\u7528 Vue 2\u3002")}];function Ha(Me){var nt=(0,a.useRef)(null),He=Me.worksheetId,ie=Me.view,We=ie===void 0?{}:ie,Ue=Me.onChangeView,Ke=We.viewId,ut=(0,qn.Z)({stepState:0,cur:0,editHref:!1,templateType:1,customViewDebugUrl:window.localStorage.getItem("customViewDebugUrl_"+Ke),localStorageCustomViewDebugUrl:window.localStorage.getItem("customViewDebugUrl_"+Ke),configuration:""}),wt=(0,Ie.Z)(ut,2),Et=wt[0],et=Et.stepState,Xe=Et.cur,pt=Et.editHref,at=Et.templateType,ct=Et.customViewDebugUrl,Nt=Et.localStorageCustomViewDebugUrl,mn=Et.configuration,Qt=wt[1];(0,a.useEffect)(function(){var xn=Me.view,an=xn.pluginInfo,Qn=an===void 0?{}:an,Ln=Qn.stepState,hn=Ln===void 0?0:Ln,Ra=Qn.templateType,ha=Ra===void 0?1:Ra,Pn=Qn.configuration;Qt({stepState:hn,templateType:ha,cur:pt?Xe:hn,configuration:Z().isEmpty(Pn)?"":oe()(Pn)})},[Me]);var Cn=function(an){Oe()(an),alert(_l("\u590D\u5236\u6210\u529F"))},_n=function(an,Qn){return a.createElement("div",{className:"textCopyCon flexRow alignItemsCenter mTop16 Hand",onClick:function(){return Cn(an)}},a.createElement("div",{className:"flex"},Qn?Qn():an),a.createElement(j.Z,{className:"Hand mLeft10 Font18",icon:"content-copy"}))},ra=function(){var an=Xa.find(function(Qn){return Qn.value===(at||1)});return an&&an.tip&&a.createElement("div",{className:"Gray_75 mTop5"},an.tip)},Nn=function(an,Qn){return a.createElement(a.Fragment,null,a.createElement("h5",{className:N()("Bold Font14 pTop16",{})},an.title),Xe!==0&&Qn===0&&a.createElement(a.Fragment,null,a.createElement("div",{className:"mTop7"},_l("\u5DF2\u9009\u62E9%0",Xa.find(function(Ln){return Ln.value===(at||1)}).text),a.createElement("span",{className:"editHref ThemeColor3 mLeft25 Hand",onClick:function(hn){Qt({editHref:!0,cur:0}),hn.stopPropagation()}},_l("\u4FEE\u6539"))),ra()))},Ht=function(an){return a.createElement("div",{className:"nextStep mTop20"},a.createElement("span",{className:"ThemeColor3 Hand ThemeHoverColor2 Bold",onClick:function(Ln){Qt({cur:an+1,editHref:!1}),Ue({stepState:an+1},!0),Ln.stopPropagation()}},_l("\u4E0B\u4E00\u6B65")))},Sn=function(){var an={};if(Z().get(nt,"current.props.defaultValue")){try{an=JSON.parse(Z().get(nt,"current.props.defaultValue"))}catch(Qn){return alert(_l("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u683C\u5F0F"),3)}if(!(Z().isObject(an)&&!Z().isArray(an)))return alert(_l("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u683C\u5F0F"),3)}Ue({configuration:an},!0)},Dn=function(an){var Qn=void 0;switch(window.__api_server__.main!=="https://www.mingdao.com/api/"&&(window.__api_server__.main[0]==="/"?Qn=location.origin+window.__api_server__.main:Qn=window.__api_server__.main),an){case 0:return a.createElement(a.Fragment,null,a.createElement(C.Z,{className:"editHrefDrop w100 mTop16",border:!0,value:at||1,data:Xa,renderTitle:function(){var hn=Xa.find(function(Ra){return Ra.value===(at||1)});return a.createElement("div",{className:N()("itemText flexRow alignItemsCenter")},hn.svg?a.createElement("img",{className:"Icon",src:hn.svg,width:hn.width}):a.createElement(j.Z,{className:"Hand Font18",icon:hn.iconTxt,style:{color:hn.color}}),a.createElement("span",{className:"mLeft5"}," ",hn.text))},renderItem:function(hn){return a.createElement("div",{className:N()("itemText flexRow alignItemsCenter")},hn.svg?a.createElement("img",{className:"Icon",src:hn.svg,width:hn.width}):a.createElement(j.Z,{className:"Hand Font18",icon:hn.iconTxt,style:{color:hn.color}}),a.createElement("span",{className:"mLeft20"}," ",hn.text))},onChange:function(hn){hn!==at&&(Ue({templateType:hn},!0),Qt({editHref:!0,cur:0}))}}),ra(),Ht(an));case 1:return a.createElement(a.Fragment,null,a.createElement("div",{className:"mTop20"},_l("\u5F00\u53D1\u524D\uFF0C\u4F60\u9700\u8981\u5728\u672C\u5730\u8BA1\u7B97\u673A\u4E0A\u5B89\u88C5\u63D2\u4EF6\u5F00\u53D1\u4E13\u7528\u7684\u7EC8\u7AEF\u547D\u4EE4\u884C\u5DE5\u5177(CLI)\uFF0C\u7528\u4E8E\u521B\u5EFA\u63D2\u4EF6\u5F00\u53D1\u73AF\u5883\u3002")),a.createElement("div",{className:"mTop15"},_l("\u5982\u679C\u4F60\u5DF2\u5B89\u88C5\u672C\u5DE5\u5177\uFF0C\u53EF\u4EE5\u8DF3\u8FC7\u6B64\u6B65\u9AA4\u3002")),a.createElement("div",{className:"Gray_75 mTop28 Bold"},_l("\u524D\u63D0\u6761\u4EF6")),a.createElement("div",{className:"mTop4"},_l("\u5DF2\u5B89\u88C5 16.20 \u6216\u66F4\u9AD8\u7248\u672C\u7684 Node.js\u3002")),a.createElement("div",{className:"Gray_75 mTop28 Bold"},_l("\u7B2C1\u6B65")),a.createElement("div",{className:"mTop4"},_l("\u6253\u5F00\u4F60\u8BA1\u7B97\u673A\u4E0A\u7684\u300C\u7EC8\u7AEF(Mac OS)\u300D\u6216 \u300C\u547D\u4EE4\u884C(Windows)\u300D\u3002")),a.createElement("div",{className:"Gray_75 mTop28 Bold"},_l("\u7B2C2\u6B65")),a.createElement("div",{className:"mTop4"},_l("\u8F93\u5165\u4EE5\u4E0B\u547D\u4EE4\u5B89\u88C5\u547D\u4EE4\u884C\u5DE5\u5177\uFF08Mac \u9700\u5728\u547D\u4EE4\u524D\u52A0 sudo\uFF09\uFF1A")),_n("npm install -g mdye-cli"),a.createElement("div",{className:"Gray_75 mTop28 Bold"},_l("\u7B2C3\u6B65")),a.createElement("div",{className:"mTop4"},_l("\u8F93\u5165\u4EE5\u4E0B\u547D\u4EE4\u9A8C\u8BC1\u662F\u5426\u5B89\u88C5\u6210\u529F\uFF08\u6B63\u5E38\u663E\u793A\u7248\u672C\u53F7\u5373\u4E3A\u6210\u529F\uFF09\uFF1A")),_n("mdye --version"),Ht(an));case 2:return a.createElement(a.Fragment,null,a.createElement("div",{className:"mTop20"},_l("\u5B89\u88C5\u5B8C\u547D\u4EE4\u884C\u5DE5\u5177 mdye-cli \u540E\uFF0C\u5373\u53EF\u6309\u4EE5\u4E0B\u6B65\u9AA4\u521D\u59CB\u5316\u63D2\u4EF6\u672C\u5730\u9879\u76EE\u3002")),a.createElement("div",{className:"Gray_75 mTop28 Bold"},_l("\u7B2C1\u6B65")),a.createElement("div",{className:"mTop4"},_l("\u5728\u7EC8\u7AEF\u547D\u4EE4\u884C\u8F93\u5165\u4EE5\u4E0B\u547D\u4EE4\u521B\u5EFA\u63D2\u4EF6\u672C\u5730\u9879\u76EE\uFF1A")),_n("mdye init view --id "+(He+"-"+Ke)+" --template "+(Xa.find(function(Ln){return Ln.value===(at||1)})||{}).template+(Qn?" --host "+Qn:"")+(md.global.Config.IsLocal?" --webui "+md.global.Config.WebUrl:"")),a.createElement("div",{className:"Gray_75 mTop28 Bold"},_l("\u7B2C2\u6B65")),a.createElement("div",{className:"mTop4"},_l("\u9879\u76EE\u521B\u5EFA\u6210\u529F\u540E\uFF0C\u8F93\u5165\u4EE5\u4E0B\u547D\u4EE4\u8FDB\u5165\u63D2\u4EF6\u9879\u76EE\u6587\u4EF6\u5939\u3002\u5982\u679C\u5728\u7EC8\u7AEF\u91CC\u91CD\u65B0\u5B9A\u4E49\u4E86\u6587\u4EF6\u5939\u540D\u79F0\uFF0C\u8BF7\u4F7F\u7528\u60A8\u8F93\u5165\u7684\u540D\u79F0\uFF1A")),_n("cd mdye_view_"+Ke),a.createElement("div",{className:"Gray_75 mTop28 Bold"},_l("\u7B2C3\u6B65")),a.createElement("div",{className:"mTop4"},_l("\u5B89\u88C5\u9879\u76EE\u4F9D\u8D56\uFF1A")),_n("npm i"),a.createElement("div",{className:"Gray_75 mTop28 Bold"},_l("\u7B2C4\u6B65")),a.createElement("div",{className:"mTop4"},_l("\u542F\u52A8\u9879\u76EE\u5F00\u53D1\u73AF\u5883\uFF1A")),_n("mdye start"),Ht(an));case 3:return a.createElement(a.Fragment,null,a.createElement("div",{className:"mTop20"},_l("\u8BF7\u586B\u5199\u672C\u5730\u9879\u76EE\u542F\u52A8\u540E\u7684\u9879\u76EEURL\u8FDB\u5165\u7EBF\u4E0A\u8C03\u8BD5"),a.createElement(mr.Z,{className:"InlineBlock ThemeColor3 mLeft5 Hand",type:3,href:"https://help.mingdao.com/extensions/developer/view",text:_l("\u67E5\u770B\u5F00\u53D1\u6587\u6863")})),a.createElement("div",{className:"flexRow mTop10"},a.createElement(Br.Z,{className:"flex",value:ct,disabled:Nt,onChange:function(hn){Qt({customViewDebugUrl:hn})}}),a.createElement("div",{className:N()("btn mLeft12",{canClear:Nt}),onClick:function(){var hn=(ct||"").trim();if(!/^https?:\/\/.*\/bundle\.js$/.test(hn)){alert(_l("\u8BF7\u8F93\u5165\u672C\u5730\u547D\u4EE4\u884C\u663E\u793A\u7684\u811A\u672C\u5730\u5740"),3);return}Nt?(localStorage.removeItem("customViewDebugUrl_"+Ke),Qt({customViewDebugUrl:"",localStorageCustomViewDebugUrl:""})):(safeLocalStorageSetItem("customViewDebugUrl_"+Ke,hn),Qt({localStorageCustomViewDebugUrl:hn})),Q.uY.emit("CUSTOM_WIDGET_VIEW_DEBUG_URL_UPDATE")}},Nt?_l("\u6E05\u9664"):_l("\u52A0\u8F7D"))),a.createElement("div",{className:"mTop20"},_l("\u73AF\u5883\u53C2\u6570")),a.createElement("div",{className:"Gray_9e"},_l("\u914D\u7F6E\u63D2\u4EF6\u8FD0\u884C\u65F6\u6240\u9700\u8981\u7684\u53C2\u6570\uFF0C\u91C7\u7528JSON\u683C\u5F0F")),a.createElement(aa.Z,{className:N()("flex mTop10 viewColdeTagTextarea"),defaultValue:mn,codeMirrorMode:"javascript",getRef:function(hn){return nt.current=hn},height:0,onChange:function(hn,Ra,ha){hn||Qt({configuration:Ra})},onBlur:function(hn){Sn()}}))}};return a.createElement(Wa,{className:"mTop24"},a.createElement("ul",null,xa.D.map(function(xn,an){return a.createElement("li",{className:"Relative flexRow"},an<3&&a.createElement("div",{className:"leftLine"}),a.createElement("div",{className:N()("tabCon Bold",{hs:et>=an,cur:Xe===an})},et<an||Xe===an?an+1:a.createElement(j.Z,{className:"Font14",icon:"done"})),a.createElement("div",{className:N()("con flex mLeft10",{Hand:et>=an&&Xe!==an}),onClick:function(){et<an&&(Qt({stepState:an}),Ue({stepState:an},!0)),Xe!==an&&Qt({cur:an,editHref:an===0})}},Nn(xn,an),Xe===an&&Dn(an),an<3&&a.createElement("div",{className:"line mTop20"})))})))}var Er=t(34279),ir=t(64749),Ir=t(80435),za=(0,R.Z)([`
  ul > li {
    margin-top: 10px;
    display: inline-block;
    width: 61px;
    height: 32px;
    text-align: center;
    line-height: 32px;
    border-top: 1px solid #e0e0e0;
    border-bottom: 1px solid #e0e0e0;
    overflow: hidden;
    vertical-align: top;
    &:first-child {
      border-radius: 3px 0px 0px 3px;
      border: 1px solid #e0e0e0;
    }
    &:last-child {
      border-radius: 0 3px 3px 0;
      border: 1px solid #e0e0e0;
    }
    &.current {
      background: #2196f3;
      color: #fff;
      border: #2196f3;
    }
  }
`],[`
  ul > li {
    margin-top: 10px;
    display: inline-block;
    width: 61px;
    height: 32px;
    text-align: center;
    line-height: 32px;
    border-top: 1px solid #e0e0e0;
    border-bottom: 1px solid #e0e0e0;
    overflow: hidden;
    vertical-align: top;
    &:first-child {
      border-radius: 3px 0px 0px 3px;
      border: 1px solid #e0e0e0;
    }
    &:last-child {
      border-radius: 0 3px 3px 0;
      border: 1px solid #e0e0e0;
    }
    &.current {
      background: #2196f3;
      color: #fff;
      border: #2196f3;
    }
  }
`]),Ja=(0,R.Z)([`
  .hiddenDaysBox {
    margin-left: 26px;
    display: flex;
    li {
      flex: 1;
      height: 36px;
      display: inline-block;
      box-sizing: border-box;
      text-align: center;
      cursor: pointer;
      line-height: 36px;
      border: 1px solid #e0e0e0;
      overflow: hidden;
      margin-right: -1px;
      position: relative;
      &:last-child {
        border-radius: 0 3px 3px 0;
        overflow: hidden;
      }
      &:first-child {
        border-radius: 3px 0px 0px 3px;
        overflow: hidden;
      }
      &.checked {
        background: #2196f3;
        color: #fff;
        border-top: 1px solid #2196f3;
        border-bottom: 1px solid #2196f3;
        z-index: 1;
        &:last-child {
          border-right: 1px solid #2196f3;
        }
        &:first-child {
          border-left: 1px solid #2196f3;
        }
      }
    }
  }
`],[`
  .hiddenDaysBox {
    margin-left: 26px;
    display: flex;
    li {
      flex: 1;
      height: 36px;
      display: inline-block;
      box-sizing: border-box;
      text-align: center;
      cursor: pointer;
      line-height: 36px;
      border: 1px solid #e0e0e0;
      overflow: hidden;
      margin-right: -1px;
      position: relative;
      &:last-child {
        border-radius: 0 3px 3px 0;
        overflow: hidden;
      }
      &:first-child {
        border-radius: 3px 0px 0px 3px;
        overflow: hidden;
      }
      &.checked {
        background: #2196f3;
        color: #fff;
        border-top: 1px solid #2196f3;
        border-bottom: 1px solid #2196f3;
        z-index: 1;
        &:last-child {
          border-right: 1px solid #2196f3;
        }
        &:first-child {
          border-left: 1px solid #2196f3;
        }
      }
    }
  }
`]),or=[_l("\u6708"),_l("\u5468"),_l("\u65E5")],Ua=[_l("\u5468\u4E00"),_l("\u5468\u4E8C"),_l("\u5468\u4E09"),_l("\u5468\u56DB"),_l("\u5468\u4E94"),_l("\u5468\u516D"),_l("\u5468\u65E5")],qa=q.ZP.div(za),dr=q.ZP.div(Ja);function Nr(Me){var nt=Me.appId,He=Me.view,ie=Me.updateCurrentView,We=Me.worksheetControls,Ue=He.advancedSetting,Ke=Ue===void 0?{}:Ue,ut=He.worksheetId,wt=He.viewId,Et=Ke.calendarType,et=Et===void 0?"0":Et,Xe=Ke.unlunar,pt=Ke.unweekday,at=pt===void 0?"":pt,ct=(0,a.useState)(at===""),Nt=(0,Ie.Z)(ct,2),mn=Nt[0],Qt=Nt[1];(0,a.useEffect)(function(){Qt(at!=="")},[at]);var Cn=function(ea){ie((0,y.default)({},He,{appId:nt,advancedSetting:(0,ke.ob)(He,(0,y.default)({},ea)),editAttrs:["advancedSetting"]}))},_n=(0,Q.aq)(He),ra=_n.begindate,Nn=ra===void 0?"":ra,Ht=_n.hour24,Sn=Ht===void 0?"0":Ht,Dn=_n.enddate,xn=_n.weekbegin,an=xn===void 0?"1":xn,Qn=_n.showall,Ln=Qn===void 0?"0":Qn,hn=[];try{hn=JSON.parse(Z().get(He,["advancedSetting","calendarcids"]))}catch(Pn){hn=[]}hn.length<=0&&(hn=Nn?[{begin:Nn,end:Dn}]:[{begin:(We.filter(function(Pn){return(0,lr.jY)(Pn)})[0]||{}).controlId}]);var Ra=We.filter(function(Pn){return Pn.controlId===hn[0].begin}),ha=hn[0].begin&&(!Ra||Ra.length<=0);return a.createElement(a.Fragment,null,a.createElement("div",{className:"title Font13 bold"},_l("\u65E5\u671F")),a.createElement(Ir.Z,(0,y.default)({},Me,{controls:We,begindate:Nn,enddate:Dn,handleChange:function(ea){var Tn=He.moreSort;if(Nn&&!Tn){var sn={};sn={editAttrs:["moreSort","sortType","advancedSetting"],moreSort:[{controlId:"ctime",isAsc:!1}],sortType:2},ie((0,y.default)({},He,{appId:nt,advancedSetting:(0,ke.ob)(He,(0,y.default)({},ea)),editAttrs:["advancedSetting"]},sn))}else Cn(ea)},isDelete:ha,timeControls:(0,lr.wg)(We),begindateOrFirst:!0})),a.createElement("div",{className:"title Font13 bold mTop32"},_l("\u9ED8\u8BA4\u89C6\u56FE")),a.createElement(qa,null,a.createElement("ul",{className:"calendarTypeChoose"},or.map(function(Pn,ea){return a.createElement("li",{className:N()("Hand",{current:String(ea)===et}),onClick:function(){Cn({calendarType:String(ea)});var sn=(0,lr.fE)(String(ea),Ra),Da=(0,lr.cA)();Da[ut+"-"+wt]=sn,safeLocalStorageSetItem("CalendarViewType",oe()(Da))}},Pn)}))),a.createElement("div",{className:"title Font13 bold mTop32"},_l("\u6BCF\u5468\u7684\u7B2C\u4E00\u5929")),a.createElement(zr._s,null,a.createElement(ir.default,{className:N()("timeDropdown",{}),value:[an],optionLabelProp:"label",placeholder:_l("\u8BF7\u9009\u62E9"),suffixIcon:a.createElement(j.Z,{icon:"arrow-down-border Font14"}),dropdownClassName:"dropConOption",onChange:function(ea){ea!==an&&Cn({weekbegin:String(ea)})},notFoundContent:_l("\u5F53\u524D\u5DE5\u4F5C\u8868\u4E2D\u6CA1\u6709\u5355\u9009\u5B57\u6BB5\uFF0C\u8BF7\u5148\u53BB\u6DFB\u52A0\u4E00\u4E2A")},Ua.map(function(Pn,ea){return{text:Pn,value:ea+1}}).map(function(Pn,ea){return a.createElement(ir.default.Option,{value:Pn.value+"",key:ea,label:Pn.text,className:"select_drop"},Pn.text)}))),a.createElement("div",{className:"title Font13 bold mTop32"},_l("\u8BBE\u7F6E")),a.createElement(dr,null,a.createElement(xt.Z,{checked:mn,className:"mTop18",onClick:function(ea){Cn(mn?{unweekday:""}:{unweekday:"67"}),Qt(ea)},text:_l("\u53EA\u663E\u793A\u5DE5\u4F5C\u65E5")}),mn&&a.createElement("div",{className:"hiddenDaysBox mTop18"},Ua.map(function(Pn,ea){var Tn=ea+1;return a.createElement("li",{className:N()({checked:at.indexOf(Tn)<0}),onClick:function(Da){var ia=at;at.indexOf(Tn)>=0?ia=ia.replace(Tn,""):ia=""+ia+Tn,!(ia.length>=7)&&Cn({unweekday:ia})}},Pn)})),a.createElement(xt.Z,{checked:Xe!=="1",className:"mTop18",onClick:function(){Cn({unlunar:Xe!=="1"?"1":"0"})},text:_l("\u663E\u793A\u519C\u5386")}),a.createElement(xt.Z,{checked:Sn==="1",className:"mTop18",onClick:function(){Cn({hour24:Sn!=="1"?"1":"0"})},text:_l("24\u5C0F\u65F6\u5236")}),a.createElement(xt.Z,{checked:Ln==="1",className:"mTop18",onClick:function(){Cn({showall:Ln!=="1"?"1":"0"})},text:_l("\u663E\u793A\u6240\u6709\u65E5\u7A0B")})))}var Sr=t(39705),wr=t(99261),Ur=t(49021),Mr=(0,R.Z)([`
  ul > li {
    margin-top: 10px;
    display: inline-block;
    width: 61px;
    height: 32px;
    text-align: center;
    line-height: 32px;
    border-top: 1px solid #e0e0e0;
    border-bottom: 1px solid #e0e0e0;
    overflow: hidden;
    vertical-align: top;
    border-right: 1px solid #e0e0e0;
    &:first-child {
      border-radius: 3px 0px 0px 3px;
      border-left: 1px solid #e0e0e0;
    }
    &:last-child {
      border-radius: 0 3px 3px 0;
    }
    &.current {
      background: #2196f3;
      color: #fff;
      border: #2196f3;
    }
  }
`],[`
  ul > li {
    margin-top: 10px;
    display: inline-block;
    width: 61px;
    height: 32px;
    text-align: center;
    line-height: 32px;
    border-top: 1px solid #e0e0e0;
    border-bottom: 1px solid #e0e0e0;
    overflow: hidden;
    vertical-align: top;
    border-right: 1px solid #e0e0e0;
    &:first-child {
      border-radius: 3px 0px 0px 3px;
      border-left: 1px solid #e0e0e0;
    }
    &:last-child {
      border-radius: 0 3px 3px 0;
    }
    &.current {
      background: #2196f3;
      color: #fff;
      border: #2196f3;
    }
  }
`]),Hr=[{txt:_l("\u65E5"),key:"0"},{txt:_l("\u5468"),key:"1"},{txt:_l("\u6708"),key:"2"},{txt:_l("\u5B63"),key:"3"},{txt:_l("\u5E74"),key:"4"}],po=[_l("\u5468\u4E00"),_l("\u5468\u4E8C"),_l("\u5468\u4E09"),_l("\u5468\u56DB"),_l("\u5468\u4E94"),_l("\u5468\u516D"),_l("\u5468\u5929")],ol=q.ZP.div(Mr);function ul(Me){var nt=Me.appId,He=Me.view,ie=Me.updateCurrentView,We=Me.worksheetControls,Ue=We===void 0?[]:We,Ke=He.advancedSetting,ut=Ke===void 0?{}:Ke,wt=ut.calendartype,Et=wt===void 0?"0":wt,et=ut.unweekday,Xe=et===void 0?"":et,pt=ut.milepost,at=(0,a.useState)(Xe===""),ct=(0,Ie.Z)(at,2),Nt=ct[0],mn=ct[1],Qt=(0,a.useState)(Ue.filter(function(hn){return!gn.x0.includes(hn.controlId)&&(Z().includes([15,16],hn.type)||hn.type===38&&hn.enumDefault===2)})),Cn=(0,Ie.Z)(Qt,2),_n=Cn[0],ra=Cn[1],Nn=(0,Q.aq)(He),Ht=Nn.begindate,Sn=Ht===void 0?"":Ht,Dn=Nn.enddate,xn=Dn===void 0?"":Dn,an=Sn&&!Ue.find(function(hn){return hn.controlId===Sn}),Qn=xn&&!Ue.find(function(hn){return hn.controlId===xn});(0,a.useEffect)(function(){mn(Xe!=="")},[Xe]);var Ln=function(Ra){ie((0,y.default)({},He,{appId:nt,advancedSetting:(0,ke.ob)(He,(0,y.default)({},Ra)),editAttrs:["advancedSetting"]}))};return(0,a.useEffect)(function(){var hn=Ue.filter(function(Ra){return!gn.x0.includes(Ra.controlId)&&(Z().includes([15,16],Ra.type)||Ra.type===38&&Ra.enumDefault===2)});ra(hn)},[Ue]),a.createElement(a.Fragment,null,a.createElement("div",{className:"title Font13 bold"},_l("\u65E5\u671F")),a.createElement(Sr.Z,(0,y.default)({},Me,{canAddTimeControl:!0,begindate:Z().get(Me,["view","advancedSetting","begindate"]),enddate:Z().get(Me,["view","advancedSetting","enddate"]),handleChange:function(Ra){var ha=Ra.begindate,Pn=He.moreSort,ea=He.displayControls,Tn=[Ra.begindate,Ra.enddate].filter(function(Da){return Da});if(ha&&!Pn){var sn={};sn={sortCid:ha,editAttrs:["moreSort","sortCid","sortType","advancedSetting"],moreSort:[{controlId:ha,isAsc:!0},{controlId:"ctime",isAsc:!1}],sortType:2},ie((0,y.default)({},He,{appId:nt,advancedSetting:(0,ke.ob)(He,(0,y.default)({},Ra)),displayControls:ea.filter(function(Da){return!Tn.includes(Da)}),editAttrs:["advancedSetting","displayControls"]},sn))}else ie((0,y.default)({},He,{appId:nt,advancedSetting:(0,ke.ob)(He,(0,y.default)({},Ra)),displayControls:ea.filter(function(Da){return!Tn.includes(Da)}),editAttrs:["advancedSetting","displayControls"]}))},beginIsDel:an,endIsDel:Qn,timeControls:_n,mustSameType:!0,controls:Ue})),a.createElement(wr.Z,(0,y.default)({},Me,{handleChange:function(Ra){Ln({milepost:Ra})},canAddControl:!0,addTxt:_l("\u6DFB\u52A0\u91CC\u7A0B\u7891\u5B57\u6BB5"),controls:Ue,setDataId:pt,controlList:Ue.filter(function(hn){return Z().includes([36],hn.type)}),key:"milepost",className:"mTop32",addName:"\u91CC\u7A0B\u7891",title:_l("\u91CC\u7A0B\u7891"),txt:_l("\u9009\u62E9\u4E00\u4E2A\u68C0\u67E5\u9879\u5B57\u6BB5\u6807\u8BB0\u8BB0\u5F55\u5C5E\u6027\u4E3A\u91CC\u7A0B\u7891")})),a.createElement(le.Z,(0,y.default)({},Me,{hideShowControlName:!0,worksheetControls:Ue.filter(function(hn){return![Sn,xn].includes(hn.controlId)}),handleChangeSort:function(Ra){var ha=Ra.newControlSorts,Pn=Ra.newShowControls;Me.updateCurrentView(k()((0,y.default)({appId:nt},He,{controlsSorts:ha,displayControls:Pn,editAttrs:["displayControls","controlsSorts"]}),{filters:(0,se.Gt)(He.filters)}),!1)}})),a.createElement(Ur.Z,Me),a.createElement("div",{className:"title Font13 bold mTop32"},_l("\u9ED8\u8BA4\u89C6\u56FE")),a.createElement(ol,null,a.createElement("ul",{className:"calendartypeChoose"},Hr.map(function(hn){return a.createElement("li",{className:N()("Hand",{current:hn.key===Et}),onClick:function(){Ln({calendartype:hn.key})}},hn.txt)}))),a.createElement("div",{className:"title Font13 bold mTop32"},_l("\u8BBE\u7F6E")),a.createElement(zr.$b,null,a.createElement(xt.Z,{checked:Nt,className:"mTop18",onClick:function(Ra){Ln(Nt?{unweekday:""}:{unweekday:"67"}),mn(Ra)},text:_l("\u53EA\u663E\u793A\u5DE5\u4F5C\u65E5")}),Nt&&a.createElement("div",{className:"hiddenDaysBox mTop18"},po.map(function(hn,Ra){var ha=Ra+1;return a.createElement("li",{className:N()({checked:Xe.indexOf(ha)<0}),onClick:function(ea){var Tn=Xe;Xe.indexOf(ha)>=0?Tn=Tn.replace(ha,""):Tn=""+Tn+ha,!(Tn.length>=7)&&Ln({unweekday:Tn})}},hn)}))))}var pl=t(68841),dl=t(12528),ml=t(19837),jo=t(43792),fl=t(2e3),Pe=t(19458),Bn=t(13681),Un=t(27484),Pt=t.n(Un),ne=t(92510),F=(0,R.Z)([`
  .ming.Dropdown.isDelete .Dropdown--input .value,
  .dropdownTrigger .Dropdown--input .value {
    color: red;
  }
  .ming.Dropdown.isDelete .Dropdown--border,
  .dropdownTrigger .Dropdown--border {
    border-color: red;
  }
  .rangePicker {
  }
`],[`
  .ming.Dropdown.isDelete .Dropdown--input .value,
  .dropdownTrigger .Dropdown--input .value {
    color: red;
  }
  .ming.Dropdown.isDelete .Dropdown--border,
  .dropdownTrigger .Dropdown--border {
    border-color: red;
  }
  .rangePicker {
  }
`]),B={"zh-Hans":jo.Z,"zh-Hant":Pe.Z,en:Bn.Z,ja:fl.Z},n=B[md.global.Account.lang],l=q.ZP.div(F);function o(Me){var nt=Me.appId,He=Me.view,ie=Me.updateCurrentView,We=He.rowHeight,Ue=We===void 0?0:We,Ke=(0,qn.Z)({timeControls:[]}),ut=(0,Ie.Z)(Ke,2),wt=ut[0].timeControls,Et=ut[1];(0,a.useEffect)(function(){var Xe=Me.worksheetControls,pt=Xe===void 0?[]:Xe,at=pt.filter(function(ct){return Z().includes([15,16],ct.type)||ct.type===30&&Z().includes([15,16],ct.sourceControlType)||ct.type===38&&ct.enumDefault===2||ct.type===37&&[15,16].includes(ct.enumDefault2)}).map(function(ct){return(0,y.default)({},ct,{text:ct.controlName,value:ct.controlId})});Et({timeControls:at})},[Me.view]),(0,a.useEffect)(function(){et()},[]);var et=function(){var pt=function(){$(".ant-picker-range-arrow").css({transition:"none"}),$(".ant-picker-panel-container").css({marginLeft:parseInt($(".ant-picker-range-arrow").css("left"))})};setTimeout(function(){$(".ant-picker-input input").on({click:function(){return pt()},focus:function(){return pt()}})},500)};return a.createElement(l,null,a.createElement(ml.Z,Me),a.createElement("div",{className:"flexRow mTop24"},a.createElement("div",{className:"flex"},a.createElement("div",{className:"Bold"},_l("\u5F00\u59CB")),a.createElement(C.Z,{className:"mTop8",style:{width:"100%"},data:wt.filter(function(Xe){return Xe.value!==Z().get(Me,"view.advancedSetting.enddate")}),value:Z().get(Me,"view.advancedSetting.begindate"),border:!0,cancelAble:!0,onChange:function(pt){Z().get(Me,"view.advancedSetting.begindate")!==pt&&ie((0,y.default)({},He,{appId:nt,advancedSetting:{begindate:pt},editAdKeys:["begindate"],editAttrs:["advancedSetting"]}))}})),a.createElement("div",{className:"flex mLeft12"},a.createElement("div",{className:"Bold"},_l("\u7ED3\u675F")),a.createElement(C.Z,{className:"mTop8",style:{width:"100%"},data:wt.filter(function(Xe){return Xe.value!==Z().get(Me,"view.advancedSetting.begindate")}),value:Z().get(Me,"view.advancedSetting.enddate"),border:!0,cancelAble:!0,onChange:function(pt){Z().get(Me,"view.advancedSetting.enddate")!==pt&&ie((0,y.default)({},He,{appId:nt,advancedSetting:{enddate:pt},editAdKeys:["enddate"],editAttrs:["advancedSetting"]}))}}))),a.createElement("div",{className:"commonConfigItem Font13 bold mTop24"},_l("\u884C\u9AD8")),a.createElement("div",{className:"commonConfigItem mTop6"},a.createElement(L.Z,{data:[{text:_l("\u7D27\u51D1"),value:0},{text:_l("\u4E2D\u7B49"),value:1},{text:_l("\u5BBD\u677E"),value:2}],value:Ue,onChange:function(pt){Ue!==pt&&ie((0,y.default)({},He,{appId:nt,rowHeight:pt,editAttrs:["rowHeight"]}))}})),a.createElement("div",{className:"commonConfigItem Font13 bold mTop24"},_l("\u9ED8\u8BA4\u89C6\u56FE")),a.createElement("div",{className:"commonConfigItem mTop6"},a.createElement(L.Z,{data:[{text:_l("\u6708"),value:"0"},{text:_l("\u5468"),value:"1"},{text:_l("\u65E5"),value:"2"}],value:Z().get(Me,"view.advancedSetting.calendarType")?Z().get(Me,"view.advancedSetting.calendarType"):"0",onChange:function(pt){var at=Z().get(Me,"view.advancedSetting.calendarType")?Z().get(Me,"view.advancedSetting.calendarType"):"0";at!==pt&&(safeLocalStorageSetItem(He.viewId+"_resource_type",ne.iK[pt].value),ie((0,y.default)({},He,{appId:nt,advancedSetting:{calendarType:pt},editAdKeys:["calendarType"],editAttrs:["advancedSetting"]})))}})),a.createElement("div",{className:"title Font13 bold mTop24"},_l("\u6BCF\u5468\u7684\u7B2C\u4E00\u5929")),a.createElement(zr._s,null,a.createElement(ir.default,{className:N()("timeDropdown",{}),value:[Z().get(Me,"view.advancedSetting.weekbegin")?Z().get(Me,"view.advancedSetting.weekbegin"):"1"],optionLabelProp:"label",placeholder:_l("\u8BF7\u9009\u62E9"),suffixIcon:a.createElement(j.Z,{icon:"arrow-down-border Font14"}),dropdownClassName:"dropConOption",onChange:function(pt){var at=Z().get(Me,"view.advancedSetting.weekbegin")?Z().get(Me,"view.advancedSetting.weekbegin"):"0";pt!==at&&ie((0,y.default)({},He,{appId:nt,advancedSetting:{weekbegin:pt},editAdKeys:["weekbegin"],editAttrs:["advancedSetting"]}))}},ne.yM.map(function(Xe,pt){return a.createElement(ir.default.Option,{value:pt+1+"",key:pt,label:Xe,className:"select_drop"},Xe)}))),a.createElement(zr.$b,null,a.createElement(xt.Z,{checked:!!Z().get(Me,"view.advancedSetting.unweekday"),className:"mTop16",onClick:function(pt){ie((0,y.default)({},He,{appId:nt,advancedSetting:{unweekday:Z().get(Me,"view.advancedSetting.unweekday")?void 0:"67"},editAdKeys:["unweekday"],editAttrs:["advancedSetting"]}))},text:_l("\u53EA\u663E\u793A\u5DE5\u4F5C\u65E5")}),!!Z().get(Me,"view.advancedSetting.unweekday")&&a.createElement("div",{className:"hiddenDaysBox mTop16"},ne.yM.map(function(Xe,pt){var at=pt+1;return a.createElement("li",{className:N()({checked:(Z().get(Me,"view.advancedSetting.unweekday")||"").indexOf(at)<0}),onClick:function(Nt){var mn=Z().get(Me,"view.advancedSetting.unweekday");(Z().get(Me,"view.advancedSetting.unweekday")||"").indexOf(at)>=0?mn=mn.replace(at,""):mn=""+mn+at,!(mn.length>=7)&&ie((0,y.default)({},He,{appId:nt,advancedSetting:{unweekday:mn},editAdKeys:["unweekday"],editAttrs:["advancedSetting"]}))}},Xe)}))),a.createElement(xt.Z,{checked:!!Z().get(Me,"view.advancedSetting.showtime"),className:"mTop16",onClick:function(pt){ie((0,y.default)({},He,{appId:nt,advancedSetting:{showtime:Z().get(Me,"view.advancedSetting.showtime")?void 0:"08:00-18:00"},editAdKeys:["showtime"],editAttrs:["advancedSetting"]})),!Z().get(Me,"view.advancedSetting.showtime")&&et()},text:_l("\u53EA\u663E\u793A\u5DE5\u4F5C\u65F6\u95F4")}),!!Z().get(Me,"view.advancedSetting.showtime")&&a.createElement(dl.Z.RangePicker,{className:"mTop8 rangePicker w100 borderAll3",format:"HH:mm",value:Z().get(Me,"view.advancedSetting.showtime")?Z().get(Me,"view.advancedSetting.showtime").split("-").map(function(Xe){return Pt()(Xe,"HH:mm")}):[],hourStep:1,minuteStep:60,onChange:function(pt,at){if(pt&&pt[0]&&pt[1]&&Pt()(pt[1]).diff(Pt()(pt[0]))<=0){alert(_l("\u7ED3\u675F\u65F6\u95F4\u4E0D\u80FD\u65E9\u4E8E\u6216\u7B49\u4E8E\u5F00\u59CB\u65F6\u95F4"),3);return}ie((0,y.default)({},He,{appId:nt,advancedSetting:{showtime:at[0]+"-"+at[1]},editAdKeys:["showtime"],editAttrs:["advancedSetting"]}))},locale:n,showNow:!0,allowClear:!1}),a.createElement(xt.Z,{checked:Z().get(Me,"view.advancedSetting.hour24")==="1",className:"mTop16",onClick:function(pt){ie((0,y.default)({},He,{appId:nt,advancedSetting:{hour24:Z().get(Me,"view.advancedSetting.hour24")==="1"?"0":"1"},editAdKeys:["hour24"],editAttrs:["advancedSetting"]}))},text:_l("24\u5C0F\u65F6\u5236")}))}var d=(0,R.Z)([`
  .splitLine {
    border-bottom: 1px solid #eaeaea;
    width: 100%;
    height: 1px;
  }
  .tagColorWrap {
    border-radius: 3px;
    width: fit-content;
    span {
      display: inline-block;
      padding: 0 24px;
      height: 36px;
      line-height: 36px;
      border: 1px solid #e0e0e0;
      &:nth-child(1),
      &:nth-child(2) {
        border-right: none;
      }
      &:nth-child(1) {
        border-radius: 3px 0 0 3px;
      }
      &:last-child {
        border-radius: 0 3px 3px 0;
      }
      &.current {
        background: #2196f3;
        color: #fff !important;
        border-color: #2196f3;
      }
      &:hover {
        color: #2196f3;
      }
    }
  }
  .allColorSelectFields {
    font-weight: 500;
    border-radius: 4px;

    .Dropdown--border {
      // border: 1px solid rgba(33, 150, 243, 0.3);
    }

    .Item-content {
      padding-left: 32px !important;
    }
  }
`],[`
  .splitLine {
    border-bottom: 1px solid #eaeaea;
    width: 100%;
    height: 1px;
  }
  .tagColorWrap {
    border-radius: 3px;
    width: fit-content;
    span {
      display: inline-block;
      padding: 0 24px;
      height: 36px;
      line-height: 36px;
      border: 1px solid #e0e0e0;
      &:nth-child(1),
      &:nth-child(2) {
        border-right: none;
      }
      &:nth-child(1) {
        border-radius: 3px 0 0 3px;
      }
      &:last-child {
        border-radius: 0 3px 3px 0;
      }
      &.current {
        background: #2196f3;
        color: #fff !important;
        border-color: #2196f3;
      }
      &:hover {
        color: #2196f3;
      }
    }
  }
  .allColorSelectFields {
    font-weight: 500;
    border-radius: 4px;

    .Dropdown--border {
      // border: 1px solid rgba(33, 150, 243, 0.3);
    }

    .Item-content {
      padding-left: 32px !important;
    }
  }
`]),u=(0,R.Z)([`
  .icon {
    font-size: 16px;
    color: rgba(0, 0, 0, 0.4);
    margin-right: 4px;
  }
  span {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-left: 4px;
  }
`],[`
  .icon {
    font-size: 16px;
    color: rgba(0, 0, 0, 0.4);
    margin-right: 4px;
  }
  span {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-left: 4px;
  }
`]),p=(0,R.Z)([`
  &\uFF1Ahover {
    .icon {
      color: #2196f3;
    }
  }
`],[`
  &\uFF1Ahover {
    .icon {
      color: #2196f3;
    }
  }
`]),f=q.ZP.div(d),w=(0,q.ZP)(be.Lb)(u),D=(0,q.ZP)(w)(p);function G(Me){var nt=Me.view,He=Me.columns,ie=Me.updateCurrentView,We=Me.worksheetControls,Ue=Me.appId,Ke=nt.viewControl,ut=nt.advancedSetting,wt=ut===void 0?{}:ut,Et=Z().find(He,{controlId:wt.tagcolorid}),et=function(){return(0,Le.G1)({controls:He,filter:function(ct){return ct.type===40||ct.type===30&&ct.sourceControlType===40},formatter:function(ct){var Nt=ct.controlName,mn=ct.controlId,Qt=ct.type;return{text:Nt,value:mn,icon:(0,de.hB)(Qt,!1)}}})},Xe=function(at){ie((0,y.default)({},nt,{appId:Ue,advancedSetting:{tagType:at},editAttrs:["advancedSetting"],editAdKeys:["tagType"]}))};return a.createElement(f,{className:"mapSettingBox"},a.createElement("div",{className:"title bold mBottom10"},_l("\u4F4D\u7F6E\u5B57\u6BB5")),a.createElement("div",{className:"settingContent"},a.createElement(C.Z,{data:et(),value:Ke,className:"dropdownSelectFields",hoverTheme:!0,renderTitle:function(at){var ct=at||{},Nt=ct.icon,mn=ct.text;return a.createElement(D,null,a.createElement(j.Z,{icon:Nt}),a.createElement("span",null,mn))},onChange:function(at){Ke!==at&&ie((0,y.default)({},nt,{appId:Ue,viewControl:at,editAttrs:["viewControl"]}))},border:!0,style:{width:"100%"},placeholder:_l("\u8BF7\u9009\u62E9")})),a.createElement("div",{className:"splitLine mTop32 mBottom32"}),a.createElement("div",{className:"title mBottom24 mTop24 bold"},_l("\u5361\u7247\u5916\u89C2")),a.createElement(b.Z,(0,y.default)({},Me,{advancedSetting:wt,handleChange:function(at){ie((0,y.default)({},nt,{appId:Ue,advancedSetting:{abstract:at},editAttrs:["advancedSetting"],editAdKeys:["abstract"]}))}})),a.createElement(le.Z,(0,y.default)({},Me,{handleChange:function(at){ie((0,y.default)({},nt,{appId:Ue},at),!1)},handleChangeSort:function(at){var ct=at.newControlSorts,Nt=at.newShowControls;ie((0,y.default)({},nt,{appId:Ue,controlsSorts:ct,displayControls:Nt,editAttrs:["controlsSorts","displayControls"]}),!1)},canShowCount:!1})),a.createElement(ae.Z,(0,y.default)({},Me,{advancedSetting:wt,handleChangeIsCover:function(at){return ie((0,y.default)({},nt,{appId:Ue,coverCid:at==="notDisplay"?"":at,editAttrs:["coverCid"]}))},handleChangePosition:function(at,ct){ie((0,y.default)({},nt,{appId:Ue,coverType:ct,advancedSetting:{coverposition:at},editAttrs:["coverType","advancedSetting"],editAdKeys:["coverposition"]}))},handleChangeType:function(at){return ie((0,y.default)({},nt,{appId:Ue,coverType:at,editAttrs:["coverType"]}),!1)},handleChangeOpencover:function(at){ie((0,y.default)({},nt,{appId:Ue,advancedSetting:{opencover:at},editAdKeys:["opencover"],editAttrs:["advancedSetting"]}))}})),a.createElement("div",{className:"splitLine mTop32 mBottom32"}),a.createElement("div",{className:"mBottom32"},a.createElement("div",{className:"title bold mBottom8"},_l("\u6807\u7B7E\u989C\u8272")),a.createElement("div",{className:"tagColorWrap"},a.createElement("span",{className:N()("Hand",{current:Number(wt.tagType||0)===0}),onClick:function(){return Xe(0)}},_l("\u6D45\u8272")),a.createElement("span",{className:N()("Hand",{current:Number(wt.tagType||0)===1}),onClick:function(){return Xe(1)}},_l("\u6DF1\u8272")),a.createElement("span",{className:N()("Hand",{current:Number(wt.tagType||0)===2}),onClick:function(){return Xe(2)}},_l("\u52A8\u6001\u989C\u8272"))),Number(wt.tagType||0)===2&&a.createElement(a.Fragment,null,a.createElement("div",{className:"title Bold mTop24"},_l("\u989C\u8272"),Et&&Et.enumDefault2!==1&&a.createElement(Ne.Z,{className:"mLeft6",text:_l("\u5F53\u524D\u9009\u62E9\u7684\u5B57\u6BB5\u672A\u542F\u7528\u989C\u8272")},a.createElement("i",{className:"icon icon-error1 Font16",style:{color:"#ff9300"}}))),a.createElement("div",{className:"mTop6 mBottom10 Font12 Gray_9e"},_l("\u9009\u62E9\u4E00\u4E2A\u5355\u9009\u5B57\u6BB5\uFF0C\u6807\u7B7E\u5C06\u6309\u7167\u6B64\u5B57\u6BB5\u4E2D\u7684\u9009\u9879\u989C\u8272\u6765\u663E\u793A")),a.createElement(C.Z,{data:(0,Le.G1)({controls:He,filter:function(at){return at.type===11},formatter:function(at){var ct=at.controlName,Nt=at.controlId,mn=at.type;return{text:ct,value:Nt,icon:(0,de.hB)(mn,!1)}}}),value:wt.tagcolorid,className:"allColorSelectFields",renderTitle:function(at){var ct=at||{},Nt=ct.icon,mn=ct.text;return a.createElement(D,null,a.createElement(j.Z,{icon:Nt}),a.createElement("span",null,mn))},onChange:function(at){ie((0,y.default)({},nt,{appId:Ue,advancedSetting:{tagcolorid:at},editAttrs:["advancedSetting"],editAdKeys:["tagcolorid"]}))},border:!0,style:{width:"100%"},placeholder:_l("\u8BF7\u9009\u62E9")}))))}var H=(0,R.Z)([`
  display: inline-block;
  float: right;
  i {
    display: inline-block;
    width: 14px;
    height: 14px;
    border-radius: 14px;
    border: 2px solid #fff;
    margin-left: -6px;
    transform: translateY(2px);
    &:nth-child(1) {
      background: #f44336;
    }
    &:nth-child(2) {
      background: #fad714;
    }
    &:nth-child(3) {
      background: #00c345;
    }
  }
`],[`
  display: inline-block;
  float: right;
  i {
    display: inline-block;
    width: 14px;
    height: 14px;
    border-radius: 14px;
    border: 2px solid #fff;
    margin-left: -6px;
    transform: translateY(2px);
    &:nth-child(1) {
      background: #f44336;
    }
    &:nth-child(2) {
      background: #fad714;
    }
    &:nth-child(3) {
      background: #00c345;
    }
  }
`]),De=q.ZP.div(H);function je(Me){var nt=Me.view,He=nt===void 0?{}:nt,ie=Me.viewSetting,We=Me.columns,Ue=Me.currentSheetInfo,Ke=Me.formatColumnsListForControlsWithoutHide,ut=Me.onChangeType,wt=Me.btnList,Et=wt===void 0?[]:wt,et=He.filters,Xe=et===void 0?[]:et,pt=He.controls,at=pt===void 0?[]:pt,ct=He.moreSort,Nt=ct===void 0?[]:ct,mn=He.fastFilters,Qt=mn===void 0?[]:mn,Cn=v.D.find(function(Ln){return Ln.id===v.B[He.viewType]})||{},_n=Cn.icon,ra=Cn.text,Nn=v.B[He.viewType],Ht=Ke(We),Sn=Ke(at),Dn=[{type:"Filter",data:Xe},{type:"FastFilter",data:Qt},{type:"Sort",data:Nt}],xn=function(hn){var Ra=0;if(hn==="ActionSet"){var ha=Et.filter(function(ia){return safeParse(Z().get(ia,"advancedSetting.listviews"),"array").includes(Me.viewId)||ia.isAllView===1}),Pn=Et.filter(function(ia){return safeParse(Z().get(ia,"advancedSetting.detailviews"),"array").includes(Me.viewId)||ia.isAllView===1}),ea=Nn==="sheet";Ra=(ea?ha.length:0)+Pn.length}var Tn=_t.jS.find(function(ia){return ia.type===hn})||{},sn=(Dn.find(function(ia){return ia.type===hn})||{}).data;if(hn==="FastFilter"&&(sn=(sn||[]).filter(function(ia){return(0,$n.v)(fe.RX.sysControlSwitch,Ue.switches||[])?!0:!gn.Vh.includes(ia.controlId)})),hn==="Filter"){var Da=[];sn=(sn||[]).map(function(ia){ia.isGroup?Da=[].concat((0,i.Z)(Da),(0,i.Z)(ia.groupFilters)):Da=[].concat((0,i.Z)(Da),[ia])}),sn=Da.filter(function(ia){return!!ia})}return a.createElement(a.Fragment,null,a.createElement("div",{className:"titleTxt flex flexShrink0 flexRow"},a.createElement("div",{className:"w100 overflow_ellipsis WordBreak"},Tn.name)),(sn&&sn.length>0||hn==="Sort")&&a.createElement("span",{className:"Gray_9e InlineBlock mLeft5 numText"},hn==="Sort"&&sn.length<1?1:sn.length),Ra>0&&hn==="ActionSet"&&a.createElement("span",{className:"Gray_9e InlineBlock mLeft5 numText"},Ra),hn==="RecordColor"&&!!Z().get(He,"advancedSetting.colorid")&&a.createElement(De,null,a.createElement("i",null),a.createElement("i",null),a.createElement("i",null)))},an=a.createElement(a.Fragment,null,a.createElement("div",{className:"titleTxt flex flexShrink0 flexRow"},a.createElement("div",{className:"w100 overflow_ellipsis WordBreak"},_l("\u5B57\u6BB5"))),Ht.length-Sn.length>0&&a.createElement("span",{className:"Gray_9e InlineBlock mLeft5 numText"},Ht.length-Sn.length+"/"+Ht.length)),Qn=Nn==="structure"&&String(He.childType)==="2";return a.createElement("div",{className:"viewBtns pTop7"},_t.Hv.map(function(Ln,hn){var Ra=Ln.list,ha=(Z().get(He,"pluginInfo")||{}).source===0;return Nn==="customize"&&ha&&Ln.name==="base"&&(Ra=_t.Li),a.createElement("div",{className:"viewBtnsLi"},Ra.map(function(Pn,ea){var Tn=_t.jS.find(function(Ye){return Ye.type===Pn}),sn=["sheet","gallery","board","calendar","gunter","resource"].includes(Nn)||Nn==="detail"&&He.childType===2,Da=["sheet","gallery","map"].includes(Nn);if(Nn==="customize"){var ia=He.pluginInfo,ka=ia===void 0?{}:ia,Sa=ka.switchSettings,Yn=Sa===void 0?{}:Sa;sn=Yn.showFastFilter==="1",Da=Yn.showNav==="1"}return!sn&&["FastFilter"].includes(Tn.type)||!Da&&["NavGroup"].includes(Tn.type)||!["sheet","gallery"].includes(Nn)&&Z().includes(["MobileSet"],Pn)||!["sheet"].includes(Nn)&&Z().includes(["Show"],Pn)||Tn.type==="RecordColor"&&Nn==="detail"&&He.childType===1?"":a.createElement(a.Fragment,null,Tn.type==="PluginSettings"&&a.createElement("p",{className:"titileP"}," ",_l("\u5F00\u53D1")),(Z().includes(["MobileSet","urlParams"],Tn.type)||sn&&["FastFilter"].includes(Tn.type)||Da&&["NavGroup"].includes(Tn.type)||!sn&&Tn.type==="ActionSet"||Tn.type==="Filter")&&a.createElement(a.Fragment,null,Tn.type==="Filter"?a.createElement("p",{className:"titileP"}," ",_l("\u8BB0\u5F55\u8BBE\u7F6E")):sn&&Tn.type==="FastFilter"||!sn&&(Da&&Tn.type==="NavGroup"||!Da&&Tn.type==="ActionSet")?a.createElement("p",{className:"titileP"},_l("\u7528\u6237\u64CD\u4F5C")):Tn.type==="MobileSet"||!["sheet","gallery"].includes(Nn)&&Tn.type==="urlParams"?a.createElement("p",{className:"titileP"},_l("\u5176\u4ED6")):""),a.createElement("div",{className:N()("viewBtn flexRow alignItemsCenter",{active:ie===Tn.type}),onClick:function(){ut(Tn.type)}},a.createElement(j.Z,{className:"mRight15 Font18 icon",icon:Tn.icon||_n}),a.createElement("div",{className:"fontText flexRow alignItemsCenter"},["Filter","FastFilter","Sort","RecordColor","ActionSet"].includes(Tn.type)?xn(Tn.type):Tn.type==="Controls"?an:Tn.name)))}),Qn&&Ln.name==="other"&&a.createElement("div",{className:"Font13 pTop16 pBottom16 pLeft12 pRight12 mTop8 descCon",style:{color:"#8E8E8E",backgroundColor:"#EDEDED",borderRadius:"3px"}},_l("\u7B5B\u9009\u3001\u6392\u5E8F\u3001\u5B57\u6BB5\u7684\u8BBE\u7F6E\u4EC5\u4F5C\u7528\u4E8E\u672C\u8868\uFF08\u7B2C\u4E00\u5C42\u7EA7\uFF09\u4E2D\u7684\u8BB0\u5F55\u3002")))}))}var lt,Ft,un=(0,R.Z)([`
  .switchText {
    margin-right: 6px;
    line-height: 24px;
  }
  .icon {
    vertical-align: middle;
    &-ic_toggle_on {
      color: #00c345;
    }
    &-ic_toggle_off {
      color: #bdbdbd;
    }
  }
  .w30 {
    width: 30px;
    flex-shrink: 0;
  }
  .w28 {
    width: 28px;
    flex-shrink: 0;
  }
`],[`
  .switchText {
    margin-right: 6px;
    line-height: 24px;
  }
  .icon {
    vertical-align: middle;
    &-ic_toggle_on {
      color: #00c345;
    }
    &-ic_toggle_off {
      color: #bdbdbd;
    }
  }
  .w30 {
    width: 30px;
    flex-shrink: 0;
  }
  .w28 {
    width: 28px;
    flex-shrink: 0;
  }
`]),dn=q.ZP.div(un),Hn=function(nt){return nt.filter(function(He){return(0,K.ir)(He.type)}).map(function(He){return{iconName:(0,de.hB)(He.type),value:He.controlId,text:He.controlName,controltype:He.type,enumDefault:He.enumDefault}})},ca=(0,en.Z)(lt=function(Me){(0,r.default)(nt,Me);function nt(He){(0,T.default)(this,nt);var ie=(0,E.default)(this,(nt.__proto__||J()(nt)).call(this,He));return ie.fetchBtnByAll=function(){var We=ie.props,Ue=We.worksheetId,Ke=We.appId,ut=We.rowId;ie.props.refreshFn(Ue,Ke,"",ut)},ie.fill=function(We,Ue){var Ke=We.columns,ut=We.view,wt=We.sheetSwitchPermit,Et=We.viewConfigTab,et=We.setViewConfigTab,Xe=ut.sortCid||"ctime",pt=Hn(Ke),at=ut.sortType||ie.getDefaultSortValue(Xe,pt),ct=ut.showControlName,Nt=ct===void 0?!0:ct,mn=ut.showControls,Qt=mn===void 0?[]:mn,Cn=ut.controls,_n=Cn===void 0?[]:Cn,ra=(0,Q.aq)(ut),Nn=ra.customdisplay,Ht=Nn===void 0?"0":Nn,Sn=ra.refreshtime,Dn=Sn===void 0?"0":Sn,xn=ra.showno,an=xn===void 0?"1":xn,Qn=ra.showquick,Ln=Qn===void 0?"1":Qn,hn=ra.showsummary,Ra=hn===void 0?"1":hn,ha=ra.showvertical,Pn=ha===void 0?"1":ha,ea=ra.alternatecolor,Tn=ea===void 0?"0":ea,sn=ra.titlewrap,Da=sn===void 0?"0":sn,ia=ra.fastedit,ka=ia===void 0?"1":ia,Sa=ra.enablerules,Yn=ra.sheettype,Ye=Yn===void 0?"0":Yn,O=(0,$n.v)(fe.RX.sysControlSwitch,wt),V=O?[].concat((0,i.Z)(ke.FO),(0,i.Z)(ke.YX)):ke.YX,s=(0,Q.aq)(ut,"syssort")||V.filter(function(re){return!_n.includes(re)}),c=(0,Q.aq)(ut,"sysids")||[],g=(0,Q.aq)(ut,"customShowControls")||Qt||[],x={name:ut.name,controls:_n,rowHeight:ut.rowHeight||0,showControls:ut.showControls,controlsSorts:ut.controlsSorts,displayControls:ut.displayControls,sortCid:Xe,sortType:at,moreSort:ut.moreSort||[],customdisplay:Ht==="1"||Qt.length>0?"1":"0",refreshtime:Dn,showControlName:Nt,sysids:c,syssort:s,showno:an,showquick:Ln,showsummary:Ra,showvertical:Pn,alternatecolor:Tn,titlewrap:Da,fastedit:ka,enablerules:Sa,sheettype:Ye,customShowControls:g},S=(0,y.default)({sortingColumns:pt,filter:{items:[]}},x),X=(Z().get(ut,"pluginInfo")||{}).source===0;return Ue?S:(Et&&et(""),(0,y.default)({},S,{viewSetting:Et||(v.B[ut.viewType]==="customize"&&X?"PluginSettings":"Setting")}))},ie.formatColumnsListForControls=function(We){var Ue=We.filter(function(Ke){return!gn.c_.includes(Ke.controlId)&&(Ke.fieldPermission||"111")[0]==="1"});return Ue=We.filter(function(Ke){return Ke.controlId==="ownerid"}).concat(Ue.filter(function(Ke){return Ke.controlId!=="ownerid"})),Ue},ie.formatColumnsListForControlsWithoutHide=function(We){var Ue=We.filter(function(Ke){return!gn.c_.includes(Ke.controlId)});return Ue=We.filter(function(Ke){return Ke.controlId==="ownerid"}).concat(Ue.filter(function(Ke){return Ke.controlId!=="ownerid"})),Ue},ie.columnChange=function(We,Ue){var Ke=We.newShowControls,ut=We.newControlSorts,wt=ie.state,Et=wt.displayControls,et=Et===void 0?[]:Et,Xe=wt.showControls,pt=Xe===void 0?[]:Xe,at=wt.sysids,ct=at===void 0?[]:at,Nt=wt.syssort,mn=Nt===void 0?[]:Nt,Qt=ie.props.columns;Qt=Ue?ie.formatColumnsListForControlsWithoutHide(Qt):ie.formatColumnsListForControls(Qt);var Cn=Qt.filter(function(Nn){return!Ke.includes(Nn.controlId)}),_n=Cn.map(function(Nn){return Nn.controlId}),ra={};_n.includes("ownerid")?ra={sysids:ct.filter(function(Nn){return!_n.includes(Nn)}),syssort:mn.filter(function(Nn){return!_n.includes(Nn)})}:mn.includes("ownerid")||(ra={syssort:mn.concat("ownerid")}),ie.setState((0,y.default)({controls:_n,displayControls:et.filter(function(Nn){return!_n.includes(Nn)}),showControls:pt.filter(function(Nn){return!_n.includes(Nn)})},ra),function(){ie.handleSave({editAttrs:["controls","displayControls","showControls","advancedSetting"]})})},ie.onChangeSet=function(We,Ue){ie.setState((0,m.default)({},We,Ue),function(){ie.handleSave({editAttrs:["advancedSetting"]})})},ie.renderSort=function(){var We=ie.state.moreSort,Ue=ie.props.columns,Ke=Ue.filter(function(ut){return!ke.uS.includes(ut.type)});return a.createElement("div",{className:"commonConfigItem"},a.createElement(Gt.Z,{columns:Ke,sortConditions:We,onChange:function(wt){var Et=wt[0]||{},et={moreSort:wt,sortCid:Et.controlId||"ctime",sortType:Et.isAsc?2:1};ie.setState((0,y.default)({},et),function(){ie.handleSave({editAttrs:["moreSort","sortCid","sortType"]})})}}))},ie.editPlugin=function(We){var Ue=ie.props,Ke=Ue.updateCurrentViewState,ut=Ue.view,wt=Ue.appId,Et=ut.pluginInfo,et=Et===void 0?{}:Et,Xe=ut.viewId,pt=et.id,at=et.source,ct=at===void 0?0:at;nn.Z.edit((0,y.default)({id:pt,source:ct,viewId:Xe,appId:wt},We)).then(function(Nt){Ke({pluginInfo:Nt})})},ie.onChangeCustomView=function(We,Ue,Ke){var ut=ie.props,wt=ut.updateCurrentView,Et=ut.view,et=ut.appId;Ue?ie.editPlugin(We):wt((0,y.default)({},Et,{appId:et,editAttrs:["advancedSetting"]},Ke,{advancedSetting:(0,ke.D0)(Et,Z().omit((0,y.default)({},We),"navfilters"))}))},ie.renderSetting=function(){var We=ie.state,Ue=We.viewSetting,Ke=We.customdisplay,ut=Ke===void 0?"0":Ke,wt=We.customShowControls,Et=We.showControls,et=ie.props,Xe=et.onShowCreateCustomBtn,pt=et.worksheetId,at=et.appId,ct=et.columns,Nt=et.view,mn=et.refreshFn,Qt=et.btnList,Cn=et.viewId,_n=et.sheetSwitchPermit,ra=et.worksheetControls,Nn=(0,K.P7)(ct,Nt.controls,!1).filter(function(Dn){return!!Dn.controlName&&!Z().includes([22,10010,43,45,49,51],Dn.type)}).sort(function(Dn,xn){return Dn.row===xn.row?Dn.col-xn.col:Dn.row-xn.row}),Ht=(0,$n.v)(fe.RX.sysControlSwitch,_n);switch(Ue){case"ActionSet":return a.createElement(Kn,{worksheetControls:ra,isSheetView:v.B[Nt.viewType]==="sheet",onShowCreateCustomBtn:Xe,worksheetId:pt,appId:at,viewId:Cn,refreshFn:mn,btnList:Qt,updateCurrentView:ie.props.updateCurrentView,view:Nt});case"Filter":return a.createElement(An,ie.props);case"Sort":return ie.renderSort();case"Controls":return a.createElement(fa,(0,y.default)({},ie.props,{formatColumnsListForControls:ie.formatColumnsListForControlsWithoutHide,columnChange:function(xn){return ie.columnChange(xn,!0)}}));case"MobileSet":return a.createElement(nr,(0,y.default)({},ie.props,{worksheetControls:Ht?ie.props.worksheetControls:ie.props.worksheetControls.filter(function(Dn){return!Z().includes(ke.FO,Dn.controlId)}),isShowWorkflowSys:Ht,coverColumns:(0,K.P7)(ct,Nt.controls,!1).filter(function(Dn){return!!Dn.controlName&&!Z().includes([45],Dn.type)})}));case"FastFilter":return a.createElement(Kr,ie.props);case"NavGroup":return a.createElement(Gr,ie.props);case"RecordColor":return a.createElement(qr,ie.props);case"Show":return a.createElement(Yo,(0,y.default)({},ie.props,{info:ie.state,onChange:function(xn){xn==="0"?ie.setState({customdisplay:"0",customShowControls:Et},function(){ie.handleSave({editAttrs:["showControls","advancedSetting"]})}):ie.setState({customdisplay:"1",showControls:(wt||[]).length!==0?wt:Nn.filter(function(an){return an.controlId.length>20}).slice(0,50).map(function(an){return an.controlId})},function(){ie.handleSave({editAttrs:["showControls","advancedSetting"]})})},onChangeColumns:function(xn){var an=xn.newShowControls,Qn=xn.newControlSorts;ut==="1"?ie.setState({showControls:an,customShowControls:an,customdisplay:"1"},function(){ie.handleSave({editAttrs:["showControls","advancedSetting"]})}):ie.setState({sysids:an,syssort:Qn},function(){ie.handleSave({editAttrs:["advancedSetting"]})})}}));case"urlParams":return a.createElement(No,ie.props);case"PluginSettings":return a.createElement(go,(0,y.default)({},ie.props,{onUpdateTab:function(xn){ie.setState({viewSetting:xn})},onChangeView:ie.onChangeCustomView}));case"ParameterSet":return a.createElement(A,(0,y.default)({},ie.props,{onChangeView:ie.onChangeCustomView}));case"Submit":return a.createElement(Jn,(0,y.default)({},ie.props,{onChangeView:ie.onChangeCustomView}));default:var Sn=(Z().get(Nt,"pluginInfo")||{}).source===0;return v.B[Nt.viewType]==="customize"&&Sn?a.createElement(Ha,(0,y.default)({},ie.props,{onChangeView:ie.onChangeCustomView})):ie.renderViewSetting()}},ie.state=ie.fill((0,y.default)({},He)),ie}return(0,te.default)(nt,[{key:"componentDidMount",value:function(){this.fetchBtnByAll()}},{key:"componentWillReceiveProps",value:function(ie){(ie.view.viewId!==this.props.view.viewId||!Z().isEqual(ie.view.moreSort,this.props.view.moreSort)||!Z().isEqual(ie.view.showControls,this.props.view.showControls)||!Z().isEqual(ie.view.controls,this.props.view.controls)||!Z().isEqual(ie.view.displayControls,this.props.view.displayControls))&&this.setState(this.fill(ie,ie.view.viewId===this.props.view.viewId))}},{key:"getDefaultSortValue",value:function(ie,We){var Ue=We||this.state.sortingColumns,Ke=Ue.filter(function(wt){return wt.value===ie})[0]||{},ut=(0,K.Zv)(Ke.controltype);return ut[0].value}},{key:"handleSave",value:function(ie){var We=ie||{},Ue=We.editAttrs,Ke=this.state,ut=Ke.name,wt=Ke.controls,Et=Ke.moreSort,et=Ke.sortCid,Xe=Ke.sortType,pt=Ke.showControls,at=Ke.controlsSorts,ct=Ke.rowHeight,Nt=Ke.customdisplay,mn=Ke.refreshtime,Qt=Ke.displayControls,Cn=Ke.sysids,_n=Ke.syssort,ra=Ke.customShowControls,Nn=this.props,Ht=Nn.worksheetId,Sn=Nn.view,Dn=Nn.appId,xn={name:ut,sortCid:et,sortType:Xe,moreSort:Et,controls:wt,rowHeight:ct,showControls:Nt==="0"?[]:pt,controlsSorts:at,displayControls:Qt},an=(0,y.default)({appId:Dn,worksheetId:Ht},Sn,xn,{advancedSetting:(0,ke.ob)(Sn,(0,y.default)({customdisplay:Nt,refreshtime:mn,customShowControls:oe()(ra||(Sn.advancedSetting||{}).customShowControls||[]),sysids:oe()(Cn),syssort:oe()(_n)},Z().pick(this.state,["showno","showquick","showsummary","showvertical","alternatecolor","titlewrap","fastedit","enablerules","sheettype"])))});Ue&&(an=(0,y.default)({},an,{editAttrs:Ue})),this.props.updateCurrentView(an)}},{key:"renderViewSetting",value:function(){var ie=this,We=this.props,Ue=We.columns,Ke=We.view,ut=We.sheetSwitchPermit,wt=(Z().get(Ke,"pluginInfo")||{}).source===0;if(v.B[Ke.viewType]==="customize"&&!wt)return a.createElement(A,(0,y.default)({},this.props,{onChangeView:this.onChangeCustomView}));var Et=this.state,et=Et.rowHeight,Xe=Et.refreshtime,pt=Xe===void 0?"0":Xe,at=Et.fastedit,ct=at===void 0?"0":at,Nt=Et.sheettype,mn=Nt===void 0?"0":Nt,Qt=Et.enablerules,Cn=Qt===void 0?"":Qt,_n=v.B[Ke.viewType],ra=(0,K.P7)(Ue,Ke.controls,!1).filter(function(xn){return!!xn.controlName&&!Z().includes([22,10010,43,45,49,51],xn.type)}).sort(function(xn,an){return xn.row===an.row?xn.col-an.col:xn.row-an.row}),Nn=(0,K.P7)(Ue,Ke.controls,!1).filter(function(xn){return!!xn.controlName}),Ht=_n==="structure"&&String(Ke.childType)==="2",Sn=(0,y.default)({},this.props,{updateCurrentView:function(an){ie.props.updateCurrentView(k()(an,{filters:(0,se.Gt)(an.filters)}))}}),Dn=function(){switch(_n){case"board":case"structure":case"gallery":case"detail":return Ht?a.createElement(Rn,(0,y.default)({},ie.props,{filteredColumns:ra,coverColumns:Nn})):a.createElement("div",{className:"cardAppearanceWrap"},a.createElement($e,(0,y.default)({},Z().pick(ie.props,["appId","view","columns","worksheetControls","updateCurrentView","currentSheetInfo","searchRows","updateViewShowcount"]),{worksheetControls:ra,coverColumns:Nn,updateCurrentView:Sn.updateCurrentView})));case"calendar":return a.createElement(Nr,Sn);case"gunter":return a.createElement(ul,Sn);case"resource":return a.createElement(o,Sn);case"sheet":return a.createElement("div",{className:"dataSetting"},a.createElement("div",{className:"commonConfigItem Font13 bold"},_l("\u884C\u9AD8")),a.createElement("div",{className:"commonConfigItem mTop12 mBottom32"},a.createElement(L.Z,{data:[{text:_l("\u7D27\u51D1"),value:0},{text:_l("\u4E2D\u7B49"),value:1},{text:_l("\u9AD8"),value:2},{text:_l("\u8D85\u9AD8"),value:3}],value:et,onChange:function(Qn){ie.setState({rowHeight:Qn},function(){ie.handleSave({editAttrs:["rowHeight"]})})}})),a.createElement("div",{className:"commonConfigItem Font13 bold"},_l("\u663E\u793A\u8BBE\u7F6E")),_t.Dv.map(function(an){var Qn=ie.state[an.key]==="1";return a.createElement("div",{className:""},a.createElement(dn,null,a.createElement(j.Z,{icon:Qn?"ic_toggle_on":"ic_toggle_off",className:"Font28 Hand",onClick:function(){ie.onChangeSet(an.key,Qn?"0":"1")}}),a.createElement("div",{className:"switchText InlineBlock Normal mLeft12 mTop8"},an.txt),an.tips&&a.createElement(Ne.Z,{text:a.createElement("span",null,an.tips),popupPlacement:"top"},a.createElement("i",{className:"icon-help Font16 Gray_9e mLeft3 TxtMiddle"}))))}),a.createElement("div",{className:"commonConfigItem Font13 bold mTop32"},_l("\u8868\u683C\u4EA4\u4E92\u65B9\u5F0F")),a.createElement("div",{className:"mTop12"},a.createElement(Ce.Z,{className:"",text:_l("\u7ECF\u5178\u6A21\u5F0F"),checked:mn==="0",onClick:function(Qn){ie.onChangeSet("sheettype","0")}}),a.createElement("div",{className:"txt Gray_75 mTop8",style:{marginLeft:"28px"}},_l("\u70B9\u6574\u884C\u6253\u5F00\u8BB0\u5F55"))),a.createElement("div",{className:"mTop20"},a.createElement(Ce.Z,{className:"",text:_l("\u7535\u5B50\u8868\u683C\u6A21\u5F0F"),checked:mn==="1",onClick:function(Qn){ie.onChangeSet("sheettype","1")}}),a.createElement("div",{className:"txt Gray_75 mTop8",style:{marginLeft:"28px"}},_l("\u70B9\u5355\u5143\u683C\u9009\u4E2D\u5B57\u6BB5\uFF0C\u6309\u7A7A\u683C\u952E\u6253\u5F00\u8BB0\u5F55"))),a.createElement("div",{className:"commonConfigItem Font13 bold mTop32"},_l("\u66F4\u591A\u8BBE\u7F6E")),a.createElement(dn,{className:"mTop12"},a.createElement("div",{className:"flexRow alignItemsCenter"},a.createElement(j.Z,{icon:ct==="1"?"ic_toggle_on":"ic_toggle_off",className:"Font28 Hand",onClick:function(){ie.onChangeSet("fastedit",ct==="1"?"0":"1")}}),a.createElement("div",{className:"switchText InlineBlock Normal mLeft12"},_l("\u5141\u8BB8\u884C\u5185\u7F16\u8F91"))),a.createElement("div",{className:"flexRow"},a.createElement("div",{className:"w28"}),a.createElement("div",{className:"switchText InlineBlock Normal mLeft12 Gray_75 mTop4"},_l("\u65E0\u9700\u6253\u5F00\u8BB0\u5F55\u8BE6\u60C5\uFF0C\u5728\u8868\u683C\u884C\u5185\u76F4\u63A5\u7F16\u8F91\u5B57\u6BB5")))),a.createElement(dn,{className:"mTop12"},a.createElement("div",{className:"flexRow alignItemsCenter"},a.createElement(j.Z,{icon:Cn==="1"||!Cn?"ic_toggle_on":"ic_toggle_off",className:"Font28 Hand",onClick:function(){ie.onChangeSet("enablerules",Cn==="1"||!Cn?"0":"1")}}),a.createElement("div",{className:"switchText InlineBlock Normal mLeft12"},_l("\u542F\u7528\u4E1A\u52A1\u89C4\u5219"))),a.createElement("div",{className:"flexRow"},a.createElement("div",{className:"w28"}),a.createElement("div",{className:"switchText InlineBlock Normal mLeft12 Gray_75 mTop4"},_l("\u5728\u8868\u683C\u4E2D\u751F\u6548\u4E1A\u52A1\u89C4\u5219\uFF0C\u4F46\u4F1A\u5F71\u54CD\u8868\u683C\u6027\u80FD")))),a.createElement("div",{className:"commonConfigItem Font13 bold mTop32"},_l("\u81EA\u52A8\u5237\u65B0")),a.createElement("div",{className:"Gray_9e mTop8 flex"},_l("\u6BCF\u9694\u4E00\u6BB5\u65F6\u95F4\u540E\u81EA\u52A8\u5237\u65B0\u5F53\u524D\u89C6\u56FE")),a.createElement("div",{className:"commonConfigItem mTop12 mBottom32"},a.createElement(C.Z,{className:"w100",border:!0,value:pt,data:[{text:_l("\u5173\u95ED"),value:"0"},{text:_l("30\u79D2"),value:"30"},{text:_l("1\u5206\u949F"),value:"60"},{text:_l("2\u5206\u949F"),value:"120"},{text:_l("3\u5206\u949F"),value:"180"},{text:_l("4\u5206\u949F"),value:"240"},{text:_l("5\u5206\u949F"),value:"300"}],onChange:function(Qn){ie.setState({refreshtime:Qn},function(){ie.handleSave({editAttrs:["advancedSetting"]})})}})));case"map":return a.createElement(G,(0,y.default)({},Z().pick(ie.props,["appId","view","columns","worksheetControls","updateCurrentView","currentSheetInfo","searchRows","updateViewShowcount"]),{worksheetControls:ra,coverColumns:Nn,updateCurrentView:function(Qn){ie.props.updateCurrentView(k()(Qn,{filters:(0,se.Gt)(Qn.filters)}))}}))}};return a.createElement("div",{className:"viewConfigWrap"},Dn())}},{key:"render",value:function(){var ie=this,We=this.state.viewSetting,Ue=_t.jS.find(function(ut,wt){return ut.type===We})||{},Ke=function(){var wt=ie.props.view,Et=(Z().get(wt,"pluginInfo")||{}).source===0;return a.createElement("div",{className:N()("viewContentCon",{H100:["Submit","Filter"].includes(Ue.type)})},!["MobileSet","FastFilter","NavGroup","RecordColor","ActionSet","Submit","Filter"].includes(Ue.type)&&a.createElement("div",{className:"viewSetTitle"},Ue.type==="Setting"?_l("\u89C6\u56FE\u8BBE\u7F6E"):Ue.name,Et&&["ParameterSet"].includes(We)&&a.createElement("div",{className:"Gray_9e Font13 mTop4 Normal"},_l("\u63D2\u4EF6\u53D1\u5E03\u540E\u5C06\u4F5C\u4E3A\u4F7F\u7528\u8005\u7684\u89C6\u56FE\u914D\u7F6E"))),ie.renderSetting())};return a.createElement("div",{className:"viewSetBox"},a.createElement(je,(0,y.default)({},this.props,{viewSetting:We,formatColumnsListForControlsWithoutHide:this.formatColumnsListForControlsWithoutHide,onChangeType:function(wt){ie.setState({viewSetting:wt})}})),["PluginSettings"].includes(We)?a.createElement("div",{className:"viewContent flex contentCon flexColumn"},Ke()):a.createElement(Te.Z,{className:"viewContent flex"},Ke()))}}]),nt}(a.Component))||lt,da=(0,ye.Z)(Ft=function(Me){(0,r.default)(nt,Me);function nt(He){(0,T.default)(this,nt);var ie=(0,E.default)(this,(nt.__proto__||J()(nt)).call(this,He)),We=He.view;return ie.state={name:We.name},ie}return(0,te.default)(nt,[{key:"componentWillReceiveProps",value:function(ie){var We=ie.view;ie.viewId!==this.props.viewId&&(this.state={name:We.name})}},{key:"componentWillUnmount",value:function(){if(this.inputEl&&document.activeElement===this.inputEl){var ie=this.inputEl.value.trim();ie&&this.props.view.name!==ie&&this.handleNameSave()}}},{key:"handleNameSave",value:function(){var ie=this.state.name,We=this.props,Ue=We.worksheetId,Ke=We.view,ut=We.appId;this.props.updateCurrentView((0,y.default)({},Ke,{name:ie,appId:ut,worksheetId:Ue,editAttrs:["name"]}))}},{key:"renderTitle",value:function(){var ie=this,We=this.state.name,Ue=this.props.view,Ke=v.D.find(function(et){return et.id===v.B[Ue.viewType]})||{},ut=Ke.icon,wt=Ke.color,Et=["customize"].includes(v.B[Ue.viewType]);return a.createElement("div",{className:"viewTitle"},Et?a.createElement(h.Z,{url:Z().get(Ue,"pluginInfo.iconUrl")||"https://fp1.mingdaoyun.cn/customIcon/sys_12_4_puzzle.svg",fill:Z().get(Ue,"pluginInfo.iconColor")||"#445A65",size:18}):a.createElement(j.Z,{className:"mRight5 Font20",style:{color:wt},icon:ut}),a.createElement("input",{autoFocus:Ue.isNewView,value:We,ref:function(Xe){ie.inputEl=Xe},onChange:function(Xe){ie.setState({name:Xe.target.value})},onFocus:function(){Ue.isNewView&&setTimeout(function(){$(ie.inputEl).select()},0)},onBlur:function(Xe){var pt=Xe.target.value.trim();pt||ie.setState({name:Ue.name}),pt&&Ue.name!==pt&&ie.handleNameSave()},onKeyDown:function(Xe){var pt=Xe.target.value.trim();Xe.which===13&&pt&&Ue.name!==pt&&(ie.handleNameSave(),$(ie.inputEl).blur())},className:"Font16"}),a.createElement(j.Z,{icon:"close",className:"Gray_9d Font20 pointer",onClick:this.props.onClose}))}},{key:"render",value:function(){return a.createElement("div",{className:"worksheetViewConfig"},a.createElement("div",null,this.renderTitle(),a.createElement(ca,this.props)))}}]),nt}(a.Component))||Ft},7685:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>T});var h=t(31546),Te=t(88239),C=t(85105),Ce=t.n(C),Ne=t(99663),j=t(22600),L=t(49135),I=t(93196),k=t(67294),e=t(49300),oe=t(62232),m=t(93967),y=t.n(m),i=t(86674),me=t(96486),J=t.n(me),T=function(te){(0,I.default)(E,te);function E(){return(0,Ne.default)(this,E),(0,L.default)(this,(E.__proto__||Ce()(E)).apply(this,arguments))}return(0,j.default)(E,[{key:"render",value:function(){var R=this.props,a=R.worksheetControls,z=a===void 0?[]:a,N=R.advancedSetting,q=N===void 0?{}:N,K=R.handleChange,ye=q.abstract,v=(0,e.G1)({controls:z.filter(function(de){return!i.x0.includes(de.controlId)&&!(J().includes([48],de.sourceControlType)&&de.type===30)}),filter:function(U){return J().includes(e.zI,U.type)}});v=v.map(function(de){return(0,Te.default)({},de,{iconName:(0,oe.hB)((z.find(function(U){return U.controlId===de.value})||{}).type,!1)})});var se=!!z.filter(function(de){return de.controlId===ye}).length;return k.createElement(k.Fragment,null,k.createElement("div",{className:"title Font13 bold"},_l("\u6458\u8981")),k.createElement("div",{className:"settingContent"},k.createElement("p",{className:"mTop6 mBottom8 Gray_9e viewSetText"},_l("\u7528\u4E8E\u663E\u793A\u957F\u6587\u672C\uFF0C\u6700\u591A\u53EF\u663E\u793A3\u884C")),k.createElement(h.Z,{className:y()("dropAbstract",{placeholder:!ye||!se}),data:v,value:se?ye:"",border:!0,cancelAble:!!(se&&ye),maxHeight:260,style:{width:"100%"},onChange:function(U){U!==ye&&K(U||"")},placeholder:_l("\u8BF7\u9009\u62E9")})))}}]),E}(k.Component)},67689:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>v});var h=t(3540),Te=t(33867),C=t(31546),Ce=t(85105),Ne=t.n(Ce),j=t(99663),L=t(22600),I=t(49135),k=t(93196),e=t(86735),oe=t(67294),m=t(49300),y=t(89626),i=t(71893),me=t(40979),J=t(15742),T=t(87600),te=t(93967),E=t.n(te),r=t(96486),R=t.n(r),a=t(92899),z=(0,e.Z)([`
  .ming.Dropdown.isDelete .Dropdown--input .value,
  .dropdownTrigger .Dropdown--input .value {
    color: red;
  }
  .ming.Dropdown.isDelete .Dropdown--border,
  .dropdownTrigger .Dropdown--border {
    border-color: red;
  }
  .navWidth {
    width: 48%;
    input[type='number'] {
      &::-webkit-outer-spin-button,
      &::-webkit-inner-spin-button {
        margin: 0;
        -webkit-appearance: none !important;
      }
    }
    .unit {
      right: 12px;
      line-height: 34px;
    }
    .ming.Input {
      font-size: 13px;
      border: 1px solid #ddd;
      &:hover {
        border-color: #2196f3;
      }
      &:focus {
        border-color: #2196f3;
      }
    }
  }
`],[`
  .ming.Dropdown.isDelete .Dropdown--input .value,
  .dropdownTrigger .Dropdown--input .value {
    color: red;
  }
  .ming.Dropdown.isDelete .Dropdown--border,
  .dropdownTrigger .Dropdown--border {
    border-color: red;
  }
  .navWidth {
    width: 48%;
    input[type='number'] {
      &::-webkit-outer-spin-button,
      &::-webkit-inner-spin-button {
        margin: 0;
        -webkit-appearance: none !important;
      }
    }
    .unit {
      right: 12px;
      line-height: 34px;
    }
    .ming.Input {
      font-size: 13px;
      border: 1px solid #ddd;
      &:hover {
        border-color: #2196f3;
      }
      &:focus {
        border-color: #2196f3;
      }
    }
  }
`]),N=(0,e.Z)([`
  margin-top: 20px;
  display: flex;
  & > div {
    flex: 1;
    .ming.Dropdown {
      margin-top: 8px;
    }
  }
`],[`
  margin-top: 20px;
  display: flex;
  & > div {
    flex: 1;
    .ming.Dropdown {
      margin-top: 8px;
    }
  }
`]),q=i.ZP.div(z),K=i.ZP.div(N),ye={2:!1,1:!0},v=function(se){(0,k.default)(de,se);function de(U){(0,j.default)(this,de);var pe=(0,I.default)(this,(de.__proto__||Ne()(de)).call(this,U));return pe.onChangeWidth=function(Y){var be=pe.props.handleChangeCoverWidth,Q=Y.target.value.trim();Q<240&&(Q=240),Q>360&&(Q=360),be(Q),pe.setState({cardwidth:Q})},pe.state={cardwidth:R().get(pe.props.fromRelative?pe.props:pe.props.view,"advancedSetting.cardwidth")},pe}return(0,L.default)(de,[{key:"render",value:function(){var pe=this,Y=this.state.cardwidth,be=Y===void 0?280:Y,Q=this.props,Le=Q.coverColumns,Be=Le===void 0?[]:Le,ke=Q.currentSheetInfo,Ie=Q.updateCurrentView,he=Q.view,Re=Q.appId,ue=Q.handleChangePosition,we=Q.handleChangeIsCover,Ee=Q.handleChangeType,b=Q.handleChangeOpencover,le=Q.handleChangeCoverWidth,ae=Q.fromRelative;if(Be.length<=0)return"";var ve=ae?this.props:he,W=ve.viewType,ce=ve.coverType,Z=ve.advancedSetting,_e=Z===void 0?{}:Z,P=J.B.gallery===String(W)&&R().isUndefined(ve.coverCid)?R().get(ke,["advancedSetting","coverid"]):ve.coverCid,xe=_e.coverposition,bt=_e.opencover,tt=bt===void 0?"1":bt,Dt=(0,m.G1)({controls:Be,filter:J.B.gallery===String(W)?function(Zn){return[14,47].includes(Zn.type)||[14,47].includes(Zn.sourceControlType)||Zn.type===45&&Zn.enumDefault===1}:function(Zn){return[14,47].includes(Zn.type)||[14,47].includes(Zn.sourceControlType)}}),vn=R().get(R().find(Dt,function(Zn){return Zn.value===P}),"value")||"notDisplay",Fe=!1,Bt=R().find(Be,function(Zn){return Zn.controlId===P});P&&!Bt&&(Fe=!0,vn="");var kt=J.B.gallery===String(W)&&(0,T.dJ)(Bt||{}),Tt=(Bt||{}).type===47;J.B.gallery===String(W)&&(0,T.dJ)(Bt||{});var tn=xe||(J.B.gallery===String(W)?"0":"2"),Vn=Tt?y.D9.filter(function(Zn){return Zn.value===1}):tn!=="2"?y.D9:kt?y.D9.filter(function(Zn){return Zn.value===0}):y.D9.filter(function(Zn){return Zn.value<2});return oe.createElement("div",{className:"mTop32"},oe.createElement("div",{className:"title Font13 bold"},_l("\u5C01\u9762")),oe.createElement(q,null,oe.createElement("div",{className:"settingContent mTop8"},oe.createElement(C.Z,{data:Dt.concat({value:"notDisplay",text:_l("\u4E0D\u663E\u793A")}),value:vn,className:E()({isDelete:Fe}),border:!0,style:{width:"100%"},onChange:function(Ot){var $t=R().find(Be,function(cn){return cn.controlId===Ot})||{};(0,T.dJ)($t)&&(ue("2"),Ee(0)),($t||{}).type===47&&Ee(1),(vn!==Ot||Fe)&&we(Ot)},placeholder:Fe?_l("\u63A7\u4EF6\u5DF2\u5220\u9664\uFF0C\u8BF7\u91CD\u65B0\u914D\u7F6E"):_l("\u4E0D\u663E\u793A")}),oe.createElement("div",{className:"configSwitch mTop10"},oe.createElement(a.Y3,{className:"flexRow alignItemsCenter"},oe.createElement(Te.Z,{icon:ye[tt]?"ic_toggle_on":"ic_toggle_off",className:"Font28 Hand",onClick:function(){b(ye[tt]?"2":"1")}}),oe.createElement("div",{className:"switchText InlineBlock Normal mLeft10"},_l("\u5141\u8BB8\u70B9\u51FB\u67E5\u770B")))),oe.createElement(K,null,oe.createElement("div",{className:"",style:{width:"48%",marginRight:"4%"}},oe.createElement("div",{className:"subTitle"},_l("\u663E\u793A\u4F4D\u7F6E")),oe.createElement(C.Z,{disabled:vn==="notDisplay",data:(0,me.wd)(W)?kt?y.P5.filter(function(Zn){return Number(Zn.value)===2}):y.P5:y.P5.filter(function(Zn){return Number(Zn.value)<2}),value:tn,border:!0,style:{width:"100%"},onChange:function(Ot){tn!==Ot&&ue(Ot,Ot==="2"&&ce>=2?0:ce)}})),oe.createElement("div",{className:"",style:{width:"48%"}},oe.createElement("div",{className:"subTitle"},_l("\u663E\u793A\u65B9\u5F0F")),oe.createElement(C.Z,{disabled:vn==="notDisplay",style:{width:"100%"},data:Vn,value:ce,border:!0,onChange:function(Ot){ce!==Ot&&Ee(Ot)}})))),!!le&&oe.createElement("div",{className:"mTop24"},oe.createElement("div",{className:"title Font13 bold"},J.B.gallery===String(W)?_l("\u5361\u7247\u6700\u5C0F\u5BBD\u5EA6"):_l("\u5361\u7247\u5BBD\u5EA6")),oe.createElement("div",{className:"Relative navWidth mTop8"},oe.createElement(h.Z,{type:"number",manualRef:function(Ot){return pe.input={current:Ot}},className:"flex placeholderColor w100 pRight30",value:be,placeholder:_l("\u8BF7\u8F93\u5165"),onChange:function(Ot){pe.setState({cardwidth:Ot})},onKeyDown:function(Ot){Ot.keyCode===13&&pe.onChangeWidth(Ot)},onBlur:function(Ot){pe.onChangeWidth(Ot)}}),oe.createElement("span",{className:"Absolute unit Gray_9e"},"px")))))}}]),de}(oe.Component)},46336:(wn,gt,t)=>{"use strict";t.d(gt,{D:()=>h});var h=[{title:_l("\u9009\u62E9\u63D2\u4EF6\u6A21\u677F")},{title:_l("\u5B89\u88C5 mdye cli")},{title:_l("\u5EFA\u7ACB\u672C\u5730\u9879\u76EE")},{title:_l("\u8C03\u8BD5")}]},58409:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>de});var h=t(63239),Te=t.n(h),C=t(88239),Ce=t(33867),Ne=t(85315),j=t(85105),L=t.n(j),I=t(99663),k=t(22600),e=t(49135),oe=t(93196),m=t(86735),y=t(67294),i=t(77738),me=t(96486),J=t.n(me),T=t(71893),te=t(15577),E=t(89626),r=t(67272),R=t(51024),a=t(12424),z=(0,m.Z)([`
  display: flex;
  position: relative;
  border-bottom-left-radius: 3px;
  border-top-left-radius: 3px;
  border-bottom-right-radius: 0;
  border-top-right-radius: 0;
  input {
    width: 100%;
  }
  .addIcon {
    border-top-right-radius: 3px;
  }
  .subIcon {
    border-bottom-right-radius: 3px;
  }
  .numberControlBox {
    display: flex;
    flex-direction: column;
    .iconWrap {
      padding: 0 6px;
      border: 1px solid #e0e0e0;
      border-left: none;
      height: 18px;
      &:first-child {
        border-bottom: none;
      }
      i {
        color: #9e9e9e;
      }
    }
  }
`],[`
  display: flex;
  position: relative;
  border-bottom-left-radius: 3px;
  border-top-left-radius: 3px;
  border-bottom-right-radius: 0;
  border-top-right-radius: 0;
  input {
    width: 100%;
  }
  .addIcon {
    border-top-right-radius: 3px;
  }
  .subIcon {
    border-bottom-right-radius: 3px;
  }
  .numberControlBox {
    display: flex;
    flex-direction: column;
    .iconWrap {
      padding: 0 6px;
      border: 1px solid #e0e0e0;
      border-left: none;
      height: 18px;
      &:first-child {
        border-bottom: none;
      }
      i {
        color: #9e9e9e;
      }
    }
  }
`]),N=T.ZP.div(z);function q(U){var pe=U.onChange,Y=U.maxNum,be=U.minNum,Q=(0,y.useState)(U.value),Le=(0,a.Z)(Q,2),Be=Le[0],ke=Le[1];(0,y.useEffect)(function(){ke(U.value)},[U.value]);var Ie=function(b){var le=b.target.value.trim();ke((le||"0").replace(/[^\d]/g,""))},he=function(b){ke(b),pe(b)},Re=function(){he(parseInt(Be)>Y?Y:parseInt(Be)<be?be:parseInt(Be))},ue=function(){parseInt(Be+1)>Y||he(parseInt(Be+1))},we=function(){parseInt(Be-1)<be||he(parseInt(Be-1))};return y.createElement(N,{className:U.className},y.createElement(R.default,{value:Be,onChange:Ie,onBlur:Re}),y.createElement("div",{className:"numberControlBox"},y.createElement("div",{className:"iconWrap addIcon",onClick:ue},y.createElement("i",{className:"icon-arrow-up-border pointer"})),y.createElement("div",{className:"iconWrap subIcon",onClick:we},y.createElement("i",{className:"icon-arrow-down-border pointer"}))))}var K=(0,m.Z)([`
  display: inline-block;
  .switchText {
    margin-right: 6px;
    line-height: 24px;
  }
  .icon {
    vertical-align: middle;
    &-ic_toggle_on {
      color: #00c345;
    }
    &-ic_toggle_off {
      color: #bdbdbd;
    }
  }
`],[`
  display: inline-block;
  .switchText {
    margin-right: 6px;
    line-height: 24px;
  }
  .icon {
    vertical-align: middle;
    &-ic_toggle_on {
      color: #00c345;
    }
    &-ic_toggle_off {
      color: #bdbdbd;
    }
  }
`]),ye=(0,m.Z)([`
  padding-left: 28px;
  .showCount {
    .text {
      right: 10px;
      top: 0px;
      line-height: 36px;
    }
  }
`],[`
  padding-left: 28px;
  .showCount {
    .text {
      right: 10px;
      top: 0px;
      line-height: 36px;
    }
  }
`]),v=T.ZP.div(K),se=T.ZP.div(ye),de=function(U){(0,oe.default)(pe,U);function pe(){return(0,I.default)(this,pe),(0,e.default)(this,(pe.__proto__||L()(pe)).apply(this,arguments))}return(0,k.default)(pe,[{key:"render",value:function(){var be=this,Q=this.props,Le=Q.appId,Be=Q.worksheetControls,ke=Q.view,Ie=ke===void 0?{}:ke,he=Q.text,Re=Q.handleChange,ue=Q.handleChangeSort,we=Q.fromRelative,Ee=Q.maxCount3,b=Q.hideShowControlName,le=Q.isShowWorkflowSys,ae=Q.canShowCount,ve=we?this.props:Ie,W=ve.displayControls,ce=W===void 0?[]:W,Z=ve.showControlName,_e=Z===void 0?!0:Z,P=ve.controlsSorts,xe=le?Be.map(function(kt){return kt.controlId}).concat([].concat((0,Ne.Z)(E.YX),(0,Ne.Z)(E.FO))):Be.map(function(kt){return kt.controlId}).concat(E.YX);ce=ce.filter(function(kt){return xe.includes(kt)});var bt=(0,E.PE)(Be),tt=(0,te.aq)(Ie),Dt=tt.appshowtype,vn=Dt===void 0?"0":Dt,Fe=Ee?ce.slice(0,3):ce,Bt=Fe.filter(function(kt){return bt.find(function(Tt){return Tt.controlId===kt})});return y.createElement("div",{className:"mTop32"},y.createElement("div",{className:"title Font13 bold"},_l("\u663E\u793A\u5B57\u6BB5")),he&&y.createElement("p",{className:"mTop6 Gray_9e viewSetText"},he),y.createElement("div",{className:"settingContent mTop8"},y.createElement(i.Z,{noempty:!1,controlsSorts:P,downElement:this.props.downElement,showControls:Fe,columns:bt,viewType:Ie.viewType,onChange:function(Tt){var tn=Tt.newControlSorts,Vn=Tt.newShowControls,Zn=Vn.filter(function(Ot){return bt.map(function($t){return $t.controlId}).includes(Ot)});if(Ee&&Zn.length>3){alert(_l("\u4E00\u884C\u4E09\u5217\u5E03\u5C40\u65F6\uFF0C\u6700\u591A\u53EA\u80FD\u8BBE\u7F6E3\u4E2A\u663E\u793A\u5B57\u6BB5"),3);return}else ue({newControlSorts:tn,newShowControls:Zn})}})),(!b||b&&!["0","2"].includes(vn))&&y.createElement("div",{className:"configSwitch mTop10"},y.createElement(v,{className:"flexRow alignItemsCenter"},y.createElement(Ce.Z,{icon:_e?"ic_toggle_on":"ic_toggle_off",className:"Font28 Hand",onClick:function(){Re({showControlName:!_e,editAttrs:["showControlName"]})}}),y.createElement("div",{className:"switchText InlineBlock Normal mLeft10"},_l("\u663E\u793A\u5B57\u6BB5\u540D\u79F0")))),ae&&y.createElement("div",{className:"configSwitch mTop4"},y.createElement(v,{className:"flexRow alignItemsCenter"},y.createElement(Ce.Z,{icon:J().get(Ie,"advancedSetting.showcount")&&Bt.length>0?"ic_toggle_on":"ic_toggle_off",className:"Font28 Hand",onClick:function(){if(!(Bt.length<=0)){var Tt=J().get(Ie,"advancedSetting.showcount")?void 0:Bt.length>3?3:Bt.length;be.props.updateCurrentView((0,C.default)({},Ie,{appId:Le,advancedSetting:{showcount:Tt},editAttrs:["advancedSetting"],editAdKeys:["showcount"]})),be.props.updateViewShowcount&&be.props.updateViewShowcount(Tt)}}}),y.createElement("div",{className:"switchText InlineBlock Normal mLeft10"},_l("\u5141\u8BB8\u7528\u6237\u8C03\u6574\u5B57\u6BB5\u6570\u91CF"))),!!J().get(Ie,"advancedSetting.showcount")&&Bt.length>0&&y.createElement(se,{className:"flexRow alignItemsCenter mTop10"},y.createElement("span",{className:"mLeft10"},_l("\u9ED8\u8BA4\u663E\u793A\u524D")),y.createElement("div",{className:"flex mLeft12 showCount flexRow alignItemsCenter"},y.createElement(q,{className:"flex",minNum:0,maxNum:Bt.length,value:Number(J().get(Ie,"advancedSetting.showcount"))>Bt.length?Bt.length:Number(J().get(Ie,"advancedSetting.showcount")),onChange:function(Tt){var tn=Te()(Bt.length>=Tt?Tt:Bt.length);tn!==J().get(Ie,"advancedSetting.showcount")&&(be.props.updateCurrentView((0,C.default)({},Ie,{appId:Le,advancedSetting:{showcount:tn},editAttrs:["advancedSetting"],editAdKeys:["showcount"]})),be.props.updateViewShowcount&&be.props.updateViewShowcount(tn))}}),y.createElement("span",{className:"pLeft10"},_l("\u4E2A"))))))}}]),pe}(y.Component)},99261:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>z});var h=t(34279),Te=t.n(h),C=t(64749),Ce=t(33867),Ne=t(85105),j=t.n(Ne),L=t(99663),I=t(22600),k=t(49135),e=t(93196),oe=t(86735),m=t(67294),y=t(62232),i=t(93967),me=t.n(i),J=t(71893),T=t(86674),te=t(49528),E=t(96486),r=t.n(E),R=(0,oe.Z)([`
  position: relative;
  .Red {
    position: absolute;
    left: 10px;
    top: 8px;
  }
   {
    .dropDropDownSet {
      width: 100%;
      .ant-select-selector {
        border-radius: 3px !important;
        height: 36px !important;
        .ant-select-selection-item {
          line-height: 36px !important;
          font-size: 13px !important;
        }
      }
      &.isDelete {
        .ant-select-selector {
          border-color: red !important;
        }
        .ant-select-selection-item {
          opacity: 0;
          z-index: 1;
        }
      }
    }
    li {
      .itemText {
        padding-left: 10px;
      }
      &:hover {
        .itemText {
          color: #fff;
        }
      }
    }
  }
`],[`
  position: relative;
  .Red {
    position: absolute;
    left: 10px;
    top: 8px;
  }
   {
    .dropDropDownSet {
      width: 100%;
      .ant-select-selector {
        border-radius: 3px !important;
        height: 36px !important;
        .ant-select-selection-item {
          line-height: 36px !important;
          font-size: 13px !important;
        }
      }
      &.isDelete {
        .ant-select-selector {
          border-color: red !important;
        }
        .ant-select-selection-item {
          opacity: 0;
          z-index: 1;
        }
      }
    }
    li {
      .itemText {
        padding-left: 10px;
      }
      &:hover {
        .itemText {
          color: #fff;
        }
      }
    }
  }
`]),a=J.ZP.div(R),z=function(N){(0,e.default)(q,N);function q(K){(0,L.default)(this,q);var ye=(0,k.default)(this,(q.__proto__||j()(q)).call(this,K));return ye.state={visible:!1},ye}return(0,I.default)(q,[{key:"render",value:function(){var ye=this,v=this.props,se=v.className,de=v.view,U=v.handleChange,pe=v.txt,Y=v.title,be=v.key,Q=v.notFoundContent,Le=v.controlList,Be=Le===void 0?[]:Le,ke=v.addTxt,Ie=v.canAddControl,he=v.controls,Re=v.addName,ue=v.worksheetId,we=v.updateWorksheetControls,Ee=this.state.visible,b=this.props.setDataId||r().get(de,["advancedSetting",be]),le=Be.find(function(ve){return ve.controlId===b}),ae=b&&!le;return m.createElement("div",{className:se},m.createElement("div",{className:"title Font13 bold"},Y),m.createElement("div",{className:"settingContent"},m.createElement("p",{className:"mTop6 mBottom8 Gray_9e viewSetText"},pe),m.createElement(a,null,m.createElement(C.default,{className:me()("dropDropDownSet",{isDelete:ae}),optionLabelProp:"label",placeholder:_l("\u8BF7\u9009\u62E9"),value:[b],suffixIcon:m.createElement(Ce.Z,{icon:"arrow-down-border Font14"}),allowClear:b,dropdownClassName:"dropConOption",onChange:function(W){if(W!==b){if(W==="add"){ye.setState({visible:!0});return}U(W)}},notFoundContent:Q||_l("\u5F53\u524D\u5DE5\u4F5C\u8868\u4E2D\u6CA1\u6709\u53EF\u9009\u5B57\u6BB5\uFF0C\u8BF7\u5148\u53BB\u6DFB\u52A0\u4E00\u4E2A")},Be.map(function(ve,W){var ce=m.createElement("div",{className:""},m.createElement("i",{className:me()("icon Gray_9e mRight5 Font13","icon-"+(0,y.hB)(ve.type))}),ve.controlName);return m.createElement(C.default.Option,{value:ve.controlId,key:W,label:ce,className:"select_drop"},ce)}),Ie&&m.createElement(C.default.Option,{className:"addControl",value:"add"},m.createElement("i",{className:me()("icon mRight12 Font16","icon-plus")}),ke)),ae&&m.createElement("span",{className:"Red"},_l("\u8BE5\u5B57\u6BB5\u5DF2\u5220\u9664")))),Ee&&m.createElement(te.Z,{visible:Ee,setVisible:function(){ye.setState({visible:!1})},type:36,controls:he,onAdd:function(W){var ce=he.filter(function(Z){return T.x0.includes(Z.controlId)});we(W.concat(ce))},onChange:U,addName:Re,title:_l("\u6DFB\u52A0\u68C0\u67E5\u9879\u5B57\u6BB5"),enumType:"SWITCH",worksheetId:ue}))}}]),q}(m.Component)},95438:(wn,gt,t)=>{"use strict";t.d(gt,{s:()=>j});var h=t(88239);if(!/^(1887|7596|7798)$/.test(t.j))var Te=t(44253);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(26358);var Ce=t(96486),Ne=t.n(Ce);function j(L,I,k){if((Ne().get(L,"groupFilters")||[]).length>0)return(0,h.default)({},L,{groupFilters:L.groupFilters.map(function(J){return j(J,I)})});var e=Ne().find(I,function(J){return L.controlId===J.controlId})||{},oe=(0,C.Io)((0,C.BM)(e).type),m=(Te.Cz[oe]||{}).value,y=k==="subTotal"&&oe==="DATE"?{dateRange:18}:{},i=(0,h.default)({},L,y,{conditionGroupType:m,type:L.filterType,values:[],maxValue:void 0,minValue:void 0,value:void 0,fullValues:[],isDynamicsource:!0}),me=(0,h.default)({},L,y,{conditionGroupType:m,type:L.filterType,dynamicSource:[],isDynamicsource:!1});return(Ne().get(L,"dynamicSource")||[]).length>0?i:me}},49021:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>i});var h=t(88902),Te=t.n(h),C=t(63239),Ce=t.n(C),Ne=t(88239),j=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(89626);if(!/^(1887|7596|7798)$/.test(t.j))var I=t(99261);if(!/^(1887|7596|7798)$/.test(t.j))var k=t(89014);if(!/^(1887|7596|7798)$/.test(t.j))var e=t(83655);var oe=t(96486),m=t.n(oe);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(5913);function i(me){var J=me.appId,T=me.view,te=me.updateCurrentView,E=me.worksheetControls,r=E===void 0?[]:E,R=me.columns,a=me.currentSheetInfo,z=T.advancedSetting,N=z===void 0?{}:z,q=T.viewControl,K=q===void 0?"":q,ye=N.navshow,v=ye===void 0?"0":ye,se=N.navfilters,de=se===void 0?"[]":se;return j.createElement(j.Fragment,null,j.createElement(I.Z,(0,Ne.default)({},me,{handleChange:function(pe){te((0,Ne.default)({},T,{appId:J,viewControl:pe,advancedSetting:(0,L.ob)(T,{navshow:"0",navfilters:Ce()([])}),editAttrs:["viewControl","advancedSetting"]}))},className:"mTop32",setDataId:K,controlList:(0,y.oF)(r.filter(function(U){return m().includes([9,11],U.type)||U.type===29&&U.enumDefault===1}),a.switches||[]),key:"viewControl",title:_l("\u5206\u7EC4"),txt:_l("\u9009\u62E9\u4E00\u4E2A\u5355\u9009\u9879\u6216\u5173\u8054\u8BB0\u5F55\u5355\u6761\u5B57\u6BB5\uFF0C\u8BB0\u5F55\u5C06\u4EE5\u9009\u4E2D\u9879\u4F5C\u4E3A\u5206\u7EC4\u5728\u663E\u793A\u5DE6\u4FA7")})),!!K&&j.createElement(k.Z,{params:{types:e.d9.filter(function(U){return[9,10,11].includes((r.find(function(pe){return pe.controlId===K})||{}).type)?U.value!=="3":!0}),txt:_l("\u663E\u793A\u9879")},value:v,onChange:function(pe){te((0,Ne.default)({},T,{appId:J,advancedSetting:pe,editAttrs:["advancedSetting"],editAdKeys:Te()(pe)}))},advancedSetting:T.advancedSetting,navfilters:de,filterInfo:{allControls:r,globalSheetInfo:m().pick(a,["appId","groupId","name","projectId","roleType","worksheetId","switches"]),columns:R,viewControl:K}}))}},4434:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>e});var h=t(88239),Te=t(12424),C=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var Ce=t(93002);if(!/^(1887|7596|7798)$/.test(t.j))var Ne=t(15742);if(!/^(1887|7596|7798)$/.test(t.j))var j=t(41991);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(89499);if(!/^(1887|7596|7798)$/.test(t.j))var I=t(57467);if(!/^(1887|7596|7798)$/.test(t.j))var k=t(62232);function e(oe){var m=oe.view,y=oe.onChange,i=oe.relationControls,me=oe.advancedSettingKey,J=oe.viewControlData,T=oe.canClear,te=(0,Ce.Z)({sortVisible:!1}),E=(0,Te.Z)(te,2),r=E[0].sortVisible,R=E[1];return C.createElement(I.d4,{className:oe.className},C.createElement(I.Y$,{className:"pointer subListSortInput flexRow",onClick:function(){return R({sortVisible:!0})}},C.createElement("div",{className:"overflow_ellipsis Gray flex"},(0,k.aq)(m,me).length>0?(0,k.aq)(m,me).reduce(function(a,z){var N=i.filter(function(de){return!_.find(Ne.nh,function(U){return U.controlId===de.controlId})}).concat(Ne.nh),q=N.find(function(de){var U=de.controlId;return z.controlId===U})||{},K=z.isAsc===!0?2:1,ye=(0,L.Zv)(q.type,q).find(function(de){return de.value===K}),v=ye.text,se=q.controlId?q.controlName+"\uFF1A"+v:"";return a?a+"\uFF1B"+se:se},""):C.createElement("span",{className:"Gray_75"},J.viewId?_l("\u6309\u5173\u8054\u89C6\u56FE\u7684\u914D\u7F6E"):_l("\u672A\u8BBE\u7F6E\uFF08\u6309\u6DFB\u52A0\u987A\u5E8F\uFF09"))),T&&(0,k.aq)(m,me).length>0&&C.createElement("div",{className:"clearBtn mRight10",onClick:function(z){y(),z.stopPropagation()}},C.createElement("i",{className:"icon-cancel1 Hand"})),C.createElement("div",{className:"edit"},C.createElement("i",{className:"icon-edit"}))),r&&C.createElement(j.default,(0,h.default)({},oe,{data:m,advancedSettingKey:me,fromRelate:!0,controls:i,onChange:function(z){y(z)},onClose:function(){return R({sortVisible:!1})}})))}},48961:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>v}),!/^(1887|7596|7798)$/.test(t.j))var h=t(25273);if(!/^(1887|7596|7798)$/.test(t.j))var Te=t(54208);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(33867);var Ce=t(88239),Ne=t(63239),j=t.n(Ne),L=t(24043),I=t.n(L),k=t(12424),e=t(86735),oe=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var m=t(93002);var y=t(71893);if(!/^(1887|7596|7798)$/.test(t.j))var i=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var me=t(83298);if(!/^(1887|7596|7798)$/.test(t.j))var J=t(96121);var T=t(29314),te=t(93967),E=t.n(te);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(89626);var R=(0,e.Z)([`
  .customInput {
    width: 100%;
    height: 36px;
    line-height: 36px;
    background: rgba(255, 255, 255, 0.04);
    border-radius: 3px 3px 3px 3px;
    opacity: 1;
    border: 1px solid #2196f3;
    padding: 0 12px;
  }
  .cover {
    position: fixed;
    left: 0;
    top: 0;
    bottom: 0;
    right: 0;
    z-index: 100;
  }
`],[`
  .customInput {
    width: 100%;
    height: 36px;
    line-height: 36px;
    background: rgba(255, 255, 255, 0.04);
    border-radius: 3px 3px 3px 3px;
    opacity: 1;
    border: 1px solid #2196f3;
    padding: 0 12px;
  }
  .cover {
    position: fixed;
    left: 0;
    top: 0;
    bottom: 0;
    right: 0;
    z-index: 100;
  }
`]),a=(0,e.Z)([`
  .dropScrollView {
    width: 430px;
    min-height: 100px;
    max-height: 300px;
    padding: 5px 0;
    border-radius: 3px;
    background: white;
    z-index: 11;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.13), 0 2px 6px rgba(0, 0, 0, 0.1);
    .recordItem {
      cursor: pointer;
      height: 36px;
      line-height: 36px;
      vertical-align: middle;
      box-sizing: border-box;
      width: 100%;
      padding: 0 12px;
      &:hover {
        background: #f5f5f5;
      }
      &.isCur {
        background: #e3f3ff;
      }
    }
  }
`],[`
  .dropScrollView {
    width: 430px;
    min-height: 100px;
    max-height: 300px;
    padding: 5px 0;
    border-radius: 3px;
    background: white;
    z-index: 11;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.13), 0 2px 6px rgba(0, 0, 0, 0.1);
    .recordItem {
      cursor: pointer;
      height: 36px;
      line-height: 36px;
      vertical-align: middle;
      box-sizing: border-box;
      width: 100%;
      padding: 0 12px;
      &:hover {
        background: #f5f5f5;
      }
      &.isCur {
        background: #e3f3ff;
      }
    }
  }
`]),z=(0,e.Z)([`
  min-height: 100px;
  text-align: center;
  padding-top: 30px;
`],[`
  min-height: 100px;
  text-align: center;
  padding-top: 30px;
`]),N=y.ZP.div(R),q=y.ZP.div(a),K=y.ZP.div(z),ye=null;function v(se){var de=(0,oe.useRef)(null),U=(0,oe.useRef)(null),pe=se.controlInfo,Y=se.onChange,be=se.onDelete,Q=se.currentList,Le=Q===void 0?[]:Q,Be=(0,m.Z)({list:[],pageIndex:1,keyWords:"",controls:[],count:0,loading:!0,showMenu:!0}),ke=(0,k.Z)(Be,2),Ie=ke[0],he=Ie.list,Re=Ie.pageIndex,ue=Ie.keyWords,we=Ie.controls,Ee=Ie.count,b=Ie.loading,le=Ie.showMenu,ae=ke[1];(0,oe.useEffect)(function(){ve({})},[]);var ve=function(Z){var _e=Z.pageIndex,P=_e===void 0?1:_e,xe=Z.keyWords,bt=xe===void 0?"":xe;if(ae({loading:!0}),(0,r.Y4)([9,10,11],pe))ae({list:pe.options.filter(function(Bt){return!Bt.isDeleted}).filter(function(Bt){return Bt.value.toLowerCase().indexOf(bt.toLowerCase())>=0}),loading:!1,count:pe.options.length});else if((0,r.Y4)([28],pe)){var tt=I()({length:parseInt(_.get(pe,["advancedSetting","max"])||"1",10)},function(Bt,kt){return j()(kt+1)}),Dt=tt.filter(function(Bt){return Bt.toLowerCase().indexOf(bt.toLowerCase())>=0});ae({list:Dt,loading:!1,count:tt.length})}else if(pe.type===29){var vn=pe.dataSource,Fe={worksheetId:vn,viewId:pe.viewId,searchType:1,pageSize:50,pageIndex:P,status:1,keyWords:bt,isGetWorksheet:!0,getType:7,filterControls:[]};ye&&ye.abort(),ye=i.Z.getFilterRows(Fe),ye.then(function(Bt){ae({list:P>1?he.concat(Bt.data):Bt.data,pageIndex:P,controls:Bt.template?Bt.template.controls:[],count:Bt.count,loading:!1})})}},W=function(Z){if((0,r.Y4)([9,10,11],pe))return oe.createElement(J.Z,{controlInfo:se.controlInfo,item:Z.key});if((0,r.Y4)([28],pe))return oe.createElement("span",{className:"flex"},_l("%0 \u7EA7",parseInt(Z,10)));if(pe.type===29){var _e=we.find(function(P){return P.attribute===1});return(0,me.Z)((0,Ce.default)({},_e,{value:Z[_e.controlId]}))||_l("\u672A\u547D\u540D")}};return oe.createElement(N,{className:"flexColumn"},oe.createElement(T.Z,{ref:de,popup:oe.createElement(q,null,oe.createElement(h.Z,{className:"flex dropScrollView",onScrollEnd:function(){!b&&he.length<Ee&&ve({pageIndex:Re+1,keyWords:ue})}},!he.length&&ue&&!b&&oe.createElement(K,{style:{color:"#9e9e9e"}},_l("\u65E0\u5339\u914D\u7ED3\u679C")),!he.length&&!ue&&!b&&oe.createElement(K,{style:{color:"#9e9e9e"}},oe.createElement("i",{className:"icon Icon icon-ic-line Font56 Gray_bd mTop20"}),oe.createElement("div",{className:"mTop10"},_l("\u6682\u65E0\u6570\u636E"))),!!he.length&&oe.createElement("div",{className:"pTop6 pBottom6"},he.map(function(ce,Z){var _e=(0,r.Y4)([9,10,11,28],pe)?Le:Le.map(function(xe){return xe.rowid}),P=_e.includes((0,r.Y4)([9,10,11],pe)?ce.key:(0,r.Y4)([28],pe)?ce:ce.rowid);return oe.createElement("div",{className:E()("recordItem flexRow alignItemsCenter",{isCur:P}),onClick:function(){P||Y(ce)}},oe.createElement("div",{className:"flex WordBreak overflow_ellipsis"},W(ce)),P&&oe.createElement(C.Z,{className:"ThemeColor3 Font18",icon:"ok"}))})),b&&oe.createElement("div",{className:"loadingCon"},oe.createElement(Te.Z,null)))),popupClassName:E()("dropdownTrigger"),action:["focus"],popupVisible:le,onPopupVisibleChange:function(Z){},popupAlign:{points:["tl","bl"],offset:[0,1],overflow:{adjustX:!0,adjustY:!0}}},oe.createElement("div",{className:"w100 Height36"},le&&oe.createElement("div",{className:"cover",onClick:function(){ae({showMenu:!1}),Y()}}),oe.createElement("input",{type:"text",className:"customInput",ref:U,onFocus:function(){ae({showMenu:!0})},autoFocus:!0,onChange:_.debounce(function(){ve({pageIndex:1,keyWords:U.current.value.trim()})},500)}))))}},96121:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>L});var h=t(86735),Te=t(67294),C=t(71893);if(!/^(1887|7596|7798)$/.test(t.j))var Ce=t(15577);var Ne=(0,h.Z)([`
  padding: 5px 8px;
  border-radius: 18px;
`],[`
  padding: 5px 8px;
  border-radius: 18px;
`]),j=C.ZP.span(Ne);function L(I){var k={},e=I.controlInfo.options.find(function(m){return m.key===I.item})||{};if(_.get(I,"controlInfo.enumDefault2")===1){var oe=(0,Ce.eO)(e.color)?"#333":"#fff";k={background:e.color,color:oe}}return Te.createElement(j,{style:k,className:"Font13"},e.value)}},48997:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>r});var h=t(85315),Te=t(15759),C=t(88239),Ce=t(33867),Ne=t(86735),j=t(67294),L=t(71893),I=t(83298),k=t(95742),e=t(48961),oe=t(96121),m=t(93967),y=t.n(m),i=t(96486),me=t(61987),J=t(26358),T=t(89626),te=(0,Ne.Z)([""],[""]),E=L.ZP.div(te);function r(R){var a=R.setting,z=R.onChange,N=R.projectId,q=R.maxCount,K=(0,k.W6)(function(){return j.createElement(Ce.Z,{className:"mRight10 Font16 Gray_9e ThemeHoverColor3 Hand dragHandle",icon:"drag"})}),ye=(0,k.W8)(function(se){var de=(0,j.useRef)(null),U=se.onAdd,pe=se.onDelete,Y=se.items,be=se.item,Q=se.onUpdate,Le=se.num,Be=se.projectId,ke=se.appId,Ie=function(){var Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,ue=arguments[1],we=arguments[2];(0,me.ZP)(de.current,{showMoreInvite:!1,isTask:!1,tabType:ue,appId:ke,includeUndefinedAndMySelf:!1,includeSystemField:!1,offset:{top:4,left:68},zIndex:10001,filterAccountIds:[md.global.Account.accountId,"user-self"],SelectUserSettings:{projectId:Be,unique:!Re,filterResigned:!1,callback:function(b){we(b)}},selectCb:function(b){we(b)}})};return be==="add"?j.createElement(e.Z,(0,C.default)({},se,{currentList:Y,onDelete:pe,onChange:function(Re){Q(Re)}})):j.createElement("div",{className:"flexRow customsortItem alignItemsCenter",ref:de},j.createElement("span",{className:y()("con flexRow flex alignItemsCenter pLeft6 pRight6")},j.createElement(K,null),(0,T.Y4)([9,10,11],se.controlInfo)&&j.createElement("span",{className:"flex WordBreak overflow_ellipsis"},j.createElement(oe.Z,{controlInfo:se.controlInfo,item:be})),(0,T.Y4)([28],se.controlInfo)&&j.createElement("span",{className:"flex"},_l("%0 \u7EA7",parseInt(be,10))),[29].includes(se.controlInfo.type)&&j.createElement("span",{className:"overflow_ellipsis Font13 WordBreak flex"},(be||{}).name||_l("\u672A\u547D\u540D")),(0,T.Y4)([26],se.controlInfo)&&j.createElement("span",{className:"flexRow flex"},j.createElement(Te.Z,{user:{userHead:be.avatar,accountId:be.accountId},projectId:Be,size:28}),j.createElement("span",{className:"overflow_ellipsis Font13 WordBreak flex mLeft10"},(be||{}).fullname||_l("\u672A\u547D\u540D"))),j.createElement(Ce.Z,{className:"Font16 Hand delete mLeft15 deleteLine",icon:"delete2",onClick:function(){pe(be)}})),j.createElement(Ce.Z,{className:y()("Font16 addNext mLeft15 Gray_9e TxtCenter",a.length>=50?"disabled":"Hand ThemeHoverColor3"),icon:"add",onClick:function(){a.length>=50||((0,T.Y4)([26],se.controlInfo)?Ie(!0,(0,J.LU)(se.controlInfo),function(Re){Q(Re,Le)}):U(Le))}}))}),v=(0,k.JN)(function(se){var de=se.items;return j.createElement("div",{className:"sortCustom mTop6"},_.map(de,function(U,pe){return j.createElement(ye,(0,C.default)({item:U},se,{key:"item_"+pe,index:pe,num:pe}))}))});return j.createElement(E,null,j.createElement(v,(0,C.default)({},R,{items:a,useDragHandle:!0,onSortEnd:function(de){var U=de.oldIndex,pe=de.newIndex;return z((0,k.Rp)(a,U,pe))},helperClass:"sortCustomFile",onAdd:function(de){a.splice(de+1,0,"add"),z(a)},onDelete:function(de){return z(a.filter(function(U){return(0,T.Y4)([9,10,11,28],R.controlInfo)?U!==de:(0,T.Y4)([26],R.controlInfo)?U.accountId!==de.accountId:U.rowid!==de.rowid}))},onUpdate:function(de,U){if(!de)z(a.filter(function(be){return be!=="add"}));else if((0,i.isArray)(de)){var pe=a.map(function(be){return be.accountId});a.splice.apply(a,[U+1,0].concat((0,h.Z)(de.filter(function(be){return!pe.includes(be.accountId)})))),z(q?a.slice(0,q):a)}else{var Y=a.map(function(be){if(be==="add"){if([29].includes(R.controlInfo.type)){var Q=((R.controlInfo||{}).relationControls||[]).find(function(Le){return Le.attribute===1});return{rowid:de.rowid,name:(0,I.Z)((0,C.default)({},Q,{value:de[Q.controlId]}))||_l("\u672A\u547D\u540D")}}return(0,T.Y4)([9,10,11],R.controlInfo)?(R.controlInfo.options.find(function(Le){return Le.key===de.key})||{}).key:de}else return be});z(q?Y.slice(0,q):Y)}}})))}},69278:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>R}),!/^(1887|7596|7798)$/.test(t.j))var h=t(69288);if(!/^(1887|7596|7798)$/.test(t.j))var Te=t(54208);var C=t(85315),Ce=t(12424),Ne=t(88239),j=t(86735),L=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var I=t(93002);if(!/^(1887|7596|7798)$/.test(t.j))var k=t(62232);var e=t(71893);if(!/^(1887|7596|7798)$/.test(t.j))var oe=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var m=t(83298);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(48997);if(!/^(1887|7596|7798)$/.test(t.j))var i=t(61987);var me=t(93967),J=t.n(me);if(!/^(1887|7596|7798)$/.test(t.j))var T=t(26358);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(89626);var E=(0,j.Z)([`
  .recordItem {
    height: 36px;
    line-height: 36px;
    padding: 0 12px;
  }
  .reset,
  .clearBtn {
    padding: 6px 12px;
    border-radius: 3px;
    display: inline-block;
    color: #757575;
    &:hover {
      background: #f8f8f8;
      // background: #f5f5f5;
      color: #2196f3;
      &.clearBtn {
        color: red;
      }
    }
  }
  .add {
    padding: 6px 16px;
    background: #f8f8f8;
    border-radius: 3px;
    width: 100px;
    &:hover {
      background: #f5f5f5;
    }
    &.disable {
      cursor: not-allowed;
      &:hover {
        background: #f8f8f8;
      }
    }
  }
`],[`
  .recordItem {
    height: 36px;
    line-height: 36px;
    padding: 0 12px;
  }
  .reset,
  .clearBtn {
    padding: 6px 12px;
    border-radius: 3px;
    display: inline-block;
    color: #757575;
    &:hover {
      background: #f8f8f8;
      // background: #f5f5f5;
      color: #2196f3;
      &.clearBtn {
        color: red;
      }
    }
  }
  .add {
    padding: 6px 16px;
    background: #f8f8f8;
    border-radius: 3px;
    width: 100px;
    &:hover {
      background: #f5f5f5;
    }
    &.disable {
      cursor: not-allowed;
      &:hover {
        background: #f8f8f8;
      }
    }
  }
`]),r=e.ZP.div(E);function R(a){var z=(0,L.useRef)(null),N=a.view,q=a.controlInfo,K=a.title,ye=a.onChange,v=a.onClose,se=a.advancedSettingKey,de=se===void 0?"customitems":se,U=a.description,pe=a.projectId,Y=a.appId,be=a.maxCount,Q=function(_e){try{return JSON.parse(_e),!0}catch(P){return!1}},Le=function(){var _e=(0,k.aq)(N,de)||[];return[29].includes(q.type)?_e.map(function(P){var xe=safeParse(P);return(0,Ne.default)({},xe,{rowid:xe.id})}):(0,te.Y4)([26],q)?_e.map(function(P){var xe=safeParse(P);return(0,Ne.default)({},xe,{accountId:xe.id,fullname:xe.name})}):_e},Be=(0,I.Z)({setting:Le(),list:[],pageIndex:1,keyWords:"",controls:[],count:0,loading:!1}),ke=(0,Ce.Z)(Be,2),Ie=ke[0],he=Ie.setting,Re=Ie.list,ue=Ie.pageIndex,we=Ie.keyWords,Ee=Ie.controls,b=Ie.count,le=Ie.loading,ae=ke[1],ve=function(_e){var P=be?_e.slice(0,be):_e;P=[29].includes(q.type)?P.map(function(xe){var bt=((q||{}).relationControls||[]).find(function(tt){return tt.attribute===1});return{rowid:xe.rowid,name:(0,m.Z)((0,Ne.default)({},bt,{value:xe[bt.controlId]}))||_l("\u672A\u547D\u540D")}}):P,ae({setting:P,loading:!1})},W=function(){if((0,te.Y4)([9,10,11],q)){var _e=q.options.filter(function(tt){return!tt.isDeleted});ve(_e.map(function(tt){return tt.key}))}if((0,te.Y4)([28],q)){var P=new Array(parseInt(_.get(control,["advancedSetting","max"])||"1",10));ve(P)}if(q.type===29){var xe=q.dataSource,bt={worksheetId:xe,viewId:q.viewId,searchType:1,pageSize:50,pageIndex:1,status:1,keyWords:we,isGetWorksheet:!0,getType:7,filterControls:[]};oe.Z.getFilterRows(bt).then(function(tt){ve(tt.data,tt.template?tt.template.controls:[])})}},ce=function(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,P=arguments[1];(0,i.ZP)(z.current,{showMoreInvite:!1,isTask:!1,tabType:P,appId:Y,includeUndefinedAndMySelf:!1,includeSystemField:!1,offset:{top:4,left:-1},zIndex:10001,filterAccountIds:[md.global.Account.accountId,"user-self"],SelectUserSettings:{projectId:pe,unique:!_e,filterResigned:!1,callback:function(bt){var tt=_e?_.uniqBy([].concat((0,C.Z)(he),(0,C.Z)(bt)),"accountId"):bt;ae({setting:be?tt.slice(0,be):tt})}},selectCb:function(bt){var tt=_e?_.uniqBy([].concat((0,C.Z)(he),(0,C.Z)(bt)),"accountId"):bt;ae({setting:be?tt.slice(0,be):tt})}})};return L.createElement(h.Z,{visible:!0,title:L.createElement("span",{className:"Bold"},K||_l("\u81EA\u5B9A\u4E49\u6392\u5E8F")),description:U?L.createElement("span",null,U):void 0,width:480,onCancel:v,className:"subListSortDialog",onOk:function(){ye(he),v()}},L.createElement(r,{className:"flexColumn h100"},L.createElement("div",{className:"head flexRow alignItemsCenter"},L.createElement("div",{className:"num flex"},be?(he.filter(function(Z){return Z!=="add"}).length>be?be:he.filter(function(Z){return Z!=="add"}).length)+"/"+be:he.filter(function(Z){return Z!=="add"}).length>0?he.filter(function(Z){return Z!=="add"}).length:""),L.createElement("div",{className:"act"},![26].includes(q.type)&&be&&L.createElement("span",{className:"reset Hand",onClick:function(){le||(ae({loading:!0}),W())}},he.filter(function(Z){return Z!=="add"}).length<=0?_l("\u6DFB\u52A0\u5168\u90E8"):_l("\u91CD\u7F6E")),he.length>0&&L.createElement("span",{className:"clearBtn Hand mLeft10",onClick:function(){ae({setting:[]})}},_l("\u6E05\u7A7A")))),L.createElement("div",{className:"flex con"},le?L.createElement(Te.Z,null):L.createElement(y.Z,{projectId:a.projectId,appId:a.appId,setting:he,maxCount:be,controls:Ee,onChange:function(_e){ae({setting:_e})},controlInfo:q})),L.createElement("div",{className:""},L.createElement("span",{className:J()("add InlineBlock mTop6 Bold TxtCenter",he.filter(function(Z){return Z!=="add"}).length>=be?"disable Gray_9e":"Hand ThemeColor3"),onClick:function(){he.filter(function(_e){return _e!=="add"}).length>=be||([26].includes(q.type)?ce(!0,(0,T.LU)(q)):ae({setting:he.concat(["add"])}))},ref:z},L.createElement("i",{className:"icon icon-add Font16 mRight5"}),a.addTxt||_l("\u9009\u62E9\u5B57\u6BB5")))))}},19837:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>v}),!/^(1887|7596|7798)$/.test(t.j))var h=t(33867);if(!/^(1887|7596|7798)$/.test(t.j))var Te=t(31546);var C=t(88902),Ce=t.n(C),Ne=t(63239),j=t.n(Ne),L=t(88239),I=t(12424),k=t(86735),e=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var oe=t(99261);if(!/^(1887|7596|7798)$/.test(t.j))var m=t(89014);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(83655);if(!/^(1887|7596|7798)$/.test(t.j))var i=t(58409);var me=t(96486),J=t.n(me);if(!/^(1887|7596|7798)$/.test(t.j))var T=t(93002);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(24380);if(!/^(1887|7596|7798)$/.test(t.j))var E=t(89626);var r=t(93967),R=t.n(r),a=t(71893);if(!/^(1887|7596|7798)$/.test(t.j))var z=t(5913);if(!/^(1887|7596|7798)$/.test(t.j))var N=t(89499);if(!/^(1887|7596|7798)$/.test(t.j))var q=t(62232);var K=(0,k.Z)([`
  font-weight: 400;
`],[`
  font-weight: 400;
`]),ye=a.ZP.div(K);function v(se){var de=se.appId,U=se.view,pe=se.updateCurrentView,Y=se.worksheetControls,be=Y===void 0?[]:Y,Q=se.columns,Le=se.currentSheetInfo,Be=se.sheetSwitchPermit,ke=U.advancedSetting,Ie=ke===void 0?{}:ke,he=U.viewControl,Re=he===void 0?"":he,ue=U.coverCid,we=U.coverType,Ee=Ie.navfilters,b=Ee===void 0?"[]":Ee,le=Ie.opencover,ae=le===void 0?"1":le,ve=(0,T.Z)({type:(be.find(function(tt){return tt.controlId===Re})||{}).type,coverControls:[],viewControlInfo:{},navshow:(be.find(function(tt){return tt.controlId===Re})||{}).type===26?"1":"0"}),W=(0,I.Z)(ve,2),ce=W[0],Z=ce.type,_e=ce.coverControls,P=ce.viewControlInfo,xe=ce.navshow,bt=W[1];return(0,e.useEffect)(function(){var tt=se.view,Dt=se.worksheetControls,vn=Dt===void 0?[]:Dt,Fe=tt.viewControl,Bt=Fe===void 0?"":Fe,kt=vn.find(function(Zn){return Zn.controlId===Bt})||{},Tt=kt.relationControls,tn=Tt===void 0?[]:Tt,Vn=kt.type;bt({type:Vn,viewControlInfo:kt,coverControls:tn.filter(function(Zn){return Zn.type===14&&J().get(Zn,"advancedSetting.hide")!=="1"}).map(function(Zn){return(0,L.default)({},Zn,{value:Zn.controlId,text:Zn.controlName})}),navshow:J().get(tt,"advancedSetting.navshow")})},[se.view]),e.createElement(e.Fragment,null,e.createElement(oe.Z,(0,L.default)({},se,{handleChange:function(Dt){var vn=be.find(function(Bt){return Bt.controlId===Dt})||{},Fe=vn.type===26?"1":"0";bt({navshow:Fe}),pe((0,L.default)({},U,{appId:de,viewControl:Dt,advancedSetting:{navshow:Fe,navfilters:j()([])},controlsSorts:[],displayControls:[],coverCid:"",editAdKeys:["navfilters","navshow"],editAttrs:["viewControl","advancedSetting","displayControls","controlsSorts","coverCid"]}))},className:"mTop6",setDataId:Re,controlList:(0,z.oF)(be.filter(function(tt){return J().includes([27,48,9,10,11,26,29],tt.type)&&!["rowid"].includes(tt.controlId)&&!(0,N.XS)(tt)}),Be),key:"viewControl",addName:"\u8D44\u6E90",title:_l("\u8D44\u6E90")})),!!Re&&![1,2,27,48].includes(Z)&&e.createElement(m.Z,{params:{types:y.d9.filter(function(tt){return[26].includes(Z)?["1","2"].includes(tt.value):tt.value==="1"?[9,10,11,29].includes(Z):[9,10,11,27,48].includes(Z)?tt.value!=="3":!0}),txt:_l("\u663E\u793A\u9879")},value:xe,onChange:function(Dt){pe((0,L.default)({},U,{appId:de,advancedSetting:Dt,editAttrs:["advancedSetting"],editAdKeys:Ce()(Dt)}))},advancedSetting:U.advancedSetting,navfilters:b,filterInfo:{allControls:be,globalSheetInfo:J().pick(Le,["appId","groupId","name","projectId","roleType","worksheetId","switches"]),columns:Q,viewControl:Re}}),[29].includes(Z)&&e.createElement(e.Fragment,null,e.createElement(i.Z,(0,L.default)({},se,{hideShowControlName:!0,downElement:(0,E.PE)(P.relationControls||[]).filter(function(tt){return J().get(tt,"advancedSetting.hide")!=="1"}).length<=0?e.createElement(ye,{className:"Gray_9e pAll15"},_l("\u5173\u8054\u7684\u5DE5\u4F5C\u8868\u4E2D\u6CA1\u6709\u53EF\u9009\u5B57\u6BB5\uFF0C\u8BF7\u5148\u53BB\u6DFB\u52A0\u4E00\u4E2A"),e.createElement("span",{className:"ThemeColor3 Hand",onClick:function(){(0,q.OW)({sourceId:P.dataSource,fromURL:"/app/"+de+"/"+Le.groupId+"/"+Le.worksheetId+"/"+U.viewId},!1)}},_l("\u7ACB\u5373\u524D\u5F80"))):null,worksheetControls:(P.relationControls||[]).filter(function(tt){return J().get(tt,"advancedSetting.hide")!=="1"}),handleChangeSort:function(Dt){var vn=Dt.newControlSorts,Fe=Dt.newShowControls;pe((0,L.default)({},U,{appId:de,controlsSorts:vn,displayControls:Fe,editAttrs:["displayControls","controlsSorts"]}))}})),e.createElement("div",{className:"settingContent mTop24 flexRow"},e.createElement("div",{className:"flex"},e.createElement("div",{className:"subTitle Font13 bold"},_l("\u5C01\u9762")),e.createElement(Te.Z,{data:_e.concat({value:"notDisplay",text:_l("\u4E0D\u663E\u793A")}),value:ue||"notDisplay",className:R()("mTop8",{isDelete:!!ue&&!_e.find(function(tt){return tt.value===ue})}),border:!0,style:{width:"100%"},onChange:function(Dt){pe((0,L.default)({},U,{appId:de,coverCid:Dt==="notDisplay"?"":Dt,editAttrs:["coverCid"]}))},placeholder:ue&&!_e.find(function(tt){return tt.value===ue})?_l("\u63A7\u4EF6\u5DF2\u5220\u9664\uFF0C\u8BF7\u91CD\u65B0\u914D\u7F6E"):_l("\u4E0D\u663E\u793A")}),e.createElement("div",{className:"configSwitch mTop10"},e.createElement(te.Y,{className:"flexRow alignItemsCenter"},e.createElement(h.Z,{icon:ae==="1"?"ic_toggle_on":"ic_toggle_off",className:"Font28 Hand",onClick:function(){pe((0,L.default)({},U,{appId:de,advancedSetting:{opencover:ae==="2"?"1":"2"},editAdKeys:["opencover"],editAttrs:["advancedSetting"]}))}}),e.createElement("div",{className:"switchText InlineBlock Normal mLeft10"},_l("\u5141\u8BB8\u70B9\u51FB\u67E5\u770B"))))),e.createElement("div",{className:"flex mLeft12"},e.createElement("div",{className:"bold"},_l("\u663E\u793A\u65B9\u5F0F")),e.createElement(Te.Z,{className:"mTop8",disabled:!ue,style:{width:"100%"},data:E.D9.filter(function(tt){return[0,1].includes(tt.value)}),value:we,border:!0,onChange:function(Dt){we!==Dt&&pe((0,L.default)({},U,{appId:de,coverType:Dt,editAttrs:["coverType"]}))}})))))}},89014:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>se}),!/^(1887|7596|7798)$/.test(t.j))var h=t(70264);if(!/^(1887|7596|7798)$/.test(t.j))var Te=t(33867);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(31546);var Ce=t(63239),Ne=t.n(Ce),j=t(88239),L=t(12424),I=t(86735),k=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var e=t(93002);var oe=t(71893);if(!/^(1887|7596|7798)$/.test(t.j))var m=t(68111);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(57296);if(!/^(1887|7596|7798)$/.test(t.j))var i=t(77632);if(!/^(1887|7596|7798)$/.test(t.j))var me=t(45231);var J=t(96486),T=t.n(J);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(31742);if(!/^(1887|7596|7798)$/.test(t.j))var E=t(76345);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(36574);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(69278);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(57467);var z=t(93967),N=t.n(z),q=(0,I.Z)([`
  .icon-rename_input {
    color: #9e9e9e;
    padding-right: 10px;
    &:hover {
      color: #2196f3;
    }
  }
  .Dropdown {
    width: 100%;
    display: flex;
    line-height: 36px;
    height: 36px;
    opacity: 1;
    background: #ffffff;
    border-radius: 4px;
    margin: 8px 0;
    box-sizing: border-box;
    .actionIcon {
      width: 13px;
    }
    & > div {
      flex: 1;
    }
    .Dropdown--input {
      padding: 0 12px 0 12px !important;
      width: 100%;
      display: flex;
      border: 1px solid #dddddd;
      border-radius: 4px;
      height: 36px;
      &.active {
        border: 1px solid #2196f3;
      }
      .value,
      .Dropdown--placeholder {
        flex: 1;
        max-width: 100% !important;
      }
      .Icon {
        line-height: 34px;
      }
      .List {
        width: 100%;
        top: 104% !important;
      }
    }
  }
  .navInputWrap {
    min-height: 36px !important;
  }
  .RelateRecordDropdown-selected,
  .ant-select {
    min-height: 36px !important;
    line-height: 34px !important;
    .normalSelectedItem {
      line-height: 34px !important;
    }
  }
  .RelateRecordDropdown-selected .clearIcon,
  .RelateRecordDropdown-selected .dropIcon {
    font-size: 14px;
    margin: 11px 12px 0;
  }
  .customAntDropdownTitle,
  .customAntDropdownTitleWithBG {
    height: 26px;
    line-height: 26px;
    .icon-close {
      line-height: 26px !important;
    }
  }
  .ant-select:hover {
    border-color: #dddddd !important;
  }
  .ant-select-arrow {
    color: #9e9e9e !important;
  }
  .RelateRecordDropdown-selected:not(.active) {
    border-color: #ddd !important;
  }
`],[`
  .icon-rename_input {
    color: #9e9e9e;
    padding-right: 10px;
    &:hover {
      color: #2196f3;
    }
  }
  .Dropdown {
    width: 100%;
    display: flex;
    line-height: 36px;
    height: 36px;
    opacity: 1;
    background: #ffffff;
    border-radius: 4px;
    margin: 8px 0;
    box-sizing: border-box;
    .actionIcon {
      width: 13px;
    }
    & > div {
      flex: 1;
    }
    .Dropdown--input {
      padding: 0 12px 0 12px !important;
      width: 100%;
      display: flex;
      border: 1px solid #dddddd;
      border-radius: 4px;
      height: 36px;
      &.active {
        border: 1px solid #2196f3;
      }
      .value,
      .Dropdown--placeholder {
        flex: 1;
        max-width: 100% !important;
      }
      .Icon {
        line-height: 34px;
      }
      .List {
        width: 100%;
        top: 104% !important;
      }
    }
  }
  .navInputWrap {
    min-height: 36px !important;
  }
  .RelateRecordDropdown-selected,
  .ant-select {
    min-height: 36px !important;
    line-height: 34px !important;
    .normalSelectedItem {
      line-height: 34px !important;
    }
  }
  .RelateRecordDropdown-selected .clearIcon,
  .RelateRecordDropdown-selected .dropIcon {
    font-size: 14px;
    margin: 11px 12px 0;
  }
  .customAntDropdownTitle,
  .customAntDropdownTitleWithBG {
    height: 26px;
    line-height: 26px;
    .icon-close {
      line-height: 26px !important;
    }
  }
  .ant-select:hover {
    border-color: #dddddd !important;
  }
  .ant-select-arrow {
    color: #9e9e9e !important;
  }
  .RelateRecordDropdown-selected:not(.active) {
    border-color: #ddd !important;
  }
`]),K=(0,I.Z)([`
  .switchText {
    margin-right: 6px;
    line-height: 24px;
  }
  .icon {
    vertical-align: middle;
    &-ic_toggle_on {
      color: #00c345;
    }
    &-ic_toggle_off {
      color: #bdbdbd;
    }
  }
`],[`
  .switchText {
    margin-right: 6px;
    line-height: 24px;
  }
  .icon {
    vertical-align: middle;
    &-ic_toggle_on {
      color: #00c345;
    }
    &-ic_toggle_off {
      color: #bdbdbd;
    }
  }
`]),ye=oe.ZP.div(q),v=oe.ZP.div(K);function se(de){var U=de.params,pe=de.onChange,Y=de.value,be=Y===void 0?"0":Y,Q=de.filterInfo,Le=Q===void 0?{}:Q,Be=de.advancedSetting,ke=Be===void 0?{}:Be,Ie=de.canShowNull,he=de.canShowAll,Re=de.fromCondition,ue=(0,e.Z)({filterVisible:!1,filters:[],relateControls:ae,data:{},showSysWorkflow:!0,showChangeName:!1,showName:"",loading:!1,showCustom:!1}),we=(0,L.Z)(ue,2),Ee=we[0],b=Ee.filterVisible,le=Ee.filters,ae=Ee.relateControls,ve=Ee.data,W=Ee.showSysWorkflow,ce=Ee.showChangeName,Z=Ee.showName,_e=Ee.loading,P=Ee.showCustom,xe=we[1];(0,k.useEffect)(function(){var tt=[];try{tt=JSON.parse(de.navfilters)}catch(kt){tt=[]}xe({filters:tt});var Dt=Le.columns,vn=Dt===void 0?[]:Dt,Fe=Le.viewControl,Bt=Le.relateControls;Bt&&xe({relateControls:Bt}),xe({data:vn.find(function(kt){return kt.controlId===Fe})||{}}),(0,te.v)(E.RX.sysControlSwitch,T().get(Le,"globalSheetInfo.switches")||[])||xe({showSysWorkflow:!1})},[de]),(0,k.useEffect)(function(){if(be==="3"){if(!ve.dataSource)return;var tt=Le.relateControls;tt?xe({relateControls:tt}):me.Z.getWorksheetInfo({worksheetId:ve.dataSource,getViews:!0,getTemplate:!0,relationWorksheetId:T().get(de,"filterInfo.globalSheetInfo.worksheetId")}).then(function(Dt){xe({relateControls:T().get(Dt,["template","controls"])||[],loading:!1})})}},[be,Le,ve]);var bt=function(Dt){var vn=Dt.navfilters;pe(vn?Dt:(0,j.default)({},Dt,{navfilters:be==="3"?Ne()(le.map(function(Fe){return(0,i.gC)(Fe)})):Ne()(le.map(function(Fe){return[19,23,24,26,27,29,35,48].includes(ve.type)&&be==="2"?safeParse(Fe).id:Fe}))}))};return k.createElement(ye,null,U.txt&&k.createElement("div",{className:"title mTop30 Gray Bold"},U.txt),k.createElement(C.Z,{data:Le.viewControl==="wfstatus"&&!W?U.types.filter(function(tt){return tt.value==="0"}):U.types,value:Le.viewControl==="wfstatus"&&!W?"0":be||"0",className:"flex settingContent mBottom0",onChange:function(Dt){bt({navshow:Dt,navfilters:Ne()([])}),xe({filters:[]}),setTimeout(function(){Dt==="3"&&xe({filterVisible:!0})},500)}}),(be==="2"||le.length>0&&be==="3"&&!_e)&&k.createElement("div",{className:"mTop12"}),be==="2"&&k.createElement(a.Y$,{className:"pointer flexRow",onClick:function(){return xe({showCustom:!0})}},k.createElement("div",{className:N()("overflow_ellipsis flex",le.length<=0?"Gray_75":"Gray")},le.length<=0?_l("\u8BBE\u7F6E\u6307\u5B9A\u9879"):_l("\u9009\u4E2D%0\u4E2A",le.length)),k.createElement("div",{className:"edit"},k.createElement("i",{className:"icon-edit"}))),P&&k.createElement(R.Z,(0,j.default)({},de,{view:{advancedSetting:ke},projectId:T().get(Le,"globalSheetInfo.projectId"),appId:T().get(Le,"globalSheetInfo.appId"),controlInfo:ve,title:_l("\u8BBE\u7F6E\u663E\u793A\u9879"),advancedSettingKey:"navfilters",onChange:function(Dt){var vn=[];switch(ve.type){case 29:vn=Dt.map(function(Fe){return Fe.rowid});break;case 26:vn=Dt.map(function(Fe){return Fe.accountId});break;default:vn=Dt;break}pe({navfilters:Ne()(vn)})},onClose:function(){xe({showCustom:!1})},addTxt:_l("\u663E\u793A\u9879")})),b&&be==="3"&&!_e&&k.createElement(m.Z,{data:ve,overlayClosable:!1,relationControls:ae||[],title:"\u7B5B\u9009",filters:le,allControls:Le.allControls,globalSheetInfo:Le.globalSheetInfo,globalSheetControls:Le.globalSheetControls,onChange:function(Dt){var vn=Dt.filters;bt({navfilters:Ne()(vn.map(i.gC))}),xe({filterVisible:!1})},fromCondition:Re,onClose:function(){return xe({filterVisible:!1})}}),le.length>0&&be==="3"&&!_e&&k.createElement(y.Z,{fromCondition:Re,className:"mBottom0",data:ve,filters:le,loading:!1,globalSheetControls:Le.globalSheetControls,globalSheetInfo:Le.globalSheetInfo,controls:ae||[],allControls:Le.allControls,editFn:function(){return xe({filterVisible:!0})}}),he&&k.createElement("div",{className:"flexRow alignItemsCenter"},k.createElement(v,{className:"flex"},k.createElement(Te.Z,{icon:ke.showallitem!=="1"?"ic_toggle_on":"ic_toggle_off",className:"Font28 Hand",onClick:function(){bt({showallitem:ke.showallitem==="1"?"":"1"})}}),k.createElement("div",{className:"switchText InlineBlock Normal mLeft12 mTop8"},_l("\u663E\u793A\u201C\u5168\u90E8\u201D\u9879"))),k.createElement(h.Z,{text:k.createElement("span",null,_l("\u91CD\u547D\u540D")),popupPlacement:"top"},k.createElement("i",{className:"icon-rename_input Font18 mLeft3 TxtMiddle Hand",onClick:function(){xe({showChangeName:!0,showName:"showallitem"})}}))),Ie&&k.createElement("div",{className:"flexRow alignItemsCenter"},k.createElement(v,{className:"flex"},k.createElement(Te.Z,{icon:ke.shownullitem==="1"?"ic_toggle_on":"ic_toggle_off",className:"Font28 Hand",onClick:function(){bt({shownullitem:ke.shownullitem==="1"?"":"1"})}}),k.createElement("div",{className:"switchText InlineBlock Normal mLeft12 mTop8"},_l("\u663E\u793A\u201C\u7A7A\u201D\u9879"))),k.createElement(h.Z,{text:k.createElement("span",null,_l("\u91CD\u547D\u540D")),popupPlacement:"top"},k.createElement("i",{className:"icon-rename_input Font18 mLeft3 TxtMiddle Hand",onClick:function(){xe({showChangeName:!0,showName:"shownullitem"})}}))),ce&&k.createElement(r.Z,{onChange:function(Dt){bt(Z!=="shownullitem"?{allitemname:Dt.trim()}:{nullitemname:Dt.trim()}),xe({showChangeName:!1,showName:""})},name:Z!=="shownullitem"?ke.allitemname:ke.nullitemname,onCancel:function(){xe({showChangeName:!1,showName:""})}}))}},83655:(wn,gt,t)=>{"use strict";t.d(gt,{$J:()=>i,Gx:()=>Ce,WL:()=>m,d9:()=>j,e6:()=>oe,gV:()=>me,zh:()=>y});var h=t(88106),Te=t(88239),C=/^(1887|7596|7798)$/.test(t.j)?null:[9,10,11,29,35],Ce=function(T,te){if(C.includes(T.type))if(T.type===29){if(te!==T.dataSource)return!0}else return!0},Ne=[{text:_l("\u5347\u5E8F"),value:!0},{text:_l("\u964D\u5E8F"),value:!1}],j=[{text:_l("\u5168\u90E8"),value:"0"},{text:_l("\u663E\u793A\u6709\u6570\u636E\u7684\u9879"),value:"1"},{text:_l("\u663E\u793A\u6307\u5B9A\u9879"),value:"2"},{text:_l("\u663E\u793A\u6EE1\u8DB3\u7B5B\u9009\u6761\u4EF6\u7684\u9879"),value:"3"}],L={data:[{key:"navshow",types:j.filter(function(J){return J.value!=="3"}),txt:"\u663E\u793A\u9879",default:"0"},{key:"isAsc",types:Ne,txt:"\u6392\u5E8F\u65B9\u5F0F",default:!0}],keys:[11,10,9]},I=[{text:_l("\u662F"),value:24},{text:_l("\u5C5E\u4E8E"),value:11}],k={keys:[29],data:[{key:"viewId",txt:"\u5C42\u7EA7\u89C6\u56FE",des:"\u5F53\u524D\u9009\u62E9\u4E3A\u5173\u8054\u8BB0\u5F55\u5B57\u6BB5\uFF0C\u53EF\u4EE5\u7EE7\u7EED\u9009\u62E9\u5173\u8054\u8868\u4E2D\u7684\u5C42\u7EA7\u89C6\u56FE\u751F\u6210\u6811\u72B6\u5BFC\u822A"},{key:"filterType",types:I,txt:"\u7B5B\u9009\u65B9\u5F0F",default:11},{key:"navshow",types:j,txt:"\u663E\u793A\u9879",default:"0"}]},e={keys:[35],data:[{key:"filterType",types:I,txt:"\u7B5B\u9009\u65B9\u5F0F",default:11}]},oe=function(T){var te=T.controlId,E=te===void 0?"":te,r=T.type,R={controlId:E,dataType:r},a={};return[L,k,e].map(function(z){z.keys.includes(r)&&z.data.map(function(N){a=(0,Te.default)({},a,(0,h.default)({},N.key,N.default))})}),(0,Te.default)({},R,a)},m=function(T){var te=[];return T&&[L,k,e].map(function(E){E.keys.includes(T)&&E.data.map(function(r){te.push({txt:r.txt,des:r.des,types:r.types,key:r.key})})}),te},y=[{text:_l("\u6A2A\u5411\u663E\u793A"),value:"0",icon:"icon-horizontal"},{text:_l("\u7AD6\u5411\u663E\u793A"),value:"1",icon:"icon-vertically"},{text:_l("\u6DF7\u5408\u663E\u793A"),value:"2",icon:"icon-mix"}],i=[{text:_l("\u66F2\u7EBF"),value:"0"},{text:_l("\u76F4\u7EBF"),value:"1"}],me=[{text:_l("2\u7EA7"),value:"2"},{text:_l("3\u7EA7"),value:"3"},{text:_l("4\u7EA7"),value:"4"},{text:_l("5\u7EA7"),value:"5"},{text:_l("6\u7EA7"),value:"6"},{text:_l("7\u7EA7"),value:"7"},{text:_l("8\u7EA7"),value:"8"},{text:_l("9\u7EA7"),value:"9"},{text:_l("10\u7EA7"),value:"10"}]},24380:(wn,gt,t)=>{"use strict";t.d(gt,{Y:()=>Ce});var h=t(86735),Te=t(71893),C=(0,h.Z)([`
  display: inline-block;
  .switchText {
    margin-right: 6px;
    line-height: 24px;
  }
  .icon {
    vertical-align: middle;
    &-ic_toggle_on {
      color: #00c345;
    }
    &-ic_toggle_off {
      color: #bdbdbd;
    }
  }
`],[`
  display: inline-block;
  .switchText {
    margin-right: 6px;
    line-height: 24px;
  }
  .icon {
    vertical-align: middle;
    &-ic_toggle_on {
      color: #00c345;
    }
    &-ic_toggle_off {
      color: #bdbdbd;
    }
  }
`]),Ce=Te.ZP.div(C)},78618:(wn,gt,t)=>{"use strict";t.d(gt,{AV:()=>j,Dv:()=>Ce,Hv:()=>C,Li:()=>Te,ax:()=>I,h6:()=>L,jS:()=>h,sY:()=>Ne});var h=[{type:"Setting",name:_l("\u89C6\u56FE\u8BBE\u7F6E"),icon:"view_eye"},{type:"Show",name:_l("\u663E\u793A\u5217"),icon:"tune_new"},{type:"Filter",name:_l("\u8FC7\u6EE4"),icon:"worksheet_filter"},{type:"Sort",name:_l("\u6392\u5E8F%05028"),icon:"folder-sort"},{type:"Controls",name:_l("\u5B57\u6BB5"),icon:"visibility"},{type:"FastFilter",name:_l("\u5FEB\u901F\u7B5B\u9009"),icon:"smart_button_black_24dp"},{type:"NavGroup",name:_l("\u7B5B\u9009\u5217\u8868"),icon:"list"},{type:"RecordColor",name:_l("\u989C\u8272"),icon:"background_color"},{type:"ActionSet",name:_l("\u81EA\u5B9A\u4E49\u52A8\u4F5C"),icon:"custom_actions"},{type:"MobileSet",name:_l("\u79FB\u52A8\u7AEF\u663E\u793A"),icon:"phone"},{type:"urlParams",name:_l("\u94FE\u63A5\u53C2\u6570"),icon:"global_variable"},{type:"PluginSettings",name:_l("\u63D2\u4EF6\u8BBE\u7F6E"),icon:"configure"},{type:"DebugConfig",name:_l("\u5F00\u53D1\u8C03\u8BD5"),icon:"worksheet_API"},{type:"ParameterSet",name:_l("\u53C2\u6570\u6620\u5C04"),icon:"view_eye"},{type:"Submit",name:_l("\u63D0\u4EA4%05036"),icon:"airplane"}],Te=["PluginSettings","DebugConfig","ParameterSet","Submit"],C=[{name:"base",list:["Setting","Show"]},{name:"set",list:["Filter","Sort","RecordColor","Controls"]},{name:"action",list:["FastFilter","NavGroup","ActionSet"]},{name:"other",list:["MobileSet","urlParams"]}],Ce=[{key:"showno",txt:_l("\u663E\u793A\u5E8F\u53F7")},{key:"showquick",txt:_l("\u663E\u793A\u8BB0\u5F55\u5FEB\u6377\u65B9\u5F0F"),tips:_l("\u5728\u8BB0\u5F55\u524D\u663E\u793A\u201C\u66F4\u591A\u201D\u56FE\u6807\uFF0C\u70B9\u51FB\u540E\u53EF\u4EE5\u5728\u4E0B\u62C9\u83DC\u5355\u4E2D\u8FDB\u884C\u8BB0\u5F55\u64CD\u4F5C\u3002")},{key:"showsummary",txt:_l("\u663E\u793A\u6C47\u603B\u884C")},{key:"showvertical",txt:_l("\u663E\u793A\u5782\u76F4\u8868\u683C\u7EBF")},{key:"alternatecolor",txt:_l("\u663E\u793A\u4EA4\u66FF\u884C\u989C\u8272")},{key:"titlewrap",txt:_l("\u6807\u9898\u884C\u6587\u5B57\u6362\u884C")}],Ne=500,j=100,L=200,I=32},92899:(wn,gt,t)=>{"use strict";t.d(gt,{$b:()=>I,Y3:()=>j,_s:()=>L});var h=t(86735),Te=t(71893),C=(0,h.Z)([`
  .switchText {
    margin-right: 6px;
    line-height: 24px;
  }
  .icon {
    vertical-align: middle;
    &-ic_toggle_on {
      color: #00c345;
    }
    &-ic_toggle_off {
      color: #bdbdbd;
    }
  }
  .w30 {
    width: 30px;
  }
`],[`
  .switchText {
    margin-right: 6px;
    line-height: 24px;
  }
  .icon {
    vertical-align: middle;
    &-ic_toggle_on {
      color: #00c345;
    }
    &-ic_toggle_off {
      color: #bdbdbd;
    }
  }
  .w30 {
    width: 30px;
  }
`]),Ce=(0,h.Z)([`
  margin-top: 6px;
  .timeDropdown {
    width: 100%;
    .ant-select-selector {
      border-radius: 3px;
      line-height: 36px;
      height: 36px !important;
      span {
        line-height: 36px;
        height: 36px;
        font-size: 13px;
      }
    }
  }
`],[`
  margin-top: 6px;
  .timeDropdown {
    width: 100%;
    .ant-select-selector {
      border-radius: 3px;
      line-height: 36px;
      height: 36px !important;
      span {
        line-height: 36px;
        height: 36px;
        font-size: 13px;
      }
    }
  }
`]),Ne=(0,h.Z)([`
  .hiddenDaysBox {
    margin-left: 26px;
    display: flex;
    li {
      flex: 1;
      height: 36px;
      display: inline-block;
      box-sizing: border-box;
      text-align: center;
      cursor: pointer;
      line-height: 36px;
      border: 1px solid #e0e0e0;
      overflow: hidden;
      margin-right: -1px;
      position: relative;
      &:last-child {
        border-radius: 0 3px 3px 0;
        overflow: hidden;
      }
      &:first-child {
        border-radius: 3px 0px 0px 3px;
        overflow: hidden;
      }
      &.checked {
        background: #2196f3;
        color: #fff;
        border-top: 1px solid #2196f3;
        border-bottom: 1px solid #2196f3;
        z-index: 1;
        &:last-child {
          border-right: 1px solid #2196f3;
        }
        &:first-child {
          border-left: 1px solid #2196f3;
        }
      }
    }
  }
`],[`
  .hiddenDaysBox {
    margin-left: 26px;
    display: flex;
    li {
      flex: 1;
      height: 36px;
      display: inline-block;
      box-sizing: border-box;
      text-align: center;
      cursor: pointer;
      line-height: 36px;
      border: 1px solid #e0e0e0;
      overflow: hidden;
      margin-right: -1px;
      position: relative;
      &:last-child {
        border-radius: 0 3px 3px 0;
        overflow: hidden;
      }
      &:first-child {
        border-radius: 3px 0px 0px 3px;
        overflow: hidden;
      }
      &.checked {
        background: #2196f3;
        color: #fff;
        border-top: 1px solid #2196f3;
        border-bottom: 1px solid #2196f3;
        z-index: 1;
        &:last-child {
          border-right: 1px solid #2196f3;
        }
        &:first-child {
          border-left: 1px solid #2196f3;
        }
      }
    }
  }
`]),j=Te.ZP.div(C),L=Te.ZP.div(Ce),I=Te.ZP.div(Ne)},82500:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>se});var h=t(79221),Te=t(12424),C=t(88902),Ce=t.n(C),Ne=t(86735),j=t(67294),L=t(71893),I=t(31742),k=t(76345),e=t(62232),oe=t(86674),m=t(24236),y=t(70455),i=(0,Ne.Z)([`
  padding: 0 6px 6px;
  overflow-y: auto;
  overflow-x: hidden;
`],[`
  padding: 0 6px 6px;
  overflow-y: auto;
  overflow-x: hidden;
`]),me=L.ZP.div(i);function J(de){var U=de.maxHeight,pe=U===void 0?450:U,Y=de.isCharge,be=de.controls,Q=de.filters,Le=de.addFilter,Be=de.activeFilter,ke=de.filterAddConditionControls,Ie=de.onSortEnd,he=de.onEditFilter,Re=de.onCopy,ue=de.onToggleFilterType,we=de.onDelete,Ee=de.triggerFilter,b=de.onHideFilterPopup,le=!Q.length,ae=Q.filter(function(W){return W.type===1}),ve=Q.filter(function(W){return W.type===2});return j.createElement(me,{style:{maxHeight:pe-48}},le&&j.createElement(m.Z,{onAdd:Le}),!le&&j.createElement(j.Fragment,null,!!ae.length&&j.createElement(y.Z,{activeFilter:Be,isCharge:Y,title:"\u4E2A\u4EBA",controls:be,filters:ae,filterAddConditionControls:ke,onEditFilter:he,onSortEnd:function(ce){Ie(ce.concat(ve.map(function(Z){return Z.id})))},onCopy:Re,onDelete:we,onToggleFilterType:ue,triggerFilter:Ee,onHideFilterPopup:b}),!!ve.length&&j.createElement(y.Z,{activeFilter:Be,isCharge:Y,title:"\u516C\u5171",controls:be,filters:ve,filterAddConditionControls:ke,onEditFilter:he,onSortEnd:function(ce){Ie(ae.map(function(Z){return Z.id}).concat(ce))},onCopy:Re,onDelete:we,onToggleFilterType:ue,triggerFilter:Ee,onHideFilterPopup:b})))}var T=t(74780),te=t(26358),E=t(67776),r=t(44253),R=t(96486),a=t.n(R),z=(0,Ne.Z)([`
  width: 480px;
  border-radius: 4px;
  background: #ffffff;
  box-shadow: 0px 4px 16px 1px rgba(0, 0, 0, 0.24);
  padding: 16px 0 0;
`],[`
  width: 480px;
  border-radius: 4px;
  background: #ffffff;
  box-shadow: 0px 4px 16px 1px rgba(0, 0, 0, 0.24);
  padding: 16px 0 0;
`]),N=(0,Ne.Z)([`
  margin-bottom: 28px;
  padding: 4px;
  font-weight: bold;
  background: #ebebeb;
  margin: 0 auto;
  border-radius: 32px;
  width: 187px;
  > span {
    cursor: pointer;
    height: 24px;
    line-height: 24px;
    border-radius: 24px;
    color: #757575;
    width: 50%;
    text-align: center;
    display: inline-block;
    &.active {
      color: #2196f3;
      background: #ffffff;
    }
    &:hover {
      color: #2196f3;
    }
  }
`],[`
  margin-bottom: 28px;
  padding: 4px;
  font-weight: bold;
  background: #ebebeb;
  margin: 0 auto;
  border-radius: 32px;
  width: 187px;
  > span {
    cursor: pointer;
    height: 24px;
    line-height: 24px;
    border-radius: 24px;
    color: #757575;
    width: 50%;
    text-align: center;
    display: inline-block;
    &.active {
      color: #2196f3;
      background: #ffffff;
    }
    &:hover {
      color: #2196f3;
    }
  }
`]),q=L.ZP.div(z),K=L.ZP.div(N),ye=[{name:_l("\u65B0\u7684\u7B5B\u9009"),type:1},{name:_l("\u5DF2\u4FDD\u5B58"),type:2}];function v(de,U){var pe=de.maxHeight,Y=pe===void 0?543:pe,be=de.supportGroup,Q=be===void 0?!0:be,Le=de.projectId,Be=de.appId,ke=de.viewId,Ie=de.worksheetId,he=de.isCharge,Re=de.columns,ue=de.sheetSwitchPermit,we=ue===void 0?{}:ue,Ee=de.state,b=Ee===void 0?{}:Ee,le=de.actions,ae=le===void 0?{}:le,ve=de.onHideFilterPopup,W=ve===void 0?function(){}:ve,ce=de.onChange,Z=ce===void 0?function(){}:ce,_e=de.filterResigned,P=_e===void 0?!0:_e,xe=de.appPkg,bt=(0,j.useRef)(),tt=(0,j.useRef)({}),Dt={projectId:Le,appId:Be,worksheetId:Ie,isCharge:he},vn=a().flatten(Ce()(r.Cz).map(function(mt){return r.Cz[mt].keys})),Fe=(0,I.v)(k.RX.sysControlSwitch,we,ke),Bt=Re.filter(function(mt){return md.global.Account.isPortal?!a().includes(["ownerid","caid","uaid"],mt.controlId):!0}).filter(function(mt){return(mt.controlPermissions||"111")[0]==="1"}).map(te.BM).filter(function(mt){return a().includes(vn,mt.type)}).filter(function(mt){return!(mt.type===38&&mt.enumDefault===3)}).sort(function(mt,vt){return mt.row*10+mt.col>vt.row*10+vt.col?1:-1}),kt=b.loading,Tt=b.filters,tn=b.editingFilter,Vn=b.activeFilter,Zn=b.needSave,Ot=b.nameIsUpdated,$t=ae.editFilter,cn=ae.copyFilter,Mn=ae.loadFilters,dt=ae.addFilter,$e=ae.addCondition,jt=ae.deleteFilter,rn=ae.toggleFilterType,Rt=ae.setActiveFilter,St=ae.sortFilters,zt=(0,j.useState)(function(){var mt=localStorage.getItem("worksheetFilters_activeTab");return mt==="2"?2:1}()),oa=(0,Te.Z)(zt,2),qn=oa[0],In=oa[1],Vt=!!tn&&!/^new/.test(tn.id),Yt=!!tn&&/^new/.test(tn.id),qt=tn&&a().isEmpty(tn.conditions)&&!a().some(tn.conditionsGroups.map(function(mt){return mt.conditions.length}));function rt(mt){In(mt),localStorage.setItem("worksheetFilters_activeTab",mt)}function Qe(mt){return(0,e.UX)(Fe?mt:mt.filter(function(vt){return!a().find(oe._Q,{controlId:vt.controlId})}))}function ht(mt){var vt=(0,E.xx)(mt),Xt=a().isEmpty(mt.conditionsGroups.filter(function(bn){return bn.conditions.length}));(vt&&!a().isEmpty(vt)||Xt)&&Z({filterControls:vt})}function Lt(mt){Rt(mt),ht(mt)}function Ct(){dt(),setTimeout(function(){bt.current&&bt.current.querySelector(".addFilterCondition > span").click()},80)}return(0,j.useEffect)(function(){Mn(Ie,function(mt){!a().isEmpty(mt)&&!tt.current.callFromColumn&&rt(2)})},[]),(0,j.useEffect)(function(){b.editingFilter&&ht(b.editingFilter)},[b.editingFilterVersion]),(0,j.useEffect)(function(){Yt&&!(0,R.get)(tt,"current.editingFilter")&&b.editingFilter&&(0,R.includes)([14,36],a().get(b,"editingFilter.conditionsGroups.0.conditions.0.control.type"))&&ht(b.editingFilter),tt.current.editingFilter=b.editingFilter},[b.editingFilter]),(0,j.useImperativeHandle)(U,function(){return{addFilterByControl:function(vt){tt.current.callFromColumn=!0,rt(1),Yt?$e(vt,tn.conditionsGroups.length-1):dt({defaultCondition:(0,te.z$)(vt)})}}}),j.createElement(q,{ref:bt},!Vt&&j.createElement(K,null,ye.map(function(mt){return j.createElement("span",{className:qn===mt.type?"active":"",onClick:function(){rt(mt.type)}},mt.name)})),kt?j.createElement("div",{style:{padding:10}},j.createElement(h.Z,{style:{flex:1},direction:"column",widths:["30%","40%","90%","60%"],active:!0,itemStyle:{marginBottom:"10px"}})):j.createElement(j.Fragment,null,qn===1&&j.createElement(j.Fragment,null,Yt&&!qt&&j.createElement(T.Z,{maxHeight:Y,canEdit:!0,supportGroup:!0,hideSave:!(0,E.xx)(tn).length,base:Dt,filter:tn,actions:ae,controls:Bt,setActiveTab:rt,onBack:function(){return $t(void 0)},onAddCondition:function(){Rt(tn)},handleTriggerFilter:Lt,filterResigned:P,filterAddConditionControls:Qe}),(!tn||qt)&&j.createElement(m.Z,{isNew:!0,maxHeight:Y,controls:Qe(Bt),onAdd:function(vt){dt({defaultCondition:(0,te.z$)(vt)})}})),qn===2&&j.createElement(j.Fragment,null,!Vt&&j.createElement(J,{maxHeight:Y,isCharge:he,controls:Bt,filters:Tt,activeFilter:Vn,filterAddConditionControls:Qe,triggerFilter:function(vt){$t(void 0),Lt(vt)},addFilter:function(){rt(1),Ct()},onEditFilter:function(vt){$t(vt),(!Vn||Vn.id!==vt.id)&&Lt(vt)},onCopy:function(vt){return cn({appId:Be,worksheetId:Ie,filter:vt,isCharge:he})},onDelete:function(vt){return jt({appId:Be,filter:vt})},onToggleFilterType:function(vt){return rn({appId:Be,worksheetId:Ie,filter:vt,isCharge:he})},onHideFilterPopup:W,onSortEnd:function(vt){St(Be,Ie,vt)}}),Vt&&j.createElement(T.Z,{maxHeight:Y,supportGroup:!0,nameIsUpdated:Ot,needSave:Zn,base:Dt,filter:tn,actions:ae,controls:Bt,setActiveTab:rt,onBack:function(vt){if(vt){var Xt=a().find(Tt,function(bn){return bn.id===tn.id});Xt&&Lt(Xt)}$t(void 0)},handleTriggerFilter:Lt,filterResigned:P,filterAddConditionControls:Qe}))))}const se=(0,j.forwardRef)(v)},30801:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>R});var h=t(88239),Te=t(12424),C=t(42723),Ce=t(86735),Ne=t(67294),j=t(29314),L=t(71893);if(!/^(1887|7596|7798)$/.test(t.j))var I=t(89499);var k=t(42541),e=t(15405),oe=t(33126);if(!/^(1887|7596|7798)$/.test(t.j))var m=t(67776);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(82500);var i=t(96486),me=t.n(i),J=(0,Ce.Z)([`
  line-height: 27px;
`],[`
  line-height: 27px;
`]),T=(0,Ce.Z)([`
  display: inline-flex;
  border-radius: 4px;
  cursor: pointer;
  font-size: 13px;
  line-height: 29px;
  margin-right: 16px;
  vertical-align: middle;
  color: #1e88e5;
  background-color: #e3f2fd;
  padding: 0 10px;
  .text {
    max-width: 160px;
  }
  .filterIcon {
    font-size: 18px;
    margin-right: 6px;
  }
  .closeIcon {
    font-size: 16px;
    margin-left: 6px;
    &:hover {
      color: #1565c0;
    }
  }
`],[`
  display: inline-flex;
  border-radius: 4px;
  cursor: pointer;
  font-size: 13px;
  line-height: 29px;
  margin-right: 16px;
  vertical-align: middle;
  color: #1e88e5;
  background-color: #e3f2fd;
  padding: 0 10px;
  .text {
    max-width: 160px;
  }
  .filterIcon {
    font-size: 18px;
    margin-right: 6px;
  }
  .closeIcon {
    font-size: 16px;
    margin-left: 6px;
    &:hover {
      color: #1565c0;
    }
  }
`]),te=(0,oe.Z)(e.Z),E=L.ZP.span(J),r=(0,L.ZP)(k.Lb)(T);function R(a){var z=a.zIndex,N=a.actions,q=a.state,K=a.onChange,ye=(0,C.Z)(a,["zIndex","actions","state","onChange"]),v=ye.worksheetId,se=v===void 0?"":v,de=ye.type,U=de===void 0?"":de,pe=ye.className,Y=(0,Ne.useRef)(),be=(0,Ne.useRef)(),Q=(0,Ne.useState)(),Le=(0,Te.Z)(Q,2),Be=Le[0],ke=Le[1],Ie=q.needSave,he=q.editingFilter,Re=q.activeFilter;function ue(le){ke(!0),setTimeout(function(){me().get(Y,"current.addFilterByControl")&&Y.current.addFilterByControl(le)},100)}(0,Ne.useEffect)(function(){return I.uY.addListener("FILTER_ADD_FROM_COLUMNHEAD"+se+U,ue),function(){I.uY.removeListener("FILTER_ADD_FROM_COLUMNHEAD"+se+U,ue)}},[]);var we=void 0;if(he&&/^new/.test(he.id)){var Ee=(0,m.xx)(he),b=me().sum(Ee.map(function(le){return me().get(le,"groupFilters.length")}));b>0&&(we=_l("%0 \u9879",b))}else Re&&(we=Re.name+(Ie?" *":""));return Ne.createElement(j.Z,{zIndex:z||99,action:["click"],popup:Ne.createElement(te,{specialFilter:function(ae){var ve=$(ae).closest([".dropdownTrigger",".addFilterPopup",".filterControlOptionsList",".mui-dialog-container",".mui-datetimepicker",".mui-datetimerangepicker",".selectUserBox",".worksheetFilterOperateList",".ant-picker-dropdown",".rc-trigger-popup",".CityPicker",".CityPicker-wrapper"].join(","))[0];return ve},onClickAwayExceptions:[".ant-cascader-menus",".ant-tree-select-dropdown",".selectRoleDialog"],onClickAway:function(){return ke(!1)}},Ne.createElement(y.Z,(0,h.default)({actions:N,ref:Y,state:q,onHideFilterPopup:function(){return ke(!1)},onChange:K,maxHeight:be.current?window.innerHeight-be.current.getBoundingClientRect().y-120-29-6:void 0},ye))),getPopupContainer:function(){return document.body},popupClassName:"filterTrigger",popupVisible:Be,popupAlign:{points:["tr","br"],offset:[162,6],overflow:{adjustX:!0,adjustY:!0}},onPopupVisibleChange:function(ae){ae&&ke(!0)}},Ne.createElement("div",{ref:be,className:"mTop4"},!we&&Ne.createElement(E,{"data-tip":_l("\u7B5B\u9009"),className:"mRight10 mTop2 "+pe},Ne.createElement("i",{className:"icon icon-worksheet_filter Gray_9e Hand Font18 ThemeHoverColor3"})),we&&Ne.createElement(r,null,Ne.createElement("i",{className:"icon icon-worksheet_filter filterIcon"}),Ne.createElement("span",{className:"text ellipsis"},we),Ne.createElement("i",{className:"icon icon-close closeIcon",onClick:function(ae){ae.stopPropagation(),N.setActiveFilter(void 0),N.editFilter(void 0),K({filterControls:[]})}}))))}},24236:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>k});var h=t(86735),Te=t(67294),C=t(71893);if(!/^(1887|7596|7798)$/.test(t.j))var Ce=t(79974),Ne=t.n(Ce);if(!/^(1887|7596|7798)$/.test(t.j))var j=t(55266);var L=(0,h.Z)([`
  text-align: center;
  padding: 10px 0 8px;
  img {
    height: 160px;
  }
  .tip {
    color: #999;
    margin-top: -2px;
  }
  .addFilter {
    border-radius: 36px !important;
    padding: 0 16px !important;
    background-color: #2196f3;
    &:hover {
      background-color: #1565c0;
    }
  }
`],[`
  text-align: center;
  padding: 10px 0 8px;
  img {
    height: 160px;
  }
  .tip {
    color: #999;
    margin-top: -2px;
  }
  .addFilter {
    border-radius: 36px !important;
    padding: 0 16px !important;
    background-color: #2196f3;
    &:hover {
      background-color: #1565c0;
    }
  }
`]),I=C.ZP.div(L);function k(e){var oe=e.isNew,m=e.maxHeight,y=e.controls,i=e.onAdd,me=i===void 0?function(){}:i;return oe?Te.createElement(j.Z,{maxHeight:m,style:{boxShadow:"none"},className:"inEmpty",controls:y,onAdd:me}):Te.createElement(I,null,Te.createElement("img",{src:Ne()}),Te.createElement("div",{className:"tip"},_l("\u6CA1\u6709\u4FDD\u5B58\u7684\u7B5B\u9009\u5668")))}},70455:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>v});var h=t(16469),Te=t(33867),C=t(70264),Ce=t(12424),Ne=t(62521),j=t(86735),L=t(67294),I=t(71893),k=t(29314),e=t(93967),oe=t.n(e),m=t(95742),y=t(42541),i=t(44253),me=t(96486),J=t.n(me),T=(0,j.Z)([`
  .title {
    font-size: 14px;
    color: #9e9e9e;
    padding: 8px 18px;
  }
`],[`
  .title {
    font-size: 14px;
    color: #9e9e9e;
    padding: 8px 18px;
  }
`]),te=(0,j.Z)([`
  width: 160px;
  position: relative !important;
  hr {
    border: none;
    margin: 4px 0;
    border-top: 1px solid #e0e0e0 !important;
  }
  .ming.Item .Item-content {
    padding-left: 50px !important;
    .Icon {
      left: 15px;
    }
  }
  .red {
    color: #f44336;
    &.ming.MenuItem .icon {
      color: #f44336;
    }
  }
`],[`
  width: 160px;
  position: relative !important;
  hr {
    border: none;
    margin: 4px 0;
    border-top: 1px solid #e0e0e0 !important;
  }
  .ming.Item .Item-content {
    padding-left: 50px !important;
    .Icon {
      left: 15px;
    }
  }
  .red {
    color: #f44336;
    &.ming.MenuItem .icon {
      color: #f44336;
    }
  }
`]),E=(0,j.Z)([`
  cursor: pointer;
  height: 36px;
  border-radius: 4px;
  padding: 0 18px;
  justify-content: space-between;
  position: relative;
  .content {
    overflow: hidden;
  }
  .icon.dragger {
    cursor: pointer;
    font-size: 12px;
    transform: translateX(-14px);
    position: absolute;
    top: 12px;
    left: 18px;
  }
  .icon {
    font-size: 18px;
    color: #999;
  }
  .hoverShow {
    display: none;
  }
  &.active {
    background: #e5f3fe;
    color: #2196f3;
    .filterIcon {
      color: #2196f3;
    }
  }
  &:hover:not(.active):not(.isDragging) {
    background: #f5f5f5;
  }
  &:hover:not(.isDragging) {
    .hoverShow {
      display: inline-block;
    }
  }
  &.moreMenuActive {
    .moreMenu {
      display: inline-block;
    }
  }
  &.draggingItem {
    z-index: 9999;
    background: #f5f5f5;
    .dragger {
      display: inline-block;
    }
  }
`],[`
  cursor: pointer;
  height: 36px;
  border-radius: 4px;
  padding: 0 18px;
  justify-content: space-between;
  position: relative;
  .content {
    overflow: hidden;
  }
  .icon.dragger {
    cursor: pointer;
    font-size: 12px;
    transform: translateX(-14px);
    position: absolute;
    top: 12px;
    left: 18px;
  }
  .icon {
    font-size: 18px;
    color: #999;
  }
  .hoverShow {
    display: none;
  }
  &.active {
    background: #e5f3fe;
    color: #2196f3;
    .filterIcon {
      color: #2196f3;
    }
  }
  &:hover:not(.active):not(.isDragging) {
    background: #f5f5f5;
  }
  &:hover:not(.isDragging) {
    .hoverShow {
      display: inline-block;
    }
  }
  &.moreMenuActive {
    .moreMenu {
      display: inline-block;
    }
  }
  &.draggingItem {
    z-index: 9999;
    background: #f5f5f5;
    .dragger {
      display: inline-block;
    }
  }
`]),r=I.ZP.div(T),R=(0,I.ZP)(Ne.Z)(te),a=(0,I.ZP)(y.EK)(E),z=(0,m.JV)(function(){return L.createElement("i",{className:"icon icon-drag dragger hoverShow ThemeHoverColor3"})});function N(se){var de=se.error,U=se.isCharge,pe=se.className,Y=se.active,be=se.filter,Q=se.onEditFilter,Le=se.onCopy,Be=se.onDelete,ke=se.onToggleFilterType,Ie=se.triggerFilter,he=se.onHideFilterPopup,Re=be.name,ue=(0,L.useState)(!1),we=(0,Ce.Z)(ue,2),Ee=we[0],b=we[1],le=U||be.createAccountId===md.global.Account.accountId;return L.createElement(a,{className:oe()(pe,{active:Y,moreMenuActive:Ee}),onClick:function(){Ie(be),he()}},L.createElement(y.EK,{className:"content"},L.createElement(z,null),L.createElement("i",{className:"icon icon-worksheet_filter filterIcon"}),L.createElement("span",{title:Re,className:"Font14 mLeft10 ellipsis"},Re),de&&L.createElement(C.Z,{text:_l("\u8BE5\u7B5B\u9009\u5668\u4E2D\u7684\u7B5B\u9009\u6761\u4EF6\u51FA\u9519")},L.createElement("i",{className:"icon icon-error1 Font16 mLeft6",style:{color:"#F44336"}}))),L.createElement("div",{onClick:function(ve){return ve.stopPropagation()}},L.createElement(k.Z,{popupVisible:Ee,action:["click"],popupAlign:{points:["tr","br"],offset:[0,4],overflow:{adjustX:!0,adjustY:!0}},popup:L.createElement(R,null,le&&L.createElement(h.Z,{icon:L.createElement(Te.Z,{icon:"settings",className:"Font18"}),onClick:function(){return Q(be)}},_l("\u7F16\u8F91")),L.createElement(h.Z,{icon:L.createElement(Te.Z,{icon:"copy",className:"Font18"}),onClick:function(){b(!1),Le(be)}},_l("\u590D\u5236")),le&&L.createElement(h.Z,{icon:L.createElement(Te.Z,{icon:"edit",className:"Font18"}),onClick:function(){Q(be),setTimeout(function(){document.querySelector(".filterDetailName .name").click()},40)}},_l("\u91CD\u547D\u540D")),U&&L.createElement(h.Z,{icon:L.createElement(Te.Z,{icon:"group-members",className:"Font18"}),onClick:function(){b(!1),ke(be)}},be.type===i.kQ.PUBLIC?_l("\u8BBE\u4E3A\u4E2A\u4EBA\u7B5B\u9009"):_l("\u8BBE\u4E3A\u516C\u5171\u7B5B\u9009")),le&&L.createElement(L.Fragment,null,L.createElement("hr",null),L.createElement(h.Z,{className:"red",icon:L.createElement(Te.Z,{icon:"trash",className:"Font18"}),onClick:function(){b(!1),Be(be)}},_l("\u5220\u9664")))),onPopupVisibleChange:b},L.createElement("i",{className:"icon icon-more_horiz Hand moreMenu hoverShow ThemeHoverColor3"}))))}var q=(0,m.gU)(function(se){return L.createElement(N,se)}),K=(0,m.hv)(function(se){var de=se.children;return L.createElement("div",null,de)});function ye(se,de){return se.conditionsGroups?J().some(se.conditionsGroups.map(function(U){return ye(U,de)})):!!(J().get(se,"conditions")||[]).filter(function(U){return!J().find(de,{controlId:U.controlId})}).length}function v(se){var de=se.isCharge,U=se.title,pe=se.activeFilter,Y=pe===void 0?{}:pe,be=se.controls,Q=be===void 0?[]:be,Le=se.filters,Be=Le===void 0?[]:Le,ke=se.onSortEnd,Ie=ke===void 0?function(){}:ke,he=se.onEditFilter,Re=he===void 0?function(){}:he,ue=se.onCopy,we=ue===void 0?function(){}:ue,Ee=se.onDelete,b=Ee===void 0?function(){}:Ee,le=se.onToggleFilterType,ae=le===void 0?function(){}:le,ve=se.triggerFilter,W=ve===void 0?function(){}:ve,ce=se.onHideFilterPopup,Z=ce===void 0?function(){}:ce,_e=(0,L.useState)(!1),P=(0,Ce.Z)(_e,2),xe=P[0],bt=P[1];return L.createElement(r,null,L.createElement("div",{className:"title"},U),L.createElement(K,{useDragHandle:!0,filters:Be,axis:"y",helperClass:"draggingItem",transitionDuration:0,distance:3,onSortStart:function(){return bt(!0)},onSortEnd:function(Dt){var vn=Dt.oldIndex,Fe=Dt.newIndex;bt(!1),Ie((0,m.Rp)(Be,vn,Fe).map(function(Bt){return Bt.id}))}},Be.map(function(tt,Dt){return L.createElement(q,{error:ye(tt,Q),active:Y.id===tt.id,isCharge:de,className:oe()({isDragging:xe}),key:tt.id,index:Dt,filter:tt,onEditFilter:Re,onCopy:we,onDelete:b,onToggleFilterType:ae,triggerFilter:W,onHideFilterPopup:Z})})))}},58173:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>j});var h=t(88239),Te=t(12424),C=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var Ce=t(30801);if(!/^(1887|7596|7798)$/.test(t.j))var Ne=t(67776);function j(L){var I=(0,C.useReducer)(Ne.Lq,Ne.E3),k=(0,Te.Z)(I,2),e=k[0],oe=e===void 0?{}:e,m=k[1],y=(0,Ne.dA)(m,oe);return C.createElement(Ce.Z,(0,h.default)({},L,{state:oe,actions:y}))}},13711:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>z});var h=t(69288),Te=t(3540),C=t(88239),Ce=t(85105),Ne=t.n(Ce),j=t(99663),L=t(22600),I=t(49135),k=t(93196),e=t(86735),oe=t(67294),m=t(45697),y=t.n(m),i=t(71893),me=t(8295),J=t(96486),T=t.n(J),te,E,r=(0,e.Z)([""],[""]),R=i.ZP.div(r),a={customPage:{headerText:_l("\u65B0\u5EFA\u81EA\u5B9A\u4E49\u9875\u9762"),placeholder:_l("\u4F8B\u5982: \u9996\u9875\u3001\u4EEA\u8868\u76D8"),text:_l("\u9875\u9762\u540D\u79F0")},worksheet:{headerText:_l("\u65B0\u5EFA\u5DE5\u4F5C\u8868"),placeholder:_l("\u4F8B\u5982: \u8BA2\u5355\u3001\u5BA2\u6237"),text:_l("\u5DE5\u4F5C\u8868\u540D\u79F0")}},z=(E=te=function(N){(0,k.default)(q,N);function q(){var K,ye,v,se;(0,j.default)(this,q);for(var de=arguments.length,U=Array(de),pe=0;pe<de;pe++)U[pe]=arguments[pe];return se=(ye=(v=(0,I.default)(this,(K=q.__proto__||Ne()(q)).call.apply(K,[this].concat(U))),v),v.state={value:"",customPageArgs:{}},ye),(0,I.default)(v,se)}return(0,L.default)(q,[{key:"render",value:function(){var ye=this,v=this.props,se=v.type,de=v.onCreate,U=v.onCancel,pe=this.state,Y=pe.value,be=pe.customPageArgs,Q=a[se],Le=Q.headerText,Be=Q.text,ke=Q.placeholder;return oe.createElement(h.Z,{visible:!0,title:Le,width:se==="customPage"?580:void 0,okText:_l("\u65B0\u5EFA"),onOk:function(){var he=ye.state.value.trim().slice(0,100),Re=be.configuration,ue=Re===void 0?{}:Re,we=be.urlTemplate;if(!he){alert(_l("\u8BF7\u586B\u5199\u540D\u79F0"),3);return}var Ee=ue.openType==="1"?/^https:\/\/.+$/:/^https?:\/\/.+$/;if(ue.customPageType==="2"&&!Ee.test(we)){alert(_l("\u8BF7\u8F93\u5165\u6B63\u786E\u7684url"),3);return}de(se,(0,C.default)({name:he},be))},onCancel:U},oe.createElement(R,null,oe.createElement("div",{className:"flexRow alignItemsCenter"},oe.createElement("div",{style:{width:75}},Be),oe.createElement(Te.Z,{autoFocus:!0,className:"flex",value:Y,onChange:function(he){return ye.setState({value:he})},placeholder:ke})),se==="customPage"&&oe.createElement(me.Z,{onChange:function(he){he.configuration.customPageType==="2"?ye.setState({customPageArgs:he}):ye.setState({customPageArgs:{}})}})))}}]),q}(oe.Component),te.propTypes={type:m.string,onCreate:m.func,onCancel:m.func},te.defaultProps={type:"worksheet",onCreate:T().noop,onCancel:T().noop},E)},5232:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>q});var h=t(88106),Te=t(12424),C=t(88239),Ce=t(67294),Ne=t(22010),j=t(50533),L=t(22013),I=t(42602),k=t(338),e=t(8796),oe=t(91088),m=t(49365),y=t(97592),i=t(13714),me=t(93967),J=t.n(me),T="navigationListGroup",te=function K(ye,v,se){return ye.map(function(de){return de.workSheetId===v?_extends({},de,se):_extends({},de,{items:K(de.items||[],v,se)})})},E=function K(ye,v){return ye.filter(function(se){var de=se.items,U=de===void 0?[]:de;return se.workSheetId===v.workSheetId?!1:(se.items=K(U,v),!0)})},r=function K(ye,v,se){var de=_.findIndex(ye,{workSheetId:v.workSheetId});return de==-1?ye.map(function(U){var pe=U.items,Y=pe===void 0?[]:pe;return(0,C.default)({},U,{items:K(Y,v,se)})}):(v.parentId||(se.parentId=void 0),ye.splice(se.first?de:de+1,0,se),ye)},R=function K(ye,v,se){return ye.map(function(de){var U=de.items,pe=U===void 0?[]:U;return de.workSheetId===v.workSheetId?(se.parentId=void 0,se.parentGroupId=de.workSheetId,(0,C.default)({},de,{items:pe.concat(se)})):(0,C.default)({},de,{items:K(de.items||[],v,se)})})},a=function(ye){var v,se=ye.appPkg,de=ye.isCharge,U=ye.appItem,pe=ye.className,Y=ye.children,be=ye.onHover,Q=be===void 0?_.noop:be,Le=ye.onDragEnd,Be=Le===void 0?_.noop:Le,ke=se.iconColor,Ie=se.currentPcNaviStyle,he=se.themeType,Re=(0,Ce.useRef)(null),ue=(0,Ce.useState)(!1),we=(0,Te.Z)(ue,2),Ee=we[0],b=we[1],le=(0,Ce.useState)(!1),ae=(0,Te.Z)(le,2),ve=ae[0],W=ae[1],ce=(0,Ce.useState)(!1),Z=(0,Te.Z)(ce,2),_e=Z[0],P=Z[1],xe=[1,3].includes(Ie)&&he==="theme"?"#00000052":ke,bt=(0,k.L)({accept:T,drop:function(Ot,$t){var cn=Ot.appItem,Mn=U;cn.workSheetId!==Mn.workSheetId&&(_e||Ee)&&(cn.first=ve,Vn(cn,Mn,Ee))},hover:function(Ot,$t){if(Re.current){var cn=Ot.appItem,Mn=U;if(Q(),!(Ie===2&&cn.type===2&&Mn.type!==2)&&cn.workSheetId!==Mn.workSheetId)if(Dt.isOver){var dt=function(){var qn=$t.getClientOffset(),In=Re.current.getBoundingClientRect(),Vt=(In.bottom-In.top)/2,Yt=qn.y-In.top;return Yt<=Vt&&Yt>=10};if(Mn.index===0){var $e=$t.getClientOffset(),jt=Re.current.getBoundingClientRect(),rn=$e.x-jt.left,Rt=$e.y-jt.top;W(Ie===2?rn<=30:Rt<=10)}else W(!1);if(cn.layerIndex===0&&Mn.layerIndex===0&&P(!0),cn.layerIndex&&!cn.isAppItem){if(!Mn.isAppItem&&[0].includes(Mn.layerIndex)){var St=dt();b(St)}[0,1].includes(Mn.layerIndex)&&P(!0)}if(cn.layerIndex&&cn.isAppItem){if(!Mn.isAppItem){var zt=dt();b(zt)}Mn.layerIndex&&P(!0)}}else P(!1),b(!1),W(!1)}},collect:function(Ot){return{handlerId:Ot.getHandlerId(),isOver:Ot.isOver({shallow:!0})}}}),tt=(0,Te.Z)(bt,2),Dt=tt[0],vn=tt[1],Fe=(0,e.c)({item:{type:T,appItem:U},canDrag:de,end:Be,collect:function(Ot){return{isDragging:Ot.isDragging()}}}),Bt=(0,Te.Z)(Fe,3),kt=Bt[0].isDragging,Tt=Bt[1],tn=Bt[2];Tt(vn(Re));var Vn=function(Ot,$t,cn){var Mn=[1,3].includes(Ie)?ye.appSectionDetail.map(function(Vt){return(0,C.default)({},Vt,{items:(0,y.MR)(Vt.workSheetId)})}):ye.sheetList,dt=E(_.cloneDeep(Mn),Ot);if(cn){m.Z.removeWorkSheetAscription({sourceAppId:se.id,resultAppId:se.id,sourceAppSectionId:Ot.parentId,ResultAppSectionId:$t.workSheetId,workSheetsInfo:[{workSheetId:Ot.workSheetId,type:Ot.type,icon:Ot.icon,iconColor:se.iconColor,iconUrl:Ot.iconUrl,workSheetName:Ot.workSheetName,createType:Ot.createType}]}).then(function(Vt){Vt||alert(_l(_l("\u79FB\u52A8\u5931\u8D25")),2)});var $e=R(dt,$t,Ot);[1,3].includes(Ie)?L.Z.dispatch(I.updateALLSheetList($e)):ye.updateSheetList($e)}else{var jt=Ot.parentId,rn=$t.parentId,Rt=r(dt,$t,Ot);if([1,3].includes(Ie)?L.Z.dispatch(I.updateALLSheetList(Rt)):ye.updateSheetList(Rt),jt!==rn){m.Z.removeWorkSheetAscription({sourceAppId:se.id,resultAppId:se.id,sourceAppSectionId:jt,ResultAppSectionId:rn,workSheetsInfo:[{workSheetId:Ot.workSheetId,type:Ot.type,icon:Ot.icon,iconColor:se.iconColor,iconUrl:Ot.iconUrl,workSheetName:Ot.workSheetName,createType:Ot.createType}]}).then(function(Vt){if(Vt){if($t.layerIndex===0&&oe.Z.updateAppSectionSort({appId:se.id,appSectionIds:Rt.map(function(rt){return rt.workSheetId})}).then(function(rt){}),$t.layerIndex===1){var Yt=Rt.map(function(rt){return rt.workSheetId});oe.Z.updateSectionChildSort({appId:se.id,appSectionId:rn,workSheetIds:Yt}).then(function(rt){})}if($t.layerIndex===2){var qt=_.find(Rt,{workSheetId:rn}).items.map(function(rt){return rt.workSheetId});oe.Z.updateSectionChildSort({appId:se.id,appSectionId:rn,workSheetIds:qt}).then(function(rt){})}}else alert(_l(_l("\u79FB\u52A8\u5931\u8D25")),2)});return}if(Ot.layerIndex===0&&Ot.parentId===$t.parentId&&oe.Z.updateAppSectionSort({appId:se.id,appSectionIds:Rt.map(function(Vt){return Vt.workSheetId})}).then(function(Vt){Vt.code!==1&&alert(_l("\u6392\u5E8F\u5931\u8D25"),2)}),Ot.layerIndex===1&&Ot.parentId===$t.parentId){var St=[];if([1,3].includes(Ie)){var zt=_.find(Rt,{workSheetId:Ot.parentId})||{},oa=zt.items;St=oa.map(function(Vt){return Vt.workSheetId})}else St=Rt.map(function(Vt){return Vt.workSheetId});oe.Z.updateSectionChildSort({appId:se.id,appSectionId:Ot.parentId,workSheetIds:St}).then(function(Vt){Vt.code!==1&&alert(_l("\u6392\u5E8F\u5931\u8D25"),2)})}if(Ot.layerIndex===2&&Ot.parentId===$t.parentId){var qn=[];if([1,3].includes(Ie)){var In=Rt.filter(function(Vt){return _.find(Vt.items,{workSheetId:Ot.parentId})})[0];qn=_.find(In.items,{workSheetId:Ot.parentId}).items.map(function(Vt){return Vt.workSheetId})}else qn=_.find(Rt,{workSheetId:Ot.parentId}).items.map(function(Vt){return Vt.workSheetId});oe.Z.updateSectionChildSort({appId:se.id,appSectionId:Ot.parentId,workSheetIds:qn}).then(function(Vt){Vt.code!==1&&alert(_l("\u6392\u5E8F\u5931\u8D25"),2)})}}};return Ce.createElement("div",{ref:Re,"data-handler-id":Dt.handlerId,className:pe,onMouseDown:function(Ot){var $t=Ot.target.parentElement;ye.onlyIconDrag&&($t.classList.contains("groupHeader")||Ot.target.classList.contains("groupHeader")||Ot.target.classList.contains("groupContent")||Ot.target.dataset.handlerId)&&!Ot.target.classList.contains("dragIcon")&&Ot.preventDefault()},style:(v={opacity:kt?0:1},(0,h.default)(v,Ie===2&&U.type!==2?ve?"borderLeft":"borderRight":ve?"borderTop":"borderBottom",Dt.isOver&&_e&&!Ee?"1px solid "+xe:void 0),(0,h.default)(v,"backgroundColor",Dt.isOver&&Ee?(0,i.default)(xe).setAlpha(.2):void 0),(0,h.default)(v,"transform","translate(0px, 0px)"),v)},Y)},z=function(ye){return{updateSheetList:(0,Ne.DE)(I.updateSheetList,ye),dispatch:ye}},N=function(ye){return{sheetList:ye.sheetList.data,appSectionDetail:L.Z.getState().sheetList.appSectionDetail}};const q=(0,j.$j)(N,z)(a)},8295:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>U,j:()=>se}),!/^(1887|7596|7798)$/.test(t.j))var h=t(60967);var Te=t(59768),C=t.n(Te);if(!/^(1887|7596|7798)$/.test(t.j))var Ce=t(82891);if(!/^(1887|7596|7798)$/.test(t.j))var Ne=t(33867);if(!/^(1887|7596|7798)$/.test(t.j))var j=t(12692);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(69288);var I=t(88239),k=t(12424),e=t(47426),oe=t(86735),m=t(67294),y=t(93967),i=t.n(y),me=t(71893);if(!/^(1887|7596|7798)$/.test(t.j))var J=t(49365);if(!/^(1887|7596|7798)$/.test(t.j))var T=t(44263);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(57467);if(!/^(1887|7596|7798)$/.test(t.j))var E=t(22013);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(42602);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(97592);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(82134);var z=(0,oe.Z)([`
  line-height: 24px;
  padding: 0 12px;
  border-radius: 16px;
  background: #d8eeff;
  color: #174c76;
  border: 1px solid #bbd6ea;
  &.invalid {
    color: #f44336;
    background: rgba(244, 67, 54, 0.06);
    border-color: #f44336;
  }
`],[`
  line-height: 24px;
  padding: 0 12px;
  border-radius: 16px;
  background: #d8eeff;
  color: #174c76;
  border: 1px solid #bbd6ea;
  &.invalid {
    color: #f44336;
    background: rgba(244, 67, 54, 0.06);
    border-color: #f44336;
  }
`]),N=(0,oe.Z)([`
  .tagInputareaIuput {
    border-radius: 3px 0 3px 3px !important;
  }
  .CodeMirror-placeholder {
    color: #9e9e9e !important;
    padding-left: 10px !important;
  }
  .iconWrap {
    border: 1px solid #ccc;
    padding: 5px;
    border-radius: 0 3px 3px 0;
    width: 28px;
    height: 30px;
    border-left: none;
    display: flex;
    align-items: center;
    justify-content: center;
    &:hover .icon-workflow_other {
      color: #2196f3 !important;
    }
  }
`],[`
  .tagInputareaIuput {
    border-radius: 3px 0 3px 3px !important;
  }
  .CodeMirror-placeholder {
    color: #9e9e9e !important;
    padding-left: 10px !important;
  }
  .iconWrap {
    border: 1px solid #ccc;
    padding: 5px;
    border-radius: 0 3px 3px 0;
    width: 28px;
    height: 30px;
    border-left: none;
    display: flex;
    align-items: center;
    justify-content: center;
    &:hover .icon-workflow_other {
      color: #2196f3 !important;
    }
  }
`]),q=(0,oe.Z)([`
  .ming.Radio {
    margin-right: 60px;
  }
`],[`
  .ming.Radio {
    margin-right: 60px;
  }
`]),K=me.ZP.div(z),ye=me.ZP.div(N),v=(0,me.ZP)(e.ZP)(q),se=function(Y){var be=Y.appId,Q=Y.groupId,Le=Y.appItem,Be=Y.onCancel,ke=(0,m.useState)({configuration:Le.configuration}),Ie=(0,k.Z)(ke,2),he=Ie[0],Re=Ie[1],ue=function(){var Ee=E.Z.getState().appPkg.currentPcNaviStyle,b=he.configuration.openType==="1"?/^https:\/\/.+$/:/^https?:\/\/.+$/;if(!b.test(he.urlTemplate)){alert(_l("\u8BF7\u8F93\u5165\u6B63\u786E\u7684url"),3);return}J.Z.editWorkSheetInfoForApp((0,I.default)({type:1,appId:be,appSectionId:Le.parentGroupId||Q,workSheetId:Le.workSheetId},he)).then(function(le){if([1,3].includes(Ee)){var ae=(0,R.xy)(Q);ae.dispatch((0,r.updateSheetListAppItem)(Le.workSheetId,he)),E.Z.dispatch((0,a.updatePageInfo)({flag:Date.now()}))}else Y.updateSheetListAppItem(Le.workSheetId,he)}),Be()};return m.createElement(L.Z,{visible:!0,title:_l("\u7F16\u8F91\u5916\u90E8\u94FE\u63A5"),width:580,onOk:ue,onCancel:Be},m.createElement(de,{urlTemplate:Le.urlTemplate,configuration:Le.configuration,onChange:function(Ee){Re(Ee)}}))},de=function(Y){var be=Y.configuration,Q=be===void 0?{}:be,Le=Y.onChange,Be=(0,m.useState)(Q.customPageType||"1"),ke=(0,k.Z)(Be,2),Ie=ke[0],he=ke[1],Re=(0,m.useState)(Q.openType||"1"),ue=(0,k.Z)(Re,2),we=ue[0],Ee=ue[1],b=(0,m.useState)(Q.hideHeaderBar||"0"),le=(0,k.Z)(b,2),ae=le[0],ve=le[1],W=(0,m.useState)(Y.urlTemplate||""),ce=(0,k.Z)(W,2),Z=ce[0],_e=ce[1],P=(0,m.useState)(""),xe=(0,k.Z)(P,2),bt=xe[0],tt=xe[1];(0,m.useEffect)(function(){Le({configuration:{customPageType:Ie,openType:we,hideHeaderBar:ae},urlTemplate:Z})},[Ie,we,ae,Z]);var Dt=function(Bt,kt,Tt){Bt||_e(kt)},vn=function(Bt){var kt=_.flatten(T.ju.map(function(tn){return tn.fields})),Tt=_.find(kt,{value:Bt});return m.createElement(K,{className:"flexRow valignWrapper"},m.createElement("span",{className:"Font12"},Tt?Tt.text:Bt))};return m.createElement(m.Fragment,null,!Q.customPageType&&m.createElement(m.Fragment,null,m.createElement("div",{className:"flexRow alignItemsCenter mTop24 mBottom6"},m.createElement("div",{style:{width:75}},_l("\u7C7B\u578B")),m.createElement(v,{data:[{value:"1",text:_l("\u753B\u5E03")},{value:"2",text:_l("\u5916\u90E8\u94FE\u63A5")}],checkedValue:Ie,onChange:function(Bt){return he(Bt)}})),m.createElement("div",{className:"Gray_9e",style:{marginLeft:75}},Ie==="1"&&_l("\u521B\u5EFA\u4E00\u4E2A\u753B\u5E03\u9875\u9762\uFF0C\u5728\u9875\u9762\u4E2D\u6DFB\u52A0\u7EDF\u8BA1\u62A5\u8868\u3001\u6309\u94AE\u3001\u89C6\u56FE\u7B49\u7EC4\u4EF6"),Ie==="2"&&_l("\u5C06\u4E00\u4E2A\u5DF2\u6709\u5916\u90E8\u94FE\u63A5\u4F5C\u4E3A\u9875\u9762"))),Ie==="2"&&m.createElement(m.Fragment,null,m.createElement("div",{className:"flexRow mTop24"},m.createElement("div",{style:{width:75}},_l("\u94FE\u63A5")),m.createElement(ye,{className:"flexRow flex"},m.createElement(j.Z,{className:"flex",placeholder:_l("\u8BF7\u8F93\u5165\u5B8C\u6574\u94FE\u63A5\uFF0C\u4EE5 http:// \u6216 https:// \u5F00\u5934"),defaultValue:Z,height:120,maxHeight:240,getRef:function(Bt){tt(Bt)},renderTag:function(Bt,kt){return vn(Bt)},onChange:Dt}),m.createElement(Ce.default,{trigger:"click",placement:"bottomRight",overlay:m.createElement(te.Nv,{style:{width:"180px"}},T.ju.map(function(Fe){var Bt=Fe.type,kt=Fe.title,Tt=Fe.fields;return m.createElement(m.Fragment,{key:Bt},m.createElement("div",{className:"title"},kt),Tt.map(function(tn){var Vn=tn.text,Zn=tn.value;return m.createElement("div",{key:Zn,className:"item",onClick:function(){bt.insertColumnTag(Zn)}},Vn)}))}))},m.createElement("div",{className:"iconWrap Font17 pointer tip-bottom-left","data-tip":_l("\u4F7F\u7528\u52A8\u6001\u53C2\u6570")},m.createElement(Ne.Z,{className:"Gray_9e",icon:"workflow_other"}))))),m.createElement("div",{className:"flexRow alignItemsCenter mTop24 mBottom16"},m.createElement("div",{style:{width:75}},_l("\u6253\u5F00\u65B9\u5F0F")),m.createElement(v,{data:[{value:"1",text:_l("\u5D4C\u5165\u9875\u9762"),disableTitle:!0,children:m.createElement("div",{className:"pointer mLeft5","data-tip":_l("\u5D4C\u5165\u9875\u9762\u65F6\u53EA\u652F\u6301 https:// \u5F00\u5934\u7684\u94FE\u63A5"),style:{top:2}},m.createElement(Ne.Z,{className:"Font18 Gray_9e",icon:"info"}))},{value:"2",text:_l("\u65B0\u7A97\u53E3\u6253\u5F00"),disableTitle:!0}],checkedValue:we,onChange:function(Bt){return Ee(Bt)}})),m.createElement(h.Z,{style:{marginLeft:75},className:i()({Visibility:we==="2"}),text:m.createElement("span",null,_l("\u9690\u85CF\u6807\u9898\u680F")),checked:ae==="1",onClick:function(){ve(ae==="0"?"1":"0")}})))};const U=/^(1887|7596|7798)$/.test(t.j)?null:de},5167:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>v}),!/^(1887|7596|7798)$/.test(t.j))var h=t(70264);if(!/^(1887|7596|7798)$/.test(t.j))var Te=t(62521);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(16469);if(!/^(1887|7596|7798)$/.test(t.j))var Ce=t(33867);var Ne=t(88239);if(!/^(1887|7596|7798)$/.test(t.j))var j=t(69288);if(!/^(1887|7596|7798)$/.test(t.j))var L=t(45371);if(!/^(1887|7596|7798)$/.test(t.j))var I=t(60967);if(!/^(1887|7596|7798)$/.test(t.j))var k=t(54208);if(!/^(1887|7596|7798)$/.test(t.j))var e=t(3540);var oe=t(12424),m=t(67294);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(98389);if(!/^(1887|7596|7798)$/.test(t.j))var i=t(88738);if(!/^(1887|7596|7798)$/.test(t.j))var me=t(29650);if(!/^(1887|7596|7798)$/.test(t.j))var J=t(66261);var T=t(29314);if(!/^(1887|7596|7798)$/.test(t.j))var te=t(91088);if(!/^(1887|7596|7798)$/.test(t.j))var E=t(45231);if(!/^(1887|7596|7798)$/.test(t.j))var r=t(13711);if(!/^(1887|7596|7798)$/.test(t.j))var R=t(8295);if(!/^(1887|7596|7798)$/.test(t.j))var a=t(70973);var z=function(de){var U=de.workSheetId,pe=de.type,Y=de.workSheetName,be=(0,m.useState)(!0),Q=(0,oe.Z)(be,2),Le=Q[0],Be=Q[1],ke=(0,m.useState)([]),Ie=(0,oe.Z)(ke,2),he=Ie[0],Re=Ie[1],ue=(0,m.useState)(!1),we=(0,oe.Z)(ue,2),Ee=we[0],b=we[1],le=(0,m.useState)([]),ae=(0,oe.Z)(le,2),ve=ae[0],W=ae[1],ce=(0,m.useState)(Y),Z=(0,oe.Z)(ce,2),_e=Z[0],P=Z[1];(0,m.useEffect)(function(){pe?Be(!1):E.Z.getWorksheetInfo({getTemplate:!0,worksheetId:U}).then(function(bt){var tt=_.get(bt,"template.controls")||[];Be(!1),Re(tt.filter(function(Dt){return Dt.type===29}))})},[]),(0,m.useEffect)(function(){de.onChanegSelectIds(ve)},[ve]),(0,m.useEffect)(function(){de.onChangeName(_e)},[_e]);var xe=function(){return m.createElement("div",{className:pe?"mTop10":"mTop24"},m.createElement("div",{className:"mBottom10 Font14 Gray"},_l("\u526F\u672C\u540D\u79F0")),m.createElement(e.Z,{className:"w100 Gray",value:_e,onChange:function(Dt){return P(Dt.trim().slice(0,100))}}))};return pe?xe():m.createElement(m.Fragment,null,m.createElement("div",{className:"mBottom10"},_l("\u4EC5\u590D\u5236\u76EE\u6807\u5DE5\u4F5C\u8868\u7684\u6240\u6709\u914D\u7F6E\uFF0C\u5DE5\u4F5C\u8868\u4E0B\u7684\u6570\u636E\u4E0D\u4F1A\u88AB\u590D\u5236")),xe(),Le&&m.createElement(k.Z,{className:"mTop10"}),!!he.length&&m.createElement(m.Fragment,null,m.createElement("div",{className:"mTop24 mBottom20 Font14"},m.createElement(I.Z,{className:"mBottom10 Font14 Gray",checked:Ee,text:m.createElement("span",{className:"Font14"},_l("\u540C\u65F6\u590D\u5236\u5173\u8054\u5173\u7CFB")),onClick:function(){b(!Ee)}}),m.createElement("div",{className:"Gray_9e mLeft25"},_l("\u672A\u52FE\u9009\u65F6\uFF0C\u6240\u6709\u5173\u8054\u8BB0\u5F55\u5B57\u6BB5\u5C06\u88AB\u590D\u5236\u4E3A\u6587\u672C\u5B57\u6BB5")),m.createElement("div",{className:"Gray_9e mLeft25"},_l("\u52FE\u9009\u65F6\uFF0C\u9009\u4E2D\u7684\u5173\u8054\u8BB0\u5F55\u5B57\u6BB5\u5C06\u4F1A\u5B8C\u6574\u590D\u5236\u4E0E\u5176\u4ED6\u8868\u7684\u5173\u8054\u5173\u7CFB"))),Ee&&m.createElement(m.Fragment,null,m.createElement(I.Z,{checked:ve.length===he.length,indeterminate:ve.length===he.length?!1:ve.length,className:"mBottom10",text:m.createElement(m.Fragment,null,m.createElement("span",{className:"Font14 Gray mRight2"},_l("\u5168\u9009")),m.createElement("span",{className:"Font14 Gray_9e"},ve.length+"/"+he.length)),onClick:function(tt){W(tt?[]:he.map(function(Dt){return Dt.controlId}))}}),m.createElement("div",{className:"mLeft25",style:{maxHeight:200,overflowY:"auto"}},he.map(function(bt){return m.createElement(I.Z,{key:bt.controlId,className:"mBottom10 Gray",checked:ve.includes(bt.controlId),text:m.createElement("span",{className:"Font14"},bt.controlName),onClick:function(Dt){if(Dt)W(ve.filter(function(Fe){return Fe!==bt.controlId}));else{var vn=ve.concat(bt.controlId);W(vn)}}})})))))},N=function(de){var U=de.projectId,pe=de.appId,Y=de.groupId,be=de.appItem,Q=de.sheetListActions,Le=be.workSheetName,Be=be.type;(0,L.Z)({clickOmitText:!0,style:{width:"560px"},title:m.createElement("div",{className:"Bold"},m.createElement("i",{className:"icon-error error",style:{fontSize:"28px",marginRight:"8px"}}),Be?_l("\u5220\u9664\u81EA\u5B9A\u4E49\u9875\u9762 \u201C%0\u201D",Le):_l("\u5220\u9664\u5DE5\u4F5C\u8868 \u201C%0\u201D",Le)),description:m.createElement("div",null,m.createElement("span",{style:{color:"#333",fontWeight:"bold"}},Be?_l("\u6CE8\u610F\uFF1A\u81EA\u5B9A\u4E49\u9875\u9762\u4E0B\u6240\u6709\u914D\u7F6E\u548C\u6570\u636E\u5C06\u88AB\u5220\u9664\u3002"):_l("\u6CE8\u610F\uFF1A\u5DE5\u4F5C\u8868\u4E0B\u6240\u6709\u914D\u7F6E\u548C\u6570\u636E\u5C06\u88AB\u5220\u9664\u3002")),Be?_l("\u8BF7\u52A1\u5FC5\u786E\u8BA4\u6240\u6709\u5E94\u7528\u6210\u5458\u90FD\u4E0D\u518D\u9700\u8981\u6B64\u81EA\u5B9A\u4E49\u9875\u9762\u540E\uFF0C\u518D\u6267\u884C\u6B64\u64CD\u4F5C\u3002"):_l("\u8BF7\u52A1\u5FC5\u786E\u8BA4\u6240\u6709\u5E94\u7528\u6210\u5458\u90FD\u4E0D\u518D\u9700\u8981\u6B64\u5DE5\u4F5C\u8868\u540E\uFF0C\u518D\u6267\u884C\u6B64\u64CD\u4F5C\u3002")),data:[{text:Be?_l("\u6211\u786E\u8BA4\u5220\u9664\u81EA\u5B9A\u4E49\u9875\u9762\u548C\u6240\u6709\u6570\u636E"):_l("\u6211\u786E\u8BA4\u5220\u9664\u5DE5\u4F5C\u8868\u548C\u6240\u6709\u6570\u636E"),value:1}],onOk:function(){Q.deleteSheet({type:Be,appId:pe,projectId:U,groupId:Y,worksheetId:be.workSheetId,parentGroupId:be.parentGroupId})}})},q=function(de){var U=de.projectId,pe=de.appId,Y=de.groupId,be=de.appItem,Q=de.sheetListActions,Le=be.type,Be=be.workSheetId;j.Z.confirm({buttonType:"danger",title:m.createElement("div",{className:"Bold"},_l("\u786E\u8BA4\u5220\u9664\u5206\u7EC4 ?")),description:m.createElement("span",null,_l("\u6B64\u64CD\u4F5C\u4E0D\u4F1A\u5220\u9664\u5206\u7EC4\u4E0B\u7684\u5E94\u7528\u9879")),onOk:function(){Q.deleteSheet({type:Le,appId:pe,projectId:U,groupId:Y,worksheetId:Be})}})},K=function(de){var U=de.appId,pe=de.groupId,Y=de.appItem,be=de.sheetListActions,Q=Y.workSheetId,Le=Y.workSheetName,Be=Y.type,ke=Y.icon,Ie=Y.iconColor,he=Y.iconUrl,Re=Y.parentGroupId,ue=Y.configuration,we=Y.urlTemplate,Ee=Y.createType,b={worksheetId:Q,appId:U,appSectionId:pe,name:Le,relationControlIds:[]},le=function(){if(!b.name){alert(_l("\u8BF7\u586B\u5199\u540D\u79F0"),3);return}Be===1?be.copyCustomPage({appId:U,appSectionId:pe,name:b.name,id:Q,icon:ke,iconColor:Ie,iconUrl:he,parentGroupId:Re},{configuration:ue,urlTemplate:we,createType:Ee}):be.copySheet(b,{icon:ke,iconColor:Ie,iconUrl:he,parentGroupId:Re}),ae()},ae=j.Z.confirm({width:480,className:"copySheetDialog",title:m.createElement("span",{className:"bold"},Be?_l("\u590D\u5236\u81EA\u5B9A\u4E49\u9875\u9762 \u201C%0\u201D",Le):_l("\u590D\u5236\u5DE5\u4F5C\u8868 \u201C%0\u201D",Le)),description:m.createElement(z,{type:Be,workSheetId:Q,workSheetName:_l("%0-\u590D\u5236",Le),onChanegSelectIds:function(W){b.relationControlIds=W},onChangeName:function(W){b.name=W}}),footer:m.createElement("div",{className:"Dialog-footer-btns"},m.createElement(y.Z,{action:function(){ae()},type:"link"},_l("\u53D6\u6D88")),m.createElement(y.Z,{action:le,type:"primary"},_l("\u590D\u5236")))})},ye=function(de,U){var pe=U.appId,Y=U.appItem,be=U.sheetListActions;te.Z.setWorksheetStatus({appId:pe,worksheetId:Y.workSheetId,status:de}).then(function(Q){Q.data&&be.updateSheetListAppItem(Y.workSheetId,{status:de})})};function v(se){var de=se.children,U=se.appItem,pe=se.appPkg,Y=se.isGroup,be=se.projectId,Q=se.appId,Le=se.groupId,Be=se.activeSheetId,ke=se.sheetListActions,Ie=se.onChangeEdit,he=(0,m.useState)(!1),Re=(0,oe.Z)(he,2),ue=Re[0],we=Re[1],Ee=(0,m.useState)(pe.currentPcNaviStyle===2?!1:U.edit||!1),b=(0,oe.Z)(Ee,2),le=b[0],ae=b[1],ve=(0,m.useState)(!1),W=(0,oe.Z)(ve,2),ce=W[0],Z=W[1],_e=(0,m.useState)(""),P=(0,oe.Z)(_e,2),xe=P[0],bt=P[1],tt=(0,m.useState)(!1),Dt=(0,oe.Z)(tt,2),vn=Dt[0],Fe=Dt[1],Bt=(0,a.le)(_.get(pe,["permissionType"]),_.get(pe,["isLock"])),kt=U.type===0,Tt=Be===U.workSheetId,tn={0:_l("\u5220\u9664\u5DE5\u4F5C\u8868%02029"),1:_l("\u5220\u9664\u81EA\u5B9A\u4E49\u9875\u9762"),2:_l("\u5220\u9664\u5206\u7EC4%02012")},Vn=function(cn,Mn){ke.createAppItem((0,Ne.default)({appId:Q,groupId:U.workSheetId,firstGroupId:Le,type:cn},Mn)),bt("")},Zn=function(){te.Z.markApp({projectId:be,appId:Q,itemId:U.workSheetId,isMark:!U.isMarked,type:U.type===0?2:U.type}).then(function(cn){cn&&(alert(U.isMarked?_l("\u5DF2\u53D6\u6D88\u6536\u85CF"):_l("\u6536\u85CF\u6210\u529F")),ke.updateSheetListAppItem(U.workSheetId,{isMarked:!U.isMarked}))}).catch(function(){alert(U.isMarked?_l("\u53D6\u6D88\u6536\u85CF\u5931\u8D25\uFF01"):_l("\u6536\u85CF\u5931\u8D25\uFF01"),2)})},Ot=function(){if(!((0,a.le)(_.get(pe,["permissionType"]))||(0,a.g9)(_.get(pe,["permissionType"]))))return m.createElement(Te.Z,{className:"worksheetItemOperate worksheetItemOperate-"+U.workSheetId},m.createElement(C.Z,{icon:m.createElement(Ce.Z,{icon:U.isMarked?"task-star":"star-hollow",className:"Font16",style:{color:U.isMarked?"#ffc402":"#9e9e9e"}}),onClick:Zn},m.createElement("span",{className:"text"},U.isMarked?_l("\u53D6\u6D88\u6536\u85CF"):_l("\u6536\u85CF"))));var cn=!Y||Bt&&U.type===1&&(U.urlTemplate?!0:Tt);return m.createElement(Te.Z,{className:"worksheetItemOperate worksheetItemOperate-"+U.workSheetId},!Y&&m.createElement(C.Z,{icon:m.createElement(Ce.Z,{icon:U.isMarked?"task-star":"star-hollow",className:"Font16",style:{color:U.isMarked?"#ffc402":"#9e9e9e"}}),onClick:Zn},m.createElement("span",{className:"text"},U.isMarked?_l("\u53D6\u6D88\u6536\u85CF"):_l("\u6536\u85CF"))),Bt&&U.type===1&&(U.urlTemplate?!0:Tt)&&m.createElement(C.Z,{icon:m.createElement(Ce.Z,{icon:"settings",className:"Font16"}),onClick:function(){U.urlTemplate?Fe(!0):window.editCustomPage&&window.editCustomPage(),we(!1)}},m.createElement("span",{className:"text"},U.urlTemplate?_l("\u7F16\u8F91\u5916\u90E8\u94FE\u63A5"):_l("\u7F16\u8F91\u753B\u5E03"))),cn&&m.createElement("hr",{className:"splitter"}),m.createElement(C.Z,{icon:m.createElement(Ce.Z,{icon:"edit",className:"Font16"}),onClick:function(){Ie?Ie(U.workSheetId):ae(!0),we(!1)}},m.createElement("span",{className:"text"},Ie?_l("\u4FEE\u6539\u540D\u79F0"):_l("\u4FEE\u6539\u540D\u79F0\u548C\u56FE\u6807%02023"))),Bt&&m.createElement(m.Fragment,null,!Y&&m.createElement(C.Z,{icon:m.createElement(Ce.Z,{icon:"content-copy",className:"Font16"}),onClick:function(){K(se),we(!1)}},m.createElement("span",{className:"text"},_l("\u590D\u5236%02022"))),m.createElement(C.Z,{icon:m.createElement(Ce.Z,{icon:"swap_horiz",className:"Font18"}),onClick:function(){Z(!0),we(!1)}},m.createElement("span",{className:"text"},_l("\u79FB\u52A8\u5230%02021"))),m.createElement(T.Z,{getPopupContainer:function(){return document.querySelector(".worksheetItemOperate-"+U.workSheetId)},action:["hover","click"],popupPlacement:"right",builtinPlacements:{right:{points:["cl","cr"]}},popup:m.createElement(Te.Z,{className:"hideItemOperate",style:{width:180}},m.createElement(C.Z,{onClick:function(){we(!1),ye(U.status===2?1:2,se)}},m.createElement("span",{className:"text flexRow"},_l("\u5168\u9690\u85CF")),U.status===2&&m.createElement(Ce.Z,{icon:"done",className:"Font18",style:{right:20,top:0,left:"initial"}})),m.createElement(C.Z,{onClick:function(){we(!1),ye(U.status===3?1:3,se)}},m.createElement("span",{className:"text flexRow"},_l("\u4EC5\u5728PC\u7AEF\u9690\u85CF")),U.status===3&&m.createElement(Ce.Z,{icon:"done",className:"Font18",style:{right:20,top:0,left:"initial"}})),m.createElement(C.Z,{onClick:function(){we(!1),ye(U.status===4?1:4,se)}},m.createElement("span",{className:"text flexRow"},_l("\u4EC5\u5728\u79FB\u52A8\u7AEF\u9690\u85CF")),U.status===4&&m.createElement(Ce.Z,{icon:"done",className:"Font18",style:{right:20,top:0,left:"initial"}}))),popupAlign:{offset:[0,-20]}},m.createElement(C.Z,{icon:m.createElement(Ce.Z,{icon:"visibility_off",className:"Font16"})},m.createElement("span",{className:"text flexRow"},m.createElement("span",null,_l("\u4ECE\u5BFC\u822A\u4E2D\u9690\u85CF%02020")),m.createElement(h.Z,{popupPlacement:"top",text:m.createElement("span",null,_l("\u8BBE\u4E3A\u9690\u85CF\u540E\uFF0C\u666E\u901A\u7528\u6237\u5728\u5BFC\u822A\u4E2D\u5C06\u770B\u4E0D\u5230\u6B64\u5E94\u7528\u9879\u5165\u53E3\uFF0C\u4EC5\u7CFB\u7EDF\u89D2\u8272\u5728\u5BFC\u822A\u4E2D\u53EF\u89C1\uFF08\u5305\u542B\u7BA1\u7406\u5458\u3001\u5F00\u53D1\u8005\uFF09\uFF0C\u5E94\u7528\u9879\u6743\u9650\u4F9D\u7136\u9075\u5FAA\u89D2\u8272\u6743\u9650\u539F\u5219\u3002\u6B64\u914D\u7F6E\u901A\u5E38\u7528\u4E8E\u4E0D\u9700\u8981\u7528\u6237\u76F4\u63A5\u8BBF\u95EE\uFF0C\u4EC5\u4F5C\u4E3A\u914D\u7F6E\u7528\u9014\u7684\u5E94\u7528\u9879\uFF0C\u5982\uFF1A\u5173\u8054\u7684\u660E\u7EC6\u8868\u3001\u53C2\u6570\u8868\u7B49\u3002"))},m.createElement(Ce.Z,{className:"Font14",icon:"help",style:{position:"relative",left:5}})),m.createElement(Ce.Z,{icon:"arrow-right-tip Font15",style:{fontSize:"16px",right:"10px",left:"initial"}})))),Y&&m.createElement(m.Fragment,null,m.createElement("hr",{className:"splitter"}),m.createElement("div",{className:"Gray_9e pLeft12 mTop10"},_l("\u65B0\u5EFA")),m.createElement(C.Z,{onClick:function(){bt("worksheet"),we(!1)}},m.createElement(Ce.Z,{icon:"plus",className:"Font18"}),m.createElement("span",{className:"text"},_l("\u4ECE\u7A7A\u767D\u521B\u5EFA\u5DE5\u4F5C\u8868%02015"))),m.createElement(C.Z,{onClick:function(){bt("importExcel"),we(!1)}},m.createElement(Ce.Z,{icon:"new_excel",className:"Font18"}),m.createElement("span",{className:"text"},_l("\u4ECEExcel\u521B\u5EFA\u5DE5\u4F5C\u8868%02014"))),m.createElement(C.Z,{icon:m.createElement(Ce.Z,{icon:"dashboard",className:"Font18"}),onClick:function(){bt("customPage"),we(!1)}},m.createElement("span",{className:"text"},_l("\u81EA\u5B9A\u4E49\u9875\u9762%02013")))),m.createElement("hr",{className:"splitter"}),m.createElement(C.Z,{icon:m.createElement(Ce.Z,{icon:"delete2",className:"Font16"}),className:"delete",onClick:function(){Y?q(se):N(se),we(!1)}},m.createElement("span",{className:"text"},tn[U.type]))))};return(0,m.useEffect)(function(){var $t=document.querySelector(".workSheetItem-"+U.workSheetId);ue?$t&&$t.classList.add("hover"):$t&&$t.classList.remove("hover")},[ue]),m.createElement(m.Fragment,null,m.createElement(T.Z,{popupVisible:ue,onPopupVisibleChange:function(cn){we(cn)},action:["click"],popup:Ot(),popupAlign:{points:["tl","bl"],offset:[1,1],overflow:{adjustX:!0,adjustY:!0}}},de),m.createElement(T.Z,{popupVisible:le,action:["click"],popup:m.createElement(i.Z,{projectId:be,className:"sheetSelectIconWrap relative",isActive:Tt,appItem:U,name:U.workSheetName,icon:U.icon,iconColor:pe.iconColor,appId:Q,groupId:Le,workSheetId:U.workSheetId,updateSheetListAppItem:ke.updateSheetListAppItem,onCancel:function(){ke.updateSheetListAppItem(U.workSheetId,{edit:!1}),ae(!1)}}),destroyPopupOnHide:!0,popupAlign:{points:["tl","bl"],offset:pe.currentPcNaviStyle===2?[0,5]:[-220,20],overflow:{adjustX:!0,adjustY:!0}}},m.createElement("div",{className:"setSheetInfo"})),ce&&m.createElement(me.Z,{appId:Q,groupId:Le,appItem:U,onSave:function(cn){var Mn=cn.resultAppId,dt=cn.ResultAppSectionId;if(we(!1),Z(!1),(U.parentGroupId||Le)===dt){alert(_l("\u76F8\u540C\u7EC4\u4E0D\u9700\u8981\u79FB\u52A8"),3);return}ke.moveSheet({sourceAppId:Q,resultAppId:Mn,sourceAppSectionId:Le,ResultAppSectionId:dt,workSheetsInfo:[U]})},onClose:function(){return Z(!1)}}),vn&&m.createElement(R.j,{appId:Q,groupId:Le,appItem:U,updateSheetListAppItem:ke.updateSheetListAppItem,onCancel:function(){return Fe(!1)}}),!!xe&&(["customPage","worksheet"].includes(xe)?m.createElement(r.Z,{type:xe,onCreate:Vn,onCancel:function(){return bt("")}}):m.createElement(J.Z,{projectId:be,appId:Q,groupId:U.workSheetId,onCancel:function(){return bt("")},createType:"worksheet",refreshPage:function(){ke.getSheetList({appId:Q,appSectionId:U.parentId})}})))}},91516:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>v,i:()=>ye});var h=t(56002),Te=t(6100),C=t(70264),Ce=t(33867),Ne=t(85105),j=t.n(Ne),L=t(99663),I=t(22600),k=t(49135),e=t(93196),oe=t(86735),m=t(67294),y=t(93967),i=t.n(y),me=t(13714),J=t(5167),T=t(5232),te=t(71893),E=t(96486),r=t.n(E),R=t(70973),a=t(87600),z=t(24607),N=t(15577),q=(0,oe.Z)([`
  &.active .name::before {
    background-color: `,` !important;
  }
`],[`
  &.active .name::before {
    background-color: `,` !important;
  }
`]),K=te.ZP.div(q,function(se){return se.iconColor});function ye(se){return se?(0,me.default)(se).setAlpha(.1):"#bbdefb"}var v=function(se){(0,e.default)(de,se);function de(U){(0,L.default)(this,de);var pe=(0,k.default)(this,(de.__proto__||j()(de)).call(this,U));return pe.state={},pe}return(0,I.default)(de,[{key:"svgColor",value:function(pe){var Y=this.props.appPkg,be=Y.iconColor,Q=Y.currentPcNaviStyle,Le=Y.themeType,Be=[1,3].includes(Q)&&!["light"].includes(Le);return Be?"rgba(255, 255, 255, "+(pe?1:.9)+")":[1,3].includes(Q)?pe||["light"].includes(Le)?be:"#757575":pe?be:"#757575"}},{key:"textColor",value:function(pe){var Y=this.props.appPkg,be=Y.iconColor,Q=Y.currentPcNaviStyle,Le=Y.themeType,Be=[1,3].includes(Q)&&!["light"].includes(Le);return Be?"rgba(255, 255, 255, "+(pe?1:.9)+")":pe?be:void 0}},{key:"bgColor",value:function(){var pe=this.props.appPkg,Y=pe.iconColor,be=pe.currentPcNaviStyle,Q=pe.themeType;return[1,3].includes(be)&&!["light"].includes(Q)?Q==="theme"?"rgba(0, 0, 0, 0.15)":"rgba(255, 255, 255, 0.15)":ye(Y)}},{key:"getNavigateUrl",value:function(pe){var Y=this.props,be=Y.appId,Q=Y.groupId,Le=Y.activeSheetId,Be=Y.appItem,ke=Be.workSheetId,Ie=JSON.parse(localStorage.getItem("mdAppCache_"+md.global.Account.accountId+"_"+be))||{},he=(r().find(Ie.worksheets||[],function(ue){return ue.groupId===Q&&ue.worksheetId===ke})||{}).viewId||"",Re="/app/"+be+"/"+Q+"/"+ke+(he?"/"+he:"");return pe&&(Re+="?flag="+(this.state.flag||Date.now())),Re}},{key:"render",value:function(){var pe=this,Y=this.props,be=Y.projectId,Q=Y.appId,Le=Y.groupId,Be=Y.appItem,ke=Y.activeSheetId,Ie=Y.className,he=Y.isCharge,Re=Y.appPkg,ue=Y.sheetListVisible,we=Y.disableTooltip,Ee=Be.workSheetId,b=Be.icon,le=Be.iconUrl,ae=Be.status,ve=Be.parentStatus,W=Be.type,ce=Be.configuration,Z=ce===void 0?{}:ce,_e=Be.urlTemplate,P=Be.layerIndex,xe=(0,N.T3)(Q,Ee).name||Be.workSheetName,bt=ke===Ee,tt=Re.iconColor,Dt=Re.currentPcNaviStyle,vn=Re.themeType,Fe=Re.displayIcon,Bt=Fe===void 0?"":Fe,kt=Re.hideFirstSection,Tt=Dt===3&&kt&&Be.firstGroupIndex===0?!0:Bt.split("")[P]==="1",tn=Z.openType=="2",Vn=this.getNavigateUrl(bt),Zn=function(){var Mn=(0,a.Pz)(_e),dt=[];Mn.map(function($e){$e.staticValue?dt.push($e.staticValue):dt.push((0,z.fS)({projectId:be,appId:Q,groupId:Le,worksheetId:Ee},$e.cid))}),window.open(dt.join(""))},Ot=function(){var Mn="visibility_off";return(ae===3||ve===3)&&(Mn="desktop_off"),(ae===4||ve===4)&&(Mn="mobile_off"),([2,3,4].includes(ae)||[2,3,4].includes(ve))&&m.createElement(C.Z,{popupPlacement:"right",text:m.createElement("span",null,_l("\u4EC5\u7CFB\u7EDF\u89D2\u8272\u5728\u5BFC\u822A\u4E2D\u53EF\u89C1\uFF08\u5305\u542B\u7BA1\u7406\u5458\u3001\u5F00\u53D1\u8005\uFF09\uFF0C\u5E94\u7528\u9879\u6743\u9650\u4F9D\u7136\u9075\u5FAA\u89D2\u8272\u6743\u9650\u539F\u5219"))},m.createElement(Ce.Z,{className:"Font16 mRight10 visibilityIcon",icon:Mn,style:{color:[1,3].includes(Dt)&&vn==="theme"?"#FCD8D3":"#ee6f09"}}))},$t=m.createElement(m.Fragment,null,Tt&&m.createElement("div",{className:"iconWrap mRight10"},m.createElement(Te.Z,{url:le,fill:this.svgColor(bt),size:22})),m.createElement("span",{className:i()("name ellipsis Font14 mRight10",{bold:bt,pLeft8:!Tt&&P===2&&[1].includes(Dt)}),title:xe,style:{color:this.textColor(bt)}},xe),tn&&m.createElement(C.Z,{popupPlacement:"bottom",text:m.createElement("span",null,_l("\u65B0\u9875\u9762\u6253\u5F00"))},m.createElement(Ce.Z,{className:"Font16 mRight10 mTop2 openIcon",icon:"launch"})),Ot());return m.createElement(T.Z,{appItem:Be,appPkg:Re,isCharge:he},m.createElement(C.Z,{popupAlign:{offset:[-10,0]},disable:r().isUndefined(we)?ue:we,popupPlacement:"right",text:m.createElement("span",null,xe)},m.createElement(K,{style:{backgroundColor:bt&&this.bgColor()},iconColor:["black"].includes(Re.themeType)?Re.iconColor:"",className:i()("workSheetItem flexRow Relative",Ie,"workSheetItem-"+Ee,{active:bt}),"data-id":Ee},tn?m.createElement("div",{className:"NoUnderline valignWrapper h100 nameWrap",onClick:Zn},$t):m.createElement(h.Z,{className:"NoUnderline valignWrapper h100 nameWrap",to:Vn,onClick:function(){W==0&&(0,N.Ye)("worksheet",Ee),W==1&&(0,N.Ye)("customPage",Ee),pe.setState({flag:Date.now()})}},$t),!(!(0,R.le)(r().get(Re,["permissionType"]))&&!(0,R.g9)(r().get(Re,["permissionType"]))&&(window.isPublicApp||md.global.Account.isPortal))&&m.createElement(J.Z,this.props,m.createElement("div",{className:"rightArea moreBtn"},m.createElement(Ce.Z,{icon:"more_horiz",className:"Font18 moreIcon"}))))))}}]),de}(m.Component)},93006:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>e});var h=t(88239),Te=t(69288),C=t(12424),Ce=t(67294),Ne=t(87506),j=t.n(Ne),L=t(45697),I=t.n(L),k=t(58002);function e(oe){var m=oe.isAll,y=oe.isCharge,i=oe.selectedLength,me=oe.onRestore,J=oe.onHardDelete,T=oe.onCancel,te=oe.entityName,E=(0,Ce.useState)({}),r=(0,C.Z)(E,2),R=r[0],a=r[1],z=R.select1000;return Ce.createElement(j(),{transitionName:"trashBatchOperateCon",transitionEnterTimeout:500,transitionLeaveTimeout:300},!!i&&Ce.createElement("div",{className:"trashBatchOperateCon"},Ce.createElement("span",{className:"selectedStatus Font14"},m?_l(z?"\u5DF2\u9009\u62E9 1000 \u6761\u6570\u636E":"\u5DF2\u9009\u62E9\u201D\u5168\u90E8\u201C\u6240\u6709 %0 \u6761%1",i,te):_l("\u5DF2\u9009\u62E9\u672C\u9875 %0 \u6761%1",i,te)),Ce.createElement(k.Z,{className:"restore",icon:"reply",text:_l("\u6062\u590D"),onClick:function(){i>1e3?Te.Z.confirm({title:Ce.createElement("span",{style:{fontWeight:500,lineHeight:"1.5em"}},_l("\u6700\u5927\u652F\u6301\u6279\u91CF\u6062\u590D1000\u6761\u8BB0\u5F55\uFF0C\u662F\u5426\u53EA\u9009\u4E2D\u5E76\u6062\u590D\u524D1000\u6761\u6570\u636E\uFF1F")),onOk:function(){a((0,h.default)({},R,{select1000:!0})),me()}}):me()}}),y&&Ce.createElement(k.Z,{className:"delete",icon:"delete2",text:_l("\u5F7B\u5E95\u5220\u9664"),onClick:J}),Ce.createElement("span",{className:"Right cancelSelect ThemeColor3 Hand Font14",onClick:T},_l("\u53D6\u6D88"))))}e.propTypes={selectedLength:I().number,onRestore:I().func,onHardDelete:I().func,onCancel:I().func}},57645:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>Zn});var h=t(42057),Te=t(88106),C=t(42723),Ce=t(9122),Ne=t(60967),j=t(69288),L=t(52945),I=t.n(L),k=t(88239),e=t(12424),oe=t(86735),m=t(67294),y=t(45697),i=t.n(y),me=t(71893),J=t(7145),T=t.n(J),te=t(45231),E=t(24607),r=t(59292),R=t(85964),a=t(62521),z=t(16469),N=t(88902),q=t.n(N),K=t(93967),ye=t.n(K),v=t(89499),se=t(44253),de=t(89557),U=t(62232),pe=t(96486),Y=t.n(pe);function be(Ot){var $t=Ot.worksheetId,cn=Ot.selected,Mn=Ot.className,dt=Ot.style,$e=Ot.control,jt=Ot.isAsc,rn=Ot.isLast,Rt=Ot.changeSort,St=Ot.updateSheetColumnWidths,zt=Ot.onShowFullValue,oa=(0,U.fi)($e),qn=$e.type===30?$e.sourceControlType:$e.type,In=Y().flatten(q()(se.Cz).map(function(rt){return se.Cz[rt].keys})),Vt=Y().includes(In,qn),Yt=(0,v.ir)(qn),qt=Y().get($e,"advancedSetting.datamask")==="1"&&Y().get($e,"advancedSetting.isdecrypt")==="1";return m.createElement(de.Z,{canDrag:!1,className:Mn,style:dt,control:$e,showDropdown:!0,isLast:rn,isAsc:jt,changeSort:Rt,updateSheetColumnWidths:St,renderPopup:function(Qe){var ht=Qe.closeMenu;return m.createElement(a.Z,{className:"worksheetColumnHeadMenu",style:{width:180},onClickAway:ht},Yt&&!oa&&(0,v.Zv)(qn,$e).map(function(Lt){return m.createElement(z.Z,{key:Lt.value,onClick:function(){Rt(Lt.value===2),ht()}},m.createElement("i",{className:ye()("icon",Lt.value===1?"icon-descending-order2":"icon-ascending-order2")}),Lt.text)}),qt&&m.createElement(z.Z,{onClick:zt},m.createElement("i",{className:"icon icon-eye_off"}),_l("\u89E3\u7801")),Vt&&!cn&&!oa&&m.createElement(z.Z,{onClick:function(){v.uY.emit("FILTER_ADD_FROM_COLUMNHEAD"+$t+"trash",$e),ht()}},m.createElement("i",{className:"icon icon-worksheet_filter"}),_l("\u7B5B\u9009")))}})}be.propTypes={className:i().string,style:i().shape({}),isAsc:i().bool,isLast:i().bool,selected:i().bool,control:i().shape({controlId:i().any,sourceControlType:i().any,type:i().number}),changeSort:i().func,updateSheetColumnWidths:i().func};var Q=t(93006);const Le=Q.Z;var Be=t(51040),ke=t(58173),Ie=t(21433),he=(0,oe.Z)([`
  height: 62px;
  display: flex;
  align-items: center;
  border-bottom: 1px solid rgba(0, 0, 0, 0.09) !important;
  margin: 0 -24px;
  padding: 0 24px;
  .queryInput {
    margin: 5px 16px 0 0;
  }
  .pagination {
    line-height: 1em;
    margin-right: 8px;
  }
  .worksheetFilterBtn {
    line-height: 1em;
    margin-top: 2px;
    margin-right: 12px;
  }
`],[`
  height: 62px;
  display: flex;
  align-items: center;
  border-bottom: 1px solid rgba(0, 0, 0, 0.09) !important;
  margin: 0 -24px;
  padding: 0 24px;
  .queryInput {
    margin: 5px 16px 0 0;
  }
  .pagination {
    line-height: 1em;
    margin-right: 8px;
  }
  .worksheetFilterBtn {
    line-height: 1em;
    margin-top: 2px;
    margin-right: 12px;
  }
`]),Re=(0,oe.Z)([`
  margin-top: 2px;
  color: #9e9e9e;
`],[`
  margin-top: 2px;
  color: #9e9e9e;
`]),ue=(0,oe.Z)([`
  margin-left: 10px;
  margin-top: 2px;
  font-weight: 600;
  cursor: pointer;
  color: #2196f3;
`],[`
  margin-left: 10px;
  margin-top: 2px;
  font-weight: 600;
  cursor: pointer;
  color: #2196f3;
`]),we=(0,oe.Z)([`
  font-size: 17px;
  font-weight: 500;
`],[`
  font-size: 17px;
  font-weight: 500;
`]),Ee=(0,oe.Z)([`
  display: flex;
  align-items: center;
  .icon-worksheet_filter,
  .inputCon > .icon-search {
    &:hover {
      color: #2196f3 !important;
    }
  }
`],[`
  display: flex;
  align-items: center;
  .icon-worksheet_filter,
  .inputCon > .icon-search {
    &:hover {
      color: #2196f3 !important;
    }
  }
`]),b=(0,oe.Z)([`
  cursor: pointer;
  line-height: 1em;
  font-size: 22px;
  color: #9e9e9e;
  &:hover {
    color: #2196f3;
  }
`],[`
  cursor: pointer;
  line-height: 1em;
  font-size: 22px;
  color: #9e9e9e;
  &:hover {
    color: #2196f3;
  }
`]),le=me.ZP.div(he),ae=me.ZP.div(Re),ve=me.ZP.span(ue),W=me.ZP.div(we),ce=me.ZP.span(Ee),Z=me.ZP.span(b);function _e(Ot,$t){var cn=Ot.entityName,Mn=Ot.title,dt=Ot.isCharge,$e=Ot.projectId,jt=Ot.appId,rn=Ot.viewId,Rt=Ot.worksheetId,St=Ot.pageIndex,zt=Ot.pageSize,oa=zt===void 0?25:zt,qn=Ot.count,In=qn===void 0?0:qn,Vt=Ot.controls,Yt=Vt===void 0?[]:Vt,qt=Ot.loadRows,rt=qt===void 0?function(){}:qt,Qe=Ot.onClear,ht=Qe===void 0?function(){}:Qe,Lt=Ot.onCancel,Ct=Lt===void 0?function(){}:Lt,mt=Ot.changePageSize,vt=mt===void 0?function(){}:mt,Xt=Ot.changePageIndex,bn=Xt===void 0?function(){}:Xt,pn=(0,m.useRef)(),Rn=(0,m.useState)(),fe=(0,e.Z)(Rn,2),$n=fe[0],gn=fe[1],en=(0,m.useState)(""),_t=(0,e.Z)(en,2),nn=_t[0],Gt=_t[1];return(0,m.useImperativeHandle)($t,function(){return{addFilterByControl:function(Mt){try{pn.current.handleWorksheetHeadAddFilter(Mt)}catch(ze){}}}}),m.createElement(le,null,m.createElement("div",{className:"flex flexRow overflow_ellipsis"},m.createElement(W,{className:"overflow_ellipsis"},Mn),m.createElement(ae,null," ",_l("%0%1\u5929\u540E\u5C06\u88AB\u81EA\u52A8\u5220\u9664",cn,md.global.SysSettings.worksheetRowRecycleDays)," "),dt&&m.createElement(ve,{onClick:function(){j.Z.confirm({title:m.createElement("span",{style:{color:"#f44336"}},_l("\u662F\u5426\u6E05\u7A7A\u56DE\u6536\u7AD9")),buttonType:"danger",anim:!1,description:_l("\u6E05\u7A7A\u540E\uFF0C\u8BB0\u5F55\u65E0\u6CD5\u6062\u590D\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01"),onOk:ht})}},_l("\u7ACB\u5373\u6E05\u7A7A"))),m.createElement(ce,null,m.createElement(Ie.Z,{active:$n,value:nn,className:"queryInput",onFocus:function(){return!$n&&gn(!0)},onBlur:function(){return $n&&gn(!1)},onOk:function(Mt){Gt(Mt),rt({pageIndex:1,searchText:Mt})},onClear:function(){rt({pageIndex:1,searchText:""}),gn(!1)}}),m.createElement(ke.Z,{type:"trash",onlyUseEditing:!0,zIndex:1e3,isCharge:dt,appId:jt,viewId:rn,projectId:$e,worksheetId:Rt,filterResigned:!1,columns:Yt,onChange:function(Mt){var ze=Mt.searchType,yt=Mt.filterControls;rt({pageIndex:1,searchType:ze,filterControls:yt})}}),m.createElement(Be.Z,{className:"pagination",pageIndex:St,pageSize:oa,allCount:In,onPrev:function(){rt({pageIndex:St-1})},onNext:function(){rt({pageIndex:St+1})},changePageSize:vt,changePageIndex:bn}),m.createElement(Z,{onClick:Ct},m.createElement("i",{className:"icon icon-close"}))))}_e.propTypes={isCharge:y.bool,title:y.string,projectId:y.string,appId:y.string,viewId:y.string,worksheetId:y.string,controls:(0,y.arrayOf)((0,y.shape)({})),loadRows:y.func,onCancel:y.func,onClear:y.func,pageIndex:y.number,pageSize:y.number,count:y.number,changePageSize:y.func,changePageIndex:y.func};const P=(0,m.forwardRef)(_e);var xe=t(15742),bt=t(33174),tt=(0,oe.Z)([`
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
`],[`
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
`]),Dt=(0,oe.Z)([`
  flex: 1;
  overflow: hidden;
  margin: 0 -24px;
`],[`
  flex: 1;
  overflow: hidden;
  margin: 0 -24px;
`]),vn=(0,oe.Z)([`
  width: 130px;
  height: 130px;
  background-color: #f5f5f5;
  display: inline-block;
  border-radius: 130px;
  text-align: center;
  line-height: 130px;
  font-size: 80px;
  color: #c2c3c3;
  margin-bottom: 12px;
`],[`
  width: 130px;
  height: 130px;
  background-color: #f5f5f5;
  display: inline-block;
  border-radius: 130px;
  text-align: center;
  line-height: 130px;
  font-size: 80px;
  color: #c2c3c3;
  margin-bottom: 12px;
`]),Fe=me.ZP.div(tt),Bt=me.ZP.div(Dt),kt=me.ZP.div(vn),Tt=function($t,cn){switch(cn.type){case"UPDATE_RECORDS":return T()($t,{$merge:Y().omit(cn,["type"])});case"DELETE_RECORD":return T()($t,{records:{$apply:function(dt){return dt.filter(function($e){return!Y().includes(cn.ids,$e.rowid)})}},count:{$set:$t.count-cn.ids.length}});case"UPDATE_LOADING":return T()($t,{loading:{$set:cn.loading}});case"CLEAR":return{loading:!1};default:return $t}},tn=50,Vn=function($t,cn){return{loadRows:function(dt){var $e=dt.appId,jt=dt.worksheetId,rn=dt.searchType,Rt=rn===void 0?1:rn,St=dt.pageIndex,zt=dt.pageSize,oa=dt.searchText,qn=dt.sortControls,In=qn===void 0?[]:qn,Vt=dt.filterControls,Yt=Vt===void 0?[]:Vt;In.filter(Y().identity).length===0&&(In=[{controlId:"dtime",datatype:16,isAsc:!1}]),$t({type:"UPDATE_LOADING",loading:!0}),te.Z.getFilterRows({appId:$e,worksheetId:jt,searchType:Rt,pageSize:zt,pageIndex:St,keyWords:oa,status:9,sortControls:In.filter(Y().identity),filterControls:Yt}).then(function(qt){$t({type:"UPDATE_RECORDS",records:qt.data,count:qt.count,pageIndex:St,pageSize:zt,filterControls:Yt,loading:!1})})},deleteRecord:function(dt){$t({type:"DELETE_RECORD",ids:dt})},clear:function(dt){var $e=dt.appId,jt=dt.worksheetId;te.Z.removeWorksheetRows({appId:$e,worksheetId:jt}).then(function(){$t({type:"CLEAR"}),alert(_l("\u5DF2\u6E05\u7A7A\u56DE\u6536\u7AD9"))})}}};function Zn(Ot){var $t=Ot.isCharge,cn=Ot.projectId,Mn=Ot.appId,dt=Ot.viewId,$e=Ot.worksheetId,jt=Ot.controls,rn=jt===void 0?[]:jt,Rt=Ot.worksheetInfo,St=Rt===void 0?{}:Rt,zt=Ot.reloadWorksheet,oa=zt===void 0?function(){}:zt,qn=Ot.onCancel,In=qn===void 0?function(){}:qn,Vt=(0,m.useRef)(),Yt=(0,m.useRef)(!0),qt=(0,m.useState)(!1),rt=(0,e.Z)(qt,2),Qe=rt[0],ht=rt[1],Lt=(0,m.useState)([]),Ct=(0,e.Z)(Lt,2),mt=Ct[0],vt=Ct[1],Xt=(0,m.useState)([]),bn=(0,e.Z)(Xt,2),pn=bn[0],Rn=bn[1],fe=(0,m.useState)(),$n=(0,e.Z)(fe,2),gn=$n[0],en=$n[1],_t=(0,m.useState)({}),nn=(0,e.Z)(_t,2),Gt=nn[0],xt=nn[1],Mt=(0,m.useReducer)(Tt,{records:[]}),ze=(0,e.Z)(Mt,2),yt=ze[0],Ut=ze[1],Wt=yt.loading,kn=Wt===void 0?!0:Wt,on=yt.count,En=on===void 0?0:on,fn=yt.pageIndex,jn=fn===void 0?1:fn,Ta=yt.pageSize,zn=Ta===void 0?tn:Ta,pa=yt.records,Ea=pa===void 0?[]:pa,la=yt.filterControls,Kn=yt.searchText,sa=Kn===void 0?"":Kn,ba=(jn-1)*zn,Fa=pn.filter(function(An){return An.allowedit||An.allowEdit}),wa=Fa.map(function(An){return An.rowid}),Na=Vn(Ut,yt),Za=rn.filter(function(An){return!Y().includes(xe.CC,An.type)&&!Y().includes(["utime","uaid"],An.controlId)&&(0,E.kM)(An).visible}).map(function(An){return Gt[An.controlId]?(0,k.default)({},An,{advancedSetting:I()({},An.advancedSetting,{datamask:"0"})}):An}).concat([{controlId:"dtime",controlName:_l("\u5220\u9664\u65F6\u95F4"),type:16},{controlId:"daid",controlName:_l("\u5220\u9664\u8005"),type:26}]);function ya(An){Na.loadRows(I()({},{appId:Mn,worksheetId:$e,pageIndex:jn,pageSize:zn,sortControls:[gn],filterControls:la},An))}return(0,m.useEffect)(function(){ya({appId:Mn,worksheetId:$e,pageIndex:jn,sortControls:[gn]})},[]),m.createElement(bt.Z,null,m.createElement(h.Z,{visible:!0,closable:!1,width:document.body.clientWidth*.9,type:"fixed",bodyStyle:{paddingTop:0,position:"relative"},closeStyle:{margin:"16px",width:"30px",height:"30px",lineHeight:"30px"}},m.createElement(Fe,null,m.createElement(Le,{isCharge:$t,isAll:Qe,selectedLength:Qe?En-mt.length:mt.length,totalLength:Ea.length,entityName:St.entityName,onRestore:function(){if(!Qe&&wa.length===0)alert(_l("\u65E0\u6743\u9650\u6062\u590D\u9009\u62E9\u7684\u8BB0\u5F55"),3),vt([]);else{var ma=function(){var Ma={appId:Mn,worksheetId:$e,rowIds:wa};Qe&&(delete Ma.rowIds,Ma.isAll=!0,Ma.excludeRowIds=wa,Ma.filterControls=la),Ma.restoreRelation=!!Yt.current,te.Z.restoreWorksheetRows(Ma).then(function(Ya){if(!Ya.isSuccess){alert(_l("\u6062\u590D\u5931\u8D25"),3);return}if(ht(!1),Ya.successCount===mt.length||Qe)alert(_l("\u6062\u590D\u6210\u529F")),vt([]),oa(),Na.deleteRecord(wa);else{alert(_l("\u6062\u590D\u6210\u529F\uFF0C\u90E8\u5206\u6570\u636E\u5DF2\u88AB\u5F7B\u5E95\u5220\u9664\u65E0\u6CD5\u6062\u590D")),vt([]),oa();return}setTimeout(function(){ya({pageIndex:1})},Qe?1e3:0)})};rn.find(function(fa){return fa.type===29})?j.Z.confirm({title:_l("\u6062\u590D\u8BB0\u5F55"),description:m.createElement(Ne.Z,{defaultChecked:!!Yt.current,text:_l("\u6062\u590D\u8BB0\u5F55\u540C\u65F6\u6062\u590D\u5173\u8054\u5173\u7CFB"),onClick:function(Ma){Yt.current=Ma}}),onOk:ma}):ma()}},onCancel:function(){ht(!1),vt([]),Rn([])},onHardDelete:function(){Ce.Z.confirm({title:m.createElement("div",{className:"Bold",style:{color:"#f44336",display:"flex",alignItems:"center"}},m.createElement("i",{className:"icon-error error",style:{fontSize:"28px",marginRight:"8px"}}),_l("\u5F7B\u5E95\u5220\u9664%0",St.entityName)),description:m.createElement("div",{className:"Font14 Gray_75"},_l("\u5220\u9664\u540E\u65E0\u6CD5\u6062\u590D(\u7269\u7406\u5220\u9664)\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01")),confirmType:"danger",allowNoVerify:!1,isRequired:!1,closeImageValidation:!1,onOk:function(){if(!Qe&&wa.length===0)alert(_l("\u65E0\u6743\u9650\u5220\u9664\u9009\u62E9\u7684\u8BB0\u5F55"),3),vt([]);else{var fa={worksheetId:$e,appId:Mn,rowIds:wa};Qe&&(delete fa.rowIds,fa.isAll=!0,fa.excludeRowIds=wa),te.Z.removeWorksheetRows(fa).then(function(){if(pn.length===mt.length||Qe?alert(_l("\u5220\u9664\u6210\u529F")):alert(_l("\u5220\u9664\u6210\u529F\uFF0C\u65E0\u7F16\u8F91\u6743\u9650\u7684\u8BB0\u5F55\u65E0\u6CD5\u5220\u9664")),ht(!1),vt([]),oa(),Qe){setTimeout(function(){ya({pageIndex:1})},1e3);return}Na.deleteRecord(wa)})}}})}}),m.createElement(P,{ref:Vt,entityName:St.entityName,title:_l("\u56DE\u6536\u7AD9")+"\uFF08"+St.name+"\uFF09",isCharge:$t,projectId:cn,appId:Mn,viewId:dt,worksheetId:$e,controls:Za,pageSize:zn,pageIndex:jn,count:En,onCancel:In,loadRows:ya,onClear:function(){return Na.clear({worksheetId:$e,appId:Mn})},onSearch:function(ma){return ya({pageIndex:1,searchText:ma})},onReload:function(){return ya({pageIndex:1,searchText:""})},changePageSize:function(ma){return ya({pageSize:ma,pageIndex:1})},changePageIndex:function(ma){return ya({pageIndex:ma})}}),m.createElement(Bt,null,m.createElement(r.Z,{isTrash:!0,appId:Mn,loading:kn,viewId:dt,projectId:cn,noRenderEmpty:!sa,lineNumberBegin:ba,columns:Za,rowHeight:34,selectedIds:mt,data:Ea,renderColumnHead:function(ma){var fa=ma.control,Ma=(0,C.Z)(ma,["control"]);return m.createElement(be,(0,k.default)({},Ma,{control:Gt[fa.controlId]?(0,k.default)({},fa,{advancedSetting:I()({},fa.advancedSetting,{datamask:"0"})}):fa,worksheetId:$e,type:"trash",selected:!!mt.length,isAsc:fa.controlId===(gn||{}).controlId?(gn||{}).isAsc:void 0,changeSort:function(Ba){var La=Y().isUndefined(Ba)?{}:{controlId:fa.controlId,isAsc:Ba};en(La),ya({sortControls:Y().isUndefined(Ba)?[]:[(0,k.default)({datatype:fa.type},La)]})},onShowFullValue:function(){xt((0,k.default)({},Gt,(0,Te.default)({},fa.controlId,!0)))}}))},renderRowHead:function(ma){var fa=ma.className,Ma=ma.style,Ya=ma.rowIndex,Ba=ma.row;return m.createElement(R.Z,{isTrash:!0,canSelectAll:!0,className:fa,style:(0,k.default)({},Ma,{width:String(ba+Ya).length*8+64}),lineNumberBegin:ba,allWorksheetIsSelected:Qe,selectedIds:mt,onSelectAllWorksheet:function(){ht(!Qe),vt([]),Rn([])},onSelect:function(Qa){var nr=[];Qe?(Qa.forEach(function(Rr){nr=Ea.filter(function(hr){return Y().find(Qa,function(yr){return hr.rowid!==yr})}),Qa=nr.map(function(hr){return hr.rowid})}),ht(!1)):(Qa.forEach(function(Rr){var hr=Y().find(Ea,function(yr){return yr.rowid===Rr});hr&&(hr.allowedit||hr.allowEdit)&&nr.push(hr)}),ht(!1)),vt(Qa),Rn(nr)},onReverseSelect:function(){if(Qe)ht(!1),vt([]),Rn([]);else{var Qa=Ea.filter(function(nr){return!Y().find(mt,function(Rr){return Rr===nr.rowid})}).filter(Y().identity);Rn(Qa),vt(Qa.map(function(nr){return nr.rowid}))}},rowIndex:Ya,data:Ea})},emptyIcon:m.createElement(kt,null,m.createElement("i",{className:"icon icon-search"})),emptyText:_l("\u6CA1\u6709\u641C\u7D22\u7ED3\u679C")})))))}Zn.propTypes={isCharge:y.bool,projectId:y.string,appId:y.string,viewId:y.string,worksheetId:y.string,controls:(0,y.arrayOf)((0,y.shape)({})),worksheetInfo:(0,y.shape)({}),reloadWorksheet:y.func,onCancel:y.func}},21509:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>In});var h=t(85105),Te=t.n(h),C=t(99663),Ce=t(22600),Ne=t(49135),j=t(93196),L=t(99934),I=t(67294),k=t(45697),e=t.n(k),oe=t(69288),m=t(42185),y=t(66946),i=t(93967),me=t.n(i),J=t(96486),T=t.n(J),te=t(43393),E=t.n(te),r=t(97238),R=t(19771),a=t(44388),z=t(33867),N,q,K=(q=N=function(Vt){(0,j.default)(Yt,Vt);function Yt(){return(0,C.default)(this,Yt),(0,Ne.default)(this,(Yt.__proto__||Te()(Yt)).apply(this,arguments))}return(0,Ce.default)(Yt,[{key:"render",value:function(){var rt=this.props,Qe=rt.status,ht=rt.errorText,Lt=(parseInt(this.props.percentage*100,10)||0)+"%",Ct=void 0,mt=void 0,vt=void 0;switch(Qe){case a.TE.COMPLETE:Lt="100%",Ct="bgSuccess",mt=_l("\u4E0A\u4F20\u6210\u529F"),vt=I.createElement(z.Z,{className:"uploadPercentageText fgSuccess",icon:"ok"});break;case a.TE.ERROR:Ct="bgError",mt=ht||"\u4E0A\u4F20\u5931\u8D25",vt=I.createElement(z.Z,{className:"uploadPercentageText fgError",icon:"delete"});break;case a.TE.UPLOADING:Ct="ThemeBGColor3",mt=Lt==="100%"?_l("\u5373\u5C06\u5B8C\u6210"):_l("\u4E0A\u4F20\u4E2D"),vt=I.createElement("span",{className:"uploadPercentageText"},Lt);break;case a.TE.QUEUE:default:Ct="ThemeBGColor3",mt=_l("\u6392\u961F\u4E2D"),vt=I.createElement("span",{className:"uploadPercentageText"},Lt);break}return I.createElement("div",{className:"uploadPercentage",title:mt},I.createElement("div",{className:"progressContainer"},I.createElement("div",{className:me()("progressBar",Ct),style:{height:"100%",width:Qe===a.TE.ERROR?"100%":Lt}})),vt,I.createElement("div",{className:"progressTitle"},mt))}}]),Yt}(I.Component),N.propTypes={status:e().number,percentage:e().number,errorText:e().string},q),ye,v,se=(v=ye=function(Vt){(0,j.default)(Yt,Vt);function Yt(){return(0,C.default)(this,Yt),(0,Ne.default)(this,(Yt.__proto__||Te()(Yt)).apply(this,arguments))}return(0,Ce.default)(Yt,[{key:"render",value:function(){var rt=this.props,Qe=rt.status,ht=rt.cancelUpload,Lt=rt.retryUpload,Ct=rt.deleteFile,mt=!0,vt=void 0,Xt=void 0,bn=void 0;switch(Qe){case a.TE.ERROR:vt=I.createElement(z.Z,{icon:"turnLeft"}),bn=_l("\u91CD\u8BD5"),Xt=Lt;break;case a.TE.QUEUE:case a.TE.UPLOADING:vt=I.createElement("span",{className:"textIcon"},"\xD7"),bn=_l("\u53D6\u6D88"),Xt=ht;break;case a.TE.COMPLETE:vt=I.createElement("span",{className:"textIcon"},"\xD7"),bn=_l("\u5220\u9664"),Xt=Ct;break;default:mt=!1;break}return mt&&I.createElement("div",{className:"fileListActionBtn Hand ThemeHoverColor3",title:bn,icon:vt,onClick:Xt},vt)}}]),Yt}(I.Component),ye.propTypes={status:e().number,cancelUpload:e().func,retryUpload:e().func,deleteFile:e().func},v),de=function(Vt){(0,j.default)(Yt,Vt);function Yt(qt){(0,C.default)(this,Yt);var rt=(0,Ne.default)(this,(Yt.__proto__||Te()(Yt)).call(this,qt));return rt.cancelUpload=function(Qe){if(rt.uploader.removeFile(Qe)){var ht=rt.state.fileList.remove(Qe);rt.setState({fileList:ht})}else alert(_l("\u53D6\u6D88\u5931\u8D25"),3)},rt.retryUpload=function(Qe){var ht=rt.state.fileList.get(Qe);if(!ht.isRef){var Lt=rt.uploader,Ct=Lt.getFile(Qe);Lt.trigger("Retry",Ct)}},rt.deleteFile=function(Qe){var ht=rt.state.fileList.get(Qe),Lt=rt.state.fileList.remove(Qe),Ct=rt.state.filePaths.concat();ht.isRef?(Ct=rt.state.filePaths.filter(function(mt){return mt.id!==Qe}),rt.setState({fileList:Lt,filePaths:Ct})):rt.uploader.removeFile(Qe)?(Ct=rt.state.filePaths.filter(function(mt){return mt.id!==ht.path}),rt.setState({fileList:Lt,filePaths:Ct})):alert(_l("\u5220\u9664\u5931\u8D25"),3)},rt.onNext=function(){var Qe=rt.props,ht=Qe.hideUploadExcel,Lt=Qe.worksheetId;rt.setState({loading:!0}),$.ajax(md.global.Config.WorksheetDownUrl+"/ExportExcel/GetPreviewExcel",{data:{filePath:rt.state.filePaths[0].type===1?rt.state.filePaths[0].id:"",fileId:rt.state.filePaths[0].type===2?rt.state.filePaths[0].id:"",worksheetId:Lt},beforeSend:function(mt){mt.setRequestHeader("X-Requested-With","XMLHttpRequest")},success:function(mt){var vt={filePath:rt.state.filePaths[0].type===1?rt.state.filePaths[0].id:"",fileId:rt.state.filePaths[0].type===2?rt.state.filePaths[0].id:"",fileName:rt.state.filePaths[0].name};ht(mt.data,vt,mt.message)}})},rt.state={fileList:E().OrderedMap(),filePaths:[],loading:!1},rt}return(0,Ce.default)(Yt,[{key:"componentDidMount",value:function(){var rt=this;this.uploader=(0,r.Z)({runtimes:"html5",max_file_count:1,browse_button:"selectFileTrigger",drop_element:"uploadExcel",max_file_size:"10mb",bucket:3,chunk_size:"10mb",type:8,filters:{mime_types:[{title:"Excel files",extensions:"xlsx,xls,xlsm,csv"}],max_file_size:"10mb",prevent_duplicates:!0},error_callback:function(ht,Lt){ht===a.PU.TOO_MANY_FILES&&alert(_l("\u53EA\u5141\u8BB8\u4E0A\u4F20\u5355\u4E2A\u6587\u4EF6"),2)},init:{FilesAdded:function(ht,Lt){var Ct=rt.state.fileList;T().forEach(Lt,function(mt){Ct=Ct.set(mt.id,{name:mt.name,relativePath:mt.getSource().relativePath,loaded:mt.loaded,size:mt.size,status:mt.mdUploadErrorType?a.TE.ERROR:a.TE.QUEUE,errorText:""})}),rt.setState({fileList:Ct})},FilesRemoved:function(ht,Lt){var Ct=rt.state.fileList;T().forEach(Lt,function(mt){Ct=Ct.delete(mt.id)}),rt.setState({fileList:Ct})},Error:function(ht,Lt,Ct){Lt.code===window.plupload.FILE_SIZE_ERROR?alert(_l("\u5355\u4E2A\u6587\u4EF6\u5927\u5C0F\u8D85\u8FC710MB\uFF0C\u65E0\u6CD5\u652F\u6301\u4E0A\u4F20"),2):alert(_l("\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\u3002"),2);var mt=rt.state.fileList.update(Lt.file.id,function(vt){return vt&&(vt.errorText=Ct,vt.status=a.TE.ERROR,vt)});rt.setState({fileList:mt})},UploadProgress:function(ht){var Lt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ct=rt.state.fileList.update(Lt.id,function(mt){return mt.loaded=Lt.loaded,mt.status=a.TE.UPLOADING,mt});rt.setState({fileList:Ct})},FileUploaded:function(ht,Lt,Ct){var mt=Ct.response.key,vt=rt.state.filePaths.concat();vt.push({id:md.global.FileStoreConfig.documentHost+mt,type:1,name:Lt.name});var Xt=rt.state.fileList.update(Lt.id,function(bn){return bn.status=a.TE.COMPLETE,bn.name=Lt.name,bn.ext=Lt.name.split(".")[Lt.name.split(".").length-1],bn.path=md.global.FileStoreConfig.documentHost+mt,bn});rt.setState({fileList:Xt,filePaths:vt})}}})}},{key:"render",value:function(){var rt=this,Qe=this.props.hideUploadExcel,ht=this.state.fileList,Lt=md.global.SysSettings.worksheetExcelImportDataLimitCount;return I.createElement(oe.Z,{className:"workSheetUploadExcel",visible:!0,title:_l("\u6570\u636E\u5BFC\u5165 - \u4E0A\u4F20Excel\uFF081/3\uFF09"),description:I.createElement("div",null,_l("\u652F\u630110MB\u4EE5\u5185\u7684xls\u3001xlsx\u3001csv\u6587\u4EF6, \u6700\u5927\u884C\u6570\u4E0D\u8D85\u8FC7%0\u884C\uFF0C\u5217\u6570\u4E0D\u8D85\u8FC7200\u5217\uFF1B\u5BFC\u5165\u591A\u9009\u7C7B\u578B\u7684\u63A7\u4EF6\uFF0C\u8BF7\u786E\u4FDDExcel\u5B57\u6BB5\u5185\u5404\u4E2A\u9009\u9879/\u4EBA\u5458\u7528\u201C\uFF0C\u201D\u9694\u5F00\uFF1B\u5BFC\u5165\u5730\u533A\u63A7\u4EF6\uFF0C\u7701\u5E02\u53BF\u4E4B\u95F4\u4EE5\u201C/\u201D\u9694\u5F00\uFF0C\u5982\uFF1A\u6C5F\u897F\u7701/\u4E0A\u9976\u5E02/\u94C5\u5C71\u53BF\uFF0C\u5982\u586B\u5199\u7684\u5730\u533A\u683C\u5F0F\u6CA1\u6709\u201C/\u201D\uFF0C\u5219\u4F1A\u6309\u7167\u540D\u79F0\u7CBE\u51C6\u5339\u914D",Lt),I.createElement(y.Z,{type:3,href:"https://help.mingdao.com/worksheet/import-Excel-data",text:_l("\u4F7F\u7528\u5E2E\u52A9")})),overlayClosable:!1,width:"960",anim:!1,footer:null,onCancel:Qe},I.createElement("div",{className:"flexColumn h100"},I.createElement("div",{id:"uploadExcel",className:"uploadExcel flexColumn flex",onDragOver:function(){return rt.setState({dragOver:!0})},onDragLeave:function(){return rt.setState({dragOver:!1})},onDrop:function(){return rt.setState({dragOver:!1})}},I.createElement("div",{className:"optionContent"},I.createElement("div",{className:me()("dropContainer ThemeBorderColor4",this.state.dragOver?"ThemeBGColor5":"ThemeBGColor6")},I.createElement("div",{className:me()("uploadIcon icon-knowledge-cloud",this.state.dragOver?"ThemeColor3":"ThemeColor4")}),I.createElement("div",{className:"dropDesc"},this.state.dragOver?_l("\u677E\u5F00\u9F20\u6807\u5F00\u59CB\u4E0A\u4F20"):_l("\u62D6\u62FD\u6587\u4EF6\u5230\u8FD9\u91CC\u4E0A\u4F20"))),I.createElement("div",{className:me()("chooseBtnContainer",ht.size>0&&"Hidden")},I.createElement("div",{className:"chooseBtn ThemeHoverBGColor2 ThemeBGColor3",onClick:function(){$("#selectFileTrigger").click()}},_l("\u9009\u62E9\u6587\u4EF6")),I.createElement("input",{type:"file",className:"hide",id:"selectFileTrigger"}))),!!ht.size&&I.createElement("div",null,I.createElement("div",{className:"fileList fileListHeader"},I.createElement("div",{className:"fileListItem"},I.createElement("div",{className:"fileListName"},_l("\u6587\u4EF6")),I.createElement("div",{className:"fileListSize"},_l("\u5927\u5C0F")),I.createElement("div",{className:"fileListProgress"},_l("\u72B6\u6001")),I.createElement("div",{className:"fileListAction"},_l("\u64CD\u4F5C"))))),!!ht.size&&I.createElement("div",{className:"fileList fileListBody"},I.createElement("ul",null,ht.map(function(Ct,mt){return I.createElement("li",{key:mt,className:"fileListItem"},I.createElement("div",{className:"fileListName",title:Ct.name},I.createElement("span",{className:"type fileIcon-excel"}),Ct.name),I.createElement("div",{className:"fileListSize"},R.gB(Ct.size)),I.createElement("div",{className:"fileListProgress"},I.createElement(K,{percentage:Ct.loaded/Ct.size,status:Ct.status,errorText:Ct.errorText})),I.createElement("div",{className:"fileListAction"},I.createElement(se,{status:Ct.status,deleteFile:function(){return rt.deleteFile(mt)},cancelUpload:function(){return rt.cancelUpload(mt)},retryUpload:function(){return rt.retryUpload(mt)}})))}).toArray()))),ht.size>0&&I.createElement("div",{className:"buttons"},I.createElement(m.ZP,{loading:this.state.loading||ht.filter(function(Ct){return Ct.status===a.TE.UPLOADING||Ct.status===a.TE.QUEUE}).size>0,disabled:ht.filter(function(Ct){return Ct.status===a.TE.ERROR}).size>0,onClick:this.onNext},_l("\u4E0B\u4E00\u6B65")))))}}]),Yt}(I.Component),U=t(25273),pe=t(95679),Y=t(70264),be=t(88239),Q=t(52945),Le=t.n(Q),Be=t(33126),ke=t(15405),Ie,he,Re,ue=[1,2,3,4,5,6,7,8,9,10],we=(0,Be.Z)(ke.Z),Ee=(he=Ie=function(Vt){(0,j.default)(Yt,Vt);function Yt(qt){(0,C.default)(this,Yt);var rt=(0,Ne.default)(this,(Yt.__proto__||Te()(Yt)).call(this,qt));Re.call(rt);var Qe=4;rt.props.fileList.forEach(function(vt){vt.rows.forEach(function(pn){pn.rowNumber<10&&pn.cells.length>Qe&&(Qe=pn.cells.length)});for(var Xt=function(Rn){vt.rows.forEach(function(fe){fe.cells[Rn]||fe.cells.push({columnNumber:Rn,value:""})})},bn=0;bn<Qe;bn++)Xt(bn)});var ht=0,Lt=0;rt.props.fileList[0].rows.forEach(function(vt){if(vt.rowNumber<10){var Xt=vt.cells;T().findIndex(vt.cells,function(bn){return!bn.value})>-1&&(Xt=T().slice(vt.cells,0,T().findIndex(vt.cells,function(bn){return!bn.value}))),vt.cells[0].value&&Xt.length>Lt&&(Lt=Xt.length,ht=vt.rowNumber)}});var Ct=T().findIndex(rt.props.fileList,function(vt){return vt.state&&vt.total<=md.global.SysSettings.worksheetExcelImportDataLimitCount}),mt=Le()({},Ct!==-1?rt.props.fileList[Ct].rows[ht]:{});return Ct!==-1&&T().findIndex(rt.props.fileList[Ct].rows[ht].cells,function(vt){return!vt.value})>-1&&(mt.cells=T().slice(mt.cells,0,T().findIndex(rt.props.fileList[0].rows[ht].cells,function(vt){return!vt.value})).filter(function(vt){return vt.value})),rt.state={fileList:qt.fileList||[],titleLine:ht+1,importSheetIndex:T().get(rt.props.fileList[Ct]||{},"sheetNumber"),selectRow:mt,showCancelDialog:!1},rt}return(0,Ce.default)(Yt,[{key:"renderSelectLine",value:function(){var rt=this,Qe=this.props.fileList,ht=this.state,Lt=ht.importSheetIndex,Ct=ht.showDownload,mt=T().find(Qe,function(vt){return vt.sheetNumber===Lt});return I.createElement(we,{className:me()("LineDropDown",{Hidden:!Ct}),onClickAway:function(){return rt.setState({showDownload:!1})}},ue.map(function(vt,Xt){return I.createElement("div",{key:Xt,onClick:function(){var pn=mt.rows[vt-1],Rn=Le()({},pn).cells;T().findIndex(pn.cells,function($n){return!$n.value})>-1&&(Rn=T().slice(pn.cells,0,T().findIndex(pn.cells,function($n){return!$n.value})));var fe=(0,be.default)({},pn,{cells:Rn});rt.setState({titleLine:vt,showDownload:!1,selectRow:fe})}},vt)}))}},{key:"selectLine",value:function(rt,Qe){var ht=Le()({},rt).cells;T().findIndex(rt.cells,function(Ct){return!Ct.value})>-1&&(ht=T().slice(rt.cells,0,T().findIndex(rt.cells,function(Ct){return!Ct.value})));var Lt=(0,be.default)({},rt,{cells:ht});this.setState({titleLine:Qe+1,selectRow:Lt})}},{key:"renderTooltip",value:function(rt){return I.createElement(Y.Z,{text:I.createElement("span",null,rt.state?_l("\u5F53\u524Dsheet\u884C\u6570\u8D85\u8FC7\u5355\u6B21\u5BFC\u5165\u4E0A\u9650\uFF08%0\u884C\uFF09\uFF0C\u65E0\u6CD5\u5BFC\u5165\u3002",md.global.SysSettings.worksheetExcelImportDataLimitCount):_l("\u5F53\u524D\u5DE5\u4F5C\u8868\u5269\u4F59\u603B\u884C\u6570\u4E0D\u8DB3\uFF0C\u65E0\u6CD5\u5BFC\u5165\u6B64sheet\u3002")),popupPlacement:"bottom"},I.createElement("span",{className:"icon-error1 Font18"}))}},{key:"render",value:function(){var rt=this,Qe=this.props,ht=Qe.fileName,Lt=Qe.fileList,Ct=Qe.hideImportConfig,mt=this.state,vt=mt.importSheetIndex,Xt=mt.titleLine,bn=mt.selectRow,pn=mt.showCancelDialog,Rn=mt.hoverIndex,fe=T().find(Lt,function(_t){return _t.sheetNumber===vt})||{},$n=(fe.rows||[]).filter(function(_t){return!(_t.cells||[]).some(function(nn){return nn.value})}),gn=(fe.rows||[]).filter(function(_t){return(_t.cells||[]).some(function(nn){return nn.value})});fe.rows=gn.concat($n),fe.rows.map(function(_t,nn){_t.rowNumber=nn});var en=T().findIndex(Lt,function(_t){return _t.state})>-1;return I.createElement(I.Fragment,null,I.createElement(oe.Z,{className:"workSheetImportExcel",visible:!0,width:"960",title:_l("\u5BFC\u5165\u6570\u636E - \u9009\u62E9\u5185\u5BB9\uFF082/3\uFF09"),footer:null,anim:!1,overlayClosable:!1,onCancel:Ct},I.createElement("div",{className:"flexColumn h100"},I.createElement("div",{className:"importConfigure flexRow flex"},I.createElement("div",{className:"excelInfo h100 flexColumn"},I.createElement("div",{className:"mLeft24 bold ellipsis Font15 mTop10",title:ht},ht),I.createElement(U.Z,{className:"flex mTop15"},Lt.map(function(_t){var nn=!_t.state||_t.total>md.global.SysSettings.worksheetExcelImportDataLimitCount;return I.createElement(pe.Z,{className:me()("sheetItem Block",{ThemeBGColor5:!nn&&_t.sheetNumber===vt}),text:_t.sheetName,value:_t.sheetNumber,children:nn?rt.renderTooltip(_t):null,checked:_t.sheetNumber===vt,disabled:nn,size:"small",onClick:rt.onChange})}))),en&&vt>=0?I.createElement("div",{className:"importInfo mLeft24 mRight24 flex flexColumn"},I.createElement("div",{className:"excelTitle mTop10"},I.createElement("span",{className:"mRight12 Gray_9e"},_l("\u9009\u62E9\u8868\u5934:")),I.createElement("span",null,_l("\u7B2C")),I.createElement("input",{value:Xt,className:"TxeCenter InlineBlock pointer",onClick:function(){return rt.setState({showDownload:!0})}}),I.createElement("span",null," ",_l("\u884C")),I.createElement("span",{className:"columnNumber mLeft8 mRight10"},_l("\u5171%0\u5217\u6709\u6548",T().isEmpty(bn)?0:bn.cells.length)),I.createElement("span",{className:"label","data-tip":_l("\u53EA\u6709\u8868\u5934\u4E0B\u65B9\u7684\u6570\u636E\u624D\u4F1A\u88AB\u5BFC\u5165;\u8868\u5934\u5B57\u6BB5\u4E0D\u5F97\u4E3A\u7A7A\uFF0C\u5426\u5219\u5C06\u5BFC\u81F4\u7A7A\u503C\u5B57\u6BB5\u4E4B\u540E\u7684\u5B57\u6BB5\u65E0\u6CD5\u88AB\u5BFC\u5165\u3002")},I.createElement(z.Z,{icon:"Import-failure",className:"Font15 Gray_9e"})),this.renderSelectLine()),I.createElement("div",{className:"flex mTop15"},I.createElement("div",{className:"excelDetailBox"},I.createElement("table",{cellSpacing:"0",cellPadding:"0",style:{width:fe.rows[0].cells.length*150+60}},I.createElement("tbody",null,fe.rows.filter(function(_t){return _t.rowNumber<10}).map(function(_t,nn){return I.createElement("tr",{key:"tr-"+nn,onClick:function(){return rt.selectLine(_t,nn)},onMouseEnter:function(){return rt.setState({hoverIndex:nn+1})},onMouseLeave:function(){return rt.setState({hoverIndex:Xt})}},I.createElement("td",{className:"index pointer"},Xt===nn+1&&I.createElement("i",{className:"excelTitleImg"}),Xt!==nn+1&&Rn===nn+1&&I.createElement("i",{className:"excelTitleHoverImg"}),Xt!==nn+1&&Rn!==nn+1&&I.createElement("span",null,nn+1)),_t.cells.map(function(Gt,xt){return I.createElement("td",{key:"td-"+xt,title:Gt.value},I.createElement("span",{className:"InlineBlock ellipsis"},Gt.value))}))})))))):I.createElement("div",{className:"importInfo hasNoneSheetImport mLeft24 mRight24 flex"},_l("\u6CA1\u6709\u53EF\u4EE5\u5BFC\u5165\u7684\u8868"))),I.createElement("div",{className:"buttons"},I.createElement(m.ZP,{className:"mRight16",size:"medium",type:"secondary",onClick:function(){return rt.setState({showCancelDialog:!0})}},_l("\u53D6\u6D88")),I.createElement(m.ZP,{size:"medium",disabled:!(en&&vt>=0),onClick:function(){fe.rows[Xt-1].cells[0].value?rt.props.nextStep(bn,fe):alert(_l("\u8868\u5934\u7B2C\u4E00\u5217\u4E0D\u5F97\u4E3A\u7A7A"),3)}},_l("\u4E0B\u4E00\u6B65"))))),pn&&I.createElement(oe.Z,{className:"workSheetCancelDialog",visible:!0,anim:!1,title:_l("\u60A8\u786E\u5B9A\u8981\u53D6\u6D88\u5BFC\u5165\u6570\u636E\u5417\uFF1F"),width:480,onOk:Ct,onCancel:function(){return rt.setState({showCancelDialog:!1})}}))}}]),Yt}(I.Component),Ie.propTypes={hideImportConfig:e().func,nextStep:e().func,fileList:e().any,fileName:e().string},Re=function(){var Yt=this;this.onChange=function(qt){var rt=Yt.props.fileList,Qe=T().find(rt,function(mt){return mt.sheetNumber===qt}),ht=0,Lt=0,Ct={};Qe.rows.forEach(function(mt){if(mt.rowNumber<10){var vt=mt.cells;T().findIndex(mt.cells,function(Xt){return!Xt.value})>-1&&(vt=T().slice(mt.cells,0,T().findIndex(mt.cells,function(Xt){return!Xt.value}))),mt.cells[0].value&&vt.length>Lt&&(Lt=vt.length,ht=mt.rowNumber,Ct=(0,be.default)({},mt,{cells:vt}))}}),Yt.setState({importSheetIndex:qt,titleLine:ht+1,hoverIndex:ht+1,selectRow:Ct})}},he),b=t(88106),le=t(54208),ae=t(85315),ve=t(62521),W=t(31546),ce=t(46593),Z=t.n(ce),_e=t(60967),P=t(63239),xe=t.n(P),bt=t(94942),tt=t.n(bt),Dt=t(26378),vn=t.n(Dt),Fe=t(36803),Bt=t(45231),kt=t(62232),Tt=t(59768),tn=t(82891),Vn=t(60954),Zn=t(12386),Ot,$t,cn=($t=Ot=function(Vt){(0,j.default)(Yt,Vt);function Yt(qt){(0,C.default)(this,Yt);var rt=(0,Ne.default)(this,(Yt.__proto__||Te()(Yt)).call(this,qt));return rt.state={value:rt.props.value},rt}return(0,Ce.default)(Yt,[{key:"getTextByValue",value:function(rt,Qe){var ht=this.props.dropDownData,Lt=void 0;return ht.forEach(function(Ct){Ct.value===Qe&&(Lt=Ct[rt]||"")}),Lt}},{key:"render",value:function(){var rt=this,Qe=this.props,ht=Qe.className,Lt=Qe.listWidth,Ct=Qe.dropDownData,mt=Qe.onChange,vt=this.state.value,Xt=I.createElement(Zn.default,{selectedKeys:[vt.toString()],className:"excelControlDropDownList",style:{width:Lt},onClick:function(pn){var Rn=Number(pn.key)||"";rt.setState({value:Rn}),mt(Rn)}},Ct.map(function(bn){return I.createElement(Zn.default.Item,{key:bn.value},bn.text)}));return I.createElement(tn.default,{overlay:Xt,trigger:["click"],className:me()(ht,"excelControlDropDown")},I.createElement("div",{className:"fixedDropdownSelected"},I.createElement("span",{className:"contentLabel"},I.createElement("span",{className:"dropDownLabel TxtBottom"},vt?I.createElement("span",{className:"valueText"},this.getTextByValue("text",vt)):I.createElement("span",{className:"valueText Gray_9e"},_l("\u8BF7\u9009\u62E9")),I.createElement("span",{className:"preViewContent Gray_9e mLeft12"},vt?this.getTextByValue("previewContent",vt):"")),I.createElement("span",{className:"Right mLeft10 mRight10"},I.createElement("i",{className:"icon-arrow-down-border Gray_9e Font14"})))))}}]),Yt}(I.Component),Ot.propTypes={value:e().any,dropDownData:e().array,onChange:e().func,className:e().string,listWidth:e().number},$t),Mn,dt,$e,jt=[2,3,4,5,6,7,8,9,10,11,14,15,16,19,23,24,26,27,28,29,33,36,41,46,48],rn={text:"\u8BB0\u5F55ID",value:"rowid"},Rt={1:_l("\u8DF3\u8FC7"),2:_l("\u8986\u76D6"),3:_l("\u4EC5\u66F4\u65B0")},St=(dt=Mn=function(Vt){(0,j.default)(Yt,Vt);function Yt(qt){var rt=this;(0,C.default)(this,Yt);var Qe=(0,Ne.default)(this,(Yt.__proto__||Te()(Yt)).call(this,qt));return Qe.request=null,Qe.cacheSource=null,Qe.hasRecordId={},Qe.beginImport=function(ht){(0,Fe.Z)(tt().mark(function Lt(){var Ct,mt,vt,Xt,bn,pn,Rn,fe,$n,gn,en,_t,nn,Gt,xt,Mt,ze,yt,Ut,Wt,kn,on;return tt().wrap(function(fn){for(;;)switch(fn.prev=fn.next){case 0:if(Ct=Qe.props.isCharge,mt=Qe.state,vt=mt.tigger,Xt=mt.repeatConfig,bn=mt.repeatRecord,pn=mt.worksheetControls,Rn=mt.edited,fe=mt.controlMapping,$n=mt.relateSource,gn=void 0,en=void 0,_t=void 0,nn=void 0,Gt=[],pn.filter(function(jn){return jn.type!==30&&jn.advancedSetting&&jn.advancedSetting.required==="1"}).map(function(jn){ht.find(function(Ta){return Ta.ControlId===jn.controlId})||Gt.push(jn.controlName)}),!Gt.length){fn.next=10;break}throw _l("\u8BF7\u8BBE\u7F6E\u201C%0\u201D\u5B57\u6BB5\u7684\u6620\u5C04\u5173\u7CFB",Gt.join("\u3001"));case 10:for(xt=function(Ta){var zn=Ta.type,pa=Ta.sourceConfig,Ea=Ta.matchId,la=Ta.ControlId,Kn=pn.find(function(wa){return wa.controlId==la})||{},sa=Kn.controlName,ba=($n[pa.worksheetId]||{}).controls||[],Fa=sa?"\u201C"+sa+"\u201D"+_l("\u7684\u5339\u914D\u5B57\u6BB5\u672A\u8BBE\u7F6E"):_l("\u672A\u9009\u62E9\u5339\u914D\u5B57\u6BB5");if(zn==29&&(!pa||!pa.controlId||T().findIndex(ba,function(wa){return wa.value===pa.controlId})===-1&&pa.controlId!==rn.value))throw!Ct&&Rn?_l("\u5BFC\u5165\u914D\u7F6E\u5B58\u5728\u9519\u8BEF\uFF0C\u5339\u914D\u5B57\u6BB5\u88AB\u5220\u9664\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u5904\u7406"):Fa;if(zn==26&&!Ea)throw Fa},Mt=!0,ze=!1,yt=void 0,fn.prev=14,Ut=vn()(ht);!(Mt=(Wt=Ut.next()).done);Mt=!0)kn=Wt.value,xt(kn);fn.next=22;break;case 18:fn.prev=18,fn.t0=fn.catch(14),ze=!0,yt=fn.t0;case 22:fn.prev=22,fn.prev=23,!Mt&&Ut.return&&Ut.return();case 25:if(fn.prev=25,!ze){fn.next=28;break}throw yt;case 28:return fn.finish(25);case 29:return fn.finish(22);case 30:if(!bn){fn.next=44;break}if(Xt.controlId){fn.next=33;break}throw _l("\u8BF7\u9009\u62E9\u91CD\u590D\u8BB0\u5F55\u7684\u4F9D\u636E\u5B57\u6BB5");case 33:if(!(Xt.controlId!==rn.value&&T().findIndex(pn,function(jn){return jn.controlId===Xt.controlId})===-1)){fn.next=35;break}throw!Ct&&Rn?_l("\u5BFC\u5165\u914D\u7F6E\u5B58\u5728\u9519\u8BEF\uFF0C\u4F9D\u636E\u5B57\u6BB5\u88AB\u5220\u9664\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u5904\u7406"):_l("\u8BF7\u8BBE\u7F6E\u91CD\u590D\u8BB0\u5F55\u7684\u4F9D\u636E\u5B57\u6BB5");case 35:if(on=T().find(fe,function(jn){return jn.ControlId===Xt.controlId})||{},!(Xt.controlId!==rn.value&&!T().get(on,"ColumnNum"))){fn.next=38;break}throw _l("\u8BF7\u8BBE\u7F6E\u201C%0\u201D\u5B57\u6BB5\u7684\u6620\u5C04\u5173\u7CFB",Xt.controlName);case 38:if(!(Xt.controlId!==rn.value&&on.type===26&&on.matchId!=="userId")){fn.next=40;break}throw _l("\u4F9D\u636E\u5B57\u6BB5\u201C%0\u201C\u7684\u5339\u914D\u5B57\u6BB5\u4EC5\u9650\u4EBA\u5458ID",Xt.controlName);case 40:gn='<span class="Gray Bold">\u3010 '+(Xt.controlId===rn.value?rn.text:T().get(T().find(ht,function(jn){return jn.ControlId===Xt.controlId})||{},"ColumnName"))+" \u3011</span>",en='<span class="Gray Bold">\u3010 '+(Xt.controlId===rn.value?rn.value:Xt.controlName)+" \u3011</span>",_t='<span class="Gray Bold">'+Rt[Xt.handleEnum]+"</span>",nn="<span>"+(Xt.handleEnum===3?_l("\u4E0D\u91CD\u590D\u7684\u6570\u636E\u4E0D\u4F1A\u4F5C\u4E3A\u65B0\u8BB0\u5F55\u5BFC\u5165"):_l("\u5C06\u6240\u6709\u4E0D\u91CD\u590D\u7684\u6570\u636E\u4F5C\u4E3A\u65B0\u8BB0\u5F55\u5BFC\u5165\u5DE5\u4F5C\u8868"))+"</span>";case 44:oe.Z.confirm({title:_l("\u6570\u636E\u5BFC\u5165\u786E\u8BA4"),description:I.createElement("div",{className:"Font14"},I.createElement("div",{className:"mBottom10 Gray_75"},_l("1.\u5BFC\u5165\u7684\u6570\u636E"),I.createElement("span",{class:"Gray Bold"},vt?_l("\u89E6\u53D1\u5DE5\u4F5C\u6D41"):_l("\u4E0D\u4F1A\u89E6\u53D1\u5DE5\u4F5C\u6D41"))),bn?I.createElement("div",{dangerouslySetInnerHTML:{__html:_l("2.\u5C06Excel\u4E2D%0\u5217\u4E0E\u5DE5\u4F5C\u8868\u4E2D%1\u5B57\u6BB5\u9010\u884C\u5BF9\u6BD4\uFF0C%2\u8BC6\u522B\u5230\u7684\u91CD\u590D\u6570\u636E\uFF0C%3",gn,en,_t,nn)}}):I.createElement("div",{className:"Gray_75"},_l("2.\u4E0D\u8BC6\u522B\u91CD\u590D\u6570\u636E\uFF0C\u5C06Excel\u4E2D\u6240\u6709\u6570\u636E\u90FD\u4F5C\u4E3A\u65B0\u8BB0\u5F55\u5BFC\u5165\u5DE5\u4F5C\u8868"))),onOk:function(){return Qe.onImport(ht)}});case 45:case"end":return fn.stop()}},Lt,rt,[[14,18,22,30],[23,,25,29]])}))().catch(function(Lt){return alert(Lt,3)})},Qe.onImport=function(ht){var Lt=Qe.props,Ct=Lt.filePath,mt=Lt.fileId,vt=Lt.fileKey,Xt=Lt.worksheetId,bn=Lt.appId,pn=Lt.selectRow,Rn=Lt.importSheetInfo,fe=Lt.onSave,$n=Lt.onCancel,gn=Qe.state,en=gn.workSheetProjectId,_t=gn.repeatRecord,nn=gn.tigger,Gt=gn.repeatConfig,xt=gn.userControls,Mt=gn.departmentControls,ze=gn.errorSkip,yt=ht.map(function(Ut){return T().find(xt.concat(Mt),function(Wt){return Wt.value===Ut.matchId})&&(Ut.matchId=Ut.matchId==="name"?"":Ut.matchId,Ut.sourceConfig.controlId=""),(0,be.default)({},Ut,{ColumnNum:Ut.ColumnNum-1})});Gt.controlId===rn.value&&yt.push({ColumnNum:Qe.hasRecordId.columnNumber,ColumnName:rn.text,ControlId:rn.value}),!Qe.request&&(Qe.request=!0,fe(vt),$.ajax(md.global.Config.WorksheetDownUrl+"/ExportExcel/Import",{type:"POST",contentType:"application/json",data:xe()({filePath:Ct,fileId:mt,workSheetId:Xt,appId:bn,accountId:md.global.Account.accountId,titleNumber:pn.rowNumber,cellConfigs:yt,projectId:en,sheetNumber:Rn.sheetNumber,randomKey:vt,repeatConfig:_t?Gt:null,tigger:nn,errorSkip:ze}),beforeSend:function(Wt){Wt.setRequestHeader("X-Requested-With","XMLHttpRequest")}}),$n())},Qe.saveConfig=function(){var ht=Qe.props.worksheetId;oe.Z.confirm({title:_l("\u4FDD\u5B58\u5BFC\u5165\u914D\u7F6E"),description:I.createElement("div",{className:"Font14"},I.createElement("div",{className:"Gray_75 WordBreak"},_l("\u5C06\u5F53\u524D\u5BFC\u5165\u914D\u7F6E\u4FDD\u5B58\u4E3A\u9ED8\u8BA4\u5BFC\u5165\u65B9\u5F0F\u4F9B\u6240\u6709\u7528\u6237\u4F7F\u7528\uFF0C\u5176\u4E2D\u5B57\u6BB5\u6620\u5C04\u5173\u7CFB\u4E0D\u4F1A\u4FDD\u5B58\uFF0C\u82E5Excel\u5217\u540D\u79F0\u548C\u5B57\u6BB5\u540D\u79F0\u76F8\u540C\u4F1A\u81EA\u52A8\u6620\u5C04\u5BF9\u5E94")),I.createElement(_e.Z,{className:"mTop20 Gray",text:_l("\u4E0D\u5141\u8BB8\u7528\u6237\u4FEE\u6539\u9ED8\u8BA4\u914D\u7F6E"),defaultChecked:Qe.state.edited,onClick:function(Ct){return Qe.setState({edited:Ct})}})),onOk:function(){var Ct=Qe.state,mt=Ct.edited,vt=Ct.workSheetProjectId,Xt=Ct.worksheetControls,bn=Ct.controlMapping,pn=Ct.repeatConfig,Rn=Ct.tigger,fe=Ct.repeatRecord,$n=Ct.errorSkip,gn=[],en=function(Wt){if(T().includes([9,10,11,26,27,29],Wt.type)){var kn=T().find(bn,function(pa){return pa.ControlId===Wt.controlId});if(!kn)return"continue";var on=kn.ControlId,En=kn.isAddOption,fn=En===void 0?!1:En,jn=kn.sourceConfig,Ta=kn.matchId,zn=Ta===void 0?"":Ta;gn.push({controlId:on,isAddOption:fn,sourceConfig:T().includes([26,27],Wt.type)?{controlId:zn,workSheetId:""}:jn})}},_t=!0,nn=!1,Gt=void 0;try{for(var xt=vn()(Xt||[]),Mt;!(_t=(Mt=xt.next()).done);_t=!0)var ze=Mt.value,yt=en(ze)}catch(Ut){nn=!0,Gt=Ut}finally{try{!_t&&xt.return&&xt.return()}finally{if(nn)throw Gt}}$.ajax({type:"POST",url:md.global.Config.WorksheetDownUrl+"/ExportExcel/SaveConfig",data:xe()({projectId:vt,worksheetId:ht,repeatConfig:fe?pn:null,tigger:Rn,edited:mt,configs:gn,accountId:md.global.Account.accountId,errorSkip:$n}),dataType:"JSON",contentType:"application/json"}).then(function(Ut){Ut&&alert(_l("\u4FDD\u5B58\u6210\u529F"))})},onCancel:function(){}})},Qe.state={loading:!0,worksheetControls:[],workSheetProjectId:"",controlMapping:[],showWarningDialog:!1,showConfirmDialog:!1,mapControlLength:0,noMapArray:[],dropDownData:Qe.getDropShowContent(),repeatRecord:!1,tigger:!1,fieldsList:[],repeatConfig:{controlId:"",controlName:"",handleEnum:1},relateSource:{},edited:!0,showStar:null,errorSkip:[],showErrorSkip:!1,userControls:[{text:_l("\u59D3\u540D"),value:"name"},{text:_l("\u624B\u673A\u53F7"),value:"phone"},{text:_l("\u90AE\u7BB1"),value:"email"},{text:_l("\u5DE5\u53F7"),value:"jobId"},{text:_l("\u4EBA\u5458ID"),value:"userId"}],departmentControls:[{text:_l("\u540D\u79F0"),value:"name"},{text:_l("\u90E8\u95E8\u7CFB\u7EDFID"),value:"depId"}]},Qe}return(0,Ce.default)(Yt,[{key:"componentWillMount",value:function(){var rt=this.props,Qe=rt.appId,ht=rt.worksheetId;this.getWorksheetInfo({appId:Qe,worksheetId:ht})}},{key:"getWorksheetInfo",value:function(){var qt=(0,Fe.Z)(tt().mark(function Qe(){var ht=this,Lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ct=arguments[1],mt;return tt().wrap(function(Xt){for(;;)switch(Xt.prev=Xt.next){case 0:return Xt.next=2,Bt.Z.getWorksheetInfo((0,be.default)({},Lt,{getTemplate:!0}));case 2:if(mt=Xt.sent,mt.template.controls=mt.template.controls.filter(function(bn){return!T().includes(["rowid","caid","ctime","utime","uaid","wfname","wfcuaids","wfcaid","wfctime","wfrtime","wfftime","wfstatus"],bn.controlId)}),!Ct){Xt.next=8;break}return Xt.delegateYield(tt().mark(function bn(){var pn,Rn,fe,$n,gn,en,_t,nn,Gt,xt,Mt,ze,yt,Ut,Wt;return tt().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:pn=mt.worksheetId,Rn=mt.name,fe=ht.state,$n=fe.worksheetControls,gn=fe.controlMapping,en=mt.template.controls.filter(function(En){return T().includes([2,3,4,5,7,32,33],En.type)}).map(function(En){return{text:En.controlName,value:En.controlId,attribute:En.attribute}}),_t=en.find(function(En){return En.attribute==1}),en.unshift(rn),nn=function(fn){var jn=gn.find(function(Ea){return Ea.ControlId==fn.controlId});if(!jn)return"continue";if(jn.sourceConfig.controlId)fn.sourceConfig=jn.sourceConfig.controlId;else{var Ta=(jn.ColumnName||"").split("-"),zn=Ta[Ta.length-1].toLowerCase(),pa=en.find(function(Ea){return Ea.text.toLowerCase()==zn});pa?(fn.sourceConfig=pa.value,jn.sourceConfig.controlId=pa.value):_t&&(fn.sourceConfig=_t.value,jn.sourceConfig.controlId=_t.value)}},Gt=!0,xt=!1,Mt=void 0,on.prev=9,ze=vn()($n.filter(function(En){return En.dataSource==pn}));case 11:if(Gt=(yt=ze.next()).done){on.next=19;break}if(Ut=yt.value,Wt=nn(Ut),Wt!=="continue"){on.next=16;break}return on.abrupt("continue",16);case 16:Gt=!0,on.next=11;break;case 19:on.next=25;break;case 21:on.prev=21,on.t0=on.catch(9),xt=!0,Mt=on.t0;case 25:on.prev=25,on.prev=26,!Gt&&ze.return&&ze.return();case 28:if(on.prev=28,!xt){on.next=31;break}throw Mt;case 31:return on.finish(28);case 32:return on.finish(25);case 33:return ht.cacheSource[pn]={name:Rn,controls:en},on.next=36,new(Z())(function(En){return ht.setState({relateSource:ht.cacheSource,worksheetControls:$n},En)});case 36:case"end":return on.stop()}},bn,ht,[[9,21,25,33],[26,,28,32]])})(),"t0",6);case 6:Xt.next=10;break;case 8:return Xt.next=10,this.disposeInitSource(mt);case 10:case"end":return Xt.stop()}},Qe,this)}));function rt(){return qt.apply(this,arguments)}return rt}()},{key:"disposeInitSource",value:function(){var qt=(0,Fe.Z)(tt().mark(function Qe(ht){var Lt=this,Ct,mt,vt,Xt,bn,pn,Rn,fe,$n,gn,en,_t,nn,Gt,xt,Mt,ze,yt,Ut,Wt,kn,on,En,fn,jn,Ta,zn,pa;return tt().wrap(function(la){for(;;)switch(la.prev=la.next){case 0:Ct=this.props,mt=Ct.isCharge,vt=Ct.appId,Xt=Ct.worksheetId,bn=Ct.selectRow,pn=this.state,Rn=pn.relateSource,fe=pn.userControls,$n=pn.departmentControls,gn=[],en=[],ht.template.controls=(ht.template.controls||[]).filter(function(Kn){var sa=Kn.fieldPermission||"111",ba=Kn.controlPermissions||"111";return Kn.type!==22&&(sa[0]==="1"&&sa[2]==="1"&&ba[0]==="1"&&ba[2]==="1"||mt)}),_t=function(sa){var ba=sa.type,Fa=sa.controlName,wa=sa.advancedSetting,Na=sa.controlId,Za=sa.dataSource,ya=sa.appId,An=sa.workSheetId;if(!T().includes(jt,ba))return"continue";var ma=ba==29&&wa&&wa.showtype=="2";if(ma)return"continue";var fa=[],Ma=[],Ya=[],Ba=T().includes([26,27],ba)?"name":"",La=!0,Qa=!1,nr=void 0;try{for(var Rr=vn()(bn.cells),hr;!(La=(hr=Rr.next()).done);La=!0){var yr=hr.value,br=yr.value,Lr=ba===26&&wa&&wa.usertype=="2";br.indexOf(Fa+"-")==0&&T().includes([26,27],ba)&&!Lr&&!Ya.length?function(){var Or=br.split(Fa+"-")[1],Vr=fe.concat($n).find(function(Kr){return Kr.text.toLowerCase()==Or.toLowerCase()});Vr&&(Ba=Vr.value),Ya.push(yr)}():br.indexOf(Fa+"-")==0&&ba==29&&!Ya.length?Ya.push(yr):br.trim()==Fa.trim()?fa.push(yr):br.indexOf(Fa.trim())>-1&&Ma.push(yr)}}catch(Or){Qa=!0,nr=Or}finally{try{!La&&Rr.return&&Rr.return()}finally{if(Qa)throw nr}}var lr=Ya.length?Ya:fa.length?fa:Ma;sa.matchId=Ba,sa.columnNum=lr.length>0?lr[0].columnNumber+1:"",sa.columnName=lr.length>0?lr[0].value:"",gn.push({ColumnNum:lr.length>0?lr[0].columnNumber+1:"",ColumnName:lr.length>0?lr[0].value:"",ControlId:Na,sourceConfig:{worksheetId:ba===29?Za:"",controlId:""},matchId:Ba,type:ba}),sa.type===29&&!en.find(function(Or){return Or.appId===ya&&Or.workSheetId===An})&&en.push({appId:sa.appId,workSheetId:Za})},nn=!0,Gt=!1,xt=void 0,la.prev=9,Mt=vn()(ht.template.controls);case 11:if(nn=(ze=Mt.next()).done){la.next=19;break}if(yt=ze.value,Ut=_t(yt),Ut!=="continue"){la.next=16;break}return la.abrupt("continue",16);case 16:nn=!0,la.next=11;break;case 19:la.next=25;break;case 21:la.prev=21,la.t0=la.catch(9),Gt=!0,xt=la.t0;case 25:la.prev=25,la.prev=26,!nn&&Mt.return&&Mt.return();case 28:if(la.prev=28,!Gt){la.next=31;break}throw xt;case 31:return la.finish(28);case 32:return la.finish(25);case 33:return Wt=ht.template.controls.filter(function(Kn){return T().includes([2,3,4,5,7,33],Kn.type)||Kn.type===26&&Kn.enumDefault===0&&(Kn.advancedSetting||{}).usertype!=="2"}).map(function(Kn){return{text:Kn.controlName,value:Kn.controlId}}),this.hasRecordId=T().find(bn.cells,function(Kn){return Kn.value===rn.text})||{},Wt.push(rn),la.next=38,$.ajax({type:"GET",url:md.global.Config.WorksheetDownUrl+"/ExportExcel/GetConfig",data:{worksheetId:Xt,appId:vt,accountId:md.global.Account.accountId}});case 38:return kn=la.sent,on={errorSkip:kn.data.errorSkip,edited:kn.data.edited},kn.resultCode===1&&(En=kn.data,fn=En.tigger,jn=En.repeatConfig,Ta=En.configs,jn=jn||{},zn=T().find(ht.template.controls,function(Kn){return Kn.controlId===jn.controlId})||{},on=Le()({},on,{tigger:fn,repeatRecord:!!jn.controlId,showStar:jn.controlId||null}),gn.forEach(function(Kn){var sa=T().find(Ta,function(Za){return Za.controlId===Kn.ControlId})||{};if(sa.controlId){Kn.sourceConfig=sa.sourceConfig,Kn.isAddOption=sa.isAddOption;var ba=ht.template.controls.find(function(Za){return Za.controlId==Kn.ControlId});ba&&ba.type==29&&(ba.sourceConfig=sa.sourceConfig.controlId);var Fa=Kn.type,wa=Kn.advancedSetting,Na=Fa===26&&wa&&wa.usertype=="2";T().includes([26,27],Fa)&&!Na&&sa.sourceConfig.controlId&&(Kn.matchId=sa.sourceConfig.controlId,ba&&T().includes([26,27],ba.type)&&(ba.matchId=Kn.matchId))}}),on.repeatConfig={controlId:jn.controlId,controlName:T().get(zn,"controlName"),handleEnum:jn.handleEnum}),pa=ht.template.controls.sort(function(Kn,sa){return Kn.row===sa.row?Kn.col-sa.col:Kn.row-sa.row}),la.next=44,new(Z())(function(Kn){return Lt.setState((0,be.default)({worksheetControls:pa,controlMapping:gn,workSheetProjectId:ht.projectId,fieldsList:Wt},on,{loading:!1}),Kn)});case 44:return this.cacheSource=Le()({},Rn),la.next=47,Z().all(T().uniqBy(en,function(Kn){return Kn.workSheetId}).map(function(Kn){return Lt.getWorksheetInfo({appId:Kn.appId,workSheetId:Kn.workSheetId,relationWorksheetId:Xt},!0)}));case 47:case"end":return la.stop()}},Qe,this,[[9,21,25,33],[26,,28,32]])}));function rt(Qe){return qt.apply(this,arguments)}return rt}()},{key:"getDropShowContent",value:function(){var rt=this.props,Qe=rt.selectRow,ht=rt.importSheetInfo,Lt=Qe.rowNumber,Ct=ht.rows,mt=function en(_t,nn){if(!_t)return"";var Gt=T().find(_t.cells,function(Mt){return Mt.columnNumber===nn});if(Gt&&Gt.value)return Gt.value;if(_t.rowNumber===10)return"";var xt=T().find(Ct,function(Mt){return Mt.rowNumber===_t.rowNumber+1});return en(xt,nn)},vt=[{text:_l("\u8BF7\u9009\u62E9"),value:"",previewContent:""}],Xt=!0,bn=!1,pn=void 0;try{for(var Rn=vn()(Qe.cells||[]),fe;!(Xt=(fe=Rn.next()).done);Xt=!0){var $n=fe.value,gn=T().find(Ct,function(en){return en.rowNumber===Lt+1});vt.push({text:$n.value||"",value:$n.columnNumber+1,previewContent:gn?mt(gn,$n.columnNumber):""})}}catch(en){bn=!0,pn=en}finally{try{!Xt&&Rn.return&&Rn.return()}finally{if(bn)throw pn}}return vt}},{key:"renderFooter",value:function(){var rt=this,Qe=this.props,ht=Qe.onPrevious,Lt=Qe.isCharge,Ct=this.state,mt=Ct.repeatRecord,vt=Ct.tigger,Xt=Ct.repeatConfig,bn=Ct.fieldsList,pn=Ct.controlMapping,Rn=Ct.edited,fe=Ct.errorSkip,$n=Ct.showErrorSkip,gn=pn.filter(function(Gt){return Gt.ColumnNum})||[],en=fe.filter(function(Gt){return Gt.value}).length,_t=[{text:_l("\u8DF3\u8FC7"),value:1},{text:_l("\u8986\u76D6"),value:2},{text:_l("\u4EC5\u66F4\u65B0\uFF0C\u4E0D\u65B0\u589E\u8BB0\u5F55"),value:3}],nn={1:{text:_l("\u5FC5\u586B"),desc:_l("\u4E3A\u7A7A")},2:{text:_l("\u6570\u503C"),desc:_l("\u683C\u5F0F\u9519\u8BEF")},3:{text:_l("\u91D1\u989D"),desc:_l("\u683C\u5F0F\u9519\u8BEF")},4:{text:_l("\u90AE\u7BB1"),desc:_l("\u683C\u5F0F\u9519\u8BEF")},5:{text:_l("\u5730\u533A"),desc:_l("\u672A\u5339\u914D\u5230")},6:{text:_l("\u9009\u9879"),desc:_l("\u672A\u5339\u914D\u5230")},7:{text:_l("\u4EBA\u5458"),desc:_l("\u672A\u5339\u914D\u6216\u5339\u914D\u5230\u591A\u4E2A")},8:{text:_l("\u5173\u8054\u8BB0\u5F55"),desc:_l("\u672A\u5339\u914D\u6216\u5339\u914D\u5230\u591A\u4E2A")}};return I.createElement("div",{className:"flexRow mTop16"},I.createElement("div",null,I.createElement("div",{className:"flexRow minHeight36",style:{alignItems:"center"}},!mt&&!Lt&&Rn?null:I.createElement(_e.Z,{text:_l("\u8BC6\u522B\u91CD\u590D\u8BB0\u5F55"),checked:mt,disabled:!Lt&&Rn,onClick:function(xt){bn.length?rt.setState({repeatRecord:!xt,showStar:xt?null:Xt.controlId}):alert(_l("\u4E0D\u5B58\u5728\u6709\u6548\u7684\u4F9D\u636E\u5B57\u6BB5"),2)}}),mt&&I.createElement(I.Fragment,null,I.createElement(W.Z,{className:"mLeft8 repeatConfigDropdown",data:_t,value:Xt.handleEnum,disabled:!Lt&&Rn,border:!0,onChange:function(xt){return rt.setState({repeatConfig:Le()({},Xt,{handleEnum:xt})})}}),I.createElement("div",{className:"mLeft8 Gray"},_l("\u4F9D\u636E\u5B57\u6BB5")),I.createElement(W.Z,{className:"mLeft8 repeatConfigDropdown",data:bn,disabled:!Lt&&Rn,placeholder:_l("\u8BF7\u9009\u62E9"),value:Xt.controlId,renderTitle:Xt.controlId?Xt.controlId&&!T().find(bn,function(Gt){return Gt.value===Xt.controlId})?function(){return I.createElement("span",{className:"repeatConfigError"},_l("\u5DF2\u5220\u9664"))}:function(){return I.createElement("span",null,T().find(bn,function(Gt){return Gt.value===Xt.controlId}).text)}:function(){return I.createElement("span",{className:"Gray_9e"},_l("\u8BF7\u9009\u62E9"))},border:!0,onChange:function(xt){rt.setState({repeatConfig:Le()({},Xt,{controlId:xt,controlName:bn.find(function(Mt){return Mt.value===xt}).text}),showStar:xt})}}),I.createElement(Y.Z,{text:I.createElement("span",null,_l("\u9009\u62E9\u5173\u8054\u8868\u7684\u4E00\u4E2A\u5B57\u6BB5\u4F5C\u4E3A\u6620\u5C04\u7684\u5339\u914D\u5B57\u6BB5\uFF0C\u652F\u6301\u7684\u5B57\u6BB5\u7C7B\u578B\u5305\u62EC\uFF1A\u6587\u672C\u6846\u3001\u7535\u8BDD\u53F7\u7801\u3001\u90AE\u4EF6\u5730\u5740\u3001\u8BC1\u4EF6\u3001\u81EA\u52A8\u7F16\u53F7\u3001\u8BB0\u5F55ID\u3001\u6210\u5458\u5355\u9009"))},I.createElement("i",{className:"icon-workflow_help Gray_9e Font16 mLeft8 LineHeight36"})))),I.createElement("div",{className:"flexRow minHeight36",style:{alignItems:"center"}},!en&&!Lt&&Rn?null:I.createElement(I.Fragment,null,I.createElement(_e.Z,{text:_l("\u8DF3\u8FC7\u9519\u8BEF\u6570\u636E"),disabled:!Lt&&Rn,checked:!!en,onClick:function(xt){return rt.setState({errorSkip:fe.map(function(Mt){return Mt.value=!xt,Mt})})}}),I.createElement(Y.Z,{text:I.createElement("span",null,_l("\u672A\u52FE\u9009\u65F6\uFF0C\u5BF9\u4E8E\u9519\u8BEF\u7684\u6570\u636E\u4EC5\u8DF3\u8FC7\u9519\u8BEF\u5B57\u6BB5\uFF0C\u5176\u4ED6\u5B57\u6BB5\u4ECD\u7136\u5BFC\u5165\u3002\u52FE\u9009\u540E\u5C06\u8DF3\u8FC7\u6574\u884C\u6570\u636E\u3002"))},I.createElement("i",{className:"icon-workflow_help Gray_9e Font16 mLeft5"})),!!en&&I.createElement("div",{className:"mLeft5 relative ThemeColor3 ThemeHoverColor2 pointer",onClick:function(){return(Lt||!Rn)&&rt.setState({showErrorSkip:!0})}},en===fe.length?_l("\u5168\u90E8"):"("+en+"/"+fe.length+")",$n&&I.createElement(ve.Z,{className:"errorSkipDialog",onClickAway:function(){return rt.setState({showErrorSkip:!1})}},I.createElement("div",{className:"Font14 bold"},_l("\u8BBE\u7F6E")),I.createElement("div",{className:"mTop5"},_l("\u5F53\u6570\u636E\u4E2D\u5B58\u5728\u4EE5\u4E0B\u6240\u9009\u9519\u8BEF\u65F6\uFF0C\u5C06\u653E\u5F03\u6B64\u884C\u6570\u636E\u5BFC\u5165")),I.createElement("div",{className:"flexRow mTop10",style:{alignItems:"center"}},I.createElement(_e.Z,{text:_l("\u5168\u9009")+("\uFF08"+en+"/"+fe.length+"\uFF09"),checked:!!en,clearselected:!!en&&en!==fe.length,onClick:function(xt){return rt.setState({errorSkip:fe.map(function(Mt){return Mt.value=!xt,Mt})})}})),fe.map(function(Gt){return I.createElement("div",{key:Gt.key,className:"flexRow mTop10",style:{alignItems:"center"}},I.createElement(_e.Z,{text:nn[Gt.key].text,checked:Gt.value,onClick:function(Mt){return rt.setState({errorSkip:fe.map(function(ze){return ze.key===Gt.key&&(ze.value=!Mt),ze})})}}),I.createElement("div",{className:"mLeft20 Gray_9e"},nn[Gt.key].desc))})))),!vt&&!Lt&&Rn?null:I.createElement(_e.Z,{className:"mLeft20",text:_l("\u5BFC\u5165\u89E6\u53D1\u5DE5\u4F5C\u6D41"),disabled:!Lt&&Rn,checked:vt,onClick:function(xt){return rt.setState({tigger:!xt})}}),Lt&&I.createElement("span",{className:"Hand ThemeColor3 Hover_49 mLeft20",onClick:function(){return rt.saveConfig()}},_l("\u4FDD\u5B58\u5BFC\u5165\u914D\u7F6E")))),I.createElement("div",{className:"flex"}),I.createElement("div",{className:"flexColumn"},I.createElement("div",{className:"flex"}),I.createElement("div",{className:"flexRow"},I.createElement(m.ZP,{className:"mRight16",size:"medium",type:"secondary",onClick:ht},_l("\u4E0A\u4E00\u6B65")),I.createElement(m.ZP,{size:"medium",disabled:!gn.length,onClick:function(){return rt.beginImport(gn)}},_l("\u5F00\u59CB\u5BFC\u5165")))))}},{key:"renderRelateWorksheet",value:function(rt,Qe){var ht=this,Lt=this.state,Ct=Lt.controlMapping,mt=Lt.relateSource,vt=Lt.userControls,Xt=Lt.departmentControls,bn=Lt.showStar,pn=Ct.find(function(xt){return xt.ControlId===rt.controlId}),Rn=pn.sourceConfig.worksheetId;if(T().includes([26,27],rt.type)){var fe=rt.type===26?vt:Xt;return I.createElement("div",{className:"flexRow relateBox"},I.createElement(z.Z,{className:"Font16 Gray_9e",icon:(0,kt.hB)(rt.type)}),I.createElement("div",{className:"mLeft10 mRight10 flex ellipsis flexRow alignItemsCenter"},rt.controlName,(bn===rt.controlId||rt.advancedSetting&&rt.advancedSetting.required==="1")&&I.createElement("span",{className:"mLeft3 star"},"*")),I.createElement(Y.Z,{text:I.createElement("span",null,rt.type===26?_l("\u652F\u6301\u7684\u5B57\u6BB5\u7C7B\u578B\u5305\u62EC\uFF1A\u59D3\u540D\u3001\u624B\u673A\u53F7\u3001\u90AE\u7BB1\u3001\u5DE5\u53F7\u3001\u4EBA\u5458ID"):_l("\u652F\u6301\u7684\u5B57\u6BB5\u7C7B\u578B\u5305\u62EC\uFF1A\u540D\u79F0\u3001\u90E8\u95E8\u7CFB\u7EDFID"))},I.createElement("i",{className:"icon-workflow_help Gray_9e Font16"})),I.createElement("div",{className:"Gray_9e mLeft5"},_l("\u5339\u914D\u5B57\u6BB5\uFF1A")),I.createElement(W.Z,{disabled:Qe,menuStyle:{width:180},data:fe,value:rt.matchId||null,isAppendToBody:!0,onChange:function(Mt){var ze=[].concat((0,ae.Z)(Ct)),yt=ze.find(function(Ut){return Ut.ControlId===rt.controlId});yt&&(yt.matchId=Mt),rt.matchId=Mt,ht.setState({controlMapping:ze})}}))}else if(rt.type==29&&mt[Rn]){var $n=mt[Rn],gn=$n.controls,en=$n.name,_t=pn.sourceConfig.controlId,nn=gn.find(function(xt){return xt.attribute})||{},Gt=(T().find(Ct,function(xt){return xt.ControlId===rt.controlId})||{}).sourceConfig||{};return!_t&&nn.value?_t=nn.value:_t!==""&&(_t=null),I.createElement("div",{className:"flexRow relateBox"},I.createElement(z.Z,{className:"Font16 Gray_9e",icon:(0,kt.hB)(rt.type)}),I.createElement("div",{className:"mLeft10 mRight10 flex ellipsis flexRow alignItemsCenter"},rt.controlName,(bn===rt.controlId||rt.advancedSetting&&rt.advancedSetting.required==="1")&&I.createElement("span",{className:"mLeft3 star"},"*")),I.createElement(Y.Z,{text:I.createElement("span",null,_l("\u9009\u62E9\u5173\u8054\u8868\u7684\u4E00\u4E2A\u5B57\u6BB5\u4F5C\u4E3A\u6620\u5C04\u7684\u5339\u914D\u5B57\u6BB5\uFF0C\u652F\u6301\u7684\u5B57\u6BB5\u7C7B\u578B\u5305\u62EC\uFF1A\u6587\u672C\u6846\u3001\u7535\u8BDD\u53F7\u7801\u3001\u90AE\u4EF6\u5730\u5740\u3001\u8BC1\u4EF6\u3001\u6587\u672C\u62FC\u63A5\u3001\u81EA\u52A8\u7F16\u53F7\u3001\u8BB0\u5F55ID"))},I.createElement("i",{className:"icon-workflow_help Gray_9e Font16"})),I.createElement("div",{className:"Gray_9e mLeft5"},_l("\u5339\u914D\u5B57\u6BB5\uFF1A")),I.createElement(W.Z,{disabled:Qe,menuStyle:{width:180},data:gn,value:Gt.controlId,renderTitle:Gt.controlId?Gt.controlId&&!T().find(gn,function(xt){return xt.value===Gt.controlId})?function(){return I.createElement("span",{className:"repeatConfigError"},_l("\u5DF2\u5220\u9664"))}:function(){return I.createElement("span",null,T().find(gn,function(xt){return xt.value===Gt.controlId}).text)}:function(){return I.createElement("span",{className:"Gray_9e"},_l("\u8BF7\u9009\u62E9"))},isAppendToBody:!0,onChange:function(Mt){var ze=[].concat((0,ae.Z)(Ct)),yt=ze.find(function(Ut){return Ut.ControlId===rt.controlId});yt&&(yt.sourceConfig.controlId=Mt),ht.setState({controlMapping:ze})}}))}else return null}},{key:"render",value:function(){var rt=this,Qe=this.props,ht=Qe.onCancel,Lt=Qe.isCharge,Ct=this.state,mt=Ct.dropDownData,vt=Ct.controlMapping,Xt=Ct.worksheetControls,bn=Ct.loading,pn=Ct.edited,Rn=Ct.showStar,fe=Ct.userControls,$n=Ct.departmentControls,gn=Ct.relateSource,en=pn&&!Lt;return I.createElement(oe.Z,{className:"workConfigControl",visible:!0,width:"960",title:_l("\u6570\u636E\u5BFC\u5165 - \u5EFA\u7ACB\u6620\u5C04\uFF083/3\uFF09"),footer:null,anim:!1,overlayClosable:!1,onCancel:ht},I.createElement("div",{className:"flexColumn h100"},I.createElement("div",{className:"workConfigControlBox flex flexColumn"},I.createElement("div",{className:"flexRow bold"},I.createElement("div",{className:"flex"},_l("Excel\u5217")),I.createElement("div",{className:"controlSeparate"}),I.createElement("div",{className:"flex"},_l("\u5DE5\u4F5C\u8868\u5B57\u6BB5"))),I.createElement(U.Z,{className:"controlBox flex mTop15"},bn?I.createElement(le.Z,{className:"mTop32"}):I.createElement(I.Fragment,null,Xt.map(function(_t,nn){var Gt=_t.type,xt=_t.advancedSetting,Mt=Gt==29&&xt&&xt.showtype=="2",ze=!T().includes(jt,Gt)||Mt,yt=Gt==26&&xt&&xt.usertype=="2",Ut=(Gt==29||Gt==26&&!yt||Gt===27)&&!ze;return I.createElement("div",{className:"flexRow mBottom6",key:nn},I.createElement("div",{className:"excelControls flex"},!ze&&I.createElement(cn,{key:nn,listWidth:390,dropDownData:mt,value:T().find(vt,function(Wt){return Wt.ControlId===_t.controlId}).ColumnNum,onChange:function(kn){var on=_t.type,En=_t.advancedSetting,fn=T().find(mt,function(wa){return wa.value===kn})||{},jn=vt.concat(),Ta=jn.find(function(wa){return wa.ControlId==_t.controlId});Ta.ColumnNum=kn,Ta.ColumnName=fn.text||"";var zn=fn.text.split("-"),pa=zn[zn.length-1].toLowerCase(),Ea=on==26&&En&&En.usertype=="2";if(T().includes([26,27],on)&&!Ea){var la=fe.concat($n).find(function(wa){return wa.text.toLowerCase()==pa});la?_t.matchId=la.value:_t.matchId="name",Ta.matchId=_t.matchId}if(on==29&&Ta.sourceConfig&&Ta.sourceConfig.worksheetId&&!en){var Kn=(gn[Ta.sourceConfig.worksheetId]||{}).controls||[],sa=Kn.find(function(wa){return wa.text.toLowerCase()==pa}),ba=Kn.find(function(wa){return wa.attribute==1}),Fa="";sa?Fa=sa.value:ba?Fa=ba.value:Fa="",Ta.sourceConfig.controlId=Fa}rt.setState({controlMapping:jn})}})),I.createElement("div",{className:"controlSeparate"},!ze&&I.createElement("i",{className:me()("icon-backspace Font18",(T().find(vt,function(Wt){return Wt.ControlId===_t.controlId})||{}).ColumnNum?"ThemeColor3":"Gray_bd")})),I.createElement("div",{className:"sheetControls flex"},Ut?rt.renderRelateWorksheet(_t,en):I.createElement("div",{className:"controlItem flexRow"},I.createElement(z.Z,{className:"Font16 Gray_9e",icon:(0,kt.hB)(_t.type)}),I.createElement("span",{className:"mLeft10 ellipsis flex flexRow alignItemsCenter"},_t.controlName,(Rn===_t.controlId||_t.type!==30&&_t.advancedSetting&&_t.advancedSetting.required==="1")&&I.createElement("span",{className:"mLeft3 star"},"*")),[9,10,11].includes(_t.type)&&!en&&I.createElement(I.Fragment,null,I.createElement("span",{className:"Gray_75 mRight8"},_l("\u5141\u8BB8\u65B0\u589E\u9009\u9879")),I.createElement(_e.Z,{text:"",checked:!!vt.find(function(Wt){return Wt.ControlId===_t.controlId}).isAddOption,onClick:function(kn){var on=T().cloneDeep(vt);on.forEach(function(En){En.ControlId===_t.controlId&&(En.isAddOption=!kn)}),rt.setState({controlMapping:on})}})),_t.type===33&&I.createElement("span",{className:"Gray_9e"},_l("\u4E0D\u5EFA\u7ACB\u6620\u5C04\u5219\u6309\u7167\u7F16\u53F7\u89C4\u5219\u81EA\u52A8\u751F\u6210")),ze&&I.createElement("span",{className:"Gray_9e"},_l("\u6B64\u5B57\u6BB5\u4E0D\u652F\u6301\u5EFA\u7ACB\u6620\u5C04")),yt&&I.createElement("span",{className:"Gray_9e"},_l("\u5916\u90E8\u7528\u6237\u6682\u53EA\u652F\u6301\u901A\u8FC7\u59D3\u540D\u5339\u914D")))))})))),!bn&&this.renderFooter()))}}]),Yt}(I.Component),Mn.propTypes=($e={appId:e().string,worksheetId:e().string,onSave:e().func,onCancel:e().func},(0,b.default)($e,"worksheetId",e().string),(0,b.default)($e,"selectRow",e().object),(0,b.default)($e,"onPrevious",e().func),(0,b.default)($e,"importSheetInfo",e().object),(0,b.default)($e,"filePath",e().string),(0,b.default)($e,"fileId",e().string),(0,b.default)($e,"fileKey",e().string),(0,b.default)($e,"isCharge",e().bool),$e),dt),zt,oa,qn=function(){window.IM&&IM.socket.on("wsexcel",function(Yt){var qt=Yt.accountIds,rt=Yt.addCount,Qe=Yt.errorCount,ht=Yt.repeatCount,Lt=Yt.skipCount,Ct=Yt.updateCount,mt=Yt.id,vt=Yt.wsServiceErrorCount,Xt=Yt.repeated,bn=Yt.isErrorMsg;if(_.includes(qt,md.global.Account.accountId)){var pn=function(Gt){return Gt.toString().replace(/(\d{1,3})(?=(?:\d{3})+$)/g,"$1,")},Rn=rt,fe=Qe,$n=ht,gn=Lt,en=Ct,_t=function(){var Gt=[Xt!==3?_l("\u65B0\u589E%0\u884C",pn(Rn)):"",en||Xt===3?_l("\u66F4\u65B0%0\u884C",pn(en)):"",fe?_l("\u5176\u4E2D%0\u884C\u9519\u8BEF",pn(fe)):""].filter(function(Mt){return Mt}).join(", "),xt=gn&&$n&&gn-$n?"\uFF1B"+_l("\u8DF3\u8FC7%0\u884C\uFF08%1\u884C\u91CD\u590D\uFF0C%2\u884C\u9519\u8BEF\uFF09",pn(gn),pn($n),pn(gn-$n)):gn&&$n?"\uFF1B"+_l("\u8DF3\u8FC7%0\u884C\u91CD\u590D",pn(gn)):gn?"\uFF1B"+_l("\u8DF3\u8FC7%0\u884C\u9519\u8BEF",pn(gn)):"";return Gt+xt};_antNotification.close(mt),_antNotification.success({message:_l("\u5BFC\u5165\u5B8C\u6210"),description:vt>0?_l("\u5BFC\u5165\u5B8C\u6210\uFF0C\u6709\u90E8\u5206\u6570\u636E\u672A\u88AB\u5BFC\u5165,\u8BF7\u5220\u9664\u91CD\u590D\u503C\u540E\u91CD\u8BD5"):_t(),btnText:bn?_l("\u67E5\u770B\u9519\u8BEF\u62A5\u544A"):"",onBtnClick:function(){new ErrorDialog({fileKey:mt})}})}})},In=(oa=zt=function(Vt){(0,j.default)(Yt,Vt);function Yt(qt){(0,C.default)(this,Yt);var rt=(0,Ne.default)(this,(Yt.__proto__||Te()(Yt)).call(this,qt));return rt.state={showUploadExcel:!0,showImportConfigDialog:!1,showConfigControl:!1,fileList:[],fileInfo:{},fileKey:"",importSheetInfo:{},selectRow:{}},rt}return(0,Ce.default)(Yt,[{key:"render",value:function(){var rt=this,Qe=this.props,ht=Qe.isCharge,Lt=Qe.appId,Ct=Qe.worksheetId,mt=Qe.worksheetName,vt=Qe.hideImportDataFromExcel,Xt=this.state,bn=Xt.showImportConfigDialog,pn=Xt.showConfigControl,Rn=Xt.importExcelInfo,fe=Xt.fileList,$n=Xt.fileInfo,gn=Xt.fileKey,en=Xt.importSheetInfo,_t=Xt.selectRow;return bn?I.createElement(Ee,{hideImportConfig:vt,fileName:$n.fileName,fileList:fe,nextStep:function(Gt,xt){rt.setState({showImportConfigDialog:!1,showConfigControl:!0,selectRow:Gt,importSheetInfo:xt})}}):pn?I.createElement(St,{isCharge:ht,appId:Lt,worksheetId:Ct,filePath:$n.filePath,fileId:$n.fileId,fileKey:gn,importExcelInfo:Rn,onSave:function(Gt){L.Z.info({key:Gt,loading:!0,message:_l("\u6B63\u5728\u5BFC\u5165\u6570\u636E\u201C%0\u201D",mt),description:_l("\u8FD9\u53EF\u80FD\u9700\u8981\u4E00\u6BB5\u65F6\u95F4\u3002\u73B0\u5728\u60A8\u53EF\u4EE5\u8FDB\u884C\u5176\u4ED6\u64CD\u4F5C\uFF0C\u5168\u90E8\u5BFC\u5165\u5B8C\u6210\u540E\u5C06\u4F1A\u901A\u77E5\u60A8")})},onCancel:vt,selectRow:_t,importSheetInfo:en,onPrevious:function(){rt.setState({showConfigControl:!1,showImportConfigDialog:!0})}}):I.createElement(de,{hideUploadExcel:function(Gt,xt,Mt){Gt||vt(),rt.setState({showUploadExcel:!1,showImportConfigDialog:!!Gt,fileList:Gt?Gt.filter(function(ze){return ze.rows.length}):[],fileInfo:xt,fileKey:Mt})},worksheetId:Ct})}}]),Yt}(I.Component),zt.propTypes={isCharge:e().bool,hideImportDataFromExcel:e().func,appId:e().string,worksheetId:e().string,worksheetName:e().string},oa)},66366:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>Re});var h=t(8177),Te=t.n(h),C=t(69288),Ce=t(88239),Ne=t(31546),j=t(52945),L=t.n(j),I=t(88106),k=t(63239),e=t.n(k),oe=t(85105),m=t.n(oe),y=t(99663),i=t(22600),me=t(49135),J=t(93196),T=t(67294),te=t(45697),E=t.n(te),r=t(93967),R=t.n(r),a=t(44894),z=t(45231),N=t(47426),q=t(62232),K=t(24538),ye=t(86674),v=t(61987),se=t(15742),de=t(24607),U=t(89499),pe=t(96486),Y=t.n(pe),be=t(33174),Q,Le,Be,ke,Ie;function he(ue,we,Ee,b,le){var ae={};return Object.keys(b).forEach(function(ve){ae[ve]=b[ve]}),ae.enumerable=!!ae.enumerable,ae.configurable=!!ae.configurable,("value"in ae||ae.initializer)&&(ae.writable=!0),ae=Ee.slice().reverse().reduce(function(ve,W){return W(ue,we,ve)||ve},ae),le&&ae.initializer!==void 0&&(ae.value=ae.initializer?ae.initializer.call(le):void 0,ae.initializer=void 0),ae.initializer===void 0&&(Object.defineProperty(ue,we,ae),ae=null),ae}var Re=(Be=(Ie=ke=function(ue){(0,J.default)(we,ue);function we(Ee){(0,y.default)(this,we);var b=(0,me.default)(this,(we.__proto__||m()(we)).call(this,Ee));return b.updating=!1,b.customwidget=T.createRef(),b.state={isUpdating:!1,worksheetId:Ee.worksheetId,controlsForSelect:[],selectedControlId:void 0,ownerAccount:{},updateType:2,showError:!1,hasError:!1,formFlag:Math.random().toString(32)},b}return(0,i.default)(we,[{key:"componentDidMount",value:function(){var b=this,le=this.props,ae=le.appId,ve=le.worksheetId,W=le.view,ce=le.activeControl,Z={appId:ae,worksheetId:ve,getTemplate:!0};z.Z.getWorksheetInfo(Z).then(function(_e){var P=(0,U.zj)(_e.appId,_e.template.controls),xe=P.filter(function(tt){return(tt.type<1e4&&Y().includes(se.uG,tt.type)&&!(tt.type===29&&Y().includes(["2","5","6"],Y().get(tt,"advancedSetting.showtype")))&&!Y().find(ye.xj.concat(ye._Q),{controlId:tt.controlId})&&!Y().find(W.controls,function(Dt){return tt.controlId===Dt})||tt.controlId==="ownerid")&&(0,de.kM)(tt).visible&&(0,de.kM)(tt).editable}),bt=!!xe.length&&xe[0].controlId;Y().isObject(ce)&&Y().find(xe,function(tt){return tt.controlId===ce.controlId})&&(bt=ce.controlId),Y().isObject(ce)&&ce.controlId==="ownerid"&&(bt="ownerid"),b.setState({formData:P,controlsForSelect:xe,selectedControlId:bt,updateType:2})})}},{key:"componentDidUpdate",value:function(){this.customwidget.current&&this.customwidget.current.con&&this.customwidget.current.con.current&&$(this.customwidget.current.con.current).find("textarea, input").focus()}},{key:"selectOwner",value:function(b){var le=this,ae=this.props,ve=ae.appId,W=ae.projectId;(0,v.ZP)($(b.target).closest(".selectOwner")[0],{projectId:W,showMoreInvite:!1,isTask:!1,tabType:3,appId:ve,includeUndefinedAndMySelf:!0,offset:{top:2,left:0},zIndex:10001,SelectUserSettings:{unique:!0,projectId:W,callback:function(Z){le.setState({ownerAccount:Z[0],hasError:!1})}},selectCb:function(Z){le.setState({ownerAccount:Z[0],hasError:!1})}})}},{key:"updateRecords",value:function(){var b=this,le=this.state,ae=le.formData,ve=le.selectedControlId,W=le.updateType,ce=le.ownerAccount,Z=this.props,_e=Z.appId,P=Z.viewId,xe=Z.worksheetId,bt=Z.recordId,tt=Z.selectedRows,Dt=Z.worksheetInfo,vn=Z.searchArgs,Fe=Z.quickFilter,Bt=Z.navGroupFilters,kt=Z.allWorksheetIsSelected,Tt=Z.clearSelect,tn=Tt===void 0?function(){}:Tt,Vn=Z.hideEditRecord,Zn=Z.reloadWorksheet,Ot=Z.updateRows,$t=Z.getWorksheetSheetViewSummary;if(this.updating)return!1;var cn=void 0,Mn=void 0;if(W===2&&ve!=="ownerid")try{var dt=this.customwidget.current.getSubmitData({ignoreAlert:!0});Mn=dt.data,cn=dt.hasError}catch(St){console.log(St)}if(ve==="ownerid"&&(cn=this.state.hasError),ve){if(ve==="ownerid"&&!ce.accountId)return this.setState({showError:!0,hasError:!0}),!1}else return alert(_l("\u8BF7\u9009\u62E9\u8981\u7F16\u8F91\u7684\u5B57\u6BB5"),3),!1;var $e=tt.filter(function(St){return St.allowedit||St.allowEdit}).map(function(St){return St.rowid});if(!kt&&$e.length===0)return alert(_l("\u65E0\u6743\u9650\u4FEE\u6539\u9009\u62E9\u7684%0",Dt.entityName),2),!1;if(cn)return this.setState({showError:!0,hasError:!0}),alert(_l("\u8BF7\u6B63\u786E\u586B\u5199%0",Dt.entityName),3),!1;var jt=void 0;if(ve==="ownerid"?jt={controlId:"ownerid",type:26,value:ce.accountId}:jt=Y().find(Mn||ae,function(St){return St.controlId===ve}),!!jt){var rn=(0,de.jz)(jt,{needFullUpdate:!bt});if((rn.type===29||rn.type===35)&&rn.value)try{rn.relationValues=JSON.parse(rn.value)}catch(St){}W===1&&(rn.value="");var Rt={appId:_e,viewId:P,worksheetId:xe,rowIds:$e,cells:rn};kt&&(delete Rt.rowIds,Rt.isAll=!0,Rt.excludeRowIds=tt.map(function(St){return St.rowid}),Rt.filterControls=vn.filterControls,Rt.fastFilters=(Y().isArray(Fe)?Fe:[]).map(function(St){return Y().pick(St,["controlId","dataType","spliceType","filterType","dateRange","value","values","minValue","maxValue"])}),Rt.navGroupFilters=Bt,Rt.keyWords=vn.keyWords,Rt.searchType=vn.searchType),this.setState({isUpdating:!0}),z.Z.updateWorksheetRows(Rt).then(function(St){if(St.isSuccess){if(b.setState({isUpdating:!1}),tn(),Vn(),St.successCount===tt.length?alert(_l("\u4FEE\u6539\u6210\u529F")):$e.length<tt.length&&alert(_l("\u4FEE\u6539\u6210\u529F\uFF0C\u65E0\u7F16\u8F91\u6743\u9650\u7684%0\u65E0\u6CD5\u4FEE\u6539",Dt.entityName)),kt)Zn();else{if(jt.type===29)if(jt.advancedSetting.showtype==="2"){var zt=void 0;try{zt=JSON.parse(rn.value)}catch(oa){zt=[]}rn.value=zt.length}else rn.value=jt.value;Y().includes([19,23,24],jt.type)&&(rn.value=jt.value),ve==="ownerid"&&(rn.value=e()([ce])),Ot($e,(0,I.default)({},rn.controlId,rn.value))}$t()}else alert(_l("\u4FEE\u6539\u5931\u8D25"),2)})}}},{key:"getUpdateTypes",value:function(b){return b?b.type===14||b.unique?[{value:1,disabled:b.required,text:_l("\u6E05\u7A7A\u5185\u5BB9")}]:[{value:2,text:_l("\u4FEE\u6539\u4E3A\u65B0\u503C")},{disabled:b.required||this.state.selectedControlId==="ownerid",value:1,text:_l("\u6E05\u7A7A\u5185\u5BB9")}]:[]}},{key:"renderItem",value:function(b){return T.createElement("span",null,T.createElement("i",{className:R()("Font16 icon Gray_9e mRight6","icon-"+(0,q.hB)(b.control.type)),style:{verticalAlign:"text-top"}}),b.text)}},{key:"render",value:function(){var b=this,le=this.state,ae=le.isUpdating,ve=le.updateType,W=le.selectedControlId,ce=le.formData,Z=ce===void 0?[]:ce,_e=le.controlsForSelect,P=le.showError,xe=le.hasError,bt=le.formFlag,tt=this.props,Dt=tt.projectId,vn=tt.worksheetId,Fe=tt.hideEditRecord,Bt=tt.appId,kt=_e.filter(function(Tt){return Tt.controlId===W})[0]||{};return T.createElement(be.Z,null,T.createElement(C.Z,{className:"workSheetEditRecord",title:_l("\u6279\u91CF\u7F16\u8F91"),description:_l("\u901A\u8FC7\u6279\u91CF\u7F16\u8F91\u53EF\u5FEB\u901F\u7EDF\u4E00\u4FEE\u6539\u76F8\u540C\u5B57\u6BB5\u7684\u6570\u636E\u5185\u5BB9\uFF0C\u65E0\u7F16\u8F91\u6743\u9650\u7684\u8BB0\u5F55\u65E0\u6CD5\u4FEE\u6539\u3002"),overlayClosable:!1,width:"560",anim:!1,okText:ae?_l("\u64CD\u4F5C\u4E2D..."):void 0,okDisabled:kt&&kt.required&&kt.unique||ae,onCancel:function(){ae||Fe()},onOk:this.updateRecords,visible:this.props.visible},T.createElement("div",{className:R()("editRecordBox Font14",P&&xe&&"hasError")},T.createElement("div",{className:"selectControl mBottom10"},T.createElement("span",{className:"TxtMiddle mRight8 label Gray_9e"},_l("\u5B57\u6BB5")),T.createElement(Ne.Z,{isAppendToBody:!0,openSearch:!0,className:"workSheetControlDropDown",value:W,data:_e.filter(function(Tt){return!ye.x0.includes(Tt.controlId)||Tt.controlId==="ownerid"}).map(function(Tt){return{text:Tt.controlName,value:Tt.controlId,control:Tt}}),renderItem:this.renderItem,renderTitle:this.renderItem,onChange:function(tn){var Vn=Z.map(function($t){return $t.controlId===tn?L()({},$t,{value:void 0}):$t}),Zn=_e.filter(function($t){return $t.controlId===tn})[0]||{},Ot={selectedControlId:tn,updateType:Zn.type===14?1:2,formData:Vn,hasError:!1,formFlag:Math.random().toString(32)};b.setState(Ot)}})),T.createElement("div",{className:"selectControlContent"},T.createElement("span",{className:"TxtMiddle mRight8 label Gray_9e"},_l("\u5B57\u6BB5\u5185\u5BB9")),T.createElement("span",{className:"TxtMiddle updateControlType mLeft5"},T.createElement(N.ZP,{className:"controlValueRadio TxtMiddle InlineBlock",vertical:!0,data:this.getUpdateTypes(kt),checkedValue:ve,onChange:function(tn){var Vn=Z.map(function(Ot){return Ot.controlId===W?L()({},Ot,{value:void 0}):Ot}),Zn={updateType:tn,formData:Vn,hasError:!1};b.setState(Zn)},size:"small"}))),kt&&this.state.selectedControlId!=="ownerid"&&!kt.unique&&ve===2&&kt.type!==14&&_e.length>0&&T.createElement(K.Z,{disableRules:!0,recordId:"00000",ref:this.customwidget,flag:bt,data:Z.filter(function(Tt){return Tt.controlId===W}).map(function(Tt){return(0,Ce.default)({},Tt,{size:12,sectionId:void 0})}),projectId:Dt,appId:Bt,worksheetId:vn,onChange:function(tn){var Vn={formData:Z.map(function(Zn){var Ot=Y().find(tn,function($t){return $t.controlId===Zn.controlId});return Ot||Zn})};b.setState(Vn)}}),this.state.selectedControlId==="ownerid"&&T.createElement("div",{className:"selectOwnerBox"},T.createElement("div",{className:"selectOwner mTop8 pointer",ref:function(tn){return b.owner=tn},onClick:this.selectOwner},T.createElement("span",{className:"InlineBlock flex"},this.state.ownerAccount.fullname||""),T.createElement("i",{className:"Right ming Icon icon icon-charger"}))))))}}]),we}(T.Component),ke.propTypes={appId:E().string,viewId:E().string,view:E().shape({}),worksheetId:E().string,visible:E().bool,allWorksheetIsSelected:E().bool,hideEditRecord:E().func,clearSelect:E().func,reloadWorksheet:E().func,updateRows:E().func,getWorksheetSheetViewSummary:E().func,searchArgs:E().shape({}),selectedRows:E().arrayOf(E().shape({})),worksheetInfo:E().shape({})},Ie),he(Be.prototype,"selectOwner",[a.Nj],Te()(Be.prototype,"selectOwner"),Be.prototype),he(Be.prototype,"updateRecords",[a.Nj],Te()(Be.prototype,"updateRecords"),Be.prototype),Be)},10502:(wn,gt,t)=>{"use strict";t.d(gt,{V:()=>Ne});var h=t(88239);if(!/^(1887|7596|7798)$/.test(t.j))var Te=t(66366);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(1952);var Ce=null,Ne=function(L){return(0,C.Z)(Te.Z,(0,h.default)({},L,{closeFnName:"hideEditRecord"}))}},86109:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>N});var h=t(62521),Te=t(16469),C=t(70264),Ce=t(33867),Ne=t(60967),j=t(85315),L=t(88239),I=t(85105),k=t.n(I),e=t(99663),oe=t(22600),m=t(49135),y=t(93196),i=t(86735),me=t(67294),J=t(29314),T=t(71893),te=t(93967),E=t.n(te),r=t(96486),R=t.n(r),a=(0,i.Z)([`
  padding: `,`;
  height: 36px;
  border-bottom: 1px solid #e0e0e0;
  display: -webkit-box;
  display: -moz-box;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
  .workSheetViewsWrapper {
    width: 100%;
    height: 38px;
    position: relative;
    overflow: hidden;
    &::before,
    &::after {
      content: '';
      width: 20px;
      height: 36px;
      position: absolute;
      top: 0;
      z-index: 1;
    }
    &::before {
      left: 0;
      background-image: linear-gradient(to right, #fff 30%, rgba(255, 255, 255, 0) 100%);
    }
    &::after {
      right: 0;
      background-image: linear-gradient(to left, #fff 30%, rgba(255, 255, 255, 0) 100%);
    }
    .viewsScroll {
      display: flex;
      position: absolute;
      width: 100%;
      top: 0;
      left: 0;
      overflow-x: auto;
      overflow-y: hidden;
      .stance {
        height: 37px;
        min-width: 20px;
      }
    }
  }
  .selectSheetIcon {
    .showDisabledDot {
      position: absolute;
      right: 0;
      top: 0;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: #ff9300;
    }
  }
`],[`
  padding: `,`;
  height: 36px;
  border-bottom: 1px solid #e0e0e0;
  display: -webkit-box;
  display: -moz-box;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
  .workSheetViewsWrapper {
    width: 100%;
    height: 38px;
    position: relative;
    overflow: hidden;
    &::before,
    &::after {
      content: '';
      width: 20px;
      height: 36px;
      position: absolute;
      top: 0;
      z-index: 1;
    }
    &::before {
      left: 0;
      background-image: linear-gradient(to right, #fff 30%, rgba(255, 255, 255, 0) 100%);
    }
    &::after {
      right: 0;
      background-image: linear-gradient(to left, #fff 30%, rgba(255, 255, 255, 0) 100%);
    }
    .viewsScroll {
      display: flex;
      position: absolute;
      width: 100%;
      top: 0;
      left: 0;
      overflow-x: auto;
      overflow-y: hidden;
      .stance {
        height: 37px;
        min-width: 20px;
      }
    }
  }
  .selectSheetIcon {
    .showDisabledDot {
      position: absolute;
      right: 0;
      top: 0;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background-color: #ff9300;
    }
  }
`]),z=T.ZP.div(a,function(q){return q.disabled?"":"0 20px"}),N=function(q){(0,y.default)(K,q);function K(ye){(0,e.default)(this,K);var v=(0,m.default)(this,(K.__proto__||k()(K)).call(this,ye));return v.updateScrollBtnState=function(){var se=v.state.hideDirection,de=v.scrollWraperEl.querySelector(".viewsScroll"),U=de.scrollWidth,pe=de.scrollLeft,Y=de.offsetWidth,be=pe+Y;if(!pe&&se!=="left"){v.setState({hideDirection:"left"});return}if(be===U&&se!=="right"){v.setState({hideDirection:"right"});return}pe&&be<U&&se!==null&&v.setState({hideDirection:null})},v.handleScrollPosition=function(se){if(v.scrollWraperEl){var de=v.scrollWraperEl.clientWidth,U=se?de/2:-(de/2),pe=v.scrollWraperEl.querySelector(".viewsScroll"),Y=pe.scrollLeft;pe.scrollLeft=Y+U}},v.editCurrentSheetName=function(se){var de=v.props.currentSheetInfo;v.props.updateCurrentSheetInfo((0,L.default)({},de,{isEditSheetName:!0})),v.setState({sheetItemOperateVisible:!1},function(){$(v.editInput)&&$(v.editInput).focus()})},v.state={directionVisible:!1,hideDirection:"left",sheetItemOperateVisible:!1},v}return(0,oe.default)(K,[{key:"componentWillReceiveProps",value:function(){this.computeDirectionVisible()}},{key:"computeDirectionVisible",value:function(){if(this.scrollWraperEl){var v=this.scrollWraperEl.querySelector(".viewsScroll");if(v){var se=v.offsetWidth,de=v.scrollWidth;this.flag=!0,this.setState({directionVisible:se<de})}}}},{key:"render",value:function(){var v=this,se=this.props,de=se.excelDetailData,U=se.currentSheetInfo,pe=U===void 0?{}:U,Y=se.selectedImportSheetIds,be=Y===void 0?[]:Y,Q=se.disabled,Le=se.versionLimitSheetCount,Be=Le===void 0?0:Le,ke=se.currentSheetCount,Ie=ke===void 0?0:ke,he=this.state,Re=he.directionVisible,ue=he.hideDirection,we=R().some(de,function(Ee){return Ee.disabled});return me.createElement(z,{disabled:Q},!Q&&me.createElement("div",{className:"selectSheetIcon Relative"},me.createElement(J.Z,{popupClassName:"selectImportSheetWrap",action:["click"],popupPlacement:"bottom",builtinPlacements:{bottom:{points:["tl","bl"]}},popup:me.createElement(me.Fragment,null,me.createElement("div",{className:"Font14 bold"},_l("\u9009\u62E9\u5BFC\u5165\u7684sheet")),(de||[]).map(function(Ee){var b=Ee.rows&&Ee.rows.length&&Ee.rows[0].cells.length,le=Ee.total-1>2e4?_l("\u8BE5sheet\u8D85\u8FC7\u5BFC\u5165\u4E0A\u9650\uFF08\u4E0A\u965020000\u884C\uFF09"):b>200?_l("\u8BE5sheet\u8D85\u8FC7\u5BFC\u5165\u4E0A\u9650\uFF08\u4E0A\u9650200\u5217\uFF09"):Ee.isMerge?_l("Sheet\u5185\u4E0D\u53EF\u4EE5\u6709\u5408\u5E76\u5355\u5143\u683C"):!Ee.rows||R().isEmpty(Ee.rows)?_l("\u8BE5sheet\u4E3A\u7A7A"):_l("\u8BE5sheet\u8D85\u8FC7\u5BFC\u5165\u4E0A\u9650\uFF08\u4E0A\u9650%0\u5F20\u8868\uFF09",Be);return me.createElement("div",{key:Ee.sheetId,className:"pTop20 flexRow alignItemsCenter"},me.createElement(Ne.Z,{checked:R().includes(be,Ee.sheetId),disabled:Ee.disabled,onClick:function(ve){var W=[].concat((0,j.Z)(be)),ce=[];if(!ve)W.push(Ee.sheetId),Be!==0&&W.length>Be-Ie-1&&(ce=[].concat((0,j.Z)(de)).map(function(_e,P){return R().includes(W,_e.sheetId)?_e:(0,L.default)({},_e,{disabled:!0})}));else{if(W.length===1&&de.some(function(_e){return!_e.disabled}))return alert(_l("\u81F3\u5C11\u5BFC\u51651\u5F20Sheet"),3);W=be.filter(function(_e){return _e!==Ee.sheetId}),Be!==0&&W.length<Be-Ie&&(ce=[].concat((0,j.Z)(de)).map(function(_e,P){return!R().includes(W,_e.sheetId)&&!(!_e.state||!_e.rows||!_e.rows.length||_e.rows&&_e.rows.some(function(xe){return xe.cells&&xe.cells.length>200}))?(0,L.default)({},_e,{disabled:!1}):_e}))}if(W.length&&!R().includes(W,pe.sheetId)){var Z=R().find(de,function(_e){return _e.sheetId===W[0]});v.props.updateCurrentSheetInfo(Z)}v.props.updateSelectedImportSheetIds(W),!R().isEmpty(ce)&&v.props.updateExcelDetailData(ce),v.setState({},function(){v.computeDirectionVisible()})}}),me.createElement("span",{className:E()("flex ellipsis",{Gray_bd:Ee.disabled})},Ee.sheetName,Ee.disabled&&me.createElement(C.Z,{placement:"bottom",text:me.createElement("span",null,le)},me.createElement(Ce.Z,{icon:"info_outline",className:E()("mLeft2 Font16",{Colorff9:Ee.rows.length,Gray_bd:!Ee.rows.length})}))))})),popupAlign:{offset:[0,0]}},me.createElement(Ce.Z,{icon:"menu",className:"Font20 Gray_75"})),we&&me.createElement("div",{className:"showDisabledDot"})),me.createElement("div",{className:"valignWrapper flex workSheetViewsWrapper",ref:function(b){v.scrollWraperEl=b}},me.createElement("div",{className:"viewsScroll",onScroll:this.updateScrollBtnState},me.createElement("div",{className:"stance"}),de.filter(function(Ee){return R().includes(be,Ee.sheetId)}).map(function(Ee,b){return Ee.sheetId===pe.sheetId?me.createElement("div",{key:Ee.id,className:E()("valignWrapper workSheetViewItem pointer",{active:Ee.sheetId===pe.sheetId})},me.createElement("span",{className:E()("ellipsis pLeft10 pRight10",{ThemeColor:Ee.sheetId===pe.sheetId}),onClick:function(){v.props.updateCurrentSheetInfo(Ee)}},pe.isEditSheetName?me.createElement("input",{defaultValue:pe.sheetName,ref:function(ae){return v.editInput=ae},className:"editSheetNameInput Gray",autoFocus:!0,onFocus:function(){setTimeout(function(){v.editInput&&v.editInput.current&&v.editInput.current.select()},0)},onBlur:function(ae){var ve=ae.target.value;if(!R().trim(ve)){$(v.editInput).focus();return}v.props.updateCurrentSheetInfo((0,L.default)({},pe,{isEditSheetName:!1,sheetName:R().trim(ve)}))}}):me.createElement("span",{onDoubleClick:function(){Q||(v.props.updateCurrentSheetInfo((0,L.default)({},pe,{isEditSheetName:!0})),$(v.editInput)&&$(v.editInput).focus())}},Ee.sheetName)),!pe.isEditSheetName&&!Q&&me.createElement(J.Z,{popupVisible:v.state.sheetItemOperateVisible,onPopupVisibleChange:function(ae){v.setState({sheetItemOperateVisible:ae})},popupClassName:"DropdownPanelTrigger",action:["click"],popupAlign:{points:["tl","bl"],offset:[-80,13]},popup:me.createElement(h.Z,null,me.createElement(Te.Z,{icon:me.createElement(Ce.Z,{icon:"edit"}),onClick:function(){return v.editCurrentSheetName(Ee)}},me.createElement("span",{className:"text"},_l("\u4FEE\u6539\u8868\u540D\u79F0"))),me.createElement(Te.Z,{icon:me.createElement(Ce.Z,{icon:"file_upload_off"}),onClick:function(){if(be.length===1)return alert(_l("\u81F3\u5C11\u5BFC\u51651\u5F20Sheet"),3);var ae=be.filter(function(W){return W!==Ee.sheetId});if(ae.length&&!R().includes(ae,pe.sheetId)){var ve=R().find(de,function(W){return W.sheetId===ae[0]});v.props.updateCurrentSheetInfo(ve)}v.props.updateSelectedImportSheetIds(ae),v.setState({sheetItemOperateVisible:!1},function(){v.computeDirectionVisible()})}},me.createElement("span",{className:"text"},_l("\u4E0D\u5BFC\u5165\u6B64sheet"))))},me.createElement(Ce.Z,{icon:"arrow-down",className:"Gray_9d"}))):me.createElement("div",{key:Ee.id,className:E()("valignWrapper workSheetViewItem pointer",{active:Ee.sheetId===pe.sheetId})},me.createElement("span",{className:E()("ellipsis pLeft10 pRight10",{ThemeColor:Ee.sheetId===pe.sheetId}),onClick:function(){v.props.updateCurrentSheetInfo(Ee)}},Ee.sheetName),!Q&&me.createElement(Ce.Z,{icon:"arrow-down",className:"Gray_9d"}))}),me.createElement("div",{className:"stance"}))),Re&&me.createElement("div",{className:"showMoreWrap"},me.createElement(Ce.Z,{icon:"arrow-left-tip",className:E()("Gray_9e pointer Font15",{Alpha3:ue==="left"}),onClick:function(){return v.handleScrollPosition(0)}}),me.createElement(Ce.Z,{icon:"arrow-right-tip",className:E()("Gray_9e pointer Font15",{Alpha3:ue==="right"}),onClick:function(){return v.handleScrollPosition(1)}})))}}]),K}(me.Component)},66261:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>nn});var h=t(88106),Te=t(63239),C=t.n(Te),Ce=t(52945),Ne=t.n(Ce),j=t(47518),L=t.n(j),I=t(88239),k=t(85105),e=t.n(k),oe=t(99663),m=t(22600),y=t(49135),i=t(93196),me=t(99934),J=t(67294),T=t(45697),te=t.n(T),E=t(50533),r=t(22010),R=t(69288),a=t(97933),z=function(Gt){(0,i.default)(xt,Gt);function xt(Mt){(0,oe.default)(this,xt);var ze=(0,y.default)(this,(xt.__proto__||e()(xt)).call(this,Mt));return ze.fileUploaded=function(yt){ze.props.fileUploaded(yt)},ze.state={},ze}return(0,m.default)(xt,[{key:"render",value:function(){var ze=this,yt=this.props.visible;return J.createElement(R.Z,{width:544,height:426,title:J.createElement("span",{className:"Bold"},_l("\u4E0A\u4F20Excel\u6587\u4EF6")),visible:yt,footer:null,onCancel:function(){return ze.props.onCancel()}},J.createElement(a.Z,{onCancel:this.props.onCancel,fileUploaded:this.fileUploaded}))}}]),xt}(J.Component),N=t(42185),q=t(66946),K=t(54208),ye=t(62521),v=t(16469),se=t(70264),de=t(33867),U=t(60967),pe=t(34279),Y=t(64749),be=t(86735),Q=t(29314),Le=t(86109),Be=t(86674),ke,Ie=(ke={2:{mapField:"TEXT"},3:{mapField:"MOBILE_PHONE"},4:{mapField:"TELEPHONE"},5:{mapField:"EMAIL"},6:{mapField:"NUMBER"},7:{mapField:"CRED"},8:{mapField:"MONEY"},9:{mapField:"FLAT_MENU"},10:{mapField:"MULTI_SELECT"},11:{mapField:"DROP_DOWN"},14:{mapField:"ATTACHMENT"},15:{mapField:"DATE"},16:{mapField:"DATE_TIME"},19:{mapField:"AREA_PROVINCE"},21:{mapField:"RELATION"},22:{mapField:"SPLIT_LINE"},23:{mapField:"AREA_CITY"},24:{mapField:"AREA_COUNTY"},25:{mapField:"MONEY_CN"},26:{mapField:"USER_PICKER"},27:{mapField:"DEPARTMENT"},28:{mapField:"SCORE"},29:{mapField:"RELATE_SHEET"},30:{mapField:"SHEET_FIELD"},31:{mapField:"FORMULA_NUMBER"}},(0,h.default)(ke,"31",{mapField:"FORMULA_NUMBER"}),(0,h.default)(ke,32,{mapField:"CONCATENATE"}),(0,h.default)(ke,33,{mapField:"AUTO_ID"}),(0,h.default)(ke,34,{mapField:"SUB_LIST"}),(0,h.default)(ke,35,{mapField:"CASCADER"}),(0,h.default)(ke,36,{mapField:"SWITCH"}),(0,h.default)(ke,37,{mapField:"SUBTOTAL"}),(0,h.default)(ke,38,{mapField:"FORMULA_DATE"}),(0,h.default)(ke,40,{mapField:"LOCATION"}),(0,h.default)(ke,41,{mapField:"RICH_TEXT"}),(0,h.default)(ke,43,{mapField:"OCR"}),(0,h.default)(ke,45,{mapField:"EMBED"}),(0,h.default)(ke,46,{mapField:"TIME"}),(0,h.default)(ke,47,{mapField:"BAR_CODE"}),(0,h.default)(ke,48,{mapField:"ORG_ROLE"}),(0,h.default)(ke,49,{mapField:"SEARCH_BTN"}),(0,h.default)(ke,50,{mapField:"SEARCH"}),ke),he=t(62232),Re=t(57483),ue=t(67272),we=t(51024),Ee=t(31546),b=t(71893),le=t(57467),ae=t(56337),ve=t(96486),W=t.n(ve),ce=null,Z=[2,3,4,6,7,8,9,10,11,15,16,19,23,24,26,27,28,36,46],_e=[5,14,29,33],P=[2,[11,9],10,6,8,5,[15,16],46,[3,4],[24,19,23],26,27,14,36,28,33,7],xe=[{text:_l("\u8FD4\u56DE"),value:"back",iconName:"arrow-left-border"}],bt=[{text:J.createElement("div",{className:"relateItem"},J.createElement("span",null,_l("\u5173\u8054\u5230\u5176\u4ED6\u5DE5\u4F5C\u8868")),J.createElement("span",{className:"Font14 Gray_9e icon-arrow-right-border"})),value:"next",iconName:"link_record"}],tt=function(xt,Mt){return xt===2?xe.concat(Mt.map(function(ze){return{text:ze.workSheetName,value:ze.workSheetId}})):bt.concat(P.map(function(ze){var yt=W().isArray(ze)?ze[0]:ze,Ut=he.GV[yt],Wt=Be.g5[Ut]||{};return{text:Wt.widgetName,value:yt,iconName:(0,he.hB)(yt),total:[].concat(ze)}}))},Dt=t(45231),vn=t(93967),Fe=t.n(vn),Bt=(0,be.Z)([`
  background: #ffffff;
  box-shadow: 0 4px 20px rgb(0 0 0 / 13%), 0 2px 6px rgb(0 0 0 / 10%);
  border-radius: 3px 3px 3px 3px;
  width: 350px;
  padding: 20px;
  max-height: 450px;
  .name {
    display: flex;
    align-items: center;
  }
  .Item-content {
    .ming.Icon {
      font-size: 16px;
    }
    .itemText {
      padding-left: 15px;
      .Icon {
        position: unset !important;
      }
      &.disabeldRelate {
        .icon-arrow-right-border {
          display: none !important;
        }
      }
    }
  }
  .relateItem {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
`],[`
  background: #ffffff;
  box-shadow: 0 4px 20px rgb(0 0 0 / 13%), 0 2px 6px rgb(0 0 0 / 10%);
  border-radius: 3px 3px 3px 3px;
  width: 350px;
  padding: 20px;
  max-height: 450px;
  .name {
    display: flex;
    align-items: center;
  }
  .Item-content {
    .ming.Icon {
      font-size: 16px;
    }
    .itemText {
      padding-left: 15px;
      .Icon {
        position: unset !important;
      }
      &.disabeldRelate {
        .icon-arrow-right-border {
          display: none !important;
        }
      }
    }
  }
  .relateItem {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
`]),kt=b.ZP.div(Bt),Tt=function(Gt){(0,i.default)(xt,Gt);function xt(Mt){(0,oe.default)(this,xt);var ze=(0,y.default)(this,(xt.__proto__||e()(xt)).call(this,Mt));return ze.getControls=function(yt){ze.setState({loading:!0}),Dt.Z.getWorksheetInfo({worksheetId:yt,getTemplate:!0,getViews:!1}).then(function(Ut){var Wt=Ut.template;ze.setState({controls:(W().get(Wt,"controls")||[]).map(function(kn){return{value:kn.controlId,text:kn.controlName}})})}).finally(function(){ze.setState({loading:!1})})},ze.handleChange=function(yt){var Ut=W().includes([15,16],yt.type),Wt=W().includes([10,11],yt.type)?(0,I.default)({},yt,{options:[],enumDefault:W().includes([15,16],yt.type)?0:yt.enumDefault,enumDefault2:W().includes([15,16],yt.type)?0:yt.enumDefault2}):(0,I.default)({},yt,{enumDefault:W().includes([15,16],yt.type)?0:yt.enumDefault,enumDefault2:W().includes([15,16],yt.type)?0:yt.enumDefault2}),kn=(0,I.default)({},ze.props.data,Wt);kn.type!==29&&delete kn.sourceConfig,ze.props.onChange(kn)},ze.state={step:W().get(ze.props.data,"dataSource")?2:1,visible:!1,controls:[],loading:!1},ze}return(0,m.default)(xt,[{key:"componentDidMount",value:function(){this.fieldName&&this.fieldName.focus();var ze=this.props.data;ze=ze===void 0?{}:ze;var yt=ze.type,Ut=ze.dataSource;yt===29&&Ut&&W().isEmpty(this.state.controls)&&this.getControls(Ut)}},{key:"componentWillReceiveProps",value:function(ze){var yt=ze.data;yt=yt===void 0?{}:yt;var Ut=yt.type,Wt=yt.dataSource;Ut===29&&Wt&&Wt!==(this.props.data||{}).dataSource&&this.getControls(Wt)}},{key:"getSelectControl",value:function(){var ze=this.props,yt=ze.data,Ut=ze.worksheetList,Wt=Ut===void 0?[]:Ut,kn=tt(1,Wt).concat(tt(2,Wt)),on=yt.dataSource||yt.type;return W().find(kn,function(En){return En.total?W().includes(En.total,on):En.value===on})}},{key:"render",value:function(){var ze=this,yt=this.props,Ut=yt.data,Wt=Ut===void 0?{}:Ut,kn=yt.worksheetList,on=kn===void 0?[]:kn,En=yt.createType,fn=this.state,jn=fn.step,Ta=fn.visible,zn=fn.controls,pa=fn.loading,Ea=Wt.type,la=Wt.controlName,Kn=Wt.dataSource,sa=Wt.sourceConfig,ba=sa===void 0?{}:sa,Fa=he.GV[Ea],wa={data:Wt,onChange:this.handleChange},Na=ae.Z[Fa],Za=En==="app"?tt(jn,on).filter(function(ya){return ya.value!=="next"}):tt(jn,on);return J.createElement(kt,null,J.createElement(le.d4,{className:"mTop0"},J.createElement("div",{className:"settingItemTitle"},_l("\u7C7B\u578B")),J.createElement(Ee.Z,{border:!0,openSearch:!0,popupVisible:Ta,value:Kn||Ea,data:Za.map(function(ya){return(0,I.default)({},ya,{disabled:(ya.value===14||ya.value===36||ya.value==="next")&&Wt.attribute===1})}),renderTitle:function(){return J.createElement("div",{className:"flex name"},J.createElement(de.Z,{className:"icon Font17 mRight5 Gray_9d",icon:(0,he.hB)(Ea)}),J.createElement("div",{className:"ellipsis InlineBlock Font14"},Ea===29?_l("\u5173\u8054\u5230"):W().get(ze.getSelectControl(),"text"),Ea===29&&J.createElement("span",{className:"ThemeColor3 mLeft3"},W().get(ze.getSelectControl(),"text"))))},renderItem:function(An){return J.createElement("div",{className:Fe()("itemText flexRow",{disabeldRelate:Wt.attribute===1&&An.value==="next"})},J.createElement("div",{className:"flex"},An.text),J.createElement("span",null,Wt.attribute===1&&(An.value===14||An.value===36||An.value==="next")&&J.createElement(se.Z,{text:J.createElement("span",null,_l("\u6807\u9898\u5B57\u6BB5\u4E0D\u80FD\u8BBE\u7F6E\u4E3A\u6B64\u7C7B\u578B")),action:["hover"]},J.createElement(de.Z,{icon:"info_outline",className:"Gray_bd mLeft8 Hand Font15"}))))},onChange:function(An){W().includes(["next","back"],An)?ze.setState({step:An==="next"?2:1,visible:!0}):(ze.setState({visible:!1}),W().includes(W().flatten(P),An)?ze.handleChange((0,I.default)({type:An},W().omit(Be.gE[he.GV[An]],["controlName"]))):ze.handleChange((0,I.default)({type:29,dataSource:An},W().omit(Be.gE[he.GV[29]],["controlName"]))))}})),Ea===29&&Kn&&J.createElement(le.d4,null,J.createElement("div",{className:"settingItemTitle"},_l("\u5339\u914D\u5B57\u6BB5")),pa?J.createElement(K.Z,null):J.createElement(Ee.Z,{border:!0,openSearch:!0,value:ba.controlId,placeholder:_l("\u8BF7\u9009\u62E9\u6620\u5C04\u7684\u5339\u914D\u5B57\u6BB5"),data:zn,onChange:function(An){ze.handleChange({sourceConfig:{worksheetId:Kn,controlId:An}})}})),J.createElement(le.d4,null,J.createElement("div",{className:"settingItemTitle"},_l("\u5B57\u6BB5\u540D\u79F0")),J.createElement(we.default,{ref:function(An){return ze.fieldName=An},type:"text",value:la,onBlur:function(){!la&&!W().includes([22,10010],Ea)&&ze.handleChange({controlName:"\u5B57\u6BB5\u540D\u79F0"})},onChange:function(An){return ze.handleChange({controlName:An.target.value})},maxLength:"100"})),!W().includes(_e,Ea)&&J.createElement(J.Fragment,null,Z.includes(Ea)&&J.createElement(Na,(0,I.default)({},wa,{fromExcel:!0}))))}}]),xt}(J.Component),tn,Vn,Zn=(0,be.Z)([`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1001;
  background: rgba(255, 255, 255, 0.5);
`],[`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1001;
  background: rgba(255, 255, 255, 0.5);
`]),Ot=b.ZP.div(Zn),$t=function Gt(){var xt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return xt.map(function(ze){Mt=Mt.concat((ze.workSheetInfo||[]).filter(function(yt){return yt.type===0})),ze.childSections&&ze.childSections.length>0&&(Mt=Mt.concat(Gt(ze.childSections,Mt)))}),Mt},cn=Y.default.Option,Mn=(tn=(0,E.$j)(function(Gt){var xt=Gt.appPkg;return{worksheetList:$t(xt.appGroups||[])}}),tn(Vn=function(Gt){(0,i.default)(xt,Gt);function xt(Mt){(0,oe.default)(this,xt);var ze=(0,y.default)(this,(xt.__proto__||e()(xt)).call(this,Mt));return ze.renderCells=function(){var yt=ze.props.currentSheetInfo,Ut=yt===void 0?{}:yt,Wt=Ut.rows,kn=Wt===void 0?[]:Wt,on=Ut.selectCells,En=on===void 0?[]:on,fn=Ut.matchControl,jn=kn.length?kn[0].cells:[],Ta=W().get(W().find(L()(fn),function(zn){return zn.attribute===1}),"row");return J.createElement("div",{className:"selectCellsWrap"},J.createElement("div",{className:"bold Font14"},_l("\u9009\u62E9\u5BFC\u5165\u7684\u5217")),J.createElement("div",{className:"selectCellsItem"},J.createElement(U.Z,{checked:En.length,clearselected:En.length&&En.length!==jn.length,onClick:function(pa){En.length!==jn.length?ze.props.updateCurrentSheetInfo((0,I.default)({},Ut,{selectCells:jn.map(function(Ea){return Ea.columnNumber})})):ze.props.updateCurrentSheetInfo((0,I.default)({},Ut,{selectCells:[Ta]}))}}),J.createElement("span",{className:"ellipsis flex"},_l("\u5168\u9009"))),J.createElement("div",{className:"spaceLine"}),jn.map(function(zn){var pa=W().get(W().find(L()(fn),function(Ea){return Ea.row===zn.columnNumber}),"attribute")===1;return J.createElement("div",{key:zn.columnNumber,className:"selectCellsItem"},J.createElement(U.Z,{disabled:pa,checked:W().includes(En,zn.columnNumber),onClick:function(la){la?ze.props.updateCurrentSheetInfo((0,I.default)({},Ut,{selectCells:En.filter(function(Kn){return Kn!==zn.columnNumber})})):ze.props.updateCurrentSheetInfo((0,I.default)({},Ut,{selectCells:En.concat(zn.columnNumber)}))}}),J.createElement("div",{className:"flexRow flex"},J.createElement("span",{className:"ellipsis flex"},zn.value),pa&&J.createElement("span",null,J.createElement(se.Z,{text:J.createElement("span",null,_l("\u6807\u9898\u5B57\u6BB5\u65E0\u6CD5\u53D6\u6D88")),action:["hover"]},J.createElement(de.Z,{icon:"info_outline",className:"Gray_bd Hand Font15"})))))}))},ze.updateTriggerVisible=function(yt,Ut,Wt){var kn=ze.props.currentSheetInfo,on=kn===void 0?{}:kn,En=(0,I.default)({},on,{rows:on.rows.map(function(fn,jn){return jn===0?(0,I.default)({},fn,{cells:fn.cells.map(function(Ta,zn){return Ta.columnNumber===yt.columnNumber?(0,I.default)({},Ta,(0,h.default)({},Ut,Wt)):Ta})}):fn})});ze.props.updateCurrentSheetInfo(En)},ze.renderSetCell=function(yt){var Ut=ze.props.currentSheetInfo,Wt=Ut===void 0?{}:Ut,kn=Wt.selectCells,on=kn===void 0?[]:kn,En=Wt.matchControl,fn=En===void 0?{}:En,jn=(0,he.XD)(W().find(L()(fn),function(zn){return zn.row===yt.columnNumber})),Ta=W().get(W().find(L()(fn),function(zn){return zn.row===yt.columnNumber}),"attribute")===1;return J.createElement(ye.Z,null,J.createElement(v.Z,{icon:J.createElement(de.Z,{icon:"edit"}),onClick:function(){var pa=(0,I.default)({},Wt,{rows:Wt.rows.map(function(Ea,la){return la===0?(0,I.default)({},Ea,{cells:Ea.cells.map(function(Kn,sa){return Kn.columnNumber===yt.columnNumber?(0,I.default)({},Kn,{cellActVisible:!1,editFieldVisible:!0}):Kn})}):Ea})});ze.props.updateCurrentSheetInfo(pa)}},J.createElement("span",null,_l("\u7F16\u8F91\u5B57\u6BB5"))),jn&&J.createElement(v.Z,{icon:J.createElement(de.Z,{icon:"ic_title"}),onClick:function(){var pa=Wt.matchControl?L()(Wt.matchControl).map(function(la,Kn){return Kn===yt.columnNumber?(0,I.default)({},la,{attribute:1}):(0,I.default)({},la,{attribute:0})}):[],Ea=Wt.rows.map(function(la,Kn){return Kn===0?(0,I.default)({},la,{cells:la.cells.map(function(sa,ba){return sa.columnNumber===yt.columnNumber?(0,I.default)({},sa,{cellActVisible:!1}):sa})}):la});ze.props.updateCurrentSheetInfo((0,I.default)({},Wt,{matchControl:Ne()({},pa),rows:Ea}))}},J.createElement("span",null,_l("\u8BBE\u4E3A\u6807\u9898"))),J.createElement(v.Z,{disabled:Ta,icon:J.createElement(de.Z,{icon:"file_upload_off"}),onClick:function(){if(!Ta){var pa=Wt.rows.map(function(la,Kn){return Kn===0?(0,I.default)({},la,{cells:la.cells.map(function(sa,ba){return sa.columnNumber===yt.columnNumber?(0,I.default)({},sa,{cellActVisible:!1}):sa})}):la}),Ea=(0,I.default)({},Wt,{selectCells:on.filter(function(la){return la!==yt.columnNumber}),rows:pa});ze.props.updateCurrentSheetInfo(Ea)}}},J.createElement("div",{className:"flexRow"},J.createElement("div",{className:"flex"},_l("\u4E0D\u5BFC\u5165\u6B64\u5217")),J.createElement("span",null,Ta&&J.createElement(se.Z,{text:J.createElement("span",null,_l("\u6807\u9898\u5B57\u6BB5\u65E0\u6CD5\u53D6\u6D88")),action:["hover"]},J.createElement(de.Z,{icon:"info_outline",className:"Gray_bd Hand Font15 disabledCellIcon"}))))))},ze.renderHeader=function(yt){var Ut=ze.props,Wt=Ut.currentSheetInfo,kn=Wt===void 0?{}:Wt,on=Ut.worksheetList,En=on===void 0?[]:on,fn=Ut.createType,jn=kn.matchControl,Ta=jn===void 0?[]:jn,zn=kn.rowNum,pa=kn.selectCells,Ea=pa===void 0?[]:pa,la=yt.cells.filter(function(Kn){return W().includes(Ea,Kn.columnNumber)});return J.createElement("tr",{className:"sheetHead",key:"tr"+yt.rowNumber},J.createElement("td",{className:"index pointer"},zn),W().isEmpty(la)?J.createElement("td",null):la.map(function(Kn){var sa=W().isEmpty(Ta)?{}:Ta[Kn.columnNumber],ba=W().get(Ie,sa.type+".mapField"),Fa=ba?W().get(Be.g5,ba+".icon"):"letter_a";return J.createElement("td",{key:"td-"+Kn.columnNumber},J.createElement("span",{className:"flexRow alignItemsCenter"},sa.attribute===1&&J.createElement(de.Z,{icon:"ic_title ",className:"ThemeColor mRight5 Font16"}),J.createElement(de.Z,{icon:Fa,className:"Gray_9d Font16"}),J.createElement(Q.Z,{popupVisible:Kn.editFieldVisible,onPopupVisibleChange:function(Na){ze.updateTriggerVisible(Kn,"editFieldVisible",Na)},popupPlacement:"bottom",popupAlign:{offset:[-26,0]},builtinPlacements:{bottom:{points:["tl","bl"]}},action:["click"],destroyPopupOnHide:!0,popup:function(){return J.createElement(Tt,{data:(0,I.default)({},sa),createType:fn,onChange:function(Za){var ya=W().map(Ta,function(ma){return ma.controlId===Za.controlId?Za:ma}),An=W().map(kn.rows||[],function(ma,fa){return fa===0?(0,I.default)({},ma,{cells:W().map(ma.cells||[],function(Ma){var Ya=W().get(W().find(ya,function(Ba){return Ba.row===Za.row}),"controlName");return Za.row===Ma.columnNumber?(0,I.default)({},Ma,{value:Ya}):Ma})}):ma});ze.props.updateCurrentSheetInfo((0,I.default)({},kn,{matchControl:ya,rows:An}))},worksheetList:En})}},J.createElement("span",{className:"flex ellipsis InlineBlock bold Hand",title:Kn.value},Kn.value)),J.createElement(Q.Z,{popupVisible:Kn.cellActVisible,onPopupVisibleChange:function(Na){ze.updateTriggerVisible(Kn,"cellActVisible",Na)},popupPlacement:"bottom",popupAlign:{offset:[-130,10]},builtinPlacements:{bottom:{points:["tc","bc"]}},action:["click"],popup:function(){return ze.renderSetCell(Kn)}},J.createElement(de.Z,{icon:"arrow-down",className:"Gray_9d Font12 Hand Hover_21"}))))}))},ze.getTableWidth=function(){var yt=ze.props.currentSheetInfo,Ut=yt===void 0?{}:yt,Wt=Ut.rows,kn=Wt===void 0?[]:Wt,on=Ut.selectCells,En=on===void 0?[]:on,fn=kn.length&&kn[0].cells&&kn[0].cells.length?kn[0].cells.filter(function(jn){return W().includes(En,jn.columnNumber)}).length*150+60:0;return fn},ze.state={},ze}return(0,m.default)(xt,[{key:"render",value:function(){var ze=this,yt=this.props,Ut=yt.visible,Wt=yt.createType,kn=Wt===void 0?"worksheet":Wt,on=yt.excelDetailData,En=on===void 0?{}:on,fn=yt.currentSheetInfo,jn=fn===void 0?{}:fn,Ta=yt.selectedImportSheetIds,zn=Ta===void 0?[]:Ta,pa=yt.versionLimitSheetCount,Ea=yt.currentSheetCount,la=yt.importLoading,Kn=jn.rows,sa=Kn===void 0?[]:Kn,ba=jn.selectCells,Fa=ba===void 0?[]:ba,wa=jn.rowNum,Na=sa.length?sa[0].cells:[],Za=sa.filter(function(ya,An){return An===0}).concat(sa.slice(wa,wa+10));return J.createElement(J.Fragment,null,la&&kn==="worksheet"&&J.createElement(Ot,{className:"laodingWrap flexRow justifyContentCenter alignItemsCenter"},J.createElement(K.Z,null)),J.createElement(R.Z,{dialogClasses:"setImportDataContainer",width:1e3,title:J.createElement("span",{className:"Bold"},_l("\u8BBE\u7F6E\u5BFC\u5165\u6570\u636E")),visible:Ut,onCancel:this.props.onCancel,footer:J.createElement("div",{className:"flexRow footerContent"},J.createElement("div",{className:"Gray_9e"},W().isEmpty(zn)?"":_l("\u5F53\u524D\u8868\u5171%0\u884C\uFF0C\u4EC5\u663E\u793A\u524D%1\u884C",jn.total-1,jn.total-1>=10?10:jn.total-1)),J.createElement("div",{className:"footer"},J.createElement(q.Z,{type:2,text:_l("\u5E2E\u52A9"),href:"https://help.mingdao.com/worksheet/import-excel-create",className:"Gray_bd mRight30"}),J.createElement(N.ZP,{type:"link",className:"mRight15 cancelBtn",onClick:this.props.onCancel},_l("\u53D6\u6D88")),J.createElement(N.ZP,{type:"primary",disabled:W().isEmpty(zn),onClick:function(){return ze.props.handleNext()}},kn==="worksheet"?_l("\u5F00\u59CB\u5BFC\u5165"):_l("\u4E0B\u4E00\u6B65"))))},la&&J.createElement(Ot,{className:"laodingWrap flexRow justifyContentCenter alignItemsCenter"},J.createElement(K.Z,null)),J.createElement("div",{className:"flexColumn h100"},J.createElement(Le.Z,{excelDetailData:En,currentSheetInfo:jn,selectedImportSheetIds:zn,versionLimitSheetCount:pa,currentSheetCount:Ea,updateCurrentSheetInfo:this.props.updateCurrentSheetInfo,updateSelectedImportSheetIds:this.props.updateSelectedImportSheetIds,updateExcelDetailData:this.props.updateExcelDetailData}),W().isEmpty(zn)?J.createElement("div",{className:"flexColumn h100 Gray_75 Font16 alignItemsCenter justifyContentCenter"},J.createElement("div",null,_l("\u6CA1\u6709\u53EF\u5BFC\u5165Sheet")),J.createElement("div",null,_l("\u8BF7\u68C0\u67E5\u5BFC\u5165\u6587\u4EF6"))):J.createElement(J.Fragment,null,J.createElement("div",{className:"operateWrap flexRow alignItemsCenter"},J.createElement("div",{className:"selectTableHeadRow flex"},J.createElement("span",{className:"mRight8"},_l("\u8868\u5934\u884C")),J.createElement(Y.default,{value:jn.rowNum,style:{width:"174px"},className:"mLeft2 mRight2",onChange:function(An){ze.props.updateCurrentSheetInfo((0,I.default)({},jn,{rowNum:An}))}},sa.length?sa.slice(0,11).map(function(ya){return ya.rowNumber===0?"":J.createElement(cn,{value:ya.rowNumber},_l("\u7B2C%0\u884C",ya.rowNumber))}):""),J.createElement(se.Z,{text:J.createElement("span",null,_l("\u53EA\u6709\u8868\u5934\u4E0B\u65B9\u7684\u6570\u636E\u624D\u4F1A\u88AB\u5BFC\u5165;\u8868\u5934\u5B57\u6BB5\u4E0D\u5F97\u4E3A\u7A7A\uFF0C\u5426\u5219\u5C06\u5BFC\u81F4\u7A7A\u503C\u5B57\u6BB5\u4E4B\u540E\u7684\u5B57\u6BB5\u65E0\u6CD5\u88AB\u5BFC\u5165\u3002")),action:["hover"]},J.createElement(de.Z,{icon:"info_outline",className:"Gray_bd mLeft8 Hand Font16"}))),J.createElement("div",{className:"exportCol Hand"},J.createElement(Q.Z,{popupPlacement:"bottom",popupAlign:{offset:[0,0]},builtinPlacements:{bottom:{points:["tr","br"]}},action:["click"],popup:this.renderCells},J.createElement("span",null,J.createElement(de.Z,{icon:"tune_new",className:"Gray_75 mRight5"}),J.createElement("span",null,Fa.length===Na.length?_l("\u5BFC\u5165\u6240\u6709\u5217"):_l("\u5BFC\u5165%0/%1\u5217",Fa.length,Na.length)),J.createElement(de.Z,{icon:"arrow-down-border",className:"mLeft5 Gray_9e"}))))),J.createElement("div",{className:"tableWrap flex",ref:function(An){return ze.tableWrap=An}},J.createElement("table",{cellSpacing:"0",cellPadding:"0",style:{width:this.getTableWidth()}},J.createElement("tbody",null,Za.map(function(ya,An){if(An===0)return ze.renderHeader(ya);var ma=ya.cells.filter(function(fa){return W().includes(Fa,fa.columnNumber)});return J.createElement("tr",{key:"tr-"+ya.rowNumber},J.createElement("td",{className:"index pointer"},An+wa),W().isEmpty(ma)?J.createElement("td",null):ma.map(function(fa,Ma){return J.createElement("td",{key:"td-"+fa.columnNumber,title:fa.value},fa.value)}))}))))))))}}]),xt}(J.Component))||Vn),dt=function(xt){return function(Mt,ze){var yt=xt.map(function(Ut){return(0,I.default)({},Ut,{selectCells:W().isUndefined(Ut.selectCells)?Ut.rows.length?Ut.rows[0].cells.map(function(Wt){return Wt.columnNumber}):[]:Ut.selectCells})});Mt({type:"UPDATE_EXCEL_DETAIL_DATA",data:yt})}},$e=function(xt){return function(Mt,ze){var yt=ze().sheet.excelCreateAppAndSheet||{},Ut=yt.excelDetailData,Wt=Ut===void 0?{}:Ut;if(Mt({type:"UPDATE_CURRENT_SHEET_INFO",data:xt}),!W().isEmpty(Wt)){var kn=Wt.map(function(on){return on.sheetId===xt.sheetId?xt:on});Mt(dt(kn))}}},jt=function(xt){return function(Mt){Mt({type:"UPDATE_APP_INFO",data:xt})}},rn=function(xt){return function(Mt,ze){Mt({type:"UPDATE_SELECTED_IMPORT_SHEET_IDS",data:xt})}},Rt=function(xt){return function(Mt,ze){Mt({type:"UPDATE_UPLOAD_VISIBLE",data:xt})}},St=function(xt){return function(Mt,ze){Mt({type:"UPDATE_SETDATA_VISIBLE",data:xt})}},zt=function(xt){return function(Mt,ze){Mt({type:"UPDATE_CREATE_APP_VISIBLE",data:xt})}},oa=function(xt){return function(Mt,ze){Mt({type:"UPDATE_CREATE_APP_LOADING",data:xt})}},qn=t(6100),In=t(37295),Vt=t(22735),Yt=t.n(Vt),qt=t(90531),rt=t.n(qt),Qe=t(36021),ht=function(Gt){(0,i.default)(xt,Gt);function xt(Mt){(0,oe.default)(this,xt);var ze=(0,y.default)(this,(xt.__proto__||e()(xt)).call(this,Mt));return ze.handleModify=function(yt){var Ut=ze.props.appInfo,Wt=Ut===void 0?{}:Ut,kn=yt.name?(0,I.default)({},Wt,{appName:yt.name}):(0,I.default)({},Wt,yt);ze.props.updateAppInfo((0,I.default)({},Wt,kn))},ze.changeEditSheetName=function(yt){ze.setState({isEditSheetName:!0,currentSheetId:yt.sheetId},function(){ze.editInput.focus()})},ze.changeSheetName=function(yt,Ut){var Wt=ze.props.excelDetailData,kn=Wt===void 0?[]:Wt,on=yt.target.value,En=kn.map(function(fn){return fn.sheetId===Ut.sheetId?(0,I.default)({},fn,{sheetName:on}):fn});ze.props.updateExcelDetailData(En)},ze.onBlur=function(yt,Ut){var Wt=W().trim(yt.target.value);if(!Wt){ze.setState({isEditSheetName:!1});return}ze.setState({isEditSheetName:!1})},ze.state={isEditSheetName:!1},ze}return(0,m.default)(xt,[{key:"componentDidMount",value:function(){var ze=this.props.appInfo,yt=ze===void 0?{}:ze;this.inputBox&&(this.inputBox.innerHTML=yt.appName)}},{key:"render",value:function(){var ze=this,yt=this.props,Ut=yt.visible,Wt=yt.createType,kn=yt.projectId,on=yt.createAppStatus,En=yt.createAppLoading,fn=yt.appInfo,jn=yt.importSheets,Ta=jn===void 0?[]:jn,zn=yt.freeRowCount,pa=this.state,Ea=pa.currentSheetId,la=pa.isEditSheetName,Kn=pa.editAppName,sa=W().get(W().find(md.global.Account.projects,function(wa){return wa.projectId===kn})||{},"licenseType"),ba=W().reduce(Ta,function(wa,Na){return wa+(Na.total-Na.rowNum)},0),Fa=sa===0&&ba+zn>5e4;return J.createElement(R.Z,{dialogClasses:"dialogCreateApp",visible:Ut,width:1e3,height:"100%",title:on?null:J.createElement("span",{className:"Bold"},_l("\u51C6\u5907\u521B\u5EFA\u5E94\u7528")),onCancel:this.props.onCancel,footer:on||En?null:J.createElement("div",{className:"footer"},J.createElement(q.Z,{type:2,text:_l("\u5E2E\u52A9"),href:"https://help.mingdao.com/worksheet/import-excel-create",className:"Gray_bd mRight30"}),J.createElement(N.ZP,{type:"link",className:"mRight15 stepLast",onClick:this.props.handleLast},_l("\u4E0A\u4E00\u6B65")),J.createElement(N.ZP,{type:"primary",className:"bold",disabled:Fa||!fn.appName,onClick:this.props.createApp},_l("\u521B\u5EFA\u5E94\u7528")))},J.createElement("div",{className:"createAppWrap"},J.createElement("div",{className:Fe()("Relative",{Font26:!on&&!En,Font18:on,appInfoAct:En})},J.createElement("div",{className:"appIconWrap flexRow justifyContentCenter alignItemsCenter Relative",style:{backgroundColor:fn.iconColor}},J.createElement(qn.Z,{url:fn.iconUrl||md.global.FileStoreConfig.pubHost.replace(/\/$/,"")+"/customIcon/0_lego.svg",fill:"#fff",size:48}),!on&&!En&&J.createElement("div",{className:"editIcon Hand Hover_49"},J.createElement(Q.Z,{action:["click"],zIndex:1e3,popupClassName:"myAppItemOperatorTriggerWrap",popup:J.createElement(In.Z,{projectId:kn,icon:fn.icon,name:fn.appName,iconColor:fn.iconColor,onModify:this.handleModify,hideInput:!0}),popupAlign:{points:["tl","bl"],offset:[-350,5],overflow:{adjustX:!0}}},J.createElement(de.Z,{icon:"edit Hand",className:"Gray_bd editApp"})))),on&&!En&&J.createElement("img",{src:Yt(),className:Fe()("successImg",{successBg:on&&!En})}),J.createElement("div",{className:Fe()("appName bold TxtCenter ellipsis",{bgColor:!on&&!En})},J.createElement("label",{ref:function(Na){return ze.inputBox=Na},id:"label",class:"occupation"}),Kn?J.createElement("input",{type:"text",id:"input",class:Fe()("inputCon TxtCenter bold bgColor"),value:fn.appName,onChange:function(Na){var Za=Na.target.value;ze.inputBox&&(ze.inputBox.innerHTML=Za),ze.props.updateAppInfo((0,I.default)({},fn,{appName:Za}))},onBlur:function(){ze.setState({editAppName:!1})}}):J.createElement("span",{class:Fe()("inputCon ellipsis TxtCenter bold lineH46",{bgColor:!on&&!En}),onClick:function(){on||En||ze.setState({editAppName:!0})}},fn.appName))),!on&&!En&&J.createElement("div",{className:"Gray_76 TxtCenter mBottom40"},_l("\u5305\u542B %0 \u5F20\u5DE5\u4F5C\u8868\uFF0C\u5BFC\u5165 %1 \u884C\u6570\u636E",Ta.length,ba)),!on&&!En&&Fa&&J.createElement("div",{className:"colorF44 mBottom14 overLimit"},_l("\u8D85\u8FC7\u5BFC\u5165\u4E0A\u9650 (\u4E0A\u9650 50000 \u884C)\uFF0C\u8BF7\u8C03\u6574\u5BFC\u5165\u6570\u636E")),!on&&!En&&J.createElement("div",{className:"sheetInfo"},Ta.map(function(wa){return J.createElement("div",{className:"sheetInfoItem flexRow"},wa.sheetId===Ea&&la?J.createElement("div",{className:"flex"},J.createElement("input",{ref:function(Za){return ze.editInput=Za},value:wa.sheetName,className:"editSheetNameInput",onChange:function(Za){return ze.changeSheetName(Za,wa)},onBlur:function(Za){return ze.onBlur(Za,wa)}})):J.createElement("div",{className:"bold flex overflowHidden"},J.createElement("span",{className:"InlineBlock ellipsis sheetName"},wa.sheetName),J.createElement(de.Z,{icon:"edit",className:"Gray_bd mLeft5 Hand",onClick:function(){ze.changeEditSheetName(wa)}})),J.createElement("div",{className:"Gray_9e width94 pLeft10"},_l("%0\u884C",wa.total?wa.total-wa.rowNum:0)))})),En&&J.createElement("div",{className:Fe()("flexRow justifyContentCenter createAppLoadingWrap",{loadingOpacity:En})},J.createElement(K.Z,{size:"small",className:"createAppLoading"}),J.createElement("span",{className:"mLeft5"},_l("\u6B63\u5728\u4E3A\u60A8\u521B\u5EFA\u5E94\u7528\u548C\u5DE5\u4F5C\u8868"))),on&&!En&&J.createElement("div",{className:Fe()("TxtCenter",{successInfoAct:on&&!En})},J.createElement("div",{className:"Font28 bold mBottom12"},_l("\u5E94\u7528\u521B\u5EFA\u6210\u529F")," ",J.createElement("img",{src:rt(),className:"congratulationImg"})),J.createElement("div",{className:" Gray_9e mBottom50 Font15"},_l("\u79BB\u5F00\u5F53\u524D\u9875\u9762\u4E0D\u4F1A\u5F71\u54CD\u6570\u636E\u5BFC\u5165\uFF0C\u5BFC\u5165\u5B8C\u6210\u540E\u4F1A\u901A\u77E5\u60A8")),J.createElement(N.ZP,{type:"primary",className:"checkAppBtn bold",onClick:function(){(0,Qe.T8)("/app/"+fn.appId)}},_l("\u67E5\u770B\u5E94\u7528")))))}}]),xt}(J.Component),Lt=t(49365),Ct=t(77863),mt=t(12424),vt=(0,be.Z)([`
  padding: 8px 0;
  max-height: 201px;
  overflow-y: scroll;
  font-size: 13px;
  color: #333;
  border-radius: 3px;
  .item {
    height: 36px;
    line-height: 36px;
    padding: 0 14px;
    &:hover {
      background: #f5f5f5;
    }
    &.current {
      background: #e6f7ff !important;
    }
  }
  .splitLine {
    margin-left: 14px;
    margin-right: 14px;
    height: 1px;
    background: #eaeaea;
  }
`],[`
  padding: 8px 0;
  max-height: 201px;
  overflow-y: scroll;
  font-size: 13px;
  color: #333;
  border-radius: 3px;
  .item {
    height: 36px;
    line-height: 36px;
    padding: 0 14px;
    &:hover {
      background: #f5f5f5;
    }
    &.current {
      background: #e6f7ff !important;
    }
  }
  .splitLine {
    margin-left: 14px;
    margin-right: 14px;
    height: 1px;
    background: #eaeaea;
  }
`]),Xt=b.ZP.div(vt);function bn(Gt){var xt=Gt.visible,Mt=xt===void 0?!1:xt,ze=Gt.options,yt=ze===void 0?[]:ze,Ut=Gt.onOk,Wt=Ut===void 0?function(){}:Ut,kn=Gt.onCancel,on=kn===void 0?function(){}:kn,En=(0,J.useState)({label:void 0,value:void 0}),fn=(0,mt.Z)(En,2),jn=fn[0],Ta=fn[1],zn=(0,J.useState)(!1),pa=(0,mt.Z)(zn,2),Ea=pa[0],la=pa[1],Kn=function(){if(jn.value===void 0){alert(_l("\u8BF7\u9009\u62E9\u6570\u636E\u5E93"),3);return}Wt(jn.value),on()};return J.createElement(R.Z,{title:_l("\u5B58\u50A8\u5230\u54EA\u4E2A\u6570\u636E\u5E93\uFF1F"),visible:Mt,width:640,overlayClosable:!1,onOk:Kn,onCancel:on},J.createElement("div",{className:"Gray_9e"},_l("\u9009\u62E9\u5E94\u7528\u7684\u5B58\u50A8\u6570\u636E\u5E93\uFF0C\u5E94\u7528\u5185\u5DE5\u4F5C\u8868\u6570\u636E\u5C06\u4F1A\u4FDD\u5B58\u5728\u6240\u9009\u4E13\u5C5E\u6570\u636E\u5E93\u5185")),J.createElement("div",{className:"mTop12"},_l("\u6CE8\u610F\uFF1A\u5E94\u7528\u521B\u5EFA\u540E\uFF0C\u6240\u5C5E\u6570\u636E\u5E93\u4E0D\u53EF\u518D\u4FEE\u6539")),J.createElement(Y.default,{open:Ea,value:jn.label,optionLabelProp:"label",popupClassName:"dbInstanceSelect",placeholder:_l("\u8BF7\u9009\u62E9\u5E94\u7528\u7684\u5B58\u50A8\u6570\u636E\u5E93"),className:"w100 mdAntSelect mTop28",suffixIcon:J.createElement(de.Z,{icon:"arrow-down-border Font14"}),notFoundContent:J.createElement("span",{className:"Gray_9e"},_l("\u65E0\u641C\u7D22\u7ED3\u679C")),onDropdownVisibleChange:function(ba){return la(ba)},dropdownRender:function(){return J.createElement(Xt,null,yt.map(function(ba){return J.createElement(J.Fragment,null,J.createElement("div",{className:Fe()("item Hand overflow_ellipsis",{current:ba.value===jn.value}),onClick:function(){Ta(ba),la(!1)},key:"dbInstanceSelect-"+ba.value},ba.label),!ba.value&&J.createElement("div",{className:"splitLine mTop4 mBottom4"}))}))}}))}const pn=bn;var Rn=t(15577),fe=t(91088),$n,gn,en=function(){IM.socket.on("wsexcelbatch",function(xt){var Mt=xt.sheetCount,ze=xt.id,yt=xt.addCount,Ut=xt.appId,Wt=xt.appName,kn=xt.errorCount;_antNotification.close(ze),_antNotification.success({message:_l("\u8868\u6570\u636E\u5BFC\u5165\u5B8C\u6210"),description:_l("\u5171\u5BFC\u5165%0\u5F20\u8868\uFF0C\u603B\u8BA1%1\u884C\u6570\u636E",Mt,yt),btnText:kn?_l("\u67E5\u770B\u9519\u8BEF\u62A5\u544A"):"",onBtnClick:function(){new ErrorDialog({fileKey:ze,isBatch:!0})}})})},_t=(gn=$n=function(Gt){(0,i.default)(xt,Gt);function xt(Mt){(0,oe.default)(this,xt);var ze=(0,y.default)(this,(xt.__proto__||e()(xt)).call(this,Mt));return ze.getToken=function(yt){var Ut=ze.props,Wt=Ut.projectId,kn=Ut.createType;Lt.Z.getToken({tokenType:kn==="app"?6:4,projectId:Wt}).then(function(on){ze.setState({token:on}),ze.getPreviewData((0,I.default)({token:on},yt))})},ze.getPreviewData=function(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ut=ze.props,Wt=Ut.projectId,kn=Ut.appId,on=yt.filePath,En=yt.fileType,fn=yt.fileName,jn=yt.token;$.ajax(md.global.Config.WorksheetDownUrl+"/Import/Preview",{data:{accountId:md.global.Account.accountId,projectId:Wt,appId:kn,csvName:W().includes(En,"csv")?fn:void 0,filePath:on,token:jn},beforeSend:function(zn){zn.setRequestHeader("X-Requested-With","XMLHttpRequest")},success:function(zn){ze.props.changeSetDataDialogVisible(!0),ze.props.changeDialogUploadVisible(!1);var pa=zn.data||{},Ea=pa.data,la=pa.id,Kn=pa.versionLimitSheetCount,sa=pa.currentSheetCount,ba=pa.freeRowCount,Fa=Kn-sa,wa=Ea.map(function(An){var ma=An.matchControl&&L()(An.matchControl).map(function(fa){var Ma=W().get(An.rows[0],"cells"),Ya=W().get(W().find(Ma,function(La){return La.columnNumber===fa.row}),"value"),Ba=W().omit(Be.gE[he.GV[An.type]],["controlName"]);return An.advancedSetting&&(Ba.advancedSetting=W().defaults(An.advancedSetting,Ba.advancedSetting||{})),Ya&&(Ba.controlName=Ya),(0,I.default)({},fa,Ba)});return(0,I.default)({},An,{matchControl:ma?Ne()({},ma):{},rowNum:1,disabled:!An.rows||!An.rows.length||An.total-1>2e4||An.rows&&An.rows.some(function(fa){return fa.cells&&fa.cells.length>200})})}),Na=[],Za=wa.filter(function(An){return!An.isMerge&&!An.disabled});Kn!==0?W().reduce(Za||[],function(An,ma,fa){return fa<Fa&&Na.push(ma.sheetId),An+ma.total},0):W().reduce(Za||[],function(An,ma,fa){return Na.push(ma.sheetId),An+ma.total},0),wa=Kn!==0?wa.map(function(An){return W().includes(Na,An.sheetId)?An:(0,I.default)({},An,{disabled:!0})}):wa;var ya=W().isEmpty((wa||[]).filter(function(An){return!An.disabled}))?{}:wa.filter(function(An){return!An.disabled})[0];ze.props.updateExcelDetailData(wa),ze.props.updateSelectedImportSheetIds(Na),ze.props.updateCurrentSheetInfo((0,I.default)({},ya,{selectCells:(W().get(ya,"rows[0].cells")||[]).map(function(An){return An.columnNumber})})),ze.setState({id:la,versionLimitSheetCount:Kn,currentSheetCount:sa,freeRowCount:ba,socketId:zn.message})}})},ze.fileUploaded=function(yt){var Ut=ze.props.appInfo,Wt=yt.name,kn=yt.key,on=yt.type,En=yt.serverName,fn=Wt.split(".");fn.splice(fn.length-1);var jn=fn.join(".");ze.props.updateAppInfo((0,I.default)({},Ut,{appName:jn})),ze.setState({filePath:En+kn}),ze.getToken({filePath:En+kn,fileType:on,fileName:jn})},ze.cancelDialogUpload=function(){ze.props.onCancel(),ze.props.changeDialogUploadVisible(!1)},ze.handleLast=function(){ze.props.changeSetDataDialogVisible(!0),ze.props.changeDialogCreateAppVisible(!1)},ze.getCells=function(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Wt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],kn=yt.length&&yt[0].cells?yt[0].cells:[];return W().filter(kn,function(on){return W().includes(Wt,on.columnNumber)}).map(function(on){return(0,I.default)({},on,{control:W().find(Ut,function(En){return En.row===on.columnNumber})||{}})})},ze.getParams=function(yt){var Ut=ze.state,Wt=Ut.id,kn=Ut.filePath,on=Ut.freeRowCount,En=ze.props,fn=En.createType,jn=En.projectId,Ta=En.appId,zn=En.groupId,pa=En.excelDetailData,Ea=pa===void 0?[]:pa,la=En.selectedImportSheetIds,Kn=En.appInfo,sa=En.appGroupId,ba=En.appGroupType,Fa=Ea.filter(function(Ba){return W().includes(la,Ba.sheetId)}),wa=fn==="app"?(0,I.default)({},Kn,{groupId:sa,groupType:ba}):{appId:Ta,sectionId:zn},Na=Fa.some(function(Ba){return!Ba.rows||!Ba.rows.length}),Za=Fa.some(function(Ba){return Ba.rows&&Ba.rows.length&&Ba.rows.some(function(La){return!La.cells||!La.cells.length})}),ya=Fa.some(function(Ba){return!Ba.rowNum}),An=W().get(W().find(md.global.Account.projects,function(Ba){return Ba.projectId===jn})||{},"licenseType"),ma=W().reduce(Fa,function(Ba,La){return Ba+(La.total-La.rowNum)},0);if(An===0&&ma+on>5e4&&fn!=="app"){alert(_l("\u8D85\u8FC7\u5BFC\u5165\u4E0A\u9650(\u4E0A\u9650 50000 \u884C)\uFF0C\u8BF7\u8C03\u6574\u5BFC\u5165\u6570\u636E"),3);return}if(Fa.length>20){alert(_l("\u5F53\u524D\u7248\u672C\u6700\u591A\u652F\u630120\u4E2ASheet"),3);return}else if(Fa.some(function(Ba){return Ba.total-1>2e4})){alert(_l("\u5F53\u524D\u7248\u672C\u5355\u4E2Asheet\u6700\u591A\u652F\u630120000\u884C"),3);return}else if(Fa.some(function(Ba){return Ba.rows&&Ba.rows.some(function(La){return La.cells&&La.cells.length>200})})){alert(_l("\u5F53\u524D\u7248\u672C\u5355\u4E2Asheet\u6700\u591A\u652F\u6301200\u5217"),3);return}else if(ya||Na||Za)return alert(_l("\u8868\u5934\u7B2C\u4E00\u5217\u4E0D\u5F97\u4E3A\u7A7A"),3);var fa=Fa.map(function(Ba){return{sheetNumber:Ba.sheetNumber,sheetName:Ba.sheetName.slice(0,100),sheetId:Ba.sheetId,titleNumber:Ba.rowNum-1,cells:ze.getCells(Ba.rows,Ba.matchControl,Ba.selectCells)}}),Ma=yt?fa.slice(10):fa.slice(0,10),Ya=yt?{id:Wt,configs:Ma}:(0,I.default)({id:Wt,projectId:jn,accountId:md.global.Account.accountId,filePath:kn,importType:fn==="worksheet"?1:2,importDataed:!0,total:la.length,configs:Ma},wa);return Ya},ze.handleNext=function(){if(ze.getParams()){var yt=ze.props,Ut=yt.createType,Wt=yt.excelDetailData,kn=Wt===void 0?[]:Wt,on=yt.selectedImportSheetIds,En=yt.refreshPage,fn=En===void 0?function(){}:En,jn=kn.filter(function(zn){return W().includes(on,zn.sheetId)}),Ta=jn.length>10;Ut==="worksheet"?(me.Z.info({key:ze.state.socketId,loading:!0,message:_l("\u6B63\u5728\u5BFC\u5165\u8868\u6570\u636E"),description:_l("\u6570\u636E\u5C06\u5728\u540E\u53F0\u6301\u7EED\u5BFC\u5165\uFF0C\u5BFC\u5165\u5B8C\u6210\u540E\u4F1A\u7ED9\u60A8\u53D1\u9001\u7CFB\u7EDF\u901A\u77E5\u3002")}),ze.setState({importLoading:!0}),$.ajax(md.global.Config.WorksheetDownUrl+"/Import/Create",{type:"POST",contentType:"application/json",data:C()(ze.getParams()),beforeSend:function(pa){pa.setRequestHeader("X-Requested-With","XMLHttpRequest")},success:function(pa){ze.props.onCancel(),Ta?ze.importMore():(fn(),ze.setState({importLoading:!1}))}})):Ut==="app"&&(ze.props.changeSetDataDialogVisible(!1),ze.props.changeDialogCreateAppVisible(!0))}},ze.createApp=function(yt){var Ut=ze.props,Wt=Ut.excelDetailData,kn=Wt===void 0?[]:Wt,on=Ut.selectedImportSheetIds,En=kn.filter(function(jn){return W().includes(on,jn.sheetId)}),fn=En.length>10;me.Z.info({key:ze.state.socketId,loading:!0,message:_l("\u6B63\u5728\u5BFC\u5165\u8868\u6570\u636E"),description:_l("\u6570\u636E\u5C06\u5728\u540E\u53F0\u6301\u7EED\u5BFC\u5165\uFF0C\u5BFC\u5165\u5B8C\u6210\u540E\u4F1A\u7ED9\u60A8\u53D1\u9001\u7CFB\u7EDF\u901A\u77E5\u3002")}),ze.setState({importLoading:!0}),$.ajax(md.global.Config.WorksheetDownUrl+"/Import/Create",{type:"POST",contentType:"application/json",data:C()((0,I.default)({},ze.getParams(),{dbInstanceId:yt})),beforeSend:function(Ta){Ta.setRequestHeader("X-Requested-With","XMLHttpRequest")},success:function(Ta){ze.props.updateAppInfo((0,I.default)({},ze.props.appInfo,{appId:Ta.data})),fn?ze.importMore():ze.setState({importLoading:!1,createAppStatus:1})}})},ze.importMore=function(){var yt=ze.props,Ut=yt.createType,Wt=yt.refreshPage,kn=Wt===void 0?function(){}:Wt;$.ajax(md.global.Config.WorksheetDownUrl+"/Import/CreateSheet",{type:"POST",contentType:"application/json",data:C()(ze.getParams(!0)),beforeSend:function(En){En.setRequestHeader("X-Requested-With","XMLHttpRequest")},success:function(En){Ut==="app"?(ze.setState({importLoading:!1,createAppStatus:1}),ze.props.updateAppInfo((0,I.default)({},ze.props.appInfo,{appId:En.data}))):(ze.setState((0,h.default)({importLoading:!1},"importLoading",!1)),ze.props.onCancel(),kn())}})},ze.handleCreate=function(){var yt=ze.props.projectId,Ut=(0,Rn.vo)(yt),Wt=(0,Rn.XH)(yt,Ct.UU.dataBase)==="1"&&!md.global.Config.IsPlatformLocal;if(Wt&&(Ut.isSuperAdmin||Ut.isProjectAppManager)){fe.Z.getMyDbInstances({projectId:ze.props.projectId}).then(function(kn){kn&&kn.length?(ze.props.changeDialogCreateAppVisible(!1),ze.setState({DBInstances:kn,DBInstancesDialog:!0})):ze.createApp()});return}ze.createApp()},ze.renderDBInstances=function(){var yt=ze.state,Ut=yt.DBInstancesDialog,Wt=yt.DBInstances,kn=Wt===void 0?[]:Wt,on=[{value:"",label:_l("\u7CFB\u7EDF\u9ED8\u8BA4\u6570\u636E\u5E93")}].concat(kn.map(function(En){return{value:En.id,label:En.name}}));return J.createElement(pn,{visible:Ut,options:on,onOk:function(fn){return ze.createApp(fn)},onCancel:function(){return ze.setState({DBInstancesDialog:!1})}})},ze.state={DBInstances:[],DBInstancesDialog:!1},ze}return(0,m.default)(xt,[{key:"componentDidMount",value:function(){this.props.changeDialogUploadVisible(!0)}},{key:"componentWillUnmount",value:function(){this.props.onCancel(),this.props.changeDialogUploadVisible(!1),this.props.changeSetDataDialogVisible(!1),this.props.changeDialogCreateAppVisible(!1)}},{key:"render",value:function(){var ze=this,yt=this.state,Ut=yt.createAppStatus,Wt=yt.importLoading,kn=yt.versionLimitSheetCount,on=yt.currentSheetCount,En=yt.freeRowCount,fn=this.props,jn=fn.projectId,Ta=fn.dialogUploadVisible,zn=fn.setDataDialogVisible,pa=fn.dialogCreateAppVisible,Ea=fn.excelDetailData,la=Ea===void 0?[]:Ea,Kn=fn.currentSheetInfo,sa=Kn===void 0?{}:Kn,ba=fn.selectedImportSheetIds,Fa=ba===void 0?[]:ba,wa=fn.appInfo;return J.createElement(J.Fragment,null,J.createElement(z,{visible:Ta,onCancel:this.cancelDialogUpload,fileUploaded:this.fileUploaded}),J.createElement(Mn,{visible:zn,createType:this.props.createType,excelDetailData:la,currentSheetInfo:sa,versionLimitSheetCount:kn,currentSheetCount:on,selectedImportSheetIds:Fa,updateCurrentSheetInfo:this.props.updateCurrentSheetInfo,updateSelectedImportSheetIds:this.props.updateSelectedImportSheetIds,updateExcelDetailData:this.props.updateExcelDetailData,importLoading:Wt,handleNext:this.handleNext,onCancel:function(){ze.props.changeSetDataDialogVisible(!1),ze.props.onCancel()}}),pa&&J.createElement(ht,{visible:pa,createAppStatus:Ut,createAppLoading:Wt,excelDetailData:la,importSheets:la.filter(function(Na){return W().includes(Fa,Na.sheetId)}),appInfo:wa,projectId:jn,updateExcelDetailData:this.props.updateExcelDetailData,updateAppInfo:this.props.updateAppInfo,handleLast:this.handleLast,createApp:this.handleCreate,freeRowCount:En,onCancel:function(){ze.props.changeDialogCreateAppVisible(!1),ze.props.onCancel()}}),this.renderDBInstances())}}]),xt}(J.Component),$n.propTypes={createType:te().string,appId:te().string,projectId:te().string},gn);const nn=(0,E.$j)(function(Gt){var xt=Gt.sheet.excelCreateAppAndSheet,Mt=xt===void 0?{}:xt;return Mt},function(Gt){return(0,r.DE)({changeDialogUploadVisible:Rt,changeSetDataDialogVisible:St,changeDialogCreateAppVisible:zt,changeCreateAppLoading:oa,updateExcelDetailData:dt,updateCurrentSheetInfo:$e,updateSelectedImportSheetIds:rn,updateAppInfo:jt},Gt)})(_t)},50685:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>E});var h=t(42185),Te=t(88239),C=t(85105),Ce=t.n(C),Ne=t(99663),j=t(22600),L=t(49135),I=t(93196),k=t(67294),e=t(29314),oe=t(93967),m=t.n(oe),y=t(96486),i=t.n(y),me,J,T,te=7,E=(J=me=function(r){(0,I.default)(R,r);function R(a){(0,Ne.default)(this,R);var z=(0,L.default)(this,(R.__proto__||Ce()(R)).call(this,a));T.call(z);var N=localStorage.getItem("guide");return z.state={guide:N?Number(N):1},z}return(0,j.default)(R,[{key:"componentDidMount",value:function(){this.saveGuide()}},{key:"componentWillReceiveProps",value:function(z){var N=this;this.props.sheetListVisible!==z.sheetListVisible&&setTimeout(function(){N.setState({guide:N.state.guide})},500)}},{key:"getGuideTextList",value:function(z){var N=[{title:_l("\u4F60\u597D\uFF0C%0\uFF01",md.global.Account.fullname),info:_l("\u8FD9\u91CC\u662F\u4E00\u4E2A\u5E94\u7528\uFF0C\u4F60\u6240\u6709\u7684\u4E1A\u52A1\u6570\u636E\u3001\u6D41\u7A0B\u548C\u7528\u6237\u90FD\u53EF\u4EE5\u5728\u8FD9\u91CC\u8FDB\u884C\u7BA1\u7406\u3002\u6211\u4EEC\u4E00\u8D77\u6765\u770B\u770B\u4E00\u4E2A\u5E94\u7528\u662F\u5982\u4F55\u642D\u5EFA\u548C\u6784\u6210\u7684\u5427\uFF01")},{title:_l("\u5DE5\u4F5C\u8868"),info:k.createElement(k.Fragment,null,k.createElement("div",null,_l("\u4E3A\u4F60\u7684\u6BCF\u4E00\u4E2A\u4E1A\u52A1\u5BF9\u8C61\u521B\u5EFA\u5DE5\u4F5C\u8868\uFF0C\u5982\uFF1A\u7EBF\u7D22\u8868\u3001\u5BA2\u6237\u8868\u3001\u8BA2\u5355\u8868\u3002")),k.createElement("div",{className:"mTop10"},_l("\u4F60\u53EF\u4EE5\u6839\u636E\u4E1A\u52A1\u6570\u636E\u81EA\u5B9A\u4E49\u5DE5\u4F5C\u8868\u5B57\u6BB5\uFF0C\u5E76\u5EFA\u7ACB\u6570\u636E\u5173\u8054\u3002")))},{title:_l("\u89C6\u56FE"),info:k.createElement(k.Fragment,null,k.createElement("div",null,_l("\u6DFB\u52A0\u89C6\u56FE\uFF0C\u4F60\u53EF\u4EE5\u6839\u636E\u4E1A\u52A1\u9700\u8981\u5206\u7EC4\u663E\u793A\u5DE5\u4F5C\u8868\u6570\u636E\u3002\u5982\uFF1A\u672A\u751F\u6548\u8BA2\u5355\u3001\u5DF2\u751F\u6548\u8BA2\u5355\u3002")),k.createElement("div",{className:"mTop10"},_l("\u652F\u6301\uFF1A\u8868\u683C\u3001\u770B\u677F\u3001\u65E5\u5386\u3001\u753B\u5ECA\u7B49\u591A\u79CD\u89C6\u56FE\u5448\u73B0\u65B9\u5F0F\u3002")))},{title:_l("\u81EA\u5B9A\u4E49\u9875\u9762"),info:_l("\u521B\u5EFA\u81EA\u5B9A\u4E49\u9875\u9762\u3002\u81EA\u7531\u914D\u7F6E\u9875\u9762\u6309\u94AE\u3001\u7EDF\u8BA1\u56FE\u3001\u5D4C\u5165\u94FE\u63A5\u7B49\uFF0C\u51CF\u5C11\u7E41\u7410\u64CD\u4F5C\uFF0C\u5E76\u5FEB\u901F\u638C\u63E1\u5B8F\u89C2\u6570\u636E\u60C5\u51B5\u3002")},{title:_l("\u7528\u6237\u548C\u89D2\u8272"),info:_l("\u4E3A\u4F60\u7684\u5E94\u7528\u6DFB\u52A0\u7528\u6237\u3002\u4F60\u53EF\u4EE5\u521B\u5EFA\u89D2\u8272\u6765\u7BA1\u7406\u7528\u6237\u6743\u9650\uFF0C\u4E00\u6761\u6570\u636E\uFF0C\u8C01\u80FD\u67E5\u770B\uFF0C\u8C01\u80FD\u4FEE\u6539\uFF0C\u8C01\u80FD\u5220\u9664\uFF0C\u90FD\u80FD\u81EA\u7531\u8BBE\u5B9A\u3002")},{title:_l("\u5DE5\u4F5C\u6D41"),info:_l("\u901A\u8FC7\u5DE5\u4F5C\u6D41\uFF0C\u4F60\u53EF\u4EE5\u5C06\u4E1A\u52A1\u4E2D\u7684\u91CD\u590D\u5DE5\u4F5C\u81EA\u52A8\u5316\u6267\u884C\uFF0C\u8FD8\u53EF\u4EE5\u53D1\u901A\u77E5\u3001\u77ED\u4FE1\uFF0C\u5BF9\u63A5\u5916\u90E8\u7CFB\u7EDF\uFF0C\u5F7B\u5E95\u6253\u901A\u4E0A\u4E0B\u6E38\u4E1A\u52A1\u3002")},{title:_l("\u606D\u559C\uFF01\u4F60\u5B8C\u6210\u4E86\u6559\u5B66"),info:_l("\u73B0\u5728\u5F00\u59CB\u642D\u5EFA\u4F60\u81EA\u5DF1\u7684\u4E1A\u52A1\u7CFB\u7EDF\u5427\u3002")}];return N[z]}},{key:"getElStyle",value:function(z){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"left";if(i().isEmpty(z))return{};var ye=z.getBoundingClientRect(),v=ye.width,se=ye.height,de=ye.top,U=ye.left,pe=ye.right,Y={width:v+N,height:se+q,top:de-q/2};return K=="left"?(0,Te.default)({},Y,{left:U-N/2}):(0,Te.default)({},Y,{right:document.documentElement.clientWidth-pe})}},{key:"renderGuidanceItem",value:function(){var z=this.state.guide;if(z===2){var N=this.getElStyle(document.querySelector("#createCustomItem"),-8,-8),q=this.getElStyle(document.querySelector(".sheetHeader .icon-more_horiz"),13,13);return k.createElement(k.Fragment,null,k.createElement("div",{className:"guidanceCircle",style:N}),k.createElement("div",{className:"guidanceInfo",style:{top:N.top+N.height,left:N.left+N.width/2}},_l("\u521B\u5EFA\u5DE5\u4F5C\u8868")),k.createElement("div",{className:"guidanceCircle",style:q}),k.createElement("div",{className:"guidanceInfo",style:{top:q.top+q.height,left:q.left+q.width/2}},_l("\u5728\u8FD9\u91CC\uFF0C\u4F60\u53EF\u4EE5\u7F16\u8F91\u8868\u5355\u5B57\u6BB5")))}if(z===3){var K=this.getElStyle(document.querySelector(".worksheetSheet .addViewIcon"),13,13);return k.createElement(k.Fragment,null,k.createElement("div",{className:"guidanceCircle",style:K}),k.createElement("div",{className:"guidanceInfo",style:{top:K.top+K.height,left:K.left+K.width/2}},_l("\u6DFB\u52A0\u89C6\u56FE")))}if(z===4){var ye=this.getElStyle(document.querySelector("#createCustomItem"),-8,-8);return k.createElement(k.Fragment,null,k.createElement("div",{className:"guidanceCircle",style:ye}),k.createElement("div",{className:"guidanceInfo",style:{top:ye.top+ye.height,left:ye.left+ye.width/2}},_l("\u6DFB\u52A0\u81EA\u5B9A\u4E49\u9875\u9762")))}if(z===5){var v=this.getElStyle(document.querySelectorAll(".appPkgHeaderWrap .appExtensionWrap .appExtensionItem")[2],3,0,"right");return k.createElement(k.Fragment,null,k.createElement("div",{className:"guidanceCircle dark",style:v}),k.createElement("div",{className:"guidanceInfo dark",style:{top:v.top+v.height,right:v.right-v.width/2}},_l("\u7528\u6237\u548C\u89D2\u8272")))}if(z===6){var se=this.getElStyle(document.querySelectorAll(".appPkgHeaderWrap .appExtensionWrap .appExtensionItem")[1],3,0,"right");return k.createElement(k.Fragment,null,k.createElement("div",{className:"guidanceCircle dark",style:se}),k.createElement("div",{className:"guidanceInfo dark",style:{top:se.top+se.height,right:se.right-se.width/2}},_l("\u5DE5\u4F5C\u6D41")))}return k.createElement(k.Fragment,null)}},{key:"render",value:function(){var z=this.state.guide,N=this.getGuideTextList(z-1);return k.createElement(k.Fragment,null,k.createElement("div",{className:"guidanceWrapper"},k.createElement("div",{className:m()("guideImg","guide_"+z)}),k.createElement("div",{className:"mTop25 mBottom50"},k.createElement("div",{className:"Font20 mBottom8 Bold breakAll"},N.title),k.createElement("div",{className:"Font14"},N.info)),k.createElement("div",{className:"flexRow valignWrapper"},k.createElement("div",{className:"flex Font13 Gray_75"},z+" / "+te),z===1?k.createElement("div",{className:"mRIght20 Font13 Gray_75 mRight25 pointer skip",onClick:this.props.onClose},_l("\u8DF3\u8FC7")):k.createElement("div",{className:"mRIght20 Font13 Gray_75 mRight25 pointer lastStep",onClick:this.handleLaststep},z===te?_l("\u518D\u770B\u4E00\u904D"):_l("\u4E0A\u4E00\u6B65")),z===te?k.createElement(h.ZP,{className:"continue",type:"primary",onClick:this.props.onClose},_l("\u5B8C\u6210")):k.createElement(h.ZP,{className:"continue",type:"primary",onClick:this.handleContinue},z===1?_l("\u5F00\u59CB"):_l("\u7EE7\u7EED")))),k.createElement(e.Z,{prefixCls:"guidanceTrigger",popupVisible:!0,popupAlign:{points:["tl","bl"]},popup:this.renderGuidanceItem()},k.createElement("div",null)))}}]),R}(k.Component),T=function(){var R=this;this.saveGuide=function(){var a=R.state.guide;if(safeLocalStorageSetItem("guide",a),a===2){var z=document.querySelector(".worksheetCompHeader .moreOperate ul");if(z){var N=document.createElement("div");N.classList.add("guidanceCircle"),N.classList.add("editSheetGuidanceCircle"),z.appendChild(N)}var q=document.querySelector(".createNewMenu");if(q){var K=document.createElement("div");K.classList.add("guidanceCircle"),K.classList.add("addSheetGuidanceCircle"),q.appendChild(K)}}else $(".editSheetGuidanceCircle").remove(),$(".addSheetGuidanceCircle").remove();if(a===4){var ye=document.querySelector(".createNewMenu");if(ye){var v=document.createElement("div");v.classList.add("guidanceCircle"),v.classList.add("addPageGuidanceCircle"),ye.appendChild(v)}}else $(".addPageGuidanceCircle").remove()},this.handleLaststep=function(){var a=R.state.guide;a===te?R.setState({guide:1},R.saveGuide):R.setState({guide:a-1},R.saveGuide)},this.handleContinue=function(){var a=R.state.guide;R.setState({guide:a+1},R.saveGuide)}},J)},21459:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>Te}),!/^(1887|7596|7798)$/.test(t.j))var h=t(77738);const Te=/^(1887|7596|7798)$/.test(t.j)?null:h.Z},48629:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>k});var h=t(88239),Te=t(60954),C=t.n(Te);if(!/^(1887|7596|7798)$/.test(t.j))var Ce=t(12386);if(!/^(1887|7596|7798)$/.test(t.j))var Ne=t(33867);var j=t(42723),L=t(67294),I=[{text:_l("\u5168\u9690\u85CF%05011"),textShow:_l("\u5168\u663E\u793A%05008"),key:["hide","show"]},{text:_l("\u4EC5\u5728PC\u7AEF\u9690\u85CF%05010"),textShow:_l("\u4EC5\u5728PC\u7AEF\u663E\u793A%05007"),key:["hpc&sapp","spc&happ"]},{text:_l("\u4EC5\u5728\u79FB\u52A8\u7AEF\u9690\u85CF%05009"),textShow:_l("\u4EC5\u5728\u79FB\u52A8\u7AEF\u663E\u793A%05006"),key:["spc&happ","hpc&sapp"]}];function k(e){var oe=e.onClick,m=e.current,y=m===void 0?0:m,i=e.showhide,me=(0,j.Z)(e,["onClick","current","showhide"]),J=i==="hide"?1:0;return L.createElement(Ce.default,(0,h.default)({className:"hiddenMenu"},me),I.map(function(T,te){return L.createElement(Ce.default.Item,{key:"hiddenMenu"+te,className:"hiddenMenuItem "+(i===I[te].key[J]?"current":""),onClick:function(){return oe(i===I[te].key[J]?"":I[te].key[J])}},T[i!=="hide"?"text":"textShow"],i===I[te].key[J]&&L.createElement(Ne.Z,{icon:"done"}))}))}},96034:(wn,gt,t)=>{"use strict";if(t.d(gt,{Z:()=>E}),!/^(1887|7596|7798)$/.test(t.j))var h=t(62521);var Te=t(88239);if(!/^(1887|7596|7798)$/.test(t.j))var C=t(16469);if(!/^(1887|7596|7798)$/.test(t.j))var Ce=t(33867);var Ne=t(12424),j=t(67294),L=t(29314),I=t(96486),k=t.n(I);if(!/^(1887|7596|7798)$/.test(t.j))var e=t(48629);if(!/^(1887|7596|7798)$/.test(t.j))var oe=t(31742);if(!/^(1887|7596|7798)$/.test(t.j))var m=t(76345);if(!/^(1887|7596|7798)$/.test(t.j))var y=t(15742);if(!/^(1887|7596|7798)$/.test(t.j))var i=t(15577);if(!/^(1887|7596|7798)$/.test(t.j))var me=t(77863);if(!/^(1887|7596|7798)$/.test(t.j))var J=t(53327);if(!/^(1887|7596|7798)$/.test(t.j))var T=t(40979);function te(r){var R=r.isCharge,a=r.item,z=r.editName,N=z===void 0?!1:z,q=r.changeViewType,K=q===void 0?!1:q,ye=r.sheetSwitchPermit,v=r.isLock,se=r.projectId,de=r.controls,U=r.clickEditName,pe=r.onCopy,Y=r.onChangeHidden,be=r.onRemoveView,Q=r.handleClose,Le=r.onCopyView,Be=r.onOpenView,ke=r.onShare,Ie=r.onExport,he=r.onExportAttachment,Re=r.changeViewDisplayType,ue=(0,j.useState)(!1),we=(0,Ne.Z)(ue,2),Ee=we[0],b=we[1],le=(0,j.useState)(!1),ae=(0,Ne.Z)(le,2),ve=ae[0],W=ae[1],ce=(0,j.useState)(!1),Z=(0,Ne.Z)(ce,2),_e=Z[0],P=Z[1],xe=function(){var Bt=["customize"].includes(y.B[a.viewType]);return Bt&&!k().get(a,"pluginInfo.id")},bt=function(){return xe()?!1:!md.global.Account.isPortal},tt=function(){return xe()?!1:(0,oe.v)(m.RX.viewExportSwitch,ye,a.viewId)},Dt=function(Bt){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}if(Bt.exportType===1)Ie(a),W(!1),Q();else{W(!1),Q();var kt=(0,oe.v)(m.RX.recordAttachmentSwitch,ye,a.viewId),Tt=window.isPublicApp?"":(0,i.XH)(se,me.UU.batchDownloadFiles);if(Bt.exportType===2&&!kt)return alert(_l("\u65E0\u9644\u4EF6\u4E0B\u8F7D\u6743\u9650\uFF0C\u65E0\u6CD5\u5BFC\u51FA"),2);if(Tt==="2"){(0,i.j0)(se,me.UU.batchDownloadFiles);return}he()}},vn=function(){return R?de.filter(function(Bt){return Bt.type===14}):de.filter(function(Bt){return Bt.type===14}).filter(function(Bt){var kt=Bt.controlPermissions||"111",Tt=Bt.fieldPermission||"111";return Tt[0]==="1"&&kt[0]==="1"})};return j.createElement(h.Z,{className:"viewItemMoreOperate"},N&&R&&j.createElement(C.Z,{icon:j.createElement(Ce.Z,{icon:"workflow_write",className:"Font18"}),onClick:U},j.createElement("span",{className:"text"},_l("\u91CD\u547D\u540D%05004"))),!xe()&&j.createElement(j.Fragment,null,!v&&R&&j.createElement(C.Z,{icon:j.createElement(Ce.Z,{icon:"settings",className:"Font18"}),onClick:function(){Be(a),Q()}},j.createElement("span",{className:"text"},_l("\u914D\u7F6E\u89C6\u56FE%05024"))),K&&!v&&R&&!["customize"].includes(y.B[a.viewType])&&j.createElement(L.Z,{popupVisible:_e,onPopupVisibleChange:function(Bt){return P(Bt)},popupClassName:"DropdownPanelTrigger",action:["hover"],popupPlacement:"bottom",popupAlign:{points:["tl","tr"],offset:[0,-6],overflow:{adjustX:!0,adjustY:!0}},popup:function(){return j.createElement(J.Z,{style:{borderRadius:"3px"},onClick:function(){var kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"sheet";kt!==y.B[a.viewType]&&(Re((0,T.Y8)((0,Te.default)({},a,{viewControl:kt==="gunter"?"":a.viewControl,viewControls:[],viewType:y.B[kt],filters:a.filters,advancedSetting:k().omit(a.advancedSetting||{},["navfilters","navshow"])}))),kt==="detail"&&Be(a)),P(!1),Q()}})}},j.createElement(C.Z,{className:"changeViewDisplayTypeMenuWrap",icon:j.createElement(Ce.Z,{icon:"swap_horiz",className:"Font18"})},j.createElement("span",{className:"text"},_l("\u66F4\u6539\u89C6\u56FE\u7C7B\u578B%05023")),j.createElement(Ce.Z,{icon:"arrow-right-tip Font15",style:{fontSize:"16px",right:"10px",left:"initial"}}))),!v&&R&&!["customize"].includes(y.B[a.viewType])&&j.createElement(C.Z,{icon:j.createElement(Ce.Z,{icon:"content-copy",className:"Font16"}),onClick:function(){Le(a),Q(),pe&&pe()}},j.createElement("span",{className:"text"},_l("\u590D\u5236%05003"))),R&&j.createElement("hr",{className:"splitLine"}),bt()&&j.createElement(C.Z,{icon:j.createElement(Ce.Z,{icon:"share",className:"Font18"}),onClick:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}ke(a),Q()}},j.createElement("span",{className:"text"},_l("\u5206\u4EAB%05021"))),tt()&&j.createElement(L.Z,{popupVisible:ve,onPopupVisibleChange:function(Bt){return W(Bt)},popupClassName:"exportTrigger",action:["hover","click"],popupPlacement:"right",builtinPlacements:{right:{points:["cl","cr"]}},popup:j.createElement(h.Z,{style:{width:200}},[{name:_l("\u5BFC\u51FA\u8BB0\u5F55")+"\uFF08Excel\uFF0CCSV\uFF09",icon:"new_excel",exportType:1},{name:_l("\u5BFC\u51FA\u9644\u4EF6"),icon:"attachment",exportType:2}].map(function(Fe){if(!(Fe.exportType===2&&k().isEmpty(vn())))return j.createElement(C.Z,{icon:j.createElement(Ce.Z,{icon:Fe.icon}),onClick:function(){return Dt(Fe)}},j.createElement("span",null,Fe.name))})),popupAlign:{offset:[0,-20]}},j.createElement(C.Z,{icon:j.createElement(Ce.Z,{icon:"download",className:"Font18"})},j.createElement("span",{className:"text"},_l("\u5BFC\u51FA%05020")),j.createElement(Ce.Z,{icon:"arrow-right-tip Font15",style:{fontSize:"16px",right:"10px",left:"initial"}})))),R&&j.createElement(C.Z,{icon:j.createElement(Ce.Z,{icon:k().get(a,"advancedSetting.showhide")!=="hide"?"visibility_off":"visibility",className:"Font16"}),className:"hiddenTypeMenuWrap",onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)}},j.createElement("span",{className:"text"},k().get(a,"advancedSetting.showhide")!=="hide"?_l("\u4ECE\u5BFC\u822A\u680F\u4E2D\u9690\u85CF%05001"):_l("\u53D6\u6D88\u9690\u85CF%05002")),j.createElement(Ce.Z,{icon:"arrow-right-tip Font14",style:{fontSize:"16px",right:"10px",left:"initial"}}),Ee&&j.createElement(e.Z,{showhide:k().get(a,"advancedSetting.showhide")||"show",onClick:Y,style:{top:"-6px",left:"100%"}})),R&&j.createElement(C.Z,{icon:j.createElement(Ce.Z,{icon:"hr_delete",className:"Font18"}),className:"delete",onClick:function(){be(a),Q()}},j.createElement("span",{className:"text"},_l("\u5220\u9664%05000"))))}const E=/^(1887|7596|7798)$/.test(t.j)?null:te},31457:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>Ot});var h=t(48659),Te=t(1825),C=t(3540),Ce=t(70264),Ne=t(33867),j=t(52945),L=t.n(j),I=t(85105),k=t.n(I),e=t(99663),oe=t(22600),m=t(49135),y=t(93196),i=t(88239),me=t(42723),J=t(69288),T=t(86735),te=t(67294),E=t(93967),r=t.n(E),R=t(96486),a=t.n(R),z=t(95742),N=t(29314),q=t(45231),K=t(15742),ye=t(40979),v=t(85315),se=t(54208),de=t(6100),U=t(71893),pe=t(95248),Y=t(62580),be=t.n(Y),Q,Le,Be=(0,T.Z)([`
  background-color: #fff;
  border-radius: 3px 3px 3px 3px;
  overflow: hidden;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.13), 0 2px 6px rgba(0, 0, 0, 0.1);
  .title {
    padding: 0 12px 12px;
  }
  .typeMenuWrap {
    border-right: 1px solid #dddddd;
    width: 180px;
    background: #fafafa;
    padding: 16px 6px;
    .viewTypeItem {
      line-height: 36px;
      border-radius: 3px 3px 3px 3px;
      padding: 0 13px;
      &:hover {
        background: rgba(0, 0, 0, 0.04);
      }
      .viewName {
        font-weight: 400;
      }
    }
  }
  .customView {
    background: #fff;
    width: 540px;
    height: 440px;
    padding: 16px 0 16px 24px;
    .listCon {
      overflow: auto;
    }
    .con {
      flex-wrap: wrap;
      // justify-content: space-between;
    }
    .valignWrapper {
      min-width: 152px;
      width: 152px;
      max-width: 152px;
      height: 36px;
      border-radius: 3px 3px 3px 3px;
      padding: 0 6px;
      &:hover {
        background: rgba(0, 0, 0, 0.04);
      }
    }
    .addCustomView {
      font-weight: 600;
      color: #757575;
      vertical-align: middle;
      line-height: 20px;
      .icon {
        color: #757575;
      }
      &:hover {
        color: #2196f3;
        .icon {
          color: #2196f3;
        }
      }
    }
  }
  .toCustomLib {
    color: #9d9d9d;
    &:hover {
      color: #2196f3;
    }
  }
  .minBold {
    font-weight: 400;
  }
  .emptyCon {
    .imgCon {
      height: 176px;
      text-align: center;
      img {
        height: 100%;
      }
    }
    .Beta {
      padding: 4px 5px;
      background: #43bd36;
      border-radius: 3px;
      color: #fff;
    }
    .addCustomView {
      background: #ffffff;
      border-radius: 4px 4px 4px 4px;
      border: 1px solid #dddddd;
      padding: 11px 14px;
      margin: 32px auto 48px;
      i {
        color: #757575;
      }
      .viewName {
        color: #333;
      }
      &:hover {
        border: 1px solid #2196f3;
        i,
        .viewName {
          color: #2196f3;
        }
      }
    }
  }
  .customListCon {
    gap: 6px 12px;
  }
`],[`
  background-color: #fff;
  border-radius: 3px 3px 3px 3px;
  overflow: hidden;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.13), 0 2px 6px rgba(0, 0, 0, 0.1);
  .title {
    padding: 0 12px 12px;
  }
  .typeMenuWrap {
    border-right: 1px solid #dddddd;
    width: 180px;
    background: #fafafa;
    padding: 16px 6px;
    .viewTypeItem {
      line-height: 36px;
      border-radius: 3px 3px 3px 3px;
      padding: 0 13px;
      &:hover {
        background: rgba(0, 0, 0, 0.04);
      }
      .viewName {
        font-weight: 400;
      }
    }
  }
  .customView {
    background: #fff;
    width: 540px;
    height: 440px;
    padding: 16px 0 16px 24px;
    .listCon {
      overflow: auto;
    }
    .con {
      flex-wrap: wrap;
      // justify-content: space-between;
    }
    .valignWrapper {
      min-width: 152px;
      width: 152px;
      max-width: 152px;
      height: 36px;
      border-radius: 3px 3px 3px 3px;
      padding: 0 6px;
      &:hover {
        background: rgba(0, 0, 0, 0.04);
      }
    }
    .addCustomView {
      font-weight: 600;
      color: #757575;
      vertical-align: middle;
      line-height: 20px;
      .icon {
        color: #757575;
      }
      &:hover {
        color: #2196f3;
        .icon {
          color: #2196f3;
        }
      }
    }
  }
  .toCustomLib {
    color: #9d9d9d;
    &:hover {
      color: #2196f3;
    }
  }
  .minBold {
    font-weight: 400;
  }
  .emptyCon {
    .imgCon {
      height: 176px;
      text-align: center;
      img {
        height: 100%;
      }
    }
    .Beta {
      padding: 4px 5px;
      background: #43bd36;
      border-radius: 3px;
      color: #fff;
    }
    .addCustomView {
      background: #ffffff;
      border-radius: 4px 4px 4px 4px;
      border: 1px solid #dddddd;
      padding: 11px 14px;
      margin: 32px auto 48px;
      i {
        color: #757575;
      }
      .viewName {
        color: #333;
      }
      &:hover {
        border: 1px solid #2196f3;
        i,
        .viewName {
          color: #2196f3;
        }
      }
    }
  }
  .customListCon {
    gap: 6px 12px;
  }
`]),ke=U.ZP.div(Be),Ie=(Le=Q=function($t){(0,y.default)(cn,$t);function cn(Mn){(0,e.default)(this,cn);var dt=(0,m.default)(this,(cn.__proto__||k()(cn)).call(this,Mn));return dt.getCustomList=function(){var $e=dt.props,jt=$e.projectId,rn=$e.appId;pe.Z.getAll({projectId:jt,pageIndex:1,pageSize:1e4,appId:rn}).then(function(Rt){var St=Rt.myPlugins,zt=St===void 0?[]:St,oa=Rt.orgPlugins,qn=oa===void 0?[]:oa;dt.setState({myPlugins:zt,orgPlugins:qn,loading:!1})})},dt.renderCon=function($e,jt){var rn=dt.props.onClick;return $e.map(function(Rt){var St=Rt.icon,zt=Rt.id,oa=Rt.iconColor,qn=oa===void 0?"#445A65":oa,In=Rt.name,Vt=Rt.iconUrl;return te.createElement("div",{className:"valignWrapper flex Hand",onClick:function(){return rn({id:"customize",name:_l("\u81EA\u5B9A\u4E49\u89C6\u56FE"),pluginSource:jt?0:1,pluginId:zt,pluginName:In,pluginIcon:St||"sys_12_4_puzzle",pluginIconColor:qn})}},te.createElement(de.Z,{url:Vt||"https://fp1.mingdaoyun.cn/customIcon/sys_12_4_puzzle.svg",fill:qn||"#445A65",size:18}),te.createElement("span",{className:"viewName mLeft8 WordBreak overflow_ellipsis",title:In},In))})},dt.state={myPlugins:[],orgPlugins:[],loading:!0},dt}return(0,oe.default)(cn,[{key:"componentDidMount",value:function(){var dt=this.props.canAddCustomView;dt&&this.getCustomList()}},{key:"componentWillReceiveProps",value:function(dt){var $e=dt.canAddCustomView,jt=dt.popupVisible;$e&&jt&&this.getCustomList()}},{key:"render",value:function(){var dt=this.props,$e=dt.onClick,jt=dt.canAddCustomView,rn=dt.projectId,Rt=(0,me.Z)(dt,["onClick","canAddCustomView","projectId"]),St=this.state,zt=St.myPlugins,oa=zt===void 0?[]:zt,qn=St.orgPlugins,In=qn===void 0?[]:qn,Vt=St.loading,Yt=_.get(_.find(md.global.Account.projects,function(qt){return qt.projectId===rn}),"allowPlugin");return te.createElement(ke,{className:"flexRow"},te.createElement("div",(0,i.default)({className:"typeMenuWrap"},Rt),te.createElement("div",{className:"title Bold Font15"},_l("\u9ED8\u8BA4\u89C6\u56FE")),K.D.filter(function(qt){return qt.id!=="customize"}).map(function(qt){var rt=qt.icon,Qe=qt.text,ht=qt.id,Lt=qt.color,Ct=qt.isNew;return te.createElement("div",{key:ht,className:"viewTypeItem flexRow Hand",onClick:function(){return $e({id:ht})}},te.createElement("div",{className:"valignWrapper flex"},te.createElement(Ne.Z,{style:{color:Lt,fontSize:"20px"},icon:rt}),te.createElement("span",{className:"viewName mLeft12 Bold Font14"},Qe)),Ct&&te.createElement("div",{className:"newIcon"},te.createElement(Ne.Z,{icon:"new",className:"ThemeColor Font20"})))})),jt&&te.createElement("div",{className:"customView flex flexColumn"},te.createElement("div",{className:""},te.createElement("span",{className:"viewName Font15 Bold"},_l("\u63D2\u4EF6\u89C6\u56FE"))),Vt?te.createElement(se.Z,{className:"mTop80"}):[].concat((0,v.Z)(In),(0,v.Z)(oa)).length>0?te.createElement(te.Fragment,null,te.createElement("div",{className:"flex pRight24 listCon"},te.createElement("div",{className:""},In.length>0&&te.createElement(te.Fragment,null,te.createElement("div",{className:"Gray_9e mTop16 Bold"},_l("\u7EC4\u7EC7\u53D1\u5E03\u7684")),te.createElement("div",{className:"flexRow con customListCon mTop8"},this.renderCon(In))),oa.length>0&&te.createElement(te.Fragment,null,te.createElement("div",{className:"Gray_9e mTop16 Bold"},_l("\u6211\u5F00\u53D1\u7684")),te.createElement("div",{className:"flexRow con customListCon mTop8"},this.renderCon(oa,!0))))),Yt&&te.createElement("div",{className:"mTop24"},te.createElement("span",{className:"addCustomView Hand",onClick:function(){return $e({id:"customize",name:_l("\u81EA\u5B9A\u4E49\u89C6\u56FE"),pluginName:_l("\u81EA\u5B9A\u4E49\u89C6\u56FE"),pluginSource:0,pluginIcon:"sys_12_4_puzzle",pluginIconColor:"#445A65",isNew:!0})}},te.createElement(Ne.Z,{icon:"plus"}),te.createElement("span",{className:"viewName mLeft6"},_l("\u5F00\u53D1\u63D2\u4EF6\u89C6\u56FE"))),te.createElement("span",{className:"mLeft40 Hand addCustomView",onClick:function(){window.open("/plugin")}},te.createElement("span",{className:"viewName"},_l("\u7BA1\u7406\u63D2\u4EF6")),te.createElement(Ne.Z,{icon:"launch",className:"mLeft6 Hand toCustomLib Font14"})))):te.createElement("div",{className:"emptyCon"},te.createElement("div",{className:"imgCon mTop24"},te.createElement("img",{src:be()})),te.createElement("div",{className:"TxtCenter mTop32"},te.createElement("span",{className:"Font16 Bold"},_l("\u81EA\u5B9A\u4E49\u89C6\u56FE")),te.createElement("span",{className:"Beta mLeft8 Bold"},"Beta")),te.createElement("div",{className:"mTop16 minBold Font14 TxtCenter"},_l("\u901A\u8FC7\u63D2\u4EF6\u5F00\u53D1\uFF0C\u5B9A\u5236\u81EA\u5DF1\u7684\u89C6\u56FE")),Yt&&te.createElement("div",{className:"flexRow alignItemsCenter"},te.createElement("span",{className:"addCustomView Hand",onClick:function(){return $e({id:"customize",name:_l("\u81EA\u5B9A\u4E49\u89C6\u56FE"),pluginName:_l("\u81EA\u5B9A\u4E49\u89C6\u56FE"),pluginSource:0,pluginIcon:"sys_12_4_puzzle",pluginIconColor:"#445A65",isNew:!0},!0)}},te.createElement(Ne.Z,{icon:"plus",className:"Font16"}),te.createElement("span",{className:"viewName mLeft8 Bold"},_l("\u5F00\u53D1\u63D2\u4EF6\u89C6\u56FE")))))))}}]),cn}(te.Component),Q.propTypes={},Q.defaultProps={},Le),he=t(56002),Re=t(31742),ue=t(76345),we=t(15577),Ee=t(36021),b=t(96034),le,ae,ve=(ae=le=function($t){(0,y.default)(cn,$t);function cn(Mn){(0,e.default)(this,cn);var dt=(0,m.default)(this,(cn.__proto__||k()(cn)).call(this,Mn));return dt.isDelCustomize=function(){var $e=dt.props.item,jt=["customize"].includes(K.B[$e.viewType]);return jt&&!a().get($e,"pluginInfo.id")},dt.canShare=function(){return dt.isDelCustomize()?!1:!md.global.Account.isPortal},dt.canExport=function(){var $e=dt.props,jt=$e.item,rn=$e.sheetSwitchPermit;return dt.isDelCustomize()?!1:(0,Re.v)(ue.RX.viewExportSwitch,rn,jt.viewId)},dt.renderSettingMenu=function(){var $e=dt.props,jt=$e.item,rn=$e.updateAdvancedSetting,Rt=$e.list,St=$e.getNavigateUrl;return te.createElement(b.Z,(0,i.default)({},dt.props,{changeViewType:!0,onChangeHidden:function(oa){if(rn((0,i.default)({},jt,{advancedSetting:(0,i.default)({},jt.advancedSetting,{showhide:oa})})),oa.search(/hide|hpc/g)>-1){var qn=Rt.filter(function(In){return In.viewId!==jt.viewId&&a().get(In,"advancedSetting.showhide")&&a().get(In,"advancedSetting.showhide").search(/hide|hpc/g)===-1});if(qn.length===0)return;(0,Ee.T8)(St(qn[0]))}dt.setState({visible:!1})},handleClose:function(){return dt.setState({visible:!1})}}))},dt.handleSaveName=function($e){var jt=$e.target.value.trim(),rn=dt.props.item,Rt=rn.name;jt&&Rt!==jt&&(rn.name=jt,dt.props.updateViewName(rn)),dt.setState({isEdit:!1})},dt.state={visible:!1,isEdit:!1},dt}return(0,oe.default)(cn,[{key:"componentWillMount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){var dt=this,$e=this.props,jt=$e.appId,rn=$e.item,Rt=$e.currentViewId,St=$e.isCharge,zt=$e.sheetSwitchPermit,oa=$e.currentView,qn=$e.getNavigateUrl,In=this.state.isEdit,Vt=window.localStorage.getItem("customViewDebugUrl_"+rn.viewId),Yt=a().get(rn,"pluginInfo.source")===K.G7.DEVELOPMENT,qt=!a().get(rn,"pluginInfo.id"),rt=a().get(rn,"pluginInfo.codeUrl"),Qe=rn.viewType===21&&Yt&&!qt;return te.createElement("div",{className:r()("valignWrapper workSheetViewItem pointer","workSheetViewItemViewId-"+rn.viewId,{active:Rt===rn.viewId}),style:a().get(rn,"advancedSetting.showhide")&&a().get(rn,"advancedSetting.showhide").search(/hide|hpc/g)!==-1?{display:"none"}:{}},te.createElement(he.Z,{className:r()("name valignWrapper overflowHidden h100",{pRight20:!(St||this.canExport()||this.canShare())}),to:qn(rn)},Qe&&te.createElement(Ce.Z,{text:Vt?_l("\u5F00\u53D1\u8C03\u8BD5\u4E2D\uFF0C\u672C\u5730\u811A\u672C: %0",Vt):rt?_l("\u89C6\u56FE\u63D2\u4EF6\u8C03\u8BD5\u4E2D\uFF0C\u4F7F\u7528\u7684\u662F\u63D0\u4EA4\u5386\u53F2\u4E2D\u7684\u7248\u672C\u3002"):_l("\u89C6\u56FE\u63D2\u4EF6\u8C03\u8BD5\u4E2D")},te.createElement("i",{className:"developIcon icon icon-setting"})),In?te.createElement("input",{autoFocus:!0,className:"deit",defaultValue:rn.name,onBlur:this.handleSaveName,onKeyDown:function(Lt){Lt.which===13&&dt.handleSaveName(Lt)}}):te.createElement("span",{className:"ellipsis bold"},(0,we.T3)(jt,rn.viewId).name||rn.name)),St||this.canExport()||this.canShare()?te.createElement(N.Z,{popupVisible:this.state.visible,onPopupVisibleChange:function(Lt){dt.setState({visible:Lt})},popupClassName:"DropdownPanelTrigger",action:["click"],popupPlacement:"bottom",builtinPlacements:{bottom:{points:["tc","bc"]}},popup:this.renderSettingMenu(),popupAlign:{offset:[-30,10]}},te.createElement(Ne.Z,{icon:"arrow-down"})):"")}}]),cn}(te.Component),le.defaultProps={item:{}},ae),W=t(21),ce=t(94942),Z=t.n(ce),_e=t(36803),P=t(12424);function xe($t){var cn=this,Mn=$t.appId,dt=$t.item,$e=dt===void 0?{}:dt,jt=$t.viewList,rn=$t.currentViewId,Rt=$t.type,St=$t.toView,zt=$t.isCharge,oa=$t.updateAdvancedSetting,qn=$t.updateViewName,In=$t.handleSortEnd,Vt=(0,te.useState)(!1),Yt=(0,P.Z)(Vt,2),qt=Yt[0],rt=Yt[1],Qe=(0,te.useState)(!1),ht=(0,P.Z)(Qe,2),Lt=ht[0],Ct=ht[1],mt=(0,te.useState)(void 0),vt=(0,P.Z)(mt,2),Xt=vt[0],bn=vt[1],pn=(0,te.useRef)(null),Rn=!1;(0,te.useEffect)(function(){var xt={};xt.newIndex=a().findIndex(jt,function(Mt){return Mt.viewId===$e.viewId})+1,xt.oldIndex=jt.length-1,!(xt.newIndex===xt.oldIndex||Xt!=="copy")&&(Xt!=="copy"&&In(xt),bn(void 0))},[jt]);var fe=function(){Ct(!0),rt(!1)},$n=function(){return te.createElement(b.Z,(0,i.default)({},$t,{editName:!0,clickEditName:fe,onCopy:function(){return bn("copy")},onChangeHidden:function(){var Mt=(0,_e.Z)(Z().mark(function ze(yt){return Z().wrap(function(Wt){for(;;)switch(Wt.prev=Wt.next){case 0:return rt(!1),Wt.next=3,St();case 3:oa((0,i.default)({},$e,{advancedSetting:(0,i.default)({},$e.advancedSetting,{showhide:yt})}));case 4:case"end":return Wt.stop()}},ze,cn)}));return function(ze){return Mt.apply(this,arguments)}}(),handleClose:function(){return rt(!1)}}))},gn=function(Mt){var ze=Mt.target.value.trim(),yt=$e.name;Lt&&(ze&&yt!==ze&&($e.name=ze,qn($e)),Ct(!1))},en=a().debounce(function(xt){Rn=!0,pn&&pn.current&&pn.current.select()},500),_t=function(Mt){St()},nn=K.D.find(function(xt){return xt.id===K.B[$e.viewType]})||{},Gt=["customize"].includes(K.B[$e.viewType]);return te.createElement("li",{style:{zIndex:999999},className:r()("drawerWorksheetShowListItem",{active:$e.viewId===rn}),onClick:_t},te.createElement(Ne.Z,{icon:"drag_indicator",className:"Font16",style:zt?{}:{opacity:0}}),Gt?te.createElement(de.Z,{url:a().get($e,"pluginInfo.iconUrl")||"https://fp1.mingdaoyun.cn/customIcon/sys_12_4_puzzle.svg",fill:a().get($e,"pluginInfo.iconColor")||"#445A65",size:18}):te.createElement(Ne.Z,{style:{color:nn.color,fontSize:"20px"},icon:nn.icon}),Lt?te.createElement("input",{autoFocus:!0,ref:pn,className:"viewName sideEditName",defaultValue:$e.name,onBlur:gn,onKeyDown:function(Mt){Mt.which===13&&gn(Mt)},onFocus:en}):te.createElement("span",{className:"viewName ellipsis"},(0,we.T3)(Mn,$e.viewId).name||$e.name),zt&&Rt==="drawerWorksheetShowList"&&a().get($e,"advancedSetting.showhide")&&a().get($e,"advancedSetting.showhide").search(/hpc|happ/g)>-1&&te.createElement(Ne.Z,{icon:a().get($e,"advancedSetting.showhide").includes("hpc")?"desktop_off":"mobile_off",style:{color:"#EE6F08"},className:"Font17 hideicon"}),zt&&te.createElement(N.Z,{popupVisible:qt,onPopupVisibleChange:function(Mt){return rt(Mt)},popupClassName:"HiddenItemTrigger",action:["click"],popup:$n(),popupAlign:{points:["tl","bl"],overflow:{adjustX:!0,adjustY:!0}}},te.createElement(Ne.Z,{className:"Font20 Gray_9e more",icon:"more_horiz"})))}var bt=t(89626),tt,Dt,vn,Fe=(0,T.Z)([`
  font-size: 12px;
  color: #9e9e9e;
  text-align: center;
  margin-top: 120px;
`],[`
  font-size: 12px;
  color: #9e9e9e;
  text-align: center;
  margin-top: 120px;
`]),Bt=U.ZP.div(Fe),kt=J.Z.confirm,Tt=(0,z.W8)(function($t){var cn=(0,me.Z)($t,[]);return te.createElement(ve,cn)}),tn=(0,z.JN)(function($t){var cn=$t.list,Mn=$t.onScroll,dt=(0,me.Z)($t,["list","onScroll"]);return te.createElement("div",{className:"viewsScroll",onScroll:Mn},te.createElement("div",{className:"stance"}),cn.map(function($e,jt){return te.createElement(Tt,(0,i.default)({key:jt,index:jt,item:$e,list:cn},dt))}),te.createElement("div",{className:"stance"}))}),Vn=(0,z.W8)(function($t){var cn=(0,me.Z)($t,[]);return te.createElement(xe,cn)}),Zn=(0,z.JN)(function($t){var cn=$t.children,Mn=$t.type,dt=Mn===void 0?"drawerWorksheetShowList":Mn;return te.createElement("ul",{className:dt},cn)}),Ot=(0,W.Z)(tt=(vn=Dt=function($t){(0,y.default)(cn,$t);function cn(Mn){(0,e.default)(this,cn);var dt=(0,m.default)(this,(cn.__proto__||k()(cn)).call(this,Mn));return dt.clickDrawerArea=function($e){var jt=dt.state.setWorksheetHidden;if(dt.setState({hasClickDrawe:!1}),!!jt){var rn=document.querySelector(".drawerWorksheetHidden",1).getBoundingClientRect();rn.right>$e.clientX&&$e.clientX>rn.left&&rn.bottom>$e.clientY&&$e.clientY>rn.top||dt.setState({setWorksheetHidden:!1,hasClickDrawe:!0})}},dt.handleAddView=function($e){var jt=$e.id,rn=jt===void 0?"sheet":jt,Rt=$e.name,St=dt.props,zt=St.worksheetId,oa=St.viewList,qn=St.appId,In=St.worksheetControls,Vt=St.worksheetInfo,Yt=a().get(a().find(In,function(en){return en.attribute===1}),"controlId"),qt=In.filter(function(en){return en.controlId!==Yt&&!a().includes([22,43,10010,45,51],en.type)}).map(function(en){return en.controlId}),rt=a().get(a().find(In,function(en){return en.type===14}),"controlId"),Qe=rn==="gallery"&&a().get(Vt,["advancedSetting","coverid"])||rt,ht=K.B[rn],Lt=a().find(K.D,{id:rn})||{},Ct=oa.filter(function(en){return en.viewType==ht}).length,mt={viewId:"",appId:qn,viewType:ht,displayControls:a().slice(qt,0,2),coverCid:Qe,name:oa.length?""+(Rt||Lt.text)+(Ct||""):_l("\u89C6\u56FE"),sortType:0,coverType:0,worksheetId:zt,controls:[],filters:[],sortCid:"",showControlName:!0};if(rn==="customize"){var vt=$e.pluginId,Xt=$e.pluginName,bn=$e.pluginIcon,pn=$e.pluginIconColor,Rn=$e.pluginSource,fe=$e.isNew,$n=oa.filter(function(en){return vt&&a().get(en,"pluginInfo.id")==vt||en.name.indexOf(Xt)>=0}).length,gn=""+Xt+($n>0?$n:"");mt=(0,i.default)({},mt,{pluginId:vt,pluginName:fe?gn:Xt,pluginIcon:bn,pluginIconColor:pn,pluginSource:Rn,projectId:a().get(dt.props,"worksheetInfo.projectId"),name:gn})}mt=(0,ye.Y8)(mt),q.Z.saveWorksheetView(L()({},mt)).then(function(en){mt.viewId=en.viewId,mt.isNewView=!0;var _t=oa.concat(en);dt.props.onAddView(_t,en),dt.handleScrollPosition(0)}).catch(function(en){alert(_l("\u65B0\u5EFA\u89C6\u56FE\u5931\u8D25"),2)})},dt.handleRemoveView=function($e){var jt=dt.props,rn=jt.viewList,Rt=jt.appId,St=jt.worksheetId;if(rn.filter(function(zt){return![21].includes(zt.viewType)}).length===1&&![21].includes($e.viewType)){alert(_l("\u5FC5\u987B\u4FDD\u7559\u4E00\u4E2A\u9ED8\u8BA4\u89C6\u56FE"),3);return}kt({title:te.createElement("span",{className:"Red"},_l("\u786E\u5B9A\u5220\u9664\u6B64\u89C6\u56FE\u5417\uFF1F")),okText:_l("\u5220\u9664"),buttonType:"danger",onOk:function(){q.Z.deleteWorksheetView({appId:Rt,viewId:$e.viewId,worksheetId:St}).then(function(oa){dt.props.onRemoveView(rn.filter(function(qn){return qn.viewId!==$e.viewId}),$e.viewId),dt.handleScrollPosition(0)}).catch(function(oa){alert(_l("\u5220\u9664\u89C6\u56FE\u5931\u8D25"),2)})}})},dt.handleOpenView=function($e){dt.props.onViewConfigVisible($e)},dt.handleCopyView=function($e){var jt=dt.props,rn=jt.viewList,Rt=jt.appId;q.Z.copyWorksheetView({appId:Rt,viewId:$e.viewId}).then(function(St){var zt=rn.slice(),oa=a().findIndex(zt,{viewId:$e.viewId});zt.splice(oa+1,0,St),dt.handleSortViews(zt),dt.props.onAddView(zt,St)}).catch(function(St){alert(_l("\u590D\u5236\u89C6\u56FE\u5931\u8D25"),2)})},dt.handleSortViews=function($e){var jt=dt.props,rn=jt.appId,Rt=jt.worksheetId;q.Z.sortWorksheetViews({appId:rn,worksheetId:Rt,viewIds:$e.map(function(St){return St.viewId})}).then(function(St){})},dt.handleScrollPosition=function(){var $e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(dt.scrollWraperEl){var jt=dt.scrollWraperEl.clientWidth,rn=$e?jt/2:-(jt/2),Rt=dt.scrollWraperEl.querySelector(".viewsScroll"),St=Rt.scrollLeft;Rt.scrollLeft=St+rn}},dt.updateScrollBtnState=function(){var $e=dt.state.hideDirection,jt=dt.scrollWraperEl.querySelector(".viewsScroll"),rn=jt.scrollWidth,Rt=jt.scrollLeft,St=jt.offsetWidth,zt=Rt+St;if(!Rt&&$e!=="left"){dt.setState({hideDirection:"left"});return}if(zt===rn&&$e!=="right"){dt.setState({hideDirection:"right"});return}Rt&&zt<rn&&$e!==null&&dt.setState({hideDirection:null})},dt.handleSortEnd=function($e){var jt=$e.oldIndex,rn=$e.newIndex;if(jt!==rn){var Rt=dt.props,St=Rt.viewList,zt=Rt.worksheetId,oa=Rt.appId,qn=(0,z.Rp)(St,jt,rn);dt.props.updateViewList(qn),q.Z.sortWorksheetViews({appId:oa,worksheetId:zt,viewIds:qn.map(function(In){return In.viewId})}).then(function(In){}).catch(function(In){alert(_l("\u9000\u62FD\u6392\u5E8F\u89C6\u56FE\u5931\u8D25"),2)})}},dt.updateViewName=function($e){dt.props.updateCurrentView((0,i.default)({appId:dt.props.appId},$e,{name:$e.name,editAttrs:["name"]}),!1)},dt.handleAdd=function($e){dt.handleAddView($e),dt.setState({addMenuVisible:!1})},dt.updateAdvancedSetting=function($e){var jt=(0,bt.D0)($e,(0,i.default)({},a().omit($e.advancedSetting,["navfilters"])),!0);dt.props.updateCurrentView((0,i.default)({appId:dt.props.appId},$e,{advancedSetting:jt,editAttrs:["advancedSetting"]}),!1)},dt.handleAutoFocus=function(){setTimeout(function(){dt.searchRef.current.focus()},0)},dt.changeWorksheetHidden=function($e){var jt=dt.state,rn=jt.setWorksheetHidden,Rt=jt.hasClickDrawe;Rt&&!rn||(dt.setState({setWorksheetHidden:!0,hasClickDrawe:!1}),dt.handleAutoFocus())},dt.state={directionVisible:!1,hideDirection:"left",addMenuVisible:!1,setWorksheetHidden:!1,searchWorksheetListValue:void 0,sideMenuVisible:!1,hasClickDrawe:!1},dt.searchRef=te.createRef(),dt.containerWrapper=document.getElementById("wrapper"),dt.containerWrapper.addEventListener("click",dt.clickDrawerArea),dt}return(0,oe.default)(cn,[{key:"componentWillReceiveProps",value:function(dt){if(dt.sheetInfoLoading&&!this.props.sheetInfoLoading&&(this.flag=null,this.setState({directionVisible:!1})),dt.viewList.length!==this.props.viewList.length&&(this.flag=null),dt.currentViewId!==this.props.currentViewId){var $e=$(".workSheetViewsWrapper .viewsScroll .workSheetViewItemViewId-"+dt.currentViewId);$e[0]&&setTimeout(function(){$e[0].scrollIntoView()},500)}this.computeDirectionVisible()}},{key:"componentDidUpdate",value:function(){this.flag||this.computeDirectionVisible()}},{key:"componentWillUnmount",value:function(){this.containerWrapper.removeEventListener("click",this.clickDrawerArea)}},{key:"getWorksheetViews",value:function(dt){var $e=this,jt=this.props.appId;q.Z.getWorksheetViews({appId:jt,worksheetId:dt}).then(function(rn){$e.props.updateViewList(rn,rn[0]),$e.computeDirectionVisible()}).catch(function(rn){alert(_l("\u83B7\u53D6\u89C6\u56FE\u5217\u8868\u5931\u8D25"),2)})}},{key:"computeDirectionVisible",value:function(){if(this.scrollWraperEl){var dt=this.scrollWraperEl.querySelector(".viewsScroll");if(dt){var $e=dt.offsetWidth,jt=dt.scrollWidth;this.flag=!0,this.setState({directionVisible:$e<jt})}}}},{key:"render",value:function(){var dt=this,$e=this.state,jt=$e.directionVisible,rn=$e.hideDirection,Rt=$e.addMenuVisible,St=$e.setWorksheetHidden,zt=$e.searchWorksheetListValue,oa=this.props,qn=oa.viewList,In=oa.currentViewId,Vt=oa.isCharge,Yt=oa.changeViewDisplayType,qt=oa.sheetSwitchPermit,rt=oa.getNavigateUrl,Qe=oa.isLock,ht=zt&&a().isEmpty(qn.filter(function(Ct){return Vt||(a().get(Ct,"advancedSetting.showhide")||"").search(/hide|hpc/g)<0}).filter(function(Ct){return Ct.name.includes(a().trim(zt))})),Lt=a().get(qn.find(function(Ct){return Ct.viewId===In})||{},"advancedSetting.showhide");return te.createElement("div",{className:"valignWrapper flex"},te.createElement("div",null,te.createElement(Ce.Z,{popupPlacement:"bottom",text:te.createElement("span",null,_l("\u5168\u90E8\u89C6\u56FE%05005"))},te.createElement(Ne.Z,{icon:"menu-02",className:r()("Font14 mLeft10 pointer Gray_75 allVieListwIcon hoverGray",{menuVisible:St,currentIsHide:Lt&&Lt.search(/hpc|hide/g)>-1}),onClick:function(mt){return dt.changeWorksheetHidden(mt)}})),te.createElement(Te.Z,{title:"",width:280,className:"drawerWorksheetHidden",placement:"left",mask:!1,closable:!1,getContainer:function(){return document.querySelector("#worksheetRightContentBox")},style:{position:"absolute"},onClose:function(){return dt.setState({setWorksheetHidden:!1})},visible:St},te.createElement("div",{className:"searchBox"},te.createElement("i",{className:"icon icon-search Gray_9e Font20"}),te.createElement(C.Z,{value:zt,onChange:function(mt){return dt.setState({searchWorksheetListValue:mt})},placeholder:_l("%0\u4E2A\u89C6\u56FE",qn.filter(function(Ct){return Vt||(a().get(Ct,"advancedSetting.showhide")||"").search(/hide|hpc/g)<0}).length),type:"text",className:"drawerWorksheetHiddenSearch flex",manualRef:this.searchRef}),!!zt&&te.createElement(Ne.Z,{icon:"closeelement-bg-circle",className:"Font16 Hand Gray_9e mRight10",onClick:function(){dt.setState({searchWorksheetListValue:""})}})),ht?te.createElement(Bt,null,_l("\u6CA1\u6709\u641C\u7D22\u5230\u76F8\u5173\u89C6\u56FE")):te.createElement(te.Fragment,null,te.createElement(Zn,{distance:10,onSortEnd:function(mt){if(Vt){var vt=mt.newIndex,Xt=mt.oldIndex;if(vt!==Xt){var bn=qn.filter(function(Rn){return a().get(Rn,"advancedSetting.showhide")!=="hide"}),pn={};pn.newIndex=a().findIndex(qn,function(Rn){return Rn.viewId===bn[vt].viewId}),pn.oldIndex=a().findIndex(qn,function(Rn){return Rn.viewId===bn[Xt].viewId}),dt.handleSortEnd(pn)}}},type:"drawerWorksheetShowList",helperClass:"drawerWorksheetShowListItem"},qn.filter(function(Ct){return a().get(Ct,"advancedSetting.showhide")!=="hide"}).filter(function(Ct){return Vt||!(a().get(Ct,"advancedSetting.showhide")||"").includes("hpc")}).filter(function(Ct){return!zt||Ct.name.includes(a().trim(zt))}).map(function(Ct,mt){return te.createElement(Vn,{disabled:!Vt,isCharge:Vt,isLock:dt.props.isLock,lockAxis:"y",currentViewId:In,projectId:a().get(dt.props,"worksheetInfo.projectId"),item:Ct,appId:dt.props.appId,key:"drawerWorksheetShowList-"+Ct.viewId,index:mt,style:{zIndex:999999},type:"drawerWorksheetShowList",viewList:qn,controls:dt.props.worksheetControls,sheetSwitchPermit:qt,toView:function(){return(0,Ee.T8)(rt(Ct))},onCopyView:dt.handleCopyView,updateAdvancedSetting:dt.updateAdvancedSetting,onRemoveView:dt.handleRemoveView,updateViewName:dt.updateViewName,handleSortEnd:dt.handleSortEnd,onOpenView:dt.handleOpenView,onShare:dt.props.onShare,onExport:dt.props.onExport,onExportAttachment:dt.props.onExportAttachment})})),Vt&&!!qn.filter(function(Ct){return a().get(Ct,"advancedSetting.showhide")==="hide"}).filter(function(Ct){return!zt||Ct.name.includes(a().trim(zt))}).length&&te.createElement("div",{className:"drawerWorksheetHiddenListTitle Gray_9e"},_l("\u9690\u85CF\u7684\u89C6\u56FE")),Vt&&te.createElement(Zn,{disabled:!Vt,distance:10,onSortEnd:function(mt){var vt=mt.newIndex,Xt=mt.oldIndex;if(vt!==Xt){var bn=qn.filter(function(Rn){return a().get(Rn,"advancedSetting.showhide")==="hide"}),pn={};pn.newIndex=a().findIndex(qn,function(Rn){return Rn.viewId===bn[vt].viewId}),pn.oldIndex=a().findIndex(qn,function(Rn){return Rn.viewId===bn[Xt].viewId}),dt.handleSortEnd(pn)}},type:"drawerWorksheetHiddenList"},qn.filter(function(Ct){return a().get(Ct,"advancedSetting.showhide")==="hide"}).filter(function(Ct){return!zt||Ct.name.includes(zt)}).map(function(Ct,mt){return te.createElement(Vn,{disabled:!Vt,isCharge:Vt,isLock:dt.props.isLock,lockAxis:"y",currentViewId:In,projectId:a().get(dt.props,"worksheetInfo.projectId"),item:Ct,appId:dt.props.appId,key:"drawerWorksheetHiddenList-"+Ct.viewId,index:mt,style:{zIndex:999999},type:"drawerWorksheetHiddenList",viewList:qn,controls:dt.props.worksheetControls,sheetSwitchPermit:qt,toView:function(){return(0,Ee.T8)(rt(Ct))},onCopyView:dt.handleCopyView,updateAdvancedSetting:dt.updateAdvancedSetting,onRemoveView:dt.handleRemoveView,updateViewName:dt.updateViewName,handleSortEnd:dt.handleSortEnd,onOpenView:dt.handleOpenView,onShare:dt.props.onShare,onExport:dt.props.onExport,onExportAttachment:dt.props.onExportAttachment})}))))),Vt&&!Qe&&te.createElement(N.Z,{action:["click"],popupAlign:{points:["tl","bl"],offset:[-6,4]},popupVisible:Rt,onPopupVisibleChange:function(mt){return dt.setState({addMenuVisible:mt})},popup:te.createElement(Ie,{canAddCustomView:!0,projectId:a().get(this.props,"worksheetInfo.projectId"),onClick:this.handleAdd,popupVisible:Rt,appId:this.props.appId})},te.createElement(Ce.Z,{popupPlacement:"bottom",text:te.createElement("span",null,_l("\u6DFB\u52A0\u89C6\u56FE"))},te.createElement(Ne.Z,{icon:"add",className:r()("Font20 Gray_75 pointer addViewIcon mLeft8 hoverGray",{menuVisible:Rt})}))),te.createElement("div",{className:"valignWrapper flex workSheetViewsWrapper",ref:function(mt){dt.scrollWraperEl=mt}},te.createElement(tn,{axis:"x",lockAxis:"x",disabled:!Vt,helperClass:"workSheetSortableViewItem",distance:5,list:qn,currentViewId:In,currentView:a().find(qn,{viewId:In})||{},changeViewDisplayType:Yt,onSortEnd:this.handleSortEnd,onRemoveView:this.handleRemoveView,onOpenView:this.handleOpenView,getNavigateUrl:this.props.getNavigateUrl,onCopyView:this.handleCopyView,onShare:this.props.onShare,onExport:this.props.onExport,onExportAttachment:this.props.onExportAttachment,onScroll:this.updateScrollBtnState,updateViewName:this.updateViewName,isCharge:Vt,sheetSwitchPermit:qt,updateAdvancedSetting:this.updateAdvancedSetting,isLock:this.props.isLock,appId:this.props.appId,controls:this.props.worksheetControls,projectId:a().get(this.props,"worksheetInfo.projectId")})),jt?te.createElement("div",{className:"Width95"},te.createElement(Ne.Z,{icon:"arrow-left-tip",className:r()("Gray_9e pointer Font15",{Alpha3:rn==="left"}),onClick:function(){return dt.handleScrollPosition(0)}}),te.createElement(Ne.Z,{icon:"arrow-right-tip",className:r()("Gray_9e pointer Font15",{Alpha3:rn==="right"}),onClick:function(){return dt.handleScrollPosition(1)}})):null)}}]),cn}(te.Component),Dt.defaultProps={viewList:[]},vn))||tt},53327:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>T});var h=t(88239),Te=t(60954),C=t.n(Te),Ce=t(12386),Ne=t(33867),j=t(42723),L=t(85105),I=t.n(L),k=t(99663),e=t(22600),oe=t(49135),m=t(93196),y=t(67294),i=t(15742),me,J,T=(J=me=function(te){(0,m.default)(E,te);function E(){var r,R,a,z;(0,k.default)(this,E);for(var N=arguments.length,q=Array(N),K=0;K<N;K++)q[K]=arguments[K];return z=(R=(a=(0,oe.default)(this,(r=E.__proto__||I()(E)).call.apply(r,[this].concat(q))),a),a.state={},R),(0,oe.default)(a,z)}return(0,e.default)(E,[{key:"render",value:function(){var R=this.props,a=R.onClick,z=(0,j.Z)(R,["onClick"]);return y.createElement(Ce.default,(0,h.default)({className:"viewTypeMenuWrap"},z),i.D.filter(function(N){return N.id!=="customize"}).map(function(N){var q=N.icon,K=N.text,ye=N.id,v=N.color,se=N.isNew;return y.createElement(Ce.default.Item,{key:ye,className:"viewTypeItem",onClick:function(){return a(ye)}},y.createElement("div",{className:"valignWrapper"},y.createElement(Ne.Z,{style:{color:v,fontSize:"18px"},icon:q}),y.createElement("span",{className:"viewName"},K)),se&&y.createElement("div",{className:"newIcon"},y.createElement(Ne.Z,{icon:"new",className:"ThemeColor Font20"})))}))}}]),E}(y.Component),me.propTypes={},me.defaultProps={},J)},24568:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>ae});var h=t(8177),Te=t.n(h),C=t(62521),Ce=t(69288),Ne=t(16469),j=t(88902),L=t.n(j),I=t(88239),k=t(88106),e=t(63239),oe=t.n(e),m=t(85105),y=t.n(m),i=t(99663),me=t(22600),J=t(49135),T=t(93196),te=t(67294),E=t(45697),r=t.n(E),R=t(44894),a=t(50533),z=t(22010),N=t(93967),q=t.n(N),K=t(20782),ye=t(15081),v=t(44253),se=t(26358),de=t(24607),U=t(89557),pe=t(15742),Y=t(89499),be=t(86674),Q=t(62232),Le=t(96486),Be=t.n(Le),ke,Ie,he,Re,ue;function we(ve,W,ce,Z,_e){var P={};return Object.keys(Z).forEach(function(xe){P[xe]=Z[xe]}),P.enumerable=!!P.enumerable,P.configurable=!!P.configurable,("value"in P||P.initializer)&&(P.writable=!0),P=ce.slice().reverse().reduce(function(xe,bt){return bt(ve,W,xe)||xe},P),_e&&P.initializer!==void 0&&(P.value=P.initializer?P.initializer.call(_e):void 0,P.initializer=void 0),P.initializer===void 0&&(Object.defineProperty(ve,W,P),P=null),P}var Ee=(he=(ue=Re=function(ve){(0,T.default)(W,ve);function W(){return(0,i.default)(this,W),(0,J.default)(this,(W.__proto__||y()(W)).apply(this,arguments))}return(0,me.default)(W,[{key:"getType",value:function(Z){var _e=Z.type,P=Z.sourceControlType,xe=_e;return _e===30&&(xe=P),xe===38&&(xe=6),xe}},{key:"changeSortType",value:function(Z,_e,P){var xe=this.props.sortByControl;xe({controlId:Z,datatype:P,isAsc:_e})}},{key:"handleColumnWidthLRUSave",value:function(Z,_e){var P=this.props,xe=P.readonly,bt=P.viewId,tt={};try{tt=JSON.parse((0,Y.q2)("WORKSHEET_VIEW_COLUMN_WIDTH",bt))}catch(Dt){}xe||((0,Y.$3)("SHEET_LAYOUT_UPDATE_TIME",bt,new Date().getTime()),(0,Y.$3)("WORKSHEET_VIEW_COLUMN_WIDTH",bt,oe()(Be().assign({},tt,(0,k.default)({},Z,_e)))))}},{key:"changeSort",value:function(Z){var _e=this.props.updateDefaultScrollLeft,P=this.props.control,xe=P.controlId,bt=P.sourceControlType,tt=P.type;this.changeSortType(xe,Z,this.getType({sourceControlType:bt,type:tt})),_e()}},{key:"frozen",value:function(Z){var _e=this.props,P=_e.readonly,xe=_e.viewId,bt=_e.frozenColumn;bt(Z),!P&&((0,Y.$3)("SHEET_LAYOUT_UPDATE_TIME",xe,new Date().getTime()),(0,Y.$3)("WORKSHEET_VIEW_COLUMN_FROZON",xe,Z))}},{key:"updateColumnWidth",value:function(Z){var _e=Z.controlId,P=Z.value,xe=this.props.updateSheetColumnWidths;this.handleColumnWidthLRUSave(_e,P),xe({controlId:_e,value:P})}},{key:"render",value:function(){var Z=this,_e=this.props,P=_e.className,xe=_e.type,bt=xe===void 0?"":xe,tt=_e.worksheetId,Dt=tt===void 0?"":tt,vn=_e.disabled,Fe=_e.count,Bt=_e.style,kt=_e.isLast,Tt=_e.allWorksheetIsSelected,tn=_e.sheetSelectedRows,Vn=tn===void 0?[]:tn,Zn=_e.disabledFunctions,Ot=Zn===void 0?[]:Zn,$t=_e.rowIsSelected,cn=_e.columnIndex,Mn=_e.fixedColumnCount,dt=_e.sheetHiddenColumns,$e=_e.hideColumn,jt=_e.clearHiddenColumn,rn=_e.onBatchEdit,Rt=_e.canBatchEdit,St=Rt===void 0?!0:Rt,zt=_e.onShowFullValue,oa=zt===void 0?function(){}:zt,qn=Be().get(this.context,"config.hideColumnFilter"),In=(0,I.default)({},this.props.control),Vt=(0,Q.fi)(In),Yt=this.getType(In),qt=(0,Y.ir)(Yt,In),rt=Be().includes(pe.uG,In.type)&&(0,de.kM)(In).editable&&St&&!be.x0.filter(function(Ct){return Ct!=="ownerid"}).includes(In.controlId),Qe=Be().flatten(L()(v.Cz).map(function(Ct){return v.Cz[Ct].keys})),ht=Be().includes(Qe,Yt)&&!Be().includes(Ot,"filter")&&!window.hideColumnHeadFilter;In.type===30&&In.strDefault==="10"&&(ht=!1);var Lt=Be().get(In,"advancedSetting.datamask")==="1"&&Be().get(In,"advancedSetting.isdecrypt")==="1";return In=(0,se.BM)(In),te.createElement(U.Z,{disabled:vn,columnIndex:cn,className:P,style:Bt,control:In,showDropdown:!0,isLast:kt,isAsc:this.isAsc,changeSort:this.changeSort,updateSheetColumnWidths:this.updateColumnWidth,renderPopup:function(mt){var vt=mt.closeMenu;return te.createElement(C.Z,{className:"worksheetColumnHeadMenu",style:{width:180},specialFilter:function(bn){return bn===Z.head},onClickAway:vt},qt&&!Vt&&(0,Y.Zv)(Yt,In).map(function(Xt){return te.createElement(Ne.Z,{key:Xt.value,onClick:function(){Z.changeSort(Xt.value===2),vt()}},te.createElement("i",{className:q()("icon",Xt.value===1?"icon-descending-order2":"icon-ascending-order2")}),Xt.text)}),rt&&$t&&te.createElement(Ne.Z,{onClick:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}var bn=Tt?Fe-Vn.length:Vn.length;bn>1e3?Ce.Z.confirm({title:te.createElement("span",{style:{fontWeight:500,lineHeight:"1.5em"}},_l("\u6700\u5927\u652F\u6301\u6279\u91CF\u6267\u884C1000\u884C\u8BB0\u5F55\uFF0C\u662F\u5426\u53EA\u9009\u4E2D\u5E76\u6267\u884C\u524D1000\u884C\u6570\u636E\uFF1F")),onOk:function(){return rn(In)}}):rn(In),vt()}},te.createElement("i",{className:"icon icon-hr_edit"}),_l("\u7F16\u8F91\u9009\u4E2D\u8BB0\u5F55")),ht&&!$t&&!Vt&&!qn&&te.createElement(Ne.Z,{onClick:function(){Y.uY.emit("FILTER_ADD_FROM_COLUMNHEAD"+Dt+bt,In),vt()}},te.createElement("i",{className:"icon icon-worksheet_filter"}),_l("\u7B5B\u9009")),Lt&&te.createElement(Ne.Z,{onClick:oa},te.createElement("i",{className:"icon icon-eye_off"}),_l("\u89E3\u7801")),(qt||ht&&!$t||rt&&$t)&&te.createElement("hr",null),te.createElement(Ne.Z,{onClick:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}$e(In.controlId),vt()}},te.createElement("i",{className:"icon icon-visibility_off"}),_l("\u9690\u85CF")),!!dt.length&&te.createElement(Ne.Z,{onClick:function(){jt(),vt()}},te.createElement("i",{className:"icon icon-eye"}),_l("\u663E\u793A\u6240\u6709\u5217")),cn<11&&Mn!==cn+1&&te.createElement(Ne.Z,{onClick:function(){if(window.isPublicApp){alert(_l("\u9884\u89C8\u6A21\u5F0F\u4E0B\uFF0C\u4E0D\u80FD\u64CD\u4F5C"),3);return}Z.frozen(cn),vt()}},te.createElement("i",{className:"icon icon-task-new-locked"}),_l("\u51BB\u7ED3")),cn===Mn-1&&te.createElement(Ne.Z,{onClick:function(){Z.frozen(0),vt()}},te.createElement("i",{className:"icon icon-task-new-no-locked"}),_l("\u89E3\u51BB")))}})}},{key:"isAsc",get:function(){var Z=this.props,_e=Z.control,P=Z.sortControls,xe=Be().find(P,function(bt){return bt.controlId===_e.controlId});return xe&&xe.isAsc}}]),W}(te.Component),Re.contextType=K.Z,Re.propTypes={rowIsSelected:r().bool,readonly:r().bool,disabledFunctions:r().arrayOf(r().string),sortControls:r().arrayOf(r().shape({})),sheetHiddenColumns:r().arrayOf(r().string),control:r().shape({}),className:r().string,controlId:r().string,viewId:r().string,type:r().number,columnIndex:r().number,fixedColumnCount:r().number,sourceControlType:r().number,hideColumn:r().func,clearHiddenColumn:r().func,frozenColumn:r().func,updateSheetColumnWidths:r().func,onBatchEdit:r().func,sortByControl:r().func},ue),we(he.prototype,"changeSort",[R.Nj],Te()(he.prototype,"changeSort"),he.prototype),we(he.prototype,"updateColumnWidth",[R.Nj],Te()(he.prototype,"updateColumnWidth"),he.prototype),he),b=function(W){return{sheetHiddenColumns:W.sheet.sheetview.sheetViewConfig.sheetHiddenColumns,sortControls:W.sheet.sheetview.sheetFetchParams.sortControls,allWorksheetIsSelected:W.sheet.sheetview.sheetViewConfig.allWorksheetIsSelected,sheetSelectedRows:W.sheet.sheetview.sheetViewConfig.sheetSelectedRows}},le=function(W){return(0,z.DE)({hideColumn:ye.hideColumn,clearHiddenColumn:ye.clearHiddenColumn,frozenColumn:ye.frozenColumn,sortByControl:ye.sortByControl},W)};const ae=(0,a.$j)(b,le)(Ee)},29300:(wn,gt,t)=>{"use strict";t.d(gt,{Z:()=>be});var h=t(8177),Te=t.n(h),C=t(88239),Ce=t(62521),Ne=t(16469),j=t(85105),L=t.n(j),I=t(99663),k=t(22600),e=t(49135),oe=t(93196),m=t(67294),y=t(45697),i=t.n(y),me=t(29314),J=t(44894),T=t(89499),te=t(15405),E=t(33126),r=t(96486),R=t.n(r),a=t(93967),z=t.n(a),N=t(15577),q=function(Le,Be,ke){var Ie=void 0;switch(ke){case T.fm.COMPLETED:Ie=Le.filter(function(he){return!(0,T.hB)(he[Be.controlId])}).length;break;case T.fm.INCOMPLETE:Ie=Le.filter(function(he){return(0,T.hB)(he[Be.controlId])}).length;break;case T.fm.SUM:Ie=R().sum(Le.map(function(he){return Number(he[Be.controlId])}).filter(function(he){return R().isNumber(he)&&!R().isNaN(he)}));break;case T.fm.AVERAGE:Ie=R().sum(Le.map(function(he){return Number(he[Be.controlId])}).filter(function(he){return R().isNumber(he)&&!R().isNaN(he)}))/Le.length;break;case T.fm.MAXIMUM:Ie=R().max(Le.map(function(he){return Number(he[Be.controlId])}).filter(function(he){return R().isNumber(he)&&!R().isNaN(he)}));break;case T.fm.MINIMUM:Ie=R().min(Le.map(function(he){return Number(he[Be.controlId])}).filter(function(he){return R().isNumber(he)&&!R().isNaN(he)}));break}return Ie};function K(Q){var Le=Q.control,Be=Q.type,ke=Q.summaryType,Ie=Q.summaryValue,he=Q.rows,Re=Q.selectedIds,ue=Q.allWorksheetIsSelected,we=R().get(Le,"advancedSetting.numshow")==="1",Ee=void 0,b=Ie;if(ke&&(Ee=(0,T.I7)(ke),he.length&&Re.length&&!ue&&(b=q(he.filter(function(ve){return R().includes(Re,ve.rowid)}),Le,ke)),!R().isUndefined(b))){if(R().includes([3,4,5,6],ke)){b=(0,N.FH)(b*(we?100:1),Le.dot);var le=b.indexOf(".")>-1?/(\d{1,3})(?=(?:\d{3})+\.)/g:/(\d{1,3})(?=(?:\d{3})+$)/g;b=b.replace(le,"$1,")}we&&(b=b+"%")}var ae=(0,T.pr)(Le);return m.createElement("div",{className:z()("flexRow",{hide:Be===25,empty:!ke})},m.createElement("span",{className:"summaryName"},Ee,"\uFF1A"),ae&&m.createElement("div",{className:"flex"}),m.createElement("div",{className:"summaryValue",title:b},typeof b>"u"||ke===0?"-":b),!ae&&m.createElement("div",{className:"flex"}),m.createElement("i",{className:"iconArrow icon icon-arrow-down-border"}))}K.propTypes={control:(0,y.shape)({}),type:y.number,summaryType:y.number,summaryValue:y.string,rows:(0,y.arrayOf)((0,y.shape)({})),selectedIds:(0,y.arrayOf)(y.string),allWorksheetIsSelected:y.bool};var ye,v,se,de,U;function pe(Q,Le,Be,ke,Ie){var he={};return Object.keys(ke).forEach(function(Re){he[Re]=ke[Re]}),he.enumerable=!!he.enumerable,he.configurable=!!he.configurable,("value"in he||he.initializer)&&(he.writable=!0),he=Be.slice().reverse().reduce(function(Re,ue){return ue(Q,Le,Re)||Re},he),Ie&&he.initializer!==void 0&&(he.value=he.initializer?he.initializer.call(Ie):void 0,he.initializer=void 0),he.initializer===void 0&&(Object.defineProperty(Q,Le,he),he=null),he}var Y=(0,E.Z)(te.Z),be=(se=(U=de=function(Q){(0,oe.default)(Le,Q);function Le(Be){(0,I.default)(this,Le);var ke=(0,e.default)(this,(Le.__proto__||L()(Le)).call(this,Be));return ke.state={menuVisible:!1},ke}return(0,k.default)(Le,[{key:"componentWillUnmount",value:function(){this.added&&T.uY.removeListener("MDTABLE_SCROLL",this.hideMenu)}},{key:"addListener",value:function(){this.added||(this.added=!0,T.uY.addListener("MDTABLE_SCROLL",this.hideMenu))}},{key:"handleChange",value:function(ke){var Ie=this.props,he=Ie.control,Re=Ie.changeWorksheetSheetViewSummaryType;this.setState({menuVisible:!1}),Re({controlId:he.controlId,value:ke})}},{key:"renderMenu",value:function(){var ke=this,Ie=this.props.control,he=Ie.sourceControlType||Ie.type,Re=(0,T.dS)(he,Ie);return m.createElement(Ce.Z,null,m.createElement("div",{className:"title"},_l("\u9009\u62E9\u7EDF\u8BA1\u65B9\u5F0F")),Re.list.map(function(ue,we){return ue?m.createElement(Ne.Z,{key:we,onClick:function(b){b.stopPropagation(),ke.handleChange(ue.value)}},ue.label):m.createElement("hr",{key:we})}))}},{key:"hideMenu",value:function(){this.setState({menuVisible:!1})}},{key:"render",value:function(){var ke=this,Ie=this.props,he=Ie.style,Re=Ie.control,ue=Ie.summaryType,we=Ie.summaryValue,Ee=Ie.rowHeadOnlyNum,b=Ie.rows,le=Ie.selectedIds,ae=Ie.allWorksheetIsSelected,ve=this.state.menuVisible;if(!Re)return m.createElement("div",{style:he});var W=Re.sourceControlType||Re.type;return R().includes([10010,33,45,47],W)?m.createElement("div",{className:"sheetSummaryInfo disabled",style:he}):W==="summaryhead"?m.createElement("div",{className:"summaryCellHead",style:(0,C.default)({},he,{padding:Ee?"0 12px":"0 24px 0 40px"})},"="):((W===31||Re.type===37&&Re.enumDefault2===6)&&(W=6),m.createElement(Y,{className:"sheetSummaryInfo ellipsis",onClickAwayExceptions:[".summaryCellMenu"],style:he,onClick:function(){ke.setState({menuVisible:!0})},onClickAway:function(){return ke.setState({menuVisible:!1})}},m.createElement(me.Z,{style:he,action:["click"],popupVisible:ve,popupClassName:"summaryCellMenu",popup:this.renderMenu(),popupAlign:{points:["bl","tl"],offset:[0,0]},onPopupVisibleChange:function(Z){Z&&ke.addListener()}},m.createElement(K,{control:Re,type:W,summaryType:ue,summaryValue:we,rows:b,selectedIds:le,allWorksheetIsSelected:ae}))))}}]),Le}(m.Component),de.propTypes={style:i().shape({}),control:i().shape({}),summaryType:i().number,summaryValue:i().number,changeWorksheetSheetViewSummaryType:i().func},U),pe(se.prototype,"handleChange",[J.Nj],Te()(se.prototype,"handleChange"),se.prototype),pe(se.prototype,"hideMenu",[J.Nj],Te()(se.prototype,"hideMenu"),se.prototype),se)},12498:(wn,gt,t)=>{wn.exports=t.p+"static/flow.176b5274f8f5c55d467b5809432ec15a.png"},55927:(wn,gt,t)=>{wn.exports=t.p+"static/systemFields.5590bd3c0a65b1114353ba8c3ce06e29.png"},59284:wn=>{wn.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAAAXNSR0IArs4c6QAAJ9ZJREFUeAHtnQmYHkWZxycTksnkvg0RllyQkIMkgCHcBBUh4KqoiKKPHB4gut6r4vGwi8eqLDyrrooiIjwKCuoDHrDgwSGRUyAQYsIVroQAuTPJTJJJ9lfDVDLHd/RR3V3d/f+e55v6+nrrrV91/+et6urqPg36iEAPAlu2bNmnT58+E3bu3Dl6165dIxobG0eYlN2Gm5RtZnkIaTNpM+kAtg3o8ntgp8ktrGtl+1aWW+1v0q2s20S6jnQd2zpS8ltvlvm+zLoVAwcOfKHTjhIR6CDQRxzKSaCtrW3ajh07DkAcpiAck6AwkXQyy1N9IoJP/8SnJ/HpadKnWH6ib9++ywcMGLDMJz/lSzoEJFjpcM4kFy7uPgjT5Pb29hk4MIPlmSbtFKWmTJxyl2krpv5JmR4lXUKZlhAJPoqQreD3LnfZyJJPBCRYPtVGTF+4ePu3trbOo2l1DKaOYfkILt4hMc3m6nDKvIEy/430DgTszubm5vtY3pGrQsjZqgQkWFXR5GPD1q1bX49ALeACPYoL89h8eJ2ul7D5sxExBOw2BOy2dHNXbi4JSLBc0kzBFhHUAQjUiVyEJ5LdcXybU8i2SFlspjB/5XsTAnYzAvZ0kQpX9LJIsDyvYYRpAHft3oCbJ/N9E9+JnrucK/fgu5zo6xacvmnQoEF/zJXzJXRWguVhpXMRDaap92bSt+OeiaQGeehm4VyC90YK9Xsir18Ted2MkG0pXCFzXiAJlicVyMUyoqWl5a1cJEakTESV97t4npCN7IYRKyNa1yNevyM1TUl9MiYgwcq4AuiTegPDDj6MG2/h2y9jd5R9ZQJm0Ot1RF4/ZDDrosq7aG0aBCRYaVDukQcn/0iiqXP4r/0hNk3psVmLHhOg7h6h3i5DuK4i3eSxq4V0TYKVYrXSL3UU0dT5nOinp5itskqGgBm4eg0C9p3Bgwc/lEwWstqTgASrJxHHy5zQfRGqd5B+BtOHOjYvcx4QoG5v45/Qxdxl/IMH7hTaBQlWQtXLSTwQofoQ6cfJYkJC2cisRwSo66UI13/TXLyadJtHrhXGFQmW46rcvHnzOEyaaOqDnLRDHZuXuRwQQLhWU/ffQ7i+S7ohBy7nxkUJlqOq4iQdS0f6BZyg5o6fmW5Fn5IT4JxYw53FrzEs4n85LxRxOTgfJFgxIXYK1ec5Ic/FlB6TicmzoIevQLi+zEwSP+c80UwSMSpZghURXqdQfY4T8DxMSKgicizZYQ9x3nyOu4rmUSB9IhCQYEWARj+Viai+wqESqgj8yn4IovWnfv36/VtTU9PSsrMIW34JVghi3PU7lnFUP0as9g9xmHYVgUoEdrLySsTrAiKu1ZV20LreBCRYvZn0WkNn+t6s/C5f85yfPiLgkkALxr7FHcVv84/QzH2vTw0CEqwacMwmc+eP5Et81fwzQPRJisAqoq3PE21dlVQGRbArwapSizT/jmGivCvYPLnKLlotAs4JIFq38ZKNsxgKscK58QIYbCxAGZwWgRNmDJ3qVyNWt2NYYuWUrozVI0Cz8DjOvUeZtPFjnIsKKHoAE5BOIObk4CQxj9J8g5PGvINPHxHImsBdRFtnMn7riawd8SV/CRY1wZxUU7n79zN+HuZLxcgPEbAE+Af6aTrlL7HLZU5LL1h0qps5qS7la99WXObzQWX3l8A9jJY/vex9W6Xtw6LpZ6Yk/i3n52V8JVb+Xqjy7FUCh9G3tYRz9vwyAyllhMUdwKOo/F9R8WZ8lT4ikCsC/LM182+dwfxbK3PluANnSxdh8R/qIsTqTthJrBycQDKRPgFzJxHRWso/3jPSzz3bHEsTYVHBoxCrX1HZx2eLXLmLgDsCnNdXE2l9gPO6FNPXlEKwGFc1mwr9PafJPu5OFVkSAW8IPIAnb0a4VnnjUUKOFL5JyNiqdyFW98BPYpXQSSSzmRM4hEjrYc71+Zl7krADhRUsKnAvmoDfIb0WhnopacInksxnS4B/ymM41+/gnP9Itp4km3shm4RU3DAq7kYq8Zhk8cm6CHhJ4Aqah+d46VlMpwonWNw5+RdGrd+KWB0Qk40OF4HcEuCf9p8QrVO5Dgr1stdCCRZRlWnL30wljc7tmSbHRcARAa6FJZh6A1PWvOjIZOZmCtOHxZ3AN0HzbxKrzM8pOeAJAa6FGXzva2trm+GJS7HdKIRgEVmZdwD+ERp6vVbsU0IGCkZgn+3bt/+drpJji1Cu3AsWYvWfVMSP+Oa+LEU4oVQG/wjwz3wIT3fcyrCHt/nnXTiPct2HhVh9n+KeF67I2lsESkugHfF6L1PVmKE+ufzkUrDoTDST7V0O8bNzSV1Oi0B2BLh8dp2Z17njc9eMAnYjkdXV1LfEKruTXjnnlwBBVp8r+Yf/0TwWIVcRFmK1F6CvB/Rb8ghbPouATwS4nj5LpHWxTz7V8yU3gtUpVr+mQP9ar1DaLgIiEIwA0dYn6NP6n2B7Z79XLgRLYpX9iSIPikuA6+ssIq0r81BC7wVLYpWH00g+5pzAzs67h9f4Xg6vBQux6kuf1W+AqGag72eS/Ms7gXYK8FaePzTzxnn78fYuYadYmfEiEitvTx85ViACfSnLrxkRf5zPZfJWsIiszOj1d/gMT76JQMEI9GdE/O8ZNnSor+XyUrB4kPnfAaZxVr6eNfKryAQG0bq5mZcLT/axkN71YaHupwDqRr7e+eZjBconEUiIwLMMdziYzvg1CdmPZNYrUegMRe+gJM2RSqODREAEXBJ4ENE6GtFqcWk0ji1vmoT0We1DKHoThZFYxalRHSsC7gjMJYi4ketyL3cm41nyQrAAMpjOvltQcs0UGq8+dbQIOCXANXk8onWFU6MxjHkhWERX1wLmwBjl0KEiIAIJEeDafB+idV5C5kOZzbwPC7H6JBHWJaG81s4iIAJpE9hOhoczsNS8tDWzT6aChVjNR6z+RunNoDV9REAE/CbwAp3wM4m41mflZmZNQoRqLP1WN1BwiVVWta98RSAcgdcSZPySazezQCcTwaLAjRT8BpR6bDhe2lsERCBjAidw7X4lKx8yESyeV/oaBZ6fVaGVrwiIQCwCF2b1zGHqoR0FPYqm4B3gSj3vWFWkg0VABLoSWEV/1jRaSRu7rkz6d6oRFk3B0YjVdRRKYpV0zcq+CCRLYG+GOpi3VqX6SVWwKKCZLmZcqiVUZiIgAokQILo6g2s61fcrpCZYdNR9kgK+PhFyMioCIpAJAVpNP0W09k4r81SaZkwXMwexuodC9U+rYMpHBEQgHQKI1m3MCb8gjdzSirB+TmEkVmnUqPIQgZQJEIwcR5R1bhrZJi5YRFefp0DT0yiM8hABEciMwLfp9nlt0rkn2iRkCMNE7goupRBNSRdE9kVABLIlQNPwVpqGJyTpRaIRVnt7u5mWQmKVZA3Ktgh4QoCW1BsJUs5I0p3EIizCw9NRXO/fc5YkXNkWgbIR4Jpfw4wOUxGvRKZWTiTCwunhNAW/V7bKUnlFoOwEEKpRdMAndu0nIlhEV181jpe98lR+ESgjAa7907nZlkhflvMmYVtb27QdO3Y8RkU5t13GyleZRSCnBJ7ofNbQvFHa2cd5hIVYXY53EitnVSRDIpBLAlPogP+oa8+dCgtNwbfTf3W9aydlTwREIH8E0IKNdMBPoIm4zpX3ziIsnGvie6krx2RHBEQg3wQQqqGmP9tlKZwJFo59Fsf2demcbImACOSewIfp13b2pIuTJiF3BMahpk+BVi9Bzf35pQKIgHMCt9A0fJMLq04iLMTqizgjsXJRI7IhAsUjYOaBdzIleuwIqzO6egbGmo2heCeaSiQCTgjQv+1kCprYERbR1YWUSGLlpFplRASKSQCdOI5hDgvili5WhEWYty/K+TRO6N2CcWtCx4tA8QncTV/W4XGKGSvCQqwuJHOJVZwa0LEiUB4C8+lCemOc4kaOsFpbWycxfcxyMpdgxakBHSsC5SIQK8qKHGEhVhfAWWJVrpNNpRWBuATm05d1XFQjkQSLpuAYMnxf1Ex1nAiIQHkJMPXUp6KWPpJgoZCfIUPdGYxKXceJQLkJnGK6lKIgCC1YRFdDUMjzomSmY0RABEQAAn3oUjJBT+hPaMFiNsGPMKZiSOicdIAIiIAI7CHwfoKfkXsWg/0KJVhkYJqBnw5mWnuJgAiIQFUCAwl+Plx1a5UNoQSLDM4gujId7vqIgAiIQCwCaMnHwhoIJVhkoL6rsIS1vwiIQDUCe/O0zNurbay0PrBgMafNDAy8rpIRrRMBERCBKAToZvpQmOMCCxZztZ8fxrD2FQEREIEABMzLV/cLsF/HLoEECxU0b29+f1Cj2k8EREAEAhLowzCpDwTctyGQYNHONK+fHhjUqPYTAREQgRAEziEoCqRFgXYi41DtzBCOalcREAERMJ3vpwTBUFewzItRMXRYEGPaRwREQAQiEjg7yHF1BYvO9ncHMaR9REAERCAGgZNoFtZ9gqauYOHAe2I4oUNFQAREIAiB/gxMP7XejjUFi9kBZ2NgSj0j2i4CIiACcQkwMP2d9WzUFCwMvKueAW0XAREQAUcE3livWVhTsHDivY4ckRkREAERqEfANAtrPqpTVbA48BCs69Xz9RBruwiIgDMCtOpOq2WsqmBxUN0OsFqGtU0EREAEIhAwdwuHVTuulmCdVO0grRcBERCBpAjwbOEJ1WxXFCwUzsx5NbfaQVovAiIgAkkRQH8WVrNdUbDovzqx2gFaLwIiIAJJEkCwTq5mv6JgsbMEqxoxrRcBEUiUAB3vYwiaDq6USS/BQt3M26CrKlwlI1onAiIgAo4JVGwW9hIsnpo+FIWr2kvv2CmZEwEREIFKBIIJFke+sdLRWicCIiACKRI4nNZer8CpV4SFQ8ek6JSyEgEREIGKBGjtHdlzQzfBQtEa+R7Rcycti0ARCTB1UsOGDRuKWLSilKm2YNEzP4v+q7pz0hSFhspRXgLbt29vWLduXcO2bds6Uv5RlxeGpyWnTmoLFmJ1lKe+yy0RcEbAiNX69et32zORllmWaO1G4sUP9GgeddKvqzM9m4S9FK3rzvotAnkn0FOsbHkkWpaEV2kzj+l0e+Kmm2ChaMd65a6cEQGHBKqJlc1ComVJeJV2a/XtFix65F+Lm+O9clXOiIAjAvXEymYj0bIk/EhpEh7e1ZPdgsUGvYa+Kxn9LgyBoGJlCyzRsiS8SLs9orNbsHDtIC/ckxMi4JBAWLGyWUu0LInM00kEU4OsF10Fy7xwQh8RKAyBqGJlAUi0LIlsUzreZ1gPJFiWhNJCEYgrVhaGRMuSyC4lwpplc+8QLFYMZMVku1KpCOSZgCuxsgwkWpZENmkvwSLkmpONK8pVBNwScC1W1juJliWRSdorwlL/VSb1oExdEkhKrKyPEi1LIvV0d0Blm4RTU3dBGYqAQwJJi5V1VaJlSaSXMqB9JM3CESbHDsFixaT0sldOIuCWQFpiZb2WaFkS6aUMbO/QKBthTUwva+UkAu4IpC1W1nOJliWRTkpQNcHkZCOs/c2CPiKQJwJZiZVlJNGyJFJJJ5hczIR95h2ETWZBHxHIC4GsxcpykmhZEsmm6NQEk0MjQxrUHEyWtaw7JuCLWNliSbQsiUTTCca6aRJKsAwJfXJBwDexstAkWpZEMunuCGvnzp37JZOFrIqAWwK+ipUtpUTLkkgk7dApE2GNTcS8jIqAQwK+i5UtqkTLknCbcpdwCFHWwEZ+jHZrWtZEwC2BvIiVLbVEy5Jwm7a2to42EdYot2ZlTQTcEcibWNmSS7QsCXcp3VcdgqUIyx1TWXJIwIhVnt8bKNFyeDJgiibhKDMOSxGWW66y5oCAFSvOTwfWsjMh0XLHvrGxURGWO5yy5IpAUcTK8pBoWRKx09Gm073jKejYpmRABBwQKJpYWSQSLUsiekq0PbLjWcLoJnSkCLgjUFSxsoQkWpZE5HSUBCskO+5UNJgLSx+3BIouVpaWRMuSiJQOlWCF4GbFyqTbtm0zdy1CHK1dqxEoi1jZ8ku0LInQ6TAJVkBmVqzs7kaszIUm0bJEoqVlEytLSaJlSQRPudYUYQXB1VOs7DESLUsiWlpWsbK0JFqWRLCUG4SKsOqhqiZW9jiJliURLi27WFlaEi1Lon6qCKsOo3piZQ+XaFkSwVKJVXdOEq3uPGosKcKqBieoWNnjJVqWRO1UYlWZj0SrMpeua2kSqg+rKxD7O6xY2eMkWpZE5VRiVZmLXSvRsiSqpgPMXcJtVTeXcENUsbKoJFqWRPdUYtWdR7UliVY1Mh3rNxvB0ijITkZxxcqilmhZEq+mEqvuPOotSbQqE+K62mpma5BgwceVWFnUEq1XSUis7BkRLpVo9eZFH9ZWRVhwcS1WFnXZRUtiZc+EaKlEqzs3rqdWM1tDqSOspMTKoi6raEms7BkQL5Vo7eFnI6y2PavK9StpsbI0jWiZE8+kZfhIrNzWskRrN8+OJuHG3Ysl+pGWWFmkJr8yiJbEyta421Si1TFFcqvpdF/vFq3/1tIWK0uk6KIlsbI1nUxadtHqaBLyZ10yeP20mpVYWRpFFS2Jla3hZNOSi1ZHk3BDsoj9sZ61WFkSRRMtiZWt2XTSEovWK6VpEvoiVvaULopoSaxsjaabllS0VplhDWvTRZ1+br6JlSWQd9GSWNmazCYtoWi9aAaOvpgN7nRy9VWsbOnzKloSK1uD2aYlE61VRrBWZos8udx9Fytb8ryJlsTK1pwfaVlEi9ZgR4RVSMHKi1jZUz4voiWxsjXmV1oG0UKwVplO98IJVt7Eyp76vouWxMrWlJ9p0UVrwIABKxsHDRq0GvyFeWYkr2JlLwFfRUtiZWvI77SookVgtZYIa4e5S2jE6nm/qyGYd3kXK1tK30RLYmVrJh9pQUVrlaFvOt3NQ7lPmjTPn6KIla0DX0RLYmVrJF9p0USLwOoFUwMdgsVCrgWraGJlL42sRUtiZWsin2nBRGuZqQUbYT2RzypJbvI9X3hkJVoSK1/OgHh+FEi0HjMkOgSrsbExl4JV1Miq5ymatmhJrHrWQL6XiyBaaNQeweKCyJ1glUWs7KWSlmhJrCzxYqV5Fy2GNCw1NdIRYTG0YXmeqqdsYmXrJmnRklhZ0sVM8ypa3BRcRz/7y6ZWbKf7Fn4/nYdqKqtY2bpJSrQkVpZwsdOcitYjtlY6BKtzYbFd6WtadrGy9eJatCRWlmw50ryJFtFVR3PQ1E5uBEti1f1iciVaEqvuXMuylCfRQrA6OtxN3ewWLFZ6G2FJrCpfRnFFS2JVmWtZ1uZFtOwdQlMvuwWLlV4KlsSq9uUTVbQkVrW5lmVrHkSrqanpQVsfuwWL24bmTmGL3eBDKrEKVgthRUtiFYxrWfbyWbS4Q/hPWn9rbF3sFiyzgo332A1ZpxKrcDUQVLQkVuG4lmVvX0ULsbqrax10Eyw2Luq6MavfEqto5OuJlsQqGteyHOWpaHXTpG6CRYTVTc2yqCiJVTzq1URLYhWPa1mO9k20+vbt202T+nStCARr6JYtWzJ7T6HEqmttxPvNTZSGvfbaq4GouUFiFY9lGY82587w4cM7zp+syo8erRk8ePDorvl3i7A4uTey06Ndd0jrt8TKLWkbaUms3HItizUfIq2e/VeGfTfBMivY6XaTpvmRWCVDW2KVDNeyWM1atCp1UVUSrL+kWSESq2Rot7e3N7S0tJg7v8lkIKulIJClaNF/1a3D3QDv1odlVnCCD6Mfa735nfRHYpUMYStWyViX1TISyKJPi1lkeulTpQjLdLrfl3SlSKySISyxSoZr2a2mHWkRON1aiXkvwerc6U+Vdna1TmLlimR3OxKr7jy05JZAmqLFXe6bK3lfUbDYOTHBklhVqob46yRW8RnKQn0CaYkW/Vf/V8mbXm1EsxPhWH86bF/hjuGQSgdFXSexikqu9nESq9p8tNU9gYT7tJ6n/2rfSl5XjLAQqm18f1vpgKjrJFZRydU+TmJVm4+2JkMg4Ujrj9W8rihYnTtfX+2gsOslVmGJBdtfYhWMk/ZKhkBSokUL7zfVPK7YJDQ7u2oWSqyqoY+3XmIVj5+OdkfAZfMQ3dlEc3AELbz2Sh5WjbBMs5ADbqx0UNB1EqugpMLtJ7EKx0t7J0vAZaSF7lxXTaxMKaoKltnIgb80aZSPxCoKtfrHSKzqM9Ie6RNwJVpEWNfV8r5qk9AetHnz5rUI1wi7HCSVWAWhFH4fiVV4ZjoiXQJxmoeI1TpmZxhZy+OaEZY5ELH6VS0DPbdJrHoScbMssXLDUVaSJRAn0kJrrq3nXV3BYhDpz+sZsdslVpaE21Ri5ZanrCVLIKpoIVhX1fOsbpPQGGAQ6bMkFQdy2QwkVpaE21Ri5ZanrKVHIGTz8GnuDk6q513dCMsYQPlqRlkSq3qYo22XWEXjpqP8IBAy0vppEK8DCRbNwiuqGZNYVSMTb73EKh4/He0HgaCihcZcHcTjQILFOwsfpwf/zp4GJVY9ibhZlli54SgrfhCoJ1poy5+bm5tXBPE2kGB1GvpxV4MSq6403P2WWLljKUv+EKglWkRXlwf1NFCnuzGGCjbR+b6a/qxhEqugeMPtJ7EKx0t7549Az454dGUDne1j0JXtQUoTOMLCYBvfqyVWQbCG30diFZ6ZjsgfgQqR1pVBxcqUNnCEZXZ++eWXD2ltbb3f/NbHLQH+05go1q3RBK0ZgTX/vPQRgSgEzLluzp+RI0ceMmbMmH8EtRFKsIzRRYsWrd+6deuwoBloPxEQARGoRICm4Nr58+ePqrSt2rrATUJrYODAgd+1v5WKgAiIQFQCPDf4zbDHhhas5cuXX9jU1NQaNiPtLwIiIAKWQP/+/dtmzpz5LbscNA0tWKeddlr7kCFDao58D5q59hMBESgnAaKrQANFe9IJLVjGAH1Yn+KtFupx7UlTyyIgAnUJGO1g7NUn6u5YYYdIgkVH2cahQ4feUsGeVomACIhATQJox82zZ89uqblTlY2RBMvY4pbk2ahkfu7DVwGg1SIgAukRYODoTvrAz4maY2TBOvTQQ1cNGzYs8VfaRy2YjhMBEfCPANHVohkzZrwY1bPIgmUyRCnPUpQVFb2OE4FyETBagWacHafUsQQLpXyM3v5FcRzQsSIgAuUggFbcOX369MfjlDaWYJmMeQ7oPbpjGKcKdKwIFJ+A0Yi2trZ3xy1pbMGiL+tZlDPW+wvjFkLHi4AI+E0AjfjlUUcdtTKul7EFyziwadOms+j93xHXGR0vAiJQPAJow/aXXnrpLBclcyJYCxYsWI+C6hlDFzUiGyJQMAI8f3zpwoUL21wUK/RsDbUyvfPOOzdt27ZtcK19tE0ERKA8BHhmcNPRRx891FWJnURY1hnGWEQabm+PVyoCIlAsArS8znVZIqcRlnHs3nvvXUaf1gEunZQtERCB/BFgkoTH5s2bN8Ol504jLOPY8OHDT9IwB5dVJFsikD8C5hEcJug7ybXnzgXrgAMOeArR+oVrR2VPBEQgPwRGjBjxYwaWP+vaY+dNQuMg8zU33n333eu3bNkyxLXDsicCIuA3Ad5juumII44YzqBy51NQOY+wDErjKO1XJ+Mu/K4aeScCItCVANf+Ljraz0hCrEw+iURYtgB0wD9KB7zTTjdrW6kIiIB/BBCrBw477LBDk/IskQjLOsuT2Seazje7rFQERKC4BLjZ1s73zUmWMFHBYlbB5+mA/2GSBZBtERABPwgwDvNiM09ekt4k2iS0jt9zzz0rN2/evLddVioCIlAsAgxheJ6p0/dNulSJRljWeZqGx5lw0S4rFQERKA4Bc23zvOCxaZQoFcGaM2fOcsLFC9MokPIQARFIlwBi9aWDDjroqTRyTaVJaAvC2KwlLS0t0+2yUhEQgXwToCm4mKbg7LRKkUqEZQvD2IxjzBtf7bJSERCB/BLo169fG+8oTaUpaCmlKliMz1jDm3beZQaXWQeUioAI5I+AuYYZHH6qmQsvTe9TFSxTMNq6N/CckZ41TLOWlZcIOCbANXzl3Llz/+jYbF1zqfZhdfVm8eLFqxhUOq7rurC/GUXfwHCJsId17M9/hwbzzeKzffv2hpdffjlW1uPGxUIXK+81a9Y0mDKE+XCCNzQ3N4c5xNm+NFsa1q1b58Te+PHjndiJYsRw50UOUQ7tdgyj0WOd+9T9i4yxzGSY0l7dSpLiAiHlHAaVruJByciiyUPWkQXLXDyvec1rUizxnqyM0MYRLN7v1rD33pmcLx2FWL9+fWjBonO2YcyYMXsgpPjLXOiuBGv06NEN3MZP0fs9WZnzxpVgRf2H19rauguec/Z4le6v1JuEtnizZs1azUl0cnu7hmdZJkpFwGcC5lrlml1ort2s/MxMsEyBmS/nprVr134/q8IrXxEQgeAEEKuLuWZvDn6E+z0zFSxTnKlTp55PE+Of7osmiyIgAq4I0Ax8mMk5P+vKXlQ7mQuWcXzSpEkH0j7fErUQOk4ERCA5AlybLfvvv39m/VZdS+aFYBmHGFA6gw5FTUXTtXb0WwQyJmCuyR07dnjzdIo3gsVdrxVMqXyYuQWtjwiIQPYEzB1BHqWbN3ny5Gez9+ZVD7wRLOMOYO7nRawf0Z1DX04P+VFWAuYaJHg4Y8qUKQ/4xMArwTJgJk6c+AM64b8h0fLpNJEvZSLQOXzhIgKIa3wrt3eCZQDRwXcBzcNbfYMlf0SgDARoBl7LHcGv+FjWyKPM0yjMk08+eRft6COq5WUey4n6aI4ZeW0eUcjiQ7M39sjrqCOVXZTXjBwP+2gO86Fl9mgO51DDhg0bXBS9YezYseatUE5shTViRuubcyfux5z31c59ngD5G3ftj46bR1LHZ0M+RGkeeuihv3CBLAhxiHYVARGIQGDkyJF/5YHm4yMcmtoh3guWIXH//fc/xH/I1CYJS42+MhIBTwjwXO8/DuHjiTtV3ciFYPGQcx9Ea/nGjRunVC2JNoiACEQiQPPw8Xnz5k3Nwzx1Xna696RuQNJXdaB5M0fPbVoWARGIToC+xSefeeaZA/MgVqaUuYiwbHUsWrSoGbBmgOlYu06pCIhANAIEACsZa7Ufs4buiGYh/aNyJVgGD03DYdwpeRzQ2UyulH4dKUcRcE6AN92sZk72Sbz4NFfP8OZOsEzNPf74403c4l3KQ5kTndekDIpAwQkw0+6TzAA7g/GO8acvTZlVLgXLMnrggQf+waj4uXZZqQiIQG0C3A28j5uB82rv5e/WXHS6V8MH+IOZdvematu1XgREYA8BrpXf5lmsTElyLVimALyFZyEzPVxlfusjAiLQm4C5A8g18hOulVN7b83XmtwLlsE9ffr09/OoyiXm5Qz6iIAI7CFgrgletvJfXCMf2LM2v79y3YfVE/vSpUvf/9JLL13BhGNSrp5wtFw6ArxGbydv+Xkf87AX5j2ghRIsc0Y+/PDDx9MRfzOi1a90Z6gKLAKdBBCr7dwNfMPBBx98R5GgFE6wTOXcdddd+9Fuv09jtYp0qqosQQkw48JqBOt1PG7zXNBj8rJfIZtORx555DPPP//83jx2cFdeKkJ+ioALApzzt3Puv7aIYmX4FDLC6lrxTE9zEU3ELzKLYuHL2rXc+l0uAryNeuewYcO+zPQwXy9yyUtxES9evPhYRsXfxERuzUWuTJWtnAQGDBiwlWbg6+mv+nvRCZRCsEwlMnvpMB7neZB5tSYWvVJVvvIQoAm4jNHr83jMZmMZSl0awbKVuWTJkqsY+vDenTt3lq7sloHS/BOgCbhr1KhRl82aNeu8/JcmeAlKedE+8cQTpyNaV3EXUUMfgp8r2tMTAjT/tjGd8TunTZt2oycupeZGKQXL0EWwxr3wwgu3rV27dmpqtJWRCMQkwCwLS4isjt5vv/3WxTSVy8NLK1i2th599NH/4CUXX9LoeEtEqY8EzKh1+qq+Mnv27K/56F9aPpVesAxoHumZxdCHPzOTqSYFTOvMUz6BCdAEXGlGrdNftTTwQQXdUYLVpWIfeeSR73An8XzeuVfIAbVdiqqfOSDAjKA7uQv4rTlz5nwhB+6m4qIEqwfmVatWTVi9evVNNBOn9dikRRFIhQCPlTXQV/UQDy6fsu+++76QSqY5yUSCVaWiaCaeSbT1A+4kDqiyi1aLgHMCzLW+hRHr5zAdzLXOjRfAoASrRiXyPsT+NBN/98orr5zA7xp7apMIxCPAvFW7GKrwWybZexcRVm7eYhOv1OGPlmAFYMZg06N5iesNdMqPCLC7dhGBUAR4kekqviczb9WDoQ4s4c4SrBCVzoPU30S4PkmnvAachuCmXSsT6N+/fxtNwIuYZ73UQxUq06m8VoJVmUvVtc8991wzfVuXMwzidN1NrIpJG2oQYExVO53qP+P9mufyXsDtNXbVph4EJFg9gARdfPHFF8cyWv4ahGsBwiWOQcGVeD+EaheDP2+i+feeyZMnbygxishF14UWGd2rB65cuXIaj/dcS8f8bObcimlNhxeRAA8qN/A4zX183zl+/PhniljGtMokwXJEmlkeZzN266eI11xmgnBkVWbyTMDMqMDAz3uIqs6cNGnSsjyXxRffJViOa4I7ijNoIv6IpuLhmuXUMdycmDPP/dHsu3PQoEFnMaPC0zlxOxduSrASqiYzGwTfH9FBv5DO1b4JZSOzHhHgrt8Onvm7gQ71D5Z1NoWkq0OClTBhBpw2EXVdsnnz5ve1tLQMSTg7mc+AAJHUer4/mTlz5ucY9KmOzATrQIKVINyeplesWHEqfVxfZX75aUxnI/Y9AeVomQeTTf/UgwjVF5ie+JYcuZ5rV3XRZFB9RF2jly1b9j0Gob4F8dKzihnUQdQsec5vMyJ1HX1THyea2hTVjo6LRkCCFY2bk6MQrkbuLp5O1PVZxOsg+ro0rY0Tsm6NEE21c6fvXsTq6/RN/d6tdVkLQ0CCFYZWgvsiXv0ee+yxL/C84pn0d03QSzIShB3AtHkYmTt9j/MKrcvpm7qYaEpPvwfglvQuEqykCUewb15J1tbWdgGd9O/gO1HDIyJAjHCIESmae080NTX9gvn+v7Fw4cK2CGZ0SIIEJFgJwnVhmsirLy+C/Txju04j+ppOupcLu7LxKoHOB5AXs3QNDyFfKi5+E5Bg+V0/vbwj+jqZJuOHeYv1kQjYSI2q74Wo5gqadg1EUS/R1Lsdsbr0wAMPLPzbkmsCydlGCVbOKqyru8wcMZLO+nNpPr4N8ZpJqjuOXQF1/qaJt4UXOTxM5/n1Y8eOvWzcuHEtFXbTqhwQkGDloJKCumje/kN/15l8FyBek/kO5c5j0MMLsZ8ZH0X0tIF0Oc/ymfFRP2UWz6cKUTgVokGCVeCTwAyboPP4IMZ6mceD5jNYdRoiNp7vwLzfhTQd5EROm/k+z7N7j/G9m6beHyZMmFD6V2EV+JSWYBW5cmuVjceFjicSOxLhmks6BTEbT4e+uTvpTac+otRApLSd7zoE6QUipuWsexB//zJ37tz7apVP24pJQBFWMes1cqmIyobyqrP5RGRTEK99EIfxiNkYhG0kv0fwHcryQMRtAL/7mSguZGY7EaBtCFArAtTCdxPftaxbgxi9xPpVRE3P8XsZr7i6PaRt7V5wAv8PM5CWnDL6SJUAAAAASUVORK5CYII="},68640:wn=>{wn.exports="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE1NCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiIHZpZXdCb3g9IjAgMCAyNTYgMTU0IiB3aWR0aD0iMjU2IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSItMi43Nzc3NzglIiB4Mj0iMTAwJSIgeTE9IjMyJSIgeTI9IjY3LjU1NTU1NiUiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iIzIyOThiZCIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzBlZDdiNSIvPjwvbGluZWFyR3JhZGllbnQ+PHBhdGggZD0ibTEyOCAwYy0zNC4xMzMzMzMzIDAtNTUuNDY2NjY2NyAxNy4wNjY2NjY3LTY0IDUxLjIgMTIuOC0xNy4wNjY2NjY3IDI3LjczMzMzMzMtMjMuNDY2NjY2NyA0NC44LTE5LjIgOS43Mzc0ODEgMi40MzQzNzA0IDE2LjY5NzM2MyA5LjQ5ODU0ODEgMjQuNDAxMDY3IDE3LjMxODQgMTIuNTQ5Njg5IDEyLjczODM3MDQgMjcuMDc0MzcgMjcuNDgxNiA1OC43OTg5MzMgMjcuNDgxNiAzNC4xMzMzMzMgMCA1NS40NjY2NjctMTcuMDY2NjY2NyA2NC01MS4yLTEyLjggMTcuMDY2NjY2Ny0yNy43MzMzMzMgMjMuNDY2NjY2Ny00NC44IDE5LjItOS43Mzc0ODEtMi40MzQzNzA0LTE2LjY5NzM2My05LjQ5ODU0ODEtMjQuNDAxMDY3LTE3LjMxODQtMTIuNTQ5Njg5LTEyLjczODM3MDQtMjcuMDc0MzctMjcuNDgxNi01OC43OTg5MzMtMjcuNDgxNnptLTY0IDc2LjhjLTM0LjEzMzMzMzMgMC01NS40NjY2NjY2NyAxNy4wNjY2NjY3LTY0IDUxLjIgMTIuOC0xNy4wNjY2NjcgMjcuNzMzMzMzMy0yMy40NjY2NjcgNDQuOC0xOS4yIDkuNzM3NDgxNSAyLjQzNDM3IDE2LjY5NzM2MyA5LjQ5ODU0OCAyNC40MDEwNjY3IDE3LjMxODQgMTIuNTQ5Njg4OSAxMi43MzgzNyAyNy4wNzQzNzAzIDI3LjQ4MTYgNTguNzk4OTMzMyAyNy40ODE2IDM0LjEzMzMzMyAwIDU1LjQ2NjY2Ny0xNy4wNjY2NjcgNjQtNTEuMi0xMi44IDE3LjA2NjY2Ny0yNy43MzMzMzMgMjMuNDY2NjY3LTQ0LjggMTkuMi05LjczNzQ4MS0yLjQzNDM3LTE2LjY5NzM2My05LjQ5ODU0OC0yNC40MDEwNjctMTcuMzE4NC0xMi41NDk2ODktMTIuNzM4MzcwNC0yNy4wNzQzNy0yNy40ODE2LTU4Ljc5ODkzMy0yNy40ODE2eiIgZmlsbD0idXJsKCNhKSIvPjwvc3ZnPg=="},24324:wn=>{wn.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNjEuNzYgMjI2LjY5Ij48cGF0aCBkPSJNMTYxLjA5Ni4wMDFsLTMwLjIyNSA1Mi4zNTFMMTAwLjY0Ny4wMDFILS4wMDVsMTMwLjg3NyAyMjYuNjg4TDI2MS43NDkuMDAxeiIgZmlsbD0iIzQxYjg4MyIvPjxwYXRoIGQ9Ik0xNjEuMDk2LjAwMWwtMzAuMjI1IDUyLjM1MUwxMDAuNjQ3LjAwMUg1Mi4zNDZsNzguNTI2IDEzNi4wMUwyMDkuMzk4LjAwMXoiIGZpbGw9IiMzNDQ5NWUiLz48L3N2Zz4K"},57479:(wn,gt,t)=>{wn.exports=t.p+"static/bgFastFilters.157f5f2cc0f48114d01d388a7060c02d.png"},96381:(wn,gt,t)=>{wn.exports=t.p+"static/bgNavGroups.f7b2c690b098eeac73524f861bbb1890.png"},79974:wn=>{wn.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAAFACAYAAADNkKWqAAAABHNCSVQICAgIfAhkiAAAH7BJREFUeF7tnXtsX9V9wG9sxzgPJ37EsRONCARRy7LwCAmPNAwSCFmjPZiEKGiVWv5Yp2nSBprUFY2uRZu0MXUTbNK0TVNbVk0trNqoOmUwSCCoGg0Jr5SQBwECZRAntuPg2PEjtvf9mt8PuYnt+/ide+45536u9JNbuPec7/l8z+/D+d17zrnzIg4IQAACJSUwr6TtptkQgAAEIgRIJ4AABEpLAAGWNvU0HAIQQID0AQhAoLQEEGBpU0/DIQABBEgfgAAESksAAZY29TQcAhBAgPQBCECgtAQQYGlTT8MhAAEESB+AAARKSwABljb1NBwCEECA9AEIQKC0BBBgaVNPwyEAAQRIH4AABEpLAAGWNvU0HAIQQID0AQhAoLQEEGBpU0/DIQABBEgfgAAESksAAZY29TQcAhBAgPQBCECgtAQQYGlTT8MhAAEESB+AAARKSwABljb1NBwCEECA9AEIQKC0BBBgaVNPwyEAAQRIH4AABEpLAAGWNvU0HAIQQID0AQhAoLQEEGBpU0/DIQABBEgfgAAESksAAZY29TQcAhBAgPQBCECgtAQQYGlTT8MhAAEESB+AAARKSwABljb1NBwCEECA9AEIQKC0BBBgaVNPwyEAAQRIH4AABEpLAAGWNvU0HAIQQID0AQhAoLQEEGBpU0/DIQABBEgfgAAESksAAZY29TQcAhAohQCHhoaun5yc3C7pvkr+tlbSPtX2eXJM///6j/L8/1L/bOVPhZOlblttmBZ75lhna2OKNjSZ+NqOjY2dqauru33JkiUvmiiPMvwkELQARXz3y5f2PknNKj/TQ9R5ETh79mw0ODg4vnTp0s+3tLQ8k1c9lOs2gWAFeObMme/JqOKLbuMnuqIIqABPnz4dNTQ0jIsAN4oIXyoqFuotjkCQAhT5fVXk93BxWKnZdQJVAWqcIsHR5ubm9W1tbT9zPW7iM0sgOAHKT952+en7c8G0wCwqSguJwHQBarvq6+vH5H6gSnB/SO2kLXMTCE6Acl/nz6TJD5F4CMxF4HwBVkaC5xYvXvyr7e3tPBgpSfcJUYAvS+7WlSR/NDMjgZkEWJGgjgQ3tLa2vp6xaC7ziEBwApT7fx/L/b9mj3JAqAUQmE2A1XuCixYtumrZsmWHCgiNKi0SCE6A8hN40iI/qvKUwFwCrEhwWJ4Mr5EnxO942kTCTkAAASaAxCnhEYgToLZYHowMX3TRRdeuWLHizfAI0CIlgADpB6UkkESAFQmONjU1re/q6mKKTIA9BQEGmFSaFE8gqQArEhyTp8Ofk3uCe+NL5gyfCCBAn7JFrMYIpBFgVYILFy68bvny5a8ZC4KCCieAAAtPAQEUQSCtAKf9HL5Wfg6/UUTM1GmeAAI0z5QSPSCQRYBVCcoUmbUdHR1HPGgmIcYQQIB0kVISyCrAigSHRYJXiwQPlxJeQI1GgAElk6YkJ1CLALUW2UtwRB6MXMlIMDlzF89EgC5mhZhyJ1CrAKsSlAcjazo7O9/OPWAqyIUAAswFK4W6TsCEAKs/h0WCV8rT4bdcbzPxXUgAAdIrSknAlACrElywYMGvMBL0ryshQP9yRsQGCJgUYFWCsmzuClk2d8xAeBRhiQACtASaatwiYFqAFQmeFQn+MhJ0K9dzRYMA/ckVkRokkIcAqxKUn8Nr+TlsMFk5FoUAc4RL0e4SyEuAPBhxN+czRYYA/coX0RoikKcAKxLUeYJXs6mqoYTlVAwCzAksxbpNIG8BViTIVlpudwP2A3Q8P4SXEwEbAqxKsDISPJhTUyi2BgKMAGuAx6X+ErAlwOrPYVk7zLI5B7sLAnQwKYSUPwGbAuTBSP75zFoDAsxKjuu8JmBbgEjQze6CAN3MC1HlTKAIAVZ/Dss8wetlniDvHc45x0mKR4BJKHFOcASKEqCClK20xuSe4PWygcKrwYH1rEEI0LOEEa4ZAkUKsCpBGQnq9vq8bc5MSjOVggAzYeMi3wkULcCKBEdl7fBVK1euPOQ7T1/jR4C+Zo64ayLgggArEhyRF7CvX7VqFS9aqimj2S5GgNm4cZXnBFwRYHUkWLknyCs3LfcrBGgZONW5QcAlAVYlKCPBaxkJ2u0fCNAub2pzhMC5c+ei4eFhR6L5JIx58+a9I0+GL3MqqMCDQYCBJ5jm+UNgcnKyT9YNt/sTsf+RIkD/c0gLAiGAAO0nEgHaZ06NEJiRAAK03zEQoH3m1AgBBOhIH0CAjiSCMCDACNB+H0CA9plTIwQYATrSBxCgI4kgDAgwArTfBxCgfebUCAFGgI70AQToSCIIAwKMAO33AQRonzk1QmC2EeApmQjdBh57BBCgPdbUBIE5CcgIEAFa7iMI0DJwqoPAbAQQoP2+gQDtM6dGCPAT2JE+gAAdSQRhQIARoP0+gADtM6dGCDACdKQPIEBHEkEYEGAEaL8PIED7zKkRAowAHekDCNCRRBAGBBgB2u8DCDAB8/Hx8ejMmTOR/k1yyLsdIpnQGulfDggkJSAC7Jd+05r0fM6rnQACjGGo747o6enJRHrZsmVRQ0NDpmu5qHwEEKD9nCPAGOanTp2KRkZGMmVGXnodtbYm/w/62NjYVF1Z68sUJBclJqD51M/8+fMTX5PmRASYhpaZcxFgDMcTJ05EExMTmWjX1dVF8pav2Gul40cDAwPR0NBQ7LmcUDyBhQsXRs3NzfoWN6PBIECjOBMVZjaDiarM96TBwcFJkzUcP368puK6urpir69llBlbOCfkQiDt6D5JEAgwCSWz5yDAGJ55C1DfTdvf3282q5RmhUBLS0vU1NRkrC4EaAxl4oIQYMECZPSXuK86d6LpUSACtJ9iBFiwAE+ePJl4eo397kGNcxHQaU4dHR3GICFAYygTF4QACxZgd3d3pA9BOPwjoA9BOjs7jQWOAI2hTFwQAixYgL29vZFOf+Hwj4BOh2lvbzcWOAI0hjJxQQiwYAHqChP9cPhHQFf76MfUIQI8LeW1mCqPcuIJIMCCBajV60oTXXHC4Q8BXeGjK31MHgjQJM1kZSFABwSo8tOnwUnXGidLLWflRUAffugKH9PLHBFgXhmbvVwEGMO8r68vGh0dzZSZxsbGqK0t2Uu+qqtBdBkcIsyEO/eLVHw69SWPVSAaPALMPYUXVIAAY5jLypKpZWpZDv2iLFq0KPWlKkN+EqfGlusFOtozvfTt/IARYK4pnLFwBJiAuT6k0HW6SdcE6xpgXS9q8gZ5gjA5xXMCCNB+AhFgCuYqwLiRmY4UVIAcEEhLAAGmJVb7+QiwdoaUAAEjBBCgEYypCkGAqXBxMgTyI4AA82M7W8kI0D5zaoTAjAREgB/LfeOl4LFHAAHaY01NEJiTAAK030EQoH3m1AgBRoCO9AEE6EgiCAMCjADt9wEEaJ85NUKAEaAjfQABOpIIwoAAI0D7fQAB2mdOjRBgBOhIH0CAjiSCMCDACNB+H0CA9plTIwQYATrSBxBggkQMjM2L9p2oi86MJVvju3j+RLR++UTUPJ93fSTAyykVAowA7XcFBBjDvHe4Lvrh2w2ZMnPnZeei9qaJTNdyUfkIiAAHZCXIkvK1vLgWI8AY9k+/3xAdG0g28ju/qEuaJ6Jtq5Jvda8vR9INUfXD4R4B3QxVP/oypDwOBJgH1bnLRIAxzL9zqDEaHc+WmIvqo+jLn43fTbq6G7TuOcjhPgHd6zGPXaERoP3cI8AY5v90oLGmrPzemngB6vtAGPXVhNn6xToS1PeCmDwQoEmaycpCgAULcHh4OOrv70+WLc5yikBLS0vU1NRkLCYEaAxl4oIQYMECZPSXuK86d6LpUSACtJ9iBFiwAE+ePMlb4Oz3eyM16lviOjo6jJSlhSBAYygTF4QACxZgd3e3dvzECeNEdwjoW+I6OzuNBYQAjaFMXBACLFiAvb29kU5/4fCPgE6HaW9vNxY4AjSGMnFBCLBgAeorN/XD4R8Bfe2p4VefnpH3SDf7R8LfiBFgwQLU6nt6emJft+lvFwszcn396bJly0w3DgGaJhpTHgJ0QID6rmF9Gjw+nnHGteVOU/bq9OGHzgFUCRo+EKBhoHHFIcAYQj8+Nj/6cDAbppWLJqPfuCTZ/b3qahCdEI0I47ptMf9exadTX/JYBVJpEQK0nNps32zLQaapbnBw0Ogj1f29ddGLx7P9l/7GrnPRle3pN0NQGeqokMMdAjra06e+OR8IMGfA5xefe0YttycyLUCNf9+J+uhnffWJ1wQ3yhrgtW3jsiUWP2lt59/z+hCg5QQiwBTAR8RnvcNzI2tvmox0EwQOCGQggAAzQKvlEgRYCz2uhYBZAgjQLM/Y0hBgLCJOgIA1AgjQGupPKkKAloFTHQTmIIAALXcPBGgZONVBYA4Cg7ISZDGE7BFAgPZYUxME4gggwDhChv89AjQMlOIgUAMBBFgDvCyXIsAs1LgGAvkQQID5cJ21VARoGTjVQYB7gO70AQToTi6IBAKMAC33AQRoGTjVQYARoDt9AAG6kwsigQAjQMt9AAEmAK7bU+muzUm3qdJtk3SnYP3LAYEUBBBgClgmTkWAMRR1WyrdsTnLoTsG57BpZpZQuMYPAkMyEXqRH6GGESUCjMljLe/tTfveWH05km6Iqh+OCwkoT/3oy4gCPRCg5cQiwBjgJ06ciCYm0m9qqsXW1dVFy5cvj01pdTfooaGh2HM5IYoWLlyY567MRSJGgJbpI8AY4MePH68pJV1dXbHX1zLKjC080BPSjq49wYAALScKARYswOHh4ai/v99y2sOorqWlJWpqagqjMZ+0AgFaziYCLFiAjP6y9/gAR4EIMHt3yHQlAixYgCdPnkw8vSZThgO+SKcZdXR0hNRCBGg5mwiwYAF2d3dH+hCEIz0BfUtbZ2dn+gvdvQIBWs4NAixYgL29vZFOf+FIT0Cnw7S3t6e/0N0rEKDl3CDAggWoK0z0w5GegK620U9ABwK0nEwEWLAAtXpdacKL0NP1fF1hoyttAjvOykKQhYG1yenmIEAHBKjy06fBSdcaO92jLASnDz9aW1tDXGaIAC30n+lVIMAY4H19fdHo6GimtDQ2NkZtbW2Jrq2uBtFlcIhwZmQqPp360tzcHOkDkAAPBGg5qcH1osHBQaOPVKW8aGBgIFNa9IuaZW27ypCfxL+IXH/yBiq96Q1FgJm+adkvQoAJ2OlDCl2nm3RNsK4B1vWqgd2gT0CKU2okgABrBJj2cgSYgpgKMG5kpiMVFSBH+Qjo7Qtd2qgfvW2ifUVvZ+in+h9P7Rv6U14/2lf0Noku59OP/LxHgJa7DQK0DJzqwiCgczc//vjj6PTp05HeJtGPoeMVKedluQ2ySyT5/ObNm2vbjcNQUKEWgwBDzSztMkpAR3EqPN24QqWnozwbh4jwoIwad8nfnTKK3LV169bTNuotSx0IsCyZpp2pCejPVpWdztPUaUpJ7wGnrijhBSJBld9/iRD/Y8mSJU+tX7+eDSQTspvtNARYI0AuD4+A3rv78MMPI90LsmjpzUa3IsN/kH//6G233dYdXhbstAgB2uFMLR4Q0IcYKj7docdV8c2AcVhk+G1ZF/2tm2+++V0PMDsVIgJ0Kh0EUwQBld37778feb4zzzlh9/fyJPkbmzZtyjZxtQj4BdeJAAtOANUXS0BHeyq/gHbk6ZYJ41+Vp8ffk79GFwUUm6l8akeA+XClVMcJ6Oqe9957L+SdePbIT+OvyP3B/Y6notDwEGCh+Km8CAJ6n09HfaEfIsBxGQU+uGXLlocZDc6cbQQY+reA9n1KQJ/uvvXWW1NTW0p2/LesOPmdm2666VTJ2h3bXAQYi4gTQiCg67mPHDmSeWcf3xnIaFCHvHfKT+K9vrfFZPwI0CRNynKSgL524OjRo6V/94pIcEQS9CWR4ONOJqqAoBBgAdCp0h6Bjz76aOphB8enBPTJ8FduvfXWf4FJFCFAekGwBI4dOza1moNjRgJfFwn+RdnZIMCy94BA269PefVpL8ecBB4SCX6zzIwQYJmzH2jb+dmbPLFyX/AP5J6griku5YEAS5n2cButO7foAw+OZAREgBMyR/AOGQn+ONkVYZ2FAMPKZ6lbo/v1vfnmm6VmkLHxuqHCdhkJPpfxem8vQ4Depo7ApxPQnVz279/PG/Wyd4tTss/gOllDfCx7Ef5diQD9yxkRn0dAd3M5cOCAyW3py8p4jyybu7FMy+YQYFm7ekDt5omv0WSW6skwAjTadyjMNgFd13vw4EHb1QZbnz4UkZ/Ct8tIcGewjZzWMARYhiwH2kb96fvaa6+Vdn1vXmnVdcMrVqxYvWbNmtG86nClXAToSiaIIzWBDz74INIPRy4ESvFTGAHm0ncoNG8C+tRXR38yWsm7qlKWrxsnyHtGVst7Rn4eMgAEGHJ2A27b4cOHp15VyZEfAZHg4zI38O78aii+ZARYfA6IICUB3dvvjTfeSHkVp2chIA9EbpS5gT/Ncq0P1yBAH7JEjL9AQHd11j3+OPInEPooEAHm34eowSCB0dHR6JVXXjFYIkXFENDXbV4ia4X/L0RSCDDErAbcJt3cVHd74bBK4GER4Nes1mipMgRoCTTV1E5AX2r08ssv8+S3dpSpSpCfwX3ywvXLQ3ypEgJM1RU4uUgC+hLzt99+u8gQylz3vTIK/G5oABBgaBkNuD261ZVuecVRCIHdIsBbCqk5x0oRYI5wKdocgeHh4amJz3kfra2t0eWXXx41NzfnXZWR8nUupL77xMKcyEm5BdG1bdu2E0YCd6QQBOhIIghjbgL6fg/d9SXPo6mpKdq4cWOeVeRStt4bffXVV6OBgYFcyp9W6P0yCnwk70pslo8AbdKmrswEdOKzToDO87j00ksj/fh4vPvuu5F+cj6C+xmMAHPuMRRfOwEd4ezbt6/2gmJKuPjii6PVq1fnXk8eFeiWYBamBw03NjauDOlpMALMozdSplECfX190ZEjR4yWOVNhDQ0NUz+B9a9Ph94ffemllyL9D0Xeh0yJ+W1ZH/xk3vXYKh8B2iJNPZkJ2Jz8rA8/rrnmGq8kuHfvXhv3/6r5e1TuA96XOZmOXYgAHUsI4VxIQF92NDQ0ZA2NSnDDhg3W6qulIks/faeH+LoI8OpaYnbpWgToUjaI5QIC4+PjkY5wbB+yI3J0xRVX2K42VX0FyE9X4YzL0/LWTZs25f7IORWMjCcjwIzguMwOAR356QiwiMNlCRYhv2oOZIusa2SLrPwnZVpIOgK0AJkqshPo6emJjh49mr2AGq90UYJFyk9xhvQgBAHW+AXh8nwJuPDeD5ckWLT8Ktl+QO4D/lW+mbdTOgK0w5laMhJwZfNTFySo8/xceAWojAAfk6kwX86YUqcuQ4BOpYNgzifg0gYIOklaJ0sXcbgiv8pP4KdFgL9WBAfTdSJA00QpzygBG0vg0gSsT4Z1NGjzcEl+lXbvkZ/AN9hkkFddCDAvspRrhMDrr78enT171khZpgqxKUEH5acYD4sAP2uKZ5HlIMAi6VN3LAHdAXpsbCz2PNsn2JCgo/JT1N0iwC7bzPOoDwHmQZUyjRHYs2ePs1vg5ylBh+Wn+RiRe4BNxpJcYEEIsED4VD03gYmJialF/i4fa9eujTo6OoyGqNt+6ZvvbGxukDVwmQy9QCZDD2e93pXrEKArmSCOGQnoMjhdDufqoTvHrFu3Llq8eLGREH2Qn4wAT8sIsMVIgwsuBAEWnACqn5uAq/cAp0dtSoI+yK/Sbu4BuvrFHRwcnHQ1NuJKT8DFp8AztaJWCXokP20+T4HTd2U7VyBAO5xt1eLaPMC52p1Vgp7JTxEwD9DWFyBtPQgwLTG3zz98+LCNN54Zg6BvldMNVdMc+kIjC291SxPSnOfKPcAfyT3AO4wVWGBB3AMsED5VxxOwuRt0fDTxZ5RBgEIhmF2hEWB8n+aMAgnofDiVoC9HSQT4+zIR+h99yclccSLAELIYcBv6+/ujQ4cOedPCMghQ5mdu3rp16/PeJGWOQBFgCFkMuA0jIyNTL/325SiDAGUS9KUyCfqYLzkp2whQtw++LITk0Iap3YcjnQvo8qqI6XkKXYCSjz75+bts3rx5QUw3C3EE+G3pkPcij3AI+PQkuAQCDOYJsH5DghOgbJ20Re5R7Azn609LfHoQEroApTfeLyPAR0LplcEJUBMjcwF/In8+F0qSyt6OIt8Ml5Z96AIM6Y1wQY4AtVEyClwlo8AD8j/NrFBP+y3gfKMEfLoPGLIAQ7v/F6wAK6PAdZKwHXKzttPot5HCCiGgr8bUV2T6cGzZsiVVmL6sBAnpZUjVBAX5E7jaOEnYIvn5dLf8/YKIcGuqXsnJThHwaT5g2jfIeSTAz8sSuKec6hg1BhO0AM9nI/cGr5F7GEtrZMblBRCQPQHrZXPUJ+Q/Zm0FVJ+6yjRvkPNEgCflu7NS5v+dSw3D4QtKJUCH80BoCQjs3LlTnz7+UYJTnTgl6W7RnggwmPW/0zsHAnTiq0IQSQg899xzN8jDrReTnOvCOUm3x/JBgKE9/S3FPUAXvgTEYJaAjAJ/KiVeb7bU/Eprbm6e2h5LZTjb4YEAd8vcv1vyo1RcyYwAi2NPzRkIPPvss3fIA63/zHBpYZfETY1xXYBy3zW4hx+MAAv7OlBxrQREgntFgutrLcfm9XM9GXZcgK/I6O9am6xs1sUI0CZt6jJCQAR4twjw+0YKs1jIbO8RdlmAMvq7R6a+/MAiJqtVIUCruKnMBAH5Utbt2rXrf326F1ht93XXXXfBKzRdFaBw3iujvxvkPzYTJvLmYhkI0MWsEFMsAXkYcp2ctCf2RMdO0IchKsGmpqZPI9N3Hw8MDDgWaRTJk98NMu9vn3OBGQwIARqESVF2CchP4R/I6OQLdmutvbbpT4b1jXAywbv2Qg2XEOKyt5kQIUDDHYfi7BHYvXv3xbJRqm560WyvVjM16QhwwYIFUyM/Bzd7HRABXir3/nrNtNbdUhCgu7khsgQE5Kfw1+S0v0xwKqckJxDUnn9zNRsBJu8UnOkgAVkd0iCrQ/5HQtvsYHjehSQjv+fr6+u3hrbmd7ZEIEDvuigBn0/g6aefXi4PF/bLP2frs9q6R7f8HL9y27ZtJ2orxp+rEaA/uSLSOQg888wzt8gDkZ3yqQNUegIy8puQp76yleGW3emv9vcKBOhv7oj8PAJyP/Cb8o++AZhMBB6SOX/Kr1QHAixVusNurIxi5skE6X+TVt4TdkvNtk64PS7yuyeUV12moYMA09DiXOcJPPHEE/VtbW1Pypf5150P1o0Ad/T29v7mXXfdNe5GOHajQIB2eVObBQI7duy4qLGx8SmR4C0WqvO5ihdGRkZu3759+4jPjagldgRYCz2udZaATI9ZLNvo7xIJbnA2yGIDe0Ge+G6XJ76DxYZRbO0IsFj+1J4jgQMHDjQeP378Mani7hyr8bHof+/q6vrimjVrRn0M3mTMCNAkTcpykoA8Hf5nCex3nQzOflCPyAOP++1X62aNCNDNvBCVYQIiwQelyD83XKxXxcnT3vtkfe+jXgWdc7AIMGfAFO8OAZki81sige9IRK3uRGUlklNyL/RemeT8Iyu1eVQJAvQoWYRaOwF5OPJL8nDk+yKETbWX5n4JIvyfyNree2Rt7wfuR2s/QgRonzk1FkxA5wq2t7d/XeTwoIiwvuBw8qp+TNr2pz09PX9b1jl+ScAiwCSUOCdIArKh6pUiib+Txt0cWAN3i9z/UO736QYRHHMQQIB0j9ITqNwb/BsBcZnPMER670j8fyzie9LndtiMHQHapE1dzhKQe4NNsq+griH+E/l8xtlAZw7ssPzjby1duvSx9evXj3kWe6HhIsBC8VO5awT0jXMiwztEhg+4/u5hiXWfxPjX8nT3h2XcyMBE30GAJihSRpAE5KfxrSKZB6RxtzrWwB0V8ZVq7748coAA86BKmUERkB2nF8lUkjtFOl+Sht0iH6vfG92sVOp+Vv7+q0zhebLs63dNdi6riTQZOGVBoAgCL7zwQodsIrBZfiJvkfq3iJhW5xGHyO6g7NC8S8reJW+Qe37jxo19edRT9jIRYNl7AO2viYBOrBZZrZNC1ogU9eHJZ0SK+jfRahO5tlfO14cY+jki//tN+bwkE5eP1xQYFycigAATYeIkCKQnIHJcJqO45tHR0cX6V0sQSQ7IXoVn9K9Irid9qVxhkgACNEmTsiAAAa8IIECv0kWwEICASQII0CRNyoIABLwigAC9ShfBQgACJgkgQJM0KQsCEPCKAAL0Kl0ECwEImCSAAE3SpCwIQMArAgjQq3QRLAQgYJIAAjRJk7IgAAGvCCBAr9JFsBCAgEkCCNAkTcqCAAS8IoAAvUoXwUIAAiYJIECTNCkLAhDwigAC9CpdBAsBCJgkgABN0qQsCEDAKwII0Kt0ESwEIGCSAAI0SZOyIAABrwggQK/SRbAQgIBJAgjQJE3KggAEvCKAAL1KF8FCAAImCSBAkzQpCwIQ8IoAAvQqXQQLAQiYJIAATdKkLAhAwCsCCNCrdBEsBCBgkgACNEmTsiAAAa8IIECv0kWwEICASQII0CRNyoIABLwigAC9ShfBQgACJgkgQJM0KQsCEPCKAAL0Kl0ECwEImCSAAE3SpCwIQMArAgjQq3QRLAQgYJIAAjRJk7IgAAGvCCBAr9JFsBCAgEkCCNAkTcqCAAS8IoAAvUoXwUIAAiYJIECTNCkLAhDwigAC9CpdBAsBCJgkgABN0qQsCEDAKwII0Kt0ESwEIGCSAAI0SZOyIAABrwggQK/SRbAQgIBJAgjQJE3KggAEvCKAAL1KF8FCAAImCSBAkzQpCwIQ8IrA/wPMIr31GW59dQAAAABJRU5ErkJggg=="},90531:wn=>{wn.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAkCAYAAAAOwvOmAAAAAXNSR0IArs4c6QAACI1JREFUWEftl2lUU2cax//35uYm4RKIIQSBIKiIgoJaBXEtuIu4F5dBrXurYmeqdg5a7UQdpQpq3Vv3pW6tRSsIlUFFBRRRlKARA7LvS8ISSEK2OfGM5ygzPQanH/rB+/G+/+d5fvf5v/e57yXwJ7yIPyETPkBZ64rVnfJZWDG3Rfm8pfjXUZfbJ8/pGzbPXeCysKC2NrKf/NwDa4u/1j39+vyW6ps3E0fdO5JuuWcVlN+nD9ey+Ez/x7+tXoT8RF37oqm+M0J8GNEBHp8vXFdWGpw+Z7+0Vp4RXXgh9G577RHXQZLQgJBzp15kzo2Ux5dY1nO3xZ21r6xxct63eLTVUH0iKuSN5WnrWCr19aKUhdo3Cx3rP9llSsjcU3GJZzePooU/VDAOBevHfuWmKy7YkXZw8Nn2UNIu/t2WDZzwa4oyL+wvKedzLetZ41bM9xH32so984Wb1VBdp95ZZdstILrNZGjUNNQ8ntEyYtpfN/HXb/pH6d4RtZ8wIf2GX3zwKH2Vqb7cK7iLb9Swx9m9ZNVJLb9nYxjAWt114kRXWyc3bWlFpUDs+LlOKKDd7u8LshrKIvQI2u1hFgRsM5kNTdtHL/0udF7njNuXC3aZszTBNc14SZDEocxYUd0u/5D8U3lZnsuLUooAKQlITe3hQhjHznv6hsizuziPCtTRfiirIXJz8+JGN9+otxrKacghscBz5E6Trupy3sWPYy2BaxY7u/s7UKuGuRjXlFUa0ESw9SU63YXJmdOnPq2rCY4Ys30ywWV5PIv2XGDRv+wx82ib3kDl0+qoSYokRbz/9Dstqvprs/JvR7WHtmqjuw7ZPZgnCVwI2imZNGlJk86kQnaflO+W9Mz37e8s0WTL8bSZBQc7FvrFj8UTz+oFy8lN3fh2DJ2503v96e5DHGePmluSX5C/LLMun5BoWGS6Mr/aS+S8cdbzpMHvBWUJch++21nXVtNJ4OJv0KHTmJ7a2ElbPs0cp6Ps4Yp65OWWw6urAIIDgTCsqDAoqp98M2RN9bcAzDEuA0QRa6KLS6srP++xI/zMjxOWSLyZTv0eKLKLlsuSnr431JuBvmH3o8LEh9ZOnFBOqRuNoPR6SBg1BCbAGDMAdRElcPdQobis4dy5K/mfVfw8QLd9Q2SxhqKPuUinbHzXHLPKvjeTDJ2ZGEIY2JvDuyS79x+ZJdI1aME26mFnAziataD2DELbxhdw6GwExSFQU6ZMP36hcOqU5i//xhUJsrp/v+aX/4IKukWh6DaFIumrcdNhqMBPEia4KvaKh3+0/mSvoFjwyfvgkACbNMGWISBUisHxVoPmA2CxQXCA1lplzvOEh2MDMhJUPZ3dfPlCYV8uww3g8lg9uDRLRFOsThRpJn6KYCTvBWUJOhY5NKGhOmaCWaPG0Cl7wTNXgU0SoCgCtjYk+IwJ4PHBptngcFqRp3LFmazZxanVo81iAc/DntbrKXNroVlvKCbMpjIC5gadVldxbEOXmA5BTXJxsZnH6el2kH+rRfrVoLxi+Qxu2cPB6Oxeg0EhB0AZ1aApEhSbBVsuGyTRhhqtM75XrMW9koGwJ1QIcLqnyZDZLGlQFt3JSFxabnkJ/tf+stq+uyErv+ikbNh6Q5Kybfh8323qRjVy4iNgqnGGg5cSgZMPgjKpQbPZ4NBsMPY0GikaWy+FY5D4OUK7xYFxM+JJqurcRyuK5v4eUIc6dcQzSMKw2eO7LK2fZXQVjqbaWsE3kMiMjYRGI4aLtxKDpx0Gx1wPG1seaDsOCEceTDQbytSX4Le1gsUl0NDQhpsPVItn7ao4fkDqaLtSWqv+v0bCYMk4z6id3OfQKSkxuxUgCBj1AjyOi4RB2xkOkjYELTgDvr0ChJAPCBiAsoVR74qyxF/AqquCHW1AZRUUhhEed0QuXP/Z824EpqTgrY+81fZZnmbF0OiN48PJzWK7C3CmjNCSFNgcEiwwkF1fB52mFxw60+gXfgsC72SA5AImE6CtRn1WJe7eLIHRoIe6ySCzGSDZPmKYq8+q8GtbVwf5+WkNGl1wdN6TDtkXBFATF+2TmZp8vYOm74cH8RKtHBoUhw0ehwLPloMS+WK0VU2FSMiGyK8E7L4XYDSk4VlyC7Kzm9CkLCmtVhmiZUX1J6+modkCMABgXzk6LkdvMud2W5Y0tUNQETNEA0PHTM58dGkhnMTNGD9zP4wsFWy4HDC2HHA78UC4sKFVBsKcHQ5WiyMeyR4js/AsdDaP6jTG7B2KF40/nM1AU/s9dGr5ID9DeUPh4qsvXoFabd/pqP4xPboza0rSQlAlGwOn7mp8POcE7JkKcIV8EGIGsOMABAltVRNSDlFI/hetLC9n9ubVVRw2Lfp2SV1ZVkbpldlJ/4Fi5e7rfU1X33y0r7Tk0pugVkH5wIfeeVyoYAjCXWSrQd7dpVAWB8PBjcTQxYkQet0HuDTMBhKFqQqkJxU0F9a0HqqvV+3acxXV8Aji+ocfu6Zr1ibL9vZ+dVRZ4AHutn8GHy+QF8cP21ZwrsNQcwb+fcxnX9YkCQg5bHmWiU2iKm8WVKXzIXKwh0fgSzTwTiDndoL6ydPyk2WN+pgDsQ3Fb9skpQCpob11UoCUAm8dBK3qVOSkwye8JMIFI0J2gUexILC3gY2ECy3pBXXWRPx2sUKbnC77scyoiLpRElvwrlPA6/W0mV/P6D08dMv5fVvHLFfEWyb8q8sqqNMbFshqU1f69hlWiiHTLoAR60EIGRRnV+pSk3Ji7z1q3XogTv3MWpjXuqMj5wdMmrYk+l7Cz8unJu6Tdwjq8h6fnU76KavLciLgNZADO9+fjPLsE1dTbsilMVdbZB2FeZfeqk6F+YD+Zou/1J4JmPHgul/OyfNpO+KrTnf4p/NdMB3qlLXJ/iidVZ36o4pZm+cD1IdOWdsBa3X/BgRkclLqErqiAAAAAElFTkSuQmCC"},22735:wn=>{wn.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANAAAACOCAYAAABAIIbzAAAAAXNSR0IArs4c6QAAFtRJREFUeF7tnQt0VNW5x//fmQkJJFjkVe5tugiKSm+1tr28bGkzY/VKvMXmMROSCE1yxVqLVK14hStoKtjSValaYRVb1yUUSh4zeVRUgtqboeI1Ar2lLVasPGKxS4RYURJIyJzz3XUmCZ2Emcwkc2bmTOabtVgri9n729/32/s/+3H22Zsgn6Qi8NBGvg/ACWjwQkEmM2zMaFm7jB5NKhAGBUsG2UlaM7YKm3XilVPvJmCFRqioK96y0cwwHtrAHMC/zvPd+My6e6nVzL6b0TcRUAS1kr/t1kyLYq0C0bx/mKEiV/HmmgjMRjXrQxv4OIDMgYUwo3HNMsqLauEj0LgIaJiV6txeng1obhBNHGDixKlOTPOUV3YO03RUs63ewL8gYEnAQhhFjywj04o/qmCGaVwENAxwBVWlSwl4gkDWi37JAQ91othVXnliGKajnuXBJ3iexYpXghTUzhrmrfku/SHqjoyQAkRAQ6hI50ZnBsanPwWg7OJsfFjV+M76W3/58hBMxiXp6g3sIsARpPATmgLb2u/QW3FxLsEKFQGFWWF51f9xrZXVbQBdHSBL5alO3GnWYdtAf+97jCemp+L3oIvnQr1pWxXCNRVLqT1MPEmbTAQUouptm8vSJqbhAYBXDRyyMdgLVu5yl2x+OtFa0MqneEYK+YZy/eZwDHi6z+P2dd+jw4kWUzz8jYuAjubfPJVIs2mguUQ8g4Dqae4m0zVCR1Xp1wBsItD0AEO2di+Ts6GksikeFWdEmb0iagYwBex7LrTikaW03gjbyWIjJgI6mn/9VKaUmQTFBvANIJoxAPBzl7l3LjATdGdV6W0APRNsnuAl9caGoq0HY+3zX3NzLlfPn+uY9oLHkEWK+zfylDTG4xpj/aPLaH+s40n08qIioKMF87f6xteMLBCmAJQ2OCj2XOZuspsJpnNz2RSk4hgIA31vQSfyYrnK1myzWbMmpN2qge4iwkwwb7usrmmxmXglqy9REdCRgvndRBcv8Q4C2XQ9kO6ro6p0DYFW6X/75jugtW1vtT7qqfB4Y9FgjtlsaTw+7VZWsMJ/GMng9svdTWNj4UM0y+Bmm5XssWEZrTgMF9Db+bZMizJaf9od9kd/pjLNvfPesDPEKKG+TWfSVVObGeRVSV0WqyHbWwtsE0eljr6NgXt885MAH1U79+kr6j3vxgiF4cV80JyfmUopvwf4XRA8CmGPovDBj7vxt8l2V8Ks/hkuoCN58+eRhYI9qOupCOZWkD7e5lYC2jUVv7m8oWmP4bWUQAaPO6//VLc6aj4IRQzYQvXgxOpnptW9eCiBQuznarun8CWAbgjsv6+3f5eBTuoR2EGrhTelzXOZ7tmU4QJ62zHfZgHpKzsDPwfAcHdDrbsqgSs+Gg027F6b+WUG17HGe6Y3vBjzBQyjYu/Y7byNWQm2QBOwGGbNOdbuchvlg1F2DBfQWwX/NiOFlB0A9OHFYWLloNqtPj/92V3yXGGQWjvqyAm0S7q3w0ajqnq/f2XjSweMqvh42TnWbEubRJOPARRwaBqkR3r3FJ+8YprdY7r9hYYLKF4Vk+jlHnHknKIBDzUB9qgarbyifmdLosfX5/+HzbnjRimjfsjs28EeaFfHRaGatffRHRUBmaRlHi2Y3wwiW+8k0aOx9uT0uhcbTeJeVNzQV+FOY8qFVyus4AxAnQjQRFJoDjFyGWjJsNWadsleBBSVpjF0o8ccN30DbMny8tm6RF5dG3rkg+cw+1K3CMjoGhd7SUVABJRU1S3BGk1ABGQ0UbGXVAREQElV3RKs0QREQEYTFXtJRUAElFTVLcEaTUAEZDRRsZdUBERASVXdEqzRBERARhMVe0lFQASUVNUtwRpNQARkNFGxl1QEREBJVd0SrNEEREBGExV7SUVABJRU1S3BGk1ABGQ0UbGXVAREQElV3RKs0QSSXkD6ofFe7dzfdpRUtRkNV+yNfAJJLSDf8b1MGxi8v+0v79hjdWDiyG9WyRNhUgoo0D0/zGjydqG4sbzydPJUv0QaKYGkE5Bz66LpsFoagtzz0+olJbeh6L/lhrZIW1aS5E8qARXUlN9EKlcTYVzg+uU2VfV+oX7RrxL2yNwkabemCTNpBOSoLr8DrG0IdK+pXhv64fGaxjmJcEWjaVqPOJIc58I5q8vuBuOJQeubeJWraMuj0iaEwFAIjPgeSL+icVIa3gSQFQwMM6rdJZXFQwEnaYWATmDEC0gPsmD7NxcppGwNMu/Zc6qTbkyUC4Kl2ZqLQFIIqOeen6y3A/RCCXW7trmajniTND2QHmi/2+YYpxnasrqSX26TZpCcBHxD+7MdVtfSyC7zSooeSG8i+dvK5loseI0J1Zq3+35Zqk5O4fRF7agqexjgVcTwgFDtTeXGhvxffjBUKkkjIB1M7q/KPt94a2XC37Ez1EqW9P0J5FUvvtqqWfb1u0Ca0clAo2bhDfULt7waLrOkElC4UCRd+AT49bwJNKdhyL/c4ZdgbEr99nVOQzMBM4Jb5oPMyoa2Lt4SanFJBGRs/SSFNf2WucnK5AeYsQSgTEVhx5iv1taZPfjczWXjrGl4bXDx+EXBWOcqqVw5WFwiILPXusn8a292TgGRfkHwhdvlCLwn3Vb7FZO5GtCd/KpvOixQfjzYc8G+jBrUWXXFW/eLgBKhZhPAx7OvFM3RVM2t9zoD3O1M5/fHkt3jTYAw4FuBG407wLgnmJCYcdpdUnlpqHhM0QN17Sn47EfdyjuT7ZEtKYYKVr4fHoHOVxde3t3NKwgoA8gayAozrhlrr0mom8N9zwevzLoBxP/OwNyeoR1l+OJjHHCVVH4hFLG4C+hsc36mRtZjRHgmPbv2zlAOy/exIaBfrXjWMukm1pRvAzw/qHDALQqhiTV+OsPuOhEb76JXys2by6akpqrTiSktnI3F8RfQ7oV3a4wnGHz6HPOnpReKXuMYiuV2T+FWgBYFy8Pgw8xcfondtWcodkda2rgKSJ+QMtGbBOp5P4f4sYzs2vtHGuREjKd998IfgrEikO8Edncwl8uPXRw3k37QnJ+ZSikvYeB6PPHyjOza9YnY6EaSz2eaHUVElqoBMbURYVV6ds3TIynWSGKJeQ907tX8qV6vdQkYd13oeQZEwOA9ikKPnVTf3zXN7umMJEDJOzwCPXPTlLcB1re6HNQ0vPoBTjZJffTnGVMB9S0YBJuQXlzVvC3DVrt4eE1AckVK4MPm3HGX2hvlkJVBQMZUQL6VHWXyg8xUNviDLPYS8JzKvD7ZJ6mRikDyR5dATAXUF0qvkO5g32vW/Z8rMLiFWS2/xF53KLqhi3UhEDmBuAioz+0zzU4HkeLyC2P/WdbssroTecWKhdgQiKuA9BDbPQs3w/eEG0jEp9mxqSYpxawE4i6gj5oXzrUQXgP45Qxb7Y1mBSV+CYFABOIuIN2pjt1FazTN+5uxdrdHqkkIGEkgv4UzFQXlGtBUP5v2GWlbt2UKARkdlNgTAn0EHHv5BQKuZcB7FpjzwmwydL+eCEjamqkJ6D0IEz6tO9nJeGPnXPo4XIfzXmenlXoO1GRGV5cFV++YSWfDzR9OOhFQOJQkTcwJLNjPY1JVrCNCQV/hei8Cxl7VgicbZtKgm1hzXuDU9AnYTb3i04Bn6mbTw0YHIgIymqjYM4RAweu8ViGUBzPGhJouwqpgPYpjH99BjId6e58OSsGXXV+kU4Y452dEBGQ0UbEXMQFf7zERfyYgzScAwHfdjD6X8TfOwG+pFYtchaT6/3/BPv4CMRoJ8L38x4yH3XPomYgdC2BABBQNqmIzIgL5e3mWBWjsE497Nt2s/527ny+3Mu4m9hvWadjknktr+gp0/h9P4m7sJMI/9eZ/g1qRM1BkETkYqAd68Cf8qVc/xvueCkqI99qNAiB2zEfgln18VSrjf3TPNMZh5R1c7y8Axz6uIMbtvQLxehVc3ziTjjj38hQAPwfwr31DN68FOfp30YrS1wPd8ziPSwX/CYD+PvhBMLcSwQsorQy0kYqWdcvpd9FyQuwKAX8Czlq2cBb2EzDZJwRCTccprNx5M3X1pXPs5W0E2HtFtpmteE5R8bMLeQCvxvhO/Rx6Ppp0fQJa8bj6C4CWDFoQ4xAUWrXuHjL9+V/RBCa2Y0Mgv4UXWxSs6yuNgZMaYYN2Hp6Uv6HVOxWzrQR3by/U2Tdf6uuVNODh+tlUGW1vafmPu21Wq6U5nIIYOPCje5WQJ5WEY0vSCIFQBPyHagPT6kvafYsE/t8xo4OBZXVzaFco+0Z8Tyse1/Sh24VD8gY16lXt6+5Pke02RpAXG2ER8PVEhJUgfCJUBo3wHKtYUz+XYnbHLf3nY95csiibCcEu3u11m/Hcuu8pC0IFId8LAaMJ5LTwJaMJhYqCm6DhWiKkDyxDJdxZP4ueNbrsUPZ8c6DvVHDG2LFqLpFlDggZzLAScSYYmSBMB8PbrXVfs355qrzkFoqofB91AvoiQ3sGrBkT8SKA6XqBKpAbjc2ioYIJ+RyorILTJmQga/1yShjx5NeUftmi0RJm5ALsdpds8S15ymdkEXDs5SN9iweqhjmxHLr1kQwpoERBrh/TOuHKqd9QQKtA+Ly/395u9ZqGb25NqGNnE4V7vPzUN5laFLyul68vHLjn0JXx8CXhBeTc6MzQxo8pJeAeAvm684EfBircxZXfjwdgKTM6BAr28ncV4AHduga8UjebiqJT0uBWE1ZAzu3l2QxtERGKLhwIHjhW/WHwJndx5Y/iAVjKNJ7AwAetGmF53SwaeAik8QUHsJhQAiqoKb+JVM1BQC6IJg5C6IQuGmbU1JVUJszcLSY1PgIKyd/LZRbgUV8ojI/aGXOH8p6QkQgSSkDOqrKdAOYHB+A78PxHbV3KtlBX8xkJUWzFjoC+T24UQ3/L1LdTW2Osr5tDP4mdB/1LSiwBVZc+CKa1AWCdYNZWt/3lr5WeisS45CleFZ7I5fp2Wnvxot9+t6jutA6HVUIJqGB72QyF8KZfYC0q8PTfO1EtPU441Z24aZwt/C9QfDutp/lGboyO8woWPDuL3opnVAklIB2Uo6b0PmhkPe/11j27eNvheMKTsqNPwLdgMBXlIKz0e8HOqzKKGubQa9H3ANDPCE+1jPoaM9mYeR4D04lQod8iknACigUwKSP+BPQzEUap+AYIS5XeXqev54nmZtGTzc6M0SnaVItmmaEx5jJjHgEzA1yIUJ1hqykWAcW/rYgHAPTXuNMmYKpCmA3Glwi4YeCeNwYOeRV8KxovyJ3xFP5CH+AEu3JnYCUxuHGsrTZPBCTNN+YE8l7n6xRgCQGXQP9HGE/APwd1hPGRpmDj2VN4xv+lOiMdb/cU/h6gfjtYBrNPhA3p2TXLREBG1oLYCotA32GHoRLrr3OTgu3nUlH7/Ofow1DpI/m+3VP4HkD6K+HBPm36xW9EdIjAnQqxZ/RXXbtFQJFQl7zDIuDYxz/1PxjEN7fpeUGu1Sca4LXzCl6J5Qpbu6ewO8A85xARu7s19dfj7HX7AwUrAhpWE5BMkRDone98UbehKvi7VUWH5a94L1on54Tja7unUN8KNFHvYTSN39DAL3/C7gq5yisCCoeupBECQQiIgKRpCIEICAxbQJ17nFd5Vfp6zzo5jVNZuz2cLi8CXyWrEDAdgZAC4pbiT3Z5veO8GmcyKzOIaSYA28BLgpl47djs2tWmi1AcEgJRJDCogNo9hTsBGmT3s79nfCDDVitHXkWxssS0+QgEFdDZ5vxMjVKOh+syg0+PtdVeGm56SScERgKBoALq2L3wQWYEenXgQtwMtBP4MECn9f/MsNX4jlqVjxBIFgJBBXTGs/A1AuYOANEJ8B4QXu7WeNeldteBZAElcQqBQASC90CewgYGdRJB38LQypr2uza0tUyzezoFpRAQAj0EQq7CCSghIASCExABSesQAhEQEAFFAE+yCgERkLQBIRABARFQBPAkqxAQAUkbEAIREBABRQBPssafwHHn9Z/yInU6NNYPWuz/RinxaZBymlVqpb+ffX+ax/hHMCKg+LcB8SACAkcd85sB0jc3h/wQY9O0up13hkw4hAQioCHAkqTmIzAUATFrd15et2uTkVGIgIykKbZiTuBoQc6fQOHd8auC7Ve4mwy941cEFPMqlwKNInDMZkvTJqSdISJrODYTUkCcU3EJUmkWiK4FKBNEqWDWjyh6D4wmalx9JJzgJY0QGEhAFxCPT10EUq4F8dVgygIhyz8dA23EaAfxu16vuuzKxpcM3QAdlR6Ic5alIu2TtwCcD8KXAAz2C/G/0NT7qbGiVZqIEEg0AoYKiBdUjIHVugRg/TDwyUOA0QGv6qBnK/44hDySVAjEnYCxAspd81MoKAgQ1V4Ae6HxESjcAc0yHgpf13tZVqovPeMkzluvp+dXRvUEyrgTFwdGFAFjBZS3Zh0Ii32ECMfB2IyOc8/Srh+8F4ga37LmKqRQNZh7eiuNa6nxoXtHFGEJZkQTMFZA+oLBaMtSsPZnWA8+Ry6XGooe5z1yHYjcF9Kplhvp1//151D55HshYAYChgpouAFx/tqnAf56z1COt1PDQ/cP15bkEwKxJGAOAd3y6Odg1fQLhPWxXye6LDNlLhTLZiBlDZeAKQTk63jy1uwAwXfgOIBHqH7108MNSvIJgVgRMJOA9GdGT/UGfgyWP2aHM4eKFSgpRwgEImAeAekPX8d8suUfK3K0nBpX6VdOyEcImJaAaQTkG8blP7IEoO/30voIGhbIVh/Tth1xzGzHWvm2AI2e/CKA6b7a0R+ugn4A6x/q+4ZzPXvrLE4oKAfjMDpP3kE7n+qS2hQC8SBgqh7Ip5kFj3wWKdQAIN0PyEcAHQY4HaAswPf2Ye9H+xbVP/x8POBJmULAdALqHcrNAik/vzAfCl5PxwElj+ofDLjTQapXCPQRcFSVPQDGFHdJpaE7XUwpIJ+IeoZzZQDuAjC+X1NgegPgTeg8+bwM30QkoQg4qsseJ8Y9vnbFvNxdsmV9qDzhfm9aAfkHwDk/mIRR3hlQtQ6oOEw7Kz4ON0BJl7wEbBU268QZWT/uE0+PgHDa24VpjeWVvhtFIv0khIAiDVLyJx8BXTyTrppaBZCj34+xLiCGvfHWSkNerBMBJV/bGvERBxUPcMgL5DQWVxr28qYIaMQ3p+QKcDDxdHHXV3aUVLUZSUQEZCRNsXURgTPNeVeTknJbRnatoatfgVAPJh7qhN1VXnnC6CoSARlNVOz1I9Cxu/BnzPRtjb2fucRedyhaeJwbnRm4dEwDiG4YUEYrOnFdNMSjl2NqAem/KJiaZfWUV8qteNFqeVG0e+63zmxVo5cBsjJ4TxufvDEaNxw6ty6azlbrDgJmDAjnhMaw15VURk24phSQ/muijU9/SmEUMbEVTG76sON211JXexTrW0wbRKC92TkFCpWCqQKA364RPkAKrxqjntpFdo/XoOLg2FpmIyuaYy0e0/ZA/g++/KBUuoory42CLnaiR+CMp/BtAvXsZwzwIcK307NrDH3fy1FVuoNAPW81A1HvefrCMmUP5NheepyIMvuz53ZX8Zax0at2sWwUgcF6II211WPR1mRkD6T7XbC9bIZCvA+gNo2RE81hmz8ncwqoquzNi8ez3OYq3jLJqEoWO9EncKbZYSNSXtLnQATeczJKc6C+SPK2L57nhfeQ0UvVg5Eyp4C2l95HRI/5O85Ahbu4su9doejXvpRgCIFYrcIZ4uwwjJhSQL4uuap0qcK0RP+bwdva/vLOk54K4yaew2AlWYZBoPc5UGlGdu2IPGnp/wHiEr/4+EZOwwAAAABJRU5ErkJggg=="},62580:wn=>{wn.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAFACAMAAAClX9rRAAAC8VBMVEUAAADe7/ve7/vd7vrf7vzf7Pzu9/8AOcD1/P/3///g8P/G4//e7/7f7Pzz+v/z+v/0+v/f7//z+v/w/P/2+PPz+v/g9P/f7v/0+f//3QD/2QDz+//n8/7/2QDZ6voAAAAAAAD/5QD/2QD/2QAKIEz/2wD/3QAAT7bb7Pv/35ze7/zz+v/f7vwAAAAADiX/2gUHBAD/2wYATMP/1wL1+/8HTsEHBgf91wP/5p7/2QL/2QDd7fzz+///2QABAQD/2QDz+v8ASr3/2QD8zZz/2AH0+//f7v3/2gAKIEwAAADc7Pvz+v/z+v/Z6vsBTL4ATMH3///g8P8EBAP/2QD0+v//6p8AAAAATcDf7/36xJsJIU8JIU//2QDz+/8JJFDf8P37xpr/050AAAAAuv/6xJwAuP/z+v/6xJsATL//2QAGGDz4u33/5p8ATcD/2QDd7f3/2QAAS8AAtv8AAAAPKlzf7fsCTcH7ypwJIU76xZsAuP/90Jv/2gAATcAAAAABtf8ATsD3wI0ATcAHHUf7xZz0oFtehtkAAAAATsDP4/kATcAAuP8ATcDz/P/34qIEGC/O4Pb/5p8DTMEAAgYAtf98Y0nc7Pnz+v/6xJv/5p8AtP8LIEr/42/745z/55//5IiWeFlGc9QAuP/7xJyJu8cAPa3/v41tgqEFOIkDpuwdq+wATcD/30T01R8tXs2Vs+d1md6zxNv/4mUHGDv/4WlRZofe7/v/2QAAO8AATsAAAADz+v8AuP/6xJz/5p/G4f3f7/8KIk4Aq//6yJZukt7U5fe80/EHpfIETbUTVZcAPKkkWMrV6foUS8Wow+wAP7Dn9P//3Eb8yhP/2Q2JqeQ4aM/4xotTd3H0rGcAGSTC2POUsudNedS/nHIxJx17nuEAf7HixKMAZIoHN1vVwRoztutmt9Tqu4wsZISZoEAeFAwAk8zTsIA9Unf1sBXOwqsAc6CriWduXkOYaD5dSziLTyHAdx2fu70vRW3pgi3sjSdshUNPAAAAtnRSTlMAwJGIQMAPgUoLSj/7gPmUiCDCGAbQJ/ZYD/nuL+w+p3sIbdnBIhkLbA/u4LFfD0ZANhVROzP+9fDMrqR1Ye7juKyjlXthYCvv0M+uoXxVJyHSwcFrMDD15NzXqYZ/WVZBISEb8e3Jr5uYHv7Wu7eZkeO+lJKPiX17XltRPe3f2srASD8w/fnx2r5+dnZSQf35gGpRPfjg1su9kjD+o2D8+8WkcfzxGfv79tvTvbCj8tLHl5OKe3/2jQAAABVgSURBVHja7NwxSyNBFAfw9yHsk05SKFYp06SyTRFIc6wmIXB2ayFJwBBIuEI4CxM4UomKoB/hMVtcpsg3kEuhXJQoqKAcB9fe6u7qTnajFs7uFv8fLPsB/rx584bdIQAAAAAAAAAAAAAAgLctLmV5dYUgKVL8ZIkgGfbYQZAMm+zAopUQKXZsEiRCmh0FgkRYYUeaIH7L6W12rRPErphjG7a9SeHLg1MEsSswM0okOZaZ+TaLEkkMO5C/ss+MUT0pOCelvGDHN4K4pftSyps/zBfnGAwToS2f3Pf7diD7BkHc8tJxfs63UrY7BPFqStf9/s2Z/aqtNcyWEFWzUSaIQ0m+6NrPZCo8ZoMgeob0bPyS8kH4VXdQJtGrS8dZd0PKqZgxQCSRM9rS1u52pbwWQQeIJHIZw8jQcVtOhBjaUCUJ0Tyy8whLpIr2Ho/W0CNmmCiSGCwKNRB1w7VIELHe8JUQWLdi1xj6iKBWjyBKAzUQbIHjZiqBhBuglUSnFQwErSROQ5+RmMtEK4lGTwnELRG0kvgM5gcSnEoItGv58xiNxJtaaCW69YZvB4LTlIh9V/JQAsEWOAZrlYdpWCBoJTH5YVmTay+P8EBwmhKhvGVzInHyGIqPQSJa1C3X5Gh69O/69PSk+qECwVcQenQqll+bbOWdqsDWNx4LJcuvlKFnZVME4bOtCNQsRYc8B2Ke318IdKlbikN6Zc6JY5ezRQI9OpaiRj7lalgcY/zVrtFxRW0gC+S3I2Y9jvEXtU4ZtaFX1khVDVYH7hkI0NfQDVKpJXJyxTZcjaJR3lJs0YyVwki8uMwy4792heY8aqRaTzFfBlYr3FWj0JhHKUOKdI6Zx+LZyFmtsGTptOV18tCGXlzlZ3fCdjdmF5q6NodeYbh5dMJu0XLWrEsOwmT4yepe4wjbYC0X2PNTiCsOWiX4VIblyLsLVn3eLUEsHtmFq2r0aVqOw5r7Jp+9HPvc7XLQNoGO+mjWQwaQJVaoDQRXmOpgVNw8OiEDSJFVWXZgKlRpOFDMZ0rBE8XlHL8r95VAw0DYqYUMICl+3x7Bf/buZzWNKAoD+OmfTZfdFJQOOhO1LTQaESIRjCChJl0mEEgiIcnOLKzQgAohGwsus+gm4GMUPDDQhY/Rt6lJ1MztjH9m5uQmle/3Ch937pzv3lFJN+M3LI8NZN92w5D+yA5+Kz75XCBXuLIovkIUp+SwY8+zjqMphXyp2CaHru2EkVCL9ozWfVctSLCB6PDp7rX3YNxiHZBD3BnHWgwdlhanzWbzZHLf5IYczpSHUxcTiE4Ho3mdpi2RTVQmWrXv1scPUqSv7AmcSml20myfkoMyGqLCei5Wp06EaYKn8N321MVE+FRiNs5AQolkI8KJYEMPIVVg5popngguxgWTLPGtuvA+gg09oIrB9wokahWVYiBZg8fKwol0lc4Er1gLuczzgwaJWlNbRTyzFpCJslOVJJ1jTPcrF2WVRYLSOJnyqcguRZLzwVZt4n71bBZ7yJEcHE75UmUv0QyJ2cSw7kONvUWzJGXHHsM/Ss9V4GnyFZL8q1y8+wbIQ2VMEsnmrC2rmInIVYyb8Q6Bi7nHs5SSRBSxNnisnAnbZ8XGj6/rwS+Cf0Q2eLZSKtnIs9NKkEjizttYo0QGg0ECzy1VaoXnMdilngzTL8aJfnbvFsjQEYGaRyDGJfm0pgRCnethHAjE4/gjqCL5c6bWJq3BCPZ11/GHnkTS6ic6x4N7CYKJbJ5DiFaCjuprRNTBAvGq20NZMcmPXWVEP8YO4lG3h7QVcDKkhz0E160nihyaYQYaRK5oKIEForJYgBVoENkloiMsEFWVJewFGkRi1DvEDqKqsYioGeRUPU7byENVZiE58mF9MobcLpDtI7zxjhVYylaQI6p9ol4Hu8eEWWcx1SDvvQSuul1KmXyI43aDQB6Cgazijpxn3S6pQT7s47aJQN0uOBmm8e2UR90u65L8iCEQV90uK0++xBGIq26XVUAgYnW7/idWL3FoD63jJ/3uFVncBvnQui2w/qxf49DWo27Xv0B6R4OxbQKiLZZXowWlj4dtIgJxarAPwtdOJqcfuGeiHn/Iy9BCEgMF/kZSoG4P9fXIeesiMXLRaiEPybrd/fUICNS7cowkTfHu5QtBn7/QslDykFdKkafXfWHfaDm46nZpKxHy8rUv7T0tA1fdLm/DK5E3fXEfaQlUDH58eya5vO2Le0X/v6zBOtQRiI8f99GhgEAEjj8klRHIfBnWqIpA5jJYJwuBzJFkvYoIZDaTNcshkNkKrFc0hUBmSpVYryoCmS1psFZlBDJHJc86WQhknmyU9SmZCOQ5DetGBW9Zf9k7m9YmgjAAv0gRehchooU0JLhSaUMgLBEtJKGC4MWQ4iFQ04uUhJqbhwahh+AtkEOLgXz4A/QiwkIP7yW/IFkoubRXQUTQ2p6dzX4O2zab2V1tmXnoL+jD7Jt5v8YDKeUfsRoX9xCGfsXQiCXETT2MjkX2IpXIZXmk3CwpoVOIimyvN6QuIn5SQiYjClQeeSsjhm8kC0KIJ4pt1GltKyFSAiHEC1ILTVrRghIaiyCEeKFZRRO5DFG9W05VAicFQogHpDba9AAgEiM6OohD9ux6IVvayqx68wE3hRBXMDeQm0YHo9pHZDaSqYNOfcvZa12Hi9gXQqhgbiEXQSfeQWYhsSTYJLJW+ioJFzLHvZDNlU06mNM+IIfMQjLRc8exVp8Chav7/dlLfoWsv9CWSz6kgjnlo4c6ahB7/B7f0dNXU5nfWOJTyOYTY73kazzfRxGZD8i9CLiIl7bzUfDE3SUehTgfS/l9jg9Jxgl9lbm/h53nHAqh3jX9gTpVyfJRRZ0vDIUO8M197oTQT/8e0T4IXVMRQzK+Bv55w5kQh480+TtEjbbto4UGOwwLBJbBP7f2uRKyckBxMhHSBYseGrRZVggkIADWuBJCP3/2sVJBxBxYFGU0aLIsEYBAeMCTENrHYDBG7Ll92Icm8x+EPOJJyDuHj+MBESI3wUKqokkZDGYqj0Tginyzro+Q9femjaPjPSKkUgSLsu2jRT1c6JkkBMEcT0LI5rx0WhOS/jbQ+AAWOzKayBLbMoE8BMFtroSsEBf6EZkY2QWTHF0VsYnEmLbGsbPAlZD89wODP04hxSratJlnFZYhADa4EhI7SxtCfg0IOZjwtY8OisyzCjG4Gnf16yNkWVHOJmckTXwQdoBQJ2GigxY5H0seauIeMvvs2uj0dO9kfGgekJQetS0jVV+zCotX4Yt1fYQkFI2fDfJ7t9EYv5IgumiF7D6Vh2ceZI+LXNbMz3uNtNNxOG5AJO/4FqlWUpHBSHBH5AZX2V79/69WBhq7NfpDNERCy++sQl7UQ2YfAFHHFcJIoVERset7ViElKobesa94o+FIcdFxFqrc5H08oyNq6iwza0O5DJdRC9XH/Bp3XSeFaUKacDlZHwvFRV+Wi6Qyhc8wje1QAvoCp52LGf+pwWghjCagv+Tcy2sTQRwH8G9MjWZ9m/hojUIqNWEtiC8CRvCBWvARWxTMQemt6MXHId4E8SAqCt48+weInsYdcnAPKg21GoRS0IOXHurFu56cbSvpPmYmaZbfbvFzndt8+U2yv9/ujPyfgQzoXjrshV5e3ozvO4ilyfynb7/f0N6pq6BvxvftI5t/6JXXdCCHSPT2ae4B7+625dJ+xCiQT+868TgFQvqnCP1+6scjO4ewfAN59xj08tIOuv680Y9Hjg1gOQfyDvT6Q+x3DJX8l2Us60DOgt7uMJ8f9vd5L8tY3oEUQe6gst/R3VVOl/KRv2XSVSCPafPQd01udhfwzRi89uOzNoOWjfV6/TSEmm3bZ9BySCycAy191+Trwa6ucjoZh/ewfFZikZzY9+MQqra9No1F9tbr69OIwBFFHr8HuvmXcDt4j4u18uBguVbcGlEgZ+Dd9wzQIwpkEPDVDr0BRR5/fu3p4sGmH37p5KLObTWZiiAQdx3gmtj3y8AtEcgovLWzGfRuyPP4tfSvOob6+4OKq2gyF7NIH8gIXIbFvo8ha9r2tixcXoiVDEjpuya9CFEmwXwSm6gDGYTbmLPvhiiQMtyOioWjoHbqLVkghskCmAZ1IIbbBudnfaTZbB5d7XZaLGwBsfxOskBG10rOdIM2EGZ71FWGQUn/Ak8+vDyY1Gi0gayvK1wDJf0kHGHJmEzKzEQaSLOusBe09peIAkkwhQRlILWUR8YpEbua8jsuFg6BVu9VkkAMpmQQBpKE1zmx78118NsuFjaA2tArgkASTCkRaSDPnEA2wS8ramcHyDVmf87IhlMIR45p5KIMZJMIZH0WAc6LFQPEno43Go3pnyX5FVfdS+p3iewSTP/ZdMH5WV+NAKvFwnnQOnCFcz6Xib9ObuRJTizhLCRMFjYDXiNNWas9u0OcWVmQus6FhUxmRSgzC6VSmrm6B0uQ6wnAtIyeALtSKLIu6aPP2bb0zHIe45+B0gHeMu6EMpfL9PRso1FB53qqLFTlwpuPLEQfXh+GV9K2m7JWO/2Y6il3G/+H8wfoWMpkIXtpSTCd51agOwV4VOfbJ8cRgH5M9YhL3SX4xknnkyXzmWl8t4JV4LbLGU05+56CD/2Y6iKXu4OO1VjIPloyP5jGQyvYKrjMj6bmx1QurhEvmQpXqNB9ldl5IBO62ppsM5C50dSwdDy4l3ZM9YQr3I9zILoz64fVXiALo6kx2b7P1w6ZE1zlcJwDmWJKE20GUhaBGIrxYGZuxEvmPle5HudArO9M4b3VXiDZbbZtLuz7CwQZIx1TPeIqVwpxDmTyOZP6bLUZyKgokBUQnFZ7DgEuk46p7nClSpwDsaY+MYnnE4pA0outFIHsgnDaabWnAwyTjqnucaUTsQ7EmvrAAn2btOTe2x5VONLKSW4ONAq8ZZwHKMQ6EGviW+B5NWl1EkiyNaaS2ggaFd7yhQeoxDuQv+ydP2gTURyAnzbJ2dKoSWkVGjoJDVo6HGbqYoaGkBr/gFCI4CilEKSQli6BEiFYUSgddHDqUBQEwcHjFZcGLiLpH5cUoS10cO7u6EvP1vxy7y7v4nv3zoufFkGc8vnuJb/v3gXjuvkDiI6xIyGR00xliXuZKt8shLZEZrwuBG8daICDLWzPh74/pIiP+8158AKNqFtpHQ5OvtUoQoqeF0KU6Ptnm0d9D7dDaU5TREi2KQ/SM9VL1zLVAhRCu2glvC+EsHVY1vXDPbA4WITcJ0IGQB6UmqlGp6GQWt4s5MU/IQTALmSI+DiHzhi2TOsiMxVsIVCIap6k5P0spIcIicM8eFVmppprEbJOgq75w7qPhTROTYXg604ftQ+7kqnubLQISRrbCqTkXyEjraemJGeqpVYhCdq4ccG/QkynpuRmqsQGpLZObYhL/hViOjUFM5V57Ygl2Spkhv73o34VQjk1NSgxU6kbkK81lZ7Z7/hViJGm2E6x3ROfqRZahSRp8xTCgkwhuwKEgDQFGbA8xUZPvHw/FELWVYt3X3lpQg4OdzB/lKY09QS10BhbDUnJVC8o6YPu6pkkIUfABn8hY0aagkxajdoH6JlKXJmas9zup6UI+QLmUgKEhPqNNAUJXaS97iDximGVGj7o1ywZQuoYIEBI/DRNQabAqL3N2hF4c0MSdkSA6r6QIwwQIeQcETLk4BRbL33tCLphsajCbiVZiI4FUr5/gpGmqKfYLg7SGBaZqZbsB1Zwx7/rQIhX3+ue0Zxws/RRuw2XkBgSbUJtQqqQ6g4GCBMygChckJHWk9CH+chEUaaQMhbKWg+hMVfMIMtR+2Uag5TEK+YMQsneWMJdIVUsFgWkKYB9puoTlNZNFeo5MrEqUYiOxaKANMWSB2Hi5Y/afjSSkChkC4tFAWnKwagdrh1hY8U5FVGYliZkH0OECDkP0lS7PAgTL3fUaTAYob/ceWmbeh0LRgFpisKQy5nqOUvteN6hEO9vIVihpCmpmaoIN3Q6JWlCylgwCiVNOchUUcSZVabjBqo0IYdYMAo1TbXPVHDtiBkrLjH9M9VvQkxpipap7lmvHa6UmtOTyvRZRfXbHgLSFHseBCcRRYwV51S2K9uoq0KOsGCUXlOaYs9UUZCp+I4Vi7Z7Q0KWkF0sGCUF0hSVW65lqjzwYce0rGKIBaMEiRDwv1xipkqwf/7Od9bUvb+rL5jSFPPDFmHi5Tt3LzF/fiw6EuL9a9YaTFOQ9qepwNrhN3dfZX87NideCGQPC6UM0xSE7TQV4sWMg3NRo53dl+X9JaKDU1MQOGq/ROM1x0ylgoFJO95vGLwXLsTd6YlumabgqN0Kjpmq8K4G7tZlW05LrgvZFppEdMs0BUftlvDLVLlK5UcNrA877si7t/fLDgZwFhJEDAw37nePUrjBLVM9qjR4V3J4gUs6EuJ9I/pmCkGcZ6opXguEcM3pmdAZCUIE3tqLdWqaop9iE5Cp4AIhPEWsJOUJIdRFLRLdMk3ZficYXDsPuC2QtINyIvfAznZdzCrRQZqSkKngArnmeM7yQpIQwm55R4AQZAt82KLATPWwwrpC4HyxVvDZGcM1BJCWqa5VDBYdOMzl0pWK34R8QIAOM9Ugp0sW4ZFDh+lxfwlREKDTTHXv742kDSHpNw4XVW68O4XYPKiUT6YaP91GZh1e5dKF2a4UAvKgee1wYNZQknMohJBbHO8+Ib0uZKrZxTT7h8PFShPpQtcJAa87/+/Ti4wYfCoUxlnfBwAKXScEZCqu36c30pOpNrGyHA+htvRNvP1hqPh5fHz8/e3HeLcJAQ9bpCTejolUTSyjtvSsVCFPQl0mBHwnGNfv04tkl5tf3VcTYIVYEhvJZrM9y8tPyB99se7bQ2xG7TweVBobMYggVjz9hS4ChcC0PnmVwq2TteN5fCfk8mcbppDn8Z2QmG1a70Vex3dC0LCdkUnkdfwnxPZBpVHkdfwnBDxskZJ4PY7/hKDH9pnK4/hQSJtM5XF8KMQ6rUf/gWtWVuPMNubOKnLGlNX9WZMn92d5lVgqPBbU+LOHebOiZYLz8UCIeVu/ddliHVy6fRN5klCKosKrN5XWtd9k5iPIp8Q1gVQPdI7U97U/vEJ+JTCf0Qz6Nb70a6K4Ppby7gbARUpjE7ne/FJe4fAjwgjZQsIB316uWokEAuFwOBjksKtsapqhpPGrE6CF4EQ4nAoEUBcTChDChIlgg+uaHf3wh3Bl88qmZvx2/vITxsIEoqB7VkPnlgip8BljQRqZ5u03SGU+fEo8YBBD//nVHhwSAAAAAAj6/9oXJgAAAAAAAGAS4WdAgVaa+Z4AAAAASUVORK5CYII="}}]);
