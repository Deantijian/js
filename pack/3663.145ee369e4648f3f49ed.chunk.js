"use strict";(self.webpackChunkmingdao_web=self.webpackChunkmingdao_web||[]).push([[3663],{53663:(st,Q,i)=>{i.r(Q),i.d(Q,{default:()=>tt});var Ce=i(52945),$e=i.n(Ce),Ie=i(85105),A=i.n(Ie),N=i(99663),k=i(22600),U=i(49135),x=i(93196),o=i(67294),V=i(96841),Te=i(17563),X=i(25273),Ue=i(45697),h=i.n(Ue),De=i(34919),H=i(73935),Ee=i(96486),y=i.n(Ee),Ae=i(96774),O=i.n(Ae),S=i(62679),g=i(93665),Ne=i(20),ke=i(76534),xe=i(93967),C=i.n(xe);function q(p){return o.createElement("div",{className:"postHeader topPostPager"},o.createElement("div",{className:"InlineBlock ThemeColor3"},_l("\u7F6E\u9876\u52A8\u6001")),o.createElement("ul",{className:"InlineBlock"},y()(p.pageCount).times().map(function(t){return o.createElement("li",{className:C()("InlineBlock",{ThemeColor3:t===p.pageIndex,Bold:t===p.pageIndex}),key:t,onClick:function(){return p.handleChangeItem(t)}},t+1)})))}q.propTypes={pageIndex:h().number.isRequired,pageCount:h().number.isRequired,handleChangeItem:h().func.isRequired};const Le=q;var ee,te,Pe=(te=ee=function(p){(0,x.default)(t,p);function t(){var n,e,a,r;(0,N.default)(this,t);for(var l=arguments.length,s=Array(l),d=0;d<l;d++)s[d]=arguments[d];return r=(e=(a=(0,U.default)(this,(n=t.__proto__||A()(t)).call.apply(n,[this].concat(s))),a),a.state={pageIndex:0,focus:!1},e),(0,U.default)(a,r)}return(0,k.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch((0,S.VN)());var a=this;a._isMounted=!0,a.nextItem=y().debounce(function(){if(a._isMounted){var r=H.findDOMNode(a);if(!(!r||!a.props.topPostIds)&&!(a.state.focus||!e.isElementInViewport(r))){var l=a.state.pageIndex+1;l=l>=a.props.topPostIds.length?0:l,a.handleChangeItem(l)}}},5e3),a.handleChangeItem(0)}},{key:"shouldComponentUpdate",value:function(e,a){if(!O()(e,this.props)||this.state.pageIndex!==a.pageIndex)return!0;var r=this.props,l=r.topPostIds,s=r.postsById,d=e.topPostIds,m=e.postsById;return!!(l.length!==d.length||l.some(function(v,u){return v!==d[u]||s[v]!==m[d[u]]}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.nextItem&&this.nextItem.cancel&&this.nextItem.cancel()}},{key:"isElementInViewport",value:function(e){typeof window.jQuery=="function"&&e instanceof window.jQuery&&(e=e[0]);var a=e.getBoundingClientRect();return a.top>=0&&a.left>=0&&a.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&a.right<=(window.innerWidth||document.documentElement.clientWidth)}},{key:"focus",value:function(){this.setState({focus:!0})}},{key:"blur",value:function(){this.setState({focus:!1})}},{key:"handleChangeItem",value:function(e){this.setState({pageIndex:e},this.nextItem)}},{key:"render",value:function(){var e=this,a=this.props.options,r=a.groupId,l=a.projectId,s=a.listType;if(!this.props.topPostIds.length||s!==g.Z.LIST_TYPE.project||r||l==="")return!1;var d=this.state.pageIndex>=this.props.topPostIds.length?this.props.topPostIds.length-1:this.state.pageIndex,m=this.props.postsById[this.props.topPostIds[d]],v=o.createElement(Le,{pageIndex:d,pageCount:this.props.topPostIds.length>20?20:this.props.topPostIds.length,handleChangeItem:function(){return e.handleChangeItem.apply(e,arguments)}});return o.createElement(Ne.Z,{className:"topPostList ani300 zoomInUp",onMouseEnter:function(){return e.focus()},onMouseLeave:function(){return e.blur()},style:{fontSize:this.props.fontSize}},v,o.createElement(ke.Z,{postItem:m,isSummary:!0}))}}]),t}(o.Component),ee.propTypes={dispatch:h().func,fontSize:h().number,topPostIds:h().arrayOf(h().string),postsById:h().object,options:h().object},te);const Se=(0,V.$j)(function(p){var t=p.post,n=t.fontSize,e=t.topPostIds,a=t.postsById,r=t.options;return{fontSize:n,topPostIds:e,postsById:a,options:r}})(Pe);var Be=i(2489),Ge=i(70801),je=i(63239),R=i.n(je),be=i(46593),K=i.n(be),B=i(15577),dt=i(98110),ct=i(91744),pt=i(37846),ut=i(16461),_e=i(65739),W=i(16443),Fe=i(48446),ae=i(42506),Ve=i(17429),E=_l("\u4E0A\u4F20\u9644\u4EF6")+"...",G=_l("\u5206\u4EAB\u7F51\u7AD9")+"...",j=_l("\u8BF7\u8F93\u5165\u6295\u7968\u95EE\u9898")+"...",c={options:{thumbImgs:"",linkViewData:null,updaterInputAreaFocus:!1,attachmentData:[],kcAttachmentData:[],uploadObj:null,projectId:"",group:{groupID:"",groupName:"",isJoin:!0}},addPost:!1,Init:function(t){$.extend(this.options,t),this.bindUploadEvent(),this.BindEvent()},formatNumber:function(t,n){return Math.round(t*Math.pow(10,n))/Math.pow(10,n)},bindUploadEvent:function(){c.options.uploadObj=$("#hidUpdaterUpload").uploadAttachment({pluploadID:"#uploadMoreAttachment",dropPasteElement:"textarea_Updater",callback:function(n,e,a){if($("#hidden_UpdaterType").val()=="9"){if(c.options.attachmentData=n,c.options.attachmentData.length>0){var r=$("#textarea_Updater");(!r.val().trim()||r.val()==E)&&r.val(c.options.attachmentData[0].originalFileName).removeClass("Gray_a").focus()}else!$("#Attachment_updater").find(".kcAttachmentList").children().length>0&&$("#Div_JoinKnowledge").hide();if(e||e==0){$("#currentUploadSize").html(e+"M");var l=this.formatNumber(e/1024/1024/1e3*100,2);$("#Attachment_updater .currentPrograss").width((e>0&&l<10?10:l)+"%")}}},beforeUpload:function(n,e){$("#Attachment_updater").is(":hidden")&&$("#hidden_UpdaterType").val()=="0"&&($("#hidden_UpdaterType").val("9"),$("[targetDiv=#Attachment_updater]").removeClass("Gray_c").addClass("ThemeColor3"),$("#Attachment_updater").show())},filesAdded:function(n,e){if($("#Attachment_updater").find(".attachmentList").find(".docItem,.picItem").length+e.length>10)return alert(_l("\u9644\u4EF6\u6570\u91CF\u8D85\u8FC7\u9650\u5236\uFF0C\u4E00\u6B21\u4E0A\u4F20\u4E0D\u5F97\u8D85\u8FC710\u4E2A\u9644\u4EF6"),3),!1;var a=$("#hidden_UpdaterType").val()},isUploadComplete:function(n){c.options.uploadObj.isUploadComplete=n}}),$("#uploadAttachment").on("mousedown",function(){c.ResetUpdaterDiv()}),$("#addAttachmentToKcToggle").on("change",function(t){$(this).prop("checked")?$("#addAttachmentToKcLink").data("type")?$("#addAttachmentToKcLink > .kcNodePath").removeClass("Gray_a").addClass("ThemeColor3").off("click"):($(this).prop("checked",!1),$("#addAttachmentToKcLink").click(),t.preventDefault()):$("#addAttachmentToKcLink > .kcNodePath").addClass("Gray_a").removeClass("ThemeColor3").click(function(n){n.preventDefault(),n.stopPropagation()})}),$("#addAttachmentToKcLink").on("click",function(){var t=$(this);(0,ae.default)({isFolderNode:1,reRootName:!0,dialogTitle:_l("\u9009\u62E9\u8DEF\u5F84")}).then(function(n){if(!n||!n.node)return K().reject();t.data("type",n.type),t.data("node",n.node);var e=n.type===3?n.rootName||"":n.node.name;if(e+="/",n.type==3){var a=n.node.position,r=a.split("/"),l=!1;r.forEach(function(s,d){if(d>1)if(d>r.length-4){var m=s.length>10?s.substring(0,10)+"...":s;e+=m+"/"}else l||(e+=".../",l=!0)})}t.html("<span>"+_l("\u672C\u5730\u6587\u4EF6\u5B58\u5165\u77E5\u8BC6\u4E2D\u5FC3: ")+'</span><span class="mLeft15 kcNodePath">'+e+"</span>"),$("#addAttachmentToKcToggle").prop("checked",!0)}).catch(function(){}).finally(function(){t.data("type")||$("#addAttachmentToKcToggle").prop("checked",!1)})}),$("#kcAttachment").on("click",function(){(0,ae.default)({isFolderNode:2}).then(function(t){if((!t||!t.node||!t.node.length)&&alert(_l("\u672A\u9009\u62E9\u6587\u4EF6"),3),$("#Attachment_updater").find(".kcAttachmentList").children().length+t.node.length>10)return alert(_l("\u9644\u4EF6\u6570\u91CF\u8D85\u8FC7\u9650\u5236\uFF0C\u4E00\u6B21\u4E0A\u4F20\u4E0D\u5F97\u8D85\u8FC710\u4E2A\u9644\u4EF6"),3),!1;for(var n=[],e=!1,a=0;a<t.node.length;a++)$("#Attachment_updater .kcAttachmentList [data-node-id="+t.node[a].id+"]").length?e=!0:n.push(t.node[a]);if(e&&alert(_l("\u5DF2\u5F15\u7528\u8BE5\u6587\u4EF6"),3),n.length)t.node=n;else return;var r=$("#textarea_Updater");(!r.val().trim()||r.val()==E)&&r.val(t.node[0].name).removeClass("Gray_a").focus();var l="";t.node.forEach(function(s){c.options.kcAttachmentData.push({refId:s.id,originalFileName:s.name,fileExt:s.ext?"."+s.ext:"",fileSize:s.size,allowDown:s.isDownloadable,viewUrl:File.isPicture("."+s.ext)?s.viewUrl:null}),l+="<div class='docItem kcDocItem' data-name='"+(0,B.u1)(s.name)+"' data-node-id='"+s.id+"' id='docItem_"+s.id+"'>",l+="<div class='progress'>",File.isPicture("."+s.ext)?l+="<div class='Left nodeIconContainer nodeImg'><img src='"+s.previewUrl+"' alt='"+(0,B.u1)(s.ext)+"' /></div>":l+="<div class='Left nodeIconContainer nodeDoc'><span class='nodeIcon "+(0,B.kQ)(s.ext)+"'></span></div>",l+="<div class='Left docMessage'>",l+="<div class='TxtLeft'>",l+="<span class='overflow_ellipsis titleLimitWidth TxtTop Left' title='"+(0,B.u1)(s.name+(s.ext?"."+s.ext:""))+"'>"+(0,B.u1)(s.name+(s.ext?"."+s.ext:""))+"</span><span class='Right ThemeColor4 Font16 mLeft10 Hand docDelete Bold' title='\u5220\u9664'>\xD7</span><div class='Clear'></div>",l+="</div>",l+="<div class='TxtLeft shareUrl ThemeColor3 overflow_ellipsis'>",l+="<a href='"+s.shareUrl+"' target='_blank'>"+s.shareUrl+"</a>",l+="<div class='Clear'></div>",l+="</div>",l+="</div>",l+="<div class='Clear'></div>",l+="</div>",l+="</div>"}),$("#Attachment_updater .kcAttachmentList").append(l)})}),$("#Attachment_updater .kcAttachmentList").on("click",".docDelete",function(){$(this).closest(".kcDocItem").fadeOut(300,function(){var t=$(this).data("nodeId");c.options.kcAttachmentData.forEach(function(e,a){e.refId==t&&c.options.kcAttachmentData.splice(a,1)}),$(this).remove();var n=$("#Attachment_updater").find(".kcAttachmentList").children().length;!$("#Attachment_updater .attachmentList ").find(".docItem,.picItem").length>0&&$("#Div_JoinKnowledge").hide()})})},BindEvent:function(){$(".myUpdateItem_Content a[targetDiv]").off().on("click",function(){var e=$(this).attr("targetDiv");if(e=="#Attachment_updater"){if(c.options.attachmentData.length==0&&$("#Attachment_updater").is(":visible")){c.ResetUpdaterDiv();return}else if($("#Attachment_updater").is(":visible"))return}if(e=="#Link_updater"){if(($("#text_LinkUrl").val().trim()=="http://"||$("#text_LinkUrl").val().trim()=="")&&$("#Link_updater").is(":visible")){c.ResetUpdaterDiv();return}else if($("#Link_updater").is(":visible"))return}if(e=="#Vote_updater"&&$(".voteOptions li").eq(0).find("input").val()==_l("\u8BF7\u8F93\u5165\u6295\u7968\u9879")&&$(".voteOptions li").eq(1).find("input").val()==_l("\u8BF7\u8F93\u5165\u6295\u7968\u9879")&&$("#Vote_updater").is(":visible")){c.ResetUpdaterDiv();return}else if(e=="#Vote_updater"&&$("#Vote_updater").is(":visible"))return;c.ResetUpdaterDiv(),c.options.clearFilesData(),e=="#Attachment_updater"?($("#hidden_UpdaterType").val("9"),$(this).removeClass("Gray_c").addClass("ThemeColor3"),$("#textarea_Updater")&&($("#textarea_Updater").val().trim()==""||$("#textarea_Updater").val().trim()==_l("\u77E5\u4F1A\u5DE5\u4F5C\u662F\u4E00\u79CD\u7F8E\u5FB7")+"...")&&$("#textarea_Updater").val(E).addClass("Gray_a")):e=="#Link_updater"?($("#hidden_UpdaterType").val("1"),$(this).removeClass("Gray_c").addClass("ThemeColor3"),$("#textarea_Updater")&&($("#textarea_Updater").val().trim()==""||$("#textarea_Updater").val().trim()==_l("\u77E5\u4F1A\u5DE5\u4F5C\u662F\u4E00\u79CD\u7F8E\u5FB7")+"...")&&$("#textarea_Updater").val(G).addClass("Gray_a"),$("#Link_updater .visualDocTextBox").show(),$("#text_LinkUrl").on("keydown",function(a){var r=window.event?a.keyCode:a.which;if(r==13)return $(this).parent().next().find("input[type='button']").click(),!1})):e=="#Vote_updater"?($("#voteLastHour").val(new Date().getHours()),$("#hidden_UpdaterType").val("7"),$(this).removeClass("Gray_c").addClass("ThemeColor3"),$("#Vote_updaterOperator").show(),$("#textarea_Updater")&&($("#textarea_Updater").val().trim()==""||$("#textarea_Updater").val().trim()==_l("\u77E5\u4F1A\u5DE5\u4F5C\u662F\u4E00\u79CD\u7F8E\u5FB7")+"...")&&$("#textarea_Updater").val(j).addClass("Gray_a"),W.Z.init($("#Vote_updater"))):($("#hidden_UpdaterType").val("0"),$("#hidden_FilePath").val(""),$("#hidden_FileName").val(""),$("#hidden_FileExt").val(""),$("#textarea_Updater")&&($("#textarea_Updater").val().trim()||($("#textarea_Updater").val(_l("\u77E5\u4F1A\u5DE5\u4F5C\u662F\u4E00\u79CD\u7F8E\u5FB7")+"..."),$("#textarea_Updater").addClass("Gray_a")))),$(e).is(":visible")||($(e).show(0,function(){}),e==="#Attachment_updater"&&window.isEdge&&$(e).find(".moxie-shim.moxie-shim-html5").css({width:$("#uploadMoreAttachment").width(),height:$("#uploadMoreAttachment").height()})),$("#updateCloseContainer").show()}),$("#updateCloseContainer span.update_close").off().on("click",function(){c.ResetUpdaterDiv(),$("#textarea_Updater").val().trim()||$("#textarea_Updater").val(_l("\u77E5\u4F1A\u5DE5\u4F5C\u662F\u4E00\u79CD\u7F8E\u5FB7")+"...").addClass("TextArea Gray_a")}),$("#Link_updater .linkTextBox").on({blur:function(){$(this).val().trim()||$(this).val("http://").addClass("Gray_c")},focus:function(){$(this).removeClass("Gray_c")}});var t=$("#textarea_Updater"),n=t.closest(".myUpdateItem_Content");t.autoTextarea({maxHeight:220,minHeight:24}).focus(function(){var e=t.val().trim();(e==_l("\u77E5\u4F1A\u5DE5\u4F5C\u662F\u4E00\u79CD\u7F8E\u5FB7")+"..."||e==E||e==G||e==j||e==_l("\u5206\u4EAB\u6587\u4EF6")+"...")&&t.val(""),t.removeClass("Gray_a"),c.options.updaterInputAreaFocus=!0,$("#myupdaterOP").slideDown(function(){$(this).attr("style","display: block")}),t.autoTextarea({maxHeight:220,minHeight:80})}).blur(function(){t.mentionsInput("store"),$.trim($(this).val())||t.val(_l("\u77E5\u4F1A\u5DE5\u4F5C\u662F\u4E00\u79CD\u7F8E\u5FB7")+"...").addClass("Gray_a")}),c.BindSelectGroup(),t.mentionsInput({submitBtn:"button_Share",showCategory:!0,cacheKey:"updatertext"}),t.mentionsInput("restore",function(e){e?(t.removeClass("Gray_a"),$("#myupdaterOP").show()):t.val(_l("\u77E5\u4F1A\u5DE5\u4F5C\u662F\u4E00\u79CD\u7F8E\u5FB7")+"...").addClass("Gray_a")}),$(document).click(function(e){if($("#textarea_Updater").length>0){var a;c.options.updaterInputAreaFocus=!(!$(e.target).closest(".myUpdateItem,.myUpdateType,.mentions-autocomplete-list,.faceDiv,.plupload,.focusUpdaterCon").length&&!$(e.target).hasClass("guideTry")&&((a=$("#textarea_Updater").val().trim())==""||a==_l("\u77E5\u4F1A\u5DE5\u4F5C\u662F\u4E00\u79CD\u7F8E\u5FB7")+"..."||a==E||a==G||a==j||a==_l("\u5206\u4EAB\u6587\u4EF6")+"...")&&!$("#Attachment_updater").is(":visible")&&!$("#Link_updater").is(":visible")&&!$("#Vote_updater").is(":visible")&&!$("#Storage_updater").is(":visible")),c.options.updaterInputAreaFocus||(t.autoTextarea({maxHeight:220,minHeight:24}),$("#myupdaterOP").slideUp())}})},BindSelectGroup:function(t){var n={defaultValue:t||"",isAll:!0,isMe:!0,reloadAfterCreateGroup:!0,changeCallback:function(a){$("#hidden_GroupID_All").attr("scope",R()($("#hidden_GroupID_All").SelectGroup("getScope")))}};!t&&c.options.group.groupId&&(n.defaultValue=c.options.group.groupId),$("#hidden_GroupID_All").SelectGroup(n)},ResetUpdaterDiv:function(){if($("#textarea_Updater")){var t=$("#textarea_Updater").val().trim();(t==""||t==E||t==G||t==j||t==_l("\u5206\u4EAB\u6587\u4EF6")+"...")&&($("#textarea_Updater").blur(),$("#textarea_Updater").val(_l("\u77E5\u4F1A\u5DE5\u4F5C\u662F\u4E00\u79CD\u7F8E\u5FB7")+"...").addClass("Gray_a"))}$("#hidden_UpdaterType").val("0"),$("#uploadAttachment").removeClass("falseHide"),$("div.myUpdateItem_Content a[targetdiv='#Attachment_updater']").removeClass("ThemeColor3").addClass("Gray_c"),$("div.myUpdateItem_Content a[targetdiv]").removeClass("ThemeColor3").addClass("Gray_c"),$("#Attachment_updater,#Link_updater,#Vote_updater,#Storage_updater").hide(),$("#Attachment_updater").find(".kcAttachmentList").html("").end().find("#addAttachmentToKcToggle").prop("checked",!1).end().find("#addAttachmentToKcLink").data("type",null).data("node",null).html("<span>"+_l("\u672C\u5730\u6587\u4EF6\u5B58\u5165\u77E5\u8BC6\u4E2D\u5FC3")+"</span>"),$("#button_Share").attr("disabled",!1).removeClass("Disabled");var n=$("#Link_updater");if(n.find(".updaterLinkView").empty(),n.find(".linkTextBox").val("http://").addClass("Gray_c"),n.find(".linkBtn").val(_l("\u9884\u89C8")).attr("disabled",!1).removeClass("Disabled"),c.options.linkViewData=null,c.options.attachmentData=[],c.options.kcAttachmentData=[],$("#check_Join2").prop("checked",!0),$("#check_Join3").prop("checked",!0),$("#check_OnlyView").prop("checked",!1),$("#Vote_updater .voteOptions input").length>0&&($("#Vote_updater .voteOptions input[type = 'text']").addClass("Gray_c").val(_l("\u8BF7\u8F93\u5165\u6295\u7968\u9879")),$("#Vote_updater .UploadSuccess").html(""),$("#Vote_updater div[pluploadid]").show(),$("#Vote_updater .voteOptions li:gt(1)").remove()),$("#voteAvailableNumber").length>0&&($("#voteAvailableNumber").get(0).selectedIndex=0),$("#voteAnonymous").length>0&&$("#voteAnonymous").removeAttr("checked"),$("#voteVisble").length>0&&$("#voteVisble").attr("checked","checked"),$("#Vote_updater .voteOptions li").length>0){var e=$("#Vote_updater .voteOptions li").lenght;if(e>0)for(var a=0;a<e;a++)a>1&&$("#Vote_updater .voteOptions li").eq(a).remove()}$("#updateCloseContainer").hide(),$("#currentUploadSize").html("0M"),c.options.uploadObj&&c.options.uploadObj.clearAttachment()},ViewLink:function(t){var n=$("#text_LinkUrl").val().trim();if(!n||n=="http://")return alert(_l("\u8BF7\u8F93\u5165\u94FE\u63A5"),3),!1;var e=$(t);e.val(_l("\u63D0\u53D6\u4E2D...")).attr("disabled",!0).addClass("Disabled");var a=$("#button_Share");a.attr("disabled",!0).addClass("Disabled"),(0,_e.Z)($("#Link_updater .updaterLinkView"),{viewUrl:n,callback:function(l){l.errorCode!="1"&&(alert(_l("\u94FE\u63A5\u63D0\u53D6\u5931\u8D25"),2),l=null),c.options.linkViewData=l,e.val(_l("\u9884\u89C8")).attr("disabled",!1).removeClass("Disabled"),a.attr("disabled",!1).removeClass("Disabled")}})},PostUpdater:function(t,n,e,a,r,l){$("#textarea_Updater").mentionsInput("val",function(s){var d=s;if(!d||!d.trim()||d==_l("\u77E5\u4F1A\u5DE5\u4F5C\u662F\u4E00\u79CD\u7F8E\u5FB7")+"..."||d==E||d==G||d==j)return alert(_l("\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A"),3),!1;if(d&&d.length>6e3)return alert(_l("\u53D1\u8868\u5185\u5BB9\u8FC7\u957F\uFF0C\u6700\u591A\u5141\u8BB86000\u4E2A\u5B57\u7B26"),3),!1;var m=$("#hidden_UpdaterType").val(),v=$("#text_LinkUrl").val();if(m=="1"&&!c.options.linkViewData)return alert(_l("\u8BF7\u8F93\u5165\u94FE\u63A5"),3),!1;var u=$("#hidden_FilePath").val(),Y=$("#hidden_FileName").val();if(m=="9"&&c!="undefined"&&typeof t.isUploadComplete<"u"&&!t.isUploadComplete)return alert(_l("\u6587\u4EF6\u4E0A\u4F20\u4E2D\uFF0C\u8BF7\u7A0D\u7B49"),3),!1;var f={postType:m,postMsg:d},T;if(m=="7"){var ve=$("#Vote_updater");if(T=W.Z.getData(ve),T.invalid){W.Z.alertInvalidData(ve);return}f.voteOptions=T.voteOptions,f.voteOptionFiles=T.voteOptionFiles,f.voteLastTime=T.voteLastTime,f.voteLastHour=T.voteLastHour,f.voteAvailableNumber=T.voteAvailableNumber,f.voteAnonymous=T.voteAnonymous,f.voteVisble=T.voteVisble}var at="";at=$("#txtKnowledge").val();var nt=$("#hidden_GroupID_All").SelectGroup("getScope");if(nt)f.scope=JSON.parse($("#hidden_GroupID_All").attr("scope")||"{}");else{alert(_l("\u8BF7\u9009\u62E9\u7FA4\u7EC4"),3),$("#hidden_GroupID_All").SelectGroup("slideDown");return}if(m=="9"){if(f.attachments=R()(t.attachmentData),f.knowledgeAttach=R()(t.kcAttachmentData),$("#addAttachmentToKcToggle").prop("checked")){var _,F,ge=$("#addAttachmentToKcLink").data("type"),z=$("#addAttachmentToKcLink").data("node");ge==2?_=F=z.id:ge==3?(_=z.rootId,F=z.id):_=F=null,f.addToKc=!0,_&&(f.addToKcRootId=_),F&&(f.addToKcParentId=F)}}else if(m=="1"&&c.options.linkViewData){var w=c.options.linkViewData;f.linkUrl=w.url,f.linkTitle=w.title,f.linkDesc=w.desc,f.linkThumb=w.img.replace(/^\/image\.axd\?picture=/,"")}if(!a&&m==0){var ot=/.*[\?|？|吗](\s*@[^\s]+)*\s*$/;if(ot.test(d)){c.PostToReward(n,e);return}}if(m=="9"){var rt=t.attachmentData.length?t.attachmentData[0].originalFileName:$("#Attachment_updater .kcAttachmentList").children().first().data("name");if(d==rt&&!confirm(_l("\u786E\u8BA4\u8981\u4EE5\u539F\u59CB\u9644\u4EF6\u540D\u4F5C\u4E3A\u53D1\u5E03\u52A8\u6001\u5185\u5BB9\uFF1F")))return!1}$(n).attr("disabled","disabled").addClass("Disabled");var ye=[];if(m=="9"&&t.attachmentData.length&&$("#addAttachmentToKcToggle").prop("checked")){var lt=t.attachmentData.map(function(D){return D.fileSize}).reduce(function(D,Z){return D+Z},0),it=new(K())(function(D,Z){Fe.Z.getUsage().then(function(J){J&&J.total-J.used>=lt?D():(alert(_l("\u5DF2\u8D85\u51FA\u77E5\u8BC6\u4E2D\u5FC3\u6BCF\u6708\u6D41\u91CF\u9650\u5236\uFF0C\u65E0\u6CD5\u52A0\u5165\u77E5\u8BC6\u4E2D\u5FC3"),3),Z())}).catch(function(){Z()})});ye.push(it)}K().all(ye).then(function(){c.addPost||(c.addPost=!0,Ve.Z.addPost(f).then(function(D){if(!D.success){alert(_l("\u53D1\u5E03\u52A8\u6001\u5931\u8D25"),2);return}alert(_l("\u53D1\u5E03\u6210\u529F")),$("#textarea_Updater").val(""),$("#textarea_Updater").mentionsInput("reset").mentionsInput("clearStore"),typeof c<"u"&&c.ResetUpdaterDiv(),c.BindSelectGroup(),e&&e(D)}).finally(function(){$(n).removeAttr("disabled").removeClass("Disabled"),c.addPost=!1}))},function(){$(n).removeAttr("disabled").removeClass("Disabled")})})},PostToReward:function(t,n){Ge.Z.confirm({title:_l("\u63D0\u51FA\u95EE\u9898"),width:450,okText:_l("\u662F\u7684"),cancelText:_l("\u4E0D\u7528\u4E86"),children:o.createElement("div",{className:"pTop20 pBottom20"},o.createElement("div",{className:"ThemeColor3 Font16 TxtCenter"},_l("\u662F\u5426\u5C06\u6B64\u52A8\u6001\u4F5C\u4E3A\u95EE\u7B54\uFF1F")))})}};const L=c;var Me=i(59962),ne,oe,we=(oe=ne=function(p){(0,x.default)(t,p);function t(n){(0,N.default)(this,t);var e=(0,U.default)(this,(t.__proto__||A()(t)).call(this,n));return e.clearFilesData=function(){e.setState({kcAttachmentData:[],temporaryData:[],isUploadComplete:!0})},e._isMounted=!1,e.post=function(){if(!e.state.isUploadComplete){alert(_l("\u6587\u4EF6\u4E0A\u4F20\u4E2D\uFF0C\u8BF7\u7A0D\u7B49"),3);return}var a=function(s){return e.props.dispatch((0,S.$E)(s))},r={attachmentData:e.state.temporaryData,kcAttachmentData:e.state.kcAttachmentData,isUploadComplete:e.state.isUploadComplete};e._isMounted&&L.PostUpdater(r,e.postBtn,function(l){a(l.post),e.setState({kcAttachmentData:[],temporaryData:[],isUploadComplete:!0}),$("body").click()})},e.initEmotion=function(){new Be.Z(e.faceBtn,{input:"#textarea_Updater",placement:"right bottom",mdBear:!1,relatedLeftSpace:22,onSelect:function(){var r=$("#textarea_Updater")[0];(r.value===_l("\u77E5\u4F1A\u5DE5\u4F5C\u662F\u4E00\u79CD\u7F8E\u5FB7")+"..."||r.value===_l("\u4E0A\u4F20\u9644\u4EF6")+"..."||r.value===_l("\u5206\u4EAB\u7F51\u7AD9")+"..."||r.value===_l("\u5206\u4EAB\u7F51\u7AD9")+"..."||r.value===_l("\u8BF7\u8F93\u5165\u6295\u7968\u95EE\u9898")+"...")&&(r.value="")}})},e.viewLink=function(){e._isMounted&&L.ViewLink(e.linkBtn)},e.handleMouseover=function(){$(e.faceBtn).addClass("icon-smilingFace")},e.handleMouseout=function(){$(e.faceBtn).removeClass("icon-smilingFace")},e.textareaFocus=function(){$("#textarea_Updater").focus()},e.handleOpen=function(a){var r=$('[targetdiv="#Attachment_updater"]');r.hasClass("ThemeColor3")||r.click()},e.handleUploadComplete=function(a){e.setState({isUploadComplete:a}),$("#hidden_UpdaterType").val("9");var r=$("#textarea_Updater").val();a&&(!r||r==_l("\u77E5\u4F1A\u5DE5\u4F5C\u662F\u4E00\u79CD\u7F8E\u5FB7")+"..."||r==_l("\u4E0A\u4F20\u9644\u4EF6..."))&&(e.state.temporaryData.length||e.state.kcAttachmentData.length)&&($("#textarea_Updater").val(e.state.temporaryData.length?e.state.temporaryData[0].originalFileName:e.state.kcAttachmentData[0].originalFileName),$("#textarea_Updater").focus())},e.MyUpdater=null,e.state={kcAttachmentData:[],temporaryData:[],isUploadComplete:!0},e}return(0,k.default)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var a=this;$(".myUpdateItem_Content a").each(function(){$(this).data("targetdiv")&&$(this).attr("targetdiv",$(this).data("targetdiv"))}),this.MyUpdater=L,L.Init({clearFilesData:function(){e.clearFilesData()},projectId:a.props.projectId,group:{groupId:a.props.groupId,isJoin:!0}}),this.initEmotion(),$("#hidden_UpdaterType").val("0")}},{key:"shouldComponentUpdate",value:function(e,a){return a.temporaryData.length!==this.state.temporaryData.length||a.kcAttachmentData.length!==this.state.kcAttachmentData.length?!0:((e.groupId!==this.props.groupId||e.projectId!==this.props.projectId)&&(this.MyUpdater=L,L.Init({clearFilesData:this.clearFilesData.bind(this),projectId:e.projectId,group:{groupId:e.groupId}})),!1)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return o.createElement("div",{className:"card updaterCard"},o.createElement("input",{type:"hidden",id:"hidden_UpdaterType"}),o.createElement("input",{type:"hidden",id:"Hidden_FromStorage",value:"0"}),o.createElement("div",null,o.createElement("div",{className:"myUpdateItem ThemeBorderColor4"},o.createElement("div",{className:"myUpdateItem_Content",id:"myUpdateItem_Content",style:{position:"relative"}},o.createElement("div",{id:"msgContainer",className:"msgContainer"},o.createElement("textarea",{id:"textarea_Updater",style:{height:"24px"},className:"TextArea Gray_a Block"})),o.createElement("div",{className:"Hidden",id:"myupdaterOP"},o.createElement("div",{className:"faceArea"},o.createElement("div",{className:"msgExpandDiv",style:{marginRight:"-4px"}},o.createElement("a",{className:"faceBtn icon-smile",ref:function(r){e.faceBtn=r},onMouseOver:this.handleMouseover,onMouseOut:this.handleMouseout}),o.createElement("div",{className:"Clear"}))),o.createElement("div",{className:"Relative"},o.createElement("div",{className:"Absolute Hidden",id:"updateCloseContainer",style:{right:"0px",top:"15px"}},o.createElement("span",{className:"update_close ThemeBGColor3",style:{margin:"5px"},"data-tip":_l("\u5173\u95ED")},o.createElement("i",{className:"icon-delete ThemeColor3"}))),o.createElement("div",{className:"myUpdateType mTop12"},o.createElement("span",{className:"inlineBlock mRight20","data-tip":_l("\u6DFB\u52A0\u9644\u4EF6")},o.createElement("a",{className:"icon-attachment Font18 NoUnderLine","data-targetdiv":"#Attachment_updater"})),o.createElement("span",{className:"inlineBlock mRight20","data-tip":_l("\u94FE\u63A5")},o.createElement("a",{className:"icon-link Font18 NoUnderLine","data-targetdiv":"#Link_updater"})),o.createElement("span",{className:"inlineBlock","data-tip":_l("\u6295\u7968")},o.createElement("a",{className:"icon-votenobg Font18 NoUnderLine","data-targetdiv":"#Vote_updater"}))),o.createElement("div",{id:"Attachment_updater",className:"middleContent mBottom5 Hidden"},o.createElement(Me.Z,{dropPasteElement:"myUpdateItem_Content",onDropPasting:function(){e.textareaFocus(),e.handleOpen([])},arrowLeft:4,temporaryData:this.state.temporaryData,kcAttachmentData:this.state.kcAttachmentData,onTemporaryDataUpdate:function(r){e.handleOpen(r),e.setState({temporaryData:r})},onKcAttachmentDataUpdate:function(r){e.setState({kcAttachmentData:r})},onUploadComplete:function(r){e.handleUploadComplete(r)}}),o.createElement("div",{className:C()("addAttachmentToKc mTop10",{Hidden:!this.state.temporaryData.length})},o.createElement("input",{id:"addAttachmentToKcToggle",type:"checkbox"}),o.createElement("span",{id:"addAttachmentToKcLink",className:"ThemeColor3 Hand"},_l("\u672C\u5730\u6587\u4EF6\u5B58\u5165\u77E5\u8BC6\u4E2D\u5FC3"))),o.createElement("hr",{className:C()("updaterAttachmentSplitter ThemeBorderColor5",{Hidden:!(this.state.temporaryData.length||this.state.kcAttachmentData.length)})}),o.createElement("div",{id:"Div_JoinKnowledge",className:C()("mLeft0 mAll5 Left",{Hidden:!(this.state.temporaryData.length||this.state.kcAttachmentData.length)}),style:{width:"200px"}},o.createElement("input",{type:"text",className:"Hidden",id:"txtKnowledge",style:{width:"370px",opacity:0}}))),o.createElement("div",{id:"Link_updater",className:"middleContent Hidden"},o.createElement("div",{className:"arrowUpOuter",style:{left:"40px"}},o.createElement("div",{className:"arrowUpInner"})),o.createElement("div",{className:"updaterDialog_Main",style:{minHeight:"35px"}},o.createElement("div",{id:"uploadLink_Step1",className:"upload_Step1"},o.createElement("div",{className:"visualDocTextBox"},o.createElement("div",{className:"Left"},o.createElement("input",{type:"text",id:"text_LinkUrl",className:"TextBox linkTextBox"})),o.createElement("div",{className:"Right linkBtnArea"},o.createElement("input",{type:"button",className:"btnBootstrap btnBootstrap-primary btnBootstrap-small linkBtn",ref:function(r){e.linkBtn=r},onClick:this.viewLink,defaultValue:_l("\u9884\u89C8")})),o.createElement("div",{className:"clear"})),o.createElement("div",{className:"updaterLinkView uploadLinkContent"})))),o.createElement("div",{id:"Vote_updater",className:"middleContent Hidden"}),o.createElement("div",{className:"Right mTop5"},o.createElement("div",{className:"Right",style:{boxSizing:"border-box",marginTop:"2px"}},o.createElement("input",{id:"button_Share",type:"button",className:"TxtMiddle btnBootstrap btnBootstrap-primary btnBootstrap-small",style:{padding:"2px 15px"},ref:function(r){e.postBtn=r},onClick:this.post,value:_l("\u5206\u4EAB")})),o.createElement("div",{className:"Right"},o.createElement("input",{type:"hidden",id:"hidden_GroupID_All",value:""}))),o.createElement("div",{className:"Clear"}))))),o.createElement("div",{className:"Clear"})))}}]),t}(o.Component),ne.propTypes={defaultGroup:h().string,projectId:h().string},oe);const Ze=(0,V.$j)(function(p){var t=p.post.options,n=t.projectId,e=t.groupId;return{projectId:n,groupId:e}})(we);var He=i(43393),I=i.n(He),Oe=i(74108),Re=i(88239),Ke=i(42723),re,le,We=(le=re=function(p){(0,x.default)(t,p);function t(){var n,e,a,r;(0,N.default)(this,t);for(var l=arguments.length,s=Array(l),d=0;d<l;d++)s[d]=arguments[d];return r=(e=(a=(0,U.default)(this,(n=t.__proto__||A()(t)).call.apply(n,[this].concat(s))),a),a.handleKeyUp=function(m){m.which===13&&a.props.onSearch&&a.props.onSearch(m.target.value)},a.handleFocus=function(){$(H.findDOMNode(a)).addClass("ThemeBorderColor3").removeClass("ThemeBorderColor8")},a.handleBlur=function(){$(H.findDOMNode(a)).removeClass("ThemeBorderColor3").addClass("ThemeBorderColor8")},e),(0,U.default)(a,r)}return(0,k.default)(t,[{key:"render",value:function(){var e=this.props,a=e.onSearch,r=e.value,l=(0,Ke.Z)(e,["onSearch","value"]);return o.createElement("div",{className:"mdLeftNavSearch ThemeBorderColor8"},o.createElement("span",{className:"icon-search btnSearch ThemeColor9",title:_l("\u641C\u7D22")}),o.createElement("input",(0,Re.default)({},l,{value:r||"",onKeyUp:this.handleKeyUp,onFocus:this.handleFocus,onBlur:this.handleBlur,type:"text",className:"searchBox ThemeColor10",placeholder:_l("\u641C\u7D22")})))}}]),t}(o.Component),re.propTypes={value:h().string,defaultValue:h().string,onSearch:h().func,onChange:h().func},le);const Ye=We;var ie=i(62048),b=i(89158),M=i(33867),ze=i(84805),se=i(65406),P=i(36021),Je=i(23002),de,ce,pe,Qe=(ce=de=function(p){(0,x.default)(t,p);function t(n){(0,N.default)(this,t);var e=(0,U.default)(this,(t.__proto__||A()(t)).call(this,n));pe.call(e);var a=y()(md.global.Account.projects).map(function(v){return v.projectId}).push(""),r=void 0,l=localStorage.getItem("foldedProjects_"+md.global.Account.accountId+"_feed");l?r=I().Set(y().union(l.split(","),md.global.Account.projects.filter(function(v){return v.licenseType===0}).map(function(v){return v.projectId}))):l===""?r=I().Set():r=I().Set(a.value());var s=!(y().get(md.global,"Account.projects")||[]).length,d=void 0,m=void 0;return n.defaultGroups?(d=I().Set(),m=I().List(n.defaultGroups)):(d=I().Set(a.reject(function(v){return r.includes(v)}).value()),s&&(r=I().Set([]),d=I().Set([""])),m=I().List()),e.state={noneProjects:s,foldedProjects:r,loadingProjects:d,groups:m},e}return(0,k.default)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.state.foldedProjects.toArray();a.indexOf("")>-1&&md.global.Account.projects.map(function(r){return r.projectId}).every(function(r){return a.indexOf(r)>-1})||this.props.defaultGroups&&this.props.defaultGroups.size||se.Z.getGroupsNameAndIsVerified({excludeProjectIds:this.state.foldedProjects.size?this.state.foldedProjects.join(","):void 0}).then(function(r){e.setState({groups:I().List(r.list),loadingProjects:I().Set()})})}},{key:"componentWillReceiveProps",value:function(e){e.options.keywords!==this.state.searchAllKeywords&&this.setState({searchAllKeywords:null})}},{key:"shouldComponentUpdate",value:function(e,a){return!O()(a,this.state)||!O()(e,this.props)}},{key:"componentDidUpdate",value:function(e,a){!this.locatedDefaultGroup&&$(".avatarList .Item.ThemeBGColor8").length&&($(".groupListContainer .nano-content").scrollTop($(".avatarList .Item.ThemeBGColor8").position().top),this.locatedDefaultGroup=!0);var r="foldedProjects_"+md.global.Account.accountId+"_feed";safeLocalStorageSetItem(r,this.state.foldedProjects.join(","))}},{key:"render",value:function(){var e=this;return o.createElement(Oe.Z,{className:"feedLeftNav ThemeBGColor9"},o.createElement(Ye,{value:this.state.searchAllKeywords,onChange:function(r){e.setState({searchAllKeywords:r.target.value})},onSearch:function(r){e.props.dispatch((0,S.fe)(r))}}),o.createElement(ie.Z,{className:"iconList feedFixedList"},o.createElement(b.Z,{icon:o.createElement(M.Z,{icon:"mingdao LineHeight40"}),onClick:function(){return(0,P.T8)("/feed")},className:C()("LineHeight40",{ThemeBGColor8:!this.props.options.groupId&&!this.props.options.projectId&&this.props.options.projectId!==""&&this.props.options.listType===g.Z.LIST_TYPE.project})},o.createElement("span",{className:"itemContent ThemeColor10"},_l("\u5168\u90E8\u52A8\u6001"),this.props.hasNew&&o.createElement("span",{title:_l("\u6709\u65B0\u7684\u52A8\u6001\u66F4\u65B0"),style:{width:6,height:6,borderRadius:"100%",background:"red",position:"absolute",top:17,right:20}}))),o.createElement(b.Z,{icon:o.createElement(M.Z,{icon:"charger LineHeight40"}),onClick:function(){return(0,P.T8)("/feed?listType="+g.Z.LIST_TYPE.user+"&accountId="+md.global.Account.accountId)},className:C()("LineHeight40",{ThemeBGColor8:(this.props.options.listType===g.Z.LIST_TYPE.user||this.props.options.listType===g.Z.LIST_TYPE.ireply)&&this.props.options.accountId===md.global.Account.accountId})},o.createElement("span",{className:"itemContent ThemeColor10"},_l("\u6211\u7684\u52A8\u6001"))),o.createElement(b.Z,{icon:o.createElement(M.Z,{icon:"task-star LineHeight40"}),className:C()("LineHeight40",{ThemeBGColor8:this.props.options.listType===g.Z.LIST_TYPE.fav}),onClick:function(){return(0,P.T8)("/feed?listType="+g.Z.LIST_TYPE.fav)}},o.createElement("span",{className:"ThemeColor10"},_l("\u661F\u6807\u52A8\u6001")))),o.createElement(ze.Z,{className:"ThemeBorderColor7"}),o.createElement("div",{className:"clearfix panelHead"},o.createElement("div",{className:"left panelTitle ThemeColor8"},_l("\u7FA4\u7EC4")),o.createElement("div",{className:"right panelIcon Hand ThemeColor9 ThemeHoverColor10",onClick:function(r){return e.createGroup(r)}},"+")),o.createElement(X.Z,{className:"groupListContainer flex",disableParentScroll:!0},y()(md.global.Account.projects).map(function(a){return a.projectId}).push("").map(function(a,r){return e.renderProjectGroups(a,r)}).value()))}}]),t}(o.Component),de.propTypes={dispatch:h().func,hasNew:h().bool,defaultGroups:h().array,options:h().shape({listType:h().string,projectId:h().string,groupId:h().string,accountId:h().string})},pe=function(){var t=this;this.getCreateGroupIcon=function(n){return o.createElement("div",{className:"right panelIcon Hand ThemeColor9 ThemeHoverColor10",onClick:function(a){return t.createGroup(a,n)}},"+")},this.fetchGroupsByProjectId=function(n,e){if(!t.state.loadingProjects.includes(n)){var a=t.state.loadingProjects.add(n),r=t.state.foldedProjects;e&&(r=r.delete(n)),t.setState({loadingProjects:a,foldedProjects:r})}var l={};return n?l.projectId=n:l.excludeProjectIds=y()(md.global.Account.projects).map(function(s){return s.projectId}).push("").reject(function(s){return s===n}).value().join(","),se.Z.getGroupsNameAndIsVerified(l).then(function(s){var d=s.list;t.setState({groups:t.state.groups.filter(function(m){return!y().some(d,function(v){return v.groupId===m.groupId})}).concat(d),loadingProjects:t.state.loadingProjects.delete(n)})})},this.createGroup=function(n,e){n.preventDefault(),n.stopPropagation(),Je.Z.createInit({projectId:e,callback:function(r){window.location.href="/feed?groupId="+r.groupId}})},this.toggleFoldProject=function(n){if(t.state.foldedProjects.includes(n))t.fetchGroupsByProjectId(n,!0);else{var e=t.state.foldedProjects.add(n);t.setState({foldedProjects:e})}},this.renderProjectGroups=function(n,e){n=n||"";var a=t.state.foldedProjects.includes(n),r=t.state.loadingProjects.includes(n),l=y().find(md.global.Account.projects,function(u){return u.projectId===n}),s=void 0;if(n)s=t.state.groups.filter(function(u){return u.projectId===n});else{var d=y().map(md.global.Account.projects,function(u){return u.projectId});s=t.state.groups.filter(function(u){return d.indexOf(u.projectId||"")===-1})}s=s.toArray();var m=o.createElement("div",{className:C()("folderProjectTitle ThemeColor10 ThemeHoverBGColor7",{isLoading:r,folded:a,hide:t.state.noneProjects,ThemeBGColor8:t.props.options.projectId===n&&!t.props.options.groupId&&t.props.options.listType===g.Z.LIST_TYPE.project}),onClick:function(){return(0,P.T8)("/feed?projectId="+n)}},o.createElement("span",{className:l&&l.licenseType===0?"contentName ThemeColor8":"contentName ThemeColor9",title:l?l.companyName:_l("\u4E2A\u4EBA")},o.createElement("span",{className:"companyName ellipsis"},l?l.companyName:_l("\u4E2A\u4EBA")),l&&l.licenseType===0&&_l("\uFF08\u5230\u671F\uFF09")),r?o.createElement("span",{className:"clipLoader ThemeColor8"}):o.createElement("span",{className:"ThemeColor8 slide",onClick:function(Y){Y.stopPropagation(),t.toggleFoldProject(n)}}," ",a?_l("\u5C55\u5F00"):r||s.length||n===""?_l("\u9690\u85CF"):_l("\u65E0"))),v=!a&&(r?void 0:o.createElement(ie.Z,{className:C()("avatarList",{expire:l&&l.licenseType===0})},!s.length&&n===""&&!md.global.Account.projects.length?o.createElement("li",{key:"addGroup",className:"nullData ThemeColor9"},o.createElement("span",null,_l('\u70B9\u51FB " + " \u53F7\uFF0C\u521B\u5EFA\u65B0\u7FA4\u7EC4'),o.createElement("i",{className:"icon-restart arrow ThemeColor8"}))):y()(s).map(function(u){return o.createElement(b.Z,{iconAtEnd:u.isVerified,key:u.groupId,className:C()({ThemeHoverBGColor7:!0,ThemeBGColor8:!!t.props.options.groupId&&t.props.options.groupId===u.groupId,folded:a}),onClick:function(){return(0,P.T8)("/feed?groupId="+u.groupId+"&projectId="+n)}},o.createElement("img",{className:"avatar",src:u.avatar.includes("?")>0?u.avatar.replace(/imageView2\/\d\/w\/\d+\/h\/\d+(\/q\/\d+)?/,"imageView2/1/w/48/h/48/q/100"):u.avatar+"?imageView2/1/w/48/h/48/q/100",placeholder:u.avatar}),o.createElement("span",{className:"ThemeColor10",title:u.name},u.name),u.isVerified&&o.createElement(M.Z,{className:"LineHeight40",icon:"official-group",title:_l("\u5B98\u65B9\u7FA4\u7EC4")}))}).concat(n?[]:[o.createElement(b.Z,{key:"myself",onClick:function(){return(0,P.T8)("/feed?listType="+g.Z.LIST_TYPE.myself)},className:C()({ThemeHoverBGColor7:!0,ThemeBGColor8:t.props.options.listType===g.Z.LIST_TYPE.myself&&t.props.options.projectId===n,folded:a})},o.createElement("span",{className:"ThemeColor10"},_l("\u6211\u81EA\u5DF1")))]).value()));return o.createElement("div",{className:"folderProjectItem",key:n},m,v)}},ce);const Xe=(0,V.$j)(function(p){var t=p.post.options;return{options:t}})(Qe);var mt=i(90617),ht=i(41),ue,me,qe=(me=ue=function(p){(0,x.default)(t,p);function t(){return(0,N.default)(this,t),(0,U.default)(this,(t.__proto__||A()(t)).apply(this,arguments))}return(0,k.default)(t,[{key:"render",value:function(){return o.createElement(X.Z,{className:"feedApp clearfix feedAppScroll",scrollContentClassName:"feedAppScrollContent"},o.createElement("div",{className:"mdLeftNav feedLeftNav ThemeBG  feedLeftNavGlass"}),o.createElement(Xe,{defaultGroups:this.props.defaultExpandedGroup}),o.createElement("div",{className:"left feedContainer relative"},o.createElement("div",{className:"contentLeft clearfix"},o.createElement("div",{className:"feedContainerMain Left"},o.createElement(Ze,null),o.createElement(Se,null),o.createElement(De.Z,null)))))}}]),t}(o.Component),ue.propTypes={defaultExpandedGroup:h().array},me);const et=qe;var he,fe,tt=(he=(0,V.$j)(),he(fe=function(p){(0,x.default)(t,p);function t(){return(0,N.default)(this,t),(0,U.default)(this,(t.__proto__||A()(t)).apply(this,arguments))}return(0,k.default)(t,[{key:"componentDidMount",value:function(){$("html").addClass("AppFeed"),this.handleUpdate()}},{key:"componentDidUpdate",value:function(){this.handleUpdate()}},{key:"componentWillUnmount",value:function(){$("html").removeClass("AppFeed")}},{key:"handleUpdate",value:function(){var e=Te.parse(this.props.location.search.slice(1)),a=$e()({},e,{listType:e.listType||g.Z.LIST_TYPE.project,groupId:e.groupId||e.groupID||null,accountId:e.accountId||e.accountID||null,tagId:e.tagId||e.tagID||null,catId:e.catId||e.catID||null});delete a.groupID,delete a.accountID,delete a.tagID,delete a.catID,a.listType===g.Z.LIST_TYPE.project&&(a.accountId?a.listType="user":a.groupId&&(a.listType="group")),this.props.dispatch((0,S.xe)(a)),this.props.dispatch((0,S.r1)(null))}},{key:"render",value:function(){return o.createElement(et,null)}}]),t}(o.Component))||fe)}}]);
